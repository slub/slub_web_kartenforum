var vk2=(()=>{var Xqe=Object.create;var Yy=Object.defineProperty,Qqe=Object.defineProperties,Jqe=Object.getOwnPropertyDescriptor,e2e=Object.getOwnPropertyDescriptors,t2e=Object.getOwnPropertyNames,LV=Object.getOwnPropertySymbols,r2e=Object.getPrototypeOf,DV=Object.prototype.hasOwnProperty,n2e=Object.prototype.propertyIsEnumerable;var vw=Math.pow,lq=(e,t,r)=>t in e?Yy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uq=(e,t)=>{for(var r in t||(t={}))DV.call(t,r)&&lq(e,r,t[r]);if(LV)for(var r of LV(t))n2e.call(t,r)&&lq(e,r,t[r]);return e},cq=(e,t)=>Qqe(e,e2e(t));var I=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),i2e=(e,t)=>{for(var r in t)Yy(e,r,{get:t[r],enumerable:!0})},kV=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of t2e(t))!DV.call(e,i)&&i!==r&&Yy(e,i,{get:()=>t[i],enumerable:!(n=Jqe(t,i))||n.enumerable});return e};var He=(e,t,r)=>(r=e!=null?Xqe(r2e(e)):{},kV(t||!e||!e.__esModule?Yy(r,"default",{value:e,enumerable:!0}):r,e)),o2e=e=>kV(Yy({},"__esModule",{value:!0}),e);var Ii=(e,t,r)=>lq(e,typeof t!="symbol"?t+"":t,r);var ta=(e,t,r)=>new Promise((n,i)=>{var o=x=>{try{v(r.next(x))}catch(E){i(E)}},f=x=>{try{v(r.throw(x))}catch(E){i(E)}},v=x=>x.done?n(x.value):Promise.resolve(x.value).then(o,f);v((r=r.apply(e,t)).next())});var hq=I((XBt,FV)=>{"use strict";var NV=Object.getOwnPropertySymbols,a2e=Object.prototype.hasOwnProperty,s2e=Object.prototype.propertyIsEnumerable;function l2e(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function u2e(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch(o){return!1}}FV.exports=u2e()?Object.assign:function(e,t){for(var r,n=l2e(e),i,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var f in r)a2e.call(r,f)&&(n[f]=r[f]);if(NV){i=NV(r);for(var v=0;v<i.length;v++)s2e.call(r,i[v])&&(n[i[v]]=r[i[v]])}}return n}});var e$=I(mr=>{"use strict";var pq=hq(),nm=60103,BV=60106;mr.Fragment=60107;mr.StrictMode=60108;mr.Profiler=60114;var UV=60109,VV=60110,$V=60112;mr.Suspense=60113;var GV=60115,ZV=60116;typeof Symbol=="function"&&Symbol.for&&(Qa=Symbol.for,nm=Qa("react.element"),BV=Qa("react.portal"),mr.Fragment=Qa("react.fragment"),mr.StrictMode=Qa("react.strict_mode"),mr.Profiler=Qa("react.profiler"),UV=Qa("react.provider"),VV=Qa("react.context"),$V=Qa("react.forward_ref"),mr.Suspense=Qa("react.suspense"),GV=Qa("react.memo"),ZV=Qa("react.lazy"));var Qa,zV=typeof Symbol=="function"&&Symbol.iterator;function c2e(e){return e===null||typeof e!="object"?null:(e=zV&&e[zV]||e["@@iterator"],typeof e=="function"?e:null)}function Xy(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var WV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},HV={};function im(e,t,r){this.props=e,this.context=t,this.refs=HV,this.updater=r||WV}im.prototype.isReactComponent={};im.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(Xy(85));this.updater.enqueueSetState(this,e,t,"setState")};im.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function KV(){}KV.prototype=im.prototype;function dq(e,t,r){this.props=e,this.context=t,this.refs=HV,this.updater=r||WV}var mq=dq.prototype=new KV;mq.constructor=dq;pq(mq,im.prototype);mq.isPureReactComponent=!0;var vq={current:null},YV=Object.prototype.hasOwnProperty,XV={key:!0,ref:!0,__self:!0,__source:!0};function QV(e,t,r){var n,i={},o=null,f=null;if(t!=null)for(n in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(o=""+t.key),t)YV.call(t,n)&&!XV.hasOwnProperty(n)&&(i[n]=t[n]);var v=arguments.length-2;if(v===1)i.children=r;else if(1<v){for(var x=Array(v),E=0;E<v;E++)x[E]=arguments[E+2];i.children=x}if(e&&e.defaultProps)for(n in v=e.defaultProps,v)i[n]===void 0&&(i[n]=v[n]);return{$$typeof:nm,type:e,key:o,ref:f,props:i,_owner:vq.current}}function h2e(e,t){return{$$typeof:nm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function gq(e){return typeof e=="object"&&e!==null&&e.$$typeof===nm}function f2e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var jV=/\/+/g;function fq(e,t){return typeof e=="object"&&e!==null&&e.key!=null?f2e(""+e.key):t.toString(36)}function yw(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(o){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case nm:case BV:f=!0}}if(f)return f=e,i=i(f),e=n===""?"."+fq(f,0):n,Array.isArray(i)?(r="",e!=null&&(r=e.replace(jV,"$&/")+"/"),yw(i,t,r,"",function(E){return E})):i!=null&&(gq(i)&&(i=h2e(i,r+(!i.key||f&&f.key===i.key?"":(""+i.key).replace(jV,"$&/")+"/")+e)),t.push(i)),1;if(f=0,n=n===""?".":n+":",Array.isArray(e))for(var v=0;v<e.length;v++){o=e[v];var x=n+fq(o,v);f+=yw(o,t,r,x,i)}else if(x=c2e(e),typeof x=="function")for(e=x.call(e),v=0;!(o=e.next()).done;)o=o.value,x=n+fq(o,v++),f+=yw(o,t,r,x,i);else if(o==="object")throw t=""+e,Error(Xy(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return f}function gw(e,t,r){if(e==null)return e;var n=[],i=0;return yw(e,n,"","",function(o){return t.call(r,o,i++)}),n}function p2e(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var JV={current:null};function Eu(){var e=JV.current;if(e===null)throw Error(Xy(321));return e}var d2e={ReactCurrentDispatcher:JV,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:vq,IsSomeRendererActing:{current:!1},assign:pq};mr.Children={map:gw,forEach:function(e,t,r){gw(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return gw(e,function(){t++}),t},toArray:function(e){return gw(e,function(t){return t})||[]},only:function(e){if(!gq(e))throw Error(Xy(143));return e}};mr.Component=im;mr.PureComponent=dq;mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d2e;mr.cloneElement=function(e,t,r){if(e==null)throw Error(Xy(267,e));var n=pq({},e.props),i=e.key,o=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,f=vq.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var v=e.type.defaultProps;for(x in t)YV.call(t,x)&&!XV.hasOwnProperty(x)&&(n[x]=t[x]===void 0&&v!==void 0?v[x]:t[x])}var x=arguments.length-2;if(x===1)n.children=r;else if(1<x){v=Array(x);for(var E=0;E<x;E++)v[E]=arguments[E+2];n.children=v}return{$$typeof:nm,type:e.type,key:i,ref:o,props:n,_owner:f}};mr.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:VV,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:UV,_context:e},e.Consumer=e};mr.createElement=QV;mr.createFactory=function(e){var t=QV.bind(null,e);return t.type=e,t};mr.createRef=function(){return{current:null}};mr.forwardRef=function(e){return{$$typeof:$V,render:e}};mr.isValidElement=gq;mr.lazy=function(e){return{$$typeof:ZV,_payload:{_status:-1,_result:e},_init:p2e}};mr.memo=function(e,t){return{$$typeof:GV,type:e,compare:t===void 0?null:t}};mr.useCallback=function(e,t){return Eu().useCallback(e,t)};mr.useContext=function(e,t){return Eu().useContext(e,t)};mr.useDebugValue=function(){};mr.useEffect=function(e,t){return Eu().useEffect(e,t)};mr.useImperativeHandle=function(e,t,r){return Eu().useImperativeHandle(e,t,r)};mr.useLayoutEffect=function(e,t){return Eu().useLayoutEffect(e,t)};mr.useMemo=function(e,t){return Eu().useMemo(e,t)};mr.useReducer=function(e,t,r){return Eu().useReducer(e,t,r)};mr.useRef=function(e){return Eu().useRef(e)};mr.useState=function(e){return Eu().useState(e)};mr.version="17.0.2"});var rr=I((JBt,t$)=>{"use strict";t$.exports=e$()});var s$=I(Ir=>{"use strict";var am,e_,ww,Tq;typeof performance=="object"&&typeof performance.now=="function"?(r$=performance,Ir.unstable_now=function(){return r$.now()}):(yq=Date,n$=yq.now(),Ir.unstable_now=function(){return yq.now()-n$});var r$,yq,n$;typeof window=="undefined"||typeof MessageChannel!="function"?(om=null,_q=null,xq=function(){if(om!==null)try{var e=Ir.unstable_now();om(!0,e),om=null}catch(t){throw setTimeout(xq,0),t}},am=function(e){om!==null?setTimeout(am,0,e):(om=e,setTimeout(xq,0))},e_=function(e,t){_q=setTimeout(e,t)},ww=function(){clearTimeout(_q)},Ir.unstable_shouldYield=function(){return!1},Tq=Ir.unstable_forceFrameRate=function(){}):(i$=window.setTimeout,o$=window.clearTimeout,typeof console!="undefined"&&(a$=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof a$!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),Qy=!1,Jy=null,_w=-1,bq=5,wq=0,Ir.unstable_shouldYield=function(){return Ir.unstable_now()>=wq},Tq=function(){},Ir.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):bq=0<e?Math.floor(1e3/e):5},Eq=new MessageChannel,xw=Eq.port2,Eq.port1.onmessage=function(){if(Jy!==null){var e=Ir.unstable_now();wq=e+bq;try{Jy(!0,e)?xw.postMessage(null):(Qy=!1,Jy=null)}catch(t){throw xw.postMessage(null),t}}else Qy=!1},am=function(e){Jy=e,Qy||(Qy=!0,xw.postMessage(null))},e_=function(e,t){_w=i$(function(){e(Ir.unstable_now())},t)},ww=function(){o$(_w),_w=-1});var om,_q,xq,i$,o$,a$,Qy,Jy,_w,bq,wq,Eq,xw;function Sq(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,i=e[n];if(i!==void 0&&0<bw(i,t))e[n]=t,e[r]=i,r=n;else break e}}function zs(e){return e=e[0],e===void 0?null:e}function Ew(e){var t=e[0];if(t!==void 0){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length;n<i;){var o=2*(n+1)-1,f=e[o],v=o+1,x=e[v];if(f!==void 0&&0>bw(f,r))x!==void 0&&0>bw(x,f)?(e[n]=x,e[v]=r,n=v):(e[n]=f,e[o]=r,n=o);else if(x!==void 0&&0>bw(x,r))e[n]=x,e[v]=r,n=v;else break e}}return t}return null}function bw(e,t){var r=e.sortIndex-t.sortIndex;return r!==0?r:e.id-t.id}var _l=[],Uc=[],m2e=1,Ja=null,ho=3,Tw=!1,Xf=!1,t_=!1;function Iq(e){for(var t=zs(Uc);t!==null;){if(t.callback===null)Ew(Uc);else if(t.startTime<=e)Ew(Uc),t.sortIndex=t.expirationTime,Sq(_l,t);else break;t=zs(Uc)}}function Cq(e){if(t_=!1,Iq(e),!Xf)if(zs(_l)!==null)Xf=!0,am(Pq);else{var t=zs(Uc);t!==null&&e_(Cq,t.startTime-e)}}function Pq(e,t){Xf=!1,t_&&(t_=!1,ww()),Tw=!0;var r=ho;try{for(Iq(t),Ja=zs(_l);Ja!==null&&(!(Ja.expirationTime>t)||e&&!Ir.unstable_shouldYield());){var n=Ja.callback;if(typeof n=="function"){Ja.callback=null,ho=Ja.priorityLevel;var i=n(Ja.expirationTime<=t);t=Ir.unstable_now(),typeof i=="function"?Ja.callback=i:Ja===zs(_l)&&Ew(_l),Iq(t)}else Ew(_l);Ja=zs(_l)}if(Ja!==null)var o=!0;else{var f=zs(Uc);f!==null&&e_(Cq,f.startTime-t),o=!1}return o}finally{Ja=null,ho=r,Tw=!1}}var v2e=Tq;Ir.unstable_IdlePriority=5;Ir.unstable_ImmediatePriority=1;Ir.unstable_LowPriority=4;Ir.unstable_NormalPriority=3;Ir.unstable_Profiling=null;Ir.unstable_UserBlockingPriority=2;Ir.unstable_cancelCallback=function(e){e.callback=null};Ir.unstable_continueExecution=function(){Xf||Tw||(Xf=!0,am(Pq))};Ir.unstable_getCurrentPriorityLevel=function(){return ho};Ir.unstable_getFirstCallbackNode=function(){return zs(_l)};Ir.unstable_next=function(e){switch(ho){case 1:case 2:case 3:var t=3;break;default:t=ho}var r=ho;ho=t;try{return e()}finally{ho=r}};Ir.unstable_pauseExecution=function(){};Ir.unstable_requestPaint=v2e;Ir.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=ho;ho=e;try{return t()}finally{ho=r}};Ir.unstable_scheduleCallback=function(e,t,r){var n=Ir.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=r+i,e={id:m2e++,callback:t,priorityLevel:e,startTime:r,expirationTime:i,sortIndex:-1},r>n?(e.sortIndex=r,Sq(Uc,e),zs(_l)===null&&e===zs(Uc)&&(t_?ww():t_=!0,e_(Cq,r-n))):(e.sortIndex=i,Sq(_l,e),Xf||Tw||(Xf=!0,am(Pq))),e};Ir.unstable_wrapCallback=function(e){var t=ho;return function(){var r=ho;ho=t;try{return e.apply(this,arguments)}finally{ho=r}}}});var u$=I((t3t,l$)=>{"use strict";l$.exports=s$()});var KG=I(os=>{"use strict";var gE=rr(),hn=hq(),Ci=u$();function rt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!gE)throw Error(rt(227));var w8=new Set,q_={};function lp(e,t){Cm(e,t),Cm(e+"Capture",t)}function Cm(e,t){for(q_[e]=t,e=0;e<t.length;e++)w8.add(t[e])}var Mu=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),g2e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c$=Object.prototype.hasOwnProperty,h$={},f$={};function y2e(e){return c$.call(f$,e)?!0:c$.call(h$,e)?!1:g2e.test(e)?f$[e]=!0:(h$[e]=!0,!1)}function _2e(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function x2e(e,t,r,n){if(t===null||typeof t=="undefined"||_2e(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ko(e,t,r,n,i,o,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=f}var Gi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Gi[e]=new ko(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Gi[t]=new ko(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Gi[e]=new ko(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Gi[e]=new ko(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Gi[e]=new ko(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Gi[e]=new ko(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Gi[e]=new ko(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Gi[e]=new ko(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Gi[e]=new ko(e,5,!1,e.toLowerCase(),null,!1,!1)});var N2=/[\-:]([a-z])/g;function F2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(N2,F2);Gi[t]=new ko(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(N2,F2);Gi[t]=new ko(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(N2,F2);Gi[t]=new ko(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Gi[e]=new ko(e,1,!1,e.toLowerCase(),null,!1,!1)});Gi.xlinkHref=new ko("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Gi[e]=new ko(e,1,!1,e.toLowerCase(),null,!0,!0)});function z2(e,t,r,n){var i=Gi.hasOwnProperty(t)?Gi[t]:null,o=i!==null?i.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");o||(x2e(t,r,i,n)&&(r=null),n||i===null?y2e(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var up=gE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d_=60103,Jf=60106,$c=60107,j2=60108,__=60114,B2=60109,U2=60110,yE=60112,x_=60113,Hw=60120,_E=60115,V2=60116,$2=60121,G2=60128,E8=60129,Z2=60130,Xq=60131;typeof Symbol=="function"&&Symbol.for&&(pi=Symbol.for,d_=pi("react.element"),Jf=pi("react.portal"),$c=pi("react.fragment"),j2=pi("react.strict_mode"),__=pi("react.profiler"),B2=pi("react.provider"),U2=pi("react.context"),yE=pi("react.forward_ref"),x_=pi("react.suspense"),Hw=pi("react.suspense_list"),_E=pi("react.memo"),V2=pi("react.lazy"),$2=pi("react.block"),pi("react.scope"),G2=pi("react.opaque.id"),E8=pi("react.debug_trace_mode"),Z2=pi("react.offscreen"),Xq=pi("react.legacy_hidden"));var pi,p$=typeof Symbol=="function"&&Symbol.iterator;function r_(e){return e===null||typeof e!="object"?null:(e=p$&&e[p$]||e["@@iterator"],typeof e=="function"?e:null)}var Mq;function m_(e){if(Mq===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Mq=t&&t[1]||""}return`
`+Mq+e}var Aq=!1;function Sw(e,t){if(!e||Aq)return"";Aq=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(x){var n=x}Reflect.construct(e,[],t)}else{try{t.call()}catch(x){n=x}e.call(t.prototype)}}else{try{throw Error()}catch(x){n=x}e()}}catch(x){if(x&&n&&typeof x.stack=="string"){for(var i=x.stack.split(`
`),o=n.stack.split(`
`),f=i.length-1,v=o.length-1;1<=f&&0<=v&&i[f]!==o[v];)v--;for(;1<=f&&0<=v;f--,v--)if(i[f]!==o[v]){if(f!==1||v!==1)do if(f--,v--,0>v||i[f]!==o[v])return`
`+i[f].replace(" at new "," at ");while(1<=f&&0<=v);break}}}finally{Aq=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?m_(e):""}function b2e(e){switch(e.tag){case 5:return m_(e.type);case 16:return m_("Lazy");case 13:return m_("Suspense");case 19:return m_("SuspenseList");case 0:case 2:case 15:return e=Sw(e.type,!1),e;case 11:return e=Sw(e.type.render,!1),e;case 22:return e=Sw(e.type._render,!1),e;case 1:return e=Sw(e.type,!0),e;default:return""}}function gm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $c:return"Fragment";case Jf:return"Portal";case __:return"Profiler";case j2:return"StrictMode";case x_:return"Suspense";case Hw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case U2:return(e.displayName||"Context")+".Consumer";case B2:return(e._context.displayName||"Context")+".Provider";case yE:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case _E:return gm(e.type);case $2:return gm(e._render);case V2:t=e._payload,e=e._init;try{return gm(e(t))}catch(r){}}return null}function rh(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function T8(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function w2e(e){var t=T8(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(f){n=""+f,o.call(this,f)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(f){n=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Iw(e){e._valueTracker||(e._valueTracker=w2e(e))}function S8(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=T8(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Kw(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Qq(e,t){var r=t.checked;return hn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function d$(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=rh(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function I8(e,t){t=t.checked,t!=null&&z2(e,"checked",t,!1)}function Jq(e,t){I8(e,t);var r=rh(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?e2(e,t.type,r):t.hasOwnProperty("defaultValue")&&e2(e,t.type,rh(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function m$(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function e2(e,t,r){(t!=="number"||Kw(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function E2e(e){var t="";return gE.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function t2(e,t){return e=hn({children:void 0},t),(t=E2e(t.children))&&(e.children=t),e}function ym(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+rh(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function r2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(rt(91));return hn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function v$(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(rt(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(rt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:rh(r)}}function C8(e,t){var r=rh(t.value),n=rh(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function g$(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var n2={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function P8(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function i2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?P8(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Cw,M8=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!==n2.svg||"innerHTML"in e)e.innerHTML=t;else{for(Cw=Cw||document.createElement("div"),Cw.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Cw.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function R_(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var b_={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},T2e=["Webkit","ms","Moz","O"];Object.keys(b_).forEach(function(e){T2e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),b_[t]=b_[e]})});function A8(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||b_.hasOwnProperty(e)&&b_[e]?(""+t).trim():t+"px"}function q8(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=A8(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var S2e=hn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function o2(e,t){if(t){if(S2e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(rt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(rt(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(rt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(rt(62))}}function a2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function W2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var s2=null,_m=null,xm=null;function y$(e){if(e=Z_(e)){if(typeof s2!="function")throw Error(rt(280));var t=e.stateNode;t&&(t=SE(t),s2(e.stateNode,e.type,t))}}function R8(e){_m?xm?xm.push(e):xm=[e]:_m=e}function O8(){if(_m){var e=_m,t=xm;if(xm=_m=null,y$(e),t)for(e=0;e<t.length;e++)y$(t[e])}}function H2(e,t){return e(t)}function L8(e,t,r,n,i){return e(t,r,n,i)}function K2(){}var D8=H2,ep=!1,qq=!1;function Y2(){(_m!==null||xm!==null)&&(K2(),O8())}function I2e(e,t,r){if(qq)return e(t,r);qq=!0;try{return D8(e,t,r)}finally{qq=!1,Y2()}}function O_(e,t){var r=e.stateNode;if(r===null)return null;var n=SE(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(rt(231,t,typeof r));return r}var l2=!1;if(Mu)try{sm={},Object.defineProperty(sm,"passive",{get:function(){l2=!0}}),window.addEventListener("test",sm,sm),window.removeEventListener("test",sm,sm)}catch(e){l2=!1}var sm;function C2e(e,t,r,n,i,o,f,v,x){var E=Array.prototype.slice.call(arguments,3);try{t.apply(r,E)}catch(S){this.onError(S)}}var w_=!1,Yw=null,Xw=!1,u2=null,P2e={onError:function(e){w_=!0,Yw=e}};function M2e(e,t,r,n,i,o,f,v,x){w_=!1,Yw=null,C2e.apply(P2e,arguments)}function A2e(e,t,r,n,i,o,f,v,x){if(M2e.apply(this,arguments),w_){if(w_){var E=Yw;w_=!1,Yw=null}else throw Error(rt(198));Xw||(Xw=!0,u2=E)}}function cp(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&1026)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function k8(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _$(e){if(cp(e)!==e)throw Error(rt(188))}function q2e(e){var t=e.alternate;if(!t){if(t=cp(e),t===null)throw Error(rt(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return _$(i),e;if(o===n)return _$(i),t;o=o.sibling}throw Error(rt(188))}if(r.return!==n.return)r=i,n=o;else{for(var f=!1,v=i.child;v;){if(v===r){f=!0,r=i,n=o;break}if(v===n){f=!0,n=i,r=o;break}v=v.sibling}if(!f){for(v=o.child;v;){if(v===r){f=!0,r=o,n=i;break}if(v===n){f=!0,n=o,r=i;break}v=v.sibling}if(!f)throw Error(rt(189))}}if(r.alternate!==n)throw Error(rt(190))}if(r.tag!==3)throw Error(rt(188));return r.stateNode.current===r?e:t}function N8(e){if(e=q2e(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function x$(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var F8,X2,z8,j8,c2=!1,xl=[],Hc=null,Kc=null,Yc=null,L_=new Map,D_=new Map,n_=[],b$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function h2(e,t,r,n,i){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[n]}}function w$(e,t){switch(e){case"focusin":case"focusout":Hc=null;break;case"dragenter":case"dragleave":Kc=null;break;case"mouseover":case"mouseout":Yc=null;break;case"pointerover":case"pointerout":L_.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":D_.delete(t.pointerId)}}function i_(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e=h2(t,r,n,i,o),t!==null&&(t=Z_(t),t!==null&&X2(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function R2e(e,t,r,n,i){switch(t){case"focusin":return Hc=i_(Hc,e,t,r,n,i),!0;case"dragenter":return Kc=i_(Kc,e,t,r,n,i),!0;case"mouseover":return Yc=i_(Yc,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return L_.set(o,i_(L_.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,D_.set(o,i_(D_.get(o)||null,e,t,r,n,i)),!0}return!1}function O2e(e){var t=tp(e.target);if(t!==null){var r=cp(t);if(r!==null){if(t=r.tag,t===13){if(t=k8(r),t!==null){e.blockedOn=t,j8(e.lanePriority,function(){Ci.unstable_runWithPriority(e.priority,function(){z8(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fw(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=tR(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=Z_(r),t!==null&&X2(t),e.blockedOn=r,!1;t.shift()}return!0}function E$(e,t,r){Fw(e)&&r.delete(t)}function L2e(){for(c2=!1;0<xl.length;){var e=xl[0];if(e.blockedOn!==null){e=Z_(e.blockedOn),e!==null&&F8(e);break}for(var t=e.targetContainers;0<t.length;){var r=tR(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&xl.shift()}Hc!==null&&Fw(Hc)&&(Hc=null),Kc!==null&&Fw(Kc)&&(Kc=null),Yc!==null&&Fw(Yc)&&(Yc=null),L_.forEach(E$),D_.forEach(E$)}function o_(e,t){e.blockedOn===t&&(e.blockedOn=null,c2||(c2=!0,Ci.unstable_scheduleCallback(Ci.unstable_NormalPriority,L2e)))}function B8(e){function t(i){return o_(i,e)}if(0<xl.length){o_(xl[0],e);for(var r=1;r<xl.length;r++){var n=xl[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Hc!==null&&o_(Hc,e),Kc!==null&&o_(Kc,e),Yc!==null&&o_(Yc,e),L_.forEach(t),D_.forEach(t),r=0;r<n_.length;r++)n=n_[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<n_.length&&(r=n_[0],r.blockedOn===null);)O2e(r),r.blockedOn===null&&n_.shift()}function Pw(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var hm={animationend:Pw("Animation","AnimationEnd"),animationiteration:Pw("Animation","AnimationIteration"),animationstart:Pw("Animation","AnimationStart"),transitionend:Pw("Transition","TransitionEnd")},Rq={},U8={};Mu&&(U8=document.createElement("div").style,"AnimationEvent"in window||(delete hm.animationend.animation,delete hm.animationiteration.animation,delete hm.animationstart.animation),"TransitionEvent"in window||delete hm.transitionend.transition);function xE(e){if(Rq[e])return Rq[e];if(!hm[e])return e;var t=hm[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in U8)return Rq[e]=t[r];return e}var V8=xE("animationend"),$8=xE("animationiteration"),G8=xE("animationstart"),Z8=xE("transitionend"),W8=new Map,Q2=new Map,D2e=["abort","abort",V8,"animationEnd",$8,"animationIteration",G8,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Z8,"transitionEnd","waiting","waiting"];function J2(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Q2.set(n,t),W8.set(n,i),lp(i,[n])}}var k2e=Ci.unstable_now;k2e();var Hr=8;function um(e){if((1&e)!==0)return Hr=15,1;if((2&e)!==0)return Hr=14,2;if((4&e)!==0)return Hr=13,4;var t=24&e;return t!==0?(Hr=12,t):(e&32)!==0?(Hr=11,32):(t=192&e,t!==0?(Hr=10,t):(e&256)!==0?(Hr=9,256):(t=3584&e,t!==0?(Hr=8,t):(e&4096)!==0?(Hr=7,4096):(t=4186112&e,t!==0?(Hr=6,t):(t=62914560&e,t!==0?(Hr=5,t):e&67108864?(Hr=4,67108864):(e&134217728)!==0?(Hr=3,134217728):(t=805306368&e,t!==0?(Hr=2,t):(1073741824&e)!==0?(Hr=1,1073741824):(Hr=8,e))))))}function N2e(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function F2e(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(rt(358,e))}}function k_(e,t){var r=e.pendingLanes;if(r===0)return Hr=0;var n=0,i=0,o=e.expiredLanes,f=e.suspendedLanes,v=e.pingedLanes;if(o!==0)n=o,i=Hr=15;else if(o=r&134217727,o!==0){var x=o&~f;x!==0?(n=um(x),i=Hr):(v&=o,v!==0&&(n=um(v),i=Hr))}else o=r&~f,o!==0?(n=um(o),i=Hr):v!==0&&(n=um(v),i=Hr);if(n===0)return 0;if(n=31-nh(n),n=r&((0>n?0:1<<n)<<1)-1,t!==0&&t!==n&&(t&f)===0){if(um(t),i<=Hr)return t;Hr=i}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-nh(t),i=1<<r,n|=e[r],t&=~i;return n}function H8(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qw(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=cm(24&~t),e===0?Qw(10,t):e;case 10:return e=cm(192&~t),e===0?Qw(8,t):e;case 8:return e=cm(3584&~t),e===0&&(e=cm(4186112&~t),e===0&&(e=512)),e;case 2:return t=cm(805306368&~t),t===0&&(t=268435456),t}throw Error(rt(358,e))}function cm(e){return e&-e}function Oq(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bE(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,e=e.eventTimes,t=31-nh(t),e[t]=r}var nh=Math.clz32?Math.clz32:B2e,z2e=Math.log,j2e=Math.LN2;function B2e(e){return e===0?32:31-(z2e(e)/j2e|0)|0}var U2e=Ci.unstable_UserBlockingPriority,V2e=Ci.unstable_runWithPriority,zw=!0;function $2e(e,t,r,n){ep||K2();var i=eR,o=ep;ep=!0;try{L8(i,e,t,r,n)}finally{(ep=o)||Y2()}}function G2e(e,t,r,n){V2e(U2e,eR.bind(null,e,t,r,n))}function eR(e,t,r,n){if(zw){var i;if((i=(t&4)===0)&&0<xl.length&&-1<b$.indexOf(e))e=h2(null,e,t,r,n),xl.push(e);else{var o=tR(e,t,r,n);if(o===null)i&&w$(e,n);else{if(i){if(-1<b$.indexOf(e)){e=h2(o,e,t,r,n),xl.push(e);return}if(R2e(o,e,t,r,n))return;w$(e,n)}sG(e,t,n,null,r)}}}}function tR(e,t,r,n){var i=W2(n);if(i=tp(i),i!==null){var o=cp(i);if(o===null)i=null;else{var f=o.tag;if(f===13){if(i=k8(o),i!==null)return i;i=null}else if(f===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return sG(e,t,n,i,r),null}var Gc=null,rR=null,jw=null;function K8(){if(jw)return jw;var e,t=rR,r=t.length,n,i="value"in Gc?Gc.value:Gc.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var f=r-e;for(n=1;n<=f&&t[r-n]===i[o-n];n++);return jw=i.slice(e,1<n?1-n:void 0)}function Bw(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mw(){return!0}function T$(){return!1}function ka(e){function t(r,n,i,o,f){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=f,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(r=e[v],this[v]=r?r(o):o[v]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Mw:T$,this.isPropagationStopped=T$,this}return hn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Mw)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Mw)},persist:function(){},isPersistent:Mw}),t}var qm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nR=ka(qm),G_=hn({},qm,{view:0,detail:0}),Z2e=ka(G_),Lq,Dq,a_,wE=hn({},G_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iR,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==a_&&(a_&&e.type==="mousemove"?(Lq=e.screenX-a_.screenX,Dq=e.screenY-a_.screenY):Dq=Lq=0,a_=e),Lq)},movementY:function(e){return"movementY"in e?e.movementY:Dq}}),S$=ka(wE),W2e=hn({},wE,{dataTransfer:0}),H2e=ka(W2e),K2e=hn({},G_,{relatedTarget:0}),kq=ka(K2e),Y2e=hn({},qm,{animationName:0,elapsedTime:0,pseudoElement:0}),X2e=ka(Y2e),Q2e=hn({},qm,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),J2e=ka(Q2e),eRe=hn({},qm,{data:0}),I$=ka(eRe),tRe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rRe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nRe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iRe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nRe[e])?!!t[e]:!1}function iR(){return iRe}var oRe=hn({},G_,{key:function(e){if(e.key){var t=tRe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bw(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rRe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iR,charCode:function(e){return e.type==="keypress"?Bw(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bw(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aRe=ka(oRe),sRe=hn({},wE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C$=ka(sRe),lRe=hn({},G_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iR}),uRe=ka(lRe),cRe=hn({},qm,{propertyName:0,elapsedTime:0,pseudoElement:0}),hRe=ka(cRe),fRe=hn({},wE,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pRe=ka(fRe),dRe=[9,13,27,32],oR=Mu&&"CompositionEvent"in window,E_=null;Mu&&"documentMode"in document&&(E_=document.documentMode);var mRe=Mu&&"TextEvent"in window&&!E_,Y8=Mu&&(!oR||E_&&8<E_&&11>=E_),P$=" ",M$=!1;function X8(e,t){switch(e){case"keyup":return dRe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q8(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fm=!1;function vRe(e,t){switch(e){case"compositionend":return Q8(t);case"keypress":return t.which!==32?null:(M$=!0,P$);case"textInput":return e=t.data,e===P$&&M$?null:e;default:return null}}function gRe(e,t){if(fm)return e==="compositionend"||!oR&&X8(e,t)?(e=K8(),jw=rR=Gc=null,fm=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Y8&&t.locale!=="ko"?null:t.data;default:return null}}var yRe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A$(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yRe[e.type]:t==="textarea"}function J8(e,t,r,n){R8(n),t=Jw(t,"onChange"),0<t.length&&(r=new nR("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var T_=null,N_=null;function _Re(e){iG(e,0)}function EE(e){var t=dm(e);if(S8(t))return e}function xRe(e,t){if(e==="change")return t}var eG=!1;Mu&&(Mu?(qw="oninput"in document,qw||(Nq=document.createElement("div"),Nq.setAttribute("oninput","return;"),qw=typeof Nq.oninput=="function"),Aw=qw):Aw=!1,eG=Aw&&(!document.documentMode||9<document.documentMode));var Aw,qw,Nq;function q$(){T_&&(T_.detachEvent("onpropertychange",tG),N_=T_=null)}function tG(e){if(e.propertyName==="value"&&EE(N_)){var t=[];if(J8(t,N_,e,W2(e)),e=_Re,ep)e(t);else{ep=!0;try{H2(e,t)}finally{ep=!1,Y2()}}}}function bRe(e,t,r){e==="focusin"?(q$(),T_=t,N_=r,T_.attachEvent("onpropertychange",tG)):e==="focusout"&&q$()}function wRe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return EE(N_)}function ERe(e,t){if(e==="click")return EE(t)}function TRe(e,t){if(e==="input"||e==="change")return EE(t)}function SRe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var es=typeof Object.is=="function"?Object.is:SRe,IRe=Object.prototype.hasOwnProperty;function F_(e,t){if(es(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!IRe.call(t,r[n])||!es(e[r[n]],t[r[n]]))return!1;return!0}function R$(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function O$(e,t){var r=R$(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=R$(r)}}function rG(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rG(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function L$(){for(var e=window,t=Kw();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch(n){r=!1}if(r)e=t.contentWindow;else break;t=Kw(e.document)}return t}function f2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var CRe=Mu&&"documentMode"in document&&11>=document.documentMode,pm=null,p2=null,S_=null,d2=!1;function D$(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;d2||pm==null||pm!==Kw(n)||(n=pm,"selectionStart"in n&&f2(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),S_&&F_(S_,n)||(S_=n,n=Jw(p2,"onSelect"),0<n.length&&(t=new nR("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=pm)))}J2("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);J2("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);J2(D2e,2);for(Fq="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Rw=0;Rw<Fq.length;Rw++)Q2.set(Fq[Rw],0);var Fq,Rw;Cm("onMouseEnter",["mouseout","mouseover"]);Cm("onMouseLeave",["mouseout","mouseover"]);Cm("onPointerEnter",["pointerout","pointerover"]);Cm("onPointerLeave",["pointerout","pointerover"]);lp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lp("onBeforeInput",["compositionend","keypress","textInput","paste"]);lp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var v_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nG=new Set("cancel close invalid load scroll toggle".split(" ").concat(v_));function k$(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,A2e(n,t,void 0,e),e.currentTarget=null}function iG(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var f=n.length-1;0<=f;f--){var v=n[f],x=v.instance,E=v.currentTarget;if(v=v.listener,x!==o&&i.isPropagationStopped())break e;k$(i,v,E),o=x}else for(f=0;f<n.length;f++){if(v=n[f],x=v.instance,E=v.currentTarget,v=v.listener,x!==o&&i.isPropagationStopped())break e;k$(i,v,E),o=x}}}if(Xw)throw e=u2,Xw=!1,u2=null,e}function an(e,t){var r=uG(t),n=e+"__bubble";r.has(n)||(aG(t,e,2,!1),r.add(n))}var N$="_reactListening"+Math.random().toString(36).slice(2);function oG(e){e[N$]||(e[N$]=!0,w8.forEach(function(t){nG.has(t)||F$(t,!1,e,null),F$(t,!0,e,null)}))}function F$(e,t,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,o=r;if(e==="selectionchange"&&r.nodeType!==9&&(o=r.ownerDocument),n!==null&&!t&&nG.has(e)){if(e!=="scroll")return;i|=2,o=n}var f=uG(o),v=e+"__"+(t?"capture":"bubble");f.has(v)||(t&&(i|=4),aG(o,e,i,t),f.add(v))}function aG(e,t,r,n){var i=Q2.get(t);switch(i===void 0?2:i){case 0:i=$2e;break;case 1:i=G2e;break;default:i=eR}r=i.bind(null,t,r,e),i=void 0,!l2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function sG(e,t,r,n,i){var o=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var f=n.tag;if(f===3||f===4){var v=n.stateNode.containerInfo;if(v===i||v.nodeType===8&&v.parentNode===i)break;if(f===4)for(f=n.return;f!==null;){var x=f.tag;if((x===3||x===4)&&(x=f.stateNode.containerInfo,x===i||x.nodeType===8&&x.parentNode===i))return;f=f.return}for(;v!==null;){if(f=tp(v),f===null)return;if(x=f.tag,x===5||x===6){n=o=f;continue e}v=v.parentNode}}n=n.return}I2e(function(){var E=o,S=W2(r),P=[];e:{var q=W8.get(e);if(q!==void 0){var F=nR,K=e;switch(e){case"keypress":if(Bw(r)===0)break e;case"keydown":case"keyup":F=aRe;break;case"focusin":K="focus",F=kq;break;case"focusout":K="blur",F=kq;break;case"beforeblur":case"afterblur":F=kq;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=S$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=H2e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=uRe;break;case V8:case $8:case G8:F=X2e;break;case Z8:F=hRe;break;case"scroll":F=Z2e;break;case"wheel":F=pRe;break;case"copy":case"cut":case"paste":F=J2e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=C$}var ne=(t&4)!==0,Z=!ne&&e==="scroll",W=ne?q!==null?q+"Capture":null:q;ne=[];for(var Q=E,le;Q!==null;){le=Q;var ce=le.stateNode;if(le.tag===5&&ce!==null&&(le=ce,W!==null&&(ce=O_(Q,W),ce!=null&&ne.push(z_(Q,ce,le)))),Z)break;Q=Q.return}0<ne.length&&(q=new F(q,K,null,r,S),P.push({event:q,listeners:ne}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",q&&(t&16)===0&&(K=r.relatedTarget||r.fromElement)&&(tp(K)||K[Rm]))break e;if((F||q)&&(q=S.window===S?S:(q=S.ownerDocument)?q.defaultView||q.parentWindow:window,F?(K=r.relatedTarget||r.toElement,F=E,K=K?tp(K):null,K!==null&&(Z=cp(K),K!==Z||K.tag!==5&&K.tag!==6)&&(K=null)):(F=null,K=E),F!==K)){if(ne=S$,ce="onMouseLeave",W="onMouseEnter",Q="mouse",(e==="pointerout"||e==="pointerover")&&(ne=C$,ce="onPointerLeave",W="onPointerEnter",Q="pointer"),Z=F==null?q:dm(F),le=K==null?q:dm(K),q=new ne(ce,Q+"leave",F,r,S),q.target=Z,q.relatedTarget=le,ce=null,tp(S)===E&&(ne=new ne(W,Q+"enter",K,r,S),ne.target=le,ne.relatedTarget=Z,ce=ne),Z=ce,F&&K)t:{for(ne=F,W=K,Q=0,le=ne;le;le=lm(le))Q++;for(le=0,ce=W;ce;ce=lm(ce))le++;for(;0<Q-le;)ne=lm(ne),Q--;for(;0<le-Q;)W=lm(W),le--;for(;Q--;){if(ne===W||W!==null&&ne===W.alternate)break t;ne=lm(ne),W=lm(W)}ne=null}else ne=null;F!==null&&z$(P,q,F,ne,!1),K!==null&&Z!==null&&z$(P,Z,K,ne,!0)}}e:{if(q=E?dm(E):window,F=q.nodeName&&q.nodeName.toLowerCase(),F==="select"||F==="input"&&q.type==="file")var ze=xRe;else if(A$(q)){if(eG)ze=TRe;else{ze=wRe;var Le=bRe}}else(F=q.nodeName)&&F.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(ze=ERe);if(ze&&(ze=ze(e,E))){J8(P,ze,r,S);break e}Le&&Le(e,q,E),e==="focusout"&&(Le=q._wrapperState)&&Le.controlled&&q.type==="number"&&e2(q,"number",q.value)}switch(Le=E?dm(E):window,e){case"focusin":(A$(Le)||Le.contentEditable==="true")&&(pm=Le,p2=E,S_=null);break;case"focusout":S_=p2=pm=null;break;case"mousedown":d2=!0;break;case"contextmenu":case"mouseup":case"dragend":d2=!1,D$(P,r,S);break;case"selectionchange":if(CRe)break;case"keydown":case"keyup":D$(P,r,S)}var Be;if(oR)e:{switch(e){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else fm?X8(e,r)&&(et="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(et="onCompositionStart");et&&(Y8&&r.locale!=="ko"&&(fm||et!=="onCompositionStart"?et==="onCompositionEnd"&&fm&&(Be=K8()):(Gc=S,rR="value"in Gc?Gc.value:Gc.textContent,fm=!0)),Le=Jw(E,et),0<Le.length&&(et=new I$(et,e,null,r,S),P.push({event:et,listeners:Le}),Be?et.data=Be:(Be=Q8(r),Be!==null&&(et.data=Be)))),(Be=mRe?vRe(e,r):gRe(e,r))&&(E=Jw(E,"onBeforeInput"),0<E.length&&(S=new I$("onBeforeInput","beforeinput",null,r,S),P.push({event:S,listeners:E}),S.data=Be))}iG(P,t)})}function z_(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Jw(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=O_(e,r),o!=null&&n.unshift(z_(e,o,i)),o=O_(e,t),o!=null&&n.push(z_(e,o,i))),e=e.return}return n}function lm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function z$(e,t,r,n,i){for(var o=t._reactName,f=[];r!==null&&r!==n;){var v=r,x=v.alternate,E=v.stateNode;if(x!==null&&x===n)break;v.tag===5&&E!==null&&(v=E,i?(x=O_(r,o),x!=null&&f.unshift(z_(r,x,v))):i||(x=O_(r,o),x!=null&&f.push(z_(r,x,v)))),r=r.return}f.length!==0&&e.push({event:t,listeners:f})}function eE(){}var zq=null,jq=null;function lG(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function m2(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var j$=typeof setTimeout=="function"?setTimeout:void 0,PRe=typeof clearTimeout=="function"?clearTimeout:void 0;function aR(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function bm(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function B$(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Bq=0;function MRe(e){return{$$typeof:G2,toString:e,valueOf:e}}var TE=Math.random().toString(36).slice(2),Zc="__reactFiber$"+TE,tE="__reactProps$"+TE,Rm="__reactContainer$"+TE,U$="__reactEvents$"+TE;function tp(e){var t=e[Zc];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Rm]||r[Zc]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=B$(e);e!==null;){if(r=e[Zc])return r;e=B$(e)}return t}e=r,r=e.parentNode}return null}function Z_(e){return e=e[Zc]||e[Rm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dm(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(rt(33))}function SE(e){return e[tE]||null}function uG(e){var t=e[U$];return t===void 0&&(t=e[U$]=new Set),t}var v2=[],mm=-1;function sh(e){return{current:e}}function sn(e){0>mm||(e.current=v2[mm],v2[mm]=null,mm--)}function Pn(e,t){mm++,v2[mm]=e.current,e.current=t}var ih={},vo=sh(ih),ia=sh(!1),op=ih;function Pm(e,t){var r=e.type.contextTypes;if(!r)return ih;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function oa(e){return e=e.childContextTypes,e!=null}function rE(){sn(ia),sn(vo)}function V$(e,t,r){if(vo.current!==ih)throw Error(rt(168));Pn(vo,t),Pn(ia,r)}function cG(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(rt(108,gm(t)||"Unknown",i));return hn({},r,n)}function Uw(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ih,op=vo.current,Pn(vo,e),Pn(ia,ia.current),!0}function $$(e,t,r){var n=e.stateNode;if(!n)throw Error(rt(169));r?(e=cG(e,t,op),n.__reactInternalMemoizedMergedChildContext=e,sn(ia),sn(vo),Pn(vo,e)):sn(ia),Pn(ia,r)}var sR=null,ip=null,ARe=Ci.unstable_runWithPriority,lR=Ci.unstable_scheduleCallback,g2=Ci.unstable_cancelCallback,qRe=Ci.unstable_shouldYield,G$=Ci.unstable_requestPaint,y2=Ci.unstable_now,RRe=Ci.unstable_getCurrentPriorityLevel,IE=Ci.unstable_ImmediatePriority,hG=Ci.unstable_UserBlockingPriority,fG=Ci.unstable_NormalPriority,pG=Ci.unstable_LowPriority,dG=Ci.unstable_IdlePriority,Uq={},ORe=G$!==void 0?G$:function(){},Tu=null,Vw=null,Vq=!1,Z$=y2(),po=1e4>Z$?y2:function(){return y2()-Z$};function Mm(){switch(RRe()){case IE:return 99;case hG:return 98;case fG:return 97;case pG:return 96;case dG:return 95;default:throw Error(rt(332))}}function mG(e){switch(e){case 99:return IE;case 98:return hG;case 97:return fG;case 96:return pG;case 95:return dG;default:throw Error(rt(332))}}function ap(e,t){return e=mG(e),ARe(e,t)}function j_(e,t,r){return e=mG(e),lR(e,t,r)}function Sl(){if(Vw!==null){var e=Vw;Vw=null,g2(e)}vG()}function vG(){if(!Vq&&Tu!==null){Vq=!0;var e=0;try{var t=Tu;ap(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),Tu=null}catch(r){throw Tu!==null&&(Tu=Tu.slice(e+1)),lR(IE,Sl),r}finally{Vq=!1}}}var LRe=up.ReactCurrentBatchConfig;function js(e,t){if(e&&e.defaultProps){t=hn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var nE=sh(null),iE=null,vm=null,oE=null;function uR(){oE=vm=iE=null}function cR(e){var t=nE.current;sn(nE),e.type._context._currentValue=t}function gG(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function wm(e,t){iE=e,oE=vm=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Bs=!0),e.firstContext=null)}function ns(e,t){if(oE!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(oE=e,t=1073741823),t={context:e,observedBits:t,next:null},vm===null){if(iE===null)throw Error(rt(308));vm=t,iE.dependencies={lanes:0,firstContext:t,responders:null}}else vm=vm.next=t;return e._currentValue}var Vc=!1;function hR(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function yG(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qc(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function W$(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var f={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=f:o=o.next=f,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function B_(e,t,r,n){var i=e.updateQueue;Vc=!1;var o=i.firstBaseUpdate,f=i.lastBaseUpdate,v=i.shared.pending;if(v!==null){i.shared.pending=null;var x=v,E=x.next;x.next=null,f===null?o=E:f.next=E,f=x;var S=e.alternate;if(S!==null){S=S.updateQueue;var P=S.lastBaseUpdate;P!==f&&(P===null?S.firstBaseUpdate=E:P.next=E,S.lastBaseUpdate=x)}}if(o!==null){P=i.baseState,f=0,S=E=x=null;do{v=o.lane;var q=o.eventTime;if((n&v)===v){S!==null&&(S=S.next={eventTime:q,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var F=e,K=o;switch(v=t,q=r,K.tag){case 1:if(F=K.payload,typeof F=="function"){P=F.call(q,P,v);break e}P=F;break e;case 3:F.flags=F.flags&-4097|64;case 0:if(F=K.payload,v=typeof F=="function"?F.call(q,P,v):F,v==null)break e;P=hn({},P,v);break e;case 2:Vc=!0}}o.callback!==null&&(e.flags|=32,v=i.effects,v===null?i.effects=[o]:v.push(o))}else q={eventTime:q,lane:v,tag:o.tag,payload:o.payload,callback:o.callback,next:null},S===null?(E=S=q,x=P):S=S.next=q,f|=v;if(o=o.next,o===null){if(v=i.shared.pending,v===null)break;o=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);S===null&&(x=P),i.baseState=x,i.firstBaseUpdate=E,i.lastBaseUpdate=S,H_|=f,e.lanes=f,e.memoizedState=P}}function H$(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(rt(191,i));i.call(n)}}}var _G=new gE.Component().refs;function aE(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:hn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var CE={isMounted:function(e){return(e=e._reactInternals)?cp(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Da(),i=Jc(e),o=Xc(n,i);o.payload=t,r!=null&&(o.callback=r),Qc(e,o),eh(e,i,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Da(),i=Jc(e),o=Xc(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),Qc(e,o),eh(e,i,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Da(),n=Jc(e),i=Xc(r,n);i.tag=2,t!=null&&(i.callback=t),Qc(e,i),eh(e,n,r)}};function K$(e,t,r,n,i,o,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,f):t.prototype&&t.prototype.isPureReactComponent?!F_(r,n)||!F_(i,o):!0}function xG(e,t,r){var n=!1,i=ih,o=t.contextType;return typeof o=="object"&&o!==null?o=ns(o):(i=oa(t)?op:vo.current,n=t.contextTypes,o=(n=n!=null)?Pm(e,i):ih),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=CE,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Y$(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&CE.enqueueReplaceState(t,t.state,null)}function _2(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=_G,hR(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=ns(o):(o=oa(t)?op:vo.current,i.context=Pm(e,o)),B_(e,r,i,n),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(aE(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&CE.enqueueReplaceState(i,i.state,null),B_(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4)}var Ow=Array.isArray;function s_(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(rt(309));var n=r.stateNode}if(!n)throw Error(rt(147,e));var i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var f=n.refs;f===_G&&(f=n.refs={}),o===null?delete f[i]:f[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(rt(284));if(!r._owner)throw Error(rt(290,e))}return e}function Lw(e,t){if(e.type!=="textarea")throw Error(rt(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function bG(e){function t(Z,W){if(e){var Q=Z.lastEffect;Q!==null?(Q.nextEffect=W,Z.lastEffect=W):Z.firstEffect=Z.lastEffect=W,W.nextEffect=null,W.flags=8}}function r(Z,W){if(!e)return null;for(;W!==null;)t(Z,W),W=W.sibling;return null}function n(Z,W){for(Z=new Map;W!==null;)W.key!==null?Z.set(W.key,W):Z.set(W.index,W),W=W.sibling;return Z}function i(Z,W){return Z=ah(Z,W),Z.index=0,Z.sibling=null,Z}function o(Z,W,Q){return Z.index=Q,e?(Q=Z.alternate,Q!==null?(Q=Q.index,Q<W?(Z.flags=2,W):Q):(Z.flags=2,W)):W}function f(Z){return e&&Z.alternate===null&&(Z.flags=2),Z}function v(Z,W,Q,le){return W===null||W.tag!==6?(W=Hq(Q,Z.mode,le),W.return=Z,W):(W=i(W,Q),W.return=Z,W)}function x(Z,W,Q,le){return W!==null&&W.elementType===Q.type?(le=i(W,Q.props),le.ref=s_(Z,W,Q),le.return=Z,le):(le=Ww(Q.type,Q.key,Q.props,null,Z.mode,le),le.ref=s_(Z,W,Q),le.return=Z,le)}function E(Z,W,Q,le){return W===null||W.tag!==4||W.stateNode.containerInfo!==Q.containerInfo||W.stateNode.implementation!==Q.implementation?(W=Kq(Q,Z.mode,le),W.return=Z,W):(W=i(W,Q.children||[]),W.return=Z,W)}function S(Z,W,Q,le,ce){return W===null||W.tag!==7?(W=Im(Q,Z.mode,le,ce),W.return=Z,W):(W=i(W,Q),W.return=Z,W)}function P(Z,W,Q){if(typeof W=="string"||typeof W=="number")return W=Hq(""+W,Z.mode,Q),W.return=Z,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case d_:return Q=Ww(W.type,W.key,W.props,null,Z.mode,Q),Q.ref=s_(Z,null,W),Q.return=Z,Q;case Jf:return W=Kq(W,Z.mode,Q),W.return=Z,W}if(Ow(W)||r_(W))return W=Im(W,Z.mode,Q,null),W.return=Z,W;Lw(Z,W)}return null}function q(Z,W,Q,le){var ce=W!==null?W.key:null;if(typeof Q=="string"||typeof Q=="number")return ce!==null?null:v(Z,W,""+Q,le);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case d_:return Q.key===ce?Q.type===$c?S(Z,W,Q.props.children,le,ce):x(Z,W,Q,le):null;case Jf:return Q.key===ce?E(Z,W,Q,le):null}if(Ow(Q)||r_(Q))return ce!==null?null:S(Z,W,Q,le,null);Lw(Z,Q)}return null}function F(Z,W,Q,le,ce){if(typeof le=="string"||typeof le=="number")return Z=Z.get(Q)||null,v(W,Z,""+le,ce);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case d_:return Z=Z.get(le.key===null?Q:le.key)||null,le.type===$c?S(W,Z,le.props.children,ce,le.key):x(W,Z,le,ce);case Jf:return Z=Z.get(le.key===null?Q:le.key)||null,E(W,Z,le,ce)}if(Ow(le)||r_(le))return Z=Z.get(Q)||null,S(W,Z,le,ce,null);Lw(W,le)}return null}function K(Z,W,Q,le){for(var ce=null,ze=null,Le=W,Be=W=0,et=null;Le!==null&&Be<Q.length;Be++){Le.index>Be?(et=Le,Le=null):et=Le.sibling;var ot=q(Z,Le,Q[Be],le);if(ot===null){Le===null&&(Le=et);break}e&&Le&&ot.alternate===null&&t(Z,Le),W=o(ot,W,Be),ze===null?ce=ot:ze.sibling=ot,ze=ot,Le=et}if(Be===Q.length)return r(Z,Le),ce;if(Le===null){for(;Be<Q.length;Be++)Le=P(Z,Q[Be],le),Le!==null&&(W=o(Le,W,Be),ze===null?ce=Le:ze.sibling=Le,ze=Le);return ce}for(Le=n(Z,Le);Be<Q.length;Be++)et=F(Le,Z,Be,Q[Be],le),et!==null&&(e&&et.alternate!==null&&Le.delete(et.key===null?Be:et.key),W=o(et,W,Be),ze===null?ce=et:ze.sibling=et,ze=et);return e&&Le.forEach(function(Ot){return t(Z,Ot)}),ce}function ne(Z,W,Q,le){var ce=r_(Q);if(typeof ce!="function")throw Error(rt(150));if(Q=ce.call(Q),Q==null)throw Error(rt(151));for(var ze=ce=null,Le=W,Be=W=0,et=null,ot=Q.next();Le!==null&&!ot.done;Be++,ot=Q.next()){Le.index>Be?(et=Le,Le=null):et=Le.sibling;var Ot=q(Z,Le,ot.value,le);if(Ot===null){Le===null&&(Le=et);break}e&&Le&&Ot.alternate===null&&t(Z,Le),W=o(Ot,W,Be),ze===null?ce=Ot:ze.sibling=Ot,ze=Ot,Le=et}if(ot.done)return r(Z,Le),ce;if(Le===null){for(;!ot.done;Be++,ot=Q.next())ot=P(Z,ot.value,le),ot!==null&&(W=o(ot,W,Be),ze===null?ce=ot:ze.sibling=ot,ze=ot);return ce}for(Le=n(Z,Le);!ot.done;Be++,ot=Q.next())ot=F(Le,Z,Be,ot.value,le),ot!==null&&(e&&ot.alternate!==null&&Le.delete(ot.key===null?Be:ot.key),W=o(ot,W,Be),ze===null?ce=ot:ze.sibling=ot,ze=ot);return e&&Le.forEach(function(Wt){return t(Z,Wt)}),ce}return function(Z,W,Q,le){var ce=typeof Q=="object"&&Q!==null&&Q.type===$c&&Q.key===null;ce&&(Q=Q.props.children);var ze=typeof Q=="object"&&Q!==null;if(ze)switch(Q.$$typeof){case d_:e:{for(ze=Q.key,ce=W;ce!==null;){if(ce.key===ze){switch(ce.tag){case 7:if(Q.type===$c){r(Z,ce.sibling),W=i(ce,Q.props.children),W.return=Z,Z=W;break e}break;default:if(ce.elementType===Q.type){r(Z,ce.sibling),W=i(ce,Q.props),W.ref=s_(Z,ce,Q),W.return=Z,Z=W;break e}}r(Z,ce);break}else t(Z,ce);ce=ce.sibling}Q.type===$c?(W=Im(Q.props.children,Z.mode,le,Q.key),W.return=Z,Z=W):(le=Ww(Q.type,Q.key,Q.props,null,Z.mode,le),le.ref=s_(Z,W,Q),le.return=Z,Z=le)}return f(Z);case Jf:e:{for(ce=Q.key;W!==null;){if(W.key===ce){if(W.tag===4&&W.stateNode.containerInfo===Q.containerInfo&&W.stateNode.implementation===Q.implementation){r(Z,W.sibling),W=i(W,Q.children||[]),W.return=Z,Z=W;break e}else{r(Z,W);break}}else t(Z,W);W=W.sibling}W=Kq(Q,Z.mode,le),W.return=Z,Z=W}return f(Z)}if(typeof Q=="string"||typeof Q=="number")return Q=""+Q,W!==null&&W.tag===6?(r(Z,W.sibling),W=i(W,Q),W.return=Z,Z=W):(r(Z,W),W=Hq(Q,Z.mode,le),W.return=Z,Z=W),f(Z);if(Ow(Q))return K(Z,W,Q,le);if(r_(Q))return ne(Z,W,Q,le);if(ze&&Lw(Z,Q),typeof Q=="undefined"&&!ce)switch(Z.tag){case 1:case 22:case 0:case 11:case 15:throw Error(rt(152,gm(Z.type)||"Component"))}return r(Z,W)}}var sE=bG(!0),wG=bG(!1),W_={},El=sh(W_),U_=sh(W_),V_=sh(W_);function rp(e){if(e===W_)throw Error(rt(174));return e}function x2(e,t){switch(Pn(V_,t),Pn(U_,e),Pn(El,W_),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:i2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=i2(t,e)}sn(El),Pn(El,t)}function Am(){sn(El),sn(U_),sn(V_)}function X$(e){rp(V_.current);var t=rp(El.current),r=i2(t,e.type);t!==r&&(Pn(U_,e),Pn(El,r))}function fR(e){U_.current===e&&(sn(El),sn(U_))}var Cn=sh(0);function lE(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Iu=null,Wc=null,Tl=!1;function EG(e,t){var r=ts(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function Q$(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function b2(e){if(Tl){var t=Wc;if(t){var r=t;if(!Q$(e,t)){if(t=bm(r.nextSibling),!t||!Q$(e,t)){e.flags=e.flags&-1025|2,Tl=!1,Iu=e;return}EG(Iu,r)}Iu=e,Wc=bm(t.firstChild)}else e.flags=e.flags&-1025|2,Tl=!1,Iu=e}}function J$(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Iu=e}function Dw(e){if(e!==Iu)return!1;if(!Tl)return J$(e),Tl=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!m2(t,e.memoizedProps))for(t=Wc;t;)EG(e,t),t=bm(t.nextSibling);if(J$(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(rt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Wc=bm(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Wc=null}}else Wc=Iu?bm(e.stateNode.nextSibling):null;return!0}function $q(){Wc=Iu=null,Tl=!1}var Em=[];function pR(){for(var e=0;e<Em.length;e++)Em[e]._workInProgressVersionPrimary=null;Em.length=0}var I_=up.ReactCurrentDispatcher,rs=up.ReactCurrentBatchConfig,$_=0,Bn=null,fo=null,Vi=null,uE=!1,C_=!1;function ra(){throw Error(rt(321))}function dR(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!es(e[r],t[r]))return!1;return!0}function mR(e,t,r,n,i,o){if($_=o,Bn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I_.current=e===null||e.memoizedState===null?kRe:NRe,e=r(n,i),C_){o=0;do{if(C_=!1,!(25>o))throw Error(rt(301));o+=1,Vi=fo=null,t.updateQueue=null,I_.current=FRe,e=r(n,i)}while(C_)}if(I_.current=pE,t=fo!==null&&fo.next!==null,$_=0,Vi=fo=Bn=null,uE=!1,t)throw Error(rt(300));return e}function np(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vi===null?Bn.memoizedState=Vi=e:Vi=Vi.next=e,Vi}function hp(){if(fo===null){var e=Bn.alternate;e=e!==null?e.memoizedState:null}else e=fo.next;var t=Vi===null?Bn.memoizedState:Vi.next;if(t!==null)Vi=t,fo=e;else{if(e===null)throw Error(rt(310));fo=e,e={memoizedState:fo.memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},Vi===null?Bn.memoizedState=Vi=e:Vi=Vi.next=e}return Vi}function bl(e,t){return typeof t=="function"?t(e):t}function l_(e){var t=hp(),r=t.queue;if(r===null)throw Error(rt(311));r.lastRenderedReducer=e;var n=fo,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var f=i.next;i.next=o.next,o.next=f}n.baseQueue=i=o,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var v=f=o=null,x=i;do{var E=x.lane;if(($_&E)===E)v!==null&&(v=v.next={lane:0,action:x.action,eagerReducer:x.eagerReducer,eagerState:x.eagerState,next:null}),n=x.eagerReducer===e?x.eagerState:e(n,x.action);else{var S={lane:E,action:x.action,eagerReducer:x.eagerReducer,eagerState:x.eagerState,next:null};v===null?(f=v=S,o=n):v=v.next=S,Bn.lanes|=E,H_|=E}x=x.next}while(x!==null&&x!==i);v===null?o=n:v.next=f,es(n,t.memoizedState)||(Bs=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=v,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function u_(e){var t=hp(),r=t.queue;if(r===null)throw Error(rt(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var f=i=i.next;do o=e(o,f.action),f=f.next;while(f!==i);es(o,t.memoizedState)||(Bs=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function e8(e,t,r){var n=t._getVersion;n=n(t._source);var i=t._workInProgressVersionPrimary;if(i!==null?e=i===n:(e=e.mutableReadLanes,(e=($_&e)===e)&&(t._workInProgressVersionPrimary=n,Em.push(t))),e)return r(t._source);throw Em.push(t),Error(rt(350))}function TG(e,t,r,n){var i=Do;if(i===null)throw Error(rt(349));var o=t._getVersion,f=o(t._source),v=I_.current,x=v.useState(function(){return e8(i,t,r)}),E=x[1],S=x[0];x=Vi;var P=e.memoizedState,q=P.refs,F=q.getSnapshot,K=P.source;P=P.subscribe;var ne=Bn;return e.memoizedState={refs:q,source:t,subscribe:n},v.useEffect(function(){q.getSnapshot=r,q.setSnapshot=E;var Z=o(t._source);if(!es(f,Z)){Z=r(t._source),es(S,Z)||(E(Z),Z=Jc(ne),i.mutableReadLanes|=Z&i.pendingLanes),Z=i.mutableReadLanes,i.entangledLanes|=Z;for(var W=i.entanglements,Q=Z;0<Q;){var le=31-nh(Q),ce=1<<le;W[le]|=Z,Q&=~ce}}},[r,t,n]),v.useEffect(function(){return n(t._source,function(){var Z=q.getSnapshot,W=q.setSnapshot;try{W(Z(t._source));var Q=Jc(ne);i.mutableReadLanes|=Q&i.pendingLanes}catch(le){W(function(){throw le})}})},[t,n]),es(F,r)&&es(K,t)&&es(P,n)||(e={pending:null,dispatch:null,lastRenderedReducer:bl,lastRenderedState:S},e.dispatch=E=yR.bind(null,Bn,e),x.queue=e,x.baseQueue=null,S=e8(i,t,r),x.memoizedState=x.baseState=S),S}function SG(e,t,r){var n=hp();return TG(n,e,t,r)}function c_(e){var t=np();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:bl,lastRenderedState:e},e=e.dispatch=yR.bind(null,Bn,e),[t.memoizedState,e]}function cE(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Bn.updateQueue,t===null?(t={lastEffect:null},Bn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function t8(e){var t=np();return e={current:e},t.memoizedState=e}function hE(){return hp().memoizedState}function w2(e,t,r,n){var i=np();Bn.flags|=e,i.memoizedState=cE(1|t,r,void 0,n===void 0?null:n)}function vR(e,t,r,n){var i=hp();n=n===void 0?null:n;var o=void 0;if(fo!==null){var f=fo.memoizedState;if(o=f.destroy,n!==null&&dR(n,f.deps)){cE(t,r,o,n);return}}Bn.flags|=e,i.memoizedState=cE(1|t,r,o,n)}function r8(e,t){return w2(516,4,e,t)}function fE(e,t){return vR(516,4,e,t)}function IG(e,t){return vR(4,2,e,t)}function CG(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function PG(e,t,r){return r=r!=null?r.concat([e]):null,vR(4,2,CG.bind(null,t,e),r)}function gR(){}function MG(e,t){var r=hp();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&dR(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function AG(e,t){var r=hp();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&dR(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function DRe(e,t){var r=Mm();ap(98>r?98:r,function(){e(!0)}),ap(97<r?97:r,function(){var n=rs.transition;rs.transition=1;try{e(!1),t()}finally{rs.transition=n}})}function yR(e,t,r){var n=Da(),i=Jc(e),o={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},f=t.pending;if(f===null?o.next=o:(o.next=f.next,f.next=o),t.pending=o,f=e.alternate,e===Bn||f!==null&&f===Bn)C_=uE=!0;else{if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var v=t.lastRenderedState,x=f(v,r);if(o.eagerReducer=f,o.eagerState=x,es(x,v))return}catch(E){}finally{}eh(e,i,n)}}var pE={readContext:ns,useCallback:ra,useContext:ra,useEffect:ra,useImperativeHandle:ra,useLayoutEffect:ra,useMemo:ra,useReducer:ra,useRef:ra,useState:ra,useDebugValue:ra,useDeferredValue:ra,useTransition:ra,useMutableSource:ra,useOpaqueIdentifier:ra,unstable_isNewReconciler:!1},kRe={readContext:ns,useCallback:function(e,t){return np().memoizedState=[e,t===void 0?null:t],e},useContext:ns,useEffect:r8,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,w2(4,2,CG.bind(null,t,e),r)},useLayoutEffect:function(e,t){return w2(4,2,e,t)},useMemo:function(e,t){var r=np();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=np();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=yR.bind(null,Bn,e),[n.memoizedState,e]},useRef:t8,useState:c_,useDebugValue:gR,useDeferredValue:function(e){var t=c_(e),r=t[0],n=t[1];return r8(function(){var i=rs.transition;rs.transition=1;try{n(e)}finally{rs.transition=i}},[e]),r},useTransition:function(){var e=c_(!1),t=e[0];return e=DRe.bind(null,e[1]),t8(e),[e,t]},useMutableSource:function(e,t,r){var n=np();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},TG(n,e,t,r)},useOpaqueIdentifier:function(){if(Tl){var e=!1,t=MRe(function(){throw e||(e=!0,r("r:"+(Bq++).toString(36))),Error(rt(355))}),r=c_(t)[1];return(Bn.mode&2)===0&&(Bn.flags|=516,cE(5,function(){r("r:"+(Bq++).toString(36))},void 0,null)),t}return t="r:"+(Bq++).toString(36),c_(t),t},unstable_isNewReconciler:!1},NRe={readContext:ns,useCallback:MG,useContext:ns,useEffect:fE,useImperativeHandle:PG,useLayoutEffect:IG,useMemo:AG,useReducer:l_,useRef:hE,useState:function(){return l_(bl)},useDebugValue:gR,useDeferredValue:function(e){var t=l_(bl),r=t[0],n=t[1];return fE(function(){var i=rs.transition;rs.transition=1;try{n(e)}finally{rs.transition=i}},[e]),r},useTransition:function(){var e=l_(bl)[0];return[hE().current,e]},useMutableSource:SG,useOpaqueIdentifier:function(){return l_(bl)[0]},unstable_isNewReconciler:!1},FRe={readContext:ns,useCallback:MG,useContext:ns,useEffect:fE,useImperativeHandle:PG,useLayoutEffect:IG,useMemo:AG,useReducer:u_,useRef:hE,useState:function(){return u_(bl)},useDebugValue:gR,useDeferredValue:function(e){var t=u_(bl),r=t[0],n=t[1];return fE(function(){var i=rs.transition;rs.transition=1;try{n(e)}finally{rs.transition=i}},[e]),r},useTransition:function(){var e=u_(bl)[0];return[hE().current,e]},useMutableSource:SG,useOpaqueIdentifier:function(){return u_(bl)[0]},unstable_isNewReconciler:!1},zRe=up.ReactCurrentOwner,Bs=!1;function na(e,t,r,n){t.child=e===null?wG(t,null,r,n):sE(t,e.child,r,n)}function n8(e,t,r,n,i){r=r.render;var o=t.ref;return wm(t,i),n=mR(e,t,r,n,o,i),e!==null&&!Bs?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Cu(e,t,i)):(t.flags|=1,na(e,t,n,i),t.child)}function i8(e,t,r,n,i,o){if(e===null){var f=r.type;return typeof f=="function"&&!TR(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,qG(e,t,f,n,i,o)):(e=Ww(r.type,null,n,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}return f=e.child,(i&o)===0&&(i=f.memoizedProps,r=r.compare,r=r!==null?r:F_,r(i,n)&&e.ref===t.ref)?Cu(e,t,o):(t.flags|=1,e=ah(f,n),e.ref=t.ref,e.return=t,t.child=e)}function qG(e,t,r,n,i,o){if(e!==null&&F_(e.memoizedProps,n)&&e.ref===t.ref)if(Bs=!1,(o&i)!==0)(e.flags&16384)!==0&&(Bs=!0);else return t.lanes=e.lanes,Cu(e,t,o);return E2(e,t,r,n,o)}function Gq(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding"){if((t.mode&4)===0)t.memoizedState={baseLanes:0},Nw(t,r);else if((r&1073741824)!==0)t.memoizedState={baseLanes:0},Nw(t,o!==null?o.baseLanes:r);else return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Nw(t,e),null;}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Nw(t,n);return na(e,t,i,r),t.child}function RG(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function E2(e,t,r,n,i){var o=oa(r)?op:vo.current;return o=Pm(t,o),wm(t,i),r=mR(e,t,r,n,o,i),e!==null&&!Bs?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Cu(e,t,i)):(t.flags|=1,na(e,t,r,i),t.child)}function o8(e,t,r,n,i){if(oa(r)){var o=!0;Uw(t)}else o=!1;if(wm(t,i),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),xG(t,r,n),_2(t,r,n,i),n=!0;else if(e===null){var f=t.stateNode,v=t.memoizedProps;f.props=v;var x=f.context,E=r.contextType;typeof E=="object"&&E!==null?E=ns(E):(E=oa(r)?op:vo.current,E=Pm(t,E));var S=r.getDerivedStateFromProps,P=typeof S=="function"||typeof f.getSnapshotBeforeUpdate=="function";P||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==n||x!==E)&&Y$(t,f,n,E),Vc=!1;var q=t.memoizedState;f.state=q,B_(t,n,f,i),x=t.memoizedState,v!==n||q!==x||ia.current||Vc?(typeof S=="function"&&(aE(t,r,S,n),x=t.memoizedState),(v=Vc||K$(t,r,v,n,q,x,E))?(P||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4)):(typeof f.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=x),f.props=n,f.state=x,f.context=E,n=v):(typeof f.componentDidMount=="function"&&(t.flags|=4),n=!1)}else{f=t.stateNode,yG(e,t),v=t.memoizedProps,E=t.type===t.elementType?v:js(t.type,v),f.props=E,P=t.pendingProps,q=f.context,x=r.contextType,typeof x=="object"&&x!==null?x=ns(x):(x=oa(r)?op:vo.current,x=Pm(t,x));var F=r.getDerivedStateFromProps;(S=typeof F=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==P||q!==x)&&Y$(t,f,n,x),Vc=!1,q=t.memoizedState,f.state=q,B_(t,n,f,i);var K=t.memoizedState;v!==P||q!==K||ia.current||Vc?(typeof F=="function"&&(aE(t,r,F,n),K=t.memoizedState),(E=Vc||K$(t,r,E,n,q,K,x))?(S||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(n,K,x),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(n,K,x)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&q===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=K),f.props=n,f.state=K,f.context=x,n=E):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&q===e.memoizedState||(t.flags|=256),n=!1)}return T2(e,t,r,n,o,i)}function T2(e,t,r,n,i,o){RG(e,t);var f=(t.flags&64)!==0;if(!n&&!f)return i&&$$(t,r,!1),Cu(e,t,o);n=t.stateNode,zRe.current=t;var v=f&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&f?(t.child=sE(t,e.child,null,o),t.child=sE(t,null,v,o)):na(e,t,v,o),t.memoizedState=n.state,i&&$$(t,r,!0),t.child}function a8(e){var t=e.stateNode;t.pendingContext?V$(e,t.pendingContext,t.pendingContext!==t.context):t.context&&V$(e,t.context,!1),x2(e,t.containerInfo)}var kw={dehydrated:null,retryLane:0};function s8(e,t,r){var n=t.pendingProps,i=Cn.current,o=!1,f;return(f=(t.flags&64)!==0)||(f=e!==null&&e.memoizedState===null?!1:(i&2)!==0),f?(o=!0,t.flags&=-65):e!==null&&e.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),Pn(Cn,i&1),e===null?(n.fallback!==void 0&&b2(t),e=n.children,i=n.fallback,o?(e=l8(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=kw,e):typeof n.unstable_expectedLoadTime=="number"?(e=l8(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=kw,t.lanes=33554432,e):(r=SR({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?o?(n=c8(e,t,n.children,n.fallback,r),o=t.child,i=e.child.memoizedState,o.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=e.childLanes&~r,t.memoizedState=kw,n):(r=u8(e,t,n.children,r),t.memoizedState=null,r):o?(n=c8(e,t,n.children,n.fallback,r),o=t.child,i=e.child.memoizedState,o.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=e.childLanes&~r,t.memoizedState=kw,n):(r=u8(e,t,n.children,r),t.memoizedState=null,r)}function l8(e,t,r,n){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},(i&2)===0&&o!==null?(o.childLanes=0,o.pendingProps=t):o=SR(t,i,0,null),r=Im(r,i,n,null),o.return=e,r.return=e,o.sibling=r,e.child=o,r}function u8(e,t,r,n){var i=e.child;return e=i.sibling,r=ah(i,{mode:"visible",children:r}),(t.mode&2)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function c8(e,t,r,n,i){var o=t.mode,f=e.child;e=f.sibling;var v={mode:"hidden",children:r};return(o&2)===0&&t.child!==f?(r=t.child,r.childLanes=0,r.pendingProps=v,f=r.lastEffect,f!==null?(t.firstEffect=r.firstEffect,t.lastEffect=f,f.nextEffect=null):t.firstEffect=t.lastEffect=null):r=ah(f,v),e!==null?n=ah(e,n):(n=Im(n,o,i,null),n.flags|=2),n.return=t,r.return=t,r.sibling=n,t.child=r,n}function h8(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),gG(e.return,t)}function Zq(e,t,r,n,i,o){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:o}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=n,f.tail=r,f.tailMode=i,f.lastEffect=o)}function f8(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(na(e,t,n.children,r),n=Cn.current,(n&2)!==0)n=n&1|2,t.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&h8(e,r);else if(e.tag===19)h8(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Pn(Cn,n),(t.mode&2)===0)t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&lE(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Zq(t,!1,i,r,o,t.lastEffect);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&lE(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Zq(t,!0,r,null,o,t.lastEffect);break;case"together":Zq(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Cu(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),H_|=t.lanes,(r&t.childLanes)!==0){if(e!==null&&t.child!==e.child)throw Error(rt(153));if(t.child!==null){for(e=t.child,r=ah(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ah(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var OG,S2,LG,DG;OG=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};S2=function(){};LG=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,rp(El.current);var o=null;switch(r){case"input":i=Qq(e,i),n=Qq(e,n),o=[];break;case"option":i=t2(e,i),n=t2(e,n),o=[];break;case"select":i=hn({},i,{value:void 0}),n=hn({},n,{value:void 0}),o=[];break;case"textarea":i=r2(e,i),n=r2(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=eE)}o2(r,n);var f;r=null;for(E in i)if(!n.hasOwnProperty(E)&&i.hasOwnProperty(E)&&i[E]!=null)if(E==="style"){var v=i[E];for(f in v)v.hasOwnProperty(f)&&(r||(r={}),r[f]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(q_.hasOwnProperty(E)?o||(o=[]):(o=o||[]).push(E,null));for(E in n){var x=n[E];if(v=i!=null?i[E]:void 0,n.hasOwnProperty(E)&&x!==v&&(x!=null||v!=null))if(E==="style"){if(v){for(f in v)!v.hasOwnProperty(f)||x&&x.hasOwnProperty(f)||(r||(r={}),r[f]="");for(f in x)x.hasOwnProperty(f)&&v[f]!==x[f]&&(r||(r={}),r[f]=x[f])}else r||(o||(o=[]),o.push(E,r)),r=x;}else E==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,v=v?v.__html:void 0,x!=null&&v!==x&&(o=o||[]).push(E,x)):E==="children"?typeof x!="string"&&typeof x!="number"||(o=o||[]).push(E,""+x):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(q_.hasOwnProperty(E)?(x!=null&&E==="onScroll"&&an("scroll",e),o||v===x||(o=[])):typeof x=="object"&&x!==null&&x.$$typeof===G2?x.toString():(o=o||[]).push(E,x))}r&&(o=o||[]).push("style",r);var E=o;(t.updateQueue=E)&&(t.flags|=4)}};DG=function(e,t,r,n){r!==n&&(t.flags|=4)};function h_(e,t){if(!Tl)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function jRe(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return oa(t.type)&&rE(),null;case 3:return Am(),sn(ia),sn(vo),pR(),n=t.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Dw(t)?t.flags|=4:n.hydrate||(t.flags|=256)),S2(t),null;case 5:fR(t);var i=rp(V_.current);if(r=t.type,e!==null&&t.stateNode!=null)LG(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(t.stateNode===null)throw Error(rt(166));return null}if(e=rp(El.current),Dw(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[Zc]=t,n[tE]=o,r){case"dialog":an("cancel",n),an("close",n);break;case"iframe":case"object":case"embed":an("load",n);break;case"video":case"audio":for(e=0;e<v_.length;e++)an(v_[e],n);break;case"source":an("error",n);break;case"img":case"image":case"link":an("error",n),an("load",n);break;case"details":an("toggle",n);break;case"input":d$(n,o),an("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},an("invalid",n);break;case"textarea":v$(n,o),an("invalid",n)}o2(r,o),e=null;for(var f in o)o.hasOwnProperty(f)&&(i=o[f],f==="children"?typeof i=="string"?n.textContent!==i&&(e=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(e=["children",""+i]):q_.hasOwnProperty(f)&&i!=null&&f==="onScroll"&&an("scroll",n));switch(r){case"input":Iw(n),m$(n,o,!0);break;case"textarea":Iw(n),g$(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=eE)}n=e,t.updateQueue=n,n!==null&&(t.flags|=4)}else{switch(f=i.nodeType===9?i:i.ownerDocument,e===n2.html&&(e=P8(r)),e===n2.html?r==="script"?(e=f.createElement("div"),e.innerHTML="<script></script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=f.createElement(r,{is:n.is}):(e=f.createElement(r),r==="select"&&(f=e,n.multiple?f.multiple=!0:n.size&&(f.size=n.size))):e=f.createElementNS(e,r),e[Zc]=t,e[tE]=n,OG(e,t,!1,!1),t.stateNode=e,f=a2(r,n),r){case"dialog":an("cancel",e),an("close",e),i=n;break;case"iframe":case"object":case"embed":an("load",e),i=n;break;case"video":case"audio":for(i=0;i<v_.length;i++)an(v_[i],e);i=n;break;case"source":an("error",e),i=n;break;case"img":case"image":case"link":an("error",e),an("load",e),i=n;break;case"details":an("toggle",e),i=n;break;case"input":d$(e,n),i=Qq(e,n),an("invalid",e);break;case"option":i=t2(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=hn({},n,{value:void 0}),an("invalid",e);break;case"textarea":v$(e,n),i=r2(e,n),an("invalid",e);break;default:i=n}o2(r,i);var v=i;for(o in v)if(v.hasOwnProperty(o)){var x=v[o];o==="style"?q8(e,x):o==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&M8(e,x)):o==="children"?typeof x=="string"?(r!=="textarea"||x!=="")&&R_(e,x):typeof x=="number"&&R_(e,""+x):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(q_.hasOwnProperty(o)?x!=null&&o==="onScroll"&&an("scroll",e):x!=null&&z2(e,o,x,f))}switch(r){case"input":Iw(e),m$(e,n,!1);break;case"textarea":Iw(e),g$(e);break;case"option":n.value!=null&&e.setAttribute("value",""+rh(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?ym(e,!!n.multiple,o,!1):n.defaultValue!=null&&ym(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=eE)}lG(r,n)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)DG(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(rt(166));r=rp(V_.current),rp(El.current),Dw(t)?(n=t.stateNode,r=t.memoizedProps,n[Zc]=t,n.nodeValue!==r&&(t.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Zc]=t,t.stateNode=n)}return null;case 13:return sn(Cn),n=t.memoizedState,(t.flags&64)!==0?(t.lanes=r,t):(n=n!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&Dw(t):r=e.memoizedState!==null,n&&!r&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(Cn.current&1)!==0?$i===0&&($i=3):(($i===0||$i===3)&&($i=4),Do===null||(H_&134217727)===0&&(Lm&134217727)===0||Tm(Do,mo))),(n||r)&&(t.flags|=4),null);case 4:return Am(),S2(t),e===null&&oG(t.stateNode.containerInfo),null;case 10:return cR(t),null;case 17:return oa(t.type)&&rE(),null;case 19:if(sn(Cn),n=t.memoizedState,n===null)return null;if(o=(t.flags&64)!==0,f=n.rendering,f===null){if(o)h_(n,!1);else{if($i!==0||e!==null&&(e.flags&64)!==0)for(e=t.child;e!==null;){if(f=lE(e),f!==null){for(t.flags|=64,h_(n,!1),o=f.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,f=o.alternate,f===null?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,e=f.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Pn(Cn,Cn.current&1|2),t.child}e=e.sibling}n.tail!==null&&po()>q2&&(t.flags|=64,o=!0,h_(n,!1),t.lanes=33554432)}}else{if(!o)if(e=lE(f),e!==null){if(t.flags|=64,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),h_(n,!0),n.tail===null&&n.tailMode==="hidden"&&!f.alternate&&!Tl)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*po()-n.renderingStartTime>q2&&r!==1073741824&&(t.flags|=64,o=!0,h_(n,!1),t.lanes=33554432);n.isBackwards?(f.sibling=t.child,t.child=f):(r=n.last,r!==null?r.sibling=f:t.child=f,n.last=f)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=po(),r.sibling=null,t=Cn.current,Pn(Cn,o?t&1|2:t&1),r):null;case 23:case 24:return ER(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(rt(156,t.tag))}function BRe(e){switch(e.tag){case 1:oa(e.type)&&rE();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(Am(),sn(ia),sn(vo),pR(),t=e.flags,(t&64)!==0)throw Error(rt(285));return e.flags=t&-4097|64,e;case 5:return fR(e),null;case 13:return sn(Cn),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return sn(Cn),null;case 4:return Am(),null;case 10:return cR(e),null;case 23:case 24:return ER(),null;default:return null}}function _R(e,t){try{var r="",n=t;do r+=b2e(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i}}function I2(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var URe=typeof WeakMap=="function"?WeakMap:Map;function kG(e,t,r){r=Xc(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){mE||(mE=!0,R2=n),I2(e,t)},r}function NG(e,t,r){r=Xc(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return I2(e,t),n(i)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(wl===null?wl=new Set([this]):wl.add(this),I2(e,t));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),r}var VRe=typeof WeakSet=="function"?WeakSet:Set;function p8(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){th(e,r)}else t.current=null}function $Re(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:js(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&aR(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(rt(163))}function GRe(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var i=e;n=i.next,i=i.tag,(i&4)!==0&&(i&1)!==0&&(ZG(r,e),JRe(r,e)),e=n}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:js(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&H$(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}H$(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&lG(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&B8(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(rt(163))}function d8(e,t){for(var r=e;;){if(r.tag===5){var n=r.stateNode;if(t)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=A8("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function m8(e,t){if(ip&&typeof ip.onCommitFiberUnmount=="function")try{ip.onCommitFiberUnmount(sR,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var n=r,i=n.destroy;if(n=n.tag,i!==void 0)if((n&4)!==0)ZG(t,r);else{n=t;try{i()}catch(o){th(n,o)}}r=r.next}while(r!==e)}break;case 1:if(p8(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){th(t,o)}break;case 5:p8(t);break;case 4:FG(e,t)}}function v8(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function g8(e){return e.tag===5||e.tag===3||e.tag===4}function y8(e){e:{for(var t=e.return;t!==null;){if(g8(t))break e;t=t.return}throw Error(rt(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(rt(161))}r.flags&16&&(R_(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||g8(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?C2(e,r,t):P2(e,r,t)}function C2(e,t,r){var n=e.tag,i=n===5||n===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=eE));else if(n!==4&&(e=e.child,e!==null))for(C2(e,t,r),e=e.sibling;e!==null;)C2(e,t,r),e=e.sibling}function P2(e,t,r){var n=e.tag,i=n===5||n===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(P2(e,t,r),e=e.sibling;e!==null;)P2(e,t,r),e=e.sibling}function FG(e,t){for(var r=t,n=!1,i,o;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(rt(160));switch(i=n.stateNode,n.tag){case 5:o=!1;break e;case 3:i=i.containerInfo,o=!0;break e;case 4:i=i.containerInfo,o=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var f=e,v=r,x=v;;)if(m8(f,x),x.child!==null&&x.tag!==4)x.child.return=x,x=x.child;else{if(x===v)break e;for(;x.sibling===null;){if(x.return===null||x.return===v)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}o?(f=i,v=r.stateNode,f.nodeType===8?f.parentNode.removeChild(v):f.removeChild(v)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,o=!0,r.child.return=r,r=r.child;continue}}else if(m8(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function Wq(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(e=n.destroy,n.destroy=void 0,e!==void 0&&e()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){n=t.memoizedProps;var i=e!==null?e.memoizedProps:n;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,o!==null){for(r[tE]=n,e==="input"&&n.type==="radio"&&n.name!=null&&I8(r,n),a2(e,i),t=a2(e,n),i=0;i<o.length;i+=2){var f=o[i],v=o[i+1];f==="style"?q8(r,v):f==="dangerouslySetInnerHTML"?M8(r,v):f==="children"?R_(r,v):z2(r,f,v,t)}switch(e){case"input":Jq(r,n);break;case"textarea":C8(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,o=n.value,o!=null?ym(r,!!n.multiple,o,!1):e!==!!n.multiple&&(n.defaultValue!=null?ym(r,!!n.multiple,n.defaultValue,!0):ym(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(rt(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,B8(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(wR=po(),d8(t.child,!0)),_8(t);return;case 19:_8(t);return;case 17:return;case 23:case 24:d8(t,t.memoizedState!==null);return}throw Error(rt(163))}function _8(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new VRe),t.forEach(function(n){var i=rOe.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function ZRe(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var WRe=Math.ceil,dE=up.ReactCurrentDispatcher,xR=up.ReactCurrentOwner,Nt=0,Do=null,di=null,mo=0,sp=0,M2=sh(0),$i=0,PE=null,Om=0,H_=0,Lm=0,bR=0,A2=null,wR=0,q2=1/0;function Dm(){q2=po()+500}var ft=null,mE=!1,R2=null,wl=null,oh=!1,P_=null,g_=90,O2=[],L2=[],Pu=null,M_=0,D2=null,$w=-1,Su=0,Gw=0,A_=null,Zw=!1;function Da(){return(Nt&48)!==0?po():$w!==-1?$w:$w=po()}function Jc(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return Mm()===99?1:2;if(Su===0&&(Su=Om),LRe.transition!==0){Gw!==0&&(Gw=A2!==null?A2.pendingLanes:0),e=Su;var t=4186112&~Gw;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=Mm(),(Nt&4)!==0&&e===98?e=Qw(12,Su):(e=N2e(e),e=Qw(e,Su)),e}function eh(e,t,r){if(50<M_)throw M_=0,D2=null,Error(rt(185));if(e=ME(e,t),e===null)return null;bE(e,t,r),e===Do&&(Lm|=t,$i===4&&Tm(e,mo));var n=Mm();t===1?(Nt&8)!==0&&(Nt&48)===0?k2(e):(is(e,r),Nt===0&&(Dm(),Sl())):((Nt&4)===0||n!==98&&n!==99||(Pu===null?Pu=new Set([e]):Pu.add(e)),is(e,r)),A2=e}function ME(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function is(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,f=e.pendingLanes;0<f;){var v=31-nh(f),x=1<<v,E=o[v];if(E===-1){if((x&n)===0||(x&i)!==0){E=t,um(x);var S=Hr;o[v]=10<=S?E+250:6<=S?E+5e3:-1}}else E<=t&&(e.expiredLanes|=x);f&=~x}if(n=k_(e,e===Do?mo:0),t=Hr,n===0)r!==null&&(r!==Uq&&g2(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==Uq&&g2(r)}t===15?(r=k2.bind(null,e),Tu===null?(Tu=[r],Vw=lR(IE,vG)):Tu.push(r),r=Uq):t===14?r=j_(99,k2.bind(null,e)):(r=F2e(t),r=j_(r,zG.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function zG(e){if($w=-1,Gw=Su=0,(Nt&48)!==0)throw Error(rt(327));var t=e.callbackNode;if(lh()&&e.callbackNode!==t)return null;var r=k_(e,e===Do?mo:0);if(r===0)return null;var n=r,i=Nt;Nt|=16;var o=VG();(Do!==e||mo!==n)&&(Dm(),Sm(e,n));do try{YRe();break}catch(v){UG(e,v)}while(!0);if(uR(),dE.current=o,Nt=i,di!==null?n=0:(Do=null,mo=0,n=$i),(Om&Lm)!==0)Sm(e,0);else if(n!==0){if(n===2&&(Nt|=64,e.hydrate&&(e.hydrate=!1,aR(e.containerInfo)),r=H8(e),r!==0&&(n=y_(e,r))),n===1)throw t=PE,Sm(e,0),Tm(e,r),is(e,po()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(rt(345));case 2:Qf(e);break;case 3:if(Tm(e,r),(r&62914560)===r&&(n=wR+500-po(),10<n)){if(k_(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Da(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=j$(Qf.bind(null,e),n);break}Qf(e);break;case 4:if(Tm(e,r),(r&4186112)===r)break;for(n=e.eventTimes,i=-1;0<r;){var f=31-nh(r);o=1<<f,f=n[f],f>i&&(i=f),r&=~o}if(r=i,r=po()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*WRe(r/1960))-r,10<r){e.timeoutHandle=j$(Qf.bind(null,e),r);break}Qf(e);break;case 5:Qf(e);break;default:throw Error(rt(329))}}return is(e,po()),e.callbackNode===t?zG.bind(null,e):null}function Tm(e,t){for(t&=~bR,t&=~Lm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-nh(t),n=1<<r;e[r]=-1,t&=~n}}function k2(e){if((Nt&48)!==0)throw Error(rt(327));if(lh(),e===Do&&(e.expiredLanes&mo)!==0){var t=mo,r=y_(e,t);(Om&Lm)!==0&&(t=k_(e,t),r=y_(e,t))}else t=k_(e,0),r=y_(e,t);if(e.tag!==0&&r===2&&(Nt|=64,e.hydrate&&(e.hydrate=!1,aR(e.containerInfo)),t=H8(e),t!==0&&(r=y_(e,t))),r===1)throw r=PE,Sm(e,0),Tm(e,t),is(e,po()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qf(e),is(e,po()),null}function HRe(){if(Pu!==null){var e=Pu;Pu=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,is(t,po())})}Sl()}function jG(e,t){var r=Nt;Nt|=1;try{return e(t)}finally{Nt=r,Nt===0&&(Dm(),Sl())}}function BG(e,t){var r=Nt;Nt&=-2,Nt|=8;try{return e(t)}finally{Nt=r,Nt===0&&(Dm(),Sl())}}function Nw(e,t){Pn(M2,sp),sp|=t,Om|=t}function ER(){sp=M2.current,sn(M2)}function Sm(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,PRe(r)),di!==null)for(r=di.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&rE();break;case 3:Am(),sn(ia),sn(vo),pR();break;case 5:fR(n);break;case 4:Am();break;case 13:sn(Cn);break;case 19:sn(Cn);break;case 10:cR(n);break;case 23:case 24:ER()}r=r.return}Do=e,di=ah(e.current,null),mo=sp=Om=t,$i=0,PE=null,bR=Lm=H_=0}function UG(e,t){do{var r=di;try{if(uR(),I_.current=pE,uE){for(var n=Bn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}uE=!1}if($_=0,Vi=fo=Bn=null,C_=!1,xR.current=null,r===null||r.return===null){$i=1,PE=t,di=null;break}e:{var o=e,f=r.return,v=r,x=t;if(t=mo,v.flags|=2048,v.firstEffect=v.lastEffect=null,x!==null&&typeof x=="object"&&typeof x.then=="function"){var E=x;if((v.mode&2)===0){var S=v.alternate;S?(v.updateQueue=S.updateQueue,v.memoizedState=S.memoizedState,v.lanes=S.lanes):(v.updateQueue=null,v.memoizedState=null)}var P=(Cn.current&1)!==0,q=f;do{var F;if(F=q.tag===13){var K=q.memoizedState;if(K!==null)F=K.dehydrated!==null;else{var ne=q.memoizedProps;F=ne.fallback===void 0?!1:ne.unstable_avoidThisFallback!==!0?!0:!P}}if(F){var Z=q.updateQueue;if(Z===null){var W=new Set;W.add(E),q.updateQueue=W}else Z.add(E);if((q.mode&2)===0){if(q.flags|=64,v.flags|=16384,v.flags&=-2981,v.tag===1)if(v.alternate===null)v.tag=17;else{var Q=Xc(-1,1);Q.tag=2,Qc(v,Q)}v.lanes|=1;break e}x=void 0,v=t;var le=o.pingCache;if(le===null?(le=o.pingCache=new URe,x=new Set,le.set(E,x)):(x=le.get(E),x===void 0&&(x=new Set,le.set(E,x))),!x.has(v)){x.add(v);var ce=tOe.bind(null,o,E,v);E.then(ce,ce)}q.flags|=4096,q.lanes=t;break e}q=q.return}while(q!==null);x=Error((gm(v.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}$i!==5&&($i=2),x=_R(x,v),q=f;do{switch(q.tag){case 3:o=x,q.flags|=4096,t&=-t,q.lanes|=t;var ze=kG(q,o,t);W$(q,ze);break e;case 1:o=x;var Le=q.type,Be=q.stateNode;if((q.flags&64)===0&&(typeof Le.getDerivedStateFromError=="function"||Be!==null&&typeof Be.componentDidCatch=="function"&&(wl===null||!wl.has(Be)))){q.flags|=4096,t&=-t,q.lanes|=t;var et=NG(q,o,t);W$(q,et);break e}}q=q.return}while(q!==null)}GG(r)}catch(ot){t=ot,di===r&&r!==null&&(di=r=r.return);continue}break}while(!0)}function VG(){var e=dE.current;return dE.current=pE,e===null?pE:e}function y_(e,t){var r=Nt;Nt|=16;var n=VG();Do===e&&mo===t||Sm(e,t);do try{KRe();break}catch(i){UG(e,i)}while(!0);if(uR(),Nt=r,dE.current=n,di!==null)throw Error(rt(261));return Do=null,mo=0,$i}function KRe(){for(;di!==null;)$G(di)}function YRe(){for(;di!==null&&!qRe();)$G(di)}function $G(e){var t=WG(e.alternate,e,sp);e.memoizedProps=e.pendingProps,t===null?GG(e):di=t,xR.current=null}function GG(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&2048)===0){if(r=jRe(r,t,sp),r!==null){di=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||(sp&1073741824)!==0||(r.mode&4)===0){for(var n=0,i=r.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(r=BRe(t),r!==null){r.flags&=2047,di=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,t!==null){di=t;return}di=t=e}while(t!==null);$i===0&&($i=5)}function Qf(e){var t=Mm();return ap(99,XRe.bind(null,e,t)),null}function XRe(e,t){do lh();while(P_!==null);if((Nt&48)!==0)throw Error(rt(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(rt(177));e.callbackNode=null;var n=r.lanes|r.childLanes,i=n,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var f=e.eventTimes,v=e.expirationTimes;0<o;){var x=31-nh(o),E=1<<x;i[x]=0,f[x]=-1,v[x]=-1,o&=~E}if(Pu!==null&&(n&24)===0&&Pu.has(e)&&Pu.delete(e),e===Do&&(di=Do=null,mo=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(i=Nt,Nt|=32,xR.current=null,zq=zw,f=L$(),f2(f)){if("selectionStart"in f)v={start:f.selectionStart,end:f.selectionEnd};else e:if(v=(v=f.ownerDocument)&&v.defaultView||window,(E=v.getSelection&&v.getSelection())&&E.rangeCount!==0){v=E.anchorNode,o=E.anchorOffset,x=E.focusNode,E=E.focusOffset;try{v.nodeType,x.nodeType}catch(ot){v=null;break e}var S=0,P=-1,q=-1,F=0,K=0,ne=f,Z=null;t:for(;;){for(var W;ne!==v||o!==0&&ne.nodeType!==3||(P=S+o),ne!==x||E!==0&&ne.nodeType!==3||(q=S+E),ne.nodeType===3&&(S+=ne.nodeValue.length),(W=ne.firstChild)!==null;)Z=ne,ne=W;for(;;){if(ne===f)break t;if(Z===v&&++F===o&&(P=S),Z===x&&++K===E&&(q=S),(W=ne.nextSibling)!==null)break;ne=Z,Z=ne.parentNode}ne=W}v=P===-1||q===-1?null:{start:P,end:q}}else v=null;v=v||{start:0,end:0}}else v=null;jq={focusedElem:f,selectionRange:v},zw=!1,A_=null,Zw=!1,ft=n;do try{QRe()}catch(ot){if(ft===null)throw Error(rt(330));th(ft,ot),ft=ft.nextEffect}while(ft!==null);A_=null,ft=n;do try{for(f=e;ft!==null;){var Q=ft.flags;if(Q&16&&R_(ft.stateNode,""),Q&128){var le=ft.alternate;if(le!==null){var ce=le.ref;ce!==null&&(typeof ce=="function"?ce(null):ce.current=null)}}switch(Q&1038){case 2:y8(ft),ft.flags&=-3;break;case 6:y8(ft),ft.flags&=-3,Wq(ft.alternate,ft);break;case 1024:ft.flags&=-1025;break;case 1028:ft.flags&=-1025,Wq(ft.alternate,ft);break;case 4:Wq(ft.alternate,ft);break;case 8:v=ft,FG(f,v);var ze=v.alternate;v8(v),ze!==null&&v8(ze)}ft=ft.nextEffect}}catch(ot){if(ft===null)throw Error(rt(330));th(ft,ot),ft=ft.nextEffect}while(ft!==null);if(ce=jq,le=L$(),Q=ce.focusedElem,f=ce.selectionRange,le!==Q&&Q&&Q.ownerDocument&&rG(Q.ownerDocument.documentElement,Q)){for(f!==null&&f2(Q)&&(le=f.start,ce=f.end,ce===void 0&&(ce=le),"selectionStart"in Q?(Q.selectionStart=le,Q.selectionEnd=Math.min(ce,Q.value.length)):(ce=(le=Q.ownerDocument||document)&&le.defaultView||window,ce.getSelection&&(ce=ce.getSelection(),v=Q.textContent.length,ze=Math.min(f.start,v),f=f.end===void 0?ze:Math.min(f.end,v),!ce.extend&&ze>f&&(v=f,f=ze,ze=v),v=O$(Q,ze),o=O$(Q,f),v&&o&&(ce.rangeCount!==1||ce.anchorNode!==v.node||ce.anchorOffset!==v.offset||ce.focusNode!==o.node||ce.focusOffset!==o.offset)&&(le=le.createRange(),le.setStart(v.node,v.offset),ce.removeAllRanges(),ze>f?(ce.addRange(le),ce.extend(o.node,o.offset)):(le.setEnd(o.node,o.offset),ce.addRange(le)))))),le=[],ce=Q;ce=ce.parentNode;)ce.nodeType===1&&le.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<le.length;Q++)ce=le[Q],ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}zw=!!zq,jq=zq=null,e.current=r,ft=n;do try{for(Q=e;ft!==null;){var Le=ft.flags;if(Le&36&&GRe(Q,ft.alternate,ft),Le&128){le=void 0;var Be=ft.ref;if(Be!==null){var et=ft.stateNode;switch(ft.tag){case 5:le=et;break;default:le=et}typeof Be=="function"?Be(le):Be.current=le}}ft=ft.nextEffect}}catch(ot){if(ft===null)throw Error(rt(330));th(ft,ot),ft=ft.nextEffect}while(ft!==null);ft=null,ORe(),Nt=i}else e.current=r;if(oh)oh=!1,P_=e,g_=t;else for(ft=n;ft!==null;)t=ft.nextEffect,ft.nextEffect=null,ft.flags&8&&(Le=ft,Le.sibling=null,Le.stateNode=null),ft=t;if(n=e.pendingLanes,n===0&&(wl=null),n===1?e===D2?M_++:(M_=0,D2=e):M_=0,r=r.stateNode,ip&&typeof ip.onCommitFiberRoot=="function")try{ip.onCommitFiberRoot(sR,r,void 0,(r.current.flags&64)===64)}catch(ot){}if(is(e,po()),mE)throw mE=!1,e=R2,R2=null,e;return(Nt&8)!==0||Sl(),null}function QRe(){for(;ft!==null;){var e=ft.alternate;Zw||A_===null||((ft.flags&8)!==0?x$(ft,A_)&&(Zw=!0):ft.tag===13&&ZRe(e,ft)&&x$(ft,A_)&&(Zw=!0));var t=ft.flags;(t&256)!==0&&$Re(e,ft),(t&512)===0||oh||(oh=!0,j_(97,function(){return lh(),null})),ft=ft.nextEffect}}function lh(){if(g_!==90){var e=97<g_?97:g_;return g_=90,ap(e,eOe)}return!1}function JRe(e,t){O2.push(t,e),oh||(oh=!0,j_(97,function(){return lh(),null}))}function ZG(e,t){L2.push(t,e),oh||(oh=!0,j_(97,function(){return lh(),null}))}function eOe(){if(P_===null)return!1;var e=P_;if(P_=null,(Nt&48)!==0)throw Error(rt(331));var t=Nt;Nt|=32;var r=L2;L2=[];for(var n=0;n<r.length;n+=2){var i=r[n],o=r[n+1],f=i.destroy;if(i.destroy=void 0,typeof f=="function")try{f()}catch(x){if(o===null)throw Error(rt(330));th(o,x)}}for(r=O2,O2=[],n=0;n<r.length;n+=2){i=r[n],o=r[n+1];try{var v=i.create;i.destroy=v()}catch(x){if(o===null)throw Error(rt(330));th(o,x)}}for(v=e.current.firstEffect;v!==null;)e=v.nextEffect,v.nextEffect=null,v.flags&8&&(v.sibling=null,v.stateNode=null),v=e;return Nt=t,Sl(),!0}function x8(e,t,r){t=_R(r,t),t=kG(e,t,1),Qc(e,t),t=Da(),e=ME(e,1),e!==null&&(bE(e,1,t),is(e,t))}function th(e,t){if(e.tag===3)x8(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){x8(r,e,t);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(wl===null||!wl.has(n))){e=_R(t,e);var i=NG(r,e,1);if(Qc(r,i),i=Da(),r=ME(r,1),r!==null)bE(r,1,i),is(r,i);else if(typeof n.componentDidCatch=="function"&&(wl===null||!wl.has(n)))try{n.componentDidCatch(t,e)}catch(o){}break}}r=r.return}}function tOe(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Da(),e.pingedLanes|=e.suspendedLanes&r,Do===e&&(mo&r)===r&&($i===4||$i===3&&(mo&62914560)===mo&&500>po()-wR?Sm(e,0):bR|=r),is(e,t)}function rOe(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,(t&2)===0?t=1:(t&4)===0?t=Mm()===99?1:2:(Su===0&&(Su=Om),t=cm(62914560&~Su),t===0&&(t=4194304))),r=Da(),e=ME(e,t),e!==null&&(bE(e,t,r),is(e,r))}var WG;WG=function(e,t,r){var n=t.lanes;if(e!==null){if(e.memoizedProps!==t.pendingProps||ia.current)Bs=!0;else if((r&n)!==0)Bs=(e.flags&16384)!==0;else{switch(Bs=!1,t.tag){case 3:a8(t),$q();break;case 5:X$(t);break;case 1:oa(t.type)&&Uw(t);break;case 4:x2(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var i=t.type._context;Pn(nE,i._currentValue),i._currentValue=n;break;case 13:if(t.memoizedState!==null)return(r&t.child.childLanes)!==0?s8(e,t,r):(Pn(Cn,Cn.current&1),t=Cu(e,t,r),t!==null?t.sibling:null);Pn(Cn,Cn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&64)!==0){if(n)return f8(e,t,r);t.flags|=64}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pn(Cn,Cn.current),n)break;return null;case 23:case 24:return t.lanes=0,Gq(e,t,r)}return Cu(e,t,r)}}else Bs=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=Pm(t,vo.current),wm(t,r),i=mR(null,t,n,e,i,r),t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,oa(n)){var o=!0;Uw(t)}else o=!1;t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,hR(t);var f=n.getDerivedStateFromProps;typeof f=="function"&&aE(t,n,f,e),i.updater=CE,t.stateNode=i,i._reactInternals=t,_2(t,n,e,r),t=T2(null,t,n,!0,o,r)}else t.tag=0,na(null,t,i,r),t=t.child;return t;case 16:i=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=iOe(i),e=js(i,e),o){case 0:t=E2(null,t,i,e,r);break e;case 1:t=o8(null,t,i,e,r);break e;case 11:t=n8(null,t,i,e,r);break e;case 14:t=i8(null,t,i,js(i.type,e),n,r);break e}throw Error(rt(306,i,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:js(n,i),E2(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:js(n,i),o8(e,t,n,i,r);case 3:if(a8(t),n=t.updateQueue,e===null||n===null)throw Error(rt(282));if(n=t.pendingProps,i=t.memoizedState,i=i!==null?i.element:null,yG(e,t),B_(t,n,null,r),n=t.memoizedState.element,n===i)$q(),t=Cu(e,t,r);else{if(i=t.stateNode,(o=i.hydrate)&&(Wc=bm(t.stateNode.containerInfo.firstChild),Iu=t,o=Tl=!0),o){if(e=i.mutableSourceEagerHydrationData,e!=null)for(i=0;i<e.length;i+=2)o=e[i],o._workInProgressVersionPrimary=e[i+1],Em.push(o);for(r=wG(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else na(e,t,n,r),$q();t=t.child}return t;case 5:return X$(t),e===null&&b2(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,f=i.children,m2(n,i)?f=null:o!==null&&m2(n,o)&&(t.flags|=16),RG(e,t),na(e,t,f,r),t.child;case 6:return e===null&&b2(t),null;case 13:return s8(e,t,r);case 4:return x2(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=sE(t,null,n,r):na(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:js(n,i),n8(e,t,n,i,r);case 7:return na(e,t,t.pendingProps,r),t.child;case 8:return na(e,t,t.pendingProps.children,r),t.child;case 12:return na(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,i=t.pendingProps,f=t.memoizedProps,o=i.value;var v=t.type._context;if(Pn(nE,v._currentValue),v._currentValue=o,f!==null)if(v=f.value,o=es(v,o)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(v,o):1073741823)|0,o===0){if(f.children===i.children&&!ia.current){t=Cu(e,t,r);break e}}else for(v=t.child,v!==null&&(v.return=t);v!==null;){var x=v.dependencies;if(x!==null){f=v.child;for(var E=x.firstContext;E!==null;){if(E.context===n&&(E.observedBits&o)!==0){v.tag===1&&(E=Xc(-1,r&-r),E.tag=2,Qc(v,E)),v.lanes|=r,E=v.alternate,E!==null&&(E.lanes|=r),gG(v.return,r),x.lanes|=r;break}E=E.next}}else f=v.tag===10&&v.type===t.type?null:v.child;if(f!==null)f.return=v;else for(f=v;f!==null;){if(f===t){f=null;break}if(v=f.sibling,v!==null){v.return=f.return,f=v;break}f=f.return}v=f}na(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,o=t.pendingProps,n=o.children,wm(t,r),i=ns(i,o.unstable_observedBits),n=n(i),t.flags|=1,na(e,t,n,r),t.child;case 14:return i=t.type,o=js(i,t.pendingProps),o=js(i.type,o),i8(e,t,i,o,n,r);case 15:return qG(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:js(n,i),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,oa(n)?(e=!0,Uw(t)):e=!1,wm(t,r),xG(t,n,i),_2(t,n,i,r),T2(null,t,n,!0,e,r);case 19:return f8(e,t,r);case 23:return Gq(e,t,r);case 24:return Gq(e,t,r)}throw Error(rt(156,t.tag))};function nOe(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function ts(e,t,r,n){return new nOe(e,t,r,n)}function TR(e){return e=e.prototype,!(!e||!e.isReactComponent)}function iOe(e){if(typeof e=="function")return TR(e)?1:0;if(e!=null){if(e=e.$$typeof,e===yE)return 11;if(e===_E)return 14}return 2}function ah(e,t){var r=e.alternate;return r===null?(r=ts(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ww(e,t,r,n,i,o){var f=2;if(n=e,typeof e=="function")TR(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case $c:return Im(r.children,i,o,t);case E8:f=8,i|=16;break;case j2:f=8,i|=1;break;case __:return e=ts(12,r,t,i|8),e.elementType=__,e.type=__,e.lanes=o,e;case x_:return e=ts(13,r,t,i),e.type=x_,e.elementType=x_,e.lanes=o,e;case Hw:return e=ts(19,r,t,i),e.elementType=Hw,e.lanes=o,e;case Z2:return SR(r,i,o,t);case Xq:return e=ts(24,r,t,i),e.elementType=Xq,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B2:f=10;break e;case U2:f=9;break e;case yE:f=11;break e;case _E:f=14;break e;case V2:f=16,n=null;break e;case $2:f=22;break e}throw Error(rt(130,e==null?e:typeof e,""))}return t=ts(f,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function Im(e,t,r,n){return e=ts(7,e,n,t),e.lanes=r,e}function SR(e,t,r,n){return e=ts(23,e,n,t),e.elementType=Z2,e.lanes=r,e}function Hq(e,t,r){return e=ts(6,e,null,t),e.lanes=r,e}function Kq(e,t,r){return t=ts(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function oOe(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Oq(0),this.expirationTimes=Oq(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oq(0),this.mutableSourceEagerHydrationData=null}function aOe(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jf,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function vE(e,t,r,n){var i=t.current,o=Da(),f=Jc(i);e:if(r){r=r._reactInternals;t:{if(cp(r)!==r||r.tag!==1)throw Error(rt(170));var v=r;do{switch(v.tag){case 3:v=v.stateNode.context;break t;case 1:if(oa(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break t}}v=v.return}while(v!==null);throw Error(rt(171))}if(r.tag===1){var x=r.type;if(oa(x)){r=cG(r,x,v);break e}}r=v}else r=ih;return t.context===null?t.context=r:t.pendingContext=r,t=Xc(o,f),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),Qc(i,t),eh(i,f,o),f}function Yq(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function b8(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function IR(e,t){b8(e,t),(e=e.alternate)&&b8(e,t)}function sOe(){return null}function CR(e,t,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new oOe(e,t,r!=null&&r.hydrate===!0),t=ts(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,hR(t),e[Rm]=r.current,oG(e.nodeType===8?e.parentNode:e),n)for(e=0;e<n.length;e++){t=n[e];var i=t._getVersion;i=i(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,i]:r.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=r}CR.prototype.render=function(e){vE(e,this._internalRoot,null,null)};CR.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;vE(null,e,null,function(){t[Rm]=null})};function K_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function lOe(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new CR(e,0,t?{hydrate:!0}:void 0)}function AE(e,t,r,n,i){var o=r._reactRootContainer;if(o){var f=o._internalRoot;if(typeof i=="function"){var v=i;i=function(){var E=Yq(f);v.call(E)}}vE(t,f,e,i)}else{if(o=r._reactRootContainer=lOe(r,n),f=o._internalRoot,typeof i=="function"){var x=i;i=function(){var E=Yq(f);x.call(E)}}BG(function(){vE(t,f,e,i)})}return Yq(f)}F8=function(e){if(e.tag===13){var t=Da();eh(e,4,t),IR(e,4)}};X2=function(e){if(e.tag===13){var t=Da();eh(e,67108864,t),IR(e,67108864)}};z8=function(e){if(e.tag===13){var t=Da(),r=Jc(e);eh(e,r,t),IR(e,r)}};j8=function(e,t){return t()};s2=function(e,t,r){switch(t){case"input":if(Jq(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+"][type=\"radio\"]"),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=SE(n);if(!i)throw Error(rt(90));S8(n),Jq(n,i)}}}break;case"textarea":C8(e,r);break;case"select":t=r.value,t!=null&&ym(e,!!r.multiple,t,!1)}};H2=jG;L8=function(e,t,r,n,i){var o=Nt;Nt|=4;try{return ap(98,e.bind(null,t,r,n,i))}finally{Nt=o,Nt===0&&(Dm(),Sl())}};K2=function(){(Nt&49)===0&&(HRe(),lh())};D8=function(e,t){var r=Nt;Nt|=2;try{return e(t)}finally{Nt=r,Nt===0&&(Dm(),Sl())}};function HG(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!K_(t))throw Error(rt(200));return aOe(e,t,null,r)}var uOe={Events:[Z_,dm,SE,R8,O8,lh,{current:!1}]},f_={findFiberByHostInstance:tp,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cOe={bundleType:f_.bundleType,version:f_.version,rendererPackageName:f_.rendererPackageName,rendererConfig:f_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:up.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=N8(e),e===null?null:e.stateNode},findFiberByHostInstance:f_.findFiberByHostInstance||sOe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(p_=__REACT_DEVTOOLS_GLOBAL_HOOK__,!p_.isDisabled&&p_.supportsFiber))try{sR=p_.inject(cOe),ip=p_}catch(e){}var p_;os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uOe;os.createPortal=HG;os.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(rt(188)):Error(rt(268,Object.keys(e)));return e=N8(t),e=e===null?null:e.stateNode,e};os.flushSync=function(e,t){var r=Nt;if((r&48)!==0)return e(t);Nt|=1;try{if(e)return ap(99,e.bind(null,t))}finally{Nt=r,Sl()}};os.hydrate=function(e,t,r){if(!K_(t))throw Error(rt(200));return AE(null,e,t,!0,r)};os.render=function(e,t,r){if(!K_(t))throw Error(rt(200));return AE(null,e,t,!1,r)};os.unmountComponentAtNode=function(e){if(!K_(e))throw Error(rt(40));return e._reactRootContainer?(BG(function(){AE(null,null,e,!1,function(){e._reactRootContainer=null,e[Rm]=null})}),!0):!1};os.unstable_batchedUpdates=jG;os.unstable_createPortal=function(e,t){return HG(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};os.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!K_(r))throw Error(rt(200));if(e==null||e._reactInternals===void 0)throw Error(rt(38));return AE(e,t,r,!1,n)};os.version="17.0.2"});var as=I((n3t,XG)=>{"use strict";function YG(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YG)}catch(e){console.error(e)}}YG(),XG.exports=KG()});var nt=I((PR,QG)=>{"use strict";var Y_=function(e){return e&&e.Math===Math&&e};QG.exports=Y_(typeof globalThis=="object"&&globalThis)||Y_(typeof window=="object"&&window)||Y_(typeof self=="object"&&self)||Y_(typeof global=="object"&&global)||Y_(typeof PR=="object"&&PR)||function(){return this}()||Function("return this")()});var Ye=I((i3t,JG)=>{"use strict";JG.exports=function(e){try{return!!e()}catch(t){return!0}}});var vt=I((o3t,eZ)=>{"use strict";var hOe=Ye();eZ.exports=!hOe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var km=I((a3t,tZ)=>{"use strict";var fOe=Ye();tZ.exports=!fOe(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var it=I((s3t,rZ)=>{"use strict";var pOe=km(),qE=Function.prototype.call;rZ.exports=pOe?qE.bind(qE):function(){return qE.apply(qE,arguments)}});var X_=I(oZ=>{"use strict";var nZ={}.propertyIsEnumerable,iZ=Object.getOwnPropertyDescriptor,dOe=iZ&&!nZ.call({1:2},1);oZ.f=dOe?function(t){var r=iZ(this,t);return!!r&&r.enumerable}:nZ});var aa=I((u3t,aZ)=>{"use strict";aZ.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var Ze=I((c3t,uZ)=>{"use strict";var sZ=km(),lZ=Function.prototype,MR=lZ.call,mOe=sZ&&lZ.bind.bind(MR,MR);uZ.exports=sZ?mOe:function(e){return function(){return MR.apply(e,arguments)}}});var Zi=I((h3t,hZ)=>{"use strict";var cZ=Ze(),vOe=cZ({}.toString),gOe=cZ("".slice);hZ.exports=function(e){return gOe(vOe(e),8,-1)}});var Au=I((f3t,fZ)=>{"use strict";var yOe=Ze(),_Oe=Ye(),xOe=Zi(),AR=Object,bOe=yOe("".split);fZ.exports=_Oe(function(){return!AR("z").propertyIsEnumerable(0)})?function(e){return xOe(e)==="String"?bOe(e,""):AR(e)}:AR});var sa=I((p3t,pZ)=>{"use strict";pZ.exports=function(e){return e==null}});var zr=I((d3t,dZ)=>{"use strict";var wOe=sa(),EOe=TypeError;dZ.exports=function(e){if(wOe(e))throw new EOe("Can't call method on "+e);return e}});var Qn=I((m3t,mZ)=>{"use strict";var TOe=Au(),SOe=zr();mZ.exports=function(e){return TOe(SOe(e))}});var Ft=I((v3t,vZ)=>{"use strict";var qR=typeof document=="object"&&document.all;vZ.exports=typeof qR=="undefined"&&qR!==void 0?function(e){return typeof e=="function"||e===qR}:function(e){return typeof e=="function"}});var bt=I((g3t,gZ)=>{"use strict";var IOe=Ft();gZ.exports=function(e){return typeof e=="object"?e!==null:IOe(e)}});var Ct=I((y3t,yZ)=>{"use strict";var RR=nt(),COe=Ft(),POe=function(e){return COe(e)?e:void 0};yZ.exports=function(e,t){return arguments.length<2?POe(RR[e]):RR[e]&&RR[e][t]}});var Wi=I((_3t,_Z)=>{"use strict";var MOe=Ze();_Z.exports=MOe({}.isPrototypeOf)});var Us=I((x3t,wZ)=>{"use strict";var AOe=nt(),xZ=AOe.navigator,bZ=xZ&&xZ.userAgent;wZ.exports=bZ?String(bZ):""});var $s=I((b3t,PZ)=>{"use strict";var CZ=nt(),OR=Us(),EZ=CZ.process,TZ=CZ.Deno,SZ=EZ&&EZ.versions||TZ&&TZ.version,IZ=SZ&&SZ.v8,Vs,RE;IZ&&(Vs=IZ.split("."),RE=Vs[0]>0&&Vs[0]<4?1:+(Vs[0]+Vs[1]));!RE&&OR&&(Vs=OR.match(/Edge\/(\d+)/),(!Vs||Vs[1]>=74)&&(Vs=OR.match(/Chrome\/(\d+)/),Vs&&(RE=+Vs[1])));PZ.exports=RE});var uh=I((w3t,AZ)=>{"use strict";var MZ=$s(),qOe=Ye(),ROe=nt(),OOe=ROe.String;AZ.exports=!!Object.getOwnPropertySymbols&&!qOe(function(){var e=Symbol("symbol detection");return!OOe(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&MZ&&MZ<41})});var LR=I((E3t,qZ)=>{"use strict";var LOe=uh();qZ.exports=LOe&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var qu=I((T3t,RZ)=>{"use strict";var DOe=Ct(),kOe=Ft(),NOe=Wi(),FOe=LR(),zOe=Object;RZ.exports=FOe?function(e){return typeof e=="symbol"}:function(e){var t=DOe("Symbol");return kOe(t)&&NOe(t.prototype,zOe(e))}});var ch=I((S3t,OZ)=>{"use strict";var jOe=String;OZ.exports=function(e){try{return jOe(e)}catch(t){return"Object"}}});var Pt=I((I3t,LZ)=>{"use strict";var BOe=Ft(),UOe=ch(),VOe=TypeError;LZ.exports=function(e){if(BOe(e))return e;throw new VOe(UOe(e)+" is not a function")}});var Mn=I((C3t,DZ)=>{"use strict";var $Oe=Pt(),GOe=sa();DZ.exports=function(e,t){var r=e[t];return GOe(r)?void 0:$Oe(r)}});var FR=I((P3t,kZ)=>{"use strict";var DR=it(),kR=Ft(),NR=bt(),ZOe=TypeError;kZ.exports=function(e,t){var r,n;if(t==="string"&&kR(r=e.toString)&&!NR(n=DR(r,e))||kR(r=e.valueOf)&&!NR(n=DR(r,e))||t!=="string"&&kR(r=e.toString)&&!NR(n=DR(r,e)))return n;throw new ZOe("Can't convert object to primitive value")}});var hr=I((M3t,NZ)=>{"use strict";NZ.exports=!1});var OE=I((A3t,zZ)=>{"use strict";var FZ=nt(),WOe=Object.defineProperty;zZ.exports=function(e,t){try{WOe(FZ,e,{value:t,configurable:!0,writable:!0})}catch(r){FZ[e]=t}return t}});var Q_=I((q3t,UZ)=>{"use strict";var HOe=hr(),KOe=nt(),YOe=OE(),jZ="__core-js_shared__",BZ=UZ.exports=KOe[jZ]||YOe(jZ,{});(BZ.versions||(BZ.versions=[])).push({version:"3.42.0",mode:HOe?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var Ru=I((R3t,$Z)=>{"use strict";var VZ=Q_();$Z.exports=function(e,t){return VZ[e]||(VZ[e]=t||{})}});var Gt=I((O3t,GZ)=>{"use strict";var XOe=zr(),QOe=Object;GZ.exports=function(e){return QOe(XOe(e))}});var jt=I((L3t,ZZ)=>{"use strict";var JOe=Ze(),eLe=Gt(),tLe=JOe({}.hasOwnProperty);ZZ.exports=Object.hasOwn||function(t,r){return tLe(eLe(t),r)}});var hh=I((D3t,WZ)=>{"use strict";var rLe=Ze(),nLe=0,iLe=Math.random(),oLe=rLe(1 .toString);WZ.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+oLe(++nLe+iLe,36)}});var St=I((k3t,KZ)=>{"use strict";var aLe=nt(),sLe=Ru(),HZ=jt(),lLe=hh(),uLe=uh(),cLe=LR(),Nm=aLe.Symbol,zR=sLe("wks"),hLe=cLe?Nm.for||Nm:Nm&&Nm.withoutSetter||lLe;KZ.exports=function(e){return HZ(zR,e)||(zR[e]=uLe&&HZ(Nm,e)?Nm[e]:hLe("Symbol."+e)),zR[e]}});var J_=I((N3t,QZ)=>{"use strict";var fLe=it(),YZ=bt(),XZ=qu(),pLe=Mn(),dLe=FR(),mLe=St(),vLe=TypeError,gLe=mLe("toPrimitive");QZ.exports=function(e,t){if(!YZ(e)||XZ(e))return e;var r=pLe(e,gLe),n;if(r){if(t===void 0&&(t="default"),n=fLe(r,e,t),!YZ(n)||XZ(n))return n;throw new vLe("Can't convert object to primitive value")}return t===void 0&&(t="number"),dLe(e,t)}});var Il=I((F3t,JZ)=>{"use strict";var yLe=J_(),_Le=qu();JZ.exports=function(e){var t=yLe(e,"string");return _Le(t)?t:t+""}});var e0=I((z3t,tW)=>{"use strict";var xLe=nt(),eW=bt(),jR=xLe.document,bLe=eW(jR)&&eW(jR.createElement);tW.exports=function(e){return bLe?jR.createElement(e):{}}});var BR=I((j3t,rW)=>{"use strict";var wLe=vt(),ELe=Ye(),TLe=e0();rW.exports=!wLe&&!ELe(function(){return Object.defineProperty(TLe("div"),"a",{get:function(){return 7}}).a!==7})});var Pi=I(iW=>{"use strict";var SLe=vt(),ILe=it(),CLe=X_(),PLe=aa(),MLe=Qn(),ALe=Il(),qLe=jt(),RLe=BR(),nW=Object.getOwnPropertyDescriptor;iW.f=SLe?nW:function(t,r){if(t=MLe(t),r=ALe(r),RLe)try{return nW(t,r)}catch(n){}if(qLe(t,r))return PLe(!ILe(CLe.f,t,r),t[r])}});var UR=I((U3t,oW)=>{"use strict";var OLe=vt(),LLe=Ye();oW.exports=OLe&&LLe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var at=I((V3t,aW)=>{"use strict";var DLe=bt(),kLe=String,NLe=TypeError;aW.exports=function(e){if(DLe(e))return e;throw new NLe(kLe(e)+" is not an object")}});var kr=I(lW=>{"use strict";var FLe=vt(),zLe=BR(),jLe=UR(),LE=at(),sW=Il(),BLe=TypeError,VR=Object.defineProperty,ULe=Object.getOwnPropertyDescriptor,$R="enumerable",GR="configurable",ZR="writable";lW.f=FLe?jLe?function(t,r,n){if(LE(t),r=sW(r),LE(n),typeof t=="function"&&r==="prototype"&&"value"in n&&ZR in n&&!n[ZR]){var i=ULe(t,r);i&&i[ZR]&&(t[r]=n.value,n={configurable:GR in n?n[GR]:i[GR],enumerable:$R in n?n[$R]:i[$R],writable:!1})}return VR(t,r,n)}:VR:function(t,r,n){if(LE(t),r=sW(r),LE(n),zLe)try{return VR(t,r,n)}catch(i){}if("get"in n||"set"in n)throw new BLe("Accessors not supported");return"value"in n&&(t[r]=n.value),t}});var Jn=I((G3t,uW)=>{"use strict";var VLe=vt(),$Le=kr(),GLe=aa();uW.exports=VLe?function(e,t,r){return $Le.f(e,t,GLe(1,r))}:function(e,t,r){return e[t]=r,e}});var fp=I((Z3t,hW)=>{"use strict";var WR=vt(),ZLe=jt(),cW=Function.prototype,WLe=WR&&Object.getOwnPropertyDescriptor,HR=ZLe(cW,"name"),HLe=HR&&function(){}.name==="something",KLe=HR&&(!WR||WR&&WLe(cW,"name").configurable);hW.exports={EXISTS:HR,PROPER:HLe,CONFIGURABLE:KLe}});var t0=I((W3t,fW)=>{"use strict";var YLe=Ze(),XLe=Ft(),KR=Q_(),QLe=YLe(Function.toString);XLe(KR.inspectSource)||(KR.inspectSource=function(e){return QLe(e)});fW.exports=KR.inspectSource});var YR=I((H3t,dW)=>{"use strict";var JLe=nt(),eDe=Ft(),pW=JLe.WeakMap;dW.exports=eDe(pW)&&/native code/.test(String(pW))});var r0=I((K3t,vW)=>{"use strict";var tDe=Ru(),rDe=hh(),mW=tDe("keys");vW.exports=function(e){return mW[e]||(mW[e]=rDe(e))}});var Fm=I((Y3t,gW)=>{"use strict";gW.exports={}});var vr=I((X3t,xW)=>{"use strict";var nDe=YR(),_W=nt(),iDe=bt(),oDe=Jn(),XR=jt(),QR=Q_(),aDe=r0(),sDe=Fm(),yW="Object already initialized",JR=_W.TypeError,lDe=_W.WeakMap,DE,n0,kE,uDe=function(e){return kE(e)?n0(e):DE(e,{})},cDe=function(e){return function(t){var r;if(!iDe(t)||(r=n0(t)).type!==e)throw new JR("Incompatible receiver, "+e+" required");return r}};nDe||QR.state?(Gs=QR.state||(QR.state=new lDe),Gs.get=Gs.get,Gs.has=Gs.has,Gs.set=Gs.set,DE=function(e,t){if(Gs.has(e))throw new JR(yW);return t.facade=e,Gs.set(e,t),t},n0=function(e){return Gs.get(e)||{}},kE=function(e){return Gs.has(e)}):(pp=aDe("state"),sDe[pp]=!0,DE=function(e,t){if(XR(e,pp))throw new JR(yW);return t.facade=e,oDe(e,pp,t),t},n0=function(e){return XR(e,pp)?e[pp]:{}},kE=function(e){return XR(e,pp)});var Gs,pp;xW.exports={set:DE,get:n0,has:kE,enforce:uDe,getterFor:cDe}});var i0=I((Q3t,EW)=>{"use strict";var tO=Ze(),hDe=Ye(),fDe=Ft(),NE=jt(),eO=vt(),pDe=fp().CONFIGURABLE,dDe=t0(),wW=vr(),mDe=wW.enforce,vDe=wW.get,bW=String,FE=Object.defineProperty,gDe=tO("".slice),yDe=tO("".replace),_De=tO([].join),xDe=eO&&!hDe(function(){return FE(function(){},"length",{value:8}).length!==8}),bDe=String(String).split("String"),wDe=EW.exports=function(e,t,r){gDe(bW(t),0,7)==="Symbol("&&(t="["+yDe(bW(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!NE(e,"name")||pDe&&e.name!==t)&&(eO?FE(e,"name",{value:t,configurable:!0}):e.name=t),xDe&&r&&NE(r,"arity")&&e.length!==r.arity&&FE(e,"length",{value:r.arity});try{r&&NE(r,"constructor")&&r.constructor?eO&&FE(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var n=mDe(e);return NE(n,"source")||(n.source=_De(bDe,typeof t=="string"?t:"")),e};Function.prototype.toString=wDe(function(){return fDe(this)&&vDe(this).source||dDe(this)},"toString")});var br=I((J3t,TW)=>{"use strict";var EDe=Ft(),TDe=kr(),SDe=i0(),IDe=OE();TW.exports=function(e,t,r,n){n||(n={});var i=n.enumerable,o=n.name!==void 0?n.name:t;if(EDe(r)&&SDe(r,o,n),n.global)i?e[t]=r:IDe(t,r);else{try{n.unsafe?e[t]&&(i=!0):delete e[t]}catch(f){}i?e[t]=r:TDe.f(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e}});var rO=I((e4t,SW)=>{"use strict";var CDe=Math.ceil,PDe=Math.floor;SW.exports=Math.trunc||function(t){var r=+t;return(r>0?PDe:CDe)(r)}});var Kr=I((t4t,IW)=>{"use strict";var MDe=rO();IW.exports=function(e){var t=+e;return t!==t||t===0?0:MDe(t)}});var Zs=I((r4t,CW)=>{"use strict";var ADe=Kr(),qDe=Math.max,RDe=Math.min;CW.exports=function(e,t){var r=ADe(e);return r<0?qDe(r+t,0):RDe(r,t)}});var la=I((n4t,PW)=>{"use strict";var ODe=Kr(),LDe=Math.min;PW.exports=function(e){var t=ODe(e);return t>0?LDe(t,9007199254740991):0}});var nr=I((i4t,MW)=>{"use strict";var DDe=la();MW.exports=function(e){return DDe(e.length)}});var zm=I((o4t,qW)=>{"use strict";var kDe=Qn(),NDe=Zs(),FDe=nr(),AW=function(e){return function(t,r,n){var i=kDe(t),o=FDe(i);if(o===0)return!e&&-1;var f=NDe(n,o),v;if(e&&r!==r){for(;o>f;)if(v=i[f++],v!==v)return!0}else for(;o>f;f++)if((e||f in i)&&i[f]===r)return e||f||0;return!e&&-1}};qW.exports={includes:AW(!0),indexOf:AW(!1)}});var iO=I((a4t,OW)=>{"use strict";var zDe=Ze(),nO=jt(),jDe=Qn(),BDe=zm().indexOf,UDe=Fm(),RW=zDe([].push);OW.exports=function(e,t){var r=jDe(e),n=0,i=[],o;for(o in r)!nO(UDe,o)&&nO(r,o)&&RW(i,o);for(;t.length>n;)nO(r,o=t[n++])&&(~BDe(i,o)||RW(i,o));return i}});var zE=I((s4t,LW)=>{"use strict";LW.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var fh=I(DW=>{"use strict";var VDe=iO(),$De=zE(),GDe=$De.concat("length","prototype");DW.f=Object.getOwnPropertyNames||function(t){return VDe(t,GDe)}});var o0=I(kW=>{"use strict";kW.f=Object.getOwnPropertySymbols});var jE=I((c4t,NW)=>{"use strict";var ZDe=Ct(),WDe=Ze(),HDe=fh(),KDe=o0(),YDe=at(),XDe=WDe([].concat);NW.exports=ZDe("Reflect","ownKeys")||function(t){var r=HDe.f(YDe(t)),n=KDe.f;return n?XDe(r,n(t)):r}});var dp=I((h4t,zW)=>{"use strict";var FW=jt(),QDe=jE(),JDe=Pi(),eke=kr();zW.exports=function(e,t,r){for(var n=QDe(t),i=eke.f,o=JDe.f,f=0;f<n.length;f++){var v=n[f];!FW(e,v)&&!(r&&FW(r,v))&&i(e,v,o(t,v))}}});var jm=I((f4t,jW)=>{"use strict";var tke=Ye(),rke=Ft(),nke=/#|\.prototype\./,a0=function(e,t){var r=oke[ike(e)];return r===ske?!0:r===ake?!1:rke(t)?tke(t):!!t},ike=a0.normalize=function(e){return String(e).replace(nke,".").toLowerCase()},oke=a0.data={},ake=a0.NATIVE="N",ske=a0.POLYFILL="P";jW.exports=a0});var J=I((p4t,BW)=>{"use strict";var BE=nt(),lke=Pi().f,uke=Jn(),cke=br(),hke=OE(),fke=dp(),pke=jm();BW.exports=function(e,t){var r=e.target,n=e.global,i=e.stat,o,f,v,x,E,S;if(n?f=BE:i?f=BE[r]||hke(r,{}):f=BE[r]&&BE[r].prototype,f)for(v in t){if(E=t[v],e.dontCallGetSet?(S=lke(f,v),x=S&&S.value):x=f[v],o=pke(n?v:r+(i?".":"#")+v,e.forced),!o&&x!==void 0){if(typeof E==typeof x)continue;fke(E,x)}(e.sham||x&&x.sham)&&uke(E,"sham",!0),cke(f,v,E,e)}}});var UE=I((d4t,VW)=>{"use strict";var dke=St(),mke=dke("toStringTag"),UW={};UW[mke]="z";VW.exports=String(UW)==="[object z]"});var No=I((m4t,$W)=>{"use strict";var vke=UE(),gke=Ft(),VE=Zi(),yke=St(),_ke=yke("toStringTag"),xke=Object,bke=VE(function(){return arguments}())==="Arguments",wke=function(e,t){try{return e[t]}catch(r){}};$W.exports=vke?VE:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=wke(t=xke(e),_ke))=="string"?r:bke?VE(t):(n=VE(t))==="Object"&&gke(t.callee)?"Arguments":n}});var At=I((v4t,GW)=>{"use strict";var Eke=No(),Tke=String;GW.exports=function(e){if(Eke(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return Tke(e)}});var mp=I((g4t,ZW)=>{"use strict";var Ske=iO(),Ike=zE();ZW.exports=Object.keys||function(t){return Ske(t,Ike)}});var $E=I(WW=>{"use strict";var Cke=vt(),Pke=UR(),Mke=kr(),Ake=at(),qke=Qn(),Rke=mp();WW.f=Cke&&!Pke?Object.defineProperties:function(t,r){Ake(t);for(var n=qke(r),i=Rke(r),o=i.length,f=0,v;o>f;)Mke.f(t,v=i[f++],n[v]);return t}});var oO=I((_4t,HW)=>{"use strict";var Oke=Ct();HW.exports=Oke("document","documentElement")});var An=I((x4t,tH)=>{"use strict";var Lke=at(),Dke=$E(),KW=zE(),kke=Fm(),Nke=oO(),Fke=e0(),zke=r0(),YW=">",XW="<",sO="prototype",lO="script",JW=zke("IE_PROTO"),aO=function(){},eH=function(e){return XW+lO+YW+e+XW+"/"+lO+YW},QW=function(e){e.write(eH("")),e.close();var t=e.parentWindow.Object;return e=null,t},jke=function(){var e=Fke("iframe"),t="java"+lO+":",r;return e.style.display="none",Nke.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(eH("document.F=Object")),r.close(),r.F},GE,ZE=function(){try{GE=new ActiveXObject("htmlfile")}catch(t){}ZE=typeof document!="undefined"?document.domain&&GE?QW(GE):jke():QW(GE);for(var e=KW.length;e--;)delete ZE[sO][KW[e]];return ZE()};kke[JW]=!0;tH.exports=Object.create||function(t,r){var n;return t!==null?(aO[sO]=Lke(t),n=new aO,aO[sO]=null,n[JW]=t):n=ZE(),r===void 0?n:Dke.f(n,r)}});var ua=I((b4t,rH)=>{"use strict";var Bke=Ze();rH.exports=Bke([].slice)});var WE=I((w4t,oH)=>{"use strict";var Uke=Zi(),Vke=Qn(),nH=fh().f,$ke=ua(),iH=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Gke=function(e){try{return nH(e)}catch(t){return $ke(iH)}};oH.exports.f=function(t){return iH&&Uke(t)==="Window"?Gke(t):nH(Vke(t))}});var Yr=I((E4t,sH)=>{"use strict";var aH=i0(),Zke=kr();sH.exports=function(e,t,r){return r.get&&aH(r.get,t,{getter:!0}),r.set&&aH(r.set,t,{setter:!0}),Zke.f(e,t,r)}});var uO=I(lH=>{"use strict";var Wke=St();lH.f=Wke});var HE=I((S4t,uH)=>{"use strict";var Hke=nt();uH.exports=Hke});var fn=I((I4t,hH)=>{"use strict";var cH=HE(),Kke=jt(),Yke=uO(),Xke=kr().f;hH.exports=function(e){var t=cH.Symbol||(cH.Symbol={});Kke(t,e)||Xke(t,e,{value:Yke.f(e)})}});var cO=I((C4t,fH)=>{"use strict";var Qke=it(),Jke=Ct(),eNe=St(),tNe=br();fH.exports=function(){var e=Jke("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,n=eNe("toPrimitive");t&&!t[n]&&tNe(t,n,function(i){return Qke(r,this)},{arity:1})}});var Fo=I((P4t,dH)=>{"use strict";var rNe=kr().f,nNe=jt(),iNe=St(),pH=iNe("toStringTag");dH.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!nNe(e,pH)&&rNe(e,pH,{configurable:!0,value:t})}});var ph=I((M4t,mH)=>{"use strict";var oNe=Zi(),aNe=Ze();mH.exports=function(e){if(oNe(e)==="Function")return aNe(e)}});var Mr=I((A4t,gH)=>{"use strict";var vH=ph(),sNe=Pt(),lNe=km(),uNe=vH(vH.bind);gH.exports=function(e,t){return sNe(e),t===void 0?e:lNe?uNe(e,t):function(){return e.apply(t,arguments)}}});var Ws=I((q4t,yH)=>{"use strict";var cNe=Zi();yH.exports=Array.isArray||function(t){return cNe(t)==="Array"}});var Hs=I((R4t,EH)=>{"use strict";var hNe=Ze(),fNe=Ye(),_H=Ft(),pNe=No(),dNe=Ct(),mNe=t0(),xH=function(){},bH=dNe("Reflect","construct"),hO=/^\s*(?:class|function)\b/,vNe=hNe(hO.exec),gNe=!hO.test(xH),s0=function(t){if(!_H(t))return!1;try{return bH(xH,[],t),!0}catch(r){return!1}},wH=function(t){if(!_H(t))return!1;switch(pNe(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return gNe||!!vNe(hO,mNe(t))}catch(r){return!0}};wH.sham=!0;EH.exports=!bH||fNe(function(){var e;return s0(s0.call)||!s0(Object)||!s0(function(){e=!0})||e})?wH:s0});var CH=I((O4t,IH)=>{"use strict";var TH=Ws(),yNe=Hs(),_Ne=bt(),xNe=St(),bNe=xNe("species"),SH=Array;IH.exports=function(e){var t;return TH(e)&&(t=e.constructor,yNe(t)&&(t===SH||TH(t.prototype))?t=void 0:_Ne(t)&&(t=t[bNe],t===null&&(t=void 0))),t===void 0?SH:t}});var Bm=I((L4t,PH)=>{"use strict";var wNe=CH();PH.exports=function(e,t){return new(wNe(e))(t===0?0:t)}});var qn=I((D4t,AH)=>{"use strict";var ENe=Mr(),TNe=Ze(),SNe=Au(),INe=Gt(),CNe=nr(),PNe=Bm(),MH=TNe([].push),dh=function(e){var t=e===1,r=e===2,n=e===3,i=e===4,o=e===6,f=e===7,v=e===5||o;return function(x,E,S,P){for(var q=INe(x),F=SNe(q),K=CNe(F),ne=ENe(E,S),Z=0,W=P||PNe,Q=t?W(x,K):r||f?W(x,0):void 0,le,ce;K>Z;Z++)if((v||Z in F)&&(le=F[Z],ce=ne(le,Z,q),e))if(t)Q[Z]=ce;else if(ce)switch(e){case 3:return!0;case 5:return le;case 6:return Z;case 2:MH(Q,le)}else switch(e){case 4:return!1;case 7:MH(Q,le)}return o?-1:n||i?i:Q}};AH.exports={forEach:dh(0),map:dh(1),filter:dh(2),some:dh(3),every:dh(4),find:dh(5),findIndex:dh(6),filterReject:dh(7)}});var WH=I(()=>{"use strict";var KE=J(),c0=nt(),xO=it(),MNe=Ze(),ANe=hr(),Um=vt(),Vm=uh(),qNe=Ye(),Mi=jt(),RNe=Wi(),mO=at(),YE=Qn(),bO=Il(),ONe=At(),vO=aa(),$m=An(),OH=mp(),LNe=fh(),LH=WE(),DNe=o0(),DH=Pi(),kH=kr(),kNe=$E(),NH=X_(),fO=br(),NNe=Yr(),wO=Ru(),FNe=r0(),FH=Fm(),qH=hh(),zNe=St(),jNe=uO(),BNe=fn(),UNe=cO(),VNe=Fo(),zH=vr(),XE=qn().forEach,ca=FNe("hidden"),QE="Symbol",u0="prototype",$Ne=zH.set,RH=zH.getterFor(QE),ss=Object[u0],vp=c0.Symbol,l0=vp&&vp[u0],GNe=c0.RangeError,ZNe=c0.TypeError,pO=c0.QObject,jH=DH.f,gp=kH.f,BH=LH.f,WNe=NH.f,UH=MNe([].push),Ou=wO("symbols"),h0=wO("op-symbols"),HNe=wO("wks"),gO=!pO||!pO[u0]||!pO[u0].findChild,VH=function(e,t,r){var n=jH(ss,t);n&&delete ss[t],gp(e,t,r),n&&e!==ss&&gp(ss,t,n)},yO=Um&&qNe(function(){return $m(gp({},"a",{get:function(){return gp(this,"a",{value:7}).a}})).a!==7})?VH:gp,dO=function(e,t){var r=Ou[e]=$m(l0);return $Ne(r,{type:QE,tag:e,description:t}),Um||(r.description=t),r},JE=function(t,r,n){t===ss&&JE(h0,r,n),mO(t);var i=bO(r);return mO(n),Mi(Ou,i)?(n.enumerable?(Mi(t,ca)&&t[ca][i]&&(t[ca][i]=!1),n=$m(n,{enumerable:vO(0,!1)})):(Mi(t,ca)||gp(t,ca,vO(1,$m(null))),t[ca][i]=!0),yO(t,i,n)):gp(t,i,n)},EO=function(t,r){mO(t);var n=YE(r),i=OH(n).concat(ZH(n));return XE(i,function(o){(!Um||xO(_O,n,o))&&JE(t,o,n[o])}),t},KNe=function(t,r){return r===void 0?$m(t):EO($m(t),r)},_O=function(t){var r=bO(t),n=xO(WNe,this,r);return this===ss&&Mi(Ou,r)&&!Mi(h0,r)?!1:n||!Mi(this,r)||!Mi(Ou,r)||Mi(this,ca)&&this[ca][r]?n:!0},$H=function(t,r){var n=YE(t),i=bO(r);if(!(n===ss&&Mi(Ou,i)&&!Mi(h0,i))){var o=jH(n,i);return o&&Mi(Ou,i)&&!(Mi(n,ca)&&n[ca][i])&&(o.enumerable=!0),o}},GH=function(t){var r=BH(YE(t)),n=[];return XE(r,function(i){!Mi(Ou,i)&&!Mi(FH,i)&&UH(n,i)}),n},ZH=function(e){var t=e===ss,r=BH(t?h0:YE(e)),n=[];return XE(r,function(i){Mi(Ou,i)&&(!t||Mi(ss,i))&&UH(n,Ou[i])}),n};Vm||(vp=function(){if(RNe(l0,this))throw new ZNe("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:ONe(arguments[0]),r=qH(t),n=function(i){var o=this===void 0?c0:this;o===ss&&xO(n,h0,i),Mi(o,ca)&&Mi(o[ca],r)&&(o[ca][r]=!1);var f=vO(1,i);try{yO(o,r,f)}catch(v){if(!(v instanceof GNe))throw v;VH(o,r,f)}};return Um&&gO&&yO(ss,r,{configurable:!0,set:n}),dO(r,t)},l0=vp[u0],fO(l0,"toString",function(){return RH(this).tag}),fO(vp,"withoutSetter",function(e){return dO(qH(e),e)}),NH.f=_O,kH.f=JE,kNe.f=EO,DH.f=$H,LNe.f=LH.f=GH,DNe.f=ZH,jNe.f=function(e){return dO(zNe(e),e)},Um&&(NNe(l0,"description",{configurable:!0,get:function(){return RH(this).description}}),ANe||fO(ss,"propertyIsEnumerable",_O,{unsafe:!0})));KE({global:!0,constructor:!0,wrap:!0,forced:!Vm,sham:!Vm},{Symbol:vp});XE(OH(HNe),function(e){BNe(e)});KE({target:QE,stat:!0,forced:!Vm},{useSetter:function(){gO=!0},useSimple:function(){gO=!1}});KE({target:"Object",stat:!0,forced:!Vm,sham:!Um},{create:KNe,defineProperty:JE,defineProperties:EO,getOwnPropertyDescriptor:$H});KE({target:"Object",stat:!0,forced:!Vm},{getOwnPropertyNames:GH});UNe();VNe(vp,QE);FH[ca]=!0});var TO=I((F4t,HH)=>{"use strict";var YNe=uh();HH.exports=YNe&&!!Symbol.for&&!!Symbol.keyFor});var YH=I(()=>{"use strict";var XNe=J(),QNe=Ct(),JNe=jt(),eFe=At(),KH=Ru(),tFe=TO(),SO=KH("string-to-symbol-registry"),rFe=KH("symbol-to-string-registry");XNe({target:"Symbol",stat:!0,forced:!tFe},{for:function(e){var t=eFe(e);if(JNe(SO,t))return SO[t];var r=QNe("Symbol")(t);return SO[t]=r,rFe[r]=t,r}})});var QH=I(()=>{"use strict";var nFe=J(),iFe=jt(),oFe=qu(),aFe=ch(),sFe=Ru(),lFe=TO(),XH=sFe("symbol-to-string-registry");nFe({target:"Symbol",stat:!0,forced:!lFe},{keyFor:function(t){if(!oFe(t))throw new TypeError(aFe(t)+" is not a symbol");if(iFe(XH,t))return XH[t]}})});var Hi=I((V4t,r9)=>{"use strict";var uFe=km(),t9=Function.prototype,JH=t9.apply,e9=t9.call;r9.exports=typeof Reflect=="object"&&Reflect.apply||(uFe?e9.bind(JH):function(){return e9.apply(JH,arguments)})});var IO=I(($4t,a9)=>{"use strict";var cFe=Ze(),n9=Ws(),hFe=Ft(),i9=Zi(),fFe=At(),o9=cFe([].push);a9.exports=function(e){if(hFe(e))return e;if(n9(e)){for(var t=e.length,r=[],n=0;n<t;n++){var i=e[n];typeof i=="string"?o9(r,i):(typeof i=="number"||i9(i)==="Number"||i9(i)==="String")&&o9(r,fFe(i))}var o=r.length,f=!0;return function(v,x){if(f)return f=!1,x;if(n9(this))return x;for(var E=0;E<o;E++)if(r[E]===v)return x}}}});var CO=I(()=>{"use strict";var pFe=J(),d9=Ct(),m9=Hi(),dFe=it(),f0=Ze(),v9=Ye(),s9=Ft(),l9=qu(),g9=ua(),mFe=IO(),vFe=uh(),gFe=String,mh=d9("JSON","stringify"),eT=f0(/./.exec),u9=f0("".charAt),yFe=f0("".charCodeAt),_Fe=f0("".replace),xFe=f0(1 .toString),bFe=/[\uD800-\uDFFF]/g,c9=/^[\uD800-\uDBFF]$/,h9=/^[\uDC00-\uDFFF]$/,f9=!vFe||v9(function(){var e=d9("Symbol")("stringify detection");return mh([e])!=="[null]"||mh({a:e})!=="{}"||mh(Object(e))!=="{}"}),p9=v9(function(){return mh("\uDF06\uD834")!=="\"\\udf06\\ud834\""||mh("\uDEAD")!=="\"\\udead\""}),wFe=function(e,t){var r=g9(arguments),n=mFe(t);if(!(!s9(n)&&(e===void 0||l9(e))))return r[1]=function(i,o){if(s9(n)&&(o=dFe(n,this,gFe(i),o)),!l9(o))return o},m9(mh,null,r)},EFe=function(e,t,r){var n=u9(r,t-1),i=u9(r,t+1);return eT(c9,e)&&!eT(h9,i)||eT(h9,e)&&!eT(c9,n)?"\\u"+xFe(yFe(e,0),16):e};mh&&pFe({target:"JSON",stat:!0,arity:3,forced:f9||p9},{stringify:function(t,r,n){var i=g9(arguments),o=m9(f9?wFe:mh,null,i);return p9&&typeof o=="string"?_Fe(o,bFe,EFe):o}})});var _9=I(()=>{"use strict";var TFe=J(),SFe=uh(),IFe=Ye(),y9=o0(),CFe=Gt(),PFe=!SFe||IFe(function(){y9.f(1)});TFe({target:"Object",stat:!0,forced:PFe},{getOwnPropertySymbols:function(t){var r=y9.f;return r?r(CFe(t)):[]}})});var x9=I(()=>{"use strict";WH();YH();QH();CO();_9()});var C9=I(()=>{"use strict";var MFe=J(),AFe=vt(),qFe=nt(),tT=Ze(),RFe=jt(),OFe=Ft(),LFe=Wi(),DFe=At(),kFe=Yr(),NFe=dp(),Lu=qFe.Symbol,yp=Lu&&Lu.prototype;AFe&&OFe(Lu)&&(!("description"in yp)||Lu().description!==void 0)&&(PO={},p0=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:DFe(arguments[0]),r=LFe(yp,this)?new Lu(t):t===void 0?Lu():Lu(t);return t===""&&(PO[r]=!0),r},NFe(p0,Lu),p0.prototype=yp,yp.constructor=p0,b9=String(Lu("description detection"))==="Symbol(description detection)",w9=tT(yp.valueOf),E9=tT(yp.toString),T9=/^Symbol\((.*)\)[^)]+$/,S9=tT("".replace),I9=tT("".slice),kFe(yp,"description",{configurable:!0,get:function(){var t=w9(this);if(RFe(PO,t))return"";var r=E9(t),n=b9?I9(r,7,-1):S9(r,T9,"$1");return n===""?void 0:n}}),MFe({global:!0,constructor:!0,forced:!0},{Symbol:p0}));var PO,p0,b9,w9,E9,T9,S9,I9});var P9=I(()=>{"use strict";var FFe=fn();FFe("asyncIterator")});var M9=I(()=>{"use strict";var zFe=fn();zFe("hasInstance")});var A9=I(()=>{"use strict";var jFe=fn();jFe("isConcatSpreadable")});var q9=I(()=>{"use strict";var BFe=fn();BFe("iterator")});var R9=I(()=>{"use strict";var UFe=fn();UFe("match")});var O9=I(()=>{"use strict";var VFe=fn();VFe("matchAll")});var L9=I(()=>{"use strict";var $Fe=fn();$Fe("replace")});var D9=I(()=>{"use strict";var GFe=fn();GFe("search")});var k9=I(()=>{"use strict";var ZFe=fn();ZFe("species")});var N9=I(()=>{"use strict";var WFe=fn();WFe("split")});var F9=I(()=>{"use strict";var HFe=fn(),KFe=cO();HFe("toPrimitive");KFe()});var z9=I(()=>{"use strict";var YFe=Ct(),XFe=fn(),QFe=Fo();XFe("toStringTag");QFe(YFe("Symbol"),"Symbol")});var j9=I(()=>{"use strict";var JFe=fn();JFe("unscopables")});var d0=I((SUt,B9)=>{"use strict";var eze=Ze(),tze=Pt();B9.exports=function(e,t,r){try{return eze(tze(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(n){}}});var MO=I((IUt,U9)=>{"use strict";var rze=bt();U9.exports=function(e){return rze(e)||e===null}});var AO=I((CUt,V9)=>{"use strict";var nze=MO(),ize=String,oze=TypeError;V9.exports=function(e){if(nze(e))return e;throw new oze("Can't set "+ize(e)+" as a prototype")}});var ls=I((PUt,$9)=>{"use strict";var aze=d0(),sze=bt(),lze=zr(),uze=AO();$9.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},r;try{r=aze(Object.prototype,"__proto__","set"),r(t,[]),e=t instanceof Array}catch(n){}return function(i,o){return lze(i),uze(o),sze(i)&&(e?r(i,o):i.__proto__=o),i}}():void 0)});var qO=I((MUt,G9)=>{"use strict";var cze=kr().f;G9.exports=function(e,t,r){r in e||cze(e,r,{configurable:!0,get:function(){return t[r]},set:function(n){t[r]=n}})}});var vh=I((AUt,W9)=>{"use strict";var hze=Ft(),fze=bt(),Z9=ls();W9.exports=function(e,t,r){var n,i;return Z9&&hze(n=t.constructor)&&n!==r&&fze(i=n.prototype)&&i!==r.prototype&&Z9(e,i),e}});var _p=I((qUt,H9)=>{"use strict";var pze=At();H9.exports=function(e,t){return e===void 0?arguments.length<2?"":t:pze(e)}});var RO=I((RUt,K9)=>{"use strict";var dze=bt(),mze=Jn();K9.exports=function(e,t){dze(t)&&"cause"in t&&mze(e,"cause",t.cause)}});var rT=I((OUt,Q9)=>{"use strict";var vze=Ze(),Y9=Error,gze=vze("".replace),yze=function(e){return String(new Y9(e).stack)}("zxcasd"),X9=/\n\s*at [^:]*:[^\n]*/,_ze=X9.test(yze);Q9.exports=function(e,t){if(_ze&&typeof e=="string"&&!Y9.prepareStackTrace)for(;t--;)e=gze(e,X9,"");return e}});var OO=I((LUt,J9)=>{"use strict";var xze=Ye(),bze=aa();J9.exports=!xze(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",bze(1,7)),e.stack!==7):!0})});var nT=I((DUt,tK)=>{"use strict";var wze=Jn(),Eze=rT(),Tze=OO(),eK=Error.captureStackTrace;tK.exports=function(e,t,r,n){Tze&&(eK?eK(e,t):wze(e,"stack",Eze(r,n)))}});var LO=I((kUt,lK)=>{"use strict";var rK=Ct(),Sze=jt(),nK=Jn(),Ize=Wi(),iK=ls(),oK=dp(),aK=qO(),Cze=vh(),Pze=_p(),Mze=RO(),Aze=nT(),qze=vt(),sK=hr();lK.exports=function(e,t,r,n){var i="stackTraceLimit",o=n?2:1,f=e.split("."),v=f[f.length-1],x=rK.apply(null,f);if(x){var E=x.prototype;if(!sK&&Sze(E,"cause")&&delete E.cause,!r)return x;var S=rK("Error"),P=t(function(q,F){var K=Pze(n?F:q,void 0),ne=n?new x(q):new x;return K!==void 0&&nK(ne,"message",K),Aze(ne,P,ne.stack,2),this&&Ize(E,this)&&Cze(ne,this,P),arguments.length>o&&Mze(ne,arguments[o]),ne});if(P.prototype=E,v!=="Error"?iK?iK(P,S):oK(P,S,{name:!0}):qze&&i in x&&(aK(P,x,i),aK(P,x,"prepareStackTrace")),oK(P,x),!sK)try{E.name!==v&&nK(E,"name",v),E.constructor=P}catch(q){}return P}}});var fK=I(()=>{"use strict";var cK=J(),Rze=nt(),Cl=Hi(),hK=LO(),DO="WebAssembly",uK=Rze[DO],iT=new Error("e",{cause:7}).cause!==7,xp=function(e,t){var r={};r[e]=hK(e,t,iT),cK({global:!0,constructor:!0,arity:1,forced:iT},r)},kO=function(e,t){if(uK&&uK[e]){var r={};r[e]=hK(DO+"."+e,t,iT),cK({target:DO,stat:!0,constructor:!0,arity:1,forced:iT},r)}};xp("Error",function(e){return function(r){return Cl(e,this,arguments)}});xp("EvalError",function(e){return function(r){return Cl(e,this,arguments)}});xp("RangeError",function(e){return function(r){return Cl(e,this,arguments)}});xp("ReferenceError",function(e){return function(r){return Cl(e,this,arguments)}});xp("SyntaxError",function(e){return function(r){return Cl(e,this,arguments)}});xp("TypeError",function(e){return function(r){return Cl(e,this,arguments)}});xp("URIError",function(e){return function(r){return Cl(e,this,arguments)}});kO("CompileError",function(e){return function(r){return Cl(e,this,arguments)}});kO("LinkError",function(e){return function(r){return Cl(e,this,arguments)}});kO("RuntimeError",function(e){return function(r){return Cl(e,this,arguments)}})});var NO=I((zUt,dK)=>{"use strict";var Oze=vt(),Lze=Ye(),Dze=at(),pK=_p(),oT=Error.prototype.toString,kze=Lze(function(){if(Oze){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if(oT.call(e)!=="true")return!0}return oT.call({message:1,name:2})!=="2: 1"||oT.call({})!=="Error"});dK.exports=kze?function(){var t=Dze(this),r=pK(t.name,"Error"),n=pK(t.message);return r?n?r+": "+n:r:n}:oT});var gK=I(()=>{"use strict";var Nze=br(),mK=NO(),vK=Error.prototype;vK.toString!==mK&&Nze(vK,"toString",mK)});var aT=I((UUt,yK)=>{"use strict";var Fze=Ye();yK.exports=!Fze(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var ei=I((VUt,xK)=>{"use strict";var zze=jt(),jze=Ft(),Bze=Gt(),Uze=r0(),Vze=aT(),_K=Uze("IE_PROTO"),FO=Object,$ze=FO.prototype;xK.exports=Vze?FO.getPrototypeOf:function(e){var t=Bze(e);if(zze(t,_K))return t[_K];var r=t.constructor;return jze(r)&&t instanceof r?r.prototype:t instanceof FO?$ze:null}});var bp=I(($Ut,bK)=>{"use strict";bK.exports={}});var sT=I((GUt,wK)=>{"use strict";var Gze=St(),Zze=bp(),Wze=Gze("iterator"),Hze=Array.prototype;wK.exports=function(e){return e!==void 0&&(Zze.Array===e||Hze[Wze]===e)}});var Pl=I((ZUt,TK)=>{"use strict";var Kze=No(),EK=Mn(),Yze=sa(),Xze=bp(),Qze=St(),Jze=Qze("iterator");TK.exports=function(e){if(!Yze(e))return EK(e,Jze)||EK(e,"@@iterator")||Xze[Kze(e)]}});var gh=I((WUt,SK)=>{"use strict";var eje=it(),tje=Pt(),rje=at(),nje=ch(),ije=Pl(),oje=TypeError;SK.exports=function(e,t){var r=arguments.length<2?ije(e):t;if(tje(r))return rje(eje(r,e));throw new oje(nje(e)+" is not iterable")}});var Ai=I((HUt,CK)=>{"use strict";var aje=it(),IK=at(),sje=Mn();CK.exports=function(e,t,r){var n,i;IK(e);try{if(n=sje(e,"return"),!n){if(t==="throw")throw r;return r}n=aje(n,e)}catch(o){i=!0,n=o}if(t==="throw")throw r;if(i)throw n;return IK(n),r}});var pn=I((KUt,qK)=>{"use strict";var lje=Mr(),uje=it(),cje=at(),hje=ch(),fje=sT(),pje=nr(),PK=Wi(),dje=gh(),mje=Pl(),MK=Ai(),vje=TypeError,lT=function(e,t){this.stopped=e,this.result=t},AK=lT.prototype;qK.exports=function(e,t,r){var n=r&&r.that,i=!!(r&&r.AS_ENTRIES),o=!!(r&&r.IS_RECORD),f=!!(r&&r.IS_ITERATOR),v=!!(r&&r.INTERRUPTED),x=lje(t,n),E,S,P,q,F,K,ne,Z=function(Q){return E&&MK(E,"normal",Q),new lT(!0,Q)},W=function(Q){return i?(cje(Q),v?x(Q[0],Q[1],Z):x(Q[0],Q[1])):v?x(Q,Z):x(Q)};if(o)E=e.iterator;else if(f)E=e;else{if(S=mje(e),!S)throw new vje(hje(e)+" is not iterable");if(fje(S)){for(P=0,q=pje(e);q>P;P++)if(F=W(e[P]),F&&PK(AK,F))return F;return new lT(!1)}E=dje(e,S)}for(K=o?e.next:E.next;!(ne=uje(K,E)).done;){try{F=W(ne.value)}catch(Q){MK(E,"throw",Q)}if(typeof F=="object"&&F&&PK(AK,F))return F}return new lT(!1)}});var OK=I(()=>{"use strict";var gje=J(),yje=Wi(),_je=ei(),uT=ls(),xje=dp(),RK=An(),zO=Jn(),jO=aa(),bje=RO(),wje=nT(),Eje=pn(),Tje=_p(),Sje=St(),Ije=Sje("toStringTag"),cT=Error,Cje=[].push,Gm=function(t,r){var n=yje(BO,this),i;uT?i=uT(new cT,n?_je(this):BO):(i=n?this:RK(BO),zO(i,Ije,"Error")),r!==void 0&&zO(i,"message",Tje(r)),wje(i,Gm,i.stack,1),arguments.length>2&&bje(i,arguments[2]);var o=[];return Eje(t,Cje,{that:o}),zO(i,"errors",o),i};uT?uT(Gm,cT):xje(Gm,cT,{name:!0});var BO=Gm.prototype=RK(cT.prototype,{constructor:jO(1,Gm),message:jO(1,""),name:jO(1,"AggregateError")});gje({global:!0,constructor:!0,arity:2},{AggregateError:Gm})});var UO=I(()=>{"use strict";OK()});var NK=I(()=>{"use strict";var Pje=J(),Mje=Ct(),Aje=Hi(),LK=Ye(),qje=LO(),VO="AggregateError",DK=Mje(VO),kK=!LK(function(){return DK([1]).errors[0]!==1})&&LK(function(){return DK([1],VO,{cause:7}).cause!==7});Pje({global:!0,constructor:!0,arity:2,forced:kK},{AggregateError:qje(VO,function(e){return function(r,n){return Aje(e,this,arguments)}},kK,!0)})});var dn=I((r5t,FK)=>{"use strict";var Rje=St(),Oje=An(),Lje=kr().f,$O=Rje("unscopables"),GO=Array.prototype;GO[$O]===void 0&&Lje(GO,$O,{configurable:!0,value:Oje(null)});FK.exports=function(e){GO[$O][e]=!0}});var ZO=I(()=>{"use strict";var Dje=J(),kje=Gt(),Nje=nr(),Fje=Kr(),zje=dn();Dje({target:"Array",proto:!0},{at:function(t){var r=kje(this),n=Nje(r),i=Fje(t),o=i>=0?i:n+i;return o<0||o>=n?void 0:r[o]}});zje("at")});var yh=I((o5t,zK)=>{"use strict";var jje=TypeError,Bje=9007199254740991;zK.exports=function(e){if(e>Bje)throw jje("Maximum allowed index exceeded");return e}});var us=I((a5t,jK)=>{"use strict";var Uje=vt(),Vje=kr(),$je=aa();jK.exports=function(e,t,r){Uje?Vje.f(e,t,$je(0,r)):e[t]=r}});var Zm=I((s5t,BK)=>{"use strict";var Gje=Ye(),Zje=St(),Wje=$s(),Hje=Zje("species");BK.exports=function(e){return Wje>=51||!Gje(function(){var t=[],r=t.constructor={};return r[Hje]=function(){return{foo:1}},t[e](Boolean).foo!==1})}});var GK=I(()=>{"use strict";var Kje=J(),Yje=Ye(),Xje=Ws(),Qje=bt(),Jje=Gt(),eBe=nr(),UK=yh(),VK=us(),tBe=Bm(),rBe=Zm(),nBe=St(),iBe=$s(),$K=nBe("isConcatSpreadable"),oBe=iBe>=51||!Yje(function(){var e=[];return e[$K]=!1,e.concat()[0]!==e}),aBe=function(e){if(!Qje(e))return!1;var t=e[$K];return t!==void 0?!!t:Xje(e)},sBe=!oBe||!rBe("concat");Kje({target:"Array",proto:!0,arity:1,forced:sBe},{concat:function(t){var r=Jje(this),n=tBe(r,0),i=0,o,f,v,x,E;for(o=-1,v=arguments.length;o<v;o++)if(E=o===-1?r:arguments[o],aBe(E))for(x=eBe(E),UK(i+x),f=0;f<x;f++,i++)f in E&&VK(n,i,E[f]);else UK(i+1),VK(n,i++,E);return n.length=i,n}})});var m0=I((c5t,WK)=>{"use strict";var ZK=ch(),lBe=TypeError;WK.exports=function(e,t){if(!delete e[t])throw new lBe("Cannot delete property "+ZK(t)+" of "+ZK(e))}});var HO=I((h5t,HK)=>{"use strict";var uBe=Gt(),WO=Zs(),cBe=nr(),hBe=m0(),fBe=Math.min;HK.exports=[].copyWithin||function(t,r){var n=uBe(this),i=cBe(n),o=WO(t,i),f=WO(r,i),v=arguments.length>2?arguments[2]:void 0,x=fBe((v===void 0?i:WO(v,i))-f,i-o),E=1;for(f<o&&o<f+x&&(E=-1,f+=x-1,o+=x-1);x-->0;)f in n?n[o]=n[f]:hBe(n,o),o+=E,f+=E;return n}});var KK=I(()=>{"use strict";var pBe=J(),dBe=HO(),mBe=dn();pBe({target:"Array",proto:!0},{copyWithin:dBe});mBe("copyWithin")});var cs=I((d5t,YK)=>{"use strict";var vBe=Ye();YK.exports=function(e,t){var r=[][e];return!!r&&vBe(function(){r.call(null,t||function(){return 1},1)})}});var XK=I(()=>{"use strict";var gBe=J(),yBe=qn().every,_Be=cs(),xBe=_Be("every");gBe({target:"Array",proto:!0,forced:!xBe},{every:function(t){return yBe(this,t,arguments.length>1?arguments[1]:void 0)}})});var hT=I((g5t,JK)=>{"use strict";var bBe=Gt(),QK=Zs(),wBe=nr();JK.exports=function(t){for(var r=bBe(this),n=wBe(r),i=arguments.length,o=QK(i>1?arguments[1]:void 0,n),f=i>2?arguments[2]:void 0,v=f===void 0?n:QK(f,n);v>o;)r[o++]=t;return r}});var e7=I(()=>{"use strict";var EBe=J(),TBe=hT(),SBe=dn();EBe({target:"Array",proto:!0},{fill:TBe});SBe("fill")});var t7=I(()=>{"use strict";var IBe=J(),CBe=qn().filter,PBe=Zm(),MBe=PBe("filter");IBe({target:"Array",proto:!0,forced:!MBe},{filter:function(t){return CBe(this,t,arguments.length>1?arguments[1]:void 0)}})});var n7=I(()=>{"use strict";var ABe=J(),qBe=qn().find,RBe=dn(),KO="find",r7=!0;KO in[]&&Array(1)[KO](function(){r7=!1});ABe({target:"Array",proto:!0,forced:r7},{find:function(t){return qBe(this,t,arguments.length>1?arguments[1]:void 0)}});RBe(KO)});var o7=I(()=>{"use strict";var OBe=J(),LBe=qn().findIndex,DBe=dn(),YO="findIndex",i7=!0;YO in[]&&Array(1)[YO](function(){i7=!1});OBe({target:"Array",proto:!0,forced:i7},{findIndex:function(t){return LBe(this,t,arguments.length>1?arguments[1]:void 0)}});DBe(YO)});var v0=I((I5t,s7)=>{"use strict";var kBe=Mr(),NBe=Au(),FBe=Gt(),zBe=nr(),a7=function(e){var t=e===1;return function(r,n,i){for(var o=FBe(r),f=NBe(o),v=zBe(f),x=kBe(n,i),E,S;v-->0;)if(E=f[v],S=x(E,v,o),S)switch(e){case 0:return E;case 1:return v}return t?-1:void 0}};s7.exports={findLast:a7(0),findLastIndex:a7(1)}});var XO=I(()=>{"use strict";var jBe=J(),BBe=v0().findLast,UBe=dn();jBe({target:"Array",proto:!0},{findLast:function(t){return BBe(this,t,arguments.length>1?arguments[1]:void 0)}});UBe("findLast")});var QO=I(()=>{"use strict";var VBe=J(),$Be=v0().findLastIndex,GBe=dn();VBe({target:"Array",proto:!0},{findLastIndex:function(t){return $Be(this,t,arguments.length>1?arguments[1]:void 0)}});GBe("findLastIndex")});var JO=I((q5t,u7)=>{"use strict";var ZBe=Ws(),WBe=nr(),HBe=yh(),KBe=Mr(),l7=function(e,t,r,n,i,o,f,v){for(var x=i,E=0,S=f?KBe(f,v):!1,P,q;E<n;)E in r&&(P=S?S(r[E],E,t):r[E],o>0&&ZBe(P)?(q=WBe(P),x=l7(e,t,P,q,x,o-1)-1):(HBe(x+1),e[x]=P),x++),E++;return x};u7.exports=l7});var c7=I(()=>{"use strict";var YBe=J(),XBe=JO(),QBe=Gt(),JBe=nr(),e3e=Kr(),t3e=Bm();YBe({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,r=QBe(this),n=JBe(r),i=t3e(r,0);return i.length=XBe(i,r,r,n,0,t===void 0?1:e3e(t)),i}})});var h7=I(()=>{"use strict";var r3e=J(),n3e=JO(),i3e=Pt(),o3e=Gt(),a3e=nr(),s3e=Bm();r3e({target:"Array",proto:!0},{flatMap:function(t){var r=o3e(this),n=a3e(r),i;return i3e(t),i=s3e(r,0),i.length=n3e(i,r,r,n,0,1,t,arguments.length>1?arguments[1]:void 0),i}})});var eL=I((k5t,f7)=>{"use strict";var l3e=qn().forEach,u3e=cs(),c3e=u3e("forEach");f7.exports=c3e?[].forEach:function(t){return l3e(this,t,arguments.length>1?arguments[1]:void 0)}});var d7=I(()=>{"use strict";var h3e=J(),p7=eL();h3e({target:"Array",proto:!0,forced:[].forEach!==p7},{forEach:p7})});var fT=I((z5t,m7)=>{"use strict";var f3e=at(),p3e=Ai();m7.exports=function(e,t,r,n){try{return n?t(f3e(r)[0],r[1]):t(r)}catch(i){p3e(e,"throw",i)}}});var tL=I((j5t,y7)=>{"use strict";var d3e=Mr(),m3e=it(),v3e=Gt(),g3e=fT(),y3e=sT(),_3e=Hs(),x3e=nr(),v7=us(),b3e=gh(),w3e=Pl(),g7=Array;y7.exports=function(t){var r=v3e(t),n=_3e(this),i=arguments.length,o=i>1?arguments[1]:void 0,f=o!==void 0;f&&(o=d3e(o,i>2?arguments[2]:void 0));var v=w3e(r),x=0,E,S,P,q,F,K;if(v&&!(this===g7&&y3e(v)))for(S=n?new this:[],q=b3e(r,v),F=q.next;!(P=m3e(F,q)).done;x++)K=f?g3e(q,o,[P.value,x],!0):P.value,v7(S,x,K);else for(E=x3e(r),S=n?new this(E):g7(E);E>x;x++)K=f?o(r[x],x):r[x],v7(S,x,K);return S.length=x,S}});var g0=I((B5t,w7)=>{"use strict";var E3e=St(),x7=E3e("iterator"),b7=!1;try{_7=0,rL={next:function(){return{done:!!_7++}},return:function(){b7=!0}},rL[x7]=function(){return this},Array.from(rL,function(){throw 2})}catch(e){}var _7,rL;w7.exports=function(e,t){try{if(!t&&!b7)return!1}catch(i){return!1}var r=!1;try{var n={};n[x7]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(i){}return r}});var E7=I(()=>{"use strict";var T3e=J(),S3e=tL(),I3e=g0(),C3e=!I3e(function(e){Array.from(e)});T3e({target:"Array",stat:!0,forced:C3e},{from:S3e})});var T7=I(()=>{"use strict";var P3e=J(),M3e=zm().includes,A3e=Ye(),q3e=dn(),R3e=A3e(function(){return!Array(1).includes()});P3e({target:"Array",proto:!0,forced:R3e},{includes:function(t){return M3e(this,t,arguments.length>1?arguments[1]:void 0)}});q3e("includes")});var I7=I(()=>{"use strict";var O3e=J(),L3e=ph(),D3e=zm().indexOf,k3e=cs(),nL=L3e([].indexOf),S7=!!nL&&1/nL([1],1,-0)<0,N3e=S7||!k3e("indexOf");O3e({target:"Array",proto:!0,forced:N3e},{indexOf:function(t){var r=arguments.length>1?arguments[1]:void 0;return S7?nL(this,t,r)||0:D3e(this,t,r)}})});var C7=I(()=>{"use strict";var F3e=J(),z3e=Ws();F3e({target:"Array",stat:!0},{isArray:z3e})});var _h=I((Y5t,A7)=>{"use strict";var j3e=Ye(),B3e=Ft(),U3e=bt(),V3e=An(),P7=ei(),$3e=br(),G3e=St(),Z3e=hr(),aL=G3e("iterator"),M7=!1,Du,iL,oL;[].keys&&(oL=[].keys(),"next"in oL?(iL=P7(P7(oL)),iL!==Object.prototype&&(Du=iL)):M7=!0);var W3e=!U3e(Du)||j3e(function(){var e={};return Du[aL].call(e)!==e});W3e?Du={}:Z3e&&(Du=V3e(Du));B3e(Du[aL])||$3e(Du,aL,function(){return this});A7.exports={IteratorPrototype:Du,BUGGY_SAFARI_ITERATORS:M7}});var xh=I((X5t,q7)=>{"use strict";var H3e=_h().IteratorPrototype,K3e=An(),Y3e=aa(),X3e=Fo(),Q3e=bp(),J3e=function(){return this};q7.exports=function(e,t,r,n){var i=t+" Iterator";return e.prototype=K3e(H3e,{next:Y3e(+!n,r)}),X3e(e,i,!1,!0),Q3e[i]=J3e,e}});var mT=I((Q5t,B7)=>{"use strict";var e4e=J(),t4e=it(),pT=hr(),z7=fp(),r4e=Ft(),n4e=xh(),R7=ei(),O7=ls(),i4e=Fo(),o4e=Jn(),sL=br(),a4e=St(),L7=bp(),j7=_h(),s4e=z7.PROPER,l4e=z7.CONFIGURABLE,D7=j7.IteratorPrototype,dT=j7.BUGGY_SAFARI_ITERATORS,y0=a4e("iterator"),k7="keys",_0="values",N7="entries",F7=function(){return this};B7.exports=function(e,t,r,n,i,o,f){n4e(r,t,n);var v=function(W){if(W===i&&q)return q;if(!dT&&W&&W in S)return S[W];switch(W){case k7:return function(){return new r(this,W)};case _0:return function(){return new r(this,W)};case N7:return function(){return new r(this,W)}}return function(){return new r(this)}},x=t+" Iterator",E=!1,S=e.prototype,P=S[y0]||S["@@iterator"]||i&&S[i],q=!dT&&P||v(i),F=t==="Array"&&S.entries||P,K,ne,Z;if(F&&(K=R7(F.call(new e)),K!==Object.prototype&&K.next&&(!pT&&R7(K)!==D7&&(O7?O7(K,D7):r4e(K[y0])||sL(K,y0,F7)),i4e(K,x,!0,!0),pT&&(L7[x]=F7))),s4e&&i===_0&&P&&P.name!==_0&&(!pT&&l4e?o4e(S,"name",_0):(E=!0,q=function(){return t4e(P,this)})),i)if(ne={values:v(_0),keys:o?q:v(k7),entries:v(N7)},f)for(Z in ne)(dT||E||!(Z in S))&&sL(S,Z,ne[Z]);else e4e({target:t,proto:!0,forced:dT||E},ne);return(!pT||f)&&S[y0]!==q&&sL(S,y0,q,{name:i}),L7[t]=q,ne}});var mi=I((J5t,U7)=>{"use strict";U7.exports=function(e,t){return{value:e,done:t}}});var x0=I((e6t,W7)=>{"use strict";var u4e=Qn(),lL=dn(),V7=bp(),G7=vr(),c4e=kr().f,h4e=mT(),vT=mi(),f4e=hr(),p4e=vt(),Z7="Array Iterator",d4e=G7.set,m4e=G7.getterFor(Z7);W7.exports=h4e(Array,"Array",function(e,t){d4e(this,{type:Z7,target:u4e(e),index:0,kind:t})},function(){var e=m4e(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,vT(void 0,!0);switch(e.kind){case"keys":return vT(r,!1);case"values":return vT(t[r],!1)}return vT([r,t[r]],!1)},"values");var $7=V7.Arguments=V7.Array;lL("keys");lL("values");lL("entries");if(!f4e&&p4e&&$7.name!=="values")try{c4e($7,"name",{value:"values"})}catch(e){}});var H7=I(()=>{"use strict";var v4e=J(),g4e=Ze(),y4e=Au(),_4e=Qn(),x4e=cs(),b4e=g4e([].join),w4e=y4e!==Object,E4e=w4e||!x4e("join",",");v4e({target:"Array",proto:!0,forced:E4e},{join:function(t){return b4e(_4e(this),t===void 0?",":t)}})});var cL=I((n6t,Y7)=>{"use strict";var T4e=Hi(),S4e=Qn(),I4e=Kr(),C4e=nr(),P4e=cs(),M4e=Math.min,uL=[].lastIndexOf,K7=!!uL&&1/[1].lastIndexOf(1,-0)<0,A4e=P4e("lastIndexOf"),q4e=K7||!A4e;Y7.exports=q4e?function(t){if(K7)return T4e(uL,this,arguments)||0;var r=S4e(this),n=C4e(r);if(n===0)return-1;var i=n-1;for(arguments.length>1&&(i=M4e(i,I4e(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in r&&r[i]===t)return i||0;return-1}:uL});var Q7=I(()=>{"use strict";var R4e=J(),X7=cL();R4e({target:"Array",proto:!0,forced:X7!==[].lastIndexOf},{lastIndexOf:X7})});var J7=I(()=>{"use strict";var O4e=J(),L4e=qn().map,D4e=Zm(),k4e=D4e("map");O4e({target:"Array",proto:!0,forced:!k4e},{map:function(t){return L4e(this,t,arguments.length>1?arguments[1]:void 0)}})});var tY=I(()=>{"use strict";var N4e=J(),F4e=Ye(),z4e=Hs(),j4e=us(),eY=Array,B4e=F4e(function(){function e(){}return!(eY.of.call(e)instanceof e)});N4e({target:"Array",stat:!0,forced:B4e},{of:function(){for(var t=0,r=arguments.length,n=new(z4e(this)?this:eY)(r);r>t;)j4e(n,t,arguments[t++]);return n.length=r,n}})});var gT=I((c6t,rY)=>{"use strict";var U4e=vt(),V4e=Ws(),$4e=TypeError,G4e=Object.getOwnPropertyDescriptor,Z4e=U4e&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();rY.exports=Z4e?function(e,t){if(V4e(e)&&!G4e(e,"length").writable)throw new $4e("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}});var nY=I(()=>{"use strict";var W4e=J(),H4e=Gt(),K4e=nr(),Y4e=gT(),X4e=yh(),Q4e=Ye(),J4e=Q4e(function(){return[].push.call({length:4294967296},1)!==4294967297}),eUe=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},tUe=J4e||!eUe();W4e({target:"Array",proto:!0,arity:1,forced:tUe},{push:function(t){var r=H4e(this),n=K4e(r),i=arguments.length;X4e(n+i);for(var o=0;o<i;o++)r[n]=arguments[o],n++;return Y4e(r,n),n}})});var b0=I((p6t,sY)=>{"use strict";var rUe=Pt(),nUe=Gt(),iUe=Au(),oUe=nr(),iY=TypeError,oY="Reduce of empty array with no initial value",aY=function(e){return function(t,r,n,i){var o=nUe(t),f=iUe(o),v=oUe(o);if(rUe(r),v===0&&n<2)throw new iY(oY);var x=e?v-1:0,E=e?-1:1;if(n<2)for(;;){if(x in f){i=f[x],x+=E;break}if(x+=E,e?x<0:v<=x)throw new iY(oY)}for(;e?x>=0:v>x;x+=E)x in f&&(i=r(i,f[x],x,o));return i}};sY.exports={left:aY(!1),right:aY(!0)}});var E0=I((d6t,lY)=>{"use strict";var w0=nt(),aUe=Us(),sUe=Zi(),yT=function(e){return aUe.slice(0,e.length)===e};lY.exports=function(){return yT("Bun/")?"BUN":yT("Cloudflare-Workers")?"CLOUDFLARE":yT("Deno/")?"DENO":yT("Node.js/")?"NODE":w0.Bun&&typeof Bun.version=="string"?"BUN":w0.Deno&&typeof Deno.version=="object"?"DENO":sUe(w0.process)==="process"?"NODE":w0.window&&w0.document?"BROWSER":"REST"}()});var wp=I((m6t,uY)=>{"use strict";var lUe=E0();uY.exports=lUe==="NODE"});var hY=I(()=>{"use strict";var uUe=J(),cUe=b0().left,hUe=cs(),cY=$s(),fUe=wp(),pUe=!fUe&&cY>79&&cY<83,dUe=pUe||!hUe("reduce");uUe({target:"Array",proto:!0,forced:dUe},{reduce:function(t){var r=arguments.length;return cUe(this,t,r,r>1?arguments[1]:void 0)}})});var pY=I(()=>{"use strict";var mUe=J(),vUe=b0().right,gUe=cs(),fY=$s(),yUe=wp(),_Ue=!yUe&&fY>79&&fY<83,xUe=_Ue||!gUe("reduceRight");mUe({target:"Array",proto:!0,forced:xUe},{reduceRight:function(t){return vUe(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var mY=I(()=>{"use strict";var bUe=J(),wUe=Ze(),EUe=Ws(),TUe=wUe([].reverse),dY=[1,2];bUe({target:"Array",proto:!0,forced:String(dY)===String(dY.reverse())},{reverse:function(){return EUe(this)&&(this.length=this.length),TUe(this)}})});var yY=I(()=>{"use strict";var SUe=J(),vY=Ws(),IUe=Hs(),CUe=bt(),gY=Zs(),PUe=nr(),MUe=Qn(),AUe=us(),qUe=St(),RUe=Zm(),OUe=ua(),LUe=RUe("slice"),DUe=qUe("species"),hL=Array,kUe=Math.max;SUe({target:"Array",proto:!0,forced:!LUe},{slice:function(t,r){var n=MUe(this),i=PUe(n),o=gY(t,i),f=gY(r===void 0?i:r,i),v,x,E;if(vY(n)&&(v=n.constructor,IUe(v)&&(v===hL||vY(v.prototype))?v=void 0:CUe(v)&&(v=v[DUe],v===null&&(v=void 0)),v===hL||v===void 0))return OUe(n,o,f);for(x=new(v===void 0?hL:v)(kUe(f-o,0)),E=0;o<f;o++,E++)o in n&&AUe(x,E,n[o]);return x.length=E,x}})});var _Y=I(()=>{"use strict";var NUe=J(),FUe=qn().some,zUe=cs(),jUe=zUe("some");NUe({target:"Array",proto:!0,forced:!jUe},{some:function(t){return FUe(this,t,arguments.length>1?arguments[1]:void 0)}})});var _T=I((I6t,bY)=>{"use strict";var xY=ua(),BUe=Math.floor,fL=function(e,t){var r=e.length;if(r<8)for(var n=1,i,o;n<r;){for(o=n,i=e[n];o&&t(e[o-1],i)>0;)e[o]=e[--o];o!==n++&&(e[o]=i)}else for(var f=BUe(r/2),v=fL(xY(e,0,f),t),x=fL(xY(e,f),t),E=v.length,S=x.length,P=0,q=0;P<E||q<S;)e[P+q]=P<E&&q<S?t(v[P],x[q])<=0?v[P++]:x[q++]:P<E?v[P++]:x[q++];return e};bY.exports=fL});var pL=I((C6t,EY)=>{"use strict";var UUe=Us(),wY=UUe.match(/firefox\/(\d+)/i);EY.exports=!!wY&&+wY[1]});var dL=I((P6t,TY)=>{"use strict";var VUe=Us();TY.exports=/MSIE|Trident/.test(VUe)});var xT=I((M6t,IY)=>{"use strict";var $Ue=Us(),SY=$Ue.match(/AppleWebKit\/(\d+)\./);IY.exports=!!SY&&+SY[1]});var DY=I(()=>{"use strict";var GUe=J(),OY=Ze(),ZUe=Pt(),WUe=Gt(),CY=nr(),HUe=m0(),PY=At(),mL=Ye(),KUe=_T(),YUe=cs(),MY=pL(),XUe=dL(),AY=$s(),qY=xT(),bh=[],RY=OY(bh.sort),QUe=OY(bh.push),JUe=mL(function(){bh.sort(void 0)}),e5e=mL(function(){bh.sort(null)}),t5e=YUe("sort"),LY=!mL(function(){if(AY)return AY<70;if(!(MY&&MY>3)){if(XUe)return!0;if(qY)return qY<603;var e="",t,r,n,i;for(t=65;t<76;t++){switch(r=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)bh.push({k:r+i,v:n})}for(bh.sort(function(o,f){return f.v-o.v}),i=0;i<bh.length;i++)r=bh[i].k.charAt(0),e.charAt(e.length-1)!==r&&(e+=r);return e!=="DGBEFHACIJK"}}),r5e=JUe||!e5e||!t5e||!LY,n5e=function(e){return function(t,r){return r===void 0?-1:t===void 0?1:e!==void 0?+e(t,r)||0:PY(t)>PY(r)?1:-1}};GUe({target:"Array",proto:!0,forced:r5e},{sort:function(t){t!==void 0&&ZUe(t);var r=WUe(this);if(LY)return t===void 0?RY(r):RY(r,t);var n=[],i=CY(r),o,f;for(f=0;f<i;f++)f in r&&QUe(n,r[f]);for(KUe(n,n5e(t)),o=CY(n),f=0;f<o;)r[f]=n[f++];for(;f<i;)HUe(r,f++);return r}})});var wh=I((R6t,NY)=>{"use strict";var i5e=Ct(),o5e=Yr(),a5e=St(),s5e=vt(),kY=a5e("species");NY.exports=function(e){var t=i5e(e);s5e&&t&&!t[kY]&&o5e(t,kY,{configurable:!0,get:function(){return this}})}});var FY=I(()=>{"use strict";var l5e=wh();l5e("Array")});var zY=I(()=>{"use strict";var u5e=J(),c5e=Gt(),h5e=Zs(),f5e=Kr(),p5e=nr(),d5e=gT(),m5e=yh(),v5e=Bm(),g5e=us(),vL=m0(),y5e=Zm(),_5e=y5e("splice"),x5e=Math.max,b5e=Math.min;u5e({target:"Array",proto:!0,forced:!_5e},{splice:function(t,r){var n=c5e(this),i=p5e(n),o=h5e(t,i),f=arguments.length,v,x,E,S,P,q;for(f===0?v=x=0:f===1?(v=0,x=i-o):(v=f-2,x=b5e(x5e(f5e(r),0),i-o)),m5e(i+v-x),E=v5e(n,x),S=0;S<x;S++)P=o+S,P in n&&g5e(E,S,n[P]);if(E.length=x,v<x){for(S=o;S<i-x;S++)P=S+x,q=S+v,P in n?n[q]=n[P]:vL(n,q);for(S=i;S>i-x+v;S--)vL(n,S-1)}else if(v>x)for(S=i-x;S>o;S--)P=S+x-1,q=S+v-1,P in n?n[q]=n[P]:vL(n,q);for(S=0;S<v;S++)n[S+o]=arguments[S+2];return d5e(n,i-x+v),E}})});var gL=I((N6t,jY)=>{"use strict";var w5e=nr();jY.exports=function(e,t){for(var r=w5e(e),n=new t(r),i=0;i<r;i++)n[i]=e[r-i-1];return n}});var yL=I(()=>{"use strict";var E5e=J(),T5e=gL(),S5e=Qn(),I5e=dn(),C5e=Array;E5e({target:"Array",proto:!0},{toReversed:function(){return T5e(S5e(this),C5e)}});I5e("toReversed")});var ku=I((j6t,BY)=>{"use strict";var P5e=nr();BY.exports=function(e,t,r){for(var n=0,i=arguments.length>2?r:P5e(t),o=new e(i);i>n;)o[n]=t[n++];return o}});var _L=I((B6t,UY)=>{"use strict";var M5e=nt();UY.exports=function(e,t){var r=M5e[e],n=r&&r.prototype;return n&&n[t]}});var xL=I(()=>{"use strict";var A5e=J(),q5e=Ze(),R5e=Pt(),O5e=Qn(),L5e=ku(),D5e=_L(),k5e=dn(),N5e=Array,F5e=q5e(D5e("Array","sort"));A5e({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&R5e(t);var r=O5e(this),n=L5e(N5e,r);return F5e(n,t)}});k5e("toSorted")});var bL=I(()=>{"use strict";var z5e=J(),j5e=dn(),B5e=yh(),U5e=nr(),V5e=Zs(),$5e=Qn(),G5e=Kr(),Z5e=Array,W5e=Math.max,H5e=Math.min;z5e({target:"Array",proto:!0},{toSpliced:function(t,r){var n=$5e(this),i=U5e(n),o=V5e(t,i),f=arguments.length,v=0,x,E,S,P;for(f===0?x=E=0:f===1?(x=0,E=i-o):(x=f-2,E=H5e(W5e(G5e(r),0),i-o)),S=B5e(i+x-E),P=Z5e(S);v<o;v++)P[v]=n[v];for(;v<o+x;v++)P[v]=arguments[v-o+2];for(;v<S;v++)P[v]=n[v+E-x];return P}});j5e("toSpliced")});var VY=I(()=>{"use strict";var K5e=dn();K5e("flat")});var $Y=I(()=>{"use strict";var Y5e=dn();Y5e("flatMap")});var GY=I(()=>{"use strict";var X5e=J(),Q5e=Gt(),J5e=nr(),e6e=gT(),t6e=m0(),r6e=yh(),n6e=[].unshift(0)!==1,i6e=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},o6e=n6e||!i6e();X5e({target:"Array",proto:!0,arity:1,forced:o6e},{unshift:function(t){var r=Q5e(this),n=J5e(r),i=arguments.length;if(i){r6e(n+i);for(var o=n;o--;){var f=o+i;o in r?r[f]=r[o]:t6e(r,f)}for(var v=0;v<i;v++)r[v]=arguments[v]}return e6e(r,n+i)}})});var wL=I((Q6t,ZY)=>{"use strict";var a6e=nr(),s6e=Kr(),l6e=RangeError;ZY.exports=function(e,t,r,n){var i=a6e(e),o=s6e(r),f=o<0?i+o:o;if(f>=i||f<0)throw new l6e("Incorrect index");for(var v=new t(i),x=0;x<i;x++)v[x]=x===f?n:e[x];return v}});var EL=I(()=>{"use strict";var u6e=J(),c6e=wL(),h6e=Qn(),f6e=Array;u6e({target:"Array",proto:!0},{with:function(e,t){return c6e(h6e(this),f6e,e,t)}})});var T0=I((tVt,WY)=>{"use strict";WY.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var hs=I((rVt,HY)=>{"use strict";var p6e=br();HY.exports=function(e,t,r){for(var n in t)p6e(e,n,t[n],r);return e}});var go=I((nVt,KY)=>{"use strict";var d6e=Wi(),m6e=TypeError;KY.exports=function(e,t){if(d6e(t,e))return e;throw new m6e("Incorrect invocation")}});var Wm=I((iVt,YY)=>{"use strict";var v6e=Kr(),g6e=la(),y6e=RangeError;YY.exports=function(e){if(e===void 0)return 0;var t=v6e(e),r=g6e(t);if(t!==r)throw new y6e("Wrong length or index");return r}});var bT=I((oVt,XY)=>{"use strict";XY.exports=Math.sign||function(t){var r=+t;return r===0||r!==r?r:r<0?-1:1}});var TL=I((aVt,JY)=>{"use strict";var _6e=2220446049250313e-31,QY=1/_6e;JY.exports=function(e){return e+QY-QY}});var SL=I((sVt,eX)=>{"use strict";var x6e=bT(),b6e=TL(),w6e=Math.abs,E6e=2220446049250313e-31;eX.exports=function(e,t,r,n){var i=+e,o=w6e(i),f=x6e(i);if(o<n)return f*b6e(o/n/t)*n*t;var v=(1+t/E6e)*o,x=v-(v-o);return x>r||x!==x?f*(1/0):f*x}});var wT=I((lVt,tX)=>{"use strict";var T6e=SL(),S6e=1.1920928955078125e-7,I6e=34028234663852886e22,C6e=11754943508222875e-54;tX.exports=Math.fround||function(t){return T6e(t,S6e,I6e,C6e)}});var nX=I((uVt,rX)=>{"use strict";var P6e=Array,M6e=Math.abs,Nu=Math.pow,A6e=Math.floor,q6e=Math.log,R6e=Math.LN2,O6e=function(e,t,r){var n=P6e(r),i=r*8-t-1,o=(1<<i)-1,f=o>>1,v=t===23?Nu(2,-24)-Nu(2,-77):0,x=e<0||e===0&&1/e<0?1:0,E=0,S,P,q;for(e=M6e(e),e!==e||e===1/0?(P=e!==e?1:0,S=o):(S=A6e(q6e(e)/R6e),q=Nu(2,-S),e*q<1&&(S--,q*=2),S+f>=1?e+=v/q:e+=v*Nu(2,1-f),e*q>=2&&(S++,q/=2),S+f>=o?(P=0,S=o):S+f>=1?(P=(e*q-1)*Nu(2,t),S+=f):(P=e*Nu(2,f-1)*Nu(2,t),S=0));t>=8;)n[E++]=P&255,P/=256,t-=8;for(S=S<<t|P,i+=t;i>0;)n[E++]=S&255,S/=256,i-=8;return n[E-1]|=x*128,n},L6e=function(e,t){var r=e.length,n=r*8-t-1,i=(1<<n)-1,o=i>>1,f=n-7,v=r-1,x=e[v--],E=x&127,S;for(x>>=7;f>0;)E=E*256+e[v--],f-=8;for(S=E&(1<<-f)-1,E>>=-f,f+=t;f>0;)S=S*256+e[v--],f-=8;if(E===0)E=1-o;else{if(E===i)return S?NaN:x?-1/0:1/0;S+=Nu(2,t),E-=o}return(x?-1:1)*S*Nu(2,E-t)};rX.exports={pack:O6e,unpack:L6e}});var C0=I((cVt,xX)=>{"use strict";var CT=nt(),AL=Ze(),IL=vt(),D6e=T0(),mX=fp(),k6e=Jn(),N6e=Yr(),iX=hs(),CL=Ye(),ET=go(),F6e=Kr(),z6e=la(),ST=Wm(),j6e=wT(),vX=nX(),B6e=ei(),oX=ls(),U6e=hT(),V6e=ua(),$6e=vh(),G6e=dp(),gX=Fo(),qL=vr(),Z6e=mX.PROPER,aX=mX.CONFIGURABLE,Km="ArrayBuffer",PT="DataView",Ym="prototype",W6e="Wrong length",yX="Wrong index",sX=qL.getterFor(Km),I0=qL.getterFor(PT),lX=qL.set,Ks=CT[Km],Na=Ks,Hm=Na&&Na[Ym],Ml=CT[PT],Ep=Ml&&Ml[Ym],uX=Object.prototype,H6e=CT.Array,IT=CT.RangeError,K6e=AL(U6e),Y6e=AL([].reverse),_X=vX.pack,cX=vX.unpack,hX=function(e){return[e&255]},fX=function(e){return[e&255,e>>8&255]},pX=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},dX=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},X6e=function(e){return _X(j6e(e),23,4)},Q6e=function(e){return _X(e,52,8)},TT=function(e,t,r){N6e(e[Ym],t,{configurable:!0,get:function(){return r(this)[t]}})},Eh=function(e,t,r,n){var i=I0(e),o=ST(r),f=!!n;if(o+t>i.byteLength)throw new IT(yX);var v=i.bytes,x=o+i.byteOffset,E=V6e(v,x,x+t);return f?E:Y6e(E)},Th=function(e,t,r,n,i,o){var f=I0(e),v=ST(r),x=n(+i),E=!!o;if(v+t>f.byteLength)throw new IT(yX);for(var S=f.bytes,P=v+f.byteOffset,q=0;q<t;q++)S[P+q]=x[E?q:t-q-1]};D6e?(PL=Z6e&&Ks.name!==Km,!CL(function(){Ks(1)})||!CL(function(){new Ks(-1)})||CL(function(){return new Ks,new Ks(1.5),new Ks(NaN),Ks.length!==1||PL&&!aX})?(Na=function(t){return ET(this,Hm),$6e(new Ks(ST(t)),this,Na)},Na[Ym]=Hm,Hm.constructor=Na,G6e(Na,Ks)):PL&&aX&&k6e(Ks,"name",Km),oX&&B6e(Ep)!==uX&&oX(Ep,uX),S0=new Ml(new Na(2)),ML=AL(Ep.setInt8),S0.setInt8(0,2147483648),S0.setInt8(1,2147483649),(S0.getInt8(0)||!S0.getInt8(1))&&iX(Ep,{setInt8:function(t,r){ML(this,t,r<<24>>24)},setUint8:function(t,r){ML(this,t,r<<24>>24)}},{unsafe:!0})):(Na=function(t){ET(this,Hm);var r=ST(t);lX(this,{type:Km,bytes:K6e(H6e(r),0),byteLength:r}),IL||(this.byteLength=r,this.detached=!1)},Hm=Na[Ym],Ml=function(t,r,n){ET(this,Ep),ET(t,Hm);var i=sX(t),o=i.byteLength,f=F6e(r);if(f<0||f>o)throw new IT("Wrong offset");if(n=n===void 0?o-f:z6e(n),f+n>o)throw new IT(W6e);lX(this,{type:PT,buffer:t,byteLength:n,byteOffset:f,bytes:i.bytes}),IL||(this.buffer=t,this.byteLength=n,this.byteOffset=f)},Ep=Ml[Ym],IL&&(TT(Na,"byteLength",sX),TT(Ml,"buffer",I0),TT(Ml,"byteLength",I0),TT(Ml,"byteOffset",I0)),iX(Ep,{getInt8:function(t){return Eh(this,1,t)[0]<<24>>24},getUint8:function(t){return Eh(this,1,t)[0]},getInt16:function(t){var r=Eh(this,2,t,arguments.length>1?arguments[1]:!1);return(r[1]<<8|r[0])<<16>>16},getUint16:function(t){var r=Eh(this,2,t,arguments.length>1?arguments[1]:!1);return r[1]<<8|r[0]},getInt32:function(t){return dX(Eh(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return dX(Eh(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return cX(Eh(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return cX(Eh(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,r){Th(this,1,t,hX,r)},setUint8:function(t,r){Th(this,1,t,hX,r)},setInt16:function(t,r){Th(this,2,t,fX,r,arguments.length>2?arguments[2]:!1)},setUint16:function(t,r){Th(this,2,t,fX,r,arguments.length>2?arguments[2]:!1)},setInt32:function(t,r){Th(this,4,t,pX,r,arguments.length>2?arguments[2]:!1)},setUint32:function(t,r){Th(this,4,t,pX,r,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,r){Th(this,4,t,X6e,r,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,r){Th(this,8,t,Q6e,r,arguments.length>2?arguments[2]:!1)}}));var PL,S0,ML;gX(Na,Km);gX(Ml,PT);xX.exports={ArrayBuffer:Na,DataView:Ml}});var wX=I(()=>{"use strict";var J6e=J(),eVe=nt(),tVe=C0(),rVe=wh(),RL="ArrayBuffer",bX=tVe[RL],nVe=eVe[RL];J6e({global:!0,constructor:!0,forced:nVe!==bX},{ArrayBuffer:bX});rVe(RL)});var Ut=I((pVt,RX)=>{"use strict";var iVe=T0(),kL=vt(),zo=nt(),IX=Ft(),qT=bt(),Ih=jt(),NL=No(),oVe=ch(),aVe=Jn(),OL=br(),sVe=Yr(),lVe=Wi(),RT=ei(),Qm=ls(),uVe=St(),cVe=hh(),CX=vr(),PX=CX.enforce,hVe=CX.get,MT=zo.Int8Array,LL=MT&&MT.prototype,EX=zo.Uint8ClampedArray,TX=EX&&EX.prototype,Al=MT&&RT(MT),Ys=LL&&RT(LL),fVe=Object.prototype,FL=zo.TypeError,SX=uVe("toStringTag"),DL=cVe("TYPED_ARRAY_TAG"),AT="TypedArrayConstructor",Fu=iVe&&!!Qm&&NL(zo.opera)!=="Opera",MX=!1,ha,Sh,Xm,zu={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},zL={BigInt64Array:8,BigUint64Array:8},pVe=function(t){if(!qT(t))return!1;var r=NL(t);return r==="DataView"||Ih(zu,r)||Ih(zL,r)},AX=function(e){var t=RT(e);if(qT(t)){var r=hVe(t);return r&&Ih(r,AT)?r[AT]:AX(t)}},qX=function(e){if(!qT(e))return!1;var t=NL(e);return Ih(zu,t)||Ih(zL,t)},dVe=function(e){if(qX(e))return e;throw new FL("Target is not a typed array")},mVe=function(e){if(IX(e)&&(!Qm||lVe(Al,e)))return e;throw new FL(oVe(e)+" is not a typed array constructor")},vVe=function(e,t,r,n){if(kL){if(r)for(var i in zu){var o=zo[i];if(o&&Ih(o.prototype,e))try{delete o.prototype[e]}catch(f){try{o.prototype[e]=t}catch(v){}}}(!Ys[e]||r)&&OL(Ys,e,r?t:Fu&&LL[e]||t,n)}},gVe=function(e,t,r){var n,i;if(kL){if(Qm){if(r){for(n in zu)if(i=zo[n],i&&Ih(i,e))try{delete i[e]}catch(o){}}if(!Al[e]||r)try{return OL(Al,e,r?t:Fu&&Al[e]||t)}catch(o){}else return}for(n in zu)i=zo[n],i&&(!i[e]||r)&&OL(i,e,t)}};for(ha in zu)Sh=zo[ha],Xm=Sh&&Sh.prototype,Xm?PX(Xm)[AT]=Sh:Fu=!1;for(ha in zL)Sh=zo[ha],Xm=Sh&&Sh.prototype,Xm&&(PX(Xm)[AT]=Sh);if((!Fu||!IX(Al)||Al===Function.prototype)&&(Al=function(){throw new FL("Incorrect invocation")},Fu))for(ha in zu)zo[ha]&&Qm(zo[ha],Al);if((!Fu||!Ys||Ys===fVe)&&(Ys=Al.prototype,Fu))for(ha in zu)zo[ha]&&Qm(zo[ha].prototype,Ys);Fu&&RT(TX)!==Ys&&Qm(TX,Ys);if(kL&&!Ih(Ys,SX)){MX=!0,sVe(Ys,SX,{configurable:!0,get:function(){return qT(this)?this[DL]:void 0}});for(ha in zu)zo[ha]&&aVe(zo[ha],DL,ha)}RX.exports={NATIVE_ARRAY_BUFFER_VIEWS:Fu,TYPED_ARRAY_TAG:MX&&DL,aTypedArray:dVe,aTypedArrayConstructor:mVe,exportTypedArrayMethod:vVe,exportTypedArrayStaticMethod:gVe,getTypedArrayConstructor:AX,isView:pVe,isTypedArray:qX,TypedArray:Al,TypedArrayPrototype:Ys}});var LX=I(()=>{"use strict";var yVe=J(),OX=Ut(),_Ve=OX.NATIVE_ARRAY_BUFFER_VIEWS;yVe({target:"ArrayBuffer",stat:!0,forced:!_Ve},{isView:OX.isView})});var jX=I(()=>{"use strict";var xVe=J(),BL=ph(),bVe=Ye(),FX=C0(),DX=at(),kX=Zs(),wVe=la(),UL=FX.ArrayBuffer,jL=FX.DataView,zX=jL.prototype,NX=BL(UL.prototype.slice),EVe=BL(zX.getUint8),TVe=BL(zX.setUint8),SVe=bVe(function(){return!new UL(2).slice(1,void 0).byteLength});xVe({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:SVe},{slice:function(t,r){if(NX&&r===void 0)return NX(DX(this),t);for(var n=DX(this).byteLength,i=kX(t,n),o=kX(r===void 0?n:r,n),f=new UL(wVe(o-i)),v=new jL(this),x=new jL(f),E=0;i<o;)TVe(x,E++,EVe(v,i++));return f}})});var BX=I(()=>{"use strict";var IVe=J(),CVe=C0(),PVe=T0();IVe({global:!0,constructor:!0,forced:!PVe},{DataView:CVe.DataView})});var UX=I(()=>{"use strict";BX()});var VL=I(()=>{"use strict";var MVe=J(),AVe=Ze(),ZX=Math.pow,VX=31,qVe=1023,$X=ZX(2,-24),GX=.0009765625,RVe=function(e){var t=e>>>15,r=e>>>10&VX,n=e&qVe;return r===VX?n===0?t===0?1/0:-1/0:NaN:r===0?n*(t===0?$X:-$X):ZX(2,r-15)*(t===0?1+n*GX:-1-n*GX)},OVe=AVe(DataView.prototype.getUint16);MVe({target:"DataView",proto:!0},{getFloat16:function(t){var r=OVe(this,t,arguments.length>1?arguments[1]:!1);return RVe(r)}})});var $L=I((TVt,WX)=>{"use strict";var LVe=No(),DVe=TypeError;WX.exports=function(e){if(LVe(e)==="DataView")return e;throw new DVe("Argument is not a DataView")}});var GL=I((SVt,HX)=>{"use strict";var kVe=Math.log,NVe=Math.LN2;HX.exports=Math.log2||function(t){return kVe(t)/NVe}});var WL=I(()=>{"use strict";var FVe=J(),zVe=Ze(),jVe=$L(),BVe=Wm(),UVe=GL(),KX=TL(),VVe=Math.pow,$Ve=65520,GVe=61005353927612305e-21,ZVe=16777216,ZL=1024,WVe=function(e){if(e!==e)return 32256;if(e===0)return(1/e===-1/0)<<15;var t=e<0;if(t&&(e=-e),e>=$Ve)return t<<15|31744;if(e<GVe)return t<<15|KX(e*ZVe);var r=UVe(e)|0;if(r===-15)return t<<15|ZL;var n=KX((e*VVe(2,-r)-1)*ZL);return n===ZL?t<<15|r+16<<10:t<<15|r+15<<10|n},HVe=zVe(DataView.prototype.setUint16);FVe({target:"DataView",proto:!0},{setFloat16:function(t,r){jVe(this);var n=BVe(t),i=WVe(+r);return HVe(this,n,i,arguments.length>2?arguments[2]:!1)}})});var HL=I((PVt,QX)=>{"use strict";var XX=nt(),KVe=d0(),YVe=Zi(),YX=XX.ArrayBuffer,XVe=XX.TypeError;QX.exports=YX&&KVe(YX.prototype,"byteLength","get")||function(e){if(YVe(e)!=="ArrayBuffer")throw new XVe("ArrayBuffer expected");return e.byteLength}});var KL=I((MVt,JX)=>{"use strict";var QVe=nt(),JVe=T0(),e$e=HL(),t$e=QVe.DataView;JX.exports=function(e){if(!JVe||e$e(e)!==0)return!1;try{return new t$e(e),!1}catch(t){return!0}}});var YL=I(()=>{"use strict";var r$e=vt(),n$e=Yr(),i$e=KL(),eQ=ArrayBuffer.prototype;r$e&&!("detached"in eQ)&&n$e(eQ,"detached",{configurable:!0,get:function(){return i$e(this)}})});var Jm=I((RVt,tQ)=>{"use strict";var o$e=KL(),a$e=TypeError;tQ.exports=function(e){if(o$e(e))throw new a$e("ArrayBuffer is detached");return e}});var XL=I((OVt,rQ)=>{"use strict";var s$e=nt(),l$e=wp();rQ.exports=function(e){if(l$e){try{return s$e.process.getBuiltinModule(e)}catch(t){}try{return Function("return require(\""+e+"\")")()}catch(t){}}}});var OT=I((LVt,iQ)=>{"use strict";var u$e=nt(),c$e=Ye(),QL=$s(),JL=E0(),nQ=u$e.structuredClone;iQ.exports=!!nQ&&!c$e(function(){if(JL==="DENO"&&QL>92||JL==="NODE"&&QL>94||JL==="BROWSER"&&QL>97)return!1;var e=new ArrayBuffer(8),t=nQ(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var iD=I((DVt,sQ)=>{"use strict";var nD=nt(),h$e=XL(),f$e=OT(),p$e=nD.structuredClone,oQ=nD.ArrayBuffer,LT=nD.MessageChannel,rD=!1,eD,aQ,DT,tD;if(f$e)rD=function(e){p$e(e,{transfer:[e]})};else if(oQ)try{LT||(eD=h$e("worker_threads"),eD&&(LT=eD.MessageChannel)),LT&&(aQ=new LT,DT=new oQ(2),tD=function(e){aQ.port1.postMessage(null,[e])},DT.byteLength===2&&(tD(DT),DT.byteLength===0&&(rD=tD)))}catch(e){}sQ.exports=rD});var cD=I((kVt,dQ)=>{"use strict";var sD=nt(),lD=Ze(),hQ=d0(),d$e=Wm(),m$e=Jm(),v$e=HL(),lQ=iD(),oD=OT(),g$e=sD.structuredClone,fQ=sD.ArrayBuffer,aD=sD.DataView,y$e=Math.min,uD=fQ.prototype,pQ=aD.prototype,_$e=lD(uD.slice),uQ=hQ(uD,"resizable","get"),cQ=hQ(uD,"maxByteLength","get"),x$e=lD(pQ.getInt8),b$e=lD(pQ.setInt8);dQ.exports=(oD||lQ)&&function(e,t,r){var n=v$e(e),i=t===void 0?n:d$e(t),o=!uQ||!uQ(e),f;if(m$e(e),oD&&(e=g$e(e,{transfer:[e]}),n===i&&(r||o)))return e;if(n>=i&&(!r||o))f=_$e(e,0,i);else{var v=r&&!o&&cQ?{maxByteLength:cQ(e)}:void 0;f=new fQ(i,v);for(var x=new aD(e),E=new aD(f),S=y$e(i,n),P=0;P<S;P++)b$e(E,P,x$e(x,P))}return oD||lQ(e),f}});var hD=I(()=>{"use strict";var w$e=J(),mQ=cD();mQ&&w$e({target:"ArrayBuffer",proto:!0},{transfer:function(){return mQ(this,arguments.length?arguments[0]:void 0,!0)}})});var fD=I(()=>{"use strict";var E$e=J(),vQ=cD();vQ&&E$e({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return vQ(this,arguments.length?arguments[0]:void 0,!1)}})});var gQ=I(()=>{"use strict";var T$e=J(),S$e=Ze(),I$e=Ye(),C$e=I$e(function(){return new Date(16e11).getYear()!==120}),P$e=S$e(Date.prototype.getFullYear);T$e({target:"Date",proto:!0,forced:C$e},{getYear:function(){return P$e(this)-1900}})});var _Q=I(()=>{"use strict";var M$e=J(),A$e=Ze(),yQ=Date,q$e=A$e(yQ.prototype.getTime);M$e({target:"Date",stat:!0},{now:function(){return q$e(new yQ)}})});var wQ=I(()=>{"use strict";var R$e=J(),xQ=Ze(),O$e=Kr(),bQ=Date.prototype,L$e=xQ(bQ.getTime),D$e=xQ(bQ.setFullYear);R$e({target:"Date",proto:!0},{setYear:function(t){L$e(this);var r=O$e(t),n=r>=0&&r<=99?r+1900:r;return D$e(this,n)}})});var EQ=I(()=>{"use strict";var k$e=J();k$e({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var P0=I((KVt,TQ)=>{"use strict";var N$e=Kr(),F$e=At(),z$e=zr(),j$e=RangeError;TQ.exports=function(t){var r=F$e(z$e(this)),n="",i=N$e(t);if(i<0||i===1/0)throw new j$e("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(r+=r))i&1&&(n+=r);return n}});var M0=I((YVt,PQ)=>{"use strict";var CQ=Ze(),B$e=la(),SQ=At(),U$e=P0(),V$e=zr(),$$e=CQ(U$e),G$e=CQ("".slice),Z$e=Math.ceil,IQ=function(e){return function(t,r,n){var i=SQ(V$e(t)),o=B$e(r),f=i.length,v=n===void 0?" ":SQ(n),x,E;return o<=f||v===""?i:(x=o-f,E=$$e(v,Z$e(x/v.length)),E.length>x&&(E=G$e(E,0,x)),e?i+E:E+i)}};PQ.exports={start:IQ(!1),end:IQ(!0)}});var qQ=I((XVt,AQ)=>{"use strict";var Ch=Ze(),MQ=Ye(),Tp=M0().start,W$e=RangeError,H$e=isFinite,K$e=Math.abs,ju=Date.prototype,pD=ju.toISOString,Y$e=Ch(ju.getTime),X$e=Ch(ju.getUTCDate),Q$e=Ch(ju.getUTCFullYear),J$e=Ch(ju.getUTCHours),e8e=Ch(ju.getUTCMilliseconds),t8e=Ch(ju.getUTCMinutes),r8e=Ch(ju.getUTCMonth),n8e=Ch(ju.getUTCSeconds);AQ.exports=MQ(function(){return pD.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!MQ(function(){pD.call(new Date(NaN))})?function(){if(!H$e(Y$e(this)))throw new W$e("Invalid time value");var t=this,r=Q$e(t),n=e8e(t),i=r<0?"-":r>9999?"+":"";return i+Tp(K$e(r),i?6:4,0)+"-"+Tp(r8e(t)+1,2,0)+"-"+Tp(X$e(t),2,0)+"T"+Tp(J$e(t),2,0)+":"+Tp(t8e(t),2,0)+":"+Tp(n8e(t),2,0)+"."+Tp(n,3,0)+"Z"}:pD});var OQ=I(()=>{"use strict";var i8e=J(),RQ=qQ();i8e({target:"Date",proto:!0,forced:Date.prototype.toISOString!==RQ},{toISOString:RQ})});var LQ=I(()=>{"use strict";var o8e=J(),a8e=Ye(),s8e=Gt(),l8e=J_(),u8e=a8e(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});o8e({target:"Date",proto:!0,arity:1,forced:u8e},{toJSON:function(t){var r=s8e(this),n=l8e(r,"number");return typeof n=="number"&&!isFinite(n)?null:r.toISOString()}})});var kQ=I((r$t,DQ)=>{"use strict";var c8e=at(),h8e=FR(),f8e=TypeError;DQ.exports=function(e){if(c8e(this),e==="string"||e==="default")e="string";else if(e!=="number")throw new f8e("Incorrect hint");return h8e(this,e)}});var zQ=I(()=>{"use strict";var p8e=jt(),d8e=br(),m8e=kQ(),v8e=St(),NQ=v8e("toPrimitive"),FQ=Date.prototype;p8e(FQ,NQ)||d8e(FQ,NQ,m8e)});var VQ=I(()=>{"use strict";var BQ=Ze(),g8e=br(),dD=Date.prototype,jQ="Invalid Date",UQ="toString",y8e=BQ(dD[UQ]),_8e=BQ(dD.getTime);String(new Date(NaN))!==jQ&&g8e(dD,UQ,function(){var t=_8e(this);return t===t?y8e(this):jQ})});var GQ=I(()=>{"use strict";var x8e=J(),A0=Ze(),b8e=At(),w8e=A0("".charAt),E8e=A0("".charCodeAt),T8e=A0(/./.exec),S8e=A0(1 .toString),I8e=A0("".toUpperCase),C8e=/[\w*+\-./@]/,$Q=function(e,t){for(var r=S8e(e,16);r.length<t;)r="0"+r;return r};x8e({global:!0},{escape:function(t){for(var r=b8e(t),n="",i=r.length,o=0,f,v;o<i;)f=w8e(r,o++),T8e(C8e,f)?n+=f:(v=E8e(f,0),v<256?n+="%"+$Q(v,2):n+="%u"+I8e($Q(v,4)));return n}})});var vD=I((u$t,KQ)=>{"use strict";var WQ=Ze(),P8e=Pt(),M8e=bt(),A8e=jt(),ZQ=ua(),q8e=km(),HQ=Function,R8e=WQ([].concat),O8e=WQ([].join),mD={},L8e=function(e,t,r){if(!A8e(mD,t)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";mD[t]=HQ("C,a","return new C("+O8e(n,",")+")")}return mD[t](e,r)};KQ.exports=q8e?HQ.bind:function(t){var r=P8e(this),n=r.prototype,i=ZQ(arguments,1),o=function(){var v=R8e(i,ZQ(arguments));return this instanceof o?L8e(r,v.length,v):r.apply(t,v)};return M8e(n)&&(o.prototype=n),o}});var XQ=I(()=>{"use strict";var D8e=J(),YQ=vD();D8e({target:"Function",proto:!0,forced:Function.bind!==YQ},{bind:YQ})});var eJ=I(()=>{"use strict";var k8e=Ft(),QQ=bt(),N8e=kr(),F8e=Wi(),z8e=St(),j8e=i0(),gD=z8e("hasInstance"),JQ=Function.prototype;gD in JQ||N8e.f(JQ,gD,{value:j8e(function(e){if(!k8e(this)||!QQ(e))return!1;var t=this.prototype;return QQ(t)?F8e(t,e):e instanceof this},gD)})});var iJ=I(()=>{"use strict";var B8e=vt(),U8e=fp().EXISTS,tJ=Ze(),V8e=Yr(),rJ=Function.prototype,$8e=tJ(rJ.toString),nJ=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,G8e=tJ(nJ.exec),Z8e="name";B8e&&!U8e&&V8e(rJ,Z8e,{configurable:!0,get:function(){try{return G8e(nJ,$8e(this))[1]}catch(e){return""}}})});var _D=I(()=>{"use strict";var W8e=J(),yD=nt();W8e({global:!0,forced:yD.globalThis!==yD},{globalThis:yD})});var TD=I(()=>{"use strict";var H8e=J(),K8e=nt(),Y8e=go(),X8e=at(),Q8e=Ft(),J8e=ei(),eGe=Yr(),tGe=us(),rGe=Ye(),wD=jt(),nGe=St(),ql=_h().IteratorPrototype,iGe=vt(),oGe=hr(),xD="constructor",aJ="Iterator",oJ=nGe("toStringTag"),sJ=TypeError,bD=K8e[aJ],lJ=oGe||!Q8e(bD)||bD.prototype!==ql||!rGe(function(){bD({})}),ED=function(){if(Y8e(this,ql),J8e(this)===ql)throw new sJ("Abstract class Iterator not directly constructable")},uJ=function(e,t){iGe?eGe(ql,e,{configurable:!0,get:function(){return t},set:function(r){if(X8e(this),this===ql)throw new sJ("You can't redefine this property");wD(this,e)?this[e]=r:tGe(this,e,r)}}):ql[e]=t};wD(ql,oJ)||uJ(oJ,aJ);(lJ||!wD(ql,xD)||ql[xD]===Object)&&uJ(xD,ED);ED.prototype=ql;H8e({global:!0,constructor:!0,forced:lJ},{Iterator:ED})});var ln=I((x$t,cJ)=>{"use strict";cJ.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var ev=I((b$t,hJ)=>{"use strict";var aGe=RangeError;hJ.exports=function(e){if(e===e)return e;throw new aGe("NaN is not allowed")}});var tv=I((w$t,fJ)=>{"use strict";var sGe=Kr(),lGe=RangeError;fJ.exports=function(e){var t=sGe(e);if(t<0)throw new lGe("The argument can't be less than 0");return t}});var Ph=I((E$t,yJ)=>{"use strict";var uGe=it(),cGe=An(),hGe=Jn(),fGe=hs(),pGe=St(),pJ=vr(),dGe=Mn(),mGe=_h().IteratorPrototype,kT=mi(),SD=Ai(),vGe=pGe("toStringTag"),dJ="IteratorHelper",mJ="WrapForValidIterator",gGe=pJ.set,vJ=function(e){var t=pJ.getterFor(e?mJ:dJ);return fGe(cGe(mGe),{next:function(){var n=t(this);if(e)return n.nextHandler();if(n.done)return kT(void 0,!0);try{var i=n.nextHandler();return n.returnHandlerResult?i:kT(i,n.done)}catch(o){throw n.done=!0,o}},return:function(){var r=t(this),n=r.iterator;if(r.done=!0,e){var i=dGe(n,"return");return i?uGe(i,n):kT(void 0,!0)}if(r.inner)try{SD(r.inner.iterator,"normal")}catch(o){return SD(n,"throw",o)}return n&&SD(n,"normal"),kT(void 0,!0)}})},yGe=vJ(!0),gJ=vJ(!1);hGe(gJ,vGe,"Iterator Helper");yJ.exports=function(e,t,r){var n=function(o,f){f?(f.iterator=o.iterator,f.next=o.next):f=o,f.type=t?mJ:dJ,f.returnHandlerResult=!!r,f.nextHandler=e,f.counter=0,f.done=!1,gGe(this,f)};return n.prototype=t?yGe:gJ,n}});var Xs=I((T$t,_J)=>{"use strict";var _Ge=nt();_J.exports=function(e,t){var r=_Ge.Iterator,n=r&&r.prototype,i=n&&n[e],o=!1;if(i)try{i.call({next:function(){return{done:!0}},return:function(){o=!0}},-1)}catch(f){f instanceof t||(o=!1)}if(!o)return i}});var MD=I(()=>{"use strict";var xGe=J(),CD=it(),PD=at(),bGe=ln(),wGe=ev(),EGe=tv(),TGe=Ai(),SGe=Ph(),IGe=Xs(),xJ=hr(),ID=!xJ&&IGe("drop",RangeError),CGe=SGe(function(){for(var e=this.iterator,t=this.next,r,n;this.remaining;)if(this.remaining--,r=PD(CD(t,e)),n=this.done=!!r.done,n)return;if(r=PD(CD(t,e)),n=this.done=!!r.done,!n)return r.value});xGe({target:"Iterator",proto:!0,real:!0,forced:xJ||ID},{drop:function(t){PD(this);var r;try{r=EGe(wGe(+t))}catch(n){TGe(this,"throw",n)}return ID?CD(ID,this,r):new CGe(bGe(this),{remaining:r})}})});var qD=I(()=>{"use strict";var PGe=J(),MGe=it(),AGe=pn(),qGe=Pt(),RGe=at(),OGe=ln(),LGe=Ai(),DGe=Xs(),AD=DGe("every",TypeError);PGe({target:"Iterator",proto:!0,real:!0,forced:AD},{every:function(t){RGe(this);try{qGe(t)}catch(i){LGe(this,"throw",i)}if(AD)return MGe(AD,this,t);var r=OGe(this),n=0;return!AGe(r,function(i,o){if(!t(i,n++))return o()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var OD=I(()=>{"use strict";var kGe=J(),bJ=it(),NGe=Pt(),wJ=at(),FGe=ln(),zGe=Ph(),jGe=fT(),EJ=hr(),BGe=Ai(),UGe=Xs(),RD=!EJ&&UGe("filter",TypeError),VGe=zGe(function(){for(var e=this.iterator,t=this.predicate,r=this.next,n,i,o;;){if(n=wJ(bJ(r,e)),i=this.done=!!n.done,i)return;if(o=n.value,jGe(e,t,[o,this.counter++],!0))return o}});kGe({target:"Iterator",proto:!0,real:!0,forced:EJ||RD},{filter:function(t){wJ(this);try{NGe(t)}catch(r){BGe(this,"throw",r)}return RD?bJ(RD,this,t):new VGe(FGe(this),{predicate:t})}})});var DD=I(()=>{"use strict";var $Ge=J(),GGe=it(),ZGe=pn(),WGe=Pt(),HGe=at(),KGe=ln(),YGe=Ai(),XGe=Xs(),LD=XGe("find",TypeError);$Ge({target:"Iterator",proto:!0,real:!0,forced:LD},{find:function(t){HGe(this);try{WGe(t)}catch(i){YGe(this,"throw",i)}if(LD)return GGe(LD,this,t);var r=KGe(this),n=0;return ZGe(r,function(i,o){if(t(i,n++))return o(i)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var kD=I((O$t,SJ)=>{"use strict";var QGe=it(),TJ=at(),JGe=ln(),eZe=Pl();SJ.exports=function(e,t){(!t||typeof e!="string")&&TJ(e);var r=eZe(e);return JGe(TJ(r!==void 0?QGe(r,e):e))}});var BD=I(()=>{"use strict";var tZe=J(),FD=it(),rZe=Pt(),zD=at(),nZe=ln(),iZe=kD(),oZe=Ph(),jD=Ai(),IJ=hr(),aZe=Xs(),ND=!IJ&&aZe("flatMap",TypeError),sZe=oZe(function(){for(var e=this.iterator,t=this.mapper,r,n;;){if(n=this.inner)try{if(r=zD(FD(n.next,n.iterator)),!r.done)return r.value;this.inner=null}catch(i){jD(e,"throw",i)}if(r=zD(FD(this.next,e)),this.done=!!r.done)return;try{this.inner=iZe(t(r.value,this.counter++),!1)}catch(i){jD(e,"throw",i)}}});tZe({target:"Iterator",proto:!0,real:!0,forced:IJ||ND},{flatMap:function(t){zD(this);try{rZe(t)}catch(r){jD(this,"throw",r)}return ND?FD(ND,this,t):new sZe(nZe(this),{mapper:t,inner:null})}})});var VD=I(()=>{"use strict";var lZe=J(),uZe=it(),cZe=pn(),hZe=Pt(),fZe=at(),pZe=ln(),dZe=Ai(),mZe=Xs(),UD=mZe("forEach",TypeError);lZe({target:"Iterator",proto:!0,real:!0,forced:UD},{forEach:function(t){fZe(this);try{hZe(t)}catch(i){dZe(this,"throw",i)}if(UD)return uZe(UD,this,t);var r=pZe(this),n=0;cZe(r,function(i){t(i,n++)},{IS_RECORD:!0})}})});var $D=I(()=>{"use strict";var vZe=J(),gZe=it(),yZe=Gt(),_Ze=Wi(),xZe=_h().IteratorPrototype,bZe=Ph(),wZe=kD(),EZe=hr(),TZe=bZe(function(){return gZe(this.next,this.iterator)},!0);vZe({target:"Iterator",stat:!0,forced:EZe},{from:function(t){var r=wZe(typeof t=="string"?yZe(t):t,!0);return _Ze(xZe,r.iterator)?r.iterator:new TZe(r)}})});var NT=I(()=>{"use strict";var SZe=J(),CJ=it(),IZe=Pt(),PJ=at(),CZe=ln(),PZe=Ph(),MZe=fT(),AZe=Ai(),qZe=Xs(),MJ=hr(),GD=!MJ&&qZe("map",TypeError),RZe=PZe(function(){var e=this.iterator,t=PJ(CJ(this.next,e)),r=this.done=!!t.done;if(!r)return MZe(e,this.mapper,[t.value,this.counter++],!0)});SZe({target:"Iterator",proto:!0,real:!0,forced:MJ||GD},{map:function(t){PJ(this);try{IZe(t)}catch(r){AZe(this,"throw",r)}return GD?CJ(GD,this,t):new RZe(CZe(this),{mapper:t})}})});var WD=I(()=>{"use strict";var OZe=J(),LZe=pn(),DZe=Pt(),kZe=at(),NZe=ln(),FZe=Ai(),zZe=Xs(),jZe=Hi(),BZe=Ye(),AJ=TypeError,qJ=BZe(function(){[].keys().reduce(function(){},void 0)}),ZD=!qJ&&zZe("reduce",AJ);OZe({target:"Iterator",proto:!0,real:!0,forced:qJ||ZD},{reduce:function(t){kZe(this);try{DZe(t)}catch(f){FZe(this,"throw",f)}var r=arguments.length<2,n=r?void 0:arguments[1];if(ZD)return jZe(ZD,this,r?[t]:[t,n]);var i=NZe(this),o=0;if(LZe(i,function(f){r?(r=!1,n=f):n=t(n,f,o),o++},{IS_RECORD:!0}),r)throw new AJ("Reduce of empty iterator with no initial value");return n}})});var KD=I(()=>{"use strict";var UZe=J(),VZe=it(),$Ze=pn(),GZe=Pt(),ZZe=at(),WZe=ln(),HZe=Ai(),KZe=Xs(),HD=KZe("some",TypeError);UZe({target:"Iterator",proto:!0,real:!0,forced:HD},{some:function(t){ZZe(this);try{GZe(t)}catch(i){HZe(this,"throw",i)}if(HD)return VZe(HD,this,t);var r=WZe(this),n=0;return $Ze(r,function(i,o){if(t(i,n++))return o()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var XD=I(()=>{"use strict";var YZe=J(),RJ=it(),OJ=at(),XZe=ln(),QZe=ev(),JZe=tv(),eWe=Ph(),LJ=Ai(),tWe=Xs(),DJ=hr(),YD=!DJ&&tWe("take",RangeError),rWe=eWe(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,LJ(e,"normal",void 0);var t=OJ(RJ(this.next,e)),r=this.done=!!t.done;if(!r)return t.value});YZe({target:"Iterator",proto:!0,real:!0,forced:DJ||YD},{take:function(t){OJ(this);var r;try{r=JZe(QZe(+t))}catch(n){LJ(this,"throw",n)}return YD?RJ(YD,this,r):new rWe(XZe(this),{remaining:r})}})});var QD=I(()=>{"use strict";var nWe=J(),iWe=at(),oWe=pn(),aWe=ln(),sWe=[].push;nWe({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return oWe(aWe(iWe(this)),sWe,{that:t,IS_RECORD:!0}),t}})});var kJ=I(()=>{"use strict";var lWe=nt(),uWe=Fo();uWe(lWe.JSON,"JSON",!0)});var FT=I((Q$t,NJ)=>{"use strict";var cWe=Ye();NJ.exports=cWe(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var jT=I((J$t,zJ)=>{"use strict";var hWe=Ye(),fWe=bt(),pWe=Zi(),FJ=FT(),zT=Object.isExtensible,dWe=hWe(function(){zT(1)});zJ.exports=dWe||FJ?function(t){return!fWe(t)||FJ&&pWe(t)==="ArrayBuffer"?!1:zT?zT(t):!0}:zT});var Bu=I((e8t,jJ)=>{"use strict";var mWe=Ye();jJ.exports=!mWe(function(){return Object.isExtensible(Object.preventExtensions({}))})});var Mh=I((t8t,VJ)=>{"use strict";var vWe=J(),gWe=Ze(),yWe=Fm(),_We=bt(),JD=jt(),xWe=kr().f,BJ=fh(),bWe=WE(),ek=jT(),wWe=hh(),EWe=Bu(),UJ=!1,Uu=wWe("meta"),TWe=0,tk=function(e){xWe(e,Uu,{value:{objectID:"O"+TWe++,weakData:{}}})},SWe=function(e,t){if(!_We(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!JD(e,Uu)){if(!ek(e))return"F";if(!t)return"E";tk(e)}return e[Uu].objectID},IWe=function(e,t){if(!JD(e,Uu)){if(!ek(e))return!0;if(!t)return!1;tk(e)}return e[Uu].weakData},CWe=function(e){return EWe&&UJ&&ek(e)&&!JD(e,Uu)&&tk(e),e},PWe=function(){MWe.enable=function(){},UJ=!0;var e=BJ.f,t=gWe([].splice),r={};r[Uu]=1,e(r).length&&(BJ.f=function(n){for(var i=e(n),o=0,f=i.length;o<f;o++)if(i[o]===Uu){t(i,o,1);break}return i},vWe({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:bWe.f}))},MWe=VJ.exports={enable:PWe,fastKey:SWe,getWeakData:IWe,onFreeze:CWe};yWe[Uu]=!0});var q0=I((r8t,GJ)=>{"use strict";var AWe=J(),qWe=nt(),RWe=Ze(),$J=jm(),OWe=br(),LWe=Mh(),DWe=pn(),kWe=go(),NWe=Ft(),FWe=sa(),rk=bt(),nk=Ye(),zWe=g0(),jWe=Fo(),BWe=vh();GJ.exports=function(e,t,r){var n=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,o=n?"set":"add",f=qWe[e],v=f&&f.prototype,x=f,E={},S=function(W){var Q=RWe(v[W]);OWe(v,W,W==="add"?function(ce){return Q(this,ce===0?0:ce),this}:W==="delete"?function(le){return i&&!rk(le)?!1:Q(this,le===0?0:le)}:W==="get"?function(ce){return i&&!rk(ce)?void 0:Q(this,ce===0?0:ce)}:W==="has"?function(ce){return i&&!rk(ce)?!1:Q(this,ce===0?0:ce)}:function(ce,ze){return Q(this,ce===0?0:ce,ze),this})},P=$J(e,!NWe(f)||!(i||v.forEach&&!nk(function(){new f().entries().next()})));if(P)x=r.getConstructor(t,e,n,o),LWe.enable();else if($J(e,!0)){var q=new x,F=q[o](i?{}:-0,1)!==q,K=nk(function(){q.has(1)}),ne=zWe(function(W){new f(W)}),Z=!i&&nk(function(){for(var W=new f,Q=5;Q--;)W[o](Q,Q);return!W.has(-0)});ne||(x=t(function(W,Q){kWe(W,v);var le=BWe(new f,W,x);return FWe(Q)||DWe(Q,le[o],{that:le,AS_ENTRIES:n}),le}),x.prototype=v,v.constructor=x),(K||Z)&&(S("delete"),S("has"),n&&S("get")),(Z||F)&&S(o),i&&v.clear&&delete v.clear}return E[e]=x,AWe({global:!0,constructor:!0,forced:x!==f},E),jWe(x,e),i||r.setStrong(x,e,n),x}});var ok=I((n8t,XJ)=>{"use strict";var ZJ=An(),UWe=Yr(),WJ=hs(),VWe=Mr(),$We=go(),GWe=sa(),ZWe=pn(),WWe=mT(),BT=mi(),HWe=wh(),R0=vt(),HJ=Mh().fastKey,YJ=vr(),KJ=YJ.set,ik=YJ.getterFor;XJ.exports={getConstructor:function(e,t,r,n){var i=e(function(E,S){$We(E,o),KJ(E,{type:t,index:ZJ(null),first:null,last:null,size:0}),R0||(E.size=0),GWe(S)||ZWe(S,E[n],{that:E,AS_ENTRIES:r})}),o=i.prototype,f=ik(t),v=function(E,S,P){var q=f(E),F=x(E,S),K,ne;return F?F.value=P:(q.last=F={index:ne=HJ(S,!0),key:S,value:P,previous:K=q.last,next:null,removed:!1},q.first||(q.first=F),K&&(K.next=F),R0?q.size++:E.size++,ne!=="F"&&(q.index[ne]=F)),E},x=function(E,S){var P=f(E),q=HJ(S),F;if(q!=="F")return P.index[q];for(F=P.first;F;F=F.next)if(F.key===S)return F};return WJ(o,{clear:function(){for(var S=this,P=f(S),q=P.first;q;)q.removed=!0,q.previous&&(q.previous=q.previous.next=null),q=q.next;P.first=P.last=null,P.index=ZJ(null),R0?P.size=0:S.size=0},delete:function(E){var S=this,P=f(S),q=x(S,E);if(q){var F=q.next,K=q.previous;delete P.index[q.index],q.removed=!0,K&&(K.next=F),F&&(F.previous=K),P.first===q&&(P.first=F),P.last===q&&(P.last=K),R0?P.size--:S.size--}return!!q},forEach:function(S){for(var P=f(this),q=VWe(S,arguments.length>1?arguments[1]:void 0),F;F=F?F.next:P.first;)for(q(F.value,F.key,this);F&&F.removed;)F=F.previous},has:function(S){return!!x(this,S)}}),WJ(o,r?{get:function(S){var P=x(this,S);return P&&P.value},set:function(S,P){return v(this,S===0?0:S,P)}}:{add:function(S){return v(this,S=S===0?0:S,S)}}),R0&&UWe(o,"size",{configurable:!0,get:function(){return f(this).size}}),i},setStrong:function(e,t,r){var n=t+" Iterator",i=ik(t),o=ik(n);WWe(e,t,function(f,v){KJ(this,{type:n,target:f,state:i(f),kind:v,last:null})},function(){for(var f=o(this),v=f.kind,x=f.last;x&&x.removed;)x=x.previous;return!f.target||!(f.last=x=x?x.next:f.state.first)?(f.target=null,BT(void 0,!0)):BT(v==="keys"?x.key:v==="values"?x.value:[x.key,x.value],!1)},r?"entries":"values",!r,!0),HWe(t)}}});var QJ=I(()=>{"use strict";var KWe=q0(),YWe=ok();KWe("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},YWe)});var UT=I(()=>{"use strict";QJ()});var vi=I((l8t,JJ)=>{"use strict";var VT=Ze(),O0=Map.prototype;JJ.exports={Map,set:VT(O0.set),get:VT(O0.get),has:VT(O0.has),remove:VT(O0.delete),proto:O0}});var ak=I(()=>{"use strict";var XWe=J(),QWe=Ze(),JWe=Pt(),eHe=zr(),tHe=pn(),$T=vi(),eee=hr(),rHe=Ye(),tee=$T.Map,nHe=$T.has,iHe=$T.get,oHe=$T.set,aHe=QWe([].push),sHe=eee||rHe(function(){return tee.groupBy("ab",function(e){return e}).get("a").length!==1});XWe({target:"Map",stat:!0,forced:eee||sHe},{groupBy:function(t,r){eHe(t),JWe(r);var n=new tee,i=0;return tHe(t,function(o){var f=r(o,i++);nHe(n,f)?aHe(iHe(n,f),o):oHe(n,f,[o])}),n}})});var sk=I((h8t,ree)=>{"use strict";var lHe=Math.log;ree.exports=Math.log1p||function(t){var r=+t;return r>-1e-8&&r<1e-8?r-r*r/2:lHe(1+r)}});var iee=I(()=>{"use strict";var uHe=J(),cHe=sk(),lk=Math.acosh,hHe=Math.log,nee=Math.sqrt,fHe=Math.LN2,pHe=!lk||Math.floor(lk(Number.MAX_VALUE))!==710||lk(1/0)!==1/0;uHe({target:"Math",stat:!0,forced:pHe},{acosh:function(t){var r=+t;return r<1?NaN:r>94906265.62425156?hHe(r)+fHe:cHe(r-1+nee(r-1)*nee(r+1))}})});var see=I(()=>{"use strict";var dHe=J(),oee=Math.asinh,mHe=Math.log,vHe=Math.sqrt;function aee(e){var t=+e;return!isFinite(t)||t===0?t:t<0?-aee(-t):mHe(t+vHe(t*t+1))}var gHe=!(oee&&1/oee(0)>0);dHe({target:"Math",stat:!0,forced:gHe},{asinh:aee})});var uee=I(()=>{"use strict";var yHe=J(),lee=Math.atanh,_He=Math.log,xHe=!(lee&&1/lee(-0)<0);yHe({target:"Math",stat:!0,forced:xHe},{atanh:function(t){var r=+t;return r===0?r:_He((1+r)/(1-r))/2}})});var cee=I(()=>{"use strict";var bHe=J(),wHe=bT(),EHe=Math.abs,THe=Math.pow;bHe({target:"Math",stat:!0},{cbrt:function(t){var r=+t;return wHe(r)*THe(EHe(r),1/3)}})});var hee=I(()=>{"use strict";var SHe=J(),IHe=Math.floor,CHe=Math.log,PHe=Math.LOG2E;SHe({target:"Math",stat:!0},{clz32:function(t){var r=t>>>0;return r?31-IHe(CHe(r+.5)*PHe):32}})});var D0=I((w8t,fee)=>{"use strict";var L0=Math.expm1,MHe=Math.exp;fee.exports=!L0||L0(10)>22025.465794806718||L0(10)<22025.465794806718||L0(-2e-17)!==-2e-17?function(t){var r=+t;return r===0?r:r>-1e-6&&r<1e-6?r+r*r/2:MHe(r)-1}:L0});var dee=I(()=>{"use strict";var AHe=J(),qHe=D0(),pee=Math.cosh,RHe=Math.abs,uk=Math.E,OHe=!pee||pee(710)===1/0;AHe({target:"Math",stat:!0,forced:OHe},{cosh:function(t){var r=qHe(RHe(t)-1)+1;return(r+1/(r*uk*uk))*(uk/2)}})});var vee=I(()=>{"use strict";var LHe=J(),mee=D0();LHe({target:"Math",stat:!0,forced:mee!==Math.expm1},{expm1:mee})});var gee=I(()=>{"use strict";var DHe=J(),kHe=wT();DHe({target:"Math",stat:!0},{fround:kHe})});var ck=I(()=>{"use strict";var NHe=J(),FHe=SL(),zHe=.0009765625,jHe=65504,BHe=6103515625e-14;NHe({target:"Math",stat:!0},{f16round:function(t){return FHe(t,zHe,jHe,BHe)}})});var _ee=I(()=>{"use strict";var UHe=J(),yee=Math.hypot,VHe=Math.abs,$He=Math.sqrt,GHe=!!yee&&yee(1/0,NaN)!==1/0;UHe({target:"Math",stat:!0,arity:2,forced:GHe},{hypot:function(t,r){for(var n=0,i=0,o=arguments.length,f=0,v,x;i<o;)v=VHe(arguments[i++]),f<v?(x=f/v,n=n*x*x+1,f=v):v>0?(x=v/f,n+=x*x):n+=v;return f===1/0?1/0:f*$He(n)}})});var bee=I(()=>{"use strict";var ZHe=J(),WHe=Ye(),xee=Math.imul,HHe=WHe(function(){return xee(4294967295,5)!==-5||xee.length!==2});ZHe({target:"Math",stat:!0,forced:HHe},{imul:function(t,r){var n=65535,i=+t,o=+r,f=n&i,v=n&o;return 0|f*v+((n&i>>>16)*v+f*(n&o>>>16)<<16>>>0)}})});var hk=I((D8t,wee)=>{"use strict";var KHe=Math.log,YHe=Math.LOG10E;wee.exports=Math.log10||function(t){return KHe(t)*YHe}});var Eee=I(()=>{"use strict";var XHe=J(),QHe=hk();XHe({target:"Math",stat:!0},{log10:QHe})});var Tee=I(()=>{"use strict";var JHe=J(),e9e=sk();JHe({target:"Math",stat:!0},{log1p:e9e})});var See=I(()=>{"use strict";var t9e=J(),r9e=GL();t9e({target:"Math",stat:!0},{log2:r9e})});var Iee=I(()=>{"use strict";var n9e=J(),i9e=bT();n9e({target:"Math",stat:!0},{sign:i9e})});var Mee=I(()=>{"use strict";var o9e=J(),a9e=Ye(),Cee=D0(),s9e=Math.abs,Pee=Math.exp,l9e=Math.E,u9e=a9e(function(){return Math.sinh(-2e-17)!==-2e-17});o9e({target:"Math",stat:!0,forced:u9e},{sinh:function(t){var r=+t;return s9e(r)<1?(Cee(r)-Cee(-r))/2:(Pee(r-1)-Pee(-r-1))*(l9e/2)}})});var Ree=I(()=>{"use strict";var c9e=J(),Aee=D0(),qee=Math.exp;c9e({target:"Math",stat:!0},{tanh:function(t){var r=+t,n=Aee(r),i=Aee(-r);return n===1/0?1:i===1/0?-1:(n-i)/(qee(r)+qee(-r))}})});var Oee=I(()=>{"use strict";var h9e=Fo();h9e(Math,"Math",!0)});var Lee=I(()=>{"use strict";var f9e=J(),p9e=rO();f9e({target:"Math",stat:!0},{trunc:p9e})});var k0=I((Q8t,Dee)=>{"use strict";var d9e=Ze();Dee.exports=d9e(1 .valueOf)});var Sp=I((J8t,kee)=>{"use strict";kee.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var Ip=I((eGt,Fee)=>{"use strict";var m9e=Ze(),v9e=zr(),g9e=At(),pk=Sp(),Nee=m9e("".replace),y9e=RegExp("^["+pk+"]+"),_9e=RegExp("(^|[^"+pk+"])["+pk+"]+$"),fk=function(e){return function(t){var r=g9e(v9e(t));return e&1&&(r=Nee(r,y9e,"")),e&2&&(r=Nee(r,_9e,"$1")),r}};Fee.exports={start:fk(1),end:fk(2),trim:fk(3)}});var Gee=I(()=>{"use strict";var x9e=J(),dk=hr(),b9e=vt(),Bee=nt(),mk=HE(),Uee=Ze(),w9e=jm(),zee=jt(),E9e=vh(),T9e=Wi(),S9e=qu(),Vee=J_(),I9e=Ye(),C9e=fh().f,P9e=Pi().f,M9e=kr().f,A9e=k0(),q9e=Ip().trim,N0="Number",rv=Bee[N0],jee=mk[N0],vk=rv.prototype,R9e=Bee.TypeError,O9e=Uee("".slice),GT=Uee("".charCodeAt),L9e=function(e){var t=Vee(e,"number");return typeof t=="bigint"?t:D9e(t)},D9e=function(e){var t=Vee(e,"number"),r,n,i,o,f,v,x,E;if(S9e(t))throw new R9e("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=q9e(t),r=GT(t,0),r===43||r===45){if(n=GT(t,2),n===88||n===120)return NaN}else if(r===48){switch(GT(t,1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+t}for(f=O9e(t,2),v=f.length,x=0;x<v;x++)if(E=GT(f,x),E<48||E>o)return NaN;return parseInt(f,i)}}return+t},gk=w9e(N0,!rv(" 0o1")||!rv("0b1")||rv("+0x1")),k9e=function(e){return T9e(vk,e)&&I9e(function(){A9e(e)})},ZT=function(t){var r=arguments.length<1?0:rv(L9e(t));return k9e(this)?E9e(Object(r),this,ZT):r};ZT.prototype=vk;gk&&!dk&&(vk.constructor=ZT);x9e({global:!0,constructor:!0,wrap:!0,forced:gk},{Number:ZT});var $ee=function(e,t){for(var r=b9e?C9e(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),n=0,i;r.length>n;n++)zee(t,i=r[n])&&!zee(e,i)&&M9e(e,i,P9e(t,i))};dk&&jee&&$ee(mk[N0],jee);(gk||dk)&&$ee(mk[N0],rv)});var Zee=I(()=>{"use strict";var N9e=J();N9e({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var yk=I((oGt,Wee)=>{"use strict";var F9e=nt(),z9e=F9e.isFinite;Wee.exports=Number.isFinite||function(t){return typeof t=="number"&&z9e(t)}});var Hee=I(()=>{"use strict";var j9e=J(),B9e=yk();j9e({target:"Number",stat:!0},{isFinite:B9e})});var WT=I((lGt,Kee)=>{"use strict";var U9e=bt(),V9e=Math.floor;Kee.exports=Number.isInteger||function(t){return!U9e(t)&&isFinite(t)&&V9e(t)===t}});var Yee=I(()=>{"use strict";var $9e=J(),G9e=WT();$9e({target:"Number",stat:!0},{isInteger:G9e})});var Xee=I(()=>{"use strict";var Z9e=J();Z9e({target:"Number",stat:!0},{isNaN:function(t){return t!==t}})});var Qee=I(()=>{"use strict";var W9e=J(),H9e=WT(),K9e=Math.abs;W9e({target:"Number",stat:!0},{isSafeInteger:function(t){return H9e(t)&&K9e(t)<=9007199254740991}})});var Jee=I(()=>{"use strict";var Y9e=J();Y9e({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var ete=I(()=>{"use strict";var X9e=J();X9e({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var _k=I((_Gt,ite)=>{"use strict";var nte=nt(),Q9e=Ye(),J9e=Ze(),eKe=At(),tKe=Ip().trim,rKe=Sp(),nKe=J9e("".charAt),HT=nte.parseFloat,tte=nte.Symbol,rte=tte&&tte.iterator,iKe=1/HT(rKe+"-0")!==-1/0||rte&&!Q9e(function(){HT(Object(rte))});ite.exports=iKe?function(t){var r=tKe(eKe(t)),n=HT(r);return n===0&&nKe(r,0)==="-"?-0:n}:HT});var ate=I(()=>{"use strict";var oKe=J(),ote=_k();oKe({target:"Number",stat:!0,forced:Number.parseFloat!==ote},{parseFloat:ote})});var xk=I((wGt,fte)=>{"use strict";var cte=nt(),aKe=Ye(),sKe=Ze(),lKe=At(),uKe=Ip().trim,ste=Sp(),F0=cte.parseInt,lte=cte.Symbol,ute=lte&&lte.iterator,hte=/^[+-]?0x/i,cKe=sKe(hte.exec),hKe=F0(ste+"08")!==8||F0(ste+"0x16")!==22||ute&&!aKe(function(){F0(Object(ute))});fte.exports=hKe?function(t,r){var n=uKe(lKe(t));return F0(n,r>>>0||(cKe(hte,n)?16:10))}:F0});var dte=I(()=>{"use strict";var fKe=J(),pte=xk();fKe({target:"Number",stat:!0,forced:Number.parseInt!==pte},{parseInt:pte})});var _te=I(()=>{"use strict";var pKe=J(),wk=Ze(),dKe=Kr(),mKe=k0(),vKe=P0(),gKe=hk(),bk=Ye(),yKe=RangeError,mte=String,_Ke=isFinite,xKe=Math.abs,bKe=Math.floor,vte=Math.pow,wKe=Math.round,Rl=wk(1 .toExponential),EKe=wk(vKe),gte=wk("".slice),yte=Rl(-69e-12,4)==="-6.9000e-11"&&Rl(1.255,2)==="1.25e+0"&&Rl(12345,3)==="1.235e+4"&&Rl(25,0)==="3e+1",TKe=function(){return bk(function(){Rl(1,1/0)})&&bk(function(){Rl(1,-1/0)})},SKe=function(){return!bk(function(){Rl(1/0,1/0),Rl(NaN,1/0)})},IKe=!yte||!TKe()||!SKe();pKe({target:"Number",proto:!0,forced:IKe},{toExponential:function(t){var r=mKe(this);if(t===void 0)return Rl(r);var n=dKe(t);if(!_Ke(r))return String(r);if(n<0||n>20)throw new yKe("Incorrect fraction digits");if(yte)return Rl(r,n);var i="",o,f,v,x;if(r<0&&(i="-",r=-r),r===0)f=0,o=EKe("0",n+1);else{var E=gKe(r);f=bKe(E);var S=vte(10,f-n),P=wKe(r/S);2*r>=(2*P+1)*S&&(P+=1),P>=vte(10,n+1)&&(P/=10,f+=1),o=mte(P)}return n!==0&&(o=gte(o,0,1)+"."+gte(o,1)),f===0?(v="+",x="0"):(v=f>0?"+":"-",x=mte(xKe(f))),o+="e"+v+x,i+o}})});var Ste=I(()=>{"use strict";var CKe=J(),Sk=Ze(),PKe=Kr(),MKe=k0(),AKe=P0(),xte=Ye(),qKe=RangeError,Ete=String,Tte=Math.floor,Tk=Sk(AKe),bte=Sk("".slice),z0=Sk(1 .toFixed),iv=function(e,t,r){return t===0?r:t%2===1?iv(e,t-1,r*e):iv(e*e,t/2,r)},RKe=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t},nv=function(e,t,r){for(var n=-1,i=r;++n<6;)i+=t*e[n],e[n]=i%1e7,i=Tte(i/1e7)},Ek=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=Tte(n/t),n=n%t*1e7},wte=function(e){for(var t=6,r="";--t>=0;)if(r!==""||t===0||e[t]!==0){var n=Ete(e[t]);r=r===""?n:r+Tk("0",7-n.length)+n}return r},OKe=xte(function(){return z0(8e-5,3)!=="0.000"||z0(.9,0)!=="1"||z0(1.255,2)!=="1.25"||z0(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!xte(function(){z0({})});CKe({target:"Number",proto:!0,forced:OKe},{toFixed:function(t){var r=MKe(this),n=PKe(t),i=[0,0,0,0,0,0],o="",f="0",v,x,E,S;if(n<0||n>20)throw new qKe("Incorrect fraction digits");if(r!==r)return"NaN";if(r<=-1e21||r>=1e21)return Ete(r);if(r<0&&(o="-",r=-r),r>1e-21)if(v=RKe(r*iv(2,69,1))-69,x=v<0?r*iv(2,-v,1):r/iv(2,v,1),x*=4503599627370496,v=52-v,v>0){for(nv(i,0,x),E=n;E>=7;)nv(i,1e7,0),E-=7;for(nv(i,iv(10,E,1),0),E=v-1;E>=23;)Ek(i,1<<23),E-=23;Ek(i,1<<E),nv(i,1,1),Ek(i,2),f=wte(i)}else nv(i,0,x),nv(i,1<<-v,0),f=wte(i)+Tk("0",n);return n>0?(S=f.length,f=o+(S<=n?"0."+Tk("0",n-S)+f:bte(f,0,S-n)+"."+bte(f,S-n))):f=o+f,f}})});var Pte=I(()=>{"use strict";var LKe=J(),DKe=Ze(),Ite=Ye(),Cte=k0(),KT=DKe(1 .toPrecision),kKe=Ite(function(){return KT(1,void 0)!=="1"})||!Ite(function(){KT({})});LKe({target:"Number",proto:!0,forced:kKe},{toPrecision:function(t){return t===void 0?KT(Cte(this)):KT(Cte(this),t)}})});var Ck=I((qGt,qte)=>{"use strict";var Mte=vt(),NKe=Ze(),FKe=it(),zKe=Ye(),Ik=mp(),jKe=o0(),BKe=X_(),UKe=Gt(),VKe=Au(),ov=Object.assign,Ate=Object.defineProperty,$Ke=NKe([].concat);qte.exports=!ov||zKe(function(){if(Mte&&ov({b:1},ov(Ate({},"a",{enumerable:!0,get:function(){Ate(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},r=Symbol("assign detection"),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(i){t[i]=i}),ov({},e)[r]!==7||Ik(ov({},t)).join("")!==n})?function(t,r){for(var n=UKe(t),i=arguments.length,o=1,f=jKe.f,v=BKe.f;i>o;)for(var x=VKe(arguments[o++]),E=f?$Ke(Ik(x),f(x)):Ik(x),S=E.length,P=0,q;S>P;)q=E[P++],(!Mte||FKe(v,x,q))&&(n[q]=x[q]);return n}:ov});var Ote=I(()=>{"use strict";var GKe=J(),Rte=Ck();GKe({target:"Object",stat:!0,arity:2,forced:Object.assign!==Rte},{assign:Rte})});var Lte=I(()=>{"use strict";var ZKe=J(),WKe=vt(),HKe=An();ZKe({target:"Object",stat:!0,sham:!WKe},{create:HKe})});var j0=I((kGt,kte)=>{"use strict";var KKe=hr(),YKe=nt(),XKe=Ye(),Dte=xT();kte.exports=KKe||!XKe(function(){if(!(Dte&&Dte<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete YKe[e]}})});var Nte=I(()=>{"use strict";var QKe=J(),JKe=vt(),e7e=j0(),t7e=Pt(),r7e=Gt(),n7e=kr();JKe&&QKe({target:"Object",proto:!0,forced:e7e},{__defineGetter__:function(t,r){n7e.f(r7e(this),t,{get:t7e(r),enumerable:!0,configurable:!0})}})});var zte=I(()=>{"use strict";var i7e=J(),o7e=vt(),Fte=$E().f;i7e({target:"Object",stat:!0,forced:Object.defineProperties!==Fte,sham:!o7e},{defineProperties:Fte})});var Bte=I(()=>{"use strict";var a7e=J(),s7e=vt(),jte=kr().f;a7e({target:"Object",stat:!0,forced:Object.defineProperty!==jte,sham:!s7e},{defineProperty:jte})});var Ute=I(()=>{"use strict";var l7e=J(),u7e=vt(),c7e=j0(),h7e=Pt(),f7e=Gt(),p7e=kr();u7e&&l7e({target:"Object",proto:!0,forced:c7e},{__defineSetter__:function(t,r){p7e.f(f7e(this),t,{set:h7e(r),enumerable:!0,configurable:!0})}})});var Pk=I((GGt,Wte)=>{"use strict";var $te=vt(),d7e=Ye(),Gte=Ze(),m7e=ei(),v7e=mp(),g7e=Qn(),y7e=X_().f,Zte=Gte(y7e),_7e=Gte([].push),x7e=$te&&d7e(function(){var e=Object.create(null);return e[2]=2,!Zte(e,2)}),Vte=function(e){return function(t){for(var r=g7e(t),n=v7e(r),i=x7e&&m7e(r)===null,o=n.length,f=0,v=[],x;o>f;)x=n[f++],(!$te||(i?x in r:Zte(r,x)))&&_7e(v,e?[x,r[x]]:r[x]);return v}};Wte.exports={entries:Vte(!0),values:Vte(!1)}});var Hte=I(()=>{"use strict";var b7e=J(),w7e=Pk().entries;b7e({target:"Object",stat:!0},{entries:function(t){return w7e(t)}})});var Kte=I(()=>{"use strict";var E7e=J(),T7e=Bu(),S7e=Ye(),I7e=bt(),C7e=Mh().onFreeze,Mk=Object.freeze,P7e=S7e(function(){Mk(1)});E7e({target:"Object",stat:!0,forced:P7e,sham:!T7e},{freeze:function(t){return Mk&&I7e(t)?Mk(C7e(t)):t}})});var Yte=I(()=>{"use strict";var M7e=J(),A7e=pn(),q7e=us();M7e({target:"Object",stat:!0},{fromEntries:function(t){var r={};return A7e(t,function(n,i){q7e(r,n,i)},{AS_ENTRIES:!0}),r}})});var Jte=I(()=>{"use strict";var R7e=J(),O7e=Ye(),L7e=Qn(),Xte=Pi().f,Qte=vt(),D7e=!Qte||O7e(function(){Xte(1)});R7e({target:"Object",stat:!0,forced:D7e,sham:!Qte},{getOwnPropertyDescriptor:function(t,r){return Xte(L7e(t),r)}})});var ere=I(()=>{"use strict";var k7e=J(),N7e=vt(),F7e=jE(),z7e=Qn(),j7e=Pi(),B7e=us();k7e({target:"Object",stat:!0,sham:!N7e},{getOwnPropertyDescriptors:function(t){for(var r=z7e(t),n=j7e.f,i=F7e(r),o={},f=0,v,x;i.length>f;)x=n(r,v=i[f++]),x!==void 0&&B7e(o,v,x);return o}})});var tre=I(()=>{"use strict";var U7e=J(),V7e=Ye(),$7e=WE().f,G7e=V7e(function(){return!Object.getOwnPropertyNames(1)});U7e({target:"Object",stat:!0,forced:G7e},{getOwnPropertyNames:$7e})});var nre=I(()=>{"use strict";var Z7e=J(),W7e=Ye(),H7e=Gt(),rre=ei(),K7e=aT(),Y7e=W7e(function(){rre(1)});Z7e({target:"Object",stat:!0,forced:Y7e,sham:!K7e},{getPrototypeOf:function(t){return rre(H7e(t))}})});var Ak=I(()=>{"use strict";var X7e=J(),Q7e=Ct(),J7e=Ze(),eYe=Pt(),tYe=zr(),rYe=Il(),nYe=pn(),iYe=Ye(),ire=Object.groupBy,oYe=Q7e("Object","create"),aYe=J7e([].push),sYe=!ire||iYe(function(){return ire("ab",function(e){return e}).a.length!==1});X7e({target:"Object",stat:!0,forced:sYe},{groupBy:function(t,r){tYe(t),eYe(r);var n=oYe(null),i=0;return nYe(t,function(o){var f=rYe(r(o,i++));f in n?aYe(n[f],o):n[f]=[o]}),n}})});var qk=I(()=>{"use strict";var lYe=J(),uYe=jt();lYe({target:"Object",stat:!0},{hasOwn:uYe})});var YT=I((cZt,ore)=>{"use strict";ore.exports=Object.is||function(t,r){return t===r?t!==0||1/t===1/r:t!==t&&r!==r}});var are=I(()=>{"use strict";var cYe=J(),hYe=YT();cYe({target:"Object",stat:!0},{is:hYe})});var lre=I(()=>{"use strict";var fYe=J(),sre=jT();fYe({target:"Object",stat:!0,forced:Object.isExtensible!==sre},{isExtensible:sre})});var cre=I(()=>{"use strict";var pYe=J(),dYe=Ye(),mYe=bt(),vYe=Zi(),ure=FT(),Rk=Object.isFrozen,gYe=ure||dYe(function(){Rk(1)});pYe({target:"Object",stat:!0,forced:gYe},{isFrozen:function(t){return!mYe(t)||ure&&vYe(t)==="ArrayBuffer"?!0:Rk?Rk(t):!1}})});var fre=I(()=>{"use strict";var yYe=J(),_Ye=Ye(),xYe=bt(),bYe=Zi(),hre=FT(),Ok=Object.isSealed,wYe=hre||_Ye(function(){Ok(1)});yYe({target:"Object",stat:!0,forced:wYe},{isSealed:function(t){return!xYe(t)||hre&&bYe(t)==="ArrayBuffer"?!0:Ok?Ok(t):!1}})});var dre=I(()=>{"use strict";var EYe=J(),TYe=Gt(),pre=mp(),SYe=Ye(),IYe=SYe(function(){pre(1)});EYe({target:"Object",stat:!0,forced:IYe},{keys:function(t){return pre(TYe(t))}})});var mre=I(()=>{"use strict";var CYe=J(),PYe=vt(),MYe=j0(),AYe=Gt(),qYe=Il(),RYe=ei(),OYe=Pi().f;PYe&&CYe({target:"Object",proto:!0,forced:MYe},{__lookupGetter__:function(t){var r=AYe(this),n=qYe(t),i;do if(i=OYe(r,n))return i.get;while(r=RYe(r))}})});var vre=I(()=>{"use strict";var LYe=J(),DYe=vt(),kYe=j0(),NYe=Gt(),FYe=Il(),zYe=ei(),jYe=Pi().f;DYe&&LYe({target:"Object",proto:!0,forced:kYe},{__lookupSetter__:function(t){var r=NYe(this),n=FYe(t),i;do if(i=jYe(r,n))return i.set;while(r=zYe(r))}})});var gre=I(()=>{"use strict";var BYe=J(),UYe=bt(),VYe=Mh().onFreeze,$Ye=Bu(),GYe=Ye(),Lk=Object.preventExtensions,ZYe=GYe(function(){Lk(1)});BYe({target:"Object",stat:!0,forced:ZYe,sham:!$Ye},{preventExtensions:function(t){return Lk&&UYe(t)?Lk(VYe(t)):t}})});var wre=I(()=>{"use strict";var WYe=vt(),HYe=Yr(),KYe=bt(),YYe=MO(),XYe=Gt(),QYe=zr(),yre=Object.getPrototypeOf,_re=Object.setPrototypeOf,xre=Object.prototype,bre="__proto__";if(WYe&&yre&&_re&&!(bre in xre))try{HYe(xre,bre,{configurable:!0,get:function(){return yre(XYe(this))},set:function(t){var r=QYe(this);YYe(t)&&KYe(r)&&_re(r,t)}})}catch(e){}});var Ere=I(()=>{"use strict";var JYe=J(),eXe=bt(),tXe=Mh().onFreeze,rXe=Bu(),nXe=Ye(),Dk=Object.seal,iXe=nXe(function(){Dk(1)});JYe({target:"Object",stat:!0,forced:iXe,sham:!rXe},{seal:function(t){return Dk&&eXe(t)?Dk(tXe(t)):t}})});var Tre=I(()=>{"use strict";var oXe=J(),aXe=ls();oXe({target:"Object",stat:!0},{setPrototypeOf:aXe})});var Ire=I((OZt,Sre)=>{"use strict";var sXe=UE(),lXe=No();Sre.exports=sXe?{}.toString:function(){return"[object "+lXe(this)+"]"}});var Cre=I(()=>{"use strict";var uXe=UE(),cXe=br(),hXe=Ire();uXe||cXe(Object.prototype,"toString",hXe,{unsafe:!0})});var Pre=I(()=>{"use strict";var fXe=J(),pXe=Pk().values;fXe({target:"Object",stat:!0},{values:function(t){return pXe(t)}})});var Are=I(()=>{"use strict";var dXe=J(),Mre=_k();dXe({global:!0,forced:parseFloat!==Mre},{parseFloat:Mre})});var Rre=I(()=>{"use strict";var mXe=J(),qre=xk();mXe({global:!0,forced:parseInt!==qre},{parseInt:qre})});var B0=I((UZt,Ore)=>{"use strict";var vXe=Hs(),gXe=ch(),yXe=TypeError;Ore.exports=function(e){if(vXe(e))return e;throw new yXe(gXe(e)+" is not a constructor")}});var U0=I((VZt,Dre)=>{"use strict";var Lre=at(),_Xe=B0(),xXe=sa(),bXe=St(),wXe=bXe("species");Dre.exports=function(e,t){var r=Lre(e).constructor,n;return r===void 0||xXe(n=Lre(r)[wXe])?t:_Xe(n)}});var Fa=I(($Zt,kre)=>{"use strict";var EXe=TypeError;kre.exports=function(e,t){if(e<t)throw new EXe("Not enough arguments");return e}});var kk=I((GZt,Nre)=>{"use strict";var TXe=Us();Nre.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(TXe)});var G0=I((ZZt,Zre)=>{"use strict";var za=nt(),SXe=Hi(),IXe=Mr(),Fre=Ft(),CXe=jt(),Gre=Ye(),zre=oO(),PXe=ua(),jre=e0(),MXe=Fa(),AXe=kk(),qXe=wp(),Uk=za.setImmediate,Vk=za.clearImmediate,RXe=za.process,Nk=za.Dispatch,OXe=za.Function,Bre=za.MessageChannel,LXe=za.String,Fk=0,V0={},Ure="onreadystatechange",$0,Cp,zk,jk;Gre(function(){$0=za.location});var $k=function(e){if(CXe(V0,e)){var t=V0[e];delete V0[e],t()}},Bk=function(e){return function(){$k(e)}},Vre=function(e){$k(e.data)},$re=function(e){za.postMessage(LXe(e),$0.protocol+"//"+$0.host)};(!Uk||!Vk)&&(Uk=function(t){MXe(arguments.length,1);var r=Fre(t)?t:OXe(t),n=PXe(arguments,1);return V0[++Fk]=function(){SXe(r,void 0,n)},Cp(Fk),Fk},Vk=function(t){delete V0[t]},qXe?Cp=function(e){RXe.nextTick(Bk(e))}:Nk&&Nk.now?Cp=function(e){Nk.now(Bk(e))}:Bre&&!AXe?(zk=new Bre,jk=zk.port2,zk.port1.onmessage=Vre,Cp=IXe(jk.postMessage,jk)):za.addEventListener&&Fre(za.postMessage)&&!za.importScripts&&$0&&$0.protocol!=="file:"&&!Gre($re)?(Cp=$re,za.addEventListener("message",Vre,!1)):Ure in jre("script")?Cp=function(e){zre.appendChild(jre("script"))[Ure]=function(){zre.removeChild(this),$k(e)}}:Cp=function(e){setTimeout(Bk(e),0)});Zre.exports={set:Uk,clear:Vk}});var Gk=I((WZt,Hre)=>{"use strict";var Wre=nt(),DXe=vt(),kXe=Object.getOwnPropertyDescriptor;Hre.exports=function(e){if(!DXe)return Wre[e];var t=kXe(Wre,e);return t&&t.value}});var Zk=I((HZt,Yre)=>{"use strict";var Kre=function(){this.head=null,this.tail=null};Kre.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};Yre.exports=Kre});var Qre=I((KZt,Xre)=>{"use strict";var NXe=Us();Xre.exports=/ipad|iphone|ipod/i.test(NXe)&&typeof Pebble!="undefined"});var ene=I((YZt,Jre)=>{"use strict";var FXe=Us();Jre.exports=/web0s(?!.*chrome)/i.test(FXe)});var Qk=I((XZt,ane)=>{"use strict";var sv=nt(),zXe=Gk(),tne=Mr(),Wk=G0().set,jXe=Zk(),BXe=kk(),UXe=Qre(),VXe=ene(),Hk=wp(),rne=sv.MutationObserver||sv.WebKitMutationObserver,nne=sv.document,ine=sv.process,XT=sv.Promise,Xk=zXe("queueMicrotask"),av,Kk,Yk,QT,one;Xk||(Z0=new jXe,W0=function(){var e,t;for(Hk&&(e=ine.domain)&&e.exit();t=Z0.get();)try{t()}catch(r){throw Z0.head&&av(),r}e&&e.enter()},!BXe&&!Hk&&!VXe&&rne&&nne?(Kk=!0,Yk=nne.createTextNode(""),new rne(W0).observe(Yk,{characterData:!0}),av=function(){Yk.data=Kk=!Kk}):!UXe&&XT&&XT.resolve?(QT=XT.resolve(void 0),QT.constructor=XT,one=tne(QT.then,QT),av=function(){one(W0)}):Hk?av=function(){ine.nextTick(W0)}:(Wk=tne(Wk,sv),av=function(){Wk(W0)}),Xk=function(e){Z0.head||av(),Z0.add(e)});var Z0,W0;ane.exports=Xk});var Jk=I((QZt,sne)=>{"use strict";sne.exports=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(r){}}});var Ah=I((JZt,lne)=>{"use strict";lne.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var Pp=I((eWt,une)=>{"use strict";var $Xe=nt();une.exports=$Xe.Promise});var lv=I((tWt,pne)=>{"use strict";var GXe=nt(),H0=Pp(),ZXe=Ft(),WXe=jm(),HXe=t0(),KXe=St(),cne=E0(),YXe=hr(),eN=$s(),hne=H0&&H0.prototype,XXe=KXe("species"),tN=!1,fne=ZXe(GXe.PromiseRejectionEvent),QXe=WXe("Promise",function(){var e=HXe(H0),t=e!==String(H0);if(!t&&eN===66||YXe&&!(hne.catch&&hne.finally))return!0;if(!eN||eN<51||!/native code/.test(e)){var r=new H0(function(o){o(1)}),n=function(o){o(function(){},function(){})},i=r.constructor={};if(i[XXe]=n,tN=r.then(function(){})instanceof n,!tN)return!0}return!t&&(cne==="BROWSER"||cne==="DENO")&&!fne});pne.exports={CONSTRUCTOR:QXe,REJECTION_EVENT:fne,SUBCLASSING:tN}});var Ol=I((rWt,mne)=>{"use strict";var dne=Pt(),JXe=TypeError,eQe=function(e){var t,r;this.promise=new e(function(n,i){if(t!==void 0||r!==void 0)throw new JXe("Bad Promise constructor");t=n,r=i}),this.resolve=dne(t),this.reject=dne(r)};mne.exports.f=function(e){return new eQe(e)}});var Lne=I(()=>{"use strict";var tQe=J(),rQe=hr(),rS=wp(),qh=nt(),fv=it(),vne=br(),gne=ls(),nQe=Fo(),iQe=wh(),oQe=Pt(),tS=Ft(),aQe=bt(),sQe=go(),lQe=U0(),wne=G0().set,aN=Qk(),uQe=Jk(),cQe=Ah(),hQe=Zk(),Ene=vr(),nS=Pp(),sN=lv(),Tne=Ol(),iS="Promise",Sne=sN.CONSTRUCTOR,fQe=sN.REJECTION_EVENT,pQe=sN.SUBCLASSING,rN=Ene.getterFor(iS),dQe=Ene.set,uv=nS&&nS.prototype,Mp=nS,JT=uv,Ine=qh.TypeError,nN=qh.document,lN=qh.process,iN=Tne.f,mQe=iN,vQe=!!(nN&&nN.createEvent&&qh.dispatchEvent),Cne="unhandledrejection",gQe="rejectionhandled",yne=0,Pne=1,yQe=2,uN=1,Mne=2,eS,_ne,_Qe,xne,Ane=function(e){var t;return aQe(e)&&tS(t=e.then)?t:!1},qne=function(e,t){var r=t.value,n=t.state===Pne,i=n?e.ok:e.fail,o=e.resolve,f=e.reject,v=e.domain,x,E,S;try{i?(n||(t.rejection===Mne&&bQe(t),t.rejection=uN),i===!0?x=r:(v&&v.enter(),x=i(r),v&&(v.exit(),S=!0)),x===e.promise?f(new Ine("Promise-chain cycle")):(E=Ane(x))?fv(E,x,o,f):o(x)):f(r)}catch(P){v&&!S&&v.exit(),f(P)}},Rne=function(e,t){e.notified||(e.notified=!0,aN(function(){for(var r=e.reactions,n;n=r.get();)qne(n,e);e.notified=!1,t&&!e.rejection&&xQe(e)}))},One=function(e,t,r){var n,i;vQe?(n=nN.createEvent("Event"),n.promise=t,n.reason=r,n.initEvent(e,!1,!0),qh.dispatchEvent(n)):n={promise:t,reason:r},!fQe&&(i=qh["on"+e])?i(n):e===Cne&&uQe("Unhandled promise rejection",r)},xQe=function(e){fv(wne,qh,function(){var t=e.facade,r=e.value,n=bne(e),i;if(n&&(i=cQe(function(){rS?lN.emit("unhandledRejection",r,t):One(Cne,t,r)}),e.rejection=rS||bne(e)?Mne:uN,i.error))throw i.value})},bne=function(e){return e.rejection!==uN&&!e.parent},bQe=function(e){fv(wne,qh,function(){var t=e.facade;rS?lN.emit("rejectionHandled",t):One(gQe,t,e.value)})},cv=function(e,t,r){return function(n){e(t,n,r)}},hv=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=yQe,Rne(e,!0))},oN=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new Ine("Promise can't be resolved itself");var n=Ane(t);n?aN(function(){var i={done:!1};try{fv(n,t,cv(oN,i,e),cv(hv,i,e))}catch(o){hv(i,o,e)}}):(e.value=t,e.state=Pne,Rne(e,!1))}catch(i){hv({done:!1},i,e)}}};if(Sne&&(Mp=function(t){sQe(this,JT),oQe(t),fv(eS,this);var r=rN(this);try{t(cv(oN,r),cv(hv,r))}catch(n){hv(r,n)}},JT=Mp.prototype,eS=function(t){dQe(this,{type:iS,done:!1,notified:!1,parent:!1,reactions:new hQe,rejection:!1,state:yne,value:null})},eS.prototype=vne(JT,"then",function(t,r){var n=rN(this),i=iN(lQe(this,Mp));return n.parent=!0,i.ok=tS(t)?t:!0,i.fail=tS(r)&&r,i.domain=rS?lN.domain:void 0,n.state===yne?n.reactions.add(i):aN(function(){qne(i,n)}),i.promise}),_ne=function(){var e=new eS,t=rN(e);this.promise=e,this.resolve=cv(oN,t),this.reject=cv(hv,t)},Tne.f=iN=function(e){return e===Mp||e===_Qe?new _ne(e):mQe(e)},!rQe&&tS(nS)&&uv!==Object.prototype)){xne=uv.then,pQe||vne(uv,"then",function(t,r){var n=this;return new Mp(function(i,o){fv(xne,n,i,o)}).then(t,r)},{unsafe:!0});try{delete uv.constructor}catch(e){}gne&&gne(uv,JT)}tQe({global:!0,constructor:!0,wrap:!0,forced:Sne},{Promise:Mp});nQe(Mp,iS,!1,!0);iQe(iS)});var K0=I((oWt,Dne)=>{"use strict";var wQe=Pp(),EQe=g0(),TQe=lv().CONSTRUCTOR;Dne.exports=TQe||!EQe(function(e){wQe.all(e).then(void 0,function(){})})});var kne=I(()=>{"use strict";var SQe=J(),IQe=it(),CQe=Pt(),PQe=Ol(),MQe=Ah(),AQe=pn(),qQe=K0();SQe({target:"Promise",stat:!0,forced:qQe},{all:function(t){var r=this,n=PQe.f(r),i=n.resolve,o=n.reject,f=MQe(function(){var v=CQe(r.resolve),x=[],E=0,S=1;AQe(t,function(P){var q=E++,F=!1;S++,IQe(v,r,P).then(function(K){F||(F=!0,x[q]=K,--S||i(x))},o)}),--S||i(x)});return f.error&&o(f.value),n.promise}})});var Fne=I(()=>{"use strict";var RQe=J(),OQe=hr(),LQe=lv().CONSTRUCTOR,hN=Pp(),DQe=Ct(),kQe=Ft(),NQe=br(),Nne=hN&&hN.prototype;RQe({target:"Promise",proto:!0,forced:LQe,real:!0},{catch:function(e){return this.then(void 0,e)}});!OQe&&kQe(hN)&&(cN=DQe("Promise").prototype.catch,Nne.catch!==cN&&NQe(Nne,"catch",cN,{unsafe:!0}));var cN});var zne=I(()=>{"use strict";var FQe=J(),zQe=it(),jQe=Pt(),BQe=Ol(),UQe=Ah(),VQe=pn(),$Qe=K0();FQe({target:"Promise",stat:!0,forced:$Qe},{race:function(t){var r=this,n=BQe.f(r),i=n.reject,o=UQe(function(){var f=jQe(r.resolve);VQe(t,function(v){zQe(f,r,v).then(n.resolve,i)})});return o.error&&i(o.value),n.promise}})});var jne=I(()=>{"use strict";var GQe=J(),ZQe=Ol(),WQe=lv().CONSTRUCTOR;GQe({target:"Promise",stat:!0,forced:WQe},{reject:function(t){var r=ZQe.f(this),n=r.reject;return n(t),r.promise}})});var fN=I((dWt,Bne)=>{"use strict";var HQe=at(),KQe=bt(),YQe=Ol();Bne.exports=function(e,t){if(HQe(e),KQe(t)&&t.constructor===e)return t;var r=YQe.f(e),n=r.resolve;return n(t),r.promise}});var $ne=I(()=>{"use strict";var XQe=J(),QQe=Ct(),Une=hr(),JQe=Pp(),Vne=lv().CONSTRUCTOR,eJe=fN(),tJe=QQe("Promise"),rJe=Une&&!Vne;XQe({target:"Promise",stat:!0,forced:Une||Vne},{resolve:function(t){return eJe(rJe&&this===tJe?JQe:this,t)}})});var Gne=I(()=>{"use strict";Lne();kne();Fne();zne();jne();$ne()});var pN=I(()=>{"use strict";var nJe=J(),iJe=it(),oJe=Pt(),aJe=Ol(),sJe=Ah(),lJe=pn(),uJe=K0();nJe({target:"Promise",stat:!0,forced:uJe},{allSettled:function(t){var r=this,n=aJe.f(r),i=n.resolve,o=n.reject,f=sJe(function(){var v=oJe(r.resolve),x=[],E=0,S=1;lJe(t,function(P){var q=E++,F=!1;S++,iJe(v,r,P).then(function(K){F||(F=!0,x[q]={status:"fulfilled",value:K},--S||i(x))},function(K){F||(F=!0,x[q]={status:"rejected",reason:K},--S||i(x))})}),--S||i(x)});return f.error&&o(f.value),n.promise}})});var dN=I(()=>{"use strict";var cJe=J(),hJe=it(),fJe=Pt(),pJe=Ct(),dJe=Ol(),mJe=Ah(),vJe=pn(),gJe=K0(),Zne="No one promise resolved";cJe({target:"Promise",stat:!0,forced:gJe},{any:function(t){var r=this,n=pJe("AggregateError"),i=dJe.f(r),o=i.resolve,f=i.reject,v=mJe(function(){var x=fJe(r.resolve),E=[],S=0,P=1,q=!1;vJe(t,function(F){var K=S++,ne=!1;P++,hJe(x,r,F).then(function(Z){ne||q||(q=!0,o(Z))},function(Z){ne||q||(ne=!0,E[K]=Z,--P||f(new n(E,Zne)))})}),--P||f(new n(E,Zne))});return v.error&&f(v.value),i.promise}})});var Yne=I(()=>{"use strict";var yJe=J(),_Je=hr(),oS=Pp(),xJe=Ye(),Hne=Ct(),Kne=Ft(),bJe=U0(),Wne=fN(),wJe=br(),vN=oS&&oS.prototype,EJe=!!oS&&xJe(function(){vN.finally.call({then:function(){}},function(){})});yJe({target:"Promise",proto:!0,real:!0,forced:EJe},{finally:function(e){var t=bJe(this,Hne("Promise")),r=Kne(e);return this.then(r?function(n){return Wne(t,e()).then(function(){return n})}:e,r?function(n){return Wne(t,e()).then(function(){throw n})}:e)}});!_Je&&Kne(oS)&&(mN=Hne("Promise").prototype.finally,vN.finally!==mN&&wJe(vN,"finally",mN,{unsafe:!0}));var mN});var yN=I(()=>{"use strict";var TJe=J(),SJe=nt(),IJe=Hi(),CJe=ua(),PJe=Ol(),MJe=Pt(),Qne=Ah(),gN=SJe.Promise,Xne=!1,AJe=!gN||!gN.try||Qne(function(){gN.try(function(e){Xne=e===8},8)}).error||!Xne;TJe({target:"Promise",stat:!0,forced:AJe},{try:function(e){var t=arguments.length>1?CJe(arguments,1):[],r=PJe.f(this),n=Qne(function(){return IJe(MJe(e),void 0,t)});return(n.error?r.reject:r.resolve)(n.value),r.promise}})});var _N=I(()=>{"use strict";var qJe=J(),RJe=Ol();qJe({target:"Promise",stat:!0},{withResolvers:function(){var t=RJe.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var Jne=I(()=>{"use strict";var OJe=J(),LJe=Hi(),DJe=Pt(),kJe=at(),NJe=Ye(),FJe=!NJe(function(){Reflect.apply(function(){})});OJe({target:"Reflect",stat:!0,forced:FJe},{apply:function(t,r,n){return LJe(DJe(t),r,kJe(n))}})});var aie=I(()=>{"use strict";var zJe=J(),jJe=Ct(),xN=Hi(),BJe=vD(),eie=B0(),UJe=at(),tie=bt(),VJe=An(),nie=Ye(),bN=jJe("Reflect","construct"),$Je=Object.prototype,GJe=[].push,iie=nie(function(){function e(){}return!(bN(function(){},[],e)instanceof e)}),oie=!nie(function(){bN(function(){})}),rie=iie||oie;zJe({target:"Reflect",stat:!0,forced:rie,sham:rie},{construct:function(t,r){eie(t),UJe(r);var n=arguments.length<3?t:eie(arguments[2]);if(oie&&!iie)return bN(t,r,n);if(t===n){switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3])}var i=[null];return xN(GJe,i,r),new(xN(BJe,t,i))}var o=n.prototype,f=VJe(tie(o)?o:$Je),v=xN(t,f,r);return tie(v)?v:f}})});var uie=I(()=>{"use strict";var ZJe=J(),WJe=vt(),sie=at(),HJe=Il(),lie=kr(),KJe=Ye(),YJe=KJe(function(){Reflect.defineProperty(lie.f({},1,{value:1}),1,{value:2})});ZJe({target:"Reflect",stat:!0,forced:YJe,sham:!WJe},{defineProperty:function(t,r,n){sie(t);var i=HJe(r);sie(n);try{return lie.f(t,i,n),!0}catch(o){return!1}}})});var cie=I(()=>{"use strict";var XJe=J(),QJe=at(),JJe=Pi().f;XJe({target:"Reflect",stat:!0},{deleteProperty:function(t,r){var n=JJe(QJe(t),r);return n&&!n.configurable?!1:delete t[r]}})});var wN=I((NWt,fie)=>{"use strict";var hie=jt();fie.exports=function(e){return e!==void 0&&(hie(e,"value")||hie(e,"writable"))}});var die=I(()=>{"use strict";var eet=J(),tet=it(),ret=bt(),net=at(),iet=wN(),oet=Pi(),aet=ei();function pie(e,t){var r=arguments.length<3?e:arguments[2],n,i;if(net(e)===r)return e[t];if(n=oet.f(e,t),n)return iet(n)?n.value:n.get===void 0?void 0:tet(n.get,r);if(ret(i=aet(e)))return pie(i,t,r)}eet({target:"Reflect",stat:!0},{get:pie})});var mie=I(()=>{"use strict";var set=J(),uet=vt(),cet=at(),het=Pi();set({target:"Reflect",stat:!0,sham:!uet},{getOwnPropertyDescriptor:function(t,r){return het.f(cet(t),r)}})});var vie=I(()=>{"use strict";var fet=J(),pet=at(),det=ei(),met=aT();fet({target:"Reflect",stat:!0,sham:!met},{getPrototypeOf:function(t){return det(pet(t))}})});var gie=I(()=>{"use strict";var vet=J();vet({target:"Reflect",stat:!0},{has:function(t,r){return r in t}})});var yie=I(()=>{"use strict";var get=J(),yet=at(),_et=jT();get({target:"Reflect",stat:!0},{isExtensible:function(t){return yet(t),_et(t)}})});var _ie=I(()=>{"use strict";var xet=J(),bet=jE();xet({target:"Reflect",stat:!0},{ownKeys:bet})});var xie=I(()=>{"use strict";var wet=J(),Eet=Ct(),Tet=at(),Iet=Bu();wet({target:"Reflect",stat:!0,sham:!Iet},{preventExtensions:function(t){Tet(t);try{var r=Eet("Object","preventExtensions");return r&&r(t),!0}catch(n){return!1}}})});var Sie=I(()=>{"use strict";var Cet=J(),Pet=it(),Met=at(),bie=bt(),Aet=wN(),qet=Ye(),EN=kr(),wie=Pi(),Ret=ei(),Eie=aa();function Tie(e,t,r){var n=arguments.length<4?e:arguments[3],i=wie.f(Met(e),t),o,f,v;if(!i){if(bie(f=Ret(e)))return Tie(f,t,r,n);i=Eie(0)}if(Aet(i)){if(i.writable===!1||!bie(n))return!1;if(o=wie.f(n,t)){if(o.get||o.set||o.writable===!1)return!1;o.value=r,EN.f(n,t,o)}else EN.f(n,t,Eie(0,r))}else{if(v=i.set,v===void 0)return!1;Pet(v,n,r)}return!0}var Oet=qet(function(){var e=function(){},t=EN.f(new e,"a",{configurable:!0});return Reflect.set(e.prototype,"a",1,t)!==!1});Cet({target:"Reflect",stat:!0,forced:Oet},{set:Tie})});var Cie=I(()=>{"use strict";var Let=J(),Det=at(),ket=AO(),Iie=ls();Iie&&Let({target:"Reflect",stat:!0},{setPrototypeOf:function(t,r){Det(t),ket(r);try{return Iie(t,r),!0}catch(n){return!1}}})});var Pie=I(()=>{"use strict";var Net=J(),Fet=nt(),zet=Fo();Net({global:!0},{Reflect:{}});zet(Fet.Reflect,"Reflect",!0)});var Y0=I((iHt,Mie)=>{"use strict";var jet=bt(),Bet=Zi(),Uet=St(),Vet=Uet("match");Mie.exports=function(e){var t;return jet(e)&&((t=e[Vet])!==void 0?!!t:Bet(e)==="RegExp")}});var aS=I((oHt,Aie)=>{"use strict";var $et=at();Aie.exports=function(){var e=$et(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var pv=I((aHt,Rie)=>{"use strict";var Get=it(),Zet=jt(),Wet=Wi(),Het=aS(),qie=RegExp.prototype;Rie.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in qie)&&!Zet(e,"flags")&&Wet(qie,e)?Get(Het,e):t}});var X0=I((sHt,Oie)=>{"use strict";var TN=Ye(),Ket=nt(),SN=Ket.RegExp,IN=TN(function(){var e=SN("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),Yet=IN||TN(function(){return!SN("a","y").sticky}),Xet=IN||TN(function(){var e=SN("^r","gy");return e.lastIndex=2,e.exec("str")!==null});Oie.exports={BROKEN_CARET:Xet,MISSED_STICKY:Yet,UNSUPPORTED_Y:IN}});var sS=I((lHt,Lie)=>{"use strict";var Qet=Ye(),Jet=nt(),ett=Jet.RegExp;Lie.exports=Qet(function(){var e=ett(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")})});var CN=I((uHt,Die)=>{"use strict";var ttt=Ye(),rtt=nt(),ntt=rtt.RegExp;Die.exports=ttt(function(){var e=ntt("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"})});var Gie=I(()=>{"use strict";var itt=vt(),qN=nt(),Q0=Ze(),ott=jm(),att=vh(),stt=Jn(),ltt=An(),utt=fh().f,kie=Wi(),ctt=Y0(),Nie=At(),htt=pv(),Bie=X0(),ftt=qO(),ptt=br(),dtt=Ye(),mtt=jt(),vtt=vr().enforce,gtt=wh(),ytt=St(),Uie=sS(),Vie=CN(),_tt=ytt("match"),Oh=qN.RegExp,dv=Oh.prototype,xtt=qN.SyntaxError,btt=Q0(dv.exec),lS=Q0("".charAt),Fie=Q0("".replace),zie=Q0("".indexOf),jie=Q0("".slice),wtt=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Ap=/a/g,PN=/a/g,Ett=new Oh(Ap)!==Ap,$ie=Bie.MISSED_STICKY,Ttt=Bie.UNSUPPORTED_Y,Stt=itt&&(!Ett||$ie||Uie||Vie||dtt(function(){return PN[_tt]=!1,Oh(Ap)!==Ap||Oh(PN)===PN||String(Oh(Ap,"i"))!=="/a/i"})),Itt=function(e){for(var t=e.length,r=0,n="",i=!1,o;r<=t;r++){if(o=lS(e,r),o==="\\"){n+=o+lS(e,++r);continue}!i&&o==="."?n+="[\\s\\S]":(o==="["?i=!0:o==="]"&&(i=!1),n+=o)}return n},Ctt=function(e){for(var t=e.length,r=0,n="",i=[],o=ltt(null),f=!1,v=!1,x=0,E="",S;r<=t;r++){if(S=lS(e,r),S==="\\")S+=lS(e,++r);else if(S==="]")f=!1;else if(!f)switch(!0){case S==="[":f=!0;break;case S==="(":if(n+=S,jie(e,r+1,r+3)==="?:")continue;btt(wtt,jie(e,r+1))&&(r+=2,v=!0),x++;continue;case S===">"&&v:if(E===""||mtt(o,E))throw new xtt("Invalid capture group name");o[E]=!0,i[i.length]=[E,x],v=!1,E="";continue}v?E+=S:n+=S}return[n,i]};if(ott("RegExp",Stt)){for(Rh=function(t,r){var n=kie(dv,this),i=ctt(t),o=r===void 0,f=[],v=t,x,E,S,P,q,F;if(!n&&i&&o&&t.constructor===Rh)return t;if((i||kie(dv,t))&&(t=t.source,o&&(r=htt(v))),t=t===void 0?"":Nie(t),r=r===void 0?"":Nie(r),v=t,Uie&&"dotAll"in Ap&&(E=!!r&&zie(r,"s")>-1,E&&(r=Fie(r,/s/g,""))),x=r,$ie&&"sticky"in Ap&&(S=!!r&&zie(r,"y")>-1,S&&Ttt&&(r=Fie(r,/y/g,""))),Vie&&(P=Ctt(t),t=P[0],f=P[1]),q=att(Oh(t,r),n?this:dv,Rh),(E||S||f.length)&&(F=vtt(q),E&&(F.dotAll=!0,F.raw=Rh(Itt(t),x)),S&&(F.sticky=!0),f.length&&(F.groups=f)),t!==v)try{stt(q,"source",v===""?"(?:)":v)}catch(K){}return q},MN=utt(Oh),AN=0;MN.length>AN;)ftt(Rh,Oh,MN[AN++]);dv.constructor=Rh,Rh.prototype=dv,ptt(qN,"RegExp",Rh,{constructor:!0})}var Rh,MN,AN;gtt("RegExp")});var J0=I((fHt,Zie)=>{"use strict";var Ptt=TypeError;Zie.exports=function(e){if(typeof e=="string")return e;throw new Ptt("Argument is not a string")}});var DN=I(()=>{"use strict";var Mtt=J(),ex=Ze(),Att=J0(),qtt=jt(),Wie=M0().start,Rtt=Sp(),Ott=Array,Hie=RegExp.escape,Kie=ex("".charAt),LN=ex("".charCodeAt),Ltt=ex(1.1.toString),Dtt=ex([].join),Xie=/^[0-9a-z]/i,ktt=/^[$()*+./?[\\\]^{|}]/,Ntt=RegExp("^[!\"#%&',\\-:;<=>@`~"+Rtt+"]"),RN=ex(Xie.exec),Yie={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},ON=function(e){var t=Ltt(LN(e,0),16);return t.length<3?"\\x"+Wie(t,2,"0"):"\\u"+Wie(t,4,"0")},Ftt=!Hie||Hie("ab")!=="\\x61b";Mtt({target:"RegExp",stat:!0,forced:Ftt},{escape:function(t){Att(t);for(var r=t.length,n=Ott(r),i=0;i<r;i++){var o=Kie(t,i);if(i===0&&RN(Xie,o))n[i]=ON(o);else if(qtt(Yie,o))n[i]="\\"+Yie[o];else if(RN(ktt,o))n[i]="\\"+o;else if(RN(Ntt,o))n[i]=ON(o);else{var f=LN(o,0);(f&63488)!==55296?n[i]=o:f>=56320||i+1>=r||(LN(t,i+1)&64512)!==56320?n[i]=ON(o):(n[i]=o,n[++i]=Kie(t,i))}}return Dtt(n,"")}})});var Jie=I(()=>{"use strict";var ztt=vt(),jtt=sS(),Btt=Zi(),Utt=Yr(),Vtt=vr().get,Qie=RegExp.prototype,$tt=TypeError;ztt&&jtt&&Utt(Qie,"dotAll",{configurable:!0,get:function(){if(this!==Qie){if(Btt(this)==="RegExp")return!!Vtt(this).dotAll;throw new $tt("Incompatible receiver, RegExp required")}}})});var hS=I((gHt,toe)=>{"use strict";var mv=it(),cS=Ze(),Gtt=At(),Ztt=aS(),Wtt=X0(),Htt=Ru(),Ktt=An(),Ytt=vr().get,Xtt=sS(),Qtt=CN(),Jtt=Htt("native-string-replace",String.prototype.replace),uS=RegExp.prototype.exec,NN=uS,ert=cS("".charAt),trt=cS("".indexOf),rrt=cS("".replace),kN=cS("".slice),FN=function(){var e=/a/,t=/b*/g;return mv(uS,e,"a"),mv(uS,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),eoe=Wtt.BROKEN_CARET,zN=/()??/.exec("")[1]!==void 0,nrt=FN||zN||eoe||Xtt||Qtt;nrt&&(NN=function(t){var r=this,n=Ytt(r),i=Gtt(t),o=n.raw,f,v,x,E,S,P,q;if(o)return o.lastIndex=r.lastIndex,f=mv(NN,o,i),r.lastIndex=o.lastIndex,f;var F=n.groups,K=eoe&&r.sticky,ne=mv(Ztt,r),Z=r.source,W=0,Q=i;if(K&&(ne=rrt(ne,"y",""),trt(ne,"g")===-1&&(ne+="g"),Q=kN(i,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&ert(i,r.lastIndex-1)!==`
`)&&(Z="(?: "+Z+")",Q=" "+Q,W++),v=new RegExp("^(?:"+Z+")",ne)),zN&&(v=new RegExp("^"+Z+"$(?!\\s)",ne)),FN&&(x=r.lastIndex),E=mv(uS,K?v:r,Q),K?E?(E.input=kN(E.input,W),E[0]=kN(E[0],W),E.index=r.lastIndex,r.lastIndex+=E[0].length):r.lastIndex=0:FN&&E&&(r.lastIndex=r.global?E.index+E[0].length:x),zN&&E&&E.length>1&&mv(Jtt,E[0],v,function(){for(S=1;S<arguments.length-2;S++)arguments[S]===void 0&&(E[S]=void 0)}),E&&F)for(E.groups=P=Ktt(null),S=0;S<F.length;S++)q=F[S],P[q[0]]=E[q[1]];return E});toe.exports=NN});var fS=I(()=>{"use strict";var irt=J(),roe=hS();irt({target:"RegExp",proto:!0,forced:/./.exec!==roe},{exec:roe})});var ooe=I(()=>{"use strict";var ort=nt(),art=vt(),srt=Yr(),lrt=aS(),urt=Ye(),noe=ort.RegExp,ioe=noe.prototype,crt=art&&urt(function(){var e=!0;try{noe(".","d")}catch(x){e=!1}var t={},r="",n=e?"dgimsy":"gimsy",i=function(x,E){Object.defineProperty(t,x,{get:function(){return r+=E,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(o.hasIndices="d");for(var f in o)i(f,o[f]);var v=Object.getOwnPropertyDescriptor(ioe,"flags").get.call(t);return v!==n||r!==n});crt&&srt(ioe,"flags",{configurable:!0,get:lrt})});var soe=I(()=>{"use strict";var hrt=vt(),frt=X0().MISSED_STICKY,prt=Zi(),drt=Yr(),mrt=vr().get,aoe=RegExp.prototype,vrt=TypeError;hrt&&frt&&drt(aoe,"sticky",{configurable:!0,get:function(){if(this!==aoe){if(prt(this)==="RegExp")return!!mrt(this).sticky;throw new vrt("Incompatible receiver, RegExp required")}}})});var coe=I(()=>{"use strict";fS();var grt=J(),loe=it(),yrt=Ft(),uoe=at(),_rt=At(),xrt=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),brt=/./.test;grt({target:"RegExp",proto:!0,forced:!xrt},{test:function(e){var t=uoe(this),r=_rt(e),n=t.exec;if(!yrt(n))return loe(brt,t,r);var i=loe(n,t,r);return i===null?!1:(uoe(i),!0)}})});var doe=I(()=>{"use strict";var wrt=fp().PROPER,Ert=br(),Trt=at(),hoe=At(),Srt=Ye(),Irt=pv(),jN="toString",foe=RegExp.prototype,poe=foe[jN],Crt=Srt(function(){return poe.call({source:"a",flags:"b"})!=="/a/b"}),Prt=wrt&&poe.name!==jN;(Crt||Prt)&&Ert(foe,jN,function(){var t=Trt(this),r=hoe(t.source),n=hoe(Irt(t));return"/"+r+"/"+n},{unsafe:!0})});var moe=I(()=>{"use strict";var Mrt=q0(),Art=ok();Mrt("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Art)});var voe=I(()=>{"use strict";moe()});var qi=I((RHt,goe)=>{"use strict";var BN=Ze(),pS=Set.prototype;goe.exports={Set,add:BN(pS.add),has:BN(pS.has),remove:BN(pS.delete),proto:pS}});var Ki=I((OHt,yoe)=>{"use strict";var qrt=qi().has;yoe.exports=function(e){return qrt(e),e}});var Vu=I((LHt,_oe)=>{"use strict";var Rrt=it();_oe.exports=function(e,t,r){for(var n=r?e:e.iterator,i=e.next,o,f;!(o=Rrt(i,n)).done;)if(f=t(o.value),f!==void 0)return f}});var fa=I((DHt,Toe)=>{"use strict";var xoe=Ze(),Ort=Vu(),boe=qi(),Lrt=boe.Set,woe=boe.proto,Drt=xoe(woe.forEach),Eoe=xoe(woe.keys),krt=Eoe(new Lrt).next;Toe.exports=function(e,t,r){return r?Ort({iterator:Eoe(e),next:krt},t):Drt(e,t)}});var dS=I((kHt,Ioe)=>{"use strict";var Soe=qi(),Nrt=fa(),Frt=Soe.Set,zrt=Soe.add;Ioe.exports=function(e){var t=new Frt;return Nrt(e,function(r){zrt(t,r)}),t}});var vv=I((NHt,Coe)=>{"use strict";var jrt=d0(),Brt=qi();Coe.exports=jrt(Brt.proto,"size","get")||function(e){return e.size}});var Lh=I((FHt,Ooe)=>{"use strict";var Poe=Pt(),qoe=at(),Moe=it(),Urt=Kr(),Vrt=ln(),Aoe="Invalid size",$rt=RangeError,Grt=TypeError,Zrt=Math.max,Roe=function(e,t){this.set=e,this.size=Zrt(t,0),this.has=Poe(e.has),this.keys=Poe(e.keys)};Roe.prototype={getIterator:function(){return Vrt(qoe(Moe(this.keys,this.set)))},includes:function(e){return Moe(this.has,this.set,e)}};Ooe.exports=function(e){qoe(e);var t=+e.size;if(t!==t)throw new Grt(Aoe);var r=Urt(t);if(r<0)throw new $rt(Aoe);return new Roe(e,r)}});var UN=I((zHt,koe)=>{"use strict";var Wrt=Ki(),Doe=qi(),Hrt=dS(),Krt=vv(),Yrt=Lh(),Xrt=fa(),Qrt=Vu(),Jrt=Doe.has,Loe=Doe.remove;koe.exports=function(t){var r=Wrt(this),n=Yrt(t),i=Hrt(r);return Krt(r)<=n.size?Xrt(r,function(o){n.includes(o)&&Loe(i,o)}):Qrt(n.getIterator(),function(o){Jrt(r,o)&&Loe(i,o)}),i}});var Dh=I((jHt,zoe)=>{"use strict";var ent=Ct(),Noe=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},Foe=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};zoe.exports=function(e,t){var r=ent("Set");try{new r()[e](Noe(0));try{return new r()[e](Noe(-1)),!1}catch(i){if(!t)return!0;try{return new r()[e](Foe(-1/0)),!1}catch(o){var n=new r;return n.add(1),n.add(2),t(n[e](Foe(1/0)))}}}catch(i){return!1}}});var VN=I(()=>{"use strict";var tnt=J(),rnt=UN(),nnt=Dh(),int=!nnt("difference",function(e){return e.size===0});tnt({target:"Set",proto:!0,real:!0,forced:int},{difference:rnt})});var GN=I((VHt,Boe)=>{"use strict";var ont=Ki(),$N=qi(),ant=vv(),snt=Lh(),lnt=fa(),unt=Vu(),cnt=$N.Set,joe=$N.add,hnt=$N.has;Boe.exports=function(t){var r=ont(this),n=snt(t),i=new cnt;return ant(r)>n.size?unt(n.getIterator(),function(o){hnt(r,o)&&joe(i,o)}):lnt(r,function(o){n.includes(o)&&joe(i,o)}),i}});var ZN=I(()=>{"use strict";var fnt=J(),pnt=Ye(),dnt=GN(),mnt=Dh(),vnt=!mnt("intersection",function(e){return e.size===2&&e.has(1)&&e.has(2)})||pnt(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});fnt({target:"Set",proto:!0,real:!0,forced:vnt},{intersection:dnt})});var WN=I((ZHt,Uoe)=>{"use strict";var gnt=Ki(),ynt=qi().has,_nt=vv(),xnt=Lh(),bnt=fa(),wnt=Vu(),Ent=Ai();Uoe.exports=function(t){var r=gnt(this),n=xnt(t);if(_nt(r)<=n.size)return bnt(r,function(o){if(n.includes(o))return!1},!0)!==!1;var i=n.getIterator();return wnt(i,function(o){if(ynt(r,o))return Ent(i,"normal",!1)})!==!1}});var HN=I(()=>{"use strict";var Tnt=J(),Snt=WN(),Int=Dh(),Cnt=!Int("isDisjointFrom",function(e){return!e});Tnt({target:"Set",proto:!0,real:!0,forced:Cnt},{isDisjointFrom:Snt})});var KN=I((KHt,Voe)=>{"use strict";var Pnt=Ki(),Mnt=vv(),Ant=fa(),qnt=Lh();Voe.exports=function(t){var r=Pnt(this),n=qnt(t);return Mnt(r)>n.size?!1:Ant(r,function(i){if(!n.includes(i))return!1},!0)!==!1}});var YN=I(()=>{"use strict";var Rnt=J(),Ont=KN(),Lnt=Dh(),Dnt=!Lnt("isSubsetOf",function(e){return e});Rnt({target:"Set",proto:!0,real:!0,forced:Dnt},{isSubsetOf:Ont})});var XN=I((QHt,$oe)=>{"use strict";var knt=Ki(),Nnt=qi().has,Fnt=vv(),znt=Lh(),jnt=Vu(),Bnt=Ai();$oe.exports=function(t){var r=knt(this),n=znt(t);if(Fnt(r)<n.size)return!1;var i=n.getIterator();return jnt(i,function(o){if(!Nnt(r,o))return Bnt(i,"normal",!1)})!==!1}});var QN=I(()=>{"use strict";var Unt=J(),Vnt=XN(),$nt=Dh(),Gnt=!$nt("isSupersetOf",function(e){return!e});Unt({target:"Set",proto:!0,real:!0,forced:Gnt},{isSupersetOf:Vnt})});var eF=I((t9t,Goe)=>{"use strict";var Znt=Ki(),JN=qi(),Wnt=dS(),Hnt=Lh(),Knt=Vu(),Ynt=JN.add,Xnt=JN.has,Qnt=JN.remove;Goe.exports=function(t){var r=Znt(this),n=Hnt(t).getIterator(),i=Wnt(r);return Knt(n,function(o){Xnt(r,o)?Qnt(i,o):Ynt(i,o)}),i}});var tF=I(()=>{"use strict";var Jnt=J(),eit=eF(),tit=Dh();Jnt({target:"Set",proto:!0,real:!0,forced:!tit("symmetricDifference")},{symmetricDifference:eit})});var rF=I((i9t,Zoe)=>{"use strict";var rit=Ki(),nit=qi().add,iit=dS(),oit=Lh(),ait=Vu();Zoe.exports=function(t){var r=rit(this),n=oit(t).getIterator(),i=iit(r);return ait(n,function(o){nit(i,o)}),i}});var nF=I(()=>{"use strict";var sit=J(),lit=rF(),uit=Dh();sit({target:"Set",proto:!0,real:!0,forced:!uit("union")},{union:lit})});var Woe=I(()=>{"use strict";var cit=J(),hit=Ze(),fit=zr(),pit=Kr(),dit=At(),mit=Ye(),vit=hit("".charAt),git=mit(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});cit({target:"String",proto:!0,forced:git},{at:function(t){var r=dit(fit(this)),n=r.length,i=pit(t),o=i>=0?i:n+i;return o<0||o>=n?void 0:vit(r,o)}})});var qp=I((u9t,Yoe)=>{"use strict";var iF=Ze(),yit=Kr(),_it=At(),xit=zr(),bit=iF("".charAt),Hoe=iF("".charCodeAt),wit=iF("".slice),Koe=function(e){return function(t,r){var n=_it(xit(t)),i=yit(r),o=n.length,f,v;return i<0||i>=o?e?"":void 0:(f=Hoe(n,i),f<55296||f>56319||i+1===o||(v=Hoe(n,i+1))<56320||v>57343?e?bit(n,i):f:e?wit(n,i,i+2):(f-55296<<10)+(v-56320)+65536)}};Yoe.exports={codeAt:Koe(!1),charAt:Koe(!0)}});var Xoe=I(()=>{"use strict";var Eit=J(),Tit=qp().codeAt;Eit({target:"String",proto:!0},{codePointAt:function(t){return Tit(this,t)}})});var mS=I((f9t,Qoe)=>{"use strict";var Sit=Y0(),Iit=TypeError;Qoe.exports=function(e){if(Sit(e))throw new Iit("The method doesn't accept regular expressions");return e}});var vS=I((p9t,Joe)=>{"use strict";var Cit=St(),Pit=Cit("match");Joe.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[Pit]=!1,"/./"[e](t)}catch(n){}}return!1}});var rae=I(()=>{"use strict";var Mit=J(),Ait=ph(),qit=Pi().f,Rit=la(),eae=At(),Oit=mS(),Lit=zr(),Dit=vS(),kit=hr(),Nit=Ait("".slice),Fit=Math.min,tae=Dit("endsWith"),zit=!kit&&!tae&&!!function(){var e=qit(String.prototype,"endsWith");return e&&!e.writable}();Mit({target:"String",proto:!0,forced:!zit&&!tae},{endsWith:function(t){var r=eae(Lit(this));Oit(t);var n=arguments.length>1?arguments[1]:void 0,i=r.length,o=n===void 0?i:Fit(Rit(n),i),f=eae(t);return Nit(r,o-f.length,o)===f}})});var oF=I(()=>{"use strict";var jit=J(),Bit=Ze(),Uit=Zs(),Vit=RangeError,nae=String.fromCharCode,iae=String.fromCodePoint,$it=Bit([].join),Git=!!iae&&iae.length!==1;jit({target:"String",stat:!0,arity:1,forced:Git},{fromCodePoint:function(t){for(var r=[],n=arguments.length,i=0,o;n>i;){if(o=+arguments[i++],Uit(o,1114111)!==o)throw new Vit(o+" is not a valid code point");r[i]=o<65536?nae(o):nae(((o-=65536)>>10)+55296,o%1024+56320)}return $it(r,"")}})});var aae=I(()=>{"use strict";var Zit=J(),Wit=Ze(),Hit=mS(),Kit=zr(),oae=At(),Yit=vS(),Xit=Wit("".indexOf);Zit({target:"String",proto:!0,forced:!Yit("includes")},{includes:function(t){return!!~Xit(oae(Kit(this)),oae(Hit(t)),arguments.length>1?arguments[1]:void 0)}})});var aF=I(()=>{"use strict";var Qit=J(),Jit=Ze(),eot=zr(),tot=At(),sae=Jit("".charCodeAt);Qit({target:"String",proto:!0},{isWellFormed:function(){for(var t=tot(eot(this)),r=t.length,n=0;n<r;n++){var i=sae(t,n);if((i&63488)===55296&&(i>=56320||++n>=r||(sae(t,n)&64512)!==56320))return!1}return!0}})});var sF=I(()=>{"use strict";var rot=qp().charAt,not=At(),uae=vr(),iot=mT(),lae=mi(),cae="String Iterator",oot=uae.set,aot=uae.getterFor(cae);iot(String,"String",function(e){oot(this,{type:cae,string:not(e),index:0})},function(){var t=aot(this),r=t.string,n=t.index,i;return n>=r.length?lae(void 0,!0):(i=rot(r,n),t.index+=i.length,lae(i,!1))})});var tx=I((T9t,mae)=>{"use strict";fS();var hae=it(),fae=br(),sot=hS(),pae=Ye(),dae=St(),lot=Jn(),uot=dae("species"),lF=RegExp.prototype;mae.exports=function(e,t,r,n){var i=dae(e),o=!pae(function(){var E={};return E[i]=function(){return 7},""[e](E)!==7}),f=o&&!pae(function(){var E=!1,S=/a/;return e==="split"&&(S={},S.constructor={},S.constructor[uot]=function(){return S},S.flags="",S[i]=/./[i]),S.exec=function(){return E=!0,null},S[i](""),!E});if(!o||!f||r){var v=/./[i],x=t(i,""[e],function(E,S,P,q,F){var K=S.exec;return K===sot||K===lF.exec?o&&!F?{done:!0,value:hae(v,S,P,q)}:{done:!0,value:hae(E,P,S,q)}:{done:!1}});fae(String.prototype,e,x[0]),fae(lF,i,x[1])}n&&lot(lF[i],"sham",!0)}});var rx=I((S9t,vae)=>{"use strict";var cot=qp().charAt;vae.exports=function(e,t,r){return t+(r?cot(e,t).length:1)}});var gv=I((I9t,yae)=>{"use strict";var gae=it(),hot=at(),fot=Ft(),pot=Zi(),dot=hS(),mot=TypeError;yae.exports=function(e,t){var r=e.exec;if(fot(r)){var n=gae(r,e,t);return n!==null&&hot(n),n}if(pot(e)==="RegExp")return gae(dot,e,t);throw new mot("RegExp#exec called on incompatible receiver")}});var xae=I(()=>{"use strict";var vot=it(),got=tx(),yot=at(),_ot=bt(),xot=la(),uF=At(),bot=zr(),wot=Mn(),Eot=rx(),_ae=gv();got("match",function(e,t,r){return[function(i){var o=bot(this),f=_ot(i)?wot(i,e):void 0;return f?vot(f,i,o):new RegExp(i)[e](uF(o))},function(n){var i=yot(this),o=uF(n),f=r(t,i,o);if(f.done)return f.value;if(!i.global)return _ae(i,o);var v=i.unicode;i.lastIndex=0;for(var x=[],E=0,S;(S=_ae(i,o))!==null;){var P=uF(S[0]);x[E]=P,P===""&&(i.lastIndex=Eot(o,xot(i.lastIndex),v)),E++}return E===0?null:x}]})});var dF=I(()=>{"use strict";var Tot=J(),bae=it(),Tae=ph(),Sot=xh(),gS=mi(),wae=zr(),Sae=la(),nx=At(),Iot=at(),Cot=bt(),Pot=Zi(),Mot=Y0(),Iae=pv(),Aot=Mn(),qot=br(),Rot=Ye(),Oot=St(),Lot=U0(),Dot=rx(),kot=gv(),Cae=vr(),hF=hr(),yS=Oot("matchAll"),Pae="RegExp String",Mae=Pae+" Iterator",Not=Cae.set,Fot=Cae.getterFor(Mae),Eae=RegExp.prototype,zot=TypeError,fF=Tae("".indexOf),_S=Tae("".matchAll),cF=!!_S&&!Rot(function(){_S("a",/./)}),jot=Sot(function(t,r,n,i){Not(this,{type:Mae,regexp:t,string:r,global:n,unicode:i,done:!1})},Pae,function(){var t=Fot(this);if(t.done)return gS(void 0,!0);var r=t.regexp,n=t.string,i=kot(r,n);return i===null?(t.done=!0,gS(void 0,!0)):t.global?(nx(i[0])===""&&(r.lastIndex=Dot(n,Sae(r.lastIndex),t.unicode)),gS(i,!1)):(t.done=!0,gS(i,!1))}),pF=function(e){var t=Iot(this),r=nx(e),n=Lot(t,RegExp),i=nx(Iae(t)),o,f,v;return o=new n(n===RegExp?t.source:t,i),f=!!~fF(i,"g"),v=!!~fF(i,"u"),o.lastIndex=Sae(t.lastIndex),new jot(o,r,f,v)};Tot({target:"String",proto:!0,forced:cF},{matchAll:function(t){var r=wae(this),n,i,o,f;if(Cot(t)){if(Mot(t)&&(n=nx(wae(Iae(t))),!~fF(n,"g")))throw new zot("`.matchAll` does not allow non-global regexes");if(cF)return _S(r,t);if(o=Aot(t,yS),o===void 0&&hF&&Pot(t)==="RegExp"&&(o=pF),o)return bae(o,t,r)}else if(cF)return _S(r,t);return i=nx(r),f=new RegExp(t,"g"),hF?bae(pF,f,i):f[yS](i)}});hF||yS in Eae||qot(Eae,yS,pF)});var mF=I((q9t,Aae)=>{"use strict";var Bot=Us();Aae.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(Bot)});var qae=I(()=>{"use strict";var Uot=J(),Vot=M0().end,$ot=mF();Uot({target:"String",proto:!0,forced:$ot},{padEnd:function(t){return Vot(this,t,arguments.length>1?arguments[1]:void 0)}})});var Rae=I(()=>{"use strict";var Got=J(),Zot=M0().start,Wot=mF();Got({target:"String",proto:!0,forced:Wot},{padStart:function(t){return Zot(this,t,arguments.length>1?arguments[1]:void 0)}})});var kae=I(()=>{"use strict";var Hot=J(),Dae=Ze(),Kot=Qn(),Yot=Gt(),Oae=At(),Xot=nr(),Lae=Dae([].push),Qot=Dae([].join);Hot({target:"String",stat:!0},{raw:function(t){var r=Kot(Yot(t).raw),n=Xot(r);if(!n)return"";for(var i=arguments.length,o=[],f=0;;){if(Lae(o,Oae(r[f++])),f===n)return Qot(o,"");f<i&&Lae(o,Oae(arguments[f]))}}})});var Nae=I(()=>{"use strict";var Jot=J(),eat=P0();Jot({target:"String",proto:!0},{repeat:eat})});var _F=I((j9t,Fae)=>{"use strict";var yF=Ze(),tat=Gt(),rat=Math.floor,vF=yF("".charAt),nat=yF("".replace),gF=yF("".slice),iat=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,oat=/\$([$&'`]|\d{1,2})/g;Fae.exports=function(e,t,r,n,i,o){var f=r+e.length,v=n.length,x=oat;return i!==void 0&&(i=tat(i),x=iat),nat(o,x,function(E,S){var P;switch(vF(S,0)){case"$":return"$";case"&":return e;case"`":return gF(t,0,r);case"'":return gF(t,f);case"<":P=i[gF(S,1,-1)];break;default:var q=+S;if(q===0)return E;if(q>v){var F=rat(q/10);return F===0?E:F<=v?n[F-1]===void 0?vF(S,1):n[F-1]+vF(S,1):E}P=n[q-1]}return P===void 0?"":P})}});var Vae=I(()=>{"use strict";var aat=Hi(),zae=it(),xS=Ze(),sat=tx(),lat=Ye(),uat=at(),cat=Ft(),hat=bt(),fat=Kr(),pat=la(),yv=At(),dat=zr(),mat=rx(),vat=Mn(),gat=_F(),yat=gv(),_at=St(),bF=_at("replace"),xat=Math.max,bat=Math.min,wat=xS([].concat),xF=xS([].push),jae=xS("".indexOf),Bae=xS("".slice),Eat=function(e){return e===void 0?e:String(e)},Tat=function(){return"a".replace(/./,"$0")==="$0"}(),Uae=function(){return /./[bF]?/./[bF]("a","$0")==="":!1}(),Sat=!lat(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});sat("replace",function(e,t,r){var n=Uae?"$":"$0";return[function(o,f){var v=dat(this),x=hat(o)?vat(o,bF):void 0;return x?zae(x,o,v,f):zae(t,yv(v),o,f)},function(i,o){var f=uat(this),v=yv(i);if(typeof o=="string"&&jae(o,n)===-1&&jae(o,"$<")===-1){var x=r(t,f,v,o);if(x.done)return x.value}var E=cat(o);E||(o=yv(o));var S=f.global,P;S&&(P=f.unicode,f.lastIndex=0);for(var q=[],F;F=yat(f,v),!(F===null||(xF(q,F),!S));){var K=yv(F[0]);K===""&&(f.lastIndex=mat(v,pat(f.lastIndex),P))}for(var ne="",Z=0,W=0;W<q.length;W++){F=q[W];for(var Q=yv(F[0]),le=xat(bat(fat(F.index),v.length),0),ce=[],ze,Le=1;Le<F.length;Le++)xF(ce,Eat(F[Le]));var Be=F.groups;if(E){var et=wat([Q],ce,le,v);Be!==void 0&&xF(et,Be),ze=yv(aat(o,void 0,et))}else ze=gat(Q,v,le,ce,Be,o);le>=Z&&(ne+=Bae(v,Z,le)+ze,Z=le+Q.length)}return ne+Bae(v,Z)}]},!Sat||!Tat||Uae)});var TF=I(()=>{"use strict";var Iat=J(),Cat=it(),EF=Ze(),$ae=zr(),Pat=Ft(),Mat=bt(),Aat=Y0(),_v=At(),qat=Mn(),Rat=pv(),Oat=_F(),Lat=St(),Dat=hr(),kat=Lat("replace"),Nat=TypeError,wF=EF("".indexOf),Fat=EF("".replace),Gae=EF("".slice),zat=Math.max;Iat({target:"String",proto:!0},{replaceAll:function(t,r){var n=$ae(this),i,o,f,v,x,E,S,P,q,F,K=0,ne="";if(Mat(t)){if(i=Aat(t),i&&(o=_v($ae(Rat(t))),!~wF(o,"g")))throw new Nat("`.replaceAll` does not allow non-global regexes");if(f=qat(t,kat),f)return Cat(f,t,n,r);if(Dat&&i)return Fat(_v(n),t,r)}for(v=_v(n),x=_v(t),E=Pat(r),E||(r=_v(r)),S=x.length,P=zat(1,S),q=wF(v,x);q!==-1;)F=E?_v(r(x,q,v)):Oat(x,v,q,[],void 0,r),ne+=Gae(v,K,q)+F,K=q+S,q=q+P>v.length?-1:wF(v,x,q+P);return K<v.length&&(ne+=Gae(v,K)),ne}})});var Hae=I(()=>{"use strict";var jat=it(),Bat=tx(),Uat=at(),Vat=bt(),$at=zr(),Zae=YT(),Wae=At(),Gat=Mn(),Zat=gv();Bat("search",function(e,t,r){return[function(i){var o=$at(this),f=Vat(i)?Gat(i,e):void 0;return f?jat(f,i,o):new RegExp(i)[e](Wae(o))},function(n){var i=Uat(this),o=Wae(n),f=r(t,i,o);if(f.done)return f.value;var v=i.lastIndex;Zae(v,0)||(i.lastIndex=0);var x=Zat(i,o);return Zae(i.lastIndex,v)||(i.lastIndex=v),x===null?-1:x.index}]})});var Jae=I(()=>{"use strict";var SF=it(),Qae=Ze(),Wat=tx(),Hat=at(),Kat=bt(),Yat=zr(),Xat=U0(),Qat=rx(),Jat=la(),Kae=At(),est=Mn(),Yae=gv(),tst=X0(),rst=Ye(),xv=tst.UNSUPPORTED_Y,nst=4294967295,ist=Math.min,IF=Qae([].push),CF=Qae("".slice),ost=!rst(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return r.length!==2||r[0]!=="a"||r[1]!=="b"}),Xae="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;Wat("split",function(e,t,r){var n="0".split(void 0,0).length?function(i,o){return i===void 0&&o===0?[]:SF(t,this,i,o)}:t;return[function(o,f){var v=Yat(this),x=Kat(o)?est(o,e):void 0;return x?SF(x,o,v,f):SF(n,Kae(v),o,f)},function(i,o){var f=Hat(this),v=Kae(i);if(!Xae){var x=r(n,f,v,o,n!==t);if(x.done)return x.value}var E=Xat(f,RegExp),S=f.unicode,P=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(xv?"g":"y"),q=new E(xv?"^(?:"+f.source+")":f,P),F=o===void 0?nst:o>>>0;if(F===0)return[];if(v.length===0)return Yae(q,v)===null?[v]:[];for(var K=0,ne=0,Z=[];ne<v.length;){q.lastIndex=xv?0:ne;var W=Yae(q,xv?CF(v,ne):v),Q;if(W===null||(Q=ist(Jat(q.lastIndex+(xv?ne:0)),v.length))===K)ne=Qat(v,ne,S);else{if(IF(Z,CF(v,K,ne)),Z.length===F)return Z;for(var le=1;le<=W.length-1;le++)if(IF(Z,W[le]),Z.length===F)return Z;ne=K=Q}}return IF(Z,CF(v,K)),Z}]},Xae||!ost,xv)});var rse=I(()=>{"use strict";var ast=J(),sst=ph(),lst=Pi().f,ust=la(),ese=At(),cst=mS(),hst=zr(),fst=vS(),pst=hr(),dst=sst("".slice),mst=Math.min,tse=fst("startsWith"),vst=!pst&&!tse&&!!function(){var e=lst(String.prototype,"startsWith");return e&&!e.writable}();ast({target:"String",proto:!0,forced:!vst&&!tse},{startsWith:function(t){var r=ese(hst(this));cst(t);var n=ust(mst(arguments.length>1?arguments[1]:void 0,r.length)),i=ese(t);return dst(r,n,n+i.length)===i}})});var ise=I(()=>{"use strict";var gst=J(),yst=Ze(),_st=zr(),nse=Kr(),xst=At(),bst=yst("".slice),wst=Math.max,Est=Math.min,Tst=!"".substr||"ab".substr(-1)!=="b";gst({target:"String",proto:!0,forced:Tst},{substr:function(t,r){var n=xst(_st(this)),i=n.length,o=nse(t),f,v;return o===1/0&&(o=0),o<0&&(o=wst(i+o,0)),f=r===void 0?i:nse(r),f<=0||f===1/0?"":(v=Est(o+f,i),o>=v?"":bst(n,o,v))}})});var qF=I(()=>{"use strict";var Sst=J(),sse=it(),AF=Ze(),Ist=zr(),Cst=At(),Pst=Ye(),Mst=Array,PF=AF("".charAt),ose=AF("".charCodeAt),Ast=AF([].join),MF="".toWellFormed,qst="\uFFFD",ase=MF&&Pst(function(){return sse(MF,1)!=="1"});Sst({target:"String",proto:!0,forced:ase},{toWellFormed:function(){var t=Cst(Ist(this));if(ase)return sse(MF,t);for(var r=t.length,n=Mst(r),i=0;i<r;i++){var o=ose(t,i);(o&63488)!==55296?n[i]=PF(t,i):o>=56320||i+1>=r||(ose(t,i+1)&64512)!==56320?n[i]=qst:(n[i]=PF(t,i),n[++i]=PF(t,i))}return Ast(n,"")}})});var bS=I((tKt,cse)=>{"use strict";var Rst=fp().PROPER,Ost=Ye(),lse=Sp(),use="\u200B\x85\u180E";cse.exports=function(e){return Ost(function(){return!!lse[e]()||use[e]()!==use||Rst&&lse[e].name!==e})}});var hse=I(()=>{"use strict";var Lst=J(),Dst=Ip().trim,kst=bS();Lst({target:"String",proto:!0,forced:kst("trim")},{trim:function(){return Dst(this)}})});var RF=I((iKt,fse)=>{"use strict";var Nst=Ip().end,Fst=bS();fse.exports=Fst("trimEnd")?function(){return Nst(this)}:"".trimEnd});var dse=I(()=>{"use strict";var zst=J(),pse=RF();zst({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==pse},{trimRight:pse})});var vse=I(()=>{"use strict";dse();var jst=J(),mse=RF();jst({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==mse},{trimEnd:mse})});var OF=I((uKt,gse)=>{"use strict";var Bst=Ip().start,Ust=bS();gse.exports=Ust("trimStart")?function(){return Bst(this)}:"".trimStart});var _se=I(()=>{"use strict";var Vst=J(),yse=OF();Vst({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==yse},{trimLeft:yse})});var bse=I(()=>{"use strict";_se();var $st=J(),xse=OF();$st({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==xse},{trimStart:xse})});var pa=I((dKt,Ese)=>{"use strict";var Gst=Ze(),Zst=zr(),wse=At(),Wst=/"/g,Hst=Gst("".replace);Ese.exports=function(e,t,r,n){var i=wse(Zst(e)),o="<"+t;return r!==""&&(o+=" "+r+"=\""+Hst(wse(n),Wst,"&quot;")+"\""),o+">"+i+"</"+t+">"}});var da=I((mKt,Tse)=>{"use strict";var Kst=Ye();Tse.exports=function(e){return Kst(function(){var t=""[e]("\"");return t!==t.toLowerCase()||t.split("\"").length>3})}});var Sse=I(()=>{"use strict";var Yst=J(),Xst=pa(),Qst=da();Yst({target:"String",proto:!0,forced:Qst("anchor")},{anchor:function(t){return Xst(this,"a","name",t)}})});var Ise=I(()=>{"use strict";var Jst=J(),elt=pa(),tlt=da();Jst({target:"String",proto:!0,forced:tlt("big")},{big:function(){return elt(this,"big","","")}})});var Cse=I(()=>{"use strict";var rlt=J(),nlt=pa(),ilt=da();rlt({target:"String",proto:!0,forced:ilt("blink")},{blink:function(){return nlt(this,"blink","","")}})});var Pse=I(()=>{"use strict";var olt=J(),alt=pa(),slt=da();olt({target:"String",proto:!0,forced:slt("bold")},{bold:function(){return alt(this,"b","","")}})});var Mse=I(()=>{"use strict";var llt=J(),ult=pa(),clt=da();llt({target:"String",proto:!0,forced:clt("fixed")},{fixed:function(){return ult(this,"tt","","")}})});var Ase=I(()=>{"use strict";var hlt=J(),flt=pa(),plt=da();hlt({target:"String",proto:!0,forced:plt("fontcolor")},{fontcolor:function(t){return flt(this,"font","color",t)}})});var qse=I(()=>{"use strict";var dlt=J(),mlt=pa(),vlt=da();dlt({target:"String",proto:!0,forced:vlt("fontsize")},{fontsize:function(t){return mlt(this,"font","size",t)}})});var Rse=I(()=>{"use strict";var glt=J(),ylt=pa(),_lt=da();glt({target:"String",proto:!0,forced:_lt("italics")},{italics:function(){return ylt(this,"i","","")}})});var Ose=I(()=>{"use strict";var xlt=J(),blt=pa(),wlt=da();xlt({target:"String",proto:!0,forced:wlt("link")},{link:function(t){return blt(this,"a","href",t)}})});var Lse=I(()=>{"use strict";var Elt=J(),Tlt=pa(),Slt=da();Elt({target:"String",proto:!0,forced:Slt("small")},{small:function(){return Tlt(this,"small","","")}})});var Dse=I(()=>{"use strict";var Ilt=J(),Clt=pa(),Plt=da();Ilt({target:"String",proto:!0,forced:Plt("strike")},{strike:function(){return Clt(this,"strike","","")}})});var kse=I(()=>{"use strict";var Mlt=J(),Alt=pa(),qlt=da();Mlt({target:"String",proto:!0,forced:qlt("sub")},{sub:function(){return Alt(this,"sub","","")}})});var Nse=I(()=>{"use strict";var Rlt=J(),Olt=pa(),Llt=da();Rlt({target:"String",proto:!0,forced:Llt("sup")},{sup:function(){return Olt(this,"sup","","")}})});var wS=I((UKt,zse)=>{"use strict";var Fse=nt(),LF=Ye(),Dlt=g0(),klt=Ut().NATIVE_ARRAY_BUFFER_VIEWS,Nlt=Fse.ArrayBuffer,Rp=Fse.Int8Array;zse.exports=!klt||!LF(function(){Rp(1)})||!LF(function(){new Rp(-1)})||!Dlt(function(e){new Rp,new Rp(null),new Rp(1.5),new Rp(e)},!0)||LF(function(){return new Rp(new Nlt(2),1,void 0).length!==1})});var DF=I((VKt,jse)=>{"use strict";var Flt=tv(),zlt=RangeError;jse.exports=function(e,t){var r=Flt(e);if(r%t)throw new zlt("Wrong offset");return r}});var kF=I(($Kt,Bse)=>{"use strict";var jlt=Math.round;Bse.exports=function(e){var t=jlt(e);return t<0?0:t>255?255:t&255}});var ES=I((GKt,Use)=>{"use strict";var Blt=No();Use.exports=function(e){var t=Blt(e);return t==="BigInt64Array"||t==="BigUint64Array"}});var ix=I((ZKt,Vse)=>{"use strict";var Ult=J_(),Vlt=TypeError;Vse.exports=function(e){var t=Ult(e,"number");if(typeof t=="number")throw new Vlt("Can't convert number to bigint");return BigInt(t)}});var NF=I((WKt,$se)=>{"use strict";var $lt=Mr(),Glt=it(),Zlt=B0(),Wlt=Gt(),Hlt=nr(),Klt=gh(),Ylt=Pl(),Xlt=sT(),Qlt=ES(),Jlt=Ut().aTypedArrayConstructor,eut=ix();$se.exports=function(t){var r=Zlt(this),n=Wlt(t),i=arguments.length,o=i>1?arguments[1]:void 0,f=o!==void 0,v=Ylt(n),x,E,S,P,q,F,K,ne;if(v&&!Xlt(v))for(K=Klt(n,v),ne=K.next,n=[];!(F=Glt(ne,K)).done;)n.push(F.value);for(f&&i>2&&(o=$lt(o,arguments[2])),E=Hlt(n),S=new(Jlt(r))(E),P=Qlt(S),x=0;E>x;x++)q=f?o(n[x],x):n[x],S[x]=P?eut(q):+q;return S}});var Ll=I((HKt,$F)=>{"use strict";var Gse=J(),rle=nt(),Zse=it(),tut=vt(),rut=wS(),lx=Ut(),nle=C0(),Wse=go(),nut=aa(),ox=Jn(),iut=WT(),out=la(),Hse=Wm(),FF=DF(),aut=kF(),ile=Il(),ax=jt(),sut=No(),BF=bt(),lut=qu(),uut=An(),cut=Wi(),TS=ls(),hut=fh().f,Kse=NF(),fut=qn().forEach,put=wh(),dut=Yr(),ole=kr(),ale=Pi(),Yse=ku(),GF=vr(),mut=vh(),UF=GF.get,vut=GF.set,gut=GF.enforce,sle=ole.f,yut=ale.f,zF=rle.RangeError,lle=nle.ArrayBuffer,_ut=lle.prototype,xut=nle.DataView,SS=lx.NATIVE_ARRAY_BUFFER_VIEWS,Xse=lx.TYPED_ARRAY_TAG,Qse=lx.TypedArray,sx=lx.TypedArrayPrototype,VF=lx.isTypedArray,IS="BYTES_PER_ELEMENT",jF="Wrong length",CS=function(e,t){dut(e,t,{configurable:!0,get:function(){return UF(this)[t]}})},Jse=function(e){var t;return cut(_ut,e)||(t=sut(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},ule=function(e,t){return VF(e)&&!lut(t)&&t in e&&iut(+t)&&t>=0},ele=function(t,r){return r=ile(r),ule(t,r)?nut(2,t[r]):yut(t,r)},tle=function(t,r,n){return r=ile(r),ule(t,r)&&BF(n)&&ax(n,"value")&&!ax(n,"get")&&!ax(n,"set")&&!n.configurable&&(!ax(n,"writable")||n.writable)&&(!ax(n,"enumerable")||n.enumerable)?(t[r]=n.value,t):sle(t,r,n)};tut?(SS||(ale.f=ele,ole.f=tle,CS(sx,"buffer"),CS(sx,"byteOffset"),CS(sx,"byteLength"),CS(sx,"length")),Gse({target:"Object",stat:!0,forced:!SS},{getOwnPropertyDescriptor:ele,defineProperty:tle}),$F.exports=function(e,t,r){var n=e.match(/\d+/)[0]/8,i=e+(r?"Clamped":"")+"Array",o="get"+e,f="set"+e,v=rle[i],x=v,E=x&&x.prototype,S={},P=function(ne,Z){var W=UF(ne);return W.view[o](Z*n+W.byteOffset,!0)},q=function(ne,Z,W){var Q=UF(ne);Q.view[f](Z*n+Q.byteOffset,r?aut(W):W,!0)},F=function(ne,Z){sle(ne,Z,{get:function(){return P(this,Z)},set:function(W){return q(this,Z,W)},enumerable:!0})};SS?rut&&(x=t(function(ne,Z,W,Q){return Wse(ne,E),mut(function(){return BF(Z)?Jse(Z)?Q!==void 0?new v(Z,FF(W,n),Q):W!==void 0?new v(Z,FF(W,n)):new v(Z):VF(Z)?Yse(x,Z):Zse(Kse,x,Z):new v(Hse(Z))}(),ne,x)}),TS&&TS(x,Qse),fut(hut(v),function(ne){ne in x||ox(x,ne,v[ne])}),x.prototype=E):(x=t(function(ne,Z,W,Q){Wse(ne,E);var le=0,ce=0,ze,Le,Be;if(!BF(Z))Be=Hse(Z),Le=Be*n,ze=new lle(Le);else if(Jse(Z)){ze=Z,ce=FF(W,n);var et=Z.byteLength;if(Q===void 0){if(et%n)throw new zF(jF);if(Le=et-ce,Le<0)throw new zF(jF)}else if(Le=out(Q)*n,Le+ce>et)throw new zF(jF);Be=Le/n}else return VF(Z)?Yse(x,Z):Zse(Kse,x,Z);for(vut(ne,{buffer:ze,byteOffset:ce,byteLength:Le,length:Be,view:new xut(ze)});le<Be;)F(ne,le++)}),TS&&TS(x,Qse),E=x.prototype=uut(sx)),E.constructor!==x&&ox(E,"constructor",x),gut(E).TypedArrayConstructor=x,Xse&&ox(E,Xse,i);var K=x!==v;S[i]=x,Gse({global:!0,constructor:!0,forced:K,sham:!SS},S),IS in x||ox(x,IS,n),IS in E||ox(E,IS,n),put(i)}):$F.exports=function(){}});var cle=I(()=>{"use strict";var but=Ll();but("Float32",function(e){return function(r,n,i){return e(this,r,n,i)}})});var hle=I(()=>{"use strict";var wut=Ll();wut("Float64",function(e){return function(r,n,i){return e(this,r,n,i)}})});var fle=I(()=>{"use strict";var Eut=Ll();Eut("Int8",function(e){return function(r,n,i){return e(this,r,n,i)}})});var ple=I(()=>{"use strict";var Tut=Ll();Tut("Int16",function(e){return function(r,n,i){return e(this,r,n,i)}})});var dle=I(()=>{"use strict";var Sut=Ll();Sut("Int32",function(e){return function(r,n,i){return e(this,r,n,i)}})});var mle=I(()=>{"use strict";var Iut=Ll();Iut("Uint8",function(e){return function(r,n,i){return e(this,r,n,i)}})});var vle=I(()=>{"use strict";var Cut=Ll();Cut("Uint8",function(e){return function(r,n,i){return e(this,r,n,i)}},!0)});var gle=I(()=>{"use strict";var Put=Ll();Put("Uint16",function(e){return function(r,n,i){return e(this,r,n,i)}})});var yle=I(()=>{"use strict";var Mut=Ll();Mut("Uint32",function(e){return function(r,n,i){return e(this,r,n,i)}})});var ZF=I(()=>{"use strict";var _le=Ut(),Aut=nr(),qut=Kr(),Rut=_le.aTypedArray,Out=_le.exportTypedArrayMethod;Out("at",function(t){var r=Rut(this),n=Aut(r),i=qut(t),o=i>=0?i:n+i;return o<0||o>=n?void 0:r[o]})});var ble=I(()=>{"use strict";var Lut=Ze(),xle=Ut(),Dut=HO(),kut=Lut(Dut),Nut=xle.aTypedArray,Fut=xle.exportTypedArrayMethod;Fut("copyWithin",function(t,r){return kut(Nut(this),t,r,arguments.length>2?arguments[2]:void 0)})});var Ele=I(()=>{"use strict";var wle=Ut(),zut=qn().every,jut=wle.aTypedArray,But=wle.exportTypedArrayMethod;But("every",function(t){return zut(jut(this),t,arguments.length>1?arguments[1]:void 0)})});var Sle=I(()=>{"use strict";var Tle=Ut(),Uut=hT(),Vut=ix(),$ut=No(),Gut=it(),Zut=Ze(),Wut=Ye(),Hut=Tle.aTypedArray,Kut=Tle.exportTypedArrayMethod,Yut=Zut("".slice),Xut=Wut(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});Kut("fill",function(t){var r=arguments.length;Hut(this);var n=Yut($ut(this),0,3)==="Big"?Vut(t):+t;return Gut(Uut,this,n,r>1?arguments[1]:void 0,r>2?arguments[2]:void 0)},Xut)});var PS=I((b7t,Ile)=>{"use strict";var Qut=ku(),Jut=Ut().getTypedArrayConstructor;Ile.exports=function(e,t){return Qut(Jut(e),t)}});var Ple=I(()=>{"use strict";var Cle=Ut(),ect=qn().filter,tct=PS(),rct=Cle.aTypedArray,nct=Cle.exportTypedArrayMethod;nct("filter",function(t){var r=ect(rct(this),t,arguments.length>1?arguments[1]:void 0);return tct(this,r)})});var Ale=I(()=>{"use strict";var Mle=Ut(),ict=qn().find,oct=Mle.aTypedArray,act=Mle.exportTypedArrayMethod;act("find",function(t){return ict(oct(this),t,arguments.length>1?arguments[1]:void 0)})});var Rle=I(()=>{"use strict";var qle=Ut(),sct=qn().findIndex,lct=qle.aTypedArray,uct=qle.exportTypedArrayMethod;uct("findIndex",function(t){return sct(lct(this),t,arguments.length>1?arguments[1]:void 0)})});var WF=I(()=>{"use strict";var Ole=Ut(),cct=v0().findLast,hct=Ole.aTypedArray,fct=Ole.exportTypedArrayMethod;fct("findLast",function(t){return cct(hct(this),t,arguments.length>1?arguments[1]:void 0)})});var HF=I(()=>{"use strict";var Lle=Ut(),pct=v0().findLastIndex,dct=Lle.aTypedArray,mct=Lle.exportTypedArrayMethod;mct("findLastIndex",function(t){return pct(dct(this),t,arguments.length>1?arguments[1]:void 0)})});var kle=I(()=>{"use strict";var Dle=Ut(),vct=qn().forEach,gct=Dle.aTypedArray,yct=Dle.exportTypedArrayMethod;yct("forEach",function(t){vct(gct(this),t,arguments.length>1?arguments[1]:void 0)})});var Nle=I(()=>{"use strict";var _ct=wS(),xct=Ut().exportTypedArrayStaticMethod,bct=NF();xct("from",bct,_ct)});var zle=I(()=>{"use strict";var Fle=Ut(),wct=zm().includes,Ect=Fle.aTypedArray,Tct=Fle.exportTypedArrayMethod;Tct("includes",function(t){return wct(Ect(this),t,arguments.length>1?arguments[1]:void 0)})});var Ble=I(()=>{"use strict";var jle=Ut(),Sct=zm().indexOf,Ict=jle.aTypedArray,Cct=jle.exportTypedArrayMethod;Cct("indexOf",function(t){return Sct(Ict(this),t,arguments.length>1?arguments[1]:void 0)})});var Zle=I(()=>{"use strict";var Pct=nt(),Mct=Ye(),KF=Ze(),Vle=Ut(),YF=x0(),Act=St(),XF=Act("iterator"),Ule=Pct.Uint8Array,qct=KF(YF.values),Rct=KF(YF.keys),Oct=KF(YF.entries),QF=Vle.aTypedArray,MS=Vle.exportTypedArrayMethod,bv=Ule&&Ule.prototype,AS=!Mct(function(){bv[XF].call([1])}),$le=!!bv&&bv.values&&bv[XF]===bv.values&&bv.values.name==="values",Gle=function(){return qct(QF(this))};MS("entries",function(){return Oct(QF(this))},AS);MS("keys",function(){return Rct(QF(this))},AS);MS("values",Gle,AS||!$le,{name:"values"});MS(XF,Gle,AS||!$le,{name:"values"})});var Hle=I(()=>{"use strict";var Wle=Ut(),Lct=Ze(),Dct=Wle.aTypedArray,kct=Wle.exportTypedArrayMethod,Nct=Lct([].join);kct("join",function(t){return Nct(Dct(this),t)})});var Yle=I(()=>{"use strict";var Kle=Ut(),Fct=Hi(),zct=cL(),jct=Kle.aTypedArray,Bct=Kle.exportTypedArrayMethod;Bct("lastIndexOf",function(t){var r=arguments.length;return Fct(zct,jct(this),r>1?[t,arguments[1]]:[t])})});var Xle=I(()=>{"use strict";var JF=Ut(),Uct=qn().map,Vct=JF.aTypedArray,$ct=JF.getTypedArrayConstructor,Gct=JF.exportTypedArrayMethod;Gct("map",function(t){return Uct(Vct(this),t,arguments.length>1?arguments[1]:void 0,function(r,n){return new($ct(r))(n)})})});var Jle=I(()=>{"use strict";var Qle=Ut(),Zct=wS(),Wct=Qle.aTypedArrayConstructor,Hct=Qle.exportTypedArrayStaticMethod;Hct("of",function(){for(var t=0,r=arguments.length,n=new(Wct(this))(r);r>t;)n[t]=arguments[t++];return n},Zct)});var tue=I(()=>{"use strict";var eue=Ut(),Kct=b0().left,Yct=eue.aTypedArray,Xct=eue.exportTypedArrayMethod;Xct("reduce",function(t){var r=arguments.length;return Kct(Yct(this),t,r,r>1?arguments[1]:void 0)})});var nue=I(()=>{"use strict";var rue=Ut(),Qct=b0().right,Jct=rue.aTypedArray,eht=rue.exportTypedArrayMethod;eht("reduceRight",function(t){var r=arguments.length;return Qct(Jct(this),t,r,r>1?arguments[1]:void 0)})});var oue=I(()=>{"use strict";var iue=Ut(),tht=iue.aTypedArray,rht=iue.exportTypedArrayMethod,nht=Math.floor;rht("reverse",function(){for(var t=this,r=tht(t).length,n=nht(r/2),i=0,o;i<n;)o=t[i],t[i++]=t[--r],t[r]=o;return t})});var hue=I(()=>{"use strict";var sue=nt(),lue=it(),rz=Ut(),iht=nr(),oht=DF(),aht=Gt(),uue=Ye(),sht=sue.RangeError,ez=sue.Int8Array,aue=ez&&ez.prototype,cue=aue&&aue.set,lht=rz.aTypedArray,uht=rz.exportTypedArrayMethod,tz=!uue(function(){var e=new Uint8ClampedArray(2);return lue(cue,e,{length:1,0:3},1),e[1]!==3}),cht=tz&&rz.NATIVE_ARRAY_BUFFER_VIEWS&&uue(function(){var e=new ez(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});uht("set",function(t){lht(this);var r=oht(arguments.length>1?arguments[1]:void 0,1),n=aht(t);if(tz)return lue(cue,this,n,r);var i=this.length,o=iht(n),f=0;if(o+r>i)throw new sht("Wrong length");for(;f<o;)this[r+f]=n[f++]},!tz||cht)});var fue=I(()=>{"use strict";var nz=Ut(),hht=Ye(),fht=ua(),pht=nz.aTypedArray,dht=nz.getTypedArrayConstructor,mht=nz.exportTypedArrayMethod,vht=hht(function(){new Int8Array(1).slice()});mht("slice",function(t,r){for(var n=fht(pht(this),t,r),i=dht(this),o=0,f=n.length,v=new i(f);f>o;)v[o]=n[o++];return v},vht)});var due=I(()=>{"use strict";var pue=Ut(),ght=qn().some,yht=pue.aTypedArray,_ht=pue.exportTypedArrayMethod;_ht("some",function(t){return ght(yht(this),t,arguments.length>1?arguments[1]:void 0)})});var xue=I(()=>{"use strict";var xht=nt(),bht=ph(),iz=Ye(),wht=Pt(),Eht=_T(),_ue=Ut(),mue=pL(),Tht=dL(),vue=$s(),gue=xT(),Sht=_ue.aTypedArray,Iht=_ue.exportTypedArrayMethod,ux=xht.Uint16Array,wv=ux&&bht(ux.prototype.sort),Cht=!!wv&&!(iz(function(){wv(new ux(2),null)})&&iz(function(){wv(new ux(2),{})})),yue=!!wv&&!iz(function(){if(vue)return vue<74;if(mue)return mue<67;if(Tht)return!0;if(gue)return gue<602;var e=new ux(516),t=Array(516),r,n;for(r=0;r<516;r++)n=r%4,e[r]=515-r,t[r]=r-2*n+3;for(wv(e,function(i,o){return(i/4|0)-(o/4|0)}),r=0;r<516;r++)if(e[r]!==t[r])return!0}),Pht=function(e){return function(t,r){return e!==void 0?+e(t,r)||0:r!==r?-1:t!==t?1:t===0&&r===0?1/t>0&&1/r<0?1:-1:t>r}};Iht("sort",function(t){return t!==void 0&&wht(t),yue?wv(this,t):Eht(Sht(this),Pht(t))},!yue||Cht)});var wue=I(()=>{"use strict";var oz=Ut(),Mht=la(),bue=Zs(),Aht=oz.aTypedArray,qht=oz.getTypedArrayConstructor,Rht=oz.exportTypedArrayMethod;Rht("subarray",function(t,r){var n=Aht(this),i=n.length,o=bue(t,i),f=qht(n);return new f(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,Mht((r===void 0?i:bue(r,i))-o))})});var Cue=I(()=>{"use strict";var Oht=nt(),Lht=Hi(),Sue=Ut(),az=Ye(),Eue=ua(),qS=Oht.Int8Array,Tue=Sue.aTypedArray,Dht=Sue.exportTypedArrayMethod,Iue=[].toLocaleString,kht=!!qS&&az(function(){Iue.call(new qS(1))}),Nht=az(function(){return[1,2].toLocaleString()!==new qS([1,2]).toLocaleString()})||!az(function(){qS.prototype.toLocaleString.call([1,2])});Dht("toLocaleString",function(){return Lht(Iue,kht?Eue(Tue(this)):Tue(this),Eue(arguments))},Nht)});var lz=I(()=>{"use strict";var Fht=gL(),sz=Ut(),zht=sz.aTypedArray,jht=sz.exportTypedArrayMethod,Bht=sz.getTypedArrayConstructor;jht("toReversed",function(){return Fht(zht(this),Bht(this))})});var uz=I(()=>{"use strict";var RS=Ut(),Uht=Ze(),Vht=Pt(),$ht=ku(),Ght=RS.aTypedArray,Zht=RS.getTypedArrayConstructor,Wht=RS.exportTypedArrayMethod,Hht=Uht(RS.TypedArrayPrototype.sort);Wht("toSorted",function(t){t!==void 0&&Vht(t);var r=Ght(this),n=$ht(Zht(r),r);return Hht(n,t)})});var Mue=I(()=>{"use strict";var Kht=Ut().exportTypedArrayMethod,Yht=Ye(),Xht=nt(),Qht=Ze(),Pue=Xht.Uint8Array,Jht=Pue&&Pue.prototype||{},OS=[].toString,eft=Qht([].join);Yht(function(){OS.call({})})&&(OS=function(){return eft(this)});var tft=Jht.toString!==OS;Kht("toString",OS,tft)});var hz=I(()=>{"use strict";var rft=wL(),cz=Ut(),nft=ES(),ift=Kr(),oft=ix(),aft=cz.aTypedArray,sft=cz.getTypedArrayConstructor,lft=cz.exportTypedArrayMethod,uft=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return e===8}}();lft("with",function(e,t){var r=aft(this),n=ift(e),i=nft(r)?oft(t):+t;return rft(r,sft(r),n,i)},!uft)});var Lue=I(()=>{"use strict";var cft=J(),fz=Ze(),hft=At(),Aue=String.fromCharCode,que=fz("".charAt),Rue=fz(/./.exec),Oue=fz("".slice),fft=/^[\da-f]{2}$/i,pft=/^[\da-f]{4}$/i;cft({global:!0},{unescape:function(t){for(var r=hft(t),n="",i=r.length,o=0,f,v;o<i;){if(f=que(r,o++),f==="%"){if(que(r,o)==="u"){if(v=Oue(r,o+1,o+5),Rue(pft,v)){n+=Aue(parseInt(v,16)),o+=5;continue}}else if(v=Oue(r,o,o+2),Rue(fft,v)){n+=Aue(parseInt(v,16)),o+=2;continue}}n+=f}return n}})});var mz=I((TYt,jue)=>{"use strict";var dft=Ze(),Due=hs(),LS=Mh().getWeakData,mft=go(),vft=at(),gft=sa(),pz=bt(),yft=pn(),Nue=qn(),kue=jt(),Fue=vr(),_ft=Fue.set,xft=Fue.getterFor,bft=Nue.find,wft=Nue.findIndex,Eft=dft([].splice),Tft=0,DS=function(e){return e.frozen||(e.frozen=new zue)},zue=function(){this.entries=[]},dz=function(e,t){return bft(e.entries,function(r){return r[0]===t})};zue.prototype={get:function(e){var t=dz(this,e);if(t)return t[1]},has:function(e){return!!dz(this,e)},set:function(e,t){var r=dz(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=wft(this.entries,function(r){return r[0]===e});return~t&&Eft(this.entries,t,1),!!~t}};jue.exports={getConstructor:function(e,t,r,n){var i=e(function(x,E){mft(x,o),_ft(x,{type:t,id:Tft++,frozen:null}),gft(E)||yft(E,x[n],{that:x,AS_ENTRIES:r})}),o=i.prototype,f=xft(t),v=function(x,E,S){var P=f(x),q=LS(vft(E),!0);return q===!0?DS(P).set(E,S):q[P.id]=S,x};return Due(o,{delete:function(x){var E=f(this);if(!pz(x))return!1;var S=LS(x);return S===!0?DS(E).delete(x):S&&kue(S,E.id)&&delete S[E.id]},has:function(E){var S=f(this);if(!pz(E))return!1;var P=LS(E);return P===!0?DS(S).has(E):P&&kue(P,S.id)}}),Due(o,r?{get:function(E){var S=f(this);if(pz(E)){var P=LS(E);if(P===!0)return DS(S).get(E);if(P)return P[S.id]}},set:function(E,S){return v(this,E,S)}}:{add:function(E){return v(this,E,!0)}}),i}}});var Hue=I(()=>{"use strict";var Sft=Bu(),Bue=nt(),zS=Ze(),Uue=hs(),Ift=Mh(),Cft=q0(),Vue=mz(),kS=bt(),NS=vr().enforce,Pft=Ye(),Mft=YR(),fx=Object,Aft=Array.isArray,FS=fx.isExtensible,$ue=fx.isFrozen,qft=fx.isSealed,Gue=fx.freeze,Rft=fx.seal,Oft=!Bue.ActiveXObject&&"ActiveXObject"in Bue,cx,Zue=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Wue=Cft("WeakMap",Zue,Vue),Ev=Wue.prototype,jS=zS(Ev.set),Lft=function(){return Sft&&Pft(function(){var e=Gue([]);return jS(new Wue,e,1),!$ue(e)})};Mft&&(Oft?(cx=Vue.getConstructor(Zue,"WeakMap",!0),Ift.enable(),vz=zS(Ev.delete),hx=zS(Ev.has),gz=zS(Ev.get),Uue(Ev,{delete:function(e){if(kS(e)&&!FS(e)){var t=NS(this);return t.frozen||(t.frozen=new cx),vz(this,e)||t.frozen.delete(e)}return vz(this,e)},has:function(t){if(kS(t)&&!FS(t)){var r=NS(this);return r.frozen||(r.frozen=new cx),hx(this,t)||r.frozen.has(t)}return hx(this,t)},get:function(t){if(kS(t)&&!FS(t)){var r=NS(this);return r.frozen||(r.frozen=new cx),hx(this,t)?gz(this,t):r.frozen.get(t)}return gz(this,t)},set:function(t,r){if(kS(t)&&!FS(t)){var n=NS(this);n.frozen||(n.frozen=new cx),hx(this,t)?jS(this,t,r):n.frozen.set(t,r)}else jS(this,t,r);return this}})):Lft()&&Uue(Ev,{set:function(t,r){var n;return Aft(t)&&($ue(t)?n=Gue:qft(t)&&(n=Rft)),jS(this,t,r),n&&n(t),this}}));var vz,hx,gz});var BS=I(()=>{"use strict";Hue()});var Kue=I(()=>{"use strict";var Dft=q0(),kft=mz();Dft("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},kft)});var Yue=I(()=>{"use strict";Kue()});var Xue=I(()=>{"use strict";UO()});var ece=I(()=>{"use strict";var Nft=J(),Fft=nt(),zft=Wi(),Que=ei(),VS=ls(),jft=dp(),Jue=An(),US=Jn(),yz=aa(),Bft=nT(),Uft=_p(),Vft=St(),$ft=Ye(),Gft=hr(),Tv=Fft.SuppressedError,Zft=Vft("toStringTag"),$S=Error,Wft=!!Tv&&Tv.length!==3,Hft=!!Tv&&$ft(function(){return new Tv(1,2,3,{cause:4}).cause===4}),GS=Wft||Hft,Op=function(t,r,n){var i=zft(px,this),o;return VS?o=GS&&(!i||Que(this)===px)?new Tv:VS(new $S,i?Que(this):px):(o=i?this:Jue(px),US(o,Zft,"Error")),n!==void 0&&US(o,"message",Uft(n)),Bft(o,Op,o.stack,1),US(o,"error",t),US(o,"suppressed",r),o};VS?VS(Op,$S):jft(Op,$S,{name:!0});var px=Op.prototype=GS?Tv.prototype:Jue($S.prototype,{constructor:yz(1,Op),message:yz(1,""),name:yz(1,"SuppressedError")});GS&&!Gft&&(px.constructor=Op);Nft({global:!0,constructor:!0,arity:3,forced:GS},{SuppressedError:Op})});var Sv=I((NYt,lce)=>{"use strict";var oce=nt(),ace=Q_(),sce=Ft(),Kft=An(),ZS=ei(),Yft=br(),Xft=St(),Qft=hr(),tce="USE_FUNCTION_CONSTRUCTOR",rce=Xft("asyncIterator"),nce=oce.AsyncIterator,ice=ace.AsyncIteratorPrototype,Dl,_z;if(ice)Dl=ice;else if(sce(nce))Dl=nce.prototype;else if(ace[tce]||oce[tce])try{_z=ZS(ZS(ZS(Function("return async function*(){}()")()))),ZS(_z)===Object.prototype&&(Dl=_z)}catch(e){}Dl?Qft&&(Dl=Kft(Dl)):Dl={};sce(Dl[rce])||Yft(Dl,rce,function(){return this});lce.exports=Dl});var dx=I((FYt,gce)=>{"use strict";var uce=it(),cce=at(),Jft=An(),ept=Mn(),tpt=hs(),pce=vr(),rpt=Ai(),npt=Ct(),ipt=Sv(),dce=mi(),xz=npt("Promise"),mce="AsyncFromSyncIterator",opt=pce.set,hce=pce.getterFor(mce),fce=function(e,t,r,n,i){var o=e.done;xz.resolve(e.value).then(function(f){t(dce(f,o))},function(f){if(!o&&i)try{rpt(n,"throw",f)}catch(v){f=v}r(f)})},vce=function(t){t.type=mce,opt(this,t)};vce.prototype=tpt(Jft(ipt),{next:function(){var t=hce(this);return new xz(function(r,n){var i=cce(uce(t.next,t.iterator));fce(i,r,n,t.iterator,!0)})},return:function(){var e=hce(this).iterator;return new xz(function(t,r){var n=ept(e,"return");if(n===void 0)return t(dce(void 0,!0));var i=cce(uce(n,e));fce(i,t,r,e)})}});gce.exports=vce});var _ce=I((zYt,yce)=>{"use strict";var apt=it(),spt=dx(),lpt=at(),upt=gh(),cpt=ln(),hpt=Mn(),fpt=St(),ppt=fpt("asyncIterator");yce.exports=function(e,t){var r=arguments.length<2?hpt(e,ppt):t;return r?lpt(apt(r,e)):new spt(cpt(upt(e)))}});var Iv=I((jYt,xce)=>{"use strict";var dpt=it(),mpt=Ct(),vpt=Mn();xce.exports=function(e,t,r,n){try{var i=vpt(e,"return");if(i)return mpt("Promise").resolve(dpt(i,e)).then(function(){t(r)},function(o){n(o)})}catch(o){return n(o)}t(r)}});var Lp=I((BYt,bce)=>{"use strict";var gpt=it(),ypt=Pt(),bz=at(),_pt=bt(),xpt=yh(),bpt=Ct(),wpt=ln(),wz=Iv(),mx=function(e){var t=e===0,r=e===1,n=e===2,i=e===3;return function(o,f,v){bz(o);var x=f!==void 0;(x||!t)&&ypt(f);var E=wpt(o),S=bpt("Promise"),P=E.iterator,q=E.next,F=0;return new S(function(K,ne){var Z=function(Q){wz(P,ne,Q,ne)},W=function(){try{if(x)try{xpt(F)}catch(Q){Z(Q)}S.resolve(bz(gpt(q,P))).then(function(Q){try{if(bz(Q).done)t?(v.length=F,K(v)):K(i?!1:n||void 0);else{var le=Q.value;try{if(x){var ce=f(le,F),ze=function(Le){if(r)W();else if(n)Le?W():wz(P,K,!1,ne);else if(t)try{v[F++]=Le,W()}catch(Be){Z(Be)}else Le?wz(P,K,i||le,ne):W()};_pt(ce)?S.resolve(ce).then(ze,Z):ze(ce)}else v[F++]=le,W()}catch(Le){Z(Le)}}}catch(Le){ne(Le)}},ne)}catch(Q){ne(Q)}};W()})}};bce.exports={toArray:mx(0),forEach:mx(1),every:mx(2),some:mx(3),find:mx(4)}});var Ez=I((UYt,Sce)=>{"use strict";var Ept=Mr(),wce=Ze(),Tpt=Gt(),Spt=Hs(),Ipt=_ce(),Cpt=gh(),Ppt=ln(),Mpt=Pl(),Apt=Mn(),qpt=Ct(),Rpt=_L(),Opt=St(),Lpt=dx(),Dpt=Lp().toArray,kpt=Opt("asyncIterator"),Ece=wce(Rpt("Array","values")),Npt=wce(Ece([]).next),Fpt=function(){return new Tce(this)},Tce=function(e){this.iterator=Ece(e)};Tce.prototype.next=function(){return Npt(this.iterator)};Sce.exports=function(t){var r=this,n=arguments.length,i=n>1?arguments[1]:void 0,o=n>2?arguments[2]:void 0;return new(qpt("Promise"))(function(f){var v=Tpt(t);i!==void 0&&(i=Ept(i,o));var x=Apt(v,kpt),E=x?void 0:Mpt(v)||Fpt,S=Spt(r)?new r:[],P=x?Ipt(v,x):new Lpt(Ppt(Cpt(v,E)));f(Dpt(P,i,S))})}});var Cce=I(()=>{"use strict";var zpt=J(),jpt=Ez(),Bpt=Ye(),Ice=Array.fromAsync,Upt=!Ice||Bpt(function(){var e=0;return Ice.call(function(){return e++,[]},{length:0}),e!==1});zpt({target:"Array",stat:!0,forced:Upt},{fromAsync:jpt})});var Pce=I(()=>{"use strict";ZO()});var Mce=I(()=>{"use strict";var Vpt=J(),$pt=qn().filterReject,Gpt=dn();Vpt({target:"Array",proto:!0,forced:!0},{filterOut:function(t){return $pt(this,t,arguments.length>1?arguments[1]:void 0)}});Gpt("filterOut")});var Ace=I(()=>{"use strict";var Zpt=J(),Wpt=qn().filterReject,Hpt=dn();Zpt({target:"Array",proto:!0,forced:!0},{filterReject:function(t){return Wpt(this,t,arguments.length>1?arguments[1]:void 0)}});Hpt("filterReject")});var qce=I(()=>{"use strict";XO()});var Rce=I(()=>{"use strict";QO()});var WS=I((tXt,Oce)=>{"use strict";var Kpt=Mr(),Ypt=Ze(),Xpt=Au(),Qpt=Gt(),Jpt=Il(),edt=nr(),tdt=An(),rdt=ku(),ndt=Array,idt=Ypt([].push);Oce.exports=function(e,t,r,n){for(var i=Qpt(e),o=Xpt(i),f=Kpt(t,r),v=tdt(null),x=edt(o),E=0,S,P,q;x>E;E++)q=o[E],P=Jpt(f(q,E,i)),P in v?idt(v[P],q):v[P]=[q];if(n&&(S=n(i),S!==ndt))for(P in v)v[P]=rdt(S,v[P]);return v}});var Lce=I(()=>{"use strict";var odt=J(),adt=WS(),sdt=dn();odt({target:"Array",proto:!0},{group:function(t){var r=arguments.length>1?arguments[1]:void 0;return adt(this,t,r)}});sdt("group")});var Dce=I(()=>{"use strict";var ldt=J(),udt=WS(),cdt=cs(),hdt=dn();ldt({target:"Array",proto:!0,forced:!cdt("groupBy")},{groupBy:function(t){var r=arguments.length>1?arguments[1]:void 0;return udt(this,t,r)}});hdt("groupBy")});var Tz=I((aXt,kce)=>{"use strict";var fdt=Mr(),pdt=Ze(),ddt=Au(),mdt=Gt(),vdt=nr(),HS=vi(),gdt=HS.Map,ydt=HS.get,_dt=HS.has,xdt=HS.set,bdt=pdt([].push);kce.exports=function(t){for(var r=mdt(this),n=ddt(r),i=fdt(t,arguments.length>1?arguments[1]:void 0),o=new gdt,f=vdt(n),v=0,x,E;f>v;v++)E=n[v],x=i(E,v,r),_dt(o,x)?bdt(ydt(o,x),E):xdt(o,x,[E]);return o}});var Nce=I(()=>{"use strict";var wdt=J(),Edt=cs(),Tdt=dn(),Sdt=Tz(),Idt=hr();wdt({target:"Array",proto:!0,name:"groupToMap",forced:Idt||!Edt("groupByToMap")},{groupByToMap:Sdt});Tdt("groupByToMap")});var Fce=I(()=>{"use strict";var Cdt=J(),Pdt=dn(),Mdt=Tz(),Adt=hr();Cdt({target:"Array",proto:!0,forced:Adt},{groupToMap:Mdt});Pdt("groupToMap")});var Bce=I(()=>{"use strict";var qdt=J(),Rdt=Ws(),zce=Object.isFrozen,jce=function(e,t){if(!zce||!Rdt(e)||!zce(e))return!1;for(var r=0,n=e.length,i;r<n;)if(i=e[r++],!(typeof i=="string"||t&&i===void 0))return!1;return n!==0};qdt({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(t){if(!jce(t,!0))return!1;var r=t.raw;return r.length===t.length&&jce(r,!1)}})});var Uce=I(()=>{"use strict";var Odt=vt(),Ldt=dn(),Ddt=Gt(),kdt=nr(),Ndt=Yr();Odt&&(Ndt(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=Ddt(this),r=kdt(t);return r===0?0:r-1}}),Ldt("lastIndex"))});var Gce=I(()=>{"use strict";var Fdt=vt(),zdt=dn(),Vce=Gt(),$ce=nr(),jdt=Yr();Fdt&&(jdt(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=Vce(this),r=$ce(t);return r===0?void 0:t[r-1]},set:function(t){var r=Vce(this),n=$ce(r);return r[n===0?0:n-1]=t}}),zdt("lastItem"))});var Zce=I(()=>{"use strict";yL()});var Wce=I(()=>{"use strict";xL()});var Hce=I(()=>{"use strict";bL()});var fs=I((EXt,Jce)=>{"use strict";var Kce=Ze(),Bdt=Vu(),Yce=vi(),Udt=Yce.Map,Xce=Yce.proto,Vdt=Kce(Xce.forEach),Qce=Kce(Xce.entries),$dt=Qce(new Udt).next;Jce.exports=function(e,t,r){return r?Bdt({iterator:Qce(e),next:$dt},function(n){return t(n[1],n[0])}):Vdt(e,t)}});var KS=I((TXt,ehe)=>{"use strict";var Gdt=Ze(),Zdt=Pt(),Wdt=sa(),Hdt=nr(),Kdt=Gt(),Sz=vi(),Ydt=fs(),Xdt=Sz.Map,Qdt=Sz.has,Jdt=Sz.set,emt=Gdt([].push);ehe.exports=function(t){var r=Kdt(this),n=Hdt(r),i=[],o=new Xdt,f=Wdt(t)?function(S){return S}:Zdt(t),v,x,E;for(v=0;v<n;v++)x=r[v],E=f(x),Qdt(o,E)||Jdt(o,E,x);return Ydt(o,function(S){emt(i,S)}),i}});var the=I(()=>{"use strict";var tmt=J(),rmt=dn(),nmt=KS();tmt({target:"Array",proto:!0,forced:!0},{uniqueBy:nmt});rmt("uniqueBy")});var rhe=I(()=>{"use strict";EL()});var nhe=I(()=>{"use strict";YL()});var ihe=I(()=>{"use strict";hD()});var ohe=I(()=>{"use strict";fD()});var Cz=I((DXt,che)=>{"use strict";var imt=Ct(),omt=it(),amt=Ze(),smt=Mr(),lmt=at(),umt=Pt(),lhe=sa(),Iz=Mn(),uhe=St(),cmt=uhe("asyncDispose"),ahe=uhe("dispose"),hmt=amt([].push),fmt=function(e,t){if(t==="async-dispose"){var r=Iz(e,cmt);return r!==void 0||(r=Iz(e,ahe),r===void 0)?r:function(){var n=this,i=imt("Promise");return new i(function(o){omt(r,n),o(void 0)})}}return Iz(e,ahe)},she=function(e,t,r){return arguments.length<3&&!lhe(e)&&(r=umt(fmt(lmt(e),t))),r===void 0?function(){}:smt(r,e)};che.exports=function(e,t,r,n){var i;if(arguments.length<4){if(lhe(t)&&r==="sync-dispose")return;i=she(t,r)}else i=she(void 0,r,n);hmt(e.stack,i)}});var yhe=I(()=>{"use strict";var pmt=J(),XS=vt(),dhe=Ct(),hhe=Pt(),dmt=go(),mhe=br(),mmt=hs(),vmt=Yr(),vhe=St(),ghe=vr(),Pz=Cz(),fhe=$s(),phe=dhe("Promise"),gmt=dhe("SuppressedError"),ymt=ReferenceError,_mt=vhe("asyncDispose"),xmt=vhe("toStringTag"),JS="AsyncDisposableStack",bmt=ghe.set,QS=ghe.getterFor(JS),Mz="async-dispose",vx="disposed",wmt="pending",YS=function(e){var t=QS(e);if(t.state===vx)throw new ymt(JS+" already disposed");return t},Az=function(){bmt(dmt(this,Cv),{type:JS,state:wmt,stack:[]}),XS||(this.disposed=!1)},Cv=Az.prototype;mmt(Cv,{disposeAsync:function(){var t=this;return new phe(function(r,n){var i=QS(t);if(i.state===vx)return r(void 0);i.state=vx,XS||(t.disposed=!0);var o=i.stack,f=o.length,v=!1,x,E=function(P){v?x=new gmt(P,x):(v=!0,x=P),S()},S=function(){if(f){var P=o[--f];o[f]=null;try{phe.resolve(P()).then(S,E)}catch(q){E(q)}}else i.stack=null,v?n(x):r(void 0)};S()})},use:function(t){return Pz(YS(this),t,Mz),t},adopt:function(t,r){var n=YS(this);return hhe(r),Pz(n,void 0,Mz,function(){return r(t)}),t},defer:function(t){var r=YS(this);hhe(t),Pz(r,void 0,Mz,t)},move:function(){var t=YS(this),r=new Az;return QS(r).stack=t.stack,t.stack=[],t.state=vx,XS||(this.disposed=!0),r}});XS&&vmt(Cv,"disposed",{configurable:!0,get:function(){return QS(this).state===vx}});mhe(Cv,_mt,Cv.disposeAsync,{name:"disposeAsync"});mhe(Cv,xmt,JS,{nonWritable:!0});var Emt=fhe&&fhe<136;pmt({global:!0,constructor:!0,forced:Emt},{AsyncDisposableStack:Az})});var Ehe=I(()=>{"use strict";var Tmt=J(),Smt=go(),Imt=ei(),xhe=Jn(),bhe=jt(),Cmt=St(),kh=Sv(),whe=hr(),_he=Cmt("toStringTag"),Pmt=TypeError,qz=function(){if(Smt(this,kh),Imt(this)===kh)throw new Pmt("Abstract class AsyncIterator not directly constructable")};qz.prototype=kh;bhe(kh,_he)||xhe(kh,_he,"AsyncIterator");(whe||!bhe(kh,"constructor")||kh.constructor===Object)&&xhe(kh,"constructor",qz);Tmt({global:!0,constructor:!0,forced:whe},{AsyncIterator:qz})});var Dp=I((jXt,qhe)=>{"use strict";var Mmt=it(),eI=Ah(),The=at(),Amt=An(),qmt=Jn(),Rmt=hs(),Omt=St(),Ihe=vr(),Lmt=Ct(),Dmt=Mn(),kmt=Sv(),Rz=mi(),She=Ai(),kl=Lmt("Promise"),Nmt=Omt("toStringTag"),Che="AsyncIteratorHelper",Phe="WrapForValidAsyncIterator",Fmt=Ihe.set,Mhe=function(e){var t=!e,r=Ihe.getterFor(e?Phe:Che),n=function(i){var o=eI(function(){return r(i)}),f=o.error,v=o.value;return f||t&&v.done?{exit:!0,value:f?kl.reject(v):kl.resolve(Rz(void 0,!0))}:{exit:!1,value:v}};return Rmt(Amt(kmt),{next:function(){var o=n(this),f=o.value;if(o.exit)return f;var v=eI(function(){return The(f.nextHandler(kl))}),x=v.error,E=v.value;return x&&(f.done=!0),x?kl.reject(E):kl.resolve(E)},return:function(){var i=n(this),o=i.value;if(i.exit)return o;o.done=!0;var f=o.iterator,v,x,E=eI(function(){if(o.inner)try{She(o.inner.iterator,"normal")}catch(S){return She(f,"throw",S)}return Dmt(f,"return")});return v=x=E.value,E.error?kl.reject(x):v===void 0?kl.resolve(Rz(void 0,!0)):(E=eI(function(){return Mmt(v,f)}),x=E.value,E.error?kl.reject(x):e?kl.resolve(x):kl.resolve(x).then(function(S){return The(S),Rz(void 0,!0)}))}})},zmt=Mhe(!0),Ahe=Mhe(!1);qmt(Ahe,Nmt,"Async Iterator Helper");qhe.exports=function(e,t){var r=function(i,o){o?(o.iterator=i.iterator,o.next=i.next):o=i,o.type=t?Phe:Che,o.nextHandler=e,o.counter=0,o.done=!1,Fmt(this,o)};return r.prototype=t?zmt:Ahe,r}});var Lz=I((BXt,Ohe)=>{"use strict";var jmt=it(),Bmt=Pt(),Oz=at(),Umt=bt(),Vmt=ln(),$mt=Dp(),Rhe=mi(),Gmt=Iv(),Zmt=$mt(function(e){var t=this,r=t.iterator,n=t.mapper;return new e(function(i,o){var f=function(x){t.done=!0,o(x)},v=function(x){Gmt(r,f,x,f)};e.resolve(Oz(jmt(t.next,r))).then(function(x){try{if(Oz(x).done)t.done=!0,i(Rhe(void 0,!0));else{var E=x.value;try{var S=n(E,t.counter++),P=function(q){i(Rhe(q,!1))};Umt(S)?e.resolve(S).then(P,v):P(S)}catch(q){v(q)}}}catch(q){f(q)}},f)})});Ohe.exports=function(t){return Oz(this),Bmt(t),new Zmt(Vmt(this),{mapper:t})}});var Dz=I((UXt,Lhe)=>{"use strict";var Wmt=it(),Hmt=Lz(),Kmt=function(e,t){return[t,e]};Lhe.exports=function(){return Wmt(Hmt,this,Kmt)}});var Dhe=I(()=>{"use strict";var Ymt=J(),Xmt=Dz();Ymt({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:Xmt})});var zhe=I(()=>{"use strict";var Qmt=it(),Jmt=br(),evt=Ct(),tvt=Mn(),rvt=jt(),nvt=St(),khe=Sv(),Nhe=nvt("asyncDispose"),Fhe=evt("Promise");rvt(khe,Nhe)||Jmt(khe,Nhe,function(){var e=this;return new Fhe(function(t,r){var n=tvt(e,"return");n?Fhe.resolve(Qmt(n,e)).then(function(){t(void 0)},r):t(void 0)})})});var Bhe=I(()=>{"use strict";var ivt=J(),ovt=it(),kz=at(),avt=ln(),svt=ev(),lvt=tv(),uvt=Dp(),jhe=mi(),cvt=uvt(function(e){var t=this;return new e(function(r,n){var i=function(f){t.done=!0,n(f)},o=function(){try{e.resolve(kz(ovt(t.next,t.iterator))).then(function(f){try{kz(f).done?(t.done=!0,r(jhe(void 0,!0))):t.remaining?(t.remaining--,o()):r(jhe(f.value,!1))}catch(v){i(v)}},i)}catch(f){i(f)}};o()})});ivt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{drop:function(t){kz(this);var r=lvt(svt(+t));return new cvt(avt(this),{remaining:r})}})});var Uhe=I(()=>{"use strict";var hvt=J(),fvt=Lp().every;hvt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{every:function(t){return fvt(this,t)}})});var $he=I(()=>{"use strict";var pvt=J(),dvt=it(),mvt=Pt(),Nz=at(),vvt=bt(),gvt=ln(),yvt=Dp(),Vhe=mi(),_vt=Iv(),xvt=yvt(function(e){var t=this,r=t.iterator,n=t.predicate;return new e(function(i,o){var f=function(E){t.done=!0,o(E)},v=function(E){_vt(r,f,E,f)},x=function(){try{e.resolve(Nz(dvt(t.next,r))).then(function(E){try{if(Nz(E).done)t.done=!0,i(Vhe(void 0,!0));else{var S=E.value;try{var P=n(S,t.counter++),q=function(F){F?i(Vhe(S,!1)):x()};vvt(P)?e.resolve(P).then(q,v):q(P)}catch(F){v(F)}}}catch(F){f(F)}},f)}catch(E){f(E)}};x()})});pvt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{filter:function(t){return Nz(this),mvt(t),new xvt(gvt(this),{predicate:t})}})});var Ghe=I(()=>{"use strict";var bvt=J(),wvt=Lp().find;bvt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{find:function(t){return wvt(this,t)}})});var Fz=I((tQt,Hhe)=>{"use strict";var Evt=it(),Tvt=Ft(),Zhe=at(),Whe=ln(),Svt=Pl(),Ivt=Mn(),Cvt=St(),Pvt=dx(),Mvt=Cvt("asyncIterator");Hhe.exports=function(e){var t=Zhe(e),r=!0,n=Ivt(t,Mvt),i;return Tvt(n)||(n=Svt(t),r=!1),n!==void 0?i=Evt(n,t):(i=t,r=!0),Zhe(i),Whe(r?i:new Pvt(Whe(i)))}});var Xhe=I(()=>{"use strict";var Avt=J(),Khe=it(),qvt=Pt(),gx=at(),Rvt=bt(),Ovt=ln(),Lvt=Dp(),Yhe=mi(),Dvt=Fz(),kvt=Iv(),Nvt=Lvt(function(e){var t=this,r=t.iterator,n=t.mapper;return new e(function(i,o){var f=function(S){t.done=!0,o(S)},v=function(S){kvt(r,f,S,f)},x=function(){try{e.resolve(gx(Khe(t.next,r))).then(function(S){try{if(gx(S).done)t.done=!0,i(Yhe(void 0,!0));else{var P=S.value;try{var q=n(P,t.counter++),F=function(K){try{t.inner=Dvt(K),E()}catch(ne){v(ne)}};Rvt(q)?e.resolve(q).then(F,v):F(q)}catch(K){v(K)}}}catch(K){f(K)}},f)}catch(S){f(S)}},E=function(){var S=t.inner;if(S)try{e.resolve(gx(Khe(S.next,S.iterator))).then(function(P){try{gx(P).done?(t.inner=null,x()):i(Yhe(P.value,!1))}catch(q){v(q)}},v)}catch(P){v(P)}else x()};E()})});Avt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{flatMap:function(t){return gx(this),qvt(t),new Nvt(Ovt(this),{mapper:t,inner:null})}})});var Qhe=I(()=>{"use strict";var Fvt=J(),zvt=Lp().forEach;Fvt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{forEach:function(t){return zvt(this,t)}})});var zz=I((aQt,Jhe)=>{"use strict";var jvt=it(),Bvt=Dp();Jhe.exports=Bvt(function(){return jvt(this.next,this.iterator)},!0)});var efe=I(()=>{"use strict";var Uvt=J(),Vvt=Gt(),$vt=Wi(),Gvt=Fz(),Zvt=Sv(),Wvt=zz();Uvt({target:"AsyncIterator",stat:!0,forced:!0},{from:function(t){var r=Gvt(typeof t=="string"?Vvt(t):t);return $vt(Zvt,r.iterator)?r.iterator:new Wvt(r)}})});var tfe=I(()=>{"use strict";var Hvt=J(),Kvt=Dz();Hvt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:Kvt})});var rfe=I(()=>{"use strict";var Yvt=J(),Xvt=Lz();Yvt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{map:Xvt})});var nfe=I(()=>{"use strict";var Qvt=J(),Jvt=it(),egt=Pt(),jz=at(),tgt=bt(),rgt=Ct(),ngt=ln(),igt=Iv(),Bz=rgt("Promise"),ogt=TypeError;Qvt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{reduce:function(t){jz(this),egt(t);var r=ngt(this),n=r.iterator,i=r.next,o=arguments.length<2,f=o?void 0:arguments[1],v=0;return new Bz(function(x,E){var S=function(q){igt(n,E,q,E)},P=function(){try{Bz.resolve(jz(Jvt(i,n))).then(function(q){try{if(jz(q).done)o?E(new ogt("Reduce of empty iterator with no initial value")):x(f);else{var F=q.value;if(o)o=!1,f=F,P();else try{var K=t(f,F,v),ne=function(Z){f=Z,P()};tgt(K)?Bz.resolve(K).then(ne,S):ne(K)}catch(Z){S(Z)}}v++}catch(Z){E(Z)}},E)}catch(q){E(q)}};P()})}})});var ife=I(()=>{"use strict";var agt=J(),sgt=Lp().some;agt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{some:function(t){return sgt(this,t)}})});var sfe=I(()=>{"use strict";var lgt=J(),ofe=it(),afe=at(),ugt=ln(),cgt=ev(),hgt=tv(),fgt=Dp(),Uz=mi(),pgt=fgt(function(e){var t=this,r=t.iterator,n;if(!t.remaining--){var i=Uz(void 0,!0);return t.done=!0,n=r.return,n!==void 0?e.resolve(ofe(n,r,void 0)).then(function(){return i}):i}return e.resolve(ofe(t.next,r)).then(function(o){return afe(o).done?(t.done=!0,Uz(void 0,!0)):Uz(o.value,!1)}).then(null,function(o){throw t.done=!0,o})});lgt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{take:function(t){afe(this);var r=hgt(cgt(+t));return new pgt(ugt(this),{remaining:r})}})});var lfe=I(()=>{"use strict";var dgt=J(),mgt=Lp().toArray;dgt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{toArray:function(){return mgt(this,void 0,[])}})});var rI=I((bQt,dfe)=>{"use strict";var cfe=vr(),vgt=xh(),Vz=mi(),ggt=sa(),ygt=bt(),_gt=Yr(),hfe=vt(),yx="Incorrect Iterator.range arguments",Gz="NumericRangeIterator",xgt=cfe.set,ffe=cfe.getterFor(Gz),ufe=RangeError,$z=TypeError,pfe=vgt(function(t,r,n,i,o,f){if(typeof t!=i||r!==1/0&&r!==-1/0&&typeof r!=i)throw new $z(yx);if(t===1/0||t===-1/0)throw new ufe(yx);var v=r>t,x=!1,E;if(n===void 0)E=void 0;else if(ygt(n))E=n.step,x=!!n.inclusive;else if(typeof n==i)E=n;else throw new $z(yx);if(ggt(E)&&(E=v?f:-f),typeof E!=i)throw new $z(yx);if(E===1/0||E===-1/0||E===o&&t!==r)throw new ufe(yx);var S=t!==t||r!==r||E!==E||r>t!=E>o;xgt(this,{type:Gz,start:t,end:r,step:E,inclusive:x,hitsEnd:S,currentCount:o,zero:o}),hfe||(this.start=t,this.end=r,this.step=E,this.inclusive=x)},Gz,function(){var t=ffe(this);if(t.hitsEnd)return Vz(void 0,!0);var r=t.start,n=t.end,i=t.step,o=r+i*t.currentCount++;o===n&&(t.hitsEnd=!0);var f=t.inclusive,v;return n>r?v=f?o>n:o>=n:v=f?n>o:n>=o,v?(t.hitsEnd=!0,Vz(void 0,!0)):Vz(o,!1)}),tI=function(e){_gt(pfe.prototype,e,{get:function(){return ffe(this)[e]},set:function(){},configurable:!0,enumerable:!1})};hfe&&(tI("start"),tI("end"),tI("inclusive"),tI("step"));dfe.exports=pfe});var mfe=I(()=>{"use strict";var bgt=J(),wgt=rI();typeof BigInt=="function"&&bgt({target:"BigInt",stat:!0,forced:!0},{range:function(t,r,n){return new wgt(t,r,n,"bigint",BigInt(0),BigInt(1))}})});var Zz=I((TQt,_fe)=>{"use strict";UT();BS();var yfe=Ct(),Egt=An(),vfe=bt(),Tgt=Object,Sgt=TypeError,Igt=yfe("Map"),Cgt=yfe("WeakMap"),nI=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=Egt(null)};nI.prototype.get=function(e,t){return this[e]||(this[e]=t())};nI.prototype.next=function(e,t,r){var n=r?this.objectsByIndex[e]||(this.objectsByIndex[e]=new Cgt):this.primitives||(this.primitives=new Igt),i=n.get(t);return i||n.set(t,i=new nI),i};var gfe=new nI;_fe.exports=function(){var e=gfe,t=arguments.length,r,n;for(r=0;r<t;r++)vfe(n=arguments[r])&&(e=e.next(r,n,!0));if(this===Tgt&&e===gfe)throw new Sgt("Composite keys must contain a non-primitive component");for(r=0;r<t;r++)vfe(n=arguments[r])||(e=e.next(r,n,!1));return e}});var bfe=I(()=>{"use strict";var Pgt=J(),Mgt=Hi(),Agt=Zz(),qgt=Ct(),xfe=An(),Rgt=Object,Ogt=function(){var e=qgt("Object","freeze");return e?e(xfe(null)):xfe(null)};Pgt({global:!0,forced:!0},{compositeKey:function(){return Mgt(Agt,Rgt,arguments).get("object",Ogt)}})});var Efe=I(()=>{"use strict";var Lgt=J(),Dgt=Zz(),wfe=Ct(),kgt=Hi();Lgt({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?wfe("Symbol").for(arguments[0]):kgt(Dgt,null,arguments).get("symbol",wfe("Symbol"))}})});var Tfe=I(()=>{"use strict";VL()});var Sfe=I(()=>{"use strict";var Ngt=J(),Fgt=Ze(),zgt=Fgt(DataView.prototype.getUint8);Ngt({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(t){return zgt(this,t)}})});var Ife=I(()=>{"use strict";WL()});var Cfe=I(()=>{"use strict";var jgt=J(),Bgt=Ze(),Ugt=$L(),Vgt=Wm(),$gt=kF(),Ggt=Bgt(DataView.prototype.setUint8);jgt({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(t,r){Ugt(this);var n=Vgt(t);return Ggt(this,n,$gt(r))}})});var Rfe=I(()=>{"use strict";var Zgt=J(),oI=vt(),Wgt=Ct(),Pfe=Pt(),Hgt=go(),Mfe=br(),Kgt=hs(),Ygt=Yr(),Afe=St(),qfe=vr(),Wz=Cz(),Xgt=Wgt("SuppressedError"),Qgt=ReferenceError,Jgt=Afe("dispose"),eyt=Afe("toStringTag"),sI="DisposableStack",tyt=qfe.set,aI=qfe.getterFor(sI),Hz="sync-dispose",_x="disposed",ryt="pending",iI=function(e){var t=aI(e);if(t.state===_x)throw new Qgt(sI+" already disposed");return t},Kz=function(){tyt(Hgt(this,Pv),{type:sI,state:ryt,stack:[]}),oI||(this.disposed=!1)},Pv=Kz.prototype;Kgt(Pv,{dispose:function(){var t=aI(this);if(t.state!==_x){t.state=_x,oI||(this.disposed=!0);for(var r=t.stack,n=r.length,i=!1,o;n;){var f=r[--n];r[n]=null;try{f()}catch(v){i?o=new Xgt(v,o):(i=!0,o=v)}}if(t.stack=null,i)throw o}},use:function(t){return Wz(iI(this),t,Hz),t},adopt:function(t,r){var n=iI(this);return Pfe(r),Wz(n,void 0,Hz,function(){r(t)}),t},defer:function(t){var r=iI(this);Pfe(t),Wz(r,void 0,Hz,t)},move:function(){var t=iI(this),r=new Kz;return aI(r).stack=t.stack,t.stack=[],t.state=_x,oI||(this.disposed=!0),r}});oI&&Ygt(Pv,"disposed",{configurable:!0,get:function(){return aI(this).state===_x}});Mfe(Pv,Jgt,Pv.dispose,{name:"dispose"});Mfe(Pv,eyt,sI,{nonWritable:!0});Zgt({global:!0,constructor:!0},{DisposableStack:Kz})});var kfe=I(()=>{"use strict";var nyt=J(),Lfe=Ct(),iyt=bt(),oyt=No(),ayt=Ye(),Dfe="Error",Xz="DOMException",syt=Object.setPrototypeOf||{}.__proto__,Ofe=Lfe(Xz),Yz=Error,lI=Yz.isError,lyt=!lI||!syt||ayt(function(){return Ofe&&!lI(new Ofe(Xz))||!lI(new Yz(Dfe,{cause:function(){}}))||lI(Lfe("Object","create")(Yz.prototype))});nyt({target:"Error",stat:!0,sham:!0,forced:lyt},{isError:function(t){if(!iyt(t))return!1;var r=oyt(t);return r===Dfe||r===Xz}})});var Qz=I((BQt,Nfe)=>{"use strict";var uyt=Ze(),cyt=Pt();Nfe.exports=function(){return uyt(cyt(this))}});var Ffe=I(()=>{"use strict";var hyt=J(),fyt=Qz();hyt({target:"Function",proto:!0,forced:!0},{demethodize:fyt})});var jfe=I(()=>{"use strict";var pyt=J(),dyt=Ze(),myt=Ft(),vyt=t0(),gyt=jt(),yyt=vt(),_yt=Object.getOwnPropertyDescriptor,zfe=/^\s*class\b/,xyt=dyt(zfe.exec),byt=function(e){try{if(!yyt||!xyt(zfe,vyt(e)))return!1}catch(r){}var t=_yt(e,"prototype");return!!t&&gyt(t,"writable")&&!t.writable};pyt({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(t){return myt(t)&&!byt(t)}})});var Bfe=I(()=>{"use strict";var wyt=J(),Eyt=Hs();wyt({target:"Function",stat:!0,forced:!0},{isConstructor:Eyt})});var $fe=I(()=>{"use strict";var Tyt=St(),Syt=kr().f,Ufe=Tyt("metadata"),Vfe=Function.prototype;Vfe[Ufe]===void 0&&Syt(Vfe,Ufe,{value:null})});var Gfe=I(()=>{"use strict";var Iyt=J(),Cyt=Qz();Iyt({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:Cyt})});var Zfe=I(()=>{"use strict";_D()});var Wfe=I(()=>{"use strict";TD()});var Jz=I((rJt,Hfe)=>{"use strict";NT();var Pyt=it(),Myt=_h().IteratorPrototype.map,Ayt=function(e,t){return[t,e]};Hfe.exports=function(){return Pyt(Myt,this,Ayt)}});var Kfe=I(()=>{"use strict";var qyt=J(),Ryt=Jz();qyt({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:Ryt})});var Qfe=I(()=>{"use strict";var Oyt=J(),Yfe=it(),Lyt=Pt(),Xfe=at(),Dyt=Pl(),kyt=Ph(),Nyt=mi(),Fyt=Array,zyt=kyt(function(){for(;;){var e=this.iterator;if(!e){var t=this.nextIterableIndex++,r=this.iterables;if(t>=r.length)return this.done=!0,Nyt(void 0,!0);var n=r[t];this.iterables[t]=null,e=this.iterator=Yfe(n.method,n.iterable),this.next=e.next}var i=Xfe(Yfe(this.next,e));if(i.done){this.iterator=null,this.next=null;continue}return i}},!1,!0);Oyt({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var t=arguments.length,r=Fyt(t),n=0;n<t;n++){var i=Xfe(arguments[n]);r[n]={iterable:i,method:Lyt(Dyt(i))}}return new zyt({iterables:r,nextIterableIndex:0,iterator:null,next:null})}})});var tpe=I(()=>{"use strict";var jyt=it(),Byt=br(),Uyt=Mn(),Vyt=jt(),$yt=St(),Jfe=_h().IteratorPrototype,epe=$yt("dispose");Vyt(Jfe,epe)||Byt(Jfe,epe,function(){var e=Uyt(this,"return");e&&jyt(e,this)})});var rpe=I(()=>{"use strict";MD()});var npe=I(()=>{"use strict";qD()});var ipe=I(()=>{"use strict";OD()});var ope=I(()=>{"use strict";DD()});var ape=I(()=>{"use strict";BD()});var spe=I(()=>{"use strict";VD()});var lpe=I(()=>{"use strict";$D()});var upe=I(()=>{"use strict";var Gyt=J(),Zyt=Jz();Gyt({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:Zyt})});var cpe=I(()=>{"use strict";NT()});var fpe=I(()=>{"use strict";var Wyt=J(),hpe=rI(),Hyt=TypeError;Wyt({target:"Iterator",stat:!0,forced:!0},{range:function(t,r,n){if(typeof t=="number")return new hpe(t,r,n,"number",0,1);if(typeof t=="bigint")return new hpe(t,r,n,"bigint",BigInt(0),BigInt(1));throw new Hyt("Incorrect Iterator.range arguments")}})});var ppe=I(()=>{"use strict";WD()});var dpe=I(()=>{"use strict";KD()});var mpe=I(()=>{"use strict";XD()});var vpe=I(()=>{"use strict";QD()});var ype=I(()=>{"use strict";var Kyt=J(),Yyt=at(),Xyt=dx(),Qyt=zz(),gpe=ln();Kyt({target:"Iterator",proto:!0,real:!0,forced:!0},{toAsync:function(){return new Qyt(gpe(new Xyt(gpe(Yyt(this)))))}})});var ej=I((zJt,_pe)=>{"use strict";var Jyt=Ye();_pe.exports=!Jyt(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})});var tj=I((jJt,xpe)=>{"use strict";var e_t=bt(),t_t=vr().get;xpe.exports=function(t){if(!e_t(t))return!1;var r=t_t(t);return!!r&&r.type==="RawJSON"}});var bpe=I(()=>{"use strict";var r_t=J(),n_t=ej(),i_t=tj();r_t({target:"JSON",stat:!0,forced:!n_t},{isRawJSON:i_t})});var nj=I((VJt,Spe)=>{"use strict";var rj=Ze(),o_t=jt(),uI=SyntaxError,a_t=parseInt,s_t=String.fromCharCode,l_t=rj("".charAt),wpe=rj("".slice),Epe=rj(/./.exec),Tpe={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},u_t=/^[\da-f]{4}$/i,c_t=/^[\u0000-\u001F]$/;Spe.exports=function(e,t){for(var r=!0,n="";t<e.length;){var i=l_t(e,t);if(i==="\\"){var o=wpe(e,t,t+2);if(o_t(Tpe,o))n+=Tpe[o],t+=2;else if(o==="\\u"){t+=2;var f=wpe(e,t,t+4);if(!Epe(u_t,f))throw new uI("Bad Unicode escape at: "+t);n+=s_t(a_t(f,16)),t+=4}else throw new uI("Unknown escape sequence: \""+o+"\"")}else if(i==="\""){r=!1,t++;break}else{if(Epe(c_t,i))throw new uI("Bad control character in string literal at: "+t);n+=i,t++}}if(r)throw new uI("Unterminated string at: "+t);return{value:n,end:t}}});var Ope=I(()=>{"use strict";var h_t=J(),f_t=vt(),hj=nt(),p_t=Ct(),cI=Ze(),d_t=it(),qpe=Ft(),m_t=bt(),v_t=Ws(),g_t=jt(),y_t=At(),Ipe=nr(),lj=us(),Rpe=Ye(),__t=nj(),x_t=uh(),Cpe=hj.JSON,b_t=hj.Number,Mv=hj.SyntaxError,fj=Cpe&&Cpe.parse,w_t=p_t("Object","keys"),E_t=Object.getOwnPropertyDescriptor,Yi=cI("".charAt),ij=cI("".slice),oj=cI(/./.exec),Ppe=cI([].push),aj=/^\d$/,T_t=/^[1-9]$/,S_t=/^[\d-]$/,xx=/^[\t\n\r ]$/,sj=0,Mpe=1,I_t=function(e,t){e=y_t(e);var r=new cj(e,0,""),n=r.parse(),i=n.value,o=r.skip(xx,n.end);if(o<e.length)throw new Mv("Unexpected extra character: \""+Yi(e,o)+"\" after the parsed data at: "+o);return qpe(t)?uj({"":i},"",t,n):i},uj=function(e,t,r,n){var i=e[t],o=n&&i===n.value,f=o&&typeof n.source=="string"?{source:n.source}:{},v,x,E,S,P;if(m_t(i)){var q=v_t(i),F=o?n.nodes:q?[]:{};if(q)for(v=F.length,E=Ipe(i),S=0;S<E;S++)Ape(i,S,uj(i,""+S,r,S<v?F[S]:void 0));else for(x=w_t(i),E=Ipe(x),S=0;S<E;S++)P=x[S],Ape(i,P,uj(i,P,r,g_t(F,P)?F[P]:void 0))}return d_t(r,e,t,i,f)},Ape=function(e,t,r){if(f_t){var n=E_t(e,t);if(n&&!n.configurable)return}r===void 0?delete e[t]:lj(e,t,r)},C_t=function(e,t,r,n){this.value=e,this.end=t,this.source=r,this.nodes=n},cj=function(e,t){this.source=e,this.index=t};cj.prototype={fork:function(e){return new cj(this.source,e)},parse:function(){var e=this.source,t=this.skip(xx,this.index),r=this.fork(t),n=Yi(e,t);if(oj(S_t,n))return r.number();switch(n){case"{":return r.object();case"[":return r.array();case"\"":return r.string();case"t":return r.keyword(!0);case"f":return r.keyword(!1);case"n":return r.keyword(null)}throw new Mv("Unexpected character: \""+n+"\" at: "+t)},node:function(e,t,r,n,i){return new C_t(t,n,e?null:ij(this.source,r,n),i)},object:function(){for(var e=this.source,t=this.index+1,r=!1,n={},i={};t<e.length;){if(t=this.until(["\"","}"],t),Yi(e,t)==="}"&&!r){t++;break}var o=this.fork(t).string(),f=o.value;t=o.end,t=this.until([":"],t)+1,t=this.skip(xx,t),o=this.fork(t).parse(),lj(i,f,o),lj(n,f,o.value),t=this.until([",","}"],o.end);var v=Yi(e,t);if(v===",")r=!0,t++;else if(v==="}"){t++;break}}return this.node(Mpe,n,this.index,t,i)},array:function(){for(var e=this.source,t=this.index+1,r=!1,n=[],i=[];t<e.length;){if(t=this.skip(xx,t),Yi(e,t)==="]"&&!r){t++;break}var o=this.fork(t).parse();if(Ppe(i,o),Ppe(n,o.value),t=this.until([",","]"],o.end),Yi(e,t)===",")r=!0,t++;else if(Yi(e,t)==="]"){t++;break}}return this.node(Mpe,n,this.index,t,i)},string:function(){var e=this.index,t=__t(this.source,this.index+1);return this.node(sj,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,r=t;if(Yi(e,r)==="-"&&r++,Yi(e,r)==="0")r++;else if(oj(T_t,Yi(e,r)))r=this.skip(aj,r+1);else throw new Mv("Failed to parse number at: "+r);if(Yi(e,r)==="."&&(r=this.skip(aj,r+1)),Yi(e,r)==="e"||Yi(e,r)==="E"){r++,(Yi(e,r)==="+"||Yi(e,r)==="-")&&r++;var n=r;if(r=this.skip(aj,r),n===r)throw new Mv("Failed to parse number's exponent value at: "+r)}return this.node(sj,b_t(ij(e,t,r)),t,r)},keyword:function(e){var t=""+e,r=this.index,n=r+t.length;if(ij(this.source,r,n)!==t)throw new Mv("Failed to parse value at: "+r);return this.node(sj,e,r,n)},skip:function(e,t){for(var r=this.source;t<r.length&&oj(e,Yi(r,t));t++);return t},until:function(e,t){t=this.skip(xx,t);for(var r=Yi(this.source,t),n=0;n<e.length;n++)if(e[n]===r)return t;throw new Mv("Unexpected character: \""+r+"\" at: "+t)}};var P_t=Rpe(function(){var e="9007199254740993",t;return fj(e,function(r,n,i){t=i.source}),t!==e}),M_t=x_t&&!Rpe(function(){return 1/fj("-0 \t")!==-1/0});h_t({target:"JSON",stat:!0,forced:P_t},{parse:function(t,r){return M_t&&!qpe(r)?fj(t):I_t(t,r)}})});var Bpe=I(()=>{"use strict";var zpe=J(),A_t=Bu(),jpe=ej(),hI=Ct(),q_t=it(),vj=Ze(),R_t=Ft(),O_t=tj(),L_t=At(),D_t=us(),k_t=nj(),N_t=IO(),F_t=hh(),z_t=vr().set,j_t=String,Lpe=SyntaxError,B_t=hI("JSON","parse"),Dpe=hI("JSON","stringify"),U_t=hI("Object","create"),V_t=hI("Object","freeze"),dj=vj("".charAt),pj=vj("".slice),$_t=vj([].push),mj=F_t(),kpe=mj.length,Npe="Unacceptable as raw JSON",Fpe=function(e){return e===" "||e==="\t"||e===`
`||e==="\r"};zpe({target:"JSON",stat:!0,forced:!jpe},{rawJSON:function(t){var r=L_t(t);if(r===""||Fpe(dj(r,0))||Fpe(dj(r,r.length-1)))throw new Lpe(Npe);var n=B_t(r);if(typeof n=="object"&&n!==null)throw new Lpe(Npe);var i=U_t(null);return z_t(i,{type:"RawJSON"}),D_t(i,"rawJSON",r),A_t?V_t(i):i}});Dpe&&zpe({target:"JSON",stat:!0,arity:3,forced:!jpe},{stringify:function(t,r,n){var i=N_t(r),o=[],f=Dpe(t,function(F,K){var ne=R_t(i)?q_t(i,this,j_t(F),K):K;return O_t(ne)?mj+($_t(o,ne.rawJSON)-1):ne},n);if(typeof f!="string")return f;for(var v="",x=f.length,E=0;E<x;E++){var S=dj(f,E);if(S==="\""){var P=k_t(f,++E).end-1,q=pj(f,E,P);v+=pj(q,0,kpe)===mj?o[pj(q,kpe)]:"\""+q+"\"",E=P}else v+=S}return v}})});var Xi=I((HJt,Upe)=>{"use strict";var G_t=vi().has;Upe.exports=function(e){return G_t(e),e}});var Vpe=I(()=>{"use strict";var Z_t=J(),W_t=Xi(),H_t=vi().remove;Z_t({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=W_t(this),r=!0,n,i=0,o=arguments.length;i<o;i++)n=H_t(t,arguments[i]),r=r&&n;return!!r}})});var Gpe=I(()=>{"use strict";var K_t=J(),Y_t=Xi(),gj=vi(),X_t=gj.get,Q_t=gj.has,$pe=gj.set;K_t({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var n=Y_t(this),i,o;return Q_t(n,t)?(i=X_t(n,t),"update"in r&&(i=r.update(i,t,n),$pe(n,t,i)),i):(o=r.insert(t,n),$pe(n,t,o),o)}})});var Zpe=I(()=>{"use strict";var J_t=J(),e0t=Mr(),t0t=Xi(),r0t=fs();J_t({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var r=t0t(this),n=e0t(t,arguments.length>1?arguments[1]:void 0);return r0t(r,function(i,o){if(!n(i,o,r))return!1},!0)!==!1}})});var Hpe=I(()=>{"use strict";var n0t=J(),i0t=Mr(),o0t=Xi(),Wpe=vi(),a0t=fs(),s0t=Wpe.Map,l0t=Wpe.set;n0t({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var r=o0t(this),n=i0t(t,arguments.length>1?arguments[1]:void 0),i=new s0t;return a0t(r,function(o,f){n(o,f,r)&&l0t(i,f,o)}),i}})});var Kpe=I(()=>{"use strict";var u0t=J(),c0t=Mr(),h0t=Xi(),f0t=fs();u0t({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var r=h0t(this),n=c0t(t,arguments.length>1?arguments[1]:void 0),i=f0t(r,function(o,f){if(n(o,f,r))return{value:o}},!0);return i&&i.value}})});var Ype=I(()=>{"use strict";var p0t=J(),d0t=Mr(),m0t=Xi(),v0t=fs();p0t({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var r=m0t(this),n=d0t(t,arguments.length>1?arguments[1]:void 0),i=v0t(r,function(o,f){if(n(o,f,r))return{key:f}},!0);return i&&i.key}})});var bx=I((ser,Xpe)=>{"use strict";var g0t=Mr(),y0t=at(),_0t=Gt(),x0t=pn();Xpe.exports=function(e,t,r){return function(i){var o=_0t(i),f=arguments.length,v=f>1?arguments[1]:void 0,x=v!==void 0,E=x?g0t(v,f>2?arguments[2]:void 0):void 0,S=new e,P=0;return x0t(o,function(q){var F=x?E(q,P++):q;r?t(S,y0t(F)[0],F[1]):t(S,F)}),S}}});var Jpe=I(()=>{"use strict";var b0t=J(),Qpe=vi(),w0t=bx();b0t({target:"Map",stat:!0,forced:!0},{from:w0t(Qpe.Map,Qpe.set,!0)})});var ede=I(()=>{"use strict";var E0t=J(),T0t=Xi(),yj=vi(),S0t=yj.get,I0t=yj.has,C0t=yj.set;E0t({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,r){return I0t(T0t(this),t)?S0t(this,t):(C0t(this,t,r),r)}})});var tde=I(()=>{"use strict";var P0t=J(),M0t=Pt(),A0t=Xi(),_j=vi(),q0t=_j.get,R0t=_j.has,O0t=_j.set;P0t({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,r){if(A0t(this),M0t(r),R0t(this,t))return q0t(this,t);t===0&&1/t===-1/0&&(t=0);var n=r(t);return O0t(this,t,n),n}})});var rde=I(()=>{"use strict";ak()});var ide=I((ver,nde)=>{"use strict";nde.exports=function(e,t){return e===t||e!==e&&t!==t}});var ode=I(()=>{"use strict";var L0t=J(),D0t=ide(),k0t=Xi(),N0t=fs();L0t({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return N0t(k0t(this),function(r){if(D0t(r,t))return!0},!0)===!0}})});var sde=I(()=>{"use strict";var F0t=J(),z0t=it(),j0t=pn(),B0t=Ft(),ade=Pt(),U0t=vi().Map;F0t({target:"Map",stat:!0,forced:!0},{keyBy:function(t,r){var n=B0t(this)?this:U0t,i=new n;ade(r);var o=ade(i.set);return j0t(t,function(f){z0t(o,i,r(f),f)}),i}})});var lde=I(()=>{"use strict";var V0t=J(),$0t=Xi(),G0t=fs();V0t({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var r=G0t($0t(this),function(n,i){if(n===t)return{key:i}},!0);return r&&r.key}})});var cde=I(()=>{"use strict";var Z0t=J(),W0t=Mr(),H0t=Xi(),ude=vi(),K0t=fs(),Y0t=ude.Map,X0t=ude.set;Z0t({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var r=H0t(this),n=W0t(t,arguments.length>1?arguments[1]:void 0),i=new Y0t;return K0t(r,function(o,f){X0t(i,n(o,f,r),o)}),i}})});var fde=I(()=>{"use strict";var Q0t=J(),J0t=Mr(),ext=Xi(),hde=vi(),txt=fs(),rxt=hde.Map,nxt=hde.set;Q0t({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var r=ext(this),n=J0t(t,arguments.length>1?arguments[1]:void 0),i=new rxt;return txt(r,function(o,f){nxt(i,f,n(o,f,r))}),i}})});var pde=I(()=>{"use strict";var ixt=J(),oxt=Xi(),axt=pn(),sxt=vi().set;ixt({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var r=oxt(this),n=arguments.length,i=0;i<n;)axt(arguments[i++],function(o,f){sxt(r,o,f)},{AS_ENTRIES:!0});return r}})});var wx=I((Mer,dde)=>{"use strict";var lxt=at();dde.exports=function(e,t,r){return function(){for(var i=new e,o=arguments.length,f=0;f<o;f++){var v=arguments[f];r?t(i,lxt(v)[0],v[1]):t(i,v)}return i}}});var vde=I(()=>{"use strict";var uxt=J(),mde=vi(),cxt=wx();uxt({target:"Map",stat:!0,forced:!0},{of:cxt(mde.Map,mde.set,!0)})});var gde=I(()=>{"use strict";var hxt=J(),fxt=Pt(),pxt=Xi(),dxt=fs(),mxt=TypeError;hxt({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=pxt(this),n=arguments.length<2,i=n?void 0:arguments[1];if(fxt(t),dxt(r,function(o,f){n?(n=!1,i=o):i=t(i,o,f,r)}),n)throw new mxt("Reduce of empty map with no initial value");return i}})});var yde=I(()=>{"use strict";var vxt=J(),gxt=Mr(),yxt=Xi(),_xt=fs();vxt({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var r=yxt(this),n=gxt(t,arguments.length>1?arguments[1]:void 0);return _xt(r,function(i,o){if(n(i,o,r))return!0},!0)===!0}})});var xde=I(()=>{"use strict";var xxt=J(),_de=Pt(),bxt=Xi(),xj=vi(),wxt=TypeError,Ext=xj.get,Txt=xj.has,Sxt=xj.set;xxt({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,r){var n=bxt(this),i=arguments.length;_de(r);var o=Txt(n,t);if(!o&&i<3)throw new wxt("Updating absent value");var f=o?Ext(n,t):_de(i>2?arguments[2]:void 0)(t,n);return Sxt(n,t,r(f,t,n)),n}})});var dI=I((Fer,bde)=>{"use strict";var fI=it(),bj=Pt(),pI=Ft(),Ixt=at(),Cxt=TypeError;bde.exports=function(t,r){var n=Ixt(this),i=bj(n.get),o=bj(n.has),f=bj(n.set),v=arguments.length>2?arguments[2]:void 0,x;if(!pI(r)&&!pI(v))throw new Cxt("At least one callback required");return fI(o,n,t)?(x=fI(i,n,t),pI(r)&&(x=r(x),fI(f,n,t,x))):pI(v)&&(x=v(),fI(f,n,t,x)),x}});var wde=I(()=>{"use strict";var Pxt=J(),Mxt=dI();Pxt({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:Mxt})});var Ede=I(()=>{"use strict";var Axt=J(),qxt=dI();Axt({target:"Map",proto:!0,real:!0,forced:!0},{upsert:qxt})});var Sde=I((Ver,Tde)=>{"use strict";var Rxt=TypeError;Tde.exports=function(e){if(typeof e=="number")return e;throw new Rxt("Argument is not a number")}});var Pde=I(()=>{"use strict";var Oxt=J(),wj=Sde(),Ide=ev(),Cde=YT(),Lxt=RangeError,Dxt=Math.min,kxt=Math.max;Oxt({target:"Math",stat:!0,forced:!0},{clamp:function(t,r,n){if(wj(t),Ide(wj(r)),Ide(wj(n)),Cde(r,0)&&Cde(n,-0)||r>n)throw new Lxt("`min` should be smaller than `max`");return Dxt(n,kxt(r,t))}})});var Mde=I(()=>{"use strict";var Nxt=J();Nxt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var Ade=I(()=>{"use strict";var Fxt=J(),zxt=180/Math.PI;Fxt({target:"Math",stat:!0,forced:!0},{degrees:function(t){return t*zxt}})});var Ej=I((Yer,qde)=>{"use strict";qde.exports=function(t,r,n,i,o){var f=+t,v=+r,x=+n,E=+i,S=+o;return f!==f||v!==v||x!==x||E!==E||S!==S?NaN:f===1/0||f===-1/0?f:(f-v)*(S-E)/(x-v)+E}});var Rde=I(()=>{"use strict";var jxt=J(),Bxt=Ej(),Uxt=wT();jxt({target:"Math",stat:!0,forced:!0},{fscale:function(t,r,n,i,o){return Uxt(Bxt(t,r,n,i,o))}})});var Ode=I(()=>{"use strict";ck()});var Lde=I(()=>{"use strict";var Vxt=J();Vxt({target:"Math",stat:!0,forced:!0},{iaddh:function(t,r,n,i){var o=t>>>0,f=r>>>0,v=n>>>0;return f+(i>>>0)+((o&v|(o|v)&~(o+v>>>0))>>>31)|0}})});var Dde=I(()=>{"use strict";var $xt=J();$xt({target:"Math",stat:!0,forced:!0},{imulh:function(t,r){var n=65535,i=+t,o=+r,f=i&n,v=o&n,x=i>>16,E=o>>16,S=(x*v>>>0)+(f*v>>>16);return x*E+(S>>16)+((f*E>>>0)+(S&n)>>16)}})});var kde=I(()=>{"use strict";var Gxt=J();Gxt({target:"Math",stat:!0,forced:!0},{isubh:function(t,r,n,i){var o=t>>>0,f=r>>>0,v=n>>>0;return f-(i>>>0)-((~o&v|~(o^v)&o-v>>>0)>>>31)|0}})});var Nde=I(()=>{"use strict";var Zxt=J();Zxt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var Fde=I(()=>{"use strict";var Wxt=J(),Hxt=Math.PI/180;Wxt({target:"Math",stat:!0,forced:!0},{radians:function(t){return t*Hxt}})});var zde=I(()=>{"use strict";var Kxt=J(),Yxt=Ej();Kxt({target:"Math",stat:!0,forced:!0},{scale:Yxt})});var Vde=I(()=>{"use strict";var Xxt=J(),Qxt=at(),Jxt=yk(),ebt=xh(),tbt=mi(),jde=vr(),Bde="Seeded Random",Ude=Bde+" Generator",rbt="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",nbt=jde.set,ibt=jde.getterFor(Ude),obt=TypeError,abt=ebt(function(t){nbt(this,{type:Ude,seed:t%2147483647})},Bde,function(){var t=ibt(this),r=t.seed=(t.seed*1103515245+12345)%2147483647;return tbt((r&1073741823)/1073741823,!1)});Xxt({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var r=Qxt(t).seed;if(!Jxt(r))throw new obt(rbt);return new abt(r)}})});var $de=I(()=>{"use strict";var sbt=J();sbt({target:"Math",stat:!0,forced:!0},{signbit:function(t){var r=+t;return r===r&&r===0?1/r===-1/0:r<0}})});var Kde=I(()=>{"use strict";var lbt=J(),ubt=Ze(),cbt=pn(),hbt=RangeError,fbt=TypeError,ps=1/0,pbt=NaN,kp=Math.abs,Cj=Math.pow,Gde=ubt([].push),Ex=Cj(2,1023),dbt=Cj(2,53)-1,Zde=Number.MAX_VALUE,Wde=Cj(2,971),Tx={},Tj={},Sj={},Ij={},Hde={},mI=function(e,t){var r=e+t,n=t-(r-e);return{hi:r,lo:n}};lbt({target:"Math",stat:!0},{sumPrecise:function(t){var r=[],n=0,i=Ij;switch(cbt(t,function(le){if(++n>=dbt)throw new hbt("Maximum allowed index exceeded");if(typeof le!="number")throw new fbt("Value is not a number");i!==Tx&&(le!==le?i=Tx:le===ps?i=i===Tj?Tx:Sj:le===-ps?i=i===Sj?Tx:Tj:(le!==0||1/le===ps)&&(i===Ij||i===Hde)&&(i=Hde,Gde(r,le)))}),i){case Tx:return pbt;case Tj:return-ps;case Sj:return ps;case Ij:return-0}for(var o=[],f=0,v,x,E,S,P,q,F=0;F<r.length;F++){v=r[F];for(var K=0,ne=0;ne<o.length;ne++){if(x=o[ne],kp(v)<kp(x)&&(q=v,v=x,x=q),E=mI(v,x),S=E.hi,P=E.lo,kp(S)===ps){var Z=S===ps?1:-1;f+=Z,v=v-Z*Ex-Z*Ex,kp(v)<kp(x)&&(q=v,v=x,x=q),E=mI(v,x),S=E.hi,P=E.lo}P!==0&&(o[K++]=P),v=S}o.length=K,v!==0&&Gde(o,v)}var W=o.length-1;if(S=0,P=0,f!==0){var Q=W>=0?o[W]:0;if(W--,kp(f)>1||f>0&&Q>0||f<0&&Q<0)return f>0?ps:-ps;if(E=mI(f*Ex,Q/2),S=E.hi,P=E.lo,P*=2,kp(2*S)===ps)return S>0?S===Ex&&P===-(Wde/2)&&W>=0&&o[W]<0?Zde:ps:S===-Ex&&P===Wde/2&&W>=0&&o[W]>0?-Zde:-ps;P!==0&&(o[++W]=P,P=0),S*=2}for(;W>=0&&(E=mI(S,o[W--]),S=E.hi,P=E.lo,P===0););return W>=0&&(P<0&&o[W]<0||P>0&&o[W]>0)&&(x=P*2,v=S+x,x===v-S&&(S=v)),S}})});var Yde=I(()=>{"use strict";var mbt=J();mbt({target:"Math",stat:!0,forced:!0},{umulh:function(t,r){var n=65535,i=+t,o=+r,f=i&n,v=o&n,x=i>>>16,E=o>>>16,S=(x*v>>>0)+(f*v>>>16);return x*E+(S>>>16)+((f*E>>>0)+(S&n)>>>16)}})});var Jde=I(()=>{"use strict";var vbt=J(),Ix=Ze(),gbt=Kr(),Sx="Invalid number representation",ybt="Invalid radix",_bt=RangeError,vI=SyntaxError,xbt=TypeError,Xde=parseInt,bbt=Math.pow,Qde=/^[\d.a-z]+$/,wbt=Ix("".charAt),Ebt=Ix(Qde.exec),Tbt=Ix(1 .toString),Sbt=Ix("".slice),Ibt=Ix("".split);vbt({target:"Number",stat:!0,forced:!0},{fromString:function(t,r){var n=1;if(typeof t!="string")throw new xbt(Sx);if(!t.length)throw new vI(Sx);if(wbt(t,0)==="-"&&(n=-1,t=Sbt(t,1),!t.length))throw new vI(Sx);var i=r===void 0?10:gbt(r);if(i<2||i>36)throw new _bt(ybt);if(!Ebt(Qde,t))throw new vI(Sx);var o=Ibt(t,"."),f=Xde(o[0],i);if(o.length>1&&(f+=Xde(o[1],i)/bbt(i,o[1].length)),i===10&&Tbt(f,i)!==t)throw new vI(Sx);return n*f}})});var eme=I(()=>{"use strict";var Cbt=J(),Pbt=rI();Cbt({target:"Number",stat:!0,forced:!0},{range:function(t,r,n){return new Pbt(t,r,n,"number",0,1)}})});var tme=I(()=>{"use strict";qk()});var yI=I((Ctr,ime)=>{"use strict";var rme=vr(),Mbt=xh(),gI=mi(),Abt=jt(),qbt=mp(),Rbt=Gt(),nme="Object Iterator",Obt=rme.set,Lbt=rme.getterFor(nme);ime.exports=Mbt(function(t,r){var n=Rbt(t);Obt(this,{type:nme,mode:r,object:n,keys:qbt(n),index:0})},"Object",function(){for(var t=Lbt(this),r=t.keys;;){if(r===null||t.index>=r.length)return t.object=t.keys=null,gI(void 0,!0);var n=r[t.index++],i=t.object;if(Abt(i,n)){switch(t.mode){case"keys":return gI(n,!1);case"values":return gI(i[n],!1)}return gI([n,i[n]],!1)}}})});var ome=I(()=>{"use strict";var Dbt=J(),kbt=yI();Dbt({target:"Object",stat:!0,forced:!0},{iterateEntries:function(t){return new kbt(t,"entries")}})});var ame=I(()=>{"use strict";var Nbt=J(),Fbt=yI();Nbt({target:"Object",stat:!0,forced:!0},{iterateKeys:function(t){return new Fbt(t,"keys")}})});var sme=I(()=>{"use strict";var zbt=J(),jbt=yI();zbt({target:"Object",stat:!0,forced:!0},{iterateValues:function(t){return new jbt(t,"values")}})});var lme=I(()=>{"use strict";Ak()});var yme=I(()=>{"use strict";var Bbt=J(),_I=it(),Cx=vt(),Ubt=wh(),ume=Pt(),Vbt=at(),$bt=go(),cme=Ft(),Gbt=sa(),Zbt=bt(),xI=Mn(),Wbt=br(),Pj=hs(),hme=Yr(),Av=Jk(),Hbt=St(),fme=vr(),Kbt=Hbt("observable"),Mj="Observable",pme="Subscription",dme="SubscriptionObserver",Aj=fme.getterFor,qj=fme.set,Ybt=Aj(Mj),mme=Aj(pme),bI=Aj(dme),vme=function(e){this.observer=Vbt(e),this.cleanup=null,this.subscriptionObserver=null};vme.prototype={type:pme,clean:function(){var e=this.cleanup;if(e){this.cleanup=null;try{e()}catch(t){Av(t)}}},close:function(){if(!Cx){var e=this.facade,t=this.subscriptionObserver;e.closed=!0,t&&(t.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var Rj=function(e,t){var r=qj(this,new vme(e)),n;Cx||(this.closed=!1);try{(n=xI(e,"start"))&&_I(n,e,this)}catch(v){Av(v)}if(!r.isClosed()){var i=r.subscriptionObserver=new Oj(r);try{var o=t(i),f=o;Gbt(o)||(r.cleanup=cme(o.unsubscribe)?function(){f.unsubscribe()}:ume(o))}catch(v){i.error(v);return}r.isClosed()&&r.clean()}};Rj.prototype=Pj({},{unsubscribe:function(){var t=mme(this);t.isClosed()||(t.close(),t.clean())}});Cx&&hme(Rj.prototype,"closed",{configurable:!0,get:function(){return mme(this).isClosed()}});var Oj=function(e){qj(this,{type:dme,subscriptionState:e}),Cx||(this.closed=!1)};Oj.prototype=Pj({},{next:function(t){var r=bI(this).subscriptionState;if(!r.isClosed()){var n=r.observer;try{var i=xI(n,"next");i&&_I(i,n,t)}catch(o){Av(o)}}},error:function(t){var r=bI(this).subscriptionState;if(!r.isClosed()){var n=r.observer;r.close();try{var i=xI(n,"error");i?_I(i,n,t):Av(t)}catch(o){Av(o)}r.clean()}},complete:function(){var t=bI(this).subscriptionState;if(!t.isClosed()){var r=t.observer;t.close();try{var n=xI(r,"complete");n&&_I(n,r)}catch(i){Av(i)}t.clean()}}});Cx&&hme(Oj.prototype,"closed",{configurable:!0,get:function(){return bI(this).subscriptionState.isClosed()}});var gme=function(t){$bt(this,Lj),qj(this,{type:Mj,subscriber:ume(t)})},Lj=gme.prototype;Pj(Lj,{subscribe:function(t){var r=arguments.length;return new Rj(cme(t)?{next:t,error:r>1?arguments[1]:void 0,complete:r>2?arguments[2]:void 0}:Zbt(t)?t:{},Ybt(this).subscriber)}});Wbt(Lj,Kbt,function(){return this});Bbt({global:!0,constructor:!0,forced:!0},{Observable:gme});Ubt(Mj)});var xme=I(()=>{"use strict";var Xbt=J(),Qbt=Ct(),Jbt=it(),_me=at(),e1t=Hs(),t1t=gh(),r1t=Mn(),n1t=pn(),i1t=St(),o1t=i1t("observable");Xbt({target:"Observable",stat:!0,forced:!0},{from:function(t){var r=e1t(this)?this:Qbt("Observable"),n=r1t(_me(t),o1t);if(n){var i=_me(Jbt(n,t));return i.constructor===r?i:new r(function(f){return i.subscribe(f)})}var o=t1t(t);return new r(function(f){n1t(o,function(v,x){if(f.next(v),f.closed)return x()},{IS_ITERATOR:!0,INTERRUPTED:!0}),f.complete()})}})});var wme=I(()=>{"use strict";var a1t=J(),bme=Ct(),s1t=Hs(),l1t=bme("Array");a1t({target:"Observable",stat:!0,forced:!0},{of:function(){for(var t=s1t(this)?this:bme("Observable"),r=arguments.length,n=l1t(r),i=0;i<r;)n[i]=arguments[i++];return new t(function(o){for(var f=0;f<r;f++)if(o.next(n[f]),o.closed)return;o.complete()})}})});var Eme=I(()=>{"use strict";yme();xme();wme()});var Tme=I(()=>{"use strict";pN()});var Sme=I(()=>{"use strict";dN()});var Ime=I(()=>{"use strict";yN()});var Cme=I(()=>{"use strict";_N()});var Nl=I((Qtr,qme)=>{"use strict";UT();BS();var Ame=Ct(),u1t=Ze(),c1t=Ru(),Pme=Ame("Map"),h1t=Ame("WeakMap"),f1t=u1t([].push),Mme=c1t("metadata"),Dj=Mme.store||(Mme.store=new h1t),Px=function(e,t,r){var n=Dj.get(e);if(!n){if(!r)return;Dj.set(e,n=new Pme)}var i=n.get(t);if(!i){if(!r)return;n.set(t,i=new Pme)}return i},p1t=function(e,t,r){var n=Px(t,r,!1);return n===void 0?!1:n.has(e)},d1t=function(e,t,r){var n=Px(t,r,!1);return n===void 0?void 0:n.get(e)},m1t=function(e,t,r,n){Px(r,n,!0).set(e,t)},v1t=function(e,t){var r=Px(e,t,!1),n=[];return r&&r.forEach(function(i,o){f1t(n,o)}),n},g1t=function(e){return e===void 0||typeof e=="symbol"?e:String(e)};qme.exports={store:Dj,getMap:Px,has:p1t,get:d1t,set:m1t,keys:v1t,toKey:g1t}});var Ome=I(()=>{"use strict";var y1t=J(),Rme=Nl(),_1t=at(),x1t=Rme.toKey,b1t=Rme.set;y1t({target:"Reflect",stat:!0},{defineMetadata:function(t,r,n){var i=arguments.length<4?void 0:x1t(arguments[3]);b1t(t,r,_1t(n),i)}})});var Dme=I(()=>{"use strict";var w1t=J(),kj=Nl(),E1t=at(),T1t=kj.toKey,S1t=kj.getMap,Lme=kj.store;w1t({target:"Reflect",stat:!0},{deleteMetadata:function(t,r){var n=arguments.length<3?void 0:T1t(arguments[2]),i=S1t(E1t(r),n,!1);if(i===void 0||!i.delete(t))return!1;if(i.size)return!0;var o=Lme.get(r);return o.delete(n),!!o.size||Lme.delete(r)}})});var Nme=I(()=>{"use strict";var I1t=J(),Nj=Nl(),C1t=at(),P1t=ei(),M1t=Nj.has,A1t=Nj.get,q1t=Nj.toKey,kme=function(e,t,r){var n=M1t(e,t,r);if(n)return A1t(e,t,r);var i=P1t(t);return i!==null?kme(e,i,r):void 0};I1t({target:"Reflect",stat:!0},{getMetadata:function(t,r){var n=arguments.length<3?void 0:q1t(arguments[2]);return kme(t,C1t(r),n)}})});var Bme=I(()=>{"use strict";var R1t=J(),Fme=Ze(),zme=Nl(),O1t=at(),L1t=ei(),D1t=KS(),k1t=Fme(D1t),N1t=Fme([].concat),F1t=zme.keys,z1t=zme.toKey,jme=function(e,t){var r=F1t(e,t),n=L1t(e);if(n===null)return r;var i=jme(n,t);return i.length?r.length?k1t(N1t(r,i)):i:r};R1t({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var r=arguments.length<2?void 0:z1t(arguments[1]);return jme(O1t(t),r)}})});var Vme=I(()=>{"use strict";var j1t=J(),Ume=Nl(),B1t=at(),U1t=Ume.get,V1t=Ume.toKey;j1t({target:"Reflect",stat:!0},{getOwnMetadata:function(t,r){var n=arguments.length<3?void 0:V1t(arguments[2]);return U1t(t,B1t(r),n)}})});var Gme=I(()=>{"use strict";var $1t=J(),$me=Nl(),G1t=at(),Z1t=$me.keys,W1t=$me.toKey;$1t({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var r=arguments.length<2?void 0:W1t(arguments[1]);return Z1t(G1t(t),r)}})});var Hme=I(()=>{"use strict";var H1t=J(),Zme=Nl(),K1t=at(),Y1t=ei(),X1t=Zme.has,Q1t=Zme.toKey,Wme=function(e,t,r){var n=X1t(e,t,r);if(n)return!0;var i=Y1t(t);return i!==null?Wme(e,i,r):!1};H1t({target:"Reflect",stat:!0},{hasMetadata:function(t,r){var n=arguments.length<3?void 0:Q1t(arguments[2]);return Wme(t,K1t(r),n)}})});var Yme=I(()=>{"use strict";var J1t=J(),Kme=Nl(),ewt=at(),twt=Kme.has,rwt=Kme.toKey;J1t({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,r){var n=arguments.length<3?void 0:rwt(arguments[2]);return twt(t,ewt(r),n)}})});var Qme=I(()=>{"use strict";var nwt=J(),Xme=Nl(),iwt=at(),owt=Xme.toKey,awt=Xme.set;nwt({target:"Reflect",stat:!0},{metadata:function(t,r){return function(i,o){awt(t,r,iwt(i),owt(o))}}})});var Jme=I(()=>{"use strict";DN()});var eve=I(()=>{"use strict";var swt=J(),lwt=Ki(),uwt=qi().add;swt({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=lwt(this),r=0,n=arguments.length;r<n;r++)uwt(t,arguments[r]);return t}})});var tve=I(()=>{"use strict";var cwt=J(),hwt=Ki(),fwt=qi().remove;cwt({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=hwt(this),r=!0,n,i=0,o=arguments.length;i<o;i++)n=fwt(t,arguments[i]),r=r&&n;return!!r}})});var rve=I(()=>{"use strict";VN()});var ive=I((Srr,nve)=>{"use strict";var pwt=No(),dwt=jt(),mwt=sa(),vwt=St(),gwt=bp(),ywt=vwt("iterator"),_wt=Object;nve.exports=function(e){if(mwt(e))return!1;var t=_wt(e);return t[ywt]!==void 0||"@@iterator"in t||dwt(gwt,pwt(t))}});var Nh=I((Irr,ave)=>{"use strict";var xwt=Ct(),ove=Ft(),bwt=ive(),wwt=bt(),Ewt=xwt("Set"),Twt=function(e){return wwt(e)&&typeof e.size=="number"&&ove(e.has)&&ove(e.keys)};ave.exports=function(e){return Twt(e)?e:bwt(e)?new Ewt(e):e}});var sve=I(()=>{"use strict";var Swt=J(),Iwt=it(),Cwt=Nh(),Pwt=UN();Swt({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return Iwt(Pwt,this,Cwt(t))}})});var lve=I(()=>{"use strict";var Mwt=J(),Awt=Mr(),qwt=Ki(),Rwt=fa();Mwt({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var r=qwt(this),n=Awt(t,arguments.length>1?arguments[1]:void 0);return Rwt(r,function(i){if(!n(i,i,r))return!1},!0)!==!1}})});var cve=I(()=>{"use strict";var Owt=J(),Lwt=Mr(),Dwt=Ki(),uve=qi(),kwt=fa(),Nwt=uve.Set,Fwt=uve.add;Owt({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var r=Dwt(this),n=Lwt(t,arguments.length>1?arguments[1]:void 0),i=new Nwt;return kwt(r,function(o){n(o,o,r)&&Fwt(i,o)}),i}})});var hve=I(()=>{"use strict";var zwt=J(),jwt=Mr(),Bwt=Ki(),Uwt=fa();zwt({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var r=Bwt(this),n=jwt(t,arguments.length>1?arguments[1]:void 0),i=Uwt(r,function(o){if(n(o,o,r))return{value:o}},!0);return i&&i.value}})});var pve=I(()=>{"use strict";var Vwt=J(),fve=qi(),$wt=bx();Vwt({target:"Set",stat:!0,forced:!0},{from:$wt(fve.Set,fve.add,!1)})});var dve=I(()=>{"use strict";ZN()});var mve=I(()=>{"use strict";var Gwt=J(),Zwt=it(),Wwt=Nh(),Hwt=GN();Gwt({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return Zwt(Hwt,this,Wwt(t))}})});var vve=I(()=>{"use strict";HN()});var gve=I(()=>{"use strict";var Kwt=J(),Ywt=it(),Xwt=Nh(),Qwt=WN();Kwt({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return Ywt(Qwt,this,Xwt(t))}})});var yve=I(()=>{"use strict";YN()});var _ve=I(()=>{"use strict";var Jwt=J(),eEt=it(),tEt=Nh(),rEt=KN();Jwt({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return eEt(rEt,this,tEt(t))}})});var xve=I(()=>{"use strict";QN()});var bve=I(()=>{"use strict";var nEt=J(),iEt=it(),oEt=Nh(),aEt=XN();nEt({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return iEt(aEt,this,oEt(t))}})});var Eve=I(()=>{"use strict";var sEt=J(),wve=Ze(),lEt=Ki(),uEt=fa(),cEt=At(),hEt=wve([].join),fEt=wve([].push);sEt({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var r=lEt(this),n=t===void 0?",":cEt(t),i=[];return uEt(r,function(o){fEt(i,o)}),hEt(i,n)}})});var Sve=I(()=>{"use strict";var pEt=J(),dEt=Mr(),mEt=Ki(),Tve=qi(),vEt=fa(),gEt=Tve.Set,yEt=Tve.add;pEt({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var r=mEt(this),n=dEt(t,arguments.length>1?arguments[1]:void 0),i=new gEt;return vEt(r,function(o){yEt(i,n(o,o,r))}),i}})});var Cve=I(()=>{"use strict";var _Et=J(),Ive=qi(),xEt=wx();_Et({target:"Set",stat:!0,forced:!0},{of:xEt(Ive.Set,Ive.add,!1)})});var Pve=I(()=>{"use strict";var bEt=J(),wEt=Pt(),EEt=Ki(),TEt=fa(),SEt=TypeError;bEt({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=EEt(this),n=arguments.length<2,i=n?void 0:arguments[1];if(wEt(t),TEt(r,function(o){n?(n=!1,i=o):i=t(i,o,o,r)}),n)throw new SEt("Reduce of empty set with no initial value");return i}})});var Mve=I(()=>{"use strict";var IEt=J(),CEt=Mr(),PEt=Ki(),MEt=fa();IEt({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var r=PEt(this),n=CEt(t,arguments.length>1?arguments[1]:void 0);return MEt(r,function(i){if(n(i,i,r))return!0},!0)===!0}})});var Ave=I(()=>{"use strict";tF()});var qve=I(()=>{"use strict";var AEt=J(),qEt=it(),REt=Nh(),OEt=eF();AEt({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return qEt(OEt,this,REt(t))}})});var Rve=I(()=>{"use strict";nF()});var Ove=I(()=>{"use strict";var LEt=J(),DEt=it(),kEt=Nh(),NEt=rF();LEt({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return DEt(NEt,this,kEt(t))}})});var Lve=I(()=>{"use strict";var FEt=J(),zEt=qp().charAt,jEt=zr(),BEt=Kr(),UEt=At();FEt({target:"String",proto:!0,forced:!0},{at:function(t){var r=UEt(jEt(this)),n=r.length,i=BEt(t),o=i>=0?i:n+i;return o<0||o>=n?void 0:zEt(r,o)}})});var Fj=I((_nr,Fve)=>{"use strict";var Nve=Ze(),VEt=Qn(),Dve=At(),$Et=nr(),GEt=TypeError,kve=Nve([].push),ZEt=Nve([].join);Fve.exports=function(t){var r=VEt(t),n=$Et(r);if(!n)return"";for(var i=arguments.length,o=[],f=0;;){var v=r[f++];if(v===void 0)throw new GEt("Incorrect template");if(kve(o,Dve(v)),f===n)return ZEt(o,"");f<i&&kve(o,Dve(arguments[f]))}}});var zve=I(()=>{"use strict";var WEt=J(),HEt=Fj();WEt({target:"String",stat:!0,forced:!0},{cooked:HEt})});var $ve=I(()=>{"use strict";var KEt=J(),YEt=xh(),jve=mi(),XEt=zr(),QEt=At(),Bve=vr(),Uve=qp(),JEt=Uve.codeAt,eTt=Uve.charAt,Vve="String Iterator",tTt=Bve.set,rTt=Bve.getterFor(Vve),nTt=YEt(function(t){tTt(this,{type:Vve,string:t,index:0})},"String",function(){var t=rTt(this),r=t.string,n=t.index,i;return n>=r.length?jve(void 0,!0):(i=eTt(r,n),t.index+=i.length,jve({codePoint:JEt(i,0),position:n},!1))});KEt({target:"String",proto:!0,forced:!0},{codePoints:function(){return new nTt(QEt(XEt(this)))}})});var Fl=I((Tnr,Gve)=>{"use strict";var wI=Ze(),EI=WeakMap.prototype;Gve.exports={WeakMap,set:wI(EI.set),get:wI(EI.get),has:wI(EI.has),remove:wI(EI.delete)}});var ege=I((Snr,Jve)=>{"use strict";var iTt=Ct(),TI=Ze(),oTt=String.fromCharCode,aTt=iTt("String","fromCodePoint"),zj=TI("".charAt),Xve=TI("".charCodeAt),Zve=TI("".indexOf),Wve=TI("".slice),Bj=48,Qve=57,Hve=97,sTt=102,Kve=65,lTt=70,Yve=function(e,t){var r=Xve(e,t);return r>=Bj&&r<=Qve},jj=function(e,t,r){if(r>=e.length)return-1;for(var n=0;t<r;t++){var i=uTt(Xve(e,t));if(i===-1)return-1;n=n*16+i}return n},uTt=function(e){return e>=Bj&&e<=Qve?e-Bj:e>=Hve&&e<=sTt?e-Hve+10:e>=Kve&&e<=lTt?e-Kve+10:-1};Jve.exports=function(e){for(var t="",r=0,n=0,i;(n=Zve(e,"\\",n))>-1;){if(t+=Wve(e,r,n),++n===e.length)return;var o=zj(e,n++);switch(o){case"b":t+="\b";break;case"t":t+="\t";break;case"n":t+=`
`;break;case"v":t+="\x0B";break;case"f":t+="\f";break;case"r":t+="\r";break;case"\r":n<e.length&&zj(e,n)===`
`&&++n;case`
`:case"\u2028":case"\u2029":break;case"0":if(Yve(e,n))return;t+="\0";break;case"x":if(i=jj(e,n,n+2),i===-1)return;n+=2,t+=oTt(i);break;case"u":if(n<e.length&&zj(e,n)==="{"){var f=Zve(e,"}",++n);if(f===-1)return;i=jj(e,n,f),n=f+1}else i=jj(e,n,n+4),n+=4;if(i===-1||i>1114111)return;t+=aTt(i);break;default:if(Yve(o,0))return;t+=o}r=n}return t+Wve(e,r)}});var cge=I(()=>{"use strict";var cTt=Bu(),hTt=J(),fTt=i0(),SI=Ze(),oge=Hi(),age=at(),pTt=Gt(),dTt=Ft(),mTt=nr(),vTt=kr().f,gTt=ua(),II=Fl(),yTt=Fj(),_Tt=ege(),sge=Sp(),Uj=new II.WeakMap,xTt=II.get,bTt=II.has,wTt=II.set,Vj=Array,Mx=TypeError,tge=Object.freeze||Object,ETt=Object.isFrozen,TTt=Math.min,rge=SI("".charAt),lge=SI("".slice),STt=SI("".split),nge=SI(/./.exec),ITt=/([\n\u2028\u2029]|\r\n?)/g,CTt=RegExp("^["+sge+"]*"),PTt=RegExp("[^"+sge+"]"),ige="Invalid tag",MTt="Invalid opening line",ATt="Invalid closing line",qTt=function(e){var t=e.raw;if(cTt&&!ETt(t))throw new Mx("Raw template should be frozen");if(bTt(Uj,t))return xTt(Uj,t);var r=RTt(t),n=LTt(r);return vTt(n,"raw",{value:tge(r)}),tge(n),wTt(Uj,t,n),n},RTt=function(e){var t=pTt(e),r=mTt(t),n=Vj(r),i=Vj(r),o=0,f,v,x,E;if(!r)throw new Mx(ige);for(;o<r;o++){var S=t[o];if(typeof S=="string")n[o]=STt(S,ITt);else throw new Mx(ige)}for(o=0;o<r;o++){var P=o+1===r;if(f=n[o],o===0){if(f.length===1||f[0].length>0)throw new Mx(MTt);f[1]=""}if(P){if(f.length===1||nge(PTt,f[f.length-1]))throw new Mx(ATt);f[f.length-2]="",f[f.length-1]=""}for(var q=2;q<f.length;q+=2){var F=f[q],K=q+1===f.length&&!P,ne=nge(CTt,F)[0];if(!K&&ne.length===F.length){f[q]="";continue}v=OTt(ne,v)}}var Z=v?v.length:0;for(o=0;o<r;o++){for(f=n[o],x=f[0],E=1;E<f.length;E+=2)x+=f[E]+lge(f[E+1],Z);i[o]=x}return i},OTt=function(e,t){if(t===void 0||e===t)return e;for(var r=0,n=TTt(e.length,t.length);r<n&&rge(e,r)===rge(t,r);r++);return lge(e,0,r)},LTt=function(e){for(var t=0,r=e.length,n=Vj(r);t<r;t++)n[t]=_Tt(e[t]);return n},uge=function(e){return fTt(function(t){var r=gTt(arguments);return r[0]=qTt(age(t)),oge(e,this,r)},"")},DTt=uge(yTt);hTt({target:"String",stat:!0,forced:!0},{dedent:function(t){return age(t),dTt(t)?uge(t):oge(DTt,this,arguments)}})});var hge=I(()=>{"use strict";aF()});var fge=I(()=>{"use strict";dF()});var pge=I(()=>{"use strict";TF()});var dge=I(()=>{"use strict";qF()});var mge=I(()=>{"use strict";var kTt=nt(),NTt=fn(),FTt=kr().f,zTt=Pi().f,$j=kTt.Symbol;NTt("asyncDispose");$j&&(Ax=zTt($j,"asyncDispose"),Ax.enumerable&&Ax.configurable&&Ax.writable&&FTt($j,"asyncDispose",{value:Ax.value,enumerable:!1,configurable:!1,writable:!1}));var Ax});var vge=I(()=>{"use strict";var jTt=fn();jTt("customMatcher")});var gge=I(()=>{"use strict";var BTt=nt(),UTt=fn(),VTt=kr().f,$Tt=Pi().f,Gj=BTt.Symbol;UTt("dispose");Gj&&(qx=$Tt(Gj,"dispose"),qx.enumerable&&qx.configurable&&qx.writable&&VTt(Gj,"dispose",{value:qx.value,enumerable:!1,configurable:!1,writable:!1}));var qx});var Wj=I((Unr,yge)=>{"use strict";var GTt=Ct(),ZTt=Ze(),Zj=GTt("Symbol"),WTt=Zj.keyFor,HTt=ZTt(Zj.prototype.valueOf);yge.exports=Zj.isRegisteredSymbol||function(t){try{return WTt(HTt(t))!==void 0}catch(r){return!1}}});var _ge=I(()=>{"use strict";var KTt=J(),YTt=Wj();KTt({target:"Symbol",stat:!0},{isRegisteredSymbol:YTt})});var xge=I(()=>{"use strict";var XTt=J(),QTt=Wj();XTt({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:QTt})});var Yj=I((Wnr,Ige)=>{"use strict";var JTt=Ru(),Tge=Ct(),eSt=Ze(),tSt=qu(),rSt=St(),PI=Tge("Symbol"),bge=PI.isWellKnownSymbol,Sge=Tge("Object","getOwnPropertyNames"),nSt=eSt(PI.prototype.valueOf),wge=JTt("wks");for(CI=0,Hj=Sge(PI),Ege=Hj.length;CI<Ege;CI++)try{Kj=Hj[CI],tSt(PI[Kj])&&rSt(Kj)}catch(e){}var Kj,CI,Hj,Ege;Ige.exports=function(t){if(bge&&bge(t))return!0;try{for(var r=nSt(t),n=0,i=Sge(wge),o=i.length;n<o;n++)if(wge[i[n]]==r)return!0}catch(f){}return!1}});var Cge=I(()=>{"use strict";var iSt=J(),oSt=Yj();iSt({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:oSt})});var Pge=I(()=>{"use strict";var aSt=J(),sSt=Yj();aSt({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:sSt})});var Mge=I(()=>{"use strict";var lSt=fn();lSt("matcher")});var Age=I(()=>{"use strict";var uSt=fn();uSt("metadata")});var qge=I(()=>{"use strict";var cSt=fn();cSt("metadataKey")});var Rge=I(()=>{"use strict";var hSt=fn();hSt("observable")});var Oge=I(()=>{"use strict";var fSt=fn();fSt("patternMatch")});var Lge=I(()=>{"use strict";var pSt=fn();pSt("replaceAll")});var kge=I(()=>{"use strict";var dSt=Ct(),mSt=B0(),vSt=Ez(),Dge=Ut(),gSt=ku(),ySt=Dge.aTypedArrayConstructor,_St=Dge.exportTypedArrayStaticMethod;_St("fromAsync",function(t){var r=this,n=arguments.length,i=n>1?arguments[1]:void 0,o=n>2?arguments[2]:void 0;return new(dSt("Promise"))(function(f){mSt(r),f(vSt(t,i,o))}).then(function(f){return gSt(ySt(r),f)})},!0)});var Nge=I(()=>{"use strict";ZF()});var zge=I(()=>{"use strict";var Fge=Ut(),xSt=qn().filterReject,bSt=PS(),wSt=Fge.aTypedArray,ESt=Fge.exportTypedArrayMethod;ESt("filterOut",function(t){var r=xSt(wSt(this),t,arguments.length>1?arguments[1]:void 0);return bSt(this,r)},!0)});var Bge=I(()=>{"use strict";var jge=Ut(),TSt=qn().filterReject,SSt=PS(),ISt=jge.aTypedArray,CSt=jge.exportTypedArrayMethod;CSt("filterReject",function(t){var r=TSt(ISt(this),t,arguments.length>1?arguments[1]:void 0);return SSt(this,r)},!0)});var Uge=I(()=>{"use strict";WF()});var Vge=I(()=>{"use strict";HF()});var $ge=I(()=>{"use strict";var Xj=Ut(),PSt=WS(),MSt=Xj.aTypedArray,ASt=Xj.getTypedArrayConstructor,qSt=Xj.exportTypedArrayMethod;qSt("groupBy",function(t){var r=arguments.length>1?arguments[1]:void 0;return PSt(MSt(this),t,r,ASt)},!0)});var Gge=I(()=>{"use strict";lz()});var Zge=I(()=>{"use strict";uz()});var Wge=I(()=>{"use strict";var Qj=Ut(),RSt=nr(),OSt=ES(),LSt=Zs(),DSt=ix(),kSt=Kr(),NSt=Qj.aTypedArray,FSt=Qj.getTypedArrayConstructor,zSt=Qj.exportTypedArrayMethod,jSt=Math.max,BSt=Math.min;zSt("toSpliced",function(t,r){var n=NSt(this),i=FSt(n),o=RSt(n),f=LSt(t,o),v=arguments.length,x=0,E,S,P,q,F,K,ne;if(v===0)E=S=0;else if(v===1)E=0,S=o-f;else if(S=BSt(jSt(kSt(r),0),o-f),E=v-2,E){q=new i(E),P=OSt(q);for(var Z=2;Z<v;Z++)F=arguments[Z],q[Z-2]=P?DSt(F):+F}for(K=o+E-S,ne=new i(K);x<f;x++)ne[x]=n[x];for(;x<f+E;x++)ne[x]=q[x-f];for(;x<K;x++)ne[x]=n[x+S-E];return ne},!0)});var Hge=I(()=>{"use strict";var USt=Ze(),Jj=Ut(),VSt=ku(),$St=KS(),GSt=Jj.aTypedArray,ZSt=Jj.getTypedArrayConstructor,WSt=Jj.exportTypedArrayMethod,HSt=USt($St);WSt("uniqueBy",function(t){return GSt(this),VSt(ZSt(this),HSt(this,t))},!0)});var Kge=I(()=>{"use strict";hz()});var eB=I((Lir,Yge)=>{"use strict";var KSt=bt(),YSt=String,XSt=TypeError;Yge.exports=function(e){if(e===void 0||KSt(e))return e;throw new XSt(YSt(e)+" is not an object or undefined")}});var Rx=I((Dir,tye)=>{"use strict";var eye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Xge=eye+"+/",Qge=eye+"-_",Jge=function(e){for(var t={},r=0;r<64;r++)t[e.charAt(r)]=r;return t};tye.exports={i2c:Xge,c2i:Jge(Xge),i2cUrl:Qge,c2iUrl:Jge(Qge)}});var tB=I((kir,rye)=>{"use strict";var QSt=TypeError;rye.exports=function(e){var t=e&&e.alphabet;if(t===void 0||t==="base64"||t==="base64url")return t||"base64";throw new QSt("Incorrect `alphabet` option")}});var oB=I((Nir,oye)=>{"use strict";var nye=nt(),JSt=Ze(),eIt=eB(),tIt=J0(),rIt=jt(),iye=Rx(),nIt=tB(),iIt=Jm(),oIt=iye.c2i,aIt=iye.c2iUrl,Fh=nye.SyntaxError,sIt=nye.TypeError,Np=JSt("".charAt),rB=function(e,t){for(var r=e.length;t<r;t++){var n=Np(e,t);if(n!==" "&&n!=="\t"&&n!==`
`&&n!=="\f"&&n!=="\r")break}return t},nB=function(e,t,r){var n=e.length;n<4&&(e+=n===2?"AA":"A");var i=(t[Np(e,0)]<<18)+(t[Np(e,1)]<<12)+(t[Np(e,2)]<<6)+t[Np(e,3)],o=[i>>16&255,i>>8&255,i&255];if(n===2){if(r&&o[1]!==0)throw new Fh("Extra bits");return[o[0]]}if(n===3){if(r&&o[2]!==0)throw new Fh("Extra bits");return[o[0],o[1]]}return o},iB=function(e,t,r){for(var n=t.length,i=0;i<n;i++)e[r+i]=t[i];return r+n};oye.exports=function(e,t,r,n){tIt(e),eIt(t);var i=nIt(t)==="base64"?oIt:aIt,o=t?t.lastChunkHandling:void 0;if(o===void 0&&(o="loose"),o!=="loose"&&o!=="strict"&&o!=="stop-before-partial")throw new sIt("Incorrect `lastChunkHandling` option");r&&iIt(r.buffer);var f=r||[],v=0,x=0,E="",S=0;if(n)for(;;){if(S=rB(e,S),S===e.length){if(E.length>0){if(o==="stop-before-partial")break;if(o==="loose"){if(E.length===1)throw new Fh("Malformed padding: exactly one additional character");v=iB(f,nB(E,i,!1),v)}else throw new Fh("Missing padding")}x=e.length;break}var P=Np(e,S);if(++S,P==="="){if(E.length<2)throw new Fh("Padding is too early");if(S=rB(e,S),E.length===2){if(S===e.length){if(o==="stop-before-partial")break;throw new Fh("Malformed padding: only one =")}Np(e,S)==="="&&(++S,S=rB(e,S))}if(S<e.length)throw new Fh("Unexpected character after padding");v=iB(f,nB(E,i,o==="strict"),v),x=e.length;break}if(!rIt(i,P))throw new Fh("Unexpected character");var q=n-v;if(q===1&&E.length===2||q===2&&E.length===3||(E+=P,E.length===4&&(v=iB(f,nB(E,i,!1),v),E="",x=S,v===n)))break}return{bytes:f,read:x,written:v}}});var sye=I(()=>{"use strict";var lIt=J(),uIt=nt(),cIt=ku(),hIt=oB(),aye=uIt.Uint8Array;aye&&lIt({target:"Uint8Array",stat:!0},{fromBase64:function(t){var r=hIt(t,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return cIt(aye,r.bytes)}})});var sB=I((jir,hye)=>{"use strict";var aB=nt(),uye=Ze(),fIt=aB.Uint8Array,lye=aB.SyntaxError,pIt=aB.parseInt,dIt=Math.min,cye=/[^\da-f]/i,mIt=uye(cye.exec),vIt=uye("".slice);hye.exports=function(e,t){var r=e.length;if(r%2!==0)throw new lye("String should be an even number of characters");for(var n=t?dIt(t.length,r/2):r/2,i=t||new fIt(n),o=0,f=0;f<n;){var v=vIt(e,o,o+=2);if(mIt(cye,v))throw new lye("String should only contain hex characters");i[f++]=pIt(v,16)}return{bytes:i,read:o}}});var fye=I(()=>{"use strict";var gIt=J(),yIt=nt(),_It=J0(),xIt=sB();yIt.Uint8Array&&gIt({target:"Uint8Array",stat:!0},{fromHex:function(t){return xIt(_It(t)).bytes}})});var Ox=I((Vir,pye)=>{"use strict";var bIt=No(),wIt=TypeError;pye.exports=function(e){if(bIt(e)==="Uint8Array")return e;throw new wIt("Argument is not an Uint8Array")}});var dye=I(()=>{"use strict";var EIt=J(),TIt=nt(),SIt=oB(),IIt=Ox(),MI=TIt.Uint8Array,CIt=!MI||!MI.prototype.setFromBase64||!function(){var e=new MI([255,255,255,255,255]);try{e.setFromBase64("MjYyZg===")}catch(t){return e[0]===50&&e[1]===54&&e[2]===50&&e[3]===255&&e[4]===255}}();MI&&EIt({target:"Uint8Array",proto:!0,forced:CIt},{setFromBase64:function(t){IIt(this);var r=SIt(t,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:r.read,written:r.written}}})});var mye=I(()=>{"use strict";var PIt=J(),MIt=nt(),AIt=J0(),qIt=Ox(),RIt=Jm(),OIt=sB();MIt.Uint8Array&&PIt({target:"Uint8Array",proto:!0},{setFromHex:function(t){qIt(this),AIt(t),RIt(this.buffer);var r=OIt(t,this).read;return{read:r,written:r/2}}})});var gye=I(()=>{"use strict";var LIt=J(),DIt=nt(),kIt=Ze(),NIt=eB(),FIt=Ox(),zIt=Jm(),vye=Rx(),jIt=tB(),BIt=vye.i2c,UIt=vye.i2cUrl,VIt=kIt("".charAt);DIt.Uint8Array&&LIt({target:"Uint8Array",proto:!0},{toBase64:function(){var t=FIt(this),r=arguments.length?NIt(arguments[0]):void 0,n=jIt(r)==="base64"?BIt:UIt,i=!!r&&!!r.omitPadding;zIt(this.buffer);for(var o="",f=0,v=t.length,x,E=function(S){return VIt(n,x>>6*S&63)};f+2<v;f+=3)x=(t[f]<<16)+(t[f+1]<<8)+t[f+2],o+=E(3)+E(2)+E(1)+E(0);return f+2===v?(x=(t[f]<<16)+(t[f+1]<<8),o+=E(3)+E(2)+E(1)+(i?"":"=")):f+1===v&&(x=t[f]<<16,o+=E(3)+E(2)+(i?"":"==")),o}})});var yye=I(()=>{"use strict";var $It=J(),GIt=nt(),ZIt=Ze(),WIt=Ox(),HIt=Jm(),KIt=ZIt(1 .toString);GIt.Uint8Array&&$It({target:"Uint8Array",proto:!0},{toHex:function(){WIt(this),HIt(this.buffer);for(var t="",r=0,n=this.length;r<n;r++){var i=KIt(this[r],16);t+=i.length===1?"0"+i:i}return t}})});var Lx=I((Qir,_ye)=>{"use strict";var YIt=Fl().has;_ye.exports=function(e){return YIt(e),e}});var xye=I(()=>{"use strict";var XIt=J(),QIt=Lx(),JIt=Fl().remove;XIt({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=QIt(this),r=!0,n,i=0,o=arguments.length;i<o;i++)n=JIt(t,arguments[i]),r=r&&n;return!!r}})});var wye=I(()=>{"use strict";var eCt=J(),bye=Fl(),tCt=bx();eCt({target:"WeakMap",stat:!0,forced:!0},{from:tCt(bye.WeakMap,bye.set,!0)})});var Tye=I(()=>{"use strict";var rCt=J(),Eye=Fl(),nCt=wx();rCt({target:"WeakMap",stat:!0,forced:!0},{of:nCt(Eye.WeakMap,Eye.set,!0)})});var Iye=I(()=>{"use strict";var iCt=J(),oCt=Lx(),lB=Fl(),aCt=lB.get,sCt=lB.has,Sye=lB.set;iCt({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var n=oCt(this),i,o;return sCt(n,t)?(i=aCt(n,t),"update"in r&&(i=r.update(i,t,n),Sye(n,t,i)),i):(o=r.insert(t,n),Sye(n,t,o),o)}})});var Cye=I(()=>{"use strict";var lCt=J(),uCt=Lx(),uB=Fl(),cCt=uB.get,hCt=uB.has,fCt=uB.set;lCt({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,r){return hCt(uCt(this),t)?cCt(this,t):(fCt(this,t,r),r)}})});var Aye=I((uor,Mye)=>{"use strict";var cB=Fl(),Pye=new cB.WeakMap,pCt=cB.set,dCt=cB.remove;Mye.exports=function(e){return pCt(Pye,e,1),dCt(Pye,e),e}});var qye=I(()=>{"use strict";var mCt=J(),vCt=Pt(),gCt=Lx(),yCt=Aye(),hB=Fl(),_Ct=hB.get,xCt=hB.has,bCt=hB.set;mCt({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,r){if(gCt(this),yCt(t),vCt(r),xCt(this,t))return _Ct(this,t);var n=r(t);return bCt(this,t,n),n}})});var Rye=I(()=>{"use strict";var wCt=J(),ECt=dI();wCt({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:ECt})});var qv=I((mor,Oye)=>{"use strict";var fB=Ze(),pB=WeakSet.prototype;Oye.exports={WeakSet,add:fB(pB.add),has:fB(pB.has),remove:fB(pB.delete)}});var dB=I((vor,Lye)=>{"use strict";var TCt=qv().has;Lye.exports=function(e){return TCt(e),e}});var Dye=I(()=>{"use strict";var SCt=J(),ICt=dB(),CCt=qv().add;SCt({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=ICt(this),r=0,n=arguments.length;r<n;r++)CCt(t,arguments[r]);return t}})});var kye=I(()=>{"use strict";var PCt=J(),MCt=dB(),ACt=qv().remove;PCt({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=MCt(this),r=!0,n,i=0,o=arguments.length;i<o;i++)n=ACt(t,arguments[i]),r=r&&n;return!!r}})});var Fye=I(()=>{"use strict";var qCt=J(),Nye=qv(),RCt=bx();qCt({target:"WeakSet",stat:!0,forced:!0},{from:RCt(Nye.WeakSet,Nye.add,!1)})});var jye=I(()=>{"use strict";var OCt=J(),zye=qv(),LCt=wx();OCt({target:"WeakSet",stat:!0,forced:!0},{of:LCt(zye.WeakSet,zye.add,!1)})});var Wye=I(()=>{"use strict";var DCt=J(),kCt=nt(),Vye=Ct(),mB=Ze(),NCt=it(),AI=Ye(),FCt=At(),zCt=Fa(),Bye=Rx().c2i,$ye=/[^\d+/a-z]/i,jCt=/[\t\n\f\r ]+/g,BCt=/[=]{1,2}$/,Fp=Vye("atob"),UCt=String.fromCharCode,VCt=mB("".charAt),Uye=mB("".replace),$Ct=mB($ye.exec),Rv=!!Fp&&!AI(function(){return Fp("aGk=")!=="hi"}),Gye=Rv&&AI(function(){return Fp(" ")!==""}),Zye=Rv&&!AI(function(){Fp("a")}),GCt=Rv&&!AI(function(){Fp()}),ZCt=Rv&&Fp.length!==1,WCt=!Rv||Gye||Zye||GCt||ZCt;DCt({global:!0,bind:!0,enumerable:!0,forced:WCt},{atob:function(t){if(zCt(arguments.length,1),Rv&&!Gye&&!Zye)return NCt(Fp,kCt,t);var r=Uye(FCt(t),jCt,""),n="",i=0,o=0,f,v,x;if(r.length%4===0&&(r=Uye(r,BCt,"")),f=r.length,f%4===1||$Ct($ye,r))throw new(Vye("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;i<f;)v=VCt(r,i++),x=o%4?x*64+Bye[v]:Bye[v],o++%4&&(n+=UCt(255&x>>(-2*o&6)));return n}})});var Qye=I(()=>{"use strict";var HCt=J(),KCt=nt(),Yye=Ct(),Xye=Ze(),YCt=it(),vB=Ye(),Hye=At(),XCt=Fa(),QCt=Rx().i2c,Ov=Yye("btoa"),Kye=Xye("".charAt),JCt=Xye("".charCodeAt),Dx=!!Ov&&!vB(function(){return Ov("hi")!=="aGk="}),ePt=Dx&&!vB(function(){Ov()}),tPt=Dx&&vB(function(){return Ov(null)!=="bnVsbA=="}),rPt=Dx&&Ov.length!==1;HCt({global:!0,bind:!0,enumerable:!0,forced:!Dx||ePt||tPt||rPt},{btoa:function(t){if(XCt(arguments.length,1),Dx)return YCt(Ov,KCt,Hye(t));for(var r=Hye(t),n="",i=0,o=QCt,f,v;Kye(r,i)||(o="=",i%1);){if(v=JCt(r,i+=3/4),v>255)throw new(Yye("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");f=f<<8|v,n+=Kye(o,63&f>>8-i%1*8)}return n}})});var gB=I((Mor,Jye)=>{"use strict";Jye.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var _B=I((Aor,t_e)=>{"use strict";var nPt=e0(),yB=nPt("span").classList,e_e=yB&&yB.constructor&&yB.constructor.prototype;t_e.exports=e_e===Object.prototype?void 0:e_e});var o_e=I(()=>{"use strict";var r_e=nt(),n_e=gB(),iPt=_B(),xB=eL(),oPt=Jn(),i_e=function(e){if(e&&e.forEach!==xB)try{oPt(e,"forEach",xB)}catch(t){e.forEach=xB}};for(qI in n_e)n_e[qI]&&i_e(r_e[qI]&&r_e[qI].prototype);var qI;i_e(iPt)});var c_e=I(()=>{"use strict";var a_e=nt(),l_e=gB(),aPt=_B(),kx=x0(),s_e=Jn(),sPt=Fo(),lPt=St(),bB=lPt("iterator"),wB=kx.values,u_e=function(e,t){if(e){if(e[bB]!==wB)try{s_e(e,bB,wB)}catch(n){e[bB]=wB}if(sPt(e,t,!0),l_e[t]){for(var r in kx)if(e[r]!==kx[r])try{s_e(e,r,kx[r])}catch(n){e[r]=kx[r]}}}};for(RI in l_e)u_e(a_e[RI]&&a_e[RI].prototype,RI);var RI;u_e(aPt,"DOMTokenList")});var EB=I((Dor,h_e)=>{"use strict";h_e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var E_e=I(()=>{"use strict";var uPt=J(),DI=Ct(),cPt=XL(),MB=Ye(),hPt=An(),AB=aa(),kI=kr().f,fPt=br(),OI=Yr(),LI=jt(),pPt=go(),dPt=at(),d_e=NO(),f_e=_p(),Lv=EB(),mPt=rT(),m_e=vr(),qB=vt(),v_e=hr(),Dv="DOMException",PB="DATA_CLONE_ERR",FI=DI("Error"),$u=DI(Dv)||function(){try{var e=DI("MessageChannel")||cPt("worker_threads").MessageChannel;new e().port1.postMessage(new WeakMap)}catch(t){if(t.name===PB&&t.code===25)return t.constructor}}(),vPt=$u&&$u.prototype,g_e=FI.prototype,gPt=m_e.set,yPt=m_e.getterFor(Dv),_Pt="stack"in new FI(Dv),y_e=function(e){return LI(Lv,e)&&Lv[e].m?Lv[e].c:0},RB=function(){pPt(this,Fx);var t=arguments.length,r=f_e(t<1?void 0:arguments[0]),n=f_e(t<2?void 0:arguments[1],"Error"),i=y_e(n);if(gPt(this,{type:Dv,name:n,message:r,code:i}),qB||(this.name=n,this.message=r,this.code=i),_Pt){var o=new FI(r);o.name=Dv,kI(this,"stack",AB(1,mPt(o.stack,1)))}},Fx=RB.prototype=hPt(g_e),x_e=function(e){return{enumerable:!0,configurable:!0,get:e}},TB=function(e){return x_e(function(){return yPt(this)[e]})};qB&&(OI(Fx,"code",TB("code")),OI(Fx,"message",TB("message")),OI(Fx,"name",TB("name")));kI(Fx,"constructor",AB(1,RB));var zI=MB(function(){return!(new $u instanceof FI)}),b_e=zI||MB(function(){return g_e.toString!==d_e||String(new $u(1,2))!=="2: 1"}),w_e=zI||MB(function(){return new $u(1,"DataCloneError").code!==25}),xPt=zI||$u[PB]!==25||vPt[PB]!==25,p_e=v_e?b_e||w_e||xPt:zI;uPt({global:!0,constructor:!0,forced:p_e},{DOMException:p_e?RB:$u});var zx=DI(Dv),NI=zx.prototype;b_e&&(v_e||$u===zx)&&fPt(NI,"toString",d_e);w_e&&qB&&$u===zx&&OI(NI,"code",x_e(function(){return y_e(dPt(this).name)}));for(SB in Lv)LI(Lv,SB)&&(IB=Lv[SB],Nx=IB.s,CB=AB(6,IB.c),LI(zx,Nx)||kI(zx,Nx,CB),LI(NI,Nx)||kI(NI,Nx,CB));var IB,Nx,CB,SB});var A_e=I(()=>{"use strict";var bPt=J(),wPt=nt(),jB=Ct(),FB=aa(),zB=kr().f,T_e=jt(),EPt=go(),TPt=vh(),S_e=_p(),OB=EB(),SPt=rT(),IPt=vt(),P_e=hr(),Bx="DOMException",M_e=jB("Error"),Ux=jB(Bx),BB=function(){EPt(this,CPt);var t=arguments.length,r=S_e(t<1?void 0:arguments[0]),n=S_e(t<2?void 0:arguments[1],"Error"),i=new Ux(r,n),o=new M_e(r);return o.name=Bx,zB(i,"stack",FB(1,SPt(o.stack,1))),TPt(i,this,BB),i},CPt=BB.prototype=Ux.prototype,PPt="stack"in new M_e(Bx),MPt="stack"in new Ux(1,2),LB=Ux&&IPt&&Object.getOwnPropertyDescriptor(wPt,Bx),APt=!!LB&&!(LB.writable&&LB.configurable),I_e=PPt&&!APt&&!MPt;bPt({global:!0,constructor:!0,forced:P_e||I_e},{DOMException:I_e?BB:Ux});var jx=jB(Bx),C_e=jx.prototype;if(C_e.constructor!==jx){P_e||zB(C_e,"constructor",FB(1,jx));for(DB in OB)T_e(OB,DB)&&(kB=OB[DB],NB=kB.s,T_e(jx,NB)||zB(jx,NB,FB(6,kB.c)))}var kB,NB,DB});var R_e=I(()=>{"use strict";var qPt=Ct(),RPt=Fo(),q_e="DOMException";RPt(qPt(q_e),q_e)});var L_e=I(()=>{"use strict";var OPt=J(),LPt=nt(),O_e=G0().clear;OPt({global:!0,bind:!0,enumerable:!0,forced:LPt.clearImmediate!==O_e},{clearImmediate:O_e})});var jI=I(($or,k_e)=>{"use strict";var D_e=nt(),DPt=Hi(),kPt=Ft(),NPt=E0(),FPt=Us(),zPt=ua(),jPt=Fa(),BPt=D_e.Function,UPt=/MSIE .\./.test(FPt)||NPt==="BUN"&&function(){var e=D_e.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}();k_e.exports=function(e,t){var r=t?2:1;return UPt?function(n,i){var o=jPt(arguments.length,1)>r,f=kPt(n)?n:BPt(n),v=o?zPt(arguments,r):[],x=o?function(){DPt(f,this,v)}:f;return t?e(x,i):e(x)}:e}});var j_e=I(()=>{"use strict";var VPt=J(),z_e=nt(),N_e=G0().set,$Pt=jI(),F_e=z_e.setImmediate?$Pt(N_e,!1):N_e;VPt({global:!0,bind:!0,enumerable:!0,forced:z_e.setImmediate!==F_e},{setImmediate:F_e})});var B_e=I(()=>{"use strict";L_e();j_e()});var U_e=I(()=>{"use strict";var GPt=J(),ZPt=nt(),WPt=Qk(),HPt=Pt(),KPt=Fa(),YPt=Ye(),XPt=vt(),QPt=YPt(function(){return XPt&&Object.getOwnPropertyDescriptor(ZPt,"queueMicrotask").value.length!==1});GPt({global:!0,enumerable:!0,dontCallGetSet:!0,forced:QPt},{queueMicrotask:function(t){KPt(arguments.length,1),WPt(HPt(t))}})});var $_e=I(()=>{"use strict";var JPt=J(),zh=nt(),eMt=Yr(),tMt=vt(),rMt=TypeError,nMt=Object.defineProperty,V_e=zh.self!==zh;try{tMt?(BI=Object.getOwnPropertyDescriptor(zh,"self"),(V_e||!BI||!BI.get||!BI.enumerable)&&eMt(zh,"self",{get:function(){return zh},set:function(t){if(this!==zh)throw new rMt("Illegal invocation");nMt(zh,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):JPt({global:!0,simple:!0,forced:V_e},{self:zh})}catch(e){}var BI});var t0e=I(()=>{"use strict";var iMt=hr(),oMt=J(),Ji=nt(),$x=Ct(),Zx=Ze(),WB=Ye(),aMt=hh(),Nv=Ft(),sMt=Hs(),lMt=sa(),ZI=bt(),uMt=qu(),cMt=pn(),W_e=at(),$I=No(),hMt=jt(),fMt=us(),UB=Jn(),UI=nr(),pMt=Fa(),dMt=pv(),WI=vi(),HB=qi(),mMt=fa(),G_e=iD(),vMt=OO(),KB=OT(),Vx=Ji.Object,gMt=Ji.Array,H_e=Ji.Date,K_e=Ji.Error,yMt=Ji.TypeError,_Mt=Ji.PerformanceMark,zp=$x("DOMException"),GB=WI.Map,YB=WI.has,Y_e=WI.get,GI=WI.set,X_e=HB.Set,Q_e=HB.add,xMt=HB.has,bMt=$x("Object","keys"),wMt=Zx([].push),EMt=Zx((!0).valueOf),TMt=Zx(1 .valueOf),SMt=Zx("".valueOf),IMt=Zx(H_e.prototype.getTime),ZB=aMt("structuredClone"),Gx="DataCloneError",VI="Transferring",J_e=function(e){return!WB(function(){var t=new Ji.Set([7]),r=e(t),n=e(Vx(7));return r===t||!r.has(7)||!ZI(n)||+n!=7})&&e},Z_e=function(e,t){return!WB(function(){var r=new t,n=e({a:r,b:r});return!(n&&n.a===n.b&&n.a instanceof t&&n.a.stack===r.stack)})},CMt=function(e){return!WB(function(){var t=e(new Ji.AggregateError([1],ZB,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==ZB||t.cause!==3})},kv=Ji.structuredClone,PMt=iMt||!Z_e(kv,K_e)||!Z_e(kv,zp)||!CMt(kv),MMt=!kv&&J_e(function(e){return new _Mt(ZB,{detail:e}).detail}),Gu=J_e(kv)||MMt,VB=function(e){throw new zp("Uncloneable type: "+e,Gx)},ma=function(e,t){throw new zp((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",Gx)},$B=function(e,t){return Gu||ma(t),Gu(e)},AMt=function(){var e;try{e=new Ji.DataTransfer}catch(t){try{e=new Ji.ClipboardEvent("").clipboardData}catch(r){}}return e&&e.items&&e.files?e:null},e0e=function(e,t,r){if(YB(t,e))return Y_e(t,e);var n=r||$I(e),i,o,f,v,x,E;if(n==="SharedArrayBuffer")Gu?i=Gu(e):i=e;else{var S=Ji.DataView;!S&&!Nv(e.slice)&&ma("ArrayBuffer");try{if(Nv(e.slice)&&!e.resizable)i=e.slice(0);else for(o=e.byteLength,f=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,i=new ArrayBuffer(o,f),v=new S(e),x=new S(i),E=0;E<o;E++)x.setUint8(E,v.getUint8(E))}catch(P){throw new zp("ArrayBuffer is detached",Gx)}}return GI(t,e,i),i},qMt=function(e,t,r,n,i){var o=Ji[t];return ZI(o)||ma(t),new o(e0e(e.buffer,i),r,n)},Qi=function(e,t){if(uMt(e)&&VB("Symbol"),!ZI(e))return e;if(t){if(YB(t,e))return Y_e(t,e)}else t=new GB;var r=$I(e),n,i,o,f,v,x,E,S;switch(r){case"Array":o=gMt(UI(e));break;case"Object":o={};break;case"Map":o=new GB;break;case"Set":o=new X_e;break;case"RegExp":o=new RegExp(e.source,dMt(e));break;case"Error":switch(i=e.name,i){case"AggregateError":o=new($x(i))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":o=new($x(i));break;case"CompileError":case"LinkError":case"RuntimeError":o=new($x("WebAssembly",i));break;default:o=new K_e}break;case"DOMException":o=new zp(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":o=e0e(e,t,r);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":x=r==="DataView"?e.byteLength:e.length,o=qMt(e,r,e.byteOffset,x,t);break;case"DOMQuad":try{o=new DOMQuad(Qi(e.p1,t),Qi(e.p2,t),Qi(e.p3,t),Qi(e.p4,t))}catch(P){o=$B(e,r)}break;case"File":if(Gu)try{o=Gu(e),$I(o)!==r&&(o=void 0)}catch(P){}if(!o)try{o=new File([e],e.name,e)}catch(P){}o||ma(r);break;case"FileList":if(f=AMt(),f){for(v=0,x=UI(e);v<x;v++)f.items.add(Qi(e[v],t));o=f.files}else o=$B(e,r);break;case"ImageData":try{o=new ImageData(Qi(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(P){o=$B(e,r)}break;default:if(Gu)o=Gu(e);else switch(r){case"BigInt":o=Vx(e.valueOf());break;case"Boolean":o=Vx(EMt(e));break;case"Number":o=Vx(TMt(e));break;case"String":o=Vx(SMt(e));break;case"Date":o=new H_e(IMt(e));break;case"Blob":try{o=e.slice(0,e.size,e.type)}catch(P){ma(r)}break;case"DOMPoint":case"DOMPointReadOnly":n=Ji[r];try{o=n.fromPoint?n.fromPoint(e):new n(e.x,e.y,e.z,e.w)}catch(P){ma(r)}break;case"DOMRect":case"DOMRectReadOnly":n=Ji[r];try{o=n.fromRect?n.fromRect(e):new n(e.x,e.y,e.width,e.height)}catch(P){ma(r)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=Ji[r];try{o=n.fromMatrix?n.fromMatrix(e):new n(e)}catch(P){ma(r)}break;case"AudioData":case"VideoFrame":Nv(e.clone)||ma(r);try{o=e.clone()}catch(P){VB(r)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":ma(r);default:VB(r)}}switch(GI(t,e,o),r){case"Array":case"Object":for(E=bMt(e),v=0,x=UI(E);v<x;v++)S=E[v],fMt(o,S,Qi(e[S],t));break;case"Map":e.forEach(function(P,q){GI(o,Qi(q,t),Qi(P,t))});break;case"Set":e.forEach(function(P){Q_e(o,Qi(P,t))});break;case"Error":UB(o,"message",Qi(e.message,t)),hMt(e,"cause")&&UB(o,"cause",Qi(e.cause,t)),i==="AggregateError"?o.errors=Qi(e.errors,t):i==="SuppressedError"&&(o.error=Qi(e.error,t),o.suppressed=Qi(e.suppressed,t));case"DOMException":vMt&&UB(o,"stack",Qi(e.stack,t))}return o},RMt=function(e,t){if(!ZI(e))throw new yMt("Transfer option cannot be converted to a sequence");var r=[];cMt(e,function(q){wMt(r,W_e(q))});for(var n=0,i=UI(r),o=new X_e,f,v,x,E,S,P;n<i;){if(f=r[n++],v=$I(f),v==="ArrayBuffer"?xMt(o,f):YB(t,f))throw new zp("Duplicate transferable",Gx);if(v==="ArrayBuffer"){Q_e(o,f);continue}if(KB)E=kv(f,{transfer:[f]});else switch(v){case"ImageBitmap":x=Ji.OffscreenCanvas,sMt(x)||ma(v,VI);try{S=new x(f.width,f.height),P=S.getContext("bitmaprenderer"),P.transferFromImageBitmap(f),E=S.transferToImageBitmap()}catch(q){}break;case"AudioData":case"VideoFrame":(!Nv(f.clone)||!Nv(f.close))&&ma(v,VI);try{E=f.clone(),f.close()}catch(q){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":ma(v,VI)}if(E===void 0)throw new zp("This object cannot be transferred: "+v,Gx);GI(t,f,E)}return o},OMt=function(e){mMt(e,function(t){KB?Gu(t,{transfer:[t]}):Nv(t.transfer)?t.transfer():G_e?G_e(t):ma("ArrayBuffer",VI)})};oMt({global:!0,enumerable:!0,sham:!KB,forced:PMt},{structuredClone:function(t){var r=pMt(arguments.length,1)>1&&!lMt(arguments[1])?W_e(arguments[1]):void 0,n=r?r.transfer:void 0,i,o;n!==void 0&&(i=new GB,o=RMt(n,i));var f=Qi(t,i);return o&&OMt(o),f}})});var i0e=I(()=>{"use strict";var LMt=J(),n0e=nt(),DMt=jI(),r0e=DMt(n0e.setInterval,!0);LMt({global:!0,bind:!0,forced:n0e.setInterval!==r0e},{setInterval:r0e})});var s0e=I(()=>{"use strict";var kMt=J(),a0e=nt(),NMt=jI(),o0e=NMt(a0e.setTimeout,!0);kMt({global:!0,bind:!0,forced:a0e.setTimeout!==o0e},{setTimeout:o0e})});var l0e=I(()=>{"use strict";i0e();s0e()});var Wx=I((sar,c0e)=>{"use strict";var FMt=Ye(),zMt=St(),jMt=vt(),u0e=hr(),BMt=zMt("iterator");c0e.exports=!FMt(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",t.forEach(function(i,o){t.delete("b"),n+=o+i}),r.delete("a",2),r.delete("b",void 0),u0e&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(u0e||!jMt)||!t.sort||e.href!=="https://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[BMt]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var _0e=I((lar,y0e)=>{"use strict";var jp=Ze(),XB=2147483647,Hx=36,m0e=1,e3=26,UMt=38,VMt=700,$Mt=72,GMt=128,ZMt="-",WMt=/[^\0-\u007E]/,v0e=/[.\u3002\uFF0E\uFF61]/g,h0e="Overflow: input needs wider integers to process",QB=Hx-m0e,f0e=RangeError,HMt=jp(v0e.exec),Fv=Math.floor,JB=String.fromCharCode,p0e=jp("".charCodeAt),g0e=jp([].join),jh=jp([].push),KMt=jp("".replace),YMt=jp("".split),XMt=jp("".toLowerCase),QMt=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=p0e(e,r++);if(i>=55296&&i<=56319&&r<n){var o=p0e(e,r++);(o&64512)===56320?jh(t,((i&1023)<<10)+(o&1023)+65536):(jh(t,i),r--)}else jh(t,i)}return t},d0e=function(e){return e+22+75*(e<26)},JMt=function(e,t,r){var n=0;for(e=r?Fv(e/VMt):e>>1,e+=Fv(e/t);e>QB*e3>>1;)e=Fv(e/QB),n+=Hx;return Fv(n+(QB+1)*e/(e+UMt))},eAt=function(e){var t=[];e=QMt(e);var r=e.length,n=GMt,i=0,o=$Mt,f,v;for(f=0;f<e.length;f++)v=e[f],v<128&&jh(t,JB(v));var x=t.length,E=x;for(x&&jh(t,ZMt);E<r;){var S=XB;for(f=0;f<e.length;f++)v=e[f],v>=n&&v<S&&(S=v);var P=E+1;if(S-n>Fv((XB-i)/P))throw new f0e(h0e);for(i+=(S-n)*P,n=S,f=0;f<e.length;f++){if(v=e[f],v<n&&++i>XB)throw new f0e(h0e);if(v===n){for(var q=i,F=Hx;;){var K=F<=o?m0e:F>=o+e3?e3:F-o;if(q<K)break;var ne=q-K,Z=Hx-K;jh(t,JB(d0e(K+ne%Z))),q=Fv(ne/Z),F+=Hx}jh(t,JB(d0e(q))),o=JMt(i,P,E===x),i=0,E++}}i++,n++}return g0e(t,"")};y0e.exports=function(e){var t=[],r=YMt(KMt(XMt(e),v0e,"."),"."),n,i;for(n=0;n<r.length;n++)i=r[n],jh(t,HMt(WMt,i)?"xn--"+eAt(i):i);return g0e(t,".")}});var u3=I((uar,U0e)=>{"use strict";x0();oF();var a3=J(),R0e=nt(),s3=Gk(),tAt=Ct(),HI=it(),Qs=Ze(),Kx=vt(),O0e=Wx(),L0e=br(),rAt=Yr(),nAt=hs(),iAt=Fo(),oAt=xh(),l3=vr(),D0e=go(),t3=Ft(),aAt=jt(),sAt=Mr(),lAt=No(),uAt=at(),k0e=bt(),jo=At(),cAt=An(),x0e=aa(),b0e=gh(),hAt=Pl(),KI=mi(),zv=Fa(),fAt=St(),pAt=_T(),dAt=fAt("iterator"),Bv="URLSearchParams",N0e=Bv+"Iterator",F0e=l3.set,ds=l3.getterFor(Bv),mAt=l3.getterFor(N0e),w0e=s3("fetch"),QI=s3("Request"),Yx=s3("Headers"),r3=QI&&QI.prototype,E0e=Yx&&Yx.prototype,vAt=R0e.TypeError,gAt=R0e.encodeURIComponent,yAt=String.fromCharCode,_At=tAt("String","fromCodePoint"),xAt=parseInt,XI=Qs("".charAt),T0e=Qs([].join),Bh=Qs([].push),z0e=Qs("".replace),bAt=Qs([].shift),S0e=Qs([].splice),I0e=Qs("".split),j0e=Qs("".slice),wAt=Qs(/./.exec),EAt=/\+/g,n3="\uFFFD",TAt=/^[0-9a-f]+$/i,C0e=function(e,t){var r=j0e(e,t,t+2);return wAt(TAt,r)?xAt(r,16):NaN},SAt=function(e){for(var t=0,r=128;r>0&&(e&r)!==0;r>>=1)t++;return t},IAt=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(e[0]&31)<<6|e[1]&63;break;case 3:t=(e[0]&15)<<12|(e[1]&63)<<6|e[2]&63;break;case 4:t=(e[0]&7)<<18|(e[1]&63)<<12|(e[2]&63)<<6|e[3]&63;break}return t>1114111?null:t},P0e=function(e){e=z0e(e,EAt," ");for(var t=e.length,r="",n=0;n<t;){var i=XI(e,n);if(i==="%"){if(XI(e,n+1)==="%"||n+3>t){r+="%",n++;continue}var o=C0e(e,n+1);if(o!==o){r+=i,n++;continue}n+=2;var f=SAt(o);if(f===0)i=yAt(o);else{if(f===1||f>4){r+=n3,n++;continue}for(var v=[o],x=1;x<f&&(n++,!(n+3>t||XI(e,n)!=="%"));){var E=C0e(e,n+1);if(E!==E){n+=3;break}if(E>191||E<128)break;Bh(v,E),n+=2,x++}if(v.length!==f){r+=n3;continue}var S=IAt(v);S===null?r+=n3:i=_At(S)}}r+=i,n++}return r},CAt=/[!'()~]|%20/g,PAt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},MAt=function(e){return PAt[e]},M0e=function(e){return z0e(gAt(e),CAt,MAt)},i3=oAt(function(t,r){F0e(this,{type:N0e,target:ds(t).entries,index:0,kind:r})},Bv,function(){var t=mAt(this),r=t.target,n=t.index++;if(!r||n>=r.length)return t.target=null,KI(void 0,!0);var i=r[n];switch(t.kind){case"keys":return KI(i.key,!1);case"values":return KI(i.value,!1)}return KI([i.key,i.value],!1)},!0),B0e=function(e){this.entries=[],this.url=null,e!==void 0&&(k0e(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?XI(e,0)==="?"?j0e(e,1):e:jo(e)))};B0e.prototype={type:Bv,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t=this.entries,r=hAt(e),n,i,o,f,v,x,E;if(r)for(n=b0e(e,r),i=n.next;!(o=HI(i,n)).done;){if(f=b0e(uAt(o.value)),v=f.next,(x=HI(v,f)).done||(E=HI(v,f)).done||!HI(v,f).done)throw new vAt("Expected sequence with length 2");Bh(t,{key:jo(x.value),value:jo(E.value)})}else for(var S in e)aAt(e,S)&&Bh(t,{key:S,value:jo(e[S])})},parseQuery:function(e){if(e)for(var t=this.entries,r=I0e(e,"&"),n=0,i,o;n<r.length;)i=r[n++],i.length&&(o=I0e(i,"="),Bh(t,{key:P0e(bAt(o)),value:P0e(T0e(o,"="))}))},serialize:function(){for(var e=this.entries,t=[],r=0,n;r<e.length;)n=e[r++],Bh(t,M0e(n.key)+"="+M0e(n.value));return T0e(t,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var JI=function(){D0e(this,jv);var t=arguments.length>0?arguments[0]:void 0,r=F0e(this,new B0e(t));Kx||(this.size=r.entries.length)},jv=JI.prototype;nAt(jv,{append:function(t,r){var n=ds(this);zv(arguments.length,2),Bh(n.entries,{key:jo(t),value:jo(r)}),Kx||this.length++,n.updateURL()},delete:function(e){for(var t=ds(this),r=zv(arguments.length,1),n=t.entries,i=jo(e),o=r<2?void 0:arguments[1],f=o===void 0?o:jo(o),v=0;v<n.length;){var x=n[v];if(x.key===i&&(f===void 0||x.value===f)){if(S0e(n,v,1),f!==void 0)break}else v++}Kx||(this.size=n.length),t.updateURL()},get:function(t){var r=ds(this).entries;zv(arguments.length,1);for(var n=jo(t),i=0;i<r.length;i++)if(r[i].key===n)return r[i].value;return null},getAll:function(t){var r=ds(this).entries;zv(arguments.length,1);for(var n=jo(t),i=[],o=0;o<r.length;o++)r[o].key===n&&Bh(i,r[o].value);return i},has:function(t){for(var r=ds(this).entries,n=zv(arguments.length,1),i=jo(t),o=n<2?void 0:arguments[1],f=o===void 0?o:jo(o),v=0;v<r.length;){var x=r[v++];if(x.key===i&&(f===void 0||x.value===f))return!0}return!1},set:function(t,r){var n=ds(this);zv(arguments.length,1);for(var i=n.entries,o=!1,f=jo(t),v=jo(r),x=0,E;x<i.length;x++)E=i[x],E.key===f&&(o?S0e(i,x--,1):(o=!0,E.value=v));o||Bh(i,{key:f,value:v}),Kx||(this.size=i.length),n.updateURL()},sort:function(){var t=ds(this);pAt(t.entries,function(r,n){return r.key>n.key?1:-1}),t.updateURL()},forEach:function(t){for(var r=ds(this).entries,n=sAt(t,arguments.length>1?arguments[1]:void 0),i=0,o;i<r.length;)o=r[i++],n(o.value,o.key,this)},keys:function(){return new i3(this,"keys")},values:function(){return new i3(this,"values")},entries:function(){return new i3(this,"entries")}},{enumerable:!0});L0e(jv,dAt,jv.entries,{name:"entries"});L0e(jv,"toString",function(){return ds(this).serialize()},{enumerable:!0});Kx&&rAt(jv,"size",{get:function(){return ds(this).entries.length},configurable:!0,enumerable:!0});iAt(JI,Bv);a3({global:!0,constructor:!0,forced:!O0e},{URLSearchParams:JI});!O0e&&t3(Yx)&&(A0e=Qs(E0e.has),q0e=Qs(E0e.set),o3=function(e){if(k0e(e)){var t=e.body,r;if(lAt(t)===Bv)return r=e.headers?new Yx(e.headers):new Yx,A0e(r,"content-type")||q0e(r,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),cAt(e,{body:x0e(0,jo(t)),headers:x0e(0,r)})}return e},t3(w0e)&&a3({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return w0e(t,arguments.length>1?o3(arguments[1]):{})}}),t3(QI)&&(YI=function(t){return D0e(this,r3),new QI(t,arguments.length>1?o3(arguments[1]):{})},r3.constructor=YI,YI.prototype=r3,a3({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:YI})));var A0e,q0e,o3,YI;U0e.exports={URLSearchParams:JI,getState:ds}});var axe=I(()=>{"use strict";sF();var AAt=J(),I3=vt(),qAt=Wx(),C3=nt(),V0e=Mr(),_s=Ze(),iC=br(),ms=Yr(),RAt=go(),E3=jt(),P3=Ck(),Uv=tL(),Js=ua(),OAt=qp().codeAt,LAt=_0e(),Wu=At(),DAt=Fo(),kAt=Fa(),exe=u3(),txe=vr(),NAt=txe.set,oC=txe.getterFor("URL"),FAt=exe.URLSearchParams,zAt=exe.getState,Xx=C3.URL,T3=C3.TypeError,aC=C3.parseInt,jAt=Math.floor,$0e=Math.pow,ys=_s("".charAt),el=_s(/./.exec),Jx=_s([].join),BAt=_s(1 .toString),UAt=_s([].pop),$v=_s([].push),c3=_s("".replace),VAt=_s([].shift),$At=_s("".split),tb=_s("".slice),sC=_s("".toLowerCase),GAt=_s([].unshift),ZAt="Invalid authority",h3="Invalid scheme",Bp="Invalid host",G0e="Invalid port",rxe=/[a-z]/i,WAt=/[\d+-.a-z]/i,S3=/\d/,HAt=/^0x/i,KAt=/^[0-7]+$/,YAt=/^\d+$/,nxe=/^[\da-f]+$/i,XAt=/[\0\t\n\r #%/:<>?@[\\\]^|]/,QAt=/[\0\t\n\r #/:<>?@[\\\]^|]/,JAt=/^[\u0000-\u0020]+/,eqt=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,tqt=/[\t\n\r]/g,vs,rqt=function(e){var t=$At(e,"."),r,n,i,o,f,v,x;if(t.length&&t[t.length-1]===""&&t.length--,r=t.length,r>4)return e;for(n=[],i=0;i<r;i++){if(o=t[i],o==="")return e;if(f=10,o.length>1&&ys(o,0)==="0"&&(f=el(HAt,o)?16:8,o=tb(o,f===8?1:2)),o==="")v=0;else{if(!el(f===10?YAt:f===8?KAt:nxe,o))return e;v=aC(o,f)}$v(n,v)}for(i=0;i<r;i++)if(v=n[i],i===r-1){if(v>=$0e(256,5-r))return null}else if(v>255)return null;for(x=UAt(n),i=0;i<n.length;i++)x+=n[i]*$0e(256,3-i);return x},nqt=function(e){var t=[0,0,0,0,0,0,0,0],r=0,n=null,i=0,o,f,v,x,E,S,P,q=function(){return ys(e,i)};if(q()===":"){if(ys(e,1)!==":")return;i+=2,r++,n=r}for(;q();){if(r===8)return;if(q()===":"){if(n!==null)return;i++,r++,n=r;continue}for(o=f=0;f<4&&el(nxe,q());)o=o*16+aC(q(),16),i++,f++;if(q()==="."){if(f===0||(i-=f,r>6))return;for(v=0;q();){if(x=null,v>0)if(q()==="."&&v<4)i++;else return;if(!el(S3,q()))return;for(;el(S3,q());){if(E=aC(q(),10),x===null)x=E;else{if(x===0)return;x=x*10+E}if(x>255)return;i++}t[r]=t[r]*256+x,v++,(v===2||v===4)&&r++}if(v!==4)return;break}else if(q()===":"){if(i++,!q())return}else if(q())return;t[r++]=o}if(n!==null)for(S=r-n,r=7;r!==0&&S>0;)P=t[r],t[r--]=t[n+S-1],t[n+--S]=P;else if(r!==8)return;return t},iqt=function(e){for(var t=null,r=1,n=null,i=0,o=0;o<8;o++)e[o]!==0?(i>r&&(t=n,r=i),n=null,i=0):(n===null&&(n=o),++i);return i>r?n:t},Qx=function(e){var t,r,n,i;if(typeof e=="number"){for(t=[],r=0;r<4;r++)GAt(t,e%256),e=jAt(e/256);return Jx(t,".")}if(typeof e=="object"){for(t="",n=iqt(e),r=0;r<8;r++)i&&e[r]===0||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=BAt(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},nC={},ixe=P3({},nC,{" ":1,"\"":1,"<":1,">":1,"`":1}),oxe=P3({},ixe,{"#":1,"?":1,"{":1,"}":1}),f3=P3({},oxe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Uh=function(e,t){var r=OAt(e,0);return r>32&&r<127&&!E3(t,e)?e:encodeURIComponent(e)},eC={ftp:21,file:null,http:80,https:443,ws:80,wss:443},eb=function(e,t){var r;return e.length===2&&el(rxe,ys(e,0))&&((r=ys(e,1))===":"||!t&&r==="|")},Z0e=function(e){var t;return e.length>1&&eb(tb(e,0,2))&&(e.length===2||(t=ys(e,2))==="/"||t==="\\"||t==="?"||t==="#")},oqt=function(e){return e==="."||sC(e)==="%2e"},aqt=function(e){return e=sC(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},p3={},W0e={},d3={},H0e={},K0e={},m3={},Y0e={},X0e={},tC={},rC={},v3={},g3={},y3={},_3={},Q0e={},x3={},Vv={},zl={},J0e={},Up={},Zu={},M3=function(e,t,r){var n=Wu(e),i,o,f;if(t){if(o=this.parse(n),o)throw new T3(o);this.searchParams=null}else{if(r!==void 0&&(i=new M3(r,!0)),o=this.parse(n,null,i),o)throw new T3(o);f=zAt(new FAt),f.bindURL(this),this.searchParams=f}};M3.prototype={type:"URL",parse:function(e,t,r){var n=this,i=t||p3,o=0,f="",v=!1,x=!1,E=!1,S,P,q,F;for(e=Wu(e),t||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,e=c3(e,JAt,""),e=c3(e,eqt,"$1")),e=c3(e,tqt,""),S=Uv(e);o<=S.length;){switch(P=S[o],i){case p3:if(P&&el(rxe,P))f+=sC(P),i=W0e;else{if(t)return h3;i=d3;continue}break;case W0e:if(P&&(el(WAt,P)||P==="+"||P==="-"||P==="."))f+=sC(P);else if(P===":"){if(t&&(n.isSpecial()!==E3(eC,f)||f==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=f,t){n.isSpecial()&&eC[n.scheme]===n.port&&(n.port=null);return}f="",n.scheme==="file"?i=_3:n.isSpecial()&&r&&r.scheme===n.scheme?i=H0e:n.isSpecial()?i=X0e:S[o+1]==="/"?(i=K0e,o++):(n.cannotBeABaseURL=!0,$v(n.path,""),i=J0e)}else{if(t)return h3;f="",i=d3,o=0;continue}break;case d3:if(!r||r.cannotBeABaseURL&&P!=="#")return h3;if(r.cannotBeABaseURL&&P==="#"){n.scheme=r.scheme,n.path=Js(r.path),n.query=r.query,n.fragment="",n.cannotBeABaseURL=!0,i=Zu;break}i=r.scheme==="file"?_3:m3;continue;case H0e:if(P==="/"&&S[o+1]==="/")i=tC,o++;else{i=m3;continue}break;case K0e:if(P==="/"){i=rC;break}else{i=zl;continue}case m3:if(n.scheme=r.scheme,P===vs)n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Js(r.path),n.query=r.query;else if(P==="/"||P==="\\"&&n.isSpecial())i=Y0e;else if(P==="?")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Js(r.path),n.query="",i=Up;else if(P==="#")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Js(r.path),n.query=r.query,n.fragment="",i=Zu;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Js(r.path),n.path.length--,i=zl;continue}break;case Y0e:if(n.isSpecial()&&(P==="/"||P==="\\"))i=tC;else if(P==="/")i=rC;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,i=zl;continue}break;case X0e:if(i=tC,P!=="/"||ys(f,o+1)!=="/")continue;o++;break;case tC:if(P!=="/"&&P!=="\\"){i=rC;continue}break;case rC:if(P==="@"){v&&(f="%40"+f),v=!0,q=Uv(f);for(var K=0;K<q.length;K++){var ne=q[K];if(ne===":"&&!E){E=!0;continue}var Z=Uh(ne,f3);E?n.password+=Z:n.username+=Z}f=""}else if(P===vs||P==="/"||P==="?"||P==="#"||P==="\\"&&n.isSpecial()){if(v&&f==="")return ZAt;o-=Uv(f).length+1,f="",i=v3}else f+=P;break;case v3:case g3:if(t&&n.scheme==="file"){i=x3;continue}else if(P===":"&&!x){if(f==="")return Bp;if(F=n.parseHost(f),F)return F;if(f="",i=y3,t===g3)return}else if(P===vs||P==="/"||P==="?"||P==="#"||P==="\\"&&n.isSpecial()){if(n.isSpecial()&&f==="")return Bp;if(t&&f===""&&(n.includesCredentials()||n.port!==null))return;if(F=n.parseHost(f),F)return F;if(f="",i=Vv,t)return;continue}else P==="["?x=!0:P==="]"&&(x=!1),f+=P;break;case y3:if(el(S3,P))f+=P;else if(P===vs||P==="/"||P==="?"||P==="#"||P==="\\"&&n.isSpecial()||t){if(f!==""){var W=aC(f,10);if(W>65535)return G0e;n.port=n.isSpecial()&&W===eC[n.scheme]?null:W,f=""}if(t)return;i=Vv;continue}else return G0e;break;case _3:if(n.scheme="file",P==="/"||P==="\\")i=Q0e;else if(r&&r.scheme==="file")switch(P){case vs:n.host=r.host,n.path=Js(r.path),n.query=r.query;break;case"?":n.host=r.host,n.path=Js(r.path),n.query="",i=Up;break;case"#":n.host=r.host,n.path=Js(r.path),n.query=r.query,n.fragment="",i=Zu;break;default:Z0e(Jx(Js(S,o),""))||(n.host=r.host,n.path=Js(r.path),n.shortenPath()),i=zl;continue}else{i=zl;continue}break;case Q0e:if(P==="/"||P==="\\"){i=x3;break}r&&r.scheme==="file"&&!Z0e(Jx(Js(S,o),""))&&(eb(r.path[0],!0)?$v(n.path,r.path[0]):n.host=r.host),i=zl;continue;case x3:if(P===vs||P==="/"||P==="\\"||P==="?"||P==="#"){if(!t&&eb(f))i=zl;else if(f===""){if(n.host="",t)return;i=Vv}else{if(F=n.parseHost(f),F)return F;if(n.host==="localhost"&&(n.host=""),t)return;f="",i=Vv}continue}else f+=P;break;case Vv:if(n.isSpecial()){if(i=zl,P!=="/"&&P!=="\\")continue}else if(!t&&P==="?")n.query="",i=Up;else if(!t&&P==="#")n.fragment="",i=Zu;else if(P!==vs&&(i=zl,P!=="/"))continue;break;case zl:if(P===vs||P==="/"||P==="\\"&&n.isSpecial()||!t&&(P==="?"||P==="#")){if(aqt(f)?(n.shortenPath(),P!=="/"&&!(P==="\\"&&n.isSpecial())&&$v(n.path,"")):oqt(f)?P!=="/"&&!(P==="\\"&&n.isSpecial())&&$v(n.path,""):(n.scheme==="file"&&!n.path.length&&eb(f)&&(n.host&&(n.host=""),f=ys(f,0)+":"),$v(n.path,f)),f="",n.scheme==="file"&&(P===vs||P==="?"||P==="#"))for(;n.path.length>1&&n.path[0]==="";)VAt(n.path);P==="?"?(n.query="",i=Up):P==="#"&&(n.fragment="",i=Zu)}else f+=Uh(P,oxe);break;case J0e:P==="?"?(n.query="",i=Up):P==="#"?(n.fragment="",i=Zu):P!==vs&&(n.path[0]+=Uh(P,nC));break;case Up:!t&&P==="#"?(n.fragment="",i=Zu):P!==vs&&(P==="'"&&n.isSpecial()?n.query+="%27":P==="#"?n.query+="%23":n.query+=Uh(P,nC));break;case Zu:P!==vs&&(n.fragment+=Uh(P,ixe));break}o++}},parseHost:function(e){var t,r,n;if(ys(e,0)==="["){if(ys(e,e.length-1)!=="]"||(t=nqt(tb(e,1,-1)),!t))return Bp;this.host=t}else if(this.isSpecial()){if(e=LAt(e),el(XAt,e)||(t=rqt(e),t===null))return Bp;this.host=t}else{if(el(QAt,e))return Bp;for(t="",r=Uv(e),n=0;n<r.length;n++)t+=Uh(r[n],nC);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return E3(eC,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&(this.scheme!=="file"||t!==1||!eb(e[0],!0))&&e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,i=e.host,o=e.port,f=e.path,v=e.query,x=e.fragment,E=t+":";return i!==null?(E+="//",e.includesCredentials()&&(E+=r+(n?":"+n:"")+"@"),E+=Qx(i),o!==null&&(E+=":"+o)):t==="file"&&(E+="//"),E+=e.cannotBeABaseURL?f[0]:f.length?"/"+Jx(f,"/"):"",v!==null&&(E+="?"+v),x!==null&&(E+="#"+x),E},setHref:function(e){var t=this.parse(e);if(t)throw new T3(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e==="blob")try{return new Gv(e.path[0]).origin}catch(r){return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+Qx(this.host)+(t!==null?":"+t:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Wu(e)+":",p3)},getUsername:function(){return this.username},setUsername:function(e){var t=Uv(Wu(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=Uh(t[r],f3)}},getPassword:function(){return this.password},setPassword:function(e){var t=Uv(Wu(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=Uh(t[r],f3)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?Qx(e):Qx(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,v3)},getHostname:function(){var e=this.host;return e===null?"":Qx(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,g3)},getPort:function(){var e=this.port;return e===null?"":Wu(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=Wu(e),e===""?this.port=null:this.parse(e,y3))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+Jx(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Vv))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=Wu(e),e===""?this.query=null:(ys(e,0)==="?"&&(e=tb(e,1)),this.query="",this.parse(e,Up)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=Wu(e),e===""){this.fragment=null;return}ys(e,0)==="#"&&(e=tb(e,1)),this.fragment="",this.parse(e,Zu)},update:function(){this.query=this.searchParams.serialize()||null}};var Gv=function(t){var r=RAt(this,Bo),n=kAt(arguments.length,1)>1?arguments[1]:void 0,i=NAt(r,new M3(t,!1,n));I3||(r.href=i.serialize(),r.origin=i.getOrigin(),r.protocol=i.getProtocol(),r.username=i.getUsername(),r.password=i.getPassword(),r.host=i.getHost(),r.hostname=i.getHostname(),r.port=i.getPort(),r.pathname=i.getPathname(),r.search=i.getSearch(),r.searchParams=i.getSearchParams(),r.hash=i.getHash())},Bo=Gv.prototype,gs=function(e,t){return{get:function(){return oC(this)[e]()},set:t&&function(r){return oC(this)[t](r)},configurable:!0,enumerable:!0}};I3&&(ms(Bo,"href",gs("serialize","setHref")),ms(Bo,"origin",gs("getOrigin")),ms(Bo,"protocol",gs("getProtocol","setProtocol")),ms(Bo,"username",gs("getUsername","setUsername")),ms(Bo,"password",gs("getPassword","setPassword")),ms(Bo,"host",gs("getHost","setHost")),ms(Bo,"hostname",gs("getHostname","setHostname")),ms(Bo,"port",gs("getPort","setPort")),ms(Bo,"pathname",gs("getPathname","setPathname")),ms(Bo,"search",gs("getSearch","setSearch")),ms(Bo,"searchParams",gs("getSearchParams")),ms(Bo,"hash",gs("getHash","setHash")));iC(Bo,"toJSON",function(){return oC(this).serialize()},{enumerable:!0});iC(Bo,"toString",function(){return oC(this).serialize()},{enumerable:!0});Xx&&(b3=Xx.createObjectURL,w3=Xx.revokeObjectURL,b3&&iC(Gv,"createObjectURL",V0e(b3,Xx)),w3&&iC(Gv,"revokeObjectURL",V0e(w3,Xx)));var b3,w3;DAt(Gv,"URL");AAt({global:!0,constructor:!0,forced:!qAt,sham:!I3},{URL:Gv})});var sxe=I(()=>{"use strict";axe()});var cxe=I(()=>{"use strict";var sqt=J(),lqt=Ct(),uxe=Ye(),uqt=Fa(),lxe=At(),cqt=Wx(),A3=lqt("URL"),hqt=cqt&&uxe(function(){A3.canParse()}),fqt=uxe(function(){return A3.canParse.length!==1});sqt({target:"URL",stat:!0,forced:!hqt||fqt},{canParse:function(t){var r=uqt(arguments.length,1),n=lxe(t),i=r<2||arguments[1]===void 0?void 0:lxe(arguments[1]);try{return!!new A3(n,i)}catch(o){return!1}}})});var fxe=I(()=>{"use strict";var pqt=J(),dqt=Ct(),mqt=Fa(),hxe=At(),vqt=Wx(),gqt=dqt("URL");pqt({target:"URL",stat:!0,forced:!vqt},{parse:function(t){var r=mqt(arguments.length,1),n=hxe(t),i=r<2||arguments[1]===void 0?void 0:hxe(arguments[1]);try{return new gqt(n,i)}catch(o){return null}}})});var pxe=I(()=>{"use strict";var yqt=J(),_qt=it();yqt({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return _qt(URL.prototype.toString,this)}})});var dxe=I(()=>{"use strict";u3()});var yxe=I(()=>{"use strict";var xqt=br(),lC=Ze(),mxe=At(),bqt=Fa(),gxe=URLSearchParams,uC=gxe.prototype,wqt=lC(uC.append),vxe=lC(uC.delete),Eqt=lC(uC.forEach),Tqt=lC([].push),q3=new gxe("a=1&a=2&b=3");q3.delete("a",1);q3.delete("b",void 0);q3+""!="a=2"&&xqt(uC,"delete",function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&r===void 0)return vxe(this,e);var n=[];Eqt(this,function(P,q){Tqt(n,{key:q,value:P})}),bqt(t,1);for(var i=mxe(e),o=mxe(r),f=0,v=0,x=!1,E=n.length,S;f<E;)S=n[f++],x||S.key===i?(x=!0,vxe(this,S.key)):v++;for(;v<E;)S=n[v++],S.key===i&&S.value===o||wqt(this,S.key,S.value)},{enumerable:!0,unsafe:!0})});var wxe=I(()=>{"use strict";var Sqt=br(),xxe=Ze(),Iqt=At(),Cqt=Fa(),bxe=URLSearchParams,R3=bxe.prototype,Pqt=xxe(R3.getAll),Mqt=xxe(R3.has),_xe=new bxe("a=1");(_xe.has("a",2)||!_xe.has("a",void 0))&&Sqt(R3,"has",function(t){var r=arguments.length,n=r<2?void 0:arguments[1];if(r&&n===void 0)return Mqt(this,t);var i=Pqt(this,t);Cqt(r,1);for(var o=Iqt(n),f=0;f<i.length;)if(i[f++]===o)return!0;return!1},{enumerable:!0,unsafe:!0})});var Exe=I(()=>{"use strict";var Aqt=vt(),qqt=Ze(),Rqt=Yr(),O3=URLSearchParams.prototype,Oqt=qqt(O3.forEach);Aqt&&!("size"in O3)&&Rqt(O3,"size",{get:function(){var t=0;return Oqt(this,function(){t++}),t},configurable:!0,enumerable:!0})});var Sxe=I((Mar,Txe)=>{"use strict";x9();C9();P9();M9();A9();q9();R9();O9();L9();D9();k9();N9();F9();z9();j9();fK();gK();UO();NK();ZO();GK();KK();XK();e7();t7();n7();o7();XO();QO();c7();h7();d7();E7();T7();I7();C7();x0();H7();Q7();J7();tY();nY();hY();pY();mY();yY();_Y();DY();FY();zY();yL();xL();bL();VY();$Y();GY();EL();wX();LX();jX();UX();VL();WL();YL();hD();fD();gQ();_Q();wQ();EQ();OQ();LQ();zQ();VQ();GQ();XQ();eJ();iJ();_D();TD();MD();qD();OD();DD();BD();VD();$D();NT();WD();KD();XD();QD();CO();kJ();UT();ak();iee();see();uee();cee();hee();dee();vee();gee();ck();_ee();bee();Eee();Tee();See();Iee();Mee();Ree();Oee();Lee();Gee();Zee();Hee();Yee();Xee();Qee();Jee();ete();ate();dte();_te();Ste();Pte();Ote();Lte();Nte();zte();Bte();Ute();Hte();Kte();Yte();Jte();ere();tre();nre();Ak();qk();are();lre();cre();fre();dre();mre();vre();gre();wre();Ere();Tre();Cre();Pre();Are();Rre();Gne();pN();dN();Yne();yN();_N();Jne();aie();uie();cie();die();mie();vie();gie();yie();_ie();xie();Sie();Cie();Pie();Gie();DN();Jie();fS();ooe();soe();coe();doe();voe();VN();ZN();HN();YN();QN();tF();nF();Woe();Xoe();rae();oF();aae();aF();sF();xae();dF();qae();Rae();kae();Nae();Vae();TF();Hae();Jae();rse();ise();qF();hse();vse();bse();Sse();Ise();Cse();Pse();Mse();Ase();qse();Rse();Ose();Lse();Dse();kse();Nse();cle();hle();fle();ple();dle();mle();vle();gle();yle();ZF();ble();Ele();Sle();Ple();Ale();Rle();WF();HF();kle();Nle();zle();Ble();Zle();Hle();Yle();Xle();Jle();tue();nue();oue();hue();fue();due();xue();wue();Cue();lz();uz();Mue();hz();Lue();BS();Yue();Xue();ece();Cce();Pce();Mce();Ace();qce();Rce();Lce();Dce();Nce();Fce();Bce();Uce();Gce();Zce();Wce();Hce();the();rhe();nhe();ihe();ohe();yhe();Ehe();Dhe();zhe();Bhe();Uhe();$he();Ghe();Xhe();Qhe();efe();tfe();rfe();nfe();ife();sfe();lfe();mfe();bfe();Efe();Tfe();Sfe();Ife();Cfe();Rfe();kfe();Ffe();jfe();Bfe();$fe();Gfe();Zfe();Wfe();Kfe();Qfe();tpe();rpe();npe();ipe();ope();ape();spe();lpe();upe();cpe();fpe();ppe();dpe();mpe();vpe();ype();bpe();Ope();Bpe();Vpe();Gpe();Zpe();Hpe();Kpe();Ype();Jpe();ede();tde();rde();ode();sde();lde();cde();fde();pde();vde();gde();yde();xde();wde();Ede();Pde();Mde();Ade();Rde();Ode();Lde();Dde();kde();Nde();Fde();zde();Vde();$de();Kde();Yde();Jde();eme();tme();ome();ame();sme();lme();Eme();Tme();Sme();Ime();Cme();Ome();Dme();Nme();Bme();Vme();Gme();Hme();Yme();Qme();Jme();eve();tve();rve();sve();lve();cve();hve();pve();dve();mve();vve();gve();yve();_ve();xve();bve();Eve();Sve();Cve();Pve();Mve();Ave();qve();Rve();Ove();Lve();zve();$ve();cge();hge();fge();pge();dge();mge();vge();gge();_ge();xge();Cge();Pge();Mge();Age();qge();Rge();Oge();Lge();kge();Nge();zge();Bge();Uge();Vge();$ge();Gge();Zge();Wge();Hge();Kge();sye();fye();dye();mye();gye();yye();xye();wye();Tye();Iye();Cye();qye();Rye();Dye();kye();Fye();jye();Wye();Qye();o_e();c_e();E_e();A_e();R_e();B_e();U_e();$_e();t0e();l0e();sxe();cxe();fxe();pxe();dxe();yxe();wxe();Exe();Txe.exports=HE()});var Cxe=I((Aar,Ixe)=>{"use strict";Ixe.exports=Sxe()});var L3=I((qar,Pxe)=>{"use strict";Pxe.exports=function(t,r){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return t.apply(r,i)}}});var va=I((Rar,qxe)=>{"use strict";var Lqt=L3(),Vp=Object.prototype.toString;function N3(e){return Vp.call(e)==="[object Array]"}function D3(e){return typeof e=="undefined"}function Dqt(e){return e!==null&&!D3(e)&&e.constructor!==null&&!D3(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function kqt(e){return Vp.call(e)==="[object ArrayBuffer]"}function Nqt(e){return typeof FormData!="undefined"&&e instanceof FormData}function Fqt(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function zqt(e){return typeof e=="string"}function jqt(e){return typeof e=="number"}function Mxe(e){return e!==null&&typeof e=="object"}function cC(e){if(Vp.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function Bqt(e){return Vp.call(e)==="[object Date]"}function Uqt(e){return Vp.call(e)==="[object File]"}function Vqt(e){return Vp.call(e)==="[object Blob]"}function Axe(e){return Vp.call(e)==="[object Function]"}function $qt(e){return Mxe(e)&&Axe(e.pipe)}function Gqt(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function Zqt(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Wqt(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function F3(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),N3(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function k3(){var e={};function t(i,o){cC(e[o])&&cC(i)?e[o]=k3(e[o],i):cC(i)?e[o]=k3({},i):N3(i)?e[o]=i.slice():e[o]=i}for(var r=0,n=arguments.length;r<n;r++)F3(arguments[r],t);return e}function Hqt(e,t,r){return F3(t,function(i,o){r&&typeof i=="function"?e[o]=Lqt(i,r):e[o]=i}),e}function Kqt(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}qxe.exports={isArray:N3,isArrayBuffer:kqt,isBuffer:Dqt,isFormData:Nqt,isArrayBufferView:Fqt,isString:zqt,isNumber:jqt,isObject:Mxe,isPlainObject:cC,isUndefined:D3,isDate:Bqt,isFile:Uqt,isBlob:Vqt,isFunction:Axe,isStream:$qt,isURLSearchParams:Gqt,isStandardBrowserEnv:Wqt,forEach:F3,merge:k3,extend:Hqt,trim:Zqt,stripBOM:Kqt}});var z3=I((Oar,Oxe)=>{"use strict";var Zv=va();function Rxe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Oxe.exports=function(t,r,n){if(!r)return t;var i;if(n)i=n(r);else if(Zv.isURLSearchParams(r))i=r.toString();else{var o=[];Zv.forEach(r,function(x,E){x===null||typeof x=="undefined"||(Zv.isArray(x)?E=E+"[]":x=[x],Zv.forEach(x,function(P){Zv.isDate(P)?P=P.toISOString():Zv.isObject(P)&&(P=JSON.stringify(P)),o.push(Rxe(E)+"="+Rxe(P))}))}),i=o.join("&")}if(i){var f=t.indexOf("#");f!==-1&&(t=t.slice(0,f)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}});var Dxe=I((Lar,Lxe)=>{"use strict";var Yqt=va();function hC(){this.handlers=[]}hC.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};hC.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};hC.prototype.forEach=function(t){Yqt.forEach(this.handlers,function(n){n!==null&&t(n)})};Lxe.exports=hC});var Nxe=I((Dar,kxe)=>{"use strict";var Xqt=va();kxe.exports=function(t,r){Xqt.forEach(t,function(i,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(t[r]=i,delete t[o])})}});var j3=I((kar,Fxe)=>{"use strict";Fxe.exports=function(t,r,n,i,o){return t.config=r,n&&(t.code=n),t.request=i,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}});var B3=I((Nar,zxe)=>{"use strict";var Qqt=j3();zxe.exports=function(t,r,n,i,o){var f=new Error(t);return Qqt(f,r,n,i,o)}});var Bxe=I((Far,jxe)=>{"use strict";var Jqt=B3();jxe.exports=function(t,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):r(Jqt("Request failed with status code "+n.status,n.config,null,n.request,n))}});var Vxe=I((zar,Uxe)=>{"use strict";var fC=va();Uxe.exports=fC.isStandardBrowserEnv()?function(){return{write:function(r,n,i,o,f,v){var x=[];x.push(r+"="+encodeURIComponent(n)),fC.isNumber(i)&&x.push("expires="+new Date(i).toGMTString()),fC.isString(o)&&x.push("path="+o),fC.isString(f)&&x.push("domain="+f),v===!0&&x.push("secure"),document.cookie=x.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Gxe=I((jar,$xe)=>{"use strict";$xe.exports=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}});var Wxe=I((Bar,Zxe)=>{"use strict";Zxe.exports=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}});var Kxe=I((Uar,Hxe)=>{"use strict";var e2t=Gxe(),t2t=Wxe();Hxe.exports=function(t,r){return t&&!e2t(r)?t2t(t,r):r}});var Xxe=I((Var,Yxe)=>{"use strict";var U3=va(),r2t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Yxe.exports=function(t){var r={},n,i,o;return t&&U3.forEach(t.split(`
`),function(v){if(o=v.indexOf(":"),n=U3.trim(v.substr(0,o)).toLowerCase(),i=U3.trim(v.substr(o+1)),n){if(r[n]&&r2t.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r}});var ebe=I(($ar,Jxe)=>{"use strict";var Qxe=va();Jxe.exports=Qxe.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(o){var f=o;return t&&(r.setAttribute("href",f),f=r.href),r.setAttribute("href",f),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(f){var v=Qxe.isString(f)?i(f):f;return v.protocol===n.protocol&&v.host===n.host}}():function(){return function(){return!0}}()});var rb=I((Gar,tbe)=>{"use strict";function V3(e){this.message=e}V3.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};V3.prototype.__CANCEL__=!0;tbe.exports=V3});var G3=I((Zar,rbe)=>{"use strict";var pC=va(),n2t=Bxe(),i2t=Vxe(),o2t=z3(),a2t=Kxe(),s2t=Xxe(),l2t=ebe(),$3=B3(),u2t=nb(),c2t=rb();rbe.exports=function(t){return new Promise(function(n,i){var o=t.data,f=t.headers,v=t.responseType,x;function E(){t.cancelToken&&t.cancelToken.unsubscribe(x),t.signal&&t.signal.removeEventListener("abort",x)}pC.isFormData(o)&&delete f["Content-Type"];var S=new XMLHttpRequest;if(t.auth){var P=t.auth.username||"",q=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";f.Authorization="Basic "+btoa(P+":"+q)}var F=a2t(t.baseURL,t.url);S.open(t.method.toUpperCase(),o2t(F,t.params,t.paramsSerializer),!0),S.timeout=t.timeout;function K(){if(S){var Z="getAllResponseHeaders"in S?s2t(S.getAllResponseHeaders()):null,W=!v||v==="text"||v==="json"?S.responseText:S.response,Q={data:W,status:S.status,statusText:S.statusText,headers:Z,config:t,request:S};n2t(function(ce){n(ce),E()},function(ce){i(ce),E()},Q),S=null}}if("onloadend"in S?S.onloadend=K:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(K)},S.onabort=function(){S&&(i($3("Request aborted",t,"ECONNABORTED",S)),S=null)},S.onerror=function(){i($3("Network Error",t,null,S)),S=null},S.ontimeout=function(){var W=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",Q=t.transitional||u2t.transitional;t.timeoutErrorMessage&&(W=t.timeoutErrorMessage),i($3(W,t,Q.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",S)),S=null},pC.isStandardBrowserEnv()){var ne=(t.withCredentials||l2t(F))&&t.xsrfCookieName?i2t.read(t.xsrfCookieName):void 0;ne&&(f[t.xsrfHeaderName]=ne)}"setRequestHeader"in S&&pC.forEach(f,function(W,Q){typeof o=="undefined"&&Q.toLowerCase()==="content-type"?delete f[Q]:S.setRequestHeader(Q,W)}),pC.isUndefined(t.withCredentials)||(S.withCredentials=!!t.withCredentials),v&&v!=="json"&&(S.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&S.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&S.upload&&S.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(x=function(Z){S&&(i(!Z||Z&&Z.type?new c2t("canceled"):Z),S.abort(),S=null)},t.cancelToken&&t.cancelToken.subscribe(x),t.signal&&(t.signal.aborted?x():t.signal.addEventListener("abort",x))),o||(o=null),S.send(o)})}});var nb=I((War,obe)=>{"use strict";var eo=va(),nbe=Nxe(),h2t=j3(),f2t={"Content-Type":"application/x-www-form-urlencoded"};function ibe(e,t){!eo.isUndefined(e)&&eo.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function p2t(){var e;return typeof XMLHttpRequest!="undefined"?e=G3():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(e=G3()),e}function d2t(e,t,r){if(eo.isString(e))try{return(t||JSON.parse)(e),eo.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var dC={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:p2t(),transformRequest:[function(t,r){return nbe(r,"Accept"),nbe(r,"Content-Type"),eo.isFormData(t)||eo.isArrayBuffer(t)||eo.isBuffer(t)||eo.isStream(t)||eo.isFile(t)||eo.isBlob(t)?t:eo.isArrayBufferView(t)?t.buffer:eo.isURLSearchParams(t)?(ibe(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):eo.isObject(t)||r&&r["Content-Type"]==="application/json"?(ibe(r,"application/json"),d2t(t)):t}],transformResponse:[function(t){var r=this.transitional||dC.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&eo.isString(t)&&t.length)try{return JSON.parse(t)}catch(f){if(o)throw f.name==="SyntaxError"?h2t(f,this,"E_JSON_PARSE"):f}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};eo.forEach(["delete","get","head"],function(t){dC.headers[t]={}});eo.forEach(["post","put","patch"],function(t){dC.headers[t]=eo.merge(f2t)});obe.exports=dC});var sbe=I((Har,abe)=>{"use strict";var m2t=va(),v2t=nb();abe.exports=function(t,r,n){var i=this||v2t;return m2t.forEach(n,function(f){t=f.call(i,t,r)}),t}});var Z3=I((Kar,lbe)=>{"use strict";lbe.exports=function(t){return!!(t&&t.__CANCEL__)}});var hbe=I((Yar,cbe)=>{"use strict";var ube=va(),W3=sbe(),g2t=Z3(),y2t=nb(),_2t=rb();function H3(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new _2t("canceled")}cbe.exports=function(t){H3(t),t.headers=t.headers||{},t.data=W3.call(t,t.data,t.headers,t.transformRequest),t.headers=ube.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),ube.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var r=t.adapter||y2t.adapter;return r(t).then(function(i){return H3(t),i.data=W3.call(t,i.data,i.headers,t.transformResponse),i},function(i){return g2t(i)||(H3(t),i&&i.response&&(i.response.data=W3.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})}});var K3=I((Xar,fbe)=>{"use strict";var ja=va();fbe.exports=function(t,r){r=r||{};var n={};function i(S,P){return ja.isPlainObject(S)&&ja.isPlainObject(P)?ja.merge(S,P):ja.isPlainObject(P)?ja.merge({},P):ja.isArray(P)?P.slice():P}function o(S){if(ja.isUndefined(r[S])){if(!ja.isUndefined(t[S]))return i(void 0,t[S])}else return i(t[S],r[S])}function f(S){if(!ja.isUndefined(r[S]))return i(void 0,r[S])}function v(S){if(ja.isUndefined(r[S])){if(!ja.isUndefined(t[S]))return i(void 0,t[S])}else return i(void 0,r[S])}function x(S){if(S in r)return i(t[S],r[S]);if(S in t)return i(void 0,t[S])}var E={url:f,method:f,data:f,baseURL:v,transformRequest:v,transformResponse:v,paramsSerializer:v,timeout:v,timeoutMessage:v,withCredentials:v,adapter:v,responseType:v,xsrfCookieName:v,xsrfHeaderName:v,onUploadProgress:v,onDownloadProgress:v,decompress:v,maxContentLength:v,maxBodyLength:v,transport:v,httpAgent:v,httpsAgent:v,cancelToken:v,socketPath:v,responseEncoding:v,validateStatus:x};return ja.forEach(Object.keys(t).concat(Object.keys(r)),function(P){var q=E[P]||o,F=q(P);ja.isUndefined(F)&&q!==x||(n[P]=F)}),n}});var Y3=I((Qar,pbe)=>{pbe.exports={version:"0.24.0"}});var vbe=I((Jar,mbe)=>{"use strict";var x2t=Y3().version,X3={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){X3[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var dbe={};X3.transitional=function(t,r,n){function i(o,f){return"[Axios v"+x2t+"] Transitional option '"+o+"'"+f+(n?". "+n:"")}return function(o,f,v){if(t===!1)throw new Error(i(f," has been removed"+(r?" in "+r:"")));return r&&!dbe[f]&&(dbe[f]=!0,console.warn(i(f," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,f,v):!0}};function b2t(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-->0;){var o=n[i],f=t[o];if(f){var v=e[o],x=v===void 0||f(v,o,e);if(x!==!0)throw new TypeError("option "+o+" must be "+x);continue}if(r!==!0)throw Error("Unknown option "+o)}}mbe.exports={assertOptions:b2t,validators:X3}});var wbe=I((esr,bbe)=>{"use strict";var _be=va(),w2t=z3(),gbe=Dxe(),ybe=hbe(),mC=K3(),xbe=vbe(),Wv=xbe.validators;function ib(e){this.defaults=e,this.interceptors={request:new gbe,response:new gbe}}ib.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=mC(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&xbe.assertOptions(r,{silentJSONParsing:Wv.transitional(Wv.boolean),forcedJSONParsing:Wv.transitional(Wv.boolean),clarifyTimeoutError:Wv.transitional(Wv.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(q){typeof q.runWhen=="function"&&q.runWhen(t)===!1||(i=i&&q.synchronous,n.unshift(q.fulfilled,q.rejected))});var o=[];this.interceptors.response.forEach(function(q){o.push(q.fulfilled,q.rejected)});var f;if(!i){var v=[ybe,void 0];for(Array.prototype.unshift.apply(v,n),v=v.concat(o),f=Promise.resolve(t);v.length;)f=f.then(v.shift(),v.shift());return f}for(var x=t;n.length;){var E=n.shift(),S=n.shift();try{x=E(x)}catch(P){S(P);break}}try{f=ybe(x)}catch(P){return Promise.reject(P)}for(;o.length;)f=f.then(o.shift(),o.shift());return f};ib.prototype.getUri=function(t){return t=mC(this.defaults,t),w2t(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};_be.forEach(["delete","get","head","options"],function(t){ib.prototype[t]=function(r,n){return this.request(mC(n||{},{method:t,url:r,data:(n||{}).data}))}});_be.forEach(["post","put","patch"],function(t){ib.prototype[t]=function(r,n,i){return this.request(mC(i||{},{method:t,url:r,data:n}))}});bbe.exports=ib});var Tbe=I((tsr,Ebe)=>{"use strict";var E2t=rb();function Hv(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(i){t=i});var r=this;this.promise.then(function(n){if(r._listeners){var i,o=r._listeners.length;for(i=0;i<o;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,o=new Promise(function(f){r.subscribe(f),i=f}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i){r.reason||(r.reason=new E2t(i),t(r.reason))})}Hv.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Hv.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};Hv.prototype.unsubscribe=function(t){if(this._listeners){var r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}};Hv.source=function(){var t,r=new Hv(function(i){t=i});return{token:r,cancel:t}};Ebe.exports=Hv});var Ibe=I((rsr,Sbe)=>{"use strict";Sbe.exports=function(t){return function(n){return t.apply(null,n)}}});var Pbe=I((nsr,Cbe)=>{"use strict";Cbe.exports=function(t){return typeof t=="object"&&t.isAxiosError===!0}});var qbe=I((isr,Q3)=>{"use strict";var Mbe=va(),T2t=L3(),vC=wbe(),S2t=K3(),I2t=nb();function Abe(e){var t=new vC(e),r=T2t(vC.prototype.request,t);return Mbe.extend(r,vC.prototype,t),Mbe.extend(r,t),r.create=function(i){return Abe(S2t(e,i))},r}var jl=Abe(I2t);jl.Axios=vC;jl.Cancel=rb();jl.CancelToken=Tbe();jl.isCancel=Z3();jl.VERSION=Y3().version;jl.all=function(t){return Promise.all(t)};jl.spread=Ibe();jl.isAxiosError=Pbe();Q3.exports=jl;Q3.exports.default=jl});var Obe=I((osr,Rbe)=>{Rbe.exports=qbe()});var Dbe=I((J3,e4)=>{(function(e,t){typeof J3=="object"&&typeof e4!="undefined"?e4.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.maplibregl=t())})(J3,function(){"use strict";var e={},t={};function r(i,o,f){if(t[i]=f,i==="index"){var v="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",x={};return t.shared(x),t.index(e,x),typeof window!="undefined"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([v],{type:"text/javascript"}))),e}}r("shared",["exports"],function(i){"use strict";function o(c,s,u,h){return new(u||(u=Promise))(function(m,_){function b(R){try{M(h.next(R))}catch(L){_(L)}}function T(R){try{M(h.throw(R))}catch(L){_(L)}}function M(R){var L;R.done?m(R.value):(L=R.value,L instanceof u?L:new u(function(k){k(L)})).then(b,T)}M((h=h.apply(c,s||[])).next())})}function f(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var v,x;function E(){if(x)return v;function c(s,u){this.x=s,this.y=u}return x=1,v=c,c.prototype={clone:function(){return new c(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,u){return this.clone()._rotateAround(s,u)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var u=s.x-this.x,h=s.y-this.y;return u*u+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,u){return Math.atan2(this.x*u-this.y*s,this.x*s+this.y*u)},_matMult:function(s){var u=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=u,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var u=Math.cos(s),h=Math.sin(s),m=h*this.x+u*this.y;return this.x=u*this.x-h*this.y,this.y=m,this},_rotateAround:function(s,u){var h=Math.cos(s),m=Math.sin(s),_=u.y+m*(this.x-u.x)+h*(this.y-u.y);return this.x=u.x+h*(this.x-u.x)-m*(this.y-u.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},c.convert=function(s){return s instanceof c?s:Array.isArray(s)?new c(s[0],s[1]):s},v}typeof SuppressedError=="function"&&SuppressedError;var S,P,q=f(E()),F=function(){if(P)return S;function c(s,u,h,m){this.cx=3*s,this.bx=3*(h-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(m-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=u,this.p2x=h,this.p2y=m}return P=1,S=c,c.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,u){if(u===void 0&&(u=1e-6),s<0)return 0;if(s>1)return 1;for(var h=s,m=0;m<8;m++){var _=this.sampleCurveX(h)-s;if(Math.abs(_)<u)return h;var b=this.sampleCurveDerivativeX(h);if(Math.abs(b)<1e-6)break;h-=_/b}var T=0,M=1;for(h=s,m=0;m<20&&(_=this.sampleCurveX(h),!(Math.abs(_-s)<u));m++)s>_?T=h:M=h,h=.5*(M-T)+T;return h},solve:function(s,u){return this.sampleCurveY(this.solveCurveX(s,u))}},S}(),K=f(F);let ne,Z;function W(){return ne==null&&(ne=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ne}function Q(){if(Z==null&&(Z=!1,W())){let s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let h=0;h<5*5;h++){let m=4*h;s.fillStyle=`rgb(${m},${m+1},${m+2})`,s.fillRect(h%5,Math.floor(h/5),1,1)}let u=s.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&u[h]!==h){Z=!0;break}}}return Z||!1}var le=1e-6,ce=typeof Float32Array!="undefined"?Float32Array:Array;function ze(){var c=new ce(9);return ce!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function Le(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function Be(){var c=new ce(3);return ce!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function et(c){return Math.hypot(c[0],c[1],c[2])}function ot(c,s,u){var h=new ce(3);return h[0]=c,h[1]=s,h[2]=u,h}Math.hypot||(Math.hypot=function(){for(var c=0,s=arguments.length;s--;)c+=arguments[s]*arguments[s];return Math.sqrt(c)});var Ot,Wt=et;function sr(c,s,u){var h=s[0],m=s[1],_=s[2],b=s[3];return c[0]=u[0]*h+u[4]*m+u[8]*_+u[12]*b,c[1]=u[1]*h+u[5]*m+u[9]*_+u[13]*b,c[2]=u[2]*h+u[6]*m+u[10]*_+u[14]*b,c[3]=u[3]*h+u[7]*m+u[11]*_+u[15]*b,c}function On(){var c=new ce(4);return ce!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function Ln(){var c=new ce(2);return ce!=Float32Array&&(c[0]=0,c[1]=0),c}function Cr(c,s){var u=new ce(2);return u[0]=c,u[1]=s,u}Be(),Ot=new ce(4),ce!=Float32Array&&(Ot[0]=0,Ot[1]=0,Ot[2]=0,Ot[3]=0),Be(),ot(1,0,0),ot(0,1,0),On(),On(),ze(),Ln();let xt=8192;function pr(c,s,u){return s*(xt/(c.tileSize*Math.pow(2,u-c.tileID.overscaledZ)))}function Jt(c,s){return(c%s+s)%s}function oo(c,s,u){return c*(1-u)+s*u}function un(c){if(c<=0)return 0;if(c>=1)return 1;let s=c*c,u=s*c;return 4*(c<.5?u:3*(c-s)+u-.75)}function Ia(c,s,u,h){let m=new K(c,s,u,h);return _=>m.solve(_)}let Un=Ia(.25,.1,.25,1);function Br(c,s,u){return Math.min(u,Math.max(s,c))}function Vn(c,s,u){let h=u-s,m=((c-s)%h+h)%h+s;return m===s?u:m}function zt(c,...s){for(let u of s)for(let h in u)c[h]=u[h];return c}let _i=1;function xi(c,s,u){let h={};for(let m in c)h[m]=s.call(this,c[m],m,c);return h}function wn(c,s,u){let h={};for(let m in c)s.call(this,c[m],m,c)&&(h[m]=c[m]);return h}function ii(c){return Array.isArray(c)?c.map(ii):typeof c=="object"&&c?xi(c,ii):c}let Ur={};function Dn(c){Ur[c]||(typeof console!="undefined"&&console.warn(c),Ur[c]=!0)}function er(c,s,u){return(u.y-c.y)*(s.x-c.x)>(s.y-c.y)*(u.x-c.x)}function Io(c){return typeof WorkerGlobalScope!="undefined"&&c!==void 0&&c instanceof WorkerGlobalScope}let $a=null;function ki(c){return typeof ImageBitmap!="undefined"&&c instanceof ImageBitmap}let ol="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function al(c,s,u,h,m){return o(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let _=new VideoFrame(c,{timestamp:0});try{let b=_==null?void 0:_.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);let T=b.startsWith("BGR"),M=new Uint8ClampedArray(h*m*4);if(yield _.copyTo(M,function(R,L,k,j,U){let V=4*Math.max(1,0),H=(Math.max(0,k)-k)*j*4+V,te=4*j,ue=Math.max(0,L),_e=Math.max(0,k);return{rect:{x:ue,y:_e,width:Math.min(R.width,L+j)-ue,height:Math.min(R.height,k+U)-_e},layout:[{offset:H,stride:te}]}}(c,s,u,h,m)),T)for(let R=0;R<M.length;R+=4){let L=M[R];M[R]=M[R+2],M[R+2]=L}return M}finally{_.close()}})}let oi,Co;function Zo(c,s,u,h){return c.addEventListener(s,u,h),{unsubscribe:()=>{c.removeEventListener(s,u,h)}}}function Is(c){return c*Math.PI/180}function Wo(c){return c/Math.PI*180}let sl={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Cs={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Ps="AbortError";function Ca(){return new Error(Ps)}let Ho={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ga(c){return Ho.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}let Ko="global-dispatcher";class $n extends Error{constructor(s,u,h,m){super(`AJAXError: ${u} (${s}): ${h}`),this.status=s,this.statusText=u,this.url=h,this.body=m}}let ai=()=>Io(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ao=function(c,s){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){let h=Ga(c.url);if(h)return h(c,s);if(Io(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:Ko},s)}if(!(/^file:/.test(u=c.url)||/^file:/.test(ai())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,m){return o(this,void 0,void 0,function*(){let _=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:ai(),signal:m.signal}),b,T;h.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");try{b=yield fetch(_)}catch(R){throw new $n(0,R.message,h.url,new Blob())}if(!b.ok){let R=yield b.blob();throw new $n(b.status,b.statusText,h.url,R)}T=h.type==="arrayBuffer"||h.type==="image"?b.arrayBuffer():h.type==="json"?b.json():b.text();let M=yield T;if(m.signal.aborted)throw Ca();return{data:M,cacheControl:b.headers.get("Cache-Control"),expires:b.headers.get("Expires")}})}(c,s);if(Io(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:Ko},s)}var u;return function(h,m){return new Promise((_,b)=>{var T;let M=new XMLHttpRequest;M.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(M.responseType="arraybuffer");for(let R in h.headers)M.setRequestHeader(R,h.headers[R]);h.type==="json"&&(M.responseType="text",!((T=h.headers)===null||T===void 0)&&T.Accept||M.setRequestHeader("Accept","application/json")),M.withCredentials=h.credentials==="include",M.onerror=()=>{b(new Error(M.statusText))},M.onload=()=>{if(!m.signal.aborted)if((M.status>=200&&M.status<300||M.status===0)&&M.response!==null){let R=M.response;if(h.type==="json")try{R=JSON.parse(M.response)}catch(L){return void b(L)}_({data:R,cacheControl:M.getResponseHeader("Cache-Control"),expires:M.getResponseHeader("Expires")})}else{let R=new Blob([M.response],{type:M.getResponseHeader("Content-Type")});b(new $n(M.status,M.statusText,h.url,R))}},m.signal.addEventListener("abort",()=>{M.abort(),b(Ca())}),M.send(h.body)})}(c,s)};function Ee(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;let s=new URL(c),u=window.location;return s.protocol===u.protocol&&s.host===u.host}function X(c,s,u){u[c]&&u[c].indexOf(s)!==-1||(u[c]=u[c]||[],u[c].push(s))}function Y(c,s,u){if(u&&u[c]){let h=u[c].indexOf(s);h!==-1&&u[c].splice(h,1)}}class ie{constructor(s,u={}){zt(this,u),this.type=s}}class pe extends ie{constructor(s,u={}){super("error",zt({error:s},u))}}class xe{on(s,u){return this._listeners=this._listeners||{},X(s,u,this._listeners),{unsubscribe:()=>{this.off(s,u)}}}off(s,u){return Y(s,u,this._listeners),Y(s,u,this._oneTimeListeners),this}once(s,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},X(s,u,this._oneTimeListeners),this):new Promise(h=>this.once(s,h))}fire(s,u){typeof s=="string"&&(s=new ie(s,u||{}));let h=s.type;if(this.listens(h)){s.target=this;let m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(let T of m)T.call(this,s);let _=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(let T of _)Y(h,T,this._oneTimeListeners),T.call(this,s);let b=this._eventedParent;b&&(zt(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(s))}else s instanceof pe&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,u){return this._eventedParent=s,this._eventedParentData=u,this}}var re={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let Pe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function we(c,s){let u={};for(let h in c)h!=="ref"&&(u[h]=c[h]);return Pe.forEach(h=>{h in s&&(u[h]=s[h])}),u}function Se(c,s){if(Array.isArray(c)){if(!Array.isArray(s)||c.length!==s.length)return!1;for(let u=0;u<c.length;u++)if(!Se(c[u],s[u]))return!1;return!0}if(typeof c=="object"&&c!==null&&s!==null){if(typeof s!="object"||Object.keys(c).length!==Object.keys(s).length)return!1;for(let u in c)if(!Se(c[u],s[u]))return!1;return!0}return c===s}function Me(c,s){c.push(s)}function Te(c,s,u){Me(u,{command:"addSource",args:[c,s[c]]})}function Ue(c,s,u){Me(s,{command:"removeSource",args:[c]}),u[c]=!0}function Je(c,s,u,h){Ue(c,u,h),Te(c,s,u)}function tt(c,s,u){let h;for(h in c[u])if(Object.prototype.hasOwnProperty.call(c[u],h)&&h!=="data"&&!Se(c[u][h],s[u][h]))return!1;for(h in s[u])if(Object.prototype.hasOwnProperty.call(s[u],h)&&h!=="data"&&!Se(c[u][h],s[u][h]))return!1;return!0}function dt(c,s,u,h,m,_){c=c||{},s=s||{};for(let b in c)Object.prototype.hasOwnProperty.call(c,b)&&(Se(c[b],s[b])||u.push({command:_,args:[h,b,s[b],m]}));for(let b in s)Object.prototype.hasOwnProperty.call(s,b)&&!Object.prototype.hasOwnProperty.call(c,b)&&(Se(c[b],s[b])||u.push({command:_,args:[h,b,s[b],m]}))}function qt(c){return c.id}function Tt(c,s){return c[s.id]=s,c}class De{constructor(s,u,h,m){this.message=(s?`${s}: `:"")+h,m&&(this.identifier=m),u!=null&&u.__line__&&(this.line=u.__line__)}}function dr(c,...s){for(let u of s)for(let h in u)c[h]=u[h];return c}class Ht extends Error{constructor(s,u){super(u),this.message=u,this.key=s}}class lr{constructor(s,u=[]){this.parent=s,this.bindings={};for(let[h,m]of u)this.bindings[h]=m}concat(s){return new lr(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}let Et={kind:"null"},je={kind:"number"},yt={kind:"string"},Rt={kind:"boolean"},en={kind:"color"},tn={kind:"projectionDefinition"},so={kind:"object"},Lt={kind:"value"},pc={kind:"collator"},lf={kind:"formatted"},iu={kind:"padding"},uf={kind:"colorArray"},Ms={kind:"numberArray"},ou={kind:"resolvedImage"},gn={kind:"variableAnchorOffsetCollection"};function Po(c,s){return{kind:"array",itemType:c,N:s}}function Fr(c){if(c.kind==="array"){let s=Fr(c.itemType);return typeof c.N=="number"?`array<${s}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${s}>`}return c.kind}let cf=[Et,je,yt,Rt,en,tn,lf,so,Po(Lt),iu,Ms,uf,ou,gn];function dc(c,s){if(s.kind==="error")return null;if(c.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!dc(c.itemType,s.itemType))&&(typeof c.N!="number"||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if(c.kind==="value"){for(let u of cf)if(!dc(u,s))return null}}return`Expected ${Fr(c)} but found ${Fr(s)} instead.`}function jg(c,s){return s.some(u=>u.kind===c.kind)}function au(c,s){return s.some(u=>u==="null"?c===null:u==="array"?Array.isArray(c):u==="object"?c&&!Array.isArray(c)&&typeof c=="object":u===typeof c)}function As(c,s){return c.kind==="array"&&s.kind==="array"?c.itemType.kind===s.itemType.kind&&typeof c.N=="number":c.kind===s.kind}let o1=.96422,Bg=.82521,a1=4/29,mc=6/29,s1=3*mc*mc,$M=mc*mc*mc,GM=Math.PI/180,ZM=180/Math.PI;function l1(c){return(c%=360)<0&&(c+=360),c}function Ug([c,s,u,h]){let m,_,b=Vg((.2225045*(c=su(c))+.7168786*(s=su(s))+.0606169*(u=su(u)))/1);c===s&&s===u?m=_=b:(m=Vg((.4360747*c+.3850649*s+.1430804*u)/o1),_=Vg((.0139322*c+.0971045*s+.7141733*u)/Bg));let T=116*b-16;return[T<0?0:T,500*(m-b),200*(b-_),h]}function su(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Vg(c){return c>$M?Math.pow(c,1/3):c/s1+a1}function u1([c,s,u,h]){let m=(c+16)/116,_=isNaN(s)?m:m+s/500,b=isNaN(u)?m:m-u/200;return m=1*$g(m),_=o1*$g(_),b=Bg*$g(b),[lu(3.1338561*_-1.6168667*m-.4906146*b),lu(-.9787684*_+1.9161415*m+.033454*b),lu(.0719453*_-.2289914*m+1.4052427*b),h]}function lu(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function $g(c){return c>mc?c*c*c:s1*(c-a1)}let WM=Object.hasOwn||function(c,s){return Object.prototype.hasOwnProperty.call(c,s)};function hf(c,s){return WM(c,s)?c[s]:void 0}function ff(c){return parseInt(c.padEnd(2,c),16)/255}function Gg(c,s){return Ni(s?c/100:c,0,1)}function Ni(c,s,u){return Math.min(Math.max(s,c),u)}function tr(c){return!c.some(Number.isNaN)}let vc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Fi(c,s,u){return c+u*(s-c)}function uu(c,s,u){return c.map((h,m)=>Fi(h,s[m],u))}class Kt{constructor(s,u,h,m=1,_=!0){this.r=s,this.g=u,this.b=h,this.a=m,_||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[s,u,h,m]))}static parse(s){if(s instanceof Kt)return s;if(typeof s!="string")return;let u=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];let m=hf(vc,h);if(m){let[b,T,M]=m;return[b/255,T/255,M/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){let b=h.length<6?1:2,T=1;return[ff(h.slice(T,T+=b)),ff(h.slice(T,T+=b)),ff(h.slice(T,T+=b)),ff(h.slice(T,T+b)||"ff")]}if(h.startsWith("rgb")){let b=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){let[T,M,R,L,k,j,U,V,H,te,ue,_e]=b,fe=[L||" ",U||" ",te].join("");if(fe==="  "||fe==="  /"||fe===",,"||fe===",,,"){let B=[R,j,H].join(""),ee=B==="%%%"?100:B===""?255:0;if(ee){let de=[Ni(+M/ee,0,1),Ni(+k/ee,0,1),Ni(+V/ee,0,1),ue?Gg(+ue,_e):1];if(tr(de))return de}}return}}let _=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){let[b,T,M,R,L,k,j,U,V]=_,H=[M||" ",L||" ",j].join("");if(H==="  "||H==="  /"||H===",,"||H===",,,"){let te=[+T,Ni(+R,0,100),Ni(+k,0,100),U?Gg(+U,V):1];if(tr(te))return function([ue,_e,fe,B]){function ee(de){let Ce=(de+ue/30)%12,Ve=_e*Math.min(fe,1-fe);return fe-Ve*Math.max(-1,Math.min(Ce-3,9-Ce,1))}return ue=l1(ue),_e/=100,fe/=100,[ee(0),ee(8),ee(4),B]}(te)}}}(s);return u?new Kt(...u,!1):void 0}get rgb(){let{r:s,g:u,b:h,a:m}=this,_=m||1/0;return this.overwriteGetter("rgb",[s/_,u/_,h/_,m])}get hcl(){return this.overwriteGetter("hcl",function(s){let[u,h,m,_]=Ug(s),b=Math.sqrt(h*h+m*m);return[Math.round(1e4*b)?l1(Math.atan2(m,h)*ZM):NaN,b,u,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ug(this.rgb))}overwriteGetter(s,u){return Object.defineProperty(this,s,{value:u}),u}toString(){let[s,u,h,m]=this.rgb;return`rgba(${[s,u,h].map(_=>Math.round(255*_)).join(",")},${m})`}static interpolate(s,u,h,m="rgb"){switch(m){case"rgb":{let[_,b,T,M]=uu(s.rgb,u.rgb,h);return new Kt(_,b,T,M,!1)}case"hcl":{let[_,b,T,M]=s.hcl,[R,L,k,j]=u.hcl,U,V;if(isNaN(_)||isNaN(R))isNaN(_)?isNaN(R)?U=NaN:(U=R,T!==1&&T!==0||(V=L)):(U=_,k!==1&&k!==0||(V=b));else{let fe=R-_;R>_&&fe>180?fe-=360:R<_&&_-R>180&&(fe+=360),U=_+h*fe}let[H,te,ue,_e]=function([fe,B,ee,de]){return fe=isNaN(fe)?0:fe*GM,u1([ee,Math.cos(fe)*B,Math.sin(fe)*B,de])}([U,V!=null?V:Fi(b,L,h),Fi(T,k,h),Fi(M,j,h)]);return new Kt(H,te,ue,_e,!1)}case"lab":{let[_,b,T,M]=u1(uu(s.lab,u.lab,h));return new Kt(_,b,T,M,!1)}}}}Kt.black=new Kt(0,0,0,1),Kt.white=new Kt(1,1,1,1),Kt.transparent=new Kt(0,0,0,0),Kt.red=new Kt(1,0,0,1);class pf{constructor(s,u,h){this.sensitivity=s?u?"variant":"case":u?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,u){return this.collator.compare(s,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let df=["bottom","center","top"];class gc{constructor(s,u,h,m,_,b){this.text=s,this.image=u,this.scale=h,this.fontStack=m,this.textColor=_,this.verticalAlign=b}}class lo{constructor(s){this.sections=s}static fromString(s){return new lo([new gc(s,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof lo?s:lo.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class si{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof si)return s;if(typeof s=="number")return new si([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(let u of s)if(typeof u!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new si(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,u,h){return new si(uu(s.values,u.values,h))}}class yn{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof yn)return s;if(typeof s=="number")return new yn([s]);if(Array.isArray(s)){for(let u of s)if(typeof u!="number")return;return new yn(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,u,h){return new yn(uu(s.values,u.values,h))}}class li{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof li)return s;if(typeof s=="string"){let h=Kt.parse(s);return h?new li([h]):void 0}if(!Array.isArray(s))return;let u=[];for(let h of s){if(typeof h!="string")return;let m=Kt.parse(h);if(!m)return;u.push(m)}return new li(u)}toString(){return JSON.stringify(this.values)}static interpolate(s,u,h,m="rgb"){let _=[];if(s.values.length!=u.values.length)throw new Error(`colorArray: Arrays have mismatched length (${s.values.length} vs. ${u.values.length}), cannot interpolate.`);for(let b=0;b<s.values.length;b++)_.push(Kt.interpolate(s.values[b],u.values[b],h,m));return new li(_)}}class Rr extends Error{constructor(s){super(s),this.name="RuntimeError"}toJSON(){return this.message}}let yc=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class zi{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof zi)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let u=0;u<s.length;u+=2){let h=s[u],m=s[u+1];if(typeof h!="string"||!yc.has(h)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new zi(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,u,h){let m=s.values,_=u.values;if(m.length!==_.length)throw new Rr(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${u.toString()}`);let b=[];for(let T=0;T<m.length;T+=2){if(m[T]!==_[T])throw new Rr(`Cannot interpolate values containing mismatched anchors. from[${T}]: ${m[T]}, to[${T}]: ${_[T]}`);b.push(m[T]);let[M,R]=m[T+1],[L,k]=_[T+1];b.push([Fi(M,L,h),Fi(R,k,h)])}return new zi(b)}}class Mo{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new Mo({name:s,available:!1}):null}}class uo{constructor(s,u,h){this.from=s,this.to=u,this.transition=h}static interpolate(s,u,h){return new uo(s,u,h)}static parse(s){return s instanceof uo?s:Array.isArray(s)&&s.length===3&&typeof s[0]=="string"&&typeof s[1]=="string"&&typeof s[2]=="number"?new uo(s[0],s[1],s[2]):typeof s=="object"&&typeof s.from=="string"&&typeof s.to=="string"&&typeof s.transition=="number"?new uo(s.from,s.to,s.transition):typeof s=="string"?new uo(s,s,1):void 0}}function mf(c,s,u,h){return typeof c=="number"&&c>=0&&c<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof u=="number"&&u>=0&&u<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[c,s,u,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[c,s,u,h]:[c,s,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function xr(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof uo||c instanceof Kt||c instanceof pf||c instanceof lo||c instanceof si||c instanceof yn||c instanceof li||c instanceof zi||c instanceof Mo)return!0;if(Array.isArray(c)){for(let s of c)if(!xr(s))return!1;return!0}if(typeof c=="object"){for(let s in c)if(!xr(c[s]))return!1;return!0}return!1}function rn(c){if(c===null)return Et;if(typeof c=="string")return yt;if(typeof c=="boolean")return Rt;if(typeof c=="number")return je;if(c instanceof Kt)return en;if(c instanceof uo)return tn;if(c instanceof pf)return pc;if(c instanceof lo)return lf;if(c instanceof si)return iu;if(c instanceof yn)return Ms;if(c instanceof li)return uf;if(c instanceof zi)return gn;if(c instanceof Mo)return ou;if(Array.isArray(c)){let s=c.length,u;for(let h of c){let m=rn(h);if(u){if(u===m)continue;u=Lt;break}u=m}return Po(u||Lt,s)}return so}function Yt(c){let s=typeof c;return c===null?"":s==="string"||s==="number"||s==="boolean"?String(c):c instanceof Kt||c instanceof uo||c instanceof lo||c instanceof si||c instanceof yn||c instanceof li||c instanceof zi||c instanceof Mo?c.toString():JSON.stringify(c)}class Mt{constructor(s,u){this.type=s,this.value=u}static parse(s,u){if(s.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!xr(s[1]))return u.error("invalid value");let h=s[1],m=rn(h),_=u.expectedType;return m.kind!=="array"||m.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(m=_),new Mt(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let _c={string:yt,number:je,boolean:Rt,object:so};class Dt{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let h,m=1,_=s[0];if(_==="array"){let T,M;if(s.length>2){let R=s[1];if(typeof R!="string"||!(R in _c)||R==="object")return u.error("The item type argument of \"array\" must be one of string, number, boolean",1);T=_c[R],m++}else T=Lt;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return u.error("The length argument to \"array\" must be a positive integer literal",2);M=s[2],m++}h=Po(T,M)}else{if(!_c[_])throw new Error(`Types doesn't contain name = ${_}`);h=_c[_]}let b=[];for(;m<s.length;m++){let T=u.parse(s[m],m,Lt);if(!T)return null;b.push(T)}return new Dt(h,b)}evaluate(s){for(let u=0;u<this.args.length;u++){let h=this.args[u].evaluate(s);if(!dc(this.type,rn(h)))return h;if(u===this.args.length-1)throw new Rr(`Expected value to be of type ${Fr(this.type)}, but found ${Fr(rn(h))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}let od={"to-boolean":Rt,"to-color":en,"to-number":je,"to-string":yt};class bi{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let h=s[0];if(!od[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&s.length!==2)return u.error("Expected one argument.");let m=od[h],_=[];for(let b=1;b<s.length;b++){let T=u.parse(s[b],b,Lt);if(!T)return null;_.push(T)}return new bi(m,_)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let u,h;for(let m of this.args){if(u=m.evaluate(s),h=null,u instanceof Kt)return u;if(typeof u=="string"){let _=s.parseColor(u);if(_)return _}else if(Array.isArray(u)&&(h=u.length<3||u.length>4?`Invalid rgba value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:mf(u[0],u[1],u[2],u[3]),!h))return new Kt(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Rr(h||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(let h of this.args){u=h.evaluate(s);let m=si.parse(u);if(m)return m}throw new Rr(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"numberArray":{let u;for(let h of this.args){u=h.evaluate(s);let m=yn.parse(u);if(m)return m}throw new Rr(`Could not parse numberArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"colorArray":{let u;for(let h of this.args){u=h.evaluate(s);let m=li.parse(u);if(m)return m}throw new Rr(`Could not parse colorArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(let h of this.args){u=h.evaluate(s);let m=zi.parse(u);if(m)return m}throw new Rr(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(let h of this.args){if(u=h.evaluate(s),u===null)return 0;let m=Number(u);if(!isNaN(m))return m}throw new Rr(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return lo.fromString(Yt(this.args[0].evaluate(s)));case"resolvedImage":return Mo.fromString(Yt(this.args[0].evaluate(s)));case"projectionDefinition":return this.args[0].evaluate(s);default:return Yt(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}let Zg=["Unknown","Point","LineString","Polygon"];class Wg{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Zg[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let u=this._parseColorCache.get(s);return u||(u=Kt.parse(s),this._parseColorCache.set(s,u)),u}}class vf{constructor(s,u,h=[],m,_=new lr,b=[]){this.registry=s,this.path=h,this.key=h.map(T=>`[${T}]`).join(""),this.scope=_,this.errors=b,this.expectedType=m,this._isConstant=u}parse(s,u,h,m,_={}){return u?this.concat(u,h,m)._parse(s,_):this._parse(s,_)}_parse(s,u){function h(m,_,b){return b==="assert"?new Dt(_,[m]):b==="coerce"?new bi(_,[m]):m}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let m=s[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let _=this.registry[m];if(_){let b=_.parse(s,this);if(!b)return null;if(this.expectedType){let T=this.expectedType,M=b.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||M.kind!=="value"){if(T.kind==="projectionDefinition"&&["string","array"].includes(M.kind)||["color","formatted","resolvedImage"].includes(T.kind)&&["value","string"].includes(M.kind)||["padding","numberArray"].includes(T.kind)&&["value","number","array"].includes(M.kind)||T.kind==="colorArray"&&["value","string","array"].includes(M.kind)||T.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(M.kind))b=h(b,T,u.typeAnnotation||"coerce");else if(this.checkSubtype(T,M))return null}else b=h(b,T,u.typeAnnotation||"assert")}if(!(b instanceof Mt)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){let T=new Wg;try{b=new Mt(b.type,b.evaluate(T))}catch(M){return this.error(M.message),null}}return b}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof s} instead.`)}concat(s,u,h){let m=typeof s=="number"?this.path.concat(s):this.path,_=h?this.scope.concat(h):this.scope;return new vf(this.registry,this._isConstant,m,u||null,_,this.errors)}error(s,...u){let h=`${this.key}${u.map(m=>`[${m}]`).join("")}`;this.errors.push(new Ht(h,s))}checkSubtype(s,u){let h=dc(s,u);return h&&this.error(h),h}}class xc{constructor(s,u){this.type=u.type,this.bindings=[].concat(s),this.result=u}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(let u of this.bindings)s(u[1]);s(this.result)}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);let h=[];for(let _=1;_<s.length-1;_+=2){let b=s[_];if(typeof b!="string")return u.error(`Expected string, but found ${typeof b} instead.`,_);if(/[^a-zA-Z0-9_]/.test(b))return u.error("Variable names must contain only alphanumeric characters or '_'.",_);let T=u.parse(s[_+1],_+1);if(!T)return null;h.push([b,T])}let m=u.parse(s[s.length-1],s.length-1,u.expectedType,h);return m?new xc(h,m):null}outputDefined(){return this.result.outputDefined()}}class gf{constructor(s,u){this.type=u.type,this.name=s,this.boundExpression=u}static parse(s,u){if(s.length!==2||typeof s[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");let h=s[1];return u.scope.has(h)?new gf(h,u.scope.get(h)):u.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Hg{constructor(s,u,h){this.type=s,this.index=u,this.input=h}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);let h=u.parse(s[1],1,je),m=u.parse(s[2],2,Po(u.expectedType||Lt));return h&&m?new Hg(m.type.itemType,h,m):null}evaluate(s){let u=this.index.evaluate(s),h=this.input.evaluate(s);if(u<0)throw new Rr(`Array index out of bounds: ${u} < 0.`);if(u>=h.length)throw new Rr(`Array index out of bounds: ${u} > ${h.length-1}.`);if(u!==Math.floor(u))throw new Rr(`Array index must be an integer, but found ${u} instead.`);return h[u]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class ad{constructor(s,u){this.type=Rt,this.needle=s,this.haystack=u}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);let h=u.parse(s[1],1,Lt),m=u.parse(s[2],2,Lt);return h&&m?jg(h.type,[Rt,yt,je,Et,Lt])?new ad(h,m):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Fr(h.type)} instead`):null}evaluate(s){let u=this.needle.evaluate(s),h=this.haystack.evaluate(s);if(!h)return!1;if(!au(u,["boolean","string","number","null"]))throw new Rr(`Expected first argument to be of type boolean, string, number or null, but found ${Fr(rn(u))} instead.`);if(!au(h,["string","array"]))throw new Rr(`Expected second argument to be of type array or string, but found ${Fr(rn(h))} instead.`);return h.indexOf(u)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class yf{constructor(s,u,h){this.type=je,this.needle=s,this.haystack=u,this.fromIndex=h}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);let h=u.parse(s[1],1,Lt),m=u.parse(s[2],2,Lt);if(!h||!m)return null;if(!jg(h.type,[Rt,yt,je,Et,Lt]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Fr(h.type)} instead`);if(s.length===4){let _=u.parse(s[3],3,je);return _?new yf(h,m,_):null}return new yf(h,m)}evaluate(s){let u=this.needle.evaluate(s),h=this.haystack.evaluate(s);if(!au(u,["boolean","string","number","null"]))throw new Rr(`Expected first argument to be of type boolean, string, number or null, but found ${Fr(rn(u))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(s)),au(h,["string"])){let _=h.indexOf(u,m);return _===-1?-1:[...h.slice(0,_)].length}if(au(h,["array"]))return h.indexOf(u,m);throw new Rr(`Expected second argument to be of type array or string, but found ${Fr(rn(h))} instead.`)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class cu{constructor(s,u,h,m,_,b){this.inputType=s,this.type=u,this.input=h,this.cases=m,this.outputs=_,this.otherwise=b}static parse(s,u){if(s.length<5)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return u.error("Expected an even number of arguments.");let h,m;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);let _={},b=[];for(let R=2;R<s.length-1;R+=2){let L=s[R],k=s[R+1];Array.isArray(L)||(L=[L]);let j=u.concat(R);if(L.length===0)return j.error("Expected at least one branch label.");for(let V of L){if(typeof V!="number"&&typeof V!="string")return j.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return j.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return j.error("Numeric branch labels must be integer values.");if(h){if(j.checkSubtype(h,rn(V)))return null}else h=rn(V);if(_[String(V)]!==void 0)return j.error("Branch labels must be unique.");_[String(V)]=b.length}let U=u.parse(k,R,m);if(!U)return null;m=m||U.type,b.push(U)}let T=u.parse(s[1],1,Lt);if(!T)return null;let M=u.parse(s[s.length-1],s.length-1,m);return M?T.type.kind!=="value"&&u.concat(1).checkSubtype(h,T.type)?null:new cu(h,m,T,_,b,M):null}evaluate(s){let u=this.input.evaluate(s);return(rn(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class Gn{constructor(s,u,h){this.type=s,this.branches=u,this.otherwise=h}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return u.error("Expected an odd number of arguments.");let h;u.expectedType&&u.expectedType.kind!=="value"&&(h=u.expectedType);let m=[];for(let b=1;b<s.length-1;b+=2){let T=u.parse(s[b],b,Rt);if(!T)return null;let M=u.parse(s[b+1],b+1,h);if(!M)return null;m.push([T,M]),h=h||M.type}let _=u.parse(s[s.length-1],s.length-1,h);if(!_)return null;if(!h)throw new Error("Can't infer output type");return new Gn(h,m,_)}evaluate(s){for(let[u,h]of this.branches)if(u.evaluate(s))return h.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(let[u,h]of this.branches)s(u),s(h);s(this.otherwise)}outputDefined(){return this.branches.every(([s,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class hu{constructor(s,u,h,m){this.type=s,this.input=u,this.beginIndex=h,this.endIndex=m}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);let h=u.parse(s[1],1,Lt),m=u.parse(s[2],2,je);if(!h||!m)return null;if(!jg(h.type,[Po(Lt),yt,Lt]))return u.error(`Expected first argument to be of type array or string, but found ${Fr(h.type)} instead`);if(s.length===4){let _=u.parse(s[3],3,je);return _?new hu(h.type,h,m,_):null}return new hu(h.type,h,m)}evaluate(s){let u=this.input.evaluate(s),h=this.beginIndex.evaluate(s),m;if(this.endIndex&&(m=this.endIndex.evaluate(s)),au(u,["string"]))return[...u].slice(h,m).join("");if(au(u,["array"]))return u.slice(h,m);throw new Rr(`Expected first argument to be of type array or string, but found ${Fr(rn(u))} instead.`)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function _f(c,s){let u=c.length-1,h,m,_=0,b=u,T=0;for(;_<=b;)if(T=Math.floor((_+b)/2),h=c[T],m=c[T+1],h<=s){if(T===u||s<m)return T;_=T+1}else{if(!(h>s))throw new Rr("Input is not a number.");b=T-1}return 0}class ll{constructor(s,u,h){this.type=s,this.input=u,this.labels=[],this.outputs=[];for(let[m,_]of h)this.labels.push(m),this.outputs.push(_)}static parse(s,u){if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");let h=u.parse(s[1],1,je);if(!h)return null;let m=[],_=null;u.expectedType&&u.expectedType.kind!=="value"&&(_=u.expectedType);for(let b=1;b<s.length;b+=2){let T=b===1?-1/0:s[b],M=s[b+1],R=b,L=b+1;if(typeof T!="number")return u.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",R);if(m.length&&m[m.length-1][0]>=T)return u.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",R);let k=u.parse(M,L,_);if(!k)return null;_=_||k.type,m.push([T,k])}return new ll(_,h,m)}evaluate(s){let u=this.labels,h=this.outputs;if(u.length===1)return h[0].evaluate(s);let m=this.input.evaluate(s);if(m<=u[0])return h[0].evaluate(s);let _=u.length;return m>=u[_-1]?h[_-1].evaluate(s):h[_f(u,m)].evaluate(s)}eachChild(s){s(this.input);for(let u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Zn(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var sd,ld,c1=function(){if(ld)return sd;function c(s,u,h,m){this.cx=3*s,this.bx=3*(h-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(m-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=u,this.p2x=h,this.p2y=m}return ld=1,sd=c,c.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,u){if(u===void 0&&(u=1e-6),s<0)return 0;if(s>1)return 1;for(var h=s,m=0;m<8;m++){var _=this.sampleCurveX(h)-s;if(Math.abs(_)<u)return h;var b=this.sampleCurveDerivativeX(h);if(Math.abs(b)<1e-6)break;h-=_/b}var T=0,M=1;for(h=s,m=0;m<20&&(_=this.sampleCurveX(h),!(Math.abs(_-s)<u));m++)s>_?T=h:M=h,h=.5*(M-T)+T;return h},solve:function(s,u){return this.sampleCurveY(this.solveCurveX(s,u))}},sd}(),HM=Zn(c1);class wi{constructor(s,u,h,m,_){this.type=s,this.operator=u,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(let[b,T]of _)this.labels.push(b),this.outputs.push(T)}static interpolationFactor(s,u,h,m){let _=0;if(s.name==="exponential")_=xf(u,s.base,h,m);else if(s.name==="linear")_=xf(u,1,h,m);else if(s.name==="cubic-bezier"){let b=s.controlPoints;_=new HM(b[0],b[1],b[2],b[3]).solve(xf(u,1,h,m))}return _}static parse(s,u){let[h,m,_,...b]=s;if(!Array.isArray(m)||m.length===0)return u.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){let R=m[1];if(typeof R!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:R}}else{if(m[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(m[0])}`,1,0);{let R=m.slice(1);if(R.length!==4||R.some(L=>typeof L!="number"||L<0||L>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:R}}}if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(_=u.parse(_,2,je),!_)return null;let T=[],M=null;h!=="interpolate-hcl"&&h!=="interpolate-lab"||u.expectedType==uf?u.expectedType&&u.expectedType.kind!=="value"&&(M=u.expectedType):M=en;for(let R=0;R<b.length;R+=2){let L=b[R],k=b[R+1],j=R+3,U=R+4;if(typeof L!="number")return u.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",j);if(T.length&&T[T.length-1][0]>=L)return u.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",j);let V=u.parse(k,U,M);if(!V)return null;M=M||V.type,T.push([L,V])}return As(M,je)||As(M,tn)||As(M,en)||As(M,iu)||As(M,Ms)||As(M,uf)||As(M,gn)||As(M,Po(je))?new wi(M,h,m,_,T):u.error(`Type ${Fr(M)} is not interpolatable.`)}evaluate(s){let u=this.labels,h=this.outputs;if(u.length===1)return h[0].evaluate(s);let m=this.input.evaluate(s);if(m<=u[0])return h[0].evaluate(s);let _=u.length;if(m>=u[_-1])return h[_-1].evaluate(s);let b=_f(u,m),T=wi.interpolationFactor(this.interpolation,m,u[b],u[b+1]),M=h[b].evaluate(s),R=h[b+1].evaluate(s);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Fi(M,R,T);case"color":return Kt.interpolate(M,R,T);case"padding":return si.interpolate(M,R,T);case"colorArray":return li.interpolate(M,R,T);case"numberArray":return yn.interpolate(M,R,T);case"variableAnchorOffsetCollection":return zi.interpolate(M,R,T);case"array":return uu(M,R,T);case"projectionDefinition":return uo.interpolate(M,R,T)}case"interpolate-hcl":switch(this.type.kind){case"color":return Kt.interpolate(M,R,T,"hcl");case"colorArray":return li.interpolate(M,R,T,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Kt.interpolate(M,R,T,"lab");case"colorArray":return li.interpolate(M,R,T,"lab")}}}eachChild(s){s(this.input);for(let u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function xf(c,s,u,h){let m=h-u,_=c-u;return m===0?0:s===1?_/m:(Math.pow(s,_)-1)/(Math.pow(s,m)-1)}let Za={color:Kt.interpolate,number:Fi,padding:si.interpolate,numberArray:yn.interpolate,colorArray:li.interpolate,variableAnchorOffsetCollection:zi.interpolate,array:uu};class fu{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let h=null,m=u.expectedType;m&&m.kind!=="value"&&(h=m);let _=[];for(let T of s.slice(1)){let M=u.parse(T,1+_.length,h,void 0,{typeAnnotation:"omit"});if(!M)return null;h=h||M.type,_.push(M)}if(!h)throw new Error("No output type");let b=m&&_.some(T=>dc(m,T.type));return new fu(b?Lt:h,_)}evaluate(s){let u,h=null,m=0;for(let _ of this.args)if(m++,h=_.evaluate(s),h&&h instanceof Mo&&!h.available&&(u||(u=h.name),h=null,m===this.args.length&&(h=u)),h!==null)break;return h}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}function bf(c,s){return c==="=="||c==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function Yo(c,s,u,h){return h.compare(s,u)===0}function pu(c,s,u){let h=c!=="=="&&c!=="!=";return class Lbe{constructor(_,b,T){this.type=Rt,this.lhs=_,this.rhs=b,this.collator=T,this.hasUntypedArgument=_.type.kind==="value"||b.type.kind==="value"}static parse(_,b){if(_.length!==3&&_.length!==4)return b.error("Expected two or three arguments.");let T=_[0],M=b.parse(_[1],1,Lt);if(!M)return null;if(!bf(T,M.type))return b.concat(1).error(`"${T}" comparisons are not supported for type '${Fr(M.type)}'.`);let R=b.parse(_[2],2,Lt);if(!R)return null;if(!bf(T,R.type))return b.concat(2).error(`"${T}" comparisons are not supported for type '${Fr(R.type)}'.`);if(M.type.kind!==R.type.kind&&M.type.kind!=="value"&&R.type.kind!=="value")return b.error(`Cannot compare types '${Fr(M.type)}' and '${Fr(R.type)}'.`);h&&(M.type.kind==="value"&&R.type.kind!=="value"?M=new Dt(R.type,[M]):M.type.kind!=="value"&&R.type.kind==="value"&&(R=new Dt(M.type,[R])));let L=null;if(_.length===4){if(M.type.kind!=="string"&&R.type.kind!=="string"&&M.type.kind!=="value"&&R.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(L=b.parse(_[3],3,pc),!L)return null}return new Lbe(M,R,L)}evaluate(_){let b=this.lhs.evaluate(_),T=this.rhs.evaluate(_);if(h&&this.hasUntypedArgument){let M=rn(b),R=rn(T);if(M.kind!==R.kind||M.kind!=="string"&&M.kind!=="number")throw new Rr(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${M.kind}, ${R.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){let M=rn(b),R=rn(T);if(M.kind!=="string"||R.kind!=="string")return s(_,b,T)}return this.collator?u(_,b,T,this.collator.evaluate(_)):s(_,b,T)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}let ud=pu("==",function(c,s,u){return s===u},Yo),KM=pu("!=",function(c,s,u){return s!==u},function(c,s,u,h){return!Yo(0,s,u,h)}),Kg=pu("<",function(c,s,u){return s<u},function(c,s,u,h){return h.compare(s,u)<0}),YM=pu(">",function(c,s,u){return s>u},function(c,s,u,h){return h.compare(s,u)>0}),XM=pu("<=",function(c,s,u){return s<=u},function(c,s,u,h){return h.compare(s,u)<=0}),QM=pu(">=",function(c,s,u){return s>=u},function(c,s,u,h){return h.compare(s,u)>=0});class cd{constructor(s,u,h){this.type=pc,this.locale=h,this.caseSensitive=s,this.diacriticSensitive=u}static parse(s,u){if(s.length!==2)return u.error("Expected one argument.");let h=s[1];if(typeof h!="object"||Array.isArray(h))return u.error("Collator options argument must be an object.");let m=u.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Rt);if(!m)return null;let _=u.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Rt);if(!_)return null;let b=null;return h.locale&&(b=u.parse(h.locale,1,yt),!b)?null:new cd(m,_,b)}evaluate(s){return new pf(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}class bc{constructor(s,u,h,m,_){this.type=yt,this.number=s,this.locale=u,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(s,u){if(s.length!==3)return u.error("Expected two arguments.");let h=u.parse(s[1],1,je);if(!h)return null;let m=s[2];if(typeof m!="object"||Array.isArray(m))return u.error("NumberFormat options argument must be an object.");let _=null;if(m.locale&&(_=u.parse(m.locale,1,yt),!_))return null;let b=null;if(m.currency&&(b=u.parse(m.currency,1,yt),!b))return null;let T=null;if(m["min-fraction-digits"]&&(T=u.parse(m["min-fraction-digits"],1,je),!T))return null;let M=null;return m["max-fraction-digits"]&&(M=u.parse(m["max-fraction-digits"],1,je),!M)?null:new bc(h,_,b,T,M)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class hd{constructor(s){this.type=lf,this.sections=s}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let h=s[1];if(!Array.isArray(h)&&typeof h=="object")return u.error("First argument must be an image or text section.");let m=[],_=!1;for(let b=1;b<=s.length-1;++b){let T=s[b];if(_&&typeof T=="object"&&!Array.isArray(T)){_=!1;let M=null;if(T["font-scale"]&&(M=u.parse(T["font-scale"],1,je),!M))return null;let R=null;if(T["text-font"]&&(R=u.parse(T["text-font"],1,Po(yt)),!R))return null;let L=null;if(T["text-color"]&&(L=u.parse(T["text-color"],1,en),!L))return null;let k=null;if(T["vertical-align"]){if(typeof T["vertical-align"]=="string"&&!df.includes(T["vertical-align"]))return u.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${T["vertical-align"]}' instead.`);if(k=u.parse(T["vertical-align"],1,yt),!k)return null}let j=m[m.length-1];j.scale=M,j.font=R,j.textColor=L,j.verticalAlign=k}else{let M=u.parse(s[b],1,Lt);if(!M)return null;let R=M.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,m.push({content:M,scale:null,font:null,textColor:null,verticalAlign:null})}}return new hd(m)}evaluate(s){return new lo(this.sections.map(u=>{let h=u.content.evaluate(s);return rn(h)===ou?new gc("",h,null,null,null,u.verticalAlign?u.verticalAlign.evaluate(s):null):new gc(Yt(h),null,u.scale?u.scale.evaluate(s):null,u.font?u.font.evaluate(s).join(","):null,u.textColor?u.textColor.evaluate(s):null,u.verticalAlign?u.verticalAlign.evaluate(s):null)}))}eachChild(s){for(let u of this.sections)s(u.content),u.scale&&s(u.scale),u.font&&s(u.font),u.textColor&&s(u.textColor),u.verticalAlign&&s(u.verticalAlign)}outputDefined(){return!1}}class fd{constructor(s){this.type=ou,this.input=s}static parse(s,u){if(s.length!==2)return u.error("Expected two arguments.");let h=u.parse(s[1],1,yt);return h?new fd(h):u.error("No image name provided.")}evaluate(s){let u=this.input.evaluate(s),h=Mo.fromString(u);return h&&s.availableImages&&(h.available=s.availableImages.indexOf(u)>-1),h}eachChild(s){s(this.input)}outputDefined(){return!1}}class pd{constructor(s){this.type=je,this.input=s}static parse(s,u){if(s.length!==2)return u.error(`Expected 1 argument, but found ${s.length-1} instead.`);let h=u.parse(s[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Fr(h.type)} instead.`):new pd(h):null}evaluate(s){let u=this.input.evaluate(s);if(typeof u=="string")return[...u].length;if(Array.isArray(u))return u.length;throw new Rr(`Expected value to be of type string or array, but found ${Fr(rn(u))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}let Wa=8192;function h1(c,s){let u=(180+c[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,m=Math.pow(2,s.z);return[Math.round(u*m*Wa),Math.round(h*m*Wa)]}function Yg(c,s){let u=Math.pow(2,s.z);return[(m=(c[0]/Wa+s.x)/u,360*m-180),(h=(c[1]/Wa+s.y)/u,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,m}function wf(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function Ef(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function JM(c,s,u){let h=c[0]-s[0],m=c[1]-s[1],_=c[0]-u[0],b=c[1]-u[1];return h*b-_*m==0&&h*_<=0&&m*b<=0}function dd(c,s,u,h){return(m=[h[0]-u[0],h[1]-u[1]])[0]*(_=[s[0]-c[0],s[1]-c[1]])[1]-m[1]*_[0]!=0&&!(!m1(c,s,u,h)||!m1(u,h,c,s));var m,_}function f1(c,s,u){for(let h of u)for(let m=0;m<h.length-1;++m)if(dd(c,s,h[m],h[m+1]))return!0;return!1}function du(c,s,u=!1){let h=!1;for(let T of s)for(let M=0;M<T.length-1;M++){if(JM(c,T[M],T[M+1]))return u;(_=T[M])[1]>(m=c)[1]!=(b=T[M+1])[1]>m[1]&&m[0]<(b[0]-_[0])*(m[1]-_[1])/(b[1]-_[1])+_[0]&&(h=!h)}var m,_,b;return h}function p1(c,s){for(let u of s)if(du(c,u))return!0;return!1}function d1(c,s){for(let u of c)if(!du(u,s))return!1;for(let u=0;u<c.length-1;++u)if(f1(c[u],c[u+1],s))return!1;return!0}function eA(c,s){for(let u of s)if(d1(c,u))return!0;return!1}function m1(c,s,u,h){let m=h[0]-u[0],_=h[1]-u[1],b=(c[0]-u[0])*_-m*(c[1]-u[1]),T=(s[0]-u[0])*_-m*(s[1]-u[1]);return b>0&&T<0||b<0&&T>0}function Tf(c,s,u){let h=[];for(let m=0;m<c.length;m++){let _=[];for(let b=0;b<c[m].length;b++){let T=h1(c[m][b],u);wf(s,T),_.push(T)}h.push(_)}return h}function v1(c,s,u){let h=[];for(let m=0;m<c.length;m++){let _=Tf(c[m],s,u);h.push(_)}return h}function g1(c,s,u,h){if(c[0]<u[0]||c[0]>u[2]){let m=.5*h,_=c[0]-u[0]>m?-h:u[0]-c[0]>m?h:0;_===0&&(_=c[0]-u[2]>m?-h:u[2]-c[0]>m?h:0),c[0]+=_}wf(s,c)}function y1(c,s,u,h){let m=Math.pow(2,h.z)*Wa,_=[h.x*Wa,h.y*Wa],b=[];for(let T of c)for(let M of T){let R=[M.x+_[0],M.y+_[1]];g1(R,s,u,m),b.push(R)}return b}function Xg(c,s,u,h){let m=Math.pow(2,h.z)*Wa,_=[h.x*Wa,h.y*Wa],b=[];for(let M of c){let R=[];for(let L of M){let k=[L.x+_[0],L.y+_[1]];wf(s,k),R.push(k)}b.push(R)}if(s[2]-s[0]<=m/2){(T=s)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(let M of b)for(let R of M)g1(R,s,u,m)}var T;return b}class ul{constructor(s,u){this.type=Rt,this.geojson=s,this.geometries=u}static parse(s,u){if(s.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(xr(s[1])){let h=s[1];if(h.type==="FeatureCollection"){let m=[];for(let _ of h.features){let{type:b,coordinates:T}=_.geometry;b==="Polygon"&&m.push(T),b==="MultiPolygon"&&m.push(...T)}if(m.length)return new ul(h,{type:"MultiPolygon",coordinates:m})}else if(h.type==="Feature"){let m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new ul(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new ul(h,h)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(u,h){let m=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],b=u.canonicalID();if(h.type==="Polygon"){let T=Tf(h.coordinates,_,b),M=y1(u.geometry(),m,_,b);if(!Ef(m,_))return!1;for(let R of M)if(!du(R,T))return!1}if(h.type==="MultiPolygon"){let T=v1(h.coordinates,_,b),M=y1(u.geometry(),m,_,b);if(!Ef(m,_))return!1;for(let R of M)if(!p1(R,T))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(u,h){let m=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],b=u.canonicalID();if(h.type==="Polygon"){let T=Tf(h.coordinates,_,b),M=Xg(u.geometry(),m,_,b);if(!Ef(m,_))return!1;for(let R of M)if(!d1(R,T))return!1}if(h.type==="MultiPolygon"){let T=v1(h.coordinates,_,b),M=Xg(u.geometry(),m,_,b);if(!Ef(m,_))return!1;for(let R of M)if(!eA(R,T))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let _1=class{constructor(c=[],s=(u,h)=>u<h?-1:u>h?1:0){if(this.data=c,this.length=this.data.length,this.compare=s,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;let c=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),c}peek(){return this.data[0]}_up(c){let{data:s,compare:u}=this,h=s[c];for(;c>0;){let m=c-1>>1,_=s[m];if(u(h,_)>=0)break;s[c]=_,c=m}s[c]=h}_down(c){let{data:s,compare:u}=this,h=this.length>>1,m=s[c];for(;c<h;){let _=1+(c<<1),b=_+1;if(b<this.length&&u(s[b],s[_])<0&&(_=b),u(s[_],m)>=0)break;s[c]=s[_],c=_}s[c]=m}};function x1(c,s,u=0,h=c.length-1,m=b1){for(;h>u;){if(h-u>600){let M=h-u+1,R=s-u+1,L=Math.log(M),k=.5*Math.exp(2*L/3),j=.5*Math.sqrt(L*k*(M-k)/M)*(R-M/2<0?-1:1);x1(c,s,Math.max(u,Math.floor(s-R*k/M+j)),Math.min(h,Math.floor(s+(M-R)*k/M+j)),m)}let _=c[s],b=u,T=h;for(wc(c,u,s),m(c[h],_)>0&&wc(c,u,h);b<T;){for(wc(c,b,T),b++,T--;m(c[b],_)<0;)b++;for(;m(c[T],_)>0;)T--}m(c[u],_)===0?wc(c,u,T):(T++,wc(c,T,h)),T<=s&&(u=T+1),s<=T&&(h=T-1)}}function wc(c,s,u){let h=c[s];c[s]=c[u],c[u]=h}function b1(c,s){return c<s?-1:c>s?1:0}function md(c,s){if(c.length<=1)return[c];let u=[],h,m;for(let _ of c){let b=rA(_);b!==0&&(_.area=Math.abs(b),m===void 0&&(m=b<0),m===b<0?(h&&u.push(h),h=[_]):h.push(_))}if(h&&u.push(h),s>1)for(let _=0;_<u.length;_++)u[_].length<=s||(x1(u[_],s,1,u[_].length-1,tA),u[_]=u[_].slice(0,s));return u}function tA(c,s){return s.area-c.area}function rA(c){let s=0;for(let u,h,m=0,_=c.length,b=_-1;m<_;b=m++)u=c[m],h=c[b],s+=(h.x-u.x)*(u.y+h.y);return s}let Qg=1/298.257223563,w1=Qg*(2-Qg),E1=Math.PI/180;class Jg{constructor(s){let u=6378.137*E1*1e3,h=Math.cos(s*E1),m=1/(1-w1*(1-h*h)),_=Math.sqrt(m);this.kx=u*_*h,this.ky=u*_*m*(1-w1)}distance(s,u){let h=this.wrap(s[0]-u[0])*this.kx,m=(s[1]-u[1])*this.ky;return Math.sqrt(h*h+m*m)}pointOnLine(s,u){let h,m,_,b,T=1/0;for(let M=0;M<s.length-1;M++){let R=s[M][0],L=s[M][1],k=this.wrap(s[M+1][0]-R)*this.kx,j=(s[M+1][1]-L)*this.ky,U=0;k===0&&j===0||(U=(this.wrap(u[0]-R)*this.kx*k+(u[1]-L)*this.ky*j)/(k*k+j*j),U>1?(R=s[M+1][0],L=s[M+1][1]):U>0&&(R+=k/this.kx*U,L+=j/this.ky*U)),k=this.wrap(u[0]-R)*this.kx,j=(u[1]-L)*this.ky;let V=k*k+j*j;V<T&&(T=V,h=R,m=L,_=M,b=U)}return{point:[h,m],index:_,t:Math.max(0,Math.min(1,b))}}wrap(s){for(;s<-180;)s+=360;for(;s>180;)s-=360;return s}}function T1(c,s){return s[0]-c[0]}function or(c){return c[1]-c[0]+1}function qs(c,s){return c[1]>=c[0]&&c[1]<s}function ey(c,s){if(c[0]>c[1])return[null,null];let u=or(c);if(s){if(u===2)return[c,null];let m=Math.floor(u/2);return[[c[0],c[0]+m],[c[0]+m,c[1]]]}if(u===1)return[c,null];let h=Math.floor(u/2)-1;return[[c[0],c[0]+h],[c[0]+h+1,c[1]]]}function ty(c,s){if(!qs(s,c.length))return[1/0,1/0,-1/0,-1/0];let u=[1/0,1/0,-1/0,-1/0];for(let h=s[0];h<=s[1];++h)wf(u,c[h]);return u}function ry(c){let s=[1/0,1/0,-1/0,-1/0];for(let u of c)for(let h of u)wf(s,h);return s}function S1(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function ny(c,s,u){if(!S1(c)||!S1(s))return NaN;let h=0,m=0;return c[2]<s[0]&&(h=s[0]-c[2]),c[0]>s[2]&&(h=c[0]-s[2]),c[1]>s[3]&&(m=c[1]-s[3]),c[3]<s[1]&&(m=s[1]-c[3]),u.distance([0,0],[h,m])}function mu(c,s,u){let h=u.pointOnLine(s,c);return u.distance(c,h.point)}function iy(c,s,u,h,m){let _=Math.min(mu(c,[u,h],m),mu(s,[u,h],m)),b=Math.min(mu(u,[c,s],m),mu(h,[c,s],m));return Math.min(_,b)}function nA(c,s,u,h,m){if(!qs(s,c.length)||!qs(h,u.length))return 1/0;let _=1/0;for(let b=s[0];b<s[1];++b){let T=c[b],M=c[b+1];for(let R=h[0];R<h[1];++R){let L=u[R],k=u[R+1];if(dd(T,M,L,k))return 0;_=Math.min(_,iy(T,M,L,k,m))}}return _}function iA(c,s,u,h,m){if(!qs(s,c.length)||!qs(h,u.length))return NaN;let _=1/0;for(let b=s[0];b<=s[1];++b)for(let T=h[0];T<=h[1];++T)if(_=Math.min(_,m.distance(c[b],u[T])),_===0)return _;return _}function oA(c,s,u){if(du(c,s,!0))return 0;let h=1/0;for(let m of s){let _=m[0],b=m[m.length-1];if(_!==b&&(h=Math.min(h,mu(c,[b,_],u)),h===0))return h;let T=u.pointOnLine(m,c);if(h=Math.min(h,u.distance(c,T.point)),h===0)return h}return h}function aA(c,s,u,h){if(!qs(s,c.length))return NaN;for(let _=s[0];_<=s[1];++_)if(du(c[_],u,!0))return 0;let m=1/0;for(let _=s[0];_<s[1];++_){let b=c[_],T=c[_+1];for(let M of u)for(let R=0,L=M.length,k=L-1;R<L;k=R++){let j=M[k],U=M[R];if(dd(b,T,j,U))return 0;m=Math.min(m,iy(b,T,j,U,h))}}return m}function I1(c,s){for(let u of c)for(let h of u)if(du(h,s,!0))return!0;return!1}function sA(c,s,u,h=1/0){let m=ry(c),_=ry(s);if(h!==1/0&&ny(m,_,u)>=h)return h;if(Ef(m,_)){if(I1(c,s))return 0}else if(I1(s,c))return 0;let b=1/0;for(let T of c)for(let M=0,R=T.length,L=R-1;M<R;L=M++){let k=T[L],j=T[M];for(let U of s)for(let V=0,H=U.length,te=H-1;V<H;te=V++){let ue=U[te],_e=U[V];if(dd(k,j,ue,_e))return 0;b=Math.min(b,iy(k,j,ue,_e,u))}}return b}function C1(c,s,u,h,m,_){if(!_)return;let b=ny(ty(h,_),m,u);b<s&&c.push([b,_,[0,0]])}function vd(c,s,u,h,m,_,b){if(!_||!b)return;let T=ny(ty(h,_),ty(m,b),u);T<s&&c.push([T,_,b])}function gd(c,s,u,h,m=1/0){let _=Math.min(h.distance(c[0],u[0][0]),m);if(_===0)return _;let b=new _1([[0,[0,c.length-1],[0,0]]],T1),T=ry(u);for(;b.length>0;){let M=b.pop();if(M[0]>=_)continue;let R=M[1],L=s?50:100;if(or(R)<=L){if(!qs(R,c.length))return NaN;if(s){let k=aA(c,R,u,h);if(isNaN(k)||k===0)return k;_=Math.min(_,k)}else for(let k=R[0];k<=R[1];++k){let j=oA(c[k],u,h);if(_=Math.min(_,j),_===0)return 0}}else{let k=ey(R,s);C1(b,_,h,c,T,k[0]),C1(b,_,h,c,T,k[1])}}return _}function yd(c,s,u,h,m,_=1/0){let b=Math.min(_,m.distance(c[0],u[0]));if(b===0)return b;let T=new _1([[0,[0,c.length-1],[0,u.length-1]]],T1);for(;T.length>0;){let M=T.pop();if(M[0]>=b)continue;let R=M[1],L=M[2],k=s?50:100,j=h?50:100;if(or(R)<=k&&or(L)<=j){if(!qs(R,c.length)&&qs(L,u.length))return NaN;let U;if(s&&h)U=nA(c,R,u,L,m),b=Math.min(b,U);else if(s&&!h){let V=c.slice(R[0],R[1]+1);for(let H=L[0];H<=L[1];++H)if(U=mu(u[H],V,m),b=Math.min(b,U),b===0)return b}else if(!s&&h){let V=u.slice(L[0],L[1]+1);for(let H=R[0];H<=R[1];++H)if(U=mu(c[H],V,m),b=Math.min(b,U),b===0)return b}else U=iA(c,R,u,L,m),b=Math.min(b,U)}else{let U=ey(R,s),V=ey(L,h);vd(T,b,m,c,u,U[0],V[0]),vd(T,b,m,c,u,U[0],V[1]),vd(T,b,m,c,u,U[1],V[0]),vd(T,b,m,c,u,U[1],V[1])}}return b}function oy(c){return c.type==="MultiPolygon"?c.coordinates.map(s=>({type:"Polygon",coordinates:s})):c.type==="MultiLineString"?c.coordinates.map(s=>({type:"LineString",coordinates:s})):c.type==="MultiPoint"?c.coordinates.map(s=>({type:"Point",coordinates:s})):[c]}class vu{constructor(s,u){this.type=je,this.geojson=s,this.geometries=u}static parse(s,u){if(s.length!==2)return u.error(`'distance' expression requires exactly one argument, but found ${s.length-1} instead.`);if(xr(s[1])){let h=s[1];if(h.type==="FeatureCollection")return new vu(h,h.features.map(m=>oy(m.geometry)).flat());if(h.type==="Feature")return new vu(h,oy(h.geometry));if("type"in h&&"coordinates"in h)return new vu(h,oy(h))}return u.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(u,h){let m=u.geometry(),_=m.flat().map(M=>Yg([M.x,M.y],u.canonical));if(m.length===0)return NaN;let b=new Jg(_[0][1]),T=1/0;for(let M of h){switch(M.type){case"Point":T=Math.min(T,yd(_,!1,[M.coordinates],!1,b,T));break;case"LineString":T=Math.min(T,yd(_,!1,M.coordinates,!0,b,T));break;case"Polygon":T=Math.min(T,gd(_,!1,M.coordinates,b,T))}if(T===0)return T}return T}(s,this.geometries);if(s.geometryType()==="LineString")return function(u,h){let m=u.geometry(),_=m.flat().map(M=>Yg([M.x,M.y],u.canonical));if(m.length===0)return NaN;let b=new Jg(_[0][1]),T=1/0;for(let M of h){switch(M.type){case"Point":T=Math.min(T,yd(_,!0,[M.coordinates],!1,b,T));break;case"LineString":T=Math.min(T,yd(_,!0,M.coordinates,!0,b,T));break;case"Polygon":T=Math.min(T,gd(_,!0,M.coordinates,b,T))}if(T===0)return T}return T}(s,this.geometries);if(s.geometryType()==="Polygon")return function(u,h){let m=u.geometry();if(m.length===0||m[0].length===0)return NaN;let _=md(m,0).map(M=>M.map(R=>R.map(L=>Yg([L.x,L.y],u.canonical)))),b=new Jg(_[0][0][0][1]),T=1/0;for(let M of h)for(let R of _){switch(M.type){case"Point":T=Math.min(T,gd([M.coordinates],!1,R,b,T));break;case"LineString":T=Math.min(T,gd(M.coordinates,!0,R,b,T));break;case"Polygon":T=Math.min(T,sA(R,M.coordinates,b,T))}if(T===0)return T}return T}(s,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class _d{constructor(s){this.type=Lt,this.key=s}static parse(s,u){if(s.length!==2)return u.error(`Expected 1 argument, but found ${s.length-1} instead.`);let h=s[1];return h==null?u.error("Global state property must be defined."):typeof h!="string"?u.error(`Global state property must be string, but found ${typeof s[1]} instead.`):new _d(h)}evaluate(s){var u;let h=(u=s.globals)===null||u===void 0?void 0:u.globalState;return h&&Object.keys(h).length!==0?hf(h,this.key):null}eachChild(){}outputDefined(){return!1}}let Ec={"==":ud,"!=":KM,">":YM,"<":Kg,">=":QM,"<=":XM,array:Dt,at:Hg,boolean:Dt,case:Gn,coalesce:fu,collator:cd,format:hd,image:fd,in:ad,"index-of":yf,interpolate:wi,"interpolate-hcl":wi,"interpolate-lab":wi,length:pd,let:xc,literal:Mt,match:cu,number:Dt,"number-format":bc,object:Dt,slice:hu,step:ll,string:Dt,"to-boolean":bi,"to-color":bi,"to-number":bi,"to-string":bi,var:gf,within:ul,distance:vu,"global-state":_d};class Xo{constructor(s,u,h,m){this.name=s,this.type=u,this._evaluate=h,this.args=m}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,u){let h=s[0],m=Xo.definitions[h];if(!m)return u.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);let _=Array.isArray(m)?m[0]:m.type,b=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,T=b.filter(([R])=>!Array.isArray(R)||R.length===s.length-1),M=null;for(let[R,L]of T){M=new vf(u.registry,xd,u.path,null,u.scope);let k=[],j=!1;for(let U=1;U<s.length;U++){let V=s[U],H=Array.isArray(R)?R[U-1]:R.type,te=M.parse(V,1+k.length,H);if(!te){j=!0;break}k.push(te)}if(!j)if(Array.isArray(R)&&R.length!==k.length)M.error(`Expected ${R.length} arguments, but found ${k.length} instead.`);else{for(let U=0;U<k.length;U++){let V=Array.isArray(R)?R[U]:R.type,H=k[U];M.concat(U+1).checkSubtype(V,H.type)}if(M.errors.length===0)return new Xo(h,_,L,k)}}if(T.length===1)u.errors.push(...M.errors);else{let R=(T.length?T:b).map(([k])=>{return j=k,Array.isArray(j)?`(${j.map(Fr).join(", ")})`:`(${Fr(j.type)}...)`;var j}).join(" | "),L=[];for(let k=1;k<s.length;k++){let j=u.parse(s[k],1+L.length);if(!j)return null;L.push(Fr(j.type))}u.error(`Expected arguments of type ${R}, but found (${L.join(", ")}) instead.`)}return null}static register(s,u){Xo.definitions=u;for(let h in u)s[h]=Xo}}function P1(c,[s,u,h,m]){s=s.evaluate(c),u=u.evaluate(c),h=h.evaluate(c);let _=m?m.evaluate(c):1,b=mf(s,u,h,_);if(b)throw new Rr(b);return new Kt(s/255,u/255,h/255,_,!1)}function M1(c,s){return c in s}function ay(c,s){let u=s[c];return u===void 0?null:u}function gu(c){return{type:c}}function xd(c){if(c instanceof gf)return xd(c.boundExpression);if(c instanceof Xo&&c.name==="error"||c instanceof cd||c instanceof ul||c instanceof vu||c instanceof _d)return!1;let s=c instanceof bi||c instanceof Dt,u=!0;return c.eachChild(h=>{u=s?u&&xd(h):u&&h instanceof Mt}),!!u&&bd(c)&&wd(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function bd(c){if(c instanceof Xo&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof ul||c instanceof vu)return!1;let s=!0;return c.eachChild(u=>{s&&!bd(u)&&(s=!1)}),s}function Sf(c){if(c instanceof Xo&&c.name==="feature-state")return!1;let s=!0;return c.eachChild(u=>{s&&!Sf(u)&&(s=!1)}),s}function wd(c,s){if(c instanceof Xo&&s.indexOf(c.name)>=0)return!1;let u=!0;return c.eachChild(h=>{u&&!wd(h,s)&&(u=!1)}),u}function Ed(c){return{result:"success",value:c}}function Tc(c){return{result:"error",value:c}}function Sc(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function A1(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Td(c){return!!c.expression&&c.expression.interpolated}function Vt(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Sd(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)&&rn(c)===so}function Id(c){return c}function sy(c,s){let u=c.stops&&typeof c.stops[0][0]=="object",h=u||!(u||c.property!==void 0),m=c.type||(Td(s)?"exponential":"interval"),_=function(L){switch(L.type){case"color":return Kt.parse;case"padding":return si.parse;case"numberArray":return yn.parse;case"colorArray":return li.parse;default:return null}}(s);if(_&&((c=dr({},c)).stops&&(c.stops=c.stops.map(L=>[L[0],_(L[1])])),c.default=_(c.default?c.default:s.default)),c.colorSpace&&(b=c.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var b;let T=function(L){switch(L){case"exponential":return q1;case"interval":return uA;case"categorical":return lA;case"identity":return cA;default:throw new Error(`Unknown function type "${L}"`)}}(m),M,R;if(m==="categorical"){M=Object.create(null);for(let L of c.stops)M[L[0]]=L[1];R=typeof c.stops[0][0]}if(u){let L={},k=[];for(let V=0;V<c.stops.length;V++){let H=c.stops[V],te=H[0].zoom;L[te]===void 0&&(L[te]={zoom:te,type:c.type,property:c.property,default:c.default,stops:[]},k.push(te)),L[te].stops.push([H[0].value,H[1]])}let j=[];for(let V of k)j.push([L[V].zoom,sy(L[V],s)]);let U={name:"linear"};return{kind:"composite",interpolationType:U,interpolationFactor:wi.interpolationFactor.bind(void 0,U),zoomStops:j.map(V=>V[0]),evaluate:({zoom:V},H)=>q1({stops:j,base:c.base},s,V).evaluate(V,H)}}if(h){let L=m==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:wi.interpolationFactor.bind(void 0,L),zoomStops:c.stops.map(k=>k[0]),evaluate:({zoom:k})=>T(c,s,k,M,R)}}return{kind:"source",evaluate(L,k){let j=k&&k.properties?k.properties[c.property]:void 0;return j===void 0?If(c.default,s.default):T(c,s,j,M,R)}}}function If(c,s,u){return c!==void 0?c:s!==void 0?s:u!==void 0?u:void 0}function lA(c,s,u,h,m){return If(typeof u===m?h[u]:void 0,c.default,s.default)}function uA(c,s,u){if(Vt(u)!=="number")return If(c.default,s.default);let h=c.stops.length;if(h===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[h-1][0])return c.stops[h-1][1];let m=_f(c.stops.map(_=>_[0]),u);return c.stops[m][1]}function q1(c,s,u){let h=c.base!==void 0?c.base:1;if(Vt(u)!=="number")return If(c.default,s.default);let m=c.stops.length;if(m===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[m-1][0])return c.stops[m-1][1];let _=_f(c.stops.map(L=>L[0]),u),b=function(L,k,j,U){let V=U-j,H=L-j;return V===0?0:k===1?H/V:(Math.pow(k,H)-1)/(Math.pow(k,V)-1)}(u,h,c.stops[_][0],c.stops[_+1][0]),T=c.stops[_][1],M=c.stops[_+1][1],R=Za[s.type]||Id;return typeof T.evaluate=="function"?{evaluate(...L){let k=T.evaluate.apply(void 0,L),j=M.evaluate.apply(void 0,L);if(k!==void 0&&j!==void 0)return R(k,j,b,c.colorSpace)}}:R(T,M,b,c.colorSpace)}function cA(c,s,u){switch(s.type){case"color":u=Kt.parse(u);break;case"formatted":u=lo.fromString(u.toString());break;case"resolvedImage":u=Mo.fromString(u.toString());break;case"padding":u=si.parse(u);break;case"colorArray":u=li.parse(u);break;case"numberArray":u=yn.parse(u);break;default:Vt(u)===s.type||s.type==="enum"&&s.values[u]||(u=void 0)}return If(u,c.default,s.default)}Xo.register(Ec,{error:[{kind:"error"},[yt],(c,[s])=>{throw new Rr(s.evaluate(c))}],typeof:[yt,[Lt],(c,[s])=>Fr(rn(s.evaluate(c)))],"to-rgba":[Po(je,4),[en],(c,[s])=>{let[u,h,m,_]=s.evaluate(c).rgb;return[255*u,255*h,255*m,_]}],rgb:[en,[je,je,je],P1],rgba:[en,[je,je,je,je],P1],has:{type:Rt,overloads:[[[yt],(c,[s])=>M1(s.evaluate(c),c.properties())],[[yt,so],(c,[s,u])=>M1(s.evaluate(c),u.evaluate(c))]]},get:{type:Lt,overloads:[[[yt],(c,[s])=>ay(s.evaluate(c),c.properties())],[[yt,so],(c,[s,u])=>ay(s.evaluate(c),u.evaluate(c))]]},"feature-state":[Lt,[yt],(c,[s])=>ay(s.evaluate(c),c.featureState||{})],properties:[so,[],c=>c.properties()],"geometry-type":[yt,[],c=>c.geometryType()],id:[Lt,[],c=>c.id()],zoom:[je,[],c=>c.globals.zoom],"heatmap-density":[je,[],c=>c.globals.heatmapDensity||0],"line-progress":[je,[],c=>c.globals.lineProgress||0],accumulated:[Lt,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[je,gu(je),(c,s)=>{let u=0;for(let h of s)u+=h.evaluate(c);return u}],"*":[je,gu(je),(c,s)=>{let u=1;for(let h of s)u*=h.evaluate(c);return u}],"-":{type:je,overloads:[[[je,je],(c,[s,u])=>s.evaluate(c)-u.evaluate(c)],[[je],(c,[s])=>-s.evaluate(c)]]},"/":[je,[je,je],(c,[s,u])=>s.evaluate(c)/u.evaluate(c)],"%":[je,[je,je],(c,[s,u])=>s.evaluate(c)%u.evaluate(c)],ln2:[je,[],()=>Math.LN2],pi:[je,[],()=>Math.PI],e:[je,[],()=>Math.E],"^":[je,[je,je],(c,[s,u])=>Math.pow(s.evaluate(c),u.evaluate(c))],sqrt:[je,[je],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[je,[je],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[je,[je],(c,[s])=>Math.log(s.evaluate(c))],log2:[je,[je],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[je,[je],(c,[s])=>Math.sin(s.evaluate(c))],cos:[je,[je],(c,[s])=>Math.cos(s.evaluate(c))],tan:[je,[je],(c,[s])=>Math.tan(s.evaluate(c))],asin:[je,[je],(c,[s])=>Math.asin(s.evaluate(c))],acos:[je,[je],(c,[s])=>Math.acos(s.evaluate(c))],atan:[je,[je],(c,[s])=>Math.atan(s.evaluate(c))],min:[je,gu(je),(c,s)=>Math.min(...s.map(u=>u.evaluate(c)))],max:[je,gu(je),(c,s)=>Math.max(...s.map(u=>u.evaluate(c)))],abs:[je,[je],(c,[s])=>Math.abs(s.evaluate(c))],round:[je,[je],(c,[s])=>{let u=s.evaluate(c);return u<0?-Math.round(-u):Math.round(u)}],floor:[je,[je],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[je,[je],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[Rt,[yt,Lt],(c,[s,u])=>c.properties()[s.value]===u.value],"filter-id-==":[Rt,[Lt],(c,[s])=>c.id()===s.value],"filter-type-==":[Rt,[yt],(c,[s])=>c.geometryType()===s.value],"filter-<":[Rt,[yt,Lt],(c,[s,u])=>{let h=c.properties()[s.value],m=u.value;return typeof h==typeof m&&h<m}],"filter-id-<":[Rt,[Lt],(c,[s])=>{let u=c.id(),h=s.value;return typeof u==typeof h&&u<h}],"filter->":[Rt,[yt,Lt],(c,[s,u])=>{let h=c.properties()[s.value],m=u.value;return typeof h==typeof m&&h>m}],"filter-id->":[Rt,[Lt],(c,[s])=>{let u=c.id(),h=s.value;return typeof u==typeof h&&u>h}],"filter-<=":[Rt,[yt,Lt],(c,[s,u])=>{let h=c.properties()[s.value],m=u.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[Rt,[Lt],(c,[s])=>{let u=c.id(),h=s.value;return typeof u==typeof h&&u<=h}],"filter->=":[Rt,[yt,Lt],(c,[s,u])=>{let h=c.properties()[s.value],m=u.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[Rt,[Lt],(c,[s])=>{let u=c.id(),h=s.value;return typeof u==typeof h&&u>=h}],"filter-has":[Rt,[Lt],(c,[s])=>s.value in c.properties()],"filter-has-id":[Rt,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Rt,[Po(yt)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[Rt,[Po(Lt)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[Rt,[yt,Po(Lt)],(c,[s,u])=>u.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[Rt,[yt,Po(Lt)],(c,[s,u])=>function(h,m,_,b){for(;_<=b;){let T=_+b>>1;if(m[T]===h)return!0;m[T]>h?b=T-1:_=T+1}return!1}(c.properties()[s.value],u.value,0,u.value.length-1)],all:{type:Rt,overloads:[[[Rt,Rt],(c,[s,u])=>s.evaluate(c)&&u.evaluate(c)],[gu(Rt),(c,s)=>{for(let u of s)if(!u.evaluate(c))return!1;return!0}]]},any:{type:Rt,overloads:[[[Rt,Rt],(c,[s,u])=>s.evaluate(c)||u.evaluate(c)],[gu(Rt),(c,s)=>{for(let u of s)if(u.evaluate(c))return!0;return!1}]]},"!":[Rt,[Rt],(c,[s])=>!s.evaluate(c)],"is-supported-script":[Rt,[yt],(c,[s])=>{let u=c.globals&&c.globals.isSupportedScript;return!u||u(s.evaluate(c))}],upcase:[yt,[yt],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[yt,[yt],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[yt,gu(Lt),(c,s)=>s.map(u=>Yt(u.evaluate(c))).join("")],"resolved-locale":[yt,[pc],(c,[s])=>s.evaluate(c).resolvedLocale()]});class Cd{constructor(s,u){this.expression=s,this._warningHistory={},this._evaluator=new Wg,this._defaultValue=u?function(h){if(h.type==="color"&&Sd(h.default))return new Kt(0,0,0,0);switch(h.type){case"color":return Kt.parse(h.default)||null;case"padding":return si.parse(h.default)||null;case"numberArray":return yn.parse(h.default)||null;case"colorArray":return li.parse(h.default)||null;case"variableAnchorOffsetCollection":return zi.parse(h.default)||null;case"projectionDefinition":return uo.parse(h.default)||null;default:return h.default===void 0?null:h.default}}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(s,u,h,m,_,b){return this._evaluator.globals=s,this._evaluator.feature=u,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(s,u,h,m,_,b){this._evaluator.globals=s,this._evaluator.feature=u||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=b||null;try{let T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new Rr(`Expected value to be one of ${Object.keys(this._enumValues).map(M=>JSON.stringify(M)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console!="undefined"&&console.warn(T.message)),this._defaultValue}}}function Cf(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Ec}function Pd(c,s){let u=new vf(Ec,xd,[],s?function(m){let _={color:en,string:yt,number:je,enum:yt,boolean:Rt,formatted:lf,padding:iu,numberArray:Ms,colorArray:uf,projectionDefinition:tn,resolvedImage:ou,variableAnchorOffsetCollection:gn};return m.type==="array"?Po(_[m.value]||Lt,m.length):_[m.type]}(s):void 0),h=u.parse(c,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Ed(new Cd(h,s)):Tc(u.errors)}class ly{constructor(s,u){this.kind=s,this._styleExpression=u,this.isStateDependent=s!=="constant"&&!Sf(u.expression)}evaluateWithoutErrorHandling(s,u,h,m,_,b){return this._styleExpression.evaluateWithoutErrorHandling(s,u,h,m,_,b)}evaluate(s,u,h,m,_,b){return this._styleExpression.evaluate(s,u,h,m,_,b)}}class Md{constructor(s,u,h,m){this.kind=s,this.zoomStops=h,this._styleExpression=u,this.isStateDependent=s!=="camera"&&!Sf(u.expression),this.interpolationType=m}evaluateWithoutErrorHandling(s,u,h,m,_,b){return this._styleExpression.evaluateWithoutErrorHandling(s,u,h,m,_,b)}evaluate(s,u,h,m,_,b){return this._styleExpression.evaluate(s,u,h,m,_,b)}interpolationFactor(s,u,h){return this.interpolationType?wi.interpolationFactor(this.interpolationType,s,u,h):0}}function uy(c,s){let u=Pd(c,s);if(u.result==="error")return u;let h=u.value.expression,m=bd(h);if(!m&&!Sc(s))return Tc([new Ht("","data expressions not supported")]);let _=wd(h,["zoom"]);if(!_&&!A1(s))return Tc([new Ht("","zoom expressions not supported")]);let b=Mf(h);return b||_?b instanceof Ht?Tc([b]):b instanceof wi&&!Td(s)?Tc([new Ht("","\"interpolate\" expressions cannot be used with this property")]):Ed(b?new Md(m?"camera":"composite",u.value,b.labels,b instanceof wi?b.interpolation:void 0):new ly(m?"constant":"source",u.value)):Tc([new Ht("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class Pf{constructor(s,u){this._parameters=s,this._specification=u,dr(this,sy(this._parameters,this._specification))}static deserialize(s){return new Pf(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function Mf(c){let s=null;if(c instanceof xc)s=Mf(c.result);else if(c instanceof fu){for(let u of c.args)if(s=Mf(u),s)break}else(c instanceof ll||c instanceof wi)&&c.input instanceof Xo&&c.input.name==="zoom"&&(s=c);return s instanceof Ht||c.eachChild(u=>{let h=Mf(u);h instanceof Ht?s=h:!s&&h?s=new Ht("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):s&&h&&s!==h&&(s=new Ht("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),s}function Af(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(let s of c.slice(1))if(!Af(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}let cy={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function qf(c){if(c==null)return{filter:()=>!0,needGeometry:!1};Af(c)||(c=qd(c));let s=Pd(c,cy);if(s.result==="error")throw new Error(s.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,h,m)=>s.value.evaluate(u,h,{},m),needGeometry:R1(c)}}function Ad(c,s){return c<s?-1:c>s?1:0}function R1(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let s=1;s<c.length;s++)if(R1(c[s]))return!0;return!1}function qd(c){if(!c)return!0;let s=c[0];return c.length<=1?s!=="any":s==="=="?hy(c[1],c[2],"=="):s==="!="?Rd(hy(c[1],c[2],"==")):s==="<"||s===">"||s==="<="||s===">="?hy(c[1],c[2],s):s==="any"?(u=c.slice(1),["any"].concat(u.map(qd))):s==="all"?["all"].concat(c.slice(1).map(qd)):s==="none"?["all"].concat(c.slice(1).map(qd).map(Rd)):s==="in"?O1(c[1],c.slice(2)):s==="!in"?Rd(O1(c[1],c.slice(2))):s==="has"?L1(c[1]):s!=="!has"||Rd(L1(c[1]));var u}function hy(c,s,u){switch(c){case"$type":return[`filter-type-${u}`,s];case"$id":return[`filter-id-${u}`,s];default:return[`filter-${u}`,c,s]}}function O1(c,s){if(s.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(u=>typeof u!=typeof s[0])?["filter-in-large",c,["literal",s.sort(Ad)]]:["filter-in-small",c,["literal",s]]}}function L1(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Rd(c){return["!",c]}function Od(c){let s=typeof c;if(s==="number"||s==="boolean"||s==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let m="[";for(let _ of c)m+=`${Od(_)},`;return`${m}]`}let u=Object.keys(c).sort(),h="{";for(let m=0;m<u.length;m++)h+=`${JSON.stringify(u[m])}:${Od(c[u[m]])},`;return`${h}}`}function D1(c){let s="";for(let u of Pe)s+=`/${Od(c[u])}`;return s}function Rf(c){let s=c.value;return s?[new De(c.key,s,"constants have been deprecated as of v8")]:[]}function cn(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function cl(c){if(Array.isArray(c))return c.map(cl);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){let s={};for(let u in c)s[u]=cl(c[u]);return s}return cn(c)}function Ao(c){let s=c.key,u=c.value,h=c.valueSpec||{},m=c.objectElementValidators||{},_=c.style,b=c.styleSpec,T=c.validateSpec,M=[],R=Vt(u);if(R!=="object")return[new De(s,u,`object expected, ${R} found`)];for(let L in u){let k=L.split(".")[0],j=hf(h,k)||h["*"],U;if(hf(m,k))U=m[k];else if(hf(h,k))U=T;else if(m["*"])U=m["*"];else{if(!h["*"]){M.push(new De(s,u[L],`unknown property "${L}"`));continue}U=T}M=M.concat(U({key:(s&&`${s}.`)+L,value:u[L],valueSpec:j,style:_,styleSpec:b,object:u,objectKey:L,validateSpec:T},u))}for(let L in h)m[L]||h[L].required&&h[L].default===void 0&&u[L]===void 0&&M.push(new De(s,u,`missing required property "${L}"`));return M}function fy(c){let s=c.value,u=c.valueSpec,h=c.style,m=c.styleSpec,_=c.key,b=c.arrayElementValidator||c.validateSpec;if(Vt(s)!=="array")return[new De(_,s,`array expected, ${Vt(s)} found`)];if(u.length&&s.length!==u.length)return[new De(_,s,`array length ${u.length} expected, length ${s.length} found`)];if(u["min-length"]&&s.length<u["min-length"])return[new De(_,s,`array length at least ${u["min-length"]} expected, length ${s.length} found`)];let T={type:u.value,values:u.values};m.$version<7&&(T.function=u.function),Vt(u.value)==="object"&&(T=u.value);let M=[];for(let R=0;R<s.length;R++)M=M.concat(b({array:s,arrayIndex:R,value:s[R],valueSpec:T,validateSpec:c.validateSpec,style:h,styleSpec:m,key:`${_}[${R}]`}));return M}function Of(c){let s=c.key,u=c.value,h=c.valueSpec,m=Vt(u);return m==="number"&&u!=u&&(m="NaN"),m!=="number"?[new De(s,u,`number expected, ${m} found`)]:"minimum"in h&&u<h.minimum?[new De(s,u,`${u} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&u>h.maximum?[new De(s,u,`${u} is greater than the maximum value ${h.maximum}`)]:[]}function py(c){let s=c.valueSpec,u=cn(c.value.type),h,m,_,b={},T=u!=="categorical"&&c.value.property===void 0,M=!T,R=Vt(c.value.stops)==="array"&&Vt(c.value.stops[0])==="array"&&Vt(c.value.stops[0][0])==="object",L=Ao({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(U){if(u==="identity")return[new De(U.key,U.value,"identity function may not have a \"stops\" property")];let V=[],H=U.value;return V=V.concat(fy({key:U.key,value:H,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:k})),Vt(H)==="array"&&H.length===0&&V.push(new De(U.key,H,"array must have at least one stop")),V},default:function(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:s,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}});return u==="identity"&&T&&L.push(new De(c.key,c.value,"missing required property \"property\"")),u==="identity"||c.value.stops||L.push(new De(c.key,c.value,"missing required property \"stops\"")),u==="exponential"&&c.valueSpec.expression&&!Td(c.valueSpec)&&L.push(new De(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(M&&!Sc(c.valueSpec)?L.push(new De(c.key,c.value,"property functions not supported")):T&&!A1(c.valueSpec)&&L.push(new De(c.key,c.value,"zoom functions not supported"))),u!=="categorical"&&!R||c.value.property!==void 0||L.push(new De(c.key,c.value,"\"property\" property is required")),L;function k(U){let V=[],H=U.value,te=U.key;if(Vt(H)!=="array")return[new De(te,H,`array expected, ${Vt(H)} found`)];if(H.length!==2)return[new De(te,H,`array length 2 expected, length ${H.length} found`)];if(R){if(Vt(H[0])!=="object")return[new De(te,H,`object expected, ${Vt(H[0])} found`)];if(H[0].zoom===void 0)return[new De(te,H,"object stop key must have zoom")];if(H[0].value===void 0)return[new De(te,H,"object stop key must have value")];if(_&&_>cn(H[0].zoom))return[new De(te,H[0].zoom,"stop zoom values must appear in ascending order")];cn(H[0].zoom)!==_&&(_=cn(H[0].zoom),m=void 0,b={}),V=V.concat(Ao({key:`${te}[0]`,value:H[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:Of,value:j}}))}else V=V.concat(j({key:`${te}[0]`,value:H[0],validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},H));return Cf(cl(H[1]))?V.concat([new De(`${te}[1]`,H[1],"expressions are not allowed in function stops.")]):V.concat(U.validateSpec({key:`${te}[1]`,value:H[1],valueSpec:s,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function j(U,V){let H=Vt(U.value),te=cn(U.value),ue=U.value!==null?U.value:V;if(h){if(H!==h)return[new De(U.key,ue,`${H} stop domain type must match previous stop domain type ${h}`)]}else h=H;if(H!=="number"&&H!=="string"&&H!=="boolean")return[new De(U.key,ue,"stop domain value must be a number, string, or boolean")];if(H!=="number"&&u!=="categorical"){let _e=`number expected, ${H} found`;return Sc(s)&&u===void 0&&(_e+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new De(U.key,ue,_e)]}return u!=="categorical"||H!=="number"||isFinite(te)&&Math.floor(te)===te?u!=="categorical"&&H==="number"&&m!==void 0&&te<m?[new De(U.key,ue,"stop domain values must appear in ascending order")]:(m=te,u==="categorical"&&te in b?[new De(U.key,ue,"stop domain values must be unique")]:(b[te]=!0,[])):[new De(U.key,ue,`integer expected, found ${te}`)]}}function Ha(c){let s=(c.expressionContext==="property"?uy:Pd)(cl(c.value),c.valueSpec);if(s.result==="error")return s.value.map(h=>new De(`${c.key}${h.key}`,c.value,h.message));let u=s.value.expression||s.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!u.outputDefined())return[new De(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Sf(u))return[new De(c.key,c.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(c.expressionContext==="filter"&&!Sf(u))return[new De(c.key,c.value,"\"feature-state\" data expressions are not supported with filters.")];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!wd(u,["zoom","feature-state"]))return[new De(c.key,c.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(c.expressionContext==="cluster-initial"&&!bd(u))return[new De(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function dy(c){let s=c.key,u=c.value,h=Vt(u);return h!=="string"?[new De(s,u,`color expected, ${h} found`)]:Kt.parse(String(u))?[]:[new De(s,u,`color expected, "${u}" found`)]}function Lf(c){let s=c.key,u=c.value,h=c.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(cn(u))===-1&&m.push(new De(s,u,`expected one of [${h.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(h.values).indexOf(cn(u))===-1&&m.push(new De(s,u,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(u)} found`)),m}function my(c){return Af(cl(c.value))?Ha(dr({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):k1(c)}function k1(c){let s=c.value,u=c.key;if(Vt(s)!=="array")return[new De(u,s,`array expected, ${Vt(s)} found`)];let h=c.styleSpec,m,_=[];if(s.length<1)return[new De(u,s,"filter array must have at least 1 element")];switch(_=_.concat(Lf({key:`${u}[0]`,value:s[0],valueSpec:h.filter_operator,style:c.style,styleSpec:c.styleSpec})),cn(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&cn(s[1])==="$type"&&_.push(new De(u,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&_.push(new De(u,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(m=Vt(s[1]),m!=="string"&&_.push(new De(`${u}[1]`,s[1],`string expected, ${m} found`)));for(let b=2;b<s.length;b++)m=Vt(s[b]),cn(s[1])==="$type"?_=_.concat(Lf({key:`${u}[${b}]`,value:s[b],valueSpec:h.geometry_type,style:c.style,styleSpec:c.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&_.push(new De(`${u}[${b}]`,s[b],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let b=1;b<s.length;b++)_=_.concat(k1({key:`${u}[${b}]`,value:s[b],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":m=Vt(s[1]),s.length!==2?_.push(new De(u,s,`filter array for "${s[0]}" operator must have 2 elements`)):m!=="string"&&_.push(new De(`${u}[1]`,s[1],`string expected, ${m} found`))}return _}function N1(c,s){let u=c.key,h=c.validateSpec,m=c.style,_=c.styleSpec,b=c.value,T=c.objectKey,M=_[`${s}_${c.layerType}`];if(!M)return[];let R=T.match(/^(.*)-transition$/);if(s==="paint"&&R&&M[R[1]]&&M[R[1]].transition)return h({key:u,value:b,valueSpec:_.transition,style:m,styleSpec:_});let L=c.valueSpec||M[T];if(!L)return[new De(u,b,`unknown property "${T}"`)];let k;if(Vt(b)==="string"&&Sc(L)&&!L.tokens&&(k=/^{([^}]+)}$/.exec(b)))return[new De(u,b,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(k[1])} }\`.`)];let j=[];return c.layerType==="symbol"&&(T==="text-field"&&m&&!m.glyphs&&j.push(new De(u,b,"use of \"text-field\" requires a style \"glyphs\" property")),T==="text-font"&&Sd(cl(b))&&cn(b.type)==="identity"&&j.push(new De(u,b,"\"text-font\" does not support identity functions"))),j.concat(h({key:c.key,value:b,valueSpec:L,style:m,styleSpec:_,expressionContext:"property",propertyType:s,propertyKey:T}))}function F1(c){return N1(c,"paint")}function Ic(c){return N1(c,"layout")}function Cc(c){let s=[],u=c.value,h=c.key,m=c.style,_=c.styleSpec;if(Vt(u)!=="object")return[new De(h,u,`object expected, ${Vt(u)} found`)];u.type||u.ref||s.push(new De(h,u,"either \"type\" or \"ref\" is required"));let b=cn(u.type),T=cn(u.ref);if(u.id){let M=cn(u.id);for(let R=0;R<c.arrayIndex;R++){let L=m.layers[R];cn(L.id)===M&&s.push(new De(h,u.id,`duplicate layer id "${u.id}", previously used at line ${L.id.__line__}`))}}if("ref"in u){let M;["type","source","source-layer","filter","layout"].forEach(R=>{R in u&&s.push(new De(h,u[R],`"${R}" is prohibited for ref layers`))}),m.layers.forEach(R=>{cn(R.id)===T&&(M=R)}),M?M.ref?s.push(new De(h,u.ref,"ref cannot reference another ref layer")):b=cn(M.type):s.push(new De(h,u.ref,`ref layer "${T}" not found`))}else if(b!=="background")if(u.source){let M=m.sources&&m.sources[u.source],R=M&&cn(M.type);M?R==="vector"&&b==="raster"?s.push(new De(h,u.source,`layer "${u.id}" requires a raster source`)):R!=="raster-dem"&&b==="hillshade"?s.push(new De(h,u.source,`layer "${u.id}" requires a raster-dem source`)):R==="raster"&&b!=="raster"?s.push(new De(h,u.source,`layer "${u.id}" requires a vector source`)):R!=="vector"||u["source-layer"]?R==="raster-dem"&&b!=="hillshade"?s.push(new De(h,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):b!=="line"||!u.paint||!u.paint["line-gradient"]||R==="geojson"&&M.lineMetrics||s.push(new De(h,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new De(h,u,`layer "${u.id}" must specify a "source-layer"`)):s.push(new De(h,u.source,`source "${u.source}" not found`))}else s.push(new De(h,u,"missing required property \"source\""));return s=s.concat(Ao({key:h,value:u,valueSpec:_.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${h}.type`,value:u.type,valueSpec:_.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:u,objectKey:"type"}),filter:my,layout:M=>Ao({layer:u,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":R=>Ic(dr({layerType:b},R))}}),paint:M=>Ao({layer:u,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":R=>F1(dr({layerType:b},R))}})}})),s}function kn(c){let s=c.value,u=c.key,h=Vt(s);return h!=="string"?[new De(u,s,`string expected, ${h} found`)]:[]}let Pc={promoteId:function({key:c,value:s}){if(Vt(s)==="string")return kn({key:c,value:s});{let u=[];for(let h in s)u.push(...kn({key:`${c}.${h}`,value:s[h]}));return u}}};function vy(c){let s=c.value,u=c.key,h=c.styleSpec,m=c.style,_=c.validateSpec;if(!s.type)return[new De(u,s,"\"type\" is required")];let b=cn(s.type),T;switch(b){case"vector":case"raster":return T=Ao({key:u,value:s,valueSpec:h[`source_${b.replace("-","_")}`],style:c.style,styleSpec:h,objectElementValidators:Pc,validateSpec:_}),T;case"raster-dem":return T=function(M){var R;let L=(R=M.sourceName)!==null&&R!==void 0?R:"",k=M.value,j=M.styleSpec,U=j.source_raster_dem,V=M.style,H=[],te=Vt(k);if(k===void 0)return H;if(te!=="object")return H.push(new De("source_raster_dem",k,`object expected, ${te} found`)),H;let ue=cn(k.encoding)==="custom",_e=["redFactor","greenFactor","blueFactor","baseShift"],fe=M.value.encoding?`"${M.value.encoding}"`:"Default";for(let B in k)!ue&&_e.includes(B)?H.push(new De(B,k[B],`In "${L}": "${B}" is only valid when "encoding" is set to "custom". ${fe} encoding found`)):U[B]?H=H.concat(M.validateSpec({key:B,value:k[B],valueSpec:U[B],validateSpec:M.validateSpec,style:V,styleSpec:j})):H.push(new De(B,k[B],`unknown property "${B}"`));return H}({sourceName:u,value:s,style:c.style,styleSpec:h,validateSpec:_}),T;case"geojson":if(T=Ao({key:u,value:s,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:_,objectElementValidators:Pc}),s.cluster)for(let M in s.clusterProperties){let[R,L]=s.clusterProperties[M],k=typeof R=="string"?[R,["accumulated"],["get",M]]:R;T.push(...Ha({key:`${u}.${M}.map`,value:L,expressionContext:"cluster-map"})),T.push(...Ha({key:`${u}.${M}.reduce`,value:k,expressionContext:"cluster-reduce"}))}return T;case"video":return Ao({key:u,value:s,valueSpec:h.source_video,style:m,validateSpec:_,styleSpec:h});case"image":return Ao({key:u,value:s,valueSpec:h.source_image,style:m,validateSpec:_,styleSpec:h});case"canvas":return[new De(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Lf({key:`${u}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function z1(c){let s=c.value,u=c.styleSpec,h=u.light,m=c.style,_=[],b=Vt(s);if(s===void 0)return _;if(b!=="object")return _=_.concat([new De("light",s,`object expected, ${b} found`)]),_;for(let T in s){let M=T.match(/^(.*)-transition$/);_=_.concat(M&&h[M[1]]&&h[M[1]].transition?c.validateSpec({key:T,value:s[T],valueSpec:u.transition,validateSpec:c.validateSpec,style:m,styleSpec:u}):h[T]?c.validateSpec({key:T,value:s[T],valueSpec:h[T],validateSpec:c.validateSpec,style:m,styleSpec:u}):[new De(T,s[T],`unknown property "${T}"`)])}return _}function j1(c){let s=c.value,u=c.styleSpec,h=u.sky,m=c.style,_=Vt(s);if(s===void 0)return[];if(_!=="object")return[new De("sky",s,`object expected, ${_} found`)];let b=[];for(let T in s)b=b.concat(h[T]?c.validateSpec({key:T,value:s[T],valueSpec:h[T],style:m,styleSpec:u}):[new De(T,s[T],`unknown property "${T}"`)]);return b}function Mc(c){let s=c.value,u=c.styleSpec,h=u.terrain,m=c.style,_=[],b=Vt(s);if(s===void 0)return _;if(b!=="object")return _=_.concat([new De("terrain",s,`object expected, ${b} found`)]),_;for(let T in s)_=_.concat(h[T]?c.validateSpec({key:T,value:s[T],valueSpec:h[T],validateSpec:c.validateSpec,style:m,styleSpec:u}):[new De(T,s[T],`unknown property "${T}"`)]);return _}function gy(c){let s=[],u=c.value,h=c.key;if(Array.isArray(u)){let m=[],_=[];for(let b in u)u[b].id&&m.includes(u[b].id)&&s.push(new De(h,u,`all the sprites' ids must be unique, but ${u[b].id} is duplicated`)),m.push(u[b].id),u[b].url&&_.includes(u[b].url)&&s.push(new De(h,u,`all the sprites' URLs must be unique, but ${u[b].url} is duplicated`)),_.push(u[b].url),s=s.concat(Ao({key:`${h}[${b}]`,value:u[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return s}return kn({key:h,value:u})}function Ld(c){return s=c.value,s&&s.constructor===Object?[]:[new De(c.key,c.value,`object expected, ${Vt(c.value)} found`)];var s}let B1={"*":()=>[],array:fy,boolean:function(c){let s=c.value,u=c.key,h=Vt(s);return h!=="boolean"?[new De(u,s,`boolean expected, ${h} found`)]:[]},number:Of,color:dy,constants:Rf,enum:Lf,filter:my,function:py,layer:Cc,object:Ao,source:vy,light:z1,sky:j1,terrain:Mc,projection:function(c){let s=c.value,u=c.styleSpec,h=u.projection,m=c.style,_=Vt(s);if(s===void 0)return[];if(_!=="object")return[new De("projection",s,`object expected, ${_} found`)];let b=[];for(let T in s)b=b.concat(h[T]?c.validateSpec({key:T,value:s[T],valueSpec:h[T],style:m,styleSpec:u}):[new De(T,s[T],`unknown property "${T}"`)]);return b},projectionDefinition:function(c){let s=c.key,u=c.value;u=u instanceof String?u.valueOf():u;let h=Vt(u);return h!=="array"||function(m){return Array.isArray(m)&&m.length===3&&typeof m[0]=="string"&&typeof m[1]=="string"&&typeof m[2]=="number"}(u)||function(m){return!!["interpolate","step","literal"].includes(m[0])}(u)?["array","string"].includes(h)?[]:[new De(s,u,`projection expected, invalid type "${h}" found`)]:[new De(s,u,`projection expected, invalid array ${JSON.stringify(u)} found`)]},string:kn,formatted:function(c){return kn(c).length===0?[]:Ha(c)},resolvedImage:function(c){return kn(c).length===0?[]:Ha(c)},padding:function(c){let s=c.key,u=c.value;if(Vt(u)==="array"){if(u.length<1||u.length>4)return[new De(s,u,`padding requires 1 to 4 values; ${u.length} values found`)];let h={type:"number"},m=[];for(let _=0;_<u.length;_++)m=m.concat(c.validateSpec({key:`${s}[${_}]`,value:u[_],validateSpec:c.validateSpec,valueSpec:h}));return m}return Of({key:s,value:u,valueSpec:{}})},numberArray:function(c){let s=c.key,u=c.value;if(Vt(u)==="array"){let h={type:"number"};if(u.length<1)return[new De(s,u,"array length at least 1 expected, length 0 found")];let m=[];for(let _=0;_<u.length;_++)m=m.concat(c.validateSpec({key:`${s}[${_}]`,value:u[_],validateSpec:c.validateSpec,valueSpec:h}));return m}return Of({key:s,value:u,valueSpec:{}})},colorArray:function(c){let s=c.key,u=c.value;if(Vt(u)==="array"){if(u.length<1)return[new De(s,u,"array length at least 1 expected, length 0 found")];let h=[];for(let m=0;m<u.length;m++)h=h.concat(dy({key:`${s}[${m}]`,value:u[m]}));return h}return dy({key:s,value:u})},variableAnchorOffsetCollection:function(c){let s=c.key,u=c.value,h=Vt(u),m=c.styleSpec;if(h!=="array"||u.length<1||u.length%2!=0)return[new De(s,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let b=0;b<u.length;b+=2)_=_.concat(Lf({key:`${s}[${b}]`,value:u[b],valueSpec:m.layout_symbol["text-anchor"]})),_=_.concat(fy({key:`${s}[${b+1}]`,value:u[b+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:m}));return _},sprite:gy,state:Ld};function Ac(c){let s=c.value,u=c.valueSpec,h=c.styleSpec;return c.validateSpec=Ac,u.expression&&Sd(cn(s))?py(c):u.expression&&Cf(cl(s))?Ha(c):u.type&&B1[u.type]?B1[u.type](c):Ao(dr({},c,{valueSpec:u.type?h[u.type]:u}))}function U1(c){let s=c.value,u=c.key,h=kn(c);return h.length||(s.indexOf("{fontstack}")===-1&&h.push(new De(u,s,"\"glyphs\" url must include a \"{fontstack}\" token")),s.indexOf("{range}")===-1&&h.push(new De(u,s,"\"glyphs\" url must include a \"{range}\" token"))),h}function Ei(c,s=re){let u=[];return u=u.concat(Ac({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,validateSpec:Ac,objectElementValidators:{glyphs:U1,"*":()=>[]}})),c.constants&&(u=u.concat(Rf({key:"constants",value:c.constants}))),qc(u)}function Pa(c){return function(s){return c(cq(uq({},s),{validateSpec:Ac}))}}function qc(c){return[].concat(c).sort((s,u)=>s.line-u.line)}function Ma(c){return function(...s){return qc(c.apply(this,s))}}Ei.source=Ma(Pa(vy)),Ei.sprite=Ma(Pa(gy)),Ei.glyphs=Ma(Pa(U1)),Ei.light=Ma(Pa(z1)),Ei.sky=Ma(Pa(j1)),Ei.terrain=Ma(Pa(Mc)),Ei.state=Ma(Pa(Ld)),Ei.layer=Ma(Pa(Cc)),Ei.filter=Ma(Pa(my)),Ei.paintProperty=Ma(Pa(F1)),Ei.layoutProperty=Ma(Pa(Ic));let Rc=Ei,Dd=Rc.light,hA=Rc.sky,yy=Rc.paintProperty,kd=Rc.layoutProperty;function _y(c,s){let u=!1;if(s&&s.length)for(let h of s)c.fire(new pe(new Error(h.message))),u=!0;return u}class Oc{constructor(s,u,h){let m=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;let b=new Int32Array(this.arrayBuffer);s=b[0],this.d=(u=b[1])+2*(h=b[2]);for(let M=0;M<this.d*this.d;M++){let R=b[3+M],L=b[3+M+1];m.push(R===L?null:b.subarray(R,L))}let T=b[3+m.length+1];this.keys=b.subarray(b[3+m.length],T),this.bboxes=b.subarray(T),this.insert=this._insertReadonly}else{this.d=u+2*h;for(let b=0;b<this.d*this.d;b++)m.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=s,this.padding=h,this.scale=u/s,this.uid=0;let _=h/u*s;this.min=-_,this.max=s+_}insert(s,u,h,m,_){this._forEachCell(u,h,m,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(u),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,u,h,m,_,b){this.cells[_].push(b)}query(s,u,h,m,_){let b=this.min,T=this.max;if(s<=b&&u<=b&&T<=h&&T<=m&&!_)return Array.prototype.slice.call(this.keys);{let M=[];return this._forEachCell(s,u,h,m,this._queryCell,M,{},_),M}}_queryCell(s,u,h,m,_,b,T,M){let R=this.cells[_];if(R!==null){let L=this.keys,k=this.bboxes;for(let j=0;j<R.length;j++){let U=R[j];if(T[U]===void 0){let V=4*U;(M?M(k[V+0],k[V+1],k[V+2],k[V+3]):s<=k[V+2]&&u<=k[V+3]&&h>=k[V+0]&&m>=k[V+1])?(T[U]=!0,b.push(L[U])):T[U]=!1}}}}_forEachCell(s,u,h,m,_,b,T,M){let R=this._convertToCellCoord(s),L=this._convertToCellCoord(u),k=this._convertToCellCoord(h),j=this._convertToCellCoord(m);for(let U=R;U<=k;U++)for(let V=L;V<=j;V++){let H=this.d*V+U;if((!M||M(this._convertFromCellCoord(U),this._convertFromCellCoord(V),this._convertFromCellCoord(U+1),this._convertFromCellCoord(V+1)))&&_.call(this,s,u,h,m,H,b,T,M))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let s=this.cells,u=3+this.cells.length+1+1,h=0;for(let b=0;b<this.cells.length;b++)h+=this.cells[b].length;let m=new Int32Array(u+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let _=u;for(let b=0;b<s.length;b++){let T=s[b];m[3+b]=_,m.set(T,_),_+=T.length}return m[3+s.length]=_,m.set(this.keys,_),_+=this.keys.length,m[3+s.length+1]=_,m.set(this.bboxes,_),_+=this.bboxes.length,m.buffer}static serialize(s,u){let h=s.toArrayBuffer();return u&&u.push(h),{buffer:h}}static deserialize(s){return new Oc(s.buffer)}}let Ka={};function st(c,s,u={}){if(Ka[c])throw new Error(`${c} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:c,writeable:!1}),Ka[c]={klass:s,omit:u.omit||[],shallow:u.shallow||[]}}st("Object",Object),st("TransferableGridIndex",Oc),st("Color",Kt),st("Error",Error),st("AJAXError",$n),st("ResolvedImage",Mo),st("StylePropertyFunction",Pf),st("StyleExpression",Cd,{omit:["_evaluator"]}),st("ZoomDependentExpression",Md),st("ZoomConstantExpression",ly),st("CompoundExpression",Xo,{omit:["_evaluate"]});for(let c in Ec)Ec[c]._classRegistryKey||st(`Expression_${c}`,Ec[c]);function Nd(c){return c&&typeof ArrayBuffer!="undefined"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Fd(c){return c.$name||c.constructor._classRegistryKey}function V1(c){return!function(s){if(s===null||typeof s!="object")return!1;let u=Fd(s);return!(!u||u==="Object")}(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||Nd(c)||ki(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function Lc(c,s){if(V1(c))return(Nd(c)||ki(c))&&s&&s.push(c),ArrayBuffer.isView(c)&&s&&s.push(c.buffer),c instanceof ImageData&&s&&s.push(c.data.buffer),c;if(Array.isArray(c)){let _=[];for(let b of c)_.push(Lc(b,s));return _}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);let u=Fd(c);if(!u)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!Ka[u])throw new Error(`${u} is not registered.`);let{klass:h}=Ka[u],m=h.serialize?h.serialize(c,s):{};if(h.serialize){if(s&&m===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let _ in c){if(!c.hasOwnProperty(_)||Ka[u].omit.indexOf(_)>=0)continue;let b=c[_];m[_]=Ka[u].shallow.indexOf(_)>=0?b:Lc(b,s)}c instanceof Error&&(m.message=c.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(m.$name=u),m}function Df(c){if(V1(c))return c;if(Array.isArray(c))return c.map(Df);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);let s=Fd(c)||"Object";if(!Ka[s])throw new Error(`can't deserialize unregistered class ${s}`);let{klass:u}=Ka[s];if(!u)throw new Error(`can't deserialize unregistered class ${s}`);if(u.deserialize)return u.deserialize(c);let h=Object.create(u.prototype);for(let m of Object.keys(c)){if(m==="$name")continue;let _=c[m];h[m]=Ka[s].shallow.indexOf(m)>=0?_:Df(_)}return h}class xy{constructor(){this.first=!0}update(s,u){let h=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=u),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=h,!0))}}let $t={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Hangul Syllables":c=>c>=44032&&c<=55215,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function zd(c){for(let s of c)if(jd(s.charCodeAt(0)))return!0;return!1}function fA(c){for(let s of c)if(!G1(s.charCodeAt(0)))return!1;return!0}function by(c){let s=c.map(u=>{try{return new RegExp(`\\p{sc=${u}}`,"u").source}catch(h){return null}}).filter(u=>u);return new RegExp(s.join("|"),"u")}let $1=by(["Arab","Dupl","Mong","Ougr","Syrc"]);function G1(c){return!$1.test(String.fromCodePoint(c))}let wy=by(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function jd(c){return!(c!==746&&c!==747&&(c<4352||!($t["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||$t["CJK Compatibility"](c)||$t["CJK Strokes"](c)||!(!$t["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||$t["Enclosed CJK Letters and Months"](c)||$t["Ideographic Description Characters"](c)||$t.Kanbun(c)||$t.Katakana(c)&&c!==12540||!(!$t["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!$t["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||$t["Vertical Forms"](c)||$t["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||wy.test(String.fromCodePoint(c)))))}function kf(c){return!(jd(c)||function(s){return!!($t["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||$t["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||$t["Letterlike Symbols"](s)||$t["Number Forms"](s)||$t["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||$t["Control Pictures"](s)&&s!==9251||$t["Optical Character Recognition"](s)||$t["Enclosed Alphanumerics"](s)||$t["Geometric Shapes"](s)||$t["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||$t["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||$t["CJK Symbols and Punctuation"](s)||$t.Katakana(s)||$t["Private Use Area"](s)||$t["CJK Compatibility Forms"](s)||$t["Small Form Variants"](s)||$t["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(c))}let pA=by(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Bd(c){return pA.test(String.fromCodePoint(c))}function dA(c,s){return!(!s&&Bd(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||$t.Khmer(c))}function mA(c){for(let s of c)if(Bd(s.charCodeAt(0)))return!0;return!1}let Rs=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){if(Rs.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(c,s){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(c.pluginStatus!=="loading")return this.setState(c),c;let u=c.pluginURL,h=new Promise(_=>{this.loadScriptResolve=_});s(u);let m=new Promise(_=>setTimeout(()=>_(),this.TIMEOUT));if(yield Promise.race([h,m]),this.isParsed()){let _={pluginStatus:"loaded",pluginURL:u};return this.setState(_),_}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${u}`)})}};class Or{constructor(s,u){this.zoom=s,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new xy,this.transition={})}isSupportedScript(s){return function(u,h){for(let m of u)if(!dA(m.charCodeAt(0),h))return!1;return!0}(s,Rs.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let s=this.zoom,u=s-Math.floor(s),h=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*u}}}class Nf{constructor(s,u){this.property=s,this.value=u,this.expression=function(h,m){if(Sd(h))return new Pf(h,m);if(Cf(h)){let _=uy(h,m);if(_.result==="error")throw new Error(_.value.map(b=>`${b.key}: ${b.message}`).join(", "));return _.value}{let _=h;return m.type==="color"&&typeof h=="string"?_=Kt.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?m.type!=="numberArray"||typeof h!="number"&&!Array.isArray(h)?m.type!=="colorArray"||typeof h!="string"&&!Array.isArray(h)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(h)?_=zi.parse(h):m.type==="projectionDefinition"&&typeof h=="string"&&(_=uo.parse(h)):_=li.parse(h):_=yn.parse(h):_=si.parse(h),{kind:"constant",evaluate:()=>_}}}(u===void 0?s.specification.default:u,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,u,h){return this.property.possiblyEvaluate(this,s,u,h)}}class Ey{constructor(s){this.property=s,this.value=new Nf(s,void 0)}transitioned(s,u){return new W1(this.property,this.value,u,zt({},s.transition,this.transition),s.now)}untransitioned(){return new W1(this.property,this.value,null,{},0)}}class Z1{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return ii(this._values[s].value.value)}setValue(s,u){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Ey(this._values[s].property)),this._values[s].value=new Nf(this._values[s].property,u===null?void 0:ii(u))}getTransition(s){return ii(this._values[s].transition)}setTransition(s,u){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Ey(this._values[s].property)),this._values[s].transition=ii(u)||void 0}serialize(){let s={};for(let u of Object.keys(this._values)){let h=this.getValue(u);h!==void 0&&(s[u]=h);let m=this.getTransition(u);m!==void 0&&(s[`${u}-transition`]=m)}return s}transitioned(s,u){let h=new H1(this._properties);for(let m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(s,u._values[m]);return h}untransitioned(){let s=new H1(this._properties);for(let u of Object.keys(this._values))s._values[u]=this._values[u].untransitioned();return s}}class W1{constructor(s,u,h,m,_){this.property=s,this.value=u,this.begin=_+m.delay||0,this.end=this.begin+m.duration||0,s.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(s,u,h){let m=s.now||0,_=this.value.possiblyEvaluate(s,u,h),b=this.prior;if(b){if(m>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(m<this.begin)return b.possiblyEvaluate(s,u,h);{let T=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(s,u,h),_,un(T))}}return _}}class H1{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,u,h){let m=new Ud(this._properties);for(let _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(s,u,h);return m}hasTransition(){for(let s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class vA{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return this._values[s].value!==void 0}getValue(s){return ii(this._values[s].value)}setValue(s,u){this._values[s]=new Nf(this._values[s].property,u===null?void 0:ii(u))}serialize(){let s={};for(let u of Object.keys(this._values)){let h=this.getValue(u);h!==void 0&&(s[u]=h)}return s}possiblyEvaluate(s,u,h){let m=new Ud(this._properties);for(let _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(s,u,h);return m}}class ji{constructor(s,u,h){this.property=s,this.value=u,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,u,h,m){return this.property.evaluate(this.value,this.parameters,s,u,h,m)}}class Ud{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class ht{constructor(s){this.specification=s}possiblyEvaluate(s,u){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(u)}interpolate(s,u,h){let m=Za[this.specification.type];return m?m(s,u,h):s}}class _t{constructor(s,u){this.specification=s,this.overrides=u}possiblyEvaluate(s,u,h,m){return new ji(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(u,null,{},h,m)}:s.expression,u)}interpolate(s,u,h){if(s.value.kind!=="constant"||u.value.kind!=="constant")return s;if(s.value.value===void 0||u.value.value===void 0)return new ji(this,{kind:"constant",value:void 0},s.parameters);let m=Za[this.specification.type];if(m){let _=m(s.value.value,u.value.value,h);return new ji(this,{kind:"constant",value:_},s.parameters)}return s}evaluate(s,u,h,m,_,b){return s.kind==="constant"?s.value:s.evaluate(u,h,m,_,b)}}class Ff extends _t{possiblyEvaluate(s,u,h,m){if(s.value===void 0)return new ji(this,{kind:"constant",value:void 0},u);if(s.expression.kind==="constant"){let _=s.expression.evaluate(u,null,{},h,m),b=s.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,T=this._calculate(b,b,b,u);return new ji(this,{kind:"constant",value:T},u)}if(s.expression.kind==="camera"){let _=this._calculate(s.expression.evaluate({zoom:u.zoom-1}),s.expression.evaluate({zoom:u.zoom}),s.expression.evaluate({zoom:u.zoom+1}),u);return new ji(this,{kind:"constant",value:_},u)}return new ji(this,s.expression,u)}evaluate(s,u,h,m,_,b){if(s.kind==="source"){let T=s.evaluate(u,h,m,_,b);return this._calculate(T,T,T,u)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(u.zoom)-1},h,m),s.evaluate({zoom:Math.floor(u.zoom)},h,m),s.evaluate({zoom:Math.floor(u.zoom)+1},h,m),u):s.value}_calculate(s,u,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:s,to:u}:{from:h,to:u}}interpolate(s){return s}}class Ty{constructor(s){this.specification=s}possiblyEvaluate(s,u,h,m){if(s.value!==void 0){if(s.expression.kind==="constant"){let _=s.expression.evaluate(u,null,{},h,m);return this._calculate(_,_,_,u)}return this._calculate(s.expression.evaluate(new Or(Math.floor(u.zoom-1),u)),s.expression.evaluate(new Or(Math.floor(u.zoom),u)),s.expression.evaluate(new Or(Math.floor(u.zoom+1),u)),u)}}_calculate(s,u,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:s,to:u}:{from:h,to:u}}interpolate(s){return s}}class Sy{constructor(s){this.specification=s}possiblyEvaluate(s,u,h,m){return!!s.expression.evaluate(u,null,{},h,m)}interpolate(){return!1}}class En{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let u in s){let h=s[u];h.specification.overridable&&this.overridableProperties.push(u);let m=this.defaultPropertyValues[u]=new Nf(h,void 0),_=this.defaultTransitionablePropertyValues[u]=new Ey(h);this.defaultTransitioningPropertyValues[u]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=m.possiblyEvaluate({})}}}st("DataDrivenProperty",_t),st("DataConstantProperty",ht),st("CrossFadedDataDrivenProperty",Ff),st("CrossFadedProperty",Ty),st("ColorRampProperty",Sy);let Iy="-transition";class Qo extends xe{constructor(s,u){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),u.layout&&(this._unevaluatedLayout=new vA(u.layout)),u.paint)){this._transitionablePaint=new Z1(u.paint);for(let h in s.paint)this.setPaintProperty(h,s.paint[h],{validate:!1});for(let h in s.layout)this.setLayoutProperty(h,s.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ud(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,u,h={}){u!=null&&this._validate(kd,`layers.${this.id}.layout.${s}`,s,u,h)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,u):this.visibility=u)}getPaintProperty(s){return s.endsWith(Iy)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,u,h={}){if(u!=null&&this._validate(yy,`layers.${this.id}.paint.${s}`,s,u,h))return!1;if(s.endsWith(Iy))return this._transitionablePaint.setTransition(s.slice(0,-11),u||void 0),!1;{let m=this._transitionablePaint._values[s],_=m.property.specification["property-type"]==="cross-faded-data-driven",b=m.value.isDataDriven(),T=m.value;this._transitionablePaint.setValue(s,u),this._handleSpecialPaintPropertyUpdate(s);let M=this._transitionablePaint._values[s].value;return M.isDataDriven()||b||_||this._handleOverridablePaintPropertyUpdate(s,T,M)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,u,h){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,u){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,u)}serialize(){let s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),wn(s,(u,h)=>!(u===void 0||h==="layout"&&!Object.keys(u).length||h==="paint"&&!Object.keys(u).length))}_validate(s,u,h,m,_={}){return(!_||_.validate!==!1)&&_y(this,s.call(Rc,{key:u,layerType:this.type,objectKey:h,value:m,styleSpec:re,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let s in this.paint._values){let u=this.paint.get(s);if(u instanceof ji&&Sc(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}let K1={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class yu{constructor(s,u){this._structArray=s,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class nn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,u){return s._trim(),u&&(s.isTransferred=!0,u.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){let u=Object.create(this.prototype);return u.arrayBuffer=s.arrayBuffer,u.length=s.length,u.capacity=s.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Vr(c,s=1){let u=0,h=0;return{members:c.map(m=>{let _=K1[m.type].BYTES_PER_ELEMENT,b=u=Dc(u,Math.max(s,_)),T=m.components||1;return h=Math.max(h,_),u+=_*T,{name:m.name,type:m.type,components:T,offset:b}}),size:Dc(u,Math.max(h,s)),alignment:s}}function Dc(c,s){return Math.ceil(c/s)*s}class zf extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u){let h=this.length;return this.resize(h+1),this.emplace(h,s,u)}emplace(s,u,h){let m=2*s;return this.int16[m+0]=u,this.int16[m+1]=h,s}}zf.prototype.bytesPerElement=4,st("StructArrayLayout2i4",zf);class jf extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,h){let m=this.length;return this.resize(m+1),this.emplace(m,s,u,h)}emplace(s,u,h,m){let _=3*s;return this.int16[_+0]=u,this.int16[_+1]=h,this.int16[_+2]=m,s}}jf.prototype.bytesPerElement=6,st("StructArrayLayout3i6",jf);class _u extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,h,m){let _=this.length;return this.resize(_+1),this.emplace(_,s,u,h,m)}emplace(s,u,h,m,_){let b=4*s;return this.int16[b+0]=u,this.int16[b+1]=h,this.int16[b+2]=m,this.int16[b+3]=_,s}}_u.prototype.bytesPerElement=8,st("StructArrayLayout4i8",_u);class Cy extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,h,m,_,b){let T=this.length;return this.resize(T+1),this.emplace(T,s,u,h,m,_,b)}emplace(s,u,h,m,_,b,T){let M=6*s;return this.int16[M+0]=u,this.int16[M+1]=h,this.int16[M+2]=m,this.int16[M+3]=_,this.int16[M+4]=b,this.int16[M+5]=T,s}}Cy.prototype.bytesPerElement=12,st("StructArrayLayout2i4i12",Cy);class Py extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,h,m,_,b){let T=this.length;return this.resize(T+1),this.emplace(T,s,u,h,m,_,b)}emplace(s,u,h,m,_,b,T){let M=4*s,R=8*s;return this.int16[M+0]=u,this.int16[M+1]=h,this.uint8[R+4]=m,this.uint8[R+5]=_,this.uint8[R+6]=b,this.uint8[R+7]=T,s}}Py.prototype.bytesPerElement=8,st("StructArrayLayout2i4ub8",Py);class kc extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u){let h=this.length;return this.resize(h+1),this.emplace(h,s,u)}emplace(s,u,h){let m=2*s;return this.float32[m+0]=u,this.float32[m+1]=h,s}}kc.prototype.bytesPerElement=8,st("StructArrayLayout2f8",kc);class My extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,h,m,_,b,T,M,R,L){let k=this.length;return this.resize(k+1),this.emplace(k,s,u,h,m,_,b,T,M,R,L)}emplace(s,u,h,m,_,b,T,M,R,L,k){let j=10*s;return this.uint16[j+0]=u,this.uint16[j+1]=h,this.uint16[j+2]=m,this.uint16[j+3]=_,this.uint16[j+4]=b,this.uint16[j+5]=T,this.uint16[j+6]=M,this.uint16[j+7]=R,this.uint16[j+8]=L,this.uint16[j+9]=k,s}}My.prototype.bytesPerElement=20,st("StructArrayLayout10ui20",My);class g extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,h,m,_,b,T,M,R,L,k,j){let U=this.length;return this.resize(U+1),this.emplace(U,s,u,h,m,_,b,T,M,R,L,k,j)}emplace(s,u,h,m,_,b,T,M,R,L,k,j,U){let V=12*s;return this.int16[V+0]=u,this.int16[V+1]=h,this.int16[V+2]=m,this.int16[V+3]=_,this.uint16[V+4]=b,this.uint16[V+5]=T,this.uint16[V+6]=M,this.uint16[V+7]=R,this.int16[V+8]=L,this.int16[V+9]=k,this.int16[V+10]=j,this.int16[V+11]=U,s}}g.prototype.bytesPerElement=24,st("StructArrayLayout4i4ui4i24",g);class a extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,h){let m=this.length;return this.resize(m+1),this.emplace(m,s,u,h)}emplace(s,u,h,m){let _=3*s;return this.float32[_+0]=u,this.float32[_+1]=h,this.float32[_+2]=m,s}}a.prototype.bytesPerElement=12,st("StructArrayLayout3f12",a);class l extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){let u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint32[1*s+0]=u,s}}l.prototype.bytesPerElement=4,st("StructArrayLayout1ul4",l);class p extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,h,m,_,b,T,M,R){let L=this.length;return this.resize(L+1),this.emplace(L,s,u,h,m,_,b,T,M,R)}emplace(s,u,h,m,_,b,T,M,R,L){let k=10*s,j=5*s;return this.int16[k+0]=u,this.int16[k+1]=h,this.int16[k+2]=m,this.int16[k+3]=_,this.int16[k+4]=b,this.int16[k+5]=T,this.uint32[j+3]=M,this.uint16[k+8]=R,this.uint16[k+9]=L,s}}p.prototype.bytesPerElement=20,st("StructArrayLayout6i1ul2ui20",p);class d extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,h,m,_,b){let T=this.length;return this.resize(T+1),this.emplace(T,s,u,h,m,_,b)}emplace(s,u,h,m,_,b,T){let M=6*s;return this.int16[M+0]=u,this.int16[M+1]=h,this.int16[M+2]=m,this.int16[M+3]=_,this.int16[M+4]=b,this.int16[M+5]=T,s}}d.prototype.bytesPerElement=12,st("StructArrayLayout2i2i2i12",d);class y extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,h,m,_){let b=this.length;return this.resize(b+1),this.emplace(b,s,u,h,m,_)}emplace(s,u,h,m,_,b){let T=4*s,M=8*s;return this.float32[T+0]=u,this.float32[T+1]=h,this.float32[T+2]=m,this.int16[M+6]=_,this.int16[M+7]=b,s}}y.prototype.bytesPerElement=16,st("StructArrayLayout2f1f2i16",y);class w extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,h,m,_,b){let T=this.length;return this.resize(T+1),this.emplace(T,s,u,h,m,_,b)}emplace(s,u,h,m,_,b,T){let M=16*s,R=4*s,L=8*s;return this.uint8[M+0]=u,this.uint8[M+1]=h,this.float32[R+1]=m,this.float32[R+2]=_,this.int16[L+6]=b,this.int16[L+7]=T,s}}w.prototype.bytesPerElement=16,st("StructArrayLayout2ub2f2i16",w);class C extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,h){let m=this.length;return this.resize(m+1),this.emplace(m,s,u,h)}emplace(s,u,h,m){let _=3*s;return this.uint16[_+0]=u,this.uint16[_+1]=h,this.uint16[_+2]=m,s}}C.prototype.bytesPerElement=6,st("StructArrayLayout3ui6",C);class A extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,h,m,_,b,T,M,R,L,k,j,U,V,H,te,ue){let _e=this.length;return this.resize(_e+1),this.emplace(_e,s,u,h,m,_,b,T,M,R,L,k,j,U,V,H,te,ue)}emplace(s,u,h,m,_,b,T,M,R,L,k,j,U,V,H,te,ue,_e){let fe=24*s,B=12*s,ee=48*s;return this.int16[fe+0]=u,this.int16[fe+1]=h,this.uint16[fe+2]=m,this.uint16[fe+3]=_,this.uint32[B+2]=b,this.uint32[B+3]=T,this.uint32[B+4]=M,this.uint16[fe+10]=R,this.uint16[fe+11]=L,this.uint16[fe+12]=k,this.float32[B+7]=j,this.float32[B+8]=U,this.uint8[ee+36]=V,this.uint8[ee+37]=H,this.uint8[ee+38]=te,this.uint32[B+10]=ue,this.int16[fe+22]=_e,s}}A.prototype.bytesPerElement=48,st("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",A);class O extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,h,m,_,b,T,M,R,L,k,j,U,V,H,te,ue,_e,fe,B,ee,de,Ce,Ve,Ae,ke,We,$e){let Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,s,u,h,m,_,b,T,M,R,L,k,j,U,V,H,te,ue,_e,fe,B,ee,de,Ce,Ve,Ae,ke,We,$e)}emplace(s,u,h,m,_,b,T,M,R,L,k,j,U,V,H,te,ue,_e,fe,B,ee,de,Ce,Ve,Ae,ke,We,$e,Ke){let Fe=32*s,lt=16*s;return this.int16[Fe+0]=u,this.int16[Fe+1]=h,this.int16[Fe+2]=m,this.int16[Fe+3]=_,this.int16[Fe+4]=b,this.int16[Fe+5]=T,this.int16[Fe+6]=M,this.int16[Fe+7]=R,this.uint16[Fe+8]=L,this.uint16[Fe+9]=k,this.uint16[Fe+10]=j,this.uint16[Fe+11]=U,this.uint16[Fe+12]=V,this.uint16[Fe+13]=H,this.uint16[Fe+14]=te,this.uint16[Fe+15]=ue,this.uint16[Fe+16]=_e,this.uint16[Fe+17]=fe,this.uint16[Fe+18]=B,this.uint16[Fe+19]=ee,this.uint16[Fe+20]=de,this.uint16[Fe+21]=Ce,this.uint16[Fe+22]=Ve,this.uint32[lt+12]=Ae,this.float32[lt+13]=ke,this.float32[lt+14]=We,this.uint16[Fe+30]=$e,this.uint16[Fe+31]=Ke,s}}O.prototype.bytesPerElement=64,st("StructArrayLayout8i15ui1ul2f2ui64",O);class D extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){let u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.float32[1*s+0]=u,s}}D.prototype.bytesPerElement=4,st("StructArrayLayout1f4",D);class z extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,h){let m=this.length;return this.resize(m+1),this.emplace(m,s,u,h)}emplace(s,u,h,m){let _=3*s;return this.uint16[6*s+0]=u,this.float32[_+1]=h,this.float32[_+2]=m,s}}z.prototype.bytesPerElement=12,st("StructArrayLayout1ui2f12",z);class N extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,h){let m=this.length;return this.resize(m+1),this.emplace(m,s,u,h)}emplace(s,u,h,m){let _=4*s;return this.uint32[2*s+0]=u,this.uint16[_+2]=h,this.uint16[_+3]=m,s}}N.prototype.bytesPerElement=8,st("StructArrayLayout1ul2ui8",N);class $ extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u){let h=this.length;return this.resize(h+1),this.emplace(h,s,u)}emplace(s,u,h){let m=2*s;return this.uint16[m+0]=u,this.uint16[m+1]=h,s}}$.prototype.bytesPerElement=4,st("StructArrayLayout2ui4",$);class G extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){let u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint16[1*s+0]=u,s}}G.prototype.bytesPerElement=2,st("StructArrayLayout1ui2",G);class ae extends nn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,h,m){let _=this.length;return this.resize(_+1),this.emplace(_,s,u,h,m)}emplace(s,u,h,m,_){let b=4*s;return this.float32[b+0]=u,this.float32[b+1]=h,this.float32[b+2]=m,this.float32[b+3]=_,s}}ae.prototype.bytesPerElement=16,st("StructArrayLayout4f16",ae);class oe extends yu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new q(this.anchorPointX,this.anchorPointY)}}oe.prototype.size=20;class se extends p{get(s){return new oe(this,s)}}st("CollisionBoxArray",se);class he extends yu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}he.prototype.size=48;class ve extends A{get(s){return new he(this,s)}}st("PlacedSymbolArray",ve);class me extends yu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}me.prototype.size=64;class ge extends O{get(s){return new me(this,s)}}st("SymbolInstanceArray",ge);class be extends D{getoffsetX(s){return this.float32[1*s+0]}}st("GlyphOffsetArray",be);class ye extends jf{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}st("SymbolLineVertexArray",ye);class Ie extends yu{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ie.prototype.size=12;class Ne extends z{get(s){return new Ie(this,s)}}st("TextAnchorOffsetArray",Ne);class qe extends yu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}qe.prototype.size=8;class Re extends N{get(s){return new qe(this,s)}}st("FeatureIndexArray",Re);class Oe extends zf{}class Qe extends zf{}class Xe extends zf{}class Ge extends Cy{}class ut extends Py{}class kt extends kc{}class Xt extends My{}class $r extends g{}class Sr extends a{}class Gr extends l{}class Zr extends d{}class Pr extends w{}class ur extends C{}class Nn extends ${}let Wn=Vr([{name:"a_pos",components:2,type:"Int16"}],4),{members:ui}=Wn;class cr{constructor(s=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=s}prepareSegment(s,u,h,m){let _=this.segments[this.segments.length-1];return s>cr.MAX_VERTEX_ARRAY_LENGTH&&Dn(`Max vertices per segment is ${cr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${cr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!_||_.vertexLength+s>cr.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==m?this.createNewSegment(u,h,m):_}createNewSegment(s,u,h){let m={vertexOffset:s.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0,vaos:{}};return h!==void 0&&(m.sortKey=h),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(m),m}getOrCreateLatestSegment(s,u,h){return this.prepareSegment(0,s,u,h)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let s of this.segments)for(let u in s.vaos)s.vaos[u].destroy()}static simpleSegment(s,u,h,m){return new cr([{vertexOffset:s,primitiveOffset:u,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function hl(c,s){return 256*(c=Br(Math.floor(c),0,255))+Br(Math.floor(s),0,255)}cr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,st("SegmentVector",cr);let Ya=Vr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var fl,xu,Bf,pl={exports:{}},bu={exports:{}},qo={exports:{}},dl=function(){if(Bf)return pl.exports;Bf=1;var c=(fl||(fl=1,bu.exports=function(u,h){var m,_,b,T,M,R,L,k;for(_=u.length-(m=3&u.length),b=h,M=3432918353,R=461845907,k=0;k<_;)L=255&u.charCodeAt(k)|(255&u.charCodeAt(++k))<<8|(255&u.charCodeAt(++k))<<16|(255&u.charCodeAt(++k))<<24,++k,b=27492+(65535&(T=5*(65535&(b=(b^=L=(65535&(L=(L=(65535&L)*M+(((L>>>16)*M&65535)<<16)&4294967295)<<15|L>>>17))*R+(((L>>>16)*R&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(T>>>16)&65535)<<16);switch(L=0,m){case 3:L^=(255&u.charCodeAt(k+2))<<16;case 2:L^=(255&u.charCodeAt(k+1))<<8;case 1:b^=L=(65535&(L=(L=(65535&(L^=255&u.charCodeAt(k)))*M+(((L>>>16)*M&65535)<<16)&4294967295)<<15|L>>>17))*R+(((L>>>16)*R&65535)<<16)&4294967295}return b^=u.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}),bu.exports),s=(xu||(xu=1,qo.exports=function(u,h){for(var m,_=u.length,b=h^_,T=0;_>=4;)m=1540483477*(65535&(m=255&u.charCodeAt(T)|(255&u.charCodeAt(++T))<<8|(255&u.charCodeAt(++T))<<16|(255&u.charCodeAt(++T))<<24))+((1540483477*(m>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),_-=4,++T;switch(_){case 3:b^=(255&u.charCodeAt(T+2))<<16;case 2:b^=(255&u.charCodeAt(T+1))<<8;case 1:b=1540483477*(65535&(b^=255&u.charCodeAt(T)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}),qo.exports);return pl.exports=c,pl.exports.murmur3=c,pl.exports.murmur2=s,pl.exports}(),Os=f(dl);class ml{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,u,h,m){this.ids.push(Tn(s)),this.positions.push(u,h,m)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let u=Tn(s),h=0,m=this.ids.length-1;for(;h<m;){let b=h+m>>1;this.ids[b]>=u?m=b:h=b+1}let _=[];for(;this.ids[h]===u;)_.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return _}static serialize(s,u){let h=new Float64Array(s.ids),m=new Uint32Array(s.positions);return Sn(h,m,0,h.length-1),u&&u.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(s){let u=new ml;return u.ids=s.ids,u.positions=s.positions,u.indexed=!0,u}}function Tn(c){let s=+c;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:Os(String(c))}function Sn(c,s,u,h){for(;u<h;){let m=c[u+h>>1],_=u-1,b=h+1;for(;;){do _++;while(c[_]<m);do b--;while(c[b]>m);if(_>=b)break;Bi(c,_,b),Bi(s,3*_,3*b),Bi(s,3*_+1,3*b+1),Bi(s,3*_+2,3*b+2)}b-u<h-b?(Sn(c,s,u,b),u=b+1):(Sn(c,s,b+1,h),h=b)}}function Bi(c,s,u){let h=c[s];c[s]=c[u],c[u]=h}st("FeaturePositionMap",ml);class Lr{constructor(s,u){this.gl=s.gl,this.location=u}}class Vd extends Lr{constructor(s,u){super(s,u),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class Y1 extends Lr{constructor(s,u){super(s,u),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class X1 extends Lr{constructor(s,u){super(s,u),this.current=Kt.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}let gA=new Float32Array(16);function Ay(c){return[hl(255*c.r,255*c.g),hl(255*c.b,255*c.a)]}class Uf{constructor(s,u,h){this.value=s,this.uniformNames=u.map(m=>`u_${m}`),this.type=h}setUniform(s,u,h){s.set(h.constantOr(this.value))}getBinding(s,u,h){return this.type==="color"?new X1(s,u):new Vd(s,u)}}class Jo{constructor(s,u){this.uniformNames=u.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=s.tlbr}setUniform(s,u,h,m){let _=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&s.set(_)}getBinding(s,u,h){return h.substr(0,9)==="u_pattern"?new Y1(s,u):new Vd(s,u)}}class Xa{constructor(s,u,h,m){this.expression=s,this.type=h,this.maxValue=0,this.paintVertexAttributes=u.map(_=>({name:`a_${_}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(s,u,h,m,_){let b=this.paintVertexArray.length,T=this.expression.evaluate(new Or(0),u,{},m,[],_);this.paintVertexArray.resize(s),this._setPaintValue(b,s,T)}updatePaintArray(s,u,h,m){let _=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(s,u,_)}_setPaintValue(s,u,h){if(this.type==="color"){let m=Ay(h);for(let _=s;_<u;_++)this.paintVertexArray.emplace(_,m[0],m[1])}else{for(let m=s;m<u;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ea{constructor(s,u,h,m,_,b){this.expression=s,this.uniformNames=u.map(T=>`u_${T}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=u.map(T=>({name:`a_${T}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(s,u,h,m,_){let b=this.expression.evaluate(new Or(this.zoom),u,{},m,[],_),T=this.expression.evaluate(new Or(this.zoom+1),u,{},m,[],_),M=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(M,s,b,T)}updatePaintArray(s,u,h,m){let _=this.expression.evaluate({zoom:this.zoom},h,m),b=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(s,u,_,b)}_setPaintValue(s,u,h,m){if(this.type==="color"){let _=Ay(h),b=Ay(m);for(let T=s;T<u;T++)this.paintVertexArray.emplace(T,_[0],_[1],b[0],b[1])}else{for(let _=s;_<u;_++)this.paintVertexArray.emplace(_,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,u){let h=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,m=Br(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);s.set(m)}getBinding(s,u,h){return new Vd(s,u)}}class Ls{constructor(s,u,h,m,_,b){this.expression=s,this.type=u,this.useIntegerZoom=h,this.zoom=m,this.layerId=b,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(s,u,h){let m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(m,s,u.patterns&&u.patterns[this.layerId],h)}updatePaintArray(s,u,h,m,_){this._setPaintValues(s,u,h.patterns&&h.patterns[this.layerId],_)}_setPaintValues(s,u,h,m){if(!m||!h)return;let{min:_,mid:b,max:T}=h,M=m[_],R=m[b],L=m[T];if(M&&R&&L)for(let k=s;k<u;k++)this.zoomInPaintVertexArray.emplace(k,R.tl[0],R.tl[1],R.br[0],R.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],R.pixelRatio,M.pixelRatio),this.zoomOutPaintVertexArray.emplace(k,R.tl[0],R.tl[1],R.br[0],R.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],R.pixelRatio,L.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,Ya.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,Ya.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class $d{constructor(s,u,h){this.binders={},this._buffers=[];let m=[];for(let _ in s.paint._values){if(!h(_))continue;let b=s.paint.get(_);if(!(b instanceof ji&&Sc(b.property.specification)))continue;let T=qy(_,s.type),M=b.value,R=b.property.specification.type,L=b.property.useIntegerZoom,k=b.property.specification["property-type"],j=k==="cross-faded"||k==="cross-faded-data-driven";if(M.kind==="constant")this.binders[_]=j?new Jo(M.value,T):new Uf(M.value,T,R),m.push(`/u_${_}`);else if(M.kind==="source"||j){let U=H5(_,R,"source");this.binders[_]=j?new Ls(M,R,L,u,U,s.id):new Xa(M,T,R,U),m.push(`/a_${_}`)}else{let U=H5(_,R,"composite");this.binders[_]=new ea(M,T,R,L,u,U),m.push(`/z_${_}`)}}this.cacheKey=m.sort().join("")}getMaxValue(s){let u=this.binders[s];return u instanceof Xa||u instanceof ea?u.maxValue:0}populatePaintArrays(s,u,h,m,_){for(let b in this.binders){let T=this.binders[b];(T instanceof Xa||T instanceof ea||T instanceof Ls)&&T.populatePaintArray(s,u,h,m,_)}}setConstantPatternPositions(s,u){for(let h in this.binders){let m=this.binders[h];m instanceof Jo&&m.setConstantPatternPositions(s,u)}}updatePaintArrays(s,u,h,m,_){let b=!1;for(let T in s){let M=u.getPositions(T);for(let R of M){let L=h.feature(R.index);for(let k in this.binders){let j=this.binders[k];if((j instanceof Xa||j instanceof ea||j instanceof Ls)&&j.expression.isStateDependent===!0){let U=m.paint.get(k);j.expression=U.value,j.updatePaintArray(R.start,R.end,L,s[T],_),b=!0}}}}return b}defines(){let s=[];for(let u in this.binders){let h=this.binders[u];(h instanceof Uf||h instanceof Jo)&&s.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return s}getBinderAttributes(){let s=[];for(let u in this.binders){let h=this.binders[u];if(h instanceof Xa||h instanceof ea)for(let m=0;m<h.paintVertexAttributes.length;m++)s.push(h.paintVertexAttributes[m].name);else if(h instanceof Ls)for(let m=0;m<Ya.members.length;m++)s.push(Ya.members[m].name)}return s}getBinderUniforms(){let s=[];for(let u in this.binders){let h=this.binders[u];if(h instanceof Uf||h instanceof Jo||h instanceof ea)for(let m of h.uniformNames)s.push(m)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,u){let h=[];for(let m in this.binders){let _=this.binders[m];if(_ instanceof Uf||_ instanceof Jo||_ instanceof ea){for(let b of _.uniformNames)if(u[b]){let T=_.getBinding(s,u[b],b);h.push({name:b,property:m,binding:T})}}}return h}setUniforms(s,u,h,m){for(let{name:_,property:b,binding:T}of u)this.binders[b].setUniform(T,m,h.get(b),_)}updatePaintBuffers(s){this._buffers=[];for(let u in this.binders){let h=this.binders[u];if(s&&h instanceof Ls){let m=s.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof Xa||h instanceof ea)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(s){for(let u in this.binders){let h=this.binders[u];(h instanceof Xa||h instanceof ea||h instanceof Ls)&&h.upload(s)}this.updatePaintBuffers()}destroy(){for(let s in this.binders){let u=this.binders[s];(u instanceof Xa||u instanceof ea||u instanceof Ls)&&u.destroy()}}}class vl{constructor(s,u,h=()=>!0){this.programConfigurations={};for(let m of s)this.programConfigurations[m.id]=new $d(m,u,h);this.needsUpload=!1,this._featureMap=new ml,this._bufferOffset=0}populatePaintArrays(s,u,h,m,_,b){for(let T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(s,u,m,_,b);u.id!==void 0&&this._featureMap.add(u.id,h,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,u,h,m){for(let _ of h)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(s,this._featureMap,u,_,m)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(let u in this.programConfigurations)this.programConfigurations[u].upload(s);this.needsUpload=!1}}destroy(){for(let s in this.programConfigurations)this.programConfigurations[s].destroy()}}function qy(c,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}function H5(c,s,u){let h={color:{source:kc,composite:ae},number:{source:D,composite:kc}},m=function(_){return{"line-pattern":{source:Xt,composite:Xt},"fill-pattern":{source:Xt,composite:Xt},"fill-extrusion-pattern":{source:Xt,composite:Xt}}[_]}(c);return m&&m[u]||h[s][u]}st("ConstantBinder",Uf),st("CrossFadedConstantBinder",Jo),st("SourceExpressionBinder",Xa),st("CrossFadedCompositeBinder",Ls),st("CompositeExpressionBinder",ea),st("ProgramConfiguration",$d,{omit:["_buffers"]}),st("ProgramConfigurationSet",vl);let yA=Math.pow(2,14)-1,K5=-yA-1;function Vf(c){let s=xt/c.extent,u=c.loadGeometry();for(let h=0;h<u.length;h++){let m=u[h];for(let _=0;_<m.length;_++){let b=m[_],T=Math.round(b.x*s),M=Math.round(b.y*s);b.x=Br(T,K5,yA),b.y=Br(M,K5,yA),(T<b.x||T>b.x+1||M<b.y||M>b.y+1)&&Dn("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function $f(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?Vf(c):[]}}let Y5=-32768;function pAe(c,s,u,h,m){c.emplaceBack(Y5+8*s+h,Y5+8*u+m)}class _A{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Qe,this.indexArray=new ur,this.segments=new cr,this.programConfigurations=new vl(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,h){let m=this.layers[0],_=[],b=null,T=!1,M=m.type==="heatmap";if(m.type==="circle"){let L=m;b=L.layout.get("circle-sort-key"),T=!b.isConstant(),M=M||L.paint.get("circle-pitch-alignment")==="map"}let R=M?u.subdivisionGranularity.circle:1;for(let{feature:L,id:k,index:j,sourceLayerIndex:U}of s){let V=this.layers[0]._featureFilter.needGeometry,H=$f(L,V);if(!this.layers[0]._featureFilter.filter(new Or(this.zoom),H,h))continue;let te=T?b.evaluate(H,{},h):void 0,ue={id:k,properties:L.properties,type:L.type,sourceLayerIndex:U,index:j,geometry:V?H.geometry:Vf(L),patterns:{},sortKey:te};_.push(ue)}T&&_.sort((L,k)=>L.sortKey-k.sortKey);for(let L of _){let{geometry:k,index:j,sourceLayerIndex:U}=L,V=s[j].feature;this.addFeature(L,k,j,h,R),u.featureIndex.insert(V,k,j,U,this.index)}}update(s,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,ui),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,u,h,m,_=1){let b;switch(_){case 1:b=[0,7];break;case 3:b=[0,2,5,7];break;case 5:b=[0,1,3,4,6,7];break;case 7:b=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${_}; valid values are 1, 3, 5, 7.`)}let T=b.length;for(let M of u)for(let R of M){let L=R.x,k=R.y;if(L<0||L>=xt||k<0||k>=xt)continue;let j=this.segments.prepareSegment(T*T,this.layoutVertexArray,this.indexArray,s.sortKey),U=j.vertexLength;for(let V=0;V<T;V++)for(let H=0;H<T;H++)pAe(this.layoutVertexArray,L,k,b[H],b[V]);for(let V=0;V<T-1;V++)for(let H=0;H<T-1;H++){let te=U+V*T+H,ue=U+(V+1)*T+H;this.indexArray.emplaceBack(te,ue+1,te+1),this.indexArray.emplaceBack(te,ue,ue+1)}j.vertexLength+=T*T,j.primitiveLength+=(T-1)*(T-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,h,{},m)}}function X5(c,s){for(let u=0;u<c.length;u++)if(Gf(s,c[u]))return!0;for(let u=0;u<s.length;u++)if(Gf(c,s[u]))return!0;return!!xA(c,s)}function dAe(c,s,u){return!!Gf(c,s)||!!bA(s,c,u)}function Q5(c,s){if(c.length===1)return e6(s,c[0]);for(let u=0;u<s.length;u++){let h=s[u];for(let m=0;m<h.length;m++)if(Gf(c,h[m]))return!0}for(let u=0;u<c.length;u++)if(e6(s,c[u]))return!0;for(let u=0;u<s.length;u++)if(xA(c,s[u]))return!0;return!1}function mAe(c,s,u){if(c.length>1){if(xA(c,s))return!0;for(let h=0;h<s.length;h++)if(bA(s[h],c,u))return!0}for(let h=0;h<c.length;h++)if(bA(c[h],s,u))return!0;return!1}function xA(c,s){if(c.length===0||s.length===0)return!1;for(let u=0;u<c.length-1;u++){let h=c[u],m=c[u+1];for(let _=0;_<s.length-1;_++)if(vAe(h,m,s[_],s[_+1]))return!0}return!1}function vAe(c,s,u,h){return er(c,u,h)!==er(s,u,h)&&er(c,s,u)!==er(c,s,h)}function bA(c,s,u){let h=u*u;if(s.length===1)return c.distSqr(s[0])<h;for(let m=1;m<s.length;m++)if(J5(c,s[m-1],s[m])<h)return!0;return!1}function J5(c,s,u){let h=s.distSqr(u);if(h===0)return c.distSqr(s);let m=((c.x-s.x)*(u.x-s.x)+(c.y-s.y)*(u.y-s.y))/h;return c.distSqr(m<0?s:m>1?u:u.sub(s)._mult(m)._add(s))}function e6(c,s){for(let u=0;u<c.length;u++)if(Gf(c[u],s))return!0;return!1}function Gf(c,s){let u=!1;for(let h=0,m=c.length-1;h<c.length;m=h++){let _=c[h],b=c[m];_.y>s.y!=b.y>s.y&&s.x<(b.x-_.x)*(s.y-_.y)/(b.y-_.y)+_.x&&(u=!u)}return u}function gAe(c,s,u){let h=u[0],m=u[2];if(c.x<h.x&&s.x<h.x||c.x>m.x&&s.x>m.x||c.y<h.y&&s.y<h.y||c.y>m.y&&s.y>m.y)return!1;let _=er(c,s,u[0]);return _!==er(c,s,u[1])||_!==er(c,s,u[2])||_!==er(c,s,u[3])}function Ry(c,s,u){let h=s.paint.get(c).value;return h.kind==="constant"?h.value:u.programConfigurations.get(s.id).getMaxValue(c)}function Q1(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function J1(c,s,u,h,m){if(!s[0]&&!s[1])return c;let _=q.convert(s)._mult(m);u==="viewport"&&_._rotate(-h);let b=[];for(let T=0;T<c.length;T++)b.push(c[T].sub(_));return b}let t6,r6;st("CircleBucket",_A,{omit:["layers"]});var yAe={get paint(){return r6=r6||new En({"circle-radius":new _t(re.paint_circle["circle-radius"]),"circle-color":new _t(re.paint_circle["circle-color"]),"circle-blur":new _t(re.paint_circle["circle-blur"]),"circle-opacity":new _t(re.paint_circle["circle-opacity"]),"circle-translate":new ht(re.paint_circle["circle-translate"]),"circle-translate-anchor":new ht(re.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ht(re.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ht(re.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _t(re.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _t(re.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _t(re.paint_circle["circle-stroke-opacity"])})},get layout(){return t6=t6||new En({"circle-sort-key":new _t(re.layout_circle["circle-sort-key"])})}};class _Ae extends Qo{constructor(s){super(s,yAe)}createBucket(s){return new _A(s)}queryRadius(s){let u=s;return Ry("circle-radius",this,u)+Ry("circle-stroke-width",this,u)+Q1(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:s,feature:u,featureState:h,geometry:m,transform:_,pixelsToTileUnits:b,unwrappedTileID:T,getElevation:M}){let R=J1(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-_.bearingInRadians,b),L=this.paint.get("circle-radius").evaluate(u,h)+this.paint.get("circle-stroke-width").evaluate(u,h),k=this.paint.get("circle-pitch-alignment")==="map",j=k?R:function(V,H,te,ue){return V.map(_e=>n6(_e,H,te,ue))}(R,_,T,M),U=k?L*b:L;for(let V of m)for(let H of V){let te=k?H:n6(H,_,T,M),ue=U,_e=_.projectTileCoordinates(H.x,H.y,T,M).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ue*=_e/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ue*=_.cameraToCenterDistance/_e),dAe(j,te,ue))return!0}return!1}}function n6(c,s,u,h){let m=s.projectTileCoordinates(c.x,c.y,u,h).point;return new q((.5*m.x+.5)*s.width,(.5*-m.y+.5)*s.height)}class i6 extends _A{}let o6;st("HeatmapBucket",i6,{omit:["layers"]});var xAe={get paint(){return o6=o6||new En({"heatmap-radius":new _t(re.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _t(re.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ht(re.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Sy(re.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ht(re.paint_heatmap["heatmap-opacity"])})}};function wA(c,{width:s,height:u},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==s*u*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${s*u*h}`)}else m=new Uint8Array(s*u*h);return c.width=s,c.height=u,c.data=m,c}function a6(c,{width:s,height:u},h){if(s===c.width&&u===c.height)return;let m=wA({},{width:s,height:u},h);EA(c,m,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,s),height:Math.min(c.height,u)},h),c.width=s,c.height=u,c.data=m.data}function EA(c,s,u,h,m,_){if(m.width===0||m.height===0)return s;if(m.width>c.width||m.height>c.height||u.x>c.width-m.width||u.y>c.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>s.width||m.height>s.height||h.x>s.width-m.width||h.y>s.height-m.height)throw new RangeError("out of range destination coordinates for image copy");let b=c.data,T=s.data;if(b===T)throw new Error("srcData equals dstData, so image is already copied");for(let M=0;M<m.height;M++){let R=((u.y+M)*c.width+u.x)*_,L=((h.y+M)*s.width+h.x)*_;for(let k=0;k<m.width*_;k++)T[L+k]=b[R+k]}return s}class Oy{constructor(s,u){wA(this,s,1,u)}resize(s){a6(this,s,1)}clone(){return new Oy({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,h,m,_){EA(s,u,h,m,_,1)}}class Aa{constructor(s,u){wA(this,s,4,u)}resize(s){a6(this,s,4)}replace(s,u){u?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new Aa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,h,m,_){EA(s,u,h,m,_,4)}}function s6(c){let s={},u=c.resolution||256,h=c.clips?c.clips.length:1,m=c.image||new Aa({width:u,height:h});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);let _=(b,T,M)=>{s[c.evaluationKey]=M;let R=c.expression.evaluate(s);m.data[b+T+0]=Math.floor(255*R.r/R.a),m.data[b+T+1]=Math.floor(255*R.g/R.a),m.data[b+T+2]=Math.floor(255*R.b/R.a),m.data[b+T+3]=Math.floor(255*R.a)};if(c.clips)for(let b=0,T=0;b<h;++b,T+=4*u)for(let M=0,R=0;M<u;M++,R+=4){let L=M/(u-1),{start:k,end:j}=c.clips[b];_(T,R,k*(1-L)+j*L)}else for(let b=0,T=0;b<u;b++,T+=4)_(0,T,b/(u-1));return m}st("AlphaImage",Oy),st("RGBAImage",Aa);let TA="big-fb";class bAe extends Qo{createBucket(s){return new i6(s)}constructor(s){super(s,xAe),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=s6({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(TA)&&this.heatmapFbos.delete(TA)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let l6;var wAe={get paint(){return l6=l6||new En({"hillshade-illumination-direction":new ht(re.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new ht(re.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new ht(re.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ht(re.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ht(re.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ht(re.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ht(re.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new ht(re.paint_hillshade["hillshade-method"])})}};class EAe extends Qo{constructor(s){super(s,wAe),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let s=this.paint.get("hillshade-illumination-direction").values,u=this.paint.get("hillshade-illumination-altitude").values,h=this.paint.get("hillshade-highlight-color").values,m=this.paint.get("hillshade-shadow-color").values,_=Math.max(s.length,u.length,h.length,m.length);s=s.concat(Array(_-s.length).fill(s.at(-1))),u=u.concat(Array(_-u.length).fill(u.at(-1))),h=h.concat(Array(_-h.length).fill(h.at(-1))),m=m.concat(Array(_-m.length).fill(m.at(-1)));let b=u.map(Is);return{directionRadians:s.map(Is),altitudeRadians:b,shadowColor:m,highlightColor:h}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let TAe=Vr([{name:"a_pos",components:2,type:"Int16"}],4),{members:SAe}=TAe;function SA(c,s,u){let h=u.patternDependencies,m=!1;for(let _ of s){let b=_.paint.get(`${c}-pattern`);b.isConstant()||(m=!0);let T=b.constantOr(null);T&&(m=!0,h[T.to]=!0,h[T.from]=!0)}return m}function IA(c,s,u,h,m){let _=m.patternDependencies;for(let b of s){let T=b.paint.get(`${c}-pattern`).value;if(T.kind!=="constant"){let M=T.evaluate({zoom:h-1},u,{},m.availableImages),R=T.evaluate({zoom:h},u,{},m.availableImages),L=T.evaluate({zoom:h+1},u,{},m.availableImages);M=M&&M.name?M.name:M,R=R&&R.name?R.name:R,L=L&&L.name?L.name:L,_[M]=!0,_[R]=!0,_[L]=!0,u.patterns[b.id]={min:M,mid:R,max:L}}}return u}function u6(c,s,u,h,m){let _;if(m===function(b,T,M,R){let L=0;for(let k=T,j=M-R;k<M;k+=R)L+=(b[j]-b[k])*(b[k+1]+b[j+1]),j=k;return L}(c,s,u,h)>0)for(let b=s;b<u;b+=h)_=p6(b/h|0,c[b],c[b+1],_);else for(let b=u-h;b>=s;b-=h)_=p6(b/h|0,c[b],c[b+1],_);return _&&Gd(_,_.next)&&(Ny(_),_=_.next),_}function Zf(c,s){if(!c)return c;s||(s=c);let u,h=c;do if(u=!1,h.steiner||!Gd(h,h.next)&&_n(h.prev,h,h.next)!==0)h=h.next;else{if(Ny(h),h=s=h.prev,h===h.next)break;u=!0}while(u||h!==s);return s}function Ly(c,s,u,h,m,_,b){if(!c)return;!b&&_&&function(M,R,L,k){let j=M;do j.z===0&&(j.z=CA(j.x,j.y,R,L,k)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==M);j.prevZ.nextZ=null,j.prevZ=null,function(U){let V,H=1;do{let te,ue=U;U=null;let _e=null;for(V=0;ue;){V++;let fe=ue,B=0;for(let de=0;de<H&&(B++,fe=fe.nextZ,fe);de++);let ee=H;for(;B>0||ee>0&&fe;)B!==0&&(ee===0||!fe||ue.z<=fe.z)?(te=ue,ue=ue.nextZ,B--):(te=fe,fe=fe.nextZ,ee--),_e?_e.nextZ=te:U=te,te.prevZ=_e,_e=te;ue=fe}_e.nextZ=null,H*=2}while(V>1)}(j)}(c,h,m,_);let T=c;for(;c.prev!==c.next;){let M=c.prev,R=c.next;if(_?CAe(c,h,m,_):IAe(c))s.push(M.i,c.i,R.i),Ny(c),c=R.next,T=R.next;else if((c=R)===T){b?b===1?Ly(c=PAe(Zf(c),s),s,u,h,m,_,2):b===2&&MAe(c,s,u,h,m,_):Ly(Zf(c),s,u,h,m,_,1);break}}}function IAe(c){let s=c.prev,u=c,h=c.next;if(_n(s,u,h)>=0)return!1;let m=s.x,_=u.x,b=h.x,T=s.y,M=u.y,R=h.y,L=Math.min(m,_,b),k=Math.min(T,M,R),j=Math.max(m,_,b),U=Math.max(T,M,R),V=h.next;for(;V!==s;){if(V.x>=L&&V.x<=j&&V.y>=k&&V.y<=U&&Dy(m,T,_,M,b,R,V.x,V.y)&&_n(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function CAe(c,s,u,h){let m=c.prev,_=c,b=c.next;if(_n(m,_,b)>=0)return!1;let T=m.x,M=_.x,R=b.x,L=m.y,k=_.y,j=b.y,U=Math.min(T,M,R),V=Math.min(L,k,j),H=Math.max(T,M,R),te=Math.max(L,k,j),ue=CA(U,V,s,u,h),_e=CA(H,te,s,u,h),fe=c.prevZ,B=c.nextZ;for(;fe&&fe.z>=ue&&B&&B.z<=_e;){if(fe.x>=U&&fe.x<=H&&fe.y>=V&&fe.y<=te&&fe!==m&&fe!==b&&Dy(T,L,M,k,R,j,fe.x,fe.y)&&_n(fe.prev,fe,fe.next)>=0||(fe=fe.prevZ,B.x>=U&&B.x<=H&&B.y>=V&&B.y<=te&&B!==m&&B!==b&&Dy(T,L,M,k,R,j,B.x,B.y)&&_n(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;fe&&fe.z>=ue;){if(fe.x>=U&&fe.x<=H&&fe.y>=V&&fe.y<=te&&fe!==m&&fe!==b&&Dy(T,L,M,k,R,j,fe.x,fe.y)&&_n(fe.prev,fe,fe.next)>=0)return!1;fe=fe.prevZ}for(;B&&B.z<=_e;){if(B.x>=U&&B.x<=H&&B.y>=V&&B.y<=te&&B!==m&&B!==b&&Dy(T,L,M,k,R,j,B.x,B.y)&&_n(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function PAe(c,s){let u=c;do{let h=u.prev,m=u.next.next;!Gd(h,m)&&h6(h,u,u.next,m)&&ky(h,m)&&ky(m,h)&&(s.push(h.i,u.i,m.i),Ny(u),Ny(u.next),u=c=m),u=u.next}while(u!==c);return Zf(u)}function MAe(c,s,u,h,m,_){let b=c;do{let T=b.next.next;for(;T!==b.prev;){if(b.i!==T.i&&LAe(b,T)){let M=f6(b,T);return b=Zf(b,b.next),M=Zf(M,M.next),Ly(b,s,u,h,m,_,0),void Ly(M,s,u,h,m,_,0)}T=T.next}b=b.next}while(b!==c)}function AAe(c,s){let u=c.x-s.x;return u===0&&(u=c.y-s.y,u===0)&&(u=(c.next.y-c.y)/(c.next.x-c.x)-(s.next.y-s.y)/(s.next.x-s.x)),u}function qAe(c,s){let u=function(m,_){let b=_,T=m.x,M=m.y,R,L=-1/0;if(Gd(m,b))return b;do{if(Gd(m,b.next))return b.next;if(M<=b.y&&M>=b.next.y&&b.next.y!==b.y){let H=b.x+(M-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(H<=T&&H>L&&(L=H,R=b.x<b.next.x?b:b.next,H===T))return R}b=b.next}while(b!==_);if(!R)return null;let k=R,j=R.x,U=R.y,V=1/0;b=R;do{if(T>=b.x&&b.x>=j&&T!==b.x&&c6(M<U?T:L,M,j,U,M<U?L:T,M,b.x,b.y)){let H=Math.abs(M-b.y)/(T-b.x);ky(b,m)&&(H<V||H===V&&(b.x>R.x||b.x===R.x&&RAe(R,b)))&&(R=b,V=H)}b=b.next}while(b!==k);return R}(c,s);if(!u)return s;let h=f6(u,c);return Zf(h,h.next),Zf(u,u.next)}function RAe(c,s){return _n(c.prev,c,s.prev)<0&&_n(s.next,c,c.next)<0}function CA(c,s,u,h,m){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-u)*m|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-h)*m|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function OAe(c){let s=c,u=c;do(s.x<u.x||s.x===u.x&&s.y<u.y)&&(u=s),s=s.next;while(s!==c);return u}function c6(c,s,u,h,m,_,b,T){return(m-b)*(s-T)>=(c-b)*(_-T)&&(c-b)*(h-T)>=(u-b)*(s-T)&&(u-b)*(_-T)>=(m-b)*(h-T)}function Dy(c,s,u,h,m,_,b,T){return!(c===b&&s===T)&&c6(c,s,u,h,m,_,b,T)}function LAe(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!function(u,h){let m=u;do{if(m.i!==u.i&&m.next.i!==u.i&&m.i!==h.i&&m.next.i!==h.i&&h6(m,m.next,u,h))return!0;m=m.next}while(m!==u);return!1}(c,s)&&(ky(c,s)&&ky(s,c)&&function(u,h){let m=u,_=!1,b=(u.x+h.x)/2,T=(u.y+h.y)/2;do m.y>T!=m.next.y>T&&m.next.y!==m.y&&b<(m.next.x-m.x)*(T-m.y)/(m.next.y-m.y)+m.x&&(_=!_),m=m.next;while(m!==u);return _}(c,s)&&(_n(c.prev,c,s.prev)||_n(c,s.prev,s))||Gd(c,s)&&_n(c.prev,c,c.next)>0&&_n(s.prev,s,s.next)>0)}function _n(c,s,u){return(s.y-c.y)*(u.x-s.x)-(s.x-c.x)*(u.y-s.y)}function Gd(c,s){return c.x===s.x&&c.y===s.y}function h6(c,s,u,h){let m=tw(_n(c,s,u)),_=tw(_n(c,s,h)),b=tw(_n(u,h,c)),T=tw(_n(u,h,s));return m!==_&&b!==T||!(m!==0||!ew(c,u,s))||!(_!==0||!ew(c,h,s))||!(b!==0||!ew(u,c,h))||!(T!==0||!ew(u,s,h))}function ew(c,s,u){return s.x<=Math.max(c.x,u.x)&&s.x>=Math.min(c.x,u.x)&&s.y<=Math.max(c.y,u.y)&&s.y>=Math.min(c.y,u.y)}function tw(c){return c>0?1:c<0?-1:0}function ky(c,s){return _n(c.prev,c,c.next)<0?_n(c,s,c.next)>=0&&_n(c,c.prev,s)>=0:_n(c,s,c.prev)<0||_n(c,c.next,s)<0}function f6(c,s){let u=PA(c.i,c.x,c.y),h=PA(s.i,s.x,s.y),m=c.next,_=s.prev;return c.next=s,s.prev=c,u.next=m,m.prev=u,h.next=u,u.prev=h,_.next=h,h.prev=_,h}function p6(c,s,u,h){let m=PA(c,s,u);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function Ny(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function PA(c,s,u){return{i:c,x:s,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Zd{constructor(s,u){if(u>s)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=s,this._minGranularity=u}getGranularityForZoomLevel(s){return Math.max(Math.floor(this._baseZoomGranularity/(1<<s)),this._minGranularity,1)}}class rw{constructor(s){this.fill=s.fill,this.line=s.line,this.tile=s.tile,this.stencil=s.stencil,this.circle=s.circle}}rw.noSubdivision=new rw({fill:new Zd(0,0),line:new Zd(0,0),tile:new Zd(0,0),stencil:new Zd(0,0),circle:1}),st("SubdivisionGranularityExpression",Zd),st("SubdivisionGranularitySetting",rw);let Wd=-32768,Fy=32767;class DAe{constructor(s,u){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=s,this._granularityCellSize=xt/s,this._canonical=u}_getKey(s,u){return(s+=32768)<<16|(u+=32768)<<0}_vertexToIndex(s,u){if(s<-32768||u<-32768||s>32767||u>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let h=0|Math.round(s),m=0|Math.round(u),_=this._getKey(h,m);if(this._vertexDictionary.has(_))return this._vertexDictionary.get(_);let b=this._vertexBuffer.length/2;return this._vertexDictionary.set(_,b),this._vertexBuffer.push(h,m),b}_subdivideTrianglesScanline(s){if(this._granularity<2)return function(m,_){let b=[];for(let T=0;T<_.length;T+=3){let M=_[T],R=_[T+1],L=_[T+2],k=m[2*M],j=m[2*M+1];(m[2*R]-k)*(m[2*L+1]-j)-(m[2*R+1]-j)*(m[2*L]-k)>0?(b.push(M),b.push(L),b.push(R)):(b.push(M),b.push(R),b.push(L))}return b}(this._vertexBuffer,s);let u=[],h=s.length;for(let m=0;m<h;m+=3){let _=[s[m+0],s[m+1],s[m+2]],b=[this._vertexBuffer[2*s[m+0]+0],this._vertexBuffer[2*s[m+0]+1],this._vertexBuffer[2*s[m+1]+0],this._vertexBuffer[2*s[m+1]+1],this._vertexBuffer[2*s[m+2]+0],this._vertexBuffer[2*s[m+2]+1]],T=1/0,M=1/0,R=-1/0,L=-1/0;for(let H=0;H<3;H++){let te=b[2*H],ue=b[2*H+1];T=Math.min(T,te),R=Math.max(R,te),M=Math.min(M,ue),L=Math.max(L,ue)}if(T===R||M===L)continue;let k=Math.floor(T/this._granularityCellSize),j=Math.ceil(R/this._granularityCellSize),U=Math.floor(M/this._granularityCellSize),V=Math.ceil(L/this._granularityCellSize);if(k!==j||U!==V)for(let H=U;H<V;H++){let te=this._scanlineGenerateVertexRingForCellRow(H,b,_);kAe(this._vertexBuffer,te,u)}else u.push(..._)}return u}_scanlineGenerateVertexRingForCellRow(s,u,h){let m=s*this._granularityCellSize,_=m+this._granularityCellSize,b=[];for(let T=0;T<3;T++){let M=u[2*T],R=u[2*T+1],L=u[2*(T+1)%6],k=u[(2*(T+1)+1)%6],j=u[2*(T+2)%6],U=u[(2*(T+2)+1)%6],V=L-M,H=k-R,te=V===0,ue=H===0,_e=(m-R)/H,fe=(_-R)/H,B=Math.min(_e,fe),ee=Math.max(_e,fe);if(!ue&&(B>=1||ee<=0)||ue&&(R<m||R>_)){k>=m&&k<=_&&b.push(h[(T+1)%3]);continue}!ue&&B>0&&b.push(this._vertexToIndex(M+V*B,R+H*B));let de=M+V*Math.max(B,0),Ce=M+V*Math.min(ee,1);te||this._generateIntraEdgeVertices(b,M,R,L,k,de,Ce),!ue&&ee<1&&b.push(this._vertexToIndex(M+V*ee,R+H*ee)),(ue||k>=m&&k<=_)&&b.push(h[(T+1)%3]),!ue&&(k<=m||k>=_)&&this._generateInterEdgeVertices(b,M,R,L,k,j,U,Ce,m,_)}return b}_generateIntraEdgeVertices(s,u,h,m,_,b,T){let M=m-u,R=_-h,L=R===0,k=L?Math.min(u,m):Math.min(b,T),j=L?Math.max(u,m):Math.max(b,T),U=Math.floor(k/this._granularityCellSize)+1,V=Math.ceil(j/this._granularityCellSize)-1;if(L?u<m:b<T)for(let H=U;H<=V;H++){let te=H*this._granularityCellSize;s.push(this._vertexToIndex(te,h+R*(te-u)/M))}else for(let H=V;H>=U;H--){let te=H*this._granularityCellSize;s.push(this._vertexToIndex(te,h+R*(te-u)/M))}}_generateInterEdgeVertices(s,u,h,m,_,b,T,M,R,L){let k=_-h,j=b-m,U=T-_,V=(R-_)/U,H=(L-_)/U,te=Math.min(V,H),ue=Math.max(V,H),_e=m+j*te,fe=Math.floor(Math.min(_e,M)/this._granularityCellSize)+1,B=Math.ceil(Math.max(_e,M)/this._granularityCellSize)-1,ee=M<_e,de=U===0;if(de&&(T===R||T===L))return;if(de||te>=1||ue<=0){let Ve=h-T,Ae=b+(u-b)*Math.min((R-T)/Ve,(L-T)/Ve);fe=Math.floor(Math.min(Ae,M)/this._granularityCellSize)+1,B=Math.ceil(Math.max(Ae,M)/this._granularityCellSize)-1,ee=M<Ae}let Ce=k>0?L:R;if(ee)for(let Ve=fe;Ve<=B;Ve++)s.push(this._vertexToIndex(Ve*this._granularityCellSize,Ce));else for(let Ve=B;Ve>=fe;Ve--)s.push(this._vertexToIndex(Ve*this._granularityCellSize,Ce))}_generateOutline(s){let u=[];for(let h of s){let m=Wf(h,this._granularity,!0),_=this._pointArrayToIndices(m),b=[];for(let T=1;T<_.length;T++)b.push(_[T-1]),b.push(_[T]);u.push(b)}return u}_handlePoles(s){let u=!1,h=!1;this._canonical&&(this._canonical.y===0&&(u=!0),this._canonical.y===(1<<this._canonical.z)-1&&(h=!0)),(u||h)&&this._fillPoles(s,u,h)}_ensureNoPoleVertices(){let s=this._vertexBuffer;for(let u=0;u<s.length;u+=2){let h=s[u+1];h===Wd&&(s[u+1]=-32767),h===Fy&&(s[u+1]=32766)}}_generatePoleQuad(s,u,h,m,_,b){m>_!=(b===Wd)?(s.push(u),s.push(h),s.push(this._vertexToIndex(m,b)),s.push(h),s.push(this._vertexToIndex(_,b)),s.push(this._vertexToIndex(m,b))):(s.push(h),s.push(u),s.push(this._vertexToIndex(m,b)),s.push(this._vertexToIndex(_,b)),s.push(h),s.push(this._vertexToIndex(m,b)))}_fillPoles(s,u,h){let m=this._vertexBuffer,_=xt,b=s.length;for(let T=2;T<b;T+=3){let M=s[T-2],R=s[T-1],L=s[T],k=m[2*M],j=m[2*M+1],U=m[2*R],V=m[2*R+1],H=m[2*L],te=m[2*L+1];u&&(j===0&&V===0&&this._generatePoleQuad(s,M,R,k,U,Wd),V===0&&te===0&&this._generatePoleQuad(s,R,L,U,H,Wd),te===0&&j===0&&this._generatePoleQuad(s,L,M,H,k,Wd)),h&&(j===_&&V===_&&this._generatePoleQuad(s,M,R,k,U,Fy),V===_&&te===_&&this._generatePoleQuad(s,R,L,U,H,Fy),te===_&&j===_&&this._generatePoleQuad(s,L,M,H,k,Fy))}}_initializeVertices(s){for(let u=0;u<s.length;u+=2)this._vertexToIndex(s[u],s[u+1])}subdividePolygonInternal(s,u){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:h,holeIndices:m}=function(T){let M=[],R=[];for(let L of T)if(L.length!==0){L!==T[0]&&M.push(R.length/2);for(let k=0;k<L.length;k++)R.push(L[k].x),R.push(L[k].y)}return{flattened:R,holeIndices:M}}(s),_;this._initializeVertices(h);try{let T=function(R,L,k=2){let j=L&&L.length,U=j?L[0]*k:R.length,V=u6(R,0,U,k,!0),H=[];if(!V||V.next===V.prev)return H;let te,ue,_e;if(j&&(V=function(fe,B,ee,de){let Ce=[];for(let Ve=0,Ae=B.length;Ve<Ae;Ve++){let ke=u6(fe,B[Ve]*de,Ve<Ae-1?B[Ve+1]*de:fe.length,de,!1);ke===ke.next&&(ke.steiner=!0),Ce.push(OAe(ke))}Ce.sort(AAe);for(let Ve=0;Ve<Ce.length;Ve++)ee=qAe(Ce[Ve],ee);return ee}(R,L,V,k)),R.length>80*k){te=1/0,ue=1/0;let fe=-1/0,B=-1/0;for(let ee=k;ee<U;ee+=k){let de=R[ee],Ce=R[ee+1];de<te&&(te=de),Ce<ue&&(ue=Ce),de>fe&&(fe=de),Ce>B&&(B=Ce)}_e=Math.max(fe-te,B-ue),_e=_e!==0?32767/_e:0}return Ly(V,H,k,te,ue,_e,0),H}(h,m),M=this._convertIndices(h,T);_=this._subdivideTrianglesScanline(M)}catch(T){console.error(T)}let b=[];return u&&(b=this._generateOutline(s)),this._ensureNoPoleVertices(),this._handlePoles(_),{verticesFlattened:this._vertexBuffer,indicesTriangles:_,indicesLineList:b}}_convertIndices(s,u){let h=[];for(let m=0;m<u.length;m++)h.push(this._vertexToIndex(s[2*u[m]],s[2*u[m]+1]));return h}_pointArrayToIndices(s){let u=[];for(let h=0;h<s.length;h++){let m=s[h];u.push(this._vertexToIndex(m.x,m.y))}return u}}function d6(c,s,u,h=!0){return new DAe(u,s).subdividePolygonInternal(c,h)}function Wf(c,s,u=!1){if(!c||c.length<1)return[];if(c.length<2)return[];let h=c[0],m=c[c.length-1],_=u&&(h.x!==m.x||h.y!==m.y);if(s<2)return _?[...c,c[0]]:[...c];let b=Math.floor(xt/s),T=[];T.push(new q(c[0].x,c[0].y));let M=c.length,R=_?M:M-1;for(let L=0;L<R;L++){let k=c[L],j=L<M-1?c[L+1]:c[0],U=k.x,V=k.y,H=j.x,te=j.y,ue=U!==H,_e=V!==te;if(!ue&&!_e)continue;let fe=H-U,B=te-V,ee=Math.abs(fe),de=Math.abs(B),Ce=U,Ve=V;for(;;){let ke=fe>0?(Math.floor(Ce/b)+1)*b:(Math.ceil(Ce/b)-1)*b,We=B>0?(Math.floor(Ve/b)+1)*b:(Math.ceil(Ve/b)-1)*b,$e=Math.abs(Ce-ke),Ke=Math.abs(Ve-We),Fe=Math.abs(Ce-H),lt=Math.abs(Ve-te),mt=ue?$e/ee:Number.POSITIVE_INFINITY,pt=_e?Ke/de:Number.POSITIVE_INFINITY;if((Fe<=$e||!ue)&&(lt<=Ke||!_e))break;if(mt<pt&&ue||!_e){Ce=ke,Ve+=B*mt;let ct=new q(Ce,Math.round(Ve));T[T.length-1].x===ct.x&&T[T.length-1].y===ct.y||T.push(ct)}else{Ce+=fe*pt,Ve=We;let ct=new q(Math.round(Ce),Ve);T[T.length-1].x===ct.x&&T[T.length-1].y===ct.y||T.push(ct)}}let Ae=new q(H,te);T[T.length-1].x===Ae.x&&T[T.length-1].y===Ae.y||T.push(Ae)}return T}function kAe(c,s,u){if(s.length===0)throw new Error("Subdivision vertex ring is empty.");let h=0,m=c[2*s[0]];for(let M=1;M<s.length;M++){let R=c[2*s[M]];R<m&&(m=R,h=M)}let _=s.length,b=h,T=(b+1)%_;for(;;){let M=b-1>=0?b-1:_-1,R=(T+1)%_,L=c[2*s[M]],k=c[2*s[R]],j=c[2*s[b]],U=c[2*s[b]+1],V=c[2*s[T]+1],H=!1;if(L<k)H=!0;else if(L>k)H=!1;else{let te=V-U,ue=-(c[2*s[T]]-j),_e=U<V?1:-1;((L-j)*te+(c[2*s[M]+1]-U)*ue)*_e>((k-j)*te+(c[2*s[R]+1]-U)*ue)*_e&&(H=!0)}if(H){let te=s[M],ue=s[b],_e=s[T];te!==ue&&te!==_e&&ue!==_e&&u.push(_e,ue,te),b--,b<0&&(b=_-1)}else{let te=s[R],ue=s[b],_e=s[T];te!==ue&&te!==_e&&ue!==_e&&u.push(_e,ue,te),T++,T>=_&&(T=0)}if(M===R)break}}function m6(c,s,u,h,m,_,b,T,M){let R=m.length/2,L=b&&T&&M;if(R<cr.MAX_VERTEX_ARRAY_LENGTH){let k=s.prepareSegment(R,u,h),j=k.vertexLength;for(let H=0;H<_.length;H+=3)h.emplaceBack(j+_[H],j+_[H+1],j+_[H+2]);let U,V;k.vertexLength+=R,k.primitiveLength+=_.length/3,L&&(V=b.prepareSegment(R,u,T),U=V.vertexLength,V.vertexLength+=R);for(let H=0;H<m.length;H+=2)c(m[H],m[H+1]);if(L)for(let H=0;H<M.length;H++){let te=M[H];for(let ue=1;ue<te.length;ue+=2)T.emplaceBack(U+te[ue-1],U+te[ue]);V.primitiveLength+=te.length/2}}else(function(k,j,U,V,H,te){let ue=[];for(let de=0;de<V.length/2;de++)ue.push(-1);let _e={count:0},fe=0,B=k.getOrCreateLatestSegment(j,U),ee=B.vertexLength;for(let de=2;de<H.length;de+=3){let Ce=H[de-2],Ve=H[de-1],Ae=H[de],ke=ue[Ce]<fe,We=ue[Ve]<fe,$e=ue[Ae]<fe;B.vertexLength+((ke?1:0)+(We?1:0)+($e?1:0))>cr.MAX_VERTEX_ARRAY_LENGTH&&(B=k.createNewSegment(j,U),fe=_e.count,ke=!0,We=!0,$e=!0,ee=0);let Ke=zy(ue,V,te,_e,Ce,ke,B),Fe=zy(ue,V,te,_e,Ve,We,B),lt=zy(ue,V,te,_e,Ae,$e,B);U.emplaceBack(ee+Ke-fe,ee+Fe-fe,ee+lt-fe),B.primitiveLength++}})(s,u,h,m,_,c),L&&function(k,j,U,V,H,te){let ue=[];for(let de=0;de<V.length/2;de++)ue.push(-1);let _e={count:0},fe=0,B=k.getOrCreateLatestSegment(j,U),ee=B.vertexLength;for(let de=0;de<H.length;de++){let Ce=H[de];for(let Ve=1;Ve<H[de].length;Ve+=2){let Ae=Ce[Ve-1],ke=Ce[Ve],We=ue[Ae]<fe,$e=ue[ke]<fe;B.vertexLength+((We?1:0)+($e?1:0))>cr.MAX_VERTEX_ARRAY_LENGTH&&(B=k.createNewSegment(j,U),fe=_e.count,We=!0,$e=!0,ee=0);let Ke=zy(ue,V,te,_e,Ae,We,B),Fe=zy(ue,V,te,_e,ke,$e,B);U.emplaceBack(ee+Ke-fe,ee+Fe-fe),B.primitiveLength++}}}(b,u,T,m,M,c),s.forceNewSegmentOnNextPrepare(),b==null||b.forceNewSegmentOnNextPrepare()}function zy(c,s,u,h,m,_,b){if(_){let T=h.count;return u(s[2*m],s[2*m+1]),c[m]=h.count,h.count++,b.vertexLength++,T}return c[m]}class MA{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Xe,this.indexArray=new ur,this.indexArray2=new Nn,this.programConfigurations=new vl(s.layers,s.zoom),this.segments=new cr,this.segments2=new cr,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,h){this.hasPattern=SA("fill",this.layers,u);let m=this.layers[0].layout.get("fill-sort-key"),_=!m.isConstant(),b=[];for(let{feature:T,id:M,index:R,sourceLayerIndex:L}of s){let k=this.layers[0]._featureFilter.needGeometry,j=$f(T,k);if(!this.layers[0]._featureFilter.filter(new Or(this.zoom),j,h))continue;let U=_?m.evaluate(j,{},h,u.availableImages):void 0,V={id:M,properties:T.properties,type:T.type,sourceLayerIndex:L,index:R,geometry:k?j.geometry:Vf(T),patterns:{},sortKey:U};b.push(V)}_&&b.sort((T,M)=>T.sortKey-M.sortKey);for(let T of b){let{geometry:M,index:R,sourceLayerIndex:L}=T;if(this.hasPattern){let k=IA("fill",this.layers,T,this.zoom,u);this.patternFeatures.push(k)}else this.addFeature(T,M,R,h,{},u.subdivisionGranularity);u.featureIndex.insert(s[R].feature,M,R,L,this.index)}}update(s,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,h)}addFeatures(s,u,h){for(let m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,u,h,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,SAe),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,u,h,m,_,b){for(let T of md(u,500)){let M=d6(T,m,b.fill.getGranularityForZoomLevel(m.z)),R=this.layoutVertexArray;m6((L,k)=>{R.emplaceBack(L,k)},this.segments,this.layoutVertexArray,this.indexArray,M.verticesFlattened,M.indicesTriangles,this.segments2,this.indexArray2,M.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,h,_,m)}}let v6,g6;st("FillBucket",MA,{omit:["layers","patternFeatures"]});var NAe={get paint(){return g6=g6||new En({"fill-antialias":new ht(re.paint_fill["fill-antialias"]),"fill-opacity":new _t(re.paint_fill["fill-opacity"]),"fill-color":new _t(re.paint_fill["fill-color"]),"fill-outline-color":new _t(re.paint_fill["fill-outline-color"]),"fill-translate":new ht(re.paint_fill["fill-translate"]),"fill-translate-anchor":new ht(re.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ff(re.paint_fill["fill-pattern"])})},get layout(){return v6=v6||new En({"fill-sort-key":new _t(re.layout_fill["fill-sort-key"])})}};class FAe extends Qo{constructor(s){super(s,NAe)}recalculate(s,u){super.recalculate(s,u);let h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new MA(s)}queryRadius(){return Q1(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:s,geometry:u,transform:h,pixelsToTileUnits:m}){return Q5(J1(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-h.bearingInRadians,m),u)}isTileClipped(){return!0}}let zAe=Vr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),jAe=Vr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:BAe}=zAe;var AA,y6,qA,_6,RA,x6,b6,nw={};function w6(){if(y6)return AA;y6=1;var c=E();function s(m,_,b,T,M){this.properties={},this.extent=b,this.type=0,this._pbf=m,this._geometry=-1,this._keys=T,this._values=M,m.readFields(u,this,_)}function u(m,_,b){m==1?_.id=b.readVarint():m==2?function(T,M){for(var R=T.readVarint()+T.pos;T.pos<R;){var L=M._keys[T.readVarint()],k=M._values[T.readVarint()];M.properties[L]=k}}(b,_):m==3?_.type=b.readVarint():m==4&&(_._geometry=b.pos)}function h(m){for(var _,b,T=0,M=0,R=m.length,L=R-1;M<R;L=M++)T+=((b=m[L]).x-(_=m[M]).x)*(_.y+b.y);return T}return AA=s,s.types=["Unknown","Point","LineString","Polygon"],s.prototype.loadGeometry=function(){var m=this._pbf;m.pos=this._geometry;for(var _,b=m.readVarint()+m.pos,T=1,M=0,R=0,L=0,k=[];m.pos<b;){if(M<=0){var j=m.readVarint();T=7&j,M=j>>3}if(M--,T===1||T===2)R+=m.readSVarint(),L+=m.readSVarint(),T===1&&(_&&k.push(_),_=[]),_.push(new c(R,L));else{if(T!==7)throw new Error("unknown command "+T);_&&_.push(_[0].clone())}}return _&&k.push(_),k},s.prototype.bbox=function(){var m=this._pbf;m.pos=this._geometry;for(var _=m.readVarint()+m.pos,b=1,T=0,M=0,R=0,L=1/0,k=-1/0,j=1/0,U=-1/0;m.pos<_;){if(T<=0){var V=m.readVarint();b=7&V,T=V>>3}if(T--,b===1||b===2)(M+=m.readSVarint())<L&&(L=M),M>k&&(k=M),(R+=m.readSVarint())<j&&(j=R),R>U&&(U=R);else if(b!==7)throw new Error("unknown command "+b)}return[L,j,k,U]},s.prototype.toGeoJSON=function(m,_,b){var T,M,R=this.extent*Math.pow(2,b),L=this.extent*m,k=this.extent*_,j=this.loadGeometry(),U=s.types[this.type];function V(ue){for(var _e=0;_e<ue.length;_e++){var fe=ue[_e];ue[_e]=[360*(fe.x+L)/R-180,360/Math.PI*Math.atan(Math.exp((180-360*(fe.y+k)/R)*Math.PI/180))-90]}}switch(this.type){case 1:var H=[];for(T=0;T<j.length;T++)H[T]=j[T][0];V(j=H);break;case 2:for(T=0;T<j.length;T++)V(j[T]);break;case 3:for(j=function(ue){var _e=ue.length;if(_e<=1)return[ue];for(var fe,B,ee=[],de=0;de<_e;de++){var Ce=h(ue[de]);Ce!==0&&(B===void 0&&(B=Ce<0),B===Ce<0?(fe&&ee.push(fe),fe=[ue[de]]):fe.push(ue[de]))}return fe&&ee.push(fe),ee}(j),T=0;T<j.length;T++)for(M=0;M<j[T].length;M++)V(j[T][M])}j.length===1?j=j[0]:U="Multi"+U;var te={type:"Feature",geometry:{type:U,coordinates:j},properties:this.properties};return"id"in this&&(te.id=this.id),te},AA}function E6(){if(_6)return qA;_6=1;var c=w6();function s(h,m){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(u,this,m),this.length=this._features.length}function u(h,m,_){h===15?m.version=_.readVarint():h===1?m.name=_.readString():h===5?m.extent=_.readVarint():h===2?m._features.push(_.pos):h===3?m._keys.push(_.readString()):h===4&&m._values.push(function(b){for(var T=null,M=b.readVarint()+b.pos;b.pos<M;){var R=b.readVarint()>>3;T=R===1?b.readString():R===2?b.readFloat():R===3?b.readDouble():R===4?b.readVarint64():R===5?b.readVarint():R===6?b.readSVarint():R===7?b.readBoolean():null}return T}(_))}return qA=s,s.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var m=this._pbf.readVarint()+this._pbf.pos;return new c(this._pbf,m,this.extent,this._keys,this._values)},qA}function T6(){return b6||(b6=1,nw.VectorTile=function(){if(x6)return RA;x6=1;var c=E6();function s(u,h,m){if(u===3){var _=new c(m,m.readVarint()+m.pos);_.length&&(h[_.name]=_)}}return RA=function(u,h){this.layers=u.readFields(s,{},h)},RA}(),nw.VectorTileFeature=w6(),nw.VectorTileLayer=E6()),nw}var jy=f(T6());let UAe=jy.VectorTileFeature.types,OA=Math.pow(2,13);function By(c,s,u,h,m,_,b,T){c.emplaceBack(s,u,2*Math.floor(h*OA)+b,m*OA*2,_*OA*2,Math.round(T))}class LA{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Ge,this.centroidVertexArray=new Oe,this.indexArray=new ur,this.programConfigurations=new vl(s.layers,s.zoom),this.segments=new cr,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,h){this.features=[],this.hasPattern=SA("fill-extrusion",this.layers,u);for(let{feature:m,id:_,index:b,sourceLayerIndex:T}of s){let M=this.layers[0]._featureFilter.needGeometry,R=$f(m,M);if(!this.layers[0]._featureFilter.filter(new Or(this.zoom),R,h))continue;let L={id:_,sourceLayerIndex:T,index:b,geometry:M?R.geometry:Vf(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(IA("fill-extrusion",this.layers,L,this.zoom,u)):this.addFeature(L,L.geometry,b,h,{},u.subdivisionGranularity),u.featureIndex.insert(m,L.geometry,b,T,this.index,!0)}}addFeatures(s,u,h){for(let m of this.features){let{geometry:_}=m;this.addFeature(m,_,m.index,u,h,s.subdivisionGranularity)}}update(s,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,BAe),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,jAe.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,u,h,m,_,b){for(let T of md(u,500)){let M={x:0,y:0,sampleCount:0},R=this.layoutVertexArray.length;this.processPolygon(M,m,s,T,b);let L=this.layoutVertexArray.length-R,k=Math.floor(M.x/M.sampleCount),j=Math.floor(M.y/M.sampleCount);for(let U=0;U<L;U++)this.centroidVertexArray.emplaceBack(k,j)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,h,_,m)}processPolygon(s,u,h,m,_){if(m.length<1||S6(m[0]))return;for(let k of m)k.length!==0&&VAe(s,k);let b={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},T=_.fill.getGranularityForZoomLevel(u.z),M=UAe[h.type]==="Polygon";for(let k of m){if(k.length===0||S6(k))continue;let j=Wf(k,T,M);this._generateSideFaces(j,b)}if(!M)return;let R=d6(m,u,T,!1),L=this.layoutVertexArray;m6((k,j)=>{By(L,k,j,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,R.verticesFlattened,R.indicesTriangles)}_generateSideFaces(s,u){let h=0;for(let m=1;m<s.length;m++){let _=s[m],b=s[m-1];if($Ae(_,b))continue;u.segment.vertexLength+4>cr.MAX_VERTEX_ARRAY_LENGTH&&(u.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let T=_.sub(b)._perp()._unit(),M=b.dist(_);h+M>32768&&(h=0),By(this.layoutVertexArray,_.x,_.y,T.x,T.y,0,0,h),By(this.layoutVertexArray,_.x,_.y,T.x,T.y,0,1,h),h+=M,By(this.layoutVertexArray,b.x,b.y,T.x,T.y,0,0,h),By(this.layoutVertexArray,b.x,b.y,T.x,T.y,0,1,h);let R=u.segment.vertexLength;this.indexArray.emplaceBack(R,R+2,R+1),this.indexArray.emplaceBack(R+1,R+2,R+3),u.segment.vertexLength+=4,u.segment.primitiveLength+=2}}}function VAe(c,s){for(let u=0;u<s.length;u++){let h=s[u];u===s.length-1&&s[0].x===h.x&&s[0].y===h.y||(c.x+=h.x,c.y+=h.y,c.sampleCount++)}}function $Ae(c,s){return c.x===s.x&&(c.x<0||c.x>xt)||c.y===s.y&&(c.y<0||c.y>xt)}function S6(c){return c.every(s=>s.x<0)||c.every(s=>s.x>xt)||c.every(s=>s.y<0)||c.every(s=>s.y>xt)}let I6;st("FillExtrusionBucket",LA,{omit:["layers","features"]});var GAe={get paint(){return I6=I6||new En({"fill-extrusion-opacity":new ht(re["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _t(re["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ht(re["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ht(re["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ff(re["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _t(re["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _t(re["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ht(re["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class ZAe extends Qo{constructor(s){super(s,GAe)}createBucket(s){return new LA(s)}queryRadius(){return Q1(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:s,feature:u,featureState:h,geometry:m,transform:_,pixelsToTileUnits:b,pixelPosMatrix:T}){let M=J1(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-_.bearingInRadians,b),R=this.paint.get("fill-extrusion-height").evaluate(u,h),L=this.paint.get("fill-extrusion-base").evaluate(u,h),k=function(U,V,H){let te=[];for(let ue of U){let _e=[ue.x,ue.y,0,1];sr(_e,_e,V),te.push(new q(_e[0]/_e[3],_e[1]/_e[3]))}return te}(M,T),j=function(U,V,H,te){let ue=[],_e=[],fe=te[8]*V,B=te[9]*V,ee=te[10]*V,de=te[11]*V,Ce=te[8]*H,Ve=te[9]*H,Ae=te[10]*H,ke=te[11]*H;for(let We of U){let $e=[],Ke=[];for(let Fe of We){let lt=Fe.x,mt=Fe.y,pt=te[0]*lt+te[4]*mt+te[12],ct=te[1]*lt+te[5]*mt+te[13],Zt=te[2]*lt+te[6]*mt+te[14],on=te[3]*lt+te[7]*mt+te[15],zn=Zt+ee,Si=on+de,Ra=pt+Ce,Oo=ct+Ve,ci=Zt+Ae,Wr=on+ke,Hn=new q((pt+fe)/Si,(ct+B)/Si);Hn.z=zn/Si,$e.push(Hn);let hi=new q(Ra/Wr,Oo/Wr);hi.z=ci/Wr,Ke.push(hi)}ue.push($e),_e.push(Ke)}return[ue,_e]}(m,L,R,T);return function(U,V,H){let te=1/0;Q5(H,V)&&(te=C6(H,V[0]));for(let ue=0;ue<V.length;ue++){let _e=V[ue],fe=U[ue];for(let B=0;B<_e.length-1;B++){let ee=_e[B],de=[ee,_e[B+1],fe[B+1],fe[B],ee];X5(H,de)&&(te=Math.min(te,C6(H,de)))}}return te!==1/0&&te}(j[0],j[1],k)}}function Uy(c,s){return c.x*s.x+c.y*s.y}function C6(c,s){if(c.length===1){let u=0,h=s[u++],m;for(;!m||h.equals(m);)if(m=s[u++],!m)return 1/0;for(;u<s.length;u++){let _=s[u],b=c[0],T=m.sub(h),M=_.sub(h),R=b.sub(h),L=Uy(T,T),k=Uy(T,M),j=Uy(M,M),U=Uy(R,T),V=Uy(R,M),H=L*j-k*k,te=(j*U-k*V)/H,ue=(L*V-k*U)/H,_e=h.z*(1-te-ue)+m.z*te+_.z*ue;if(isFinite(_e))return _e}return 1/0}{let u=1/0;for(let h of s)u=Math.min(u,h.z);return u}}let WAe=Vr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:HAe}=WAe,KAe=Vr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:YAe}=KAe,XAe=jy.VectorTileFeature.types,QAe=Math.cos(Math.PI/180*37.5),P6=Math.pow(2,14)/.5;class DA{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new ut,this.layoutVertexArray2=new kt,this.indexArray=new ur,this.programConfigurations=new vl(s.layers,s.zoom),this.segments=new cr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,h){this.hasPattern=SA("line",this.layers,u);let m=this.layers[0].layout.get("line-sort-key"),_=!m.isConstant(),b=[];for(let{feature:T,id:M,index:R,sourceLayerIndex:L}of s){let k=this.layers[0]._featureFilter.needGeometry,j=$f(T,k);if(!this.layers[0]._featureFilter.filter(new Or(this.zoom),j,h))continue;let U=_?m.evaluate(j,{},h):void 0,V={id:M,properties:T.properties,type:T.type,sourceLayerIndex:L,index:R,geometry:k?j.geometry:Vf(T),patterns:{},sortKey:U};b.push(V)}_&&b.sort((T,M)=>T.sortKey-M.sortKey);for(let T of b){let{geometry:M,index:R,sourceLayerIndex:L}=T;if(this.hasPattern){let k=IA("line",this.layers,T,this.zoom,u);this.patternFeatures.push(k)}else this.addFeature(T,M,R,h,{},u.subdivisionGranularity);u.featureIndex.insert(s[R].feature,M,R,L,this.index)}}update(s,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,h)}addFeatures(s,u,h){for(let m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,u,h,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,YAe)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,HAe),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,u,h,m,_,b){let T=this.layers[0].layout,M=T.get("line-join").evaluate(s,{}),R=T.get("line-cap"),L=T.get("line-miter-limit"),k=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(let j of u)this.addLine(j,s,M,R,L,k,m,b);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,h,_,m)}addLine(s,u,h,m,_,b,T,M){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,s=Wf(s,T?M.line.getGranularityForZoomLevel(T.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let fe=0;fe<s.length-1;fe++)this.totalDistance+=s[fe].dist(s[fe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let R=XAe[u.type]==="Polygon",L=s.length;for(;L>=2&&s[L-1].equals(s[L-2]);)L--;let k=0;for(;k<L-1&&s[k].equals(s[k+1]);)k++;if(L<(R?3:2))return;h==="bevel"&&(_=1.05);let j=this.overscaling<=16?15*xt/(512*this.overscaling):0,U=this.segments.prepareSegment(10*L,this.layoutVertexArray,this.indexArray),V,H,te,ue,_e;this.e1=this.e2=-1,R&&(V=s[L-2],_e=s[k].sub(V)._unit()._perp());for(let fe=k;fe<L;fe++){if(te=fe===L-1?R?s[k+1]:void 0:s[fe+1],te&&s[fe].equals(te))continue;_e&&(ue=_e),V&&(H=V),V=s[fe],_e=te?te.sub(V)._unit()._perp():ue,ue=ue||_e;let B=ue.add(_e);B.x===0&&B.y===0||B._unit();let ee=ue.x*_e.x+ue.y*_e.y,de=B.x*_e.x+B.y*_e.y,Ce=de!==0?1/de:1/0,Ve=2*Math.sqrt(2-2*de),Ae=de<QAe&&H&&te,ke=ue.x*_e.y-ue.y*_e.x>0;if(Ae&&fe>k){let Ke=V.dist(H);if(Ke>2*j){let Fe=V.sub(V.sub(H)._mult(j/Ke)._round());this.updateDistance(H,Fe),this.addCurrentVertex(Fe,ue,0,0,U),H=Fe}}let We=H&&te,$e=We?h:R?"butt":m;if(We&&$e==="round"&&(Ce<b?$e="miter":Ce<=2&&($e="fakeround")),$e==="miter"&&Ce>_&&($e="bevel"),$e==="bevel"&&(Ce>2&&($e="flipbevel"),Ce<_&&($e="miter")),H&&this.updateDistance(H,V),$e==="miter")B._mult(Ce),this.addCurrentVertex(V,B,0,0,U);else if($e==="flipbevel"){if(Ce>100)B=_e.mult(-1);else{let Ke=Ce*ue.add(_e).mag()/ue.sub(_e).mag();B._perp()._mult(Ke*(ke?-1:1))}this.addCurrentVertex(V,B,0,0,U),this.addCurrentVertex(V,B.mult(-1),0,0,U)}else if($e==="bevel"||$e==="fakeround"){let Ke=-Math.sqrt(Ce*Ce-1),Fe=ke?Ke:0,lt=ke?0:Ke;if(H&&this.addCurrentVertex(V,ue,Fe,lt,U),$e==="fakeround"){let mt=Math.round(180*Ve/Math.PI/20);for(let pt=1;pt<mt;pt++){let ct=pt/mt;if(ct!==.5){let on=ct-.5;ct+=ct*on*(ct-1)*((1.0904+ee*(ee*(3.55645-1.43519*ee)-3.2452))*on*on+(.848013+ee*(.215638*ee-1.06021)))}let Zt=_e.sub(ue)._mult(ct)._add(ue)._unit()._mult(ke?-1:1);this.addHalfVertex(V,Zt.x,Zt.y,!1,ke,0,U)}}te&&this.addCurrentVertex(V,_e,-Fe,-lt,U)}else if($e==="butt")this.addCurrentVertex(V,B,0,0,U);else if($e==="square"){let Ke=H?1:-1;this.addCurrentVertex(V,B,Ke,Ke,U)}else $e==="round"&&(H&&(this.addCurrentVertex(V,ue,0,0,U),this.addCurrentVertex(V,ue,1,1,U,!0)),te&&(this.addCurrentVertex(V,_e,-1,-1,U,!0),this.addCurrentVertex(V,_e,0,0,U)));if(Ae&&fe<L-1){let Ke=V.dist(te);if(Ke>2*j){let Fe=V.add(te.sub(V)._mult(j/Ke)._round());this.updateDistance(V,Fe),this.addCurrentVertex(Fe,_e,0,0,U),V=Fe}}}}addCurrentVertex(s,u,h,m,_,b=!1){let T=u.y*m-u.x,M=-u.y-u.x*m;this.addHalfVertex(s,u.x+u.y*h,u.y-u.x*h,b,!1,h,_),this.addHalfVertex(s,T,M,b,!0,-m,_),this.distance>P6/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,u,h,m,_,b))}addHalfVertex({x:s,y:u},h,m,_,b,T,M){let R=.5*(this.lineClips?this.scaledDistance*(P6-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(_?1:0),(u<<1)+(b?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(T===0?0:T<0?-1:1)|(63&R)<<2,R>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let L=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,L,this.e2),M.primitiveLength++),b?this.e2=L:this.e1=L}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,u){this.distance+=s.dist(u),this.updateScaledDistance()}}let M6,A6;st("LineBucket",DA,{omit:["layers","patternFeatures"]});var q6={get paint(){return A6=A6||new En({"line-opacity":new _t(re.paint_line["line-opacity"]),"line-color":new _t(re.paint_line["line-color"]),"line-translate":new ht(re.paint_line["line-translate"]),"line-translate-anchor":new ht(re.paint_line["line-translate-anchor"]),"line-width":new _t(re.paint_line["line-width"]),"line-gap-width":new _t(re.paint_line["line-gap-width"]),"line-offset":new _t(re.paint_line["line-offset"]),"line-blur":new _t(re.paint_line["line-blur"]),"line-dasharray":new Ty(re.paint_line["line-dasharray"]),"line-pattern":new Ff(re.paint_line["line-pattern"]),"line-gradient":new Sy(re.paint_line["line-gradient"])})},get layout(){return M6=M6||new En({"line-cap":new ht(re.layout_line["line-cap"]),"line-join":new _t(re.layout_line["line-join"]),"line-miter-limit":new ht(re.layout_line["line-miter-limit"]),"line-round-limit":new ht(re.layout_line["line-round-limit"]),"line-sort-key":new _t(re.layout_line["line-sort-key"])})}};class JAe extends _t{possiblyEvaluate(s,u){return u=new Or(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(s,u)}evaluate(s,u,h,m){return u=zt({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(s,u,h,m)}}let iw;class eqe extends Qo{constructor(s){super(s,q6),this.gradientVersion=0,iw||(iw=new JAe(q6.paint.properties["line-width"].specification),iw.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){let u=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof ll,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,u){super.recalculate(s,u),this.paint._values["line-floorwidth"]=iw.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new DA(s)}queryRadius(s){let u=s,h=R6(Ry("line-width",this,u),Ry("line-gap-width",this,u)),m=Ry("line-offset",this,u);return h/2+Math.abs(m)+Q1(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:s,feature:u,featureState:h,geometry:m,transform:_,pixelsToTileUnits:b}){let T=J1(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-_.bearingInRadians,b),M=b/2*R6(this.paint.get("line-width").evaluate(u,h),this.paint.get("line-gap-width").evaluate(u,h)),R=this.paint.get("line-offset").evaluate(u,h);return R&&(m=function(L,k){let j=[];for(let U=0;U<L.length;U++){let V=L[U],H=[];for(let te=0;te<V.length;te++){let ue=V[te-1],_e=V[te],fe=V[te+1],B=te===0?new q(0,0):_e.sub(ue)._unit()._perp(),ee=te===V.length-1?new q(0,0):fe.sub(_e)._unit()._perp(),de=B._add(ee)._unit(),Ce=de.x*ee.x+de.y*ee.y;Ce!==0&&de._mult(1/Ce),H.push(de._mult(k)._add(_e))}j.push(H)}return j}(m,R*b)),function(L,k,j){for(let U=0;U<k.length;U++){let V=k[U];if(L.length>=3){for(let H=0;H<V.length;H++)if(Gf(L,V[H]))return!0}if(mAe(L,V,j))return!0}return!1}(T,m,M)}isTileClipped(){return!0}}function R6(c,s){return s>0?s+2*c:c}let tqe=Vr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),rqe=Vr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Vr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let nqe=Vr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Vr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let O6=Vr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),iqe=Vr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function oqe(c,s,u){return c.sections.forEach(h=>{h.text=function(m,_,b){let T=_.layout.get("text-transform").evaluate(b,{});return T==="uppercase"?m=m.toLocaleUpperCase():T==="lowercase"&&(m=m.toLocaleLowerCase()),Rs.applyArabicShaping&&(m=Rs.applyArabicShaping(m)),m}(h.text,s,u)}),c}Vr([{name:"triangle",components:3,type:"Uint16"}]),Vr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Vr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Vr([{type:"Float32",name:"offsetX"}]),Vr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Vr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let Vy={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var L6,kA,D6,Fn=24,NA={};function aqe(){return L6||(L6=1,NA.read=function(c,s,u,h,m){var _,b,T=8*m-h-1,M=(1<<T)-1,R=M>>1,L=-7,k=u?m-1:0,j=u?-1:1,U=c[s+k];for(k+=j,_=U&(1<<-L)-1,U>>=-L,L+=T;L>0;_=256*_+c[s+k],k+=j,L-=8);for(b=_&(1<<-L)-1,_>>=-L,L+=h;L>0;b=256*b+c[s+k],k+=j,L-=8);if(_===0)_=1-R;else{if(_===M)return b?NaN:1/0*(U?-1:1);b+=Math.pow(2,h),_-=R}return(U?-1:1)*b*Math.pow(2,_-h)},NA.write=function(c,s,u,h,m,_){var b,T,M,R=8*_-m-1,L=(1<<R)-1,k=L>>1,j=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=h?0:_-1,V=h?1:-1,H=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(T=isNaN(s)?1:0,b=L):(b=Math.floor(Math.log(s)/Math.LN2),s*(M=Math.pow(2,-b))<1&&(b--,M*=2),(s+=b+k>=1?j/M:j*Math.pow(2,1-k))*M>=2&&(b++,M/=2),b+k>=L?(T=0,b=L):b+k>=1?(T=(s*M-1)*Math.pow(2,m),b+=k):(T=s*Math.pow(2,k-1)*Math.pow(2,m),b=0));m>=8;c[u+U]=255&T,U+=V,T/=256,m-=8);for(b=b<<m|T,R+=m;R>0;c[u+U]=255&b,U+=V,b/=256,R-=8);c[u+U-V]|=128*H}),NA}function k6(){if(D6)return kA;D6=1,kA=s;var c=aqe();function s(B){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(B)?B:new Uint8Array(B||0),this.pos=0,this.type=0,this.length=this.buf.length}s.Varint=0,s.Fixed64=1,s.Bytes=2,s.Fixed32=5;var u=4294967296,h=1/u,m=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");function _(B){return B.type===s.Bytes?B.readVarint()+B.pos:B.pos+1}function b(B,ee,de){return de?4294967296*ee+(B>>>0):4294967296*(ee>>>0)+(B>>>0)}function T(B,ee,de){var Ce=ee<=16383?1:ee<=2097151?2:ee<=268435455?3:Math.floor(Math.log(ee)/(7*Math.LN2));de.realloc(Ce);for(var Ve=de.pos-1;Ve>=B;Ve--)de.buf[Ve+Ce]=de.buf[Ve]}function M(B,ee){for(var de=0;de<B.length;de++)ee.writeVarint(B[de])}function R(B,ee){for(var de=0;de<B.length;de++)ee.writeSVarint(B[de])}function L(B,ee){for(var de=0;de<B.length;de++)ee.writeFloat(B[de])}function k(B,ee){for(var de=0;de<B.length;de++)ee.writeDouble(B[de])}function j(B,ee){for(var de=0;de<B.length;de++)ee.writeBoolean(B[de])}function U(B,ee){for(var de=0;de<B.length;de++)ee.writeFixed32(B[de])}function V(B,ee){for(var de=0;de<B.length;de++)ee.writeSFixed32(B[de])}function H(B,ee){for(var de=0;de<B.length;de++)ee.writeFixed64(B[de])}function te(B,ee){for(var de=0;de<B.length;de++)ee.writeSFixed64(B[de])}function ue(B,ee){return(B[ee]|B[ee+1]<<8|B[ee+2]<<16)+16777216*B[ee+3]}function _e(B,ee,de){B[de]=ee,B[de+1]=ee>>>8,B[de+2]=ee>>>16,B[de+3]=ee>>>24}function fe(B,ee){return(B[ee]|B[ee+1]<<8|B[ee+2]<<16)+(B[ee+3]<<24)}return s.prototype={destroy:function(){this.buf=null},readFields:function(B,ee,de){for(de=de||this.length;this.pos<de;){var Ce=this.readVarint(),Ve=Ce>>3,Ae=this.pos;this.type=7&Ce,B(Ve,ee,this),this.pos===Ae&&this.skip(Ce)}return ee},readMessage:function(B,ee){return this.readFields(B,ee,this.readVarint()+this.pos)},readFixed32:function(){var B=ue(this.buf,this.pos);return this.pos+=4,B},readSFixed32:function(){var B=fe(this.buf,this.pos);return this.pos+=4,B},readFixed64:function(){var B=ue(this.buf,this.pos)+ue(this.buf,this.pos+4)*u;return this.pos+=8,B},readSFixed64:function(){var B=ue(this.buf,this.pos)+fe(this.buf,this.pos+4)*u;return this.pos+=8,B},readFloat:function(){var B=c.read(this.buf,this.pos,!0,23,4);return this.pos+=4,B},readDouble:function(){var B=c.read(this.buf,this.pos,!0,52,8);return this.pos+=8,B},readVarint:function(B){var ee,de,Ce=this.buf;return ee=127&(de=Ce[this.pos++]),de<128?ee:(ee|=(127&(de=Ce[this.pos++]))<<7,de<128?ee:(ee|=(127&(de=Ce[this.pos++]))<<14,de<128?ee:(ee|=(127&(de=Ce[this.pos++]))<<21,de<128?ee:function(Ve,Ae,ke){var We,$e,Ke=ke.buf;if(We=(112&($e=Ke[ke.pos++]))>>4,$e<128||(We|=(127&($e=Ke[ke.pos++]))<<3,$e<128)||(We|=(127&($e=Ke[ke.pos++]))<<10,$e<128)||(We|=(127&($e=Ke[ke.pos++]))<<17,$e<128)||(We|=(127&($e=Ke[ke.pos++]))<<24,$e<128)||(We|=(1&($e=Ke[ke.pos++]))<<31,$e<128))return b(Ve,We,Ae);throw new Error("Expected varint not more than 10 bytes")}(ee|=(15&(de=Ce[this.pos]))<<28,B,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var B=this.readVarint();return B%2==1?(B+1)/-2:B/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var B=this.readVarint()+this.pos,ee=this.pos;return this.pos=B,B-ee>=12&&m?function(de,Ce,Ve){return m.decode(de.subarray(Ce,Ve))}(this.buf,ee,B):function(de,Ce,Ve){for(var Ae="",ke=Ce;ke<Ve;){var We,$e,Ke,Fe=de[ke],lt=null,mt=Fe>239?4:Fe>223?3:Fe>191?2:1;if(ke+mt>Ve)break;mt===1?Fe<128&&(lt=Fe):mt===2?(192&(We=de[ke+1]))==128&&(lt=(31&Fe)<<6|63&We)<=127&&(lt=null):mt===3?($e=de[ke+2],(192&(We=de[ke+1]))==128&&(192&$e)==128&&((lt=(15&Fe)<<12|(63&We)<<6|63&$e)<=2047||lt>=55296&&lt<=57343)&&(lt=null)):mt===4&&($e=de[ke+2],Ke=de[ke+3],(192&(We=de[ke+1]))==128&&(192&$e)==128&&(192&Ke)==128&&((lt=(15&Fe)<<18|(63&We)<<12|(63&$e)<<6|63&Ke)<=65535||lt>=1114112)&&(lt=null)),lt===null?(lt=65533,mt=1):lt>65535&&(lt-=65536,Ae+=String.fromCharCode(lt>>>10&1023|55296),lt=56320|1023&lt),Ae+=String.fromCharCode(lt),ke+=mt}return Ae}(this.buf,ee,B)},readBytes:function(){var B=this.readVarint()+this.pos,ee=this.buf.subarray(this.pos,B);return this.pos=B,ee},readPackedVarint:function(B,ee){if(this.type!==s.Bytes)return B.push(this.readVarint(ee));var de=_(this);for(B=B||[];this.pos<de;)B.push(this.readVarint(ee));return B},readPackedSVarint:function(B){if(this.type!==s.Bytes)return B.push(this.readSVarint());var ee=_(this);for(B=B||[];this.pos<ee;)B.push(this.readSVarint());return B},readPackedBoolean:function(B){if(this.type!==s.Bytes)return B.push(this.readBoolean());var ee=_(this);for(B=B||[];this.pos<ee;)B.push(this.readBoolean());return B},readPackedFloat:function(B){if(this.type!==s.Bytes)return B.push(this.readFloat());var ee=_(this);for(B=B||[];this.pos<ee;)B.push(this.readFloat());return B},readPackedDouble:function(B){if(this.type!==s.Bytes)return B.push(this.readDouble());var ee=_(this);for(B=B||[];this.pos<ee;)B.push(this.readDouble());return B},readPackedFixed32:function(B){if(this.type!==s.Bytes)return B.push(this.readFixed32());var ee=_(this);for(B=B||[];this.pos<ee;)B.push(this.readFixed32());return B},readPackedSFixed32:function(B){if(this.type!==s.Bytes)return B.push(this.readSFixed32());var ee=_(this);for(B=B||[];this.pos<ee;)B.push(this.readSFixed32());return B},readPackedFixed64:function(B){if(this.type!==s.Bytes)return B.push(this.readFixed64());var ee=_(this);for(B=B||[];this.pos<ee;)B.push(this.readFixed64());return B},readPackedSFixed64:function(B){if(this.type!==s.Bytes)return B.push(this.readSFixed64());var ee=_(this);for(B=B||[];this.pos<ee;)B.push(this.readSFixed64());return B},skip:function(B){var ee=7&B;if(ee===s.Varint)for(;this.buf[this.pos++]>127;);else if(ee===s.Bytes)this.pos=this.readVarint()+this.pos;else if(ee===s.Fixed32)this.pos+=4;else{if(ee!==s.Fixed64)throw new Error("Unimplemented type: "+ee);this.pos+=8}},writeTag:function(B,ee){this.writeVarint(B<<3|ee)},realloc:function(B){for(var ee=this.length||16;ee<this.pos+B;)ee*=2;if(ee!==this.length){var de=new Uint8Array(ee);de.set(this.buf),this.buf=de,this.length=ee}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(B){this.realloc(4),_e(this.buf,B,this.pos),this.pos+=4},writeSFixed32:function(B){this.realloc(4),_e(this.buf,B,this.pos),this.pos+=4},writeFixed64:function(B){this.realloc(8),_e(this.buf,-1&B,this.pos),_e(this.buf,Math.floor(B*h),this.pos+4),this.pos+=8},writeSFixed64:function(B){this.realloc(8),_e(this.buf,-1&B,this.pos),_e(this.buf,Math.floor(B*h),this.pos+4),this.pos+=8},writeVarint:function(B){(B=+B||0)>268435455||B<0?function(ee,de){var Ce,Ve;if(ee>=0?(Ce=ee%4294967296|0,Ve=ee/4294967296|0):(Ve=~(-ee/4294967296),4294967295^(Ce=~(-ee%4294967296))?Ce=Ce+1|0:(Ce=0,Ve=Ve+1|0)),ee>=18446744073709552e3||ee<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");de.realloc(10),function(Ae,ke,We){We.buf[We.pos++]=127&Ae|128,Ae>>>=7,We.buf[We.pos++]=127&Ae|128,Ae>>>=7,We.buf[We.pos++]=127&Ae|128,Ae>>>=7,We.buf[We.pos++]=127&Ae|128,We.buf[We.pos]=127&(Ae>>>=7)}(Ce,0,de),function(Ae,ke){var We=(7&Ae)<<4;ke.buf[ke.pos++]|=We|((Ae>>>=3)?128:0),Ae&&(ke.buf[ke.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(ke.buf[ke.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(ke.buf[ke.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(ke.buf[ke.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(ke.buf[ke.pos++]=127&Ae)))))}(Ve,de)}(B,this):(this.realloc(4),this.buf[this.pos++]=127&B|(B>127?128:0),B<=127||(this.buf[this.pos++]=127&(B>>>=7)|(B>127?128:0),B<=127||(this.buf[this.pos++]=127&(B>>>=7)|(B>127?128:0),B<=127||(this.buf[this.pos++]=B>>>7&127))))},writeSVarint:function(B){this.writeVarint(B<0?2*-B-1:2*B)},writeBoolean:function(B){this.writeVarint(!!B)},writeString:function(B){B=String(B),this.realloc(4*B.length),this.pos++;var ee=this.pos;this.pos=function(Ce,Ve,Ae){for(var ke,We,$e=0;$e<Ve.length;$e++){if((ke=Ve.charCodeAt($e))>55295&&ke<57344){if(!We){ke>56319||$e+1===Ve.length?(Ce[Ae++]=239,Ce[Ae++]=191,Ce[Ae++]=189):We=ke;continue}if(ke<56320){Ce[Ae++]=239,Ce[Ae++]=191,Ce[Ae++]=189,We=ke;continue}ke=We-55296<<10|ke-56320|65536,We=null}else We&&(Ce[Ae++]=239,Ce[Ae++]=191,Ce[Ae++]=189,We=null);ke<128?Ce[Ae++]=ke:(ke<2048?Ce[Ae++]=ke>>6|192:(ke<65536?Ce[Ae++]=ke>>12|224:(Ce[Ae++]=ke>>18|240,Ce[Ae++]=ke>>12&63|128),Ce[Ae++]=ke>>6&63|128),Ce[Ae++]=63&ke|128)}return Ae}(this.buf,B,this.pos);var de=this.pos-ee;de>=128&&T(ee,de,this),this.pos=ee-1,this.writeVarint(de),this.pos+=de},writeFloat:function(B){this.realloc(4),c.write(this.buf,B,this.pos,!0,23,4),this.pos+=4},writeDouble:function(B){this.realloc(8),c.write(this.buf,B,this.pos,!0,52,8),this.pos+=8},writeBytes:function(B){var ee=B.length;this.writeVarint(ee),this.realloc(ee);for(var de=0;de<ee;de++)this.buf[this.pos++]=B[de]},writeRawMessage:function(B,ee){this.pos++;var de=this.pos;B(ee,this);var Ce=this.pos-de;Ce>=128&&T(de,Ce,this),this.pos=de-1,this.writeVarint(Ce),this.pos+=Ce},writeMessage:function(B,ee,de){this.writeTag(B,s.Bytes),this.writeRawMessage(ee,de)},writePackedVarint:function(B,ee){ee.length&&this.writeMessage(B,M,ee)},writePackedSVarint:function(B,ee){ee.length&&this.writeMessage(B,R,ee)},writePackedBoolean:function(B,ee){ee.length&&this.writeMessage(B,j,ee)},writePackedFloat:function(B,ee){ee.length&&this.writeMessage(B,L,ee)},writePackedDouble:function(B,ee){ee.length&&this.writeMessage(B,k,ee)},writePackedFixed32:function(B,ee){ee.length&&this.writeMessage(B,U,ee)},writePackedSFixed32:function(B,ee){ee.length&&this.writeMessage(B,V,ee)},writePackedFixed64:function(B,ee){ee.length&&this.writeMessage(B,H,ee)},writePackedSFixed64:function(B,ee){ee.length&&this.writeMessage(B,te,ee)},writeBytesField:function(B,ee){this.writeTag(B,s.Bytes),this.writeBytes(ee)},writeFixed32Field:function(B,ee){this.writeTag(B,s.Fixed32),this.writeFixed32(ee)},writeSFixed32Field:function(B,ee){this.writeTag(B,s.Fixed32),this.writeSFixed32(ee)},writeFixed64Field:function(B,ee){this.writeTag(B,s.Fixed64),this.writeFixed64(ee)},writeSFixed64Field:function(B,ee){this.writeTag(B,s.Fixed64),this.writeSFixed64(ee)},writeVarintField:function(B,ee){this.writeTag(B,s.Varint),this.writeVarint(ee)},writeSVarintField:function(B,ee){this.writeTag(B,s.Varint),this.writeSVarint(ee)},writeStringField:function(B,ee){this.writeTag(B,s.Bytes),this.writeString(ee)},writeFloatField:function(B,ee){this.writeTag(B,s.Fixed32),this.writeFloat(ee)},writeDoubleField:function(B,ee){this.writeTag(B,s.Fixed64),this.writeDouble(ee)},writeBooleanField:function(B,ee){this.writeVarintField(B,!!ee)}},kA}var FA=f(k6());let zA=3;function sqe(c,s,u){c===1&&u.readMessage(lqe,s)}function lqe(c,s,u){if(c===3){let{id:h,bitmap:m,width:_,height:b,left:T,top:M,advance:R}=u.readMessage(uqe,{});s.push({id:h,bitmap:new Oy({width:_+2*zA,height:b+2*zA},m),metrics:{width:_,height:b,left:T,top:M,advance:R}})}}function uqe(c,s,u){c===1?s.id=u.readVarint():c===2?s.bitmap=u.readBytes():c===3?s.width=u.readVarint():c===4?s.height=u.readVarint():c===5?s.left=u.readSVarint():c===6?s.top=u.readSVarint():c===7&&(s.advance=u.readVarint())}let cqe=zA;function N6(c){let s=0,u=0;for(let b of c)s+=b.w*b.h,u=Math.max(u,b.w);c.sort((b,T)=>T.h-b.h);let h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),u),h:1/0}],m=0,_=0;for(let b of c)for(let T=h.length-1;T>=0;T--){let M=h[T];if(!(b.w>M.w||b.h>M.h)){if(b.x=M.x,b.y=M.y,_=Math.max(_,b.y+b.h),m=Math.max(m,b.x+b.w),b.w===M.w&&b.h===M.h){let R=h.pop();T<h.length&&(h[T]=R)}else b.h===M.h?(M.x+=b.w,M.w-=b.w):b.w===M.w?(M.y+=b.h,M.h-=b.h):(h.push({x:M.x+b.w,y:M.y,w:M.w-b.w,h:b.h}),M.y+=b.h,M.h-=b.h);break}}return{w:m,h:_,fill:s/(m*_)||0}}let Ro=1;class jA{constructor(s,{pixelRatio:u,version:h,stretchX:m,stretchY:_,content:b,textFitWidth:T,textFitHeight:M}){this.paddedRect=s,this.pixelRatio=u,this.stretchX=m,this.stretchY=_,this.content=b,this.version=h,this.textFitWidth=T,this.textFitHeight=M}get tl(){return[this.paddedRect.x+Ro,this.paddedRect.y+Ro]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ro,this.paddedRect.y+this.paddedRect.h-Ro]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ro)/this.pixelRatio,(this.paddedRect.h-2*Ro)/this.pixelRatio]}}class F6{constructor(s,u){let h={},m={};this.haveRenderCallbacks=[];let _=[];this.addImages(s,h,_),this.addImages(u,m,_);let{w:b,h:T}=N6(_),M=new Aa({width:b||1,height:T||1});for(let R in s){let L=s[R],k=h[R].paddedRect;Aa.copy(L.data,M,{x:0,y:0},{x:k.x+Ro,y:k.y+Ro},L.data)}for(let R in u){let L=u[R],k=m[R].paddedRect,j=k.x+Ro,U=k.y+Ro,V=L.data.width,H=L.data.height;Aa.copy(L.data,M,{x:0,y:0},{x:j,y:U},L.data),Aa.copy(L.data,M,{x:0,y:H-1},{x:j,y:U-1},{width:V,height:1}),Aa.copy(L.data,M,{x:0,y:0},{x:j,y:U+H},{width:V,height:1}),Aa.copy(L.data,M,{x:V-1,y:0},{x:j-1,y:U},{width:1,height:H}),Aa.copy(L.data,M,{x:0,y:0},{x:j+V,y:U},{width:1,height:H})}this.image=M,this.iconPositions=h,this.patternPositions=m}addImages(s,u,h){for(let m in s){let _=s[m],b={x:0,y:0,w:_.data.width+2*Ro,h:_.data.height+2*Ro};h.push(b),u[m]=new jA(b,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(s,u){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let h in s.updatedImages)this.patchUpdatedImage(this.iconPositions[h],s.getImage(h),u),this.patchUpdatedImage(this.patternPositions[h],s.getImage(h),u)}patchUpdatedImage(s,u,h){if(!s||!u||s.version===u.version)return;s.version=u.version;let[m,_]=s.tl;h.update(u.data,void 0,{x:m,y:_})}}var Nc;st("ImagePosition",jA),st("ImageAtlas",F6),i.al=void 0,(Nc=i.al||(i.al={}))[Nc.none=0]="none",Nc[Nc.horizontal=1]="horizontal",Nc[Nc.vertical=2]="vertical",Nc[Nc.horizontalOnly=3]="horizontalOnly";let ow=-17;class $y{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(s,u,h){let m=new $y;return m.scale=s||1,m.fontStack=u,m.verticalAlign=h||"bottom",m}static forImage(s,u){let h=new $y;return h.imageName=s,h.verticalAlign=u||"bottom",h}}class Hd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,u){let h=new Hd;for(let m=0;m<s.sections.length;m++){let _=s.sections[m];_.image?h.addImageSection(_):h.addTextSection(_,u)}return h}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let u="";for(let h=0;h<s.length;h++){let m=s.charCodeAt(h+1)||null,_=s.charCodeAt(h-1)||null;u+=m&&kf(m)&&!Vy[s[h+1]]||_&&kf(_)&&!Vy[s[h-1]]||!Vy[s[h]]?s[h]:Vy[s[h]]}return u}(this.text)}trim(){let s=0;for(let h=0;h<this.text.length&&sw[this.text.charCodeAt(h)];h++)s++;let u=this.text.length;for(let h=this.text.length-1;h>=0&&h>=s&&sw[this.text.charCodeAt(h)];h--)u--;this.text=this.text.substring(s,u),this.sectionIndex=this.sectionIndex.slice(s,u)}substring(s,u){let h=new Hd;return h.text=this.text.substring(s,u),h.sectionIndex=this.sectionIndex.slice(s,u),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,u)=>Math.max(s,this.sections[u].scale),0)}getMaxImageSize(s){let u=0,h=0;for(let m=0;m<this.length();m++){let _=this.getSection(m);if(_.imageName){let b=s[_.imageName];if(!b)continue;let T=b.displaySize;u=Math.max(u,T[0]),h=Math.max(h,T[1])}}return{maxImageWidth:u,maxImageHeight:h}}addTextSection(s,u){this.text+=s.text,this.sections.push($y.forText(s.scale,s.fontStack||u,s.verticalAlign));let h=this.sections.length-1;for(let m=0;m<s.text.length;++m)this.sectionIndex.push(h)}addImageSection(s){let u=s.image?s.image.name:"";if(u.length===0)return void Dn("Can't add FormattedSection with an empty image.");let h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push($y.forImage(u,s.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Dn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function aw(c,s,u,h,m,_,b,T,M,R,L,k,j,U,V){let H=Hd.fromFeature(c,m),te;k===i.al.vertical&&H.verticalizePunctuation();let{processBidirectionalText:ue,processStyledBidirectionalText:_e}=Rs;if(ue&&H.sections.length===1){te=[];let ee=ue(H.toString(),BA(H,R,_,s,h,U));for(let de of ee){let Ce=new Hd;Ce.text=de,Ce.sections=H.sections;for(let Ve=0;Ve<de.length;Ve++)Ce.sectionIndex.push(0);te.push(Ce)}}else if(_e){te=[];let ee=_e(H.text,H.sectionIndex,BA(H,R,_,s,h,U));for(let de of ee){let Ce=new Hd;Ce.text=de[0],Ce.sectionIndex=de[1],Ce.sections=H.sections,te.push(Ce)}}else te=function(ee,de){let Ce=[],Ve=ee.text,Ae=0;for(let ke of de)Ce.push(ee.substring(Ae,ke)),Ae=ke;return Ae<Ve.length&&Ce.push(ee.substring(Ae,Ve.length)),Ce}(H,BA(H,R,_,s,h,U));let fe=[],B={positionedLines:fe,text:H.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:k,iconsInText:!1,verticalizable:!1};return function(ee,de,Ce,Ve,Ae,ke,We,$e,Ke,Fe,lt,mt){let pt=0,ct=0,Zt=0,on=0,zn=$e==="right"?1:$e==="left"?0:.5,Si=Fn/mt,Ra=0;for(let Wr of Ae){Wr.trim();let Hn=Wr.getMaxScale(),hi={positionedGlyphs:[],lineOffset:0};ee.positionedLines[Ra]=hi;let fi=hi.positionedGlyphs,co=0;if(!Wr.length()){ct+=ke,++Ra;continue}let Oa=dqe(Ve,Wr,Si);for(let Lo=0;Lo<Wr.length();Lo++){let jn=Wr.getSection(Lo),Yn=Wr.getSectionIndex(Lo),Xn=Wr.getCharCode(Lo),In=mqe(Ke,lt,Xn),Dr;if(jn.imageName){if(ee.iconsInText=!0,jn.scale=jn.scale*Si,Dr=gqe(jn,In,Hn,Oa,Ve),!Dr)continue;co=Math.max(co,Dr.imageOffset)}else if(Dr=vqe(jn,Xn,In,Oa,de,Ce),!Dr)continue;let{rect:Ds,metrics:Qd,baselineOffset:ks}=Dr;fi.push({glyph:Xn,imageName:jn.imageName,x:pt,y:ct+ks+ow,vertical:In,scale:jn.scale,fontStack:jn.fontStack,sectionIndex:Yn,metrics:Qd,rect:Ds}),In?(ee.verticalizable=!0,pt+=(jn.imageName?Qd.advance:Fn)*jn.scale+Fe):pt+=Qd.advance*jn.scale+Fe}fi.length!==0&&(Zt=Math.max(pt-Fe,Zt),yqe(fi,0,fi.length-1,zn)),pt=0,hi.lineOffset=Math.max(co,(Hn-1)*Fn);let Kn=ke*Hn+co;ct+=Kn,on=Math.max(Kn,on),++Ra}let{horizontalAlign:Oo,verticalAlign:ci}=UA(We);(function(Wr,Hn,hi,fi,co,Oa,Kn,Lo,jn){let Yn=(Hn-hi)*co,Xn=0;Xn=Oa!==Kn?-Lo*fi-ow:-fi*jn*Kn+.5*Kn;for(let In of Wr)for(let Dr of In.positionedGlyphs)Dr.x+=Yn,Dr.y+=Xn})(ee.positionedLines,zn,Oo,ci,Zt,on,ke,ct,Ae.length),ee.top+=-ci*ct,ee.bottom=ee.top+ct,ee.left+=-Oo*Zt,ee.right=ee.left+Zt}(B,s,u,h,te,b,T,M,k,R,j,V),!function(ee){for(let de of ee)if(de.positionedGlyphs.length!==0)return!1;return!0}(fe)&&B}let sw={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},hqe={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},fqe={40:!0};function z6(c,s,u,h,m,_){if(s.imageName){let b=h[s.imageName];return b?b.displaySize[0]*s.scale*Fn/_+m:0}{let b=u[s.fontStack],T=b&&b[c];return T?T.metrics.advance*s.scale+m:0}}function j6(c,s,u,h){let m=Math.pow(c-s,2);return h?c<s?m/2:2*m:m+Math.abs(u)*u}function pqe(c,s,u){let h=0;return c===10&&(h-=1e4),u&&(h+=150),c!==40&&c!==65288||(h+=50),s!==41&&s!==65289||(h+=50),h}function B6(c,s,u,h,m,_){let b=null,T=j6(s,u,m,_);for(let M of h){let R=j6(s-M.x,u,m,_)+M.badness;R<=T&&(b=M,T=R)}return{index:c,x:s,priorBreak:b,badness:T}}function U6(c){return c?U6(c.priorBreak).concat(c.index):[]}function BA(c,s,u,h,m,_){if(!c)return[];let b=[],T=function(k,j,U,V,H,te){let ue=0;for(let _e=0;_e<k.length();_e++){let fe=k.getSection(_e);ue+=z6(k.getCharCode(_e),fe,V,H,j,te)}return ue/Math.max(1,Math.ceil(ue/U))}(c,s,u,h,m,_),M=c.text.indexOf("\u200B")>=0,R=0;for(let k=0;k<c.length();k++){let j=c.getSection(k),U=c.getCharCode(k);if(sw[U]||(R+=z6(U,j,h,m,s,_)),k<c.length()-1){let V=!((L=U)<11904)&&(!!$t["CJK Compatibility Forms"](L)||!!$t["CJK Compatibility"](L)||!!$t["CJK Strokes"](L)||!!$t["CJK Symbols and Punctuation"](L)||!!$t["Enclosed CJK Letters and Months"](L)||!!$t["Halfwidth and Fullwidth Forms"](L)||!!$t["Ideographic Description Characters"](L)||!!$t["Vertical Forms"](L)||wy.test(String.fromCodePoint(L)));(hqe[U]||V||j.imageName||k!==c.length()-2&&fqe[c.getCharCode(k+1)])&&b.push(B6(k+1,R,T,b,pqe(U,c.getCharCode(k+1),V&&M),!1))}}var L;return U6(B6(c.length(),R,T,b,0,!0))}function UA(c){let s=.5,u=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:s,verticalAlign:u}}function dqe(c,s,u){let h=s.getMaxScale()*Fn,{maxImageWidth:m,maxImageHeight:_}=s.getMaxImageSize(c),b=Math.max(h,_*u);return{verticalLineContentWidth:Math.max(h,m*u),horizontalLineContentHeight:b}}function V6(c){switch(c){case"top":return 0;case"center":return .5;default:return 1}}function mqe(c,s,u){return!(c===i.al.horizontal||!s&&!jd(u)||s&&(sw[u]||(h=u,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(h)))));var h}function vqe(c,s,u,h,m,_){let b=_[c.fontStack],T=function(R,L,k,j){if(R&&R.rect)return R;let U=L[k.fontStack],V=U&&U[j];return V?{rect:null,metrics:V.metrics}:null}(b&&b[s],m,c,s);if(T===null)return null;let M;if(u)M=h.verticalLineContentWidth-c.scale*Fn;else{let R=V6(c.verticalAlign);M=(h.horizontalLineContentHeight-c.scale*Fn)*R}return{rect:T.rect,metrics:T.metrics,baselineOffset:M}}function gqe(c,s,u,h,m){let _=m[c.imageName];if(!_)return null;let b=_.paddedRect,T=_.displaySize,M={width:T[0],height:T[1],left:Ro,top:-3,advance:s?T[1]:T[0]},R;if(s)R=h.verticalLineContentWidth-T[1]*c.scale;else{let L=V6(c.verticalAlign);R=(h.horizontalLineContentHeight-T[1]*c.scale)*L}return{rect:b,metrics:M,baselineOffset:R,imageOffset:(s?T[0]:T[1])*c.scale-Fn*u}}function yqe(c,s,u,h){if(h===0)return;let m=c[u],_=(c[u].x+m.metrics.advance*m.scale)*h;for(let b=s;b<=u;b++)c[b].x-=_}function _qe(c,s,u){let{horizontalAlign:h,verticalAlign:m}=UA(u),_=s[0]-c.displaySize[0]*h,b=s[1]-c.displaySize[1]*m;return{image:c,top:b,bottom:b+c.displaySize[1],left:_,right:_+c.displaySize[0]}}function $6(c){var s,u;let h=c.left,m=c.top,_=c.right-h,b=c.bottom-m,T=(s=c.image.textFitWidth)!==null&&s!==void 0?s:"stretchOrShrink",M=(u=c.image.textFitHeight)!==null&&u!==void 0?u:"stretchOrShrink",R=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(M==="proportional"){if(T==="stretchOnly"&&_/b<R||T==="proportional"){let L=Math.ceil(b*R);h*=L/_,_=L}}else if(T==="proportional"&&M==="stretchOnly"&&R!==0&&_/b>R){let L=Math.ceil(_/R);m*=L/b,b=L}return{x1:h,y1:m,x2:h+_,y2:m+b}}function G6(c,s,u,h,m,_){let b=c.image,T;if(b.content){let te=b.content,ue=b.pixelRatio||1;T=[te[0]/ue,te[1]/ue,b.displaySize[0]-te[2]/ue,b.displaySize[1]-te[3]/ue]}let M=s.left*_,R=s.right*_,L,k,j,U;u==="width"||u==="both"?(U=m[0]+M-h[3],k=m[0]+R+h[1]):(U=m[0]+(M+R-b.displaySize[0])/2,k=U+b.displaySize[0]);let V=s.top*_,H=s.bottom*_;return u==="height"||u==="both"?(L=m[1]+V-h[0],j=m[1]+H+h[2]):(L=m[1]+(V+H-b.displaySize[1])/2,j=L+b.displaySize[1]),{image:b,top:L,right:k,bottom:j,left:U,collisionPadding:T}}let Gy=255,gl=128,Fc=Gy*gl;function Z6(c,s){let{expression:u}=s;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Or(c+1))};if(u.kind==="source")return{kind:"source"};{let{zoomStops:h,interpolationType:m}=u,_=0;for(;_<h.length&&h[_]<=c;)_++;_=Math.max(0,_-1);let b=_;for(;b<h.length&&h[b]<c+1;)b++;b=Math.min(h.length-1,b);let T=h[_],M=h[b];return u.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:M,interpolationType:m}:{kind:"camera",minZoom:T,maxZoom:M,minSize:u.evaluate(new Or(T)),maxSize:u.evaluate(new Or(M)),interpolationType:m}}}function VA(c,s,u){let h="never",m=c.get(s);return m?h=m:c.get(u)&&(h="always"),h}let xqe=jy.VectorTileFeature.types,bqe=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lw(c,s,u,h,m,_,b,T,M,R,L,k,j){let U=T?Math.min(Fc,Math.round(T[0])):0,V=T?Math.min(Fc,Math.round(T[1])):0;c.emplaceBack(s,u,Math.round(32*h),Math.round(32*m),_,b,(U<<1)+(M?1:0),V,16*R,16*L,256*k,256*j)}function $A(c,s,u){c.emplaceBack(s.x,s.y,u),c.emplaceBack(s.x,s.y,u),c.emplaceBack(s.x,s.y,u),c.emplaceBack(s.x,s.y,u)}function wqe(c){for(let s of c.sections)if(mA(s.text))return!0;return!1}class GA{constructor(s){this.layoutVertexArray=new $r,this.indexArray=new ur,this.programConfigurations=s,this.segments=new cr,this.dynamicLayoutVertexArray=new Sr,this.opacityVertexArray=new Gr,this.hasVisibleVertices=!1,this.placedSymbolArray=new ve}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,u,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,tqe.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,rqe.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,bqe,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}st("SymbolBuffers",GA);class ZA{constructor(s,u,h){this.layoutVertexArray=new s,this.layoutAttributes=u,this.indexArray=new h,this.segments=new cr,this.collisionVertexArray=new Pr}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,nqe.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}st("CollisionBuffers",ZA);class Kd{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(b=>b.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Z6(this.zoom,u["text-size"]),this.iconSizeData=Z6(this.zoom,u["icon-size"]);let h=this.layers[0].layout,m=h.get("symbol-sort-key"),_=h.get("symbol-z-order");this.canOverlap=VA(h,"text-overlap","text-allow-overlap")!=="never"||VA(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(b=>i.al[b])),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=s.sourceID}createArrays(){this.text=new GA(new vl(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new GA(new vl(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new be,this.lineVertexArray=new ye,this.symbolInstances=new ge,this.textAnchorOffsets=new Ne}calculateGlyphDependencies(s,u,h,m,_){for(let b=0;b<s.length;b++)if(u[s.charCodeAt(b)]=!0,(h||m)&&_){let T=Vy[s.charAt(b)];T&&(u[T.charCodeAt(0)]=!0)}}populate(s,u,h){let m=this.layers[0],_=m.layout,b=_.get("text-font"),T=_.get("text-field"),M=_.get("icon-image"),R=(T.value.kind!=="constant"||T.value.value instanceof lo&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),L=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,k=_.get("symbol-sort-key");if(this.features=[],!R&&!L)return;let j=u.iconDependencies,U=u.glyphDependencies,V=u.availableImages,H=new Or(this.zoom);for(let{feature:te,id:ue,index:_e,sourceLayerIndex:fe}of s){let B=m._featureFilter.needGeometry,ee=$f(te,B);if(!m._featureFilter.filter(H,ee,h))continue;let de,Ce;if(B||(ee.geometry=Vf(te)),R){let Ae=m.getValueAndResolveTokens("text-field",ee,h,V),ke=lo.factory(Ae),We=this.hasRTLText=this.hasRTLText||wqe(ke);(!We||Rs.getRTLTextPluginStatus()==="unavailable"||We&&Rs.isParsed())&&(de=oqe(ke,m,ee))}if(L){let Ae=m.getValueAndResolveTokens("icon-image",ee,h,V);Ce=Ae instanceof Mo?Ae:Mo.fromString(Ae)}if(!de&&!Ce)continue;let Ve=this.sortFeaturesByKey?k.evaluate(ee,{},h):void 0;if(this.features.push({id:ue,text:de,icon:Ce,index:_e,sourceLayerIndex:fe,geometry:ee.geometry,properties:te.properties,type:xqe[te.type],sortKey:Ve}),Ce&&(j[Ce.name]=!0),de){let Ae=b.evaluate(ee,{},h).join(","),ke=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(i.al.vertical)>=0;for(let We of de.sections)if(We.image)j[We.image.name]=!0;else{let $e=zd(de.toString()),Ke=We.fontStack||Ae,Fe=U[Ke]=U[Ke]||{};this.calculateGlyphDependencies(We.text,Fe,ke,this.allowVerticalPlacement,$e)}}}_.get("symbol-placement")==="line"&&(this.features=function(te){let ue={},_e={},fe=[],B=0;function ee(Ae){fe.push(te[Ae]),B++}function de(Ae,ke,We){let $e=_e[Ae];return delete _e[Ae],_e[ke]=$e,fe[$e].geometry[0].pop(),fe[$e].geometry[0]=fe[$e].geometry[0].concat(We[0]),$e}function Ce(Ae,ke,We){let $e=ue[ke];return delete ue[ke],ue[Ae]=$e,fe[$e].geometry[0].shift(),fe[$e].geometry[0]=We[0].concat(fe[$e].geometry[0]),$e}function Ve(Ae,ke,We){let $e=We?ke[0][ke[0].length-1]:ke[0][0];return`${Ae}:${$e.x}:${$e.y}`}for(let Ae=0;Ae<te.length;Ae++){let ke=te[Ae],We=ke.geometry,$e=ke.text?ke.text.toString():null;if(!$e){ee(Ae);continue}let Ke=Ve($e,We),Fe=Ve($e,We,!0);if(Ke in _e&&Fe in ue&&_e[Ke]!==ue[Fe]){let lt=Ce(Ke,Fe,We),mt=de(Ke,Fe,fe[lt].geometry);delete ue[Ke],delete _e[Fe],_e[Ve($e,fe[mt].geometry,!0)]=mt,fe[lt].geometry=null}else Ke in _e?de(Ke,Fe,We):Fe in ue?Ce(Ke,Fe,We):(ee(Ae),ue[Ke]=B-1,_e[Fe]=B-1)}return fe.filter(Ae=>Ae.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((te,ue)=>te.sortKey-ue.sortKey)}update(s,u,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,u,this.layers,h),this.icon.programConfigurations.updatePaintArrays(s,u,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,u){let h=this.lineVertexArray.length;if(s.segment!==void 0){let m=s.dist(u[s.segment+1]),_=s.dist(u[s.segment]),b={};for(let T=s.segment+1;T<u.length;T++)b[T]={x:u[T].x,y:u[T].y,tileUnitDistanceFromAnchor:m},T<u.length-1&&(m+=u[T+1].dist(u[T]));for(let T=s.segment||0;T>=0;T--)b[T]={x:u[T].x,y:u[T].y,tileUnitDistanceFromAnchor:_},T>0&&(_+=u[T-1].dist(u[T]));for(let T=0;T<u.length;T++){let M=b[T];this.lineVertexArray.emplaceBack(M.x,M.y,M.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(s,u,h,m,_,b,T,M,R,L,k,j){let U=s.indexArray,V=s.layoutVertexArray,H=s.segments.prepareSegment(4*u.length,V,U,this.canOverlap?b.sortKey:void 0),te=this.glyphOffsetArray.length,ue=H.vertexLength,_e=this.allowVerticalPlacement&&T===i.al.vertical?Math.PI/2:0,fe=b.text&&b.text.sections;for(let B=0;B<u.length;B++){let{tl:ee,tr:de,bl:Ce,br:Ve,tex:Ae,pixelOffsetTL:ke,pixelOffsetBR:We,minFontScaleX:$e,minFontScaleY:Ke,glyphOffset:Fe,isSDF:lt,sectionIndex:mt}=u[B],pt=H.vertexLength,ct=Fe[1];lw(V,M.x,M.y,ee.x,ct+ee.y,Ae.x,Ae.y,h,lt,ke.x,ke.y,$e,Ke),lw(V,M.x,M.y,de.x,ct+de.y,Ae.x+Ae.w,Ae.y,h,lt,We.x,ke.y,$e,Ke),lw(V,M.x,M.y,Ce.x,ct+Ce.y,Ae.x,Ae.y+Ae.h,h,lt,ke.x,We.y,$e,Ke),lw(V,M.x,M.y,Ve.x,ct+Ve.y,Ae.x+Ae.w,Ae.y+Ae.h,h,lt,We.x,We.y,$e,Ke),$A(s.dynamicLayoutVertexArray,M,_e),U.emplaceBack(pt,pt+2,pt+1),U.emplaceBack(pt+1,pt+2,pt+3),H.vertexLength+=4,H.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Fe[0]),B!==u.length-1&&mt===u[B+1].sectionIndex||s.programConfigurations.populatePaintArrays(V.length,b,b.index,{},j,fe&&fe[mt])}s.placedSymbolArray.emplaceBack(M.x,M.y,te,this.glyphOffsetArray.length-te,ue,R,L,M.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],T,0,!1,0,k)}_addCollisionDebugVertex(s,u,h,m,_,b){return u.emplaceBack(0,0),s.emplaceBack(h.x,h.y,m,_,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(s,u,h,m,_,b,T){let M=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),R=M.vertexLength,L=_.layoutVertexArray,k=_.collisionVertexArray,j=T.anchorX,U=T.anchorY;this._addCollisionDebugVertex(L,k,b,j,U,new q(s,u)),this._addCollisionDebugVertex(L,k,b,j,U,new q(h,u)),this._addCollisionDebugVertex(L,k,b,j,U,new q(h,m)),this._addCollisionDebugVertex(L,k,b,j,U,new q(s,m)),M.vertexLength+=4;let V=_.indexArray;V.emplaceBack(R,R+1),V.emplaceBack(R+1,R+2),V.emplaceBack(R+2,R+3),V.emplaceBack(R+3,R),M.primitiveLength+=4}addDebugCollisionBoxes(s,u,h,m){for(let _=s;_<u;_++){let b=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,m?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ZA(Zr,O6.members,Nn),this.iconCollisionBox=new ZA(Zr,O6.members,Nn);for(let s=0;s<this.symbolInstances.length;s++){let u=this.symbolInstances.get(s);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(s,u,h,m,_,b,T,M,R){let L={};for(let k=u;k<h;k++){let j=s.get(k);L.textBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},L.textFeatureIndex=j.featureIndex;break}for(let k=m;k<_;k++){let j=s.get(k);L.verticalTextBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},L.verticalTextFeatureIndex=j.featureIndex;break}for(let k=b;k<T;k++){let j=s.get(k);L.iconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},L.iconFeatureIndex=j.featureIndex;break}for(let k=M;k<R;k++){let j=s.get(k);L.verticalIconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},L.verticalIconFeatureIndex=j.featureIndex;break}return L}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){let h=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,u){let h=s.placedSymbolArray.get(u),m=h.vertexStartIndex+4*h.numGlyphs;for(let _=h.vertexStartIndex;_<m;_+=4)s.indexArray.emplaceBack(_,_+2,_+1),s.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let u=Math.sin(s),h=Math.cos(s),m=[],_=[],b=[];for(let T=0;T<this.symbolInstances.length;++T){b.push(T);let M=this.symbolInstances.get(T);m.push(0|Math.round(u*M.anchorX+h*M.anchorY)),_.push(M.featureIndex)}return b.sort((T,M)=>m[T]-m[M]||_[M]-_[T]),b}addToSortKeyRanges(s,u){let h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===u?h.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let u of this.symbolInstanceIndexes){let h=this.symbolInstances.get(u);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,_,b)=>{m>=0&&b.indexOf(m)===_&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let W6,H6;st("SymbolBucket",Kd,{omit:["layers","collisionBoxArray","features","compareText"]}),Kd.MAX_GLYPHS=65535,Kd.addDynamicAttributes=$A;var WA={get paint(){return H6=H6||new En({"icon-opacity":new _t(re.paint_symbol["icon-opacity"]),"icon-color":new _t(re.paint_symbol["icon-color"]),"icon-halo-color":new _t(re.paint_symbol["icon-halo-color"]),"icon-halo-width":new _t(re.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _t(re.paint_symbol["icon-halo-blur"]),"icon-translate":new ht(re.paint_symbol["icon-translate"]),"icon-translate-anchor":new ht(re.paint_symbol["icon-translate-anchor"]),"text-opacity":new _t(re.paint_symbol["text-opacity"]),"text-color":new _t(re.paint_symbol["text-color"],{runtimeType:en,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new _t(re.paint_symbol["text-halo-color"]),"text-halo-width":new _t(re.paint_symbol["text-halo-width"]),"text-halo-blur":new _t(re.paint_symbol["text-halo-blur"]),"text-translate":new ht(re.paint_symbol["text-translate"]),"text-translate-anchor":new ht(re.paint_symbol["text-translate-anchor"])})},get layout(){return W6=W6||new En({"symbol-placement":new ht(re.layout_symbol["symbol-placement"]),"symbol-spacing":new ht(re.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ht(re.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _t(re.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ht(re.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ht(re.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ht(re.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ht(re.layout_symbol["icon-ignore-placement"]),"icon-optional":new ht(re.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ht(re.layout_symbol["icon-rotation-alignment"]),"icon-size":new _t(re.layout_symbol["icon-size"]),"icon-text-fit":new ht(re.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ht(re.layout_symbol["icon-text-fit-padding"]),"icon-image":new _t(re.layout_symbol["icon-image"]),"icon-rotate":new _t(re.layout_symbol["icon-rotate"]),"icon-padding":new _t(re.layout_symbol["icon-padding"]),"icon-keep-upright":new ht(re.layout_symbol["icon-keep-upright"]),"icon-offset":new _t(re.layout_symbol["icon-offset"]),"icon-anchor":new _t(re.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ht(re.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ht(re.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ht(re.layout_symbol["text-rotation-alignment"]),"text-field":new _t(re.layout_symbol["text-field"]),"text-font":new _t(re.layout_symbol["text-font"]),"text-size":new _t(re.layout_symbol["text-size"]),"text-max-width":new _t(re.layout_symbol["text-max-width"]),"text-line-height":new ht(re.layout_symbol["text-line-height"]),"text-letter-spacing":new _t(re.layout_symbol["text-letter-spacing"]),"text-justify":new _t(re.layout_symbol["text-justify"]),"text-radial-offset":new _t(re.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ht(re.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new _t(re.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new _t(re.layout_symbol["text-anchor"]),"text-max-angle":new ht(re.layout_symbol["text-max-angle"]),"text-writing-mode":new ht(re.layout_symbol["text-writing-mode"]),"text-rotate":new _t(re.layout_symbol["text-rotate"]),"text-padding":new ht(re.layout_symbol["text-padding"]),"text-keep-upright":new ht(re.layout_symbol["text-keep-upright"]),"text-transform":new _t(re.layout_symbol["text-transform"]),"text-offset":new _t(re.layout_symbol["text-offset"]),"text-allow-overlap":new ht(re.layout_symbol["text-allow-overlap"]),"text-overlap":new ht(re.layout_symbol["text-overlap"]),"text-ignore-placement":new ht(re.layout_symbol["text-ignore-placement"]),"text-optional":new ht(re.layout_symbol["text-optional"])})}};class K6{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:Et,this.defaultValue=s}evaluate(s){if(s.formattedSection){let u=this.defaultValue.property.overrides;if(u&&u.hasOverride(s.formattedSection))return u.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}st("FormatSectionOverride",K6,{omit:["defaultValue"]});class uw extends Qo{constructor(s){super(s,WA)}recalculate(s,u){if(super.recalculate(s,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let h=this.layout.get("text-writing-mode");if(h){let m=[];for(let _ of h)m.indexOf(_)<0&&m.push(_);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,u,h,m){let _=this.layout.get(s).evaluate(u,{},h,m),b=this._unevaluatedLayout._values[s];return b.isDataDriven()||Cf(b.value)||!_?_:function(T,M){return M.replace(/{([^{}]+)}/g,(R,L)=>T&&L in T?String(T[L]):"")}(u.properties,_)}createBucket(s){return new Kd(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let s of WA.paint.overridableProperties){if(!uw.hasPaintOverride(this.layout,s))continue;let u=this.paint.get(s),h=new K6(u),m=new Cd(h,u.property.specification),_=null;_=u.value.kind==="constant"||u.value.kind==="source"?new ly("source",m):new Md("composite",m,u.value.zoomStops),this.paint._values[s]=new ji(u.property,_,u.parameters)}}_handleOverridablePaintPropertyUpdate(s,u,h){return!(!this.layout||u.isDataDriven()||h.isDataDriven())&&uw.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,u){let h=s.get("text-field"),m=WA.paint.properties[u],_=!1,b=T=>{for(let M of T)if(m.overrides&&m.overrides.hasOverride(M))return void(_=!0)};if(h.value.kind==="constant"&&h.value.value instanceof lo)b(h.value.value.sections);else if(h.value.kind==="source"){let T=R=>{_||(R instanceof Mt&&rn(R.value)===lf?b(R.value.sections):R instanceof hd?b(R.sections):R.eachChild(T))},M=h.value;M._styleExpression&&T(M._styleExpression.expression)}return _}}let Y6;var Eqe={get paint(){return Y6=Y6||new En({"background-color":new ht(re.paint_background["background-color"]),"background-pattern":new Ty(re.paint_background["background-pattern"]),"background-opacity":new ht(re.paint_background["background-opacity"])})}};class Tqe extends Qo{constructor(s){super(s,Eqe)}}let X6;var Sqe={get paint(){return X6=X6||new En({"raster-opacity":new ht(re.paint_raster["raster-opacity"]),"raster-hue-rotate":new ht(re.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ht(re.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ht(re.paint_raster["raster-brightness-max"]),"raster-saturation":new ht(re.paint_raster["raster-saturation"]),"raster-contrast":new ht(re.paint_raster["raster-contrast"]),"raster-resampling":new ht(re.paint_raster["raster-resampling"]),"raster-fade-duration":new ht(re.paint_raster["raster-fade-duration"])})}};class Iqe extends Qo{constructor(s){super(s,Sqe)}}class Cqe extends Qo{constructor(s){super(s,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Pqe{constructor(s){this._methodToThrottle=s,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let Mqe={once:!0},HA=6371008.8;class zc{constructor(s,u){if(isNaN(s)||isNaN(u))throw new Error(`Invalid LngLat object: (${s}, ${u})`);if(this.lng=+s,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new zc(Vn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){let u=Math.PI/180,h=this.lat*u,m=s.lat*u,_=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((s.lng-this.lng)*u);return HA*Math.acos(Math.min(_,1))}static convert(s){if(s instanceof zc)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new zc(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new zc(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let Q6=2*Math.PI*HA;function J6(c){return Q6*Math.cos(c*Math.PI/180)}function eV(c){return(180+c)/360}function tV(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function rV(c,s){return c/J6(s)}function KA(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function nV(c,s){return c*J6(KA(s))}class Zy{constructor(s,u,h=0){this.x=+s,this.y=+u,this.z=+h}static fromLngLat(s,u=0){let h=zc.convert(s);return new Zy(eV(h.lng),tV(h.lat),rV(u,h.lat))}toLngLat(){return new zc(360*this.x-180,KA(this.y))}toAltitude(){return nV(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Q6*(s=KA(this.y),1/Math.cos(s*Math.PI/180));var s}}function iV(c,s,u){var h=2*Math.PI*6378137/256/Math.pow(2,u);return[c*h-2*Math.PI*6378137/2,s*h-2*Math.PI*6378137/2]}class YA{constructor(s,u,h){if(!function(m,_,b){return!(m<0||m>25||b<0||b>=Math.pow(2,m)||_<0||_>=Math.pow(2,m))}(s,u,h))throw new Error(`x=${u}, y=${h}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=u,this.y=h,this.key=Yd(0,s,s,u,h)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,u,h){let m=(b=this.y,T=this.z,M=iV(256*(_=this.x),256*(b=Math.pow(2,T)-b-1),T),R=iV(256*(_+1),256*(b+1),T),M[0]+","+M[1]+","+R[0]+","+R[1]);var _,b,T,M,R;let L=function(k,j,U){let V,H="";for(let te=k;te>0;te--)V=1<<te-1,H+=(j&V?1:0)+(U&V?2:0);return H}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,L).replace(/{bbox-epsg-3857}/g,m)}isChildOf(s){let u=this.z-s.z;return u>0&&s.x===this.x>>u&&s.y===this.y>>u}getTilePoint(s){let u=Math.pow(2,this.z);return new q((s.x*u-this.x)*xt,(s.y*u-this.y)*xt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class oV{constructor(s,u){this.wrap=s,this.canonical=u,this.key=Yd(s,u.z,u.z,u.x,u.y)}}class qa{constructor(s,u,h,m,_){if(this.terrainRttPosMatrix32f=null,s<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${h}`);this.overscaledZ=s,this.wrap=u,this.canonical=new YA(h,+m,+_),this.key=Yd(u,s,h,m,_)}clone(){return new qa(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);let u=this.canonical.z-s;return s>this.canonical.z?new qa(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new qa(s,this.wrap,s,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(s,u){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);let h=this.canonical.z-s;return s>this.canonical.z?Yd(this.wrap*+u,s,this.canonical.z,this.canonical.x,this.canonical.y):Yd(this.wrap*+u,s,s,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(s){if(s.wrap!==this.wrap)return!1;let u=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>u&&s.canonical.y===this.canonical.y>>u}children(s){if(this.overscaledZ>=s)return[new qa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let u=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new qa(u,this.wrap,u,h,m),new qa(u,this.wrap,u,h+1,m),new qa(u,this.wrap,u,h,m+1),new qa(u,this.wrap,u,h+1,m+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new qa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new qa(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new oV(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new Zy(s.x-this.wrap,s.y))}}function Yd(c,s,u,h,m){(c*=2)<0&&(c=-1*c-1);let _=1<<u;return(_*_*c+_*m+h).toString(36)+u.toString(36)+s.toString(36)}st("CanonicalTileID",YA),st("OverscaledTileID",qa,{omit:["terrainRttPosMatrix32f"]});class aV{constructor(s,u,h,m=1,_=1,b=1,T=0){if(this.uid=s,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Dn(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;let M=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=_,this.blueFactor=b,this.baseShift=T;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let R=0;R<M;R++)this.data[this._idx(-1,R)]=this.data[this._idx(0,R)],this.data[this._idx(M,R)]=this.data[this._idx(M-1,R)],this.data[this._idx(R,-1)]=this.data[this._idx(R,0)],this.data[this._idx(R,M)]=this.data[this._idx(R,M-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(M,-1)]=this.data[this._idx(M-1,0)],this.data[this._idx(-1,M)]=this.data[this._idx(0,M-1)],this.data[this._idx(M,M)]=this.data[this._idx(M-1,M-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let R=0;R<M;R++)for(let L=0;L<M;L++){let k=this.get(R,L);k>this.max&&(this.max=k),k<this.min&&(this.min=k)}}get(s,u){let h=new Uint8Array(this.data.buffer),m=4*this._idx(s,u);return this.unpack(h[m],h[m+1],h[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,u){if(s<-1||s>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(s+1)}unpack(s,u,h){return s*this.redFactor+u*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Aa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,u,h){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let m=u*this.dim,_=u*this.dim+this.dim,b=h*this.dim,T=h*this.dim+this.dim;switch(u){case-1:m=_-1;break;case 1:_=m+1}switch(h){case-1:b=T-1;break;case 1:T=b+1}let M=-u*this.dim,R=-h*this.dim;for(let L=b;L<T;L++)for(let k=m;k<_;k++)this.data[this._idx(k,L)]=s.data[this._idx(k+M,L+R)]}}st("DEMData",aV);class sV{constructor(s){this._stringToNumber={},this._numberToString=[];for(let u=0;u<s.length;u++){let h=s[u];this._stringToNumber[h]=u,this._numberToString[u]=h}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class lV{constructor(s,u,h,m,_){this.type="Feature",this._vectorTileFeature=s,s._z=u,s._x=h,s._y=m,this.properties=s.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){let s={geometry:this.geometry};for(let u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(s[u]=this[u]);return s}}class uV{constructor(s,u){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Oc(xt,16,0),this.grid3D=new Oc(xt,16,0),this.featureIndexArray=new Re,this.promoteId=u}insert(s,u,h,m,_,b){let T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,_);let M=b?this.grid3D:this.grid;for(let R=0;R<u.length;R++){let L=u[R],k=[1/0,1/0,-1/0,-1/0];for(let j=0;j<L.length;j++){let U=L[j];k[0]=Math.min(k[0],U.x),k[1]=Math.min(k[1],U.y),k[2]=Math.max(k[2],U.x),k[3]=Math.max(k[3],U.y)}k[0]<xt&&k[1]<xt&&k[2]>=0&&k[3]>=0&&M.insert(T,k[0],k[1],k[2],k[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new jy.VectorTile(new FA(this.rawTileData)).layers,this.sourceLayerCoder=new sV(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,u,h,m){this.loadVTLayers();let _=s.params,b=xt/s.tileSize/s.scale,T=qf(_.filter),M=s.queryGeometry,R=s.queryPadding*b,L=hV(M),k=this.grid.query(L.minX-R,L.minY-R,L.maxX+R,L.maxY+R),j=hV(s.cameraQueryGeometry),U=this.grid3D.query(j.minX-R,j.minY-R,j.maxX+R,j.maxY+R,(te,ue,_e,fe)=>function(B,ee,de,Ce,Ve){for(let ke of B)if(ee<=ke.x&&de<=ke.y&&Ce>=ke.x&&Ve>=ke.y)return!0;let Ae=[new q(ee,de),new q(ee,Ve),new q(Ce,Ve),new q(Ce,de)];if(B.length>2){for(let ke of Ae)if(Gf(B,ke))return!0}for(let ke=0;ke<B.length-1;ke++)if(gAe(B[ke],B[ke+1],Ae))return!0;return!1}(s.cameraQueryGeometry,te-R,ue-R,_e+R,fe+R));for(let te of U)k.push(te);k.sort(Aqe);let V={},H;for(let te=0;te<k.length;te++){let ue=k[te];if(ue===H)continue;H=ue;let _e=this.featureIndexArray.get(ue),fe=null;this.loadMatchingFeature(V,_e.bucketIndex,_e.sourceLayerIndex,_e.featureIndex,T,_.layers,_.availableImages,u,h,m,(B,ee,de)=>(fe||(fe=Vf(B)),ee.queryIntersectsFeature({queryGeometry:M,feature:B,featureState:de,geometry:fe,zoom:this.z,transform:s.transform,pixelsToTileUnits:b,pixelPosMatrix:s.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:s.getElevation})))}return V}loadMatchingFeature(s,u,h,m,_,b,T,M,R,L,k){let j=this.bucketLayerIDs[u];if(b&&!j.some(te=>b.has(te)))return;let U=this.sourceLayerCoder.decode(h),V=this.vtLayers[U].feature(m);if(_.needGeometry){let te=$f(V,!0);if(!_.filter(new Or(this.tileID.overscaledZ),te,this.tileID.canonical))return}else if(!_.filter(new Or(this.tileID.overscaledZ),V))return;let H=this.getId(V,U);for(let te=0;te<j.length;te++){let ue=j[te];if(b&&!b.has(ue))continue;let _e=M[ue];if(!_e)continue;let fe={};H&&L&&(fe=L.getState(_e.sourceLayer||"_geojsonTileLayer",H));let B=zt({},R[ue]);B.paint=cV(B.paint,_e.paint,V,fe,T),B.layout=cV(B.layout,_e.layout,V,fe,T);let ee=!k||k(V,_e,fe);if(!ee)continue;let de=new lV(V,this.z,this.x,this.y,H);de.layer=B;let Ce=s[ue];Ce===void 0&&(Ce=s[ue]=[]),Ce.push({featureIndex:m,feature:de,intersectionZ:ee})}}lookupSymbolFeatures(s,u,h,m,_,b,T,M){let R={};this.loadVTLayers();let L=qf(_);for(let k of s)this.loadMatchingFeature(R,h,m,k,L,b,T,M,u);return R}hasLayer(s){for(let u of this.bucketLayerIDs)for(let h of u)if(s===h)return!0;return!1}getId(s,u){var h;let m=s.id;return this.promoteId&&(m=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof m=="boolean"&&(m=Number(m)),m===void 0&&!((h=s.properties)===null||h===void 0)&&h.cluster&&this.promoteId&&(m=Number(s.properties.cluster_id))),m}}function cV(c,s,u,h,m){return xi(c,(_,b)=>{let T=s instanceof Ud?s.get(b):null;return T&&T.evaluate?T.evaluate(u,h,m):T})}function hV(c){let s=1/0,u=1/0,h=-1/0,m=-1/0;for(let _ of c)s=Math.min(s,_.x),u=Math.min(u,_.y),h=Math.max(h,_.x),m=Math.max(m,_.y);return{minX:s,minY:u,maxX:h,maxY:m}}function Aqe(c,s){return s-c}function fV(c,s,u,h,m){let _=[];for(let b=0;b<c.length;b++){let T=c[b],M;for(let R=0;R<T.length-1;R++){let L=T[R],k=T[R+1];L.x<s&&k.x<s||(L.x<s?L=new q(s,L.y+(s-L.x)/(k.x-L.x)*(k.y-L.y))._round():k.x<s&&(k=new q(s,L.y+(s-L.x)/(k.x-L.x)*(k.y-L.y))._round()),L.y<u&&k.y<u||(L.y<u?L=new q(L.x+(u-L.y)/(k.y-L.y)*(k.x-L.x),u)._round():k.y<u&&(k=new q(L.x+(u-L.y)/(k.y-L.y)*(k.x-L.x),u)._round()),L.x>=h&&k.x>=h||(L.x>=h?L=new q(h,L.y+(h-L.x)/(k.x-L.x)*(k.y-L.y))._round():k.x>=h&&(k=new q(h,L.y+(h-L.x)/(k.x-L.x)*(k.y-L.y))._round()),L.y>=m&&k.y>=m||(L.y>=m?L=new q(L.x+(m-L.y)/(k.y-L.y)*(k.x-L.x),m)._round():k.y>=m&&(k=new q(L.x+(m-L.y)/(k.y-L.y)*(k.x-L.x),m)._round()),M&&L.equals(M[M.length-1])||(M=[L],_.push(M)),M.push(k)))))}}return _}st("FeatureIndex",uV,{omit:["rawTileData","sourceLayerCoder"]});class jc extends q{constructor(s,u,h,m){super(s,u),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new jc(this.x,this.y,this.angle,this.segment)}}function pV(c,s,u,h,m){if(s.segment===void 0||u===0)return!0;let _=s,b=s.segment+1,T=0;for(;T>-u/2;){if(b--,b<0)return!1;T-=c[b].dist(_),_=c[b]}T+=c[b].dist(c[b+1]),b++;let M=[],R=0;for(;T<u/2;){let L=c[b],k=c[b+1];if(!k)return!1;let j=c[b-1].angleTo(L)-L.angleTo(k);for(j=Math.abs((j+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:T,angleDelta:j}),R+=j;T-M[0].distance>h;)R-=M.shift().angleDelta;if(R>m)return!1;b++,T+=L.dist(k)}return!0}function dV(c){let s=0;for(let u=0;u<c.length-1;u++)s+=c[u].dist(c[u+1]);return s}function mV(c,s,u){return c?.6*s*u:0}function vV(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function qqe(c,s,u,h,m,_){let b=mV(u,m,_),T=vV(u,h)*_,M=0,R=dV(c)/2;for(let L=0;L<c.length-1;L++){let k=c[L],j=c[L+1],U=k.dist(j);if(M+U>R){let V=(R-M)/U,H=Za.number(k.x,j.x,V),te=Za.number(k.y,j.y,V),ue=new jc(H,te,j.angleTo(k),L);return ue._round(),!b||pV(c,ue,T,b,s)?ue:void 0}M+=U}}function Rqe(c,s,u,h,m,_,b,T,M){let R=mV(h,_,b),L=vV(h,m),k=L*b,j=c[0].x===0||c[0].x===M||c[0].y===0||c[0].y===M;return s-k<s/4&&(s=k+s/4),gV(c,j?s/2*T%s:(L/2+2*_)*b*T%s,s,R,u,k,j,!1,M)}function gV(c,s,u,h,m,_,b,T,M){let R=_/2,L=dV(c),k=0,j=s-u,U=[];for(let V=0;V<c.length-1;V++){let H=c[V],te=c[V+1],ue=H.dist(te),_e=te.angleTo(H);for(;j+u<k+ue;){j+=u;let fe=(j-k)/ue,B=Za.number(H.x,te.x,fe),ee=Za.number(H.y,te.y,fe);if(B>=0&&B<M&&ee>=0&&ee<M&&j-R>=0&&j+R<=L){let de=new jc(B,ee,_e,V);de._round(),h&&!pV(c,de,_,h,m)||U.push(de)}}k+=ue}return T||U.length||b||(U=gV(c,k/2,u,h,m,_,b,!0,M)),U}st("Anchor",jc);let Wy=Ro;function yV(c,s,u,h){let m=[],_=c.image,b=_.pixelRatio,T=_.paddedRect.w-2*Wy,M=_.paddedRect.h-2*Wy,R={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom},L=_.stretchX||[[0,T]],k=_.stretchY||[[0,M]],j=(Fe,lt)=>Fe+lt[1]-lt[0],U=L.reduce(j,0),V=k.reduce(j,0),H=T-U,te=M-V,ue=0,_e=U,fe=0,B=V,ee=0,de=H,Ce=0,Ve=te;if(_.content&&h){let Fe=_.content,lt=Fe[2]-Fe[0],mt=Fe[3]-Fe[1];(_.textFitWidth||_.textFitHeight)&&(R=$6(c)),ue=cw(L,0,Fe[0]),fe=cw(k,0,Fe[1]),_e=cw(L,Fe[0],Fe[2]),B=cw(k,Fe[1],Fe[3]),ee=Fe[0]-ue,Ce=Fe[1]-fe,de=lt-_e,Ve=mt-B}let Ae=R.x1,ke=R.y1,We=R.x2-Ae,$e=R.y2-ke,Ke=(Fe,lt,mt,pt)=>{let ct=hw(Fe.stretch-ue,_e,We,Ae),Zt=fw(Fe.fixed-ee,de,Fe.stretch,U),on=hw(lt.stretch-fe,B,$e,ke),zn=fw(lt.fixed-Ce,Ve,lt.stretch,V),Si=hw(mt.stretch-ue,_e,We,Ae),Ra=fw(mt.fixed-ee,de,mt.stretch,U),Oo=hw(pt.stretch-fe,B,$e,ke),ci=fw(pt.fixed-Ce,Ve,pt.stretch,V),Wr=new q(ct,on),Hn=new q(Si,on),hi=new q(Si,Oo),fi=new q(ct,Oo),co=new q(Zt/b,zn/b),Oa=new q(Ra/b,ci/b),Kn=s*Math.PI/180;if(Kn){let Yn=Math.sin(Kn),Xn=Math.cos(Kn),In=[Xn,-Yn,Yn,Xn];Wr._matMult(In),Hn._matMult(In),fi._matMult(In),hi._matMult(In)}let Lo=Fe.stretch+Fe.fixed,jn=lt.stretch+lt.fixed;return{tl:Wr,tr:Hn,bl:fi,br:hi,tex:{x:_.paddedRect.x+Wy+Lo,y:_.paddedRect.y+Wy+jn,w:mt.stretch+mt.fixed-Lo,h:pt.stretch+pt.fixed-jn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:co,pixelOffsetBR:Oa,minFontScaleX:de/b/We,minFontScaleY:Ve/b/$e,isSDF:u}};if(h&&(_.stretchX||_.stretchY)){let Fe=_V(L,H,U),lt=_V(k,te,V);for(let mt=0;mt<Fe.length-1;mt++){let pt=Fe[mt],ct=Fe[mt+1];for(let Zt=0;Zt<lt.length-1;Zt++)m.push(Ke(pt,lt[Zt],ct,lt[Zt+1]))}}else m.push(Ke({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:M+1}));return m}function cw(c,s,u){let h=0;for(let m of c)h+=Math.max(s,Math.min(u,m[1]))-Math.max(s,Math.min(u,m[0]));return h}function _V(c,s,u){let h=[{fixed:-1,stretch:0}];for(let[m,_]of c){let b=h[h.length-1];h.push({fixed:m-b.stretch,stretch:b.stretch}),h.push({fixed:m-b.stretch,stretch:b.stretch+(_-m)})}return h.push({fixed:s+Wy,stretch:u}),h}function hw(c,s,u,h){return c/s*u+h}function fw(c,s,u,h){return c-s*u/h}class pw{constructor(s,u,h,m,_,b,T,M,R,L){var k;if(this.boxStartIndex=s.length,R){let j=b.top,U=b.bottom,V=b.collisionPadding;V&&(j-=V[1],U+=V[3]);let H=U-j;H>0&&(H=Math.max(10,H),this.circleDiameter=H)}else{let j=!((k=b.image)===null||k===void 0)&&k.content&&(b.image.textFitWidth||b.image.textFitHeight)?$6(b):{x1:b.left,y1:b.top,x2:b.right,y2:b.bottom};j.y1=j.y1*T-M[0],j.y2=j.y2*T+M[2],j.x1=j.x1*T-M[3],j.x2=j.x2*T+M[1];let U=b.collisionPadding;if(U&&(j.x1-=U[0]*T,j.y1-=U[1]*T,j.x2+=U[2]*T,j.y2+=U[3]*T),L){let V=new q(j.x1,j.y1),H=new q(j.x2,j.y1),te=new q(j.x1,j.y2),ue=new q(j.x2,j.y2),_e=L*Math.PI/180;V._rotate(_e),H._rotate(_e),te._rotate(_e),ue._rotate(_e),j.x1=Math.min(V.x,H.x,te.x,ue.x),j.x2=Math.max(V.x,H.x,te.x,ue.x),j.y1=Math.min(V.y,H.y,te.y,ue.y),j.y2=Math.max(V.y,H.y,te.y,ue.y)}s.emplaceBack(u.x,u.y,j.x1,j.y1,j.x2,j.y2,h,m,_)}this.boxEndIndex=s.length}}class Oqe{constructor(s=[],u=(h,m)=>h<m?-1:h>m?1:0){if(this.data=s,this.length=this.data.length,this.compare=u,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;let s=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),s}peek(){return this.data[0]}_up(s){let{data:u,compare:h}=this,m=u[s];for(;s>0;){let _=s-1>>1,b=u[_];if(h(m,b)>=0)break;u[s]=b,s=_}u[s]=m}_down(s){let{data:u,compare:h}=this,m=this.length>>1,_=u[s];for(;s<m;){let b=1+(s<<1),T=b+1;if(T<this.length&&h(u[T],u[b])<0&&(b=T),h(u[b],_)>=0)break;u[s]=u[b],s=b}u[s]=_}}function Lqe(c,s=1,u=!1){let h=1/0,m=1/0,_=-1/0,b=-1/0,T=c[0];for(let U=0;U<T.length;U++){let V=T[U];(!U||V.x<h)&&(h=V.x),(!U||V.y<m)&&(m=V.y),(!U||V.x>_)&&(_=V.x),(!U||V.y>b)&&(b=V.y)}let M=Math.min(_-h,b-m),R=M/2,L=new Oqe([],Dqe);if(M===0)return new q(h,m);for(let U=h;U<_;U+=M)for(let V=m;V<b;V+=M)L.push(new Xd(U+R,V+R,R,c));let k=function(U){let V=0,H=0,te=0,ue=U[0];for(let _e=0,fe=ue.length,B=fe-1;_e<fe;B=_e++){let ee=ue[_e],de=ue[B],Ce=ee.x*de.y-de.x*ee.y;H+=(ee.x+de.x)*Ce,te+=(ee.y+de.y)*Ce,V+=3*Ce}return new Xd(H/V,te/V,0,U)}(c),j=L.length;for(;L.length;){let U=L.pop();(U.d>k.d||!k.d)&&(k=U,u&&console.log("found best %d after %d probes",Math.round(1e4*U.d)/1e4,j)),U.max-k.d<=s||(R=U.h/2,L.push(new Xd(U.p.x-R,U.p.y-R,R,c)),L.push(new Xd(U.p.x+R,U.p.y-R,R,c)),L.push(new Xd(U.p.x-R,U.p.y+R,R,c)),L.push(new Xd(U.p.x+R,U.p.y+R,R,c)),j+=4)}return u&&(console.log(`num probes: ${j}`),console.log(`best distance: ${k.d}`)),k.p}function Dqe(c,s){return s.max-c.max}function Xd(c,s,u,h){this.p=new q(c,s),this.h=u,this.d=function(m,_){let b=!1,T=1/0;for(let M=0;M<_.length;M++){let R=_[M];for(let L=0,k=R.length,j=k-1;L<k;j=L++){let U=R[L],V=R[j];U.y>m.y!=V.y>m.y&&m.x<(V.x-U.x)*(m.y-U.y)/(V.y-U.y)+U.x&&(b=!b),T=Math.min(T,J5(m,U,V))}}return(b?1:-1)*Math.sqrt(T)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var Ti;i.aB=void 0,(Ti=i.aB||(i.aB={}))[Ti.center=1]="center",Ti[Ti.left=2]="left",Ti[Ti.right=3]="right",Ti[Ti.top=4]="top",Ti[Ti.bottom=5]="bottom",Ti[Ti["top-left"]=6]="top-left",Ti[Ti["top-right"]=7]="top-right",Ti[Ti["bottom-left"]=8]="bottom-left",Ti[Ti["bottom-right"]=9]="bottom-right";let Bc=7,XA=Number.POSITIVE_INFINITY;function xV(c,s){return s[1]!==XA?function(u,h,m){let _=0,b=0;switch(h=Math.abs(h),m=Math.abs(m),u){case"top-right":case"top-left":case"top":b=m-Bc;break;case"bottom-right":case"bottom-left":case"bottom":b=-m+Bc}switch(u){case"top-right":case"bottom-right":case"right":_=-h;break;case"top-left":case"bottom-left":case"left":_=h}return[_,b]}(c,s[0],s[1]):function(u,h){let m=0,_=0;h<0&&(h=0);let b=h/Math.SQRT2;switch(u){case"top-right":case"top-left":_=b-Bc;break;case"bottom-right":case"bottom-left":_=-b+Bc;break;case"bottom":_=-h+Bc;break;case"top":_=h-Bc}switch(u){case"top-right":case"bottom-right":m=-b;break;case"top-left":case"bottom-left":m=b;break;case"left":m=h;break;case"right":m=-h}return[m,_]}(c,s[0])}function bV(c,s,u){var h;let m=c.layout,_=(h=m.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(s,{},u);if(_){let T=_.values,M=[];for(let R=0;R<T.length;R+=2){let L=M[R]=T[R],k=T[R+1].map(j=>j*Fn);L.startsWith("top")?k[1]-=Bc:L.startsWith("bottom")&&(k[1]+=Bc),M[R+1]=k}return new zi(M)}let b=m.get("text-variable-anchor");if(b){let T;T=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(s,{},u)*Fn,XA]:m.get("text-offset").evaluate(s,{},u).map(R=>R*Fn);let M=[];for(let R of b)M.push(R,xV(R,T));return new zi(M)}return null}function QA(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function kqe(c,s,u,h,m,_,b,T,M,R,L,k){let j=_.textMaxSize.evaluate(s,{});j===void 0&&(j=b);let U=c.layers[0].layout,V=U.get("icon-offset").evaluate(s,{},L),H=EV(u.horizontal),te=b/24,ue=c.tilePixelRatio*te,_e=c.tilePixelRatio*j/24,fe=c.tilePixelRatio*T,B=c.tilePixelRatio*U.get("symbol-spacing"),ee=U.get("text-padding")*c.tilePixelRatio,de=function(mt,pt,ct,Zt=1){let on=mt.get("icon-padding").evaluate(pt,{},ct),zn=on&&on.values;return[zn[0]*Zt,zn[1]*Zt,zn[2]*Zt,zn[3]*Zt]}(U,s,L,c.tilePixelRatio),Ce=U.get("text-max-angle")/180*Math.PI,Ve=U.get("text-rotation-alignment")!=="viewport"&&U.get("symbol-placement")!=="point",Ae=U.get("icon-rotation-alignment")==="map"&&U.get("symbol-placement")!=="point",ke=U.get("symbol-placement"),We=B/2,$e=U.get("icon-text-fit"),Ke;h&&$e!=="none"&&(c.allowVerticalPlacement&&u.vertical&&(Ke=G6(h,u.vertical,$e,U.get("icon-text-fit-padding"),V,te)),H&&(h=G6(h,H,$e,U.get("icon-text-fit-padding"),V,te)));let Fe=L?k.line.getGranularityForZoomLevel(L.z):1,lt=(mt,pt)=>{pt.x<0||pt.x>=xt||pt.y<0||pt.y>=xt||function(ct,Zt,on,zn,Si,Ra,Oo,ci,Wr,Hn,hi,fi,co,Oa,Kn,Lo,jn,Yn,Xn,In,Dr,Ds,Qd,ks,zqe){let Jd=ct.addToLineVertexArray(Zt,on),Hf,em,tm,rm,CV=0,PV=0,MV=0,AV=0,aq=-1,sq=-1,wu={},qV=Os("");if(ct.allowVerticalPlacement&&zn.vertical){let Ui=ci.layout.get("text-rotate").evaluate(Dr,{},ks)+90;tm=new pw(Wr,Zt,Hn,hi,fi,zn.vertical,co,Oa,Kn,Ui),Oo&&(rm=new pw(Wr,Zt,Hn,hi,fi,Oo,jn,Yn,Kn,Ui))}if(Si){let Ui=ci.layout.get("icon-rotate").evaluate(Dr,{}),La=ci.layout.get("icon-text-fit")!=="none",Kf=yV(Si,Ui,Qd,La),Fs=Oo?yV(Oo,Ui,Qd,La):void 0;em=new pw(Wr,Zt,Hn,hi,fi,Si,jn,Yn,!1,Ui),CV=4*Kf.length;let Yf=ct.iconSizeData,yl=null;Yf.kind==="source"?(yl=[gl*ci.layout.get("icon-size").evaluate(Dr,{})],yl[0]>Fc&&Dn(`${ct.layerIds[0]}: Value for "icon-size" is >= ${Gy}. Reduce your "icon-size".`)):Yf.kind==="composite"&&(yl=[gl*Ds.compositeIconSizes[0].evaluate(Dr,{},ks),gl*Ds.compositeIconSizes[1].evaluate(Dr,{},ks)],(yl[0]>Fc||yl[1]>Fc)&&Dn(`${ct.layerIds[0]}: Value for "icon-size" is >= ${Gy}. Reduce your "icon-size".`)),ct.addSymbols(ct.icon,Kf,yl,In,Xn,Dr,i.al.none,Zt,Jd.lineStartIndex,Jd.lineLength,-1,ks),aq=ct.icon.placedSymbolArray.length-1,Fs&&(PV=4*Fs.length,ct.addSymbols(ct.icon,Fs,yl,In,Xn,Dr,i.al.vertical,Zt,Jd.lineStartIndex,Jd.lineLength,-1,ks),sq=ct.icon.placedSymbolArray.length-1)}let RV=Object.keys(zn.horizontal);for(let Ui of RV){let La=zn.horizontal[Ui];if(!Hf){qV=Os(La.text);let Fs=ci.layout.get("text-rotate").evaluate(Dr,{},ks);Hf=new pw(Wr,Zt,Hn,hi,fi,La,co,Oa,Kn,Fs)}let Kf=La.positionedLines.length===1;if(MV+=wV(ct,Zt,La,Ra,ci,Kn,Dr,Lo,Jd,zn.vertical?i.al.horizontal:i.al.horizontalOnly,Kf?RV:[Ui],wu,aq,Ds,ks),Kf)break}zn.vertical&&(AV+=wV(ct,Zt,zn.vertical,Ra,ci,Kn,Dr,Lo,Jd,i.al.vertical,["vertical"],wu,sq,Ds,ks));let jqe=Hf?Hf.boxStartIndex:ct.collisionBoxArray.length,Bqe=Hf?Hf.boxEndIndex:ct.collisionBoxArray.length,Uqe=tm?tm.boxStartIndex:ct.collisionBoxArray.length,Vqe=tm?tm.boxEndIndex:ct.collisionBoxArray.length,$qe=em?em.boxStartIndex:ct.collisionBoxArray.length,Gqe=em?em.boxEndIndex:ct.collisionBoxArray.length,Zqe=rm?rm.boxStartIndex:ct.collisionBoxArray.length,Wqe=rm?rm.boxEndIndex:ct.collisionBoxArray.length,Ns=-1,mw=(Ui,La)=>Ui&&Ui.circleDiameter?Math.max(Ui.circleDiameter,La):La;Ns=mw(Hf,Ns),Ns=mw(tm,Ns),Ns=mw(em,Ns),Ns=mw(rm,Ns);let OV=Ns>-1?1:0;OV&&(Ns*=zqe/Fn),ct.glyphOffsetArray.length>=Kd.MAX_GLYPHS&&Dn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Dr.sortKey!==void 0&&ct.addToSortKeyRanges(ct.symbolInstances.length,Dr.sortKey);let Hqe=bV(ci,Dr,ks),[Kqe,Yqe]=function(Ui,La){let Kf=Ui.length,Fs=La==null?void 0:La.values;if((Fs==null?void 0:Fs.length)>0)for(let Yf=0;Yf<Fs.length;Yf+=2){let yl=Fs[Yf+1];Ui.emplaceBack(i.aB[Fs[Yf]],yl[0],yl[1])}return[Kf,Ui.length]}(ct.textAnchorOffsets,Hqe);ct.symbolInstances.emplaceBack(Zt.x,Zt.y,wu.right>=0?wu.right:-1,wu.center>=0?wu.center:-1,wu.left>=0?wu.left:-1,wu.vertical||-1,aq,sq,qV,jqe,Bqe,Uqe,Vqe,$qe,Gqe,Zqe,Wqe,Hn,MV,AV,CV,PV,OV,0,co,Ns,Kqe,Yqe)}(c,pt,mt,u,h,m,Ke,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,ue,[ee,ee,ee,ee],Ve,M,fe,de,Ae,V,s,_,R,L,b)};if(ke==="line")for(let mt of fV(s.geometry,0,0,xt,xt)){let pt=Wf(mt,Fe),ct=Rqe(pt,B,Ce,u.vertical||H,h,24,_e,c.overscaling,xt);for(let Zt of ct)H&&Nqe(c,H.text,We,Zt)||lt(pt,Zt)}else if(ke==="line-center"){for(let mt of s.geometry)if(mt.length>1){let pt=Wf(mt,Fe),ct=qqe(pt,Ce,u.vertical||H,h,24,_e);ct&&lt(pt,ct)}}else if(s.type==="Polygon")for(let mt of md(s.geometry,0)){let pt=Lqe(mt,16);lt(Wf(mt[0],Fe,!0),new jc(pt.x,pt.y,0))}else if(s.type==="LineString")for(let mt of s.geometry){let pt=Wf(mt,Fe);lt(pt,new jc(pt[0].x,pt[0].y,0))}else if(s.type==="Point")for(let mt of s.geometry)for(let pt of mt)lt([pt],new jc(pt.x,pt.y,0))}function wV(c,s,u,h,m,_,b,T,M,R,L,k,j,U,V){let H=function(_e,fe,B,ee,de,Ce,Ve,Ae){let ke=ee.layout.get("text-rotate").evaluate(Ce,{})*Math.PI/180,We=[];for(let $e of fe.positionedLines)for(let Ke of $e.positionedGlyphs){if(!Ke.rect)continue;let Fe=Ke.rect||{},lt=cqe+1,mt=!0,pt=1,ct=0,Zt=(de||Ae)&&Ke.vertical,on=Ke.metrics.advance*Ke.scale/2;if(Ae&&fe.verticalizable&&(ct=$e.lineOffset/2-(Ke.imageName?-(Fn-Ke.metrics.width*Ke.scale)/2:(Ke.scale-1)*Fn)),Ke.imageName){let Yn=Ve[Ke.imageName];mt=Yn.sdf,pt=Yn.pixelRatio,lt=Ro/pt}let zn=de?[Ke.x+on,Ke.y]:[0,0],Si=de?[0,0]:[Ke.x+on+B[0],Ke.y+B[1]-ct],Ra=[0,0];Zt&&(Ra=Si,Si=[0,0]);let Oo=Ke.metrics.isDoubleResolution?2:1,ci=(Ke.metrics.left-lt)*Ke.scale-on+Si[0],Wr=(-Ke.metrics.top-lt)*Ke.scale+Si[1],Hn=ci+Fe.w/Oo*Ke.scale/pt,hi=Wr+Fe.h/Oo*Ke.scale/pt,fi=new q(ci,Wr),co=new q(Hn,Wr),Oa=new q(ci,hi),Kn=new q(Hn,hi);if(Zt){let Yn=new q(-on,on-ow),Xn=-Math.PI/2,In=Fn/2-on,Dr=new q(5-ow-In,-(Ke.imageName?In:0)),Ds=new q(...Ra);fi._rotateAround(Xn,Yn)._add(Dr)._add(Ds),co._rotateAround(Xn,Yn)._add(Dr)._add(Ds),Oa._rotateAround(Xn,Yn)._add(Dr)._add(Ds),Kn._rotateAround(Xn,Yn)._add(Dr)._add(Ds)}if(ke){let Yn=Math.sin(ke),Xn=Math.cos(ke),In=[Xn,-Yn,Yn,Xn];fi._matMult(In),co._matMult(In),Oa._matMult(In),Kn._matMult(In)}let Lo=new q(0,0),jn=new q(0,0);We.push({tl:fi,tr:co,bl:Oa,br:Kn,tex:Fe,writingMode:fe.writingMode,glyphOffset:zn,sectionIndex:Ke.sectionIndex,isSDF:mt,pixelOffsetTL:Lo,pixelOffsetBR:jn,minFontScaleX:0,minFontScaleY:0})}return We}(0,u,T,m,_,b,h,c.allowVerticalPlacement),te=c.textSizeData,ue=null;te.kind==="source"?(ue=[gl*m.layout.get("text-size").evaluate(b,{})],ue[0]>Fc&&Dn(`${c.layerIds[0]}: Value for "text-size" is >= ${Gy}. Reduce your "text-size".`)):te.kind==="composite"&&(ue=[gl*U.compositeTextSizes[0].evaluate(b,{},V),gl*U.compositeTextSizes[1].evaluate(b,{},V)],(ue[0]>Fc||ue[1]>Fc)&&Dn(`${c.layerIds[0]}: Value for "text-size" is >= ${Gy}. Reduce your "text-size".`)),c.addSymbols(c.text,H,ue,T,_,b,R,s,M.lineStartIndex,M.lineLength,j,V);for(let _e of L)k[_e]=c.text.placedSymbolArray.length-1;return 4*H.length}function EV(c){for(let s in c)return c[s];return null}function Nqe(c,s,u,h){let m=c.compareText;if(s in m){let _=m[s];for(let b=_.length-1;b>=0;b--)if(h.dist(_[b])<u)return!0}else m[s]=[];return m[s].push(h),!1}let TV=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class JA{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[u,h]=new Uint8Array(s,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");let m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);let _=TV[15&h];if(!_)throw new Error("Unrecognized array type.");let[b]=new Uint16Array(s,2,1),[T]=new Uint32Array(s,4,1);return new JA(T,b,_,s)}constructor(s,u=64,h=Float64Array,m){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=h,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;let _=TV.indexOf(this.ArrayType),b=2*s*this.ArrayType.BYTES_PER_ELEMENT,T=s*this.IndexArrayType.BYTES_PER_ELEMENT,M=(8-T%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+T+M,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+b+T+M),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+T+M,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=s)}add(s,u){let h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=s,this.coords[this._pos++]=u,h}finish(){let s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return eq(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,u,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:_,coords:b,nodeSize:T}=this,M=[0,_.length-1,0],R=[];for(;M.length;){let L=M.pop()||0,k=M.pop()||0,j=M.pop()||0;if(k-j<=T){for(let te=j;te<=k;te++){let ue=b[2*te],_e=b[2*te+1];ue>=s&&ue<=h&&_e>=u&&_e<=m&&R.push(_[te])}continue}let U=j+k>>1,V=b[2*U],H=b[2*U+1];V>=s&&V<=h&&H>=u&&H<=m&&R.push(_[U]),(L===0?s<=V:u<=H)&&(M.push(j),M.push(U-1),M.push(1-L)),(L===0?h>=V:m>=H)&&(M.push(U+1),M.push(k),M.push(1-L))}return R}within(s,u,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:m,coords:_,nodeSize:b}=this,T=[0,m.length-1,0],M=[],R=h*h;for(;T.length;){let L=T.pop()||0,k=T.pop()||0,j=T.pop()||0;if(k-j<=b){for(let te=j;te<=k;te++)IV(_[2*te],_[2*te+1],s,u)<=R&&M.push(m[te]);continue}let U=j+k>>1,V=_[2*U],H=_[2*U+1];IV(V,H,s,u)<=R&&M.push(m[U]),(L===0?s-h<=V:u-h<=H)&&(T.push(j),T.push(U-1),T.push(1-L)),(L===0?s+h>=V:u+h>=H)&&(T.push(U+1),T.push(k),T.push(1-L))}return M}}function eq(c,s,u,h,m,_){if(m-h<=u)return;let b=h+m>>1;SV(c,s,b,h,m,_),eq(c,s,u,h,b-1,1-_),eq(c,s,u,b+1,m,1-_)}function SV(c,s,u,h,m,_){for(;m>h;){if(m-h>600){let R=m-h+1,L=u-h+1,k=Math.log(R),j=.5*Math.exp(2*k/3),U=.5*Math.sqrt(k*j*(R-j)/R)*(L-R/2<0?-1:1);SV(c,s,u,Math.max(h,Math.floor(u-L*j/R+U)),Math.min(m,Math.floor(u+(R-L)*j/R+U)),_)}let b=s[2*u+_],T=h,M=m;for(Hy(c,s,h,u),s[2*m+_]>b&&Hy(c,s,h,m);T<M;){for(Hy(c,s,T,M),T++,M--;s[2*T+_]<b;)T++;for(;s[2*M+_]>b;)M--}s[2*h+_]===b?Hy(c,s,h,M):(M++,Hy(c,s,M,m)),M<=u&&(h=M+1),u<=M&&(m=M-1)}}function Hy(c,s,u,h){tq(c,u,h),tq(s,2*u,2*h),tq(s,2*u+1,2*h+1)}function tq(c,s,u){let h=c[s];c[s]=c[u],c[u]=h}function IV(c,s,u,h){let m=c-u,_=s-h;return m*m+_*_}var rq;i.co=void 0,(rq=i.co||(i.co={})).create="create",rq.load="load",rq.fullLoad="fullLoad";let dw=null,Ky=[],nq=1e3/60,iq="loadTime",oq="fullLoadTime",Fqe={mark(c){performance.mark(c)},frame(c){let s=c;dw!=null&&Ky.push(s-dw),dw=s},clearMetrics(){dw=null,Ky=[],performance.clearMeasures(iq),performance.clearMeasures(oq);for(let c in i.co)performance.clearMarks(i.co[c])},getPerformanceMetrics(){performance.measure(iq,i.co.create,i.co.load),performance.measure(oq,i.co.create,i.co.fullLoad);let c=performance.getEntriesByName(iq)[0].duration,s=performance.getEntriesByName(oq)[0].duration,u=Ky.length,h=1/(Ky.reduce((_,b)=>_+b,0)/u/1e3),m=Ky.filter(_=>_>nq).reduce((_,b)=>_+(b-nq)/nq,0);return{loadTime:c,fullLoadTime:s,fps:h,percentDroppedFrames:m/(u+m)*100,totalFrames:u}}};i.$=Zy,i.A=ce,i.B=Za,i.C=Or,i.D=ht,i.E=xe,i.F=hA,i.G=function(c){if($a==null){let s=c.navigator?c.navigator.userAgent:null;$a=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return $a},i.H=class{constructor(c,s){this.target=c,this.mapId=s,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Pqe(()=>this.process()),this.subscription=Zo(this.target,"message",u=>this.receive(u),!1),this.globalScope=Io(self)?c:window}registerMessageHandler(c,s){this.messageHandlers[c]=s}sendAsync(c,s){return new Promise((u,h)=>{let m=Math.round(1e18*Math.random()).toString(36).substring(0,10),_=s?Zo(s.signal,"abort",()=>{_==null||_.unsubscribe(),delete this.resolveRejects[m];let M={id:m,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(M)},Mqe):null;this.resolveRejects[m]={resolve:M=>{_==null||_.unsubscribe(),u(M)},reject:M=>{_==null||_.unsubscribe(),h(M)}};let b=[],T=Object.assign(Object.assign({},c),{id:m,sourceMapId:this.mapId,origin:location.origin,data:Lc(c.data,b)});this.target.postMessage(T,{transfer:b})})}receive(c){let s=c.data,u=s.id;if(!(s.origin!=="file://"&&location.origin!=="file://"&&s.origin!=="resource://android"&&location.origin!=="resource://android"&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId)){if(s.type==="<cancel>"){delete this.tasks[u];let h=this.abortControllers[u];return delete this.abortControllers[u],void(h&&h.abort())}if(Io(self)||s.mustQueue)return this.tasks[u]=s,this.taskQueue.push(u),void this.invoker.trigger();this.processTask(u,s)}}process(){if(this.taskQueue.length===0)return;let c=this.taskQueue.shift(),s=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),s&&this.processTask(c,s)}processTask(c,s){return o(this,void 0,void 0,function*(){if(s.type==="<response>"){let m=this.resolveRejects[c];return delete this.resolveRejects[c],m?void(s.error?m.reject(Df(s.error)):m.resolve(Df(s.data))):void 0}if(!this.messageHandlers[s.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${s.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let u=Df(s.data),h=new AbortController;this.abortControllers[c]=h;try{let m=yield this.messageHandlers[s.type](s.sourceMapId,u,h);this.completeTask(c,null,m)}catch(m){this.completeTask(c,m)}})}completeTask(c,s,u){let h=[];delete this.abortControllers[c];let m={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:s?Lc(s):null,data:Lc(u,h)};this.target.postMessage(m,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},i.I=jA,i.J=Ko,i.K=function(){var c=new ce(16);return ce!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},i.L=function(c,s,u){var h,m,_,b,T,M,R,L,k,j,U,V,H=u[0],te=u[1],ue=u[2];return s===c?(c[12]=s[0]*H+s[4]*te+s[8]*ue+s[12],c[13]=s[1]*H+s[5]*te+s[9]*ue+s[13],c[14]=s[2]*H+s[6]*te+s[10]*ue+s[14],c[15]=s[3]*H+s[7]*te+s[11]*ue+s[15]):(m=s[1],_=s[2],b=s[3],T=s[4],M=s[5],R=s[6],L=s[7],k=s[8],j=s[9],U=s[10],V=s[11],c[0]=h=s[0],c[1]=m,c[2]=_,c[3]=b,c[4]=T,c[5]=M,c[6]=R,c[7]=L,c[8]=k,c[9]=j,c[10]=U,c[11]=V,c[12]=h*H+T*te+k*ue+s[12],c[13]=m*H+M*te+j*ue+s[13],c[14]=_*H+R*te+U*ue+s[14],c[15]=b*H+L*te+V*ue+s[15]),c},i.M=function(c,s,u){var h=u[0],m=u[1],_=u[2];return c[0]=s[0]*h,c[1]=s[1]*h,c[2]=s[2]*h,c[3]=s[3]*h,c[4]=s[4]*m,c[5]=s[5]*m,c[6]=s[6]*m,c[7]=s[7]*m,c[8]=s[8]*_,c[9]=s[9]*_,c[10]=s[10]*_,c[11]=s[11]*_,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},i.N=function(c,s,u){var h=s[0],m=s[1],_=s[2],b=s[3],T=s[4],M=s[5],R=s[6],L=s[7],k=s[8],j=s[9],U=s[10],V=s[11],H=s[12],te=s[13],ue=s[14],_e=s[15],fe=u[0],B=u[1],ee=u[2],de=u[3];return c[0]=fe*h+B*T+ee*k+de*H,c[1]=fe*m+B*M+ee*j+de*te,c[2]=fe*_+B*R+ee*U+de*ue,c[3]=fe*b+B*L+ee*V+de*_e,c[4]=(fe=u[4])*h+(B=u[5])*T+(ee=u[6])*k+(de=u[7])*H,c[5]=fe*m+B*M+ee*j+de*te,c[6]=fe*_+B*R+ee*U+de*ue,c[7]=fe*b+B*L+ee*V+de*_e,c[8]=(fe=u[8])*h+(B=u[9])*T+(ee=u[10])*k+(de=u[11])*H,c[9]=fe*m+B*M+ee*j+de*te,c[10]=fe*_+B*R+ee*U+de*ue,c[11]=fe*b+B*L+ee*V+de*_e,c[12]=(fe=u[12])*h+(B=u[13])*T+(ee=u[14])*k+(de=u[15])*H,c[13]=fe*m+B*M+ee*j+de*te,c[14]=fe*_+B*R+ee*U+de*ue,c[15]=fe*b+B*L+ee*V+de*_e,c},i.O=function(c,s){let u={};for(let h=0;h<s.length;h++){let m=s[h];m in c&&(u[m]=c[m])}return u},i.P=q,i.Q=zc,i.R=Aa,i.S=tV,i.T=Z1,i.U=eV,i.V=W,i.W=Q,i.X=al,i.Y=qa,i.Z=xt,i._=o,i.a=Ho,i.a$=function(c,s,u){var h=Math.sin(u),m=Math.cos(u),_=s[4],b=s[5],T=s[6],M=s[7],R=s[8],L=s[9],k=s[10],j=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=_*m+R*h,c[5]=b*m+L*h,c[6]=T*m+k*h,c[7]=M*m+j*h,c[8]=R*m-_*h,c[9]=L*m-b*h,c[10]=k*m-T*h,c[11]=j*m-M*h,c},i.a0=25,i.a1=YA,i.a2=c=>{let s=window.document.createElement("video");return s.muted=!0,new Promise(u=>{s.onloadstart=()=>{u(s)};for(let h of c){let m=window.document.createElement("source");Ee(h)||(s.crossOrigin="Anonymous"),m.src=h,s.appendChild(m)}})},i.a3=De,i.a4=function(){return _i++},i.a5=se,i.a6=Kd,i.a7=qf,i.a8=$f,i.a9=lV,i.aA=function(c,s,u,h,m=!1){if(!u[0]&&!u[1])return[0,0];let _=m?h==="map"?-c.bearingInRadians:0:h==="viewport"?c.bearingInRadians:0;if(_){let b=Math.sin(_),T=Math.cos(_);u=[u[0]*T-u[1]*b,u[0]*b+u[1]*T]}return[m?u[0]:pr(s,u[0],c.zoom),m?u[1]:pr(s,u[1],c.zoom)]},i.aC=VA,i.aD=QA,i.aE=UA,i.aF=JA,i.aG=Vr,i.aH=rw,i.aI=Oe,i.aJ=cr,i.aK=ur,i.aL=Vn,i.aM=Wo,i.aN=nV,i.aO=function(c,s,u){return c[0]=s[0]*u,c[1]=s[1]*u,c[2]=s[2]*u,c},i.aP=function(c,s,u){return c[0]=s[0]+u[0],c[1]=s[1]+u[1],c[2]=s[2]+u[2],c},i.aQ=function(c){var s=new ce(3);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s},i.aR=function(c,s,u){return c[0]=s[0]*u[0],c[1]=s[1]*u[1],c[2]=s[2]*u[2],c[3]=s[3]*u[3],c},i.aS=function(c,s,u){return c[0]=s[0]-u[0],c[1]=s[1]-u[1],c[2]=s[2]-u[2],c},i.aT=function(c,s){var u=s[0],h=s[1],m=s[2],_=u*u+h*h+m*m;return _>0&&(_=1/Math.sqrt(_)),c[0]=s[0]*_,c[1]=s[1]*_,c[2]=s[2]*_,c},i.aU=function(c,s,u){var h=s[0],m=s[1],_=s[2],b=u[0],T=u[1],M=u[2];return c[0]=m*M-_*T,c[1]=_*b-h*M,c[2]=h*T-m*b,c},i.aV=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]},i.aW=oV,i.aX=Yd,i.aY=function(c,s,u,h,m){var _,b=1/Math.tan(s/2);return c[0]=b/u,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=b,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,m!=null&&m!==1/0?(c[10]=(m+h)*(_=1/(h-m)),c[14]=2*m*h*_):(c[10]=-1,c[14]=-2*h),c},i.aZ=function(c){var s=new ce(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},i.a_=function(c,s,u){var h=Math.sin(u),m=Math.cos(u),_=s[0],b=s[1],T=s[2],M=s[3],R=s[4],L=s[5],k=s[6],j=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=_*m+R*h,c[1]=b*m+L*h,c[2]=T*m+k*h,c[3]=M*m+j*h,c[4]=R*m-_*h,c[5]=L*m-b*h,c[6]=k*m-T*h,c[7]=j*m-M*h,c},i.aa=function(c){let s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,h,m,_)=>{let b=m||_;return s[h]=!b||b.toLowerCase(),""}),s["max-age"]){let u=parseInt(s["max-age"],10);isNaN(u)?delete s["max-age"]:s["max-age"]=u}return s},i.ab=Is,i.ac=function(c){return Math.pow(2,c)},i.ad=Le,i.ae=Br,i.af=85.051129,i.ag=rV,i.ah=function(c){return Math.log(c)/Math.LN2},i.ai=function(c){var s=c[0],u=c[1];return s*s+u*u},i.aj=function(c,s){let u=[];for(let h in c)h in s||u.push(h);return u},i.ak=function(c,s){let u=0,h=0;if(c.kind==="constant")h=c.layoutSize;else if(c.kind!=="source"){let{interpolationType:m,minZoom:_,maxZoom:b}=c,T=m?Br(wi.interpolationFactor(m,s,_,b),0,1):0;c.kind==="camera"?h=Za.number(c.minSize,c.maxSize,T):u=T}return{uSizeT:u,uSize:h}},i.am=function(c,{uSize:s,uSizeT:u},{lowerSize:h,upperSize:m}){return c.kind==="source"?h/gl:c.kind==="composite"?Za.number(h/gl,m/gl,u):s},i.an=function(c,s){var u=s[0],h=s[1],m=s[2],_=s[3],b=s[4],T=s[5],M=s[6],R=s[7],L=s[8],k=s[9],j=s[10],U=s[11],V=s[12],H=s[13],te=s[14],ue=s[15],_e=u*T-h*b,fe=u*M-m*b,B=u*R-_*b,ee=h*M-m*T,de=h*R-_*T,Ce=m*R-_*M,Ve=L*H-k*V,Ae=L*te-j*V,ke=L*ue-U*V,We=k*te-j*H,$e=k*ue-U*H,Ke=j*ue-U*te,Fe=_e*Ke-fe*$e+B*We+ee*ke-de*Ae+Ce*Ve;return Fe?(c[0]=(T*Ke-M*$e+R*We)*(Fe=1/Fe),c[1]=(m*$e-h*Ke-_*We)*Fe,c[2]=(H*Ce-te*de+ue*ee)*Fe,c[3]=(j*de-k*Ce-U*ee)*Fe,c[4]=(M*ke-b*Ke-R*Ae)*Fe,c[5]=(u*Ke-m*ke+_*Ae)*Fe,c[6]=(te*B-V*Ce-ue*fe)*Fe,c[7]=(L*Ce-j*B+U*fe)*Fe,c[8]=(b*$e-T*ke+R*Ve)*Fe,c[9]=(h*ke-u*$e-_*Ve)*Fe,c[10]=(V*de-H*B+ue*_e)*Fe,c[11]=(k*B-L*de-U*_e)*Fe,c[12]=(T*Ae-b*We-M*Ve)*Fe,c[13]=(u*We-h*Ae+m*Ve)*Fe,c[14]=(H*fe-V*ee-te*_e)*Fe,c[15]=(L*ee-k*fe+j*_e)*Fe,c):null},i.ao=Ln,i.ap=function(c){return Math.hypot(c[0],c[1])},i.aq=function(c){return c[0]=0,c[1]=0,c},i.ar=function(c,s,u){return c[0]=s[0]*u,c[1]=s[1]*u,c},i.as=$A,i.at=sr,i.au=function(c,s,u,h){let m=s.y-c.y,_=s.x-c.x,b=h.y-u.y,T=h.x-u.x,M=b*_-T*m;if(M===0)return null;let R=(T*(c.y-u.y)-b*(c.x-u.x))/M;return new q(c.x+R*_,c.y+R*m)},i.av=fV,i.aw=X5,i.ax=function(c){let s=1/0,u=1/0,h=-1/0,m=-1/0;for(let _ of c)s=Math.min(s,_.x),u=Math.min(u,_.y),h=Math.max(h,_.x),m=Math.max(m,_.y);return[s,u,h,m]},i.ay=Fn,i.az=pr,i.b=ki,i.b$=class extends G{},i.b0=function(){let c=new Float32Array(16);return Le(c),c},i.b1=function(){let c=new Float64Array(16);return Le(c),c},i.b2=function(){return new Float64Array(16)},i.b3=function(c,s,u){let h=new Float64Array(4);return function(m,_,b,T){var M=.5*Math.PI/180;_*=M,b*=M,T*=M;var R=Math.sin(_),L=Math.cos(_),k=Math.sin(b),j=Math.cos(b),U=Math.sin(T),V=Math.cos(T);m[0]=R*j*V-L*k*U,m[1]=L*k*V+R*j*U,m[2]=L*j*U-R*k*V,m[3]=L*j*V+R*k*U}(h,c,s-90,u),h},i.b4=function(c,s,u,h){var m,_,b,T,M,R=s[0],L=s[1],k=s[2],j=s[3],U=u[0],V=u[1],H=u[2],te=u[3];return(_=R*U+L*V+k*H+j*te)<0&&(_=-_,U=-U,V=-V,H=-H,te=-te),1-_>le?(m=Math.acos(_),b=Math.sin(m),T=Math.sin((1-h)*m)/b,M=Math.sin(h*m)/b):(T=1-h,M=h),c[0]=T*R+M*U,c[1]=T*L+M*V,c[2]=T*k+M*H,c[3]=T*j+M*te,c},i.b5=function(c){let s=new Float64Array(9);var u,h,m,_,b,T,M,R,L,k,j,U,V,H,te,ue,_e,fe;k=(m=(h=c)[0])*(M=m+m),j=(_=h[1])*M,V=(b=h[2])*M,H=b*(R=_+_),ue=(T=h[3])*M,_e=T*R,fe=T*(L=b+b),(u=s)[0]=1-(U=_*R)-(te=b*L),u[3]=j-fe,u[6]=V+_e,u[1]=j+fe,u[4]=1-k-te,u[7]=H-ue,u[2]=V-_e,u[5]=H+ue,u[8]=1-k-U;let B=Wo(-Math.asin(Br(s[2],-1,1))),ee,de;return Math.hypot(s[5],s[8])<.001?(ee=0,de=-Wo(Math.atan2(s[3],s[4]))):(ee=Wo(s[5]===0&&s[8]===0?0:Math.atan2(s[5],s[8])),de=Wo(s[1]===0&&s[0]===0?0:Math.atan2(s[1],s[0]))),{roll:ee,pitch:B+90,bearing:de}},i.b6=function(c,s){return c.roll==s.roll&&c.pitch==s.pitch&&c.bearing==s.bearing},i.b7=Kt,i.b8=Vd,i.b9=Wd,i.bA=function(c){if(c.type==="custom")return new Cqe(c);switch(c.type){case"background":return new Tqe(c);case"circle":return new _Ae(c);case"fill":return new FAe(c);case"fill-extrusion":return new ZAe(c);case"heatmap":return new bAe(c);case"hillshade":return new EAe(c);case"line":return new eqe(c);case"raster":return new Iqe(c);case"symbol":return new uw(c)}},i.bB=ii,i.bC=function(c,s){if(!c)return[{command:"setStyle",args:[s]}];let u=[];try{if(!Se(c.version,s.version))return[{command:"setStyle",args:[s]}];Se(c.center,s.center)||u.push({command:"setCenter",args:[s.center]}),Se(c.state,s.state)||u.push({command:"setGlobalState",args:[s.state]}),Se(c.centerAltitude,s.centerAltitude)||u.push({command:"setCenterAltitude",args:[s.centerAltitude]}),Se(c.zoom,s.zoom)||u.push({command:"setZoom",args:[s.zoom]}),Se(c.bearing,s.bearing)||u.push({command:"setBearing",args:[s.bearing]}),Se(c.pitch,s.pitch)||u.push({command:"setPitch",args:[s.pitch]}),Se(c.roll,s.roll)||u.push({command:"setRoll",args:[s.roll]}),Se(c.sprite,s.sprite)||u.push({command:"setSprite",args:[s.sprite]}),Se(c.glyphs,s.glyphs)||u.push({command:"setGlyphs",args:[s.glyphs]}),Se(c.transition,s.transition)||u.push({command:"setTransition",args:[s.transition]}),Se(c.light,s.light)||u.push({command:"setLight",args:[s.light]}),Se(c.terrain,s.terrain)||u.push({command:"setTerrain",args:[s.terrain]}),Se(c.sky,s.sky)||u.push({command:"setSky",args:[s.sky]}),Se(c.projection,s.projection)||u.push({command:"setProjection",args:[s.projection]});let h={},m=[];(function(b,T,M,R){let L;for(L in T=T||{},b=b||{})Object.prototype.hasOwnProperty.call(b,L)&&(Object.prototype.hasOwnProperty.call(T,L)||Ue(L,M,R));for(L in T)Object.prototype.hasOwnProperty.call(T,L)&&(Object.prototype.hasOwnProperty.call(b,L)?Se(b[L],T[L])||(b[L].type==="geojson"&&T[L].type==="geojson"&&tt(b,T,L)?Me(M,{command:"setGeoJSONSourceData",args:[L,T[L].data]}):Je(L,T,M,R)):Te(L,T,M))})(c.sources,s.sources,m,h);let _=[];c.layers&&c.layers.forEach(b=>{"source"in b&&h[b.source]?u.push({command:"removeLayer",args:[b.id]}):_.push(b)}),u=u.concat(m),function(b,T,M){T=T||[];let R=(b=b||[]).map(qt),L=T.map(qt),k=b.reduce(Tt,{}),j=T.reduce(Tt,{}),U=R.slice(),V=Object.create(null),H,te,ue,_e,fe;for(let B=0,ee=0;B<R.length;B++)H=R[B],Object.prototype.hasOwnProperty.call(j,H)?ee++:(Me(M,{command:"removeLayer",args:[H]}),U.splice(U.indexOf(H,ee),1));for(let B=0,ee=0;B<L.length;B++)H=L[L.length-1-B],U[U.length-1-B]!==H&&(Object.prototype.hasOwnProperty.call(k,H)?(Me(M,{command:"removeLayer",args:[H]}),U.splice(U.lastIndexOf(H,U.length-ee),1)):ee++,_e=U[U.length-B],Me(M,{command:"addLayer",args:[j[H],_e]}),U.splice(U.length-B,0,H),V[H]=!0);for(let B=0;B<L.length;B++)if(H=L[B],te=k[H],ue=j[H],!V[H]&&!Se(te,ue))if(Se(te.source,ue.source)&&Se(te["source-layer"],ue["source-layer"])&&Se(te.type,ue.type)){for(fe in dt(te.layout,ue.layout,M,H,null,"setLayoutProperty"),dt(te.paint,ue.paint,M,H,null,"setPaintProperty"),Se(te.filter,ue.filter)||Me(M,{command:"setFilter",args:[H,ue.filter]}),Se(te.minzoom,ue.minzoom)&&Se(te.maxzoom,ue.maxzoom)||Me(M,{command:"setLayerZoomRange",args:[H,ue.minzoom,ue.maxzoom]}),te)Object.prototype.hasOwnProperty.call(te,fe)&&fe!=="layout"&&fe!=="paint"&&fe!=="filter"&&fe!=="metadata"&&fe!=="minzoom"&&fe!=="maxzoom"&&(fe.indexOf("paint.")===0?dt(te[fe],ue[fe],M,H,fe.slice(6),"setPaintProperty"):Se(te[fe],ue[fe])||Me(M,{command:"setLayerProperty",args:[H,fe,ue[fe]]}));for(fe in ue)Object.prototype.hasOwnProperty.call(ue,fe)&&!Object.prototype.hasOwnProperty.call(te,fe)&&fe!=="layout"&&fe!=="paint"&&fe!=="filter"&&fe!=="metadata"&&fe!=="minzoom"&&fe!=="maxzoom"&&(fe.indexOf("paint.")===0?dt(te[fe],ue[fe],M,H,fe.slice(6),"setPaintProperty"):Se(te[fe],ue[fe])||Me(M,{command:"setLayerProperty",args:[H,fe,ue[fe]]}))}else Me(M,{command:"removeLayer",args:[H]}),_e=U[U.lastIndexOf(H)+1],Me(M,{command:"addLayer",args:[ue,_e]})}(_,s.layers,u)}catch(h){console.warn("Unable to compute style diff:",h),u=[{command:"setStyle",args:[s]}]}return u},i.bD=function(c){let s=[],u=c.id;return u===void 0&&s.push({message:`layers.${u}: missing required property "id"`}),c.render===void 0&&s.push({message:`layers.${u}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&s.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),s},i.bE=function c(s,u){if(Array.isArray(s)){if(!Array.isArray(u)||s.length!==u.length)return!1;for(let h=0;h<s.length;h++)if(!c(s[h],u[h]))return!1;return!0}if(typeof s=="object"&&s!==null&&u!==null){if(typeof u!="object"||Object.keys(s).length!==Object.keys(u).length)return!1;for(let h in s)if(!c(s[h],u[h]))return!1;return!0}return s===u},i.bF=xi,i.bG=wn,i.bH=class extends Lr{constructor(c,s){super(c,s),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},i.bI=X1,i.bJ=class extends Lr{constructor(c,s){super(c,s),this.current=gA}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let s=1;s<16;s++)if(c[s]!==this.current[s]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},i.bK=Y1,i.bL=class extends Lr{constructor(c,s){super(c,s),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},i.bM=class extends Lr{constructor(c,s){super(c,s),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},i.bN=ze,i.bO=function(c,s){var u=Math.sin(s),h=Math.cos(s);return c[0]=h,c[1]=u,c[2]=0,c[3]=-u,c[4]=h,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},i.bP=function(c,s,u){var h=s[0],m=s[1],_=s[2];return c[0]=h*u[0]+m*u[3]+_*u[6],c[1]=h*u[1]+m*u[4]+_*u[7],c[2]=h*u[2]+m*u[5]+_*u[8],c},i.bQ=function(c,s,u,h,m,_,b){var T=1/(s-u),M=1/(h-m),R=1/(_-b);return c[0]=-2*T,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*M,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*R,c[11]=0,c[12]=(s+u)*T,c[13]=(m+h)*M,c[14]=(b+_)*R,c[15]=1,c},i.bR=class extends Lr{constructor(c,s){super(c,s),this.current=new Array}set(c){if(c!=this.current){this.current=c;let s=new Float32Array(4*c.length);for(let u=0;u<c.length;u++)s[4*u]=c[u].r,s[4*u+1]=c[u].g,s[4*u+2]=c[u].b,s[4*u+3]=c[u].a;this.gl.uniform4fv(this.location,s)}}},i.bS=class extends Lr{constructor(c,s){super(c,s),this.current=new Array}set(c){if(c!=this.current){this.current=c;let s=new Float32Array(c);this.gl.uniform1fv(this.location,s)}}},i.bT=class extends y{},i.bU=iqe,i.bV=class extends C{},i.bW=TA,i.bX=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},i.bY=s6,i.bZ=function(c,s,u){var h=s[0],m=s[1],_=s[2],b=u[3]*h+u[7]*m+u[11]*_+u[15];return c[0]=(u[0]*h+u[4]*m+u[8]*_+u[12])/(b=b||1),c[1]=(u[1]*h+u[5]*m+u[9]*_+u[13])/b,c[2]=(u[2]*h+u[6]*m+u[10]*_+u[14])/b,c},i.b_=class extends _u{},i.ba=Fy,i.bb=Zd,i.bc=oo,i.bd=un,i.be=uo,i.bf=function(c,s,u,h,m){return oo(h,m,Br((c-s)/(u-s),0,1))},i.bg=Jt,i.bh=function(){return new Float64Array(3)},i.bi=function(c,s,u,h){return c[0]=s[0]+u[0]*h,c[1]=s[1]+u[1]*h,c[2]=s[2]+u[2]*h,c},i.bj=Wt,i.bk=function(){return new Float64Array(4)},i.bl=function(c,s,u,h){var m=[],_=[];return m[0]=s[0]-u[0],m[1]=s[1]-u[1],m[2]=s[2]-u[2],_[0]=m[0]*Math.cos(h)-m[1]*Math.sin(h),_[1]=m[0]*Math.sin(h)+m[1]*Math.cos(h),_[2]=m[2],c[0]=_[0]+u[0],c[1]=_[1]+u[1],c[2]=_[2]+u[2],c},i.bm=function(c,s,u,h){var m=[],_=[];return m[0]=s[0]-u[0],m[1]=s[1]-u[1],m[2]=s[2]-u[2],_[0]=m[0],_[1]=m[1]*Math.cos(h)-m[2]*Math.sin(h),_[2]=m[1]*Math.sin(h)+m[2]*Math.cos(h),c[0]=_[0]+u[0],c[1]=_[1]+u[1],c[2]=_[2]+u[2],c},i.bn=function(c,s,u,h){var m=[],_=[];return m[0]=s[0]-u[0],m[1]=s[1]-u[1],m[2]=s[2]-u[2],_[0]=m[2]*Math.sin(h)+m[0]*Math.cos(h),_[1]=m[1],_[2]=m[2]*Math.cos(h)-m[0]*Math.sin(h),c[0]=_[0]+u[0],c[1]=_[1]+u[1],c[2]=_[2]+u[2],c},i.bo=et,i.bp=function(c,s,u){var h=Math.sin(u),m=Math.cos(u),_=s[0],b=s[1],T=s[2],M=s[3],R=s[8],L=s[9],k=s[10],j=s[11];return s!==c&&(c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=_*m-R*h,c[1]=b*m-L*h,c[2]=T*m-k*h,c[3]=M*m-j*h,c[8]=_*h+R*m,c[9]=b*h+L*m,c[10]=T*h+k*m,c[11]=M*h+j*m,c},i.bq=function(c,s){let u=Jt(c,360),h=Jt(s,360),m=h-u,_=h>u?m-360:m+360;return Math.abs(m)<Math.abs(_)?m:_},i.br=function(c){return c[0]=0,c[1]=0,c[2]=0,c},i.bs=function(c,s,u,h){let m=Math.sqrt(c*c+s*s),_=Math.sqrt(u*u+h*h);c/=m,s/=m,u/=_,h/=_;let b=Math.acos(c*u+s*h);return-s*u+c*h>0?b:-b},i.bt=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]},i.bu=HA,i.bv=function(c,s){let u=Jt(c,2*Math.PI),h=Jt(s,2*Math.PI);return Math.min(Math.abs(u-h),Math.abs(u-h+2*Math.PI),Math.abs(u-h-2*Math.PI))},i.bw=function(){let c={},s=re.$version;for(let u in re.$root){let h=re.$root[u];if(h.required){let m=null;m=u==="version"?s:h.type==="array"?[]:{},m!=null&&(c[u]=m)}}return c},i.bx=xy,i.by=ai,i.bz=function(c){c=c.slice();let s=Object.create(null);for(let u=0;u<c.length;u++)s[c[u].id]=c[u];for(let u=0;u<c.length;u++)"ref"in c[u]&&(c[u]=we(c[u],s[c[u].ref]));return c},i.c=Ca,i.c0=function(c,s){return c[0]===s[0]&&c[1]===s[1]&&c[2]===s[2]&&c[3]===s[3]&&c[4]===s[4]&&c[5]===s[5]&&c[6]===s[6]&&c[7]===s[7]&&c[8]===s[8]&&c[9]===s[9]&&c[10]===s[10]&&c[11]===s[11]&&c[12]===s[12]&&c[13]===s[13]&&c[14]===s[14]&&c[15]===s[15]},i.c1=function(c,s){var u=c[0],h=c[1],m=c[2],_=c[3],b=c[4],T=c[5],M=c[6],R=c[7],L=c[8],k=c[9],j=c[10],U=c[11],V=c[12],H=c[13],te=c[14],ue=c[15],_e=s[0],fe=s[1],B=s[2],ee=s[3],de=s[4],Ce=s[5],Ve=s[6],Ae=s[7],ke=s[8],We=s[9],$e=s[10],Ke=s[11],Fe=s[12],lt=s[13],mt=s[14],pt=s[15];return Math.abs(u-_e)<=le*Math.max(1,Math.abs(u),Math.abs(_e))&&Math.abs(h-fe)<=le*Math.max(1,Math.abs(h),Math.abs(fe))&&Math.abs(m-B)<=le*Math.max(1,Math.abs(m),Math.abs(B))&&Math.abs(_-ee)<=le*Math.max(1,Math.abs(_),Math.abs(ee))&&Math.abs(b-de)<=le*Math.max(1,Math.abs(b),Math.abs(de))&&Math.abs(T-Ce)<=le*Math.max(1,Math.abs(T),Math.abs(Ce))&&Math.abs(M-Ve)<=le*Math.max(1,Math.abs(M),Math.abs(Ve))&&Math.abs(R-Ae)<=le*Math.max(1,Math.abs(R),Math.abs(Ae))&&Math.abs(L-ke)<=le*Math.max(1,Math.abs(L),Math.abs(ke))&&Math.abs(k-We)<=le*Math.max(1,Math.abs(k),Math.abs(We))&&Math.abs(j-$e)<=le*Math.max(1,Math.abs(j),Math.abs($e))&&Math.abs(U-Ke)<=le*Math.max(1,Math.abs(U),Math.abs(Ke))&&Math.abs(V-Fe)<=le*Math.max(1,Math.abs(V),Math.abs(Fe))&&Math.abs(H-lt)<=le*Math.max(1,Math.abs(H),Math.abs(lt))&&Math.abs(te-mt)<=le*Math.max(1,Math.abs(te),Math.abs(mt))&&Math.abs(ue-pt)<=le*Math.max(1,Math.abs(ue),Math.abs(pt))},i.c2=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},i.c3=c=>c.type==="symbol",i.c4=c=>c.type==="circle",i.c5=c=>c.type==="heatmap",i.c6=c=>c.type==="line",i.c7=c=>c.type==="fill",i.c8=c=>c.type==="fill-extrusion",i.c9=c=>c.type==="hillshade",i.cA=MA,i.cB=LA,i.cC=jy,i.cD=FA,i.cE=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},i.cF=function(c,s,u,h,m){return o(this,void 0,void 0,function*(){if(Q())try{return yield al(c,s,u,h,m)}catch(_){}return function(_,b,T,M,R){let L=_.width,k=_.height;oi&&Co||(oi=new OffscreenCanvas(L,k),Co=oi.getContext("2d",{willReadFrequently:!0})),oi.width=L,oi.height=k,Co.drawImage(_,0,0,L,k);let j=Co.getImageData(b,T,M,R);return Co.clearRect(0,0,L,k),j.data}(c,s,u,h,m)})},i.cG=aV,i.cH=f,i.cI=E,i.cJ=T6,i.cK=k6,i.cL=Pd,i.cM=Rs,i.ca=c=>c.type==="raster",i.cb=c=>c.type==="background",i.cc=c=>c.type==="custom",i.cd=Ia,i.ce=function(c,s,u){let h=Cr(s.x-u.x,s.y-u.y),m=Cr(c.x-u.x,c.y-u.y);var _,b;return Wo(Math.atan2(h[0]*m[1]-h[1]*m[0],(_=h)[0]*(b=m)[0]+_[1]*b[1]))},i.cf=Un,i.cg=function(c,s){return Cs[s]&&(c instanceof MouseEvent||c instanceof WheelEvent)},i.ch=function(c,s){return sl[s]&&"touches"in c},i.ci=function(c){return sl[c]||Cs[c]},i.cj=function(c,s,u){var h=s[0],m=s[1];return c[0]=u[0]*h+u[4]*m+u[12],c[1]=u[1]*h+u[5]*m+u[13],c},i.ck=function(c,s){let{x:u,y:h}=Zy.fromLngLat(s);return!(c<0||c>25||h<0||h>=1||u<0||u>=1)},i.cl=function(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},i.cm=class extends jf{},i.cn=Fqe,i.cp=function(c){return c.message===Ps},i.cq=$n,i.cr=function(c,s){Ho.REGISTERED_PROTOCOLS[c]=s},i.cs=function(c){delete Ho.REGISTERED_PROTOCOLS[c]},i.ct=function(c,s){let u={};for(let m=0;m<c.length;m++){let _=s&&s[c[m].id]||D1(c[m]);s&&(s[c[m].id]=_);let b=u[_];b||(b=u[_]=[]),b.push(c[m])}let h=[];for(let m in u)h.push(u[m]);return h},i.cu=st,i.cv=sV,i.cw=uV,i.cx=F6,i.cy=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=xt/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;let s=c.bucket.layers[0],u=s.layout,h=s._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new Or(c.bucket.zoom+1),c.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Or(c.bucket.zoom+1),c.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Or(18))};if(c.bucket.textSizeData.kind==="composite"){let{minZoom:R,maxZoom:L}=c.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Or(R),c.canonical),h["text-size"].possiblyEvaluate(new Or(L),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){let{minZoom:R,maxZoom:L}=c.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Or(R),c.canonical),h["icon-size"].possiblyEvaluate(new Or(L),c.canonical)]}let _=u.get("text-line-height")*Fn,b=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",T=u.get("text-keep-upright"),M=u.get("text-size");for(let R of c.bucket.features){let L=u.get("text-font").evaluate(R,{},c.canonical).join(","),k=M.evaluate(R,{},c.canonical),j=m.layoutTextSize.evaluate(R,{},c.canonical),U=m.layoutIconSize.evaluate(R,{},c.canonical),V={horizontal:{},vertical:void 0},H=R.text,te,ue=[0,0];if(H){let B=H.toString(),ee=u.get("text-letter-spacing").evaluate(R,{},c.canonical)*Fn,de=fA(B)?ee:0,Ce=u.get("text-anchor").evaluate(R,{},c.canonical),Ve=bV(s,R,c.canonical);if(!Ve){let $e=u.get("text-radial-offset").evaluate(R,{},c.canonical);ue=$e?xV(Ce,[$e*Fn,XA]):u.get("text-offset").evaluate(R,{},c.canonical).map(Ke=>Ke*Fn)}let Ae=b?"center":u.get("text-justify").evaluate(R,{},c.canonical),ke=u.get("symbol-placement")==="point"?u.get("text-max-width").evaluate(R,{},c.canonical)*Fn:1/0,We=()=>{c.bucket.allowVerticalPlacement&&zd(B)&&(V.vertical=aw(H,c.glyphMap,c.glyphPositions,c.imagePositions,L,ke,_,Ce,"left",de,ue,i.al.vertical,!0,j,k))};if(!b&&Ve){let $e=new Set;if(Ae==="auto")for(let Fe=0;Fe<Ve.values.length;Fe+=2)$e.add(QA(Ve.values[Fe]));else $e.add(Ae);let Ke=!1;for(let Fe of $e)if(!V.horizontal[Fe])if(Ke)V.horizontal[Fe]=V.horizontal[0];else{let lt=aw(H,c.glyphMap,c.glyphPositions,c.imagePositions,L,ke,_,"center",Fe,de,ue,i.al.horizontal,!1,j,k);lt&&(V.horizontal[Fe]=lt,Ke=lt.positionedLines.length===1)}We()}else{Ae==="auto"&&(Ae=QA(Ce));let $e=aw(H,c.glyphMap,c.glyphPositions,c.imagePositions,L,ke,_,Ce,Ae,de,ue,i.al.horizontal,!1,j,k);$e&&(V.horizontal[Ae]=$e),We(),zd(B)&&b&&T&&(V.vertical=aw(H,c.glyphMap,c.glyphPositions,c.imagePositions,L,ke,_,Ce,Ae,de,ue,i.al.vertical,!1,j,k))}}let _e=!1;if(R.icon&&R.icon.name){let B=c.imageMap[R.icon.name];B&&(te=_qe(c.imagePositions[R.icon.name],u.get("icon-offset").evaluate(R,{},c.canonical),u.get("icon-anchor").evaluate(R,{},c.canonical)),_e=!!B.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=_e:c.bucket.sdfIcons!==_e&&Dn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(B.pixelRatio!==c.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}let fe=EV(V.horizontal)||V.vertical;c.bucket.iconsInText=!!fe&&fe.iconsInText,(fe||te)&&kqe(c.bucket,R,V,te,c.imageMap,m,j,U,ue,_e,c.canonical,c.subdivisionGranularity)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},i.cz=DA,i.d=Ee,i.e=zt,i.f=c=>o(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));let s=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(s)}catch(u){throw new Error(`Could not load image because of ${u.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),i.g=Ga,i.h=c=>new Promise((s,u)=>{let h=new Image;h.onload=()=>{s(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=ol})},h.onerror=()=>u(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let m=new Blob([new Uint8Array(c)],{type:"image/png"});h.src=c.byteLength?URL.createObjectURL(m):ol}),i.i=Io,i.j=(c,s)=>ao(zt(c,{type:"json"}),s),i.k=pe,i.l=ie,i.m=ao,i.n=(c,s)=>ao(zt(c,{type:"arrayBuffer"}),s),i.o=function(c){return new FA(c).readFields(sqe,[])},i.p=N6,i.q=Oy,i.r=En,i.s=Zo,i.t=Dd,i.u=$t,i.v=re,i.w=Dn,i.x=_y,i.y=Rc,i.z=function([c,s,u]){return s+=90,s*=Math.PI/180,u*=Math.PI/180,{x:c*Math.cos(s)*Math.sin(u),y:c*Math.sin(s)*Math.sin(u),z:c*Math.cos(u)}}}),r("worker",["./shared"],function(i){"use strict";class o{constructor(X){this.keyCache={},X&&this.replace(X)}replace(X){this._layerConfigs={},this._layers={},this.update(X,[])}update(X,Y){for(let pe of X){this._layerConfigs[pe.id]=pe;let xe=this._layers[pe.id]=i.bA(pe);xe._featureFilter=i.a7(xe.filter),this.keyCache[pe.id]&&delete this.keyCache[pe.id]}for(let pe of Y)delete this.keyCache[pe],delete this._layerConfigs[pe],delete this._layers[pe];this.familiesBySource={};let ie=i.ct(Object.values(this._layerConfigs),this.keyCache);for(let pe of ie){let xe=pe.map(Te=>this._layers[Te.id]),re=xe[0];if(re.visibility==="none")continue;let Pe=re.source||"",we=this.familiesBySource[Pe];we||(we=this.familiesBySource[Pe]={});let Se=re.sourceLayer||"_geojsonTileLayer",Me=we[Se];Me||(Me=we[Se]=[]),Me.push(xe)}}}class f{constructor(X){let Y={},ie=[];for(let Pe in X){let we=X[Pe],Se=Y[Pe]={};for(let Me in we){let Te=we[+Me];if(!Te||Te.bitmap.width===0||Te.bitmap.height===0)continue;let Ue={x:0,y:0,w:Te.bitmap.width+2,h:Te.bitmap.height+2};ie.push(Ue),Se[Me]={rect:Ue,metrics:Te.metrics}}}let{w:pe,h:xe}=i.p(ie),re=new i.q({width:pe||1,height:xe||1});for(let Pe in X){let we=X[Pe];for(let Se in we){let Me=we[+Se];if(!Me||Me.bitmap.width===0||Me.bitmap.height===0)continue;let Te=Y[Pe][Se].rect;i.q.copy(Me.bitmap,re,{x:0,y:0},{x:Te.x+1,y:Te.y+1},Me.bitmap)}}this.image=re,this.positions=Y}}i.cu("GlyphAtlas",f);class v{constructor(X){this.tileID=new i.Y(X.tileID.overscaledZ,X.tileID.wrap,X.tileID.canonical.z,X.tileID.canonical.x,X.tileID.canonical.y),this.uid=X.uid,this.zoom=X.zoom,this.pixelRatio=X.pixelRatio,this.tileSize=X.tileSize,this.source=X.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=X.showCollisionBoxes,this.collectResourceTiming=!!X.collectResourceTiming,this.returnDependencies=!!X.returnDependencies,this.promoteId=X.promoteId,this.inFlightDependencies=[]}parse(X,Y,ie,pe,xe){return i._(this,void 0,void 0,function*(){this.status="parsing",this.data=X,this.collisionBoxArray=new i.a5;let re=new i.cv(Object.keys(X.layers).sort()),Pe=new i.cw(this.tileID,this.promoteId);Pe.bucketLayerIDs=[];let we={},Se={featureIndex:Pe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ie,subdivisionGranularity:xe},Me=Y.familiesBySource[this.source];for(let Et in Me){let je=X.layers[Et];if(!je)continue;je.version===1&&i.w(`Vector tile source "${this.source}" layer "${Et}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let yt=re.encode(Et),Rt=[];for(let en=0;en<je.length;en++){let tn=je.feature(en),so=Pe.getId(tn,Et);Rt.push({feature:tn,id:so,index:en,sourceLayerIndex:yt})}for(let en of Me[Et]){let tn=en[0];tn.source!==this.source&&i.w(`layer.source = ${tn.source} does not equal this.source = ${this.source}`),tn.minzoom&&this.zoom<Math.floor(tn.minzoom)||tn.maxzoom&&this.zoom>=tn.maxzoom||tn.visibility!=="none"&&(x(en,this.zoom,ie),(we[tn.id]=tn.createBucket({index:Pe.bucketLayerIDs.length,layers:en,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:yt,sourceID:this.source})).populate(Rt,Se,this.tileID.canonical),Pe.bucketLayerIDs.push(en.map(so=>so.id)))}}let Te=i.bF(Se.glyphDependencies,Et=>Object.keys(Et).map(Number));this.inFlightDependencies.forEach(Et=>Et==null?void 0:Et.abort()),this.inFlightDependencies=[];let Ue=Promise.resolve({});if(Object.keys(Te).length){let Et=new AbortController;this.inFlightDependencies.push(Et),Ue=pe.sendAsync({type:"GG",data:{stacks:Te,source:this.source,tileID:this.tileID,type:"glyphs"}},Et)}let Je=Object.keys(Se.iconDependencies),tt=Promise.resolve({});if(Je.length){let Et=new AbortController;this.inFlightDependencies.push(Et),tt=pe.sendAsync({type:"GI",data:{icons:Je,source:this.source,tileID:this.tileID,type:"icons"}},Et)}let dt=Object.keys(Se.patternDependencies),qt=Promise.resolve({});if(dt.length){let Et=new AbortController;this.inFlightDependencies.push(Et),qt=pe.sendAsync({type:"GI",data:{icons:dt,source:this.source,tileID:this.tileID,type:"patterns"}},Et)}let[Tt,De,dr]=yield Promise.all([Ue,tt,qt]),Ht=new f(Tt),lr=new i.cx(De,dr);for(let Et in we){let je=we[Et];je instanceof i.a6?(x(je.layers,this.zoom,ie),i.cy({bucket:je,glyphMap:Tt,glyphPositions:Ht.positions,imageMap:De,imagePositions:lr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Se.subdivisionGranularity})):je.hasPattern&&(je instanceof i.cz||je instanceof i.cA||je instanceof i.cB)&&(x(je.layers,this.zoom,ie),je.addFeatures(Se,this.tileID.canonical,lr.patternPositions))}return this.status="done",{buckets:Object.values(we).filter(Et=>!Et.isEmpty()),featureIndex:Pe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ht.image,imageAtlas:lr,glyphMap:this.returnDependencies?Tt:null,iconMap:this.returnDependencies?De:null,glyphPositions:this.returnDependencies?Ht.positions:null}})}}function x(Ee,X,Y){let ie=new i.C(X);for(let pe of Ee)pe.recalculate(ie,Y)}class E{constructor(X,Y,ie){this.actor=X,this.layerIndex=Y,this.availableImages=ie,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(X,Y){return i._(this,void 0,void 0,function*(){let ie=yield i.n(X.request,Y);try{return{vectorTile:new i.cC.VectorTile(new i.cD(ie.data)),rawData:ie.data,cacheControl:ie.cacheControl,expires:ie.expires}}catch(pe){let xe=new Uint8Array(ie.data),re=`Unable to parse the tile at ${X.request.url}, `;throw re+=xe[0]===31&&xe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${pe.message}`,new Error(re)}})}loadTile(X){return i._(this,void 0,void 0,function*(){let Y=X.uid,ie=!!(X&&X.request&&X.request.collectResourceTiming)&&new i.cE(X.request),pe=new v(X);this.loading[Y]=pe;let xe=new AbortController;pe.abort=xe;try{let re=yield this.loadVectorTile(X,xe);if(delete this.loading[Y],!re)return null;let Pe=re.rawData,we={};re.expires&&(we.expires=re.expires),re.cacheControl&&(we.cacheControl=re.cacheControl);let Se={};if(ie){let Te=ie.finish();Te&&(Se.resourceTiming=JSON.parse(JSON.stringify(Te)))}pe.vectorTile=re.vectorTile;let Me=pe.parse(re.vectorTile,this.layerIndex,this.availableImages,this.actor,X.subdivisionGranularity);this.loaded[Y]=pe,this.fetching[Y]={rawTileData:Pe,cacheControl:we,resourceTiming:Se};try{let Te=yield Me;return i.e({rawTileData:Pe.slice(0)},Te,we,Se)}finally{delete this.fetching[Y]}}catch(re){throw delete this.loading[Y],pe.status="done",this.loaded[Y]=pe,re}})}reloadTile(X){return i._(this,void 0,void 0,function*(){let Y=X.uid;if(!this.loaded||!this.loaded[Y])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let ie=this.loaded[Y];if(ie.showCollisionBoxes=X.showCollisionBoxes,ie.status==="parsing"){let pe=yield ie.parse(ie.vectorTile,this.layerIndex,this.availableImages,this.actor,X.subdivisionGranularity),xe;if(this.fetching[Y]){let{rawTileData:re,cacheControl:Pe,resourceTiming:we}=this.fetching[Y];delete this.fetching[Y],xe=i.e({rawTileData:re.slice(0)},pe,Pe,we)}else xe=pe;return xe}if(ie.status==="done"&&ie.vectorTile)return ie.parse(ie.vectorTile,this.layerIndex,this.availableImages,this.actor,X.subdivisionGranularity)})}abortTile(X){return i._(this,void 0,void 0,function*(){let Y=this.loading,ie=X.uid;Y&&Y[ie]&&Y[ie].abort&&(Y[ie].abort.abort(),delete Y[ie])})}removeTile(X){return i._(this,void 0,void 0,function*(){this.loaded&&this.loaded[X.uid]&&delete this.loaded[X.uid]})}}class S{constructor(){this.loaded={}}loadTile(X){return i._(this,void 0,void 0,function*(){let{uid:Y,encoding:ie,rawImageData:pe,redFactor:xe,greenFactor:re,blueFactor:Pe,baseShift:we}=X,Se=pe.width+2,Me=pe.height+2,Te=i.b(pe)?new i.R({width:Se,height:Me},yield i.cF(pe,-1,-1,Se,Me)):pe,Ue=new i.cG(Y,Te,ie,xe,re,Pe,we);return this.loaded=this.loaded||{},this.loaded[Y]=Ue,Ue})}removeTile(X){let Y=this.loaded,ie=X.uid;Y&&Y[ie]&&delete Y[ie]}}var P,q,F=function(){if(q)return P;function Ee(Y,ie){if(Y.length!==0){X(Y[0],ie);for(var pe=1;pe<Y.length;pe++)X(Y[pe],!ie)}}function X(Y,ie){for(var pe=0,xe=0,re=0,Pe=Y.length,we=Pe-1;re<Pe;we=re++){var Se=(Y[re][0]-Y[we][0])*(Y[we][1]+Y[re][1]),Me=pe+Se;xe+=Math.abs(pe)>=Math.abs(Se)?pe-Me+Se:Se-Me+pe,pe=Me}pe+xe>=0!=!!ie&&Y.reverse()}return q=1,P=function Y(ie,pe){var xe,re=ie&&ie.type;if(re==="FeatureCollection")for(xe=0;xe<ie.features.length;xe++)Y(ie.features[xe],pe);else if(re==="GeometryCollection")for(xe=0;xe<ie.geometries.length;xe++)Y(ie.geometries[xe],pe);else if(re==="Feature")Y(ie.geometry,pe);else if(re==="Polygon")Ee(ie.coordinates,pe);else if(re==="MultiPolygon")for(xe=0;xe<ie.coordinates.length;xe++)Ee(ie.coordinates[xe],pe);return ie}}(),K=i.cH(F);let ne=i.cC.VectorTileFeature.prototype.toGeoJSON;class Z{constructor(X){this._feature=X,this.extent=i.Z,this.type=X.type,this.properties=X.tags,"id"in X&&!isNaN(X.id)&&(this.id=parseInt(X.id,10))}loadGeometry(){if(this._feature.type===1){let X=[];for(let Y of this._feature.geometry)X.push([new i.P(Y[0],Y[1])]);return X}{let X=[];for(let Y of this._feature.geometry){let ie=[];for(let pe of Y)ie.push(new i.P(pe[0],pe[1]));X.push(ie)}return X}}toGeoJSON(X,Y,ie){return ne.call(this,X,Y,ie)}}class W{constructor(X){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.Z,this.length=X.length,this._features=X}feature(X){return new Z(this._features[X])}}var Q,le,ce,ze={exports:{}},Le=function(){if(ce)return ze.exports;ce=1;var Ee=i.cK(),X=function(){if(le)return Q;le=1;var Me=i.cI(),Te=i.cJ().VectorTileFeature;function Ue(tt,dt){this.options=dt||{},this.features=tt,this.length=tt.length}function Je(tt,dt){this.id=typeof tt.id=="number"?tt.id:void 0,this.type=tt.type,this.rawGeometry=tt.type===1?[tt.geometry]:tt.geometry,this.properties=tt.tags,this.extent=dt||4096}return Q=Ue,Ue.prototype.feature=function(tt){return new Je(this.features[tt],this.options.extent)},Je.prototype.loadGeometry=function(){var tt=this.rawGeometry;this.geometry=[];for(var dt=0;dt<tt.length;dt++){for(var qt=tt[dt],Tt=[],De=0;De<qt.length;De++)Tt.push(new Me(qt[De][0],qt[De][1]));this.geometry.push(Tt)}return this.geometry},Je.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var tt=this.geometry,dt=1/0,qt=-1/0,Tt=1/0,De=-1/0,dr=0;dr<tt.length;dr++)for(var Ht=tt[dr],lr=0;lr<Ht.length;lr++){var Et=Ht[lr];dt=Math.min(dt,Et.x),qt=Math.max(qt,Et.x),Tt=Math.min(Tt,Et.y),De=Math.max(De,Et.y)}return[dt,Tt,qt,De]},Je.prototype.toGeoJSON=Te.prototype.toGeoJSON,Q}();function Y(Me){var Te=new Ee;return function(Ue,Je){for(var tt in Ue.layers)Je.writeMessage(3,ie,Ue.layers[tt])}(Me,Te),Te.finish()}function ie(Me,Te){var Ue;Te.writeVarintField(15,Me.version||1),Te.writeStringField(1,Me.name||""),Te.writeVarintField(5,Me.extent||4096);var Je={keys:[],values:[],keycache:{},valuecache:{}};for(Ue=0;Ue<Me.length;Ue++)Je.feature=Me.feature(Ue),Te.writeMessage(2,pe,Je);var tt=Je.keys;for(Ue=0;Ue<tt.length;Ue++)Te.writeStringField(3,tt[Ue]);var dt=Je.values;for(Ue=0;Ue<dt.length;Ue++)Te.writeMessage(4,Se,dt[Ue])}function pe(Me,Te){var Ue=Me.feature;Ue.id!==void 0&&Te.writeVarintField(1,Ue.id),Te.writeMessage(2,xe,Me),Te.writeVarintField(3,Ue.type),Te.writeMessage(4,we,Ue)}function xe(Me,Te){var Ue=Me.feature,Je=Me.keys,tt=Me.values,dt=Me.keycache,qt=Me.valuecache;for(var Tt in Ue.properties){var De=Ue.properties[Tt],dr=dt[Tt];if(De!==null){dr===void 0&&(Je.push(Tt),dt[Tt]=dr=Je.length-1),Te.writeVarint(dr);var Ht=typeof De;Ht!=="string"&&Ht!=="boolean"&&Ht!=="number"&&(De=JSON.stringify(De));var lr=Ht+":"+De,Et=qt[lr];Et===void 0&&(tt.push(De),qt[lr]=Et=tt.length-1),Te.writeVarint(Et)}}}function re(Me,Te){return(Te<<3)+(7&Me)}function Pe(Me){return Me<<1^Me>>31}function we(Me,Te){for(var Ue=Me.loadGeometry(),Je=Me.type,tt=0,dt=0,qt=Ue.length,Tt=0;Tt<qt;Tt++){var De=Ue[Tt],dr=1;Je===1&&(dr=De.length),Te.writeVarint(re(1,dr));for(var Ht=Je===3?De.length-1:De.length,lr=0;lr<Ht;lr++){lr===1&&Je!==1&&Te.writeVarint(re(2,Ht-1));var Et=De[lr].x-tt,je=De[lr].y-dt;Te.writeVarint(Pe(Et)),Te.writeVarint(Pe(je)),tt+=Et,dt+=je}Je===3&&Te.writeVarint(re(7,1))}}function Se(Me,Te){var Ue=typeof Me;Ue==="string"?Te.writeStringField(1,Me):Ue==="boolean"?Te.writeBooleanField(7,Me):Ue==="number"&&(Me%1!=0?Te.writeDoubleField(3,Me):Me<0?Te.writeSVarintField(6,Me):Te.writeVarintField(5,Me))}return ze.exports=Y,ze.exports.fromVectorTileJs=Y,ze.exports.fromGeojsonVt=function(Me,Te){Te=Te||{};var Ue={};for(var Je in Me)Ue[Je]=new X(Me[Je].features,Te),Ue[Je].name=Je,Ue[Je].version=Te.version,Ue[Je].extent=Te.extent;return Y({layers:Ue})},ze.exports.GeoJSONWrapper=X,ze.exports}(),Be=i.cH(Le);let et={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ee=>Ee},ot=Math.fround||(Ot=new Float32Array(1),Ee=>(Ot[0]=+Ee,Ot[0]));var Ot;let Wt=3,sr=5,On=6;class Ln{constructor(X){this.options=Object.assign(Object.create(et),X),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(X){let{log:Y,minZoom:ie,maxZoom:pe}=this.options;Y&&console.time("total time");let xe=`prepare ${X.length} points`;Y&&console.time(xe),this.points=X;let re=[];for(let we=0;we<X.length;we++){let Se=X[we];if(!Se.geometry)continue;let[Me,Te]=Se.geometry.coordinates,Ue=ot(pr(Me)),Je=ot(Jt(Te));re.push(Ue,Je,1/0,we,-1,1),this.options.reduce&&re.push(0)}let Pe=this.trees[pe+1]=this._createTree(re);Y&&console.timeEnd(xe);for(let we=pe;we>=ie;we--){let Se=+Date.now();Pe=this.trees[we]=this._createTree(this._cluster(Pe,we)),Y&&console.log("z%d: %d clusters in %dms",we,Pe.numItems,+Date.now()-Se)}return Y&&console.timeEnd("total time"),this}getClusters(X,Y){let ie=((X[0]+180)%360+360)%360-180,pe=Math.max(-90,Math.min(90,X[1])),xe=X[2]===180?180:((X[2]+180)%360+360)%360-180,re=Math.max(-90,Math.min(90,X[3]));if(X[2]-X[0]>=360)ie=-180,xe=180;else if(ie>xe){let Te=this.getClusters([ie,pe,180,re],Y),Ue=this.getClusters([-180,pe,xe,re],Y);return Te.concat(Ue)}let Pe=this.trees[this._limitZoom(Y)],we=Pe.range(pr(ie),Jt(re),pr(xe),Jt(pe)),Se=Pe.data,Me=[];for(let Te of we){let Ue=this.stride*Te;Me.push(Se[Ue+sr]>1?Cr(Se,Ue,this.clusterProps):this.points[Se[Ue+Wt]])}return Me}getChildren(X){let Y=this._getOriginId(X),ie=this._getOriginZoom(X),pe="No cluster with the specified id.",xe=this.trees[ie];if(!xe)throw new Error(pe);let re=xe.data;if(Y*this.stride>=re.length)throw new Error(pe);let Pe=this.options.radius/(this.options.extent*Math.pow(2,ie-1)),we=xe.within(re[Y*this.stride],re[Y*this.stride+1],Pe),Se=[];for(let Me of we){let Te=Me*this.stride;re[Te+4]===X&&Se.push(re[Te+sr]>1?Cr(re,Te,this.clusterProps):this.points[re[Te+Wt]])}if(Se.length===0)throw new Error(pe);return Se}getLeaves(X,Y,ie){let pe=[];return this._appendLeaves(pe,X,Y=Y||10,ie=ie||0,0),pe}getTile(X,Y,ie){let pe=this.trees[this._limitZoom(X)],xe=Math.pow(2,X),{extent:re,radius:Pe}=this.options,we=Pe/re,Se=(ie-we)/xe,Me=(ie+1+we)/xe,Te={features:[]};return this._addTileFeatures(pe.range((Y-we)/xe,Se,(Y+1+we)/xe,Me),pe.data,Y,ie,xe,Te),Y===0&&this._addTileFeatures(pe.range(1-we/xe,Se,1,Me),pe.data,xe,ie,xe,Te),Y===xe-1&&this._addTileFeatures(pe.range(0,Se,we/xe,Me),pe.data,-1,ie,xe,Te),Te.features.length?Te:null}getClusterExpansionZoom(X){let Y=this._getOriginZoom(X)-1;for(;Y<=this.options.maxZoom;){let ie=this.getChildren(X);if(Y++,ie.length!==1)break;X=ie[0].properties.cluster_id}return Y}_appendLeaves(X,Y,ie,pe,xe){let re=this.getChildren(Y);for(let Pe of re){let we=Pe.properties;if(we&&we.cluster?xe+we.point_count<=pe?xe+=we.point_count:xe=this._appendLeaves(X,we.cluster_id,ie,pe,xe):xe<pe?xe++:X.push(Pe),X.length===ie)break}return xe}_createTree(X){let Y=new i.aF(X.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ie=0;ie<X.length;ie+=this.stride)Y.add(X[ie],X[ie+1]);return Y.finish(),Y.data=X,Y}_addTileFeatures(X,Y,ie,pe,xe,re){for(let Pe of X){let we=Pe*this.stride,Se=Y[we+sr]>1,Me,Te,Ue;if(Se)Me=xt(Y,we,this.clusterProps),Te=Y[we],Ue=Y[we+1];else{let dt=this.points[Y[we+Wt]];Me=dt.properties;let[qt,Tt]=dt.geometry.coordinates;Te=pr(qt),Ue=Jt(Tt)}let Je={type:1,geometry:[[Math.round(this.options.extent*(Te*xe-ie)),Math.round(this.options.extent*(Ue*xe-pe))]],tags:Me},tt;tt=Se||this.options.generateId?Y[we+Wt]:this.points[Y[we+Wt]].id,tt!==void 0&&(Je.id=tt),re.features.push(Je)}}_limitZoom(X){return Math.max(this.options.minZoom,Math.min(Math.floor(+X),this.options.maxZoom+1))}_cluster(X,Y){let{radius:ie,extent:pe,reduce:xe,minPoints:re}=this.options,Pe=ie/(pe*Math.pow(2,Y)),we=X.data,Se=[],Me=this.stride;for(let Te=0;Te<we.length;Te+=Me){if(we[Te+2]<=Y)continue;we[Te+2]=Y;let Ue=we[Te],Je=we[Te+1],tt=X.within(we[Te],we[Te+1],Pe),dt=we[Te+sr],qt=dt;for(let Tt of tt){let De=Tt*Me;we[De+2]>Y&&(qt+=we[De+sr])}if(qt>dt&&qt>=re){let Tt,De=Ue*dt,dr=Je*dt,Ht=-1,lr=((Te/Me|0)<<5)+(Y+1)+this.points.length;for(let Et of tt){let je=Et*Me;if(we[je+2]<=Y)continue;we[je+2]=Y;let yt=we[je+sr];De+=we[je]*yt,dr+=we[je+1]*yt,we[je+4]=lr,xe&&(Tt||(Tt=this._map(we,Te,!0),Ht=this.clusterProps.length,this.clusterProps.push(Tt)),xe(Tt,this._map(we,je)))}we[Te+4]=lr,Se.push(De/qt,dr/qt,1/0,lr,-1,qt),xe&&Se.push(Ht)}else{for(let Tt=0;Tt<Me;Tt++)Se.push(we[Te+Tt]);if(qt>1)for(let Tt of tt){let De=Tt*Me;if(!(we[De+2]<=Y)){we[De+2]=Y;for(let dr=0;dr<Me;dr++)Se.push(we[De+dr])}}}}return Se}_getOriginId(X){return X-this.points.length>>5}_getOriginZoom(X){return(X-this.points.length)%32}_map(X,Y,ie){if(X[Y+sr]>1){let re=this.clusterProps[X[Y+On]];return ie?Object.assign({},re):re}let pe=this.points[X[Y+Wt]].properties,xe=this.options.map(pe);return ie&&xe===pe?Object.assign({},xe):xe}}function Cr(Ee,X,Y){return{type:"Feature",id:Ee[X+Wt],properties:xt(Ee,X,Y),geometry:{type:"Point",coordinates:[(ie=Ee[X],360*(ie-.5)),oo(Ee[X+1])]}};var ie}function xt(Ee,X,Y){let ie=Ee[X+sr],pe=ie>=1e4?`${Math.round(ie/1e3)}k`:ie>=1e3?Math.round(ie/100)/10+"k":ie,xe=Ee[X+On],re=xe===-1?{}:Object.assign({},Y[xe]);return Object.assign(re,{cluster:!0,cluster_id:Ee[X+Wt],point_count:ie,point_count_abbreviated:pe})}function pr(Ee){return Ee/360+.5}function Jt(Ee){let X=Math.sin(Ee*Math.PI/180),Y=.5-.25*Math.log((1+X)/(1-X))/Math.PI;return Y<0?0:Y>1?1:Y}function oo(Ee){let X=(180-360*Ee)*Math.PI/180;return 360*Math.atan(Math.exp(X))/Math.PI-90}function un(Ee,X,Y,ie){let pe=ie,xe=X+(Y-X>>1),re,Pe=Y-X,we=Ee[X],Se=Ee[X+1],Me=Ee[Y],Te=Ee[Y+1];for(let Ue=X+3;Ue<Y;Ue+=3){let Je=Ia(Ee[Ue],Ee[Ue+1],we,Se,Me,Te);if(Je>pe)re=Ue,pe=Je;else if(Je===pe){let tt=Math.abs(Ue-xe);tt<Pe&&(re=Ue,Pe=tt)}}pe>ie&&(re-X>3&&un(Ee,X,re,ie),Ee[re+2]=pe,Y-re>3&&un(Ee,re,Y,ie))}function Ia(Ee,X,Y,ie,pe,xe){let re=pe-Y,Pe=xe-ie;if(re!==0||Pe!==0){let we=((Ee-Y)*re+(X-ie)*Pe)/(re*re+Pe*Pe);we>1?(Y=pe,ie=xe):we>0&&(Y+=re*we,ie+=Pe*we)}return re=Ee-Y,Pe=X-ie,re*re+Pe*Pe}function Un(Ee,X,Y,ie){let pe={id:Ee==null?null:Ee,type:X,geometry:Y,tags:ie,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(X==="Point"||X==="MultiPoint"||X==="LineString")Br(pe,Y);else if(X==="Polygon")Br(pe,Y[0]);else if(X==="MultiLineString")for(let xe of Y)Br(pe,xe);else if(X==="MultiPolygon")for(let xe of Y)Br(pe,xe[0]);return pe}function Br(Ee,X){for(let Y=0;Y<X.length;Y+=3)Ee.minX=Math.min(Ee.minX,X[Y]),Ee.minY=Math.min(Ee.minY,X[Y+1]),Ee.maxX=Math.max(Ee.maxX,X[Y]),Ee.maxY=Math.max(Ee.maxY,X[Y+1])}function Vn(Ee,X,Y,ie){if(!X.geometry)return;let pe=X.geometry.coordinates;if(pe&&pe.length===0)return;let xe=X.geometry.type,re=Math.pow(Y.tolerance/((1<<Y.maxZoom)*Y.extent),2),Pe=[],we=X.id;if(Y.promoteId?we=X.properties[Y.promoteId]:Y.generateId&&(we=ie||0),xe==="Point")zt(pe,Pe);else if(xe==="MultiPoint")for(let Se of pe)zt(Se,Pe);else if(xe==="LineString")_i(pe,Pe,re,!1);else if(xe==="MultiLineString"){if(Y.lineMetrics){for(let Se of pe)Pe=[],_i(Se,Pe,re,!1),Ee.push(Un(we,"LineString",Pe,X.properties));return}xi(pe,Pe,re,!1)}else if(xe==="Polygon")xi(pe,Pe,re,!0);else{if(xe!=="MultiPolygon"){if(xe==="GeometryCollection"){for(let Se of X.geometry.geometries)Vn(Ee,{id:we,geometry:Se,properties:X.properties},Y,ie);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Se of pe){let Me=[];xi(Se,Me,re,!0),Pe.push(Me)}}Ee.push(Un(we,xe,Pe,X.properties))}function zt(Ee,X){X.push(wn(Ee[0]),ii(Ee[1]),0)}function _i(Ee,X,Y,ie){let pe,xe,re=0;for(let we=0;we<Ee.length;we++){let Se=wn(Ee[we][0]),Me=ii(Ee[we][1]);X.push(Se,Me,0),we>0&&(re+=ie?(pe*Me-Se*xe)/2:Math.sqrt(Math.pow(Se-pe,2)+Math.pow(Me-xe,2))),pe=Se,xe=Me}let Pe=X.length-3;X[2]=1,un(X,0,Pe,Y),X[Pe+2]=1,X.size=Math.abs(re),X.start=0,X.end=X.size}function xi(Ee,X,Y,ie){for(let pe=0;pe<Ee.length;pe++){let xe=[];_i(Ee[pe],xe,Y,ie),X.push(xe)}}function wn(Ee){return Ee/360+.5}function ii(Ee){let X=Math.sin(Ee*Math.PI/180),Y=.5-.25*Math.log((1+X)/(1-X))/Math.PI;return Y<0?0:Y>1?1:Y}function Ur(Ee,X,Y,ie,pe,xe,re,Pe){if(ie/=X,xe>=(Y/=X)&&re<ie)return Ee;if(re<Y||xe>=ie)return null;let we=[];for(let Se of Ee){let Me=Se.geometry,Te=Se.type,Ue=pe===0?Se.minX:Se.minY,Je=pe===0?Se.maxX:Se.maxY;if(Ue>=Y&&Je<ie){we.push(Se);continue}if(Je<Y||Ue>=ie)continue;let tt=[];if(Te==="Point"||Te==="MultiPoint")Dn(Me,tt,Y,ie,pe);else if(Te==="LineString")er(Me,tt,Y,ie,pe,!1,Pe.lineMetrics);else if(Te==="MultiLineString")$a(Me,tt,Y,ie,pe,!1);else if(Te==="Polygon")$a(Me,tt,Y,ie,pe,!0);else if(Te==="MultiPolygon")for(let dt of Me){let qt=[];$a(dt,qt,Y,ie,pe,!0),qt.length&&tt.push(qt)}if(tt.length){if(Pe.lineMetrics&&Te==="LineString"){for(let dt of tt)we.push(Un(Se.id,Te,dt,Se.tags));continue}Te!=="LineString"&&Te!=="MultiLineString"||(tt.length===1?(Te="LineString",tt=tt[0]):Te="MultiLineString"),Te!=="Point"&&Te!=="MultiPoint"||(Te=tt.length===3?"Point":"MultiPoint"),we.push(Un(Se.id,Te,tt,Se.tags))}}return we.length?we:null}function Dn(Ee,X,Y,ie,pe){for(let xe=0;xe<Ee.length;xe+=3){let re=Ee[xe+pe];re>=Y&&re<=ie&&ki(X,Ee[xe],Ee[xe+1],Ee[xe+2])}}function er(Ee,X,Y,ie,pe,xe,re){let Pe=Io(Ee),we=pe===0?ol:al,Se,Me,Te=Ee.start;for(let qt=0;qt<Ee.length-3;qt+=3){let Tt=Ee[qt],De=Ee[qt+1],dr=Ee[qt+2],Ht=Ee[qt+3],lr=Ee[qt+4],Et=pe===0?Tt:De,je=pe===0?Ht:lr,yt=!1;re&&(Se=Math.sqrt(Math.pow(Tt-Ht,2)+Math.pow(De-lr,2))),Et<Y?je>Y&&(Me=we(Pe,Tt,De,Ht,lr,Y),re&&(Pe.start=Te+Se*Me)):Et>ie?je<ie&&(Me=we(Pe,Tt,De,Ht,lr,ie),re&&(Pe.start=Te+Se*Me)):ki(Pe,Tt,De,dr),je<Y&&Et>=Y&&(Me=we(Pe,Tt,De,Ht,lr,Y),yt=!0),je>ie&&Et<=ie&&(Me=we(Pe,Tt,De,Ht,lr,ie),yt=!0),!xe&&yt&&(re&&(Pe.end=Te+Se*Me),X.push(Pe),Pe=Io(Ee)),re&&(Te+=Se)}let Ue=Ee.length-3,Je=Ee[Ue],tt=Ee[Ue+1],dt=pe===0?Je:tt;dt>=Y&&dt<=ie&&ki(Pe,Je,tt,Ee[Ue+2]),Ue=Pe.length-3,xe&&Ue>=3&&(Pe[Ue]!==Pe[0]||Pe[Ue+1]!==Pe[1])&&ki(Pe,Pe[0],Pe[1],Pe[2]),Pe.length&&X.push(Pe)}function Io(Ee){let X=[];return X.size=Ee.size,X.start=Ee.start,X.end=Ee.end,X}function $a(Ee,X,Y,ie,pe,xe){for(let re of Ee)er(re,X,Y,ie,pe,xe,!1)}function ki(Ee,X,Y,ie){Ee.push(X,Y,ie)}function ol(Ee,X,Y,ie,pe,xe){let re=(xe-X)/(ie-X);return ki(Ee,xe,Y+(pe-Y)*re,1),re}function al(Ee,X,Y,ie,pe,xe){let re=(xe-Y)/(pe-Y);return ki(Ee,X+(ie-X)*re,xe,1),re}function oi(Ee,X){let Y=[];for(let ie=0;ie<Ee.length;ie++){let pe=Ee[ie],xe=pe.type,re;if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")re=Co(pe.geometry,X);else if(xe==="MultiLineString"||xe==="Polygon"){re=[];for(let Pe of pe.geometry)re.push(Co(Pe,X))}else if(xe==="MultiPolygon"){re=[];for(let Pe of pe.geometry){let we=[];for(let Se of Pe)we.push(Co(Se,X));re.push(we)}}Y.push(Un(pe.id,xe,re,pe.tags))}return Y}function Co(Ee,X){let Y=[];Y.size=Ee.size,Ee.start!==void 0&&(Y.start=Ee.start,Y.end=Ee.end);for(let ie=0;ie<Ee.length;ie+=3)Y.push(Ee[ie]+X,Ee[ie+1],Ee[ie+2]);return Y}function Zo(Ee,X){if(Ee.transformed)return Ee;let Y=1<<Ee.z,ie=Ee.x,pe=Ee.y;for(let xe of Ee.features){let re=xe.geometry,Pe=xe.type;if(xe.geometry=[],Pe===1)for(let we=0;we<re.length;we+=2)xe.geometry.push(Is(re[we],re[we+1],X,Y,ie,pe));else for(let we=0;we<re.length;we++){let Se=[];for(let Me=0;Me<re[we].length;Me+=2)Se.push(Is(re[we][Me],re[we][Me+1],X,Y,ie,pe));xe.geometry.push(Se)}}return Ee.transformed=!0,Ee}function Is(Ee,X,Y,ie,pe,xe){return[Math.round(Y*(Ee*ie-pe)),Math.round(Y*(X*ie-xe))]}function Wo(Ee,X,Y,ie,pe){let xe=X===pe.maxZoom?0:pe.tolerance/((1<<X)*pe.extent),re={features:[],numPoints:0,numSimplified:0,numFeatures:Ee.length,source:null,x:Y,y:ie,z:X,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let Pe of Ee)sl(re,Pe,xe,pe);return re}function sl(Ee,X,Y,ie){let pe=X.geometry,xe=X.type,re=[];if(Ee.minX=Math.min(Ee.minX,X.minX),Ee.minY=Math.min(Ee.minY,X.minY),Ee.maxX=Math.max(Ee.maxX,X.maxX),Ee.maxY=Math.max(Ee.maxY,X.maxY),xe==="Point"||xe==="MultiPoint")for(let Pe=0;Pe<pe.length;Pe+=3)re.push(pe[Pe],pe[Pe+1]),Ee.numPoints++,Ee.numSimplified++;else if(xe==="LineString")Cs(re,pe,Ee,Y,!1,!1);else if(xe==="MultiLineString"||xe==="Polygon")for(let Pe=0;Pe<pe.length;Pe++)Cs(re,pe[Pe],Ee,Y,xe==="Polygon",Pe===0);else if(xe==="MultiPolygon")for(let Pe=0;Pe<pe.length;Pe++){let we=pe[Pe];for(let Se=0;Se<we.length;Se++)Cs(re,we[Se],Ee,Y,!0,Se===0)}if(re.length){let Pe=X.tags||null;if(xe==="LineString"&&ie.lineMetrics){Pe={};for(let Se in X.tags)Pe[Se]=X.tags[Se];Pe.mapbox_clip_start=pe.start/pe.size,Pe.mapbox_clip_end=pe.end/pe.size}let we={geometry:re,type:xe==="Polygon"||xe==="MultiPolygon"?3:xe==="LineString"||xe==="MultiLineString"?2:1,tags:Pe};X.id!==null&&(we.id=X.id),Ee.features.push(we)}}function Cs(Ee,X,Y,ie,pe,xe){let re=ie*ie;if(ie>0&&X.size<(pe?re:ie))return void(Y.numPoints+=X.length/3);let Pe=[];for(let we=0;we<X.length;we+=3)(ie===0||X[we+2]>re)&&(Y.numSimplified++,Pe.push(X[we],X[we+1])),Y.numPoints++;pe&&function(we,Se){let Me=0;for(let Te=0,Ue=we.length,Je=Ue-2;Te<Ue;Je=Te,Te+=2)Me+=(we[Te]-we[Je])*(we[Te+1]+we[Je+1]);if(Me>0===Se)for(let Te=0,Ue=we.length;Te<Ue/2;Te+=2){let Je=we[Te],tt=we[Te+1];we[Te]=we[Ue-2-Te],we[Te+1]=we[Ue-1-Te],we[Ue-2-Te]=Je,we[Ue-1-Te]=tt}}(Pe,xe),Ee.push(Pe)}let Ps={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ca{constructor(X,Y){let ie=(Y=this.options=function(xe,re){for(let Pe in re)xe[Pe]=re[Pe];return xe}(Object.create(Ps),Y)).debug;if(ie&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");let pe=function(xe,re){let Pe=[];if(xe.type==="FeatureCollection")for(let we=0;we<xe.features.length;we++)Vn(Pe,xe.features[we],re,we);else Vn(Pe,xe.type==="Feature"?xe:{geometry:xe},re);return Pe}(X,Y);this.tiles={},this.tileCoords=[],ie&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),pe=function(xe,re){let Pe=re.buffer/re.extent,we=xe,Se=Ur(xe,1,-1-Pe,Pe,0,-1,2,re),Me=Ur(xe,1,1-Pe,2+Pe,0,-1,2,re);return(Se||Me)&&(we=Ur(xe,1,-Pe,1+Pe,0,-1,2,re)||[],Se&&(we=oi(Se,1).concat(we)),Me&&(we=we.concat(oi(Me,-1)))),we}(pe,Y),pe.length&&this.splitTile(pe,0,0,0),ie&&(pe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(X,Y,ie,pe,xe,re,Pe){let we=[X,Y,ie,pe],Se=this.options,Me=Se.debug;for(;we.length;){pe=we.pop(),ie=we.pop(),Y=we.pop(),X=we.pop();let Te=1<<Y,Ue=Ho(Y,ie,pe),Je=this.tiles[Ue];if(!Je&&(Me>1&&console.time("creation"),Je=this.tiles[Ue]=Wo(X,Y,ie,pe,Se),this.tileCoords.push({z:Y,x:ie,y:pe}),Me)){Me>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,ie,pe,Je.numFeatures,Je.numPoints,Je.numSimplified),console.timeEnd("creation"));let yt=`z${Y}`;this.stats[yt]=(this.stats[yt]||0)+1,this.total++}if(Je.source=X,xe==null){if(Y===Se.indexMaxZoom||Je.numPoints<=Se.indexMaxPoints)continue}else{if(Y===Se.maxZoom||Y===xe)continue;if(xe!=null){let yt=xe-Y;if(ie!==re>>yt||pe!==Pe>>yt)continue}}if(Je.source=null,X.length===0)continue;Me>1&&console.time("clipping");let tt=.5*Se.buffer/Se.extent,dt=.5-tt,qt=.5+tt,Tt=1+tt,De=null,dr=null,Ht=null,lr=null,Et=Ur(X,Te,ie-tt,ie+qt,0,Je.minX,Je.maxX,Se),je=Ur(X,Te,ie+dt,ie+Tt,0,Je.minX,Je.maxX,Se);X=null,Et&&(De=Ur(Et,Te,pe-tt,pe+qt,1,Je.minY,Je.maxY,Se),dr=Ur(Et,Te,pe+dt,pe+Tt,1,Je.minY,Je.maxY,Se),Et=null),je&&(Ht=Ur(je,Te,pe-tt,pe+qt,1,Je.minY,Je.maxY,Se),lr=Ur(je,Te,pe+dt,pe+Tt,1,Je.minY,Je.maxY,Se),je=null),Me>1&&console.timeEnd("clipping"),we.push(De||[],Y+1,2*ie,2*pe),we.push(dr||[],Y+1,2*ie,2*pe+1),we.push(Ht||[],Y+1,2*ie+1,2*pe),we.push(lr||[],Y+1,2*ie+1,2*pe+1)}}getTile(X,Y,ie){X=+X,Y=+Y,ie=+ie;let pe=this.options,{extent:xe,debug:re}=pe;if(X<0||X>24)return null;let Pe=1<<X,we=Ho(X,Y=Y+Pe&Pe-1,ie);if(this.tiles[we])return Zo(this.tiles[we],xe);re>1&&console.log("drilling down to z%d-%d-%d",X,Y,ie);let Se,Me=X,Te=Y,Ue=ie;for(;!Se&&Me>0;)Me--,Te>>=1,Ue>>=1,Se=this.tiles[Ho(Me,Te,Ue)];return Se&&Se.source?(re>1&&(console.log("found parent tile z%d-%d-%d",Me,Te,Ue),console.time("drilling down")),this.splitTile(Se.source,Me,Te,Ue,X,Y,ie),re>1&&console.timeEnd("drilling down"),this.tiles[we]?Zo(this.tiles[we],xe):null):null}}function Ho(Ee,X,Y){return 32*((1<<Ee)*Y+X)+Ee}function Ga(Ee,X){return X?Ee.properties[X]:Ee.id}function Ko(Ee,X){if(Ee==null)return!0;if(Ee.type==="Feature")return Ga(Ee,X)!=null;if(Ee.type==="FeatureCollection"){let Y=new Set;for(let ie of Ee.features){let pe=Ga(ie,X);if(pe==null||Y.has(pe))return!1;Y.add(pe)}return!0}return!1}function $n(Ee,X){let Y=new Map;if(Ee!=null)if(Ee.type==="Feature")Y.set(Ga(Ee,X),Ee);else for(let ie of Ee.features)Y.set(Ga(ie,X),ie);return Y}class ai extends E{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(X,Y){return i._(this,void 0,void 0,function*(){let ie=X.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let pe=this._geoJSONIndex.getTile(ie.z,ie.x,ie.y);if(!pe)return null;let xe=new W(pe.features),re=Be(xe);return re.byteOffset===0&&re.byteLength===re.buffer.byteLength||(re=new Uint8Array(re)),{vectorTile:xe,rawData:re.buffer}})}loadData(X){return i._(this,void 0,void 0,function*(){var Y;(Y=this._pendingRequest)===null||Y===void 0||Y.abort();let ie=!!(X&&X.request&&X.request.collectResourceTiming)&&new i.cE(X.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(X,this._pendingRequest),this._geoJSONIndex=X.cluster?new Ln(function({superclusterOptions:re,clusterProperties:Pe}){if(!Pe||!re)return re;let we={},Se={},Me={accumulated:null,zoom:0},Te={properties:null},Ue=Object.keys(Pe);for(let Je of Ue){let[tt,dt]=Pe[Je],qt=i.cL(dt),Tt=i.cL(typeof tt=="string"?[tt,["accumulated"],["get",Je]]:tt);we[Je]=qt.value,Se[Je]=Tt.value}return re.map=Je=>{Te.properties=Je;let tt={};for(let dt of Ue)tt[dt]=we[dt].evaluate(Me,Te);return tt},re.reduce=(Je,tt)=>{Te.properties=tt;for(let dt of Ue)Me.accumulated=Je[dt],Je[dt]=Se[dt].evaluate(Me,Te)},re}(X)).load((yield this._pendingData).features):(pe=yield this._pendingData,new Ca(pe,X.geojsonVtOptions)),this.loaded={};let xe={};if(ie){let re=ie.finish();re&&(xe.resourceTiming={},xe.resourceTiming[X.source]=JSON.parse(JSON.stringify(re)))}return xe}catch(xe){if(delete this._pendingRequest,i.cp(xe))return{abandoned:!0};throw xe}var pe})}getData(){return i._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(X){let Y=this.loaded;return Y&&Y[X.uid]?super.reloadTile(X):this.loadTile(X)}loadAndProcessGeoJSON(X,Y){return i._(this,void 0,void 0,function*(){let ie=yield this.loadGeoJSON(X,Y);if(delete this._pendingRequest,typeof ie!="object")throw new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`);if(K(ie,!0),X.filter){let pe=i.cL(X.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(pe.result==="error")throw new Error(pe.value.map(re=>`${re.key}: ${re.message}`).join(", "));ie={type:"FeatureCollection",features:ie.features.filter(re=>pe.value.evaluate({zoom:0},re))}}return ie})}loadGeoJSON(X,Y){return i._(this,void 0,void 0,function*(){let{promoteId:ie}=X;if(X.request){let pe=yield i.j(X.request,Y);return this._dataUpdateable=Ko(pe.data,ie)?$n(pe.data,ie):void 0,pe.data}if(typeof X.data=="string")try{let pe=JSON.parse(X.data);return this._dataUpdateable=Ko(pe,ie)?$n(pe,ie):void 0,pe}catch(pe){throw new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`)}if(!X.dataDiff)throw new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${X.source}`);return function(pe,xe,re){var Pe,we,Se,Me;if(xe.removeAll&&pe.clear(),xe.remove)for(let Te of xe.remove)pe.delete(Te);if(xe.add)for(let Te of xe.add){let Ue=Ga(Te,re);Ue!=null&&pe.set(Ue,Te)}if(xe.update)for(let Te of xe.update){let Ue=pe.get(Te.id);if(Ue==null)continue;let Je=!Te.removeAllProperties&&(((Pe=Te.removeProperties)===null||Pe===void 0?void 0:Pe.length)>0||((we=Te.addOrUpdateProperties)===null||we===void 0?void 0:we.length)>0);if((Te.newGeometry||Te.removeAllProperties||Je)&&(Ue=Object.assign({},Ue),pe.set(Te.id,Ue),Je&&(Ue.properties=Object.assign({},Ue.properties))),Te.newGeometry&&(Ue.geometry=Te.newGeometry),Te.removeAllProperties)Ue.properties={};else if(((Se=Te.removeProperties)===null||Se===void 0?void 0:Se.length)>0)for(let tt of Te.removeProperties)Object.prototype.hasOwnProperty.call(Ue.properties,tt)&&delete Ue.properties[tt];if(((Me=Te.addOrUpdateProperties)===null||Me===void 0?void 0:Me.length)>0)for(let{key:tt,value:dt}of Te.addOrUpdateProperties)Ue.properties[tt]=dt}}(this._dataUpdateable,X.dataDiff,ie),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(X){return i._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(X){return this._geoJSONIndex.getClusterExpansionZoom(X.clusterId)}getClusterChildren(X){return this._geoJSONIndex.getChildren(X.clusterId)}getClusterLeaves(X){return this._geoJSONIndex.getLeaves(X.clusterId,X.limit,X.offset)}}class ao{constructor(X){this.self=X,this.actor=new i.H(X),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(Y,ie)=>{if(this.externalWorkerSourceTypes[Y])throw new Error(`Worker source with name "${Y}" already registered.`);this.externalWorkerSourceTypes[Y]=ie},this.self.addProtocol=i.cr,this.self.removeProtocol=i.cs,this.self.registerRTLTextPlugin=Y=>{i.cM.setMethods(Y)},this.actor.registerMessageHandler("LDT",(Y,ie)=>this._getDEMWorkerSource(Y,ie.source).loadTile(ie)),this.actor.registerMessageHandler("RDT",(Y,ie)=>i._(this,void 0,void 0,function*(){this._getDEMWorkerSource(Y,ie.source).removeTile(ie)})),this.actor.registerMessageHandler("GCEZ",(Y,ie)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(Y,ie.type,ie.source).getClusterExpansionZoom(ie)})),this.actor.registerMessageHandler("GCC",(Y,ie)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(Y,ie.type,ie.source).getClusterChildren(ie)})),this.actor.registerMessageHandler("GCL",(Y,ie)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(Y,ie.type,ie.source).getClusterLeaves(ie)})),this.actor.registerMessageHandler("LD",(Y,ie)=>this._getWorkerSource(Y,ie.type,ie.source).loadData(ie)),this.actor.registerMessageHandler("GD",(Y,ie)=>this._getWorkerSource(Y,ie.type,ie.source).getData()),this.actor.registerMessageHandler("LT",(Y,ie)=>this._getWorkerSource(Y,ie.type,ie.source).loadTile(ie)),this.actor.registerMessageHandler("RT",(Y,ie)=>this._getWorkerSource(Y,ie.type,ie.source).reloadTile(ie)),this.actor.registerMessageHandler("AT",(Y,ie)=>this._getWorkerSource(Y,ie.type,ie.source).abortTile(ie)),this.actor.registerMessageHandler("RMT",(Y,ie)=>this._getWorkerSource(Y,ie.type,ie.source).removeTile(ie)),this.actor.registerMessageHandler("RS",(Y,ie)=>i._(this,void 0,void 0,function*(){if(!this.workerSources[Y]||!this.workerSources[Y][ie.type]||!this.workerSources[Y][ie.type][ie.source])return;let pe=this.workerSources[Y][ie.type][ie.source];delete this.workerSources[Y][ie.type][ie.source],pe.removeSource!==void 0&&pe.removeSource(ie)})),this.actor.registerMessageHandler("RM",Y=>i._(this,void 0,void 0,function*(){delete this.layerIndexes[Y],delete this.availableImages[Y],delete this.workerSources[Y],delete this.demWorkerSources[Y]})),this.actor.registerMessageHandler("SR",(Y,ie)=>i._(this,void 0,void 0,function*(){this.referrer=ie})),this.actor.registerMessageHandler("SRPS",(Y,ie)=>this._syncRTLPluginState(Y,ie)),this.actor.registerMessageHandler("IS",(Y,ie)=>i._(this,void 0,void 0,function*(){this.self.importScripts(ie)})),this.actor.registerMessageHandler("SI",(Y,ie)=>this._setImages(Y,ie)),this.actor.registerMessageHandler("UL",(Y,ie)=>i._(this,void 0,void 0,function*(){this._getLayerIndex(Y).update(ie.layers,ie.removedIds)})),this.actor.registerMessageHandler("SL",(Y,ie)=>i._(this,void 0,void 0,function*(){this._getLayerIndex(Y).replace(ie)}))}_setImages(X,Y){return i._(this,void 0,void 0,function*(){this.availableImages[X]=Y;for(let ie in this.workerSources[X]){let pe=this.workerSources[X][ie];for(let xe in pe)pe[xe].availableImages=Y}})}_syncRTLPluginState(X,Y){return i._(this,void 0,void 0,function*(){return yield i.cM.syncState(Y,this.self.importScripts)})}_getAvailableImages(X){let Y=this.availableImages[X];return Y||(Y=[]),Y}_getLayerIndex(X){let Y=this.layerIndexes[X];return Y||(Y=this.layerIndexes[X]=new o),Y}_getWorkerSource(X,Y,ie){if(this.workerSources[X]||(this.workerSources[X]={}),this.workerSources[X][Y]||(this.workerSources[X][Y]={}),!this.workerSources[X][Y][ie]){let pe={sendAsync:(xe,re)=>(xe.targetMapId=X,this.actor.sendAsync(xe,re))};switch(Y){case"vector":this.workerSources[X][Y][ie]=new E(pe,this._getLayerIndex(X),this._getAvailableImages(X));break;case"geojson":this.workerSources[X][Y][ie]=new ai(pe,this._getLayerIndex(X),this._getAvailableImages(X));break;default:this.workerSources[X][Y][ie]=new this.externalWorkerSourceTypes[Y](pe,this._getLayerIndex(X),this._getAvailableImages(X))}}return this.workerSources[X][Y][ie]}_getDEMWorkerSource(X,Y){return this.demWorkerSources[X]||(this.demWorkerSources[X]={}),this.demWorkerSources[X][Y]||(this.demWorkerSources[X][Y]=new S),this.demWorkerSources[X][Y]}}return i.i(self)&&(self.worker=new ao(self)),ao}),r("index",["exports","./shared"],function(i,o){"use strict";var f="5.5.0";function v(){var g=new o.A(4);return o.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}let x,E,S={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(g,a,l){let p=requestAnimationFrame(y=>{d(),a(y)}),{unsubscribe:d}=o.s(g.signal,"abort",()=>{d(),cancelAnimationFrame(p),l(o.c())},!1)},frameAsync(g){return new Promise((a,l)=>{this.frame(g,a,l)})},getImageData(g,a=0){return this.getImageCanvasContext(g).getImageData(-a,-a,g.width+2*a,g.height+2*a)},getImageCanvasContext(g){let a=window.document.createElement("canvas"),l=a.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return a.width=g.width,a.height=g.height,l.drawImage(g,0,0,g.width,g.height),l},resolveURL:g=>(x||(x=document.createElement("a")),x.href=g,x.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(E==null&&(E=matchMedia("(prefers-reduced-motion: reduce)")),E.matches)}};class P{static testProp(a){if(!P.docStyle)return a[0];for(let l=0;l<a.length;l++)if(a[l]in P.docStyle)return a[l];return a[0]}static create(a,l,p){let d=window.document.createElement(a);return l!==void 0&&(d.className=l),p&&p.appendChild(d),d}static createNS(a,l){return window.document.createElementNS(a,l)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(a,l){a.style[P.transformProp]=l}static addEventListener(a,l,p,d={}){a.addEventListener(l,p,"passive"in d?d:d.capture)}static removeEventListener(a,l,p,d={}){a.removeEventListener(l,p,"passive"in d?d:d.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",P.suppressClickInternal,!0)},0)}static getScale(a){let l=a.getBoundingClientRect();return{x:l.width/a.offsetWidth||1,y:l.height/a.offsetHeight||1,boundingClientRect:l}}static getPoint(a,l,p){let d=l.boundingClientRect;return new o.P((p.clientX-d.left)/l.x-a.clientLeft,(p.clientY-d.top)/l.y-a.clientTop)}static mousePos(a,l){let p=P.getScale(a);return P.getPoint(a,p,l)}static touchPos(a,l){let p=[],d=P.getScale(a);for(let y=0;y<l.length;y++)p.push(P.getPoint(a,d,l[y]));return p}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}static sanitize(a){let l=new DOMParser().parseFromString(a,"text/html").body||document.createElement("body"),p=l.querySelectorAll("script");for(let d of p)d.remove();return P.clean(l),l.innerHTML}static isPossiblyDangerous(a,l){let p=l.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(a)||!p.includes("javascript:")&&!p.includes("data:"))||!!a.startsWith("on")||void 0}static clean(a){let l=a.children;for(let p of l)P.removeAttributes(p),P.clean(p)}static removeAttributes(a){for(let{name:l,value:p}of a.attributes)P.isPossiblyDangerous(l,p)&&a.removeAttribute(l)}}P.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);let q={supported:!1,testSupport:function(g){!ne&&K&&(Z?W(g):F=g)}},F,K,ne=!1,Z=!1;function W(g){let a=g.createTexture();g.bindTexture(g.TEXTURE_2D,a);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,K),g.isContextLost())return;q.supported=!0}catch(l){}g.deleteTexture(a),ne=!0}var Q;typeof document!="undefined"&&(K=document.createElement("img"),K.onload=()=>{F&&W(F),F=null,Z=!0},K.onerror=()=>{ne=!0,F=null},K.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(g){let a,l,p,d;g.resetRequestQueue=()=>{a=[],l=0,p=0,d={}},g.addThrottleControl=A=>{let O=p++;return d[O]=A,O},g.removeThrottleControl=A=>{delete d[A],w()},g.getImage=(A,O,D=!0)=>new Promise((z,N)=>{q.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),o.e(A,{type:"image"}),a.push({abortController:O,requestParameters:A,supportImageRefresh:D,state:"queued",onError:$=>{N($)},onSuccess:$=>{z($)}}),w()});let y=A=>o._(this,void 0,void 0,function*(){A.state="running";let{requestParameters:O,supportImageRefresh:D,onError:z,onSuccess:N,abortController:$}=A,G=D===!1&&!o.i(self)&&!o.g(O.url)&&(!O.headers||Object.keys(O.headers).reduce((se,he)=>se&&he==="accept",!0));l++;let ae=G?C(O,$):o.m(O,$);try{let se=yield ae;delete A.abortController,A.state="completed",se.data instanceof HTMLImageElement||o.b(se.data)?N(se):se.data&&N({data:yield(oe=se.data,typeof createImageBitmap=="function"?o.f(oe):o.h(oe)),cacheControl:se.cacheControl,expires:se.expires})}catch(se){delete A.abortController,z(se)}finally{l--,w()}var oe}),w=()=>{let A=(()=>{for(let O of Object.keys(d))if(d[O]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let O=l;O<A&&a.length>0;O++){let D=a.shift();D.abortController.signal.aborted?O--:y(D)}},C=(A,O)=>new Promise((D,z)=>{let N=new Image,$=A.url,G=A.credentials;G&&G==="include"?N.crossOrigin="use-credentials":(G&&G==="same-origin"||!o.d($))&&(N.crossOrigin="anonymous"),O.signal.addEventListener("abort",()=>{N.src="",z(o.c())}),N.fetchPriority="high",N.onload=()=>{N.onerror=N.onload=null,D({data:N})},N.onerror=()=>{N.onerror=N.onload=null,O.signal.aborted||z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},N.src=$})}(Q||(Q={})),Q.resetRequestQueue();class le{constructor(a){this._transformRequestFn=a}transformRequest(a,l){return this._transformRequestFn&&this._transformRequestFn(a,l)||{url:a}}setTransformRequest(a){this._transformRequestFn=a}}function ce(g){let a=[];if(typeof g=="string")a.push({id:"default",url:g});else if(g&&g.length>0){let l=[];for(let{id:p,url:d}of g){let y=`${p}${d}`;l.indexOf(y)===-1&&(l.push(y),a.push({id:p,url:d}))}}return a}function ze(g,a,l){try{let p=new URL(g);return p.pathname+=`${a}${l}`,p.toString()}catch(p){throw new Error(`Invalid sprite URL "${g}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class Le{constructor(a,l,p,d){this.context=a,this.format=p,this.texture=a.gl.createTexture(),this.update(l,d)}update(a,l,p){let{width:d,height:y}=a,w=!(this.size&&this.size[0]===d&&this.size[1]===y||p),{context:C}=this,{gl:A}=C;if(this.useMipmap=!!(l&&l.useMipmap),A.bindTexture(A.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!l||l.premultiply!==!1)),w)this.size=[d,y],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||o.b(a)?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,a):A.texImage2D(A.TEXTURE_2D,0,this.format,d,y,0,this.format,A.UNSIGNED_BYTE,a.data);else{let{x:O,y:D}=p||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||o.b(a)?A.texSubImage2D(A.TEXTURE_2D,0,O,D,A.RGBA,A.UNSIGNED_BYTE,a):A.texSubImage2D(A.TEXTURE_2D,0,O,D,d,y,A.RGBA,A.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&A.generateMipmap(A.TEXTURE_2D),C.pixelStoreUnpackFlipY.setDefault(),C.pixelStoreUnpack.setDefault(),C.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(a,l,p){let{context:d}=this,{gl:y}=d;y.bindTexture(y.TEXTURE_2D,this.texture),p!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=y.LINEAR),a!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,a),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,p||a),this.filter=a),l!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,l),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function Be(g){let{userImage:a}=g;return!!(a&&a.render&&a.render())&&(g.data.replace(new Uint8Array(a.data.buffer)),!0)}class et extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(let{ids:l,promiseResolve:p}of this.requestors)p(this._getImagesForIds(l));this.requestors=[]}}getImage(a){let l=this.images[a];if(l&&!l.data&&l.spriteData){let p=l.spriteData;l.data=new o.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),l.spriteData=null}return l}addImage(a,l){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,l)&&(this.images[a]=l)}_validate(a,l){let p=!0,d=l.data||l.spriteData;return this._validateStretch(l.stretchX,d&&d.width)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchX" value`))),p=!1),this._validateStretch(l.stretchY,d&&d.height)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchY" value`))),p=!1),this._validateContent(l.content,l)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "content" value`))),p=!1),p}_validateStretch(a,l){if(!a)return!0;let p=0;for(let d of a){if(d[0]<p||d[1]<d[0]||l<d[1])return!1;p=d[1]}return!0}_validateContent(a,l){if(!a)return!0;if(a.length!==4)return!1;let p=l.spriteData,d=p&&p.width||l.data.width,y=p&&p.height||l.data.height;return!(a[0]<0||d<a[0]||a[1]<0||y<a[1]||a[2]<0||d<a[2]||a[3]<0||y<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,l,p=!0){let d=this.getImage(a);if(p&&(d.data.width!==l.data.width||d.data.height!==l.data.height))throw new Error(`size mismatch between old image (${d.data.width}x${d.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=d.version+1,this.images[a]=l,this.updatedImages[a]=!0}removeImage(a){let l=this.images[a];delete this.images[a],delete this.patterns[a],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise((l,p)=>{let d=!0;if(!this.isLoaded())for(let y of a)this.images[y]||(d=!1);this.isLoaded()||d?l(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:l})})}_getImagesForIds(a){let l={};for(let p of a){let d=this.getImage(p);d||(this.fire(new o.l("styleimagemissing",{id:p})),d=this.getImage(p)),d?l[p]={data:d.data.clone(),pixelRatio:d.pixelRatio,sdf:d.sdf,version:d.version,stretchX:d.stretchX,stretchY:d.stretchY,content:d.content,textFitWidth:d.textFitWidth,textFitHeight:d.textFitHeight,hasRenderCallback:!!(d.userImage&&d.userImage.render)}:o.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){let{width:a,height:l}=this.atlasImage;return{width:a,height:l}}getPattern(a){let l=this.patterns[a],p=this.getImage(a);if(!p)return null;if(l&&l.position.version===p.version)return l.position;if(l)l.position.version=p.version;else{let d={w:p.data.width+2,h:p.data.height+2,x:0,y:0},y=new o.I(d,p);this.patterns[a]={bin:d,position:y}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){let l=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Le(a,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){let a=[];for(let y in this.patterns)a.push(this.patterns[y].bin);let{w:l,h:p}=o.p(a),d=this.atlasImage;d.resize({width:l||1,height:p||1});for(let y in this.patterns){let{bin:w}=this.patterns[y],C=w.x+1,A=w.y+1,O=this.getImage(y).data,D=O.width,z=O.height;o.R.copy(O,d,{x:0,y:0},{x:C,y:A},{width:D,height:z}),o.R.copy(O,d,{x:0,y:z-1},{x:C,y:A-1},{width:D,height:1}),o.R.copy(O,d,{x:0,y:0},{x:C,y:A+z},{width:D,height:1}),o.R.copy(O,d,{x:D-1,y:0},{x:C-1,y:A},{width:1,height:z}),o.R.copy(O,d,{x:0,y:0},{x:C+D,y:A},{width:1,height:z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(let l of a){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;let p=this.getImage(l);p||o.w(`Image with ID: "${l}" was not found`),Be(p)&&this.updateImage(l,p)}}}let ot=1e20;function Ot(g,a,l,p,d,y,w,C,A){for(let O=a;O<a+p;O++)Wt(g,l*y+O,y,d,w,C,A);for(let O=l;O<l+d;O++)Wt(g,O*y+a,1,p,w,C,A)}function Wt(g,a,l,p,d,y,w){y[0]=0,w[0]=-1e20,w[1]=ot,d[0]=g[a];for(let C=1,A=0,O=0;C<p;C++){d[C]=g[a+C*l];let D=C*C;do{let z=y[A];O=(d[C]-d[z]+D-z*z)/(C-z)/2}while(O<=w[A]&&--A>-1);A++,y[A]=C,w[A]=O,w[A+1]=ot}for(let C=0,A=0;C<p;C++){for(;w[A+1]<C;)A++;let O=y[A],D=C-O;g[a+C*l]=d[O]+D*D}}class sr{constructor(a,l){this.requestManager=a,this.localIdeographFontFamily=l,this.entries={}}setURL(a){this.url=a}getGlyphs(a){return o._(this,void 0,void 0,function*(){let l=[];for(let y in a)for(let w of a[y])l.push(this._getAndCacheGlyphsPromise(y,w));let p=yield Promise.all(l),d={};for(let{stack:y,id:w,glyph:C}of p)d[y]||(d[y]={}),d[y][w]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics};return d})}_getAndCacheGlyphsPromise(a,l){return o._(this,void 0,void 0,function*(){let p=this.entries[a];p||(p=this.entries[a]={glyphs:{},requests:{},ranges:{}});let d=p.glyphs[l];if(d!==void 0)return{stack:a,id:l,glyph:d};if(d=this._tinySDF(p,a,l),d)return p.glyphs[l]=d,{stack:a,id:l,glyph:d};let y=Math.floor(l/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[y])return{stack:a,id:l,glyph:d};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[y]){let C=sr.loadGlyphRange(a,y,this.url,this.requestManager);p.requests[y]=C}let w=yield p.requests[y];for(let C in w)this._doesCharSupportLocalGlyph(+C)||(p.glyphs[+C]=w[+C]);return p.ranges[y]=!0,{stack:a,id:l,glyph:w[l]||null}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(a))||o.u["CJK Unified Ideographs"](a)||o.u["Hangul Syllables"](a)||o.u.Hiragana(a)||o.u.Katakana(a)||o.u["CJK Symbols and Punctuation"](a)||o.u["Halfwidth and Fullwidth Forms"](a))}_tinySDF(a,l,p){let d=this.localIdeographFontFamily;if(!d||!this._doesCharSupportLocalGlyph(p))return;let y=a.tinySDF;if(!y){let C="400";/bold/i.test(l)?C="900":/medium/i.test(l)?C="500":/light/i.test(l)&&(C="200"),y=a.tinySDF=new sr.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:C})}let w=y.draw(String.fromCharCode(p));return{id:p,bitmap:new o.q({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}sr.loadGlyphRange=function(g,a,l,p){return o._(this,void 0,void 0,function*(){let d=256*a,y=d+255,w=p.transformRequest(l.replace("{fontstack}",g).replace("{range}",`${d}-${y}`),"Glyphs"),C=yield o.n(w,new AbortController);if(!C||!C.data)throw new Error(`Could not load glyph range. range: ${a}, ${d}-${y}`);let A={};for(let O of o.o(C.data))A[O.id]=O;return A})},sr.TinySDF=class{constructor({fontSize:g=24,buffer:a=3,radius:l=8,cutoff:p=.25,fontFamily:d="sans-serif",fontWeight:y="normal",fontStyle:w="normal"}={}){this.buffer=a,this.cutoff=p,this.radius=l;let C=this.size=g+4*a,A=this._createCanvas(C),O=this.ctx=A.getContext("2d",{willReadFrequently:!0});O.font=`${w} ${y} ${g}px ${d}`,O.textBaseline="alphabetic",O.textAlign="left",O.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(g){let a=document.createElement("canvas");return a.width=a.height=g,a}draw(g){let{width:a,actualBoundingBoxAscent:l,actualBoundingBoxDescent:p,actualBoundingBoxLeft:d,actualBoundingBoxRight:y}=this.ctx.measureText(g),w=Math.ceil(l),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-d))),A=Math.min(this.size-this.buffer,w+Math.ceil(p)),O=C+2*this.buffer,D=A+2*this.buffer,z=Math.max(O*D,0),N=new Uint8ClampedArray(z),$={data:N,width:O,height:D,glyphWidth:C,glyphHeight:A,glyphTop:w,glyphLeft:0,glyphAdvance:a};if(C===0||A===0)return $;let{ctx:G,buffer:ae,gridInner:oe,gridOuter:se}=this;G.clearRect(ae,ae,C,A),G.fillText(g,ae,ae+w);let he=G.getImageData(ae,ae,C,A);se.fill(ot,0,z),oe.fill(0,0,z);for(let ve=0;ve<A;ve++)for(let me=0;me<C;me++){let ge=he.data[4*(ve*C+me)+3]/255;if(ge===0)continue;let be=(ve+ae)*O+me+ae;if(ge===1)se[be]=0,oe[be]=ot;else{let ye=.5-ge;se[be]=ye>0?ye*ye:0,oe[be]=ye<0?ye*ye:0}}Ot(se,0,0,O,D,O,this.f,this.v,this.z),Ot(oe,ae,ae,C,A,O,this.f,this.v,this.z);for(let ve=0;ve<z;ve++){let me=Math.sqrt(se[ve])-Math.sqrt(oe[ve]);N[ve]=Math.round(255-255*(me/this.radius+this.cutoff))}return $}};class On{constructor(){this.specification=o.v.light.position}possiblyEvaluate(a,l){return o.z(a.expression.evaluate(l))}interpolate(a,l,p){return{x:o.B.number(a.x,l.x,p),y:o.B.number(a.y,l.y,p),z:o.B.number(a.z,l.z,p)}}}let Ln;class Cr extends o.E{constructor(a){super(),Ln=Ln||new o.r({anchor:new o.D(o.v.light.anchor),position:new On,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(Ln),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,l={}){if(!this._validate(o.t,a,l))for(let p in a){let d=a[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),d):this._transitionable.setValue(p,d)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,l,p){return(!p||p.validate!==!1)&&o.x(this,a.call(o.y,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}let xt=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class pr extends o.E{constructor(a){super(),this._transitionable=new o.T(xt),this.setSky(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.C(0))}setSky(a,l={}){if(!this._validate(o.F,a,l)){a||(a={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let p in a){let d=a[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),d):this._transitionable.setValue(p,d)}}}getSky(){return this._transitionable.serialize()}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,l,p={}){return(p==null?void 0:p.validate)!==!1&&o.x(this,a.call(o.y,o.e({value:l,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(a){return a<60?0:a<70?(a-60)/10:1}}class Jt{constructor(a,l){this.width=a,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,l){let p=a.join(",")+String(l);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(a,l)),this.dashEntry[p]}getDashRanges(a,l,p){let d=[],y=a.length%2==1?-a[a.length-1]*p:0,w=a[0]*p,C=!0;d.push({left:y,right:w,isDash:C,zeroLength:a[0]===0});let A=a[0];for(let O=1;O<a.length;O++){C=!C;let D=a[O];y=A*p,A+=D,w=A*p,d.push({left:y,right:w,isDash:C,zeroLength:D===0})}return d}addRoundDash(a,l,p){let d=l/2;for(let y=-p;y<=p;y++){let w=this.width*(this.nextRow+p+y),C=0,A=a[C];for(let O=0;O<this.width;O++){O/A.right>1&&(A=a[++C]);let D=Math.abs(O-A.left),z=Math.abs(O-A.right),N=Math.min(D,z),$,G=y/p*(d+1);if(A.isDash){let ae=d-Math.abs(G);$=Math.sqrt(N*N+ae*ae)}else $=d-Math.sqrt(N*N+G*G);this.data[w+O]=Math.max(0,Math.min(255,$+128))}}}addRegularDash(a){for(let C=a.length-1;C>=0;--C){let A=a[C],O=a[C+1];A.zeroLength?a.splice(C,1):O&&O.isDash===A.isDash&&(O.left=A.left,a.splice(C,1))}let l=a[0],p=a[a.length-1];l.isDash===p.isDash&&(l.left=p.left-this.width,p.right=l.right+this.width);let d=this.width*this.nextRow,y=0,w=a[y];for(let C=0;C<this.width;C++){C/w.right>1&&(w=a[++y]);let A=Math.abs(C-w.left),O=Math.abs(C-w.right),D=Math.min(A,O);this.data[d+C]=Math.max(0,Math.min(255,(w.isDash?D:-D)+128))}}addDash(a,l){let p=l?7:0,d=2*p+1;if(this.nextRow+d>this.height)return o.w("LineAtlas out of space"),null;let y=0;for(let C=0;C<a.length;C++)y+=a[C];if(y!==0){let C=this.width/y,A=this.getDashRanges(a,this.width,C);l?this.addRoundDash(A,C,p):this.addRegularDash(A)}let w={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:y};return this.nextRow+=d,this.dirty=!0,w}bind(a){let l=a.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}let oo="maplibre_preloaded_worker_pool";class un{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<un.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[oo]}numActive(){return Object.keys(this.active).length}}let Ia=Math.floor(S.hardwareConcurrency/2),Un,Br;function Vn(){return Un||(Un=new un),Un}un.workerCount=o.G(globalThis)?Math.max(Math.min(Ia,3),1):1;class zt{constructor(a,l){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=l;let p=this.workerPool.acquire(l);for(let d=0;d<p.length;d++){let y=new o.H(p[d],l);y.name=`Worker ${d}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,l){let p=[];for(let d of this.actors)p.push(d.sendAsync({type:a,data:l}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,l){for(let p of this.actors)p.registerMessageHandler(a,l)}}function _i(){return Br||(Br=new zt(Vn(),o.J),Br.registerMessageHandler("GR",(g,a,l)=>o.m(a,l))),Br}function xi(g,a){let l=o.K();return o.L(l,l,[1,1,0]),o.M(l,l,[.5*g.width,.5*g.height,1]),g.calculatePosMatrix?o.N(l,l,g.calculatePosMatrix(a.toUnwrapped())):l}function wn(g,a,l,p,d,y,w){var C;let A=function(N,$,G){if(N)for(let ae of N){let oe=$[ae];if(oe&&oe.source===G&&oe.type==="fill-extrusion")return!0}else for(let ae in $){let oe=$[ae];if(oe.source===G&&oe.type==="fill-extrusion")return!0}return!1}((C=d==null?void 0:d.layers)!==null&&C!==void 0?C:null,a,g.id),O=y.maxPitchScaleFactor(),D=g.tilesIn(p,O,A);D.sort(ii);let z=[];for(let N of D)z.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(a,l,g._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,d,y,O,xi(g.transform,N.tileID),w?($,G)=>w(N.tileID,$,G):void 0)});return function(N,$){for(let G in N)for(let ae of N[G])Ur(ae,$);return N}(function(N){let $={},G={};for(let ae of N){let oe=ae.queryResults,se=ae.wrappedTileID,he=G[se]=G[se]||{};for(let ve in oe){let me=oe[ve],ge=he[ve]=he[ve]||{},be=$[ve]=$[ve]||[];for(let ye of me)ge[ye.featureIndex]||(ge[ye.featureIndex]=!0,be.push(ye))}}return $}(z),g)}function ii(g,a){let l=g.tileID,p=a.tileID;return l.overscaledZ-p.overscaledZ||l.canonical.y-p.canonical.y||l.wrap-p.wrap||l.canonical.x-p.canonical.x}function Ur(g,a){let l=g.feature,p=a.getFeatureState(l.layer["source-layer"],l.id);l.source=l.layer.source,l.layer["source-layer"]&&(l.sourceLayer=l.layer["source-layer"]),l.state=p}function Dn(g,a,l){return o._(this,void 0,void 0,function*(){let p=g;if(g.url?p=(yield o.j(a.transformRequest(g.url,"Source"),l)).data:yield S.frameAsync(l),!p)return null;let d=o.O(o.e(p,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(d.vectorLayerIds=p.vector_layers.map(y=>y.id)),d})}class er{constructor(a,l){a&&(l?this.setSouthWest(a).setNorthEast(l):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof o.Q?new o.Q(a.lng,a.lat):o.Q.convert(a),this}setSouthWest(a){return this._sw=a instanceof o.Q?new o.Q(a.lng,a.lat):o.Q.convert(a),this}extend(a){let l=this._sw,p=this._ne,d,y;if(a instanceof o.Q)d=a,y=a;else{if(!(a instanceof er))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(er.convert(a)):this.extend(o.Q.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(o.Q.convert(a)):this;if(d=a._sw,y=a._ne,!d||!y)return this}return l||p?(l.lng=Math.min(d.lng,l.lng),l.lat=Math.min(d.lat,l.lat),p.lng=Math.max(y.lng,p.lng),p.lat=Math.max(y.lat,p.lat)):(this._sw=new o.Q(d.lng,d.lat),this._ne=new o.Q(y.lng,y.lat)),this}getCenter(){return new o.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.Q(this.getWest(),this.getNorth())}getSouthEast(){return new o.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){let{lng:l,lat:p}=o.Q.convert(a),d=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&d}static convert(a){return a instanceof er?a:a&&new er(a)}static fromLngLat(a,l=0){let p=360*l/40075017,d=p/Math.cos(Math.PI/180*a.lat);return new er(new o.Q(a.lng-d,a.lat-p),new o.Q(a.lng+d,a.lat+p))}adjustAntiMeridian(){let a=new o.Q(this._sw.lng,this._sw.lat),l=new o.Q(this._ne.lng,this._ne.lat);return new er(a,a.lng>l.lng?new o.Q(l.lng+360,l.lat):l)}}class Io{constructor(a,l,p){this.bounds=er.convert(this.validateBounds(a)),this.minzoom=l||0,this.maxzoom=p||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){let l=Math.pow(2,a.z),p=Math.floor(o.U(this.bounds.getWest())*l),d=Math.floor(o.S(this.bounds.getNorth())*l),y=Math.ceil(o.U(this.bounds.getEast())*l),w=Math.ceil(o.S(this.bounds.getSouth())*l);return a.x>=p&&a.x<y&&a.y>=d&&a.y<w}}class $a extends o.E{constructor(a,l,p,d){if(super(),this.id=a,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.O(l,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(d)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let a=yield Dn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(o.e(this,a),a.bounds&&(this.tileBounds=new Io(a.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new o.k(a))}})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(a){return o._(this,void 0,void 0,function*(){let l=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(l,"Tile"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};p.request.collectResourceTiming=this._collectResourceTiming;let d="RT";if(a.actor&&a.state!=="expired"){if(a.state==="loading")return new Promise((y,w)=>{a.reloadPromise={resolve:y,reject:w}})}else a.actor=this.dispatcher.getActor(),d="LT";a.abortController=new AbortController;try{let y=yield a.actor.sendAsync({type:d,data:p},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,y)}catch(y){if(delete a.abortController,a.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(a,null)}})}_afterTileLoadWorkerResponse(a,l){if(l&&l.resourceTiming&&(a.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&a.setExpiryData(l),a.loadVectorData(l,this.map.painter),a.reloadPromise){let p=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(p.resolve).catch(p.reject)}}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"AT",data:{uid:a.uid,type:this.type,source:this.id}}))})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class ki extends o.E{constructor(a,l,p,d){super(),this.id=a,this.dispatcher=p,this.setEventedParent(d),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},l),o.e(this,o.O(l,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(a=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let l=yield Dn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,l&&(o.e(this,l),l.bounds&&(this.tileBounds=new Io(l.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:a})))}catch(l){this._tileJSONRequest=null,this.fire(new o.k(l))}})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load(!0)}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}serialize(){return o.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return o._(this,void 0,void 0,function*(){let l=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{let p=yield Q.getImage(this.map._requestManager.transformRequest(l,"Tile"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&a.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});let d=this.map.painter.context,y=d.gl,w=p.data;a.texture=this.map.painter.getTileTexture(w.width),a.texture?a.texture.update(w,{useMipmap:!0}):(a.texture=new Le(d,w,y.RGBA,{useMipmap:!0}),a.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),a.state="loaded"}}catch(p){if(delete a.abortController,a.aborted)a.state="unloaded";else if(p)throw a.state="errored",p}})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)})}hasTransition(){return!1}}class ol extends ki{constructor(a,l,p,d){super(a,l,p,d),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(a){return o._(this,void 0,void 0,function*(){let l=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(l,"Tile");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{let d=yield Q.getImage(p,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(d&&d.data){let y=d.data;this.map._refreshExpiredTiles&&(d.cacheControl||d.expires)&&a.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});let w=o.b(y)&&o.V()?y:yield this.readImageNow(y),C={type:this.type,uid:a.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state==="expired"){a.actor=this.dispatcher.getActor();let A=yield a.actor.sendAsync({type:"LDT",data:C});a.dem=A,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(d){if(delete a.abortController,a.aborted)a.state="unloaded";else if(d)throw a.state="errored",d}})}readImageNow(a){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&o.W()){let l=a.width+2,p=a.height+2;try{return new o.R({width:l,height:p},yield o.X(a,-1,-1,l,p))}catch(d){}}return S.getImageData(a,1)})}_getNeighboringTiles(a){let l=a.canonical,p=Math.pow(2,l.z),d=(l.x-1+p)%p,y=l.x===0?a.wrap-1:a.wrap,w=(l.x+1+p)%p,C=l.x+1===p?a.wrap+1:a.wrap,A={};return A[new o.Y(a.overscaledZ,y,l.z,d,l.y).key]={backfilled:!1},A[new o.Y(a.overscaledZ,C,l.z,w,l.y).key]={backfilled:!1},l.y>0&&(A[new o.Y(a.overscaledZ,y,l.z,d,l.y-1).key]={backfilled:!1},A[new o.Y(a.overscaledZ,a.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},A[new o.Y(a.overscaledZ,C,l.z,w,l.y-1).key]={backfilled:!1}),l.y+1<p&&(A[new o.Y(a.overscaledZ,y,l.z,d,l.y+1).key]={backfilled:!1},A[new o.Y(a.overscaledZ,a.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},A[new o.Y(a.overscaledZ,C,l.z,w,l.y+1).key]={backfilled:!1}),A}unloadTile(a){return o._(this,void 0,void 0,function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"RDT",data:{type:this.type,uid:a.uid,source:this.id}}))})}}class al extends o.E{constructor(a,l,p,d){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(d),this._data=l.data,this._options=o.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId,l.clusterMaxZoom!==void 0&&this.maxzoom<=l.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${l.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(l.buffer!==void 0?l.buffer:128),tolerance:this._pixelsToTileUnits(l.tolerance!==void 0?l.tolerance:.375),extent:o.Z,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:o.Z,radius:this._pixelsToTileUnits(l.clusterRadius||50),log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(a){return a*(o.Z/this.tileSize)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}getData(){return o._(this,void 0,void 0,function*(){let a=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:a})})}getCoordinatesFromGeometry(a){return a.type==="GeometryCollection"?a.geometries.map(l=>l.coordinates).flat(1/0):a.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,function*(){let a=new er,l=yield this.getData(),p;switch(l.type){case"FeatureCollection":p=l.features.map(d=>this.getCoordinatesFromGeometry(d.geometry)).flat(1/0);break;case"Feature":p=this.getCoordinatesFromGeometry(l.geometry);break;default:p=this.getCoordinatesFromGeometry(l)}if(p.length==0)return a;for(let d=0;d<p.length-1;d+=2)a.extend([p[d],p[d+1]]);return a})}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(a.clusterRadius)),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,l,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:a,limit:l,offset:p}})}_updateWorkerData(a){return o._(this,void 0,void 0,function*(){let l=o.e({type:this.type},this.workerOptions);a?l.dataDiff=a:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(S.resolveURL(this._data),"Source"),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.l("dataloading",{dataType:"source"}));try{let p=yield this.actor.sendAsync({type:"LD",data:l});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));let d=null;p.resourceTiming&&p.resourceTiming[this.id]&&(d=p.resourceTiming[this.id].slice(0));let y={dataType:"source"};this._collectResourceTiming&&d&&d.length>0&&o.e(y,{resourceTiming:d}),this.fire(new o.l("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(p))}})}loaded(){return this._pendingLoads===0}loadTile(a){return o._(this,void 0,void 0,function*(){let l=a.actor?"RT":"LT";a.actor=this.actor;let p={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};a.abortController=new AbortController;let d=yield this.actor.sendAsync({type:l,data:p},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(d,this.map.painter,l==="RT")})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class oi extends o.E{constructor(a,l,p,d){super(),this.flippedWindingOrder=!1,this.id=a,this.dispatcher=p,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(d),this.options=l}load(a){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let l=yield Q.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,a&&(this.coordinates=a),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,this.fire(new o.k(l))}})}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;let l=a.map(o.$.fromLngLat);var p;return this.tileID=function(d){let y=1/0,w=1/0,C=-1/0,A=-1/0;for(let N of d)y=Math.min(y,N.x),w=Math.min(w,N.y),C=Math.max(C,N.x),A=Math.max(A,N.y);let O=Math.max(C-y,A-w),D=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),z=Math.pow(2,D);return new o.a1(D,Math.floor((y+C)/2*z),Math.floor((w+A)/2*z))}(l),this.terrainTileRanges=this._getOverlappingTileRanges(l),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=l.map(d=>this.tileID.getTilePoint(d)._round()),this.flippedWindingOrder=((p=this.tileCoords)[1].x-p[0].x)*(p[2].y-p[0].y)-(p[1].y-p[0].y)*(p[2].x-p[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let a=this.map.painter.context,l=a.gl;this.texture||(this.texture=new Le(a,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let p=!1;for(let d in this.tiles){let y=this.tiles[d];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,p=!0)}p&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(a){let l=1/0,p=1/0,d=-1/0,y=-1/0;for(let C of a)l=Math.min(l,C.x),p=Math.min(p,C.y),d=Math.max(d,C.x),y=Math.max(y,C.y);let w={};for(let C=0;C<=o.a0;C++){let A=Math.pow(2,C),O=Math.floor(l*A),D=Math.floor(p*A),z=Math.floor(d*A),N=Math.floor(y*A);w[C]={minTileX:O,minTileY:D,maxTileX:z,maxTileY:N}}return w}}class Co extends oi{constructor(a,l,p,d){super(a,l,p,d),this.roundZoom=!0,this.type="video",this.options=l}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;let a=this.options;this.urls=[];for(let l of a.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{let l=yield o.a2(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new o.k(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){let l=this.video.seekable;a<l.start(0)||a>l.end(0)?this.fire(new o.k(new o.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let a=this.map.painter.context,l=a.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new Le(a,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let p=!1;for(let d in this.tiles){let y=this.tiles[d];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,p=!0)}p&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Zo extends oi{constructor(a,l,p,d){super(a,l,p,d),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(w=>typeof w!="number"))||this.fire(new o.k(new o.a3(`sources.${a}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new o.k(new o.a3(`sources.${a}`,null,"missing required property \"coordinates\""))),l.animate&&typeof l.animate!="boolean"&&this.fire(new o.k(new o.a3(`sources.${a}`,null,"optional \"animate\" property must be a boolean value"))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a3(`sources.${a}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new o.k(new o.a3(`sources.${a}`,null,"missing required property \"canvas\""))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let l=this.map.painter.context,p=l.gl;this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Le(l,this.canvas,p.RGBA,{premultiply:!0});let d=!1;for(let y in this.tiles){let w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,d=!0)}d&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}let Is={},Wo=g=>{switch(g){case"geojson":return al;case"image":return oi;case"raster":return ki;case"raster-dem":return ol;case"vector":return $a;case"video":return Co;case"canvas":return Zo}return Is[g]},sl="RTLPluginLoaded";class Cs extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=_i()}_syncState(a){return this.status=a,this.dispatcher.broadcast("SRPS",{pluginStatus:a,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return o._(this,arguments,void 0,function*(l,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=S.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(sl))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ps=null;function Ca(){return Ps||(Ps=new Cs),Ps}class Ho{constructor(a,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=o.a4(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){let l=a+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,l,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(d,y){let w={};if(!y)return w;for(let C of d){let A=C.layerIds.map(O=>y.getLayer(O)).filter(Boolean);if(A.length!==0){C.layers=A,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(O=>A.filter(D=>D.id===O)[0]));for(let O of A)w[O.id]=C}}return w}(a.buckets,l==null?void 0:l.style),this.hasSymbolBuckets=!1;for(let d in this.buckets){let y=this.buckets[d];if(y instanceof o.a6){if(this.hasSymbolBuckets=!0,!p)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let d in this.buckets){let y=this.buckets[d];if(y instanceof o.a6&&y.hasRTLText){this.hasRTLText=!0,Ca().lazyLoad();break}}this.queryPadding=0;for(let d in this.buckets){let y=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(d).queryRadius(y))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new o.a5}unloadVectorData(){for(let a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(let p in this.buckets){let d=this.buckets[p];d.uploadPending()&&d.upload(a)}let l=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Le(a,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Le(a,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,l,p,d,y,w,C,A,O,D,z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:y,scale:w,tileSize:this.tileSize,pixelPosMatrix:D,transform:A,params:C,queryPadding:this.queryPadding*O,getElevation:z},a,l,p):{}}querySourceFeatures(a,l){let p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;let d=p.loadVTLayers(),y=l&&l.sourceLayer?l.sourceLayer:"",w=d._geojsonTileLayer||d[y];if(!w)return;let C=o.a7(l&&l.filter),{z:A,x:O,y:D}=this.tileID.canonical,z={z:A,x:O,y:D};for(let N=0;N<w.length;N++){let $=w.feature(N);if(C.needGeometry){let oe=o.a8($,!0);if(!C.filter(new o.C(this.tileID.overscaledZ),oe,this.tileID.canonical))continue}else if(!C.filter(new o.C(this.tileID.overscaledZ),$))continue;let G=p.getId($,y),ae=new o.a9($,A,O,D,G);ae.tile=z,a.push(ae)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){let l=this.expirationTime;if(a.cacheControl){let p=o.aa(a.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){let p=Date.now(),d=!1;if(this.expirationTime>p)d=!1;else if(l){if(this.expirationTime<l)d=!0;else{let y=this.expirationTime-l;y?this.expirationTime=p+Math.max(y,3e4):d=!0}}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;let p=this.latestFeatureIndex.loadVTLayers();for(let d in this.buckets){if(!l.style.hasLayer(d))continue;let y=this.buckets[d],w=y.layers[0].sourceLayer||"_geojsonTileLayer",C=p[w],A=a[w];if(!C||!A||Object.keys(A).length===0)continue;y.update(A,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});let O=l&&l.style&&l.style.getLayer(d);O&&(this.queryPadding=Math.max(this.queryPadding,O.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<S.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=S.now()+a}setDependencies(a,l){let p={};for(let d of l)p[d]=!0;this.dependencies[a]=p}hasDependency(a,l){for(let p of a){let d=this.dependencies[p];if(d){for(let y of l)if(d[y])return!0}}return!1}}class Ga{constructor(a,l){this.max=a,this.onRemove=l,this.reset()}reset(){for(let a in this.data)for(let l of this.data[a])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(a,l,p){let d=a.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);let y={value:l,timeout:void 0};if(p!==void 0&&(y.timeout=setTimeout(()=>{this.remove(a,y)},p)),this.data[d].push(y),this.order.push(d),this.order.length>this.max){let w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){let l=this.data[a].shift();return l.timeout&&clearTimeout(l.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),l.value}getByKey(a){let l=this.data[a];return l?l[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,l){if(!this.has(a))return this;let p=a.wrapped().key,d=l===void 0?0:this.data[p].indexOf(l),y=this.data[p][d];return this.data[p].splice(d,1),y.timeout&&clearTimeout(y.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(y.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){let l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(a){let l=[];for(let p in this.data)for(let d of this.data[p])a(d.value)||l.push(d);for(let p of l)this.remove(p.value.tileID,p)}}class Ko{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,l,p){let d=String(l);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][d]=this.stateChanges[a][d]||{},o.e(this.stateChanges[a][d],p),this.deletedStates[a]===null){this.deletedStates[a]={};for(let y in this.state[a])y!==d&&(this.deletedStates[a][y]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][d]===null){this.deletedStates[a][d]={};for(let y in this.state[a][d])p[y]||(this.deletedStates[a][d][y]=null)}else for(let y in p)this.deletedStates[a]&&this.deletedStates[a][d]&&this.deletedStates[a][d][y]===null&&delete this.deletedStates[a][d][y]}removeFeatureState(a,l,p){if(this.deletedStates[a]===null)return;let d=String(l);if(this.deletedStates[a]=this.deletedStates[a]||{},p&&l!==void 0)this.deletedStates[a][d]!==null&&(this.deletedStates[a][d]=this.deletedStates[a][d]||{},this.deletedStates[a][d][p]=null);else if(l!==void 0){if(this.stateChanges[a]&&this.stateChanges[a][d])for(p in this.deletedStates[a][d]={},this.stateChanges[a][d])this.deletedStates[a][d][p]=null;else this.deletedStates[a][d]=null;}else this.deletedStates[a]=null}getState(a,l){let p=String(l),d=o.e({},(this.state[a]||{})[p],(this.stateChanges[a]||{})[p]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){let y=this.deletedStates[a][l];if(y===null)return{};for(let w in y)delete d[w]}return d}initializeTileState(a,l){a.setFeatureState(this.state,l)}coalesceChanges(a,l){let p={};for(let d in this.stateChanges){this.state[d]=this.state[d]||{};let y={};for(let w in this.stateChanges[d])this.state[d][w]||(this.state[d][w]={}),o.e(this.state[d][w],this.stateChanges[d][w]),y[w]=this.state[d][w];p[d]=y}for(let d in this.deletedStates){this.state[d]=this.state[d]||{};let y={};if(this.deletedStates[d]===null)for(let w in this.state[d])y[w]={},this.state[d][w]={};else for(let w in this.deletedStates[d]){if(this.deletedStates[d][w]===null)this.state[d][w]={};else for(let C of Object.keys(this.deletedStates[d][w]))delete this.state[d][w][C];y[w]=this.state[d][w]}p[d]=p[d]||{},o.e(p[d],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(let d in a)a[d].setFeatureState(p,l)}}let $n=89.25;function ai(g,a){let l=o.ae(a.lat,-85.051129,o.af);return new o.P(o.U(a.lng)*g,o.S(l)*g)}function ao(g,a){return new o.$(a.x/g,a.y/g).toLngLat()}function Ee(g){return g.cameraToCenterDistance*Math.min(.85*Math.tan(o.ab(90-g.pitch)),Math.tan(o.ab($n-g.pitch)))}function X(g,a){let l=g.canonical,p=a/o.ac(l.z),d=l.x+Math.pow(2,l.z)*g.wrap,y=o.ad(new Float64Array(16));return o.L(y,y,[d*p,l.y*p,0]),o.M(y,y,[p/o.Z,p/o.Z,1]),y}function Y(g,a,l,p,d){let y=o.$.fromLngLat(g,a),w=d*o.ag(1,g.lat),C=w*Math.cos(o.ab(l)),A=Math.sqrt(w*w-C*C),O=A*Math.sin(o.ab(-p)),D=A*Math.cos(o.ab(-p));return new o.$(y.x+O,y.y+D,y.z+C)}function ie(g,a,l){let p=a.intersectsFrustum(g);if(!l)return p;let d=a.intersectsPlane(l);return p===0||d===0?0:p===2&&d===2?2:1}function pe(g,a,l){let p=0,d=(l-a)/10;for(let y=0;y<10;y++)p+=d*Math.pow(Math.cos(a+(y+.5)/10*(l-a)),g);return p}function xe(g,a){return function(l,p,d,y,w){let C=2*((g-1)/o.ah(Math.cos(o.ab($n-w))/Math.cos(o.ab($n)))-1),A=Math.acos(d/y),O=2*pe(C-1,0,o.ab(w/2)),D=Math.min(o.ab($n),A+o.ab(w/2)),z=pe(C-1,Math.min(D,A-o.ab(w/2)),D),N=Math.atan(p/d),$=Math.hypot(p,d),G=l;return G+=o.ah(y/$/Math.max(.5,Math.cos(o.ab(w/2)))),G+=C*o.ah(Math.cos(N))/2,G-=o.ah(Math.max(1,z/O/a))/2,G}}let re=xe(9.314,3);function Pe(g,a){let l=(a.roundZoom?Math.round:Math.floor)(g.zoom+o.ah(g.tileSize/a.tileSize));return Math.max(0,l)}function we(g,a){let l=g.getCameraFrustum(),p=g.getClippingPlane(),d=g.screenPointToMercatorCoordinate(g.getCameraPoint()),y=o.$.fromLngLat(g.center,g.elevation);d.z=y.z+Math.cos(g.pitchInRadians)*g.cameraToCenterDistance/g.worldSize;let w=g.getCoveringTilesDetailsProvider(),C=w.allowVariableZoom(g,a),A=Pe(g,a),O=a.minzoom||0,D=a.maxzoom!==void 0?a.maxzoom:g.maxZoom,z=Math.min(Math.max(0,A),D),N=Math.pow(2,z),$=[N*d.x,N*d.y,0],G=[N*y.x,N*y.y,0],ae=Math.hypot(y.x-d.x,y.y-d.y),oe=Math.abs(y.z-d.z),se=Math.hypot(ae,oe),he=ge=>({zoom:0,x:0,y:0,wrap:ge,fullyVisible:!1}),ve=[],me=[];if(g.renderWorldCopies&&w.allowWorldCopies())for(let ge=1;ge<=3;ge++)ve.push(he(-ge)),ve.push(he(ge));for(ve.push(he(0));ve.length>0;){let ge=ve.pop(),be=ge.x,ye=ge.y,Ie=ge.fullyVisible,Ne={x:be,y:ye,z:ge.zoom},qe=w.getTileAABB(Ne,ge.wrap,g.elevation,a);if(!Ie){let Xe=ie(l,qe,p);if(Xe===0)continue;Ie=Xe===2}let Re=w.distanceToTile2d(d.x,d.y,Ne,qe),Oe=A;C&&(Oe=(a.calculateTileZoom||re)(g.zoom+o.ah(g.tileSize/a.tileSize),Re,oe,se,g.fov)),Oe=(a.roundZoom?Math.round:Math.floor)(Oe),Oe=Math.max(0,Oe);let Qe=Math.min(Oe,D);if(ge.wrap=w.getWrap(y,Ne,ge.wrap),ge.zoom>=Qe){if(ge.zoom<O)continue;let Xe=z-ge.zoom,Ge=$[0]-.5-(be<<Xe),ut=$[1]-.5-(ye<<Xe),kt=a.reparseOverscaled?Math.max(ge.zoom,Oe):ge.zoom;me.push({tileID:new o.Y(ge.zoom===D?kt:ge.zoom,ge.wrap,ge.zoom,be,ye),distanceSq:o.ai([G[0]-.5-be,G[1]-.5-ye]),tileDistanceToCamera:Math.sqrt(Ge*Ge+ut*ut)})}else for(let Xe=0;Xe<4;Xe++)ve.push({zoom:ge.zoom+1,x:(be<<1)+Xe%2,y:(ye<<1)+(Xe>>1),wrap:ge.wrap,fullyVisible:Ie})}return me.sort((ge,be)=>ge.distanceSq-be.distanceSq).map(ge=>ge.tileID)}class Se extends o.E{constructor(a,l,p){super(),this.id=a,this.dispatcher=p,this.on("data",d=>this._dataHandler(d)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((d,y,w,C)=>{let A=new(Wo(y.type))(d,y,w,C);if(A.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${A.id}`);return A})(a,l,p,this),this._tiles={},this._cache=new Ga(0,d=>this._unloadTile(d)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ko,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let a in this._tiles){let l=this._tiles[a];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,l,p){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,l,p)}catch(d){a.state="errored",d.status!==404?this._source.fire(new o.k(d,{tile:a})):this.update(this.transform,this.terrain)}})}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new o.l("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let l in this._tiles){let p=this._tiles[l];p.upload(a),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(Me).map(a=>a.key)}getRenderableIds(a){let l=[];for(let p in this._tiles)this._isIdRenderable(p,a)&&l.push(this._tiles[p]);return a?l.sort((p,d)=>{let y=p.tileID,w=d.tileID,C=new o.P(y.canonical.x,y.canonical.y)._rotate(-this.transform.bearingInRadians),A=new o.P(w.canonical.x,w.canonical.y)._rotate(-this.transform.bearingInRadians);return y.overscaledZ-w.overscaledZ||A.y-C.y||A.x-C.x}).map(p=>p.tileID.key):l.map(p=>p.tileID).sort(Me).map(p=>p.key)}hasRenderableParent(a){let l=this.findLoadedParent(a,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(a,l){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(l||!this._tiles[a].holdingForFade())}reload(a){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let l in this._tiles)(a||this._tiles[l].state!=="errored")&&this._reloadTile(l,"reloading")}}_reloadTile(a,l){return o._(this,void 0,void 0,function*(){let p=this._tiles[a];p&&(p.state!=="loading"&&(p.state=l),yield this._loadTile(p,a,l))})}_tileLoaded(a,l,p){a.timeAdded=S.now(),p==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(l,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){let l=this.getRenderableIds();for(let d=0;d<l.length;d++){let y=l[d];if(a.neighboringTiles&&a.neighboringTiles[y]){let w=this.getTileByID(y);p(a,w),p(w,a)}}function p(d,y){d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0;let w=y.tileID.canonical.x-d.tileID.canonical.x,C=y.tileID.canonical.y-d.tileID.canonical.y,A=Math.pow(2,d.tileID.canonical.z),O=y.tileID.key;w===0&&C===0||Math.abs(C)>1||(Math.abs(w)>1&&(Math.abs(w+A)===1?w+=A:Math.abs(w-A)===1&&(w-=A)),y.dem&&d.dem&&(d.dem.backfillBorder(y.dem,w,C),d.neighboringTiles&&d.neighboringTiles[O]&&(d.neighboringTiles[O].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,l,p,d){for(let y in this._tiles){let w=this._tiles[y];if(d[y]||!w.hasData()||w.tileID.overscaledZ<=l||w.tileID.overscaledZ>p)continue;let C=w.tileID;for(;w&&w.tileID.overscaledZ>l+1;){let O=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[O.key],w&&w.hasData()&&(C=O)}let A=C;for(;A.overscaledZ>l;)if(A=A.scaledTo(A.overscaledZ-1),a[A.key]||a[A.canonical.key]){d[C.key]=C;break}}}findLoadedParent(a,l){if(a.key in this._loadedParentTiles){let p=this._loadedParentTiles[a.key];return p&&p.tileID.overscaledZ>=l?p:null}for(let p=a.overscaledZ-1;p>=l;p--){let d=a.scaledTo(p),y=this._getLoadedTile(d);if(y)return y}}findLoadedSibling(a){return this._getLoadedTile(a)}_getLoadedTile(a){let l=this._tiles[a.key];return l&&l.hasData()?l:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){let l=Math.ceil(a.width/this._source.tileSize)+1,p=Math.ceil(a.height/this._source.tileSize)+1,d=Math.floor(l*p*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,d):d;this._cache.setMaxSize(y)}handleWrapJump(a){let l=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,l){let p={};for(let d in this._tiles){let y=this._tiles[d];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+l),p[y.tileID.key]=y}this._tiles=p;for(let d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(let d in this._tiles)this._setTileReloadTimer(d,this._tiles[d])}}_updateCoveredAndRetainedTiles(a,l,p,d,y,w){let C={},A={},O=Object.keys(a),D=S.now();for(let z of O){let N=a[z],$=this._tiles[z];if(!$||$.fadeEndTime!==0&&$.fadeEndTime<=D)continue;let G=this.findLoadedParent(N,l),ae=this.findLoadedSibling(N),oe=G||ae||null;oe&&(this._addTile(oe.tileID),C[oe.tileID.key]=oe.tileID),A[z]=N}this._retainLoadedChildren(A,d,p,a);for(let z in C)a[z]||(this._coveredTiles[z]=!0,a[z]=C[z]);if(w){let z={},N={};for(let $ of y)this._tiles[$.key].hasData()?z[$.key]=$:N[$.key]=$;for(let $ in N){let G=N[$].children(this._source.maxzoom);this._tiles[G[0].key]&&this._tiles[G[1].key]&&this._tiles[G[2].key]&&this._tiles[G[3].key]&&(z[G[0].key]=a[G[0].key]=G[0],z[G[1].key]=a[G[1].key]=G[1],z[G[2].key]=a[G[2].key]=G[2],z[G[3].key]=a[G[3].key]=G[3],delete N[$])}for(let $ in N){let G=N[$],ae=this.findLoadedParent(G,this._source.minzoom),oe=this.findLoadedSibling(G),se=ae||oe||null;if(se){z[se.tileID.key]=a[se.tileID.key]=se.tileID;for(let he in z)z[he].isChildOf(se.tileID)&&delete z[he]}}for(let $ in this._tiles)z[$]||(this._coveredTiles[$]=!0)}}update(a,l){if(!this._sourceLoaded||this._paused)return;let p;this.transform=a,this.terrain=l,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(D=>new o.Y(D.canonical.z,D.wrap,D.canonical.z,D.canonical.x,D.canonical.y)):(p=we(a,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(p=p.filter(D=>this._source.hasTile(D)))):p=[];let d=Pe(a,this._source),y=Math.max(d-Se.maxOverzooming,this._source.minzoom),w=Math.max(d+Se.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let D={};for(let z of p)if(z.canonical.z>this._source.minzoom){let N=z.scaledTo(z.canonical.z-1);D[N.key]=N;let $=z.scaledTo(Math.max(this._source.minzoom,Math.min(z.canonical.z,5)));D[$.key]=$}p=p.concat(Object.values(D))}let C=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let A=this._updateRetainedTiles(p,d);Te(this._source.type)&&this._updateCoveredAndRetainedTiles(A,y,w,d,p,l);for(let D in A)this._tiles[D].clearFadeHold();let O=o.aj(this._tiles,A);for(let D of O){let z=this._tiles[D];z.hasSymbolBuckets&&!z.holdingForFade()?z.setHoldDuration(this.map._fadeDuration):z.hasSymbolBuckets&&!z.symbolFadeFinished()||this._removeTile(D)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,l){var p;let d={},y={},w=Math.max(l-Se.maxOverzooming,this._source.minzoom),C=Math.max(l+Se.maxUnderzooming,this._source.minzoom),A={};for(let O of a){let D=this._addTile(O);d[O.key]=O,D.hasData()||l<this._source.maxzoom&&(A[O.key]=O)}this._retainLoadedChildren(A,l,C,d);for(let O of a){let D=this._tiles[O.key];if(D.hasData())continue;if(l+1>this._source.maxzoom){let N=O.children(this._source.maxzoom)[0],$=this.getTile(N);if($&&$.hasData()){d[N.key]=N;continue}}else{let N=O.children(this._source.maxzoom);if(d[N[0].key]&&d[N[1].key]&&d[N[2].key]&&d[N[3].key])continue}let z=D.wasRequested();for(let N=O.overscaledZ-1;N>=w;--N){let $=O.scaledTo(N);if(y[$.key])break;if(y[$.key]=!0,D=this.getTile($),!D&&z&&(D=this._addTile($)),D){let G=D.hasData();if((G||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||z)&&(d[$.key]=$),z=D.wasRequested(),G)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let a in this._tiles){let l=[],p,d=this._tiles[a].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){p=this._loadedParentTiles[d.key];break}l.push(d.key);let y=d.scaledTo(d.overscaledZ-1);if(p=this._getLoadedTile(y),p)break;d=y}for(let y of l)this._loadedParentTiles[y]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let a in this._tiles){let l=this._tiles[a].tileID,p=this._getLoadedTile(l);this._loadedSiblingTiles[l.key]=p}}_addTile(a){let l=this._tiles[a.key];if(l)return l;l=this._cache.getAndRemove(a),l&&(this._setTileReloadTimer(a.key,l),l.tileID=a,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,l)));let p=l;return l||(l=new Ho(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(l,a.key,l.state)),l.uses++,this._tiles[a.key]=l,p||this._source.fire(new o.l("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(a,l){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);let p=l.getExpiryTimeout();p&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},p))}refreshTiles(a){for(let l in this._tiles)this._isIdRenderable(l)&&a.some(p=>p.equals(this._tiles[l].tileID.canonical))&&this._reloadTile(l,"expired")}_removeTile(a){let l=this._tiles[a];l&&(l.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(a){let l=a.sourceDataType;a.dataType==="source"&&l==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&a.dataType==="source"&&l==="content"&&(this.reload(a.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,l,p){let d=[],y=this.transform;if(!y)return d;let w=p?y.getCameraQueryGeometry(a):a,C=a.map(G=>y.screenPointToMercatorCoordinate(G,this.terrain)),A=w.map(G=>y.screenPointToMercatorCoordinate(G,this.terrain)),O=this.getIds(),D=1/0,z=1/0,N=-1/0,$=-1/0;for(let G of A)D=Math.min(D,G.x),z=Math.min(z,G.y),N=Math.max(N,G.x),$=Math.max($,G.y);for(let G=0;G<O.length;G++){let ae=this._tiles[O[G]];if(ae.holdingForFade())continue;let oe=y.getCoveringTilesDetailsProvider().allowWorldCopies()?ae.tileID:ae.tileID.unwrapTo(0),se=Math.pow(2,y.zoom-ae.tileID.overscaledZ),he=l*ae.queryPadding*o.Z/ae.tileSize/se,ve=[oe.getTilePoint(new o.$(D,z)),oe.getTilePoint(new o.$(N,$))];if(ve[0].x-he<o.Z&&ve[0].y-he<o.Z&&ve[1].x+he>=0&&ve[1].y+he>=0){let me=C.map(be=>oe.getTilePoint(be)),ge=A.map(be=>oe.getTilePoint(be));d.push({tile:ae,tileID:oe,queryGeometry:me,cameraQueryGeometry:ge,scale:se})}}return d}getVisibleCoordinates(a){let l=this.getRenderableIds(a).map(p=>this._tiles[p].tileID);return this.transform&&this.transform.populateCache(l),l}hasTransition(){if(this._source.hasTransition())return!0;if(Te(this._source.type)){let a=S.now();for(let l in this._tiles)if(this._tiles[l].fadeEndTime>=a)return!0}return!1}setFeatureState(a,l,p){this._state.updateState(a=a||"_geojsonTileLayer",l,p)}removeFeatureState(a,l,p){this._state.removeFeatureState(a=a||"_geojsonTileLayer",l,p)}getFeatureState(a,l){return this._state.getState(a=a||"_geojsonTileLayer",l)}setDependencies(a,l,p){let d=this._tiles[a];d&&d.setDependencies(l,p)}reloadTilesForDependencies(a,l){for(let p in this._tiles)this._tiles[p].hasDependency(a,l)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(a,l))}}function Me(g,a){let l=Math.abs(2*g.wrap)-+(g.wrap<0),p=Math.abs(2*a.wrap)-+(a.wrap<0);return g.overscaledZ-a.overscaledZ||p-l||a.canonical.y-g.canonical.y||a.canonical.x-g.canonical.x}function Te(g){return g==="raster"||g==="image"||g==="video"}Se.maxOverzooming=10,Se.maxUnderzooming=3;class Ue{constructor(a,l){this.reset(a,l)}reset(a,l){this.points=a||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=o.ae(a,0,1);let l=1,p=this._distances[l],d=a*this.paddedLength+this.padding;for(;p<d&&l<this._distances.length;)p=this._distances[++l];let y=l-1,w=this._distances[y],C=p-w,A=C>0?(d-w)/C:0;return this.points[y].mult(1-A).add(this.points[l].mult(A))}}function Je(g,a){let l=!0;return g==="always"||g!=="never"&&a!=="never"||(l=!1),l}class tt{constructor(a,l,p){let d=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(a/p),this.yCellCount=Math.ceil(l/p);for(let w=0;w<this.xCellCount*this.yCellCount;w++)d.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=l,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,l,p,d,y){this._forEachCell(l,p,d,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(d),this.bboxes.push(y)}insertCircle(a,l,p,d){this._forEachCell(l-d,p-d,l+d,p+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(l),this.circles.push(p),this.circles.push(d)}_insertBoxCell(a,l,p,d,y,w){this.boxCells[y].push(w)}_insertCircleCell(a,l,p,d,y,w){this.circleCells[y].push(w)}_query(a,l,p,d,y,w,C){if(p<0||a>this.width||d<0||l>this.height)return[];let A=[];if(a<=0&&l<=0&&this.width<=p&&this.height<=d){if(y)return[{key:null,x1:a,y1:l,x2:p,y2:d}];for(let O=0;O<this.boxKeys.length;O++)A.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){let D=this.circles[3*O],z=this.circles[3*O+1],N=this.circles[3*O+2];A.push({key:this.circleKeys[O],x1:D-N,y1:z-N,x2:D+N,y2:z+N})}}else this._forEachCell(a,l,p,d,this._queryCell,A,{hitTest:y,overlapMode:w,seenUids:{box:{},circle:{}}},C);return A}query(a,l,p,d){return this._query(a,l,p,d,!1,null)}hitTest(a,l,p,d,y,w){return this._query(a,l,p,d,!0,y,w).length>0}hitTestCircle(a,l,p,d,y){let w=a-p,C=a+p,A=l-p,O=l+p;if(C<0||w>this.width||O<0||A>this.height)return!1;let D=[];return this._forEachCell(w,A,C,O,this._queryCellCircle,D,{hitTest:!0,overlapMode:d,circle:{x:a,y:l,radius:p},seenUids:{box:{},circle:{}}},y),D.length>0}_queryCell(a,l,p,d,y,w,C,A){let{seenUids:O,hitTest:D,overlapMode:z}=C,N=this.boxCells[y];if(N!==null){let G=this.bboxes;for(let ae of N)if(!O.box[ae]){O.box[ae]=!0;let oe=4*ae,se=this.boxKeys[ae];if(a<=G[oe+2]&&l<=G[oe+3]&&p>=G[oe+0]&&d>=G[oe+1]&&(!A||A(se))&&(!D||!Je(z,se.overlapMode))&&(w.push({key:se,x1:G[oe],y1:G[oe+1],x2:G[oe+2],y2:G[oe+3]}),D))return!0}}let $=this.circleCells[y];if($!==null){let G=this.circles;for(let ae of $)if(!O.circle[ae]){O.circle[ae]=!0;let oe=3*ae,se=this.circleKeys[ae];if(this._circleAndRectCollide(G[oe],G[oe+1],G[oe+2],a,l,p,d)&&(!A||A(se))&&(!D||!Je(z,se.overlapMode))){let he=G[oe],ve=G[oe+1],me=G[oe+2];if(w.push({key:se,x1:he-me,y1:ve-me,x2:he+me,y2:ve+me}),D)return!0}}}return!1}_queryCellCircle(a,l,p,d,y,w,C,A){let{circle:O,seenUids:D,overlapMode:z}=C,N=this.boxCells[y];if(N!==null){let G=this.bboxes;for(let ae of N)if(!D.box[ae]){D.box[ae]=!0;let oe=4*ae,se=this.boxKeys[ae];if(this._circleAndRectCollide(O.x,O.y,O.radius,G[oe+0],G[oe+1],G[oe+2],G[oe+3])&&(!A||A(se))&&!Je(z,se.overlapMode))return w.push(!0),!0}}let $=this.circleCells[y];if($!==null){let G=this.circles;for(let ae of $)if(!D.circle[ae]){D.circle[ae]=!0;let oe=3*ae,se=this.circleKeys[ae];if(this._circlesCollide(G[oe],G[oe+1],G[oe+2],O.x,O.y,O.radius)&&(!A||A(se))&&!Je(z,se.overlapMode))return w.push(!0),!0}}}_forEachCell(a,l,p,d,y,w,C,A){let O=this._convertToXCellCoord(a),D=this._convertToYCellCoord(l),z=this._convertToXCellCoord(p),N=this._convertToYCellCoord(d);for(let $=O;$<=z;$++)for(let G=D;G<=N;G++)if(y.call(this,a,l,p,d,this.xCellCount*G+$,w,C,A))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,l,p,d,y,w){let C=d-a,A=y-l,O=p+w;return O*O>C*C+A*A}_circleAndRectCollide(a,l,p,d,y,w,C){let A=(w-d)/2,O=Math.abs(a-(d+A));if(O>A+p)return!1;let D=(C-y)/2,z=Math.abs(l-(y+D));if(z>D+p)return!1;if(O<=A||z<=D)return!0;let N=O-A,$=z-D;return N*N+$*$<=p*p}}function dt(g,a,l){let p=o.K();if(!g){let{vecSouth:z,vecEast:N}=Tt(a),$=v();$[0]=N[0],$[1]=N[1],$[2]=z[0],$[3]=z[1],d=$,(D=(w=(y=$)[0])*(O=y[3])-(A=y[2])*(C=y[1]))&&(d[0]=O*(D=1/D),d[1]=-C*D,d[2]=-A*D,d[3]=w*D),p[0]=$[0],p[1]=$[1],p[4]=$[2],p[5]=$[3]}var d,y,w,C,A,O,D;return o.M(p,p,[1/l,1/l,1]),p}function qt(g,a,l,p){if(g){let d=o.K();if(!a){let{vecSouth:y,vecEast:w}=Tt(l);d[0]=w[0],d[1]=w[1],d[4]=y[0],d[5]=y[1]}return o.M(d,d,[p,p,1]),d}return l.pixelsToClipSpaceMatrix}function Tt(g){let a=Math.cos(g.rollInRadians),l=Math.sin(g.rollInRadians),p=Math.cos(g.pitchInRadians),d=Math.cos(g.bearingInRadians),y=Math.sin(g.bearingInRadians),w=o.ao();w[0]=-d*p*l-y*a,w[1]=-y*p*l+d*a;let C=o.ap(w);C<1e-9?o.aq(w):o.ar(w,w,1/C);let A=o.ao();A[0]=d*p*a-y*l,A[1]=y*p*a+d*l;let O=o.ap(A);return O<1e-9?o.aq(A):o.ar(A,A,1/O),{vecEast:A,vecSouth:w}}function De(g,a,l,p){let d;p?(d=[g,a,p(g,a),1],o.at(d,d,l)):(d=[g,a,0,1],ou(d,d,l));let y=d[3];return{point:new o.P(d[0]/y,d[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function dr(g,a){return .5+g/a*.5}function Ht(g,a){return g.x>=-a[0]&&g.x<=a[0]&&g.y>=-a[1]&&g.y<=a[1]}function lr(g,a,l,p,d,y,w,C,A,O,D,z,N){let $=l?g.textSizeData:g.iconSizeData,G=o.ak($,a.transform.zoom),ae=[256/a.width*2+1,256/a.height*2+1],oe=l?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;oe.clear();let se=g.lineVertexArray,he=l?g.text.placedSymbolArray:g.icon.placedSymbolArray,ve=a.transform.width/a.transform.height,me=!1;for(let ge=0;ge<he.length;ge++){let be=he.get(ge);if(be.hidden||be.writingMode===o.al.vertical&&!me){Ms(be.numGlyphs,oe);continue}me=!1;let ye=new o.P(be.anchorX,be.anchorY),Ie={getElevation:N,pitchedLabelPlaneMatrix:p,lineVertexArray:se,pitchWithMap:y,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:a.transform,tileAnchorPoint:ye,unwrappedTileID:A,width:O,height:D,translation:z},Ne=Lt(be.anchorX,be.anchorY,Ie);if(!Ht(Ne.point,ae)){Ms(be.numGlyphs,oe);continue}let qe=dr(a.transform.cameraToCenterDistance,Ne.signedDistanceFromCamera),Re=o.am($,G,be),Oe=y?Re*a.transform.getPitchedTextCorrection(be.anchorX,be.anchorY,A)/qe:Re*qe,Qe=yt({projectionContext:Ie,pitchedLabelPlaneMatrixInverse:d,symbol:be,fontSize:Oe,flip:!1,keepUpright:w,glyphOffsetArray:g.glyphOffsetArray,dynamicLayoutVertexArray:oe,aspectRatio:ve,rotateToLine:C});me=Qe.useVertical,(Qe.notEnoughRoom||me||Qe.needsFlipping&&yt({projectionContext:Ie,pitchedLabelPlaneMatrixInverse:d,symbol:be,fontSize:Oe,flip:!0,keepUpright:w,glyphOffsetArray:g.glyphOffsetArray,dynamicLayoutVertexArray:oe,aspectRatio:ve,rotateToLine:C}).notEnoughRoom)&&Ms(be.numGlyphs,oe)}l?g.text.dynamicLayoutVertexBuffer.updateData(oe):g.icon.dynamicLayoutVertexBuffer.updateData(oe)}function Et(g,a,l,p,d,y,w,C){let A=y.glyphStartIndex+y.numGlyphs,O=y.lineStartIndex,D=y.lineStartIndex+y.lineLength,z=a.getoffsetX(y.glyphStartIndex),N=a.getoffsetX(A-1),$=iu(g*z,l,p,d,y.segment,O,D,C,w);if(!$)return null;let G=iu(g*N,l,p,d,y.segment,O,D,C,w);return G?C.projectionCache.anyProjectionOccluded?null:{first:$,last:G}:null}function je(g,a,l,p){return g===o.al.horizontal&&Math.abs(l.y-a.y)>Math.abs(l.x-a.x)*p?{useVertical:!0}:(g===o.al.vertical?a.y<l.y:a.x>l.x)?{needsFlipping:!0}:null}function yt(g){let{projectionContext:a,pitchedLabelPlaneMatrixInverse:l,symbol:p,fontSize:d,flip:y,keepUpright:w,glyphOffsetArray:C,dynamicLayoutVertexArray:A,aspectRatio:O,rotateToLine:D}=g,z=d/24,N=p.lineOffsetX*z,$=p.lineOffsetY*z,G;if(p.numGlyphs>1){let ae=p.glyphStartIndex+p.numGlyphs,oe=p.lineStartIndex,se=p.lineStartIndex+p.lineLength,he=Et(z,C,N,$,y,p,D,a);if(!he)return{notEnoughRoom:!0};let ve=so(he.first.point.x,he.first.point.y,a,l),me=so(he.last.point.x,he.last.point.y,a,l);if(w&&!y){let ge=je(p.writingMode,ve,me,O);if(ge)return ge}G=[he.first];for(let ge=p.glyphStartIndex+1;ge<ae-1;ge++)G.push(iu(z*C.getoffsetX(ge),N,$,y,p.segment,oe,se,a,D));G.push(he.last)}else{if(w&&!y){let oe=tn(a.tileAnchorPoint.x,a.tileAnchorPoint.y,a).point,se=p.lineStartIndex+p.segment+1,he=new o.P(a.lineVertexArray.getx(se),a.lineVertexArray.gety(se)),ve=tn(he.x,he.y,a),me=ve.signedDistanceFromCamera>0?ve.point:Rt(a.tileAnchorPoint,he,oe,1,a),ge=so(oe.x,oe.y,a,l),be=so(me.x,me.y,a,l),ye=je(p.writingMode,ge,be,O);if(ye)return ye}let ae=iu(z*C.getoffsetX(p.glyphStartIndex),N,$,y,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,a,D);if(!ae||a.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};G=[ae]}for(let ae of G)o.as(A,ae.point,ae.angle);return{}}function Rt(g,a,l,p,d){let y=g.add(g.sub(a)._unit()),w=tn(y.x,y.y,d).point,C=l.sub(w);return l.add(C._mult(p/C.mag()))}function en(g,a,l){let p=a.projectionCache;if(p.projections[g])return p.projections[g];let d=new o.P(a.lineVertexArray.getx(g),a.lineVertexArray.gety(g)),y=tn(d.x,d.y,a);if(y.signedDistanceFromCamera>0)return p.projections[g]=y.point,p.anyProjectionOccluded=p.anyProjectionOccluded||y.isOccluded,y.point;let w=g-l.direction;return Rt(l.distanceFromAnchor===0?a.tileAnchorPoint:new o.P(a.lineVertexArray.getx(w),a.lineVertexArray.gety(w)),d,l.previousVertex,l.absOffsetX-l.distanceFromAnchor+1,a)}function tn(g,a,l){let p=g+l.translation[0],d=a+l.translation[1],y;return l.pitchWithMap?(y=De(p,d,l.pitchedLabelPlaneMatrix,l.getElevation),y.isOccluded=!1):(y=l.transform.projectTileCoordinates(p,d,l.unwrappedTileID,l.getElevation),y.point.x=(.5*y.point.x+.5)*l.width,y.point.y=(.5*-y.point.y+.5)*l.height),y}function so(g,a,l,p){if(l.pitchWithMap){let d=[g,a,0,1];return o.at(d,d,p),l.transform.projectTileCoordinates(d[0]/d[3],d[1]/d[3],l.unwrappedTileID,l.getElevation).point}return{x:g/l.width*2-1,y:a/l.height*2-1}}function Lt(g,a,l){return l.transform.projectTileCoordinates(g,a,l.unwrappedTileID,l.getElevation)}function pc(g,a,l){return g._unit()._perp()._mult(a*l)}function lf(g,a,l,p,d,y,w,C,A){if(C.projectionCache.offsets[g])return C.projectionCache.offsets[g];let O=l.add(a);if(g+A.direction<p||g+A.direction>=d)return C.projectionCache.offsets[g]=O,O;let D=en(g+A.direction,C,A),z=pc(D.sub(l),w,A.direction),N=l.add(z),$=D.add(z);return C.projectionCache.offsets[g]=o.au(y,O,N,$)||O,C.projectionCache.offsets[g]}function iu(g,a,l,p,d,y,w,C,A){let O=p?g-a:g+a,D=O>0?1:-1,z=0;p&&(D*=-1,z=Math.PI),D<0&&(z+=Math.PI);let N,$=D>0?y+d:y+d+1;C.projectionCache.cachedAnchorPoint?N=C.projectionCache.cachedAnchorPoint:(N=tn(C.tileAnchorPoint.x,C.tileAnchorPoint.y,C).point,C.projectionCache.cachedAnchorPoint=N);let G,ae,oe=N,se=N,he=0,ve=0,me=Math.abs(O),ge=[],be;for(;he+ve<=me;){if($+=D,$<y||$>=w)return null;he+=ve,se=oe,ae=G;let Ne={absOffsetX:me,direction:D,distanceFromAnchor:he,previousVertex:se};if(oe=en($,C,Ne),l===0)ge.push(se),be=oe.sub(se);else{let qe,Re=oe.sub(se);qe=Re.mag()===0?pc(en($+D,C,Ne).sub(oe),l,D):pc(Re,l,D),ae||(ae=se.add(qe)),G=lf($,qe,oe,y,w,ae,l,C,Ne),ge.push(ae),be=G.sub(ae)}ve=be.mag()}let ye=be._mult((me-he)/ve)._add(ae||se),Ie=z+Math.atan2(oe.y-se.y,oe.x-se.x);return ge.push(ye),{point:ye,angle:A?Ie:0,path:ge}}let uf=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ms(g,a){for(let l=0;l<g;l++){let p=a.length;a.resize(p+4),a.float32.set(uf,3*p)}}function ou(g,a,l){let p=a[0],d=a[1];return g[0]=l[0]*p+l[4]*d+l[12],g[1]=l[1]*p+l[5]*d+l[13],g[3]=l[3]*p+l[7]*d+l[15],g}let gn=100;class Po{constructor(a,l=new tt(a.width+200,a.height+200,25),p=new tt(a.width+200,a.height+200,25)){this.transform=a,this.grid=l,this.ignoredGrid=p,this.pitchFactor=Math.cos(a.pitch*Math.PI/180)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+gn,this.screenBottomBoundary=a.height+gn,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,l,p,d,y,w,C,A,O,D,z,N){let $=this.projectAndGetPerspectiveRatio(a.anchorPointX+A[0],a.anchorPointY+A[1],y,D,N),G=p*$.perspectiveRatio,ae;if(w||C)ae=this._projectCollisionBox(a,G,d,y,w,C,A,$,D,z,N);else{let be=$.x+(z?z.x*G:0),ye=$.y+(z?z.y*G:0);ae={allPointsOccluded:!1,box:[be+a.x1*G,ye+a.y1*G,be+a.x2*G,ye+a.y2*G]}}let[oe,se,he,ve]=ae.box,me=w?ae.allPointsOccluded:$.isOccluded,ge=me;return ge||(ge=$.perspectiveRatio<this.perspectiveRatioCutoff),ge||(ge=!this.isInsideGrid(oe,se,he,ve)),ge||l!=="always"&&this.grid.hitTest(oe,se,he,ve,l,O)?{box:[oe,se,he,ve],placeable:!1,offscreen:!1,occluded:me}:{box:[oe,se,he,ve],placeable:!0,offscreen:this.isOffscreen(oe,se,he,ve),occluded:me}}placeCollisionCircles(a,l,p,d,y,w,C,A,O,D,z,N,$,G){let ae=[],oe=new o.P(l.anchorX,l.anchorY),se=this.getPerspectiveRatio(oe.x,oe.y,w,G),he=(O?y*this.transform.getPitchedTextCorrection(l.anchorX,l.anchorY,w)/se:y*se)/o.ay,ve={getElevation:G,pitchedLabelPlaneMatrix:C,lineVertexArray:p,pitchWithMap:O,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:oe,unwrappedTileID:w,width:this.transform.width,height:this.transform.height,translation:$},me=Et(he,d,l.lineOffsetX*he,l.lineOffsetY*he,!1,l,!1,ve),ge=!1,be=!1,ye=!0;if(me){let Ie=.5*z*se+N,Ne=new o.P(-100,-100),qe=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Re=new Ue,Oe=me.first,Qe=me.last,Xe=[];for(let kt=Oe.path.length-1;kt>=1;kt--)Xe.push(Oe.path[kt]);for(let kt=1;kt<Qe.path.length;kt++)Xe.push(Qe.path[kt]);let Ge=2.5*Ie;if(O){let kt=this.projectPathToScreenSpace(Xe,ve);Xe=kt.some(Xt=>Xt.signedDistanceFromCamera<=0)?[]:kt.map(Xt=>Xt.point)}let ut=[];if(Xe.length>0){let kt=Xe[0].clone(),Xt=Xe[0].clone();for(let $r=1;$r<Xe.length;$r++)kt.x=Math.min(kt.x,Xe[$r].x),kt.y=Math.min(kt.y,Xe[$r].y),Xt.x=Math.max(Xt.x,Xe[$r].x),Xt.y=Math.max(Xt.y,Xe[$r].y);ut=kt.x>=Ne.x&&Xt.x<=qe.x&&kt.y>=Ne.y&&Xt.y<=qe.y?[Xe]:Xt.x<Ne.x||kt.x>qe.x||Xt.y<Ne.y||kt.y>qe.y?[]:o.av([Xe],Ne.x,Ne.y,qe.x,qe.y)}for(let kt of ut){Re.reset(kt,.25*Ie);let Xt=0;Xt=Re.length<=.5*Ie?1:Math.ceil(Re.paddedLength/Ge)+1;for(let $r=0;$r<Xt;$r++){let Sr=$r/Math.max(Xt-1,1),Gr=Re.lerp(Sr),Zr=Gr.x+gn,Pr=Gr.y+gn;ae.push(Zr,Pr,Ie,0);let ur=Zr-Ie,Nn=Pr-Ie,Wn=Zr+Ie,ui=Pr+Ie;if(ye=ye&&this.isOffscreen(ur,Nn,Wn,ui),be=be||this.isInsideGrid(ur,Nn,Wn,ui),a!=="always"&&this.grid.hitTestCircle(Zr,Pr,Ie,a,D)&&(ge=!0,!A))return{circles:[],offscreen:!1,collisionDetected:ge}}}}return{circles:!A&&ge||!be||se<this.perspectiveRatioCutoff?[]:ae,offscreen:ye,collisionDetected:ge}}projectPathToScreenSpace(a,l){let p=function(d,y){let w=o.K();return o.an(w,y.pitchedLabelPlaneMatrix),d.map(C=>{let A=De(C.x,C.y,w,y.getElevation),O=y.transform.projectTileCoordinates(A.point.x,A.point.y,y.unwrappedTileID,y.getElevation);return O.point.x=(.5*O.point.x+.5)*y.width,O.point.y=(.5*-O.point.y+.5)*y.height,O})}(a,l);return function(d){let y=0,w=0,C=0,A=0;for(let O=0;O<d.length;O++)d[O].isOccluded?(C=O+1,A=0):(A++,A>w&&(w=A,y=C));return d.slice(y,y+w)}(p)}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let l=[],p=1/0,d=1/0,y=-1/0,w=-1/0;for(let D of a){let z=new o.P(D.x+gn,D.y+gn);p=Math.min(p,z.x),d=Math.min(d,z.y),y=Math.max(y,z.x),w=Math.max(w,z.y),l.push(z)}let C=this.grid.query(p,d,y,w).concat(this.ignoredGrid.query(p,d,y,w)),A={},O={};for(let D of C){let z=D.key;if(A[z.bucketInstanceId]===void 0&&(A[z.bucketInstanceId]={}),A[z.bucketInstanceId][z.featureIndex])continue;let N=[new o.P(D.x1,D.y1),new o.P(D.x2,D.y1),new o.P(D.x2,D.y2),new o.P(D.x1,D.y2)];o.aw(l,N)&&(A[z.bucketInstanceId][z.featureIndex]=!0,O[z.bucketInstanceId]===void 0&&(O[z.bucketInstanceId]=[]),O[z.bucketInstanceId].push(z.featureIndex))}return O}insertCollisionBox(a,l,p,d,y,w){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:d,featureIndex:y,collisionGroupID:w,overlapMode:l},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,l,p,d,y,w){let C=p?this.ignoredGrid:this.grid,A={bucketInstanceId:d,featureIndex:y,collisionGroupID:w,overlapMode:l};for(let O=0;O<a.length;O+=4)C.insertCircle(A,a[O],a[O+1],a[O+2])}projectAndGetPerspectiveRatio(a,l,p,d,y){if(y){let w;d?(w=[a,l,d(a,l),1],o.at(w,w,y)):(w=[a,l,0,1],ou(w,w,y));let C=w[3];return{x:(w[0]/C+1)/2*this.transform.width+gn,y:(-w[1]/C+1)/2*this.transform.height+gn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/C*.5,isOccluded:!1,signedDistanceFromCamera:C}}{let w=this.transform.projectTileCoordinates(a,l,p,d);return{x:(w.point.x+1)/2*this.transform.width+gn,y:(1-w.point.y)/2*this.transform.height+gn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5,isOccluded:w.isOccluded,signedDistanceFromCamera:w.signedDistanceFromCamera}}}getPerspectiveRatio(a,l,p,d){let y=this.transform.projectTileCoordinates(a,l,p,d);return .5+this.transform.cameraToCenterDistance/y.signedDistanceFromCamera*.5}isOffscreen(a,l,p,d){return p<gn||a>=this.screenRightBoundary||d<gn||l>this.screenBottomBoundary}isInsideGrid(a,l,p,d){return p>=0&&a<this.gridRightBoundary&&d>=0&&l<this.gridBottomBoundary}getViewportMatrix(){let a=o.ad([]);return o.L(a,a,[-100,-100,0]),a}_projectCollisionBox(a,l,p,d,y,w,C,A,O,D,z){let N=1,$=0,G=0,ae=1,oe=a.anchorPointX+C[0],se=a.anchorPointY+C[1];if(w&&!y){let Xe=this.projectAndGetPerspectiveRatio(oe+1,se,d,O,z),Ge=Xe.x-A.x,ut=Math.atan((Xe.y-A.y)/Ge)+(Ge<0?Math.PI:0),kt=Math.sin(ut),Xt=Math.cos(ut);N=Xt,$=kt,G=-kt,ae=Xt}else if(!w&&y){let Xe=Tt(this.transform);N=Xe.vecEast[0],$=Xe.vecEast[1],G=Xe.vecSouth[0],ae=Xe.vecSouth[1]}let he=A.x,ve=A.y,me=l;y&&(he=oe,ve=se,me=Math.pow(2,-(this.transform.zoom-p.overscaledZ)),me*=this.transform.getPitchedTextCorrection(oe,se,d),D||(me*=o.ae(.5+A.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),D&&(he+=N*D.x*me+G*D.y*me,ve+=$*D.x*me+ae*D.y*me);let ge=a.x1*me,be=a.x2*me,ye=(ge+be)/2,Ie=a.y1*me,Ne=a.y2*me,qe=(Ie+Ne)/2,Re=[{offsetX:ge,offsetY:Ie},{offsetX:ye,offsetY:Ie},{offsetX:be,offsetY:Ie},{offsetX:be,offsetY:qe},{offsetX:be,offsetY:Ne},{offsetX:ye,offsetY:Ne},{offsetX:ge,offsetY:Ne},{offsetX:ge,offsetY:qe}],Oe=[];for(let{offsetX:Xe,offsetY:Ge}of Re)Oe.push(new o.P(he+N*Xe+G*Ge,ve+$*Xe+ae*Ge));let Qe=!1;if(y){let Xe=Oe.map(Ge=>this.projectAndGetPerspectiveRatio(Ge.x,Ge.y,d,O,z));Qe=Xe.some(Ge=>!Ge.isOccluded),Oe=Xe.map(Ge=>new o.P(Ge.x,Ge.y))}else Qe=!0;return{box:o.ax(Oe),allPointsOccluded:!Qe}}}class Fr{constructor(a,l,p,d){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?l:-l))):d&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class cf{constructor(a,l,p,d,y){this.text=new Fr(a?a.text:null,l,p,y),this.icon=new Fr(a?a.icon:null,l,d,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class dc{constructor(a,l,p){this.text=a,this.icon=l,this.skipFade=p}}class jg{constructor(a,l,p,d,y){this.bucketInstanceId=a,this.featureIndex=l,this.sourceLayerIndex=p,this.bucketIndex=d,this.tileID=y}}class au{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){let l=++this.maxGroupID;this.collisionGroups[a]={ID:l,predicate:p=>p.collisionGroupID===l}}return this.collisionGroups[a]}}function As(g,a,l,p,d){let{horizontalAlign:y,verticalAlign:w}=o.aE(g);return new o.P(-(y-.5)*a+p[0]*d,-(w-.5)*l+p[1]*d)}class o1{constructor(a,l,p,d,y){this.transform=a.clone(),this.terrain=l,this.collisionIndex=new Po(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new au(d),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(a){let l=this.terrain;return l?(p,d)=>l.getElevation(a,p,d):null}getBucketParts(a,l,p,d){let y=p.getBucket(l),w=p.latestFeatureIndex;if(!y||!w||l.id!==y.layerIds[0])return;let C=p.collisionBoxArray,A=y.layers[0].layout,O=y.layers[0].paint,D=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),z=p.tileSize/o.Z,N=p.tileID.toUnwrapped(),$=A.get("text-rotation-alignment")==="map",G=o.az(p,1,this.transform.zoom),ae=o.aA(this.collisionIndex.transform,p,O.get("text-translate"),O.get("text-translate-anchor")),oe=o.aA(this.collisionIndex.transform,p,O.get("icon-translate"),O.get("icon-translate-anchor")),se=dt($,this.transform,G);this.retainedQueryData[y.bucketInstanceId]=new jg(y.bucketInstanceId,w,y.sourceLayerIndex,y.index,p.tileID);let he={bucket:y,layout:A,translationText:ae,translationIcon:oe,unwrappedTileID:N,pitchedLabelPlaneMatrix:se,scale:D,textPixelRatio:z,holdingForFade:p.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:o.ak(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(d)for(let ve of y.sortKeyRanges){let{sortKey:me,symbolInstanceStart:ge,symbolInstanceEnd:be}=ve;a.push({sortKey:me,symbolInstanceStart:ge,symbolInstanceEnd:be,parameters:he})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:he})}attemptAnchorPlacement(a,l,p,d,y,w,C,A,O,D,z,N,$,G,ae,oe,se,he,ve,me){let ge=o.aB[a.textAnchor],be=[a.textOffset0,a.textOffset1],ye=As(ge,p,d,be,y),Ie=this.collisionIndex.placeCollisionBox(l,N,A,O,D,C,w,oe,z.predicate,ve,ye,me);if((!he||this.collisionIndex.placeCollisionBox(he,N,A,O,D,C,w,se,z.predicate,ve,ye,me).placeable)&&Ie.placeable){let Ne;if(this.prevPlacement&&this.prevPlacement.variableOffsets[$.crossTileID]&&this.prevPlacement.placements[$.crossTileID]&&this.prevPlacement.placements[$.crossTileID].text&&(Ne=this.prevPlacement.variableOffsets[$.crossTileID].anchor),$.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[$.crossTileID]={textOffset:be,width:p,height:d,anchor:ge,textBoxScale:y,prevAnchor:Ne},this.markUsedJustification(G,ge,$,ae),G.allowVerticalPlacement&&(this.markUsedOrientation(G,ae,$),this.placedOrientations[$.crossTileID]=ae),{shift:ye,placedGlyphBoxes:Ie}}}placeLayerBucketPart(a,l,p){let{bucket:d,layout:y,translationText:w,translationIcon:C,unwrappedTileID:A,pitchedLabelPlaneMatrix:O,textPixelRatio:D,holdingForFade:z,collisionBoxArray:N,partiallyEvaluatedTextSize:$,collisionGroup:G}=a.parameters,ae=y.get("text-optional"),oe=y.get("icon-optional"),se=o.aC(y,"text-overlap","text-allow-overlap"),he=se==="always",ve=o.aC(y,"icon-overlap","icon-allow-overlap"),me=ve==="always",ge=y.get("text-rotation-alignment")==="map",be=y.get("text-pitch-alignment")==="map",ye=y.get("icon-text-fit")!=="none",Ie=y.get("symbol-z-order")==="viewport-y",Ne=he&&(me||!d.hasIconData()||oe),qe=me&&(he||!d.hasTextData()||ae);!d.collisionArrays&&N&&d.deserializeCollisionBoxes(N);let Re=this.retainedQueryData[d.bucketInstanceId].tileID,Oe=this._getTerrainElevationFunc(Re),Qe=this.transform.getFastPathSimpleProjectionMatrix(Re),Xe=(Ge,ut,kt)=>{var Xt,$r;if(l[Ge.crossTileID])return;if(z)return void(this.placements[Ge.crossTileID]=new dc(!1,!1,!1));let Sr=!1,Gr=!1,Zr=!0,Pr=null,ur={box:null,placeable:!1,offscreen:null,occluded:!1},Nn={placeable:!1},Wn=null,ui=null,cr=null,hl=0,Ya=0,fl=0;ut.textFeatureIndex?hl=ut.textFeatureIndex:Ge.useRuntimeCollisionCircles&&(hl=Ge.featureIndex),ut.verticalTextFeatureIndex&&(Ya=ut.verticalTextFeatureIndex);let xu=ut.textBox;if(xu){let qo=Tn=>{let Sn=o.al.horizontal;if(d.allowVerticalPlacement&&!Tn&&this.prevPlacement){let Bi=this.prevPlacement.placedOrientations[Ge.crossTileID];Bi&&(this.placedOrientations[Ge.crossTileID]=Bi,Sn=Bi,this.markUsedOrientation(d,Sn,Ge))}return Sn},dl=(Tn,Sn)=>{if(d.allowVerticalPlacement&&Ge.numVerticalGlyphVertices>0&&ut.verticalTextBox){for(let Bi of d.writingModes)if(Bi===o.al.vertical?(ur=Sn(),Nn=ur):ur=Tn(),ur&&ur.placeable)break}else ur=Tn()},Os=Ge.textAnchorOffsetStartIndex,ml=Ge.textAnchorOffsetEndIndex;if(ml===Os){let Tn=(Sn,Bi)=>{let Lr=this.collisionIndex.placeCollisionBox(Sn,se,D,Re,A,be,ge,w,G.predicate,Oe,void 0,Qe);return Lr&&Lr.placeable&&(this.markUsedOrientation(d,Bi,Ge),this.placedOrientations[Ge.crossTileID]=Bi),Lr};dl(()=>Tn(xu,o.al.horizontal),()=>{let Sn=ut.verticalTextBox;return d.allowVerticalPlacement&&Ge.numVerticalGlyphVertices>0&&Sn?Tn(Sn,o.al.vertical):{box:null,offscreen:null}}),qo(ur&&ur.placeable)}else{let Tn=o.aB[($r=(Xt=this.prevPlacement)===null||Xt===void 0?void 0:Xt.variableOffsets[Ge.crossTileID])===null||$r===void 0?void 0:$r.anchor],Sn=(Lr,Vd,Y1)=>{let X1=Lr.x2-Lr.x1,gA=Lr.y2-Lr.y1,Ay=Ge.textBoxScale,Uf=ye&&ve==="never"?Vd:null,Jo=null,Xa=se==="never"?1:2,ea="never";Tn&&Xa++;for(let Ls=0;Ls<Xa;Ls++){for(let $d=Os;$d<ml;$d++){let vl=d.textAnchorOffsets.get($d);if(Tn&&vl.textAnchor!==Tn)continue;let qy=this.attemptAnchorPlacement(vl,Lr,X1,gA,Ay,ge,be,D,Re,A,G,ea,Ge,d,Y1,w,C,Uf,Oe);if(qy&&(Jo=qy.placedGlyphBoxes,Jo&&Jo.placeable))return Sr=!0,Pr=qy.shift,Jo}Tn?Tn=null:ea=se}return p&&!Jo&&(Jo={box:this.collisionIndex.placeCollisionBox(xu,"always",D,Re,A,be,ge,w,G.predicate,Oe,void 0,Qe).box,offscreen:!1,placeable:!1,occluded:!1}),Jo};dl(()=>Sn(xu,ut.iconBox,o.al.horizontal),()=>{let Lr=ut.verticalTextBox;return d.allowVerticalPlacement&&(!ur||!ur.placeable)&&Ge.numVerticalGlyphVertices>0&&Lr?Sn(Lr,ut.verticalIconBox,o.al.vertical):{box:null,occluded:!0,offscreen:null}}),ur&&(Sr=ur.placeable,Zr=ur.offscreen);let Bi=qo(ur&&ur.placeable);if(!Sr&&this.prevPlacement){let Lr=this.prevPlacement.variableOffsets[Ge.crossTileID];Lr&&(this.variableOffsets[Ge.crossTileID]=Lr,this.markUsedJustification(d,Lr.anchor,Ge,Bi))}}}if(Wn=ur,Sr=Wn&&Wn.placeable,Zr=Wn&&Wn.offscreen,Ge.useRuntimeCollisionCircles){let qo=d.text.placedSymbolArray.get(Ge.centerJustifiedTextSymbolIndex),dl=o.am(d.textSizeData,$,qo),Os=y.get("text-padding");ui=this.collisionIndex.placeCollisionCircles(se,qo,d.lineVertexArray,d.glyphOffsetArray,dl,A,O,p,be,G.predicate,Ge.collisionCircleDiameter,Os,w,Oe),ui.circles.length&&ui.collisionDetected&&!p&&o.w("Collisions detected, but collision boxes are not shown"),Sr=he||ui.circles.length>0&&!ui.collisionDetected,Zr=Zr&&ui.offscreen}if(ut.iconFeatureIndex&&(fl=ut.iconFeatureIndex),ut.iconBox){let qo=dl=>this.collisionIndex.placeCollisionBox(dl,ve,D,Re,A,be,ge,C,G.predicate,Oe,ye&&Pr?Pr:void 0,Qe);Nn&&Nn.placeable&&ut.verticalIconBox?(cr=qo(ut.verticalIconBox),Gr=cr.placeable):(cr=qo(ut.iconBox),Gr=cr.placeable),Zr=Zr&&cr.offscreen}let Bf=ae||Ge.numHorizontalGlyphVertices===0&&Ge.numVerticalGlyphVertices===0,pl=oe||Ge.numIconVertices===0;Bf||pl?pl?Bf||(Gr=Gr&&Sr):Sr=Gr&&Sr:Gr=Sr=Gr&&Sr;let bu=Gr&&cr.placeable;if(Sr&&Wn.placeable&&this.collisionIndex.insertCollisionBox(Wn.box,se,y.get("text-ignore-placement"),d.bucketInstanceId,Nn&&Nn.placeable&&Ya?Ya:hl,G.ID),bu&&this.collisionIndex.insertCollisionBox(cr.box,ve,y.get("icon-ignore-placement"),d.bucketInstanceId,fl,G.ID),ui&&Sr&&this.collisionIndex.insertCollisionCircles(ui.circles,se,y.get("text-ignore-placement"),d.bucketInstanceId,hl,G.ID),p&&this.storeCollisionData(d.bucketInstanceId,kt,ut,Wn,cr,ui),Ge.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(d.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ge.crossTileID]=new dc((Sr||Ne)&&!(Wn!=null&&Wn.occluded),(Gr||qe)&&!(cr!=null&&cr.occluded),Zr||d.justReloaded),l[Ge.crossTileID]=!0};if(Ie){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let Ge=d.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let ut=Ge.length-1;ut>=0;--ut){let kt=Ge[ut];Xe(d.symbolInstances.get(kt),d.collisionArrays[kt],kt)}}else for(let Ge=a.symbolInstanceStart;Ge<a.symbolInstanceEnd;Ge++)Xe(d.symbolInstances.get(Ge),d.collisionArrays[Ge],Ge);d.justReloaded=!1}storeCollisionData(a,l,p,d,y,w){if(p.textBox||p.iconBox){let C,A;this.collisionBoxArrays.has(a)?C=this.collisionBoxArrays.get(a):(C=new Map,this.collisionBoxArrays.set(a,C)),C.has(l)?A=C.get(l):(A={text:null,icon:null},C.set(l,A)),p.textBox&&(A.text=d.box),p.iconBox&&(A.icon=y.box)}if(w){let C=this.collisionCircleArrays[a];C===void 0&&(C=this.collisionCircleArrays[a]=[]);for(let A=0;A<w.circles.length;A+=4)C.push(w.circles[A+0]-gn),C.push(w.circles[A+1]-gn),C.push(w.circles[A+2]),C.push(w.collisionDetected?1:0)}}markUsedJustification(a,l,p,d){let y;y=d===o.al.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[o.aD(l)];let w=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(let C of w)C>=0&&(a.text.placedSymbolArray.get(C).crossTileID=y>=0&&C!==y?0:p.crossTileID)}markUsedOrientation(a,l,p){let d=l===o.al.horizontal||l===o.al.horizontalOnly?l:0,y=l===o.al.vertical?l:0,w=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(let C of w)a.text.placedSymbolArray.get(C).placedOrientation=d;p.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;let l=this.prevPlacement,p=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;let d=l?l.symbolFadeChange(a):1,y=l?l.opacities:{},w=l?l.variableOffsets:{},C=l?l.placedOrientations:{};for(let A in this.placements){let O=this.placements[A],D=y[A];D?(this.opacities[A]=new cf(D,d,O.text,O.icon),p=p||O.text!==D.text.placed||O.icon!==D.icon.placed):(this.opacities[A]=new cf(null,d,O.text,O.icon,O.skipFade),p=p||O.text||O.icon)}for(let A in y){let O=y[A];if(!this.opacities[A]){let D=new cf(O,d,!1,!1);D.isHidden()||(this.opacities[A]=D,p=p||O.text.placed||O.icon.placed)}}for(let A in w)this.variableOffsets[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.variableOffsets[A]=w[A]);for(let A in C)this.placedOrientations[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.placedOrientations[A]=C[A]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:a)}updateLayerOpacities(a,l){let p={};for(let d of l){let y=d.getBucket(a);y&&d.latestFeatureIndex&&a.id===y.layerIds[0]&&this.updateBucketOpacities(y,d.tileID,p,d.collisionBoxArray)}}updateBucketOpacities(a,l,p,d){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();let y=a.layers[0],w=y.layout,C=new cf(null,0,!1,!1,!0),A=w.get("text-allow-overlap"),O=w.get("icon-allow-overlap"),D=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),z=w.get("text-rotation-alignment")==="map",N=w.get("text-pitch-alignment")==="map",$=w.get("icon-text-fit")!=="none",G=new cf(null,0,A&&(O||!a.hasIconData()||w.get("icon-optional")),O&&(A||!a.hasTextData()||w.get("text-optional")),!0);!a.collisionArrays&&d&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(d);let ae=(se,he,ve)=>{for(let me=0;me<he/4;me++)se.opacityVertexArray.emplaceBack(ve);se.hasVisibleVertices=se.hasVisibleVertices||ve!==su},oe=this.collisionBoxArrays.get(a.bucketInstanceId);for(let se=0;se<a.symbolInstances.length;se++){let he=a.symbolInstances.get(se),{numHorizontalGlyphVertices:ve,numVerticalGlyphVertices:me,crossTileID:ge}=he,be=this.opacities[ge];p[ge]?be=C:be||(be=G,this.opacities[ge]=be),p[ge]=!0;let ye=he.numIconVertices>0,Ie=this.placedOrientations[he.crossTileID],Ne=Ie===o.al.vertical,qe=Ie===o.al.horizontal||Ie===o.al.horizontalOnly;if(ve>0||me>0){let Oe=Ug(be.text);ae(a.text,ve,Ne?su:Oe),ae(a.text,me,qe?su:Oe);let Qe=be.text.isHidden();[he.rightJustifiedTextSymbolIndex,he.centerJustifiedTextSymbolIndex,he.leftJustifiedTextSymbolIndex].forEach(ut=>{ut>=0&&(a.text.placedSymbolArray.get(ut).hidden=Qe||Ne?1:0)}),he.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(he.verticalPlacedTextSymbolIndex).hidden=Qe||qe?1:0);let Xe=this.variableOffsets[he.crossTileID];Xe&&this.markUsedJustification(a,Xe.anchor,he,Ie);let Ge=this.placedOrientations[he.crossTileID];Ge&&(this.markUsedJustification(a,"left",he,Ge),this.markUsedOrientation(a,Ge,he))}if(ye){let Oe=Ug(be.icon),Qe=!($&&he.verticalPlacedIconSymbolIndex&&Ne);he.placedIconSymbolIndex>=0&&(ae(a.icon,he.numIconVertices,Qe?Oe:su),a.icon.placedSymbolArray.get(he.placedIconSymbolIndex).hidden=be.icon.isHidden()),he.verticalPlacedIconSymbolIndex>=0&&(ae(a.icon,he.numVerticalIconVertices,Qe?su:Oe),a.icon.placedSymbolArray.get(he.verticalPlacedIconSymbolIndex).hidden=be.icon.isHidden())}let Re=oe&&oe.has(se)?oe.get(se):{text:null,icon:null};if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){let Oe=a.collisionArrays[se];if(Oe){let Qe=new o.P(0,0);if(Oe.textBox||Oe.verticalTextBox){let Xe=!0;if(D){let Ge=this.variableOffsets[ge];Ge?(Qe=As(Ge.anchor,Ge.width,Ge.height,Ge.textOffset,Ge.textBoxScale),z&&Qe._rotate(N?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Xe=!1}if(Oe.textBox||Oe.verticalTextBox){let Ge;Oe.textBox&&(Ge=Ne),Oe.verticalTextBox&&(Ge=qe),Bg(a.textCollisionBox.collisionVertexArray,be.text.placed,!Xe||Ge,Re.text,Qe.x,Qe.y)}}if(Oe.iconBox||Oe.verticalIconBox){let Xe=!!(!qe&&Oe.verticalIconBox),Ge;Oe.iconBox&&(Ge=Xe),Oe.verticalIconBox&&(Ge=!Xe),Bg(a.iconCollisionBox.collisionVertexArray,be.icon.placed,Ge,Re.icon,$?Qe.x:0,$?Qe.y:0)}}}}if(a.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);a.bucketInstanceId in this.collisionCircleArrays&&(a.collisionCircleArray=this.collisionCircleArrays[a.bucketInstanceId],delete this.collisionCircleArrays[a.bucketInstanceId])}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,l){let p=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*p>a}setStale(){this.stale=!0}}function Bg(g,a,l,p,d,y){p&&p.length!==0||(p=[0,0,0,0]);let w=p[0]-gn,C=p[1]-gn,A=p[2]-gn,O=p[3]-gn;g.emplaceBack(a?1:0,l?1:0,d||0,y||0,w,C),g.emplaceBack(a?1:0,l?1:0,d||0,y||0,A,C),g.emplaceBack(a?1:0,l?1:0,d||0,y||0,A,O),g.emplaceBack(a?1:0,l?1:0,d||0,y||0,w,O)}let a1=Math.pow(2,25),mc=Math.pow(2,24),s1=Math.pow(2,17),$M=Math.pow(2,16),GM=Math.pow(2,9),ZM=Math.pow(2,8),l1=Math.pow(2,1);function Ug(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;let a=g.placed?1:0,l=Math.floor(127*g.opacity);return l*a1+a*mc+l*s1+a*$M+l*GM+a*ZM+l*l1+a}let su=0;class Vg{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,l,p,d,y){let w=this._bucketParts;for(;this._currentTileIndex<a.length;)if(l.getBucketParts(w,d,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((C,A)=>C.sortKey-A.sortKey));this._currentPartIndex<w.length;)if(l.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,y())return!0;return!1}}class u1{constructor(a,l,p,d,y,w,C,A){this.placement=new o1(a,l,w,C,A),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(a,l,p){let d=S.now(),y=()=>!this._forceFullPlacement&&S.now()-d>2;for(;this._currentPlacementIndex>=0;){let w=l[a[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=C)&&(!w.maxzoom||w.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new Vg(w)),this._inProgressLayer.continuePlacement(p[w.source],this.placement,this._showCollisionBoxes,w,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}let lu=512/o.Z/2;class $g{constructor(a,l,p){this.tileID=a,this.bucketInstanceId=p,this._symbolsByKey={};let d=new Map;for(let y=0;y<l.length;y++){let w=l.get(y),C=w.key,A=d.get(C);A?A.push(w):d.set(C,[w])}for(let[y,w]of d){let C={positions:w.map(A=>({x:Math.floor(A.anchorX*lu),y:Math.floor(A.anchorY*lu)})),crossTileIDs:w.map(A=>A.crossTileID)};if(C.positions.length>128){let A=new o.aF(C.positions.length,16,Uint16Array);for(let{x:O,y:D}of C.positions)A.add(O,D);A.finish(),delete C.positions,C.index=A}this._symbolsByKey[y]=C}}getScaledCoordinates(a,l){let{x:p,y:d,z:y}=this.tileID.canonical,{x:w,y:C,z:A}=l.canonical,O=lu/Math.pow(2,A-y),D=(C*o.Z+a.anchorY)*O,z=d*o.Z*lu;return{x:Math.floor((w*o.Z+a.anchorX)*O-p*o.Z*lu),y:Math.floor(D-z)}}findMatches(a,l,p){let d=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let y=0;y<a.length;y++){let w=a.get(y);if(w.crossTileID)continue;let C=this._symbolsByKey[w.key];if(!C)continue;let A=this.getScaledCoordinates(w,l);if(C.index){let O=C.index.range(A.x-d,A.y-d,A.x+d,A.y+d).sort();for(let D of O){let z=C.crossTileIDs[D];if(!p[z]){p[z]=!0,w.crossTileID=z;break}}}else if(C.positions)for(let O=0;O<C.positions.length;O++){let D=C.positions[O],z=C.crossTileIDs[O];if(Math.abs(D.x-A.x)<=d&&Math.abs(D.y-A.y)<=d&&!p[z]){p[z]=!0,w.crossTileID=z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class WM{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class hf{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){let l=Math.round((a-this.lng)/360);if(l!==0)for(let p in this.indexes){let d=this.indexes[p],y={};for(let w in d){let C=d[w];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+l),y[C.tileID.key]=C}this.indexes[p]=y}this.lng=a}addBucket(a,l,p){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let y=0;y<l.symbolInstances.length;y++)l.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});let d=this.usedCrossTileIDs[a.overscaledZ];for(let y in this.indexes){let w=this.indexes[y];if(Number(y)>a.overscaledZ)for(let C in w){let A=w[C];A.tileID.isChildOf(a)&&A.findMatches(l.symbolInstances,a,d)}else{let C=w[a.scaledTo(Number(y)).key];C&&C.findMatches(l.symbolInstances,a,d)}}for(let y=0;y<l.symbolInstances.length;y++){let w=l.symbolInstances.get(y);w.crossTileID||(w.crossTileID=p.generate(),d[w.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new $g(a,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(a,l){for(let p of l.getCrossTileIDsLists())for(let d of p)delete this.usedCrossTileIDs[a][d]}removeStaleBuckets(a){let l=!1;for(let p in this.indexes){let d=this.indexes[p];for(let y in d)a[d[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,d[y]),delete d[y],l=!0)}return l}}class ff{constructor(){this.layerIndexes={},this.crossTileIDs=new WM,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,l,p){let d=this.layerIndexes[a.id];d===void 0&&(d=this.layerIndexes[a.id]=new hf);let y=!1,w={};d.handleWrapJump(p);for(let C of l){let A=C.getBucket(a);A&&a.id===A.layerIds[0]&&(A.bucketInstanceId||(A.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(C.tileID,A,this.crossTileIDs)&&(y=!0),w[A.bucketInstanceId]=!0)}return d.removeStaleBuckets(w)&&(y=!0),y}pruneUnusedLayers(a){let l={};a.forEach(p=>{l[p]=!0});for(let p in this.layerIndexes)l[p]||delete this.layerIndexes[p]}}var Gg="void main() {fragColor=vec4(1.0);}";let Ni={prelude:tr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:tr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:tr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:tr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:tr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:tr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:tr(Gg,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:tr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:tr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:tr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:tr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:tr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:tr(Gg,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:tr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:tr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:tr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:tr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:tr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:tr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:tr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:tr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:tr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:tr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:tr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:tr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:tr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:tr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:tr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:tr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:tr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function tr(g,a){let l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=a.match(/in ([\w]+) ([\w]+)/g),d=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=y?y.concat(d):d,C={};return{fragmentSource:g=g.replace(l,(A,O,D,z,N)=>(C[N]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${N}
in ${D} ${z} ${N};
#else
uniform ${D} ${z} u_${N};
#endif
`:`
#ifdef HAS_UNIFORM_u_${N}
    ${D} ${z} ${N} = u_${N};
#endif
`)),vertexSource:a=a.replace(l,(A,O,D,z,N)=>{let $=z==="float"?"vec2":"vec4",G=N.match(/color/)?"color":$;return C[N]?O==="define"?`
#ifndef HAS_UNIFORM_u_${N}
uniform lowp float u_${N}_t;
in ${D} ${$} a_${N};
out ${D} ${z} ${N};
#else
uniform ${D} ${z} u_${N};
#endif
`:G==="vec4"?`
#ifndef HAS_UNIFORM_u_${N}
    ${N} = a_${N};
#else
    ${D} ${z} ${N} = u_${N};
#endif
`:`
#ifndef HAS_UNIFORM_u_${N}
    ${N} = unpack_mix_${G}(a_${N}, u_${N}_t);
#else
    ${D} ${z} ${N} = u_${N};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${N}
uniform lowp float u_${N}_t;
in ${D} ${$} a_${N};
#else
uniform ${D} ${z} u_${N};
#endif
`:G==="vec4"?`
#ifndef HAS_UNIFORM_u_${N}
    ${D} ${z} ${N} = a_${N};
#else
    ${D} ${z} ${N} = u_${N};
#endif
`:`
#ifndef HAS_UNIFORM_u_${N}
    ${D} ${z} ${N} = unpack_mix_${G}(a_${N}, u_${N}_t);
#else
    ${D} ${z} ${N} = u_${N};
#endif
`}),staticAttributes:p,staticUniforms:w}}class vc{constructor(a,l,p){this.vertexBuffer=a,this.indexBuffer=l,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Fi=o.aG([{name:"a_pos",type:"Int16",components:2}]);let uu="#define PROJECTION_MERCATOR",Kt="mercator";class pf{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Kt}get shaderDefine(){return uu}get shaderPreludeCode(){return Ni.projectionMercator}get vertexShaderPreludeCode(){return Ni.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(a){}getMeshFromTileID(a,l,p,d,y){if(this._cachedMesh)return this._cachedMesh;let w=new o.aI;w.emplaceBack(0,0),w.emplaceBack(o.Z,0),w.emplaceBack(0,o.Z),w.emplaceBack(o.Z,o.Z);let C=a.createVertexBuffer(w,Fi.members),A=o.aJ.simpleSegment(0,0,4,2),O=new o.aK;O.emplaceBack(1,0,2),O.emplaceBack(1,2,3);let D=a.createIndexBuffer(O);return this._cachedMesh=new vc(C,D,A),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(a){}}class df{constructor(a=0,l=0,p=0,d=0){if(isNaN(a)||a<0||isNaN(l)||l<0||isNaN(p)||p<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=l,this.left=p,this.right=d}interpolate(a,l,p){return l.top!=null&&a.top!=null&&(this.top=o.B.number(a.top,l.top,p)),l.bottom!=null&&a.bottom!=null&&(this.bottom=o.B.number(a.bottom,l.bottom,p)),l.left!=null&&a.left!=null&&(this.left=o.B.number(a.left,l.left,p)),l.right!=null&&a.right!=null&&(this.right=o.B.number(a.right,l.right,p)),this}getCenter(a,l){let p=o.ae((this.left+a-this.right)/2,0,a),d=o.ae((this.top+l-this.bottom)/2,0,l);return new o.P(p,d)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new df(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function gc(g,a){if(!g.renderWorldCopies||g.lngRange)return;let l=a.lng-g.center.lng;a.lng+=l>180?-360:l<-180?360:0}function lo(g){return Math.max(0,Math.floor(g))}class si{constructor(a,l,p,d,y,w){this._callbacks=a,this._tileSize=512,this._renderWorldCopies=w===void 0||!!w,this._minZoom=l||0,this._maxZoom=p||22,this._minPitch=d==null?0:d,this._maxPitch=y==null?60:y,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=lo(this._zoom),this._scale=o.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new df,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(a,l,p){this._latRange=a.latRange,this._lngRange=a.lngRange,this._width=a.width,this._height=a.height,this._center=a.center,this._elevation=a.elevation,this._minElevationForCurrentTile=a.minElevationForCurrentTile,this._zoom=a.zoom,this._tileZoom=lo(this._zoom),this._scale=o.ac(this._zoom),this._bearingInRadians=a.bearingInRadians,this._fovInRadians=a.fovInRadians,this._pitchInRadians=a.pitchInRadians,this._rollInRadians=a.rollInRadians,this._unmodified=a.unmodified,this._edgeInsets=new df(a.padding.top,a.padding.bottom,a.padding.left,a.padding.right),this._minZoom=a.minZoom,this._maxZoom=a.maxZoom,this._minPitch=a.minPitch,this._maxPitch=a.maxPitch,this._renderWorldCopies=a.renderWorldCopies,this._cameraToCenterDistance=a.cameraToCenterDistance,this._nearZ=a.nearZ,this._farZ=a.farZ,this._autoCalculateNearFarZ=!p&&a.autoCalculateNearFarZ,l&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(a){this._minElevationForCurrentTile=a}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(a){this._minZoom!==a&&(this._minZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(a){this._minPitch!==a&&(this._minPitch=a,this.setPitch(Math.max(this.pitch,a)))}get maxPitch(){return this._maxPitch}setMaxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.setPitch(Math.min(this.pitch,a)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(a){let l=o.aL(a,-180,180)*Math.PI/180;var p,d,y,w,C,A,O,D,z;this._bearingInRadians!==l&&(this._unmodified=!1,this._bearingInRadians=l,this._calcMatrices(),this._rotationMatrix=v(),p=this._rotationMatrix,y=-this._bearingInRadians,w=(d=this._rotationMatrix)[0],C=d[1],A=d[2],O=d[3],D=Math.sin(y),z=Math.cos(y),p[0]=w*z+A*D,p[1]=C*z+O*D,p[2]=w*-D+A*z,p[3]=C*-D+O*z)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(a){let l=o.ae(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==l&&(this._unmodified=!1,this._pitchInRadians=l,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(a){let l=a/180*Math.PI;this._rollInRadians!==l&&(this._unmodified=!1,this._rollInRadians=l,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aM(this._fovInRadians)}setFov(a){a=o.ae(a,.1,150),this.fov!==a&&(this._unmodified=!1,this._fovInRadians=o.ab(a),this._calcMatrices())}get zoom(){return this._zoom}setZoom(a){let l=this.getConstrained(this._center,a).zoom;this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this._tileZoom=Math.max(0,Math.floor(l)),this._scale=o.ac(l),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(a,l){this._autoCalculateNearFarZ=!1,this._nearZ=a,this._farZ=l,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,l,p){this._unmodified=!1,this._edgeInsets.interpolate(a,l,p),this._constrain(),this._calcMatrices()}resize(a,l,p=!0){this._width=a,this._height=l,p&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new er([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(a){a?(this._lngRange=[a.getWest(),a.getEast()],this._latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,o.af])}getConstrained(a,l){return this._callbacks.getConstrained(a,l)}getCameraQueryGeometry(a,l){if(l.length===1)return[l[0],a];{let p=a.x,d=a.y,y=a.x,w=a.y;for(let C of l)p=Math.min(p,C.x),d=Math.min(d,C.y),y=Math.max(y,C.x),w=Math.max(w,C.y);return[new o.P(p,d),new o.P(y,d),new o.P(y,w),new o.P(p,w),new o.P(p,d)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let a=this._unmodified,{center:l,zoom:p}=this.getConstrained(this.center,this.zoom);this.setCenter(l),this.setZoom(p),this._unmodified=a,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let a=o.ad(new Float64Array(16));o.M(a,a,[this._width/2,-this._height/2,1]),o.L(a,a,[1,-1,0]),this._clipSpaceToPixelsMatrix=a,a=o.ad(new Float64Array(16)),o.M(a,a,[1,-1,1]),o.L(a,a,[-1,-1,0]),o.M(a,a,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=a,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(a,l,p,d){let y=p!==void 0?p:this.bearing,w=d=d!==void 0?d:this.pitch,C=o.$.fromLngLat(a,l),A=-Math.cos(o.ab(w)),O=Math.sin(o.ab(w)),D=O*Math.sin(o.ab(y)),z=-O*Math.cos(o.ab(y)),N=this.elevation,$=l-N,G;A*$>=0||Math.abs(A)<.1?(G=1e4,N=l+G*A):G=-$/A;let ae,oe,se=o.aN(1,C.y),he=0;do{if(he+=1,he>10)break;oe=G/se,ae=new o.$(C.x+D*oe,C.y+z*oe),se=1/ae.meterInMercatorCoordinateUnits()}while(Math.abs(G-oe*se)>1e-12);return{center:ae.toLngLat(),elevation:N,zoom:o.ah(this.height/2/Math.tan(this.fovInRadians/2)/oe/this.tileSize)}}recalculateZoomAndCenter(a){if(this.elevation-a==0)return;let l=o.ag(1,this.center.lat)*this.worldSize,p=this.cameraToCenterDistance/l,d=o.$.fromLngLat(this.center,this.elevation),y=Y(this.center,this.elevation,this.pitch,this.bearing,p);this._elevation=a;let w=this.calculateCenterFromCameraLngLatAlt(y.toLngLat(),o.aN(y.z,d.y),this.bearing,this.pitch);this._elevation=w.elevation,this._center=w.center,this.setZoom(w.zoom)}getCameraPoint(){let a=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(a*Math.sin(this.rollInRadians),a*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let a=o.ag(1,this.center.lat)*this.worldSize;return Y(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/a).toLngLat()}getMercatorTileCoordinates(a){if(!a)return[0,0,1,1];let l=a.canonical.z>=0?1<<a.canonical.z:Math.pow(2,a.canonical.z);return[a.canonical.x/l,a.canonical.y/l,1/l/o.Z,1/l/o.Z]}}class yn{constructor(a,l){this.min=a,this.max=l,this.center=o.aO([],o.aP([],this.min,this.max),.5)}quadrant(a){let l=[a%2==0,a<2],p=o.aQ(this.min),d=o.aQ(this.max);for(let y=0;y<l.length;y++)p[y]=l[y]?this.min[y]:this.center[y],d[y]=l[y]?this.center[y]:this.max[y];return d[2]=this.max[2],new yn(p,d)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersectsFrustum(a){let l=!0;for(let p=0;p<a.planes.length;p++){let d=this.intersectsPlane(a.planes[p]);if(d===0)return 0;d===1&&(l=!1)}return l?2:a.aabb.min[0]>this.max[0]||a.aabb.min[1]>this.max[1]||a.aabb.min[2]>this.max[2]||a.aabb.max[0]<this.min[0]||a.aabb.max[1]<this.min[1]||a.aabb.max[2]<this.min[2]?0:1}intersectsPlane(a){let l=a[3],p=a[3];for(let d=0;d<3;d++)a[d]>0?(l+=a[d]*this.min[d],p+=a[d]*this.max[d]):(p+=a[d]*this.min[d],l+=a[d]*this.max[d]);return l>=0?2:p<0?0:1}}class li{distanceToTile2d(a,l,p,d){let y=d.distanceX([a,l]),w=d.distanceY([a,l]);return Math.hypot(y,w)}getWrap(a,l,p){return p}getTileAABB(a,l,p,d){var y,w;let C=p,A=p;if(d.terrain){let D=new o.Y(a.z,l,a.z,a.x,a.y),z=d.terrain.getMinMaxElevation(D);C=(y=z.minElevation)!==null&&y!==void 0?y:p,A=(w=z.maxElevation)!==null&&w!==void 0?w:p}let O=1<<a.z;return new yn([l+a.x/O,a.y/O,C],[l+(a.x+1)/O,(a.y+1)/O,A])}allowVariableZoom(a,l){let p=a.fov*(Math.abs(Math.cos(a.rollInRadians))*a.height+Math.abs(Math.sin(a.rollInRadians))*a.width)/a.height,d=o.ae(78.5-p/2,0,60);return!!l.terrain||a.pitch>d}allowWorldCopies(){return!0}recalculateCache(){}}class Rr{constructor(a,l,p){this.points=a,this.planes=l,this.aabb=p}static fromInvProjectionMatrix(a,l=1,p=0){let d=Math.pow(2,p),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(O=>{let D=1/(O=o.at([],O,a))[3]/l*d;return o.aR(O,O,[D,D,1/O[3],D])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(O=>{let D=o.aS([],y[O[0]],y[O[1]]),z=o.aS([],y[O[2]],y[O[1]]),N=o.aT([],o.aU([],D,z)),$=-o.aV(N,y[O[1]]);return N.concat($)}),C=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],A=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let O of y)for(let D=0;D<3;D++)C[D]=Math.min(C[D],O[D]),A[D]=Math.max(A[D],O[D]);return new Rr(y,w,new yn(C,A))}}class yc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,l,p){return this._helper.interpolatePadding(a,l,p)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,l,p=!0){this._helper.resize(a,l,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,l){this._helper.overrideNearFarZ(a,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a,l){}constructor(a,l,p,d,y){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new si({calcMatrices:()=>{this._calcMatrices()},getConstrained:(w,C)=>this.getConstrained(w,C)},a,l,p,d,y),this._coveringTilesDetailsProvider=new li}clone(){let a=new yc;return a.apply(this),a}apply(a,l,p){this._helper.apply(a,l,p)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(a){let l=[new o.aW(0,a)];if(this._helper._renderWorldCopies){let p=this.screenPointToMercatorCoordinate(new o.P(0,0)),d=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),y=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),w=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),C=Math.floor(Math.min(p.x,d.x,y.x,w.x)),A=Math.floor(Math.max(p.x,d.x,y.x,w.x)),O=1;for(let D=C-O;D<=A+O;D++)D!==0&&l.push(new o.aW(D,a))}return l}getCameraFrustum(){return Rr.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){let l=this.screenPointToLocation(this.centerPoint,a),p=a?a.getElevationForLngLatZoom(l,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(p)}setLocationAtPoint(a,l){let p=o.ag(this.elevation,this.center.lat),d=this.screenPointToMercatorCoordinateAtZ(l,p),y=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,p),w=o.$.fromLngLat(a),C=new o.$(w.x-(d.x-y.x),w.y-(d.y-y.y));this.setCenter(C==null?void 0:C.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(a,l){return l?this.coordinatePoint(o.$.fromLngLat(a),l.getElevationForLngLatZoom(a,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.$.fromLngLat(a))}screenPointToLocation(a,l){var p;return(p=this.screenPointToMercatorCoordinate(a,l))===null||p===void 0?void 0:p.toLngLat()}screenPointToMercatorCoordinate(a,l){if(l){let p=l.pointCoordinate(a);if(p!=null)return p}return this.screenPointToMercatorCoordinateAtZ(a)}screenPointToMercatorCoordinateAtZ(a,l){let p=l||0,d=[a.x,a.y,0,1],y=[a.x,a.y,1,1];o.at(d,d,this._pixelMatrixInverse),o.at(y,y,this._pixelMatrixInverse);let w=d[3],C=y[3],A=d[1]/w,O=y[1]/C,D=d[2]/w,z=y[2]/C,N=D===z?0:(p-D)/(z-D);return new o.$(o.B.number(d[0]/w,y[0]/C,N)/this.worldSize,o.B.number(A,O,N)/this.worldSize,p)}coordinatePoint(a,l=0,p=this._pixelMatrix){let d=[a.x*this.worldSize,a.y*this.worldSize,l,1];return o.at(d,d,p),new o.P(d[0]/d[3],d[1]/d[3])}getBounds(){let a=Math.max(0,this._helper._height/2-Ee(this));return new er().extend(this.screenPointToLocation(new o.P(0,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(a,l){return l?l.pointCoordinate(a)!=null:a.y>this.height/2-Ee(this)}calculatePosMatrix(a,l=!1,p){var d;let y=(d=a.key)!==null&&d!==void 0?d:o.aX(a.wrap,a.canonical.z,a.canonical.z,a.canonical.x,a.canonical.y),w=l?this._alignedPosMatrixCache:this._posMatrixCache;if(w.has(y)){let O=w.get(y);return p?O.f32:O.f64}let C=X(a,this.worldSize);o.N(C,l?this._alignedProjMatrix:this._viewProjMatrix,C);let A={f64:C,f32:new Float32Array(C)};return w.set(y,A),p?A.f32:A.f64}calculateFogMatrix(a){let l=a.key,p=this._fogMatrixCacheF32;if(p.has(l))return p.get(l);let d=X(a,this.worldSize);return o.N(d,this._fogMatrix,d),p.set(l,new Float32Array(d)),p.get(l)}getConstrained(a,l){l=o.ae(+l,this.minZoom,this.maxZoom);let p={center:new o.Q(a.lng,a.lat),zoom:l},d=this._helper._lngRange;this._helper._renderWorldCopies||d!==null||(d=[-179.9999999999,180-1e-10]);let y=this.tileSize*o.ac(p.zoom),w=0,C=y,A=0,O=y,D=0,z=0,{x:N,y:$}=this.size;if(this._helper._latRange){let ve=this._helper._latRange;w=o.S(ve[1])*y,C=o.S(ve[0])*y,C-w<$&&(D=$/(C-w))}d&&(A=o.aL(o.U(d[0])*y,0,y),O=o.aL(o.U(d[1])*y,0,y),O<A&&(O+=y),O-A<N&&(z=N/(O-A)));let{x:G,y:ae}=ai(y,a),oe,se,he=Math.max(z||0,D||0);if(he){let ve=new o.P(z?(O+A)/2:G,D?(C+w)/2:ae);return p.center=ao(y,ve).wrap(),p.zoom+=o.ah(he),p}if(this._helper._latRange){let ve=$/2;ae-ve<w&&(se=w+ve),ae+ve>C&&(se=C-ve)}if(d){let ve=(A+O)/2,me=G;this._helper._renderWorldCopies&&(me=o.aL(G,ve-y/2,ve+y/2));let ge=N/2;me-ge<A&&(oe=A+ge),me+ge>O&&(oe=O-ge)}if(oe!==void 0||se!==void 0){let ve=new o.P(oe!=null?oe:G,se!=null?se:ae);p.center=ao(y,ve).wrap()}return p}calculateCenterFromCameraLngLatAlt(a,l,p,d){return this._helper.calculateCenterFromCameraLngLatAlt(a,l,p,d)}_calculateNearFarZIfNeeded(a,l,p){if(!this._helper.autoCalculateNearFarZ)return;let d=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),y=a-d*this._helper._pixelPerMeter/Math.cos(l),w=d<0?y:a,C=Math.PI/2+this.pitchInRadians,A=o.ab(this.fov)*(Math.abs(Math.cos(o.ab(this.roll)))*this.height+Math.abs(Math.sin(o.ab(this.roll)))*this.width)/this.height*(.5+p.y/this.height),O=Math.sin(A)*w/Math.sin(o.ae(Math.PI-C-A,.01,Math.PI-.01)),D=Ee(this),z=Math.atan(D/this._helper.cameraToCenterDistance),N=o.ab(.75),$=z>N?2*z*(.5+p.y/(2*D)):N,G=Math.sin($)*w/Math.sin(o.ae(Math.PI-C-$,.01,Math.PI-.01)),ae=Math.min(O,G);this._helper._farZ=1.01*(Math.cos(Math.PI/2-l)*ae+w),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let a=this.centerOffset,l=ai(this.worldSize,this.center),p=l.x,d=l.y;this._helper._pixelPerMeter=o.ag(1,this.center.lat)*this.worldSize;let y=o.ab(Math.min(this.pitch,$n)),w=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(y)),C;this._calculateNearFarZIfNeeded(w,y,a),C=new Float64Array(16),o.aY(C,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.an(this._invProjMatrix,C),C[8]=2*-a.x/this._helper._width,C[9]=2*a.y/this._helper._height,this._projectionMatrix=o.aZ(C),o.M(C,C,[1,-1,1]),o.L(C,C,[0,0,-this._helper.cameraToCenterDistance]),o.a_(C,C,-this.rollInRadians),o.a$(C,C,this.pitchInRadians),o.a_(C,C,-this.bearingInRadians),o.L(C,C,[-p,-d,0]),this._mercatorMatrix=o.M([],C,[this.worldSize,this.worldSize,this.worldSize]),o.M(C,C,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,C),o.L(C,C,[0,0,-this.elevation]),this._viewProjMatrix=C,this._invViewProjMatrix=o.an([],C);let A=[0,0,-1,1];o.at(A,A,this._invViewProjMatrix),this._cameraPosition=[A[0]/A[3],A[1]/A[3],A[2]/A[3]],this._fogMatrix=new Float64Array(16),o.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,w,this._helper._farZ),this._fogMatrix[8]=2*-a.x/this.width,this._fogMatrix[9]=2*a.y/this.height,o.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.L(this._fogMatrix,this._fogMatrix,[-p,-d,0]),o.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,C);let O=this._helper._width%2/2,D=this._helper._height%2/2,z=Math.cos(this.bearingInRadians),N=Math.sin(-this.bearingInRadians),$=p-Math.round(p)+z*O+N*D,G=d-Math.round(d)+z*D+N*O,ae=new Float64Array(C);if(o.L(ae,ae,[$>.5?$-1:$,G>.5?G-1:G,0]),this._alignedProjMatrix=ae,C=o.an(new Float64Array(16),this._pixelMatrix),!C)throw new Error("failed to invert matrix");this._pixelMatrixInverse=C,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let a=this.screenPointToMercatorCoordinate(new o.P(0,0)),l=[a.x*this.worldSize,a.y*this.worldSize,0,1];return o.at(l,l,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let a=o.ag(1,this.center.lat)*this.worldSize;return Y(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/a).toLngLat()}lngLatToCameraDepth(a,l){let p=o.$.fromLngLat(a),d=[p.x*this.worldSize,p.y*this.worldSize,l,1];return o.at(d,d,this._viewProjMatrix),d[2]/d[3]}getProjectionData(a){let{overscaledTileID:l,aligned:p,applyTerrainMatrix:d}=a,y=this._helper.getMercatorTileCoordinates(l),w=l?this.calculatePosMatrix(l,p,!0):null,C;return C=l&&l.terrainRttPosMatrix32f&&d?l.terrainRttPosMatrix32f:w||o.b0(),{mainMatrix:C,tileMercatorCoords:y,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:C}}isLocationOccluded(a){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(a,l,p){return 1}transformLightDirection(a){return o.aQ(a)}getRayDirectionFromPixel(a){throw new Error("Not implemented.")}projectTileCoordinates(a,l,p,d){let y=this.calculatePosMatrix(p),w;d?(w=[a,l,d(a,l),1],o.at(w,w,y)):(w=[a,l,0,1],ou(w,w,y));let C=w[3];return{point:new o.P(w[0]/C,w[1]/C),signedDistanceFromCamera:C,isOccluded:!1}}populateCache(a){for(let l of a)this.calculatePosMatrix(l)}getMatrixForModel(a,l){let p=o.$.fromLngLat(a,l),d=p.meterInMercatorCoordinateUnits(),y=o.b1();return o.L(y,y,[p.x,p.y,p.z]),o.a_(y,y,Math.PI),o.a$(y,y,Math.PI/2),o.M(y,y,[-d,d,d]),y}getProjectionDataForCustomLayer(a=!0){let l=new o.Y(0,0,0,0,0),p=this.getProjectionData({overscaledTileID:l,applyGlobeMatrix:a}),d=X(l,this.worldSize);o.N(d,this._viewProjMatrix,d),p.tileMercatorCoords=[0,0,1,1];let y=[o.Z,o.Z,this.worldSize/this._helper.pixelsPerMeter],w=o.b2();return o.M(w,d,y),p.fallbackMatrix=w,p.mainMatrix=w,p}getFastPathSimpleProjectionMatrix(a){return this.calculatePosMatrix(a)}}function zi(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Mo(g){if(g.useSlerp){if(g.k<1){let a=o.b3(g.startEulerAngles.roll,g.startEulerAngles.pitch,g.startEulerAngles.bearing),l=o.b3(g.endEulerAngles.roll,g.endEulerAngles.pitch,g.endEulerAngles.bearing),p=new Float64Array(4);o.b4(p,a,l,g.k);let d=o.b5(p);g.tr.setRoll(d.roll),g.tr.setPitch(d.pitch),g.tr.setBearing(d.bearing)}else g.tr.setRoll(g.endEulerAngles.roll),g.tr.setPitch(g.endEulerAngles.pitch),g.tr.setBearing(g.endEulerAngles.bearing);}else g.tr.setRoll(o.B.number(g.startEulerAngles.roll,g.endEulerAngles.roll,g.k)),g.tr.setPitch(o.B.number(g.startEulerAngles.pitch,g.endEulerAngles.pitch,g.k)),g.tr.setBearing(o.B.number(g.startEulerAngles.bearing,g.endEulerAngles.bearing,g.k))}function uo(g,a,l,p,d){let y=d.padding,w=ai(d.worldSize,l.getNorthWest()),C=ai(d.worldSize,l.getNorthEast()),A=ai(d.worldSize,l.getSouthEast()),O=ai(d.worldSize,l.getSouthWest()),D=o.ab(-p),z=w.rotate(D),N=C.rotate(D),$=A.rotate(D),G=O.rotate(D),ae=new o.P(Math.max(z.x,N.x,G.x,$.x),Math.max(z.y,N.y,G.y,$.y)),oe=new o.P(Math.min(z.x,N.x,G.x,$.x),Math.min(z.y,N.y,G.y,$.y)),se=ae.sub(oe),he=(d.width-(y.left+y.right+a.left+a.right))/se.x,ve=(d.height-(y.top+y.bottom+a.top+a.bottom))/se.y;if(ve<0||he<0)return void zi();let me=Math.min(o.ah(d.scale*Math.min(he,ve)),g.maxZoom),ge=o.P.convert(g.offset),be=new o.P((a.left-a.right)/2,(a.top-a.bottom)/2).rotate(o.ab(p)),ye=ge.add(be).mult(d.scale/o.ac(me));return{center:ao(d.worldSize,w.add(A).div(2).sub(ye)),zoom:me,bearing:p}}class mf{get useGlobeControls(){return!1}handlePanInertia(a,l){return{easingOffset:a,easingCenter:l.center}}handleMapControlsRollPitchBearingZoom(a,l){a.bearingDelta&&l.setBearing(l.bearing+a.bearingDelta),a.pitchDelta&&l.setPitch(l.pitch+a.pitchDelta),a.rollDelta&&l.setRoll(l.roll+a.rollDelta),a.zoomDelta&&l.setZoom(l.zoom+a.zoomDelta)}handleMapControlsPan(a,l,p){a.around.distSqr(l.centerPoint)<.01||l.setLocationAtPoint(p,a.around)}cameraForBoxAndBearing(a,l,p,d,y){return uo(a,l,p,d,y)}handleJumpToCenterZoom(a,l){a.zoom!==(l.zoom!==void 0?+l.zoom:a.zoom)&&a.setZoom(+l.zoom),l.center!==void 0&&a.setCenter(o.Q.convert(l.center))}handleEaseTo(a,l){let p=a.zoom,d=a.padding,y={roll:a.roll,pitch:a.pitch,bearing:a.bearing},w={roll:l.roll===void 0?a.roll:l.roll,pitch:l.pitch===void 0?a.pitch:l.pitch,bearing:l.bearing===void 0?a.bearing:l.bearing},C=l.zoom!==void 0,A=!a.isPaddingEqual(l.padding),O=!1,D=C?+l.zoom:a.zoom,z=a.centerPoint.add(l.offsetAsPoint),N=a.screenPointToLocation(z),{center:$,zoom:G}=a.getConstrained(o.Q.convert(l.center||N),D!=null?D:p);gc(a,$);let ae=ai(a.worldSize,N),oe=ai(a.worldSize,$).sub(ae),se=o.ac(G-p);return O=G!==p,{easeFunc:he=>{if(O&&a.setZoom(o.B.number(p,G,he)),o.b6(y,w)||Mo({startEulerAngles:y,endEulerAngles:w,tr:a,k:he,useSlerp:y.roll!=w.roll}),A&&(a.interpolatePadding(d,l.padding,he),z=a.centerPoint.add(l.offsetAsPoint)),l.around)a.setLocationAtPoint(l.around,l.aroundPoint);else{let ve=o.ac(a.zoom-p),me=G>p?Math.min(2,se):Math.max(.5,se),ge=Math.pow(me,1-he),be=ao(a.worldSize,ae.add(oe.mult(he*ge)).mult(ve));a.setLocationAtPoint(a.renderWorldCopies?be.wrap():be,z)}},isZooming:O,elevationCenter:$}}handleFlyTo(a,l){let p=l.zoom!==void 0,d=a.zoom,y=a.getConstrained(o.Q.convert(l.center||l.locationAtOffset),p?+l.zoom:d),w=y.center,C=y.zoom;gc(a,w);let A=ai(a.worldSize,l.locationAtOffset),O=ai(a.worldSize,w).sub(A),D=O.mag(),z=o.ac(C-d),N;if(l.minZoom!==void 0){let $=Math.min(+l.minZoom,d,C),G=a.getConstrained(w,$).zoom;N=o.ac(G-d)}return{easeFunc:($,G,ae,oe)=>{a.setZoom($===1?C:d+o.ah(G));let se=$===1?w:ao(a.worldSize,A.add(O.mult(ae)).mult(G));a.setLocationAtPoint(a.renderWorldCopies?se.wrap():se,oe)},scaleOfZoom:z,targetCenter:w,scaleOfMinZoom:N,pixelPathLength:D}}}class xr{constructor(a,l,p){this.blendFunction=a,this.blendColor=l,this.mask=p}}xr.Replace=[1,0],xr.disabled=new xr(xr.Replace,o.b7.transparent,[!1,!1,!1,!1]),xr.unblended=new xr(xr.Replace,o.b7.transparent,[!0,!0,!0,!0]),xr.alphaBlended=new xr([1,771],o.b7.transparent,[!0,!0,!0,!0]);let rn=2305;class Yt{constructor(a,l,p){this.enable=a,this.mode=l,this.frontFace=p}}Yt.disabled=new Yt(!1,1029,rn),Yt.backCCW=new Yt(!0,1029,rn),Yt.frontCCW=new Yt(!0,1028,rn);class Mt{constructor(a,l,p){this.func=a,this.mask=l,this.range=p}}Mt.ReadOnly=!1,Mt.ReadWrite=!0,Mt.disabled=new Mt(519,Mt.ReadOnly,[0,1]);let _c=7680;class Dt{constructor(a,l,p,d,y,w){this.test=a,this.ref=l,this.mask=p,this.fail=d,this.depthFail=y,this.pass=w}}Dt.disabled=new Dt({func:519,mask:0},0,0,_c,_c,_c);let od=new WeakMap;function bi(g){var a;if(od.has(g))return od.get(g);{let l=(a=g.getParameter(g.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return od.set(g,l),l}}class Zg{get awaitingQuery(){return!!this._readbackQueue}constructor(a){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=a;let l=a.context,p=l.gl;this._texFormat=p.RGBA,this._texType=p.UNSIGNED_BYTE;let d=new o.aI;d.emplaceBack(-1,-1),d.emplaceBack(2,-1),d.emplaceBack(-1,2);let y=new o.aK;y.emplaceBack(0,1,2),this._fullscreenTriangle=new vc(l.createVertexBuffer(d,Fi.members),l.createIndexBuffer(y),o.aJ.simpleSegment(0,0,d.length,y.length)),this._resultBuffer=new Uint8Array(4),l.activeTexture.set(p.TEXTURE1);let w=p.createTexture();p.bindTexture(p.TEXTURE_2D,w),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=l.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(w),bi(p)&&(this._pbo=p.createBuffer(),p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.bufferData(p.PIXEL_PACK_BUFFER,4,p.STREAM_READ),p.bindBuffer(p.PIXEL_PACK_BUFFER,null))}destroy(){let a=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),a.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(a,l){let p=this._updateCount;return this._readbackQueue?p>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():p>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(a,l),this._updateCount++,this._measuredError}_bindFramebuffer(){let a=this._cachedRenderContext.context,l=a.gl;a.activeTexture.set(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,this._fbo.colorAttachment.get()),a.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(a,l){let p=this._cachedRenderContext.context,d=p.gl;if(this._bindFramebuffer(),p.viewport.set([0,0,this._texWidth,this._texHeight]),p.clear({color:o.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(p,d.TRIANGLES,Mt.disabled,Dt.disabled,xr.unblended,Yt.disabled,((y,w)=>({u_input:y,u_output_expected:w}))(a,l),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&bi(d)){d.bindBuffer(d.PIXEL_PACK_BUFFER,this._pbo),d.readBuffer(d.COLOR_ATTACHMENT0),d.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),d.bindBuffer(d.PIXEL_PACK_BUFFER,null);let y=d.fenceSync(d.SYNC_GPU_COMMANDS_COMPLETE,0);d.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:y}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let a=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&bi(a)){let l=a.clientWaitSync(this._readbackQueue.sync,0,0);if(l===a.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(l===a.TIMEOUT_EXPIRED)return;a.bindBuffer(a.PIXEL_PACK_BUFFER,this._pbo),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),a.bindBuffer(a.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),a.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Zg._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(a){let l=0;return l+=a[0]/256,l+=a[1]/65536,l+=a[2]/16777216,a[3]<127&&(l=-l),l/128}}let Wg=o.Z/128;function vf(g,a){let l=g.granularity!==void 0?Math.max(g.granularity,1):1,p=l+(g.generateBorders?2:0),d=l+(g.extendToNorthPole||g.generateBorders?1:0)+(g.extendToSouthPole||g.generateBorders?1:0),y=p+1,w=d+1,C=g.generateBorders?-1:0,A=g.generateBorders||g.extendToNorthPole?-1:0,O=l+(g.generateBorders?1:0),D=l+(g.generateBorders||g.extendToSouthPole?1:0),z=y*w,N=p*d*6,$=y*w>65536;if($&&a==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let G=$||a==="32bit",ae=new Int16Array(2*z),oe=0;for(let ve=A;ve<=D;ve++)for(let me=C;me<=O;me++){let ge=me/l*o.Z;me===-1&&(ge=-64),me===l+1&&(ge=o.Z+Wg);let be=ve/l*o.Z;ve===-1&&(be=g.extendToNorthPole?o.b9:-64),ve===l+1&&(be=g.extendToSouthPole?o.ba:o.Z+Wg),ae[oe++]=ge,ae[oe++]=be}let se=G?new Uint32Array(N):new Uint16Array(N),he=0;for(let ve=0;ve<d;ve++)for(let me=0;me<p;me++){let ge=me+1+ve*y,be=me+(ve+1)*y,ye=me+1+(ve+1)*y;se[he++]=me+ve*y,se[he++]=be,se[he++]=ge,se[he++]=ge,se[he++]=be,se[he++]=ye}return{vertices:ae.buffer.slice(0),indices:se.buffer.slice(0),uses32bitIndices:G}}let xc=new o.aH({fill:new o.bb(128,2),line:new o.bb(512,0),tile:new o.bb(128,32),stencil:new o.bb(128,1),circle:3});class gf{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ni.projectionGlobe}get vertexShaderPreludeCode(){return Ni.projectionMercator.vertexSource}get subdivisionGranularity(){return xc}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(a){this._errorMeasurement||(this._errorMeasurement=new Zg(a));let l=o.S(this._errorQueryLatitudeDegrees),p=2*Math.atan(Math.exp(Math.PI-l*Math.PI*2))-.5*Math.PI,d=this._errorMeasurement.updateErrorLoop(l,p),y=S.now();d!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=d,this._errorMeasurementLastChangeTime=y);let w=Math.min(Math.max((y-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bd(w))}_getMeshKey(a){return`${a.granularity.toString(36)}_${a.generateBorders?"b":""}${a.extendToNorthPole?"n":""}${a.extendToSouthPole?"s":""}`}getMeshFromTileID(a,l,p,d,y){let w=(y==="stencil"?xc.stencil:xc.tile).getGranularityForZoomLevel(l.z);return this._getMesh(a,{granularity:w,generateBorders:p,extendToNorthPole:l.y===0&&d,extendToSouthPole:l.y===(1<<l.z)-1&&d})}_getMesh(a,l){let p=this._getMeshKey(l);if(p in this._tileMeshCache)return this._tileMeshCache[p];let d=function(y,w){let C=vf(w,"16bit"),A=o.aI.deserialize({arrayBuffer:C.vertices,length:C.vertices.byteLength/2/2}),O=o.aK.deserialize({arrayBuffer:C.indices,length:C.indices.byteLength/2/3});return new vc(y.createVertexBuffer(A,Fi.members),y.createIndexBuffer(O),o.aJ.simpleSegment(0,0,A.length,O.length))}(a,l);return this._tileMeshCache[p]=d,d}recalculate(a){}hasTransition(){let a=S.now(),l=!1;return l=l||(a-this._errorMeasurementLastChangeTime)/1e3<.7,l=l||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,l}setErrorQueryLatitudeDegrees(a){this._errorQueryLatitudeDegrees=a}}let Hg=new o.r({type:new o.D(o.v.projection.type)});class ad extends o.E{constructor(a){super(),this._transitionable=new o.T(Hg),this.setProjection(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.C(0)),this._mercatorProjection=new pf,this._verticalPerspectiveProjection=new gf}get transitionState(){let a=this.properties.get("type");if(typeof a=="string"&&a==="mercator")return 0;if(typeof a=="string"&&a==="vertical-perspective")return 1;if(a instanceof o.be){if(a.from==="vertical-perspective"&&a.to==="mercator")return 1-a.transition;if(a.from==="mercator"&&a.to==="vertical-perspective")return a.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(a){this._mercatorProjection.updateGPUdependent(a),this._verticalPerspectiveProjection.updateGPUdependent(a)}getMeshFromTileID(a,l,p,d,y){return this.currentProjection.getMeshFromTileID(a,l,p,d,y)}setProjection(a){this._transitionable.setValue("type",(a==null?void 0:a.type)||"mercator")}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}setErrorQueryLatitudeDegrees(a){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(a),this._mercatorProjection.setErrorQueryLatitudeDegrees(a)}}function yf(g){let a=hu(g.worldSize,g.center.lat);return 2*Math.PI*a}function cu(g,a,l,p,d){let y=1/(1<<d),w=a/o.Z*y+p*y,C=o.bg((g/o.Z*y+l*y)*Math.PI*2+Math.PI,2*Math.PI),A=2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI,O=Math.cos(A),D=new Float64Array(3);return D[0]=Math.sin(C)*O,D[1]=Math.sin(A),D[2]=Math.cos(C)*O,D}function Gn(g){return function(a,l){let p=Math.cos(l),d=new Float64Array(3);return d[0]=Math.sin(a)*p,d[1]=Math.sin(l),d[2]=Math.cos(a)*p,d}(g.lng*Math.PI/180,g.lat*Math.PI/180)}function hu(g,a){return g/(2*Math.PI)/Math.cos(a*Math.PI/180)}function _f(g){let a=Math.asin(g[1])/Math.PI*180,l=Math.sqrt(g[0]*g[0]+g[2]*g[2]);if(l>1e-6){let p=g[0]/l,d=Math.acos(g[2]/l),y=(p>0?d:-d)/Math.PI*180;return new o.Q(o.aL(y,-180,180),a)}return new o.Q(0,a)}function ll(g){return Math.cos(g*Math.PI/180)}function Zn(g,a){let l=ll(g),p=ll(a);return o.ah(p/l)}function sd(g,a){let l=g.rotate(a.bearingInRadians),p=a.zoom+Zn(a.center.lat,0),d=o.bc(1/ll(a.center.lat),1/ll(Math.min(Math.abs(a.center.lat),60)),o.bf(p,7,3,0,1)),y=360/yf({worldSize:a.worldSize,center:{lat:a.center.lat}});return new o.Q(a.center.lng-l.x*y*d,o.ae(a.center.lat+l.y*y,-85.051129,o.af))}function ld(g){let a=.5*g,l=Math.sin(a),p=Math.cos(a);return Math.log(l+p)-Math.log(p-l)}function c1(g,a,l,p){let d=g.lat+l*p;if(Math.abs(l)>1){let y=(Math.sign(g.lat+l)!==Math.sign(g.lat)?-Math.abs(g.lat):Math.abs(g.lat))*Math.PI/180,w=Math.abs(g.lat+l)*Math.PI/180,C=ld(y+p*(w-y)),A=ld(y),O=ld(w);return new o.Q(g.lng+a*((C-A)/(O-A)),d)}return new o.Q(g.lng+a*p,d)}class HM{constructor(a){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=a}recalculateCache(){if(!this._hadAnyChanges)return;let a=this._cachePrevious;this._cachePrevious=this._cache,this._cache=a,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(a,l,p,d){let y=`${a.z}_${a.x}_${a.y}`,w=this._cache.get(y);if(w)return w;let C=this._cachePrevious.get(y);if(C)return this._cache.set(y,C),C;let A=this._aabbFactory(a,l,p,d);return this._cache.set(y,A),this._hadAnyChanges=!0,A}}function wi(g,a,l){let p=g-a;return p<0?-p:Math.max(0,p-l)}function xf(g,a,l,p,d){let y=g-l,w;return w=y<0?Math.min(-y,1+y-d):y>1?Math.min(Math.max(y-d,0),1-y):0,Math.max(w,wi(a,p,d))}class Za{constructor(){this._aabbCache=new HM(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(a,l,p,d){let y=1<<p.z,w=1/y,C=p.x/y,A=p.y/y,O=2;return O=Math.min(O,xf(a,l,C,A,w)),O=Math.min(O,xf(a,l,C+.5,-A-w,w)),O=Math.min(O,xf(a,l,C+.5,2-A-w,w)),O}getWrap(a,l,p){let d=1<<l.z,y=1/d,w=l.x/d,C=wi(a.x,w,y),A=wi(a.x,w-1,y),O=wi(a.x,w+1,y),D=Math.min(C,A,O);return D===O?1:D===A?-1:0}allowVariableZoom(a,l){return Pe(a,l)>4}allowWorldCopies(){return!1}getTileAABB(a,l,p,d){return this._aabbCache.getTileAABB(a,l,p,d)}_computeTileAABB(a,l,p,d){if(a.z<=0)return new yn([-1,-1,-1],[1,1,1]);if(a.z===1)return new yn([a.x===0?-1:0,a.y===0?0:-1,-1],[a.x===0?0:1,a.y===0?1:0,1]);{let y=[cu(0,0,a.x,a.y,a.z),cu(o.Z,0,a.x,a.y,a.z),cu(o.Z,o.Z,a.x,a.y,a.z),cu(0,o.Z,a.x,a.y,a.z)],w=[1,1,1],C=[-1,-1,-1];for(let A of y)for(let O=0;O<3;O++)w[O]=Math.min(w[O],A[O]),C[O]=Math.max(C[O],A[O]);if(a.y===0||a.y===(1<<a.z)-1){let A=[0,a.y===0?1:-1,0];for(let O=0;O<3;O++)w[O]=Math.min(w[O],A[O]),C[O]=Math.max(C[O],A[O])}return new yn(w,C)}}}class fu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,l,p){return this._helper.interpolatePadding(a,l,p)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,l){this._helper.resize(a,l)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,l){this._helper.overrideNearFarZ(a,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a){}constructor(){this._cachedClippingPlane=o.bk(),this._projectionMatrix=o.b1(),this._globeViewProjMatrix32f=o.b0(),this._globeViewProjMatrixNoCorrection=o.b1(),this._globeViewProjMatrixNoCorrectionInverted=o.b1(),this._globeProjMatrixInverted=o.b1(),this._cameraPosition=o.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new si({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,l)=>this.getConstrained(a,l)}),this._coveringTilesDetailsProvider=new Za}clone(){let a=new fu;return a.apply(this),a}apply(a,l){this._globeLatitudeErrorCorrectionRadians=l||0,this._helper.apply(a)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let a=o.bh();return a[0]=this._cameraPosition[0],a[1]=this._cameraPosition[1],a[2]=this._cameraPosition[2],a}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(a){let{overscaledTileID:l,applyGlobeMatrix:p}=a,d=this._helper.getMercatorTileCoordinates(l);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:d,clippingPlane:this._cachedClippingPlane,projectionTransition:p?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(a){let l=this.pitchInRadians,p=this.cameraToCenterDistance/a,d=Math.sin(l)*p,y=Math.cos(l)*p+1,w=1/Math.sqrt(d*d+y*y)*1,C=-d,A=y,O=Math.sqrt(C*C+A*A);C/=O,A/=O;let D=[0,C,A];o.bl(D,D,[0,0,0],-this.bearingInRadians),o.bm(D,D,[0,0,0],-1*this.center.lat*Math.PI/180),o.bn(D,D,[0,0,0],this.center.lng*Math.PI/180);let z=1/o.bo(D);return o.aO(D,D,z),[...D,-w*z]}isLocationOccluded(a){return!this.isSurfacePointVisible(Gn(a))}transformLightDirection(a){let l=this._helper._center.lng*Math.PI/180,p=this._helper._center.lat*Math.PI/180,d=Math.cos(p),y=[Math.sin(l)*d,Math.sin(p),Math.cos(l)*d],w=[y[2],0,-y[0]],C=[0,0,0];o.aU(C,w,y),o.aT(w,w),o.aT(C,C);let A=[0,0,0];return o.aT(A,[w[0]*a[0]+C[0]*a[1]+y[0]*a[2],w[1]*a[0]+C[1]*a[1]+y[1]*a[2],w[2]*a[0]+C[2]*a[1]+y[2]*a[2]]),A}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(a,l,p){let d=function(C,A,O){let D=1/(1<<O.z);return new o.$(C/o.Z*D+O.x*D,A/o.Z*D+O.y*D)}(a,l,p.canonical),y=(w=d.y,[o.bg(d.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI]);var w;return this.getCircleRadiusCorrection()/Math.cos(y[1])}projectTileCoordinates(a,l,p,d){let y=p.canonical,w=cu(a,l,y.x,y.y,y.z),C=1+(d?d(a,l):0)/o.bu,A=[w[0]*C,w[1]*C,w[2]*C,1];o.at(A,A,this._globeViewProjMatrixNoCorrection);let O=this._cachedClippingPlane,D=O[0]*w[0]+O[1]*w[1]+O[2]*w[2]+O[3]<0;return{point:new o.P(A[0]/A[3],A[1]/A[3]),signedDistanceFromCamera:A[3],isOccluded:D}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let a=hu(this.worldSize,this.center.lat),l=o.b2(),p=o.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*a),o.aY(l,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let d=this.centerOffset;l[8]=2*-d.x/this._helper._width,l[9]=2*d.y/this._helper._height,this._projectionMatrix=o.aZ(l),this._globeProjMatrixInverted=o.b2(),o.an(this._globeProjMatrixInverted,l),o.L(l,l,[0,0,-this.cameraToCenterDistance]),o.a_(l,l,this.rollInRadians),o.a$(l,l,-this.pitchInRadians),o.a_(l,l,this.bearingInRadians),o.L(l,l,[0,0,-a]);let y=o.bh();y[0]=a,y[1]=a,y[2]=a,o.a$(p,l,this.center.lat*Math.PI/180),o.bp(p,p,-this.center.lng*Math.PI/180),o.M(p,p,y),this._globeViewProjMatrixNoCorrection=p,o.a$(l,l,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bp(l,l,-this.center.lng*Math.PI/180),o.M(l,l,y),this._globeViewProjMatrix32f=new Float32Array(l),this._globeViewProjMatrixNoCorrectionInverted=o.b2(),o.an(this._globeViewProjMatrixNoCorrectionInverted,p);let w=o.bh();this._cameraPosition=o.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/a,o.bl(this._cameraPosition,this._cameraPosition,w,-this.rollInRadians),o.bm(this._cameraPosition,this._cameraPosition,w,this.pitchInRadians),o.bl(this._cameraPosition,this._cameraPosition,w,-this.bearingInRadians),o.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bm(this._cameraPosition,this._cameraPosition,w,-this.center.lat*Math.PI/180),o.bn(this._cameraPosition,this._cameraPosition,w,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(a);let C=o.aZ(this._globeViewProjMatrixNoCorrectionInverted);o.M(C,C,[1,1,-1]),this._cachedFrustum=Rr.fromInvProjectionMatrix(C)}calculateFogMatrix(a){o.w("calculateFogMatrix is not supported on globe projection.");let l=o.b2();return o.ad(l),l}getVisibleUnwrappedCoordinates(a){return[new o.aW(0,a)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){a&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,l){if(!this._globeViewProjMatrixNoCorrection)return 1;let p=Gn(a);o.aO(p,p,1+l/o.bu);let d=o.bk();return o.at(d,[p[0],p[1],p[2],1],this._globeViewProjMatrixNoCorrection),d[2]/d[3]}populateCache(a){}getBounds(){let a=.5*this.width,l=.5*this.height,p=[new o.P(0,0),new o.P(a,0),new o.P(this.width,0),new o.P(this.width,l),new o.P(this.width,this.height),new o.P(a,this.height),new o.P(0,this.height),new o.P(0,l)],d=[];for(let z of p)d.push(this.unprojectScreenPoint(z));let y=0,w=0,C=0,A=0,O=this.center;for(let z of d){let N=o.bq(O.lng,z.lng),$=o.bq(O.lat,z.lat);N<w&&(w=N),N>y&&(y=N),$<A&&(A=$),$>C&&(C=$)}let D=[O.lng+w,O.lat+A,O.lng+y,O.lat+C];return this.isSurfacePointOnScreen([0,1,0])&&(D[3]=90,D[0]=-180,D[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(D[1]=-90,D[0]=-180,D[2]=180),new er(D)}getConstrained(a,l){let p=o.ae(a.lat,-85.051129,o.af),d=o.ae(+l,this.minZoom+Zn(0,p),this.maxZoom);return{center:new o.Q(a.lng,p),zoom:d}}calculateCenterFromCameraLngLatAlt(a,l,p,d){return this._helper.calculateCenterFromCameraLngLatAlt(a,l,p,d)}setLocationAtPoint(a,l){let p=Gn(this.unprojectScreenPoint(l)),d=Gn(a),y=o.bh();o.br(y);let w=o.bh();o.bn(w,p,y,-this.center.lng*Math.PI/180),o.bm(w,w,y,this.center.lat*Math.PI/180);let C=d[0]*d[0]+d[2]*d[2],A=w[0]*w[0];if(C<A)return;let O=Math.sqrt(C-A),D=-O,z=o.bs(d[0],d[2],w[0],O),N=o.bs(d[0],d[2],w[0],D),$=o.bh();o.bn($,d,y,-z);let G=o.bs($[1],$[2],w[1],w[2]),ae=o.bh();o.bn(ae,d,y,-N);let oe=o.bs(ae[1],ae[2],w[1],w[2]),se=.5*Math.PI,he=G>=-se&&G<=se,ve=oe>=-se&&oe<=se,me,ge;if(he&&ve){let Ne=this.center.lng*Math.PI/180,qe=this.center.lat*Math.PI/180;o.bv(z,Ne)+o.bv(G,qe)<o.bv(N,Ne)+o.bv(oe,qe)?(me=z,ge=G):(me=N,ge=oe)}else if(he)me=z,ge=G;else{if(!ve)return;me=N,ge=oe}let be=me/Math.PI*180,ye=ge/Math.PI*180,Ie=this.center.lat;this.setCenter(new o.Q(be,o.ae(ye,-90,90))),this.setZoom(this.zoom+Zn(Ie,this.center.lat))}locationToScreenPoint(a,l){let p=Gn(a);if(l){let d=l.getElevationForLngLatZoom(a,this._helper._tileZoom);o.aO(p,p,1+d/o.bu)}return this._projectSurfacePointToScreen(p)}_projectSurfacePointToScreen(a){let l=o.bk();return o.at(l,[...a,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],new o.P((.5*l[0]+.5)*this.width,(.5*-l[1]+.5)*this.height)}screenPointToMercatorCoordinate(a,l){if(l){let p=l.pointCoordinate(a);if(p)return p}return o.$.fromLngLat(this.unprojectScreenPoint(a))}screenPointToLocation(a,l){var p;return(p=this.screenPointToMercatorCoordinate(a,l))===null||p===void 0?void 0:p.toLngLat()}isPointOnMapSurface(a,l){let p=this._cameraPosition,d=this.getRayDirectionFromPixel(a);return!!this.rayPlanetIntersection(p,d)}getRayDirectionFromPixel(a){let l=o.bk();l[0]=a.x/this.width*2-1,l[1]=-1*(a.y/this.height*2-1),l[2]=1,l[3]=1,o.at(l,l,this._globeViewProjMatrixNoCorrectionInverted),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3];let p=o.bh();p[0]=l[0]-this._cameraPosition[0],p[1]=l[1]-this._cameraPosition[1],p[2]=l[2]-this._cameraPosition[2];let d=o.bh();return o.aT(d,p),d}isSurfacePointVisible(a){let l=this._cachedClippingPlane;return l[0]*a[0]+l[1]*a[1]+l[2]*a[2]+l[3]>=0}isSurfacePointOnScreen(a){if(!this.isSurfacePointVisible(a))return!1;let l=o.bk();return o.at(l,[...a,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3],l[0]>-1&&l[0]<1&&l[1]>-1&&l[1]<1&&l[2]>-1&&l[2]<1}rayPlanetIntersection(a,l){let p=o.aV(a,l),d=o.bh(),y=o.bh();o.aO(y,l,p),o.aS(d,a,y);let w=1-o.aV(d,d);if(w<0)return null;let C=o.aV(a,a)-1,A=-p+(p<0?1:-1)*Math.sqrt(w),O=C/A,D=A;return{tMin:Math.min(O,D),tMax:Math.max(O,D)}}unprojectScreenPoint(a){let l=this._cameraPosition,p=this.getRayDirectionFromPixel(a),d=this.rayPlanetIntersection(l,p);if(d){let D=o.bh();o.aP(D,l,[p[0]*d.tMin,p[1]*d.tMin,p[2]*d.tMin]);let z=o.bh();return o.aT(z,D),_f(z)}let y=this._cachedClippingPlane,w=y[0]*p[0]+y[1]*p[1]+y[2]*p[2],C=-o.bt(y,l)/w,A=o.bh();if(C>0)o.aP(A,l,[p[0]*C,p[1]*C,p[2]*C]);else{let D=o.bh();o.aP(D,l,[2*p[0],2*p[1],2*p[2]]);let z=o.bt(this._cachedClippingPlane,D);o.aS(A,D,[this._cachedClippingPlane[0]*z,this._cachedClippingPlane[1]*z,this._cachedClippingPlane[2]*z])}let O=function(D){let z=o.bh();return z[0]=D[0]*-D[3],z[1]=D[1]*-D[3],z[2]=D[2]*-D[3],{center:z,radius:Math.sqrt(1-D[3]*D[3])}}(y);return _f(function(D,z,N){let $=o.bh();o.aS($,N,D);let G=o.bh();return o.bi(G,D,$,z/o.bj($)),G}(O.center,O.radius,A))}getMatrixForModel(a,l){let p=o.Q.convert(a),d=1/o.bu,y=o.b1();return o.bp(y,y,p.lng/180*Math.PI),o.a$(y,y,-p.lat/180*Math.PI),o.L(y,y,[0,0,1+l/o.bu]),o.a$(y,y,.5*Math.PI),o.M(y,y,[d,d,d]),y}getProjectionDataForCustomLayer(a=!0){let l=this.getProjectionData({overscaledTileID:new o.Y(0,0,0,0,0),applyGlobeMatrix:a});return l.tileMercatorCoords=[0,0,1,1],l}getFastPathSimpleProjectionMatrix(a){}}class bf{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,l,p){return this._helper.interpolatePadding(a,l,p)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,l,p=!0){this._helper.resize(a,l,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,l){this._helper.overrideNearFarZ(a,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(a,l){this._globeness=a,this._globeLatitudeErrorCorrectionRadians=l,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new si({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,l)=>this.getConstrained(a,l)}),this._globeness=1,this._mercatorTransform=new yc,this._verticalPerspectiveTransform=new fu}clone(){let a=new bf;return a._globeness=this._globeness,a._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,a.apply(this),a}apply(a){this._helper.apply(a),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(a){let l=this._mercatorTransform.getProjectionData(a),p=this._verticalPerspectiveTransform.getProjectionData(a);return{mainMatrix:this.isGlobeRendering?p.mainMatrix:l.mainMatrix,clippingPlane:p.clippingPlane,tileMercatorCoords:p.tileMercatorCoords,projectionTransition:a.applyGlobeMatrix?this._globeness:0,fallbackMatrix:l.fallbackMatrix}}isLocationOccluded(a){return this.currentTransform.isLocationOccluded(a)}transformLightDirection(a){return this.currentTransform.transformLightDirection(a)}getPixelScale(){return o.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(a,l,p){let d=this._mercatorTransform.getPitchedTextCorrection(a,l,p),y=this._verticalPerspectiveTransform.getPitchedTextCorrection(a,l,p);return o.bc(d,y,this._globeness)}projectTileCoordinates(a,l,p,d){return this.currentTransform.projectTileCoordinates(a,l,p,d)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(a){return this.currentTransform.calculateFogMatrix(a)}getVisibleUnwrappedCoordinates(a){return this.currentTransform.getVisibleUnwrappedCoordinates(a)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(a){this._mercatorTransform.recalculateZoomAndCenter(a),this._verticalPerspectiveTransform.recalculateZoomAndCenter(a)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,l){return this.currentTransform.lngLatToCameraDepth(a,l)}populateCache(a){this._mercatorTransform.populateCache(a),this._verticalPerspectiveTransform.populateCache(a)}getBounds(){return this.currentTransform.getBounds()}getConstrained(a,l){return this.currentTransform.getConstrained(a,l)}calculateCenterFromCameraLngLatAlt(a,l,p,d){return this._helper.calculateCenterFromCameraLngLatAlt(a,l,p,d)}setLocationAtPoint(a,l){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(a,l),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(a,l),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(a,l){return this.currentTransform.locationToScreenPoint(a,l)}screenPointToMercatorCoordinate(a,l){return this.currentTransform.screenPointToMercatorCoordinate(a,l)}screenPointToLocation(a,l){return this.currentTransform.screenPointToLocation(a,l)}isPointOnMapSurface(a,l){return this.currentTransform.isPointOnMapSurface(a,l)}getRayDirectionFromPixel(a){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(a)}getMatrixForModel(a,l){return this.currentTransform.getMatrixForModel(a,l)}getProjectionDataForCustomLayer(a=!0){let l=this._mercatorTransform.getProjectionDataForCustomLayer(a);if(!this.isGlobeRendering)return l;let p=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(a);return p.fallbackMatrix=l.mainMatrix,p}getFastPathSimpleProjectionMatrix(a){return this.currentTransform.getFastPathSimpleProjectionMatrix(a)}}class Yo{get useGlobeControls(){return!0}handlePanInertia(a,l){let p=sd(a,l);return Math.abs(p.lng-l.center.lng)>180&&(p.lng=l.center.lng+179.5*Math.sign(p.lng-l.center.lng)),{easingCenter:p,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(a,l){let p=a.around,d=l.screenPointToLocation(p);a.bearingDelta&&l.setBearing(l.bearing+a.bearingDelta),a.pitchDelta&&l.setPitch(l.pitch+a.pitchDelta),a.rollDelta&&l.setRoll(l.roll+a.rollDelta);let y=l.zoom;a.zoomDelta&&l.setZoom(l.zoom+a.zoomDelta);let w=l.zoom-y;if(w===0)return;let C=o.bq(l.center.lng,d.lng),A=C/(Math.abs(C/180)+1),O=o.bq(l.center.lat,d.lat),D=l.getRayDirectionFromPixel(p),z=l.cameraPosition,N=-1*o.aV(z,D),$=o.bh();o.aP($,z,[D[0]*N,D[1]*N,D[2]*N]);let G=o.bo($)-1,ae=Math.exp(.5*-Math.max(G-.3,0)),oe=hu(l.worldSize,l.center.lat)/Math.min(l.width,l.height),se=o.bf(oe,.9,.5,1,.25),he=(1-o.ac(-w))*Math.min(ae,se),ve=l.center.lat,me=l.zoom,ge=new o.Q(l.center.lng+A*he,o.ae(l.center.lat+O*he,-85.051129,o.af));l.setLocationAtPoint(d,p);let be=l.center,ye=o.bf(Math.abs(C),45,85,0,1),Ie=o.bf(oe,.75,.35,0,1),Ne=Math.pow(Math.max(ye,Ie),.25),qe=o.bq(be.lng,ge.lng),Re=o.bq(be.lat,ge.lat);l.setCenter(new o.Q(be.lng+qe*Ne,be.lat+Re*Ne).wrap()),l.setZoom(me+Zn(ve,l.center.lat))}handleMapControlsPan(a,l,p){if(!a.panDelta)return;let d=l.center.lat,y=l.zoom;l.setCenter(sd(a.panDelta,l).wrap()),l.setZoom(y+Zn(d,l.center.lat))}cameraForBoxAndBearing(a,l,p,d,y){let w=uo(a,l,p,d,y),C=l.left/y.width*2-1,A=(y.width-l.right)/y.width*2-1,O=l.top/y.height*-2+1,D=(y.height-l.bottom)/y.height*-2+1,z=o.bq(p.getWest(),p.getEast())<0,N=z?p.getEast():p.getWest(),$=z?p.getWest():p.getEast(),G=Math.max(p.getNorth(),p.getSouth()),ae=Math.min(p.getNorth(),p.getSouth()),oe=N+.5*o.bq(N,$),se=G+.5*o.bq(G,ae),he=y.clone();he.setCenter(w.center),he.setBearing(w.bearing),he.setPitch(0),he.setRoll(0),he.setZoom(w.zoom);let ve=he.modelViewProjectionMatrix,me=[Gn(p.getNorthWest()),Gn(p.getNorthEast()),Gn(p.getSouthWest()),Gn(p.getSouthEast()),Gn(new o.Q($,se)),Gn(new o.Q(N,se)),Gn(new o.Q(oe,G)),Gn(new o.Q(oe,ae))],ge=Gn(w.center),be=Number.POSITIVE_INFINITY;for(let ye of me)C<0&&(be=Yo.getLesserNonNegativeNonNull(be,Yo.solveVectorScale(ye,ge,ve,"x",C))),A>0&&(be=Yo.getLesserNonNegativeNonNull(be,Yo.solveVectorScale(ye,ge,ve,"x",A))),O>0&&(be=Yo.getLesserNonNegativeNonNull(be,Yo.solveVectorScale(ye,ge,ve,"y",O))),D<0&&(be=Yo.getLesserNonNegativeNonNull(be,Yo.solveVectorScale(ye,ge,ve,"y",D)));if(Number.isFinite(be)&&be!==0)return w.zoom=he.zoom+o.ah(be),w;zi()}handleJumpToCenterZoom(a,l){let p=a.center.lat,d=a.getConstrained(l.center?o.Q.convert(l.center):a.center,a.zoom).center;a.setCenter(d.wrap());let y=l.zoom!==void 0?+l.zoom:a.zoom+Zn(p,d.lat);a.zoom!==y&&a.setZoom(y)}handleEaseTo(a,l){let p=a.zoom,d=a.center,y=a.padding,w={roll:a.roll,pitch:a.pitch,bearing:a.bearing},C={roll:l.roll===void 0?a.roll:l.roll,pitch:l.pitch===void 0?a.pitch:l.pitch,bearing:l.bearing===void 0?a.bearing:l.bearing},A=l.zoom!==void 0,O=!a.isPaddingEqual(l.padding),D=!1,z=l.center?o.Q.convert(l.center):d,N=a.getConstrained(z,p).center;gc(a,N);let $=a.clone();$.setCenter(N),$.setZoom(A?+l.zoom:p+Zn(d.lat,z.lat)),$.setBearing(l.bearing);let G=new o.P(o.ae(a.centerPoint.x+l.offsetAsPoint.x,0,a.width),o.ae(a.centerPoint.y+l.offsetAsPoint.y,0,a.height));$.setLocationAtPoint(N,G);let ae=(l.offset&&l.offsetAsPoint.mag())>0?$.center:N,oe=A?+l.zoom:p+Zn(d.lat,ae.lat),se=p+Zn(d.lat,0),he=oe+Zn(ae.lat,0),ve=o.bq(d.lng,ae.lng),me=o.bq(d.lat,ae.lat),ge=o.ac(he-se);return D=oe!==p,{easeFunc:be=>{if(o.b6(w,C)||Mo({startEulerAngles:w,endEulerAngles:C,tr:a,k:be,useSlerp:w.roll!=C.roll}),O&&a.interpolatePadding(y,l.padding,be),l.around)o.w("Easing around a point is not supported under globe projection."),a.setLocationAtPoint(l.around,l.aroundPoint);else{let ye=he>se?Math.min(2,ge):Math.max(.5,ge),Ie=Math.pow(ye,1-be),Ne=c1(d,ve,me,be*Ie);a.setCenter(Ne.wrap())}if(D){let ye=o.B.number(se,he,be)+Zn(0,a.center.lat);a.setZoom(ye)}},isZooming:D,elevationCenter:ae}}handleFlyTo(a,l){let p=l.zoom!==void 0,d=a.center,y=a.zoom,w=a.padding,C=!a.isPaddingEqual(l.padding),A=a.getConstrained(o.Q.convert(l.center||l.locationAtOffset),y).center,O=p?+l.zoom:a.zoom+Zn(a.center.lat,A.lat),D=a.clone();D.setCenter(A),D.setZoom(O),D.setBearing(l.bearing);let z=new o.P(o.ae(a.centerPoint.x+l.offsetAsPoint.x,0,a.width),o.ae(a.centerPoint.y+l.offsetAsPoint.y,0,a.height));D.setLocationAtPoint(A,z);let N=D.center;gc(a,N);let $=function(me,ge,be){let ye=Gn(ge),Ie=Gn(be),Ne=o.aV(ye,Ie),qe=Math.acos(Ne),Re=yf(me);return qe/(2*Math.PI)*Re}(a,d,N),G=y+Zn(d.lat,0),ae=O+Zn(N.lat,0),oe=o.ac(ae-G),se;if(typeof l.minZoom=="number"){let me=+l.minZoom+Zn(N.lat,0),ge=Math.min(me,G,ae)+Zn(0,N.lat),be=a.getConstrained(N,ge).zoom+Zn(N.lat,0);se=o.ac(be-G)}let he=o.bq(d.lng,N.lng),ve=o.bq(d.lat,N.lat);return{easeFunc:(me,ge,be,ye)=>{let Ie=c1(d,he,ve,be);C&&a.interpolatePadding(w,l.padding,me);let Ne=me===1?N:Ie;a.setCenter(Ne.wrap());let qe=G+o.ah(ge);a.setZoom(me===1?O:qe+Zn(0,Ne.lat))},scaleOfZoom:oe,targetCenter:N,scaleOfMinZoom:se,pixelPathLength:$}}static solveVectorScale(a,l,p,d,y){let w=d==="x"?[p[0],p[4],p[8],p[12]]:[p[1],p[5],p[9],p[13]],C=[p[3],p[7],p[11],p[15]],A=a[0]*w[0]+a[1]*w[1]+a[2]*w[2],O=a[0]*C[0]+a[1]*C[1]+a[2]*C[2],D=l[0]*w[0]+l[1]*w[1]+l[2]*w[2],z=l[0]*C[0]+l[1]*C[1]+l[2]*C[2];return D+y*O===A+y*z||C[3]*(A-D)+w[3]*(z-O)+A*z==D*O?null:(D+w[3]-y*z-y*C[3])/(D-A-y*z+y*O)}static getLesserNonNegativeNonNull(a,l){return l!==null&&l>=0&&l<a?l:a}}class pu{constructor(a){this._globe=a,this._mercatorCameraHelper=new mf,this._verticalPerspectiveCameraHelper=new Yo}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(a,l){return this.currentHelper.handlePanInertia(a,l)}handleMapControlsRollPitchBearingZoom(a,l){return this.currentHelper.handleMapControlsRollPitchBearingZoom(a,l)}handleMapControlsPan(a,l,p){this.currentHelper.handleMapControlsPan(a,l,p)}cameraForBoxAndBearing(a,l,p,d,y){return this.currentHelper.cameraForBoxAndBearing(a,l,p,d,y)}handleJumpToCenterZoom(a,l){this.currentHelper.handleJumpToCenterZoom(a,l)}handleEaseTo(a,l){return this.currentHelper.handleEaseTo(a,l)}handleFlyTo(a,l){return this.currentHelper.handleFlyTo(a,l)}}let ud=(g,a)=>o.x(g,a&&a.filter(l=>l.identifier!=="source.canvas")),KM=o.bw();class Kg extends o.E{constructor(a,l={}){super(),this._rtlPluginLoaded=()=>{for(let p in this.sourceCaches){let d=this.sourceCaches[p].getSource().type;d!=="vector"&&d!=="geojson"||this.sourceCaches[p].reload()}},this.map=a,this.dispatcher=new zt(Vn(),a._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,d)=>this.getGlyphs(p,d)),this.dispatcher.registerMessageHandler("GI",(p,d)=>this.getImages(p,d)),this.imageManager=new et,this.imageManager.setEventedParent(this),this.glyphManager=new sr(a._requestManager,l.localIdeographFontFamily),this.lineAtlas=new Jt(256,512),this.crossTileSymbolIndex=new ff,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.by()),Ca().on(sl,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;let d=this.sourceCaches[p.sourceId];if(!d)return;let y=d.getSource();if(y&&y.vectorLayerIds)for(let w in this._layers){let C=this._layers[w];C.source===y.id&&this._validateLayer(C)}})}loadURL(a,l={},p){this.fire(new o.l("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;let d=this.map._requestManager.transformRequest(a,"Style");this._loadStyleRequest=new AbortController;let y=this._loadStyleRequest;o.j(d,this._loadStyleRequest).then(w=>{this._loadStyleRequest=null,this._load(w.data,l,p)}).catch(w=>{this._loadStyleRequest=null,w&&!y.signal.aborted&&this.fire(new o.k(w))})}loadJSON(a,l={},p){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,S.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(a,l,p)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(KM,{validate:!1})}_load(a,l,p){var d,y;let w=l.transformStyle?l.transformStyle(p,a):a;if(!l.validate||!ud(this,o.y(w))){this._loaded=!0,this.stylesheet=w;for(let C in w.sources)this.addSource(C,w.sources[C],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs),this._createLayers(),this.light=new Cr(this.stylesheet.light),this._setProjectionInternal(((d=this.stylesheet.projection)===null||d===void 0?void 0:d.type)||"mercator"),this.sky=new pr(this.stylesheet.sky),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){let a=o.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",a),this._order=a.map(l=>l.id),this._layers={},this._serializedLayers=null;for(let l of a){let p=o.bA(l);p.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=p}}_loadSprite(a,l=!1,p=void 0){let d;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,w,C,A){return o._(this,void 0,void 0,function*(){let O=ce(y),D=C>1?"@2x":"",z={},N={};for(let{id:$,url:G}of O){let ae=w.transformRequest(ze(G,D,".json"),"SpriteJSON");z[$]=o.j(ae,A);let oe=w.transformRequest(ze(G,D,".png"),"SpriteImage");N[$]=Q.getImage(oe,A)}return yield Promise.all([...Object.values(z),...Object.values(N)]),function($,G){return o._(this,void 0,void 0,function*(){let ae={};for(let oe in $){ae[oe]={};let se=S.getImageCanvasContext((yield G[oe]).data),he=(yield $[oe]).data;for(let ve in he){let{width:me,height:ge,x:be,y:ye,sdf:Ie,pixelRatio:Ne,stretchX:qe,stretchY:Re,content:Oe,textFitWidth:Qe,textFitHeight:Xe}=he[ve];ae[oe][ve]={data:null,pixelRatio:Ne,sdf:Ie,stretchX:qe,stretchY:Re,content:Oe,textFitWidth:Qe,textFitHeight:Xe,spriteData:{width:me,height:ge,x:be,y:ye,context:se}}}}return ae})}(z,N)})}(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(let w in y){this._spritesImagesIds[w]=[];let C=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(A=>!(A in y)):[];for(let A of C)this.imageManager.removeImage(A),this._changedImages[A]=!0;for(let A in y[w]){let O=w==="default"?A:`${w}:${A}`;this._spritesImagesIds[w].push(O),O in this.imageManager.images?this.imageManager.updateImage(O,y[w][A],!1):this.imageManager.addImage(O,y[w][A]),l&&(this._changedImages[O]=!0)}}}).catch(y=>{this._spriteRequest=null,d=y,this.fire(new o.k(d))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),p&&p(d)})}_unloadSprite(){for(let a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(a){let l=this.sourceCaches[a.source];if(!l)return;let p=a.sourceLayer;if(!p)return;let d=l.getSource();(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(p)===-1)&&this.fire(new o.k(new Error(`Source layer "${p}" does not exist on source "${d.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a,l=!1){let p=this._serializedAllLayers();if(!a||a.length===0)return Object.values(l?o.bB(p):p);let d=[];for(let y of a)if(p[y]){let w=l?o.bB(p[y]):p[y];d.push(w)}return d}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};let l=Object.keys(this._layers);for(let p of l){let d=this._layers[p];d.type!=="custom"&&(a[p]=d.serialize())}return a}hasTransitions(){var a,l,p;if(!((a=this.light)===null||a===void 0)&&a.hasTransition()||!((l=this.sky)===null||l===void 0)&&l.hasTransition()||!((p=this.projection)===null||p===void 0)&&p.hasTransition())return!0;for(let d in this.sourceCaches)if(this.sourceCaches[d].hasTransition())return!0;for(let d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;let l=this._changed;if(l){let d=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(d.length||y.length)&&this._updateWorkerLayers(d,y);for(let w in this._updatedSources){let C=this._updatedSources[w];if(C==="reload")this._reloadSource(w);else{if(C!=="clear")throw new Error(`Invalid action ${C}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let w in this._updatedPaintProps)this._layers[w].updateTransitions(a);this.light.updateTransitions(a),this.sky.updateTransitions(a),this._resetUpdates()}let p={};for(let d in this.sourceCaches){let y=this.sourceCaches[d];p[d]=y.used,y.used=!1}for(let d of this._order){let y=this._layers[d];y.recalculate(a,this._availableImages),!y.isHidden(a.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(let d in p){let y=this.sourceCaches[d];!!p[d]!=!!y.used&&y.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(a),this.sky.recalculate(a),this.projection.recalculate(a),this.z=a.zoom,l&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let a=Object.keys(this._changedImages);if(a.length){for(let l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(a,!1),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,l={}){var p;this._checkLoaded();let d=this.serialize();if(a=l.transformStyle?l.transformStyle(d,a):a,((p=l.validate)===null||p===void 0||p)&&ud(this,o.y(a)))return!1;(a=o.bB(a)).layers=o.bz(a.layers);let y=o.bC(d,a),w=this._getOperationsToPerform(y);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(let C of w.operations)C();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){let l=[],p=[];for(let d of a)switch(d.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,d.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,d.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,d.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,d.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,d.args));break;case"addSource":l.push(()=>this.addSource.apply(this,d.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,d.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,d.args));break;case"setLight":l.push(()=>this.setLight.apply(this,d.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,d.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,d.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,d.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,d.args));break;case"setSky":l.push(()=>this.setSky.apply(this,d.args));break;case"setProjection":this.setProjection.apply(this,d.args);break;case"setTransition":l.push(()=>{});break;default:p.push(d.command)}return{operations:l,unimplemented:p}}addImage(a,l){if(this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,l),this._afterImageUpdated(a)}updateImage(a,l){this.imageManager.updateImage(a,l)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,l,p={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(o.y.source,`sources.${a}`,l,null,p))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);let d=this.sourceCaches[a]=new Se(a,l,this.dispatcher);d.style=this,d.setEventedParent(this,()=>({isSourceLoaded:d.loaded(),source:d.serialize(),sourceId:a})),d.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(let p in this._layers)if(this._layers[p].source===a)return this.fire(new o.k(new Error(`Source "${a}" cannot be removed while layer "${p}" is using it.`)));let l=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],l.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,l){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);let p=this.sourceCaches[a].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(l),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,l,p={}){this._checkLoaded();let d=a.id;if(this.getLayer(d))return void this.fire(new o.k(new Error(`Layer "${d}" already exists on this map.`)));let y;if(a.type==="custom"){if(ud(this,o.bD(a)))return;y=o.bA(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(d,a.source),a=o.bB(a),a=o.e(a,{source:d})),this._validate(o.y.layer,`layers.${d}`,a,{arrayIndex:-1},p))return;y=o.bA(a),this._validateLayer(y),y.setEventedParent(this,{layer:{id:d}})}let w=l?this._order.indexOf(l):this._order.length;if(l&&w===-1)this.fire(new o.k(new Error(`Cannot add layer "${d}" before non-existing layer "${l}".`)));else{if(this._order.splice(w,0,d),this._layerOrderChanged=!0,this._layers[d]=y,this._removedLayers[d]&&y.source&&y.type!=="custom"){let C=this._removedLayers[d];delete this._removedLayers[d],C.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(a,l){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new o.k(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===l)return;let p=this._order.indexOf(a);this._order.splice(p,1);let d=l?this._order.indexOf(l):this._order.length;l&&d===-1?this.fire(new o.k(new Error(`Cannot move layer "${a}" before non-existing layer "${l}".`))):(this._order.splice(d,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();let l=this._layers[a];if(!l)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${a}".`)));l.setEventedParent(null);let p=this._order.indexOf(a);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=l,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],l.onRemove&&l.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,l,p){this._checkLoaded();let d=this.getLayer(a);d?d.minzoom===l&&d.maxzoom===p||(l!=null&&(d.minzoom=l),p!=null&&(d.maxzoom=p),this._updateLayer(d)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,l,p={}){this._checkLoaded();let d=this.getLayer(a);if(d){if(!o.bE(d.filter,l))return l==null?(d.filter=void 0,void this._updateLayer(d)):void(this._validate(o.y.filter,`layers.${d.id}.filter`,l,null,p)||(d.filter=o.bB(l),this._updateLayer(d)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return o.bB(this.getLayer(a).filter)}setLayoutProperty(a,l,p,d={}){this._checkLoaded();let y=this.getLayer(a);y?o.bE(y.getLayoutProperty(l),p)||(y.setLayoutProperty(l,p,d),this._updateLayer(y)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,l){let p=this.getLayer(a);if(p)return p.getLayoutProperty(l);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,l,p,d={}){this._checkLoaded();let y=this.getLayer(a);y?o.bE(y.getPaintProperty(l),p)||(y.setPaintProperty(l,p,d)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[a]=!0,this._serializedLayers=null):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,l){return this.getLayer(a).getPaintProperty(l)}setFeatureState(a,l){this._checkLoaded();let p=a.source,d=a.sourceLayer,y=this.sourceCaches[p];if(y===void 0)return void this.fire(new o.k(new Error(`The source '${p}' does not exist in the map's style.`)));let w=y.getSource().type;w==="geojson"&&d?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||d?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),y.setFeatureState(d,a.id,l)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,l){this._checkLoaded();let p=a.source,d=this.sourceCaches[p];if(d===void 0)return void this.fire(new o.k(new Error(`The source '${p}' does not exist in the map's style.`)));let y=d.getSource().type,w=y==="vector"?a.sourceLayer:void 0;y!=="vector"||w?l&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):d.removeFeatureState(w,a.id,l):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();let l=a.source,p=a.sourceLayer,d=this.sourceCaches[l];if(d!==void 0)return d.getSource().type!=="vector"||p?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),d.getFeatureState(p,a.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let a=o.bF(this.sourceCaches,y=>y.serialize()),l=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,d=this.stylesheet;return o.bG({version:d.version,name:d.name,metadata:d.metadata,light:d.light,sky:d.sky,center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,sprite:d.sprite,glyphs:d.glyphs,transition:d.transition,projection:d.projection,sources:a,layers:l,terrain:p},y=>y!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){let l=w=>this._layers[w].type==="fill-extrusion",p={},d=[];for(let w=this._order.length-1;w>=0;w--){let C=this._order[w];if(l(C)){p[C]=w;for(let A of a){let O=A[C];if(O)for(let D of O)d.push(D)}}}d.sort((w,C)=>C.intersectionZ-w.intersectionZ);let y=[];for(let w=this._order.length-1;w>=0;w--){let C=this._order[w];if(l(C))for(let A=d.length-1;A>=0;A--){let O=d[A].feature;if(p[O.layer.id]<w)break;y.push(O),d.pop()}else for(let A of a){let O=A[C];if(O)for(let D of O)y.push(D.feature)}}return y}queryRenderedFeatures(a,l,p){l&&l.filter&&this._validate(o.y.filter,"queryRenderedFeatures.filter",l.filter,null,l);let d={};if(l&&l.layers){if(!(Array.isArray(l.layers)||l.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let O of l.layers){let D=this._layers[O];if(!D)return this.fire(new o.k(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];d[D.source]=!0}}let y=[];l.availableImages=this._availableImages;let w=this._serializedAllLayers(),C=l.layers instanceof Set?l.layers:Array.isArray(l.layers)?new Set(l.layers):null,A=Object.assign(Object.assign({},l),{layers:C});for(let O in this.sourceCaches)l.layers&&!d[O]||y.push(wn(this.sourceCaches[O],this._layers,w,a,A,p,this.map.terrain?(D,z,N)=>this.map.terrain.getElevation(D,z,N):void 0));return this.placement&&y.push(function(O,D,z,N,$,G,ae){let oe={},se=G.queryRenderedSymbols(N),he=[];for(let ve of Object.keys(se).map(Number))he.push(ae[ve]);he.sort(ii);for(let ve of he){let me=ve.featureIndex.lookupSymbolFeatures(se[ve.bucketInstanceId],D,ve.bucketIndex,ve.sourceLayerIndex,$.filter,$.layers,$.availableImages,O);for(let ge in me){let be=oe[ge]=oe[ge]||[],ye=me[ge];ye.sort((Ie,Ne)=>{let qe=ve.featureSortOrder;if(qe){let Re=qe.indexOf(Ie.featureIndex);return qe.indexOf(Ne.featureIndex)-Re}return Ne.featureIndex-Ie.featureIndex});for(let Ie of ye)be.push(Ie)}}return function(ve,me,ge){for(let be in ve)for(let ye of ve[be])Ur(ye,ge[me[be].source]);return ve}(oe,O,z)}(this._layers,w,this.sourceCaches,a,A,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(a,l){l&&l.filter&&this._validate(o.y.filter,"querySourceFeatures.filter",l.filter,null,l);let p=this.sourceCaches[a];return p?function(d,y){let w=d.getRenderableIds().map(O=>d.getTileByID(O)),C=[],A={};for(let O=0;O<w.length;O++){let D=w[O],z=D.tileID.canonical.key;A[z]||(A[z]=!0,D.querySourceFeatures(C,y))}return C}(p,l):[]}getLight(){return this.light.getLight()}setLight(a,l={}){this._checkLoaded();let p=this.light.getLight(),d=!1;for(let w in a)if(!o.bE(a[w],p[w])){d=!0;break}if(!d)return;let y={now:S.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,l),this.light.updateTransitions(y)}getProjection(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.projection}setProjection(a){if(this._checkLoaded(),this.projection){if(this.projection.name===a.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=a,this._setProjectionInternal(a.type)}getSky(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.sky}setSky(a,l={}){this._checkLoaded();let p=this.getSky(),d=!1;if(!a&&!p)return;if(a&&!p)d=!0;else if(!a&&p)d=!0;else for(let w in a)if(!o.bE(a[w],p[w])){d=!0;break}if(!d)return;let y={now:S.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=a,this.sky.setSky(a,l),this.sky.updateTransitions(y)}_setProjectionInternal(a){let l=function(p){if(Array.isArray(p)){let d=new ad({type:p});return{projection:d,transform:new bf,cameraHelper:new pu(d)}}switch(p){case"mercator":return{projection:new pf,transform:new yc,cameraHelper:new mf};case"globe":{let d=new ad({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:d,transform:new bf,cameraHelper:new pu(d)}}case"vertical-perspective":return{projection:new gf,transform:new fu,cameraHelper:new Yo};default:return o.w(`Unknown projection name: ${p}. Falling back to mercator projection.`),{projection:new pf,transform:new yc,cameraHelper:new mf}}}(a);this.projection=l.projection,this.map.migrateProjection(l.transform,l.cameraHelper);for(let p in this.sourceCaches)this.sourceCaches[p].reload()}_validate(a,l,p,d,y={}){return(!y||y.validate!==!1)&&ud(this,a.call(o.y,o.e({key:l,style:this.serialize(),value:p,styleSpec:o.v},d)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ca().off(sl,this._rtlPluginLoaded);for(let l in this._layers)this._layers[l].setEventedParent(null);for(let l in this.sourceCaches){let p=this.sourceCaches[l];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(let l in this.sourceCaches)this.sourceCaches[l].update(a,this.map.terrain)}_generateCollisionBoxes(){for(let a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,l,p,d,y=!1){let w=!1,C=!1,A={};for(let O of this._order){let D=this._layers[O];if(D.type!=="symbol")continue;if(!A[D.source]){let N=this.sourceCaches[D.source];A[D.source]=N.getRenderableIds(!0).map($=>N.getTileByID($)).sort(($,G)=>G.tileID.overscaledZ-$.tileID.overscaledZ||($.tileID.isLessThan(G.tileID)?-1:1))}let z=this.crossTileSymbolIndex.addLayer(D,A[D.source],a.center.lng);w=w||z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(S.now(),a.zoom))&&(this.pauseablePlacement=new u1(a,this.map.terrain,this._order,y,l,p,d,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,A),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(S.now()),C=!0),w&&this.pauseablePlacement.placement.setStale()),C||w)for(let O of this._order){let D=this._layers[O];D.type==="symbol"&&this.placement.updateLayerOpacities(D,A[D.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(S.now())}_releaseSymbolFadeTiles(){for(let a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,l){return o._(this,void 0,void 0,function*(){let p=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();let d=this.sourceCaches[l.source];return d&&d.setDependencies(l.tileID.key,l.type,l.icons),p})}getGlyphs(a,l){return o._(this,void 0,void 0,function*(){let p=yield this.glyphManager.getGlyphs(l.stacks),d=this.sourceCaches[l.source];return d&&d.setDependencies(l.tileID.key,l.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,l={}){this._checkLoaded(),a&&this._validate(o.y.glyphs,"glyphs",a,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,l,p={},d){this._checkLoaded();let y=[{id:a,url:l}],w=[...ce(this.stylesheet.sprite),...y];this._validate(o.y.sprite,"sprite",w,null,p)||(this.stylesheet.sprite=w,this._loadSprite(y,!0,d))}removeSprite(a){this._checkLoaded();let l=ce(this.stylesheet.sprite);if(l.find(p=>p.id===a)){if(this._spritesImagesIds[a])for(let p of this._spritesImagesIds[a])this.imageManager.removeImage(p),this._changedImages[p]=!0;l.splice(l.findIndex(p=>p.id===a),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return ce(this.stylesheet.sprite)}setSprite(a,l={},p){this._checkLoaded(),a&&this._validate(o.y.sprite,"sprite",a,null,l)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,p):(this._unloadSprite(),p&&p(null)))}}var YM=o.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class XM{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,l,p,d,y,w,C,A,O){this.context=a;let D=this.boundPaintVertexBuffers.length!==d.length;for(let z=0;!D&&z<d.length;z++)this.boundPaintVertexBuffers[z]!==d[z]&&(D=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==p||D||this.boundIndexBuffer!==y||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==C||this.boundDynamicVertexBuffer2!==A||this.boundDynamicVertexBuffer3!==O?this.freshBind(l,p,d,y,w,C,A,O):(a.bindVertexArray.set(this.vao),C&&C.bind(),y&&y.dynamicDraw&&y.bind(),A&&A.bind(),O&&O.bind())}freshBind(a,l,p,d,y,w,C,A){let O=a.numAttributes,D=this.context,z=D.gl;this.vao&&this.destroy(),this.vao=D.createVertexArray(),D.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=d,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=C,this.boundDynamicVertexBuffer3=A,l.enableAttributes(z,a);for(let N of p)N.enableAttributes(z,a);w&&w.enableAttributes(z,a),C&&C.enableAttributes(z,a),A&&A.enableAttributes(z,a),l.bind(),l.setVertexAttribPointers(z,a,y);for(let N of p)N.bind(),N.setVertexAttribPointers(z,a,y);w&&(w.bind(),w.setVertexAttribPointers(z,a,y)),d&&d.bind(),C&&(C.bind(),C.setVertexAttribPointers(z,a,y)),A&&(A.bind(),A.setVertexAttribPointers(z,a,y)),D.currentNumAttributes=O}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let QM=(g,a,l,p,d)=>({u_texture:0,u_ele_delta:g,u_fog_matrix:a,u_fog_color:l?l.properties.get("fog-color"):o.b7.white,u_fog_ground_blend:l?l.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:d?0:l?l.calculateFogBlendOpacity(p):0,u_horizon_color:l?l.properties.get("horizon-color"):o.b7.white,u_horizon_fog_blend:l?l.properties.get("horizon-fog-blend"):1,u_is_globe_mode:d?1:0}),cd={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function bc(g){let a=[];for(let l=0;l<g.length;l++){if(g[l]===null)continue;let p=g[l].split(" ");a.push(p.pop())}return a}class hd{constructor(a,l,p,d,y,w,C,A,O=[]){let D=a.gl;this.program=D.createProgram();let z=bc(l.staticAttributes),N=p?p.getBinderAttributes():[],$=z.concat(N),G=Ni.prelude.staticUniforms?bc(Ni.prelude.staticUniforms):[],ae=C.staticUniforms?bc(C.staticUniforms):[],oe=l.staticUniforms?bc(l.staticUniforms):[],se=p?p.getBinderUniforms():[],he=G.concat(ae).concat(oe).concat(se),ve=[];for(let qe of he)ve.indexOf(qe)<0&&ve.push(qe);let me=p?p.defines():[];bi(D)&&me.unshift("#version 300 es"),y&&me.push("#define OVERDRAW_INSPECTOR;"),w&&me.push("#define TERRAIN3D;"),A&&me.push(A),O&&me.push(...O);let ge=me.concat(Ni.prelude.fragmentSource,C.fragmentSource,l.fragmentSource).join(`
`),be=me.concat(Ni.prelude.vertexSource,C.vertexSource,l.vertexSource).join(`
`);bi(D)||(ge=function(qe){return qe.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(ge),be=function(qe){return qe.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(be));let ye=D.createShader(D.FRAGMENT_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);if(D.shaderSource(ye,ge),D.compileShader(ye),!D.getShaderParameter(ye,D.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${D.getShaderInfoLog(ye)}`);D.attachShader(this.program,ye);let Ie=D.createShader(D.VERTEX_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);if(D.shaderSource(Ie,be),D.compileShader(Ie),!D.getShaderParameter(Ie,D.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${D.getShaderInfoLog(Ie)}`);D.attachShader(this.program,Ie),this.attributes={};let Ne={};this.numAttributes=$.length;for(let qe=0;qe<this.numAttributes;qe++)$[qe]&&(D.bindAttribLocation(this.program,qe,$[qe]),this.attributes[$[qe]]=qe);if(D.linkProgram(this.program),!D.getProgramParameter(this.program,D.LINK_STATUS))throw new Error(`Program failed to link: ${D.getProgramInfoLog(this.program)}`);D.deleteShader(Ie),D.deleteShader(ye);for(let qe=0;qe<ve.length;qe++){let Re=ve[qe];if(Re&&!Ne[Re]){let Oe=D.getUniformLocation(this.program,Re);Oe&&(Ne[Re]=Oe)}}this.fixedUniforms=d(a,Ne),this.terrainUniforms=((qe,Re)=>({u_depth:new o.bH(qe,Re.u_depth),u_terrain:new o.bH(qe,Re.u_terrain),u_terrain_dim:new o.b8(qe,Re.u_terrain_dim),u_terrain_matrix:new o.bJ(qe,Re.u_terrain_matrix),u_terrain_unpack:new o.bK(qe,Re.u_terrain_unpack),u_terrain_exaggeration:new o.b8(qe,Re.u_terrain_exaggeration)}))(a,Ne),this.projectionUniforms=((qe,Re)=>({u_projection_matrix:new o.bJ(qe,Re.u_projection_matrix),u_projection_tile_mercator_coords:new o.bK(qe,Re.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bK(qe,Re.u_projection_clipping_plane),u_projection_transition:new o.b8(qe,Re.u_projection_transition),u_projection_fallback_matrix:new o.bJ(qe,Re.u_projection_fallback_matrix)}))(a,Ne),this.binderUniforms=p?p.getUniforms(a,Ne):[]}draw(a,l,p,d,y,w,C,A,O,D,z,N,$,G,ae,oe,se,he,ve){let me=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(p),a.setStencilMode(d),a.setColorMode(y),a.setCullFace(w),A){a.activeTexture.set(me.TEXTURE2),me.bindTexture(me.TEXTURE_2D,A.depthTexture),a.activeTexture.set(me.TEXTURE3),me.bindTexture(me.TEXTURE_2D,A.texture);for(let be in this.terrainUniforms)this.terrainUniforms[be].set(A[be])}if(O)for(let be in O)this.projectionUniforms[cd[be]].set(O[be]);if(C)for(let be in this.fixedUniforms)this.fixedUniforms[be].set(C[be]);oe&&oe.setUniforms(a,this.binderUniforms,G,{zoom:ae});let ge=0;switch(l){case me.LINES:ge=2;break;case me.TRIANGLES:ge=3;break;case me.LINE_STRIP:ge=1}for(let be of $.get()){let ye=be.vaos||(be.vaos={});(ye[D]||(ye[D]=new XM)).bind(a,this,z,oe?oe.getPaintVertexBuffers():[],N,be.vertexOffset,se,he,ve),me.drawElements(l,be.primitiveLength*ge,me.UNSIGNED_SHORT,be.primitiveOffset*ge*2)}}}function fd(g,a,l){let p=1/o.az(l,1,a.transform.tileZoom),d=Math.pow(2,l.tileID.overscaledZ),y=l.tileSize*Math.pow(2,a.transform.tileZoom)/d,w=y*(l.tileID.canonical.x+l.tileID.wrap*d),C=y*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[p,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[w>>16,C>>16],u_pixel_coord_lower:[65535&w,65535&C]}}let pd=(g,a,l,p)=>{let d=g.style.light,y=d.properties.get("position"),w=[y.x,y.y,y.z],C=o.bN();d.properties.get("anchor")==="viewport"&&o.bO(C,g.transform.bearingInRadians),o.bP(w,w,C);let A=g.transform.transformLightDirection(w),O=d.properties.get("color");return{u_lightpos:w,u_lightpos_globe:A,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+a,u_opacity:l,u_fill_translate:p}},Wa=(g,a,l,p,d,y,w)=>o.e(pd(g,a,l,p),fd(y,g,w),{u_height_factor:-Math.pow(2,d.overscaledZ)/w.tileSize/8}),h1=(g,a,l,p)=>o.e(fd(a,g,l),{u_fill_translate:p}),Yg=(g,a)=>({u_world:g,u_fill_translate:a}),wf=(g,a,l,p,d)=>o.e(h1(g,a,l,d),{u_world:p}),Ef=(g,a,l,p,d)=>{let y=g.transform,w,C,A=0;if(l.paint.get("circle-pitch-alignment")==="map"){let O=o.az(a,1,y.zoom);w=!0,C=[O,O],A=O/(o.Z*Math.pow(2,a.tileID.overscaledZ))*2*Math.PI*d}else w=!1,C=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(l.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+w,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:C,u_globe_extrude_scale:A,u_translate:p}},JM=g=>({u_pixel_extrude_scale:[1/g.width,1/g.height]}),dd=g=>({u_viewport_size:[g.width,g.height]}),f1=(g,a=1)=>({u_color:g,u_overlay:0,u_overlay_scale:a}),du=(g,a,l,p)=>{let d=o.az(g,1,a)/(o.Z*Math.pow(2,g.tileID.overscaledZ))*2*Math.PI*p;return{u_extrude_scale:o.az(g,1,a),u_intensity:l,u_globe_extrude_scale:d}},p1=(g,a,l,p)=>{let d=o.K();o.bQ(d,0,g.width,g.height,0,0,1);let y=g.context.gl;return{u_matrix:d,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:l,u_color_ramp:p,u_opacity:a.paint.get("heatmap-opacity")}},d1=(g,a,l)=>{let p=l.paint.get("hillshade-accent-color"),d;switch(l.paint.get("hillshade-method")){case"basic":d=4;break;case"combined":d=1;break;case"igor":d=2;break;case"multidirectional":d=3;break;default:d=0}let y=l.getIlluminationProperties();for(let w=0;w<y.directionRadians.length;w++)l.paint.get("hillshade-illumination-anchor")==="viewport"&&(y.directionRadians[w]+=g.transform.bearingInRadians);return{u_image:0,u_latrange:m1(0,a.tileID),u_exaggeration:l.paint.get("hillshade-exaggeration"),u_altitudes:y.altitudeRadians,u_azimuths:y.directionRadians,u_accent:p,u_method:d,u_highlights:y.highlightColor,u_shadows:y.shadowColor}},eA=(g,a)=>{let l=a.stride,p=o.K();return o.bQ(p,0,o.Z,-8192,0,0,1),o.L(p,p,[0,-8192,0]),{u_matrix:p,u_image:1,u_dimension:[l,l],u_zoom:g.overscaledZ,u_unpack:a.getUnpackVector()}};function m1(g,a){let l=Math.pow(2,a.canonical.z),p=a.canonical.y;return[new o.$(0,p/l).toLngLat().lat,new o.$(0,(p+1)/l).toLngLat().lat]}let Tf=(g,a,l,p)=>{let d=g.transform;return{u_translation:ul(g,a,l),u_ratio:p/o.az(a,1,d.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},v1=(g,a,l,p,d)=>o.e(Tf(g,a,l,p),{u_image:0,u_image_height:d}),g1=(g,a,l,p,d)=>{let y=g.transform,w=Xg(a,y);return{u_translation:ul(g,a,l),u_texsize:a.imageAtlasTexture.size,u_ratio:p/o.az(a,1,y.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[w,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},y1=(g,a,l,p,d,y)=>{let w=g.lineAtlas,C=Xg(a,g.transform),A=l.layout.get("line-cap")==="round",O=w.getDash(d.from,A),D=w.getDash(d.to,A),z=O.width*y.fromScale,N=D.width*y.toScale;return o.e(Tf(g,a,l,p),{u_patternscale_a:[C/z,-O.height/2],u_patternscale_b:[C/N,-D.height/2],u_sdfgamma:w.width/(256*Math.min(z,N)*g.pixelRatio)/2,u_image:0,u_tex_y_a:O.y,u_tex_y_b:D.y,u_mix:y.t})};function Xg(g,a){return 1/o.az(g,1,a.tileZoom)}function ul(g,a,l){return o.aA(g.transform,a,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}let _1=(g,a,l,p,d)=>{return{u_tl_parent:g,u_scale_parent:a,u_buffer_scale:1,u_fade_t:l.mix,u_opacity:l.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(w=p.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(y=p.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:x1(p.paint.get("raster-hue-rotate")),u_coords_top:[d[0].x,d[0].y,d[1].x,d[1].y],u_coords_bottom:[d[3].x,d[3].y,d[2].x,d[2].y]};var y,w};function x1(g){g*=Math.PI/180;let a=Math.sin(g),l=Math.cos(g);return[(2*l+1)/3,(-Math.sqrt(3)*a-l+1)/3,(Math.sqrt(3)*a-l+1)/3]}let wc=(g,a,l,p,d,y,w,C,A,O,D,z,N)=>{let $=w.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:$.cameraToCenterDistance,u_pitch:$.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:$.width/$.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_label_plane_matrix:C,u_coord_matrix:A,u_is_text:+D,u_pitch_with_map:+p,u_is_along_line:d,u_is_variable_anchor:y,u_texsize:z,u_texture:0,u_translation:O,u_pitched_scale:N}},b1=(g,a,l,p,d,y,w,C,A,O,D,z,N,$)=>{let G=w.transform;return o.e(wc(g,a,l,p,d,y,w,C,A,O,D,z,$),{u_gamma_scale:p?Math.cos(G.pitch*Math.PI/180)*G.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:1})},md=(g,a,l,p,d,y,w,C,A,O,D,z,N)=>o.e(b1(g,a,l,p,d,y,w,C,A,O,!0,D,0,N),{u_texsize_icon:z,u_texture_icon:1}),tA=(g,a)=>({u_opacity:g,u_color:a}),rA=(g,a,l,p,d)=>o.e(function(y,w,C,A){let O=C.imageManager.getPattern(y.from.toString()),D=C.imageManager.getPattern(y.to.toString()),{width:z,height:N}=C.imageManager.getPixelSize(),$=Math.pow(2,A.tileID.overscaledZ),G=A.tileSize*Math.pow(2,C.transform.tileZoom)/$,ae=G*(A.tileID.canonical.x+A.tileID.wrap*$),oe=G*A.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:O.tl,u_pattern_br_a:O.br,u_pattern_tl_b:D.tl,u_pattern_br_b:D.br,u_texsize:[z,N],u_mix:w.t,u_pattern_size_a:O.displaySize,u_pattern_size_b:D.displaySize,u_scale_a:w.fromScale,u_scale_b:w.toScale,u_tile_units_to_pixels:1/o.az(A,1,C.transform.tileZoom),u_pixel_coord_upper:[ae>>16,oe>>16],u_pixel_coord_lower:[65535&ae,65535&oe]}}(l,d,a,p),{u_opacity:g}),Qg=(g,a)=>{},w1={fillExtrusion:(g,a)=>({u_lightpos:new o.bL(g,a.u_lightpos),u_lightpos_globe:new o.bL(g,a.u_lightpos_globe),u_lightintensity:new o.b8(g,a.u_lightintensity),u_lightcolor:new o.bL(g,a.u_lightcolor),u_vertical_gradient:new o.b8(g,a.u_vertical_gradient),u_opacity:new o.b8(g,a.u_opacity),u_fill_translate:new o.bM(g,a.u_fill_translate)}),fillExtrusionPattern:(g,a)=>({u_lightpos:new o.bL(g,a.u_lightpos),u_lightpos_globe:new o.bL(g,a.u_lightpos_globe),u_lightintensity:new o.b8(g,a.u_lightintensity),u_lightcolor:new o.bL(g,a.u_lightcolor),u_vertical_gradient:new o.b8(g,a.u_vertical_gradient),u_height_factor:new o.b8(g,a.u_height_factor),u_opacity:new o.b8(g,a.u_opacity),u_fill_translate:new o.bM(g,a.u_fill_translate),u_image:new o.bH(g,a.u_image),u_texsize:new o.bM(g,a.u_texsize),u_pixel_coord_upper:new o.bM(g,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(g,a.u_pixel_coord_lower),u_scale:new o.bL(g,a.u_scale),u_fade:new o.b8(g,a.u_fade)}),fill:(g,a)=>({u_fill_translate:new o.bM(g,a.u_fill_translate)}),fillPattern:(g,a)=>({u_image:new o.bH(g,a.u_image),u_texsize:new o.bM(g,a.u_texsize),u_pixel_coord_upper:new o.bM(g,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(g,a.u_pixel_coord_lower),u_scale:new o.bL(g,a.u_scale),u_fade:new o.b8(g,a.u_fade),u_fill_translate:new o.bM(g,a.u_fill_translate)}),fillOutline:(g,a)=>({u_world:new o.bM(g,a.u_world),u_fill_translate:new o.bM(g,a.u_fill_translate)}),fillOutlinePattern:(g,a)=>({u_world:new o.bM(g,a.u_world),u_image:new o.bH(g,a.u_image),u_texsize:new o.bM(g,a.u_texsize),u_pixel_coord_upper:new o.bM(g,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(g,a.u_pixel_coord_lower),u_scale:new o.bL(g,a.u_scale),u_fade:new o.b8(g,a.u_fade),u_fill_translate:new o.bM(g,a.u_fill_translate)}),circle:(g,a)=>({u_camera_to_center_distance:new o.b8(g,a.u_camera_to_center_distance),u_scale_with_map:new o.bH(g,a.u_scale_with_map),u_pitch_with_map:new o.bH(g,a.u_pitch_with_map),u_extrude_scale:new o.bM(g,a.u_extrude_scale),u_device_pixel_ratio:new o.b8(g,a.u_device_pixel_ratio),u_globe_extrude_scale:new o.b8(g,a.u_globe_extrude_scale),u_translate:new o.bM(g,a.u_translate)}),collisionBox:(g,a)=>({u_pixel_extrude_scale:new o.bM(g,a.u_pixel_extrude_scale)}),collisionCircle:(g,a)=>({u_viewport_size:new o.bM(g,a.u_viewport_size)}),debug:(g,a)=>({u_color:new o.bI(g,a.u_color),u_overlay:new o.bH(g,a.u_overlay),u_overlay_scale:new o.b8(g,a.u_overlay_scale)}),depth:Qg,clippingMask:Qg,heatmap:(g,a)=>({u_extrude_scale:new o.b8(g,a.u_extrude_scale),u_intensity:new o.b8(g,a.u_intensity),u_globe_extrude_scale:new o.b8(g,a.u_globe_extrude_scale)}),heatmapTexture:(g,a)=>({u_matrix:new o.bJ(g,a.u_matrix),u_world:new o.bM(g,a.u_world),u_image:new o.bH(g,a.u_image),u_color_ramp:new o.bH(g,a.u_color_ramp),u_opacity:new o.b8(g,a.u_opacity)}),hillshade:(g,a)=>({u_image:new o.bH(g,a.u_image),u_latrange:new o.bM(g,a.u_latrange),u_exaggeration:new o.b8(g,a.u_exaggeration),u_altitudes:new o.bS(g,a.u_altitudes),u_azimuths:new o.bS(g,a.u_azimuths),u_accent:new o.bI(g,a.u_accent),u_method:new o.bH(g,a.u_method),u_shadows:new o.bR(g,a.u_shadows),u_highlights:new o.bR(g,a.u_highlights)}),hillshadePrepare:(g,a)=>({u_matrix:new o.bJ(g,a.u_matrix),u_image:new o.bH(g,a.u_image),u_dimension:new o.bM(g,a.u_dimension),u_zoom:new o.b8(g,a.u_zoom),u_unpack:new o.bK(g,a.u_unpack)}),line:(g,a)=>({u_translation:new o.bM(g,a.u_translation),u_ratio:new o.b8(g,a.u_ratio),u_device_pixel_ratio:new o.b8(g,a.u_device_pixel_ratio),u_units_to_pixels:new o.bM(g,a.u_units_to_pixels)}),lineGradient:(g,a)=>({u_translation:new o.bM(g,a.u_translation),u_ratio:new o.b8(g,a.u_ratio),u_device_pixel_ratio:new o.b8(g,a.u_device_pixel_ratio),u_units_to_pixels:new o.bM(g,a.u_units_to_pixels),u_image:new o.bH(g,a.u_image),u_image_height:new o.b8(g,a.u_image_height)}),linePattern:(g,a)=>({u_translation:new o.bM(g,a.u_translation),u_texsize:new o.bM(g,a.u_texsize),u_ratio:new o.b8(g,a.u_ratio),u_device_pixel_ratio:new o.b8(g,a.u_device_pixel_ratio),u_image:new o.bH(g,a.u_image),u_units_to_pixels:new o.bM(g,a.u_units_to_pixels),u_scale:new o.bL(g,a.u_scale),u_fade:new o.b8(g,a.u_fade)}),lineSDF:(g,a)=>({u_translation:new o.bM(g,a.u_translation),u_ratio:new o.b8(g,a.u_ratio),u_device_pixel_ratio:new o.b8(g,a.u_device_pixel_ratio),u_units_to_pixels:new o.bM(g,a.u_units_to_pixels),u_patternscale_a:new o.bM(g,a.u_patternscale_a),u_patternscale_b:new o.bM(g,a.u_patternscale_b),u_sdfgamma:new o.b8(g,a.u_sdfgamma),u_image:new o.bH(g,a.u_image),u_tex_y_a:new o.b8(g,a.u_tex_y_a),u_tex_y_b:new o.b8(g,a.u_tex_y_b),u_mix:new o.b8(g,a.u_mix)}),raster:(g,a)=>({u_tl_parent:new o.bM(g,a.u_tl_parent),u_scale_parent:new o.b8(g,a.u_scale_parent),u_buffer_scale:new o.b8(g,a.u_buffer_scale),u_fade_t:new o.b8(g,a.u_fade_t),u_opacity:new o.b8(g,a.u_opacity),u_image0:new o.bH(g,a.u_image0),u_image1:new o.bH(g,a.u_image1),u_brightness_low:new o.b8(g,a.u_brightness_low),u_brightness_high:new o.b8(g,a.u_brightness_high),u_saturation_factor:new o.b8(g,a.u_saturation_factor),u_contrast_factor:new o.b8(g,a.u_contrast_factor),u_spin_weights:new o.bL(g,a.u_spin_weights),u_coords_top:new o.bK(g,a.u_coords_top),u_coords_bottom:new o.bK(g,a.u_coords_bottom)}),symbolIcon:(g,a)=>({u_is_size_zoom_constant:new o.bH(g,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(g,a.u_is_size_feature_constant),u_size_t:new o.b8(g,a.u_size_t),u_size:new o.b8(g,a.u_size),u_camera_to_center_distance:new o.b8(g,a.u_camera_to_center_distance),u_pitch:new o.b8(g,a.u_pitch),u_rotate_symbol:new o.bH(g,a.u_rotate_symbol),u_aspect_ratio:new o.b8(g,a.u_aspect_ratio),u_fade_change:new o.b8(g,a.u_fade_change),u_label_plane_matrix:new o.bJ(g,a.u_label_plane_matrix),u_coord_matrix:new o.bJ(g,a.u_coord_matrix),u_is_text:new o.bH(g,a.u_is_text),u_pitch_with_map:new o.bH(g,a.u_pitch_with_map),u_is_along_line:new o.bH(g,a.u_is_along_line),u_is_variable_anchor:new o.bH(g,a.u_is_variable_anchor),u_texsize:new o.bM(g,a.u_texsize),u_texture:new o.bH(g,a.u_texture),u_translation:new o.bM(g,a.u_translation),u_pitched_scale:new o.b8(g,a.u_pitched_scale)}),symbolSDF:(g,a)=>({u_is_size_zoom_constant:new o.bH(g,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(g,a.u_is_size_feature_constant),u_size_t:new o.b8(g,a.u_size_t),u_size:new o.b8(g,a.u_size),u_camera_to_center_distance:new o.b8(g,a.u_camera_to_center_distance),u_pitch:new o.b8(g,a.u_pitch),u_rotate_symbol:new o.bH(g,a.u_rotate_symbol),u_aspect_ratio:new o.b8(g,a.u_aspect_ratio),u_fade_change:new o.b8(g,a.u_fade_change),u_label_plane_matrix:new o.bJ(g,a.u_label_plane_matrix),u_coord_matrix:new o.bJ(g,a.u_coord_matrix),u_is_text:new o.bH(g,a.u_is_text),u_pitch_with_map:new o.bH(g,a.u_pitch_with_map),u_is_along_line:new o.bH(g,a.u_is_along_line),u_is_variable_anchor:new o.bH(g,a.u_is_variable_anchor),u_texsize:new o.bM(g,a.u_texsize),u_texture:new o.bH(g,a.u_texture),u_gamma_scale:new o.b8(g,a.u_gamma_scale),u_device_pixel_ratio:new o.b8(g,a.u_device_pixel_ratio),u_is_halo:new o.bH(g,a.u_is_halo),u_translation:new o.bM(g,a.u_translation),u_pitched_scale:new o.b8(g,a.u_pitched_scale)}),symbolTextAndIcon:(g,a)=>({u_is_size_zoom_constant:new o.bH(g,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(g,a.u_is_size_feature_constant),u_size_t:new o.b8(g,a.u_size_t),u_size:new o.b8(g,a.u_size),u_camera_to_center_distance:new o.b8(g,a.u_camera_to_center_distance),u_pitch:new o.b8(g,a.u_pitch),u_rotate_symbol:new o.bH(g,a.u_rotate_symbol),u_aspect_ratio:new o.b8(g,a.u_aspect_ratio),u_fade_change:new o.b8(g,a.u_fade_change),u_label_plane_matrix:new o.bJ(g,a.u_label_plane_matrix),u_coord_matrix:new o.bJ(g,a.u_coord_matrix),u_is_text:new o.bH(g,a.u_is_text),u_pitch_with_map:new o.bH(g,a.u_pitch_with_map),u_is_along_line:new o.bH(g,a.u_is_along_line),u_is_variable_anchor:new o.bH(g,a.u_is_variable_anchor),u_texsize:new o.bM(g,a.u_texsize),u_texsize_icon:new o.bM(g,a.u_texsize_icon),u_texture:new o.bH(g,a.u_texture),u_texture_icon:new o.bH(g,a.u_texture_icon),u_gamma_scale:new o.b8(g,a.u_gamma_scale),u_device_pixel_ratio:new o.b8(g,a.u_device_pixel_ratio),u_is_halo:new o.bH(g,a.u_is_halo),u_translation:new o.bM(g,a.u_translation),u_pitched_scale:new o.b8(g,a.u_pitched_scale)}),background:(g,a)=>({u_opacity:new o.b8(g,a.u_opacity),u_color:new o.bI(g,a.u_color)}),backgroundPattern:(g,a)=>({u_opacity:new o.b8(g,a.u_opacity),u_image:new o.bH(g,a.u_image),u_pattern_tl_a:new o.bM(g,a.u_pattern_tl_a),u_pattern_br_a:new o.bM(g,a.u_pattern_br_a),u_pattern_tl_b:new o.bM(g,a.u_pattern_tl_b),u_pattern_br_b:new o.bM(g,a.u_pattern_br_b),u_texsize:new o.bM(g,a.u_texsize),u_mix:new o.b8(g,a.u_mix),u_pattern_size_a:new o.bM(g,a.u_pattern_size_a),u_pattern_size_b:new o.bM(g,a.u_pattern_size_b),u_scale_a:new o.b8(g,a.u_scale_a),u_scale_b:new o.b8(g,a.u_scale_b),u_pixel_coord_upper:new o.bM(g,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(g,a.u_pixel_coord_lower),u_tile_units_to_pixels:new o.b8(g,a.u_tile_units_to_pixels)}),terrain:(g,a)=>({u_texture:new o.bH(g,a.u_texture),u_ele_delta:new o.b8(g,a.u_ele_delta),u_fog_matrix:new o.bJ(g,a.u_fog_matrix),u_fog_color:new o.bI(g,a.u_fog_color),u_fog_ground_blend:new o.b8(g,a.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.b8(g,a.u_fog_ground_blend_opacity),u_horizon_color:new o.bI(g,a.u_horizon_color),u_horizon_fog_blend:new o.b8(g,a.u_horizon_fog_blend),u_is_globe_mode:new o.b8(g,a.u_is_globe_mode)}),terrainDepth:(g,a)=>({u_ele_delta:new o.b8(g,a.u_ele_delta)}),terrainCoords:(g,a)=>({u_texture:new o.bH(g,a.u_texture),u_terrain_coords_id:new o.b8(g,a.u_terrain_coords_id),u_ele_delta:new o.b8(g,a.u_ele_delta)}),projectionErrorMeasurement:(g,a)=>({u_input:new o.b8(g,a.u_input),u_output_expected:new o.b8(g,a.u_output_expected)}),atmosphere:(g,a)=>({u_sun_pos:new o.bL(g,a.u_sun_pos),u_atmosphere_blend:new o.b8(g,a.u_atmosphere_blend),u_globe_position:new o.bL(g,a.u_globe_position),u_globe_radius:new o.b8(g,a.u_globe_radius),u_inv_proj_matrix:new o.bJ(g,a.u_inv_proj_matrix)}),sky:(g,a)=>({u_sky_color:new o.bI(g,a.u_sky_color),u_horizon_color:new o.bI(g,a.u_horizon_color),u_horizon:new o.bM(g,a.u_horizon),u_horizon_normal:new o.bM(g,a.u_horizon_normal),u_sky_horizon_blend:new o.b8(g,a.u_sky_horizon_blend),u_sky_blend:new o.b8(g,a.u_sky_blend)})};class E1{constructor(a,l,p){this.context=a;let d=a.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){let l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Jg={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class T1{constructor(a,l,p,d){this.length=l.length,this.attributes=p,this.itemSize=l.bytesPerElement,this.dynamicDraw=d,this.context=a;let y=a.gl;this.buffer=y.createBuffer(),a.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);let l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,l){for(let p=0;p<this.attributes.length;p++){let d=l.attributes[this.attributes[p].name];d!==void 0&&a.enableVertexAttribArray(d)}}setVertexAttribPointers(a,l,p){for(let d=0;d<this.attributes.length;d++){let y=this.attributes[d],w=l.attributes[y.name];w!==void 0&&a.vertexAttribPointer(w,y.components,a[Jg[y.type]],!1,this.itemSize,y.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class or{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class qs extends or{getDefault(){return o.b7.transparent}set(a){let l=this.current;(a.r!==l.r||a.g!==l.g||a.b!==l.b||a.a!==l.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class ey extends or{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class ty extends or{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class ry extends or{getDefault(){return[!0,!0,!0,!0]}set(a){let l=this.current;(a[0]!==l[0]||a[1]!==l[1]||a[2]!==l[2]||a[3]!==l[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class S1 extends or{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class ny extends or{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class mu extends or{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){let l=this.current;(a.func!==l.func||a.ref!==l.ref||a.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class iy extends or{getDefault(){let a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){let l=this.current;(a[0]!==l[0]||a[1]!==l[1]||a[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class nA extends or{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let l=this.gl;a?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=a,this.dirty=!1}}class iA extends or{getDefault(){return[0,1]}set(a){let l=this.current;(a[0]!==l[0]||a[1]!==l[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class oA extends or{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let l=this.gl;a?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=a,this.dirty=!1}}class aA extends or{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class I1 extends or{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let l=this.gl;a?l.enable(l.BLEND):l.disable(l.BLEND),this.current=a,this.dirty=!1}}class sA extends or{getDefault(){let a=this.gl;return[a.ONE,a.ZERO]}set(a){let l=this.current;(a[0]!==l[0]||a[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class C1 extends or{getDefault(){return o.b7.transparent}set(a){let l=this.current;(a.r!==l.r||a.g!==l.g||a.b!==l.b||a.a!==l.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class vd extends or{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class gd extends or{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let l=this.gl;a?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=a,this.dirty=!1}}class yd extends or{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class oy extends or{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class vu extends or{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class _d extends or{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class Ec extends or{getDefault(){let a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){let l=this.current;(a[0]!==l[0]||a[1]!==l[1]||a[2]!==l[2]||a[3]!==l[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Xo extends or{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class P1 extends or{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class M1 extends or{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let l=this.gl;l.bindTexture(l.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class ay extends or{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class gu extends or{getDefault(){return null}set(a){let l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class xd extends or{getDefault(){return null}set(a){var l;if(a===this.current&&!this.dirty)return;let p=this.gl;bi(p)?p.bindVertexArray(a):(l=p.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class bd extends or{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;let l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class Sf extends or{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class wd extends or{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Ed extends or{constructor(a,l){super(a),this.context=a,this.parent=l}getDefault(){return null}}class Tc extends Ed{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Sc extends Ed{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class A1 extends Ed{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,a),this.current=a,this.dirty=!1}}let Td="Framebuffer is not complete";class Vt{constructor(a,l,p,d,y){this.context=a,this.width=l,this.height=p;let w=a.gl,C=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new Tc(a,C),d)this.depthAttachment=y?new A1(a,C):new Sc(a,C);else if(y)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error(Td)}destroy(){let a=this.context.gl,l=this.colorAttachment.get();if(l&&a.deleteTexture(l),this.depthAttachment){let p=this.depthAttachment.get();p&&a.deleteRenderbuffer(p)}a.deleteFramebuffer(this.framebuffer)}}class Sd{constructor(a){var l,p;if(this.gl=a,this.clearColor=new qs(this),this.clearDepth=new ey(this),this.clearStencil=new ty(this),this.colorMask=new ry(this),this.depthMask=new S1(this),this.stencilMask=new ny(this),this.stencilFunc=new mu(this),this.stencilOp=new iy(this),this.stencilTest=new nA(this),this.depthRange=new iA(this),this.depthTest=new oA(this),this.depthFunc=new aA(this),this.blend=new I1(this),this.blendFunc=new sA(this),this.blendColor=new C1(this),this.blendEquation=new vd(this),this.cullFace=new gd(this),this.cullFaceSide=new yd(this),this.frontFace=new oy(this),this.program=new vu(this),this.activeTexture=new _d(this),this.viewport=new Ec(this),this.bindFramebuffer=new Xo(this),this.bindRenderbuffer=new P1(this),this.bindTexture=new M1(this),this.bindVertexBuffer=new ay(this),this.bindElementBuffer=new gu(this),this.bindVertexArray=new xd(this),this.pixelStoreUnpack=new bd(this),this.pixelStoreUnpackPremultiplyAlpha=new Sf(this),this.pixelStoreUnpackFlipY=new wd(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),bi(a)){this.HALF_FLOAT=a.HALF_FLOAT;let d=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=a.RGBA16F)!==null&&l!==void 0?l:d==null?void 0:d.RGBA16F_EXT,this.RGB16F=(p=a.RGB16F)!==null&&p!==void 0?p:d==null?void 0:d.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");let d=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=d==null?void 0:d.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,l){return new E1(this,a,l)}createVertexBuffer(a,l,p){return new T1(this,a,l,p)}createRenderbuffer(a,l,p){let d=this.gl,y=d.createRenderbuffer();return this.bindRenderbuffer.set(y),d.renderbufferStorage(d.RENDERBUFFER,a,l,p),this.bindRenderbuffer.set(null),y}createFramebuffer(a,l,p,d){return new Vt(this,a,l,p,d)}clear({color:a,depth:l,stencil:p}){let d=this.gl,y=0;a&&(y|=d.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(y|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),p!==void 0&&(y|=d.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),d.clear(y)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){o.bE(a.blendFunction,xr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return bi(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var l;return bi(this.gl)?this.gl.deleteVertexArray(a):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}let Id;function sy(g,a,l,p,d){let y=g.context,w=g.transform,C=y.gl,A=g.useProgram("collisionBox"),O=[],D=0,z=0;for(let se=0;se<p.length;se++){let he=p[se],ve=a.getTile(he).getBucket(l);if(!ve)continue;let me=d?ve.textCollisionBox:ve.iconCollisionBox,ge=ve.collisionCircleArray;ge.length>0&&(O.push({circleArray:ge,circleOffset:z,coord:he}),D+=ge.length/4,z=D),me&&A.draw(y,C.LINES,Mt.disabled,Dt.disabled,g.colorModeForRenderPass(),Yt.disabled,JM(g.transform),g.style.map.terrain&&g.style.map.terrain.getTerrainData(he),w.getProjectionData({overscaledTileID:he,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),l.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,null,g.transform.zoom,null,null,me.collisionVertexBuffer)}if(!d||!O.length)return;let N=g.useProgram("collisionCircle"),$=new o.bT;$.resize(4*D),$._trim();let G=0;for(let se of O)for(let he=0;he<se.circleArray.length/4;he++){let ve=4*he,me=se.circleArray[ve+0],ge=se.circleArray[ve+1],be=se.circleArray[ve+2],ye=se.circleArray[ve+3];$.emplace(G++,me,ge,be,ye,0),$.emplace(G++,me,ge,be,ye,1),$.emplace(G++,me,ge,be,ye,2),$.emplace(G++,me,ge,be,ye,3)}(!Id||Id.length<2*D)&&(Id=function(se){let he=2*se,ve=new o.bV;ve.resize(he),ve._trim();for(let me=0;me<he;me++){let ge=6*me;ve.uint16[ge+0]=4*me+0,ve.uint16[ge+1]=4*me+1,ve.uint16[ge+2]=4*me+2,ve.uint16[ge+3]=4*me+2,ve.uint16[ge+4]=4*me+3,ve.uint16[ge+5]=4*me+0}return ve}(D));let ae=y.createIndexBuffer(Id,!0),oe=y.createVertexBuffer($,o.bU.members,!0);for(let se of O){let he=dd(g.transform);N.draw(y,C.TRIANGLES,Mt.disabled,Dt.disabled,g.colorModeForRenderPass(),Yt.disabled,he,g.style.map.terrain&&g.style.map.terrain.getTerrainData(se.coord),null,l.id,oe,ae,o.aJ.simpleSegment(0,2*se.circleOffset,se.circleArray.length,se.circleArray.length/2),null,g.transform.zoom,null,null,null)}oe.destroy(),ae.destroy()}let If=o.ad(new Float32Array(16));function lA(g,a,l,p,d,y){let{horizontalAlign:w,verticalAlign:C}=o.aE(g);return new o.P((-(w-.5)*a/d+p[0])*y,(-(C-.5)*l/d+p[1])*y)}function uA(g,a,l,p,d,y){let w=a.tileAnchorPoint.add(new o.P(a.translation[0],a.translation[1]));if(a.pitchWithMap){let C=p.mult(y);l||(C=C.rotate(-d));let A=w.add(C);return De(A.x,A.y,a.pitchedLabelPlaneMatrix,a.getElevation).point}if(l){let C=tn(a.tileAnchorPoint.x+1,a.tileAnchorPoint.y,a).point.sub(g),A=Math.atan(C.y/C.x)+(C.x<0?Math.PI:0);return g.add(p.rotate(A))}return g.add(p)}function q1(g,a,l,p,d,y,w,C,A,O,D,z){let N=g.text.placedSymbolArray,$=g.text.dynamicLayoutVertexArray,G=g.icon.dynamicLayoutVertexArray,ae={};$.clear();for(let oe=0;oe<N.length;oe++){let se=N.get(oe),he=se.hidden||!se.crossTileID||g.allowVerticalPlacement&&!se.placedOrientation?null:p[se.crossTileID];if(he){let ve=new o.P(se.anchorX,se.anchorY),me={getElevation:z,width:d.width,height:d.height,pitchedLabelPlaneMatrix:y,pitchWithMap:l,transform:d,tileAnchorPoint:ve,translation:O,unwrappedTileID:D},ge=l?Lt(ve.x,ve.y,me):tn(ve.x,ve.y,me),be=dr(d.cameraToCenterDistance,ge.signedDistanceFromCamera),ye=o.am(g.textSizeData,C,se)*be/o.ay;l&&(ye*=g.tilePixelRatio/w);let{width:Ie,height:Ne,anchor:qe,textOffset:Re,textBoxScale:Oe}=he,Qe=lA(qe,Ie,Ne,Re,Oe,ye),Xe=d.getPitchedTextCorrection(ve.x+O[0],ve.y+O[1],D),Ge=uA(ge.point,me,a,Qe,-d.bearingInRadians,Xe),ut=g.allowVerticalPlacement&&se.placedOrientation===o.al.vertical?Math.PI/2:0;for(let kt=0;kt<se.numGlyphs;kt++)o.as($,Ge,ut);A&&se.associatedIconIndex>=0&&(ae[se.associatedIconIndex]={shiftedAnchor:Ge,angle:ut})}else Ms(se.numGlyphs,$)}if(A){G.clear();let oe=g.icon.placedSymbolArray;for(let se=0;se<oe.length;se++){let he=oe.get(se);if(he.hidden)Ms(he.numGlyphs,G);else{let ve=ae[se];if(ve)for(let me=0;me<he.numGlyphs;me++)o.as(G,ve.shiftedAnchor,ve.angle);else Ms(he.numGlyphs,G)}}g.icon.dynamicLayoutVertexBuffer.updateData(G)}g.text.dynamicLayoutVertexBuffer.updateData($)}function cA(g,a,l){return l.iconsInText&&a?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Cd(g,a,l,p,d,y,w,C,A,O,D,z,N){let $=g.context,G=$.gl,ae=g.transform,oe=C==="map",se=A==="map",he=C!=="viewport"&&l.layout.get("symbol-placement")!=="point",ve=oe&&!se&&!he,me=!l.layout.get("symbol-sort-key").isConstant(),ge=!1,be=g.getDepthModeForSublayer(0,Mt.ReadOnly),ye=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ie=[],Ne=ae.getCircleRadiusCorrection();for(let qe of p){let Re=a.getTile(qe),Oe=Re.getBucket(l);if(!Oe)continue;let Qe=d?Oe.text:Oe.icon;if(!Qe||!Qe.segments.get().length||!Qe.hasVisibleVertices)continue;let Xe=Qe.programConfigurations.get(l.id),Ge=d||Oe.sdfIcons,ut=d?Oe.textSizeData:Oe.iconSizeData,kt=se||ae.pitch!==0,Xt=g.useProgram(cA(Ge,d,Oe),Xe),$r=o.ak(ut,ae.zoom),Sr=g.style.map.terrain&&g.style.map.terrain.getTerrainData(qe),Gr,Zr,Pr,ur,Nn=[0,0],Wn=null;if(d)Zr=Re.glyphAtlasTexture,Pr=G.LINEAR,Gr=Re.glyphAtlasTexture.size,Oe.iconsInText&&(Nn=Re.imageAtlasTexture.size,Wn=Re.imageAtlasTexture,ur=kt||g.options.rotating||g.options.zooming||ut.kind==="composite"||ut.kind==="camera"?G.LINEAR:G.NEAREST);else{let Tn=l.layout.get("icon-size").constantOr(0)!==1||Oe.iconsNeedLinear;Zr=Re.imageAtlasTexture,Pr=Ge||g.options.rotating||g.options.zooming||Tn||kt?G.LINEAR:G.NEAREST,Gr=Re.imageAtlasTexture.size}let ui=o.az(Re,1,g.transform.zoom),cr=dt(oe,g.transform,ui),hl=o.K();o.an(hl,cr);let Ya=qt(se,oe,g.transform,ui),fl=o.aA(ae,Re,y,w),xu=ae.getProjectionData({overscaledTileID:qe,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),Bf=ye&&Oe.hasTextData(),pl=l.layout.get("icon-text-fit")!=="none"&&Bf&&Oe.hasIconData();if(he){let Tn=g.style.map.terrain?(Bi,Lr)=>g.style.map.terrain.getElevation(qe,Bi,Lr):null,Sn=l.layout.get("text-rotation-alignment")==="map";lr(Oe,g,d,cr,hl,se,O,Sn,qe.toUnwrapped(),ae.width,ae.height,fl,Tn)}let bu=d&&ye||pl,qo=he||bu?If:se?cr:g.transform.clipSpaceToPixelsMatrix,dl=Ge&&l.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Os;Os=Ge?Oe.iconsInText?md(ut.kind,$r,ve,se,he,bu,g,qo,Ya,fl,Gr,Nn,Ne):b1(ut.kind,$r,ve,se,he,bu,g,qo,Ya,fl,d,Gr,0,Ne):wc(ut.kind,$r,ve,se,he,bu,g,qo,Ya,fl,d,Gr,Ne);let ml={program:Xt,buffers:Qe,uniformValues:Os,projectionData:xu,atlasTexture:Zr,atlasTextureIcon:Wn,atlasInterpolation:Pr,atlasInterpolationIcon:ur,isSDF:Ge,hasHalo:dl};if(me&&Oe.canOverlap){ge=!0;let Tn=Qe.segments.get();for(let Sn of Tn)Ie.push({segments:new o.aJ([Sn]),sortKey:Sn.sortKey,state:ml,terrainData:Sr})}else Ie.push({segments:Qe.segments,sortKey:0,state:ml,terrainData:Sr})}ge&&Ie.sort((qe,Re)=>qe.sortKey-Re.sortKey);for(let qe of Ie){let Re=qe.state;if($.activeTexture.set(G.TEXTURE0),Re.atlasTexture.bind(Re.atlasInterpolation,G.CLAMP_TO_EDGE),Re.atlasTextureIcon&&($.activeTexture.set(G.TEXTURE1),Re.atlasTextureIcon&&Re.atlasTextureIcon.bind(Re.atlasInterpolationIcon,G.CLAMP_TO_EDGE)),Re.isSDF){let Oe=Re.uniformValues;Re.hasHalo&&(Oe.u_is_halo=1,Cf(Re.buffers,qe.segments,l,g,Re.program,be,D,z,Oe,Re.projectionData,qe.terrainData)),Oe.u_is_halo=0}Cf(Re.buffers,qe.segments,l,g,Re.program,be,D,z,Re.uniformValues,Re.projectionData,qe.terrainData)}}function Cf(g,a,l,p,d,y,w,C,A,O,D){let z=p.context;d.draw(z,z.gl.TRIANGLES,y,w,C,Yt.backCCW,A,D,O,l.id,g.layoutVertexBuffer,g.indexBuffer,a,l.paint,p.transform.zoom,g.programConfigurations.get(l.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function Pd(g,a,l,p,d){let y=g.context,w=y.gl,C=Dt.disabled,A=new xr([w.ONE,w.ONE],o.b7.transparent,[!0,!0,!0,!0]),O=a.getBucket(l);if(!O)return;let D=p.key,z=l.heatmapFbos.get(D);z||(z=Md(y,a.tileSize,a.tileSize),l.heatmapFbos.set(D,z)),y.bindFramebuffer.set(z.framebuffer),y.viewport.set([0,0,a.tileSize,a.tileSize]),y.clear({color:o.b7.transparent});let N=O.programConfigurations.get(l.id),$=g.useProgram("heatmap",N,!d),G=g.transform.getProjectionData({overscaledTileID:a.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ae=g.style.map.terrain.getTerrainData(p);$.draw(y,w.TRIANGLES,Mt.disabled,C,A,Yt.disabled,du(a,g.transform.zoom,l.paint.get("heatmap-intensity"),1),ae,G,l.id,O.layoutVertexBuffer,O.indexBuffer,O.segments,l.paint,g.transform.zoom,N)}function ly(g,a,l,p,d){let y=g.context,w=y.gl,C=g.transform;y.setColorMode(g.colorModeForRenderPass());let A=uy(y,a),O=l.key,D=a.heatmapFbos.get(O);if(!D)return;y.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,D.colorAttachment.get()),y.activeTexture.set(w.TEXTURE1),A.bind(w.LINEAR,w.CLAMP_TO_EDGE);let z=C.getProjectionData({overscaledTileID:l,applyTerrainMatrix:d,applyGlobeMatrix:!p});g.useProgram("heatmapTexture").draw(y,w.TRIANGLES,Mt.disabled,Dt.disabled,g.colorModeForRenderPass(),Yt.disabled,p1(g,a,0,1),null,z,a.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments,a.paint,C.zoom),D.destroy(),a.heatmapFbos.delete(O)}function Md(g,a,l){var p,d;let y=g.gl,w=y.createTexture();y.bindTexture(y.TEXTURE_2D,w),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);let C=(p=g.HALF_FLOAT)!==null&&p!==void 0?p:y.UNSIGNED_BYTE,A=(d=g.RGBA16F)!==null&&d!==void 0?d:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,A,a,l,0,y.RGBA,C,null);let O=g.createFramebuffer(a,l,!1,!1);return O.colorAttachment.set(w),O}function uy(g,a){return a.colorRampTexture||(a.colorRampTexture=new Le(g,a.colorRamp,g.gl.RGBA)),a.colorRampTexture}function Pf(g,a,l,p,d){if(!l||!p||!p.imageAtlas)return;let y=p.imageAtlas.patternPositions,w=y[l.to.toString()],C=y[l.from.toString()];if(!w&&C&&(w=C),!C&&w&&(C=w),!w||!C){let A=d.getPaintProperty(a);w=y[A],C=y[A]}w&&C&&g.setConstantPatternPositions(w,C)}function Mf(g,a,l,p,d,y,w,C){let A=g.context.gl,O="fill-pattern",D=l.paint.get(O),z=D&&D.constantOr(1),N=l.getCrossfadeParameters(),$,G,ae,oe,se,he=g.transform,ve=l.paint.get("fill-translate"),me=l.paint.get("fill-translate-anchor");w?(G=z&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",$=A.LINES):(G=z?"fillPattern":"fill",$=A.TRIANGLES);let ge=D.constantOr(null);for(let be of p){let ye=a.getTile(be);if(z&&!ye.patternsLoaded())continue;let Ie=ye.getBucket(l);if(!Ie)continue;let Ne=Ie.programConfigurations.get(l.id),qe=g.useProgram(G,Ne),Re=g.style.map.terrain&&g.style.map.terrain.getTerrainData(be);z&&(g.context.activeTexture.set(A.TEXTURE0),ye.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),Ne.updatePaintBuffers(N)),Pf(Ne,O,ge,ye,l);let Oe=he.getProjectionData({overscaledTileID:be,applyGlobeMatrix:!C,applyTerrainMatrix:!0}),Qe=o.aA(he,ye,ve,me);if(w){oe=Ie.indexBuffer2,se=Ie.segments2;let Ge=[A.drawingBufferWidth,A.drawingBufferHeight];ae=G==="fillOutlinePattern"&&z?wf(g,N,ye,Ge,Qe):Yg(Ge,Qe)}else oe=Ie.indexBuffer,se=Ie.segments,ae=z?h1(g,N,ye,Qe):{u_fill_translate:Qe};let Xe=g.stencilModeForClipping(be);qe.draw(g.context,$,d,Xe,y,Yt.backCCW,ae,Re,Oe,l.id,Ie.layoutVertexBuffer,oe,se,l.paint,g.transform.zoom,Ne)}}function Af(g,a,l,p,d,y,w,C){let A=g.context,O=A.gl,D="fill-extrusion-pattern",z=l.paint.get(D),N=z.constantOr(1),$=l.getCrossfadeParameters(),G=l.paint.get("fill-extrusion-opacity"),ae=z.constantOr(null),oe=g.transform;for(let se of p){let he=a.getTile(se),ve=he.getBucket(l);if(!ve)continue;let me=g.style.map.terrain&&g.style.map.terrain.getTerrainData(se),ge=ve.programConfigurations.get(l.id),be=g.useProgram(N?"fillExtrusionPattern":"fillExtrusion",ge);N&&(g.context.activeTexture.set(O.TEXTURE0),he.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),ge.updatePaintBuffers($));let ye=oe.getProjectionData({overscaledTileID:se,applyGlobeMatrix:!C,applyTerrainMatrix:!0});Pf(ge,D,ae,he,l);let Ie=o.aA(oe,he,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),Ne=l.paint.get("fill-extrusion-vertical-gradient"),qe=N?Wa(g,Ne,G,Ie,se,$,he):pd(g,Ne,G,Ie);be.draw(A,A.gl.TRIANGLES,d,y,w,Yt.backCCW,qe,me,ye,l.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,l.paint,g.transform.zoom,ge,g.style.map.terrain&&ve.centroidVertexBuffer)}}function cy(g,a,l,p,d,y,w,C,A){var O;let D=g.style.projection,z=g.context,N=g.transform,$=z.gl,G=[`#define NUM_ILLUMINATION_SOURCES ${l.paint.get("hillshade-highlight-color").values.length}`],ae=g.useProgram("hillshade",null,!1,G),oe=!g.options.moving;for(let se of p){let he=a.getTile(se),ve=he.fbo;if(!ve)continue;let me=D.getMeshFromTileID(z,se.canonical,C,!0,"raster"),ge=(O=g.style.map.terrain)===null||O===void 0?void 0:O.getTerrainData(se);z.activeTexture.set($.TEXTURE0),$.bindTexture($.TEXTURE_2D,ve.colorAttachment.get());let be=N.getProjectionData({overscaledTileID:se,aligned:oe,applyGlobeMatrix:!A,applyTerrainMatrix:!0});ae.draw(z,$.TRIANGLES,y,d[se.overscaledZ],w,Yt.backCCW,d1(g,he,l),ge,be,l.id,me.vertexBuffer,me.indexBuffer,me.segments)}}let qf=[new o.P(0,0),new o.P(o.Z,0),new o.P(o.Z,o.Z),new o.P(0,o.Z)];function Ad(g,a,l,p,d,y,w,C,A=!1,O=!1){let D=p[p.length-1].overscaledZ,z=g.context,N=z.gl,$=g.useProgram("raster"),G=g.transform,ae=g.style.projection,oe=g.colorModeForRenderPass(),se=!g.options.moving;for(let he of p){let ve=g.getDepthModeForSublayer(he.overscaledZ-D,l.paint.get("raster-opacity")===1?Mt.ReadWrite:Mt.ReadOnly,N.LESS),me=a.getTile(he);me.registerFadeDuration(l.paint.get("raster-fade-duration"));let ge=a.findLoadedParent(he,0),be=a.findLoadedSibling(he),ye=R1(me,ge||be||null,a,l,g.transform,g.style.map.terrain),Ie,Ne,qe=l.paint.get("raster-resampling")==="nearest"?N.NEAREST:N.LINEAR;z.activeTexture.set(N.TEXTURE0),me.texture.bind(qe,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(N.TEXTURE1),ge?(ge.texture.bind(qe,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),Ie=Math.pow(2,ge.tileID.overscaledZ-me.tileID.overscaledZ),Ne=[me.tileID.canonical.x*Ie%1,me.tileID.canonical.y*Ie%1]):me.texture.bind(qe,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),me.texture.useMipmap&&z.extTextureFilterAnisotropic&&g.transform.pitch>20&&N.texParameterf(N.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax);let Re=g.style.map.terrain&&g.style.map.terrain.getTerrainData(he),Oe=G.getProjectionData({overscaledTileID:he,aligned:se,applyGlobeMatrix:!O,applyTerrainMatrix:!0}),Qe=_1(Ne||[0,0],Ie||1,ye,l,C),Xe=ae.getMeshFromTileID(z,he.canonical,y,w,"raster");$.draw(z,N.TRIANGLES,ve,d?d[he.overscaledZ]:Dt.disabled,oe,A?Yt.frontCCW:Yt.backCCW,Qe,Re,Oe,l.id,Xe.vertexBuffer,Xe.indexBuffer,Xe.segments)}}function R1(g,a,l,p,d,y){let w=p.paint.get("raster-fade-duration");if(!y&&w>0){let C=S.now(),A=(C-g.timeAdded)/w,O=a?(C-a.timeAdded)/w:-1,D=l.getSource(),z=Pe(d,{tileSize:D.tileSize,roundZoom:D.roundZoom}),N=!a||Math.abs(a.tileID.overscaledZ-z)>Math.abs(g.tileID.overscaledZ-z),$=N&&g.refreshedUponExpiration?1:o.ae(N?A:1-O,0,1);return g.refreshedUponExpiration&&A>=1&&(g.refreshedUponExpiration=!1),a?{opacity:1,mix:1-$}:{opacity:$,mix:0}}return{opacity:1,mix:0}}let qd=new o.b7(1,0,0,1),hy=new o.b7(0,1,0,1),O1=new o.b7(0,0,1,1),L1=new o.b7(1,0,1,1),Rd=new o.b7(0,1,1,1);function Od(g,a,l,p){Rf(g,0,a+l/2,g.transform.width,l,p)}function D1(g,a,l,p){Rf(g,a-l/2,0,l,g.transform.height,p)}function Rf(g,a,l,p,d,y){let w=g.context,C=w.gl;C.enable(C.SCISSOR_TEST),C.scissor(a*g.pixelRatio,l*g.pixelRatio,p*g.pixelRatio,d*g.pixelRatio),w.clear({color:y}),C.disable(C.SCISSOR_TEST)}function cn(g,a,l){let p=g.context,d=p.gl,y=g.useProgram("debug"),w=Mt.disabled,C=Dt.disabled,A=g.colorModeForRenderPass(),O="$debug",D=g.style.map.terrain&&g.style.map.terrain.getTerrainData(l);p.activeTexture.set(d.TEXTURE0);let z=a.getTileByID(l.key).latestRawTileData,N=Math.floor((z&&z.byteLength||0)/1024),$=a.getTile(l).tileSize,G=512/Math.min($,512)*(l.overscaledZ/g.transform.zoom)*.5,ae=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(ae+=` => ${l.overscaledZ}`),function(se,he){se.initDebugOverlayCanvas();let ve=se.debugOverlayCanvas,me=se.context.gl,ge=se.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,ve.width,ve.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold 36px Open Sans, sans-serif",ge.fillText(he,5,5),ge.strokeText(he,5,5),se.debugOverlayTexture.update(ve),se.debugOverlayTexture.bind(me.LINEAR,me.CLAMP_TO_EDGE)}(g,`${ae} ${N}kB`);let oe=g.transform.getProjectionData({overscaledTileID:l,applyGlobeMatrix:!0,applyTerrainMatrix:!0});y.draw(p,d.TRIANGLES,w,C,xr.alphaBlended,Yt.disabled,f1(o.b7.transparent,G),null,oe,O,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),y.draw(p,d.LINE_STRIP,w,C,A,Yt.disabled,f1(o.b7.red),D,oe,O,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function cl(g,a,l,p){let{isRenderingGlobe:d}=p,y=g.context,w=y.gl,C=g.transform,A=g.colorModeForRenderPass(),O=g.getDepthModeFor3D(),D=g.useProgram("terrain");y.bindFramebuffer.set(null),y.viewport.set([0,0,g.width,g.height]);for(let z of l){let N=a.getTerrainMesh(z.tileID),$=g.renderToTexture.getTexture(z),G=a.getTerrainData(z.tileID);y.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,$.texture);let ae=a.getMeshFrameDelta(C.zoom),oe=C.calculateFogMatrix(z.tileID.toUnwrapped()),se=QM(ae,oe,g.style.sky,C.pitch,d),he=C.getProjectionData({overscaledTileID:z.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});D.draw(y,w.TRIANGLES,O,Dt.disabled,A,Yt.backCCW,se,G,he,"terrain",N.vertexBuffer,N.indexBuffer,N.segments)}}function Ao(g,a){if(!a.mesh){let l=new o.aI;l.emplaceBack(-1,-1),l.emplaceBack(1,-1),l.emplaceBack(1,1),l.emplaceBack(-1,1);let p=new o.aK;p.emplaceBack(0,1,2),p.emplaceBack(0,2,3),a.mesh=new vc(g.createVertexBuffer(l,Fi.members),g.createIndexBuffer(p),o.aJ.simpleSegment(0,0,l.length,p.length))}return a.mesh}class fy{constructor(a,l){this.context=new Sd(a),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Se.maxUnderzooming+Se.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ff}resize(a,l,p){if(this.width=Math.floor(a*p),this.height=Math.floor(l*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let d of this.style._order)this.style._layers[d].resize()}setup(){let a=this.context,l=new o.aI;l.emplaceBack(0,0),l.emplaceBack(o.Z,0),l.emplaceBack(0,o.Z),l.emplaceBack(o.Z,o.Z),this.tileExtentBuffer=a.createVertexBuffer(l,Fi.members),this.tileExtentSegments=o.aJ.simpleSegment(0,0,4,2);let p=new o.aI;p.emplaceBack(0,0),p.emplaceBack(o.Z,0),p.emplaceBack(0,o.Z),p.emplaceBack(o.Z,o.Z),this.debugBuffer=a.createVertexBuffer(p,Fi.members),this.debugSegments=o.aJ.simpleSegment(0,0,4,5);let d=new o.b_;d.emplaceBack(0,0,0,0),d.emplaceBack(o.Z,0,o.Z,0),d.emplaceBack(0,o.Z,0,o.Z),d.emplaceBack(o.Z,o.Z,o.Z,o.Z),this.rasterBoundsBuffer=a.createVertexBuffer(d,YM.members),this.rasterBoundsSegments=o.aJ.simpleSegment(0,0,4,2);let y=new o.aI;y.emplaceBack(0,0),y.emplaceBack(o.Z,0),y.emplaceBack(0,o.Z),y.emplaceBack(o.Z,o.Z),this.rasterBoundsBufferPosOnly=a.createVertexBuffer(y,Fi.members),this.rasterBoundsSegmentsPosOnly=o.aJ.simpleSegment(0,0,4,5);let w=new o.aI;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(w,Fi.members),this.viewportSegments=o.aJ.simpleSegment(0,0,4,2);let C=new o.b$;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(C);let A=new o.aK;A.emplaceBack(1,0,2),A.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(A);let O=this.context.gl;this.stencilClearMode=new Dt({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO),this.tileExtentMesh=new vc(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let a=this.context,l=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let p=o.K();o.bQ(p,0,this.width,this.height,0,0,1),o.M(p,p,[l.drawingBufferWidth,l.drawingBufferHeight,0]);let d={mainMatrix:p,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:p};this.useProgram("clippingMask",null,!0).draw(a,l.TRIANGLES,Mt.disabled,this.stencilClearMode,xr.disabled,Yt.disabled,null,null,d,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,l,p){if(this.currentStencilSource===a.source||!a.isTileClipped()||!l||!l.length)return;this.currentStencilSource=a.source,this.nextStencilID+l.length>256&&this.clearStencil();let d=this.context;d.setColorMode(xr.disabled),d.setDepthMode(Mt.disabled);let y={};for(let w of l)y[w.key]=this.nextStencilID++;this._renderTileMasks(y,l,p,!0),this._renderTileMasks(y,l,p,!1),this._tileClippingMaskIDs=y}_renderTileMasks(a,l,p,d){let y=this.context,w=y.gl,C=this.style.projection,A=this.transform,O=this.useProgram("clippingMask");for(let D of l){let z=a[D.key],N=this.style.map.terrain&&this.style.map.terrain.getTerrainData(D),$=C.getMeshFromTileID(this.context,D.canonical,d,!0,"stencil"),G=A.getProjectionData({overscaledTileID:D,applyGlobeMatrix:!p,applyTerrainMatrix:!0});O.draw(y,w.TRIANGLES,Mt.disabled,new Dt({func:w.ALWAYS,mask:0},z,255,w.KEEP,w.KEEP,w.REPLACE),xr.disabled,p?Yt.disabled:Yt.backCCW,null,N,G,"$clipping",$.vertexBuffer,$.indexBuffer,$.segments)}}_renderTilesDepthBuffer(){let a=this.context,l=a.gl,p=this.style.projection,d=this.transform,y=this.useProgram("depth"),w=this.getDepthModeFor3D(),C=we(d,{tileSize:d.tileSize});for(let A of C){let O=this.style.map.terrain&&this.style.map.terrain.getTerrainData(A),D=p.getMeshFromTileID(this.context,A.canonical,!0,!0,"raster"),z=d.getProjectionData({overscaledTileID:A,applyGlobeMatrix:!0,applyTerrainMatrix:!0});y.draw(a,l.TRIANGLES,w,Dt.disabled,xr.disabled,Yt.backCCW,null,O,z,"$clipping",D.vertexBuffer,D.indexBuffer,D.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let a=this.nextStencilID++,l=this.context.gl;return new Dt({func:l.NOTEQUAL,mask:255},a,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(a){let l=this.context.gl;return new Dt({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,l.KEEP,l.KEEP,l.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(a){let l=this.context.gl,p=a.sort((w,C)=>C.overscaledZ-w.overscaledZ),d=p[p.length-1].overscaledZ,y=p[0].overscaledZ-d+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();let w={};for(let C=0;C<y;C++)w[C+d]=new Dt({func:l.GEQUAL,mask:255},C+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=y,[w,p]}return[{[d]:Dt.disabled},p]}stencilConfigForOverlapTwoPass(a){let l=this.context.gl,p=a.sort((w,C)=>C.overscaledZ-w.overscaledZ),d=p[p.length-1].overscaledZ,y=p[0].overscaledZ-d+1;if(this.clearStencil(),y>1){let w={},C={};for(let A=0;A<y;A++)w[A+d]=new Dt({func:l.GREATER,mask:255},y+1+A,255,l.KEEP,l.KEEP,l.REPLACE),C[A+d]=new Dt({func:l.GREATER,mask:255},1+A,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID=2*y+1,[w,C,p]}return this.nextStencilID=3,[{[d]:new Dt({func:l.GREATER,mask:255},2,255,l.KEEP,l.KEEP,l.REPLACE)},{[d]:new Dt({func:l.GREATER,mask:255},1,255,l.KEEP,l.KEEP,l.REPLACE)},p]}colorModeForRenderPass(){let a=this.context.gl;return this._showOverdrawInspector?new xr([a.CONSTANT_COLOR,a.ONE],new o.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?xr.unblended:xr.alphaBlended}getDepthModeForSublayer(a,l,p){if(!this.opaquePassEnabledForLayer())return Mt.disabled;let d=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Mt(p||this.context.gl.LEQUAL,l,[d,d])}getDepthModeFor3D(){return new Mt(this.context.gl.LEQUAL,Mt.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,l){var p,d;this.style=a,this.options=l,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(S.now()),this.imageManager.beginFrame();let y=this.style._order,w=this.style.sourceCaches,C={},A={},O={},D={isRenderingToTexture:!1,isRenderingGlobe:((p=a.projection)===null||p===void 0?void 0:p.transitionState)>0};for(let N in w){let $=w[N];$.used&&$.prepare(this.context),C[N]=$.getVisibleCoordinates(!1),A[N]=C[N].slice().reverse(),O[N]=$.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let N=0;N<y.length;N++)if(this.style._layers[y[N]].is3D()){this.opaquePassCutoff=N;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let N of y){let $=this.style._layers[N];if(!$.hasOffscreenPass()||$.isHidden(this.transform.zoom))continue;let G=A[$.source];($.type==="custom"||G.length)&&this.renderLayer(this,w[$.source],$,G,D)}if((d=this.style.projection)===null||d===void 0||d.updateGPUdependent({context:this.context,useProgram:N=>this.useProgram(N)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?o.b7.black:o.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(N,$){let G=N.context,ae=G.gl,oe=((be,ye,Ie)=>{let Ne=Math.cos(ye.rollInRadians),qe=Math.sin(ye.rollInRadians),Re=Ee(ye),Oe=ye.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:be.properties.get("sky-color"),u_horizon_color:be.properties.get("horizon-color"),u_horizon:[(ye.width/2-Re*qe)*Ie,(ye.height/2+Re*Ne)*Ie],u_horizon_normal:[-qe,Ne],u_sky_horizon_blend:be.properties.get("sky-horizon-blend")*ye.height/2*Ie,u_sky_blend:Oe}})($,N.style.map.transform,N.pixelRatio),se=new Mt(ae.LEQUAL,Mt.ReadWrite,[0,1]),he=Dt.disabled,ve=N.colorModeForRenderPass(),me=N.useProgram("sky"),ge=Ao(G,$);me.draw(G,ae.TRIANGLES,se,he,ve,Yt.disabled,oe,null,void 0,"sky",ge.vertexBuffer,ge.indexBuffer,ge.segments)}(this,this.style.sky),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){let N=this.style._layers[y[this.currentLayer]],$=w[N.source],G=C[N.source];this._renderTileClippingMasks(N,G,!1),this.renderLayer(this,$,N,G,D)}this.renderPass="translucent";let z=!1;for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){let N=this.style._layers[y[this.currentLayer]],$=w[N.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(N,D))continue;this.opaquePassEnabledForLayer()||z||(z=!0,D.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let G=(N.type==="symbol"?O:A)[N.source];this._renderTileClippingMasks(N,C[N.source],!!this.renderToTexture),this.renderLayer(this,$,N,G,D)}if(D.isRenderingGlobe&&function(N,$,G){let ae=N.context,oe=ae.gl,se=N.useProgram("atmosphere"),he=new Mt(oe.LEQUAL,Mt.ReadOnly,[0,1]),ve=N.transform,me=function(Oe,Qe){let Xe=Oe.properties.get("position"),Ge=[-Xe.x,-Xe.y,-Xe.z],ut=o.ad(new Float64Array(16));return Oe.properties.get("anchor")==="map"&&(o.a_(ut,ut,Qe.rollInRadians),o.a$(ut,ut,-Qe.pitchInRadians),o.a_(ut,ut,Qe.bearingInRadians),o.a$(ut,ut,Qe.center.lat*Math.PI/180),o.bp(ut,ut,-Qe.center.lng*Math.PI/180)),o.bZ(Ge,Ge,ut),Ge}(G,N.transform),ge=ve.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),be=$.properties.get("atmosphere-blend")*ge.projectionTransition;if(be===0)return;let ye=hu(ve.worldSize,ve.center.lat),Ie=ve.inverseProjectionMatrix,Ne=new Float64Array(4);Ne[3]=1,o.at(Ne,Ne,ve.modelViewProjectionMatrix),Ne[0]/=Ne[3],Ne[1]/=Ne[3],Ne[2]/=Ne[3],Ne[3]=1,o.at(Ne,Ne,Ie),Ne[0]/=Ne[3],Ne[1]/=Ne[3],Ne[2]/=Ne[3],Ne[3]=1;let qe=((Oe,Qe,Xe,Ge,ut)=>({u_sun_pos:Oe,u_atmosphere_blend:Qe,u_globe_position:Xe,u_globe_radius:Ge,u_inv_proj_matrix:ut}))(me,be,[Ne[0],Ne[1],Ne[2]],ye,Ie),Re=Ao(ae,$);se.draw(ae,oe.TRIANGLES,he,Dt.disabled,xr.alphaBlended,Yt.disabled,qe,null,null,"atmosphere",Re.vertexBuffer,Re.indexBuffer,Re.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let N=function($,G){let ae=null,oe=Object.values($._layers).flatMap(me=>me.source&&!me.isHidden(G)?[$.sourceCaches[me.source]]:[]),se=oe.filter(me=>me.getSource().type==="vector"),he=oe.filter(me=>me.getSource().type!=="vector"),ve=me=>{(!ae||ae.getSource().maxzoom<me.getSource().maxzoom)&&(ae=me)};return se.forEach(me=>ve(me)),ae||he.forEach(me=>ve(me)),ae}(this.style,this.transform.zoom);N&&function($,G,ae){for(let oe=0;oe<ae.length;oe++)cn($,G,ae[oe])}(this,N,N.getVisibleCoordinates())}this.options.showPadding&&function(N){let $=N.transform.padding;Od(N,N.transform.height-($.top||0),3,qd),Od(N,$.bottom||0,3,hy),D1(N,$.left||0,3,O1),D1(N,N.transform.width-($.right||0),3,L1);let G=N.transform.centerPoint;(function(ae,oe,se,he){Rf(ae,oe-1,se-10,2,20,he),Rf(ae,oe-10,se-1,20,2,he)})(N,G.x,N.transform.height-G.y,Rd)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;let l=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix,d=this.terrainFacilitator.dirty;d||(d=a?!o.c0(l,p):!o.c1(l,p)),d||(d=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),d&&(o.c2(l,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,w){let C=y.context,A=C.gl,O=y.transform,D=xr.unblended,z=new Mt(A.LEQUAL,Mt.ReadWrite,[0,1]),N=w.sourceCache.getRenderableTiles(),$=y.useProgram("terrainDepth");C.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),C.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),C.clear({color:o.b7.transparent,depth:1});for(let G of N){let ae=w.getTerrainMesh(G.tileID),oe=w.getTerrainData(G.tileID),se=O.getProjectionData({overscaledTileID:G.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),he={u_ele_delta:w.getMeshFrameDelta(O.zoom)};$.draw(C,A.TRIANGLES,z,Dt.disabled,D,Yt.backCCW,he,oe,se,"terrain",ae.vertexBuffer,ae.indexBuffer,ae.segments)}C.bindFramebuffer.set(null),C.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,w){let C=y.context,A=C.gl,O=y.transform,D=xr.unblended,z=new Mt(A.LEQUAL,Mt.ReadWrite,[0,1]),N=w.getCoordsTexture(),$=w.sourceCache.getRenderableTiles(),G=y.useProgram("terrainCoords");C.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),C.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),C.clear({color:o.b7.transparent,depth:1}),w.coordsIndex=[];for(let ae of $){let oe=w.getTerrainMesh(ae.tileID),se=w.getTerrainData(ae.tileID);C.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,N.texture);let he={u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(O.zoom)},ve=O.getProjectionData({overscaledTileID:ae.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});G.draw(C,A.TRIANGLES,z,Dt.disabled,D,Yt.backCCW,he,se,ve,"terrain",oe.vertexBuffer,oe.indexBuffer,oe.segments),w.coordsIndex.push(ae.tileID.key)}C.bindFramebuffer.set(null),C.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(a,l,p,d,y){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||(d||[]).length)&&(this.id=p.id,o.c3(p)?function(w,C,A,O,D,z){if(w.renderPass!=="translucent")return;let{isRenderingToTexture:N}=z,$=Dt.disabled,G=w.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ae,oe,se,he,ve,me,ge,be,ye){let Ie=oe.transform,Ne=oe.style.map.terrain,qe=ve==="map",Re=me==="map";for(let Oe of ae){let Qe=he.getTile(Oe),Xe=Qe.getBucket(se);if(!Xe||!Xe.text||!Xe.text.segments.get().length)continue;let Ge=o.ak(Xe.textSizeData,Ie.zoom),ut=o.az(Qe,1,oe.transform.zoom),kt=dt(qe,oe.transform,ut),Xt=se.layout.get("icon-text-fit")!=="none"&&Xe.hasIconData();if(Ge){let $r=Math.pow(2,Ie.zoom-Qe.tileID.overscaledZ),Sr=Ne?(Gr,Zr)=>Ne.getElevation(Oe,Gr,Zr):null;q1(Xe,qe,Re,ye,Ie,kt,$r,Ge,Xt,o.aA(Ie,Qe,ge,be),Oe.toUnwrapped(),Sr)}}}(O,w,A,C,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),D),A.paint.get("icon-opacity").constantOr(1)!==0&&Cd(w,C,A,O,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),$,G,N),A.paint.get("text-opacity").constantOr(1)!==0&&Cd(w,C,A,O,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),$,G,N),C.map.showCollisionBoxes&&(sy(w,C,A,O,!0),sy(w,C,A,O,!1))}(a,l,p,d,this.style.placement.variableOffsets,y):o.c4(p)?function(w,C,A,O,D){if(w.renderPass!=="translucent")return;let{isRenderingToTexture:z}=D,N=A.paint.get("circle-opacity"),$=A.paint.get("circle-stroke-width"),G=A.paint.get("circle-stroke-opacity"),ae=!A.layout.get("circle-sort-key").isConstant();if(N.constantOr(1)===0&&($.constantOr(1)===0||G.constantOr(1)===0))return;let oe=w.context,se=oe.gl,he=w.transform,ve=w.getDepthModeForSublayer(0,Mt.ReadOnly),me=Dt.disabled,ge=w.colorModeForRenderPass(),be=[],ye=he.getCircleRadiusCorrection();for(let Ie=0;Ie<O.length;Ie++){let Ne=O[Ie],qe=C.getTile(Ne),Re=qe.getBucket(A);if(!Re)continue;let Oe=A.paint.get("circle-translate"),Qe=A.paint.get("circle-translate-anchor"),Xe=o.aA(he,qe,Oe,Qe),Ge=Re.programConfigurations.get(A.id),ut=w.useProgram("circle",Ge),kt=Re.layoutVertexBuffer,Xt=Re.indexBuffer,$r=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ne),Sr={programConfiguration:Ge,program:ut,layoutVertexBuffer:kt,indexBuffer:Xt,uniformValues:Ef(w,qe,A,Xe,ye),terrainData:$r,projectionData:he.getProjectionData({overscaledTileID:Ne,applyGlobeMatrix:!z,applyTerrainMatrix:!0})};if(ae){let Gr=Re.segments.get();for(let Zr of Gr)be.push({segments:new o.aJ([Zr]),sortKey:Zr.sortKey,state:Sr})}else be.push({segments:Re.segments,sortKey:0,state:Sr})}ae&&be.sort((Ie,Ne)=>Ie.sortKey-Ne.sortKey);for(let Ie of be){let{programConfiguration:Ne,program:qe,layoutVertexBuffer:Re,indexBuffer:Oe,uniformValues:Qe,terrainData:Xe,projectionData:Ge}=Ie.state;qe.draw(oe,se.TRIANGLES,ve,me,ge,Yt.backCCW,Qe,Xe,Ge,A.id,Re,Oe,Ie.segments,A.paint,w.transform.zoom,Ne)}}(a,l,p,d,y):o.c5(p)?function(w,C,A,O,D){if(A.paint.get("heatmap-opacity")===0)return;let z=w.context,{isRenderingToTexture:N,isRenderingGlobe:$}=D;if(w.style.map.terrain){for(let G of O){let ae=C.getTile(G);C.hasRenderableParent(G)||(w.renderPass==="offscreen"?Pd(w,ae,A,G,$):w.renderPass==="translucent"&&ly(w,A,G,N,$))}z.viewport.set([0,0,w.width,w.height])}else w.renderPass==="offscreen"?function(G,ae,oe,se){let he=G.context,ve=he.gl,me=G.transform,ge=Dt.disabled,be=new xr([ve.ONE,ve.ONE],o.b7.transparent,[!0,!0,!0,!0]);(function(ye,Ie,Ne){let qe=ye.gl;ye.activeTexture.set(qe.TEXTURE1),ye.viewport.set([0,0,Ie.width/4,Ie.height/4]);let Re=Ne.heatmapFbos.get(o.bW);Re?(qe.bindTexture(qe.TEXTURE_2D,Re.colorAttachment.get()),ye.bindFramebuffer.set(Re.framebuffer)):(Re=Md(ye,Ie.width/4,Ie.height/4),Ne.heatmapFbos.set(o.bW,Re))})(he,G,oe),he.clear({color:o.b7.transparent});for(let ye=0;ye<se.length;ye++){let Ie=se[ye];if(ae.hasRenderableParent(Ie))continue;let Ne=ae.getTile(Ie),qe=Ne.getBucket(oe);if(!qe)continue;let Re=qe.programConfigurations.get(oe.id),Oe=G.useProgram("heatmap",Re),Qe=me.getProjectionData({overscaledTileID:Ie,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Xe=me.getCircleRadiusCorrection();Oe.draw(he,ve.TRIANGLES,Mt.disabled,ge,be,Yt.backCCW,du(Ne,me.zoom,oe.paint.get("heatmap-intensity"),Xe),null,Qe,oe.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,oe.paint,me.zoom,Re)}he.viewport.set([0,0,G.width,G.height])}(w,C,A,O):w.renderPass==="translucent"&&function(G,ae){let oe=G.context,se=oe.gl;oe.setColorMode(G.colorModeForRenderPass());let he=ae.heatmapFbos.get(o.bW);he&&(oe.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,he.colorAttachment.get()),oe.activeTexture.set(se.TEXTURE1),uy(oe,ae).bind(se.LINEAR,se.CLAMP_TO_EDGE),G.useProgram("heatmapTexture").draw(oe,se.TRIANGLES,Mt.disabled,Dt.disabled,G.colorModeForRenderPass(),Yt.disabled,p1(G,ae,0,1),null,null,ae.id,G.viewportBuffer,G.quadTriangleIndexBuffer,G.viewportSegments,ae.paint,G.transform.zoom))}(w,A)}(a,l,p,d,y):o.c6(p)?function(w,C,A,O,D){if(w.renderPass!=="translucent")return;let{isRenderingToTexture:z}=D,N=A.paint.get("line-opacity"),$=A.paint.get("line-width");if(N.constantOr(1)===0||$.constantOr(1)===0)return;let G=w.getDepthModeForSublayer(0,Mt.ReadOnly),ae=w.colorModeForRenderPass(),oe=A.paint.get("line-dasharray"),se=A.paint.get("line-pattern"),he=se.constantOr(1),ve=A.paint.get("line-gradient"),me=A.getCrossfadeParameters(),ge=he?"linePattern":oe?"lineSDF":ve?"lineGradient":"line",be=w.context,ye=be.gl,Ie=w.transform,Ne=!0;for(let qe of O){let Re=C.getTile(qe);if(he&&!Re.patternsLoaded())continue;let Oe=Re.getBucket(A);if(!Oe)continue;let Qe=Oe.programConfigurations.get(A.id),Xe=w.context.program.get(),Ge=w.useProgram(ge,Qe),ut=Ne||Ge.program!==Xe,kt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(qe),Xt=se.constantOr(null);if(Xt&&Re.imageAtlas){let Pr=Re.imageAtlas,ur=Pr.patternPositions[Xt.to.toString()],Nn=Pr.patternPositions[Xt.from.toString()];ur&&Nn&&Qe.setConstantPatternPositions(ur,Nn)}let $r=Ie.getProjectionData({overscaledTileID:qe,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),Sr=Ie.getPixelScale(),Gr=he?g1(w,Re,A,Sr,me):oe?y1(w,Re,A,Sr,oe,me):ve?v1(w,Re,A,Sr,Oe.lineClipsArray.length):Tf(w,Re,A,Sr);if(he)be.activeTexture.set(ye.TEXTURE0),Re.imageAtlasTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),Qe.updatePaintBuffers(me);else if(oe&&(ut||w.lineAtlas.dirty))be.activeTexture.set(ye.TEXTURE0),w.lineAtlas.bind(be);else if(ve){let Pr=Oe.gradients[A.id],ur=Pr.texture;if(A.gradientVersion!==Pr.version){let Nn=256;if(A.stepInterpolant){let Wn=C.getSource().maxzoom,ui=qe.canonical.z===Wn?Math.ceil(1<<w.transform.maxZoom-qe.canonical.z):1;Nn=o.ae(o.bX(Oe.maxLineLength/o.Z*1024*ui),256,be.maxTextureSize)}Pr.gradient=o.bY({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:Nn,image:Pr.gradient||void 0,clips:Oe.lineClipsArray}),Pr.texture?Pr.texture.update(Pr.gradient):Pr.texture=new Le(be,Pr.gradient,ye.RGBA),Pr.version=A.gradientVersion,ur=Pr.texture}be.activeTexture.set(ye.TEXTURE0),ur.bind(A.stepInterpolant?ye.NEAREST:ye.LINEAR,ye.CLAMP_TO_EDGE)}let Zr=w.stencilModeForClipping(qe);Ge.draw(be,ye.TRIANGLES,G,Zr,ae,Yt.disabled,Gr,kt,$r,A.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,A.paint,w.transform.zoom,Qe,Oe.layoutVertexBuffer2),Ne=!1}}(a,l,p,d,y):o.c7(p)?function(w,C,A,O,D){let z=A.paint.get("fill-color"),N=A.paint.get("fill-opacity");if(N.constantOr(1)===0)return;let{isRenderingToTexture:$}=D,G=w.colorModeForRenderPass(),ae=A.paint.get("fill-pattern"),oe=w.opaquePassEnabledForLayer()&&!ae.constantOr(1)&&z.constantOr(o.b7.transparent).a===1&&N.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===oe){let se=w.getDepthModeForSublayer(1,w.renderPass==="opaque"?Mt.ReadWrite:Mt.ReadOnly);Mf(w,C,A,O,se,G,!1,$)}if(w.renderPass==="translucent"&&A.paint.get("fill-antialias")){let se=w.getDepthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,Mt.ReadOnly);Mf(w,C,A,O,se,G,!0,$)}}(a,l,p,d,y):o.c8(p)?function(w,C,A,O,D){let z=A.paint.get("fill-extrusion-opacity");if(z===0)return;let{isRenderingToTexture:N}=D;if(w.renderPass==="translucent"){let $=new Mt(w.context.gl.LEQUAL,Mt.ReadWrite,w.depthRangeFor3D);if(z!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))Af(w,C,A,O,$,Dt.disabled,xr.disabled,N),Af(w,C,A,O,$,w.stencilModeFor3D(),w.colorModeForRenderPass(),N);else{let G=w.colorModeForRenderPass();Af(w,C,A,O,$,Dt.disabled,G,N)}}}(a,l,p,d,y):o.c9(p)?function(w,C,A,O,D){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;let{isRenderingToTexture:z}=D,N=w.context,$=w.style.projection.useSubdivision,G=w.getDepthModeForSublayer(0,Mt.ReadOnly),ae=w.colorModeForRenderPass();if(w.renderPass==="offscreen")(function(oe,se,he,ve,me,ge,be){let ye=oe.context,Ie=ye.gl;for(let Ne of he){let qe=se.getTile(Ne),Re=qe.dem;if(!Re||!Re.data||!qe.needsHillshadePrepare)continue;let Oe=Re.dim,Qe=Re.stride,Xe=Re.getPixels();if(ye.activeTexture.set(Ie.TEXTURE1),ye.pixelStoreUnpackPremultiplyAlpha.set(!1),qe.demTexture=qe.demTexture||oe.getTileTexture(Qe),qe.demTexture){let ut=qe.demTexture;ut.update(Xe,{premultiply:!1}),ut.bind(Ie.NEAREST,Ie.CLAMP_TO_EDGE)}else qe.demTexture=new Le(ye,Xe,Ie.RGBA,{premultiply:!1}),qe.demTexture.bind(Ie.NEAREST,Ie.CLAMP_TO_EDGE);ye.activeTexture.set(Ie.TEXTURE0);let Ge=qe.fbo;if(!Ge){let ut=new Le(ye,{width:Oe,height:Oe,data:null},Ie.RGBA);ut.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE),Ge=qe.fbo=ye.createFramebuffer(Oe,Oe,!0,!1),Ge.colorAttachment.set(ut.texture)}ye.bindFramebuffer.set(Ge.framebuffer),ye.viewport.set([0,0,Oe,Oe]),oe.useProgram("hillshadePrepare").draw(ye,Ie.TRIANGLES,me,ge,be,Yt.disabled,eA(qe.tileID,Re),null,null,ve.id,oe.rasterBoundsBuffer,oe.quadTriangleIndexBuffer,oe.rasterBoundsSegments),qe.needsHillshadePrepare=!1}})(w,C,O,A,G,Dt.disabled,ae),N.viewport.set([0,0,w.width,w.height]);else if(w.renderPass==="translucent")if($){let[oe,se,he]=w.stencilConfigForOverlapTwoPass(O);cy(w,C,A,he,oe,G,ae,!1,z),cy(w,C,A,he,se,G,ae,!0,z)}else{let[oe,se]=w.getStencilConfigForOverlapAndUpdateStencilID(O);cy(w,C,A,se,oe,G,ae,!1,z)}}(a,l,p,d,y):o.ca(p)?function(w,C,A,O,D){if(w.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!O.length)return;let{isRenderingToTexture:z}=D,N=C.getSource(),$=w.style.projection.useSubdivision;if(N instanceof oi)Ad(w,C,A,O,null,!1,!1,N.tileCoords,N.flippedWindingOrder,z);else if($){let[G,ae,oe]=w.stencilConfigForOverlapTwoPass(O);Ad(w,C,A,oe,G,!1,!0,qf,!1,z),Ad(w,C,A,oe,ae,!0,!0,qf,!1,z)}else{let[G,ae]=w.getStencilConfigForOverlapAndUpdateStencilID(O);Ad(w,C,A,ae,G,!1,!0,qf,!1,z)}}(a,l,p,d,y):o.cb(p)?function(w,C,A,O,D){let z=A.paint.get("background-color"),N=A.paint.get("background-opacity");if(N===0)return;let{isRenderingToTexture:$}=D,G=w.context,ae=G.gl,oe=w.style.projection,se=w.transform,he=se.tileSize,ve=A.paint.get("background-pattern");if(w.isPatternMissing(ve))return;let me=!ve&&z.a===1&&N===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==me)return;let ge=Dt.disabled,be=w.getDepthModeForSublayer(0,me==="opaque"?Mt.ReadWrite:Mt.ReadOnly),ye=w.colorModeForRenderPass(),Ie=w.useProgram(ve?"backgroundPattern":"background"),Ne=O||we(se,{tileSize:he,terrain:w.style.map.terrain});ve&&(G.activeTexture.set(ae.TEXTURE0),w.imageManager.bind(w.context));let qe=A.getCrossfadeParameters();for(let Re of Ne){let Oe=se.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),Qe=ve?rA(N,w,ve,{tileID:Re,tileSize:he},qe):tA(N,z),Xe=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Re),Ge=oe.getMeshFromTileID(G,Re.canonical,!1,!0,"raster");Ie.draw(G,ae.TRIANGLES,be,ge,ye,Yt.backCCW,Qe,Xe,Oe,A.id,Ge.vertexBuffer,Ge.indexBuffer,Ge.segments)}}(a,0,p,d,y):o.cc(p)&&function(w,C,A,O){let{isRenderingGlobe:D}=O,z=w.context,N=A.implementation,$=w.style.projection,G=w.transform,ae=G.getProjectionDataForCustomLayer(D),oe={farZ:G.farZ,nearZ:G.nearZ,fov:G.fov*Math.PI/180,modelViewProjectionMatrix:G.modelViewProjectionMatrix,projectionMatrix:G.projectionMatrix,shaderData:{variantName:$.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${$.shaderPreludeCode.vertexSource}`,define:$.shaderDefine},defaultProjectionData:ae},se=N.renderingMode?N.renderingMode:"2d";if(w.renderPass==="offscreen"){let he=N.prerender;he&&(w.setCustomLayerDefaults(),z.setColorMode(w.colorModeForRenderPass()),he.call(N,z.gl,oe),z.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),z.setColorMode(w.colorModeForRenderPass()),z.setStencilMode(Dt.disabled);let he=se==="3d"?w.getDepthModeFor3D():w.getDepthModeForSublayer(0,Mt.ReadOnly);z.setDepthMode(he),N.render(z.gl,oe),z.setDirty(),w.setBaseState(),z.bindFramebuffer.set(null)}}(a,0,p,y))}saveTileTexture(a){let l=this._tileTextures[a.size[0]];l?l.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){let l=this._tileTextures[a];return l&&l.length>0?l.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;let l=this.imageManager.getPattern(a.from.toString()),p=this.imageManager.getPattern(a.to.toString());return!l||!p}useProgram(a,l,p=!1,d=[]){this.cache=this.cache||{};let y=!!this.style.map.terrain,w=this.style.projection,C=p?Ni.projectionMercator:w.shaderPreludeCode,A=p?uu:w.shaderDefine,O=a+(l?l.cacheKey:"")+`/${p?Kt:w.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(y?"/terrain":"")+(d?`/${d.join("/")}`:"");return this.cache[O]||(this.cache[O]=new hd(this.context,Ni[a],l,w1[a],this._showOverdrawInspector,y,C,A,d)),this.cache[O]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Le(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:a,drawingBufferHeight:l}=this.context.gl;return this.width!==a||this.height!==l}}function Of(g,a){let l,p=!1,d=null,y=null,w=()=>{d=null,p&&(g.apply(y,l),d=setTimeout(w,a),p=!1)};return(...C)=>(p=!0,y=this,l=C,d||w(),d)}class py{constructor(a){this._getCurrentHash=()=>{let l=window.location.hash.replace("#","");if(this._hashName){let p;return l.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(p=d)}),(p&&p[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{let l=this._getCurrentHash();if(!this._isValidHash(l))return!1;let p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:p,pitch:+(l[4]||0)}),!0},this._updateHashUnthrottled=()=>{let l=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,l)},this._removeHash=()=>{let l=this._getCurrentHash();if(l.length===0)return;let p=l.join("/"),d=p;d.split("&").length>0&&(d=d.split("&")[0]),this._hashName&&(d=`${this._hashName}=${p}`);let y=window.location.hash.replace(d,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let w=window.location.href.replace(/(#.+)?$/,y);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=Of(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(a){let l=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,d=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,d),w=Math.round(l.lng*y)/y,C=Math.round(l.lat*y)/y,A=this._map.getBearing(),O=this._map.getPitch(),D="";if(D+=a?`/${w}/${C}/${p}`:`${p}/${C}/${w}`,(A||O)&&(D+="/"+Math.round(10*A)/10),O&&(D+=`/${Math.round(O)}`),this._hashName){let z=this._hashName,N=!1,$=window.location.hash.slice(1).split("&").map(G=>{let ae=G.split("=")[0];return ae===z?(N=!0,`${ae}=${D}`):G}).filter(G=>G);return N||$.push(`${z}=${D}`),`#${$.join("&")}`}return`#${D}`}_isValidHash(a){if(a.length<3||a.some(isNaN))return!1;try{new o.Q(+a[2],+a[1])}catch(y){return!1}let l=+a[0],p=+(a[3]||0),d=+(a[4]||0);return l>=this._map.getMinZoom()&&l<=this._map.getMaxZoom()&&p>=-180&&p<=180&&d>=this._map.getMinPitch()&&d<=this._map.getMaxPitch()}}let Ha={linearity:.3,easing:o.cd(0,0,.3,1)},dy=o.e({deceleration:2500,maxSpeed:1400},Ha),Lf=o.e({deceleration:20,maxSpeed:1400},Ha),my=o.e({deceleration:1e3,maxSpeed:360},Ha),k1=o.e({deceleration:1e3,maxSpeed:90},Ha),N1=o.e({deceleration:1e3,maxSpeed:360},Ha);class F1{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:S.now(),settings:a})}_drainInertiaBuffer(){let a=this._inertiaBuffer,l=S.now();for(;a.length>0&&l-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let l={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:y}of this._inertiaBuffer)l.zoom+=y.zoomDelta||0,l.bearing+=y.bearingDelta||0,l.pitch+=y.pitchDelta||0,l.roll+=y.rollDelta||0,y.panDelta&&l.pan._add(y.panDelta),y.around&&(l.around=y.around),y.pinchAround&&(l.pinchAround=y.pinchAround);let p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,d={};if(l.pan.mag()){let y=Cc(l.pan.mag(),p,o.e({},dy,a||{})),w=l.pan.mult(y.amount/l.pan.mag()),C=this._map.cameraHelper.handlePanInertia(w,this._map.transform);d.center=C.easingCenter,d.offset=C.easingOffset,Ic(d,y)}if(l.zoom){let y=Cc(l.zoom,p,Lf);d.zoom=this._map.transform.zoom+y.amount,Ic(d,y)}if(l.bearing){let y=Cc(l.bearing,p,my);d.bearing=this._map.transform.bearing+o.ae(y.amount,-179,179),Ic(d,y)}if(l.pitch){let y=Cc(l.pitch,p,k1);d.pitch=this._map.transform.pitch+y.amount,Ic(d,y)}if(l.roll){let y=Cc(l.roll,p,N1);d.roll=this._map.transform.roll+o.ae(y.amount,-179,179),Ic(d,y)}if(d.zoom||d.bearing){let y=l.pinchAround===void 0?l.around:l.pinchAround;d.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),o.e(d,{noMoveStart:!0})}}function Ic(g,a){(!g.duration||g.duration<a.duration)&&(g.duration=a.duration,g.easing=a.easing)}function Cc(g,a,l){let{maxSpeed:p,linearity:d,deceleration:y}=l,w=o.ae(g*d/(a/1e3),-p,p),C=Math.abs(w)/(y*d);return{easing:l.easing,duration:1e3*C,amount:w*(C/2)}}class kn extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,l,p,d={}){p=p instanceof MouseEvent?p:new MouseEvent(a,p);let y=P.mousePos(l.getCanvas(),p),w=l.unproject(y);super(a,o.e({point:y,lngLat:w,originalEvent:p},d)),this._defaultPrevented=!1,this.target=l}}class Pc extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,l,p){let d=a==="touchend"?p.changedTouches:p.touches,y=P.touchPos(l.getCanvasContainer(),d),w=y.map(A=>l.unproject(A)),C=y.reduce((A,O,D,z)=>A.add(O.div(z.length)),new o.P(0,0));super(a,{points:y,point:C,lngLats:w,lngLat:l.unproject(C),originalEvent:p}),this._defaultPrevented=!1}}class vy extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,l,p){super(a,{originalEvent:p}),this._defaultPrevented=!1}}class z1{constructor(a,l){this._map=a,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new vy(a.type,this._map,a))}mousedown(a,l){return this._mousedownPos=l,this._firePreventable(new kn(a.type,this._map,a))}mouseup(a){this._map.fire(new kn(a.type,this._map,a))}click(a,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new kn(a.type,this._map,a))}dblclick(a){return this._firePreventable(new kn(a.type,this._map,a))}mouseover(a){this._map.fire(new kn(a.type,this._map,a))}mouseout(a){this._map.fire(new kn(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Pc(a.type,this._map,a))}touchmove(a){this._map.fire(new Pc(a.type,this._map,a))}touchend(a){this._map.fire(new Pc(a.type,this._map,a))}touchcancel(a){this._map.fire(new Pc(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class j1{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new kn(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new kn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new kn(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Mc{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.screenPointToLocation(o.P.convert(a),this._map.terrain)}}class gy{constructor(a,l){this._map=a,this._tr=new Mc(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,l){this.isEnabled()&&a.shiftKey&&a.button===0&&(P.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(a,l){if(!this._active)return;let p=l;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;let d=this._startPos;this._lastPos=p,this._box||(this._box=P.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));let y=Math.min(d.x,p.x),w=Math.max(d.x,p.x),C=Math.min(d.y,p.y),A=Math.max(d.y,p.y);P.setTransform(this._box,`translate(${y}px,${C}px)`),this._box.style.width=w-y+"px",this._box.style.height=A-C+"px"}mouseupWindow(a,l){if(!this._active||a.button!==0)return;let p=this._startPos,d=l;if(this.reset(),P.suppressClick(),p.x!==d.x||p.y!==d.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:a})),{cameraAnimation:y=>y.fitScreenCoordinates(p,d,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,l){return this._map.fire(new o.l(a,{originalEvent:l}))}}function Ld(g,a){if(g.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${a.length}`);let l={};for(let p=0;p<g.length;p++)l[g[p].identifier]=a[p];return l}class B1{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,l,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),p.length===this.numTouches&&(this.centroid=function(d){let y=new o.P(0,0);for(let w of d)y._add(w);return y.div(d.length)}(l),this.touches=Ld(p,l)))}touchmove(a,l,p){if(this.aborted||!this.centroid)return;let d=Ld(p,l);for(let y in this.touches){let w=d[y];(!w||w.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(a,l,p){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){let d=!this.aborted&&this.centroid;if(this.reset(),d)return d}}}class Ac{constructor(a){this.singleTap=new B1(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,l,p){this.singleTap.touchstart(a,l,p)}touchmove(a,l,p){this.singleTap.touchmove(a,l,p)}touchend(a,l,p){let d=this.singleTap.touchend(a,l,p);if(d){let y=a.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(d)<30;if(y&&w||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}}}class U1{constructor(a){this._tr=new Mc(a),this._zoomIn=new Ac({numTouches:1,numTaps:2}),this._zoomOut=new Ac({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,l,p){this._zoomIn.touchstart(a,l,p),this._zoomOut.touchstart(a,l,p)}touchmove(a,l,p){this._zoomIn.touchmove(a,l,p),this._zoomOut.touchmove(a,l,p)}touchend(a,l,p){let d=this._zoomIn.touchend(a,l,p),y=this._zoomOut.touchend(a,l,p),w=this._tr;return d?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(d)},{originalEvent:a})}):y?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(y)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ei{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){let l=this._moveFunction(...a);if(l.bearingDelta||l.pitchDelta||l.rollDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(a,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=Array.isArray(l)?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,l){if(!this.isEnabled())return;let p=this._lastPoint;if(!p)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);let d=Array.isArray(l)?l[0]:l;return!this._moved&&d.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=d,this._move(p,d))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&P.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let Pa={0:1,2:2};class qc{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){let l=P.mouseButton(a);this._eventButton=l}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(l,p){let d=Pa[p];return l.buttons===void 0||(l.buttons&d)!==d}(a,this._eventButton)}isValidEndEvent(a){return P.mouseButton(a)===this._eventButton}}class Ma{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}class Rc{constructor(a=new qc({checkCorrectEvent:()=>!0}),l=new Ma){this.mouseMoveStateManager=a,this.oneFingerTouchMoveStateManager=l}_executeRelevantHandler(a,l,p){return a instanceof MouseEvent?l(a):typeof TouchEvent!="undefined"&&a instanceof TouchEvent?p(a):void 0}startMove(a){this._executeRelevantHandler(a,l=>this.mouseMoveStateManager.startMove(l),l=>this.oneFingerTouchMoveStateManager.startMove(l))}endMove(a){this._executeRelevantHandler(a,l=>this.mouseMoveStateManager.endMove(l),l=>this.oneFingerTouchMoveStateManager.endMove(l))}isValidStartEvent(a){return this._executeRelevantHandler(a,l=>this.mouseMoveStateManager.isValidStartEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidStartEvent(l))}isValidMoveEvent(a){return this._executeRelevantHandler(a,l=>this.mouseMoveStateManager.isValidMoveEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(l))}isValidEndEvent(a){return this._executeRelevantHandler(a,l=>this.mouseMoveStateManager.isValidEndEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidEndEvent(l))}}let Dd=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=a=>{a.preventDefault()}};class hA{constructor(a,l){this._clickTolerance=a.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(a){return a<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(a,l,p){return this._calculateTransform(a,l,p)}touchmove(a,l,p){if(this._active){if(!this._shouldBePrevented(p.length))return a.preventDefault(),this._calculateTransform(a,l,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",a)}}touchend(a,l,p){this._calculateTransform(a,l,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,l,p){p.length>0&&(this._active=!0);let d=Ld(p,l),y=new o.P(0,0),w=new o.P(0,0),C=0;for(let O in d){let D=d[O],z=this._touches[O];z&&(y._add(D),w._add(D.sub(z)),C++,d[O]=D)}if(this._touches=d,this._shouldBePrevented(C)||!w.mag())return;let A=w.div(C);return this._sum._add(A),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(C),panDelta:A}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yy{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,l,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([l[0],l[1]]))}touchmove(a,l,p){if(!this._firstTwoTouches)return;a.preventDefault();let[d,y]=this._firstTwoTouches,w=kd(p,l,d),C=kd(p,l,y);if(!w||!C)return;let A=this._aroundCenter?null:w.add(C).div(2);return this._move([w,C],A,a)}touchend(a,l,p){if(!this._firstTwoTouches)return;let[d,y]=this._firstTwoTouches,w=kd(p,l,d),C=kd(p,l,y);w&&C||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function kd(g,a,l){for(let p=0;p<g.length;p++)if(g[p].identifier===l)return a[p]}function _y(g,a){return Math.log(g/a)/Math.LN2}class Oc extends yy{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,l){let p=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(_y(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:_y(this._distance,p),pinchAround:l}}}function Ka(g,a){return 180*g.angleWith(a)/Math.PI}class st extends yy{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,l,p){let d=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ka(this._vector,d),pinchAround:l}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());let l=25/(Math.PI*this._minDiameter)*360,p=Ka(a,this._startVector);return Math.abs(p)<l}}function Nd(g){return Math.abs(g.y)>Math.abs(g.x)}class Fd extends yy{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,l,p){super.touchstart(a,l,p),this._currentTouchCount=p.length}_start(a){this._lastPoints=a,Nd(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,l,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let d=a[0].sub(this._lastPoints[0]),y=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(d,y,p.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(d.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(a,l,p){if(this._valid!==void 0)return this._valid;let d=a.mag()>=2,y=l.mag()>=2;if(!d&&!y)return;if(!d||!y)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;let w=a.y>0==l.y>0;return Nd(a)&&Nd(l)&&w}}let V1={panStep:100,bearingStep:15,pitchStep:10};class Lc{constructor(a){this._tr=new Mc(a);let l=V1;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let l=0,p=0,d=0,y=0,w=0;switch(a.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:a.shiftKey?p=-1:(a.preventDefault(),y=-1);break;case 39:a.shiftKey?p=1:(a.preventDefault(),y=1);break;case 38:a.shiftKey?d=1:(a.preventDefault(),w=-1);break;case 40:a.shiftKey?d=-1:(a.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(p=0,d=0),{cameraAnimation:C=>{let A=this._tr;C.easeTo({duration:300,easeId:"keyboardHandler",easing:Df,zoom:l?Math.round(A.zoom)+l*(a.shiftKey?2:1):A.zoom,bearing:A.bearing+p*this._bearingStep,pitch:A.pitch+d*this._pitchStep,offset:[-y*this._panStep,-w*this._panStep],center:A.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Df(g){return g*(2-g)}let xy=4.000244140625;class $t{constructor(a,l){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=a,this._tr=new Mc(a),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(a){return!!this._map.cooperativeGestures.isEnabled()&&!(a.ctrlKey||this._map.cooperativeGestures.isBypassed(a))}wheel(a){if(!this.isEnabled())return;if(this._shouldBePrevented(a))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",a);let l=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY,p=S.now(),d=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,l!==0&&l%xy==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(d*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),a.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=a,this._delta-=l,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let l=P.mousePos(this._map.getCanvas(),a),p=this._tr;this._aroundPoint=this._aroundCenter?p.transform.locationToScreenPoint(o.Q.convert(p.center)):l,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let a=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let C=a.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=C),typeof this._targetZoom=="number"&&(this._targetZoom+=C)}if(this._delta!==0){let C=this._type==="wheel"&&Math.abs(this._delta)>xy?this._wheelZoomRate:this._defaultZoomRate,A=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&A!==0&&(A=1/A);let O=typeof this._targetZoom!="number"?a.scale:o.ac(this._targetZoom);this._targetZoom=a.getConstrained(a.getCameraLngLat(),o.ah(O*A)).zoom,this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let l=typeof this._targetZoom!="number"?a.zoom:this._targetZoom,p=this._startZoom,d=this._easing,y,w=!1;if(this._type==="wheel"&&p&&d){let C=S.now()-this._lastWheelEventTime,A=Math.min((C+5)/200,1),O=d(A);y=o.B.number(p,l,O),A<1?this._frameId||(this._frameId=!0):w=!0}else y=l,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=y,{noInertia:!0,needsRenderFrame:!w,zoomDelta:y-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let l=o.cf;if(this._prevEase){let p=this._prevEase,d=(S.now()-p.start)/p.duration,y=p.easing(d+.01)-p.easing(d),w=.27/Math.sqrt(y*y+1e-4)*.01,C=Math.sqrt(.0729-w*w);l=o.cd(w,C,.25,1)}return this._prevEase={start:S.now(),duration:a,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class zd{constructor(a,l){this._clickZoom=a,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class fA{constructor(a){this._tr=new Mc(a),this.reset()}reset(){this._active=!1}dblclick(a,l){return a.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class by{constructor(){this._tap=new Ac({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,l,p){if(!this._swipePoint)if(this._tapTime){let d=l[0],y=a.timeStamp-this._tapTime<500,w=this._tapPoint.dist(d)<30;y&&w?p.length>0&&(this._swipePoint=d,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(a,l,p)}touchmove(a,l,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;let d=l[0],y=d.y-this._swipePoint.y;return this._swipePoint=d,a.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(a,l,p)}touchend(a,l,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{let d=this._tap.touchend(a,l,p);d&&(this._tapTime=a.timeStamp,this._tapPoint=d)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $1{constructor(a,l,p){this._el=a,this._mousePan=l,this._touchPan=p}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class G1{constructor(a,l,p,d){this._pitchWithRotate=a.pitchWithRotate,this._rollEnabled=a.rollEnabled,this._mouseRotate=l,this._mousePitch=p,this._mouseRoll=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class wy{constructor(a,l,p,d){this._el=a,this._touchZoom=l,this._touchRotate=p,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class jd{constructor(a,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=a,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=P.create("div","maplibregl-cooperative-gesture-screen",a);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),d=document.createElement("div");d.className="maplibregl-desktop-message",d.textContent=l,this._container.appendChild(d);let y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=p,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(P.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(a){return a[this._bypassKey]}notifyGestureBlocked(a,l){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:a,originalEvent:l})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let kf=g=>g.zoom||g.drag||g.roll||g.pitch||g.rotate;class pA extends o.l{}function Bd(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta||g.rollDelta}class dA{constructor(a,l){this.handleWindowEvent=d=>{this.handleEvent(d,`${d.type}Window`)},this.handleEvent=(d,y)=>{if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let w=d.type==="renderFrame"?void 0:d,C={needsRenderFrame:!1},A={},O={};for(let{handlerName:N,handler:$,allowed:G}of this._handlers){if(!$.isEnabled())continue;let ae;if(this._blockedByActive(O,G,N))$.reset();else if($[y||d.type]){if(o.cg(d,y||d.type)){let oe=P.mousePos(this._map.getCanvas(),d);ae=$[y||d.type](d,oe)}else if(o.ch(d,y||d.type)){let oe=this._getMapTouches(d.touches),se=P.touchPos(this._map.getCanvas(),oe);ae=$[y||d.type](d,se,oe)}else o.ci(y||d.type)||(ae=$[y||d.type](d));this.mergeHandlerResult(C,A,ae,N,w),ae&&ae.needsRenderFrame&&this._triggerRenderFrame()}(ae||$.isActive())&&(O[N]=$)}let D={};for(let N in this._previousActiveHandlers)O[N]||(D[N]=w);this._previousActiveHandlers=O,(Object.keys(D).length||Bd(C))&&(this._changes.push([C,A,D]),this._triggerRenderFrame()),(Object.keys(O).length||Bd(C))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:z}=C;z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],z(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new F1(a),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);let p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(let[d,y,w]of this._listeners)P.addEventListener(d,y,d===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(let[a,l,p]of this._listeners)P.removeEventListener(a,l,a===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(a){let l=this._map,p=l.getCanvasContainer();this._add("mapEvent",new z1(l,a));let d=l.boxZoom=new gy(l,a);this._add("boxZoom",d),a.interactive&&a.boxZoom&&d.enable();let y=l.cooperativeGestures=new jd(l,a.cooperativeGestures);this._add("cooperativeGestures",y),a.cooperativeGestures&&y.enable();let w=new U1(l),C=new fA(l);l.doubleClickZoom=new zd(C,w),this._add("tapZoom",w),this._add("clickZoom",C),a.interactive&&a.doubleClickZoom&&l.doubleClickZoom.enable();let A=new by;this._add("tapDragZoom",A);let O=l.touchPitch=new Fd(l);this._add("touchPitch",O),a.interactive&&a.touchPitch&&l.touchPitch.enable(a.touchPitch);let D=()=>l.project(l.getCenter()),z=function({enable:me,clickTolerance:ge,aroundCenter:be=!0,minPixelCenterThreshold:ye=100,rotateDegreesPerPixelMoved:Ie=.8},Ne){let qe=new qc({checkCorrectEvent:Re=>P.mouseButton(Re)===0&&Re.ctrlKey||P.mouseButton(Re)===2&&!Re.ctrlKey});return new Ei({clickTolerance:ge,move:(Re,Oe)=>{let Qe=Ne();if(be&&Math.abs(Qe.y-Re.y)>ye)return{bearingDelta:o.ce(new o.P(Re.x,Oe.y),Oe,Qe)};let Xe=(Oe.x-Re.x)*Ie;return be&&Oe.y<Qe.y&&(Xe=-Xe),{bearingDelta:Xe}},moveStateManager:qe,enable:me,assignEvents:Dd})}(a,D),N=function({enable:me,clickTolerance:ge,pitchDegreesPerPixelMoved:be=-.5}){let ye=new qc({checkCorrectEvent:Ie=>P.mouseButton(Ie)===0&&Ie.ctrlKey||P.mouseButton(Ie)===2});return new Ei({clickTolerance:ge,move:(Ie,Ne)=>({pitchDelta:(Ne.y-Ie.y)*be}),moveStateManager:ye,enable:me,assignEvents:Dd})}(a),$=function({enable:me,clickTolerance:ge,rollDegreesPerPixelMoved:be=.3},ye){let Ie=new qc({checkCorrectEvent:Ne=>P.mouseButton(Ne)===2&&Ne.ctrlKey});return new Ei({clickTolerance:ge,move:(Ne,qe)=>{let Re=ye(),Oe=(qe.x-Ne.x)*be;return qe.y<Re.y&&(Oe=-Oe),{rollDelta:Oe}},moveStateManager:Ie,enable:me,assignEvents:Dd})}(a,D);l.dragRotate=new G1(a,z,N,$),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",N,["mouseRotate","mouseRoll"]),this._add("mouseRoll",$,["mousePitch"]),a.interactive&&a.dragRotate&&l.dragRotate.enable();let G=function({enable:me,clickTolerance:ge}){let be=new qc({checkCorrectEvent:ye=>P.mouseButton(ye)===0&&!ye.ctrlKey});return new Ei({clickTolerance:ge,move:(ye,Ie)=>({around:Ie,panDelta:Ie.sub(ye)}),activateOnStart:!0,moveStateManager:be,enable:me,assignEvents:Dd})}(a),ae=new hA(a,l);l.dragPan=new $1(p,G,ae),this._add("mousePan",G),this._add("touchPan",ae,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&l.dragPan.enable(a.dragPan);let oe=new st,se=new Oc;l.touchZoomRotate=new wy(p,se,oe,A),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",se,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&l.touchZoomRotate.enable(a.touchZoomRotate);let he=l.scrollZoom=new $t(l,()=>this._triggerRenderFrame());this._add("scrollZoom",he,["mousePan"]),a.interactive&&a.scrollZoom&&l.scrollZoom.enable(a.scrollZoom);let ve=l.keyboard=new Lc(l);this._add("keyboard",ve),a.interactive&&a.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new j1(l))}_add(a,l,p){this._handlers.push({handlerName:a,handler:l,allowed:p}),this._handlersById[a]=l}stop(a){if(!this._updatingCamera){for(let{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(let{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!kf(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,l,p){for(let d in a)if(d!==p&&(!l||l.indexOf(d)<0))return!0;return!1}_getMapTouches(a){let l=[];for(let p of a)this._el.contains(p.target)&&l.push(p);return l}mergeHandlerResult(a,l,p,d,y){if(!p)return;o.e(a,p);let w={handlerName:d,originalEvent:p.originalEvent||y};p.zoomDelta!==void 0&&(l.zoom=w),p.panDelta!==void 0&&(l.drag=w),p.rollDelta!==void 0&&(l.roll=w),p.pitchDelta!==void 0&&(l.pitch=w),p.bearingDelta!==void 0&&(l.rotate=w)}_applyChanges(){let a={},l={},p={};for(let[d,y,w]of this._changes)d.panDelta&&(a.panDelta=(a.panDelta||new o.P(0,0))._add(d.panDelta)),d.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+d.zoomDelta),d.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+d.bearingDelta),d.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+d.pitchDelta),d.rollDelta&&(a.rollDelta=(a.rollDelta||0)+d.rollDelta),d.around!==void 0&&(a.around=d.around),d.pinchAround!==void 0&&(a.pinchAround=d.pinchAround),d.noInertia&&(a.noInertia=d.noInertia),o.e(l,y),o.e(p,w);this._updateMapTransform(a,l,p),this._changes=[]}_updateMapTransform(a,l,p){let d=this._map,y=d._getTransformForUpdate(),w=d.terrain;if(!(Bd(a)||w&&this._terrainMovement))return this._fireEvents(l,p,!0);d._stop(!0);let{panDelta:C,zoomDelta:A,bearingDelta:O,pitchDelta:D,rollDelta:z,around:N,pinchAround:$}=a;$!==void 0&&(N=$),N=N||d.transform.centerPoint,w&&!y.isPointOnMapSurface(N)&&(N=y.centerPoint);let G={panDelta:C,zoomDelta:A,rollDelta:z,pitchDelta:D,bearingDelta:O,around:N};this._map.cameraHelper.useGlobeControls&&!y.isPointOnMapSurface(N)&&(N=y.centerPoint);let ae=N.distSqr(y.centerPoint)<.01?y.center:y.screenPointToLocation(C?N.sub(C):N);w?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(G,y),this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?y.setCenter(y.screenPointToLocation(y.centerPoint.sub(C))):this._map.cameraHelper.handleMapControlsPan(G,y,ae):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(G,y,ae))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(G,y),this._map.cameraHelper.handleMapControlsPan(G,y,ae)),d._applyUpdatedTransform(y),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(l,p,!0)}_fireEvents(a,l,p){let d=kf(this._eventsInProgress),y=kf(a),w={};for(let z in a){let{originalEvent:N}=a[z];this._eventsInProgress[z]||(w[`${z}start`]=N),this._eventsInProgress[z]=a[z]}!d&&y&&this._fireEvent("movestart",y.originalEvent);for(let z in w)this._fireEvent(z,w[z]);y&&this._fireEvent("move",y.originalEvent);for(let z in a){let{originalEvent:N}=a[z];this._fireEvent(z,N)}let C={},A;for(let z in this._eventsInProgress){let{handlerName:N,originalEvent:$}=this._eventsInProgress[z];this._handlersById[N].isActive()||(delete this._eventsInProgress[z],A=l[N]||$,C[`${z}end`]=A)}for(let z in C)this._fireEvent(z,C[z]);let O=kf(this._eventsInProgress),D=(d||y)&&!O;if(D&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let z=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&z.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(z)}if(p&&D){this._updatingCamera=!0;let z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),N=$=>$!==0&&-this._bearingSnap<$&&$<this._bearingSnap;!z||!z.essential&&S.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:A})),N(this._map.getBearing())&&this._map.resetNorth()):(N(z.bearing||this._map.getBearing())&&(z.bearing=0),z.freezeElevation=!0,this._map.easeTo(z,{originalEvent:A})),this._updatingCamera=!1}}_fireEvent(a,l){this._map.fire(new o.l(a,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new pA("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class mA extends o.E{constructor(a,l,p){super(),this._renderFrameCallback=()=>{let d=Math.min((S.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=p.bearingSnap,this.cameraHelper=l,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(a,l){a.apply(this.transform),this.transform=a,this.cameraHelper=l}getCenter(){return new o.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(a,l){return this.jumpTo({center:a},l)}getCenterElevation(){return this.transform.elevation}setCenterElevation(a,l){return this.jumpTo({elevation:a},l),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(a){this._centerClampedToGround=a}panBy(a,l,p){return a=o.P.convert(a).mult(-1),this.panTo(this.transform.center,o.e({offset:a},l),p)}panTo(a,l,p){return this.easeTo(o.e({center:a},l),p)}getZoom(){return this.transform.zoom}setZoom(a,l){return this.jumpTo({zoom:a},l),this}zoomTo(a,l,p){return this.easeTo(o.e({zoom:a},l),p)}zoomIn(a,l){return this.zoomTo(this.getZoom()+1,a,l),this}zoomOut(a,l){return this.zoomTo(this.getZoom()-1,a,l),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(a,l){return a!=this.transform.fov&&(this.transform.setFov(a),this.fire(new o.l("movestart",l)).fire(new o.l("move",l)).fire(new o.l("moveend",l))),this}getBearing(){return this.transform.bearing}setBearing(a,l){return this.jumpTo({bearing:a},l),this}getPadding(){return this.transform.padding}setPadding(a,l){return this.jumpTo({padding:a},l),this}rotateTo(a,l,p){return this.easeTo(o.e({bearing:a},l),p)}resetNorth(a,l){return this.rotateTo(0,o.e({duration:1e3},a),l),this}resetNorthPitch(a,l){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},a),l),this}snapToNorth(a,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,l):this}getPitch(){return this.transform.pitch}setPitch(a,l){return this.jumpTo({pitch:a},l),this}getRoll(){return this.transform.roll}setRoll(a,l){return this.jumpTo({roll:a},l),this}cameraForBounds(a,l){a=er.convert(a).adjustAntiMeridian();let p=l&&l.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),p,l)}_cameraForBoxAndBearing(a,l,p,d){let y={top:0,bottom:0,right:0,left:0};if(typeof(d=o.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding=="number"){let O=d.padding;d.padding={top:O,bottom:O,right:O,left:O}}let w=o.e(y,d.padding);d.padding=w;let C=this.transform,A=new er(a,l);return this.cameraHelper.cameraForBoxAndBearing(d,w,A,p,C)}fitBounds(a,l,p){return this._fitInternal(this.cameraForBounds(a,l),l,p)}fitScreenCoordinates(a,l,p,d,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(a)),this.transform.screenPointToLocation(o.P.convert(l)),p,d),d,y)}_fitInternal(a,l,p){return a?(delete(l=o.e(a,l)).padding,l.linear?this.easeTo(l,p):this.flyTo(l,p)):this}jumpTo(a,l){this.stop();let p=this._getTransformForUpdate(),d=!1,y=!1,w=!1,C=p.zoom;this.cameraHelper.handleJumpToCenterZoom(p,a);let A=p.zoom!==C;return"elevation"in a&&p.elevation!==+a.elevation&&p.setElevation(+a.elevation),"bearing"in a&&p.bearing!==+a.bearing&&(d=!0,p.setBearing(+a.bearing)),"pitch"in a&&p.pitch!==+a.pitch&&(y=!0,p.setPitch(+a.pitch)),"roll"in a&&p.roll!==+a.roll&&(w=!0,p.setRoll(+a.roll)),a.padding==null||p.isPaddingEqual(a.padding)||p.setPadding(a.padding),this._applyUpdatedTransform(p),this.fire(new o.l("movestart",l)).fire(new o.l("move",l)),A&&this.fire(new o.l("zoomstart",l)).fire(new o.l("zoom",l)).fire(new o.l("zoomend",l)),d&&this.fire(new o.l("rotatestart",l)).fire(new o.l("rotate",l)).fire(new o.l("rotateend",l)),y&&this.fire(new o.l("pitchstart",l)).fire(new o.l("pitch",l)).fire(new o.l("pitchend",l)),w&&this.fire(new o.l("rollstart",l)).fire(new o.l("roll",l)).fire(new o.l("rollend",l)),this.fire(new o.l("moveend",l))}calculateCameraOptionsFromTo(a,l,p,d=0){let y=o.$.fromLngLat(a,l),w=o.$.fromLngLat(p,d),C=w.x-y.x,A=w.y-y.y,O=w.z-y.z,D=Math.hypot(C,A,O);if(D===0)throw new Error("Can't calculate camera options with same From and To");let z=Math.hypot(C,A),N=o.ah(this.transform.cameraToCenterDistance/D/this.transform.tileSize),$=180*Math.atan2(C,-A)/Math.PI,G=180*Math.acos(z/D)/Math.PI;return G=O<0?90-G:90+G,{center:w.toLngLat(),elevation:d,zoom:N,pitch:G,bearing:$}}calculateCameraOptionsFromCameraLngLatAltRotation(a,l,p,d,y){let w=this.transform.calculateCenterFromCameraLngLatAlt(a,l,p,d);return{center:w.center,elevation:w.elevation,zoom:w.zoom,bearing:p,pitch:d,roll:y}}easeTo(a,l){this._stop(!1,a.easeId),((a=o.e({offset:[0,0],duration:500,easing:o.cf},a)).animate===!1||!a.essential&&S.prefersReducedMotion)&&(a.duration=0);let p=this._getTransformForUpdate(),d=this.getBearing(),y=p.pitch,w=p.roll,C="bearing"in a?this._normalizeBearing(a.bearing,d):d,A="pitch"in a?+a.pitch:y,O="roll"in a?this._normalizeBearing(a.roll,w):w,D="padding"in a?a.padding:p.padding,z=o.P.convert(a.offset),N,$;a.around&&(N=o.Q.convert(a.around),$=p.locationToScreenPoint(N));let G={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ae=this.cameraHelper.handleEaseTo(p,{bearing:C,pitch:A,roll:O,padding:D,around:N,aroundPoint:$,offsetAsPoint:z,offset:a.offset,zoom:a.zoom,center:a.center});return this._rotating=this._rotating||d!==C,this._pitching=this._pitching||A!==y,this._rolling=this._rolling||O!==w,this._padding=!p.isPaddingEqual(D),this._zooming=this._zooming||ae.isZooming,this._easeId=a.easeId,this._prepareEase(l,a.noMoveStart,G),this.terrain&&this._prepareElevation(ae.elevationCenter),this._ease(oe=>{ae.easeFunc(oe),this.terrain&&!a.freezeElevation&&this._updateElevation(oe),this._applyUpdatedTransform(p),this._fireMoveEvents(l)},oe=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(l,oe)},a),this}_prepareEase(a,l,p={}){this._moving=!0,l||p.moving||this.fire(new o.l("movestart",a)),this._zooming&&!p.zooming&&this.fire(new o.l("zoomstart",a)),this._rotating&&!p.rotating&&this.fire(new o.l("rotatestart",a)),this._pitching&&!p.pitching&&this.fire(new o.l("pitchstart",a)),this._rolling&&!p.rolling&&this.fire(new o.l("rollstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&l!==this._elevationTarget){let p=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(p-(l-(p*a+this._elevationStart))/(1-a)),this._elevationTarget=l}this.transform.setElevation(o.B.number(this._elevationStart,this._elevationTarget,a))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(a){if(!this.terrain&&a.elevation>=0&&a.pitch<=90)return{};let l=a.getCameraLngLat(),p=a.getCameraAltitude(),d=this.terrain?this.terrain.getElevationForLngLatZoom(l,a.zoom):0;if(p<d){let y=this.calculateCameraOptionsFromTo(l,d,a.center,a.elevation);return{pitch:y.pitch,zoom:y.zoom}}return{}}_applyUpdatedTransform(a){let l=[];if(l.push(d=>this._elevateCameraIfInsideTerrain(d)),this.transformCameraUpdate&&l.push(d=>this.transformCameraUpdate(d)),!l.length)return;let p=a.clone();for(let d of l){let y=p.clone(),{center:w,zoom:C,roll:A,pitch:O,bearing:D,elevation:z}=d(y);w&&y.setCenter(w),z!==void 0&&y.setElevation(z),C!==void 0&&y.setZoom(C),A!==void 0&&y.setRoll(A),O!==void 0&&y.setPitch(O),D!==void 0&&y.setBearing(D),p.apply(y)}this.transform.apply(p)}_fireMoveEvents(a){this.fire(new o.l("move",a)),this._zooming&&this.fire(new o.l("zoom",a)),this._rotating&&this.fire(new o.l("rotate",a)),this._pitching&&this.fire(new o.l("pitch",a)),this._rolling&&this.fire(new o.l("roll",a))}_afterEase(a,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;let p=this._zooming,d=this._rotating,y=this._pitching,w=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,p&&this.fire(new o.l("zoomend",a)),d&&this.fire(new o.l("rotateend",a)),y&&this.fire(new o.l("pitchend",a)),w&&this.fire(new o.l("rollend",a)),this.fire(new o.l("moveend",a))}flyTo(a,l){if(!a.essential&&S.prefersReducedMotion){let Oe=o.O(a,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Oe,l)}this.stop(),a=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cf},a);let p=this._getTransformForUpdate(),d=p.bearing,y=p.pitch,w=p.roll,C=p.padding,A="bearing"in a?this._normalizeBearing(a.bearing,d):d,O="pitch"in a?+a.pitch:y,D="roll"in a?this._normalizeBearing(a.roll,w):w,z="padding"in a?a.padding:p.padding,N=o.P.convert(a.offset),$=p.centerPoint.add(N),G=p.screenPointToLocation($),ae=this.cameraHelper.handleFlyTo(p,{bearing:A,pitch:O,roll:D,padding:z,locationAtOffset:G,offsetAsPoint:N,center:a.center,minZoom:a.minZoom,zoom:a.zoom}),oe=a.curve,se=Math.max(p.width,p.height),he=se/ae.scaleOfZoom,ve=ae.pixelPathLength;typeof ae.scaleOfMinZoom=="number"&&(oe=Math.sqrt(se/ae.scaleOfMinZoom/ve*2));let me=oe*oe;function ge(Oe){let Qe=(he*he-se*se+(Oe?-1:1)*me*me*ve*ve)/(2*(Oe?he:se)*me*ve);return Math.log(Math.sqrt(Qe*Qe+1)-Qe)}function be(Oe){return(Math.exp(Oe)-Math.exp(-Oe))/2}function ye(Oe){return(Math.exp(Oe)+Math.exp(-Oe))/2}let Ie=ge(!1),Ne=function(Oe){return ye(Ie)/ye(Ie+oe*Oe)},qe=function(Oe){return se*((ye(Ie)*(be(Qe=Ie+oe*Oe)/ye(Qe))-be(Ie))/me)/ve;var Qe},Re=(ge(!0)-Ie)/oe;if(Math.abs(ve)<2e-6||!isFinite(Re)){if(Math.abs(se-he)<1e-6)return this.easeTo(a,l);let Oe=he<se?-1:1;Re=Math.abs(Math.log(he/se))/oe,qe=()=>0,Ne=Qe=>Math.exp(Oe*oe*Qe)}return a.duration="duration"in a?+a.duration:1e3*Re/("screenSpeed"in a?+a.screenSpeed/oe:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=d!==A,this._pitching=O!==y,this._rolling=D!==w,this._padding=!p.isPaddingEqual(z),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(ae.targetCenter),this._ease(Oe=>{let Qe=Oe*Re,Xe=1/Ne(Qe),Ge=qe(Qe);this._rotating&&p.setBearing(o.B.number(d,A,Oe)),this._pitching&&p.setPitch(o.B.number(y,O,Oe)),this._rolling&&p.setRoll(o.B.number(w,D,Oe)),this._padding&&(p.interpolatePadding(C,z,Oe),$=p.centerPoint.add(N)),ae.easeFunc(Oe,Xe,Ge,$),this.terrain&&!a.freezeElevation&&this._updateElevation(Oe),this._applyUpdatedTransform(p),this._fireMoveEvents(l)},()=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(l)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,l){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,l)}return a||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(a,l,p){p.animate===!1||p.duration===0?(a(1),l()):(this._easeStart=S.now(),this._easeOptions=p,this._onEaseFrame=a,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,l){a=o.aL(a,-180,180);let p=Math.abs(a-l);return Math.abs(a-360-l)<p&&(a-=360),Math.abs(a+360-l)<p&&(a+=360),a}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(o.Q.convert(a),this.transform.tileZoom):null}}let Rs={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class Or{constructor(a=Rs){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,l){let p=this._map._getUIString(`AttributionControl.${l}`);a.title=p,a.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(d=>typeof d!="string"?"":d)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){let d=this._map.style.stylesheet;this.styleOwner=d.owner,this.styleId=d.id}let l=this._map.style.sourceCaches;for(let d in l){let y=l[d];if(y.used||y.usedForTerrain){let w=y.getSource();w.attribution&&a.indexOf(w.attribution)<0&&a.push(w.attribution)}}a=a.filter(d=>String(d).trim()),a.sort((d,y)=>d.length-y.length),a=a.filter((d,y)=>{for(let w=y+1;w<a.length;w++)if(a[w].indexOf(d)>=0)return!1;return!0});let p=a.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,a.length?(this._innerContainer.innerHTML=P.sanitize(p),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Nf{constructor(a={}){this._updateCompact=()=>{let l=this._container.children;if(l.length){let p=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl");let l=P.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ey{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){let l=++this._id;return this._queue.push({callback:a,id:l,cancelled:!1}),l}remove(a){let l=this._currentlyRunning,p=l?this._queue.concat(l):this._queue;for(let d of p)if(d.id===a)return void(d.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let l=this._currentlyRunning=this._queue;this._queue=[];for(let p of l)if(!p.cancelled&&(p.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Z1=o.aG([{name:"a_pos3d",type:"Int16",components:3}]);class W1 extends o.E{constructor(a){super(),this._lastTilesetChange=S.now(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=a._source.tileSize*vw(2,this.deltaZoom),a.usedForTerrain=!0,a.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,l){this.sourceCache.update(a,l),this._renderableTilesKeys=[];let p={};for(let d of we(a,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))p[d.key]=!0,this._renderableTilesKeys.push(d.key),this._tiles[d.key]||(d.terrainRttPosMatrix32f=new Float64Array(16),o.bQ(d.terrainRttPosMatrix32f,0,o.Z,o.Z,0,0,1),this._tiles[d.key]=new Ho(d,this.tileSize),this._lastTilesetChange=S.now());for(let d in this._tiles)p[d]||delete this._tiles[d]}freeRtt(a){for(let l in this._tiles){let p=this._tiles[l];(!a||p.tileID.equals(a)||p.tileID.isChildOf(a)||a.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a,l){return l?this._getTerrainCoordsForTileRanges(a,l):this._getTerrainCoordsForRegularTile(a)}_getTerrainCoordsForRegularTile(a){let l={};for(let p of this._renderableTilesKeys){let d=this._tiles[p].tileID,y=a.clone(),w=o.b2();if(d.canonical.equals(a.canonical))o.bQ(w,0,o.Z,o.Z,0,0,1);else if(d.canonical.isChildOf(a.canonical)){let C=d.canonical.z-a.canonical.z,A=d.canonical.x-(d.canonical.x>>C<<C),O=d.canonical.y-(d.canonical.y>>C<<C),D=o.Z>>C;o.bQ(w,0,D,D,0,0,1),o.L(w,w,[-A*D,-O*D,0])}else{if(!a.canonical.isChildOf(d.canonical))continue;{let C=a.canonical.z-d.canonical.z,A=a.canonical.x-(a.canonical.x>>C<<C),O=a.canonical.y-(a.canonical.y>>C<<C),D=o.Z>>C;o.bQ(w,0,o.Z,o.Z,0,0,1),o.L(w,w,[A*D,O*D,0]),o.M(w,w,[1/vw(2,C),1/vw(2,C),0])}}y.terrainRttPosMatrix32f=new Float32Array(w),l[p]=y}return l}_getTerrainCoordsForTileRanges(a,l){let p={};for(let d of this._renderableTilesKeys){let y=this._tiles[d].tileID;if(!this._isWithinTileRanges(y,l))continue;let w=a.clone(),C=o.b2();if(y.canonical.z===a.canonical.z){let A=a.canonical.x-y.canonical.x,O=a.canonical.y-y.canonical.y;o.bQ(C,0,o.Z,o.Z,0,0,1),o.L(C,C,[A*o.Z,O*o.Z,0])}else if(y.canonical.z>a.canonical.z){let A=y.canonical.z-a.canonical.z,O=y.canonical.x-(y.canonical.x>>A<<A),D=y.canonical.y-(y.canonical.y>>A<<A),z=a.canonical.x-(y.canonical.x>>A),N=a.canonical.y-(y.canonical.y>>A),$=o.Z>>A;o.bQ(C,0,$,$,0,0,1),o.L(C,C,[-O*$+z*o.Z,-D*$+N*o.Z,0])}else{let A=a.canonical.z-y.canonical.z,O=a.canonical.x-(a.canonical.x>>A<<A),D=a.canonical.y-(a.canonical.y>>A<<A),z=(a.canonical.x>>A)-y.canonical.x,N=(a.canonical.y>>A)-y.canonical.y,$=o.Z<<A;o.bQ(C,0,$,$,0,0,1),o.L(C,C,[O*o.Z+z*$,D*o.Z+N*$,0])}w.terrainRttPosMatrix32f=new Float32Array(C),p[d]=w}return p}getSourceTile(a,l){let p=this.sourceCache._source,d=a.overscaledZ-this.deltaZoom;if(d>p.maxzoom&&(d=p.maxzoom),d<p.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(d).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!y||!y.dem)&&l)for(;d>=p.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(a.scaledTo(d--).key);return y}anyTilesAfterTime(a=Date.now()){return this._lastTilesetChange>=a}_isWithinTileRanges(a,l){return l[a.canonical.z]&&a.canonical.x>=l[a.canonical.z].minTileX&&a.canonical.x<=l[a.canonical.z].maxTileX&&a.canonical.y>=l[a.canonical.z].minTileY&&a.canonical.y<=l[a.canonical.z].maxTileY}}class H1{constructor(a,l,p){this._meshCache={},this.painter=a,this.sourceCache=new W1(l),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,l,p,d=o.Z){var y;if(!(l>=0&&l<d&&p>=0&&p<d))return 0;let w=this.getTerrainData(a),C=(y=w.tile)===null||y===void 0?void 0:y.dem;if(!C)return 0;let A=o.cj([],[l/d*o.Z,p/d*o.Z],w.u_terrain_matrix),O=[A[0]*C.dim,A[1]*C.dim],D=Math.floor(O[0]),z=Math.floor(O[1]),N=O[0]-D,$=O[1]-z;return C.get(D,z)*(1-N)*(1-$)+C.get(D+1,z)*N*(1-$)+C.get(D,z+1)*(1-N)*$+C.get(D+1,z+1)*N*$}getElevationForLngLatZoom(a,l){if(!o.ck(l,a.wrap()))return 0;let{tileID:p,mercatorX:d,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(a,l);return this.getElevation(p,d%o.Z,y%o.Z,o.Z)}getElevation(a,l,p,d=o.Z){return this.getDEMElevation(a,l,p,d)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){let d=this.painter.context,y=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Le(d,y,d.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Le(d,new o.R({width:1,height:1}),d.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ad([])}let l=this.sourceCache.getSourceTile(a,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){let d=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new Le(d,l.dem.getPixels(),d.gl.RGBA,{premultiply:!1}),l.demTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}let p=l&&l+l.tileID.key+a.key;if(p&&!this._demMatrixCache[p]){let d=this.sourceCache.sourceCache._source.maxzoom,y=a.canonical.z-l.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=d?y=a.canonical.z-d:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let w=a.canonical.x-(a.canonical.x>>y<<y),C=a.canonical.y-(a.canonical.y>>y<<y),A=o.cl(new Float64Array(16),[1/(o.Z<<y),1/(o.Z<<y),0]);o.L(A,A,[w*o.Z,C*o.Z,0]),this._demMatrixCache[a.key]={matrix:A,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(a){let l=this.painter,p=l.width/devicePixelRatio,d=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===d||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Le(l.context,{width:p,height:d,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Le(l.context,{width:p,height:d,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(p,d,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,p,d))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,w=0;y<this._coordsTextureSize;y++)for(let C=0;C<this._coordsTextureSize;C++,w+=4)l[w+0]=255&C,l[w+1]=255&y,l[w+2]=C>>8<<4|y>>8,l[w+3]=0;let p=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),d=new Le(a,p,a.gl.RGBA,{premultiply:!1});return d.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=d,d}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);let l=new Uint8Array(4),p=this.painter.context,d=p.gl,y=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),C=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),d.readPixels(y,C-w-1,1,1,d.RGBA,d.UNSIGNED_BYTE,l),p.bindFramebuffer.set(null);let A=l[0]+(l[2]>>4<<8),O=l[1]+((15&l[2])<<8),D=this.coordsIndex[255-l[3]],z=D&&this.sourceCache.getTileByID(D);if(!z)return null;let N=this._coordsTextureSize,$=(1<<z.tileID.canonical.z)*N;return new o.$((z.tileID.canonical.x*N+A)/$+z.tileID.wrap,(z.tileID.canonical.y*N+O)/$,this.getElevation(z.tileID,A,O,N))}depthAtPoint(a){let l=new Uint8Array(4),p=this.painter.context,d=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),d.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,d.RGBA,d.UNSIGNED_BYTE,l),p.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(a){var l;let p=((l=this.painter.style.projection)===null||l===void 0?void 0:l.transitionState)>0,d=p&&a.canonical.y===0,y=p&&a.canonical.y===(1<<a.canonical.z)-1,w=`m_${d?"n":""}_${y?"s":""}`;if(this._meshCache[w])return this._meshCache[w];let C=this.painter.context,A=new o.cm,O=new o.aK,D=this.meshSize,z=o.Z/D,N=D*D;for(let ye=0;ye<=D;ye++)for(let Ie=0;Ie<=D;Ie++)A.emplaceBack(Ie*z,ye*z,0);for(let ye=0;ye<N;ye+=D+1)for(let Ie=0;Ie<D;Ie++)O.emplaceBack(Ie+ye,D+Ie+ye+1,D+Ie+ye+2),O.emplaceBack(Ie+ye,D+Ie+ye+2,Ie+ye+1);let $=A.length,G=$+(D+1),ae=(D+1)*D,oe=d?o.b9:0,se=d?0:1,he=y?o.ba:o.Z,ve=y?0:1;for(let ye=0;ye<=D;ye++)A.emplaceBack(ye*z,oe,se);for(let ye=0;ye<=D;ye++)A.emplaceBack(ye*z,he,ve);for(let ye=0;ye<D;ye++)O.emplaceBack(ae+ye,G+ye,G+ye+1),O.emplaceBack(ae+ye,G+ye+1,ae+ye+1),O.emplaceBack(0+ye,$+ye+1,$+ye),O.emplaceBack(0+ye,0+ye+1,$+ye+1);let me=A.length,ge=me+2*(D+1);for(let ye of[0,1])for(let Ie=0;Ie<=D;Ie++)for(let Ne of[0,1])A.emplaceBack(ye*o.Z,Ie*z,Ne);for(let ye=0;ye<2*D;ye+=2)O.emplaceBack(me+ye,me+ye+1,me+ye+3),O.emplaceBack(me+ye,me+ye+3,me+ye+2),O.emplaceBack(ge+ye,ge+ye+3,ge+ye+1),O.emplaceBack(ge+ye,ge+ye+2,ge+ye+3);let be=new vc(C.createVertexBuffer(A,Z1.members),C.createIndexBuffer(O),o.aJ.simpleSegment(0,0,A.length,O.length));return this._meshCache[w]=be,be}getMeshFrameDelta(a){return 2*Math.PI*o.bu/Math.pow(2,Math.max(a,0))/5}getMinTileElevationForLngLatZoom(a,l){var p;let{tileID:d}=this._getOverscaledTileIDFromLngLatZoom(a,l);return(p=this.getMinMaxElevation(d).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(a){let l=this.getTerrainData(a).tile,p={minElevation:null,maxElevation:null};return l&&l.dem&&(p.minElevation=l.dem.min*this.exaggeration,p.maxElevation=l.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(a,l){let p=o.$.fromLngLat(a.wrap()),d=(1<<l)*o.Z,y=p.x*d,w=p.y*d,C=Math.floor(y/o.Z),A=Math.floor(w/o.Z);return{tileID:new o.Y(l,0,l,C,A),mercatorX:y,mercatorY:w}}}class vA{constructor(a,l,p){this._context=a,this._size=l,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){let l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new Le(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(p.texture),{id:a,fbo:l,texture:p,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>a.id!==l),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(let l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(let a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}let ji={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Ud{constructor(a,l){this.painter=a,this.terrain=l,this.pool=new vA(a.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(p=>!a._layers[p].isHidden(l)),this._coordsAscending={};for(let p in a.sourceCaches){this._coordsAscending[p]={};let d=a.sourceCaches[p].getVisibleCoordinates(),y=a.sourceCaches[p].getSource(),w=y instanceof oi?y.terrainTileRanges:null;for(let C of d){let A=this.terrain.sourceCache.getTerrainCoords(C,w);for(let O in A)this._coordsAscending[p][O]||(this._coordsAscending[p][O]=[]),this._coordsAscending[p][O].push(A[O])}}this._coordsAscendingStr={};for(let p of a._order){let d=a._layers[p],y=d.source;if(ji[d.type]&&!this._coordsAscendingStr[y]){this._coordsAscendingStr[y]={};for(let w in this._coordsAscending[y])this._coordsAscendingStr[y][w]=this._coordsAscending[y][w].map(C=>C.key).sort().join()}}for(let p of this._renderableTiles)for(let d in this._coordsAscendingStr){let y=this._coordsAscendingStr[d][p.tileID.key];y&&y!==p.rttCoords[d]&&(p.rtt=[])}}renderLayer(a,l){if(a.isHidden(this.painter.transform.zoom))return!1;let p=Object.assign(Object.assign({},l),{isRenderingToTexture:!0}),d=a.type,y=this.painter,w=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(ji[d]&&(this._prevType&&ji[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(a.id),!w))return!0;if(ji[this._prevType]||ji[d]&&w){this._prevType=d;let C=this._stacks.length-1,A=this._stacks[C]||[];for(let O of this._renderableTiles){if(this.pool.isFull()&&(cl(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(O),O.rtt[C]){let z=this.pool.getObjectForId(O.rtt[C].id);if(z.stamp===O.rtt[C].stamp){this.pool.useObject(z);continue}}let D=this.pool.getOrCreateFreeObject();this.pool.useObject(D),this.pool.stampObject(D),O.rtt[C]={id:D.id,stamp:D.stamp},y.context.bindFramebuffer.set(D.fbo.framebuffer),y.context.clear({color:o.b7.transparent,stencil:0}),y.currentStencilSource=void 0;for(let z=0;z<A.length;z++){let N=y.style._layers[A[z]],$=N.source?this._coordsAscending[N.source][O.tileID.key]:[O.tileID];y.context.viewport.set([0,0,D.fbo.width,D.fbo.height]),y._renderTileClippingMasks(N,$,!0),y.renderLayer(y,y.style.sourceCaches[N.source],N,$,p),N.source&&(O.rttCoords[N.source]=this._coordsAscendingStr[N.source][O.tileID.key])}}return cl(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects(),ji[d]}return!1}}let ht={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},_t=f,Ff={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Rs,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Ty={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Sy{constructor(a,l,p=!1){this.mousedown=y=>{this.startMove(y,P.mousePos(this.element,y)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=y=>{this.move(y,P.mousePos(this.element,y))},this.mouseup=y=>{this._rotatePitchHanlder.dragEnd(y),this.offTemp()},this.touchstart=y=>{y.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,y.targetTouches)[0],this.startMove(y,this._startPos),P.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.addEventListener(window,"touchend",this.touchend))},this.touchmove=y=>{y.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,y.targetTouches)[0],this.move(y,this._lastPos))},this.touchend=y=>{y.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=l;let d=new Rc;this._rotatePitchHanlder=new Ei({clickTolerance:3,move:(y,w)=>{let C=l.getBoundingClientRect(),A=new o.P((C.bottom-C.top)/2,(C.right-C.left)/2);return{bearingDelta:o.ce(new o.P(y.x,w.y),w,A),pitchDelta:p?-.5*(w.y-y.y):void 0}},moveStateManager:d,enable:!0,assignEvents:()=>{}}),this.map=a,P.addEventListener(l,"mousedown",this.mousedown),P.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(l,"touchcancel",this.reset)}startMove(a,l){this._rotatePitchHanlder.dragStart(a,l),P.disableDrag()}move(a,l){let p=this.map,{bearingDelta:d,pitchDelta:y}=this._rotatePitchHanlder.dragMove(a,l)||{};d&&p.setBearing(p.getBearing()+d),y&&p.setPitch(p.getPitch()+y)}off(){let a=this.element;P.removeEventListener(a,"mousedown",this.mousedown),P.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend),P.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend)}}let En;function Iy(g,a,l,p=!1){if(p||!l.getCoveringTilesDetailsProvider().allowWorldCopies())return g==null?void 0:g.wrap();let d=new o.Q(g.lng,g.lat);if(g=new o.Q(g.lng,g.lat),a){let y=new o.Q(g.lng-360,g.lat),w=new o.Q(g.lng+360,g.lat),C=l.locationToScreenPoint(g).distSqr(a);l.locationToScreenPoint(y).distSqr(a)<C?g=y:l.locationToScreenPoint(w).distSqr(a)<C&&(g=w)}for(;Math.abs(g.lng-l.center.lng)>180;){let y=l.locationToScreenPoint(g);if(y.x>=0&&y.y>=0&&y.x<=l.width&&y.y<=l.height)break;g.lng>l.center.lng?g.lng-=360:g.lng+=360}return g.lng!==d.lng&&l.isPointOnMapSurface(l.locationToScreenPoint(g))?g:d}let Qo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function K1(g,a,l){let p=g.classList;for(let d in Qo)p.remove(`maplibregl-${l}-anchor-${d}`);p.add(`maplibregl-${l}-anchor-${a}`)}class yu extends o.E{constructor(a){if(super(),this._onKeyPress=l=>{let p=l.code,d=l.charCode||l.keyCode;p!=="Space"&&p!=="Enter"&&d!==32&&d!==13||this.togglePopup()},this._onMapClick=l=>{let p=l.originalEvent.target,d=this._element;this._popup&&(p===d||d.contains(p))&&this.togglePopup()},this._update=l=>{if(!this._map)return;let p=this._map.loaded()&&!this._map.isMoving();((l==null?void 0:l.type)==="terrain"||(l==null?void 0:l.type)==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=Iy(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let d="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?d=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(d=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?y="rotateX(0deg)":this._pitchAlignment==="map"&&(y=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||l&&l.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${Qo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${y} ${d}`),S.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){let p=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._subpixelPositioning=a&&a.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(a==null?void 0:a.opacity,a==null?void 0:a.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=o.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div");let l=P.createNS("http://www.w3.org/2000/svg","svg"),p=41,d=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${p}px`),l.setAttributeNS(null,"width",`${d}px`),l.setAttributeNS(null,"viewBox",`0 0 ${d} ${p}`);let y=P.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");let w=P.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");let C=P.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");let A=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let se of A){let he=P.createNS("http://www.w3.org/2000/svg","ellipse");he.setAttributeNS(null,"opacity","0.04"),he.setAttributeNS(null,"cx","10.5"),he.setAttributeNS(null,"cy","5.80029008"),he.setAttributeNS(null,"rx",se.rx),he.setAttributeNS(null,"ry",se.ry),C.appendChild(he)}let O=P.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill",this._color);let D=P.createNS("http://www.w3.org/2000/svg","path");D.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),O.appendChild(D);let z=P.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"opacity","0.25"),z.setAttributeNS(null,"fill","#000000");let N=P.createNS("http://www.w3.org/2000/svg","path");N.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),z.appendChild(N);let $=P.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"transform","translate(6.0, 7.0)"),$.setAttributeNS(null,"fill","#FFFFFF");let G=P.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(8.0, 8.0)");let ae=P.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#000000"),ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962");let oe=P.createNS("http://www.w3.org/2000/svg","circle");oe.setAttributeNS(null,"fill","#FFFFFF"),oe.setAttributeNS(null,"cx","5.5"),oe.setAttributeNS(null,"cy","5.5"),oe.setAttributeNS(null,"r","5.4999962"),G.appendChild(ae),G.appendChild(oe),w.appendChild(C),w.appendChild(O),w.appendChild(z),w.appendChild($),w.appendChild(G),l.appendChild(w),l.setAttributeNS(null,"height",p*this._scale+"px"),l.setAttributeNS(null,"width",d*this._scale+"px"),this._element.appendChild(l),this._offset=o.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),K1(this._element,this._anchor,"marker"),a&&a.className)for(let l of a.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(a){return this.remove(),this._map=a,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",a._getUIString("Marker.Title")),a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),a.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=o.Q.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){let d=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(38.1-13.5+d)],"bottom-right":[-d,-1*(38.1-13.5+d)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(a){return this._subpixelPositioning=a,this}getPopup(){return this._popup}togglePopup(){let a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var l,p;let d=(l=this._map)===null||l===void 0?void 0:l.terrain,y=this._map.transform.isLocationOccluded(this._lngLat);if(!d||y){let $=y?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==$&&(this._element.style.opacity=$))}if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let w=this._map,C=w.terrain.depthAtPoint(this._pos),A=w.terrain.getElevationForLngLatZoom(this._lngLat,w.transform.tileZoom);if(w.transform.lngLatToCameraDepth(this._lngLat,A)-C<.006)return void(this._element.style.opacity=this._opacity);let O=-this._offset.y/w.transform.pixelsPerMeter,D=Math.sin(w.getPitch()*Math.PI/180)*O,z=w.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),N=w.transform.lngLatToCameraDepth(this._lngLat,A+D)-z>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&N&&this._popup.remove(),this._element.style.opacity=N?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=o.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,l){return(this._opacity===void 0||a===void 0&&l===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),a!==void 0&&(this._opacity=a),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}let nn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Vr=0,Dc=!1,zf={maxWidth:100,unit:"metric"};function jf(g,a,l){let p=l&&l.maxWidth||100,d=g._container.clientHeight/2,y=g._container.clientWidth/2,w=g.unproject([y-p/2,d]),C=g.unproject([y+p/2,d]),A=Math.round(g.project(C).x-g.project(w).x),O=Math.min(p,A,g._container.clientWidth),D=w.distanceTo(C);if(l&&l.unit==="imperial"){let z=3.2808*D;z>5280?_u(a,O,z/5280,g._getUIString("ScaleControl.Miles")):_u(a,O,z,g._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?_u(a,O,D/1852,g._getUIString("ScaleControl.NauticalMiles")):D>=1e3?_u(a,O,D/1e3,g._getUIString("ScaleControl.Kilometers")):_u(a,O,D,g._getUIString("ScaleControl.Meters"))}function _u(g,a,l,p){let d=function(y){let w=Math.pow(10,`${Math.floor(y)}`.length-1),C=y/w;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(A){let O=Math.pow(10,Math.ceil(-Math.log(A)/Math.LN10));return Math.round(A*O)/O}(C),w*C}(l);g.style.width=a*(d/l)+"px",g.innerHTML=`${d}&nbsp;${p}`}let Cy={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Py=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function kc(g){if(g){if(typeof g=="number"){let a=Math.round(Math.abs(g)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,g),"top-left":new o.P(a,a),"top-right":new o.P(-a,a),bottom:new o.P(0,-g),"bottom-left":new o.P(a,-a),"bottom-right":new o.P(-a,-a),left:new o.P(g,0),right:new o.P(-g,0)}}if(g instanceof o.P||Array.isArray(g)){let a=o.P.convert(g);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:o.P.convert(g.center||[0,0]),top:o.P.convert(g.top||[0,0]),"top-left":o.P.convert(g["top-left"]||[0,0]),"top-right":o.P.convert(g["top-right"]||[0,0]),bottom:o.P.convert(g.bottom||[0,0]),"bottom-left":o.P.convert(g["bottom-left"]||[0,0]),"bottom-right":o.P.convert(g["bottom-right"]||[0,0]),left:o.P.convert(g.left||[0,0]),right:o.P.convert(g.right||[0,0])}}return kc(new o.P(0,0))}let My=f;i.AJAXError=o.cq,i.Event=o.l,i.Evented=o.E,i.LngLat=o.Q,i.MercatorCoordinate=o.$,i.Point=o.P,i.addProtocol=o.cr,i.config=o.a,i.removeProtocol=o.cs,i.AttributionControl=Or,i.BoxZoomHandler=gy,i.CanvasSource=Zo,i.CooperativeGesturesHandler=jd,i.DoubleClickZoomHandler=zd,i.DragPanHandler=$1,i.DragRotateHandler=G1,i.EdgeInsets=df,i.FullscreenControl=class extends o.E{constructor(g={}){super(),this._onFullscreenChange=()=>{var a;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((a=l==null?void 0:l.shadowRoot)===null||a===void 0)&&a.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let g=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},i.GeoJSONSource=al,i.GeolocateControl=class extends o.E{constructor(g){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",a)),this._finish()}},this._updateCamera=a=>{let l=new o.Q(a.coords.longitude,a.coords.latitude),p=a.coords.accuracy,d=this._map.getBearing(),y=o.e({bearing:d},this.options.fitBoundsOptions),w=er.fromLngLat(l,p);this._map.fitBounds(w,y,{geolocateSource:!0})},this._updateMarker=a=>{if(a){let l=new o.Q(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=a=>{if(this._map){if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&Dc)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=a=>{if(this._map){if(a===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");let l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{let l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new yu({element:this._dotElement}),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new yu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},nn,g)}onAdd(g){return this._map=g,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(a=!1){if(En!==void 0&&!a)return En;if(window.navigator.permissions===void 0)return En=!!window.navigator.geolocation,En;try{En=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(l){En=!!window.navigator.geolocation}return En})}().then(a=>this._finishSetupUI(a)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Vr=0,Dc=!1}_isOutOfMapMaxBounds(g){let a=this._map.getMaxBounds(),l=g.coords;return a&&(l.longitude<a.getWest()||l.longitude>a.getEast()||l.latitude<a.getSouth()||l.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){let g=this._map.getBounds(),a=g.getSouthEast(),l=g.getNorthEast(),p=a.distanceTo(l),d=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Vr--,Dc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Vr++,Vr>1?(g={maximumAge:6e5,timeout:0},Dc=!0):(g=this.options.positionOptions,Dc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},i.GlobeControl=class{constructor(){this._toggleProjection=()=>{var g;let a=(g=this._map.getProjection())===null||g===void 0?void 0:g.type;this._map.setProjection(a!=="mercator"&&a?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var g;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((g=this._map.getProjection())===null||g===void 0?void 0:g.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(g){return this._map=g,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=P.create("button","maplibregl-ctrl-globe",this._container),P.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},i.Hash=py,i.ImageSource=oi,i.KeyboardHandler=Lc,i.LngLatBounds=er,i.LogoControl=Nf,i.Map=class extends mA{constructor(g){var a,l;o.cn.mark(o.co.create);let p=Object.assign(Object.assign(Object.assign({},Ff),g),{canvasContextAttributes:Object.assign(Object.assign({},Ff.canvasContextAttributes),g.canvasContextAttributes)});if(p.minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let d=new yc,y=new mf;if(p.minZoom!==void 0&&d.setMinZoom(p.minZoom),p.maxZoom!==void 0&&d.setMaxZoom(p.maxZoom),p.minPitch!==void 0&&d.setMinPitch(p.minPitch),p.maxPitch!==void 0&&d.setMaxPitch(p.maxPitch),p.renderWorldCopies!==void 0&&d.setRenderWorldCopies(p.renderWorldCopies),super(d,y,{bearingSnap:p.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ey,this._controls=[],this._mapId=o.a4(),this._contextLost=C=>{C.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:C}))},this._contextRestored=C=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:C}))},this._onMapScroll=C=>{if(C.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._maxTileCacheZoomLevels=p.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},p.canvasContextAttributes),this._trackResize=p.trackResize===!0,this._bearingSnap=p.bearingSnap,this._centerClampedToGround=p.centerClampedToGround,this._refreshExpiredTiles=p.refreshExpiredTiles===!0,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions===!0,this._collectResourceTiming=p.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},ht),p.locale),this._clickTolerance=p.clickTolerance,this._overridePixelRatio=p.pixelRatio,this._maxCanvasSize=p.maxCanvasSize,this.transformCameraUpdate=p.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=p.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Q.addThrottleControl(()=>this.isMoving()),this._requestManager=new le(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let C=!1,A=Of(O=>{this._trackResize&&!this._removed&&(this.resize(O),this.redraw())},50);this._resizeObserver=new ResizeObserver(O=>{C?A(O):C=!0}),this._resizeObserver.observe(this._container)}this.handlers=new dA(this,p),this._hash=p.hash&&new py(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,elevation:p.elevation,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,roll:p.roll}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,o.e({},p.fitBoundsOptions,{duration:0}))));let w=typeof p.style=="string"||((l=(a=p.style)===null||a===void 0?void 0:a.projection)===null||l===void 0?void 0:l.type)!=="globe";this.resize(null,w),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new Or(typeof p.attributionControl=="boolean"?void 0:p.attributionControl)),p.maplibreLogo&&this.addControl(new Nf,p.logoPosition),this.on("style.load",()=>{if(w||this._resizeTransform(),this.transform.unmodified){let C=o.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(C)}}),this.on("data",C=>{this._update(C.dataType==="style"),this.fire(new o.l(`${C.dataType}data`,C))}),this.on("dataloading",C=>{this.fire(new o.l(`${C.dataType}dataloading`,C))}),this.on("dataabort",C=>{this.fire(new o.l("sourcedataabort",C))})}_getMapId(){return this._mapId}addControl(g,a){if(a===void 0&&(a=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let l=g.onAdd(this);this._controls.push(g);let p=this._controlPositions[a];return a.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let a=this._controls.indexOf(g);return a>-1&&this._controls.splice(a,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,a,l,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(g,a,l,p)}resize(g,a=!0){let[l,p]=this._containerDimensions(),d=this._getClampedPixelRatio(l,p);if(this._resizeCanvas(l,p,d),this.painter.resize(l,p,d),this.painter.overLimit()){let w=this.painter.context.gl;this._maxCanvasSize=[w.drawingBufferWidth,w.drawingBufferHeight];let C=this._getClampedPixelRatio(l,p);this._resizeCanvas(l,p,C),this.painter.resize(l,p,C)}this._resizeTransform(a);let y=!this._moving;return y&&(this.stop(),this.fire(new o.l("movestart",g)).fire(new o.l("move",g))),this.fire(new o.l("resize",g)),y&&this.fire(new o.l("moveend",g)),this}_resizeTransform(g=!0){var a;let[l,p]=this._containerDimensions();this.transform.resize(l,p,g),(a=this._requestedCameraState)===null||a===void 0||a.resize(l,p,g)}_getClampedPixelRatio(g,a){let{0:l,1:p}=this._maxCanvasSize,d=this.getPixelRatio(),y=g*d,w=a*d;return Math.min(y>l?l/y:1,w>p?p/w:1)*d}getPixelRatio(){var g;return(g=this._overridePixelRatio)!==null&&g!==void 0?g:devicePixelRatio}setPixelRatio(g){this._overridePixelRatio=g,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(er.convert(g)),this._update()}setMinZoom(g){if((g=g==null?-2:g)>=-2&&g<=this.transform.maxZoom)return this.transform.setMinZoom(g),this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g==null?22:g)>=this.transform.minZoom)return this.transform.setMaxZoom(g),this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g==null?0:g)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.setMinPitch(g),this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g==null?60:g)>180)throw new Error("maxPitch must be less than or equal to 180");if(g>=this.transform.minPitch)return this.transform.setMaxPitch(g),this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.setRenderWorldCopies(g),this._update()}project(g){return this.transform.locationToScreenPoint(o.Q.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.screenPointToLocation(o.P.convert(g),this.terrain)}isMoving(){var g;return this._moving||((g=this.handlers)===null||g===void 0?void 0:g.isMoving())}isZooming(){var g;return this._zooming||((g=this.handlers)===null||g===void 0?void 0:g.isZooming())}isRotating(){var g;return this._rotating||((g=this.handlers)===null||g===void 0?void 0:g.isRotating())}_createDelegatedListener(g,a,l){if(g==="mouseenter"||g==="mouseover"){let p=!1;return{layers:a,listener:l,delegates:{mousemove:y=>{let w=a.filter(A=>this.getLayer(A)),C=w.length!==0?this.queryRenderedFeatures(y.point,{layers:w}):[];C.length?p||(p=!0,l.call(this,new kn(g,this,y.originalEvent,{features:C}))):p=!1},mouseout:()=>{p=!1}}}}if(g==="mouseleave"||g==="mouseout"){let p=!1;return{layers:a,listener:l,delegates:{mousemove:w=>{let C=a.filter(A=>this.getLayer(A));(C.length!==0?this.queryRenderedFeatures(w.point,{layers:C}):[]).length?p=!0:p&&(p=!1,l.call(this,new kn(g,this,w.originalEvent)))},mouseout:w=>{p&&(p=!1,l.call(this,new kn(g,this,w.originalEvent)))}}}}{let p=d=>{let y=a.filter(C=>this.getLayer(C)),w=y.length!==0?this.queryRenderedFeatures(d.point,{layers:y}):[];w.length&&(d.features=w,l.call(this,d),delete d.features)};return{layers:a,listener:l,delegates:{[g]:p}}}}_saveDelegatedListener(g,a){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(a)}_removeDelegatedListener(g,a,l){if(!this._delegatedListeners||!this._delegatedListeners[g])return;let p=this._delegatedListeners[g];for(let d=0;d<p.length;d++){let y=p[d];if(y.listener===l&&y.layers.length===a.length&&y.layers.every(w=>a.includes(w))){for(let w in y.delegates)this.off(w,y.delegates[w]);return void p.splice(d,1)}}}on(g,a,l){if(l===void 0)return super.on(g,a);let p=typeof a=="string"?[a]:a,d=this._createDelegatedListener(g,p,l);this._saveDelegatedListener(g,d);for(let y in d.delegates)this.on(y,d.delegates[y]);return{unsubscribe:()=>{this._removeDelegatedListener(g,p,l)}}}once(g,a,l){if(l===void 0)return super.once(g,a);let p=typeof a=="string"?[a]:a,d=this._createDelegatedListener(g,p,l);for(let y in d.delegates){let w=d.delegates[y];d.delegates[y]=(...C)=>{this._removeDelegatedListener(g,p,l),w(...C)}}this._saveDelegatedListener(g,d);for(let y in d.delegates)this.once(y,d.delegates[y]);return this}off(g,a,l){return l===void 0?super.off(g,a):(this._removeDelegatedListener(g,typeof a=="string"?[a]:a,l),this)}queryRenderedFeatures(g,a){if(!this.style)return[];let l,p=g instanceof o.P||Array.isArray(g),d=p?g:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(p?{}:g)||{},d instanceof o.P||typeof d[0]=="number")l=[o.P.convert(d)];else{let y=o.P.convert(d[0]),w=o.P.convert(d[1]);l=[y,new o.P(w.x,y.y),w,new o.P(y.x,w.y),y]}return this.style.queryRenderedFeatures(l,a,this.transform)}querySourceFeatures(g,a){return this.style.querySourceFeatures(g,a)}setStyle(g,a){return(a=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(g,a))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){let a=this._locale[g];if(a==null)throw new Error(`Missing UI string '${g}'`);return a}_updateStyle(g,a){var l,p;if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(g,a));let d=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new Kg(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g,a,d):this.style.loadJSON(g,a,d),this):((p=(l=this.style)===null||l===void 0?void 0:l.projection)===null||p===void 0||p.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Kg(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,a){if(typeof g=="string"){let l=this._requestManager.transformRequest(g,"Style");o.j(l,new AbortController).then(p=>{this._updateDiff(p.data,a)}).catch(p=>{p&&this.fire(new o.k(p))})}else typeof g=="object"&&this._updateDiff(g,a)}_updateDiff(g,a){try{this.style.setState(g,a)&&this._update(!0)}catch(l){o.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(g,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(g,a){return this._lazyInitEmptyStyle(),this.style.addSource(g,a),this._update(!0)}isSourceLoaded(g){let a=this.style&&this.style.sourceCaches[g];if(a!==void 0)return a.loaded();this.fire(new o.k(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){let a=this.style.sourceCaches[g.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);this.terrain===null&&a.reload();for(let l in this.style._layers){let p=this.style._layers[l];p.type==="hillshade"&&p.source===g.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new H1(this.painter,a,g),this.painter.renderToTexture=new Ud(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=l=>{var p;l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==g.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((p=l.source)===null||p===void 0?void 0:p.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:g})),this}getTerrain(){var g,a;return(a=(g=this.terrain)===null||g===void 0?void 0:g.options)!==null&&a!==void 0?a:null}areTilesLoaded(){let g=this.style&&this.style.sourceCaches;for(let a in g){let l=g[a]._tiles;for(let p in l){let d=l[p];if(d.state!=="loaded"&&d.state!=="errored")return!1}}return!0}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}setSourceTileLodParams(g,a,l){if(l){let p=this.getSource(l);if(!p)throw new Error(`There is no source with ID "${l}", cannot set LOD parameters`);p.calculateTileZoom=xe(Math.max(1,g),Math.max(1,a))}else for(let p in this.style.sourceCaches)this.style.sourceCaches[p].getSource().calculateTileZoom=xe(Math.max(1,g),Math.max(1,a));return this._update(!0),this}refreshTiles(g,a){let l=this.style.sourceCaches[g];if(!l)throw new Error(`There is no source cache with ID "${g}", cannot refresh tile`);a===void 0?l.reload():l.refreshTiles(a.map(p=>new o.a1(p.z,p.x,p.y)))}addImage(g,a,l={}){let{pixelRatio:p=1,sdf:d=!1,stretchX:y,stretchY:w,content:C,textFitWidth:A,textFitHeight:O}=l;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||o.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:D,height:z,data:N}=a,$=a;return this.style.addImage(g,{data:new o.R({width:D,height:z},new Uint8Array(N)),pixelRatio:p,stretchX:y,stretchY:w,content:C,textFitWidth:A,textFitHeight:O,sdf:d,version:0,userImage:$}),$.onAdd&&$.onAdd(this,g),this}}{let{width:D,height:z,data:N}=S.getImageData(a);this.style.addImage(g,{data:new o.R({width:D,height:z},N),pixelRatio:p,stretchX:y,stretchY:w,content:C,textFitWidth:A,textFitHeight:O,sdf:d,version:0})}}updateImage(g,a){let l=this.style.getImage(g);if(!l)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let p=a instanceof HTMLImageElement||o.b(a)?S.getImageData(a):a,{width:d,height:y,data:w}=p;if(d===void 0||y===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(d!==l.data.width||y!==l.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let C=!(a instanceof HTMLImageElement||o.b(a));return l.data.replace(w,C),this.style.updateImage(g,l),this}getImage(g){return this.style.getImage(g)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g){return Q.getImage(this._requestManager.transformRequest(g,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(g,a){return this._lazyInitEmptyStyle(),this.style.addLayer(g,a),this._update(!0)}moveLayer(g,a){return this.style.moveLayer(g,a),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(g,a,l){return this.style.setLayerZoomRange(g,a,l),this._update(!0)}setFilter(g,a,l={}){return this.style.setFilter(g,a,l),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,a,l,p={}){return this.style.setPaintProperty(g,a,l,p),this._update(!0)}getPaintProperty(g,a){return this.style.getPaintProperty(g,a)}setLayoutProperty(g,a,l,p={}){return this.style.setLayoutProperty(g,a,l,p),this._update(!0)}getLayoutProperty(g,a){return this.style.getLayoutProperty(g,a)}setGlyphs(g,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,a,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,a,l,p=>{p||this._update(!0)}),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,a,l=>{l||this._update(!0)}),this}setLight(g,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,a),this._update(!0)}getLight(){return this.style.getLight()}setSky(g,a={}){return this._lazyInitEmptyStyle(),this.style.setSky(g,a),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(g,a){return this.style.setFeatureState(g,a),this._update()}removeFeatureState(g,a){return this.style.removeFeatureState(g,a),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,a=0;return this._container&&(g=this._container.clientWidth||400,a=this._container.clientHeight||300),[g,a]}_setupContainer(){let g=this._container;g.classList.add("maplibregl-map");let a=this._canvasContainer=P.create("div","maplibregl-canvas-container",g);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let l=this._containerDimensions(),p=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],p);let d=this._controlContainer=P.create("div","maplibregl-control-container",g),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{y[w]=P.create("div",`maplibregl-ctrl-${w} `,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,a,l){this._canvas.width=Math.floor(l*g),this._canvas.height=Math.floor(l*a),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${a}px`}_setupPainter(){let g=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),a=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{a={requestedAttributes:g},p&&(a.statusMessage=p.statusMessage,a.type=p.type)},{once:!0});let l=null;if(l=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,g):this._canvas.getContext("webgl2",g)||this._canvas.getContext("webgl",g),!l){let p="Failed to initialize WebGL";throw a?(a.message=p,new Error(JSON.stringify(a))):new Error(p)}this.painter=new fy(l,this.transform),q.testSupport(l)}migrateProjection(g,a){super.migrateProjection(g,a),this.painter.transform=g,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){var a,l,p,d,y;let w=this._idleTriggered?this._fadeDuration:0,C=((a=this.style.projection)===null||a===void 0?void 0:a.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let A=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let z=this.transform.zoom,N=S.now();this.style.zoomHistory.update(z,N);let $=new o.C(z,{now:N,fadeDuration:w,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),G=$.crossFadingFactor();G===1&&G===this._crossFadingFactor||(A=!0,this._crossFadingFactor=G),this.style.update($)}let O=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0!==C;(p=this.style.projection)===null||p===void 0||p.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((d=this.style.projection)===null||d===void 0?void 0:d.transitionState,(y=this.style.projection)===null||y===void 0?void 0:y.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||O)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,w,this._crossSourceCollisions,O),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:w,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cn.mark(o.co.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||A)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let D=this._sourcesDirty||this._styleDirty||this._placementDirty;return D||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||D||(this._fullyLoaded=!0,o.cn.mark(o.co.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var g;this._hash&&this._hash.remove();for(let l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),Q.removeThrottleControl(this._imageQueueHandle),(g=this._resizeObserver)===null||g===void 0||g.disconnect();let a=this.painter.context.gl.getExtension("WEBGL_lose_context");a!=null&&a.loseContext&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cn.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,S.frame(this._frameRequest,g=>{o.cn.frame(g),this._frameRequest=null;try{this._render(g)}catch(a){if(!o.cp(a)&&!function(l){return l.message===Td}(a))throw a}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return _t}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(g){return this._lazyInitEmptyStyle(),this.style.setProjection(g),this._update(!0)}},i.MapMouseEvent=kn,i.MapTouchEvent=Pc,i.MapWheelEvent=vy,i.Marker=yu,i.NavigationControl=class{constructor(g){this._updateZoomButtons=()=>{let a=this._map.getZoom(),l=a===this._map.getMaxZoom(),p=a===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(a,l)=>{let p=this._map._getUIString(`NavigationControl.${l}`);a.title=p,a.setAttribute("aria-label",p)},this.options=o.e({},Ty,g),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),P.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),P.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=P.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Sy(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,a){let l=P.create("button",g,this._container);return l.type="button",l.addEventListener("click",a),l}},i.Popup=class extends o.E{constructor(g){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=P.create("div","maplibregl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let w of this.options.className.split(" "))this._container.classList.add(w);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Iy(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!a)return;let l=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationToScreenPoint(this._lngLat));let p=this.options.anchor,d=kc(this.options.offset);if(!p){let w=this._container.offsetWidth,C=this._container.offsetHeight,A;A=l.y+d.bottom.y<C?["top"]:l.y>this._map.transform.height-C?["bottom"]:[],l.x<w/2?A.push("left"):l.x>this._map.transform.width-w/2&&A.push("right"),p=A.length===0?"bottom":A.join("-")}let y=l.add(d[p]);this.options.subpixelPositioning||(y=y.round()),P.setTransform(this._container,`${Qo[p]} translate(${y.x}px,${y.y}px)`),K1(this._container,p,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Cy),g)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=o.Q.convert(g),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){let a=document.createDocumentFragment(),l=document.createElement("body"),p;for(l.innerHTML=g;p=l.firstChild,p;)a.appendChild(p);return this.setDOMContent(a)}getMaxWidth(){var g;return(g=this._container)===null||g===void 0?void 0:g.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){return this._container&&this._container.classList.add(g),this}removeClassName(g){return this._container&&this._container.classList.remove(g),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}setSubpixelPositioning(g){this.options.subpixelPositioning=g}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let g=this._container.querySelector(Py);g&&g.focus()}},i.RasterDEMTileSource=ol,i.RasterTileSource=ki,i.ScaleControl=class{constructor(g){this._onMove=()=>{jf(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,jf(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},zf),g)}getDefaultPosition(){return"bottom-left"}onAdd(g){return this._map=g,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},i.ScrollZoomHandler=$t,i.Style=Kg,i.TerrainControl=class{constructor(g){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=g}onAdd(g){return this._map=g,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},i.TwoFingersTouchPitchHandler=Fd,i.TwoFingersTouchRotateHandler=st,i.TwoFingersTouchZoomHandler=Oc,i.TwoFingersTouchZoomRotateHandler=wy,i.VectorTileSource=$a,i.VideoSource=Co,i.addSourceType=(g,a)=>o._(void 0,void 0,void 0,function*(){if(Wo(g))throw new Error(`A source type called "${g}" already exists.`);((l,p)=>{Is[l]=p})(g,a)}),i.clearPrewarmedResources=function(){let g=Un;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(oo),Un=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},i.createTileMesh=vf,i.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},i.getRTLTextPluginStatus=function(){return Ca().getRTLTextPluginStatus()},i.getVersion=function(){return My},i.getWorkerCount=function(){return un.workerCount},i.getWorkerUrl=function(){return o.a.WORKER_URL},i.importScriptInWorkers=function(g){return _i().broadcast("IS",g)},i.prewarm=function(){Vn().acquire(oo)},i.setMaxParallelImageRequests=function(g){o.a.MAX_PARALLEL_IMAGE_REQUESTS=g},i.setRTLTextPlugin=function(g,a){return Ca().setRTLTextPlugin(g,a)},i.setWorkerCount=function(g){un.workerCount=g},i.setWorkerUrl=function(g){o.a.WORKER_URL=g}});var n=e;return n})});var Gbe=I((Osr,$be)=>{var t4=1/0,C2t=17976931348623157e292,kbe=NaN,P2t="[object Symbol]",M2t=/^\s+|\s+$/g,A2t=/^[-+]0x[0-9a-f]+$/i,q2t=/^0b[01]+$/i,R2t=/^0o[0-7]+$/i,O2t=parseInt,L2t=typeof global=="object"&&global&&global.Object===Object&&global,D2t=typeof self=="object"&&self&&self.Object===Object&&self,k2t=L2t||D2t||Function("return this")(),N2t=Object.prototype,F2t=N2t.toString,Nbe=k2t.Symbol,z2t=Math.min,Fbe=Nbe?Nbe.prototype:void 0,zbe=Fbe?Fbe.toString:void 0;function j2t(e){if(typeof e=="string")return e;if(Ube(e))return zbe?zbe.call(e):"";var t=e+"";return t=="0"&&1/e==-t4?"-0":t}function B2t(e){var t=Math[e];return function(r,n){if(r=Vbe(r),n=z2t($2t(n),292),n){var i=(Bbe(r)+"e").split("e"),o=t(i[0]+"e"+(+i[1]+n));return i=(Bbe(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return t(r)}}function jbe(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function U2t(e){return!!e&&typeof e=="object"}function Ube(e){return typeof e=="symbol"||U2t(e)&&F2t.call(e)==P2t}function V2t(e){if(!e)return e===0?e:0;if(e=Vbe(e),e===t4||e===-t4){var t=e<0?-1:1;return t*C2t}return e===e?e:0}function $2t(e){var t=V2t(e),r=t%1;return t===t?r?t-r:t:0}function Vbe(e){if(typeof e=="number")return e;if(Ube(e))return kbe;if(jbe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=jbe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(M2t,"");var r=q2t.test(e);return r||R2t.test(e)?O2t(e.slice(2),r?2:8):A2t.test(e)?kbe:+e}function Bbe(e){return e==null?"":j2t(e)}var G2t=B2t("round");$be.exports=G2t});var M1e=I((Ylr,P1e)=>{"use strict";var pRt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";P1e.exports=pRt});var O1e=I((Xlr,R1e)=>{"use strict";var dRt=M1e();function A1e(){}function q1e(){}q1e.resetWarningCache=A1e;R1e.exports=function(){function e(n,i,o,f,v,x){if(x!==dRt){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:q1e,resetWarningCache:A1e};return r.PropTypes=r,r}});var Nr=I((eur,L1e)=>{L1e.exports=O1e()();var Qlr,Jlr});var xg=I((a0r,pTe)=>{var lDt=pTe.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=lDt)});var Ql=I((s0r,dTe)=>{var uDt=dTe.exports={version:"2.6.12"};typeof __e=="number"&&(__e=uDt)});var vTe=I((l0r,mTe)=>{mTe.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}});var sP=I((u0r,gTe)=>{var cDt=vTe();gTe.exports=function(e,t,r){if(cDt(e),t===void 0)return e;switch(r){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}});var Ab=I((c0r,yTe)=>{yTe.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}});var bg=I((h0r,_Te)=>{var hDt=Ab();_Te.exports=function(e){if(!hDt(e))throw TypeError(e+" is not an object!");return e}});var lP=I((f0r,xTe)=>{xTe.exports=function(e){try{return!!e()}catch(t){return!0}}});var ef=I((p0r,bTe)=>{bTe.exports=!lP()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var eU=I((d0r,ETe)=>{var wTe=Ab(),J4=xg().document,fDt=wTe(J4)&&wTe(J4.createElement);ETe.exports=function(e){return fDt?J4.createElement(e):{}}});var tU=I((m0r,TTe)=>{TTe.exports=!ef()&&!lP()(function(){return Object.defineProperty(eU()("div"),"a",{get:function(){return 7}}).a!=7})});var rU=I((v0r,STe)=>{var uP=Ab();STe.exports=function(e,t){if(!uP(e))return e;var r,n;if(t&&typeof(r=e.toString)=="function"&&!uP(n=r.call(e))||typeof(r=e.valueOf)=="function"&&!uP(n=r.call(e))||!t&&typeof(r=e.toString)=="function"&&!uP(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}});var qb=I(CTe=>{var ITe=bg(),pDt=tU(),dDt=rU(),mDt=Object.defineProperty;CTe.f=ef()?Object.defineProperty:function(t,r,n){if(ITe(t),r=dDt(r,!0),ITe(n),pDt)try{return mDt(t,r,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[r]=n.value),t}});var Rb=I((y0r,PTe)=>{PTe.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var Ob=I((_0r,MTe)=>{var vDt=qb(),gDt=Rb();MTe.exports=ef()?function(e,t,r){return vDt.f(e,t,gDt(1,r))}:function(e,t,r){return e[t]=r,e}});var wg=I((x0r,ATe)=>{var yDt={}.hasOwnProperty;ATe.exports=function(e,t){return yDt.call(e,t)}});var tf=I((b0r,RTe)=>{var cP=xg(),nU=Ql(),qTe=sP(),_Dt=Ob(),xDt=wg(),hP="prototype",Eo=function(e,t,r){var n=e&Eo.F,i=e&Eo.G,o=e&Eo.S,f=e&Eo.P,v=e&Eo.B,x=e&Eo.W,E=i?nU:nU[t]||(nU[t]={}),S=E[hP],P=i?cP:o?cP[t]:(cP[t]||{})[hP],q,F,K;i&&(r=t);for(q in r)F=!n&&P&&P[q]!==void 0,!(F&&xDt(E,q))&&(K=F?P[q]:r[q],E[q]=i&&typeof P[q]!="function"?r[q]:v&&F?qTe(K,cP):x&&P[q]==K?function(ne){var Z=function(W,Q,le){if(this instanceof ne){switch(arguments.length){case 0:return new ne;case 1:return new ne(W);case 2:return new ne(W,Q)}return new ne(W,Q,le)}return ne.apply(this,arguments)};return Z[hP]=ne[hP],Z}(K):f&&typeof K=="function"?qTe(Function.call,K):K,f&&((E.virtual||(E.virtual={}))[q]=K,e&Eo.R&&S&&!S[q]&&_Dt(S,q,K)))};Eo.F=1;Eo.G=2;Eo.S=4;Eo.P=8;Eo.B=16;Eo.W=32;Eo.U=64;Eo.R=128;RTe.exports=Eo});var iU=I((w0r,OTe)=>{var bDt={}.toString;OTe.exports=function(e){return bDt.call(e).slice(8,-1)}});var oU=I((E0r,LTe)=>{var wDt=iU();LTe.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return wDt(e)=="String"?e.split(""):Object(e)}});var fP=I((T0r,DTe)=>{DTe.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}});var Lb=I((S0r,kTe)=>{var EDt=oU(),TDt=fP();kTe.exports=function(e){return EDt(TDt(e))}});var pP=I((I0r,NTe)=>{var SDt=Math.ceil,IDt=Math.floor;NTe.exports=function(e){return isNaN(e=+e)?0:(e>0?IDt:SDt)(e)}});var aU=I((C0r,FTe)=>{var CDt=pP(),PDt=Math.min;FTe.exports=function(e){return e>0?PDt(CDt(e),9007199254740991):0}});var jTe=I((P0r,zTe)=>{var MDt=pP(),ADt=Math.max,qDt=Math.min;zTe.exports=function(e,t){return e=MDt(e),e<0?ADt(e+t,0):qDt(e,t)}});var UTe=I((M0r,BTe)=>{var RDt=Lb(),ODt=aU(),LDt=jTe();BTe.exports=function(e){return function(t,r,n){var i=RDt(t),o=ODt(i.length),f=LDt(n,o),v;if(e&&r!=r){for(;o>f;)if(v=i[f++],v!=v)return!0}else for(;o>f;f++)if((e||f in i)&&i[f]===r)return e||f||0;return!e&&-1}}});var sU=I((A0r,VTe)=>{VTe.exports=!0});var lU=I((q0r,WTe)=>{var DDt=Ql(),$Te=xg(),GTe="__core-js_shared__",ZTe=$Te[GTe]||($Te[GTe]={});(WTe.exports=function(e,t){return ZTe[e]||(ZTe[e]=t!==void 0?t:{})})("versions",[]).push({version:DDt.version,mode:sU()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var uU=I((R0r,HTe)=>{var kDt=0,NDt=Math.random();HTe.exports=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++kDt+NDt).toString(36))}});var dP=I((O0r,YTe)=>{var KTe=lU()("keys"),FDt=uU();YTe.exports=function(e){return KTe[e]||(KTe[e]=FDt(e))}});var JTe=I((L0r,QTe)=>{var XTe=wg(),zDt=Lb(),jDt=UTe()(!1),BDt=dP()("IE_PROTO");QTe.exports=function(e,t){var r=zDt(e),n=0,i=[],o;for(o in r)o!=BDt&&XTe(r,o)&&i.push(o);for(;t.length>n;)XTe(r,o=t[n++])&&(~jDt(i,o)||i.push(o));return i}});var cU=I((D0r,eSe)=>{eSe.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var mP=I((k0r,tSe)=>{var UDt=JTe(),VDt=cU();tSe.exports=Object.keys||function(t){return UDt(t,VDt)}});var nSe=I(rSe=>{rSe.f=Object.getOwnPropertySymbols});var vP=I(iSe=>{iSe.f={}.propertyIsEnumerable});var gP=I((z0r,oSe)=>{var $Dt=fP();oSe.exports=function(e){return Object($Dt(e))}});var lSe=I((j0r,sSe)=>{"use strict";var GDt=ef(),aSe=mP(),ZDt=nSe(),WDt=vP(),HDt=gP(),KDt=oU(),yP=Object.assign;sSe.exports=!yP||lP()(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(i){t[i]=i}),yP({},e)[r]!=7||Object.keys(yP({},t)).join("")!=n})?function(t,r){for(var n=HDt(t),i=arguments.length,o=1,f=ZDt.f,v=WDt.f;i>o;)for(var x=KDt(arguments[o++]),E=f?aSe(x).concat(f(x)):aSe(x),S=E.length,P=0,q;S>P;)q=E[P++],(!GDt||v.call(x,q))&&(n[q]=x[q]);return n}:yP});var uSe=I(()=>{var hU=tf();hU(hU.S+hU.F,"Object",{assign:lSe()})});var hSe=I((V0r,cSe)=>{uSe();cSe.exports=Ql().Object.assign});var pSe=I((G0r,fSe)=>{var YDt=qb(),XDt=bg(),QDt=mP();fSe.exports=ef()?Object.defineProperties:function(t,r){XDt(t);for(var n=QDt(r),i=n.length,o=0,f;i>o;)YDt.f(t,f=n[o++],r[f]);return t}});var vSe=I((Z0r,mSe)=>{var dSe=xg().document;mSe.exports=dSe&&dSe.documentElement});var mU=I((W0r,ySe)=>{var JDt=bg(),ekt=pSe(),gSe=cU(),tkt=dP()("IE_PROTO"),pU=function(){},dU="prototype",_P=function(){var e=eU()("iframe"),t=gSe.length,r="<",n=">",i;for(e.style.display="none",vSe().appendChild(e),e.src="javascript:",i=e.contentWindow.document,i.open(),i.write(r+"script"+n+"document.F=Object"+r+"/script"+n),i.close(),_P=i.F;t--;)delete _P[dU][gSe[t]];return _P()};ySe.exports=Object.create||function(t,r){var n;return t!==null?(pU[dU]=JDt(t),n=new pU,pU[dU]=null,n[tkt]=t):n=_P(),r===void 0?n:ekt(n,r)}});var xSe=I(()=>{var _Se=tf();_Se(_Se.S,"Object",{create:mU()})});var wSe=I((Y0r,bSe)=>{xSe();var rkt=Ql().Object;bSe.exports=function(t,r){return rkt.create(t,r)}});var SSe=I(TSe=>{var nkt=vP(),ikt=Rb(),okt=Lb(),akt=rU(),skt=wg(),lkt=tU(),ESe=Object.getOwnPropertyDescriptor;TSe.f=ef()?ESe:function(t,r){if(t=okt(t),r=akt(r,!0),lkt)try{return ESe(t,r)}catch(n){}if(skt(t,r))return ikt(!nkt.f.call(t,r),t[r])}});var PSe=I((Q0r,CSe)=>{var ukt=Ab(),ckt=bg(),ISe=function(e,t){if(ckt(e),!ukt(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};CSe.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=sP()(Function.call,SSe().f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(n){t=!0}return function(i,o){return ISe(i,o),t?i.__proto__=o:r(i,o),i}}({},!1):void 0),check:ISe}});var ASe=I(()=>{var MSe=tf();MSe(MSe.S,"Object",{setPrototypeOf:PSe().set})});var RSe=I((txr,qSe)=>{ASe();qSe.exports=Ql().Object.setPrototypeOf});var Ea=I((axr,bP)=>{(function(){"use strict";var e={}.hasOwnProperty;function t(){for(var i="",o=0;o<arguments.length;o++){var f=arguments[o];f&&(i=n(i,r(f)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return t.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var f in i)e.call(i,f)&&i[f]&&(o=n(o,f));return o}function n(i,o){return o?i?i+" "+o:i+o:i}typeof bP!="undefined"&&bP.exports?(t.default=t,bP.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var wP=I((uxr,LSe)=>{"use strict";var hkt=function(e,t,r,n,i,o,f,v){if(!e){var x;if(t===void 0)x=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var E=[r,n,i,o,f,v],S=0;x=new Error(t.replace(/%s/g,function(){return E[S++]})),x.name="Invariant Violation"}throw x.framesToPop=1,x}};LSe.exports=hkt});var bU=I(xU=>{"use strict";Object.defineProperty(xU,"__esModule",{value:!0});function zSe(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function jSe(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n!=null?n:null}this.setState(t.bind(this))}function BSe(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}zSe.__suppressDeprecationWarning=!0;jSe.__suppressDeprecationWarning=!0;BSe.__suppressDeprecationWarning=!0;function pkt(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,i=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?i="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),r!==null||n!==null||i!==null){var o=e.displayName||e.name,f=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+f+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=zSe,t.componentWillReceiveProps=jSe),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=BSe;var v=t.componentDidUpdate;t.componentDidUpdate=function(E,S,P){var q=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:P;v.call(this,E,S,q)}}return e}xU.polyfill=pkt});var wU=I((Pxr,$Se)=>{var mkt=ef(),vkt=mP(),gkt=Lb(),ykt=vP().f;$Se.exports=function(e){return function(t){for(var r=gkt(t),n=vkt(r),i=n.length,o=0,f=[],v;i>o;)v=n[o++],(!mkt||ykt.call(r,v))&&f.push(e?[v,r[v]]:r[v]);return f}}});var ZSe=I(()=>{var GSe=tf(),_kt=wU()(!0);GSe(GSe.S,"Object",{entries:function(t){return _kt(t)}})});var HSe=I((qxr,WSe)=>{ZSe();WSe.exports=Ql().Object.entries});var EU=I((Rxr,KSe)=>{KSe.exports=HSe()});var Nb=I((IP,tIe)=>{"use strict";Object.defineProperty(IP,"__esModule",{value:!0});IP.default=Pkt;function Pkt(e){function t(n,i,o,f,v,x){var E=f||"<<anonymous>>",S=x||o;if(i[o]==null)return n?new Error("Required "+v+" `"+S+"` was not specified "+("in `"+E+"`.")):null;for(var P=arguments.length,q=Array(P>6?P-6:0),F=6;F<P;F++)q[F-6]=arguments[F];return e.apply(void 0,[i,o,E,v,S].concat(q))}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}tIe.exports=IP.default});var oIe=I(()=>{var iIe=tf(),Mkt=wU()(!1);iIe(iIe.S,"Object",{values:function(t){return Mkt(t)}})});var sIe=I((Vxr,aIe)=>{oIe();aIe.exports=Ql().Object.values});var uIe=I(($xr,lIe)=>{lIe.exports=sIe()});var fIe=I(qr=>{"use strict";var Li=typeof Symbol=="function"&&Symbol.for,AU=Li?Symbol.for("react.element"):60103,qU=Li?Symbol.for("react.portal"):60106,PP=Li?Symbol.for("react.fragment"):60107,MP=Li?Symbol.for("react.strict_mode"):60108,AP=Li?Symbol.for("react.profiler"):60114,qP=Li?Symbol.for("react.provider"):60109,RP=Li?Symbol.for("react.context"):60110,RU=Li?Symbol.for("react.async_mode"):60111,OP=Li?Symbol.for("react.concurrent_mode"):60111,LP=Li?Symbol.for("react.forward_ref"):60112,DP=Li?Symbol.for("react.suspense"):60113,Rkt=Li?Symbol.for("react.suspense_list"):60120,kP=Li?Symbol.for("react.memo"):60115,NP=Li?Symbol.for("react.lazy"):60116,Okt=Li?Symbol.for("react.block"):60121,Lkt=Li?Symbol.for("react.fundamental"):60117,Dkt=Li?Symbol.for("react.responder"):60118,kkt=Li?Symbol.for("react.scope"):60119;function Ua(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case AU:switch(e=e.type,e){case RU:case OP:case PP:case AP:case MP:case DP:return e;default:switch(e=e&&e.$$typeof,e){case RP:case LP:case NP:case kP:case qP:return e;default:return t}}case qU:return t}}}function hIe(e){return Ua(e)===OP}qr.AsyncMode=RU;qr.ConcurrentMode=OP;qr.ContextConsumer=RP;qr.ContextProvider=qP;qr.Element=AU;qr.ForwardRef=LP;qr.Fragment=PP;qr.Lazy=NP;qr.Memo=kP;qr.Portal=qU;qr.Profiler=AP;qr.StrictMode=MP;qr.Suspense=DP;qr.isAsyncMode=function(e){return hIe(e)||Ua(e)===RU};qr.isConcurrentMode=hIe;qr.isContextConsumer=function(e){return Ua(e)===RP};qr.isContextProvider=function(e){return Ua(e)===qP};qr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===AU};qr.isForwardRef=function(e){return Ua(e)===LP};qr.isFragment=function(e){return Ua(e)===PP};qr.isLazy=function(e){return Ua(e)===NP};qr.isMemo=function(e){return Ua(e)===kP};qr.isPortal=function(e){return Ua(e)===qU};qr.isProfiler=function(e){return Ua(e)===AP};qr.isStrictMode=function(e){return Ua(e)===MP};qr.isSuspense=function(e){return Ua(e)===DP};qr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===PP||e===OP||e===AP||e===MP||e===DP||e===Rkt||typeof e=="object"&&e!==null&&(e.$$typeof===NP||e.$$typeof===kP||e.$$typeof===qP||e.$$typeof===RP||e.$$typeof===LP||e.$$typeof===Lkt||e.$$typeof===Dkt||e.$$typeof===kkt||e.$$typeof===Okt)};qr.typeOf=Ua});var dIe=I((Kxr,pIe)=>{"use strict";pIe.exports=fIe()});var lc=I((FP,vIe)=>{"use strict";Object.defineProperty(FP,"__esModule",{value:!0});var Nkt=rr(),Fkt=mIe(Nkt),zkt=dIe(),jkt=Nb(),Bkt=mIe(jkt);function mIe(e){return e&&e.__esModule?e:{default:e}}function Ukt(e,t,r,n,i){var o=e[t];return Fkt.default.isValidElement(o)?new Error("Invalid "+n+" `"+i+"` of type ReactElement "+("supplied to `"+r+"`,expected an element type (a string ")+", component class, or function component)."):(0,zkt.isValidElementType)(o)?null:new Error("Invalid "+n+" `"+i+"` of value `"+o+"` "+("supplied to `"+r+"`, expected an element type (a string ")+", component class, or function component).")}FP.default=(0,Bkt.default)(Ukt);vIe.exports=FP.default});var BP=I((jP,bIe)=>{"use strict";Object.defineProperty(jP,"__esModule",{value:!0});jP.default=Xkt;var Hkt=Nb(),Kkt=Ykt(Hkt);function Ykt(e){return e&&e.__esModule?e:{default:e}}function Xkt(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(){for(var i=arguments.length,o=Array(i),f=0;f<i;f++)o[f]=arguments[f];var v=null;return t.forEach(function(x){if(v==null){var E=x.apply(void 0,o);E!=null&&(v=E)}}),v}return(0,Kkt.default)(n)}bIe.exports=jP.default});var zU=I((vbr,SIe)=>{"use strict";var eNt=function(){};SIe.exports=eNt});var So=I((gbr,zb)=>{function tNt(e){return e&&e.__esModule?e:{default:e}}zb.exports=tNt,zb.exports.__esModule=!0,zb.exports.default=zb.exports});var CIe=I((VP,IIe)=>{"use strict";VP.__esModule=!0;VP.default=nNt;var rNt=/-(.)/g;function nNt(e){return e.replace(rNt,function(t,r){return r.toUpperCase()})}IIe.exports=VP.default});var jU=I(($P,PIe)=>{"use strict";var iNt=So();$P.__esModule=!0;$P.default=sNt;var oNt=iNt(CIe()),aNt=/^-ms-/;function sNt(e){return(0,oNt.default)(e.replace(aNt,"ms-"))}PIe.exports=$P.default});var AIe=I((GP,MIe)=>{"use strict";GP.__esModule=!0;GP.default=uNt;var lNt=/([A-Z])/g;function uNt(e){return e.replace(lNt,"-$1").toLowerCase()}MIe.exports=GP.default});var RIe=I((ZP,qIe)=>{"use strict";var cNt=So();ZP.__esModule=!0;ZP.default=pNt;var hNt=cNt(AIe()),fNt=/^ms-/;function pNt(e){return(0,hNt.default)(e).replace(fNt,"-ms-")}qIe.exports=ZP.default});var LIe=I((WP,OIe)=>{"use strict";var dNt=So();WP.__esModule=!0;WP.default=yNt;var mNt=dNt(jU()),vNt=/^(top|right|bottom|left)$/,gNt=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function yNt(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(n){var i=e.style;n=(0,mNt.default)(n),n=="float"&&(n="styleFloat");var o=e.currentStyle[n]||null;if(o==null&&i&&i[n]&&(o=i[n]),gNt.test(o)&&!vNt.test(n)){var f=i.left,v=e.runtimeStyle,x=v&&v.left;x&&(v.left=e.currentStyle.left),i.left=n==="fontSize"?"1em":o,o=i.pixelLeft+"px",i.left=f,x&&(v.left=x)}return o}}}OIe.exports=WP.default});var kIe=I((HP,DIe)=>{"use strict";HP.__esModule=!0;HP.default=_Nt;function _Nt(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}DIe.exports=HP.default});var tu=I((jb,NIe)=>{"use strict";jb.__esModule=!0;jb.default=void 0;var xNt=!!(typeof window!="undefined"&&window.document&&window.document.createElement);jb.default=xNt;NIe.exports=jb.default});var VIe=I(ar=>{"use strict";var bNt=So();ar.__esModule=!0;ar.default=ar.animationEnd=ar.animationDelay=ar.animationTiming=ar.animationDuration=ar.animationName=ar.transitionEnd=ar.transitionDuration=ar.transitionDelay=ar.transitionTiming=ar.transitionProperty=ar.transform=void 0;var wNt=bNt(tu()),YP="transform";ar.transform=YP;var ru,BU,FIe;ar.animationEnd=FIe;ar.transitionEnd=BU;var UU,VU,$U,GU;ar.transitionDelay=GU;ar.transitionTiming=$U;ar.transitionDuration=VU;ar.transitionProperty=UU;var zIe,jIe,BIe,UIe;ar.animationDelay=UIe;ar.animationTiming=BIe;ar.animationDuration=jIe;ar.animationName=zIe;wNt.default&&(KP=TNt(),ru=KP.prefix,ar.transitionEnd=BU=KP.transitionEnd,ar.animationEnd=FIe=KP.animationEnd,ar.transform=YP=ru+"-"+YP,ar.transitionProperty=UU=ru+"-transition-property",ar.transitionDuration=VU=ru+"-transition-duration",ar.transitionDelay=GU=ru+"-transition-delay",ar.transitionTiming=$U=ru+"-transition-timing-function",ar.animationName=zIe=ru+"-animation-name",ar.animationDuration=jIe=ru+"-animation-duration",ar.animationTiming=BIe=ru+"-animation-delay",ar.animationDelay=UIe=ru+"-animation-timing-function");var KP,ENt={transform:YP,end:BU,property:UU,timing:$U,delay:GU,duration:VU};ar.default=ENt;function TNt(){for(var e=document.createElement("div").style,t={O:function(E){return"o"+E.toLowerCase()},Moz:function(E){return E.toLowerCase()},Webkit:function(E){return"webkit"+E},ms:function(E){return"MS"+E}},r=Object.keys(t),n,i,o="",f=0;f<r.length;f++){var v=r[f];if(v+"TransitionProperty"in e){o="-"+v.toLowerCase(),n=t[v]("TransitionEnd"),i=t[v]("AnimationEnd");break}}return!n&&"transitionProperty"in e&&(n="transitionend"),!i&&"animationName"in e&&(i="animationend"),e=null,{animationEnd:i,transitionEnd:n,prefix:o}}});var GIe=I((XP,$Ie)=>{"use strict";XP.__esModule=!0;XP.default=INt;var SNt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function INt(e){return!!(e&&SNt.test(e))}$Ie.exports=XP.default});var WIe=I((QP,ZIe)=>{"use strict";var Bb=So();QP.__esModule=!0;QP.default=RNt;var CNt=Bb(jU()),ZU=Bb(RIe()),PNt=Bb(LIe()),MNt=Bb(kIe()),ANt=VIe(),qNt=Bb(GIe());function RNt(e,t,r){var n="",i="",o=t;if(typeof t=="string"){if(r===void 0)return e.style[(0,CNt.default)(t)]||(0,PNt.default)(e).getPropertyValue((0,ZU.default)(t));(o={})[t]=r}Object.keys(o).forEach(function(f){var v=o[f];!v&&v!==0?(0,MNt.default)(e,(0,ZU.default)(f)):(0,qNt.default)(f)?i+=f+"("+v+") ":n+=(0,ZU.default)(f)+": "+v+";"}),i&&(n+=ANt.transform+": "+i+";"),e.style.cssText+=";"+n}ZIe.exports=QP.default});var HIe=I(Cg=>{"use strict";Cg.__esModule=!0;Cg.classNamesShape=Cg.timeoutsShape=void 0;var _br=ONt(Nr());function ONt(e){return e&&e.__esModule?e:{default:e}}var LNt=null;Cg.timeoutsShape=LNt;var DNt=null;Cg.classNamesShape=DNt});var YIe=I(Sa=>{"use strict";Sa.__esModule=!0;Sa.default=Sa.EXITING=Sa.ENTERED=Sa.ENTERING=Sa.EXITED=Sa.UNMOUNTED=void 0;var kNt=zNt(Nr()),WU=KIe(rr()),NNt=KIe(as()),FNt=bU(),bbr=HIe();function KIe(e){return e&&e.__esModule?e:{default:e}}function zNt(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}}return t.default=e,t}function jNt(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function BNt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Ub="unmounted";Sa.UNMOUNTED=Ub;var ed="exited";Sa.EXITED=ed;var td="entering";Sa.ENTERING=td;var Mg="entered";Sa.ENTERED=Mg;var HU="exiting";Sa.EXITING=HU;var nu=function(e){BNt(t,e);function t(n,i){var o;o=e.call(this,n,i)||this;var f=i.transitionGroup,v=f&&!f.isMounting?n.enter:n.appear,x;return o.appearStatus=null,n.in?v?(x=ed,o.appearStatus=td):x=Mg:n.unmountOnExit||n.mountOnEnter?x=Ub:x=ed,o.state={status:x},o.nextCallback=null,o}var r=t.prototype;return r.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(i,o){var f=i.in;return f&&o.status===Ub?{status:ed}:null},r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var o=null;if(i!==this.props){var f=this.state.status;this.props.in?f!==td&&f!==Mg&&(o=td):(f===td||f===Mg)&&(o=HU)}this.updateStatus(!1,o)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,o,f,v;return o=f=v=i,i!=null&&typeof i!="number"&&(o=i.exit,f=i.enter,v=i.appear!==void 0?i.appear:f),{exit:o,enter:f,appear:v}},r.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null){this.cancelNextCallback();var f=NNt.default.findDOMNode(this);o===td?this.performEnter(f,i):this.performExit(f)}else this.props.unmountOnExit&&this.state.status===ed&&this.setState({status:Ub})},r.performEnter=function(i,o){var f=this,v=this.props.enter,x=this.context.transitionGroup?this.context.transitionGroup.isMounting:o,E=this.getTimeouts(),S=x?E.appear:E.enter;if(!o&&!v){this.safeSetState({status:Mg},function(){f.props.onEntered(i)});return}this.props.onEnter(i,x),this.safeSetState({status:td},function(){f.props.onEntering(i,x),f.onTransitionEnd(i,S,function(){f.safeSetState({status:Mg},function(){f.props.onEntered(i,x)})})})},r.performExit=function(i){var o=this,f=this.props.exit,v=this.getTimeouts();if(!f){this.safeSetState({status:ed},function(){o.props.onExited(i)});return}this.props.onExit(i),this.safeSetState({status:HU},function(){o.props.onExiting(i),o.onTransitionEnd(i,v.exit,function(){o.safeSetState({status:ed},function(){o.props.onExited(i)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},r.setNextCallback=function(i){var o=this,f=!0;return this.nextCallback=function(v){f&&(f=!1,o.nextCallback=null,i(v))},this.nextCallback.cancel=function(){f=!1},this.nextCallback},r.onTransitionEnd=function(i,o,f){this.setNextCallback(f);var v=o==null&&!this.props.addEndListener;if(!i||v){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(i,this.nextCallback),o!=null&&setTimeout(this.nextCallback,o)},r.render=function(){var i=this.state.status;if(i===Ub)return null;var o=this.props,f=o.children,v=jNt(o,["children"]);if(delete v.in,delete v.mountOnEnter,delete v.unmountOnExit,delete v.appear,delete v.enter,delete v.exit,delete v.timeout,delete v.addEndListener,delete v.onEnter,delete v.onEntering,delete v.onEntered,delete v.onExit,delete v.onExiting,delete v.onExited,typeof f=="function")return f(i,v);var x=WU.default.Children.only(f);return WU.default.cloneElement(x,v)},t}(WU.default.Component);nu.contextTypes={transitionGroup:kNt.object};nu.childContextTypes={transitionGroup:function(){}};nu.propTypes={};function Pg(){}nu.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Pg,onEntering:Pg,onEntered:Pg,onExit:Pg,onExiting:Pg,onExited:Pg};nu.UNMOUNTED=0;nu.EXITED=1;nu.ENTERING=2;nu.ENTERED=3;nu.EXITING=4;var UNt=(0,FNt.polyfill)(nu);Sa.default=UNt});var Vb=I((JP,XIe)=>{"use strict";JP.__esModule=!0;JP.default=VNt;function VNt(e){return e&&e.ownerDocument||document}XIe.exports=JP.default});var KU=I((eM,QIe)=>{"use strict";var $Nt=So();eM.__esModule=!0;eM.default=ZNt;var GNt=$Nt(Vb());function ZNt(e){e===void 0&&(e=(0,GNt.default)());try{return e.activeElement}catch(t){}}QIe.exports=eM.default});var Gb=I(($b,eCe)=>{"use strict";var WNt=So();$b.__esModule=!0;$b.default=void 0;var HNt=WNt(tu()),KNt=function(){return HNt.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(e.compareDocumentPosition(t)&16):JIe(e,t)}:JIe}();$b.default=KNt;function JIe(e,t){if(t)do if(t===e)return!0;while(t=t.parentNode);return!1}eCe.exports=$b.default});var XU=I((rd,nCe)=>{function tCe(e){if(e&&typeof e=="object"){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if(typeof e=="number")return rCe[e];var r=String(e),n=cc[r.toLowerCase()];if(n)return n;var n=tM[r.toLowerCase()];if(n)return n;if(r.length===1)return r.charCodeAt(0)}tCe.isEventKey=function(t,r){if(t&&typeof t=="object"){var n=t.which||t.keyCode||t.charCode;if(n==null)return!1;if(typeof r=="string"){var i=cc[r.toLowerCase()];if(i)return i===n;var i=tM[r.toLowerCase()];if(i)return i===n}else if(typeof r=="number")return r===n;return!1}};rd=nCe.exports=tCe;var cc=rd.code=rd.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},tM=rd.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(xn=97;xn<123;xn++)cc[String.fromCharCode(xn)]=xn-32;for(xn=48;xn<58;xn++)cc[xn-48]=xn;var xn;for(xn=1;xn<13;xn++)cc["f"+xn]=xn+111;for(xn=0;xn<10;xn++)cc["numpad "+xn]=xn+96;var rCe=rd.names=rd.title={};for(xn in cc)rCe[cc[xn]]=xn;for(YU in tM)cc[YU]=tM[YU];var YU});var oCe=I((rM,iCe)=>{"use strict";Object.defineProperty(rM,"__esModule",{value:!0});rM.default=YNt;function YNt(e){return function(r,n,i,o,f){var v=i||"<<anonymous>>",x=f||n;if(r[n]==null)return new Error("The "+o+" `"+x+"` is required to make "+("`"+v+"` accessible for users of assistive ")+"technologies such as screen readers.");for(var E=arguments.length,S=Array(E>5?E-5:0),P=5;P<E;P++)S[P-5]=arguments[P];return e.apply(void 0,[r,n,i,o,f].concat(S))}}iCe.exports=rM.default});var sCe=I((Ebr,aCe)=>{var XNt=pP(),QNt=fP();aCe.exports=function(e){return function(t,r){var n=String(QNt(t)),i=XNt(r),o=n.length,f,v;return i<0||i>=o?e?"":void 0:(f=n.charCodeAt(i),f<55296||f>56319||i+1===o||(v=n.charCodeAt(i+1))<56320||v>57343?e?n.charAt(i):f:e?n.slice(i,i+2):(f-55296<<10)+(v-56320)+65536)}}});var uCe=I((Tbr,lCe)=>{lCe.exports=Ob()});var nM=I((Sbr,cCe)=>{cCe.exports={}});var nf=I((Ibr,fCe)=>{var QU=lU()("wks"),JNt=uU(),JU=xg().Symbol,hCe=typeof JU=="function",eFt=fCe.exports=function(e){return QU[e]||(QU[e]=hCe&&JU[e]||(hCe?JU:JNt)("Symbol."+e))};eFt.store=QU});var e5=I((Cbr,dCe)=>{var tFt=qb().f,rFt=wg(),pCe=nf()("toStringTag");dCe.exports=function(e,t,r){e&&!rFt(e=r?e:e.prototype,pCe)&&tFt(e,pCe,{configurable:!0,value:t})}});var gCe=I((Pbr,vCe)=>{"use strict";var nFt=mU(),iFt=Rb(),oFt=e5(),mCe={};Ob()(mCe,nf()("iterator"),function(){return this});vCe.exports=function(e,t,r){e.prototype=nFt(mCe,{next:iFt(1,r)}),oFt(e,t+" Iterator")}});var xCe=I((Mbr,_Ce)=>{var aFt=wg(),sFt=gP(),yCe=dP()("IE_PROTO"),lFt=Object.prototype;_Ce.exports=Object.getPrototypeOf||function(e){return e=sFt(e),aFt(e,yCe)?e[yCe]:typeof e.constructor=="function"&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?lFt:null}});var CCe=I((Abr,ICe)=>{"use strict";var bCe=sU(),t5=tf(),uFt=uCe(),wCe=Ob(),ECe=nM(),cFt=gCe(),hFt=e5(),fFt=xCe(),Zb=nf()("iterator"),r5=!([].keys&&"next"in[].keys()),pFt="@@iterator",TCe="keys",iM="values",SCe=function(){return this};ICe.exports=function(e,t,r,n,i,o,f){cFt(r,t,n);var v=function(le){if(!r5&&le in P)return P[le];switch(le){case TCe:return function(){return new r(this,le)};case iM:return function(){return new r(this,le)}}return function(){return new r(this,le)}},x=t+" Iterator",E=i==iM,S=!1,P=e.prototype,q=P[Zb]||P[pFt]||i&&P[i],F=q||v(i),K=i?E?v("entries"):F:void 0,ne=t=="Array"&&P.entries||q,Z,W,Q;if(ne&&(Q=fFt(ne.call(new e)),Q!==Object.prototype&&Q.next&&(hFt(Q,x,!0),!bCe&&typeof Q[Zb]!="function"&&wCe(Q,Zb,SCe))),E&&q&&q.name!==iM&&(S=!0,F=function(){return q.call(this)}),(!bCe||f)&&(r5||S||!P[Zb])&&wCe(P,Zb,F),ECe[t]=F,ECe[x]=SCe,i)if(Z={values:E?F:v(iM),keys:o?F:v(TCe),entries:K},f)for(W in Z)W in P||uFt(P,W,Z[W]);else t5(t5.P+t5.F*(r5||S),t,Z);return Z}});var PCe=I(()=>{"use strict";var dFt=sCe()(!0);CCe()(String,"String",function(e){this._t=String(e),this._i=0},function(){var e=this._t,t=this._i,r;return t>=e.length?{value:void 0,done:!0}:(r=dFt(e,t),this._i+=r.length,{value:r,done:!1})})});var qCe=I((Obr,ACe)=>{var MCe=bg();ACe.exports=function(e,t,r,n){try{return n?t(MCe(r)[0],r[1]):t(r)}catch(o){var i=e.return;throw i!==void 0&&MCe(i.call(e)),o}}});var OCe=I((Lbr,RCe)=>{var mFt=nM(),vFt=nf()("iterator"),gFt=Array.prototype;RCe.exports=function(e){return e!==void 0&&(mFt.Array===e||gFt[vFt]===e)}});var DCe=I((Dbr,LCe)=>{"use strict";var yFt=qb(),_Ft=Rb();LCe.exports=function(e,t,r){t in e?yFt.f(e,t,_Ft(0,r)):e[t]=r}});var NCe=I((kbr,kCe)=>{var n5=iU(),xFt=nf()("toStringTag"),bFt=n5(function(){return arguments}())=="Arguments",wFt=function(e,t){try{return e[t]}catch(r){}};kCe.exports=function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=wFt(t=Object(e),xFt))=="string"?r:bFt?n5(t):(n=n5(t))=="Object"&&typeof t.callee=="function"?"Arguments":n}});var zCe=I((Nbr,FCe)=>{var EFt=NCe(),TFt=nf()("iterator"),SFt=nM();FCe.exports=Ql().getIteratorMethod=function(e){if(e!=null)return e[TFt]||e["@@iterator"]||SFt[EFt(e)]}});var UCe=I((Fbr,BCe)=>{var o5=nf()("iterator"),jCe=!1;try{i5=[7][o5](),i5.return=function(){jCe=!0},Array.from(i5,function(){throw 2})}catch(e){}var i5;BCe.exports=function(e,t){if(!t&&!jCe)return!1;var r=!1;try{var n=[7],i=n[o5]();i.next=function(){return{done:r=!0}},n[o5]=function(){return i},e(n)}catch(o){}return r}});var $Ce=I(()=>{"use strict";var IFt=sP(),a5=tf(),CFt=gP(),PFt=qCe(),MFt=OCe(),AFt=aU(),VCe=DCe(),qFt=zCe();a5(a5.S+a5.F*!UCe()(function(e){Array.from(e)}),"Array",{from:function(t){var r=CFt(t),n=typeof this=="function"?this:Array,i=arguments.length,o=i>1?arguments[1]:void 0,f=o!==void 0,v=0,x=qFt(r),E,S,P,q;if(f&&(o=IFt(o,i>2?arguments[2]:void 0,2)),x!=null&&!(n==Array&&MFt(x)))for(q=x.call(r),S=new n;!(P=q.next()).done;v++)VCe(S,v,f?PFt(q,o,[P.value,v],!0):P.value);else for(E=AFt(r.length),S=new n(E);E>v;v++)VCe(S,v,f?o(r[v],v):r[v]);return S.length=v,S}})});var ZCe=I((Bbr,GCe)=>{PCe();$Ce();GCe.exports=Ql().Array.from});var HCe=I((Ubr,WCe)=>{WCe.exports=ZCe()});var oM=I((Wb,YCe)=>{"use strict";var RFt=So();Wb.__esModule=!0;Wb.default=void 0;var OFt=RFt(tu()),KCe=function(){};OFt.default&&(KCe=function(){if(document.addEventListener)return function(e,t,r,n){return e.addEventListener(t,r,n||!1)};if(document.attachEvent)return function(e,t,r){return e.attachEvent("on"+t,function(n){n=n||window.event,n.target=n.target||n.srcElement,n.currentTarget=e,r.call(e,n)})}}());var LFt=KCe;Wb.default=LFt;YCe.exports=Wb.default});var aM=I((Hb,QCe)=>{"use strict";var DFt=So();Hb.__esModule=!0;Hb.default=void 0;var kFt=DFt(tu()),XCe=function(){};kFt.default&&(XCe=function(){if(document.addEventListener)return function(e,t,r,n){return e.removeEventListener(t,r,n||!1)};if(document.attachEvent)return function(e,t,r){return e.detachEvent("on"+t,r)}}());var NFt=XCe;Hb.default=NFt;QCe.exports=Hb.default});var s5=I((sM,ePe)=>{"use strict";sM.__esModule=!0;sM.default=function(e,t,r,n){return(0,zFt.default)(e,t,r,n),{remove:function(){(0,BFt.default)(e,t,r,n)}}};var FFt=oM(),zFt=JCe(FFt),jFt=aM(),BFt=JCe(jFt);function JCe(e){return e&&e.__esModule?e:{default:e}}ePe.exports=sM.default});var Kb=I((lM,rPe)=>{"use strict";lM.__esModule=!0;lM.default=function(e){return(0,GFt.default)(VFt.default.findDOMNode(e))};var UFt=as(),VFt=tPe(UFt),$Ft=Vb(),GFt=tPe($Ft);function tPe(e){return e&&e.__esModule?e:{default:e}}rPe.exports=lM.default});var iPe=I((hM,nPe)=>{"use strict";hM.__esModule=!0;var ZFt=Gb(),WFt=Ag(ZFt),HFt=Nr(),uM=Ag(HFt),KFt=rr(),YFt=Ag(KFt),XFt=as(),QFt=Ag(XFt),JFt=s5(),l5=Ag(JFt),ezt=Kb(),tzt=Ag(ezt);function Ag(e){return e&&e.__esModule?e:{default:e}}function rzt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nzt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function izt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ozt=27;function azt(e){return e.button===0}function szt(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var cM=function(e){izt(t,e);function t(r,n){rzt(this,t);var i=nzt(this,e.call(this,r,n));return i.addEventListeners=function(){i.currentEvent=window.event;var o=i.props.event,f=(0,tzt.default)(i);i.documentMouseCaptureListener=(0,l5.default)(f,o,i.handleMouseCapture,!0),i.documentMouseListener=(0,l5.default)(f,o,i.handleMouse),i.documentKeyupListener=(0,l5.default)(f,"keyup",i.handleKeyUp)},i.removeEventListeners=function(){i.documentMouseCaptureListener&&i.documentMouseCaptureListener.remove(),i.documentMouseListener&&i.documentMouseListener.remove(),i.documentKeyupListener&&i.documentKeyupListener.remove()},i.handleMouseCapture=function(o){i.preventMouseRootClose=szt(o)||!azt(o)||(0,WFt.default)(QFt.default.findDOMNode(i),o.target)},i.handleMouse=function(o){if(o===i.currentEvent){i.currentEvent=void 0;return}!i.preventMouseRootClose&&i.props.onRootClose&&i.props.onRootClose(o)},i.handleKeyUp=function(o){if(o===i.currentEvent){i.currentEvent=void 0;return}o.keyCode===ozt&&i.props.onRootClose&&i.props.onRootClose(o)},i.preventMouseRootClose=!1,i}return t.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},t.prototype.componentDidUpdate=function(n){!this.props.disabled&&n.disabled?this.addEventListeners():this.props.disabled&&!n.disabled&&this.removeEventListeners()},t.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},t.prototype.render=function(){return this.props.children},t}(YFt.default.Component);cM.displayName="RootCloseWrapper";cM.propTypes={onRootClose:uM.default.func,children:uM.default.element,disabled:uM.default.bool,event:uM.default.oneOf(["click","mousedown"])};cM.defaultProps={event:"click"};hM.default=cM;nPe.exports=hM.default});var wPe=I((yM,bPe)=>{"use strict";yM.__esModule=!0;yM.default=bzt;var xzt=/^[\w-]*$/,b5=Function.prototype.bind.call(Function.prototype.call,[].slice);function bzt(e,t){var r=t[0]==="#",n=t[0]===".",i=r||n?t.slice(1):t,o=xzt.test(i),f;return o?r?(e=e.getElementById?e:document,(f=e.getElementById(i))?[f]:[]):e.getElementsByClassName&&n?b5(e.getElementsByClassName(i)):b5(e.getElementsByTagName(t)):b5(e.querySelectorAll(t))}bPe.exports=yM.default});var SPe=I((_M,TPe)=>{"use strict";var EPe=So();_M.__esModule=!0;_M.default=Tzt;var wzt=EPe(Gb()),Ezt=EPe(wPe());function Tzt(e,t){return function(n){var i=n.currentTarget,o=n.target,f=(0,Ezt.default)(i,e);f.some(function(v){return(0,wzt.default)(v,o)})&&t.call(this,n)}}TPe.exports=_M.default});var PPe=I((t1,CPe)=>{"use strict";var w5=So();t1.__esModule=!0;t1.default=void 0;var Szt=w5(tu()),Izt=w5(oM()),Czt=w5(aM()),IPe=function(){};Szt.default&&(IPe=function(t,r,n,i){return(0,Izt.default)(t,r,n,i),function(){(0,Czt.default)(t,r,n,i)}});var Pzt=IPe;t1.default=Pzt;CPe.exports=t1.default});var OPe=I(of=>{"use strict";var xM=So();of.__esModule=!0;of.default=void 0;var MPe=xM(oM());of.on=MPe.default;var APe=xM(aM());of.off=APe.default;var qPe=xM(SPe());of.filter=qPe.default;var RPe=xM(PPe());of.listen=RPe.default;var Mzt={on:MPe.default,off:APe.default,filter:qPe.default,listen:RPe.default};of.default=Mzt});var E5=I((wM,LPe)=>{"use strict";var Azt=So();wM.__esModule=!0;wM.default=Rzt;var qzt=Azt(tu()),bM;function Rzt(e){if((!bM&&bM!==0||e)&&qzt.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),bM=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return bM}LPe.exports=wM.default});var TM=I((EM,kPe)=>{"use strict";Object.defineProperty(EM,"__esModule",{value:!0});var Ozt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lzt=rr(),Dzt=DPe(Lzt),kzt=Nb(),Nzt=DPe(kzt);function DPe(e){return e&&e.__esModule?e:{default:e}}function Fzt(e,t,r,n,i){var o=e[t],f=typeof o=="undefined"?"undefined":Ozt(o);return Dzt.default.isValidElement(o)?new Error("Invalid "+n+" `"+i+"` of type ReactElement "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(f!=="object"||typeof o.render!="function")&&o.nodeType!==1?new Error("Invalid "+n+" `"+i+"` of value `"+o+"` "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement."):null}EM.default=(0,Nzt.default)(Fzt);kPe.exports=EM.default});var jPe=I((z1r,zPe)=>{"use strict";var zzt=!1,FPe=function(){};zzt&&(NPe=function(t,r){var n=arguments.length;r=new Array(n>1?n-1:0);for(var i=1;i<n;i++)r[i-1]=arguments[i];var o=0,f="Warning: "+t.replace(/%s/g,function(){return r[o++]});typeof console!="undefined"&&console.error(f);try{throw new Error(f)}catch(v){}},FPe=function(e,t,r){var n=arguments.length;r=new Array(n>2?n-2:0);for(var i=2;i<n;i++)r[i-2]=arguments[i];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||NPe.apply(null,[t].concat(r))});var NPe;zPe.exports=FPe});var VPe=I((SM,UPe)=>{"use strict";Object.defineProperty(SM,"__esModule",{value:!0});SM.default=BPe;var jzt=jPe(),Bzt=Uzt(jzt);function Uzt(e){return e&&e.__esModule?e:{default:e}}var T5={};function BPe(e,t){return function(n,i,o,f,v){var x=o||"<<anonymous>>",E=v||i;if(n[i]!=null){var S=o+"."+i;(0,Bzt.default)(T5[S],"The "+f+" `"+E+"` of "+("`"+x+"` is deprecated. "+t+".")),T5[S]=!0}for(var P=arguments.length,q=Array(P>5?P-5:0),F=5;F<P;F++)q[F-5]=arguments[F];return e.apply(void 0,[n,i,o,f,v].concat(q))}}function Vzt(){T5={}}BPe._resetWarned=Vzt;UPe.exports=SM.default});var S5=I((IM,$Pe)=>{"use strict";IM.__esModule=!0;IM.default=$zt;function $zt(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}$Pe.exports=IM.default});var ZPe=I((CM,GPe)=>{"use strict";var Gzt=So();CM.__esModule=!0;CM.default=Wzt;var Zzt=Gzt(S5());function Wzt(e,t){e.classList?e.classList.add(t):(0,Zzt.default)(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}GPe.exports=CM.default});var KPe=I((j1r,HPe)=>{"use strict";function WPe(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}HPe.exports=function(t,r){t.classList?t.classList.remove(r):typeof t.className=="string"?t.className=WPe(t.className,r):t.setAttribute("class",WPe(t.className&&t.className.baseVal||"",r))}});var JPe=I(nd=>{"use strict";var I5=So();nd.__esModule=!0;nd.default=void 0;var YPe=I5(ZPe());nd.addClass=YPe.default;var XPe=I5(KPe());nd.removeClass=XPe.default;var QPe=I5(S5());nd.hasClass=QPe.default;var Hzt={addClass:YPe.default,removeClass:XPe.default,hasClass:QPe.default};nd.default=Hzt});var tMe=I((PM,eMe)=>{"use strict";PM.__esModule=!0;PM.default=Kzt;function Kzt(e){return e===e.window?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}eMe.exports=PM.default});var C5=I((MM,iMe)=>{"use strict";MM.__esModule=!0;MM.default=tjt;var Yzt=tMe(),rMe=nMe(Yzt),Xzt=Vb(),Qzt=nMe(Xzt);function nMe(e){return e&&e.__esModule?e:{default:e}}function Jzt(e){return e&&e.tagName.toLowerCase()==="body"}function ejt(e){var t=(0,Qzt.default)(e),r=(0,rMe.default)(t),n=r.innerWidth;if(!n){var i=t.documentElement.getBoundingClientRect();n=i.right-Math.abs(i.left)}return t.body.clientWidth<n}function tjt(e){var t=(0,rMe.default)(e);return t||Jzt(e)?ejt(e):e.scrollHeight>e.clientHeight}iMe.exports=MM.default});var aMe=I(r1=>{"use strict";r1.__esModule=!0;r1.ariaHidden=P5;r1.hideSiblings=ijt;r1.showSiblings=ojt;var rjt=["template","script","style"],njt=function(t){var r=t.nodeType,n=t.tagName;return r===1&&rjt.indexOf(n.toLowerCase())===-1},oMe=function(t,r,n){r=[].concat(r),[].forEach.call(t.children,function(i){r.indexOf(i)===-1&&njt(i)&&n(i)})};function P5(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function ijt(e,t){oMe(e,t,function(r){return P5(!0,r)})}function ojt(e,t){oMe(e,t,function(r){return P5(!1,r)})}});var cMe=I((qM,uMe)=>{"use strict";qM.__esModule=!0;var ajt=JPe(),sMe=AM(ajt),sjt=WIe(),lMe=AM(sjt),ljt=E5(),ujt=AM(ljt),cjt=C5(),hjt=AM(cjt),M5=aMe();function AM(e){return e&&e.__esModule?e:{default:e}}function fjt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pjt(e,t){var r=-1;return e.some(function(n,i){if(t(n,i))return r=i,!0}),r}function djt(e,t){return pjt(e,function(r){return r.modals.indexOf(t)!==-1})}function mjt(e,t){var r={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(r.paddingRight=parseInt((0,lMe.default)(t,"paddingRight")||0,10)+(0,ujt.default)()+"px"),(0,lMe.default)(t,r)}function vjt(e,t){var r=e.style;Object.keys(r).forEach(function(n){return t.style[n]=r[n]})}var gjt=function e(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.hideSiblingNodes,i=n===void 0?!0:n,o=r.handleContainerOverflow,f=o===void 0?!0:o;fjt(this,e),this.add=function(v,x,E){var S=t.modals.indexOf(v),P=t.containers.indexOf(x);if(S!==-1)return S;if(S=t.modals.length,t.modals.push(v),t.hideSiblingNodes&&(0,M5.hideSiblings)(x,v.modalNode),P!==-1)return t.data[P].modals.push(v),S;var q={modals:[v],classes:E?E.split(/\s+/):[],overflowing:(0,hjt.default)(x)};return t.handleContainerOverflow&&mjt(q,x),q.classes.forEach(sMe.default.addClass.bind(null,x)),t.containers.push(x),t.data.push(q),S},this.remove=function(v){var x=t.modals.indexOf(v);if(x!==-1){var E=djt(t.data,v),S=t.data[E],P=t.containers[E];S.modals.splice(S.modals.indexOf(v),1),t.modals.splice(x,1),S.modals.length===0?(S.classes.forEach(sMe.default.removeClass.bind(null,P)),t.handleContainerOverflow&&vjt(S,P),t.hideSiblingNodes&&(0,M5.showSiblings)(P,v.modalNode),t.containers.splice(E,1),t.data.splice(E,1)):t.hideSiblingNodes&&(0,M5.ariaHidden)(!1,S.modals[S.modals.length-1].modalNode)}},this.isTopModal=function(v){return!!t.modals.length&&t.modals[t.modals.length-1]===v},this.hideSiblingNodes=i,this.handleContainerOverflow=f,this.modals=[],this.containers=[],this.data=[]};qM.default=gjt;uMe.exports=qM.default});var OM=I((RM,hMe)=>{"use strict";RM.__esModule=!0;RM.default=bjt;var yjt=as(),_jt=xjt(yjt);function xjt(e){return e&&e.__esModule?e:{default:e}}function bjt(e,t){return e=typeof e=="function"?e():e,_jt.default.findDOMNode(e)||t}hMe.exports=RM.default});var yMe=I((LM,gMe)=>{"use strict";LM.__esModule=!0;var wjt=Nr(),A5=kg(wjt),Ejt=TM(),Tjt=kg(Ejt),Sjt=rr(),fMe=kg(Sjt),Ijt=as(),pMe=kg(Ijt),Cjt=OM(),dMe=kg(Cjt),Pjt=Kb(),mMe=kg(Pjt);function kg(e){return e&&e.__esModule?e:{default:e}}function Mjt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vMe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Ajt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var q5=function(e){Ajt(t,e);function t(){var r,n,i;Mjt(this,t);for(var o=arguments.length,f=Array(o),v=0;v<o;v++)f[v]=arguments[v];return i=(r=(n=vMe(this,e.call.apply(e,[this].concat(f))),n),n._mountOverlayTarget=function(){n._overlayTarget||(n._overlayTarget=document.createElement("div"),n._portalContainerNode=(0,dMe.default)(n.props.container,(0,mMe.default)(n).body),n._portalContainerNode.appendChild(n._overlayTarget))},n._unmountOverlayTarget=function(){n._overlayTarget&&(n._portalContainerNode.removeChild(n._overlayTarget),n._overlayTarget=null),n._portalContainerNode=null},n._renderOverlay=function(){var x=n.props.children?fMe.default.Children.only(n.props.children):null;if(x!==null){n._mountOverlayTarget();var E=!n._overlayInstance;n._overlayInstance=pMe.default.unstable_renderSubtreeIntoContainer(n,x,n._overlayTarget,function(){E&&n.props.onRendered&&n.props.onRendered()})}else n._unrenderOverlay(),n._unmountOverlayTarget()},n._unrenderOverlay=function(){n._overlayTarget&&(pMe.default.unmountComponentAtNode(n._overlayTarget),n._overlayInstance=null)},n.getMountNode=function(){return n._overlayTarget},r),vMe(n,i)}return t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.UNSAFE_componentWillReceiveProps=function(n){this._overlayTarget&&n.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,dMe.default)(n.container,(0,mMe.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(fMe.default.Component);q5.displayName="Portal";q5.propTypes={container:A5.default.oneOfType([Tjt.default,A5.default.func]),onRendered:A5.default.func};LM.default=q5;gMe.exports=LM.default});var bMe=I((DM,xMe)=>{"use strict";DM.__esModule=!0;var qjt=tu(),Rjt=af(qjt),Ojt=Nr(),R5=af(Ojt),Ljt=TM(),Djt=af(Ljt),kjt=rr(),Njt=af(kjt),Fjt=as(),O5=af(Fjt),zjt=OM(),jjt=af(zjt),Bjt=Kb(),Ujt=af(Bjt),Vjt=yMe(),$jt=af(Vjt);function af(e){return e&&e.__esModule?e:{default:e}}function Gjt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _Me(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Zjt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var L5=function(e){Zjt(t,e);function t(){var r,n,i;Gjt(this,t);for(var o=arguments.length,f=Array(o),v=0;v<o;v++)f[v]=arguments[v];return i=(r=(n=_Me(this,e.call.apply(e,[this].concat(f))),n),n.getMountNode=function(){return n._portalContainerNode},r),_Me(n,i)}return t.prototype.UNSAFE_componentWillMount=function(){if(Rjt.default){var n=this.props.container;typeof n=="function"&&(n=n()),!(n&&!O5.default.findDOMNode(n))&&this.setContainer(n)}},t.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.container!==this.props.container&&this.setContainer(n.container)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.setContainer=function(n){this._portalContainerNode=(0,jjt.default)(n,(0,Ujt.default)(this).body)},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?O5.default.createPortal(this.props.children,this._portalContainerNode):null},t}(Njt.default.Component);L5.displayName="Portal";L5.propTypes={container:R5.default.oneOfType([Djt.default,R5.default.func]),onRendered:R5.default.func};DM.default=O5.default.createPortal?L5:$jt.default;xMe.exports=DM.default});var SMe=I((kM,TMe)=>{"use strict";kM.__esModule=!0;var Wjt=Nr(),Hjt=wMe(Wjt),Kjt=rr(),Yjt=wMe(Kjt);function wMe(e){return e&&e.__esModule?e:{default:e}}function Xjt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qjt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Jjt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var eBt={children:Hjt.default.node},EMe=function(e){Jjt(t,e);function t(){return Xjt(this,t),Qjt(this,e.apply(this,arguments))}return t.prototype.render=function(){return this.props.children},t}(Yjt.default.Component);EMe.propTypes=eBt;kM.default=EMe;TMe.exports=kM.default});var CMe=I((NM,IMe)=>{"use strict";NM.__esModule=!0;NM.default=tBt;function tBt(e){var t=!document.addEventListener,r=void 0;return t?(document.attachEvent("onfocusin",e),r=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),r=function(){return document.removeEventListener("focus",e,!0)}),{remove:r}}IMe.exports=NM.default});var NMe=I((zM,kMe)=>{"use strict";zM.__esModule=!0;var qMe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rBt=KU(),D5=io(rBt),nBt=Gb(),RMe=io(nBt),iBt=tu(),oBt=io(iBt),aBt=Nr(),Jr=io(aBt),sBt=TM(),lBt=io(sBt),uBt=VPe(),cBt=io(uBt),hBt=lc(),PMe=io(hBt),OMe=rr(),sf=io(OMe),fBt=as(),pBt=io(fBt),dBt=zU(),mBt=io(dBt),vBt=cMe(),LMe=io(vBt),gBt=bMe(),DMe=io(gBt),yBt=SMe(),_Bt=io(yBt),xBt=s5(),MMe=io(xBt),bBt=CMe(),wBt=io(bBt),EBt=OM(),TBt=io(EBt),SBt=Kb(),k5=io(SBt);function io(e){return e&&e.__esModule?e:{default:e}}function IBt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AMe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function CBt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var PBt=new LMe.default,FM=function(e){CBt(t,e);function t(){var r,n,i;IBt(this,t);for(var o=arguments.length,f=Array(o),v=0;v<o;v++)f[v]=arguments[v];return i=(r=(n=AMe(this,e.call.apply(e,[this].concat(f))),n),MBt.call(n),r),AMe(n,i)}return t.prototype.omitProps=function(n,i){var o=Object.keys(n),f={};return o.map(function(v){Object.prototype.hasOwnProperty.call(i,v)||(f[v]=n[v])}),f},t.prototype.render=function(){var n=this.props,i=n.show,o=n.container,f=n.children,v=n.transition,x=n.backdrop,E=n.className,S=n.style,P=n.onExit,q=n.onExiting,F=n.onEnter,K=n.onEntering,ne=n.onEntered,Z=sf.default.Children.only(f),W=this.omitProps(this.props,t.propTypes),Q=i||v&&!this.state.exited;if(!Q)return null;var le=Z.props,ce=le.role,ze=le.tabIndex;return(ce===void 0||ze===void 0)&&(Z=(0,OMe.cloneElement)(Z,{role:ce===void 0?"document":ce,tabIndex:ze==null?"-1":ze})),v&&(Z=sf.default.createElement(v,{appear:!0,unmountOnExit:!0,in:i,onExit:P,onExiting:q,onExited:this.handleHidden,onEnter:F,onEntering:K,onEntered:ne},Z)),sf.default.createElement(DMe.default,{ref:this.setMountNode,container:o,onRendered:this.onPortalRendered},sf.default.createElement("div",qMe({ref:this.setModalNodeRef,role:ce||"dialog"},W,{style:S,className:E}),x&&this.renderBackdrop(),sf.default.createElement(_Bt.default,{ref:this.setDialogRef},Z)))},t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},t.prototype.UNSAFE_componentWillUpdate=function(n){!this.props.show&&n.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(n){var i=this.props.transition;n.show&&!this.props.show&&!i?this.onHide():!n.show&&this.props.show&&this.onShow()},t.prototype.componentWillUnmount=function(){var n=this.props,i=n.show,o=n.transition;this._isMounted=!1,(i||o&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var n=this.getDialogElement(),i=(0,D5.default)((0,k5.default)(this));n&&!(0,RMe.default)(n,i)&&(this.lastFocus=i,n.hasAttribute("tabIndex")||((0,mBt.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),n.setAttribute("tabIndex",-1)),n.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return pBt.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(sf.default.Component);FM.propTypes=qMe({},DMe.default.propTypes,{show:Jr.default.bool,container:Jr.default.oneOfType([lBt.default,Jr.default.func]),onShow:Jr.default.func,onHide:Jr.default.func,backdrop:Jr.default.oneOfType([Jr.default.bool,Jr.default.oneOf(["static"])]),renderBackdrop:Jr.default.func,onEscapeKeyDown:Jr.default.func,onEscapeKeyUp:(0,cBt.default)(Jr.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:Jr.default.func,backdropStyle:Jr.default.object,backdropClassName:Jr.default.string,containerClassName:Jr.default.string,keyboard:Jr.default.bool,transition:PMe.default,backdropTransition:PMe.default,autoFocus:Jr.default.bool,enforceFocus:Jr.default.bool,restoreFocus:Jr.default.bool,onEnter:Jr.default.func,onEntering:Jr.default.func,onEntered:Jr.default.func,onExit:Jr.default.func,onExiting:Jr.default.func,onExited:Jr.default.func,manager:Jr.default.object.isRequired});FM.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:PBt,renderBackdrop:function(t){return sf.default.createElement("div",t)}};var MBt=function(){var t=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var r=t.props,n=r.backdropStyle,i=r.backdropClassName,o=r.renderBackdrop,f=r.backdropTransition,v=function(S){return t.backdrop=S},x=o({ref:v,style:n,className:i,onClick:t.handleBackdropClick});return f&&(x=sf.default.createElement(f,{appear:!0,in:t.props.show},x)),x},this.onPortalRendered=function(){t.autoFocus(),t.props.onShow&&t.props.onShow()},this.onShow=function(){var r=(0,k5.default)(t),n=(0,TBt.default)(t.props.container,r.body);t.props.manager.add(t,n,t.props.containerClassName),t._onDocumentKeydownListener=(0,MMe.default)(r,"keydown",t.handleDocumentKeyDown),t._onDocumentKeyupListener=(0,MMe.default)(r,"keyup",t.handleDocumentKeyUp),t._onFocusinListener=(0,wBt.default)(t.enforceFocus)},this.onHide=function(){t.props.manager.remove(t),t._onDocumentKeydownListener.remove(),t._onDocumentKeyupListener.remove(),t._onFocusinListener.remove(),t.props.restoreFocus&&t.restoreLastFocus()},this.setMountNode=function(r){t.mountNode=r&&r.getMountNode()},this.setModalNodeRef=function(r){t.modalNode=r},this.setDialogRef=function(r){t.dialog=r},this.handleHidden=function(){if(t.setState({exited:!0}),t.onHide(),t.props.onExited){var r;(r=t.props).onExited.apply(r,arguments)}},this.handleBackdropClick=function(r){r.target===r.currentTarget&&(t.props.onBackdropClick&&t.props.onBackdropClick(r),t.props.backdrop===!0&&t.props.onHide())},this.handleDocumentKeyDown=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&(t.props.onEscapeKeyDown&&t.props.onEscapeKeyDown(r),t.props.onHide())},this.handleDocumentKeyUp=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&t.props.onEscapeKeyUp&&t.props.onEscapeKeyUp(r)},this.checkForFocus=function(){oBt.default&&(t.lastFocus=(0,D5.default)())},this.enforceFocus=function(){if(!(!t.props.enforceFocus||!t._isMounted||!t.isTopModal())){var r=t.getDialogElement(),n=(0,D5.default)((0,k5.default)(t));r&&!(0,RMe.default)(r,n)&&r.focus()}}};FM.Manager=LMe.default;zM.default=FM;kMe.exports=zM.default});var KBt={};i2e(KBt,{SettingsProvider:()=>WBt,renderAdminApp:()=>HBt});var hAe=He(rr(),1),fAe=He(as(),1),hEr=He(Cxe(),1);var Wbe=He(Obe(),1);var ob=He(Dbe(),1);var Z2t=He(Gbe(),1);var r4=(e,t="control-feedback-container")=>{let r=document.getElementById(t);if(r===null){let n=e.getCanvasContainer();r=document.createElement("div"),r.id=t,n.appendChild(r)}return r};function Ku(e){return e!=null}function Zbe(e){return typeof e=="string"||e instanceof String}function Hu(e){let t=yo.getLanguageDict();if(t===void 0)throw new Error("Dictionary is undefined.");let r=t[e];return r===void 0?(console.warn(`Translation for key "${e}" was not found in dictionary.`),""):r}var H2t={EN:"en",DE:"de"},K2t=typeof process!="undefined"&&Ku(process.env.DEV_MODE_SECRET)&&process.env.DEV_MODE_SECRET!==""&&Ku(process.env.DEV_MODE_NAME)&&process.env.DEV_MODE_NAME!=="",gC=()=>({"Dev-Mode-Secret":process.env.DEV_MODE_SECRET,"Dev-Mode-Name":process.env.DEV_MODE_NAME}),Uo={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:H2t.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},yo={axiosApiInstance:null,appendSettings(e){Uo=Object.assign({},Uo,e)},getSettings(){return Uo},getBaseMaps(){return Uo.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},Uo.MAPVIEW_PARAMS)},getLanguageDict(){return Uo.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return Uo.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},Uo.TERRAIN_TILES)},getUsername(){return Uo.USERNAME},isUserAuthenticated(){return Uo.USER_ISAUTHENTICATED===!0},updateSettings(e){Uo=e},_initAxiosApiInstance(){let e=Uo.API_GEOREFERENCE_BASEURL,t=Zbe(e)&&e.length===0;if(!Ku(e)||t)throw new Error("The URL for the georeference service is not set.");let r=Object.assign({baseURL:e,withCredentials:!0},K2t?{headers:{get:gC(),post:gC(),put:gC(),delete:gC()}}:{});this.axiosApiInstance=Wbe.default.create(r)},getGeoreferenceApiClient(){return Ku(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let e=Uo.MARKER_URL;if(!Ku(e))throw new Error("The marker icon url is not set.");return{id:Uo.MARKER_IMAGE_ID,url:e}},getUserRole(){return Uo.USER_ROLE}};var Rn=He(rr(),1);var tl={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},ulr={9001:tl.METERS,9002:tl.FEET,9003:tl.USFEET,9101:tl.RADIANS,9102:tl.DEGREES};var ga={};ga[tl.RADIANS]=6370997/(2*Math.PI);ga[tl.DEGREES]=2*Math.PI*6370997/360;ga[tl.FEET]=.3048;ga[tl.METERS]=1;ga[tl.USFEET]=1200/3937;var ya=tl;var Y2t=function(){function e(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return e.prototype.canWrapX=function(){return this.canWrapX_},e.prototype.getCode=function(){return this.code_},e.prototype.getExtent=function(){return this.extent_},e.prototype.getUnits=function(){return this.units_},e.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||ga[this.units_]},e.prototype.getWorldExtent=function(){return this.worldExtent_},e.prototype.getAxisOrientation=function(){return this.axisOrientation_},e.prototype.isGlobal=function(){return this.global_},e.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)},e.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},e.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},e.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)},e.prototype.setWorldExtent=function(t){this.worldExtent_=t},e.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},e.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e}(),yC=Y2t;function Xr(e,t,r){return Math.min(Math.max(e,t),r)}var Hbe=function(){var e;return"cosh"in Math?e=Math.cosh:e=function(t){var r=Math.exp(t);return(r+1/r)/2},e}(),Kbe=function(){var e;return"log2"in Math?e=Math.log2:e=function(t){return Math.log(t)*Math.LOG2E},e}();function Ybe(e,t,r,n,i,o){var f=i-r,v=o-n;if(f!==0||v!==0){var x=((e-r)*f+(t-n)*v)/(f*f+v*v);x>1?(r=i,n=o):x>0&&(r+=f*x,n+=v*x)}return Yu(e,t,r,n)}function Yu(e,t,r,n){var i=r-e,o=n-t;return i*i+o*o}function Xbe(e){for(var t=e.length,r=0;r<t;r++){for(var n=r,i=Math.abs(e[r][r]),o=r+1;o<t;o++){var f=Math.abs(e[o][r]);f>i&&(i=f,n=o)}if(i===0)return null;var v=e[n];e[n]=e[r],e[r]=v;for(var x=r+1;x<t;x++)for(var E=-e[x][r]/e[r][r],S=r;S<t+1;S++)r==S?e[x][S]=0:e[x][S]+=E*e[r][S]}for(var P=new Array(t),q=t-1;q>=0;q--){P[q]=e[q][t]/e[q][q];for(var F=q-1;F>=0;F--)e[F][t]-=e[F][q]*P[q]}return P}function Kv(e){return e*Math.PI/180}function rl(e,t){var r=e%t;return r*t<0?r+t:r}function Qbe(e,t,r){return e+r*(t-e)}function Jbe(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}function ab(e,t){return Math.floor(Jbe(e,t))}function sb(e,t){return Math.ceil(Jbe(e,t))}var X2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lb=6378137,Xv=Math.PI*lb,Q2t=[-Xv,-Xv,Xv,Xv],J2t=[-180,-85,180,85],_C=lb*Math.log(Math.tan(Math.PI/2)),Yv=function(e){X2t(t,e);function t(r){return e.call(this,{code:r,units:ya.METERS,extent:Q2t,global:!0,worldExtent:J2t,getPointResolution:function(n,i){return n/Hbe(i[1]/lb)}})||this}return t}(yC),n4=[new Yv("EPSG:3857"),new Yv("EPSG:102100"),new Yv("EPSG:102113"),new Yv("EPSG:900913"),new Yv("http://www.opengis.net/def/crs/EPSG/0/3857"),new Yv("http://www.opengis.net/gml/srs/epsg.xml#3857")];function e1e(e,t,r){var n=e.length,i=r>1?r:2,o=t;o===void 0&&(i>2?o=e.slice():o=new Array(n));for(var f=0;f<n;f+=i){o[f]=Xv*e[f]/180;var v=lb*Math.log(Math.tan(Math.PI*(+e[f+1]+90)/360));v>_C?v=_C:v<-_C&&(v=-_C),o[f+1]=v}return o}function t1e(e,t,r){var n=e.length,i=r>1?r:2,o=t;o===void 0&&(i>2?o=e.slice():o=new Array(n));for(var f=0;f<n;f+=i)o[f]=180*e[f]/Xv,o[f+1]=360*Math.atan(Math.exp(e[f+1]/lb))/Math.PI-90;return o}var eRt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tRt=6378137,r1e=[-180,-90,180,90],rRt=Math.PI*tRt/180,$p=function(e){eRt(t,e);function t(r,n){return e.call(this,{code:r,units:ya.DEGREES,extent:r1e,axisOrientation:n,global:!0,metersPerUnit:rRt,worldExtent:r1e})||this}return t}(yC),i4=[new $p("CRS:84"),new $p("EPSG:4326","neu"),new $p("urn:ogc:def:crs:OGC:1.3:CRS84"),new $p("urn:ogc:def:crs:OGC:2:84"),new $p("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new $p("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new $p("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var o4={};function n1e(e){return o4[e]||o4[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function i1e(e,t){o4[e]=t}var wr=typeof Object.assign=="function"?Object.assign:function(e,t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1,i=arguments.length;n<i;++n){var o=arguments[n];if(o!=null)for(var f in o)o.hasOwnProperty(f)&&(r[f]=o[f])}return r};function Bl(e){for(var t in e)delete e[t]}var o1e=typeof Object.values=="function"?Object.values:function(e){var t=[];for(var r in e)t.push(e[r]);return t};function a1e(e){var t;for(t in e)return!1;return!t}var Qv={};function ub(e,t,r){var n=e.getCode(),i=t.getCode();n in Qv||(Qv[n]={}),Qv[n][i]=r}function s1e(e,t){var r;return e in Qv&&t in Qv[e]&&(r=Qv[e][t]),r}var Ri={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function fr(){return function(){throw new Error("Unimplemented abstract method.")}()}var nRt=0;function ti(e){return e.ol_uid||(e.ol_uid=String(++nRt))}var xC="6.15.1";var iRt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oRt=function(e){iRt(t,e);function t(r){var n=this,i=xC==="latest"?xC:"v"+xC.split("-")[0],o="Assertion failed. See https://openlayers.org/en/"+i+"/doc/errors/#"+r+" for details.";return n=e.call(this,o)||this,n.code=r,n.name="AssertionError",n.message=o,n}return t}(Error),bC=oRt;function Bt(e,t){if(!e)throw new bC(t)}function a4(e){for(var t=_a(),r=0,n=e.length;r<n;++r)hb(t,e[r]);return t}function aRt(e,t,r){var n=Math.min.apply(null,e),i=Math.min.apply(null,t),o=Math.max.apply(null,e),f=Math.max.apply(null,t);return Xu(n,i,o,f,r)}function s4(e,t,r){return r?(r[0]=e[0]-t,r[1]=e[1]-t,r[2]=e[2]+t,r[3]=e[3]+t,r):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function u1e(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function wC(e,t,r){var n,i;return t<e[0]?n=e[0]-t:e[2]<t?n=t-e[2]:n=0,r<e[1]?i=e[1]-r:e[3]<r?i=r-e[3]:i=0,n*n+i*i}function Vh(e,t){return l4(e,t[0],t[1])}function c1e(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function l4(e,t,r){return e[0]<=t&&t<=e[2]&&e[1]<=r&&r<=e[3]}function l1e(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],f=t[0],v=t[1],x=Ri.UNKNOWN;return f<r?x=x|Ri.LEFT:f>i&&(x=x|Ri.RIGHT),v<n?x=x|Ri.BELOW:v>o&&(x=x|Ri.ABOVE),x===Ri.UNKNOWN&&(x=Ri.INTERSECTING),x}function _a(){return[1/0,1/0,-1/0,-1/0]}function Xu(e,t,r,n,i){return i?(i[0]=e,i[1]=t,i[2]=r,i[3]=n,i):[e,t,r,n]}function Jv(e){return Xu(1/0,1/0,-1/0,-1/0,e)}function h1e(e,t){var r=e[0],n=e[1];return Xu(r,n,r,n,t)}function f1e(e,t,r,n,i){var o=Jv(i);return u4(o,e,t,r,n)}function cb(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function p1e(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function hb(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function u4(e,t,r,n,i){for(;r<n;r+=i)sRt(e,t[r],t[r+1]);return e}function sRt(e,t,r){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],r),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],r)}function EC(e,t){var r;return r=t(eg(e)),r||(r=t(tg(e)),r)||(r=t(rg(e)),r)||(r=t(xs(e)),r)?r:!1}function fb(e){var t=0;return db(e)||(t=jr(e)*gi(e)),t}function eg(e){return[e[0],e[1]]}function tg(e){return[e[2],e[1]]}function Qu(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function d1e(e,t){var r;return t==="bottom-left"?r=eg(e):t==="bottom-right"?r=tg(e):t==="top-left"?r=xs(e):t==="top-right"?r=rg(e):Bt(!1,13),r}function pb(e,t,r,n,i){var o=TC(e,t,r,n),f=o[0],v=o[1],x=o[2],E=o[3],S=o[4],P=o[5],q=o[6],F=o[7];return Xu(Math.min(f,x,S,q),Math.min(v,E,P,F),Math.max(f,x,S,q),Math.max(v,E,P,F),i)}function TC(e,t,r,n){var i=t*n[0]/2,o=t*n[1]/2,f=Math.cos(r),v=Math.sin(r),x=i*f,E=i*v,S=o*f,P=o*v,q=e[0],F=e[1];return[q-x+P,F-E-S,q-x-P,F-E+S,q+x-P,F+E+S,q+x+P,F+E-S,q-x+P,F-E-S]}function gi(e){return e[3]-e[1]}function $h(e,t,r){var n=r||_a();return Gp(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):Jv(n),n}function xs(e){return[e[0],e[3]]}function rg(e){return[e[2],e[3]]}function jr(e){return e[2]-e[0]}function Gp(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function db(e){return e[2]<e[0]||e[3]<e[1]}function m1e(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function v1e(e,t,r){var n=!1,i=l1e(e,t),o=l1e(e,r);if(i===Ri.INTERSECTING||o===Ri.INTERSECTING)n=!0;else{var f=e[0],v=e[1],x=e[2],E=e[3],S=t[0],P=t[1],q=r[0],F=r[1],K=(F-P)/(q-S),ne=void 0,Z=void 0;o&Ri.ABOVE&&!(i&Ri.ABOVE)&&(ne=q-(F-E)/K,n=ne>=f&&ne<=x),!n&&o&Ri.RIGHT&&!(i&Ri.RIGHT)&&(Z=F-(q-x)*K,n=Z>=v&&Z<=E),!n&&o&Ri.BELOW&&!(i&Ri.BELOW)&&(ne=q-(F-v)/K,n=ne>=f&&ne<=x),!n&&o&Ri.LEFT&&!(i&Ri.LEFT)&&(Z=F-(q-f)*K,n=Z>=v&&Z<=E)}return n}function g1e(e,t,r,n){var i=[];if(n>1)for(var o=e[2]-e[0],f=e[3]-e[1],v=0;v<n;++v)i.push(e[0]+o*v/n,e[1],e[2],e[1]+f*v/n,e[2]-o*v/n,e[3],e[0],e[3]-f*v/n);else i=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]];t(i,i,2);for(var x=[],E=[],v=0,S=i.length;v<S;v+=2)x.push(i[v]),E.push(i[v+1]);return aRt(x,E,r)}function y1e(e,t){for(var r=(""+e).split("."),n=(""+t).split("."),i=0;i<Math.max(r.length,n.length);i++){var o=parseInt(r[i]||"0",10),f=parseInt(n[i]||"0",10);if(o>f)return 1;if(f>o)return-1}return 0}function _1e(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function Zp(e,t){for(var r=!0,n=e.length-1;n>=0;--n)if(e[n]!=t[n]){r=!1;break}return r}function ng(e,t){var r=Math.cos(t),n=Math.sin(t),i=e[0]*r-e[1]*n,o=e[1]*r+e[0]*n;return e[0]=i,e[1]=o,e}function x1e(e,t){return e[0]*=t,e[1]*=t,e}function b1e(e,t){if(t.canWrapX()){var r=jr(t.getExtent()),n=w1e(e,t,r);n&&(e[0]-=n*r)}return e}function w1e(e,t,r){var n=t.getExtent(),i=0;if(t.canWrapX()&&(e[0]<n[0]||e[0]>n[2])){var o=r||jr(n);i=Math.floor((e[0]-n[0])/o)}return i}var lRt=6371008.8;function c4(e,t,r){var n=r||lRt,i=Kv(e[1]),o=Kv(t[1]),f=(o-i)/2,v=Kv(t[0]-e[0])/2,x=Math.sin(f)*Math.sin(f)+Math.sin(v)*Math.sin(v)*Math.cos(i)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(x),Math.sqrt(1-x))}var h4=!0;function T1e(e){var t=e===void 0?!0:e;h4=!t}function f4(e,t,r){var n;if(t!==void 0){for(var i=0,o=e.length;i<o;++i)t[i]=e[i];n=t}else n=e.slice();return n}function S1e(e,t,r){if(t!==void 0&&e!==t){for(var n=0,i=e.length;n<i;++n)t[n]=e[n];e=t}return e}function uRt(e){i1e(e.getCode(),e),ub(e,e,f4)}function cRt(e){e.forEach(uRt)}function to(e){return typeof e=="string"?n1e(e):e||null}function p4(e,t,r,n){e=to(e);var i,o=e.getPointResolutionFunc();if(o){if(i=o(t,r),n&&n!==e.getUnits()){var f=e.getMetersPerUnit();f&&(i=i*f/ga[n])}}else{var v=e.getUnits();if(v==ya.DEGREES&&!n||n==ya.DEGREES)i=t;else{var x=d4(e,to("EPSG:4326"));if(x===S1e&&v!==ya.DEGREES)i=t*e.getMetersPerUnit();else{var E=[r[0]-t/2,r[1],r[0]+t/2,r[1],r[0],r[1]-t/2,r[0],r[1]+t/2];E=x(E,E,2);var S=c4(E.slice(0,2),E.slice(2,4)),P=c4(E.slice(4,6),E.slice(6,8));i=(S+P)/2}var f=n?ga[n]:e.getMetersPerUnit();f!==void 0&&(i/=f)}}return i}function E1e(e){cRt(e),e.forEach(function(t){e.forEach(function(r){t!==r&&ub(t,r,f4)})})}function hRt(e,t,r,n){e.forEach(function(i){t.forEach(function(o){ub(i,o,r),ub(o,i,n)})})}function SC(e,t){return e?typeof e=="string"?to(e):e:to(t)}function Gh(e,t){if(e===t)return!0;var r=e.getUnits()===t.getUnits();if(e.getCode()===t.getCode())return r;var n=d4(e,t);return n===f4&&r}function d4(e,t){var r=e.getCode(),n=t.getCode(),i=s1e(r,n);return i||(i=S1e),i}function Wp(e,t){var r=to(e),n=to(t);return d4(r,n)}function ig(e,t,r){var n=Wp(t,r);return n(e,void 0,e.length)}function Zh(e,t,r,n){var i=Wp(t,r);return g1e(e,i,void 0,n)}var Ju=null;function I1e(){return Ju}function mb(e,t){return Ju?ig(e,t,Ju):e}function nl(e,t){return Ju?ig(e,Ju,t):(h4&&!Zp(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(h4=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e)}function C1e(e,t){return Ju?Zh(e,t,Ju):e}function Wh(e,t){return Ju?Zh(e,Ju,t):e}function fRt(){E1e(n4),E1e(i4),hRt(i4,n4,e1e,t1e)}fRt();var yg=He(rr(),1),il=He(Nr(),1);var mRt=function(){function e(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return e.prototype.preventDefault=function(){this.defaultPrevented=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e}();var _o=mRt;var ec={PROPERTYCHANGE:"propertychange"};var vRt=function(){function e(){this.disposed=!1}return e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},e.prototype.disposeInternal=function(){},e}(),og=vRt;function vb(e,t){return e>t?1:e<t?-1:0}function ag(e,t,r){var n=e.length;if(e[0]<=t)return 0;if(t<=e[n-1])return n-1;var i=void 0;if(r>0){for(i=1;i<n;++i)if(e[i]<t)return i-1}else if(r<0){for(i=1;i<n;++i)if(e[i]<=t)return i}else for(i=1;i<n;++i){if(e[i]==t)return i;if(e[i]<t)return typeof r=="function"?r(t,e[i-1],e[i])>0?i-1:i:e[i-1]-t<t-e[i]?i-1:i}return n-1}function D1e(e,t){for(var r=Array.isArray(t)?t:[t],n=r.length,i=0;i<n;i++)e[e.length]=r[i]}function sg(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function k1e(e,t,r){var n=t||vb;return e.every(function(i,o){if(o===0)return!0;var f=n(e[o-1],i);return!(f>0||r&&f===0)})}function Hh(){return!0}function tc(){return!1}function rc(){}function N1e(e){var t=!1,r,n,i;return function(){var o=Array.prototype.slice.call(arguments);return(!t||this!==i||!sg(o,n))&&(t=!0,i=this,n=o,r=e.apply(this,arguments)),r}}var gRt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yRt=function(e){gRt(t,e);function t(r){var n=e.call(this)||this;return n.eventTarget_=r,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return t.prototype.addEventListener=function(r,n){if(!(!r||!n)){var i=this.listeners_||(this.listeners_={}),o=i[r]||(i[r]=[]);o.indexOf(n)===-1&&o.push(n)}},t.prototype.dispatchEvent=function(r){var n=typeof r=="string",i=n?r:r.type,o=this.listeners_&&this.listeners_[i];if(o){var f=n?new _o(r):r;f.target||(f.target=this.eventTarget_||this);var v=this.dispatching_||(this.dispatching_={}),x=this.pendingRemovals_||(this.pendingRemovals_={});i in v||(v[i]=0,x[i]=0),++v[i];for(var E,S=0,P=o.length;S<P;++S)if("handleEvent"in o[S]?E=o[S].handleEvent(f):E=o[S].call(this,f),E===!1||f.propagationStopped){E=!1;break}if(--v[i]===0){var q=x[i];for(delete x[i];q--;)this.removeEventListener(i,rc);delete v[i]}return E}},t.prototype.disposeInternal=function(){this.listeners_&&Bl(this.listeners_)},t.prototype.getListeners=function(r){return this.listeners_&&this.listeners_[r]||void 0},t.prototype.hasListener=function(r){return this.listeners_?r?r in this.listeners_:Object.keys(this.listeners_).length>0:!1},t.prototype.removeEventListener=function(r,n){var i=this.listeners_&&this.listeners_[r];if(i){var o=i.indexOf(n);o!==-1&&(this.pendingRemovals_&&r in this.pendingRemovals_?(i[o]=rc,++this.pendingRemovals_[r]):(i.splice(o,1),i.length===0&&delete this.listeners_[r]))}},t}(og),Ul=yRt;var gt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Qt(e,t,r,n,i){if(n&&n!==e&&(r=r.bind(n)),i){var o=r;r=function(){e.removeEventListener(t,r),o.apply(this,arguments)}}var f={target:e,type:t,listener:r};return e.addEventListener(t,r),f}function lg(e,t,r,n){return Qt(e,t,r,n,!0)}function gr(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Bl(e))}var _Rt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IC=function(e){_Rt(t,e);function t(){var r=e.call(this)||this;return r.on=r.onInternal,r.once=r.onceInternal,r.un=r.unInternal,r.revision_=0,r}return t.prototype.changed=function(){++this.revision_,this.dispatchEvent(gt.CHANGE)},t.prototype.getRevision=function(){return this.revision_},t.prototype.onInternal=function(r,n){if(Array.isArray(r)){for(var i=r.length,o=new Array(i),f=0;f<i;++f)o[f]=Qt(this,r[f],n);return o}else return Qt(this,r,n)},t.prototype.onceInternal=function(r,n){var i;if(Array.isArray(r)){var o=r.length;i=new Array(o);for(var f=0;f<o;++f)i[f]=lg(this,r[f],n)}else i=lg(this,r,n);return n.ol_key=i,i},t.prototype.unInternal=function(r,n){var i=n.ol_key;if(i)xRt(i);else if(Array.isArray(r))for(var o=0,f=r.length;o<f;++o)this.removeEventListener(r[o],n);else this.removeEventListener(r,n)},t}(Ul);IC.prototype.on;IC.prototype.once;IC.prototype.un;function xRt(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;++t)gr(e[t]);else gr(e)}var CC=IC;var z1e=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),F1e=function(e){z1e(t,e);function t(r,n,i){var o=e.call(this,r)||this;return o.key=n,o.oldValue=i,o}return t}(_o);var bRt=function(e){z1e(t,e);function t(r){var n=e.call(this)||this;return n.on,n.once,n.un,ti(n),n.values_=null,r!==void 0&&n.setProperties(r),n}return t.prototype.get=function(r){var n;return this.values_&&this.values_.hasOwnProperty(r)&&(n=this.values_[r]),n},t.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},t.prototype.getProperties=function(){return this.values_&&wr({},this.values_)||{}},t.prototype.hasProperties=function(){return!!this.values_},t.prototype.notify=function(r,n){var i;i="change:".concat(r),this.hasListener(i)&&this.dispatchEvent(new F1e(i,r,n)),i=ec.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new F1e(i,r,n))},t.prototype.addChangeListener=function(r,n){this.addEventListener("change:".concat(r),n)},t.prototype.removeChangeListener=function(r,n){this.removeEventListener("change:".concat(r),n)},t.prototype.set=function(r,n,i){var o=this.values_||(this.values_={});if(i)o[r]=n;else{var f=o[r];o[r]=n,f!==n&&this.notify(r,f)}},t.prototype.setProperties=function(r,n){for(var i in r)this.set(i,r[i],n)},t.prototype.applyProperties=function(r){r.values_&&wr(this.values_||(this.values_={}),r.values_)},t.prototype.unset=function(r,n){if(this.values_&&r in this.values_){var i=this.values_[r];delete this.values_[r],a1e(this.values_)&&(this.values_=null),n||this.notify(r,i)}},t}(CC),Oi=bRt;var m4={ACTIVE:"active"};function v4(e){return Math.pow(e,3)}function bs(e){return 1-v4(1-e)}function j1e(e){return 3*e*e-2*e*e*e}function B1e(e){return e}var wRt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ERt=function(e){wRt(t,e);function t(r){var n=e.call(this)||this;return n.on,n.once,n.un,r&&r.handleEvent&&(n.handleEvent=r.handleEvent),n.map_=null,n.setActive(!0),n}return t.prototype.getActive=function(){return this.get(m4.ACTIVE)},t.prototype.getMap=function(){return this.map_},t.prototype.handleEvent=function(r){return!0},t.prototype.setActive=function(r){this.set(m4.ACTIVE,r)},t.prototype.setMap=function(r){this.map_=r},t}(Oi);function U1e(e,t,r){var n=e.getCenterInternal();if(n){var i=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:r!==void 0?r:250,easing:B1e,center:e.getConstrainedCenter(i)})}}function ug(e,t,r,n){var i=e.getZoom();if(i!==void 0){var o=e.getConstrainedZoom(i+t),f=e.getResolutionForZoom(o);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:f,anchor:r,duration:n!==void 0?n:250,easing:bs})}}var Vl=ERt;var Qr={SINGLECLICK:"singleclick",CLICK:gt.CLICK,DBLCLICK:gt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var TRt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),SRt=function(e){TRt(t,e);function t(r){var n=this,i=r||{};return n=e.call(this,i)||this,i.handleDownEvent&&(n.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(n.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(n.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(n.handleUpEvent=i.handleUpEvent),i.stopDown&&(n.stopDown=i.stopDown),n.handlingDownUpSequence=!1,n.targetPointers=[],n}return t.prototype.getPointerCount=function(){return this.targetPointers.length},t.prototype.handleDownEvent=function(r){return!1},t.prototype.handleDragEvent=function(r){},t.prototype.handleEvent=function(r){if(!r.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(r),this.handlingDownUpSequence){if(r.type==Qr.POINTERDRAG)this.handleDragEvent(r),r.originalEvent.preventDefault();else if(r.type==Qr.POINTERUP){var i=this.handleUpEvent(r);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(r.type==Qr.POINTERDOWN){var o=this.handleDownEvent(r);this.handlingDownUpSequence=o,n=this.stopDown(o)}else r.type==Qr.POINTERMOVE&&this.handleMoveEvent(r);return!n},t.prototype.handleMoveEvent=function(r){},t.prototype.handleUpEvent=function(r){return!1},t.prototype.stopDown=function(r){return r},t.prototype.updateTrackedPointers_=function(r){r.activePointers&&(this.targetPointers=r.activePointers)},t}(Vl);function cg(e){for(var t=e.length,r=0,n=0,i=0;i<t;i++)r+=e[i].clientX,n+=e[i].clientY;return[r/t,n/t]}var $l=SRt;var xo={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};var Kh=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",V1e=Kh.indexOf("firefox")!==-1,IRt=Kh.indexOf("safari")!==-1&&Kh.indexOf("chrom")==-1,Nur=IRt&&!!(Kh.indexOf("version/15.4")>=0||Kh.match(/cpu (os|iphone os) 15_4 like mac os x/)),$1e=Kh.indexOf("webkit")!==-1&&Kh.indexOf("edge")==-1,G1e=Kh.indexOf("macintosh")!==-1,PC=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,MC=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,Z1e=typeof Image!="undefined"&&Image.prototype.decode,AC=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(r){}return e}();var Bur=new Array(6);function nc(){return[1,0,0,1,0,0]}function ro(e,t){var r=t[0],n=t[1];return t[0]=e[0]*r+e[2]*n+e[4],t[1]=e[1]*r+e[3]*n+e[5],t}function ic(e,t,r,n,i,o,f,v){var x=Math.sin(o),E=Math.cos(o);return e[0]=n*E,e[1]=i*x,e[2]=-n*x,e[3]=i*E,e[4]=f*n*E-v*n*x+t,e[5]=f*i*x+v*i*E+r,e}function qC(e,t){var r=CRt(t);Bt(r!==0,32);var n=t[0],i=t[1],o=t[2],f=t[3],v=t[4],x=t[5];return e[0]=f/r,e[1]=-i/r,e[2]=-o/r,e[3]=n/r,e[4]=(o*x-f*v)/r,e[5]=-(n*x-i*v)/r,e}function CRt(e){return e[0]*e[3]-e[1]*e[2]}var W1e;function H1e(e){var t="matrix("+e.join(", ")+")";if(MC)return t;var r=W1e||(W1e=document.createElement("div"));return r.style.transform=t,r.style.transform}function g4(e,t,r,n,i,o){for(var f=o||[],v=0,x=t;x<r;x+=n){var E=e[x],S=e[x+1];f[v++]=i[0]*E+i[2]*S+i[4],f[v++]=i[1]*E+i[3]*S+i[5]}return o&&f.length!=v&&(f.length=v),f}function K1e(e,t,r,n,i,o,f){for(var v=f||[],x=Math.cos(i),E=Math.sin(i),S=o[0],P=o[1],q=0,F=t;F<r;F+=n){var K=e[F]-S,ne=e[F+1]-P;v[q++]=S+K*x-ne*E,v[q++]=P+K*E+ne*x;for(var Z=F+2;Z<F+n;++Z)v[q++]=e[Z]}return f&&v.length!=q&&(v.length=q),v}function Y1e(e,t,r,n,i,o,f,v){for(var x=v||[],E=f[0],S=f[1],P=0,q=t;q<r;q+=n){var F=e[q]-E,K=e[q+1]-S;x[P++]=E+i*F,x[P++]=S+o*K;for(var ne=q+2;ne<q+n;++ne)x[P++]=e[ne]}return v&&x.length!=P&&(x.length=P),x}function X1e(e,t,r,n,i,o,f){for(var v=f||[],x=0,E=t;E<r;E+=n){v[x++]=e[E]+i,v[x++]=e[E+1]+o;for(var S=E+2;S<E+n;++S)v[x++]=e[S]}return f&&v.length!=x&&(v.length=x),v}var PRt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q1e=nc(),MRt=function(e){PRt(t,e);function t(){var r=e.call(this)||this;return r.extent_=_a(),r.extentRevision_=-1,r.simplifiedGeometryMaxMinSquaredTolerance=0,r.simplifiedGeometryRevision=0,r.simplifyTransformedInternal=N1e(function(n,i,o){if(!o)return this.getSimplifiedGeometry(i);var f=this.clone();return f.applyTransform(o),f.getSimplifiedGeometry(i)}),r}return t.prototype.simplifyTransformed=function(r,n){return this.simplifyTransformedInternal(this.getRevision(),r,n)},t.prototype.clone=function(){return fr()},t.prototype.closestPointXY=function(r,n,i,o){return fr()},t.prototype.containsXY=function(r,n){var i=this.getClosestPoint([r,n]);return i[0]===r&&i[1]===n},t.prototype.getClosestPoint=function(r,n){var i=n||[NaN,NaN];return this.closestPointXY(r[0],r[1],i,1/0),i},t.prototype.intersectsCoordinate=function(r){return this.containsXY(r[0],r[1])},t.prototype.computeExtent=function(r){return fr()},t.prototype.getExtent=function(r){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&Jv(n),this.extentRevision_=this.getRevision()}return m1e(this.extent_,r)},t.prototype.rotate=function(r,n){fr()},t.prototype.scale=function(r,n,i){fr()},t.prototype.simplify=function(r){return this.getSimplifiedGeometry(r*r)},t.prototype.getSimplifiedGeometry=function(r){return fr()},t.prototype.getType=function(){return fr()},t.prototype.applyTransform=function(r){fr()},t.prototype.intersectsExtent=function(r){return fr()},t.prototype.translate=function(r,n){fr()},t.prototype.transform=function(r,n){var i=to(r),o=i.getUnits()==ya.TILE_PIXELS?function(f,v,x){var E=i.getExtent(),S=i.getWorldExtent(),P=gi(S)/gi(E);return ic(Q1e,S[0],S[3],P,-P,0,0,0),g4(f,0,f.length,x,Q1e,v),Wp(i,n)(f,v,x)}:Wp(i,n);return this.applyTransform(o),this},t}(Oi),J1e=MRt;var ARt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qRt=function(e){ARt(t,e);function t(){var r=e.call(this)||this;return r.layout=xo.XY,r.stride=2,r.flatCoordinates=null,r}return t.prototype.computeExtent=function(r){return f1e(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r)},t.prototype.getCoordinates=function(){return fr()},t.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.getFlatCoordinates=function(){return this.flatCoordinates},t.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},t.prototype.getLayout=function(){return this.layout},t.prototype.getSimplifiedGeometry=function(r){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),r<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&r<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(r),i=n.getFlatCoordinates();return i.length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=r,this)},t.prototype.getSimplifiedGeometryInternal=function(r){return this},t.prototype.getStride=function(){return this.stride},t.prototype.setFlatCoordinates=function(r,n){this.stride=ewe(r),this.layout=r,this.flatCoordinates=n},t.prototype.setCoordinates=function(r,n){fr()},t.prototype.setLayout=function(r,n,i){var o;if(r)o=ewe(r);else{for(var f=0;f<i;++f)if(n.length===0){this.layout=xo.XY,this.stride=2;return}else n=n[0];o=n.length,r=RRt(o)}this.layout=r,this.stride=o},t.prototype.applyTransform=function(r){this.flatCoordinates&&(r(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},t.prototype.rotate=function(r,n){var i=this.getFlatCoordinates();if(i){var o=this.getStride();K1e(i,0,i.length,o,r,n,i),this.changed()}},t.prototype.scale=function(r,n,i){var o=n;o===void 0&&(o=r);var f=i;f||(f=Qu(this.getExtent()));var v=this.getFlatCoordinates();if(v){var x=this.getStride();Y1e(v,0,v.length,x,r,o,f,v),this.changed()}},t.prototype.translate=function(r,n){var i=this.getFlatCoordinates();if(i){var o=this.getStride();X1e(i,0,i.length,o,r,n,i),this.changed()}},t}(J1e);function RRt(e){var t;return e==2?t=xo.XY:e==3?t=xo.XYZ:e==4&&(t=xo.XYZM),t}function ewe(e){var t;return e==xo.XY?t=2:e==xo.XYZ||e==xo.XYM?t=3:e==xo.XYZM&&(t=4),t}var hg=qRt;function twe(e,t,r,n,i,o,f){var v=e[t],x=e[t+1],E=e[r]-v,S=e[r+1]-x,P;if(E===0&&S===0)P=t;else{var q=((i-v)*E+(o-x)*S)/(E*E+S*S);if(q>1)P=r;else if(q>0){for(var F=0;F<n;++F)f[F]=Qbe(e[t+F],e[r+F],q);f.length=n;return}else P=t}for(var F=0;F<n;++F)f[F]=e[P+F];f.length=n}function y4(e,t,r,n,i){var o=e[t],f=e[t+1];for(t+=n;t<r;t+=n){var v=e[t],x=e[t+1],E=Yu(o,f,v,x);E>i&&(i=E),o=v,f=x}return i}function rwe(e,t,r,n,i){for(var o=0,f=r.length;o<f;++o){var v=r[o];i=y4(e,t,v,n,i),t=v}return i}function _4(e,t,r,n,i,o,f,v,x,E,S){if(t==r)return E;var P,q;if(i===0)if(q=Yu(f,v,e[t],e[t+1]),q<E){for(P=0;P<n;++P)x[P]=e[t+P];return x.length=n,q}else return E;for(var F=S||[NaN,NaN],K=t+n;K<r;)if(twe(e,K-n,K,n,f,v,F),q=Yu(f,v,F[0],F[1]),q<E){for(E=q,P=0;P<n;++P)x[P]=F[P];x.length=n,K+=n}else K+=n*Math.max((Math.sqrt(q)-Math.sqrt(E))/i|0,1);if(o&&(twe(e,r-n,t,n,f,v,F),q=Yu(f,v,F[0],F[1]),q<E)){for(E=q,P=0;P<n;++P)x[P]=F[P];x.length=n}return E}function nwe(e,t,r,n,i,o,f,v,x,E,S){for(var P=S||[NaN,NaN],q=0,F=r.length;q<F;++q){var K=r[q];E=_4(e,t,K,n,i,o,f,v,x,E,P),t=K}return E}function iwe(e,t,r,n){for(var i=0,o=r.length;i<o;++i)e[t++]=r[i];return t}function x4(e,t,r,n){for(var i=0,o=r.length;i<o;++i)for(var f=r[i],v=0;v<n;++v)e[t++]=f[v];return t}function owe(e,t,r,n,i){for(var o=i||[],f=0,v=0,x=r.length;v<x;++v){var E=x4(e,t,r[v],n);o[f++]=E,t=E}return o.length=f,o}function awe(e,t,r,n,i,o,f){var v=(r-t)/n;if(v<3){for(;t<r;t+=n)o[f++]=e[t],o[f++]=e[t+1];return f}var x=new Array(v);x[0]=1,x[v-1]=1;for(var E=[t,r-n],S=0;E.length>0;){for(var P=E.pop(),q=E.pop(),F=0,K=e[q],ne=e[q+1],Z=e[P],W=e[P+1],Q=q+n;Q<P;Q+=n){var le=e[Q],ce=e[Q+1],ze=Ybe(le,ce,K,ne,Z,W);ze>F&&(S=Q,F=ze)}F>i&&(x[(S-t)/n]=1,q+n<S&&E.push(q,S),S+n<P&&E.push(S,P))}for(var Q=0;Q<v;++Q)x[Q]&&(o[f++]=e[t+Q*n],o[f++]=e[t+Q*n+1]);return f}function fg(e,t){return t*Math.round(e/t)}function ORt(e,t,r,n,i,o,f){if(t==r)return f;var v=fg(e[t],i),x=fg(e[t+1],i);t+=n,o[f++]=v,o[f++]=x;var E,S;do if(E=fg(e[t],i),S=fg(e[t+1],i),t+=n,t==r)return o[f++]=E,o[f++]=S,f;while(E==v&&S==x);for(;t<r;){var P=fg(e[t],i),q=fg(e[t+1],i);if(t+=n,!(P==E&&q==S)){var F=E-v,K=S-x,ne=P-v,Z=q-x;if(F*Z==K*ne&&(F<0&&ne<F||F==ne||F>0&&ne>F)&&(K<0&&Z<K||K==Z||K>0&&Z>K)){E=P,S=q;continue}o[f++]=E,o[f++]=S,v=E,x=S,E=P,S=q}}return o[f++]=E,o[f++]=S,f}function swe(e,t,r,n,i,o,f,v){for(var x=0,E=r.length;x<E;++x){var S=r[x];f=ORt(e,t,S,n,i,o,f),v.push(f),t=S}return f}function b4(e,t,r,n,i){for(var o=i!==void 0?i:[],f=0,v=t;v<r;v+=n)o[f++]=e.slice(v,v+n);return o.length=f,o}function lwe(e,t,r,n,i){for(var o=i!==void 0?i:[],f=0,v=0,x=r.length;v<x;++v){var E=r[v];o[f++]=b4(e,t,E,n,o[f]),t=E}return o.length=f,o}function w4(e,t,r,n){for(var i=0,o=e[r-n],f=e[r-n+1];t<r;t+=n){var v=e[t],x=e[t+1];i+=f*v-o*x,o=v,f=x}return i/2}function uwe(e,t,r,n){for(var i=0,o=0,f=r.length;o<f;++o){var v=r[o];i+=w4(e,t,v,n),t=v}return i}var LRt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DRt=function(e){LRt(t,e);function t(r,n){var i=e.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(r[0])?i.setFlatCoordinates(n,r):i.setCoordinates(r,n),i}return t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(r,n,i,o){return o<wC(this.getExtent(),r,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(y4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,r,n,i,o))},t.prototype.getArea=function(){return w4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinates=function(){return b4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getSimplifiedGeometryInternal=function(r){var n=[];return n.length=awe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,n,0),new t(n,xo.XY)},t.prototype.getType=function(){return"LinearRing"},t.prototype.intersectsExtent=function(r){return!1},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=x4(this.flatCoordinates,0,r,this.stride),this.changed()},t}(hg),E4=DRt;var kRt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NRt=function(e){kRt(t,e);function t(r,n){var i=e.call(this)||this;return i.setCoordinates(r,n),i}return t.prototype.clone=function(){var r=new t(this.flatCoordinates.slice(),this.layout);return r.applyProperties(this),r},t.prototype.closestPointXY=function(r,n,i,o){var f=this.flatCoordinates,v=Yu(r,n,f[0],f[1]);if(v<o){for(var x=this.stride,E=0;E<x;++E)i[E]=f[E];return i.length=x,v}else return o},t.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},t.prototype.computeExtent=function(r){return h1e(this.flatCoordinates,r)},t.prototype.getType=function(){return"Point"},t.prototype.intersectsExtent=function(r){return l4(r,this.flatCoordinates[0],this.flatCoordinates[1])},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=iwe(this.flatCoordinates,0,r,this.stride),this.changed()},t}(hg),cwe=NRt;function hwe(e,t,r,n,i){var o=EC(i,function(f){return!Yh(e,t,r,n,f[0],f[1])});return!o}function Yh(e,t,r,n,i,o){for(var f=0,v=e[r-n],x=e[r-n+1];t<r;t+=n){var E=e[t],S=e[t+1];x<=o?S>o&&(E-v)*(o-x)-(i-v)*(S-x)>0&&f++:S<=o&&(E-v)*(o-x)-(i-v)*(S-x)<0&&f--,v=E,x=S}return f!==0}function RC(e,t,r,n,i,o){if(r.length===0||!Yh(e,t,r[0],n,i,o))return!1;for(var f=1,v=r.length;f<v;++f)if(Yh(e,r[f-1],r[f],n,i,o))return!1;return!0}function fwe(e,t,r,n,i,o,f){for(var v,x,E,S,P,q,F,K=i[o+1],ne=[],Z=0,W=r.length;Z<W;++Z){var Q=r[Z];for(S=e[Q-n],q=e[Q-n+1],v=t;v<Q;v+=n)P=e[v],F=e[v+1],(K<=q&&F<=K||q<=K&&K<=F)&&(E=(K-q)/(F-q)*(P-S)+S,ne.push(E)),S=P,q=F}var le=NaN,ce=-1/0;for(ne.sort(vb),S=ne[0],v=1,x=ne.length;v<x;++v){P=ne[v];var ze=Math.abs(P-S);ze>ce&&(E=(S+P)/2,RC(e,t,r,n,E,K)&&(le=E,ce=ze)),S=P}return isNaN(le)&&(le=i[o]),f?(f.push(le,K,ce),f):[le,K,ce]}function pwe(e,t,r,n,i){var o;for(t+=n;t<r;t+=n)if(o=i(e.slice(t-n,t),e.slice(t,t+n)),o)return o;return!1}function dwe(e,t,r,n,i){var o=u4(_a(),e,t,r,n);return Gp(i,o)?c1e(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:pwe(e,t,r,n,function(f,v){return v1e(i,f,v)}):!1}function T4(e,t,r,n,i){return!!(dwe(e,t,r,n,i)||Yh(e,t,r,n,i[0],i[1])||Yh(e,t,r,n,i[0],i[3])||Yh(e,t,r,n,i[2],i[1])||Yh(e,t,r,n,i[2],i[3]))}function mwe(e,t,r,n,i){if(!T4(e,t,r[0],n,i))return!1;if(r.length===1)return!0;for(var o=1,f=r.length;o<f;++o)if(hwe(e,r[o-1],r[o],n,i)&&!dwe(e,r[o-1],r[o],n,i))return!1;return!0}function vwe(e,t,r,n){for(;t<r-n;){for(var i=0;i<n;++i){var o=e[t+i];e[t+i]=e[r-n+i],e[r-n+i]=o}t+=n,r-=n}}function gwe(e,t,r,n){for(var i=0,o=e[r-n],f=e[r-n+1];t<r;t+=n){var v=e[t],x=e[t+1];i+=(v-o)*(x+f),o=v,f=x}return i===0?void 0:i>0}function ywe(e,t,r,n,i){for(var o=i!==void 0?i:!1,f=0,v=r.length;f<v;++f){var x=r[f],E=gwe(e,t,x,n);if(f===0){if(o&&E||!o&&!E)return!1}else if(o&&!E||!o&&E)return!1;t=x}return!0}function S4(e,t,r,n,i){for(var o=i!==void 0?i:!1,f=0,v=r.length;f<v;++f){var x=r[f],E=gwe(e,t,x,n),S=f===0?o&&E||!o&&!E:o&&!E||!o&&E;S&&vwe(e,t,x,n),t=x}return t}var FRt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_we=function(e){FRt(t,e);function t(r,n,i){var o=e.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,n!==void 0&&i?(o.setFlatCoordinates(n,r),o.ends_=i):o.setCoordinates(r,n),o}return t.prototype.appendLinearRing=function(r){this.flatCoordinates?D1e(this.flatCoordinates,r.getFlatCoordinates()):this.flatCoordinates=r.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){var r=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return r.applyProperties(this),r},t.prototype.closestPointXY=function(r,n,i,o){return o<wC(this.getExtent(),r,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(rwe(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),nwe(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,r,n,i,o))},t.prototype.containsXY=function(r,n){return RC(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,n)},t.prototype.getArea=function(){return uwe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},t.prototype.getCoordinates=function(r){var n;return r!==void 0?(n=this.getOrientedFlatCoordinates().slice(),S4(n,0,this.ends_,this.stride,r)):n=this.flatCoordinates,lwe(n,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var r=Qu(this.getExtent());this.flatInteriorPoint_=fwe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},t.prototype.getInteriorPoint=function(){return new cwe(this.getFlatInteriorPoint(),xo.XYM)},t.prototype.getLinearRingCount=function(){return this.ends_.length},t.prototype.getLinearRing=function(r){return r<0||this.ends_.length<=r?null:new E4(this.flatCoordinates.slice(r===0?0:this.ends_[r-1],this.ends_[r]),this.layout)},t.prototype.getLinearRings=function(){for(var r=this.layout,n=this.flatCoordinates,i=this.ends_,o=[],f=0,v=0,x=i.length;v<x;++v){var E=i[v],S=new E4(n.slice(f,E),r);o.push(S),f=E}return o},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var r=this.flatCoordinates;ywe(r,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=r:(this.orientedFlatCoordinates_=r.slice(),this.orientedFlatCoordinates_.length=S4(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(r){var n=[],i=[];return n.length=swe(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(r),n,0,i),new t(n,xo.XY,i)},t.prototype.getType=function(){return"Polygon"},t.prototype.intersectsExtent=function(r){return mwe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r)},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=owe(this.flatCoordinates,0,r,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},t}(hg),OC=_we;function gb(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=[t,r,t,i,n,i,n,r,t,r];return new _we(o,xo.XY,[o.length])}var zRt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jRt=function(e){zRt(t,e);function t(r){var n=e.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+r,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return t.prototype.disposeInternal=function(){this.setMap(null)},t.prototype.render_=function(){var r=this.startPixel_,n=this.endPixel_,i="px",o=this.element_.style;o.left=Math.min(r[0],n[0])+i,o.top=Math.min(r[1],n[1])+i,o.width=Math.abs(n[0]-r[0])+i,o.height=Math.abs(n[1]-r[1])+i},t.prototype.setMap=function(r){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=r,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},t.prototype.setPixels=function(r,n){this.startPixel_=r,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},t.prototype.createOrUpdateGeometry=function(){var r=this.startPixel_,n=this.endPixel_,i=[r,[r[0],n[1]],n,[n[0],r[1]]],o=i.map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new OC([o])},t.prototype.getGeometry=function(){return this.geometry_},t}(og),xwe=jRt;function yb(e){var t=arguments;return function(r){for(var n=!0,i=0,o=t.length;i<o&&(n=n&&t[i](r),!!n);++i);return n}}var bwe=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},BRt=function(e){var t=e.map.getTargetElement(),r=e.map.getOwnerDocument().activeElement;return t.contains(r)},LC=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?BRt(e):!0},wwe=Hh;var DC=function(e){var t=e.originalEvent;return t.button==0&&!($1e&&G1e&&t.ctrlKey)};var kC=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var Ewe=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},NC=function(e){var t=e.originalEvent,r=t.target.tagName;return r!=="INPUT"&&r!=="SELECT"&&r!=="TEXTAREA"&&!t.target.isContentEditable},FC=function(e){var t=e.originalEvent;return Bt(t!==void 0,56),t.pointerType=="mouse"};var Twe=function(e){var t=e.originalEvent;return Bt(t!==void 0,56),t.isPrimary&&t.button===0};var Swe=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zC={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},I4=function(e){Swe(t,e);function t(r,n,i){var o=e.call(this,r)||this;return o.coordinate=n,o.mapBrowserEvent=i,o}return t}(_o);var URt=function(e){Swe(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var i=r||{};return n.box_=new xwe(i.className||"ol-dragbox"),n.minArea_=i.minArea!==void 0?i.minArea:64,i.onBoxEnd&&(n.onBoxEnd=i.onBoxEnd),n.startPixel_=null,n.condition_=i.condition?i.condition:DC,n.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:n.defaultBoxEndCondition,n}return t.prototype.defaultBoxEndCondition=function(r,n,i){var o=i[0]-n[0],f=i[1]-n[1];return o*o+f*f>=this.minArea_},t.prototype.getGeometry=function(){return this.box_.getGeometry()},t.prototype.handleDragEvent=function(r){this.box_.setPixels(this.startPixel_,r.pixel),this.dispatchEvent(new I4(zC.BOXDRAG,r.coordinate,r))},t.prototype.handleUpEvent=function(r){this.box_.setMap(null);var n=this.boxEndCondition_(r,this.startPixel_,r.pixel);return n&&this.onBoxEnd(r),this.dispatchEvent(new I4(n?zC.BOXEND:zC.BOXCANCEL,r.coordinate,r)),!1},t.prototype.handleDownEvent=function(r){return this.condition_(r)?(this.startPixel_=r.pixel,this.box_.setMap(r.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new I4(zC.BOXSTART,r.coordinate,r)),!0):!1},t.prototype.onBoxEnd=function(r){},t}($l),Iwe=URt;var VRt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$Rt=function(e){VRt(t,e);function t(r){var n=this,i=r||{},o=i.condition?i.condition:Ewe;return n=e.call(this,{condition:o,className:i.className||"ol-dragzoom",minArea:i.minArea})||this,n.duration_=i.duration!==void 0?i.duration:200,n.out_=i.out!==void 0?i.out:!1,n}return t.prototype.onBoxEnd=function(r){var n=this.getMap(),i=n.getView(),o=this.getGeometry();if(this.out_){var f=i.rotatedExtentForGeometry(o),v=i.getResolutionForExtentInternal(f),x=i.getResolution()/v;o=o.clone(),o.scale(x*x)}i.fitInternal(o,{duration:this.duration_,easing:bs})},t}(Iwe),jC=$Rt;var Gl={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};function oc(e,t,r,n){var i;return r&&r.length?i=r.shift():MC?i=new OffscreenCanvas(e||300,t||300):i=document.createElement("canvas"),e&&(i.width=e),t&&(i.height=t),i.getContext("2d",n)}function Cwe(e){var t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function pg(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function _b(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function Pwe(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function Mwe(e,t){for(var r=e.childNodes,n=0;;++n){var i=r[n],o=t[n];if(!i&&!o)break;if(i!==o){if(!i){e.appendChild(o);continue}if(!o){e.removeChild(i),--n;continue}e.insertBefore(o,i)}}}var GRt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZRt=function(e){GRt(t,e);function t(r){var n=e.call(this)||this,i=r.element;return i&&!r.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),n.element=i||null,n.target_=null,n.map_=null,n.listenerKeys=[],r.render&&(n.render=r.render),r.target&&n.setTarget(r.target),n}return t.prototype.disposeInternal=function(){_b(this.element),e.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(r){this.map_&&_b(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n)gr(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=r,r){var o=this.target_?this.target_:r.getOverlayContainerStopEvent();o.appendChild(this.element),this.render!==rc&&this.listenerKeys.push(Qt(r,Gl.POSTRENDER,this.render,this)),r.render()}},t.prototype.render=function(r){},t.prototype.setTarget=function(r){this.target_=typeof r=="string"?document.getElementById(r):r},t}(Oi),Ba=ZRt;var ri={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var xb="ol-hidden";var ws="ol-unselectable",C4="ol-unsupported",Zl="ol-control",P4="ol-collapsed",WRt=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Awe=["style","variant","weight","size","lineHeight","family"],qwe=function(e){var t=e.match(WRt);if(!t)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=Awe.length;n<i;++n){var o=t[n+1];o!==void 0&&(r[Awe[n]]=o)}return r.families=r.family.split(/,\s?/),r};var HRt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rwe=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],Owe={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},KRt=function(e){HRt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,{element:document.createElement("div"),target:i.target})||this,n.on,n.once,n.un,n.keys_=i.keys!==void 0?i.keys:!1,n.source_=i.source,n.isInFullscreen_=!1,n.boundHandleMapTargetChange_=n.handleMapTargetChange_.bind(n),n.cssClassName_=i.className!==void 0?i.className:"ol-full-screen",n.documentListeners_=[],n.activeClassName_=i.activeClassName!==void 0?i.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=i.inactiveClassName!==void 0?i.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var o=i.label!==void 0?i.label:"\u2922";n.labelNode_=typeof o=="string"?document.createTextNode(o):o;var f=i.labelActive!==void 0?i.labelActive:"\xD7";n.labelActiveNode_=typeof f=="string"?document.createTextNode(f):f;var v=i.tipLabel?i.tipLabel:"Toggle full-screen";return n.button_=document.createElement("button"),n.button_.title=v,n.button_.setAttribute("type","button"),n.button_.appendChild(n.labelNode_),n.button_.addEventListener(gt.CLICK,n.handleClick_.bind(n),!1),n.setClassName_(n.button_,n.isInFullscreen_),n.element.className="".concat(n.cssClassName_," ").concat(ws," ").concat(Zl),n.element.appendChild(n.button_),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.handleFullScreen_()},t.prototype.handleFullScreen_=function(){var r=this.getMap();if(r){var n=r.getOwnerDocument();if(Lwe(n))if(Dwe(n))XRt(n);else{var i=void 0;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=r.getTargetElement(),this.keys_?YRt(i):kwe(i)}}},t.prototype.handleFullScreenChange_=function(){var r=this.getMap();if(r){var n=this.isInFullscreen_;this.isInFullscreen_=Dwe(r.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(pg(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(Owe.ENTERFULLSCREEN)):(pg(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(Owe.LEAVEFULLSCREEN)),r.updateSize())}},t.prototype.setClassName_=function(r,n){var i,o,f,v;n?((i=r.classList).remove.apply(i,this.inactiveClassName_),(o=r.classList).add.apply(o,this.activeClassName_)):((f=r.classList).remove.apply(f,this.activeClassName_),(v=r.classList).add.apply(v,this.inactiveClassName_))},t.prototype.setMap=function(r){var n=this.getMap();n&&n.removeChangeListener(ri.TARGET,this.boundHandleMapTargetChange_),e.prototype.setMap.call(this,r),this.handleMapTargetChange_(),r&&r.addChangeListener(ri.TARGET,this.boundHandleMapTargetChange_)},t.prototype.handleMapTargetChange_=function(){for(var r=this.documentListeners_,n=0,i=r.length;n<i;++n)gr(r[n]);r.length=0;var o=this.getMap();if(o){var f=o.getOwnerDocument();Lwe(f)?this.element.classList.remove(C4):this.element.classList.add(C4);for(var n=0,i=Rwe.length;n<i;++n)r.push(Qt(f,Rwe[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},t}(Ba);function Lwe(e){var t=e.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&e.msFullscreenEnabled||t.requestFullscreen&&e.fullscreenEnabled)}function Dwe(e){return!!(e.webkitIsFullScreen||e.msFullscreenElement||e.fullscreenElement)}function kwe(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function YRt(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():kwe(e)}function XRt(e){e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}var Nwe=KRt;var Vo={ADD:"add",REMOVE:"remove"};var zwe=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fwe={LENGTH:"length"},BC=function(e){zwe(t,e);function t(r,n,i){var o=e.call(this,r)||this;return o.element=n,o.index=i,o}return t}(_o);var QRt=function(e){zwe(t,e);function t(r,n){var i=e.call(this)||this;i.on,i.once,i.un;var o=n||{};if(i.unique_=!!o.unique,i.array_=r||[],i.unique_)for(var f=0,v=i.array_.length;f<v;++f)i.assertUnique_(i.array_[f],f);return i.updateLength_(),i}return t.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},t.prototype.extend=function(r){for(var n=0,i=r.length;n<i;++n)this.push(r[n]);return this},t.prototype.forEach=function(r){for(var n=this.array_,i=0,o=n.length;i<o;++i)r(n[i],i,n)},t.prototype.getArray=function(){return this.array_},t.prototype.item=function(r){return this.array_[r]},t.prototype.getLength=function(){return this.get(Fwe.LENGTH)},t.prototype.insertAt=function(r,n){this.unique_&&this.assertUnique_(n),this.array_.splice(r,0,n),this.updateLength_(),this.dispatchEvent(new BC(Vo.ADD,n,r))},t.prototype.pop=function(){return this.removeAt(this.getLength()-1)},t.prototype.push=function(r){this.unique_&&this.assertUnique_(r);var n=this.getLength();return this.insertAt(n,r),this.getLength()},t.prototype.remove=function(r){for(var n=this.array_,i=0,o=n.length;i<o;++i)if(n[i]===r)return this.removeAt(i)},t.prototype.removeAt=function(r){var n=this.array_[r];return this.array_.splice(r,1),this.updateLength_(),this.dispatchEvent(new BC(Vo.REMOVE,n,r)),n},t.prototype.setAt=function(r,n){var i=this.getLength();if(r<i){this.unique_&&this.assertUnique_(n,r);var o=this.array_[r];this.array_[r]=n,this.dispatchEvent(new BC(Vo.REMOVE,o,r)),this.dispatchEvent(new BC(Vo.ADD,n,r))}else{for(var f=i;f<r;++f)this.insertAt(f,void 0);this.insertAt(r,n)}},t.prototype.updateLength_=function(){this.set(Fwe.LENGTH,this.array_.length)},t.prototype.assertUnique_=function(r,n){for(var i=0,o=this.array_.length;i<o;++i)if(this.array_[i]===r&&i!==n)throw new bC(58)},t}(Oi),$o=QRt;var JRt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eOt=function(e){JRt(t,e);function t(r){var n=e.call(this)||this,i=r||{};return n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:250,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==Qr.DBLCLICK){var i=r.originalEvent,o=r.map,f=r.coordinate,v=i.shiftKey?-this.delta_:this.delta_,x=o.getView();ug(x,v,f,this.duration_),i.preventDefault(),n=!0}return!n},t}(Vl),jwe=eOt;var tOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rOt=function(e){tOt(t,e);function t(r){var n=e.call(this,{stopDown:tc})||this,i=r||{};n.kinetic_=i.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var o=i.condition?i.condition:yb(kC,Twe);return n.condition_=i.onFocusOnly?yb(LC,o):o,n.noKinetic_=!1,n}return t.prototype.handleDragEvent=function(r){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=cg(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],f=r.map,v=f.getView();x1e(o,v.getResolution()),ng(o,v.getRotation()),v.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,r.originalEvent.preventDefault()},t.prototype.handleUpEvent=function(r){var n=r.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),f=this.kinetic_.getAngle(),v=i.getCenterInternal(),x=n.getPixelFromCoordinateInternal(v),E=n.getCoordinateFromPixelInternal([x[0]-o*Math.cos(f),x[1]-o*Math.sin(f)]);i.animateInternal({center:i.getConstrainedCenter(E),duration:500,easing:bs})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>0&&this.condition_(r)){var n=r.map,i=n.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},t}($l),Bwe=rOt;function dg(e){if(e!==void 0)return 0}function M4(e){if(e!==void 0)return e}function Uwe(e){var t=2*Math.PI/e;return function(r,n){if(n)return r;if(r!==void 0)return r=Math.floor(r/t+.5)*t,r}}function Vwe(e){var t=e||Kv(5);return function(r,n){if(n)return r;if(r!==void 0)return Math.abs(r)<=t?0:r}}var nOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iOt=function(e){nOt(t,e);function t(r){var n=this,i=r||{};return n=e.call(this,{stopDown:tc})||this,n.condition_=i.condition?i.condition:bwe,n.lastAngle_=void 0,n.duration_=i.duration!==void 0?i.duration:250,n}return t.prototype.handleDragEvent=function(r){if(FC(r)){var n=r.map,i=n.getView();if(i.getConstraints().rotation!==dg){var o=n.getSize(),f=r.pixel,v=Math.atan2(o[1]/2-f[1],f[0]-o[0]/2);if(this.lastAngle_!==void 0){var x=v-this.lastAngle_;i.adjustRotationInternal(-x)}this.lastAngle_=v}}},t.prototype.handleUpEvent=function(r){if(!FC(r))return!0;var n=r.map,i=n.getView();return i.endInteraction(this.duration_),!1},t.prototype.handleDownEvent=function(r){if(!FC(r))return!1;if(DC(r)&&this.condition_(r)){var n=r.map;return n.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},t}($l),$we=iOt;var Xh={LEFT:37,UP:38,RIGHT:39,DOWN:40};var oOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),aOt=function(e){oOt(t,e);function t(r){var n=e.call(this)||this,i=r||{};return n.defaultCondition_=function(o){return kC(o)&&NC(o)},n.condition_=i.condition!==void 0?i.condition:n.defaultCondition_,n.duration_=i.duration!==void 0?i.duration:100,n.pixelDelta_=i.pixelDelta!==void 0?i.pixelDelta:128,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==gt.KEYDOWN){var i=r.originalEvent,o=i.keyCode;if(this.condition_(r)&&(o==Xh.DOWN||o==Xh.LEFT||o==Xh.RIGHT||o==Xh.UP)){var f=r.map,v=f.getView(),x=v.getResolution()*this.pixelDelta_,E=0,S=0;o==Xh.DOWN?S=-x:o==Xh.LEFT?E=-x:o==Xh.RIGHT?E=x:S=x;var P=[E,S];ng(P,v.getRotation()),U1e(v,P,this.duration_),i.preventDefault(),n=!0}}return!n},t}(Vl),Gwe=aOt;var sOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lOt=function(e){sOt(t,e);function t(r){var n=e.call(this)||this,i=r||{};return n.condition_=i.condition?i.condition:NC,n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:100,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==gt.KEYDOWN||r.type==gt.KEYPRESS){var i=r.originalEvent,o=i.charCode;if(this.condition_(r)&&(o==43||o==45)){var f=r.map,v=o==43?this.delta_:-this.delta_,x=f.getView();ug(x,v,void 0,this.duration_),i.preventDefault(),n=!0}}return!n},t}(Vl),Zwe=lOt;var uOt=function(){function e(t,r,n){this.decay_=t,this.minVelocity_=r,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return e.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},e.prototype.update=function(t,r){this.points_.push(t,r,Date.now())},e.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,r=this.points_.length-3;if(this.points_[r+2]<t)return!1;for(var n=r-3;n>0&&this.points_[n+2]>t;)n-=3;var i=this.points_[r+2]-this.points_[n+2];if(i<16.666666666666668)return!1;var o=this.points_[r]-this.points_[n],f=this.points_[r+1]-this.points_[n+1];return this.angle_=Math.atan2(f,o),this.initialVelocity_=Math.sqrt(o*o+f*f)/i,this.initialVelocity_>this.minVelocity_},e.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},e.prototype.getAngle=function(){return this.angle_},e}(),Wwe=uOt;var cOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),A4={TRACKPAD:"trackpad",WHEEL:"wheel"},hOt=function(e){cOt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,i)||this,n.totalDelta_=0,n.lastDelta_=0,n.maxDelta_=i.maxDelta!==void 0?i.maxDelta:1,n.duration_=i.duration!==void 0?i.duration:250,n.timeout_=i.timeout!==void 0?i.timeout:80,n.useAnchor_=i.useAnchor!==void 0?i.useAnchor:!0,n.constrainResolution_=i.constrainResolution!==void 0?i.constrainResolution:!1;var o=i.condition?i.condition:wwe;return n.condition_=i.onFocusOnly?yb(LC,o):o,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return t.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var r=this.getMap();if(r){var n=r.getView();n.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},t.prototype.handleEvent=function(r){if(!this.condition_(r))return!0;var n=r.type;if(n!==gt.WHEEL)return!0;var i=r.map,o=r.originalEvent;o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=r.coordinate);var f;if(r.type==gt.WHEEL&&(f=o.deltaY,V1e&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(f/=PC),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(f*=40)),f===0)return!1;this.lastDelta_=f;var v=Date.now();this.startTime_===void 0&&(this.startTime_=v),(!this.mode_||v-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(f)<4?A4.TRACKPAD:A4.WHEEL);var x=i.getView();if(this.mode_===A4.TRACKPAD&&!(x.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(x.getAnimating()&&x.cancelAnimations(),x.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),x.adjustZoom(-f/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=v,!1;this.totalDelta_+=f;var E=Math.max(this.timeout_-(v-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),E),!1},t.prototype.handleWheelZoom_=function(r){var n=r.getView();n.getAnimating()&&n.cancelAnimations();var i=-Xr(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),ug(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},t.prototype.setMouseAnchor=function(r){this.useAnchor_=r,r||(this.lastAnchor_=null)},t}(Vl),Hwe=hOt;var fOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pOt=function(e){fOt(t,e);function t(r){var n=this,i=r||{},o=i;return o.stopDown||(o.stopDown=tc),n=e.call(this,o)||this,n.anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=i.threshold!==void 0?i.threshold:.3,n.duration_=i.duration!==void 0?i.duration:250,n}return t.prototype.handleDragEvent=function(r){var n=0,i=this.targetPointers[0],o=this.targetPointers[1],f=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX);if(this.lastAngle_!==void 0){var v=f-this.lastAngle_;this.rotationDelta_+=v,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=v}this.lastAngle_=f;var x=r.map,E=x.getView();if(E.getConstraints().rotation!==dg){var S=x.getViewport().getBoundingClientRect(),P=cg(this.targetPointers);P[0]-=S.left,P[1]-=S.top,this.anchor_=x.getCoordinateFromPixelInternal(P),this.rotating_&&(x.render(),E.adjustRotationInternal(n,this.anchor_))}},t.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,i=n.getView();return i.endInteraction(this.duration_),!1}else return!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}($l),Kwe=pOt;var dOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mOt=function(e){dOt(t,e);function t(r){var n=this,i=r||{},o=i;return o.stopDown||(o.stopDown=tc),n=e.call(this,o)||this,n.anchor_=null,n.duration_=i.duration!==void 0?i.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return t.prototype.handleDragEvent=function(r){var n=1,i=this.targetPointers[0],o=this.targetPointers[1],f=i.clientX-o.clientX,v=i.clientY-o.clientY,x=Math.sqrt(f*f+v*v);this.lastDistance_!==void 0&&(n=this.lastDistance_/x),this.lastDistance_=x;var E=r.map,S=E.getView();n!=1&&(this.lastScaleDelta_=n);var P=E.getViewport().getBoundingClientRect(),q=cg(this.targetPointers);q[0]-=P.left,q[1]-=P.top,this.anchor_=E.getCoordinateFromPixelInternal(q),E.render(),S.adjustResolutionInternal(n,this.anchor_)},t.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,i=n.getView(),o=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,o),!1}else return!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}($l),Ywe=mOt;var vOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gOt=function(e){vOt(t,e);function t(r,n,i){var o=e.call(this,r)||this;return o.map=n,o.frameState=i!==void 0?i:null,o}return t}(_o),Qh=gOt;var yOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_Ot=function(e){yOt(t,e);function t(r,n,i,o,f,v){var x=e.call(this,r,n,f)||this;return x.originalEvent=i,x.pixel_=null,x.coordinate_=null,x.dragging=o!==void 0?o:!1,x.activePointers=v,x}return Object.defineProperty(t.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(r){this.pixel_=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(r){this.coordinate_=r},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){e.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){e.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},t}(Qh),Wl=_Ot;var Er={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var xOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bOt=function(e){xOt(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un,n.background_=r.background;var i=wr({},r);return typeof r.properties=="object"&&(delete i.properties,wr(i,r.properties)),i[Er.OPACITY]=r.opacity!==void 0?r.opacity:1,Bt(typeof i[Er.OPACITY]=="number",64),i[Er.VISIBLE]=r.visible!==void 0?r.visible:!0,i[Er.Z_INDEX]=r.zIndex,i[Er.MAX_RESOLUTION]=r.maxResolution!==void 0?r.maxResolution:1/0,i[Er.MIN_RESOLUTION]=r.minResolution!==void 0?r.minResolution:0,i[Er.MIN_ZOOM]=r.minZoom!==void 0?r.minZoom:-1/0,i[Er.MAX_ZOOM]=r.maxZoom!==void 0?r.maxZoom:1/0,n.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,n.setProperties(i),n.state_=null,n}return t.prototype.getBackground=function(){return this.background_},t.prototype.getClassName=function(){return this.className_},t.prototype.getLayerState=function(r){var n=this.state_||{layer:this,managed:r===void 0?!0:r},i=this.getZIndex();return n.opacity=Xr(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},t.prototype.getLayersArray=function(r){return fr()},t.prototype.getLayerStatesArray=function(r){return fr()},t.prototype.getExtent=function(){return this.get(Er.EXTENT)},t.prototype.getMaxResolution=function(){return this.get(Er.MAX_RESOLUTION)},t.prototype.getMinResolution=function(){return this.get(Er.MIN_RESOLUTION)},t.prototype.getMinZoom=function(){return this.get(Er.MIN_ZOOM)},t.prototype.getMaxZoom=function(){return this.get(Er.MAX_ZOOM)},t.prototype.getOpacity=function(){return this.get(Er.OPACITY)},t.prototype.getSourceState=function(){return fr()},t.prototype.getVisible=function(){return this.get(Er.VISIBLE)},t.prototype.getZIndex=function(){return this.get(Er.Z_INDEX)},t.prototype.setBackground=function(r){this.background_=r,this.changed()},t.prototype.setExtent=function(r){this.set(Er.EXTENT,r)},t.prototype.setMaxResolution=function(r){this.set(Er.MAX_RESOLUTION,r)},t.prototype.setMinResolution=function(r){this.set(Er.MIN_RESOLUTION,r)},t.prototype.setMaxZoom=function(r){this.set(Er.MAX_ZOOM,r)},t.prototype.setMinZoom=function(r){this.set(Er.MIN_ZOOM,r)},t.prototype.setOpacity=function(r){Bt(typeof r=="number",64),this.set(Er.OPACITY,r)},t.prototype.setVisible=function(r){this.set(Er.VISIBLE,r)},t.prototype.setZIndex=function(r){this.set(Er.Z_INDEX,r)},t.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),e.prototype.disposeInternal.call(this)},t}(Oi),UC=bOt;var Es={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var wOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),EOt=function(e){wOt(t,e);function t(r){var n=this,i=wr({},r);delete i.source,n=e.call(this,i)||this,n.on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,n.rendered=!1,r.render&&(n.render=r.render),r.map&&n.setMap(r.map),n.addChangeListener(Er.SOURCE,n.handleSourcePropertyChange_);var o=r.source?r.source:null;return n.setSource(o),n}return t.prototype.getLayersArray=function(r){var n=r||[];return n.push(this),n},t.prototype.getLayerStatesArray=function(r){var n=r||[];return n.push(this.getLayerState()),n},t.prototype.getSource=function(){return this.get(Er.SOURCE)||null},t.prototype.getRenderSource=function(){return this.getSource()},t.prototype.getSourceState=function(){var r=this.getSource();return r?r.getState():"undefined"},t.prototype.handleSourceChange_=function(){this.changed()},t.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(gr(this.sourceChangeKey_),this.sourceChangeKey_=null);var r=this.getSource();r&&(this.sourceChangeKey_=Qt(r,gt.CHANGE,this.handleSourceChange_,this)),this.changed()},t.prototype.getFeatures=function(r){return this.renderer_?this.renderer_.getFeatures(r):new Promise(function(n){return n([])})},t.prototype.getData=function(r){return!this.renderer_||!this.rendered?null:this.renderer_.getData(r)},t.prototype.render=function(r,n){var i=this.getRenderer();if(i.prepareFrame(r))return this.rendered=!0,i.renderFrame(r,n)},t.prototype.unrender=function(){this.rendered=!1},t.prototype.setMapInternal=function(r){r||this.unrender(),this.set(Er.MAP,r)},t.prototype.getMapInternal=function(){return this.get(Er.MAP)},t.prototype.setMap=function(r){this.mapPrecomposeKey_&&(gr(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),r||this.changed(),this.mapRenderKey_&&(gr(this.mapRenderKey_),this.mapRenderKey_=null),r&&(this.mapPrecomposeKey_=Qt(r,Es.PRECOMPOSE,function(n){var i=n,o=i.frameState.layerStatesArray,f=this.getLayerState(!1);Bt(!o.some(function(v){return v.layer===f.layer}),67),o.push(f)},this),this.mapRenderKey_=Qt(this,gt.CHANGE,r.render,r),this.changed())},t.prototype.setSource=function(r){this.set(Er.SOURCE,r)},t.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},t.prototype.hasRenderer=function(){return!!this.renderer_},t.prototype.createRenderer=function(){return null},t.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),e.prototype.disposeInternal.call(this)},t}(UC);function Hp(e,t){if(!e.visible)return!1;var r=t.resolution;if(r<e.minResolution||r>=e.maxResolution)return!1;var n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}var bb=EOt;var xa={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function q4(e,t,r){return r===void 0&&(r=[0,0]),r[0]=e[0]+2*t,r[1]=e[1]+2*t,r}function R4(e){return e[0]>0&&e[1]>0}function VC(e,t,r){return r===void 0&&(r=[0,0]),r[0]=e[0]*t+.5|0,r[1]=e[1]*t+.5|0,r}function bo(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}var TOt=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,SOt=/^([a-z]*)$|^hsla?\(.*\)$/i;function Qwe(e){return typeof e=="string"?e:MOt(e)}function IOt(e){var t=document.createElement("div");if(t.style.color=e,t.style.color!==""){document.body.appendChild(t);var r=getComputedStyle(t).color;return document.body.removeChild(t),r}else return""}var COt=function(){var e=1024,t={},r=0;return function(n){var i;if(t.hasOwnProperty(n))i=t[n];else{if(r>=e){var o=0;for(var f in t)(o++&3)===0&&(delete t[f],--r)}i=POt(n),t[n]=i,++r}return i}}();function O4(e){return Array.isArray(e)?e:COt(e)}function POt(e){var t,r,n,i,o;if(SOt.exec(e)&&(e=IOt(e)),TOt.exec(e)){var f=e.length-1,v=void 0;f<=4?v=1:v=2;var x=f===4||f===8;t=parseInt(e.substr(1+0*v,v),16),r=parseInt(e.substr(1+1*v,v),16),n=parseInt(e.substr(1+2*v,v),16),x?i=parseInt(e.substr(1+3*v,v),16):i=255,v==1&&(t=(t<<4)+t,r=(r<<4)+r,n=(n<<4)+n,x&&(i=(i<<4)+i)),o=[t,r,n,i/255]}else e.indexOf("rgba(")==0?(o=e.slice(5,-1).split(",").map(Number),Xwe(o)):e.indexOf("rgb(")==0?(o=e.slice(4,-1).split(",").map(Number),o.push(1),Xwe(o)):Bt(!1,14);return o}function Xwe(e){return e[0]=Xr(e[0]+.5|0,0,255),e[1]=Xr(e[1]+.5|0,0,255),e[2]=Xr(e[2]+.5|0,0,255),e[3]=Xr(e[3],0,1),e}function MOt(e){var t=e[0];t!=(t|0)&&(t=t+.5|0);var r=e[1];r!=(r|0)&&(r=r+.5|0);var n=e[2];n!=(n|0)&&(n=n+.5|0);var i=e[3]===void 0?1:Math.round(e[3]*100)/100;return"rgba("+t+","+r+","+n+","+i+")"}var Hl=new Oi,AOt=new Ul;AOt.setSize=function(){console.warn("labelCache is deprecated.")};var mg=null,L4,qOt={},opr=function(){var e=100,t="32px ",r=["monospace","serif"],n=r.length,i="wmytzilWMYTZIL@#/&?$%10\uF013",o,f;function v(E,S,P){for(var q=!0,F=0;F<n;++F){var K=r[F];if(f=Jwe(E+" "+S+" "+t+K,i),P!=K){var ne=Jwe(E+" "+S+" "+t+P+","+K,i);q=q&&ne!=f}}return!!q}function x(){for(var E=!0,S=Hl.getKeys(),P=0,q=S.length;P<q;++P){var F=S[P];Hl.get(F)<e&&(v.apply(this,F.split(`
`))?(Bl(qOt),mg=null,L4=void 0,Hl.set(F,e)):(Hl.set(F,Hl.get(F)+1,!0),E=!1))}E&&(clearInterval(o),o=void 0)}return function(E){var S=qwe(E);if(S)for(var P=S.families,q=0,F=P.length;q<F;++q){var K=P[q],ne=S.style+`
`+S.weight+`
`+K;Hl.get(ne)===void 0&&(Hl.set(ne,e,!0),v(S.style,S.weight,K)||(Hl.set(ne,0,!0),o===void 0&&(o=setInterval(x,32))))}}}();function ROt(e,t){return mg||(mg=oc(1,1)),e!=L4&&(mg.font=e,L4=mg.font),mg.measureText(t)}function Jwe(e,t){return ROt(e,t).width}var OOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LOt=function(e){OOt(t,e);function t(r){var n=e.call(this)||this;return n.ready=!0,n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=r,n.declutterExecutorGroup=null,n}return t.prototype.getFeatures=function(r){return fr()},t.prototype.getData=function(r){return null},t.prototype.prepareFrame=function(r){return fr()},t.prototype.renderFrame=function(r,n){return fr()},t.prototype.loadedTileCallback=function(r,n,i){r[n]||(r[n]={}),r[n][i.tileCoord.toString()]=i},t.prototype.createLoadedTileFinder=function(r,n,i){return function(o,f){var v=this.loadedTileCallback.bind(this,i,o);return r.forEachLoadedTile(n,o,f,v)}.bind(this)},t.prototype.forEachFeatureAtCoordinate=function(r,n,i,o,f){},t.prototype.getDataAtPixel=function(r,n,i){return null},t.prototype.getLayer=function(){return this.layer_},t.prototype.handleFontsChanged=function(){},t.prototype.handleImageChange_=function(r){var n=r.target;n.getState()===xa.LOADED&&this.renderIfReadyAndVisible()},t.prototype.loadImage=function(r){var n=r.getState();return n!=xa.LOADED&&n!=xa.ERROR&&r.addEventListener(gt.CHANGE,this.boundHandleImageChange_),n==xa.IDLE&&(r.load(),n=r.getState()),n==xa.LOADED},t.prototype.renderIfReadyAndVisible=function(){var r=this.getLayer();r&&r.getVisible()&&r.getSourceState()==="ready"&&r.changed()},t.prototype.disposeInternal=function(){delete this.layer_,e.prototype.disposeInternal.call(this)},t}(CC),eEe=LOt;var DOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kOt=function(e){DOt(t,e);function t(r,n,i,o){var f=e.call(this,r)||this;return f.inversePixelTransform=n,f.frameState=i,f.context=o,f}return t}(_o),$C=kOt;var NOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var vg=null;function FOt(){var e=document.createElement("canvas");e.width=1,e.height=1,vg=e.getContext("2d")}var zOt=function(e){NOt(t,e);function t(r){var n=e.call(this,r)||this;return n.container=null,n.renderedResolution,n.tempTransform=nc(),n.pixelTransform=nc(),n.inversePixelTransform=nc(),n.context=null,n.containerReused=!1,n.pixelContext_=null,n.frameState=null,n}return t.prototype.getImageData=function(r,n,i){vg||FOt(),vg.clearRect(0,0,1,1);var o;try{vg.drawImage(r,n,i,1,1,0,0,1,1),o=vg.getImageData(0,0,1,1).data}catch(f){return vg=null,null}return o},t.prototype.getBackground=function(r){var n=this.getLayer(),i=n.getBackground();return typeof i=="function"&&(i=i(r.viewState.resolution)),i||void 0},t.prototype.useContainer=function(r,n,i){var o=this.getLayer().getClassName(),f,v;if(r&&r.className===o&&(!i||r&&r.style.backgroundColor&&sg(O4(r.style.backgroundColor),O4(i)))){var x=r.firstElementChild;x instanceof HTMLCanvasElement&&(v=x.getContext("2d"))}if(v&&v.canvas.style.transform===n?(this.container=r,this.context=v,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){f=document.createElement("div"),f.className=o;var E=f.style;E.position="absolute",E.width="100%",E.height="100%",v=oc();var x=v.canvas;f.appendChild(x),E=x.style,E.position="absolute",E.left="0",E.transformOrigin="top left",this.container=f,this.context=v}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)},t.prototype.clipUnrotated=function(r,n,i){var o=xs(i),f=rg(i),v=tg(i),x=eg(i);ro(n.coordinateToPixelTransform,o),ro(n.coordinateToPixelTransform,f),ro(n.coordinateToPixelTransform,v),ro(n.coordinateToPixelTransform,x);var E=this.inversePixelTransform;ro(E,o),ro(E,f),ro(E,v),ro(E,x),r.save(),r.beginPath(),r.moveTo(Math.round(o[0]),Math.round(o[1])),r.lineTo(Math.round(f[0]),Math.round(f[1])),r.lineTo(Math.round(v[0]),Math.round(v[1])),r.lineTo(Math.round(x[0]),Math.round(x[1])),r.clip()},t.prototype.dispatchRenderEvent_=function(r,n,i){var o=this.getLayer();if(o.hasListener(r)){var f=new $C(r,this.inversePixelTransform,i,n);o.dispatchEvent(f)}},t.prototype.preRender=function(r,n){this.frameState=n,this.dispatchRenderEvent_(Es.PRERENDER,r,n)},t.prototype.postRender=function(r,n){this.dispatchRenderEvent_(Es.POSTRENDER,r,n)},t.prototype.getRenderTransform=function(r,n,i,o,f,v,x){var E=f/2,S=v/2,P=o/n,q=-P,F=-r[0]+x,K=-r[1];return ic(this.tempTransform,E,S,P,q,-i,F,K)},t.prototype.getDataAtPixel=function(r,n,i){var o=ro(this.inversePixelTransform,r.slice()),f=this.context,v=this.getLayer(),x=v.getExtent();if(x){var E=ro(n.pixelToCoordinateTransform,r.slice());if(!Vh(x,E))return null}var S=Math.round(o[0]),P=Math.round(o[1]),q=this.pixelContext_;if(!q){var F=document.createElement("canvas");F.width=1,F.height=1,q=F.getContext("2d"),this.pixelContext_=q}q.clearRect(0,0,1,1);var K;try{q.drawImage(f.canvas,S,P,1,1,0,0,1,1),K=q.getImageData(0,0,1,1).data}catch(ne){return ne.name==="SecurityError"?(this.pixelContext_=null,new Uint8Array):K}return K[3]===0?null:K},t.prototype.disposeInternal=function(){delete this.frameState,e.prototype.disposeInternal.call(this)},t}(eEe),tEe=zOt;var ba={ANIMATING:0,INTERACTING:1};var jOt=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var r in this.cache_){var n=this.cache_[r];(t++&3)===0&&!n.hasListener()&&(delete this.cache_[r],--this.cacheSize_)}}},e.prototype.get=function(t,r,n){var i=rEe(t,r,n);return i in this.cache_?this.cache_[i]:null},e.prototype.set=function(t,r,n,i){var o=rEe(t,r,n);this.cache_[o]=i,++this.cacheSize_},e.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},e}();function rEe(e,t,r){var n=r?Qwe(r):"null";return t+":"+e+":"+n}var D4=new jOt;var BOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UOt=function(e){BOt(t,e);function t(r,n,i,o){var f=e.call(this)||this;return f.extent=r,f.pixelRatio_=i,f.resolution=n,f.state=o,f}return t.prototype.changed=function(){this.dispatchEvent(gt.CHANGE)},t.prototype.getExtent=function(){return this.extent},t.prototype.getImage=function(){return fr()},t.prototype.getPixelRatio=function(){return this.pixelRatio_},t.prototype.getResolution=function(){return this.resolution},t.prototype.getState=function(){return this.state},t.prototype.load=function(){fr()},t}(Ul),nEe=UOt;var VOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kpr=function(e){VOt(t,e);function t(r,n,i,o,f,v){var x=e.call(this,r,n,i,xa.IDLE)||this;return x.src_=o,x.image_=new Image,f!==null&&(x.image_.crossOrigin=f),x.unlisten_=null,x.state=xa.IDLE,x.imageLoadFunction_=v,x}return t.prototype.getImage=function(){return this.image_},t.prototype.handleImageError_=function(){this.state=xa.ERROR,this.unlistenImage_(),this.changed()},t.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=gi(this.extent)/this.image_.height),this.state=xa.LOADED,this.unlistenImage_(),this.changed()},t.prototype.load=function(){(this.state==xa.IDLE||this.state==xa.ERROR)&&(this.state=xa.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=k4(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.setImage=function(r){this.image_=r,this.resolution=gi(this.extent)/this.image_.height},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(nEe);function k4(e,t,r){var n=e,i=!0,o=!1,f=!1,v=[lg(n,gt.LOAD,function(){f=!0,o||t()})];return n.src&&Z1e?(o=!0,n.decode().then(function(){i&&t()}).catch(function(x){i&&(f?t():r())})):v.push(lg(n,gt.ERROR,r)),function(){i=!1,v.forEach(gr)}}var $Ot=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),GOt=function(e){$Ot(t,e);function t(r){var n=e.call(this)||this;n.projection=to(r.projection),n.attributions_=iEe(r.attributions),n.attributionsCollapsible_=r.attributionsCollapsible!==void 0?r.attributionsCollapsible:!0,n.loading=!1,n.state_=r.state!==void 0?r.state:"ready",n.wrapX_=r.wrapX!==void 0?r.wrapX:!1,n.interpolate_=!!r.interpolate,n.viewResolver=null,n.viewRejector=null;var i=n;return n.viewPromise_=new Promise(function(o,f){i.viewResolver=o,i.viewRejector=f}),n}return t.prototype.getAttributions=function(){return this.attributions_},t.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},t.prototype.getProjection=function(){return this.projection},t.prototype.getResolutions=function(){return fr()},t.prototype.getView=function(){return this.viewPromise_},t.prototype.getState=function(){return this.state_},t.prototype.getWrapX=function(){return this.wrapX_},t.prototype.getInterpolate=function(){return this.interpolate_},t.prototype.refresh=function(){this.changed()},t.prototype.setAttributions=function(r){this.attributions_=iEe(r),this.changed()},t.prototype.setState=function(r){this.state_=r,this.changed()},t}(Oi);function iEe(e){return e?Array.isArray(e)?function(t){return e}:typeof e=="function"?e:function(t){return[e]}:null}var oEe=GOt;function GC(e){var t=e||{},r=new $o,n=new Wwe(-.005,.05,100),i=t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0;i&&r.push(new $we);var o=t.doubleClickZoom!==void 0?t.doubleClickZoom:!0;o&&r.push(new jwe({delta:t.zoomDelta,duration:t.zoomDuration}));var f=t.dragPan!==void 0?t.dragPan:!0;f&&r.push(new Bwe({onFocusOnly:t.onFocusOnly,kinetic:n}));var v=t.pinchRotate!==void 0?t.pinchRotate:!0;v&&r.push(new Kwe);var x=t.pinchZoom!==void 0?t.pinchZoom:!0;x&&r.push(new Ywe({duration:t.zoomDuration}));var E=t.keyboard!==void 0?t.keyboard:!0;E&&(r.push(new Gwe),r.push(new Zwe({delta:t.zoomDelta,duration:t.zoomDuration})));var S=t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0;S&&r.push(new Hwe({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration}));var P=t.shiftDragZoom!==void 0?t.shiftDragZoom:!0;return P&&r.push(new jC({duration:t.zoomDuration})),r}var ZOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),WOt=function(e){ZOt(t,e);function t(r){var n=e.call(this)||this;return n.map_=r,n}return t.prototype.dispatchRenderEvent=function(r,n){fr()},t.prototype.calculateMatrices2D=function(r){var n=r.viewState,i=r.coordinateToPixelTransform,o=r.pixelToCoordinateTransform;ic(i,r.size[0]/2,r.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),qC(o,i)},t.prototype.forEachFeatureAtCoordinate=function(r,n,i,o,f,v,x,E){var S,P=n.viewState;function q(Cr,xt,pr,Jt){return f.call(v,xt,Cr?pr:null,Jt)}var F=P.projection,K=b1e(r.slice(),F),ne=[[0,0]];if(F.canWrapX()&&o){var Z=F.getExtent(),W=jr(Z);ne.push([-W,0],[W,0])}for(var Q=n.layerStatesArray,le=Q.length,ce=[],ze=[],Le=0;Le<ne.length;Le++)for(var Be=le-1;Be>=0;--Be){var et=Q[Be],ot=et.layer;if(ot.hasRenderer()&&Hp(et,P)&&x.call(E,ot)){var Ot=ot.getRenderer(),Wt=ot.getSource();if(Ot&&Wt){var sr=Wt.getWrapX()?K:r,On=q.bind(null,et.managed);ze[0]=sr[0]+ne[Le][0],ze[1]=sr[1]+ne[Le][1],S=Ot.forEachFeatureAtCoordinate(ze,n,i,On,ce)}if(S)return S}}if(ce.length!==0){var Ln=1/ce.length;return ce.forEach(function(Cr,xt){return Cr.distanceSq+=xt*Ln}),ce.sort(function(Cr,xt){return Cr.distanceSq-xt.distanceSq}),ce.some(function(Cr){return S=Cr.callback(Cr.feature,Cr.layer,Cr.geometry)}),S}},t.prototype.forEachLayerAtPixel=function(r,n,i,o,f){return fr()},t.prototype.hasFeatureAtCoordinate=function(r,n,i,o,f,v){var x=this.forEachFeatureAtCoordinate(r,n,i,o,Hh,this,f,v);return x!==void 0},t.prototype.getMap=function(){return this.map_},t.prototype.renderFrame=function(r){fr()},t.prototype.scheduleExpireIconCache=function(r){D4.canExpireCache()&&r.postRenderFunctions.push(HOt)},t}(og);function HOt(e,t){D4.expire()}var aEe=WOt;var KOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),YOt=function(e){KOt(t,e);function t(r){var n=e.call(this,r)||this;n.fontChangeListenerKey_=Qt(Hl,ec.PROPERTYCHANGE,r.redrawText.bind(r)),n.element_=document.createElement("div");var i=n.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",n.element_.className=ws+" ol-layers";var o=r.getViewport();return o.insertBefore(n.element_,o.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return t.prototype.dispatchRenderEvent=function(r,n){var i=this.getMap();if(i.hasListener(r)){var o=new $C(r,void 0,n);i.dispatchEvent(o)}},t.prototype.disposeInternal=function(){gr(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},t.prototype.renderFrame=function(r){if(!r){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(r),this.dispatchRenderEvent(Es.PRECOMPOSE,r);var n=r.layerStatesArray.sort(function(F,K){return F.zIndex-K.zIndex}),i=r.viewState;this.children_.length=0;for(var o=[],f=null,v=0,x=n.length;v<x;++v){var E=n[v];r.layerIndex=v;var S=E.layer,P=S.getSourceState();if(!Hp(E,i)||P!="ready"&&P!="undefined"){S.unrender();continue}var q=S.render(r,f);q&&(q!==f&&(this.children_.push(q),f=q),"getDeclutter"in S&&o.push(S))}for(var v=o.length-1;v>=0;--v)o[v].renderDeclutter(r);Mwe(this.element_,this.children_),this.dispatchRenderEvent(Es.POSTCOMPOSE,r),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(r)},t.prototype.forEachLayerAtPixel=function(r,n,i,o,f){for(var v=n.viewState,x=n.layerStatesArray,E=x.length,S=E-1;S>=0;--S){var P=x[S],q=P.layer;if(q.hasRenderer()&&Hp(P,v)&&f(q)){var F=q.getRenderer(),K=F.getDataAtPixel(r,n,i);if(K){var ne=o(q,K);if(ne)return ne}}}},t}(aEe),sEe=YOt;var lEe=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ac=function(e){lEe(t,e);function t(r,n){var i=e.call(this,r)||this;return i.layer=n,i}return t}(_o);var N4={LAYERS:"layers"},XOt=function(e){lEe(t,e);function t(r){var n=this,i=r||{},o=wr({},i);delete o.layers;var f=i.layers;return n=e.call(this,o)||this,n.on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(N4.LAYERS,n.handleLayersChanged_),f?Array.isArray(f)?f=new $o(f.slice(),{unique:!0}):Bt(typeof f.getArray=="function",43):f=new $o(void 0,{unique:!0}),n.setLayers(f),n}return t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(gr),this.layersListenerKeys_.length=0;var r=this.getLayers();this.layersListenerKeys_.push(Qt(r,Vo.ADD,this.handleLayersAdd_,this),Qt(r,Vo.REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_)this.listenerKeys_[n].forEach(gr);Bl(this.listenerKeys_);for(var i=r.getArray(),o=0,f=i.length;o<f;o++){var v=i[o];this.registerLayerListeners_(v),this.dispatchEvent(new ac("addlayer",v))}this.changed()},t.prototype.registerLayerListeners_=function(r){var n=[Qt(r,ec.PROPERTYCHANGE,this.handleLayerChange_,this),Qt(r,gt.CHANGE,this.handleLayerChange_,this)];r instanceof t&&n.push(Qt(r,"addlayer",this.handleLayerGroupAdd_,this),Qt(r,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[ti(r)]=n},t.prototype.handleLayerGroupAdd_=function(r){this.dispatchEvent(new ac("addlayer",r.layer))},t.prototype.handleLayerGroupRemove_=function(r){this.dispatchEvent(new ac("removelayer",r.layer))},t.prototype.handleLayersAdd_=function(r){var n=r.element;this.registerLayerListeners_(n),this.dispatchEvent(new ac("addlayer",n)),this.changed()},t.prototype.handleLayersRemove_=function(r){var n=r.element,i=ti(n);this.listenerKeys_[i].forEach(gr),delete this.listenerKeys_[i],this.dispatchEvent(new ac("removelayer",n)),this.changed()},t.prototype.getLayers=function(){return this.get(N4.LAYERS)},t.prototype.setLayers=function(r){var n=this.getLayers();if(n)for(var i=n.getArray(),o=0,f=i.length;o<f;++o)this.dispatchEvent(new ac("removelayer",i[o]));this.set(N4.LAYERS,r)},t.prototype.getLayersArray=function(r){var n=r!==void 0?r:[];return this.getLayers().forEach(function(i){i.getLayersArray(n)}),n},t.prototype.getLayerStatesArray=function(r){var n=r!==void 0?r:[],i=n.length;this.getLayers().forEach(function(S){S.getLayerStatesArray(n)});var o=this.getLayerState(),f=o.zIndex;!r&&o.zIndex===void 0&&(f=0);for(var v=i,x=n.length;v<x;v++){var E=n[v];E.opacity*=o.opacity,E.visible=E.visible&&o.visible,E.maxResolution=Math.min(E.maxResolution,o.maxResolution),E.minResolution=Math.max(E.minResolution,o.minResolution),E.minZoom=Math.max(E.minZoom,o.minZoom),E.maxZoom=Math.min(E.maxZoom,o.maxZoom),o.extent!==void 0&&(E.extent!==void 0?E.extent=$h(E.extent,o.extent):E.extent=o.extent),E.zIndex===void 0&&(E.zIndex=f)}return n},t.prototype.getSourceState=function(){return"ready"},t}(UC),wb=XOt;var Eb={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var QOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JOt=function(e){QOt(t,e);function t(r,n){var i=e.call(this,r)||this;i.map_=r,i.clickTimeoutId_,i.emulateClicks_=!1,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=n===void 0?1:n,i.down_=null;var o=i.map_.getViewport();return i.activePointers_=[],i.trackedTouches_={},i.element_=o,i.pointerdownListenerKey_=Qt(o,Eb.POINTERDOWN,i.handlePointerDown_,i),i.originalPointerMoveEvent_,i.relayedListenerKey_=Qt(o,Eb.POINTERMOVE,i.relayMoveEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener(gt.TOUCHMOVE,i.boundHandleTouchMove_,AC?{passive:!1}:!1),i}return t.prototype.emulateClick_=function(r){var n=new Wl(Qr.CLICK,this.map_,r);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Wl(Qr.DBLCLICK,this.map_,r),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var i=new Wl(Qr.SINGLECLICK,this.map_,r);this.dispatchEvent(i)}.bind(this),250)},t.prototype.updateActivePointers_=function(r){var n=r,i=n.pointerId;if(n.type==Qr.POINTERUP||n.type==Qr.POINTERCANCEL){delete this.trackedTouches_[i];for(var o in this.trackedTouches_)if(this.trackedTouches_[o].target!==n.target){delete this.trackedTouches_[o];break}}else(n.type==Qr.POINTERDOWN||n.type==Qr.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=o1e(this.trackedTouches_)},t.prototype.handlePointerUp_=function(r){this.updateActivePointers_(r);var n=new Wl(Qr.POINTERUP,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(r)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(gr),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},t.prototype.isMouseActionButton_=function(r){return r.button===0},t.prototype.handlePointerDown_=function(r){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(r);var n=new Wl(Qr.POINTERDOWN,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.down_={};for(var i in r){var o=r[i];this.down_[i]=typeof o=="function"?rc:o}if(this.dragListenerKeys_.length===0){var f=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Qt(f,Qr.POINTERMOVE,this.handlePointerMove_,this),Qt(f,Qr.POINTERUP,this.handlePointerUp_,this),Qt(this.element_,Qr.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==f&&this.dragListenerKeys_.push(Qt(this.element_.getRootNode(),Qr.POINTERUP,this.handlePointerUp_,this))}},t.prototype.handlePointerMove_=function(r){if(this.isMoving_(r)){this.updateActivePointers_(r),this.dragging_=!0;var n=new Wl(Qr.POINTERDRAG,this.map_,r,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}},t.prototype.relayMoveEvent_=function(r){this.originalPointerMoveEvent_=r;var n=!!(this.down_&&this.isMoving_(r));this.dispatchEvent(new Wl(Qr.POINTERMOVE,this.map_,r,n))},t.prototype.handleTouchMove_=function(r){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof r.cancelable!="boolean"||r.cancelable===!0)&&r.preventDefault()},t.prototype.isMoving_=function(r){return this.dragging_||Math.abs(r.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(r.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&(gr(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(gt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(gr(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(gr),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},t}(Ul),uEe=JOt;var Tb=1/0,eLt=function(){function e(t,r){this.priorityFunction_=t,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return e.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Bl(this.queuedElements_)},e.prototype.dequeue=function(){var t=this.elements_,r=this.priorities_,n=t[0];t.length==1?(t.length=0,r.length=0):(t[0]=t.pop(),r[0]=r.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},e.prototype.enqueue=function(t){Bt(!(this.keyFunction_(t)in this.queuedElements_),31);var r=this.priorityFunction_(t);return r!=Tb?(this.elements_.push(t),this.priorities_.push(r),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},e.prototype.getCount=function(){return this.elements_.length},e.prototype.getLeftChildIndex_=function(t){return t*2+1},e.prototype.getRightChildIndex_=function(t){return t*2+2},e.prototype.getParentIndex_=function(t){return t-1>>1},e.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},e.prototype.isEmpty=function(){return this.elements_.length===0},e.prototype.isKeyQueued=function(t){return t in this.queuedElements_},e.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},e.prototype.siftUp_=function(t){for(var r=this.elements_,n=this.priorities_,i=r.length,o=r[t],f=n[t],v=t;t<i>>1;){var x=this.getLeftChildIndex_(t),E=this.getRightChildIndex_(t),S=E<i&&n[E]<n[x]?E:x;r[t]=r[S],n[t]=n[S],t=S}r[t]=o,n[t]=f,this.siftDown_(v,t)},e.prototype.siftDown_=function(t,r){for(var n=this.elements_,i=this.priorities_,o=n[r],f=i[r];r>t;){var v=this.getParentIndex_(r);if(i[v]>f)n[r]=n[v],i[r]=i[v],r=v;else break}n[r]=o,i[r]=f},e.prototype.reprioritize=function(){var t=this.priorityFunction_,r=this.elements_,n=this.priorities_,i=0,o=r.length,f,v,x;for(v=0;v<o;++v)f=r[v],x=t(f),x==Tb?delete this.queuedElements_[this.keyFunction_(f)]:(n[i]=x,r[i++]=f);r.length=i,n.length=i,this.heapify_()},e}(),cEe=eLt;var wt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var tLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rLt=function(e){tLt(t,e);function t(r,n){var i=e.call(this,function(o){return r.apply(null,o)},function(o){return o[0].getKey()})||this;return i.boundHandleTileChange_=i.handleTileChange.bind(i),i.tileChangeCallback_=n,i.tilesLoading_=0,i.tilesLoadingKeys_={},i}return t.prototype.enqueue=function(r){var n=e.prototype.enqueue.call(this,r);if(n){var i=r[0];i.addEventListener(gt.CHANGE,this.boundHandleTileChange_)}return n},t.prototype.getTilesLoading=function(){return this.tilesLoading_},t.prototype.handleTileChange=function(r){var n=r.target,i=n.getState();if(i===wt.LOADED||i===wt.ERROR||i===wt.EMPTY){n.removeEventListener(gt.CHANGE,this.boundHandleTileChange_);var o=n.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},t.prototype.loadMoreTiles=function(r,n){for(var i=0,o,f,v;this.tilesLoading_<r&&i<n&&this.getCount()>0;)f=this.dequeue()[0],v=f.getKey(),o=f.getState(),o===wt.IDLE&&!(v in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[v]=!0,++this.tilesLoading_,++i,f.load())},t}(cEe),hEe=rLt;function fEe(e,t,r,n,i){if(!e||!(r in e.wantedTiles))return Tb;if(!e.wantedTiles[r][t.getKey()])return Tb;var o=e.viewState.center,f=n[0]-o[0],v=n[1]-o[1];return 65536*Math.log(i)+Math.sqrt(f*f+v*v)/i}var Ts={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var pEe=42,gg=256;function F4(e,t,r){return function(n,i,o,f,v){if(n){if(!i&&!t)return n;var x=t?0:o[0]*i,E=t?0:o[1]*i,S=v?v[0]:0,P=v?v[1]:0,q=e[0]+x/2+S,F=e[2]-x/2+S,K=e[1]+E/2+P,ne=e[3]-E/2+P;q>F&&(q=(F+q)/2,F=q),K>ne&&(K=(ne+K)/2,ne=K);var Z=Xr(n[0],q,F),W=Xr(n[1],K,ne);if(f&&r&&i){var Q=30*i;Z+=-Q*Math.log(1+Math.max(0,q-n[0])/Q)+Q*Math.log(1+Math.max(0,n[0]-F)/Q),W+=-Q*Math.log(1+Math.max(0,K-n[1])/Q)+Q*Math.log(1+Math.max(0,n[1]-ne)/Q)}return[Z,W]}}}function dEe(e){return e}function z4(e,t,r,n){var i=jr(t)/r[0],o=gi(t)/r[1];return n?Math.min(e,Math.max(i,o)):Math.min(e,Math.min(i,o))}function j4(e,t,r){var n=Math.min(e,t),i=50;return n*=Math.log(1+i*Math.max(0,e/t-1))/i+1,r&&(n=Math.max(n,r),n/=Math.log(1+i*Math.max(0,r/e-1))/i+1),Xr(n,r/2,t*2)}function mEe(e,t,r,n){return function(i,o,f,v){if(i!==void 0){var x=e[0],E=e[e.length-1],S=r?z4(x,r,f,n):x;if(v){var P=t!==void 0?t:!0;return P?j4(i,S,E):Xr(i,E,S)}var q=Math.min(S,i),F=Math.floor(ag(e,q,o));return e[F]>S&&F<e.length-1?e[F+1]:e[F]}else return}}function vEe(e,t,r,n,i,o){return function(f,v,x,E){if(f!==void 0){var S=i?z4(t,i,x,o):t,P=r!==void 0?r:0;if(E){var q=n!==void 0?n:!0;return q?j4(f,S,P):Xr(f,P,S)}var F=1e-9,K=Math.ceil(Math.log(t/S)/Math.log(e)-F),ne=-v*(.5-F)+.5,Z=Math.min(S,f),W=Math.floor(Math.log(t/Z)/Math.log(e)+ne),Q=Math.max(K,W),le=t/Math.pow(e,Q);return Xr(le,P,S)}else return}}function B4(e,t,r,n,i){return function(o,f,v,x){if(o!==void 0){var E=n?z4(e,n,v,i):e,S=r!==void 0?r:!0;return!S||!x?Xr(o,t,E):j4(o,E,t)}else return}}var nLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U4=0,iLt=function(e){nLt(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var i=wr({},r);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=SC(i.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,i.projection&&T1e(),i.center&&(i.center=nl(i.center,n.projection_)),i.extent&&(i.extent=Wh(i.extent,n.projection_)),n.applyOptions_(i),n}return t.prototype.applyOptions_=function(r){var n=wr({},r);for(var i in Ts)delete n[i];this.setProperties(n,!0);var o=aLt(r);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=r.resolutions,this.padding_=r.padding,this.minZoom_=o.minZoom;var f=oLt(r),v=o.constraint,x=sLt(r);this.constraints_={center:f,resolution:v,rotation:x},this.setRotation(r.rotation!==void 0?r.rotation:0),this.setCenterInternal(r.center!==void 0?r.center:null),r.resolution!==void 0?this.setResolution(r.resolution):r.zoom!==void 0&&this.setZoom(r.zoom)},Object.defineProperty(t.prototype,"padding",{get:function(){return this.padding_},set:function(r){var n=this.padding_;this.padding_=r;var i=this.getCenter();if(i){var o=r||[0,0,0,0];n=n||[0,0,0,0];var f=this.getResolution(),v=f/2*(o[3]-n[3]+n[1]-o[1]),x=f/2*(o[0]-n[0]+n[2]-o[2]);this.setCenterInternal([i[0]+v,i[1]-x])}},enumerable:!1,configurable:!0}),t.prototype.getUpdatedOptions_=function(r){var n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),wr({},n,r)},t.prototype.animate=function(r){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var o=arguments[i];o.center&&(o=wr({},o),o.center=nl(o.center,this.getProjection())),o.anchor&&(o=wr({},o),o.anchor=nl(o.anchor,this.getProjection())),n[i]=o}this.animateInternal.apply(this,n)},t.prototype.animateInternal=function(r){var n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);for(var o=0;o<n&&!this.isDef();++o){var f=arguments[o];f.center&&this.setCenterInternal(f.center),f.zoom!==void 0?this.setZoom(f.zoom):f.resolution&&this.setResolution(f.resolution),f.rotation!==void 0&&this.setRotation(f.rotation)}if(o===n){i&&ZC(i,!0);return}for(var v=Date.now(),x=this.targetCenter_.slice(),E=this.targetResolution_,S=this.targetRotation_,P=[];o<n;++o){var q=arguments[o],F={start:v,complete:!1,anchor:q.anchor,duration:q.duration!==void 0?q.duration:1e3,easing:q.easing||j1e,callback:i};if(q.center&&(F.sourceCenter=x,F.targetCenter=q.center.slice(),x=F.targetCenter),q.zoom!==void 0?(F.sourceResolution=E,F.targetResolution=this.getResolutionForZoom(q.zoom),E=F.targetResolution):q.resolution&&(F.sourceResolution=E,F.targetResolution=q.resolution,E=F.targetResolution),q.rotation!==void 0){F.sourceRotation=S;var K=rl(q.rotation-S+Math.PI,2*Math.PI)-Math.PI;F.targetRotation=S+K,S=F.targetRotation}lLt(F)?F.complete=!0:v+=F.duration,P.push(F)}this.animations_.push(P),this.setHint(ba.ANIMATING,1),this.updateAnimations_()},t.prototype.getAnimating=function(){return this.hints_[ba.ANIMATING]>0},t.prototype.getInteracting=function(){return this.hints_[ba.INTERACTING]>0},t.prototype.cancelAnimations=function(){this.setHint(ba.ANIMATING,-this.hints_[ba.ANIMATING]);for(var r,n=0,i=this.animations_.length;n<i;++n){var o=this.animations_[n];if(o[0].callback&&ZC(o[0].callback,!1),!r)for(var f=0,v=o.length;f<v;++f){var x=o[f];if(!x.complete){r=x.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=r,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},t.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var r=Date.now(),n=!1,i=this.animations_.length-1;i>=0;--i){for(var o=this.animations_[i],f=!0,v=0,x=o.length;v<x;++v){var E=o[v];if(!E.complete){var S=r-E.start,P=E.duration>0?S/E.duration:1;P>=1?(E.complete=!0,P=1):f=!1;var q=E.easing(P);if(E.sourceCenter){var F=E.sourceCenter[0],K=E.sourceCenter[1],ne=E.targetCenter[0],Z=E.targetCenter[1];this.nextCenter_=E.targetCenter;var W=F+q*(ne-F),Q=K+q*(Z-K);this.targetCenter_=[W,Q]}if(E.sourceResolution&&E.targetResolution){var le=q===1?E.targetResolution:E.sourceResolution+q*(E.targetResolution-E.sourceResolution);if(E.anchor){var ce=this.getViewportSize_(this.getRotation()),ze=this.constraints_.resolution(le,0,ce,!0);this.targetCenter_=this.calculateCenterZoom(ze,E.anchor)}this.nextResolution_=E.targetResolution,this.targetResolution_=le,this.applyTargetState_(!0)}if(E.sourceRotation!==void 0&&E.targetRotation!==void 0){var Le=q===1?rl(E.targetRotation+Math.PI,2*Math.PI)-Math.PI:E.sourceRotation+q*(E.targetRotation-E.sourceRotation);if(E.anchor){var Be=this.constraints_.rotation(Le,!0);this.targetCenter_=this.calculateCenterRotate(Be,E.anchor)}this.nextRotation_=E.targetRotation,this.targetRotation_=Le}if(this.applyTargetState_(!0),n=!0,!E.complete)break}}if(f){this.animations_[i]=null,this.setHint(ba.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var et=o[0].callback;et&&ZC(et,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},t.prototype.calculateCenterRotate=function(r,n){var i,o=this.getCenterInternal();return o!==void 0&&(i=[o[0]-n[0],o[1]-n[1]],ng(i,r-this.getRotation()),_1e(i,n)),i},t.prototype.calculateCenterZoom=function(r,n){var i,o=this.getCenterInternal(),f=this.getResolution();if(o!==void 0&&f!==void 0){var v=n[0]-r*(n[0]-o[0])/f,x=n[1]-r*(n[1]-o[1])/f;i=[v,x]}return i},t.prototype.getViewportSize_=function(r){var n=this.viewportSize_;if(r){var i=n[0],o=n[1];return[Math.abs(i*Math.cos(r))+Math.abs(o*Math.sin(r)),Math.abs(i*Math.sin(r))+Math.abs(o*Math.cos(r))]}else return n},t.prototype.setViewportSize=function(r){this.viewportSize_=Array.isArray(r)?r.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},t.prototype.getCenter=function(){var r=this.getCenterInternal();return r&&mb(r,this.getProjection())},t.prototype.getCenterInternal=function(){return this.get(Ts.CENTER)},t.prototype.getConstraints=function(){return this.constraints_},t.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},t.prototype.getHints=function(r){return r!==void 0?(r[0]=this.hints_[0],r[1]=this.hints_[1],r):this.hints_.slice()},t.prototype.calculateExtent=function(r){var n=this.calculateExtentInternal(r);return C1e(n,this.getProjection())},t.prototype.calculateExtentInternal=function(r){var n=r||this.getViewportSizeMinusPadding_(),i=this.getCenterInternal();Bt(i,1);var o=this.getResolution();Bt(o!==void 0,2);var f=this.getRotation();return Bt(f!==void 0,3),pb(i,o,f,n)},t.prototype.getMaxResolution=function(){return this.maxResolution_},t.prototype.getMinResolution=function(){return this.minResolution_},t.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},t.prototype.setMaxZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({maxZoom:r}))},t.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},t.prototype.setMinZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({minZoom:r}))},t.prototype.setConstrainResolution=function(r){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:r}))},t.prototype.getProjection=function(){return this.projection_},t.prototype.getResolution=function(){return this.get(Ts.RESOLUTION)},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getResolutionForExtent=function(r,n){return this.getResolutionForExtentInternal(Wh(r,this.getProjection()),n)},t.prototype.getResolutionForExtentInternal=function(r,n){var i=n||this.getViewportSizeMinusPadding_(),o=jr(r)/i[0],f=gi(r)/i[1];return Math.max(o,f)},t.prototype.getResolutionForValueFunction=function(r){var n=r||2,i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,f=Math.log(i/o)/Math.log(n);return function(v){var x=i/Math.pow(n,v*f);return x}},t.prototype.getRotation=function(){return this.get(Ts.ROTATION)},t.prototype.getValueForResolutionFunction=function(r){var n=Math.log(r||2),i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,f=Math.log(i/o)/n;return function(v){var x=Math.log(i/v)/n/f;return x}},t.prototype.getViewportSizeMinusPadding_=function(r){var n=this.getViewportSize_(r),i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n},t.prototype.getState=function(){var r=this.getProjection(),n=this.getResolution(),i=this.getRotation(),o=this.getCenterInternal(),f=this.padding_;if(f){var v=this.getViewportSizeMinusPadding_();o=V4(o,this.getViewportSize_(),[v[0]/2+f[3],v[1]/2+f[0]],n,i)}return{center:o.slice(0),projection:r!==void 0?r:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}},t.prototype.getZoom=function(){var r,n=this.getResolution();return n!==void 0&&(r=this.getZoomForResolution(n)),r},t.prototype.getZoomForResolution=function(r){var n=this.minZoom_||0,i,o;if(this.resolutions_){var f=ag(this.resolutions_,r,1);n=f,i=this.resolutions_[f],f==this.resolutions_.length-1?o=2:o=i/this.resolutions_[f+1]}else i=this.maxResolution_,o=this.zoomFactor_;return n+Math.log(i/r)/Math.log(o)},t.prototype.getResolutionForZoom=function(r){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=Xr(Math.floor(r),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,Xr(r-n,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,r-this.minZoom_)},t.prototype.fit=function(r,n){var i;if(Bt(Array.isArray(r)||typeof r.getSimplifiedGeometry=="function",24),Array.isArray(r)){Bt(!db(r),25);var o=Wh(r,this.getProjection());i=gb(o)}else if(r.getType()==="Circle"){var o=Wh(r.getExtent(),this.getProjection());i=gb(o),i.rotate(this.getRotation(),Qu(o))}else{var f=I1e();f?i=r.clone().transform(f,this.getProjection()):i=r}this.fitInternal(i,n)},t.prototype.rotatedExtentForGeometry=function(r){for(var n=this.getRotation(),i=Math.cos(n),o=Math.sin(-n),f=r.getFlatCoordinates(),v=r.getStride(),x=1/0,E=1/0,S=-1/0,P=-1/0,q=0,F=f.length;q<F;q+=v){var K=f[q]*i-f[q+1]*o,ne=f[q]*o+f[q+1]*i;x=Math.min(x,K),E=Math.min(E,ne),S=Math.max(S,K),P=Math.max(P,ne)}return[x,E,S,P]},t.prototype.fitInternal=function(r,n){var i=n||{},o=i.size;o||(o=this.getViewportSizeMinusPadding_());var f=i.padding!==void 0?i.padding:[0,0,0,0],v=i.nearest!==void 0?i.nearest:!1,x;i.minResolution!==void 0?x=i.minResolution:i.maxZoom!==void 0?x=this.getResolutionForZoom(i.maxZoom):x=0;var E=this.rotatedExtentForGeometry(r),S=this.getResolutionForExtentInternal(E,[o[0]-f[1]-f[3],o[1]-f[0]-f[2]]);S=isNaN(S)?x:Math.max(S,x),S=this.getConstrainedResolution(S,v?0:1);var P=this.getRotation(),q=Math.sin(P),F=Math.cos(P),K=Qu(E);K[0]+=(f[1]-f[3])/2*S,K[1]+=(f[0]-f[2])/2*S;var ne=K[0]*F-K[1]*q,Z=K[1]*F+K[0]*q,W=this.getConstrainedCenter([ne,Z],S),Q=i.callback?i.callback:rc;i.duration!==void 0?this.animateInternal({resolution:S,center:W,duration:i.duration,easing:i.easing},Q):(this.targetResolution_=S,this.targetCenter_=W,this.applyTargetState_(!1,!0),ZC(Q,!0))},t.prototype.centerOn=function(r,n,i){this.centerOnInternal(nl(r,this.getProjection()),n,i)},t.prototype.centerOnInternal=function(r,n,i){this.setCenterInternal(V4(r,n,i,this.getResolution(),this.getRotation()))},t.prototype.calculateCenterShift=function(r,n,i,o){var f,v=this.padding_;if(v&&r){var x=this.getViewportSizeMinusPadding_(-i),E=V4(r,o,[x[0]/2+v[3],x[1]/2+v[0]],n,i);f=[r[0]-E[0],r[1]-E[1]]}return f},t.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},t.prototype.adjustCenter=function(r){var n=mb(this.targetCenter_,this.getProjection());this.setCenter([n[0]+r[0],n[1]+r[1]])},t.prototype.adjustCenterInternal=function(r){var n=this.targetCenter_;this.setCenterInternal([n[0]+r[0],n[1]+r[1]])},t.prototype.adjustResolution=function(r,n){var i=n&&nl(n,this.getProjection());this.adjustResolutionInternal(r,i)},t.prototype.adjustResolutionInternal=function(r,n){var i=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),f=this.constraints_.resolution(this.targetResolution_*r,0,o,i);n&&(this.targetCenter_=this.calculateCenterZoom(f,n)),this.targetResolution_*=r,this.applyTargetState_()},t.prototype.adjustZoom=function(r,n){this.adjustResolution(Math.pow(this.zoomFactor_,-r),n)},t.prototype.adjustRotation=function(r,n){n&&(n=nl(n,this.getProjection())),this.adjustRotationInternal(r,n)},t.prototype.adjustRotationInternal=function(r,n){var i=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+r,i);n&&(this.targetCenter_=this.calculateCenterRotate(o,n)),this.targetRotation_+=r,this.applyTargetState_()},t.prototype.setCenter=function(r){this.setCenterInternal(r&&nl(r,this.getProjection()))},t.prototype.setCenterInternal=function(r){this.targetCenter_=r,this.applyTargetState_()},t.prototype.setHint=function(r,n){return this.hints_[r]+=n,this.changed(),this.hints_[r]},t.prototype.setResolution=function(r){this.targetResolution_=r,this.applyTargetState_()},t.prototype.setRotation=function(r){this.targetRotation_=r,this.applyTargetState_()},t.prototype.setZoom=function(r){this.setResolution(this.getResolutionForZoom(r))},t.prototype.applyTargetState_=function(r,n){var i=this.getAnimating()||this.getInteracting()||n,o=this.constraints_.rotation(this.targetRotation_,i),f=this.getViewportSize_(o),v=this.constraints_.resolution(this.targetResolution_,0,f,i),x=this.constraints_.center(this.targetCenter_,v,f,i,this.calculateCenterShift(this.targetCenter_,v,o,f));this.get(Ts.ROTATION)!==o&&this.set(Ts.ROTATION,o),this.get(Ts.RESOLUTION)!==v&&(this.set(Ts.RESOLUTION,v),this.set("zoom",this.getZoom(),!0)),(!x||!this.get(Ts.CENTER)||!Zp(this.get(Ts.CENTER),x))&&this.set(Ts.CENTER,x),this.getAnimating()&&!r&&this.cancelAnimations(),this.cancelAnchor_=void 0},t.prototype.resolveConstraints=function(r,n,i){var o=r!==void 0?r:200,f=n||0,v=this.constraints_.rotation(this.targetRotation_),x=this.getViewportSize_(v),E=this.constraints_.resolution(this.targetResolution_,f,x),S=this.constraints_.center(this.targetCenter_,E,x,!1,this.calculateCenterShift(this.targetCenter_,E,v,x));if(o===0&&!this.cancelAnchor_){this.targetResolution_=E,this.targetRotation_=v,this.targetCenter_=S,this.applyTargetState_();return}var P=i||(o===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==E||this.getRotation()!==v||!this.getCenterInternal()||!Zp(this.getCenterInternal(),S))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:v,center:S,resolution:E,duration:o,easing:bs,anchor:P}))},t.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(ba.INTERACTING,1)},t.prototype.endInteraction=function(r,n,i){var o=i&&nl(i,this.getProjection());this.endInteractionInternal(r,n,o)},t.prototype.endInteractionInternal=function(r,n,i){this.setHint(ba.INTERACTING,-1),this.resolveConstraints(r,n,i)},t.prototype.getConstrainedCenter=function(r,n){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(r,n||this.getResolution(),i)},t.prototype.getConstrainedZoom=function(r,n){var i=this.getResolutionForZoom(r);return this.getZoomForResolution(this.getConstrainedResolution(i,n))},t.prototype.getConstrainedResolution=function(r,n){var i=n||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(r,i,o)},t}(Oi);function ZC(e,t){setTimeout(function(){e(t)},0)}function oLt(e){if(e.extent!==void 0){var t=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return F4(e.extent,e.constrainOnlyCenter,t)}var r=SC(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,F4(n,!1,!1)}return dEe}function aLt(e){var t,r,n,i=28,o=2,f=e.minZoom!==void 0?e.minZoom:U4,v=e.maxZoom!==void 0?e.maxZoom:i,x=e.zoomFactor!==void 0?e.zoomFactor:o,E=e.multiWorld!==void 0?e.multiWorld:!1,S=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,P=e.showFullExtent!==void 0?e.showFullExtent:!1,q=SC(e.projection,"EPSG:3857"),F=q.getExtent(),K=e.constrainOnlyCenter,ne=e.extent;if(!E&&!ne&&q.isGlobal()&&(K=!1,ne=F),e.resolutions!==void 0){var Z=e.resolutions;r=Z[f],n=Z[v]!==void 0?Z[v]:Z[Z.length-1],e.constrainResolution?t=mEe(Z,S,!K&&ne,P):t=B4(r,n,S,!K&&ne,P)}else{var W=F?Math.max(jr(F),gi(F)):360*ga[ya.DEGREES]/q.getMetersPerUnit(),Q=W/gg/Math.pow(o,U4),le=Q/Math.pow(o,i-U4);r=e.maxResolution,r!==void 0?f=0:r=Q/Math.pow(x,f),n=e.minResolution,n===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?n=r/Math.pow(x,v):n=Q/Math.pow(x,v):n=le),v=f+Math.floor(Math.log(r/n)/Math.log(x)),n=r/Math.pow(x,v-f),e.constrainResolution?t=vEe(x,r,n,S,!K&&ne,P):t=B4(r,n,S,!K&&ne,P)}return{constraint:t,maxResolution:r,minResolution:n,minZoom:f,zoomFactor:x}}function sLt(e){var t=e.enableRotation!==void 0?e.enableRotation:!0;if(t){var r=e.constrainRotation;return r===void 0||r===!0?Vwe():r===!1?M4:typeof r=="number"?Uwe(r):M4}else return dg}function lLt(e){return!(e.sourceCenter&&e.targetCenter&&!Zp(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function V4(e,t,r,n,i){var o=Math.cos(-i),f=Math.sin(-i),v=e[0]*o-e[1]*f,x=e[1]*o+e[0]*f;v+=(t[0]/2-r[0])*n,x+=(r[1]-t[1]/2)*n,f=-f;var E=v*o-x*f,S=x*o+v*f;return[E,S]}var Kl=iLt;var uLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function gEe(e){if(e instanceof bb){e.setMapInternal(null);return}e instanceof wb&&e.getLayers().forEach(gEe)}function yEe(e,t){if(e instanceof bb){e.setMapInternal(t);return}if(e instanceof wb)for(var r=e.getLayers().getArray(),n=0,i=r.length;n<i;++n)yEe(r[n],t)}var cLt=function(e){uLt(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var i=hLt(r);n.renderComplete_,n.loaded_=!0,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=r.maxTilesLoading!==void 0?r.maxTilesLoading:16,n.pixelRatio_=r.pixelRatio!==void 0?r.pixelRatio:PC,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=nc(),n.pixelToCoordinateTransform_=nc(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=r.moveTolerance,n.keyboardEventTarget_=i.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=i.controls||new $o,n.interactions=i.interactions||new $o,n.overlays_=i.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new hEe(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(ri.LAYERGROUP,n.handleLayerGroupChanged_),n.addChangeListener(ri.VIEW,n.handleViewChanged_),n.addChangeListener(ri.SIZE,n.handleSizeChanged_),n.addChangeListener(ri.TARGET,n.handleTargetChanged_),n.setProperties(i.values);var o=n;return r.view&&!(r.view instanceof Kl)&&r.view.then(function(f){o.setView(new Kl(f))}),n.controls.addEventListener(Vo.ADD,function(f){f.element.setMap(this)}.bind(n)),n.controls.addEventListener(Vo.REMOVE,function(f){f.element.setMap(null)}.bind(n)),n.interactions.addEventListener(Vo.ADD,function(f){f.element.setMap(this)}.bind(n)),n.interactions.addEventListener(Vo.REMOVE,function(f){f.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(Vo.ADD,function(f){this.addOverlayInternal_(f.element)}.bind(n)),n.overlays_.addEventListener(Vo.REMOVE,function(f){var v=f.element,x=v.getId();x!==void 0&&delete this.overlayIdIndex_[x.toString()],f.element.setMap(null)}.bind(n)),n.controls.forEach(function(f){f.setMap(this)}.bind(n)),n.interactions.forEach(function(f){f.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return t.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(r){this.getControls().push(r)},t.prototype.addInteraction=function(r){this.getInteractions().push(r)},t.prototype.addLayer=function(r){var n=this.getLayerGroup().getLayers();n.push(r)},t.prototype.handleLayerAdd_=function(r){yEe(r.layer,this)},t.prototype.addOverlay=function(r){this.getOverlays().push(r)},t.prototype.addOverlayInternal_=function(r){var n=r.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=r),r.setMap(this)},t.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),e.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(r,n,i){if(!(!this.frameState_||!this.renderer_)){var o=this.getCoordinateFromPixelInternal(r);i=i!==void 0?i:{};var f=i.hitTolerance!==void 0?i.hitTolerance:0,v=i.layerFilter!==void 0?i.layerFilter:Hh,x=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,f,x,n,null,v,null)}},t.prototype.getFeaturesAtPixel=function(r,n){var i=[];return this.forEachFeatureAtPixel(r,function(o){i.push(o)},n),i},t.prototype.getAllLayers=function(){var r=[];function n(i){i.forEach(function(o){o instanceof wb?n(o.getLayers()):r.push(o)})}return n(this.getLayers()),r},t.prototype.forEachLayerAtPixel=function(r,n,i){if(!(!this.frameState_||!this.renderer_)){var o=i||{},f=o.hitTolerance!==void 0?o.hitTolerance:0,v=o.layerFilter||Hh;return this.renderer_.forEachLayerAtPixel(r,this.frameState_,f,n,v)}},t.prototype.hasFeatureAtPixel=function(r,n){if(!this.frameState_||!this.renderer_)return!1;var i=this.getCoordinateFromPixelInternal(r);n=n!==void 0?n:{};var o=n.layerFilter!==void 0?n.layerFilter:Hh,f=n.hitTolerance!==void 0?n.hitTolerance:0,v=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,f,v,o,null)},t.prototype.getEventCoordinate=function(r){return this.getCoordinateFromPixel(this.getEventPixel(r))},t.prototype.getEventCoordinateInternal=function(r){return this.getCoordinateFromPixelInternal(this.getEventPixel(r))},t.prototype.getEventPixel=function(r){var n=this.viewport_.getBoundingClientRect(),i="changedTouches"in r?r.changedTouches[0]:r;return[i.clientX-n.left,i.clientY-n.top]},t.prototype.getTarget=function(){return this.get(ri.TARGET)},t.prototype.getTargetElement=function(){var r=this.getTarget();return r!==void 0?typeof r=="string"?document.getElementById(r):r:null},t.prototype.getCoordinateFromPixel=function(r){return mb(this.getCoordinateFromPixelInternal(r),this.getView().getProjection())},t.prototype.getCoordinateFromPixelInternal=function(r){var n=this.frameState_;return n?ro(n.pixelToCoordinateTransform,r.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(r){var n=this.overlayIdIndex_[r.toString()];return n!==void 0?n:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get(ri.LAYERGROUP)},t.prototype.setLayers=function(r){var n=this.getLayerGroup();if(r instanceof $o){n.setLayers(r);return}var i=n.getLayers();i.clear(),i.extend(r)},t.prototype.getLayers=function(){var r=this.getLayerGroup().getLayers();return r},t.prototype.getLoadingOrNotReady=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,i=r.length;n<i;++n){var o=r[n];if(o.visible){var f=o.layer.getRenderer();if(f&&!f.ready)return!0;var v=o.layer.getSource();if(v&&v.loading)return!0}}return!1},t.prototype.getPixelFromCoordinate=function(r){var n=nl(r,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},t.prototype.getPixelFromCoordinateInternal=function(r){var n=this.frameState_;return n?ro(n.coordinateToPixelTransform,r.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get(ri.SIZE)},t.prototype.getView=function(){return this.get(ri.VIEW)},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getOwnerDocument=function(){var r=this.getTargetElement();return r?r.ownerDocument:document},t.prototype.getTilePriority=function(r,n,i,o){return fEe(this.frameState_,r,n,i,o)},t.prototype.handleBrowserEvent=function(r,n){var i=n||r.type,o=new Wl(i,this,r);this.handleMapBrowserEvent(o)},t.prototype.handleMapBrowserEvent=function(r){if(this.frameState_){var n=r.originalEvent,i=n.type;if(i===Eb.POINTERDOWN||i===gt.WHEEL||i===gt.KEYDOWN){var o=this.getOwnerDocument(),f=this.viewport_.getRootNode?this.viewport_.getRootNode():o,v=n.target;if(this.overlayContainerStopEvent_.contains(v)||!(f===o?o.documentElement:f).contains(v))return}if(r.frameState=this.frameState_,this.dispatchEvent(r)!==!1)for(var x=this.getInteractions().getArray().slice(),E=x.length-1;E>=0;E--){var S=x[E];if(!(S.getMap()!==this||!S.getActive()||!this.getTargetElement())){var P=S.handleEvent(r);if(!P||r.propagationStopped)break}}}},t.prototype.handlePostRender=function(){var r=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var i=this.maxTilesLoading_,o=i;if(r){var f=r.viewHints;if(f[ba.ANIMATING]||f[ba.INTERACTING]){var v=Date.now()-r.time>8;i=v?0:8,o=v?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,o))}r&&this.renderer_&&!r.animate&&(this.renderComplete_===!0?(this.hasListener(Es.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Es.RENDERCOMPLETE,r),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Qh(Gl.LOADEND,this,r)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Qh(Gl.LOADSTART,this,r))));for(var x=this.postRenderFunctions_,E=0,S=x.length;E<S;++E)x[E](this,r);x.length=0},t.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},t.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var r=0,n=this.targetChangeHandlerKeys_.length;r<n;++r)gr(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(gt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(gt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,_b(this.viewport_)}var i=this.getTargetElement();if(!i)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{i.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new uEe(this,this.moveTolerance_);for(var o in Qr)this.mapBrowserEventHandler_.addEventListener(Qr[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(gt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(gt.WHEEL,this.boundHandleBrowserEvent_,AC?{passive:!1}:!1);var f=this.getOwnerDocument().defaultView,v=this.keyboardEventTarget_?this.keyboardEventTarget_:i;this.targetChangeHandlerKeys_=[Qt(v,gt.KEYDOWN,this.handleBrowserEvent,this),Qt(v,gt.KEYPRESS,this.handleBrowserEvent,this),Qt(f,gt.RESIZE,this.updateSize,this)]}this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(gr(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(gr(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var r=this.getView();r&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Qt(r,ec.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Qt(r,gt.CHANGE,this.handleViewPropertyChanged_,this),r.resolveConstraints(0)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(gr),this.layerGroupPropertyListenerKeys_=null);var r=this.getLayerGroup();r&&(this.handleLayerAdd_(new ac("addlayer",r)),this.layerGroupPropertyListenerKeys_=[Qt(r,ec.PROPERTYCHANGE,this.render,this),Qt(r,gt.CHANGE,this.render,this),Qt(r,"addlayer",this.handleLayerAdd_,this),Qt(r,"removelayer",this.handleLayerRemove_,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.redrawText=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,i=r.length;n<i;++n){var o=r[n].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},t.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(r){return this.getControls().remove(r)},t.prototype.removeInteraction=function(r){return this.getInteractions().remove(r)},t.prototype.removeLayer=function(r){var n=this.getLayerGroup().getLayers();return n.remove(r)},t.prototype.handleLayerRemove_=function(r){gEe(r.layer)},t.prototype.removeOverlay=function(r){return this.getOverlays().remove(r)},t.prototype.renderFrame_=function(r){var n=this,i=this.getSize(),o=this.getView(),f=this.frameState_,v=null;if(i!==void 0&&R4(i)&&o&&o.isDef()){var x=o.getHints(this.frameState_?this.frameState_.viewHints:void 0),E=o.getState();if(v={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:pb(E.center,E.resolution,E.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:r,usedTiles:{},viewState:E,viewHints:x,wantedTiles:{},mapId:ti(this),renderTargets:{}},E.nextCenter&&E.nextResolution){var S=isNaN(E.nextRotation)?E.rotation:E.nextRotation;v.nextExtent=pb(E.nextCenter,E.nextResolution,S,i)}}if(this.frameState_=v,this.renderer_.renderFrame(v),v){if(v.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,v.postRenderFunctions),f){var P=!this.previousExtent_||!db(this.previousExtent_)&&!cb(v.extent,this.previousExtent_);P&&(this.dispatchEvent(new Qh(Gl.MOVESTART,this,f)),this.previousExtent_=Jv(this.previousExtent_))}var q=this.previousExtent_&&!v.viewHints[ba.ANIMATING]&&!v.viewHints[ba.INTERACTING]&&!cb(v.extent,this.previousExtent_);q&&(this.dispatchEvent(new Qh(Gl.MOVEEND,this,v)),u1e(v.extent,this.previousExtent_))}this.dispatchEvent(new Qh(Gl.POSTRENDER,this,v)),this.renderComplete_=this.hasListener(Gl.LOADSTART)||this.hasListener(Gl.LOADEND)||this.hasListener(Es.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},t.prototype.setLayerGroup=function(r){var n=this.getLayerGroup();n&&this.handleLayerRemove_(new ac("removelayer",n)),this.set(ri.LAYERGROUP,r)},t.prototype.setSize=function(r){this.set(ri.SIZE,r)},t.prototype.setTarget=function(r){this.set(ri.TARGET,r)},t.prototype.setView=function(r){if(!r||r instanceof Kl){this.set(ri.VIEW,r);return}this.set(ri.VIEW,new Kl);var n=this;r.then(function(i){n.setView(new Kl(i))})},t.prototype.updateSize=function(){var r=this.getTargetElement(),n=void 0;if(r){var i=getComputedStyle(r),o=r.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),f=r.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(o)&&!isNaN(f)&&(n=[o,f],!R4(n)&&(r.offsetWidth||r.offsetHeight||r.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(n),this.updateViewportSize_()},t.prototype.updateViewportSize_=function(){var r=this.getView();if(r){var n=void 0,i=getComputedStyle(this.viewport_);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),r.setViewportSize(n)}},t}(Oi);function hLt(e){var t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var r={},n=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new wb({layers:e.layers});r[ri.LAYERGROUP]=n,r[ri.TARGET]=e.target,r[ri.VIEW]=e.view instanceof Kl?e.view:new Kl;var i;e.controls!==void 0&&(Array.isArray(e.controls)?i=new $o(e.controls.slice()):(Bt(typeof e.controls.getArray=="function",47),i=e.controls));var o;e.interactions!==void 0&&(Array.isArray(e.interactions)?o=new $o(e.interactions.slice()):(Bt(typeof e.interactions.getArray=="function",48),o=e.interactions));var f;return e.overlays!==void 0?Array.isArray(e.overlays)?f=new $o(e.overlays.slice()):(Bt(typeof e.overlays.getArray=="function",49),f=e.overlays):f=new $o,{controls:i,interactions:o,keyboardEventTarget:t,overlays:f,values:r}}var _Ee=cLt;var fLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pLt=function(e){fLt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this,n.ulElement_=document.createElement("ul"),n.collapsed_=i.collapsed!==void 0?i.collapsed:!0,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=i.collapsible!==void 0,n.collapsible_=i.collapsible!==void 0?i.collapsible:!0,n.collapsible_||(n.collapsed_=!1);var o=i.className!==void 0?i.className:"ol-attribution",f=i.tipLabel!==void 0?i.tipLabel:"Attributions",v=i.expandClassName!==void 0?i.expandClassName:o+"-expand",x=i.collapseLabel!==void 0?i.collapseLabel:"\u203A",E=i.collapseClassName!==void 0?i.collapseClassName:o+"-collapse";typeof x=="string"?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=x,n.collapseLabel_.className=E):n.collapseLabel_=x;var S=i.label!==void 0?i.label:"i";typeof S=="string"?(n.label_=document.createElement("span"),n.label_.textContent=S,n.label_.className=v):n.label_=S;var P=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=f,n.toggleButton_.appendChild(P),n.toggleButton_.addEventListener(gt.CLICK,n.handleClick_.bind(n),!1);var q=o+" "+ws+" "+Zl+(n.collapsed_&&n.collapsible_?" "+P4:"")+(n.collapsible_?"":" ol-uncollapsible"),F=n.element;return F.className=q,F.appendChild(n.toggleButton_),F.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return t.prototype.collectSourceAttributions_=function(r){for(var n={},i=[],o=!0,f=r.layerStatesArray,v=0,x=f.length;v<x;++v){var E=f[v];if(Hp(E,r.viewState)){var S=E.layer.getSource();if(S){var P=S.getAttributions();if(P){var q=P(r);if(q)if(o=o&&S.getAttributionsCollapsible()!==!1,Array.isArray(q))for(var F=0,K=q.length;F<K;++F)q[F]in n||(i.push(q[F]),n[q[F]]=!0);else q in n||(i.push(q),n[q]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),i},t.prototype.updateElement_=function(r){if(!r){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var n=this.collectSourceAttributions_(r),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!sg(n,this.renderedAttributions_)){Pwe(this.ulElement_);for(var o=0,f=n.length;o<f;++o){var v=document.createElement("li");v.innerHTML=n[o],this.ulElement_.appendChild(v)}this.renderedAttributions_=n}},t.prototype.handleClick_=function(r){r.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},t.prototype.handleToggle_=function(){this.element.classList.toggle(P4),this.collapsed_?pg(this.collapseLabel_,this.label_):pg(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(r){this.collapsible_!==r&&(this.collapsible_=r,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(r){this.userCollapsed_=r,!(!this.collapsible_||this.collapsed_===r)&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.render=function(r){this.updateElement_(r.frameState)},t}(Ba),xEe=pLt;var dLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mLt=function(e){dLt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this;var o=i.className!==void 0?i.className:"ol-rotate",f=i.label!==void 0?i.label:"\u21E7",v=i.compassClassName!==void 0?i.compassClassName:"ol-compass";n.label_=null,typeof f=="string"?(n.label_=document.createElement("span"),n.label_.className=v,n.label_.textContent=f):(n.label_=f,n.label_.classList.add(v));var x=i.tipLabel?i.tipLabel:"Reset rotation",E=document.createElement("button");E.className=o+"-reset",E.setAttribute("type","button"),E.title=x,E.appendChild(n.label_),E.addEventListener(gt.CLICK,n.handleClick_.bind(n),!1);var S=o+" "+ws+" "+Zl,P=n.element;return P.className=S,P.appendChild(E),n.callResetNorth_=i.resetNorth?i.resetNorth:void 0,n.duration_=i.duration!==void 0?i.duration:250,n.autoHide_=i.autoHide!==void 0?i.autoHide:!0,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(xb),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},t.prototype.resetNorth_=function(){var r=this.getMap(),n=r.getView();if(n){var i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:bs}):n.setRotation(0))}},t.prototype.render=function(r){var n=r.frameState;if(n){var i=n.viewState.rotation;if(i!=this.rotation_){var o="rotate("+i+"rad)";if(this.autoHide_){var f=this.element.classList.contains(xb);!f&&i===0?this.element.classList.add(xb):f&&i!==0&&this.element.classList.remove(xb)}this.label_.style.transform=o}this.rotation_=i}},t}(Ba),bEe=mLt;var vLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gLt=function(e){vLt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,{element:document.createElement("div"),target:i.target})||this;var o=i.className!==void 0?i.className:"ol-zoom",f=i.delta!==void 0?i.delta:1,v=i.zoomInClassName!==void 0?i.zoomInClassName:o+"-in",x=i.zoomOutClassName!==void 0?i.zoomOutClassName:o+"-out",E=i.zoomInLabel!==void 0?i.zoomInLabel:"+",S=i.zoomOutLabel!==void 0?i.zoomOutLabel:"\u2013",P=i.zoomInTipLabel!==void 0?i.zoomInTipLabel:"Zoom in",q=i.zoomOutTipLabel!==void 0?i.zoomOutTipLabel:"Zoom out",F=document.createElement("button");F.className=v,F.setAttribute("type","button"),F.title=P,F.appendChild(typeof E=="string"?document.createTextNode(E):E),F.addEventListener(gt.CLICK,n.handleClick_.bind(n,f),!1);var K=document.createElement("button");K.className=x,K.setAttribute("type","button"),K.title=q,K.appendChild(typeof S=="string"?document.createTextNode(S):S),K.addEventListener(gt.CLICK,n.handleClick_.bind(n,-f),!1);var ne=o+" "+ws+" "+Zl,Z=n.element;return Z.className=ne,Z.appendChild(F),Z.appendChild(K),n.duration_=i.duration!==void 0?i.duration:250,n}return t.prototype.handleClick_=function(r,n){n.preventDefault(),this.zoomByDelta_(r)},t.prototype.zoomByDelta_=function(r){var n=this.getMap(),i=n.getView();if(i){var o=i.getZoom();if(o!==void 0){var f=i.getConstrainedZoom(o+r);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:f,duration:this.duration_,easing:bs})):i.setZoom(f)}}},t}(Ba),WC=gLt;var yLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_Lt=function(e){yLt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,{element:document.createElement("div"),target:i.target})||this,n.extent=i.extent?i.extent:null;var o=i.className!==void 0?i.className:"ol-zoom-extent",f=i.label!==void 0?i.label:"E",v=i.tipLabel!==void 0?i.tipLabel:"Fit to extent",x=document.createElement("button");x.setAttribute("type","button"),x.title=v,x.appendChild(typeof f=="string"?document.createTextNode(f):f),x.addEventListener(gt.CLICK,n.handleClick_.bind(n),!1);var E=o+" "+ws+" "+Zl,S=n.element;return S.className=E,S.appendChild(x),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.handleZoomToExtent()},t.prototype.handleZoomToExtent=function(){var r=this.getMap(),n=r.getView(),i=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(gb(i))},t}(Ba),wEe=_Lt;function EEe(e){var t=e||{},r=new $o,n=t.zoom!==void 0?t.zoom:!0;n&&r.push(new WC(t.zoomOptions));var i=t.rotate!==void 0?t.rotate:!0;i&&r.push(new bEe(t.rotateOptions));var o=t.attribution!==void 0?t.attribution:!0;return o&&r.push(new xEe(t.attributionOptions)),r}var xLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bLt=function(e){xLt(t,e);function t(r){return r=wr({},r),r.controls||(r.controls=EEe()),r.interactions||(r.interactions=GC({onFocusOnly:!0})),e.call(this,r)||this}return t.prototype.createRenderer=function(){return new sEe(this)},t}(_Ee),HC=bLt;var Sb={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var wLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ELt=function(e){wLt(t,e);function t(r){var n=this,i=r||{},o=wr({},i);return delete o.preload,delete o.useInterimTilesOnError,n=e.call(this,o)||this,n.on,n.once,n.un,n.setPreload(i.preload!==void 0?i.preload:0),n.setUseInterimTilesOnError(i.useInterimTilesOnError!==void 0?i.useInterimTilesOnError:!0),n}return t.prototype.getPreload=function(){return this.get(Sb.PRELOAD)},t.prototype.setPreload=function(r){this.set(Sb.PRELOAD,r)},t.prototype.getUseInterimTilesOnError=function(){return this.get(Sb.USE_INTERIM_TILES_ON_ERROR)},t.prototype.setUseInterimTilesOnError=function(r){this.set(Sb.USE_INTERIM_TILES_ON_ERROR,r)},t.prototype.getData=function(r){return e.prototype.getData.call(this,r)},t}(bb),TEe=ELt;var TLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),SLt=function(e){TLt(t,e);function t(r,n,i){var o=e.call(this)||this,f=i||{};return o.tileCoord=r,o.state=n,o.interimTile=null,o.key="",o.transition_=f.transition===void 0?250:f.transition,o.transitionStarts_={},o.interpolate=!!f.interpolate,o}return t.prototype.changed=function(){this.dispatchEvent(gt.CHANGE)},t.prototype.release=function(){},t.prototype.getKey=function(){return this.key+"/"+this.tileCoord},t.prototype.getInterimTile=function(){if(!this.interimTile)return this;var r=this.interimTile;do{if(r.getState()==wt.LOADED)return this.transition_=0,r;r=r.interimTile}while(r);return this},t.prototype.refreshInterimChain=function(){if(this.interimTile){var r=this.interimTile,n=this;do{if(r.getState()==wt.LOADED){r.interimTile=null;break}else r.getState()==wt.LOADING?n=r:r.getState()==wt.IDLE?n.interimTile=r.interimTile:n=r;r=n.interimTile}while(r)}},t.prototype.getTileCoord=function(){return this.tileCoord},t.prototype.getState=function(){return this.state},t.prototype.setState=function(r){if(this.state!==wt.ERROR&&this.state>r)throw new Error("Tile load sequence violation");this.state=r,this.changed()},t.prototype.load=function(){fr()},t.prototype.getAlpha=function(r,n){if(!this.transition_)return 1;var i=this.transitionStarts_[r];if(!i)i=n,this.transitionStarts_[r]=i;else if(i===-1)return 1;var o=n-i+1e3/60;return o>=this.transition_?1:v4(o/this.transition_)},t.prototype.inTransition=function(r){return this.transition_?this.transitionStarts_[r]!==-1:!1},t.prototype.endTransition=function(r){this.transition_&&(this.transitionStarts_[r]=-1)},t}(Ul),KC=SLt;var ILt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),CLt=function(e){ILt(t,e);function t(r,n,i,o,f,v){var x=e.call(this,r,n,v)||this;return x.crossOrigin_=o,x.src_=i,x.key=i,x.image_=new Image,o!==null&&(x.image_.crossOrigin=o),x.unlisten_=null,x.tileLoadFunction_=f,x}return t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(r){this.image_=r,this.state=wt.LOADED,this.unlistenImage_(),this.changed()},t.prototype.handleImageError_=function(){this.state=wt.ERROR,this.unlistenImage_(),this.image_=PLt(),this.changed()},t.prototype.handleImageLoad_=function(){var r=this.image_;r.naturalWidth&&r.naturalHeight?this.state=wt.LOADED:this.state=wt.EMPTY,this.unlistenImage_(),this.changed()},t.prototype.load=function(){this.state==wt.ERROR&&(this.state=wt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==wt.IDLE&&(this.state=wt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=k4(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(KC);function PLt(){var e=oc(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}var YC=CLt;var SEe=.5,Yl=!0;var MLt=10,IEe=.25,ALt=function(){function e(t,r,n,i,o,f){this.sourceProj_=t,this.targetProj_=r;var v={},x=Wp(this.targetProj_,this.sourceProj_);this.transformInv_=function(le){var ce=le[0]+"/"+le[1];return v[ce]||(v[ce]=x(le)),v[ce]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&jr(i)==jr(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?jr(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?jr(this.targetProj_.getExtent()):null;var E=xs(n),S=rg(n),P=tg(n),q=eg(n),F=this.transformInv_(E),K=this.transformInv_(S),ne=this.transformInv_(P),Z=this.transformInv_(q),W=MLt+(f?Math.max(0,Math.ceil(Kbe(fb(n)/(f*f*256*256)))):0);if(this.addQuad_(E,S,P,q,F,K,ne,Z,W),this.wrapsXInSource_){var Q=1/0;this.triangles_.forEach(function(le,ce,ze){Q=Math.min(Q,le.source[0][0],le.source[1][0],le.source[2][0])}),this.triangles_.forEach(function(le){if(Math.max(le.source[0][0],le.source[1][0],le.source[2][0])-Q>this.sourceWorldWidth_/2){var ce=[[le.source[0][0],le.source[0][1]],[le.source[1][0],le.source[1][1]],[le.source[2][0],le.source[2][1]]];ce[0][0]-Q>this.sourceWorldWidth_/2&&(ce[0][0]-=this.sourceWorldWidth_),ce[1][0]-Q>this.sourceWorldWidth_/2&&(ce[1][0]-=this.sourceWorldWidth_),ce[2][0]-Q>this.sourceWorldWidth_/2&&(ce[2][0]-=this.sourceWorldWidth_);var ze=Math.min(ce[0][0],ce[1][0],ce[2][0]),Le=Math.max(ce[0][0],ce[1][0],ce[2][0]);Le-ze<this.sourceWorldWidth_/2&&(le.source=ce)}}.bind(this))}v={}}return e.prototype.addTriangle_=function(t,r,n,i,o,f){this.triangles_.push({source:[i,o,f],target:[t,r,n]})},e.prototype.addQuad_=function(t,r,n,i,o,f,v,x,E){var S=a4([o,f,v,x]),P=this.sourceWorldWidth_?jr(S)/this.sourceWorldWidth_:null,q=this.sourceWorldWidth_,F=this.sourceProj_.canWrapX()&&P>.5&&P<1,K=!1;if(E>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var ne=a4([t,r,n,i]),Z=jr(ne)/this.targetWorldWidth_;K=Z>IEe||K}!F&&this.sourceProj_.isGlobal()&&P&&(K=P>IEe||K)}if(!(!K&&this.maxSourceExtent_&&isFinite(S[0])&&isFinite(S[1])&&isFinite(S[2])&&isFinite(S[3])&&!Gp(S,this.maxSourceExtent_))){var W=0;if(!K&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(f[0])||!isFinite(f[1])||!isFinite(v[0])||!isFinite(v[1])||!isFinite(x[0])||!isFinite(x[1]))){if(E>0)K=!0;else if(W=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(f[0])||!isFinite(f[1])?4:0)+(!isFinite(v[0])||!isFinite(v[1])?2:0)+(!isFinite(x[0])||!isFinite(x[1])?1:0),W!=1&&W!=2&&W!=4&&W!=8)return}if(E>0){if(!K){var Q=[(t[0]+n[0])/2,(t[1]+n[1])/2],le=this.transformInv_(Q),ce=void 0;if(F){var ze=(rl(o[0],q)+rl(v[0],q))/2;ce=ze-rl(le[0],q)}else ce=(o[0]+v[0])/2-le[0];var Le=(o[1]+v[1])/2-le[1],Be=ce*ce+Le*Le;K=Be>this.errorThresholdSquared_}if(K){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var et=[(r[0]+n[0])/2,(r[1]+n[1])/2],ot=this.transformInv_(et),Ot=[(i[0]+t[0])/2,(i[1]+t[1])/2],Wt=this.transformInv_(Ot);this.addQuad_(t,r,et,Ot,o,f,ot,Wt,E-1),this.addQuad_(Ot,et,n,i,Wt,ot,v,x,E-1)}else{var sr=[(t[0]+r[0])/2,(t[1]+r[1])/2],On=this.transformInv_(sr),Ln=[(n[0]+i[0])/2,(n[1]+i[1])/2],Cr=this.transformInv_(Ln);this.addQuad_(t,sr,Ln,i,o,On,Cr,x,E-1),this.addQuad_(sr,r,n,Ln,On,f,v,Cr,E-1)}return}}if(F){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(W&11)==0&&this.addTriangle_(t,n,i,o,v,x),(W&14)==0&&this.addTriangle_(t,n,r,o,v,f),W&&((W&13)==0&&this.addTriangle_(r,i,t,f,x,o),(W&7)==0&&this.addTriangle_(r,i,n,f,x,v))}},e.prototype.calculateSourceExtent=function(){var t=_a();return this.triangles_.forEach(function(r,n,i){var o=r.source;hb(t,o[0]),hb(t,o[1]),hb(t,o[2])}),t},e.prototype.getTriangles=function(){return this.triangles_},e}(),CEe=ALt;var Ib={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},PEe={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0};var $4,Z4=[];function MEe(e,t,r,n,i){e.beginPath(),e.moveTo(0,0),e.lineTo(t,r),e.lineTo(n,i),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(r,i)),e.restore()}function G4(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function qLt(){if($4===void 0){var e=document.createElement("canvas").getContext("2d");e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",MEe(e,4,5,4,0),MEe(e,4,5,0,5);var t=e.getImageData(0,0,3,3).data;$4=G4(t,0)||G4(t,4)||G4(t,8)}return $4}function XC(e,t,r,n){var i=ig(r,t,e),o=p4(t,n,r),f=t.getMetersPerUnit();f!==void 0&&(o*=f);var v=e.getMetersPerUnit();v!==void 0&&(o/=v);var x=e.getExtent();if(!x||Vh(x,i)){var E=p4(e,o,i)/o;isFinite(E)&&E>0&&(o/=E)}return o}function AEe(e,t,r,n){var i=Qu(r),o=XC(e,t,i,n);return(!isFinite(o)||o<=0)&&EC(r,function(f){return o=XC(e,t,f,n),isFinite(o)&&o>0}),o}function qEe(e,t,r,n,i,o,f,v,x,E,S,P){var q=oc(Math.round(r*e),Math.round(r*t),Z4);if(P||wr(q,Ib),x.length===0)return q.canvas;q.scale(r,r);function F(ce){return Math.round(ce*r)/r}q.globalCompositeOperation="lighter";var K=_a();x.forEach(function(ce,ze,Le){p1e(K,ce.extent)});var ne=jr(K),Z=gi(K),W=oc(Math.round(r*ne/n),Math.round(r*Z/n));P||wr(W,Ib);var Q=r/n;x.forEach(function(ce,ze,Le){var Be=ce.extent[0]-K[0],et=-(ce.extent[3]-K[3]),ot=jr(ce.extent),Ot=gi(ce.extent);ce.image.width>0&&ce.image.height>0&&W.drawImage(ce.image,E,E,ce.image.width-2*E,ce.image.height-2*E,Be*Q,et*Q,ot*Q,Ot*Q)});var le=xs(f);return v.getTriangles().forEach(function(ce,ze,Le){var Be=ce.source,et=ce.target,ot=Be[0][0],Ot=Be[0][1],Wt=Be[1][0],sr=Be[1][1],On=Be[2][0],Ln=Be[2][1],Cr=F((et[0][0]-le[0])/o),xt=F(-(et[0][1]-le[1])/o),pr=F((et[1][0]-le[0])/o),Jt=F(-(et[1][1]-le[1])/o),oo=F((et[2][0]-le[0])/o),un=F(-(et[2][1]-le[1])/o),Ia=ot,Un=Ot;ot=0,Ot=0,Wt-=Ia,sr-=Un,On-=Ia,Ln-=Un;var Br=[[Wt,sr,0,0,pr-Cr],[On,Ln,0,0,oo-Cr],[0,0,Wt,sr,Jt-xt],[0,0,On,Ln,un-xt]],Vn=Xbe(Br);if(Vn){if(q.save(),q.beginPath(),qLt()||!P){q.moveTo(pr,Jt);for(var zt=4,_i=Cr-pr,xi=xt-Jt,wn=0;wn<zt;wn++)q.lineTo(pr+F((wn+1)*_i/zt),Jt+F(wn*xi/(zt-1))),wn!=zt-1&&q.lineTo(pr+F((wn+1)*_i/zt),Jt+F((wn+1)*xi/(zt-1)));q.lineTo(oo,un)}else q.moveTo(pr,Jt),q.lineTo(Cr,xt),q.lineTo(oo,un);q.clip(),q.transform(Vn[0],Vn[2],Vn[1],Vn[3],Cr,xt),q.translate(K[0]-Ia,K[3]-Un),q.scale(n/r,-n/r),q.drawImage(W.canvas,0,0),q.restore()}}),S&&(q.save(),q.globalCompositeOperation="source-over",q.strokeStyle="black",q.lineWidth=1,v.getTriangles().forEach(function(ce,ze,Le){var Be=ce.target,et=(Be[0][0]-le[0])/o,ot=-(Be[0][1]-le[1])/o,Ot=(Be[1][0]-le[0])/o,Wt=-(Be[1][1]-le[1])/o,sr=(Be[2][0]-le[0])/o,On=-(Be[2][1]-le[1])/o;q.beginPath(),q.moveTo(Ot,Wt),q.lineTo(et,ot),q.lineTo(sr,On),q.closePath(),q.stroke()}),q.restore()),q.canvas}var RLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OLt=function(e){RLt(t,e);function t(r,n,i,o,f,v,x,E,S,P,q,F){var K=e.call(this,f,wt.IDLE,{interpolate:!!F})||this;K.renderEdges_=q!==void 0?q:!1,K.pixelRatio_=x,K.gutter_=E,K.canvas_=null,K.sourceTileGrid_=n,K.targetTileGrid_=o,K.wrappedTileCoord_=v||f,K.sourceTiles_=[],K.sourcesListenerKeys_=null,K.sourceZ_=0;var ne=o.getTileCoordExtent(K.wrappedTileCoord_),Z=K.targetTileGrid_.getExtent(),W=K.sourceTileGrid_.getExtent(),Q=Z?$h(ne,Z):ne;if(fb(Q)===0)return K.state=wt.EMPTY,K;var le=r.getExtent();le&&(W?W=$h(W,le):W=le);var ce=o.getResolution(K.wrappedTileCoord_[0]),ze=AEe(r,i,Q,ce);if(!isFinite(ze)||ze<=0)return K.state=wt.EMPTY,K;var Le=P!==void 0?P:SEe;if(K.triangulation_=new CEe(r,i,Q,W,ze*Le,ce),K.triangulation_.getTriangles().length===0)return K.state=wt.EMPTY,K;K.sourceZ_=n.getZForResolution(ze);var Be=K.triangulation_.calculateSourceExtent();if(W&&(r.canWrapX()?(Be[1]=Xr(Be[1],W[1],W[3]),Be[3]=Xr(Be[3],W[1],W[3])):Be=$h(Be,W)),!fb(Be))K.state=wt.EMPTY;else{for(var et=n.getTileRangeForExtentAndZ(Be,K.sourceZ_),ot=et.minX;ot<=et.maxX;ot++)for(var Ot=et.minY;Ot<=et.maxY;Ot++){var Wt=S(K.sourceZ_,ot,Ot,x);Wt&&K.sourceTiles_.push(Wt)}K.sourceTiles_.length===0&&(K.state=wt.EMPTY)}return K}return t.prototype.getImage=function(){return this.canvas_},t.prototype.reproject_=function(){var r=[];if(this.sourceTiles_.forEach(function(S,P,q){S&&S.getState()==wt.LOADED&&r.push({extent:this.sourceTileGrid_.getTileCoordExtent(S.tileCoord),image:S.getImage()})}.bind(this)),this.sourceTiles_.length=0,r.length===0)this.state=wt.ERROR;else{var n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),o=typeof i=="number"?i:i[0],f=typeof i=="number"?i:i[1],v=this.targetTileGrid_.getResolution(n),x=this.sourceTileGrid_.getResolution(this.sourceZ_),E=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=qEe(o,f,this.pixelRatio_,x,this.sourceTileGrid_.getExtent(),v,E,this.triangulation_,r,this.gutter_,this.renderEdges_,this.interpolate),this.state=wt.LOADED}this.changed()},t.prototype.load=function(){if(this.state==wt.IDLE){this.state=wt.LOADING,this.changed();var r=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,i,o){var f=n.getState();if(f==wt.IDLE||f==wt.LOADING){r++;var v=Qt(n,gt.CHANGE,function(x){var E=n.getState();(E==wt.LOADED||E==wt.ERROR||E==wt.EMPTY)&&(gr(v),r--,r===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(v)}}.bind(this)),r===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,o){var f=n.getState();f==wt.IDLE&&n.load()})}},t.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(gr),this.sourcesListenerKeys_=null},t.prototype.release=function(){this.canvas_&&(Cwe(this.canvas_.getContext("2d")),Z4.push(this.canvas_),this.canvas_=null),e.prototype.release.call(this)},t}(KC),QC=OLt;var REe=function(){function e(t,r,n,i){this.minX=t,this.maxX=r,this.minY=n,this.maxY=i}return e.prototype.contains=function(t){return this.containsXY(t[1],t[2])},e.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},e.prototype.containsXY=function(t,r){return this.minX<=t&&t<=this.maxX&&this.minY<=r&&r<=this.maxY},e.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},e.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},e.prototype.getHeight=function(){return this.maxY-this.minY+1},e.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},e.prototype.getWidth=function(){return this.maxX-this.minX+1},e.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e}();function Kp(e,t,r,n,i){return i!==void 0?(i.minX=e,i.maxX=t,i.minY=r,i.maxY=n,i):new REe(e,t,r,n)}var JC=REe;var LLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DLt=function(e){LLt(t,e);function t(r){var n=e.call(this,r)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=_a(),n.tmpTileRange_=new JC(0,0,0,0),n}return t.prototype.isDrawableTile=function(r){var n=this.getLayer(),i=r.getState(),o=n.getUseInterimTilesOnError();return i==wt.LOADED||i==wt.EMPTY||i==wt.ERROR&&!o},t.prototype.getTile=function(r,n,i,o){var f=o.pixelRatio,v=o.viewState.projection,x=this.getLayer(),E=x.getSource(),S=E.getTile(r,n,i,f,v);return S.getState()==wt.ERROR&&(x.getUseInterimTilesOnError()?x.getPreload()>0&&(this.newTiles_=!0):S.setState(wt.LOADED)),this.isDrawableTile(S)||(S=S.getInterimTile()),S},t.prototype.getData=function(r){var n=this.frameState;if(!n)return null;var i=this.getLayer(),o=ro(n.pixelToCoordinateTransform,r.slice()),f=i.getExtent();if(f&&!Vh(f,o))return null;for(var v=n.pixelRatio,x=n.viewState.projection,E=n.viewState,S=i.getRenderSource(),P=S.getTileGridForProjection(E.projection),q=S.getTilePixelRatio(n.pixelRatio),F=P.getZForResolution(E.resolution);F>=P.getMinZoom();--F){var K=P.getTileCoordForCoordAndZ(o,F),ne=S.getTile(F,K[1],K[2],v,x);if(!(ne instanceof YC||ne instanceof QC))return null;if(ne.getState()===wt.LOADED){var Z=P.getOrigin(F),W=bo(P.getTileSize(F)),Q=P.getResolution(F),le=Math.floor(q*((o[0]-Z[0])/Q-K[1]*W[0])),ce=Math.floor(q*((Z[1]-o[1])/Q-K[2]*W[1])),ze=Math.round(q*S.getGutterForProjection(E.projection));return this.getImageData(ne.getImage(),le+ze,ce+ze)}}return null},t.prototype.loadedTileCallback=function(r,n,i){return this.isDrawableTile(i)?e.prototype.loadedTileCallback.call(this,r,n,i):!1},t.prototype.prepareFrame=function(r){return!!this.getLayer().getSource()},t.prototype.renderFrame=function(r,n){var i=r.layerStatesArray[r.layerIndex],o=r.viewState,f=o.projection,v=o.resolution,x=o.center,E=o.rotation,S=r.pixelRatio,P=this.getLayer(),q=P.getSource(),F=q.getRevision(),K=q.getTileGridForProjection(f),ne=K.getZForResolution(v,q.zDirection),Z=K.getResolution(ne),W=r.extent,Q=r.viewState.resolution,le=q.getTilePixelRatio(S),ce=Math.round(jr(W)/Q*S),ze=Math.round(gi(W)/Q*S),Le=i.extent&&Wh(i.extent,f);Le&&(W=$h(W,Wh(i.extent,f)));var Be=Z*ce/2/le,et=Z*ze/2/le,ot=[x[0]-Be,x[1]-et,x[0]+Be,x[1]+et],Ot=K.getTileRangeForExtentAndZ(W,ne),Wt={};Wt[ne]={};var sr=this.createLoadedTileFinder(q,f,Wt),On=this.tmpExtent,Ln=this.tmpTileRange_;this.newTiles_=!1;for(var Cr=E?TC(o.center,Q,E,r.size):void 0,xt=Ot.minX;xt<=Ot.maxX;++xt)for(var pr=Ot.minY;pr<=Ot.maxY;++pr)if(!(E&&!K.tileCoordIntersectsViewport([ne,xt,pr],Cr))){var Jt=this.getTile(ne,xt,pr,r);if(this.isDrawableTile(Jt)){var oo=ti(this);if(Jt.getState()==wt.LOADED){Wt[ne][Jt.tileCoord.toString()]=Jt;var un=Jt.inTransition(oo);un&&i.opacity!==1&&(Jt.endTransition(oo),un=!1),!this.newTiles_&&(un||this.renderedTiles.indexOf(Jt)===-1)&&(this.newTiles_=!0)}if(Jt.getAlpha(oo,r.time)===1)continue}var Ia=K.getTileCoordChildTileRange(Jt.tileCoord,Ln,On),Un=!1;Ia&&(Un=sr(ne+1,Ia)),Un||K.forEachTileCoordParentTileRange(Jt.tileCoord,sr,Ln,On)}var Br=Z/v*S/le;ic(this.pixelTransform,r.size[0]/2,r.size[1]/2,1/S,1/S,E,-ce/2,-ze/2);var Vn=H1e(this.pixelTransform);this.useContainer(n,Vn,this.getBackground(r));var zt=this.context,_i=zt.canvas;qC(this.inversePixelTransform,this.pixelTransform),ic(this.tempTransform,ce/2,ze/2,Br,Br,0,-ce/2,-ze/2),_i.width!=ce||_i.height!=ze?(_i.width=ce,_i.height=ze):this.containerReused||zt.clearRect(0,0,ce,ze),Le&&this.clipUnrotated(zt,r,Le),q.getInterpolate()||wr(zt,Ib),this.preRender(zt,r),this.renderedTiles.length=0;var xi=Object.keys(Wt).map(Number);xi.sort(vb);var wn,ii,Ur;i.opacity===1&&(!this.containerReused||q.getOpaque(r.viewState.projection))?xi=xi.reverse():(wn=[],ii=[]);for(var Dn=xi.length-1;Dn>=0;--Dn){var er=xi[Dn],Io=q.getTilePixelSize(er,S,f),$a=K.getResolution(er),ki=$a/Z,ol=Io[0]*ki*Br,al=Io[1]*ki*Br,oi=K.getTileCoordForCoordAndZ(xs(ot),er),Co=K.getTileCoordExtent(oi),Zo=ro(this.tempTransform,[le*(Co[0]-ot[0])/Z,le*(ot[3]-Co[3])/Z]),Is=le*q.getGutterForProjection(f),Wo=Wt[er];for(var sl in Wo){var Jt=Wo[sl],Cs=Jt.tileCoord,Ps=oi[1]-Cs[1],Ca=Math.round(Zo[0]-(Ps-1)*ol),Ho=oi[2]-Cs[2],Ga=Math.round(Zo[1]-(Ho-1)*al),xt=Math.round(Zo[0]-Ps*ol),pr=Math.round(Zo[1]-Ho*al),Ko=Ca-xt,$n=Ga-pr,ai=ne===er,un=ai&&Jt.getAlpha(ti(this),r.time)!==1,ao=!1;if(!un)if(wn){Ur=[xt,pr,xt+Ko,pr,xt+Ko,pr+$n,xt,pr+$n];for(var Ee=0,X=wn.length;Ee<X;++Ee)if(ne!==er&&er<ii[Ee]){var Y=wn[Ee];Gp([xt,pr,xt+Ko,pr+$n],[Y[0],Y[3],Y[4],Y[7]])&&(ao||(zt.save(),ao=!0),zt.beginPath(),zt.moveTo(Ur[0],Ur[1]),zt.lineTo(Ur[2],Ur[3]),zt.lineTo(Ur[4],Ur[5]),zt.lineTo(Ur[6],Ur[7]),zt.moveTo(Y[6],Y[7]),zt.lineTo(Y[4],Y[5]),zt.lineTo(Y[2],Y[3]),zt.lineTo(Y[0],Y[1]),zt.clip())}wn.push(Ur),ii.push(er)}else zt.clearRect(xt,pr,Ko,$n);this.drawTileImage(Jt,r,xt,pr,Ko,$n,Is,ai),wn&&!un?(ao&&zt.restore(),this.renderedTiles.unshift(Jt)):this.renderedTiles.push(Jt),this.updateUsedTiles(r.usedTiles,q,Jt)}}return this.renderedRevision=F,this.renderedResolution=Z,this.extentChanged=!this.renderedExtent_||!cb(this.renderedExtent_,ot),this.renderedExtent_=ot,this.renderedPixelRatio=S,this.renderedProjection=f,this.manageTilePyramid(r,q,K,S,f,W,ne,P.getPreload()),this.scheduleExpireCache(r,q),this.postRender(zt,r),i.extent&&zt.restore(),wr(zt,PEe),Vn!==_i.style.transform&&(_i.style.transform=Vn),this.container},t.prototype.drawTileImage=function(r,n,i,o,f,v,x,E){var S=this.getTileImage(r);if(S){var P=ti(this),q=n.layerStatesArray[n.layerIndex],F=q.opacity*(E?r.getAlpha(P,n.time):1),K=F!==this.context.globalAlpha;K&&(this.context.save(),this.context.globalAlpha=F),this.context.drawImage(S,x,x,S.width-2*x,S.height-2*x,i,o,f,v),K&&this.context.restore(),F!==q.opacity?n.animate=!0:E&&r.endTransition(P)}},t.prototype.getImage=function(){var r=this.context;return r?r.canvas:null},t.prototype.getTileImage=function(r){return r.getImage()},t.prototype.scheduleExpireCache=function(r,n){if(n.canExpireCache()){var i=function(o,f,v){var x=ti(o);x in v.usedTiles&&o.expireCache(v.viewState.projection,v.usedTiles[x])}.bind(null,n);r.postRenderFunctions.push(i)}},t.prototype.updateUsedTiles=function(r,n,i){var o=ti(n);o in r||(r[o]={}),r[o][i.getKey()]=!0},t.prototype.manageTilePyramid=function(r,n,i,o,f,v,x,E,S){var P=ti(n);P in r.wantedTiles||(r.wantedTiles[P]={});var q=r.wantedTiles[P],F=r.tileQueue,K=i.getMinZoom(),ne=r.viewState.rotation,Z=ne?TC(r.viewState.center,r.viewState.resolution,ne,r.size):void 0,W=0,Q,le,ce,ze,Le,Be;for(Be=K;Be<=x;++Be)for(le=i.getTileRangeForExtentAndZ(v,Be,le),ce=i.getResolution(Be),ze=le.minX;ze<=le.maxX;++ze)for(Le=le.minY;Le<=le.maxY;++Le)ne&&!i.tileCoordIntersectsViewport([Be,ze,Le],Z)||(x-Be<=E?(++W,Q=n.getTile(Be,ze,Le,o,f),Q.getState()==wt.IDLE&&(q[Q.getKey()]=!0,F.isKeyQueued(Q.getKey())||F.enqueue([Q,P,i.getTileCoordCenter(Q.tileCoord),ce])),S!==void 0&&S(Q)):n.useTile(Be,ze,Le,f));n.updateCacheSize(W,f)},t}(tEe),OEe=DLt;var kLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NLt=function(e){kLt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.createRenderer=function(){return new OEe(this)},t}(TEe),Cb=NLt;var FLt=function(){function e(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return e.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},e.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t){for(var r=this.oldest_;r;)t(r.value_,r.key_,this),r=r.newer},e.prototype.get=function(t,r){var n=this.entries_[t];return Bt(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},e.prototype.remove=function(t){var r=this.entries_[t];return Bt(r!==void 0,15),r===this.newest_?(this.newest_=r.older,this.newest_&&(this.newest_.newer=null)):r===this.oldest_?(this.oldest_=r.newer,this.oldest_&&(this.oldest_.older=null)):(r.newer.older=r.older,r.older.newer=r.newer),delete this.entries_[t],--this.count_,r.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)t[r++]=n.key_;return t},e.prototype.getValues=function(){var t=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)t[r++]=n.value_;return t},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.peek=function(t){if(this.containsKey(t))return this.entries_[t].value_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,r){this.get(t),this.entries_[t].value_=r},e.prototype.set=function(t,r){Bt(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:r};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e}(),LEe=FLt;function W4(e,t,r,n){return n!==void 0?(n[0]=e,n[1]=t,n[2]=r,n):[e,t,r]}function Yp(e,t,r){return e+"/"+t+"/"+r}function eP(e){return Yp(e[0],e[1],e[2])}function DEe(e){return e.split("/").map(Number)}function tP(e){return(e[1]<<e[0])+e[2]}function kEe(e,t){var r=e[0],n=e[1],i=e[2];if(t.getMinZoom()>r||r>t.getMaxZoom())return!1;var o=t.getFullTileRange(r);return o?o.containsXY(n,i):!0}var zLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jLt=function(e){zLt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.expireCache=function(r){for(;this.canExpireCache();){var n=this.peekLast();if(n.getKey()in r)break;this.pop().release()}},t.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var r=this.peekFirstKey(),n=DEe(r),i=n[0];this.forEach(function(o){o.tileCoord[0]!==i&&(this.remove(eP(o.tileCoord)),o.release())}.bind(this))}},t}(LEe),rP=jLt;var nP={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var BLt=[0,0,0],Jh=5,ULt=function(){function e(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Bt(k1e(this.resolutions_,function(f,v){return v-f},!0),17);var r;if(!t.origins){for(var n=0,i=this.resolutions_.length-1;n<i;++n)if(!r)r=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==r){r=void 0;break}}this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Bt(this.origins_.length==this.resolutions_.length,20));var o=t.extent;o!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=xs(o)),Bt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Bt(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:gg,Bt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=o!==void 0?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(f,v){var x=new JC(Math.min(0,f[0]),Math.max(f[0]-1,-1),Math.min(0,f[1]),Math.max(f[1]-1,-1));if(o){var E=this.getTileRangeForExtentAndZ(o,v);x.minX=Math.max(E.minX,x.minX),x.maxX=Math.min(E.maxX,x.maxX),x.minY=Math.max(E.minY,x.minY),x.maxY=Math.min(E.maxY,x.maxY)}return x},this):o&&this.calculateTileRanges_(o)}return e.prototype.forEachTileCoord=function(t,r,n){for(var i=this.getTileRangeForExtentAndZ(t,r),o=i.minX,f=i.maxX;o<=f;++o)for(var v=i.minY,x=i.maxY;v<=x;++v)n([r,o,v])},e.prototype.forEachTileCoordParentTileRange=function(t,r,n,i){var o,f,v,x=null,E=t[0]-1;for(this.zoomFactor_===2?(f=t[1],v=t[2]):x=this.getTileCoordExtent(t,i);E>=this.minZoom;){if(this.zoomFactor_===2?(f=Math.floor(f/2),v=Math.floor(v/2),o=Kp(f,f,v,v,n)):o=this.getTileRangeForExtentAndZ(x,E,n),r(E,o))return!0;--E}return!1},e.prototype.getExtent=function(){return this.extent_},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.getMinZoom=function(){return this.minZoom},e.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},e.prototype.getResolution=function(t){return this.resolutions_[t]},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getTileCoordChildTileRange=function(t,r,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){var i=t[1]*2,o=t[2]*2;return Kp(i,i+1,o,o+1,r)}var f=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(f,t[0]+1,r)}return null},e.prototype.getTileRangeForTileCoordAndZ=function(t,r,n){if(r>this.maxZoom||r<this.minZoom)return null;var i=t[0],o=t[1],f=t[2];if(r===i)return Kp(o,f,o,f,n);if(this.zoomFactor_){var v=Math.pow(this.zoomFactor_,r-i),x=Math.floor(o*v),E=Math.floor(f*v);if(r<i)return Kp(x,x,E,E,n);var S=Math.floor(v*(o+1))-1,P=Math.floor(v*(f+1))-1;return Kp(x,S,E,P,n)}var q=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(q,r,n)},e.prototype.getTileRangeExtent=function(t,r,n){var i=this.getOrigin(t),o=this.getResolution(t),f=bo(this.getTileSize(t),this.tmpSize_),v=i[0]+r.minX*f[0]*o,x=i[0]+(r.maxX+1)*f[0]*o,E=i[1]+r.minY*f[1]*o,S=i[1]+(r.maxY+1)*f[1]*o;return Xu(v,E,x,S,n)},e.prototype.getTileRangeForExtentAndZ=function(t,r,n){var i=BLt;this.getTileCoordForXYAndZ_(t[0],t[3],r,!1,i);var o=i[1],f=i[2];return this.getTileCoordForXYAndZ_(t[2],t[1],r,!0,i),Kp(o,i[1],f,i[2],n)},e.prototype.getTileCoordCenter=function(t){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=bo(this.getTileSize(t[0]),this.tmpSize_);return[r[0]+(t[1]+.5)*i[0]*n,r[1]-(t[2]+.5)*i[1]*n]},e.prototype.getTileCoordExtent=function(t,r){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),o=bo(this.getTileSize(t[0]),this.tmpSize_),f=n[0]+t[1]*o[0]*i,v=n[1]-(t[2]+1)*o[1]*i,x=f+o[0]*i,E=v+o[1]*i;return Xu(f,v,x,E,r)},e.prototype.getTileCoordForCoordAndResolution=function(t,r,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],r,!1,n)},e.prototype.getTileCoordForXYAndResolution_=function(t,r,n,i,o){var f=this.getZForResolution(n),v=n/this.getResolution(f),x=this.getOrigin(f),E=bo(this.getTileSize(f),this.tmpSize_),S=v*(t-x[0])/n/E[0],P=v*(x[1]-r)/n/E[1];return i?(S=sb(S,Jh)-1,P=sb(P,Jh)-1):(S=ab(S,Jh),P=ab(P,Jh)),W4(f,S,P,o)},e.prototype.getTileCoordForXYAndZ_=function(t,r,n,i,o){var f=this.getOrigin(n),v=this.getResolution(n),x=bo(this.getTileSize(n),this.tmpSize_),E=(t-f[0])/v/x[0],S=(f[1]-r)/v/x[1];return i?(E=sb(E,Jh)-1,S=sb(S,Jh)-1):(E=ab(E,Jh),S=ab(S,Jh)),W4(n,E,S,o)},e.prototype.getTileCoordForCoordAndZ=function(t,r,n){return this.getTileCoordForXYAndZ_(t[0],t[1],r,!1,n)},e.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},e.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},e.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},e.prototype.getZForResolution=function(t,r){var n=ag(this.resolutions_,t,r||0);return Xr(n,this.minZoom,this.maxZoom)},e.prototype.tileCoordIntersectsViewport=function(t,r){return T4(r,0,r.length,2,this.getTileCoordExtent(t))},e.prototype.calculateTileRanges_=function(t){for(var r=this.resolutions_.length,n=new Array(r),i=this.minZoom;i<r;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n},e}(),H4=ULt;function iP(e){var t=e.getDefaultTileGrid();return t||(t=$Lt(e),e.setDefaultTileGrid(t)),t}function NEe(e,t,r){var n=t[0],i=e.getTileCoordCenter(t),o=oP(r);if(Vh(o,i))return t;var f=jr(o),v=Math.ceil((o[0]-i[0])/f);return i[0]+=f*v,e.getTileCoordForCoordAndZ(i,n)}function VLt(e,t,r,n){var i=n!==void 0?n:"top-left",o=zEe(e,t,r);return new H4({extent:e,origin:d1e(e,i),resolutions:o,tileSize:r})}function FEe(e){var t=e||{},r=t.extent||to("EPSG:3857").getExtent(),n={extent:r,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:zEe(r,t.maxZoom,t.tileSize,t.maxResolution)};return new H4(n)}function zEe(e,t,r,n){for(var i=t!==void 0?t:pEe,o=gi(e),f=jr(e),v=bo(r!==void 0?r:gg),x=n>0?n:Math.max(f/v[0],o/v[1]),E=i+1,S=new Array(E),P=0;P<E;++P)S[P]=x/Math.pow(2,P);return S}function $Lt(e,t,r,n){var i=oP(e);return VLt(i,t,r,n)}function oP(e){e=to(e);var t=e.getExtent();if(!t){var r=180*ga[ya.DEGREES]/e.getMetersPerUnit();t=Xu(-r,-r,r,r)}return t}var jEe=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),GLt=function(e){jEe(t,e);function t(r){var n=e.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,projection:r.projection,state:r.state,wrapX:r.wrapX,interpolate:r.interpolate})||this;n.on,n.once,n.un,n.opaque_=r.opaque!==void 0?r.opaque:!1,n.tilePixelRatio_=r.tilePixelRatio!==void 0?r.tilePixelRatio:1,n.tileGrid=r.tileGrid!==void 0?r.tileGrid:null;var i=[256,256];return n.tileGrid&&bo(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),i),n.tileCache=new rP(r.cacheSize||0),n.tmpSize=[0,0],n.key_=r.key||"",n.tileOptions={transition:r.transition,interpolate:r.interpolate},n.zDirection=r.zDirection?r.zDirection:0,n}return t.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},t.prototype.expireCache=function(r,n){var i=this.getTileCacheForProjection(r);i&&i.expireCache(n)},t.prototype.forEachLoadedTile=function(r,n,i,o){var f=this.getTileCacheForProjection(r);if(!f)return!1;for(var v=!0,x,E,S,P=i.minX;P<=i.maxX;++P)for(var q=i.minY;q<=i.maxY;++q)E=Yp(n,P,q),S=!1,f.containsKey(E)&&(x=f.get(E),S=x.getState()===wt.LOADED,S&&(S=o(x)!==!1)),S||(v=!1);return v},t.prototype.getGutterForProjection=function(r){return 0},t.prototype.getKey=function(){return this.key_},t.prototype.setKey=function(r){this.key_!==r&&(this.key_=r,this.changed())},t.prototype.getOpaque=function(r){return this.opaque_},t.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},t.prototype.getTile=function(r,n,i,o,f){return fr()},t.prototype.getTileGrid=function(){return this.tileGrid},t.prototype.getTileGridForProjection=function(r){return this.tileGrid?this.tileGrid:iP(r)},t.prototype.getTileCacheForProjection=function(r){var n=this.getProjection();return Bt(n===null||Gh(n,r),68),this.tileCache},t.prototype.getTilePixelRatio=function(r){return this.tilePixelRatio_},t.prototype.getTilePixelSize=function(r,n,i){var o=this.getTileGridForProjection(i),f=this.getTilePixelRatio(n),v=bo(o.getTileSize(r),this.tmpSize);return f==1?v:VC(v,f,this.tmpSize)},t.prototype.getTileCoordForTileUrlFunction=function(r,n){var i=n!==void 0?n:this.getProjection(),o=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(r=NEe(o,r,i)),kEe(r,o)?r:null},t.prototype.clear=function(){this.tileCache.clear()},t.prototype.refresh=function(){this.clear(),e.prototype.refresh.call(this)},t.prototype.updateCacheSize=function(r,n){var i=this.getTileCacheForProjection(n);r>i.highWaterMark&&(i.highWaterMark=r)},t.prototype.useTile=function(r,n,i,o){},t}(oEe),BEe=function(e){jEe(t,e);function t(r,n){var i=e.call(this,r)||this;return i.tile=n,i}return t}(_o);var UEe=GLt;function ZLt(e,t){var r=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(f,v,x){if(f)return e.replace(r,f[0].toString()).replace(n,f[1].toString()).replace(i,f[2].toString()).replace(o,function(){var E=f[0],S=t.getFullTileRange(E);Bt(S,55);var P=S.getHeight()-f[2]-1;return P.toString()})}}function VEe(e,t){for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=ZLt(e[i],t);return WLt(n)}function WLt(e){return e.length===1?e[0]:function(t,r,n){if(t){var i=tP(t),o=rl(i,e.length);return e[o](t,r,n)}else return}}function $Ee(e){var t=[],r=/\{([a-z])-([a-z])\}/.exec(e);if(r){var n=r[1].charCodeAt(0),i=r[2].charCodeAt(0),o=void 0;for(o=n;o<=i;++o)t.push(e.replace(r[0],String.fromCharCode(o)));return t}if(r=/\{(\d+)-(\d+)\}/.exec(e),r){for(var f=parseInt(r[2],10),v=parseInt(r[1],10);v<=f;v++)t.push(e.replace(r[0],v.toString()));return t}return t.push(e),t}var HLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KLt=function(e){HLt(t,e);function t(r){var n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tilePixelRatio:r.tilePixelRatio,wrapX:r.wrapX,transition:r.transition,interpolate:r.interpolate,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===t.prototype.tileUrlFunction,n.tileLoadFunction=r.tileLoadFunction,r.tileUrlFunction&&(n.tileUrlFunction=r.tileUrlFunction),n.urls=null,r.urls?n.setUrls(r.urls):r.url&&n.setUrl(r.url),n.tileLoadingKeys_={},n}return t.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},t.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},t.prototype.getUrls=function(){return this.urls},t.prototype.handleTileChange=function(r){var n=r.target,i=ti(n),o=n.getState(),f;o==wt.LOADING?(this.tileLoadingKeys_[i]=!0,f=nP.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],f=o==wt.ERROR?nP.TILELOADERROR:o==wt.LOADED?nP.TILELOADEND:void 0),f!=null&&this.dispatchEvent(new BEe(f,n))},t.prototype.setTileLoadFunction=function(r){this.tileCache.clear(),this.tileLoadFunction=r,this.changed()},t.prototype.setTileUrlFunction=function(r,n){this.tileUrlFunction=r,this.tileCache.pruneExceptNewestZ(),typeof n!="undefined"?this.setKey(n):this.changed()},t.prototype.setUrl=function(r){var n=$Ee(r);this.urls=n,this.setUrls(n)},t.prototype.setUrls=function(r){this.urls=r;var n=r.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(VEe(r,this.tileGrid),n):this.setKey(n)},t.prototype.tileUrlFunction=function(r,n,i){},t.prototype.useTile=function(r,n,i){var o=Yp(r,n,i);this.tileCache.containsKey(o)&&this.tileCache.get(o)},t}(UEe),GEe=KLt;var YLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XLt=function(e){YLt(t,e);function t(r){var n=this,i=r.imageSmoothing!==void 0?r.imageSmoothing:!0;return r.interpolate!==void 0&&(i=r.interpolate),n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction?r.tileLoadFunction:QLt,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:r.wrapX,transition:r.transition,interpolate:i,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this,n.crossOrigin=r.crossOrigin!==void 0?r.crossOrigin:null,n.tileClass=r.tileClass!==void 0?r.tileClass:YC,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=r.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return t.prototype.canExpireCache=function(){if(!Yl)return e.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var r in this.tileCacheForProjection)if(this.tileCacheForProjection[r].canExpireCache())return!0;return!1},t.prototype.expireCache=function(r,n){if(!Yl){e.prototype.expireCache.call(this,r,n);return}var i=this.getTileCacheForProjection(r);this.tileCache.expireCache(this.tileCache==i?n:{});for(var o in this.tileCacheForProjection){var f=this.tileCacheForProjection[o];f.expireCache(f==i?n:{})}},t.prototype.getGutterForProjection=function(r){return Yl&&this.getProjection()&&r&&!Gh(this.getProjection(),r)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getKey=function(){var r=e.prototype.getKey.call(this);return this.getInterpolate()||(r+=":disable-interpolation"),r},t.prototype.getOpaque=function(r){return Yl&&this.getProjection()&&r&&!Gh(this.getProjection(),r)?!1:e.prototype.getOpaque.call(this,r)},t.prototype.getTileGridForProjection=function(r){if(!Yl)return e.prototype.getTileGridForProjection.call(this,r);var n=this.getProjection();if(this.tileGrid&&(!n||Gh(n,r)))return this.tileGrid;var i=ti(r);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=iP(r)),this.tileGridForProjection[i]},t.prototype.getTileCacheForProjection=function(r){if(!Yl)return e.prototype.getTileCacheForProjection.call(this,r);var n=this.getProjection();if(!n||Gh(n,r))return this.tileCache;var i=ti(r);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new rP(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},t.prototype.createTile_=function(r,n,i,o,f,v){var x=[r,n,i],E=this.getTileCoordForTileUrlFunction(x,f),S=E?this.tileUrlFunction(E,o,f):void 0,P=new this.tileClass(x,S!==void 0?wt.IDLE:wt.EMPTY,S!==void 0?S:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return P.key=v,P.addEventListener(gt.CHANGE,this.handleTileChange.bind(this)),P},t.prototype.getTile=function(r,n,i,o,f){var v=this.getProjection();if(!Yl||!v||!f||Gh(v,f))return this.getTileInternal(r,n,i,o,v||f);var x=this.getTileCacheForProjection(f),E=[r,n,i],S=void 0,P=eP(E);x.containsKey(P)&&(S=x.get(P));var q=this.getKey();if(S&&S.key==q)return S;var F=this.getTileGridForProjection(v),K=this.getTileGridForProjection(f),ne=this.getTileCoordForTileUrlFunction(E,f),Z=new QC(v,F,f,K,E,ne,this.getTilePixelRatio(o),this.getGutter(),function(W,Q,le,ce){return this.getTileInternal(W,Q,le,ce,v)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return Z.key=q,S?(Z.interimTile=S,Z.refreshInterimChain(),x.replace(P,Z)):x.set(P,Z),Z},t.prototype.getTileInternal=function(r,n,i,o,f){var v=null,x=Yp(r,n,i),E=this.getKey();if(!this.tileCache.containsKey(x))v=this.createTile_(r,n,i,o,f,E),this.tileCache.set(x,v);else if(v=this.tileCache.get(x),v.key!=E){var S=v;v=this.createTile_(r,n,i,o,f,E),S.getState()==wt.IDLE?v.interimTile=S.interimTile:v.interimTile=S,v.refreshInterimChain(),this.tileCache.replace(x,v)}return v},t.prototype.setRenderReprojectionEdges=function(r){if(!(!Yl||this.renderReprojectionEdges_==r)){this.renderReprojectionEdges_=r;for(var n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},t.prototype.setTileGridForProjection=function(r,n){if(Yl){var i=to(r);if(i){var o=ti(i);o in this.tileGridForProjection||(this.tileGridForProjection[o]=n)}}},t}(GEe);function QLt(e,t){e.getImage().src=t}var aP=XLt;var JLt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eDt=function(e){JLt(t,e);function t(r){var n=this,i=r||{},o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var f=i.projection!==void 0?i.projection:"EPSG:3857",v=i.tileGrid!==void 0?i.tileGrid:FEe({extent:oP(f),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return n=e.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,opaque:i.opaque,projection:f,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:v,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this,n.gutter_=i.gutter!==void 0?i.gutter:0,n}return t.prototype.getGutter=function(){return this.gutter_},t}(aP),K4=eDt;var Y4=class extends Ba{constructor(r){let n=r||{},i=document.createElement("div");i.className="ol-layerspy ol-unselectable ol-control";let o=document.createElement("button");o.title=Hu("control-layerspy-title"),o.type="button",i.appendChild(o);super({element:i,target:n.target});Ii(this,"mousePosition",null);Ii(this,"activate",()=>{this.layers===void 0&&(this.layers=this.getMap().getLayers()),this.getMap().addLayer(this.layer),this.layer.on("prerender",this.handlePrecompose,this),this.layer.on("postrender",this.handlePostcompose,this);let r=this.getMap().getViewport();r.addEventListener("mousemove",this.handleMouseMove),r.addEventListener("mouseout",this.handleMouseOut),document.addEventListener("keydown",this.handleKeyPress),this.layers.on("add",this.handleAddedLayer),this.containerEl.classList.add("active"),this.renderRadiusbox&&this.renderTargetElement()});Ii(this,"changeLayer",r=>{this.containerEl.classList.contains("active")?(this.deactivate(),this.layer=r,this.activate()):this.layer=r});Ii(this,"deactivate",()=>{this.layer.un("prerender",this.handlePrecompose),this.layer.un("postrender",this.handlePostcompose);let r=this.getMap().getViewport();r.removeEventListener("mousemove",this.handleMouseMove),r.removeEventListener("mouseout",this.handleMouseOut),document.removeEventListener("keydown",this.handleKeyPress),this.layers.un("add",this.handleAddedLayer),this.getMap().removeLayer(this.layer),this.containerEl.classList.remove("active"),this.renderRadiusbox&&this.renderTargetElement()});Ii(this,"handlePostcompose",r=>{r.context.restore()});Ii(this,"handlePrecompose",r=>{let n=r.context,i=1;n.save(),n.beginPath();let o=this.mousePosition;if(o){let f=this.getMap().getLayers().getArray().find(E=>E.vkf_id===this.refActiveBasemapId.current).renderer_.context.canvas.style.transform,v=new DOMPoint(o[0],o[1]),x=new DOMMatrix(f);v=v.matrixTransform(x.invertSelf()),n.arc(v.x*i,v.y*i,this.clipRadius*i,0,2*Math.PI),n.lineWidth=5*i,n.strokeStyle="rgba(0,0,0,0.5)",n.stroke()}n.clip()});Ii(this,"handleMouseMove",r=>{this.mousePosition=this.getMap().getEventPixel(r),this.getMap().render()});Ii(this,"handleMouseOut",()=>{this.mousePosition=null,this.getMap().render()});Ii(this,"handleKeyPress",r=>{r.target.tagName.toLowerCase()!=="input"&&(r.key.toLowerCase()==="y"||r.keyCode==="KeyY"?(this.clipRadius=Math.min(this.clipRadius+5,150),this.getMap().render()):(r.key.toLowerCase()==="x"||r.keyCode==="KeyX")&&(this.clipRadius=Math.max(this.clipRadius-5,25),this.getMap().render()),this.updateClipRadiusDisplay())});Ii(this,"handleAddedLayer",r=>{r.target.getArray()[r.target.getLength()-1]!==this.layer&&(this.getMap().removeLayer(this.layer),this.getMap().addLayer(this.layer))});Ii(this,"handleExternal3dStateUpdate",r=>{this.containerEl.disabled=r,r?this.containerEl.classList.add("disabled"):this.containerEl.classList.remove("disabled")});Ii(this,"updateClipRadiusDisplay",()=>{let r=this.targetEl;r.innerHTML=`<strong>Radius: ${this.clipRadius}px</strong> (${Hu("control-layerspy-radius-tooltip")})`});Ii(this,"renderTargetElement",()=>{let r=this.targetEl,n=r4(this.getMap());this.targetEl===void 0&&(r=document.createElement("div"),r.className="ol-control ol-layerspy-radius-box",r.innerHTML="",n.appendChild(r),this.targetEl=r),this.targetEl.classList.toggle("active"),n.classList.toggle("layerspy-active"),this.updateClipRadiusDisplay()});this.clipRadius=Ku(n.radius)?parseInt(n.radius,0):75,n.refSpyLayer!==void 0&&(n.refSpyLayer.current=this),this.refActiveBasemapId=n.refActiveBasemapId,this.containerEl=o,this.renderRadiusbox=r.renderRadiusBox===void 0?!0:r.renderRadiusBox,o.addEventListener("click",f=>{f.preventDefault(),this.containerEl.classList.contains("active")?this.deactivate():this.activate()}),Ku(n.spyLayer)&&this.changeLayer(n.spyLayer)}},ZEe=Y4;var WEe=e=>{let{children:t,extent:r,onLoad:n=()=>console.log("No onLoad function was passed to component Map2D."),urlsOsmBaseMap:i}=e,o=(0,yg.useRef)(null);return(0,yg.useEffect)(()=>{let f=()=>ta(null,null,function*(){let v=new Cb({source:new K4({urls:i,crossOrigin:"*",maxZoom:18})});v.vkf_id="slub-osm";let x=new HC({controls:[new Nwe({tipLabel:Hu("control-fullscreen-title")}),new WC({zoomInTipLabel:Hu("control-zoom-in"),zoomOutTipLabel:Hu("control-zoom-in")})],interactions:GC().extend([new jC]),layers:[v],target:o.current,view:new Kl({projection:"EPSG:3857",center:[871713,6396955],zoom:4.3})});if(n({map:x}),r!=null){let S=Zh(r,"EPSG:4326",x.getView().getProjection());x.getView().fit(S,{padding:[100,100,100,100]}),x.addControl(new wEe({tipLabel:Hu("control-zoomtoextent-title"),extent:S}))}let E=new Cb({zIndex:10,attribution:void 0,source:new K4({urls:i,crossOrigin:"*",attributions:[]})});E.vkf_id="slub-osm",x.addControl(new ZEe({spyLayer:E,refActiveBasemapId:{current:v.vkf_id}}))});o.current!==null&&f()},[]),yg.default.createElement("div",{className:"map-container",ref:o},t)};WEe.propTypes={extent:il.default.arrayOf(il.default.number),onLoad:il.default.func,urlNominatim:il.default.string,urlsOsmBaseMap:il.default.arrayOf(il.default.string),children:il.default.oneOfType([il.default.arrayOf(il.default.node),il.default.node])};var HEe=WEe;var KEe=HEe;var wo=He(rr(),1);var tDt=()=>wo.default.createElement("div",{className:"vkf-loading-indicator"},wo.default.createElement("svg",{className:"loading-icon",version:"1.1",id:"Layer_1",x:"0",y:"0",viewBox:"0 0 70 100"},wo.default.createElement("rect",{fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 3 50)"},wo.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite"}),wo.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"1.2s",values:"0;60;0",repeatCount:"indefinite"})),wo.default.createElement("rect",{x:"17",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 20 50)"},wo.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.1s"}),wo.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:".5s",values:"0;5;0",repeatCount:"indefinite"})),wo.default.createElement("rect",{x:"40",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 40 50)"},wo.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.3s"}),wo.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"2s",values:"0;30;0",repeatCount:"indefinite",begin:"0.6s"})),wo.default.createElement("rect",{x:"60",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 58 50)"},wo.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.5s"}),wo.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"1s",values:"0;60;0",repeatCount:"indefinite",begin:".3s"}))),wo.default.createElement("div",{className:"loading-text"},"Loading\u2026")),YEe=tDt;var XEe=YEe;function QEe(e){return ta(this,null,function*(){let t=yo.getGeoreferenceApiClient(),r="/transformations/",n={map_id:e,additional_properties:!0},i=yield t.get(r,{params:n});if(i.status===200)return i.data;console.error("Something went wrong while trying to fetch transformation for given map_id.")})}function JEe(e){return ta(this,null,function*(){let t=yo.getGeoreferenceApiClient(),r="/transformations/",n={user_id:e},i=yield t.get(r,{params:n});if(i.status===200)return i.data;console.error("Something went wrong while trying to fetch transformation for given user id.")})}function eTe(e){return ta(this,null,function*(){let t=yo.getGeoreferenceApiClient(),r="/transformations/",n={validation:e},i=yield t.get(r,{params:n});if(i.status===200)return i.data;console.error("Something went wrong while trying to fetch transformation for given validation.")})}function tTe(e){return ta(this,null,function*(){let t=yo.getGeoreferenceApiClient(),r="/jobs/",n=e,i=yield t.post(r,n);if(i.status===200)return i.data;console.error("Something went wrong while trying to post a new job.")})}function rTe(e){return ta(this,null,function*(){let t=yo.getGeoreferenceApiClient(),r="/transformations/",n={transformation_id:e},i={dry_run:!0},o=yield t.post(r,n,{params:i});if(o.status===200)return o.data;console.error("Something went wrong while trying to fetch transformation preview for given transformation_id.")})}var Mb=He(rr(),1),_g=He(Nr(),1);var Pb="1.3.0";function X4(e,t){var r=[];Object.keys(t).forEach(function(i){t[i]!==null&&t[i]!==void 0&&r.push(i+"="+encodeURIComponent(t[i]))});var n=r.join("&");return e=e.replace(/[?&]$/,""),e=e.indexOf("?")===-1?e+"?":e+"&",e+n}var rDt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nDt=function(e){rDt(t,e);function t(r){var n=this,i=r||{},o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var f=i.params||{},v="TRANSPARENT"in f?f.TRANSPARENT:!0;return n=e.call(this,{attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,opaque:!v,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,zDirection:i.zDirection})||this,n.gutter_=i.gutter!==void 0?i.gutter:0,n.params_=f,n.v13_=!0,n.serverType_=i.serverType,n.hidpi_=i.hidpi!==void 0?i.hidpi:!0,n.tmpExtent_=_a(),n.updateV13_(),n.setKey(n.getKeyForParams_()),n}return t.prototype.getFeatureInfoUrl=function(r,n,i,o){var f=to(i),v=this.getProjection(),x=this.getTileGrid();x||(x=this.getTileGridForProjection(f));var E=x.getZForResolution(n,this.zDirection),S=x.getTileCoordForCoordAndZ(r,E);if(!(x.getResolutions().length<=S[0])){var P=x.getResolution(S[0]),q=x.getTileCoordExtent(S,this.tmpExtent_),F=bo(x.getTileSize(S[0]),this.tmpSize),K=this.gutter_;K!==0&&(F=q4(F,K,this.tmpSize),q=s4(q,P*K,q)),v&&v!==f&&(P=XC(v,f,r,P),q=Zh(q,f,v),r=ig(r,f,v));var ne={SERVICE:"WMS",VERSION:Pb,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};wr(ne,this.params_,o);var Z=Math.floor((r[0]-q[0])/P),W=Math.floor((q[3]-r[1])/P);return ne[this.v13_?"I":"X"]=Z,ne[this.v13_?"J":"Y"]=W,this.getRequestUrl_(S,F,q,1,v||f,ne)}},t.prototype.getLegendUrl=function(r,n){if(this.urls[0]!==void 0){var i={SERVICE:"WMS",VERSION:Pb,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(n===void 0||n.LAYER===void 0){var o=this.params_.LAYERS,f=!Array.isArray(o)||o.length===1;if(!f)return;i.LAYER=o}if(r!==void 0){var v=this.getProjection()?this.getProjection().getMetersPerUnit():1,x=28e-5;i.SCALE=r*v/x}return wr(i,n),X4(this.urls[0],i)}},t.prototype.getGutter=function(){return this.gutter_},t.prototype.getParams=function(){return this.params_},t.prototype.getRequestUrl_=function(r,n,i,o,f,v){var x=this.urls;if(x){if(v.WIDTH=n[0],v.HEIGHT=n[1],v[this.v13_?"CRS":"SRS"]=f.getCode(),"STYLES"in this.params_||(v.STYLES=""),o!=1)switch(this.serverType_){case"geoserver":var E=90*o+.5|0;"FORMAT_OPTIONS"in v?v.FORMAT_OPTIONS+=";dpi:"+E:v.FORMAT_OPTIONS="dpi:"+E;break;case"mapserver":v.MAP_RESOLUTION=90*o;break;case"carmentaserver":case"qgis":v.DPI=90*o;break;default:Bt(!1,52);break}var S=f.getAxisOrientation(),P=i;if(this.v13_&&S.substr(0,2)=="ne"){var q=void 0;q=i[0],P[0]=i[1],P[1]=q,q=i[2],P[2]=i[3],P[3]=q}v.BBOX=P.join(",");var F;if(x.length==1)F=x[0];else{var K=rl(tP(r),x.length);F=x[K]}return X4(F,v)}},t.prototype.getTilePixelRatio=function(r){return!this.hidpi_||this.serverType_===void 0?1:r},t.prototype.getKeyForParams_=function(){var r=0,n=[];for(var i in this.params_)n[r++]=i+"-"+this.params_[i];return n.join("/")},t.prototype.updateParams=function(r){wr(this.params_,r),this.updateV13_(),this.setKey(this.getKeyForParams_())},t.prototype.updateV13_=function(){var r=this.params_.VERSION||Pb;this.v13_=y1e(r,"1.3")>=0},t.prototype.tileUrlFunction=function(r,n,i){var o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(i)),!(o.getResolutions().length<=r[0])){n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);var f=o.getResolution(r[0]),v=o.getTileCoordExtent(r,this.tmpExtent_),x=bo(o.getTileSize(r[0]),this.tmpSize),E=this.gutter_;E!==0&&(x=q4(x,E,this.tmpSize),v=s4(v,f*E,v)),n!=1&&(x=VC(x,n,this.tmpSize));var S={SERVICE:"WMS",VERSION:Pb,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return wr(S,this.params_),this.getRequestUrl_(r,x,v,n,i,S)}},t}(aP),nTe=nDt;function iDt(e,t){return e.getCoordinates()[0].map(r=>t.getPixelFromCoordinate(r))}var iTe=e=>{let{map:t,layerName:r,onLoad:n=()=>{},wmsUrl:i}=e;return(0,Mb.useEffect)(()=>{let o=new Cb({source:new nTe({url:i,params:{LAYERS:r,VERSION:"1.1.1"},projection:t.getView().getProjection()}),preload:1/0,zIndex:1});t.addLayer(o),n(o);let f=x=>{let E=t.getLayers().getArray().find(S=>S.get("key")==="clip");if(E!==void 0&&E.getSource().getFeatures().length>0){let S=iDt(E.getSource().getFeatures()[0].getGeometry(),t),P=1,q=x.context;q.save(),q.beginPath(),q.moveTo(S[0][0]*P,S[0][1]*P);for(let F=1;F<S.length;F++)q.lineTo(S[F][0]*P,S[F][1]*P);q.closePath(),q.clip()}},v=x=>{x.context.restore()};return o.on("prerender",f),o.on("postrender",v),()=>{o.un("prerender",f),o.un("postrender",v),t.removeLayer(o)}},[]),Mb.default.createElement(Mb.default.Fragment,null)};iTe.propTypes={clipPolygon:_g.default.instanceOf(OC),layerName:_g.default.string.isRequired,map:_g.default.instanceOf(HC).isRequired,onLoad:_g.default.func,wmsUrl:_g.default.string.isRequired};var oTe=iTe;var aTe=oTe;var Ar=He(rr(),1),wa=He(Nr(),1);var Xl=He(rr(),1);var oDt=()=>Xl.default.createElement("div",{className:"lds-roller"},Xl.default.createElement("div",null),Xl.default.createElement("div",null),Xl.default.createElement("div",null),Xl.default.createElement("div",null),Xl.default.createElement("div",null),Xl.default.createElement("div",null),Xl.default.createElement("div",null),Xl.default.createElement("div",null)),sTe=oDt;var lTe=sTe;var Xp={BY_VALIDATION:"byValidationState",BY_MAPID:"byMapId",BY_USERID:"byUserId"},sc=[{desc:"Auswahl von allen gespeicherten Transformation mit einem bestimmten Validierungsstatus",id:Xp.BY_VALIDATION,label:"Validation",type:"radio",value:"missing",values:["invalid","missing"]},{desc:"Auswahl von allen gespeicherten Transformation f\xFCr eine Karten-Id",id:Xp.BY_MAPID,label:"Karten-Id",type:"input",value:""},{desc:"Auswahl von allen gespeicherten Transformation f\xFCr eine Nutzer-Id",id:Xp.BY_USERID,label:"User-Id",type:"input",value:""}];function uTe(e){let t=n=>{e.onChange(n.target.value,e.id,"input")},r=()=>{e.onSubmit(e.value,e.id,"input")};return Ar.default.createElement("div",null,Ar.default.createElement("p",null,e.desc),Ar.default.createElement("div",{className:"input-group"},Ar.default.createElement("input",{value:e.value,onChange:t,type:"text",className:"form-control",placeholder:e.placeholder}),Ar.default.createElement("span",{className:"input-group-btn"},Ar.default.createElement("button",{className:"btn btn-default",onClick:r},Ar.default.createElement("span",{className:"glyphicon glyphicon-search","aria-hidden":!0})))))}uTe.propTypes={desc:wa.default.string.isRequired,id:wa.default.string.isRequired,placeholder:wa.default.string.isRequired,onChange:wa.default.func.isRequired,onSubmit:wa.default.func.isRequired,value:wa.default.string.isRequired};function cTe(e){return Ar.default.createElement("div",null,Ar.default.createElement("p",null,e.desc),Ar.default.createElement("div",null,e.values.map(t=>Ar.default.createElement("div",{key:t,className:"radio"},Ar.default.createElement("label",null,Ar.default.createElement("input",{type:"radio",name:`options-${t}`,value:t,checked:t===e.value,readOnly:!0,onClick:()=>e.onChange(t,e.id,"radio")})," ",t)))))}cTe.propTypes={desc:wa.default.string.isRequired,id:wa.default.string.isRequired,onChange:wa.default.func.isRequired,value:wa.default.string.isRequired,values:wa.default.arrayOf(wa.default.string).isRequired};var aDt=(e,t)=>ta(null,null,function*(){let r=yield QEe(e);t(r.transformations)}),sDt=(e,t)=>ta(null,null,function*(){let r=yield JEe(e);t(r.transformations)}),Q4=(e,t)=>ta(null,null,function*(){let r=yield eTe(e);t(r.transformations)}),hTe=e=>{let[t,r]=(0,Ar.useState)(sc[0]),[n,i]=(0,Ar.useState)(!1),[o,f]=(0,Ar.useState)({[sc[0].id]:sc[0].value,[sc[1].id]:sc[1].value,[sc[2].id]:sc[2].value}),v=S=>{r(S),S.id===Xp.BY_VALIDATION&&(i(!0),Q4(o[S.id],P=>{i(!1),e.onChangeTransformations(P)}))},x=(S,P)=>{f(Object.assign({},o,{[P]:S})),P===Xp.BY_VALIDATION&&(i(!0),Q4(S,q=>{i(!1),e.onChangeTransformations(q)}))},E=(S,P)=>{P===Xp.BY_MAPID?(i(!0),aDt(S,q=>{i(!1),e.onChangeTransformations(q)})):P===Xp.BY_USERID?(i(!0),sDt(S,q=>{i(!1),e.onChangeTransformations(q)})):console.warn("Given selection id is not supported.")};return(0,Ar.useEffect)(()=>{Q4(sc[0].value,e.onChangeTransformations)},[]),Ar.default.createElement("div",{className:"vkf-select-transformations"},Ar.default.createElement("div",{className:"nav-container"},Ar.default.createElement("ul",{className:"nav nav-pills"},sc.map((S,P)=>Ar.default.createElement("li",{key:P,role:"presentation",className:t!==null&&t.id===S.id?"active":""},Ar.default.createElement("a",{href:"#",onClick:()=>v(S)},S.label)))),n&&Ar.default.createElement(lTe,null)),Ar.default.createElement("div",{className:"select-container"},t!==null&&t.type==="radio"&&Ar.default.createElement(cTe,{desc:t.desc,id:t.id,onChange:x,value:o[t.id],values:t.values}),t!==null&&t.type==="input"&&Ar.default.createElement(uTe,{desc:t.desc,id:t.id,onChange:x,onSubmit:E,value:o[t.id],placeholder:t.label})))};hTe.propTypes={onChangeTransformations:wa.default.func.isRequired};var fTe=hTe;var ir=He(rr(),1);var fU=He(hSe(),1);function It(){return It=fU.default?fU.default.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},It.apply(null,arguments)}var OSe=He(wSe(),1);var vU=He(RSe(),1);function xP(e,t){return xP=vU.default?vU.default.bind():function(r,n){return r.__proto__=n,r},xP(e,t)}function yr(e,t){e.prototype=(0,OSe.default)(t.prototype),e.prototype.constructor=e,xP(e,t)}function _r(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Jl(){return Jl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jl.apply(null,arguments)}function gU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _U=He(rr());var cxr=He(wP()),fkt=function(){};function DSe(e,t){var r={};return Object.keys(e).forEach(function(n){if(r[Eg(n)]=fkt,0)var i}),r}function yU(e,t){return e[t]!==void 0}function Eg(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function kSe(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function EP(e,t){return EP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},EP(e,t)}function FSe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,EP(e,t)}var Tg=He(rr()),USe=He(bU()),VSe=He(wP());var dkt="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function Db(e,t,r){r===void 0&&(r=[]);var n=e.displayName||e.name||"Component",i=kSe(e),o=Object.keys(t),f=o.map(Eg);i||!r.length||(0,VSe.default)(!1);var v=function(E){FSe(S,E);function S(){for(var q,F=arguments.length,K=new Array(F),ne=0;ne<F;ne++)K[ne]=arguments[ne];q=E.call.apply(E,[this].concat(K))||this,q.handlers=Object.create(null),o.forEach(function(W){var Q=t[W],le=function(ze){if(q.props[Q]){var Le;q._notifying=!0;for(var Be=arguments.length,et=new Array(Be>1?Be-1:0),ot=1;ot<Be;ot++)et[ot-1]=arguments[ot];(Le=q.props)[Q].apply(Le,[ze].concat(et)),q._notifying=!1}q.unmounted||q.setState(function(Ot){var Wt,sr=Ot.values;return{values:Jl(Object.create(null),sr,(Wt={},Wt[W]=ze,Wt))}})};q.handlers[Q]=le}),r.length&&(q.attachRef=function(W){q.inner=W});var Z=Object.create(null);return o.forEach(function(W){Z[W]=q.props[Eg(W)]}),q.state={values:Z,prevProps:{}},q}var P=S.prototype;return P.shouldComponentUpdate=function(){return!this._notifying},S.getDerivedStateFromProps=function(F,K){var ne=K.values,Z=K.prevProps,W={values:Jl(Object.create(null),ne),prevProps:{}};return o.forEach(function(Q){W.prevProps[Q]=F[Q],!yU(F,Q)&&yU(Z,Q)&&(W.values[Q]=F[Eg(Q)])}),W},P.componentWillUnmount=function(){this.unmounted=!0},P.render=function(){var F=this,K=this.props,ne=K.innerRef,Z=gU(K,["innerRef"]);f.forEach(function(Q){delete Z[Q]});var W={};return o.forEach(function(Q){var le=F.props[Q];W[Q]=le!==void 0?le:F.state.values[Q]}),Tg.default.createElement(e,Jl({},Z,W,this.handlers,{ref:ne||this.attachRef}))},S}(Tg.default.Component);(0,USe.polyfill)(v),v.displayName="Uncontrolled("+n+")",v.propTypes=Jl({innerRef:function(){}},DSe(t,n)),r.forEach(function(E){v.prototype[E]=function(){var P;return(P=this.inner)[E].apply(P,arguments)}});var x=v;return Tg.default.forwardRef&&(x=Tg.default.forwardRef(function(E,S){return Tg.default.createElement(v,Jl({},E,{innerRef:S,__source:{fileName:dkt,lineNumber:128},__self:this}))}),x.propTypes=v.propTypes),x.ControlledComponent=e,x.deferControlTo=function(E,S,P){return S===void 0&&(S={}),Db(E,Jl({},t,S),P)},x}var SU=He(EU());var XSe=He(wP()),TP=He(Nr());var eu={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},TU={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};var YSe={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},kb={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"};function IU(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[r.length-1];return typeof i=="function"?e.apply(void 0,r):function(o){return e.apply(void 0,r.concat([o]))}}}function mn(e,t){var r=(e.bsClass||"").trim();return r==null&&(0,XSe.default)(!1),r+(t?"-"+t:"")}var vn=IU(function(e,t){var r=t.propTypes||(t.propTypes={}),n=t.defaultProps||(t.defaultProps={});return r.bsClass=TP.default.string,n.bsClass=e,t}),QSe=IU(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var n=r.STYLES||[],i=r.propTypes||{};e.forEach(function(v){n.indexOf(v)===-1&&n.push(v)});var o=TP.default.oneOf(n);if(r.STYLES=n,o._values=n,r.propTypes=It({},i,{bsStyle:o}),t!==void 0){var f=r.defaultProps||(r.defaultProps={});f.bsStyle=t}return r}),Sg=IU(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var n=r.SIZES||[],i=r.propTypes||{};e.forEach(function(v){n.indexOf(v)===-1&&n.push(v)});var o=[];n.forEach(function(v){var x=TU[v];x&&x!==v&&o.push(x),o.push(v)});var f=TP.default.oneOf(o);return f._values=o,r.SIZES=n,r.propTypes=It({},i,{bsSize:f}),t!==void 0&&(r.defaultProps||(r.defaultProps={}),r.defaultProps.bsSize=t),r});function To(e){var t,r=(t={},t[mn(e)]=!0,t);if(e.bsSize){var n=TU[e.bsSize]||e.bsSize;r[mn(e,n)]=!0}return e.bsStyle&&(r[mn(e,e.bsStyle)]=!0),r}function JSe(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function eIe(e){return e==="bsClass"||e==="bsSize"||e==="bsStyle"||e==="bsRole"}function Ta(e){var t={};return(0,SU.default)(e).forEach(function(r){var n=r[0],i=r[1];eIe(n)||(t[n]=i)}),[JSe(e),t]}function SP(e,t){var r={};t.forEach(function(i){r[i]=!0});var n={};return(0,SU.default)(e).forEach(function(i){var o=i[0],f=i[1];!eIe(o)&&!r[o]&&(n[o]=f)}),[JSe(e),n]}var no=He(rr());function xkt(e,t,r){var n=0;return no.default.Children.map(e,function(i){return no.default.isValidElement(i)?t.call(r,i,n++):i})}function bkt(e,t,r){var n=0;no.default.Children.forEach(e,function(i){no.default.isValidElement(i)&&t.call(r,i,n++)})}function wkt(e){var t=0;return no.default.Children.forEach(e,function(r){no.default.isValidElement(r)&&++t}),t}function Ekt(e,t,r){var n=0,i=[];return no.default.Children.forEach(e,function(o){no.default.isValidElement(o)&&t.call(r,o,n++)&&i.push(o)}),i}function Tkt(e,t,r){var n=0,i;return no.default.Children.forEach(e,function(o){i||no.default.isValidElement(o)&&t.call(r,o,n++)&&(i=o)}),i}function Skt(e,t,r){var n=0,i=!0;return no.default.Children.forEach(e,function(o){i&&no.default.isValidElement(o)&&(t.call(r,o,n++)||(i=!1))}),i}function Ikt(e,t,r){var n=0,i=!1;return no.default.Children.forEach(e,function(o){i||no.default.isValidElement(o)&&t.call(r,o,n++)&&(i=!0)}),i}function Ckt(e){var t=[];return no.default.Children.forEach(e,function(r){no.default.isValidElement(r)&&t.push(r)}),t}var Qp={map:xkt,forEach:bkt,count:wkt,find:Tkt,filter:Ekt,every:Skt,some:Ikt,toArray:Ckt};var CP=He(Nr()),CU=He(Nb());var zxr=CP.default.oneOfType([CP.default.string,CP.default.number]);function rIe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,CU.default)(function(n,i,o){var f;return t.every(function(v){return Qp.some(n.children,function(x){return x.props.bsRole===v})?!0:(f=v,!1)}),f?new Error("(children) "+o+" - Missing a required child with bsRole: "+(f+". "+o+" must have at least one child of each of ")+("the following bsRoles: "+t.join(", "))):null})}function nIe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,CU.default)(function(n,i,o){var f;return t.every(function(v){var x=Qp.filter(n.children,function(E){return E.props.bsRole===v});return x.length>1?(f=v,!1):!0}),f?new Error("(children) "+o+" - Duplicate children detected of bsRole: "+(f+". Only one child each allowed with the following ")+("bsRoles: "+t.join(", "))):null})}var PU=He(Nr()),Fb=He(rr()),Akt={label:PU.default.string.isRequired,onClick:PU.default.func},qkt={label:"Close"},MU=function(e){yr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,o=i.label,f=i.onClick;return Fb.default.createElement("button",{type:"button",className:"close",onClick:f},Fb.default.createElement("span",{"aria-hidden":"true"},"\xD7"),Fb.default.createElement("span",{className:"sr-only"},o))},t}(Fb.default.Component);MU.propTypes=Akt;MU.defaultProps=qkt;var cIe=MU;function Tr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var OU=He(rr()),uc=He(Nr()),yIe=He(lc());function Vkt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(n){return n!=null}).reduce(function(n,i){if(typeof i!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return n===null?i:function(){for(var f=arguments.length,v=new Array(f),x=0;x<f;x++)v[x]=arguments[x];n.apply(this,v),i.apply(this,v)}},null)}var yi=Vkt;var $kt={href:uc.default.string,onClick:uc.default.func,onKeyDown:uc.default.func,disabled:uc.default.bool,role:uc.default.string,tabIndex:uc.default.oneOfType([uc.default.number,uc.default.string]),componentClass:yIe.default},Gkt={componentClass:"a"};function gIe(e){return!e||e.trim()==="#"}var LU=function(e){yr(t,e);function t(n,i){var o;return o=e.call(this,n,i)||this,o.handleClick=o.handleClick.bind(Tr(Tr(o))),o.handleKeyDown=o.handleKeyDown.bind(Tr(Tr(o))),o}var r=t.prototype;return r.handleClick=function(i){var o=this.props,f=o.disabled,v=o.href,x=o.onClick;if((f||gIe(v))&&i.preventDefault(),f){i.stopPropagation();return}x&&x(i)},r.handleKeyDown=function(i){i.key===" "&&(i.preventDefault(),this.handleClick(i))},r.render=function(){var i=this.props,o=i.componentClass,f=i.disabled,v=i.onKeyDown,x=_r(i,["componentClass","disabled","onKeyDown"]);return gIe(x.href)&&(x.role=x.role||"button",x.href=x.href||"#"),f&&(x.tabIndex=-1,x.style=It({pointerEvents:"none"},x.style)),OU.default.createElement(o,It({},x,{onClick:this.handleClick,onKeyDown:yi(this.handleKeyDown,v)}))},t}(OU.default.Component);LU.propTypes=$kt;LU.defaultProps=Gkt;var Ig=LU;var _Ie=He(uIe());var DU=He(Ea()),zP=He(rr()),Jp=He(Nr()),xIe=He(lc());var Zkt={active:Jp.default.bool,disabled:Jp.default.bool,block:Jp.default.bool,onClick:Jp.default.func,componentClass:xIe.default,href:Jp.default.string,type:Jp.default.oneOf(["button","reset","submit"])},Wkt={active:!1,block:!1,disabled:!1},kU=function(e){yr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.renderAnchor=function(i,o){return zP.default.createElement(Ig,It({},i,{className:(0,DU.default)(o,i.disabled&&"disabled")}))},r.renderButton=function(i,o){var f=i.componentClass,v=_r(i,["componentClass"]),x=f||"button";return zP.default.createElement(x,It({},v,{type:v.type||"button",className:o}))},r.render=function(){var i,o=this.props,f=o.active,v=o.block,x=o.className,E=_r(o,["active","block","className"]),S=Ta(E),P=S[0],q=S[1],F=It({},To(P),(i={active:f},i[mn(P,"block")]=v,i)),K=(0,DU.default)(x,F);return q.href?this.renderAnchor(q,K):this.renderButton(q,K)},t}(zP.default.Component);kU.propTypes=Zkt;kU.defaultProps=Wkt;var rf=vn("btn",Sg([eu.LARGE,eu.SMALL,eu.XSMALL],QSe((0,_Ie.default)(YSe).concat([kb.DEFAULT,kb.PRIMARY,kb.LINK]),kb.DEFAULT,kU)));var wIe=He(Ea()),NU=He(rr()),UP=He(Nr()),EIe=He(BP());var Qkt={vertical:UP.default.bool,justified:UP.default.bool,block:(0,EIe.default)(UP.default.bool,function(e){var t=e.block,r=e.vertical;return t&&!r?new Error("`block` requires `vertical` to be set to have any effect"):null})},Jkt={block:!1,justified:!1,vertical:!1},FU=function(e){yr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i,o=this.props,f=o.block,v=o.justified,x=o.vertical,E=o.className,S=_r(o,["block","justified","vertical","className"]),P=Ta(S),q=P[0],F=P[1],K=It({},To(q),(i={},i[mn(q)]=!x,i[mn(q,"vertical")]=x,i[mn(q,"justified")]=v,i[mn(rf.defaultProps,"block")]=f,i));return NU.default.createElement("div",It({},F,{className:(0,wIe.default)(E,K)}))},t}(NU.default.Component);FU.propTypes=Qkt;FU.defaultProps=Jkt;var TIe=vn("btn-group",FU);var cPe=He(Ea()),hPe=He(KU()),fPe=He(Gb()),pM=He(XU()),qg=He(rr()),Go=He(Nr()),p5=He(as()),pPe=He(BP()),dPe=He(lc()),mPe=He(oCe());var u1r=He(zU());var oPe=He(HCe());var aPe=He(Ea()),Yb=He(XU()),Xb=He(rr()),hc=He(Nr()),sPe=He(as()),lPe=He(iPe());var lzt={open:hc.default.bool,pullRight:hc.default.bool,onClose:hc.default.func,labelledBy:hc.default.oneOfType([hc.default.string,hc.default.number]),onSelect:hc.default.func,rootCloseEvent:hc.default.oneOf(["click","mousedown"])},uzt={bsRole:"menu",pullRight:!1},u5=function(e){yr(t,e);function t(n){var i;return i=e.call(this,n)||this,i.handleRootClose=i.handleRootClose.bind(Tr(Tr(i))),i.handleKeyDown=i.handleKeyDown.bind(Tr(Tr(i))),i}var r=t.prototype;return r.getFocusableMenuItems=function(){var i=sPe.default.findDOMNode(this);return i?(0,oPe.default)(i.querySelectorAll("[tabIndex=\"-1\"]")):[]},r.getItemsAndActiveIndex=function(){var i=this.getFocusableMenuItems(),o=i.indexOf(document.activeElement);return{items:i,activeIndex:o}},r.focusNext=function(){var i=this.getItemsAndActiveIndex(),o=i.items,f=i.activeIndex;if(o.length!==0){var v=f===o.length-1?0:f+1;o[v].focus()}},r.focusPrevious=function(){var i=this.getItemsAndActiveIndex(),o=i.items,f=i.activeIndex;if(o.length!==0){var v=f===0?o.length-1:f-1;o[v].focus()}},r.handleKeyDown=function(i){switch(i.keyCode){case Yb.default.codes.down:this.focusNext(),i.preventDefault();break;case Yb.default.codes.up:this.focusPrevious(),i.preventDefault();break;case Yb.default.codes.esc:case Yb.default.codes.tab:this.props.onClose(i,{source:"keydown"});break;default:}},r.handleRootClose=function(i){this.props.onClose(i,{source:"rootClose"})},r.render=function(){var i,o=this,f=this.props,v=f.open,x=f.pullRight,E=f.labelledBy,S=f.onSelect,P=f.className,q=f.rootCloseEvent,F=f.children,K=_r(f,["open","pullRight","labelledBy","onSelect","className","rootCloseEvent","children"]),ne=SP(K,["onClose"]),Z=ne[0],W=ne[1],Q=It({},To(Z),(i={},i[mn(Z,"right")]=x,i));return Xb.default.createElement(lPe.default,{disabled:!v,onRootClose:this.handleRootClose,event:q},Xb.default.createElement("ul",It({},W,{role:"menu",className:(0,aPe.default)(P,Q),"aria-labelledby":E}),Qp.map(F,function(le){return Xb.default.cloneElement(le,{onKeyDown:yi(le.props.onKeyDown,o.handleKeyDown),onSelect:yi(le.props.onSelect,S)})})))},t}(Xb.default.Component);u5.propTypes=lzt;u5.defaultProps=uzt;var c5=vn("dropdown-menu",u5);var fM=He(rr()),Qb=He(Nr()),uPe=He(Ea());var czt={noCaret:Qb.default.bool,open:Qb.default.bool,title:Qb.default.string,useAnchor:Qb.default.bool},hzt={open:!1,useAnchor:!1,bsRole:"toggle"},h5=function(e){yr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,o=i.noCaret,f=i.open,v=i.useAnchor,x=i.bsClass,E=i.className,S=i.children,P=_r(i,["noCaret","open","useAnchor","bsClass","className","children"]);delete P.bsRole;var q=v?Ig:rf,F=!o;return fM.default.createElement(q,It({},P,{role:"button",className:(0,uPe.default)(E,x),"aria-haspopup":!0,"aria-expanded":f}),S||P.title,F&&" ",F&&fM.default.createElement("span",{className:"caret"}))},t}(fM.default.Component);h5.propTypes=czt;h5.defaultProps=hzt;var f5=vn("dropdown-toggle",h5);var vPe=f5.defaultProps.bsRole,d5=c5.defaultProps.bsRole,fzt={dropup:Go.default.bool,id:(0,mPe.default)(Go.default.oneOfType([Go.default.string,Go.default.number])),componentClass:dPe.default,children:(0,pPe.default)(rIe(vPe,d5),nIe(d5)),disabled:Go.default.bool,pullRight:Go.default.bool,open:Go.default.bool,defaultOpen:Go.default.bool,onToggle:Go.default.func,onSelect:Go.default.func,role:Go.default.string,rootCloseEvent:Go.default.oneOf(["click","mousedown"]),onMouseEnter:Go.default.func,onMouseLeave:Go.default.func},pzt={componentClass:TIe},dM=function(e){yr(t,e);function t(n,i){var o;return o=e.call(this,n,i)||this,o.handleClick=o.handleClick.bind(Tr(Tr(o))),o.handleKeyDown=o.handleKeyDown.bind(Tr(Tr(o))),o.handleClose=o.handleClose.bind(Tr(Tr(o))),o._focusInDropdown=!1,o.lastOpenEventType=null,o}var r=t.prototype;return r.componentDidMount=function(){this.focusNextOnOpen()},r.UNSAFE_componentWillUpdate=function(i){!i.open&&this.props.open&&(this._focusInDropdown=(0,fPe.default)(p5.default.findDOMNode(this.menu),(0,hPe.default)(document)))},r.componentDidUpdate=function(i){var o=this.props.open,f=i.open;o&&!f&&this.focusNextOnOpen(),!o&&f&&this._focusInDropdown&&(this._focusInDropdown=!1,this.focus())},r.focus=function(){var i=p5.default.findDOMNode(this.toggle);i&&i.focus&&i.focus()},r.focusNextOnOpen=function(){var i=this.menu;!i||!i.focusNext||(this.lastOpenEventType==="keydown"||this.props.role==="menuitem")&&i.focusNext()},r.handleClick=function(i){this.props.disabled||this.toggleOpen(i,{source:"click"})},r.handleClose=function(i,o){this.props.open&&this.toggleOpen(i,o)},r.handleKeyDown=function(i){if(!this.props.disabled)switch(i.keyCode){case pM.default.codes.down:this.props.open?this.menu.focusNext&&this.menu.focusNext():this.toggleOpen(i,{source:"keydown"}),i.preventDefault();break;case pM.default.codes.esc:case pM.default.codes.tab:this.handleClose(i,{source:"keydown"});break;default:}},r.toggleOpen=function(i,o){var f=!this.props.open;f&&(this.lastOpenEventType=o.source),this.props.onToggle&&this.props.onToggle(f,i,o)},r.renderMenu=function(i,o){var f=this,v=o.id,x=o.onSelect,E=o.rootCloseEvent,S=_r(o,["id","onSelect","rootCloseEvent"]),P=function(F){f.menu=F};return typeof i.ref=="string"||(P=yi(i.ref,P)),(0,qg.cloneElement)(i,It({},S,{ref:P,labelledBy:v,bsClass:mn(S,"menu"),onClose:yi(i.props.onClose,this.handleClose),onSelect:yi(i.props.onSelect,x,function(q,F){return f.handleClose(F,{source:"select"})}),rootCloseEvent:E}))},r.renderToggle=function(i,o){var f=this,v=function(E){f.toggle=E};return typeof i.ref=="string"||(v=yi(i.ref,v)),(0,qg.cloneElement)(i,It({},o,{ref:v,bsClass:mn(o,"toggle"),onClick:yi(i.props.onClick,this.handleClick),onKeyDown:yi(i.props.onKeyDown,this.handleKeyDown)}))},r.render=function(){var i,o=this,f=this.props,v=f.componentClass,x=f.id,E=f.dropup,S=f.disabled,P=f.pullRight,q=f.open,F=f.onSelect,K=f.role,ne=f.bsClass,Z=f.className,W=f.rootCloseEvent,Q=f.children,le=_r(f,["componentClass","id","dropup","disabled","pullRight","open","onSelect","role","bsClass","className","rootCloseEvent","children"]);delete le.onToggle;var ce=(i={},i[ne]=!0,i.open=q,i.disabled=S,i);return E&&(ce[ne]=!1,ce.dropup=!0),qg.default.createElement(v,It({},le,{className:(0,cPe.default)(Z,ce)}),Qp.map(Q,function(ze){switch(ze.props.bsRole){case vPe:return o.renderToggle(ze,{id:x,disabled:S,open:q,role:K,bsClass:ne});case d5:return o.renderMenu(ze,{id:x,open:q,pullRight:P,bsClass:ne,onSelect:F,rootCloseEvent:W});default:return ze}}))},t}(qg.default.Component);dM.propTypes=fzt;dM.defaultProps=pzt;vn("dropdown",dM);var m5=Db(dM,{open:"onToggle"});m5.Toggle=f5;m5.Menu=c5;var Rg=m5;var e1=He(rr()),Og=He(Nr());var gPe=He(EU());function Jb(e,t){var r=t.propTypes,n={},i={};return(0,gPe.default)(e).forEach(function(o){var f=o[0],v=o[1];r[f]?n[f]=v:i[f]=v}),[n,i]}var dzt=It({},Rg.propTypes,{bsStyle:Og.default.string,bsSize:Og.default.string,title:Og.default.node.isRequired,noCaret:Og.default.bool,children:Og.default.node}),yPe=function(e){yr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,o=i.bsSize,f=i.bsStyle,v=i.title,x=i.children,E=_r(i,["bsSize","bsStyle","title","children"]),S=Jb(E,Rg.ControlledComponent),P=S[0],q=S[1];return e1.default.createElement(Rg,It({},P,{bsSize:o,bsStyle:f}),e1.default.createElement(Rg.Toggle,It({},q,{bsSize:o,bsStyle:f}),v),e1.default.createElement(Rg.Menu,null,x))},t}(e1.default.Component);yPe.propTypes=dzt;var v5=yPe;var _Pe=He(Ea()),vM=He(rr()),Ss=He(Nr()),Lg=He(YIe()),mM,mzt={in:Ss.default.bool,mountOnEnter:Ss.default.bool,unmountOnExit:Ss.default.bool,appear:Ss.default.bool,timeout:Ss.default.number,onEnter:Ss.default.func,onEntering:Ss.default.func,onEntered:Ss.default.func,onExit:Ss.default.func,onExiting:Ss.default.func,onExited:Ss.default.func},vzt={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},gzt=(mM={},mM[Lg.ENTERING]="in",mM[Lg.ENTERED]="in",mM),g5=function(e){yr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,o=i.className,f=i.children,v=_r(i,["className","children"]);return vM.default.createElement(Lg.default,v,function(x,E){return vM.default.cloneElement(f,It({},E,{className:(0,_Pe.default)("fade",o,f.props.className,gzt[x])}))})},t}(vM.default.Component);g5.propTypes=mzt;g5.defaultProps=vzt;var y5=g5;var gM=He(Ea()),Dg=He(rr()),fc=He(Nr()),xPe=He(BP());var yzt={active:fc.default.bool,disabled:fc.default.bool,divider:(0,xPe.default)(fc.default.bool,function(e){var t=e.divider,r=e.children;return t&&r?new Error("Children will not be rendered for dividers"):null}),eventKey:fc.default.any,header:fc.default.bool,href:fc.default.string,onClick:fc.default.func,onSelect:fc.default.func},_zt={divider:!1,disabled:!1,header:!1},_5=function(e){yr(t,e);function t(n,i){var o;return o=e.call(this,n,i)||this,o.handleClick=o.handleClick.bind(Tr(Tr(o))),o}var r=t.prototype;return r.handleClick=function(i){var o=this.props,f=o.href,v=o.disabled,x=o.onSelect,E=o.eventKey;(!f||v)&&i.preventDefault(),!v&&x&&x(E,i)},r.render=function(){var i=this.props,o=i.active,f=i.disabled,v=i.divider,x=i.header,E=i.onClick,S=i.className,P=i.style,q=_r(i,["active","disabled","divider","header","onClick","className","style"]),F=SP(q,["eventKey","onSelect"]),K=F[0],ne=F[1];return v?(ne.children=void 0,Dg.default.createElement("li",It({},ne,{role:"separator",className:(0,gM.default)(S,"divider"),style:P}))):x?Dg.default.createElement("li",It({},ne,{role:"heading",className:(0,gM.default)(S,mn(K,"header")),style:P})):Dg.default.createElement("li",{role:"presentation",className:(0,gM.default)(S,{active:o,disabled:f}),style:P},Dg.default.createElement(Ig,It({},ne,{role:"menuitem",tabIndex:"-1",onClick:yi(E,this.handleClick)})))},t}(Dg.default.Component);_5.propTypes=yzt;_5.defaultProps=_zt;var x5=vn("dropdown",_5);var $5=He(Ea()),G5=He(OPe()),XMe=He(Vb()),QMe=He(tu()),Z5=He(E5()),Fg=He(rr()),Di=He(Nr()),JMe=He(as()),zg=He(NMe()),eAe=He(C5()),tAe=He(lc());var FMe=He(Ea()),N5=He(rr()),zMe=He(lc());var ABt={componentClass:zMe.default},qBt={componentClass:"div"},F5=function(e){yr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,o=i.componentClass,f=i.className,v=_r(i,["componentClass","className"]),x=Ta(v),E=x[0],S=x[1],P=To(E);return N5.default.createElement(o,It({},S,{className:(0,FMe.default)(f,P)}))},t}(N5.default.Component);F5.propTypes=ABt;F5.defaultProps=qBt;var jMe=vn("modal-body",F5);var z5=He(Ea()),n1=He(rr()),BMe=He(Nr());var RBt={dialogClassName:BMe.default.string},UMe=function(e){yr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i,o=this.props,f=o.dialogClassName,v=o.className,x=o.style,E=o.children,S=o.onMouseDownDialog,P=_r(o,["dialogClassName","className","style","children","onMouseDownDialog"]),q=Ta(P),F=q[0],K=q[1],ne=mn(F),Z=It({display:"block"},x),W=It({},To(F),(i={},i[ne]=!1,i[mn(F,"dialog")]=!0,i));return n1.default.createElement("div",It({},K,{tabIndex:"-1",role:"dialog",style:Z,className:(0,z5.default)(v,ne)}),n1.default.createElement("div",{className:(0,z5.default)(f,W),onMouseDown:S},n1.default.createElement("div",{className:mn(F,"content"),role:"document"},E)))},t}(n1.default.Component);UMe.propTypes=RBt;var jM=vn("modal",Sg([eu.LARGE,eu.SMALL],UMe));var VMe=He(Ea()),j5=He(rr()),$Me=He(lc());var OBt={componentClass:$Me.default},LBt={componentClass:"div"},B5=function(e){yr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,o=i.componentClass,f=i.className,v=_r(i,["componentClass","className"]),x=Ta(v),E=x[0],S=x[1],P=To(E);return j5.default.createElement(o,It({},S,{className:(0,VMe.default)(f,P)}))},t}(j5.default.Component);B5.propTypes=OBt;B5.defaultProps=LBt;var GMe=vn("modal-footer",B5);var ZMe=He(Ea()),Ng=He(Nr()),BM=He(rr());var DBt={closeLabel:Ng.default.string,closeButton:Ng.default.bool,onHide:Ng.default.func},kBt={closeLabel:"Close",closeButton:!1},NBt={$bs_modal:Ng.default.shape({onHide:Ng.default.func})},UM=function(e){yr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,o=i.closeLabel,f=i.closeButton,v=i.onHide,x=i.className,E=i.children,S=_r(i,["closeLabel","closeButton","onHide","className","children"]),P=this.context.$bs_modal,q=Ta(S),F=q[0],K=q[1],ne=To(F);return BM.default.createElement("div",It({},K,{className:(0,ZMe.default)(x,ne)}),f&&BM.default.createElement(cIe,{label:o,onClick:yi(P&&P.onHide,v)}),E)},t}(BM.default.Component);UM.propTypes=DBt;UM.defaultProps=kBt;UM.contextTypes=NBt;var WMe=vn("modal-header",UM);var HMe=He(Ea()),U5=He(rr()),KMe=He(lc());var FBt={componentClass:KMe.default},zBt={componentClass:"h4"},V5=function(e){yr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,o=i.componentClass,f=i.className,v=_r(i,["componentClass","className"]),x=Ta(v),E=x[0],S=x[1],P=To(E);return U5.default.createElement(o,It({},S,{className:(0,HMe.default)(f,P)}))},t}(U5.default.Component);V5.propTypes=FBt;V5.defaultProps=zBt;var YMe=vn("modal-title",V5);var jBt=It({},zg.default.propTypes,jM.propTypes,{backdrop:Di.default.oneOf(["static",!0,!1]),backdropClassName:Di.default.string,keyboard:Di.default.bool,animation:Di.default.bool,dialogComponentClass:tAe.default,autoFocus:Di.default.bool,enforceFocus:Di.default.bool,restoreFocus:Di.default.bool,show:Di.default.bool,onHide:Di.default.func,onEnter:Di.default.func,onEntering:Di.default.func,onEntered:Di.default.func,onExit:Di.default.func,onExiting:Di.default.func,onExited:Di.default.func,container:zg.default.propTypes.container}),BBt=It({},zg.default.defaultProps,{animation:!0,dialogComponentClass:jM}),UBt={$bs_modal:Di.default.shape({onHide:Di.default.func})};function VBt(e){return Fg.default.createElement(y5,It({},e,{timeout:Va.TRANSITION_DURATION}))}function $Bt(e){return Fg.default.createElement(y5,It({},e,{timeout:Va.BACKDROP_TRANSITION_DURATION}))}var Va=function(e){yr(t,e);function t(n,i){var o;return o=e.call(this,n,i)||this,o.handleDialogBackdropMouseDown=function(){o._waitingForMouseUp=!0},o.handleMouseUp=function(f){var v=o._modal.getDialogElement();o._waitingForMouseUp&&f.target===v&&(o._ignoreBackdropClick=!0),o._waitingForMouseUp=!1},o.handleEntering=o.handleEntering.bind(Tr(Tr(o))),o.handleExited=o.handleExited.bind(Tr(Tr(o))),o.handleWindowResize=o.handleWindowResize.bind(Tr(Tr(o))),o.handleDialogClick=o.handleDialogClick.bind(Tr(Tr(o))),o.setModalRef=o.setModalRef.bind(Tr(Tr(o))),o.state={style:{}},o}var r=t.prototype;return r.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},r.componentWillUnmount=function(){this.handleExited()},r.setModalRef=function(i){this._modal=i},r.handleDialogClick=function(i){if(this._ignoreBackdropClick||i.target!==i.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},r.handleEntering=function(){G5.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},r.handleExited=function(){G5.default.off(window,"resize",this.handleWindowResize)},r.handleWindowResize=function(){this.updateStyle()},r.updateStyle=function(){if(QMe.default){var i=this._modal.getDialogElement(),o=i.scrollHeight,f=(0,XMe.default)(i),v=(0,eAe.default)(JMe.default.findDOMNode(this.props.container||f.body)),x=o>f.documentElement.clientHeight;this.setState({style:{paddingRight:v&&!x?(0,Z5.default)():void 0,paddingLeft:!v&&x?(0,Z5.default)():void 0}})}},r.render=function(){var i=this.props,o=i.backdrop,f=i.backdropClassName,v=i.animation,x=i.show,E=i.dialogComponentClass,S=i.className,P=i.style,q=i.children,F=i.onEntering,K=i.onExited,ne=_r(i,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),Z=Jb(ne,zg.default),W=Z[0],Q=Z[1],le=x&&!v&&"in";return Fg.default.createElement(zg.default,It({},W,{ref:this.setModalRef,show:x,containerClassName:mn(ne,"open"),transition:v?VBt:void 0,backdrop:o,backdropTransition:v?$Bt:void 0,backdropClassName:(0,$5.default)(mn(ne,"backdrop"),f,le),onEntering:yi(F,this.handleEntering),onExited:yi(K,this.handleExited),onMouseUp:this.handleMouseUp}),Fg.default.createElement(E,It({},Q,{style:It({},this.state.style,P),className:(0,$5.default)(S,le),onClick:o===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),q))},t}(Fg.default.Component);Va.propTypes=jBt;Va.defaultProps=BBt;Va.childContextTypes=UBt;Va.Body=jMe;Va.Header=WMe;Va.Title=YMe;Va.Footer=GMe;Va.Dialog=jM;Va.TRANSITION_DURATION=300;Va.BACKDROP_TRANSITION_DURATION=150;var id=vn("modal",Sg([eu.LARGE,eu.SMALL],Va));var ni=He(Nr(),1);function rAe(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=rAe(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function GBt(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=rAe(e))&&(n&&(n+=" "),n+=t);return n}var VM=GBt;var bn=He(rr(),1);var i1=He(Nr(),1);var W5=[{id:"comment-1",text:"Ungenauigkeit"},{id:"comment-2",text:"Falsche Parameter"},{id:"comment-3",text:"Falsche Kartennummer"},{id:"comment-4",text:"Schlechte Genauigkeit des Originals"},{id:"others",text:"Andere Begr\xFCndung:"}],nAe=e=>{let{onClose:t,onSubmit:r,transformationId:n,validationValue:i}=e,[o,f]=(0,bn.useState)(W5[0].id),[v,x]=(0,bn.useState)(""),E=F=>{f(F.target.value)},S=()=>{t()},P=()=>{r({comment:o!=="others"?W5.find(F=>F.id===o).text:v,transformationId:n,validationValue:i})},q=F=>{x(F.target.value)};return bn.default.createElement("div",{className:"vkf-dialog-jobs-validation"},bn.default.createElement(id,{className:"vkf-dialog-jobs-validation",show:!0,onHide:S},bn.default.createElement(id.Header,null,bn.default.createElement(id.Title,null,"Setze validation=\"",i,"\""," ")),bn.default.createElement(id.Body,null,bn.default.createElement("div",{className:"dialog-content"},bn.default.createElement("p",null,"Soll der Validierungsstatus f\xFCr die Transformation mit der ID"," ",n," auf \"",i,"\" gesetzt werden.",i==="invalid"?"F\xFCr invalide Transformationen geben Sie bitte eine Begr\xFCndung mit an.":""),i==="invalid"&&bn.default.createElement(bn.default.Fragment,null,bn.default.createElement("br",null),bn.default.createElement("p",null,"Begr\xFCndung:"),W5.map((F,K)=>bn.default.createElement("div",{className:"radio",key:K},bn.default.createElement("label",null,bn.default.createElement("input",{type:"radio",name:F.id,id:F.id,value:F.id,checked:F.id===o,onChange:E})," ",F.text))),bn.default.createElement("br",null),bn.default.createElement("textarea",{className:"form-control",rows:"3",disabled:o!=="others",onChange:q})))),bn.default.createElement(id.Footer,null,bn.default.createElement(rf,{onClick:S},"Abbrechen"),bn.default.createElement(rf,{onClick:P,bsStyle:"primary"},"Save changes"))))};nAe.propTypes={onClose:i1.default.func.isRequired,onSubmit:i1.default.func.isRequired,transformationId:i1.default.any.isRequired,validationValue:i1.default.string.isRequired};var iAe=nAe;var oAe=["missing","valid","invalid"],aAe=e=>e==="missing"?"warning":e==="valid"?"success":"danger";function sAe({validation:e,onSelect:t}){return ir.default.createElement(v5,{id:"validation-button",pullRight:!0,className:"btn-validation",bsStyle:aAe(e),title:`Validation: ${e}`,key:e},["valid","invalid"].map(r=>ir.default.createElement(x5,{key:r,onClick:()=>t(r)},"Setze Validation auf \"",r,"\"")))}sAe.propTypes={validation:ni.default.oneOf(oAe).isRequired,onSelect:ni.default.func.isRequired};var lAe=e=>{let{isActive:t=!1,className:r="",data:n,onClickPreview:i=()=>console.log("The function onClickPreview is not passed to component TransformationItem.")}=e,{is_active:o,clip:f,params:v,map_id:x,metadata:E,submitted:S,transformation_id:P,user_id:q,validation:F}=n,K=yo.getSettings().LINK_TO_GEOREFERENCE,[ne,Z]=(0,ir.useState)(F),[W,Q]=(0,ir.useState)(!1),[le,ce]=(0,ir.useState)(null),ze=(Be,et)=>{et!==ne&&ce({transformationId:Be,validationValue:et})},Le=Be=>{let et={name:Be.validationValue==="valid"?"transformation_set_valid":"transformation_set_invalid",description:{comment:Be.comment,transformation_id:Be.transformationId}};Z(Be.validationValue),ce(null),tTe(et)};return ir.default.createElement("div",{className:VM("vkf-transformation-item panel panel-default",t?"preview-on":"",r)},ir.default.createElement("div",{className:"panel-heading"},E.title_short,ir.default.createElement("span",{className:VM("state-signal",aAe(ne))})),ir.default.createElement("div",{className:"panel-body"},ir.default.createElement("p",null,ir.default.createElement("strong",null,"Transformation-ID:")," ",P),ir.default.createElement("p",null,ir.default.createElement("strong",null,"Karten-ID:")," ",x),ir.default.createElement("p",null,ir.default.createElement("strong",null,"Aktiv:")," ",o?"Ja":"Nein"),ir.default.createElement("p",null,ir.default.createElement("strong",null,"Erstellt von:")," ",q),ir.default.createElement("p",null,ir.default.createElement("strong",null,"Erstellt am:")," ",S),ir.default.createElement("div",{className:VM("georef-params",W?"all":"")},ir.default.createElement("p",null,ir.default.createElement("strong",null,"Parameter:")," ",W?"":"..."),ir.default.createElement("div",null,ir.default.createElement("p",null,"Passpunkte"),ir.default.createElement("p",null,JSON.stringify(v,null,2)),ir.default.createElement("br",null),ir.default.createElement("p",null,"Clip-Polygon"),ir.default.createElement("p",null,JSON.stringify(f,null,2)),ir.default.createElement("br",null),ir.default.createElement("a",{href:`${K}?transformation_id=${P}&map_id=${x}`,target:"_blank",rel:"noreferrer",className:"btn btn-default btn-georef"},ir.default.createElement("span",{className:"icon"})," Gehe zu Georeferenzierung")))),ir.default.createElement("div",{className:"panel-footer"},ir.default.createElement("button",{className:"btn btn-default",onClick:()=>i(n)},"Zeige Preview"),ir.default.createElement("button",{className:"btn btn-default",onClick:()=>Q(!W)},W?"Schlie\xDFe Parameter":"Zeige Parameter"),ir.default.createElement(sAe,{validation:ne,onSelect:Be=>ze(P,Be)})),le!==null&&ir.default.createElement(iAe,{onSubmit:Le,onClose:()=>ce(null),transformationId:le.transformationId,validationValue:le.validationValue}))};lAe.propTypes={isActive:ni.default.bool,className:ni.default.string,data:ni.default.shape({is_active:ni.default.bool,clip:ni.default.object,overwrites:ni.default.number.isRequired,params:ni.default.object.isRequired,submitted:ni.default.string.isRequired,transformation_id:ni.default.number.isRequired,user_id:ni.default.string.isRequired,map_id:ni.default.string.isRequired,metadata:ni.default.shape({time_publish:ni.default.string.isRequired,title:ni.default.string.isRequired,title_short:ni.default.string.isRequired}),validation:ni.default.oneOf(oAe).isRequired}).isRequired,onClickPreview:ni.default.func};var uAe=lAe;var ZBt=()=>{let[e,t]=(0,Rn.useState)([]),[r,n]=(0,Rn.useState)(null),[i,o]=(0,Rn.useState)(null),[f,v]=(0,Rn.useState)(!1),x=E=>ta(null,null,function*(){if(!f){v(!0);let S=yield rTe(E.transformation_id);n(Object.assign(S,{transformation_id:E.transformation_id})),v(!1)}});return(0,Rn.useEffect)(()=>{if(r!==null&&i!==null){let E=Zh(r.extent,"EPSG:4326",i.map.getView().getProjection());i.map.getView().fit(E,{padding:[100,100,100,100]})}},[r,i]),Rn.default.createElement("div",{className:"vkf-admin-evaluation"},Rn.default.createElement("h1",null,"Willkommen auf der Evaluierungsseite #",yo.getUsername()),Rn.default.createElement("p",null,"Die Evaluierungsseite bietet Ihnen die M\xF6glichkeit bestehende Transformationen zu validieren und ggf. zur\xFCckzusetzen. Sie k\xF6nnen Transformationen nach unterschiedlichen Kriterien ausw\xE4hlen."),Rn.default.createElement(fTe,{onChangeTransformations:t}),Rn.default.createElement("div",{className:"content"},Rn.default.createElement("div",{className:"row"},Rn.default.createElement("div",{className:"col-sm-6 col-md-6 col-lg-6 view-col"},Rn.default.createElement("div",null,e.map(E=>Rn.default.createElement(uAe,{isActive:r!==null&&r.transformation_id===E.transformation_id,key:E.transformation_id,data:E,onClickPreview:x})))),Rn.default.createElement("div",{className:"col-sm-6 col-md-6 col-lg-6 view-col"},Rn.default.createElement("div",{className:"custom-map-container"},Rn.default.createElement(KEe,{extent:null,onLoad:E=>o(E),urlsOsmBaseMap:yo.getDefaultBaseMapUrls(),urlNominatim:yo.getNominatimUrl()}),r!==null&&i!==null&&Rn.default.createElement(aTe,{key:r.wms_url,map:i.map,layerName:r.layer_name,wmsUrl:r.wms_url}),f&&Rn.default.createElement(XEe,null))))))},cAe=ZBt;var WBt=yo;function HBt(e){fAe.default.render(hAe.default.createElement(cAe,null),e)}return o2e(KBt)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.5.0/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

keycode/index.js:
  (*!
   * Programatically add the following
   *)
*/