var vk2=(()=>{var kAe=Object.create;var by=Object.defineProperty,NAe=Object.defineProperties,FAe=Object.getOwnPropertyDescriptor,zAe=Object.getOwnPropertyDescriptors,jAe=Object.getOwnPropertyNames,p5=Object.getOwnPropertySymbols,BAe=Object.getPrototypeOf,d5=Object.prototype.hasOwnProperty,UAe=Object.prototype.propertyIsEnumerable;var Tw=Math.pow,uP=(e,t,r)=>t in e?by(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lP=(e,t)=>{for(var r in t||(t={}))d5.call(t,r)&&uP(e,r,t[r]);if(p5)for(var r of p5(t))UAe.call(t,r)&&uP(e,r,t[r]);return e},cP=(e,t)=>NAe(e,zAe(t));var T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),VAe=(e,t)=>{for(var r in t)by(e,r,{get:t[r],enumerable:!0})},m5=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of jAe(t))!d5.call(e,i)&&i!==r&&by(e,i,{get:()=>t[i],enumerable:!(n=FAe(t,i))||n.enumerable});return e};var De=(e,t,r)=>(r=e!=null?kAe(BAe(e)):{},m5(t||!e||!e.__esModule?by(r,"default",{value:e,enumerable:!0}):r,e)),$Ae=e=>m5(by({},"__esModule",{value:!0}),e);var di=(e,t,r)=>uP(e,typeof t!="symbol"?t+"":t,r);var Va=(e,t,r)=>new Promise((n,i)=>{var a=g=>{try{p(r.next(g))}catch(b){i(b)}},h=g=>{try{p(r.throw(g))}catch(b){i(b)}},p=g=>g.done?n(g.value):Promise.resolve(g.value).then(a,h);p((r=r.apply(e,t)).next())});var hP=T((nkt,g5)=>{"use strict";var v5=Object.getOwnPropertySymbols,GAe=Object.prototype.hasOwnProperty,WAe=Object.prototype.propertyIsEnumerable;function ZAe(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function HAe(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(a){i[a]=a}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch(a){return!1}}g5.exports=HAe()?Object.assign:function(e,t){for(var r,n=ZAe(e),i,a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var h in r)GAe.call(r,h)&&(n[h]=r[h]);if(v5){i=v5(r);for(var p=0;p<i.length;p++)WAe.call(r,i[p])&&(n[i[p]]=r[i[p]])}}return n}});var R5=T(hr=>{"use strict";var pP=hP(),Pd=60103,x5=60106;hr.Fragment=60107;hr.StrictMode=60108;hr.Profiler=60114;var w5=60109,b5=60110,E5=60112;hr.Suspense=60113;var S5=60115,T5=60116;typeof Symbol=="function"&&Symbol.for&&(Wo=Symbol.for,Pd=Wo("react.element"),x5=Wo("react.portal"),hr.Fragment=Wo("react.fragment"),hr.StrictMode=Wo("react.strict_mode"),hr.Profiler=Wo("react.profiler"),w5=Wo("react.provider"),b5=Wo("react.context"),E5=Wo("react.forward_ref"),hr.Suspense=Wo("react.suspense"),S5=Wo("react.memo"),T5=Wo("react.lazy"));var Wo,y5=typeof Symbol=="function"&&Symbol.iterator;function KAe(e){return e===null||typeof e!="object"?null:(e=y5&&e[y5]||e["@@iterator"],typeof e=="function"?e:null)}function Ey(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var I5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C5={};function Md(e,t,r){this.props=e,this.context=t,this.refs=C5,this.updater=r||I5}Md.prototype.isReactComponent={};Md.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(Ey(85));this.updater.enqueueSetState(this,e,t,"setState")};Md.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function A5(){}A5.prototype=Md.prototype;function dP(e,t,r){this.props=e,this.context=t,this.refs=C5,this.updater=r||I5}var mP=dP.prototype=new A5;mP.constructor=dP;pP(mP,Md.prototype);mP.isPureReactComponent=!0;var vP={current:null},q5=Object.prototype.hasOwnProperty,P5={key:!0,ref:!0,__self:!0,__source:!0};function M5(e,t,r){var n,i={},a=null,h=null;if(t!=null)for(n in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(a=""+t.key),t)q5.call(t,n)&&!P5.hasOwnProperty(n)&&(i[n]=t[n]);var p=arguments.length-2;if(p===1)i.children=r;else if(1<p){for(var g=Array(p),b=0;b<p;b++)g[b]=arguments[b+2];i.children=g}if(e&&e.defaultProps)for(n in p=e.defaultProps,p)i[n]===void 0&&(i[n]=p[n]);return{$$typeof:Pd,type:e,key:a,ref:h,props:i,_owner:vP.current}}function XAe(e,t){return{$$typeof:Pd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function gP(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pd}function YAe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var _5=/\/+/g;function fP(e,t){return typeof e=="object"&&e!==null&&e.key!=null?YAe(""+e.key):t.toString(36)}function Cw(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(a){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case Pd:case x5:h=!0;}}if(h)return h=e,i=i(h),e=n===""?"."+fP(h,0):n,Array.isArray(i)?(r="",e!=null&&(r=e.replace(_5,"$&/")+"/"),Cw(i,t,r,"",function(b){return b})):i!=null&&(gP(i)&&(i=XAe(i,r+(!i.key||h&&h.key===i.key?"":(""+i.key).replace(_5,"$&/")+"/")+e)),t.push(i)),1;if(h=0,n=n===""?".":n+":",Array.isArray(e))for(var p=0;p<e.length;p++){a=e[p];var g=n+fP(a,p);h+=Cw(a,t,r,g,i)}else if(g=KAe(e),typeof g=="function")for(e=g.call(e),p=0;!(a=e.next()).done;)a=a.value,g=n+fP(a,p++),h+=Cw(a,t,r,g,i);else if(a==="object")throw t=""+e,Error(Ey(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return h}function Iw(e,t,r){if(e==null)return e;var n=[],i=0;return Cw(e,n,"","",function(a){return t.call(r,a,i++)}),n}function JAe(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var O5={current:null};function ul(){var e=O5.current;if(e===null)throw Error(Ey(321));return e}var QAe={ReactCurrentDispatcher:O5,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:vP,IsSomeRendererActing:{current:!1},assign:pP};hr.Children={map:Iw,forEach:function(e,t,r){Iw(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Iw(e,function(){t++}),t},toArray:function(e){return Iw(e,function(t){return t})||[]},only:function(e){if(!gP(e))throw Error(Ey(143));return e}};hr.Component=Md;hr.PureComponent=dP;hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QAe;hr.cloneElement=function(e,t,r){if(e==null)throw Error(Ey(267,e));var n=pP({},e.props),i=e.key,a=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,h=vP.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var p=e.type.defaultProps;for(g in t)q5.call(t,g)&&!P5.hasOwnProperty(g)&&(n[g]=t[g]===void 0&&p!==void 0?p[g]:t[g])}var g=arguments.length-2;if(g===1)n.children=r;else if(1<g){p=Array(g);for(var b=0;b<g;b++)p[b]=arguments[b+2];n.children=p}return{$$typeof:Pd,type:e.type,key:i,ref:a,props:n,_owner:h}};hr.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:b5,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:w5,_context:e},e.Consumer=e};hr.createElement=M5;hr.createFactory=function(e){var t=M5.bind(null,e);return t.type=e,t};hr.createRef=function(){return{current:null}};hr.forwardRef=function(e){return{$$typeof:E5,render:e}};hr.isValidElement=gP;hr.lazy=function(e){return{$$typeof:T5,_payload:{_status:-1,_result:e},_init:JAe}};hr.memo=function(e,t){return{$$typeof:S5,type:e,compare:t===void 0?null:t}};hr.useCallback=function(e,t){return ul().useCallback(e,t)};hr.useContext=function(e,t){return ul().useContext(e,t)};hr.useDebugValue=function(){};hr.useEffect=function(e,t){return ul().useEffect(e,t)};hr.useImperativeHandle=function(e,t,r){return ul().useImperativeHandle(e,t,r)};hr.useLayoutEffect=function(e,t){return ul().useLayoutEffect(e,t)};hr.useMemo=function(e,t){return ul().useMemo(e,t)};hr.useReducer=function(e,t,r){return ul().useReducer(e,t,r)};hr.useRef=function(e){return ul().useRef(e)};hr.useState=function(e){return ul().useState(e)};hr.version="17.0.2"});var Yt=T((akt,D5)=>{"use strict";D5.exports=R5()});var j5=T(Ir=>{"use strict";var Rd,Iy,Mw,SP;typeof performance=="object"&&typeof performance.now=="function"?(L5=performance,Ir.unstable_now=function(){return L5.now()}):(yP=Date,k5=yP.now(),Ir.unstable_now=function(){return yP.now()-k5});var L5,yP,k5;typeof window=="undefined"||typeof MessageChannel!="function"?(Od=null,_P=null,xP=function(){if(Od!==null)try{var e=Ir.unstable_now();Od(!0,e),Od=null}catch(t){throw setTimeout(xP,0),t}},Rd=function(e){Od!==null?setTimeout(Rd,0,e):(Od=e,setTimeout(xP,0))},Iy=function(e,t){_P=setTimeout(e,t)},Mw=function(){clearTimeout(_P)},Ir.unstable_shouldYield=function(){return!1},SP=Ir.unstable_forceFrameRate=function(){}):(N5=window.setTimeout,F5=window.clearTimeout,typeof console!="undefined"&&(z5=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof z5!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),Sy=!1,Ty=null,Aw=-1,wP=5,bP=0,Ir.unstable_shouldYield=function(){return Ir.unstable_now()>=bP},SP=function(){},Ir.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):wP=0<e?Math.floor(1e3/e):5},EP=new MessageChannel,qw=EP.port2,EP.port1.onmessage=function(){if(Ty!==null){var e=Ir.unstable_now();bP=e+wP;try{Ty(!0,e)?qw.postMessage(null):(Sy=!1,Ty=null)}catch(t){throw qw.postMessage(null),t}}else Sy=!1},Rd=function(e){Ty=e,Sy||(Sy=!0,qw.postMessage(null))},Iy=function(e,t){Aw=N5(function(){e(Ir.unstable_now())},t)},Mw=function(){F5(Aw),Aw=-1});var Od,_P,xP,N5,F5,z5,Sy,Ty,Aw,wP,bP,EP,qw;function TP(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,i=e[n];if(i!==void 0&&0<Pw(i,t))e[n]=t,e[r]=i,r=n;else break e}}function Os(e){return e=e[0],e===void 0?null:e}function Ow(e){var t=e[0];if(t!==void 0){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length;n<i;){var a=2*(n+1)-1,h=e[a],p=a+1,g=e[p];if(h!==void 0&&0>Pw(h,r))g!==void 0&&0>Pw(g,h)?(e[n]=g,e[p]=r,n=p):(e[n]=h,e[a]=r,n=a);else if(g!==void 0&&0>Pw(g,r))e[n]=g,e[p]=r,n=p;else break e}}return t}return null}function Pw(e,t){var r=e.sortIndex-t.sortIndex;return r!==0?r:e.id-t.id}var su=[],Nc=[],eqe=1,Zo=null,Ki=3,Rw=!1,Ef=!1,Cy=!1;function IP(e){for(var t=Os(Nc);t!==null;){if(t.callback===null)Ow(Nc);else if(t.startTime<=e)Ow(Nc),t.sortIndex=t.expirationTime,TP(su,t);else break;t=Os(Nc)}}function CP(e){if(Cy=!1,IP(e),!Ef)if(Os(su)!==null)Ef=!0,Rd(AP);else{var t=Os(Nc);t!==null&&Iy(CP,t.startTime-e)}}function AP(e,t){Ef=!1,Cy&&(Cy=!1,Mw()),Rw=!0;var r=Ki;try{for(IP(t),Zo=Os(su);Zo!==null&&(!(Zo.expirationTime>t)||e&&!Ir.unstable_shouldYield());){var n=Zo.callback;if(typeof n=="function"){Zo.callback=null,Ki=Zo.priorityLevel;var i=n(Zo.expirationTime<=t);t=Ir.unstable_now(),typeof i=="function"?Zo.callback=i:Zo===Os(su)&&Ow(su),IP(t)}else Ow(su);Zo=Os(su)}if(Zo!==null)var a=!0;else{var h=Os(Nc);h!==null&&Iy(CP,h.startTime-t),a=!1}return a}finally{Zo=null,Ki=r,Rw=!1}}var tqe=SP;Ir.unstable_IdlePriority=5;Ir.unstable_ImmediatePriority=1;Ir.unstable_LowPriority=4;Ir.unstable_NormalPriority=3;Ir.unstable_Profiling=null;Ir.unstable_UserBlockingPriority=2;Ir.unstable_cancelCallback=function(e){e.callback=null};Ir.unstable_continueExecution=function(){Ef||Rw||(Ef=!0,Rd(AP))};Ir.unstable_getCurrentPriorityLevel=function(){return Ki};Ir.unstable_getFirstCallbackNode=function(){return Os(su)};Ir.unstable_next=function(e){switch(Ki){case 1:case 2:case 3:var t=3;break;default:t=Ki;}var r=Ki;Ki=t;try{return e()}finally{Ki=r}};Ir.unstable_pauseExecution=function(){};Ir.unstable_requestPaint=tqe;Ir.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3;}var r=Ki;Ki=e;try{return t()}finally{Ki=r}};Ir.unstable_scheduleCallback=function(e,t,r){var n=Ir.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3;}return i=r+i,e={id:eqe++,callback:t,priorityLevel:e,startTime:r,expirationTime:i,sortIndex:-1},r>n?(e.sortIndex=r,TP(Nc,e),Os(su)===null&&e===Os(Nc)&&(Cy?Mw():Cy=!0,Iy(CP,r-n))):(e.sortIndex=i,TP(su,e),Ef||Rw||(Ef=!0,Rd(AP))),e};Ir.unstable_wrapCallback=function(e){var t=Ki;return function(){var r=Ki;Ki=t;try{return e.apply(this,arguments)}finally{Ki=r}}}});var U5=T((skt,B5)=>{"use strict";B5.exports=j5()});var A$=T(Qo=>{"use strict";var Ib=Yt(),ln=hP(),mi=U5();function Ze(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Ib)throw Error(Ze(227));var tV=new Set,n_={};function Df(e,t){em(e,t),em(e+"Capture",t)}function em(e,t){for(n_[e]=t,e=0;e<t.length;e++)tV.add(t[e])}var dl=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),rqe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,V5=Object.prototype.hasOwnProperty,$5={},G5={};function nqe(e){return V5.call(G5,e)?!0:V5.call($5,e)?!1:rqe.test(e)?G5[e]=!0:($5[e]=!0,!1)}function iqe(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1;}}function aqe(e,t,r,n){if(t===null||typeof t=="undefined"||iqe(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t;}return!1}function Sa(e,t,r,n,i,a,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=h}var qi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qi[e]=new Sa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qi[t]=new Sa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qi[e]=new Sa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qi[e]=new Sa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qi[e]=new Sa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qi[e]=new Sa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qi[e]=new Sa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qi[e]=new Sa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qi[e]=new Sa(e,5,!1,e.toLowerCase(),null,!1,!1)});var NM=/[\-:]([a-z])/g;function FM(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(NM,FM);qi[t]=new Sa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(NM,FM);qi[t]=new Sa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(NM,FM);qi[t]=new Sa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qi[e]=new Sa(e,1,!1,e.toLowerCase(),null,!1,!1)});qi.xlinkHref=new Sa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qi[e]=new Sa(e,1,!1,e.toLowerCase(),null,!0,!0)});function zM(e,t,r,n){var i=qi.hasOwnProperty(t)?qi[t]:null,a=i!==null?i.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");a||(aqe(t,r,i,n)&&(r=null),n||i===null?nqe(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Lf=Ib.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jy=60103,Tf=60106,zc=60107,jM=60108,Gy=60114,BM=60109,UM=60110,Cb=60112,Wy=60113,nb=60120,Ab=60115,VM=60116,$M=60121,GM=60128,rV=60129,WM=60130,YP=60131;typeof Symbol=="function"&&Symbol.for&&(Yn=Symbol.for,jy=Yn("react.element"),Tf=Yn("react.portal"),zc=Yn("react.fragment"),jM=Yn("react.strict_mode"),Gy=Yn("react.profiler"),BM=Yn("react.provider"),UM=Yn("react.context"),Cb=Yn("react.forward_ref"),Wy=Yn("react.suspense"),nb=Yn("react.suspense_list"),Ab=Yn("react.memo"),VM=Yn("react.lazy"),$M=Yn("react.block"),Yn("react.scope"),GM=Yn("react.opaque.id"),rV=Yn("react.debug_trace_mode"),WM=Yn("react.offscreen"),YP=Yn("react.legacy_hidden"));var Yn,W5=typeof Symbol=="function"&&Symbol.iterator;function Ay(e){return e===null||typeof e!="object"?null:(e=W5&&e[W5]||e["@@iterator"],typeof e=="function"?e:null)}var qP;function By(e){if(qP===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);qP=t&&t[1]||""}return`
`+qP+e}var PP=!1;function Dw(e,t){if(!e||PP)return"";PP=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var n=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){n=g}e.call(t.prototype)}}else{try{throw Error()}catch(g){n=g}e()}}catch(g){if(g&&n&&typeof g.stack=="string"){for(var i=g.stack.split(`
`),a=n.stack.split(`
`),h=i.length-1,p=a.length-1;1<=h&&0<=p&&i[h]!==a[p];)p--;for(;1<=h&&0<=p;h--,p--)if(i[h]!==a[p]){if(h!==1||p!==1)do if(h--,p--,0>p||i[h]!==a[p])return`
`+i[h].replace(" at new "," at ");while(1<=h&&0<=p);break}}}finally{PP=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?By(e):""}function oqe(e){switch(e.tag){case 5:return By(e.type);case 16:return By("Lazy");case 13:return By("Suspense");case 19:return By("SuspenseList");case 0:case 2:case 15:return e=Dw(e.type,!1),e;case 11:return e=Dw(e.type.render,!1),e;case 22:return e=Dw(e.type._render,!1),e;case 1:return e=Dw(e.type,!0),e;default:return"";}}function $d(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zc:return"Fragment";case Tf:return"Portal";case Gy:return"Profiler";case jM:return"StrictMode";case Wy:return"Suspense";case nb:return"SuspenseList";}if(typeof e=="object")switch(e.$$typeof){case UM:return(e.displayName||"Context")+".Consumer";case BM:return(e._context.displayName||"Context")+".Provider";case Cb:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case Ab:return $d(e.type);case $M:return $d(e._render);case VM:t=e._payload,e=e._init;try{return $d(e(t))}catch(r){}}return null}function Yc(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return"";}}function nV(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sqe(e){var t=nV(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(h){n=""+h,a.call(this,h)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Lw(e){e._valueTracker||(e._valueTracker=sqe(e))}function iV(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=nV(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ib(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function JP(e,t){var r=t.checked;return ln({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function Z5(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Yc(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function aV(e,t){t=t.checked,t!=null&&zM(e,"checked",t,!1)}function QP(e,t){aV(e,t);var r=Yc(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?eM(e,t.type,r):t.hasOwnProperty("defaultValue")&&eM(e,t.type,Yc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function H5(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function eM(e,t,r){(t!=="number"||ib(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function uqe(e){var t="";return Ib.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function tM(e,t){return e=ln({children:void 0},t),(t=uqe(t.children))&&(e.children=t),e}function Gd(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Yc(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function rM(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ze(91));return ln({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function K5(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ze(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(Ze(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Yc(r)}}function oV(e,t){var r=Yc(t.value),n=Yc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function X5(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var nM={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function sV(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml";}}function iM(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sV(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var kw,uV=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!==nM.svg||"innerHTML"in e)e.innerHTML=t;else{for(kw=kw||document.createElement("div"),kw.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=kw.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function i_(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Zy={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lqe=["Webkit","ms","Moz","O"];Object.keys(Zy).forEach(function(e){lqe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zy[t]=Zy[e]})});function lV(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Zy.hasOwnProperty(e)&&Zy[e]?(""+t).trim():t+"px"}function cV(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=lV(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var cqe=ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aM(e,t){if(t){if(cqe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ze(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ze(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(Ze(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ze(62))}}function oM(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0;}}function ZM(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sM=null,Wd=null,Zd=null;function Y5(e){if(e=y_(e)){if(typeof sM!="function")throw Error(Ze(280));var t=e.stateNode;t&&(t=Db(t),sM(e.stateNode,e.type,t))}}function hV(e){Wd?Zd?Zd.push(e):Zd=[e]:Wd=e}function fV(){if(Wd){var e=Wd,t=Zd;if(Zd=Wd=null,Y5(e),t)for(e=0;e<t.length;e++)Y5(t[e])}}function HM(e,t){return e(t)}function pV(e,t,r,n,i){return e(t,r,n,i)}function KM(){}var dV=HM,If=!1,MP=!1;function XM(){(Wd!==null||Zd!==null)&&(KM(),fV())}function hqe(e,t,r){if(MP)return e(t,r);MP=!0;try{return dV(e,t,r)}finally{MP=!1,XM()}}function a_(e,t){var r=e.stateNode;if(r===null)return null;var n=Db(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1;}if(e)return null;if(r&&typeof r!="function")throw Error(Ze(231,t,typeof r));return r}var uM=!1;if(dl)try{Dd={},Object.defineProperty(Dd,"passive",{get:function(){uM=!0}}),window.addEventListener("test",Dd,Dd),window.removeEventListener("test",Dd,Dd)}catch(e){uM=!1}var Dd;function fqe(e,t,r,n,i,a,h,p,g){var b=Array.prototype.slice.call(arguments,3);try{t.apply(r,b)}catch(E){this.onError(E)}}var Hy=!1,ab=null,ob=!1,lM=null,pqe={onError:function(e){Hy=!0,ab=e}};function dqe(e,t,r,n,i,a,h,p,g){Hy=!1,ab=null,fqe.apply(pqe,arguments)}function mqe(e,t,r,n,i,a,h,p,g){if(dqe.apply(this,arguments),Hy){if(Hy){var b=ab;Hy=!1,ab=null}else throw Error(Ze(198));ob||(ob=!0,lM=b)}}function kf(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&1026&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function mV(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function J5(e){if(kf(e)!==e)throw Error(Ze(188))}function vqe(e){var t=e.alternate;if(!t){if(t=kf(e),t===null)throw Error(Ze(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return J5(i),e;if(a===n)return J5(i),t;a=a.sibling}throw Error(Ze(188))}if(r.return!==n.return)r=i,n=a;else{for(var h=!1,p=i.child;p;){if(p===r){h=!0,r=i,n=a;break}if(p===n){h=!0,n=i,r=a;break}p=p.sibling}if(!h){for(p=a.child;p;){if(p===r){h=!0,r=a,n=i;break}if(p===n){h=!0,n=a,r=i;break}p=p.sibling}if(!h)throw Error(Ze(189))}}if(r.alternate!==n)throw Error(Ze(190))}if(r.tag!==3)throw Error(Ze(188));return r.stateNode.current===r?e:t}function vV(e){if(e=vqe(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Q5(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var gV,YM,yV,_V,cM=!1,uu=[],Vc=null,$c=null,Gc=null,o_=new Map,s_=new Map,qy=[],e6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hM(e,t,r,n,i){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[n]}}function t6(e,t){switch(e){case"focusin":case"focusout":Vc=null;break;case"dragenter":case"dragleave":$c=null;break;case"mouseover":case"mouseout":Gc=null;break;case"pointerover":case"pointerout":o_.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":s_.delete(t.pointerId);}}function Py(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e=hM(t,r,n,i,a),t!==null&&(t=y_(t),t!==null&&YM(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function gqe(e,t,r,n,i){switch(t){case"focusin":return Vc=Py(Vc,e,t,r,n,i),!0;case"dragenter":return $c=Py($c,e,t,r,n,i),!0;case"mouseover":return Gc=Py(Gc,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return o_.set(a,Py(o_.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,s_.set(a,Py(s_.get(a)||null,e,t,r,n,i)),!0;}return!1}function yqe(e){var t=Cf(e.target);if(t!==null){var r=kf(t);if(r!==null){if(t=r.tag,t===13){if(t=mV(r),t!==null){e.blockedOn=t,_V(e.lanePriority,function(){mi.unstable_runWithPriority(e.priority,function(){yV(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zw(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=t2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=y_(r),t!==null&&YM(t),e.blockedOn=r,!1;t.shift()}return!0}function r6(e,t,r){Zw(e)&&r.delete(t)}function _qe(){for(cM=!1;0<uu.length;){var e=uu[0];if(e.blockedOn!==null){e=y_(e.blockedOn),e!==null&&gV(e);break}for(var t=e.targetContainers;0<t.length;){var r=t2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&uu.shift()}Vc!==null&&Zw(Vc)&&(Vc=null),$c!==null&&Zw($c)&&($c=null),Gc!==null&&Zw(Gc)&&(Gc=null),o_.forEach(r6),s_.forEach(r6)}function My(e,t){e.blockedOn===t&&(e.blockedOn=null,cM||(cM=!0,mi.unstable_scheduleCallback(mi.unstable_NormalPriority,_qe)))}function xV(e){function t(i){return My(i,e)}if(0<uu.length){My(uu[0],e);for(var r=1;r<uu.length;r++){var n=uu[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Vc!==null&&My(Vc,e),$c!==null&&My($c,e),Gc!==null&&My(Gc,e),o_.forEach(t),s_.forEach(t),r=0;r<qy.length;r++)n=qy[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<qy.length&&(r=qy[0],r.blockedOn===null);)yqe(r),r.blockedOn===null&&qy.shift()}function Nw(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Fd={animationend:Nw("Animation","AnimationEnd"),animationiteration:Nw("Animation","AnimationIteration"),animationstart:Nw("Animation","AnimationStart"),transitionend:Nw("Transition","TransitionEnd")},OP={},wV={};dl&&(wV=document.createElement("div").style,"AnimationEvent"in window||(delete Fd.animationend.animation,delete Fd.animationiteration.animation,delete Fd.animationstart.animation),"TransitionEvent"in window||delete Fd.transitionend.transition);function qb(e){if(OP[e])return OP[e];if(!Fd[e])return e;var t=Fd[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in wV)return OP[e]=t[r];return e}var bV=qb("animationend"),EV=qb("animationiteration"),SV=qb("animationstart"),TV=qb("transitionend"),IV=new Map,JM=new Map,xqe=["abort","abort",bV,"animationEnd",EV,"animationIteration",SV,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",TV,"transitionEnd","waiting","waiting"];function QM(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),JM.set(n,t),IV.set(n,i),Df(i,[n])}}var wqe=mi.unstable_now;wqe();var Vr=8;function kd(e){if(1&e)return Vr=15,1;if(2&e)return Vr=14,2;if(4&e)return Vr=13,4;var t=24&e;return t!==0?(Vr=12,t):e&32?(Vr=11,32):(t=192&e,t!==0?(Vr=10,t):e&256?(Vr=9,256):(t=3584&e,t!==0?(Vr=8,t):e&4096?(Vr=7,4096):(t=4186112&e,t!==0?(Vr=6,t):(t=62914560&e,t!==0?(Vr=5,t):e&67108864?(Vr=4,67108864):e&134217728?(Vr=3,134217728):(t=805306368&e,t!==0?(Vr=2,t):1073741824&e?(Vr=1,1073741824):(Vr=8,e))))))}function bqe(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0;}}function Eqe(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Ze(358,e));}}function u_(e,t){var r=e.pendingLanes;if(r===0)return Vr=0;var n=0,i=0,a=e.expiredLanes,h=e.suspendedLanes,p=e.pingedLanes;if(a!==0)n=a,i=Vr=15;else if(a=r&134217727,a!==0){var g=a&~h;g!==0?(n=kd(g),i=Vr):(p&=a,p!==0&&(n=kd(p),i=Vr))}else a=r&~h,a!==0?(n=kd(a),i=Vr):p!==0&&(n=kd(p),i=Vr);if(n===0)return 0;if(n=31-Jc(n),n=r&((0>n?0:1<<n)<<1)-1,t!==0&&t!==n&&!(t&h)){if(kd(t),i<=Vr)return t;Vr=i}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Jc(t),i=1<<r,n|=e[r],t&=~i;return n}function CV(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sb(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=Nd(24&~t),e===0?sb(10,t):e;case 10:return e=Nd(192&~t),e===0?sb(8,t):e;case 8:return e=Nd(3584&~t),e===0&&(e=Nd(4186112&~t),e===0&&(e=512)),e;case 2:return t=Nd(805306368&~t),t===0&&(t=268435456),t;}throw Error(Ze(358,e))}function Nd(e){return e&-e}function RP(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Pb(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,e=e.eventTimes,t=31-Jc(t),e[t]=r}var Jc=Math.clz32?Math.clz32:Iqe,Sqe=Math.log,Tqe=Math.LN2;function Iqe(e){return e===0?32:31-(Sqe(e)/Tqe|0)|0}var Cqe=mi.unstable_UserBlockingPriority,Aqe=mi.unstable_runWithPriority,Hw=!0;function qqe(e,t,r,n){If||KM();var i=e2,a=If;If=!0;try{pV(i,e,t,r,n)}finally{(If=a)||XM()}}function Pqe(e,t,r,n){Aqe(Cqe,e2.bind(null,e,t,r,n))}function e2(e,t,r,n){if(Hw){var i;if((i=(t&4)===0)&&0<uu.length&&-1<e6.indexOf(e))e=hM(null,e,t,r,n),uu.push(e);else{var a=t2(e,t,r,n);if(a===null)i&&t6(e,n);else{if(i){if(-1<e6.indexOf(e)){e=hM(a,e,t,r,n),uu.push(e);return}if(gqe(a,e,t,r,n))return;t6(e,n)}jV(e,t,n,null,r)}}}}function t2(e,t,r,n){var i=ZM(n);if(i=Cf(i),i!==null){var a=kf(i);if(a===null)i=null;else{var h=a.tag;if(h===13){if(i=mV(a),i!==null)return i;i=null}else if(h===3){if(a.stateNode.hydrate)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return jV(e,t,n,i,r),null}var jc=null,r2=null,Kw=null;function AV(){if(Kw)return Kw;var e,t=r2,r=t.length,n,i="value"in jc?jc.value:jc.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var h=r-e;for(n=1;n<=h&&t[r-n]===i[a-n];n++);return Kw=i.slice(e,1<n?1-n:void 0)}function Xw(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fw(){return!0}function n6(){return!1}function qo(e){function t(r,n,i,a,h){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=h,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(r=e[p],this[p]=r?r(a):a[p]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Fw:n6,this.isPropagationStopped=n6,this}return ln(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fw)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fw)},persist:function(){},isPersistent:Fw}),t}var im={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},n2=qo(im),g_=ln({},im,{view:0,detail:0}),Mqe=qo(g_),DP,LP,Oy,Mb=ln({},g_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:i2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oy&&(Oy&&e.type==="mousemove"?(DP=e.screenX-Oy.screenX,LP=e.screenY-Oy.screenY):LP=DP=0,Oy=e),DP)},movementY:function(e){return"movementY"in e?e.movementY:LP}}),i6=qo(Mb),Oqe=ln({},Mb,{dataTransfer:0}),Rqe=qo(Oqe),Dqe=ln({},g_,{relatedTarget:0}),kP=qo(Dqe),Lqe=ln({},im,{animationName:0,elapsedTime:0,pseudoElement:0}),kqe=qo(Lqe),Nqe=ln({},im,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fqe=qo(Nqe),zqe=ln({},im,{data:0}),a6=qo(zqe),jqe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bqe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uqe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vqe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Uqe[e])?!!t[e]:!1}function i2(){return Vqe}var $qe=ln({},g_,{key:function(e){if(e.key){var t=jqe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xw(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Bqe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:i2,charCode:function(e){return e.type==="keypress"?Xw(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xw(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Gqe=qo($qe),Wqe=ln({},Mb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o6=qo(Wqe),Zqe=ln({},g_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:i2}),Hqe=qo(Zqe),Kqe=ln({},im,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xqe=qo(Kqe),Yqe=ln({},Mb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jqe=qo(Yqe),Qqe=[9,13,27,32],a2=dl&&"CompositionEvent"in window,Ky=null;dl&&"documentMode"in document&&(Ky=document.documentMode);var ePe=dl&&"TextEvent"in window&&!Ky,qV=dl&&(!a2||Ky&&8<Ky&&11>=Ky),s6=" ",u6=!1;function PV(e,t){switch(e){case"keyup":return Qqe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1;}}function MV(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zd=!1;function tPe(e,t){switch(e){case"compositionend":return MV(t);case"keypress":return t.which!==32?null:(u6=!0,s6);case"textInput":return e=t.data,e===s6&&u6?null:e;default:return null;}}function rPe(e,t){if(zd)return e==="compositionend"||!a2&&PV(e,t)?(e=AV(),Kw=r2=jc=null,zd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qV&&t.locale!=="ko"?null:t.data;default:return null;}}var nPe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l6(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nPe[e.type]:t==="textarea"}function OV(e,t,r,n){hV(n),t=ub(t,"onChange"),0<t.length&&(r=new n2("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Xy=null,l_=null;function iPe(e){NV(e,0)}function Ob(e){var t=Bd(e);if(iV(t))return e}function aPe(e,t){if(e==="change")return t}var RV=!1;dl&&(dl?(jw="oninput"in document,jw||(NP=document.createElement("div"),NP.setAttribute("oninput","return;"),jw=typeof NP.oninput=="function"),zw=jw):zw=!1,RV=zw&&(!document.documentMode||9<document.documentMode));var zw,jw,NP;function c6(){Xy&&(Xy.detachEvent("onpropertychange",DV),l_=Xy=null)}function DV(e){if(e.propertyName==="value"&&Ob(l_)){var t=[];if(OV(t,l_,e,ZM(e)),e=iPe,If)e(t);else{If=!0;try{HM(e,t)}finally{If=!1,XM()}}}}function oPe(e,t,r){e==="focusin"?(c6(),Xy=t,l_=r,Xy.attachEvent("onpropertychange",DV)):e==="focusout"&&c6()}function sPe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ob(l_)}function uPe(e,t){if(e==="click")return Ob(t)}function lPe(e,t){if(e==="input"||e==="change")return Ob(t)}function cPe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ho=typeof Object.is=="function"?Object.is:cPe,hPe=Object.prototype.hasOwnProperty;function c_(e,t){if(Ho(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!hPe.call(t,r[n])||!Ho(e[r[n]],t[r[n]]))return!1;return!0}function h6(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function f6(e,t){var r=h6(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=h6(r)}}function LV(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?LV(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function p6(){for(var e=window,t=ib();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch(n){r=!1}if(r)e=t.contentWindow;else break;t=ib(e.document)}return t}function fM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var fPe=dl&&"documentMode"in document&&11>=document.documentMode,jd=null,pM=null,Yy=null,dM=!1;function d6(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;dM||jd==null||jd!==ib(n)||(n=jd,"selectionStart"in n&&fM(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Yy&&c_(Yy,n)||(Yy=n,n=ub(pM,"onSelect"),0<n.length&&(t=new n2("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=jd)))}QM("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);QM("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);QM(xqe,2);for(FP="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Bw=0;Bw<FP.length;Bw++)JM.set(FP[Bw],0);var FP,Bw;em("onMouseEnter",["mouseout","mouseover"]);em("onMouseLeave",["mouseout","mouseover"]);em("onPointerEnter",["pointerout","pointerover"]);em("onPointerLeave",["pointerout","pointerover"]);Df("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Df("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Df("onBeforeInput",["compositionend","keypress","textInput","paste"]);Df("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Df("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Df("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uy));function m6(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,mqe(n,t,void 0,e),e.currentTarget=null}function NV(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var h=n.length-1;0<=h;h--){var p=n[h],g=p.instance,b=p.currentTarget;if(p=p.listener,g!==a&&i.isPropagationStopped())break e;m6(i,p,b),a=g}else for(h=0;h<n.length;h++){if(p=n[h],g=p.instance,b=p.currentTarget,p=p.listener,g!==a&&i.isPropagationStopped())break e;m6(i,p,b),a=g}}}if(ob)throw e=lM,ob=!1,lM=null,e}function Jr(e,t){var r=UV(t),n=e+"__bubble";r.has(n)||(zV(t,e,2,!1),r.add(n))}var v6="_reactListening"+Math.random().toString(36).slice(2);function FV(e){e[v6]||(e[v6]=!0,tV.forEach(function(t){kV.has(t)||g6(t,!1,e,null),g6(t,!0,e,null)}))}function g6(e,t,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,a=r;if(e==="selectionchange"&&r.nodeType!==9&&(a=r.ownerDocument),n!==null&&!t&&kV.has(e)){if(e!=="scroll")return;i|=2,a=n}var h=UV(a),p=e+"__"+(t?"capture":"bubble");h.has(p)||(t&&(i|=4),zV(a,e,i,t),h.add(p))}function zV(e,t,r,n){var i=JM.get(t);switch(i===void 0?2:i){case 0:i=qqe;break;case 1:i=Pqe;break;default:i=e2;}r=i.bind(null,t,r,e),i=void 0,!uM||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function jV(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var h=n.tag;if(h===3||h===4){var p=n.stateNode.containerInfo;if(p===i||p.nodeType===8&&p.parentNode===i)break;if(h===4)for(h=n.return;h!==null;){var g=h.tag;if((g===3||g===4)&&(g=h.stateNode.containerInfo,g===i||g.nodeType===8&&g.parentNode===i))return;h=h.return}for(;p!==null;){if(h=Cf(p),h===null)return;if(g=h.tag,g===5||g===6){n=a=h;continue e}p=p.parentNode}}n=n.return}hqe(function(){var b=a,E=ZM(r),q=[];e:{var P=IV.get(e);if(P!==void 0){var L=n2,W=e;switch(e){case"keypress":if(Xw(r)===0)break e;case"keydown":case"keyup":L=Gqe;break;case"focusin":W="focus",L=kP;break;case"focusout":W="blur",L=kP;break;case"beforeblur":case"afterblur":L=kP;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=i6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=Rqe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=Hqe;break;case bV:case EV:case SV:L=kqe;break;case TV:L=Xqe;break;case"scroll":L=Mqe;break;case"wheel":L=Jqe;break;case"copy":case"cut":case"paste":L=Fqe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=o6;}var Q=(t&4)!==0,V=!Q&&e==="scroll",$=Q?P!==null?P+"Capture":null:P;Q=[];for(var H=b,re;H!==null;){re=H;var se=re.stateNode;if(re.tag===5&&se!==null&&(re=se,$!==null&&(se=a_(H,$),se!=null&&Q.push(h_(H,se,re)))),V)break;H=H.return}0<Q.length&&(P=new L(P,W,null,r,E),q.push({event:P,listeners:Q}))}}if(!(t&7)){e:{if(P=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",P&&!(t&16)&&(W=r.relatedTarget||r.fromElement)&&(Cf(W)||W[am]))break e;if((L||P)&&(P=E.window===E?E:(P=E.ownerDocument)?P.defaultView||P.parentWindow:window,L?(W=r.relatedTarget||r.toElement,L=b,W=W?Cf(W):null,W!==null&&(V=kf(W),W!==V||W.tag!==5&&W.tag!==6)&&(W=null)):(L=null,W=b),L!==W)){if(Q=i6,se="onMouseLeave",$="onMouseEnter",H="mouse",(e==="pointerout"||e==="pointerover")&&(Q=o6,se="onPointerLeave",$="onPointerEnter",H="pointer"),V=L==null?P:Bd(L),re=W==null?P:Bd(W),P=new Q(se,H+"leave",L,r,E),P.target=V,P.relatedTarget=re,se=null,Cf(E)===b&&(Q=new Q($,H+"enter",W,r,E),Q.target=re,Q.relatedTarget=V,se=Q),V=se,L&&W)t:{for(Q=L,$=W,H=0,re=Q;re;re=Ld(re))H++;for(re=0,se=$;se;se=Ld(se))re++;for(;0<H-re;)Q=Ld(Q),H--;for(;0<re-H;)$=Ld($),re--;for(;H--;){if(Q===$||$!==null&&Q===$.alternate)break t;Q=Ld(Q),$=Ld($)}Q=null}else Q=null;L!==null&&y6(q,P,L,Q,!1),W!==null&&V!==null&&y6(q,V,W,Q,!0)}}e:{if(P=b?Bd(b):window,L=P.nodeName&&P.nodeName.toLowerCase(),L==="select"||L==="input"&&P.type==="file")var Ie=aPe;else if(l6(P)){if(RV)Ie=lPe;else{Ie=sPe;var qe=oPe}}else(L=P.nodeName)&&L.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(Ie=uPe);if(Ie&&(Ie=Ie(e,b))){OV(q,Ie,r,E);break e}qe&&qe(e,P,b),e==="focusout"&&(qe=P._wrapperState)&&qe.controlled&&P.type==="number"&&eM(P,"number",P.value)}switch(qe=b?Bd(b):window,e){case"focusin":(l6(qe)||qe.contentEditable==="true")&&(jd=qe,pM=b,Yy=null);break;case"focusout":Yy=pM=jd=null;break;case"mousedown":dM=!0;break;case"contextmenu":case"mouseup":case"dragend":dM=!1,d6(q,r,E);break;case"selectionchange":if(fPe)break;case"keydown":case"keyup":d6(q,r,E);}var Ae;if(a2)e:{switch(e){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e;}Ue=void 0}else zd?PV(e,r)&&(Ue="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Ue="onCompositionStart");Ue&&(qV&&r.locale!=="ko"&&(zd||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&zd&&(Ae=AV()):(jc=E,r2="value"in jc?jc.value:jc.textContent,zd=!0)),qe=ub(b,Ue),0<qe.length&&(Ue=new a6(Ue,e,null,r,E),q.push({event:Ue,listeners:qe}),Ae?Ue.data=Ae:(Ae=MV(r),Ae!==null&&(Ue.data=Ae)))),(Ae=ePe?tPe(e,r):rPe(e,r))&&(b=ub(b,"onBeforeInput"),0<b.length&&(E=new a6("onBeforeInput","beforeinput",null,r,E),q.push({event:E,listeners:b}),E.data=Ae))}NV(q,t)})}function h_(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ub(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=a_(e,r),a!=null&&n.unshift(h_(e,a,i)),a=a_(e,t),a!=null&&n.push(h_(e,a,i))),e=e.return}return n}function Ld(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function y6(e,t,r,n,i){for(var a=t._reactName,h=[];r!==null&&r!==n;){var p=r,g=p.alternate,b=p.stateNode;if(g!==null&&g===n)break;p.tag===5&&b!==null&&(p=b,i?(g=a_(r,a),g!=null&&h.unshift(h_(r,g,p))):i||(g=a_(r,a),g!=null&&h.push(h_(r,g,p)))),r=r.return}h.length!==0&&e.push({event:t,listeners:h})}function lb(){}var zP=null,jP=null;function BV(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus;}return!1}function mM(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _6=typeof setTimeout=="function"?setTimeout:void 0,pPe=typeof clearTimeout=="function"?clearTimeout:void 0;function o2(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function Hd(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function x6(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var BP=0;function dPe(e){return{$$typeof:GM,toString:e,valueOf:e}}var Rb=Math.random().toString(36).slice(2),Bc="__reactFiber$"+Rb,cb="__reactProps$"+Rb,am="__reactContainer$"+Rb,w6="__reactEvents$"+Rb;function Cf(e){var t=e[Bc];if(t)return t;for(var r=e.parentNode;r;){if(t=r[am]||r[Bc]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=x6(e);e!==null;){if(r=e[Bc])return r;e=x6(e)}return t}e=r,r=e.parentNode}return null}function y_(e){return e=e[Bc]||e[am],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Bd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ze(33))}function Db(e){return e[cb]||null}function UV(e){var t=e[w6];return t===void 0&&(t=e[w6]=new Set),t}var vM=[],Ud=-1;function rh(e){return{current:e}}function Qr(e){0>Ud||(e.current=vM[Ud],vM[Ud]=null,Ud--)}function In(e,t){Ud++,vM[Ud]=e.current,e.current=t}var Qc={},Qi=rh(Qc),Wa=rh(!1),Mf=Qc;function tm(e,t){var r=e.type.contextTypes;if(!r)return Qc;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Za(e){return e=e.childContextTypes,e!=null}function hb(){Qr(Wa),Qr(Qi)}function b6(e,t,r){if(Qi.current!==Qc)throw Error(Ze(168));In(Qi,t),In(Wa,r)}function VV(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Ze(108,$d(t)||"Unknown",i));return ln({},r,n)}function Yw(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qc,Mf=Qi.current,In(Qi,e),In(Wa,Wa.current),!0}function E6(e,t,r){var n=e.stateNode;if(!n)throw Error(Ze(169));r?(e=VV(e,t,Mf),n.__reactInternalMemoizedMergedChildContext=e,Qr(Wa),Qr(Qi),In(Qi,e)):Qr(Wa),In(Wa,r)}var s2=null,Pf=null,mPe=mi.unstable_runWithPriority,u2=mi.unstable_scheduleCallback,gM=mi.unstable_cancelCallback,vPe=mi.unstable_shouldYield,S6=mi.unstable_requestPaint,yM=mi.unstable_now,gPe=mi.unstable_getCurrentPriorityLevel,Lb=mi.unstable_ImmediatePriority,$V=mi.unstable_UserBlockingPriority,GV=mi.unstable_NormalPriority,WV=mi.unstable_LowPriority,ZV=mi.unstable_IdlePriority,UP={},yPe=S6!==void 0?S6:function(){},ll=null,Jw=null,VP=!1,T6=yM(),Yi=1e4>T6?yM:function(){return yM()-T6};function rm(){switch(gPe()){case Lb:return 99;case $V:return 98;case GV:return 97;case WV:return 96;case ZV:return 95;default:throw Error(Ze(332));}}function HV(e){switch(e){case 99:return Lb;case 98:return $V;case 97:return GV;case 96:return WV;case 95:return ZV;default:throw Error(Ze(332));}}function Of(e,t){return e=HV(e),mPe(e,t)}function f_(e,t,r){return e=HV(e),u2(e,t,r)}function pu(){if(Jw!==null){var e=Jw;Jw=null,gM(e)}KV()}function KV(){if(!VP&&ll!==null){VP=!0;var e=0;try{var t=ll;Of(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),ll=null}catch(r){throw ll!==null&&(ll=ll.slice(e+1)),u2(Lb,pu),r}finally{VP=!1}}}var _Pe=Lf.ReactCurrentBatchConfig;function Rs(e,t){if(e&&e.defaultProps){t=ln({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var fb=rh(null),pb=null,Vd=null,db=null;function l2(){db=Vd=pb=null}function c2(e){var t=fb.current;Qr(fb),e.type._context._currentValue=t}function XV(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function Kd(e,t){pb=e,db=Vd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ds=!0),e.firstContext=null)}function Yo(e,t){if(db!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(db=e,t=1073741823),t={context:e,observedBits:t,next:null},Vd===null){if(pb===null)throw Error(Ze(308));Vd=t,pb.dependencies={lanes:0,firstContext:t,responders:null}}else Vd=Vd.next=t;return e._currentValue}var Fc=!1;function h2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function YV(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zc(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function I6(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var h={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=h:a=a.next=h,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function p_(e,t,r,n){var i=e.updateQueue;Fc=!1;var a=i.firstBaseUpdate,h=i.lastBaseUpdate,p=i.shared.pending;if(p!==null){i.shared.pending=null;var g=p,b=g.next;g.next=null,h===null?a=b:h.next=b,h=g;var E=e.alternate;if(E!==null){E=E.updateQueue;var q=E.lastBaseUpdate;q!==h&&(q===null?E.firstBaseUpdate=b:q.next=b,E.lastBaseUpdate=g)}}if(a!==null){q=i.baseState,h=0,E=b=g=null;do{p=a.lane;var P=a.eventTime;if((n&p)===p){E!==null&&(E=E.next={eventTime:P,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var L=e,W=a;switch(p=t,P=r,W.tag){case 1:if(L=W.payload,typeof L=="function"){q=L.call(P,q,p);break e}q=L;break e;case 3:L.flags=L.flags&-4097|64;case 0:if(L=W.payload,p=typeof L=="function"?L.call(P,q,p):L,p==null)break e;q=ln({},q,p);break e;case 2:Fc=!0;}}a.callback!==null&&(e.flags|=32,p=i.effects,p===null?i.effects=[a]:p.push(a))}else P={eventTime:P,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},E===null?(b=E=P,g=q):E=E.next=P,h|=p;if(a=a.next,a===null){if(p=i.shared.pending,p===null)break;a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);E===null&&(g=q),i.baseState=g,i.firstBaseUpdate=b,i.lastBaseUpdate=E,x_|=h,e.lanes=h,e.memoizedState=q}}function C6(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Ze(191,i));i.call(n)}}}var JV=new Ib.Component().refs;function mb(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ln({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var kb={isMounted:function(e){return(e=e._reactInternals)?kf(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ao(),i=Hc(e),a=Wc(n,i);a.payload=t,r!=null&&(a.callback=r),Zc(e,a),Kc(e,i,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ao(),i=Hc(e),a=Wc(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),Zc(e,a),Kc(e,i,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ao(),n=Hc(e),i=Wc(r,n);i.tag=2,t!=null&&(i.callback=t),Zc(e,i),Kc(e,n,r)}};function A6(e,t,r,n,i,a,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,h):t.prototype&&t.prototype.isPureReactComponent?!c_(r,n)||!c_(i,a):!0}function QV(e,t,r){var n=!1,i=Qc,a=t.contextType;return typeof a=="object"&&a!==null?a=Yo(a):(i=Za(t)?Mf:Qi.current,n=t.contextTypes,a=(n=n!=null)?tm(e,i):Qc),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=kb,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function q6(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&kb.enqueueReplaceState(t,t.state,null)}function _M(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=JV,h2(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Yo(a):(a=Za(t)?Mf:Qi.current,i.context=tm(e,a)),p_(e,r,i,n),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(mb(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&kb.enqueueReplaceState(i,i.state,null),p_(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4)}var Uw=Array.isArray;function Ry(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ze(309));var n=r.stateNode}if(!n)throw Error(Ze(147,e));var i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var h=n.refs;h===JV&&(h=n.refs={}),a===null?delete h[i]:h[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ze(284));if(!r._owner)throw Error(Ze(290,e))}return e}function Vw(e,t){if(e.type!=="textarea")throw Error(Ze(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function e$(e){function t(V,$){if(e){var H=V.lastEffect;H!==null?(H.nextEffect=$,V.lastEffect=$):V.firstEffect=V.lastEffect=$,$.nextEffect=null,$.flags=8}}function r(V,$){if(!e)return null;for(;$!==null;)t(V,$),$=$.sibling;return null}function n(V,$){for(V=new Map;$!==null;)$.key!==null?V.set($.key,$):V.set($.index,$),$=$.sibling;return V}function i(V,$){return V=th(V,$),V.index=0,V.sibling=null,V}function a(V,$,H){return V.index=H,e?(H=V.alternate,H!==null?(H=H.index,H<$?(V.flags=2,$):H):(V.flags=2,$)):$}function h(V){return e&&V.alternate===null&&(V.flags=2),V}function p(V,$,H,re){return $===null||$.tag!==6?($=HP(H,V.mode,re),$.return=V,$):($=i($,H),$.return=V,$)}function g(V,$,H,re){return $!==null&&$.elementType===H.type?(re=i($,H.props),re.ref=Ry(V,$,H),re.return=V,re):(re=rb(H.type,H.key,H.props,null,V.mode,re),re.ref=Ry(V,$,H),re.return=V,re)}function b(V,$,H,re){return $===null||$.tag!==4||$.stateNode.containerInfo!==H.containerInfo||$.stateNode.implementation!==H.implementation?($=KP(H,V.mode,re),$.return=V,$):($=i($,H.children||[]),$.return=V,$)}function E(V,$,H,re,se){return $===null||$.tag!==7?($=Qd(H,V.mode,re,se),$.return=V,$):($=i($,H),$.return=V,$)}function q(V,$,H){if(typeof $=="string"||typeof $=="number")return $=HP(""+$,V.mode,H),$.return=V,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case jy:return H=rb($.type,$.key,$.props,null,V.mode,H),H.ref=Ry(V,null,$),H.return=V,H;case Tf:return $=KP($,V.mode,H),$.return=V,$;}if(Uw($)||Ay($))return $=Qd($,V.mode,H,null),$.return=V,$;Vw(V,$)}return null}function P(V,$,H,re){var se=$!==null?$.key:null;if(typeof H=="string"||typeof H=="number")return se!==null?null:p(V,$,""+H,re);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case jy:return H.key===se?H.type===zc?E(V,$,H.props.children,re,se):g(V,$,H,re):null;case Tf:return H.key===se?b(V,$,H,re):null;}if(Uw(H)||Ay(H))return se!==null?null:E(V,$,H,re,null);Vw(V,H)}return null}function L(V,$,H,re,se){if(typeof re=="string"||typeof re=="number")return V=V.get(H)||null,p($,V,""+re,se);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case jy:return V=V.get(re.key===null?H:re.key)||null,re.type===zc?E($,V,re.props.children,se,re.key):g($,V,re,se);case Tf:return V=V.get(re.key===null?H:re.key)||null,b($,V,re,se);}if(Uw(re)||Ay(re))return V=V.get(H)||null,E($,V,re,se,null);Vw($,re)}return null}function W(V,$,H,re){for(var se=null,Ie=null,qe=$,Ae=$=0,Ue=null;qe!==null&&Ae<H.length;Ae++){qe.index>Ae?(Ue=qe,qe=null):Ue=qe.sibling;var Le=P(V,qe,H[Ae],re);if(Le===null){qe===null&&(qe=Ue);break}e&&qe&&Le.alternate===null&&t(V,qe),$=a(Le,$,Ae),Ie===null?se=Le:Ie.sibling=Le,Ie=Le,qe=Ue}if(Ae===H.length)return r(V,qe),se;if(qe===null){for(;Ae<H.length;Ae++)qe=q(V,H[Ae],re),qe!==null&&($=a(qe,$,Ae),Ie===null?se=qe:Ie.sibling=qe,Ie=qe);return se}for(qe=n(V,qe);Ae<H.length;Ae++)Ue=L(qe,V,Ae,H[Ae],re),Ue!==null&&(e&&Ue.alternate!==null&&qe.delete(Ue.key===null?Ae:Ue.key),$=a(Ue,$,Ae),Ie===null?se=Ue:Ie.sibling=Ue,Ie=Ue);return e&&qe.forEach(function($t){return t(V,$t)}),se}function Q(V,$,H,re){var se=Ay(H);if(typeof se!="function")throw Error(Ze(150));if(H=se.call(H),H==null)throw Error(Ze(151));for(var Ie=se=null,qe=$,Ae=$=0,Ue=null,Le=H.next();qe!==null&&!Le.done;Ae++,Le=H.next()){qe.index>Ae?(Ue=qe,qe=null):Ue=qe.sibling;var $t=P(V,qe,Le.value,re);if($t===null){qe===null&&(qe=Ue);break}e&&qe&&$t.alternate===null&&t(V,qe),$=a($t,$,Ae),Ie===null?se=$t:Ie.sibling=$t,Ie=$t,qe=Ue}if(Le.done)return r(V,qe),se;if(qe===null){for(;!Le.done;Ae++,Le=H.next())Le=q(V,Le.value,re),Le!==null&&($=a(Le,$,Ae),Ie===null?se=Le:Ie.sibling=Le,Ie=Le);return se}for(qe=n(V,qe);!Le.done;Ae++,Le=H.next())Le=L(qe,V,Ae,Le.value,re),Le!==null&&(e&&Le.alternate!==null&&qe.delete(Le.key===null?Ae:Le.key),$=a(Le,$,Ae),Ie===null?se=Le:Ie.sibling=Le,Ie=Le);return e&&qe.forEach(function(Rt){return t(V,Rt)}),se}return function(V,$,H,re){var se=typeof H=="object"&&H!==null&&H.type===zc&&H.key===null;se&&(H=H.props.children);var Ie=typeof H=="object"&&H!==null;if(Ie)switch(H.$$typeof){case jy:e:{for(Ie=H.key,se=$;se!==null;){if(se.key===Ie){switch(se.tag){case 7:if(H.type===zc){r(V,se.sibling),$=i(se,H.props.children),$.return=V,V=$;break e}break;default:if(se.elementType===H.type){r(V,se.sibling),$=i(se,H.props),$.ref=Ry(V,se,H),$.return=V,V=$;break e}}r(V,se);break}else t(V,se);se=se.sibling}H.type===zc?($=Qd(H.props.children,V.mode,re,H.key),$.return=V,V=$):(re=rb(H.type,H.key,H.props,null,V.mode,re),re.ref=Ry(V,$,H),re.return=V,V=re)}return h(V);case Tf:e:{for(se=H.key;$!==null;){if($.key===se){if($.tag===4&&$.stateNode.containerInfo===H.containerInfo&&$.stateNode.implementation===H.implementation){r(V,$.sibling),$=i($,H.children||[]),$.return=V,V=$;break e}else{r(V,$);break}}else t(V,$);$=$.sibling}$=KP(H,V.mode,re),$.return=V,V=$}return h(V);}if(typeof H=="string"||typeof H=="number")return H=""+H,$!==null&&$.tag===6?(r(V,$.sibling),$=i($,H),$.return=V,V=$):(r(V,$),$=HP(H,V.mode,re),$.return=V,V=$),h(V);if(Uw(H))return W(V,$,H,re);if(Ay(H))return Q(V,$,H,re);if(Ie&&Vw(V,H),typeof H=="undefined"&&!se)switch(V.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Ze(152,$d(V.type)||"Component"));}return r(V,$)}}var vb=e$(!0),t$=e$(!1),__={},hu=rh(__),d_=rh(__),m_=rh(__);function Af(e){if(e===__)throw Error(Ze(174));return e}function xM(e,t){switch(In(m_,t),In(d_,e),In(hu,__),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:iM(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=iM(t,e);}Qr(hu),In(hu,t)}function nm(){Qr(hu),Qr(d_),Qr(m_)}function P6(e){Af(m_.current);var t=Af(hu.current),r=iM(t,e.type);t!==r&&(In(d_,e),In(hu,r))}function f2(e){d_.current===e&&(Qr(hu),Qr(d_))}var Tn=rh(0);function gb(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hl=null,Uc=null,fu=!1;function r$(e,t){var r=Ko(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function M6(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1;}}function wM(e){if(fu){var t=Uc;if(t){var r=t;if(!M6(e,t)){if(t=Hd(r.nextSibling),!t||!M6(e,t)){e.flags=e.flags&-1025|2,fu=!1,hl=e;return}r$(hl,r)}hl=e,Uc=Hd(t.firstChild)}else e.flags=e.flags&-1025|2,fu=!1,hl=e}}function O6(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;hl=e}function $w(e){if(e!==hl)return!1;if(!fu)return O6(e),fu=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!mM(t,e.memoizedProps))for(t=Uc;t;)r$(e,t),t=Hd(t.nextSibling);if(O6(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ze(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Uc=Hd(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Uc=null}}else Uc=hl?Hd(e.stateNode.nextSibling):null;return!0}function $P(){Uc=hl=null,fu=!1}var Xd=[];function p2(){for(var e=0;e<Xd.length;e++)Xd[e]._workInProgressVersionPrimary=null;Xd.length=0}var Jy=Lf.ReactCurrentDispatcher,Xo=Lf.ReactCurrentBatchConfig,v_=0,Rn=null,Xi=null,Ci=null,yb=!1,Qy=!1;function $a(){throw Error(Ze(321))}function d2(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ho(e[r],t[r]))return!1;return!0}function m2(e,t,r,n,i,a){if(v_=a,Rn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jy.current=e===null||e.memoizedState===null?wPe:bPe,e=r(n,i),Qy){a=0;do{if(Qy=!1,!(25>a))throw Error(Ze(301));a+=1,Ci=Xi=null,t.updateQueue=null,Jy.current=EPe,e=r(n,i)}while(Qy)}if(Jy.current=bb,t=Xi!==null&&Xi.next!==null,v_=0,Ci=Xi=Rn=null,yb=!1,t)throw Error(Ze(300));return e}function qf(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ci===null?Rn.memoizedState=Ci=e:Ci=Ci.next=e,Ci}function Nf(){if(Xi===null){var e=Rn.alternate;e=e!==null?e.memoizedState:null}else e=Xi.next;var t=Ci===null?Rn.memoizedState:Ci.next;if(t!==null)Ci=t,Xi=e;else{if(e===null)throw Error(Ze(310));Xi=e,e={memoizedState:Xi.memoizedState,baseState:Xi.baseState,baseQueue:Xi.baseQueue,queue:Xi.queue,next:null},Ci===null?Rn.memoizedState=Ci=e:Ci=Ci.next=e}return Ci}function lu(e,t){return typeof t=="function"?t(e):t}function Dy(e){var t=Nf(),r=t.queue;if(r===null)throw Error(Ze(311));r.lastRenderedReducer=e;var n=Xi,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var h=i.next;i.next=a.next,a.next=h}n.baseQueue=i=a,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var p=h=a=null,g=i;do{var b=g.lane;if((v_&b)===b)p!==null&&(p=p.next={lane:0,action:g.action,eagerReducer:g.eagerReducer,eagerState:g.eagerState,next:null}),n=g.eagerReducer===e?g.eagerState:e(n,g.action);else{var E={lane:b,action:g.action,eagerReducer:g.eagerReducer,eagerState:g.eagerState,next:null};p===null?(h=p=E,a=n):p=p.next=E,Rn.lanes|=b,x_|=b}g=g.next}while(g!==null&&g!==i);p===null?a=n:p.next=h,Ho(n,t.memoizedState)||(Ds=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=p,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function Ly(e){var t=Nf(),r=t.queue;if(r===null)throw Error(Ze(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var h=i=i.next;do a=e(a,h.action),h=h.next;while(h!==i);Ho(a,t.memoizedState)||(Ds=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function R6(e,t,r){var n=t._getVersion;n=n(t._source);var i=t._workInProgressVersionPrimary;if(i!==null?e=i===n:(e=e.mutableReadLanes,(e=(v_&e)===e)&&(t._workInProgressVersionPrimary=n,Xd.push(t))),e)return r(t._source);throw Xd.push(t),Error(Ze(350))}function n$(e,t,r,n){var i=Ea;if(i===null)throw Error(Ze(349));var a=t._getVersion,h=a(t._source),p=Jy.current,g=p.useState(function(){return R6(i,t,r)}),b=g[1],E=g[0];g=Ci;var q=e.memoizedState,P=q.refs,L=P.getSnapshot,W=q.source;q=q.subscribe;var Q=Rn;return e.memoizedState={refs:P,source:t,subscribe:n},p.useEffect(function(){P.getSnapshot=r,P.setSnapshot=b;var V=a(t._source);if(!Ho(h,V)){V=r(t._source),Ho(E,V)||(b(V),V=Hc(Q),i.mutableReadLanes|=V&i.pendingLanes),V=i.mutableReadLanes,i.entangledLanes|=V;for(var $=i.entanglements,H=V;0<H;){var re=31-Jc(H),se=1<<re;$[re]|=V,H&=~se}}},[r,t,n]),p.useEffect(function(){return n(t._source,function(){var V=P.getSnapshot,$=P.setSnapshot;try{$(V(t._source));var H=Hc(Q);i.mutableReadLanes|=H&i.pendingLanes}catch(re){$(function(){throw re})}})},[t,n]),Ho(L,r)&&Ho(W,t)&&Ho(q,n)||(e={pending:null,dispatch:null,lastRenderedReducer:lu,lastRenderedState:E},e.dispatch=b=y2.bind(null,Rn,e),g.queue=e,g.baseQueue=null,E=R6(i,t,r),g.memoizedState=g.baseState=E),E}function i$(e,t,r){var n=Nf();return n$(n,e,t,r)}function ky(e){var t=qf();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:lu,lastRenderedState:e},e=e.dispatch=y2.bind(null,Rn,e),[t.memoizedState,e]}function _b(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Rn.updateQueue,t===null?(t={lastEffect:null},Rn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function D6(e){var t=qf();return e={current:e},t.memoizedState=e}function xb(){return Nf().memoizedState}function bM(e,t,r,n){var i=qf();Rn.flags|=e,i.memoizedState=_b(1|t,r,void 0,n===void 0?null:n)}function v2(e,t,r,n){var i=Nf();n=n===void 0?null:n;var a=void 0;if(Xi!==null){var h=Xi.memoizedState;if(a=h.destroy,n!==null&&d2(n,h.deps)){_b(t,r,a,n);return}}Rn.flags|=e,i.memoizedState=_b(1|t,r,a,n)}function L6(e,t){return bM(516,4,e,t)}function wb(e,t){return v2(516,4,e,t)}function a$(e,t){return v2(4,2,e,t)}function o$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function s$(e,t,r){return r=r!=null?r.concat([e]):null,v2(4,2,o$.bind(null,t,e),r)}function g2(){}function u$(e,t){var r=Nf();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&d2(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function l$(e,t){var r=Nf();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&d2(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function xPe(e,t){var r=rm();Of(98>r?98:r,function(){e(!0)}),Of(97<r?97:r,function(){var n=Xo.transition;Xo.transition=1;try{e(!1),t()}finally{Xo.transition=n}})}function y2(e,t,r){var n=Ao(),i=Hc(e),a={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},h=t.pending;if(h===null?a.next=a:(a.next=h.next,h.next=a),t.pending=a,h=e.alternate,e===Rn||h!==null&&h===Rn)Qy=yb=!0;else{if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var p=t.lastRenderedState,g=h(p,r);if(a.eagerReducer=h,a.eagerState=g,Ho(g,p))return}catch(b){}finally{}Kc(e,i,n)}}var bb={readContext:Yo,useCallback:$a,useContext:$a,useEffect:$a,useImperativeHandle:$a,useLayoutEffect:$a,useMemo:$a,useReducer:$a,useRef:$a,useState:$a,useDebugValue:$a,useDeferredValue:$a,useTransition:$a,useMutableSource:$a,useOpaqueIdentifier:$a,unstable_isNewReconciler:!1},wPe={readContext:Yo,useCallback:function(e,t){return qf().memoizedState=[e,t===void 0?null:t],e},useContext:Yo,useEffect:L6,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,bM(4,2,o$.bind(null,t,e),r)},useLayoutEffect:function(e,t){return bM(4,2,e,t)},useMemo:function(e,t){var r=qf();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=qf();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=y2.bind(null,Rn,e),[n.memoizedState,e]},useRef:D6,useState:ky,useDebugValue:g2,useDeferredValue:function(e){var t=ky(e),r=t[0],n=t[1];return L6(function(){var i=Xo.transition;Xo.transition=1;try{n(e)}finally{Xo.transition=i}},[e]),r},useTransition:function(){var e=ky(!1),t=e[0];return e=xPe.bind(null,e[1]),D6(e),[e,t]},useMutableSource:function(e,t,r){var n=qf();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},n$(n,e,t,r)},useOpaqueIdentifier:function(){if(fu){var e=!1,t=dPe(function(){throw e||(e=!0,r("r:"+(BP++).toString(36))),Error(Ze(355))}),r=ky(t)[1];return!(Rn.mode&2)&&(Rn.flags|=516,_b(5,function(){r("r:"+(BP++).toString(36))},void 0,null)),t}return t="r:"+(BP++).toString(36),ky(t),t},unstable_isNewReconciler:!1},bPe={readContext:Yo,useCallback:u$,useContext:Yo,useEffect:wb,useImperativeHandle:s$,useLayoutEffect:a$,useMemo:l$,useReducer:Dy,useRef:xb,useState:function(){return Dy(lu)},useDebugValue:g2,useDeferredValue:function(e){var t=Dy(lu),r=t[0],n=t[1];return wb(function(){var i=Xo.transition;Xo.transition=1;try{n(e)}finally{Xo.transition=i}},[e]),r},useTransition:function(){var e=Dy(lu)[0];return[xb().current,e]},useMutableSource:i$,useOpaqueIdentifier:function(){return Dy(lu)[0]},unstable_isNewReconciler:!1},EPe={readContext:Yo,useCallback:u$,useContext:Yo,useEffect:wb,useImperativeHandle:s$,useLayoutEffect:a$,useMemo:l$,useReducer:Ly,useRef:xb,useState:function(){return Ly(lu)},useDebugValue:g2,useDeferredValue:function(e){var t=Ly(lu),r=t[0],n=t[1];return wb(function(){var i=Xo.transition;Xo.transition=1;try{n(e)}finally{Xo.transition=i}},[e]),r},useTransition:function(){var e=Ly(lu)[0];return[xb().current,e]},useMutableSource:i$,useOpaqueIdentifier:function(){return Ly(lu)[0]},unstable_isNewReconciler:!1},SPe=Lf.ReactCurrentOwner,Ds=!1;function Ga(e,t,r,n){t.child=e===null?t$(t,null,r,n):vb(t,e.child,r,n)}function k6(e,t,r,n,i){r=r.render;var a=t.ref;return Kd(t,i),n=m2(e,t,r,n,a,i),e!==null&&!Ds?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,fl(e,t,i)):(t.flags|=1,Ga(e,t,n,i),t.child)}function N6(e,t,r,n,i,a){if(e===null){var h=r.type;return typeof h=="function"&&!S2(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=h,c$(e,t,h,n,i,a)):(e=rb(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}return h=e.child,!(i&a)&&(i=h.memoizedProps,r=r.compare,r=r!==null?r:c_,r(i,n)&&e.ref===t.ref)?fl(e,t,a):(t.flags|=1,e=th(h,n),e.ref=t.ref,e.return=t,t.child=e)}function c$(e,t,r,n,i,a){if(e!==null&&c_(e.memoizedProps,n)&&e.ref===t.ref)if(Ds=!1,(a&i)!==0)e.flags&16384&&(Ds=!0);else return t.lanes=e.lanes,fl(e,t,a);return EM(e,t,r,n,a)}function GP(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding"){if(!(t.mode&4))t.memoizedState={baseLanes:0},Ww(t,r);else if(r&1073741824)t.memoizedState={baseLanes:0},Ww(t,a!==null?a.baseLanes:r);else return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Ww(t,e),null;}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Ww(t,n);return Ga(e,t,i,r),t.child}function h$(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function EM(e,t,r,n,i){var a=Za(r)?Mf:Qi.current;return a=tm(t,a),Kd(t,i),r=m2(e,t,r,n,a,i),e!==null&&!Ds?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,fl(e,t,i)):(t.flags|=1,Ga(e,t,r,i),t.child)}function F6(e,t,r,n,i){if(Za(r)){var a=!0;Yw(t)}else a=!1;if(Kd(t,i),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),QV(t,r,n),_M(t,r,n,i),n=!0;else if(e===null){var h=t.stateNode,p=t.memoizedProps;h.props=p;var g=h.context,b=r.contextType;typeof b=="object"&&b!==null?b=Yo(b):(b=Za(r)?Mf:Qi.current,b=tm(t,b));var E=r.getDerivedStateFromProps,q=typeof E=="function"||typeof h.getSnapshotBeforeUpdate=="function";q||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(p!==n||g!==b)&&q6(t,h,n,b),Fc=!1;var P=t.memoizedState;h.state=P,p_(t,n,h,i),g=t.memoizedState,p!==n||P!==g||Wa.current||Fc?(typeof E=="function"&&(mb(t,r,E,n),g=t.memoizedState),(p=Fc||A6(t,r,p,n,P,g,b))?(q||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4)):(typeof h.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=g),h.props=n,h.state=g,h.context=b,n=p):(typeof h.componentDidMount=="function"&&(t.flags|=4),n=!1)}else{h=t.stateNode,YV(e,t),p=t.memoizedProps,b=t.type===t.elementType?p:Rs(t.type,p),h.props=b,q=t.pendingProps,P=h.context,g=r.contextType,typeof g=="object"&&g!==null?g=Yo(g):(g=Za(r)?Mf:Qi.current,g=tm(t,g));var L=r.getDerivedStateFromProps;(E=typeof L=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(p!==q||P!==g)&&q6(t,h,n,g),Fc=!1,P=t.memoizedState,h.state=P,p_(t,n,h,i);var W=t.memoizedState;p!==q||P!==W||Wa.current||Fc?(typeof L=="function"&&(mb(t,r,L,n),W=t.memoizedState),(b=Fc||A6(t,r,b,n,P,W,g))?(E||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(n,W,g),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(n,W,g)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof h.componentDidUpdate!="function"||p===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&P===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=W),h.props=n,h.state=W,h.context=g,n=b):(typeof h.componentDidUpdate!="function"||p===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&P===e.memoizedState||(t.flags|=256),n=!1)}return SM(e,t,r,n,a,i)}function SM(e,t,r,n,i,a){h$(e,t);var h=(t.flags&64)!==0;if(!n&&!h)return i&&E6(t,r,!1),fl(e,t,a);n=t.stateNode,SPe.current=t;var p=h&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&h?(t.child=vb(t,e.child,null,a),t.child=vb(t,null,p,a)):Ga(e,t,p,a),t.memoizedState=n.state,i&&E6(t,r,!0),t.child}function z6(e){var t=e.stateNode;t.pendingContext?b6(e,t.pendingContext,t.pendingContext!==t.context):t.context&&b6(e,t.context,!1),xM(e,t.containerInfo)}var Gw={dehydrated:null,retryLane:0};function j6(e,t,r){var n=t.pendingProps,i=Tn.current,a=!1,h;return(h=(t.flags&64)!==0)||(h=e!==null&&e.memoizedState===null?!1:(i&2)!==0),h?(a=!0,t.flags&=-65):e!==null&&e.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),In(Tn,i&1),e===null?(n.fallback!==void 0&&wM(t),e=n.children,i=n.fallback,a?(e=B6(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Gw,e):typeof n.unstable_expectedLoadTime=="number"?(e=B6(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Gw,t.lanes=33554432,e):(r=T2({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?a?(n=V6(e,t,n.children,n.fallback,r),a=t.child,i=e.child.memoizedState,a.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},a.childLanes=e.childLanes&~r,t.memoizedState=Gw,n):(r=U6(e,t,n.children,r),t.memoizedState=null,r):a?(n=V6(e,t,n.children,n.fallback,r),a=t.child,i=e.child.memoizedState,a.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},a.childLanes=e.childLanes&~r,t.memoizedState=Gw,n):(r=U6(e,t,n.children,r),t.memoizedState=null,r)}function B6(e,t,r,n){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},!(i&2)&&a!==null?(a.childLanes=0,a.pendingProps=t):a=T2(t,i,0,null),r=Qd(r,i,n,null),a.return=e,r.return=e,a.sibling=r,e.child=a,r}function U6(e,t,r,n){var i=e.child;return e=i.sibling,r=th(i,{mode:"visible",children:r}),!(t.mode&2)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function V6(e,t,r,n,i){var a=t.mode,h=e.child;e=h.sibling;var p={mode:"hidden",children:r};return!(a&2)&&t.child!==h?(r=t.child,r.childLanes=0,r.pendingProps=p,h=r.lastEffect,h!==null?(t.firstEffect=r.firstEffect,t.lastEffect=h,h.nextEffect=null):t.firstEffect=t.lastEffect=null):r=th(h,p),e!==null?n=th(e,n):(n=Qd(n,a,i,null),n.flags|=2),n.return=t,r.return=t,r.sibling=n,t.child=r,n}function $6(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),XV(e.return,t)}function WP(e,t,r,n,i,a){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:a}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=n,h.tail=r,h.tailMode=i,h.lastEffect=a)}function G6(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(Ga(e,t,n.children,r),n=Tn.current,n&2)n=n&1|2,t.flags|=64;else{if(e!==null&&e.flags&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$6(e,r);else if(e.tag===19)$6(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(In(Tn,n),!(t.mode&2))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&gb(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),WP(t,!1,i,r,a,t.lastEffect);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&gb(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}WP(t,!0,r,null,a,t.lastEffect);break;case"together":WP(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null;}return t.child}function fl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),x_|=t.lanes,r&t.childLanes){if(e!==null&&t.child!==e.child)throw Error(Ze(153));if(t.child!==null){for(e=t.child,r=th(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=th(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var f$,TM,p$,d$;f$=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};TM=function(){};p$=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Af(hu.current);var a=null;switch(r){case"input":i=JP(e,i),n=JP(e,n),a=[];break;case"option":i=tM(e,i),n=tM(e,n),a=[];break;case"select":i=ln({},i,{value:void 0}),n=ln({},n,{value:void 0}),a=[];break;case"textarea":i=rM(e,i),n=rM(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=lb);}aM(r,n);var h;r=null;for(b in i)if(!n.hasOwnProperty(b)&&i.hasOwnProperty(b)&&i[b]!=null)if(b==="style"){var p=i[b];for(h in p)p.hasOwnProperty(h)&&(r||(r={}),r[h]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(n_.hasOwnProperty(b)?a||(a=[]):(a=a||[]).push(b,null));for(b in n){var g=n[b];if(p=i!=null?i[b]:void 0,n.hasOwnProperty(b)&&g!==p&&(g!=null||p!=null))if(b==="style"){if(p){for(h in p)!p.hasOwnProperty(h)||g&&g.hasOwnProperty(h)||(r||(r={}),r[h]="");for(h in g)g.hasOwnProperty(h)&&p[h]!==g[h]&&(r||(r={}),r[h]=g[h])}else r||(a||(a=[]),a.push(b,r)),r=g;}else b==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,p=p?p.__html:void 0,g!=null&&p!==g&&(a=a||[]).push(b,g)):b==="children"?typeof g!="string"&&typeof g!="number"||(a=a||[]).push(b,""+g):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(n_.hasOwnProperty(b)?(g!=null&&b==="onScroll"&&Jr("scroll",e),a||p===g||(a=[])):typeof g=="object"&&g!==null&&g.$$typeof===GM?g.toString():(a=a||[]).push(b,g))}r&&(a=a||[]).push("style",r);var b=a;(t.updateQueue=b)&&(t.flags|=4)}};d$=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ny(e,t){if(!fu)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null;}}function TPe(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Za(t.type)&&hb(),null;case 3:return nm(),Qr(Wa),Qr(Qi),p2(),n=t.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&($w(t)?t.flags|=4:n.hydrate||(t.flags|=256)),TM(t),null;case 5:f2(t);var i=Af(m_.current);if(r=t.type,e!==null&&t.stateNode!=null)p$(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(t.stateNode===null)throw Error(Ze(166));return null}if(e=Af(hu.current),$w(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Bc]=t,n[cb]=a,r){case"dialog":Jr("cancel",n),Jr("close",n);break;case"iframe":case"object":case"embed":Jr("load",n);break;case"video":case"audio":for(e=0;e<Uy.length;e++)Jr(Uy[e],n);break;case"source":Jr("error",n);break;case"img":case"image":case"link":Jr("error",n),Jr("load",n);break;case"details":Jr("toggle",n);break;case"input":Z5(n,a),Jr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Jr("invalid",n);break;case"textarea":K5(n,a),Jr("invalid",n);}aM(r,a),e=null;for(var h in a)a.hasOwnProperty(h)&&(i=a[h],h==="children"?typeof i=="string"?n.textContent!==i&&(e=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(e=["children",""+i]):n_.hasOwnProperty(h)&&i!=null&&h==="onScroll"&&Jr("scroll",n));switch(r){case"input":Lw(n),H5(n,a,!0);break;case"textarea":Lw(n),X5(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=lb);}n=e,t.updateQueue=n,n!==null&&(t.flags|=4)}else{switch(h=i.nodeType===9?i:i.ownerDocument,e===nM.html&&(e=sV(r)),e===nM.html?r==="script"?(e=h.createElement("div"),e.innerHTML="<script></script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=h.createElement(r,{is:n.is}):(e=h.createElement(r),r==="select"&&(h=e,n.multiple?h.multiple=!0:n.size&&(h.size=n.size))):e=h.createElementNS(e,r),e[Bc]=t,e[cb]=n,f$(e,t,!1,!1),t.stateNode=e,h=oM(r,n),r){case"dialog":Jr("cancel",e),Jr("close",e),i=n;break;case"iframe":case"object":case"embed":Jr("load",e),i=n;break;case"video":case"audio":for(i=0;i<Uy.length;i++)Jr(Uy[i],e);i=n;break;case"source":Jr("error",e),i=n;break;case"img":case"image":case"link":Jr("error",e),Jr("load",e),i=n;break;case"details":Jr("toggle",e),i=n;break;case"input":Z5(e,n),i=JP(e,n),Jr("invalid",e);break;case"option":i=tM(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=ln({},n,{value:void 0}),Jr("invalid",e);break;case"textarea":K5(e,n),i=rM(e,n),Jr("invalid",e);break;default:i=n;}aM(r,i);var p=i;for(a in p)if(p.hasOwnProperty(a)){var g=p[a];a==="style"?cV(e,g):a==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&uV(e,g)):a==="children"?typeof g=="string"?(r!=="textarea"||g!=="")&&i_(e,g):typeof g=="number"&&i_(e,""+g):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(n_.hasOwnProperty(a)?g!=null&&a==="onScroll"&&Jr("scroll",e):g!=null&&zM(e,a,g,h))}switch(r){case"input":Lw(e),H5(e,n,!1);break;case"textarea":Lw(e),X5(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Yc(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Gd(e,!!n.multiple,a,!1):n.defaultValue!=null&&Gd(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=lb);}BV(r,n)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)d$(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Ze(166));r=Af(m_.current),Af(hu.current),$w(t)?(n=t.stateNode,r=t.memoizedProps,n[Bc]=t,n.nodeValue!==r&&(t.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Bc]=t,t.stateNode=n)}return null;case 13:return Qr(Tn),n=t.memoizedState,t.flags&64?(t.lanes=r,t):(n=n!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&$w(t):r=e.memoizedState!==null,n&&!r&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||Tn.current&1?Ai===0&&(Ai=3):((Ai===0||Ai===3)&&(Ai=4),Ea===null||!(x_&134217727)&&!(sm&134217727)||Yd(Ea,Ji))),(n||r)&&(t.flags|=4),null);case 4:return nm(),TM(t),e===null&&FV(t.stateNode.containerInfo),null;case 10:return c2(t),null;case 17:return Za(t.type)&&hb(),null;case 19:if(Qr(Tn),n=t.memoizedState,n===null)return null;if(a=(t.flags&64)!==0,h=n.rendering,h===null){if(a)Ny(n,!1);else{if(Ai!==0||e!==null&&e.flags&64)for(e=t.child;e!==null;){if(h=gb(e),h!==null){for(t.flags|=64,Ny(n,!1),a=h.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,h=a.alternate,h===null?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,e=h.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return In(Tn,Tn.current&1|2),t.child}e=e.sibling}n.tail!==null&&Yi()>MM&&(t.flags|=64,a=!0,Ny(n,!1),t.lanes=33554432)}}else{if(!a)if(e=gb(h),e!==null){if(t.flags|=64,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ny(n,!0),n.tail===null&&n.tailMode==="hidden"&&!h.alternate&&!fu)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Yi()-n.renderingStartTime>MM&&r!==1073741824&&(t.flags|=64,a=!0,Ny(n,!1),t.lanes=33554432);n.isBackwards?(h.sibling=t.child,t.child=h):(r=n.last,r!==null?r.sibling=h:t.child=h,n.last=h)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Yi(),r.sibling=null,t=Tn.current,In(Tn,a?t&1|2:t&1),r):null;case 23:case 24:return E2(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null;}throw Error(Ze(156,t.tag))}function IPe(e){switch(e.tag){case 1:Za(e.type)&&hb();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(nm(),Qr(Wa),Qr(Qi),p2(),t=e.flags,t&64)throw Error(Ze(285));return e.flags=t&-4097|64,e;case 5:return f2(e),null;case 13:return Qr(Tn),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return Qr(Tn),null;case 4:return nm(),null;case 10:return c2(e),null;case 23:case 24:return E2(),null;default:return null;}}function _2(e,t){try{var r="",n=t;do r+=oqe(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i}}function IM(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var CPe=typeof WeakMap=="function"?WeakMap:Map;function m$(e,t,r){r=Wc(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Sb||(Sb=!0,OM=n),IM(e,t)},r}function v$(e,t,r){r=Wc(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return IM(e,t),n(i)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(cu===null?cu=new Set([this]):cu.add(this),IM(e,t));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),r}var APe=typeof WeakSet=="function"?WeakSet:Set;function W6(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Xc(e,r)}else t.current=null}function qPe(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:Rs(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&o2(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return;}throw Error(Ze(163))}function PPe(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var i=e;n=i.next,i=i.tag,i&4&&i&1&&(T$(r,e),FPe(r,e)),e=n}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:Rs(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&C6(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode;}C6(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&BV(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&xV(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return;}throw Error(Ze(163))}function Z6(e,t){for(var r=e;;){if(r.tag===5){var n=r.stateNode;if(t)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=lV("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function H6(e,t){if(Pf&&typeof Pf.onCommitFiberUnmount=="function")try{Pf.onCommitFiberUnmount(s2,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var n=r,i=n.destroy;if(n=n.tag,i!==void 0)if(n&4)T$(t,r);else{n=t;try{i()}catch(a){Xc(n,a)}}r=r.next}while(r!==e)}break;case 1:if(W6(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Xc(t,a)}break;case 5:W6(t);break;case 4:g$(e,t);}}function K6(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function X6(e){return e.tag===5||e.tag===3||e.tag===4}function Y6(e){e:{for(var t=e.return;t!==null;){if(X6(t))break e;t=t.return}throw Error(Ze(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(Ze(161));}r.flags&16&&(i_(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||X6(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?CM(e,r,t):AM(e,r,t)}function CM(e,t,r){var n=e.tag,i=n===5||n===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=lb));else if(n!==4&&(e=e.child,e!==null))for(CM(e,t,r),e=e.sibling;e!==null;)CM(e,t,r),e=e.sibling}function AM(e,t,r){var n=e.tag,i=n===5||n===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(AM(e,t,r),e=e.sibling;e!==null;)AM(e,t,r),e=e.sibling}function g$(e,t){for(var r=t,n=!1,i,a;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(Ze(160));switch(i=n.stateNode,n.tag){case 5:a=!1;break e;case 3:i=i.containerInfo,a=!0;break e;case 4:i=i.containerInfo,a=!0;break e;}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var h=e,p=r,g=p;;)if(H6(h,g),g.child!==null&&g.tag!==4)g.child.return=g,g=g.child;else{if(g===p)break e;for(;g.sibling===null;){if(g.return===null||g.return===p)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}a?(h=i,p=r.stateNode,h.nodeType===8?h.parentNode.removeChild(p):h.removeChild(p)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,a=!0,r.child.return=r,r=r.child;continue}}else if(H6(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function ZP(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(e=n.destroy,n.destroy=void 0,e!==void 0&&e()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){n=t.memoizedProps;var i=e!==null?e.memoizedProps:n;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,a!==null){for(r[cb]=n,e==="input"&&n.type==="radio"&&n.name!=null&&aV(r,n),oM(e,i),t=oM(e,n),i=0;i<a.length;i+=2){var h=a[i],p=a[i+1];h==="style"?cV(r,p):h==="dangerouslySetInnerHTML"?uV(r,p):h==="children"?i_(r,p):zM(r,h,p,t)}switch(e){case"input":QP(r,n);break;case"textarea":oV(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,a=n.value,a!=null?Gd(r,!!n.multiple,a,!1):e!==!!n.multiple&&(n.defaultValue!=null?Gd(r,!!n.multiple,n.defaultValue,!0):Gd(r,!!n.multiple,n.multiple?[]:"",!1));}}}return;case 6:if(t.stateNode===null)throw Error(Ze(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,xV(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(b2=Yi(),Z6(t.child,!0)),J6(t);return;case 19:J6(t);return;case 17:return;case 23:case 24:Z6(t,t.memoizedState!==null);return;}throw Error(Ze(163))}function J6(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new APe),t.forEach(function(n){var i=BPe.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function MPe(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var OPe=Math.ceil,Eb=Lf.ReactCurrentDispatcher,x2=Lf.ReactCurrentOwner,Ot=0,Ea=null,Jn=null,Ji=0,Rf=0,qM=rh(0),Ai=0,Nb=null,om=0,x_=0,sm=0,w2=0,PM=null,b2=0,MM=1/0;function um(){MM=Yi()+500}var ct=null,Sb=!1,OM=null,cu=null,eh=!1,e_=null,Vy=90,RM=[],DM=[],pl=null,t_=0,LM=null,Qw=-1,cl=0,eb=0,r_=null,tb=!1;function Ao(){return Ot&48?Yi():Qw!==-1?Qw:Qw=Yi()}function Hc(e){if(e=e.mode,!(e&2))return 1;if(!(e&4))return rm()===99?1:2;if(cl===0&&(cl=om),_Pe.transition!==0){eb!==0&&(eb=PM!==null?PM.pendingLanes:0),e=cl;var t=4186112&~eb;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=rm(),Ot&4&&e===98?e=sb(12,cl):(e=bqe(e),e=sb(e,cl)),e}function Kc(e,t,r){if(50<t_)throw t_=0,LM=null,Error(Ze(185));if(e=Fb(e,t),e===null)return null;Pb(e,t,r),e===Ea&&(sm|=t,Ai===4&&Yd(e,Ji));var n=rm();t===1?Ot&8&&!(Ot&48)?kM(e):(Jo(e,r),Ot===0&&(um(),pu())):(!(Ot&4)||n!==98&&n!==99||(pl===null?pl=new Set([e]):pl.add(e)),Jo(e,r)),PM=e}function Fb(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function Jo(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,h=e.pendingLanes;0<h;){var p=31-Jc(h),g=1<<p,b=a[p];if(b===-1){if(!(g&n)||g&i){b=t,kd(g);var E=Vr;a[p]=10<=E?b+250:6<=E?b+5e3:-1}}else b<=t&&(e.expiredLanes|=g);h&=~g}if(n=u_(e,e===Ea?Ji:0),t=Vr,n===0)r!==null&&(r!==UP&&gM(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==UP&&gM(r)}t===15?(r=kM.bind(null,e),ll===null?(ll=[r],Jw=u2(Lb,KV)):ll.push(r),r=UP):t===14?r=f_(99,kM.bind(null,e)):(r=Eqe(t),r=f_(r,y$.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function y$(e){if(Qw=-1,eb=cl=0,Ot&48)throw Error(Ze(327));var t=e.callbackNode;if(nh()&&e.callbackNode!==t)return null;var r=u_(e,e===Ea?Ji:0);if(r===0)return null;var n=r,i=Ot;Ot|=16;var a=b$();(Ea!==e||Ji!==n)&&(um(),Jd(e,n));do try{LPe();break}catch(p){w$(e,p)}while(!0);if(l2(),Eb.current=a,Ot=i,Jn!==null?n=0:(Ea=null,Ji=0,n=Ai),om&sm)Jd(e,0);else if(n!==0){if(n===2&&(Ot|=64,e.hydrate&&(e.hydrate=!1,o2(e.containerInfo)),r=CV(e),r!==0&&(n=$y(e,r))),n===1)throw t=Nb,Jd(e,0),Yd(e,r),Jo(e,Yi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(Ze(345));case 2:Sf(e);break;case 3:if(Yd(e,r),(r&62914560)===r&&(n=b2+500-Yi(),10<n)){if(u_(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ao(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=_6(Sf.bind(null,e),n);break}Sf(e);break;case 4:if(Yd(e,r),(r&4186112)===r)break;for(n=e.eventTimes,i=-1;0<r;){var h=31-Jc(r);a=1<<h,h=n[h],h>i&&(i=h),r&=~a}if(r=i,r=Yi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*OPe(r/1960))-r,10<r){e.timeoutHandle=_6(Sf.bind(null,e),r);break}Sf(e);break;case 5:Sf(e);break;default:throw Error(Ze(329));}}return Jo(e,Yi()),e.callbackNode===t?y$.bind(null,e):null}function Yd(e,t){for(t&=~w2,t&=~sm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Jc(t),n=1<<r;e[r]=-1,t&=~n}}function kM(e){if(Ot&48)throw Error(Ze(327));if(nh(),e===Ea&&e.expiredLanes&Ji){var t=Ji,r=$y(e,t);om&sm&&(t=u_(e,t),r=$y(e,t))}else t=u_(e,0),r=$y(e,t);if(e.tag!==0&&r===2&&(Ot|=64,e.hydrate&&(e.hydrate=!1,o2(e.containerInfo)),t=CV(e),t!==0&&(r=$y(e,t))),r===1)throw r=Nb,Jd(e,0),Yd(e,t),Jo(e,Yi()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sf(e),Jo(e,Yi()),null}function RPe(){if(pl!==null){var e=pl;pl=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,Jo(t,Yi())})}pu()}function _$(e,t){var r=Ot;Ot|=1;try{return e(t)}finally{Ot=r,Ot===0&&(um(),pu())}}function x$(e,t){var r=Ot;Ot&=-2,Ot|=8;try{return e(t)}finally{Ot=r,Ot===0&&(um(),pu())}}function Ww(e,t){In(qM,Rf),Rf|=t,om|=t}function E2(){Rf=qM.current,Qr(qM)}function Jd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,pPe(r)),Jn!==null)for(r=Jn.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&hb();break;case 3:nm(),Qr(Wa),Qr(Qi),p2();break;case 5:f2(n);break;case 4:nm();break;case 13:Qr(Tn);break;case 19:Qr(Tn);break;case 10:c2(n);break;case 23:case 24:E2();}r=r.return}Ea=e,Jn=th(e.current,null),Ji=Rf=om=t,Ai=0,Nb=null,w2=sm=x_=0}function w$(e,t){do{var r=Jn;try{if(l2(),Jy.current=bb,yb){for(var n=Rn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}yb=!1}if(v_=0,Ci=Xi=Rn=null,Qy=!1,x2.current=null,r===null||r.return===null){Ai=1,Nb=t,Jn=null;break}e:{var a=e,h=r.return,p=r,g=t;if(t=Ji,p.flags|=2048,p.firstEffect=p.lastEffect=null,g!==null&&typeof g=="object"&&typeof g.then=="function"){var b=g;if(!(p.mode&2)){var E=p.alternate;E?(p.updateQueue=E.updateQueue,p.memoizedState=E.memoizedState,p.lanes=E.lanes):(p.updateQueue=null,p.memoizedState=null)}var q=(Tn.current&1)!==0,P=h;do{var L;if(L=P.tag===13){var W=P.memoizedState;if(W!==null)L=W.dehydrated!==null;else{var Q=P.memoizedProps;L=Q.fallback===void 0?!1:Q.unstable_avoidThisFallback!==!0?!0:!q}}if(L){var V=P.updateQueue;if(V===null){var $=new Set;$.add(b),P.updateQueue=$}else V.add(b);if(!(P.mode&2)){if(P.flags|=64,p.flags|=16384,p.flags&=-2981,p.tag===1)if(p.alternate===null)p.tag=17;else{var H=Wc(-1,1);H.tag=2,Zc(p,H)}p.lanes|=1;break e}g=void 0,p=t;var re=a.pingCache;if(re===null?(re=a.pingCache=new CPe,g=new Set,re.set(b,g)):(g=re.get(b),g===void 0&&(g=new Set,re.set(b,g))),!g.has(p)){g.add(p);var se=jPe.bind(null,a,b,p);b.then(se,se)}P.flags|=4096,P.lanes=t;break e}P=P.return}while(P!==null);g=Error(($d(p.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Ai!==5&&(Ai=2),g=_2(g,p),P=h;do{switch(P.tag){case 3:a=g,P.flags|=4096,t&=-t,P.lanes|=t;var Ie=m$(P,a,t);I6(P,Ie);break e;case 1:a=g;var qe=P.type,Ae=P.stateNode;if(!(P.flags&64)&&(typeof qe.getDerivedStateFromError=="function"||Ae!==null&&typeof Ae.componentDidCatch=="function"&&(cu===null||!cu.has(Ae)))){P.flags|=4096,t&=-t,P.lanes|=t;var Ue=v$(P,a,t);I6(P,Ue);break e}}P=P.return}while(P!==null)}S$(r)}catch(Le){t=Le,Jn===r&&r!==null&&(Jn=r=r.return);continue}break}while(!0)}function b$(){var e=Eb.current;return Eb.current=bb,e===null?bb:e}function $y(e,t){var r=Ot;Ot|=16;var n=b$();Ea===e&&Ji===t||Jd(e,t);do try{DPe();break}catch(i){w$(e,i)}while(!0);if(l2(),Ot=r,Eb.current=n,Jn!==null)throw Error(Ze(261));return Ea=null,Ji=0,Ai}function DPe(){for(;Jn!==null;)E$(Jn)}function LPe(){for(;Jn!==null&&!vPe();)E$(Jn)}function E$(e){var t=I$(e.alternate,e,Rf);e.memoizedProps=e.pendingProps,t===null?S$(e):Jn=t,x2.current=null}function S$(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&2048){if(r=IPe(t),r!==null){r.flags&=2047,Jn=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}else{if(r=TPe(r,t,Rf),r!==null){Jn=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||Rf&1073741824||!(r.mode&4)){for(var n=0,i=r.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}e!==null&&!(e.flags&2048)&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}if(t=t.sibling,t!==null){Jn=t;return}Jn=t=e}while(t!==null);Ai===0&&(Ai=5)}function Sf(e){var t=rm();return Of(99,kPe.bind(null,e,t)),null}function kPe(e,t){do nh();while(e_!==null);if(Ot&48)throw Error(Ze(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ze(177));e.callbackNode=null;var n=r.lanes|r.childLanes,i=n,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var h=e.eventTimes,p=e.expirationTimes;0<a;){var g=31-Jc(a),b=1<<g;i[g]=0,h[g]=-1,p[g]=-1,a&=~b}if(pl!==null&&!(n&24)&&pl.has(e)&&pl.delete(e),e===Ea&&(Jn=Ea=null,Ji=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(i=Ot,Ot|=32,x2.current=null,zP=Hw,h=p6(),fM(h)){if("selectionStart"in h)p={start:h.selectionStart,end:h.selectionEnd};else e:if(p=(p=h.ownerDocument)&&p.defaultView||window,(b=p.getSelection&&p.getSelection())&&b.rangeCount!==0){p=b.anchorNode,a=b.anchorOffset,g=b.focusNode,b=b.focusOffset;try{p.nodeType,g.nodeType}catch(Le){p=null;break e}var E=0,q=-1,P=-1,L=0,W=0,Q=h,V=null;t:for(;;){for(var $;Q!==p||a!==0&&Q.nodeType!==3||(q=E+a),Q!==g||b!==0&&Q.nodeType!==3||(P=E+b),Q.nodeType===3&&(E+=Q.nodeValue.length),($=Q.firstChild)!==null;)V=Q,Q=$;for(;;){if(Q===h)break t;if(V===p&&++L===a&&(q=E),V===g&&++W===b&&(P=E),($=Q.nextSibling)!==null)break;Q=V,V=Q.parentNode}Q=$}p=q===-1||P===-1?null:{start:q,end:P}}else p=null;p=p||{start:0,end:0}}else p=null;jP={focusedElem:h,selectionRange:p},Hw=!1,r_=null,tb=!1,ct=n;do try{NPe()}catch(Le){if(ct===null)throw Error(Ze(330));Xc(ct,Le),ct=ct.nextEffect}while(ct!==null);r_=null,ct=n;do try{for(h=e;ct!==null;){var H=ct.flags;if(H&16&&i_(ct.stateNode,""),H&128){var re=ct.alternate;if(re!==null){var se=re.ref;se!==null&&(typeof se=="function"?se(null):se.current=null)}}switch(H&1038){case 2:Y6(ct),ct.flags&=-3;break;case 6:Y6(ct),ct.flags&=-3,ZP(ct.alternate,ct);break;case 1024:ct.flags&=-1025;break;case 1028:ct.flags&=-1025,ZP(ct.alternate,ct);break;case 4:ZP(ct.alternate,ct);break;case 8:p=ct,g$(h,p);var Ie=p.alternate;K6(p),Ie!==null&&K6(Ie);}ct=ct.nextEffect}}catch(Le){if(ct===null)throw Error(Ze(330));Xc(ct,Le),ct=ct.nextEffect}while(ct!==null);if(se=jP,re=p6(),H=se.focusedElem,h=se.selectionRange,re!==H&&H&&H.ownerDocument&&LV(H.ownerDocument.documentElement,H)){for(h!==null&&fM(H)&&(re=h.start,se=h.end,se===void 0&&(se=re),("selectionStart"in H)?(H.selectionStart=re,H.selectionEnd=Math.min(se,H.value.length)):(se=(re=H.ownerDocument||document)&&re.defaultView||window,se.getSelection&&(se=se.getSelection(),p=H.textContent.length,Ie=Math.min(h.start,p),h=h.end===void 0?Ie:Math.min(h.end,p),!se.extend&&Ie>h&&(p=h,h=Ie,Ie=p),p=f6(H,Ie),a=f6(H,h),p&&a&&(se.rangeCount!==1||se.anchorNode!==p.node||se.anchorOffset!==p.offset||se.focusNode!==a.node||se.focusOffset!==a.offset)&&(re=re.createRange(),re.setStart(p.node,p.offset),se.removeAllRanges(),Ie>h?(se.addRange(re),se.extend(a.node,a.offset)):(re.setEnd(a.node,a.offset),se.addRange(re)))))),re=[],se=H;se=se.parentNode;)se.nodeType===1&&re.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<re.length;H++)se=re[H],se.element.scrollLeft=se.left,se.element.scrollTop=se.top}Hw=!!zP,jP=zP=null,e.current=r,ct=n;do try{for(H=e;ct!==null;){var qe=ct.flags;if(qe&36&&PPe(H,ct.alternate,ct),qe&128){re=void 0;var Ae=ct.ref;if(Ae!==null){var Ue=ct.stateNode;switch(ct.tag){case 5:re=Ue;break;default:re=Ue;}typeof Ae=="function"?Ae(re):Ae.current=re}}ct=ct.nextEffect}}catch(Le){if(ct===null)throw Error(Ze(330));Xc(ct,Le),ct=ct.nextEffect}while(ct!==null);ct=null,yPe(),Ot=i}else e.current=r;if(eh)eh=!1,e_=e,Vy=t;else for(ct=n;ct!==null;)t=ct.nextEffect,ct.nextEffect=null,ct.flags&8&&(qe=ct,qe.sibling=null,qe.stateNode=null),ct=t;if(n=e.pendingLanes,n===0&&(cu=null),n===1?e===LM?t_++:(t_=0,LM=e):t_=0,r=r.stateNode,Pf&&typeof Pf.onCommitFiberRoot=="function")try{Pf.onCommitFiberRoot(s2,r,void 0,(r.current.flags&64)===64)}catch(Le){}if(Jo(e,Yi()),Sb)throw Sb=!1,e=OM,OM=null,e;return Ot&8||pu(),null}function NPe(){for(;ct!==null;){var e=ct.alternate;tb||r_===null||(ct.flags&8?Q5(ct,r_)&&(tb=!0):ct.tag===13&&MPe(e,ct)&&Q5(ct,r_)&&(tb=!0));var t=ct.flags;t&256&&qPe(e,ct),!(t&512)||eh||(eh=!0,f_(97,function(){return nh(),null})),ct=ct.nextEffect}}function nh(){if(Vy!==90){var e=97<Vy?97:Vy;return Vy=90,Of(e,zPe)}return!1}function FPe(e,t){RM.push(t,e),eh||(eh=!0,f_(97,function(){return nh(),null}))}function T$(e,t){DM.push(t,e),eh||(eh=!0,f_(97,function(){return nh(),null}))}function zPe(){if(e_===null)return!1;var e=e_;if(e_=null,Ot&48)throw Error(Ze(331));var t=Ot;Ot|=32;var r=DM;DM=[];for(var n=0;n<r.length;n+=2){var i=r[n],a=r[n+1],h=i.destroy;if(i.destroy=void 0,typeof h=="function")try{h()}catch(g){if(a===null)throw Error(Ze(330));Xc(a,g)}}for(r=RM,RM=[],n=0;n<r.length;n+=2){i=r[n],a=r[n+1];try{var p=i.create;i.destroy=p()}catch(g){if(a===null)throw Error(Ze(330));Xc(a,g)}}for(p=e.current.firstEffect;p!==null;)e=p.nextEffect,p.nextEffect=null,p.flags&8&&(p.sibling=null,p.stateNode=null),p=e;return Ot=t,pu(),!0}function Q6(e,t,r){t=_2(r,t),t=m$(e,t,1),Zc(e,t),t=Ao(),e=Fb(e,1),e!==null&&(Pb(e,1,t),Jo(e,t))}function Xc(e,t){if(e.tag===3)Q6(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){Q6(r,e,t);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(cu===null||!cu.has(n))){e=_2(t,e);var i=v$(r,e,1);if(Zc(r,i),i=Ao(),r=Fb(r,1),r!==null)Pb(r,1,i),Jo(r,i);else if(typeof n.componentDidCatch=="function"&&(cu===null||!cu.has(n)))try{n.componentDidCatch(t,e)}catch(a){}break}}r=r.return}}function jPe(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ao(),e.pingedLanes|=e.suspendedLanes&r,Ea===e&&(Ji&r)===r&&(Ai===4||Ai===3&&(Ji&62914560)===Ji&&500>Yi()-b2?Jd(e,0):w2|=r),Jo(e,t)}function BPe(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,t&2?t&4?(cl===0&&(cl=om),t=Nd(62914560&~cl),t===0&&(t=4194304)):t=rm()===99?1:2:t=1),r=Ao(),e=Fb(e,t),e!==null&&(Pb(e,t,r),Jo(e,r))}var I$;I$=function(e,t,r){var n=t.lanes;if(e!==null){if(e.memoizedProps!==t.pendingProps||Wa.current)Ds=!0;else if(r&n)Ds=!!(e.flags&16384);else{switch(Ds=!1,t.tag){case 3:z6(t),$P();break;case 5:P6(t);break;case 1:Za(t.type)&&Yw(t);break;case 4:xM(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var i=t.type._context;In(fb,i._currentValue),i._currentValue=n;break;case 13:if(t.memoizedState!==null)return r&t.child.childLanes?j6(e,t,r):(In(Tn,Tn.current&1),t=fl(e,t,r),t!==null?t.sibling:null);In(Tn,Tn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&64){if(n)return G6(e,t,r);t.flags|=64}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),In(Tn,Tn.current),n)break;return null;case 23:case 24:return t.lanes=0,GP(e,t,r);}return fl(e,t,r)}}else Ds=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=tm(t,Qi.current),Kd(t,r),i=m2(null,t,n,e,i,r),t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Za(n)){var a=!0;Yw(t)}else a=!1;t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,h2(t);var h=n.getDerivedStateFromProps;typeof h=="function"&&mb(t,n,h,e),i.updater=kb,t.stateNode=i,i._reactInternals=t,_M(t,n,e,r),t=SM(null,t,n,!0,a,r)}else t.tag=0,Ga(null,t,i,r),t=t.child;return t;case 16:i=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=VPe(i),e=Rs(i,e),a){case 0:t=EM(null,t,i,e,r);break e;case 1:t=F6(null,t,i,e,r);break e;case 11:t=k6(null,t,i,e,r);break e;case 14:t=N6(null,t,i,Rs(i.type,e),n,r);break e;}throw Error(Ze(306,i,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Rs(n,i),EM(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Rs(n,i),F6(e,t,n,i,r);case 3:if(z6(t),n=t.updateQueue,e===null||n===null)throw Error(Ze(282));if(n=t.pendingProps,i=t.memoizedState,i=i!==null?i.element:null,YV(e,t),p_(t,n,null,r),n=t.memoizedState.element,n===i)$P(),t=fl(e,t,r);else{if(i=t.stateNode,(a=i.hydrate)&&(Uc=Hd(t.stateNode.containerInfo.firstChild),hl=t,a=fu=!0),a){if(e=i.mutableSourceEagerHydrationData,e!=null)for(i=0;i<e.length;i+=2)a=e[i],a._workInProgressVersionPrimary=e[i+1],Xd.push(a);for(r=t$(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else Ga(e,t,n,r),$P();t=t.child}return t;case 5:return P6(t),e===null&&wM(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,h=i.children,mM(n,i)?h=null:a!==null&&mM(n,a)&&(t.flags|=16),h$(e,t),Ga(e,t,h,r),t.child;case 6:return e===null&&wM(t),null;case 13:return j6(e,t,r);case 4:return xM(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=vb(t,null,n,r):Ga(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Rs(n,i),k6(e,t,n,i,r);case 7:return Ga(e,t,t.pendingProps,r),t.child;case 8:return Ga(e,t,t.pendingProps.children,r),t.child;case 12:return Ga(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,i=t.pendingProps,h=t.memoizedProps,a=i.value;var p=t.type._context;if(In(fb,p._currentValue),p._currentValue=a,h!==null)if(p=h.value,a=Ho(p,a)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(p,a):1073741823)|0,a===0){if(h.children===i.children&&!Wa.current){t=fl(e,t,r);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var g=p.dependencies;if(g!==null){h=p.child;for(var b=g.firstContext;b!==null;){if(b.context===n&&b.observedBits&a){p.tag===1&&(b=Wc(-1,r&-r),b.tag=2,Zc(p,b)),p.lanes|=r,b=p.alternate,b!==null&&(b.lanes|=r),XV(p.return,r),g.lanes|=r;break}b=b.next}}else h=p.tag===10&&p.type===t.type?null:p.child;if(h!==null)h.return=p;else for(h=p;h!==null;){if(h===t){h=null;break}if(p=h.sibling,p!==null){p.return=h.return,h=p;break}h=h.return}p=h}Ga(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps,n=a.children,Kd(t,r),i=Yo(i,a.unstable_observedBits),n=n(i),t.flags|=1,Ga(e,t,n,r),t.child;case 14:return i=t.type,a=Rs(i,t.pendingProps),a=Rs(i.type,a),N6(e,t,i,a,n,r);case 15:return c$(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Rs(n,i),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Za(n)?(e=!0,Yw(t)):e=!1,Kd(t,r),QV(t,n,i),_M(t,n,i,r),SM(null,t,n,!0,e,r);case 19:return G6(e,t,r);case 23:return GP(e,t,r);case 24:return GP(e,t,r);}throw Error(Ze(156,t.tag))};function UPe(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ko(e,t,r,n){return new UPe(e,t,r,n)}function S2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function VPe(e){if(typeof e=="function")return S2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Cb)return 11;if(e===Ab)return 14}return 2}function th(e,t){var r=e.alternate;return r===null?(r=Ko(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function rb(e,t,r,n,i,a){var h=2;if(n=e,typeof e=="function")S2(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case zc:return Qd(r.children,i,a,t);case rV:h=8,i|=16;break;case jM:h=8,i|=1;break;case Gy:return e=Ko(12,r,t,i|8),e.elementType=Gy,e.type=Gy,e.lanes=a,e;case Wy:return e=Ko(13,r,t,i),e.type=Wy,e.elementType=Wy,e.lanes=a,e;case nb:return e=Ko(19,r,t,i),e.elementType=nb,e.lanes=a,e;case WM:return T2(r,i,a,t);case YP:return e=Ko(24,r,t,i),e.elementType=YP,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case BM:h=10;break e;case UM:h=9;break e;case Cb:h=11;break e;case Ab:h=14;break e;case VM:h=16,n=null;break e;case $M:h=22;break e;}throw Error(Ze(130,e==null?e:typeof e,""));}return t=Ko(h,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function Qd(e,t,r,n){return e=Ko(7,e,n,t),e.lanes=r,e}function T2(e,t,r,n){return e=Ko(23,e,n,t),e.elementType=WM,e.lanes=r,e}function HP(e,t,r){return e=Ko(6,e,null,t),e.lanes=r,e}function KP(e,t,r){return t=Ko(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $Pe(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=RP(0),this.expirationTimes=RP(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=RP(0),this.mutableSourceEagerHydrationData=null}function GPe(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tf,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Tb(e,t,r,n){var i=t.current,a=Ao(),h=Hc(i);e:if(r){r=r._reactInternals;t:{if(kf(r)!==r||r.tag!==1)throw Error(Ze(170));var p=r;do{switch(p.tag){case 3:p=p.stateNode.context;break t;case 1:if(Za(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break t}}p=p.return}while(p!==null);throw Error(Ze(171))}if(r.tag===1){var g=r.type;if(Za(g)){r=VV(r,g,p);break e}}r=p}else r=Qc;return t.context===null?t.context=r:t.pendingContext=r,t=Wc(a,h),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),Zc(i,t),Kc(i,h,a),h}function XP(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode;}}function eV(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function I2(e,t){eV(e,t),(e=e.alternate)&&eV(e,t)}function WPe(){return null}function C2(e,t,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new $Pe(e,t,r!=null&&r.hydrate===!0),t=Ko(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,h2(t),e[am]=r.current,FV(e.nodeType===8?e.parentNode:e),n)for(e=0;e<n.length;e++){t=n[e];var i=t._getVersion;i=i(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,i]:r.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=r}C2.prototype.render=function(e){Tb(e,this._internalRoot,null,null)};C2.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Tb(null,e,null,function(){t[am]=null})};function w_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ZPe(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new C2(e,0,t?{hydrate:!0}:void 0)}function zb(e,t,r,n,i){var a=r._reactRootContainer;if(a){var h=a._internalRoot;if(typeof i=="function"){var p=i;i=function(){var b=XP(h);p.call(b)}}Tb(t,h,e,i)}else{if(a=r._reactRootContainer=ZPe(r,n),h=a._internalRoot,typeof i=="function"){var g=i;i=function(){var b=XP(h);g.call(b)}}x$(function(){Tb(t,h,e,i)})}return XP(h)}gV=function(e){if(e.tag===13){var t=Ao();Kc(e,4,t),I2(e,4)}};YM=function(e){if(e.tag===13){var t=Ao();Kc(e,67108864,t),I2(e,67108864)}};yV=function(e){if(e.tag===13){var t=Ao(),r=Hc(e);Kc(e,r,t),I2(e,r)}};_V=function(e,t){return t()};sM=function(e,t,r){switch(t){case"input":if(QP(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+"][type=\"radio\"]"),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Db(n);if(!i)throw Error(Ze(90));iV(n),QP(n,i)}}}break;case"textarea":oV(e,r);break;case"select":t=r.value,t!=null&&Gd(e,!!r.multiple,t,!1);}};HM=_$;pV=function(e,t,r,n,i){var a=Ot;Ot|=4;try{return Of(98,e.bind(null,t,r,n,i))}finally{Ot=a,Ot===0&&(um(),pu())}};KM=function(){!(Ot&49)&&(RPe(),nh())};dV=function(e,t){var r=Ot;Ot|=2;try{return e(t)}finally{Ot=r,Ot===0&&(um(),pu())}};function C$(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w_(t))throw Error(Ze(200));return GPe(e,t,null,r)}var HPe={Events:[y_,Bd,Db,hV,fV,nh,{current:!1}]},Fy={findFiberByHostInstance:Cf,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},KPe={bundleType:Fy.bundleType,version:Fy.version,rendererPackageName:Fy.rendererPackageName,rendererConfig:Fy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lf.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vV(e),e===null?null:e.stateNode},findFiberByHostInstance:Fy.findFiberByHostInstance||WPe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(zy=__REACT_DEVTOOLS_GLOBAL_HOOK__,!zy.isDisabled&&zy.supportsFiber))try{s2=zy.inject(KPe),Pf=zy}catch(e){}var zy;Qo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HPe;Qo.createPortal=C$;Qo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ze(188)):Error(Ze(268,Object.keys(e)));return e=vV(t),e=e===null?null:e.stateNode,e};Qo.flushSync=function(e,t){var r=Ot;if(r&48)return e(t);Ot|=1;try{if(e)return Of(99,e.bind(null,t))}finally{Ot=r,pu()}};Qo.hydrate=function(e,t,r){if(!w_(t))throw Error(Ze(200));return zb(null,e,t,!0,r)};Qo.render=function(e,t,r){if(!w_(t))throw Error(Ze(200));return zb(null,e,t,!1,r)};Qo.unmountComponentAtNode=function(e){if(!w_(e))throw Error(Ze(40));return e._reactRootContainer?(x$(function(){zb(null,null,e,!1,function(){e._reactRootContainer=null,e[am]=null})}),!0):!1};Qo.unstable_batchedUpdates=_$;Qo.unstable_createPortal=function(e,t){return C$(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Qo.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!w_(r))throw Error(Ze(200));if(e==null||e._reactInternals===void 0)throw Error(Ze(38));return zb(e,t,r,!1,n)};Qo.version="17.0.2"});var es=T((lkt,P$)=>{"use strict";function q$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(q$)}catch(e){console.error(e)}}q$(),P$.exports=A$()});var ot=T((M$,O$)=>{"use strict";var jb=function(e){return e&&e.Math===Math&&e};O$.exports=jb(typeof globalThis=="object"&&globalThis)||jb(typeof window=="object"&&window)||jb(typeof self=="object"&&self)||jb(typeof global=="object"&&global)||function(){return this}()||M$||Function("return this")()});var Fe=T((ckt,R$)=>{"use strict";R$.exports=function(e){try{return!!e()}catch(t){return!0}}});var gt=T((hkt,D$)=>{"use strict";var XPe=Fe();D$.exports=!XPe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var lm=T((fkt,L$)=>{"use strict";var YPe=Fe();L$.exports=!YPe(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var Ye=T((pkt,k$)=>{"use strict";var JPe=lm(),Bb=Function.prototype.call;k$.exports=JPe?Bb.bind(Bb):function(){return Bb.apply(Bb,arguments)}});var b_=T(z$=>{"use strict";var N$={}.propertyIsEnumerable,F$=Object.getOwnPropertyDescriptor,QPe=F$&&!N$.call({1:2},1);z$.f=QPe?function(t){var r=F$(this,t);return!!r&&r.enumerable}:N$});var Ha=T((mkt,j$)=>{"use strict";j$.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var Oe=T((vkt,V$)=>{"use strict";var B$=lm(),U$=Function.prototype,A2=U$.call,eMe=B$&&U$.bind.bind(A2,A2);V$.exports=B$?eMe:function(e){return function(){return A2.apply(e,arguments)}}});var Pi=T((gkt,G$)=>{"use strict";var $$=Oe(),tMe=$$({}.toString),rMe=$$("".slice);G$.exports=function(e){return rMe(tMe(e),8,-1)}});var ml=T((ykt,W$)=>{"use strict";var nMe=Oe(),iMe=Fe(),aMe=Pi(),q2=Object,oMe=nMe("".split);W$.exports=iMe(function(){return!q2("z").propertyIsEnumerable(0)})?function(e){return aMe(e)==="String"?oMe(e,""):q2(e)}:q2});var Dn=T((_kt,Z$)=>{"use strict";Z$.exports=function(e){return e==null}});var $r=T((xkt,H$)=>{"use strict";var sMe=Dn(),uMe=TypeError;H$.exports=function(e){if(sMe(e))throw new uMe("Can't call method on "+e);return e}});var Bn=T((wkt,K$)=>{"use strict";var lMe=ml(),cMe=$r();K$.exports=function(e){return lMe(cMe(e))}});var M2=T((bkt,X$)=>{"use strict";var P2=typeof document=="object"&&document.all,hMe=typeof P2=="undefined"&&P2!==void 0;X$.exports={all:P2,IS_HTMLDDA:hMe}});var qt=T((Ekt,J$)=>{"use strict";var Y$=M2(),fMe=Y$.all;J$.exports=Y$.IS_HTMLDDA?function(e){return typeof e=="function"||e===fMe}:function(e){return typeof e=="function"}});var Pt=T((Skt,tG)=>{"use strict";var Q$=qt(),eG=M2(),pMe=eG.all;tG.exports=eG.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:Q$(e)||e===pMe}:function(e){return typeof e=="object"?e!==null:Q$(e)}});var St=T((Tkt,rG)=>{"use strict";var O2=ot(),dMe=qt(),mMe=function(e){return dMe(e)?e:void 0};rG.exports=function(e,t){return arguments.length<2?mMe(O2[e]):O2[e]&&O2[e][t]}});var ea=T((Ikt,nG)=>{"use strict";var vMe=Oe();nG.exports=vMe({}.isPrototypeOf)});var du=T((Ckt,iG)=>{"use strict";iG.exports=typeof navigator!="undefined"&&String(navigator.userAgent)||""});var mu=T((Akt,cG)=>{"use strict";var lG=ot(),R2=du(),aG=lG.process,oG=lG.Deno,sG=aG&&aG.versions||oG&&oG.version,uG=sG&&sG.v8,Ls,Ub;uG&&(Ls=uG.split("."),Ub=Ls[0]>0&&Ls[0]<4?1:+(Ls[0]+Ls[1]));!Ub&&R2&&(Ls=R2.match(/Edge\/(\d+)/),(!Ls||Ls[1]>=74)&&(Ls=R2.match(/Chrome\/(\d+)/),Ls&&(Ub=+Ls[1])));cG.exports=Ub});var ih=T((qkt,fG)=>{"use strict";var hG=mu(),gMe=Fe(),yMe=ot(),_Me=yMe.String;fG.exports=!!Object.getOwnPropertySymbols&&!gMe(function(){var e=Symbol("symbol detection");return!_Me(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&hG&&hG<41})});var D2=T((Pkt,pG)=>{"use strict";var xMe=ih();pG.exports=xMe&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var vl=T((Mkt,dG)=>{"use strict";var wMe=St(),bMe=qt(),EMe=ea(),SMe=D2(),TMe=Object;dG.exports=SMe?function(e){return typeof e=="symbol"}:function(e){var t=wMe("Symbol");return bMe(t)&&EMe(t.prototype,TMe(e))}});var ah=T((Okt,mG)=>{"use strict";var IMe=String;mG.exports=function(e){try{return IMe(e)}catch(t){return"Object"}}});var Tt=T((Rkt,vG)=>{"use strict";var CMe=qt(),AMe=ah(),qMe=TypeError;vG.exports=function(e){if(CMe(e))return e;throw new qMe(AMe(e)+" is not a function")}});var Cn=T((Dkt,gG)=>{"use strict";var PMe=Tt(),MMe=Dn();gG.exports=function(e,t){var r=e[t];return MMe(r)?void 0:PMe(r)}});var F2=T((Lkt,yG)=>{"use strict";var L2=Ye(),k2=qt(),N2=Pt(),OMe=TypeError;yG.exports=function(e,t){var r,n;if(t==="string"&&k2(r=e.toString)&&!N2(n=L2(r,e))||k2(r=e.valueOf)&&!N2(n=L2(r,e))||t!=="string"&&k2(r=e.toString)&&!N2(n=L2(r,e)))return n;throw new OMe("Can't convert object to primitive value")}});var Ut=T((kkt,_G)=>{"use strict";_G.exports=!1});var Vb=T((Nkt,wG)=>{"use strict";var xG=ot(),RMe=Object.defineProperty;wG.exports=function(e,t){try{RMe(xG,e,{value:t,configurable:!0,writable:!0})}catch(r){xG[e]=t}return t}});var E_=T((Fkt,EG)=>{"use strict";var DMe=ot(),LMe=Vb(),bG="__core-js_shared__",kMe=DMe[bG]||LMe(bG,{});EG.exports=kMe});var vu=T((zkt,TG)=>{"use strict";var NMe=Ut(),SG=E_();(TG.exports=function(e,t){return SG[e]||(SG[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.33.0",mode:NMe?"pure":"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var Vt=T((jkt,IG)=>{"use strict";var FMe=$r(),zMe=Object;IG.exports=function(e){return zMe(FMe(e))}});var Ft=T((Bkt,CG)=>{"use strict";var jMe=Oe(),BMe=Vt(),UMe=jMe({}.hasOwnProperty);CG.exports=Object.hasOwn||function(t,r){return UMe(BMe(t),r)}});var oh=T((Ukt,AG)=>{"use strict";var VMe=Oe(),$Me=0,GMe=Math.random(),WMe=VMe(1 .toString);AG.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+WMe(++$Me+GMe,36)}});var yt=T((Vkt,PG)=>{"use strict";var ZMe=ot(),HMe=vu(),qG=Ft(),KMe=oh(),XMe=ih(),YMe=D2(),cm=ZMe.Symbol,z2=HMe("wks"),JMe=YMe?cm.for||cm:cm&&cm.withoutSetter||KMe;PG.exports=function(e){return qG(z2,e)||(z2[e]=XMe&&qG(cm,e)?cm[e]:JMe("Symbol."+e)),z2[e]}});var S_=T(($kt,RG)=>{"use strict";var QMe=Ye(),MG=Pt(),OG=vl(),e2e=Cn(),t2e=F2(),r2e=yt(),n2e=TypeError,i2e=r2e("toPrimitive");RG.exports=function(e,t){if(!MG(e)||OG(e))return e;var r=e2e(e,i2e),n;if(r){if(t===void 0&&(t="default"),n=QMe(r,e,t),!MG(n)||OG(n))return n;throw new n2e("Can't convert object to primitive value")}return t===void 0&&(t="number"),t2e(e,t)}});var ks=T((Gkt,DG)=>{"use strict";var a2e=S_(),o2e=vl();DG.exports=function(e){var t=a2e(e,"string");return o2e(t)?t:t+""}});var T_=T((Wkt,kG)=>{"use strict";var s2e=ot(),LG=Pt(),j2=s2e.document,u2e=LG(j2)&&LG(j2.createElement);kG.exports=function(e){return u2e?j2.createElement(e):{}}});var B2=T((Zkt,NG)=>{"use strict";var l2e=gt(),c2e=Fe(),h2e=T_();NG.exports=!l2e&&!c2e(function(){return Object.defineProperty(h2e("div"),"a",{get:function(){return 7}}).a!==7})});var Qn=T(zG=>{"use strict";var f2e=gt(),p2e=Ye(),d2e=b_(),m2e=Ha(),v2e=Bn(),g2e=ks(),y2e=Ft(),_2e=B2(),FG=Object.getOwnPropertyDescriptor;zG.f=f2e?FG:function(t,r){if(t=v2e(t),r=g2e(r),_2e)try{return FG(t,r)}catch(n){}if(y2e(t,r))return m2e(!p2e(d2e.f,t,r),t[r])}});var U2=T((Kkt,jG)=>{"use strict";var x2e=gt(),w2e=Fe();jG.exports=x2e&&w2e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var Qe=T((Xkt,BG)=>{"use strict";var b2e=Pt(),E2e=String,S2e=TypeError;BG.exports=function(e){if(b2e(e))return e;throw new S2e(E2e(e)+" is not an object")}});var Fr=T(VG=>{"use strict";var T2e=gt(),I2e=B2(),C2e=U2(),$b=Qe(),UG=ks(),A2e=TypeError,V2=Object.defineProperty,q2e=Object.getOwnPropertyDescriptor,$2="enumerable",G2="configurable",W2="writable";VG.f=T2e?C2e?function(t,r,n){if($b(t),r=UG(r),$b(n),typeof t=="function"&&r==="prototype"&&"value"in n&&W2 in n&&!n[W2]){var i=q2e(t,r);i&&i[W2]&&(t[r]=n.value,n={configurable:G2 in n?n[G2]:i[G2],enumerable:$2 in n?n[$2]:i[$2],writable:!1})}return V2(t,r,n)}:V2:function(t,r,n){if($b(t),r=UG(r),$b(n),I2e)try{return V2(t,r,n)}catch(i){}if("get"in n||"set"in n)throw new A2e("Accessors not supported");return"value"in n&&(t[r]=n.value),t}});var Ln=T((Jkt,$G)=>{"use strict";var P2e=gt(),M2e=Fr(),O2e=Ha();$G.exports=P2e?function(e,t,r){return M2e.f(e,t,O2e(1,r))}:function(e,t,r){return e[t]=r,e}});var Ff=T((Qkt,WG)=>{"use strict";var Z2=gt(),R2e=Ft(),GG=Function.prototype,D2e=Z2&&Object.getOwnPropertyDescriptor,H2=R2e(GG,"name"),L2e=H2&&function(){}.name==="something",k2e=H2&&(!Z2||Z2&&D2e(GG,"name").configurable);WG.exports={EXISTS:H2,PROPER:L2e,CONFIGURABLE:k2e}});var I_=T((eNt,ZG)=>{"use strict";var N2e=Oe(),F2e=qt(),K2=E_(),z2e=N2e(Function.toString);F2e(K2.inspectSource)||(K2.inspectSource=function(e){return z2e(e)});ZG.exports=K2.inspectSource});var X2=T((tNt,KG)=>{"use strict";var j2e=ot(),B2e=qt(),HG=j2e.WeakMap;KG.exports=B2e(HG)&&/native code/.test(String(HG))});var C_=T((rNt,YG)=>{"use strict";var U2e=vu(),V2e=oh(),XG=U2e("keys");YG.exports=function(e){return XG[e]||(XG[e]=V2e(e))}});var hm=T((nNt,JG)=>{"use strict";JG.exports={}});var vr=T((iNt,t8)=>{"use strict";var $2e=X2(),e8=ot(),G2e=Pt(),W2e=Ln(),Y2=Ft(),J2=E_(),Z2e=C_(),H2e=hm(),QG="Object already initialized",Q2=e8.TypeError,K2e=e8.WeakMap,Gb,A_,Wb,X2e=function(e){return Wb(e)?A_(e):Gb(e,{})},Y2e=function(e){return function(t){var r;if(!G2e(t)||(r=A_(t)).type!==e)throw new Q2("Incompatible receiver, "+e+" required");return r}};$2e||J2.state?(Ns=J2.state||(J2.state=new K2e),Ns.get=Ns.get,Ns.has=Ns.has,Ns.set=Ns.set,Gb=function(e,t){if(Ns.has(e))throw new Q2(QG);return t.facade=e,Ns.set(e,t),t},A_=function(e){return Ns.get(e)||{}},Wb=function(e){return Ns.has(e)}):(zf=Z2e("state"),H2e[zf]=!0,Gb=function(e,t){if(Y2(e,zf))throw new Q2(QG);return t.facade=e,W2e(e,zf,t),t},A_=function(e){return Y2(e,zf)?e[zf]:{}},Wb=function(e){return Y2(e,zf)});var Ns,zf;t8.exports={set:Gb,get:A_,has:Wb,enforce:X2e,getterFor:Y2e}});var q_=T((aNt,i8)=>{"use strict";var tO=Oe(),J2e=Fe(),Q2e=qt(),Zb=Ft(),eO=gt(),eOe=Ff().CONFIGURABLE,tOe=I_(),n8=vr(),rOe=n8.enforce,nOe=n8.get,r8=String,Hb=Object.defineProperty,iOe=tO("".slice),aOe=tO("".replace),oOe=tO([].join),sOe=eO&&!J2e(function(){return Hb(function(){},"length",{value:8}).length!==8}),uOe=String(String).split("String"),lOe=i8.exports=function(e,t,r){iOe(r8(t),0,7)==="Symbol("&&(t="["+aOe(r8(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!Zb(e,"name")||eOe&&e.name!==t)&&(eO?Hb(e,"name",{value:t,configurable:!0}):e.name=t),sOe&&r&&Zb(r,"arity")&&e.length!==r.arity&&Hb(e,"length",{value:r.arity});try{r&&Zb(r,"constructor")&&r.constructor?eO&&Hb(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var n=rOe(e);return Zb(n,"source")||(n.source=oOe(uOe,typeof t=="string"?t:"")),e};Function.prototype.toString=lOe(function(){return Q2e(this)&&nOe(this).source||tOe(this)},"toString")});var br=T((oNt,a8)=>{"use strict";var cOe=qt(),hOe=Fr(),fOe=q_(),pOe=Vb();a8.exports=function(e,t,r,n){n||(n={});var i=n.enumerable,a=n.name!==void 0?n.name:t;if(cOe(r)&&fOe(r,a,n),n.global)i?e[t]=r:pOe(t,r);else{try{n.unsafe?e[t]&&(i=!0):delete e[t]}catch(h){}i?e[t]=r:hOe.f(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e}});var rO=T((sNt,o8)=>{"use strict";var dOe=Math.ceil,mOe=Math.floor;o8.exports=Math.trunc||function(t){var r=+t;return(r>0?mOe:dOe)(r)}});var Gr=T((uNt,s8)=>{"use strict";var vOe=rO();s8.exports=function(e){var t=+e;return t!==t||t===0?0:vOe(t)}});var ts=T((lNt,u8)=>{"use strict";var gOe=Gr(),yOe=Math.max,_Oe=Math.min;u8.exports=function(e,t){var r=gOe(e);return r<0?yOe(r+t,0):_Oe(r,t)}});var Ka=T((cNt,l8)=>{"use strict";var xOe=Gr(),wOe=Math.min;l8.exports=function(e){return e>0?wOe(xOe(e),9007199254740991):0}});var Ht=T((hNt,c8)=>{"use strict";var bOe=Ka();c8.exports=function(e){return bOe(e.length)}});var fm=T((fNt,f8)=>{"use strict";var EOe=Bn(),SOe=ts(),TOe=Ht(),h8=function(e){return function(t,r,n){var i=EOe(t),a=TOe(i),h=SOe(n,a),p;if(e&&r!==r){for(;a>h;)if(p=i[h++],p!==p)return!0}else for(;a>h;h++)if((e||h in i)&&i[h]===r)return e||h||0;return!e&&-1}};f8.exports={includes:h8(!0),indexOf:h8(!1)}});var iO=T((pNt,d8)=>{"use strict";var IOe=Oe(),nO=Ft(),COe=Bn(),AOe=fm().indexOf,qOe=hm(),p8=IOe([].push);d8.exports=function(e,t){var r=COe(e),n=0,i=[],a;for(a in r)!nO(qOe,a)&&nO(r,a)&&p8(i,a);for(;t.length>n;)nO(r,a=t[n++])&&(~AOe(i,a)||p8(i,a));return i}});var Kb=T((dNt,m8)=>{"use strict";m8.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var gl=T(v8=>{"use strict";var POe=iO(),MOe=Kb(),OOe=MOe.concat("length","prototype");v8.f=Object.getOwnPropertyNames||function(t){return POe(t,OOe)}});var P_=T(g8=>{"use strict";g8.f=Object.getOwnPropertySymbols});var Xb=T((gNt,y8)=>{"use strict";var ROe=St(),DOe=Oe(),LOe=gl(),kOe=P_(),NOe=Qe(),FOe=DOe([].concat);y8.exports=ROe("Reflect","ownKeys")||function(t){var r=LOe.f(NOe(t)),n=kOe.f;return n?FOe(r,n(t)):r}});var pm=T((yNt,x8)=>{"use strict";var _8=Ft(),zOe=Xb(),jOe=Qn(),BOe=Fr();x8.exports=function(e,t,r){for(var n=zOe(t),i=BOe.f,a=jOe.f,h=0;h<n.length;h++){var p=n[h];!_8(e,p)&&!(r&&_8(r,p))&&i(e,p,a(t,p))}}});var dm=T((_Nt,w8)=>{"use strict";var UOe=Fe(),VOe=qt(),$Oe=/#|\.prototype\./,M_=function(e,t){var r=WOe[GOe(e)];return r===HOe?!0:r===ZOe?!1:VOe(t)?UOe(t):!!t},GOe=M_.normalize=function(e){return String(e).replace($Oe,".").toLowerCase()},WOe=M_.data={},ZOe=M_.NATIVE="N",HOe=M_.POLYFILL="P";w8.exports=M_});var K=T((xNt,b8)=>{"use strict";var aO=ot(),KOe=Qn().f,XOe=Ln(),YOe=br(),JOe=Vb(),QOe=pm(),eRe=dm();b8.exports=function(e,t){var r=e.target,n=e.global,i=e.stat,a,h,p,g,b,E;if(n?h=aO:i?h=aO[r]||JOe(r,{}):h=(aO[r]||{}).prototype,h)for(p in t){if(b=t[p],e.dontCallGetSet?(E=KOe(h,p),g=E&&E.value):g=h[p],a=eRe(n?p:r+(i?".":"#")+p,e.forced),!a&&g!==void 0){if(typeof b==typeof g)continue;QOe(b,g)}(e.sham||g&&g.sham)&&XOe(b,"sham",!0),YOe(h,p,b,e)}}});var Yb=T((wNt,S8)=>{"use strict";var tRe=yt(),rRe=tRe("toStringTag"),E8={};E8[rRe]="z";S8.exports=String(E8)==="[object z]"});var Xa=T((bNt,T8)=>{"use strict";var nRe=Yb(),iRe=qt(),Jb=Pi(),aRe=yt(),oRe=aRe("toStringTag"),sRe=Object,uRe=Jb(function(){return arguments}())==="Arguments",lRe=function(e,t){try{return e[t]}catch(r){}};T8.exports=nRe?Jb:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=lRe(t=sRe(e),oRe))=="string"?r:uRe?Jb(t):(n=Jb(t))==="Object"&&iRe(t.callee)?"Arguments":n}});var At=T((ENt,I8)=>{"use strict";var cRe=Xa(),hRe=String;I8.exports=function(e){if(cRe(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return hRe(e)}});var jf=T((SNt,C8)=>{"use strict";var fRe=iO(),pRe=Kb();C8.exports=Object.keys||function(t){return fRe(t,pRe)}});var Qb=T(A8=>{"use strict";var dRe=gt(),mRe=U2(),vRe=Fr(),gRe=Qe(),yRe=Bn(),_Re=jf();A8.f=dRe&&!mRe?Object.defineProperties:function(t,r){gRe(t);for(var n=yRe(r),i=_Re(r),a=i.length,h=0,p;a>h;)vRe.f(t,p=i[h++],n[p]);return t}});var oO=T((INt,q8)=>{"use strict";var xRe=St();q8.exports=xRe("document","documentElement")});var An=T((CNt,k8)=>{"use strict";var wRe=Qe(),bRe=Qb(),P8=Kb(),ERe=hm(),SRe=oO(),TRe=T_(),IRe=C_(),M8=">",O8="<",uO="prototype",lO="script",D8=IRe("IE_PROTO"),sO=function(){},L8=function(e){return O8+lO+M8+e+O8+"/"+lO+M8},R8=function(e){e.write(L8("")),e.close();var t=e.parentWindow.Object;return e=null,t},CRe=function(){var e=TRe("iframe"),t="java"+lO+":",r;return e.style.display="none",SRe.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(L8("document.F=Object")),r.close(),r.F},eE,tE=function(){try{eE=new ActiveXObject("htmlfile")}catch(t){}tE=typeof document!="undefined"?document.domain&&eE?R8(eE):CRe():R8(eE);for(var e=P8.length;e--;)delete tE[uO][P8[e]];return tE()};ERe[D8]=!0;k8.exports=Object.create||function(t,r){var n;return t!==null?(sO[uO]=wRe(t),n=new sO,sO[uO]=null,n[D8]=t):n=tE(),r===void 0?n:bRe.f(n,r)}});var rs=T((ANt,N8)=>{"use strict";var ARe=ks(),qRe=Fr(),PRe=Ha();N8.exports=function(e,t,r){var n=ARe(t);n in e?qRe.f(e,n,PRe(0,r)):e[n]=r}});var Bf=T((qNt,z8)=>{"use strict";var F8=ts(),MRe=Ht(),ORe=rs(),RRe=Array,DRe=Math.max;z8.exports=function(e,t,r){for(var n=MRe(e),i=F8(t,n),a=F8(r===void 0?n:r,n),h=RRe(DRe(a-i,0)),p=0;i<a;i++,p++)ORe(h,p,e[i]);return h.length=p,h}});var rE=T((PNt,U8)=>{"use strict";var LRe=Pi(),kRe=Bn(),j8=gl().f,NRe=Bf(),B8=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],FRe=function(e){try{return j8(e)}catch(t){return NRe(B8)}};U8.exports.f=function(t){return B8&&LRe(t)==="Window"?FRe(t):j8(kRe(t))}});var en=T((MNt,$8)=>{"use strict";var V8=q_(),zRe=Fr();$8.exports=function(e,t,r){return r.get&&V8(r.get,t,{getter:!0}),r.set&&V8(r.set,t,{setter:!0}),zRe.f(e,t,r)}});var cO=T(G8=>{"use strict";var jRe=yt();G8.f=jRe});var nE=T((RNt,W8)=>{"use strict";var BRe=ot();W8.exports=BRe});var vn=T((DNt,H8)=>{"use strict";var Z8=nE(),URe=Ft(),VRe=cO(),$Re=Fr().f;H8.exports=function(e){var t=Z8.Symbol||(Z8.Symbol={});URe(t,e)||$Re(t,e,{value:VRe.f(e)})}});var hO=T((LNt,K8)=>{"use strict";var GRe=Ye(),WRe=St(),ZRe=yt(),HRe=br();K8.exports=function(){var e=WRe("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,n=ZRe("toPrimitive");t&&!t[n]&&HRe(t,n,function(i){return GRe(r,this)},{arity:1})}});var Ya=T((kNt,Y8)=>{"use strict";var KRe=Fr().f,XRe=Ft(),YRe=yt(),X8=YRe("toStringTag");Y8.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!XRe(e,X8)&&KRe(e,X8,{configurable:!0,value:t})}});var yl=T((NNt,J8)=>{"use strict";var JRe=Pi(),QRe=Oe();J8.exports=function(e){if(JRe(e)==="Function")return QRe(e)}});var Pr=T((FNt,eW)=>{"use strict";var Q8=yl(),eDe=Tt(),tDe=lm(),rDe=Q8(Q8.bind);eW.exports=function(e,t){return eDe(e),t===void 0?e:tDe?rDe(e,t):function(){return e.apply(t,arguments)}}});var Fs=T((zNt,tW)=>{"use strict";var nDe=Pi();tW.exports=Array.isArray||function(t){return nDe(t)==="Array"}});var zs=T((jNt,oW)=>{"use strict";var iDe=Oe(),aDe=Fe(),rW=qt(),oDe=Xa(),sDe=St(),uDe=I_(),nW=function(){},lDe=[],iW=sDe("Reflect","construct"),fO=/^\s*(?:class|function)\b/,cDe=iDe(fO.exec),hDe=!fO.test(nW),O_=function(t){if(!rW(t))return!1;try{return iW(nW,lDe,t),!0}catch(r){return!1}},aW=function(t){if(!rW(t))return!1;switch(oDe(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1;}try{return hDe||!!cDe(fO,uDe(t))}catch(r){return!0}};aW.sham=!0;oW.exports=!iW||aDe(function(){var e;return O_(O_.call)||!O_(Object)||!O_(function(){e=!0})||e})?aW:O_});var cW=T((BNt,lW)=>{"use strict";var sW=Fs(),fDe=zs(),pDe=Pt(),dDe=yt(),mDe=dDe("species"),uW=Array;lW.exports=function(e){var t;return sW(e)&&(t=e.constructor,fDe(t)&&(t===uW||sW(t.prototype))?t=void 0:pDe(t)&&(t=t[mDe],t===null&&(t=void 0))),t===void 0?uW:t}});var mm=T((UNt,hW)=>{"use strict";var vDe=cW();hW.exports=function(e,t){return new(vDe(e))(t===0?0:t)}});var qn=T((VNt,pW)=>{"use strict";var gDe=Pr(),yDe=Oe(),_De=ml(),xDe=Vt(),wDe=Ht(),bDe=mm(),fW=yDe([].push),sh=function(e){var t=e===1,r=e===2,n=e===3,i=e===4,a=e===6,h=e===7,p=e===5||a;return function(g,b,E,q){for(var P=xDe(g),L=_De(P),W=gDe(b,E),Q=wDe(L),V=0,$=q||bDe,H=t?$(g,Q):r||h?$(g,0):void 0,re,se;Q>V;V++)if((p||V in L)&&(re=L[V],se=W(re,V,P),e))if(t)H[V]=se;else if(se)switch(e){case 3:return!0;case 5:return re;case 6:return V;case 2:fW(H,re);}else switch(e){case 4:return!1;case 7:fW(H,re);}return a?-1:n||i?i:H}};pW.exports={forEach:sh(0),map:sh(1),filter:sh(2),some:sh(3),every:sh(4),find:sh(5),findIndex:sh(6),filterReject:sh(7)}});var PW=T(()=>{"use strict";var iE=K(),aE=ot(),wO=Ye(),EDe=Oe(),SDe=Ut(),vm=gt(),gm=ih(),TDe=Fe(),vi=Ft(),IDe=ea(),vO=Qe(),oE=Bn(),bO=ks(),CDe=At(),gO=Ha(),D_=An(),vW=jf(),ADe=gl(),gW=rE(),qDe=P_(),yW=Qn(),_W=Fr(),PDe=Qb(),xW=b_(),pO=br(),MDe=en(),EO=vu(),ODe=C_(),wW=hm(),dW=oh(),RDe=yt(),DDe=cO(),LDe=vn(),kDe=hO(),NDe=Ya(),bW=vr(),sE=qn().forEach,Ja=ODe("hidden"),uE="Symbol",L_="prototype",FDe=bW.set,mW=bW.getterFor(uE),ns=Object[L_],Uf=aE.Symbol,R_=Uf&&Uf[L_],zDe=aE.RangeError,jDe=aE.TypeError,dO=aE.QObject,EW=yW.f,Vf=_W.f,SW=gW.f,BDe=xW.f,TW=EDe([].push),_l=EO("symbols"),k_=EO("op-symbols"),UDe=EO("wks"),yO=!dO||!dO[L_]||!dO[L_].findChild,IW=function(e,t,r){var n=EW(ns,t);n&&delete ns[t],Vf(e,t,r),n&&e!==ns&&Vf(ns,t,n)},_O=vm&&TDe(function(){return D_(Vf({},"a",{get:function(){return Vf(this,"a",{value:7}).a}})).a!==7})?IW:Vf,mO=function(e,t){var r=_l[e]=D_(R_);return FDe(r,{type:uE,tag:e,description:t}),vm||(r.description=t),r},lE=function(t,r,n){t===ns&&lE(k_,r,n),vO(t);var i=bO(r);return vO(n),vi(_l,i)?(n.enumerable?(vi(t,Ja)&&t[Ja][i]&&(t[Ja][i]=!1),n=D_(n,{enumerable:gO(0,!1)})):(vi(t,Ja)||Vf(t,Ja,gO(1,{})),t[Ja][i]=!0),_O(t,i,n)):Vf(t,i,n)},SO=function(t,r){vO(t);var n=oE(r),i=vW(n).concat(qW(n));return sE(i,function(a){(!vm||wO(xO,n,a))&&lE(t,a,n[a])}),t},VDe=function(t,r){return r===void 0?D_(t):SO(D_(t),r)},xO=function(t){var r=bO(t),n=wO(BDe,this,r);return this===ns&&vi(_l,r)&&!vi(k_,r)?!1:n||!vi(this,r)||!vi(_l,r)||vi(this,Ja)&&this[Ja][r]?n:!0},CW=function(t,r){var n=oE(t),i=bO(r);if(!(n===ns&&vi(_l,i)&&!vi(k_,i))){var a=EW(n,i);return a&&vi(_l,i)&&!(vi(n,Ja)&&n[Ja][i])&&(a.enumerable=!0),a}},AW=function(t){var r=SW(oE(t)),n=[];return sE(r,function(i){!vi(_l,i)&&!vi(wW,i)&&TW(n,i)}),n},qW=function(e){var t=e===ns,r=SW(t?k_:oE(e)),n=[];return sE(r,function(i){vi(_l,i)&&(!t||vi(ns,i))&&TW(n,_l[i])}),n};gm||(Uf=function(){if(IDe(R_,this))throw new jDe("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:CDe(arguments[0]),r=dW(t),n=function(i){this===ns&&wO(n,k_,i),vi(this,Ja)&&vi(this[Ja],r)&&(this[Ja][r]=!1);var a=gO(1,i);try{_O(this,r,a)}catch(h){if(!(h instanceof zDe))throw h;IW(this,r,a)}};return vm&&yO&&_O(ns,r,{configurable:!0,set:n}),mO(r,t)},R_=Uf[L_],pO(R_,"toString",function(){return mW(this).tag}),pO(Uf,"withoutSetter",function(e){return mO(dW(e),e)}),xW.f=xO,_W.f=lE,PDe.f=SO,yW.f=CW,ADe.f=gW.f=AW,qDe.f=qW,DDe.f=function(e){return mO(RDe(e),e)},vm&&(MDe(R_,"description",{configurable:!0,get:function(){return mW(this).description}}),SDe||pO(ns,"propertyIsEnumerable",xO,{unsafe:!0})));iE({global:!0,constructor:!0,wrap:!0,forced:!gm,sham:!gm},{Symbol:Uf});sE(vW(UDe),function(e){LDe(e)});iE({target:uE,stat:!0,forced:!gm},{useSetter:function(){yO=!0},useSimple:function(){yO=!1}});iE({target:"Object",stat:!0,forced:!gm,sham:!vm},{create:VDe,defineProperty:lE,defineProperties:SO,getOwnPropertyDescriptor:CW});iE({target:"Object",stat:!0,forced:!gm},{getOwnPropertyNames:AW});kDe();NDe(Uf,uE);wW[Ja]=!0});var TO=T((WNt,MW)=>{"use strict";var $De=ih();MW.exports=$De&&!!Symbol.for&&!!Symbol.keyFor});var RW=T(()=>{"use strict";var GDe=K(),WDe=St(),ZDe=Ft(),HDe=At(),OW=vu(),KDe=TO(),IO=OW("string-to-symbol-registry"),XDe=OW("symbol-to-string-registry");GDe({target:"Symbol",stat:!0,forced:!KDe},{for:function(e){var t=HDe(e);if(ZDe(IO,t))return IO[t];var r=WDe("Symbol")(t);return IO[t]=r,XDe[r]=t,r}})});var LW=T(()=>{"use strict";var YDe=K(),JDe=Ft(),QDe=vl(),eLe=ah(),tLe=vu(),rLe=TO(),DW=tLe("symbol-to-string-registry");YDe({target:"Symbol",stat:!0,forced:!rLe},{keyFor:function(t){if(!QDe(t))throw new TypeError(eLe(t)+" is not a symbol");if(JDe(DW,t))return DW[t]}})});var ta=T((YNt,zW)=>{"use strict";var nLe=lm(),FW=Function.prototype,kW=FW.apply,NW=FW.call;zW.exports=typeof Reflect=="object"&&Reflect.apply||(nLe?NW.bind(kW):function(){return NW.apply(kW,arguments)})});var xl=T((JNt,jW)=>{"use strict";var iLe=Oe();jW.exports=iLe([].slice)});var CO=T((QNt,$W)=>{"use strict";var aLe=Oe(),BW=Fs(),oLe=qt(),UW=Pi(),sLe=At(),VW=aLe([].push);$W.exports=function(e){if(oLe(e))return e;if(BW(e)){for(var t=e.length,r=[],n=0;n<t;n++){var i=e[n];typeof i=="string"?VW(r,i):(typeof i=="number"||UW(i)==="Number"||UW(i)==="String")&&VW(r,sLe(i))}var a=r.length,h=!0;return function(p,g){if(h)return h=!1,g;if(BW(this))return g;for(var b=0;b<a;b++)if(r[b]===p)return g}}}});var AO=T(()=>{"use strict";var uLe=K(),JW=St(),QW=ta(),lLe=Ye(),N_=Oe(),eZ=Fe(),GW=qt(),WW=vl(),tZ=xl(),cLe=CO(),hLe=ih(),fLe=String,uh=JW("JSON","stringify"),cE=N_(/./.exec),ZW=N_("".charAt),pLe=N_("".charCodeAt),dLe=N_("".replace),mLe=N_(1 .toString),vLe=/[\uD800-\uDFFF]/g,HW=/^[\uD800-\uDBFF]$/,KW=/^[\uDC00-\uDFFF]$/,XW=!hLe||eZ(function(){var e=JW("Symbol")("stringify detection");return uh([e])!=="[null]"||uh({a:e})!=="{}"||uh(Object(e))!=="{}"}),YW=eZ(function(){return uh("\uDF06\uD834")!=="\"\\udf06\\ud834\""||uh("\uDEAD")!=="\"\\udead\""}),gLe=function(e,t){var r=tZ(arguments),n=cLe(t);if(!(!GW(n)&&(e===void 0||WW(e))))return r[1]=function(i,a){if(GW(n)&&(a=lLe(n,this,fLe(i),a)),!WW(a))return a},QW(uh,null,r)},yLe=function(e,t,r){var n=ZW(r,t-1),i=ZW(r,t+1);return cE(HW,e)&&!cE(KW,i)||cE(KW,e)&&!cE(HW,n)?"\\u"+mLe(pLe(e,0),16):e};uh&&uLe({target:"JSON",stat:!0,arity:3,forced:XW||YW},{stringify:function(t,r,n){var i=tZ(arguments),a=QW(XW?gLe:uh,null,i);return YW&&typeof a=="string"?dLe(a,vLe,yLe):a}})});var nZ=T(()=>{"use strict";var _Le=K(),xLe=ih(),wLe=Fe(),rZ=P_(),bLe=Vt(),ELe=!xLe||wLe(function(){rZ.f(1)});_Le({target:"Object",stat:!0,forced:ELe},{getOwnPropertySymbols:function(t){var r=rZ.f;return r?r(bLe(t)):[]}})});var iZ=T(()=>{"use strict";PW();RW();LW();AO();nZ()});var hZ=T(()=>{"use strict";var SLe=K(),TLe=gt(),ILe=ot(),hE=Oe(),CLe=Ft(),ALe=qt(),qLe=ea(),PLe=At(),MLe=en(),OLe=pm(),wl=ILe.Symbol,$f=wl&&wl.prototype;TLe&&ALe(wl)&&(!("description"in $f)||wl().description!==void 0)&&(qO={},F_=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:PLe(arguments[0]),r=qLe($f,this)?new wl(t):t===void 0?wl():wl(t);return t===""&&(qO[r]=!0),r},OLe(F_,wl),F_.prototype=$f,$f.constructor=F_,aZ=String(wl("description detection"))==="Symbol(description detection)",oZ=hE($f.valueOf),sZ=hE($f.toString),uZ=/^Symbol\((.*)\)[^)]+$/,lZ=hE("".replace),cZ=hE("".slice),MLe($f,"description",{configurable:!0,get:function(){var t=oZ(this);if(CLe(qO,t))return"";var r=sZ(t),n=aZ?cZ(r,7,-1):lZ(r,uZ,"$1");return n===""?void 0:n}}),SLe({global:!0,constructor:!0,forced:!0},{Symbol:F_}));var qO,F_,aZ,oZ,sZ,uZ,lZ,cZ});var fZ=T(()=>{"use strict";var RLe=vn();RLe("asyncIterator")});var pZ=T(()=>{"use strict";var DLe=vn();DLe("hasInstance")});var dZ=T(()=>{"use strict";var LLe=vn();LLe("isConcatSpreadable")});var mZ=T(()=>{"use strict";var kLe=vn();kLe("iterator")});var vZ=T(()=>{"use strict";var NLe=vn();NLe("match")});var gZ=T(()=>{"use strict";var FLe=vn();FLe("matchAll")});var yZ=T(()=>{"use strict";var zLe=vn();zLe("replace")});var _Z=T(()=>{"use strict";var jLe=vn();jLe("search")});var xZ=T(()=>{"use strict";var BLe=vn();BLe("species")});var wZ=T(()=>{"use strict";var ULe=vn();ULe("split")});var bZ=T(()=>{"use strict";var VLe=vn(),$Le=hO();VLe("toPrimitive");$Le()});var EZ=T(()=>{"use strict";var GLe=St(),WLe=vn(),ZLe=Ya();WLe("toStringTag");ZLe(GLe("Symbol"),"Symbol")});var SZ=T(()=>{"use strict";var HLe=vn();HLe("unscopables")});var z_=T((DFt,TZ)=>{"use strict";var KLe=Oe(),XLe=Tt();TZ.exports=function(e,t,r){try{return KLe(XLe(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(n){}}});var PO=T((LFt,IZ)=>{"use strict";var YLe=qt(),JLe=String,QLe=TypeError;IZ.exports=function(e){if(typeof e=="object"||YLe(e))return e;throw new QLe("Can't set "+JLe(e)+" as a prototype")}});var is=T((kFt,CZ)=>{"use strict";var eke=z_(),tke=Qe(),rke=PO();CZ.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},r;try{r=eke(Object.prototype,"__proto__","set"),r(t,[]),e=t instanceof Array}catch(n){}return function(i,a){return tke(i),rke(a),e?r(i,a):i.__proto__=a,i}}():void 0)});var MO=T((NFt,AZ)=>{"use strict";var nke=Fr().f;AZ.exports=function(e,t,r){r in e||nke(e,r,{configurable:!0,get:function(){return t[r]},set:function(n){t[r]=n}})}});var Gf=T((FFt,PZ)=>{"use strict";var ike=qt(),ake=Pt(),qZ=is();PZ.exports=function(e,t,r){var n,i;return qZ&&ike(n=t.constructor)&&n!==r&&ake(i=n.prototype)&&i!==r.prototype&&qZ(e,i),e}});var Wf=T((zFt,MZ)=>{"use strict";var oke=At();MZ.exports=function(e,t){return e===void 0?arguments.length<2?"":t:oke(e)}});var OO=T((jFt,OZ)=>{"use strict";var ske=Pt(),uke=Ln();OZ.exports=function(e,t){ske(t)&&"cause"in t&&uke(e,"cause",t.cause)}});var fE=T((BFt,LZ)=>{"use strict";var lke=Oe(),RZ=Error,cke=lke("".replace),hke=function(e){return String(new RZ(e).stack)}("zxcasd"),DZ=/\n\s*at [^:]*:[^\n]*/,fke=DZ.test(hke);LZ.exports=function(e,t){if(fke&&typeof e=="string"&&!RZ.prepareStackTrace)for(;t--;)e=cke(e,DZ,"");return e}});var RO=T((UFt,kZ)=>{"use strict";var pke=Fe(),dke=Ha();kZ.exports=!pke(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",dke(1,7)),e.stack!==7):!0})});var pE=T((VFt,FZ)=>{"use strict";var mke=Ln(),vke=fE(),gke=RO(),NZ=Error.captureStackTrace;FZ.exports=function(e,t,r,n){gke&&(NZ?NZ(e,t):mke(e,"stack",vke(r,n)))}});var DO=T(($Ft,GZ)=>{"use strict";var zZ=St(),yke=Ft(),jZ=Ln(),_ke=ea(),BZ=is(),UZ=pm(),VZ=MO(),xke=Gf(),wke=Wf(),bke=OO(),Eke=pE(),Ske=gt(),$Z=Ut();GZ.exports=function(e,t,r,n){var i="stackTraceLimit",a=n?2:1,h=e.split("."),p=h[h.length-1],g=zZ.apply(null,h);if(g){var b=g.prototype;if(!$Z&&yke(b,"cause")&&delete b.cause,!r)return g;var E=zZ("Error"),q=t(function(P,L){var W=wke(n?L:P,void 0),Q=n?new g(P):new g;return W!==void 0&&jZ(Q,"message",W),Eke(Q,q,Q.stack,2),this&&_ke(b,this)&&xke(Q,this,q),arguments.length>a&&bke(Q,arguments[a]),Q});if(q.prototype=b,p!=="Error"?BZ?BZ(q,E):UZ(q,E,{name:!0}):Ske&&i in g&&(VZ(q,g,i),VZ(q,g,"prepareStackTrace")),UZ(q,g),!$Z)try{b.name!==p&&jZ(b,"name",p),b.constructor=q}catch(P){}return q}}});var KZ=T(()=>{"use strict";var ZZ=K(),Tke=ot(),gu=ta(),HZ=DO(),LO="WebAssembly",WZ=Tke[LO],dE=new Error("e",{cause:7}).cause!==7,Zf=function(e,t){var r={};r[e]=HZ(e,t,dE),ZZ({global:!0,constructor:!0,arity:1,forced:dE},r)},kO=function(e,t){if(WZ&&WZ[e]){var r={};r[e]=HZ(LO+"."+e,t,dE),ZZ({target:LO,stat:!0,constructor:!0,arity:1,forced:dE},r)}};Zf("Error",function(e){return function(r){return gu(e,this,arguments)}});Zf("EvalError",function(e){return function(r){return gu(e,this,arguments)}});Zf("RangeError",function(e){return function(r){return gu(e,this,arguments)}});Zf("ReferenceError",function(e){return function(r){return gu(e,this,arguments)}});Zf("SyntaxError",function(e){return function(r){return gu(e,this,arguments)}});Zf("TypeError",function(e){return function(r){return gu(e,this,arguments)}});Zf("URIError",function(e){return function(r){return gu(e,this,arguments)}});kO("CompileError",function(e){return function(r){return gu(e,this,arguments)}});kO("LinkError",function(e){return function(r){return gu(e,this,arguments)}});kO("RuntimeError",function(e){return function(r){return gu(e,this,arguments)}})});var NO=T((ZFt,YZ)=>{"use strict";var Ike=gt(),Cke=Fe(),Ake=Qe(),qke=An(),XZ=Wf(),mE=Error.prototype.toString,Pke=Cke(function(){if(Ike){var e=qke(Object.defineProperty({},"name",{get:function(){return this===e}}));if(mE.call(e)!=="true")return!0}return mE.call({message:1,name:2})!=="2: 1"||mE.call({})!=="Error"});YZ.exports=Pke?function(){var t=Ake(this),r=XZ(t.name,"Error"),n=XZ(t.message);return r?n?r+": "+n:r:n}:mE});var eH=T(()=>{"use strict";var Mke=br(),JZ=NO(),QZ=Error.prototype;QZ.toString!==JZ&&Mke(QZ,"toString",JZ)});var vE=T((XFt,tH)=>{"use strict";var Oke=Fe();tH.exports=!Oke(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var kn=T((YFt,nH)=>{"use strict";var Rke=Ft(),Dke=qt(),Lke=Vt(),kke=C_(),Nke=vE(),rH=kke("IE_PROTO"),FO=Object,Fke=FO.prototype;nH.exports=Nke?FO.getPrototypeOf:function(e){var t=Lke(e);if(Rke(t,rH))return t[rH];var r=t.constructor;return Dke(r)&&t instanceof r?r.prototype:t instanceof FO?Fke:null}});var Hf=T((JFt,iH)=>{"use strict";iH.exports={}});var gE=T((QFt,aH)=>{"use strict";var zke=yt(),jke=Hf(),Bke=zke("iterator"),Uke=Array.prototype;aH.exports=function(e){return e!==void 0&&(jke.Array===e||Uke[Bke]===e)}});var bl=T((ezt,sH)=>{"use strict";var Vke=Xa(),oH=Cn(),$ke=Dn(),Gke=Hf(),Wke=yt(),Zke=Wke("iterator");sH.exports=function(e){if(!$ke(e))return oH(e,Zke)||oH(e,"@@iterator")||Gke[Vke(e)]}});var lh=T((tzt,uH)=>{"use strict";var Hke=Ye(),Kke=Tt(),Xke=Qe(),Yke=ah(),Jke=bl(),Qke=TypeError;uH.exports=function(e,t){var r=arguments.length<2?Jke(e):t;if(Kke(r))return Xke(Hke(r,e));throw new Qke(Yke(e)+" is not iterable")}});var El=T((rzt,cH)=>{"use strict";var eNe=Ye(),lH=Qe(),tNe=Cn();cH.exports=function(e,t,r){var n,i;lH(e);try{if(n=tNe(e,"return"),!n){if(t==="throw")throw r;return r}n=eNe(n,e)}catch(a){i=!0,n=a}if(t==="throw")throw r;if(i)throw n;return lH(n),r}});var gn=T((nzt,dH)=>{"use strict";var rNe=Pr(),nNe=Ye(),iNe=Qe(),aNe=ah(),oNe=gE(),sNe=Ht(),hH=ea(),uNe=lh(),lNe=bl(),fH=El(),cNe=TypeError,yE=function(e,t){this.stopped=e,this.result=t},pH=yE.prototype;dH.exports=function(e,t,r){var n=r&&r.that,i=!!(r&&r.AS_ENTRIES),a=!!(r&&r.IS_RECORD),h=!!(r&&r.IS_ITERATOR),p=!!(r&&r.INTERRUPTED),g=rNe(t,n),b,E,q,P,L,W,Q,V=function(H){return b&&fH(b,"normal",H),new yE(!0,H)},$=function(H){return i?(iNe(H),p?g(H[0],H[1],V):g(H[0],H[1])):p?g(H,V):g(H)};if(a)b=e.iterator;else if(h)b=e;else{if(E=lNe(e),!E)throw new cNe(aNe(e)+" is not iterable");if(oNe(E)){for(q=0,P=sNe(e);P>q;q++)if(L=$(e[q]),L&&hH(pH,L))return L;return new yE(!1)}b=uNe(e,E)}for(W=a?e.next:b.next;!(Q=nNe(W,b)).done;){try{L=$(Q.value)}catch(H){fH(b,"throw",H)}if(typeof L=="object"&&L&&hH(pH,L))return L}return new yE(!1)}});var vH=T(()=>{"use strict";var hNe=K(),fNe=ea(),pNe=kn(),_E=is(),dNe=pm(),mH=An(),zO=Ln(),jO=Ha(),mNe=OO(),vNe=pE(),gNe=gn(),yNe=Wf(),_Ne=yt(),xNe=_Ne("toStringTag"),xE=Error,wNe=[].push,ym=function(t,r){var n=fNe(BO,this),i;_E?i=_E(new xE,n?pNe(this):BO):(i=n?this:mH(BO),zO(i,xNe,"Error")),r!==void 0&&zO(i,"message",yNe(r)),vNe(i,ym,i.stack,1),arguments.length>2&&mNe(i,arguments[2]);var a=[];return gNe(t,wNe,{that:a}),zO(i,"errors",a),i};_E?_E(ym,xE):dNe(ym,xE,{name:!0});var BO=ym.prototype=mH(xE.prototype,{constructor:jO(1,ym),message:jO(1,""),name:jO(1,"AggregateError")});hNe({global:!0,constructor:!0,arity:2},{AggregateError:ym})});var UO=T(()=>{"use strict";vH()});var xH=T(()=>{"use strict";var bNe=K(),ENe=St(),SNe=ta(),gH=Fe(),TNe=DO(),VO="AggregateError",yH=ENe(VO),_H=!gH(function(){return yH([1]).errors[0]!==1})&&gH(function(){return yH([1],VO,{cause:7}).cause!==7});bNe({global:!0,constructor:!0,arity:2,forced:_H},{AggregateError:TNe(VO,function(e){return function(r,n){return SNe(e,this,arguments)}},_H,!0)})});var cn=T((czt,wH)=>{"use strict";var INe=yt(),CNe=An(),ANe=Fr().f,$O=INe("unscopables"),GO=Array.prototype;GO[$O]===void 0&&ANe(GO,$O,{configurable:!0,value:CNe(null)});wH.exports=function(e){GO[$O][e]=!0}});var WO=T(()=>{"use strict";var qNe=K(),PNe=Vt(),MNe=Ht(),ONe=Gr(),RNe=cn();qNe({target:"Array",proto:!0},{at:function(t){var r=PNe(this),n=MNe(r),i=ONe(t),a=i>=0?i:n+i;return a<0||a>=n?void 0:r[a]}});RNe("at")});var ch=T((pzt,bH)=>{"use strict";var DNe=TypeError,LNe=9007199254740991;bH.exports=function(e){if(e>LNe)throw DNe("Maximum allowed index exceeded");return e}});var _m=T((dzt,EH)=>{"use strict";var kNe=Fe(),NNe=yt(),FNe=mu(),zNe=NNe("species");EH.exports=function(e){return FNe>=51||!kNe(function(){var t=[],r=t.constructor={};return r[zNe]=function(){return{foo:1}},t[e](Boolean).foo!==1})}});var CH=T(()=>{"use strict";var jNe=K(),BNe=Fe(),UNe=Fs(),VNe=Pt(),$Ne=Vt(),GNe=Ht(),SH=ch(),TH=rs(),WNe=mm(),ZNe=_m(),HNe=yt(),KNe=mu(),IH=HNe("isConcatSpreadable"),XNe=KNe>=51||!BNe(function(){var e=[];return e[IH]=!1,e.concat()[0]!==e}),YNe=function(e){if(!VNe(e))return!1;var t=e[IH];return t!==void 0?!!t:UNe(e)},JNe=!XNe||!ZNe("concat");jNe({target:"Array",proto:!0,arity:1,forced:JNe},{concat:function(t){var r=$Ne(this),n=WNe(r,0),i=0,a,h,p,g,b;for(a=-1,p=arguments.length;a<p;a++)if(b=a===-1?r:arguments[a],YNe(b))for(g=GNe(b),SH(i+g),h=0;h<g;h++,i++)h in b&&TH(n,i,b[h]);else SH(i+1),TH(n,i++,b);return n.length=i,n}})});var j_=T((gzt,qH)=>{"use strict";var AH=ah(),QNe=TypeError;qH.exports=function(e,t){if(!delete e[t])throw new QNe("Cannot delete property "+AH(t)+" of "+AH(e))}});var HO=T((yzt,PH)=>{"use strict";var eFe=Vt(),ZO=ts(),tFe=Ht(),rFe=j_(),nFe=Math.min;PH.exports=[].copyWithin||function(t,r){var n=eFe(this),i=tFe(n),a=ZO(t,i),h=ZO(r,i),p=arguments.length>2?arguments[2]:void 0,g=nFe((p===void 0?i:ZO(p,i))-h,i-a),b=1;for(h<a&&a<h+g&&(b=-1,h+=g-1,a+=g-1);g-->0;)h in n?n[a]=n[h]:rFe(n,a),a+=b,h+=b;return n}});var MH=T(()=>{"use strict";var iFe=K(),aFe=HO(),oFe=cn();iFe({target:"Array",proto:!0},{copyWithin:aFe});oFe("copyWithin")});var as=T((wzt,OH)=>{"use strict";var sFe=Fe();OH.exports=function(e,t){var r=[][e];return!!r&&sFe(function(){r.call(null,t||function(){return 1},1)})}});var RH=T(()=>{"use strict";var uFe=K(),lFe=qn().every,cFe=as(),hFe=cFe("every");uFe({target:"Array",proto:!0,forced:!hFe},{every:function(t){return lFe(this,t,arguments.length>1?arguments[1]:void 0)}})});var wE=T((Szt,LH)=>{"use strict";var fFe=Vt(),DH=ts(),pFe=Ht();LH.exports=function(t){for(var r=fFe(this),n=pFe(r),i=arguments.length,a=DH(i>1?arguments[1]:void 0,n),h=i>2?arguments[2]:void 0,p=h===void 0?n:DH(h,n);p>a;)r[a++]=t;return r}});var kH=T(()=>{"use strict";var dFe=K(),mFe=wE(),vFe=cn();dFe({target:"Array",proto:!0},{fill:mFe});vFe("fill")});var NH=T(()=>{"use strict";var gFe=K(),yFe=qn().filter,_Fe=_m(),xFe=_Fe("filter");gFe({target:"Array",proto:!0,forced:!xFe},{filter:function(t){return yFe(this,t,arguments.length>1?arguments[1]:void 0)}})});var zH=T(()=>{"use strict";var wFe=K(),bFe=qn().find,EFe=cn(),KO="find",FH=!0;KO in[]&&Array(1)[KO](function(){FH=!1});wFe({target:"Array",proto:!0,forced:FH},{find:function(t){return bFe(this,t,arguments.length>1?arguments[1]:void 0)}});EFe(KO)});var BH=T(()=>{"use strict";var SFe=K(),TFe=qn().findIndex,IFe=cn(),XO="findIndex",jH=!0;XO in[]&&Array(1)[XO](function(){jH=!1});SFe({target:"Array",proto:!0,forced:jH},{findIndex:function(t){return TFe(this,t,arguments.length>1?arguments[1]:void 0)}});IFe(XO)});var B_=T((Rzt,VH)=>{"use strict";var CFe=Pr(),AFe=ml(),qFe=Vt(),PFe=Ht(),UH=function(e){var t=e===1;return function(r,n,i){for(var a=qFe(r),h=AFe(a),p=CFe(n,i),g=PFe(h),b,E;g-->0;)if(b=h[g],E=p(b,g,a),E)switch(e){case 0:return b;case 1:return g;}return t?-1:void 0}};VH.exports={findLast:UH(0),findLastIndex:UH(1)}});var YO=T(()=>{"use strict";var MFe=K(),OFe=B_().findLast,RFe=cn();MFe({target:"Array",proto:!0},{findLast:function(t){return OFe(this,t,arguments.length>1?arguments[1]:void 0)}});RFe("findLast")});var JO=T(()=>{"use strict";var DFe=K(),LFe=B_().findLastIndex,kFe=cn();DFe({target:"Array",proto:!0},{findLastIndex:function(t){return LFe(this,t,arguments.length>1?arguments[1]:void 0)}});kFe("findLastIndex")});var QO=T((Fzt,GH)=>{"use strict";var NFe=Fs(),FFe=Ht(),zFe=ch(),jFe=Pr(),$H=function(e,t,r,n,i,a,h,p){for(var g=i,b=0,E=h?jFe(h,p):!1,q,P;b<n;)b in r&&(q=E?E(r[b],b,t):r[b],a>0&&NFe(q)?(P=FFe(q),g=$H(e,t,q,P,g,a-1)-1):(zFe(g+1),e[g]=q),g++),b++;return g};GH.exports=$H});var WH=T(()=>{"use strict";var BFe=K(),UFe=QO(),VFe=Vt(),$Fe=Ht(),GFe=Gr(),WFe=mm();BFe({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,r=VFe(this),n=$Fe(r),i=WFe(r,0);return i.length=UFe(i,r,r,n,0,t===void 0?1:GFe(t)),i}})});var ZH=T(()=>{"use strict";var ZFe=K(),HFe=QO(),KFe=Tt(),XFe=Vt(),YFe=Ht(),JFe=mm();ZFe({target:"Array",proto:!0},{flatMap:function(t){var r=XFe(this),n=YFe(r),i;return KFe(t),i=JFe(r,0),i.length=HFe(i,r,r,n,0,1,t,arguments.length>1?arguments[1]:void 0),i}})});var eR=T((Vzt,HH)=>{"use strict";var QFe=qn().forEach,eze=as(),tze=eze("forEach");HH.exports=tze?[].forEach:function(t){return QFe(this,t,arguments.length>1?arguments[1]:void 0)}});var XH=T(()=>{"use strict";var rze=K(),KH=eR();rze({target:"Array",proto:!0,forced:[].forEach!==KH},{forEach:KH})});var bE=T((Wzt,YH)=>{"use strict";var nze=Qe(),ize=El();YH.exports=function(e,t,r,n){try{return n?t(nze(r)[0],r[1]):t(r)}catch(i){ize(e,"throw",i)}}});var tR=T((Zzt,eK)=>{"use strict";var aze=Pr(),oze=Ye(),sze=Vt(),uze=bE(),lze=gE(),cze=zs(),hze=Ht(),JH=rs(),fze=lh(),pze=bl(),QH=Array;eK.exports=function(t){var r=sze(t),n=cze(this),i=arguments.length,a=i>1?arguments[1]:void 0,h=a!==void 0;h&&(a=aze(a,i>2?arguments[2]:void 0));var p=pze(r),g=0,b,E,q,P,L,W;if(p&&!(this===QH&&lze(p)))for(P=fze(r,p),L=P.next,E=n?new this:[];!(q=oze(L,P)).done;g++)W=h?uze(P,a,[q.value,g],!0):q.value,JH(E,g,W);else for(b=hze(r),E=n?new this(b):QH(b);b>g;g++)W=h?a(r[g],g):r[g],JH(E,g,W);return E.length=g,E}});var U_=T((Hzt,iK)=>{"use strict";var dze=yt(),rK=dze("iterator"),nK=!1;try{tK=0,rR={next:function(){return{done:!!tK++}},return:function(){nK=!0}},rR[rK]=function(){return this},Array.from(rR,function(){throw 2})}catch(e){}var tK,rR;iK.exports=function(e,t){try{if(!t&&!nK)return!1}catch(i){return!1}var r=!1;try{var n={};n[rK]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(i){}return r}});var aK=T(()=>{"use strict";var mze=K(),vze=tR(),gze=U_(),yze=!gze(function(e){Array.from(e)});mze({target:"Array",stat:!0,forced:yze},{from:vze})});var oK=T(()=>{"use strict";var _ze=K(),xze=fm().includes,wze=Fe(),bze=cn(),Eze=wze(function(){return!Array(1).includes()});_ze({target:"Array",proto:!0,forced:Eze},{includes:function(t){return xze(this,t,arguments.length>1?arguments[1]:void 0)}});bze("includes")});var uK=T(()=>{"use strict";var Sze=K(),Tze=yl(),Ize=fm().indexOf,Cze=as(),nR=Tze([].indexOf),sK=!!nR&&1/nR([1],1,-0)<0,Aze=sK||!Cze("indexOf");Sze({target:"Array",proto:!0,forced:Aze},{indexOf:function(t){var r=arguments.length>1?arguments[1]:void 0;return sK?nR(this,t,r)||0:Ize(this,t,r)}})});var lK=T(()=>{"use strict";var qze=K(),Pze=Fs();qze({target:"Array",stat:!0},{isArray:Pze})});var Kf=T((njt,fK)=>{"use strict";var Mze=Fe(),Oze=qt(),Rze=Pt(),Dze=An(),cK=kn(),Lze=br(),kze=yt(),Nze=Ut(),oR=kze("iterator"),hK=!1,Sl,iR,aR;[].keys&&(aR=[].keys(),"next"in aR?(iR=cK(cK(aR)),iR!==Object.prototype&&(Sl=iR)):hK=!0);var Fze=!Rze(Sl)||Mze(function(){var e={};return Sl[oR].call(e)!==e});Fze?Sl={}:Nze&&(Sl=Dze(Sl));Oze(Sl[oR])||Lze(Sl,oR,function(){return this});fK.exports={IteratorPrototype:Sl,BUGGY_SAFARI_ITERATORS:hK}});var hh=T((ijt,pK)=>{"use strict";var zze=Kf().IteratorPrototype,jze=An(),Bze=Ha(),Uze=Ya(),Vze=Hf(),$ze=function(){return this};pK.exports=function(e,t,r,n){var i=t+" Iterator";return e.prototype=jze(zze,{next:Bze(+!n,r)}),Uze(e,i,!1,!0),Vze[i]=$ze,e}});var TE=T((ajt,EK)=>{"use strict";var Gze=K(),Wze=Ye(),EE=Ut(),wK=Ff(),Zze=qt(),Hze=hh(),dK=kn(),mK=is(),Kze=Ya(),Xze=Ln(),sR=br(),Yze=yt(),vK=Hf(),bK=Kf(),Jze=wK.PROPER,Qze=wK.CONFIGURABLE,gK=bK.IteratorPrototype,SE=bK.BUGGY_SAFARI_ITERATORS,V_=Yze("iterator"),yK="keys",$_="values",_K="entries",xK=function(){return this};EK.exports=function(e,t,r,n,i,a,h){Hze(r,t,n);var p=function($){if($===i&&P)return P;if(!SE&&$&&$ in E)return E[$];switch($){case yK:return function(){return new r(this,$)};case $_:return function(){return new r(this,$)};case _K:return function(){return new r(this,$)};}return function(){return new r(this)}},g=t+" Iterator",b=!1,E=e.prototype,q=E[V_]||E["@@iterator"]||i&&E[i],P=!SE&&q||p(i),L=t==="Array"&&E.entries||q,W,Q,V;if(L&&(W=dK(L.call(new e)),W!==Object.prototype&&W.next&&(!EE&&dK(W)!==gK&&(mK?mK(W,gK):Zze(W[V_])||sR(W,V_,xK)),Kze(W,g,!0,!0),EE&&(vK[g]=xK))),Jze&&i===$_&&q&&q.name!==$_&&(!EE&&Qze?Xze(E,"name",$_):(b=!0,P=function(){return Wze(q,this)})),i)if(Q={values:p($_),keys:a?P:p(yK),entries:p(_K)},h)for(V in Q)(SE||b||!(V in E))&&sR(E,V,Q[V]);else Gze({target:t,proto:!0,forced:SE||b},Q);return(!EE||h)&&E[V_]!==P&&sR(E,V_,P,{name:i}),vK[t]=P,Q}});var Mi=T((ojt,SK)=>{"use strict";SK.exports=function(e,t){return{value:e,done:t}}});var G_=T((sjt,qK)=>{"use strict";var eje=Bn(),uR=cn(),TK=Hf(),CK=vr(),tje=Fr().f,rje=TE(),IE=Mi(),nje=Ut(),ije=gt(),AK="Array Iterator",aje=CK.set,oje=CK.getterFor(AK);qK.exports=rje(Array,"Array",function(e,t){aje(this,{type:AK,target:eje(e),index:0,kind:t})},function(){var e=oje(this),t=e.target,r=e.kind,n=e.index++;if(!t||n>=t.length)return e.target=void 0,IE(void 0,!0);switch(r){case"keys":return IE(n,!1);case"values":return IE(t[n],!1);}return IE([n,t[n]],!1)},"values");var IK=TK.Arguments=TK.Array;uR("keys");uR("values");uR("entries");if(!nje&&ije&&IK.name!=="values")try{tje(IK,"name",{value:"values"})}catch(e){}});var PK=T(()=>{"use strict";var sje=K(),uje=Oe(),lje=ml(),cje=Bn(),hje=as(),fje=uje([].join),pje=lje!==Object,dje=pje||!hje("join",",");sje({target:"Array",proto:!0,forced:dje},{join:function(t){return fje(cje(this),t===void 0?",":t)}})});var cR=T((cjt,OK)=>{"use strict";var mje=ta(),vje=Bn(),gje=Gr(),yje=Ht(),_je=as(),xje=Math.min,lR=[].lastIndexOf,MK=!!lR&&1/[1].lastIndexOf(1,-0)<0,wje=_je("lastIndexOf"),bje=MK||!wje;OK.exports=bje?function(t){if(MK)return mje(lR,this,arguments)||0;var r=vje(this),n=yje(r),i=n-1;for(arguments.length>1&&(i=xje(i,gje(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in r&&r[i]===t)return i||0;return-1}:lR});var DK=T(()=>{"use strict";var Eje=K(),RK=cR();Eje({target:"Array",proto:!0,forced:RK!==[].lastIndexOf},{lastIndexOf:RK})});var LK=T(()=>{"use strict";var Sje=K(),Tje=qn().map,Ije=_m(),Cje=Ije("map");Sje({target:"Array",proto:!0,forced:!Cje},{map:function(t){return Tje(this,t,arguments.length>1?arguments[1]:void 0)}})});var NK=T(()=>{"use strict";var Aje=K(),qje=Fe(),Pje=zs(),Mje=rs(),kK=Array,Oje=qje(function(){function e(){}return!(kK.of.call(e)instanceof e)});Aje({target:"Array",stat:!0,forced:Oje},{of:function(){for(var t=0,r=arguments.length,n=new(Pje(this)?this:kK)(r);r>t;)Mje(n,t,arguments[t++]);return n.length=r,n}})});var CE=T((gjt,FK)=>{"use strict";var Rje=gt(),Dje=Fs(),Lje=TypeError,kje=Object.getOwnPropertyDescriptor,Nje=Rje&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();FK.exports=Nje?function(e,t){if(Dje(e)&&!kje(e,"length").writable)throw new Lje("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}});var zK=T(()=>{"use strict";var Fje=K(),zje=Vt(),jje=Ht(),Bje=CE(),Uje=ch(),Vje=Fe(),$je=Vje(function(){return[].push.call({length:4294967296},1)!==4294967297}),Gje=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},Wje=$je||!Gje();Fje({target:"Array",proto:!0,arity:1,forced:Wje},{push:function(t){var r=zje(this),n=jje(r),i=arguments.length;Uje(n+i);for(var a=0;a<i;a++)r[n]=arguments[a],n++;return Bje(r,n),n}})});var W_=T((xjt,BK)=>{"use strict";var Zje=Tt(),Hje=Vt(),Kje=ml(),Xje=Ht(),Yje=TypeError,jK=function(e){return function(t,r,n,i){Zje(r);var a=Hje(t),h=Kje(a),p=Xje(a),g=e?p-1:0,b=e?-1:1;if(n<2)for(;;){if(g in h){i=h[g],g+=b;break}if(g+=b,e?g<0:p<=g)throw new Yje("Reduce of empty array with no initial value")}for(;e?g>=0:p>g;g+=b)g in h&&(i=r(i,h[g],g,a));return i}};BK.exports={left:jK(!1),right:jK(!0)}});var yu=T((wjt,UK)=>{"use strict";var Jje=ot(),Qje=Pi();UK.exports=Qje(Jje.process)==="process"});var $K=T(()=>{"use strict";var eBe=K(),tBe=W_().left,rBe=as(),VK=mu(),nBe=yu(),iBe=!nBe&&VK>79&&VK<83,aBe=iBe||!rBe("reduce");eBe({target:"Array",proto:!0,forced:aBe},{reduce:function(t){var r=arguments.length;return tBe(this,t,r,r>1?arguments[1]:void 0)}})});var WK=T(()=>{"use strict";var oBe=K(),sBe=W_().right,uBe=as(),GK=mu(),lBe=yu(),cBe=!lBe&&GK>79&&GK<83,hBe=cBe||!uBe("reduceRight");oBe({target:"Array",proto:!0,forced:hBe},{reduceRight:function(t){return sBe(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var HK=T(()=>{"use strict";var fBe=K(),pBe=Oe(),dBe=Fs(),mBe=pBe([].reverse),ZK=[1,2];fBe({target:"Array",proto:!0,forced:String(ZK)===String(ZK.reverse())},{reverse:function(){return dBe(this)&&(this.length=this.length),mBe(this)}})});var YK=T(()=>{"use strict";var vBe=K(),KK=Fs(),gBe=zs(),yBe=Pt(),XK=ts(),_Be=Ht(),xBe=Bn(),wBe=rs(),bBe=yt(),EBe=_m(),SBe=xl(),TBe=EBe("slice"),IBe=bBe("species"),hR=Array,CBe=Math.max;vBe({target:"Array",proto:!0,forced:!TBe},{slice:function(t,r){var n=xBe(this),i=_Be(n),a=XK(t,i),h=XK(r===void 0?i:r,i),p,g,b;if(KK(n)&&(p=n.constructor,gBe(p)&&(p===hR||KK(p.prototype))?p=void 0:yBe(p)&&(p=p[IBe],p===null&&(p=void 0)),p===hR||p===void 0))return SBe(n,a,h);for(g=new(p===void 0?hR:p)(CBe(h-a,0)),b=0;a<h;a++,b++)a in n&&wBe(g,b,n[a]);return g.length=b,g}})});var JK=T(()=>{"use strict";var ABe=K(),qBe=qn().some,PBe=as(),MBe=PBe("some");ABe({target:"Array",proto:!0,forced:!MBe},{some:function(t){return qBe(this,t,arguments.length>1?arguments[1]:void 0)}})});var AE=T((Ojt,e9)=>{"use strict";var QK=Bf(),OBe=Math.floor,fR=function(e,t){var r=e.length,n=OBe(r/2);return r<8?RBe(e,t):DBe(e,fR(QK(e,0,n),t),fR(QK(e,n),t),t)},RBe=function(e,t){for(var r=e.length,n=1,i,a;n<r;){for(a=n,i=e[n];a&&t(e[a-1],i)>0;)e[a]=e[--a];a!==n++&&(e[a]=i)}return e},DBe=function(e,t,r,n){for(var i=t.length,a=r.length,h=0,p=0;h<i||p<a;)e[h+p]=h<i&&p<a?n(t[h],r[p])<=0?t[h++]:r[p++]:h<i?t[h++]:r[p++];return e};e9.exports=fR});var pR=T((Rjt,r9)=>{"use strict";var LBe=du(),t9=LBe.match(/firefox\/(\d+)/i);r9.exports=!!t9&&+t9[1]});var dR=T((Djt,n9)=>{"use strict";var kBe=du();n9.exports=/MSIE|Trident/.test(kBe)});var qE=T((Ljt,a9)=>{"use strict";var NBe=du(),i9=NBe.match(/AppleWebKit\/(\d+)\./);a9.exports=!!i9&&+i9[1]});var d9=T(()=>{"use strict";var FBe=K(),f9=Oe(),zBe=Tt(),jBe=Vt(),o9=Ht(),BBe=j_(),s9=At(),mR=Fe(),UBe=AE(),VBe=as(),u9=pR(),$Be=dR(),l9=mu(),c9=qE(),fh=[],h9=f9(fh.sort),GBe=f9(fh.push),WBe=mR(function(){fh.sort(void 0)}),ZBe=mR(function(){fh.sort(null)}),HBe=VBe("sort"),p9=!mR(function(){if(l9)return l9<70;if(!(u9&&u9>3)){if($Be)return!0;if(c9)return c9<603;var e="",t,r,n,i;for(t=65;t<76;t++){switch(r=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2;}for(i=0;i<47;i++)fh.push({k:r+i,v:n})}for(fh.sort(function(a,h){return h.v-a.v}),i=0;i<fh.length;i++)r=fh[i].k.charAt(0),e.charAt(e.length-1)!==r&&(e+=r);return e!=="DGBEFHACIJK"}}),KBe=WBe||!ZBe||!HBe||!p9,XBe=function(e){return function(t,r){return r===void 0?-1:t===void 0?1:e!==void 0?+e(t,r)||0:s9(t)>s9(r)?1:-1}};FBe({target:"Array",proto:!0,forced:KBe},{sort:function(t){t!==void 0&&zBe(t);var r=jBe(this);if(p9)return t===void 0?h9(r):h9(r,t);var n=[],i=o9(r),a,h;for(h=0;h<i;h++)h in r&&GBe(n,r[h]);for(UBe(n,XBe(t)),a=o9(n),h=0;h<a;)r[h]=n[h++];for(;h<i;)BBe(r,h++);return r}})});var ph=T((Fjt,v9)=>{"use strict";var YBe=St(),JBe=en(),QBe=yt(),e3e=gt(),m9=QBe("species");v9.exports=function(e){var t=YBe(e);e3e&&t&&!t[m9]&&JBe(t,m9,{configurable:!0,get:function(){return this}})}});var g9=T(()=>{"use strict";var t3e=ph();t3e("Array")});var y9=T(()=>{"use strict";var r3e=K(),n3e=Vt(),i3e=ts(),a3e=Gr(),o3e=Ht(),s3e=CE(),u3e=ch(),l3e=mm(),c3e=rs(),vR=j_(),h3e=_m(),f3e=h3e("splice"),p3e=Math.max,d3e=Math.min;r3e({target:"Array",proto:!0,forced:!f3e},{splice:function(t,r){var n=n3e(this),i=o3e(n),a=i3e(t,i),h=arguments.length,p,g,b,E,q,P;for(h===0?p=g=0:h===1?(p=0,g=i-a):(p=h-2,g=d3e(p3e(a3e(r),0),i-a)),u3e(i+p-g),b=l3e(n,g),E=0;E<g;E++)q=a+E,q in n&&c3e(b,E,n[q]);if(b.length=g,p<g){for(E=a;E<i-g;E++)q=E+g,P=E+p,q in n?n[P]=n[q]:vR(n,P);for(E=i;E>i-g+p;E--)vR(n,E-1)}else if(p>g)for(E=i-g;E>a;E--)q=E+g-1,P=E+p-1,q in n?n[P]=n[q]:vR(n,P);for(E=0;E<p;E++)n[E+a]=arguments[E+2];return s3e(n,i-g+p),b}})});var gR=T((Vjt,_9)=>{"use strict";var m3e=Ht();_9.exports=function(e,t){for(var r=m3e(e),n=new t(r),i=0;i<r;i++)n[i]=e[r-i-1];return n}});var yR=T(()=>{"use strict";var v3e=K(),g3e=gR(),y3e=Bn(),_3e=cn(),x3e=Array;v3e({target:"Array",proto:!0},{toReversed:function(){return g3e(y3e(this),x3e)}});_3e("toReversed")});var Xf=T((Wjt,x9)=>{"use strict";var w3e=Ht();x9.exports=function(e,t){for(var r=0,n=w3e(t),i=new e(n);n>r;)i[r]=t[r++];return i}});var _R=T((Zjt,w9)=>{"use strict";var b3e=ot();w9.exports=function(e){return b3e[e].prototype}});var xR=T(()=>{"use strict";var E3e=K(),S3e=Oe(),T3e=Tt(),I3e=Bn(),C3e=Xf(),A3e=_R(),q3e=cn(),P3e=Array,M3e=S3e(A3e("Array").sort);E3e({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&T3e(t);var r=I3e(this),n=C3e(P3e,r);return M3e(n,t)}});q3e("toSorted")});var wR=T(()=>{"use strict";var O3e=K(),R3e=cn(),D3e=ch(),L3e=Ht(),k3e=ts(),N3e=Bn(),F3e=Gr(),z3e=Array,j3e=Math.max,B3e=Math.min;O3e({target:"Array",proto:!0},{toSpliced:function(t,r){var n=N3e(this),i=L3e(n),a=k3e(t,i),h=arguments.length,p=0,g,b,E,q;for(h===0?g=b=0:h===1?(g=0,b=i-a):(g=h-2,b=B3e(j3e(F3e(r),0),i-a)),E=D3e(i+g-b),q=z3e(E);p<a;p++)q[p]=n[p];for(;p<a+g;p++)q[p]=arguments[p-a+2];for(;p<E;p++)q[p]=n[p+b-g];return q}});R3e("toSpliced")});var b9=T(()=>{"use strict";var U3e=cn();U3e("flat")});var E9=T(()=>{"use strict";var V3e=cn();V3e("flatMap")});var S9=T(()=>{"use strict";var $3e=K(),G3e=Vt(),W3e=Ht(),Z3e=CE(),H3e=j_(),K3e=ch(),X3e=[].unshift(0)!==1,Y3e=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},J3e=X3e||!Y3e();$3e({target:"Array",proto:!0,arity:1,forced:J3e},{unshift:function(t){var r=G3e(this),n=W3e(r),i=arguments.length;if(i){K3e(n+i);for(var a=n;a--;){var h=a+i;a in r?r[h]=r[a]:H3e(r,h)}for(var p=0;p<i;p++)r[p]=arguments[p]}return Z3e(r,n+i)}})});var bR=T((iBt,T9)=>{"use strict";var Q3e=Ht(),e4e=Gr(),t4e=RangeError;T9.exports=function(e,t,r,n){var i=Q3e(e),a=e4e(r),h=a<0?i+a:a;if(h>=i||h<0)throw new t4e("Incorrect index");for(var p=new t(i),g=0;g<i;g++)p[g]=g===h?n:e[g];return p}});var ER=T(()=>{"use strict";var r4e=K(),n4e=bR(),i4e=Bn(),a4e=Array;r4e({target:"Array",proto:!0},{with:function(e,t){return n4e(i4e(this),a4e,e,t)}})});var PE=T((sBt,I9)=>{"use strict";I9.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var os=T((uBt,C9)=>{"use strict";var o4e=br();C9.exports=function(e,t,r){for(var n in t)o4e(e,n,t[n],r);return e}});var ra=T((lBt,A9)=>{"use strict";var s4e=ea(),u4e=TypeError;A9.exports=function(e,t){if(s4e(t,e))return e;throw new u4e("Incorrect invocation")}});var xm=T((cBt,q9)=>{"use strict";var l4e=Gr(),c4e=Ka(),h4e=RangeError;q9.exports=function(e){if(e===void 0)return 0;var t=l4e(e),r=c4e(t);if(t!==r)throw new h4e("Wrong length or index");return r}});var ME=T((hBt,P9)=>{"use strict";P9.exports=Math.sign||function(t){var r=+t;return r===0||r!==r?r:r<0?-1:1}});var SR=T((fBt,R9)=>{"use strict";var f4e=ME(),p4e=Math.abs,O9=2220446049250313e-31,M9=1/O9,d4e=function(e){return e+M9-M9};R9.exports=function(e,t,r,n){var i=+e,a=p4e(i),h=f4e(i);if(a<n)return h*d4e(a/n/t)*n*t;var p=(1+t/O9)*a,g=p-(p-a);return g>r||g!==g?h*(1/0):h*g}});var OE=T((pBt,D9)=>{"use strict";var m4e=SR(),v4e=1.1920928955078125e-7,g4e=34028234663852886e22,y4e=11754943508222875e-54;D9.exports=Math.fround||function(t){return m4e(t,v4e,g4e,y4e)}});var RE=T((dBt,L9)=>{"use strict";var _4e=Array,x4e=Math.abs,Tl=Math.pow,w4e=Math.floor,b4e=Math.log,E4e=Math.LN2,S4e=function(e,t,r){var n=_4e(r),i=r*8-t-1,a=(1<<i)-1,h=a>>1,p=t===23?Tl(2,-24)-Tl(2,-77):0,g=e<0||e===0&&1/e<0?1:0,b=0,E,q,P;for(e=x4e(e),e!==e||e===1/0?(q=e!==e?1:0,E=a):(E=w4e(b4e(e)/E4e),P=Tl(2,-E),e*P<1&&(E--,P*=2),E+h>=1?e+=p/P:e+=p*Tl(2,1-h),e*P>=2&&(E++,P/=2),E+h>=a?(q=0,E=a):E+h>=1?(q=(e*P-1)*Tl(2,t),E+=h):(q=e*Tl(2,h-1)*Tl(2,t),E=0));t>=8;)n[b++]=q&255,q/=256,t-=8;for(E=E<<t|q,i+=t;i>0;)n[b++]=E&255,E/=256,i-=8;return n[--b]|=g*128,n},T4e=function(e,t){var r=e.length,n=r*8-t-1,i=(1<<n)-1,a=i>>1,h=n-7,p=r-1,g=e[p--],b=g&127,E;for(g>>=7;h>0;)b=b*256+e[p--],h-=8;for(E=b&(1<<-h)-1,b>>=-h,h+=t;h>0;)E=E*256+e[p--],h-=8;if(b===0)b=1-a;else{if(b===i)return E?NaN:g?-1/0:1/0;E+=Tl(2,t),b-=a}return(g?-1:1)*E*Tl(2,b-t)};L9.exports={pack:S4e,unpack:T4e}});var K_=T((mBt,Q9)=>{"use strict";var zE=ot(),MR=Oe(),TR=gt(),I4e=PE(),H9=Ff(),k9=Ln(),C4e=en(),N9=os(),IR=Fe(),DE=ra(),A4e=Gr(),q4e=Ka(),NE=xm(),P4e=OE(),K9=RE(),M4e=kn(),F9=is(),O4e=gl().f,R4e=wE(),D4e=Bf(),X9=Ya(),OR=vr(),L4e=H9.PROPER,z9=H9.CONFIGURABLE,bm="ArrayBuffer",jE="DataView",Em="prototype",k4e="Wrong length",Y9="Wrong index",j9=OR.getterFor(bm),H_=OR.getterFor(jE),B9=OR.set,ss=zE[bm],Po=ss,wm=Po&&Po[Em],_u=zE[jE],Yf=_u&&_u[Em],U9=Object.prototype,N4e=zE.Array,FE=zE.RangeError,F4e=MR(R4e),z4e=MR([].reverse),J9=K9.pack,V9=K9.unpack,$9=function(e){return[e&255]},G9=function(e){return[e&255,e>>8&255]},W9=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},Z9=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},j4e=function(e){return J9(P4e(e),23,4)},B4e=function(e){return J9(e,52,8)},LE=function(e,t,r){C4e(e[Em],t,{configurable:!0,get:function(){return r(this)[t]}})},dh=function(e,t,r,n){var i=H_(e),a=NE(r),h=!!n;if(a+t>i.byteLength)throw new FE(Y9);var p=i.bytes,g=a+i.byteOffset,b=D4e(p,g,g+t);return h?b:z4e(b)},mh=function(e,t,r,n,i,a){var h=H_(e),p=NE(r),g=n(+i),b=!!a;if(p+t>h.byteLength)throw new FE(Y9);for(var E=h.bytes,q=p+h.byteOffset,P=0;P<t;P++)E[q+P]=g[b?P:t-P-1]};if(!I4e)Po=function(t){DE(this,wm);var r=NE(t);B9(this,{type:bm,bytes:F4e(N4e(r),0),byteLength:r}),TR||(this.byteLength=r,this.detached=!1)},wm=Po[Em],_u=function(t,r,n){DE(this,Yf),DE(t,wm);var i=j9(t),a=i.byteLength,h=A4e(r);if(h<0||h>a)throw new FE("Wrong offset");if(n=n===void 0?a-h:q4e(n),h+n>a)throw new FE(k4e);B9(this,{type:jE,buffer:t,byteLength:n,byteOffset:h,bytes:i.bytes}),TR||(this.buffer=t,this.byteLength=n,this.byteOffset=h)},Yf=_u[Em],TR&&(LE(Po,"byteLength",j9),LE(_u,"buffer",H_),LE(_u,"byteLength",H_),LE(_u,"byteOffset",H_)),N9(Yf,{getInt8:function(t){return dh(this,1,t)[0]<<24>>24},getUint8:function(t){return dh(this,1,t)[0]},getInt16:function(t){var r=dh(this,2,t,arguments.length>1?arguments[1]:!1);return(r[1]<<8|r[0])<<16>>16},getUint16:function(t){var r=dh(this,2,t,arguments.length>1?arguments[1]:!1);return r[1]<<8|r[0]},getInt32:function(t){return Z9(dh(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return Z9(dh(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return V9(dh(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return V9(dh(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,r){mh(this,1,t,$9,r)},setUint8:function(t,r){mh(this,1,t,$9,r)},setInt16:function(t,r){mh(this,2,t,G9,r,arguments.length>2?arguments[2]:!1)},setUint16:function(t,r){mh(this,2,t,G9,r,arguments.length>2?arguments[2]:!1)},setInt32:function(t,r){mh(this,4,t,W9,r,arguments.length>2?arguments[2]:!1)},setUint32:function(t,r){mh(this,4,t,W9,r,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,r){mh(this,4,t,j4e,r,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,r){mh(this,8,t,B4e,r,arguments.length>2?arguments[2]:!1)}});else{if(CR=L4e&&ss.name!==bm,!IR(function(){ss(1)})||!IR(function(){new ss(-1)})||IR(function(){return new ss,new ss(1.5),new ss(NaN),ss.length!==1||CR&&!z9})){for(Po=function(t){return DE(this,wm),new ss(NE(t))},Po[Em]=wm,AR=O4e(ss),qR=0;AR.length>qR;)(kE=AR[qR++])in Po||k9(Po,kE,ss[kE]);wm.constructor=Po}else CR&&z9&&k9(ss,"name",bm);F9&&M4e(Yf)!==U9&&F9(Yf,U9),Z_=new _u(new Po(2)),PR=MR(Yf.setInt8),Z_.setInt8(0,2147483648),Z_.setInt8(1,2147483649),(Z_.getInt8(0)||!Z_.getInt8(1))&&N9(Yf,{setInt8:function(t,r){PR(this,t,r<<24>>24)},setUint8:function(t,r){PR(this,t,r<<24>>24)}},{unsafe:!0})}var CR,AR,qR,kE,Z_,PR;X9(Po,bm);X9(_u,jE);Q9.exports={ArrayBuffer:Po,DataView:_u}});var t7=T(()=>{"use strict";var U4e=K(),V4e=ot(),$4e=K_(),G4e=ph(),RR="ArrayBuffer",e7=$4e[RR],W4e=V4e[RR];U4e({global:!0,constructor:!0,forced:W4e!==e7},{ArrayBuffer:e7});G4e(RR)});var zt=T((yBt,h7)=>{"use strict";var Z4e=PE(),NR=gt(),Ta=ot(),a7=qt(),VE=Pt(),gh=Ft(),FR=Xa(),H4e=ah(),K4e=Ln(),DR=br(),X4e=en(),Y4e=ea(),$E=kn(),Tm=is(),J4e=yt(),Q4e=oh(),o7=vr(),s7=o7.enforce,eUe=o7.get,BE=Ta.Int8Array,LR=BE&&BE.prototype,r7=Ta.Uint8ClampedArray,n7=r7&&r7.prototype,xu=BE&&$E(BE),js=LR&&$E(LR),tUe=Object.prototype,zR=Ta.TypeError,i7=J4e("toStringTag"),kR=Q4e("TYPED_ARRAY_TAG"),UE="TypedArrayConstructor",Il=Z4e&&!!Tm&&FR(Ta.opera)!=="Opera",u7=!1,Qa,vh,Sm,Cl={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},jR={BigInt64Array:8,BigUint64Array:8},rUe=function(t){if(!VE(t))return!1;var r=FR(t);return r==="DataView"||gh(Cl,r)||gh(jR,r)},l7=function(e){var t=$E(e);if(VE(t)){var r=eUe(t);return r&&gh(r,UE)?r[UE]:l7(t)}},c7=function(e){if(!VE(e))return!1;var t=FR(e);return gh(Cl,t)||gh(jR,t)},nUe=function(e){if(c7(e))return e;throw new zR("Target is not a typed array")},iUe=function(e){if(a7(e)&&(!Tm||Y4e(xu,e)))return e;throw new zR(H4e(e)+" is not a typed array constructor")},aUe=function(e,t,r,n){if(NR){if(r)for(var i in Cl){var a=Ta[i];if(a&&gh(a.prototype,e))try{delete a.prototype[e]}catch(h){try{a.prototype[e]=t}catch(p){}}}(!js[e]||r)&&DR(js,e,r?t:Il&&LR[e]||t,n)}},oUe=function(e,t,r){var n,i;if(NR){if(Tm){if(r){for(n in Cl)if(i=Ta[n],i&&gh(i,e))try{delete i[e]}catch(a){}}if(!xu[e]||r)try{return DR(xu,e,r?t:Il&&xu[e]||t)}catch(a){}else return}for(n in Cl)i=Ta[n],i&&(!i[e]||r)&&DR(i,e,t)}};for(Qa in Cl)vh=Ta[Qa],Sm=vh&&vh.prototype,Sm?s7(Sm)[UE]=vh:Il=!1;for(Qa in jR)vh=Ta[Qa],Sm=vh&&vh.prototype,Sm&&(s7(Sm)[UE]=vh);if((!Il||!a7(xu)||xu===Function.prototype)&&(xu=function(){throw new zR("Incorrect invocation")},Il))for(Qa in Cl)Ta[Qa]&&Tm(Ta[Qa],xu);if((!Il||!js||js===tUe)&&(js=xu.prototype,Il))for(Qa in Cl)Ta[Qa]&&Tm(Ta[Qa].prototype,js);Il&&$E(n7)!==js&&Tm(n7,js);if(NR&&!gh(js,i7)){u7=!0,X4e(js,i7,{configurable:!0,get:function(){return VE(this)?this[kR]:void 0}});for(Qa in Cl)Ta[Qa]&&K4e(Ta[Qa],kR,Qa)}h7.exports={NATIVE_ARRAY_BUFFER_VIEWS:Il,TYPED_ARRAY_TAG:u7&&kR,aTypedArray:nUe,aTypedArrayConstructor:iUe,exportTypedArrayMethod:aUe,exportTypedArrayStaticMethod:oUe,getTypedArrayConstructor:l7,isView:rUe,isTypedArray:c7,TypedArray:xu,TypedArrayPrototype:js}});var p7=T(()=>{"use strict";var sUe=K(),f7=zt(),uUe=f7.NATIVE_ARRAY_BUFFER_VIEWS;sUe({target:"ArrayBuffer",stat:!0,forced:!uUe},{isView:f7.isView})});var Im=T((wBt,d7)=>{"use strict";var lUe=zs(),cUe=ah(),hUe=TypeError;d7.exports=function(e){if(lUe(e))return e;throw new hUe(cUe(e)+" is not a constructor")}});var Jf=T((bBt,v7)=>{"use strict";var m7=Qe(),fUe=Im(),pUe=Dn(),dUe=yt(),mUe=dUe("species");v7.exports=function(e,t){var r=m7(e).constructor,n;return r===void 0||pUe(n=m7(r)[mUe])?t:fUe(n)}});var b7=T(()=>{"use strict";var vUe=K(),UR=yl(),gUe=Fe(),x7=K_(),g7=Qe(),y7=ts(),yUe=Ka(),_Ue=Jf(),VR=x7.ArrayBuffer,BR=x7.DataView,w7=BR.prototype,_7=UR(VR.prototype.slice),xUe=UR(w7.getUint8),wUe=UR(w7.setUint8),bUe=gUe(function(){return!new VR(2).slice(1,void 0).byteLength});vUe({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:bUe},{slice:function(t,r){if(_7&&r===void 0)return _7(g7(this),t);for(var n=g7(this).byteLength,i=y7(t,n),a=y7(r===void 0?n:r,n),h=new(_Ue(this,VR))(yUe(a-i)),p=new BR(this),g=new BR(h),b=0;i<a;)wUe(g,b++,xUe(p,i++));return h}})});var E7=T(()=>{"use strict";var EUe=K(),SUe=K_(),TUe=PE();EUe({global:!0,constructor:!0,forced:!TUe},{DataView:SUe.DataView})});var S7=T(()=>{"use strict";E7()});var T7=T(()=>{"use strict";var IUe=K(),CUe=Oe(),AUe=Fe(),qUe=AUe(function(){return new Date(16e11).getYear()!==120}),PUe=CUe(Date.prototype.getFullYear);IUe({target:"Date",proto:!0,forced:qUe},{getYear:function(){return PUe(this)-1900}})});var C7=T(()=>{"use strict";var MUe=K(),OUe=Oe(),I7=Date,RUe=OUe(I7.prototype.getTime);MUe({target:"Date",stat:!0},{now:function(){return RUe(new I7)}})});var P7=T(()=>{"use strict";var DUe=K(),A7=Oe(),LUe=Gr(),q7=Date.prototype,kUe=A7(q7.getTime),NUe=A7(q7.setFullYear);DUe({target:"Date",proto:!0},{setYear:function(t){kUe(this);var r=LUe(t),n=r>=0&&r<=99?r+1900:r;return NUe(this,n)}})});var M7=T(()=>{"use strict";var FUe=K();FUe({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var X_=T((NBt,O7)=>{"use strict";var zUe=Gr(),jUe=At(),BUe=$r(),UUe=RangeError;O7.exports=function(t){var r=jUe(BUe(this)),n="",i=zUe(t);if(i<0||i===1/0)throw new UUe("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(r+=r))i&1&&(n+=r);return n}});var GE=T((FBt,k7)=>{"use strict";var L7=Oe(),VUe=Ka(),R7=At(),$Ue=X_(),GUe=$r(),WUe=L7($Ue),ZUe=L7("".slice),HUe=Math.ceil,D7=function(e){return function(t,r,n){var i=R7(GUe(t)),a=VUe(r),h=i.length,p=n===void 0?" ":R7(n),g,b;return a<=h||p===""?i:(g=a-h,b=WUe(p,HUe(g/p.length)),b.length>g&&(b=ZUe(b,0,g)),e?i+b:b+i)}};k7.exports={start:D7(!1),end:D7(!0)}});var z7=T((zBt,F7)=>{"use strict";var yh=Oe(),N7=Fe(),Qf=GE().start,KUe=RangeError,XUe=isFinite,YUe=Math.abs,Al=Date.prototype,$R=Al.toISOString,JUe=yh(Al.getTime),QUe=yh(Al.getUTCDate),e5e=yh(Al.getUTCFullYear),t5e=yh(Al.getUTCHours),r5e=yh(Al.getUTCMilliseconds),n5e=yh(Al.getUTCMinutes),i5e=yh(Al.getUTCMonth),a5e=yh(Al.getUTCSeconds);F7.exports=N7(function(){return $R.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!N7(function(){$R.call(new Date(NaN))})?function(){if(!XUe(JUe(this)))throw new KUe("Invalid time value");var t=this,r=e5e(t),n=r5e(t),i=r<0?"-":r>9999?"+":"";return i+Qf(YUe(r),i?6:4,0)+"-"+Qf(i5e(t)+1,2,0)+"-"+Qf(QUe(t),2,0)+"T"+Qf(t5e(t),2,0)+":"+Qf(n5e(t),2,0)+":"+Qf(a5e(t),2,0)+"."+Qf(n,3,0)+"Z"}:$R});var B7=T(()=>{"use strict";var o5e=K(),j7=z7();o5e({target:"Date",proto:!0,forced:Date.prototype.toISOString!==j7},{toISOString:j7})});var U7=T(()=>{"use strict";var s5e=K(),u5e=Fe(),l5e=Vt(),c5e=S_(),h5e=u5e(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});s5e({target:"Date",proto:!0,arity:1,forced:h5e},{toJSON:function(t){var r=l5e(this),n=c5e(r,"number");return typeof n=="number"&&!isFinite(n)?null:r.toISOString()}})});var $7=T(($Bt,V7)=>{"use strict";var f5e=Qe(),p5e=F2(),d5e=TypeError;V7.exports=function(e){if(f5e(this),e==="string"||e==="default")e="string";else if(e!=="number")throw new d5e("Incorrect hint");return p5e(this,e)}});var Z7=T(()=>{"use strict";var m5e=Ft(),v5e=br(),g5e=$7(),y5e=yt(),G7=y5e("toPrimitive"),W7=Date.prototype;m5e(W7,G7)||v5e(W7,G7,g5e)});var Y7=T(()=>{"use strict";var K7=Oe(),_5e=br(),GR=Date.prototype,H7="Invalid Date",X7="toString",x5e=K7(GR[X7]),w5e=K7(GR.getTime);String(new Date(NaN))!==H7&&_5e(GR,X7,function(){var t=w5e(this);return t===t?x5e(this):H7})});var Q7=T(()=>{"use strict";var b5e=K(),Y_=Oe(),E5e=At(),S5e=Y_("".charAt),T5e=Y_("".charCodeAt),I5e=Y_(/./.exec),C5e=Y_(1 .toString),A5e=Y_("".toUpperCase),q5e=/[\w*+\-./@]/,J7=function(e,t){for(var r=C5e(e,16);r.length<t;)r="0"+r;return r};b5e({global:!0},{escape:function(t){for(var r=E5e(t),n="",i=r.length,a=0,h,p;a<i;)h=S5e(r,a++),I5e(q5e,h)?n+=h:(p=T5e(h,0),p<256?n+="%"+J7(p,2):n+="%u"+A5e(J7(p,4)));return n}})});var ZR=T((YBt,nX)=>{"use strict";var tX=Oe(),P5e=Tt(),M5e=Pt(),O5e=Ft(),eX=xl(),R5e=lm(),rX=Function,D5e=tX([].concat),L5e=tX([].join),WR={},k5e=function(e,t,r){if(!O5e(WR,t)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";WR[t]=rX("C,a","return new C("+L5e(n,",")+")")}return WR[t](e,r)};nX.exports=R5e?rX.bind:function(t){var r=P5e(this),n=r.prototype,i=eX(arguments,1),a=function(){var p=D5e(i,eX(arguments));return this instanceof a?k5e(r,p.length,p):r.apply(t,p)};return M5e(n)&&(a.prototype=n),a}});var aX=T(()=>{"use strict";var N5e=K(),iX=ZR();N5e({target:"Function",proto:!0,forced:Function.bind!==iX},{bind:iX})});var uX=T(()=>{"use strict";var F5e=qt(),oX=Pt(),z5e=Fr(),j5e=kn(),B5e=yt(),U5e=q_(),HR=B5e("hasInstance"),sX=Function.prototype;HR in sX||z5e.f(sX,HR,{value:U5e(function(e){if(!F5e(this)||!oX(e))return!1;var t=this.prototype;if(!oX(t))return e instanceof this;for(;e=j5e(e);)if(t===e)return!0;return!1},HR)})});var fX=T(()=>{"use strict";var V5e=gt(),$5e=Ff().EXISTS,lX=Oe(),G5e=en(),cX=Function.prototype,W5e=lX(cX.toString),hX=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Z5e=lX(hX.exec),H5e="name";V5e&&!$5e&&G5e(cX,H5e,{configurable:!0,get:function(){try{return Z5e(hX,W5e(this))[1]}catch(e){return""}}})});var XR=T(()=>{"use strict";var K5e=K(),KR=ot();K5e({global:!0,forced:KR.globalThis!==KR},{globalThis:KR})});var pX=T(()=>{"use strict";var X5e=ot(),Y5e=Ya();Y5e(X5e.JSON,"JSON",!0)});var WE=T((u3t,dX)=>{"use strict";var J5e=Fe();dX.exports=J5e(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var HE=T((l3t,vX)=>{"use strict";var Q5e=Fe(),e6e=Pt(),t6e=Pi(),mX=WE(),ZE=Object.isExtensible,r6e=Q5e(function(){ZE(1)});vX.exports=r6e||mX?function(t){return!e6e(t)||mX&&t6e(t)==="ArrayBuffer"?!1:ZE?ZE(t):!0}:ZE});var ql=T((c3t,gX)=>{"use strict";var n6e=Fe();gX.exports=!n6e(function(){return Object.isExtensible(Object.preventExtensions({}))})});var _h=T((h3t,xX)=>{"use strict";var i6e=K(),a6e=Oe(),o6e=hm(),s6e=Pt(),YR=Ft(),u6e=Fr().f,yX=gl(),l6e=rE(),JR=HE(),c6e=oh(),h6e=ql(),_X=!1,Pl=c6e("meta"),f6e=0,QR=function(e){u6e(e,Pl,{value:{objectID:"O"+f6e++,weakData:{}}})},p6e=function(e,t){if(!s6e(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!YR(e,Pl)){if(!JR(e))return"F";if(!t)return"E";QR(e)}return e[Pl].objectID},d6e=function(e,t){if(!YR(e,Pl)){if(!JR(e))return!0;if(!t)return!1;QR(e)}return e[Pl].weakData},m6e=function(e){return h6e&&_X&&JR(e)&&!YR(e,Pl)&&QR(e),e},v6e=function(){g6e.enable=function(){},_X=!0;var e=yX.f,t=a6e([].splice),r={};r[Pl]=1,e(r).length&&(yX.f=function(n){for(var i=e(n),a=0,h=i.length;a<h;a++)if(i[a]===Pl){t(i,a,1);break}return i},i6e({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l6e.f}))},g6e=xX.exports={enable:v6e,fastKey:p6e,getWeakData:d6e,onFreeze:m6e};o6e[Pl]=!0});var J_=T((f3t,bX)=>{"use strict";var y6e=K(),_6e=ot(),x6e=Oe(),wX=dm(),w6e=br(),b6e=_h(),E6e=gn(),S6e=ra(),T6e=qt(),I6e=Dn(),eD=Pt(),tD=Fe(),C6e=U_(),A6e=Ya(),q6e=Gf();bX.exports=function(e,t,r){var n=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,a=n?"set":"add",h=_6e[e],p=h&&h.prototype,g=h,b={},E=function($){var H=x6e(p[$]);w6e(p,$,$==="add"?function(se){return H(this,se===0?0:se),this}:$==="delete"?function(re){return i&&!eD(re)?!1:H(this,re===0?0:re)}:$==="get"?function(se){return i&&!eD(se)?void 0:H(this,se===0?0:se)}:$==="has"?function(se){return i&&!eD(se)?!1:H(this,se===0?0:se)}:function(se,Ie){return H(this,se===0?0:se,Ie),this})},q=wX(e,!T6e(h)||!(i||p.forEach&&!tD(function(){new h().entries().next()})));if(q)g=r.getConstructor(t,e,n,a),b6e.enable();else if(wX(e,!0)){var P=new g,L=P[a](i?{}:-0,1)!==P,W=tD(function(){P.has(1)}),Q=C6e(function($){new h($)}),V=!i&&tD(function(){for(var $=new h,H=5;H--;)$[a](H,H);return!$.has(-0)});Q||(g=t(function($,H){S6e($,p);var re=q6e(new h,$,g);return I6e(H)||E6e(H,re[a],{that:re,AS_ENTRIES:n}),re}),g.prototype=p,p.constructor=g),(W||V)&&(E("delete"),E("has"),n&&E("get")),(V||L)&&E(a),i&&p.clear&&delete p.clear}return b[e]=g,y6e({global:!0,constructor:!0,forced:g!==h},b),A6e(g,e),i||r.setStrong(g,e,n),g}});var nD=T((p3t,CX)=>{"use strict";var P6e=An(),M6e=en(),EX=os(),O6e=Pr(),R6e=ra(),D6e=Dn(),L6e=gn(),k6e=TE(),KE=Mi(),N6e=ph(),Q_=gt(),SX=_h().fastKey,IX=vr(),TX=IX.set,rD=IX.getterFor;CX.exports={getConstructor:function(e,t,r,n){var i=e(function(b,E){R6e(b,a),TX(b,{type:t,index:P6e(null),first:void 0,last:void 0,size:0}),Q_||(b.size=0),D6e(E)||L6e(E,b[n],{that:b,AS_ENTRIES:r})}),a=i.prototype,h=rD(t),p=function(b,E,q){var P=h(b),L=g(b,E),W,Q;return L?L.value=q:(P.last=L={index:Q=SX(E,!0),key:E,value:q,previous:W=P.last,next:void 0,removed:!1},P.first||(P.first=L),W&&(W.next=L),Q_?P.size++:b.size++,Q!=="F"&&(P.index[Q]=L)),b},g=function(b,E){var q=h(b),P=SX(E),L;if(P!=="F")return q.index[P];for(L=q.first;L;L=L.next)if(L.key===E)return L};return EX(a,{clear:function(){for(var E=this,q=h(E),P=q.index,L=q.first;L;)L.removed=!0,L.previous&&(L.previous=L.previous.next=void 0),delete P[L.index],L=L.next;q.first=q.last=void 0,Q_?q.size=0:E.size=0},delete:function(b){var E=this,q=h(E),P=g(E,b);if(P){var L=P.next,W=P.previous;delete q.index[P.index],P.removed=!0,W&&(W.next=L),L&&(L.previous=W),q.first===P&&(q.first=L),q.last===P&&(q.last=W),Q_?q.size--:E.size--}return!!P},forEach:function(E){for(var q=h(this),P=O6e(E,arguments.length>1?arguments[1]:void 0),L;L=L?L.next:q.first;)for(P(L.value,L.key,this);L&&L.removed;)L=L.previous},has:function(E){return!!g(this,E)}}),EX(a,r?{get:function(E){var q=g(this,E);return q&&q.value},set:function(E,q){return p(this,E===0?0:E,q)}}:{add:function(E){return p(this,E=E===0?0:E,E)}}),Q_&&M6e(a,"size",{configurable:!0,get:function(){return h(this).size}}),i},setStrong:function(e,t,r){var n=t+" Iterator",i=rD(t),a=rD(n);k6e(e,t,function(h,p){TX(this,{type:n,target:h,state:i(h),kind:p,last:void 0})},function(){for(var h=a(this),p=h.kind,g=h.last;g&&g.removed;)g=g.previous;return!h.target||!(h.last=g=g?g.next:h.state.first)?(h.target=void 0,KE(void 0,!0)):KE(p==="keys"?g.key:p==="values"?g.value:[g.key,g.value],!1)},r?"entries":"values",!r,!0),N6e(t)}}});var AX=T(()=>{"use strict";var F6e=J_(),z6e=nD();F6e("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},z6e)});var XE=T(()=>{"use strict";AX()});var iD=T((y3t,qX)=>{"use strict";var j6e=Math.log;qX.exports=Math.log1p||function(t){var r=+t;return r>-1e-8&&r<1e-8?r-r*r/2:j6e(1+r)}});var MX=T(()=>{"use strict";var B6e=K(),U6e=iD(),aD=Math.acosh,V6e=Math.log,PX=Math.sqrt,$6e=Math.LN2,G6e=!aD||Math.floor(aD(Number.MAX_VALUE))!==710||aD(1/0)!==1/0;B6e({target:"Math",stat:!0,forced:G6e},{acosh:function(t){var r=+t;return r<1?NaN:r>94906265.62425156?V6e(r)+$6e:U6e(r-1+PX(r-1)*PX(r+1))}})});var DX=T(()=>{"use strict";var W6e=K(),OX=Math.asinh,Z6e=Math.log,H6e=Math.sqrt;function RX(e){var t=+e;return!isFinite(t)||t===0?t:t<0?-RX(-t):Z6e(t+H6e(t*t+1))}var K6e=!(OX&&1/OX(0)>0);W6e({target:"Math",stat:!0,forced:K6e},{asinh:RX})});var kX=T(()=>{"use strict";var X6e=K(),LX=Math.atanh,Y6e=Math.log,J6e=!(LX&&1/LX(-0)<0);X6e({target:"Math",stat:!0,forced:J6e},{atanh:function(t){var r=+t;return r===0?r:Y6e((1+r)/(1-r))/2}})});var NX=T(()=>{"use strict";var Q6e=K(),eVe=ME(),tVe=Math.abs,rVe=Math.pow;Q6e({target:"Math",stat:!0},{cbrt:function(t){var r=+t;return eVe(r)*rVe(tVe(r),1/3)}})});var FX=T(()=>{"use strict";var nVe=K(),iVe=Math.floor,aVe=Math.log,oVe=Math.LOG2E;nVe({target:"Math",stat:!0},{clz32:function(t){var r=t>>>0;return r?31-iVe(aVe(r+.5)*oVe):32}})});var t0=T((q3t,zX)=>{"use strict";var e0=Math.expm1,sVe=Math.exp;zX.exports=!e0||e0(10)>22025.465794806718||e0(10)<22025.465794806718||e0(-2e-17)!==-2e-17?function(t){var r=+t;return r===0?r:r>-1e-6&&r<1e-6?r+r*r/2:sVe(r)-1}:e0});var BX=T(()=>{"use strict";var uVe=K(),lVe=t0(),jX=Math.cosh,cVe=Math.abs,oD=Math.E,hVe=!jX||jX(710)===1/0;uVe({target:"Math",stat:!0,forced:hVe},{cosh:function(t){var r=lVe(cVe(t)-1)+1;return(r+1/(r*oD*oD))*(oD/2)}})});var VX=T(()=>{"use strict";var fVe=K(),UX=t0();fVe({target:"Math",stat:!0,forced:UX!==Math.expm1},{expm1:UX})});var $X=T(()=>{"use strict";var pVe=K(),dVe=OE();pVe({target:"Math",stat:!0},{fround:dVe})});var WX=T(()=>{"use strict";var mVe=K(),GX=Math.hypot,vVe=Math.abs,gVe=Math.sqrt,yVe=!!GX&&GX(1/0,NaN)!==1/0;mVe({target:"Math",stat:!0,arity:2,forced:yVe},{hypot:function(t,r){for(var n=0,i=0,a=arguments.length,h=0,p,g;i<a;)p=vVe(arguments[i++]),h<p?(g=h/p,n=n*g*g+1,h=p):p>0?(g=p/h,n+=g*g):n+=p;return h===1/0?1/0:h*gVe(n)}})});var HX=T(()=>{"use strict";var _Ve=K(),xVe=Fe(),ZX=Math.imul,wVe=xVe(function(){return ZX(4294967295,5)!==-5||ZX.length!==2});_Ve({target:"Math",stat:!0,forced:wVe},{imul:function(t,r){var n=65535,i=+t,a=+r,h=n&i,p=n&a;return 0|h*p+((n&i>>>16)*p+h*(n&a>>>16)<<16>>>0)}})});var sD=T((j3t,KX)=>{"use strict";var bVe=Math.log,EVe=Math.LOG10E;KX.exports=Math.log10||function(t){return bVe(t)*EVe}});var XX=T(()=>{"use strict";var SVe=K(),TVe=sD();SVe({target:"Math",stat:!0},{log10:TVe})});var YX=T(()=>{"use strict";var IVe=K(),CVe=iD();IVe({target:"Math",stat:!0},{log1p:CVe})});var JX=T(()=>{"use strict";var AVe=K(),qVe=Math.log,PVe=Math.LN2;AVe({target:"Math",stat:!0},{log2:function(t){return qVe(t)/PVe}})});var QX=T(()=>{"use strict";var MVe=K(),OVe=ME();MVe({target:"Math",stat:!0},{sign:OVe})});var rY=T(()=>{"use strict";var RVe=K(),DVe=Fe(),eY=t0(),LVe=Math.abs,tY=Math.exp,kVe=Math.E,NVe=DVe(function(){return Math.sinh(-2e-17)!==-2e-17});RVe({target:"Math",stat:!0,forced:NVe},{sinh:function(t){var r=+t;return LVe(r)<1?(eY(r)-eY(-r))/2:(tY(r-1)-tY(-r-1))*(kVe/2)}})});var aY=T(()=>{"use strict";var FVe=K(),nY=t0(),iY=Math.exp;FVe({target:"Math",stat:!0},{tanh:function(t){var r=+t,n=nY(r),i=nY(-r);return n===1/0?1:i===1/0?-1:(n-i)/(iY(r)+iY(-r))}})});var oY=T(()=>{"use strict";var zVe=Ya();zVe(Math,"Math",!0)});var sY=T(()=>{"use strict";var jVe=K(),BVe=rO();jVe({target:"Math",stat:!0},{trunc:BVe})});var r0=T((n4t,uY)=>{"use strict";var UVe=Oe();uY.exports=UVe(1 .valueOf)});var ep=T((i4t,lY)=>{"use strict";lY.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var tp=T((a4t,hY)=>{"use strict";var VVe=Oe(),$Ve=$r(),GVe=At(),lD=ep(),cY=VVe("".replace),WVe=RegExp("^["+lD+"]+"),ZVe=RegExp("(^|[^"+lD+"])["+lD+"]+$"),uD=function(e){return function(t){var r=GVe($Ve(t));return e&1&&(r=cY(r,WVe,"")),e&2&&(r=cY(r,ZVe,"$1")),r}};hY.exports={start:uD(1),end:uD(2),trim:uD(3)}});var yY=T(()=>{"use strict";var HVe=K(),cD=Ut(),KVe=gt(),dY=ot(),hD=nE(),mY=Oe(),XVe=dm(),fY=Ft(),YVe=Gf(),JVe=ea(),QVe=vl(),vY=S_(),e$e=Fe(),t$e=gl().f,r$e=Qn().f,n$e=Fr().f,i$e=r0(),a$e=tp().trim,n0="Number",Cm=dY[n0],pY=hD[n0],fD=Cm.prototype,o$e=dY.TypeError,s$e=mY("".slice),YE=mY("".charCodeAt),u$e=function(e){var t=vY(e,"number");return typeof t=="bigint"?t:l$e(t)},l$e=function(e){var t=vY(e,"number"),r,n,i,a,h,p,g,b;if(QVe(t))throw new o$e("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=a$e(t),r=YE(t,0),r===43||r===45){if(n=YE(t,2),n===88||n===120)return NaN}else if(r===48){switch(YE(t,1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+t;}for(h=s$e(t,2),p=h.length,g=0;g<p;g++)if(b=YE(h,g),b<48||b>a)return NaN;return parseInt(h,i)}}return+t},pD=XVe(n0,!Cm(" 0o1")||!Cm("0b1")||Cm("+0x1")),c$e=function(e){return JVe(fD,e)&&e$e(function(){i$e(e)})},JE=function(t){var r=arguments.length<1?0:Cm(u$e(t));return c$e(this)?YVe(Object(r),this,JE):r};JE.prototype=fD;pD&&!cD&&(fD.constructor=JE);HVe({global:!0,constructor:!0,wrap:!0,forced:pD},{Number:JE});var gY=function(e,t){for(var r=KVe?t$e(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),n=0,i;r.length>n;n++)fY(t,i=r[n])&&!fY(e,i)&&n$e(e,i,r$e(t,i))};cD&&pY&&gY(hD[n0],pY);(pD||cD)&&gY(hD[n0],Cm)});var _Y=T(()=>{"use strict";var h$e=K();h$e({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var dD=T((c4t,xY)=>{"use strict";var f$e=ot(),p$e=f$e.isFinite;xY.exports=Number.isFinite||function(t){return typeof t=="number"&&p$e(t)}});var wY=T(()=>{"use strict";var d$e=K(),m$e=dD();d$e({target:"Number",stat:!0},{isFinite:m$e})});var QE=T((p4t,bY)=>{"use strict";var v$e=Pt(),g$e=Math.floor;bY.exports=Number.isInteger||function(t){return!v$e(t)&&isFinite(t)&&g$e(t)===t}});var EY=T(()=>{"use strict";var y$e=K(),_$e=QE();y$e({target:"Number",stat:!0},{isInteger:_$e})});var SY=T(()=>{"use strict";var x$e=K();x$e({target:"Number",stat:!0},{isNaN:function(t){return t!==t}})});var TY=T(()=>{"use strict";var w$e=K(),b$e=QE(),E$e=Math.abs;w$e({target:"Number",stat:!0},{isSafeInteger:function(t){return b$e(t)&&E$e(t)<=9007199254740991}})});var IY=T(()=>{"use strict";var S$e=K();S$e({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var CY=T(()=>{"use strict";var T$e=K();T$e({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var mD=T((S4t,MY)=>{"use strict";var PY=ot(),I$e=Fe(),C$e=Oe(),A$e=At(),q$e=tp().trim,P$e=ep(),M$e=C$e("".charAt),eS=PY.parseFloat,AY=PY.Symbol,qY=AY&&AY.iterator,O$e=1/eS(P$e+"-0")!==-1/0||qY&&!I$e(function(){eS(Object(qY))});MY.exports=O$e?function(t){var r=q$e(A$e(t)),n=eS(r);return n===0&&M$e(r,0)==="-"?-0:n}:eS});var RY=T(()=>{"use strict";var R$e=K(),OY=mD();R$e({target:"Number",stat:!0,forced:Number.parseFloat!==OY},{parseFloat:OY})});var tS=T((C4t,zY)=>{"use strict";var NY=ot(),D$e=Fe(),L$e=Oe(),k$e=At(),N$e=tp().trim,DY=ep(),i0=NY.parseInt,LY=NY.Symbol,kY=LY&&LY.iterator,FY=/^[+-]?0x/i,F$e=L$e(FY.exec),z$e=i0(DY+"08")!==8||i0(DY+"0x16")!==22||kY&&!D$e(function(){i0(Object(kY))});zY.exports=z$e?function(t,r){var n=N$e(k$e(t));return i0(n,r>>>0||(F$e(FY,n)?16:10))}:i0});var BY=T(()=>{"use strict";var j$e=K(),jY=tS();j$e({target:"Number",stat:!0,forced:Number.parseInt!==jY},{parseInt:jY})});var WY=T(()=>{"use strict";var B$e=K(),gD=Oe(),U$e=Gr(),V$e=r0(),$$e=X_(),G$e=sD(),vD=Fe(),W$e=RangeError,UY=String,Z$e=isFinite,H$e=Math.abs,K$e=Math.floor,VY=Math.pow,X$e=Math.round,wu=gD(1 .toExponential),Y$e=gD($$e),$Y=gD("".slice),GY=wu(-69e-12,4)==="-6.9000e-11"&&wu(1.255,2)==="1.25e+0"&&wu(12345,3)==="1.235e+4"&&wu(25,0)==="3e+1",J$e=function(){return vD(function(){wu(1,1/0)})&&vD(function(){wu(1,-1/0)})},Q$e=function(){return!vD(function(){wu(1/0,1/0),wu(NaN,1/0)})},eGe=!GY||!J$e()||!Q$e();B$e({target:"Number",proto:!0,forced:eGe},{toExponential:function(t){var r=V$e(this);if(t===void 0)return wu(r);var n=U$e(t);if(!Z$e(r))return String(r);if(n<0||n>20)throw new W$e("Incorrect fraction digits");if(GY)return wu(r,n);var i="",a="",h=0,p="",g="";if(r<0&&(i="-",r=-r),r===0)h=0,a=Y$e("0",n+1);else{var b=G$e(r);h=K$e(b);var E=0,q=VY(10,h-n);E=X$e(r/q),2*r>=(2*E+1)*q&&(E+=1),E>=VY(10,n+1)&&(E/=10,h+=1),a=UY(E)}return n!==0&&(a=$Y(a,0,1)+"."+$Y(a,1)),h===0?(p="+",g="0"):(p=h>0?"+":"-",g=UY(H$e(h))),a+="e"+p+g,i+a}})});var JY=T(()=>{"use strict";var tGe=K(),xD=Oe(),rGe=Gr(),nGe=r0(),iGe=X_(),ZY=Fe(),aGe=RangeError,XY=String,YY=Math.floor,_D=xD(iGe),HY=xD("".slice),a0=xD(1 .toFixed),qm=function(e,t,r){return t===0?r:t%2===1?qm(e,t-1,r*e):qm(e*e,t/2,r)},oGe=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t},Am=function(e,t,r){for(var n=-1,i=r;++n<6;)i+=t*e[n],e[n]=i%1e7,i=YY(i/1e7)},yD=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=YY(n/t),n=n%t*1e7},KY=function(e){for(var t=6,r="";--t>=0;)if(r!==""||t===0||e[t]!==0){var n=XY(e[t]);r=r===""?n:r+_D("0",7-n.length)+n}return r},sGe=ZY(function(){return a0(8e-5,3)!=="0.000"||a0(.9,0)!=="1"||a0(1.255,2)!=="1.25"||a0(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!ZY(function(){a0({})});tGe({target:"Number",proto:!0,forced:sGe},{toFixed:function(t){var r=nGe(this),n=rGe(t),i=[0,0,0,0,0,0],a="",h="0",p,g,b,E;if(n<0||n>20)throw new aGe("Incorrect fraction digits");if(r!==r)return"NaN";if(r<=-1e21||r>=1e21)return XY(r);if(r<0&&(a="-",r=-r),r>1e-21)if(p=oGe(r*qm(2,69,1))-69,g=p<0?r*qm(2,-p,1):r/qm(2,p,1),g*=4503599627370496,p=52-p,p>0){for(Am(i,0,g),b=n;b>=7;)Am(i,1e7,0),b-=7;for(Am(i,qm(10,b,1),0),b=p-1;b>=23;)yD(i,1<<23),b-=23;yD(i,1<<b),Am(i,1,1),yD(i,2),h=KY(i)}else Am(i,0,g),Am(i,1<<-p,0),h=KY(i)+_D("0",n);return n>0?(E=h.length,h=a+(E<=n?"0."+_D("0",n-E)+h:HY(h,0,E-n)+"."+HY(h,E-n))):h=a+h,h}})});var tJ=T(()=>{"use strict";var uGe=K(),lGe=Oe(),QY=Fe(),eJ=r0(),rS=lGe(1 .toPrecision),cGe=QY(function(){return rS(1,void 0)!=="1"})||!QY(function(){rS({})});uGe({target:"Number",proto:!0,forced:cGe},{toPrecision:function(t){return t===void 0?rS(eJ(this)):rS(eJ(this),t)}})});var bD=T((k4t,iJ)=>{"use strict";var rJ=gt(),hGe=Oe(),fGe=Ye(),pGe=Fe(),wD=jf(),dGe=P_(),mGe=b_(),vGe=Vt(),gGe=ml(),Pm=Object.assign,nJ=Object.defineProperty,yGe=hGe([].concat);iJ.exports=!Pm||pGe(function(){if(rJ&&Pm({b:1},Pm(nJ({},"a",{enumerable:!0,get:function(){nJ(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},r=Symbol("assign detection"),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(i){t[i]=i}),Pm({},e)[r]!==7||wD(Pm({},t)).join("")!==n})?function(t,r){for(var n=vGe(t),i=arguments.length,a=1,h=dGe.f,p=mGe.f;i>a;)for(var g=gGe(arguments[a++]),b=h?yGe(wD(g),h(g)):wD(g),E=b.length,q=0,P;E>q;)P=b[q++],(!rJ||fGe(p,g,P))&&(n[P]=g[P]);return n}:Pm});var oJ=T(()=>{"use strict";var _Ge=K(),aJ=bD();_Ge({target:"Object",stat:!0,arity:2,forced:Object.assign!==aJ},{assign:aJ})});var sJ=T(()=>{"use strict";var xGe=K(),wGe=gt(),bGe=An();xGe({target:"Object",stat:!0,sham:!wGe},{create:bGe})});var o0=T((B4t,lJ)=>{"use strict";var EGe=Ut(),SGe=ot(),TGe=Fe(),uJ=qE();lJ.exports=EGe||!TGe(function(){if(!(uJ&&uJ<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete SGe[e]}})});var cJ=T(()=>{"use strict";var IGe=K(),CGe=gt(),AGe=o0(),qGe=Tt(),PGe=Vt(),MGe=Fr();CGe&&IGe({target:"Object",proto:!0,forced:AGe},{__defineGetter__:function(t,r){MGe.f(PGe(this),t,{get:qGe(r),enumerable:!0,configurable:!0})}})});var fJ=T(()=>{"use strict";var OGe=K(),RGe=gt(),hJ=Qb().f;OGe({target:"Object",stat:!0,forced:Object.defineProperties!==hJ,sham:!RGe},{defineProperties:hJ})});var dJ=T(()=>{"use strict";var DGe=K(),LGe=gt(),pJ=Fr().f;DGe({target:"Object",stat:!0,forced:Object.defineProperty!==pJ,sham:!LGe},{defineProperty:pJ})});var mJ=T(()=>{"use strict";var kGe=K(),NGe=gt(),FGe=o0(),zGe=Tt(),jGe=Vt(),BGe=Fr();NGe&&kGe({target:"Object",proto:!0,forced:FGe},{__defineSetter__:function(t,r){BGe.f(jGe(this),t,{set:zGe(r),enumerable:!0,configurable:!0})}})});var ED=T((X4t,xJ)=>{"use strict";var gJ=gt(),UGe=Fe(),yJ=Oe(),VGe=kn(),$Ge=jf(),GGe=Bn(),WGe=b_().f,_J=yJ(WGe),ZGe=yJ([].push),HGe=gJ&&UGe(function(){var e=Object.create(null);return e[2]=2,!_J(e,2)}),vJ=function(e){return function(t){for(var r=GGe(t),n=$Ge(r),i=HGe&&VGe(r)===null,a=n.length,h=0,p=[],g;a>h;)g=n[h++],(!gJ||(i?g in r:_J(r,g)))&&ZGe(p,e?[g,r[g]]:r[g]);return p}};xJ.exports={entries:vJ(!0),values:vJ(!1)}});var wJ=T(()=>{"use strict";var KGe=K(),XGe=ED().entries;KGe({target:"Object",stat:!0},{entries:function(t){return XGe(t)}})});var bJ=T(()=>{"use strict";var YGe=K(),JGe=ql(),QGe=Fe(),e8e=Pt(),t8e=_h().onFreeze,SD=Object.freeze,r8e=QGe(function(){SD(1)});YGe({target:"Object",stat:!0,forced:r8e,sham:!JGe},{freeze:function(t){return SD&&e8e(t)?SD(t8e(t)):t}})});var EJ=T(()=>{"use strict";var n8e=K(),i8e=gn(),a8e=rs();n8e({target:"Object",stat:!0},{fromEntries:function(t){var r={};return i8e(t,function(n,i){a8e(r,n,i)},{AS_ENTRIES:!0}),r}})});var IJ=T(()=>{"use strict";var o8e=K(),s8e=Fe(),u8e=Bn(),SJ=Qn().f,TJ=gt(),l8e=!TJ||s8e(function(){SJ(1)});o8e({target:"Object",stat:!0,forced:l8e,sham:!TJ},{getOwnPropertyDescriptor:function(t,r){return SJ(u8e(t),r)}})});var CJ=T(()=>{"use strict";var c8e=K(),h8e=gt(),f8e=Xb(),p8e=Bn(),d8e=Qn(),m8e=rs();c8e({target:"Object",stat:!0,sham:!h8e},{getOwnPropertyDescriptors:function(t){for(var r=p8e(t),n=d8e.f,i=f8e(r),a={},h=0,p,g;i.length>h;)g=n(r,p=i[h++]),g!==void 0&&m8e(a,p,g);return a}})});var AJ=T(()=>{"use strict";var v8e=K(),g8e=Fe(),y8e=rE().f,_8e=g8e(function(){return!Object.getOwnPropertyNames(1)});v8e({target:"Object",stat:!0,forced:_8e},{getOwnPropertyNames:y8e})});var PJ=T(()=>{"use strict";var x8e=K(),w8e=Fe(),b8e=Vt(),qJ=kn(),E8e=vE(),S8e=w8e(function(){qJ(1)});x8e({target:"Object",stat:!0,forced:S8e,sham:!E8e},{getPrototypeOf:function(t){return qJ(b8e(t))}})});var TD=T(()=>{"use strict";var T8e=K(),I8e=Ft();T8e({target:"Object",stat:!0},{hasOwn:I8e})});var ID=T((pUt,MJ)=>{"use strict";MJ.exports=Object.is||function(t,r){return t===r?t!==0||1/t===1/r:t!==t&&r!==r}});var OJ=T(()=>{"use strict";var C8e=K(),A8e=ID();C8e({target:"Object",stat:!0},{is:A8e})});var DJ=T(()=>{"use strict";var q8e=K(),RJ=HE();q8e({target:"Object",stat:!0,forced:Object.isExtensible!==RJ},{isExtensible:RJ})});var kJ=T(()=>{"use strict";var P8e=K(),M8e=Fe(),O8e=Pt(),R8e=Pi(),LJ=WE(),CD=Object.isFrozen,D8e=LJ||M8e(function(){CD(1)});P8e({target:"Object",stat:!0,forced:D8e},{isFrozen:function(t){return!O8e(t)||LJ&&R8e(t)==="ArrayBuffer"?!0:CD?CD(t):!1}})});var FJ=T(()=>{"use strict";var L8e=K(),k8e=Fe(),N8e=Pt(),F8e=Pi(),NJ=WE(),AD=Object.isSealed,z8e=NJ||k8e(function(){AD(1)});L8e({target:"Object",stat:!0,forced:z8e},{isSealed:function(t){return!N8e(t)||NJ&&F8e(t)==="ArrayBuffer"?!0:AD?AD(t):!1}})});var jJ=T(()=>{"use strict";var j8e=K(),B8e=Vt(),zJ=jf(),U8e=Fe(),V8e=U8e(function(){zJ(1)});j8e({target:"Object",stat:!0,forced:V8e},{keys:function(t){return zJ(B8e(t))}})});var BJ=T(()=>{"use strict";var $8e=K(),G8e=gt(),W8e=o0(),Z8e=Vt(),H8e=ks(),K8e=kn(),X8e=Qn().f;G8e&&$8e({target:"Object",proto:!0,forced:W8e},{__lookupGetter__:function(t){var r=Z8e(this),n=H8e(t),i;do if(i=X8e(r,n))return i.get;while(r=K8e(r))}})});var UJ=T(()=>{"use strict";var Y8e=K(),J8e=gt(),Q8e=o0(),eWe=Vt(),tWe=ks(),rWe=kn(),nWe=Qn().f;J8e&&Y8e({target:"Object",proto:!0,forced:Q8e},{__lookupSetter__:function(t){var r=eWe(this),n=tWe(t),i;do if(i=nWe(r,n))return i.set;while(r=rWe(r))}})});var VJ=T(()=>{"use strict";var iWe=K(),aWe=Pt(),oWe=_h().onFreeze,sWe=ql(),uWe=Fe(),qD=Object.preventExtensions,lWe=uWe(function(){qD(1)});iWe({target:"Object",stat:!0,forced:lWe,sham:!sWe},{preventExtensions:function(t){return qD&&aWe(t)?qD(oWe(t)):t}})});var KJ=T(()=>{"use strict";var cWe=gt(),hWe=en(),$J=Pt(),fWe=Vt(),pWe=$r(),GJ=Object.getPrototypeOf,WJ=Object.setPrototypeOf,ZJ=Object.prototype,HJ="__proto__";if(cWe&&GJ&&WJ&&!(HJ in ZJ))try{hWe(ZJ,HJ,{configurable:!0,get:function(){return GJ(fWe(this))},set:function(t){var r=pWe(this);!$J(t)&&t!==null||!$J(r)||WJ(r,t)}})}catch(e){}});var XJ=T(()=>{"use strict";var dWe=K(),mWe=Pt(),vWe=_h().onFreeze,gWe=ql(),yWe=Fe(),PD=Object.seal,_We=yWe(function(){PD(1)});dWe({target:"Object",stat:!0,forced:_We,sham:!gWe},{seal:function(t){return PD&&mWe(t)?PD(vWe(t)):t}})});var YJ=T(()=>{"use strict";var xWe=K(),wWe=is();xWe({target:"Object",stat:!0},{setPrototypeOf:wWe})});var QJ=T((kUt,JJ)=>{"use strict";var bWe=Yb(),EWe=Xa();JJ.exports=bWe?{}.toString:function(){return"[object "+EWe(this)+"]"}});var eQ=T(()=>{"use strict";var SWe=Yb(),TWe=br(),IWe=QJ();SWe||TWe(Object.prototype,"toString",IWe,{unsafe:!0})});var tQ=T(()=>{"use strict";var CWe=K(),AWe=ED().values;CWe({target:"Object",stat:!0},{values:function(t){return AWe(t)}})});var nQ=T(()=>{"use strict";var qWe=K(),rQ=mD();qWe({global:!0,forced:parseFloat!==rQ},{parseFloat:rQ})});var aQ=T(()=>{"use strict";var PWe=K(),iQ=tS();PWe({global:!0,forced:parseInt!==iQ},{parseInt:iQ})});var us=T((GUt,oQ)=>{"use strict";var MWe=TypeError;oQ.exports=function(e,t){if(e<t)throw new MWe("Not enough arguments");return e}});var MD=T((WUt,sQ)=>{"use strict";var OWe=du();sQ.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(OWe)});var l0=T((ZUt,vQ)=>{"use strict";var Mo=ot(),RWe=ta(),DWe=Pr(),uQ=qt(),LWe=Ft(),mQ=Fe(),lQ=oO(),kWe=xl(),cQ=T_(),NWe=us(),FWe=MD(),zWe=yu(),ND=Mo.setImmediate,FD=Mo.clearImmediate,jWe=Mo.process,OD=Mo.Dispatch,BWe=Mo.Function,hQ=Mo.MessageChannel,UWe=Mo.String,RD=0,s0={},fQ="onreadystatechange",u0,rp,DD,LD;mQ(function(){u0=Mo.location});var zD=function(e){if(LWe(s0,e)){var t=s0[e];delete s0[e],t()}},kD=function(e){return function(){zD(e)}},pQ=function(e){zD(e.data)},dQ=function(e){Mo.postMessage(UWe(e),u0.protocol+"//"+u0.host)};(!ND||!FD)&&(ND=function(t){NWe(arguments.length,1);var r=uQ(t)?t:BWe(t),n=kWe(arguments,1);return s0[++RD]=function(){RWe(r,void 0,n)},rp(RD),RD},FD=function(t){delete s0[t]},zWe?rp=function(e){jWe.nextTick(kD(e))}:OD&&OD.now?rp=function(e){OD.now(kD(e))}:hQ&&!FWe?(DD=new hQ,LD=DD.port2,DD.port1.onmessage=pQ,rp=DWe(LD.postMessage,LD)):Mo.addEventListener&&uQ(Mo.postMessage)&&!Mo.importScripts&&u0&&u0.protocol!=="file:"&&!mQ(dQ)?(rp=dQ,Mo.addEventListener("message",pQ,!1)):fQ in cQ("script")?rp=function(e){lQ.appendChild(cQ("script"))[fQ]=function(){lQ.removeChild(this),zD(e)}}:rp=function(e){setTimeout(kD(e),0)});vQ.exports={set:ND,clear:FD}});var jD=T((HUt,yQ)=>{"use strict";var gQ=function(){this.head=null,this.tail=null};gQ.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};yQ.exports=gQ});var xQ=T((KUt,_Q)=>{"use strict";var VWe=du();_Q.exports=/ipad|iphone|ipod/i.test(VWe)&&typeof Pebble!="undefined"});var bQ=T((XUt,wQ)=>{"use strict";var $We=du();wQ.exports=/web0s(?!.*chrome)/i.test($We)});var WD=T((YUt,qQ)=>{"use strict";var np=ot(),EQ=Pr(),GWe=Qn().f,BD=l0().set,WWe=jD(),ZWe=MD(),HWe=xQ(),KWe=bQ(),UD=yu(),SQ=np.MutationObserver||np.WebKitMutationObserver,TQ=np.document,IQ=np.process,nS=np.Promise,CQ=GWe(np,"queueMicrotask"),GD=CQ&&CQ.value,Mm,VD,$D,iS,AQ;GD||(c0=new WWe,h0=function(){var e,t;for(UD&&(e=IQ.domain)&&e.exit();t=c0.get();)try{t()}catch(r){throw c0.head&&Mm(),r}e&&e.enter()},!ZWe&&!UD&&!KWe&&SQ&&TQ?(VD=!0,$D=TQ.createTextNode(""),new SQ(h0).observe($D,{characterData:!0}),Mm=function(){$D.data=VD=!VD}):!HWe&&nS&&nS.resolve?(iS=nS.resolve(void 0),iS.constructor=nS,AQ=EQ(iS.then,iS),Mm=function(){AQ(h0)}):UD?Mm=function(){IQ.nextTick(h0)}:(BD=EQ(BD,np),Mm=function(){BD(h0)}),GD=function(e){c0.head||Mm(),c0.add(e)});var c0,h0;qQ.exports=GD});var ZD=T((JUt,PQ)=>{"use strict";PQ.exports=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(r){}}});var xh=T((QUt,MQ)=>{"use strict";MQ.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var ip=T((e5t,OQ)=>{"use strict";var XWe=ot();OQ.exports=XWe.Promise});var aS=T((t5t,RQ)=>{"use strict";RQ.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"});var HD=T((r5t,DQ)=>{"use strict";var YWe=aS(),JWe=yu();DQ.exports=!YWe&&!JWe&&typeof window=="object"&&typeof document=="object"});var Om=T((n5t,NQ)=>{"use strict";var QWe=ot(),f0=ip(),eZe=qt(),tZe=dm(),rZe=I_(),nZe=yt(),iZe=HD(),aZe=aS(),oZe=Ut(),KD=mu(),LQ=f0&&f0.prototype,sZe=nZe("species"),XD=!1,kQ=eZe(QWe.PromiseRejectionEvent),uZe=tZe("Promise",function(){var e=rZe(f0),t=e!==String(f0);if(!t&&KD===66||oZe&&!(LQ.catch&&LQ.finally))return!0;if(!KD||KD<51||!/native code/.test(e)){var r=new f0(function(a){a(1)}),n=function(a){a(function(){},function(){})},i=r.constructor={};if(i[sZe]=n,XD=r.then(function(){})instanceof n,!XD)return!0}return!t&&(iZe||aZe)&&!kQ});NQ.exports={CONSTRUCTOR:uZe,REJECTION_EVENT:kQ,SUBCLASSING:XD}});var bu=T((i5t,zQ)=>{"use strict";var FQ=Tt(),lZe=TypeError,cZe=function(e){var t,r;this.promise=new e(function(n,i){if(t!==void 0||r!==void 0)throw new lZe("Bad Promise constructor");t=n,r=i}),this.resolve=FQ(t),this.reject=FQ(r)};zQ.exports.f=function(e){return new cZe(e)}});var iee=T(()=>{"use strict";var hZe=K(),fZe=Ut(),lS=yu(),wh=ot(),km=Ye(),jQ=br(),BQ=is(),pZe=Ya(),dZe=ph(),mZe=Tt(),uS=qt(),vZe=Pt(),gZe=ra(),yZe=Jf(),WQ=l0().set,tL=WD(),_Ze=ZD(),xZe=xh(),wZe=jD(),ZQ=vr(),cS=ip(),rL=Om(),HQ=bu(),hS="Promise",KQ=rL.CONSTRUCTOR,bZe=rL.REJECTION_EVENT,EZe=rL.SUBCLASSING,YD=ZQ.getterFor(hS),SZe=ZQ.set,Rm=cS&&cS.prototype,ap=cS,oS=Rm,XQ=wh.TypeError,JD=wh.document,nL=wh.process,QD=HQ.f,TZe=QD,IZe=!!(JD&&JD.createEvent&&wh.dispatchEvent),YQ="unhandledrejection",CZe="rejectionhandled",UQ=0,JQ=1,AZe=2,iL=1,QQ=2,sS,VQ,qZe,$Q,eee=function(e){var t;return vZe(e)&&uS(t=e.then)?t:!1},tee=function(e,t){var r=t.value,n=t.state===JQ,i=n?e.ok:e.fail,a=e.resolve,h=e.reject,p=e.domain,g,b,E;try{i?(n||(t.rejection===QQ&&MZe(t),t.rejection=iL),i===!0?g=r:(p&&p.enter(),g=i(r),p&&(p.exit(),E=!0)),g===e.promise?h(new XQ("Promise-chain cycle")):(b=eee(g))?km(b,g,a,h):a(g)):h(r)}catch(q){p&&!E&&p.exit(),h(q)}},ree=function(e,t){e.notified||(e.notified=!0,tL(function(){for(var r=e.reactions,n;n=r.get();)tee(n,e);e.notified=!1,t&&!e.rejection&&PZe(e)}))},nee=function(e,t,r){var n,i;IZe?(n=JD.createEvent("Event"),n.promise=t,n.reason=r,n.initEvent(e,!1,!0),wh.dispatchEvent(n)):n={promise:t,reason:r},!bZe&&(i=wh["on"+e])?i(n):e===YQ&&_Ze("Unhandled promise rejection",r)},PZe=function(e){km(WQ,wh,function(){var t=e.facade,r=e.value,n=GQ(e),i;if(n&&(i=xZe(function(){lS?nL.emit("unhandledRejection",r,t):nee(YQ,t,r)}),e.rejection=lS||GQ(e)?QQ:iL,i.error))throw i.value})},GQ=function(e){return e.rejection!==iL&&!e.parent},MZe=function(e){km(WQ,wh,function(){var t=e.facade;lS?nL.emit("rejectionHandled",t):nee(CZe,t,e.value)})},Dm=function(e,t,r){return function(n){e(t,n,r)}},Lm=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=AZe,ree(e,!0))},eL=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new XQ("Promise can't be resolved itself");var n=eee(t);n?tL(function(){var i={done:!1};try{km(n,t,Dm(eL,i,e),Dm(Lm,i,e))}catch(a){Lm(i,a,e)}}):(e.value=t,e.state=JQ,ree(e,!1))}catch(i){Lm({done:!1},i,e)}}};if(KQ&&(ap=function(t){gZe(this,oS),mZe(t),km(sS,this);var r=YD(this);try{t(Dm(eL,r),Dm(Lm,r))}catch(n){Lm(r,n)}},oS=ap.prototype,sS=function(t){SZe(this,{type:hS,done:!1,notified:!1,parent:!1,reactions:new wZe,rejection:!1,state:UQ,value:void 0})},sS.prototype=jQ(oS,"then",function(t,r){var n=YD(this),i=QD(yZe(this,ap));return n.parent=!0,i.ok=uS(t)?t:!0,i.fail=uS(r)&&r,i.domain=lS?nL.domain:void 0,n.state===UQ?n.reactions.add(i):tL(function(){tee(i,n)}),i.promise}),VQ=function(){var e=new sS,t=YD(e);this.promise=e,this.resolve=Dm(eL,t),this.reject=Dm(Lm,t)},HQ.f=QD=function(e){return e===ap||e===qZe?new VQ(e):TZe(e)},!fZe&&uS(cS)&&Rm!==Object.prototype)){$Q=Rm.then,EZe||jQ(Rm,"then",function(t,r){var n=this;return new ap(function(i,a){km($Q,n,i,a)}).then(t,r)},{unsafe:!0});try{delete Rm.constructor}catch(e){}BQ&&BQ(Rm,oS)}hZe({global:!0,constructor:!0,wrap:!0,forced:KQ},{Promise:ap});pZe(ap,hS,!1,!0);dZe(hS)});var p0=T((s5t,aee)=>{"use strict";var OZe=ip(),RZe=U_(),DZe=Om().CONSTRUCTOR;aee.exports=DZe||!RZe(function(e){OZe.all(e).then(void 0,function(){})})});var oee=T(()=>{"use strict";var LZe=K(),kZe=Ye(),NZe=Tt(),FZe=bu(),zZe=xh(),jZe=gn(),BZe=p0();LZe({target:"Promise",stat:!0,forced:BZe},{all:function(t){var r=this,n=FZe.f(r),i=n.resolve,a=n.reject,h=zZe(function(){var p=NZe(r.resolve),g=[],b=0,E=1;jZe(t,function(q){var P=b++,L=!1;E++,kZe(p,r,q).then(function(W){L||(L=!0,g[P]=W,--E||i(g))},a)}),--E||i(g)});return h.error&&a(h.value),n.promise}})});var uee=T(()=>{"use strict";var UZe=K(),VZe=Ut(),$Ze=Om().CONSTRUCTOR,oL=ip(),GZe=St(),WZe=qt(),ZZe=br(),see=oL&&oL.prototype;UZe({target:"Promise",proto:!0,forced:$Ze,real:!0},{catch:function(e){return this.then(void 0,e)}});!VZe&&WZe(oL)&&(aL=GZe("Promise").prototype.catch,see.catch!==aL&&ZZe(see,"catch",aL,{unsafe:!0}));var aL});var lee=T(()=>{"use strict";var HZe=K(),KZe=Ye(),XZe=Tt(),YZe=bu(),JZe=xh(),QZe=gn(),eHe=p0();HZe({target:"Promise",stat:!0,forced:eHe},{race:function(t){var r=this,n=YZe.f(r),i=n.reject,a=JZe(function(){var h=XZe(r.resolve);QZe(t,function(p){KZe(h,r,p).then(n.resolve,i)})});return a.error&&i(a.value),n.promise}})});var cee=T(()=>{"use strict";var tHe=K(),rHe=Ye(),nHe=bu(),iHe=Om().CONSTRUCTOR;tHe({target:"Promise",stat:!0,forced:iHe},{reject:function(t){var r=nHe.f(this);return rHe(r.reject,void 0,t),r.promise}})});var sL=T((v5t,hee)=>{"use strict";var aHe=Qe(),oHe=Pt(),sHe=bu();hee.exports=function(e,t){if(aHe(e),oHe(t)&&t.constructor===e)return t;var r=sHe.f(e),n=r.resolve;return n(t),r.promise}});var dee=T(()=>{"use strict";var uHe=K(),lHe=St(),fee=Ut(),cHe=ip(),pee=Om().CONSTRUCTOR,hHe=sL(),fHe=lHe("Promise"),pHe=fee&&!pee;uHe({target:"Promise",stat:!0,forced:fee||pee},{resolve:function(t){return hHe(pHe&&this===fHe?cHe:this,t)}})});var mee=T(()=>{"use strict";iee();oee();uee();lee();cee();dee()});var uL=T(()=>{"use strict";var dHe=K(),mHe=Ye(),vHe=Tt(),gHe=bu(),yHe=xh(),_He=gn(),xHe=p0();dHe({target:"Promise",stat:!0,forced:xHe},{allSettled:function(t){var r=this,n=gHe.f(r),i=n.resolve,a=n.reject,h=yHe(function(){var p=vHe(r.resolve),g=[],b=0,E=1;_He(t,function(q){var P=b++,L=!1;E++,mHe(p,r,q).then(function(W){L||(L=!0,g[P]={status:"fulfilled",value:W},--E||i(g))},function(W){L||(L=!0,g[P]={status:"rejected",reason:W},--E||i(g))})}),--E||i(g)});return h.error&&a(h.value),n.promise}})});var lL=T(()=>{"use strict";var wHe=K(),bHe=Ye(),EHe=Tt(),SHe=St(),THe=bu(),IHe=xh(),CHe=gn(),AHe=p0(),vee="No one promise resolved";wHe({target:"Promise",stat:!0,forced:AHe},{any:function(t){var r=this,n=SHe("AggregateError"),i=THe.f(r),a=i.resolve,h=i.reject,p=IHe(function(){var g=EHe(r.resolve),b=[],E=0,q=1,P=!1;CHe(t,function(L){var W=E++,Q=!1;q++,bHe(g,r,L).then(function(V){Q||P||(P=!0,a(V))},function(V){Q||P||(Q=!0,b[W]=V,--q||h(new n(b,vee)))})}),--q||h(new n(b,vee))});return p.error&&h(p.value),i.promise}})});var xee=T(()=>{"use strict";var qHe=K(),PHe=Ut(),fS=ip(),MHe=Fe(),yee=St(),_ee=qt(),OHe=Jf(),gee=sL(),RHe=br(),hL=fS&&fS.prototype,DHe=!!fS&&MHe(function(){hL.finally.call({then:function(){}},function(){})});qHe({target:"Promise",proto:!0,real:!0,forced:DHe},{finally:function(e){var t=OHe(this,yee("Promise")),r=_ee(e);return this.then(r?function(n){return gee(t,e()).then(function(){return n})}:e,r?function(n){return gee(t,e()).then(function(){throw n})}:e)}});!PHe&&_ee(fS)&&(cL=yee("Promise").prototype.finally,hL.finally!==cL&&RHe(hL,"finally",cL,{unsafe:!0}));var cL});var wee=T(()=>{"use strict";var LHe=K(),kHe=ta(),NHe=Tt(),FHe=Qe(),zHe=Fe(),jHe=!zHe(function(){Reflect.apply(function(){})});LHe({target:"Reflect",stat:!0,forced:jHe},{apply:function(t,r,n){return kHe(NHe(t),r,FHe(n))}})});var Aee=T(()=>{"use strict";var BHe=K(),UHe=St(),fL=ta(),VHe=ZR(),bee=Im(),$He=Qe(),Eee=Pt(),GHe=An(),Tee=Fe(),pL=UHe("Reflect","construct"),WHe=Object.prototype,ZHe=[].push,Iee=Tee(function(){function e(){}return!(pL(function(){},[],e)instanceof e)}),Cee=!Tee(function(){pL(function(){})}),See=Iee||Cee;BHe({target:"Reflect",stat:!0,forced:See,sham:See},{construct:function(t,r){bee(t),$He(r);var n=arguments.length<3?t:bee(arguments[2]);if(Cee&&!Iee)return pL(t,r,n);if(t===n){switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3]);}var i=[null];return fL(ZHe,i,r),new(fL(VHe,t,i))}var a=n.prototype,h=GHe(Eee(a)?a:WHe),p=fL(t,h,r);return Eee(p)?p:h}})});var Mee=T(()=>{"use strict";var HHe=K(),KHe=gt(),qee=Qe(),XHe=ks(),Pee=Fr(),YHe=Fe(),JHe=YHe(function(){Reflect.defineProperty(Pee.f({},1,{value:1}),1,{value:2})});HHe({target:"Reflect",stat:!0,forced:JHe,sham:!KHe},{defineProperty:function(t,r,n){qee(t);var i=XHe(r);qee(n);try{return Pee.f(t,i,n),!0}catch(a){return!1}}})});var Oee=T(()=>{"use strict";var QHe=K(),eKe=Qe(),tKe=Qn().f;QHe({target:"Reflect",stat:!0},{deleteProperty:function(t,r){var n=tKe(eKe(t),r);return n&&!n.configurable?!1:delete t[r]}})});var dL=T((L5t,Dee)=>{"use strict";var Ree=Ft();Dee.exports=function(e){return e!==void 0&&(Ree(e,"value")||Ree(e,"writable"))}});var kee=T(()=>{"use strict";var rKe=K(),nKe=Ye(),iKe=Pt(),aKe=Qe(),oKe=dL(),sKe=Qn(),uKe=kn();function Lee(e,t){var r=arguments.length<3?e:arguments[2],n,i;if(aKe(e)===r)return e[t];if(n=sKe.f(e,t),n)return oKe(n)?n.value:n.get===void 0?void 0:nKe(n.get,r);if(iKe(i=uKe(e)))return Lee(i,t,r)}rKe({target:"Reflect",stat:!0},{get:Lee})});var Nee=T(()=>{"use strict";var lKe=K(),cKe=gt(),hKe=Qe(),fKe=Qn();lKe({target:"Reflect",stat:!0,sham:!cKe},{getOwnPropertyDescriptor:function(t,r){return fKe.f(hKe(t),r)}})});var Fee=T(()=>{"use strict";var pKe=K(),dKe=Qe(),mKe=kn(),vKe=vE();pKe({target:"Reflect",stat:!0,sham:!vKe},{getPrototypeOf:function(t){return mKe(dKe(t))}})});var zee=T(()=>{"use strict";var gKe=K();gKe({target:"Reflect",stat:!0},{has:function(t,r){return r in t}})});var jee=T(()=>{"use strict";var yKe=K(),_Ke=Qe(),xKe=HE();yKe({target:"Reflect",stat:!0},{isExtensible:function(t){return _Ke(t),xKe(t)}})});var Bee=T(()=>{"use strict";var wKe=K(),bKe=Xb();wKe({target:"Reflect",stat:!0},{ownKeys:bKe})});var Uee=T(()=>{"use strict";var EKe=K(),SKe=St(),TKe=Qe(),IKe=ql();EKe({target:"Reflect",stat:!0,sham:!IKe},{preventExtensions:function(t){TKe(t);try{var r=SKe("Object","preventExtensions");return r&&r(t),!0}catch(n){return!1}}})});var Zee=T(()=>{"use strict";var CKe=K(),AKe=Ye(),qKe=Qe(),Vee=Pt(),PKe=dL(),MKe=Fe(),mL=Fr(),$ee=Qn(),OKe=kn(),Gee=Ha();function Wee(e,t,r){var n=arguments.length<4?e:arguments[3],i=$ee.f(qKe(e),t),a,h,p;if(!i){if(Vee(h=OKe(e)))return Wee(h,t,r,n);i=Gee(0)}if(PKe(i)){if(i.writable===!1||!Vee(n))return!1;if(a=$ee.f(n,t)){if(a.get||a.set||a.writable===!1)return!1;a.value=r,mL.f(n,t,a)}else mL.f(n,t,Gee(0,r))}else{if(p=i.set,p===void 0)return!1;AKe(p,n,r)}return!0}var RKe=MKe(function(){var e=function(){},t=mL.f(new e,"a",{configurable:!0});return Reflect.set(e.prototype,"a",1,t)!==!1});CKe({target:"Reflect",stat:!0,forced:RKe},{set:Wee})});var Kee=T(()=>{"use strict";var DKe=K(),LKe=Qe(),kKe=PO(),Hee=is();Hee&&DKe({target:"Reflect",stat:!0},{setPrototypeOf:function(t,r){LKe(t),kKe(r);try{return Hee(t,r),!0}catch(n){return!1}}})});var Xee=T(()=>{"use strict";var NKe=K(),FKe=ot(),zKe=Ya();NKe({global:!0},{Reflect:{}});zKe(FKe.Reflect,"Reflect",!0)});var Nm=T((r6t,Yee)=>{"use strict";var jKe=Pt(),BKe=Pi(),UKe=yt(),VKe=UKe("match");Yee.exports=function(e){var t;return jKe(e)&&((t=e[VKe])!==void 0?!!t:BKe(e)==="RegExp")}});var pS=T((n6t,Jee)=>{"use strict";var $Ke=Qe();Jee.exports=function(){var e=$Ke(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var Fm=T((i6t,ete)=>{"use strict";var GKe=Ye(),WKe=Ft(),ZKe=ea(),HKe=pS(),Qee=RegExp.prototype;ete.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in Qee)&&!WKe(e,"flags")&&ZKe(Qee,e)?GKe(HKe,e):t}});var d0=T((a6t,tte)=>{"use strict";var vL=Fe(),KKe=ot(),gL=KKe.RegExp,yL=vL(function(){var e=gL("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),XKe=yL||vL(function(){return!gL("a","y").sticky}),YKe=yL||vL(function(){var e=gL("^r","gy");return e.lastIndex=2,e.exec("str")!==null});tte.exports={BROKEN_CARET:YKe,MISSED_STICKY:XKe,UNSUPPORTED_Y:yL}});var dS=T((o6t,rte)=>{"use strict";var JKe=Fe(),QKe=ot(),e9e=QKe.RegExp;rte.exports=JKe(function(){var e=e9e(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")})});var _L=T((s6t,nte)=>{"use strict";var t9e=Fe(),r9e=ot(),n9e=r9e.RegExp;nte.exports=t9e(function(){var e=n9e("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"})});var fte=T(()=>{"use strict";var i9e=gt(),EL=ot(),m0=Oe(),a9e=dm(),o9e=Gf(),s9e=Ln(),u9e=gl().f,ite=ea(),l9e=Nm(),ate=At(),c9e=Fm(),ute=d0(),h9e=MO(),f9e=br(),p9e=Fe(),d9e=Ft(),m9e=vr().enforce,v9e=ph(),g9e=yt(),lte=dS(),cte=_L(),y9e=g9e("match"),Eh=EL.RegExp,zm=Eh.prototype,_9e=EL.SyntaxError,x9e=m0(zm.exec),mS=m0("".charAt),ote=m0("".replace),ste=m0("".indexOf),w9e=m0("".slice),b9e=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,op=/a/g,xL=/a/g,E9e=new Eh(op)!==op,hte=ute.MISSED_STICKY,S9e=ute.UNSUPPORTED_Y,T9e=i9e&&(!E9e||hte||lte||cte||p9e(function(){return xL[y9e]=!1,Eh(op)!==op||Eh(xL)===xL||String(Eh(op,"i"))!=="/a/i"})),I9e=function(e){for(var t=e.length,r=0,n="",i=!1,a;r<=t;r++){if(a=mS(e,r),a==="\\"){n+=a+mS(e,++r);continue}!i&&a==="."?n+="[\\s\\S]":(a==="["?i=!0:a==="]"&&(i=!1),n+=a)}return n},C9e=function(e){for(var t=e.length,r=0,n="",i=[],a={},h=!1,p=!1,g=0,b="",E;r<=t;r++){if(E=mS(e,r),E==="\\")E+=mS(e,++r);else if(E==="]")h=!1;else if(!h)switch(!0){case E==="[":h=!0;break;case E==="(":x9e(b9e,w9e(e,r+1))&&(r+=2,p=!0),n+=E,g++;continue;case E===">"&&p:if(b===""||d9e(a,b))throw new _9e("Invalid capture group name");a[b]=!0,i[i.length]=[b,g],p=!1,b="";continue;}p?b+=E:n+=E}return[n,i]};if(a9e("RegExp",T9e)){for(bh=function(t,r){var n=ite(zm,this),i=l9e(t),a=r===void 0,h=[],p=t,g,b,E,q,P,L;if(!n&&i&&a&&t.constructor===bh)return t;if((i||ite(zm,t))&&(t=t.source,a&&(r=c9e(p))),t=t===void 0?"":ate(t),r=r===void 0?"":ate(r),p=t,lte&&("dotAll"in op)&&(b=!!r&&ste(r,"s")>-1,b&&(r=ote(r,/s/g,""))),g=r,hte&&("sticky"in op)&&(E=!!r&&ste(r,"y")>-1,E&&S9e&&(r=ote(r,/y/g,""))),cte&&(q=C9e(t),t=q[0],h=q[1]),P=o9e(Eh(t,r),n?this:zm,bh),(b||E||h.length)&&(L=m9e(P),b&&(L.dotAll=!0,L.raw=bh(I9e(t),g)),E&&(L.sticky=!0),h.length&&(L.groups=h)),t!==p)try{s9e(P,"source",p===""?"(?:)":p)}catch(W){}return P},wL=u9e(Eh),bL=0;wL.length>bL;)h9e(bh,Eh,wL[bL++]);zm.constructor=bh,bh.prototype=zm,f9e(EL,"RegExp",bh,{constructor:!0})}var bh,wL,bL;v9e("RegExp")});var dte=T(()=>{"use strict";var A9e=gt(),q9e=dS(),P9e=Pi(),M9e=en(),O9e=vr().get,pte=RegExp.prototype,R9e=TypeError;A9e&&q9e&&M9e(pte,"dotAll",{configurable:!0,get:function(){if(this!==pte){if(P9e(this)==="RegExp")return!!O9e(this).dotAll;throw new R9e("Incompatible receiver, RegExp required")}}})});var v0=T((f6t,vte)=>{"use strict";var jm=Ye(),gS=Oe(),D9e=At(),L9e=pS(),k9e=d0(),N9e=vu(),F9e=An(),z9e=vr().get,j9e=dS(),B9e=_L(),U9e=N9e("native-string-replace",String.prototype.replace),vS=RegExp.prototype.exec,TL=vS,V9e=gS("".charAt),$9e=gS("".indexOf),G9e=gS("".replace),SL=gS("".slice),IL=function(){var e=/a/,t=/b*/g;return jm(vS,e,"a"),jm(vS,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),mte=k9e.BROKEN_CARET,CL=/()??/.exec("")[1]!==void 0,W9e=IL||CL||mte||j9e||B9e;W9e&&(TL=function(t){var r=this,n=z9e(r),i=D9e(t),a=n.raw,h,p,g,b,E,q,P;if(a)return a.lastIndex=r.lastIndex,h=jm(TL,a,i),r.lastIndex=a.lastIndex,h;var L=n.groups,W=mte&&r.sticky,Q=jm(L9e,r),V=r.source,$=0,H=i;if(W&&(Q=G9e(Q,"y",""),$9e(Q,"g")===-1&&(Q+="g"),H=SL(i,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&V9e(i,r.lastIndex-1)!==`
`)&&(V="(?: "+V+")",H=" "+H,$++),p=new RegExp("^(?:"+V+")",Q)),CL&&(p=new RegExp("^"+V+"$(?!\\s)",Q)),IL&&(g=r.lastIndex),b=jm(vS,W?p:r,H),W?b?(b.input=SL(b.input,$),b[0]=SL(b[0],$),b.index=r.lastIndex,r.lastIndex+=b[0].length):r.lastIndex=0:IL&&b&&(r.lastIndex=r.global?b.index+b[0].length:g),CL&&b&&b.length>1&&jm(U9e,b[0],p,function(){for(E=1;E<arguments.length-2;E++)arguments[E]===void 0&&(b[E]=void 0)}),b&&L)for(b.groups=q=F9e(null),E=0;E<L.length;E++)P=L[E],q[P[0]]=b[P[1]];return b});vte.exports=TL});var yS=T(()=>{"use strict";var Z9e=K(),gte=v0();Z9e({target:"RegExp",proto:!0,forced:/./.exec!==gte},{exec:gte})});var xte=T(()=>{"use strict";var H9e=ot(),K9e=gt(),X9e=en(),Y9e=pS(),J9e=Fe(),yte=H9e.RegExp,_te=yte.prototype,Q9e=K9e&&J9e(function(){var e=!0;try{yte(".","d")}catch(g){e=!1}var t={},r="",n=e?"dgimsy":"gimsy",i=function(g,b){Object.defineProperty(t,g,{get:function(){return r+=b,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(a.hasIndices="d");for(var h in a)i(h,a[h]);var p=Object.getOwnPropertyDescriptor(_te,"flags").get.call(t);return p!==n||r!==n});Q9e&&X9e(_te,"flags",{configurable:!0,get:Y9e})});var bte=T(()=>{"use strict";var e7e=gt(),t7e=d0().MISSED_STICKY,r7e=Pi(),n7e=en(),i7e=vr().get,wte=RegExp.prototype,a7e=TypeError;e7e&&t7e&&n7e(wte,"sticky",{configurable:!0,get:function(){if(this!==wte){if(r7e(this)==="RegExp")return!!i7e(this).sticky;throw new a7e("Incompatible receiver, RegExp required")}}})});var Tte=T(()=>{"use strict";yS();var o7e=K(),Ete=Ye(),s7e=qt(),Ste=Qe(),u7e=At(),l7e=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),c7e=/./.test;o7e({target:"RegExp",proto:!0,forced:!l7e},{test:function(e){var t=Ste(this),r=u7e(e),n=t.exec;if(!s7e(n))return Ete(c7e,t,r);var i=Ete(n,t,r);return i===null?!1:(Ste(i),!0)}})});var Ate=T(()=>{"use strict";var h7e=Ff().PROPER,f7e=br(),p7e=Qe(),Ite=At(),d7e=Fe(),m7e=Fm(),AL="toString",v7e=RegExp.prototype,Cte=v7e[AL],g7e=d7e(function(){return Cte.call({source:"a",flags:"b"})!=="/a/b"}),y7e=h7e&&Cte.name!==AL;(g7e||y7e)&&f7e(RegExp.prototype,AL,function(){var t=p7e(this),r=Ite(t.source),n=Ite(m7e(t));return"/"+r+"/"+n},{unsafe:!0})});var qte=T(()=>{"use strict";var _7e=J_(),x7e=nD();_7e("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},x7e)});var Pte=T(()=>{"use strict";qte()});var Mte=T(()=>{"use strict";var w7e=K(),b7e=Oe(),E7e=$r(),S7e=Gr(),T7e=At(),I7e=Fe(),C7e=b7e("".charAt),A7e=I7e(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});w7e({target:"String",proto:!0,forced:A7e},{at:function(t){var r=T7e(E7e(this)),n=r.length,i=S7e(t),a=i>=0?i:n+i;return a<0||a>=n?void 0:C7e(r,a)}})});var sp=T((q6t,Dte)=>{"use strict";var qL=Oe(),q7e=Gr(),P7e=At(),M7e=$r(),O7e=qL("".charAt),Ote=qL("".charCodeAt),R7e=qL("".slice),Rte=function(e){return function(t,r){var n=P7e(M7e(t)),i=q7e(r),a=n.length,h,p;return i<0||i>=a?e?"":void 0:(h=Ote(n,i),h<55296||h>56319||i+1===a||(p=Ote(n,i+1))<56320||p>57343?e?O7e(n,i):h:e?R7e(n,i,i+2):(h-55296<<10)+(p-56320)+65536)}};Dte.exports={codeAt:Rte(!1),charAt:Rte(!0)}});var Lte=T(()=>{"use strict";var D7e=K(),L7e=sp().codeAt;D7e({target:"String",proto:!0},{codePointAt:function(t){return L7e(this,t)}})});var _S=T((O6t,kte)=>{"use strict";var k7e=Nm(),N7e=TypeError;kte.exports=function(e){if(k7e(e))throw new N7e("The method doesn't accept regular expressions");return e}});var xS=T((R6t,Nte)=>{"use strict";var F7e=yt(),z7e=F7e("match");Nte.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[z7e]=!1,"/./"[e](t)}catch(n){}}return!1}});var Ute=T(()=>{"use strict";var j7e=K(),jte=yl(),B7e=Qn().f,U7e=Ka(),Fte=At(),V7e=_S(),$7e=$r(),G7e=xS(),W7e=Ut(),zte=jte("".endsWith),Z7e=jte("".slice),H7e=Math.min,Bte=G7e("endsWith"),K7e=!W7e&&!Bte&&!!function(){var e=B7e(String.prototype,"endsWith");return e&&!e.writable}();j7e({target:"String",proto:!0,forced:!K7e&&!Bte},{endsWith:function(t){var r=Fte($7e(this));V7e(t);var n=arguments.length>1?arguments[1]:void 0,i=r.length,a=n===void 0?i:H7e(U7e(n),i),h=Fte(t);return zte?zte(r,h,a):Z7e(r,a-h.length,a)===h}})});var Gte=T(()=>{"use strict";var X7e=K(),Y7e=Oe(),J7e=ts(),Q7e=RangeError,Vte=String.fromCharCode,$te=String.fromCodePoint,eXe=Y7e([].join),tXe=!!$te&&$te.length!==1;X7e({target:"String",stat:!0,arity:1,forced:tXe},{fromCodePoint:function(t){for(var r=[],n=arguments.length,i=0,a;n>i;){if(a=+arguments[i++],J7e(a,1114111)!==a)throw new Q7e(a+" is not a valid code point");r[i]=a<65536?Vte(a):Vte(((a-=65536)>>10)+55296,a%1024+56320)}return eXe(r,"")}})});var Zte=T(()=>{"use strict";var rXe=K(),nXe=Oe(),iXe=_S(),aXe=$r(),Wte=At(),oXe=xS(),sXe=nXe("".indexOf);rXe({target:"String",proto:!0,forced:!oXe("includes")},{includes:function(t){return!!~sXe(Wte(aXe(this)),Wte(iXe(t)),arguments.length>1?arguments[1]:void 0)}})});var PL=T(()=>{"use strict";var uXe=K(),lXe=Oe(),cXe=$r(),hXe=At(),Hte=lXe("".charCodeAt);uXe({target:"String",proto:!0},{isWellFormed:function(){for(var t=hXe(cXe(this)),r=t.length,n=0;n<r;n++){var i=Hte(t,n);if((i&63488)===55296&&(i>=56320||++n>=r||(Hte(t,n)&64512)!==56320))return!1}return!0}})});var ML=T(()=>{"use strict";var fXe=sp().charAt,pXe=At(),Xte=vr(),dXe=TE(),Kte=Mi(),Yte="String Iterator",mXe=Xte.set,vXe=Xte.getterFor(Yte);dXe(String,"String",function(e){mXe(this,{type:Yte,string:pXe(e),index:0})},function(){var t=vXe(this),r=t.string,n=t.index,i;return n>=r.length?Kte(void 0,!0):(i=fXe(r,n),t.index+=i.length,Kte(i,!1))})});var g0=T(($6t,rre)=>{"use strict";yS();var Jte=yl(),Qte=br(),gXe=v0(),ere=Fe(),tre=yt(),yXe=Ln(),_Xe=tre("species"),OL=RegExp.prototype;rre.exports=function(e,t,r,n){var i=tre(e),a=!ere(function(){var b={};return b[i]=function(){return 7},""[e](b)!==7}),h=a&&!ere(function(){var b=!1,E=/a/;return e==="split"&&(E={},E.constructor={},E.constructor[_Xe]=function(){return E},E.flags="",E[i]=/./[i]),E.exec=function(){return b=!0,null},E[i](""),!b});if(!a||!h||r){var p=Jte(/./[i]),g=t(i,""[e],function(b,E,q,P,L){var W=Jte(b),Q=E.exec;return Q===gXe||Q===OL.exec?a&&!L?{done:!0,value:p(E,q,P)}:{done:!0,value:W(q,E,P)}:{done:!1}});Qte(String.prototype,e,g[0]),Qte(OL,i,g[1])}n&&yXe(OL[i],"sham",!0)}});var y0=T((G6t,nre)=>{"use strict";var xXe=sp().charAt;nre.exports=function(e,t,r){return t+(r?xXe(e,t).length:1)}});var Bm=T((W6t,are)=>{"use strict";var ire=Ye(),wXe=Qe(),bXe=qt(),EXe=Pi(),SXe=v0(),TXe=TypeError;are.exports=function(e,t){var r=e.exec;if(bXe(r)){var n=ire(r,e,t);return n!==null&&wXe(n),n}if(EXe(e)==="RegExp")return ire(SXe,e,t);throw new TXe("RegExp#exec called on incompatible receiver")}});var sre=T(()=>{"use strict";var IXe=Ye(),CXe=g0(),AXe=Qe(),qXe=Dn(),PXe=Ka(),RL=At(),MXe=$r(),OXe=Cn(),RXe=y0(),ore=Bm();CXe("match",function(e,t,r){return[function(i){var a=MXe(this),h=qXe(i)?void 0:OXe(i,e);return h?IXe(h,i,a):new RegExp(i)[e](RL(a))},function(n){var i=AXe(this),a=RL(n),h=r(t,i,a);if(h.done)return h.value;if(!i.global)return ore(i,a);var p=i.unicode;i.lastIndex=0;for(var g=[],b=0,E;(E=ore(i,a))!==null;){var q=RL(E[0]);g[b]=q,q===""&&(i.lastIndex=RXe(a,PXe(i.lastIndex),p)),b++}return b===0?null:g}]})});var FL=T(()=>{"use strict";var DXe=K(),ure=Ye(),hre=yl(),LXe=hh(),wS=Mi(),lre=$r(),fre=Ka(),_0=At(),kXe=Qe(),NXe=Dn(),FXe=Pi(),zXe=Nm(),pre=Fm(),jXe=Cn(),BXe=br(),UXe=Fe(),VXe=yt(),$Xe=Jf(),GXe=y0(),WXe=Bm(),dre=vr(),LL=Ut(),bS=VXe("matchAll"),mre="RegExp String",vre=mre+" Iterator",ZXe=dre.set,HXe=dre.getterFor(vre),cre=RegExp.prototype,KXe=TypeError,kL=hre("".indexOf),ES=hre("".matchAll),DL=!!ES&&!UXe(function(){ES("a",/./)}),XXe=LXe(function(t,r,n,i){ZXe(this,{type:vre,regexp:t,string:r,global:n,unicode:i,done:!1})},mre,function(){var t=HXe(this);if(t.done)return wS(void 0,!0);var r=t.regexp,n=t.string,i=WXe(r,n);return i===null?(t.done=!0,wS(void 0,!0)):t.global?(_0(i[0])===""&&(r.lastIndex=GXe(n,fre(r.lastIndex),t.unicode)),wS(i,!1)):(t.done=!0,wS(i,!1))}),NL=function(e){var t=kXe(this),r=_0(e),n=$Xe(t,RegExp),i=_0(pre(t)),a,h,p;return a=new n(n===RegExp?t.source:t,i),h=!!~kL(i,"g"),p=!!~kL(i,"u"),a.lastIndex=fre(t.lastIndex),new XXe(a,r,h,p)};DXe({target:"String",proto:!0,forced:DL},{matchAll:function(t){var r=lre(this),n,i,a,h;if(NXe(t)){if(DL)return ES(r,t)}else{if(zXe(t)&&(n=_0(lre(pre(t))),!~kL(n,"g")))throw new KXe("`.matchAll` does not allow non-global regexes");if(DL)return ES(r,t);if(a=jXe(t,bS),a===void 0&&LL&&FXe(t)==="RegExp"&&(a=NL),a)return ure(a,t,r)}return i=_0(r),h=new RegExp(t,"g"),LL?ure(NL,h,i):h[bS](i)}});LL||bS in cre||BXe(cre,bS,NL)});var zL=T((Y6t,gre)=>{"use strict";var YXe=du();gre.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(YXe)});var yre=T(()=>{"use strict";var JXe=K(),QXe=GE().end,eYe=zL();JXe({target:"String",proto:!0,forced:eYe},{padEnd:function(t){return QXe(this,t,arguments.length>1?arguments[1]:void 0)}})});var _re=T(()=>{"use strict";var tYe=K(),rYe=GE().start,nYe=zL();tYe({target:"String",proto:!0,forced:nYe},{padStart:function(t){return rYe(this,t,arguments.length>1?arguments[1]:void 0)}})});var Ere=T(()=>{"use strict";var iYe=K(),bre=Oe(),aYe=Bn(),oYe=Vt(),xre=At(),sYe=Ht(),wre=bre([].push),uYe=bre([].join);iYe({target:"String",stat:!0},{raw:function(t){var r=aYe(oYe(t).raw),n=sYe(r);if(!n)return"";for(var i=arguments.length,a=[],h=0;;){if(wre(a,xre(r[h++])),h===n)return uYe(a,"");h<i&&wre(a,xre(arguments[h]))}}})});var Sre=T(()=>{"use strict";var lYe=K(),cYe=X_();lYe({target:"String",proto:!0},{repeat:cYe})});var VL=T((oVt,Tre)=>{"use strict";var UL=Oe(),hYe=Vt(),fYe=Math.floor,jL=UL("".charAt),pYe=UL("".replace),BL=UL("".slice),dYe=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,mYe=/\$([$&'`]|\d{1,2})/g;Tre.exports=function(e,t,r,n,i,a){var h=r+e.length,p=n.length,g=mYe;return i!==void 0&&(i=hYe(i),g=dYe),pYe(a,g,function(b,E){var q;switch(jL(E,0)){case"$":return"$";case"&":return e;case"`":return BL(t,0,r);case"'":return BL(t,h);case"<":q=i[BL(E,1,-1)];break;default:var P=+E;if(P===0)return b;if(P>p){var L=fYe(P/10);return L===0?b:L<=p?n[L-1]===void 0?jL(E,1):n[L-1]+jL(E,1):b}q=n[P-1];}return q===void 0?"":q})}});var Pre=T(()=>{"use strict";var vYe=ta(),Ire=Ye(),SS=Oe(),gYe=g0(),yYe=Fe(),_Ye=Qe(),xYe=qt(),wYe=Dn(),bYe=Gr(),EYe=Ka(),Um=At(),SYe=$r(),TYe=y0(),IYe=Cn(),CYe=VL(),AYe=Bm(),qYe=yt(),GL=qYe("replace"),PYe=Math.max,MYe=Math.min,OYe=SS([].concat),$L=SS([].push),Cre=SS("".indexOf),Are=SS("".slice),RYe=function(e){return e===void 0?e:String(e)},DYe=function(){return"a".replace(/./,"$0")==="$0"}(),qre=function(){return /./[GL]?/./[GL]("a","$0")==="":!1}(),LYe=!yYe(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});gYe("replace",function(e,t,r){var n=qre?"$":"$0";return[function(a,h){var p=SYe(this),g=wYe(a)?void 0:IYe(a,GL);return g?Ire(g,a,p,h):Ire(t,Um(p),a,h)},function(i,a){var h=_Ye(this),p=Um(i);if(typeof a=="string"&&Cre(a,n)===-1&&Cre(a,"$<")===-1){var g=r(t,h,p,a);if(g.done)return g.value}var b=xYe(a);b||(a=Um(a));var E=h.global,q;E&&(q=h.unicode,h.lastIndex=0);for(var P=[],L;L=AYe(h,p),!(L===null||($L(P,L),!E));){var W=Um(L[0]);W===""&&(h.lastIndex=TYe(p,EYe(h.lastIndex),q))}for(var Q="",V=0,$=0;$<P.length;$++){L=P[$];for(var H=Um(L[0]),re=PYe(MYe(bYe(L.index),p.length),0),se=[],Ie,qe=1;qe<L.length;qe++)$L(se,RYe(L[qe]));var Ae=L.groups;if(b){var Ue=OYe([H],se,re,p);Ae!==void 0&&$L(Ue,Ae),Ie=Um(vYe(a,void 0,Ue))}else Ie=CYe(H,p,re,se,Ae,a);re>=V&&(Q+=Are(p,V,re)+Ie,V=re+H.length)}return Q+Are(p,V)}]},!LYe||!DYe||qre)});var ZL=T(()=>{"use strict";var kYe=K(),NYe=Ye(),WL=Oe(),Mre=$r(),FYe=qt(),zYe=Dn(),jYe=Nm(),Vm=At(),BYe=Cn(),UYe=Fm(),VYe=VL(),$Ye=yt(),GYe=Ut(),WYe=$Ye("replace"),ZYe=TypeError,Dre=WL("".indexOf),HYe=WL("".replace),Ore=WL("".slice),KYe=Math.max,Rre=function(e,t,r){return r>e.length?-1:t===""?r:Dre(e,t,r)};kYe({target:"String",proto:!0},{replaceAll:function(t,r){var n=Mre(this),i,a,h,p,g,b,E,q,P,L=0,W=0,Q="";if(!zYe(t)){if(i=jYe(t),i&&(a=Vm(Mre(UYe(t))),!~Dre(a,"g")))throw new ZYe("`.replaceAll` does not allow non-global regexes");if(h=BYe(t,WYe),h)return NYe(h,t,n,r);if(GYe&&i)return HYe(Vm(n),t,r)}for(p=Vm(n),g=Vm(t),b=FYe(r),b||(r=Vm(r)),E=g.length,q=KYe(1,E),L=Rre(p,g,0);L!==-1;)P=b?Vm(r(g,L,p)):VYe(g,p,L,[],void 0,r),Q+=Ore(p,W,L)+P,W=L+E,L=Rre(p,g,L+q);return W<p.length&&(Q+=Ore(p,W)),Q}})});var Nre=T(()=>{"use strict";var XYe=Ye(),YYe=g0(),JYe=Qe(),QYe=Dn(),eJe=$r(),Lre=ID(),kre=At(),tJe=Cn(),rJe=Bm();YYe("search",function(e,t,r){return[function(i){var a=eJe(this),h=QYe(i)?void 0:tJe(i,e);return h?XYe(h,i,a):new RegExp(i)[e](kre(a))},function(n){var i=JYe(this),a=kre(n),h=r(t,i,a);if(h.done)return h.value;var p=i.lastIndex;Lre(p,0)||(i.lastIndex=0);var g=rJe(i,a);return Lre(i.lastIndex,p)||(i.lastIndex=p),g===null?-1:g.index}]})});var Vre=T(()=>{"use strict";var nJe=ta(),x0=Ye(),KL=Oe(),iJe=g0(),aJe=Qe(),oJe=Dn(),sJe=Nm(),Fre=$r(),uJe=Jf(),lJe=y0(),cJe=Ka(),HL=At(),hJe=Cn(),zre=Bf(),jre=Bm(),fJe=v0(),pJe=d0(),dJe=Fe(),$m=pJe.UNSUPPORTED_Y,Bre=4294967295,mJe=Math.min,Ure=[].push,vJe=KL(/./.exec),Gm=KL(Ure),w0=KL("".slice),gJe=!dJe(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return r.length!==2||r[0]!=="a"||r[1]!=="b"});iJe("split",function(e,t,r){var n;return"abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length?n=function(i,a){var h=HL(Fre(this)),p=a===void 0?Bre:a>>>0;if(p===0)return[];if(i===void 0)return[h];if(!sJe(i))return x0(t,h,i,p);for(var g=[],b=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(i.sticky?"y":""),E=0,q=new RegExp(i.source,b+"g"),P,L,W;(P=x0(fJe,q,h))&&(L=q.lastIndex,!(L>E&&(Gm(g,w0(h,E,P.index)),P.length>1&&P.index<h.length&&nJe(Ure,g,zre(P,1)),W=P[0].length,E=L,g.length>=p)));)q.lastIndex===P.index&&q.lastIndex++;return E===h.length?(W||!vJe(q,""))&&Gm(g,""):Gm(g,w0(h,E)),g.length>p?zre(g,0,p):g}:"0".split(void 0,0).length?n=function(i,a){return i===void 0&&a===0?[]:x0(t,this,i,a)}:n=t,[function(a,h){var p=Fre(this),g=oJe(a)?void 0:hJe(a,e);return g?x0(g,a,p,h):x0(n,HL(p),a,h)},function(i,a){var h=aJe(this),p=HL(i),g=r(n,h,p,a,n!==t);if(g.done)return g.value;var b=uJe(h,RegExp),E=h.unicode,q=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+($m?"g":"y"),P=new b($m?"^(?:"+h.source+")":h,q),L=a===void 0?Bre:a>>>0;if(L===0)return[];if(p.length===0)return jre(P,p)===null?[p]:[];for(var W=0,Q=0,V=[];Q<p.length;){P.lastIndex=$m?0:Q;var $=jre(P,$m?w0(p,Q):p),H;if($===null||(H=mJe(cJe(P.lastIndex+($m?Q:0)),p.length))===W)Q=lJe(p,Q,E);else{if(Gm(V,w0(p,W,Q)),V.length===L)return V;for(var re=1;re<=$.length-1;re++)if(Gm(V,$[re]),V.length===L)return V;Q=W=H}}return Gm(V,w0(p,W)),V}]},!gJe,$m)});var Hre=T(()=>{"use strict";var yJe=K(),Wre=yl(),_Je=Qn().f,xJe=Ka(),$re=At(),wJe=_S(),bJe=$r(),EJe=xS(),SJe=Ut(),Gre=Wre("".startsWith),TJe=Wre("".slice),IJe=Math.min,Zre=EJe("startsWith"),CJe=!SJe&&!Zre&&!!function(){var e=_Je(String.prototype,"startsWith");return e&&!e.writable}();yJe({target:"String",proto:!0,forced:!CJe&&!Zre},{startsWith:function(t){var r=$re(bJe(this));wJe(t);var n=xJe(IJe(arguments.length>1?arguments[1]:void 0,r.length)),i=$re(t);return Gre?Gre(r,i,n):TJe(r,n,n+i.length)===i}})});var Xre=T(()=>{"use strict";var AJe=K(),qJe=Oe(),PJe=$r(),Kre=Gr(),MJe=At(),OJe=qJe("".slice),RJe=Math.max,DJe=Math.min,LJe=!"".substr||"ab".substr(-1)!=="b";AJe({target:"String",proto:!0,forced:LJe},{substr:function(t,r){var n=MJe(PJe(this)),i=n.length,a=Kre(t),h,p;return a===1/0&&(a=0),a<0&&(a=RJe(i+a,0)),h=r===void 0?i:Kre(r),h<=0||h===1/0?"":(p=DJe(a+h,i),a>=p?"":OJe(n,a,p))}})});var QL=T(()=>{"use strict";var kJe=K(),Qre=Ye(),JL=Oe(),NJe=$r(),FJe=At(),zJe=Fe(),jJe=Array,XL=JL("".charAt),Yre=JL("".charCodeAt),BJe=JL([].join),YL="".toWellFormed,UJe="\uFFFD",Jre=YL&&zJe(function(){return Qre(YL,1)!=="1"});kJe({target:"String",proto:!0,forced:Jre},{toWellFormed:function(){var t=FJe(NJe(this));if(Jre)return Qre(YL,t);for(var r=t.length,n=jJe(r),i=0;i<r;i++){var a=Yre(t,i);(a&63488)!==55296?n[i]=XL(t,i):a>=56320||i+1>=r||(Yre(t,i+1)&64512)!==56320?n[i]=UJe:(n[i]=XL(t,i),n[++i]=XL(t,i))}return BJe(n,"")}})});var TS=T((wVt,rne)=>{"use strict";var VJe=Ff().PROPER,$Je=Fe(),ene=ep(),tne="\u200B\x85\u180E";rne.exports=function(e){return $Je(function(){return!!ene[e]()||tne[e]()!==tne||VJe&&ene[e].name!==e})}});var nne=T(()=>{"use strict";var GJe=K(),WJe=tp().trim,ZJe=TS();GJe({target:"String",proto:!0,forced:ZJe("trim")},{trim:function(){return WJe(this)}})});var ek=T((SVt,ine)=>{"use strict";var HJe=tp().end,KJe=TS();ine.exports=KJe("trimEnd")?function(){return HJe(this)}:"".trimEnd});var one=T(()=>{"use strict";var XJe=K(),ane=ek();XJe({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==ane},{trimRight:ane})});var une=T(()=>{"use strict";one();var YJe=K(),sne=ek();YJe({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==sne},{trimEnd:sne})});var tk=T((qVt,lne)=>{"use strict";var JJe=tp().start,QJe=TS();lne.exports=QJe("trimStart")?function(){return JJe(this)}:"".trimStart});var hne=T(()=>{"use strict";var eQe=K(),cne=tk();eQe({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==cne},{trimLeft:cne})});var pne=T(()=>{"use strict";hne();var tQe=K(),fne=tk();tQe({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==fne},{trimStart:fne})});var eo=T((DVt,mne)=>{"use strict";var rQe=Oe(),nQe=$r(),dne=At(),iQe=/"/g,aQe=rQe("".replace);mne.exports=function(e,t,r,n){var i=dne(nQe(e)),a="<"+t;return r!==""&&(a+=" "+r+"=\""+aQe(dne(n),iQe,"&quot;")+"\""),a+">"+i+"</"+t+">"}});var to=T((LVt,vne)=>{"use strict";var oQe=Fe();vne.exports=function(e){return oQe(function(){var t=""[e]("\"");return t!==t.toLowerCase()||t.split("\"").length>3})}});var gne=T(()=>{"use strict";var sQe=K(),uQe=eo(),lQe=to();sQe({target:"String",proto:!0,forced:lQe("anchor")},{anchor:function(t){return uQe(this,"a","name",t)}})});var yne=T(()=>{"use strict";var cQe=K(),hQe=eo(),fQe=to();cQe({target:"String",proto:!0,forced:fQe("big")},{big:function(){return hQe(this,"big","","")}})});var _ne=T(()=>{"use strict";var pQe=K(),dQe=eo(),mQe=to();pQe({target:"String",proto:!0,forced:mQe("blink")},{blink:function(){return dQe(this,"blink","","")}})});var xne=T(()=>{"use strict";var vQe=K(),gQe=eo(),yQe=to();vQe({target:"String",proto:!0,forced:yQe("bold")},{bold:function(){return gQe(this,"b","","")}})});var wne=T(()=>{"use strict";var _Qe=K(),xQe=eo(),wQe=to();_Qe({target:"String",proto:!0,forced:wQe("fixed")},{fixed:function(){return xQe(this,"tt","","")}})});var bne=T(()=>{"use strict";var bQe=K(),EQe=eo(),SQe=to();bQe({target:"String",proto:!0,forced:SQe("fontcolor")},{fontcolor:function(t){return EQe(this,"font","color",t)}})});var Ene=T(()=>{"use strict";var TQe=K(),IQe=eo(),CQe=to();TQe({target:"String",proto:!0,forced:CQe("fontsize")},{fontsize:function(t){return IQe(this,"font","size",t)}})});var Sne=T(()=>{"use strict";var AQe=K(),qQe=eo(),PQe=to();AQe({target:"String",proto:!0,forced:PQe("italics")},{italics:function(){return qQe(this,"i","","")}})});var Tne=T(()=>{"use strict";var MQe=K(),OQe=eo(),RQe=to();MQe({target:"String",proto:!0,forced:RQe("link")},{link:function(t){return OQe(this,"a","href",t)}})});var Ine=T(()=>{"use strict";var DQe=K(),LQe=eo(),kQe=to();DQe({target:"String",proto:!0,forced:kQe("small")},{small:function(){return LQe(this,"small","","")}})});var Cne=T(()=>{"use strict";var NQe=K(),FQe=eo(),zQe=to();NQe({target:"String",proto:!0,forced:zQe("strike")},{strike:function(){return FQe(this,"strike","","")}})});var Ane=T(()=>{"use strict";var jQe=K(),BQe=eo(),UQe=to();jQe({target:"String",proto:!0,forced:UQe("sub")},{sub:function(){return BQe(this,"sub","","")}})});var qne=T(()=>{"use strict";var VQe=K(),$Qe=eo(),GQe=to();VQe({target:"String",proto:!0,forced:GQe("sup")},{sup:function(){return $Qe(this,"sup","","")}})});var IS=T((u$t,Mne)=>{"use strict";var Pne=ot(),rk=Fe(),WQe=U_(),ZQe=zt().NATIVE_ARRAY_BUFFER_VIEWS,HQe=Pne.ArrayBuffer,up=Pne.Int8Array;Mne.exports=!ZQe||!rk(function(){up(1)})||!rk(function(){new up(-1)})||!WQe(function(e){new up,new up(null),new up(1.5),new up(e)},!0)||rk(function(){return new up(new HQe(2),1,void 0).length!==1})});var Wm=T((l$t,One)=>{"use strict";var KQe=Gr(),XQe=RangeError;One.exports=function(e){var t=KQe(e);if(t<0)throw new XQe("The argument can't be less than 0");return t}});var nk=T((c$t,Rne)=>{"use strict";var YQe=Wm(),JQe=RangeError;Rne.exports=function(e,t){var r=YQe(e);if(r%t)throw new JQe("Wrong offset");return r}});var ik=T((h$t,Dne)=>{"use strict";var QQe=Math.round;Dne.exports=function(e){var t=QQe(e);return t<0?0:t>255?255:t&255}});var CS=T((f$t,Lne)=>{"use strict";var eet=Xa();Lne.exports=function(e){var t=eet(e);return t==="BigInt64Array"||t==="BigUint64Array"}});var b0=T((p$t,kne)=>{"use strict";var tet=S_(),ret=TypeError;kne.exports=function(e){var t=tet(e,"number");if(typeof t=="number")throw new ret("Can't convert number to bigint");return BigInt(t)}});var ak=T((d$t,Nne)=>{"use strict";var net=Pr(),iet=Ye(),aet=Im(),oet=Vt(),set=Ht(),uet=lh(),cet=bl(),het=gE(),fet=CS(),pet=zt().aTypedArrayConstructor,det=b0();Nne.exports=function(t){var r=aet(this),n=oet(t),i=arguments.length,a=i>1?arguments[1]:void 0,h=a!==void 0,p=cet(n),g,b,E,q,P,L,W,Q;if(p&&!het(p))for(W=uet(n,p),Q=W.next,n=[];!(L=iet(Q,W)).done;)n.push(L.value);for(h&&i>2&&(a=net(a,arguments[2])),b=set(n),E=new(pet(r))(b),q=fet(E),g=0;b>g;g++)P=h?a(n[g],g):n[g],E[g]=q?det(P):+P;return E}});var Eu=T((m$t,fk)=>{"use strict";var Fne=K(),Kne=ot(),zne=Ye(),met=gt(),vet=IS(),Zm=zt(),Xne=K_(),jne=ra(),get=Ha(),E0=Ln(),yet=QE(),_et=Ka(),Bne=xm(),ok=nk(),xet=ik(),Yne=ks(),S0=Ft(),wet=Xa(),lk=Pt(),bet=vl(),Eet=An(),Tet=ea(),AS=is(),Iet=gl().f,Une=ak(),Cet=qn().forEach,Aet=ph(),qet=en(),Jne=Fr(),Qne=Qn(),pk=vr(),Pet=Gf(),ck=pk.get,Met=pk.set,Oet=pk.enforce,eie=Jne.f,Ret=Qne.f,sk=Kne.RangeError,tie=Xne.ArrayBuffer,Det=tie.prototype,Let=Xne.DataView,qS=Zm.NATIVE_ARRAY_BUFFER_VIEWS,Vne=Zm.TYPED_ARRAY_TAG,$ne=Zm.TypedArray,T0=Zm.TypedArrayPrototype,ket=Zm.aTypedArrayConstructor,hk=Zm.isTypedArray,PS="BYTES_PER_ELEMENT",uk="Wrong length",Gne=function(e,t){ket(e);for(var r=0,n=t.length,i=new e(n);n>r;)i[r]=t[r++];return i},MS=function(e,t){qet(e,t,{configurable:!0,get:function(){return ck(this)[t]}})},Wne=function(e){var t;return Tet(Det,e)||(t=wet(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},rie=function(e,t){return hk(e)&&!bet(t)&&t in e&&yet(+t)&&t>=0},Zne=function(t,r){return r=Yne(r),rie(t,r)?get(2,t[r]):Ret(t,r)},Hne=function(t,r,n){return r=Yne(r),rie(t,r)&&lk(n)&&S0(n,"value")&&!S0(n,"get")&&!S0(n,"set")&&!n.configurable&&(!S0(n,"writable")||n.writable)&&(!S0(n,"enumerable")||n.enumerable)?(t[r]=n.value,t):eie(t,r,n)};met?(qS||(Qne.f=Zne,Jne.f=Hne,MS(T0,"buffer"),MS(T0,"byteOffset"),MS(T0,"byteLength"),MS(T0,"length")),Fne({target:"Object",stat:!0,forced:!qS},{getOwnPropertyDescriptor:Zne,defineProperty:Hne}),fk.exports=function(e,t,r){var n=e.match(/\d+/)[0]/8,i=e+(r?"Clamped":"")+"Array",a="get"+e,h="set"+e,p=Kne[i],g=p,b=g&&g.prototype,E={},q=function(Q,V){var $=ck(Q);return $.view[a](V*n+$.byteOffset,!0)},P=function(Q,V,$){var H=ck(Q);H.view[h](V*n+H.byteOffset,r?xet($):$,!0)},L=function(Q,V){eie(Q,V,{get:function(){return q(this,V)},set:function($){return P(this,V,$)},enumerable:!0})};qS?vet&&(g=t(function(Q,V,$,H){return jne(Q,b),Pet(function(){return lk(V)?Wne(V)?H!==void 0?new p(V,ok($,n),H):$!==void 0?new p(V,ok($,n)):new p(V):hk(V)?Gne(g,V):zne(Une,g,V):new p(Bne(V))}(),Q,g)}),AS&&AS(g,$ne),Cet(Iet(p),function(Q){Q in g||E0(g,Q,p[Q])}),g.prototype=b):(g=t(function(Q,V,$,H){jne(Q,b);var re=0,se=0,Ie,qe,Ae;if(!lk(V))Ae=Bne(V),qe=Ae*n,Ie=new tie(qe);else if(Wne(V)){Ie=V,se=ok($,n);var Ue=V.byteLength;if(H===void 0){if(Ue%n)throw new sk(uk);if(qe=Ue-se,qe<0)throw new sk(uk)}else if(qe=_et(H)*n,qe+se>Ue)throw new sk(uk);Ae=qe/n}else return hk(V)?Gne(g,V):zne(Une,g,V);for(Met(Q,{buffer:Ie,byteOffset:se,byteLength:qe,length:Ae,view:new Let(Ie)});re<Ae;)L(Q,re++)}),AS&&AS(g,$ne),b=g.prototype=Eet(T0)),b.constructor!==g&&E0(b,"constructor",g),Oet(b).TypedArrayConstructor=g,Vne&&E0(b,Vne,i);var W=g!==p;E[i]=g,Fne({global:!0,constructor:!0,forced:W,sham:!qS},E),PS in g||E0(g,PS,n),PS in b||E0(b,PS,n),Aet(i)}):fk.exports=function(){}});var nie=T(()=>{"use strict";var Net=Eu();Net("Float32",function(e){return function(r,n,i){return e(this,r,n,i)}})});var iie=T(()=>{"use strict";var Fet=Eu();Fet("Float64",function(e){return function(r,n,i){return e(this,r,n,i)}})});var aie=T(()=>{"use strict";var zet=Eu();zet("Int8",function(e){return function(r,n,i){return e(this,r,n,i)}})});var oie=T(()=>{"use strict";var jet=Eu();jet("Int16",function(e){return function(r,n,i){return e(this,r,n,i)}})});var sie=T(()=>{"use strict";var Bet=Eu();Bet("Int32",function(e){return function(r,n,i){return e(this,r,n,i)}})});var uie=T(()=>{"use strict";var Uet=Eu();Uet("Uint8",function(e){return function(r,n,i){return e(this,r,n,i)}})});var lie=T(()=>{"use strict";var Vet=Eu();Vet("Uint8",function(e){return function(r,n,i){return e(this,r,n,i)}},!0)});var cie=T(()=>{"use strict";var $et=Eu();$et("Uint16",function(e){return function(r,n,i){return e(this,r,n,i)}})});var hie=T(()=>{"use strict";var Get=Eu();Get("Uint32",function(e){return function(r,n,i){return e(this,r,n,i)}})});var dk=T(()=>{"use strict";var fie=zt(),Wet=Ht(),Zet=Gr(),Het=fie.aTypedArray,Ket=fie.exportTypedArrayMethod;Ket("at",function(t){var r=Het(this),n=Wet(r),i=Zet(t),a=i>=0?i:n+i;return a<0||a>=n?void 0:r[a]})});var die=T(()=>{"use strict";var Xet=Oe(),pie=zt(),Yet=HO(),Jet=Xet(Yet),Qet=pie.aTypedArray,ett=pie.exportTypedArrayMethod;ett("copyWithin",function(t,r){return Jet(Qet(this),t,r,arguments.length>2?arguments[2]:void 0)})});var vie=T(()=>{"use strict";var mie=zt(),ttt=qn().every,rtt=mie.aTypedArray,ntt=mie.exportTypedArrayMethod;ntt("every",function(t){return ttt(rtt(this),t,arguments.length>1?arguments[1]:void 0)})});var yie=T(()=>{"use strict";var gie=zt(),itt=wE(),att=b0(),ott=Xa(),stt=Ye(),utt=Oe(),ltt=Fe(),ctt=gie.aTypedArray,htt=gie.exportTypedArrayMethod,ftt=utt("".slice),ptt=ltt(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});htt("fill",function(t){var r=arguments.length;ctt(this);var n=ftt(ott(this),0,3)==="Big"?att(t):+t;return stt(itt,this,n,r>1?arguments[1]:void 0,r>2?arguments[2]:void 0)},ptt)});var Hm=T((U$t,xie)=>{"use strict";var _ie=zt(),dtt=Jf(),mtt=_ie.aTypedArrayConstructor,vtt=_ie.getTypedArrayConstructor;xie.exports=function(e){return mtt(dtt(e,vtt(e)))}});var OS=T((V$t,wie)=>{"use strict";var gtt=Xf(),ytt=Hm();wie.exports=function(e,t){return gtt(ytt(e),t)}});var Eie=T(()=>{"use strict";var bie=zt(),_tt=qn().filter,xtt=OS(),wtt=bie.aTypedArray,btt=bie.exportTypedArrayMethod;btt("filter",function(t){var r=_tt(wtt(this),t,arguments.length>1?arguments[1]:void 0);return xtt(this,r)})});var Tie=T(()=>{"use strict";var Sie=zt(),Ett=qn().find,Stt=Sie.aTypedArray,Ttt=Sie.exportTypedArrayMethod;Ttt("find",function(t){return Ett(Stt(this),t,arguments.length>1?arguments[1]:void 0)})});var Cie=T(()=>{"use strict";var Iie=zt(),Itt=qn().findIndex,Ctt=Iie.aTypedArray,Att=Iie.exportTypedArrayMethod;Att("findIndex",function(t){return Itt(Ctt(this),t,arguments.length>1?arguments[1]:void 0)})});var mk=T(()=>{"use strict";var Aie=zt(),qtt=B_().findLast,Ptt=Aie.aTypedArray,Mtt=Aie.exportTypedArrayMethod;Mtt("findLast",function(t){return qtt(Ptt(this),t,arguments.length>1?arguments[1]:void 0)})});var vk=T(()=>{"use strict";var qie=zt(),Ott=B_().findLastIndex,Rtt=qie.aTypedArray,Dtt=qie.exportTypedArrayMethod;Dtt("findLastIndex",function(t){return Ott(Rtt(this),t,arguments.length>1?arguments[1]:void 0)})});var Mie=T(()=>{"use strict";var Pie=zt(),Ltt=qn().forEach,ktt=Pie.aTypedArray,Ntt=Pie.exportTypedArrayMethod;Ntt("forEach",function(t){Ltt(ktt(this),t,arguments.length>1?arguments[1]:void 0)})});var Oie=T(()=>{"use strict";var Ftt=IS(),ztt=zt().exportTypedArrayStaticMethod,jtt=ak();ztt("from",jtt,Ftt)});var Die=T(()=>{"use strict";var Rie=zt(),Btt=fm().includes,Utt=Rie.aTypedArray,Vtt=Rie.exportTypedArrayMethod;Vtt("includes",function(t){return Btt(Utt(this),t,arguments.length>1?arguments[1]:void 0)})});var kie=T(()=>{"use strict";var Lie=zt(),$tt=fm().indexOf,Gtt=Lie.aTypedArray,Wtt=Lie.exportTypedArrayMethod;Wtt("indexOf",function(t){return $tt(Gtt(this),t,arguments.length>1?arguments[1]:void 0)})});var Bie=T(()=>{"use strict";var Ztt=ot(),Htt=Fe(),gk=Oe(),Fie=zt(),yk=G_(),Ktt=yt(),_k=Ktt("iterator"),Nie=Ztt.Uint8Array,Xtt=gk(yk.values),Ytt=gk(yk.keys),Jtt=gk(yk.entries),xk=Fie.aTypedArray,RS=Fie.exportTypedArrayMethod,Km=Nie&&Nie.prototype,DS=!Htt(function(){Km[_k].call([1])}),zie=!!Km&&Km.values&&Km[_k]===Km.values&&Km.values.name==="values",jie=function(){return Xtt(xk(this))};RS("entries",function(){return Jtt(xk(this))},DS);RS("keys",function(){return Ytt(xk(this))},DS);RS("values",jie,DS||!zie,{name:"values"});RS(_k,jie,DS||!zie,{name:"values"})});var Vie=T(()=>{"use strict";var Uie=zt(),Qtt=Oe(),ert=Uie.aTypedArray,trt=Uie.exportTypedArrayMethod,rrt=Qtt([].join);trt("join",function(t){return rrt(ert(this),t)})});var Gie=T(()=>{"use strict";var $ie=zt(),nrt=ta(),irt=cR(),art=$ie.aTypedArray,ort=$ie.exportTypedArrayMethod;ort("lastIndexOf",function(t){var r=arguments.length;return nrt(irt,art(this),r>1?[t,arguments[1]]:[t])})});var Zie=T(()=>{"use strict";var Wie=zt(),srt=qn().map,urt=Hm(),lrt=Wie.aTypedArray,crt=Wie.exportTypedArrayMethod;crt("map",function(t){return srt(lrt(this),t,arguments.length>1?arguments[1]:void 0,function(r,n){return new(urt(r))(n)})})});var Kie=T(()=>{"use strict";var Hie=zt(),hrt=IS(),frt=Hie.aTypedArrayConstructor,prt=Hie.exportTypedArrayStaticMethod;prt("of",function(){for(var t=0,r=arguments.length,n=new(frt(this))(r);r>t;)n[t]=arguments[t++];return n},hrt)});var Yie=T(()=>{"use strict";var Xie=zt(),drt=W_().left,mrt=Xie.aTypedArray,vrt=Xie.exportTypedArrayMethod;vrt("reduce",function(t){var r=arguments.length;return drt(mrt(this),t,r,r>1?arguments[1]:void 0)})});var Qie=T(()=>{"use strict";var Jie=zt(),grt=W_().right,yrt=Jie.aTypedArray,_rt=Jie.exportTypedArrayMethod;_rt("reduceRight",function(t){var r=arguments.length;return grt(yrt(this),t,r,r>1?arguments[1]:void 0)})});var tae=T(()=>{"use strict";var eae=zt(),xrt=eae.aTypedArray,wrt=eae.exportTypedArrayMethod,brt=Math.floor;wrt("reverse",function(){for(var t=this,r=xrt(t).length,n=brt(r/2),i=0,a;i<n;)a=t[i],t[i++]=t[--r],t[r]=a;return t})});var sae=T(()=>{"use strict";var nae=ot(),iae=Ye(),Ek=zt(),Ert=Ht(),Srt=nk(),Trt=Vt(),aae=Fe(),Irt=nae.RangeError,wk=nae.Int8Array,rae=wk&&wk.prototype,oae=rae&&rae.set,Crt=Ek.aTypedArray,Art=Ek.exportTypedArrayMethod,bk=!aae(function(){var e=new Uint8ClampedArray(2);return iae(oae,e,{length:1,0:3},1),e[1]!==3}),qrt=bk&&Ek.NATIVE_ARRAY_BUFFER_VIEWS&&aae(function(){var e=new wk(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});Art("set",function(t){Crt(this);var r=Srt(arguments.length>1?arguments[1]:void 0,1),n=Trt(t);if(bk)return iae(oae,this,n,r);var i=this.length,a=Ert(n),h=0;if(a+r>i)throw new Irt("Wrong length");for(;h<a;)this[r+h]=n[h++]},!bk||qrt)});var lae=T(()=>{"use strict";var uae=zt(),Prt=Hm(),Mrt=Fe(),Ort=xl(),Rrt=uae.aTypedArray,Drt=uae.exportTypedArrayMethod,Lrt=Mrt(function(){new Int8Array(1).slice()});Drt("slice",function(t,r){for(var n=Ort(Rrt(this),t,r),i=Prt(this),a=0,h=n.length,p=new i(h);h>a;)p[a]=n[a++];return p},Lrt)});var hae=T(()=>{"use strict";var cae=zt(),krt=qn().some,Nrt=cae.aTypedArray,Frt=cae.exportTypedArrayMethod;Frt("some",function(t){return krt(Nrt(this),t,arguments.length>1?arguments[1]:void 0)})});var gae=T(()=>{"use strict";var zrt=ot(),jrt=yl(),Sk=Fe(),Brt=Tt(),Urt=AE(),vae=zt(),fae=pR(),Vrt=dR(),pae=mu(),dae=qE(),$rt=vae.aTypedArray,Grt=vae.exportTypedArrayMethod,I0=zrt.Uint16Array,Xm=I0&&jrt(I0.prototype.sort),Wrt=!!Xm&&!(Sk(function(){Xm(new I0(2),null)})&&Sk(function(){Xm(new I0(2),{})})),mae=!!Xm&&!Sk(function(){if(pae)return pae<74;if(fae)return fae<67;if(Vrt)return!0;if(dae)return dae<602;var e=new I0(516),t=Array(516),r,n;for(r=0;r<516;r++)n=r%4,e[r]=515-r,t[r]=r-2*n+3;for(Xm(e,function(i,a){return(i/4|0)-(a/4|0)}),r=0;r<516;r++)if(e[r]!==t[r])return!0}),Zrt=function(e){return function(t,r){return e!==void 0?+e(t,r)||0:r!==r?-1:t!==t?1:t===0&&r===0?1/t>0&&1/r<0?1:-1:t>r}};Grt("sort",function(t){return t!==void 0&&Brt(t),mae?Xm(this,t):Urt($rt(this),Zrt(t))},!mae||Wrt)});var xae=T(()=>{"use strict";var _ae=zt(),Hrt=Ka(),yae=ts(),Krt=Hm(),Xrt=_ae.aTypedArray,Yrt=_ae.exportTypedArrayMethod;Yrt("subarray",function(t,r){var n=Xrt(this),i=n.length,a=yae(t,i),h=Krt(n);return new h(n.buffer,n.byteOffset+a*n.BYTES_PER_ELEMENT,Hrt((r===void 0?i:yae(r,i))-a))})});var Tae=T(()=>{"use strict";var Jrt=ot(),Qrt=ta(),Eae=zt(),Tk=Fe(),wae=xl(),LS=Jrt.Int8Array,bae=Eae.aTypedArray,ent=Eae.exportTypedArrayMethod,Sae=[].toLocaleString,tnt=!!LS&&Tk(function(){Sae.call(new LS(1))}),rnt=Tk(function(){return[1,2].toLocaleString()!==new LS([1,2]).toLocaleString()})||!Tk(function(){LS.prototype.toLocaleString.call([1,2])});ent("toLocaleString",function(){return Qrt(Sae,tnt?wae(bae(this)):bae(this),wae(arguments))},rnt)});var Ck=T(()=>{"use strict";var nnt=gR(),Ik=zt(),int=Ik.aTypedArray,ant=Ik.exportTypedArrayMethod,ont=Ik.getTypedArrayConstructor;ant("toReversed",function(){return nnt(int(this),ont(this))})});var Ak=T(()=>{"use strict";var kS=zt(),snt=Oe(),unt=Tt(),lnt=Xf(),cnt=kS.aTypedArray,hnt=kS.getTypedArrayConstructor,fnt=kS.exportTypedArrayMethod,pnt=snt(kS.TypedArrayPrototype.sort);fnt("toSorted",function(t){t!==void 0&&unt(t);var r=cnt(this),n=lnt(hnt(r),r);return pnt(n,t)})});var Cae=T(()=>{"use strict";var dnt=zt().exportTypedArrayMethod,mnt=Fe(),vnt=ot(),gnt=Oe(),Iae=vnt.Uint8Array,ynt=Iae&&Iae.prototype||{},NS=[].toString,_nt=gnt([].join);mnt(function(){NS.call({})})&&(NS=function(){return _nt(this)});var xnt=ynt.toString!==NS;dnt("toString",NS,xnt)});var Pk=T(()=>{"use strict";var wnt=bR(),qk=zt(),bnt=CS(),Ent=Gr(),Snt=b0(),Tnt=qk.aTypedArray,Int=qk.getTypedArrayConstructor,Cnt=qk.exportTypedArrayMethod,Ant=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return e===8}}();Cnt("with",function(e,t){var r=Tnt(this),n=Ent(e),i=bnt(r)?Snt(t):+t;return wnt(r,Int(r),n,i)},!Ant)});var Oae=T(()=>{"use strict";var qnt=K(),Mk=Oe(),Pnt=At(),Aae=String.fromCharCode,qae=Mk("".charAt),Pae=Mk(/./.exec),Mae=Mk("".slice),Mnt=/^[\da-f]{2}$/i,Ont=/^[\da-f]{4}$/i;qnt({global:!0},{unescape:function(t){for(var r=Pnt(t),n="",i=r.length,a=0,h,p;a<i;){if(h=qae(r,a++),h==="%"){if(qae(r,a)==="u"){if(p=Mae(r,a+1,a+5),Pae(Ont,p)){n+=Aae(parseInt(p,16)),a+=5;continue}}else if(p=Mae(r,a,a+2),Pae(Mnt,p)){n+=Aae(parseInt(p,16)),a+=2;continue}}n+=h}return n}})});var Dk=T((WGt,Fae)=>{"use strict";var Rnt=Oe(),Rae=os(),FS=_h().getWeakData,Dnt=ra(),Lnt=Qe(),knt=Dn(),Ok=Pt(),Nnt=gn(),Lae=qn(),Dae=Ft(),kae=vr(),Fnt=kae.set,znt=kae.getterFor,jnt=Lae.find,Bnt=Lae.findIndex,Unt=Rnt([].splice),Vnt=0,zS=function(e){return e.frozen||(e.frozen=new Nae)},Nae=function(){this.entries=[]},Rk=function(e,t){return jnt(e.entries,function(r){return r[0]===t})};Nae.prototype={get:function(e){var t=Rk(this,e);if(t)return t[1]},has:function(e){return!!Rk(this,e)},set:function(e,t){var r=Rk(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=Bnt(this.entries,function(r){return r[0]===e});return~t&&Unt(this.entries,t,1),!!~t}};Fae.exports={getConstructor:function(e,t,r,n){var i=e(function(g,b){Dnt(g,a),Fnt(g,{type:t,id:Vnt++,frozen:void 0}),knt(b)||Nnt(b,g[n],{that:g,AS_ENTRIES:r})}),a=i.prototype,h=znt(t),p=function(g,b,E){var q=h(g),P=FS(Lnt(b),!0);return P===!0?zS(q).set(b,E):P[q.id]=E,g};return Rae(a,{delete:function(g){var b=h(this);if(!Ok(g))return!1;var E=FS(g);return E===!0?zS(b).delete(g):E&&Dae(E,b.id)&&delete E[b.id]},has:function(b){var E=h(this);if(!Ok(b))return!1;var q=FS(b);return q===!0?zS(E).has(b):q&&Dae(q,E.id)}}),Rae(a,r?{get:function(b){var E=h(this);if(Ok(b)){var q=FS(b);return q===!0?zS(E).get(b):q?q[E.id]:void 0}},set:function(b,E){return p(this,b,E)}}:{add:function(b){return p(this,b,!0)}}),i}}});var Hae=T(()=>{"use strict";var $nt=ql(),zae=ot(),VS=Oe(),jae=os(),Gnt=_h(),Wnt=J_(),Vae=Dk(),jS=Pt(),BS=vr().enforce,Znt=Fe(),Hnt=X2(),q0=Object,Knt=Array.isArray,US=q0.isExtensible,$ae=q0.isFrozen,Xnt=q0.isSealed,Gae=q0.freeze,Ynt=q0.seal,Bae={},Uae={},Jnt=!zae.ActiveXObject&&"ActiveXObject"in zae,C0,Wae=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Zae=Wnt("WeakMap",Wae,Vae),Ym=Zae.prototype,$S=VS(Ym.set),Qnt=function(){return $nt&&Znt(function(){var e=Gae([]);return $S(new Zae,e,1),!$ae(e)})};Hnt&&(Jnt?(C0=Vae.getConstructor(Wae,"WeakMap",!0),Gnt.enable(),Lk=VS(Ym.delete),A0=VS(Ym.has),kk=VS(Ym.get),jae(Ym,{delete:function(e){if(jS(e)&&!US(e)){var t=BS(this);return t.frozen||(t.frozen=new C0),Lk(this,e)||t.frozen.delete(e)}return Lk(this,e)},has:function(t){if(jS(t)&&!US(t)){var r=BS(this);return r.frozen||(r.frozen=new C0),A0(this,t)||r.frozen.has(t)}return A0(this,t)},get:function(t){if(jS(t)&&!US(t)){var r=BS(this);return r.frozen||(r.frozen=new C0),A0(this,t)?kk(this,t):r.frozen.get(t)}return kk(this,t)},set:function(t,r){if(jS(t)&&!US(t)){var n=BS(this);n.frozen||(n.frozen=new C0),A0(this,t)?$S(this,t,r):n.frozen.set(t,r)}else $S(this,t,r);return this}})):Qnt()&&jae(Ym,{set:function(t,r){var n;return Knt(t)&&($ae(t)?n=Bae:Xnt(t)&&(n=Uae)),$S(this,t,r),n===Bae&&Gae(t),n===Uae&&Ynt(t),this}}));var Lk,A0,kk});var GS=T(()=>{"use strict";Hae()});var Kae=T(()=>{"use strict";var eit=J_(),tit=Dk();eit("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},tit)});var Xae=T(()=>{"use strict";Kae()});var Yae=T(()=>{"use strict";UO()});var Qae=T(()=>{"use strict";var rit=K(),nit=ea(),iit=kn(),ZS=is(),ait=pm(),Jae=An(),WS=Ln(),Nk=Ha(),oit=pE(),sit=Wf(),uit=yt(),lit=uit("toStringTag"),HS=Error,Jm=function(t,r,n){var i=nit(Fk,this),a;return ZS?a=ZS(new HS,i?iit(this):Fk):(a=i?this:Jae(Fk),WS(a,lit,"Error")),n!==void 0&&WS(a,"message",sit(n)),oit(a,Jm,a.stack,1),WS(a,"error",t),WS(a,"suppressed",r),a};ZS?ZS(Jm,HS):ait(Jm,HS,{name:!0});var Fk=Jm.prototype=Jae(HS.prototype,{constructor:Nk(1,Jm),message:Nk(1,""),name:Nk(1,"SuppressedError")});rit({global:!0,constructor:!0,arity:3},{SuppressedError:Jm})});var Qm=T((a8t,soe)=>{"use strict";var ioe=ot(),aoe=E_(),ooe=qt(),cit=An(),KS=kn(),hit=br(),fit=yt(),pit=Ut(),eoe="USE_FUNCTION_CONSTRUCTOR",toe=fit("asyncIterator"),roe=ioe.AsyncIterator,noe=aoe.AsyncIteratorPrototype,Su,zk;if(noe)Su=noe;else if(ooe(roe))Su=roe.prototype;else if(aoe[eoe]||ioe[eoe])try{zk=KS(KS(KS(Function("return async function*(){}()")()))),KS(zk)===Object.prototype&&(Su=zk)}catch(e){}Su?pit&&(Su=cit(Su)):Su={};ooe(Su[toe])||hit(Su,toe,function(){return this});soe.exports=Su});var P0=T((o8t,voe)=>{"use strict";var uoe=Ye(),loe=Qe(),dit=An(),mit=Cn(),vit=os(),foe=vr(),git=St(),yit=Qm(),poe=Mi(),jk=git("Promise"),doe="AsyncFromSyncIterator",_it=foe.set,coe=foe.getterFor(doe),hoe=function(e,t,r){var n=e.done;jk.resolve(e.value).then(function(i){t(poe(i,n))},r)},moe=function(t){t.type=doe,_it(this,t)};moe.prototype=vit(dit(yit),{next:function(){var t=coe(this);return new jk(function(r,n){var i=loe(uoe(t.next,t.iterator));hoe(i,r,n)})},return:function(){var e=coe(this).iterator;return new jk(function(t,r){var n=mit(e,"return");if(n===void 0)return t(poe(void 0,!0));var i=loe(uoe(n,e));hoe(i,t,r)})}});voe.exports=moe});var tn=T((s8t,goe)=>{"use strict";goe.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var _oe=T((u8t,yoe)=>{"use strict";var xit=Ye(),wit=P0(),bit=Qe(),Eit=lh(),Sit=tn(),Tit=Cn(),Iit=yt(),Cit=Iit("asyncIterator");yoe.exports=function(e,t){var r=arguments.length<2?Tit(e,Cit):t;return r?bit(xit(r,e)):new wit(Sit(Eit(e)))}});var ev=T((l8t,xoe)=>{"use strict";var Ait=Ye(),qit=St(),Pit=Cn();xoe.exports=function(e,t,r,n){try{var i=Pit(e,"return");if(i)return qit("Promise").resolve(Ait(i,e)).then(function(){t(r)},function(a){n(a)})}catch(a){return n(a)}t(r)}});var lp=T((c8t,woe)=>{"use strict";var Mit=Ye(),Oit=Tt(),Bk=Qe(),Rit=Pt(),Dit=ch(),Lit=St(),kit=tn(),Uk=ev(),M0=function(e){var t=e===0,r=e===1,n=e===2,i=e===3;return function(a,h,p){Bk(a);var g=h!==void 0;(g||!t)&&Oit(h);var b=kit(a),E=Lit("Promise"),q=b.iterator,P=b.next,L=0;return new E(function(W,Q){var V=function(H){Uk(q,Q,H,Q)},$=function(){try{if(g)try{Dit(L)}catch(H){V(H)}E.resolve(Bk(Mit(P,q))).then(function(H){try{if(Bk(H).done)t?(p.length=L,W(p)):W(i?!1:n||void 0);else{var re=H.value;try{if(g){var se=h(re,L),Ie=function(qe){if(r)$();else if(n)qe?$():Uk(q,W,!1,Q);else if(t)try{p[L++]=qe,$()}catch(Ae){V(Ae)}else qe?Uk(q,W,i||re,Q):$()};Rit(se)?E.resolve(se).then(Ie,V):Ie(se)}else p[L++]=re,$()}catch(qe){V(qe)}}}catch(qe){Q(qe)}},Q)}catch(H){Q(H)}};$()})}};woe.exports={toArray:M0(0),forEach:M0(1),every:M0(2),some:M0(3),find:M0(4)}});var Vk=T((h8t,Toe)=>{"use strict";var Nit=Pr(),boe=Oe(),Fit=Vt(),zit=zs(),jit=_oe(),Bit=lh(),Uit=tn(),Vit=bl(),$it=Cn(),Git=_R(),Wit=St(),Zit=yt(),Hit=P0(),Kit=lp().toArray,Xit=Zit("asyncIterator"),Eoe=boe(Git("Array").values),Yit=boe(Eoe([]).next),Jit=function(){return new Soe(this)},Soe=function(e){this.iterator=Eoe(e)};Soe.prototype.next=function(){return Yit(this.iterator)};Toe.exports=function(t){var r=this,n=arguments.length,i=n>1?arguments[1]:void 0,a=n>2?arguments[2]:void 0;return new(Wit("Promise"))(function(h){var p=Fit(t);i!==void 0&&(i=Nit(i,a));var g=$it(p,Xit),b=g?void 0:Vit(p)||Jit,E=zit(r)?new r:[],q=g?jit(p,g):new Hit(Uit(Bit(p,b)));h(Kit(q,i,E))})}});var Ioe=T(()=>{"use strict";var Qit=K(),eat=Vk();Qit({target:"Array",stat:!0},{fromAsync:eat})});var Coe=T(()=>{"use strict";WO()});var Aoe=T(()=>{"use strict";var tat=K(),rat=qn().filterReject,nat=cn();tat({target:"Array",proto:!0,forced:!0},{filterOut:function(t){return rat(this,t,arguments.length>1?arguments[1]:void 0)}});nat("filterOut")});var qoe=T(()=>{"use strict";var iat=K(),aat=qn().filterReject,oat=cn();iat({target:"Array",proto:!0,forced:!0},{filterReject:function(t){return aat(this,t,arguments.length>1?arguments[1]:void 0)}});oat("filterReject")});var Poe=T(()=>{"use strict";YO()});var Moe=T(()=>{"use strict";JO()});var XS=T((S8t,Ooe)=>{"use strict";var sat=Pr(),uat=Oe(),lat=ml(),cat=Vt(),hat=ks(),fat=Ht(),pat=An(),dat=Xf(),mat=Array,vat=uat([].push);Ooe.exports=function(e,t,r,n){for(var i=cat(e),a=lat(i),h=sat(t,r),p=pat(null),g=fat(a),b=0,E,q,P;g>b;b++)P=a[b],q=hat(h(P,b,i)),q in p?vat(p[q],P):p[q]=[P];if(n&&(E=n(i),E!==mat))for(q in p)p[q]=dat(E,p[q]);return p}});var Roe=T(()=>{"use strict";var gat=K(),yat=XS(),_at=cn();gat({target:"Array",proto:!0},{group:function(t){var r=arguments.length>1?arguments[1]:void 0;return yat(this,t,r)}});_at("group")});var Doe=T(()=>{"use strict";var xat=K(),wat=XS(),bat=as(),Eat=cn();xat({target:"Array",proto:!0,forced:!bat("groupBy")},{groupBy:function(t){var r=arguments.length>1?arguments[1]:void 0;return wat(this,t,r)}});Eat("groupBy")});var Ia=T((q8t,Loe)=>{"use strict";var YS=Oe(),O0=Map.prototype;Loe.exports={Map,set:YS(O0.set),get:YS(O0.get),has:YS(O0.has),remove:YS(O0.delete),proto:O0}});var $k=T((P8t,koe)=>{"use strict";var Sat=Pr(),Tat=Oe(),Iat=ml(),Cat=Vt(),Aat=Ht(),JS=Ia(),qat=JS.Map,Pat=JS.get,Mat=JS.has,Oat=JS.set,Rat=Tat([].push);koe.exports=function(t){for(var r=Cat(this),n=Iat(r),i=Sat(t,arguments.length>1?arguments[1]:void 0),a=new qat,h=Aat(n),p=0,g,b;h>p;p++)b=n[p],g=i(b,p,r),Mat(a,g)?Rat(Pat(a,g),b):Oat(a,g,[b]);return a}});var Noe=T(()=>{"use strict";var Dat=K(),Lat=as(),kat=cn(),Nat=$k(),Fat=Ut();Dat({target:"Array",proto:!0,name:"groupToMap",forced:Fat||!Lat("groupByToMap")},{groupByToMap:Nat});kat("groupByToMap")});var Foe=T(()=>{"use strict";var zat=K(),jat=cn(),Bat=$k(),Uat=Ut();zat({target:"Array",proto:!0,forced:Uat},{groupToMap:Bat});jat("groupToMap")});var Boe=T(()=>{"use strict";var Vat=K(),$at=Fs(),zoe=Object.isFrozen,joe=function(e,t){if(!zoe||!$at(e)||!zoe(e))return!1;for(var r=0,n=e.length,i;r<n;)if(i=e[r++],!(typeof i=="string"||t&&i===void 0))return!1;return n!==0};Vat({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(t){if(!joe(t,!0))return!1;var r=t.raw;return r.length===t.length&&joe(r,!1)}})});var Uoe=T(()=>{"use strict";var Gat=gt(),Wat=cn(),Zat=Vt(),Hat=Ht(),Kat=en();Gat&&(Kat(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=Zat(this),r=Hat(t);return r===0?0:r-1}}),Wat("lastIndex"))});var Goe=T(()=>{"use strict";var Xat=gt(),Yat=cn(),Voe=Vt(),$oe=Ht(),Jat=en();Xat&&(Jat(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=Voe(this),r=$oe(t);return r===0?void 0:t[r-1]},set:function(t){var r=Voe(this),n=$oe(r);return r[n===0?0:n-1]=t}}),Yat("lastItem"))});var Woe=T(()=>{"use strict";yR()});var Zoe=T(()=>{"use strict";xR()});var Hoe=T(()=>{"use strict";wR()});var Ml=T((Z8t,Koe)=>{"use strict";var Qat=Ye();Koe.exports=function(e,t,r){for(var n=r?e:e.iterator,i=e.next,a,h;!(a=Qat(i,n)).done;)if(h=t(a.value),h!==void 0)return h}});var ls=T((H8t,ese)=>{"use strict";var Xoe=Oe(),eot=Ml(),Yoe=Ia(),tot=Yoe.Map,Joe=Yoe.proto,rot=Xoe(Joe.forEach),Qoe=Xoe(Joe.entries),not=Qoe(new tot).next;ese.exports=function(e,t,r){return r?eot({iterator:Qoe(e),next:not},function(n){return t(n[1],n[0])}):rot(e,t)}});var QS=T((K8t,tse)=>{"use strict";var iot=Oe(),aot=Tt(),oot=Dn(),sot=Ht(),uot=Vt(),Gk=Ia(),lot=ls(),cot=Gk.Map,hot=Gk.has,fot=Gk.set,pot=iot([].push);tse.exports=function(t){var r=uot(this),n=sot(r),i=[],a=new cot,h=oot(t)?function(E){return E}:aot(t),p,g,b;for(p=0;p<n;p++)g=r[p],b=h(g),hot(a,b)||fot(a,b,g);return lot(a,function(E){pot(i,E)}),i}});var rse=T(()=>{"use strict";var dot=K(),mot=cn(),vot=QS();dot({target:"Array",proto:!0,forced:!0},{uniqueBy:vot});mot("uniqueBy")});var nse=T(()=>{"use strict";ER()});var Wk=T((eWt,ise)=>{"use strict";var got=z_(),yot=Pi(),_ot=TypeError;ise.exports=got(ArrayBuffer.prototype,"byteLength","get")||function(e){if(yot(e)!=="ArrayBuffer")throw new _ot("ArrayBuffer expected");return e.byteLength}});var Zk=T((tWt,ase)=>{"use strict";var xot=Oe(),wot=Wk(),bot=xot(ArrayBuffer.prototype.slice);ase.exports=function(e){if(wot(e)!==0)return!1;try{return bot(e,0,0),!1}catch(t){return!0}}});var sse=T(()=>{"use strict";var Eot=gt(),Sot=en(),Tot=Zk(),ose=ArrayBuffer.prototype;Eot&&!("detached"in ose)&&Sot(ose,"detached",{configurable:!0,get:function(){return Tot(this)}})});var Hk=T((iWt,use)=>{"use strict";var Iot=yu();use.exports=function(e){try{if(Iot)return Function("return require(\""+e+"\")")()}catch(t){}}});var eT=T((aWt,cse)=>{"use strict";var Cot=ot(),Aot=Fe(),Kk=mu(),qot=HD(),Pot=aS(),Mot=yu(),lse=Cot.structuredClone;cse.exports=!!lse&&!Aot(function(){if(Pot&&Kk>92||Mot&&Kk>94||qot&&Kk>97)return!1;var e=new ArrayBuffer(8),t=lse(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var dse=T((oWt,pse)=>{"use strict";var Qk=ot(),Oot=Hk(),Rot=eT(),Dot=Qk.structuredClone,hse=Qk.ArrayBuffer,tT=Qk.MessageChannel,Jk=!1,Xk,fse,rT,Yk;if(Rot)Jk=function(e){Dot(e,{transfer:[e]})};else if(hse)try{tT||(Xk=Oot("worker_threads"),Xk&&(tT=Xk.MessageChannel)),tT&&(fse=new tT,rT=new hse(2),Yk=function(e){fse.port1.postMessage(null,[e])},rT.byteLength===2&&(Yk(rT),rT.byteLength===0&&(Jk=Yk)))}catch(e){}pse.exports=Jk});var iT=T((sWt,wse)=>{"use strict";var nT=ot(),rN=Oe(),yse=z_(),Lot=xm(),kot=Zk(),Not=Wk(),mse=dse(),eN=eT(),Fot=nT.structuredClone,_se=nT.ArrayBuffer,tN=nT.DataView,zot=nT.TypeError,jot=Math.min,nN=_se.prototype,xse=tN.prototype,Bot=rN(nN.slice),vse=yse(nN,"resizable","get"),gse=yse(nN,"maxByteLength","get"),Uot=rN(xse.getInt8),Vot=rN(xse.setInt8);wse.exports=(eN||mse)&&function(e,t,r){var n=Not(e),i=t===void 0?n:Lot(t),a=!vse||!vse(e),h;if(kot(e))throw new zot("ArrayBuffer is detached");if(eN&&(e=Fot(e,{transfer:[e]}),n===i&&(r||a)))return e;if(n>=i&&(!r||a))h=Bot(e,0,i);else{var p=r&&!a&&gse?{maxByteLength:gse(e)}:void 0;h=new _se(i,p);for(var g=new tN(e),b=new tN(h),E=jot(i,n),q=0;q<E;q++)Vot(b,q,Uot(g,q))}return eN||mse(e),h}});var Ese=T(()=>{"use strict";var $ot=K(),bse=iT();bse&&$ot({target:"ArrayBuffer",proto:!0},{transfer:function(){return bse(this,arguments.length?arguments[0]:void 0,!0)}})});var Tse=T(()=>{"use strict";var Got=K(),Sse=iT();Sse&&Got({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return Sse(this,arguments.length?arguments[0]:void 0,!1)}})});var aN=T((fWt,Pse)=>{"use strict";var Wot=Ye(),Zot=Oe(),Hot=Pr(),Kot=Qe(),Xot=Tt(),Ase=Dn(),iN=Cn(),qse=yt(),Yot=qse("asyncDispose"),Ise=qse("dispose"),Jot=Zot([].push),Qot=function(e,t){if(t==="async-dispose"){var r=iN(e,Yot);return r!==void 0?r:(r=iN(e,Ise),function(){Wot(r,this)})}return iN(e,Ise)},Cse=function(e,t,r){return arguments.length<3&&!Ase(e)&&(r=Xot(Qot(Kot(e),t))),r===void 0?function(){}:Hot(r,e)};Pse.exports=function(e,t,r,n){var i;if(arguments.length<4){if(Ase(t)&&r==="sync-dispose")return;i=Cse(t,r)}else i=Cse(void 0,r,n);Jot(e.stack,i)}});var Nse=T(()=>{"use strict";var est=K(),oT=gt(),Rse=St(),Mse=Tt(),tst=ra(),Dse=br(),rst=os(),nst=en(),Lse=yt(),kse=vr(),oN=aN(),Ose=Rse("Promise"),ist=Rse("SuppressedError"),ast=ReferenceError,ost=Lse("asyncDispose"),sst=Lse("toStringTag"),uT="AsyncDisposableStack",ust=kse.set,sT=kse.getterFor(uT),sN="async-dispose",R0="disposed",lst="pending",aT=function(e){var t=sT(e);if(t.state===R0)throw new ast(uT+" already disposed");return t},uN=function(){ust(tst(this,tv),{type:uT,state:lst,stack:[]}),oT||(this.disposed=!1)},tv=uN.prototype;rst(tv,{disposeAsync:function(){var t=this;return new Ose(function(r,n){var i=sT(t);if(i.state===R0)return r(void 0);i.state=R0,oT||(t.disposed=!0);var a=i.stack,h=a.length,p=!1,g,b=function(q){p?g=new ist(q,g):(p=!0,g=q),E()},E=function(){if(h){var q=a[--h];a[h]=null;try{Ose.resolve(q()).then(E,b)}catch(P){b(P)}}else i.stack=null,p?n(g):r(void 0)};E()})},use:function(t){return oN(aT(this),t,sN),t},adopt:function(t,r){var n=aT(this);return Mse(r),oN(n,void 0,sN,function(){return r(t)}),t},defer:function(t){var r=aT(this);Mse(t),oN(r,void 0,sN,t)},move:function(){var t=aT(this),r=new uN;return sT(r).stack=t.stack,t.stack=[],t.state=R0,oT||(this.disposed=!0),r}});oT&&nst(tv,"disposed",{configurable:!0,get:function(){return sT(this).state===R0}});Dse(tv,ost,tv.disposeAsync,{name:"disposeAsync"});Dse(tv,sst,uT,{nonWritable:!0});est({global:!0,constructor:!0},{AsyncDisposableStack:uN})});var Use=T(()=>{"use strict";var cst=K(),hst=ra(),fst=kn(),zse=Ln(),jse=Ft(),pst=yt(),Sh=Qm(),Bse=Ut(),Fse=pst("toStringTag"),dst=TypeError,lN=function(){if(hst(this,Sh),fst(this)===Sh)throw new dst("Abstract class AsyncIterator not directly constructable")};lN.prototype=Sh;jse(Sh,Fse)||zse(Sh,Fse,"AsyncIterator");(Bse||!jse(Sh,"constructor")||Sh.constructor===Object)&&zse(Sh,"constructor",lN);cst({global:!0,constructor:!0,forced:Bse},{AsyncIterator:lN})});var cp=T((gWt,Xse)=>{"use strict";var mst=Ye(),lT=xh(),Vse=Qe(),vst=An(),gst=Ln(),yst=os(),_st=yt(),Gse=vr(),xst=St(),wst=Cn(),bst=Qm(),cN=Mi(),$se=El(),Tu=xst("Promise"),Est=_st("toStringTag"),Wse="AsyncIteratorHelper",Zse="WrapForValidAsyncIterator",Sst=Gse.set,Hse=function(e){var t=!e,r=Gse.getterFor(e?Zse:Wse),n=function(i){var a=lT(function(){return r(i)}),h=a.error,p=a.value;return h||t&&p.done?{exit:!0,value:h?Tu.reject(p):Tu.resolve(cN(void 0,!0))}:{exit:!1,value:p}};return yst(vst(bst),{next:function(){var a=n(this),h=a.value;if(a.exit)return h;var p=lT(function(){return Vse(h.nextHandler(Tu))}),g=p.error,b=p.value;return g&&(h.done=!0),g?Tu.reject(b):Tu.resolve(b)},return:function(){var i=n(this),a=i.value;if(i.exit)return a;a.done=!0;var h=a.iterator,p,g,b=lT(function(){if(a.inner)try{$se(a.inner.iterator,"normal")}catch(E){return $se(h,"throw",E)}return wst(h,"return")});return p=g=b.value,b.error?Tu.reject(g):p===void 0?Tu.resolve(cN(void 0,!0)):(b=lT(function(){return mst(p,h)}),g=b.value,b.error?Tu.reject(g):e?Tu.resolve(g):Tu.resolve(g).then(function(E){return Vse(E),cN(void 0,!0)}))}})},Tst=Hse(!0),Kse=Hse(!1);gst(Kse,Est,"Async Iterator Helper");Xse.exports=function(e,t){var r=function(i,a){a?(a.iterator=i.iterator,a.next=i.next):a=i,a.type=t?Zse:Wse,a.nextHandler=e,a.counter=0,a.done=!1,Sst(this,a)};return r.prototype=t?Tst:Kse,r}});var fN=T((yWt,Jse)=>{"use strict";var Ist=Ye(),Cst=Tt(),hN=Qe(),Ast=Pt(),qst=tn(),Pst=cp(),Yse=Mi(),Mst=ev(),Ost=Pst(function(e){var t=this,r=t.iterator,n=t.mapper;return new e(function(i,a){var h=function(g){t.done=!0,a(g)},p=function(g){Mst(r,h,g,h)};e.resolve(hN(Ist(t.next,r))).then(function(g){try{if(hN(g).done)t.done=!0,i(Yse(void 0,!0));else{var b=g.value;try{var E=n(b,t.counter++),q=function(P){i(Yse(P,!1))};Ast(E)?e.resolve(E).then(q,p):q(E)}catch(P){p(P)}}}catch(P){h(P)}},h)})});Jse.exports=function(t){return hN(this),Cst(t),new Ost(qst(this),{mapper:t})}});var pN=T((_Wt,Qse)=>{"use strict";var Rst=Ye(),Dst=fN(),Lst=function(e,t){return[t,e]};Qse.exports=function(){return Rst(Dst,this,Lst)}});var eue=T(()=>{"use strict";var kst=K(),Nst=pN();kst({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:Nst})});var iue=T(()=>{"use strict";var Fst=Ye(),zst=br(),jst=St(),Bst=Cn(),Ust=Ft(),Vst=yt(),tue=Qm(),rue=Vst("asyncDispose"),nue=jst("Promise");Ust(tue,rue)||zst(tue,rue,function(){var e=this;return new nue(function(t,r){var n=Bst(e,"return");n?nue.resolve(Fst(n,e)).then(function(){t(void 0)},r):t(void 0)})})});var D0=T((SWt,aue)=>{"use strict";var $st=RangeError;aue.exports=function(e){if(e===e)return e;throw new $st("NaN is not allowed")}});var sue=T(()=>{"use strict";var Gst=K(),Wst=Ye(),dN=Qe(),Zst=tn(),Hst=D0(),Kst=Wm(),Xst=cp(),oue=Mi(),Yst=Ut(),Jst=Xst(function(e){var t=this;return new e(function(r,n){var i=function(h){t.done=!0,n(h)},a=function(){try{e.resolve(dN(Wst(t.next,t.iterator))).then(function(h){try{dN(h).done?(t.done=!0,r(oue(void 0,!0))):t.remaining?(t.remaining--,a()):r(oue(h.value,!1))}catch(p){i(p)}},i)}catch(h){i(h)}};a()})});Gst({target:"AsyncIterator",proto:!0,real:!0,forced:Yst},{drop:function(t){dN(this);var r=Kst(Hst(+t));return new Jst(Zst(this),{remaining:r})}})});var uue=T(()=>{"use strict";var Qst=K(),eut=lp().every;Qst({target:"AsyncIterator",proto:!0,real:!0},{every:function(t){return eut(this,t)}})});var cue=T(()=>{"use strict";var tut=K(),rut=Ye(),nut=Tt(),mN=Qe(),iut=Pt(),aut=tn(),out=cp(),lue=Mi(),sut=ev(),uut=Ut(),lut=out(function(e){var t=this,r=t.iterator,n=t.predicate;return new e(function(i,a){var h=function(b){t.done=!0,a(b)},p=function(b){sut(r,h,b,h)},g=function(){try{e.resolve(mN(rut(t.next,r))).then(function(b){try{if(mN(b).done)t.done=!0,i(lue(void 0,!0));else{var E=b.value;try{var q=n(E,t.counter++),P=function(L){L?i(lue(E,!1)):g()};iut(q)?e.resolve(q).then(P,p):P(q)}catch(L){p(L)}}}catch(L){h(L)}},h)}catch(b){h(b)}};g()})});tut({target:"AsyncIterator",proto:!0,real:!0,forced:uut},{filter:function(t){return mN(this),nut(t),new lut(aut(this),{predicate:t})}})});var hue=T(()=>{"use strict";var cut=K(),hut=lp().find;cut({target:"AsyncIterator",proto:!0,real:!0},{find:function(t){return hut(this,t)}})});var vN=T((RWt,due)=>{"use strict";var fut=Ye(),put=qt(),fue=Qe(),pue=tn(),dut=bl(),mut=Cn(),vut=yt(),gut=P0(),yut=vut("asyncIterator");due.exports=function(t){var r=fue(t),n=!0,i=mut(r,yut),a;return put(i)||(i=dut(r),n=!1),i!==void 0?a=fut(i,r):(a=r,n=!0),fue(a),pue(n?a:new gut(pue(a)))}});var gue=T(()=>{"use strict";var _ut=K(),mue=Ye(),xut=Tt(),L0=Qe(),wut=Pt(),but=tn(),Eut=cp(),vue=Mi(),Sut=vN(),Tut=ev(),Iut=Ut(),Cut=Eut(function(e){var t=this,r=t.iterator,n=t.mapper;return new e(function(i,a){var h=function(E){t.done=!0,a(E)},p=function(E){Tut(r,h,E,h)},g=function(){try{e.resolve(L0(mue(t.next,r))).then(function(E){try{if(L0(E).done)t.done=!0,i(vue(void 0,!0));else{var q=E.value;try{var P=n(q,t.counter++),L=function(W){try{t.inner=Sut(W),b()}catch(Q){p(Q)}};wut(P)?e.resolve(P).then(L,p):L(P)}catch(W){p(W)}}}catch(W){h(W)}},h)}catch(E){h(E)}},b=function(){var E=t.inner;if(E)try{e.resolve(L0(mue(E.next,E.iterator))).then(function(q){try{L0(q).done?(t.inner=null,g()):i(vue(q.value,!1))}catch(P){p(P)}},p)}catch(q){p(q)}else g()};b()})});_ut({target:"AsyncIterator",proto:!0,real:!0,forced:Iut},{flatMap:function(t){return L0(this),xut(t),new Cut(but(this),{mapper:t,inner:null})}})});var yue=T(()=>{"use strict";var Aut=K(),qut=lp().forEach;Aut({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(t){return qut(this,t)}})});var gN=T((FWt,_ue)=>{"use strict";var Put=Ye(),Mut=cp();_ue.exports=Mut(function(){return Put(this.next,this.iterator)},!0)});var xue=T(()=>{"use strict";var Out=K(),Rut=Vt(),Dut=ea(),Lut=vN(),kut=Qm(),Nut=gN(),Fut=Ut();Out({target:"AsyncIterator",stat:!0,forced:Fut},{from:function(t){var r=Lut(typeof t=="string"?Rut(t):t);return Dut(kut,r.iterator)?r.iterator:new Nut(r)}})});var wue=T(()=>{"use strict";var zut=K(),jut=pN();zut({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:jut})});var bue=T(()=>{"use strict";var But=K(),Uut=fN(),Vut=Ut();But({target:"AsyncIterator",proto:!0,real:!0,forced:Vut},{map:Uut})});var Eue=T(()=>{"use strict";var $ut=K(),Gut=Ye(),Wut=Tt(),yN=Qe(),Zut=Pt(),Hut=St(),Kut=tn(),Xut=ev(),_N=Hut("Promise"),Yut=TypeError;$ut({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(t){yN(this),Wut(t);var r=Kut(this),n=r.iterator,i=r.next,a=arguments.length<2,h=a?void 0:arguments[1],p=0;return new _N(function(g,b){var E=function(P){Xut(n,b,P,b)},q=function(){try{_N.resolve(yN(Gut(i,n))).then(function(P){try{if(yN(P).done)a?b(new Yut("Reduce of empty iterator with no initial value")):g(h);else{var L=P.value;if(a)a=!1,h=L,q();else try{var W=t(h,L,p),Q=function(V){h=V,q()};Zut(W)?_N.resolve(W).then(Q,E):Q(W)}catch(V){E(V)}}p++}catch(V){b(V)}},b)}catch(P){b(P)}};q()})}})});var Sue=T(()=>{"use strict";var Jut=K(),Qut=lp().some;Jut({target:"AsyncIterator",proto:!0,real:!0},{some:function(t){return Qut(this,t)}})});var Cue=T(()=>{"use strict";var elt=K(),Tue=Ye(),Iue=Qe(),tlt=tn(),rlt=D0(),nlt=Wm(),ilt=cp(),xN=Mi(),alt=Ut(),olt=ilt(function(e){var t=this,r=t.iterator,n;if(!t.remaining--){var i=xN(void 0,!0);return t.done=!0,n=r.return,n!==void 0?e.resolve(Tue(n,r,void 0)).then(function(){return i}):i}return e.resolve(Tue(t.next,r)).then(function(a){return Iue(a).done?(t.done=!0,xN(void 0,!0)):xN(a.value,!1)}).then(null,function(a){throw t.done=!0,a})});elt({target:"AsyncIterator",proto:!0,real:!0,forced:alt},{take:function(t){Iue(this);var r=nlt(rlt(+t));return new olt(tlt(this),{remaining:r})}})});var Aue=T(()=>{"use strict";var slt=K(),ult=lp().toArray;slt({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return ult(this,void 0,[])}})});var hT=T((QWt,Due)=>{"use strict";var Pue=vr(),llt=hh(),wN=Mi(),clt=Dn(),hlt=Pt(),flt=en(),Mue=gt(),k0="Incorrect Iterator.range arguments",EN="NumericRangeIterator",plt=Pue.set,Oue=Pue.getterFor(EN),que=RangeError,bN=TypeError,Rue=llt(function(t,r,n,i,a,h){if(typeof t!=i||r!==1/0&&r!==-1/0&&typeof r!=i)throw new bN(k0);if(t===1/0||t===-1/0)throw new que(k0);var p=r>t,g=!1,b;if(n===void 0)b=void 0;else if(hlt(n))b=n.step,g=!!n.inclusive;else if(typeof n==i)b=n;else throw new bN(k0);if(clt(b)&&(b=p?h:-h),typeof b!=i)throw new bN(k0);if(b===1/0||b===-1/0||b===a&&t!==r)throw new que(k0);var E=t!==t||r!==r||b!==b||r>t!=b>a;plt(this,{type:EN,start:t,end:r,step:b,inclusive:g,hitsEnd:E,currentCount:a,zero:a}),Mue||(this.start=t,this.end=r,this.step=b,this.inclusive=g)},EN,function(){var t=Oue(this);if(t.hitsEnd)return wN(void 0,!0);var r=t.start,n=t.end,i=t.step,a=r+i*t.currentCount++;a===n&&(t.hitsEnd=!0);var h=t.inclusive,p;return n>r?p=h?a>n:a>=n:p=h?n>a:n>=a,p?(t.hitsEnd=!0,wN(void 0,!0)):wN(a,!1)}),cT=function(e){flt(Rue.prototype,e,{get:function(){return Oue(this)[e]},set:function(){},configurable:!0,enumerable:!1})};Mue&&(cT("start"),cT("end"),cT("inclusive"),cT("step"));Due.exports=Rue});var Lue=T(()=>{"use strict";var dlt=K(),mlt=hT();typeof BigInt=="function"&&dlt({target:"BigInt",stat:!0,forced:!0},{range:function(t,r,n){return new mlt(t,r,n,"bigint",BigInt(0),BigInt(1))}})});var SN=T((rZt,zue)=>{"use strict";XE();GS();var Fue=St(),vlt=An(),kue=Pt(),glt=Object,ylt=TypeError,_lt=Fue("Map"),xlt=Fue("WeakMap"),fT=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=vlt(null)};fT.prototype.get=function(e,t){return this[e]||(this[e]=t())};fT.prototype.next=function(e,t,r){var n=r?this.objectsByIndex[e]||(this.objectsByIndex[e]=new xlt):this.primitives||(this.primitives=new _lt),i=n.get(t);return i||n.set(t,i=new fT),i};var Nue=new fT;zue.exports=function(){var e=Nue,t=arguments.length,r,n;for(r=0;r<t;r++)kue(n=arguments[r])&&(e=e.next(r,n,!0));if(this===glt&&e===Nue)throw new ylt("Composite keys must contain a non-primitive component");for(r=0;r<t;r++)kue(n=arguments[r])||(e=e.next(r,n,!1));return e}});var Bue=T(()=>{"use strict";var wlt=K(),blt=ta(),Elt=SN(),Slt=St(),jue=An(),Tlt=Object,Ilt=function(){var e=Slt("Object","freeze");return e?e(jue(null)):jue(null)};wlt({global:!0,forced:!0},{compositeKey:function(){return blt(Elt,Tlt,arguments).get("object",Ilt)}})});var Vue=T(()=>{"use strict";var Clt=K(),Alt=SN(),Uue=St(),qlt=ta();Clt({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?Uue("Symbol").for(arguments[0]):qlt(Alt,null,arguments).get("symbol",Uue("Symbol"))}})});var $ue=T(()=>{"use strict";var Plt=K(),Mlt=Oe(),Olt=RE().unpack,Rlt=Mlt(DataView.prototype.getUint16);Plt({target:"DataView",proto:!0},{getFloat16:function(t){var r=Rlt(this,t,arguments.length>1?arguments[1]:!1);return Olt([r&255,r>>8&255],10)}})});var Gue=T(()=>{"use strict";var Dlt=K(),Llt=Oe(),klt=Llt(DataView.prototype.getUint8);Dlt({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(t){return klt(this,t)}})});var TN=T((hZt,Wue)=>{"use strict";var Nlt=SR(),Flt=.0009765625,zlt=65504,jlt=6103515625e-14;Wue.exports=Math.f16round||function(t){return Nlt(t,Flt,zlt,jlt)}});var Zue=T(()=>{"use strict";var Blt=K(),Ult=Oe(),Vlt=Xa(),$lt=xm(),Glt=RE().pack,Wlt=TN(),Zlt=TypeError,Hlt=Ult(DataView.prototype.setUint16);Blt({target:"DataView",proto:!0},{setFloat16:function(t,r){if(Vlt(this)!=="DataView")throw new Zlt("Incorrect receiver");var n=$lt(t),i=Glt(Wlt(r),10,2);return Hlt(this,n,i[1]<<8|i[0],arguments.length>2?arguments[2]:!1)}})});var Hue=T(()=>{"use strict";var Klt=K(),Xlt=Oe(),Ylt=Xa(),Jlt=xm(),Qlt=ik(),ect=TypeError,tct=Xlt(DataView.prototype.setUint8);Klt({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(t,r){if(Ylt(this)!=="DataView")throw new ect("Incorrect receiver");var n=Jlt(t);return tct(this,n,Qlt(r))}})});var Que=T(()=>{"use strict";var rct=K(),dT=gt(),nct=St(),Kue=Tt(),ict=ra(),Xue=br(),act=os(),oct=en(),Yue=yt(),Jue=vr(),IN=aN(),sct=nct("SuppressedError"),uct=ReferenceError,lct=Yue("dispose"),cct=Yue("toStringTag"),vT="DisposableStack",hct=Jue.set,mT=Jue.getterFor(vT),CN="sync-dispose",N0="disposed",fct="pending",pT=function(e){var t=mT(e);if(t.state===N0)throw new uct(vT+" already disposed");return t},AN=function(){hct(ict(this,rv),{type:vT,state:fct,stack:[]}),dT||(this.disposed=!1)},rv=AN.prototype;act(rv,{dispose:function(){var t=mT(this);if(t.state!==N0){t.state=N0,dT||(this.disposed=!0);for(var r=t.stack,n=r.length,i=!1,a;n;){var h=r[--n];r[n]=null;try{h()}catch(p){i?a=new sct(p,a):(i=!0,a=p)}}if(t.stack=null,i)throw a}},use:function(t){return IN(pT(this),t,CN),t},adopt:function(t,r){var n=pT(this);return Kue(r),IN(n,void 0,CN,function(){r(t)}),t},defer:function(t){var r=pT(this);Kue(t),IN(r,void 0,CN,t)},move:function(){var t=pT(this),r=new AN;return mT(r).stack=t.stack,t.stack=[],t.state=N0,dT||(this.disposed=!0),r}});dT&&oct(rv,"disposed",{configurable:!0,get:function(){return mT(this).state===N0}});Xue(rv,lct,rv.dispose,{name:"dispose"});Xue(rv,cct,vT,{nonWritable:!0});rct({global:!0,constructor:!0},{DisposableStack:AN})});var qN=T((yZt,ele)=>{"use strict";var pct=Oe(),dct=Tt();ele.exports=function(){return pct(dct(this))}});var tle=T(()=>{"use strict";var mct=K(),vct=qN();mct({target:"Function",proto:!0,forced:!0},{demethodize:vct})});var nle=T(()=>{"use strict";var gct=K(),yct=Oe(),_ct=qt(),xct=I_(),wct=Ft(),bct=gt(),Ect=Object.getOwnPropertyDescriptor,rle=/^\s*class\b/,Sct=yct(rle.exec),Tct=function(e){try{if(!bct||!Sct(rle,xct(e)))return!1}catch(r){}var t=Ect(e,"prototype");return!!t&&wct(t,"writable")&&!t.writable};gct({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(t){return _ct(t)&&!Tct(t)}})});var ile=T(()=>{"use strict";var Ict=K(),Cct=zs();Ict({target:"Function",stat:!0,forced:!0},{isConstructor:Cct})});var sle=T(()=>{"use strict";var Act=yt(),qct=Fr().f,ale=Act("metadata"),ole=Function.prototype;ole[ale]===void 0&&qct(ole,ale,{value:null})});var ule=T(()=>{"use strict";var Pct=K(),Mct=qN();Pct({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:Mct})});var lle=T(()=>{"use strict";XR()});var dle=T(()=>{"use strict";var Oct=K(),Rct=ot(),Dct=ra(),Lct=qt(),kct=kn(),hle=Ln(),Nct=Fe(),fle=Ft(),Fct=yt(),Ol=Kf().IteratorPrototype,zct=Ut(),cle=Fct("toStringTag"),jct=TypeError,PN=Rct.Iterator,ple=zct||!Lct(PN)||PN.prototype!==Ol||!Nct(function(){PN({})}),MN=function(){if(Dct(this,Ol),kct(this)===Ol)throw new jct("Abstract class Iterator not directly constructable")};fle(Ol,cle)||hle(Ol,cle,"Iterator");(ple||!fle(Ol,"constructor")||Ol.constructor===Object)&&hle(Ol,"constructor",MN);MN.prototype=Ol;Oct({global:!0,constructor:!0,forced:ple},{Iterator:MN})});var hp=T((RZt,xle)=>{"use strict";var Bct=Ye(),Uct=An(),Vct=Ln(),$ct=os(),Gct=yt(),mle=vr(),Wct=Cn(),Zct=Kf().IteratorPrototype,ON=Mi(),RN=El(),Hct=Gct("toStringTag"),vle="IteratorHelper",gle="WrapForValidIterator",Kct=mle.set,yle=function(e){var t=mle.getterFor(e?gle:vle);return $ct(Uct(Zct),{next:function(){var n=t(this);if(e)return n.nextHandler();try{var i=n.done?void 0:n.nextHandler();return ON(i,n.done)}catch(a){throw n.done=!0,a}},return:function(){var r=t(this),n=r.iterator;if(r.done=!0,e){var i=Wct(n,"return");return i?Bct(i,n):ON(void 0,!0)}if(r.inner)try{RN(r.inner.iterator,"normal")}catch(a){return RN(n,"throw",a)}return RN(n,"normal"),ON(void 0,!0)}})},Xct=yle(!0),_le=yle(!1);Vct(_le,Hct,"Iterator Helper");xle.exports=function(e,t){var r=function(i,a){a?(a.iterator=i.iterator,a.next=i.next):a=i,a.type=t?gle:vle,a.nextHandler=e,a.counter=0,a.done=!1,Kct(this,a)};return r.prototype=t?Xct:_le,r}});var DN=T((DZt,ble)=>{"use strict";var Yct=Ye(),Jct=Tt(),wle=Qe(),Qct=tn(),eht=hp(),tht=bE(),rht=eht(function(){var e=this.iterator,t=wle(Yct(this.next,e)),r=this.done=!!t.done;if(!r)return tht(e,this.mapper,[t.value,this.counter++],!0)});ble.exports=function(t){return wle(this),Jct(t),new rht(Qct(this),{mapper:t})}});var LN=T((LZt,Ele)=>{"use strict";var nht=Ye(),iht=DN(),aht=function(e,t){return[t,e]};Ele.exports=function(){return nht(iht,this,aht)}});var Sle=T(()=>{"use strict";var oht=K(),sht=LN();oht({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:sht})});var Cle=T(()=>{"use strict";var uht=Ye(),lht=br(),cht=Cn(),hht=Ft(),fht=yt(),Tle=Kf().IteratorPrototype,Ile=fht("dispose");hht(Tle,Ile)||lht(Tle,Ile,function(){var e=cht(this,"return");e&&uht(e,this)})});var qle=T(()=>{"use strict";var pht=K(),Ale=Ye(),kN=Qe(),dht=tn(),mht=D0(),vht=Wm(),ght=hp(),yht=Ut(),_ht=ght(function(){for(var e=this.iterator,t=this.next,r,n;this.remaining;)if(this.remaining--,r=kN(Ale(t,e)),n=this.done=!!r.done,n)return;if(r=kN(Ale(t,e)),n=this.done=!!r.done,!n)return r.value});pht({target:"Iterator",proto:!0,real:!0,forced:yht},{drop:function(t){kN(this);var r=vht(mht(+t));return new _ht(dht(this),{remaining:r})}})});var Ple=T(()=>{"use strict";var xht=K(),wht=gn(),bht=Tt(),Eht=Qe(),Sht=tn();xht({target:"Iterator",proto:!0,real:!0},{every:function(t){Eht(this),bht(t);var r=Sht(this),n=0;return!wht(r,function(i,a){if(!t(i,n++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var Ole=T(()=>{"use strict";var Tht=K(),Iht=Ye(),Cht=Tt(),Mle=Qe(),Aht=tn(),qht=hp(),Pht=bE(),Mht=Ut(),Oht=qht(function(){for(var e=this.iterator,t=this.predicate,r=this.next,n,i,a;;){if(n=Mle(Iht(r,e)),i=this.done=!!n.done,i)return;if(a=n.value,Pht(e,t,[a,this.counter++],!0))return a}});Tht({target:"Iterator",proto:!0,real:!0,forced:Mht},{filter:function(t){return Mle(this),Cht(t),new Oht(Aht(this),{predicate:t})}})});var Rle=T(()=>{"use strict";var Rht=K(),Dht=gn(),Lht=Tt(),kht=Qe(),Nht=tn();Rht({target:"Iterator",proto:!0,real:!0},{find:function(t){kht(this),Lht(t);var r=Nht(this),n=0;return Dht(r,function(i,a){if(t(i,n++))return a(i)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var NN=T((HZt,Lle)=>{"use strict";var Fht=Ye(),Dle=Qe(),zht=tn(),jht=bl();Lle.exports=function(e,t){(!t||typeof e!="string")&&Dle(e);var r=jht(e);return zht(Dle(r!==void 0?Fht(r,e):e))}});var Fle=T(()=>{"use strict";var Bht=K(),kle=Ye(),Uht=Tt(),FN=Qe(),Vht=tn(),$ht=NN(),Ght=hp(),Nle=El(),Wht=Ut(),Zht=Ght(function(){for(var e=this.iterator,t=this.mapper,r,n;;){if(n=this.inner)try{if(r=FN(kle(n.next,n.iterator)),!r.done)return r.value;this.inner=null}catch(i){Nle(e,"throw",i)}if(r=FN(kle(this.next,e)),this.done=!!r.done)return;try{this.inner=$ht(t(r.value,this.counter++),!1)}catch(i){Nle(e,"throw",i)}}});Bht({target:"Iterator",proto:!0,real:!0,forced:Wht},{flatMap:function(t){return FN(this),Uht(t),new Zht(Vht(this),{mapper:t,inner:null})}})});var zle=T(()=>{"use strict";var Hht=K(),Kht=gn(),Xht=Tt(),Yht=Qe(),Jht=tn();Hht({target:"Iterator",proto:!0,real:!0},{forEach:function(t){Yht(this),Xht(t);var r=Jht(this),n=0;Kht(r,function(i){t(i,n++)},{IS_RECORD:!0})}})});var jle=T(()=>{"use strict";var Qht=K(),eft=Ye(),tft=Vt(),rft=ea(),nft=Kf().IteratorPrototype,ift=hp(),aft=NN(),oft=Ut(),sft=ift(function(){return eft(this.next,this.iterator)},!0);Qht({target:"Iterator",stat:!0,forced:oft},{from:function(t){var r=aft(typeof t=="string"?tft(t):t,!0);return rft(nft,r.iterator)?r.iterator:new sft(r)}})});var Ble=T(()=>{"use strict";var uft=K(),lft=LN();uft({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:lft})});var Ule=T(()=>{"use strict";var cft=K(),hft=DN(),fft=Ut();cft({target:"Iterator",proto:!0,real:!0,forced:fft},{map:hft})});var $le=T(()=>{"use strict";var pft=K(),Vle=hT(),dft=TypeError;pft({target:"Iterator",stat:!0,forced:!0},{range:function(t,r,n){if(typeof t=="number")return new Vle(t,r,n,"number",0,1);if(typeof t=="bigint")return new Vle(t,r,n,"bigint",BigInt(0),BigInt(1));throw new dft("Incorrect Iterator.range arguments")}})});var Gle=T(()=>{"use strict";var mft=K(),vft=gn(),gft=Tt(),yft=Qe(),_ft=tn(),xft=TypeError;mft({target:"Iterator",proto:!0,real:!0},{reduce:function(t){yft(this),gft(t);var r=_ft(this),n=arguments.length<2,i=n?void 0:arguments[1],a=0;if(vft(r,function(h){n?(n=!1,i=h):i=t(i,h,a),a++},{IS_RECORD:!0}),n)throw new xft("Reduce of empty iterator with no initial value");return i}})});var Wle=T(()=>{"use strict";var wft=K(),bft=gn(),Eft=Tt(),Sft=Qe(),Tft=tn();wft({target:"Iterator",proto:!0,real:!0},{some:function(t){Sft(this),Eft(t);var r=Tft(this),n=0;return bft(r,function(i,a){if(t(i,n++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var Hle=T(()=>{"use strict";var Ift=K(),Cft=Ye(),Zle=Qe(),Aft=tn(),qft=D0(),Pft=Wm(),Mft=hp(),Oft=El(),Rft=Ut(),Dft=Mft(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,Oft(e,"normal",void 0);var t=Zle(Cft(this.next,e)),r=this.done=!!t.done;if(!r)return t.value});Ift({target:"Iterator",proto:!0,real:!0,forced:Rft},{take:function(t){Zle(this);var r=Pft(qft(+t));return new Dft(Aft(this),{remaining:r})}})});var Kle=T(()=>{"use strict";var Lft=K(),kft=Qe(),Nft=gn(),Fft=tn(),zft=[].push;Lft({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return Nft(Fft(kft(this)),zft,{that:t,IS_RECORD:!0}),t}})});var Yle=T(()=>{"use strict";var jft=K(),Bft=Qe(),Uft=P0(),Vft=gN(),Xle=tn(),$ft=Ut();jft({target:"Iterator",proto:!0,real:!0,forced:$ft},{toAsync:function(){return new Vft(Xle(new Uft(Xle(Bft(this)))))}})});var zN=T((gHt,Jle)=>{"use strict";var Gft=Fe();Jle.exports=!Gft(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})});var jN=T((yHt,Qle)=>{"use strict";var Wft=Pt(),Zft=vr().get;Qle.exports=function(t){if(!Wft(t))return!1;var r=Zft(t);return!!r&&r.type==="RawJSON"}});var ece=T(()=>{"use strict";var Hft=K(),Kft=zN(),Xft=jN();Hft({target:"JSON",stat:!0,forced:!Kft},{isRawJSON:Xft})});var UN=T((wHt,ice)=>{"use strict";var BN=Oe(),Yft=Ft(),gT=SyntaxError,Jft=parseInt,Qft=String.fromCharCode,ept=BN("".charAt),tce=BN("".slice),rce=BN(/./.exec),nce={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},tpt=/^[\da-f]{4}$/i,rpt=/^[\u0000-\u001F]$/;ice.exports=function(e,t){for(var r=!0,n="";t<e.length;){var i=ept(e,t);if(i==="\\"){var a=tce(e,t,t+2);if(Yft(nce,a))n+=nce[a],t+=2;else if(a==="\\u"){t+=2;var h=tce(e,t,t+4);if(!rce(tpt,h))throw new gT("Bad Unicode escape at: "+t);n+=Qft(Jft(h,16)),t+=4}else throw new gT("Unknown escape sequence: \""+a+"\"")}else if(i==="\""){r=!1,t++;break}else{if(rce(rpt,i))throw new gT("Bad control character in string literal at: "+t);n+=i,t++}}if(r)throw new gT("Unterminated string at: "+t);return{value:n,end:t}}});var fce=T(()=>{"use strict";var npt=K(),ipt=gt(),XN=ot(),apt=St(),yT=Oe(),opt=Ye(),cce=qt(),spt=Pt(),upt=Fs(),lpt=Ft(),cpt=At(),ace=Ht(),ZN=rs(),hce=Fe(),hpt=UN(),fpt=ih(),oce=XN.JSON,ppt=XN.Number,nv=XN.SyntaxError,YN=oce&&oce.parse,dpt=apt("Object","keys"),mpt=Object.getOwnPropertyDescriptor,Oi=yT("".charAt),VN=yT("".slice),$N=yT(/./.exec),sce=yT([].push),GN=/^\d$/,vpt=/^[1-9]$/,gpt=/^(?:-|\d)$/,F0=/^[\t\n\r ]$/,WN=0,uce=1,ypt=function(e,t){e=cpt(e);var r=new KN(e,0,""),n=r.parse(),i=n.value,a=r.skip(F0,n.end);if(a<e.length)throw new nv("Unexpected extra character: \""+Oi(e,a)+"\" after the parsed data at: "+a);return cce(t)?HN({"":i},"",t,n):i},HN=function(e,t,r,n){var i=e[t],a=n&&i===n.value,h=a&&typeof n.source=="string"?{source:n.source}:{},p,g,b,E,q;if(spt(i)){var P=upt(i),L=a?n.nodes:P?[]:{};if(P)for(p=L.length,b=ace(i),E=0;E<b;E++)lce(i,E,HN(i,""+E,r,E<p?L[E]:void 0));else for(g=dpt(i),b=ace(g),E=0;E<b;E++)q=g[E],lce(i,q,HN(i,q,r,lpt(L,q)?L[q]:void 0))}return opt(r,e,t,i,h)},lce=function(e,t,r){if(ipt){var n=mpt(e,t);if(n&&!n.configurable)return}r===void 0?delete e[t]:ZN(e,t,r)},_pt=function(e,t,r,n){this.value=e,this.end=t,this.source=r,this.nodes=n},KN=function(e,t){this.source=e,this.index=t};KN.prototype={fork:function(e){return new KN(this.source,e)},parse:function(){var e=this.source,t=this.skip(F0,this.index),r=this.fork(t),n=Oi(e,t);if($N(gpt,n))return r.number();switch(n){case"{":return r.object();case"[":return r.array();case"\"":return r.string();case"t":return r.keyword(!0);case"f":return r.keyword(!1);case"n":return r.keyword(null);}throw new nv("Unexpected character: \""+n+"\" at: "+t)},node:function(e,t,r,n,i){return new _pt(t,n,e?null:VN(this.source,r,n),i)},object:function(){for(var e=this.source,t=this.index+1,r=!1,n={},i={};t<e.length;){if(t=this.until(["\"","}"],t),Oi(e,t)==="}"&&!r){t++;break}var a=this.fork(t).string(),h=a.value;t=a.end,t=this.until([":"],t)+1,t=this.skip(F0,t),a=this.fork(t).parse(),ZN(i,h,a),ZN(n,h,a.value),t=this.until([",","}"],a.end);var p=Oi(e,t);if(p===",")r=!0,t++;else if(p==="}"){t++;break}}return this.node(uce,n,this.index,t,i)},array:function(){for(var e=this.source,t=this.index+1,r=!1,n=[],i=[];t<e.length;){if(t=this.skip(F0,t),Oi(e,t)==="]"&&!r){t++;break}var a=this.fork(t).parse();if(sce(i,a),sce(n,a.value),t=this.until([",","]"],a.end),Oi(e,t)===",")r=!0,t++;else if(Oi(e,t)==="]"){t++;break}}return this.node(uce,n,this.index,t,i)},string:function(){var e=this.index,t=hpt(this.source,this.index+1);return this.node(WN,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,r=t;if(Oi(e,r)==="-"&&r++,Oi(e,r)==="0")r++;else if($N(vpt,Oi(e,r)))r=this.skip(GN,++r);else throw new nv("Failed to parse number at: "+r);if(Oi(e,r)==="."&&(r=this.skip(GN,++r)),Oi(e,r)==="e"||Oi(e,r)==="E"){r++,(Oi(e,r)==="+"||Oi(e,r)==="-")&&r++;var n=r;if(r=this.skip(GN,r),n===r)throw new nv("Failed to parse number's exponent value at: "+r)}return this.node(WN,ppt(VN(e,t,r)),t,r)},keyword:function(e){var t=""+e,r=this.index,n=r+t.length;if(VN(this.source,r,n)!==t)throw new nv("Failed to parse value at: "+r);return this.node(WN,e,r,n)},skip:function(e,t){for(var r=this.source;t<r.length&&$N(e,Oi(r,t));t++);return t},until:function(e,t){t=this.skip(F0,t);for(var r=Oi(this.source,t),n=0;n<e.length;n++)if(e[n]===r)return t;throw new nv("Unexpected character: \""+r+"\" at: "+t)}};var xpt=hce(function(){var e="9007199254740993",t;return YN(e,function(r,n,i){t=i.source}),t!==e}),wpt=fpt&&!hce(function(){return 1/YN("-0 \t")!==-1/0});npt({target:"JSON",stat:!0,forced:xpt},{parse:function(t,r){return wpt&&!cce(r)?YN(t):ypt(t,r)}})});var wce=T(()=>{"use strict";var _ce=K(),bpt=ql(),xce=zN(),_T=St(),Ept=Ye(),xT=Oe(),Spt=qt(),Tpt=jN(),Ipt=At(),Cpt=rs(),Apt=UN(),qpt=CO(),Ppt=oh(),Mpt=vr().set,Opt=String,pce=SyntaxError,Rpt=_T("JSON","parse"),dce=_T("JSON","stringify"),Dpt=_T("Object","create"),Lpt=_T("Object","freeze"),QN=xT("".charAt),JN=xT("".slice),mce=xT(/./.exec),kpt=xT([].push),eF=Ppt(),vce=eF.length,gce="Unacceptable as raw JSON",yce=/^[\t\n\r ]$/;_ce({target:"JSON",stat:!0,forced:!xce},{rawJSON:function(t){var r=Ipt(t);if(r===""||mce(yce,QN(r,0))||mce(yce,QN(r,r.length-1)))throw new pce(gce);var n=Rpt(r);if(typeof n=="object"&&n!==null)throw new pce(gce);var i=Dpt(null);return Mpt(i,{type:"RawJSON"}),Cpt(i,"rawJSON",r),bpt?Lpt(i):i}});dce&&_ce({target:"JSON",stat:!0,arity:3,forced:!xce},{stringify:function(t,r,n){var i=qpt(r),a=[],h=dce(t,function(L,W){var Q=Spt(i)?Ept(i,this,Opt(L),W):W;return Tpt(Q)?eF+(kpt(a,Q.rawJSON)-1):Q},n);if(typeof h!="string")return h;for(var p="",g=h.length,b=0;b<g;b++){var E=QN(h,b);if(E==="\""){var q=Apt(h,++b).end-1,P=JN(h,b,q);p+=JN(P,0,vce)===eF?a[JN(P,vce)]:"\""+P+"\"",b=q}else p+=E}return p}})});var Ca=T((IHt,bce)=>{"use strict";var Npt=Ia().has;bce.exports=function(e){return Npt(e),e}});var Ece=T(()=>{"use strict";var Fpt=K(),zpt=Ca(),jpt=Ia().remove;Fpt({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=zpt(this),r=!0,n,i=0,a=arguments.length;i<a;i++)n=jpt(t,arguments[i]),r=r&&n;return!!r}})});var Tce=T(()=>{"use strict";var Bpt=K(),Upt=Ca(),tF=Ia(),Vpt=tF.get,$pt=tF.has,Sce=tF.set;Bpt({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var n=Upt(this),i,a;return $pt(n,t)?(i=Vpt(n,t),"update"in r&&(i=r.update(i,t,n),Sce(n,t,i)),i):(a=r.insert(t,n),Sce(n,t,a),a)}})});var Ice=T(()=>{"use strict";var Gpt=K(),Wpt=Pr(),Zpt=Ca(),Hpt=ls();Gpt({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var r=Zpt(this),n=Wpt(t,arguments.length>1?arguments[1]:void 0);return Hpt(r,function(i,a){if(!n(i,a,r))return!1},!0)!==!1}})});var Ace=T(()=>{"use strict";var Kpt=K(),Xpt=Pr(),Ypt=Ca(),Cce=Ia(),Jpt=ls(),Qpt=Cce.Map,edt=Cce.set;Kpt({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var r=Ypt(this),n=Xpt(t,arguments.length>1?arguments[1]:void 0),i=new Qpt;return Jpt(r,function(a,h){n(a,h,r)&&edt(i,h,a)}),i}})});var qce=T(()=>{"use strict";var tdt=K(),rdt=Pr(),ndt=Ca(),idt=ls();tdt({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var r=ndt(this),n=rdt(t,arguments.length>1?arguments[1]:void 0),i=idt(r,function(a,h){if(n(a,h,r))return{value:a}},!0);return i&&i.value}})});var Pce=T(()=>{"use strict";var adt=K(),odt=Pr(),sdt=Ca(),udt=ls();adt({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var r=sdt(this),n=odt(t,arguments.length>1?arguments[1]:void 0),i=udt(r,function(a,h){if(n(a,h,r))return{key:h}},!0);return i&&i.key}})});var z0=T((zHt,Rce)=>{"use strict";var ldt=Pr(),cdt=Ye(),hdt=Tt(),fdt=Im(),pdt=Dn(),Mce=gn(),Oce=[].push;Rce.exports=function(t){var r=arguments.length,n=r>1?arguments[1]:void 0,i,a,h,p;return fdt(this),i=n!==void 0,i&&hdt(n),pdt(t)?new this:(a=[],i?(h=0,p=ldt(n,r>2?arguments[2]:void 0),Mce(t,function(g){cdt(Oce,a,p(g,h++))})):Mce(t,Oce,{that:a}),new this(a))}});var Dce=T(()=>{"use strict";var ddt=K(),mdt=z0();ddt({target:"Map",stat:!0,forced:!0},{from:mdt})});var Lce=T(()=>{"use strict";var vdt=K(),gdt=Oe(),ydt=Tt(),_dt=$r(),xdt=gn(),wT=Ia(),wdt=Ut(),bdt=wT.Map,Edt=wT.has,Sdt=wT.get,Tdt=wT.set,Idt=gdt([].push);vdt({target:"Map",stat:!0,forced:wdt},{groupBy:function(t,r){_dt(t),ydt(r);var n=new bdt,i=0;return xdt(t,function(a){var h=r(a,i++);Edt(n,h)?Idt(Sdt(n,h),a):Tdt(n,h,[a])}),n}})});var Nce=T(($Ht,kce)=>{"use strict";kce.exports=function(e,t){return e===t||e!==e&&t!==t}});var Fce=T(()=>{"use strict";var Cdt=K(),Adt=Nce(),qdt=Ca(),Pdt=ls();Cdt({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return Pdt(qdt(this),function(r){if(Adt(r,t))return!0},!0)===!0}})});var jce=T(()=>{"use strict";var Mdt=K(),Odt=Ye(),Rdt=gn(),Ddt=qt(),zce=Tt(),Ldt=Ia().Map;Mdt({target:"Map",stat:!0,forced:!0},{keyBy:function(t,r){var n=Ddt(this)?this:Ldt,i=new n;zce(r);var a=zce(i.set);return Rdt(t,function(h){Odt(a,i,r(h),h)}),i}})});var Bce=T(()=>{"use strict";var kdt=K(),Ndt=Ca(),Fdt=ls();kdt({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var r=Fdt(Ndt(this),function(n,i){if(n===t)return{key:i}},!0);return r&&r.key}})});var Vce=T(()=>{"use strict";var zdt=K(),jdt=Pr(),Bdt=Ca(),Uce=Ia(),Udt=ls(),Vdt=Uce.Map,$dt=Uce.set;zdt({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var r=Bdt(this),n=jdt(t,arguments.length>1?arguments[1]:void 0),i=new Vdt;return Udt(r,function(a,h){$dt(i,n(a,h,r),a)}),i}})});var Gce=T(()=>{"use strict";var Gdt=K(),Wdt=Pr(),Zdt=Ca(),$ce=Ia(),Hdt=ls(),Kdt=$ce.Map,Xdt=$ce.set;Gdt({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var r=Zdt(this),n=Wdt(t,arguments.length>1?arguments[1]:void 0),i=new Kdt;return Hdt(r,function(a,h){Xdt(i,h,n(a,h,r))}),i}})});var Wce=T(()=>{"use strict";var Ydt=K(),Jdt=Ca(),Qdt=gn(),emt=Ia().set;Ydt({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var r=Jdt(this),n=arguments.length,i=0;i<n;)Qdt(arguments[i++],function(a,h){emt(r,a,h)},{AS_ENTRIES:!0});return r}})});var j0=T((nKt,Zce)=>{"use strict";var tmt=xl();Zce.exports=function(){return new this(tmt(arguments))}});var Hce=T(()=>{"use strict";var rmt=K(),nmt=j0();rmt({target:"Map",stat:!0,forced:!0},{of:nmt})});var Kce=T(()=>{"use strict";var imt=K(),amt=Tt(),omt=Ca(),smt=ls(),umt=TypeError;imt({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=omt(this),n=arguments.length<2,i=n?void 0:arguments[1];if(amt(t),smt(r,function(a,h){n?(n=!1,i=a):i=t(i,a,h,r)}),n)throw new umt("Reduce of empty map with no initial value");return i}})});var Xce=T(()=>{"use strict";var lmt=K(),cmt=Pr(),hmt=Ca(),fmt=ls();lmt({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var r=hmt(this),n=cmt(t,arguments.length>1?arguments[1]:void 0);return fmt(r,function(i,a){if(n(i,a,r))return!0},!0)===!0}})});var Jce=T(()=>{"use strict";var pmt=K(),Yce=Tt(),dmt=Ca(),rF=Ia(),mmt=TypeError,vmt=rF.get,gmt=rF.has,ymt=rF.set;pmt({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,r){var n=dmt(this),i=arguments.length;Yce(r);var a=gmt(n,t);if(!a&&i<3)throw new mmt("Updating absent value");var h=a?vmt(n,t):Yce(i>2?arguments[2]:void 0)(t,n);return ymt(n,t,r(h,t,n)),n}})});var ST=T((fKt,Qce)=>{"use strict";var bT=Ye(),nF=Tt(),ET=qt(),_mt=Qe(),xmt=TypeError;Qce.exports=function(t,r){var n=_mt(this),i=nF(n.get),a=nF(n.has),h=nF(n.set),p=arguments.length>2?arguments[2]:void 0,g;if(!ET(r)&&!ET(p))throw new xmt("At least one callback required");return bT(a,n,t)?(g=bT(i,n,t),ET(r)&&(g=r(g),bT(h,n,t,g))):ET(p)&&(g=p(),bT(h,n,t,g)),g}});var ehe=T(()=>{"use strict";var wmt=K(),bmt=ST();wmt({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:bmt})});var the=T(()=>{"use strict";var Emt=K(),Smt=ST();Emt({target:"Map",proto:!0,real:!0,forced:!0},{upsert:Smt})});var rhe=T(()=>{"use strict";var Tmt=K(),Imt=Math.min,Cmt=Math.max;Tmt({target:"Math",stat:!0,forced:!0},{clamp:function(t,r,n){return Imt(n,Cmt(r,t))}})});var nhe=T(()=>{"use strict";var Amt=K();Amt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var ihe=T(()=>{"use strict";var qmt=K(),Pmt=180/Math.PI;qmt({target:"Math",stat:!0,forced:!0},{degrees:function(t){return t*Pmt}})});var iF=T((EKt,ahe)=>{"use strict";ahe.exports=Math.scale||function(t,r,n,i,a){var h=+t,p=+r,g=+n,b=+i,E=+a;return h!==h||p!==p||g!==g||b!==b||E!==E?NaN:h===1/0||h===-1/0?h:(h-p)*(E-b)/(g-p)+b}});var ohe=T(()=>{"use strict";var Mmt=K(),Omt=iF(),Rmt=OE();Mmt({target:"Math",stat:!0,forced:!0},{fscale:function(t,r,n,i,a){return Rmt(Omt(t,r,n,i,a))}})});var she=T(()=>{"use strict";var Dmt=K(),Lmt=TN();Dmt({target:"Math",stat:!0},{f16round:Lmt})});var uhe=T(()=>{"use strict";var kmt=K();kmt({target:"Math",stat:!0,forced:!0},{iaddh:function(t,r,n,i){var a=t>>>0,h=r>>>0,p=n>>>0;return h+(i>>>0)+((a&p|(a|p)&~(a+p>>>0))>>>31)|0}})});var lhe=T(()=>{"use strict";var Nmt=K();Nmt({target:"Math",stat:!0,forced:!0},{imulh:function(t,r){var n=65535,i=+t,a=+r,h=i&n,p=a&n,g=i>>16,b=a>>16,E=(g*p>>>0)+(h*p>>>16);return g*b+(E>>16)+((h*b>>>0)+(E&n)>>16)}})});var che=T(()=>{"use strict";var Fmt=K();Fmt({target:"Math",stat:!0,forced:!0},{isubh:function(t,r,n,i){var a=t>>>0,h=r>>>0,p=n>>>0;return h-(i>>>0)-((~a&p|~(a^p)&a-p>>>0)>>>31)|0}})});var hhe=T(()=>{"use strict";var zmt=K();zmt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var fhe=T(()=>{"use strict";var jmt=K(),Bmt=Math.PI/180;jmt({target:"Math",stat:!0,forced:!0},{radians:function(t){return t*Bmt}})});var phe=T(()=>{"use strict";var Umt=K(),Vmt=iF();Umt({target:"Math",stat:!0,forced:!0},{scale:Vmt})});var ghe=T(()=>{"use strict";var $mt=K(),Gmt=Qe(),Wmt=dD(),Zmt=hh(),Hmt=Mi(),dhe=vr(),mhe="Seeded Random",vhe=mhe+" Generator",Kmt="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",Xmt=dhe.set,Ymt=dhe.getterFor(vhe),Jmt=TypeError,Qmt=Zmt(function(t){Xmt(this,{type:vhe,seed:t%2147483647})},mhe,function(){var t=Ymt(this),r=t.seed=(t.seed*1103515245+12345)%2147483647;return Hmt((r&1073741823)/1073741823,!1)});$mt({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var r=Gmt(t).seed;if(!Wmt(r))throw new Jmt(Kmt);return new Qmt(r)}})});var yhe=T(()=>{"use strict";var evt=K();evt({target:"Math",stat:!0,forced:!0},{signbit:function(t){var r=+t;return r===r&&r===0?1/r===-1/0:r<0}})});var _he=T(()=>{"use strict";var tvt=K();tvt({target:"Math",stat:!0,forced:!0},{umulh:function(t,r){var n=65535,i=+t,a=+r,h=i&n,p=a&n,g=i>>>16,b=a>>>16,E=(g*p>>>0)+(h*p>>>16);return g*b+(E>>>16)+((h*b>>>0)+(E&n)>>>16)}})});var whe=T(()=>{"use strict";var rvt=K(),IT=Oe(),nvt=Gr(),ivt=tS(),TT="Invalid number representation",avt="Invalid radix",ovt=RangeError,aF=SyntaxError,svt=TypeError,xhe=/^[\da-z]+$/,uvt=IT("".charAt),lvt=IT(xhe.exec),cvt=IT(1 .toString),hvt=IT("".slice);rvt({target:"Number",stat:!0,forced:!0},{fromString:function(t,r){var n=1,i,a;if(typeof t!="string")throw new svt(TT);if(!t.length)throw new aF(TT);if(uvt(t,0)==="-"&&(n=-1,t=hvt(t,1),!t.length))throw new aF(TT);if(i=r===void 0?10:nvt(r),i<2||i>36)throw new ovt(avt);if(!lvt(xhe,t)||cvt(a=ivt(t,i),i)!==t)throw new aF(TT);return n*a}})});var bhe=T(()=>{"use strict";var fvt=K(),pvt=hT();fvt({target:"Number",stat:!0,forced:!0},{range:function(t,r,n){return new pvt(t,r,n,"number",0,1)}})});var Ehe=T(()=>{"use strict";TD()});var AT=T((JKt,Ihe)=>{"use strict";var She=vr(),dvt=hh(),CT=Mi(),mvt=Ft(),vvt=jf(),gvt=Vt(),The="Object Iterator",yvt=She.set,_vt=She.getterFor(The);Ihe.exports=dvt(function(t,r){var n=gvt(t);yvt(this,{type:The,mode:r,object:n,keys:vvt(n),index:0})},"Object",function(){for(var t=_vt(this),r=t.keys;;){if(r===null||t.index>=r.length)return t.object=t.keys=null,CT(void 0,!0);var n=r[t.index++],i=t.object;if(mvt(i,n)){switch(t.mode){case"keys":return CT(n,!1);case"values":return CT(i[n],!1);}return CT([n,i[n]],!1)}}})});var Che=T(()=>{"use strict";var xvt=K(),wvt=AT();xvt({target:"Object",stat:!0,forced:!0},{iterateEntries:function(t){return new wvt(t,"entries")}})});var Ahe=T(()=>{"use strict";var bvt=K(),Evt=AT();bvt({target:"Object",stat:!0,forced:!0},{iterateKeys:function(t){return new Evt(t,"keys")}})});var qhe=T(()=>{"use strict";var Svt=K(),Tvt=AT();Svt({target:"Object",stat:!0,forced:!0},{iterateValues:function(t){return new Tvt(t,"values")}})});var Phe=T(()=>{"use strict";var Ivt=K(),Cvt=St(),Avt=Oe(),qvt=Tt(),Pvt=$r(),Mvt=ks(),Ovt=gn(),Rvt=Cvt("Object","create"),Dvt=Avt([].push);Ivt({target:"Object",stat:!0},{groupBy:function(t,r){Pvt(t),qvt(r);var n=Rvt(null),i=0;return Ovt(t,function(a){var h=Mvt(r(a,i++));h in n?Dvt(n[h],a):n[h]=[a]}),n}})});var jhe=T(()=>{"use strict";var Lvt=K(),qT=Ye(),B0=gt(),kvt=ph(),Mhe=Tt(),Nvt=Qe(),Fvt=ra(),Ohe=qt(),zvt=Dn(),jvt=Pt(),PT=Cn(),Bvt=br(),oF=os(),Rhe=en(),iv=ZD(),Uvt=yt(),Dhe=vr(),Vvt=Uvt("observable"),sF="Observable",Lhe="Subscription",khe="SubscriptionObserver",uF=Dhe.getterFor,lF=Dhe.set,$vt=uF(sF),Nhe=uF(Lhe),MT=uF(khe),Fhe=function(e){this.observer=Nvt(e),this.cleanup=void 0,this.subscriptionObserver=void 0};Fhe.prototype={type:Lhe,clean:function(){var e=this.cleanup;if(e){this.cleanup=void 0;try{e()}catch(t){iv(t)}}},close:function(){if(!B0){var e=this.facade,t=this.subscriptionObserver;e.closed=!0,t&&(t.closed=!0)}this.observer=void 0},isClosed:function(){return this.observer===void 0}};var cF=function(e,t){var r=lF(this,new Fhe(e)),n;B0||(this.closed=!1);try{(n=PT(e,"start"))&&qT(n,e,this)}catch(p){iv(p)}if(!r.isClosed()){var i=r.subscriptionObserver=new hF(r);try{var a=t(i),h=a;zvt(a)||(r.cleanup=Ohe(a.unsubscribe)?function(){h.unsubscribe()}:Mhe(a))}catch(p){i.error(p);return}r.isClosed()&&r.clean()}};cF.prototype=oF({},{unsubscribe:function(){var t=Nhe(this);t.isClosed()||(t.close(),t.clean())}});B0&&Rhe(cF.prototype,"closed",{configurable:!0,get:function(){return Nhe(this).isClosed()}});var hF=function(e){lF(this,{type:khe,subscriptionState:e}),B0||(this.closed=!1)};hF.prototype=oF({},{next:function(t){var r=MT(this).subscriptionState;if(!r.isClosed()){var n=r.observer;try{var i=PT(n,"next");i&&qT(i,n,t)}catch(a){iv(a)}}},error:function(t){var r=MT(this).subscriptionState;if(!r.isClosed()){var n=r.observer;r.close();try{var i=PT(n,"error");i?qT(i,n,t):iv(t)}catch(a){iv(a)}r.clean()}},complete:function(){var t=MT(this).subscriptionState;if(!t.isClosed()){var r=t.observer;t.close();try{var n=PT(r,"complete");n&&qT(n,r)}catch(i){iv(i)}t.clean()}}});B0&&Rhe(hF.prototype,"closed",{configurable:!0,get:function(){return MT(this).subscriptionState.isClosed()}});var zhe=function(t){Fvt(this,fF),lF(this,{type:sF,subscriber:Mhe(t)})},fF=zhe.prototype;oF(fF,{subscribe:function(t){var r=arguments.length;return new cF(Ohe(t)?{next:t,error:r>1?arguments[1]:void 0,complete:r>2?arguments[2]:void 0}:jvt(t)?t:{},$vt(this).subscriber)}});Bvt(fF,Vvt,function(){return this});Lvt({global:!0,constructor:!0,forced:!0},{Observable:zhe});kvt(sF)});var Uhe=T(()=>{"use strict";var Gvt=K(),Wvt=St(),Zvt=Ye(),Bhe=Qe(),Hvt=zs(),Kvt=lh(),Xvt=Cn(),Yvt=gn(),Jvt=yt(),Qvt=Jvt("observable");Gvt({target:"Observable",stat:!0,forced:!0},{from:function(t){var r=Hvt(this)?this:Wvt("Observable"),n=Xvt(Bhe(t),Qvt);if(n){var i=Bhe(Zvt(n,t));return i.constructor===r?i:new r(function(h){return i.subscribe(h)})}var a=Kvt(t);return new r(function(h){Yvt(a,function(p,g){if(h.next(p),h.closed)return g()},{IS_ITERATOR:!0,INTERRUPTED:!0}),h.complete()})}})});var $he=T(()=>{"use strict";var egt=K(),Vhe=St(),tgt=zs(),rgt=Vhe("Array");egt({target:"Observable",stat:!0,forced:!0},{of:function(){for(var t=tgt(this)?this:Vhe("Observable"),r=arguments.length,n=rgt(r),i=0;i<r;)n[i]=arguments[i++];return new t(function(a){for(var h=0;h<r;h++)if(a.next(n[h]),a.closed)return;a.complete()})}})});var Ghe=T(()=>{"use strict";jhe();Uhe();$he()});var Whe=T(()=>{"use strict";uL()});var Zhe=T(()=>{"use strict";lL()});var Hhe=T(()=>{"use strict";var ngt=K(),igt=bu(),agt=xh();ngt({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=igt.f(this),r=agt(e);return(r.error?t.reject:t.resolve)(r.value),t.promise}})});var Khe=T(()=>{"use strict";var ogt=K(),sgt=bu();ogt({target:"Promise",stat:!0},{withResolvers:function(){var t=sgt.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var Iu=T((E9t,Qhe)=>{"use strict";XE();GS();var Jhe=St(),ugt=Oe(),lgt=vu(),Xhe=Jhe("Map"),cgt=Jhe("WeakMap"),hgt=ugt([].push),Yhe=lgt("metadata"),pF=Yhe.store||(Yhe.store=new cgt),U0=function(e,t,r){var n=pF.get(e);if(!n){if(!r)return;pF.set(e,n=new Xhe)}var i=n.get(t);if(!i){if(!r)return;n.set(t,i=new Xhe)}return i},fgt=function(e,t,r){var n=U0(t,r,!1);return n===void 0?!1:n.has(e)},pgt=function(e,t,r){var n=U0(t,r,!1);return n===void 0?void 0:n.get(e)},dgt=function(e,t,r,n){U0(r,n,!0).set(e,t)},mgt=function(e,t){var r=U0(e,t,!1),n=[];return r&&r.forEach(function(i,a){hgt(n,a)}),n},vgt=function(e){return e===void 0||typeof e=="symbol"?e:String(e)};Qhe.exports={store:pF,getMap:U0,has:fgt,get:pgt,set:dgt,keys:mgt,toKey:vgt}});var tfe=T(()=>{"use strict";var ggt=K(),efe=Iu(),ygt=Qe(),_gt=efe.toKey,xgt=efe.set;ggt({target:"Reflect",stat:!0},{defineMetadata:function(t,r,n){var i=arguments.length<4?void 0:_gt(arguments[3]);xgt(t,r,ygt(n),i)}})});var nfe=T(()=>{"use strict";var wgt=K(),dF=Iu(),bgt=Qe(),Egt=dF.toKey,Sgt=dF.getMap,rfe=dF.store;wgt({target:"Reflect",stat:!0},{deleteMetadata:function(t,r){var n=arguments.length<3?void 0:Egt(arguments[2]),i=Sgt(bgt(r),n,!1);if(i===void 0||!i.delete(t))return!1;if(i.size)return!0;var a=rfe.get(r);return a.delete(n),!!a.size||rfe.delete(r)}})});var afe=T(()=>{"use strict";var Tgt=K(),mF=Iu(),Igt=Qe(),Cgt=kn(),Agt=mF.has,qgt=mF.get,Pgt=mF.toKey,ife=function(e,t,r){var n=Agt(e,t,r);if(n)return qgt(e,t,r);var i=Cgt(t);return i!==null?ife(e,i,r):void 0};Tgt({target:"Reflect",stat:!0},{getMetadata:function(t,r){var n=arguments.length<3?void 0:Pgt(arguments[2]);return ife(t,Igt(r),n)}})});var lfe=T(()=>{"use strict";var Mgt=K(),ofe=Oe(),sfe=Iu(),Ogt=Qe(),Rgt=kn(),Dgt=QS(),Lgt=ofe(Dgt),kgt=ofe([].concat),Ngt=sfe.keys,Fgt=sfe.toKey,ufe=function(e,t){var r=Ngt(e,t),n=Rgt(e);if(n===null)return r;var i=ufe(n,t);return i.length?r.length?Lgt(kgt(r,i)):i:r};Mgt({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var r=arguments.length<2?void 0:Fgt(arguments[1]);return ufe(Ogt(t),r)}})});var hfe=T(()=>{"use strict";var zgt=K(),cfe=Iu(),jgt=Qe(),Bgt=cfe.get,Ugt=cfe.toKey;zgt({target:"Reflect",stat:!0},{getOwnMetadata:function(t,r){var n=arguments.length<3?void 0:Ugt(arguments[2]);return Bgt(t,jgt(r),n)}})});var pfe=T(()=>{"use strict";var Vgt=K(),ffe=Iu(),$gt=Qe(),Ggt=ffe.keys,Wgt=ffe.toKey;Vgt({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var r=arguments.length<2?void 0:Wgt(arguments[1]);return Ggt($gt(t),r)}})});var vfe=T(()=>{"use strict";var Zgt=K(),dfe=Iu(),Hgt=Qe(),Kgt=kn(),Xgt=dfe.has,Ygt=dfe.toKey,mfe=function(e,t,r){var n=Xgt(e,t,r);if(n)return!0;var i=Kgt(t);return i!==null?mfe(e,i,r):!1};Zgt({target:"Reflect",stat:!0},{hasMetadata:function(t,r){var n=arguments.length<3?void 0:Ygt(arguments[2]);return mfe(t,Hgt(r),n)}})});var yfe=T(()=>{"use strict";var Jgt=K(),gfe=Iu(),Qgt=Qe(),eyt=gfe.has,tyt=gfe.toKey;Jgt({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,r){var n=arguments.length<3?void 0:tyt(arguments[2]);return eyt(t,Qgt(r),n)}})});var xfe=T(()=>{"use strict";var ryt=K(),_fe=Iu(),nyt=Qe(),iyt=_fe.toKey,ayt=_fe.set;ryt({target:"Reflect",stat:!0},{metadata:function(t,r){return function(i,a){ayt(t,r,nyt(i),iyt(a))}}})});var bfe=T(()=>{"use strict";var oyt=K(),wfe=Oe(),syt=At(),uyt=ep(),lyt=wfe("".charCodeAt),cyt=wfe("".replace),hyt=RegExp("[!\"#$%&'()*+,\\-./:;<=>?@[\\\\\\]^`{|}~"+uyt+"]","g");oyt({target:"RegExp",stat:!0,forced:!0},{escape:function(t){var r=syt(t),n=lyt(r,0);return(n>47&&n<58?"\\x3":"")+cyt(r,hyt,"\\$&")}})});var na=T(($9t,Efe)=>{"use strict";var vF=Oe(),OT=Set.prototype;Efe.exports={Set,add:vF(OT.add),has:vF(OT.has),remove:vF(OT.delete),proto:OT}});var Ri=T((G9t,Sfe)=>{"use strict";var fyt=na().has;Sfe.exports=function(e){return fyt(e),e}});var Tfe=T(()=>{"use strict";var pyt=K(),dyt=Ri(),myt=na().add;pyt({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=dyt(this),r=0,n=arguments.length;r<n;r++)myt(t,arguments[r]);return t}})});var Ife=T(()=>{"use strict";var vyt=K(),gyt=Ri(),yyt=na().remove;vyt({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=gyt(this),r=!0,n,i=0,a=arguments.length;i<a;i++)n=yyt(t,arguments[i]),r=r&&n;return!!r}})});var Oo=T((X9t,Mfe)=>{"use strict";var Cfe=Oe(),_yt=Ml(),Afe=na(),xyt=Afe.Set,qfe=Afe.proto,wyt=Cfe(qfe.forEach),Pfe=Cfe(qfe.keys),byt=Pfe(new xyt).next;Mfe.exports=function(e,t,r){return r?_yt({iterator:Pfe(e),next:byt},t):wyt(e,t)}});var RT=T((Y9t,Rfe)=>{"use strict";var Ofe=na(),Eyt=Oo(),Syt=Ofe.Set,Tyt=Ofe.add;Rfe.exports=function(e){var t=new Syt;return Eyt(e,function(r){Tyt(t,r)}),t}});var av=T((J9t,Dfe)=>{"use strict";var Iyt=z_(),Cyt=na();Dfe.exports=Iyt(Cyt.proto,"size","get")||function(e){return e.size}});var Th=T((Q9t,jfe)=>{"use strict";var Lfe=Tt(),Ffe=Qe(),kfe=Ye(),Ayt=Gr(),qyt=tn(),Nfe="Invalid size",Pyt=RangeError,Myt=TypeError,Oyt=Math.max,zfe=function(e,t,r,n){this.set=e,this.size=t,this.has=r,this.keys=n};zfe.prototype={getIterator:function(){return qyt(Ffe(kfe(this.keys,this.set)))},includes:function(e){return kfe(this.has,this.set,e)}};jfe.exports=function(e){Ffe(e);var t=+e.size;if(t!==t)throw new Myt(Nfe);var r=Ayt(t);if(r<0)throw new Pyt(Nfe);return new zfe(e,Oyt(r,0),Lfe(e.has),Lfe(e.keys))}});var gF=T((e7t,Vfe)=>{"use strict";var Ryt=Ri(),Ufe=na(),Dyt=RT(),Lyt=av(),kyt=Th(),Nyt=Oo(),Fyt=Ml(),zyt=Ufe.has,Bfe=Ufe.remove;Vfe.exports=function(t){var r=Ryt(this),n=kyt(t),i=Dyt(r);return Lyt(r)<=n.size?Nyt(r,function(a){n.includes(a)&&Bfe(i,a)}):Fyt(n.getIterator(),function(a){zyt(r,a)&&Bfe(i,a)}),i}});var Ih=T((t7t,Gfe)=>{"use strict";var jyt=St(),$fe=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};Gfe.exports=function(e){var t=jyt("Set");try{new t()[e]($fe(0));try{return new t()[e]($fe(-1)),!1}catch(r){return!0}}catch(r){return!1}}});var Wfe=T(()=>{"use strict";var Byt=K(),Uyt=gF(),Vyt=Ih();Byt({target:"Set",proto:!0,real:!0,forced:!Vyt("difference")},{difference:Uyt})});var Hfe=T((i7t,Zfe)=>{"use strict";var $yt=Xa(),Gyt=Ft(),Wyt=Dn(),Zyt=yt(),Hyt=Hf(),Kyt=Zyt("iterator"),Xyt=Object;Zfe.exports=function(e){if(Wyt(e))return!1;var t=Xyt(e);return t[Kyt]!==void 0||"@@iterator"in t||Gyt(Hyt,$yt(t))}});var Ch=T((a7t,Xfe)=>{"use strict";var Yyt=St(),Kfe=qt(),Jyt=Hfe(),Qyt=Pt(),e_t=Yyt("Set"),t_t=function(e){return Qyt(e)&&typeof e.size=="number"&&Kfe(e.has)&&Kfe(e.keys)};Xfe.exports=function(e){return t_t(e)?e:Jyt(e)?new e_t(e):e}});var Yfe=T(()=>{"use strict";var r_t=K(),n_t=Ye(),i_t=Ch(),a_t=gF();r_t({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return n_t(a_t,this,i_t(t))}})});var Jfe=T(()=>{"use strict";var o_t=K(),s_t=Pr(),u_t=Ri(),l_t=Oo();o_t({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var r=u_t(this),n=s_t(t,arguments.length>1?arguments[1]:void 0);return l_t(r,function(i){if(!n(i,i,r))return!1},!0)!==!1}})});var epe=T(()=>{"use strict";var c_t=K(),h_t=Pr(),f_t=Ri(),Qfe=na(),p_t=Oo(),d_t=Qfe.Set,m_t=Qfe.add;c_t({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var r=f_t(this),n=h_t(t,arguments.length>1?arguments[1]:void 0),i=new d_t;return p_t(r,function(a){n(a,a,r)&&m_t(i,a)}),i}})});var tpe=T(()=>{"use strict";var v_t=K(),g_t=Pr(),y_t=Ri(),__t=Oo();v_t({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var r=y_t(this),n=g_t(t,arguments.length>1?arguments[1]:void 0),i=__t(r,function(a){if(n(a,a,r))return{value:a}},!0);return i&&i.value}})});var rpe=T(()=>{"use strict";var x_t=K(),w_t=z0();x_t({target:"Set",stat:!0,forced:!0},{from:w_t})});var _F=T((v7t,ipe)=>{"use strict";var b_t=Ri(),yF=na(),E_t=av(),S_t=Th(),T_t=Oo(),I_t=Ml(),C_t=yF.Set,npe=yF.add,A_t=yF.has;ipe.exports=function(t){var r=b_t(this),n=S_t(t),i=new C_t;return E_t(r)>n.size?I_t(n.getIterator(),function(a){A_t(r,a)&&npe(i,a)}):T_t(r,function(a){n.includes(a)&&npe(i,a)}),i}});var ape=T(()=>{"use strict";var q_t=K(),P_t=Fe(),M_t=_F(),O_t=Ih(),R_t=!O_t("intersection")||P_t(function(){return Array.from(new Set([1,2,3]).intersection(new Set([3,2])))!=="3,2"});q_t({target:"Set",proto:!0,real:!0,forced:R_t},{intersection:M_t})});var ope=T(()=>{"use strict";var D_t=K(),L_t=Ye(),k_t=Ch(),N_t=_F();D_t({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return L_t(N_t,this,k_t(t))}})});var xF=T((w7t,spe)=>{"use strict";var F_t=Ri(),z_t=na().has,j_t=av(),B_t=Th(),U_t=Oo(),V_t=Ml(),$_t=El();spe.exports=function(t){var r=F_t(this),n=B_t(t);if(j_t(r)<=n.size)return U_t(r,function(a){if(n.includes(a))return!1},!0)!==!1;var i=n.getIterator();return V_t(i,function(a){if(z_t(r,a))return $_t(i,"normal",!1)})!==!1}});var upe=T(()=>{"use strict";var G_t=K(),W_t=xF(),Z_t=Ih();G_t({target:"Set",proto:!0,real:!0,forced:!Z_t("isDisjointFrom")},{isDisjointFrom:W_t})});var lpe=T(()=>{"use strict";var H_t=K(),K_t=Ye(),X_t=Ch(),Y_t=xF();H_t({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return K_t(Y_t,this,X_t(t))}})});var wF=T((I7t,cpe)=>{"use strict";var J_t=Ri(),Q_t=av(),e0t=Oo(),t0t=Th();cpe.exports=function(t){var r=J_t(this),n=t0t(t);return Q_t(r)>n.size?!1:e0t(r,function(i){if(!n.includes(i))return!1},!0)!==!1}});var hpe=T(()=>{"use strict";var r0t=K(),n0t=wF(),i0t=Ih();r0t({target:"Set",proto:!0,real:!0,forced:!i0t("isSubsetOf")},{isSubsetOf:n0t})});var fpe=T(()=>{"use strict";var a0t=K(),o0t=Ye(),s0t=Ch(),u0t=wF();a0t({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return o0t(u0t,this,s0t(t))}})});var bF=T((M7t,ppe)=>{"use strict";var l0t=Ri(),c0t=na().has,h0t=av(),f0t=Th(),p0t=Ml(),d0t=El();ppe.exports=function(t){var r=l0t(this),n=f0t(t);if(h0t(r)<n.size)return!1;var i=n.getIterator();return p0t(i,function(a){if(!c0t(r,a))return d0t(i,"normal",!1)})!==!1}});var dpe=T(()=>{"use strict";var m0t=K(),v0t=bF(),g0t=Ih();m0t({target:"Set",proto:!0,real:!0,forced:!g0t("isSupersetOf")},{isSupersetOf:v0t})});var mpe=T(()=>{"use strict";var y0t=K(),_0t=Ye(),x0t=Ch(),w0t=bF();y0t({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return _0t(w0t,this,x0t(t))}})});var gpe=T(()=>{"use strict";var b0t=K(),vpe=Oe(),E0t=Ri(),S0t=Oo(),T0t=At(),I0t=vpe([].join),C0t=vpe([].push);b0t({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var r=E0t(this),n=t===void 0?",":T0t(t),i=[];return S0t(r,function(a){C0t(i,a)}),I0t(i,n)}})});var _pe=T(()=>{"use strict";var A0t=K(),q0t=Pr(),P0t=Ri(),ype=na(),M0t=Oo(),O0t=ype.Set,R0t=ype.add;A0t({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var r=P0t(this),n=q0t(t,arguments.length>1?arguments[1]:void 0),i=new O0t;return M0t(r,function(a){R0t(i,n(a,a,r))}),i}})});var xpe=T(()=>{"use strict";var D0t=K(),L0t=j0();D0t({target:"Set",stat:!0,forced:!0},{of:L0t})});var wpe=T(()=>{"use strict";var k0t=K(),N0t=Tt(),F0t=Ri(),z0t=Oo(),j0t=TypeError;k0t({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=F0t(this),n=arguments.length<2,i=n?void 0:arguments[1];if(N0t(t),z0t(r,function(a){n?(n=!1,i=a):i=t(i,a,a,r)}),n)throw new j0t("Reduce of empty set with no initial value");return i}})});var bpe=T(()=>{"use strict";var B0t=K(),U0t=Pr(),V0t=Ri(),$0t=Oo();B0t({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var r=V0t(this),n=U0t(t,arguments.length>1?arguments[1]:void 0);return $0t(r,function(i){if(n(i,i,r))return!0},!0)===!0}})});var SF=T((W7t,Epe)=>{"use strict";var G0t=Ri(),EF=na(),W0t=RT(),Z0t=Th(),H0t=Ml(),K0t=EF.add,X0t=EF.has,Y0t=EF.remove;Epe.exports=function(t){var r=G0t(this),n=Z0t(t).getIterator(),i=W0t(r);return H0t(n,function(a){X0t(r,a)?Y0t(i,a):K0t(i,a)}),i}});var Spe=T(()=>{"use strict";var J0t=K(),Q0t=SF(),ext=Ih();J0t({target:"Set",proto:!0,real:!0,forced:!ext("symmetricDifference")},{symmetricDifference:Q0t})});var Tpe=T(()=>{"use strict";var txt=K(),rxt=Ye(),nxt=Ch(),ixt=SF();txt({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return rxt(ixt,this,nxt(t))}})});var TF=T((Y7t,Ipe)=>{"use strict";var axt=Ri(),oxt=na().add,sxt=RT(),uxt=Th(),lxt=Ml();Ipe.exports=function(t){var r=axt(this),n=uxt(t).getIterator(),i=sxt(r);return lxt(n,function(a){oxt(i,a)}),i}});var Cpe=T(()=>{"use strict";var cxt=K(),hxt=TF(),fxt=Ih();cxt({target:"Set",proto:!0,real:!0,forced:!fxt("union")},{union:hxt})});var Ape=T(()=>{"use strict";var pxt=K(),dxt=Ye(),mxt=Ch(),vxt=TF();pxt({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return dxt(vxt,this,mxt(t))}})});var qpe=T(()=>{"use strict";var gxt=K(),yxt=sp().charAt,_xt=$r(),xxt=Gr(),wxt=At();gxt({target:"String",proto:!0,forced:!0},{at:function(t){var r=wxt(_xt(this)),n=r.length,i=xxt(t),a=i>=0?i:n+i;return a<0||a>=n?void 0:yxt(r,a)}})});var IF=T((iXt,Rpe)=>{"use strict";var Ope=Oe(),bxt=Bn(),Ppe=At(),Ext=Ht(),Sxt=TypeError,Mpe=Ope([].push),Txt=Ope([].join);Rpe.exports=function(t){var r=bxt(t),n=Ext(r);if(!n)return"";for(var i=arguments.length,a=[],h=0;;){var p=r[h++];if(p===void 0)throw new Sxt("Incorrect template");if(Mpe(a,Ppe(p)),h===n)return Txt(a,"");h<i&&Mpe(a,Ppe(arguments[h]))}}});var Dpe=T(()=>{"use strict";var Ixt=K(),Cxt=IF();Ixt({target:"String",stat:!0,forced:!0},{cooked:Cxt})});var zpe=T(()=>{"use strict";var Axt=K(),qxt=hh(),Lpe=Mi(),Pxt=$r(),Mxt=At(),kpe=vr(),Npe=sp(),Oxt=Npe.codeAt,Rxt=Npe.charAt,Fpe="String Iterator",Dxt=kpe.set,Lxt=kpe.getterFor(Fpe),kxt=qxt(function(t){Dxt(this,{type:Fpe,string:t,index:0})},"String",function(){var t=Lxt(this),r=t.string,n=t.index,i;return n>=r.length?Lpe(void 0,!0):(i=Rxt(r,n),t.index+=i.length,Lpe({codePoint:Oxt(i,0),position:n},!1))});Axt({target:"String",proto:!0,forced:!0},{codePoints:function(){return new kxt(Mxt(Pxt(this)))}})});var Hpe=T((lXt,Zpe)=>{"use strict";var Nxt=St(),DT=Oe(),Fxt=String.fromCharCode,zxt=Nxt("String","fromCodePoint"),CF=DT("".charAt),Gpe=DT("".charCodeAt),jpe=DT("".indexOf),Bpe=DT("".slice),qF=48,Wpe=57,Upe=97,jxt=102,Vpe=65,Bxt=70,$pe=function(e,t){var r=Gpe(e,t);return r>=qF&&r<=Wpe},AF=function(e,t,r){if(r>=e.length)return-1;for(var n=0;t<r;t++){var i=Uxt(Gpe(e,t));if(i===-1)return-1;n=n*16+i}return n},Uxt=function(e){return e>=qF&&e<=Wpe?e-qF:e>=Upe&&e<=jxt?e-Upe+10:e>=Vpe&&e<=Bxt?e-Vpe+10:-1};Zpe.exports=function(e){for(var t="",r=0,n=0,i;(n=jpe(e,"\\",n))>-1;){if(t+=Bpe(e,r,n),++n===e.length)return;var a=CF(e,n++);switch(a){case"b":t+="\b";break;case"t":t+="\t";break;case"n":t+=`
`;break;case"v":t+="\x0B";break;case"f":t+="\f";break;case"r":t+="\r";break;case"\r":n<e.length&&CF(e,n)===`
`&&++n;case`
`:case"\u2028":case"\u2029":break;case"0":if($pe(e,n))return;t+="\0";break;case"x":if(i=AF(e,n,n+2),i===-1)return;n+=2,t+=Fxt(i);break;case"u":if(n<e.length&&CF(e,n)==="{"){var h=jpe(e,"}",++n);if(h===-1)return;i=AF(e,n,h),n=h+1}else i=AF(e,n,n+4),n+=4;if(i===-1||i>1114111)return;t+=zxt(i);break;default:if($pe(a,0))return;t+=a;}r=n}return t+Bpe(e,r)}});var ide=T(()=>{"use strict";var Vxt=ql(),$xt=K(),Gxt=vu(),Wxt=St(),Zxt=q_(),LT=Oe(),Qpe=ta(),ede=Qe(),Hxt=Vt(),Kxt=qt(),Xxt=Ht(),Yxt=Fr().f,Jxt=Bf(),Qxt=IF(),e1t=Hpe(),tde=ep(),t1t=Wxt("WeakMap"),Rl=Gxt("GlobalDedentRegistry",new t1t);Rl.has=Rl.has;Rl.get=Rl.get;Rl.set=Rl.set;var PF=Array,V0=TypeError,Kpe=Object.freeze||Object,r1t=Object.isFrozen,n1t=Math.min,Xpe=LT("".charAt),rde=LT("".slice),i1t=LT("".split),Ype=LT(/./.exec),a1t=/([\n\u2028\u2029]|\r\n?)/g,o1t=RegExp("^["+tde+"]*"),s1t=RegExp("[^"+tde+"]"),Jpe="Invalid tag",u1t="Invalid opening line",l1t="Invalid closing line",c1t=function(e){var t=e.raw;if(Vxt&&!r1t(t))throw new V0("Raw template should be frozen");if(Rl.has(t))return Rl.get(t);var r=h1t(t),n=p1t(r);return Yxt(n,"raw",{value:Kpe(r)}),Kpe(n),Rl.set(t,n),n},h1t=function(e){var t=Hxt(e),r=Xxt(t),n=PF(r),i=PF(r),a=0,h,p,g,b;if(!r)throw new V0(Jpe);for(;a<r;a++){var E=t[a];if(typeof E=="string")n[a]=i1t(E,a1t);else throw new V0(Jpe)}for(a=0;a<r;a++){var q=a+1===r;if(h=n[a],a===0){if(h.length===1||h[0].length>0)throw new V0(u1t);h[1]=""}if(q){if(h.length===1||Ype(s1t,h[h.length-1]))throw new V0(l1t);h[h.length-2]="",h[h.length-1]=""}for(var P=2;P<h.length;P+=2){var L=h[P],W=P+1===h.length&&!q,Q=Ype(o1t,L)[0];if(!W&&Q.length===L.length){h[P]="";continue}p=f1t(Q,p)}}var V=p?p.length:0;for(a=0;a<r;a++){for(h=n[a],g=h[0],b=1;b<h.length;b+=2)g+=h[b]+rde(h[b+1],V);i[a]=g}return i},f1t=function(e,t){if(t===void 0||e===t)return e;for(var r=0,n=n1t(e.length,t.length);r<n&&Xpe(e,r)===Xpe(t,r);r++);return rde(e,0,r)},p1t=function(e){for(var t=0,r=e.length,n=PF(r);t<r;t++)n[t]=e1t(e[t]);return n},nde=function(e){return Zxt(function(t){var r=Jxt(arguments);return r[0]=c1t(ede(t)),Qpe(e,this,r)},"")},d1t=nde(Qxt);$xt({target:"String",stat:!0,forced:!0},{dedent:function(t){return ede(t),Kxt(t)?nde(t):Qpe(d1t,this,arguments)}})});var ade=T(()=>{"use strict";PL()});var ode=T(()=>{"use strict";FL()});var sde=T(()=>{"use strict";ZL()});var ude=T(()=>{"use strict";QL()});var lde=T(()=>{"use strict";var m1t=ot(),v1t=vn(),g1t=Fr().f,y1t=Qn().f,MF=m1t.Symbol;v1t("asyncDispose");MF&&($0=y1t(MF,"asyncDispose"),$0.enumerable&&$0.configurable&&$0.writable&&g1t(MF,"asyncDispose",{value:$0.value,enumerable:!1,configurable:!1,writable:!1}));var $0});var cde=T(()=>{"use strict";var _1t=ot(),x1t=vn(),w1t=Fr().f,b1t=Qn().f,OF=_1t.Symbol;x1t("dispose");OF&&(G0=b1t(OF,"dispose"),G0.enumerable&&G0.configurable&&G0.writable&&w1t(OF,"dispose",{value:G0.value,enumerable:!1,configurable:!1,writable:!1}));var G0});var DF=T((SXt,hde)=>{"use strict";var E1t=St(),S1t=Oe(),RF=E1t("Symbol"),T1t=RF.keyFor,I1t=S1t(RF.prototype.valueOf);hde.exports=RF.isRegisteredSymbol||function(t){try{return T1t(I1t(t))!==void 0}catch(r){return!1}}});var fde=T(()=>{"use strict";var C1t=K(),A1t=DF();C1t({target:"Symbol",stat:!0},{isRegisteredSymbol:A1t})});var pde=T(()=>{"use strict";var q1t=K(),P1t=DF();q1t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:P1t})});var NF=T((qXt,_de)=>{"use strict";var M1t=vu(),gde=St(),O1t=Oe(),R1t=vl(),D1t=yt(),NT=gde("Symbol"),dde=NT.isWellKnownSymbol,yde=gde("Object","getOwnPropertyNames"),L1t=O1t(NT.prototype.valueOf),mde=M1t("wks");for(kT=0,LF=yde(NT),vde=LF.length;kT<vde;kT++)try{kF=LF[kT],R1t(NT[kF])&&D1t(kF)}catch(e){}var kF,kT,LF,vde;_de.exports=function(t){if(dde&&dde(t))return!0;try{for(var r=L1t(t),n=0,i=yde(mde),a=i.length;n<a;n++)if(mde[i[n]]==r)return!0}catch(h){}return!1}});var xde=T(()=>{"use strict";var k1t=K(),N1t=NF();k1t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:N1t})});var wde=T(()=>{"use strict";var F1t=K(),z1t=NF();F1t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:z1t})});var bde=T(()=>{"use strict";var j1t=vn();j1t("matcher")});var Ede=T(()=>{"use strict";var B1t=vn();B1t("metadata")});var Sde=T(()=>{"use strict";var U1t=vn();U1t("metadataKey")});var Tde=T(()=>{"use strict";var V1t=vn();V1t("observable")});var Ide=T(()=>{"use strict";var $1t=vn();$1t("patternMatch")});var Cde=T(()=>{"use strict";var G1t=vn();G1t("replaceAll")});var qde=T(()=>{"use strict";var W1t=St(),Z1t=Im(),H1t=Vk(),Ade=zt(),K1t=Xf(),X1t=Ade.aTypedArrayConstructor,Y1t=Ade.exportTypedArrayStaticMethod;Y1t("fromAsync",function(t){var r=this,n=arguments.length,i=n>1?arguments[1]:void 0,a=n>2?arguments[2]:void 0;return new(W1t("Promise"))(function(h){Z1t(r),h(H1t(t,i,a))}).then(function(h){return K1t(X1t(r),h)})},!0)});var Pde=T(()=>{"use strict";dk()});var Ode=T(()=>{"use strict";var Mde=zt(),J1t=qn().filterReject,Q1t=OS(),ewt=Mde.aTypedArray,twt=Mde.exportTypedArrayMethod;twt("filterOut",function(t){var r=J1t(ewt(this),t,arguments.length>1?arguments[1]:void 0);return Q1t(this,r)},!0)});var Dde=T(()=>{"use strict";var Rde=zt(),rwt=qn().filterReject,nwt=OS(),iwt=Rde.aTypedArray,awt=Rde.exportTypedArrayMethod;awt("filterReject",function(t){var r=rwt(iwt(this),t,arguments.length>1?arguments[1]:void 0);return nwt(this,r)},!0)});var Lde=T(()=>{"use strict";mk()});var kde=T(()=>{"use strict";vk()});var Fde=T(()=>{"use strict";var Nde=zt(),owt=XS(),swt=Hm(),uwt=Nde.aTypedArray,lwt=Nde.exportTypedArrayMethod;lwt("groupBy",function(t){var r=arguments.length>1?arguments[1]:void 0;return owt(uwt(this),t,r,swt)},!0)});var zde=T(()=>{"use strict";Ck()});var jde=T(()=>{"use strict";Ak()});var Bde=T(()=>{"use strict";var FF=zt(),cwt=Ht(),hwt=CS(),fwt=ts(),pwt=b0(),dwt=Gr(),mwt=Fe(),vwt=FF.aTypedArray,gwt=FF.getTypedArrayConstructor,ywt=FF.exportTypedArrayMethod,_wt=Math.max,xwt=Math.min,wwt=!mwt(function(){var e=new Int8Array([1]),t=e.toSpliced(1,0,{valueOf:function(){return e[0]=2,3}});return t[0]!==2||t[1]!==3});ywt("toSpliced",function(t,r){var n=vwt(this),i=gwt(n),a=cwt(n),h=fwt(t,a),p=arguments.length,g=0,b,E,q,P,L,W,Q;if(p===0)b=E=0;else if(p===1)b=0,E=a-h;else if(E=xwt(_wt(dwt(r),0),a-h),b=p-2,b){P=new i(b),q=hwt(P);for(var V=2;V<p;V++)L=arguments[V],P[V-2]=q?pwt(L):+L}for(W=a+b-E,Q=new i(W);g<h;g++)Q[g]=n[g];for(;g<h+b;g++)Q[g]=P[g-h];for(;g<W;g++)Q[g]=n[g+E-b];return Q},!wwt)});var Ude=T(()=>{"use strict";var bwt=Oe(),zF=zt(),Ewt=Xf(),Swt=QS(),Twt=zF.aTypedArray,Iwt=zF.getTypedArrayConstructor,Cwt=zF.exportTypedArrayMethod,Awt=bwt(Swt);Cwt("uniqueBy",function(t){return Twt(this),Ewt(Iwt(this),Awt(this,t))},!0)});var Vde=T(()=>{"use strict";Pk()});var jT=T((vYt,$de)=>{"use strict";var FT=Oe(),zT=WeakMap.prototype;$de.exports={WeakMap,set:FT(zT.set),get:FT(zT.get),has:FT(zT.has),remove:FT(zT.delete)}});var jF=T((gYt,Gde)=>{"use strict";var qwt=jT().has;Gde.exports=function(e){return qwt(e),e}});var Wde=T(()=>{"use strict";var Pwt=K(),Mwt=jF(),Owt=jT().remove;Pwt({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Mwt(this),r=!0,n,i=0,a=arguments.length;i<a;i++)n=Owt(t,arguments[i]),r=r&&n;return!!r}})});var Zde=T(()=>{"use strict";var Rwt=K(),Dwt=z0();Rwt({target:"WeakMap",stat:!0,forced:!0},{from:Dwt})});var Hde=T(()=>{"use strict";var Lwt=K(),kwt=j0();Lwt({target:"WeakMap",stat:!0,forced:!0},{of:kwt})});var Xde=T(()=>{"use strict";var Nwt=K(),Fwt=jF(),BF=jT(),zwt=BF.get,jwt=BF.has,Kde=BF.set;Nwt({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var n=Fwt(this),i,a;return jwt(n,t)?(i=zwt(n,t),"update"in r&&(i=r.update(i,t,n),Kde(n,t,i)),i):(a=r.insert(t,n),Kde(n,t,a),a)}})});var Yde=T(()=>{"use strict";var Bwt=K(),Uwt=ST();Bwt({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:Uwt})});var BT=T((AYt,Jde)=>{"use strict";var UF=Oe(),VF=WeakSet.prototype;Jde.exports={WeakSet,add:UF(VF.add),has:UF(VF.has),remove:UF(VF.delete)}});var $F=T((qYt,Qde)=>{"use strict";var Vwt=BT().has;Qde.exports=function(e){return Vwt(e),e}});var eme=T(()=>{"use strict";var $wt=K(),Gwt=$F(),Wwt=BT().add;$wt({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=Gwt(this),r=0,n=arguments.length;r<n;r++)Wwt(t,arguments[r]);return t}})});var tme=T(()=>{"use strict";var Zwt=K(),Hwt=$F(),Kwt=BT().remove;Zwt({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Hwt(this),r=!0,n,i=0,a=arguments.length;i<a;i++)n=Kwt(t,arguments[i]),r=r&&n;return!!r}})});var rme=T(()=>{"use strict";var Xwt=K(),Ywt=z0();Xwt({target:"WeakSet",stat:!0,forced:!0},{from:Ywt})});var nme=T(()=>{"use strict";var Jwt=K(),Qwt=j0();Jwt({target:"WeakSet",stat:!0,forced:!0},{of:Qwt})});var GF=T((FYt,ome)=>{"use strict";var ime="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ame={};for(W0=0;W0<66;W0++)ame[ime.charAt(W0)]=W0;var W0;ome.exports={itoc:ime,ctoi:ame}});var fme=T(()=>{"use strict";var ebt=K(),tbt=ot(),cme=St(),ZF=Oe(),rbt=Ye(),HF=Fe(),nbt=At(),ibt=Ft(),abt=us(),WF=GF().ctoi,hme=/[^\d+/a-z]/i,obt=/[\t\n\f\r ]+/g,sbt=/[=]{1,2}$/,Z0=cme("atob"),ubt=String.fromCharCode,lbt=ZF("".charAt),sme=ZF("".replace),cbt=ZF(hme.exec),KF=HF(function(){return Z0(" ")!==""}),XF=!HF(function(){Z0("a")}),ume=!KF&&!XF&&!HF(function(){Z0()}),lme=!KF&&!XF&&Z0.length!==1;ebt({global:!0,bind:!0,enumerable:!0,forced:KF||XF||ume||lme},{atob:function(t){if(abt(arguments.length,1),ume||lme)return rbt(Z0,tbt,t);var r=sme(nbt(t),obt,""),n="",i=0,a=0,h,p;if(r.length%4===0&&(r=sme(r,sbt,"")),r.length%4===1||cbt(hme,r))throw new(cme("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;h=lbt(r,i++);)ibt(WF,h)&&(p=a%4?p*64+WF[h]:WF[h],a++%4&&(n+=ubt(255&p>>(-2*a&6))));return n}})});var wme=T(()=>{"use strict";var hbt=K(),fbt=ot(),yme=St(),_me=Oe(),pbt=Ye(),xme=Fe(),pme=At(),dbt=us(),mbt=GF().itoc,fp=yme("btoa"),dme=_me("".charAt),vbt=_me("".charCodeAt),mme=!!fp&&!xme(function(){fp()}),vme=!!fp&&xme(function(){return fp(null)!=="bnVsbA=="}),gme=!!fp&&fp.length!==1;hbt({global:!0,bind:!0,enumerable:!0,forced:mme||vme||gme},{btoa:function(t){if(dbt(arguments.length,1),mme||vme||gme)return pbt(fp,fbt,pme(t));for(var r=pme(t),n="",i=0,a=mbt,h,p;dme(r,i)||(a="=",i%1);){if(p=vbt(r,i+=3/4),p>255)throw new(yme("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");h=h<<8|p,n+=dme(a,63&h>>8-i%1*8)}return n}})});var YF=T((VYt,bme)=>{"use strict";bme.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var QF=T(($Yt,Sme)=>{"use strict";var gbt=T_(),JF=gbt("span").classList,Eme=JF&&JF.constructor&&JF.constructor.prototype;Sme.exports=Eme===Object.prototype?void 0:Eme});var Ame=T(()=>{"use strict";var Tme=ot(),Ime=YF(),ybt=QF(),ez=eR(),_bt=Ln(),Cme=function(e){if(e&&e.forEach!==ez)try{_bt(e,"forEach",ez)}catch(t){e.forEach=ez}};for(UT in Ime)Ime[UT]&&Cme(Tme[UT]&&Tme[UT].prototype);var UT;Cme(ybt)});var Dme=T(()=>{"use strict";var qme=ot(),Mme=YF(),xbt=QF(),H0=G_(),tz=Ln(),Ome=yt(),rz=Ome("iterator"),Pme=Ome("toStringTag"),nz=H0.values,Rme=function(e,t){if(e){if(e[rz]!==nz)try{tz(e,rz,nz)}catch(n){e[rz]=nz}if(e[Pme]||tz(e,Pme,t),Mme[t]){for(var r in H0)if(e[r]!==H0[r])try{tz(e,r,H0[r])}catch(n){e[r]=H0[r]}}}};for(VT in Mme)Rme(qme[VT]&&qme[VT].prototype,VT);var VT;Rme(xbt,"DOMTokenList")});var iz=T((KYt,Lme)=>{"use strict";Lme.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var Wme=T(()=>{"use strict";var wbt=K(),bbt=Hk(),WT=St(),cz=Fe(),Ebt=An(),hz=Ha(),ZT=Fr().f,Sbt=br(),$T=en(),GT=Ft(),Tbt=ra(),Ibt=Qe(),Fme=NO(),kme=Wf(),ov=iz(),Cbt=fE(),zme=vr(),fz=gt(),jme=Ut(),sv="DOMException",lz="DATA_CLONE_ERR",KT=WT("Error"),Dl=WT(sv)||function(){try{var e=WT("MessageChannel")||bbt("worker_threads").MessageChannel;new e().port1.postMessage(new WeakMap)}catch(t){if(t.name===lz&&t.code===25)return t.constructor}}(),Abt=Dl&&Dl.prototype,Bme=KT.prototype,qbt=zme.set,Pbt=zme.getterFor(sv),Mbt="stack"in new KT(sv),Ume=function(e){return GT(ov,e)&&ov[e].m?ov[e].c:0},pz=function(){Tbt(this,X0);var t=arguments.length,r=kme(t<1?void 0:arguments[0]),n=kme(t<2?void 0:arguments[1],"Error"),i=Ume(n);if(qbt(this,{type:sv,name:n,message:r,code:i}),fz||(this.name=n,this.message=r,this.code=i),Mbt){var a=new KT(r);a.name=sv,ZT(this,"stack",hz(1,Cbt(a.stack,1)))}},X0=pz.prototype=Ebt(Bme),Vme=function(e){return{enumerable:!0,configurable:!0,get:e}},az=function(e){return Vme(function(){return Pbt(this)[e]})};fz&&($T(X0,"code",az("code")),$T(X0,"message",az("message")),$T(X0,"name",az("name")));ZT(X0,"constructor",hz(1,pz));var XT=cz(function(){return!(new Dl instanceof KT)}),$me=XT||cz(function(){return Bme.toString!==Fme||String(new Dl(1,2))!=="2: 1"}),Gme=XT||cz(function(){return new Dl(1,"DataCloneError").code!==25}),Obt=XT||Dl[lz]!==25||Abt[lz]!==25,Nme=jme?$me||Gme||Obt:XT;wbt({global:!0,constructor:!0,forced:Nme},{DOMException:Nme?pz:Dl});var Y0=WT(sv),HT=Y0.prototype;$me&&(jme||Dl===Y0)&&Sbt(HT,"toString",Fme);Gme&&fz&&Dl===Y0&&$T(HT,"code",Vme(function(){return Ume(Ibt(this).name)}));for(oz in ov)GT(ov,oz)&&(sz=ov[oz],K0=sz.s,uz=hz(6,sz.c),GT(Y0,K0)||ZT(Y0,K0,uz),GT(HT,K0)||ZT(HT,K0,uz));var sz,K0,uz,oz});var Qme=T(()=>{"use strict";var Rbt=K(),Dbt=ot(),wz=St(),_z=Ha(),xz=Fr().f,Zme=Ft(),Lbt=ra(),kbt=Gf(),Hme=Wf(),dz=iz(),Nbt=fE(),Fbt=gt(),Yme=Ut(),Q0="DOMException",Jme=wz("Error"),ex=wz(Q0),bz=function(){Lbt(this,zbt);var t=arguments.length,r=Hme(t<1?void 0:arguments[0]),n=Hme(t<2?void 0:arguments[1],"Error"),i=new ex(r,n),a=new Jme(r);return a.name=Q0,xz(i,"stack",_z(1,Nbt(a.stack,1))),kbt(i,this,bz),i},zbt=bz.prototype=ex.prototype,jbt="stack"in new Jme(Q0),Bbt="stack"in new ex(1,2),mz=ex&&Fbt&&Object.getOwnPropertyDescriptor(Dbt,Q0),Ubt=!!mz&&!(mz.writable&&mz.configurable),Kme=jbt&&!Ubt&&!Bbt;Rbt({global:!0,constructor:!0,forced:Yme||Kme},{DOMException:Kme?bz:ex});var J0=wz(Q0),Xme=J0.prototype;if(Xme.constructor!==J0){Yme||xz(Xme,"constructor",_z(1,J0));for(vz in dz)Zme(dz,vz)&&(gz=dz[vz],yz=gz.s,Zme(J0,yz)||xz(J0,yz,_z(6,gz.c)))}var gz,yz,vz});var tve=T(()=>{"use strict";var Vbt=St(),$bt=Ya(),eve="DOMException";$bt(Vbt(eve),eve)});var nve=T(()=>{"use strict";var Gbt=K(),Wbt=ot(),rve=l0().clear;Gbt({global:!0,bind:!0,enumerable:!0,forced:Wbt.clearImmediate!==rve},{clearImmediate:rve})});var ave=T((iJt,ive)=>{"use strict";ive.exports=typeof Bun=="function"&&Bun&&typeof Bun.version=="string"});var YT=T((aJt,sve)=>{"use strict";var ove=ot(),Zbt=ta(),Hbt=qt(),Kbt=ave(),Xbt=du(),Ybt=xl(),Jbt=us(),Qbt=ove.Function,eEt=/MSIE .\./.test(Xbt)||Kbt&&function(){var e=ove.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}();sve.exports=function(e,t){var r=t?2:1;return eEt?function(n,i){var a=Jbt(arguments.length,1)>r,h=Hbt(n)?n:Qbt(n),p=a?Ybt(arguments,r):[],g=a?function(){Zbt(h,this,p)}:h;return t?e(g,i):e(g)}:e}});var hve=T(()=>{"use strict";var tEt=K(),cve=ot(),uve=l0().set,rEt=YT(),lve=cve.setImmediate?rEt(uve,!1):uve;tEt({global:!0,bind:!0,enumerable:!0,forced:cve.setImmediate!==lve},{setImmediate:lve})});var fve=T(()=>{"use strict";nve();hve()});var pve=T(()=>{"use strict";var nEt=K(),iEt=ot(),aEt=WD(),oEt=Tt(),sEt=us(),uEt=yu(),lEt=iEt.process;nEt({global:!0,enumerable:!0,dontCallGetSet:!0},{queueMicrotask:function(t){sEt(arguments.length,1),oEt(t);var r=uEt&&lEt.domain;aEt(r?r.bind(t):t)}})});var mve=T(()=>{"use strict";var cEt=K(),Ah=ot(),hEt=en(),fEt=gt(),pEt=TypeError,dEt=Object.defineProperty,dve=Ah.self!==Ah;try{fEt?(JT=Object.getOwnPropertyDescriptor(Ah,"self"),(dve||!JT||!JT.get||!JT.enumerable)&&hEt(Ah,"self",{get:function(){return Ah},set:function(t){if(this!==Ah)throw new pEt("Illegal invocation");dEt(Ah,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):cEt({global:!0,simple:!0,forced:dve},{self:Ah})}catch(e){}var JT});var Mve=T(()=>{"use strict";var mEt=Ut(),vEt=K(),yn=ot(),Az=St(),ix=Oe(),qz=Fe(),gEt=oh(),eI=qt(),yEt=zs(),_Et=Dn(),tI=Pt(),xEt=vl(),wEt=gn(),_ve=Qe(),rx=Xa(),xve=Ft(),bEt=rs(),Ez=Ln(),pp=Ht(),EEt=us(),SEt=Fm(),rI=Ia(),wve=na(),vve=iT(),bve=RO(),Eve=eT(),tx=yn.Object,TEt=yn.Array,Sve=yn.Date,ax=yn.Error,IEt=yn.EvalError,CEt=yn.RangeError,AEt=yn.ReferenceError,qEt=yn.SyntaxError,Tve=yn.TypeError,PEt=yn.URIError,MEt=yn.PerformanceMark,lv=yn.WebAssembly,OEt=lv&&lv.CompileError||ax,REt=lv&&lv.LinkError||ax,DEt=lv&&lv.RuntimeError||ax,Ph=Az("DOMException"),nx=rI.Map,ox=rI.has,Pz=rI.get,dp=rI.set,Ive=wve.Set,Cve=wve.add,Ave=Az("Object","keys"),gve=ix([].push),LEt=ix((!0).valueOf),kEt=ix(1 .valueOf),NEt=ix("".valueOf),FEt=ix(Sve.prototype.getTime),Iz=gEt("structuredClone"),cv="DataCloneError",QT="Transferring",qve=function(e){return!qz(function(){var t=new yn.Set([7]),r=e(t),n=e(tx(7));return r===t||!r.has(7)||typeof n!="object"||+n!=7})&&e},yve=function(e,t){return!qz(function(){var r=new t,n=e({a:r,b:r});return!(n&&n.a===n.b&&n.a instanceof t&&n.a.stack===r.stack)})},zEt=function(e){return!qz(function(){var t=e(new yn.AggregateError([1],Iz,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==Iz||t.cause!==3})},uv=yn.structuredClone,jEt=mEt||!yve(uv,ax)||!yve(uv,Ph)||!zEt(uv),BEt=!uv&&qve(function(e){return new MEt(Iz,{detail:e}).detail}),qh=qve(uv)||BEt,Sz=function(e){throw new Ph("Uncloneable type: "+e,cv)},ro=function(e,t){throw new Ph((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",cv)},Tz=function(e,t){return qh||ro(t),qh(e)},UEt=function(){var e;try{e=new yn.DataTransfer}catch(t){try{e=new yn.ClipboardEvent("").clipboardData}catch(r){}}return e&&e.items&&e.files?e:null},Mz=function(e,t,r){if(ox(t,e))return Pz(t,e);var n=r||rx(e),i,a,h,p,g,b;if(n==="SharedArrayBuffer")qh?i=qh(e):i=e;else{var E=yn.DataView;!E&&typeof e.slice!="function"&&ro("ArrayBuffer");try{if(typeof e.slice=="function"&&!e.resizable)i=e.slice(0);else for(a=e.byteLength,h=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,i=new ArrayBuffer(a,h),p=new E(e),g=new E(i),b=0;b<a;b++)g.setUint8(b,p.getUint8(b))}catch(q){throw new Ph("ArrayBuffer is detached",cv)}}return dp(t,e,i),i},Pve=function(e,t,r,n,i){var a=yn[t];return tI(a)||ro(t),new a(Mz(e.buffer,i),r,n)},Cz=function(e,t,r){this.object=e,this.type=t,this.metadata=r},Aa=function(e,t,r){if(xEt(e)&&Sz("Symbol"),!tI(e))return e;if(t){if(ox(t,e))return Pz(t,e)}else t=new nx;var n=rx(e),i,a,h,p,g,b,E,q;switch(n){case"Array":h=TEt(pp(e));break;case"Object":h={};break;case"Map":h=new nx;break;case"Set":h=new Ive;break;case"RegExp":h=new RegExp(e.source,SEt(e));break;case"Error":switch(a=e.name,a){case"AggregateError":h=new(Az("AggregateError"))([]);break;case"EvalError":h=new IEt;break;case"RangeError":h=new CEt;break;case"ReferenceError":h=new AEt;break;case"SyntaxError":h=new qEt;break;case"TypeError":h=new Tve;break;case"URIError":h=new PEt;break;case"CompileError":h=new OEt;break;case"LinkError":h=new REt;break;case"RuntimeError":h=new DEt;break;default:h=new ax;}break;case"DOMException":h=new Ph(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":h=r?new Cz(e,n):Mz(e,t,n);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":b=n==="DataView"?e.byteLength:e.length,h=r?new Cz(e,n,{offset:e.byteOffset,length:b}):Pve(e,n,e.byteOffset,b,t);break;case"DOMQuad":try{h=new DOMQuad(Aa(e.p1,t,r),Aa(e.p2,t,r),Aa(e.p3,t,r),Aa(e.p4,t,r))}catch(P){h=Tz(e,n)}break;case"File":if(qh)try{h=qh(e),rx(h)!==n&&(h=void 0)}catch(P){}if(!h)try{h=new File([e],e.name,e)}catch(P){}h||ro(n);break;case"FileList":if(p=UEt(),p){for(g=0,b=pp(e);g<b;g++)p.items.add(Aa(e[g],t,r));h=p.files}else h=Tz(e,n);break;case"ImageData":try{h=new ImageData(Aa(e.data,t,r),e.width,e.height,{colorSpace:e.colorSpace})}catch(P){h=Tz(e,n)}break;default:if(qh)h=qh(e);else switch(n){case"BigInt":h=tx(e.valueOf());break;case"Boolean":h=tx(LEt(e));break;case"Number":h=tx(kEt(e));break;case"String":h=tx(NEt(e));break;case"Date":h=new Sve(FEt(e));break;case"Blob":try{h=e.slice(0,e.size,e.type)}catch(P){ro(n)}break;case"DOMPoint":case"DOMPointReadOnly":i=yn[n];try{h=i.fromPoint?i.fromPoint(e):new i(e.x,e.y,e.z,e.w)}catch(P){ro(n)}break;case"DOMRect":case"DOMRectReadOnly":i=yn[n];try{h=i.fromRect?i.fromRect(e):new i(e.x,e.y,e.width,e.height)}catch(P){ro(n)}break;case"DOMMatrix":case"DOMMatrixReadOnly":i=yn[n];try{h=i.fromMatrix?i.fromMatrix(e):new i(e)}catch(P){ro(n)}break;case"AudioData":case"VideoFrame":eI(e.clone)||ro(n);try{h=e.clone()}catch(P){Sz(n)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":ro(n);default:Sz(n);}}switch(dp(t,e,h),n){case"Array":case"Object":for(E=Ave(e),g=0,b=pp(E);g<b;g++)q=E[g],bEt(h,q,Aa(e[q],t,r));break;case"Map":e.forEach(function(P,L){dp(h,Aa(L,t,r),Aa(P,t,r))});break;case"Set":e.forEach(function(P){Cve(h,Aa(P,t,r))});break;case"Error":Ez(h,"message",Aa(e.message,t,r)),xve(e,"cause")&&Ez(h,"cause",Aa(e.cause,t,r)),a==="AggregateError"&&(h.errors=Aa(e.errors,t,r));case"DOMException":bve&&Ez(h,"stack",Aa(e.stack,t,r));}return h},Ll=function(e,t){if(!tI(e))return e;if(ox(t,e))return Pz(t,e);var r,n,i,a,h,p,g,b;if(e instanceof Cz)switch(r=e.type,n=e.object,r){case"ArrayBuffer":case"SharedArrayBuffer":b=Mz(n,t,r);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":i=e.metadata,b=Pve(n,r,i.offset,i.length,t);}else switch(rx(e)){case"Array":case"Object":for(p=Ave(e),a=0,h=pp(p);a<h;a++)g=p[a],e[g]=Ll(e[g],t);break;case"Map":b=new nx,e.forEach(function(E,q){dp(b,Ll(q,t),Ll(E,t))});break;case"Set":b=new Ive,e.forEach(function(E){Cve(b,Ll(E,t))});break;case"Error":e.message=Ll(e.message,t),xve(e,"cause")&&(e.cause=Ll(e.cause,t)),e.name==="AggregateError"&&(e.errors=Ll(e.errors,t));case"DOMException":bve&&(e.stack=Ll(e.stack,t));}return dp(t,e,b||e),b||e},VEt=function(e,t){if(!tI(e))throw new Tve("Transfer option cannot be converted to a sequence");var r=[];wEt(e,function(P){gve(r,_ve(P))});for(var n=0,i=pp(r),a=[],h,p,g,b,E,q;n<i;){if(h=r[n++],p=rx(h),p==="ArrayBuffer"){gve(a,h);continue}if(ox(t,h))throw new Ph("Duplicate transferable",cv);if(Eve)b=uv(h,{transfer:[h]});else switch(p){case"ImageBitmap":g=yn.OffscreenCanvas,yEt(g)||ro(p,QT);try{E=new g(h.width,h.height),q=E.getContext("bitmaprenderer"),q.transferFromImageBitmap(h),b=E.transferToImageBitmap()}catch(P){}break;case"AudioData":case"VideoFrame":(!eI(h.clone)||!eI(h.close))&&ro(p,QT);try{b=h.clone(),h.close()}catch(P){}break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":ro(p,QT);}if(b===void 0)throw new Ph("This object cannot be transferred: "+p,cv);dp(t,h,b)}return a},$Et=function(e,t){for(var r=0,n=pp(e),i,a;r<n;){if(i=e[r++],ox(t,i))throw new Ph("Duplicate transferable",cv);vve?a=vve(i,void 0,!0):(eI(i.transfer)||ro("ArrayBuffer",QT),a=i.transfer()),dp(t,i,a)}};vEt({global:!0,enumerable:!0,sham:!Eve,forced:jEt},{structuredClone:function(t){var r=EEt(arguments.length,1)>1&&!_Et(arguments[1])?_ve(arguments[1]):void 0,n=r?r.transfer:void 0,i=!1,a,h;n!==void 0&&(a=new nx,h=VEt(n,a),i=!!pp(h));var p=Aa(t,a,i);return i&&(a=new nx,$Et(n,a),p=Ll(p,a)),p}})});var Dve=T(()=>{"use strict";var GEt=K(),Rve=ot(),WEt=YT(),Ove=WEt(Rve.setInterval,!0);GEt({global:!0,bind:!0,forced:Rve.setInterval!==Ove},{setInterval:Ove})});var Nve=T(()=>{"use strict";var ZEt=K(),kve=ot(),HEt=YT(),Lve=HEt(kve.setTimeout,!0);ZEt({global:!0,bind:!0,forced:kve.setTimeout!==Lve},{setTimeout:Lve})});var Fve=T(()=>{"use strict";Dve();Nve()});var nI=T((bJt,jve)=>{"use strict";var KEt=Fe(),XEt=yt(),YEt=gt(),zve=Ut(),JEt=XEt("iterator");jve.exports=!KEt(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",t.forEach(function(i,a){t.delete("b"),n+=a+i}),r.delete("a",2),r.delete("b",void 0),zve&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(zve||!YEt)||!t.sort||e.href!=="http://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[JEt]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("http://x",void 0).host!=="x"})});var Kve=T((EJt,Hve)=>{"use strict";var mp=Oe(),Oz=2147483647,sx=36,Gve=1,Lz=26,QEt=38,eSt=700,tSt=72,rSt=128,nSt="-",iSt=/[^\0-\u007E]/,Wve=/[.\u3002\uFF0E\uFF61]/g,Bve="Overflow: input needs wider integers to process",Rz=sx-Gve,Uve=RangeError,aSt=mp(Wve.exec),hv=Math.floor,Dz=String.fromCharCode,Vve=mp("".charCodeAt),Zve=mp([].join),Mh=mp([].push),oSt=mp("".replace),sSt=mp("".split),uSt=mp("".toLowerCase),lSt=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=Vve(e,r++);if(i>=55296&&i<=56319&&r<n){var a=Vve(e,r++);(a&64512)===56320?Mh(t,((i&1023)<<10)+(a&1023)+65536):(Mh(t,i),r--)}else Mh(t,i)}return t},$ve=function(e){return e+22+75*(e<26)},cSt=function(e,t,r){var n=0;for(e=r?hv(e/eSt):e>>1,e+=hv(e/t);e>Rz*Lz>>1;)e=hv(e/Rz),n+=sx;return hv(n+(Rz+1)*e/(e+QEt))},hSt=function(e){var t=[];e=lSt(e);var r=e.length,n=rSt,i=0,a=tSt,h,p;for(h=0;h<e.length;h++)p=e[h],p<128&&Mh(t,Dz(p));var g=t.length,b=g;for(g&&Mh(t,nSt);b<r;){var E=Oz;for(h=0;h<e.length;h++)p=e[h],p>=n&&p<E&&(E=p);var q=b+1;if(E-n>hv((Oz-i)/q))throw new Uve(Bve);for(i+=(E-n)*q,n=E,h=0;h<e.length;h++){if(p=e[h],p<n&&++i>Oz)throw new Uve(Bve);if(p===n){for(var P=i,L=sx;;){var W=L<=a?Gve:L>=a+Lz?Lz:L-a;if(P<W)break;var Q=P-W,V=sx-W;Mh(t,Dz($ve(W+Q%V))),P=hv(Q/V),L+=sx}Mh(t,Dz($ve(P))),a=cSt(i,q,b===g),i=0,b++}}i++,n++}return Zve(t,"")};Hve.exports=function(e){var t=[],r=sSt(oSt(uSt(e),Wve,"."),"."),n,i;for(n=0;n<r.length;n++)i=r[n],Mh(t,aSt(iSt,i)?"xn--"+hSt(i):i);return Zve(t,".")}});var Gz=T((SJt,mge)=>{"use strict";G_();var jz=K(),dv=ot(),iI=Ye(),Cu=Oe(),pv=gt(),sge=nI(),uge=br(),fSt=en(),pSt=os(),dSt=Ya(),mSt=hh(),Vz=vr(),lge=ra(),kz=qt(),vSt=Ft(),gSt=Pr(),ySt=Xa(),_St=Qe(),cge=Pt(),qa=At(),xSt=An(),Xve=Ha(),Bz=lh(),wSt=bl(),fv=us(),bSt=yt(),ESt=AE(),SSt=bSt("iterator"),lx="URLSearchParams",hge=lx+"Iterator",fge=Vz.set,cs=Vz.getterFor(lx),TSt=Vz.getterFor(hge),ISt=Object.getOwnPropertyDescriptor,$z=function(e){if(!pv)return dv[e];var t=ISt(dv,e);return t&&t.value},Yve=$z("fetch"),oI=$z("Request"),ux=$z("Headers"),Nz=oI&&oI.prototype,Jve=ux&&ux.prototype,CSt=dv.RegExp,ASt=dv.TypeError,pge=dv.decodeURIComponent,qSt=dv.encodeURIComponent,PSt=Cu("".charAt),Qve=Cu([].join),vp=Cu([].push),Uz=Cu("".replace),MSt=Cu([].shift),ege=Cu([].splice),tge=Cu("".split),OSt=Cu("".slice),RSt=/\+/g,rge=Array(4),DSt=function(e){return rge[e-1]||(rge[e-1]=CSt("((?:%[\\da-f]{2}){"+e+"})","gi"))},LSt=function(e){try{return pge(e)}catch(t){return e}},nge=function(e){var t=Uz(e,RSt," "),r=4;try{return pge(t)}catch(n){for(;r;)t=Uz(t,DSt(r--),LSt);return t}},kSt=/[!'()~]|%20/g,NSt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},FSt=function(e){return NSt[e]},ige=function(e){return Uz(qSt(e),kSt,FSt)},Fz=mSt(function(t,r){fge(this,{type:hge,iterator:Bz(cs(t).entries),kind:r})},"Iterator",function(){var t=TSt(this),r=t.kind,n=t.iterator.next(),i=n.value;return n.done||(n.value=r==="keys"?i.key:r==="values"?i.value:[i.key,i.value]),n},!0),dge=function(e){this.entries=[],this.url=null,e!==void 0&&(cge(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?PSt(e,0)==="?"?OSt(e,1):e:qa(e)))};dge.prototype={type:lx,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t=wSt(e),r,n,i,a,h,p,g;if(t)for(r=Bz(e,t),n=r.next;!(i=iI(n,r)).done;){if(a=Bz(_St(i.value)),h=a.next,(p=iI(h,a)).done||(g=iI(h,a)).done||!iI(h,a).done)throw new ASt("Expected sequence with length 2");vp(this.entries,{key:qa(p.value),value:qa(g.value)})}else for(var b in e)vSt(e,b)&&vp(this.entries,{key:b,value:qa(e[b])})},parseQuery:function(e){if(e)for(var t=tge(e,"&"),r=0,n,i;r<t.length;)n=t[r++],n.length&&(i=tge(n,"="),vp(this.entries,{key:nge(MSt(i)),value:nge(Qve(i,"="))}))},serialize:function(){for(var e=this.entries,t=[],r=0,n;r<e.length;)n=e[r++],vp(t,ige(n.key)+"="+ige(n.value));return Qve(t,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var sI=function(){lge(this,mv);var t=arguments.length>0?arguments[0]:void 0,r=fge(this,new dge(t));pv||(this.size=r.entries.length)},mv=sI.prototype;pSt(mv,{append:function(t,r){var n=cs(this);fv(arguments.length,2),vp(n.entries,{key:qa(t),value:qa(r)}),pv||this.length++,n.updateURL()},delete:function(e){for(var t=cs(this),r=fv(arguments.length,1),n=t.entries,i=qa(e),a=r<2?void 0:arguments[1],h=a===void 0?a:qa(a),p=0;p<n.length;){var g=n[p];if(g.key===i&&(h===void 0||g.value===h)){if(ege(n,p,1),h!==void 0)break}else p++}pv||(this.size=n.length),t.updateURL()},get:function(t){var r=cs(this).entries;fv(arguments.length,1);for(var n=qa(t),i=0;i<r.length;i++)if(r[i].key===n)return r[i].value;return null},getAll:function(t){var r=cs(this).entries;fv(arguments.length,1);for(var n=qa(t),i=[],a=0;a<r.length;a++)r[a].key===n&&vp(i,r[a].value);return i},has:function(t){for(var r=cs(this).entries,n=fv(arguments.length,1),i=qa(t),a=n<2?void 0:arguments[1],h=a===void 0?a:qa(a),p=0;p<r.length;){var g=r[p++];if(g.key===i&&(h===void 0||g.value===h))return!0}return!1},set:function(t,r){var n=cs(this);fv(arguments.length,1);for(var i=n.entries,a=!1,h=qa(t),p=qa(r),g=0,b;g<i.length;g++)b=i[g],b.key===h&&(a?ege(i,g--,1):(a=!0,b.value=p));a||vp(i,{key:h,value:p}),pv||(this.size=i.length),n.updateURL()},sort:function(){var t=cs(this);ESt(t.entries,function(r,n){return r.key>n.key?1:-1}),t.updateURL()},forEach:function(t){for(var r=cs(this).entries,n=gSt(t,arguments.length>1?arguments[1]:void 0),i=0,a;i<r.length;)a=r[i++],n(a.value,a.key,this)},keys:function(){return new Fz(this,"keys")},values:function(){return new Fz(this,"values")},entries:function(){return new Fz(this,"entries")}},{enumerable:!0});uge(mv,SSt,mv.entries,{name:"entries"});uge(mv,"toString",function(){return cs(this).serialize()},{enumerable:!0});pv&&fSt(mv,"size",{get:function(){return cs(this).entries.length},configurable:!0,enumerable:!0});dSt(sI,lx);jz({global:!0,constructor:!0,forced:!sge},{URLSearchParams:sI});!sge&&kz(ux)&&(age=Cu(Jve.has),oge=Cu(Jve.set),zz=function(e){if(cge(e)){var t=e.body,r;if(ySt(t)===lx)return r=e.headers?new ux(e.headers):new ux,age(r,"content-type")||oge(r,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),xSt(e,{body:Xve(0,qa(t)),headers:Xve(0,r)})}return e},kz(Yve)&&jz({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return Yve(t,arguments.length>1?zz(arguments[1]):{})}}),kz(oI)&&(aI=function(t){return lge(this,Nz),new oI(t,arguments.length>1?zz(arguments[1]):{})},Nz.constructor=aI,aI.prototype=Nz,jz({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:aI})));var age,oge,zz,aI;mge.exports={URLSearchParams:sI,getState:cs}});var Rge=T(()=>{"use strict";ML();var zSt=K(),uj=gt(),jSt=nI(),lj=ot(),vge=Pr(),ms=Oe(),fI=br(),hs=en(),BSt=ra(),aj=Ft(),cj=bD(),vv=tR(),Bs=Bf(),USt=sp().codeAt,VSt=Kve(),Nl=At(),$St=Ya(),GSt=us(),Cge=Gz(),Age=vr(),WSt=Age.set,pI=Age.getterFor("URL"),ZSt=Cge.URLSearchParams,HSt=Cge.getState,cx=lj.URL,oj=lj.TypeError,dI=lj.parseInt,KSt=Math.floor,gge=Math.pow,ds=ms("".charAt),Us=ms(/./.exec),fx=ms([].join),XSt=ms(1 .toString),YSt=ms([].pop),yv=ms([].push),Wz=ms("".replace),JSt=ms([].shift),QSt=ms("".split),dx=ms("".slice),mI=ms("".toLowerCase),eTt=ms([].unshift),tTt="Invalid authority",Zz="Invalid scheme",gp="Invalid host",yge="Invalid port",qge=/[a-z]/i,rTt=/[\d+-.a-z]/i,sj=/\d/,nTt=/^0x/i,iTt=/^[0-7]+$/,aTt=/^\d+$/,Pge=/^[\da-f]+$/i,oTt=/[\0\t\n\r #%/:<>?@[\\\]^|]/,sTt=/[\0\t\n\r #/:<>?@[\\\]^|]/,uTt=/^[\u0000-\u0020]+/,lTt=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,cTt=/[\t\n\r]/g,fs,hTt=function(e){var t=QSt(e,"."),r,n,i,a,h,p,g;if(t.length&&t[t.length-1]===""&&t.length--,r=t.length,r>4)return e;for(n=[],i=0;i<r;i++){if(a=t[i],a==="")return e;if(h=10,a.length>1&&ds(a,0)==="0"&&(h=Us(nTt,a)?16:8,a=dx(a,h===8?1:2)),a==="")p=0;else{if(!Us(h===10?aTt:h===8?iTt:Pge,a))return e;p=dI(a,h)}yv(n,p)}for(i=0;i<r;i++)if(p=n[i],i===r-1){if(p>=gge(256,5-r))return null}else if(p>255)return null;for(g=YSt(n),i=0;i<n.length;i++)g+=n[i]*gge(256,3-i);return g},fTt=function(e){var t=[0,0,0,0,0,0,0,0],r=0,n=null,i=0,a,h,p,g,b,E,q,P=function(){return ds(e,i)};if(P()===":"){if(ds(e,1)!==":")return;i+=2,r++,n=r}for(;P();){if(r===8)return;if(P()===":"){if(n!==null)return;i++,r++,n=r;continue}for(a=h=0;h<4&&Us(Pge,P());)a=a*16+dI(P(),16),i++,h++;if(P()==="."){if(h===0||(i-=h,r>6))return;for(p=0;P();){if(g=null,p>0)if(P()==="."&&p<4)i++;else return;if(!Us(sj,P()))return;for(;Us(sj,P());){if(b=dI(P(),10),g===null)g=b;else{if(g===0)return;g=g*10+b}if(g>255)return;i++}t[r]=t[r]*256+g,p++,(p===2||p===4)&&r++}if(p!==4)return;break}else if(P()===":"){if(i++,!P())return}else if(P())return;t[r++]=a}if(n!==null)for(E=r-n,r=7;r!==0&&E>0;)q=t[r],t[r--]=t[n+E-1],t[n+--E]=q;else if(r!==8)return;return t},pTt=function(e){for(var t=null,r=1,n=null,i=0,a=0;a<8;a++)e[a]!==0?(i>r&&(t=n,r=i),n=null,i=0):(n===null&&(n=a),++i);return i>r&&(t=n,r=i),t},hx=function(e){var t,r,n,i;if(typeof e=="number"){for(t=[],r=0;r<4;r++)eTt(t,e%256),e=KSt(e/256);return fx(t,".")}else if(typeof e=="object"){for(t="",n=pTt(e),r=0;r<8;r++)i&&e[r]===0||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=XSt(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},hI={},Mge=cj({},hI,{" ":1,"\"":1,"<":1,">":1,"`":1}),Oge=cj({},Mge,{"#":1,"?":1,"{":1,"}":1}),Hz=cj({},Oge,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Oh=function(e,t){var r=USt(e,0);return r>32&&r<127&&!aj(t,e)?e:encodeURIComponent(e)},uI={ftp:21,file:null,http:80,https:443,ws:80,wss:443},px=function(e,t){var r;return e.length===2&&Us(qge,ds(e,0))&&((r=ds(e,1))===":"||!t&&r==="|")},_ge=function(e){var t;return e.length>1&&px(dx(e,0,2))&&(e.length===2||(t=ds(e,2))==="/"||t==="\\"||t==="?"||t==="#")},dTt=function(e){return e==="."||mI(e)==="%2e"},mTt=function(e){return e=mI(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},Kz={},xge={},Xz={},wge={},bge={},Yz={},Ege={},Sge={},lI={},cI={},Jz={},Qz={},ej={},tj={},Tge={},rj={},gv={},Au={},Ige={},yp={},kl={},hj=function(e,t,r){var n=Nl(e),i,a,h;if(t){if(a=this.parse(n),a)throw new oj(a);this.searchParams=null}else{if(r!==void 0&&(i=new hj(r,!0)),a=this.parse(n,null,i),a)throw new oj(a);h=HSt(new ZSt),h.bindURL(this),this.searchParams=h}};hj.prototype={type:"URL",parse:function(e,t,r){var n=this,i=t||Kz,a=0,h="",p=!1,g=!1,b=!1,E,q,P,L;for(e=Nl(e),t||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,e=Wz(e,uTt,""),e=Wz(e,lTt,"$1")),e=Wz(e,cTt,""),E=vv(e);a<=E.length;){switch(q=E[a],i){case Kz:if(q&&Us(qge,q))h+=mI(q),i=xge;else{if(t)return Zz;i=Xz;continue}break;case xge:if(q&&(Us(rTt,q)||q==="+"||q==="-"||q==="."))h+=mI(q);else if(q===":"){if(t&&(n.isSpecial()!==aj(uI,h)||h==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=h,t){n.isSpecial()&&uI[n.scheme]===n.port&&(n.port=null);return}h="",n.scheme==="file"?i=tj:n.isSpecial()&&r&&r.scheme===n.scheme?i=wge:n.isSpecial()?i=Sge:E[a+1]==="/"?(i=bge,a++):(n.cannotBeABaseURL=!0,yv(n.path,""),i=Ige)}else{if(t)return Zz;h="",i=Xz,a=0;continue}break;case Xz:if(!r||r.cannotBeABaseURL&&q!=="#")return Zz;if(r.cannotBeABaseURL&&q==="#"){n.scheme=r.scheme,n.path=Bs(r.path),n.query=r.query,n.fragment="",n.cannotBeABaseURL=!0,i=kl;break}i=r.scheme==="file"?tj:Yz;continue;case wge:if(q==="/"&&E[a+1]==="/")i=lI,a++;else{i=Yz;continue}break;case bge:if(q==="/"){i=cI;break}else{i=Au;continue}case Yz:if(n.scheme=r.scheme,q===fs)n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Bs(r.path),n.query=r.query;else if(q==="/"||q==="\\"&&n.isSpecial())i=Ege;else if(q==="?")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Bs(r.path),n.query="",i=yp;else if(q==="#")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Bs(r.path),n.query=r.query,n.fragment="",i=kl;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Bs(r.path),n.path.length--,i=Au;continue}break;case Ege:if(n.isSpecial()&&(q==="/"||q==="\\"))i=lI;else if(q==="/")i=cI;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,i=Au;continue}break;case Sge:if(i=lI,q!=="/"||ds(h,a+1)!=="/")continue;a++;break;case lI:if(q!=="/"&&q!=="\\"){i=cI;continue}break;case cI:if(q==="@"){p&&(h="%40"+h),p=!0,P=vv(h);for(var W=0;W<P.length;W++){var Q=P[W];if(Q===":"&&!b){b=!0;continue}var V=Oh(Q,Hz);b?n.password+=V:n.username+=V}h=""}else if(q===fs||q==="/"||q==="?"||q==="#"||q==="\\"&&n.isSpecial()){if(p&&h==="")return tTt;a-=vv(h).length+1,h="",i=Jz}else h+=q;break;case Jz:case Qz:if(t&&n.scheme==="file"){i=rj;continue}else if(q===":"&&!g){if(h==="")return gp;if(L=n.parseHost(h),L)return L;if(h="",i=ej,t===Qz)return}else if(q===fs||q==="/"||q==="?"||q==="#"||q==="\\"&&n.isSpecial()){if(n.isSpecial()&&h==="")return gp;if(t&&h===""&&(n.includesCredentials()||n.port!==null))return;if(L=n.parseHost(h),L)return L;if(h="",i=gv,t)return;continue}else q==="["?g=!0:q==="]"&&(g=!1),h+=q;break;case ej:if(Us(sj,q))h+=q;else if(q===fs||q==="/"||q==="?"||q==="#"||q==="\\"&&n.isSpecial()||t){if(h!==""){var $=dI(h,10);if($>65535)return yge;n.port=n.isSpecial()&&$===uI[n.scheme]?null:$,h=""}if(t)return;i=gv;continue}else return yge;break;case tj:if(n.scheme="file",q==="/"||q==="\\")i=Tge;else if(r&&r.scheme==="file")switch(q){case fs:n.host=r.host,n.path=Bs(r.path),n.query=r.query;break;case"?":n.host=r.host,n.path=Bs(r.path),n.query="",i=yp;break;case"#":n.host=r.host,n.path=Bs(r.path),n.query=r.query,n.fragment="",i=kl;break;default:_ge(fx(Bs(E,a),""))||(n.host=r.host,n.path=Bs(r.path),n.shortenPath()),i=Au;continue;}else{i=Au;continue}break;case Tge:if(q==="/"||q==="\\"){i=rj;break}r&&r.scheme==="file"&&!_ge(fx(Bs(E,a),""))&&(px(r.path[0],!0)?yv(n.path,r.path[0]):n.host=r.host),i=Au;continue;case rj:if(q===fs||q==="/"||q==="\\"||q==="?"||q==="#"){if(!t&&px(h))i=Au;else if(h===""){if(n.host="",t)return;i=gv}else{if(L=n.parseHost(h),L)return L;if(n.host==="localhost"&&(n.host=""),t)return;h="",i=gv}continue}else h+=q;break;case gv:if(n.isSpecial()){if(i=Au,q!=="/"&&q!=="\\")continue}else if(!t&&q==="?")n.query="",i=yp;else if(!t&&q==="#")n.fragment="",i=kl;else if(q!==fs&&(i=Au,q!=="/"))continue;break;case Au:if(q===fs||q==="/"||q==="\\"&&n.isSpecial()||!t&&(q==="?"||q==="#")){if(mTt(h)?(n.shortenPath(),q!=="/"&&!(q==="\\"&&n.isSpecial())&&yv(n.path,"")):dTt(h)?q!=="/"&&!(q==="\\"&&n.isSpecial())&&yv(n.path,""):(n.scheme==="file"&&!n.path.length&&px(h)&&(n.host&&(n.host=""),h=ds(h,0)+":"),yv(n.path,h)),h="",n.scheme==="file"&&(q===fs||q==="?"||q==="#"))for(;n.path.length>1&&n.path[0]==="";)JSt(n.path);q==="?"?(n.query="",i=yp):q==="#"&&(n.fragment="",i=kl)}else h+=Oh(q,Oge);break;case Ige:q==="?"?(n.query="",i=yp):q==="#"?(n.fragment="",i=kl):q!==fs&&(n.path[0]+=Oh(q,hI));break;case yp:!t&&q==="#"?(n.fragment="",i=kl):q!==fs&&(q==="'"&&n.isSpecial()?n.query+="%27":q==="#"?n.query+="%23":n.query+=Oh(q,hI));break;case kl:q!==fs&&(n.fragment+=Oh(q,Mge));break;}a++}},parseHost:function(e){var t,r,n;if(ds(e,0)==="["){if(ds(e,e.length-1)!=="]"||(t=fTt(dx(e,1,-1)),!t))return gp;this.host=t}else if(this.isSpecial()){if(e=VSt(e),Us(oTt,e)||(t=hTt(e),t===null))return gp;this.host=t}else{if(Us(sTt,e))return gp;for(t="",r=vv(e),n=0;n<r.length;n++)t+=Oh(r[n],hI);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return aj(uI,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&(this.scheme!=="file"||t!==1||!px(e[0],!0))&&e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,i=e.host,a=e.port,h=e.path,p=e.query,g=e.fragment,b=t+":";return i!==null?(b+="//",e.includesCredentials()&&(b+=r+(n?":"+n:"")+"@"),b+=hx(i),a!==null&&(b+=":"+a)):t==="file"&&(b+="//"),b+=e.cannotBeABaseURL?h[0]:h.length?"/"+fx(h,"/"):"",p!==null&&(b+="?"+p),g!==null&&(b+="#"+g),b},setHref:function(e){var t=this.parse(e);if(t)throw new oj(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e==="blob")try{return new _v(e.path[0]).origin}catch(r){return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+hx(this.host)+(t!==null?":"+t:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Nl(e)+":",Kz)},getUsername:function(){return this.username},setUsername:function(e){var t=vv(Nl(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=Oh(t[r],Hz)}},getPassword:function(){return this.password},setPassword:function(e){var t=vv(Nl(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=Oh(t[r],Hz)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?hx(e):hx(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Jz)},getHostname:function(){var e=this.host;return e===null?"":hx(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Qz)},getPort:function(){var e=this.port;return e===null?"":Nl(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=Nl(e),e===""?this.port=null:this.parse(e,ej))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+fx(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,gv))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=Nl(e),e===""?this.query=null:(ds(e,0)==="?"&&(e=dx(e,1)),this.query="",this.parse(e,yp)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=Nl(e),e===""){this.fragment=null;return}ds(e,0)==="#"&&(e=dx(e,1)),this.fragment="",this.parse(e,kl)},update:function(){this.query=this.searchParams.serialize()||null}};var _v=function(t){var r=BSt(this,Pa),n=GSt(arguments.length,1)>1?arguments[1]:void 0,i=WSt(r,new hj(t,!1,n));uj||(r.href=i.serialize(),r.origin=i.getOrigin(),r.protocol=i.getProtocol(),r.username=i.getUsername(),r.password=i.getPassword(),r.host=i.getHost(),r.hostname=i.getHostname(),r.port=i.getPort(),r.pathname=i.getPathname(),r.search=i.getSearch(),r.searchParams=i.getSearchParams(),r.hash=i.getHash())},Pa=_v.prototype,ps=function(e,t){return{get:function(){return pI(this)[e]()},set:t&&function(r){return pI(this)[t](r)},configurable:!0,enumerable:!0}};uj&&(hs(Pa,"href",ps("serialize","setHref")),hs(Pa,"origin",ps("getOrigin")),hs(Pa,"protocol",ps("getProtocol","setProtocol")),hs(Pa,"username",ps("getUsername","setUsername")),hs(Pa,"password",ps("getPassword","setPassword")),hs(Pa,"host",ps("getHost","setHost")),hs(Pa,"hostname",ps("getHostname","setHostname")),hs(Pa,"port",ps("getPort","setPort")),hs(Pa,"pathname",ps("getPathname","setPathname")),hs(Pa,"search",ps("getSearch","setSearch")),hs(Pa,"searchParams",ps("getSearchParams")),hs(Pa,"hash",ps("getHash","setHash")));fI(Pa,"toJSON",function(){return pI(this).serialize()},{enumerable:!0});fI(Pa,"toString",function(){return pI(this).serialize()},{enumerable:!0});cx&&(nj=cx.createObjectURL,ij=cx.revokeObjectURL,nj&&fI(_v,"createObjectURL",vge(nj,cx)),ij&&fI(_v,"revokeObjectURL",vge(ij,cx)));var nj,ij;$St(_v,"URL");zSt({global:!0,constructor:!0,forced:!jSt,sham:!uj},{URL:_v})});var Dge=T(()=>{"use strict";Rge()});var Nge=T(()=>{"use strict";var vTt=K(),gTt=St(),yTt=Fe(),_Tt=us(),Lge=At(),xTt=nI(),kge=gTt("URL"),wTt=xTt&&yTt(function(){kge.canParse()});vTt({target:"URL",stat:!0,forced:!wTt},{canParse:function(t){var r=_Tt(arguments.length,1),n=Lge(t),i=r<2||arguments[1]===void 0?void 0:Lge(arguments[1]);try{return!!new kge(n,i)}catch(a){return!1}}})});var Fge=T(()=>{"use strict";var bTt=K(),ETt=Ye();bTt({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return ETt(URL.prototype.toString,this)}})});var zge=T(()=>{"use strict";Gz()});var Vge=T(()=>{"use strict";var STt=br(),vI=Oe(),jge=At(),TTt=us(),Uge=URLSearchParams,gI=Uge.prototype,ITt=vI(gI.append),Bge=vI(gI.delete),CTt=vI(gI.forEach),ATt=vI([].push),fj=new Uge("a=1&a=2&b=3");fj.delete("a",1);fj.delete("b",void 0);fj+""!="a=2"&&STt(gI,"delete",function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&r===void 0)return Bge(this,e);var n=[];CTt(this,function(q,P){ATt(n,{key:P,value:q})}),TTt(t,1);for(var i=jge(e),a=jge(r),h=0,p=0,g=!1,b=n.length,E;h<b;)E=n[h++],g||E.key===i?(g=!0,Bge(this,E.key)):p++;for(;p<b;)E=n[p++],E.key===i&&E.value===a||ITt(this,E.key,E.value)},{enumerable:!0,unsafe:!0})});var Zge=T(()=>{"use strict";var qTt=br(),Gge=Oe(),PTt=At(),MTt=us(),Wge=URLSearchParams,pj=Wge.prototype,OTt=Gge(pj.getAll),RTt=Gge(pj.has),$ge=new Wge("a=1");($ge.has("a",2)||!$ge.has("a",void 0))&&qTt(pj,"has",function(t){var r=arguments.length,n=r<2?void 0:arguments[1];if(r&&n===void 0)return RTt(this,t);var i=OTt(this,t);MTt(r,1);for(var a=PTt(n),h=0;h<i.length;)if(i[h++]===a)return!0;return!1},{enumerable:!0,unsafe:!0})});var Hge=T(()=>{"use strict";var DTt=gt(),LTt=Oe(),kTt=en(),dj=URLSearchParams.prototype,NTt=LTt(dj.forEach);DTt&&!("size"in dj)&&kTt(dj,"size",{get:function(){var t=0;return NTt(this,function(){t++}),t},configurable:!0,enumerable:!0})});var Xge=T((BJt,Kge)=>{"use strict";iZ();hZ();fZ();pZ();dZ();mZ();vZ();gZ();yZ();_Z();xZ();wZ();bZ();EZ();SZ();KZ();eH();UO();xH();WO();CH();MH();RH();kH();NH();zH();BH();YO();JO();WH();ZH();XH();aK();oK();uK();lK();G_();PK();DK();LK();NK();zK();$K();WK();HK();YK();JK();d9();g9();y9();yR();xR();wR();b9();E9();S9();ER();t7();p7();b7();S7();T7();C7();P7();M7();B7();U7();Z7();Y7();Q7();aX();uX();fX();XR();AO();pX();XE();MX();DX();kX();NX();FX();BX();VX();$X();WX();HX();XX();YX();JX();QX();rY();aY();oY();sY();yY();_Y();wY();EY();SY();TY();IY();CY();RY();BY();WY();JY();tJ();oJ();sJ();cJ();fJ();dJ();mJ();wJ();bJ();EJ();IJ();CJ();AJ();PJ();TD();OJ();DJ();kJ();FJ();jJ();BJ();UJ();VJ();KJ();XJ();YJ();eQ();tQ();nQ();aQ();mee();uL();lL();xee();wee();Aee();Mee();Oee();kee();Nee();Fee();zee();jee();Bee();Uee();Zee();Kee();Xee();fte();dte();yS();xte();bte();Tte();Ate();Pte();Mte();Lte();Ute();Gte();Zte();PL();ML();sre();FL();yre();_re();Ere();Sre();Pre();ZL();Nre();Vre();Hre();Xre();QL();nne();une();pne();gne();yne();_ne();xne();wne();bne();Ene();Sne();Tne();Ine();Cne();Ane();qne();nie();iie();aie();oie();sie();uie();lie();cie();hie();dk();die();vie();yie();Eie();Tie();Cie();mk();vk();Mie();Oie();Die();kie();Bie();Vie();Gie();Zie();Kie();Yie();Qie();tae();sae();lae();hae();gae();xae();Tae();Ck();Ak();Cae();Pk();Oae();GS();Xae();Yae();Qae();Ioe();Coe();Aoe();qoe();Poe();Moe();Roe();Doe();Noe();Foe();Boe();Uoe();Goe();Woe();Zoe();Hoe();rse();nse();sse();Ese();Tse();Nse();Use();eue();iue();sue();uue();cue();hue();gue();yue();xue();wue();bue();Eue();Sue();Cue();Aue();Lue();Bue();Vue();$ue();Gue();Zue();Hue();Que();tle();nle();ile();sle();ule();lle();dle();Sle();Cle();qle();Ple();Ole();Rle();Fle();zle();jle();Ble();Ule();$le();Gle();Wle();Hle();Kle();Yle();ece();fce();wce();Ece();Tce();Ice();Ace();qce();Pce();Dce();Lce();Fce();jce();Bce();Vce();Gce();Wce();Hce();Kce();Xce();Jce();ehe();the();rhe();nhe();ihe();ohe();she();uhe();lhe();che();hhe();fhe();phe();ghe();yhe();_he();whe();bhe();Ehe();Che();Ahe();qhe();Phe();Ghe();Whe();Zhe();Hhe();Khe();tfe();nfe();afe();lfe();hfe();pfe();vfe();yfe();xfe();bfe();Tfe();Ife();Wfe();Yfe();Jfe();epe();tpe();rpe();ape();ope();upe();lpe();hpe();fpe();dpe();mpe();gpe();_pe();xpe();wpe();bpe();Spe();Tpe();Cpe();Ape();qpe();Dpe();zpe();ide();ade();ode();sde();ude();lde();cde();fde();pde();xde();wde();bde();Ede();Sde();Tde();Ide();Cde();qde();Pde();Ode();Dde();Lde();kde();Fde();zde();jde();Bde();Ude();Vde();Wde();Zde();Hde();Xde();Yde();eme();tme();rme();nme();fme();wme();Ame();Dme();Wme();Qme();tve();fve();pve();mve();Mve();Fve();Dge();Nge();Fge();zge();Vge();Zge();Hge();Kge.exports=nE()});var Jge=T((UJt,Yge)=>{"use strict";Yge.exports=Xge()});var mj=T((VJt,Qge)=>{"use strict";Qge.exports=function(t,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return t.apply(r,i)}}});var no=T(($Jt,rye)=>{"use strict";var FTt=mj(),_p=Object.prototype.toString;function yj(e){return _p.call(e)==="[object Array]"}function vj(e){return typeof e=="undefined"}function zTt(e){return e!==null&&!vj(e)&&e.constructor!==null&&!vj(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function jTt(e){return _p.call(e)==="[object ArrayBuffer]"}function BTt(e){return typeof FormData!="undefined"&&e instanceof FormData}function UTt(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function VTt(e){return typeof e=="string"}function $Tt(e){return typeof e=="number"}function eye(e){return e!==null&&typeof e=="object"}function yI(e){if(_p.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function GTt(e){return _p.call(e)==="[object Date]"}function WTt(e){return _p.call(e)==="[object File]"}function ZTt(e){return _p.call(e)==="[object Blob]"}function tye(e){return _p.call(e)==="[object Function]"}function HTt(e){return eye(e)&&tye(e.pipe)}function KTt(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function XTt(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function YTt(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function _j(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),yj(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function gj(){var e={};function t(i,a){yI(e[a])&&yI(i)?e[a]=gj(e[a],i):yI(i)?e[a]=gj({},i):yj(i)?e[a]=i.slice():e[a]=i}for(var r=0,n=arguments.length;r<n;r++)_j(arguments[r],t);return e}function JTt(e,t,r){return _j(t,function(i,a){r&&typeof i=="function"?e[a]=FTt(i,r):e[a]=i}),e}function QTt(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}rye.exports={isArray:yj,isArrayBuffer:jTt,isBuffer:zTt,isFormData:BTt,isArrayBufferView:UTt,isString:VTt,isNumber:$Tt,isObject:eye,isPlainObject:yI,isUndefined:vj,isDate:GTt,isFile:WTt,isBlob:ZTt,isFunction:tye,isStream:HTt,isURLSearchParams:KTt,isStandardBrowserEnv:YTt,forEach:_j,merge:gj,extend:JTt,trim:XTt,stripBOM:QTt}});var xj=T((GJt,iye)=>{"use strict";var xv=no();function nye(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}iye.exports=function(t,r,n){if(!r)return t;var i;if(n)i=n(r);else if(xv.isURLSearchParams(r))i=r.toString();else{var a=[];xv.forEach(r,function(g,b){g===null||typeof g=="undefined"||(xv.isArray(g)?b=b+"[]":g=[g],xv.forEach(g,function(q){xv.isDate(q)?q=q.toISOString():xv.isObject(q)&&(q=JSON.stringify(q)),a.push(nye(b)+"="+nye(q))}))}),i=a.join("&")}if(i){var h=t.indexOf("#");h!==-1&&(t=t.slice(0,h)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}});var oye=T((WJt,aye)=>{"use strict";var eIt=no();function _I(){this.handlers=[]}_I.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};_I.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};_I.prototype.forEach=function(t){eIt.forEach(this.handlers,function(n){n!==null&&t(n)})};aye.exports=_I});var uye=T((ZJt,sye)=>{"use strict";var tIt=no();sye.exports=function(t,r){tIt.forEach(t,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(t[r]=i,delete t[a])})}});var wj=T((HJt,lye)=>{"use strict";lye.exports=function(t,r,n,i,a){return t.config=r,n&&(t.code=n),t.request=i,t.response=a,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}});var bj=T((KJt,cye)=>{"use strict";var rIt=wj();cye.exports=function(t,r,n,i,a){var h=new Error(t);return rIt(h,r,n,i,a)}});var fye=T((XJt,hye)=>{"use strict";var nIt=bj();hye.exports=function(t,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):r(nIt("Request failed with status code "+n.status,n.config,null,n.request,n))}});var dye=T((YJt,pye)=>{"use strict";var xI=no();pye.exports=xI.isStandardBrowserEnv()?function(){return{write:function(r,n,i,a,h,p){var g=[];g.push(r+"="+encodeURIComponent(n)),xI.isNumber(i)&&g.push("expires="+new Date(i).toGMTString()),xI.isString(a)&&g.push("path="+a),xI.isString(h)&&g.push("domain="+h),p===!0&&g.push("secure"),document.cookie=g.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var vye=T((JJt,mye)=>{"use strict";mye.exports=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}});var yye=T((QJt,gye)=>{"use strict";gye.exports=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}});var xye=T((eQt,_ye)=>{"use strict";var iIt=vye(),aIt=yye();_ye.exports=function(t,r){return t&&!iIt(r)?aIt(t,r):r}});var bye=T((tQt,wye)=>{"use strict";var Ej=no(),oIt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];wye.exports=function(t){var r={},n,i,a;return t&&Ej.forEach(t.split(`
`),function(p){if(a=p.indexOf(":"),n=Ej.trim(p.substr(0,a)).toLowerCase(),i=Ej.trim(p.substr(a+1)),n){if(r[n]&&oIt.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r}});var Tye=T((rQt,Sye)=>{"use strict";var Eye=no();Sye.exports=Eye.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(a){var h=a;return t&&(r.setAttribute("href",h),h=r.href),r.setAttribute("href",h),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(h){var p=Eye.isString(h)?i(h):h;return p.protocol===n.protocol&&p.host===n.host}}():function(){return function(){return!0}}()});var mx=T((nQt,Iye)=>{"use strict";function Sj(e){this.message=e}Sj.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Sj.prototype.__CANCEL__=!0;Iye.exports=Sj});var Ij=T((iQt,Cye)=>{"use strict";var wI=no(),sIt=fye(),uIt=dye(),lIt=xj(),cIt=xye(),hIt=bye(),fIt=Tye(),Tj=bj(),pIt=vx(),dIt=mx();Cye.exports=function(t){return new Promise(function(n,i){var a=t.data,h=t.headers,p=t.responseType,g;function b(){t.cancelToken&&t.cancelToken.unsubscribe(g),t.signal&&t.signal.removeEventListener("abort",g)}wI.isFormData(a)&&delete h["Content-Type"];var E=new XMLHttpRequest;if(t.auth){var q=t.auth.username||"",P=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";h.Authorization="Basic "+btoa(q+":"+P)}var L=cIt(t.baseURL,t.url);E.open(t.method.toUpperCase(),lIt(L,t.params,t.paramsSerializer),!0),E.timeout=t.timeout;function W(){if(E){var V="getAllResponseHeaders"in E?hIt(E.getAllResponseHeaders()):null,$=!p||p==="text"||p==="json"?E.responseText:E.response,H={data:$,status:E.status,statusText:E.statusText,headers:V,config:t,request:E};sIt(function(se){n(se),b()},function(se){i(se),b()},H),E=null}}if("onloadend"in E?E.onloadend=W:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(W)},E.onabort=function(){E&&(i(Tj("Request aborted",t,"ECONNABORTED",E)),E=null)},E.onerror=function(){i(Tj("Network Error",t,null,E)),E=null},E.ontimeout=function(){var $=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",H=t.transitional||pIt.transitional;t.timeoutErrorMessage&&($=t.timeoutErrorMessage),i(Tj($,t,H.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",E)),E=null},wI.isStandardBrowserEnv()){var Q=(t.withCredentials||fIt(L))&&t.xsrfCookieName?uIt.read(t.xsrfCookieName):void 0;Q&&(h[t.xsrfHeaderName]=Q)}"setRequestHeader"in E&&wI.forEach(h,function($,H){typeof a=="undefined"&&H.toLowerCase()==="content-type"?delete h[H]:E.setRequestHeader(H,$)}),wI.isUndefined(t.withCredentials)||(E.withCredentials=!!t.withCredentials),p&&p!=="json"&&(E.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&E.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&E.upload&&E.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(g=function(V){E&&(i(!V||V&&V.type?new dIt("canceled"):V),E.abort(),E=null)},t.cancelToken&&t.cancelToken.subscribe(g),t.signal&&(t.signal.aborted?g():t.signal.addEventListener("abort",g))),a||(a=null),E.send(a)})}});var vx=T((aQt,Pye)=>{"use strict";var Di=no(),Aye=uye(),mIt=wj(),vIt={"Content-Type":"application/x-www-form-urlencoded"};function qye(e,t){!Di.isUndefined(e)&&Di.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function gIt(){var e;return typeof XMLHttpRequest!="undefined"?e=Ij():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(e=Ij()),e}function yIt(e,t,r){if(Di.isString(e))try{return(t||JSON.parse)(e),Di.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var bI={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:gIt(),transformRequest:[function(t,r){return Aye(r,"Accept"),Aye(r,"Content-Type"),Di.isFormData(t)||Di.isArrayBuffer(t)||Di.isBuffer(t)||Di.isStream(t)||Di.isFile(t)||Di.isBlob(t)?t:Di.isArrayBufferView(t)?t.buffer:Di.isURLSearchParams(t)?(qye(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Di.isObject(t)||r&&r["Content-Type"]==="application/json"?(qye(r,"application/json"),yIt(t)):t}],transformResponse:[function(t){var r=this.transitional||bI.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&Di.isString(t)&&t.length)try{return JSON.parse(t)}catch(h){if(a)throw h.name==="SyntaxError"?mIt(h,this,"E_JSON_PARSE"):h}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Di.forEach(["delete","get","head"],function(t){bI.headers[t]={}});Di.forEach(["post","put","patch"],function(t){bI.headers[t]=Di.merge(vIt)});Pye.exports=bI});var Oye=T((oQt,Mye)=>{"use strict";var _It=no(),xIt=vx();Mye.exports=function(t,r,n){var i=this||xIt;return _It.forEach(n,function(h){t=h.call(i,t,r)}),t}});var Cj=T((sQt,Rye)=>{"use strict";Rye.exports=function(t){return!!(t&&t.__CANCEL__)}});var kye=T((uQt,Lye)=>{"use strict";var Dye=no(),Aj=Oye(),wIt=Cj(),bIt=vx(),EIt=mx();function qj(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new EIt("canceled")}Lye.exports=function(t){qj(t),t.headers=t.headers||{},t.data=Aj.call(t,t.data,t.headers,t.transformRequest),t.headers=Dye.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Dye.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var r=t.adapter||bIt.adapter;return r(t).then(function(i){return qj(t),i.data=Aj.call(t,i.data,i.headers,t.transformResponse),i},function(i){return wIt(i)||(qj(t),i&&i.response&&(i.response.data=Aj.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})}});var Pj=T((lQt,Nye)=>{"use strict";var Ro=no();Nye.exports=function(t,r){r=r||{};var n={};function i(E,q){return Ro.isPlainObject(E)&&Ro.isPlainObject(q)?Ro.merge(E,q):Ro.isPlainObject(q)?Ro.merge({},q):Ro.isArray(q)?q.slice():q}function a(E){if(Ro.isUndefined(r[E])){if(!Ro.isUndefined(t[E]))return i(void 0,t[E])}else return i(t[E],r[E])}function h(E){if(!Ro.isUndefined(r[E]))return i(void 0,r[E])}function p(E){if(Ro.isUndefined(r[E])){if(!Ro.isUndefined(t[E]))return i(void 0,t[E])}else return i(void 0,r[E])}function g(E){if(E in r)return i(t[E],r[E]);if(E in t)return i(void 0,t[E])}var b={url:h,method:h,data:h,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:g};return Ro.forEach(Object.keys(t).concat(Object.keys(r)),function(q){var P=b[q]||a,L=P(q);Ro.isUndefined(L)&&P!==g||(n[q]=L)}),n}});var Mj=T((cQt,Fye)=>{Fye.exports={version:"0.24.0"}});var Bye=T((hQt,jye)=>{"use strict";var SIt=Mj().version,Oj={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Oj[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var zye={};Oj.transitional=function(t,r,n){function i(a,h){return"[Axios v"+SIt+"] Transitional option '"+a+"'"+h+(n?". "+n:"")}return function(a,h,p){if(t===!1)throw new Error(i(h," has been removed"+(r?" in "+r:"")));return r&&!zye[h]&&(zye[h]=!0,console.warn(i(h," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,h,p):!0}};function TIt(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-->0;){var a=n[i],h=t[a];if(h){var p=e[a],g=p===void 0||h(p,a,e);if(g!==!0)throw new TypeError("option "+a+" must be "+g);continue}if(r!==!0)throw Error("Unknown option "+a)}}jye.exports={assertOptions:TIt,validators:Oj}});var Zye=T((fQt,Wye)=>{"use strict";var $ye=no(),IIt=xj(),Uye=oye(),Vye=kye(),EI=Pj(),Gye=Bye(),wv=Gye.validators;function gx(e){this.defaults=e,this.interceptors={request:new Uye,response:new Uye}}gx.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=EI(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&Gye.assertOptions(r,{silentJSONParsing:wv.transitional(wv.boolean),forcedJSONParsing:wv.transitional(wv.boolean),clarifyTimeoutError:wv.transitional(wv.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(t)===!1||(i=i&&P.synchronous,n.unshift(P.fulfilled,P.rejected))});var a=[];this.interceptors.response.forEach(function(P){a.push(P.fulfilled,P.rejected)});var h;if(!i){var p=[Vye,void 0];for(Array.prototype.unshift.apply(p,n),p=p.concat(a),h=Promise.resolve(t);p.length;)h=h.then(p.shift(),p.shift());return h}for(var g=t;n.length;){var b=n.shift(),E=n.shift();try{g=b(g)}catch(q){E(q);break}}try{h=Vye(g)}catch(q){return Promise.reject(q)}for(;a.length;)h=h.then(a.shift(),a.shift());return h};gx.prototype.getUri=function(t){return t=EI(this.defaults,t),IIt(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};$ye.forEach(["delete","get","head","options"],function(t){gx.prototype[t]=function(r,n){return this.request(EI(n||{},{method:t,url:r,data:(n||{}).data}))}});$ye.forEach(["post","put","patch"],function(t){gx.prototype[t]=function(r,n,i){return this.request(EI(i||{},{method:t,url:r,data:n}))}});Wye.exports=gx});var Kye=T((pQt,Hye)=>{"use strict";var CIt=mx();function bv(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(i){t=i});var r=this;this.promise.then(function(n){if(r._listeners){var i,a=r._listeners.length;for(i=0;i<a;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,a=new Promise(function(h){r.subscribe(h),i=h}).then(n);return a.cancel=function(){r.unsubscribe(i)},a},e(function(i){r.reason||(r.reason=new CIt(i),t(r.reason))})}bv.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};bv.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};bv.prototype.unsubscribe=function(t){if(this._listeners){var r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}};bv.source=function(){var t,r=new bv(function(i){t=i});return{token:r,cancel:t}};Hye.exports=bv});var Yye=T((dQt,Xye)=>{"use strict";Xye.exports=function(t){return function(n){return t.apply(null,n)}}});var Qye=T((mQt,Jye)=>{"use strict";Jye.exports=function(t){return typeof t=="object"&&t.isAxiosError===!0}});var r_e=T((vQt,Rj)=>{"use strict";var e_e=no(),AIt=mj(),SI=Zye(),qIt=Pj(),PIt=vx();function t_e(e){var t=new SI(e),r=AIt(SI.prototype.request,t);return e_e.extend(r,SI.prototype,t),e_e.extend(r,t),r.create=function(i){return t_e(qIt(e,i))},r}var qu=t_e(PIt);qu.Axios=SI;qu.Cancel=mx();qu.CancelToken=Kye();qu.isCancel=Cj();qu.VERSION=Mj().version;qu.all=function(t){return Promise.all(t)};qu.spread=Yye();qu.isAxiosError=Qye();Rj.exports=qu;Rj.exports.default=qu});var i_e=T((gQt,n_e)=>{n_e.exports=r_e()});var d_e=T((xQt,p_e)=>{var Dj=1/0,MIt=17976931348623157e292,a_e=NaN,OIt="[object Symbol]",RIt=/^\s+|\s+$/g,DIt=/^[-+]0x[0-9a-f]+$/i,LIt=/^0b[01]+$/i,kIt=/^0o[0-7]+$/i,NIt=parseInt,FIt=typeof global=="object"&&global&&global.Object===Object&&global,zIt=typeof self=="object"&&self&&self.Object===Object&&self,jIt=FIt||zIt||Function("return this")(),BIt=Object.prototype,UIt=BIt.toString,o_e=jIt.Symbol,VIt=Math.min,s_e=o_e?o_e.prototype:void 0,u_e=s_e?s_e.toString:void 0;function $It(e){if(typeof e=="string")return e;if(h_e(e))return u_e?u_e.call(e):"";var t=e+"";return t=="0"&&1/e==-Dj?"-0":t}function GIt(e){var t=Math[e];return function(r,n){if(r=f_e(r),n=VIt(HIt(n),292),n){var i=(c_e(r)+"e").split("e"),a=t(i[0]+"e"+(+i[1]+n));return i=(c_e(a)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return t(r)}}function l_e(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function WIt(e){return!!e&&typeof e=="object"}function h_e(e){return typeof e=="symbol"||WIt(e)&&UIt.call(e)==OIt}function ZIt(e){if(!e)return e===0?e:0;if(e=f_e(e),e===Dj||e===-Dj){var t=e<0?-1:1;return t*MIt}return e===e?e:0}function HIt(e){var t=ZIt(e),r=t%1;return t===t?r?t-r:t:0}function f_e(e){if(typeof e=="number")return e;if(h_e(e))return a_e;if(l_e(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=l_e(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(RIt,"");var r=LIt.test(e);return r||kIt.test(e)?NIt(e.slice(2),r?2:8):DIt.test(e)?a_e:+e}function c_e(e){return e==null?"":$It(e)}var KIt=GIt("round");p_e.exports=KIt});var v_e=T((kj,Nj)=>{(function(e,t){typeof kj=="object"&&typeof Nj!="undefined"?Nj.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.maplibregl=t())})(kj,function(){"use strict";var e={},t={};function r(i,a,h){if(t[i]=h,i==="index"){var p="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",g={};return t.shared(g),t.index(e,g),typeof window!="undefined"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([p],{type:"text/javascript"}))),e}}r("shared",["exports"],function(i){"use strict";function a(u,s,l,f){return new(l||(l=Promise))(function(v,x){function w(O){try{C(f.next(O))}catch(R){x(R)}}function S(O){try{C(f.throw(O))}catch(R){x(R)}}function C(O){var R;O.done?v(O.value):(R=O.value,R instanceof l?R:new l(function(k){k(R)})).then(w,S)}C((f=f.apply(u,s||[])).next())})}function h(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}typeof SuppressedError=="function"&&SuppressedError;var p=g;function g(u,s){this.x=u,this.y=s}g.prototype={clone:function(){return new g(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,s){return this.clone()._rotateAround(u,s)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var s=u.x-this.x,l=u.y-this.y;return s*s+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,s){return Math.atan2(this.x*s-this.y*u,this.x*u+this.y*s)},_matMult:function(u){var s=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=s,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var s=Math.cos(u),l=Math.sin(u),f=l*this.x+s*this.y;return this.x=s*this.x-l*this.y,this.y=f,this},_rotateAround:function(u,s){var l=Math.cos(u),f=Math.sin(u),v=s.y+f*(this.x-s.x)+l*(this.y-s.y);return this.x=s.x+l*(this.x-s.x)-f*(this.y-s.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},g.convert=function(u){return u instanceof g?u:Array.isArray(u)?new g(u[0],u[1]):u};var b=h(p),E=q;function q(u,s,l,f){this.cx=3*u,this.bx=3*(l-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(f-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=s,this.p2x=l,this.p2y=f}q.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,s){if(s===void 0&&(s=1e-6),u<0)return 0;if(u>1)return 1;for(var l=u,f=0;f<8;f++){var v=this.sampleCurveX(l)-u;if(Math.abs(v)<s)return l;var x=this.sampleCurveDerivativeX(l);if(Math.abs(x)<1e-6)break;l-=v/x}var w=0,S=1;for(l=u,f=0;f<20&&(v=this.sampleCurveX(l),!(Math.abs(v-u)<s));f++)u>v?w=l:S=l,l=.5*(S-w)+w;return l},solve:function(u,s){return this.sampleCurveY(this.solveCurveX(u,s))}};var P=h(E);let L,W;function Q(){return L==null&&(L=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),L}function V(){if(W==null&&(W=!1,Q())){let s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let f=0;f<5*5;f++){let v=4*f;s.fillStyle=`rgb(${v},${v+1},${v+2})`,s.fillRect(f%5,Math.floor(f/5),1,1)}let l=s.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&l[f]!==f){W=!0;break}}}return W||!1}function $(u,s,l,f){let v=new P(u,s,l,f);return x=>v.solve(x)}let H=$(.25,.1,.25,1);function re(u,s,l){return Math.min(l,Math.max(s,u))}function se(u,s,l){let f=l-s,v=((u-s)%f+f)%f+s;return v===s?l:v}function Ie(u,...s){for(let l of s)for(let f in l)u[f]=l[f];return u}let qe=1;function Ae(u,s,l){let f={};for(let v in u)f[v]=s.call(this,u[v],v,u);return f}function Ue(u,s,l){let f={};for(let v in u)s.call(this,u[v],v,u)&&(f[v]=u[v]);return f}function Le(u){return Array.isArray(u)?u.map(Le):typeof u=="object"&&u?Ae(u,Le):u}let $t={};function Rt(u){$t[u]||(typeof console!="undefined"&&console.warn(u),$t[u]=!0)}function ir(u,s,l){return(l.y-u.y)*(s.x-u.x)>(s.y-u.y)*(l.x-u.x)}function Kr(u){return typeof WorkerGlobalScope!="undefined"&&u!==void 0&&u instanceof WorkerGlobalScope}let Mn=null;function sr(u){return typeof ImageBitmap!="undefined"&&u instanceof ImageBitmap}let lr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function cr(u,s,l,f,v){return a(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let x=new VideoFrame(u,{timestamp:0});try{let w=x==null?void 0:x.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);let S=w.startsWith("BGR"),C=new Uint8ClampedArray(f*v*4);if(yield x.copyTo(C,function(O,R,k,z,U){let Z=4*Math.max(-R,0),X=(Math.max(0,k)-k)*z*4+Z,ne=4*z,ue=Math.max(0,R),xe=Math.max(0,k);return{rect:{x:ue,y:xe,width:Math.min(O.width,R+z)-ue,height:Math.min(O.height,k+U)-xe},layout:[{offset:X,stride:ne}]}}(u,s,l,f,v)),S)for(let O=0;O<C.length;O+=4){let R=C[O];C[O]=C[O+2],C[O+2]=R}return C}finally{x.close()}})}let Kt,rn,nn="AbortError";function fa(){return new Error(nn)}let wi={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Gn(u){return wi.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))]}let ri="global-dispatcher";class Dt extends Error{constructor(s,l,f,v){super(`AJAXError: ${l} (${s}): ${f}`),this.status=s,this.statusText=l,this.url=f,this.body=v}}let pn=()=>Kr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ni=function(u,s){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){let f=Gn(u.url);if(f)return f(u,s);if(Kr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,targetMapId:ri},s)}if(!(/^file:/.test(l=u.url)||/^file:/.test(pn())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(f,v){return a(this,void 0,void 0,function*(){let x=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:pn(),signal:v.signal});f.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");let w=yield fetch(x);if(!w.ok){let O=yield w.blob();throw new Dt(w.status,w.statusText,f.url,O)}let S;S=f.type==="arrayBuffer"||f.type==="image"?w.arrayBuffer():f.type==="json"?w.json():w.text();let C=yield S;if(v.signal.aborted)throw fa();return{data:C,cacheControl:w.headers.get("Cache-Control"),expires:w.headers.get("Expires")}})}(u,s);if(Kr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,mustQueue:!0,targetMapId:ri},s)}var l;return function(f,v){return new Promise((x,w)=>{var S;let C=new XMLHttpRequest;C.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(C.responseType="arraybuffer");for(let O in f.headers)C.setRequestHeader(O,f.headers[O]);f.type==="json"&&(C.responseType="text",!((S=f.headers)===null||S===void 0)&&S.Accept||C.setRequestHeader("Accept","application/json")),C.withCredentials=f.credentials==="include",C.onerror=()=>{w(new Error(C.statusText))},C.onload=()=>{if(!v.signal.aborted)if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let O=C.response;if(f.type==="json")try{O=JSON.parse(C.response)}catch(R){return void w(R)}x({data:O,cacheControl:C.getResponseHeader("Cache-Control"),expires:C.getResponseHeader("Expires")})}else{let O=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});w(new Dt(C.status,C.statusText,f.url,O))}},v.signal.addEventListener("abort",()=>{C.abort(),w(fa())}),C.send(f.body)})}(u,s)};function an(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;let s=new URL(u),l=window.location;return s.protocol===l.protocol&&s.host===l.host}function Es(u,s,l){l[u]&&l[u].indexOf(s)!==-1||(l[u]=l[u]||[],l[u].push(s))}function wn(u,s,l){if(l&&l[u]){let f=l[u].indexOf(s);f!==-1&&l[u].splice(f,1)}}class Da{constructor(s,l={}){Ie(this,l),this.type=s}}class Wn extends Da{constructor(s,l={}){super("error",Ie({error:s},l))}}class Ss{on(s,l){return this._listeners=this._listeners||{},Es(s,l,this._listeners),this}off(s,l){return wn(s,l,this._listeners),wn(s,l,this._oneTimeListeners),this}once(s,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},Es(s,l,this._oneTimeListeners),this):new Promise(f=>this.once(s,f))}fire(s,l){typeof s=="string"&&(s=new Da(s,l||{}));let f=s.type;if(this.listens(f)){s.target=this;let v=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(let S of v)S.call(this,s);let x=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(let S of x)wn(f,S,this._oneTimeListeners),S.call(this,s);let w=this._eventedParent;w&&(Ie(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(s))}else s instanceof Wn&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,l){return this._eventedParent=s,this._eventedParentData=l,this}}var Ee={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let No=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Hs(u,s){let l={};for(let f in u)f!=="ref"&&(l[f]=u[f]);return No.forEach(f=>{f in s&&(l[f]=s[f])}),l}function Xt(u,s){if(Array.isArray(u)){if(!Array.isArray(s)||u.length!==s.length)return!1;for(let l=0;l<u.length;l++)if(!Xt(u[l],s[l]))return!1;return!0}if(typeof u=="object"&&u!==null&&s!==null){if(typeof s!="object"||Object.keys(u).length!==Object.keys(s).length)return!1;for(let l in u)if(!Xt(u[l],s[l]))return!1;return!0}return u===s}function Cr(u,s){u.push(s)}function Ks(u,s,l){Cr(l,{command:"addSource",args:[u,s[u]]})}function pa(u,s,l){Cr(s,{command:"removeSource",args:[u]}),l[u]=!0}function mo(u,s,l,f){pa(u,l,f),Ks(u,s,l)}function Ts(u,s,l){let f;for(f in u[l])if(Object.prototype.hasOwnProperty.call(u[l],f)&&f!=="data"&&!Xt(u[l][f],s[l][f]))return!1;for(f in s[l])if(Object.prototype.hasOwnProperty.call(s[l],f)&&f!=="data"&&!Xt(u[l][f],s[l][f]))return!1;return!0}function zi(u,s,l,f,v,x){u=u||{},s=s||{};for(let w in u)Object.prototype.hasOwnProperty.call(u,w)&&(Xt(u[w],s[w])||l.push({command:x,args:[f,w,s[w],v]}));for(let w in s)Object.prototype.hasOwnProperty.call(s,w)&&!Object.prototype.hasOwnProperty.call(u,w)&&(Xt(u[w],s[w])||l.push({command:x,args:[f,w,s[w],v]}))}function Xs(u){return u.id}function Ys(u,s){return u[s.id]=s,u}class Ne{constructor(s,l,f,v){this.message=(s?`${s}: `:"")+f,v&&(this.identifier=v),l!=null&&l.__line__&&(this.line=l.__line__)}}function da(u,...s){for(let l of s)for(let f in l)u[f]=l[f];return u}class Zn extends Error{constructor(s,l){super(l),this.message=l,this.key=s}}class ii{constructor(s,l=[]){this.parent=s,this.bindings={};for(let[f,v]of l)this.bindings[f]=v}concat(s){return new ii(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}let ji={kind:"null"},ze={kind:"number"},It={kind:"string"},ft={kind:"boolean"},ai={kind:"color"},Ur={kind:"object"},Et={kind:"value"},Fo={kind:"collator"},Is={kind:"formatted"},Js={kind:"padding"},zo={kind:"resolvedImage"},oe={kind:"variableAnchorOffsetCollection"};function B(u,s){return{kind:"array",itemType:u,N:s}}function j(u){if(u.kind==="array"){let s=j(u.itemType);return typeof u.N=="number"?`array<${s}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${s}>`}return u.kind}let J=[ji,ze,It,ft,ai,Is,Ur,B(Et),Js,zo,oe];function ie(u,s){if(s.kind==="error")return null;if(u.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!ie(u.itemType,s.itemType))&&(typeof u.N!="number"||u.N===s.N))return null}else{if(u.kind===s.kind)return null;if(u.kind==="value"){for(let l of J)if(!ie(l,s))return null}}return`Expected ${j(u)} but found ${j(s)} instead.`}function de(u,s){return s.some(l=>l.kind===u.kind)}function ve(u,s){return s.some(l=>l==="null"?u===null:l==="array"?Array.isArray(u):l==="object"?u&&!Array.isArray(u)&&typeof u=="object":l===typeof u)}function _e(u,s){return u.kind==="array"&&s.kind==="array"?u.itemType.kind===s.itemType.kind&&typeof u.N=="number":u.kind===s.kind}let he=.96422,Te=.82521,Me=4/29,be=6/29,je=3*be*be,lt=be*be*be,ht=Math.PI/180,Qt=180/Math.PI;function Ct(u){return(u%=360)<0&&(u+=360),u}function er([u,s,l,f]){let v,x,w=bn((.2225045*(u=jt(u))+.7168786*(s=jt(s))+.0606169*(l=jt(l)))/1);u===s&&s===l?v=x=w:(v=bn((.4360747*u+.3850649*s+.1430804*l)/he),x=bn((.0139322*u+.0971045*s+.7141733*l)/Te));let S=116*w-16;return[S<0?0:S,500*(v-w),200*(w-x),f]}function jt(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function bn(u){return u>lt?Math.pow(u,1/3):u/je+Me}function Xr([u,s,l,f]){let v=(u+16)/116,x=isNaN(s)?v:v+s/500,w=isNaN(l)?v:v-l/200;return v=1*dr(v),x=he*dr(x),w=Te*dr(w),[Lt(3.1338561*x-1.6168667*v-.4906146*w),Lt(-.9787684*x+1.9161415*v+.033454*w),Lt(.0719453*x-.2289914*v+1.4052427*w),f]}function Lt(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function dr(u){return u>be?u*u*u:je*(u-Me)}function jr(u){return parseInt(u.padEnd(2,u),16)/255}function Nn(u,s){return Hn(s?u/100:u,0,1)}function Hn(u,s,l){return Math.min(Math.max(s,u),l)}function bi(u){return!u.some(Number.isNaN)}let nc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class mr{constructor(s,l,f,v=1,x=!0){this.r=s,this.g=l,this.b=f,this.a=v,x||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[s,l,f,v]))}static parse(s){if(s instanceof mr)return s;if(typeof s!="string")return;let l=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];let v=nc[f];if(v){let[w,S,C]=v;return[w/255,S/255,C/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){let w=f.length<6?1:2,S=1;return[jr(f.slice(S,S+=w)),jr(f.slice(S,S+=w)),jr(f.slice(S,S+=w)),jr(f.slice(S,S+w)||"ff")]}if(f.startsWith("rgb")){let w=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){let[S,C,O,R,k,z,U,Z,X,ne,ue,xe]=w,pe=[R||" ",U||" ",ne].join("");if(pe==="  "||pe==="  /"||pe===",,"||pe===",,,"){let ye=[O,z,X].join(""),Se=ye==="%%%"?100:ye===""?255:0;if(Se){let Re=[Hn(+C/Se,0,1),Hn(+k/Se,0,1),Hn(+Z/Se,0,1),ue?Nn(+ue,xe):1];if(bi(Re))return Re}}return}}let x=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){let[w,S,C,O,R,k,z,U,Z]=x,X=[C||" ",R||" ",z].join("");if(X==="  "||X==="  /"||X===",,"||X===",,,"){let ne=[+S,Hn(+O,0,100),Hn(+k,0,100),U?Nn(+U,Z):1];if(bi(ne))return function([ue,xe,pe,ye]){function Se(Re){let Xe=(Re+ue/30)%12,pt=xe*Math.min(pe,1-pe);return pe-pt*Math.max(-1,Math.min(Xe-3,9-Xe,1))}return ue=Ct(ue),xe/=100,pe/=100,[Se(0),Se(8),Se(4),ye]}(ne)}}}(s);return l?new mr(...l,!1):void 0}get rgb(){let{r:s,g:l,b:f,a:v}=this,x=v||1/0;return this.overwriteGetter("rgb",[s/x,l/x,f/x,v])}get hcl(){return this.overwriteGetter("hcl",function(s){let[l,f,v,x]=er(s),w=Math.sqrt(f*f+v*v);return[Math.round(1e4*w)?Ct(Math.atan2(v,f)*Qt):NaN,w,l,x]}(this.rgb))}get lab(){return this.overwriteGetter("lab",er(this.rgb))}overwriteGetter(s,l){return Object.defineProperty(this,s,{value:l}),l}toString(){let[s,l,f,v]=this.rgb;return`rgba(${[s,l,f].map(x=>Math.round(255*x)).join(",")},${v})`}}mr.black=new mr(0,0,0,1),mr.white=new mr(1,1,1,1),mr.transparent=new mr(0,0,0,0),mr.red=new mr(1,0,0,1);class dg{constructor(s,l,f){this.sensitivity=s?l?"variant":"case":l?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,l){return this.collator.compare(s,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class mg{constructor(s,l,f,v,x){this.text=s,this.image=l,this.scale=f,this.fontStack=v,this.textColor=x}}class ma{constructor(s){this.sections=s}static fromString(s){return new ma([new mg(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof ma?s:ma.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class va{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof va)return s;if(typeof s=="number")return new va([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(let l of s)if(typeof l!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]];}return new va(s)}}toString(){return JSON.stringify(this.values)}}let ZA=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class La{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof La)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let l=0;l<s.length;l+=2){let f=s[l],v=s[l+1];if(typeof f!="string"||!ZA.has(f)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new La(s)}}toString(){return JSON.stringify(this.values)}}class ga{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new ga({name:s,available:!1}):null}}function ic(u,s,l,f){return typeof u=="number"&&u>=0&&u<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof l=="number"&&l>=0&&l<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[u,s,l,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[u,s,l,f]:[u,s,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Gu(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof mr||u instanceof dg||u instanceof ma||u instanceof va||u instanceof La||u instanceof ga)return!0;if(Array.isArray(u)){for(let s of u)if(!Gu(s))return!1;return!0}if(typeof u=="object"){for(let s in u)if(!Gu(u[s]))return!1;return!0}return!1}function En(u){if(u===null)return ji;if(typeof u=="string")return It;if(typeof u=="boolean")return ft;if(typeof u=="number")return ze;if(u instanceof mr)return ai;if(u instanceof dg)return Fo;if(u instanceof ma)return Is;if(u instanceof va)return Js;if(u instanceof La)return oe;if(u instanceof ga)return zo;if(Array.isArray(u)){let s=u.length,l;for(let f of u){let v=En(f);if(l){if(l===v)continue;l=Et;break}l=v}return B(l||Et,s)}return Ur}function Xh(u){let s=typeof u;return u===null?"":s==="string"||s==="number"||s==="boolean"?String(u):u instanceof mr||u instanceof ma||u instanceof va||u instanceof La||u instanceof ga?u.toString():JSON.stringify(u)}class vo{constructor(s,l){this.type=s,this.value=l}static parse(s,l){if(s.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!Gu(s[1]))return l.error("invalid value");let f=s[1],v=En(f),x=l.expectedType;return v.kind!=="array"||v.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(v=x),new vo(v,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class dn{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}let kp={string:It,number:ze,boolean:ft,object:Ur};class go{constructor(s,l){this.type=s,this.args=l}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");let f,v=1,x=s[0];if(x==="array"){let S,C;if(s.length>2){let O=s[1];if(typeof O!="string"||!(O in kp)||O==="object")return l.error("The item type argument of \"array\" must be one of string, number, boolean",1);S=kp[O],v++}else S=Et;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return l.error("The length argument to \"array\" must be a positive integer literal",2);C=s[2],v++}f=B(S,C)}else{if(!kp[x])throw new Error(`Types doesn't contain name = ${x}`);f=kp[x]}let w=[];for(;v<s.length;v++){let S=l.parse(s[v],v,Et);if(!S)return null;w.push(S)}return new go(f,w)}evaluate(s){for(let l=0;l<this.args.length;l++){let f=this.args[l].evaluate(s);if(!ie(this.type,En(f)))return f;if(l===this.args.length-1)throw new dn(`Expected value to be of type ${j(this.type)}, but found ${j(En(f))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}let vg={"to-boolean":ft,"to-color":ai,"to-number":ze,"to-string":It};class yo{constructor(s,l){this.type=s,this.args=l}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");let f=s[0];if(!vg[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&s.length!==2)return l.error("Expected one argument.");let v=vg[f],x=[];for(let w=1;w<s.length;w++){let S=l.parse(s[w],w,Et);if(!S)return null;x.push(S)}return new yo(v,x)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let l,f;for(let v of this.args){if(l=v.evaluate(s),f=null,l instanceof mr)return l;if(typeof l=="string"){let x=s.parseColor(l);if(x)return x}else if(Array.isArray(l)&&(f=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:ic(l[0],l[1],l[2],l[3]),!f))return new mr(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new dn(f||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(let f of this.args){l=f.evaluate(s);let v=va.parse(l);if(v)return v}throw new dn(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(let f of this.args){l=f.evaluate(s);let v=La.parse(l);if(v)return v}throw new dn(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(let f of this.args){if(l=f.evaluate(s),l===null)return 0;let v=Number(l);if(!isNaN(v))return v}throw new dn(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return ma.fromString(Xh(this.args[0].evaluate(s)));case"resolvedImage":return ga.fromString(Xh(this.args[0].evaluate(s)));default:return Xh(this.args[0].evaluate(s));}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}let HA=["Unknown","Point","LineString","Polygon"];class Np{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?HA[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let l=this._parseColorCache[s];return l||(l=this._parseColorCache[s]=mr.parse(s)),l}}class Wu{constructor(s,l,f=[],v,x=new ii,w=[]){this.registry=s,this.path=f,this.key=f.map(S=>`[${S}]`).join(""),this.scope=x,this.errors=w,this.expectedType=v,this._isConstant=l}parse(s,l,f,v,x={}){return l?this.concat(l,f,v)._parse(s,x):this._parse(s,x)}_parse(s,l){function f(v,x,w){return w==="assert"?new go(x,[v]):w==="coerce"?new yo(x,[v]):v}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let v=s[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let x=this.registry[v];if(x){let w=x.parse(s,this);if(!w)return null;if(this.expectedType){let S=this.expectedType,C=w.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||C.kind!=="value"){if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||C.kind!=="value"&&C.kind!=="string"){if(S.kind!=="padding"||C.kind!=="value"&&C.kind!=="number"&&C.kind!=="array"){if(S.kind!=="variableAnchorOffsetCollection"||C.kind!=="value"&&C.kind!=="array"){if(this.checkSubtype(S,C))return null}else w=f(w,S,l.typeAnnotation||"coerce");}else w=f(w,S,l.typeAnnotation||"coerce");}else w=f(w,S,l.typeAnnotation||"coerce");}else w=f(w,S,l.typeAnnotation||"assert")}if(!(w instanceof vo)&&w.type.kind!=="resolvedImage"&&this._isConstant(w)){let S=new Np;try{w=new vo(w.type,w.evaluate(S))}catch(C){return this.error(C.message),null}}return w}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof s} instead.`)}concat(s,l,f){let v=typeof s=="number"?this.path.concat(s):this.path,x=f?this.scope.concat(f):this.scope;return new Wu(this.registry,this._isConstant,v,l||null,x,this.errors)}error(s,...l){let f=`${this.key}${l.map(v=>`[${v}]`).join("")}`;this.errors.push(new Zn(f,s))}checkSubtype(s,l){let f=ie(s,l);return f&&this.error(f),f}}class Qs{constructor(s,l){this.type=l.type,this.bindings=[].concat(s),this.result=l}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(let l of this.bindings)s(l[1]);s(this.result)}static parse(s,l){if(s.length<4)return l.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);let f=[];for(let x=1;x<s.length-1;x+=2){let w=s[x];if(typeof w!="string")return l.error(`Expected string, but found ${typeof w} instead.`,x);if(/[^a-zA-Z0-9_]/.test(w))return l.error("Variable names must contain only alphanumeric characters or '_'.",x);let S=l.parse(s[x+1],x+1);if(!S)return null;f.push([w,S])}let v=l.parse(s[s.length-1],s.length-1,l.expectedType,f);return v?new Qs(f,v):null}outputDefined(){return this.result.outputDefined()}}class ar{constructor(s,l){this.type=l.type,this.name=s,this.boundExpression=l}static parse(s,l){if(s.length!==2||typeof s[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");let f=s[1];return l.scope.has(f)?new ar(f,l.scope.get(f)):l.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class gg{constructor(s,l,f){this.type=s,this.index=l,this.input=f}static parse(s,l){if(s.length!==3)return l.error(`Expected 2 arguments, but found ${s.length-1} instead.`);let f=l.parse(s[1],1,ze),v=l.parse(s[2],2,B(l.expectedType||Et));return f&&v?new gg(v.type.itemType,f,v):null}evaluate(s){let l=this.index.evaluate(s),f=this.input.evaluate(s);if(l<0)throw new dn(`Array index out of bounds: ${l} < 0.`);if(l>=f.length)throw new dn(`Array index out of bounds: ${l} > ${f.length-1}.`);if(l!==Math.floor(l))throw new dn(`Array index must be an integer, but found ${l} instead.`);return f[l]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class yg{constructor(s,l){this.type=ft,this.needle=s,this.haystack=l}static parse(s,l){if(s.length!==3)return l.error(`Expected 2 arguments, but found ${s.length-1} instead.`);let f=l.parse(s[1],1,Et),v=l.parse(s[2],2,Et);return f&&v?de(f.type,[ft,It,ze,ji,Et])?new yg(f,v):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${j(f.type)} instead`):null}evaluate(s){let l=this.needle.evaluate(s),f=this.haystack.evaluate(s);if(!f)return!1;if(!ve(l,["boolean","string","number","null"]))throw new dn(`Expected first argument to be of type boolean, string, number or null, but found ${j(En(l))} instead.`);if(!ve(f,["string","array"]))throw new dn(`Expected second argument to be of type array or string, but found ${j(En(f))} instead.`);return f.indexOf(l)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class ac{constructor(s,l,f){this.type=ze,this.needle=s,this.haystack=l,this.fromIndex=f}static parse(s,l){if(s.length<=2||s.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);let f=l.parse(s[1],1,Et),v=l.parse(s[2],2,Et);if(!f||!v)return null;if(!de(f.type,[ft,It,ze,ji,Et]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${j(f.type)} instead`);if(s.length===4){let x=l.parse(s[3],3,ze);return x?new ac(f,v,x):null}return new ac(f,v)}evaluate(s){let l=this.needle.evaluate(s),f=this.haystack.evaluate(s);if(!ve(l,["boolean","string","number","null"]))throw new dn(`Expected first argument to be of type boolean, string, number or null, but found ${j(En(l))} instead.`);let v;if(this.fromIndex&&(v=this.fromIndex.evaluate(s)),ve(f,["string"])){let x=f.indexOf(l,v);return x===-1?-1:[...f.slice(0,x)].length}if(ve(f,["array"]))return f.indexOf(l,v);throw new dn(`Expected second argument to be of type array or string, but found ${j(En(f))} instead.`)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class _g{constructor(s,l,f,v,x,w){this.inputType=s,this.type=l,this.input=f,this.cases=v,this.outputs=x,this.otherwise=w}static parse(s,l){if(s.length<5)return l.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return l.error("Expected an even number of arguments.");let f,v;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);let x={},w=[];for(let O=2;O<s.length-1;O+=2){let R=s[O],k=s[O+1];Array.isArray(R)||(R=[R]);let z=l.concat(O);if(R.length===0)return z.error("Expected at least one branch label.");for(let Z of R){if(typeof Z!="number"&&typeof Z!="string")return z.error("Branch labels must be numbers or strings.");if(typeof Z=="number"&&Math.abs(Z)>Number.MAX_SAFE_INTEGER)return z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Z=="number"&&Math.floor(Z)!==Z)return z.error("Numeric branch labels must be integer values.");if(f){if(z.checkSubtype(f,En(Z)))return null}else f=En(Z);if(x[String(Z)]!==void 0)return z.error("Branch labels must be unique.");x[String(Z)]=w.length}let U=l.parse(k,O,v);if(!U)return null;v=v||U.type,w.push(U)}let S=l.parse(s[1],1,Et);if(!S)return null;let C=l.parse(s[s.length-1],s.length-1,v);return C?S.type.kind!=="value"&&l.concat(1).checkSubtype(f,S.type)?null:new _g(f,v,S,x,w,C):null}evaluate(s){let l=this.input.evaluate(s);return(En(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class Fp{constructor(s,l,f){this.type=s,this.branches=l,this.otherwise=f}static parse(s,l){if(s.length<4)return l.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return l.error("Expected an odd number of arguments.");let f;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);let v=[];for(let w=1;w<s.length-1;w+=2){let S=l.parse(s[w],w,ft);if(!S)return null;let C=l.parse(s[w+1],w+1,f);if(!C)return null;v.push([S,C]),f=f||C.type}let x=l.parse(s[s.length-1],s.length-1,f);if(!x)return null;if(!f)throw new Error("Can't infer output type");return new Fp(f,v,x)}evaluate(s){for(let[l,f]of this.branches)if(l.evaluate(s))return f.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(let[l,f]of this.branches)s(l),s(f);s(this.otherwise)}outputDefined(){return this.branches.every(([s,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Yh{constructor(s,l,f,v){this.type=s,this.input=l,this.beginIndex=f,this.endIndex=v}static parse(s,l){if(s.length<=2||s.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);let f=l.parse(s[1],1,Et),v=l.parse(s[2],2,ze);if(!f||!v)return null;if(!de(f.type,[B(Et),It,Et]))return l.error(`Expected first argument to be of type array or string, but found ${j(f.type)} instead`);if(s.length===4){let x=l.parse(s[3],3,ze);return x?new Yh(f.type,f,v,x):null}return new Yh(f.type,f,v)}evaluate(s){let l=this.input.evaluate(s),f=this.beginIndex.evaluate(s),v;if(this.endIndex&&(v=this.endIndex.evaluate(s)),ve(l,["string"]))return[...l].slice(f,v).join("");if(ve(l,["array"]))return l.slice(f,v);throw new dn(`Expected first argument to be of type array or string, but found ${j(En(l))} instead.`)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function zp(u,s){let l=u.length-1,f,v,x=0,w=l,S=0;for(;x<=w;)if(S=Math.floor((x+w)/2),f=u[S],v=u[S+1],f<=s){if(S===l||s<v)return S;x=S+1}else{if(!(f>s))throw new dn("Input is not a number.");w=S-1}return 0}class oc{constructor(s,l,f){this.type=s,this.input=l,this.labels=[],this.outputs=[];for(let[v,x]of f)this.labels.push(v),this.outputs.push(x)}static parse(s,l){if(s.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return l.error("Expected an even number of arguments.");let f=l.parse(s[1],1,ze);if(!f)return null;let v=[],x=null;l.expectedType&&l.expectedType.kind!=="value"&&(x=l.expectedType);for(let w=1;w<s.length;w+=2){let S=w===1?-1/0:s[w],C=s[w+1],O=w,R=w+1;if(typeof S!="number")return l.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",O);if(v.length&&v[v.length-1][0]>=S)return l.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",O);let k=l.parse(C,R,x);if(!k)return null;x=x||k.type,v.push([S,k])}return new oc(x,f,v)}evaluate(s){let l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(s);let v=this.input.evaluate(s);if(v<=l[0])return f[0].evaluate(s);let x=l.length;return v>=l[x-1]?f[x-1].evaluate(s):f[zp(l,v)].evaluate(s)}eachChild(s){s(this.input);for(let l of this.outputs)s(l)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function E1(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var KA=S1;function S1(u,s,l,f){this.cx=3*u,this.bx=3*(l-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(f-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=s,this.p2x=l,this.p2y=f}S1.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,s){if(s===void 0&&(s=1e-6),u<0)return 0;if(u>1)return 1;for(var l=u,f=0;f<8;f++){var v=this.sampleCurveX(l)-u;if(Math.abs(v)<s)return l;var x=this.sampleCurveDerivativeX(l);if(Math.abs(x)<1e-6)break;l-=v/x}var w=0,S=1;for(l=u,f=0;f<20&&(v=this.sampleCurveX(l),!(Math.abs(v-u)<s));f++)u>v?w=l:S=l,l=.5*(S-w)+w;return l},solve:function(u,s){return this.sampleCurveY(this.solveCurveX(u,s))}};var XA=E1(KA);function Zu(u,s,l){return u+l*(s-u)}function Jh(u,s,l){return u.map((f,v)=>Zu(f,s[v],l))}let Bi={number:Zu,color:function(u,s,l,f="rgb"){switch(f){case"rgb":{let[v,x,w,S]=Jh(u.rgb,s.rgb,l);return new mr(v,x,w,S,!1)}case"hcl":{let[v,x,w,S]=u.hcl,[C,O,R,k]=s.hcl,z,U;if(isNaN(v)||isNaN(C))isNaN(v)?isNaN(C)?z=NaN:(z=C,w!==1&&w!==0||(U=O)):(z=v,R!==1&&R!==0||(U=x));else{let xe=C-v;C>v&&xe>180?xe-=360:C<v&&v-C>180&&(xe+=360),z=v+l*xe}let[Z,X,ne,ue]=function([xe,pe,ye,Se]){return xe=isNaN(xe)?0:xe*ht,Xr([ye,Math.cos(xe)*pe,Math.sin(xe)*pe,Se])}([z,U!=null?U:Zu(x,O,l),Zu(w,R,l),Zu(S,k,l)]);return new mr(Z,X,ne,ue,!1)}case"lab":{let[v,x,w,S]=Xr(Jh(u.lab,s.lab,l));return new mr(v,x,w,S,!1)}}},array:Jh,padding:function(u,s,l){return new va(Jh(u.values,s.values,l))},variableAnchorOffsetCollection:function(u,s,l){let f=u.values,v=s.values;if(f.length!==v.length)throw new dn(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${s.toString()}`);let x=[];for(let w=0;w<f.length;w+=2){if(f[w]!==v[w])throw new dn(`Cannot interpolate values containing mismatched anchors. from[${w}]: ${f[w]}, to[${w}]: ${v[w]}`);x.push(f[w]);let[S,C]=f[w+1],[O,R]=v[w+1];x.push([Zu(S,O,l),Zu(C,R,l)])}return new La(x)}};class Ui{constructor(s,l,f,v,x){this.type=s,this.operator=l,this.interpolation=f,this.input=v,this.labels=[],this.outputs=[];for(let[w,S]of x)this.labels.push(w),this.outputs.push(S)}static interpolationFactor(s,l,f,v){let x=0;if(s.name==="exponential")x=jp(l,s.base,f,v);else if(s.name==="linear")x=jp(l,1,f,v);else if(s.name==="cubic-bezier"){let w=s.controlPoints;x=new XA(w[0],w[1],w[2],w[3]).solve(jp(l,1,f,v))}return x}static parse(s,l){let[f,v,x,...w]=s;if(!Array.isArray(v)||v.length===0)return l.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){let O=v[1];if(typeof O!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:O}}else{if(v[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(v[0])}`,1,0);{let O=v.slice(1);if(O.length!==4||O.some(R=>typeof R!="number"||R<0||R>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:O}}}if(s.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(x=l.parse(x,2,ze),!x)return null;let S=[],C=null;f==="interpolate-hcl"||f==="interpolate-lab"?C=ai:l.expectedType&&l.expectedType.kind!=="value"&&(C=l.expectedType);for(let O=0;O<w.length;O+=2){let R=w[O],k=w[O+1],z=O+3,U=O+4;if(typeof R!="number")return l.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",z);if(S.length&&S[S.length-1][0]>=R)return l.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",z);let Z=l.parse(k,U,C);if(!Z)return null;C=C||Z.type,S.push([R,Z])}return _e(C,ze)||_e(C,ai)||_e(C,Js)||_e(C,oe)||_e(C,B(ze))?new Ui(C,f,v,x,S):l.error(`Type ${j(C)} is not interpolatable.`)}evaluate(s){let l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(s);let v=this.input.evaluate(s);if(v<=l[0])return f[0].evaluate(s);let x=l.length;if(v>=l[x-1])return f[x-1].evaluate(s);let w=zp(l,v),S=Ui.interpolationFactor(this.interpolation,v,l[w],l[w+1]),C=f[w].evaluate(s),O=f[w+1].evaluate(s);switch(this.operator){case"interpolate":return Bi[this.type.kind](C,O,S);case"interpolate-hcl":return Bi.color(C,O,S,"hcl");case"interpolate-lab":return Bi.color(C,O,S,"lab");}}eachChild(s){s(this.input);for(let l of this.outputs)s(l)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function jp(u,s,l,f){let v=f-l,x=u-l;return v===0?0:s===1?x/v:(Math.pow(s,x)-1)/(Math.pow(s,v)-1)}class Bp{constructor(s,l){this.type=s,this.args=l}static parse(s,l){if(s.length<2)return l.error("Expectected at least one argument.");let f=null,v=l.expectedType;v&&v.kind!=="value"&&(f=v);let x=[];for(let S of s.slice(1)){let C=l.parse(S,1+x.length,f,void 0,{typeAnnotation:"omit"});if(!C)return null;f=f||C.type,x.push(C)}if(!f)throw new Error("No output type");let w=v&&x.some(S=>ie(v,S.type));return new Bp(w?Et:f,x)}evaluate(s){let l,f=null,v=0;for(let x of this.args)if(v++,f=x.evaluate(s),f&&f instanceof ga&&!f.available&&(l||(l=f.name),f=null,v===this.args.length&&(f=l)),f!==null)break;return f}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}function Up(u,s){return u==="=="||u==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function T1(u,s,l,f){return f.compare(s,l)===0}function sc(u,s,l){let f=u!=="=="&&u!=="!=";return class m_e{constructor(x,w,S){this.type=ft,this.lhs=x,this.rhs=w,this.collator=S,this.hasUntypedArgument=x.type.kind==="value"||w.type.kind==="value"}static parse(x,w){if(x.length!==3&&x.length!==4)return w.error("Expected two or three arguments.");let S=x[0],C=w.parse(x[1],1,Et);if(!C)return null;if(!Up(S,C.type))return w.concat(1).error(`"${S}" comparisons are not supported for type '${j(C.type)}'.`);let O=w.parse(x[2],2,Et);if(!O)return null;if(!Up(S,O.type))return w.concat(2).error(`"${S}" comparisons are not supported for type '${j(O.type)}'.`);if(C.type.kind!==O.type.kind&&C.type.kind!=="value"&&O.type.kind!=="value")return w.error(`Cannot compare types '${j(C.type)}' and '${j(O.type)}'.`);f&&(C.type.kind==="value"&&O.type.kind!=="value"?C=new go(O.type,[C]):C.type.kind!=="value"&&O.type.kind==="value"&&(O=new go(C.type,[O])));let R=null;if(x.length===4){if(C.type.kind!=="string"&&O.type.kind!=="string"&&C.type.kind!=="value"&&O.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(R=w.parse(x[3],3,Fo),!R)return null}return new m_e(C,O,R)}evaluate(x){let w=this.lhs.evaluate(x),S=this.rhs.evaluate(x);if(f&&this.hasUntypedArgument){let C=En(w),O=En(S);if(C.kind!==O.kind||C.kind!=="string"&&C.kind!=="number")throw new dn(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${C.kind}, ${O.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){let C=En(w),O=En(S);if(C.kind!=="string"||O.kind!=="string")return s(x,w,S)}return this.collator?l(x,w,S,this.collator.evaluate(x)):s(x,w,S)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}let YA=sc("==",function(u,s,l){return s===l},T1),I1=sc("!=",function(u,s,l){return s!==l},function(u,s,l,f){return!T1(0,s,l,f)}),C1=sc("<",function(u,s,l){return s<l},function(u,s,l,f){return f.compare(s,l)<0}),JA=sc(">",function(u,s,l){return s>l},function(u,s,l,f){return f.compare(s,l)>0}),QA=sc("<=",function(u,s,l){return s<=l},function(u,s,l,f){return f.compare(s,l)<=0}),A1=sc(">=",function(u,s,l){return s>=l},function(u,s,l,f){return f.compare(s,l)>=0});class Qh{constructor(s,l,f){this.type=Fo,this.locale=f,this.caseSensitive=s,this.diacriticSensitive=l}static parse(s,l){if(s.length!==2)return l.error("Expected one argument.");let f=s[1];if(typeof f!="object"||Array.isArray(f))return l.error("Collator options argument must be an object.");let v=l.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,ft);if(!v)return null;let x=l.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,ft);if(!x)return null;let w=null;return f.locale&&(w=l.parse(f.locale,1,It),!w)?null:new Qh(v,x,w)}evaluate(s){return new dg(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}class xg{constructor(s,l,f,v,x){this.type=It,this.number=s,this.locale=l,this.currency=f,this.minFractionDigits=v,this.maxFractionDigits=x}static parse(s,l){if(s.length!==3)return l.error("Expected two arguments.");let f=l.parse(s[1],1,ze);if(!f)return null;let v=s[2];if(typeof v!="object"||Array.isArray(v))return l.error("NumberFormat options argument must be an object.");let x=null;if(v.locale&&(x=l.parse(v.locale,1,It),!x))return null;let w=null;if(v.currency&&(w=l.parse(v.currency,1,It),!w))return null;let S=null;if(v["min-fraction-digits"]&&(S=l.parse(v["min-fraction-digits"],1,ze),!S))return null;let C=null;return v["max-fraction-digits"]&&(C=l.parse(v["max-fraction-digits"],1,ze),!C)?null:new xg(f,x,w,S,C)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class Vp{constructor(s){this.type=Is,this.sections=s}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");let f=s[1];if(!Array.isArray(f)&&typeof f=="object")return l.error("First argument must be an image or text section.");let v=[],x=!1;for(let w=1;w<=s.length-1;++w){let S=s[w];if(x&&typeof S=="object"&&!Array.isArray(S)){x=!1;let C=null;if(S["font-scale"]&&(C=l.parse(S["font-scale"],1,ze),!C))return null;let O=null;if(S["text-font"]&&(O=l.parse(S["text-font"],1,B(It)),!O))return null;let R=null;if(S["text-color"]&&(R=l.parse(S["text-color"],1,ai),!R))return null;let k=v[v.length-1];k.scale=C,k.font=O,k.textColor=R}else{let C=l.parse(s[w],1,Et);if(!C)return null;let O=C.type.kind;if(O!=="string"&&O!=="value"&&O!=="null"&&O!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,v.push({content:C,scale:null,font:null,textColor:null})}}return new Vp(v)}evaluate(s){return new ma(this.sections.map(l=>{let f=l.content.evaluate(s);return En(f)===zo?new mg("",f,null,null,null):new mg(Xh(f),null,l.scale?l.scale.evaluate(s):null,l.font?l.font.evaluate(s).join(","):null,l.textColor?l.textColor.evaluate(s):null)}))}eachChild(s){for(let l of this.sections)s(l.content),l.scale&&s(l.scale),l.font&&s(l.font),l.textColor&&s(l.textColor)}outputDefined(){return!1}}class wg{constructor(s){this.type=zo,this.input=s}static parse(s,l){if(s.length!==2)return l.error("Expected two arguments.");let f=l.parse(s[1],1,It);return f?new wg(f):l.error("No image name provided.")}evaluate(s){let l=this.input.evaluate(s),f=ga.fromString(l);return f&&s.availableImages&&(f.available=s.availableImages.indexOf(l)>-1),f}eachChild(s){s(this.input)}outputDefined(){return!1}}class bg{constructor(s){this.type=ze,this.input=s}static parse(s,l){if(s.length!==2)return l.error(`Expected 1 argument, but found ${s.length-1} instead.`);let f=l.parse(s[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${j(f.type)} instead.`):new bg(f):null}evaluate(s){let l=this.input.evaluate(s);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new dn(`Expected value to be of type string or array, but found ${j(En(l))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}let jo=8192;function eq(u,s){let l=(180+u[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,v=Math.pow(2,s.z);return[Math.round(l*v*jo),Math.round(f*v*jo)]}function Eg(u,s){let l=Math.pow(2,s.z);return[(v=(u[0]/jo+s.x)/l,360*v-180),(f=(u[1]/jo+s.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,v}function Hu(u,s){u[0]=Math.min(u[0],s[0]),u[1]=Math.min(u[1],s[1]),u[2]=Math.max(u[2],s[0]),u[3]=Math.max(u[3],s[1])}function eu(u,s){return!(u[0]<=s[0]||u[2]>=s[2]||u[1]<=s[1]||u[3]>=s[3])}function ur(u,s,l){let f=u[0]-s[0],v=u[1]-s[1],x=u[0]-l[0],w=u[1]-l[1];return f*w-x*v==0&&f*x<=0&&v*w<=0}function $p(u,s,l,f){return(v=[f[0]-l[0],f[1]-l[1]])[0]*(x=[s[0]-u[0],s[1]-u[1]])[1]-v[1]*x[0]!=0&&!(!P1(u,s,l,f)||!P1(l,f,u,s));var v,x}function tq(u,s,l){for(let f of l)for(let v=0;v<f.length-1;++v)if($p(u,s,f[v],f[v+1]))return!0;return!1}function uc(u,s,l=!1){let f=!1;for(let S of s)for(let C=0;C<S.length-1;C++){if(ur(u,S[C],S[C+1]))return l;(x=S[C])[1]>(v=u)[1]!=(w=S[C+1])[1]>v[1]&&v[0]<(w[0]-x[0])*(v[1]-x[1])/(w[1]-x[1])+x[0]&&(f=!f)}var v,x,w;return f}function rq(u,s){for(let l of s)if(uc(u,l))return!0;return!1}function q1(u,s){for(let l of u)if(!uc(l,s))return!1;for(let l=0;l<u.length-1;++l)if(tq(u[l],u[l+1],s))return!1;return!0}function nq(u,s){for(let l of s)if(q1(u,l))return!0;return!1}function P1(u,s,l,f){let v=f[0]-l[0],x=f[1]-l[1],w=(u[0]-l[0])*x-v*(u[1]-l[1]),S=(s[0]-l[0])*x-v*(s[1]-l[1]);return w>0&&S<0||w<0&&S>0}function Sg(u,s,l){let f=[];for(let v=0;v<u.length;v++){let x=[];for(let w=0;w<u[v].length;w++){let S=eq(u[v][w],l);Hu(s,S),x.push(S)}f.push(x)}return f}function M1(u,s,l){let f=[];for(let v=0;v<u.length;v++){let x=Sg(u[v],s,l);f.push(x)}return f}function O1(u,s,l,f){if(u[0]<l[0]||u[0]>l[2]){let v=.5*f,x=u[0]-l[0]>v?-f:l[0]-u[0]>v?f:0;x===0&&(x=u[0]-l[2]>v?-f:l[2]-u[0]>v?f:0),u[0]+=x}Hu(s,u)}function R1(u,s,l,f){let v=Math.pow(2,f.z)*jo,x=[f.x*jo,f.y*jo],w=[];for(let S of u)for(let C of S){let O=[C.x+x[0],C.y+x[1]];O1(O,s,l,v),w.push(O)}return w}function D1(u,s,l,f){let v=Math.pow(2,f.z)*jo,x=[f.x*jo,f.y*jo],w=[];for(let C of u){let O=[];for(let R of C){let k=[R.x+x[0],R.y+x[1]];Hu(s,k),O.push(k)}w.push(O)}if(s[2]-s[0]<=v/2){(S=s)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(let C of w)for(let O of C)O1(O,s,l,v)}var S;return w}class Ku{constructor(s,l){this.type=ft,this.geojson=s,this.geometries=l}static parse(s,l){if(s.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Gu(s[1])){let f=s[1];if(f.type==="FeatureCollection"){let v=[];for(let x of f.features){let{type:w,coordinates:S}=x.geometry;w==="Polygon"&&v.push(S),w==="MultiPolygon"&&v.push(...S)}if(v.length)return new Ku(f,{type:"MultiPolygon",coordinates:v})}else if(f.type==="Feature"){let v=f.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Ku(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new Ku(f,f)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(l,f){let v=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=l.canonicalID();if(f.type==="Polygon"){let S=Sg(f.coordinates,x,w),C=R1(l.geometry(),v,x,w);if(!eu(v,x))return!1;for(let O of C)if(!uc(O,S))return!1}if(f.type==="MultiPolygon"){let S=M1(f.coordinates,x,w),C=R1(l.geometry(),v,x,w);if(!eu(v,x))return!1;for(let O of C)if(!rq(O,S))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(l,f){let v=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=l.canonicalID();if(f.type==="Polygon"){let S=Sg(f.coordinates,x,w),C=D1(l.geometry(),v,x,w);if(!eu(v,x))return!1;for(let O of C)if(!q1(O,S))return!1}if(f.type==="MultiPolygon"){let S=M1(f.coordinates,x,w),C=D1(l.geometry(),v,x,w);if(!eu(v,x))return!1;for(let O of C)if(!nq(O,S))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let L1=class{constructor(u=[],s=(l,f)=>l<f?-1:l>f?1:0){if(this.data=u,this.length=this.data.length,this.compare=s,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;let u=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),u}peek(){return this.data[0]}_up(u){let{data:s,compare:l}=this,f=s[u];for(;u>0;){let v=u-1>>1,x=s[v];if(l(f,x)>=0)break;s[u]=x,u=v}s[u]=f}_down(u){let{data:s,compare:l}=this,f=this.length>>1,v=s[u];for(;u<f;){let x=1+(u<<1),w=x+1;if(w<this.length&&l(s[w],s[x])<0&&(x=w),l(s[x],v)>=0)break;s[u]=s[x],u=x}s[u]=v}};function iq(u,s,l,f,v){k1(u,s,l,f||u.length-1,v||aq)}function k1(u,s,l,f,v){for(;f>l;){if(f-l>600){var x=f-l+1,w=s-l+1,S=Math.log(x),C=.5*Math.exp(2*S/3),O=.5*Math.sqrt(S*C*(x-C)/x)*(w-x/2<0?-1:1);k1(u,s,Math.max(l,Math.floor(s-w*C/x+O)),Math.min(f,Math.floor(s+(x-w)*C/x+O)),v)}var R=u[s],k=l,z=f;for(ef(u,l,s),v(u[f],R)>0&&ef(u,l,f);k<z;){for(ef(u,k,z),k++,z--;v(u[k],R)<0;)k++;for(;v(u[z],R)>0;)z--}v(u[l],R)===0?ef(u,l,z):ef(u,++z,f),z<=s&&(l=z+1),s<=z&&(f=z-1)}}function ef(u,s,l){var f=u[s];u[s]=u[l],u[l]=f}function aq(u,s){return u<s?-1:u>s?1:0}function Gp(u,s){if(u.length<=1)return[u];let l=[],f,v;for(let x of u){let w=sq(x);w!==0&&(x.area=Math.abs(w),v===void 0&&(v=w<0),v===w<0?(f&&l.push(f),f=[x]):f.push(x))}if(f&&l.push(f),s>1)for(let x=0;x<l.length;x++)l[x].length<=s||(iq(l[x],s,1,l[x].length-1,oq),l[x]=l[x].slice(0,s));return l}function oq(u,s){return s.area-u.area}function sq(u){let s=0;for(let l,f,v=0,x=u.length,w=x-1;v<x;w=v++)l=u[v],f=u[w],s+=(f.x-l.x)*(l.y+f.y);return s}let N1=1/298.257223563,F1=N1*(2-N1),z1=Math.PI/180;class Tg{constructor(s){let l=6378.137*z1*1e3,f=Math.cos(s*z1),v=1/(1-F1*(1-f*f)),x=Math.sqrt(v);this.kx=l*x*f,this.ky=l*x*v*(1-F1)}distance(s,l){let f=this.wrap(s[0]-l[0])*this.kx,v=(s[1]-l[1])*this.ky;return Math.sqrt(f*f+v*v)}pointOnLine(s,l){let f,v,x,w,S=1/0;for(let C=0;C<s.length-1;C++){let O=s[C][0],R=s[C][1],k=this.wrap(s[C+1][0]-O)*this.kx,z=(s[C+1][1]-R)*this.ky,U=0;k===0&&z===0||(U=(this.wrap(l[0]-O)*this.kx*k+(l[1]-R)*this.ky*z)/(k*k+z*z),U>1?(O=s[C+1][0],R=s[C+1][1]):U>0&&(O+=k/this.kx*U,R+=z/this.ky*U)),k=this.wrap(l[0]-O)*this.kx,z=(l[1]-R)*this.ky;let Z=k*k+z*z;Z<S&&(S=Z,f=O,v=R,x=C,w=U)}return{point:[f,v],index:x,t:Math.max(0,Math.min(1,w))}}wrap(s){for(;s<-180;)s+=360;for(;s>180;)s-=360;return s}}function j1(u,s){return s[0]-u[0]}function Wp(u){return u[1]-u[0]+1}function Cs(u,s){return u[1]>=u[0]&&u[1]<s}function Ig(u,s){if(u[0]>u[1])return[null,null];let l=Wp(u);if(s){if(l===2)return[u,null];let v=Math.floor(l/2);return[[u[0],u[0]+v],[u[0]+v,u[1]]]}if(l===1)return[u,null];let f=Math.floor(l/2)-1;return[[u[0],u[0]+f],[u[0]+f+1,u[1]]]}function Cg(u,s){if(!Cs(s,u.length))return[1/0,1/0,-1/0,-1/0];let l=[1/0,1/0,-1/0,-1/0];for(let f=s[0];f<=s[1];++f)Hu(l,u[f]);return l}function Ag(u){let s=[1/0,1/0,-1/0,-1/0];for(let l of u)for(let f of l)Hu(s,f);return s}function Zp(u){return u[0]!==-1/0&&u[1]!==-1/0&&u[2]!==1/0&&u[3]!==1/0}function qg(u,s,l){if(!Zp(u)||!Zp(s))return NaN;let f=0,v=0;return u[2]<s[0]&&(f=s[0]-u[2]),u[0]>s[2]&&(f=u[0]-s[2]),u[1]>s[3]&&(v=u[1]-s[3]),u[3]<s[1]&&(v=s[1]-u[3]),l.distance([0,0],[f,v])}function Xu(u,s,l){let f=l.pointOnLine(s,u);return l.distance(u,f.point)}function Pg(u,s,l,f,v){let x=Math.min(Xu(u,[l,f],v),Xu(s,[l,f],v)),w=Math.min(Xu(l,[u,s],v),Xu(f,[u,s],v));return Math.min(x,w)}function uq(u,s,l,f,v){if(!Cs(s,u.length)||!Cs(f,l.length))return 1/0;let x=1/0;for(let w=s[0];w<s[1];++w){let S=u[w],C=u[w+1];for(let O=f[0];O<f[1];++O){let R=l[O],k=l[O+1];if($p(S,C,R,k))return 0;x=Math.min(x,Pg(S,C,R,k,v))}}return x}function on(u,s,l,f,v){if(!Cs(s,u.length)||!Cs(f,l.length))return NaN;let x=1/0;for(let w=s[0];w<=s[1];++w)for(let S=f[0];S<=f[1];++S)if(x=Math.min(x,v.distance(u[w],l[S])),x===0)return x;return x}function lq(u,s,l){if(uc(u,s,!0))return 0;let f=1/0;for(let v of s){let x=v[0],w=v[v.length-1];if(x!==w&&(f=Math.min(f,Xu(u,[w,x],l)),f===0))return f;let S=l.pointOnLine(v,u);if(f=Math.min(f,l.distance(u,S.point)),f===0)return f}return f}function Nt(u,s,l,f){if(!Cs(s,u.length))return NaN;for(let x=s[0];x<=s[1];++x)if(uc(u[x],l,!0))return 0;let v=1/0;for(let x=s[0];x<s[1];++x){let w=u[x],S=u[x+1];for(let C of l)for(let O=0,R=C.length,k=R-1;O<R;k=O++){let z=C[k],U=C[O];if($p(w,S,z,U))return 0;v=Math.min(v,Pg(w,S,z,U,f))}}return v}function Hp(u,s){for(let l of u)for(let f of l)if(uc(f,s,!0))return!0;return!1}function Ar(u,s,l,f=1/0){let v=Ag(u),x=Ag(s);if(f!==1/0&&qg(v,x,l)>=f)return f;if(eu(v,x)){if(Hp(u,s))return 0}else if(Hp(s,u))return 0;let w=1/0;for(let S of u)for(let C=0,O=S.length,R=O-1;C<O;R=C++){let k=S[R],z=S[C];for(let U of s)for(let Z=0,X=U.length,ne=X-1;Z<X;ne=Z++){let ue=U[ne],xe=U[Z];if($p(k,z,ue,xe))return 0;w=Math.min(w,Pg(k,z,ue,xe,l))}}return w}function _r(u,s,l,f,v,x){if(!x)return;let w=qg(Cg(f,x),v,l);w<s&&u.push([w,x,[0,0]])}function Yu(u,s,l,f,v,x,w){if(!x||!w)return;let S=qg(Cg(f,x),Cg(v,w),l);S<s&&u.push([S,x,w])}function tf(u,s,l,f,v=1/0){let x=Math.min(f.distance(u[0],l[0][0]),v);if(x===0)return x;let w=new L1([[0,[0,u.length-1],[0,0]]],j1),S=Ag(l);for(;w.length>0;){let C=w.pop();if(C[0]>=x)continue;let O=C[1],R=s?50:100;if(Wp(O)<=R){if(!Cs(O,u.length))return NaN;if(s){let k=Nt(u,O,l,f);if(isNaN(k)||k===0)return k;x=Math.min(x,k)}else for(let k=O[0];k<=O[1];++k){let z=lq(u[k],l,f);if(x=Math.min(x,z),x===0)return 0}}else{let k=Ig(O,s);_r(w,x,f,u,S,k[0]),_r(w,x,f,u,S,k[1])}}return x}function rf(u,s,l,f,v,x=1/0){let w=Math.min(x,v.distance(u[0],l[0]));if(w===0)return w;let S=new L1([[0,[0,u.length-1],[0,l.length-1]]],j1);for(;S.length>0;){let C=S.pop();if(C[0]>=w)continue;let O=C[1],R=C[2],k=s?50:100,z=f?50:100;if(Wp(O)<=k&&Wp(R)<=z){if(!Cs(O,u.length)&&Cs(R,l.length))return NaN;let U;if(s&&f)U=uq(u,O,l,R,v),w=Math.min(w,U);else if(s&&!f){let Z=u.slice(O[0],O[1]+1);for(let X=R[0];X<=R[1];++X)if(U=Xu(l[X],Z,v),w=Math.min(w,U),w===0)return w}else if(!s&&f){let Z=l.slice(R[0],R[1]+1);for(let X=O[0];X<=O[1];++X)if(U=Xu(u[X],Z,v),w=Math.min(w,U),w===0)return w}else U=on(u,O,l,R,v),w=Math.min(w,U)}else{let U=Ig(O,s),Z=Ig(R,f);Yu(S,w,v,u,l,U[0],Z[0]),Yu(S,w,v,u,l,U[0],Z[1]),Yu(S,w,v,u,l,U[1],Z[0]),Yu(S,w,v,u,l,U[1],Z[1])}}return w}function Mg(u){return u.type==="MultiPolygon"?u.coordinates.map(s=>({type:"Polygon",coordinates:s})):u.type==="MultiLineString"?u.coordinates.map(s=>({type:"LineString",coordinates:s})):u.type==="MultiPoint"?u.coordinates.map(s=>({type:"Point",coordinates:s})):[u]}class Ju{constructor(s,l){this.type=ze,this.geojson=s,this.geometries=l}static parse(s,l){if(s.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Gu(s[1])){let f=s[1];if(f.type==="FeatureCollection")return new Ju(f,f.features.map(v=>Mg(v.geometry)).flat());if(f.type==="Feature")return new Ju(f,Mg(f.geometry));if("type"in f&&"coordinates"in f)return new Ju(f,Mg(f))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(l,f){let v=l.geometry(),x=v.flat().map(C=>Eg([C.x,C.y],l.canonical));if(v.length===0)return NaN;let w=new Tg(x[0][1]),S=1/0;for(let C of f){switch(C.type){case"Point":S=Math.min(S,rf(x,!1,[C.coordinates],!1,w,S));break;case"LineString":S=Math.min(S,rf(x,!1,C.coordinates,!0,w,S));break;case"Polygon":S=Math.min(S,tf(x,!1,C.coordinates,w,S));}if(S===0)return S}return S}(s,this.geometries);if(s.geometryType()==="LineString")return function(l,f){let v=l.geometry(),x=v.flat().map(C=>Eg([C.x,C.y],l.canonical));if(v.length===0)return NaN;let w=new Tg(x[0][1]),S=1/0;for(let C of f){switch(C.type){case"Point":S=Math.min(S,rf(x,!0,[C.coordinates],!1,w,S));break;case"LineString":S=Math.min(S,rf(x,!0,C.coordinates,!0,w,S));break;case"Polygon":S=Math.min(S,tf(x,!0,C.coordinates,w,S));}if(S===0)return S}return S}(s,this.geometries);if(s.geometryType()==="Polygon")return function(l,f){let v=l.geometry();if(v.length===0||v[0].length===0)return NaN;let x=Gp(v,0).map(C=>C.map(O=>O.map(R=>Eg([R.x,R.y],l.canonical)))),w=new Tg(x[0][0][0][1]),S=1/0;for(let C of f)for(let O of x){switch(C.type){case"Point":S=Math.min(S,tf([C.coordinates],!1,O,w,S));break;case"LineString":S=Math.min(S,tf(C.coordinates,!0,O,w,S));break;case"Polygon":S=Math.min(S,Ar(O,C.coordinates,w,S));}if(S===0)return S}return S}(s,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}let lc={"==":YA,"!=":I1,">":JA,"<":C1,">=":A1,"<=":QA,array:go,at:gg,boolean:go,case:Fp,coalesce:Bp,collator:Qh,format:Vp,image:wg,in:yg,"index-of":ac,interpolate:Ui,"interpolate-hcl":Ui,"interpolate-lab":Ui,length:bg,let:Qs,literal:vo,match:_g,number:go,"number-format":xg,object:go,slice:Yh,step:oc,string:go,"to-boolean":yo,"to-color":yo,"to-number":yo,"to-string":yo,var:ar,within:Ku,distance:Ju};class ka{constructor(s,l,f,v){this.name=s,this.type=l,this._evaluate=f,this.args=v}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,l){let f=s[0],v=ka.definitions[f];if(!v)return l.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);let x=Array.isArray(v)?v[0]:v.type,w=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,S=w.filter(([O])=>!Array.isArray(O)||O.length===s.length-1),C=null;for(let[O,R]of S){C=new Wu(l.registry,nf,l.path,null,l.scope);let k=[],z=!1;for(let U=1;U<s.length;U++){let Z=s[U],X=Array.isArray(O)?O[U-1]:O.type,ne=C.parse(Z,1+k.length,X);if(!ne){z=!0;break}k.push(ne)}if(!z)if(Array.isArray(O)&&O.length!==k.length)C.error(`Expected ${O.length} arguments, but found ${k.length} instead.`);else{for(let U=0;U<k.length;U++){let Z=Array.isArray(O)?O[U]:O.type,X=k[U];C.concat(U+1).checkSubtype(Z,X.type)}if(C.errors.length===0)return new ka(f,x,R,k)}}if(S.length===1)l.errors.push(...C.errors);else{let O=(S.length?S:w).map(([k])=>{return z=k,Array.isArray(z)?`(${z.map(j).join(", ")})`:`(${j(z.type)}...)`;var z}).join(" | "),R=[];for(let k=1;k<s.length;k++){let z=l.parse(s[k],1+R.length);if(!z)return null;R.push(j(z.type))}l.error(`Expected arguments of type ${O}, but found (${R.join(", ")}) instead.`)}return null}static register(s,l){ka.definitions=l;for(let f in l)s[f]=ka}}function Og(u,[s,l,f,v]){s=s.evaluate(u),l=l.evaluate(u),f=f.evaluate(u);let x=v?v.evaluate(u):1,w=ic(s,l,f,x);if(w)throw new dn(w);return new mr(s/255,l/255,f/255,x,!1)}function Rg(u,s){return u in s}function Dg(u,s){let l=s[u];return l===void 0?null:l}function Qu(u){return{type:u}}function nf(u){if(u instanceof ar)return nf(u.boundExpression);if(u instanceof ka&&u.name==="error"||u instanceof Qh||u instanceof Ku||u instanceof Ju)return!1;let s=u instanceof yo||u instanceof go,l=!0;return u.eachChild(f=>{l=s?l&&nf(f):l&&f instanceof vo}),!!l&&af(u)&&of(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function af(u){if(u instanceof ka&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof Ku||u instanceof Ju)return!1;let s=!0;return u.eachChild(l=>{s&&!af(l)&&(s=!1)}),s}function cc(u){if(u instanceof ka&&u.name==="feature-state")return!1;let s=!0;return u.eachChild(l=>{s&&!cc(l)&&(s=!1)}),s}function of(u,s){if(u instanceof ka&&s.indexOf(u.name)>=0)return!1;let l=!0;return u.eachChild(f=>{l&&!of(f,s)&&(l=!1)}),l}function Kp(u){return{result:"success",value:u}}function hc(u){return{result:"error",value:u}}function fc(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function B1(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function Lg(u){return!!u.expression&&u.expression.interpolated}function rr(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Xp(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function cq(u){return u}function U1(u,s){let l=s.type==="color",f=u.stops&&typeof u.stops[0][0]=="object",v=f||!(f||u.property!==void 0),x=u.type||(Lg(s)?"exponential":"interval");if(l||s.type==="padding"){let R=l?mr.parse:va.parse;(u=da({},u)).stops&&(u.stops=u.stops.map(k=>[k[0],R(k[1])])),u.default=R(u.default?u.default:s.default)}if(u.colorSpace&&(w=u.colorSpace)!=="rgb"&&w!=="hcl"&&w!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var w;let S,C,O;if(x==="exponential")S=$1;else if(x==="interval")S=Yp;else if(x==="categorical"){S=V1,C=Object.create(null);for(let R of u.stops)C[R[0]]=R[1];O=typeof u.stops[0][0]}else{if(x!=="identity")throw new Error(`Unknown function type "${x}"`);S=G1}if(f){let R={},k=[];for(let Z=0;Z<u.stops.length;Z++){let X=u.stops[Z],ne=X[0].zoom;R[ne]===void 0&&(R[ne]={zoom:ne,type:u.type,property:u.property,default:u.default,stops:[]},k.push(ne)),R[ne].stops.push([X[0].value,X[1]])}let z=[];for(let Z of k)z.push([R[Z].zoom,U1(R[Z],s)]);let U={name:"linear"};return{kind:"composite",interpolationType:U,interpolationFactor:Ui.interpolationFactor.bind(void 0,U),zoomStops:z.map(Z=>Z[0]),evaluate:({zoom:Z},X)=>$1({stops:z,base:u.base},s,Z).evaluate(Z,X)}}if(v){let R=x==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:Ui.interpolationFactor.bind(void 0,R),zoomStops:u.stops.map(k=>k[0]),evaluate:({zoom:k})=>S(u,s,k,C,O)}}return{kind:"source",evaluate(R,k){let z=k&&k.properties?k.properties[u.property]:void 0;return z===void 0?pc(u.default,s.default):S(u,s,z,C,O)}}}function pc(u,s,l){return u!==void 0?u:s!==void 0?s:l!==void 0?l:void 0}function V1(u,s,l,f,v){return pc(typeof l===v?f[l]:void 0,u.default,s.default)}function Yp(u,s,l){if(rr(l)!=="number")return pc(u.default,s.default);let f=u.stops.length;if(f===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[f-1][0])return u.stops[f-1][1];let v=zp(u.stops.map(x=>x[0]),l);return u.stops[v][1]}function $1(u,s,l){let f=u.base!==void 0?u.base:1;if(rr(l)!=="number")return pc(u.default,s.default);let v=u.stops.length;if(v===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[v-1][0])return u.stops[v-1][1];let x=zp(u.stops.map(R=>R[0]),l),w=function(R,k,z,U){let Z=U-z,X=R-z;return Z===0?0:k===1?X/Z:(Math.pow(k,X)-1)/(Math.pow(k,Z)-1)}(l,f,u.stops[x][0],u.stops[x+1][0]),S=u.stops[x][1],C=u.stops[x+1][1],O=Bi[s.type]||cq;return typeof S.evaluate=="function"?{evaluate(...R){let k=S.evaluate.apply(void 0,R),z=C.evaluate.apply(void 0,R);if(k!==void 0&&z!==void 0)return O(k,z,w,u.colorSpace)}}:O(S,C,w,u.colorSpace)}function G1(u,s,l){switch(s.type){case"color":l=mr.parse(l);break;case"formatted":l=ma.fromString(l.toString());break;case"resolvedImage":l=ga.fromString(l.toString());break;case"padding":l=va.parse(l);break;default:rr(l)===s.type||s.type==="enum"&&s.values[l]||(l=void 0);}return pc(l,u.default,s.default)}ka.register(lc,{error:[{kind:"error"},[It],(u,[s])=>{throw new dn(s.evaluate(u))}],typeof:[It,[Et],(u,[s])=>j(En(s.evaluate(u)))],"to-rgba":[B(ze,4),[ai],(u,[s])=>{let[l,f,v,x]=s.evaluate(u).rgb;return[255*l,255*f,255*v,x]}],rgb:[ai,[ze,ze,ze],Og],rgba:[ai,[ze,ze,ze,ze],Og],has:{type:ft,overloads:[[[It],(u,[s])=>Rg(s.evaluate(u),u.properties())],[[It,Ur],(u,[s,l])=>Rg(s.evaluate(u),l.evaluate(u))]]},get:{type:Et,overloads:[[[It],(u,[s])=>Dg(s.evaluate(u),u.properties())],[[It,Ur],(u,[s,l])=>Dg(s.evaluate(u),l.evaluate(u))]]},"feature-state":[Et,[It],(u,[s])=>Dg(s.evaluate(u),u.featureState||{})],properties:[Ur,[],u=>u.properties()],"geometry-type":[It,[],u=>u.geometryType()],id:[Et,[],u=>u.id()],zoom:[ze,[],u=>u.globals.zoom],"heatmap-density":[ze,[],u=>u.globals.heatmapDensity||0],"line-progress":[ze,[],u=>u.globals.lineProgress||0],accumulated:[Et,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[ze,Qu(ze),(u,s)=>{let l=0;for(let f of s)l+=f.evaluate(u);return l}],"*":[ze,Qu(ze),(u,s)=>{let l=1;for(let f of s)l*=f.evaluate(u);return l}],"-":{type:ze,overloads:[[[ze,ze],(u,[s,l])=>s.evaluate(u)-l.evaluate(u)],[[ze],(u,[s])=>-s.evaluate(u)]]},"/":[ze,[ze,ze],(u,[s,l])=>s.evaluate(u)/l.evaluate(u)],"%":[ze,[ze,ze],(u,[s,l])=>s.evaluate(u)%l.evaluate(u)],ln2:[ze,[],()=>Math.LN2],pi:[ze,[],()=>Math.PI],e:[ze,[],()=>Math.E],"^":[ze,[ze,ze],(u,[s,l])=>Math.pow(s.evaluate(u),l.evaluate(u))],sqrt:[ze,[ze],(u,[s])=>Math.sqrt(s.evaluate(u))],log10:[ze,[ze],(u,[s])=>Math.log(s.evaluate(u))/Math.LN10],ln:[ze,[ze],(u,[s])=>Math.log(s.evaluate(u))],log2:[ze,[ze],(u,[s])=>Math.log(s.evaluate(u))/Math.LN2],sin:[ze,[ze],(u,[s])=>Math.sin(s.evaluate(u))],cos:[ze,[ze],(u,[s])=>Math.cos(s.evaluate(u))],tan:[ze,[ze],(u,[s])=>Math.tan(s.evaluate(u))],asin:[ze,[ze],(u,[s])=>Math.asin(s.evaluate(u))],acos:[ze,[ze],(u,[s])=>Math.acos(s.evaluate(u))],atan:[ze,[ze],(u,[s])=>Math.atan(s.evaluate(u))],min:[ze,Qu(ze),(u,s)=>Math.min(...s.map(l=>l.evaluate(u)))],max:[ze,Qu(ze),(u,s)=>Math.max(...s.map(l=>l.evaluate(u)))],abs:[ze,[ze],(u,[s])=>Math.abs(s.evaluate(u))],round:[ze,[ze],(u,[s])=>{let l=s.evaluate(u);return l<0?-Math.round(-l):Math.round(l)}],floor:[ze,[ze],(u,[s])=>Math.floor(s.evaluate(u))],ceil:[ze,[ze],(u,[s])=>Math.ceil(s.evaluate(u))],"filter-==":[ft,[It,Et],(u,[s,l])=>u.properties()[s.value]===l.value],"filter-id-==":[ft,[Et],(u,[s])=>u.id()===s.value],"filter-type-==":[ft,[It],(u,[s])=>u.geometryType()===s.value],"filter-<":[ft,[It,Et],(u,[s,l])=>{let f=u.properties()[s.value],v=l.value;return typeof f==typeof v&&f<v}],"filter-id-<":[ft,[Et],(u,[s])=>{let l=u.id(),f=s.value;return typeof l==typeof f&&l<f}],"filter->":[ft,[It,Et],(u,[s,l])=>{let f=u.properties()[s.value],v=l.value;return typeof f==typeof v&&f>v}],"filter-id->":[ft,[Et],(u,[s])=>{let l=u.id(),f=s.value;return typeof l==typeof f&&l>f}],"filter-<=":[ft,[It,Et],(u,[s,l])=>{let f=u.properties()[s.value],v=l.value;return typeof f==typeof v&&f<=v}],"filter-id-<=":[ft,[Et],(u,[s])=>{let l=u.id(),f=s.value;return typeof l==typeof f&&l<=f}],"filter->=":[ft,[It,Et],(u,[s,l])=>{let f=u.properties()[s.value],v=l.value;return typeof f==typeof v&&f>=v}],"filter-id->=":[ft,[Et],(u,[s])=>{let l=u.id(),f=s.value;return typeof l==typeof f&&l>=f}],"filter-has":[ft,[Et],(u,[s])=>s.value in u.properties()],"filter-has-id":[ft,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[ft,[B(It)],(u,[s])=>s.value.indexOf(u.geometryType())>=0],"filter-id-in":[ft,[B(Et)],(u,[s])=>s.value.indexOf(u.id())>=0],"filter-in-small":[ft,[It,B(Et)],(u,[s,l])=>l.value.indexOf(u.properties()[s.value])>=0],"filter-in-large":[ft,[It,B(Et)],(u,[s,l])=>function(f,v,x,w){for(;x<=w;){let S=x+w>>1;if(v[S]===f)return!0;v[S]>f?w=S-1:x=S+1}return!1}(u.properties()[s.value],l.value,0,l.value.length-1)],all:{type:ft,overloads:[[[ft,ft],(u,[s,l])=>s.evaluate(u)&&l.evaluate(u)],[Qu(ft),(u,s)=>{for(let l of s)if(!l.evaluate(u))return!1;return!0}]]},any:{type:ft,overloads:[[[ft,ft],(u,[s,l])=>s.evaluate(u)||l.evaluate(u)],[Qu(ft),(u,s)=>{for(let l of s)if(l.evaluate(u))return!0;return!1}]]},"!":[ft,[ft],(u,[s])=>!s.evaluate(u)],"is-supported-script":[ft,[It],(u,[s])=>{let l=u.globals&&u.globals.isSupportedScript;return!l||l(s.evaluate(u))}],upcase:[It,[It],(u,[s])=>s.evaluate(u).toUpperCase()],downcase:[It,[It],(u,[s])=>s.evaluate(u).toLowerCase()],concat:[It,Qu(Et),(u,s)=>s.map(l=>Xh(l.evaluate(u))).join("")],"resolved-locale":[It,[Fo],(u,[s])=>s.evaluate(u).resolvedLocale()]});class Jp{constructor(s,l){var f;this.expression=s,this._warningHistory={},this._evaluator=new Np,this._defaultValue=l?(f=l).type==="color"&&Xp(f.default)?new mr(0,0,0,0):f.type==="color"?mr.parse(f.default)||null:f.type==="padding"?va.parse(f.default)||null:f.type==="variableAnchorOffsetCollection"?La.parse(f.default)||null:f.default===void 0?null:f.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(s,l,f,v,x,w){return this._evaluator.globals=s,this._evaluator.feature=l,this._evaluator.featureState=f,this._evaluator.canonical=v,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(s,l,f,v,x,w){this._evaluator.globals=s,this._evaluator.feature=l||null,this._evaluator.featureState=f||null,this._evaluator.canonical=v,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null;try{let S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new dn(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console!="undefined"&&console.warn(S.message)),this._defaultValue}}}function Qp(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in lc}function dc(u,s){let l=new Wu(lc,nf,[],s?function(v){let x={color:ai,string:It,number:ze,enum:It,boolean:ft,formatted:Is,padding:Js,resolvedImage:zo,variableAnchorOffsetCollection:oe};return v.type==="array"?B(x[v.value]||Et,v.length):x[v.type]}(s):void 0),f=l.parse(u,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?Kp(new Jp(f,s)):hc(l.errors)}class mc{constructor(s,l){this.kind=s,this._styleExpression=l,this.isStateDependent=s!=="constant"&&!cc(l.expression)}evaluateWithoutErrorHandling(s,l,f,v,x,w){return this._styleExpression.evaluateWithoutErrorHandling(s,l,f,v,x,w)}evaluate(s,l,f,v,x,w){return this._styleExpression.evaluate(s,l,f,v,x,w)}}class vc{constructor(s,l,f,v){this.kind=s,this.zoomStops=f,this._styleExpression=l,this.isStateDependent=s!=="camera"&&!cc(l.expression),this.interpolationType=v}evaluateWithoutErrorHandling(s,l,f,v,x,w){return this._styleExpression.evaluateWithoutErrorHandling(s,l,f,v,x,w)}evaluate(s,l,f,v,x,w){return this._styleExpression.evaluate(s,l,f,v,x,w)}interpolationFactor(s,l,f){return this.interpolationType?Ui.interpolationFactor(this.interpolationType,s,l,f):0}}function kg(u,s){let l=dc(u,s);if(l.result==="error")return l;let f=l.value.expression,v=af(f);if(!v&&!fc(s))return hc([new Zn("","data expressions not supported")]);let x=of(f,["zoom"]);if(!x&&!B1(s))return hc([new Zn("","zoom expressions not supported")]);let w=sf(f);return w||x?w instanceof Zn?hc([w]):w instanceof Ui&&!Lg(s)?hc([new Zn("","\"interpolate\" expressions cannot be used with this property")]):Kp(w?new vc(v?"camera":"composite",l.value,w.labels,w instanceof Ui?w.interpolation:void 0):new mc(v?"constant":"source",l.value)):hc([new Zn("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class gc{constructor(s,l){this._parameters=s,this._specification=l,da(this,U1(this._parameters,this._specification))}static deserialize(s){return new gc(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function sf(u){let s=null;if(u instanceof Qs)s=sf(u.result);else if(u instanceof Bp){for(let l of u.args)if(s=sf(l),s)break}else(u instanceof oc||u instanceof Ui)&&u.input instanceof ka&&u.input.name==="zoom"&&(s=u);return s instanceof Zn||u.eachChild(l=>{let f=sf(l);f instanceof Zn?s=f:!s&&f?s=new Zn("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):s&&f&&s!==f&&(s=new Zn("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),s}function ed(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(let s of u.slice(1))if(!ed(s)&&typeof s!="boolean")return!1;return!0;default:return!0;}}let td={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ng(u){if(u==null)return{filter:()=>!0,needGeometry:!1};ed(u)||(u=rd(u));let s=dc(u,td);if(s.result==="error")throw new Error(s.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,f,v)=>s.value.evaluate(l,f,{},v),needGeometry:W1(u)}}function hq(u,s){return u<s?-1:u>s?1:0}function W1(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let s=1;s<u.length;s++)if(W1(u[s]))return!0;return!1}function rd(u){if(!u)return!0;let s=u[0];return u.length<=1?s!=="any":s==="=="?Fg(u[1],u[2],"=="):s==="!="?oi(Fg(u[1],u[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Fg(u[1],u[2],s):s==="any"?(l=u.slice(1),["any"].concat(l.map(rd))):s==="all"?["all"].concat(u.slice(1).map(rd)):s==="none"?["all"].concat(u.slice(1).map(rd).map(oi)):s==="in"?uf(u[1],u.slice(2)):s==="!in"?oi(uf(u[1],u.slice(2))):s==="has"?lf(u[1]):s!=="!has"||oi(lf(u[1]));var l}function Fg(u,s,l){switch(u){case"$type":return[`filter-type-${l}`,s];case"$id":return[`filter-id-${l}`,s];default:return[`filter-${l}`,u,s];}}function uf(u,s){if(s.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(l=>typeof l!=typeof s[0])?["filter-in-large",u,["literal",s.sort(hq)]]:["filter-in-small",u,["literal",s]];}}function lf(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u];}}function oi(u){return["!",u]}function el(u){let s=typeof u;if(s==="number"||s==="boolean"||s==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let v="[";for(let x of u)v+=`${el(x)},`;return`${v}]`}let l=Object.keys(u).sort(),f="{";for(let v=0;v<l.length;v++)f+=`${JSON.stringify(l[v])}:${el(u[l[v]])},`;return`${f}}`}function Z1(u){let s="";for(let l of No)s+=`/${el(u[l])}`;return s}function H1(u){let s=u.value;return s?[new Ne(u.key,s,"constants have been deprecated as of v8")]:[]}function sn(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function _o(u){if(Array.isArray(u))return u.map(_o);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){let s={};for(let l in u)s[l]=_o(u[l]);return s}return sn(u)}function ya(u){let s=u.key,l=u.value,f=u.valueSpec||{},v=u.objectElementValidators||{},x=u.style,w=u.styleSpec,S=u.validateSpec,C=[],O=rr(l);if(O!=="object")return[new Ne(s,l,`object expected, ${O} found`)];for(let R in l){let k=R.split(".")[0],z=f[k]||f["*"],U;if(v[k])U=v[k];else if(f[k])U=S;else if(v["*"])U=v["*"];else{if(!f["*"]){C.push(new Ne(s,l[R],`unknown property "${R}"`));continue}U=S}C=C.concat(U({key:(s&&`${s}.`)+R,value:l[R],valueSpec:z,style:x,styleSpec:w,object:l,objectKey:R,validateSpec:S},l))}for(let R in f)v[R]||f[R].required&&f[R].default===void 0&&l[R]===void 0&&C.push(new Ne(s,l,`missing required property "${R}"`));return C}function cf(u){let s=u.value,l=u.valueSpec,f=u.style,v=u.styleSpec,x=u.key,w=u.arrayElementValidator||u.validateSpec;if(rr(s)!=="array")return[new Ne(x,s,`array expected, ${rr(s)} found`)];if(l.length&&s.length!==l.length)return[new Ne(x,s,`array length ${l.length} expected, length ${s.length} found`)];if(l["min-length"]&&s.length<l["min-length"])return[new Ne(x,s,`array length at least ${l["min-length"]} expected, length ${s.length} found`)];let S={type:l.value,values:l.values};v.$version<7&&(S.function=l.function),rr(l.value)==="object"&&(S=l.value);let C=[];for(let O=0;O<s.length;O++)C=C.concat(w({array:s,arrayIndex:O,value:s[O],valueSpec:S,validateSpec:u.validateSpec,style:f,styleSpec:v,key:`${x}[${O}]`}));return C}function zg(u){let s=u.key,l=u.value,f=u.valueSpec,v=rr(l);return v==="number"&&l!=l&&(v="NaN"),v!=="number"?[new Ne(s,l,`number expected, ${v} found`)]:"minimum"in f&&l<f.minimum?[new Ne(s,l,`${l} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&l>f.maximum?[new Ne(s,l,`${l} is greater than the maximum value ${f.maximum}`)]:[]}function nd(u){let s=u.valueSpec,l=sn(u.value.type),f,v,x,w={},S=l!=="categorical"&&u.value.property===void 0,C=!S,O=rr(u.value.stops)==="array"&&rr(u.value.stops[0])==="array"&&rr(u.value.stops[0][0])==="object",R=ya({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(U){if(l==="identity")return[new Ne(U.key,U.value,"identity function may not have a \"stops\" property")];let Z=[],X=U.value;return Z=Z.concat(cf({key:U.key,value:X,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:k})),rr(X)==="array"&&X.length===0&&Z.push(new Ne(U.key,X,"array must have at least one stop")),Z},default:function(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:s,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}});return l==="identity"&&S&&R.push(new Ne(u.key,u.value,"missing required property \"property\"")),l==="identity"||u.value.stops||R.push(new Ne(u.key,u.value,"missing required property \"stops\"")),l==="exponential"&&u.valueSpec.expression&&!Lg(u.valueSpec)&&R.push(new Ne(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(C&&!fc(u.valueSpec)?R.push(new Ne(u.key,u.value,"property functions not supported")):S&&!B1(u.valueSpec)&&R.push(new Ne(u.key,u.value,"zoom functions not supported"))),l!=="categorical"&&!O||u.value.property!==void 0||R.push(new Ne(u.key,u.value,"\"property\" property is required")),R;function k(U){let Z=[],X=U.value,ne=U.key;if(rr(X)!=="array")return[new Ne(ne,X,`array expected, ${rr(X)} found`)];if(X.length!==2)return[new Ne(ne,X,`array length 2 expected, length ${X.length} found`)];if(O){if(rr(X[0])!=="object")return[new Ne(ne,X,`object expected, ${rr(X[0])} found`)];if(X[0].zoom===void 0)return[new Ne(ne,X,"object stop key must have zoom")];if(X[0].value===void 0)return[new Ne(ne,X,"object stop key must have value")];if(x&&x>sn(X[0].zoom))return[new Ne(ne,X[0].zoom,"stop zoom values must appear in ascending order")];sn(X[0].zoom)!==x&&(x=sn(X[0].zoom),v=void 0,w={}),Z=Z.concat(ya({key:`${ne}[0]`,value:X[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:zg,value:z}}))}else Z=Z.concat(z({key:`${ne}[0]`,value:X[0],valueSpec:{},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},X));return Qp(_o(X[1]))?Z.concat([new Ne(`${ne}[1]`,X[1],"expressions are not allowed in function stops.")]):Z.concat(U.validateSpec({key:`${ne}[1]`,value:X[1],valueSpec:s,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function z(U,Z){let X=rr(U.value),ne=sn(U.value),ue=U.value!==null?U.value:Z;if(f){if(X!==f)return[new Ne(U.key,ue,`${X} stop domain type must match previous stop domain type ${f}`)]}else f=X;if(X!=="number"&&X!=="string"&&X!=="boolean")return[new Ne(U.key,ue,"stop domain value must be a number, string, or boolean")];if(X!=="number"&&l!=="categorical"){let xe=`number expected, ${X} found`;return fc(s)&&l===void 0&&(xe+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new Ne(U.key,ue,xe)]}return l!=="categorical"||X!=="number"||isFinite(ne)&&Math.floor(ne)===ne?l!=="categorical"&&X==="number"&&v!==void 0&&ne<v?[new Ne(U.key,ue,"stop domain values must appear in ascending order")]:(v=ne,l==="categorical"&&ne in w?[new Ne(U.key,ue,"stop domain values must be unique")]:(w[ne]=!0,[])):[new Ne(U.key,ue,`integer expected, found ${ne}`)]}}function yc(u){let s=(u.expressionContext==="property"?kg:dc)(_o(u.value),u.valueSpec);if(s.result==="error")return s.value.map(f=>new Ne(`${u.key}${f.key}`,u.value,f.message));let l=s.value.expression||s.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!l.outputDefined())return[new Ne(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!cc(l))return[new Ne(u.key,u.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(u.expressionContext==="filter"&&!cc(l))return[new Ne(u.key,u.value,"\"feature-state\" data expressions are not supported with filters.")];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!of(l,["zoom","feature-state"]))return[new Ne(u.key,u.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(u.expressionContext==="cluster-initial"&&!af(l))return[new Ne(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function As(u){let s=u.key,l=u.value,f=u.valueSpec,v=[];return Array.isArray(f.values)?f.values.indexOf(sn(l))===-1&&v.push(new Ne(s,l,`expected one of [${f.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(f.values).indexOf(sn(l))===-1&&v.push(new Ne(s,l,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(l)} found`)),v}function jg(u){return ed(_o(u.value))?yc(da({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):id(u)}function id(u){let s=u.value,l=u.key;if(rr(s)!=="array")return[new Ne(l,s,`array expected, ${rr(s)} found`)];let f=u.styleSpec,v,x=[];if(s.length<1)return[new Ne(l,s,"filter array must have at least 1 element")];switch(x=x.concat(As({key:`${l}[0]`,value:s[0],valueSpec:f.filter_operator,style:u.style,styleSpec:u.styleSpec})),sn(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&sn(s[1])==="$type"&&x.push(new Ne(l,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&x.push(new Ne(l,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(v=rr(s[1]),v!=="string"&&x.push(new Ne(`${l}[1]`,s[1],`string expected, ${v} found`)));for(let w=2;w<s.length;w++)v=rr(s[w]),sn(s[1])==="$type"?x=x.concat(As({key:`${l}[${w}]`,value:s[w],valueSpec:f.geometry_type,style:u.style,styleSpec:u.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&x.push(new Ne(`${l}[${w}]`,s[w],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let w=1;w<s.length;w++)x=x.concat(id({key:`${l}[${w}]`,value:s[w],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":v=rr(s[1]),s.length!==2?x.push(new Ne(l,s,`filter array for "${s[0]}" operator must have 2 elements`)):v!=="string"&&x.push(new Ne(`${l}[1]`,s[1],`string expected, ${v} found`));}return x}function Bg(u,s){let l=u.key,f=u.validateSpec,v=u.style,x=u.styleSpec,w=u.value,S=u.objectKey,C=x[`${s}_${u.layerType}`];if(!C)return[];let O=S.match(/^(.*)-transition$/);if(s==="paint"&&O&&C[O[1]]&&C[O[1]].transition)return f({key:l,value:w,valueSpec:x.transition,style:v,styleSpec:x});let R=u.valueSpec||C[S];if(!R)return[new Ne(l,w,`unknown property "${S}"`)];let k;if(rr(w)==="string"&&fc(R)&&!R.tokens&&(k=/^{([^}]+)}$/.exec(w)))return[new Ne(l,w,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(k[1])} }\`.`)];let z=[];return u.layerType==="symbol"&&(S==="text-field"&&v&&!v.glyphs&&z.push(new Ne(l,w,"use of \"text-field\" requires a style \"glyphs\" property")),S==="text-font"&&Xp(_o(w))&&sn(w.type)==="identity"&&z.push(new Ne(l,w,"\"text-font\" does not support identity functions"))),z.concat(f({key:u.key,value:w,valueSpec:R,style:v,styleSpec:x,expressionContext:"property",propertyType:s,propertyKey:S}))}function ad(u){return Bg(u,"paint")}function Ug(u){return Bg(u,"layout")}function Vg(u){let s=[],l=u.value,f=u.key,v=u.style,x=u.styleSpec;l.type||l.ref||s.push(new Ne(f,l,"either \"type\" or \"ref\" is required"));let w=sn(l.type),S=sn(l.ref);if(l.id){let C=sn(l.id);for(let O=0;O<u.arrayIndex;O++){let R=v.layers[O];sn(R.id)===C&&s.push(new Ne(f,l.id,`duplicate layer id "${l.id}", previously used at line ${R.id.__line__}`))}}if("ref"in l){let C;["type","source","source-layer","filter","layout"].forEach(O=>{O in l&&s.push(new Ne(f,l[O],`"${O}" is prohibited for ref layers`))}),v.layers.forEach(O=>{sn(O.id)===S&&(C=O)}),C?C.ref?s.push(new Ne(f,l.ref,"ref cannot reference another ref layer")):w=sn(C.type):s.push(new Ne(f,l.ref,`ref layer "${S}" not found`))}else if(w!=="background")if(l.source){let C=v.sources&&v.sources[l.source],O=C&&sn(C.type);C?O==="vector"&&w==="raster"?s.push(new Ne(f,l.source,`layer "${l.id}" requires a raster source`)):O!=="raster-dem"&&w==="hillshade"?s.push(new Ne(f,l.source,`layer "${l.id}" requires a raster-dem source`)):O==="raster"&&w!=="raster"?s.push(new Ne(f,l.source,`layer "${l.id}" requires a vector source`)):O!=="vector"||l["source-layer"]?O==="raster-dem"&&w!=="hillshade"?s.push(new Ne(f,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!l.paint||!l.paint["line-gradient"]||O==="geojson"&&C.lineMetrics||s.push(new Ne(f,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new Ne(f,l,`layer "${l.id}" must specify a "source-layer"`)):s.push(new Ne(f,l.source,`source "${l.source}" not found`))}else s.push(new Ne(f,l,"missing required property \"source\""));return s=s.concat(ya({key:f,value:l,valueSpec:x.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${f}.type`,value:l.type,valueSpec:x.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:l,objectKey:"type"}),filter:jg,layout:C=>ya({layer:l,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":O=>Ug(da({layerType:w},O))}}),paint:C=>ya({layer:l,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":O=>ad(da({layerType:w},O))}})}})),s}function tl(u){let s=u.value,l=u.key,f=rr(s);return f!=="string"?[new Ne(l,s,`string expected, ${f} found`)]:[]}let od={promoteId:function({key:u,value:s}){if(rr(s)==="string")return tl({key:u,value:s});{let l=[];for(let f in s)l.push(...tl({key:`${u}.${f}`,value:s[f]}));return l}}};function hf(u){let s=u.value,l=u.key,f=u.styleSpec,v=u.style,x=u.validateSpec;if(!s.type)return[new Ne(l,s,"\"type\" is required")];let w=sn(s.type),S;switch(w){case"vector":case"raster":return S=ya({key:l,value:s,valueSpec:f[`source_${w.replace("-","_")}`],style:u.style,styleSpec:f,objectElementValidators:od,validateSpec:x}),S;case"raster-dem":return S=function(C){var O;let R=(O=C.sourceName)!==null&&O!==void 0?O:"",k=C.value,z=C.styleSpec,U=z.source_raster_dem,Z=C.style,X=[],ne=rr(k);if(k===void 0)return X;if(ne!=="object")return X.push(new Ne("source_raster_dem",k,`object expected, ${ne} found`)),X;let ue=sn(k.encoding)==="custom",xe=["redFactor","greenFactor","blueFactor","baseShift"],pe=C.value.encoding?`"${C.value.encoding}"`:"Default";for(let ye in k)!ue&&xe.includes(ye)?X.push(new Ne(ye,k[ye],`In "${R}": "${ye}" is only valid when "encoding" is set to "custom". ${pe} encoding found`)):U[ye]?X=X.concat(C.validateSpec({key:ye,value:k[ye],valueSpec:U[ye],validateSpec:C.validateSpec,style:Z,styleSpec:z})):X.push(new Ne(ye,k[ye],`unknown property "${ye}"`));return X}({sourceName:l,value:s,style:u.style,styleSpec:f,validateSpec:x}),S;case"geojson":if(S=ya({key:l,value:s,valueSpec:f.source_geojson,style:v,styleSpec:f,validateSpec:x,objectElementValidators:od}),s.cluster)for(let C in s.clusterProperties){let[O,R]=s.clusterProperties[C],k=typeof O=="string"?[O,["accumulated"],["get",C]]:O;S.push(...yc({key:`${l}.${C}.map`,value:R,validateSpec:x,expressionContext:"cluster-map"})),S.push(...yc({key:`${l}.${C}.reduce`,value:k,validateSpec:x,expressionContext:"cluster-reduce"}))}return S;case"video":return ya({key:l,value:s,valueSpec:f.source_video,style:v,validateSpec:x,styleSpec:f});case"image":return ya({key:l,value:s,valueSpec:f.source_image,style:v,validateSpec:x,styleSpec:f});case"canvas":return[new Ne(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return As({key:`${l}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:v,validateSpec:x,styleSpec:f});}}function $g(u){let s=u.value,l=u.styleSpec,f=l.light,v=u.style,x=[],w=rr(s);if(s===void 0)return x;if(w!=="object")return x=x.concat([new Ne("light",s,`object expected, ${w} found`)]),x;for(let S in s){let C=S.match(/^(.*)-transition$/);x=x.concat(C&&f[C[1]]&&f[C[1]].transition?u.validateSpec({key:S,value:s[S],valueSpec:l.transition,validateSpec:u.validateSpec,style:v,styleSpec:l}):f[S]?u.validateSpec({key:S,value:s[S],valueSpec:f[S],validateSpec:u.validateSpec,style:v,styleSpec:l}):[new Ne(S,s[S],`unknown property "${S}"`)])}return x}function Gg(u){let s=u.value,l=u.styleSpec,f=l.sky,v=u.style,x=rr(s);if(s===void 0)return[];if(x!=="object")return[new Ne("sky",s,`object expected, ${x} found`)];let w=[];for(let S in s)w=w.concat(f[S]?u.validateSpec({key:S,value:s[S],valueSpec:f[S],style:v,styleSpec:l}):[new Ne(S,s[S],`unknown property "${S}"`)]);return w}function Wg(u){let s=u.value,l=u.styleSpec,f=l.terrain,v=u.style,x=[],w=rr(s);if(s===void 0)return x;if(w!=="object")return x=x.concat([new Ne("terrain",s,`object expected, ${w} found`)]),x;for(let S in s)x=x.concat(f[S]?u.validateSpec({key:S,value:s[S],valueSpec:f[S],validateSpec:u.validateSpec,style:v,styleSpec:l}):[new Ne(S,s[S],`unknown property "${S}"`)]);return x}function Zg(u){let s=[],l=u.value,f=u.key;if(Array.isArray(l)){let v=[],x=[];for(let w in l)l[w].id&&v.includes(l[w].id)&&s.push(new Ne(f,l,`all the sprites' ids must be unique, but ${l[w].id} is duplicated`)),v.push(l[w].id),l[w].url&&x.includes(l[w].url)&&s.push(new Ne(f,l,`all the sprites' URLs must be unique, but ${l[w].url} is duplicated`)),x.push(l[w].url),s=s.concat(ya({key:`${f}[${w}]`,value:l[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return s}return tl({key:f,value:l})}let sd={"*":()=>[],array:cf,boolean:function(u){let s=u.value,l=u.key,f=rr(s);return f!=="boolean"?[new Ne(l,s,`boolean expected, ${f} found`)]:[]},number:zg,color:function(u){let s=u.key,l=u.value,f=rr(l);return f!=="string"?[new Ne(s,l,`color expected, ${f} found`)]:mr.parse(String(l))?[]:[new Ne(s,l,`color expected, "${l}" found`)]},constants:H1,enum:As,filter:jg,function:nd,layer:Vg,object:ya,source:hf,light:$g,sky:Gg,terrain:Wg,projection:function(u){let s=u.value,l=u.styleSpec,f=l.projection,v=u.style,x=rr(s);if(s===void 0)return[];if(x!=="object")return[new Ne("projection",s,`object expected, ${x} found`)];let w=[];for(let S in s)w=w.concat(f[S]?u.validateSpec({key:S,value:s[S],valueSpec:f[S],style:v,styleSpec:l}):[new Ne(S,s[S],`unknown property "${S}"`)]);return w},string:tl,formatted:function(u){return tl(u).length===0?[]:yc(u)},resolvedImage:function(u){return tl(u).length===0?[]:yc(u)},padding:function(u){let s=u.key,l=u.value;if(rr(l)==="array"){if(l.length<1||l.length>4)return[new Ne(s,l,`padding requires 1 to 4 values; ${l.length} values found`)];let f={type:"number"},v=[];for(let x=0;x<l.length;x++)v=v.concat(u.validateSpec({key:`${s}[${x}]`,value:l[x],validateSpec:u.validateSpec,valueSpec:f}));return v}return zg({key:s,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(u){let s=u.key,l=u.value,f=rr(l),v=u.styleSpec;if(f!=="array"||l.length<1||l.length%2!=0)return[new Ne(s,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let w=0;w<l.length;w+=2)x=x.concat(As({key:`${s}[${w}]`,value:l[w],valueSpec:v.layout_symbol["text-anchor"]})),x=x.concat(cf({key:`${s}[${w+1}]`,value:l[w+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:v}));return x},sprite:Zg};function _c(u){let s=u.value,l=u.valueSpec,f=u.styleSpec;return u.validateSpec=_c,l.expression&&Xp(sn(s))?nd(u):l.expression&&Qp(_o(s))?yc(u):l.type&&sd[l.type]?sd[l.type](u):ya(da({},u,{valueSpec:l.type?f[l.type]:l}))}function K1(u){let s=u.value,l=u.key,f=tl(u);return f.length||(s.indexOf("{fontstack}")===-1&&f.push(new Ne(l,s,"\"glyphs\" url must include a \"{fontstack}\" token")),s.indexOf("{range}")===-1&&f.push(new Ne(l,s,"\"glyphs\" url must include a \"{range}\" token"))),f}function Na(u,s=Ee){let l=[];return l=l.concat(_c({key:"",value:u,valueSpec:s.$root,styleSpec:s,style:u,validateSpec:_c,objectElementValidators:{glyphs:K1,"*":()=>[]}})),u.constants&&(l=l.concat(H1({key:"constants",value:u.constants,style:u,styleSpec:s,validateSpec:_c}))),Hg(l)}function Bo(u){return function(s){return u(cP(lP({},s),{validateSpec:_c}))}}function Hg(u){return[].concat(u).sort((s,l)=>s.line-l.line)}function xo(u){return function(...s){return Hg(u.apply(this,s))}}Na.source=xo(Bo(hf)),Na.sprite=xo(Bo(Zg)),Na.glyphs=xo(Bo(K1)),Na.light=xo(Bo($g)),Na.sky=xo(Bo(Gg)),Na.terrain=xo(Bo(Wg)),Na.layer=xo(Bo(Vg)),Na.filter=xo(Bo(jg)),Na.paintProperty=xo(Bo(ad)),Na.layoutProperty=xo(Bo(Ug));let rl=Na,fq=rl.light,pq=rl.sky,X1=rl.paintProperty,Y1=rl.layoutProperty;function Kg(u,s){let l=!1;if(s&&s.length)for(let f of s)u.fire(new Wn(new Error(f.message))),l=!0;return l}class xc{constructor(s,l,f){let v=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;let w=new Int32Array(this.arrayBuffer);s=w[0],this.d=(l=w[1])+2*(f=w[2]);for(let C=0;C<this.d*this.d;C++){let O=w[3+C],R=w[3+C+1];v.push(O===R?null:w.subarray(O,R))}let S=w[3+v.length+1];this.keys=w.subarray(w[3+v.length],S),this.bboxes=w.subarray(S),this.insert=this._insertReadonly}else{this.d=l+2*f;for(let w=0;w<this.d*this.d;w++)v.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=s,this.padding=f,this.scale=l/s,this.uid=0;let x=f/l*s;this.min=-x,this.max=s+x}insert(s,l,f,v,x){this._forEachCell(l,f,v,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,l,f,v,x,w){this.cells[x].push(w)}query(s,l,f,v,x){let w=this.min,S=this.max;if(s<=w&&l<=w&&S<=f&&S<=v&&!x)return Array.prototype.slice.call(this.keys);{let C=[];return this._forEachCell(s,l,f,v,this._queryCell,C,{},x),C}}_queryCell(s,l,f,v,x,w,S,C){let O=this.cells[x];if(O!==null){let R=this.keys,k=this.bboxes;for(let z=0;z<O.length;z++){let U=O[z];if(S[U]===void 0){let Z=4*U;(C?C(k[Z+0],k[Z+1],k[Z+2],k[Z+3]):s<=k[Z+2]&&l<=k[Z+3]&&f>=k[Z+0]&&v>=k[Z+1])?(S[U]=!0,w.push(R[U])):S[U]=!1}}}}_forEachCell(s,l,f,v,x,w,S,C){let O=this._convertToCellCoord(s),R=this._convertToCellCoord(l),k=this._convertToCellCoord(f),z=this._convertToCellCoord(v);for(let U=O;U<=k;U++)for(let Z=R;Z<=z;Z++){let X=this.d*Z+U;if((!C||C(this._convertFromCellCoord(U),this._convertFromCellCoord(Z),this._convertFromCellCoord(U+1),this._convertFromCellCoord(Z+1)))&&x.call(this,s,l,f,v,X,w,S,C))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let s=this.cells,l=3+this.cells.length+1+1,f=0;for(let w=0;w<this.cells.length;w++)f+=this.cells[w].length;let v=new Int32Array(l+f+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let x=l;for(let w=0;w<s.length;w++){let S=s[w];v[3+w]=x,v.set(S,x),x+=S.length}return v[3+s.length]=x,v.set(this.keys,x),x+=this.keys.length,v[3+s.length+1]=x,v.set(this.bboxes,x),x+=this.bboxes.length,v.buffer}static serialize(s,l){let f=s.toArrayBuffer();return l&&l.push(f),{buffer:f}}static deserialize(s){return new xc(s.buffer)}}let Fa={};function tt(u,s,l={}){if(Fa[u])throw new Error(`${u} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:u,writeable:!1}),Fa[u]={klass:s,omit:l.omit||[],shallow:l.shallow||[]}}tt("Object",Object),tt("TransferableGridIndex",xc),tt("Color",mr),tt("Error",Error),tt("AJAXError",Dt),tt("ResolvedImage",ga),tt("StylePropertyFunction",gc),tt("StyleExpression",Jp,{omit:["_evaluator"]}),tt("ZoomDependentExpression",vc),tt("ZoomConstantExpression",mc),tt("CompoundExpression",ka,{omit:["_evaluate"]});for(let u in lc)lc[u]._classRegistryKey||tt(`Expression_${u}`,lc[u]);function ud(u){return u&&typeof ArrayBuffer!="undefined"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Xg(u){return u.$name||u.constructor._classRegistryKey}function J1(u){return!function(s){if(s===null||typeof s!="object")return!1;let l=Xg(s);return!(!l||l==="Object")}(u)&&(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||u instanceof Error||ud(u)||sr(u)||ArrayBuffer.isView(u)||u instanceof ImageData)}function wc(u,s){if(J1(u))return(ud(u)||sr(u))&&s&&s.push(u),ArrayBuffer.isView(u)&&s&&s.push(u.buffer),u instanceof ImageData&&s&&s.push(u.data.buffer),u;if(Array.isArray(u)){let x=[];for(let w of u)x.push(wc(w,s));return x}if(typeof u!="object")throw new Error("can't serialize object of type "+typeof u);let l=Xg(u);if(!l)throw new Error(`can't serialize object of unregistered class ${u.constructor.name}`);if(!Fa[l])throw new Error(`${l} is not registered.`);let{klass:f}=Fa[l],v=f.serialize?f.serialize(u,s):{};if(f.serialize){if(s&&v===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let x in u){if(!u.hasOwnProperty(x)||Fa[l].omit.indexOf(x)>=0)continue;let w=u[x];v[x]=Fa[l].shallow.indexOf(x)>=0?w:wc(w,s)}u instanceof Error&&(v.message=u.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(v.$name=l),v}function bc(u){if(J1(u))return u;if(Array.isArray(u))return u.map(bc);if(typeof u!="object")throw new Error("can't deserialize object of type "+typeof u);let s=Xg(u)||"Object";if(!Fa[s])throw new Error(`can't deserialize unregistered class ${s}`);let{klass:l}=Fa[s];if(!l)throw new Error(`can't deserialize unregistered class ${s}`);if(l.deserialize)return l.deserialize(u);let f=Object.create(l.prototype);for(let v of Object.keys(u)){if(v==="$name")continue;let x=u[v];f[v]=Fa[s].shallow.indexOf(v)>=0?x:bc(x)}return f}class Yg{constructor(){this.first=!0}update(s,l){let f=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=l),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=f,!0))}}let Gt={"Latin-1 Supplement":u=>u>=128&&u<=255,"Hangul Jamo":u=>u>=4352&&u<=4607,Khmer:u=>u>=6016&&u<=6143,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Katakana:u=>u>=12448&&u<=12543,Kanbun:u=>u>=12688&&u<=12703,"CJK Strokes":u=>u>=12736&&u<=12783,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"Private Use Area":u=>u>=57344&&u<=63743,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function Jg(u){for(let s of u)if(ey(s.charCodeAt(0)))return!0;return!1}function dq(u){for(let s of u)if(!Ec(s.charCodeAt(0)))return!1;return!0}function Qg(u){let s=u.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch(f){return null}}).filter(l=>l);return new RegExp(s.join("|"),"u")}let mq=Qg(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ec(u){return!mq.test(String.fromCodePoint(u))}let Q1=Qg(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function ey(u){return!(u!==746&&u!==747&&(u<4352||!(Gt["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Gt["CJK Compatibility"](u)||Gt["CJK Strokes"](u)||!(!Gt["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Gt["Enclosed CJK Letters and Months"](u)||Gt["Ideographic Description Characters"](u)||Gt.Kanbun(u)||Gt.Katakana(u)&&u!==12540||!(!Gt["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Gt["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Gt["Vertical Forms"](u)||Gt["Yijing Hexagram Symbols"](u)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(u))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(u))||Q1.test(String.fromCodePoint(u)))))}function ew(u){return!(ey(u)||function(s){return!!(Gt["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Gt["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Gt["Letterlike Symbols"](s)||Gt["Number Forms"](s)||Gt["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Gt["Control Pictures"](s)&&s!==9251||Gt["Optical Character Recognition"](s)||Gt["Enclosed Alphanumerics"](s)||Gt["Geometric Shapes"](s)||Gt["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Gt["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Gt["CJK Symbols and Punctuation"](s)||Gt.Katakana(s)||Gt["Private Use Area"](s)||Gt["CJK Compatibility Forms"](s)||Gt["Small Form Variants"](s)||Gt["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(u))}let vq=Qg(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function ty(u){return vq.test(String.fromCodePoint(u))}function gq(u,s){return!(!s&&ty(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Gt.Khmer(u))}function yq(u){for(let s of u)if(ty(s.charCodeAt(0)))return!0;return!1}let _a=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(u){this.pluginStatus=u.pluginStatus,this.pluginURL=u.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(u){this.applyArabicShaping=u.applyArabicShaping,this.processBidirectionalText=u.processBidirectionalText,this.processStyledBidirectionalText=u.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Rr{constructor(s,l){this.zoom=s,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Yg,this.transition={})}isSupportedScript(s){return function(l,f){for(let v of l)if(!gq(v.charCodeAt(0),f))return!1;return!0}(s,_a.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let s=this.zoom,l=s-Math.floor(s),f=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*l}}}class Sc{constructor(s,l){this.property=s,this.value=l,this.expression=function(f,v){if(Xp(f))return new gc(f,v);if(Qp(f)){let x=kg(f,v);if(x.result==="error")throw new Error(x.value.map(w=>`${w.key}: ${w.message}`).join(", "));return x.value}{let x=f;return v.type==="color"&&typeof f=="string"?x=mr.parse(f):v.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?v.type==="variableAnchorOffsetCollection"&&Array.isArray(f)&&(x=La.parse(f)):x=va.parse(f),{kind:"constant",evaluate:()=>x}}}(l===void 0?s.specification.default:l,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,l,f){return this.property.possiblyEvaluate(this,s,l,f)}}class ld{constructor(s){this.property=s,this.value=new Sc(s,void 0)}transitioned(s,l){return new tw(this.property,this.value,l,Ie({},s.transition,this.transition),s.now)}untransitioned(){return new tw(this.property,this.value,null,{},0)}}class cd{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return Le(this._values[s].value.value)}setValue(s,l){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new ld(this._values[s].property)),this._values[s].value=new Sc(this._values[s].property,l===null?void 0:Le(l))}getTransition(s){return Le(this._values[s].transition)}setTransition(s,l){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new ld(this._values[s].property)),this._values[s].transition=Le(l)||void 0}serialize(){let s={};for(let l of Object.keys(this._values)){let f=this.getValue(l);f!==void 0&&(s[l]=f);let v=this.getTransition(l);v!==void 0&&(s[`${l}-transition`]=v)}return s}transitioned(s,l){let f=new ff(this._properties);for(let v of Object.keys(this._values))f._values[v]=this._values[v].transitioned(s,l._values[v]);return f}untransitioned(){let s=new ff(this._properties);for(let l of Object.keys(this._values))s._values[l]=this._values[l].untransitioned();return s}}class tw{constructor(s,l,f,v,x){this.property=s,this.value=l,this.begin=x+v.delay||0,this.end=this.begin+v.duration||0,s.specification.transition&&(v.delay||v.duration)&&(this.prior=f)}possiblyEvaluate(s,l,f){let v=s.now||0,x=this.value.possiblyEvaluate(s,l,f),w=this.prior;if(w){if(v>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(v<this.begin)return w.possiblyEvaluate(s,l,f);{let S=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(s,l,f),x,function(C){if(C<=0)return 0;if(C>=1)return 1;let O=C*C,R=O*C;return 4*(C<.5?R:3*(C-O)+R-.75)}(S))}}return x}}class ff{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,l,f){let v=new df(this._properties);for(let x of Object.keys(this._values))v._values[x]=this._values[x].possiblyEvaluate(s,l,f);return v}hasTransition(){for(let s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class pf{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return this._values[s].value!==void 0}getValue(s){return Le(this._values[s].value)}setValue(s,l){this._values[s]=new Sc(this._values[s].property,l===null?void 0:Le(l))}serialize(){let s={};for(let l of Object.keys(this._values)){let f=this.getValue(l);f!==void 0&&(s[l]=f)}return s}possiblyEvaluate(s,l,f){let v=new df(this._properties);for(let x of Object.keys(this._values))v._values[x]=this._values[x].possiblyEvaluate(s,l,f);return v}}class Uo{constructor(s,l,f){this.property=s,this.value=l,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,l,f,v){return this.property.evaluate(this.value,this.parameters,s,l,f,v)}}class df{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class nt{constructor(s){this.specification=s}possiblyEvaluate(s,l){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(l)}interpolate(s,l,f){let v=Bi[this.specification.type];return v?v(s,l,f):s}}class mt{constructor(s,l){this.specification=s,this.overrides=l}possiblyEvaluate(s,l,f,v){return new Uo(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(l,null,{},f,v)}:s.expression,l)}interpolate(s,l,f){if(s.value.kind!=="constant"||l.value.kind!=="constant")return s;if(s.value.value===void 0||l.value.value===void 0)return new Uo(this,{kind:"constant",value:void 0},s.parameters);let v=Bi[this.specification.type];if(v){let x=v(s.value.value,l.value.value,f);return new Uo(this,{kind:"constant",value:x},s.parameters)}return s}evaluate(s,l,f,v,x,w){return s.kind==="constant"?s.value:s.evaluate(l,f,v,x,w)}}class hd extends mt{possiblyEvaluate(s,l,f,v){if(s.value===void 0)return new Uo(this,{kind:"constant",value:void 0},l);if(s.expression.kind==="constant"){let x=s.expression.evaluate(l,null,{},f,v),w=s.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,S=this._calculate(w,w,w,l);return new Uo(this,{kind:"constant",value:S},l)}if(s.expression.kind==="camera"){let x=this._calculate(s.expression.evaluate({zoom:l.zoom-1}),s.expression.evaluate({zoom:l.zoom}),s.expression.evaluate({zoom:l.zoom+1}),l);return new Uo(this,{kind:"constant",value:x},l)}return new Uo(this,s.expression,l)}evaluate(s,l,f,v,x,w){if(s.kind==="source"){let S=s.evaluate(l,f,v,x,w);return this._calculate(S,S,S,l)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(l.zoom)-1},f,v),s.evaluate({zoom:Math.floor(l.zoom)},f,v),s.evaluate({zoom:Math.floor(l.zoom)+1},f,v),l):s.value}_calculate(s,l,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:s,to:l}:{from:f,to:l}}interpolate(s){return s}}class fd{constructor(s){this.specification=s}possiblyEvaluate(s,l,f,v){if(s.value!==void 0){if(s.expression.kind==="constant"){let x=s.expression.evaluate(l,null,{},f,v);return this._calculate(x,x,x,l)}return this._calculate(s.expression.evaluate(new Rr(Math.floor(l.zoom-1),l)),s.expression.evaluate(new Rr(Math.floor(l.zoom),l)),s.expression.evaluate(new Rr(Math.floor(l.zoom+1),l)),l)}}_calculate(s,l,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:s,to:l}:{from:f,to:l}}interpolate(s){return s}}class ry{constructor(s){this.specification=s}possiblyEvaluate(s,l,f,v){return!!s.expression.evaluate(l,null,{},f,v)}interpolate(){return!1}}class _{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let l in s){let f=s[l];f.specification.overridable&&this.overridableProperties.push(l);let v=this.defaultPropertyValues[l]=new Sc(f,void 0),x=this.defaultTransitionablePropertyValues[l]=new ld(f);this.defaultTransitioningPropertyValues[l]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=v.possiblyEvaluate({})}}}tt("DataDrivenProperty",mt),tt("DataConstantProperty",nt),tt("CrossFadedDataDrivenProperty",hd),tt("CrossFadedProperty",fd),tt("ColorRampProperty",ry);let o="-transition";class c extends Ss{constructor(s,l){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),l.layout&&(this._unevaluatedLayout=new pf(l.layout)),l.paint)){this._transitionablePaint=new cd(l.paint);for(let f in s.paint)this.setPaintProperty(f,s.paint[f],{validate:!1});for(let f in s.layout)this.setLayoutProperty(f,s.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new df(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,l,f={}){l!=null&&this._validate(Y1,`layers.${this.id}.layout.${s}`,s,l,f)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,l):this.visibility=l)}getPaintProperty(s){return s.endsWith(o)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,l,f={}){if(l!=null&&this._validate(X1,`layers.${this.id}.paint.${s}`,s,l,f))return!1;if(s.endsWith(o))return this._transitionablePaint.setTransition(s.slice(0,-11),l||void 0),!1;{let v=this._transitionablePaint._values[s],x=v.property.specification["property-type"]==="cross-faded-data-driven",w=v.value.isDataDriven(),S=v.value;this._transitionablePaint.setValue(s,l),this._handleSpecialPaintPropertyUpdate(s);let C=this._transitionablePaint._values[s].value;return C.isDataDriven()||w||x||this._handleOverridablePaintPropertyUpdate(s,S,C)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,l,f){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,l){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,l)}serialize(){let s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),Ue(s,(l,f)=>!(l===void 0||f==="layout"&&!Object.keys(l).length||f==="paint"&&!Object.keys(l).length))}_validate(s,l,f,v,x={}){return(!x||x.validate!==!1)&&Kg(this,s.call(rl,{key:l,layerType:this.type,objectKey:f,value:v,styleSpec:Ee,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let s in this.paint._values){let l=this.paint.get(s);if(l instanceof Uo&&fc(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}let d={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class m{constructor(s,l){this._structArray=s,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class y{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,l){return s._trim(),l&&(s.isTransferred=!0,l.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){let l=Object.create(this.prototype);return l.arrayBuffer=s.arrayBuffer,l.length=s.length,l.capacity=s.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function I(u,s=1){let l=0,f=0;return{members:u.map(v=>{let x=d[v.type].BYTES_PER_ELEMENT,w=l=A(l,Math.max(s,x)),S=v.components||1;return f=Math.max(f,x),l+=x*S,{name:v.name,type:v.type,components:S,offset:w}}),size:A(l,Math.max(f,s)),alignment:s}}function A(u,s){return Math.ceil(u/s)*s}class M extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l){let f=this.length;return this.resize(f+1),this.emplace(f,s,l)}emplace(s,l,f){let v=2*s;return this.int16[v+0]=l,this.int16[v+1]=f,s}}M.prototype.bytesPerElement=4,tt("StructArrayLayout2i4",M);class D extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,f){let v=this.length;return this.resize(v+1),this.emplace(v,s,l,f)}emplace(s,l,f,v){let x=3*s;return this.int16[x+0]=l,this.int16[x+1]=f,this.int16[x+2]=v,s}}D.prototype.bytesPerElement=6,tt("StructArrayLayout3i6",D);class N extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,f,v){let x=this.length;return this.resize(x+1),this.emplace(x,s,l,f,v)}emplace(s,l,f,v,x){let w=4*s;return this.int16[w+0]=l,this.int16[w+1]=f,this.int16[w+2]=v,this.int16[w+3]=x,s}}N.prototype.bytesPerElement=8,tt("StructArrayLayout4i8",N);class F extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,f,v,x,w){let S=this.length;return this.resize(S+1),this.emplace(S,s,l,f,v,x,w)}emplace(s,l,f,v,x,w,S){let C=6*s;return this.int16[C+0]=l,this.int16[C+1]=f,this.int16[C+2]=v,this.int16[C+3]=x,this.int16[C+4]=w,this.int16[C+5]=S,s}}F.prototype.bytesPerElement=12,tt("StructArrayLayout2i4i12",F);class G extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,f,v,x,w){let S=this.length;return this.resize(S+1),this.emplace(S,s,l,f,v,x,w)}emplace(s,l,f,v,x,w,S){let C=4*s,O=8*s;return this.int16[C+0]=l,this.int16[C+1]=f,this.uint8[O+4]=v,this.uint8[O+5]=x,this.uint8[O+6]=w,this.uint8[O+7]=S,s}}G.prototype.bytesPerElement=8,tt("StructArrayLayout2i4ub8",G);class Y extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l){let f=this.length;return this.resize(f+1),this.emplace(f,s,l)}emplace(s,l,f){let v=2*s;return this.float32[v+0]=l,this.float32[v+1]=f,s}}Y.prototype.bytesPerElement=8,tt("StructArrayLayout2f8",Y);class ee extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,f,v,x,w,S,C,O,R){let k=this.length;return this.resize(k+1),this.emplace(k,s,l,f,v,x,w,S,C,O,R)}emplace(s,l,f,v,x,w,S,C,O,R,k){let z=10*s;return this.uint16[z+0]=l,this.uint16[z+1]=f,this.uint16[z+2]=v,this.uint16[z+3]=x,this.uint16[z+4]=w,this.uint16[z+5]=S,this.uint16[z+6]=C,this.uint16[z+7]=O,this.uint16[z+8]=R,this.uint16[z+9]=k,s}}ee.prototype.bytesPerElement=20,tt("StructArrayLayout10ui20",ee);class ae extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,f,v,x,w,S,C,O,R,k,z){let U=this.length;return this.resize(U+1),this.emplace(U,s,l,f,v,x,w,S,C,O,R,k,z)}emplace(s,l,f,v,x,w,S,C,O,R,k,z,U){let Z=12*s;return this.int16[Z+0]=l,this.int16[Z+1]=f,this.int16[Z+2]=v,this.int16[Z+3]=x,this.uint16[Z+4]=w,this.uint16[Z+5]=S,this.uint16[Z+6]=C,this.uint16[Z+7]=O,this.int16[Z+8]=R,this.int16[Z+9]=k,this.int16[Z+10]=z,this.int16[Z+11]=U,s}}ae.prototype.bytesPerElement=24,tt("StructArrayLayout4i4ui4i24",ae);class le extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,f){let v=this.length;return this.resize(v+1),this.emplace(v,s,l,f)}emplace(s,l,f,v){let x=3*s;return this.float32[x+0]=l,this.float32[x+1]=f,this.float32[x+2]=v,s}}le.prototype.bytesPerElement=12,tt("StructArrayLayout3f12",le);class ce extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){let l=this.length;return this.resize(l+1),this.emplace(l,s)}emplace(s,l){return this.uint32[1*s+0]=l,s}}ce.prototype.bytesPerElement=4,tt("StructArrayLayout1ul4",ce);class fe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,f,v,x,w,S,C,O){let R=this.length;return this.resize(R+1),this.emplace(R,s,l,f,v,x,w,S,C,O)}emplace(s,l,f,v,x,w,S,C,O,R){let k=10*s,z=5*s;return this.int16[k+0]=l,this.int16[k+1]=f,this.int16[k+2]=v,this.int16[k+3]=x,this.int16[k+4]=w,this.int16[k+5]=S,this.uint32[z+3]=C,this.uint16[k+8]=O,this.uint16[k+9]=R,s}}fe.prototype.bytesPerElement=20,tt("StructArrayLayout6i1ul2ui20",fe);class te extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,f,v,x,w){let S=this.length;return this.resize(S+1),this.emplace(S,s,l,f,v,x,w)}emplace(s,l,f,v,x,w,S){let C=6*s;return this.int16[C+0]=l,this.int16[C+1]=f,this.int16[C+2]=v,this.int16[C+3]=x,this.int16[C+4]=w,this.int16[C+5]=S,s}}te.prototype.bytesPerElement=12,tt("StructArrayLayout2i2i2i12",te);class me extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,f,v,x){let w=this.length;return this.resize(w+1),this.emplace(w,s,l,f,v,x)}emplace(s,l,f,v,x,w){let S=4*s,C=8*s;return this.float32[S+0]=l,this.float32[S+1]=f,this.float32[S+2]=v,this.int16[C+6]=x,this.int16[C+7]=w,s}}me.prototype.bytesPerElement=16,tt("StructArrayLayout2f1f2i16",me);class ge extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,f,v,x,w){let S=this.length;return this.resize(S+1),this.emplace(S,s,l,f,v,x,w)}emplace(s,l,f,v,x,w,S){let C=16*s,O=4*s,R=8*s;return this.uint8[C+0]=l,this.uint8[C+1]=f,this.float32[O+1]=v,this.float32[O+2]=x,this.int16[R+6]=w,this.int16[R+7]=S,s}}ge.prototype.bytesPerElement=16,tt("StructArrayLayout2ub2f2i16",ge);class we extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,f){let v=this.length;return this.resize(v+1),this.emplace(v,s,l,f)}emplace(s,l,f,v){let x=3*s;return this.uint16[x+0]=l,this.uint16[x+1]=f,this.uint16[x+2]=v,s}}we.prototype.bytesPerElement=6,tt("StructArrayLayout3ui6",we);class Pe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,f,v,x,w,S,C,O,R,k,z,U,Z,X,ne,ue){let xe=this.length;return this.resize(xe+1),this.emplace(xe,s,l,f,v,x,w,S,C,O,R,k,z,U,Z,X,ne,ue)}emplace(s,l,f,v,x,w,S,C,O,R,k,z,U,Z,X,ne,ue,xe){let pe=24*s,ye=12*s,Se=48*s;return this.int16[pe+0]=l,this.int16[pe+1]=f,this.uint16[pe+2]=v,this.uint16[pe+3]=x,this.uint32[ye+2]=w,this.uint32[ye+3]=S,this.uint32[ye+4]=C,this.uint16[pe+10]=O,this.uint16[pe+11]=R,this.uint16[pe+12]=k,this.float32[ye+7]=z,this.float32[ye+8]=U,this.uint8[Se+36]=Z,this.uint8[Se+37]=X,this.uint8[Se+38]=ne,this.uint32[ye+10]=ue,this.int16[pe+22]=xe,s}}Pe.prototype.bytesPerElement=48,tt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Pe);class ke extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,f,v,x,w,S,C,O,R,k,z,U,Z,X,ne,ue,xe,pe,ye,Se,Re,Xe,pt,He,Ge,st,rt){let et=this.length;return this.resize(et+1),this.emplace(et,s,l,f,v,x,w,S,C,O,R,k,z,U,Z,X,ne,ue,xe,pe,ye,Se,Re,Xe,pt,He,Ge,st,rt)}emplace(s,l,f,v,x,w,S,C,O,R,k,z,U,Z,X,ne,ue,xe,pe,ye,Se,Re,Xe,pt,He,Ge,st,rt,et){let Ce=32*s,ut=16*s;return this.int16[Ce+0]=l,this.int16[Ce+1]=f,this.int16[Ce+2]=v,this.int16[Ce+3]=x,this.int16[Ce+4]=w,this.int16[Ce+5]=S,this.int16[Ce+6]=C,this.int16[Ce+7]=O,this.uint16[Ce+8]=R,this.uint16[Ce+9]=k,this.uint16[Ce+10]=z,this.uint16[Ce+11]=U,this.uint16[Ce+12]=Z,this.uint16[Ce+13]=X,this.uint16[Ce+14]=ne,this.uint16[Ce+15]=ue,this.uint16[Ce+16]=xe,this.uint16[Ce+17]=pe,this.uint16[Ce+18]=ye,this.uint16[Ce+19]=Se,this.uint16[Ce+20]=Re,this.uint16[Ce+21]=Xe,this.uint16[Ce+22]=pt,this.uint32[ut+12]=He,this.float32[ut+13]=Ge,this.float32[ut+14]=st,this.uint16[Ce+30]=rt,this.uint16[Ce+31]=et,s}}ke.prototype.bytesPerElement=64,tt("StructArrayLayout8i15ui1ul2f2ui64",ke);class We extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){let l=this.length;return this.resize(l+1),this.emplace(l,s)}emplace(s,l){return this.float32[1*s+0]=l,s}}We.prototype.bytesPerElement=4,tt("StructArrayLayout1f4",We);class Je extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,f){let v=this.length;return this.resize(v+1),this.emplace(v,s,l,f)}emplace(s,l,f,v){let x=3*s;return this.uint16[6*s+0]=l,this.float32[x+1]=f,this.float32[x+2]=v,s}}Je.prototype.bytesPerElement=12,tt("StructArrayLayout1ui2f12",Je);class Ve extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,f){let v=this.length;return this.resize(v+1),this.emplace(v,s,l,f)}emplace(s,l,f,v){let x=4*s;return this.uint32[2*s+0]=l,this.uint16[x+2]=f,this.uint16[x+3]=v,s}}Ve.prototype.bytesPerElement=8,tt("StructArrayLayout1ul2ui8",Ve);class Be extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l){let f=this.length;return this.resize(f+1),this.emplace(f,s,l)}emplace(s,l,f){let v=2*s;return this.uint16[v+0]=l,this.uint16[v+1]=f,s}}Be.prototype.bytesPerElement=4,tt("StructArrayLayout2ui4",Be);class it extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){let l=this.length;return this.resize(l+1),this.emplace(l,s)}emplace(s,l){return this.uint16[1*s+0]=l,s}}it.prototype.bytesPerElement=2,tt("StructArrayLayout1ui2",it);class bt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,f,v){let x=this.length;return this.resize(x+1),this.emplace(x,s,l,f,v)}emplace(s,l,f,v,x){let w=4*s;return this.float32[w+0]=l,this.float32[w+1]=f,this.float32[w+2]=v,this.float32[w+3]=x,s}}bt.prototype.bytesPerElement=16,tt("StructArrayLayout4f16",bt);class $e extends m{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new b(this.anchorPointX,this.anchorPointY)}}$e.prototype.size=20;class Ke extends fe{get(s){return new $e(this,s)}}tt("CollisionBoxArray",Ke);class xt extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}xt.prototype.size=48;class Dr extends Pe{get(s){return new xt(this,s)}}tt("PlacedSymbolArray",Dr);class Mt extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Mt.prototype.size=64;class Bt extends ke{get(s){return new Mt(this,s)}}tt("SymbolInstanceArray",Bt);class Lr extends We{getoffsetX(s){return this.float32[1*s+0]}}tt("GlyphOffsetArray",Lr);class si extends D{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}tt("SymbolLineVertexArray",si);class wo extends m{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}wo.prototype.size=12;class kr extends Je{get(s){return new wo(this,s)}}tt("TextAnchorOffsetArray",kr);class Vi extends m{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Vi.prototype.size=8;class Ei extends Ve{get(s){return new Vi(this,s)}}tt("FeatureIndexArray",Ei);class ui extends M{}class Si extends M{}class Vo extends M{}class Tc extends F{}class pd extends G{}class Ic extends Y{}class za extends ee{}class dd extends ae{}class ny extends le{}class ja extends ce{}class Ba extends te{}class tu extends ge{}class bo extends we{}class Kn extends Be{}let li=I([{name:"a_pos",components:2,type:"Int16"}],4),{members:xa}=li;class Wt{constructor(s=[]){this.segments=s}prepareSegment(s,l,f,v){let x=this.segments[this.segments.length-1];return s>Wt.MAX_VERTEX_ARRAY_LENGTH&&Rt(`Max vertices per segment is ${Wt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!x||x.vertexLength+s>Wt.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==v)&&(x={vertexOffset:l.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},v!==void 0&&(x.sortKey=v),this.segments.push(x)),x}get(){return this.segments}destroy(){for(let s of this.segments)for(let l in s.vaos)s.vaos[l].destroy()}static simpleSegment(s,l,f,v){return new Wt([{vertexOffset:s,primitiveOffset:l,vertexLength:f,primitiveLength:v,vaos:{},sortKey:0}])}}function nl(u,s){return 256*(u=re(Math.floor(u),0,255))+re(Math.floor(s),0,255)}Wt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,tt("SegmentVector",Wt);let Cc=I([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ac={exports:{}},rw={exports:{}};rw.exports=function(u,s){var l,f,v,x,w,S,C,O;for(f=u.length-(l=3&u.length),v=s,w=3432918353,S=461845907,O=0;O<f;)C=255&u.charCodeAt(O)|(255&u.charCodeAt(++O))<<8|(255&u.charCodeAt(++O))<<16|(255&u.charCodeAt(++O))<<24,++O,v=27492+(65535&(x=5*(65535&(v=(v^=C=(65535&(C=(C=(65535&C)*w+(((C>>>16)*w&65535)<<16)&4294967295)<<15|C>>>17))*S+(((C>>>16)*S&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(C=0,l){case 3:C^=(255&u.charCodeAt(O+2))<<16;case 2:C^=(255&u.charCodeAt(O+1))<<8;case 1:v^=C=(65535&(C=(C=(65535&(C^=255&u.charCodeAt(O)))*w+(((C>>>16)*w&65535)<<16)&4294967295)<<15|C>>>17))*S+(((C>>>16)*S&65535)<<16)&4294967295;}return v^=u.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0};var _q=rw.exports,nw={exports:{}};nw.exports=function(u,s){for(var l,f=u.length,v=s^f,x=0;f>=4;)l=1540483477*(65535&(l=255&u.charCodeAt(x)|(255&u.charCodeAt(++x))<<8|(255&u.charCodeAt(++x))<<16|(255&u.charCodeAt(++x))<<24))+((1540483477*(l>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),f-=4,++x;switch(f){case 3:v^=(255&u.charCodeAt(x+2))<<16;case 2:v^=(255&u.charCodeAt(x+1))<<8;case 1:v=1540483477*(65535&(v^=255&u.charCodeAt(x)))+((1540483477*(v>>>16)&65535)<<16);}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0};var ru=_q,iw=nw.exports;Ac.exports=ru,Ac.exports.murmur3=ru,Ac.exports.murmur2=iw;var md=h(Ac.exports);class mf{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,l,f,v){this.ids.push(vd(s)),this.positions.push(l,f,v)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let l=vd(s),f=0,v=this.ids.length-1;for(;f<v;){let w=f+v>>1;this.ids[w]>=l?v=w:f=w+1}let x=[];for(;this.ids[f]===l;)x.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return x}static serialize(s,l){let f=new Float64Array(s.ids),v=new Uint32Array(s.positions);return gd(f,v,0,f.length-1),l&&l.push(f.buffer,v.buffer),{ids:f,positions:v}}static deserialize(s){let l=new mf;return l.ids=s.ids,l.positions=s.positions,l.indexed=!0,l}}function vd(u){let s=+u;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:md(String(u))}function gd(u,s,l,f){for(;l<f;){let v=u[l+f>>1],x=l-1,w=f+1;for(;;){do x++;while(u[x]<v);do w--;while(u[w]>v);if(x>=w)break;qc(u,x,w),qc(s,3*x,3*w),qc(s,3*x+1,3*w+1),qc(s,3*x+2,3*w+2)}w-l<f-w?(gd(u,s,l,w),l=w+1):(gd(u,s,w+1,f),f=w)}}function qc(u,s,l){let f=u[s];u[s]=u[l],u[l]=f}tt("FeaturePositionMap",mf);class vf{constructor(s,l){this.gl=s.gl,this.location=l}}class aw extends vf{constructor(s,l){super(s,l),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class P4 extends vf{constructor(s,l){super(s,l),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class M4 extends vf{constructor(s,l){super(s,l),this.current=mr.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}let $Ie=new Float32Array(16);function xq(u){return[nl(255*u.r,255*u.g),nl(255*u.b,255*u.a)]}class iy{constructor(s,l,f){this.value=s,this.uniformNames=l.map(v=>`u_${v}`),this.type=f}setUniform(s,l,f){s.set(f.constantOr(this.value))}getBinding(s,l,f){return this.type==="color"?new M4(s,l):new aw(s,l)}}class yd{constructor(s,l){this.uniformNames=l.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=s.tlbr}setUniform(s,l,f,v){let x=v==="u_pattern_to"?this.patternTo:v==="u_pattern_from"?this.patternFrom:v==="u_pixel_ratio_to"?this.pixelRatioTo:v==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&s.set(x)}getBinding(s,l,f){return f.substr(0,9)==="u_pattern"?new P4(s,l):new aw(s,l)}}class il{constructor(s,l,f,v){this.expression=s,this.type=f,this.maxValue=0,this.paintVertexAttributes=l.map(x=>({name:`a_${x}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(s,l,f,v,x){let w=this.paintVertexArray.length,S=this.expression.evaluate(new Rr(0),l,{},v,[],x);this.paintVertexArray.resize(s),this._setPaintValue(w,s,S)}updatePaintArray(s,l,f,v){let x=this.expression.evaluate({zoom:0},f,v);this._setPaintValue(s,l,x)}_setPaintValue(s,l,f){if(this.type==="color"){let v=xq(f);for(let x=s;x<l;x++)this.paintVertexArray.emplace(x,v[0],v[1])}else{for(let v=s;v<l;v++)this.paintVertexArray.emplace(v,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class qs{constructor(s,l,f,v,x,w){this.expression=s,this.uniformNames=l.map(S=>`u_${S}_t`),this.type=f,this.useIntegerZoom=v,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=l.map(S=>({name:`a_${S}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(s,l,f,v,x){let w=this.expression.evaluate(new Rr(this.zoom),l,{},v,[],x),S=this.expression.evaluate(new Rr(this.zoom+1),l,{},v,[],x),C=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(C,s,w,S)}updatePaintArray(s,l,f,v){let x=this.expression.evaluate({zoom:this.zoom},f,v),w=this.expression.evaluate({zoom:this.zoom+1},f,v);this._setPaintValue(s,l,x,w)}_setPaintValue(s,l,f,v){if(this.type==="color"){let x=xq(f),w=xq(v);for(let S=s;S<l;S++)this.paintVertexArray.emplace(S,x[0],x[1],w[0],w[1])}else{for(let x=s;x<l;x++)this.paintVertexArray.emplace(x,f,v);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(v))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,l){let f=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,v=re(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);s.set(v)}getBinding(s,l,f){return new aw(s,l)}}class Pc{constructor(s,l,f,v,x,w){this.expression=s,this.type=l,this.useIntegerZoom=f,this.zoom=v,this.layerId=w,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(s,l,f){let v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(v,s,l.patterns&&l.patterns[this.layerId],f)}updatePaintArray(s,l,f,v,x){this._setPaintValues(s,l,f.patterns&&f.patterns[this.layerId],x)}_setPaintValues(s,l,f,v){if(!v||!f)return;let{min:x,mid:w,max:S}=f,C=v[x],O=v[w],R=v[S];if(C&&O&&R)for(let k=s;k<l;k++)this.zoomInPaintVertexArray.emplace(k,O.tl[0],O.tl[1],O.br[0],O.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],O.pixelRatio,C.pixelRatio),this.zoomOutPaintVertexArray.emplace(k,O.tl[0],O.tl[1],O.br[0],O.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],O.pixelRatio,R.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,Cc.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,Cc.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class O4{constructor(s,l,f){this.binders={},this._buffers=[];let v=[];for(let x in s.paint._values){if(!f(x))continue;let w=s.paint.get(x);if(!(w instanceof Uo&&fc(w.property.specification)))continue;let S=GIe(x,s.type),C=w.value,O=w.property.specification.type,R=w.property.useIntegerZoom,k=w.property.specification["property-type"],z=k==="cross-faded"||k==="cross-faded-data-driven";if(C.kind==="constant")this.binders[x]=z?new yd(C.value,S):new iy(C.value,S,O),v.push(`/u_${x}`);else if(C.kind==="source"||z){let U=R4(x,O,"source");this.binders[x]=z?new Pc(C,O,R,l,U,s.id):new il(C,S,O,U),v.push(`/a_${x}`)}else{let U=R4(x,O,"composite");this.binders[x]=new qs(C,S,O,R,l,U),v.push(`/z_${x}`)}}this.cacheKey=v.sort().join("")}getMaxValue(s){let l=this.binders[s];return l instanceof il||l instanceof qs?l.maxValue:0}populatePaintArrays(s,l,f,v,x){for(let w in this.binders){let S=this.binders[w];(S instanceof il||S instanceof qs||S instanceof Pc)&&S.populatePaintArray(s,l,f,v,x)}}setConstantPatternPositions(s,l){for(let f in this.binders){let v=this.binders[f];v instanceof yd&&v.setConstantPatternPositions(s,l)}}updatePaintArrays(s,l,f,v,x){let w=!1;for(let S in s){let C=l.getPositions(S);for(let O of C){let R=f.feature(O.index);for(let k in this.binders){let z=this.binders[k];if((z instanceof il||z instanceof qs||z instanceof Pc)&&z.expression.isStateDependent===!0){let U=v.paint.get(k);z.expression=U.value,z.updatePaintArray(O.start,O.end,R,s[S],x),w=!0}}}}return w}defines(){let s=[];for(let l in this.binders){let f=this.binders[l];(f instanceof iy||f instanceof yd)&&s.push(...f.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return s}getBinderAttributes(){let s=[];for(let l in this.binders){let f=this.binders[l];if(f instanceof il||f instanceof qs)for(let v=0;v<f.paintVertexAttributes.length;v++)s.push(f.paintVertexAttributes[v].name);else if(f instanceof Pc)for(let v=0;v<Cc.members.length;v++)s.push(Cc.members[v].name)}return s}getBinderUniforms(){let s=[];for(let l in this.binders){let f=this.binders[l];if(f instanceof iy||f instanceof yd||f instanceof qs)for(let v of f.uniformNames)s.push(v)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,l){let f=[];for(let v in this.binders){let x=this.binders[v];if(x instanceof iy||x instanceof yd||x instanceof qs){for(let w of x.uniformNames)if(l[w]){let S=x.getBinding(s,l[w],w);f.push({name:w,property:v,binding:S})}}}return f}setUniforms(s,l,f,v){for(let{name:x,property:w,binding:S}of l)this.binders[w].setUniform(S,v,f.get(w),x)}updatePaintBuffers(s){this._buffers=[];for(let l in this.binders){let f=this.binders[l];if(s&&f instanceof Pc){let v=s.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(f instanceof il||f instanceof qs)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(s){for(let l in this.binders){let f=this.binders[l];(f instanceof il||f instanceof qs||f instanceof Pc)&&f.upload(s)}this.updatePaintBuffers()}destroy(){for(let s in this.binders){let l=this.binders[s];(l instanceof il||l instanceof qs||l instanceof Pc)&&l.destroy()}}}class gf{constructor(s,l,f=()=>!0){this.programConfigurations={};for(let v of s)this.programConfigurations[v.id]=new O4(v,l,f);this.needsUpload=!1,this._featureMap=new mf,this._bufferOffset=0}populatePaintArrays(s,l,f,v,x,w){for(let S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(s,l,v,x,w);l.id!==void 0&&this._featureMap.add(l.id,f,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,l,f,v){for(let x of f)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(s,this._featureMap,l,x,v)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(let l in this.programConfigurations)this.programConfigurations[l].upload(s);this.needsUpload=!1}}destroy(){for(let s in this.programConfigurations)this.programConfigurations[s].destroy()}}function GIe(u,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${s}-`,"").replace(/-/g,"_")]}function R4(u,s,l){let f={color:{source:Y,composite:bt},number:{source:We,composite:Y}},v=function(x){return{"line-pattern":{source:za,composite:za},"fill-pattern":{source:za,composite:za},"fill-extrusion-pattern":{source:za,composite:za}}[x]}(u);return v&&v[l]||f[s][l]}tt("ConstantBinder",iy),tt("CrossFadedConstantBinder",yd),tt("SourceExpressionBinder",il),tt("CrossFadedCompositeBinder",Pc),tt("CompositeExpressionBinder",qs),tt("ProgramConfiguration",O4,{omit:["_buffers"]}),tt("ProgramConfigurationSet",gf);let Sn=8192,wq=Math.pow(2,14)-1,D4=-wq-1;function yf(u){let s=Sn/u.extent,l=u.loadGeometry();for(let f=0;f<l.length;f++){let v=l[f];for(let x=0;x<v.length;x++){let w=v[x],S=Math.round(w.x*s),C=Math.round(w.y*s);w.x=re(S,D4,wq),w.y=re(C,D4,wq),(S<w.x||S>w.x+1||C<w.y||C>w.y+1)&&Rt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function _f(u,s){return{type:u.type,id:u.id,properties:u.properties,geometry:s?yf(u):[]}}function ow(u,s,l,f,v){u.emplaceBack(2*s+(f+1)/2,2*l+(v+1)/2)}class bq{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Si,this.indexArray=new bo,this.segments=new Wt,this.programConfigurations=new gf(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,f){let v=this.layers[0],x=[],w=null,S=!1;v.type==="circle"&&(w=v.layout.get("circle-sort-key"),S=!w.isConstant());for(let{feature:C,id:O,index:R,sourceLayerIndex:k}of s){let z=this.layers[0]._featureFilter.needGeometry,U=_f(C,z);if(!this.layers[0]._featureFilter.filter(new Rr(this.zoom),U,f))continue;let Z=S?w.evaluate(U,{},f):void 0,X={id:O,properties:C.properties,type:C.type,sourceLayerIndex:k,index:R,geometry:z?U.geometry:yf(C),patterns:{},sortKey:Z};x.push(X)}S&&x.sort((C,O)=>C.sortKey-O.sortKey);for(let C of x){let{geometry:O,index:R,sourceLayerIndex:k}=C,z=s[R].feature;this.addFeature(C,O,R,f),l.featureIndex.insert(z,O,R,k,this.index)}}update(s,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,xa),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,l,f,v){for(let x of l)for(let w of x){let S=w.x,C=w.y;if(S<0||S>=Sn||C<0||C>=Sn)continue;let O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),R=O.vertexLength;ow(this.layoutVertexArray,S,C,-1,-1),ow(this.layoutVertexArray,S,C,1,-1),ow(this.layoutVertexArray,S,C,1,1),ow(this.layoutVertexArray,S,C,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),O.vertexLength+=4,O.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,{},v)}}function L4(u,s){for(let l=0;l<u.length;l++)if(_d(s,u[l]))return!0;for(let l=0;l<s.length;l++)if(_d(u,s[l]))return!0;return!!Eq(u,s)}function WIe(u,s,l){return!!_d(u,s)||!!Sq(s,u,l)}function k4(u,s){if(u.length===1)return F4(s,u[0]);for(let l=0;l<s.length;l++){let f=s[l];for(let v=0;v<f.length;v++)if(_d(u,f[v]))return!0}for(let l=0;l<u.length;l++)if(F4(s,u[l]))return!0;for(let l=0;l<s.length;l++)if(Eq(u,s[l]))return!0;return!1}function ZIe(u,s,l){if(u.length>1){if(Eq(u,s))return!0;for(let f=0;f<s.length;f++)if(Sq(s[f],u,l))return!0}for(let f=0;f<u.length;f++)if(Sq(u[f],s,l))return!0;return!1}function Eq(u,s){if(u.length===0||s.length===0)return!1;for(let l=0;l<u.length-1;l++){let f=u[l],v=u[l+1];for(let x=0;x<s.length-1;x++)if(HIe(f,v,s[x],s[x+1]))return!0}return!1}function HIe(u,s,l,f){return ir(u,l,f)!==ir(s,l,f)&&ir(u,s,l)!==ir(u,s,f)}function Sq(u,s,l){let f=l*l;if(s.length===1)return u.distSqr(s[0])<f;for(let v=1;v<s.length;v++)if(N4(u,s[v-1],s[v])<f)return!0;return!1}function N4(u,s,l){let f=s.distSqr(l);if(f===0)return u.distSqr(s);let v=((u.x-s.x)*(l.x-s.x)+(u.y-s.y)*(l.y-s.y))/f;return u.distSqr(v<0?s:v>1?l:l.sub(s)._mult(v)._add(s))}function F4(u,s){let l,f,v,x=!1;for(let w=0;w<u.length;w++){l=u[w];for(let S=0,C=l.length-1;S<l.length;C=S++)f=l[S],v=l[C],f.y>s.y!=v.y>s.y&&s.x<(v.x-f.x)*(s.y-f.y)/(v.y-f.y)+f.x&&(x=!x)}return x}function _d(u,s){let l=!1;for(let f=0,v=u.length-1;f<u.length;v=f++){let x=u[f],w=u[v];x.y>s.y!=w.y>s.y&&s.x<(w.x-x.x)*(s.y-x.y)/(w.y-x.y)+x.x&&(l=!l)}return l}function KIe(u,s,l){let f=l[0],v=l[2];if(u.x<f.x&&s.x<f.x||u.x>v.x&&s.x>v.x||u.y<f.y&&s.y<f.y||u.y>v.y&&s.y>v.y)return!1;let x=ir(u,s,l[0]);return x!==ir(u,s,l[1])||x!==ir(u,s,l[2])||x!==ir(u,s,l[3])}function ay(u,s,l){let f=s.paint.get(u).value;return f.kind==="constant"?f.value:l.programConfigurations.get(s.id).getMaxValue(u)}function sw(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function uw(u,s,l,f,v){if(!s[0]&&!s[1])return u;let x=b.convert(s)._mult(v);l==="viewport"&&x._rotate(-f);let w=[];for(let S=0;S<u.length;S++)w.push(u[S].sub(x));return w}let z4,j4;tt("CircleBucket",bq,{omit:["layers"]});var XIe={get paint(){return j4=j4||new _({"circle-radius":new mt(Ee.paint_circle["circle-radius"]),"circle-color":new mt(Ee.paint_circle["circle-color"]),"circle-blur":new mt(Ee.paint_circle["circle-blur"]),"circle-opacity":new mt(Ee.paint_circle["circle-opacity"]),"circle-translate":new nt(Ee.paint_circle["circle-translate"]),"circle-translate-anchor":new nt(Ee.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new nt(Ee.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new nt(Ee.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new mt(Ee.paint_circle["circle-stroke-width"]),"circle-stroke-color":new mt(Ee.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new mt(Ee.paint_circle["circle-stroke-opacity"])})},get layout(){return z4=z4||new _({"circle-sort-key":new mt(Ee.layout_circle["circle-sort-key"])})}},$i=1e-6,xd=typeof Float32Array!="undefined"?Float32Array:Array;function Tq(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function B4(u,s,l){var f=s[0],v=s[1],x=s[2],w=s[3],S=s[4],C=s[5],O=s[6],R=s[7],k=s[8],z=s[9],U=s[10],Z=s[11],X=s[12],ne=s[13],ue=s[14],xe=s[15],pe=l[0],ye=l[1],Se=l[2],Re=l[3];return u[0]=pe*f+ye*S+Se*k+Re*X,u[1]=pe*v+ye*C+Se*z+Re*ne,u[2]=pe*x+ye*O+Se*U+Re*ue,u[3]=pe*w+ye*R+Se*Z+Re*xe,u[4]=(pe=l[4])*f+(ye=l[5])*S+(Se=l[6])*k+(Re=l[7])*X,u[5]=pe*v+ye*C+Se*z+Re*ne,u[6]=pe*x+ye*O+Se*U+Re*ue,u[7]=pe*w+ye*R+Se*Z+Re*xe,u[8]=(pe=l[8])*f+(ye=l[9])*S+(Se=l[10])*k+(Re=l[11])*X,u[9]=pe*v+ye*C+Se*z+Re*ne,u[10]=pe*x+ye*O+Se*U+Re*ue,u[11]=pe*w+ye*R+Se*Z+Re*xe,u[12]=(pe=l[12])*f+(ye=l[13])*S+(Se=l[14])*k+(Re=l[15])*X,u[13]=pe*v+ye*C+Se*z+Re*ne,u[14]=pe*x+ye*O+Se*U+Re*ue,u[15]=pe*w+ye*R+Se*Z+Re*xe,u}Math.hypot||(Math.hypot=function(){for(var u=0,s=arguments.length;s--;)u+=arguments[s]*arguments[s];return Math.sqrt(u)});var oy,YIe=B4;function lw(u,s,l){var f=s[0],v=s[1],x=s[2],w=s[3];return u[0]=l[0]*f+l[4]*v+l[8]*x+l[12]*w,u[1]=l[1]*f+l[5]*v+l[9]*x+l[13]*w,u[2]=l[2]*f+l[6]*v+l[10]*x+l[14]*w,u[3]=l[3]*f+l[7]*v+l[11]*x+l[15]*w,u}oy=new xd(4),xd!=Float32Array&&(oy[0]=0,oy[1]=0,oy[2]=0,oy[3]=0);class JIe extends c{constructor(s){super(s,XIe)}createBucket(s){return new bq(s)}queryRadius(s){let l=s;return ay("circle-radius",this,l)+ay("circle-stroke-width",this,l)+sw(this.paint.get("circle-translate"))}queryIntersectsFeature(s,l,f,v,x,w,S,C){let O=uw(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,S),R=this.paint.get("circle-radius").evaluate(l,f)+this.paint.get("circle-stroke-width").evaluate(l,f),k=this.paint.get("circle-pitch-alignment")==="map",z=k?O:function(Z,X){return Z.map(ne=>U4(ne,X))}(O,C),U=k?R*S:R;for(let Z of v)for(let X of Z){let ne=k?X:U4(X,C),ue=U,xe=lw([],[X.x,X.y,0,1],C);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ue*=xe[3]/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ue*=w.cameraToCenterDistance/xe[3]),WIe(z,ne,ue))return!0}return!1}}function U4(u,s){let l=lw([],[u.x,u.y,0,1],s);return new b(l[0]/l[3],l[1]/l[3])}class V4 extends bq{}let $4;tt("HeatmapBucket",V4,{omit:["layers"]});var QIe={get paint(){return $4=$4||new _({"heatmap-radius":new mt(Ee.paint_heatmap["heatmap-radius"]),"heatmap-weight":new mt(Ee.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new nt(Ee.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ry(Ee.paint_heatmap["heatmap-color"]),"heatmap-opacity":new nt(Ee.paint_heatmap["heatmap-opacity"])})}};function Iq(u,{width:s,height:l},f,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==s*l*f)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${s*l*f}`)}else v=new Uint8Array(s*l*f);return u.width=s,u.height=l,u.data=v,u}function G4(u,{width:s,height:l},f){if(s===u.width&&l===u.height)return;let v=Iq({},{width:s,height:l},f);Cq(u,v,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,s),height:Math.min(u.height,l)},f),u.width=s,u.height=l,u.data=v.data}function Cq(u,s,l,f,v,x){if(v.width===0||v.height===0)return s;if(v.width>u.width||v.height>u.height||l.x>u.width-v.width||l.y>u.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>s.width||v.height>s.height||f.x>s.width-v.width||f.y>s.height-v.height)throw new RangeError("out of range destination coordinates for image copy");let w=u.data,S=s.data;if(w===S)throw new Error("srcData equals dstData, so image is already copied");for(let C=0;C<v.height;C++){let O=((l.y+C)*u.width+l.x)*x,R=((f.y+C)*s.width+f.x)*x;for(let k=0;k<v.width*x;k++)S[R+k]=w[O+k]}return s}class sy{constructor(s,l){Iq(this,s,1,l)}resize(s){G4(this,s,1)}clone(){return new sy({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,l,f,v,x){Cq(s,l,f,v,x,1)}}class Eo{constructor(s,l){Iq(this,s,4,l)}resize(s){G4(this,s,4)}replace(s,l){l?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new Eo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,l,f,v,x){Cq(s,l,f,v,x,4)}}function W4(u){let s={},l=u.resolution||256,f=u.clips?u.clips.length:1,v=u.image||new Eo({width:l,height:f});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);let x=(w,S,C)=>{s[u.evaluationKey]=C;let O=u.expression.evaluate(s);v.data[w+S+0]=Math.floor(255*O.r/O.a),v.data[w+S+1]=Math.floor(255*O.g/O.a),v.data[w+S+2]=Math.floor(255*O.b/O.a),v.data[w+S+3]=Math.floor(255*O.a)};if(u.clips)for(let w=0,S=0;w<f;++w,S+=4*l)for(let C=0,O=0;C<l;C++,O+=4){let R=C/(l-1),{start:k,end:z}=u.clips[w];x(S,O,k*(1-R)+z*R)}else for(let w=0,S=0;w<l;w++,S+=4)x(0,S,w/(l-1));return v}tt("AlphaImage",sy),tt("RGBAImage",Eo);let Aq="big-fb";class eCe extends c{createBucket(s){return new V4(s)}constructor(s){super(s,QIe),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=W4({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Aq)&&this.heatmapFbos.delete(Aq)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Z4;var tCe={get paint(){return Z4=Z4||new _({"hillshade-illumination-direction":new nt(Ee.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new nt(Ee.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new nt(Ee.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new nt(Ee.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new nt(Ee.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new nt(Ee.paint_hillshade["hillshade-accent-color"])})}};class rCe extends c{constructor(s){super(s,tCe)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let nCe=I([{name:"a_pos",components:2,type:"Int16"}],4),{members:iCe}=nCe;function H4(u,s,l=2){let f=s&&s.length,v=f?s[0]*l:u.length,x=K4(u,0,v,l,!0),w=[];if(!x||x.next===x.prev)return w;let S,C,O;if(f&&(x=function(R,k,z,U){let Z=[];for(let X=0,ne=k.length;X<ne;X++){let ue=K4(R,k[X]*U,X<ne-1?k[X+1]*U:R.length,U,!1);ue===ue.next&&(ue.steiner=!0),Z.push(fCe(ue))}Z.sort(lCe);for(let X=0;X<Z.length;X++)z=cCe(Z[X],z);return z}(u,s,x,l)),u.length>80*l){S=1/0,C=1/0;let R=-1/0,k=-1/0;for(let z=l;z<v;z+=l){let U=u[z],Z=u[z+1];U<S&&(S=U),Z<C&&(C=Z),U>R&&(R=U),Z>k&&(k=Z)}O=Math.max(R-S,k-C),O=O!==0?32767/O:0}return uy(x,w,l,S,C,O,0),w}function K4(u,s,l,f,v){let x;if(v===function(w,S,C,O){let R=0;for(let k=S,z=C-O;k<C;k+=O)R+=(w[z]-w[k])*(w[k+1]+w[z+1]),z=k;return R}(u,s,l,f)>0)for(let w=s;w<l;w+=f)x=J4(w/f|0,u[w],u[w+1],x);else for(let w=l-f;w>=s;w-=f)x=J4(w/f|0,u[w],u[w+1],x);return x&&cw(x,x.next)&&(cy(x),x=x.next),x}function xf(u,s){if(!u)return u;s||(s=u);let l,f=u;do if(l=!1,f.steiner||!cw(f,f.next)&&mn(f.prev,f,f.next)!==0)f=f.next;else{if(cy(f),f=s=f.prev,f===f.next)break;l=!0}while(l||f!==s);return s}function uy(u,s,l,f,v,x,w){if(!u)return;!w&&x&&function(C,O,R,k){let z=C;do z.z===0&&(z.z=qq(z.x,z.y,O,R,k)),z.prevZ=z.prev,z.nextZ=z.next,z=z.next;while(z!==C);z.prevZ.nextZ=null,z.prevZ=null,function(U){let Z,X=1;do{let ne,ue=U;U=null;let xe=null;for(Z=0;ue;){Z++;let pe=ue,ye=0;for(let Re=0;Re<X&&(ye++,pe=pe.nextZ,pe);Re++);let Se=X;for(;ye>0||Se>0&&pe;)ye!==0&&(Se===0||!pe||ue.z<=pe.z)?(ne=ue,ue=ue.nextZ,ye--):(ne=pe,pe=pe.nextZ,Se--),xe?xe.nextZ=ne:U=ne,ne.prevZ=xe,xe=ne;ue=pe}xe.nextZ=null,X*=2}while(Z>1)}(z)}(u,f,v,x);let S=u;for(;u.prev!==u.next;){let C=u.prev,O=u.next;if(x?oCe(u,f,v,x):aCe(u))s.push(C.i,u.i,O.i),cy(u),u=O.next,S=O.next;else if((u=O)===S){w?w===1?uy(u=sCe(xf(u),s),s,l,f,v,x,2):w===2&&uCe(u,s,l,f,v,x):uy(xf(u),s,l,f,v,x,1);break}}}function aCe(u){let s=u.prev,l=u,f=u.next;if(mn(s,l,f)>=0)return!1;let v=s.x,x=l.x,w=f.x,S=s.y,C=l.y,O=f.y,R=v<x?v<w?v:w:x<w?x:w,k=S<C?S<O?S:O:C<O?C:O,z=v>x?v>w?v:w:x>w?x:w,U=S>C?S>O?S:O:C>O?C:O,Z=f.next;for(;Z!==s;){if(Z.x>=R&&Z.x<=z&&Z.y>=k&&Z.y<=U&&wd(v,S,x,C,w,O,Z.x,Z.y)&&mn(Z.prev,Z,Z.next)>=0)return!1;Z=Z.next}return!0}function oCe(u,s,l,f){let v=u.prev,x=u,w=u.next;if(mn(v,x,w)>=0)return!1;let S=v.x,C=x.x,O=w.x,R=v.y,k=x.y,z=w.y,U=S<C?S<O?S:O:C<O?C:O,Z=R<k?R<z?R:z:k<z?k:z,X=S>C?S>O?S:O:C>O?C:O,ne=R>k?R>z?R:z:k>z?k:z,ue=qq(U,Z,s,l,f),xe=qq(X,ne,s,l,f),pe=u.prevZ,ye=u.nextZ;for(;pe&&pe.z>=ue&&ye&&ye.z<=xe;){if(pe.x>=U&&pe.x<=X&&pe.y>=Z&&pe.y<=ne&&pe!==v&&pe!==w&&wd(S,R,C,k,O,z,pe.x,pe.y)&&mn(pe.prev,pe,pe.next)>=0||(pe=pe.prevZ,ye.x>=U&&ye.x<=X&&ye.y>=Z&&ye.y<=ne&&ye!==v&&ye!==w&&wd(S,R,C,k,O,z,ye.x,ye.y)&&mn(ye.prev,ye,ye.next)>=0))return!1;ye=ye.nextZ}for(;pe&&pe.z>=ue;){if(pe.x>=U&&pe.x<=X&&pe.y>=Z&&pe.y<=ne&&pe!==v&&pe!==w&&wd(S,R,C,k,O,z,pe.x,pe.y)&&mn(pe.prev,pe,pe.next)>=0)return!1;pe=pe.prevZ}for(;ye&&ye.z<=xe;){if(ye.x>=U&&ye.x<=X&&ye.y>=Z&&ye.y<=ne&&ye!==v&&ye!==w&&wd(S,R,C,k,O,z,ye.x,ye.y)&&mn(ye.prev,ye,ye.next)>=0)return!1;ye=ye.nextZ}return!0}function sCe(u,s){let l=u;do{let f=l.prev,v=l.next.next;!cw(f,v)&&X4(f,l,l.next,v)&&ly(f,v)&&ly(v,f)&&(s.push(f.i,l.i,v.i),cy(l),cy(l.next),l=u=v),l=l.next}while(l!==u);return xf(l)}function uCe(u,s,l,f,v,x){let w=u;do{let S=w.next.next;for(;S!==w.prev;){if(w.i!==S.i&&pCe(w,S)){let C=Y4(w,S);return w=xf(w,w.next),C=xf(C,C.next),uy(w,s,l,f,v,x,0),void uy(C,s,l,f,v,x,0)}S=S.next}w=w.next}while(w!==u)}function lCe(u,s){return u.x-s.x}function cCe(u,s){let l=function(v,x){let w=x,S=v.x,C=v.y,O,R=-1/0;do{if(C<=w.y&&C>=w.next.y&&w.next.y!==w.y){let X=w.x+(C-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(X<=S&&X>R&&(R=X,O=w.x<w.next.x?w:w.next,X===S))return O}w=w.next}while(w!==x);if(!O)return null;let k=O,z=O.x,U=O.y,Z=1/0;w=O;do{if(S>=w.x&&w.x>=z&&S!==w.x&&wd(C<U?S:R,C,z,U,C<U?R:S,C,w.x,w.y)){let X=Math.abs(C-w.y)/(S-w.x);ly(w,v)&&(X<Z||X===Z&&(w.x>O.x||w.x===O.x&&hCe(O,w)))&&(O=w,Z=X)}w=w.next}while(w!==k);return O}(u,s);if(!l)return s;let f=Y4(l,u);return xf(f,f.next),xf(l,l.next)}function hCe(u,s){return mn(u.prev,u,s.prev)<0&&mn(s.next,u,u.next)<0}function qq(u,s,l,f,v){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-l)*v|0)|u<<8))|u<<4))|u<<2))|u<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-f)*v|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function fCe(u){let s=u,l=u;do(s.x<l.x||s.x===l.x&&s.y<l.y)&&(l=s),s=s.next;while(s!==u);return l}function wd(u,s,l,f,v,x,w,S){return(v-w)*(s-S)>=(u-w)*(x-S)&&(u-w)*(f-S)>=(l-w)*(s-S)&&(l-w)*(x-S)>=(v-w)*(f-S)}function pCe(u,s){return u.next.i!==s.i&&u.prev.i!==s.i&&!function(l,f){let v=l;do{if(v.i!==l.i&&v.next.i!==l.i&&v.i!==f.i&&v.next.i!==f.i&&X4(v,v.next,l,f))return!0;v=v.next}while(v!==l);return!1}(u,s)&&(ly(u,s)&&ly(s,u)&&function(l,f){let v=l,x=!1,w=(l.x+f.x)/2,S=(l.y+f.y)/2;do v.y>S!=v.next.y>S&&v.next.y!==v.y&&w<(v.next.x-v.x)*(S-v.y)/(v.next.y-v.y)+v.x&&(x=!x),v=v.next;while(v!==l);return x}(u,s)&&(mn(u.prev,u,s.prev)||mn(u,s.prev,s))||cw(u,s)&&mn(u.prev,u,u.next)>0&&mn(s.prev,s,s.next)>0)}function mn(u,s,l){return(s.y-u.y)*(l.x-s.x)-(s.x-u.x)*(l.y-s.y)}function cw(u,s){return u.x===s.x&&u.y===s.y}function X4(u,s,l,f){let v=fw(mn(u,s,l)),x=fw(mn(u,s,f)),w=fw(mn(l,f,u)),S=fw(mn(l,f,s));return v!==x&&w!==S||!(v!==0||!hw(u,l,s))||!(x!==0||!hw(u,f,s))||!(w!==0||!hw(l,u,f))||!(S!==0||!hw(l,s,f))}function hw(u,s,l){return s.x<=Math.max(u.x,l.x)&&s.x>=Math.min(u.x,l.x)&&s.y<=Math.max(u.y,l.y)&&s.y>=Math.min(u.y,l.y)}function fw(u){return u>0?1:u<0?-1:0}function ly(u,s){return mn(u.prev,u,u.next)<0?mn(u,s,u.next)>=0&&mn(u,u.prev,s)>=0:mn(u,s,u.prev)<0||mn(u,u.next,s)<0}function Y4(u,s){let l=Pq(u.i,u.x,u.y),f=Pq(s.i,s.x,s.y),v=u.next,x=s.prev;return u.next=s,s.prev=u,l.next=v,v.prev=l,f.next=l,l.prev=f,x.next=f,f.prev=x,f}function J4(u,s,l,f){let v=Pq(u,s,l);return f?(v.next=f.next,v.prev=f,f.next.prev=v,f.next=v):(v.prev=v,v.next=v),v}function cy(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Pq(u,s,l){return{i:u,x:s,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Mq(u,s,l){let f=l.patternDependencies,v=!1;for(let x of s){let w=x.paint.get(`${u}-pattern`);w.isConstant()||(v=!0);let S=w.constantOr(null);S&&(v=!0,f[S.to]=!0,f[S.from]=!0)}return v}function Oq(u,s,l,f,v){let x=v.patternDependencies;for(let w of s){let S=w.paint.get(`${u}-pattern`).value;if(S.kind!=="constant"){let C=S.evaluate({zoom:f-1},l,{},v.availableImages),O=S.evaluate({zoom:f},l,{},v.availableImages),R=S.evaluate({zoom:f+1},l,{},v.availableImages);C=C&&C.name?C.name:C,O=O&&O.name?O.name:O,R=R&&R.name?R.name:R,x[C]=!0,x[O]=!0,x[R]=!0,l.patterns[w.id]={min:C,mid:O,max:R}}}return l}class Rq{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Vo,this.indexArray=new bo,this.indexArray2=new Kn,this.programConfigurations=new gf(s.layers,s.zoom),this.segments=new Wt,this.segments2=new Wt,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,f){this.hasPattern=Mq("fill",this.layers,l);let v=this.layers[0].layout.get("fill-sort-key"),x=!v.isConstant(),w=[];for(let{feature:S,id:C,index:O,sourceLayerIndex:R}of s){let k=this.layers[0]._featureFilter.needGeometry,z=_f(S,k);if(!this.layers[0]._featureFilter.filter(new Rr(this.zoom),z,f))continue;let U=x?v.evaluate(z,{},f,l.availableImages):void 0,Z={id:C,properties:S.properties,type:S.type,sourceLayerIndex:R,index:O,geometry:k?z.geometry:yf(S),patterns:{},sortKey:U};w.push(Z)}x&&w.sort((S,C)=>S.sortKey-C.sortKey);for(let S of w){let{geometry:C,index:O,sourceLayerIndex:R}=S;if(this.hasPattern){let k=Oq("fill",this.layers,S,this.zoom,l);this.patternFeatures.push(k)}else this.addFeature(S,C,O,f,{});l.featureIndex.insert(s[O].feature,C,O,R,this.index)}}update(s,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,f)}addFeatures(s,l,f){for(let v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,l,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,iCe),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,l,f,v,x){for(let w of Gp(l,500)){let S=0;for(let U of w)S+=U.length;let C=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),O=C.vertexLength,R=[],k=[];for(let U of w){if(U.length===0)continue;U!==w[0]&&k.push(R.length/2);let Z=this.segments2.prepareSegment(U.length,this.layoutVertexArray,this.indexArray2),X=Z.vertexLength;this.layoutVertexArray.emplaceBack(U[0].x,U[0].y),this.indexArray2.emplaceBack(X+U.length-1,X),R.push(U[0].x),R.push(U[0].y);for(let ne=1;ne<U.length;ne++)this.layoutVertexArray.emplaceBack(U[ne].x,U[ne].y),this.indexArray2.emplaceBack(X+ne-1,X+ne),R.push(U[ne].x),R.push(U[ne].y);Z.vertexLength+=U.length,Z.primitiveLength+=U.length}let z=H4(R,k);for(let U=0;U<z.length;U+=3)this.indexArray.emplaceBack(O+z[U],O+z[U+1],O+z[U+2]);C.vertexLength+=S,C.primitiveLength+=z.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,x,v)}}let Q4,eU;tt("FillBucket",Rq,{omit:["layers","patternFeatures"]});var dCe={get paint(){return eU=eU||new _({"fill-antialias":new nt(Ee.paint_fill["fill-antialias"]),"fill-opacity":new mt(Ee.paint_fill["fill-opacity"]),"fill-color":new mt(Ee.paint_fill["fill-color"]),"fill-outline-color":new mt(Ee.paint_fill["fill-outline-color"]),"fill-translate":new nt(Ee.paint_fill["fill-translate"]),"fill-translate-anchor":new nt(Ee.paint_fill["fill-translate-anchor"]),"fill-pattern":new hd(Ee.paint_fill["fill-pattern"])})},get layout(){return Q4=Q4||new _({"fill-sort-key":new mt(Ee.layout_fill["fill-sort-key"])})}};class mCe extends c{constructor(s){super(s,dCe)}recalculate(s,l){super.recalculate(s,l);let f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new Rq(s)}queryRadius(){return sw(this.paint.get("fill-translate"))}queryIntersectsFeature(s,l,f,v,x,w,S){return k4(uw(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,S),v)}isTileClipped(){return!0}}let vCe=I([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),gCe=I([{name:"a_centroid",components:2,type:"Int16"}],4),{members:yCe}=vCe;var Mc={},_Ce=p,tU=bd;function bd(u,s,l,f,v){this.properties={},this.extent=l,this.type=0,this._pbf=u,this._geometry=-1,this._keys=f,this._values=v,u.readFields(xCe,this,s)}function xCe(u,s,l){u==1?s.id=l.readVarint():u==2?function(f,v){for(var x=f.readVarint()+f.pos;f.pos<x;){var w=v._keys[f.readVarint()],S=v._values[f.readVarint()];v.properties[w]=S}}(l,s):u==3?s.type=l.readVarint():u==4&&(s._geometry=l.pos)}function wCe(u){for(var s,l,f=0,v=0,x=u.length,w=x-1;v<x;w=v++)f+=((l=u[w]).x-(s=u[v]).x)*(s.y+l.y);return f}bd.types=["Unknown","Point","LineString","Polygon"],bd.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var s,l=u.readVarint()+u.pos,f=1,v=0,x=0,w=0,S=[];u.pos<l;){if(v<=0){var C=u.readVarint();f=7&C,v=C>>3}if(v--,f===1||f===2)x+=u.readSVarint(),w+=u.readSVarint(),f===1&&(s&&S.push(s),s=[]),s.push(new _Ce(x,w));else{if(f!==7)throw new Error("unknown command "+f);s&&s.push(s[0].clone())}}return s&&S.push(s),S},bd.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var s=u.readVarint()+u.pos,l=1,f=0,v=0,x=0,w=1/0,S=-1/0,C=1/0,O=-1/0;u.pos<s;){if(f<=0){var R=u.readVarint();l=7&R,f=R>>3}if(f--,l===1||l===2)(v+=u.readSVarint())<w&&(w=v),v>S&&(S=v),(x+=u.readSVarint())<C&&(C=x),x>O&&(O=x);else if(l!==7)throw new Error("unknown command "+l)}return[w,C,S,O]},bd.prototype.toGeoJSON=function(u,s,l){var f,v,x=this.extent*Math.pow(2,l),w=this.extent*u,S=this.extent*s,C=this.loadGeometry(),O=bd.types[this.type];function R(U){for(var Z=0;Z<U.length;Z++){var X=U[Z];U[Z]=[360*(X.x+w)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(X.y+S)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var k=[];for(f=0;f<C.length;f++)k[f]=C[f][0];R(C=k);break;case 2:for(f=0;f<C.length;f++)R(C[f]);break;case 3:for(C=function(U){var Z=U.length;if(Z<=1)return[U];for(var X,ne,ue=[],xe=0;xe<Z;xe++){var pe=wCe(U[xe]);pe!==0&&(ne===void 0&&(ne=pe<0),ne===pe<0?(X&&ue.push(X),X=[U[xe]]):X.push(U[xe]))}return X&&ue.push(X),ue}(C),f=0;f<C.length;f++)for(v=0;v<C[f].length;v++)R(C[f][v]);}C.length===1?C=C[0]:O="Multi"+O;var z={type:"Feature",geometry:{type:O,coordinates:C},properties:this.properties};return"id"in this&&(z.id=this.id),z};var bCe=tU,rU=nU;function nU(u,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(ECe,this,s),this.length=this._features.length}function ECe(u,s,l){u===15?s.version=l.readVarint():u===1?s.name=l.readString():u===5?s.extent=l.readVarint():u===2?s._features.push(l.pos):u===3?s._keys.push(l.readString()):u===4&&s._values.push(function(f){for(var v=null,x=f.readVarint()+f.pos;f.pos<x;){var w=f.readVarint()>>3;v=w===1?f.readString():w===2?f.readFloat():w===3?f.readDouble():w===4?f.readVarint64():w===5?f.readVarint():w===6?f.readSVarint():w===7?f.readBoolean():null}return v}(l))}nU.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var s=this._pbf.readVarint()+this._pbf.pos;return new bCe(this._pbf,s,this.extent,this._keys,this._values)};var SCe=rU;function TCe(u,s,l){if(u===3){var f=new SCe(l,l.readVarint()+l.pos);f.length&&(s[f.name]=f)}}Mc.VectorTile=function(u,s){this.layers=u.readFields(TCe,{},s)},Mc.VectorTileFeature=tU,Mc.VectorTileLayer=rU;let ICe=Mc.VectorTileFeature.types,Dq=Math.pow(2,13);function hy(u,s,l,f,v,x,w,S){u.emplaceBack(s,l,2*Math.floor(f*Dq)+w,v*Dq*2,x*Dq*2,Math.round(S))}class Lq{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Tc,this.centroidVertexArray=new ui,this.indexArray=new bo,this.programConfigurations=new gf(s.layers,s.zoom),this.segments=new Wt,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,f){this.features=[],this.hasPattern=Mq("fill-extrusion",this.layers,l);for(let{feature:v,id:x,index:w,sourceLayerIndex:S}of s){let C=this.layers[0]._featureFilter.needGeometry,O=_f(v,C);if(!this.layers[0]._featureFilter.filter(new Rr(this.zoom),O,f))continue;let R={id:x,sourceLayerIndex:S,index:w,geometry:C?O.geometry:yf(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(Oq("fill-extrusion",this.layers,R,this.zoom,l)):this.addFeature(R,R.geometry,w,f,{}),l.featureIndex.insert(v,R.geometry,w,S,this.index,!0)}}addFeatures(s,l,f){for(let v of this.features){let{geometry:x}=v;this.addFeature(v,x,v.index,l,f)}}update(s,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,yCe),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,gCe.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,l,f,v,x){for(let w of Gp(l,500)){let S={x:0,y:0,vertexCount:0},C=0;for(let Z of w)C+=Z.length;let O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let Z of w){if(Z.length===0||ACe(Z))continue;let X=0;for(let ne=0;ne<Z.length;ne++){let ue=Z[ne];if(ne>=1){let xe=Z[ne-1];if(!CCe(ue,xe)){O.vertexLength+4>Wt.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let pe=ue.sub(xe)._perp()._unit(),ye=xe.dist(ue);X+ye>32768&&(X=0),hy(this.layoutVertexArray,ue.x,ue.y,pe.x,pe.y,0,0,X),hy(this.layoutVertexArray,ue.x,ue.y,pe.x,pe.y,0,1,X),S.x+=2*ue.x,S.y+=2*ue.y,S.vertexCount+=2,X+=ye,hy(this.layoutVertexArray,xe.x,xe.y,pe.x,pe.y,0,0,X),hy(this.layoutVertexArray,xe.x,xe.y,pe.x,pe.y,0,1,X),S.x+=2*xe.x,S.y+=2*xe.y,S.vertexCount+=2;let Se=O.vertexLength;this.indexArray.emplaceBack(Se,Se+2,Se+1),this.indexArray.emplaceBack(Se+1,Se+2,Se+3),O.vertexLength+=4,O.primitiveLength+=2}}}}if(O.vertexLength+C>Wt.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),ICe[s.type]!=="Polygon")continue;let R=[],k=[],z=O.vertexLength;for(let Z of w)if(Z.length!==0){Z!==w[0]&&k.push(R.length/2);for(let X=0;X<Z.length;X++){let ne=Z[X];hy(this.layoutVertexArray,ne.x,ne.y,0,0,1,1,0),S.x+=ne.x,S.y+=ne.y,S.vertexCount+=1,R.push(ne.x),R.push(ne.y)}}let U=H4(R,k);for(let Z=0;Z<U.length;Z+=3)this.indexArray.emplaceBack(z+U[Z],z+U[Z+2],z+U[Z+1]);O.primitiveLength+=U.length/3,O.vertexLength+=C;for(let Z=0;Z<S.vertexCount;Z++){let X=Math.floor(S.x/S.vertexCount),ne=Math.floor(S.y/S.vertexCount);this.centroidVertexArray.emplaceBack(X,ne)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,x,v)}}function CCe(u,s){return u.x===s.x&&(u.x<0||u.x>Sn)||u.y===s.y&&(u.y<0||u.y>Sn)}function ACe(u){return u.every(s=>s.x<0)||u.every(s=>s.x>Sn)||u.every(s=>s.y<0)||u.every(s=>s.y>Sn)}let iU;tt("FillExtrusionBucket",Lq,{omit:["layers","features"]});var qCe={get paint(){return iU=iU||new _({"fill-extrusion-opacity":new nt(Ee["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new mt(Ee["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new nt(Ee["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new nt(Ee["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new hd(Ee["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new mt(Ee["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new mt(Ee["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new nt(Ee["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class PCe extends c{constructor(s){super(s,qCe)}createBucket(s){return new Lq(s)}queryRadius(){return sw(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(s,l,f,v,x,w,S,C){let O=uw(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,S),R=this.paint.get("fill-extrusion-height").evaluate(l,f),k=this.paint.get("fill-extrusion-base").evaluate(l,f),z=function(Z,X,ne,ue){let xe=[];for(let pe of Z){let ye=[pe.x,pe.y,0,1];lw(ye,ye,X),xe.push(new b(ye[0]/ye[3],ye[1]/ye[3]))}return xe}(O,C),U=function(Z,X,ne,ue){let xe=[],pe=[],ye=ue[8]*X,Se=ue[9]*X,Re=ue[10]*X,Xe=ue[11]*X,pt=ue[8]*ne,He=ue[9]*ne,Ge=ue[10]*ne,st=ue[11]*ne;for(let rt of Z){let et=[],Ce=[];for(let ut of rt){let at=ut.x,wt=ut.y,Tr=ue[0]*at+ue[4]*wt+ue[12],wr=ue[1]*at+ue[5]*wt+ue[13],Fn=ue[2]*at+ue[6]*wt+ue[14],$o=ue[3]*at+ue[7]*wt+ue[15],hi=Fn+Re,zn=$o+Xe,Gi=Tr+pt,Wi=wr+He,Zi=Fn+Ge,un=$o+st,jn=new b((Tr+ye)/zn,(wr+Se)/zn);jn.z=hi/zn,et.push(jn);let Ti=new b(Gi/un,Wi/un);Ti.z=Zi/un,Ce.push(Ti)}xe.push(et),pe.push(Ce)}return[xe,pe]}(v,k,R,C);return function(Z,X,ne){let ue=1/0;k4(ne,X)&&(ue=aU(ne,X[0]));for(let xe=0;xe<X.length;xe++){let pe=X[xe],ye=Z[xe];for(let Se=0;Se<pe.length-1;Se++){let Re=pe[Se],Xe=[Re,pe[Se+1],ye[Se+1],ye[Se],Re];L4(ne,Xe)&&(ue=Math.min(ue,aU(ne,Xe)))}}return ue!==1/0&&ue}(U[0],U[1],z)}}function fy(u,s){return u.x*s.x+u.y*s.y}function aU(u,s){if(u.length===1){let l=0,f=s[l++],v;for(;!v||f.equals(v);)if(v=s[l++],!v)return 1/0;for(;l<s.length;l++){let x=s[l],w=u[0],S=v.sub(f),C=x.sub(f),O=w.sub(f),R=fy(S,S),k=fy(S,C),z=fy(C,C),U=fy(O,S),Z=fy(O,C),X=R*z-k*k,ne=(z*U-k*Z)/X,ue=(R*Z-k*U)/X,xe=f.z*(1-ne-ue)+v.z*ne+x.z*ue;if(isFinite(xe))return xe}return 1/0}{let l=1/0;for(let f of s)l=Math.min(l,f.z);return l}}let MCe=I([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:OCe}=MCe,RCe=I([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:DCe}=RCe,LCe=Mc.VectorTileFeature.types,kCe=Math.cos(Math.PI/180*37.5),oU=Math.pow(2,14)/.5;class kq{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new pd,this.layoutVertexArray2=new Ic,this.indexArray=new bo,this.programConfigurations=new gf(s.layers,s.zoom),this.segments=new Wt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,f){this.hasPattern=Mq("line",this.layers,l);let v=this.layers[0].layout.get("line-sort-key"),x=!v.isConstant(),w=[];for(let{feature:S,id:C,index:O,sourceLayerIndex:R}of s){let k=this.layers[0]._featureFilter.needGeometry,z=_f(S,k);if(!this.layers[0]._featureFilter.filter(new Rr(this.zoom),z,f))continue;let U=x?v.evaluate(z,{},f):void 0,Z={id:C,properties:S.properties,type:S.type,sourceLayerIndex:R,index:O,geometry:k?z.geometry:yf(S),patterns:{},sortKey:U};w.push(Z)}x&&w.sort((S,C)=>S.sortKey-C.sortKey);for(let S of w){let{geometry:C,index:O,sourceLayerIndex:R}=S;if(this.hasPattern){let k=Oq("line",this.layers,S,this.zoom,l);this.patternFeatures.push(k)}else this.addFeature(S,C,O,f,{});l.featureIndex.insert(s[O].feature,C,O,R,this.index)}}update(s,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,f)}addFeatures(s,l,f){for(let v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,l,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,DCe)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,OCe),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,l,f,v,x){let w=this.layers[0].layout,S=w.get("line-join").evaluate(s,{}),C=w.get("line-cap"),O=w.get("line-miter-limit"),R=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(let k of l)this.addLine(k,s,S,C,O,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,x,v)}addLine(s,l,f,v,x,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ue=0;ue<s.length-1;ue++)this.totalDistance+=s[ue].dist(s[ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let S=LCe[l.type]==="Polygon",C=s.length;for(;C>=2&&s[C-1].equals(s[C-2]);)C--;let O=0;for(;O<C-1&&s[O].equals(s[O+1]);)O++;if(C<(S?3:2))return;f==="bevel"&&(x=1.05);let R=this.overscaling<=16?15*Sn/(512*this.overscaling):0,k=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray),z,U,Z,X,ne;this.e1=this.e2=-1,S&&(z=s[C-2],ne=s[O].sub(z)._unit()._perp());for(let ue=O;ue<C;ue++){if(Z=ue===C-1?S?s[O+1]:void 0:s[ue+1],Z&&s[ue].equals(Z))continue;ne&&(X=ne),z&&(U=z),z=s[ue],ne=Z?Z.sub(z)._unit()._perp():X,X=X||ne;let xe=X.add(ne);xe.x===0&&xe.y===0||xe._unit();let pe=X.x*ne.x+X.y*ne.y,ye=xe.x*ne.x+xe.y*ne.y,Se=ye!==0?1/ye:1/0,Re=2*Math.sqrt(2-2*ye),Xe=ye<kCe&&U&&Z,pt=X.x*ne.y-X.y*ne.x>0;if(Xe&&ue>O){let st=z.dist(U);if(st>2*R){let rt=z.sub(z.sub(U)._mult(R/st)._round());this.updateDistance(U,rt),this.addCurrentVertex(rt,X,0,0,k),U=rt}}let He=U&&Z,Ge=He?f:S?"butt":v;if(He&&Ge==="round"&&(Se<w?Ge="miter":Se<=2&&(Ge="fakeround")),Ge==="miter"&&Se>x&&(Ge="bevel"),Ge==="bevel"&&(Se>2&&(Ge="flipbevel"),Se<x&&(Ge="miter")),U&&this.updateDistance(U,z),Ge==="miter")xe._mult(Se),this.addCurrentVertex(z,xe,0,0,k);else if(Ge==="flipbevel"){if(Se>100)xe=ne.mult(-1);else{let st=Se*X.add(ne).mag()/X.sub(ne).mag();xe._perp()._mult(st*(pt?-1:1))}this.addCurrentVertex(z,xe,0,0,k),this.addCurrentVertex(z,xe.mult(-1),0,0,k)}else if(Ge==="bevel"||Ge==="fakeround"){let st=-Math.sqrt(Se*Se-1),rt=pt?st:0,et=pt?0:st;if(U&&this.addCurrentVertex(z,X,rt,et,k),Ge==="fakeround"){let Ce=Math.round(180*Re/Math.PI/20);for(let ut=1;ut<Ce;ut++){let at=ut/Ce;if(at!==.5){let Tr=at-.5;at+=at*Tr*(at-1)*((1.0904+pe*(pe*(3.55645-1.43519*pe)-3.2452))*Tr*Tr+(.848013+pe*(.215638*pe-1.06021)))}let wt=ne.sub(X)._mult(at)._add(X)._unit()._mult(pt?-1:1);this.addHalfVertex(z,wt.x,wt.y,!1,pt,0,k)}}Z&&this.addCurrentVertex(z,ne,-rt,-et,k)}else if(Ge==="butt")this.addCurrentVertex(z,xe,0,0,k);else if(Ge==="square"){let st=U?1:-1;this.addCurrentVertex(z,xe,st,st,k)}else Ge==="round"&&(U&&(this.addCurrentVertex(z,X,0,0,k),this.addCurrentVertex(z,X,1,1,k,!0)),Z&&(this.addCurrentVertex(z,ne,-1,-1,k,!0),this.addCurrentVertex(z,ne,0,0,k)));if(Xe&&ue<C-1){let st=z.dist(Z);if(st>2*R){let rt=z.add(Z.sub(z)._mult(R/st)._round());this.updateDistance(z,rt),this.addCurrentVertex(rt,ne,0,0,k),z=rt}}}}addCurrentVertex(s,l,f,v,x,w=!1){let S=l.y*v-l.x,C=-l.y-l.x*v;this.addHalfVertex(s,l.x+l.y*f,l.y-l.x*f,w,!1,f,x),this.addHalfVertex(s,S,C,w,!0,-v,x),this.distance>oU/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,l,f,v,x,w))}addHalfVertex({x:s,y:l},f,v,x,w,S,C){let O=.5*(this.lineClips?this.scaledDistance*(oU-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(x?1:0),(l<<1)+(w?1:0),Math.round(63*f)+128,Math.round(63*v)+128,1+(S===0?0:S<0?-1:1)|(63&O)<<2,O>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let R=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,R),C.primitiveLength++),w?this.e2=R:this.e1=R}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,l){this.distance+=s.dist(l),this.updateScaledDistance()}}let sU,uU;tt("LineBucket",kq,{omit:["layers","patternFeatures"]});var lU={get paint(){return uU=uU||new _({"line-opacity":new mt(Ee.paint_line["line-opacity"]),"line-color":new mt(Ee.paint_line["line-color"]),"line-translate":new nt(Ee.paint_line["line-translate"]),"line-translate-anchor":new nt(Ee.paint_line["line-translate-anchor"]),"line-width":new mt(Ee.paint_line["line-width"]),"line-gap-width":new mt(Ee.paint_line["line-gap-width"]),"line-offset":new mt(Ee.paint_line["line-offset"]),"line-blur":new mt(Ee.paint_line["line-blur"]),"line-dasharray":new fd(Ee.paint_line["line-dasharray"]),"line-pattern":new hd(Ee.paint_line["line-pattern"]),"line-gradient":new ry(Ee.paint_line["line-gradient"])})},get layout(){return sU=sU||new _({"line-cap":new nt(Ee.layout_line["line-cap"]),"line-join":new mt(Ee.layout_line["line-join"]),"line-miter-limit":new nt(Ee.layout_line["line-miter-limit"]),"line-round-limit":new nt(Ee.layout_line["line-round-limit"]),"line-sort-key":new mt(Ee.layout_line["line-sort-key"])})}};class NCe extends mt{possiblyEvaluate(s,l){return l=new Rr(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(s,l)}evaluate(s,l,f,v){return l=Ie({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(s,l,f,v)}}let pw;class FCe extends c{constructor(s){super(s,lU),this.gradientVersion=0,pw||(pw=new NCe(lU.paint.properties["line-width"].specification),pw.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){let l=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof oc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,l){super.recalculate(s,l),this.paint._values["line-floorwidth"]=pw.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new kq(s)}queryRadius(s){let l=s,f=cU(ay("line-width",this,l),ay("line-gap-width",this,l)),v=ay("line-offset",this,l);return f/2+Math.abs(v)+sw(this.paint.get("line-translate"))}queryIntersectsFeature(s,l,f,v,x,w,S){let C=uw(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,S),O=S/2*cU(this.paint.get("line-width").evaluate(l,f),this.paint.get("line-gap-width").evaluate(l,f)),R=this.paint.get("line-offset").evaluate(l,f);return R&&(v=function(k,z){let U=[];for(let Z=0;Z<k.length;Z++){let X=k[Z],ne=[];for(let ue=0;ue<X.length;ue++){let xe=X[ue-1],pe=X[ue],ye=X[ue+1],Se=ue===0?new b(0,0):pe.sub(xe)._unit()._perp(),Re=ue===X.length-1?new b(0,0):ye.sub(pe)._unit()._perp(),Xe=Se._add(Re)._unit(),pt=Xe.x*Re.x+Xe.y*Re.y;pt!==0&&Xe._mult(1/pt),ne.push(Xe._mult(z)._add(pe))}U.push(ne)}return U}(v,R*S)),function(k,z,U){for(let Z=0;Z<z.length;Z++){let X=z[Z];if(k.length>=3){for(let ne=0;ne<X.length;ne++)if(_d(k,X[ne]))return!0}if(ZIe(k,X,U))return!0}return!1}(C,v,O)}isTileClipped(){return!0}}function cU(u,s){return s>0?s+2*u:u}let zCe=I([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),jCe=I([{name:"a_projected_pos",components:3,type:"Float32"}],4);I([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let BCe=I([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);I([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let hU=I([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),UCe=I([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function VCe(u,s,l){return u.sections.forEach(f=>{f.text=function(v,x,w){let S=x.layout.get("text-transform").evaluate(w,{});return S==="uppercase"?v=v.toLocaleUpperCase():S==="lowercase"&&(v=v.toLocaleLowerCase()),_a.applyArabicShaping&&(v=_a.applyArabicShaping(v)),v}(f.text,s,l)}),u}I([{name:"triangle",components:3,type:"Uint16"}]),I([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),I([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),I([{type:"Float32",name:"offsetX"}]),I([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),I([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let py={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var On=24,fU=xr,pU=function(u,s,l,f,v){var x,w,S=8*v-f-1,C=(1<<S)-1,O=C>>1,R=-7,k=l?v-1:0,z=l?-1:1,U=u[s+k];for(k+=z,x=U&(1<<-R)-1,U>>=-R,R+=S;R>0;x=256*x+u[s+k],k+=z,R-=8);for(w=x&(1<<-R)-1,x>>=-R,R+=f;R>0;w=256*w+u[s+k],k+=z,R-=8);if(x===0)x=1-O;else{if(x===C)return w?NaN:1/0*(U?-1:1);w+=Math.pow(2,f),x-=O}return(U?-1:1)*w*Math.pow(2,x-f)},dU=function(u,s,l,f,v,x){var w,S,C,O=8*x-v-1,R=(1<<O)-1,k=R>>1,z=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=f?0:x-1,Z=f?1:-1,X=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(S=isNaN(s)?1:0,w=R):(w=Math.floor(Math.log(s)/Math.LN2),s*(C=Math.pow(2,-w))<1&&(w--,C*=2),(s+=w+k>=1?z/C:z*Math.pow(2,1-k))*C>=2&&(w++,C/=2),w+k>=R?(S=0,w=R):w+k>=1?(S=(s*C-1)*Math.pow(2,v),w+=k):(S=s*Math.pow(2,k-1)*Math.pow(2,v),w=0));v>=8;u[l+U]=255&S,U+=Z,S/=256,v-=8);for(w=w<<v|S,O+=v;O>0;u[l+U]=255&w,U+=Z,w/=256,O-=8);u[l+U-Z]|=128*X};function xr(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}xr.Varint=0,xr.Fixed64=1,xr.Bytes=2,xr.Fixed32=5;var Nq=4294967296,mU=1/Nq,vU=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");function al(u){return u.type===xr.Bytes?u.readVarint()+u.pos:u.pos+1}function Ed(u,s,l){return l?4294967296*s+(u>>>0):4294967296*(s>>>0)+(u>>>0)}function gU(u,s,l){var f=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));l.realloc(f);for(var v=l.pos-1;v>=u;v--)l.buf[v+f]=l.buf[v]}function $Ce(u,s){for(var l=0;l<u.length;l++)s.writeVarint(u[l])}function GCe(u,s){for(var l=0;l<u.length;l++)s.writeSVarint(u[l])}function WCe(u,s){for(var l=0;l<u.length;l++)s.writeFloat(u[l])}function ZCe(u,s){for(var l=0;l<u.length;l++)s.writeDouble(u[l])}function HCe(u,s){for(var l=0;l<u.length;l++)s.writeBoolean(u[l])}function KCe(u,s){for(var l=0;l<u.length;l++)s.writeFixed32(u[l])}function XCe(u,s){for(var l=0;l<u.length;l++)s.writeSFixed32(u[l])}function YCe(u,s){for(var l=0;l<u.length;l++)s.writeFixed64(u[l])}function JCe(u,s){for(var l=0;l<u.length;l++)s.writeSFixed64(u[l])}function dw(u,s){return(u[s]|u[s+1]<<8|u[s+2]<<16)+16777216*u[s+3]}function Sd(u,s,l){u[l]=s,u[l+1]=s>>>8,u[l+2]=s>>>16,u[l+3]=s>>>24}function yU(u,s){return(u[s]|u[s+1]<<8|u[s+2]<<16)+(u[s+3]<<24)}xr.prototype={destroy:function(){this.buf=null},readFields:function(u,s,l){for(l=l||this.length;this.pos<l;){var f=this.readVarint(),v=f>>3,x=this.pos;this.type=7&f,u(v,s,this),this.pos===x&&this.skip(f)}return s},readMessage:function(u,s){return this.readFields(u,s,this.readVarint()+this.pos)},readFixed32:function(){var u=dw(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=yU(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=dw(this.buf,this.pos)+dw(this.buf,this.pos+4)*Nq;return this.pos+=8,u},readSFixed64:function(){var u=dw(this.buf,this.pos)+yU(this.buf,this.pos+4)*Nq;return this.pos+=8,u},readFloat:function(){var u=pU(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=pU(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var s,l,f=this.buf;return s=127&(l=f[this.pos++]),l<128?s:(s|=(127&(l=f[this.pos++]))<<7,l<128?s:(s|=(127&(l=f[this.pos++]))<<14,l<128?s:(s|=(127&(l=f[this.pos++]))<<21,l<128?s:function(v,x,w){var S,C,O=w.buf;if(S=(112&(C=O[w.pos++]))>>4,C<128||(S|=(127&(C=O[w.pos++]))<<3,C<128)||(S|=(127&(C=O[w.pos++]))<<10,C<128)||(S|=(127&(C=O[w.pos++]))<<17,C<128)||(S|=(127&(C=O[w.pos++]))<<24,C<128)||(S|=(1&(C=O[w.pos++]))<<31,C<128))return Ed(v,S,x);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(l=f[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,s=this.pos;return this.pos=u,u-s>=12&&vU?function(l,f,v){return vU.decode(l.subarray(f,v))}(this.buf,s,u):function(l,f,v){for(var x="",w=f;w<v;){var S,C,O,R=l[w],k=null,z=R>239?4:R>223?3:R>191?2:1;if(w+z>v)break;z===1?R<128&&(k=R):z===2?(192&(S=l[w+1]))==128&&(k=(31&R)<<6|63&S)<=127&&(k=null):z===3?(C=l[w+2],(192&(S=l[w+1]))==128&&(192&C)==128&&((k=(15&R)<<12|(63&S)<<6|63&C)<=2047||k>=55296&&k<=57343)&&(k=null)):z===4&&(C=l[w+2],O=l[w+3],(192&(S=l[w+1]))==128&&(192&C)==128&&(192&O)==128&&((k=(15&R)<<18|(63&S)<<12|(63&C)<<6|63&O)<=65535||k>=1114112)&&(k=null)),k===null?(k=65533,z=1):k>65535&&(k-=65536,x+=String.fromCharCode(k>>>10&1023|55296),k=56320|1023&k),x+=String.fromCharCode(k),w+=z}return x}(this.buf,s,u)},readBytes:function(){var u=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,u);return this.pos=u,s},readPackedVarint:function(u,s){if(this.type!==xr.Bytes)return u.push(this.readVarint(s));var l=al(this);for(u=u||[];this.pos<l;)u.push(this.readVarint(s));return u},readPackedSVarint:function(u){if(this.type!==xr.Bytes)return u.push(this.readSVarint());var s=al(this);for(u=u||[];this.pos<s;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==xr.Bytes)return u.push(this.readBoolean());var s=al(this);for(u=u||[];this.pos<s;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==xr.Bytes)return u.push(this.readFloat());var s=al(this);for(u=u||[];this.pos<s;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==xr.Bytes)return u.push(this.readDouble());var s=al(this);for(u=u||[];this.pos<s;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==xr.Bytes)return u.push(this.readFixed32());var s=al(this);for(u=u||[];this.pos<s;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==xr.Bytes)return u.push(this.readSFixed32());var s=al(this);for(u=u||[];this.pos<s;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==xr.Bytes)return u.push(this.readFixed64());var s=al(this);for(u=u||[];this.pos<s;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==xr.Bytes)return u.push(this.readSFixed64());var s=al(this);for(u=u||[];this.pos<s;)u.push(this.readSFixed64());return u},skip:function(u){var s=7&u;if(s===xr.Varint)for(;this.buf[this.pos++]>127;);else if(s===xr.Bytes)this.pos=this.readVarint()+this.pos;else if(s===xr.Fixed32)this.pos+=4;else{if(s!==xr.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(u,s){this.writeVarint(u<<3|s)},realloc:function(u){for(var s=this.length||16;s<this.pos+u;)s*=2;if(s!==this.length){var l=new Uint8Array(s);l.set(this.buf),this.buf=l,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),Sd(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),Sd(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),Sd(this.buf,-1&u,this.pos),Sd(this.buf,Math.floor(u*mU),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),Sd(this.buf,-1&u,this.pos),Sd(this.buf,Math.floor(u*mU),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(s,l){var f,v;if(s>=0?(f=s%4294967296|0,v=s/4294967296|0):(v=~(-s/4294967296),4294967295^(f=~(-s%4294967296))?f=f+1|0:(f=0,v=v+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(x,w,S){S.buf[S.pos++]=127&x|128,x>>>=7,S.buf[S.pos++]=127&x|128,x>>>=7,S.buf[S.pos++]=127&x|128,x>>>=7,S.buf[S.pos++]=127&x|128,S.buf[S.pos]=127&(x>>>=7)}(f,0,l),function(x,w){var S=(7&x)<<4;w.buf[w.pos++]|=S|((x>>>=3)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x)))))}(v,l)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var s=this.pos;this.pos=function(f,v,x){for(var w,S,C=0;C<v.length;C++){if((w=v.charCodeAt(C))>55295&&w<57344){if(!S){w>56319||C+1===v.length?(f[x++]=239,f[x++]=191,f[x++]=189):S=w;continue}if(w<56320){f[x++]=239,f[x++]=191,f[x++]=189,S=w;continue}w=S-55296<<10|w-56320|65536,S=null}else S&&(f[x++]=239,f[x++]=191,f[x++]=189,S=null);w<128?f[x++]=w:(w<2048?f[x++]=w>>6|192:(w<65536?f[x++]=w>>12|224:(f[x++]=w>>18|240,f[x++]=w>>12&63|128),f[x++]=w>>6&63|128),f[x++]=63&w|128)}return x}(this.buf,u,this.pos);var l=this.pos-s;l>=128&&gU(s,l,this),this.pos=s-1,this.writeVarint(l),this.pos+=l},writeFloat:function(u){this.realloc(4),dU(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),dU(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var s=u.length;this.writeVarint(s),this.realloc(s);for(var l=0;l<s;l++)this.buf[this.pos++]=u[l]},writeRawMessage:function(u,s){this.pos++;var l=this.pos;u(s,this);var f=this.pos-l;f>=128&&gU(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f},writeMessage:function(u,s,l){this.writeTag(u,xr.Bytes),this.writeRawMessage(s,l)},writePackedVarint:function(u,s){s.length&&this.writeMessage(u,$Ce,s)},writePackedSVarint:function(u,s){s.length&&this.writeMessage(u,GCe,s)},writePackedBoolean:function(u,s){s.length&&this.writeMessage(u,HCe,s)},writePackedFloat:function(u,s){s.length&&this.writeMessage(u,WCe,s)},writePackedDouble:function(u,s){s.length&&this.writeMessage(u,ZCe,s)},writePackedFixed32:function(u,s){s.length&&this.writeMessage(u,KCe,s)},writePackedSFixed32:function(u,s){s.length&&this.writeMessage(u,XCe,s)},writePackedFixed64:function(u,s){s.length&&this.writeMessage(u,YCe,s)},writePackedSFixed64:function(u,s){s.length&&this.writeMessage(u,JCe,s)},writeBytesField:function(u,s){this.writeTag(u,xr.Bytes),this.writeBytes(s)},writeFixed32Field:function(u,s){this.writeTag(u,xr.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(u,s){this.writeTag(u,xr.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(u,s){this.writeTag(u,xr.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(u,s){this.writeTag(u,xr.Fixed64),this.writeSFixed64(s)},writeVarintField:function(u,s){this.writeTag(u,xr.Varint),this.writeVarint(s)},writeSVarintField:function(u,s){this.writeTag(u,xr.Varint),this.writeSVarint(s)},writeStringField:function(u,s){this.writeTag(u,xr.Bytes),this.writeString(s)},writeFloatField:function(u,s){this.writeTag(u,xr.Fixed32),this.writeFloat(s)},writeDoubleField:function(u,s){this.writeTag(u,xr.Fixed64),this.writeDouble(s)},writeBooleanField:function(u,s){this.writeVarintField(u,!!s)}};var Fq=h(fU);let zq=3;function QCe(u,s,l){u===1&&l.readMessage(eAe,s)}function eAe(u,s,l){if(u===3){let{id:f,bitmap:v,width:x,height:w,left:S,top:C,advance:O}=l.readMessage(tAe,{});s.push({id:f,bitmap:new sy({width:x+2*zq,height:w+2*zq},v),metrics:{width:x,height:w,left:S,top:C,advance:O}})}}function tAe(u,s,l){u===1?s.id=l.readVarint():u===2?s.bitmap=l.readBytes():u===3?s.width=l.readVarint():u===4?s.height=l.readVarint():u===5?s.left=l.readSVarint():u===6?s.top=l.readSVarint():u===7&&(s.advance=l.readVarint())}let _U=zq;function xU(u){let s=0,l=0;for(let w of u)s+=w.w*w.h,l=Math.max(l,w.w);u.sort((w,S)=>S.h-w.h);let f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),l),h:1/0}],v=0,x=0;for(let w of u)for(let S=f.length-1;S>=0;S--){let C=f[S];if(!(w.w>C.w||w.h>C.h)){if(w.x=C.x,w.y=C.y,x=Math.max(x,w.y+w.h),v=Math.max(v,w.x+w.w),w.w===C.w&&w.h===C.h){let O=f.pop();S<f.length&&(f[S]=O)}else w.h===C.h?(C.x+=w.w,C.w-=w.w):w.w===C.w?(C.y+=w.h,C.h-=w.h):(f.push({x:C.x+w.w,y:C.y,w:C.w-w.w,h:w.h}),C.y+=w.h,C.h-=w.h);break}}return{w:v,h:x,fill:s/(v*x)||0}}let wa=1;class jq{constructor(s,{pixelRatio:l,version:f,stretchX:v,stretchY:x,content:w,textFitWidth:S,textFitHeight:C}){this.paddedRect=s,this.pixelRatio=l,this.stretchX=v,this.stretchY=x,this.content=w,this.version=f,this.textFitWidth=S,this.textFitHeight=C}get tl(){return[this.paddedRect.x+wa,this.paddedRect.y+wa]}get br(){return[this.paddedRect.x+this.paddedRect.w-wa,this.paddedRect.y+this.paddedRect.h-wa]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*wa)/this.pixelRatio,(this.paddedRect.h-2*wa)/this.pixelRatio]}}class wU{constructor(s,l){let f={},v={};this.haveRenderCallbacks=[];let x=[];this.addImages(s,f,x),this.addImages(l,v,x);let{w,h:S}=xU(x),C=new Eo({width:w||1,height:S||1});for(let O in s){let R=s[O],k=f[O].paddedRect;Eo.copy(R.data,C,{x:0,y:0},{x:k.x+wa,y:k.y+wa},R.data)}for(let O in l){let R=l[O],k=v[O].paddedRect,z=k.x+wa,U=k.y+wa,Z=R.data.width,X=R.data.height;Eo.copy(R.data,C,{x:0,y:0},{x:z,y:U},R.data),Eo.copy(R.data,C,{x:0,y:X-1},{x:z,y:U-1},{width:Z,height:1}),Eo.copy(R.data,C,{x:0,y:0},{x:z,y:U+X},{width:Z,height:1}),Eo.copy(R.data,C,{x:Z-1,y:0},{x:z-1,y:U},{width:1,height:X}),Eo.copy(R.data,C,{x:0,y:0},{x:z+Z,y:U},{width:1,height:X})}this.image=C,this.iconPositions=f,this.patternPositions=v}addImages(s,l,f){for(let v in s){let x=s[v],w={x:0,y:0,w:x.data.width+2*wa,h:x.data.height+2*wa};f.push(w),l[v]=new jq(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(s,l){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let f in s.updatedImages)this.patchUpdatedImage(this.iconPositions[f],s.getImage(f),l),this.patchUpdatedImage(this.patternPositions[f],s.getImage(f),l)}patchUpdatedImage(s,l,f){if(!s||!l||s.version===l.version)return;s.version=l.version;let[v,x]=s.tl;f.update(l.data,void 0,{x:v,y:x})}}var Oc;tt("ImagePosition",jq),tt("ImageAtlas",wU),i.ah=void 0,(Oc=i.ah||(i.ah={}))[Oc.none=0]="none",Oc[Oc.horizontal=1]="horizontal",Oc[Oc.vertical=2]="vertical",Oc[Oc.horizontalOnly=3]="horizontalOnly";let dy=-17;class my{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,l){let f=new my;return f.scale=s||1,f.fontStack=l,f}static forImage(s){let l=new my;return l.imageName=s,l}}class Td{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,l){let f=new Td;for(let v=0;v<s.sections.length;v++){let x=s.sections[v];x.image?f.addImageSection(x):f.addTextSection(x,l)}return f}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let l="";for(let f=0;f<s.length;f++){let v=s.charCodeAt(f+1)||null,x=s.charCodeAt(f-1)||null;l+=v&&ew(v)&&!py[s[f+1]]||x&&ew(x)&&!py[s[f-1]]||!py[s[f]]?s[f]:py[s[f]]}return l}(this.text)}trim(){let s=0;for(let f=0;f<this.text.length&&vw[this.text.charCodeAt(f)];f++)s++;let l=this.text.length;for(let f=this.text.length-1;f>=0&&f>=s&&vw[this.text.charCodeAt(f)];f--)l--;this.text=this.text.substring(s,l),this.sectionIndex=this.sectionIndex.slice(s,l)}substring(s,l){let f=new Td;return f.text=this.text.substring(s,l),f.sectionIndex=this.sectionIndex.slice(s,l),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,l)=>Math.max(s,this.sections[l].scale),0)}addTextSection(s,l){this.text+=s.text,this.sections.push(my.forText(s.scale,s.fontStack||l));let f=this.sections.length-1;for(let v=0;v<s.text.length;++v)this.sectionIndex.push(f)}addImageSection(s){let l=s.image?s.image.name:"";if(l.length===0)return void Rt("Can't add FormattedSection with an empty image.");let f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(my.forImage(l)),this.sectionIndex.push(this.sections.length-1)):Rt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function mw(u,s,l,f,v,x,w,S,C,O,R,k,z,U,Z){let X=Td.fromFeature(u,v),ne;k===i.ah.vertical&&X.verticalizePunctuation();let{processBidirectionalText:ue,processStyledBidirectionalText:xe}=_a;if(ue&&X.sections.length===1){ne=[];let Se=ue(X.toString(),Bq(X,O,x,s,f,U));for(let Re of Se){let Xe=new Td;Xe.text=Re,Xe.sections=X.sections;for(let pt=0;pt<Re.length;pt++)Xe.sectionIndex.push(0);ne.push(Xe)}}else if(xe){ne=[];let Se=xe(X.text,X.sectionIndex,Bq(X,O,x,s,f,U));for(let Re of Se){let Xe=new Td;Xe.text=Re[0],Xe.sectionIndex=Re[1],Xe.sections=X.sections,ne.push(Xe)}}else ne=function(Se,Re){let Xe=[],pt=Se.text,He=0;for(let Ge of Re)Xe.push(Se.substring(He,Ge)),He=Ge;return He<pt.length&&Xe.push(Se.substring(He,pt.length)),Xe}(X,Bq(X,O,x,s,f,U));let pe=[],ye={positionedLines:pe,text:X.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:k,iconsInText:!1,verticalizable:!1};return function(Se,Re,Xe,pt,He,Ge,st,rt,et,Ce,ut,at){let wt=0,Tr=dy,wr=0,Fn=0,$o=rt==="right"?1:rt==="left"?0:.5,hi=0;for(let un of He){un.trim();let jn=un.getMaxScale(),Ti=(jn-1)*On,fi={positionedGlyphs:[],lineOffset:0};Se.positionedLines[hi]=fi;let Hi=fi.positionedGlyphs,pi=0;if(!un.length()){Tr+=Ge,++hi;continue}for(let ba=0;ba<un.length();ba++){let nr=un.getSection(ba),qr=un.getSectionIndex(ba),Nr=un.getCharCode(ba),Ua=0,Yr=null,qd=null,iu=null,au=On,Go=!(et===i.ah.horizontal||!ut&&!ey(Nr)||ut&&(vw[Nr]||(zn=Nr,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(zn)))));if(nr.imageName){let Io=pt[nr.imageName];if(!Io)continue;iu=nr.imageName,Se.iconsInText=Se.iconsInText||!0,qd=Io.paddedRect;let Xn=Io.displaySize;nr.scale=nr.scale*On/at,Yr={width:Xn[0],height:Xn[1],left:wa,top:-_U,advance:Go?Xn[1]:Xn[0]},Ua=Ti+(On-Xn[1]*nr.scale),au=Yr.advance;let ol=Go?Xn[0]*nr.scale-On*jn:Xn[1]*nr.scale-On*jn;ol>0&&ol>pi&&(pi=ol)}else{let Io=Xe[nr.fontStack],Xn=Io&&Io[Nr];if(Xn&&Xn.rect)qd=Xn.rect,Yr=Xn.metrics;else{let ol=Re[nr.fontStack],wy=ol&&ol[Nr];if(!wy)continue;Yr=wy.metrics}Ua=(jn-nr.scale)*On}Go?(Se.verticalizable=!0,Hi.push({glyph:Nr,imageName:iu,x:wt,y:Tr+Ua,vertical:Go,scale:nr.scale,fontStack:nr.fontStack,sectionIndex:qr,metrics:Yr,rect:qd}),wt+=au*nr.scale+Ce):(Hi.push({glyph:Nr,imageName:iu,x:wt,y:Tr+Ua,vertical:Go,scale:nr.scale,fontStack:nr.fontStack,sectionIndex:qr,metrics:Yr,rect:qd}),wt+=Yr.advance*nr.scale+Ce)}Hi.length!==0&&(wr=Math.max(wt-Ce,wr),aAe(Hi,0,Hi.length-1,$o,pi)),wt=0;let To=Ge*jn+pi;fi.lineOffset=Math.max(pi,Ti),Tr+=To,Fn=Math.max(To,Fn),++hi}var zn;let Gi=Tr-dy,{horizontalAlign:Wi,verticalAlign:Zi}=Uq(st);(function(un,jn,Ti,fi,Hi,pi,To,ba,nr){let qr=(jn-Ti)*Hi,Nr=0;Nr=pi!==To?-ba*fi-dy:(-fi*nr+.5)*To;for(let Ua of un)for(let Yr of Ua.positionedGlyphs)Yr.x+=qr,Yr.y+=Nr})(Se.positionedLines,$o,Wi,Zi,wr,Fn,Ge,Gi,He.length),Se.top+=-Zi*Gi,Se.bottom=Se.top+Gi,Se.left+=-Wi*wr,Se.right=Se.left+wr}(ye,s,l,f,ne,w,S,C,k,O,z,Z),!function(Se){for(let Re of Se)if(Re.positionedGlyphs.length!==0)return!1;return!0}(pe)&&ye}let vw={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},rAe={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},nAe={40:!0};function bU(u,s,l,f,v,x){if(s.imageName){let w=f[s.imageName];return w?w.displaySize[0]*s.scale*On/x+v:0}{let w=l[s.fontStack],S=w&&w[u];return S?S.metrics.advance*s.scale+v:0}}function EU(u,s,l,f){let v=Math.pow(u-s,2);return f?u<s?v/2:2*v:v+Math.abs(l)*l}function iAe(u,s,l){let f=0;return u===10&&(f-=1e4),l&&(f+=150),u!==40&&u!==65288||(f+=50),s!==41&&s!==65289||(f+=50),f}function SU(u,s,l,f,v,x){let w=null,S=EU(s,l,v,x);for(let C of f){let O=EU(s-C.x,l,v,x)+C.badness;O<=S&&(w=C,S=O)}return{index:u,x:s,priorBreak:w,badness:S}}function TU(u){return u?TU(u.priorBreak).concat(u.index):[]}function Bq(u,s,l,f,v,x){if(!u)return[];let w=[],S=function(k,z,U,Z,X,ne){let ue=0;for(let xe=0;xe<k.length();xe++){let pe=k.getSection(xe);ue+=bU(k.getCharCode(xe),pe,Z,X,z,ne)}return ue/Math.max(1,Math.ceil(ue/U))}(u,s,l,f,v,x),C=u.text.indexOf("\u200B")>=0,O=0;for(let k=0;k<u.length();k++){let z=u.getSection(k),U=u.getCharCode(k);if(vw[U]||(O+=bU(U,z,f,v,s,x)),k<u.length()-1){let Z=!((R=U)<11904)&&(!!Gt["CJK Compatibility Forms"](R)||!!Gt["CJK Compatibility"](R)||!!Gt["CJK Strokes"](R)||!!Gt["CJK Symbols and Punctuation"](R)||!!Gt["Enclosed CJK Letters and Months"](R)||!!Gt["Halfwidth and Fullwidth Forms"](R)||!!Gt["Ideographic Description Characters"](R)||!!Gt["Vertical Forms"](R)||Q1.test(String.fromCodePoint(R)));(rAe[U]||Z||z.imageName||k!==u.length()-2&&nAe[u.getCharCode(k+1)])&&w.push(SU(k+1,O,S,w,iAe(U,u.getCharCode(k+1),Z&&C),!1))}}var R;return TU(SU(u.length(),O,S,w,0,!0))}function Uq(u){let s=.5,l=.5;switch(u){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0;}switch(u){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0;}return{horizontalAlign:s,verticalAlign:l}}function aAe(u,s,l,f,v){if(!f&&!v)return;let x=u[l],w=(u[l].x+x.metrics.advance*x.scale)*f;for(let S=s;S<=l;S++)u[S].x-=w,u[S].y+=v}function oAe(u,s,l){let{horizontalAlign:f,verticalAlign:v}=Uq(l),x=s[0]-u.displaySize[0]*f,w=s[1]-u.displaySize[1]*v;return{image:u,top:w,bottom:w+u.displaySize[1],left:x,right:x+u.displaySize[0]}}function IU(u){var s,l;let f=u.left,v=u.top,x=u.right-f,w=u.bottom-v,S=(s=u.image.textFitWidth)!==null&&s!==void 0?s:"stretchOrShrink",C=(l=u.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",O=(u.image.content[2]-u.image.content[0])/(u.image.content[3]-u.image.content[1]);if(C==="proportional"){if(S==="stretchOnly"&&x/w<O||S==="proportional"){let R=Math.ceil(w*O);f*=R/x,x=R}}else if(S==="proportional"&&C==="stretchOnly"&&O!==0&&x/w>O){let R=Math.ceil(x/O);v*=R/w,w=R}return{x1:f,y1:v,x2:f+x,y2:v+w}}function CU(u,s,l,f,v,x){let w=u.image,S;if(w.content){let ne=w.content,ue=w.pixelRatio||1;S=[ne[0]/ue,ne[1]/ue,w.displaySize[0]-ne[2]/ue,w.displaySize[1]-ne[3]/ue]}let C=s.left*x,O=s.right*x,R,k,z,U;l==="width"||l==="both"?(U=v[0]+C-f[3],k=v[0]+O+f[1]):(U=v[0]+(C+O-w.displaySize[0])/2,k=U+w.displaySize[0]);let Z=s.top*x,X=s.bottom*x;return l==="height"||l==="both"?(R=v[1]+Z-f[0],z=v[1]+X+f[2]):(R=v[1]+(Z+X-w.displaySize[1])/2,z=R+w.displaySize[1]),{image:w,top:R,right:k,bottom:z,left:U,collisionPadding:S}}let vy=255,nu=128,Rc=vy*nu;function AU(u,s){let{expression:l}=s;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Rr(u+1))};if(l.kind==="source")return{kind:"source"};{let{zoomStops:f,interpolationType:v}=l,x=0;for(;x<f.length&&f[x]<=u;)x++;x=Math.max(0,x-1);let w=x;for(;w<f.length&&f[w]<u+1;)w++;w=Math.min(f.length-1,w);let S=f[x],C=f[w];return l.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:C,interpolationType:v}:{kind:"camera",minZoom:S,maxZoom:C,minSize:l.evaluate(new Rr(S)),maxSize:l.evaluate(new Rr(C)),interpolationType:v}}}function Vq(u,s,l){let f="never",v=u.get(s);return v?f=v:u.get(l)&&(f="always"),f}let sAe=Mc.VectorTileFeature.types,uAe=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function gw(u,s,l,f,v,x,w,S,C,O,R,k,z){let U=S?Math.min(Rc,Math.round(S[0])):0,Z=S?Math.min(Rc,Math.round(S[1])):0;u.emplaceBack(s,l,Math.round(32*f),Math.round(32*v),x,w,(U<<1)+(C?1:0),Z,16*O,16*R,256*k,256*z)}function $q(u,s,l){u.emplaceBack(s.x,s.y,l),u.emplaceBack(s.x,s.y,l),u.emplaceBack(s.x,s.y,l),u.emplaceBack(s.x,s.y,l)}function lAe(u){for(let s of u.sections)if(yq(s.text))return!0;return!1}class Gq{constructor(s){this.layoutVertexArray=new dd,this.indexArray=new bo,this.programConfigurations=s,this.segments=new Wt,this.dynamicLayoutVertexArray=new ny,this.opacityVertexArray=new ja,this.hasVisibleVertices=!1,this.placedSymbolArray=new Dr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,l,f,v){this.isEmpty()||(f&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,zCe.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,jCe.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,uAe,!0),this.opacityVertexBuffer.itemSize=1),(f||v)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}tt("SymbolBuffers",Gq);class Wq{constructor(s,l,f){this.layoutVertexArray=new s,this.layoutAttributes=l,this.indexArray=new f,this.segments=new Wt,this.collisionVertexArray=new tu}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,BCe.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}tt("CollisionBuffers",Wq);class Id{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(w=>w.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Tq([]),this.placementViewportMatrix=Tq([]);let l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=AU(this.zoom,l["text-size"]),this.iconSizeData=AU(this.zoom,l["icon-size"]);let f=this.layers[0].layout,v=f.get("symbol-sort-key"),x=f.get("symbol-z-order");this.canOverlap=Vq(f,"text-overlap","text-allow-overlap")!=="never"||Vq(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(w=>i.ah[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=s.sourceID}createArrays(){this.text=new Gq(new gf(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new Gq(new gf(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new Lr,this.lineVertexArray=new si,this.symbolInstances=new Bt,this.textAnchorOffsets=new kr}calculateGlyphDependencies(s,l,f,v,x){for(let w=0;w<s.length;w++)if(l[s.charCodeAt(w)]=!0,(f||v)&&x){let S=py[s.charAt(w)];S&&(l[S.charCodeAt(0)]=!0)}}populate(s,l,f){let v=this.layers[0],x=v.layout,w=x.get("text-font"),S=x.get("text-field"),C=x.get("icon-image"),O=(S.value.kind!=="constant"||S.value.value instanceof ma&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),R=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,k=x.get("symbol-sort-key");if(this.features=[],!O&&!R)return;let z=l.iconDependencies,U=l.glyphDependencies,Z=l.availableImages,X=new Rr(this.zoom);for(let{feature:ne,id:ue,index:xe,sourceLayerIndex:pe}of s){let ye=v._featureFilter.needGeometry,Se=_f(ne,ye);if(!v._featureFilter.filter(X,Se,f))continue;let Re,Xe;if(ye||(Se.geometry=yf(ne)),O){let He=v.getValueAndResolveTokens("text-field",Se,f,Z),Ge=ma.factory(He),st=this.hasRTLText=this.hasRTLText||lAe(Ge);(!st||_a.getRTLTextPluginStatus()==="unavailable"||st&&_a.isParsed())&&(Re=VCe(Ge,v,Se))}if(R){let He=v.getValueAndResolveTokens("icon-image",Se,f,Z);Xe=He instanceof ga?He:ga.fromString(He)}if(!Re&&!Xe)continue;let pt=this.sortFeaturesByKey?k.evaluate(Se,{},f):void 0;if(this.features.push({id:ue,text:Re,icon:Xe,index:xe,sourceLayerIndex:pe,geometry:Se.geometry,properties:ne.properties,type:sAe[ne.type],sortKey:pt}),Xe&&(z[Xe.name]=!0),Re){let He=w.evaluate(Se,{},f).join(","),Ge=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(i.ah.vertical)>=0;for(let st of Re.sections)if(st.image)z[st.image.name]=!0;else{let rt=Jg(Re.toString()),et=st.fontStack||He,Ce=U[et]=U[et]||{};this.calculateGlyphDependencies(st.text,Ce,Ge,this.allowVerticalPlacement,rt)}}}x.get("symbol-placement")==="line"&&(this.features=function(ne){let ue={},xe={},pe=[],ye=0;function Se(He){pe.push(ne[He]),ye++}function Re(He,Ge,st){let rt=xe[He];return delete xe[He],xe[Ge]=rt,pe[rt].geometry[0].pop(),pe[rt].geometry[0]=pe[rt].geometry[0].concat(st[0]),rt}function Xe(He,Ge,st){let rt=ue[Ge];return delete ue[Ge],ue[He]=rt,pe[rt].geometry[0].shift(),pe[rt].geometry[0]=st[0].concat(pe[rt].geometry[0]),rt}function pt(He,Ge,st){let rt=st?Ge[0][Ge[0].length-1]:Ge[0][0];return`${He}:${rt.x}:${rt.y}`}for(let He=0;He<ne.length;He++){let Ge=ne[He],st=Ge.geometry,rt=Ge.text?Ge.text.toString():null;if(!rt){Se(He);continue}let et=pt(rt,st),Ce=pt(rt,st,!0);if(et in xe&&Ce in ue&&xe[et]!==ue[Ce]){let ut=Xe(et,Ce,st),at=Re(et,Ce,pe[ut].geometry);delete ue[et],delete xe[Ce],xe[pt(rt,pe[at].geometry,!0)]=at,pe[ut].geometry=null}else et in xe?Re(et,Ce,st):Ce in ue?Xe(et,Ce,st):(Se(He),ue[et]=ye-1,xe[Ce]=ye-1)}return pe.filter(He=>He.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ne,ue)=>ne.sortKey-ue.sortKey)}update(s,l,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,l,this.layers,f),this.icon.programConfigurations.updatePaintArrays(s,l,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,l){let f=this.lineVertexArray.length;if(s.segment!==void 0){let v=s.dist(l[s.segment+1]),x=s.dist(l[s.segment]),w={};for(let S=s.segment+1;S<l.length;S++)w[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:v},S<l.length-1&&(v+=l[S+1].dist(l[S]));for(let S=s.segment||0;S>=0;S--)w[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:x},S>0&&(x+=l[S-1].dist(l[S]));for(let S=0;S<l.length;S++){let C=w[S];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(s,l,f,v,x,w,S,C,O,R,k,z){let U=s.indexArray,Z=s.layoutVertexArray,X=s.segments.prepareSegment(4*l.length,Z,U,this.canOverlap?w.sortKey:void 0),ne=this.glyphOffsetArray.length,ue=X.vertexLength,xe=this.allowVerticalPlacement&&S===i.ah.vertical?Math.PI/2:0,pe=w.text&&w.text.sections;for(let ye=0;ye<l.length;ye++){let{tl:Se,tr:Re,bl:Xe,br:pt,tex:He,pixelOffsetTL:Ge,pixelOffsetBR:st,minFontScaleX:rt,minFontScaleY:et,glyphOffset:Ce,isSDF:ut,sectionIndex:at}=l[ye],wt=X.vertexLength,Tr=Ce[1];gw(Z,C.x,C.y,Se.x,Tr+Se.y,He.x,He.y,f,ut,Ge.x,Ge.y,rt,et),gw(Z,C.x,C.y,Re.x,Tr+Re.y,He.x+He.w,He.y,f,ut,st.x,Ge.y,rt,et),gw(Z,C.x,C.y,Xe.x,Tr+Xe.y,He.x,He.y+He.h,f,ut,Ge.x,st.y,rt,et),gw(Z,C.x,C.y,pt.x,Tr+pt.y,He.x+He.w,He.y+He.h,f,ut,st.x,st.y,rt,et),$q(s.dynamicLayoutVertexArray,C,xe),U.emplaceBack(wt,wt+1,wt+2),U.emplaceBack(wt+1,wt+2,wt+3),X.vertexLength+=4,X.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ce[0]),ye!==l.length-1&&at===l[ye+1].sectionIndex||s.programConfigurations.populatePaintArrays(Z.length,w,w.index,{},z,pe&&pe[at])}s.placedSymbolArray.emplaceBack(C.x,C.y,ne,this.glyphOffsetArray.length-ne,ue,O,R,C.segment,f?f[0]:0,f?f[1]:0,v[0],v[1],S,0,!1,0,k)}_addCollisionDebugVertex(s,l,f,v,x,w){return l.emplaceBack(0,0),s.emplaceBack(f.x,f.y,v,x,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(s,l,f,v,x,w,S){let C=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),O=C.vertexLength,R=x.layoutVertexArray,k=x.collisionVertexArray,z=S.anchorX,U=S.anchorY;this._addCollisionDebugVertex(R,k,w,z,U,new b(s,l)),this._addCollisionDebugVertex(R,k,w,z,U,new b(f,l)),this._addCollisionDebugVertex(R,k,w,z,U,new b(f,v)),this._addCollisionDebugVertex(R,k,w,z,U,new b(s,v)),C.vertexLength+=4;let Z=x.indexArray;Z.emplaceBack(O,O+1),Z.emplaceBack(O+1,O+2),Z.emplaceBack(O+2,O+3),Z.emplaceBack(O+3,O),C.primitiveLength+=4}addDebugCollisionBoxes(s,l,f,v){for(let x=s;x<l;x++){let w=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,v?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Wq(Ba,hU.members,Kn),this.iconCollisionBox=new Wq(Ba,hU.members,Kn);for(let s=0;s<this.symbolInstances.length;s++){let l=this.symbolInstances.get(s);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(s,l,f,v,x,w,S,C,O){let R={};for(let k=l;k<f;k++){let z=s.get(k);R.textBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY},R.textFeatureIndex=z.featureIndex;break}for(let k=v;k<x;k++){let z=s.get(k);R.verticalTextBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY},R.verticalTextFeatureIndex=z.featureIndex;break}for(let k=w;k<S;k++){let z=s.get(k);R.iconBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY},R.iconFeatureIndex=z.featureIndex;break}for(let k=C;k<O;k++){let z=s.get(k);R.verticalIconBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY},R.verticalIconFeatureIndex=z.featureIndex;break}return R}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){let f=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,l){let f=s.placedSymbolArray.get(l),v=f.vertexStartIndex+4*f.numGlyphs;for(let x=f.vertexStartIndex;x<v;x+=4)s.indexArray.emplaceBack(x,x+1,x+2),s.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let l=Math.sin(s),f=Math.cos(s),v=[],x=[],w=[];for(let S=0;S<this.symbolInstances.length;++S){w.push(S);let C=this.symbolInstances.get(S);v.push(0|Math.round(l*C.anchorX+f*C.anchorY)),x.push(C.featureIndex)}return w.sort((S,C)=>v[S]-v[C]||x[C]-x[S]),w}addToSortKeyRanges(s,l){let f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===l?f.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let l of this.symbolInstanceIndexes){let f=this.symbolInstances.get(l);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((v,x,w)=>{v>=0&&w.indexOf(v)===x&&this.addIndicesForPlacedSymbol(this.text,v)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let qU,PU;tt("SymbolBucket",Id,{omit:["layers","collisionBoxArray","features","compareText"]}),Id.MAX_GLYPHS=65535,Id.addDynamicAttributes=$q;var Zq={get paint(){return PU=PU||new _({"icon-opacity":new mt(Ee.paint_symbol["icon-opacity"]),"icon-color":new mt(Ee.paint_symbol["icon-color"]),"icon-halo-color":new mt(Ee.paint_symbol["icon-halo-color"]),"icon-halo-width":new mt(Ee.paint_symbol["icon-halo-width"]),"icon-halo-blur":new mt(Ee.paint_symbol["icon-halo-blur"]),"icon-translate":new nt(Ee.paint_symbol["icon-translate"]),"icon-translate-anchor":new nt(Ee.paint_symbol["icon-translate-anchor"]),"text-opacity":new mt(Ee.paint_symbol["text-opacity"]),"text-color":new mt(Ee.paint_symbol["text-color"],{runtimeType:ai,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new mt(Ee.paint_symbol["text-halo-color"]),"text-halo-width":new mt(Ee.paint_symbol["text-halo-width"]),"text-halo-blur":new mt(Ee.paint_symbol["text-halo-blur"]),"text-translate":new nt(Ee.paint_symbol["text-translate"]),"text-translate-anchor":new nt(Ee.paint_symbol["text-translate-anchor"])})},get layout(){return qU=qU||new _({"symbol-placement":new nt(Ee.layout_symbol["symbol-placement"]),"symbol-spacing":new nt(Ee.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new nt(Ee.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new mt(Ee.layout_symbol["symbol-sort-key"]),"symbol-z-order":new nt(Ee.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new nt(Ee.layout_symbol["icon-allow-overlap"]),"icon-overlap":new nt(Ee.layout_symbol["icon-overlap"]),"icon-ignore-placement":new nt(Ee.layout_symbol["icon-ignore-placement"]),"icon-optional":new nt(Ee.layout_symbol["icon-optional"]),"icon-rotation-alignment":new nt(Ee.layout_symbol["icon-rotation-alignment"]),"icon-size":new mt(Ee.layout_symbol["icon-size"]),"icon-text-fit":new nt(Ee.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new nt(Ee.layout_symbol["icon-text-fit-padding"]),"icon-image":new mt(Ee.layout_symbol["icon-image"]),"icon-rotate":new mt(Ee.layout_symbol["icon-rotate"]),"icon-padding":new mt(Ee.layout_symbol["icon-padding"]),"icon-keep-upright":new nt(Ee.layout_symbol["icon-keep-upright"]),"icon-offset":new mt(Ee.layout_symbol["icon-offset"]),"icon-anchor":new mt(Ee.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new nt(Ee.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new nt(Ee.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new nt(Ee.layout_symbol["text-rotation-alignment"]),"text-field":new mt(Ee.layout_symbol["text-field"]),"text-font":new mt(Ee.layout_symbol["text-font"]),"text-size":new mt(Ee.layout_symbol["text-size"]),"text-max-width":new mt(Ee.layout_symbol["text-max-width"]),"text-line-height":new nt(Ee.layout_symbol["text-line-height"]),"text-letter-spacing":new mt(Ee.layout_symbol["text-letter-spacing"]),"text-justify":new mt(Ee.layout_symbol["text-justify"]),"text-radial-offset":new mt(Ee.layout_symbol["text-radial-offset"]),"text-variable-anchor":new nt(Ee.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new mt(Ee.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new mt(Ee.layout_symbol["text-anchor"]),"text-max-angle":new nt(Ee.layout_symbol["text-max-angle"]),"text-writing-mode":new nt(Ee.layout_symbol["text-writing-mode"]),"text-rotate":new mt(Ee.layout_symbol["text-rotate"]),"text-padding":new nt(Ee.layout_symbol["text-padding"]),"text-keep-upright":new nt(Ee.layout_symbol["text-keep-upright"]),"text-transform":new mt(Ee.layout_symbol["text-transform"]),"text-offset":new mt(Ee.layout_symbol["text-offset"]),"text-allow-overlap":new nt(Ee.layout_symbol["text-allow-overlap"]),"text-overlap":new nt(Ee.layout_symbol["text-overlap"]),"text-ignore-placement":new nt(Ee.layout_symbol["text-ignore-placement"]),"text-optional":new nt(Ee.layout_symbol["text-optional"])})}};class MU{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:ji,this.defaultValue=s}evaluate(s){if(s.formattedSection){let l=this.defaultValue.property.overrides;if(l&&l.hasOverride(s.formattedSection))return l.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}tt("FormatSectionOverride",MU,{omit:["defaultValue"]});class yw extends c{constructor(s){super(s,Zq)}recalculate(s,l){if(super.recalculate(s,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let f=this.layout.get("text-writing-mode");if(f){let v=[];for(let x of f)v.indexOf(x)<0&&v.push(x);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,l,f,v){let x=this.layout.get(s).evaluate(l,{},f,v),w=this._unevaluatedLayout._values[s];return w.isDataDriven()||Qp(w.value)||!x?x:function(S,C){return C.replace(/{([^{}]+)}/g,(O,R)=>S&&R in S?String(S[R]):"")}(l.properties,x)}createBucket(s){return new Id(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let s of Zq.paint.overridableProperties){if(!yw.hasPaintOverride(this.layout,s))continue;let l=this.paint.get(s),f=new MU(l),v=new Jp(f,l.property.specification),x=null;x=l.value.kind==="constant"||l.value.kind==="source"?new mc("source",v):new vc("composite",v,l.value.zoomStops),this.paint._values[s]=new Uo(l.property,x,l.parameters)}}_handleOverridablePaintPropertyUpdate(s,l,f){return!(!this.layout||l.isDataDriven()||f.isDataDriven())&&yw.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,l){let f=s.get("text-field"),v=Zq.paint.properties[l],x=!1,w=S=>{for(let C of S)if(v.overrides&&v.overrides.hasOverride(C))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof ma)w(f.value.value.sections);else if(f.value.kind==="source"){let S=O=>{x||(O instanceof vo&&En(O.value)===Is?w(O.value.sections):O instanceof Vp?w(O.sections):O.eachChild(S))},C=f.value;C._styleExpression&&S(C._styleExpression.expression)}return x}}let OU;var cAe={get paint(){return OU=OU||new _({"background-color":new nt(Ee.paint_background["background-color"]),"background-pattern":new fd(Ee.paint_background["background-pattern"]),"background-opacity":new nt(Ee.paint_background["background-opacity"])})}};class hAe extends c{constructor(s){super(s,cAe)}}let RU;var fAe={get paint(){return RU=RU||new _({"raster-opacity":new nt(Ee.paint_raster["raster-opacity"]),"raster-hue-rotate":new nt(Ee.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new nt(Ee.paint_raster["raster-brightness-min"]),"raster-brightness-max":new nt(Ee.paint_raster["raster-brightness-max"]),"raster-saturation":new nt(Ee.paint_raster["raster-saturation"]),"raster-contrast":new nt(Ee.paint_raster["raster-contrast"]),"raster-resampling":new nt(Ee.paint_raster["raster-resampling"]),"raster-fade-duration":new nt(Ee.paint_raster["raster-fade-duration"])})}};class pAe extends c{constructor(s){super(s,fAe)}}class dAe extends c{constructor(s){super(s,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class mAe{constructor(s){this._methodToThrottle=s,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let Hq=6371008.8;class Dc{constructor(s,l){if(isNaN(s)||isNaN(l))throw new Error(`Invalid LngLat object: (${s}, ${l})`);if(this.lng=+s,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Dc(se(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){let l=Math.PI/180,f=this.lat*l,v=s.lat*l,x=Math.sin(f)*Math.sin(v)+Math.cos(f)*Math.cos(v)*Math.cos((s.lng-this.lng)*l);return Hq*Math.acos(Math.min(x,1))}static convert(s){if(s instanceof Dc)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new Dc(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new Dc(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let DU=2*Math.PI*Hq;function LU(u){return DU*Math.cos(u*Math.PI/180)}function kU(u){return(180+u)/360}function NU(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function FU(u,s){return u/LU(s)}function Kq(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}class gy{constructor(s,l,f=0){this.x=+s,this.y=+l,this.z=+f}static fromLngLat(s,l=0){let f=Dc.convert(s);return new gy(kU(f.lng),NU(f.lat),FU(l,f.lat))}toLngLat(){return new Dc(360*this.x-180,Kq(this.y))}toAltitude(){return this.z*LU(Kq(this.y))}meterInMercatorCoordinateUnits(){return 1/DU*(s=Kq(this.y),1/Math.cos(s*Math.PI/180));var s}}function zU(u,s,l){var f=2*Math.PI*6378137/256/Math.pow(2,l);return[u*f-2*Math.PI*6378137/2,s*f-2*Math.PI*6378137/2]}class Xq{constructor(s,l,f){if(!function(v,x,w){return!(v<0||v>25||w<0||w>=Math.pow(2,v)||x<0||x>=Math.pow(2,v))}(s,l,f))throw new Error(`x=${l}, y=${f}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=l,this.y=f,this.key=yy(0,s,s,l,f)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,l,f){let v=(w=this.y,S=this.z,C=zU(256*(x=this.x),256*(w=Math.pow(2,S)-w-1),S),O=zU(256*(x+1),256*(w+1),S),C[0]+","+C[1]+","+O[0]+","+O[1]);var x,w,S,C,O;let R=function(k,z,U){let Z,X="";for(let ne=k;ne>0;ne--)Z=1<<ne-1,X+=(z&Z?1:0)+(U&Z?2:0);return X}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,R).replace(/{bbox-epsg-3857}/g,v)}isChildOf(s){let l=this.z-s.z;return l>0&&s.x===this.x>>l&&s.y===this.y>>l}getTilePoint(s){let l=Math.pow(2,this.z);return new b((s.x*l-this.x)*Sn,(s.y*l-this.y)*Sn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class jU{constructor(s,l){this.wrap=s,this.canonical=l,this.key=yy(s,l.z,l.z,l.x,l.y)}}class So{constructor(s,l,f,v,x){if(s<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${f}`);this.overscaledZ=s,this.wrap=l,this.canonical=new Xq(f,+v,+x),this.key=yy(l,s,f,v,x)}clone(){return new So(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);let l=this.canonical.z-s;return s>this.canonical.z?new So(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new So(s,this.wrap,s,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(s,l){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);let f=this.canonical.z-s;return s>this.canonical.z?yy(this.wrap*+l,s,this.canonical.z,this.canonical.x,this.canonical.y):yy(this.wrap*+l,s,s,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(s){if(s.wrap!==this.wrap)return!1;let l=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>l&&s.canonical.y===this.canonical.y>>l}children(s){if(this.overscaledZ>=s)return[new So(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let l=this.canonical.z+1,f=2*this.canonical.x,v=2*this.canonical.y;return[new So(l,this.wrap,l,f,v),new So(l,this.wrap,l,f+1,v),new So(l,this.wrap,l,f,v+1),new So(l,this.wrap,l,f+1,v+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new So(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new So(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new jU(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new gy(s.x-this.wrap,s.y))}}function yy(u,s,l,f,v){(u*=2)<0&&(u=-1*u-1);let x=1<<l;return(x*x*u+x*v+f).toString(36)+l.toString(36)+s.toString(36)}tt("CanonicalTileID",Xq),tt("OverscaledTileID",So,{omit:["posMatrix"]});class BU{constructor(s,l,f,v=1,x=1,w=1,S=0){if(this.uid=s,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void Rt(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;let C=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=x,this.blueFactor=w,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4;}for(let O=0;O<C;O++)this.data[this._idx(-1,O)]=this.data[this._idx(0,O)],this.data[this._idx(C,O)]=this.data[this._idx(C-1,O)],this.data[this._idx(O,-1)]=this.data[this._idx(O,0)],this.data[this._idx(O,C)]=this.data[this._idx(O,C-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(C,-1)]=this.data[this._idx(C-1,0)],this.data[this._idx(-1,C)]=this.data[this._idx(0,C-1)],this.data[this._idx(C,C)]=this.data[this._idx(C-1,C-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let O=0;O<C;O++)for(let R=0;R<C;R++){let k=this.get(O,R);k>this.max&&(this.max=k),k<this.min&&(this.min=k)}}get(s,l){let f=new Uint8Array(this.data.buffer),v=4*this._idx(s,l);return this.unpack(f[v],f[v+1],f[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,l){if(s<-1||s>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(s+1)}unpack(s,l,f){return s*this.redFactor+l*this.greenFactor+f*this.blueFactor-this.baseShift}getPixels(){return new Eo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,l,f){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let v=l*this.dim,x=l*this.dim+this.dim,w=f*this.dim,S=f*this.dim+this.dim;switch(l){case-1:v=x-1;break;case 1:x=v+1;}switch(f){case-1:w=S-1;break;case 1:S=w+1;}let C=-l*this.dim,O=-f*this.dim;for(let R=w;R<S;R++)for(let k=v;k<x;k++)this.data[this._idx(k,R)]=s.data[this._idx(k+C,R+O)]}}tt("DEMData",BU);class UU{constructor(s){this._stringToNumber={},this._numberToString=[];for(let l=0;l<s.length;l++){let f=s[l];this._stringToNumber[f]=l,this._numberToString[l]=f}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class VU{constructor(s,l,f,v,x){this.type="Feature",this._vectorTileFeature=s,s._z=l,s._x=f,s._y=v,this.properties=s.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){let s={geometry:this.geometry};for(let l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(s[l]=this[l]);return s}}class $U{constructor(s,l){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new xc(Sn,16,0),this.grid3D=new xc(Sn,16,0),this.featureIndexArray=new Ei,this.promoteId=l}insert(s,l,f,v,x,w){let S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,v,x);let C=w?this.grid3D:this.grid;for(let O=0;O<l.length;O++){let R=l[O],k=[1/0,1/0,-1/0,-1/0];for(let z=0;z<R.length;z++){let U=R[z];k[0]=Math.min(k[0],U.x),k[1]=Math.min(k[1],U.y),k[2]=Math.max(k[2],U.x),k[3]=Math.max(k[3],U.y)}k[0]<Sn&&k[1]<Sn&&k[2]>=0&&k[3]>=0&&C.insert(S,k[0],k[1],k[2],k[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Mc.VectorTile(new Fq(this.rawTileData)).layers,this.sourceLayerCoder=new UU(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,l,f,v){this.loadVTLayers();let x=s.params||{},w=Sn/s.tileSize/s.scale,S=Ng(x.filter),C=s.queryGeometry,O=s.queryPadding*w,R=WU(C),k=this.grid.query(R.minX-O,R.minY-O,R.maxX+O,R.maxY+O),z=WU(s.cameraQueryGeometry),U=this.grid3D.query(z.minX-O,z.minY-O,z.maxX+O,z.maxY+O,(ne,ue,xe,pe)=>function(ye,Se,Re,Xe,pt){for(let Ge of ye)if(Se<=Ge.x&&Re<=Ge.y&&Xe>=Ge.x&&pt>=Ge.y)return!0;let He=[new b(Se,Re),new b(Se,pt),new b(Xe,pt),new b(Xe,Re)];if(ye.length>2){for(let Ge of He)if(_d(ye,Ge))return!0}for(let Ge=0;Ge<ye.length-1;Ge++)if(KIe(ye[Ge],ye[Ge+1],He))return!0;return!1}(s.cameraQueryGeometry,ne-O,ue-O,xe+O,pe+O));for(let ne of U)k.push(ne);k.sort(vAe);let Z={},X;for(let ne=0;ne<k.length;ne++){let ue=k[ne];if(ue===X)continue;X=ue;let xe=this.featureIndexArray.get(ue),pe=null;this.loadMatchingFeature(Z,xe.bucketIndex,xe.sourceLayerIndex,xe.featureIndex,S,x.layers,x.availableImages,l,f,v,(ye,Se,Re)=>(pe||(pe=yf(ye)),Se.queryIntersectsFeature(C,ye,Re,pe,this.z,s.transform,w,s.pixelPosMatrix)))}return Z}loadMatchingFeature(s,l,f,v,x,w,S,C,O,R,k){let z=this.bucketLayerIDs[l];if(w&&!function(ne,ue){for(let xe=0;xe<ne.length;xe++)if(ue.indexOf(ne[xe])>=0)return!0;return!1}(w,z))return;let U=this.sourceLayerCoder.decode(f),Z=this.vtLayers[U].feature(v);if(x.needGeometry){let ne=_f(Z,!0);if(!x.filter(new Rr(this.tileID.overscaledZ),ne,this.tileID.canonical))return}else if(!x.filter(new Rr(this.tileID.overscaledZ),Z))return;let X=this.getId(Z,U);for(let ne=0;ne<z.length;ne++){let ue=z[ne];if(w&&w.indexOf(ue)<0)continue;let xe=C[ue];if(!xe)continue;let pe={};X&&R&&(pe=R.getState(xe.sourceLayer||"_geojsonTileLayer",X));let ye=Ie({},O[ue]);ye.paint=GU(ye.paint,xe.paint,Z,pe,S),ye.layout=GU(ye.layout,xe.layout,Z,pe,S);let Se=!k||k(Z,xe,pe);if(!Se)continue;let Re=new VU(Z,this.z,this.x,this.y,X);Re.layer=ye;let Xe=s[ue];Xe===void 0&&(Xe=s[ue]=[]),Xe.push({featureIndex:v,feature:Re,intersectionZ:Se})}}lookupSymbolFeatures(s,l,f,v,x,w,S,C){let O={};this.loadVTLayers();let R=Ng(x);for(let k of s)this.loadMatchingFeature(O,f,v,k,R,w,S,C,l);return O}hasLayer(s){for(let l of this.bucketLayerIDs)for(let f of l)if(s===f)return!0;return!1}getId(s,l){let f=s.id;return this.promoteId&&(f=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof f=="boolean"&&(f=Number(f))),f}}function GU(u,s,l,f,v){return Ae(u,(x,w)=>{let S=s instanceof df?s.get(w):null;return S&&S.evaluate?S.evaluate(l,f,v):S})}function WU(u){let s=1/0,l=1/0,f=-1/0,v=-1/0;for(let x of u)s=Math.min(s,x.x),l=Math.min(l,x.y),f=Math.max(f,x.x),v=Math.max(v,x.y);return{minX:s,minY:l,maxX:f,maxY:v}}function vAe(u,s){return s-u}function ZU(u,s,l,f,v){let x=[];for(let w=0;w<u.length;w++){let S=u[w],C;for(let O=0;O<S.length-1;O++){let R=S[O],k=S[O+1];R.x<s&&k.x<s||(R.x<s?R=new b(s,R.y+(s-R.x)/(k.x-R.x)*(k.y-R.y))._round():k.x<s&&(k=new b(s,R.y+(s-R.x)/(k.x-R.x)*(k.y-R.y))._round()),R.y<l&&k.y<l||(R.y<l?R=new b(R.x+(l-R.y)/(k.y-R.y)*(k.x-R.x),l)._round():k.y<l&&(k=new b(R.x+(l-R.y)/(k.y-R.y)*(k.x-R.x),l)._round()),R.x>=f&&k.x>=f||(R.x>=f?R=new b(f,R.y+(f-R.x)/(k.x-R.x)*(k.y-R.y))._round():k.x>=f&&(k=new b(f,R.y+(f-R.x)/(k.x-R.x)*(k.y-R.y))._round()),R.y>=v&&k.y>=v||(R.y>=v?R=new b(R.x+(v-R.y)/(k.y-R.y)*(k.x-R.x),v)._round():k.y>=v&&(k=new b(R.x+(v-R.y)/(k.y-R.y)*(k.x-R.x),v)._round()),C&&R.equals(C[C.length-1])||(C=[R],x.push(C)),C.push(k)))))}}return x}tt("FeatureIndex",$U,{omit:["rawTileData","sourceLayerCoder"]});class Lc extends b{constructor(s,l,f,v){super(s,l),this.angle=f,v!==void 0&&(this.segment=v)}clone(){return new Lc(this.x,this.y,this.angle,this.segment)}}function HU(u,s,l,f,v){if(s.segment===void 0||l===0)return!0;let x=s,w=s.segment+1,S=0;for(;S>-l/2;){if(w--,w<0)return!1;S-=u[w].dist(x),x=u[w]}S+=u[w].dist(u[w+1]),w++;let C=[],O=0;for(;S<l/2;){let R=u[w],k=u[w+1];if(!k)return!1;let z=u[w-1].angleTo(R)-R.angleTo(k);for(z=Math.abs((z+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:S,angleDelta:z}),O+=z;S-C[0].distance>f;)O-=C.shift().angleDelta;if(O>v)return!1;w++,S+=R.dist(k)}return!0}function KU(u){let s=0;for(let l=0;l<u.length-1;l++)s+=u[l].dist(u[l+1]);return s}function XU(u,s,l){return u?.6*s*l:0}function YU(u,s){return Math.max(u?u.right-u.left:0,s?s.right-s.left:0)}function gAe(u,s,l,f,v,x){let w=XU(l,v,x),S=YU(l,f)*x,C=0,O=KU(u)/2;for(let R=0;R<u.length-1;R++){let k=u[R],z=u[R+1],U=k.dist(z);if(C+U>O){let Z=(O-C)/U,X=Bi.number(k.x,z.x,Z),ne=Bi.number(k.y,z.y,Z),ue=new Lc(X,ne,z.angleTo(k),R);return ue._round(),!w||HU(u,ue,S,w,s)?ue:void 0}C+=U}}function yAe(u,s,l,f,v,x,w,S,C){let O=XU(f,x,w),R=YU(f,v),k=R*w,z=u[0].x===0||u[0].x===C||u[0].y===0||u[0].y===C;return s-k<s/4&&(s=k+s/4),JU(u,z?s/2*S%s:(R/2+2*x)*w*S%s,s,O,l,k,z,!1,C)}function JU(u,s,l,f,v,x,w,S,C){let O=x/2,R=KU(u),k=0,z=s-l,U=[];for(let Z=0;Z<u.length-1;Z++){let X=u[Z],ne=u[Z+1],ue=X.dist(ne),xe=ne.angleTo(X);for(;z+l<k+ue;){z+=l;let pe=(z-k)/ue,ye=Bi.number(X.x,ne.x,pe),Se=Bi.number(X.y,ne.y,pe);if(ye>=0&&ye<C&&Se>=0&&Se<C&&z-O>=0&&z+O<=R){let Re=new Lc(ye,Se,xe,Z);Re._round(),f&&!HU(u,Re,x,f,v)||U.push(Re)}}k+=ue}return S||U.length||w||(U=JU(u,k/2,l,f,v,x,w,!0,C)),U}tt("Anchor",Lc);let Cd=wa;function QU(u,s,l,f){let v=[],x=u.image,w=x.pixelRatio,S=x.paddedRect.w-2*Cd,C=x.paddedRect.h-2*Cd,O={x1:u.left,y1:u.top,x2:u.right,y2:u.bottom},R=x.stretchX||[[0,S]],k=x.stretchY||[[0,C]],z=(Ce,ut)=>Ce+ut[1]-ut[0],U=R.reduce(z,0),Z=k.reduce(z,0),X=S-U,ne=C-Z,ue=0,xe=U,pe=0,ye=Z,Se=0,Re=X,Xe=0,pt=ne;if(x.content&&f){let Ce=x.content,ut=Ce[2]-Ce[0],at=Ce[3]-Ce[1];(x.textFitWidth||x.textFitHeight)&&(O=IU(u)),ue=_w(R,0,Ce[0]),pe=_w(k,0,Ce[1]),xe=_w(R,Ce[0],Ce[2]),ye=_w(k,Ce[1],Ce[3]),Se=Ce[0]-ue,Xe=Ce[1]-pe,Re=ut-xe,pt=at-ye}let He=O.x1,Ge=O.y1,st=O.x2-He,rt=O.y2-Ge,et=(Ce,ut,at,wt)=>{let Tr=xw(Ce.stretch-ue,xe,st,He),wr=ww(Ce.fixed-Se,Re,Ce.stretch,U),Fn=xw(ut.stretch-pe,ye,rt,Ge),$o=ww(ut.fixed-Xe,pt,ut.stretch,Z),hi=xw(at.stretch-ue,xe,st,He),zn=ww(at.fixed-Se,Re,at.stretch,U),Gi=xw(wt.stretch-pe,ye,rt,Ge),Wi=ww(wt.fixed-Xe,pt,wt.stretch,Z),Zi=new b(Tr,Fn),un=new b(hi,Fn),jn=new b(hi,Gi),Ti=new b(Tr,Gi),fi=new b(wr/w,$o/w),Hi=new b(zn/w,Wi/w),pi=s*Math.PI/180;if(pi){let nr=Math.sin(pi),qr=Math.cos(pi),Nr=[qr,-nr,nr,qr];Zi._matMult(Nr),un._matMult(Nr),Ti._matMult(Nr),jn._matMult(Nr)}let To=Ce.stretch+Ce.fixed,ba=ut.stretch+ut.fixed;return{tl:Zi,tr:un,bl:Ti,br:jn,tex:{x:x.paddedRect.x+Cd+To,y:x.paddedRect.y+Cd+ba,w:at.stretch+at.fixed-To,h:wt.stretch+wt.fixed-ba},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:fi,pixelOffsetBR:Hi,minFontScaleX:Re/w/st,minFontScaleY:pt/w/rt,isSDF:l}};if(f&&(x.stretchX||x.stretchY)){let Ce=e5(R,X,U),ut=e5(k,ne,Z);for(let at=0;at<Ce.length-1;at++){let wt=Ce[at],Tr=Ce[at+1];for(let wr=0;wr<ut.length-1;wr++)v.push(et(wt,ut[wr],Tr,ut[wr+1]))}}else v.push(et({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:C+1}));return v}function _w(u,s,l){let f=0;for(let v of u)f+=Math.max(s,Math.min(l,v[1]))-Math.max(s,Math.min(l,v[0]));return f}function e5(u,s,l){let f=[{fixed:-Cd,stretch:0}];for(let[v,x]of u){let w=f[f.length-1];f.push({fixed:v-w.stretch,stretch:w.stretch}),f.push({fixed:v-w.stretch,stretch:w.stretch+(x-v)})}return f.push({fixed:s+Cd,stretch:l}),f}function xw(u,s,l,f){return u/s*l+f}function ww(u,s,l,f){return u-s*l/f}class bw{constructor(s,l,f,v,x,w,S,C,O,R){var k;if(this.boxStartIndex=s.length,O){let z=w.top,U=w.bottom,Z=w.collisionPadding;Z&&(z-=Z[1],U+=Z[3]);let X=U-z;X>0&&(X=Math.max(10,X),this.circleDiameter=X)}else{let z=!((k=w.image)===null||k===void 0)&&k.content&&(w.image.textFitWidth||w.image.textFitHeight)?IU(w):{x1:w.left,y1:w.top,x2:w.right,y2:w.bottom};z.y1=z.y1*S-C[0],z.y2=z.y2*S+C[2],z.x1=z.x1*S-C[3],z.x2=z.x2*S+C[1];let U=w.collisionPadding;if(U&&(z.x1-=U[0]*S,z.y1-=U[1]*S,z.x2+=U[2]*S,z.y2+=U[3]*S),R){let Z=new b(z.x1,z.y1),X=new b(z.x2,z.y1),ne=new b(z.x1,z.y2),ue=new b(z.x2,z.y2),xe=R*Math.PI/180;Z._rotate(xe),X._rotate(xe),ne._rotate(xe),ue._rotate(xe),z.x1=Math.min(Z.x,X.x,ne.x,ue.x),z.x2=Math.max(Z.x,X.x,ne.x,ue.x),z.y1=Math.min(Z.y,X.y,ne.y,ue.y),z.y2=Math.max(Z.y,X.y,ne.y,ue.y)}s.emplaceBack(l.x,l.y,z.x1,z.y1,z.x2,z.y2,f,v,x)}this.boxEndIndex=s.length}}class _Ae{constructor(s=[],l=(f,v)=>f<v?-1:f>v?1:0){if(this.data=s,this.length=this.data.length,this.compare=l,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;let s=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),s}peek(){return this.data[0]}_up(s){let{data:l,compare:f}=this,v=l[s];for(;s>0;){let x=s-1>>1,w=l[x];if(f(v,w)>=0)break;l[s]=w,s=x}l[s]=v}_down(s){let{data:l,compare:f}=this,v=this.length>>1,x=l[s];for(;s<v;){let w=1+(s<<1),S=w+1;if(S<this.length&&f(l[S],l[w])<0&&(w=S),f(l[w],x)>=0)break;l[s]=l[w],s=w}l[s]=x}}function xAe(u,s=1,l=!1){let f=1/0,v=1/0,x=-1/0,w=-1/0,S=u[0];for(let U=0;U<S.length;U++){let Z=S[U];(!U||Z.x<f)&&(f=Z.x),(!U||Z.y<v)&&(v=Z.y),(!U||Z.x>x)&&(x=Z.x),(!U||Z.y>w)&&(w=Z.y)}let C=Math.min(x-f,w-v),O=C/2,R=new _Ae([],wAe);if(C===0)return new b(f,v);for(let U=f;U<x;U+=C)for(let Z=v;Z<w;Z+=C)R.push(new Ad(U+O,Z+O,O,u));let k=function(U){let Z=0,X=0,ne=0,ue=U[0];for(let xe=0,pe=ue.length,ye=pe-1;xe<pe;ye=xe++){let Se=ue[xe],Re=ue[ye],Xe=Se.x*Re.y-Re.x*Se.y;X+=(Se.x+Re.x)*Xe,ne+=(Se.y+Re.y)*Xe,Z+=3*Xe}return new Ad(X/Z,ne/Z,0,U)}(u),z=R.length;for(;R.length;){let U=R.pop();(U.d>k.d||!k.d)&&(k=U,l&&console.log("found best %d after %d probes",Math.round(1e4*U.d)/1e4,z)),U.max-k.d<=s||(O=U.h/2,R.push(new Ad(U.p.x-O,U.p.y-O,O,u)),R.push(new Ad(U.p.x+O,U.p.y-O,O,u)),R.push(new Ad(U.p.x-O,U.p.y+O,O,u)),R.push(new Ad(U.p.x+O,U.p.y+O,O,u)),z+=4)}return l&&(console.log(`num probes: ${z}`),console.log(`best distance: ${k.d}`)),k.p}function wAe(u,s){return s.max-u.max}function Ad(u,s,l,f){this.p=new b(u,s),this.h=l,this.d=function(v,x){let w=!1,S=1/0;for(let C=0;C<x.length;C++){let O=x[C];for(let R=0,k=O.length,z=k-1;R<k;z=R++){let U=O[R],Z=O[z];U.y>v.y!=Z.y>v.y&&v.x<(Z.x-U.x)*(v.y-U.y)/(Z.y-U.y)+U.x&&(w=!w),S=Math.min(S,N4(v,U,Z))}}return(w?1:-1)*Math.sqrt(S)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var ci;i.aq=void 0,(ci=i.aq||(i.aq={}))[ci.center=1]="center",ci[ci.left=2]="left",ci[ci.right=3]="right",ci[ci.top=4]="top",ci[ci.bottom=5]="bottom",ci[ci["top-left"]=6]="top-left",ci[ci["top-right"]=7]="top-right",ci[ci["bottom-left"]=8]="bottom-left",ci[ci["bottom-right"]=9]="bottom-right";let kc=7,Yq=Number.POSITIVE_INFINITY;function t5(u,s){return s[1]!==Yq?function(l,f,v){let x=0,w=0;switch(f=Math.abs(f),v=Math.abs(v),l){case"top-right":case"top-left":case"top":w=v-kc;break;case"bottom-right":case"bottom-left":case"bottom":w=-v+kc;}switch(l){case"top-right":case"bottom-right":case"right":x=-f;break;case"top-left":case"bottom-left":case"left":x=f;}return[x,w]}(u,s[0],s[1]):function(l,f){let v=0,x=0;f<0&&(f=0);let w=f/Math.SQRT2;switch(l){case"top-right":case"top-left":x=w-kc;break;case"bottom-right":case"bottom-left":x=-w+kc;break;case"bottom":x=-f+kc;break;case"top":x=f-kc;}switch(l){case"top-right":case"bottom-right":v=-w;break;case"top-left":case"bottom-left":v=w;break;case"left":v=f;break;case"right":v=-f;}return[v,x]}(u,s[0])}function r5(u,s,l){var f;let v=u.layout,x=(f=v.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(s,{},l);if(x){let S=x.values,C=[];for(let O=0;O<S.length;O+=2){let R=C[O]=S[O],k=S[O+1].map(z=>z*On);R.startsWith("top")?k[1]-=kc:R.startsWith("bottom")&&(k[1]+=kc),C[O+1]=k}return new La(C)}let w=v.get("text-variable-anchor");if(w){let S;S=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(s,{},l)*On,Yq]:v.get("text-offset").evaluate(s,{},l).map(O=>O*On);let C=[];for(let O of w)C.push(O,t5(O,S));return new La(C)}return null}function Jq(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left";}return"center"}function bAe(u,s,l,f,v,x,w,S,C,O,R){let k=x.textMaxSize.evaluate(s,{});k===void 0&&(k=w);let z=u.layers[0].layout,U=z.get("icon-offset").evaluate(s,{},R),Z=i5(l.horizontal),X=w/24,ne=u.tilePixelRatio*X,ue=u.tilePixelRatio*k/24,xe=u.tilePixelRatio*S,pe=u.tilePixelRatio*z.get("symbol-spacing"),ye=z.get("text-padding")*u.tilePixelRatio,Se=function(Ce,ut,at,wt=1){let Tr=Ce.get("icon-padding").evaluate(ut,{},at),wr=Tr&&Tr.values;return[wr[0]*wt,wr[1]*wt,wr[2]*wt,wr[3]*wt]}(z,s,R,u.tilePixelRatio),Re=z.get("text-max-angle")/180*Math.PI,Xe=z.get("text-rotation-alignment")!=="viewport"&&z.get("symbol-placement")!=="point",pt=z.get("icon-rotation-alignment")==="map"&&z.get("symbol-placement")!=="point",He=z.get("symbol-placement"),Ge=pe/2,st=z.get("icon-text-fit"),rt;f&&st!=="none"&&(u.allowVerticalPlacement&&l.vertical&&(rt=CU(f,l.vertical,st,z.get("icon-text-fit-padding"),U,X)),Z&&(f=CU(f,Z,st,z.get("icon-text-fit-padding"),U,X)));let et=(Ce,ut)=>{ut.x<0||ut.x>=Sn||ut.y<0||ut.y>=Sn||function(at,wt,Tr,wr,Fn,$o,hi,zn,Gi,Wi,Zi,un,jn,Ti,fi,Hi,pi,To,ba,nr,qr,Nr,Ua,Yr,qd){let iu=at.addToLineVertexArray(wt,Tr),au,Go,Io,Xn,ol=0,wy=0,u5=0,l5=0,oP=-1,sP=-1,sl={},c5=md("");if(at.allowVerticalPlacement&&wr.vertical){let Ii=zn.layout.get("text-rotate").evaluate(qr,{},Yr)+90;Io=new bw(Gi,wt,Wi,Zi,un,wr.vertical,jn,Ti,fi,Ii),hi&&(Xn=new bw(Gi,wt,Wi,Zi,un,hi,pi,To,fi,Ii))}if(Fn){let Ii=zn.layout.get("icon-rotate").evaluate(qr,{}),Co=zn.layout.get("icon-text-fit")!=="none",wf=QU(Fn,Ii,Ua,Co),Ms=hi?QU(hi,Ii,Ua,Co):void 0;Go=new bw(Gi,wt,Wi,Zi,un,Fn,pi,To,!1,Ii),ol=4*wf.length;let bf=at.iconSizeData,ou=null;bf.kind==="source"?(ou=[nu*zn.layout.get("icon-size").evaluate(qr,{})],ou[0]>Rc&&Rt(`${at.layerIds[0]}: Value for "icon-size" is >= ${vy}. Reduce your "icon-size".`)):bf.kind==="composite"&&(ou=[nu*Nr.compositeIconSizes[0].evaluate(qr,{},Yr),nu*Nr.compositeIconSizes[1].evaluate(qr,{},Yr)],(ou[0]>Rc||ou[1]>Rc)&&Rt(`${at.layerIds[0]}: Value for "icon-size" is >= ${vy}. Reduce your "icon-size".`)),at.addSymbols(at.icon,wf,ou,nr,ba,qr,i.ah.none,wt,iu.lineStartIndex,iu.lineLength,-1,Yr),oP=at.icon.placedSymbolArray.length-1,Ms&&(wy=4*Ms.length,at.addSymbols(at.icon,Ms,ou,nr,ba,qr,i.ah.vertical,wt,iu.lineStartIndex,iu.lineLength,-1,Yr),sP=at.icon.placedSymbolArray.length-1)}let h5=Object.keys(wr.horizontal);for(let Ii of h5){let Co=wr.horizontal[Ii];if(!au){c5=md(Co.text);let Ms=zn.layout.get("text-rotate").evaluate(qr,{},Yr);au=new bw(Gi,wt,Wi,Zi,un,Co,jn,Ti,fi,Ms)}let wf=Co.positionedLines.length===1;if(u5+=n5(at,wt,Co,$o,zn,fi,qr,Hi,iu,wr.vertical?i.ah.horizontal:i.ah.horizontalOnly,wf?h5:[Ii],sl,oP,Nr,Yr),wf)break}wr.vertical&&(l5+=n5(at,wt,wr.vertical,$o,zn,fi,qr,Hi,iu,i.ah.vertical,["vertical"],sl,sP,Nr,Yr));let TAe=au?au.boxStartIndex:at.collisionBoxArray.length,IAe=au?au.boxEndIndex:at.collisionBoxArray.length,CAe=Io?Io.boxStartIndex:at.collisionBoxArray.length,AAe=Io?Io.boxEndIndex:at.collisionBoxArray.length,qAe=Go?Go.boxStartIndex:at.collisionBoxArray.length,PAe=Go?Go.boxEndIndex:at.collisionBoxArray.length,MAe=Xn?Xn.boxStartIndex:at.collisionBoxArray.length,OAe=Xn?Xn.boxEndIndex:at.collisionBoxArray.length,Ps=-1,Sw=(Ii,Co)=>Ii&&Ii.circleDiameter?Math.max(Ii.circleDiameter,Co):Co;Ps=Sw(au,Ps),Ps=Sw(Io,Ps),Ps=Sw(Go,Ps),Ps=Sw(Xn,Ps);let f5=Ps>-1?1:0;f5&&(Ps*=qd/On),at.glyphOffsetArray.length>=Id.MAX_GLYPHS&&Rt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),qr.sortKey!==void 0&&at.addToSortKeyRanges(at.symbolInstances.length,qr.sortKey);let RAe=r5(zn,qr,Yr),[DAe,LAe]=function(Ii,Co){let wf=Ii.length,Ms=Co==null?void 0:Co.values;if((Ms==null?void 0:Ms.length)>0)for(let bf=0;bf<Ms.length;bf+=2){let ou=Ms[bf+1];Ii.emplaceBack(i.aq[Ms[bf]],ou[0],ou[1])}return[wf,Ii.length]}(at.textAnchorOffsets,RAe);at.symbolInstances.emplaceBack(wt.x,wt.y,sl.right>=0?sl.right:-1,sl.center>=0?sl.center:-1,sl.left>=0?sl.left:-1,sl.vertical||-1,oP,sP,c5,TAe,IAe,CAe,AAe,qAe,PAe,MAe,OAe,Wi,u5,l5,ol,wy,f5,0,jn,Ps,DAe,LAe)}(u,ut,Ce,l,f,v,rt,u.layers[0],u.collisionBoxArray,s.index,s.sourceLayerIndex,u.index,ne,[ye,ye,ye,ye],Xe,C,xe,Se,pt,U,s,x,O,R,w)};if(He==="line")for(let Ce of ZU(s.geometry,0,0,Sn,Sn)){let ut=yAe(Ce,pe,Re,l.vertical||Z,f,24,ue,u.overscaling,Sn);for(let at of ut)Z&&EAe(u,Z.text,Ge,at)||et(Ce,at)}else if(He==="line-center"){for(let Ce of s.geometry)if(Ce.length>1){let ut=gAe(Ce,Re,l.vertical||Z,f,24,ue);ut&&et(Ce,ut)}}else if(s.type==="Polygon")for(let Ce of Gp(s.geometry,0)){let ut=xAe(Ce,16);et(Ce[0],new Lc(ut.x,ut.y,0))}else if(s.type==="LineString")for(let Ce of s.geometry)et(Ce,new Lc(Ce[0].x,Ce[0].y,0));else if(s.type==="Point")for(let Ce of s.geometry)for(let ut of Ce)et([ut],new Lc(ut.x,ut.y,0))}function n5(u,s,l,f,v,x,w,S,C,O,R,k,z,U,Z){let X=function(xe,pe,ye,Se,Re,Xe,pt,He){let Ge=Se.layout.get("text-rotate").evaluate(Xe,{})*Math.PI/180,st=[];for(let rt of pe.positionedLines)for(let et of rt.positionedGlyphs){if(!et.rect)continue;let Ce=et.rect||{},ut=_U+1,at=!0,wt=1,Tr=0,wr=(Re||He)&&et.vertical,Fn=et.metrics.advance*et.scale/2;if(He&&pe.verticalizable&&(Tr=rt.lineOffset/2-(et.imageName?-(On-et.metrics.width*et.scale)/2:(et.scale-1)*On)),et.imageName){let nr=pt[et.imageName];at=nr.sdf,wt=nr.pixelRatio,ut=wa/wt}let $o=Re?[et.x+Fn,et.y]:[0,0],hi=Re?[0,0]:[et.x+Fn+ye[0],et.y+ye[1]-Tr],zn=[0,0];wr&&(zn=hi,hi=[0,0]);let Gi=et.metrics.isDoubleResolution?2:1,Wi=(et.metrics.left-ut)*et.scale-Fn+hi[0],Zi=(-et.metrics.top-ut)*et.scale+hi[1],un=Wi+Ce.w/Gi*et.scale/wt,jn=Zi+Ce.h/Gi*et.scale/wt,Ti=new b(Wi,Zi),fi=new b(un,Zi),Hi=new b(Wi,jn),pi=new b(un,jn);if(wr){let nr=new b(-Fn,Fn-dy),qr=-Math.PI/2,Nr=On/2-Fn,Ua=new b(5-dy-Nr,-(et.imageName?Nr:0)),Yr=new b(...zn);Ti._rotateAround(qr,nr)._add(Ua)._add(Yr),fi._rotateAround(qr,nr)._add(Ua)._add(Yr),Hi._rotateAround(qr,nr)._add(Ua)._add(Yr),pi._rotateAround(qr,nr)._add(Ua)._add(Yr)}if(Ge){let nr=Math.sin(Ge),qr=Math.cos(Ge),Nr=[qr,-nr,nr,qr];Ti._matMult(Nr),fi._matMult(Nr),Hi._matMult(Nr),pi._matMult(Nr)}let To=new b(0,0),ba=new b(0,0);st.push({tl:Ti,tr:fi,bl:Hi,br:pi,tex:Ce,writingMode:pe.writingMode,glyphOffset:$o,sectionIndex:et.sectionIndex,isSDF:at,pixelOffsetTL:To,pixelOffsetBR:ba,minFontScaleX:0,minFontScaleY:0})}return st}(0,l,S,v,x,w,f,u.allowVerticalPlacement),ne=u.textSizeData,ue=null;ne.kind==="source"?(ue=[nu*v.layout.get("text-size").evaluate(w,{})],ue[0]>Rc&&Rt(`${u.layerIds[0]}: Value for "text-size" is >= ${vy}. Reduce your "text-size".`)):ne.kind==="composite"&&(ue=[nu*U.compositeTextSizes[0].evaluate(w,{},Z),nu*U.compositeTextSizes[1].evaluate(w,{},Z)],(ue[0]>Rc||ue[1]>Rc)&&Rt(`${u.layerIds[0]}: Value for "text-size" is >= ${vy}. Reduce your "text-size".`)),u.addSymbols(u.text,X,ue,S,x,w,O,s,C.lineStartIndex,C.lineLength,z,Z);for(let xe of R)k[xe]=u.text.placedSymbolArray.length-1;return 4*X.length}function i5(u){for(let s in u)return u[s];return null}function EAe(u,s,l,f){let v=u.compareText;if(s in v){let x=v[s];for(let w=x.length-1;w>=0;w--)if(f.dist(x[w])<l)return!0}else v[s]=[];return v[s].push(f),!1}let a5=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Qq{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[l,f]=new Uint8Array(s,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");let v=f>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);let x=a5[15&f];if(!x)throw new Error("Unrecognized array type.");let[w]=new Uint16Array(s,2,1),[S]=new Uint32Array(s,4,1);return new Qq(S,w,x,s)}constructor(s,l=64,f=Float64Array,v){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=f,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;let x=a5.indexOf(this.ArrayType),w=2*s*this.ArrayType.BYTES_PER_ELEMENT,S=s*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-S%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${f}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+S+C,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+w+S+C),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+S+C,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=s)}add(s,l){let f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=s,this.coords[this._pos++]=l,f}finish(){let s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return eP(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,l,f,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:x,coords:w,nodeSize:S}=this,C=[0,x.length-1,0],O=[];for(;C.length;){let R=C.pop()||0,k=C.pop()||0,z=C.pop()||0;if(k-z<=S){for(let ne=z;ne<=k;ne++){let ue=w[2*ne],xe=w[2*ne+1];ue>=s&&ue<=f&&xe>=l&&xe<=v&&O.push(x[ne])}continue}let U=z+k>>1,Z=w[2*U],X=w[2*U+1];Z>=s&&Z<=f&&X>=l&&X<=v&&O.push(x[U]),(R===0?s<=Z:l<=X)&&(C.push(z),C.push(U-1),C.push(1-R)),(R===0?f>=Z:v>=X)&&(C.push(U+1),C.push(k),C.push(1-R))}return O}within(s,l,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:v,coords:x,nodeSize:w}=this,S=[0,v.length-1,0],C=[],O=f*f;for(;S.length;){let R=S.pop()||0,k=S.pop()||0,z=S.pop()||0;if(k-z<=w){for(let ne=z;ne<=k;ne++)s5(x[2*ne],x[2*ne+1],s,l)<=O&&C.push(v[ne]);continue}let U=z+k>>1,Z=x[2*U],X=x[2*U+1];s5(Z,X,s,l)<=O&&C.push(v[U]),(R===0?s-f<=Z:l-f<=X)&&(S.push(z),S.push(U-1),S.push(1-R)),(R===0?s+f>=Z:l+f>=X)&&(S.push(U+1),S.push(k),S.push(1-R))}return C}}function eP(u,s,l,f,v,x){if(v-f<=l)return;let w=f+v>>1;o5(u,s,w,f,v,x),eP(u,s,l,f,w-1,1-x),eP(u,s,l,w+1,v,1-x)}function o5(u,s,l,f,v,x){for(;v>f;){if(v-f>600){let O=v-f+1,R=l-f+1,k=Math.log(O),z=.5*Math.exp(2*k/3),U=.5*Math.sqrt(k*z*(O-z)/O)*(R-O/2<0?-1:1);o5(u,s,l,Math.max(f,Math.floor(l-R*z/O+U)),Math.min(v,Math.floor(l+(O-R)*z/O+U)),x)}let w=s[2*l+x],S=f,C=v;for(_y(u,s,f,l),s[2*v+x]>w&&_y(u,s,f,v);S<C;){for(_y(u,s,S,C),S++,C--;s[2*S+x]<w;)S++;for(;s[2*C+x]>w;)C--}s[2*f+x]===w?_y(u,s,f,C):(C++,_y(u,s,C,v)),C<=l&&(f=C+1),l<=C&&(v=C-1)}}function _y(u,s,l,f){tP(u,l,f),tP(s,2*l,2*f),tP(s,2*l+1,2*f+1)}function tP(u,s,l){let f=u[s];u[s]=u[l],u[l]=f}function s5(u,s,l,f){let v=u-l,x=s-f;return v*v+x*x}var rP;i.bg=void 0,(rP=i.bg||(i.bg={})).create="create",rP.load="load",rP.fullLoad="fullLoad";let Ew=null,xy=[],nP=1e3/60,iP="loadTime",aP="fullLoadTime",SAe={mark(u){performance.mark(u)},frame(u){let s=u;Ew!=null&&xy.push(s-Ew),Ew=s},clearMetrics(){Ew=null,xy=[],performance.clearMeasures(iP),performance.clearMeasures(aP);for(let u in i.bg)performance.clearMarks(i.bg[u])},getPerformanceMetrics(){performance.measure(iP,i.bg.create,i.bg.load),performance.measure(aP,i.bg.create,i.bg.fullLoad);let u=performance.getEntriesByName(iP)[0].duration,s=performance.getEntriesByName(aP)[0].duration,l=xy.length,f=1/(xy.reduce((x,w)=>x+w,0)/l/1e3),v=xy.filter(x=>x>nP).reduce((x,w)=>x+(w-nP)/nP,0);return{loadTime:u,fullLoadTime:s,fps:f,percentDroppedFrames:v/(l+v)*100,totalFrames:l}}};i.$=class extends N{},i.A=xd,i.B=pq,i.C=function(u){if(Mn==null){let s=u.navigator?u.navigator.userAgent:null;Mn=!!u.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Mn},i.D=nt,i.E=Ss,i.F=class{constructor(u,s){this.target=u,this.mapId=s,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new mAe(()=>this.process()),this.subscription=function(l,f,v,x){return l.addEventListener(f,v,!1),{unsubscribe:()=>{l.removeEventListener(f,v,!1)}}}(this.target,"message",l=>this.receive(l)),this.globalScope=Kr(self)?u:window}registerMessageHandler(u,s){this.messageHandlers[u]=s}sendAsync(u,s){return new Promise((l,f)=>{let v=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[v]={resolve:l,reject:f},s&&s.signal.addEventListener("abort",()=>{delete this.resolveRejects[v];let S={id:v,type:"<cancel>",origin:location.origin,targetMapId:u.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});let x=[],w=Object.assign(Object.assign({},u),{id:v,sourceMapId:this.mapId,origin:location.origin,data:wc(u.data,x)});this.target.postMessage(w,{transfer:x})})}receive(u){let s=u.data,l=s.id;if(!(s.origin!=="file://"&&location.origin!=="file://"&&s.origin!=="resource://android"&&location.origin!=="resource://android"&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId)){if(s.type==="<cancel>"){delete this.tasks[l];let f=this.abortControllers[l];return delete this.abortControllers[l],void(f&&f.abort())}if(Kr(self)||s.mustQueue)return this.tasks[l]=s,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,s)}}process(){if(this.taskQueue.length===0)return;let u=this.taskQueue.shift(),s=this.tasks[u];delete this.tasks[u],this.taskQueue.length>0&&this.invoker.trigger(),s&&this.processTask(u,s)}processTask(u,s){return a(this,void 0,void 0,function*(){if(s.type==="<response>"){let v=this.resolveRejects[u];return delete this.resolveRejects[u],v?void(s.error?v.reject(bc(s.error)):v.resolve(bc(s.data))):void 0}if(!this.messageHandlers[s.type])return void this.completeTask(u,new Error(`Could not find a registered handler for ${s.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let l=bc(s.data),f=new AbortController;this.abortControllers[u]=f;try{let v=yield this.messageHandlers[s.type](s.sourceMapId,l,f);this.completeTask(u,null,v)}catch(v){this.completeTask(u,v)}})}completeTask(u,s,l){let f=[];delete this.abortControllers[u];let v={id:u,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:s?wc(s):null,data:wc(l,f)};this.target.postMessage(v,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},i.G=ri,i.H=function(){var u=new xd(16);return xd!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},i.I=jq,i.J=function(u,s,l){var f,v,x,w,S,C,O,R,k,z,U,Z,X=l[0],ne=l[1],ue=l[2];return s===u?(u[12]=s[0]*X+s[4]*ne+s[8]*ue+s[12],u[13]=s[1]*X+s[5]*ne+s[9]*ue+s[13],u[14]=s[2]*X+s[6]*ne+s[10]*ue+s[14],u[15]=s[3]*X+s[7]*ne+s[11]*ue+s[15]):(v=s[1],x=s[2],w=s[3],S=s[4],C=s[5],O=s[6],R=s[7],k=s[8],z=s[9],U=s[10],Z=s[11],u[0]=f=s[0],u[1]=v,u[2]=x,u[3]=w,u[4]=S,u[5]=C,u[6]=O,u[7]=R,u[8]=k,u[9]=z,u[10]=U,u[11]=Z,u[12]=f*X+S*ne+k*ue+s[12],u[13]=v*X+C*ne+z*ue+s[13],u[14]=x*X+O*ne+U*ue+s[14],u[15]=w*X+R*ne+Z*ue+s[15]),u},i.K=function(u,s,l){var f=l[0],v=l[1],x=l[2];return u[0]=s[0]*f,u[1]=s[1]*f,u[2]=s[2]*f,u[3]=s[3]*f,u[4]=s[4]*v,u[5]=s[5]*v,u[6]=s[6]*v,u[7]=s[7]*v,u[8]=s[8]*x,u[9]=s[9]*x,u[10]=s[10]*x,u[11]=s[11]*x,u[12]=s[12],u[13]=s[13],u[14]=s[14],u[15]=s[15],u},i.L=B4,i.M=function(u,s){let l={};for(let f=0;f<s.length;f++){let v=s[f];v in u&&(l[v]=u[v])}return l},i.N=Dc,i.O=kU,i.P=b,i.Q=NU,i.R=Eo,i.S=So,i.T=cd,i.U=Q,i.V=V,i.W=cr,i.X=Sn,i.Y=I,i.Z=gy,i._=a,i.a=wi,i.a$=function(u,s){var l=u[0],f=u[1],v=u[2],x=u[3],w=u[4],S=u[5],C=u[6],O=u[7],R=u[8],k=u[9],z=u[10],U=u[11],Z=u[12],X=u[13],ne=u[14],ue=u[15],xe=s[0],pe=s[1],ye=s[2],Se=s[3],Re=s[4],Xe=s[5],pt=s[6],He=s[7],Ge=s[8],st=s[9],rt=s[10],et=s[11],Ce=s[12],ut=s[13],at=s[14],wt=s[15];return Math.abs(l-xe)<=$i*Math.max(1,Math.abs(l),Math.abs(xe))&&Math.abs(f-pe)<=$i*Math.max(1,Math.abs(f),Math.abs(pe))&&Math.abs(v-ye)<=$i*Math.max(1,Math.abs(v),Math.abs(ye))&&Math.abs(x-Se)<=$i*Math.max(1,Math.abs(x),Math.abs(Se))&&Math.abs(w-Re)<=$i*Math.max(1,Math.abs(w),Math.abs(Re))&&Math.abs(S-Xe)<=$i*Math.max(1,Math.abs(S),Math.abs(Xe))&&Math.abs(C-pt)<=$i*Math.max(1,Math.abs(C),Math.abs(pt))&&Math.abs(O-He)<=$i*Math.max(1,Math.abs(O),Math.abs(He))&&Math.abs(R-Ge)<=$i*Math.max(1,Math.abs(R),Math.abs(Ge))&&Math.abs(k-st)<=$i*Math.max(1,Math.abs(k),Math.abs(st))&&Math.abs(z-rt)<=$i*Math.max(1,Math.abs(z),Math.abs(rt))&&Math.abs(U-et)<=$i*Math.max(1,Math.abs(U),Math.abs(et))&&Math.abs(Z-Ce)<=$i*Math.max(1,Math.abs(Z),Math.abs(Ce))&&Math.abs(X-ut)<=$i*Math.max(1,Math.abs(X),Math.abs(ut))&&Math.abs(ne-at)<=$i*Math.max(1,Math.abs(ne),Math.abs(at))&&Math.abs(ue-wt)<=$i*Math.max(1,Math.abs(ue),Math.abs(wt))},i.a0=Wt,i.a1=Xq,i.a2=Ne,i.a3=u=>{let s=window.document.createElement("video");return s.muted=!0,new Promise(l=>{s.onloadstart=()=>{l(s)};for(let f of u){let v=window.document.createElement("source");an(f)||(s.crossOrigin="Anonymous"),v.src=f,s.appendChild(v)}})},i.a4=function(){return qe++},i.a5=Ke,i.a6=Id,i.a7=Ng,i.a8=_f,i.a9=VU,i.aA=function(u){if(u.type==="custom")return new dAe(u);switch(u.type){case"background":return new hAe(u);case"circle":return new JIe(u);case"fill":return new mCe(u);case"fill-extrusion":return new PCe(u);case"heatmap":return new eCe(u);case"hillshade":return new rCe(u);case"line":return new FCe(u);case"raster":return new pAe(u);case"symbol":return new yw(u);}},i.aB=Le,i.aC=function(u,s){if(!u)return[{command:"setStyle",args:[s]}];let l=[];try{if(!Xt(u.version,s.version))return[{command:"setStyle",args:[s]}];Xt(u.center,s.center)||l.push({command:"setCenter",args:[s.center]}),Xt(u.zoom,s.zoom)||l.push({command:"setZoom",args:[s.zoom]}),Xt(u.bearing,s.bearing)||l.push({command:"setBearing",args:[s.bearing]}),Xt(u.pitch,s.pitch)||l.push({command:"setPitch",args:[s.pitch]}),Xt(u.sprite,s.sprite)||l.push({command:"setSprite",args:[s.sprite]}),Xt(u.glyphs,s.glyphs)||l.push({command:"setGlyphs",args:[s.glyphs]}),Xt(u.transition,s.transition)||l.push({command:"setTransition",args:[s.transition]}),Xt(u.light,s.light)||l.push({command:"setLight",args:[s.light]}),Xt(u.terrain,s.terrain)||l.push({command:"setTerrain",args:[s.terrain]}),Xt(u.sky,s.sky)||l.push({command:"setSky",args:[s.sky]}),Xt(u.projection,s.projection)||l.push({command:"setProjection",args:[s.projection]});let f={},v=[];(function(w,S,C,O){let R;for(R in S=S||{},w=w||{})Object.prototype.hasOwnProperty.call(w,R)&&(Object.prototype.hasOwnProperty.call(S,R)||pa(R,C,O));for(R in S)Object.prototype.hasOwnProperty.call(S,R)&&(Object.prototype.hasOwnProperty.call(w,R)?Xt(w[R],S[R])||(w[R].type==="geojson"&&S[R].type==="geojson"&&Ts(w,S,R)?Cr(C,{command:"setGeoJSONSourceData",args:[R,S[R].data]}):mo(R,S,C,O)):Ks(R,S,C))})(u.sources,s.sources,v,f);let x=[];u.layers&&u.layers.forEach(w=>{"source"in w&&f[w.source]?l.push({command:"removeLayer",args:[w.id]}):x.push(w)}),l=l.concat(v),function(w,S,C){S=S||[];let O=(w=w||[]).map(Xs),R=S.map(Xs),k=w.reduce(Ys,{}),z=S.reduce(Ys,{}),U=O.slice(),Z=Object.create(null),X,ne,ue,xe,pe;for(let ye=0,Se=0;ye<O.length;ye++)X=O[ye],Object.prototype.hasOwnProperty.call(z,X)?Se++:(Cr(C,{command:"removeLayer",args:[X]}),U.splice(U.indexOf(X,Se),1));for(let ye=0,Se=0;ye<R.length;ye++)X=R[R.length-1-ye],U[U.length-1-ye]!==X&&(Object.prototype.hasOwnProperty.call(k,X)?(Cr(C,{command:"removeLayer",args:[X]}),U.splice(U.lastIndexOf(X,U.length-Se),1)):Se++,xe=U[U.length-ye],Cr(C,{command:"addLayer",args:[z[X],xe]}),U.splice(U.length-ye,0,X),Z[X]=!0);for(let ye=0;ye<R.length;ye++)if(X=R[ye],ne=k[X],ue=z[X],!Z[X]&&!Xt(ne,ue))if(Xt(ne.source,ue.source)&&Xt(ne["source-layer"],ue["source-layer"])&&Xt(ne.type,ue.type)){for(pe in zi(ne.layout,ue.layout,C,X,null,"setLayoutProperty"),zi(ne.paint,ue.paint,C,X,null,"setPaintProperty"),Xt(ne.filter,ue.filter)||Cr(C,{command:"setFilter",args:[X,ue.filter]}),Xt(ne.minzoom,ue.minzoom)&&Xt(ne.maxzoom,ue.maxzoom)||Cr(C,{command:"setLayerZoomRange",args:[X,ue.minzoom,ue.maxzoom]}),ne)Object.prototype.hasOwnProperty.call(ne,pe)&&pe!=="layout"&&pe!=="paint"&&pe!=="filter"&&pe!=="metadata"&&pe!=="minzoom"&&pe!=="maxzoom"&&(pe.indexOf("paint.")===0?zi(ne[pe],ue[pe],C,X,pe.slice(6),"setPaintProperty"):Xt(ne[pe],ue[pe])||Cr(C,{command:"setLayerProperty",args:[X,pe,ue[pe]]}));for(pe in ue)Object.prototype.hasOwnProperty.call(ue,pe)&&!Object.prototype.hasOwnProperty.call(ne,pe)&&pe!=="layout"&&pe!=="paint"&&pe!=="filter"&&pe!=="metadata"&&pe!=="minzoom"&&pe!=="maxzoom"&&(pe.indexOf("paint.")===0?zi(ne[pe],ue[pe],C,X,pe.slice(6),"setPaintProperty"):Xt(ne[pe],ue[pe])||Cr(C,{command:"setLayerProperty",args:[X,pe,ue[pe]]}))}else Cr(C,{command:"removeLayer",args:[X]}),xe=U[U.lastIndexOf(X)+1],Cr(C,{command:"addLayer",args:[ue,xe]})}(x,s.layers,l)}catch(f){console.warn("Unable to compute style diff:",f),l=[{command:"setStyle",args:[s]}]}return l},i.aD=function(u){let s=[],l=u.id;return l===void 0&&s.push({message:`layers.${l}: missing required property "id"`}),u.render===void 0&&s.push({message:`layers.${l}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&s.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),s},i.aE=function u(s,l){if(Array.isArray(s)){if(!Array.isArray(l)||s.length!==l.length)return!1;for(let f=0;f<s.length;f++)if(!u(s[f],l[f]))return!1;return!0}if(typeof s=="object"&&s!==null&&l!==null){if(typeof l!="object"||Object.keys(s).length!==Object.keys(l).length)return!1;for(let f in s)if(!u(s[f],l[f]))return!1;return!0}return s===l},i.aF=Ae,i.aG=Ue,i.aH=class extends vf{constructor(u,s){super(u,s),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},i.aI=aw,i.aJ=class extends vf{constructor(u,s){super(u,s),this.current=$Ie}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let s=1;s<16;s++)if(u[s]!==this.current[s]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},i.aK=P4,i.aL=M4,i.aM=mr,i.aN=class extends vf{constructor(u,s){super(u,s),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},i.aO=class extends vf{constructor(u,s){super(u,s),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},i.aP=function(u,s,l,f,v,x,w){var S=1/(s-l),C=1/(f-v),O=1/(x-w);return u[0]=-2*S,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*C,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*O,u[11]=0,u[12]=(s+l)*S,u[13]=(v+f)*C,u[14]=(w+x)*O,u[15]=1,u},i.aQ=YIe,i.aR=class extends me{},i.aS=UCe,i.aT=class extends we{},i.aU=Aq,i.aV=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},i.aW=W4,i.aX=ui,i.aY=bo,i.aZ=class extends it{},i.a_=function(u,s){return u[0]===s[0]&&u[1]===s[1]&&u[2]===s[2]&&u[3]===s[3]&&u[4]===s[4]&&u[5]===s[5]&&u[6]===s[6]&&u[7]===s[7]&&u[8]===s[8]&&u[9]===s[9]&&u[10]===s[10]&&u[11]===s[11]&&u[12]===s[12]&&u[13]===s[13]&&u[14]===s[14]&&u[15]===s[15]},i.aa=function(u){let s={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,f,v,x)=>{let w=v||x;return s[f]=!w||w.toLowerCase(),""}),s["max-age"]){let l=parseInt(s["max-age"],10);isNaN(l)?delete s["max-age"]:s["max-age"]=l}return s},i.ab=function(u,s){let l=[];for(let f in u)f in s||l.push(f);return l},i.ac=re,i.ad=function(u,s,l){var f=Math.sin(l),v=Math.cos(l),x=s[0],w=s[1],S=s[2],C=s[3],O=s[4],R=s[5],k=s[6],z=s[7];return s!==u&&(u[8]=s[8],u[9]=s[9],u[10]=s[10],u[11]=s[11],u[12]=s[12],u[13]=s[13],u[14]=s[14],u[15]=s[15]),u[0]=x*v+O*f,u[1]=w*v+R*f,u[2]=S*v+k*f,u[3]=C*v+z*f,u[4]=O*v-x*f,u[5]=R*v-w*f,u[6]=k*v-S*f,u[7]=z*v-C*f,u},i.ae=function(u){var s=new xd(16);return s[0]=u[0],s[1]=u[1],s[2]=u[2],s[3]=u[3],s[4]=u[4],s[5]=u[5],s[6]=u[6],s[7]=u[7],s[8]=u[8],s[9]=u[9],s[10]=u[10],s[11]=u[11],s[12]=u[12],s[13]=u[13],s[14]=u[14],s[15]=u[15],s},i.af=lw,i.ag=function(u,s){let l=0,f=0;if(u.kind==="constant")f=u.layoutSize;else if(u.kind!=="source"){let{interpolationType:v,minZoom:x,maxZoom:w}=u,S=v?re(Ui.interpolationFactor(v,s,x,w),0,1):0;u.kind==="camera"?f=Bi.number(u.minSize,u.maxSize,S):l=S}return{uSizeT:l,uSize:f}},i.ai=function(u,{uSize:s,uSizeT:l},{lowerSize:f,upperSize:v}){return u.kind==="source"?f/nu:u.kind==="composite"?Bi.number(f/nu,v/nu,l):s},i.aj=$q,i.ak=function(u,s,l,f){let v=s.y-u.y,x=s.x-u.x,w=f.y-l.y,S=f.x-l.x,C=w*x-S*v;if(C===0)return null;let O=(S*(u.y-l.y)-w*(u.x-l.x))/C;return new b(u.x+O*x,u.y+O*v)},i.al=ZU,i.am=L4,i.an=Tq,i.ao=function(u){let s=1/0,l=1/0,f=-1/0,v=-1/0;for(let x of u)s=Math.min(s,x.x),l=Math.min(l,x.y),f=Math.max(f,x.x),v=Math.max(v,x.y);return[s,l,f,v]},i.ap=On,i.ar=Vq,i.as=function(u,s){var l=s[0],f=s[1],v=s[2],x=s[3],w=s[4],S=s[5],C=s[6],O=s[7],R=s[8],k=s[9],z=s[10],U=s[11],Z=s[12],X=s[13],ne=s[14],ue=s[15],xe=l*S-f*w,pe=l*C-v*w,ye=l*O-x*w,Se=f*C-v*S,Re=f*O-x*S,Xe=v*O-x*C,pt=R*X-k*Z,He=R*ne-z*Z,Ge=R*ue-U*Z,st=k*ne-z*X,rt=k*ue-U*X,et=z*ue-U*ne,Ce=xe*et-pe*rt+ye*st+Se*Ge-Re*He+Xe*pt;return Ce?(u[0]=(S*et-C*rt+O*st)*(Ce=1/Ce),u[1]=(v*rt-f*et-x*st)*Ce,u[2]=(X*Xe-ne*Re+ue*Se)*Ce,u[3]=(z*Re-k*Xe-U*Se)*Ce,u[4]=(C*Ge-w*et-O*He)*Ce,u[5]=(l*et-v*Ge+x*He)*Ce,u[6]=(ne*ye-Z*Xe-ue*pe)*Ce,u[7]=(R*Xe-z*ye+U*pe)*Ce,u[8]=(w*rt-S*Ge+O*pt)*Ce,u[9]=(f*Ge-l*rt-x*pt)*Ce,u[10]=(Z*Re-X*ye+ue*xe)*Ce,u[11]=(k*ye-R*Re-U*xe)*Ce,u[12]=(S*He-w*st-C*pt)*Ce,u[13]=(l*st-f*He+v*pt)*Ce,u[14]=(X*pe-Z*Se-ne*xe)*Ce,u[15]=(R*Se-k*pe+z*xe)*Ce,u):null},i.at=Jq,i.au=Uq,i.av=Qq,i.aw=function(){let u={},s=Ee.$version;for(let l in Ee.$root){let f=Ee.$root[l];if(f.required){let v=null;v=l==="version"?s:f.type==="array"?[]:{},v!=null&&(u[l]=v)}}return u},i.ax=Yg,i.ay=pn,i.az=function(u){u=u.slice();let s=Object.create(null);for(let l=0;l<u.length;l++)s[u[l].id]=u[l];for(let l=0;l<u.length;l++)"ref"in u[l]&&(u[l]=Hs(u[l],s[u[l].ref]));return u},i.b=sr,i.b0=function(u,s){return u[0]=s[0],u[1]=s[1],u[2]=s[2],u[3]=s[3],u[4]=s[4],u[5]=s[5],u[6]=s[6],u[7]=s[7],u[8]=s[8],u[9]=s[9],u[10]=s[10],u[11]=s[11],u[12]=s[12],u[13]=s[13],u[14]=s[14],u[15]=s[15],u},i.b1=function(u,s,l){return u[0]=s[0]*l[0],u[1]=s[1]*l[1],u[2]=s[2]*l[2],u[3]=s[3]*l[3],u},i.b2=function(u,s){return u[0]*s[0]+u[1]*s[1]+u[2]*s[2]+u[3]*s[3]},i.b3=se,i.b4=jU,i.b5=FU,i.b6=function(u,s,l,f,v){var x,w=1/Math.tan(s/2);return u[0]=w/l,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=w,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,v!=null&&v!==1/0?(u[10]=(v+f)*(x=1/(f-v)),u[14]=2*v*f*x):(u[10]=-1,u[14]=-2*f),u},i.b7=function(u,s,l){var f=Math.sin(l),v=Math.cos(l),x=s[4],w=s[5],S=s[6],C=s[7],O=s[8],R=s[9],k=s[10],z=s[11];return s!==u&&(u[0]=s[0],u[1]=s[1],u[2]=s[2],u[3]=s[3],u[12]=s[12],u[13]=s[13],u[14]=s[14],u[15]=s[15]),u[4]=x*v+O*f,u[5]=w*v+R*f,u[6]=S*v+k*f,u[7]=C*v+z*f,u[8]=O*v-x*f,u[9]=R*v-w*f,u[10]=k*v-S*f,u[11]=z*v-C*f,u},i.b8=$,i.b9=H,i.bA=fU,i.bB=function(u){return u.message===nn},i.bC=dc,i.bD=_a,i.ba=function(u){return u*Math.PI/180},i.bb=function(u,s){let{x:l,y:f}=gy.fromLngLat(s);return!(u<0||u>25||f<0||f>=1||l<0||l>=1)},i.bc=function(u,s){return u[0]=s[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=s[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=s[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},i.bd=class extends D{},i.be=Hq,i.bf=SAe,i.bh=Dt,i.bi=function(u,s){wi.REGISTERED_PROTOCOLS[u]=s},i.bj=function(u){delete wi.REGISTERED_PROTOCOLS[u]},i.bk=function(u,s){let l={};for(let v=0;v<u.length;v++){let x=s&&s[u[v].id]||Z1(u[v]);s&&(s[u[v].id]=x);let w=l[x];w||(w=l[x]=[]),w.push(u[v])}let f=[];for(let v in l)f.push(l[v]);return f},i.bl=tt,i.bm=UU,i.bn=$U,i.bo=wU,i.bp=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=Sn/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;let s=u.bucket.layers[0],l=s.layout,f=s._unevaluatedLayout._values,v={layoutIconSize:f["icon-size"].possiblyEvaluate(new Rr(u.bucket.zoom+1),u.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new Rr(u.bucket.zoom+1),u.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new Rr(18))};if(u.bucket.textSizeData.kind==="composite"){let{minZoom:O,maxZoom:R}=u.bucket.textSizeData;v.compositeTextSizes=[f["text-size"].possiblyEvaluate(new Rr(O),u.canonical),f["text-size"].possiblyEvaluate(new Rr(R),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){let{minZoom:O,maxZoom:R}=u.bucket.iconSizeData;v.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new Rr(O),u.canonical),f["icon-size"].possiblyEvaluate(new Rr(R),u.canonical)]}let x=l.get("text-line-height")*On,w=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",S=l.get("text-keep-upright"),C=l.get("text-size");for(let O of u.bucket.features){let R=l.get("text-font").evaluate(O,{},u.canonical).join(","),k=C.evaluate(O,{},u.canonical),z=v.layoutTextSize.evaluate(O,{},u.canonical),U=v.layoutIconSize.evaluate(O,{},u.canonical),Z={horizontal:{},vertical:void 0},X=O.text,ne,ue=[0,0];if(X){let ye=X.toString(),Se=l.get("text-letter-spacing").evaluate(O,{},u.canonical)*On,Re=dq(ye)?Se:0,Xe=l.get("text-anchor").evaluate(O,{},u.canonical),pt=r5(s,O,u.canonical);if(!pt){let rt=l.get("text-radial-offset").evaluate(O,{},u.canonical);ue=rt?t5(Xe,[rt*On,Yq]):l.get("text-offset").evaluate(O,{},u.canonical).map(et=>et*On)}let He=w?"center":l.get("text-justify").evaluate(O,{},u.canonical),Ge=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(O,{},u.canonical)*On:1/0,st=()=>{u.bucket.allowVerticalPlacement&&Jg(ye)&&(Z.vertical=mw(X,u.glyphMap,u.glyphPositions,u.imagePositions,R,Ge,x,Xe,"left",Re,ue,i.ah.vertical,!0,z,k))};if(!w&&pt){let rt=new Set;if(He==="auto")for(let Ce=0;Ce<pt.values.length;Ce+=2)rt.add(Jq(pt.values[Ce]));else rt.add(He);let et=!1;for(let Ce of rt)if(!Z.horizontal[Ce])if(et)Z.horizontal[Ce]=Z.horizontal[0];else{let ut=mw(X,u.glyphMap,u.glyphPositions,u.imagePositions,R,Ge,x,"center",Ce,Re,ue,i.ah.horizontal,!1,z,k);ut&&(Z.horizontal[Ce]=ut,et=ut.positionedLines.length===1)}st()}else{He==="auto"&&(He=Jq(Xe));let rt=mw(X,u.glyphMap,u.glyphPositions,u.imagePositions,R,Ge,x,Xe,He,Re,ue,i.ah.horizontal,!1,z,k);rt&&(Z.horizontal[He]=rt),st(),Jg(ye)&&w&&S&&(Z.vertical=mw(X,u.glyphMap,u.glyphPositions,u.imagePositions,R,Ge,x,Xe,He,Re,ue,i.ah.vertical,!1,z,k))}}let xe=!1;if(O.icon&&O.icon.name){let ye=u.imageMap[O.icon.name];ye&&(ne=oAe(u.imagePositions[O.icon.name],l.get("icon-offset").evaluate(O,{},u.canonical),l.get("icon-anchor").evaluate(O,{},u.canonical)),xe=!!ye.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=xe:u.bucket.sdfIcons!==xe&&Rt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ye.pixelRatio!==u.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}let pe=i5(Z.horizontal)||Z.vertical;u.bucket.iconsInText=!!pe&&pe.iconsInText,(pe||ne)&&bAe(u.bucket,O,Z,ne,u.imageMap,v,z,U,ue,xe,u.canonical)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},i.bq=kq,i.br=Rq,i.bs=Lq,i.bt=Mc,i.bu=Fq,i.bv=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},i.bw=function(u,s,l,f,v){return a(this,void 0,void 0,function*(){if(V())try{return yield cr(u,s,l,f,v)}catch(x){}return function(x,w,S,C,O){let R=x.width,k=x.height;Kt&&rn||(Kt=new OffscreenCanvas(R,k),rn=Kt.getContext("2d",{willReadFrequently:!0})),Kt.width=R,Kt.height=k,rn.drawImage(x,0,0,R,k);let z=rn.getImageData(w,S,C,O);return rn.clearRect(0,0,R,k),z.data}(u,s,l,f,v)})},i.bx=BU,i.by=h,i.bz=p,i.c=fa,i.d=u=>a(void 0,void 0,void 0,function*(){if(u.byteLength===0)return createImageBitmap(new ImageData(1,1));let s=new Blob([new Uint8Array(u)],{type:"image/png"});try{return createImageBitmap(s)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),i.e=Ie,i.f=u=>new Promise((s,l)=>{let f=new Image;f.onload=()=>{s(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame(()=>{f.src=lr})},f.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let v=new Blob([new Uint8Array(u)],{type:"image/png"});f.src=u.byteLength?URL.createObjectURL(v):lr}),i.g=Gn,i.h=(u,s)=>ni(Ie(u,{type:"json"}),s),i.i=Kr,i.j=Wn,i.k=Da,i.l=(u,s)=>ni(Ie(u,{type:"arrayBuffer"}),s),i.m=ni,i.n=function(u){return new Fq(u).readFields(QCe,[])},i.o=sy,i.p=xU,i.q=_,i.r=fq,i.s=an,i.t=Kg,i.u=rl,i.v=Ee,i.w=Rt,i.x=function([u,s,l]){return s+=90,s*=Math.PI/180,l*=Math.PI/180,{x:u*Math.cos(s)*Math.sin(l),y:u*Math.sin(s)*Math.sin(l),z:u*Math.cos(l)}},i.y=Bi,i.z=Rr}),r("worker",["./shared"],function(i){"use strict";class a{constructor(B){this.keyCache={},B&&this.replace(B)}replace(B){this._layerConfigs={},this._layers={},this.update(B,[])}update(B,j){for(let ie of B){this._layerConfigs[ie.id]=ie;let de=this._layers[ie.id]=i.aA(ie);de._featureFilter=i.a7(de.filter),this.keyCache[ie.id]&&delete this.keyCache[ie.id]}for(let ie of j)delete this.keyCache[ie],delete this._layerConfigs[ie],delete this._layers[ie];this.familiesBySource={};let J=i.bk(Object.values(this._layerConfigs),this.keyCache);for(let ie of J){let de=ie.map(be=>this._layers[be.id]),ve=de[0];if(ve.visibility==="none")continue;let _e=ve.source||"",he=this.familiesBySource[_e];he||(he=this.familiesBySource[_e]={});let Te=ve.sourceLayer||"_geojsonTileLayer",Me=he[Te];Me||(Me=he[Te]=[]),Me.push(de)}}}class h{constructor(B){let j={},J=[];for(let _e in B){let he=B[_e],Te=j[_e]={};for(let Me in he){let be=he[+Me];if(!be||be.bitmap.width===0||be.bitmap.height===0)continue;let je={x:0,y:0,w:be.bitmap.width+2,h:be.bitmap.height+2};J.push(je),Te[Me]={rect:je,metrics:be.metrics}}}let{w:ie,h:de}=i.p(J),ve=new i.o({width:ie||1,height:de||1});for(let _e in B){let he=B[_e];for(let Te in he){let Me=he[+Te];if(!Me||Me.bitmap.width===0||Me.bitmap.height===0)continue;let be=j[_e][Te].rect;i.o.copy(Me.bitmap,ve,{x:0,y:0},{x:be.x+1,y:be.y+1},Me.bitmap)}}this.image=ve,this.positions=j}}i.bl("GlyphAtlas",h);class p{constructor(B){this.tileID=new i.S(B.tileID.overscaledZ,B.tileID.wrap,B.tileID.canonical.z,B.tileID.canonical.x,B.tileID.canonical.y),this.uid=B.uid,this.zoom=B.zoom,this.pixelRatio=B.pixelRatio,this.tileSize=B.tileSize,this.source=B.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=B.showCollisionBoxes,this.collectResourceTiming=!!B.collectResourceTiming,this.returnDependencies=!!B.returnDependencies,this.promoteId=B.promoteId,this.inFlightDependencies=[]}parse(B,j,J,ie){return i._(this,void 0,void 0,function*(){this.status="parsing",this.data=B,this.collisionBoxArray=new i.a5;let de=new i.bm(Object.keys(B.layers).sort()),ve=new i.bn(this.tileID,this.promoteId);ve.bucketLayerIDs=[];let _e={},he={featureIndex:ve,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:J},Te=j.familiesBySource[this.source];for(let Lt in Te){let dr=B.layers[Lt];if(!dr)continue;dr.version===1&&i.w(`Vector tile source "${this.source}" layer "${Lt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let jr=de.encode(Lt),Nn=[];for(let Hn=0;Hn<dr.length;Hn++){let bi=dr.feature(Hn),nc=ve.getId(bi,Lt);Nn.push({feature:bi,id:nc,index:Hn,sourceLayerIndex:jr})}for(let Hn of Te[Lt]){let bi=Hn[0];bi.source!==this.source&&i.w(`layer.source = ${bi.source} does not equal this.source = ${this.source}`),bi.minzoom&&this.zoom<Math.floor(bi.minzoom)||bi.maxzoom&&this.zoom>=bi.maxzoom||bi.visibility!=="none"&&(g(Hn,this.zoom,J),(_e[bi.id]=bi.createBucket({index:ve.bucketLayerIDs.length,layers:Hn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:jr,sourceID:this.source})).populate(Nn,he,this.tileID.canonical),ve.bucketLayerIDs.push(Hn.map(nc=>nc.id)))}}let Me=i.aF(he.glyphDependencies,Lt=>Object.keys(Lt).map(Number));this.inFlightDependencies.forEach(Lt=>Lt==null?void 0:Lt.abort()),this.inFlightDependencies=[];let be=Promise.resolve({});if(Object.keys(Me).length){let Lt=new AbortController;this.inFlightDependencies.push(Lt),be=ie.sendAsync({type:"GG",data:{stacks:Me,source:this.source,tileID:this.tileID,type:"glyphs"}},Lt)}let je=Object.keys(he.iconDependencies),lt=Promise.resolve({});if(je.length){let Lt=new AbortController;this.inFlightDependencies.push(Lt),lt=ie.sendAsync({type:"GI",data:{icons:je,source:this.source,tileID:this.tileID,type:"icons"}},Lt)}let ht=Object.keys(he.patternDependencies),Qt=Promise.resolve({});if(ht.length){let Lt=new AbortController;this.inFlightDependencies.push(Lt),Qt=ie.sendAsync({type:"GI",data:{icons:ht,source:this.source,tileID:this.tileID,type:"patterns"}},Lt)}let[Ct,er,jt]=yield Promise.all([be,lt,Qt]),bn=new h(Ct),Xr=new i.bo(er,jt);for(let Lt in _e){let dr=_e[Lt];dr instanceof i.a6?(g(dr.layers,this.zoom,J),i.bp({bucket:dr,glyphMap:Ct,glyphPositions:bn.positions,imageMap:er,imagePositions:Xr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):dr.hasPattern&&(dr instanceof i.bq||dr instanceof i.br||dr instanceof i.bs)&&(g(dr.layers,this.zoom,J),dr.addFeatures(he,this.tileID.canonical,Xr.patternPositions))}return this.status="done",{buckets:Object.values(_e).filter(Lt=>!Lt.isEmpty()),featureIndex:ve,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:bn.image,imageAtlas:Xr,glyphMap:this.returnDependencies?Ct:null,iconMap:this.returnDependencies?er:null,glyphPositions:this.returnDependencies?bn.positions:null}})}}function g(oe,B,j){let J=new i.z(B);for(let ie of oe)ie.recalculate(J,j)}class b{constructor(B,j,J){this.actor=B,this.layerIndex=j,this.availableImages=J,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(B,j){return i._(this,void 0,void 0,function*(){let J=yield i.l(B.request,j);try{return{vectorTile:new i.bt.VectorTile(new i.bu(J.data)),rawData:J.data,cacheControl:J.cacheControl,expires:J.expires}}catch(ie){let de=new Uint8Array(J.data),ve=`Unable to parse the tile at ${B.request.url}, `;throw ve+=de[0]===31&&de[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ie.message}`,new Error(ve)}})}loadTile(B){return i._(this,void 0,void 0,function*(){let j=B.uid,J=!!(B&&B.request&&B.request.collectResourceTiming)&&new i.bv(B.request),ie=new p(B);this.loading[j]=ie;let de=new AbortController;ie.abort=de;try{let ve=yield this.loadVectorTile(B,de);if(delete this.loading[j],!ve)return null;let _e=ve.rawData,he={};ve.expires&&(he.expires=ve.expires),ve.cacheControl&&(he.cacheControl=ve.cacheControl);let Te={};if(J){let be=J.finish();be&&(Te.resourceTiming=JSON.parse(JSON.stringify(be)))}ie.vectorTile=ve.vectorTile;let Me=ie.parse(ve.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[j]=ie,this.fetching[j]={rawTileData:_e,cacheControl:he,resourceTiming:Te};try{let be=yield Me;return i.e({rawTileData:_e.slice(0)},be,he,Te)}finally{delete this.fetching[j]}}catch(ve){throw delete this.loading[j],ie.status="done",this.loaded[j]=ie,ve}})}reloadTile(B){return i._(this,void 0,void 0,function*(){let j=B.uid;if(!this.loaded||!this.loaded[j])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let J=this.loaded[j];if(J.showCollisionBoxes=B.showCollisionBoxes,J.status==="parsing"){let ie=yield J.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor),de;if(this.fetching[j]){let{rawTileData:ve,cacheControl:_e,resourceTiming:he}=this.fetching[j];delete this.fetching[j],de=i.e({rawTileData:ve.slice(0)},ie,_e,he)}else de=ie;return de}if(J.status==="done"&&J.vectorTile)return J.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(B){return i._(this,void 0,void 0,function*(){let j=this.loading,J=B.uid;j&&j[J]&&j[J].abort&&(j[J].abort.abort(),delete j[J])})}removeTile(B){return i._(this,void 0,void 0,function*(){this.loaded&&this.loaded[B.uid]&&delete this.loaded[B.uid]})}}class E{constructor(){this.loaded={}}loadTile(B){return i._(this,void 0,void 0,function*(){let{uid:j,encoding:J,rawImageData:ie,redFactor:de,greenFactor:ve,blueFactor:_e,baseShift:he}=B,Te=ie.width+2,Me=ie.height+2,be=i.b(ie)?new i.R({width:Te,height:Me},(yield i.bw(ie,-1,-1,Te,Me))):ie,je=new i.bx(j,be,J,de,ve,_e,he);return this.loaded=this.loaded||{},this.loaded[j]=je,je})}removeTile(B){let j=this.loaded,J=B.uid;j&&j[J]&&delete j[J]}}function q(oe,B){if(oe.length!==0){P(oe[0],B);for(var j=1;j<oe.length;j++)P(oe[j],!B)}}function P(oe,B){for(var j=0,J=0,ie=0,de=oe.length,ve=de-1;ie<de;ve=ie++){var _e=(oe[ie][0]-oe[ve][0])*(oe[ve][1]+oe[ie][1]),he=j+_e;J+=Math.abs(j)>=Math.abs(_e)?j-he+_e:_e-he+j,j=he}j+J>=0!=!!B&&oe.reverse()}var L=i.by(function oe(B,j){var J,ie=B&&B.type;if(ie==="FeatureCollection")for(J=0;J<B.features.length;J++)oe(B.features[J],j);else if(ie==="GeometryCollection")for(J=0;J<B.geometries.length;J++)oe(B.geometries[J],j);else if(ie==="Feature")oe(B.geometry,j);else if(ie==="Polygon")q(B.coordinates,j);else if(ie==="MultiPolygon")for(J=0;J<B.coordinates.length;J++)q(B.coordinates[J],j);return B});let W=i.bt.VectorTileFeature.prototype.toGeoJSON;var Q={exports:{}},V=i.bz,$=i.bt.VectorTileFeature,H=re;function re(oe,B){this.options=B||{},this.features=oe,this.length=oe.length}function se(oe,B){this.id=typeof oe.id=="number"?oe.id:void 0,this.type=oe.type,this.rawGeometry=oe.type===1?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=B||4096}re.prototype.feature=function(oe){return new se(this.features[oe],this.options.extent)},se.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var B=0;B<oe.length;B++){for(var j=oe[B],J=[],ie=0;ie<j.length;ie++)J.push(new V(j[ie][0],j[ie][1]));this.geometry.push(J)}return this.geometry},se.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,B=1/0,j=-1/0,J=1/0,ie=-1/0,de=0;de<oe.length;de++)for(var ve=oe[de],_e=0;_e<ve.length;_e++){var he=ve[_e];B=Math.min(B,he.x),j=Math.max(j,he.x),J=Math.min(J,he.y),ie=Math.max(ie,he.y)}return[B,J,j,ie]},se.prototype.toGeoJSON=$.prototype.toGeoJSON;var Ie=i.bA,qe=H;function Ae(oe){var B=new Ie;return function(j,J){for(var ie in j.layers)J.writeMessage(3,Ue,j.layers[ie])}(oe,B),B.finish()}function Ue(oe,B){var j;B.writeVarintField(15,oe.version||1),B.writeStringField(1,oe.name||""),B.writeVarintField(5,oe.extent||4096);var J={keys:[],values:[],keycache:{},valuecache:{}};for(j=0;j<oe.length;j++)J.feature=oe.feature(j),B.writeMessage(2,Le,J);var ie=J.keys;for(j=0;j<ie.length;j++)B.writeStringField(3,ie[j]);var de=J.values;for(j=0;j<de.length;j++)B.writeMessage(4,Mn,de[j])}function Le(oe,B){var j=oe.feature;j.id!==void 0&&B.writeVarintField(1,j.id),B.writeMessage(2,$t,oe),B.writeVarintField(3,j.type),B.writeMessage(4,Kr,j)}function $t(oe,B){var j=oe.feature,J=oe.keys,ie=oe.values,de=oe.keycache,ve=oe.valuecache;for(var _e in j.properties){var he=j.properties[_e],Te=de[_e];if(he!==null){Te===void 0&&(J.push(_e),de[_e]=Te=J.length-1),B.writeVarint(Te);var Me=typeof he;Me!=="string"&&Me!=="boolean"&&Me!=="number"&&(he=JSON.stringify(he));var be=Me+":"+he,je=ve[be];je===void 0&&(ie.push(he),ve[be]=je=ie.length-1),B.writeVarint(je)}}}function Rt(oe,B){return(B<<3)+(7&oe)}function ir(oe){return oe<<1^oe>>31}function Kr(oe,B){for(var j=oe.loadGeometry(),J=oe.type,ie=0,de=0,ve=j.length,_e=0;_e<ve;_e++){var he=j[_e],Te=1;J===1&&(Te=he.length),B.writeVarint(Rt(1,Te));for(var Me=J===3?he.length-1:he.length,be=0;be<Me;be++){be===1&&J!==1&&B.writeVarint(Rt(2,Me-1));var je=he[be].x-ie,lt=he[be].y-de;B.writeVarint(ir(je)),B.writeVarint(ir(lt)),ie+=je,de+=lt}J===3&&B.writeVarint(Rt(7,1))}}function Mn(oe,B){var j=typeof oe;j==="string"?B.writeStringField(1,oe):j==="boolean"?B.writeBooleanField(7,oe):j==="number"&&(oe%1!=0?B.writeDoubleField(3,oe):oe<0?B.writeSVarintField(6,oe):B.writeVarintField(5,oe))}Q.exports=Ae,Q.exports.fromVectorTileJs=Ae,Q.exports.fromGeojsonVt=function(oe,B){B=B||{};var j={};for(var J in oe)j[J]=new qe(oe[J].features,B),j[J].name=J,j[J].version=B.version,j[J].extent=B.extent;return Ae({layers:j})},Q.exports.GeoJSONWrapper=qe;var sr=i.by(Q.exports);let lr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:oe=>oe},cr=Math.fround||(Kt=new Float32Array(1),oe=>(Kt[0]=+oe,Kt[0]));var Kt;let rn=3,nn=5,fa=6;class wi{constructor(B){this.options=Object.assign(Object.create(lr),B),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(B){let{log:j,minZoom:J,maxZoom:ie}=this.options;j&&console.time("total time");let de=`prepare ${B.length} points`;j&&console.time(de),this.points=B;let ve=[];for(let he=0;he<B.length;he++){let Te=B[he];if(!Te.geometry)continue;let[Me,be]=Te.geometry.coordinates,je=cr(Dt(Me)),lt=cr(pn(be));ve.push(je,lt,1/0,he,-1,1),this.options.reduce&&ve.push(0)}let _e=this.trees[ie+1]=this._createTree(ve);j&&console.timeEnd(de);for(let he=ie;he>=J;he--){let Te=+Date.now();_e=this.trees[he]=this._createTree(this._cluster(_e,he)),j&&console.log("z%d: %d clusters in %dms",he,_e.numItems,+Date.now()-Te)}return j&&console.timeEnd("total time"),this}getClusters(B,j){let J=((B[0]+180)%360+360)%360-180,ie=Math.max(-90,Math.min(90,B[1])),de=B[2]===180?180:((B[2]+180)%360+360)%360-180,ve=Math.max(-90,Math.min(90,B[3]));if(B[2]-B[0]>=360)J=-180,de=180;else if(J>de){let be=this.getClusters([J,ie,180,ve],j),je=this.getClusters([-180,ie,de,ve],j);return be.concat(je)}let _e=this.trees[this._limitZoom(j)],he=_e.range(Dt(J),pn(ve),Dt(de),pn(ie)),Te=_e.data,Me=[];for(let be of he){let je=this.stride*be;Me.push(Te[je+nn]>1?Gn(Te,je,this.clusterProps):this.points[Te[je+rn]])}return Me}getChildren(B){let j=this._getOriginId(B),J=this._getOriginZoom(B),ie="No cluster with the specified id.",de=this.trees[J];if(!de)throw new Error(ie);let ve=de.data;if(j*this.stride>=ve.length)throw new Error(ie);let _e=this.options.radius/(this.options.extent*Math.pow(2,J-1)),he=de.within(ve[j*this.stride],ve[j*this.stride+1],_e),Te=[];for(let Me of he){let be=Me*this.stride;ve[be+4]===B&&Te.push(ve[be+nn]>1?Gn(ve,be,this.clusterProps):this.points[ve[be+rn]])}if(Te.length===0)throw new Error(ie);return Te}getLeaves(B,j,J){let ie=[];return this._appendLeaves(ie,B,j=j||10,J=J||0,0),ie}getTile(B,j,J){let ie=this.trees[this._limitZoom(B)],de=Math.pow(2,B),{extent:ve,radius:_e}=this.options,he=_e/ve,Te=(J-he)/de,Me=(J+1+he)/de,be={features:[]};return this._addTileFeatures(ie.range((j-he)/de,Te,(j+1+he)/de,Me),ie.data,j,J,de,be),j===0&&this._addTileFeatures(ie.range(1-he/de,Te,1,Me),ie.data,de,J,de,be),j===de-1&&this._addTileFeatures(ie.range(0,Te,he/de,Me),ie.data,-1,J,de,be),be.features.length?be:null}getClusterExpansionZoom(B){let j=this._getOriginZoom(B)-1;for(;j<=this.options.maxZoom;){let J=this.getChildren(B);if(j++,J.length!==1)break;B=J[0].properties.cluster_id}return j}_appendLeaves(B,j,J,ie,de){let ve=this.getChildren(j);for(let _e of ve){let he=_e.properties;if(he&&he.cluster?de+he.point_count<=ie?de+=he.point_count:de=this._appendLeaves(B,he.cluster_id,J,ie,de):de<ie?de++:B.push(_e),B.length===J)break}return de}_createTree(B){let j=new i.av(B.length/this.stride|0,this.options.nodeSize,Float32Array);for(let J=0;J<B.length;J+=this.stride)j.add(B[J],B[J+1]);return j.finish(),j.data=B,j}_addTileFeatures(B,j,J,ie,de,ve){for(let _e of B){let he=_e*this.stride,Te=j[he+nn]>1,Me,be,je;if(Te)Me=ri(j,he,this.clusterProps),be=j[he],je=j[he+1];else{let Qt=this.points[j[he+rn]];Me=Qt.properties;let[Ct,er]=Qt.geometry.coordinates;be=Dt(Ct),je=pn(er)}let lt={type:1,geometry:[[Math.round(this.options.extent*(be*de-J)),Math.round(this.options.extent*(je*de-ie))]],tags:Me},ht;ht=Te||this.options.generateId?j[he+rn]:this.points[j[he+rn]].id,ht!==void 0&&(lt.id=ht),ve.features.push(lt)}}_limitZoom(B){return Math.max(this.options.minZoom,Math.min(Math.floor(+B),this.options.maxZoom+1))}_cluster(B,j){let{radius:J,extent:ie,reduce:de,minPoints:ve}=this.options,_e=J/(ie*Math.pow(2,j)),he=B.data,Te=[],Me=this.stride;for(let be=0;be<he.length;be+=Me){if(he[be+2]<=j)continue;he[be+2]=j;let je=he[be],lt=he[be+1],ht=B.within(he[be],he[be+1],_e),Qt=he[be+nn],Ct=Qt;for(let er of ht){let jt=er*Me;he[jt+2]>j&&(Ct+=he[jt+nn])}if(Ct>Qt&&Ct>=ve){let er,jt=je*Qt,bn=lt*Qt,Xr=-1,Lt=((be/Me|0)<<5)+(j+1)+this.points.length;for(let dr of ht){let jr=dr*Me;if(he[jr+2]<=j)continue;he[jr+2]=j;let Nn=he[jr+nn];jt+=he[jr]*Nn,bn+=he[jr+1]*Nn,he[jr+4]=Lt,de&&(er||(er=this._map(he,be,!0),Xr=this.clusterProps.length,this.clusterProps.push(er)),de(er,this._map(he,jr)))}he[be+4]=Lt,Te.push(jt/Ct,bn/Ct,1/0,Lt,-1,Ct),de&&Te.push(Xr)}else{for(let er=0;er<Me;er++)Te.push(he[be+er]);if(Ct>1)for(let er of ht){let jt=er*Me;if(!(he[jt+2]<=j)){he[jt+2]=j;for(let bn=0;bn<Me;bn++)Te.push(he[jt+bn])}}}}return Te}_getOriginId(B){return B-this.points.length>>5}_getOriginZoom(B){return(B-this.points.length)%32}_map(B,j,J){if(B[j+nn]>1){let ve=this.clusterProps[B[j+fa]];return J?Object.assign({},ve):ve}let ie=this.points[B[j+rn]].properties,de=this.options.map(ie);return J&&de===ie?Object.assign({},de):de}}function Gn(oe,B,j){return{type:"Feature",id:oe[B+rn],properties:ri(oe,B,j),geometry:{type:"Point",coordinates:[(J=oe[B],360*(J-.5)),ni(oe[B+1])]}};var J}function ri(oe,B,j){let J=oe[B+nn],ie=J>=1e4?`${Math.round(J/1e3)}k`:J>=1e3?Math.round(J/100)/10+"k":J,de=oe[B+fa],ve=de===-1?{}:Object.assign({},j[de]);return Object.assign(ve,{cluster:!0,cluster_id:oe[B+rn],point_count:J,point_count_abbreviated:ie})}function Dt(oe){return oe/360+.5}function pn(oe){let B=Math.sin(oe*Math.PI/180),j=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return j<0?0:j>1?1:j}function ni(oe){let B=(180-360*oe)*Math.PI/180;return 360*Math.atan(Math.exp(B))/Math.PI-90}function an(oe,B,j,J){let ie=J,de=B+(j-B>>1),ve,_e=j-B,he=oe[B],Te=oe[B+1],Me=oe[j],be=oe[j+1];for(let je=B+3;je<j;je+=3){let lt=Es(oe[je],oe[je+1],he,Te,Me,be);if(lt>ie)ve=je,ie=lt;else if(lt===ie){let ht=Math.abs(je-de);ht<_e&&(ve=je,_e=ht)}}ie>J&&(ve-B>3&&an(oe,B,ve,J),oe[ve+2]=ie,j-ve>3&&an(oe,ve,j,J))}function Es(oe,B,j,J,ie,de){let ve=ie-j,_e=de-J;if(ve!==0||_e!==0){let he=((oe-j)*ve+(B-J)*_e)/(ve*ve+_e*_e);he>1?(j=ie,J=de):he>0&&(j+=ve*he,J+=_e*he)}return ve=oe-j,_e=B-J,ve*ve+_e*_e}function wn(oe,B,j,J){let ie={id:oe==null?null:oe,type:B,geometry:j,tags:J,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(B==="Point"||B==="MultiPoint"||B==="LineString")Da(ie,j);else if(B==="Polygon")Da(ie,j[0]);else if(B==="MultiLineString")for(let de of j)Da(ie,de);else if(B==="MultiPolygon")for(let de of j)Da(ie,de[0]);return ie}function Da(oe,B){for(let j=0;j<B.length;j+=3)oe.minX=Math.min(oe.minX,B[j]),oe.minY=Math.min(oe.minY,B[j+1]),oe.maxX=Math.max(oe.maxX,B[j]),oe.maxY=Math.max(oe.maxY,B[j+1])}function Wn(oe,B,j,J){if(!B.geometry)return;let ie=B.geometry.coordinates;if(ie&&ie.length===0)return;let de=B.geometry.type,ve=Math.pow(j.tolerance/((1<<j.maxZoom)*j.extent),2),_e=[],he=B.id;if(j.promoteId?he=B.properties[j.promoteId]:j.generateId&&(he=J||0),de==="Point")Ss(ie,_e);else if(de==="MultiPoint")for(let Te of ie)Ss(Te,_e);else if(de==="LineString")Ee(ie,_e,ve,!1);else if(de==="MultiLineString"){if(j.lineMetrics){for(let Te of ie)_e=[],Ee(Te,_e,ve,!1),oe.push(wn(he,"LineString",_e,B.properties));return}No(ie,_e,ve,!1)}else if(de==="Polygon")No(ie,_e,ve,!0);else{if(de!=="MultiPolygon"){if(de==="GeometryCollection"){for(let Te of B.geometry.geometries)Wn(oe,{id:he,geometry:Te,properties:B.properties},j,J);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Te of ie){let Me=[];No(Te,Me,ve,!0),_e.push(Me)}}oe.push(wn(he,de,_e,B.properties))}function Ss(oe,B){B.push(Hs(oe[0]),Xt(oe[1]),0)}function Ee(oe,B,j,J){let ie,de,ve=0;for(let he=0;he<oe.length;he++){let Te=Hs(oe[he][0]),Me=Xt(oe[he][1]);B.push(Te,Me,0),he>0&&(ve+=J?(ie*Me-Te*de)/2:Math.sqrt(Math.pow(Te-ie,2)+Math.pow(Me-de,2))),ie=Te,de=Me}let _e=B.length-3;B[2]=1,an(B,0,_e,j),B[_e+2]=1,B.size=Math.abs(ve),B.start=0,B.end=B.size}function No(oe,B,j,J){for(let ie=0;ie<oe.length;ie++){let de=[];Ee(oe[ie],de,j,J),B.push(de)}}function Hs(oe){return oe/360+.5}function Xt(oe){let B=Math.sin(oe*Math.PI/180),j=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return j<0?0:j>1?1:j}function Cr(oe,B,j,J,ie,de,ve,_e){if(J/=B,de>=(j/=B)&&ve<J)return oe;if(ve<j||de>=J)return null;let he=[];for(let Te of oe){let Me=Te.geometry,be=Te.type,je=ie===0?Te.minX:Te.minY,lt=ie===0?Te.maxX:Te.maxY;if(je>=j&&lt<J){he.push(Te);continue}if(lt<j||je>=J)continue;let ht=[];if(be==="Point"||be==="MultiPoint")Ks(Me,ht,j,J,ie);else if(be==="LineString")pa(Me,ht,j,J,ie,!1,_e.lineMetrics);else if(be==="MultiLineString")Ts(Me,ht,j,J,ie,!1);else if(be==="Polygon")Ts(Me,ht,j,J,ie,!0);else if(be==="MultiPolygon")for(let Qt of Me){let Ct=[];Ts(Qt,Ct,j,J,ie,!0),Ct.length&&ht.push(Ct)}if(ht.length){if(_e.lineMetrics&&be==="LineString"){for(let Qt of ht)he.push(wn(Te.id,be,Qt,Te.tags));continue}be!=="LineString"&&be!=="MultiLineString"||(ht.length===1?(be="LineString",ht=ht[0]):be="MultiLineString"),be!=="Point"&&be!=="MultiPoint"||(be=ht.length===3?"Point":"MultiPoint"),he.push(wn(Te.id,be,ht,Te.tags))}}return he.length?he:null}function Ks(oe,B,j,J,ie){for(let de=0;de<oe.length;de+=3){let ve=oe[de+ie];ve>=j&&ve<=J&&zi(B,oe[de],oe[de+1],oe[de+2])}}function pa(oe,B,j,J,ie,de,ve){let _e=mo(oe),he=ie===0?Xs:Ys,Te,Me,be=oe.start;for(let Ct=0;Ct<oe.length-3;Ct+=3){let er=oe[Ct],jt=oe[Ct+1],bn=oe[Ct+2],Xr=oe[Ct+3],Lt=oe[Ct+4],dr=ie===0?er:jt,jr=ie===0?Xr:Lt,Nn=!1;ve&&(Te=Math.sqrt(Math.pow(er-Xr,2)+Math.pow(jt-Lt,2))),dr<j?jr>j&&(Me=he(_e,er,jt,Xr,Lt,j),ve&&(_e.start=be+Te*Me)):dr>J?jr<J&&(Me=he(_e,er,jt,Xr,Lt,J),ve&&(_e.start=be+Te*Me)):zi(_e,er,jt,bn),jr<j&&dr>=j&&(Me=he(_e,er,jt,Xr,Lt,j),Nn=!0),jr>J&&dr<=J&&(Me=he(_e,er,jt,Xr,Lt,J),Nn=!0),!de&&Nn&&(ve&&(_e.end=be+Te*Me),B.push(_e),_e=mo(oe)),ve&&(be+=Te)}let je=oe.length-3,lt=oe[je],ht=oe[je+1],Qt=ie===0?lt:ht;Qt>=j&&Qt<=J&&zi(_e,lt,ht,oe[je+2]),je=_e.length-3,de&&je>=3&&(_e[je]!==_e[0]||_e[je+1]!==_e[1])&&zi(_e,_e[0],_e[1],_e[2]),_e.length&&B.push(_e)}function mo(oe){let B=[];return B.size=oe.size,B.start=oe.start,B.end=oe.end,B}function Ts(oe,B,j,J,ie,de){for(let ve of oe)pa(ve,B,j,J,ie,de,!1)}function zi(oe,B,j,J){oe.push(B,j,J)}function Xs(oe,B,j,J,ie,de){let ve=(de-B)/(J-B);return zi(oe,de,j+(ie-j)*ve,1),ve}function Ys(oe,B,j,J,ie,de){let ve=(de-j)/(ie-j);return zi(oe,B+(J-B)*ve,de,1),ve}function Ne(oe,B){let j=[];for(let J=0;J<oe.length;J++){let ie=oe[J],de=ie.type,ve;if(de==="Point"||de==="MultiPoint"||de==="LineString")ve=da(ie.geometry,B);else if(de==="MultiLineString"||de==="Polygon"){ve=[];for(let _e of ie.geometry)ve.push(da(_e,B))}else if(de==="MultiPolygon"){ve=[];for(let _e of ie.geometry){let he=[];for(let Te of _e)he.push(da(Te,B));ve.push(he)}}j.push(wn(ie.id,de,ve,ie.tags))}return j}function da(oe,B){let j=[];j.size=oe.size,oe.start!==void 0&&(j.start=oe.start,j.end=oe.end);for(let J=0;J<oe.length;J+=3)j.push(oe[J]+B,oe[J+1],oe[J+2]);return j}function Zn(oe,B){if(oe.transformed)return oe;let j=1<<oe.z,J=oe.x,ie=oe.y;for(let de of oe.features){let ve=de.geometry,_e=de.type;if(de.geometry=[],_e===1)for(let he=0;he<ve.length;he+=2)de.geometry.push(ii(ve[he],ve[he+1],B,j,J,ie));else for(let he=0;he<ve.length;he++){let Te=[];for(let Me=0;Me<ve[he].length;Me+=2)Te.push(ii(ve[he][Me],ve[he][Me+1],B,j,J,ie));de.geometry.push(Te)}}return oe.transformed=!0,oe}function ii(oe,B,j,J,ie,de){return[Math.round(j*(oe*J-ie)),Math.round(j*(B*J-de))]}function ji(oe,B,j,J,ie){let de=B===ie.maxZoom?0:ie.tolerance/((1<<B)*ie.extent),ve={features:[],numPoints:0,numSimplified:0,numFeatures:oe.length,source:null,x:j,y:J,z:B,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let _e of oe)ze(ve,_e,de,ie);return ve}function ze(oe,B,j,J){let ie=B.geometry,de=B.type,ve=[];if(oe.minX=Math.min(oe.minX,B.minX),oe.minY=Math.min(oe.minY,B.minY),oe.maxX=Math.max(oe.maxX,B.maxX),oe.maxY=Math.max(oe.maxY,B.maxY),de==="Point"||de==="MultiPoint")for(let _e=0;_e<ie.length;_e+=3)ve.push(ie[_e],ie[_e+1]),oe.numPoints++,oe.numSimplified++;else if(de==="LineString")It(ve,ie,oe,j,!1,!1);else if(de==="MultiLineString"||de==="Polygon")for(let _e=0;_e<ie.length;_e++)It(ve,ie[_e],oe,j,de==="Polygon",_e===0);else if(de==="MultiPolygon")for(let _e=0;_e<ie.length;_e++){let he=ie[_e];for(let Te=0;Te<he.length;Te++)It(ve,he[Te],oe,j,!0,Te===0)}if(ve.length){let _e=B.tags||null;if(de==="LineString"&&J.lineMetrics){_e={};for(let Te in B.tags)_e[Te]=B.tags[Te];_e.mapbox_clip_start=ie.start/ie.size,_e.mapbox_clip_end=ie.end/ie.size}let he={geometry:ve,type:de==="Polygon"||de==="MultiPolygon"?3:de==="LineString"||de==="MultiLineString"?2:1,tags:_e};B.id!==null&&(he.id=B.id),oe.features.push(he)}}function It(oe,B,j,J,ie,de){let ve=J*J;if(J>0&&B.size<(ie?ve:J))return void(j.numPoints+=B.length/3);let _e=[];for(let he=0;he<B.length;he+=3)(J===0||B[he+2]>ve)&&(j.numSimplified++,_e.push(B[he],B[he+1])),j.numPoints++;ie&&function(he,Te){let Me=0;for(let be=0,je=he.length,lt=je-2;be<je;lt=be,be+=2)Me+=(he[be]-he[lt])*(he[be+1]+he[lt+1]);if(Me>0===Te)for(let be=0,je=he.length;be<je/2;be+=2){let lt=he[be],ht=he[be+1];he[be]=he[je-2-be],he[be+1]=he[je-1-be],he[je-2-be]=lt,he[je-1-be]=ht}}(_e,de),oe.push(_e)}let ft={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ai{constructor(B,j){let J=(j=this.options=function(de,ve){for(let _e in ve)de[_e]=ve[_e];return de}(Object.create(ft),j)).debug;if(J&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");let ie=function(de,ve){let _e=[];if(de.type==="FeatureCollection")for(let he=0;he<de.features.length;he++)Wn(_e,de.features[he],ve,he);else Wn(_e,de.type==="Feature"?de:{geometry:de},ve);return _e}(B,j);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ie=function(de,ve){let _e=ve.buffer/ve.extent,he=de,Te=Cr(de,1,-1-_e,_e,0,-1,2,ve),Me=Cr(de,1,1-_e,2+_e,0,-1,2,ve);return(Te||Me)&&(he=Cr(de,1,-_e,1+_e,0,-1,2,ve)||[],Te&&(he=Ne(Te,1).concat(he)),Me&&(he=he.concat(Ne(Me,-1)))),he}(ie,j),ie.length&&this.splitTile(ie,0,0,0),J&&(ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(B,j,J,ie,de,ve,_e){let he=[B,j,J,ie],Te=this.options,Me=Te.debug;for(;he.length;){ie=he.pop(),J=he.pop(),j=he.pop(),B=he.pop();let be=1<<j,je=Ur(j,J,ie),lt=this.tiles[je];if(!lt&&(Me>1&&console.time("creation"),lt=this.tiles[je]=ji(B,j,J,ie,Te),this.tileCoords.push({z:j,x:J,y:ie}),Me)){Me>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,J,ie,lt.numFeatures,lt.numPoints,lt.numSimplified),console.timeEnd("creation"));let Nn=`z${j}`;this.stats[Nn]=(this.stats[Nn]||0)+1,this.total++}if(lt.source=B,de==null){if(j===Te.indexMaxZoom||lt.numPoints<=Te.indexMaxPoints)continue}else{if(j===Te.maxZoom||j===de)continue;if(de!=null){let Nn=de-j;if(J!==ve>>Nn||ie!==_e>>Nn)continue}}if(lt.source=null,B.length===0)continue;Me>1&&console.time("clipping");let ht=.5*Te.buffer/Te.extent,Qt=.5-ht,Ct=.5+ht,er=1+ht,jt=null,bn=null,Xr=null,Lt=null,dr=Cr(B,be,J-ht,J+Ct,0,lt.minX,lt.maxX,Te),jr=Cr(B,be,J+Qt,J+er,0,lt.minX,lt.maxX,Te);B=null,dr&&(jt=Cr(dr,be,ie-ht,ie+Ct,1,lt.minY,lt.maxY,Te),bn=Cr(dr,be,ie+Qt,ie+er,1,lt.minY,lt.maxY,Te),dr=null),jr&&(Xr=Cr(jr,be,ie-ht,ie+Ct,1,lt.minY,lt.maxY,Te),Lt=Cr(jr,be,ie+Qt,ie+er,1,lt.minY,lt.maxY,Te),jr=null),Me>1&&console.timeEnd("clipping"),he.push(jt||[],j+1,2*J,2*ie),he.push(bn||[],j+1,2*J,2*ie+1),he.push(Xr||[],j+1,2*J+1,2*ie),he.push(Lt||[],j+1,2*J+1,2*ie+1)}}getTile(B,j,J){B=+B,j=+j,J=+J;let ie=this.options,{extent:de,debug:ve}=ie;if(B<0||B>24)return null;let _e=1<<B,he=Ur(B,j=j+_e&_e-1,J);if(this.tiles[he])return Zn(this.tiles[he],de);ve>1&&console.log("drilling down to z%d-%d-%d",B,j,J);let Te,Me=B,be=j,je=J;for(;!Te&&Me>0;)Me--,be>>=1,je>>=1,Te=this.tiles[Ur(Me,be,je)];return Te&&Te.source?(ve>1&&(console.log("found parent tile z%d-%d-%d",Me,be,je),console.time("drilling down")),this.splitTile(Te.source,Me,be,je,B,j,J),ve>1&&console.timeEnd("drilling down"),this.tiles[he]?Zn(this.tiles[he],de):null):null}}function Ur(oe,B,j){return 32*((1<<oe)*j+B)+oe}function Et(oe,B){return B?oe.properties[B]:oe.id}function Fo(oe,B){if(oe==null)return!0;if(oe.type==="Feature")return Et(oe,B)!=null;if(oe.type==="FeatureCollection"){let j=new Set;for(let J of oe.features){let ie=Et(J,B);if(ie==null||j.has(ie))return!1;j.add(ie)}return!0}return!1}function Is(oe,B){let j=new Map;if(oe!=null)if(oe.type==="Feature")j.set(Et(oe,B),oe);else for(let J of oe.features)j.set(Et(J,B),J);return j}class Js extends b{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(B,j){return i._(this,void 0,void 0,function*(){let J=B.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let ie=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!ie)return null;let de=new class{constructor(_e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.X,this.length=_e.length,this._features=_e}feature(_e){return new class{constructor(he){this._feature=he,this.extent=i.X,this.type=he.type,this.properties=he.tags,"id"in he&&!isNaN(he.id)&&(this.id=parseInt(he.id,10))}loadGeometry(){if(this._feature.type===1){let he=[];for(let Te of this._feature.geometry)he.push([new i.P(Te[0],Te[1])]);return he}{let he=[];for(let Te of this._feature.geometry){let Me=[];for(let be of Te)Me.push(new i.P(be[0],be[1]));he.push(Me)}return he}}toGeoJSON(he,Te,Me){return W.call(this,he,Te,Me)}}(this._features[_e])}}(ie.features),ve=sr(de);return ve.byteOffset===0&&ve.byteLength===ve.buffer.byteLength||(ve=new Uint8Array(ve)),{vectorTile:de,rawData:ve.buffer}})}loadData(B){return i._(this,void 0,void 0,function*(){var j;(j=this._pendingRequest)===null||j===void 0||j.abort();let J=!!(B&&B.request&&B.request.collectResourceTiming)&&new i.bv(B.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(B,this._pendingRequest),this._geoJSONIndex=B.cluster?new wi(function({superclusterOptions:ve,clusterProperties:_e}){if(!_e||!ve)return ve;let he={},Te={},Me={accumulated:null,zoom:0},be={properties:null},je=Object.keys(_e);for(let lt of je){let[ht,Qt]=_e[lt],Ct=i.bC(Qt),er=i.bC(typeof ht=="string"?[ht,["accumulated"],["get",lt]]:ht);he[lt]=Ct.value,Te[lt]=er.value}return ve.map=lt=>{be.properties=lt;let ht={};for(let Qt of je)ht[Qt]=he[Qt].evaluate(Me,be);return ht},ve.reduce=(lt,ht)=>{be.properties=ht;for(let Qt of je)Me.accumulated=lt[Qt],lt[Qt]=Te[Qt].evaluate(Me,be)},ve}(B)).load((yield this._pendingData).features):(ie=yield this._pendingData,new ai(ie,B.geojsonVtOptions)),this.loaded={};let de={};if(J){let ve=J.finish();ve&&(de.resourceTiming={},de.resourceTiming[B.source]=JSON.parse(JSON.stringify(ve)))}return de}catch(de){if(delete this._pendingRequest,i.bB(de))return{abandoned:!0};throw de}var ie})}getData(){return i._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(B){let j=this.loaded;return j&&j[B.uid]?super.reloadTile(B):this.loadTile(B)}loadAndProcessGeoJSON(B,j){return i._(this,void 0,void 0,function*(){let J=yield this.loadGeoJSON(B,j);if(delete this._pendingRequest,typeof J!="object")throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`);if(L(J,!0),B.filter){let ie=i.bC(B.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ie.result==="error")throw new Error(ie.value.map(ve=>`${ve.key}: ${ve.message}`).join(", "));J={type:"FeatureCollection",features:J.features.filter(ve=>ie.value.evaluate({zoom:0},ve))}}return J})}loadGeoJSON(B,j){return i._(this,void 0,void 0,function*(){let{promoteId:J}=B;if(B.request){let ie=yield i.h(B.request,j);return this._dataUpdateable=Fo(ie.data,J)?Is(ie.data,J):void 0,ie.data}if(typeof B.data=="string")try{let ie=JSON.parse(B.data);return this._dataUpdateable=Fo(ie,J)?Is(ie,J):void 0,ie}catch(ie){throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`)}if(!B.dataDiff)throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${B.source}`);return function(ie,de,ve){var _e,he,Te,Me;if(de.removeAll&&ie.clear(),de.remove)for(let be of de.remove)ie.delete(be);if(de.add)for(let be of de.add){let je=Et(be,ve);je!=null&&ie.set(je,be)}if(de.update)for(let be of de.update){let je=ie.get(be.id);if(je==null)continue;let lt=!be.removeAllProperties&&(((_e=be.removeProperties)===null||_e===void 0?void 0:_e.length)>0||((he=be.addOrUpdateProperties)===null||he===void 0?void 0:he.length)>0);if((be.newGeometry||be.removeAllProperties||lt)&&(je=Object.assign({},je),ie.set(be.id,je),lt&&(je.properties=Object.assign({},je.properties))),be.newGeometry&&(je.geometry=be.newGeometry),be.removeAllProperties)je.properties={};else if(((Te=be.removeProperties)===null||Te===void 0?void 0:Te.length)>0)for(let ht of be.removeProperties)Object.prototype.hasOwnProperty.call(je.properties,ht)&&delete je.properties[ht];if(((Me=be.addOrUpdateProperties)===null||Me===void 0?void 0:Me.length)>0)for(let{key:ht,value:Qt}of be.addOrUpdateProperties)je.properties[ht]=Qt}}(this._dataUpdateable,B.dataDiff,J),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(B){return i._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(B){return this._geoJSONIndex.getClusterExpansionZoom(B.clusterId)}getClusterChildren(B){return this._geoJSONIndex.getChildren(B.clusterId)}getClusterLeaves(B){return this._geoJSONIndex.getLeaves(B.clusterId,B.limit,B.offset)}}class zo{constructor(B){this.self=B,this.actor=new i.F(B),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(j,J)=>{if(this.externalWorkerSourceTypes[j])throw new Error(`Worker source with name "${j}" already registered.`);this.externalWorkerSourceTypes[j]=J},this.self.addProtocol=i.bi,this.self.removeProtocol=i.bj,this.self.registerRTLTextPlugin=j=>{if(i.bD.isParsed())throw new Error("RTL text plugin already registered.");i.bD.setMethods(j)},this.actor.registerMessageHandler("LDT",(j,J)=>this._getDEMWorkerSource(j,J.source).loadTile(J)),this.actor.registerMessageHandler("RDT",(j,J)=>i._(this,void 0,void 0,function*(){this._getDEMWorkerSource(j,J.source).removeTile(J)})),this.actor.registerMessageHandler("GCEZ",(j,J)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(j,J.type,J.source).getClusterExpansionZoom(J)})),this.actor.registerMessageHandler("GCC",(j,J)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(j,J.type,J.source).getClusterChildren(J)})),this.actor.registerMessageHandler("GCL",(j,J)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(j,J.type,J.source).getClusterLeaves(J)})),this.actor.registerMessageHandler("LD",(j,J)=>this._getWorkerSource(j,J.type,J.source).loadData(J)),this.actor.registerMessageHandler("GD",(j,J)=>this._getWorkerSource(j,J.type,J.source).getData()),this.actor.registerMessageHandler("LT",(j,J)=>this._getWorkerSource(j,J.type,J.source).loadTile(J)),this.actor.registerMessageHandler("RT",(j,J)=>this._getWorkerSource(j,J.type,J.source).reloadTile(J)),this.actor.registerMessageHandler("AT",(j,J)=>this._getWorkerSource(j,J.type,J.source).abortTile(J)),this.actor.registerMessageHandler("RMT",(j,J)=>this._getWorkerSource(j,J.type,J.source).removeTile(J)),this.actor.registerMessageHandler("RS",(j,J)=>i._(this,void 0,void 0,function*(){if(!this.workerSources[j]||!this.workerSources[j][J.type]||!this.workerSources[j][J.type][J.source])return;let ie=this.workerSources[j][J.type][J.source];delete this.workerSources[j][J.type][J.source],ie.removeSource!==void 0&&ie.removeSource(J)})),this.actor.registerMessageHandler("RM",j=>i._(this,void 0,void 0,function*(){delete this.layerIndexes[j],delete this.availableImages[j],delete this.workerSources[j],delete this.demWorkerSources[j]})),this.actor.registerMessageHandler("SR",(j,J)=>i._(this,void 0,void 0,function*(){this.referrer=J})),this.actor.registerMessageHandler("SRPS",(j,J)=>this._syncRTLPluginState(j,J)),this.actor.registerMessageHandler("IS",(j,J)=>i._(this,void 0,void 0,function*(){this.self.importScripts(J)})),this.actor.registerMessageHandler("SI",(j,J)=>this._setImages(j,J)),this.actor.registerMessageHandler("UL",(j,J)=>i._(this,void 0,void 0,function*(){this._getLayerIndex(j).update(J.layers,J.removedIds)})),this.actor.registerMessageHandler("SL",(j,J)=>i._(this,void 0,void 0,function*(){this._getLayerIndex(j).replace(J)}))}_setImages(B,j){return i._(this,void 0,void 0,function*(){this.availableImages[B]=j;for(let J in this.workerSources[B]){let ie=this.workerSources[B][J];for(let de in ie)ie[de].availableImages=j}})}_syncRTLPluginState(B,j){return i._(this,void 0,void 0,function*(){if(i.bD.isParsed())return i.bD.getState();if(j.pluginStatus!=="loading")return i.bD.setState(j),j;let J=j.pluginURL;if(this.self.importScripts(J),i.bD.isParsed()){let ie={pluginStatus:"loaded",pluginURL:J};return i.bD.setState(ie),ie}throw i.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${J}`)})}_getAvailableImages(B){let j=this.availableImages[B];return j||(j=[]),j}_getLayerIndex(B){let j=this.layerIndexes[B];return j||(j=this.layerIndexes[B]=new a),j}_getWorkerSource(B,j,J){if(this.workerSources[B]||(this.workerSources[B]={}),this.workerSources[B][j]||(this.workerSources[B][j]={}),!this.workerSources[B][j][J]){let ie={sendAsync:(de,ve)=>(de.targetMapId=B,this.actor.sendAsync(de,ve))};switch(j){case"vector":this.workerSources[B][j][J]=new b(ie,this._getLayerIndex(B),this._getAvailableImages(B));break;case"geojson":this.workerSources[B][j][J]=new Js(ie,this._getLayerIndex(B),this._getAvailableImages(B));break;default:this.workerSources[B][j][J]=new this.externalWorkerSourceTypes[j](ie,this._getLayerIndex(B),this._getAvailableImages(B));}}return this.workerSources[B][j][J]}_getDEMWorkerSource(B,j){return this.demWorkerSources[B]||(this.demWorkerSources[B]={}),this.demWorkerSources[B][j]||(this.demWorkerSources[B][j]=new E),this.demWorkerSources[B][j]}}return i.i(self)&&(self.worker=new zo(self)),zo}),r("index",["exports","./shared"],function(i,a){"use strict";var h="4.7.0";let p,g,b={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:_=>new Promise((o,c)=>{let d=requestAnimationFrame(o);_.signal.addEventListener("abort",()=>{cancelAnimationFrame(d),c(a.c())})}),getImageData(_,o=0){return this.getImageCanvasContext(_).getImageData(-o,-o,_.width+2*o,_.height+2*o)},getImageCanvasContext(_){let o=window.document.createElement("canvas"),c=o.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return o.width=_.width,o.height=_.height,c.drawImage(_,0,0,_.width,_.height),c},resolveURL:_=>(p||(p=document.createElement("a")),p.href=_,p.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(g==null&&(g=matchMedia("(prefers-reduced-motion: reduce)")),g.matches)}};class E{static testProp(o){if(!E.docStyle)return o[0];for(let c=0;c<o.length;c++)if(o[c]in E.docStyle)return o[c];return o[0]}static create(o,c,d){let m=window.document.createElement(o);return c!==void 0&&(m.className=c),d&&d.appendChild(m),m}static createNS(o,c){return window.document.createElementNS(o,c)}static disableDrag(){E.docStyle&&E.selectProp&&(E.userSelect=E.docStyle[E.selectProp],E.docStyle[E.selectProp]="none")}static enableDrag(){E.docStyle&&E.selectProp&&(E.docStyle[E.selectProp]=E.userSelect)}static setTransform(o,c){o.style[E.transformProp]=c}static addEventListener(o,c,d,m={}){o.addEventListener(c,d,"passive"in m?m:m.capture)}static removeEventListener(o,c,d,m={}){o.removeEventListener(c,d,"passive"in m?m:m.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",E.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",E.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",E.suppressClickInternal,!0)},0)}static getScale(o){let c=o.getBoundingClientRect();return{x:c.width/o.offsetWidth||1,y:c.height/o.offsetHeight||1,boundingClientRect:c}}static getPoint(o,c,d){let m=c.boundingClientRect;return new a.P((d.clientX-m.left)/c.x-o.clientLeft,(d.clientY-m.top)/c.y-o.clientTop)}static mousePos(o,c){let d=E.getScale(o);return E.getPoint(o,d,c)}static touchPos(o,c){let d=[],m=E.getScale(o);for(let y=0;y<c.length;y++)d.push(E.getPoint(o,m,c[y]));return d}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}}E.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,E.selectProp=E.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),E.transformProp=E.testProp(["transform","WebkitTransform"]);let q={supported:!1,testSupport:function(_){!W&&L&&(Q?V(_):P=_)}},P,L,W=!1,Q=!1;function V(_){let o=_.createTexture();_.bindTexture(_.TEXTURE_2D,o);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,L),_.isContextLost())return;q.supported=!0}catch(c){}_.deleteTexture(o),W=!0}var $;typeof document!="undefined"&&(L=document.createElement("img"),L.onload=()=>{P&&V(P),P=null,Q=!0},L.onerror=()=>{W=!0,P=null},L.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let o,c,d,m;_.resetRequestQueue=()=>{o=[],c=0,d=0,m={}},_.addThrottleControl=M=>{let D=d++;return m[D]=M,D},_.removeThrottleControl=M=>{delete m[M],I()},_.getImage=(M,D,N=!0)=>new Promise((F,G)=>{q.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),a.e(M,{type:"image"}),o.push({abortController:D,requestParameters:M,supportImageRefresh:N,state:"queued",onError:Y=>{G(Y)},onSuccess:Y=>{F(Y)}}),I()});let y=M=>a._(this,void 0,void 0,function*(){M.state="running";let{requestParameters:D,supportImageRefresh:N,onError:F,onSuccess:G,abortController:Y}=M,ee=N===!1&&!a.i(self)&&!a.g(D.url)&&(!D.headers||Object.keys(D.headers).reduce((ce,fe)=>ce&&fe==="accept",!0));c++;let ae=ee?A(D,Y):a.m(D,Y);try{let ce=yield ae;delete M.abortController,M.state="completed",ce.data instanceof HTMLImageElement||a.b(ce.data)?G(ce):ce.data&&G({data:yield(le=ce.data,typeof createImageBitmap=="function"?a.d(le):a.f(le)),cacheControl:ce.cacheControl,expires:ce.expires})}catch(ce){delete M.abortController,F(ce)}finally{c--,I()}var le}),I=()=>{let M=(()=>{for(let D of Object.keys(m))if(m[D]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let D=c;D<M&&o.length>0;D++){let N=o.shift();N.abortController.signal.aborted?D--:y(N)}},A=(M,D)=>new Promise((N,F)=>{let G=new Image,Y=M.url,ee=M.credentials;ee&&ee==="include"?G.crossOrigin="use-credentials":(ee&&ee==="same-origin"||!a.s(Y))&&(G.crossOrigin="anonymous"),D.signal.addEventListener("abort",()=>{G.src="",F(a.c())}),G.fetchPriority="high",G.onload=()=>{G.onerror=G.onload=null,N({data:G})},G.onerror=()=>{G.onerror=G.onload=null,D.signal.aborted||F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},G.src=Y})}($||($={})),$.resetRequestQueue();class H{constructor(o){this._transformRequestFn=o}transformRequest(o,c){return this._transformRequestFn&&this._transformRequestFn(o,c)||{url:o}}setTransformRequest(o){this._transformRequestFn=o}}function re(_){var o=new a.A(3);return o[0]=_[0],o[1]=_[1],o[2]=_[2],o}var se,Ie=function(_,o,c){return _[0]=o[0]-c[0],_[1]=o[1]-c[1],_[2]=o[2]-c[2],_};se=new a.A(3),a.A!=Float32Array&&(se[0]=0,se[1]=0,se[2]=0);var qe=function(_){var o=_[0],c=_[1];return o*o+c*c};function Ae(_){let o=[];if(typeof _=="string")o.push({id:"default",url:_});else if(_&&_.length>0){let c=[];for(let{id:d,url:m}of _){let y=`${d}${m}`;c.indexOf(y)===-1&&(c.push(y),o.push({id:d,url:m}))}}return o}function Ue(_,o,c){let d=_.split("?");return d[0]+=`${o}${c}`,d.join("?")}(function(){var _=new a.A(2);a.A!=Float32Array&&(_[0]=0,_[1]=0)})();class Le{constructor(o,c,d,m){this.context=o,this.format=d,this.texture=o.gl.createTexture(),this.update(c,m)}update(o,c,d){let{width:m,height:y}=o,I=!(this.size&&this.size[0]===m&&this.size[1]===y||d),{context:A}=this,{gl:M}=A;if(this.useMipmap=!!(c&&c.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!c||c.premultiply!==!1)),I)this.size=[m,y],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||a.b(o)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,o):M.texImage2D(M.TEXTURE_2D,0,this.format,m,y,0,this.format,M.UNSIGNED_BYTE,o.data);else{let{x:D,y:N}=d||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||a.b(o)?M.texSubImage2D(M.TEXTURE_2D,0,D,N,M.RGBA,M.UNSIGNED_BYTE,o):M.texSubImage2D(M.TEXTURE_2D,0,D,N,m,y,M.RGBA,M.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(o,c,d){let{context:m}=this,{gl:y}=m;y.bindTexture(y.TEXTURE_2D,this.texture),d!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=y.LINEAR),o!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,o),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,d||o),this.filter=o),c!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,c),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}function $t(_){let{userImage:o}=_;return!!(o&&o.render&&o.render())&&(_.data.replace(new Uint8Array(o.data.buffer)),!0)}class Rt extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(let{ids:c,promiseResolve:d}of this.requestors)d(this._getImagesForIds(c));this.requestors=[]}}getImage(o){let c=this.images[o];if(c&&!c.data&&c.spriteData){let d=c.spriteData;c.data=new a.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),c.spriteData=null}return c}addImage(o,c){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,c)&&(this.images[o]=c)}_validate(o,c){let d=!0,m=c.data||c.spriteData;return this._validateStretch(c.stretchX,m&&m.width)||(this.fire(new a.j(new Error(`Image "${o}" has invalid "stretchX" value`))),d=!1),this._validateStretch(c.stretchY,m&&m.height)||(this.fire(new a.j(new Error(`Image "${o}" has invalid "stretchY" value`))),d=!1),this._validateContent(c.content,c)||(this.fire(new a.j(new Error(`Image "${o}" has invalid "content" value`))),d=!1),d}_validateStretch(o,c){if(!o)return!0;let d=0;for(let m of o){if(m[0]<d||m[1]<m[0]||c<m[1])return!1;d=m[1]}return!0}_validateContent(o,c){if(!o)return!0;if(o.length!==4)return!1;let d=c.spriteData,m=d&&d.width||c.data.width,y=d&&d.height||c.data.height;return!(o[0]<0||m<o[0]||o[1]<0||y<o[1]||o[2]<0||m<o[2]||o[3]<0||y<o[3]||o[2]<o[0]||o[3]<o[1])}updateImage(o,c,d=!0){let m=this.getImage(o);if(d&&(m.data.width!==c.data.width||m.data.height!==c.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=m.version+1,this.images[o]=c,this.updatedImages[o]=!0}removeImage(o){let c=this.images[o];delete this.images[o],delete this.patterns[o],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o){return new Promise((c,d)=>{let m=!0;if(!this.isLoaded())for(let y of o)this.images[y]||(m=!1);this.isLoaded()||m?c(this._getImagesForIds(o)):this.requestors.push({ids:o,promiseResolve:c})})}_getImagesForIds(o){let c={};for(let d of o){let m=this.getImage(d);m||(this.fire(new a.k("styleimagemissing",{id:d})),m=this.getImage(d)),m?c[d]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:a.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){let{width:o,height:c}=this.atlasImage;return{width:o,height:c}}getPattern(o){let c=this.patterns[o],d=this.getImage(o);if(!d)return null;if(c&&c.position.version===d.version)return c.position;if(c)c.position.version=d.version;else{let m={w:d.data.width+2,h:d.data.height+2,x:0,y:0},y=new a.I(m,d);this.patterns[o]={bin:m,position:y}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){let c=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Le(o,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){let o=[];for(let y in this.patterns)o.push(this.patterns[y].bin);let{w:c,h:d}=a.p(o),m=this.atlasImage;m.resize({width:c||1,height:d||1});for(let y in this.patterns){let{bin:I}=this.patterns[y],A=I.x+1,M=I.y+1,D=this.getImage(y).data,N=D.width,F=D.height;a.R.copy(D,m,{x:0,y:0},{x:A,y:M},{width:N,height:F}),a.R.copy(D,m,{x:0,y:F-1},{x:A,y:M-1},{width:N,height:1}),a.R.copy(D,m,{x:0,y:0},{x:A,y:M+F},{width:N,height:1}),a.R.copy(D,m,{x:N-1,y:0},{x:A-1,y:M},{width:1,height:F}),a.R.copy(D,m,{x:0,y:0},{x:A+N,y:M},{width:1,height:F})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(let c of o){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;let d=this.getImage(c);d||a.w(`Image with ID: "${c}" was not found`),$t(d)&&this.updateImage(c,d)}}}let ir=1e20;function Kr(_,o,c,d,m,y,I,A,M){for(let D=o;D<o+d;D++)Mn(_,c*y+D,y,m,I,A,M);for(let D=c;D<c+m;D++)Mn(_,D*y+o,1,d,I,A,M)}function Mn(_,o,c,d,m,y,I){y[0]=0,I[0]=-ir,I[1]=ir,m[0]=_[o];for(let A=1,M=0,D=0;A<d;A++){m[A]=_[o+A*c];let N=A*A;do{let F=y[M];D=(m[A]-m[F]+N-F*F)/(A-F)/2}while(D<=I[M]&&--M>-1);M++,y[M]=A,I[M]=D,I[M+1]=ir}for(let A=0,M=0;A<d;A++){for(;I[M+1]<A;)M++;let D=y[M],N=A-D;_[o+A*c]=m[D]+N*N}}class sr{constructor(o,c){this.requestManager=o,this.localIdeographFontFamily=c,this.entries={}}setURL(o){this.url=o}getGlyphs(o){return a._(this,void 0,void 0,function*(){let c=[];for(let y in o)for(let I of o[y])c.push(this._getAndCacheGlyphsPromise(y,I));let d=yield Promise.all(c),m={};for(let{stack:y,id:I,glyph:A}of d)m[y]||(m[y]={}),m[y][I]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};return m})}_getAndCacheGlyphsPromise(o,c){return a._(this,void 0,void 0,function*(){let d=this.entries[o];d||(d=this.entries[o]={glyphs:{},requests:{},ranges:{}});let m=d.glyphs[c];if(m!==void 0)return{stack:o,id:c,glyph:m};if(m=this._tinySDF(d,o,c),m)return d.glyphs[c]=m,{stack:o,id:c,glyph:m};let y=Math.floor(c/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[y])return{stack:o,id:c,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[y]){let A=sr.loadGlyphRange(o,y,this.url,this.requestManager);d.requests[y]=A}let I=yield d.requests[y];for(let A in I)this._doesCharSupportLocalGlyph(+A)||(d.glyphs[+A]=I[+A]);return d.ranges[y]=!0,{stack:o,id:c,glyph:I[c]||null}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(o))}_tinySDF(o,c,d){let m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(d))return;let y=o.tinySDF;if(!y){let A="400";/bold/i.test(c)?A="900":/medium/i.test(c)?A="500":/light/i.test(c)&&(A="200"),y=o.tinySDF=new sr.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:A})}let I=y.draw(String.fromCharCode(d));return{id:d,bitmap:new a.o({width:I.width||60,height:I.height||60},I.data),metrics:{width:I.glyphWidth/2||24,height:I.glyphHeight/2||24,left:I.glyphLeft/2+.5||0,top:I.glyphTop/2-27.5||-8,advance:I.glyphAdvance/2||24,isDoubleResolution:!0}}}}sr.loadGlyphRange=function(_,o,c,d){return a._(this,void 0,void 0,function*(){let m=256*o,y=m+255,I=d.transformRequest(c.replace("{fontstack}",_).replace("{range}",`${m}-${y}`),"Glyphs"),A=yield a.l(I,new AbortController);if(!A||!A.data)throw new Error(`Could not load glyph range. range: ${o}, ${m}-${y}`);let M={};for(let D of a.n(A.data))M[D.id]=D;return M})},sr.TinySDF=class{constructor({fontSize:_=24,buffer:o=3,radius:c=8,cutoff:d=.25,fontFamily:m="sans-serif",fontWeight:y="normal",fontStyle:I="normal"}={}){this.buffer=o,this.cutoff=d,this.radius=c;let A=this.size=_+4*o,M=this._createCanvas(A),D=this.ctx=M.getContext("2d",{willReadFrequently:!0});D.font=`${I} ${y} ${_}px ${m}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(_){let o=document.createElement("canvas");return o.width=o.height=_,o}draw(_){let{width:o,actualBoundingBoxAscent:c,actualBoundingBoxDescent:d,actualBoundingBoxLeft:m,actualBoundingBoxRight:y}=this.ctx.measureText(_),I=Math.ceil(c),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-m))),M=Math.min(this.size-this.buffer,I+Math.ceil(d)),D=A+2*this.buffer,N=M+2*this.buffer,F=Math.max(D*N,0),G=new Uint8ClampedArray(F),Y={data:G,width:D,height:N,glyphWidth:A,glyphHeight:M,glyphTop:I,glyphLeft:0,glyphAdvance:o};if(A===0||M===0)return Y;let{ctx:ee,buffer:ae,gridInner:le,gridOuter:ce}=this;ee.clearRect(ae,ae,A,M),ee.fillText(_,ae,ae+I);let fe=ee.getImageData(ae,ae,A,M);ce.fill(ir,0,F),le.fill(0,0,F);for(let te=0;te<M;te++)for(let me=0;me<A;me++){let ge=fe.data[4*(te*A+me)+3]/255;if(ge===0)continue;let we=(te+ae)*D+me+ae;if(ge===1)ce[we]=0,le[we]=ir;else{let Pe=.5-ge;ce[we]=Pe>0?Pe*Pe:0,le[we]=Pe<0?Pe*Pe:0}}Kr(ce,0,0,D,N,D,this.f,this.v,this.z),Kr(le,ae,ae,A,M,D,this.f,this.v,this.z);for(let te=0;te<F;te++){let me=Math.sqrt(ce[te])-Math.sqrt(le[te]);G[te]=Math.round(255-255*(me/this.radius+this.cutoff))}return Y}};class lr{constructor(){this.specification=a.v.light.position}possiblyEvaluate(o,c){return a.x(o.expression.evaluate(c))}interpolate(o,c,d){return{x:a.y.number(o.x,c.x,d),y:a.y.number(o.y,c.y,d),z:a.y.number(o.z,c.z,d)}}}let cr;class Kt extends a.E{constructor(o){super(),cr=cr||new a.q({anchor:new a.D(a.v.light.anchor),position:new lr,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(cr),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,c={}){if(!this._validate(a.r,o,c))for(let d in o){let m=o[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),m):this._transitionable.setValue(d,m)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,c,d){return(!d||d.validate!==!1)&&a.t(this,o.call(a.u,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}let rn=new a.q({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class nn extends a.E{constructor(o){super(),this._transitionable=new a.T(rn),this.setSky(o),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.z(0))}setSky(o,c={}){if(!this._validate(a.B,o,c)){o||(o={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let d in o){let m=o[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),m):this._transitionable.setValue(d,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,c,d={}){return(d==null?void 0:d.validate)!==!1&&a.t(this,o.call(a.u,a.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(o){return o<60?0:o<70?(o-60)/10:1}}class fa{constructor(o,c){this.width=o,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,c){let d=o.join(",")+String(c);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(o,c)),this.dashEntry[d]}getDashRanges(o,c,d){let m=[],y=o.length%2==1?-o[o.length-1]*d:0,I=o[0]*d,A=!0;m.push({left:y,right:I,isDash:A,zeroLength:o[0]===0});let M=o[0];for(let D=1;D<o.length;D++){A=!A;let N=o[D];y=M*d,M+=N,I=M*d,m.push({left:y,right:I,isDash:A,zeroLength:N===0})}return m}addRoundDash(o,c,d){let m=c/2;for(let y=-d;y<=d;y++){let I=this.width*(this.nextRow+d+y),A=0,M=o[A];for(let D=0;D<this.width;D++){D/M.right>1&&(M=o[++A]);let N=Math.abs(D-M.left),F=Math.abs(D-M.right),G=Math.min(N,F),Y,ee=y/d*(m+1);if(M.isDash){let ae=m-Math.abs(ee);Y=Math.sqrt(G*G+ae*ae)}else Y=m-Math.sqrt(G*G+ee*ee);this.data[I+D]=Math.max(0,Math.min(255,Y+128))}}}addRegularDash(o){for(let A=o.length-1;A>=0;--A){let M=o[A],D=o[A+1];M.zeroLength?o.splice(A,1):D&&D.isDash===M.isDash&&(D.left=M.left,o.splice(A,1))}let c=o[0],d=o[o.length-1];c.isDash===d.isDash&&(c.left=d.left-this.width,d.right=c.right+this.width);let m=this.width*this.nextRow,y=0,I=o[y];for(let A=0;A<this.width;A++){A/I.right>1&&(I=o[++y]);let M=Math.abs(A-I.left),D=Math.abs(A-I.right),N=Math.min(M,D);this.data[m+A]=Math.max(0,Math.min(255,(I.isDash?N:-N)+128))}}addDash(o,c){let d=c?7:0,m=2*d+1;if(this.nextRow+m>this.height)return a.w("LineAtlas out of space"),null;let y=0;for(let A=0;A<o.length;A++)y+=o[A];if(y!==0){let A=this.width/y,M=this.getDashRanges(o,this.width,A);c?this.addRoundDash(M,A,d):this.addRegularDash(M)}let I={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:y};return this.nextRow+=m,this.dirty=!0,I}bind(o){let c=o.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}let wi="maplibre_preloaded_worker_pool";class Gn{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<Gn.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[wi]}numActive(){return Object.keys(this.active).length}}let ri=Math.floor(b.hardwareConcurrency/2),Dt,pn;function ni(){return Dt||(Dt=new Gn),Dt}Gn.workerCount=a.C(globalThis)?Math.max(Math.min(ri,3),1):1;class an{constructor(o,c){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=c;let d=this.workerPool.acquire(c);for(let m=0;m<d.length;m++){let y=new a.F(d[m],c);y.name=`Worker ${m}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,c){let d=[];for(let m of this.actors)d.push(m.sendAsync({type:o,data:c}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(o=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],o&&this.workerPool.release(this.id)}registerMessageHandler(o,c){for(let d of this.actors)d.registerMessageHandler(o,c)}}function Es(){return pn||(pn=new an(ni(),a.G),pn.registerMessageHandler("GR",(_,o,c)=>a.m(o,c))),pn}function wn(_,o){let c=a.H();return a.J(c,c,[1,1,0]),a.K(c,c,[.5*_.width,.5*_.height,1]),a.L(c,c,_.calculatePosMatrix(o.toUnwrapped()))}function Da(_,o,c,d,m,y){let I=function(F,G,Y){if(F)for(let ee of F){let ae=G[ee];if(ae&&ae.source===Y&&ae.type==="fill-extrusion")return!0}else for(let ee in G){let ae=G[ee];if(ae.source===Y&&ae.type==="fill-extrusion")return!0}return!1}(m&&m.layers,o,_.id),A=y.maxPitchScaleFactor(),M=_.tilesIn(d,A,I);M.sort(Wn);let D=[];for(let F of M)D.push({wrappedTileID:F.tileID.wrapped().key,queryResults:F.tile.queryRenderedFeatures(o,c,_._state,F.queryGeometry,F.cameraQueryGeometry,F.scale,m,y,A,wn(_.transform,F.tileID))});let N=function(F){let G={},Y={};for(let ee of F){let ae=ee.queryResults,le=ee.wrappedTileID,ce=Y[le]=Y[le]||{};for(let fe in ae){let te=ae[fe],me=ce[fe]=ce[fe]||{},ge=G[fe]=G[fe]||[];for(let we of te)me[we.featureIndex]||(me[we.featureIndex]=!0,ge.push(we))}}return G}(D);for(let F in N)N[F].forEach(G=>{let Y=G.feature,ee=_.getFeatureState(Y.layer["source-layer"],Y.id);Y.source=Y.layer.source,Y.layer["source-layer"]&&(Y.sourceLayer=Y.layer["source-layer"]),Y.state=ee});return N}function Wn(_,o){let c=_.tileID,d=o.tileID;return c.overscaledZ-d.overscaledZ||c.canonical.y-d.canonical.y||c.wrap-d.wrap||c.canonical.x-d.canonical.x}function Ss(_,o,c){return a._(this,void 0,void 0,function*(){let d=_;if(_.url?d=(yield a.h(o.transformRequest(_.url,"Source"),c)).data:yield b.frameAsync(c),!d)return null;let m=a.M(a.e(d,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(m.vectorLayerIds=d.vector_layers.map(y=>y.id)),m})}class Ee{constructor(o,c){o&&(c?this.setSouthWest(o).setNorthEast(c):Array.isArray(o)&&(o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1])))}setNorthEast(o){return this._ne=o instanceof a.N?new a.N(o.lng,o.lat):a.N.convert(o),this}setSouthWest(o){return this._sw=o instanceof a.N?new a.N(o.lng,o.lat):a.N.convert(o),this}extend(o){let c=this._sw,d=this._ne,m,y;if(o instanceof a.N)m=o,y=o;else{if(!(o instanceof Ee))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Ee.convert(o)):this.extend(a.N.convert(o)):o&&("lng"in o||"lon"in o)&&"lat"in o?this.extend(a.N.convert(o)):this;if(m=o._sw,y=o._ne,!m||!y)return this}return c||d?(c.lng=Math.min(m.lng,c.lng),c.lat=Math.min(m.lat,c.lat),d.lng=Math.max(y.lng,d.lng),d.lat=Math.max(y.lat,d.lat)):(this._sw=new a.N(m.lng,m.lat),this._ne=new a.N(y.lng,y.lat)),this}getCenter(){return new a.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.N(this.getWest(),this.getNorth())}getSouthEast(){return new a.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){let{lng:c,lat:d}=a.N.convert(o),m=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&m}static convert(o){return o instanceof Ee?o:o&&new Ee(o)}static fromLngLat(o,c=0){let d=360*c/40075017,m=d/Math.cos(Math.PI/180*o.lat);return new Ee(new a.N(o.lng-m,o.lat-d),new a.N(o.lng+m,o.lat+d))}adjustAntiMeridian(){let o=new a.N(this._sw.lng,this._sw.lat),c=new a.N(this._ne.lng,this._ne.lat);return new Ee(o,o.lng>c.lng?new a.N(c.lng+360,c.lat):c)}}class No{constructor(o,c,d){this.bounds=Ee.convert(this.validateBounds(o)),this.minzoom=c||0,this.maxzoom=d||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){let c=Math.pow(2,o.z),d=Math.floor(a.O(this.bounds.getWest())*c),m=Math.floor(a.Q(this.bounds.getNorth())*c),y=Math.ceil(a.O(this.bounds.getEast())*c),I=Math.ceil(a.Q(this.bounds.getSouth())*c);return o.x>=d&&o.x<y&&o.y>=m&&o.y<I}}class Hs extends a.E{constructor(o,c,d,m){if(super(),this.id=o,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.M(c,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let o=yield Ss(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),o&&(a.e(this,o),o.bounds&&(this.tileBounds=new No(o.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(o){this._tileJSONRequest=null,this.fire(new a.j(o))}})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.abort(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(o){return a._(this,void 0,void 0,function*(){let c=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(c,"Tile"),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(o.actor&&o.state!=="expired"){if(o.state==="loading")return new Promise((y,I)=>{o.reloadPromise={resolve:y,reject:I}})}else o.actor=this.dispatcher.getActor(),m="LT";o.abortController=new AbortController;try{let y=yield o.actor.sendAsync({type:m,data:d},o.abortController);if(delete o.abortController,o.aborted)return;this._afterTileLoadWorkerResponse(o,y)}catch(y){if(delete o.abortController,o.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(o,null)}})}_afterTileLoadWorkerResponse(o,c){if(c&&c.resourceTiming&&(o.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&o.setExpiryData(c),o.loadVectorData(c,this.map.painter),o.reloadPromise){let d=o.reloadPromise;o.reloadPromise=null,this.loadTile(o).then(d.resolve).catch(d.reject)}}abortTile(o){return a._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.actor&&(yield o.actor.sendAsync({type:"AT",data:{uid:o.uid,type:this.type,source:this.id}}))})}unloadTile(o){return a._(this,void 0,void 0,function*(){o.unloadVectorData(),o.actor&&(yield o.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Xt extends a.E{constructor(o,c,d,m){super(),this.id=o,this.dispatcher=d,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},c),a.e(this,a.M(c,["url","scheme","tileSize"]))}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let o=yield Ss(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,o&&(a.e(this,o),o.bounds&&(this.tileBounds=new No(o.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(o){this._tileJSONRequest=null,this.fire(new a.j(o))}})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(o){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}serialize(){return a.e({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o){return a._(this,void 0,void 0,function*(){let c=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.abortController=new AbortController;try{let d=yield $.getImage(this.map._requestManager.transformRequest(c,"Tile"),o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&o.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});let m=this.map.painter.context,y=m.gl,I=d.data;o.texture=this.map.painter.getTileTexture(I.width),o.texture?o.texture.update(I,{useMipmap:!0}):(o.texture=new Le(m,I,y.RGBA,{useMipmap:!0}),o.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),o.state="loaded"}}catch(d){if(delete o.abortController,o.aborted)o.state="unloaded";else if(d)throw o.state="errored",d}})}abortTile(o){return a._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController)})}unloadTile(o){return a._(this,void 0,void 0,function*(){o.texture&&this.map.painter.saveTileTexture(o.texture)})}hasTransition(){return!1}}class Cr extends Xt{constructor(o,c,d,m){super(o,c,d,m),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(o){return a._(this,void 0,void 0,function*(){let c=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(c,"Tile");o.neighboringTiles=this._getNeighboringTiles(o.tileID),o.abortController=new AbortController;try{let m=yield $.getImage(d,o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(m&&m.data){let y=m.data;this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&o.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});let I=a.b(y)&&a.U()?y:yield this.readImageNow(y),A={type:this.type,uid:o.uid,source:this.id,rawImageData:I,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!o.actor||o.state==="expired"){o.actor=this.dispatcher.getActor();let M=yield o.actor.sendAsync({type:"LDT",data:A});o.dem=M,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded"}}}catch(m){if(delete o.abortController,o.aborted)o.state="unloaded";else if(m)throw o.state="errored",m}})}readImageNow(o){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&a.V()){let c=o.width+2,d=o.height+2;try{return new a.R({width:c,height:d},(yield a.W(o,-1,-1,c,d)))}catch(m){}}return b.getImageData(o,1)})}_getNeighboringTiles(o){let c=o.canonical,d=Math.pow(2,c.z),m=(c.x-1+d)%d,y=c.x===0?o.wrap-1:o.wrap,I=(c.x+1+d)%d,A=c.x+1===d?o.wrap+1:o.wrap,M={};return M[new a.S(o.overscaledZ,y,c.z,m,c.y).key]={backfilled:!1},M[new a.S(o.overscaledZ,A,c.z,I,c.y).key]={backfilled:!1},c.y>0&&(M[new a.S(o.overscaledZ,y,c.z,m,c.y-1).key]={backfilled:!1},M[new a.S(o.overscaledZ,o.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},M[new a.S(o.overscaledZ,A,c.z,I,c.y-1).key]={backfilled:!1}),c.y+1<d&&(M[new a.S(o.overscaledZ,y,c.z,m,c.y+1).key]={backfilled:!1},M[new a.S(o.overscaledZ,o.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},M[new a.S(o.overscaledZ,A,c.z,I,c.y+1).key]={backfilled:!1}),M}unloadTile(o){return a._(this,void 0,void 0,function*(){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&(yield o.actor.sendAsync({type:"RDT",data:{type:this.type,uid:o.uid,source:this.id}}))})}}class Ks extends a.E{constructor(o,c,d,m){super(),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(m),this._data=c.data,this._options=a.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;let y=a.X/this.tileSize;c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*y,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*y,extent:a.X,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:a.X,radius:(c.clusterRadius||50)*y,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._updateWorkerData(),this}updateData(o){return this._updateWorkerData(o),this}getData(){return a._(this,void 0,void 0,function*(){let o=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:o})})}setClusterOptions(o){return this.workerOptions.cluster=o.cluster,o&&(o.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=o.clusterRadius),o.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=o.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(o){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:o,source:this.id}})}getClusterChildren(o){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:o,source:this.id}})}getClusterLeaves(o,c,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:o,limit:c,offset:d}})}_updateWorkerData(o){return a._(this,void 0,void 0,function*(){let c=a.e({type:this.type},this.workerOptions);o?c.dataDiff=o:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(b.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"}));try{let d=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let m=null;d.resourceTiming&&d.resourceTiming[this.id]&&(m=d.resourceTiming[this.id].slice(0));let y={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&a.e(y,{resourceTiming:m}),this.fire(new a.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new a.k("dataabort",{dataType:"source"}));this.fire(new a.j(d))}})}loaded(){return this._pendingLoads===0}loadTile(o){return a._(this,void 0,void 0,function*(){let c=o.actor?"RT":"LT";o.actor=this.actor;let d={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.abortController=new AbortController;let m=yield this.actor.sendAsync({type:c,data:d},o.abortController);delete o.abortController,o.unloadVectorData(),o.aborted||o.loadVectorData(m,this.map.painter,c==="RT")})}abortTile(o){return a._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.aborted=!0})}unloadTile(o){return a._(this,void 0,void 0,function*(){o.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var pa=a.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class mo extends a.E{constructor(o,c,d,m){super(),this.id=o,this.dispatcher=d,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=c}load(o){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let c=yield $.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,o&&(this.coordinates=o),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new a.j(c))}})}loaded(){return this._loaded}updateImage(o){return o.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=o.url,this.load(o.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(o){this.coordinates=o;let c=o.map(a.Z.fromLngLat);this.tileID=function(m){let y=1/0,I=1/0,A=-1/0,M=-1/0;for(let G of m)y=Math.min(y,G.x),I=Math.min(I,G.y),A=Math.max(A,G.x),M=Math.max(M,G.y);let D=Math.max(A-y,M-I),N=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),F=Math.pow(2,N);return new a.a1(N,Math.floor((y+A)/2*F),Math.floor((I+M)/2*F))}(c),this.minzoom=this.maxzoom=this.tileID.z;let d=c.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new a.$,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,a.X,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,a.X),this._boundsArray.emplaceBack(d[2].x,d[2].y,a.X,a.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let o=this.map.painter.context,c=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,pa.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Le(o,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let d=!1;for(let m in this.tiles){let y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(o){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={}):o.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Ts extends mo{constructor(o,c,d,m){super(o,c,d,m),this.roundZoom=!0,this.type="video",this.options=c}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;let o=this.options;this.urls=[];for(let c of o.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{let c=yield a.a3(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new a.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){let c=this.video.seekable;o<c.start(0)||o>c.end(0)?this.fire(new a.j(new a.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let o=this.map.painter.context,c=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,pa.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new Le(o,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let d=!1;for(let m in this.tiles){let y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class zi extends mo{constructor(o,c,d,m){super(o,c,d,m),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(I=>typeof I!="number"))||this.fire(new a.j(new a.a2(`sources.${o}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new a.j(new a.a2(`sources.${o}`,null,"missing required property \"coordinates\""))),c.animate&&typeof c.animate!="boolean"&&this.fire(new a.j(new a.a2(`sources.${o}`,null,"optional \"animate\" property must be a boolean value"))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.a2(`sources.${o}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new a.j(new a.a2(`sources.${o}`,null,"missing required property \"canvas\""))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let c=this.map.painter.context,d=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,pa.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Le(c,this.canvas,d.RGBA,{premultiply:!0});let m=!1;for(let y in this.tiles){let I=this.tiles[y];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,m=!0)}m&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}let Xs={},Ys=_=>{switch(_){case"geojson":return Ks;case"image":return mo;case"raster":return Xt;case"raster-dem":return Cr;case"vector":return Hs;case"video":return Ts;case"canvas":return zi;}return Xs[_]},Ne="RTLPluginLoaded";class da extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Es()}_syncState(o){return this.status=o,this.dispatcher.broadcast("SRPS",{pluginStatus:o,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(o){return a._(this,arguments,void 0,function*(c,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=b.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.k(Ne))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Zn=null;function ii(){return Zn||(Zn=new da),Zn}class ji{constructor(o,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=o,this.uid=a.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(o){let c=o+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(o,c,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(m,y){let I={};if(!y)return I;for(let A of m){let M=A.layerIds.map(D=>y.getLayer(D)).filter(Boolean);if(M.length!==0){A.layers=M,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(D=>M.filter(N=>N.id===D)[0]));for(let D of M)I[D.id]=A}}return I}(o.buckets,c.style),this.hasSymbolBuckets=!1;for(let m in this.buckets){let y=this.buckets[m];if(y instanceof a.a6){if(this.hasSymbolBuckets=!0,!d)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let m in this.buckets){let y=this.buckets[m];if(y instanceof a.a6&&y.hasRTLText){this.hasRTLText=!0,ii().lazyLoad();break}}this.queryPadding=0;for(let m in this.buckets){let y=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(m).queryRadius(y))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new a.a5}unloadVectorData(){for(let o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(let d in this.buckets){let m=this.buckets[d];m.uploadPending()&&m.upload(o)}let c=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Le(o,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Le(o,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,c,d,m,y,I,A,M,D,N){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:y,scale:I,tileSize:this.tileSize,pixelPosMatrix:N,transform:M,params:A,queryPadding:this.queryPadding*D},o,c,d):{}}querySourceFeatures(o,c){let d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;let m=d.loadVTLayers(),y=c&&c.sourceLayer?c.sourceLayer:"",I=m._geojsonTileLayer||m[y];if(!I)return;let A=a.a7(c&&c.filter),{z:M,x:D,y:N}=this.tileID.canonical,F={z:M,x:D,y:N};for(let G=0;G<I.length;G++){let Y=I.feature(G);if(A.needGeometry){let le=a.a8(Y,!0);if(!A.filter(new a.z(this.tileID.overscaledZ),le,this.tileID.canonical))continue}else if(!A.filter(new a.z(this.tileID.overscaledZ),Y))continue;let ee=d.getId(Y,y),ae=new a.a9(Y,M,D,N,ee);ae.tile=F,o.push(ae)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){let c=this.expirationTime;if(o.cacheControl){let d=a.aa(o.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){let d=Date.now(),m=!1;if(this.expirationTime>d)m=!1;else if(c){if(this.expirationTime<c)m=!0;else{let y=this.expirationTime-c;y?this.expirationTime=d+Math.max(y,3e4):m=!0}}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;let d=this.latestFeatureIndex.loadVTLayers();for(let m in this.buckets){if(!c.style.hasLayer(m))continue;let y=this.buckets[m],I=y.layers[0].sourceLayer||"_geojsonTileLayer",A=d[I],M=o[I];if(!A||!M||Object.keys(M).length===0)continue;y.update(M,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});let D=c&&c.style&&c.style.getLayer(m);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<b.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=b.now()+o}setDependencies(o,c){let d={};for(let m of c)d[m]=!0;this.dependencies[o]=d}hasDependency(o,c){for(let d of o){let m=this.dependencies[d];if(m){for(let y of c)if(m[y])return!0}}return!1}}class ze{constructor(o,c){this.max=o,this.onRemove=c,this.reset()}reset(){for(let o in this.data)for(let c of this.data[o])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(o,c,d){let m=o.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);let y={value:c,timeout:void 0};if(d!==void 0&&(y.timeout=setTimeout(()=>{this.remove(o,y)},d)),this.data[m].push(y),this.order.push(m),this.order.length>this.max){let I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){let c=this.data[o].shift();return c.timeout&&clearTimeout(c.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),c.value}getByKey(o){let c=this.data[o];return c?c[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,c){if(!this.has(o))return this;let d=o.wrapped().key,m=c===void 0?0:this.data[d].indexOf(c),y=this.data[d][m];return this.data[d].splice(m,1),y.timeout&&clearTimeout(y.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(y.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){let c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(o){let c=[];for(let d in this.data)for(let m of this.data[d])o(m.value)||c.push(m);for(let d of c)this.remove(d.value.tileID,d)}}class It{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,c,d){let m=String(c);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][m]=this.stateChanges[o][m]||{},a.e(this.stateChanges[o][m],d),this.deletedStates[o]===null){this.deletedStates[o]={};for(let y in this.state[o])y!==m&&(this.deletedStates[o][y]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][m]===null){this.deletedStates[o][m]={};for(let y in this.state[o][m])d[y]||(this.deletedStates[o][m][y]=null)}else for(let y in d)this.deletedStates[o]&&this.deletedStates[o][m]&&this.deletedStates[o][m][y]===null&&delete this.deletedStates[o][m][y]}removeFeatureState(o,c,d){if(this.deletedStates[o]===null)return;let m=String(c);if(this.deletedStates[o]=this.deletedStates[o]||{},d&&c!==void 0)this.deletedStates[o][m]!==null&&(this.deletedStates[o][m]=this.deletedStates[o][m]||{},this.deletedStates[o][m][d]=null);else if(c!==void 0){if(this.stateChanges[o]&&this.stateChanges[o][m])for(d in this.deletedStates[o][m]={},this.stateChanges[o][m])this.deletedStates[o][m][d]=null;else this.deletedStates[o][m]=null;}else this.deletedStates[o]=null}getState(o,c){let d=String(c),m=a.e({},(this.state[o]||{})[d],(this.stateChanges[o]||{})[d]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){let y=this.deletedStates[o][c];if(y===null)return{};for(let I in y)delete m[I]}return m}initializeTileState(o,c){o.setFeatureState(this.state,c)}coalesceChanges(o,c){let d={};for(let m in this.stateChanges){this.state[m]=this.state[m]||{};let y={};for(let I in this.stateChanges[m])this.state[m][I]||(this.state[m][I]={}),a.e(this.state[m][I],this.stateChanges[m][I]),y[I]=this.state[m][I];d[m]=y}for(let m in this.deletedStates){this.state[m]=this.state[m]||{};let y={};if(this.deletedStates[m]===null)for(let I in this.state[m])y[I]={},this.state[m][I]={};else for(let I in this.deletedStates[m]){if(this.deletedStates[m][I]===null)this.state[m][I]={};else for(let A of Object.keys(this.deletedStates[m][I]))delete this.state[m][I][A];y[I]=this.state[m][I]}d[m]=d[m]||{},a.e(d[m],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(let m in o)o[m].setFeatureState(d,c)}}class ft extends a.E{constructor(o,c,d){super(),this.id=o,this.dispatcher=d,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,y,I,A)=>{let M=new(Ys(y.type))(m,y,I,A);if(M.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${M.id}`);return M})(o,c,d,this),this._tiles={},this._cache=new ze(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new It,this._didEmitContent=!1,this._updated=!1}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._maxTileCacheZoomLevels=o?o._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let o in this._tiles){let c=this._tiles[o];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,c,d){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(o),this._tileLoaded(o,c,d)}catch(m){o.state="errored",m.status!==404?this._source.fire(new a.j(m,{tile:o})):this.update(this.transform,this.terrain)}})}_unloadTile(o){this._source.unloadTile&&this._source.unloadTile(o)}_abortTile(o){this._source.abortTile&&this._source.abortTile(o),this._source.fire(new a.k("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let c in this._tiles){let d=this._tiles[c];d.upload(o),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(ai).map(o=>o.key)}getRenderableIds(o){let c=[];for(let d in this._tiles)this._isIdRenderable(d,o)&&c.push(this._tiles[d]);return o?c.sort((d,m)=>{let y=d.tileID,I=m.tileID,A=new a.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),M=new a.P(I.canonical.x,I.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-I.overscaledZ||M.y-A.y||M.x-A.x}).map(d=>d.tileID.key):c.map(d=>d.tileID).sort(ai).map(d=>d.key)}hasRenderableParent(o){let c=this.findLoadedParent(o,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(o,c){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(c||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")}}_reloadTile(o,c){return a._(this,void 0,void 0,function*(){let d=this._tiles[o];d&&(d.state!=="loading"&&(d.state=c),yield this._loadTile(d,o,c))})}_tileLoaded(o,c,d){o.timeAdded=b.now(),d==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(c,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){let c=this.getRenderableIds();for(let m=0;m<c.length;m++){let y=c[m];if(o.neighboringTiles&&o.neighboringTiles[y]){let I=this.getTileByID(y);d(o,I),d(I,o)}}function d(m,y){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let I=y.tileID.canonical.x-m.tileID.canonical.x,A=y.tileID.canonical.y-m.tileID.canonical.y,M=Math.pow(2,m.tileID.canonical.z),D=y.tileID.key;I===0&&A===0||Math.abs(A)>1||(Math.abs(I)>1&&(Math.abs(I+M)===1?I+=M:Math.abs(I-M)===1&&(I-=M)),y.dem&&m.dem&&(m.dem.backfillBorder(y.dem,I,A),m.neighboringTiles&&m.neighboringTiles[D]&&(m.neighboringTiles[D].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,c,d,m){for(let y in this._tiles){let I=this._tiles[y];if(m[y]||!I.hasData()||I.tileID.overscaledZ<=c||I.tileID.overscaledZ>d)continue;let A=I.tileID;for(;I&&I.tileID.overscaledZ>c+1;){let D=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[D.key],I&&I.hasData()&&(A=D)}let M=A;for(;M.overscaledZ>c;)if(M=M.scaledTo(M.overscaledZ-1),o[M.key]){m[A.key]=A;break}}}findLoadedParent(o,c){if(o.key in this._loadedParentTiles){let d=this._loadedParentTiles[o.key];return d&&d.tileID.overscaledZ>=c?d:null}for(let d=o.overscaledZ-1;d>=c;d--){let m=o.scaledTo(d),y=this._getLoadedTile(m);if(y)return y}}findLoadedSibling(o){return this._getLoadedTile(o)}_getLoadedTile(o){let c=this._tiles[o.key];return c&&c.hasData()?c:this._cache.getByKey(o.wrapped().key)}updateCacheSize(o){let c=Math.ceil(o.width/this._source.tileSize)+1,d=Math.ceil(o.height/this._source.tileSize)+1,m=Math.floor(c*d*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(y)}handleWrapJump(o){let c=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,c){let d={};for(let m in this._tiles){let y=this._tiles[m];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+c),d[y.tileID.key]=y}this._tiles=d;for(let m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(let m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(o,c,d,m,y,I){let A={},M={},D=Object.keys(o),N=b.now();for(let F of D){let G=o[F],Y=this._tiles[F];if(!Y||Y.fadeEndTime!==0&&Y.fadeEndTime<=N)continue;let ee=this.findLoadedParent(G,c),ae=this.findLoadedSibling(G),le=ee||ae||null;le&&(this._addTile(le.tileID),A[le.tileID.key]=le.tileID),M[F]=G}this._retainLoadedChildren(M,m,d,o);for(let F in A)o[F]||(this._coveredTiles[F]=!0,o[F]=A[F]);if(I){let F={},G={};for(let Y of y)this._tiles[Y.key].hasData()?F[Y.key]=Y:G[Y.key]=Y;for(let Y in G){let ee=G[Y].children(this._source.maxzoom);this._tiles[ee[0].key]&&this._tiles[ee[1].key]&&this._tiles[ee[2].key]&&this._tiles[ee[3].key]&&(F[ee[0].key]=o[ee[0].key]=ee[0],F[ee[1].key]=o[ee[1].key]=ee[1],F[ee[2].key]=o[ee[2].key]=ee[2],F[ee[3].key]=o[ee[3].key]=ee[3],delete G[Y])}for(let Y in G){let ee=G[Y],ae=this.findLoadedParent(ee,this._source.minzoom),le=this.findLoadedSibling(ee),ce=ae||le||null;if(ce){F[ce.tileID.key]=o[ce.tileID.key]=ce.tileID;for(let fe in F)F[fe].isChildOf(ce.tileID)&&delete F[fe]}}for(let Y in this._tiles)F[Y]||(this._coveredTiles[Y]=!0)}}update(o,c){if(!this._sourceLoaded||this._paused)return;let d;this.transform=o,this.terrain=c,this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(N=>new a.S(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y)):(d=o.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(d=d.filter(N=>this._source.hasTile(N)))):d=[];let m=o.coveringZoomLevel(this._source),y=Math.max(m-ft.maxOverzooming,this._source.minzoom),I=Math.max(m+ft.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let N={};for(let F of d)if(F.canonical.z>this._source.minzoom){let G=F.scaledTo(F.canonical.z-1);N[G.key]=G;let Y=F.scaledTo(Math.max(this._source.minzoom,Math.min(F.canonical.z,5)));N[Y.key]=Y}d=d.concat(Object.values(N))}let A=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let M=this._updateRetainedTiles(d,m);Ur(this._source.type)&&this._updateCoveredAndRetainedTiles(M,y,I,m,d,c);for(let N in M)this._tiles[N].clearFadeHold();let D=a.ab(this._tiles,M);for(let N of D){let F=this._tiles[N];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(N)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)}_updateRetainedTiles(o,c){var d;let m={},y={},I=Math.max(c-ft.maxOverzooming,this._source.minzoom),A=Math.max(c+ft.maxUnderzooming,this._source.minzoom),M={};for(let D of o){let N=this._addTile(D);m[D.key]=D,N.hasData()||c<this._source.maxzoom&&(M[D.key]=D)}this._retainLoadedChildren(M,c,A,m);for(let D of o){let N=this._tiles[D.key];if(N.hasData())continue;if(c+1>this._source.maxzoom){let G=D.children(this._source.maxzoom)[0],Y=this.getTile(G);if(Y&&Y.hasData()){m[G.key]=G;continue}}else{let G=D.children(this._source.maxzoom);if(m[G[0].key]&&m[G[1].key]&&m[G[2].key]&&m[G[3].key])continue}let F=N.wasRequested();for(let G=D.overscaledZ-1;G>=I;--G){let Y=D.scaledTo(G);if(y[Y.key])break;if(y[Y.key]=!0,N=this.getTile(Y),!N&&F&&(N=this._addTile(Y)),N){let ee=N.hasData();if((ee||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||F)&&(m[Y.key]=Y),F=N.wasRequested(),ee)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let o in this._tiles){let c=[],d,m=this._tiles[o].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){d=this._loadedParentTiles[m.key];break}c.push(m.key);let y=m.scaledTo(m.overscaledZ-1);if(d=this._getLoadedTile(y),d)break;m=y}for(let y of c)this._loadedParentTiles[y]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let o in this._tiles){let c=this._tiles[o].tileID,d=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=d}}_addTile(o){let c=this._tiles[o.key];if(c)return c;c=this._cache.getAndRemove(o),c&&(this._setTileReloadTimer(o.key,c),c.tileID=o,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,c)));let d=c;return c||(c=new ji(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(c,o.key,c.state)),c.uses++,this._tiles[o.key]=c,d||this._source.fire(new a.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(o,c){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);let d=c.getExpiryTimeout();d&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},d))}_removeTile(o){let c=this._tiles[o];c&&(c.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(o){let c=o.sourceDataType;o.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&o.dataType==="source"&&c==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,c,d){let m=[],y=this.transform;if(!y)return m;let I=d?y.getCameraQueryGeometry(o):o,A=o.map(ee=>y.pointCoordinate(ee,this.terrain)),M=I.map(ee=>y.pointCoordinate(ee,this.terrain)),D=this.getIds(),N=1/0,F=1/0,G=-1/0,Y=-1/0;for(let ee of M)N=Math.min(N,ee.x),F=Math.min(F,ee.y),G=Math.max(G,ee.x),Y=Math.max(Y,ee.y);for(let ee=0;ee<D.length;ee++){let ae=this._tiles[D[ee]];if(ae.holdingForFade())continue;let le=ae.tileID,ce=Math.pow(2,y.zoom-ae.tileID.overscaledZ),fe=c*ae.queryPadding*a.X/ae.tileSize/ce,te=[le.getTilePoint(new a.Z(N,F)),le.getTilePoint(new a.Z(G,Y))];if(te[0].x-fe<a.X&&te[0].y-fe<a.X&&te[1].x+fe>=0&&te[1].y+fe>=0){let me=A.map(we=>le.getTilePoint(we)),ge=M.map(we=>le.getTilePoint(we));m.push({tile:ae,tileID:le,queryGeometry:me,cameraQueryGeometry:ge,scale:ce})}}return m}getVisibleCoordinates(o){let c=this.getRenderableIds(o).map(d=>this._tiles[d].tileID);for(let d of c)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Ur(this._source.type)){let o=b.now();for(let c in this._tiles)if(this._tiles[c].fadeEndTime>=o)return!0}return!1}setFeatureState(o,c,d){this._state.updateState(o=o||"_geojsonTileLayer",c,d)}removeFeatureState(o,c,d){this._state.removeFeatureState(o=o||"_geojsonTileLayer",c,d)}getFeatureState(o,c){return this._state.getState(o=o||"_geojsonTileLayer",c)}setDependencies(o,c,d){let m=this._tiles[o];m&&m.setDependencies(c,d)}reloadTilesForDependencies(o,c){for(let d in this._tiles)this._tiles[d].hasDependency(o,c)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(o,c))}}function ai(_,o){let c=Math.abs(2*_.wrap)-+(_.wrap<0),d=Math.abs(2*o.wrap)-+(o.wrap<0);return _.overscaledZ-o.overscaledZ||d-c||o.canonical.y-_.canonical.y||o.canonical.x-_.canonical.x}function Ur(_){return _==="raster"||_==="image"||_==="video"}ft.maxOverzooming=10,ft.maxUnderzooming=3;class Et{constructor(o,c){this.reset(o,c)}reset(o,c){this.points=o||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=a.ac(o,0,1);let c=1,d=this._distances[c],m=o*this.paddedLength+this.padding;for(;d<m&&c<this._distances.length;)d=this._distances[++c];let y=c-1,I=this._distances[y],A=d-I,M=A>0?(m-I)/A:0;return this.points[y].mult(1-M).add(this.points[c].mult(M))}}function Fo(_,o){let c=!0;return _==="always"||_!=="never"&&o!=="never"||(c=!1),c}class Is{constructor(o,c,d){let m=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(o/d),this.yCellCount=Math.ceil(c/d);for(let I=0;I<this.xCellCount*this.yCellCount;I++)m.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=c,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,c,d,m,y){this._forEachCell(c,d,m,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(y)}insertCircle(o,c,d,m){this._forEachCell(c-m,d-m,c+m,d+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(c),this.circles.push(d),this.circles.push(m)}_insertBoxCell(o,c,d,m,y,I){this.boxCells[y].push(I)}_insertCircleCell(o,c,d,m,y,I){this.circleCells[y].push(I)}_query(o,c,d,m,y,I,A){if(d<0||o>this.width||m<0||c>this.height)return[];let M=[];if(o<=0&&c<=0&&this.width<=d&&this.height<=m){if(y)return[{key:null,x1:o,y1:c,x2:d,y2:m}];for(let D=0;D<this.boxKeys.length;D++)M.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){let N=this.circles[3*D],F=this.circles[3*D+1],G=this.circles[3*D+2];M.push({key:this.circleKeys[D],x1:N-G,y1:F-G,x2:N+G,y2:F+G})}}else this._forEachCell(o,c,d,m,this._queryCell,M,{hitTest:y,overlapMode:I,seenUids:{box:{},circle:{}}},A);return M}query(o,c,d,m){return this._query(o,c,d,m,!1,null)}hitTest(o,c,d,m,y,I){return this._query(o,c,d,m,!0,y,I).length>0}hitTestCircle(o,c,d,m,y){let I=o-d,A=o+d,M=c-d,D=c+d;if(A<0||I>this.width||D<0||M>this.height)return!1;let N=[];return this._forEachCell(I,M,A,D,this._queryCellCircle,N,{hitTest:!0,overlapMode:m,circle:{x:o,y:c,radius:d},seenUids:{box:{},circle:{}}},y),N.length>0}_queryCell(o,c,d,m,y,I,A,M){let{seenUids:D,hitTest:N,overlapMode:F}=A,G=this.boxCells[y];if(G!==null){let ee=this.bboxes;for(let ae of G)if(!D.box[ae]){D.box[ae]=!0;let le=4*ae,ce=this.boxKeys[ae];if(o<=ee[le+2]&&c<=ee[le+3]&&d>=ee[le+0]&&m>=ee[le+1]&&(!M||M(ce))&&(!N||!Fo(F,ce.overlapMode))&&(I.push({key:ce,x1:ee[le],y1:ee[le+1],x2:ee[le+2],y2:ee[le+3]}),N))return!0}}let Y=this.circleCells[y];if(Y!==null){let ee=this.circles;for(let ae of Y)if(!D.circle[ae]){D.circle[ae]=!0;let le=3*ae,ce=this.circleKeys[ae];if(this._circleAndRectCollide(ee[le],ee[le+1],ee[le+2],o,c,d,m)&&(!M||M(ce))&&(!N||!Fo(F,ce.overlapMode))){let fe=ee[le],te=ee[le+1],me=ee[le+2];if(I.push({key:ce,x1:fe-me,y1:te-me,x2:fe+me,y2:te+me}),N)return!0}}}return!1}_queryCellCircle(o,c,d,m,y,I,A,M){let{circle:D,seenUids:N,overlapMode:F}=A,G=this.boxCells[y];if(G!==null){let ee=this.bboxes;for(let ae of G)if(!N.box[ae]){N.box[ae]=!0;let le=4*ae,ce=this.boxKeys[ae];if(this._circleAndRectCollide(D.x,D.y,D.radius,ee[le+0],ee[le+1],ee[le+2],ee[le+3])&&(!M||M(ce))&&!Fo(F,ce.overlapMode))return I.push(!0),!0}}let Y=this.circleCells[y];if(Y!==null){let ee=this.circles;for(let ae of Y)if(!N.circle[ae]){N.circle[ae]=!0;let le=3*ae,ce=this.circleKeys[ae];if(this._circlesCollide(ee[le],ee[le+1],ee[le+2],D.x,D.y,D.radius)&&(!M||M(ce))&&!Fo(F,ce.overlapMode))return I.push(!0),!0}}}_forEachCell(o,c,d,m,y,I,A,M){let D=this._convertToXCellCoord(o),N=this._convertToYCellCoord(c),F=this._convertToXCellCoord(d),G=this._convertToYCellCoord(m);for(let Y=D;Y<=F;Y++)for(let ee=N;ee<=G;ee++)if(y.call(this,o,c,d,m,this.xCellCount*ee+Y,I,A,M))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,c,d,m,y,I){let A=m-o,M=y-c,D=d+I;return D*D>A*A+M*M}_circleAndRectCollide(o,c,d,m,y,I,A){let M=(I-m)/2,D=Math.abs(o-(m+M));if(D>M+d)return!1;let N=(A-y)/2,F=Math.abs(c-(y+N));if(F>N+d)return!1;if(D<=M||F<=N)return!0;let G=D-M,Y=F-N;return G*G+Y*Y<=d*d}}function Js(_,o,c,d,m){let y=a.H();return o?(a.K(y,y,[1/m,1/m,1]),c||a.ad(y,y,d.angle)):a.L(y,d.labelPlaneMatrix,_),y}function zo(_,o,c,d,m){if(o){let y=a.ae(_);return a.K(y,y,[m,m,1]),c||a.ad(y,y,-d.angle),y}return d.glCoordMatrix}function oe(_,o,c,d){let m;d?(m=[_,o,d(_,o),1],a.af(m,m,c)):(m=[_,o,0,1],Qt(m,m,c));let y=m[3];return{point:new a.P(m[0]/y,m[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function B(_,o){return .5+_/o*.5}function j(_,o){return _.x>=-o[0]&&_.x<=o[0]&&_.y>=-o[1]&&_.y<=o[1]}function J(_,o,c,d,m,y,I,A,M,D,N,F,G,Y,ee){let ae=d?_.textSizeData:_.iconSizeData,le=a.ag(ae,c.transform.zoom),ce=[256/c.width*2+1,256/c.height*2+1],fe=d?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;fe.clear();let te=_.lineVertexArray,me=d?_.text.placedSymbolArray:_.icon.placedSymbolArray,ge=c.transform.width/c.transform.height,we=!1;for(let Pe=0;Pe<me.length;Pe++){let ke=me.get(Pe);if(ke.hidden||ke.writingMode===a.ah.vertical&&!we){ht(ke.numGlyphs,fe);continue}we=!1;let We=oe(ke.anchorX,ke.anchorY,o,ee);if(!j(We.point,ce)){ht(ke.numGlyphs,fe);continue}let Je=B(c.transform.cameraToCenterDistance,We.signedDistanceFromCamera),Ve=a.ai(ae,le,ke),Be=I?Ve/Je:Ve*Je,it={getElevation:ee,labelPlaneMatrix:m,lineVertexArray:te,pitchWithMap:I,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:D,tileAnchorPoint:new a.P(ke.anchorX,ke.anchorY),unwrappedTileID:N,width:F,height:G,translation:Y},bt=ve(it,ke,Be,!1,A,o,y,_.glyphOffsetArray,fe,ge,M);we=bt.useVertical,(bt.notEnoughRoom||we||bt.needsFlipping&&ve(it,ke,Be,!0,A,o,y,_.glyphOffsetArray,fe,ge,M).notEnoughRoom)&&ht(ke.numGlyphs,fe)}d?_.text.dynamicLayoutVertexBuffer.updateData(fe):_.icon.dynamicLayoutVertexBuffer.updateData(fe)}function ie(_,o,c,d,m,y,I,A){let M=y.glyphStartIndex+y.numGlyphs,D=y.lineStartIndex,N=y.lineStartIndex+y.lineLength,F=o.getoffsetX(y.glyphStartIndex),G=o.getoffsetX(M-1),Y=je(_*F,c,d,m,y.segment,D,N,A,I);if(!Y)return null;let ee=je(_*G,c,d,m,y.segment,D,N,A,I);return ee?A.projectionCache.anyProjectionOccluded?null:{first:Y,last:ee}:null}function de(_,o,c,d){return _===a.ah.horizontal&&Math.abs(c.y-o.y)>Math.abs(c.x-o.x)*d?{useVertical:!0}:(_===a.ah.vertical?o.y<c.y:o.x>c.x)?{needsFlipping:!0}:null}function ve(_,o,c,d,m,y,I,A,M,D,N){let F=c/24,G=o.lineOffsetX*F,Y=o.lineOffsetY*F,ee;if(o.numGlyphs>1){let ae=o.glyphStartIndex+o.numGlyphs,le=o.lineStartIndex,ce=o.lineStartIndex+o.lineLength,fe=ie(F,A,G,Y,d,o,N,_);if(!fe)return{notEnoughRoom:!0};let te=oe(fe.first.point.x,fe.first.point.y,I,_.getElevation).point,me=oe(fe.last.point.x,fe.last.point.y,I,_.getElevation).point;if(m&&!d){let ge=de(o.writingMode,te,me,D);if(ge)return ge}ee=[fe.first];for(let ge=o.glyphStartIndex+1;ge<ae-1;ge++)ee.push(je(F*A.getoffsetX(ge),G,Y,d,o.segment,le,ce,_,N));ee.push(fe.last)}else{if(m&&!d){let le=oe(_.tileAnchorPoint.x,_.tileAnchorPoint.y,y,_.getElevation).point,ce=o.lineStartIndex+o.segment+1,fe=new a.P(_.lineVertexArray.getx(ce),_.lineVertexArray.gety(ce)),te=oe(fe.x,fe.y,y,_.getElevation),me=te.signedDistanceFromCamera>0?te.point:function(we,Pe,ke,We,Je,Ve){return _e(we,Pe,ke,1,Je,Ve)}(_.tileAnchorPoint,fe,le,0,y,_),ge=de(o.writingMode,le,me,D);if(ge)return ge}let ae=je(F*A.getoffsetX(o.glyphStartIndex),G,Y,d,o.segment,o.lineStartIndex,o.lineStartIndex+o.lineLength,_,N);if(!ae||_.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ee=[ae]}for(let ae of ee)a.aj(M,ae.point,ae.angle);return{}}function _e(_,o,c,d,m,y){let I=_.add(_.sub(o)._unit()),A=m!==void 0?oe(I.x,I.y,m,y.getElevation).point:Te(I.x,I.y,y).point,M=c.sub(A);return c.add(M._mult(d/M.mag()))}function he(_,o,c){let d=o.projectionCache;if(d.projections[_])return d.projections[_];let m=new a.P(o.lineVertexArray.getx(_),o.lineVertexArray.gety(_)),y=Te(m.x,m.y,o);if(y.signedDistanceFromCamera>0)return d.projections[_]=y.point,d.anyProjectionOccluded=d.anyProjectionOccluded||y.isOccluded,y.point;let I=_-c.direction;return function(A,M,D,N,F){return _e(A,M,D,N,void 0,F)}(c.distanceFromAnchor===0?o.tileAnchorPoint:new a.P(o.lineVertexArray.getx(I),o.lineVertexArray.gety(I)),m,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,o)}function Te(_,o,c){let d=_+c.translation[0],m=o+c.translation[1],y;return!c.pitchWithMap&&c.projection.useSpecialProjectionForSymbols?(y=c.projection.projectTileCoordinates(d,m,c.unwrappedTileID,c.getElevation),y.point.x=(.5*y.point.x+.5)*c.width,y.point.y=(.5*-y.point.y+.5)*c.height):(y=oe(d,m,c.labelPlaneMatrix,c.getElevation),y.isOccluded=!1),y}function Me(_,o,c){return _._unit()._perp()._mult(o*c)}function be(_,o,c,d,m,y,I,A,M){if(A.projectionCache.offsets[_])return A.projectionCache.offsets[_];let D=c.add(o);if(_+M.direction<d||_+M.direction>=m)return A.projectionCache.offsets[_]=D,D;let N=he(_+M.direction,A,M),F=Me(N.sub(c),I,M.direction),G=c.add(F),Y=N.add(F);return A.projectionCache.offsets[_]=a.ak(y,D,G,Y)||D,A.projectionCache.offsets[_]}function je(_,o,c,d,m,y,I,A,M){let D=d?_-o:_+o,N=D>0?1:-1,F=0;d&&(N*=-1,F=Math.PI),N<0&&(F+=Math.PI);let G,Y=N>0?y+m:y+m+1;A.projectionCache.cachedAnchorPoint?G=A.projectionCache.cachedAnchorPoint:(G=Te(A.tileAnchorPoint.x,A.tileAnchorPoint.y,A).point,A.projectionCache.cachedAnchorPoint=G);let ee,ae,le=G,ce=G,fe=0,te=0,me=Math.abs(D),ge=[],we;for(;fe+te<=me;){if(Y+=N,Y<y||Y>=I)return null;fe+=te,ce=le,ae=ee;let We={absOffsetX:me,direction:N,distanceFromAnchor:fe,previousVertex:ce};if(le=he(Y,A,We),c===0)ge.push(ce),we=le.sub(ce);else{let Je,Ve=le.sub(ce);Je=Ve.mag()===0?Me(he(Y+N,A,We).sub(le),c,N):Me(Ve,c,N),ae||(ae=ce.add(Je)),ee=be(Y,Je,le,y,I,ae,c,A,We),ge.push(ae),we=ee.sub(ae)}te=we.mag()}let Pe=we._mult((me-fe)/te)._add(ae||ce),ke=F+Math.atan2(le.y-ce.y,le.x-ce.x);return ge.push(Pe),{point:Pe,angle:M?ke:0,path:ge}}let lt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ht(_,o){for(let c=0;c<_;c++){let d=o.length;o.resize(d+4),o.float32.set(lt,3*d)}}function Qt(_,o,c){let d=o[0],m=o[1];return _[0]=c[0]*d+c[4]*m+c[12],_[1]=c[1]*d+c[5]*m+c[13],_[3]=c[3]*d+c[7]*m+c[15],_}let Ct=100;class er{constructor(o,c,d=new Is(o.width+200,o.height+200,25),m=new Is(o.width+200,o.height+200,25)){this.transform=o,this.mapProjection=c,this.grid=d,this.ignoredGrid=m,this.pitchFactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+Ct,this.screenBottomBoundary=o.height+Ct,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,c,d,m,y,I,A,M,D,N,F){let G=o.anchorPointX+M[0],Y=o.anchorPointY+M[1],ee=this.projectAndGetPerspectiveRatio(m,G,Y,y,N),ae=d*ee.perspectiveRatio,le;if(I||A)le=this._projectCollisionBox(o,ae,m,y,I,A,M,ee,N,F);else{let ge=ee.point.x+(F?F.x*ae:0),we=ee.point.y+(F?F.y*ae:0);le={allPointsOccluded:!1,box:[ge+o.x1*ae,we+o.y1*ae,ge+o.x2*ae,we+o.y2*ae]}}let[ce,fe,te,me]=le.box;return this.mapProjection.useSpecialProjectionForSymbols&&(I?le.allPointsOccluded:this.mapProjection.isOccluded(G,Y,y))||ee.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(ce,fe,te,me)||c!=="always"&&this.grid.hitTest(ce,fe,te,me,c,D)?{box:[ce,fe,te,me],placeable:!1,offscreen:!1}:{box:[ce,fe,te,me],placeable:!0,offscreen:this.isOffscreen(ce,fe,te,me)}}placeCollisionCircles(o,c,d,m,y,I,A,M,D,N,F,G,Y,ee,ae,le){let ce=[],fe=new a.P(c.anchorX,c.anchorY),te=this.getPerspectiveRatio(I,fe.x,fe.y,A,le),me=(F?y/te:y*te)/a.ap,ge={getElevation:le,labelPlaneMatrix:M,lineVertexArray:d,pitchWithMap:F,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:fe,unwrappedTileID:A,width:this.transform.width,height:this.transform.height,translation:ae},we=ie(me,m,c.lineOffsetX*me,c.lineOffsetY*me,!1,c,!1,ge),Pe=!1,ke=!1,We=!0;if(we){let Je=.5*Y*te+ee,Ve=new a.P(-100,-100),Be=new a.P(this.screenRightBoundary,this.screenBottomBoundary),it=new Et,bt=we.first,$e=we.last,Ke=[];for(let Mt=bt.path.length-1;Mt>=1;Mt--)Ke.push(bt.path[Mt]);for(let Mt=1;Mt<$e.path.length;Mt++)Ke.push($e.path[Mt]);let xt=2.5*Je;if(D){let Mt=this.projectPathToScreenSpace(Ke,ge,D);Ke=Mt.some(Bt=>Bt.signedDistanceFromCamera<=0)?[]:Mt.map(Bt=>Bt.point)}let Dr=[];if(Ke.length>0){let Mt=Ke[0].clone(),Bt=Ke[0].clone();for(let Lr=1;Lr<Ke.length;Lr++)Mt.x=Math.min(Mt.x,Ke[Lr].x),Mt.y=Math.min(Mt.y,Ke[Lr].y),Bt.x=Math.max(Bt.x,Ke[Lr].x),Bt.y=Math.max(Bt.y,Ke[Lr].y);Dr=Mt.x>=Ve.x&&Bt.x<=Be.x&&Mt.y>=Ve.y&&Bt.y<=Be.y?[Ke]:Bt.x<Ve.x||Mt.x>Be.x||Bt.y<Ve.y||Mt.y>Be.y?[]:a.al([Ke],Ve.x,Ve.y,Be.x,Be.y)}for(let Mt of Dr){it.reset(Mt,.25*Je);let Bt=0;Bt=it.length<=.5*Je?1:Math.ceil(it.paddedLength/xt)+1;for(let Lr=0;Lr<Bt;Lr++){let si=Lr/Math.max(Bt-1,1),wo=it.lerp(si),kr=wo.x+Ct,Vi=wo.y+Ct;ce.push(kr,Vi,Je,0);let Ei=kr-Je,ui=Vi-Je,Si=kr+Je,Vo=Vi+Je;if(We=We&&this.isOffscreen(Ei,ui,Si,Vo),ke=ke||this.isInsideGrid(Ei,ui,Si,Vo),o!=="always"&&this.grid.hitTestCircle(kr,Vi,Je,o,G)&&(Pe=!0,!N))return{circles:[],offscreen:!1,collisionDetected:Pe}}}}return{circles:!N&&Pe||!ke||te<this.perspectiveRatioCutoff?[]:ce,offscreen:We,collisionDetected:Pe}}projectPathToScreenSpace(o,c,d){return o.map(m=>oe(m.x,m.y,d,c.getElevation))}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let c=[],d=1/0,m=1/0,y=-1/0,I=-1/0;for(let N of o){let F=new a.P(N.x+Ct,N.y+Ct);d=Math.min(d,F.x),m=Math.min(m,F.y),y=Math.max(y,F.x),I=Math.max(I,F.y),c.push(F)}let A=this.grid.query(d,m,y,I).concat(this.ignoredGrid.query(d,m,y,I)),M={},D={};for(let N of A){let F=N.key;if(M[F.bucketInstanceId]===void 0&&(M[F.bucketInstanceId]={}),M[F.bucketInstanceId][F.featureIndex])continue;let G=[new a.P(N.x1,N.y1),new a.P(N.x2,N.y1),new a.P(N.x2,N.y2),new a.P(N.x1,N.y2)];a.am(c,G)&&(M[F.bucketInstanceId][F.featureIndex]=!0,D[F.bucketInstanceId]===void 0&&(D[F.bucketInstanceId]=[]),D[F.bucketInstanceId].push(F.featureIndex))}return D}insertCollisionBox(o,c,d,m,y,I){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:y,collisionGroupID:I,overlapMode:c},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,c,d,m,y,I){let A=d?this.ignoredGrid:this.grid,M={bucketInstanceId:m,featureIndex:y,collisionGroupID:I,overlapMode:c};for(let D=0;D<o.length;D+=4)A.insertCircle(M,o[D],o[D+1],o[D+2])}projectAndGetPerspectiveRatio(o,c,d,m,y){let I;y?(I=[c,d,y(c,d),1],a.af(I,I,o)):(I=[c,d,0,1],Qt(I,I,o));let A=I[3];return{point:new a.P((I[0]/A+1)/2*this.transform.width+Ct,(-I[1]/A+1)/2*this.transform.height+Ct),perspectiveRatio:.5+this.transform.cameraToCenterDistance/A*.5,isOccluded:!1,signedDistanceFromCamera:A}}getPerspectiveRatio(o,c,d,m,y){let I=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,d,m,y):oe(c,d,o,y);return .5+this.transform.cameraToCenterDistance/I.signedDistanceFromCamera*.5}isOffscreen(o,c,d,m){return d<Ct||o>=this.screenRightBoundary||m<Ct||c>this.screenBottomBoundary}isInsideGrid(o,c,d,m){return d>=0&&o<this.gridRightBoundary&&m>=0&&c<this.gridBottomBoundary}getViewportMatrix(){let o=a.an([]);return a.J(o,o,[-100,-100,0]),o}_projectCollisionBox(o,c,d,m,y,I,A,M,D,N){let F=new a.P(1,0),G=new a.P(0,1),Y=new a.P(o.anchorPointX+A[0],o.anchorPointY+A[1]);if(I&&!y){let We=this.projectAndGetPerspectiveRatio(d,Y.x+1,Y.y,m,D).point.sub(M.point).unit(),Je=Math.atan(We.y/We.x)+(We.x<0?Math.PI:0),Ve=Math.sin(Je),Be=Math.cos(Je);F=new a.P(Be,Ve),G=new a.P(-Ve,Be)}else if(!I&&y){let We=-this.transform.angle,Je=Math.sin(We),Ve=Math.cos(We);F=new a.P(Ve,Je),G=new a.P(-Je,Ve)}let ee=M.point,ae=c;if(y){ee=Y;let We=this.transform.zoom-Math.floor(this.transform.zoom);ae=Math.pow(2,-We),ae*=this.mapProjection.getPitchedTextCorrection(this.transform,Y,m),N||(ae*=a.ac(.5+M.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}N&&(ee=ee.add(F.mult(N.x*ae)).add(G.mult(N.y*ae)));let le=o.x1*ae,ce=o.x2*ae,fe=(le+ce)/2,te=o.y1*ae,me=o.y2*ae,ge=(te+me)/2,we=[{offsetX:le,offsetY:te},{offsetX:fe,offsetY:te},{offsetX:ce,offsetY:te},{offsetX:ce,offsetY:ge},{offsetX:ce,offsetY:me},{offsetX:fe,offsetY:me},{offsetX:le,offsetY:me},{offsetX:le,offsetY:ge}],Pe=[];for(let{offsetX:We,offsetY:Je}of we)Pe.push(new a.P(ee.x+F.x*We+G.x*Je,ee.y+F.y*We+G.y*Je));let ke=!1;if(y){let We=Pe.map(Je=>this.projectAndGetPerspectiveRatio(d,Je.x,Je.y,m,D));ke=We.some(Je=>!Je.isOccluded),Pe=We.map(Je=>Je.point)}else ke=!0;return{box:a.ao(Pe),allPointsOccluded:!ke}}}function jt(_,o,c){return o*(a.X/(_.tileSize*Math.pow(2,c-_.tileID.overscaledZ)))}class bn{constructor(o,c,d,m){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?c:-c))):m&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Xr{constructor(o,c,d,m,y){this.text=new bn(o?o.text:null,c,d,y),this.icon=new bn(o?o.icon:null,c,m,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Lt{constructor(o,c,d){this.text=o,this.icon=c,this.skipFade=d}}class dr{constructor(){this.invProjMatrix=a.H(),this.viewportMatrix=a.H(),this.circles=[]}}class jr{constructor(o,c,d,m,y){this.bucketInstanceId=o,this.featureIndex=c,this.sourceLayerIndex=d,this.bucketIndex=m,this.tileID=y}}class Nn{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){let c=++this.maxGroupID;this.collisionGroups[o]={ID:c,predicate:d=>d.collisionGroupID===c}}return this.collisionGroups[o]}}function Hn(_,o,c,d,m){let{horizontalAlign:y,verticalAlign:I}=a.au(_);return new a.P(-(y-.5)*o+d[0]*m,-(I-.5)*c+d[1]*m)}class bi{constructor(o,c,d,m,y,I){this.transform=o.clone(),this.terrain=d,this.collisionIndex=new er(this.transform,c),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Nn(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(o){let c=this.terrain;return c?(d,m)=>c.getElevation(o,d,m):null}getBucketParts(o,c,d,m){let y=d.getBucket(c),I=d.latestFeatureIndex;if(!y||!I||c.id!==y.layerIds[0])return;let A=d.collisionBoxArray,M=y.layers[0].layout,D=y.layers[0].paint,N=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),F=d.tileSize/a.X,G=d.tileID.toUnwrapped(),Y=this.transform.calculatePosMatrix(G),ee=M.get("text-pitch-alignment")==="map",ae=M.get("text-rotation-alignment")==="map",le=jt(d,1,this.transform.zoom),ce=this.collisionIndex.mapProjection.translatePosition(this.transform,d,D.get("text-translate"),D.get("text-translate-anchor")),fe=this.collisionIndex.mapProjection.translatePosition(this.transform,d,D.get("icon-translate"),D.get("icon-translate-anchor")),te=Js(Y,ee,ae,this.transform,le),me=null;if(ee){let we=zo(Y,ee,ae,this.transform,le);me=a.L([],this.transform.labelPlaneMatrix,we)}this.retainedQueryData[y.bucketInstanceId]=new jr(y.bucketInstanceId,I,y.sourceLayerIndex,y.index,d.tileID);let ge={bucket:y,layout:M,translationText:ce,translationIcon:fe,posMatrix:Y,unwrappedTileID:G,textLabelPlaneMatrix:te,labelToScreenMatrix:me,scale:N,textPixelRatio:F,holdingForFade:d.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:a.ag(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(m)for(let we of y.sortKeyRanges){let{sortKey:Pe,symbolInstanceStart:ke,symbolInstanceEnd:We}=we;o.push({sortKey:Pe,symbolInstanceStart:ke,symbolInstanceEnd:We,parameters:ge})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:ge})}attemptAnchorPlacement(o,c,d,m,y,I,A,M,D,N,F,G,Y,ee,ae,le,ce,fe,te){let me=a.aq[o.textAnchor],ge=[o.textOffset0,o.textOffset1],we=Hn(me,d,m,ge,y),Pe=this.collisionIndex.placeCollisionBox(c,G,M,D,N,A,I,le,F.predicate,te,we);if((!fe||this.collisionIndex.placeCollisionBox(fe,G,M,D,N,A,I,ce,F.predicate,te,we).placeable)&&Pe.placeable){let ke;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID].text&&(ke=this.prevPlacement.variableOffsets[Y.crossTileID].anchor),Y.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Y.crossTileID]={textOffset:ge,width:d,height:m,anchor:me,textBoxScale:y,prevAnchor:ke},this.markUsedJustification(ee,me,Y,ae),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,ae,Y),this.placedOrientations[Y.crossTileID]=ae),{shift:we,placedGlyphBoxes:Pe}}}placeLayerBucketPart(o,c,d){let{bucket:m,layout:y,translationText:I,translationIcon:A,posMatrix:M,unwrappedTileID:D,textLabelPlaneMatrix:N,labelToScreenMatrix:F,textPixelRatio:G,holdingForFade:Y,collisionBoxArray:ee,partiallyEvaluatedTextSize:ae,collisionGroup:le}=o.parameters,ce=y.get("text-optional"),fe=y.get("icon-optional"),te=a.ar(y,"text-overlap","text-allow-overlap"),me=te==="always",ge=a.ar(y,"icon-overlap","icon-allow-overlap"),we=ge==="always",Pe=y.get("text-rotation-alignment")==="map",ke=y.get("text-pitch-alignment")==="map",We=y.get("icon-text-fit")!=="none",Je=y.get("symbol-z-order")==="viewport-y",Ve=me&&(we||!m.hasIconData()||fe),Be=we&&(me||!m.hasTextData()||ce);!m.collisionArrays&&ee&&m.deserializeCollisionBoxes(ee);let it=this._getTerrainElevationFunc(this.retainedQueryData[m.bucketInstanceId].tileID),bt=($e,Ke,xt)=>{var Dr,Mt;if(c[$e.crossTileID])return;if(Y)return void(this.placements[$e.crossTileID]=new Lt(!1,!1,!1));let Bt=!1,Lr=!1,si=!0,wo=null,kr={box:null,placeable:!1,offscreen:null},Vi={box:null,placeable:!1,offscreen:null},Ei=null,ui=null,Si=null,Vo=0,Tc=0,pd=0;Ke.textFeatureIndex?Vo=Ke.textFeatureIndex:$e.useRuntimeCollisionCircles&&(Vo=$e.featureIndex),Ke.verticalTextFeatureIndex&&(Tc=Ke.verticalTextFeatureIndex);let Ic=Ke.textBox;if(Ic){let ja=Kn=>{let li=a.ah.horizontal;if(m.allowVerticalPlacement&&!Kn&&this.prevPlacement){let xa=this.prevPlacement.placedOrientations[$e.crossTileID];xa&&(this.placedOrientations[$e.crossTileID]=xa,li=xa,this.markUsedOrientation(m,li,$e))}return li},Ba=(Kn,li)=>{if(m.allowVerticalPlacement&&$e.numVerticalGlyphVertices>0&&Ke.verticalTextBox){for(let xa of m.writingModes)if(xa===a.ah.vertical?(kr=li(),Vi=kr):kr=Kn(),kr&&kr.placeable)break}else kr=Kn()},tu=$e.textAnchorOffsetStartIndex,bo=$e.textAnchorOffsetEndIndex;if(bo===tu){let Kn=(li,xa)=>{let Wt=this.collisionIndex.placeCollisionBox(li,te,G,M,D,ke,Pe,I,le.predicate,it);return Wt&&Wt.placeable&&(this.markUsedOrientation(m,xa,$e),this.placedOrientations[$e.crossTileID]=xa),Wt};Ba(()=>Kn(Ic,a.ah.horizontal),()=>{let li=Ke.verticalTextBox;return m.allowVerticalPlacement&&$e.numVerticalGlyphVertices>0&&li?Kn(li,a.ah.vertical):{box:null,offscreen:null}}),ja(kr&&kr.placeable)}else{let Kn=a.aq[(Mt=(Dr=this.prevPlacement)===null||Dr===void 0?void 0:Dr.variableOffsets[$e.crossTileID])===null||Mt===void 0?void 0:Mt.anchor],li=(Wt,nl,Cc)=>{let Ac=Wt.x2-Wt.x1,rw=Wt.y2-Wt.y1,_q=$e.textBoxScale,nw=We&&ge==="never"?nl:null,ru=null,iw=te==="never"?1:2,md="never";Kn&&iw++;for(let mf=0;mf<iw;mf++){for(let vd=tu;vd<bo;vd++){let gd=m.textAnchorOffsets.get(vd);if(Kn&&gd.textAnchor!==Kn)continue;let qc=this.attemptAnchorPlacement(gd,Wt,Ac,rw,_q,Pe,ke,G,M,D,le,md,$e,m,Cc,I,A,nw,it);if(qc&&(ru=qc.placedGlyphBoxes,ru&&ru.placeable))return Bt=!0,wo=qc.shift,ru}Kn?Kn=null:md=te}return d&&!ru&&(ru={box:this.collisionIndex.placeCollisionBox(Ic,"always",G,M,D,ke,Pe,I,le.predicate,it,new a.P(0,0)).box,offscreen:!1,placeable:!1}),ru};Ba(()=>li(Ic,Ke.iconBox,a.ah.horizontal),()=>{let Wt=Ke.verticalTextBox;return m.allowVerticalPlacement&&(!kr||!kr.placeable)&&$e.numVerticalGlyphVertices>0&&Wt?li(Wt,Ke.verticalIconBox,a.ah.vertical):{box:null,occluded:!0,offscreen:null}}),kr&&(Bt=kr.placeable,si=kr.offscreen);let xa=ja(kr&&kr.placeable);if(!Bt&&this.prevPlacement){let Wt=this.prevPlacement.variableOffsets[$e.crossTileID];Wt&&(this.variableOffsets[$e.crossTileID]=Wt,this.markUsedJustification(m,Wt.anchor,$e,xa))}}}if(Ei=kr,Bt=Ei&&Ei.placeable,si=Ei&&Ei.offscreen,$e.useRuntimeCollisionCircles){let ja=m.text.placedSymbolArray.get($e.centerJustifiedTextSymbolIndex),Ba=a.ai(m.textSizeData,ae,ja),tu=y.get("text-padding");ui=this.collisionIndex.placeCollisionCircles(te,ja,m.lineVertexArray,m.glyphOffsetArray,Ba,M,D,N,F,d,ke,le.predicate,$e.collisionCircleDiameter,tu,I,it),ui.circles.length&&ui.collisionDetected&&!d&&a.w("Collisions detected, but collision boxes are not shown"),Bt=me||ui.circles.length>0&&!ui.collisionDetected,si=si&&ui.offscreen}if(Ke.iconFeatureIndex&&(pd=Ke.iconFeatureIndex),Ke.iconBox){let ja=Ba=>this.collisionIndex.placeCollisionBox(Ba,ge,G,M,D,ke,Pe,A,le.predicate,it,We&&wo?wo:void 0);Vi&&Vi.placeable&&Ke.verticalIconBox?(Si=ja(Ke.verticalIconBox),Lr=Si.placeable):(Si=ja(Ke.iconBox),Lr=Si.placeable),si=si&&Si.offscreen}let za=ce||$e.numHorizontalGlyphVertices===0&&$e.numVerticalGlyphVertices===0,dd=fe||$e.numIconVertices===0;za||dd?dd?za||(Lr=Lr&&Bt):Bt=Lr&&Bt:Lr=Bt=Lr&&Bt;let ny=Lr&&Si.placeable;if(Bt&&Ei.placeable&&this.collisionIndex.insertCollisionBox(Ei.box,te,y.get("text-ignore-placement"),m.bucketInstanceId,Vi&&Vi.placeable&&Tc?Tc:Vo,le.ID),ny&&this.collisionIndex.insertCollisionBox(Si.box,ge,y.get("icon-ignore-placement"),m.bucketInstanceId,pd,le.ID),ui&&Bt&&this.collisionIndex.insertCollisionCircles(ui.circles,te,y.get("text-ignore-placement"),m.bucketInstanceId,Vo,le.ID),d&&this.storeCollisionData(m.bucketInstanceId,xt,Ke,Ei,Si,ui),$e.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[$e.crossTileID]=new Lt(Bt||Ve,Lr||Be,si||m.justReloaded),c[$e.crossTileID]=!0};if(Je){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let $e=m.getSortedSymbolIndexes(this.transform.angle);for(let Ke=$e.length-1;Ke>=0;--Ke){let xt=$e[Ke];bt(m.symbolInstances.get(xt),m.collisionArrays[xt],xt)}}else for(let $e=o.symbolInstanceStart;$e<o.symbolInstanceEnd;$e++)bt(m.symbolInstances.get($e),m.collisionArrays[$e],$e);if(d&&m.bucketInstanceId in this.collisionCircleArrays){let $e=this.collisionCircleArrays[m.bucketInstanceId];a.as($e.invProjMatrix,M),$e.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}storeCollisionData(o,c,d,m,y,I){if(d.textBox||d.iconBox){let A,M;this.collisionBoxArrays.has(o)?A=this.collisionBoxArrays.get(o):(A=new Map,this.collisionBoxArrays.set(o,A)),A.has(c)?M=A.get(c):(M={text:null,icon:null},A.set(c,M)),d.textBox&&(M.text=m.box),d.iconBox&&(M.icon=y.box)}if(I){let A=this.collisionCircleArrays[o];A===void 0&&(A=this.collisionCircleArrays[o]=new dr);for(let M=0;M<I.circles.length;M+=4)A.circles.push(I.circles[M+0]),A.circles.push(I.circles[M+1]),A.circles.push(I.circles[M+2]),A.circles.push(I.collisionDetected?1:0)}}markUsedJustification(o,c,d,m){let y;y=m===a.ah.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[a.at(c)];let I=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(let A of I)A>=0&&(o.text.placedSymbolArray.get(A).crossTileID=y>=0&&A!==y?0:d.crossTileID)}markUsedOrientation(o,c,d){let m=c===a.ah.horizontal||c===a.ah.horizontalOnly?c:0,y=c===a.ah.vertical?c:0,I=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(let A of I)o.text.placedSymbolArray.get(A).placedOrientation=m;d.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;let c=this.prevPlacement,d=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;let m=c?c.symbolFadeChange(o):1,y=c?c.opacities:{},I=c?c.variableOffsets:{},A=c?c.placedOrientations:{};for(let M in this.placements){let D=this.placements[M],N=y[M];N?(this.opacities[M]=new Xr(N,m,D.text,D.icon),d=d||D.text!==N.text.placed||D.icon!==N.icon.placed):(this.opacities[M]=new Xr(null,m,D.text,D.icon,D.skipFade),d=d||D.text||D.icon)}for(let M in y){let D=y[M];if(!this.opacities[M]){let N=new Xr(D,m,!1,!1);N.isHidden()||(this.opacities[M]=N,d=d||D.text.placed||D.icon.placed)}}for(let M in I)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=I[M]);for(let M in A)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=A[M]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:o)}updateLayerOpacities(o,c){let d={};for(let m of c){let y=m.getBucket(o);y&&m.latestFeatureIndex&&o.id===y.layerIds[0]&&this.updateBucketOpacities(y,m.tileID,d,m.collisionBoxArray)}}updateBucketOpacities(o,c,d,m){o.hasTextData()&&(o.text.opacityVertexArray.clear(),o.text.hasVisibleVertices=!1),o.hasIconData()&&(o.icon.opacityVertexArray.clear(),o.icon.hasVisibleVertices=!1),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();let y=o.layers[0],I=y.layout,A=new Xr(null,0,!1,!1,!0),M=I.get("text-allow-overlap"),D=I.get("icon-allow-overlap"),N=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),F=I.get("text-rotation-alignment")==="map",G=I.get("text-pitch-alignment")==="map",Y=I.get("icon-text-fit")!=="none",ee=new Xr(null,0,M&&(D||!o.hasIconData()||I.get("icon-optional")),D&&(M||!o.hasTextData()||I.get("text-optional")),!0);!o.collisionArrays&&m&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(m);let ae=(ce,fe,te)=>{for(let me=0;me<fe/4;me++)ce.opacityVertexArray.emplaceBack(te);ce.hasVisibleVertices=ce.hasVisibleVertices||te!==ic},le=this.collisionBoxArrays.get(o.bucketInstanceId);for(let ce=0;ce<o.symbolInstances.length;ce++){let fe=o.symbolInstances.get(ce),{numHorizontalGlyphVertices:te,numVerticalGlyphVertices:me,crossTileID:ge}=fe,we=this.opacities[ge];d[ge]?we=A:we||(we=ee,this.opacities[ge]=we),d[ge]=!0;let Pe=fe.numIconVertices>0,ke=this.placedOrientations[fe.crossTileID],We=ke===a.ah.vertical,Je=ke===a.ah.horizontal||ke===a.ah.horizontalOnly;if(te>0||me>0){let Be=ga(we.text);ae(o.text,te,We?ic:Be),ae(o.text,me,Je?ic:Be);let it=we.text.isHidden();[fe.rightJustifiedTextSymbolIndex,fe.centerJustifiedTextSymbolIndex,fe.leftJustifiedTextSymbolIndex].forEach(Ke=>{Ke>=0&&(o.text.placedSymbolArray.get(Ke).hidden=it||We?1:0)}),fe.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(fe.verticalPlacedTextSymbolIndex).hidden=it||Je?1:0);let bt=this.variableOffsets[fe.crossTileID];bt&&this.markUsedJustification(o,bt.anchor,fe,ke);let $e=this.placedOrientations[fe.crossTileID];$e&&(this.markUsedJustification(o,"left",fe,$e),this.markUsedOrientation(o,$e,fe))}if(Pe){let Be=ga(we.icon),it=!(Y&&fe.verticalPlacedIconSymbolIndex&&We);fe.placedIconSymbolIndex>=0&&(ae(o.icon,fe.numIconVertices,it?Be:ic),o.icon.placedSymbolArray.get(fe.placedIconSymbolIndex).hidden=we.icon.isHidden()),fe.verticalPlacedIconSymbolIndex>=0&&(ae(o.icon,fe.numVerticalIconVertices,it?ic:Be),o.icon.placedSymbolArray.get(fe.verticalPlacedIconSymbolIndex).hidden=we.icon.isHidden())}let Ve=le&&le.has(ce)?le.get(ce):{text:null,icon:null};if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){let Be=o.collisionArrays[ce];if(Be){let it=new a.P(0,0);if(Be.textBox||Be.verticalTextBox){let bt=!0;if(N){let $e=this.variableOffsets[ge];$e?(it=Hn($e.anchor,$e.width,$e.height,$e.textOffset,$e.textBoxScale),F&&it._rotate(G?this.transform.angle:-this.transform.angle)):bt=!1}if(Be.textBox||Be.verticalTextBox){let $e;Be.textBox&&($e=We),Be.verticalTextBox&&($e=Je),nc(o.textCollisionBox.collisionVertexArray,we.text.placed,!bt||$e,Ve.text,it.x,it.y)}}if(Be.iconBox||Be.verticalIconBox){let bt=!!(!Je&&Be.verticalIconBox),$e;Be.iconBox&&($e=bt),Be.verticalIconBox&&($e=!bt),nc(o.iconCollisionBox.collisionVertexArray,we.icon.placed,$e,Ve.icon,Y?it.x:0,Y?it.y:0)}}}}if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);if(o.bucketInstanceId in this.collisionCircleArrays){let ce=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=ce.invProjMatrix,o.placementViewportMatrix=ce.viewportMatrix,o.collisionCircleArray=ce.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,c){let d=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*d>o}setStale(){this.stale=!0}}function nc(_,o,c,d,m,y){d&&d.length!==0||(d=[0,0,0,0]);let I=d[0]-Ct,A=d[1]-Ct,M=d[2]-Ct,D=d[3]-Ct;_.emplaceBack(o?1:0,c?1:0,m||0,y||0,I,A),_.emplaceBack(o?1:0,c?1:0,m||0,y||0,M,A),_.emplaceBack(o?1:0,c?1:0,m||0,y||0,M,D),_.emplaceBack(o?1:0,c?1:0,m||0,y||0,I,D)}let mr=Math.pow(2,25),dg=Math.pow(2,24),mg=Math.pow(2,17),ma=Math.pow(2,16),va=Math.pow(2,9),ZA=Math.pow(2,8),La=Math.pow(2,1);function ga(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;let o=_.placed?1:0,c=Math.floor(127*_.opacity);return c*mr+o*dg+c*mg+o*ma+c*va+o*ZA+c*La+o}let ic=0;function Gu(){return{isOccluded:(_,o,c)=>!1,getPitchedTextCorrection:(_,o,c)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(_,o,c,d){throw new Error("Not implemented.")},translatePosition:(_,o,c,d)=>function(m,y,I,A,M=!1){if(!I[0]&&!I[1])return[0,0];let D=M?A==="map"?m.angle:0:A==="viewport"?-m.angle:0;if(D){let N=Math.sin(D),F=Math.cos(D);I=[I[0]*F-I[1]*N,I[0]*N+I[1]*F]}return[M?I[0]:jt(y,I[0],m.zoom),M?I[1]:jt(y,I[1],m.zoom)]}(_,o,c,d),getCircleRadiusCorrection:_=>1}}class En{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,c,d,m,y){let I=this._bucketParts;for(;this._currentTileIndex<o.length;)if(c.getBucketParts(I,m,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((A,M)=>A.sortKey-M.sortKey));this._currentPartIndex<I.length;)if(c.placeLayerBucketPart(I[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,y())return!0;return!1}}class Xh{constructor(o,c,d,m,y,I,A,M){this.placement=new bi(o,Gu(),c,I,A,M),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(o,c,d){let m=b.now(),y=()=>!this._forceFullPlacement&&b.now()-m>2;for(;this._currentPlacementIndex>=0;){let I=c[o[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=A)&&(!I.maxzoom||I.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new En(I)),this._inProgressLayer.continuePlacement(d[I.source],this.placement,this._showCollisionBoxes,I,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}let vo=512/a.X/2;class dn{constructor(o,c,d){this.tileID=o,this.bucketInstanceId=d,this._symbolsByKey={};let m=new Map;for(let y=0;y<c.length;y++){let I=c.get(y),A=I.key,M=m.get(A);M?M.push(I):m.set(A,[I])}for(let[y,I]of m){let A={positions:I.map(M=>({x:Math.floor(M.anchorX*vo),y:Math.floor(M.anchorY*vo)})),crossTileIDs:I.map(M=>M.crossTileID)};if(A.positions.length>128){let M=new a.av(A.positions.length,16,Uint16Array);for(let{x:D,y:N}of A.positions)M.add(D,N);M.finish(),delete A.positions,A.index=M}this._symbolsByKey[y]=A}}getScaledCoordinates(o,c){let{x:d,y:m,z:y}=this.tileID.canonical,{x:I,y:A,z:M}=c.canonical,D=vo/Math.pow(2,M-y),N=(A*a.X+o.anchorY)*D,F=m*a.X*vo;return{x:Math.floor((I*a.X+o.anchorX)*D-d*a.X*vo),y:Math.floor(N-F)}}findMatches(o,c,d){let m=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let y=0;y<o.length;y++){let I=o.get(y);if(I.crossTileID)continue;let A=this._symbolsByKey[I.key];if(!A)continue;let M=this.getScaledCoordinates(I,c);if(A.index){let D=A.index.range(M.x-m,M.y-m,M.x+m,M.y+m).sort();for(let N of D){let F=A.crossTileIDs[N];if(!d[F]){d[F]=!0,I.crossTileID=F;break}}}else if(A.positions)for(let D=0;D<A.positions.length;D++){let N=A.positions[D],F=A.crossTileIDs[D];if(Math.abs(N.x-M.x)<=m&&Math.abs(N.y-M.y)<=m&&!d[F]){d[F]=!0,I.crossTileID=F;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:o})=>o)}}class kp{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class go{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){let c=Math.round((o-this.lng)/360);if(c!==0)for(let d in this.indexes){let m=this.indexes[d],y={};for(let I in m){let A=m[I];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+c),y[A.tileID.key]=A}this.indexes[d]=y}this.lng=o}addBucket(o,c,d){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let y=0;y<c.symbolInstances.length;y++)c.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});let m=this.usedCrossTileIDs[o.overscaledZ];for(let y in this.indexes){let I=this.indexes[y];if(Number(y)>o.overscaledZ)for(let A in I){let M=I[A];M.tileID.isChildOf(o)&&M.findMatches(c.symbolInstances,o,m)}else{let A=I[o.scaledTo(Number(y)).key];A&&A.findMatches(c.symbolInstances,o,m)}}for(let y=0;y<c.symbolInstances.length;y++){let I=c.symbolInstances.get(y);I.crossTileID||(I.crossTileID=d.generate(),m[I.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new dn(o,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(o,c){for(let d of c.getCrossTileIDsLists())for(let m of d)delete this.usedCrossTileIDs[o][m]}removeStaleBuckets(o){let c=!1;for(let d in this.indexes){let m=this.indexes[d];for(let y in m)o[m[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,m[y]),delete m[y],c=!0)}return c}}class vg{constructor(){this.layerIndexes={},this.crossTileIDs=new kp,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,c,d){let m=this.layerIndexes[o.id];m===void 0&&(m=this.layerIndexes[o.id]=new go);let y=!1,I={};m.handleWrapJump(d);for(let A of c){let M=A.getBucket(o);M&&o.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(A.tileID,M,this.crossTileIDs)&&(y=!0),I[M.bucketInstanceId]=!0)}return m.removeStaleBuckets(I)&&(y=!0),y}pruneUnusedLayers(o){let c={};o.forEach(d=>{c[d]=!0});for(let d in this.layerIndexes)c[d]||delete this.layerIndexes[d]}}let yo=(_,o)=>a.t(_,o&&o.filter(c=>c.identifier!=="source.canvas")),HA=a.aw();class Np extends a.E{constructor(o,c={}){super(),this._rtlPluginLoaded=()=>{for(let d in this.sourceCaches){let m=this.sourceCaches[d].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[d].reload()}},this.map=o,this.dispatcher=new an(ni(),o._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,m)=>this.getGlyphs(d,m)),this.dispatcher.registerMessageHandler("GI",(d,m)=>this.getImages(d,m)),this.imageManager=new Rt,this.imageManager.setEventedParent(this),this.glyphManager=new sr(o._requestManager,c.localIdeographFontFamily),this.lineAtlas=new fa(256,512),this.crossTileSymbolIndex=new vg,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",a.ay()),ii().on(Ne,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;let m=this.sourceCaches[d.sourceId];if(!m)return;let y=m.getSource();if(y&&y.vectorLayerIds)for(let I in this._layers){let A=this._layers[I];A.source===y.id&&this._validateLayer(A)}})}loadURL(o,c={},d){this.fire(new a.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;let m=this.map._requestManager.transformRequest(o,"Style");this._loadStyleRequest=new AbortController;let y=this._loadStyleRequest;a.h(m,this._loadStyleRequest).then(I=>{this._loadStyleRequest=null,this._load(I.data,c,d)}).catch(I=>{this._loadStyleRequest=null,I&&!y.signal.aborted&&this.fire(new a.j(I))})}loadJSON(o,c={},d){this.fire(new a.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(o,c,d)}).catch(()=>{})}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(HA,{validate:!1})}_load(o,c,d){var m;let y=c.transformStyle?c.transformStyle(d,o):o;if(!c.validate||!yo(this,a.u(y))){this._loaded=!0,this.stylesheet=y;for(let I in y.sources)this.addSource(I,y.sources[I],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new Kt(this.stylesheet.light),this.sky=new nn(this.stylesheet.sky),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){let o=a.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",o),this._order=o.map(c=>c.id),this._layers={},this._serializedLayers=null;for(let c of o){let d=a.aA(c);d.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=d}}_loadSprite(o,c=!1,d=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,I,A,M){return a._(this,void 0,void 0,function*(){let D=Ae(y),N=A>1?"@2x":"",F={},G={};for(let{id:Y,url:ee}of D){let ae=I.transformRequest(Ue(ee,N,".json"),"SpriteJSON");F[Y]=a.h(ae,M);let le=I.transformRequest(Ue(ee,N,".png"),"SpriteImage");G[Y]=$.getImage(le,M)}return yield Promise.all([...Object.values(F),...Object.values(G)]),function(Y,ee){return a._(this,void 0,void 0,function*(){let ae={};for(let le in Y){ae[le]={};let ce=b.getImageCanvasContext((yield ee[le]).data),fe=(yield Y[le]).data;for(let te in fe){let{width:me,height:ge,x:we,y:Pe,sdf:ke,pixelRatio:We,stretchX:Je,stretchY:Ve,content:Be,textFitWidth:it,textFitHeight:bt}=fe[te];ae[le][te]={data:null,pixelRatio:We,sdf:ke,stretchX:Je,stretchY:Ve,content:Be,textFitWidth:it,textFitHeight:bt,spriteData:{width:me,height:ge,x:we,y:Pe,context:ce}}}}return ae})}(F,G)})}(o,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(let I in y){this._spritesImagesIds[I]=[];let A=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter(M=>!(M in y)):[];for(let M of A)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(let M in y[I]){let D=I==="default"?M:`${I}:${M}`;this._spritesImagesIds[I].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,y[I][M],!1):this.imageManager.addImage(D,y[I][M]),c&&(this._changedImages[D]=!0)}}}).catch(y=>{this._spriteRequest=null,m=y,this.fire(new a.j(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),d&&d(m)})}_unloadSprite(){for(let o of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(o),this._changedImages[o]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(o){let c=this.sourceCaches[o.source];if(!c)return;let d=o.sourceLayer;if(!d)return;let m=c.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(d)===-1)&&this.fire(new a.j(new Error(`Source layer "${d}" does not exist on source "${m.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(o,c=!1){let d=this._serializedAllLayers();if(!o||o.length===0)return Object.values(c?a.aB(d):d);let m=[];for(let y of o)if(d[y]){let I=c?a.aB(d[y]):d[y];m.push(I)}return m}_serializedAllLayers(){let o=this._serializedLayers;if(o)return o;o=this._serializedLayers={};let c=Object.keys(this._layers);for(let d of c){let m=this._layers[d];m.type!=="custom"&&(o[d]=m.serialize())}return o}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(let o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(let o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;let c=this._changed;if(c){let m=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(m.length||y.length)&&this._updateWorkerLayers(m,y);for(let I in this._updatedSources){let A=this._updatedSources[I];if(A==="reload")this._reloadSource(I);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(I)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let I in this._updatedPaintProps)this._layers[I].updateTransitions(o);this.light.updateTransitions(o),this.sky.updateTransitions(o),this._resetUpdates()}let d={};for(let m in this.sourceCaches){let y=this.sourceCaches[m];d[m]=y.used,y.used=!1}for(let m of this._order){let y=this._layers[m];y.recalculate(o,this._availableImages),!y.isHidden(o.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(let m in d){let y=this.sourceCaches[m];!!d[m]!=!!y.used&&y.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(o),this.sky.recalculate(o),this.z=o.zoom,c&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){let o=Object.keys(this._changedImages);if(o.length){for(let c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(o,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(o,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(o,c={}){var d;this._checkLoaded();let m=this.serialize();if(o=c.transformStyle?c.transformStyle(m,o):o,((d=c.validate)===null||d===void 0||d)&&yo(this,a.u(o)))return!1;(o=a.aB(o)).layers=a.az(o.layers);let y=a.aC(m,o),I=this._getOperationsToPerform(y);if(I.unimplemented.length>0)throw new Error(`Unimplemented: ${I.unimplemented.join(", ")}.`);if(I.operations.length===0)return!1;for(let A of I.operations)A();return this.stylesheet=o,this._serializedLayers=null,!0}_getOperationsToPerform(o){let c=[],d=[];for(let m of o)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":c.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":c.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,m.args));break;case"setSky":c.push(()=>this.setSky.apply(this,m.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setTransition":c.push(()=>{});break;default:d.push(m.command);}return{operations:c,unimplemented:d}}addImage(o,c){if(this.getImage(o))return this.fire(new a.j(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,c),this._afterImageUpdated(o)}updateImage(o,c){this.imageManager.updateImage(o,c)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new a.j(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,c,d={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(a.u.source,`sources.${o}`,c,null,d))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);let m=this.sourceCaches[o]=new ft(o,c,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:o})),m.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(let d in this._layers)if(this._layers[d].source===o)return this.fire(new a.j(new Error(`Source "${o}" cannot be removed while layer "${d}" is using it.`)));let c=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],c.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,c){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);let d=this.sourceCaches[o].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(c),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,c,d={}){this._checkLoaded();let m=o.id;if(this.getLayer(m))return void this.fire(new a.j(new Error(`Layer "${m}" already exists on this map.`)));let y;if(o.type==="custom"){if(yo(this,a.aD(o)))return;y=a.aA(o)}else{if("source"in o&&typeof o.source=="object"&&(this.addSource(m,o.source),o=a.aB(o),o=a.e(o,{source:m})),this._validate(a.u.layer,`layers.${m}`,o,{arrayIndex:-1},d))return;y=a.aA(o),this._validateLayer(y),y.setEventedParent(this,{layer:{id:m}})}let I=c?this._order.indexOf(c):this._order.length;if(c&&I===-1)this.fire(new a.j(new Error(`Cannot add layer "${m}" before non-existing layer "${c}".`)));else{if(this._order.splice(I,0,m),this._layerOrderChanged=!0,this._layers[m]=y,this._removedLayers[m]&&y.source&&y.type!=="custom"){let A=this._removedLayers[m];delete this._removedLayers[m],A.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(o,c){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new a.j(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===c)return;let d=this._order.indexOf(o);this._order.splice(d,1);let m=c?this._order.indexOf(c):this._order.length;c&&m===-1?this.fire(new a.j(new Error(`Cannot move layer "${o}" before non-existing layer "${c}".`))):(this._order.splice(m,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();let c=this._layers[o];if(!c)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${o}".`)));c.setEventedParent(null);let d=this._order.indexOf(o);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=c,delete this._layers[o],this._serializedLayers&&delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],c.onRemove&&c.onRemove(this.map)}getLayer(o){return this._layers[o]}getLayersOrder(){return[...this._order]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,c,d){this._checkLoaded();let m=this.getLayer(o);m?m.minzoom===c&&m.maxzoom===d||(c!=null&&(m.minzoom=c),d!=null&&(m.maxzoom=d),this._updateLayer(m)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,c,d={}){this._checkLoaded();let m=this.getLayer(o);if(m){if(!a.aE(m.filter,c))return c==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(a.u.filter,`layers.${m.id}.filter`,c,null,d)||(m.filter=a.aB(c),this._updateLayer(m)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return a.aB(this.getLayer(o).filter)}setLayoutProperty(o,c,d,m={}){this._checkLoaded();let y=this.getLayer(o);y?a.aE(y.getLayoutProperty(c),d)||(y.setLayoutProperty(c,d,m),this._updateLayer(y)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,c){let d=this.getLayer(o);if(d)return d.getLayoutProperty(c);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,c,d,m={}){this._checkLoaded();let y=this.getLayer(o);y?a.aE(y.getPaintProperty(c),d)||(y.setPaintProperty(c,d,m)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[o]=!0,this._serializedLayers=null):this.fire(new a.j(new Error(`Cannot style non-existing layer "${o}".`)))}getPaintProperty(o,c){return this.getLayer(o).getPaintProperty(c)}setFeatureState(o,c){this._checkLoaded();let d=o.source,m=o.sourceLayer,y=this.sourceCaches[d];if(y===void 0)return void this.fire(new a.j(new Error(`The source '${d}' does not exist in the map's style.`)));let I=y.getSource().type;I==="geojson"&&m?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||m?(o.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(m,o.id,c)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,c){this._checkLoaded();let d=o.source,m=this.sourceCaches[d];if(m===void 0)return void this.fire(new a.j(new Error(`The source '${d}' does not exist in the map's style.`)));let y=m.getSource().type,I=y==="vector"?o.sourceLayer:void 0;y!=="vector"||I?c&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(I,o.id,c):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();let c=o.source,d=o.sourceLayer,m=this.sourceCaches[c];if(m!==void 0)return m.getSource().type!=="vector"||d?(o.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(d,o.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let o=a.aF(this.sourceCaches,y=>y.serialize()),c=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,m=this.stylesheet;return a.aG({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:o,layers:c,terrain:d},y=>y!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(o){let c=I=>this._layers[I].type==="fill-extrusion",d={},m=[];for(let I=this._order.length-1;I>=0;I--){let A=this._order[I];if(c(A)){d[A]=I;for(let M of o){let D=M[A];if(D)for(let N of D)m.push(N)}}}m.sort((I,A)=>A.intersectionZ-I.intersectionZ);let y=[];for(let I=this._order.length-1;I>=0;I--){let A=this._order[I];if(c(A))for(let M=m.length-1;M>=0;M--){let D=m[M].feature;if(d[D.layer.id]<I)break;y.push(D),m.pop()}else for(let M of o){let D=M[A];if(D)for(let N of D)y.push(N.feature)}}return y}queryRenderedFeatures(o,c,d){c&&c.filter&&this._validate(a.u.filter,"queryRenderedFeatures.filter",c.filter,null,c);let m={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(let A of c.layers){let M=this._layers[A];if(!M)return this.fire(new a.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];m[M.source]=!0}}let y=[];c.availableImages=this._availableImages;let I=this._serializedAllLayers();for(let A in this.sourceCaches)c.layers&&!m[A]||y.push(Da(this.sourceCaches[A],this._layers,I,o,c,d));return this.placement&&y.push(function(A,M,D,N,F,G,Y){let ee={},ae=G.queryRenderedSymbols(N),le=[];for(let ce of Object.keys(ae).map(Number))le.push(Y[ce]);le.sort(Wn);for(let ce of le){let fe=ce.featureIndex.lookupSymbolFeatures(ae[ce.bucketInstanceId],M,ce.bucketIndex,ce.sourceLayerIndex,F.filter,F.layers,F.availableImages,A);for(let te in fe){let me=ee[te]=ee[te]||[],ge=fe[te];ge.sort((we,Pe)=>{let ke=ce.featureSortOrder;if(ke){let We=ke.indexOf(we.featureIndex);return ke.indexOf(Pe.featureIndex)-We}return Pe.featureIndex-we.featureIndex});for(let we of ge)me.push(we)}}for(let ce in ee)ee[ce].forEach(fe=>{let te=fe.feature,me=D[A[ce].source].getFeatureState(te.layer["source-layer"],te.id);te.source=te.layer.source,te.layer["source-layer"]&&(te.sourceLayer=te.layer["source-layer"]),te.state=me});return ee}(this._layers,I,this.sourceCaches,o,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(o,c){c&&c.filter&&this._validate(a.u.filter,"querySourceFeatures.filter",c.filter,null,c);let d=this.sourceCaches[o];return d?function(m,y){let I=m.getRenderableIds().map(D=>m.getTileByID(D)),A=[],M={};for(let D=0;D<I.length;D++){let N=I[D],F=N.tileID.canonical.key;M[F]||(M[F]=!0,N.querySourceFeatures(A,y))}return A}(d,c):[]}getLight(){return this.light.getLight()}setLight(o,c={}){this._checkLoaded();let d=this.light.getLight(),m=!1;for(let I in o)if(!a.aE(o[I],d[I])){m=!0;break}if(!m)return;let y={now:b.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,c),this.light.updateTransitions(y)}getSky(){var o;return(o=this.stylesheet)===null||o===void 0?void 0:o.sky}setSky(o,c={}){let d=this.getSky(),m=!1;if(!o&&!d)return;if(o&&!d)m=!0;else if(!o&&d)m=!0;else for(let I in o)if(!a.aE(o[I],d[I])){m=!0;break}if(!m)return;let y={now:b.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=o,this.sky.setSky(o,c),this.sky.updateTransitions(y)}_validate(o,c,d,m,y={}){return(!y||y.validate!==!1)&&yo(this,o.call(a.u,a.e({key:c,style:this.serialize(),value:d,styleSpec:a.v},m)))}_remove(o=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ii().off(Ne,this._rtlPluginLoaded);for(let c in this._layers)this._layers[c].setEventedParent(null);for(let c in this.sourceCaches){let d=this.sourceCaches[c];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),o&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(o)}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(let c in this.sourceCaches)this.sourceCaches[c].update(o,this.map.terrain)}_generateCollisionBoxes(){for(let o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,c,d,m,y=!1){let I=!1,A=!1,M={};for(let D of this._order){let N=this._layers[D];if(N.type!=="symbol")continue;if(!M[N.source]){let G=this.sourceCaches[N.source];M[N.source]=G.getRenderableIds(!0).map(Y=>G.getTileByID(Y)).sort((Y,ee)=>ee.tileID.overscaledZ-Y.tileID.overscaledZ||(Y.tileID.isLessThan(ee.tileID)?-1:1))}let F=this.crossTileSymbolIndex.addLayer(N,M[N.source],o.center.lng);I=I||F}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.now(),o.zoom))&&(this.pauseablePlacement=new Xh(o,this.map.terrain,this._order,y,c,d,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.now()),A=!0),I&&this.pauseablePlacement.placement.setStale()),A||I)for(let D of this._order){let N=this._layers[D];N.type==="symbol"&&this.placement.updateLayerOpacities(N,M[N.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.now())}_releaseSymbolFadeTiles(){for(let o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,c){return a._(this,void 0,void 0,function*(){let d=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();let m=this.sourceCaches[c.source];return m&&m.setDependencies(c.tileID.key,c.type,c.icons),d})}getGlyphs(o,c){return a._(this,void 0,void 0,function*(){let d=yield this.glyphManager.getGlyphs(c.stacks),m=this.sourceCaches[c.source];return m&&m.setDependencies(c.tileID.key,c.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(o,c={}){this._checkLoaded(),o&&this._validate(a.u.glyphs,"glyphs",o,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=o,this.glyphManager.entries={},this.glyphManager.setURL(o))}addSprite(o,c,d={},m){this._checkLoaded();let y=[{id:o,url:c}],I=[...Ae(this.stylesheet.sprite),...y];this._validate(a.u.sprite,"sprite",I,null,d)||(this.stylesheet.sprite=I,this._loadSprite(y,!0,m))}removeSprite(o){this._checkLoaded();let c=Ae(this.stylesheet.sprite);if(c.find(d=>d.id===o)){if(this._spritesImagesIds[o])for(let d of this._spritesImagesIds[o])this.imageManager.removeImage(d),this._changedImages[d]=!0;c.splice(c.findIndex(d=>d.id===o),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[o],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${o}" doesn't exists on this map.`)))}getSprite(){return Ae(this.stylesheet.sprite)}setSprite(o,c={},d){this._checkLoaded(),o&&this._validate(a.u.sprite,"sprite",o,null,c)||(this.stylesheet.sprite=o,o?this._loadSprite(o,!0,d):(this._unloadSprite(),d&&d(null)))}}var Wu=a.Y([{name:"a_pos",type:"Int16",components:2}]);let Qs={prelude:ar(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:ar(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ar(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ar(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ar("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ar(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:ar(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ar("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ar("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ar("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:ar(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:ar(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:ar(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:ar(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ar(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ar(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ar(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ar(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ar(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ar(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ar(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ar(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:ar(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ar(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ar(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ar(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ar("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ar("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ar("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:ar("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ar(_,o){let c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=o.match(/attribute ([\w]+) ([\w]+)/g),m=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=y?y.concat(m):m,A={};return{fragmentSource:_=_.replace(c,(M,D,N,F,G)=>(A[G]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${G}
varying ${N} ${F} ${G};
#else
uniform ${N} ${F} u_${G};
#endif
`:`
#ifdef HAS_UNIFORM_u_${G}
    ${N} ${F} ${G} = u_${G};
#endif
`)),vertexSource:o=o.replace(c,(M,D,N,F,G)=>{let Y=F==="float"?"vec2":"vec4",ee=G.match(/color/)?"color":Y;return A[G]?D==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${N} ${Y} a_${G};
varying ${N} ${F} ${G};
#else
uniform ${N} ${F} u_${G};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = a_${G};
#else
    ${N} ${F} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = unpack_mix_${ee}(a_${G}, u_${G}_t);
#else
    ${N} ${F} ${G} = u_${G};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${N} ${Y} a_${G};
#else
uniform ${N} ${F} u_${G};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${N} ${F} ${G} = a_${G};
#else
    ${N} ${F} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${N} ${F} ${G} = unpack_mix_${ee}(a_${G}, u_${G}_t);
#else
    ${N} ${F} ${G} = u_${G};
#endif
`}),staticAttributes:d,staticUniforms:I}}class gg{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,c,d,m,y,I,A,M,D){this.context=o;let N=this.boundPaintVertexBuffers.length!==m.length;for(let F=0;!N&&F<m.length;F++)this.boundPaintVertexBuffers[F]!==m[F]&&(N=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==d||N||this.boundIndexBuffer!==y||this.boundVertexOffset!==I||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==D?this.freshBind(c,d,m,y,I,A,M,D):(o.bindVertexArray.set(this.vao),A&&A.bind(),y&&y.dynamicDraw&&y.bind(),M&&M.bind(),D&&D.bind())}freshBind(o,c,d,m,y,I,A,M){let D=o.numAttributes,N=this.context,F=N.gl;this.vao&&this.destroy(),this.vao=N.createVertexArray(),N.bindVertexArray.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=m,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=I,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=M,c.enableAttributes(F,o);for(let G of d)G.enableAttributes(F,o);I&&I.enableAttributes(F,o),A&&A.enableAttributes(F,o),M&&M.enableAttributes(F,o),c.bind(),c.setVertexAttribPointers(F,o,y);for(let G of d)G.bind(),G.setVertexAttribPointers(F,o,y);I&&(I.bind(),I.setVertexAttribPointers(F,o,y)),m&&m.bind(),A&&(A.bind(),A.setVertexAttribPointers(F,o,y)),M&&(M.bind(),M.setVertexAttribPointers(F,o,y)),N.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let yg=(_,o,c,d,m)=>({u_matrix:_,u_texture:0,u_ele_delta:o,u_fog_matrix:c,u_fog_color:d?d.properties.get("fog-color"):a.aM.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:d?d.calculateFogBlendOpacity(m):0,u_horizon_color:d?d.properties.get("horizon-color"):a.aM.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1});function ac(_){let o=[];for(let c=0;c<_.length;c++){if(_[c]===null)continue;let d=_[c].split(" ");o.push(d.pop())}return o}class _g{constructor(o,c,d,m,y,I){let A=o.gl;this.program=A.createProgram();let M=ac(c.staticAttributes),D=d?d.getBinderAttributes():[],N=M.concat(D),F=Qs.prelude.staticUniforms?ac(Qs.prelude.staticUniforms):[],G=c.staticUniforms?ac(c.staticUniforms):[],Y=d?d.getBinderUniforms():[],ee=F.concat(G).concat(Y),ae=[];for(let we of ee)ae.indexOf(we)<0&&ae.push(we);let le=d?d.defines():[];y&&le.push("#define OVERDRAW_INSPECTOR;"),I&&le.push("#define TERRAIN3D;");let ce=le.concat(Qs.prelude.fragmentSource,c.fragmentSource).join(`
`),fe=le.concat(Qs.prelude.vertexSource,c.vertexSource).join(`
`),te=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(te,ce),A.compileShader(te),!A.getShaderParameter(te,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(te)}`);A.attachShader(this.program,te);let me=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(me,fe),A.compileShader(me),!A.getShaderParameter(me,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(me)}`);A.attachShader(this.program,me),this.attributes={};let ge={};this.numAttributes=N.length;for(let we=0;we<this.numAttributes;we++)N[we]&&(A.bindAttribLocation(this.program,we,N[we]),this.attributes[N[we]]=we);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(me),A.deleteShader(te);for(let we=0;we<ae.length;we++){let Pe=ae[we];if(Pe&&!ge[Pe]){let ke=A.getUniformLocation(this.program,Pe);ke&&(ge[Pe]=ke)}}this.fixedUniforms=m(o,ge),this.terrainUniforms=((we,Pe)=>({u_depth:new a.aH(we,Pe.u_depth),u_terrain:new a.aH(we,Pe.u_terrain),u_terrain_dim:new a.aI(we,Pe.u_terrain_dim),u_terrain_matrix:new a.aJ(we,Pe.u_terrain_matrix),u_terrain_unpack:new a.aK(we,Pe.u_terrain_unpack),u_terrain_exaggeration:new a.aI(we,Pe.u_terrain_exaggeration)}))(o,ge),this.binderUniforms=d?d.getUniforms(o,ge):[]}draw(o,c,d,m,y,I,A,M,D,N,F,G,Y,ee,ae,le,ce,fe){let te=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(d),o.setStencilMode(m),o.setColorMode(y),o.setCullFace(I),M){o.activeTexture.set(te.TEXTURE2),te.bindTexture(te.TEXTURE_2D,M.depthTexture),o.activeTexture.set(te.TEXTURE3),te.bindTexture(te.TEXTURE_2D,M.texture);for(let ge in this.terrainUniforms)this.terrainUniforms[ge].set(M[ge])}for(let ge in this.fixedUniforms)this.fixedUniforms[ge].set(A[ge]);ae&&ae.setUniforms(o,this.binderUniforms,Y,{zoom:ee});let me=0;switch(c){case te.LINES:me=2;break;case te.TRIANGLES:me=3;break;case te.LINE_STRIP:me=1;}for(let ge of G.get()){let we=ge.vaos||(ge.vaos={});(we[D]||(we[D]=new gg)).bind(o,this,N,ae?ae.getPaintVertexBuffers():[],F,ge.vertexOffset,le,ce,fe),te.drawElements(c,ge.primitiveLength*me,te.UNSIGNED_SHORT,ge.primitiveOffset*me*2)}}}function Fp(_,o,c){let d=1/jt(c,1,o.transform.tileZoom),m=Math.pow(2,c.tileID.overscaledZ),y=c.tileSize*Math.pow(2,o.transform.tileZoom)/m,I=y*(c.tileID.canonical.x+c.tileID.wrap*m),A=y*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[d,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[I>>16,A>>16],u_pixel_coord_lower:[65535&I,65535&A]}}let Yh=(_,o,c,d)=>{let m=o.style.light,y=m.properties.get("position"),I=[y.x,y.y,y.z],A=function(){var D=new a.A(9);return a.A!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D}();m.properties.get("anchor")==="viewport"&&function(D,N){var F=Math.sin(N),G=Math.cos(N);D[0]=G,D[1]=F,D[2]=0,D[3]=-F,D[4]=G,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(A,-o.transform.angle),function(D,N,F){var G=N[0],Y=N[1],ee=N[2];D[0]=G*F[0]+Y*F[3]+ee*F[6],D[1]=G*F[1]+Y*F[4]+ee*F[7],D[2]=G*F[2]+Y*F[5]+ee*F[8]}(I,I,A);let M=m.properties.get("color");return{u_matrix:_,u_lightpos:I,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+c,u_opacity:d}},zp=(_,o,c,d,m,y,I)=>a.e(Yh(_,o,c,d),Fp(y,o,I),{u_height_factor:-Math.pow(2,m.overscaledZ)/I.tileSize/8}),oc=_=>({u_matrix:_}),E1=(_,o,c,d)=>a.e(oc(_),Fp(c,o,d)),KA=(_,o)=>({u_matrix:_,u_world:o}),S1=(_,o,c,d,m)=>a.e(E1(_,o,c,d),{u_world:m}),XA=(_,o,c,d)=>{let m=_.transform,y,I;if(d.paint.get("circle-pitch-alignment")==="map"){let A=jt(c,1,m.zoom);y=!0,I=[A,A]}else y=!1,I=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(o.posMatrix,c,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:I}},Zu=(_,o,c)=>({u_matrix:_,u_inv_matrix:o,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}),Jh=(_,o,c=1)=>({u_matrix:_,u_color:o,u_overlay:0,u_overlay_scale:c}),Bi=_=>({u_matrix:_}),Ui=(_,o,c,d)=>({u_matrix:_,u_extrude_scale:jt(o,1,c),u_intensity:d}),jp=(_,o,c,d)=>{let m=a.H();a.aP(m,0,_.width,_.height,0,0,1);let y=_.context.gl;return{u_matrix:m,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:c,u_color_ramp:d,u_opacity:o.paint.get("heatmap-opacity")}};function Bp(_,o){let c=Math.pow(2,o.canonical.z),d=o.canonical.y;return[new a.Z(0,d/c).toLngLat().lat,new a.Z(0,(d+1)/c).toLngLat().lat]}let Up=(_,o,c,d)=>{let m=_.transform;return{u_matrix:C1(_,o,c,d),u_ratio:1/jt(o,1,m.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},T1=(_,o,c,d,m)=>a.e(Up(_,o,c,m),{u_image:0,u_image_height:d}),sc=(_,o,c,d,m)=>{let y=_.transform,I=I1(o,y);return{u_matrix:C1(_,o,c,m),u_texsize:o.imageAtlasTexture.size,u_ratio:1/jt(o,1,y.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[I,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},YA=(_,o,c,d,m,y)=>{let I=_.lineAtlas,A=I1(o,_.transform),M=c.layout.get("line-cap")==="round",D=I.getDash(d.from,M),N=I.getDash(d.to,M),F=D.width*m.fromScale,G=N.width*m.toScale;return a.e(Up(_,o,c,y),{u_patternscale_a:[A/F,-D.height/2],u_patternscale_b:[A/G,-N.height/2],u_sdfgamma:I.width/(256*Math.min(F,G)*_.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:N.y,u_mix:m.t})};function I1(_,o){return 1/jt(_,1,o.tileZoom)}function C1(_,o,c,d){return _.translatePosMatrix(d?d.posMatrix:o.tileID.posMatrix,o,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}let JA=(_,o,c,d,m)=>{return{u_matrix:_,u_tl_parent:o,u_scale_parent:c,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(I=m.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(y=m.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:QA(m.paint.get("raster-hue-rotate"))};var y,I};function QA(_){_*=Math.PI/180;let o=Math.sin(_),c=Math.cos(_);return[(2*c+1)/3,(-Math.sqrt(3)*o-c+1)/3,(Math.sqrt(3)*o-c+1)/3]}let A1=(_,o,c,d,m,y,I,A,M,D,N,F,G,Y)=>{let ee=I.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:ee.cameraToCenterDistance,u_pitch:ee.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:ee.width/ee.height,u_fade_change:I.options.fadeDuration?I.symbolFadeChange:1,u_matrix:A,u_label_plane_matrix:M,u_coord_matrix:D,u_is_text:+F,u_pitch_with_map:+d,u_is_along_line:m,u_is_variable_anchor:y,u_texsize:G,u_texture:0,u_translation:N,u_pitched_scale:Y}},Qh=(_,o,c,d,m,y,I,A,M,D,N,F,G,Y,ee)=>{let ae=I.transform;return a.e(A1(_,o,c,d,m,y,I,A,M,D,N,F,G,ee),{u_gamma_scale:d?Math.cos(ae._pitch)*ae.cameraToCenterDistance:1,u_device_pixel_ratio:I.pixelRatio,u_is_halo:+Y})},xg=(_,o,c,d,m,y,I,A,M,D,N,F,G,Y)=>a.e(Qh(_,o,c,d,m,y,I,A,M,D,N,!0,F,!0,Y),{u_texsize_icon:G,u_texture_icon:1}),Vp=(_,o,c)=>({u_matrix:_,u_opacity:o,u_color:c}),wg=(_,o,c,d,m,y)=>a.e(function(I,A,M,D){let N=M.imageManager.getPattern(I.from.toString()),F=M.imageManager.getPattern(I.to.toString()),{width:G,height:Y}=M.imageManager.getPixelSize(),ee=Math.pow(2,D.tileID.overscaledZ),ae=D.tileSize*Math.pow(2,M.transform.tileZoom)/ee,le=ae*(D.tileID.canonical.x+D.tileID.wrap*ee),ce=ae*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:N.tl,u_pattern_br_a:N.br,u_pattern_tl_b:F.tl,u_pattern_br_b:F.br,u_texsize:[G,Y],u_mix:A.t,u_pattern_size_a:N.displaySize,u_pattern_size_b:F.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/jt(D,1,M.transform.tileZoom),u_pixel_coord_upper:[le>>16,ce>>16],u_pixel_coord_lower:[65535&le,65535&ce]}}(d,y,c,m),{u_matrix:_,u_opacity:o}),bg={fillExtrusion:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_lightpos:new a.aN(_,o.u_lightpos),u_lightintensity:new a.aI(_,o.u_lightintensity),u_lightcolor:new a.aN(_,o.u_lightcolor),u_vertical_gradient:new a.aI(_,o.u_vertical_gradient),u_opacity:new a.aI(_,o.u_opacity)}),fillExtrusionPattern:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_lightpos:new a.aN(_,o.u_lightpos),u_lightintensity:new a.aI(_,o.u_lightintensity),u_lightcolor:new a.aN(_,o.u_lightcolor),u_vertical_gradient:new a.aI(_,o.u_vertical_gradient),u_height_factor:new a.aI(_,o.u_height_factor),u_image:new a.aH(_,o.u_image),u_texsize:new a.aO(_,o.u_texsize),u_pixel_coord_upper:new a.aO(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(_,o.u_pixel_coord_lower),u_scale:new a.aN(_,o.u_scale),u_fade:new a.aI(_,o.u_fade),u_opacity:new a.aI(_,o.u_opacity)}),fill:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix)}),fillPattern:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_image:new a.aH(_,o.u_image),u_texsize:new a.aO(_,o.u_texsize),u_pixel_coord_upper:new a.aO(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(_,o.u_pixel_coord_lower),u_scale:new a.aN(_,o.u_scale),u_fade:new a.aI(_,o.u_fade)}),fillOutline:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_world:new a.aO(_,o.u_world)}),fillOutlinePattern:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_world:new a.aO(_,o.u_world),u_image:new a.aH(_,o.u_image),u_texsize:new a.aO(_,o.u_texsize),u_pixel_coord_upper:new a.aO(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(_,o.u_pixel_coord_lower),u_scale:new a.aN(_,o.u_scale),u_fade:new a.aI(_,o.u_fade)}),circle:(_,o)=>({u_camera_to_center_distance:new a.aI(_,o.u_camera_to_center_distance),u_scale_with_map:new a.aH(_,o.u_scale_with_map),u_pitch_with_map:new a.aH(_,o.u_pitch_with_map),u_extrude_scale:new a.aO(_,o.u_extrude_scale),u_device_pixel_ratio:new a.aI(_,o.u_device_pixel_ratio),u_matrix:new a.aJ(_,o.u_matrix)}),collisionBox:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_pixel_extrude_scale:new a.aO(_,o.u_pixel_extrude_scale)}),collisionCircle:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_inv_matrix:new a.aJ(_,o.u_inv_matrix),u_camera_to_center_distance:new a.aI(_,o.u_camera_to_center_distance),u_viewport_size:new a.aO(_,o.u_viewport_size)}),debug:(_,o)=>({u_color:new a.aL(_,o.u_color),u_matrix:new a.aJ(_,o.u_matrix),u_overlay:new a.aH(_,o.u_overlay),u_overlay_scale:new a.aI(_,o.u_overlay_scale)}),clippingMask:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix)}),heatmap:(_,o)=>({u_extrude_scale:new a.aI(_,o.u_extrude_scale),u_intensity:new a.aI(_,o.u_intensity),u_matrix:new a.aJ(_,o.u_matrix)}),heatmapTexture:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_world:new a.aO(_,o.u_world),u_image:new a.aH(_,o.u_image),u_color_ramp:new a.aH(_,o.u_color_ramp),u_opacity:new a.aI(_,o.u_opacity)}),hillshade:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_image:new a.aH(_,o.u_image),u_latrange:new a.aO(_,o.u_latrange),u_light:new a.aO(_,o.u_light),u_shadow:new a.aL(_,o.u_shadow),u_highlight:new a.aL(_,o.u_highlight),u_accent:new a.aL(_,o.u_accent)}),hillshadePrepare:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_image:new a.aH(_,o.u_image),u_dimension:new a.aO(_,o.u_dimension),u_zoom:new a.aI(_,o.u_zoom),u_unpack:new a.aK(_,o.u_unpack)}),line:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_ratio:new a.aI(_,o.u_ratio),u_device_pixel_ratio:new a.aI(_,o.u_device_pixel_ratio),u_units_to_pixels:new a.aO(_,o.u_units_to_pixels)}),lineGradient:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_ratio:new a.aI(_,o.u_ratio),u_device_pixel_ratio:new a.aI(_,o.u_device_pixel_ratio),u_units_to_pixels:new a.aO(_,o.u_units_to_pixels),u_image:new a.aH(_,o.u_image),u_image_height:new a.aI(_,o.u_image_height)}),linePattern:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_texsize:new a.aO(_,o.u_texsize),u_ratio:new a.aI(_,o.u_ratio),u_device_pixel_ratio:new a.aI(_,o.u_device_pixel_ratio),u_image:new a.aH(_,o.u_image),u_units_to_pixels:new a.aO(_,o.u_units_to_pixels),u_scale:new a.aN(_,o.u_scale),u_fade:new a.aI(_,o.u_fade)}),lineSDF:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_ratio:new a.aI(_,o.u_ratio),u_device_pixel_ratio:new a.aI(_,o.u_device_pixel_ratio),u_units_to_pixels:new a.aO(_,o.u_units_to_pixels),u_patternscale_a:new a.aO(_,o.u_patternscale_a),u_patternscale_b:new a.aO(_,o.u_patternscale_b),u_sdfgamma:new a.aI(_,o.u_sdfgamma),u_image:new a.aH(_,o.u_image),u_tex_y_a:new a.aI(_,o.u_tex_y_a),u_tex_y_b:new a.aI(_,o.u_tex_y_b),u_mix:new a.aI(_,o.u_mix)}),raster:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_tl_parent:new a.aO(_,o.u_tl_parent),u_scale_parent:new a.aI(_,o.u_scale_parent),u_buffer_scale:new a.aI(_,o.u_buffer_scale),u_fade_t:new a.aI(_,o.u_fade_t),u_opacity:new a.aI(_,o.u_opacity),u_image0:new a.aH(_,o.u_image0),u_image1:new a.aH(_,o.u_image1),u_brightness_low:new a.aI(_,o.u_brightness_low),u_brightness_high:new a.aI(_,o.u_brightness_high),u_saturation_factor:new a.aI(_,o.u_saturation_factor),u_contrast_factor:new a.aI(_,o.u_contrast_factor),u_spin_weights:new a.aN(_,o.u_spin_weights)}),symbolIcon:(_,o)=>({u_is_size_zoom_constant:new a.aH(_,o.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(_,o.u_is_size_feature_constant),u_size_t:new a.aI(_,o.u_size_t),u_size:new a.aI(_,o.u_size),u_camera_to_center_distance:new a.aI(_,o.u_camera_to_center_distance),u_pitch:new a.aI(_,o.u_pitch),u_rotate_symbol:new a.aH(_,o.u_rotate_symbol),u_aspect_ratio:new a.aI(_,o.u_aspect_ratio),u_fade_change:new a.aI(_,o.u_fade_change),u_matrix:new a.aJ(_,o.u_matrix),u_label_plane_matrix:new a.aJ(_,o.u_label_plane_matrix),u_coord_matrix:new a.aJ(_,o.u_coord_matrix),u_is_text:new a.aH(_,o.u_is_text),u_pitch_with_map:new a.aH(_,o.u_pitch_with_map),u_is_along_line:new a.aH(_,o.u_is_along_line),u_is_variable_anchor:new a.aH(_,o.u_is_variable_anchor),u_texsize:new a.aO(_,o.u_texsize),u_texture:new a.aH(_,o.u_texture),u_translation:new a.aO(_,o.u_translation),u_pitched_scale:new a.aI(_,o.u_pitched_scale)}),symbolSDF:(_,o)=>({u_is_size_zoom_constant:new a.aH(_,o.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(_,o.u_is_size_feature_constant),u_size_t:new a.aI(_,o.u_size_t),u_size:new a.aI(_,o.u_size),u_camera_to_center_distance:new a.aI(_,o.u_camera_to_center_distance),u_pitch:new a.aI(_,o.u_pitch),u_rotate_symbol:new a.aH(_,o.u_rotate_symbol),u_aspect_ratio:new a.aI(_,o.u_aspect_ratio),u_fade_change:new a.aI(_,o.u_fade_change),u_matrix:new a.aJ(_,o.u_matrix),u_label_plane_matrix:new a.aJ(_,o.u_label_plane_matrix),u_coord_matrix:new a.aJ(_,o.u_coord_matrix),u_is_text:new a.aH(_,o.u_is_text),u_pitch_with_map:new a.aH(_,o.u_pitch_with_map),u_is_along_line:new a.aH(_,o.u_is_along_line),u_is_variable_anchor:new a.aH(_,o.u_is_variable_anchor),u_texsize:new a.aO(_,o.u_texsize),u_texture:new a.aH(_,o.u_texture),u_gamma_scale:new a.aI(_,o.u_gamma_scale),u_device_pixel_ratio:new a.aI(_,o.u_device_pixel_ratio),u_is_halo:new a.aH(_,o.u_is_halo),u_translation:new a.aO(_,o.u_translation),u_pitched_scale:new a.aI(_,o.u_pitched_scale)}),symbolTextAndIcon:(_,o)=>({u_is_size_zoom_constant:new a.aH(_,o.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(_,o.u_is_size_feature_constant),u_size_t:new a.aI(_,o.u_size_t),u_size:new a.aI(_,o.u_size),u_camera_to_center_distance:new a.aI(_,o.u_camera_to_center_distance),u_pitch:new a.aI(_,o.u_pitch),u_rotate_symbol:new a.aH(_,o.u_rotate_symbol),u_aspect_ratio:new a.aI(_,o.u_aspect_ratio),u_fade_change:new a.aI(_,o.u_fade_change),u_matrix:new a.aJ(_,o.u_matrix),u_label_plane_matrix:new a.aJ(_,o.u_label_plane_matrix),u_coord_matrix:new a.aJ(_,o.u_coord_matrix),u_is_text:new a.aH(_,o.u_is_text),u_pitch_with_map:new a.aH(_,o.u_pitch_with_map),u_is_along_line:new a.aH(_,o.u_is_along_line),u_is_variable_anchor:new a.aH(_,o.u_is_variable_anchor),u_texsize:new a.aO(_,o.u_texsize),u_texsize_icon:new a.aO(_,o.u_texsize_icon),u_texture:new a.aH(_,o.u_texture),u_texture_icon:new a.aH(_,o.u_texture_icon),u_gamma_scale:new a.aI(_,o.u_gamma_scale),u_device_pixel_ratio:new a.aI(_,o.u_device_pixel_ratio),u_is_halo:new a.aH(_,o.u_is_halo),u_translation:new a.aO(_,o.u_translation),u_pitched_scale:new a.aI(_,o.u_pitched_scale)}),background:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_opacity:new a.aI(_,o.u_opacity),u_color:new a.aL(_,o.u_color)}),backgroundPattern:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_opacity:new a.aI(_,o.u_opacity),u_image:new a.aH(_,o.u_image),u_pattern_tl_a:new a.aO(_,o.u_pattern_tl_a),u_pattern_br_a:new a.aO(_,o.u_pattern_br_a),u_pattern_tl_b:new a.aO(_,o.u_pattern_tl_b),u_pattern_br_b:new a.aO(_,o.u_pattern_br_b),u_texsize:new a.aO(_,o.u_texsize),u_mix:new a.aI(_,o.u_mix),u_pattern_size_a:new a.aO(_,o.u_pattern_size_a),u_pattern_size_b:new a.aO(_,o.u_pattern_size_b),u_scale_a:new a.aI(_,o.u_scale_a),u_scale_b:new a.aI(_,o.u_scale_b),u_pixel_coord_upper:new a.aO(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(_,o.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aI(_,o.u_tile_units_to_pixels)}),terrain:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_texture:new a.aH(_,o.u_texture),u_ele_delta:new a.aI(_,o.u_ele_delta),u_fog_matrix:new a.aJ(_,o.u_fog_matrix),u_fog_color:new a.aL(_,o.u_fog_color),u_fog_ground_blend:new a.aI(_,o.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.aI(_,o.u_fog_ground_blend_opacity),u_horizon_color:new a.aL(_,o.u_horizon_color),u_horizon_fog_blend:new a.aI(_,o.u_horizon_fog_blend)}),terrainDepth:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_ele_delta:new a.aI(_,o.u_ele_delta)}),terrainCoords:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_texture:new a.aH(_,o.u_texture),u_terrain_coords_id:new a.aI(_,o.u_terrain_coords_id),u_ele_delta:new a.aI(_,o.u_ele_delta)}),sky:(_,o)=>({u_sky_color:new a.aL(_,o.u_sky_color),u_horizon_color:new a.aL(_,o.u_horizon_color),u_horizon:new a.aI(_,o.u_horizon),u_sky_horizon_blend:new a.aI(_,o.u_sky_horizon_blend)})};class jo{constructor(o,c,d){this.context=o;let m=o.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){let c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let eq={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Eg{constructor(o,c,d,m){this.length=c.length,this.attributes=d,this.itemSize=c.bytesPerElement,this.dynamicDraw=m,this.context=o;let y=o.gl;this.buffer=y.createBuffer(),o.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);let c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,c){for(let d=0;d<this.attributes.length;d++){let m=c.attributes[this.attributes[d].name];m!==void 0&&o.enableVertexAttribArray(m)}}setVertexAttribPointers(o,c,d){for(let m=0;m<this.attributes.length;m++){let y=this.attributes[m],I=c.attributes[y.name];I!==void 0&&o.vertexAttribPointer(I,y.components,o[eq[y.type]],!1,this.itemSize,y.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Hu=new WeakMap;function eu(_){var o;if(Hu.has(_))return Hu.get(_);{let c=(o=_.getParameter(_.VERSION))===null||o===void 0?void 0:o.startsWith("WebGL 2.0");return Hu.set(_,c),c}}class ur{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class $p extends ur{getDefault(){return a.aM.transparent}set(o){let c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class tq extends ur{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class uc extends ur{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class rq extends ur{getDefault(){return[!0,!0,!0,!0]}set(o){let c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class q1 extends ur{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class nq extends ur{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class P1 extends ur{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){let c=this.current;(o.func!==c.func||o.ref!==c.ref||o.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class Sg extends ur{getDefault(){let o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){let c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class M1 extends ur{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;o?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=o,this.dirty=!1}}class O1 extends ur{getDefault(){return[0,1]}set(o){let c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class R1 extends ur{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;o?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=o,this.dirty=!1}}class D1 extends ur{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class Ku extends ur{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;o?c.enable(c.BLEND):c.disable(c.BLEND),this.current=o,this.dirty=!1}}class L1 extends ur{getDefault(){let o=this.gl;return[o.ONE,o.ZERO]}set(o){let c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class iq extends ur{getDefault(){return a.aM.transparent}set(o){let c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class k1 extends ur{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class ef extends ur{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;o?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=o,this.dirty=!1}}class aq extends ur{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Gp extends ur{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class oq extends ur{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class sq extends ur{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class N1 extends ur{getDefault(){let o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){let c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class F1 extends ur{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class z1 extends ur{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Tg extends ur{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;c.bindTexture(c.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class j1 extends ur{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Wp extends ur{getDefault(){return null}set(o){let c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Cs extends ur{getDefault(){return null}set(o){var c;if(o===this.current&&!this.dirty)return;let d=this.gl;eu(d)?d.bindVertexArray(o):(c=d.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(o),this.current=o,this.dirty=!1}}class Ig extends ur{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class Cg extends ur{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Ag extends ur{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class Zp extends ur{constructor(o,c){super(o),this.context=o,this.parent=c}getDefault(){return null}}class qg extends Zp{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Xu extends Zp{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Pg extends Zp{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class uq{constructor(o,c,d,m,y){this.context=o,this.width=c,this.height=d;let I=o.gl,A=this.framebuffer=I.createFramebuffer();if(this.colorAttachment=new qg(o,A),m)this.depthAttachment=y?new Pg(o,A):new Xu(o,A);else if(y)throw new Error("Stencil cannot be set without depth");if(I.checkFramebufferStatus(I.FRAMEBUFFER)!==I.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let o=this.context.gl,c=this.colorAttachment.get();if(c&&o.deleteTexture(c),this.depthAttachment){let d=this.depthAttachment.get();d&&o.deleteRenderbuffer(d)}o.deleteFramebuffer(this.framebuffer)}}class on{constructor(o,c,d){this.blendFunction=o,this.blendColor=c,this.mask=d}}on.Replace=[1,0],on.disabled=new on(on.Replace,a.aM.transparent,[!1,!1,!1,!1]),on.unblended=new on(on.Replace,a.aM.transparent,[!0,!0,!0,!0]),on.alphaBlended=new on([1,771],a.aM.transparent,[!0,!0,!0,!0]);class lq{constructor(o){var c,d;if(this.gl=o,this.clearColor=new $p(this),this.clearDepth=new tq(this),this.clearStencil=new uc(this),this.colorMask=new rq(this),this.depthMask=new q1(this),this.stencilMask=new nq(this),this.stencilFunc=new P1(this),this.stencilOp=new Sg(this),this.stencilTest=new M1(this),this.depthRange=new O1(this),this.depthTest=new R1(this),this.depthFunc=new D1(this),this.blend=new Ku(this),this.blendFunc=new L1(this),this.blendColor=new iq(this),this.blendEquation=new k1(this),this.cullFace=new ef(this),this.cullFaceSide=new aq(this),this.frontFace=new Gp(this),this.program=new oq(this),this.activeTexture=new sq(this),this.viewport=new N1(this),this.bindFramebuffer=new F1(this),this.bindRenderbuffer=new z1(this),this.bindTexture=new Tg(this),this.bindVertexBuffer=new j1(this),this.bindElementBuffer=new Wp(this),this.bindVertexArray=new Cs(this),this.pixelStoreUnpack=new Ig(this),this.pixelStoreUnpackPremultiplyAlpha=new Cg(this),this.pixelStoreUnpackFlipY=new Ag(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),eu(o)){this.HALF_FLOAT=o.HALF_FLOAT;let m=o.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=o.RGBA16F)!==null&&c!==void 0?c:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(d=o.RGB16F)!==null&&d!==void 0?d:m==null?void 0:m.RGB16F_EXT,o.getExtension("EXT_color_buffer_float")}else{o.getExtension("EXT_color_buffer_half_float"),o.getExtension("OES_texture_half_float_linear");let m=o.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,c){return new jo(this,o,c)}createVertexBuffer(o,c,d){return new Eg(this,o,c,d)}createRenderbuffer(o,c,d){let m=this.gl,y=m.createRenderbuffer();return this.bindRenderbuffer.set(y),m.renderbufferStorage(m.RENDERBUFFER,o,c,d),this.bindRenderbuffer.set(null),y}createFramebuffer(o,c,d,m){return new uq(this,o,c,d,m)}clear({color:o,depth:c,stencil:d}){let m=this.gl,y=0;o&&(y|=m.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(y|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),d!==void 0&&(y|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),m.clear(y)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){a.aE(o.blendFunction,on.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}createVertexArray(){var o;return eu(this.gl)?this.gl.createVertexArray():(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.createVertexArrayOES()}deleteVertexArray(o){var c;return eu(this.gl)?this.gl.deleteVertexArray(o):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(o)}unbindVAO(){this.bindVertexArray.set(null)}}class Nt{constructor(o,c,d){this.func=o,this.mask=c,this.range=d}}Nt.ReadOnly=!1,Nt.ReadWrite=!0,Nt.disabled=new Nt(519,Nt.ReadOnly,[0,1]);let Hp=7680;class Ar{constructor(o,c,d,m,y,I){this.test=o,this.ref=c,this.mask=d,this.fail=m,this.depthFail=y,this.pass=I}}Ar.disabled=new Ar({func:519,mask:0},0,0,Hp,Hp,Hp);class _r{constructor(o,c,d){this.enable=o,this.mode=c,this.frontFace=d}}let Yu;function tf(_,o,c,d,m){let y=_.context,I=y.gl,A=_.useProgram("collisionBox"),M=[],D=0,N=0;for(let ce=0;ce<d.length;ce++){let fe=d[ce],te=o.getTile(fe).getBucket(c);if(!te)continue;let me=m?te.textCollisionBox:te.iconCollisionBox,ge=te.collisionCircleArray;if(ge.length>0){let we=a.H();a.aQ(we,te.placementInvProjMatrix,_.transform.glCoordMatrix),a.aQ(we,we,te.placementViewportMatrix),M.push({circleArray:ge,circleOffset:N,transform:fe.posMatrix,invTransform:we,coord:fe}),D+=ge.length/4,N=D}me&&A.draw(y,I.LINES,Nt.disabled,Ar.disabled,_.colorModeForRenderPass(),_r.disabled,{u_matrix:fe.posMatrix,u_pixel_extrude_scale:[1/(F=_.transform).width,1/F.height]},_.style.map.terrain&&_.style.map.terrain.getTerrainData(fe),c.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,null,_.transform.zoom,null,null,me.collisionVertexBuffer)}var F;if(!m||!M.length)return;let G=_.useProgram("collisionCircle"),Y=new a.aR;Y.resize(4*D),Y._trim();let ee=0;for(let ce of M)for(let fe=0;fe<ce.circleArray.length/4;fe++){let te=4*fe,me=ce.circleArray[te+0],ge=ce.circleArray[te+1],we=ce.circleArray[te+2],Pe=ce.circleArray[te+3];Y.emplace(ee++,me,ge,we,Pe,0),Y.emplace(ee++,me,ge,we,Pe,1),Y.emplace(ee++,me,ge,we,Pe,2),Y.emplace(ee++,me,ge,we,Pe,3)}(!Yu||Yu.length<2*D)&&(Yu=function(ce){let fe=2*ce,te=new a.aT;te.resize(fe),te._trim();for(let me=0;me<fe;me++){let ge=6*me;te.uint16[ge+0]=4*me+0,te.uint16[ge+1]=4*me+1,te.uint16[ge+2]=4*me+2,te.uint16[ge+3]=4*me+2,te.uint16[ge+4]=4*me+3,te.uint16[ge+5]=4*me+0}return te}(D));let ae=y.createIndexBuffer(Yu,!0),le=y.createVertexBuffer(Y,a.aS.members,!0);for(let ce of M){let fe=Zu(ce.transform,ce.invTransform,_.transform);G.draw(y,I.TRIANGLES,Nt.disabled,Ar.disabled,_.colorModeForRenderPass(),_r.disabled,fe,_.style.map.terrain&&_.style.map.terrain.getTerrainData(ce.coord),c.id,le,ae,a.a0.simpleSegment(0,2*ce.circleOffset,ce.circleArray.length,ce.circleArray.length/2),null,_.transform.zoom,null,null,null)}le.destroy(),ae.destroy()}_r.disabled=new _r(!1,1029,2305),_r.backCCW=new _r(!0,1029,2305);let rf=a.an(new Float32Array(16));function Mg(_,o,c,d,m,y){let{horizontalAlign:I,verticalAlign:A}=a.au(_);return new a.P((-(I-.5)*o/m+d[0])*y,(-(A-.5)*c/m+d[1])*y)}function Ju(_,o,c,d,m,y){let I=o.tileAnchorPoint.add(new a.P(o.translation[0],o.translation[1]));if(o.pitchWithMap){let A=d.mult(y);c||(A=A.rotate(-m));let M=I.add(A);return oe(M.x,M.y,o.labelPlaneMatrix,o.getElevation).point}if(c){let A=Te(o.tileAnchorPoint.x+1,o.tileAnchorPoint.y,o).point.sub(_),M=Math.atan(A.y/A.x)+(A.x<0?Math.PI:0);return _.add(d.rotate(M))}return _.add(d)}function lc(_,o,c,d,m,y,I,A,M,D,N,F,G,Y){let ee=_.text.placedSymbolArray,ae=_.text.dynamicLayoutVertexArray,le=_.icon.dynamicLayoutVertexArray,ce={};ae.clear();for(let fe=0;fe<ee.length;fe++){let te=ee.get(fe),me=te.hidden||!te.crossTileID||_.allowVerticalPlacement&&!te.placedOrientation?null:d[te.crossTileID];if(me){let ge=new a.P(te.anchorX,te.anchorY),we={getElevation:Y,width:m.width,height:m.height,labelPlaneMatrix:y,lineVertexArray:null,pitchWithMap:c,projection:N,projectionCache:null,tileAnchorPoint:ge,translation:F,unwrappedTileID:G},Pe=c?oe(ge.x,ge.y,I,Y):Te(ge.x,ge.y,we),ke=B(m.cameraToCenterDistance,Pe.signedDistanceFromCamera),We=a.ai(_.textSizeData,M,te)*ke/a.ap;c&&(We*=_.tilePixelRatio/A);let{width:Je,height:Ve,anchor:Be,textOffset:it,textBoxScale:bt}=me,$e=Mg(Be,Je,Ve,it,bt,We),Ke=N.getPitchedTextCorrection(m,ge.add(new a.P(F[0],F[1])),G),xt=Ju(Pe.point,we,o,$e,m.angle,Ke),Dr=_.allowVerticalPlacement&&te.placedOrientation===a.ah.vertical?Math.PI/2:0;for(let Mt=0;Mt<te.numGlyphs;Mt++)a.aj(ae,xt,Dr);D&&te.associatedIconIndex>=0&&(ce[te.associatedIconIndex]={shiftedAnchor:xt,angle:Dr})}else ht(te.numGlyphs,ae)}if(D){le.clear();let fe=_.icon.placedSymbolArray;for(let te=0;te<fe.length;te++){let me=fe.get(te);if(me.hidden)ht(me.numGlyphs,le);else{let ge=ce[te];if(ge)for(let we=0;we<me.numGlyphs;we++)a.aj(le,ge.shiftedAnchor,ge.angle);else ht(me.numGlyphs,le)}}_.icon.dynamicLayoutVertexBuffer.updateData(le)}_.text.dynamicLayoutVertexBuffer.updateData(ae)}function ka(_,o,c){return c.iconsInText&&o?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Og(_,o,c,d,m,y,I,A,M,D,N,F){let G=_.context,Y=G.gl,ee=_.transform,ae=Gu(),le=A==="map",ce=M==="map",fe=A!=="viewport"&&c.layout.get("symbol-placement")!=="point",te=le&&!ce&&!fe,me=!ce&&fe,ge=!c.layout.get("symbol-sort-key").isConstant(),we=!1,Pe=_.depthModeForSublayer(0,Nt.ReadOnly),ke=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),We=[],Je=ae.getCircleRadiusCorrection(ee);for(let Ve of d){let Be=o.getTile(Ve),it=Be.getBucket(c);if(!it)continue;let bt=m?it.text:it.icon;if(!bt||!bt.segments.get().length||!bt.hasVisibleVertices)continue;let $e=bt.programConfigurations.get(c.id),Ke=m||it.sdfIcons,xt=m?it.textSizeData:it.iconSizeData,Dr=ce||ee.pitch!==0,Mt=_.useProgram(ka(Ke,m,it),$e),Bt=a.ag(xt,ee.zoom),Lr=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ve),si,wo,kr,Vi,Ei=[0,0],ui=null;if(m)wo=Be.glyphAtlasTexture,kr=Y.LINEAR,si=Be.glyphAtlasTexture.size,it.iconsInText&&(Ei=Be.imageAtlasTexture.size,ui=Be.imageAtlasTexture,Vi=Dr||_.options.rotating||_.options.zooming||xt.kind==="composite"||xt.kind==="camera"?Y.LINEAR:Y.NEAREST);else{let Wt=c.layout.get("icon-size").constantOr(0)!==1||it.iconsNeedLinear;wo=Be.imageAtlasTexture,kr=Ke||_.options.rotating||_.options.zooming||Wt||Dr?Y.LINEAR:Y.NEAREST,si=Be.imageAtlasTexture.size}let Si=jt(Be,1,_.transform.zoom),Vo=me?Ve.posMatrix:rf,Tc=Js(Vo,ce,le,_.transform,Si),pd=zo(Vo,ce,le,_.transform,Si),Ic=zo(Ve.posMatrix,ce,le,_.transform,Si),za=ae.translatePosition(_.transform,Be,y,I),dd=ke&&it.hasTextData(),ny=c.layout.get("icon-text-fit")!=="none"&&dd&&it.hasIconData();if(fe){let Wt=_.style.map.terrain?(Cc,Ac)=>_.style.map.terrain.getElevation(Ve,Cc,Ac):null,nl=c.layout.get("text-rotation-alignment")==="map";J(it,Ve.posMatrix,_,m,Tc,Ic,ce,D,nl,ae,Ve.toUnwrapped(),ee.width,ee.height,za,Wt)}let ja=Ve.posMatrix,Ba=m&&ke||ny,tu=fe||Ba?rf:Tc,bo=pd,Kn=Ke&&c.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,li;li=Ke?it.iconsInText?xg(xt.kind,Bt,te,ce,fe,Ba,_,ja,tu,bo,za,si,Ei,Je):Qh(xt.kind,Bt,te,ce,fe,Ba,_,ja,tu,bo,za,m,si,!0,Je):A1(xt.kind,Bt,te,ce,fe,Ba,_,ja,tu,bo,za,m,si,Je);let xa={program:Mt,buffers:bt,uniformValues:li,atlasTexture:wo,atlasTextureIcon:ui,atlasInterpolation:kr,atlasInterpolationIcon:Vi,isSDF:Ke,hasHalo:Kn};if(ge&&it.canOverlap){we=!0;let Wt=bt.segments.get();for(let nl of Wt)We.push({segments:new a.a0([nl]),sortKey:nl.sortKey,state:xa,terrainData:Lr})}else We.push({segments:bt.segments,sortKey:0,state:xa,terrainData:Lr})}we&&We.sort((Ve,Be)=>Ve.sortKey-Be.sortKey);for(let Ve of We){let Be=Ve.state;if(G.activeTexture.set(Y.TEXTURE0),Be.atlasTexture.bind(Be.atlasInterpolation,Y.CLAMP_TO_EDGE),Be.atlasTextureIcon&&(G.activeTexture.set(Y.TEXTURE1),Be.atlasTextureIcon&&Be.atlasTextureIcon.bind(Be.atlasInterpolationIcon,Y.CLAMP_TO_EDGE)),Be.isSDF){let it=Be.uniformValues;Be.hasHalo&&(it.u_is_halo=1,Rg(Be.buffers,Ve.segments,c,_,Be.program,Pe,N,F,it,Ve.terrainData)),it.u_is_halo=0}Rg(Be.buffers,Ve.segments,c,_,Be.program,Pe,N,F,Be.uniformValues,Ve.terrainData)}}function Rg(_,o,c,d,m,y,I,A,M,D){let N=d.context;m.draw(N,N.gl.TRIANGLES,y,I,A,_r.disabled,M,D,c.id,_.layoutVertexBuffer,_.indexBuffer,o,c.paint,d.transform.zoom,_.programConfigurations.get(c.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Dg(_,o,c,d){let m=_.context,y=m.gl,I=Ar.disabled,A=new on([y.ONE,y.ONE],a.aM.transparent,[!0,!0,!0,!0]),M=o.getBucket(c);if(!M)return;let D=d.key,N=c.heatmapFbos.get(D);N||(N=nf(m,o.tileSize,o.tileSize),c.heatmapFbos.set(D,N)),m.bindFramebuffer.set(N.framebuffer),m.viewport.set([0,0,o.tileSize,o.tileSize]),m.clear({color:a.aM.transparent});let F=M.programConfigurations.get(c.id),G=_.useProgram("heatmap",F),Y=_.style.map.terrain.getTerrainData(d);G.draw(m,y.TRIANGLES,Nt.disabled,I,A,_r.disabled,Ui(d.posMatrix,o,_.transform.zoom,c.paint.get("heatmap-intensity")),Y,c.id,M.layoutVertexBuffer,M.indexBuffer,M.segments,c.paint,_.transform.zoom,F)}function Qu(_,o,c){let d=_.context,m=d.gl;d.setColorMode(_.colorModeForRenderPass());let y=af(d,o),I=c.key,A=o.heatmapFbos.get(I);A&&(d.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,A.colorAttachment.get()),d.activeTexture.set(m.TEXTURE1),y.bind(m.LINEAR,m.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(d,m.TRIANGLES,Nt.disabled,Ar.disabled,_.colorModeForRenderPass(),_r.disabled,jp(_,o,0,1),null,o.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,o.paint,_.transform.zoom),A.destroy(),o.heatmapFbos.delete(I))}function nf(_,o,c){var d,m;let y=_.gl,I=y.createTexture();y.bindTexture(y.TEXTURE_2D,I),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);let A=(d=_.HALF_FLOAT)!==null&&d!==void 0?d:y.UNSIGNED_BYTE,M=(m=_.RGBA16F)!==null&&m!==void 0?m:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,M,o,c,0,y.RGBA,A,null);let D=_.createFramebuffer(o,c,!1,!1);return D.colorAttachment.set(I),D}function af(_,o){return o.colorRampTexture||(o.colorRampTexture=new Le(_,o.colorRamp,_.gl.RGBA)),o.colorRampTexture}function cc(_,o,c,d,m){if(!c||!d||!d.imageAtlas)return;let y=d.imageAtlas.patternPositions,I=y[c.to.toString()],A=y[c.from.toString()];if(!I&&A&&(I=A),!A&&I&&(A=I),!I||!A){let M=m.getPaintProperty(o);I=y[M],A=y[M]}I&&A&&_.setConstantPatternPositions(I,A)}function of(_,o,c,d,m,y,I){let A=_.context.gl,M="fill-pattern",D=c.paint.get(M),N=D&&D.constantOr(1),F=c.getCrossfadeParameters(),G,Y,ee,ae,le;I?(Y=N&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",G=A.LINES):(Y=N?"fillPattern":"fill",G=A.TRIANGLES);let ce=D.constantOr(null);for(let fe of d){let te=o.getTile(fe);if(N&&!te.patternsLoaded())continue;let me=te.getBucket(c);if(!me)continue;let ge=me.programConfigurations.get(c.id),we=_.useProgram(Y,ge),Pe=_.style.map.terrain&&_.style.map.terrain.getTerrainData(fe);N&&(_.context.activeTexture.set(A.TEXTURE0),te.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),ge.updatePaintBuffers(F)),cc(ge,M,ce,te,c);let ke=Pe?fe:null,We=_.translatePosMatrix(ke?ke.posMatrix:fe.posMatrix,te,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(I){ae=me.indexBuffer2,le=me.segments2;let Je=[A.drawingBufferWidth,A.drawingBufferHeight];ee=Y==="fillOutlinePattern"&&N?S1(We,_,F,te,Je):KA(We,Je)}else ae=me.indexBuffer,le=me.segments,ee=N?E1(We,_,F,te):oc(We);we.draw(_.context,G,m,_.stencilModeForClipping(fe),y,_r.disabled,ee,Pe,c.id,me.layoutVertexBuffer,ae,le,c.paint,_.transform.zoom,ge)}}function Kp(_,o,c,d,m,y,I){let A=_.context,M=A.gl,D="fill-extrusion-pattern",N=c.paint.get(D),F=N.constantOr(1),G=c.getCrossfadeParameters(),Y=c.paint.get("fill-extrusion-opacity"),ee=N.constantOr(null);for(let ae of d){let le=o.getTile(ae),ce=le.getBucket(c);if(!ce)continue;let fe=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ae),te=ce.programConfigurations.get(c.id),me=_.useProgram(F?"fillExtrusionPattern":"fillExtrusion",te);F&&(_.context.activeTexture.set(M.TEXTURE0),le.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),te.updatePaintBuffers(G)),cc(te,D,ee,le,c);let ge=_.translatePosMatrix(ae.posMatrix,le,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),we=c.paint.get("fill-extrusion-vertical-gradient"),Pe=F?zp(ge,_,we,Y,ae,G,le):Yh(ge,_,we,Y);me.draw(A,A.gl.TRIANGLES,m,y,I,_r.backCCW,Pe,fe,c.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,c.paint,_.transform.zoom,te,_.style.map.terrain&&ce.centroidVertexBuffer)}}function hc(_,o,c,d,m,y,I){let A=_.context,M=A.gl,D=c.fbo;if(!D)return;let N=_.useProgram("hillshade"),F=_.style.map.terrain&&_.style.map.terrain.getTerrainData(o);A.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,D.colorAttachment.get()),N.draw(A,M.TRIANGLES,m,y,I,_r.disabled,((G,Y,ee,ae)=>{let le=ee.paint.get("hillshade-shadow-color"),ce=ee.paint.get("hillshade-highlight-color"),fe=ee.paint.get("hillshade-accent-color"),te=ee.paint.get("hillshade-illumination-direction")*(Math.PI/180);ee.paint.get("hillshade-illumination-anchor")==="viewport"&&(te-=G.transform.angle);let me=!G.options.moving;return{u_matrix:ae?ae.posMatrix:G.transform.calculatePosMatrix(Y.tileID.toUnwrapped(),me),u_image:0,u_latrange:Bp(0,Y.tileID),u_light:[ee.paint.get("hillshade-exaggeration"),te],u_shadow:le,u_highlight:ce,u_accent:fe}})(_,c,d,F?o:null),F,d.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function fc(_,o,c,d,m,y){let I=_.context,A=I.gl,M=o.dem;if(M&&M.data){let D=M.dim,N=M.stride,F=M.getPixels();if(I.activeTexture.set(A.TEXTURE1),I.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||_.getTileTexture(N),o.demTexture){let Y=o.demTexture;Y.update(F,{premultiply:!1}),Y.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else o.demTexture=new Le(I,F,A.RGBA,{premultiply:!1}),o.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);I.activeTexture.set(A.TEXTURE0);let G=o.fbo;if(!G){let Y=new Le(I,{width:D,height:D,data:null},A.RGBA);Y.bind(A.LINEAR,A.CLAMP_TO_EDGE),G=o.fbo=I.createFramebuffer(D,D,!0,!1),G.colorAttachment.set(Y.texture)}I.bindFramebuffer.set(G.framebuffer),I.viewport.set([0,0,D,D]),_.useProgram("hillshadePrepare").draw(I,A.TRIANGLES,d,m,y,_r.disabled,((Y,ee)=>{let ae=ee.stride,le=a.H();return a.aP(le,0,a.X,-a.X,0,0,1),a.J(le,le,[0,-a.X,0]),{u_matrix:le,u_image:1,u_dimension:[ae,ae],u_zoom:Y.overscaledZ,u_unpack:ee.getUnpackVector()}})(o.tileID,M),null,c.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),o.needsHillshadePrepare=!1}}function B1(_,o,c,d,m,y){let I=d.paint.get("raster-fade-duration");if(!y&&I>0){let A=b.now(),M=(A-_.timeAdded)/I,D=o?(A-o.timeAdded)/I:-1,N=c.getSource(),F=m.coveringZoomLevel({tileSize:N.tileSize,roundZoom:N.roundZoom}),G=!o||Math.abs(o.tileID.overscaledZ-F)>Math.abs(_.tileID.overscaledZ-F),Y=G&&_.refreshedUponExpiration?1:a.ac(G?M:1-D,0,1);return _.refreshedUponExpiration&&M>=1&&(_.refreshedUponExpiration=!1),o?{opacity:1,mix:1-Y}:{opacity:Y,mix:0}}return{opacity:1,mix:0}}let Lg=new a.aM(1,0,0,1),rr=new a.aM(0,1,0,1),Xp=new a.aM(0,0,1,1),cq=new a.aM(1,0,1,1),U1=new a.aM(0,1,1,1);function pc(_,o,c,d){Yp(_,0,o+c/2,_.transform.width,c,d)}function V1(_,o,c,d){Yp(_,o-c/2,0,c,_.transform.height,d)}function Yp(_,o,c,d,m,y){let I=_.context,A=I.gl;A.enable(A.SCISSOR_TEST),A.scissor(o*_.pixelRatio,c*_.pixelRatio,d*_.pixelRatio,m*_.pixelRatio),I.clear({color:y}),A.disable(A.SCISSOR_TEST)}function $1(_,o,c){let d=_.context,m=d.gl,y=c.posMatrix,I=_.useProgram("debug"),A=Nt.disabled,M=Ar.disabled,D=_.colorModeForRenderPass(),N="$debug",F=_.style.map.terrain&&_.style.map.terrain.getTerrainData(c);d.activeTexture.set(m.TEXTURE0);let G=o.getTileByID(c.key).latestRawTileData,Y=Math.floor((G&&G.byteLength||0)/1024),ee=o.getTile(c).tileSize,ae=512/Math.min(ee,512)*(c.overscaledZ/_.transform.zoom)*.5,le=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(le+=` => ${c.overscaledZ}`),function(ce,fe){ce.initDebugOverlayCanvas();let te=ce.debugOverlayCanvas,me=ce.context.gl,ge=ce.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,te.width,te.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold 36px Open Sans, sans-serif",ge.fillText(fe,5,5),ge.strokeText(fe,5,5),ce.debugOverlayTexture.update(te),ce.debugOverlayTexture.bind(me.LINEAR,me.CLAMP_TO_EDGE)}(_,`${le} ${Y}kB`),I.draw(d,m.TRIANGLES,A,M,on.alphaBlended,_r.disabled,Jh(y,a.aM.transparent,ae),null,N,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),I.draw(d,m.LINE_STRIP,A,M,D,_r.disabled,Jh(y,a.aM.red),F,N,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function G1(_,o,c){let d=_.context,m=d.gl,y=_.colorModeForRenderPass(),I=new Nt(m.LEQUAL,Nt.ReadWrite,_.depthRangeFor3D),A=_.useProgram("terrain"),M=o.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,_.width,_.height]);for(let D of c){let N=_.renderToTexture.getTexture(D),F=o.getTerrainData(D.tileID);d.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,N.texture);let G=_.transform.calculatePosMatrix(D.tileID.toUnwrapped()),Y=o.getMeshFrameDelta(_.transform.zoom),ee=_.transform.calculateFogMatrix(D.tileID.toUnwrapped()),ae=yg(G,Y,ee,_.style.sky,_.transform.pitch);A.draw(d,m.TRIANGLES,I,Ar.disabled,y,_r.backCCW,ae,F,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}class Jp{constructor(o,c,d){this.vertexBuffer=o,this.indexBuffer=c,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Qp{constructor(o,c){this.context=new lq(o),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ft.maxUnderzooming+ft.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new vg}resize(o,c,d){if(this.width=Math.floor(o*d),this.height=Math.floor(c*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let m of this.style._order)this.style._layers[m].resize()}setup(){let o=this.context,c=new a.aX;c.emplaceBack(0,0),c.emplaceBack(a.X,0),c.emplaceBack(0,a.X),c.emplaceBack(a.X,a.X),this.tileExtentBuffer=o.createVertexBuffer(c,Wu.members),this.tileExtentSegments=a.a0.simpleSegment(0,0,4,2);let d=new a.aX;d.emplaceBack(0,0),d.emplaceBack(a.X,0),d.emplaceBack(0,a.X),d.emplaceBack(a.X,a.X),this.debugBuffer=o.createVertexBuffer(d,Wu.members),this.debugSegments=a.a0.simpleSegment(0,0,4,5);let m=new a.$;m.emplaceBack(0,0,0,0),m.emplaceBack(a.X,0,a.X,0),m.emplaceBack(0,a.X,0,a.X),m.emplaceBack(a.X,a.X,a.X,a.X),this.rasterBoundsBuffer=o.createVertexBuffer(m,pa.members),this.rasterBoundsSegments=a.a0.simpleSegment(0,0,4,2);let y=new a.aX;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(y,Wu.members),this.viewportSegments=a.a0.simpleSegment(0,0,4,2);let I=new a.aZ;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(I);let A=new a.aY;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(A);let M=this.context.gl;this.stencilClearMode=new Ar({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){let o=this.context,c=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let d=a.H();a.aP(d,0,this.width,this.height,0,0,1),a.K(d,d,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,c.TRIANGLES,Nt.disabled,this.stencilClearMode,on.disabled,_r.disabled,Bi(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,c){if(this.currentStencilSource===o.source||!o.isTileClipped()||!c||!c.length)return;this.currentStencilSource=o.source;let d=this.context,m=d.gl;this.nextStencilID+c.length>256&&this.clearStencil(),d.setColorMode(on.disabled),d.setDepthMode(Nt.disabled);let y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(let I of c){let A=this._tileClippingMaskIDs[I.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(I);y.draw(d,m.TRIANGLES,Nt.disabled,new Ar({func:m.ALWAYS,mask:0},A,255,m.KEEP,m.KEEP,m.REPLACE),on.disabled,_r.disabled,Bi(I.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let o=this.nextStencilID++,c=this.context.gl;return new Ar({func:c.NOTEQUAL,mask:255},o,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(o){let c=this.context.gl;return new Ar({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(o){let c=this.context.gl,d=o.sort((I,A)=>A.overscaledZ-I.overscaledZ),m=d[d.length-1].overscaledZ,y=d[0].overscaledZ-m+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();let I={};for(let A=0;A<y;A++)I[A+m]=new Ar({func:c.GEQUAL,mask:255},A+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=y,[I,d]}return[{[m]:Ar.disabled},d]}colorModeForRenderPass(){let o=this.context.gl;return this._showOverdrawInspector?new on([o.CONSTANT_COLOR,o.ONE],new a.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?on.unblended:on.alphaBlended}depthModeForSublayer(o,c,d){if(!this.opaquePassEnabledForLayer())return Nt.disabled;let m=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new Nt(d||this.context.gl.LEQUAL,c,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,c){this.style=o,this.options=c,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(b.now()),this.imageManager.beginFrame();let d=this.style._order,m=this.style.sourceCaches,y={},I={},A={};for(let M in m){let D=m[M];D.used&&D.prepare(this.context),y[M]=D.getVisibleCoordinates(),I[M]=y[M].slice().reverse(),A[M]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<d.length;M++)if(this.style._layers[d[M]].is3D()){this.opaquePassCutoff=M;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let M of d){let D=this.style._layers[M];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;let N=I[D.source];(D.type==="custom"||N.length)&&this.renderLayer(this,m[D.source],D,N)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?a.aM.black:a.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(M,D){let N=M.context,F=N.gl,G=((ce,fe,te)=>({u_sky_color:ce.properties.get("sky-color"),u_horizon_color:ce.properties.get("horizon-color"),u_horizon:(fe.height/2+fe.getHorizon())*te,u_sky_horizon_blend:ce.properties.get("sky-horizon-blend")*fe.height/2*te}))(D,M.style.map.transform,M.pixelRatio),Y=new Nt(F.LEQUAL,Nt.ReadWrite,[0,1]),ee=Ar.disabled,ae=M.colorModeForRenderPass(),le=M.useProgram("sky");if(!D.mesh){let ce=new a.aX;ce.emplaceBack(-1,-1),ce.emplaceBack(1,-1),ce.emplaceBack(1,1),ce.emplaceBack(-1,1);let fe=new a.aY;fe.emplaceBack(0,1,2),fe.emplaceBack(0,2,3),D.mesh=new Jp(N.createVertexBuffer(ce,Wu.members),N.createIndexBuffer(fe),a.a0.simpleSegment(0,0,ce.length,fe.length))}le.draw(N,F.TRIANGLES,Y,ee,ae,_r.disabled,G,void 0,"sky",D.mesh.vertexBuffer,D.mesh.indexBuffer,D.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){let M=this.style._layers[d[this.currentLayer]],D=m[M.source],N=y[M.source];this._renderTileClippingMasks(M,N),this.renderLayer(this,D,M,N)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){let M=this.style._layers[d[this.currentLayer]],D=m[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;let N=(M.type==="symbol"?A:I)[M.source];this._renderTileClippingMasks(M,y[M.source]),this.renderLayer(this,D,M,N)}if(this.options.showTileBoundaries){let M=function(D,N){let F=null,G=Object.values(D._layers).flatMap(le=>le.source&&!le.isHidden(N)?[D.sourceCaches[le.source]]:[]),Y=G.filter(le=>le.getSource().type==="vector"),ee=G.filter(le=>le.getSource().type!=="vector"),ae=le=>{(!F||F.getSource().maxzoom<le.getSource().maxzoom)&&(F=le)};return Y.forEach(le=>ae(le)),F||ee.forEach(le=>ae(le)),F}(this.style,this.transform.zoom);M&&function(D,N,F){for(let G=0;G<F.length;G++)$1(D,N,F[G])}(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){let D=M.transform.padding;pc(M,M.transform.height-(D.top||0),3,Lg),pc(M,D.bottom||0,3,rr),V1(M,D.left||0,3,Xp),V1(M,M.transform.width-(D.right||0),3,cq);let N=M.transform.centerPoint;(function(F,G,Y,ee){Yp(F,G-1,Y-10,2,20,ee),Yp(F,G-10,Y-1,20,2,ee)})(M,N.x,M.transform.height-N.y,U1)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(o){if(!this.style||!this.style.map||!this.style.map.terrain)return;let c=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix,m=this.terrainFacilitator.dirty;m||(m=o?!a.a_(c,d):!a.a$(c,d)),m||(m=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),m&&(a.b0(c,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,I){let A=y.context,M=A.gl,D=on.unblended,N=new Nt(M.LEQUAL,Nt.ReadWrite,[0,1]),F=I.getTerrainMesh(),G=I.sourceCache.getRenderableTiles(),Y=y.useProgram("terrainDepth");A.bindFramebuffer.set(I.getFramebuffer("depth").framebuffer),A.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),A.clear({color:a.aM.transparent,depth:1});for(let ee of G){let ae=I.getTerrainData(ee.tileID),le={u_matrix:y.transform.calculatePosMatrix(ee.tileID.toUnwrapped()),u_ele_delta:I.getMeshFrameDelta(y.transform.zoom)};Y.draw(A,M.TRIANGLES,N,Ar.disabled,D,_r.backCCW,le,ae,"terrain",F.vertexBuffer,F.indexBuffer,F.segments)}A.bindFramebuffer.set(null),A.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,I){let A=y.context,M=A.gl,D=on.unblended,N=new Nt(M.LEQUAL,Nt.ReadWrite,[0,1]),F=I.getTerrainMesh(),G=I.getCoordsTexture(),Y=I.sourceCache.getRenderableTiles(),ee=y.useProgram("terrainCoords");A.bindFramebuffer.set(I.getFramebuffer("coords").framebuffer),A.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),A.clear({color:a.aM.transparent,depth:1}),I.coordsIndex=[];for(let ae of Y){let le=I.getTerrainData(ae.tileID);A.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,G.texture);let ce={u_matrix:y.transform.calculatePosMatrix(ae.tileID.toUnwrapped()),u_terrain_coords_id:(255-I.coordsIndex.length)/255,u_texture:0,u_ele_delta:I.getMeshFrameDelta(y.transform.zoom)};ee.draw(A,M.TRIANGLES,N,Ar.disabled,D,_r.backCCW,ce,le,"terrain",F.vertexBuffer,F.indexBuffer,F.segments),I.coordsIndex.push(ae.tileID.key)}A.bindFramebuffer.set(null),A.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(o,c,d,m){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(m||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(y,I,A,M,D){if(y.renderPass!=="translucent")return;let N=Ar.disabled,F=y.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(G,Y,ee,ae,le,ce,fe,te,me){let ge=Y.transform,we=Gu(),Pe=le==="map",ke=ce==="map";for(let We of G){let Je=ae.getTile(We),Ve=Je.getBucket(ee);if(!Ve||!Ve.text||!Ve.text.segments.get().length)continue;let Be=a.ag(Ve.textSizeData,ge.zoom),it=jt(Je,1,Y.transform.zoom),bt=Js(We.posMatrix,ke,Pe,Y.transform,it),$e=ee.layout.get("icon-text-fit")!=="none"&&Ve.hasIconData();if(Be){let Ke=Math.pow(2,ge.zoom-Je.tileID.overscaledZ),xt=Y.style.map.terrain?(Mt,Bt)=>Y.style.map.terrain.getElevation(We,Mt,Bt):null,Dr=we.translatePosition(ge,Je,fe,te);lc(Ve,Pe,ke,me,ge,bt,We.posMatrix,Ke,Be,$e,we,Dr,We.toUnwrapped(),xt)}}}(M,y,A,I,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),D),A.paint.get("icon-opacity").constantOr(1)!==0&&Og(y,I,A,M,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),N,F),A.paint.get("text-opacity").constantOr(1)!==0&&Og(y,I,A,M,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),N,F),I.map.showCollisionBoxes&&(tf(y,I,A,M,!0),tf(y,I,A,M,!1))})(o,c,d,m,this.style.placement.variableOffsets);break;case"circle":(function(y,I,A,M){if(y.renderPass!=="translucent")return;let D=A.paint.get("circle-opacity"),N=A.paint.get("circle-stroke-width"),F=A.paint.get("circle-stroke-opacity"),G=!A.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(N.constantOr(1)===0||F.constantOr(1)===0))return;let Y=y.context,ee=Y.gl,ae=y.depthModeForSublayer(0,Nt.ReadOnly),le=Ar.disabled,ce=y.colorModeForRenderPass(),fe=[];for(let te=0;te<M.length;te++){let me=M[te],ge=I.getTile(me),we=ge.getBucket(A);if(!we)continue;let Pe=we.programConfigurations.get(A.id),ke=y.useProgram("circle",Pe),We=we.layoutVertexBuffer,Je=we.indexBuffer,Ve=y.style.map.terrain&&y.style.map.terrain.getTerrainData(me),Be={programConfiguration:Pe,program:ke,layoutVertexBuffer:We,indexBuffer:Je,uniformValues:XA(y,me,ge,A),terrainData:Ve};if(G){let it=we.segments.get();for(let bt of it)fe.push({segments:new a.a0([bt]),sortKey:bt.sortKey,state:Be})}else fe.push({segments:we.segments,sortKey:0,state:Be})}G&&fe.sort((te,me)=>te.sortKey-me.sortKey);for(let te of fe){let{programConfiguration:me,program:ge,layoutVertexBuffer:we,indexBuffer:Pe,uniformValues:ke,terrainData:We}=te.state;ge.draw(Y,ee.TRIANGLES,ae,le,ce,_r.disabled,ke,We,A.id,we,Pe,te.segments,A.paint,y.transform.zoom,me)}})(o,c,d,m);break;case"heatmap":(function(y,I,A,M){if(A.paint.get("heatmap-opacity")===0)return;let D=y.context;if(y.style.map.terrain){for(let N of M){let F=I.getTile(N);I.hasRenderableParent(N)||(y.renderPass==="offscreen"?Dg(y,F,A,N):y.renderPass==="translucent"&&Qu(y,A,N))}D.viewport.set([0,0,y.width,y.height])}else y.renderPass==="offscreen"?function(N,F,G,Y){let ee=N.context,ae=ee.gl,le=Ar.disabled,ce=new on([ae.ONE,ae.ONE],a.aM.transparent,[!0,!0,!0,!0]);(function(fe,te,me){let ge=fe.gl;fe.activeTexture.set(ge.TEXTURE1),fe.viewport.set([0,0,te.width/4,te.height/4]);let we=me.heatmapFbos.get(a.aU);we?(ge.bindTexture(ge.TEXTURE_2D,we.colorAttachment.get()),fe.bindFramebuffer.set(we.framebuffer)):(we=nf(fe,te.width/4,te.height/4),me.heatmapFbos.set(a.aU,we))})(ee,N,G),ee.clear({color:a.aM.transparent});for(let fe=0;fe<Y.length;fe++){let te=Y[fe];if(F.hasRenderableParent(te))continue;let me=F.getTile(te),ge=me.getBucket(G);if(!ge)continue;let we=ge.programConfigurations.get(G.id),Pe=N.useProgram("heatmap",we),{zoom:ke}=N.transform;Pe.draw(ee,ae.TRIANGLES,Nt.disabled,le,ce,_r.disabled,Ui(te.posMatrix,me,ke,G.paint.get("heatmap-intensity")),null,G.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,G.paint,N.transform.zoom,we)}ee.viewport.set([0,0,N.width,N.height])}(y,I,A,M):y.renderPass==="translucent"&&function(N,F){let G=N.context,Y=G.gl;G.setColorMode(N.colorModeForRenderPass());let ee=F.heatmapFbos.get(a.aU);ee&&(G.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,ee.colorAttachment.get()),G.activeTexture.set(Y.TEXTURE1),af(G,F).bind(Y.LINEAR,Y.CLAMP_TO_EDGE),N.useProgram("heatmapTexture").draw(G,Y.TRIANGLES,Nt.disabled,Ar.disabled,N.colorModeForRenderPass(),_r.disabled,jp(N,F,0,1),null,F.id,N.viewportBuffer,N.quadTriangleIndexBuffer,N.viewportSegments,F.paint,N.transform.zoom))}(y,A)})(o,c,d,m);break;case"line":(function(y,I,A,M){if(y.renderPass!=="translucent")return;let D=A.paint.get("line-opacity"),N=A.paint.get("line-width");if(D.constantOr(1)===0||N.constantOr(1)===0)return;let F=y.depthModeForSublayer(0,Nt.ReadOnly),G=y.colorModeForRenderPass(),Y=A.paint.get("line-dasharray"),ee=A.paint.get("line-pattern"),ae=ee.constantOr(1),le=A.paint.get("line-gradient"),ce=A.getCrossfadeParameters(),fe=ae?"linePattern":Y?"lineSDF":le?"lineGradient":"line",te=y.context,me=te.gl,ge=!0;for(let we of M){let Pe=I.getTile(we);if(ae&&!Pe.patternsLoaded())continue;let ke=Pe.getBucket(A);if(!ke)continue;let We=ke.programConfigurations.get(A.id),Je=y.context.program.get(),Ve=y.useProgram(fe,We),Be=ge||Ve.program!==Je,it=y.style.map.terrain&&y.style.map.terrain.getTerrainData(we),bt=ee.constantOr(null);if(bt&&Pe.imageAtlas){let xt=Pe.imageAtlas,Dr=xt.patternPositions[bt.to.toString()],Mt=xt.patternPositions[bt.from.toString()];Dr&&Mt&&We.setConstantPatternPositions(Dr,Mt)}let $e=it?we:null,Ke=ae?sc(y,Pe,A,ce,$e):Y?YA(y,Pe,A,Y,ce,$e):le?T1(y,Pe,A,ke.lineClipsArray.length,$e):Up(y,Pe,A,$e);if(ae)te.activeTexture.set(me.TEXTURE0),Pe.imageAtlasTexture.bind(me.LINEAR,me.CLAMP_TO_EDGE),We.updatePaintBuffers(ce);else if(Y&&(Be||y.lineAtlas.dirty))te.activeTexture.set(me.TEXTURE0),y.lineAtlas.bind(te);else if(le){let xt=ke.gradients[A.id],Dr=xt.texture;if(A.gradientVersion!==xt.version){let Mt=256;if(A.stepInterpolant){let Bt=I.getSource().maxzoom,Lr=we.canonical.z===Bt?Math.ceil(1<<y.transform.maxZoom-we.canonical.z):1;Mt=a.ac(a.aV(ke.maxLineLength/a.X*1024*Lr),256,te.maxTextureSize)}xt.gradient=a.aW({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:Mt,image:xt.gradient||void 0,clips:ke.lineClipsArray}),xt.texture?xt.texture.update(xt.gradient):xt.texture=new Le(te,xt.gradient,me.RGBA),xt.version=A.gradientVersion,Dr=xt.texture}te.activeTexture.set(me.TEXTURE0),Dr.bind(A.stepInterpolant?me.NEAREST:me.LINEAR,me.CLAMP_TO_EDGE)}Ve.draw(te,me.TRIANGLES,F,y.stencilModeForClipping(we),G,_r.disabled,Ke,it,A.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,A.paint,y.transform.zoom,We,ke.layoutVertexBuffer2),ge=!1}})(o,c,d,m);break;case"fill":(function(y,I,A,M){let D=A.paint.get("fill-color"),N=A.paint.get("fill-opacity");if(N.constantOr(1)===0)return;let F=y.colorModeForRenderPass(),G=A.paint.get("fill-pattern"),Y=y.opaquePassEnabledForLayer()&&!G.constantOr(1)&&D.constantOr(a.aM.transparent).a===1&&N.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===Y){let ee=y.depthModeForSublayer(1,y.renderPass==="opaque"?Nt.ReadWrite:Nt.ReadOnly);of(y,I,A,M,ee,F,!1)}if(y.renderPass==="translucent"&&A.paint.get("fill-antialias")){let ee=y.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,Nt.ReadOnly);of(y,I,A,M,ee,F,!0)}})(o,c,d,m);break;case"fill-extrusion":(function(y,I,A,M){let D=A.paint.get("fill-extrusion-opacity");if(D!==0&&y.renderPass==="translucent"){let N=new Nt(y.context.gl.LEQUAL,Nt.ReadWrite,y.depthRangeFor3D);if(D!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))Kp(y,I,A,M,N,Ar.disabled,on.disabled),Kp(y,I,A,M,N,y.stencilModeFor3D(),y.colorModeForRenderPass());else{let F=y.colorModeForRenderPass();Kp(y,I,A,M,N,Ar.disabled,F)}}})(o,c,d,m);break;case"hillshade":(function(y,I,A,M){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;let D=y.context,N=y.depthModeForSublayer(0,Nt.ReadOnly),F=y.colorModeForRenderPass(),[G,Y]=y.renderPass==="translucent"?y.stencilConfigForOverlap(M):[{},M];for(let ee of Y){let ae=I.getTile(ee);ae.needsHillshadePrepare!==void 0&&ae.needsHillshadePrepare&&y.renderPass==="offscreen"?fc(y,ae,A,N,Ar.disabled,F):y.renderPass==="translucent"&&hc(y,ee,ae,A,N,G[ee.overscaledZ],F)}D.viewport.set([0,0,y.width,y.height])})(o,c,d,m);break;case"raster":(function(y,I,A,M){if(y.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!M.length)return;let D=y.context,N=D.gl,F=I.getSource(),G=y.useProgram("raster"),Y=y.colorModeForRenderPass(),[ee,ae]=F instanceof mo?[{},M]:y.stencilConfigForOverlap(M),le=ae[ae.length-1].overscaledZ,ce=!y.options.moving;for(let fe of ae){let te=y.depthModeForSublayer(fe.overscaledZ-le,A.paint.get("raster-opacity")===1?Nt.ReadWrite:Nt.ReadOnly,N.LESS),me=I.getTile(fe);me.registerFadeDuration(A.paint.get("raster-fade-duration"));let ge=I.findLoadedParent(fe,0),we=I.findLoadedSibling(fe),Pe=B1(me,ge||we||null,I,A,y.transform,y.style.map.terrain),ke,We,Je=A.paint.get("raster-resampling")==="nearest"?N.NEAREST:N.LINEAR;D.activeTexture.set(N.TEXTURE0),me.texture.bind(Je,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(N.TEXTURE1),ge?(ge.texture.bind(Je,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),ke=Math.pow(2,ge.tileID.overscaledZ-me.tileID.overscaledZ),We=[me.tileID.canonical.x*ke%1,me.tileID.canonical.y*ke%1]):me.texture.bind(Je,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),me.texture.useMipmap&&D.extTextureFilterAnisotropic&&y.transform.pitch>20&&N.texParameterf(N.TEXTURE_2D,D.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,D.extTextureFilterAnisotropicMax);let Ve=y.style.map.terrain&&y.style.map.terrain.getTerrainData(fe),Be=Ve?fe:null,it=Be?Be.posMatrix:y.transform.calculatePosMatrix(fe.toUnwrapped(),ce),bt=JA(it,We||[0,0],ke||1,Pe,A);F instanceof mo?G.draw(D,N.TRIANGLES,te,Ar.disabled,Y,_r.disabled,bt,Ve,A.id,F.boundsBuffer,y.quadTriangleIndexBuffer,F.boundsSegments):G.draw(D,N.TRIANGLES,te,ee[fe.overscaledZ],Y,_r.disabled,bt,Ve,A.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(o,c,d,m);break;case"background":(function(y,I,A,M){let D=A.paint.get("background-color"),N=A.paint.get("background-opacity");if(N===0)return;let F=y.context,G=F.gl,Y=y.transform,ee=Y.tileSize,ae=A.paint.get("background-pattern");if(y.isPatternMissing(ae))return;let le=!ae&&D.a===1&&N===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==le)return;let ce=Ar.disabled,fe=y.depthModeForSublayer(0,le==="opaque"?Nt.ReadWrite:Nt.ReadOnly),te=y.colorModeForRenderPass(),me=y.useProgram(ae?"backgroundPattern":"background"),ge=M||Y.coveringTiles({tileSize:ee,terrain:y.style.map.terrain});ae&&(F.activeTexture.set(G.TEXTURE0),y.imageManager.bind(y.context));let we=A.getCrossfadeParameters();for(let Pe of ge){let ke=M?Pe.posMatrix:y.transform.calculatePosMatrix(Pe.toUnwrapped()),We=ae?wg(ke,N,y,ae,{tileID:Pe,tileSize:ee},we):Vp(ke,N,D),Je=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Pe);me.draw(F,G.TRIANGLES,fe,ce,te,_r.disabled,We,Je,A.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(o,0,d,m);break;case"custom":(function(y,I,A){let M=y.context,D=A.implementation;if(y.renderPass==="offscreen"){let N=D.prerender;N&&(y.setCustomLayerDefaults(),M.setColorMode(y.colorModeForRenderPass()),N.call(D,M.gl,y.transform.customLayerMatrix()),M.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),M.setColorMode(y.colorModeForRenderPass()),M.setStencilMode(Ar.disabled);let N=D.renderingMode==="3d"?new Nt(y.context.gl.LEQUAL,Nt.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,Nt.ReadOnly);M.setDepthMode(N),D.render(M.gl,y.transform.customLayerMatrix(),{farZ:y.transform.farZ,nearZ:y.transform.nearZ,fov:y.transform._fov,modelViewProjectionMatrix:y.transform.modelViewProjectionMatrix,projectionMatrix:y.transform.projectionMatrix}),M.setDirty(),y.setBaseState(),M.bindFramebuffer.set(null)}})(o,0,d);}}translatePosMatrix(o,c,d,m,y){if(!d[0]&&!d[1])return o;let I=y?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(I){let D=Math.sin(I),N=Math.cos(I);d=[d[0]*N-d[1]*D,d[0]*D+d[1]*N]}let A=[y?d[0]:jt(c,d[0],this.transform.zoom),y?d[1]:jt(c,d[1],this.transform.zoom),0],M=new Float32Array(16);return a.J(M,o,A),M}saveTileTexture(o){let c=this._tileTextures[o.size[0]];c?c.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){let c=this._tileTextures[o];return c&&c.length>0?c.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;let c=this.imageManager.getPattern(o.from.toString()),d=this.imageManager.getPattern(o.to.toString());return!c||!d}useProgram(o,c){this.cache=this.cache||{};let d=o+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new _g(this.context,Qs[o],c,bg[o],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Le(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:o,drawingBufferHeight:c}=this.context.gl;return this.width!==o||this.height!==c}}class dc{constructor(o,c){this.points=o,this.planes=c}static fromInvProjectionMatrix(o,c,d){let m=Math.pow(2,d),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{let M=1/(A=a.af([],A,o))[3]/c*m;return a.b1(A,A,[M,M,1/A[3],M])}),I=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{let M=function(G,Y){var ee=Y[0],ae=Y[1],le=Y[2],ce=ee*ee+ae*ae+le*le;return ce>0&&(ce=1/Math.sqrt(ce)),G[0]=Y[0]*ce,G[1]=Y[1]*ce,G[2]=Y[2]*ce,G}([],function(G,Y,ee){var ae=Y[0],le=Y[1],ce=Y[2],fe=ee[0],te=ee[1],me=ee[2];return G[0]=le*me-ce*te,G[1]=ce*fe-ae*me,G[2]=ae*te-le*fe,G}([],Ie([],y[A[0]],y[A[1]]),Ie([],y[A[2]],y[A[1]]))),D=-((N=M)[0]*(F=y[A[1]])[0]+N[1]*F[1]+N[2]*F[2]);var N,F;return M.concat(D)});return new dc(y,I)}}class mc{constructor(o,c){this.min=o,this.max=c,this.center=function(d,m,y){return d[0]=.5*m[0],d[1]=.5*m[1],d[2]=.5*m[2],d}([],function(d,m,y){return d[0]=m[0]+y[0],d[1]=m[1]+y[1],d[2]=m[2]+y[2],d}([],this.min,this.max))}quadrant(o){let c=[o%2==0,o<2],d=re(this.min),m=re(this.max);for(let y=0;y<c.length;y++)d[y]=c[y]?this.min[y]:this.center[y],m[y]=c[y]?this.center[y]:this.max[y];return m[2]=this.max[2],new mc(d,m)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersects(o){let c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],d=!0;for(let m=0;m<o.planes.length;m++){let y=o.planes[m],I=0;for(let A=0;A<c.length;A++)a.b2(y,c[A])>=0&&I++;if(I===0)return 0;I!==c.length&&(d=!1)}if(d)return 2;for(let m=0;m<3;m++){let y=Number.MAX_VALUE,I=-Number.MAX_VALUE;for(let A=0;A<o.points.length;A++){let M=o.points[A][m]-this.min[m];y=Math.min(y,M),I=Math.max(I,M)}if(I<0||y>this.max[m]-this.min[m])return 0}return 1}}class vc{constructor(o=0,c=0,d=0,m=0){if(isNaN(o)||o<0||isNaN(c)||c<0||isNaN(d)||d<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=c,this.left=d,this.right=m}interpolate(o,c,d){return c.top!=null&&o.top!=null&&(this.top=a.y.number(o.top,c.top,d)),c.bottom!=null&&o.bottom!=null&&(this.bottom=a.y.number(o.bottom,c.bottom,d)),c.left!=null&&o.left!=null&&(this.left=a.y.number(o.left,c.left,d)),c.right!=null&&o.right!=null&&(this.right=a.y.number(o.right,c.right,d)),this}getCenter(o,c){let d=a.ac((this.left+o-this.right)/2,0,o),m=a.ac((this.top+c-this.bottom)/2,0,c);return new a.P(d,m)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new vc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}let kg=85.051129;class gc{constructor(o,c,d,m,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=o||0,this._maxZoom=c||22,this._minPitch=d==null?0:d,this._maxPitch=m==null?60:m,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new vc,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){let o=new gc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.apply(this),o}apply(o){this.tileSize=o.tileSize,this.latRange=o.latRange,this.lngRange=o.lngRange,this.width=o.width,this.height=o.height,this._center=o._center,this._elevation=o._elevation,this.minElevationForCurrentTile=o.minElevationForCurrentTile,this.zoom=o.zoom,this.angle=o.angle,this._fov=o._fov,this._pitch=o._pitch,this._unmodified=o._unmodified,this._edgeInsets=o._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(o){let c=-a.b3(o,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var d=new a.A(4);return a.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,m,y){var I=m[0],A=m[1],M=m[2],D=m[3],N=Math.sin(y),F=Math.cos(y);d[0]=I*F+M*N,d[1]=A*F+D*N,d[2]=I*-N+M*F,d[3]=A*-N+D*F}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){let c=a.ac(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(o){let c=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,c,d){this._unmodified=!1,this._edgeInsets.interpolate(o,c,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){let c=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(o){let c=[new a.b4(0,o)];if(this._renderWorldCopies){let d=this.pointCoordinate(new a.P(0,0)),m=this.pointCoordinate(new a.P(this.width,0)),y=this.pointCoordinate(new a.P(this.width,this.height)),I=this.pointCoordinate(new a.P(0,this.height)),A=Math.floor(Math.min(d.x,m.x,y.x,I.x)),M=Math.floor(Math.max(d.x,m.x,y.x,I.x)),D=1;for(let N=A-D;N<=M+D;N++)N!==0&&c.push(new a.b4(N,o))}return c}coveringTiles(o){var c,d;let m=this.coveringZoomLevel(o),y=m;if(o.minzoom!==void 0&&m<o.minzoom)return[];o.maxzoom!==void 0&&m>o.maxzoom&&(m=o.maxzoom);let I=this.pointCoordinate(this.getCameraPoint()),A=a.Z.fromLngLat(this.center),M=Math.pow(2,m),D=[M*I.x,M*I.y,0],N=[M*A.x,M*A.y,0],F=dc.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,m),G=o.minzoom||0;!o.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(G=m);let Y=o.terrain?2/Math.min(this.tileSize,o.tileSize)*this.tileSize:3,ee=te=>({aabb:new mc([te*M,0,0],[(te+1)*M,M,0]),zoom:0,x:0,y:0,wrap:te,fullyVisible:!1}),ae=[],le=[],ce=m,fe=o.reparseOverscaled?y:m;if(this._renderWorldCopies)for(let te=1;te<=3;te++)ae.push(ee(-te)),ae.push(ee(te));for(ae.push(ee(0));ae.length>0;){let te=ae.pop(),me=te.x,ge=te.y,we=te.fullyVisible;if(!we){let Ve=te.aabb.intersects(F);if(Ve===0)continue;we=Ve===2}let Pe=o.terrain?D:N,ke=te.aabb.distanceX(Pe),We=te.aabb.distanceY(Pe),Je=Math.max(Math.abs(ke),Math.abs(We));if(te.zoom===ce||Je>Y+(1<<ce-te.zoom)-2&&te.zoom>=G){let Ve=ce-te.zoom,Be=D[0]-.5-(me<<Ve),it=D[1]-.5-(ge<<Ve);le.push({tileID:new a.S(te.zoom===ce?fe:te.zoom,te.wrap,te.zoom,me,ge),distanceSq:qe([N[0]-.5-me,N[1]-.5-ge]),tileDistanceToCamera:Math.sqrt(Be*Be+it*it)})}else for(let Ve=0;Ve<4;Ve++){let Be=(me<<1)+Ve%2,it=(ge<<1)+(Ve>>1),bt=te.zoom+1,$e=te.aabb.quadrant(Ve);if(o.terrain){let Ke=new a.S(bt,te.wrap,bt,Be,it),xt=o.terrain.getMinMaxElevation(Ke),Dr=(c=xt.minElevation)!==null&&c!==void 0?c:this.elevation,Mt=(d=xt.maxElevation)!==null&&d!==void 0?d:this.elevation;$e=new mc([$e.min[0],$e.min[1],Dr],[$e.max[0],$e.max[1],Mt])}ae.push({aabb:$e,zoom:bt,x:Be,y:it,wrap:te.wrap,fullyVisible:we})}}return le.sort((te,me)=>te.distanceSq-me.distanceSq).map(te=>te.tileID)}resize(o,c){this.width=o,this.height=c,this.pixelsToGLUnits=[2/o,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){let c=a.ac(o.lat,-85.051129,kg);return new a.P(a.O(o.lng)*this.worldSize,a.Q(c)*this.worldSize)}unproject(o){return new a.Z(o.x/this.worldSize,o.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(o){let c=this.elevation,d=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,m=this.pointLocation(this.centerPoint,o),y=o.getElevationForLngLatZoom(m,this.tileZoom);if(!(this.elevation-y))return;let I=d+c-y,A=Math.cos(this._pitch)*this.cameraToCenterDistance/I/a.b5(1,m.lat),M=this.scaleZoom(A/this.tileSize);this._elevation=y,this._center=m,this.zoom=M}setLocationAtPoint(o,c){let d=this.pointCoordinate(c),m=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(o),I=new a.Z(y.x-(d.x-m.x),y.y-(d.y-m.y));this.center=this.coordinateLocation(I),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(o,c){return c?this.coordinatePoint(this.locationCoordinate(o),c.getElevationForLngLatZoom(o,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(o))}pointLocation(o,c){return this.coordinateLocation(this.pointCoordinate(o,c))}locationCoordinate(o){return a.Z.fromLngLat(o)}coordinateLocation(o){return o&&o.toLngLat()}pointCoordinate(o,c){if(c){let G=c.pointCoordinate(o);if(G!=null)return G}let d=[o.x,o.y,0,1],m=[o.x,o.y,1,1];a.af(d,d,this.pixelMatrixInverse),a.af(m,m,this.pixelMatrixInverse);let y=d[3],I=m[3],A=d[1]/y,M=m[1]/I,D=d[2]/y,N=m[2]/I,F=D===N?0:(0-D)/(N-D);return new a.Z(a.y.number(d[0]/y,m[0]/I,F)/this.worldSize,a.y.number(A,M,F)/this.worldSize)}coordinatePoint(o,c=0,d=this.pixelMatrix){let m=[o.x*this.worldSize,o.y*this.worldSize,c,1];return a.af(m,m,d),new a.P(m[0]/m[3],m[1]/m[3])}getBounds(){let o=Math.max(0,this.height/2-this.getHorizon());return new Ee().extend(this.pointLocation(new a.P(0,o))).extend(this.pointLocation(new a.P(this.width,o))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ee([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,kg])}calculateTileMatrix(o){let c=o.canonical,d=this.worldSize/this.zoomScale(c.z),m=c.x+Math.pow(2,c.z)*o.wrap,y=a.an(new Float64Array(16));return a.J(y,y,[m*d,c.y*d,0]),a.K(y,y,[d/a.X,d/a.X,1]),y}calculatePosMatrix(o,c=!1){let d=o.key,m=c?this._alignedPosMatrixCache:this._posMatrixCache;if(m[d])return m[d];let y=this.calculateTileMatrix(o);return a.L(y,c?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,y),m[d]=new Float32Array(y),m[d]}calculateFogMatrix(o){let c=o.key,d=this._fogMatrixCache;if(d[c])return d[c];let m=this.calculateTileMatrix(o);return a.L(m,this.fogMatrix,m),d[c]=new Float32Array(m),d[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(o,c){c=a.ac(+c,this.minZoom,this.maxZoom);let d={center:new a.N(o.lng,o.lat),zoom:c},m=this.lngRange;if(!this._renderWorldCopies&&m===null){let te=179.9999999999;m=[-te,te]}let y=this.tileSize*this.zoomScale(d.zoom),I=0,A=y,M=0,D=y,N=0,F=0,{x:G,y:Y}=this.size;if(this.latRange){let te=this.latRange;I=a.Q(te[1])*y,A=a.Q(te[0])*y,A-I<Y&&(N=Y/(A-I))}m&&(M=a.b3(a.O(m[0])*y,0,y),D=a.b3(a.O(m[1])*y,0,y),D<M&&(D+=y),D-M<G&&(F=G/(D-M)));let{x:ee,y:ae}=this.project.call({worldSize:y},o),le,ce,fe=Math.max(F||0,N||0);if(fe){let te=new a.P(F?(D+M)/2:ee,N?(A+I)/2:ae);return d.center=this.unproject.call({worldSize:y},te).wrap(),d.zoom+=this.scaleZoom(fe),d}if(this.latRange){let te=Y/2;ae-te<I&&(ce=I+te),ae+te>A&&(ce=A-te)}if(m){let te=(M+D)/2,me=ee;this._renderWorldCopies&&(me=a.b3(ee,te-y/2,te+y/2));let ge=G/2;me-ge<M&&(le=M+ge),me+ge>D&&(le=D-ge)}if(le!==void 0||ce!==void 0){let te=new a.P(le!=null?le:ee,ce!=null?ce:ae);d.center=this.unproject.call({worldSize:y},te).wrap()}return d}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let o=this._unmodified,{center:c,zoom:d}=this.getConstrained(this.center,this.zoom);this.center=c,this.zoom=d,this._unmodified=o,this._constraining=!1}_calcMatrices(){if(!this.height)return;let o=this.centerOffset,c=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b5(1,this.center.lat)*this.worldSize;let m=a.an(new Float64Array(16));a.K(m,m,[this.width/2,-this.height/2,1]),a.J(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=a.an(new Float64Array(16)),a.K(m,m,[1,-1,1]),a.J(m,m,[-1,-1,0]),a.K(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;let y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),I=Math.min(this.elevation,this.minElevationForCurrentTile),A=y-I*this._pixelPerMeter/Math.cos(this._pitch),M=I<0?A:y,D=Math.PI/2+this._pitch,N=this._fov*(.5+o.y/this.height),F=Math.sin(N)*M/Math.sin(a.ac(Math.PI-D-N,.01,Math.PI-.01)),G=this.getHorizon(),Y=2*Math.atan(G/this.cameraToCenterDistance)*(.5+o.y/(2*G)),ee=Math.sin(Y)*M/Math.sin(a.ac(Math.PI-D-Y,.01,Math.PI-.01)),ae=Math.min(F,ee);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*ae+M),this.nearZ=this.height/50,m=new Float64Array(16),a.b6(m,this._fov,this.width/this.height,this.nearZ,this.farZ),m[8]=2*-o.x/this.width,m[9]=2*o.y/this.height,this.projectionMatrix=a.ae(m),a.K(m,m,[1,-1,1]),a.J(m,m,[0,0,-this.cameraToCenterDistance]),a.b7(m,m,this._pitch),a.ad(m,m,this.angle),a.J(m,m,[-c,-d,0]),this.mercatorMatrix=a.K([],m,[this.worldSize,this.worldSize,this.worldSize]),a.K(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.L(new Float64Array(16),this.labelPlaneMatrix,m),a.J(m,m,[0,0,-this.elevation]),this.modelViewProjectionMatrix=m,this.invModelViewProjectionMatrix=a.as([],m),this.fogMatrix=new Float64Array(16),a.b6(this.fogMatrix,this._fov,this.width/this.height,y,this.farZ),this.fogMatrix[8]=2*-o.x/this.width,this.fogMatrix[9]=2*o.y/this.height,a.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b7(this.fogMatrix,this.fogMatrix,this._pitch),a.ad(this.fogMatrix,this.fogMatrix,this.angle),a.J(this.fogMatrix,this.fogMatrix,[-c,-d,0]),a.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=a.L(new Float64Array(16),this.labelPlaneMatrix,m);let le=this.width%2/2,ce=this.height%2/2,fe=Math.cos(this.angle),te=Math.sin(this.angle),me=c-Math.round(c)+fe*le+te*ce,ge=d-Math.round(d)+fe*ce+te*le,we=new Float64Array(m);if(a.J(we,we,[me>.5?me-1:me,ge>.5?ge-1:ge,0]),this.alignedModelViewProjectionMatrix=we,m=a.as(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let o=this.pointCoordinate(new a.P(0,0)),c=[o.x*this.worldSize,o.y*this.worldSize,0,1];return a.af(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,o))}getCameraQueryGeometry(o){let c=this.getCameraPoint();if(o.length===1)return[o[0],c];{let d=c.x,m=c.y,y=c.x,I=c.y;for(let A of o)d=Math.min(d,A.x),m=Math.min(m,A.y),y=Math.max(y,A.x),I=Math.max(I,A.y);return[new a.P(d,m),new a.P(y,m),new a.P(y,I),new a.P(d,I),new a.P(d,m)]}}lngLatToCameraDepth(o,c){let d=this.locationCoordinate(o),m=[d.x*this.worldSize,d.y*this.worldSize,c,1];return a.af(m,m,this.modelViewProjectionMatrix),m[2]/m[3]}}function sf(_,o){let c,d=!1,m=null,y=null,I=()=>{m=null,d&&(_.apply(y,c),m=setTimeout(I,o),d=!1)};return(...A)=>(d=!0,y=this,c=A,m||I(),m)}class ed{constructor(o){this._getCurrentHash=()=>{let c=window.location.hash.replace("#","");if(this._hashName){let d;return c.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(d=m)}),(d&&d[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{let c=this._getCurrentHash();if(c.length>=3&&!c.some(d=>isNaN(d))){let d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:d,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{let c=window.location.href.replace(/(#.+)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{let c=this._getCurrentHash();if(c.length===0)return;let d=c.join("/"),m=d;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${d}`);let y=window.location.hash.replace(m,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let I=window.location.href.replace(/(#.+)?$/,y);I=I.replace("&&","&"),window.history.replaceState(window.history.state,null,I)},this._updateHash=sf(this._updateHashUnthrottled,300),this._hashName=o&&encodeURIComponent(o)}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(o){let c=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,m=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,m),I=Math.round(c.lng*y)/y,A=Math.round(c.lat*y)/y,M=this._map.getBearing(),D=this._map.getPitch(),N="";if(N+=o?`/${I}/${A}/${d}`:`${d}/${A}/${I}`,(M||D)&&(N+="/"+Math.round(10*M)/10),D&&(N+=`/${Math.round(D)}`),this._hashName){let F=this._hashName,G=!1,Y=window.location.hash.slice(1).split("&").map(ee=>{let ae=ee.split("=")[0];return ae===F?(G=!0,`${ae}=${N}`):ee}).filter(ee=>ee);return G||Y.push(`${F}=${N}`),`#${Y.join("&")}`}return`#${N}`}}let td={linearity:.3,easing:a.b8(0,0,.3,1)},Ng=a.e({deceleration:2500,maxSpeed:1400},td),hq=a.e({deceleration:20,maxSpeed:1400},td),W1=a.e({deceleration:1e3,maxSpeed:360},td),rd=a.e({deceleration:1e3,maxSpeed:90},td);class Fg{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.now(),settings:o})}_drainInertiaBuffer(){let o=this._inertiaBuffer,c=b.now();for(;o.length>0&&c-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let c={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:y}of this._inertiaBuffer)c.zoom+=y.zoomDelta||0,c.bearing+=y.bearingDelta||0,c.pitch+=y.pitchDelta||0,y.panDelta&&c.pan._add(y.panDelta),y.around&&(c.around=y.around),y.pinchAround&&(c.pinchAround=y.pinchAround);let d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(c.pan.mag()){let y=lf(c.pan.mag(),d,a.e({},Ng,o||{}));m.offset=c.pan.mult(y.amount/c.pan.mag()),m.center=this._map.transform.center,uf(m,y)}if(c.zoom){let y=lf(c.zoom,d,hq);m.zoom=this._map.transform.zoom+y.amount,uf(m,y)}if(c.bearing){let y=lf(c.bearing,d,W1);m.bearing=this._map.transform.bearing+a.ac(y.amount,-179,179),uf(m,y)}if(c.pitch){let y=lf(c.pitch,d,rd);m.pitch=this._map.transform.pitch+y.amount,uf(m,y)}if(m.zoom||m.bearing){let y=c.pinchAround===void 0?c.around:c.pinchAround;m.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),a.e(m,{noMoveStart:!0})}}function uf(_,o){(!_.duration||_.duration<o.duration)&&(_.duration=o.duration,_.easing=o.easing)}function lf(_,o,c){let{maxSpeed:d,linearity:m,deceleration:y}=c,I=a.ac(_*m/(o/1e3),-d,d),A=Math.abs(I)/(y*m);return{easing:c.easing,duration:1e3*A,amount:I*(A/2)}}class oi extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,d,m={}){let y=E.mousePos(c.getCanvas(),d),I=c.unproject(y);super(o,a.e({point:y,lngLat:I,originalEvent:d},m)),this._defaultPrevented=!1,this.target=c}}class el extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,d){let m=o==="touchend"?d.changedTouches:d.touches,y=E.touchPos(c.getCanvasContainer(),m),I=y.map(M=>c.unproject(M)),A=y.reduce((M,D,N,F)=>M.add(D.div(F.length)),new a.P(0,0));super(o,{points:y,point:A,lngLats:I,lngLat:c.unproject(A),originalEvent:d}),this._defaultPrevented=!1}}class Z1 extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,d){super(o,{originalEvent:d}),this._defaultPrevented=!1}}class H1{constructor(o,c){this._map=o,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new Z1(o.type,this._map,o))}mousedown(o,c){return this._mousedownPos=c,this._firePreventable(new oi(o.type,this._map,o))}mouseup(o){this._map.fire(new oi(o.type,this._map,o))}click(o,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new oi(o.type,this._map,o))}dblclick(o){return this._firePreventable(new oi(o.type,this._map,o))}mouseover(o){this._map.fire(new oi(o.type,this._map,o))}mouseout(o){this._map.fire(new oi(o.type,this._map,o))}touchstart(o){return this._firePreventable(new el(o.type,this._map,o))}touchmove(o){this._map.fire(new el(o.type,this._map,o))}touchend(o){this._map.fire(new el(o.type,this._map,o))}touchcancel(o){this._map.fire(new el(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class sn{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new oi(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new oi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new oi(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _o{constructor(o){this._map=o}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(o){return this.transform.pointLocation(a.P.convert(o),this._map.terrain)}}class ya{constructor(o,c){this._map=o,this._tr=new _o(o),this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,c){this.isEnabled()&&o.shiftKey&&o.button===0&&(E.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(o,c){if(!this._active)return;let d=c;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;let m=this._startPos;this._lastPos=d,this._box||(this._box=E.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",o));let y=Math.min(m.x,d.x),I=Math.max(m.x,d.x),A=Math.min(m.y,d.y),M=Math.max(m.y,d.y);E.setTransform(this._box,`translate(${y}px,${A}px)`),this._box.style.width=I-y+"px",this._box.style.height=M-A+"px"}mouseupWindow(o,c){if(!this._active||o.button!==0)return;let d=this._startPos,m=c;if(this.reset(),E.suppressClick(),d.x!==m.x||d.y!==m.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:o})),{cameraAnimation:y=>y.fitScreenCoordinates(d,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(E.remove(this._box),this._box=null),E.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,c){return this._map.fire(new a.k(o,{originalEvent:c}))}}function cf(_,o){if(_.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${o.length}`);let c={};for(let d=0;d<_.length;d++)c[_[d].identifier]=o[d];return c}class zg{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,c,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),d.length===this.numTouches&&(this.centroid=function(m){let y=new a.P(0,0);for(let I of m)y._add(I);return y.div(m.length)}(c),this.touches=cf(d,c)))}touchmove(o,c,d){if(this.aborted||!this.centroid)return;let m=cf(d,c);for(let y in this.touches){let I=m[y];(!I||I.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(o,c,d){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){let m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class nd{constructor(o){this.singleTap=new zg(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,c,d){this.singleTap.touchstart(o,c,d)}touchmove(o,c,d){this.singleTap.touchmove(o,c,d)}touchend(o,c,d){let m=this.singleTap.touchend(o,c,d);if(m){let y=o.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(m)<30;if(y&&I||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class yc{constructor(o){this._tr=new _o(o),this._zoomIn=new nd({numTouches:1,numTaps:2}),this._zoomOut=new nd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,c,d){this._zoomIn.touchstart(o,c,d),this._zoomOut.touchstart(o,c,d)}touchmove(o,c,d){this._zoomIn.touchmove(o,c,d),this._zoomOut.touchmove(o,c,d)}touchend(o,c,d){let m=this._zoomIn.touchend(o,c,d),y=this._zoomOut.touchend(o,c,d),I=this._tr;return m?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:I.zoom+1,around:I.unproject(m)},{originalEvent:o})}):y?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:I.zoom-1,around:I.unproject(y)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class As{constructor(o){this._enabled=!!o.enable,this._moveStateManager=o.moveStateManager,this._clickTolerance=o.clickTolerance||1,this._moveFunction=o.move,this._activateOnStart=!!o.activateOnStart,o.assignEvents(this),this.reset()}reset(o){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(o)}_move(...o){let c=this._moveFunction(...o);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(o,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(o)&&(this._moveStateManager.startMove(o),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(o,c){if(!this.isEnabled())return;let d=this._lastPoint;if(!d)return;if(o.preventDefault(),!this._moveStateManager.isValidMoveEvent(o))return void this.reset(o);let m=c.length?c[0]:c;return!this._moved&&m.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(d,m))}dragEnd(o){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(o)&&(this._moved&&E.suppressClick(),this.reset(o))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let jg={0:1,2:2};class id{constructor(o){this._correctEvent=o.checkCorrectEvent}startMove(o){let c=E.mouseButton(o);this._eventButton=c}endMove(o){delete this._eventButton}isValidStartEvent(o){return this._correctEvent(o)}isValidMoveEvent(o){return!function(c,d){let m=jg[d];return c.buttons===void 0||(c.buttons&m)!==m}(o,this._eventButton)}isValidEndEvent(o){return E.mouseButton(o)===this._eventButton}}class Bg{constructor(){this._firstTouch=void 0}_isOneFingerTouch(o){return o.targetTouches.length===1}_isSameTouchEvent(o){return o.targetTouches[0].identifier===this._firstTouch}startMove(o){this._firstTouch=o.targetTouches[0].identifier}endMove(o){delete this._firstTouch}isValidStartEvent(o){return this._isOneFingerTouch(o)}isValidMoveEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}isValidEndEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}}let ad=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=o=>{o.preventDefault()}},Ug=({enable:_,clickTolerance:o,bearingDegreesPerPixelMoved:c=.8})=>{let d=new id({checkCorrectEvent:m=>E.mouseButton(m)===0&&m.ctrlKey||E.mouseButton(m)===2});return new As({clickTolerance:o,move:(m,y)=>({bearingDelta:(y.x-m.x)*c}),moveStateManager:d,enable:_,assignEvents:ad})},Vg=({enable:_,clickTolerance:o,pitchDegreesPerPixelMoved:c=-.5})=>{let d=new id({checkCorrectEvent:m=>E.mouseButton(m)===0&&m.ctrlKey||E.mouseButton(m)===2});return new As({clickTolerance:o,move:(m,y)=>({pitchDelta:(y.y-m.y)*c}),moveStateManager:d,enable:_,assignEvents:ad})};class tl{constructor(o,c){this._clickTolerance=o.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(o){return o<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(o,c,d){return this._calculateTransform(o,c,d)}touchmove(o,c,d){if(this._active){if(!this._shouldBePrevented(d.length))return o.preventDefault(),this._calculateTransform(o,c,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",o)}}touchend(o,c,d){this._calculateTransform(o,c,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,c,d){d.length>0&&(this._active=!0);let m=cf(d,c),y=new a.P(0,0),I=new a.P(0,0),A=0;for(let D in m){let N=m[D],F=this._touches[D];F&&(y._add(N),I._add(N.sub(F)),A++,m[D]=N)}if(this._touches=m,this._shouldBePrevented(A)||!I.mag())return;let M=I.div(A);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(A),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class od{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(o,c,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([c[0],c[1]]))}touchmove(o,c,d){if(!this._firstTwoTouches)return;o.preventDefault();let[m,y]=this._firstTwoTouches,I=hf(d,c,m),A=hf(d,c,y);if(!I||!A)return;let M=this._aroundCenter?null:I.add(A).div(2);return this._move([I,A],M,o)}touchend(o,c,d){if(!this._firstTwoTouches)return;let[m,y]=this._firstTwoTouches,I=hf(d,c,m),A=hf(d,c,y);I&&A||(this._active&&E.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function hf(_,o,c){for(let d=0;d<_.length;d++)if(_[d].identifier===c)return o[d]}function $g(_,o){return Math.log(_/o)/Math.LN2}class Gg extends od{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,c){let d=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs($g(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:$g(this._distance,d),pinchAround:c}}}function Wg(_,o){return 180*_.angleWith(o)/Math.PI}class Zg extends od{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,c,d){let m=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Wg(this._vector,m),pinchAround:c}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());let c=25/(Math.PI*this._minDiameter)*360,d=Wg(o,this._startVector);return Math.abs(d)<c}}function sd(_){return Math.abs(_.y)>Math.abs(_.x)}class _c extends od{constructor(o){super(),this._currentTouchCount=0,this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,c,d){super.touchstart(o,c,d),this._currentTouchCount=d.length}_start(o){this._lastPoints=o,sd(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,c,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let m=o[0].sub(this._lastPoints[0]),y=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,y,d.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(m.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(o,c,d){if(this._valid!==void 0)return this._valid;let m=o.mag()>=2,y=c.mag()>=2;if(!m&&!y)return;if(!m||!y)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;let I=o.y>0==c.y>0;return sd(o)&&sd(c)&&I}}let K1={panStep:100,bearingStep:15,pitchStep:10};class Na{constructor(o){this._tr=new _o(o);let c=K1;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let c=0,d=0,m=0,y=0,I=0;switch(o.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:o.shiftKey?d=-1:(o.preventDefault(),y=-1);break;case 39:o.shiftKey?d=1:(o.preventDefault(),y=1);break;case 38:o.shiftKey?m=1:(o.preventDefault(),I=-1);break;case 40:o.shiftKey?m=-1:(o.preventDefault(),I=1);break;default:return;}return this._rotationDisabled&&(d=0,m=0),{cameraAnimation:A=>{let M=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:Bo,zoom:c?Math.round(M.zoom)+c*(o.shiftKey?2:1):M.zoom,bearing:M.bearing+d*this._bearingStep,pitch:M.pitch+m*this._pitchStep,offset:[-y*this._panStep,-I*this._panStep],center:M.center},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Bo(_){return _*(2-_)}let Hg=4.000244140625;class xo{constructor(o,c){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=o,this._tr=new _o(o),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(o){return!!this._map.cooperativeGestures.isEnabled()&&!(o.ctrlKey||this._map.cooperativeGestures.isBypassed(o))}wheel(o){if(!this.isEnabled())return;if(this._shouldBePrevented(o))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",o);let c=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY,d=b.now(),m=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,c!==0&&c%Hg==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(m*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),o.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=o,this._delta-=c,this._active||this._start(o)),o.preventDefault()}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let c=E.mousePos(this._map.getCanvas(),o),d=this._tr;this._around=c.y>d.transform.height/2-d.transform.getHorizon()?a.N.convert(this._aroundCenter?d.center:d.unproject(c)):a.N.convert(d.center),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let o=this._tr.transform;if(this._delta!==0){let M=this._type==="wheel"&&Math.abs(this._delta)>Hg?this._wheelZoomRate:this._defaultZoomRate,D=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&D!==0&&(D=1/D);let N=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):o.scale;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(N*D))),this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let c=typeof this._targetZoom=="number"?this._targetZoom:o.zoom,d=this._startZoom,m=this._easing,y,I=!1,A=b.now()-this._lastWheelEventTime;if(this._type==="wheel"&&d&&m&&A){let M=Math.min(A/200,1),D=m(M);y=a.y.number(d,c,D),M<1?this._frameId||(this._frameId=!0):I=!0}else y=c,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!I,zoomDelta:y-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let c=a.b9;if(this._prevEase){let d=this._prevEase,m=(b.now()-d.start)/d.duration,y=d.easing(m+.01)-d.easing(m),I=.27/Math.sqrt(y*y+1e-4)*.01,A=Math.sqrt(.0729-I*I);c=a.b8(I,A,.25,1)}return this._prevEase={start:b.now(),duration:o,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class rl{constructor(o,c){this._clickZoom=o,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class fq{constructor(o){this._tr=new _o(o),this.reset()}reset(){this._active=!1}dblclick(o,c){return o.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(o.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pq{constructor(){this._tap=new nd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(o,c,d){if(!this._swipePoint)if(this._tapTime){let m=c[0],y=o.timeStamp-this._tapTime<500,I=this._tapPoint.dist(m)<30;y&&I?d.length>0&&(this._swipePoint=m,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(o,c,d)}touchmove(o,c,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;let m=c[0],y=m.y-this._swipePoint.y;return this._swipePoint=m,o.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(o,c,d)}touchend(o,c,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{let m=this._tap.touchend(o,c,d);m&&(this._tapTime=o.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class X1{constructor(o,c,d){this._el=o,this._mousePan=c,this._touchPan=d}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Y1{constructor(o,c,d){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=c,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Kg{constructor(o,c,d,m){this._el=o,this._touchZoom=c,this._touchRotate=d,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class xc{constructor(o,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=o,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let o=this._map.getCanvasContainer();o.classList.add("maplibregl-cooperative-gestures"),this._container=E.create("div","maplibregl-cooperative-gesture-screen",o);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=c,this._container.appendChild(m);let y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=d,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(E.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(o){return o[this._bypassKey]}notifyGestureBlocked(o,c){this._enabled&&(this._map.fire(new a.k("cooperativegestureprevented",{gestureType:o,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let Fa=_=>_.zoom||_.drag||_.pitch||_.rotate;class tt extends a.k{}function ud(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class Xg{constructor(o,c){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,y)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let I=m.type==="renderFrame"?void 0:m,A={needsRenderFrame:!1},M={},D={},N=m.touches,F=N?this._getMapTouches(N):void 0,G=F?E.touchPos(this._map.getCanvas(),F):E.mousePos(this._map.getCanvas(),m);for(let{handlerName:ae,handler:le,allowed:ce}of this._handlers){if(!le.isEnabled())continue;let fe;this._blockedByActive(D,ce,ae)?le.reset():le[y||m.type]&&(fe=le[y||m.type](m,G,F),this.mergeHandlerResult(A,M,fe,ae,I),fe&&fe.needsRenderFrame&&this._triggerRenderFrame()),(fe||le.isActive())&&(D[ae]=le)}let Y={};for(let ae in this._previousActiveHandlers)D[ae]||(Y[ae]=I);this._previousActiveHandlers=D,(Object.keys(Y).length||ud(A))&&(this._changes.push([A,M,Y]),this._triggerRenderFrame()),(Object.keys(D).length||ud(A))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:ee}=A;ee&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ee(this._map))},this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Fg(o),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);let d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(let[m,y,I]of this._listeners)E.addEventListener(m,y,m===document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(let[o,c,d]of this._listeners)E.removeEventListener(o,c,o===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(o){let c=this._map,d=c.getCanvasContainer();this._add("mapEvent",new H1(c,o));let m=c.boxZoom=new ya(c,o);this._add("boxZoom",m),o.interactive&&o.boxZoom&&m.enable();let y=c.cooperativeGestures=new xc(c,o.cooperativeGestures);this._add("cooperativeGestures",y),o.cooperativeGestures&&y.enable();let I=new yc(c),A=new fq(c);c.doubleClickZoom=new rl(A,I),this._add("tapZoom",I),this._add("clickZoom",A),o.interactive&&o.doubleClickZoom&&c.doubleClickZoom.enable();let M=new pq;this._add("tapDragZoom",M);let D=c.touchPitch=new _c(c);this._add("touchPitch",D),o.interactive&&o.touchPitch&&c.touchPitch.enable(o.touchPitch);let N=Ug(o),F=Vg(o);c.dragRotate=new Y1(o,N,F),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",F,["mouseRotate"]),o.interactive&&o.dragRotate&&c.dragRotate.enable();let G=(({enable:fe,clickTolerance:te})=>{let me=new id({checkCorrectEvent:ge=>E.mouseButton(ge)===0&&!ge.ctrlKey});return new As({clickTolerance:te,move:(ge,we)=>({around:we,panDelta:we.sub(ge)}),activateOnStart:!0,moveStateManager:me,enable:fe,assignEvents:ad})})(o),Y=new tl(o,c);c.dragPan=new X1(d,G,Y),this._add("mousePan",G),this._add("touchPan",Y,["touchZoom","touchRotate"]),o.interactive&&o.dragPan&&c.dragPan.enable(o.dragPan);let ee=new Zg,ae=new Gg;c.touchZoomRotate=new Kg(d,ae,ee,M),this._add("touchRotate",ee,["touchPan","touchZoom"]),this._add("touchZoom",ae,["touchPan","touchRotate"]),o.interactive&&o.touchZoomRotate&&c.touchZoomRotate.enable(o.touchZoomRotate);let le=c.scrollZoom=new xo(c,()=>this._triggerRenderFrame());this._add("scrollZoom",le,["mousePan"]),o.interactive&&o.scrollZoom&&c.scrollZoom.enable(o.scrollZoom);let ce=c.keyboard=new Na(c);this._add("keyboard",ce),o.interactive&&o.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new sn(c))}_add(o,c,d){this._handlers.push({handlerName:o,handler:c,allowed:d}),this._handlersById[o]=c}stop(o){if(!this._updatingCamera){for(let{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(let{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Fa(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,c,d){for(let m in o)if(m!==d&&(!c||c.indexOf(m)<0))return!0;return!1}_getMapTouches(o){let c=[];for(let d of o)this._el.contains(d.target)&&c.push(d);return c}mergeHandlerResult(o,c,d,m,y){if(!d)return;a.e(o,d);let I={handlerName:m,originalEvent:d.originalEvent||y};d.zoomDelta!==void 0&&(c.zoom=I),d.panDelta!==void 0&&(c.drag=I),d.pitchDelta!==void 0&&(c.pitch=I),d.bearingDelta!==void 0&&(c.rotate=I)}_applyChanges(){let o={},c={},d={};for(let[m,y,I]of this._changes)m.panDelta&&(o.panDelta=(o.panDelta||new a.P(0,0))._add(m.panDelta)),m.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(o.around=m.around),m.pinchAround!==void 0&&(o.pinchAround=m.pinchAround),m.noInertia&&(o.noInertia=m.noInertia),a.e(c,y),a.e(d,I);this._updateMapTransform(o,c,d),this._changes=[]}_updateMapTransform(o,c,d){let m=this._map,y=m._getTransformForUpdate(),I=m.terrain;if(!(ud(o)||I&&this._terrainMovement))return this._fireEvents(c,d,!0);let{panDelta:A,zoomDelta:M,bearingDelta:D,pitchDelta:N,around:F,pinchAround:G}=o;G!==void 0&&(F=G),m._stop(!0),F=F||m.transform.centerPoint;let Y=y.pointLocation(A?F.sub(A):F);D&&(y.bearing+=D),N&&(y.pitch+=N),M&&(y.zoom+=M),I?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(A)):y.setLocationAtPoint(Y,F):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(Y,F)):y.setLocationAtPoint(Y,F),m._applyUpdatedTransform(y),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(c,d,!0)}_fireEvents(o,c,d){let m=Fa(this._eventsInProgress),y=Fa(o),I={};for(let F in o){let{originalEvent:G}=o[F];this._eventsInProgress[F]||(I[`${F}start`]=G),this._eventsInProgress[F]=o[F]}!m&&y&&this._fireEvent("movestart",y.originalEvent);for(let F in I)this._fireEvent(F,I[F]);y&&this._fireEvent("move",y.originalEvent);for(let F in o){let{originalEvent:G}=o[F];this._fireEvent(F,G)}let A={},M;for(let F in this._eventsInProgress){let{handlerName:G,originalEvent:Y}=this._eventsInProgress[F];this._handlersById[G].isActive()||(delete this._eventsInProgress[F],M=c[G]||Y,A[`${F}end`]=M)}for(let F in A)this._fireEvent(F,A[F]);let D=Fa(this._eventsInProgress),N=(m||y)&&!D;if(N&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let F=this._map._getTransformForUpdate();F.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(F)}if(d&&N){this._updatingCamera=!0;let F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),G=Y=>Y!==0&&-this._bearingSnap<Y&&Y<this._bearingSnap;!F||!F.essential&&b.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:M})),G(this._map.getBearing())&&this._map.resetNorth()):(G(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(o,c){this._map.fire(new a.k(o,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new tt("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class J1 extends a.E{constructor(o,c){super(),this._renderFrameCallback=()=>{let d=Math.min((b.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.N(this.transform.center.lng,this.transform.center.lat)}setCenter(o,c){return this.jumpTo({center:o},c)}panBy(o,c,d){return o=a.P.convert(o).mult(-1),this.panTo(this.transform.center,a.e({offset:o},c),d)}panTo(o,c,d){return this.easeTo(a.e({center:o},c),d)}getZoom(){return this.transform.zoom}setZoom(o,c){return this.jumpTo({zoom:o},c),this}zoomTo(o,c,d){return this.easeTo(a.e({zoom:o},c),d)}zoomIn(o,c){return this.zoomTo(this.getZoom()+1,o,c),this}zoomOut(o,c){return this.zoomTo(this.getZoom()-1,o,c),this}getBearing(){return this.transform.bearing}setBearing(o,c){return this.jumpTo({bearing:o},c),this}getPadding(){return this.transform.padding}setPadding(o,c){return this.jumpTo({padding:o},c),this}rotateTo(o,c,d){return this.easeTo(a.e({bearing:o},c),d)}resetNorth(o,c){return this.rotateTo(0,a.e({duration:1e3},o),c),this}resetNorthPitch(o,c){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},o),c),this}snapToNorth(o,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,c):this}getPitch(){return this.transform.pitch}setPitch(o,c){return this.jumpTo({pitch:o},c),this}cameraForBounds(o,c){o=Ee.convert(o).adjustAntiMeridian();let d=c&&c.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),d,c)}_cameraForBoxAndBearing(o,c,d,m){let y={top:0,bottom:0,right:0,left:0};if(typeof(m=a.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){let Ve=m.padding;m.padding={top:Ve,bottom:Ve,right:Ve,left:Ve}}m.padding=a.e(y,m.padding);let I=this.transform,A=I.padding,M=new Ee(o,c),D=I.project(M.getNorthWest()),N=I.project(M.getNorthEast()),F=I.project(M.getSouthEast()),G=I.project(M.getSouthWest()),Y=a.ba(-d),ee=D.rotate(Y),ae=N.rotate(Y),le=F.rotate(Y),ce=G.rotate(Y),fe=new a.P(Math.max(ee.x,ae.x,ce.x,le.x),Math.max(ee.y,ae.y,ce.y,le.y)),te=new a.P(Math.min(ee.x,ae.x,ce.x,le.x),Math.min(ee.y,ae.y,ce.y,le.y)),me=fe.sub(te),ge=(I.width-(A.left+A.right+m.padding.left+m.padding.right))/me.x,we=(I.height-(A.top+A.bottom+m.padding.top+m.padding.bottom))/me.y;if(we<0||ge<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let Pe=Math.min(I.scaleZoom(I.scale*Math.min(ge,we)),m.maxZoom),ke=a.P.convert(m.offset),We=new a.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(a.ba(d)),Je=ke.add(We).mult(I.scale/I.zoomScale(Pe));return{center:I.unproject(D.add(F).div(2).sub(Je)),zoom:Pe,bearing:d}}fitBounds(o,c,d){return this._fitInternal(this.cameraForBounds(o,c),c,d)}fitScreenCoordinates(o,c,d,m,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(o)),this.transform.pointLocation(a.P.convert(c)),d,m),m,y)}_fitInternal(o,c,d){return o?(delete(c=a.e(o,c)).padding,c.linear?this.easeTo(c,d):this.flyTo(c,d)):this}jumpTo(o,c){this.stop();let d=this._getTransformForUpdate(),m=!1,y=!1,I=!1;return"zoom"in o&&d.zoom!==+o.zoom&&(m=!0,d.zoom=+o.zoom),o.center!==void 0&&(d.center=a.N.convert(o.center)),"bearing"in o&&d.bearing!==+o.bearing&&(y=!0,d.bearing=+o.bearing),"pitch"in o&&d.pitch!==+o.pitch&&(I=!0,d.pitch=+o.pitch),o.padding==null||d.isPaddingEqual(o.padding)||(d.padding=o.padding),this._applyUpdatedTransform(d),this.fire(new a.k("movestart",c)).fire(new a.k("move",c)),m&&this.fire(new a.k("zoomstart",c)).fire(new a.k("zoom",c)).fire(new a.k("zoomend",c)),y&&this.fire(new a.k("rotatestart",c)).fire(new a.k("rotate",c)).fire(new a.k("rotateend",c)),I&&this.fire(new a.k("pitchstart",c)).fire(new a.k("pitch",c)).fire(new a.k("pitchend",c)),this.fire(new a.k("moveend",c))}calculateCameraOptionsFromTo(o,c,d,m=0){let y=a.Z.fromLngLat(o,c),I=a.Z.fromLngLat(d,m),A=I.x-y.x,M=I.y-y.y,D=I.z-y.z,N=Math.hypot(A,M,D);if(N===0)throw new Error("Can't calculate camera options with same From and To");let F=Math.hypot(A,M),G=this.transform.scaleZoom(this.transform.cameraToCenterDistance/N/this.transform.tileSize),Y=180*Math.atan2(A,-M)/Math.PI,ee=180*Math.acos(F/N)/Math.PI;return ee=D<0?90-ee:90+ee,{center:I.toLngLat(),zoom:G,pitch:ee,bearing:Y}}easeTo(o,c){var d;this._stop(!1,o.easeId),((o=a.e({offset:[0,0],duration:500,easing:a.b9},o)).animate===!1||!o.essential&&b.prefersReducedMotion)&&(o.duration=0);let m=this._getTransformForUpdate(),y=m.zoom,I=m.bearing,A=m.pitch,M=m.padding,D="bearing"in o?this._normalizeBearing(o.bearing,I):I,N="pitch"in o?+o.pitch:A,F="padding"in o?o.padding:m.padding,G=a.P.convert(o.offset),Y=m.centerPoint.add(G),ee=m.pointLocation(Y),{center:ae,zoom:le}=m.getConstrained(a.N.convert(o.center||ee),(d=o.zoom)!==null&&d!==void 0?d:y);this._normalizeCenter(ae,m);let ce=m.project(ee),fe=m.project(ae).sub(ce),te=m.zoomScale(le-y),me,ge;o.around&&(me=a.N.convert(o.around),ge=m.locationPoint(me));let we={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||le!==y,this._rotating=this._rotating||I!==D,this._pitching=this._pitching||N!==A,this._padding=!m.isPaddingEqual(F),this._easeId=o.easeId,this._prepareEase(c,o.noMoveStart,we),this.terrain&&this._prepareElevation(ae),this._ease(Pe=>{if(this._zooming&&(m.zoom=a.y.number(y,le,Pe)),this._rotating&&(m.bearing=a.y.number(I,D,Pe)),this._pitching&&(m.pitch=a.y.number(A,N,Pe)),this._padding&&(m.interpolatePadding(M,F,Pe),Y=m.centerPoint.add(G)),this.terrain&&!o.freezeElevation&&this._updateElevation(Pe),me)m.setLocationAtPoint(me,ge);else{let ke=m.zoomScale(m.zoom-y),We=le>y?Math.min(2,te):Math.max(.5,te),Je=Math.pow(We,1-Pe),Ve=m.unproject(ce.add(fe.mult(Pe*Je)).mult(ke));m.setLocationAtPoint(m.renderWorldCopies?Ve.wrap():Ve,Y)}this._applyUpdatedTransform(m),this._fireMoveEvents(c)},Pe=>{this.terrain&&o.freezeElevation&&this._finalizeElevation(),this._afterEase(c,Pe)},o),this}_prepareEase(o,c,d={}){this._moving=!0,c||d.moving||this.fire(new a.k("movestart",o)),this._zooming&&!d.zooming&&this.fire(new a.k("zoomstart",o)),this._rotating&&!d.rotating&&this.fire(new a.k("rotatestart",o)),this._pitching&&!d.pitching&&this.fire(new a.k("pitchstart",o))}_prepareElevation(o){this._elevationCenter=o,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(o){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);let c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(o<1&&c!==this._elevationTarget){let d=this._elevationTarget-this._elevationStart;this._elevationStart+=o*(d-(c-(d*o+this._elevationStart))/(1-o)),this._elevationTarget=c}this.transform.elevation=a.y.number(this._elevationStart,this._elevationTarget,o)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(o){let c=o.getCameraPosition(),d=this.terrain.getElevationForLngLatZoom(c.lngLat,o.zoom);if(c.altitude<d){let m=this.calculateCameraOptionsFromTo(c.lngLat,d,o.center,o.elevation);return{pitch:m.pitch,zoom:m.zoom}}return{}}_applyUpdatedTransform(o){let c=[];if(this.terrain&&c.push(m=>this._elevateCameraIfInsideTerrain(m)),this.transformCameraUpdate&&c.push(m=>this.transformCameraUpdate(m)),!c.length)return;let d=o.clone();for(let m of c){let y=d.clone(),{center:I,zoom:A,pitch:M,bearing:D,elevation:N}=m(y);I&&(y.center=I),A!==void 0&&(y.zoom=A),M!==void 0&&(y.pitch=M),D!==void 0&&(y.bearing=D),N!==void 0&&(y.elevation=N),d.apply(y)}this.transform.apply(d)}_fireMoveEvents(o){this.fire(new a.k("move",o)),this._zooming&&this.fire(new a.k("zoom",o)),this._rotating&&this.fire(new a.k("rotate",o)),this._pitching&&this.fire(new a.k("pitch",o))}_afterEase(o,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;let d=this._zooming,m=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new a.k("zoomend",o)),m&&this.fire(new a.k("rotateend",o)),y&&this.fire(new a.k("pitchend",o)),this.fire(new a.k("moveend",o))}flyTo(o,c){var d;if(!o.essential&&b.prefersReducedMotion){let Ke=a.M(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ke,c)}this.stop(),o=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.b9},o);let m=this._getTransformForUpdate(),y=m.zoom,I=m.bearing,A=m.pitch,M=m.padding,D="bearing"in o?this._normalizeBearing(o.bearing,I):I,N="pitch"in o?+o.pitch:A,F="padding"in o?o.padding:m.padding,G=a.P.convert(o.offset),Y=m.centerPoint.add(G),ee=m.pointLocation(Y),{center:ae,zoom:le}=m.getConstrained(a.N.convert(o.center||ee),(d=o.zoom)!==null&&d!==void 0?d:y);this._normalizeCenter(ae,m);let ce=m.zoomScale(le-y),fe=m.project(ee),te=m.project(ae).sub(fe),me=o.curve,ge=Math.max(m.width,m.height),we=ge/ce,Pe=te.mag();if("minZoom"in o){let Ke=a.ac(Math.min(o.minZoom,y,le),m.minZoom,m.maxZoom),xt=ge/m.zoomScale(Ke-y);me=Math.sqrt(xt/Pe*2)}let ke=me*me;function We(Ke){let xt=(we*we-ge*ge+(Ke?-1:1)*ke*ke*Pe*Pe)/(2*(Ke?we:ge)*ke*Pe);return Math.log(Math.sqrt(xt*xt+1)-xt)}function Je(Ke){return(Math.exp(Ke)-Math.exp(-Ke))/2}function Ve(Ke){return(Math.exp(Ke)+Math.exp(-Ke))/2}let Be=We(!1),it=function(Ke){return Ve(Be)/Ve(Be+me*Ke)},bt=function(Ke){return ge*((Ve(Be)*(Je(xt=Be+me*Ke)/Ve(xt))-Je(Be))/ke)/Pe;var xt},$e=(We(!0)-Be)/me;if(Math.abs(Pe)<1e-6||!isFinite($e)){if(Math.abs(ge-we)<1e-6)return this.easeTo(o,c);let Ke=we<ge?-1:1;$e=Math.abs(Math.log(we/ge))/me,bt=()=>0,it=xt=>Math.exp(Ke*me*xt)}return o.duration="duration"in o?+o.duration:1e3*$e/("screenSpeed"in o?+o.screenSpeed/me:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=I!==D,this._pitching=N!==A,this._padding=!m.isPaddingEqual(F),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(ae),this._ease(Ke=>{let xt=Ke*$e,Dr=1/it(xt);m.zoom=Ke===1?le:y+m.scaleZoom(Dr),this._rotating&&(m.bearing=a.y.number(I,D,Ke)),this._pitching&&(m.pitch=a.y.number(A,N,Ke)),this._padding&&(m.interpolatePadding(M,F,Ke),Y=m.centerPoint.add(G)),this.terrain&&!o.freezeElevation&&this._updateElevation(Ke);let Mt=Ke===1?ae:m.unproject(fe.add(te.mult(bt(xt))).mult(Dr));m.setLocationAtPoint(m.renderWorldCopies?Mt.wrap():Mt,Y),this._applyUpdatedTransform(m),this._fireMoveEvents(c)},()=>{this.terrain&&o.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,c){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,c)}return o||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(o,c,d){d.animate===!1||d.duration===0?(o(1),c()):(this._easeStart=b.now(),this._easeOptions=d,this._onEaseFrame=o,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(o,c){o=a.b3(o,-180,180);let d=Math.abs(o-c);return Math.abs(o-360-c)<d&&(o-=360),Math.abs(o+360-c)<d&&(o+=360),o}_normalizeCenter(o,c){if(!c.renderWorldCopies||c.lngRange)return;let d=o.lng-c.center.lng;o.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(o){return this.terrain?this.terrain.getElevationForLngLatZoom(a.N.convert(o),this.transform.tileZoom)-this.transform.elevation:null}}let wc={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class bc{constructor(o=wc){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=o}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options.compact,this._container=E.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=E.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=E.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){E.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,c){let d=this._map._getUIString(`AttributionControl.${c}`);o.title=d,o.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){let m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}let c=this._map.style.sourceCaches;for(let m in c){let y=c[m];if(y.used||y.usedForTerrain){let I=y.getSource();I.attribution&&o.indexOf(I.attribution)<0&&o.push(I.attribution)}}o=o.filter(m=>String(m).trim()),o.sort((m,y)=>m.length-y.length),o=o.filter((m,y)=>{for(let I=y+1;I<o.length;I++)if(o[I].indexOf(m)>=0)return!1;return!0});let d=o.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,o.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Yg{constructor(o={}){this._updateCompact=()=>{let c=this._container.children;if(c.length){let d=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=o}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=E.create("div","maplibregl-ctrl");let c=E.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){E.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Gt{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){let c=++this._id;return this._queue.push({callback:o,id:c,cancelled:!1}),c}remove(o){let c=this._currentlyRunning,d=c?this._queue.concat(c):this._queue;for(let m of d)if(m.id===o)return void(m.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let c=this._currentlyRunning=this._queue;this._queue=[];for(let d of c)if(!d.cancelled&&(d.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Jg=a.Y([{name:"a_pos3d",type:"Int16",components:3}]);class dq extends a.E{constructor(o){super(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,o.usedForTerrain=!0,o.tileSize=this.tileSize*Tw(2,this.deltaZoom)}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(o,c){this.sourceCache.update(o,c),this._renderableTilesKeys=[];let d={};for(let m of o.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))d[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),a.aP(m.posMatrix,0,a.X,0,a.X,0,1),this._tiles[m.key]=new ji(m,this.tileSize));for(let m in this._tiles)d[m]||delete this._tiles[m]}freeRtt(o){for(let c in this._tiles){let d=this._tiles[c];(!o||d.tileID.equals(o)||d.tileID.isChildOf(o)||o.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o){let c={};for(let d of this._renderableTilesKeys){let m=this._tiles[d].tileID;if(m.canonical.equals(o.canonical)){let y=o.clone();y.posMatrix=new Float64Array(16),a.aP(y.posMatrix,0,a.X,0,a.X,0,1),c[d]=y}else if(m.canonical.isChildOf(o.canonical)){let y=o.clone();y.posMatrix=new Float64Array(16);let I=m.canonical.z-o.canonical.z,A=m.canonical.x-(m.canonical.x>>I<<I),M=m.canonical.y-(m.canonical.y>>I<<I),D=a.X>>I;a.aP(y.posMatrix,0,D,0,D,0,1),a.J(y.posMatrix,y.posMatrix,[-A*D,-M*D,0]),c[d]=y}else if(o.canonical.isChildOf(m.canonical)){let y=o.clone();y.posMatrix=new Float64Array(16);let I=o.canonical.z-m.canonical.z,A=o.canonical.x-(o.canonical.x>>I<<I),M=o.canonical.y-(o.canonical.y>>I<<I),D=a.X>>I;a.aP(y.posMatrix,0,a.X,0,a.X,0,1),a.J(y.posMatrix,y.posMatrix,[A*D,M*D,0]),a.K(y.posMatrix,y.posMatrix,[1/Tw(2,I),1/Tw(2,I),0]),c[d]=y}}return c}getSourceTile(o,c){let d=this.sourceCache._source,m=o.overscaledZ-this.deltaZoom;if(m>d.maxzoom&&(m=d.maxzoom),m<d.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(m).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!y||!y.dem)&&c)for(;m>=d.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(o.scaledTo(m--).key);return y}tilesAfterTime(o=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=o)}}class Qg{constructor(o,c,d){this.painter=o,this.sourceCache=new dq(c),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(o,c,d,m=a.X){var y;if(!(c>=0&&c<m&&d>=0&&d<m))return 0;let I=this.getTerrainData(o),A=(y=I.tile)===null||y===void 0?void 0:y.dem;if(!A)return 0;let M=function(ee,ae,le){var ce=ae[0],fe=ae[1];return ee[0]=le[0]*ce+le[4]*fe+le[12],ee[1]=le[1]*ce+le[5]*fe+le[13],ee}([],[c/m*a.X,d/m*a.X],I.u_terrain_matrix),D=[M[0]*A.dim,M[1]*A.dim],N=Math.floor(D[0]),F=Math.floor(D[1]),G=D[0]-N,Y=D[1]-F;return A.get(N,F)*(1-G)*(1-Y)+A.get(N+1,F)*G*(1-Y)+A.get(N,F+1)*(1-G)*Y+A.get(N+1,F+1)*G*Y}getElevationForLngLatZoom(o,c){if(!a.bb(c,o.wrap()))return 0;let{tileID:d,mercatorX:m,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(o,c);return this.getElevation(d,m%a.X,y%a.X,a.X)}getElevation(o,c,d,m=a.X){return this.getDEMElevation(o,c,d,m)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){let m=this.painter.context,y=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Le(m,y,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Le(m,new a.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.an([])}let c=this.sourceCache.getSourceTile(o,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){let m=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new Le(m,c.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),c.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}let d=c&&c+c.tileID.key+o.key;if(d&&!this._demMatrixCache[d]){let m=this.sourceCache.sourceCache._source.maxzoom,y=o.canonical.z-c.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=m?y=o.canonical.z-m:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let I=o.canonical.x-(o.canonical.x>>y<<y),A=o.canonical.y-(o.canonical.y>>y<<y),M=a.bc(new Float64Array(16),[1/(a.X<<y),1/(a.X<<y),0]);a.J(M,M,[I*a.X,A*a.X,0]),this._demMatrixCache[o.key]={matrix:M,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(o){let c=this.painter,d=c.width/devicePixelRatio,m=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Le(c.context,{width:d,height:m,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Le(c.context,{width:d,height:m,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(d,m,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,d,m))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let o=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,I=0;y<this._coordsTextureSize;y++)for(let A=0;A<this._coordsTextureSize;A++,I+=4)c[I+0]=255&A,c[I+1]=255&y,c[I+2]=A>>8<<4|y>>8,c[I+3]=0;let d=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),m=new Le(o,d,o.gl.RGBA,{premultiply:!1});return m.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(o){this.painter.maybeDrawDepthAndCoords(!0);let c=new Uint8Array(4),d=this.painter.context,m=d.gl,y=Math.round(o.x*this.painter.pixelRatio/devicePixelRatio),I=Math.round(o.y*this.painter.pixelRatio/devicePixelRatio),A=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(y,A-I-1,1,1,m.RGBA,m.UNSIGNED_BYTE,c),d.bindFramebuffer.set(null);let M=c[0]+(c[2]>>4<<8),D=c[1]+((15&c[2])<<8),N=this.coordsIndex[255-c[3]],F=N&&this.sourceCache.getTileByID(N);if(!F)return null;let G=this._coordsTextureSize,Y=(1<<F.tileID.canonical.z)*G;return new a.Z((F.tileID.canonical.x*G+M)/Y+F.tileID.wrap,(F.tileID.canonical.y*G+D)/Y,this.getElevation(F.tileID,M,D,G))}depthAtPoint(o){let c=new Uint8Array(4),d=this.painter.context,m=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(o.x,this.painter.height/devicePixelRatio-o.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,c),d.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;let o=this.painter.context,c=new a.bd,d=new a.aY,m=this.meshSize,y=a.X/m,I=m*m;for(let F=0;F<=m;F++)for(let G=0;G<=m;G++)c.emplaceBack(G*y,F*y,0);for(let F=0;F<I;F+=m+1)for(let G=0;G<m;G++)d.emplaceBack(G+F,m+G+F+1,m+G+F+2),d.emplaceBack(G+F,m+G+F+2,G+F+1);let A=c.length,M=A+2*(m+1);for(let F of[0,1])for(let G=0;G<=m;G++)for(let Y of[0,1])c.emplaceBack(G*y,F*a.X,Y);for(let F=0;F<2*m;F+=2)d.emplaceBack(M+F,M+F+1,M+F+3),d.emplaceBack(M+F,M+F+3,M+F+2),d.emplaceBack(A+F,A+F+3,A+F+1),d.emplaceBack(A+F,A+F+2,A+F+3);let D=c.length,N=D+2*(m+1);for(let F of[0,1])for(let G=0;G<=m;G++)for(let Y of[0,1])c.emplaceBack(F*a.X,G*y,Y);for(let F=0;F<2*m;F+=2)d.emplaceBack(D+F,D+F+1,D+F+3),d.emplaceBack(D+F,D+F+3,D+F+2),d.emplaceBack(N+F,N+F+3,N+F+1),d.emplaceBack(N+F,N+F+2,N+F+3);return this._mesh=new Jp(o.createVertexBuffer(c,Jg.members),o.createIndexBuffer(d),a.a0.simpleSegment(0,0,c.length,d.length)),this._mesh}getMeshFrameDelta(o){return 2*Math.PI*a.be/Math.pow(2,o)/5}getMinTileElevationForLngLatZoom(o,c){var d;let{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(o,c);return(d=this.getMinMaxElevation(m).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(o){let c=this.getTerrainData(o).tile,d={minElevation:null,maxElevation:null};return c&&c.dem&&(d.minElevation=c.dem.min*this.exaggeration,d.maxElevation=c.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(o,c){let d=a.Z.fromLngLat(o.wrap()),m=(1<<c)*a.X,y=d.x*m,I=d.y*m,A=Math.floor(y/a.X),M=Math.floor(I/a.X);return{tileID:new a.S(c,0,c,A,M),mercatorX:y,mercatorY:I}}}class mq{constructor(o,c,d){this._context=o,this._size=c,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let o of this._objects)o.texture.destroy(),o.fbo.destroy()}_createObject(o){let c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new Le(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(d.texture),{id:o,fbo:c,texture:d,stamp:-1,inUse:!1}}getObjectForId(o){return this._objects[o]}useObject(o){o.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>o.id!==c),this._recentlyUsed.push(o.id)}stampObject(o){o.stamp=++this._stamp}getOrCreateFreeObject(){for(let c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let o=this._createObject(this._objects.length);return this._objects.push(o),o}freeObject(o){o.inUse=!1}freeAllObjects(){for(let o of this._objects)this.freeObject(o)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(o=>!o.inUse)===!1}}let Ec={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Q1{constructor(o,c){this.painter=o,this.terrain=c,this.pool=new mq(o.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(o){return this.pool.getObjectForId(o.rtt[this._stacks.length-1].id).texture}prepareForRender(o,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=o._order.filter(d=>!o._layers[d].isHidden(c)),this._coordsDescendingInv={};for(let d in o.sourceCaches){this._coordsDescendingInv[d]={};let m=o.sourceCaches[d].getVisibleCoordinates();for(let y of m){let I=this.terrain.sourceCache.getTerrainCoords(y);for(let A in I)this._coordsDescendingInv[d][A]||(this._coordsDescendingInv[d][A]=[]),this._coordsDescendingInv[d][A].push(I[A])}}this._coordsDescendingInvStr={};for(let d of o._order){let m=o._layers[d],y=m.source;if(Ec[m.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(let I in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][I]=this._coordsDescendingInv[y][I].map(A=>A.key).sort().join()}}for(let d of this._renderableTiles)for(let m in this._coordsDescendingInvStr){let y=this._coordsDescendingInvStr[m][d.tileID.key];y&&y!==d.rttCoords[m]&&(d.rtt=[])}}renderLayer(o){if(o.isHidden(this.painter.transform.zoom))return!1;let c=o.type,d=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===o.id;if(Ec[c]&&(this._prevType&&Ec[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(o.id),!m))return!0;if(Ec[this._prevType]||Ec[c]&&m){this._prevType=c;let y=this._stacks.length-1,I=this._stacks[y]||[];for(let A of this._renderableTiles){if(this.pool.isFull()&&(G1(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[y]){let D=this.pool.getObjectForId(A.rtt[y].id);if(D.stamp===A.rtt[y].stamp){this.pool.useObject(D);continue}}let M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),A.rtt[y]={id:M.id,stamp:M.stamp},d.context.bindFramebuffer.set(M.fbo.framebuffer),d.context.clear({color:a.aM.transparent,stencil:0}),d.currentStencilSource=void 0;for(let D=0;D<I.length;D++){let N=d.style._layers[I[D]],F=N.source?this._coordsDescendingInv[N.source][A.tileID.key]:[A.tileID];d.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),d._renderTileClippingMasks(N,F),d.renderLayer(d,d.style.sourceCaches[N.source],N,F),N.source&&(A.rttCoords[N.source]=this._coordsDescendingInvStr[N.source][A.tileID.key])}}return G1(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ec[c]}return!1}}let ey={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ew=h,vq={hash:!1,interactive:!0,bearingSnap:7,attributionControl:wc,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},ty=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},gq={showCompass:!0,showZoom:!0,visualizePitch:!1};class yq{constructor(o,c,d=!1){this.mousedown=I=>{this.startMouse(a.e({},I,{ctrlKey:!0,preventDefault:()=>I.preventDefault()}),E.mousePos(this.element,I)),E.addEventListener(window,"mousemove",this.mousemove),E.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=I=>{this.moveMouse(I,E.mousePos(this.element,I))},this.mouseup=I=>{this.mouseRotate.dragEnd(I),this.mousePitch&&this.mousePitch.dragEnd(I),this.offTemp()},this.touchstart=I=>{I.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=E.touchPos(this.element,I.targetTouches)[0],this.startTouch(I,this._startPos),E.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.addEventListener(window,"touchend",this.touchend))},this.touchmove=I=>{I.targetTouches.length!==1?this.reset():(this._lastPos=E.touchPos(this.element,I.targetTouches)[0],this.moveTouch(I,this._lastPos))},this.touchend=I=>{I.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;let m=o.dragRotate._mouseRotate.getClickTolerance(),y=o.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=Ug({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:I,clickTolerance:A,bearingDegreesPerPixelMoved:M=.8})=>{let D=new Bg;return new As({clickTolerance:A,move:(N,F)=>({bearingDelta:(F.x-N.x)*M}),moveStateManager:D,enable:I,assignEvents:ty})})({clickTolerance:m,enable:!0}),this.map=o,d&&(this.mousePitch=Vg({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:I,clickTolerance:A,pitchDegreesPerPixelMoved:M=-.5})=>{let D=new Bg;return new As({clickTolerance:A,move:(N,F)=>({pitchDelta:(F.y-N.y)*M}),moveStateManager:D,enable:I,assignEvents:ty})})({clickTolerance:y,enable:!0})),E.addEventListener(c,"mousedown",this.mousedown),E.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),E.addEventListener(c,"touchcancel",this.reset)}startMouse(o,c){this.mouseRotate.dragStart(o,c),this.mousePitch&&this.mousePitch.dragStart(o,c),E.disableDrag()}startTouch(o,c){this.touchRotate.dragStart(o,c),this.touchPitch&&this.touchPitch.dragStart(o,c),E.disableDrag()}moveMouse(o,c){let d=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(o,c)||{};if(m&&d.setBearing(d.getBearing()+m),this.mousePitch){let{pitchDelta:y}=this.mousePitch.dragMove(o,c)||{};y&&d.setPitch(d.getPitch()+y)}}moveTouch(o,c){let d=this.map,{bearingDelta:m}=this.touchRotate.dragMove(o,c)||{};if(m&&d.setBearing(d.getBearing()+m),this.touchPitch){let{pitchDelta:y}=this.touchPitch.dragMove(o,c)||{};y&&d.setPitch(d.getPitch()+y)}}off(){let o=this.element;E.removeEventListener(o,"mousedown",this.mousedown),E.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),E.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.removeEventListener(window,"touchend",this.touchend),E.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){E.enableDrag(),E.removeEventListener(window,"mousemove",this.mousemove),E.removeEventListener(window,"mouseup",this.mouseup),E.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.removeEventListener(window,"touchend",this.touchend)}}let _a;function Rr(_,o,c){let d=new a.N(_.lng,_.lat);if(_=new a.N(_.lng,_.lat),o){let m=new a.N(_.lng-360,_.lat),y=new a.N(_.lng+360,_.lat),I=c.locationPoint(_).distSqr(o);c.locationPoint(m).distSqr(o)<I?_=m:c.locationPoint(y).distSqr(o)<I&&(_=y)}for(;Math.abs(_.lng-c.center.lng)>180;){let m=c.locationPoint(_);if(m.x>=0&&m.y>=0&&m.x<=c.width&&m.y<=c.height)break;_.lng>c.center.lng?_.lng-=360:_.lng+=360}return _.lng!==d.lng&&c.locationPoint(_).y>c.height/2-c.getHorizon()?_:d}let Sc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ld(_,o,c){let d=_.classList;for(let m in Sc)d.remove(`maplibregl-${c}-anchor-${m}`);d.add(`maplibregl-${c}-anchor-${o}`)}class cd extends a.E{constructor(o){if(super(),this._onKeyPress=c=>{let d=c.code,m=c.charCode||c.keyCode;d!=="Space"&&d!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=c=>{let d=c.originalEvent.target,m=this._element;this._popup&&(d===m||m.contains(d))&&this.togglePopup()},this._update=c=>{var d;if(!this._map)return;let m=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Rr(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),E.setTransform(this._element,`${Sc[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${y}`),b.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){let d=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._subpixelPositioning=o&&o.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(o==null?void 0:o.opacity,o==null?void 0:o.opacityWhenCovered),o&&o.element)this._element=o.element,this._offset=a.P.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=E.create("div");let c=E.createNS("http://www.w3.org/2000/svg","svg"),d=41,m=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${d}px`),c.setAttributeNS(null,"width",`${m}px`),c.setAttributeNS(null,"viewBox",`0 0 ${m} ${d}`);let y=E.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");let I=E.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill-rule","nonzero");let A=E.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");let M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let ce of M){let fe=E.createNS("http://www.w3.org/2000/svg","ellipse");fe.setAttributeNS(null,"opacity","0.04"),fe.setAttributeNS(null,"cx","10.5"),fe.setAttributeNS(null,"cy","5.80029008"),fe.setAttributeNS(null,"rx",ce.rx),fe.setAttributeNS(null,"ry",ce.ry),A.appendChild(fe)}let D=E.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);let N=E.createNS("http://www.w3.org/2000/svg","path");N.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(N);let F=E.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"opacity","0.25"),F.setAttributeNS(null,"fill","#000000");let G=E.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),F.appendChild(G);let Y=E.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Y.setAttributeNS(null,"fill","#FFFFFF");let ee=E.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");let ae=E.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#000000"),ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962");let le=E.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#FFFFFF"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962"),ee.appendChild(ae),ee.appendChild(le),I.appendChild(A),I.appendChild(D),I.appendChild(F),I.appendChild(Y),I.appendChild(ee),c.appendChild(I),c.setAttributeNS(null,"height",d*this._scale+"px"),c.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(c),this._offset=a.P.convert(o&&o.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),ld(this._element,this._anchor,"marker"),o&&o.className)for(let c of o.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(o){return this.remove(),this._map=o,this._element.setAttribute("aria-label",o._getUIString("Marker.Title")),o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),o.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),E.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=a.N.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){let m=Math.abs(13.5)/Math.SQRT2;o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(o){return this._subpixelPositioning=o,this}getPopup(){return this._popup}togglePopup(){let o=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:o?(o.isOpen()?o.remove():(o.setLngLat(this._lngLat),o.addTo(this._map)),this):this}_updateOpacity(o=!1){var c,d;if(!(!((c=this._map)===null||c===void 0)&&c.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(o)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let m=this._map,y=m.terrain.depthAtPoint(this._pos),I=m.terrain.getElevationForLngLatZoom(this._lngLat,m.transform.tileZoom);if(m.transform.lngLatToCameraDepth(this._lngLat,I)-y<.006)return void(this._element.style.opacity=this._opacity);let A=-this._offset.y/m.transform._pixelPerMeter,M=Math.sin(m.getPitch()*Math.PI/180)*A,D=m.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),N=m.transform.lngLatToCameraDepth(this._lngLat,I+M)-D>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&N&&this._popup.remove(),this._element.style.opacity=N?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(o){return this._offset=a.P.convert(o),this._update(),this}addClassName(o){this._element.classList.add(o)}removeClassName(o){this._element.classList.remove(o)}toggleClassName(o){return this._element.classList.toggle(o)}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(o,c){return o===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),o!==void 0&&(this._opacity=o),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}let tw={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ff=0,pf=!1,Uo={maxWidth:100,unit:"metric"};function df(_,o,c){let d=c&&c.maxWidth||100,m=_._container.clientHeight/2,y=_.unproject([0,m]),I=_.unproject([d,m]),A=y.distanceTo(I);if(c&&c.unit==="imperial"){let M=3.2808*A;M>5280?nt(o,d,M/5280,_._getUIString("ScaleControl.Miles")):nt(o,d,M,_._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?nt(o,d,A/1852,_._getUIString("ScaleControl.NauticalMiles")):A>=1e3?nt(o,d,A/1e3,_._getUIString("ScaleControl.Kilometers")):nt(o,d,A,_._getUIString("ScaleControl.Meters"))}function nt(_,o,c,d){let m=function(y){let I=Math.pow(10,`${Math.floor(y)}`.length-1),A=y/I;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(M){let D=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*D)/D}(A),I*A}(c);_.style.width=o*(m/c)+"px",_.innerHTML=`${m}&nbsp;${d}`}let mt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},hd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function fd(_){if(_){if(typeof _=="number"){let o=Math.round(Math.abs(_)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,_),"top-left":new a.P(o,o),"top-right":new a.P(-o,o),bottom:new a.P(0,-_),"bottom-left":new a.P(o,-o),"bottom-right":new a.P(-o,-o),left:new a.P(_,0),right:new a.P(-_,0)}}if(_ instanceof a.P||Array.isArray(_)){let o=a.P.convert(_);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:a.P.convert(_.center||[0,0]),top:a.P.convert(_.top||[0,0]),"top-left":a.P.convert(_["top-left"]||[0,0]),"top-right":a.P.convert(_["top-right"]||[0,0]),bottom:a.P.convert(_.bottom||[0,0]),"bottom-left":a.P.convert(_["bottom-left"]||[0,0]),"bottom-right":a.P.convert(_["bottom-right"]||[0,0]),left:a.P.convert(_.left||[0,0]),right:a.P.convert(_.right||[0,0])}}return fd(new a.P(0,0))}let ry=h;i.AJAXError=a.bh,i.Evented=a.E,i.LngLat=a.N,i.MercatorCoordinate=a.Z,i.Point=a.P,i.addProtocol=a.bi,i.config=a.a,i.removeProtocol=a.bj,i.AttributionControl=bc,i.BoxZoomHandler=ya,i.CanvasSource=zi,i.CooperativeGesturesHandler=xc,i.DoubleClickZoomHandler=rl,i.DragPanHandler=X1,i.DragRotateHandler=Y1,i.EdgeInsets=vc,i.FullscreenControl=class extends a.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var o;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((o=c==null?void 0:c.shadowRoot)===null||o===void 0)&&o.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){E.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let _=this._fullscreenButton=E.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);E.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},i.GeoJSONSource=Ks,i.GeolocateControl=class extends a.E{constructor(_){super(),this._onSuccess=o=>{if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",o)),this._finish()}},this._updateCamera=o=>{let c=new a.N(o.coords.longitude,o.coords.latitude),d=o.coords.accuracy,m=this._map.getBearing(),y=a.e({bearing:m},this.options.fitBoundsOptions),I=Ee.fromLngLat(c,d);this._map.fitBounds(I,y,{geolocateSource:!0})},this._updateMarker=o=>{if(o){let c=new a.N(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=o=>{if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&pf)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",o)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=E.create("button","maplibregl-ctrl-geolocate",this._container),E.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=o=>{if(this._map){if(o===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");let c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{let c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=E.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new cd({element:this._dotElement}),this._circleElement=E.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new cd({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")),this.fire(new a.k("userlocationlostfocus")))})}},this.options=a.e({},tw,_)}onAdd(_){return this._map=_,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(o=!1){if(_a!==void 0&&!o)return _a;if(window.navigator.permissions===void 0)return _a=!!window.navigator.geolocation,_a;try{_a=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(c){_a=!!window.navigator.geolocation}return _a})}().then(o=>this._finishSetupUI(o)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),E.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ff=0,pf=!1}_isOutOfMapMaxBounds(_){let o=this._map.getMaxBounds(),c=_.coords;return o&&(c.longitude<o.getWest()||c.longitude>o.getEast()||c.latitude<o.getSouth()||c.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}}_updateCircleRadius(){let _=this._map.getBounds(),o=_.getSouthEast(),c=_.getNorthEast(),d=o.distanceTo(c),m=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ff--,pf=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart")),this.fire(new a.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ff++,ff>1?(_={maximumAge:6e5,timeout:0},pf=!0):(_=this.options.positionOptions,pf=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},i.Hash=ed,i.ImageSource=mo,i.KeyboardHandler=Na,i.LngLatBounds=Ee,i.LogoControl=Yg,i.Map=class extends J1{constructor(_){a.bf.mark(a.bg.create);let o=Object.assign(Object.assign({},vq),_);if(o.minZoom!=null&&o.maxZoom!=null&&o.minZoom>o.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(o.minPitch!=null&&o.maxPitch!=null&&o.minPitch>o.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(o.minPitch!=null&&o.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(o.maxPitch!=null&&o.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new gc(o.minZoom,o.maxZoom,o.minPitch,o.maxPitch,o.renderWorldCopies),{bearingSnap:o.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Gt,this._controls=[],this._mapId=a.a4(),this._contextLost=c=>{c.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.k("webglcontextlost",{originalEvent:c}))},this._contextRestored=c=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:c}))},this._onMapScroll=c=>{if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=o.interactive,this._maxTileCacheSize=o.maxTileCacheSize,this._maxTileCacheZoomLevels=o.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=o.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=o.preserveDrawingBuffer===!0,this._antialias=o.antialias===!0,this._trackResize=o.trackResize===!0,this._bearingSnap=o.bearingSnap,this._refreshExpiredTiles=o.refreshExpiredTiles===!0,this._fadeDuration=o.fadeDuration,this._crossSourceCollisions=o.crossSourceCollisions===!0,this._collectResourceTiming=o.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},ey),o.locale),this._clickTolerance=o.clickTolerance,this._overridePixelRatio=o.pixelRatio,this._maxCanvasSize=o.maxCanvasSize,this.transformCameraUpdate=o.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=o.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=$.addThrottleControl(()=>this.isMoving()),this._requestManager=new H(o.transformRequest),typeof o.container=="string"){if(this._container=document.getElementById(o.container),!this._container)throw new Error(`Container '${o.container}' not found.`)}else{if(!(o.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=o.container}if(o.maxBounds&&this.setMaxBounds(o.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let c=!1,d=sf(m=>{this._trackResize&&!this._removed&&(this.resize(m),this.redraw())},50);this._resizeObserver=new ResizeObserver(m=>{c?d(m):c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Xg(this,o),this._hash=o.hash&&new ed(typeof o.hash=="string"&&o.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:o.center,zoom:o.zoom,bearing:o.bearing,pitch:o.pitch}),o.bounds&&(this.resize(),this.fitBounds(o.bounds,a.e({},o.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=o.localIdeographFontFamily,this._validateStyle=o.validateStyle,o.style&&this.setStyle(o.style,{localIdeographFontFamily:o.localIdeographFontFamily}),o.attributionControl&&this.addControl(new bc(typeof o.attributionControl=="boolean"?void 0:o.attributionControl)),o.maplibreLogo&&this.addControl(new Yg,o.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new a.k(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new a.k(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new a.k("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(_,o){if(o===void 0&&(o=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let c=_.onAdd(this);this._controls.push(_);let d=this._controlPositions[o];return o.indexOf("bottom")!==-1?d.insertBefore(c,d.firstChild):d.appendChild(c),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let o=this._controls.indexOf(_);return o>-1&&this._controls.splice(o,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,o,c,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,o,c,d)}resize(_){var o;let c=this._containerDimensions(),d=c[0],m=c[1],y=this._getClampedPixelRatio(d,m);if(this._resizeCanvas(d,m,y),this.painter.resize(d,m,y),this.painter.overLimit()){let A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];let M=this._getClampedPixelRatio(d,m);this._resizeCanvas(d,m,M),this.painter.resize(d,m,M)}this.transform.resize(d,m),(o=this._requestedCameraState)===null||o===void 0||o.resize(d,m);let I=!this._moving;return I&&(this.stop(),this.fire(new a.k("movestart",_)).fire(new a.k("move",_))),this.fire(new a.k("resize",_)),I&&this.fire(new a.k("moveend",_)),this}_getClampedPixelRatio(_,o){let{0:c,1:d}=this._maxCanvasSize,m=this.getPixelRatio(),y=_*m,I=o*m;return Math.min(y>c?c/y:1,I>d?d/I:1)*m}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(Ee.convert(_)),this._update()}setMinZoom(_){if((_=_==null?-2:_)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_==null?22:_)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_==null?0:_)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_==null?60:_)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}project(_){return this.transform.locationPoint(a.N.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(a.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,o,c){if(_==="mouseenter"||_==="mouseover"){let d=!1;return{layers:o,listener:c,delegates:{mousemove:y=>{let I=o.filter(M=>this.getLayer(M)),A=I.length!==0?this.queryRenderedFeatures(y.point,{layers:I}):[];A.length?d||(d=!0,c.call(this,new oi(_,this,y.originalEvent,{features:A}))):d=!1},mouseout:()=>{d=!1}}}}if(_==="mouseleave"||_==="mouseout"){let d=!1;return{layers:o,listener:c,delegates:{mousemove:I=>{let A=o.filter(M=>this.getLayer(M));(A.length!==0?this.queryRenderedFeatures(I.point,{layers:A}):[]).length?d=!0:d&&(d=!1,c.call(this,new oi(_,this,I.originalEvent)))},mouseout:I=>{d&&(d=!1,c.call(this,new oi(_,this,I.originalEvent)))}}}}{let d=m=>{let y=o.filter(A=>this.getLayer(A)),I=y.length!==0?this.queryRenderedFeatures(m.point,{layers:y}):[];I.length&&(m.features=I,c.call(this,m),delete m.features)};return{layers:o,listener:c,delegates:{[_]:d}}}}_saveDelegatedListener(_,o){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(o)}_removeDelegatedListener(_,o,c){if(!this._delegatedListeners||!this._delegatedListeners[_])return;let d=this._delegatedListeners[_];for(let m=0;m<d.length;m++){let y=d[m];if(y.listener===c&&y.layers.length===o.length&&y.layers.every(I=>o.includes(I))){for(let I in y.delegates)this.off(I,y.delegates[I]);return void d.splice(m,1)}}}on(_,o,c){if(c===void 0)return super.on(_,o);let d=this._createDelegatedListener(_,typeof o=="string"?[o]:o,c);this._saveDelegatedListener(_,d);for(let m in d.delegates)this.on(m,d.delegates[m]);return this}once(_,o,c){if(c===void 0)return super.once(_,o);let d=typeof o=="string"?[o]:o,m=this._createDelegatedListener(_,d,c);for(let y in m.delegates){let I=m.delegates[y];m.delegates[y]=(...A)=>{this._removeDelegatedListener(_,d,c),I(...A)}}this._saveDelegatedListener(_,m);for(let y in m.delegates)this.once(y,m.delegates[y]);return this}off(_,o,c){return c===void 0?super.off(_,o):(this._removeDelegatedListener(_,typeof o=="string"?[o]:o,c),this)}queryRenderedFeatures(_,o){if(!this.style)return[];let c,d=_ instanceof a.P||Array.isArray(_),m=d?_:[[0,0],[this.transform.width,this.transform.height]];if(o=o||(d?{}:_)||{},m instanceof a.P||typeof m[0]=="number")c=[a.P.convert(m)];else{let y=a.P.convert(m[0]),I=a.P.convert(m[1]);c=[y,new a.P(I.x,y.y),I,new a.P(y.x,I.y),y]}return this.style.queryRenderedFeatures(c,o,this.transform)}querySourceFeatures(_,o){return this.style.querySourceFeatures(_,o)}setStyle(_,o){return(o=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(_,o))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){let o=this._locale[_];if(o==null)throw new Error(`Missing UI string '${_}'`);return o}_updateStyle(_,o){if(o.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,o));let c=this.style&&o.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new Np(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,o,c):this.style.loadJSON(_,o,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Np(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,o){if(typeof _=="string"){let c=this._requestManager.transformRequest(_,"Style");a.h(c,new AbortController).then(d=>{this._updateDiff(d.data,o)}).catch(d=>{d&&this.fire(new a.j(d))})}else typeof _=="object"&&this._updateDiff(_,o)}_updateDiff(_,o){try{this.style.setState(_,o)&&this._update(!0)}catch(c){a.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(_,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(_,o){return this._lazyInitEmptyStyle(),this.style.addSource(_,o),this._update(!0)}isSourceLoaded(_){let o=this.style&&this.style.sourceCaches[_];if(o!==void 0)return o.loaded();this.fire(new a.j(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){let o=this.style.sourceCaches[_.source];if(!o)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&o.reload();for(let c in this.style._layers){let d=this.style._layers[c];d.type==="hillshade"&&d.source===_.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Qg(this.painter,o,_),this.painter.renderToTexture=new Q1(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==_.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:_})),this}getTerrain(){var _,o;return(o=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&o!==void 0?o:null}areTilesLoaded(){let _=this.style&&this.style.sourceCaches;for(let o in _){let c=_[o]._tiles;for(let d in c){let m=c[d];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,o,c={}){let{pixelRatio:d=1,sdf:m=!1,stretchX:y,stretchY:I,content:A,textFitWidth:M,textFitHeight:D}=c;if(this._lazyInitEmptyStyle(),!(o instanceof HTMLImageElement||a.b(o))){if(o.width===void 0||o.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:N,height:F,data:G}=o,Y=o;return this.style.addImage(_,{data:new a.R({width:N,height:F},new Uint8Array(G)),pixelRatio:d,stretchX:y,stretchY:I,content:A,textFitWidth:M,textFitHeight:D,sdf:m,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,_),this}}{let{width:N,height:F,data:G}=b.getImageData(o);this.style.addImage(_,{data:new a.R({width:N,height:F},G),pixelRatio:d,stretchX:y,stretchY:I,content:A,textFitWidth:M,textFitHeight:D,sdf:m,version:0})}}updateImage(_,o){let c=this.style.getImage(_);if(!c)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let d=o instanceof HTMLImageElement||a.b(o)?b.getImageData(o):o,{width:m,height:y,data:I}=d;if(m===void 0||y===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==c.data.width||y!==c.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));let A=!(o instanceof HTMLImageElement||a.b(o));return c.data.replace(I,A),this.style.updateImage(_,c),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return $.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,o){return this._lazyInitEmptyStyle(),this.style.addLayer(_,o),this._update(!0)}moveLayer(_,o){return this.style.moveLayer(_,o),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,o,c){return this.style.setLayerZoomRange(_,o,c),this._update(!0)}setFilter(_,o,c={}){return this.style.setFilter(_,o,c),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,o,c,d={}){return this.style.setPaintProperty(_,o,c,d),this._update(!0)}getPaintProperty(_,o){return this.style.getPaintProperty(_,o)}setLayoutProperty(_,o,c,d={}){return this.style.setLayoutProperty(_,o,c,d),this._update(!0)}getLayoutProperty(_,o){return this.style.getLayoutProperty(_,o)}setGlyphs(_,o={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,o),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,o,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,o,c,d=>{d||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,o={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,o,c=>{c||this._update(!0)}),this}setLight(_,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,o),this._update(!0)}getLight(){return this.style.getLight()}setSky(_){return this._lazyInitEmptyStyle(),this.style.setSky(_),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,o){return this.style.setFeatureState(_,o),this._update()}removeFeatureState(_,o){return this.style.removeFeatureState(_,o),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,o=0;return this._container&&(_=this._container.clientWidth||400,o=this._container.clientHeight||300),[_,o]}_setupContainer(){let _=this._container;_.classList.add("maplibregl-map");let o=this._canvasContainer=E.create("div","maplibregl-canvas-container",_);this._interactive&&o.classList.add("maplibregl-interactive"),this._canvas=E.create("canvas","maplibregl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let c=this._containerDimensions(),d=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],d);let m=this._controlContainer=E.create("div","maplibregl-control-container",_),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(I=>{y[I]=E.create("div",`maplibregl-ctrl-${I} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,o,c){this._canvas.width=Math.floor(c*_),this._canvas.height=Math.floor(c*o),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${o}px`}_setupPainter(){let _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},o=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{o={requestedAttributes:_},d&&(o.statusMessage=d.statusMessage,o.type=d.type)},{once:!0});let c=this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_);if(!c){let d="Failed to initialize WebGL";throw o?(o.message=d,new Error(JSON.stringify(o))):new Error(d)}this.painter=new Qp(c,this.transform),q.testSupport(c)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){let o=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let m=this.transform.zoom,y=b.now();this.style.zoomHistory.update(m,y);let I=new a.z(m,{now:y,fadeDuration:o,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=I.crossFadingFactor();A===1&&A===this._crossFadingFactor||(c=!0,this._crossFadingFactor=A),this.style.update(I)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bf.mark(a.bg.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,a.bf.mark(a.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(let c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),$.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();let o=this.painter.context.gl.getExtension("WEBGL_lose_context");o!=null&&o.loseContext&&o.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),E.remove(this._canvasContainer),E.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),a.bf.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(_=>{a.bf.frame(_),this._frameRequest=null,this._render(_)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return ew}getCameraTargetElevation(){return this.transform.elevation}},i.MapMouseEvent=oi,i.MapTouchEvent=el,i.MapWheelEvent=Z1,i.Marker=cd,i.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{let o=this._map.getZoom(),c=o===this._map.getMaxZoom(),d=o===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{let o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=o},this._setButtonTitle=(o,c)=>{let d=this._map._getUIString(`NavigationControl.${c}`);o.title=d,o.setAttribute("aria-label",d)},this.options=a.e({},gq,_),this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),E.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),E.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=E.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new yq(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){E.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,o){let c=E.create("button",_,this._container);return c.type="button",c.addEventListener("click",o),c}},i.Popup=class extends a.E{constructor(_){super(),this.remove=()=>(this._content&&E.remove(this._content),this._container&&(E.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.k("close"))),this),this._onMouseUp=o=>{this._update(o.point)},this._onMouseMove=o=>{this._update(o.point)},this._onDrag=o=>{this._update(o.point)},this._update=o=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=E.create("div","maplibregl-popup",this._map.getContainer()),this._tip=E.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let A of this.options.className.split(" "))this._container.classList.add(A);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Rr(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!o)return;let d=this._flatPos=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&o?o:this._map.transform.locationPoint(this._lngLat));let m=this.options.anchor,y=fd(this.options.offset);if(!m){let A=this._container.offsetWidth,M=this._container.offsetHeight,D;D=d.y+y.bottom.y<M?["top"]:d.y>this._map.transform.height-M?["bottom"]:[],d.x<A/2?D.push("left"):d.x>this._map.transform.width-A/2&&D.push("right"),m=D.length===0?"bottom":D.join("-")}let I=d.add(y[m]);this.options.subpixelPositioning||(I=I.round()),E.setTransform(this._container,`${Sc[m]} translate(${I.x}px,${I.y}px)`),ld(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(mt),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=a.N.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){let o=document.createDocumentFragment(),c=document.createElement("body"),d;for(c.innerHTML=_;d=c.firstChild,d;)o.appendChild(d);return this.setDOMContent(o)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=E.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=E.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let _=this._container.querySelector(hd);_&&_.focus()}},i.RasterDEMTileSource=Cr,i.RasterTileSource=Xt,i.ScaleControl=class{constructor(_){this._onMove=()=>{df(this._map,this._container,this.options)},this.setUnit=o=>{this.options.unit=o,df(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Uo),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){E.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},i.ScrollZoomHandler=xo,i.Style=Np,i.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=E.create("button","maplibregl-ctrl-terrain",this._container),E.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){E.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},i.TwoFingersTouchPitchHandler=_c,i.TwoFingersTouchRotateHandler=Zg,i.TwoFingersTouchZoomHandler=Gg,i.TwoFingersTouchZoomRotateHandler=Kg,i.VectorTileSource=Hs,i.VideoSource=Ts,i.addSourceType=(_,o)=>a._(void 0,void 0,void 0,function*(){if(Ys(_))throw new Error(`A source type called "${_}" already exists.`);((c,d)=>{Xs[c]=d})(_,o)}),i.clearPrewarmedResources=function(){let _=Dt;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(wi),Dt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},i.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},i.getRTLTextPluginStatus=function(){return ii().getRTLTextPluginStatus()},i.getVersion=function(){return ry},i.getWorkerCount=function(){return Gn.workerCount},i.getWorkerUrl=function(){return a.a.WORKER_URL},i.importScriptInWorkers=function(_){return Es().broadcast("IS",_)},i.prewarm=function(){ni().acquire(wi)},i.setMaxParallelImageRequests=function(_){a.a.MAX_PARALLEL_IMAGE_REQUESTS=_},i.setRTLTextPlugin=function(_,o){return ii().setRTLTextPlugin(_,o)},i.setWorkerCount=function(_){Gn.workerCount=_},i.setWorkerUrl=function(_){a.a.WORKER_URL=_}});var n=e;return n})});var t0e=T((str,e0e)=>{"use strict";var mCt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e0e.exports=mCt});var a0e=T((utr,i0e)=>{"use strict";var vCt=t0e();function r0e(){}function n0e(){}n0e.resetWarningCache=r0e;i0e.exports=function(){function e(n,i,a,h,p,g){if(g!==vCt){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:n0e,resetWarningCache:r0e};return r.PropTypes=r,r}});var zr=T((htr,o0e)=>{o0e.exports=a0e()();var ltr,ctr});var Hv=T((_fr,z1e)=>{var cPt=z1e.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=cPt)});var ws=T((xfr,j1e)=>{var hPt=j1e.exports={version:"2.6.12"};typeof __e=="number"&&(__e=hPt)});var U1e=T((wfr,B1e)=>{B1e.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}});var dC=T((bfr,V1e)=>{var fPt=U1e();V1e.exports=function(e,t,r){if(fPt(e),t===void 0)return e;switch(r){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,a){return e.call(t,n,i,a)};}return function(){return e.apply(t,arguments)}}});var Vx=T((Efr,$1e)=>{$1e.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}});var Kv=T((Sfr,G1e)=>{var pPt=Vx();G1e.exports=function(e){if(!pPt(e))throw TypeError(e+" is not an object!");return e}});var $x=T((Tfr,W1e)=>{W1e.exports=function(e){try{return!!e()}catch(t){return!0}}});var $h=T((Ifr,Z1e)=>{Z1e.exports=!$x()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var LB=T((Cfr,K1e)=>{var H1e=Vx(),DB=Hv().document,dPt=H1e(DB)&&H1e(DB.createElement);K1e.exports=function(e){return dPt?DB.createElement(e):{}}});var kB=T((Afr,X1e)=>{X1e.exports=!$h()&&!$x()(function(){return Object.defineProperty(LB()("div"),"a",{get:function(){return 7}}).a!=7})});var NB=T((qfr,Y1e)=>{var mC=Vx();Y1e.exports=function(e,t){if(!mC(e))return e;var r,n;if(t&&typeof(r=e.toString)=="function"&&!mC(n=r.call(e))||typeof(r=e.valueOf)=="function"&&!mC(n=r.call(e))||!t&&typeof(r=e.toString)=="function"&&!mC(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}});var Gx=T(Q1e=>{var J1e=Kv(),mPt=kB(),vPt=NB(),gPt=Object.defineProperty;Q1e.f=$h()?Object.defineProperty:function(t,r,n){if(J1e(t),r=vPt(r,!0),J1e(n),mPt)try{return gPt(t,r,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[r]=n.value),t}});var Wx=T((Mfr,ewe)=>{ewe.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var Zx=T((Ofr,twe)=>{var yPt=Gx(),_Pt=Wx();twe.exports=$h()?function(e,t,r){return yPt.f(e,t,_Pt(1,r))}:function(e,t,r){return e[t]=r,e}});var Xv=T((Rfr,rwe)=>{var xPt={}.hasOwnProperty;rwe.exports=function(e,t){return xPt.call(e,t)}});var Yl=T((Dfr,iwe)=>{var vC=Hv(),FB=ws(),nwe=dC(),wPt=Zx(),bPt=Xv(),gC="prototype",la=function(e,t,r){var n=e&la.F,i=e&la.G,a=e&la.S,h=e&la.P,p=e&la.B,g=e&la.W,b=i?FB:FB[t]||(FB[t]={}),E=b[gC],q=i?vC:a?vC[t]:(vC[t]||{})[gC],P,L,W;i&&(r=t);for(P in r)L=!n&&q&&q[P]!==void 0,!(L&&bPt(b,P))&&(W=L?q[P]:r[P],b[P]=i&&typeof q[P]!="function"?r[P]:p&&L?nwe(W,vC):g&&q[P]==W?function(Q){var V=function($,H,re){if(this instanceof Q){switch(arguments.length){case 0:return new Q;case 1:return new Q($);case 2:return new Q($,H);}return new Q($,H,re)}return Q.apply(this,arguments)};return V[gC]=Q[gC],V}(W):h&&typeof W=="function"?nwe(Function.call,W):W,h&&((b.virtual||(b.virtual={}))[P]=W,e&la.R&&E&&!E[P]&&wPt(E,P,W)))};la.F=1;la.G=2;la.S=4;la.P=8;la.B=16;la.W=32;la.U=64;la.R=128;iwe.exports=la});var zB=T((Lfr,awe)=>{var EPt={}.toString;awe.exports=function(e){return EPt.call(e).slice(8,-1)}});var jB=T((kfr,owe)=>{var SPt=zB();owe.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return SPt(e)=="String"?e.split(""):Object(e)}});var yC=T((Nfr,swe)=>{swe.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}});var Hx=T((Ffr,uwe)=>{var TPt=jB(),IPt=yC();uwe.exports=function(e){return TPt(IPt(e))}});var _C=T((zfr,lwe)=>{var CPt=Math.ceil,APt=Math.floor;lwe.exports=function(e){return isNaN(e=+e)?0:(e>0?APt:CPt)(e)}});var BB=T((jfr,cwe)=>{var qPt=_C(),PPt=Math.min;cwe.exports=function(e){return e>0?PPt(qPt(e),9007199254740991):0}});var fwe=T((Bfr,hwe)=>{var MPt=_C(),OPt=Math.max,RPt=Math.min;hwe.exports=function(e,t){return e=MPt(e),e<0?OPt(e+t,0):RPt(e,t)}});var dwe=T((Ufr,pwe)=>{var DPt=Hx(),LPt=BB(),kPt=fwe();pwe.exports=function(e){return function(t,r,n){var i=DPt(t),a=LPt(i.length),h=kPt(n,a),p;if(e&&r!=r){for(;a>h;)if(p=i[h++],p!=p)return!0}else for(;a>h;h++)if((e||h in i)&&i[h]===r)return e||h||0;return!e&&-1}}});var UB=T((Vfr,mwe)=>{mwe.exports=!0});var VB=T(($fr,_we)=>{var NPt=ws(),vwe=Hv(),gwe="__core-js_shared__",ywe=vwe[gwe]||(vwe[gwe]={});(_we.exports=function(e,t){return ywe[e]||(ywe[e]=t!==void 0?t:{})})("versions",[]).push({version:NPt.version,mode:UB()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var $B=T((Gfr,xwe)=>{var FPt=0,zPt=Math.random();xwe.exports=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++FPt+zPt).toString(36))}});var xC=T((Wfr,bwe)=>{var wwe=VB()("keys"),jPt=$B();bwe.exports=function(e){return wwe[e]||(wwe[e]=jPt(e))}});var Twe=T((Zfr,Swe)=>{var Ewe=Xv(),BPt=Hx(),UPt=dwe()(!1),VPt=xC()("IE_PROTO");Swe.exports=function(e,t){var r=BPt(e),n=0,i=[],a;for(a in r)a!=VPt&&Ewe(r,a)&&i.push(a);for(;t.length>n;)Ewe(r,a=t[n++])&&(~UPt(i,a)||i.push(a));return i}});var GB=T((Hfr,Iwe)=>{Iwe.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var Kx=T((Kfr,Cwe)=>{var $Pt=Twe(),GPt=GB();Cwe.exports=Object.keys||function(t){return $Pt(t,GPt)}});var qwe=T(Awe=>{Awe.f=Object.getOwnPropertySymbols});var wC=T(Pwe=>{Pwe.f={}.propertyIsEnumerable});var Xx=T((Jfr,Mwe)=>{var WPt=yC();Mwe.exports=function(e){return Object(WPt(e))}});var Dwe=T((Qfr,Rwe)=>{"use strict";var ZPt=$h(),Owe=Kx(),HPt=qwe(),KPt=wC(),XPt=Xx(),YPt=jB(),bC=Object.assign;Rwe.exports=!bC||$x()(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(i){t[i]=i}),bC({},e)[r]!=7||Object.keys(bC({},t)).join("")!=n})?function(t,r){for(var n=XPt(t),i=arguments.length,a=1,h=HPt.f,p=KPt.f;i>a;)for(var g=YPt(arguments[a++]),b=h?Owe(g).concat(h(g)):Owe(g),E=b.length,q=0,P;E>q;)P=b[q++],(!ZPt||p.call(g,P))&&(n[P]=g[P]);return n}:bC});var Lwe=T(()=>{var WB=Yl();WB(WB.S+WB.F,"Object",{assign:Dwe()})});var Nwe=T((rpr,kwe)=>{Lwe();kwe.exports=ws().Object.assign});var zwe=T((ipr,Fwe)=>{var JPt=Gx(),QPt=Kv(),eMt=Kx();Fwe.exports=$h()?Object.defineProperties:function(t,r){QPt(t);for(var n=eMt(r),i=n.length,a=0,h;i>a;)JPt.f(t,h=n[a++],r[h]);return t}});var Uwe=T((apr,Bwe)=>{var jwe=Hv().document;Bwe.exports=jwe&&jwe.documentElement});var XB=T((opr,$we)=>{var tMt=Kv(),rMt=zwe(),Vwe=GB(),nMt=xC()("IE_PROTO"),HB=function(){},KB="prototype",EC=function(){var e=LB()("iframe"),t=Vwe.length,r="<",n=">",i;for(e.style.display="none",Uwe().appendChild(e),e.src="javascript:",i=e.contentWindow.document,i.open(),i.write(r+"script"+n+"document.F=Object"+r+"/script"+n),i.close(),EC=i.F;t--;)delete EC[KB][Vwe[t]];return EC()};$we.exports=Object.create||function(t,r){var n;return t!==null?(HB[KB]=tMt(t),n=new HB,HB[KB]=null,n[nMt]=t):n=EC(),r===void 0?n:rMt(n,r)}});var Wwe=T(()=>{var Gwe=Yl();Gwe(Gwe.S,"Object",{create:XB()})});var Hwe=T((lpr,Zwe)=>{Wwe();var iMt=ws().Object;Zwe.exports=function(t,r){return iMt.create(t,r)}});var Ywe=T(Xwe=>{var aMt=wC(),oMt=Wx(),sMt=Hx(),uMt=NB(),lMt=Xv(),cMt=kB(),Kwe=Object.getOwnPropertyDescriptor;Xwe.f=$h()?Kwe:function(t,r){if(t=sMt(t),r=uMt(r,!0),cMt)try{return Kwe(t,r)}catch(n){}if(lMt(t,r))return oMt(!aMt.f.call(t,r),t[r])}});var ebe=T((hpr,Qwe)=>{var hMt=Vx(),fMt=Kv(),Jwe=function(e,t){if(fMt(e),!hMt(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};Qwe.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=dC()(Function.call,Ywe().f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(n){t=!0}return function(i,a){return Jwe(i,a),t?i.__proto__=a:r(i,a),i}}({},!1):void 0),check:Jwe}});var rbe=T(()=>{var tbe=Yl();tbe(tbe.S,"Object",{setPrototypeOf:ebe().set})});var ibe=T((dpr,nbe)=>{rbe();nbe.exports=ws().Object.setPrototypeOf});var sbe=T((ypr,obe)=>{var JB=Yl(),pMt=ws(),dMt=$x();obe.exports=function(e,t){var r=(pMt.Object||{})[e]||Object[e],n={};n[e]=t(r),JB(JB.S+JB.F*dMt(function(){r(1)}),"Object",n)}});var ube=T(()=>{var mMt=Xx(),vMt=Kx();sbe()("keys",function(){return function(t){return vMt(mMt(t))}})});var cbe=T((wpr,lbe)=>{ube();lbe.exports=ws().Object.keys});var ho=T((Epr,SC)=>{(function(){"use strict";var e={}.hasOwnProperty,t="[native code]";function r(){for(var n=[],i=0;i<arguments.length;i++){var a=arguments[i];if(a){var h=typeof a;if(h==="string"||h==="number")n.push(a);else if(Array.isArray(a)){if(a.length){var p=r.apply(null,a);p&&n.push(p)}}else if(h==="object"){if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]")){n.push(a.toString());continue}for(var g in a)e.call(a,g)&&a[g]&&n.push(g)}}}return n.join(" ")}typeof SC!="undefined"&&SC.exports?(r.default=r,SC.exports=r):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return r}):window.classNames=r})()});var IC=T((Ipr,fbe)=>{"use strict";var gMt=function(e,t,r,n,i,a,h,p){if(!e){var g;if(t===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var b=[r,n,i,a,h,p],E=0;g=new Error(t.replace(/%s/g,function(){return b[E++]})),g.name="Invariant Violation"}throw g.framesToPop=1,g}};fbe.exports=gMt});var n3=T(r3=>{"use strict";Object.defineProperty(r3,"__esModule",{value:!0});function vbe(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function gbe(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n!=null?n:null}this.setState(t.bind(this))}function ybe(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}vbe.__suppressDeprecationWarning=!0;gbe.__suppressDeprecationWarning=!0;ybe.__suppressDeprecationWarning=!0;function _Mt(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,i=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?i="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),r!==null||n!==null||i!==null){var a=e.displayName||e.name,h=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+a+" uses "+h+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=vbe,t.componentWillReceiveProps=gbe),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=ybe;var p=t.componentDidUpdate;t.componentDidUpdate=function(b,E,q){var P=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:q;p.call(this,b,E,P)}}return e}r3.polyfill=_Mt});var i3=T((Gpr,wbe)=>{var wMt=$h(),bMt=Kx(),EMt=Hx(),SMt=wC().f;wbe.exports=function(e){return function(t){for(var r=EMt(t),n=bMt(r),i=n.length,a=0,h=[],p;i>a;)p=n[a++],(!wMt||SMt.call(r,p))&&h.push(e?[p,r[p]]:r[p]);return h}}});var Ebe=T(()=>{var bbe=Yl(),TMt=i3()(!0);bbe(bbe.S,"Object",{entries:function(t){return TMt(t)}})});var Tbe=T((Hpr,Sbe)=>{Ebe();Sbe.exports=ws().Object.entries});var a3=T((Kpr,Ibe)=>{Ibe.exports=Tbe()});var t1=T((qC,Obe)=>{"use strict";Object.defineProperty(qC,"__esModule",{value:!0});qC.default=DMt;function DMt(e){function t(n,i,a,h,p,g){var b=h||"<<anonymous>>",E=g||a;if(i[a]==null)return n?new Error("Required "+p+" `"+E+"` was not specified "+("in `"+b+"`.")):null;for(var q=arguments.length,P=Array(q>6?q-6:0),L=6;L<q;L++)P[L-6]=arguments[L];return e.apply(void 0,[i,a,b,p,E].concat(P))}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}Obe.exports=qC.default});var kbe=T(()=>{var Lbe=Yl(),LMt=i3()(!1);Lbe(Lbe.S,"Object",{values:function(t){return LMt(t)}})});var Fbe=T((odr,Nbe)=>{kbe();Nbe.exports=ws().Object.values});var jbe=T((sdr,zbe)=>{zbe.exports=Fbe()});var Vbe=T(Or=>{"use strict";var _i=typeof Symbol=="function"&&Symbol.for,f3=_i?Symbol.for("react.element"):60103,p3=_i?Symbol.for("react.portal"):60106,MC=_i?Symbol.for("react.fragment"):60107,OC=_i?Symbol.for("react.strict_mode"):60108,RC=_i?Symbol.for("react.profiler"):60114,DC=_i?Symbol.for("react.provider"):60109,LC=_i?Symbol.for("react.context"):60110,d3=_i?Symbol.for("react.async_mode"):60111,kC=_i?Symbol.for("react.concurrent_mode"):60111,NC=_i?Symbol.for("react.forward_ref"):60112,FC=_i?Symbol.for("react.suspense"):60113,FMt=_i?Symbol.for("react.suspense_list"):60120,zC=_i?Symbol.for("react.memo"):60115,jC=_i?Symbol.for("react.lazy"):60116,zMt=_i?Symbol.for("react.block"):60121,jMt=_i?Symbol.for("react.fundamental"):60117,BMt=_i?Symbol.for("react.responder"):60118,UMt=_i?Symbol.for("react.scope"):60119;function Lo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case f3:switch(e=e.type,e){case d3:case kC:case MC:case RC:case OC:case FC:return e;default:switch(e=e&&e.$$typeof,e){case LC:case NC:case jC:case zC:case DC:return e;default:return t;}}case p3:return t;}}}function Ube(e){return Lo(e)===kC}Or.AsyncMode=d3;Or.ConcurrentMode=kC;Or.ContextConsumer=LC;Or.ContextProvider=DC;Or.Element=f3;Or.ForwardRef=NC;Or.Fragment=MC;Or.Lazy=jC;Or.Memo=zC;Or.Portal=p3;Or.Profiler=RC;Or.StrictMode=OC;Or.Suspense=FC;Or.isAsyncMode=function(e){return Ube(e)||Lo(e)===d3};Or.isConcurrentMode=Ube;Or.isContextConsumer=function(e){return Lo(e)===LC};Or.isContextProvider=function(e){return Lo(e)===DC};Or.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===f3};Or.isForwardRef=function(e){return Lo(e)===NC};Or.isFragment=function(e){return Lo(e)===MC};Or.isLazy=function(e){return Lo(e)===jC};Or.isMemo=function(e){return Lo(e)===zC};Or.isPortal=function(e){return Lo(e)===p3};Or.isProfiler=function(e){return Lo(e)===RC};Or.isStrictMode=function(e){return Lo(e)===OC};Or.isSuspense=function(e){return Lo(e)===FC};Or.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===MC||e===kC||e===RC||e===OC||e===FC||e===FMt||typeof e=="object"&&e!==null&&(e.$$typeof===jC||e.$$typeof===zC||e.$$typeof===DC||e.$$typeof===LC||e.$$typeof===NC||e.$$typeof===jMt||e.$$typeof===BMt||e.$$typeof===UMt||e.$$typeof===zMt)};Or.typeOf=Lo});var Gbe=T((fdr,$be)=>{"use strict";$be.exports=Vbe()});var Jl=T((BC,Zbe)=>{"use strict";Object.defineProperty(BC,"__esModule",{value:!0});var VMt=Yt(),$Mt=Wbe(VMt),GMt=Gbe(),WMt=t1(),ZMt=Wbe(WMt);function Wbe(e){return e&&e.__esModule?e:{default:e}}function HMt(e,t,r,n,i){var a=e[t];return $Mt.default.isValidElement(a)?new Error("Invalid "+n+" `"+i+"` of type ReactElement "+("supplied to `"+r+"`,expected an element type (a string ")+", component class, or function component)."):(0,GMt.isValidElementType)(a)?null:new Error("Invalid "+n+" `"+i+"` of value `"+a+"` "+("supplied to `"+r+"`, expected an element type (a string ")+", component class, or function component).")}BC.default=(0,ZMt.default)(HMt);Zbe.exports=BC.default});var $C=T((VC,Jbe)=>{"use strict";Object.defineProperty(VC,"__esModule",{value:!0});VC.default=n2t;var e2t=t1(),t2t=r2t(e2t);function r2t(e){return e&&e.__esModule?e:{default:e}}function n2t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(){for(var i=arguments.length,a=Array(i),h=0;h<i;h++)a[h]=arguments[h];var p=null;return t.forEach(function(g){if(p==null){var b=g.apply(void 0,a);b!=null&&(p=b)}}),p}return(0,t2t.default)(n)}Jbe.exports=VC.default});var w3=T((Rdr,rEe)=>{"use strict";var o2t=function(){};rEe.exports=o2t});var ha=T((Ddr,n1)=>{function s2t(e){return e&&e.__esModule?e:{default:e}}n1.exports=s2t,n1.exports.__esModule=!0,n1.exports.default=n1.exports});var iEe=T((WC,nEe)=>{"use strict";WC.__esModule=!0;WC.default=l2t;var u2t=/-(.)/g;function l2t(e){return e.replace(u2t,function(t,r){return r.toUpperCase()})}nEe.exports=WC.default});var b3=T((ZC,aEe)=>{"use strict";var c2t=ha();ZC.__esModule=!0;ZC.default=p2t;var h2t=c2t(iEe()),f2t=/^-ms-/;function p2t(e){return(0,h2t.default)(e.replace(f2t,"ms-"))}aEe.exports=ZC.default});var sEe=T((HC,oEe)=>{"use strict";HC.__esModule=!0;HC.default=m2t;var d2t=/([A-Z])/g;function m2t(e){return e.replace(d2t,"-$1").toLowerCase()}oEe.exports=HC.default});var lEe=T((KC,uEe)=>{"use strict";var v2t=ha();KC.__esModule=!0;KC.default=_2t;var g2t=v2t(sEe()),y2t=/^ms-/;function _2t(e){return(0,g2t.default)(e).replace(y2t,"-ms-")}uEe.exports=KC.default});var hEe=T((XC,cEe)=>{"use strict";var x2t=ha();XC.__esModule=!0;XC.default=S2t;var w2t=x2t(b3()),b2t=/^(top|right|bottom|left)$/,E2t=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function S2t(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(n){var i=e.style;n=(0,w2t.default)(n),n=="float"&&(n="styleFloat");var a=e.currentStyle[n]||null;if(a==null&&i&&i[n]&&(a=i[n]),E2t.test(a)&&!b2t.test(n)){var h=i.left,p=e.runtimeStyle,g=p&&p.left;g&&(p.left=e.currentStyle.left),i.left=n==="fontSize"?"1em":a,a=i.pixelLeft+"px",i.left=h,g&&(p.left=g)}return a}}}cEe.exports=XC.default});var pEe=T((YC,fEe)=>{"use strict";YC.__esModule=!0;YC.default=T2t;function T2t(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}fEe.exports=YC.default});var Uu=T((i1,dEe)=>{"use strict";i1.__esModule=!0;i1.default=void 0;var I2t=!!(typeof window!="undefined"&&window.document&&window.document.createElement);i1.default=I2t;dEe.exports=i1.default});var xEe=T(tr=>{"use strict";var C2t=ha();tr.__esModule=!0;tr.default=tr.animationEnd=tr.animationDelay=tr.animationTiming=tr.animationDuration=tr.animationName=tr.transitionEnd=tr.transitionDuration=tr.transitionDelay=tr.transitionTiming=tr.transitionProperty=tr.transform=void 0;var A2t=C2t(Uu()),QC="transform";tr.transform=QC;var Vu,E3,mEe;tr.animationEnd=mEe;tr.transitionEnd=E3;var S3,T3,I3,C3;tr.transitionDelay=C3;tr.transitionTiming=I3;tr.transitionDuration=T3;tr.transitionProperty=S3;var vEe,gEe,yEe,_Ee;tr.animationDelay=_Ee;tr.animationTiming=yEe;tr.animationDuration=gEe;tr.animationName=vEe;A2t.default&&(JC=P2t(),Vu=JC.prefix,tr.transitionEnd=E3=JC.transitionEnd,tr.animationEnd=mEe=JC.animationEnd,tr.transform=QC=Vu+"-"+QC,tr.transitionProperty=S3=Vu+"-transition-property",tr.transitionDuration=T3=Vu+"-transition-duration",tr.transitionDelay=C3=Vu+"-transition-delay",tr.transitionTiming=I3=Vu+"-transition-timing-function",tr.animationName=vEe=Vu+"-animation-name",tr.animationDuration=gEe=Vu+"-animation-duration",tr.animationTiming=yEe=Vu+"-animation-delay",tr.animationDelay=_Ee=Vu+"-animation-timing-function");var JC,q2t={transform:QC,end:E3,property:S3,timing:I3,delay:C3,duration:T3};tr.default=q2t;function P2t(){for(var e=document.createElement("div").style,t={O:function(b){return"o"+b.toLowerCase()},Moz:function(b){return b.toLowerCase()},Webkit:function(b){return"webkit"+b},ms:function(b){return"MS"+b}},r=Object.keys(t),n,i,a="",h=0;h<r.length;h++){var p=r[h];if(p+"TransitionProperty"in e){a="-"+p.toLowerCase(),n=t[p]("TransitionEnd"),i=t[p]("AnimationEnd");break}}return!n&&"transitionProperty"in e&&(n="transitionend"),!i&&"animationName"in e&&(i="animationend"),e=null,{animationEnd:i,transitionEnd:n,prefix:a}}});var bEe=T((eA,wEe)=>{"use strict";eA.__esModule=!0;eA.default=O2t;var M2t=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function O2t(e){return!!(e&&M2t.test(e))}wEe.exports=eA.default});var SEe=T((tA,EEe)=>{"use strict";var a1=ha();tA.__esModule=!0;tA.default=F2t;var R2t=a1(b3()),A3=a1(lEe()),D2t=a1(hEe()),L2t=a1(pEe()),k2t=xEe(),N2t=a1(bEe());function F2t(e,t,r){var n="",i="",a=t;if(typeof t=="string"){if(r===void 0)return e.style[(0,R2t.default)(t)]||(0,D2t.default)(e).getPropertyValue((0,A3.default)(t));(a={})[t]=r}Object.keys(a).forEach(function(h){var p=a[h];!p&&p!==0?(0,L2t.default)(e,(0,A3.default)(h)):(0,N2t.default)(h)?i+=h+"("+p+") ":n+=(0,A3.default)(h)+": "+p+";"}),i&&(n+=k2t.transform+": "+i+";"),e.style.cssText+=";"+n}EEe.exports=tA.default});var TEe=T(tg=>{"use strict";tg.__esModule=!0;tg.classNamesShape=tg.timeoutsShape=void 0;var kdr=z2t(zr());function z2t(e){return e&&e.__esModule?e:{default:e}}var j2t=null;tg.timeoutsShape=j2t;var B2t=null;tg.classNamesShape=B2t});var CEe=T(po=>{"use strict";po.__esModule=!0;po.default=po.EXITING=po.ENTERED=po.ENTERING=po.EXITED=po.UNMOUNTED=void 0;var U2t=G2t(zr()),q3=IEe(Yt()),V2t=IEe(es()),$2t=n3(),Fdr=TEe();function IEe(e){return e&&e.__esModule?e:{default:e}}function G2t(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}}return t.default=e,t}function W2t(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function Z2t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var o1="unmounted";po.UNMOUNTED=o1;var Mp="exited";po.EXITED=Mp;var Op="entering";po.ENTERING=Op;var ng="entered";po.ENTERED=ng;var P3="exiting";po.EXITING=P3;var $u=function(e){Z2t(t,e);function t(n,i){var a;a=e.call(this,n,i)||this;var h=i.transitionGroup,p=h&&!h.isMounting?n.enter:n.appear,g;return a.appearStatus=null,n.in?p?(g=Mp,a.appearStatus=Op):g=ng:n.unmountOnExit||n.mountOnEnter?g=o1:g=Mp,a.state={status:g},a.nextCallback=null,a}var r=t.prototype;return r.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(i,a){var h=i.in;return h&&a.status===o1?{status:Mp}:null},r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var a=null;if(i!==this.props){var h=this.state.status;this.props.in?h!==Op&&h!==ng&&(a=Op):(h===Op||h===ng)&&(a=P3)}this.updateStatus(!1,a)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,a,h,p;return a=h=p=i,i!=null&&typeof i!="number"&&(a=i.exit,h=i.enter,p=i.appear!==void 0?i.appear:h),{exit:a,enter:h,appear:p}},r.updateStatus=function(i,a){if(i===void 0&&(i=!1),a!==null){this.cancelNextCallback();var h=V2t.default.findDOMNode(this);a===Op?this.performEnter(h,i):this.performExit(h)}else this.props.unmountOnExit&&this.state.status===Mp&&this.setState({status:o1})},r.performEnter=function(i,a){var h=this,p=this.props.enter,g=this.context.transitionGroup?this.context.transitionGroup.isMounting:a,b=this.getTimeouts(),E=g?b.appear:b.enter;if(!a&&!p){this.safeSetState({status:ng},function(){h.props.onEntered(i)});return}this.props.onEnter(i,g),this.safeSetState({status:Op},function(){h.props.onEntering(i,g),h.onTransitionEnd(i,E,function(){h.safeSetState({status:ng},function(){h.props.onEntered(i,g)})})})},r.performExit=function(i){var a=this,h=this.props.exit,p=this.getTimeouts();if(!h){this.safeSetState({status:Mp},function(){a.props.onExited(i)});return}this.props.onExit(i),this.safeSetState({status:P3},function(){a.props.onExiting(i),a.onTransitionEnd(i,p.exit,function(){a.safeSetState({status:Mp},function(){a.props.onExited(i)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,a){a=this.setNextCallback(a),this.setState(i,a)},r.setNextCallback=function(i){var a=this,h=!0;return this.nextCallback=function(p){h&&(h=!1,a.nextCallback=null,i(p))},this.nextCallback.cancel=function(){h=!1},this.nextCallback},r.onTransitionEnd=function(i,a,h){this.setNextCallback(h);var p=a==null&&!this.props.addEndListener;if(!i||p){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(i,this.nextCallback),a!=null&&setTimeout(this.nextCallback,a)},r.render=function(){var i=this.state.status;if(i===o1)return null;var a=this.props,h=a.children,p=W2t(a,["children"]);if(delete p.in,delete p.mountOnEnter,delete p.unmountOnExit,delete p.appear,delete p.enter,delete p.exit,delete p.timeout,delete p.addEndListener,delete p.onEnter,delete p.onEntering,delete p.onEntered,delete p.onExit,delete p.onExiting,delete p.onExited,typeof h=="function")return h(i,p);var g=q3.default.Children.only(h);return q3.default.cloneElement(g,p)},t}(q3.default.Component);$u.contextTypes={transitionGroup:U2t.object};$u.childContextTypes={transitionGroup:function(){}};$u.propTypes={};function rg(){}$u.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:rg,onEntering:rg,onEntered:rg,onExit:rg,onExiting:rg,onExited:rg};$u.UNMOUNTED=0;$u.EXITED=1;$u.ENTERING=2;$u.ENTERED=3;$u.EXITING=4;var H2t=(0,$2t.polyfill)($u);po.default=H2t});var s1=T((rA,AEe)=>{"use strict";rA.__esModule=!0;rA.default=K2t;function K2t(e){return e&&e.ownerDocument||document}AEe.exports=rA.default});var M3=T((nA,qEe)=>{"use strict";var X2t=ha();nA.__esModule=!0;nA.default=J2t;var Y2t=X2t(s1());function J2t(e){e===void 0&&(e=(0,Y2t.default)());try{return e.activeElement}catch(t){}}qEe.exports=nA.default});var l1=T((u1,MEe)=>{"use strict";var Q2t=ha();u1.__esModule=!0;u1.default=void 0;var eOt=Q2t(Uu()),tOt=function(){return eOt.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(e.compareDocumentPosition(t)&16):PEe(e,t)}:PEe}();u1.default=tOt;function PEe(e,t){if(t)do if(t===e)return!0;while(t=t.parentNode);return!1}MEe.exports=u1.default});var R3=T((Rp,DEe)=>{function OEe(e){if(e&&typeof e=="object"){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if(typeof e=="number")return REe[e];var r=String(e),n=ec[r.toLowerCase()];if(n)return n;var n=iA[r.toLowerCase()];if(n)return n;if(r.length===1)return r.charCodeAt(0)}OEe.isEventKey=function(t,r){if(t&&typeof t=="object"){var n=t.which||t.keyCode||t.charCode;if(n==null)return!1;if(typeof r=="string"){var i=ec[r.toLowerCase()];if(i)return i===n;var i=iA[r.toLowerCase()];if(i)return i===n}else if(typeof r=="number")return r===n;return!1}};Rp=DEe.exports=OEe;var ec=Rp.code=Rp.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},iA=Rp.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(_n=97;_n<123;_n++)ec[String.fromCharCode(_n)]=_n-32;for(_n=48;_n<58;_n++)ec[_n-48]=_n;var _n;for(_n=1;_n<13;_n++)ec["f"+_n]=_n+111;for(_n=0;_n<10;_n++)ec["numpad "+_n]=_n+96;var REe=Rp.names=Rp.title={};for(_n in ec)REe[ec[_n]]=_n;for(O3 in iA)ec[O3]=iA[O3];var O3});var kEe=T((aA,LEe)=>{"use strict";Object.defineProperty(aA,"__esModule",{value:!0});aA.default=rOt;function rOt(e){return function(r,n,i,a,h){var p=i||"<<anonymous>>",g=h||n;if(r[n]==null)return new Error("The "+a+" `"+g+"` is required to make "+("`"+p+"` accessible for users of assistive ")+"technologies such as screen readers.");for(var b=arguments.length,E=Array(b>5?b-5:0),q=5;q<b;q++)E[q-5]=arguments[q];return e.apply(void 0,[r,n,i,a,h].concat(E))}}LEe.exports=aA.default});var FEe=T((jdr,NEe)=>{var nOt=_C(),iOt=yC();NEe.exports=function(e){return function(t,r){var n=String(iOt(t)),i=nOt(r),a=n.length,h,p;return i<0||i>=a?e?"":void 0:(h=n.charCodeAt(i),h<55296||h>56319||i+1===a||(p=n.charCodeAt(i+1))<56320||p>57343?e?n.charAt(i):h:e?n.slice(i,i+2):(h-55296<<10)+(p-56320)+65536)}}});var jEe=T((Bdr,zEe)=>{zEe.exports=Zx()});var oA=T((Udr,BEe)=>{BEe.exports={}});var Wh=T((Vdr,VEe)=>{var D3=VB()("wks"),aOt=$B(),L3=Hv().Symbol,UEe=typeof L3=="function",oOt=VEe.exports=function(e){return D3[e]||(D3[e]=UEe&&L3[e]||(UEe?L3:aOt)("Symbol."+e))};oOt.store=D3});var k3=T(($dr,GEe)=>{var sOt=Gx().f,uOt=Xv(),$Ee=Wh()("toStringTag");GEe.exports=function(e,t,r){e&&!uOt(e=r?e:e.prototype,$Ee)&&sOt(e,$Ee,{configurable:!0,value:t})}});var HEe=T((Gdr,ZEe)=>{"use strict";var lOt=XB(),cOt=Wx(),hOt=k3(),WEe={};Zx()(WEe,Wh()("iterator"),function(){return this});ZEe.exports=function(e,t,r){e.prototype=lOt(WEe,{next:cOt(1,r)}),hOt(e,t+" Iterator")}});var YEe=T((Wdr,XEe)=>{var fOt=Xv(),pOt=Xx(),KEe=xC()("IE_PROTO"),dOt=Object.prototype;XEe.exports=Object.getPrototypeOf||function(e){return e=pOt(e),fOt(e,KEe)?e[KEe]:typeof e.constructor=="function"&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?dOt:null}});var iSe=T((Zdr,nSe)=>{"use strict";var JEe=UB(),N3=Yl(),mOt=jEe(),QEe=Zx(),eSe=oA(),vOt=HEe(),gOt=k3(),yOt=YEe(),c1=Wh()("iterator"),F3=!([].keys&&"next"in[].keys()),_Ot="@@iterator",tSe="keys",sA="values",rSe=function(){return this};nSe.exports=function(e,t,r,n,i,a,h){vOt(r,t,n);var p=function(re){if(!F3&&re in q)return q[re];switch(re){case tSe:return function(){return new r(this,re)};case sA:return function(){return new r(this,re)};}return function(){return new r(this,re)}},g=t+" Iterator",b=i==sA,E=!1,q=e.prototype,P=q[c1]||q[_Ot]||i&&q[i],L=P||p(i),W=i?b?p("entries"):L:void 0,Q=t=="Array"&&q.entries||P,V,$,H;if(Q&&(H=yOt(Q.call(new e)),H!==Object.prototype&&H.next&&(gOt(H,g,!0),!JEe&&typeof H[c1]!="function"&&QEe(H,c1,rSe))),b&&P&&P.name!==sA&&(E=!0,L=function(){return P.call(this)}),(!JEe||h)&&(F3||E||!q[c1])&&QEe(q,c1,L),eSe[t]=L,eSe[g]=rSe,i)if(V={values:b?L:p(sA),keys:a?L:p(tSe),entries:W},h)for($ in V)$ in q||mOt(q,$,V[$]);else N3(N3.P+N3.F*(F3||E),t,V);return V}});var aSe=T(()=>{"use strict";var xOt=FEe()(!0);iSe()(String,"String",function(e){this._t=String(e),this._i=0},function(){var e=this._t,t=this._i,r;return t>=e.length?{value:void 0,done:!0}:(r=xOt(e,t),this._i+=r.length,{value:r,done:!1})})});var uSe=T((Xdr,sSe)=>{var oSe=Kv();sSe.exports=function(e,t,r,n){try{return n?t(oSe(r)[0],r[1]):t(r)}catch(a){var i=e.return;throw i!==void 0&&oSe(i.call(e)),a}}});var cSe=T((Ydr,lSe)=>{var wOt=oA(),bOt=Wh()("iterator"),EOt=Array.prototype;lSe.exports=function(e){return e!==void 0&&(wOt.Array===e||EOt[bOt]===e)}});var fSe=T((Jdr,hSe)=>{"use strict";var SOt=Gx(),TOt=Wx();hSe.exports=function(e,t,r){t in e?SOt.f(e,t,TOt(0,r)):e[t]=r}});var dSe=T((Qdr,pSe)=>{var z3=zB(),IOt=Wh()("toStringTag"),COt=z3(function(){return arguments}())=="Arguments",AOt=function(e,t){try{return e[t]}catch(r){}};pSe.exports=function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=AOt(t=Object(e),IOt))=="string"?r:COt?z3(t):(n=z3(t))=="Object"&&typeof t.callee=="function"?"Arguments":n}});var vSe=T((emr,mSe)=>{var qOt=dSe(),POt=Wh()("iterator"),MOt=oA();mSe.exports=ws().getIteratorMethod=function(e){if(e!=null)return e[POt]||e["@@iterator"]||MOt[qOt(e)]}});var _Se=T((tmr,ySe)=>{var B3=Wh()("iterator"),gSe=!1;try{j3=[7][B3](),j3.return=function(){gSe=!0},Array.from(j3,function(){throw 2})}catch(e){}var j3;ySe.exports=function(e,t){if(!t&&!gSe)return!1;var r=!1;try{var n=[7],i=n[B3]();i.next=function(){return{done:r=!0}},n[B3]=function(){return i},e(n)}catch(a){}return r}});var wSe=T(()=>{"use strict";var OOt=dC(),U3=Yl(),ROt=Xx(),DOt=uSe(),LOt=cSe(),kOt=BB(),xSe=fSe(),NOt=vSe();U3(U3.S+U3.F*!_Se()(function(e){Array.from(e)}),"Array",{from:function(t){var r=ROt(t),n=typeof this=="function"?this:Array,i=arguments.length,a=i>1?arguments[1]:void 0,h=a!==void 0,p=0,g=NOt(r),b,E,q,P;if(h&&(a=OOt(a,i>2?arguments[2]:void 0,2)),g!=null&&!(n==Array&&LOt(g)))for(P=g.call(r),E=new n;!(q=P.next()).done;p++)xSe(E,p,h?DOt(P,a,[q.value,p],!0):q.value);else for(b=kOt(r.length),E=new n(b);b>p;p++)xSe(E,p,h?a(r[p],p):r[p]);return E.length=p,E}})});var ESe=T((imr,bSe)=>{aSe();wSe();bSe.exports=ws().Array.from});var TSe=T((amr,SSe)=>{SSe.exports=ESe()});var uA=T((h1,CSe)=>{"use strict";var FOt=ha();h1.__esModule=!0;h1.default=void 0;var zOt=FOt(Uu()),ISe=function(){};zOt.default&&(ISe=function(){if(document.addEventListener)return function(e,t,r,n){return e.addEventListener(t,r,n||!1)};if(document.attachEvent)return function(e,t,r){return e.attachEvent("on"+t,function(n){n=n||window.event,n.target=n.target||n.srcElement,n.currentTarget=e,r.call(e,n)})}}());var jOt=ISe;h1.default=jOt;CSe.exports=h1.default});var lA=T((f1,qSe)=>{"use strict";var BOt=ha();f1.__esModule=!0;f1.default=void 0;var UOt=BOt(Uu()),ASe=function(){};UOt.default&&(ASe=function(){if(document.addEventListener)return function(e,t,r,n){return e.removeEventListener(t,r,n||!1)};if(document.attachEvent)return function(e,t,r){return e.detachEvent("on"+t,r)}}());var VOt=ASe;f1.default=VOt;qSe.exports=f1.default});var V3=T((cA,MSe)=>{"use strict";cA.__esModule=!0;cA.default=function(e,t,r,n){return(0,GOt.default)(e,t,r,n),{remove:function(){(0,ZOt.default)(e,t,r,n)}}};var $Ot=uA(),GOt=PSe($Ot),WOt=lA(),ZOt=PSe(WOt);function PSe(e){return e&&e.__esModule?e:{default:e}}MSe.exports=cA.default});var p1=T((hA,RSe)=>{"use strict";hA.__esModule=!0;hA.default=function(e){return(0,YOt.default)(KOt.default.findDOMNode(e))};var HOt=es(),KOt=OSe(HOt),XOt=s1(),YOt=OSe(XOt);function OSe(e){return e&&e.__esModule?e:{default:e}}RSe.exports=hA.default});var LSe=T((dA,DSe)=>{"use strict";dA.__esModule=!0;var JOt=l1(),QOt=ig(JOt),eRt=zr(),fA=ig(eRt),tRt=Yt(),rRt=ig(tRt),nRt=es(),iRt=ig(nRt),aRt=V3(),$3=ig(aRt),oRt=p1(),sRt=ig(oRt);function ig(e){return e&&e.__esModule?e:{default:e}}function uRt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lRt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function cRt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var hRt=27;function fRt(e){return e.button===0}function pRt(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var pA=function(e){cRt(t,e);function t(r,n){uRt(this,t);var i=lRt(this,e.call(this,r,n));return i.addEventListeners=function(){i.currentEvent=window.event;var a=i.props.event,h=(0,sRt.default)(i);i.documentMouseCaptureListener=(0,$3.default)(h,a,i.handleMouseCapture,!0),i.documentMouseListener=(0,$3.default)(h,a,i.handleMouse),i.documentKeyupListener=(0,$3.default)(h,"keyup",i.handleKeyUp)},i.removeEventListeners=function(){i.documentMouseCaptureListener&&i.documentMouseCaptureListener.remove(),i.documentMouseListener&&i.documentMouseListener.remove(),i.documentKeyupListener&&i.documentKeyupListener.remove()},i.handleMouseCapture=function(a){i.preventMouseRootClose=pRt(a)||!fRt(a)||(0,QOt.default)(iRt.default.findDOMNode(i),a.target)},i.handleMouse=function(a){if(a===i.currentEvent){i.currentEvent=void 0;return}!i.preventMouseRootClose&&i.props.onRootClose&&i.props.onRootClose(a)},i.handleKeyUp=function(a){if(a===i.currentEvent){i.currentEvent=void 0;return}a.keyCode===hRt&&i.props.onRootClose&&i.props.onRootClose(a)},i.preventMouseRootClose=!1,i}return t.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},t.prototype.componentDidUpdate=function(n){!this.props.disabled&&n.disabled?this.addEventListeners():this.props.disabled&&!n.disabled&&this.removeEventListeners()},t.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},t.prototype.render=function(){return this.props.children},t}(rRt.default.Component);pA.displayName="RootCloseWrapper";pA.propTypes={onRootClose:fA.default.func,children:fA.default.element,disabled:fA.default.bool,event:fA.default.oneOf(["click","mousedown"])};pA.defaultProps={event:"click"};dA.default=pA;DSe.exports=dA.default});var QSe=T((wA,JSe)=>{"use strict";wA.__esModule=!0;wA.default=CRt;var IRt=/^[\w-]*$/,n4=Function.prototype.bind.call(Function.prototype.call,[].slice);function CRt(e,t){var r=t[0]==="#",n=t[0]===".",i=r||n?t.slice(1):t,a=IRt.test(i),h;return a?r?(e=e.getElementById?e:document,(h=e.getElementById(i))?[h]:[]):e.getElementsByClassName&&n?n4(e.getElementsByClassName(i)):n4(e.getElementsByTagName(t)):n4(e.querySelectorAll(t))}JSe.exports=wA.default});var rTe=T((bA,tTe)=>{"use strict";var eTe=ha();bA.__esModule=!0;bA.default=PRt;var ARt=eTe(l1()),qRt=eTe(QSe());function PRt(e,t){return function(n){var i=n.currentTarget,a=n.target,h=(0,qRt.default)(i,e);h.some(function(p){return(0,ARt.default)(p,a)})&&t.call(this,n)}}tTe.exports=bA.default});var aTe=T((_1,iTe)=>{"use strict";var i4=ha();_1.__esModule=!0;_1.default=void 0;var MRt=i4(Uu()),ORt=i4(uA()),RRt=i4(lA()),nTe=function(){};MRt.default&&(nTe=function(t,r,n,i){return(0,ORt.default)(t,r,n,i),function(){(0,RRt.default)(t,r,n,i)}});var DRt=nTe;_1.default=DRt;iTe.exports=_1.default});var cTe=T(Zh=>{"use strict";var EA=ha();Zh.__esModule=!0;Zh.default=void 0;var oTe=EA(uA());Zh.on=oTe.default;var sTe=EA(lA());Zh.off=sTe.default;var uTe=EA(rTe());Zh.filter=uTe.default;var lTe=EA(aTe());Zh.listen=lTe.default;var LRt={on:oTe.default,off:sTe.default,filter:uTe.default,listen:lTe.default};Zh.default=LRt});var a4=T((TA,hTe)=>{"use strict";var kRt=ha();TA.__esModule=!0;TA.default=FRt;var NRt=kRt(Uu()),SA;function FRt(e){if((!SA&&SA!==0||e)&&NRt.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),SA=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return SA}hTe.exports=TA.default});var CA=T((IA,pTe)=>{"use strict";Object.defineProperty(IA,"__esModule",{value:!0});var zRt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jRt=Yt(),BRt=fTe(jRt),URt=t1(),VRt=fTe(URt);function fTe(e){return e&&e.__esModule?e:{default:e}}function $Rt(e,t,r,n,i){var a=e[t],h=typeof a=="undefined"?"undefined":zRt(a);return BRt.default.isValidElement(a)?new Error("Invalid "+n+" `"+i+"` of type ReactElement "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(h!=="object"||typeof a.render!="function")&&a.nodeType!==1?new Error("Invalid "+n+" `"+i+"` of value `"+a+"` "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement."):null}IA.default=(0,VRt.default)($Rt);pTe.exports=IA.default});var gTe=T((rvr,vTe)=>{"use strict";var GRt=!1,mTe=function(){};GRt&&(dTe=function(t,r){var n=arguments.length;r=new Array(n>1?n-1:0);for(var i=1;i<n;i++)r[i-1]=arguments[i];var a=0,h="Warning: "+t.replace(/%s/g,function(){return r[a++]});typeof console!="undefined"&&console.error(h);try{throw new Error(h)}catch(p){}},mTe=function(e,t,r){var n=arguments.length;r=new Array(n>2?n-2:0);for(var i=2;i<n;i++)r[i-2]=arguments[i];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||dTe.apply(null,[t].concat(r))});var dTe;vTe.exports=mTe});var xTe=T((AA,_Te)=>{"use strict";Object.defineProperty(AA,"__esModule",{value:!0});AA.default=yTe;var WRt=gTe(),ZRt=HRt(WRt);function HRt(e){return e&&e.__esModule?e:{default:e}}var o4={};function yTe(e,t){return function(n,i,a,h,p){var g=a||"<<anonymous>>",b=p||i;if(n[i]!=null){var E=a+"."+i;(0,ZRt.default)(o4[E],"The "+h+" `"+b+"` of "+("`"+g+"` is deprecated. "+t+".")),o4[E]=!0}for(var q=arguments.length,P=Array(q>5?q-5:0),L=5;L<q;L++)P[L-5]=arguments[L];return e.apply(void 0,[n,i,a,h,p].concat(P))}}function KRt(){o4={}}yTe._resetWarned=KRt;_Te.exports=AA.default});var s4=T((qA,wTe)=>{"use strict";qA.__esModule=!0;qA.default=XRt;function XRt(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}wTe.exports=qA.default});var ETe=T((PA,bTe)=>{"use strict";var YRt=ha();PA.__esModule=!0;PA.default=QRt;var JRt=YRt(s4());function QRt(e,t){e.classList?e.classList.add(t):(0,JRt.default)(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}bTe.exports=PA.default});var ITe=T((nvr,TTe)=>{"use strict";function STe(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}TTe.exports=function(t,r){t.classList?t.classList.remove(r):typeof t.className=="string"?t.className=STe(t.className,r):t.setAttribute("class",STe(t.className&&t.className.baseVal||"",r))}});var PTe=T(Dp=>{"use strict";var u4=ha();Dp.__esModule=!0;Dp.default=void 0;var CTe=u4(ETe());Dp.addClass=CTe.default;var ATe=u4(ITe());Dp.removeClass=ATe.default;var qTe=u4(s4());Dp.hasClass=qTe.default;var eDt={addClass:CTe.default,removeClass:ATe.default,hasClass:qTe.default};Dp.default=eDt});var OTe=T((MA,MTe)=>{"use strict";MA.__esModule=!0;MA.default=tDt;function tDt(e){return e===e.window?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}MTe.exports=MA.default});var l4=T((OA,LTe)=>{"use strict";OA.__esModule=!0;OA.default=sDt;var rDt=OTe(),RTe=DTe(rDt),nDt=s1(),iDt=DTe(nDt);function DTe(e){return e&&e.__esModule?e:{default:e}}function aDt(e){return e&&e.tagName.toLowerCase()==="body"}function oDt(e){var t=(0,iDt.default)(e),r=(0,RTe.default)(t),n=r.innerWidth;if(!n){var i=t.documentElement.getBoundingClientRect();n=i.right-Math.abs(i.left)}return t.body.clientWidth<n}function sDt(e){var t=(0,RTe.default)(e);return t||aDt(e)?oDt(e):e.scrollHeight>e.clientHeight}LTe.exports=OA.default});var NTe=T(x1=>{"use strict";x1.__esModule=!0;x1.ariaHidden=c4;x1.hideSiblings=cDt;x1.showSiblings=hDt;var uDt=["template","script","style"],lDt=function(t){var r=t.nodeType,n=t.tagName;return r===1&&uDt.indexOf(n.toLowerCase())===-1},kTe=function(t,r,n){r=[].concat(r),[].forEach.call(t.children,function(i){r.indexOf(i)===-1&&lDt(i)&&n(i)})};function c4(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function cDt(e,t){kTe(e,t,function(r){return c4(!0,r)})}function hDt(e,t){kTe(e,t,function(r){return c4(!1,r)})}});var BTe=T((DA,jTe)=>{"use strict";DA.__esModule=!0;var fDt=PTe(),FTe=RA(fDt),pDt=SEe(),zTe=RA(pDt),dDt=a4(),mDt=RA(dDt),vDt=l4(),gDt=RA(vDt),h4=NTe();function RA(e){return e&&e.__esModule?e:{default:e}}function yDt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _Dt(e,t){var r=-1;return e.some(function(n,i){if(t(n,i))return r=i,!0}),r}function xDt(e,t){return _Dt(e,function(r){return r.modals.indexOf(t)!==-1})}function wDt(e,t){var r={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(r.paddingRight=parseInt((0,zTe.default)(t,"paddingRight")||0,10)+(0,mDt.default)()+"px"),(0,zTe.default)(t,r)}function bDt(e,t){var r=e.style;Object.keys(r).forEach(function(n){return t.style[n]=r[n]})}var EDt=function e(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.hideSiblingNodes,i=n===void 0?!0:n,a=r.handleContainerOverflow,h=a===void 0?!0:a;yDt(this,e),this.add=function(p,g,b){var E=t.modals.indexOf(p),q=t.containers.indexOf(g);if(E!==-1)return E;if(E=t.modals.length,t.modals.push(p),t.hideSiblingNodes&&(0,h4.hideSiblings)(g,p.modalNode),q!==-1)return t.data[q].modals.push(p),E;var P={modals:[p],classes:b?b.split(/\s+/):[],overflowing:(0,gDt.default)(g)};return t.handleContainerOverflow&&wDt(P,g),P.classes.forEach(FTe.default.addClass.bind(null,g)),t.containers.push(g),t.data.push(P),E},this.remove=function(p){var g=t.modals.indexOf(p);if(g!==-1){var b=xDt(t.data,p),E=t.data[b],q=t.containers[b];E.modals.splice(E.modals.indexOf(p),1),t.modals.splice(g,1),E.modals.length===0?(E.classes.forEach(FTe.default.removeClass.bind(null,q)),t.handleContainerOverflow&&bDt(E,q),t.hideSiblingNodes&&(0,h4.showSiblings)(q,p.modalNode),t.containers.splice(b,1),t.data.splice(b,1)):t.hideSiblingNodes&&(0,h4.ariaHidden)(!1,E.modals[E.modals.length-1].modalNode)}},this.isTopModal=function(p){return!!t.modals.length&&t.modals[t.modals.length-1]===p},this.hideSiblingNodes=i,this.handleContainerOverflow=h,this.modals=[],this.containers=[],this.data=[]};DA.default=EDt;jTe.exports=DA.default});var kA=T((LA,UTe)=>{"use strict";LA.__esModule=!0;LA.default=CDt;var SDt=es(),TDt=IDt(SDt);function IDt(e){return e&&e.__esModule?e:{default:e}}function CDt(e,t){return e=typeof e=="function"?e():e,TDt.default.findDOMNode(e)||t}UTe.exports=LA.default});var KTe=T((NA,HTe)=>{"use strict";NA.__esModule=!0;var ADt=zr(),f4=cg(ADt),qDt=CA(),PDt=cg(qDt),MDt=Yt(),VTe=cg(MDt),ODt=es(),$Te=cg(ODt),RDt=kA(),GTe=cg(RDt),DDt=p1(),WTe=cg(DDt);function cg(e){return e&&e.__esModule?e:{default:e}}function LDt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZTe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function kDt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p4=function(e){kDt(t,e);function t(){var r,n,i;LDt(this,t);for(var a=arguments.length,h=Array(a),p=0;p<a;p++)h[p]=arguments[p];return i=(r=(n=ZTe(this,e.call.apply(e,[this].concat(h))),n),n._mountOverlayTarget=function(){n._overlayTarget||(n._overlayTarget=document.createElement("div"),n._portalContainerNode=(0,GTe.default)(n.props.container,(0,WTe.default)(n).body),n._portalContainerNode.appendChild(n._overlayTarget))},n._unmountOverlayTarget=function(){n._overlayTarget&&(n._portalContainerNode.removeChild(n._overlayTarget),n._overlayTarget=null),n._portalContainerNode=null},n._renderOverlay=function(){var g=n.props.children?VTe.default.Children.only(n.props.children):null;if(g!==null){n._mountOverlayTarget();var b=!n._overlayInstance;n._overlayInstance=$Te.default.unstable_renderSubtreeIntoContainer(n,g,n._overlayTarget,function(){b&&n.props.onRendered&&n.props.onRendered()})}else n._unrenderOverlay(),n._unmountOverlayTarget()},n._unrenderOverlay=function(){n._overlayTarget&&($Te.default.unmountComponentAtNode(n._overlayTarget),n._overlayInstance=null)},n.getMountNode=function(){return n._overlayTarget},r),ZTe(n,i)}return t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.UNSAFE_componentWillReceiveProps=function(n){this._overlayTarget&&n.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,GTe.default)(n.container,(0,WTe.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(VTe.default.Component);p4.displayName="Portal";p4.propTypes={container:f4.default.oneOfType([PDt.default,f4.default.func]),onRendered:f4.default.func};NA.default=p4;HTe.exports=NA.default});var JTe=T((FA,YTe)=>{"use strict";FA.__esModule=!0;var NDt=Uu(),FDt=Hh(NDt),zDt=zr(),d4=Hh(zDt),jDt=CA(),BDt=Hh(jDt),UDt=Yt(),VDt=Hh(UDt),$Dt=es(),m4=Hh($Dt),GDt=kA(),WDt=Hh(GDt),ZDt=p1(),HDt=Hh(ZDt),KDt=KTe(),XDt=Hh(KDt);function Hh(e){return e&&e.__esModule?e:{default:e}}function YDt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XTe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function JDt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v4=function(e){JDt(t,e);function t(){var r,n,i;YDt(this,t);for(var a=arguments.length,h=Array(a),p=0;p<a;p++)h[p]=arguments[p];return i=(r=(n=XTe(this,e.call.apply(e,[this].concat(h))),n),n.getMountNode=function(){return n._portalContainerNode},r),XTe(n,i)}return t.prototype.UNSAFE_componentWillMount=function(){if(FDt.default){var n=this.props.container;typeof n=="function"&&(n=n()),!(n&&!m4.default.findDOMNode(n))&&this.setContainer(n)}},t.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.container!==this.props.container&&this.setContainer(n.container)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.setContainer=function(n){this._portalContainerNode=(0,WDt.default)(n,(0,HDt.default)(this).body)},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?m4.default.createPortal(this.props.children,this._portalContainerNode):null},t}(VDt.default.Component);v4.displayName="Portal";v4.propTypes={container:d4.default.oneOfType([BDt.default,d4.default.func]),onRendered:d4.default.func};FA.default=m4.default.createPortal?v4:XDt.default;YTe.exports=FA.default});var rIe=T((zA,tIe)=>{"use strict";zA.__esModule=!0;var QDt=zr(),eLt=QTe(QDt),tLt=Yt(),rLt=QTe(tLt);function QTe(e){return e&&e.__esModule?e:{default:e}}function nLt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iLt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function aLt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var oLt={children:eLt.default.node},eIe=function(e){aLt(t,e);function t(){return nLt(this,t),iLt(this,e.apply(this,arguments))}return t.prototype.render=function(){return this.props.children},t}(rLt.default.Component);eIe.propTypes=oLt;zA.default=eIe;tIe.exports=zA.default});var iIe=T((jA,nIe)=>{"use strict";jA.__esModule=!0;jA.default=sLt;function sLt(e){var t=!document.addEventListener,r=void 0;return t?(document.attachEvent("onfocusin",e),r=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),r=function(){return document.removeEventListener("focus",e,!0)}),{remove:r}}nIe.exports=jA.default});var dIe=T((UA,pIe)=>{"use strict";UA.__esModule=!0;var uIe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uLt=M3(),g4=Fi(uLt),lLt=l1(),lIe=Fi(lLt),cLt=Uu(),hLt=Fi(cLt),fLt=zr(),Hr=Fi(fLt),pLt=CA(),dLt=Fi(pLt),mLt=xTe(),vLt=Fi(mLt),gLt=Jl(),aIe=Fi(gLt),cIe=Yt(),Kh=Fi(cIe),yLt=es(),_Lt=Fi(yLt),xLt=w3(),wLt=Fi(xLt),bLt=BTe(),hIe=Fi(bLt),ELt=JTe(),fIe=Fi(ELt),SLt=rIe(),TLt=Fi(SLt),ILt=V3(),oIe=Fi(ILt),CLt=iIe(),ALt=Fi(CLt),qLt=kA(),PLt=Fi(qLt),MLt=p1(),y4=Fi(MLt);function Fi(e){return e&&e.__esModule?e:{default:e}}function OLt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sIe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function RLt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DLt=new hIe.default,BA=function(e){RLt(t,e);function t(){var r,n,i;OLt(this,t);for(var a=arguments.length,h=Array(a),p=0;p<a;p++)h[p]=arguments[p];return i=(r=(n=sIe(this,e.call.apply(e,[this].concat(h))),n),LLt.call(n),r),sIe(n,i)}return t.prototype.omitProps=function(n,i){var a=Object.keys(n),h={};return a.map(function(p){Object.prototype.hasOwnProperty.call(i,p)||(h[p]=n[p])}),h},t.prototype.render=function(){var n=this.props,i=n.show,a=n.container,h=n.children,p=n.transition,g=n.backdrop,b=n.className,E=n.style,q=n.onExit,P=n.onExiting,L=n.onEnter,W=n.onEntering,Q=n.onEntered,V=Kh.default.Children.only(h),$=this.omitProps(this.props,t.propTypes),H=i||p&&!this.state.exited;if(!H)return null;var re=V.props,se=re.role,Ie=re.tabIndex;return(se===void 0||Ie===void 0)&&(V=(0,cIe.cloneElement)(V,{role:se===void 0?"document":se,tabIndex:Ie==null?"-1":Ie})),p&&(V=Kh.default.createElement(p,{appear:!0,unmountOnExit:!0,in:i,onExit:q,onExiting:P,onExited:this.handleHidden,onEnter:L,onEntering:W,onEntered:Q},V)),Kh.default.createElement(fIe.default,{ref:this.setMountNode,container:a,onRendered:this.onPortalRendered},Kh.default.createElement("div",uIe({ref:this.setModalNodeRef,role:se||"dialog"},$,{style:E,className:b}),g&&this.renderBackdrop(),Kh.default.createElement(TLt.default,{ref:this.setDialogRef},V)))},t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},t.prototype.UNSAFE_componentWillUpdate=function(n){!this.props.show&&n.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(n){var i=this.props.transition;n.show&&!this.props.show&&!i?this.onHide():!n.show&&this.props.show&&this.onShow()},t.prototype.componentWillUnmount=function(){var n=this.props,i=n.show,a=n.transition;this._isMounted=!1,(i||a&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var n=this.getDialogElement(),i=(0,g4.default)((0,y4.default)(this));n&&!(0,lIe.default)(n,i)&&(this.lastFocus=i,n.hasAttribute("tabIndex")||((0,wLt.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),n.setAttribute("tabIndex",-1)),n.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return _Lt.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(Kh.default.Component);BA.propTypes=uIe({},fIe.default.propTypes,{show:Hr.default.bool,container:Hr.default.oneOfType([dLt.default,Hr.default.func]),onShow:Hr.default.func,onHide:Hr.default.func,backdrop:Hr.default.oneOfType([Hr.default.bool,Hr.default.oneOf(["static"])]),renderBackdrop:Hr.default.func,onEscapeKeyDown:Hr.default.func,onEscapeKeyUp:(0,vLt.default)(Hr.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:Hr.default.func,backdropStyle:Hr.default.object,backdropClassName:Hr.default.string,containerClassName:Hr.default.string,keyboard:Hr.default.bool,transition:aIe.default,backdropTransition:aIe.default,autoFocus:Hr.default.bool,enforceFocus:Hr.default.bool,restoreFocus:Hr.default.bool,onEnter:Hr.default.func,onEntering:Hr.default.func,onEntered:Hr.default.func,onExit:Hr.default.func,onExiting:Hr.default.func,onExited:Hr.default.func,manager:Hr.default.object.isRequired});BA.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:DLt,renderBackdrop:function(t){return Kh.default.createElement("div",t)}};var LLt=function(){var t=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var r=t.props,n=r.backdropStyle,i=r.backdropClassName,a=r.renderBackdrop,h=r.backdropTransition,p=function(E){return t.backdrop=E},g=a({ref:p,style:n,className:i,onClick:t.handleBackdropClick});return h&&(g=Kh.default.createElement(h,{appear:!0,in:t.props.show},g)),g},this.onPortalRendered=function(){t.autoFocus(),t.props.onShow&&t.props.onShow()},this.onShow=function(){var r=(0,y4.default)(t),n=(0,PLt.default)(t.props.container,r.body);t.props.manager.add(t,n,t.props.containerClassName),t._onDocumentKeydownListener=(0,oIe.default)(r,"keydown",t.handleDocumentKeyDown),t._onDocumentKeyupListener=(0,oIe.default)(r,"keyup",t.handleDocumentKeyUp),t._onFocusinListener=(0,ALt.default)(t.enforceFocus)},this.onHide=function(){t.props.manager.remove(t),t._onDocumentKeydownListener.remove(),t._onDocumentKeyupListener.remove(),t._onFocusinListener.remove(),t.props.restoreFocus&&t.restoreLastFocus()},this.setMountNode=function(r){t.mountNode=r&&r.getMountNode()},this.setModalNodeRef=function(r){t.modalNode=r},this.setDialogRef=function(r){t.dialog=r},this.handleHidden=function(){if(t.setState({exited:!0}),t.onHide(),t.props.onExited){var r;(r=t.props).onExited.apply(r,arguments)}},this.handleBackdropClick=function(r){r.target===r.currentTarget&&(t.props.onBackdropClick&&t.props.onBackdropClick(r),t.props.backdrop===!0&&t.props.onHide())},this.handleDocumentKeyDown=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&(t.props.onEscapeKeyDown&&t.props.onEscapeKeyDown(r),t.props.onHide())},this.handleDocumentKeyUp=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&t.props.onEscapeKeyUp&&t.props.onEscapeKeyUp(r)},this.checkForFocus=function(){hLt.default&&(t.lastFocus=(0,g4.default)())},this.enforceFocus=function(){if(!(!t.props.enforceFocus||!t._isMounted||!t.isTopModal())){var r=t.getDialogElement(),n=(0,g4.default)((0,y4.default)(t));r&&!(0,lIe.default)(r,n)&&r.focus()}}};BA.Manager=hIe.default;UA.default=BA;pIe.exports=UA.default});var tkt={};VAe(tkt,{SettingsProvider:()=>QLt,renderAdminApp:()=>ekt});var UIe=De(Yt(),1),VIe=De(es(),1),Agr=De(Jge(),1);var y_e=De(i_e(),1);var XIt=De(d_e(),1);var Lj=(e,t="control-feedback-container")=>{let r=document.getElementById(t);if(r===null){let n=e.getCanvasContainer();r=document.createElement("div"),r.id=t,n.appendChild(r)}return r};var yx=De(v_e(),1);function xp(e){return e!=null}function g_e(e){return typeof e=="string"||e instanceof String}function Fl(e){let t=ia.getLanguageDict();if(t===void 0)throw new Error("Dictionary is undefined.");let r=t[e];return r===void 0?(console.warn(`Translation for key "${e}" was not found in dictionary.`),""):r}var io={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:"en",MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1},ia={axiosApiInstance:null,appendSettings(e){io=Object.assign({},io,e)},getSettings(){return io},getBaseMaps(){return io.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},io.MAPVIEW_PARAMS)},getLanguageDict(){return io.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return io.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},io.TERRAIN_TILES)},getUsername(){return io.USERNAME},isUserAuthenticated(){return io.USER_ISAUTHENTICATED===!0},updateSettings(e){io=e},_initAxiosApiInstance(){let e=io.API_GEOREFERENCE_BASEURL,t=g_e(e)&&e.length===0;if(!xp(e)||t)throw new Error("The URL for the georeference service is not set.");let r={"Dev-Mode-Secret":"","Dev-Mode-Name":""},n=Object.assign({baseURL:e,withCredentials:!0},r?{headers:{get:r,post:r,put:r,delete:r}}:{});this.axiosApiInstance=y_e.default.create(n)},getGeoreferenceApiClient(){return xp(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let e=io.MARKER_URL;if(!xp(e))throw new Error("The marker icon url is not set.");return{id:io.MARKER_IMAGE_ID,url:e}}};var Pn=De(Yt(),1);var Vs={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},xer={9001:Vs.METERS,9002:Vs.FEET,9003:Vs.USFEET,9101:Vs.RADIANS,9102:Vs.DEGREES};var ao={};ao[Vs.RADIANS]=6370997/(2*Math.PI);ao[Vs.DEGREES]=2*Math.PI*6370997/360;ao[Vs.FEET]=.3048;ao[Vs.METERS]=1;ao[Vs.USFEET]=1200/3937;var oo=Vs;var JIt=function(){function e(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return e.prototype.canWrapX=function(){return this.canWrapX_},e.prototype.getCode=function(){return this.code_},e.prototype.getExtent=function(){return this.extent_},e.prototype.getUnits=function(){return this.units_},e.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||ao[this.units_]},e.prototype.getWorldExtent=function(){return this.worldExtent_},e.prototype.getAxisOrientation=function(){return this.axisOrientation_},e.prototype.isGlobal=function(){return this.global_},e.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)},e.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},e.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},e.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)},e.prototype.setWorldExtent=function(t){this.worldExtent_=t},e.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},e.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e}(),TI=JIt;function Wr(e,t,r){return Math.min(Math.max(e,t),r)}var x_e=function(){var e;return"cosh"in Math?e=Math.cosh:e=function(t){var r=Math.exp(t);return(r+1/r)/2},e}(),w_e=function(){var e;return"log2"in Math?e=Math.log2:e=function(t){return Math.log(t)*Math.LOG2E},e}();function b_e(e,t,r,n,i,a){var h=i-r,p=a-n;if(h!==0||p!==0){var g=((e-r)*h+(t-n)*p)/(h*h+p*p);g>1?(r=i,n=a):g>0&&(r+=h*g,n+=p*g)}return zl(e,t,r,n)}function zl(e,t,r,n){var i=r-e,a=n-t;return i*i+a*a}function E_e(e){for(var t=e.length,r=0;r<t;r++){for(var n=r,i=Math.abs(e[r][r]),a=r+1;a<t;a++){var h=Math.abs(e[a][r]);h>i&&(i=h,n=a)}if(i===0)return null;var p=e[n];e[n]=e[r],e[r]=p;for(var g=r+1;g<t;g++)for(var b=-e[g][r]/e[r][r],E=r;E<t+1;E++)r==E?e[g][E]=0:e[g][E]+=b*e[r][E]}for(var q=new Array(t),P=t-1;P>=0;P--){q[P]=e[P][t]/e[P][P];for(var L=P-1;L>=0;L--)e[L][t]-=e[L][P]*q[P]}return q}function Ev(e){return e*Math.PI/180}function $s(e,t){var r=e%t;return r*t<0?r+t:r}function S_e(e,t,r){return e+r*(t-e)}function T_e(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}function _x(e,t){return Math.floor(T_e(e,t))}function xx(e,t){return Math.ceil(T_e(e,t))}var QIt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wx=6378137,Tv=Math.PI*wx,eCt=[-Tv,-Tv,Tv,Tv],tCt=[-180,-85,180,85],II=wx*Math.log(Math.tan(Math.PI/2)),Sv=function(e){QIt(t,e);function t(r){return e.call(this,{code:r,units:oo.METERS,extent:eCt,global:!0,worldExtent:tCt,getPointResolution:function(n,i){return n/x_e(i[1]/wx)}})||this}return t}(TI),Fj=[new Sv("EPSG:3857"),new Sv("EPSG:102100"),new Sv("EPSG:102113"),new Sv("EPSG:900913"),new Sv("http://www.opengis.net/def/crs/EPSG/0/3857"),new Sv("http://www.opengis.net/gml/srs/epsg.xml#3857")];function I_e(e,t,r){var n=e.length,i=r>1?r:2,a=t;a===void 0&&(i>2?a=e.slice():a=new Array(n));for(var h=0;h<n;h+=i){a[h]=Tv*e[h]/180;var p=wx*Math.log(Math.tan(Math.PI*(+e[h+1]+90)/360));p>II?p=II:p<-II&&(p=-II),a[h+1]=p}return a}function C_e(e,t,r){var n=e.length,i=r>1?r:2,a=t;a===void 0&&(i>2?a=e.slice():a=new Array(n));for(var h=0;h<n;h+=i)a[h]=180*e[h]/Tv,a[h+1]=360*Math.atan(Math.exp(e[h+1]/wx))/Math.PI-90;return a}var rCt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nCt=6378137,A_e=[-180,-90,180,90],iCt=Math.PI*nCt/180,wp=function(e){rCt(t,e);function t(r,n){return e.call(this,{code:r,units:oo.DEGREES,extent:A_e,axisOrientation:n,global:!0,metersPerUnit:iCt,worldExtent:A_e})||this}return t}(TI),zj=[new wp("CRS:84"),new wp("EPSG:4326","neu"),new wp("urn:ogc:def:crs:OGC:1.3:CRS84"),new wp("urn:ogc:def:crs:OGC:2:84"),new wp("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new wp("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new wp("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var jj={};function q_e(e){return jj[e]||jj[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function P_e(e,t){jj[e]=t}var Er=typeof Object.assign=="function"?Object.assign:function(e,t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1,i=arguments.length;n<i;++n){var a=arguments[n];if(a!=null)for(var h in a)a.hasOwnProperty(h)&&(r[h]=a[h])}return r};function Pu(e){for(var t in e)delete e[t]}var M_e=typeof Object.values=="function"?Object.values:function(e){var t=[];for(var r in e)t.push(e[r]);return t};function O_e(e){var t;for(t in e)return!1;return!t}var Iv={};function bx(e,t,r){var n=e.getCode(),i=t.getCode();n in Iv||(Iv[n]={}),Iv[n][i]=r}function R_e(e,t){var r;return e in Iv&&t in Iv[e]&&(r=Iv[e][t]),r}var gi={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function or(){return function(){throw new Error("Unimplemented abstract method.")}()}var aCt=0;function Un(e){return e.ol_uid||(e.ol_uid=String(++aCt))}var CI="6.15.1";var oCt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sCt=function(e){oCt(t,e);function t(r){var n=this,i=CI==="latest"?CI:"v"+CI.split("-")[0],a="Assertion failed. See https://openlayers.org/en/"+i+"/doc/errors/#"+r+" for details.";return n=e.call(this,a)||this,n.code=r,n.name="AssertionError",n.message=a,n}return t}(Error),AI=sCt;function kt(e,t){if(!e)throw new AI(t)}function Bj(e){for(var t=so(),r=0,n=e.length;r<n;++r)Sx(t,e[r]);return t}function uCt(e,t,r){var n=Math.min.apply(null,e),i=Math.min.apply(null,t),a=Math.max.apply(null,e),h=Math.max.apply(null,t);return jl(n,i,a,h,r)}function Uj(e,t,r){return r?(r[0]=e[0]-t,r[1]=e[1]-t,r[2]=e[2]+t,r[3]=e[3]+t,r):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function L_e(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function qI(e,t,r){var n,i;return t<e[0]?n=e[0]-t:e[2]<t?n=t-e[2]:n=0,r<e[1]?i=e[1]-r:e[3]<r?i=r-e[3]:i=0,n*n+i*i}function Rh(e,t){return Vj(e,t[0],t[1])}function k_e(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function Vj(e,t,r){return e[0]<=t&&t<=e[2]&&e[1]<=r&&r<=e[3]}function D_e(e,t){var r=e[0],n=e[1],i=e[2],a=e[3],h=t[0],p=t[1],g=gi.UNKNOWN;return h<r?g=g|gi.LEFT:h>i&&(g=g|gi.RIGHT),p<n?g=g|gi.BELOW:p>a&&(g=g|gi.ABOVE),g===gi.UNKNOWN&&(g=gi.INTERSECTING),g}function so(){return[1/0,1/0,-1/0,-1/0]}function jl(e,t,r,n,i){return i?(i[0]=e,i[1]=t,i[2]=r,i[3]=n,i):[e,t,r,n]}function Cv(e){return jl(1/0,1/0,-1/0,-1/0,e)}function N_e(e,t){var r=e[0],n=e[1];return jl(r,n,r,n,t)}function F_e(e,t,r,n,i){var a=Cv(i);return $j(a,e,t,r,n)}function Ex(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function z_e(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function Sx(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function $j(e,t,r,n,i){for(;r<n;r+=i)lCt(e,t[r],t[r+1]);return e}function lCt(e,t,r){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],r),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],r)}function PI(e,t){var r;return r=t(Av(e)),r||(r=t(qv(e)),r)||(r=t(Pv(e)),r)||(r=t(vs(e)),r)?r:!1}function Tx(e){var t=0;return Cx(e)||(t=Br(e)*ei(e)),t}function Av(e){return[e[0],e[1]]}function qv(e){return[e[2],e[1]]}function Bl(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function j_e(e,t){var r;return t==="bottom-left"?r=Av(e):t==="bottom-right"?r=qv(e):t==="top-left"?r=vs(e):t==="top-right"?r=Pv(e):kt(!1,13),r}function Ix(e,t,r,n,i){var a=MI(e,t,r,n),h=a[0],p=a[1],g=a[2],b=a[3],E=a[4],q=a[5],P=a[6],L=a[7];return jl(Math.min(h,g,E,P),Math.min(p,b,q,L),Math.max(h,g,E,P),Math.max(p,b,q,L),i)}function MI(e,t,r,n){var i=t*n[0]/2,a=t*n[1]/2,h=Math.cos(r),p=Math.sin(r),g=i*h,b=i*p,E=a*h,q=a*p,P=e[0],L=e[1];return[P-g+q,L-b-E,P-g-q,L-b+E,P+g-q,L+b+E,P+g+q,L+b-E,P-g+q,L-b-E]}function ei(e){return e[3]-e[1]}function Dh(e,t,r){var n=r||so();return bp(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):Cv(n),n}function vs(e){return[e[0],e[3]]}function Pv(e){return[e[2],e[3]]}function Br(e){return e[2]-e[0]}function bp(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function Cx(e){return e[2]<e[0]||e[3]<e[1]}function B_e(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function U_e(e,t,r){var n=!1,i=D_e(e,t),a=D_e(e,r);if(i===gi.INTERSECTING||a===gi.INTERSECTING)n=!0;else{var h=e[0],p=e[1],g=e[2],b=e[3],E=t[0],q=t[1],P=r[0],L=r[1],W=(L-q)/(P-E),Q=void 0,V=void 0;a&gi.ABOVE&&!(i&gi.ABOVE)&&(Q=P-(L-b)/W,n=Q>=h&&Q<=g),!n&&a&gi.RIGHT&&!(i&gi.RIGHT)&&(V=L-(P-g)*W,n=V>=p&&V<=b),!n&&a&gi.BELOW&&!(i&gi.BELOW)&&(Q=P-(L-p)/W,n=Q>=h&&Q<=g),!n&&a&gi.LEFT&&!(i&gi.LEFT)&&(V=L-(P-h)*W,n=V>=p&&V<=b)}return n}function V_e(e,t,r,n){var i=[];if(n>1)for(var a=e[2]-e[0],h=e[3]-e[1],p=0;p<n;++p)i.push(e[0]+a*p/n,e[1],e[2],e[1]+h*p/n,e[2]-a*p/n,e[3],e[0],e[3]-h*p/n);else i=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]];t(i,i,2);for(var g=[],b=[],p=0,E=i.length;p<E;p+=2)g.push(i[p]),b.push(i[p+1]);return uCt(g,b,r)}function $_e(e,t){for(var r=(""+e).split("."),n=(""+t).split("."),i=0;i<Math.max(r.length,n.length);i++){var a=parseInt(r[i]||"0",10),h=parseInt(n[i]||"0",10);if(a>h)return 1;if(h>a)return-1}return 0}function G_e(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function Ep(e,t){for(var r=!0,n=e.length-1;n>=0;--n)if(e[n]!=t[n]){r=!1;break}return r}function Mv(e,t){var r=Math.cos(t),n=Math.sin(t),i=e[0]*r-e[1]*n,a=e[1]*r+e[0]*n;return e[0]=i,e[1]=a,e}function W_e(e,t){return e[0]*=t,e[1]*=t,e}function Z_e(e,t){if(t.canWrapX()){var r=Br(t.getExtent()),n=H_e(e,t,r);n&&(e[0]-=n*r)}return e}function H_e(e,t,r){var n=t.getExtent(),i=0;if(t.canWrapX()&&(e[0]<n[0]||e[0]>n[2])){var a=r||Br(n);i=Math.floor((e[0]-n[0])/a)}return i}var cCt=6371008.8;function Gj(e,t,r){var n=r||cCt,i=Ev(e[1]),a=Ev(t[1]),h=(a-i)/2,p=Ev(t[0]-e[0])/2,g=Math.sin(h)*Math.sin(h)+Math.sin(p)*Math.sin(p)*Math.cos(i)*Math.cos(a);return 2*n*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))}var Wj=!0;function X_e(e){var t=e===void 0?!0:e;Wj=!t}function Zj(e,t,r){var n;if(t!==void 0){for(var i=0,a=e.length;i<a;++i)t[i]=e[i];n=t}else n=e.slice();return n}function Y_e(e,t,r){if(t!==void 0&&e!==t){for(var n=0,i=e.length;n<i;++n)t[n]=e[n];e=t}return e}function hCt(e){P_e(e.getCode(),e),bx(e,e,Zj)}function fCt(e){e.forEach(hCt)}function Li(e){return typeof e=="string"?q_e(e):e||null}function Hj(e,t,r,n){e=Li(e);var i,a=e.getPointResolutionFunc();if(a){if(i=a(t,r),n&&n!==e.getUnits()){var h=e.getMetersPerUnit();h&&(i=i*h/ao[n])}}else{var p=e.getUnits();if(p==oo.DEGREES&&!n||n==oo.DEGREES)i=t;else{var g=Kj(e,Li("EPSG:4326"));if(g===Y_e&&p!==oo.DEGREES)i=t*e.getMetersPerUnit();else{var b=[r[0]-t/2,r[1],r[0]+t/2,r[1],r[0],r[1]-t/2,r[0],r[1]+t/2];b=g(b,b,2);var E=Gj(b.slice(0,2),b.slice(2,4)),q=Gj(b.slice(4,6),b.slice(6,8));i=(E+q)/2}var h=n?ao[n]:e.getMetersPerUnit();h!==void 0&&(i/=h)}}return i}function K_e(e){fCt(e),e.forEach(function(t){e.forEach(function(r){t!==r&&bx(t,r,Zj)})})}function pCt(e,t,r,n){e.forEach(function(i){t.forEach(function(a){bx(i,a,r),bx(a,i,n)})})}function OI(e,t){return e?typeof e=="string"?Li(e):e:Li(t)}function Lh(e,t){if(e===t)return!0;var r=e.getUnits()===t.getUnits();if(e.getCode()===t.getCode())return r;var n=Kj(e,t);return n===Zj&&r}function Kj(e,t){var r=e.getCode(),n=t.getCode(),i=R_e(r,n);return i||(i=Y_e),i}function Sp(e,t){var r=Li(e),n=Li(t);return Kj(r,n)}function Ov(e,t,r){var n=Sp(t,r);return n(e,void 0,e.length)}function kh(e,t,r,n){var i=Sp(t,r);return V_e(e,i,void 0,n)}var Ul=null;function J_e(){return Ul}function Ax(e,t){return Ul?Ov(e,t,Ul):e}function Gs(e,t){return Ul?Ov(e,Ul,t):(Wj&&!Ep(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(Wj=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e)}function Q_e(e,t){return Ul?kh(e,t,Ul):e}function Nh(e,t){return Ul?kh(e,Ul,t):e}function dCt(){K_e(Fj),K_e(zj),pCt(zj,Fj,I_e,C_e)}dCt();var Wv=De(Yt(),1),Ws=De(zr(),1);var gCt=function(){function e(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return e.prototype.preventDefault=function(){this.defaultPrevented=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e}();var aa=gCt;var Vl={PROPERTYCHANGE:"propertychange"};var yCt=function(){function e(){this.disposed=!1}return e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},e.prototype.disposeInternal=function(){},e}(),Rv=yCt;function qx(e,t){return e>t?1:e<t?-1:0}function Dv(e,t,r){var n=e.length;if(e[0]<=t)return 0;if(t<=e[n-1])return n-1;var i=void 0;if(r>0){for(i=1;i<n;++i)if(e[i]<t)return i-1}else if(r<0){for(i=1;i<n;++i)if(e[i]<=t)return i}else for(i=1;i<n;++i){if(e[i]==t)return i;if(e[i]<t)return typeof r=="function"?r(t,e[i-1],e[i])>0?i-1:i:e[i-1]-t<t-e[i]?i-1:i}return n-1}function s0e(e,t){for(var r=Array.isArray(t)?t:[t],n=r.length,i=0;i<n;i++)e[e.length]=r[i]}function Lv(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function u0e(e,t,r){var n=t||qx;return e.every(function(i,a){if(a===0)return!0;var h=n(e[a-1],i);return!(h>0||r&&h===0)})}function Fh(){return!0}function $l(){return!1}function Gl(){}function l0e(e){var t=!1,r,n,i;return function(){var a=Array.prototype.slice.call(arguments);return(!t||this!==i||!Lv(a,n))&&(t=!0,i=this,n=a,r=e.apply(this,arguments)),r}}var _Ct=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xCt=function(e){_Ct(t,e);function t(r){var n=e.call(this)||this;return n.eventTarget_=r,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return t.prototype.addEventListener=function(r,n){if(!(!r||!n)){var i=this.listeners_||(this.listeners_={}),a=i[r]||(i[r]=[]);a.indexOf(n)===-1&&a.push(n)}},t.prototype.dispatchEvent=function(r){var n=typeof r=="string",i=n?r:r.type,a=this.listeners_&&this.listeners_[i];if(a){var h=n?new aa(r):r;h.target||(h.target=this.eventTarget_||this);var p=this.dispatching_||(this.dispatching_={}),g=this.pendingRemovals_||(this.pendingRemovals_={});i in p||(p[i]=0,g[i]=0),++p[i];for(var b,E=0,q=a.length;E<q;++E)if("handleEvent"in a[E]?b=a[E].handleEvent(h):b=a[E].call(this,h),b===!1||h.propagationStopped){b=!1;break}if(--p[i]===0){var P=g[i];for(delete g[i];P--;)this.removeEventListener(i,Gl);delete p[i]}return b}},t.prototype.disposeInternal=function(){this.listeners_&&Pu(this.listeners_)},t.prototype.getListeners=function(r){return this.listeners_&&this.listeners_[r]||void 0},t.prototype.hasListener=function(r){return this.listeners_?r?r in this.listeners_:Object.keys(this.listeners_).length>0:!1},t.prototype.removeEventListener=function(r,n){var i=this.listeners_&&this.listeners_[r];if(i){var a=i.indexOf(n);a!==-1&&(this.pendingRemovals_&&r in this.pendingRemovals_?(i[a]=Gl,++this.pendingRemovals_[r]):(i.splice(a,1),i.length===0&&delete this.listeners_[r]))}},t}(Rv),Mu=xCt;var dt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Zt(e,t,r,n,i){if(n&&n!==e&&(r=r.bind(n)),i){var a=r;r=function(){e.removeEventListener(t,r),a.apply(this,arguments)}}var h={target:e,type:t,listener:r};return e.addEventListener(t,r),h}function kv(e,t,r,n){return Zt(e,t,r,n,!0)}function gr(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Pu(e))}var wCt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),RI=function(e){wCt(t,e);function t(){var r=e.call(this)||this;return r.on=r.onInternal,r.once=r.onceInternal,r.un=r.unInternal,r.revision_=0,r}return t.prototype.changed=function(){++this.revision_,this.dispatchEvent(dt.CHANGE)},t.prototype.getRevision=function(){return this.revision_},t.prototype.onInternal=function(r,n){if(Array.isArray(r)){for(var i=r.length,a=new Array(i),h=0;h<i;++h)a[h]=Zt(this,r[h],n);return a}else return Zt(this,r,n)},t.prototype.onceInternal=function(r,n){var i;if(Array.isArray(r)){var a=r.length;i=new Array(a);for(var h=0;h<a;++h)i[h]=kv(this,r[h],n)}else i=kv(this,r,n);return n.ol_key=i,i},t.prototype.unInternal=function(r,n){var i=n.ol_key;if(i)bCt(i);else if(Array.isArray(r))for(var a=0,h=r.length;a<h;++a)this.removeEventListener(r[a],n);else this.removeEventListener(r,n)},t}(Mu);RI.prototype.on;RI.prototype.once;RI.prototype.un;function bCt(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;++t)gr(e[t]);else gr(e)}var DI=RI;var h0e=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),c0e=function(e){h0e(t,e);function t(r,n,i){var a=e.call(this,r)||this;return a.key=n,a.oldValue=i,a}return t}(aa);var ECt=function(e){h0e(t,e);function t(r){var n=e.call(this)||this;return n.on,n.once,n.un,Un(n),n.values_=null,r!==void 0&&n.setProperties(r),n}return t.prototype.get=function(r){var n;return this.values_&&this.values_.hasOwnProperty(r)&&(n=this.values_[r]),n},t.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},t.prototype.getProperties=function(){return this.values_&&Er({},this.values_)||{}},t.prototype.hasProperties=function(){return!!this.values_},t.prototype.notify=function(r,n){var i;i="change:".concat(r),this.hasListener(i)&&this.dispatchEvent(new c0e(i,r,n)),i=Vl.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new c0e(i,r,n))},t.prototype.addChangeListener=function(r,n){this.addEventListener("change:".concat(r),n)},t.prototype.removeChangeListener=function(r,n){this.removeEventListener("change:".concat(r),n)},t.prototype.set=function(r,n,i){var a=this.values_||(this.values_={});if(i)a[r]=n;else{var h=a[r];a[r]=n,h!==n&&this.notify(r,h)}},t.prototype.setProperties=function(r,n){for(var i in r)this.set(i,r[i],n)},t.prototype.applyProperties=function(r){r.values_&&Er(this.values_||(this.values_={}),r.values_)},t.prototype.unset=function(r,n){if(this.values_&&r in this.values_){var i=this.values_[r];delete this.values_[r],O_e(this.values_)&&(this.values_=null),n||this.notify(r,i)}},t}(DI),yi=ECt;var Xj={ACTIVE:"active"};function Yj(e){return Math.pow(e,3)}function gs(e){return 1-Yj(1-e)}function f0e(e){return 3*e*e-2*e*e*e}function p0e(e){return e}var SCt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TCt=function(e){SCt(t,e);function t(r){var n=e.call(this)||this;return n.on,n.once,n.un,r&&r.handleEvent&&(n.handleEvent=r.handleEvent),n.map_=null,n.setActive(!0),n}return t.prototype.getActive=function(){return this.get(Xj.ACTIVE)},t.prototype.getMap=function(){return this.map_},t.prototype.handleEvent=function(r){return!0},t.prototype.setActive=function(r){this.set(Xj.ACTIVE,r)},t.prototype.setMap=function(r){this.map_=r},t}(yi);function d0e(e,t,r){var n=e.getCenterInternal();if(n){var i=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:r!==void 0?r:250,easing:p0e,center:e.getConstrainedCenter(i)})}}function Nv(e,t,r,n){var i=e.getZoom();if(i!==void 0){var a=e.getConstrainedZoom(i+t),h=e.getResolutionForZoom(a);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:h,anchor:r,duration:n!==void 0?n:250,easing:gs})}}var Ou=TCt;var Zr={SINGLECLICK:"singleclick",CLICK:dt.CLICK,DBLCLICK:dt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var ICt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),CCt=function(e){ICt(t,e);function t(r){var n=this,i=r||{};return n=e.call(this,i)||this,i.handleDownEvent&&(n.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(n.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(n.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(n.handleUpEvent=i.handleUpEvent),i.stopDown&&(n.stopDown=i.stopDown),n.handlingDownUpSequence=!1,n.targetPointers=[],n}return t.prototype.getPointerCount=function(){return this.targetPointers.length},t.prototype.handleDownEvent=function(r){return!1},t.prototype.handleDragEvent=function(r){},t.prototype.handleEvent=function(r){if(!r.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(r),this.handlingDownUpSequence){if(r.type==Zr.POINTERDRAG)this.handleDragEvent(r),r.originalEvent.preventDefault();else if(r.type==Zr.POINTERUP){var i=this.handleUpEvent(r);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(r.type==Zr.POINTERDOWN){var a=this.handleDownEvent(r);this.handlingDownUpSequence=a,n=this.stopDown(a)}else r.type==Zr.POINTERMOVE&&this.handleMoveEvent(r);return!n},t.prototype.handleMoveEvent=function(r){},t.prototype.handleUpEvent=function(r){return!1},t.prototype.stopDown=function(r){return r},t.prototype.updateTrackedPointers_=function(r){r.activePointers&&(this.targetPointers=r.activePointers)},t}(Ou);function Fv(e){for(var t=e.length,r=0,n=0,i=0;i<t;i++)r+=e[i].clientX,n+=e[i].clientY;return[r/t,n/t]}var Ru=CCt;var oa={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};var zh=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",m0e=zh.indexOf("firefox")!==-1,ACt=zh.indexOf("safari")!==-1&&zh.indexOf("chrom")==-1,Htr=ACt&&!!(zh.indexOf("version/15.4")>=0||zh.match(/cpu (os|iphone os) 15_4 like mac os x/)),v0e=zh.indexOf("webkit")!==-1&&zh.indexOf("edge")==-1,g0e=zh.indexOf("macintosh")!==-1,LI=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,kI=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,y0e=typeof Image!="undefined"&&Image.prototype.decode,NI=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(r){}return e}();var Jtr=new Array(6);function Wl(){return[1,0,0,1,0,0]}function ki(e,t){var r=t[0],n=t[1];return t[0]=e[0]*r+e[2]*n+e[4],t[1]=e[1]*r+e[3]*n+e[5],t}function Zl(e,t,r,n,i,a,h,p){var g=Math.sin(a),b=Math.cos(a);return e[0]=n*b,e[1]=i*g,e[2]=-n*g,e[3]=i*b,e[4]=h*n*b-p*n*g+t,e[5]=h*i*g+p*i*b+r,e}function FI(e,t){var r=qCt(t);kt(r!==0,32);var n=t[0],i=t[1],a=t[2],h=t[3],p=t[4],g=t[5];return e[0]=h/r,e[1]=-i/r,e[2]=-a/r,e[3]=n/r,e[4]=(a*g-h*p)/r,e[5]=-(n*g-i*p)/r,e}function qCt(e){return e[0]*e[3]-e[1]*e[2]}var _0e;function x0e(e){var t="matrix("+e.join(", ")+")";if(kI)return t;var r=_0e||(_0e=document.createElement("div"));return r.style.transform=t,r.style.transform}function Jj(e,t,r,n,i,a){for(var h=a||[],p=0,g=t;g<r;g+=n){var b=e[g],E=e[g+1];h[p++]=i[0]*b+i[2]*E+i[4],h[p++]=i[1]*b+i[3]*E+i[5]}return a&&h.length!=p&&(h.length=p),h}function w0e(e,t,r,n,i,a,h){for(var p=h||[],g=Math.cos(i),b=Math.sin(i),E=a[0],q=a[1],P=0,L=t;L<r;L+=n){var W=e[L]-E,Q=e[L+1]-q;p[P++]=E+W*g-Q*b,p[P++]=q+W*b+Q*g;for(var V=L+2;V<L+n;++V)p[P++]=e[V]}return h&&p.length!=P&&(p.length=P),p}function b0e(e,t,r,n,i,a,h,p){for(var g=p||[],b=h[0],E=h[1],q=0,P=t;P<r;P+=n){var L=e[P]-b,W=e[P+1]-E;g[q++]=b+i*L,g[q++]=E+a*W;for(var Q=P+2;Q<P+n;++Q)g[q++]=e[Q]}return p&&g.length!=q&&(g.length=q),g}function E0e(e,t,r,n,i,a,h){for(var p=h||[],g=0,b=t;b<r;b+=n){p[g++]=e[b]+i,p[g++]=e[b+1]+a;for(var E=b+2;E<b+n;++E)p[g++]=e[E]}return h&&p.length!=g&&(p.length=g),p}var PCt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),S0e=Wl(),MCt=function(e){PCt(t,e);function t(){var r=e.call(this)||this;return r.extent_=so(),r.extentRevision_=-1,r.simplifiedGeometryMaxMinSquaredTolerance=0,r.simplifiedGeometryRevision=0,r.simplifyTransformedInternal=l0e(function(n,i,a){if(!a)return this.getSimplifiedGeometry(i);var h=this.clone();return h.applyTransform(a),h.getSimplifiedGeometry(i)}),r}return t.prototype.simplifyTransformed=function(r,n){return this.simplifyTransformedInternal(this.getRevision(),r,n)},t.prototype.clone=function(){return or()},t.prototype.closestPointXY=function(r,n,i,a){return or()},t.prototype.containsXY=function(r,n){var i=this.getClosestPoint([r,n]);return i[0]===r&&i[1]===n},t.prototype.getClosestPoint=function(r,n){var i=n||[NaN,NaN];return this.closestPointXY(r[0],r[1],i,1/0),i},t.prototype.intersectsCoordinate=function(r){return this.containsXY(r[0],r[1])},t.prototype.computeExtent=function(r){return or()},t.prototype.getExtent=function(r){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&Cv(n),this.extentRevision_=this.getRevision()}return B_e(this.extent_,r)},t.prototype.rotate=function(r,n){or()},t.prototype.scale=function(r,n,i){or()},t.prototype.simplify=function(r){return this.getSimplifiedGeometry(r*r)},t.prototype.getSimplifiedGeometry=function(r){return or()},t.prototype.getType=function(){return or()},t.prototype.applyTransform=function(r){or()},t.prototype.intersectsExtent=function(r){return or()},t.prototype.translate=function(r,n){or()},t.prototype.transform=function(r,n){var i=Li(r),a=i.getUnits()==oo.TILE_PIXELS?function(h,p,g){var b=i.getExtent(),E=i.getWorldExtent(),q=ei(E)/ei(b);return Zl(S0e,E[0],E[3],q,-q,0,0,0),Jj(h,0,h.length,g,S0e,p),Sp(i,n)(h,p,g)}:Sp(i,n);return this.applyTransform(a),this},t}(yi),T0e=MCt;var OCt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),RCt=function(e){OCt(t,e);function t(){var r=e.call(this)||this;return r.layout=oa.XY,r.stride=2,r.flatCoordinates=null,r}return t.prototype.computeExtent=function(r){return F_e(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r)},t.prototype.getCoordinates=function(){return or()},t.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.getFlatCoordinates=function(){return this.flatCoordinates},t.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},t.prototype.getLayout=function(){return this.layout},t.prototype.getSimplifiedGeometry=function(r){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),r<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&r<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(r),i=n.getFlatCoordinates();return i.length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=r,this)},t.prototype.getSimplifiedGeometryInternal=function(r){return this},t.prototype.getStride=function(){return this.stride},t.prototype.setFlatCoordinates=function(r,n){this.stride=I0e(r),this.layout=r,this.flatCoordinates=n},t.prototype.setCoordinates=function(r,n){or()},t.prototype.setLayout=function(r,n,i){var a;if(r)a=I0e(r);else{for(var h=0;h<i;++h)if(n.length===0){this.layout=oa.XY,this.stride=2;return}else n=n[0];a=n.length,r=DCt(a)}this.layout=r,this.stride=a},t.prototype.applyTransform=function(r){this.flatCoordinates&&(r(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},t.prototype.rotate=function(r,n){var i=this.getFlatCoordinates();if(i){var a=this.getStride();w0e(i,0,i.length,a,r,n,i),this.changed()}},t.prototype.scale=function(r,n,i){var a=n;a===void 0&&(a=r);var h=i;h||(h=Bl(this.getExtent()));var p=this.getFlatCoordinates();if(p){var g=this.getStride();b0e(p,0,p.length,g,r,a,h,p),this.changed()}},t.prototype.translate=function(r,n){var i=this.getFlatCoordinates();if(i){var a=this.getStride();E0e(i,0,i.length,a,r,n,i),this.changed()}},t}(T0e);function DCt(e){var t;return e==2?t=oa.XY:e==3?t=oa.XYZ:e==4&&(t=oa.XYZM),t}function I0e(e){var t;return e==oa.XY?t=2:e==oa.XYZ||e==oa.XYM?t=3:e==oa.XYZM&&(t=4),t}var zv=RCt;function C0e(e,t,r,n,i,a,h){var p=e[t],g=e[t+1],b=e[r]-p,E=e[r+1]-g,q;if(b===0&&E===0)q=t;else{var P=((i-p)*b+(a-g)*E)/(b*b+E*E);if(P>1)q=r;else if(P>0){for(var L=0;L<n;++L)h[L]=S_e(e[t+L],e[r+L],P);h.length=n;return}else q=t}for(var L=0;L<n;++L)h[L]=e[q+L];h.length=n}function Qj(e,t,r,n,i){var a=e[t],h=e[t+1];for(t+=n;t<r;t+=n){var p=e[t],g=e[t+1],b=zl(a,h,p,g);b>i&&(i=b),a=p,h=g}return i}function A0e(e,t,r,n,i){for(var a=0,h=r.length;a<h;++a){var p=r[a];i=Qj(e,t,p,n,i),t=p}return i}function eB(e,t,r,n,i,a,h,p,g,b,E){if(t==r)return b;var q,P;if(i===0)if(P=zl(h,p,e[t],e[t+1]),P<b){for(q=0;q<n;++q)g[q]=e[t+q];return g.length=n,P}else return b;for(var L=E||[NaN,NaN],W=t+n;W<r;)if(C0e(e,W-n,W,n,h,p,L),P=zl(h,p,L[0],L[1]),P<b){for(b=P,q=0;q<n;++q)g[q]=L[q];g.length=n,W+=n}else W+=n*Math.max((Math.sqrt(P)-Math.sqrt(b))/i|0,1);if(a&&(C0e(e,r-n,t,n,h,p,L),P=zl(h,p,L[0],L[1]),P<b)){for(b=P,q=0;q<n;++q)g[q]=L[q];g.length=n}return b}function q0e(e,t,r,n,i,a,h,p,g,b,E){for(var q=E||[NaN,NaN],P=0,L=r.length;P<L;++P){var W=r[P];b=eB(e,t,W,n,i,a,h,p,g,b,q),t=W}return b}function P0e(e,t,r,n){for(var i=0,a=r.length;i<a;++i)e[t++]=r[i];return t}function tB(e,t,r,n){for(var i=0,a=r.length;i<a;++i)for(var h=r[i],p=0;p<n;++p)e[t++]=h[p];return t}function M0e(e,t,r,n,i){for(var a=i||[],h=0,p=0,g=r.length;p<g;++p){var b=tB(e,t,r[p],n);a[h++]=b,t=b}return a.length=h,a}function O0e(e,t,r,n,i,a,h){var p=(r-t)/n;if(p<3){for(;t<r;t+=n)a[h++]=e[t],a[h++]=e[t+1];return h}var g=new Array(p);g[0]=1,g[p-1]=1;for(var b=[t,r-n],E=0;b.length>0;){for(var q=b.pop(),P=b.pop(),L=0,W=e[P],Q=e[P+1],V=e[q],$=e[q+1],H=P+n;H<q;H+=n){var re=e[H],se=e[H+1],Ie=b_e(re,se,W,Q,V,$);Ie>L&&(E=H,L=Ie)}L>i&&(g[(E-t)/n]=1,P+n<E&&b.push(P,E),E+n<q&&b.push(E,q))}for(var H=0;H<p;++H)g[H]&&(a[h++]=e[t+H*n],a[h++]=e[t+H*n+1]);return h}function jv(e,t){return t*Math.round(e/t)}function LCt(e,t,r,n,i,a,h){if(t==r)return h;var p=jv(e[t],i),g=jv(e[t+1],i);t+=n,a[h++]=p,a[h++]=g;var b,E;do if(b=jv(e[t],i),E=jv(e[t+1],i),t+=n,t==r)return a[h++]=b,a[h++]=E,h;while(b==p&&E==g);for(;t<r;){var q=jv(e[t],i),P=jv(e[t+1],i);if(t+=n,!(q==b&&P==E)){var L=b-p,W=E-g,Q=q-p,V=P-g;if(L*V==W*Q&&(L<0&&Q<L||L==Q||L>0&&Q>L)&&(W<0&&V<W||W==V||W>0&&V>W)){b=q,E=P;continue}a[h++]=b,a[h++]=E,p=b,g=E,b=q,E=P}}return a[h++]=b,a[h++]=E,h}function R0e(e,t,r,n,i,a,h,p){for(var g=0,b=r.length;g<b;++g){var E=r[g];h=LCt(e,t,E,n,i,a,h),p.push(h),t=E}return h}function rB(e,t,r,n,i){for(var a=i!==void 0?i:[],h=0,p=t;p<r;p+=n)a[h++]=e.slice(p,p+n);return a.length=h,a}function D0e(e,t,r,n,i){for(var a=i!==void 0?i:[],h=0,p=0,g=r.length;p<g;++p){var b=r[p];a[h++]=rB(e,t,b,n,a[h]),t=b}return a.length=h,a}function nB(e,t,r,n){for(var i=0,a=e[r-n],h=e[r-n+1];t<r;t+=n){var p=e[t],g=e[t+1];i+=h*p-a*g,a=p,h=g}return i/2}function L0e(e,t,r,n){for(var i=0,a=0,h=r.length;a<h;++a){var p=r[a];i+=nB(e,t,p,n),t=p}return i}var kCt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NCt=function(e){kCt(t,e);function t(r,n){var i=e.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(r[0])?i.setFlatCoordinates(n,r):i.setCoordinates(r,n),i}return t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(r,n,i,a){return a<qI(this.getExtent(),r,n)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Qj(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),eB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,r,n,i,a))},t.prototype.getArea=function(){return nB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinates=function(){return rB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getSimplifiedGeometryInternal=function(r){var n=[];return n.length=O0e(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,n,0),new t(n,oa.XY)},t.prototype.getType=function(){return"LinearRing"},t.prototype.intersectsExtent=function(r){return!1},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=tB(this.flatCoordinates,0,r,this.stride),this.changed()},t}(zv),iB=NCt;var FCt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zCt=function(e){FCt(t,e);function t(r,n){var i=e.call(this)||this;return i.setCoordinates(r,n),i}return t.prototype.clone=function(){var r=new t(this.flatCoordinates.slice(),this.layout);return r.applyProperties(this),r},t.prototype.closestPointXY=function(r,n,i,a){var h=this.flatCoordinates,p=zl(r,n,h[0],h[1]);if(p<a){for(var g=this.stride,b=0;b<g;++b)i[b]=h[b];return i.length=g,p}else return a},t.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},t.prototype.computeExtent=function(r){return N_e(this.flatCoordinates,r)},t.prototype.getType=function(){return"Point"},t.prototype.intersectsExtent=function(r){return Vj(r,this.flatCoordinates[0],this.flatCoordinates[1])},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=P0e(this.flatCoordinates,0,r,this.stride),this.changed()},t}(zv),k0e=zCt;function N0e(e,t,r,n,i){var a=PI(i,function(h){return!jh(e,t,r,n,h[0],h[1])});return!a}function jh(e,t,r,n,i,a){for(var h=0,p=e[r-n],g=e[r-n+1];t<r;t+=n){var b=e[t],E=e[t+1];g<=a?E>a&&(b-p)*(a-g)-(i-p)*(E-g)>0&&h++:E<=a&&(b-p)*(a-g)-(i-p)*(E-g)<0&&h--,p=b,g=E}return h!==0}function zI(e,t,r,n,i,a){if(r.length===0||!jh(e,t,r[0],n,i,a))return!1;for(var h=1,p=r.length;h<p;++h)if(jh(e,r[h-1],r[h],n,i,a))return!1;return!0}function F0e(e,t,r,n,i,a,h){for(var p,g,b,E,q,P,L,W=i[a+1],Q=[],V=0,$=r.length;V<$;++V){var H=r[V];for(E=e[H-n],P=e[H-n+1],p=t;p<H;p+=n)q=e[p],L=e[p+1],(W<=P&&L<=W||P<=W&&W<=L)&&(b=(W-P)/(L-P)*(q-E)+E,Q.push(b)),E=q,P=L}var re=NaN,se=-1/0;for(Q.sort(qx),E=Q[0],p=1,g=Q.length;p<g;++p){q=Q[p];var Ie=Math.abs(q-E);Ie>se&&(b=(E+q)/2,zI(e,t,r,n,b,W)&&(re=b,se=Ie)),E=q}return isNaN(re)&&(re=i[a]),h?(h.push(re,W,se),h):[re,W,se]}function z0e(e,t,r,n,i){var a;for(t+=n;t<r;t+=n)if(a=i(e.slice(t-n,t),e.slice(t,t+n)),a)return a;return!1}function j0e(e,t,r,n,i){var a=$j(so(),e,t,r,n);return bp(i,a)?k_e(i,a)||a[0]>=i[0]&&a[2]<=i[2]||a[1]>=i[1]&&a[3]<=i[3]?!0:z0e(e,t,r,n,function(h,p){return U_e(i,h,p)}):!1}function aB(e,t,r,n,i){return!!(j0e(e,t,r,n,i)||jh(e,t,r,n,i[0],i[1])||jh(e,t,r,n,i[0],i[3])||jh(e,t,r,n,i[2],i[1])||jh(e,t,r,n,i[2],i[3]))}function B0e(e,t,r,n,i){if(!aB(e,t,r[0],n,i))return!1;if(r.length===1)return!0;for(var a=1,h=r.length;a<h;++a)if(N0e(e,r[a-1],r[a],n,i)&&!j0e(e,r[a-1],r[a],n,i))return!1;return!0}function U0e(e,t,r,n){for(;t<r-n;){for(var i=0;i<n;++i){var a=e[t+i];e[t+i]=e[r-n+i],e[r-n+i]=a}t+=n,r-=n}}function V0e(e,t,r,n){for(var i=0,a=e[r-n],h=e[r-n+1];t<r;t+=n){var p=e[t],g=e[t+1];i+=(p-a)*(g+h),a=p,h=g}return i===0?void 0:i>0}function $0e(e,t,r,n,i){for(var a=i!==void 0?i:!1,h=0,p=r.length;h<p;++h){var g=r[h],b=V0e(e,t,g,n);if(h===0){if(a&&b||!a&&!b)return!1}else if(a&&!b||!a&&b)return!1;t=g}return!0}function oB(e,t,r,n,i){for(var a=i!==void 0?i:!1,h=0,p=r.length;h<p;++h){var g=r[h],b=V0e(e,t,g,n),E=h===0?a&&b||!a&&!b:a&&!b||!a&&b;E&&U0e(e,t,g,n),t=g}return t}var jCt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),G0e=function(e){jCt(t,e);function t(r,n,i){var a=e.call(this)||this;return a.ends_=[],a.flatInteriorPointRevision_=-1,a.flatInteriorPoint_=null,a.maxDelta_=-1,a.maxDeltaRevision_=-1,a.orientedRevision_=-1,a.orientedFlatCoordinates_=null,n!==void 0&&i?(a.setFlatCoordinates(n,r),a.ends_=i):a.setCoordinates(r,n),a}return t.prototype.appendLinearRing=function(r){this.flatCoordinates?s0e(this.flatCoordinates,r.getFlatCoordinates()):this.flatCoordinates=r.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){var r=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return r.applyProperties(this),r},t.prototype.closestPointXY=function(r,n,i,a){return a<qI(this.getExtent(),r,n)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(A0e(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),q0e(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,r,n,i,a))},t.prototype.containsXY=function(r,n){return zI(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,n)},t.prototype.getArea=function(){return L0e(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},t.prototype.getCoordinates=function(r){var n;return r!==void 0?(n=this.getOrientedFlatCoordinates().slice(),oB(n,0,this.ends_,this.stride,r)):n=this.flatCoordinates,D0e(n,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var r=Bl(this.getExtent());this.flatInteriorPoint_=F0e(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},t.prototype.getInteriorPoint=function(){return new k0e(this.getFlatInteriorPoint(),oa.XYM)},t.prototype.getLinearRingCount=function(){return this.ends_.length},t.prototype.getLinearRing=function(r){return r<0||this.ends_.length<=r?null:new iB(this.flatCoordinates.slice(r===0?0:this.ends_[r-1],this.ends_[r]),this.layout)},t.prototype.getLinearRings=function(){for(var r=this.layout,n=this.flatCoordinates,i=this.ends_,a=[],h=0,p=0,g=i.length;p<g;++p){var b=i[p],E=new iB(n.slice(h,b),r);a.push(E),h=b}return a},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var r=this.flatCoordinates;$0e(r,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=r:(this.orientedFlatCoordinates_=r.slice(),this.orientedFlatCoordinates_.length=oB(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(r){var n=[],i=[];return n.length=R0e(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(r),n,0,i),new t(n,oa.XY,i)},t.prototype.getType=function(){return"Polygon"},t.prototype.intersectsExtent=function(r){return B0e(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r)},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=M0e(this.flatCoordinates,0,r,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},t}(zv),jI=G0e;function Px(e){var t=e[0],r=e[1],n=e[2],i=e[3],a=[t,r,t,i,n,i,n,r,t,r];return new G0e(a,oa.XY,[a.length])}var BCt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UCt=function(e){BCt(t,e);function t(r){var n=e.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+r,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return t.prototype.disposeInternal=function(){this.setMap(null)},t.prototype.render_=function(){var r=this.startPixel_,n=this.endPixel_,i="px",a=this.element_.style;a.left=Math.min(r[0],n[0])+i,a.top=Math.min(r[1],n[1])+i,a.width=Math.abs(n[0]-r[0])+i,a.height=Math.abs(n[1]-r[1])+i},t.prototype.setMap=function(r){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=r,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},t.prototype.setPixels=function(r,n){this.startPixel_=r,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},t.prototype.createOrUpdateGeometry=function(){var r=this.startPixel_,n=this.endPixel_,i=[r,[r[0],n[1]],n,[n[0],r[1]]],a=i.map(this.map_.getCoordinateFromPixelInternal,this.map_);a[4]=a[0].slice(),this.geometry_?this.geometry_.setCoordinates([a]):this.geometry_=new jI([a])},t.prototype.getGeometry=function(){return this.geometry_},t}(Rv),W0e=UCt;function Mx(e){var t=arguments;return function(r){for(var n=!0,i=0,a=t.length;i<a&&(n=n&&t[i](r),!!n);++i);return n}}var Z0e=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},VCt=function(e){var t=e.map.getTargetElement(),r=e.map.getOwnerDocument().activeElement;return t.contains(r)},BI=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?VCt(e):!0},H0e=Fh;var UI=function(e){var t=e.originalEvent;return t.button==0&&!(v0e&&g0e&&t.ctrlKey)};var VI=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var K0e=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},$I=function(e){var t=e.originalEvent,r=t.target.tagName;return r!=="INPUT"&&r!=="SELECT"&&r!=="TEXTAREA"&&!t.target.isContentEditable},GI=function(e){var t=e.originalEvent;return kt(t!==void 0,56),t.pointerType=="mouse"};var X0e=function(e){var t=e.originalEvent;return kt(t!==void 0,56),t.isPrimary&&t.button===0};var Y0e=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),WI={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},sB=function(e){Y0e(t,e);function t(r,n,i){var a=e.call(this,r)||this;return a.coordinate=n,a.mapBrowserEvent=i,a}return t}(aa);var $Ct=function(e){Y0e(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var i=r||{};return n.box_=new W0e(i.className||"ol-dragbox"),n.minArea_=i.minArea!==void 0?i.minArea:64,i.onBoxEnd&&(n.onBoxEnd=i.onBoxEnd),n.startPixel_=null,n.condition_=i.condition?i.condition:UI,n.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:n.defaultBoxEndCondition,n}return t.prototype.defaultBoxEndCondition=function(r,n,i){var a=i[0]-n[0],h=i[1]-n[1];return a*a+h*h>=this.minArea_},t.prototype.getGeometry=function(){return this.box_.getGeometry()},t.prototype.handleDragEvent=function(r){this.box_.setPixels(this.startPixel_,r.pixel),this.dispatchEvent(new sB(WI.BOXDRAG,r.coordinate,r))},t.prototype.handleUpEvent=function(r){this.box_.setMap(null);var n=this.boxEndCondition_(r,this.startPixel_,r.pixel);return n&&this.onBoxEnd(r),this.dispatchEvent(new sB(n?WI.BOXEND:WI.BOXCANCEL,r.coordinate,r)),!1},t.prototype.handleDownEvent=function(r){return this.condition_(r)?(this.startPixel_=r.pixel,this.box_.setMap(r.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new sB(WI.BOXSTART,r.coordinate,r)),!0):!1},t.prototype.onBoxEnd=function(r){},t}(Ru),J0e=$Ct;var GCt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),WCt=function(e){GCt(t,e);function t(r){var n=this,i=r||{},a=i.condition?i.condition:K0e;return n=e.call(this,{condition:a,className:i.className||"ol-dragzoom",minArea:i.minArea})||this,n.duration_=i.duration!==void 0?i.duration:200,n.out_=i.out!==void 0?i.out:!1,n}return t.prototype.onBoxEnd=function(r){var n=this.getMap(),i=n.getView(),a=this.getGeometry();if(this.out_){var h=i.rotatedExtentForGeometry(a),p=i.getResolutionForExtentInternal(h),g=i.getResolution()/p;a=a.clone(),a.scale(g*g)}i.fitInternal(a,{duration:this.duration_,easing:gs})},t}(J0e),ZI=WCt;var Du={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};function Hl(e,t,r,n){var i;return r&&r.length?i=r.shift():kI?i=new OffscreenCanvas(e||300,t||300):i=document.createElement("canvas"),e&&(i.width=e),t&&(i.height=t),i.getContext("2d",n)}function Q0e(e){var t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function Bv(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function Ox(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function exe(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function txe(e,t){for(var r=e.childNodes,n=0;;++n){var i=r[n],a=t[n];if(!i&&!a)break;if(i!==a){if(!i){e.appendChild(a);continue}if(!a){e.removeChild(i),--n;continue}e.insertBefore(a,i)}}}var ZCt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HCt=function(e){ZCt(t,e);function t(r){var n=e.call(this)||this,i=r.element;return i&&!r.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),n.element=i||null,n.target_=null,n.map_=null,n.listenerKeys=[],r.render&&(n.render=r.render),r.target&&n.setTarget(r.target),n}return t.prototype.disposeInternal=function(){Ox(this.element),e.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(r){this.map_&&Ox(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n)gr(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=r,r){var a=this.target_?this.target_:r.getOverlayContainerStopEvent();a.appendChild(this.element),this.render!==Gl&&this.listenerKeys.push(Zt(r,Du.POSTRENDER,this.render,this)),r.render()}},t.prototype.render=function(r){},t.prototype.setTarget=function(r){this.target_=typeof r=="string"?document.getElementById(r):r},t}(yi),Do=HCt;var Vn={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var Rx="ol-hidden";var ys="ol-unselectable",uB="ol-unsupported",Lu="ol-control",lB="ol-collapsed",KCt=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),rxe=["style","variant","weight","size","lineHeight","family"],nxe=function(e){var t=e.match(KCt);if(!t)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=rxe.length;n<i;++n){var a=t[n+1];a!==void 0&&(r[rxe[n]]=a)}return r.families=r.family.split(/,\s?/),r};var XCt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ixe=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],axe={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},YCt=function(e){XCt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,{element:document.createElement("div"),target:i.target})||this,n.on,n.once,n.un,n.keys_=i.keys!==void 0?i.keys:!1,n.source_=i.source,n.isInFullscreen_=!1,n.boundHandleMapTargetChange_=n.handleMapTargetChange_.bind(n),n.cssClassName_=i.className!==void 0?i.className:"ol-full-screen",n.documentListeners_=[],n.activeClassName_=i.activeClassName!==void 0?i.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=i.inactiveClassName!==void 0?i.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var a=i.label!==void 0?i.label:"\u2922";n.labelNode_=typeof a=="string"?document.createTextNode(a):a;var h=i.labelActive!==void 0?i.labelActive:"\xD7";n.labelActiveNode_=typeof h=="string"?document.createTextNode(h):h;var p=i.tipLabel?i.tipLabel:"Toggle full-screen";return n.button_=document.createElement("button"),n.button_.title=p,n.button_.setAttribute("type","button"),n.button_.appendChild(n.labelNode_),n.button_.addEventListener(dt.CLICK,n.handleClick_.bind(n),!1),n.setClassName_(n.button_,n.isInFullscreen_),n.element.className="".concat(n.cssClassName_," ").concat(ys," ").concat(Lu),n.element.appendChild(n.button_),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.handleFullScreen_()},t.prototype.handleFullScreen_=function(){var r=this.getMap();if(r){var n=r.getOwnerDocument();if(oxe(n))if(sxe(n))QCt(n);else{var i=void 0;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=r.getTargetElement(),this.keys_?JCt(i):uxe(i)}}},t.prototype.handleFullScreenChange_=function(){var r=this.getMap();if(r){var n=this.isInFullscreen_;this.isInFullscreen_=sxe(r.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Bv(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(axe.ENTERFULLSCREEN)):(Bv(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(axe.LEAVEFULLSCREEN)),r.updateSize())}},t.prototype.setClassName_=function(r,n){var i,a,h,p;n?((i=r.classList).remove.apply(i,this.inactiveClassName_),(a=r.classList).add.apply(a,this.activeClassName_)):((h=r.classList).remove.apply(h,this.activeClassName_),(p=r.classList).add.apply(p,this.inactiveClassName_))},t.prototype.setMap=function(r){var n=this.getMap();n&&n.removeChangeListener(Vn.TARGET,this.boundHandleMapTargetChange_),e.prototype.setMap.call(this,r),this.handleMapTargetChange_(),r&&r.addChangeListener(Vn.TARGET,this.boundHandleMapTargetChange_)},t.prototype.handleMapTargetChange_=function(){for(var r=this.documentListeners_,n=0,i=r.length;n<i;++n)gr(r[n]);r.length=0;var a=this.getMap();if(a){var h=a.getOwnerDocument();oxe(h)?this.element.classList.remove(uB):this.element.classList.add(uB);for(var n=0,i=ixe.length;n<i;++n)r.push(Zt(h,ixe[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},t}(Do);function oxe(e){var t=e.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&e.msFullscreenEnabled||t.requestFullscreen&&e.fullscreenEnabled)}function sxe(e){return!!(e.webkitIsFullScreen||e.msFullscreenElement||e.fullscreenElement)}function uxe(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function JCt(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():uxe(e)}function QCt(e){e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}var lxe=YCt;var Ma={ADD:"add",REMOVE:"remove"};var hxe=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cxe={LENGTH:"length"},HI=function(e){hxe(t,e);function t(r,n,i){var a=e.call(this,r)||this;return a.element=n,a.index=i,a}return t}(aa);var eAt=function(e){hxe(t,e);function t(r,n){var i=e.call(this)||this;i.on,i.once,i.un;var a=n||{};if(i.unique_=!!a.unique,i.array_=r||[],i.unique_)for(var h=0,p=i.array_.length;h<p;++h)i.assertUnique_(i.array_[h],h);return i.updateLength_(),i}return t.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},t.prototype.extend=function(r){for(var n=0,i=r.length;n<i;++n)this.push(r[n]);return this},t.prototype.forEach=function(r){for(var n=this.array_,i=0,a=n.length;i<a;++i)r(n[i],i,n)},t.prototype.getArray=function(){return this.array_},t.prototype.item=function(r){return this.array_[r]},t.prototype.getLength=function(){return this.get(cxe.LENGTH)},t.prototype.insertAt=function(r,n){this.unique_&&this.assertUnique_(n),this.array_.splice(r,0,n),this.updateLength_(),this.dispatchEvent(new HI(Ma.ADD,n,r))},t.prototype.pop=function(){return this.removeAt(this.getLength()-1)},t.prototype.push=function(r){this.unique_&&this.assertUnique_(r);var n=this.getLength();return this.insertAt(n,r),this.getLength()},t.prototype.remove=function(r){for(var n=this.array_,i=0,a=n.length;i<a;++i)if(n[i]===r)return this.removeAt(i)},t.prototype.removeAt=function(r){var n=this.array_[r];return this.array_.splice(r,1),this.updateLength_(),this.dispatchEvent(new HI(Ma.REMOVE,n,r)),n},t.prototype.setAt=function(r,n){var i=this.getLength();if(r<i){this.unique_&&this.assertUnique_(n,r);var a=this.array_[r];this.array_[r]=n,this.dispatchEvent(new HI(Ma.REMOVE,a,r)),this.dispatchEvent(new HI(Ma.ADD,n,r))}else{for(var h=i;h<r;++h)this.insertAt(h,void 0);this.insertAt(r,n)}},t.prototype.updateLength_=function(){this.set(cxe.LENGTH,this.array_.length)},t.prototype.assertUnique_=function(r,n){for(var i=0,a=this.array_.length;i<a;++i)if(this.array_[i]===r&&i!==n)throw new AI(58)},t}(yi),Oa=eAt;var tAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rAt=function(e){tAt(t,e);function t(r){var n=e.call(this)||this,i=r||{};return n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:250,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==Zr.DBLCLICK){var i=r.originalEvent,a=r.map,h=r.coordinate,p=i.shiftKey?-this.delta_:this.delta_,g=a.getView();Nv(g,p,h,this.duration_),i.preventDefault(),n=!0}return!n},t}(Ou),fxe=rAt;var nAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iAt=function(e){nAt(t,e);function t(r){var n=e.call(this,{stopDown:$l})||this,i=r||{};n.kinetic_=i.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var a=i.condition?i.condition:Mx(VI,X0e);return n.condition_=i.onFocusOnly?Mx(BI,a):a,n.noKinetic_=!1,n}return t.prototype.handleDragEvent=function(r){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=Fv(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var a=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],h=r.map,p=h.getView();W_e(a,p.getResolution()),Mv(a,p.getRotation()),p.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,r.originalEvent.preventDefault()},t.prototype.handleUpEvent=function(r){var n=r.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var a=this.kinetic_.getDistance(),h=this.kinetic_.getAngle(),p=i.getCenterInternal(),g=n.getPixelFromCoordinateInternal(p),b=n.getCoordinateFromPixelInternal([g[0]-a*Math.cos(h),g[1]-a*Math.sin(h)]);i.animateInternal({center:i.getConstrainedCenter(b),duration:500,easing:gs})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>0&&this.condition_(r)){var n=r.map,i=n.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},t}(Ru),pxe=iAt;function Uv(e){if(e!==void 0)return 0}function cB(e){if(e!==void 0)return e}function dxe(e){var t=2*Math.PI/e;return function(r,n){if(n)return r;if(r!==void 0)return r=Math.floor(r/t+.5)*t,r}}function mxe(e){var t=e||Ev(5);return function(r,n){if(n)return r;if(r!==void 0)return Math.abs(r)<=t?0:r}}var aAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oAt=function(e){aAt(t,e);function t(r){var n=this,i=r||{};return n=e.call(this,{stopDown:$l})||this,n.condition_=i.condition?i.condition:Z0e,n.lastAngle_=void 0,n.duration_=i.duration!==void 0?i.duration:250,n}return t.prototype.handleDragEvent=function(r){if(GI(r)){var n=r.map,i=n.getView();if(i.getConstraints().rotation!==Uv){var a=n.getSize(),h=r.pixel,p=Math.atan2(a[1]/2-h[1],h[0]-a[0]/2);if(this.lastAngle_!==void 0){var g=p-this.lastAngle_;i.adjustRotationInternal(-g)}this.lastAngle_=p}}},t.prototype.handleUpEvent=function(r){if(!GI(r))return!0;var n=r.map,i=n.getView();return i.endInteraction(this.duration_),!1},t.prototype.handleDownEvent=function(r){if(!GI(r))return!1;if(UI(r)&&this.condition_(r)){var n=r.map;return n.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},t}(Ru),vxe=oAt;var Bh={LEFT:37,UP:38,RIGHT:39,DOWN:40};var sAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uAt=function(e){sAt(t,e);function t(r){var n=e.call(this)||this,i=r||{};return n.defaultCondition_=function(a){return VI(a)&&$I(a)},n.condition_=i.condition!==void 0?i.condition:n.defaultCondition_,n.duration_=i.duration!==void 0?i.duration:100,n.pixelDelta_=i.pixelDelta!==void 0?i.pixelDelta:128,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==dt.KEYDOWN){var i=r.originalEvent,a=i.keyCode;if(this.condition_(r)&&(a==Bh.DOWN||a==Bh.LEFT||a==Bh.RIGHT||a==Bh.UP)){var h=r.map,p=h.getView(),g=p.getResolution()*this.pixelDelta_,b=0,E=0;a==Bh.DOWN?E=-g:a==Bh.LEFT?b=-g:a==Bh.RIGHT?b=g:E=g;var q=[b,E];Mv(q,p.getRotation()),d0e(p,q,this.duration_),i.preventDefault(),n=!0}}return!n},t}(Ou),gxe=uAt;var lAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cAt=function(e){lAt(t,e);function t(r){var n=e.call(this)||this,i=r||{};return n.condition_=i.condition?i.condition:$I,n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:100,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==dt.KEYDOWN||r.type==dt.KEYPRESS){var i=r.originalEvent,a=i.charCode;if(this.condition_(r)&&(a==43||a==45)){var h=r.map,p=a==43?this.delta_:-this.delta_,g=h.getView();Nv(g,p,void 0,this.duration_),i.preventDefault(),n=!0}}return!n},t}(Ou),yxe=cAt;var hAt=function(){function e(t,r,n){this.decay_=t,this.minVelocity_=r,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return e.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},e.prototype.update=function(t,r){this.points_.push(t,r,Date.now())},e.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,r=this.points_.length-3;if(this.points_[r+2]<t)return!1;for(var n=r-3;n>0&&this.points_[n+2]>t;)n-=3;var i=this.points_[r+2]-this.points_[n+2];if(i<16.666666666666668)return!1;var a=this.points_[r]-this.points_[n],h=this.points_[r+1]-this.points_[n+1];return this.angle_=Math.atan2(h,a),this.initialVelocity_=Math.sqrt(a*a+h*h)/i,this.initialVelocity_>this.minVelocity_},e.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},e.prototype.getAngle=function(){return this.angle_},e}(),_xe=hAt;var fAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hB={TRACKPAD:"trackpad",WHEEL:"wheel"},pAt=function(e){fAt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,i)||this,n.totalDelta_=0,n.lastDelta_=0,n.maxDelta_=i.maxDelta!==void 0?i.maxDelta:1,n.duration_=i.duration!==void 0?i.duration:250,n.timeout_=i.timeout!==void 0?i.timeout:80,n.useAnchor_=i.useAnchor!==void 0?i.useAnchor:!0,n.constrainResolution_=i.constrainResolution!==void 0?i.constrainResolution:!1;var a=i.condition?i.condition:H0e;return n.condition_=i.onFocusOnly?Mx(BI,a):a,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return t.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var r=this.getMap();if(r){var n=r.getView();n.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},t.prototype.handleEvent=function(r){if(!this.condition_(r))return!0;var n=r.type;if(n!==dt.WHEEL)return!0;var i=r.map,a=r.originalEvent;a.preventDefault(),this.useAnchor_&&(this.lastAnchor_=r.coordinate);var h;if(r.type==dt.WHEEL&&(h=a.deltaY,m0e&&a.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(h/=LI),a.deltaMode===WheelEvent.DOM_DELTA_LINE&&(h*=40)),h===0)return!1;this.lastDelta_=h;var p=Date.now();this.startTime_===void 0&&(this.startTime_=p),(!this.mode_||p-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(h)<4?hB.TRACKPAD:hB.WHEEL);var g=i.getView();if(this.mode_===hB.TRACKPAD&&!(g.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(g.getAnimating()&&g.cancelAnimations(),g.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),g.adjustZoom(-h/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=p,!1;this.totalDelta_+=h;var b=Math.max(this.timeout_-(p-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),b),!1},t.prototype.handleWheelZoom_=function(r){var n=r.getView();n.getAnimating()&&n.cancelAnimations();var i=-Wr(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Nv(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},t.prototype.setMouseAnchor=function(r){this.useAnchor_=r,r||(this.lastAnchor_=null)},t}(Ou),xxe=pAt;var dAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mAt=function(e){dAt(t,e);function t(r){var n=this,i=r||{},a=i;return a.stopDown||(a.stopDown=$l),n=e.call(this,a)||this,n.anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=i.threshold!==void 0?i.threshold:.3,n.duration_=i.duration!==void 0?i.duration:250,n}return t.prototype.handleDragEvent=function(r){var n=0,i=this.targetPointers[0],a=this.targetPointers[1],h=Math.atan2(a.clientY-i.clientY,a.clientX-i.clientX);if(this.lastAngle_!==void 0){var p=h-this.lastAngle_;this.rotationDelta_+=p,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=p}this.lastAngle_=h;var g=r.map,b=g.getView();if(b.getConstraints().rotation!==Uv){var E=g.getViewport().getBoundingClientRect(),q=Fv(this.targetPointers);q[0]-=E.left,q[1]-=E.top,this.anchor_=g.getCoordinateFromPixelInternal(q),this.rotating_&&(g.render(),b.adjustRotationInternal(n,this.anchor_))}},t.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,i=n.getView();return i.endInteraction(this.duration_),!1}else return!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}(Ru),wxe=mAt;var vAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gAt=function(e){vAt(t,e);function t(r){var n=this,i=r||{},a=i;return a.stopDown||(a.stopDown=$l),n=e.call(this,a)||this,n.anchor_=null,n.duration_=i.duration!==void 0?i.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return t.prototype.handleDragEvent=function(r){var n=1,i=this.targetPointers[0],a=this.targetPointers[1],h=i.clientX-a.clientX,p=i.clientY-a.clientY,g=Math.sqrt(h*h+p*p);this.lastDistance_!==void 0&&(n=this.lastDistance_/g),this.lastDistance_=g;var b=r.map,E=b.getView();n!=1&&(this.lastScaleDelta_=n);var q=b.getViewport().getBoundingClientRect(),P=Fv(this.targetPointers);P[0]-=q.left,P[1]-=q.top,this.anchor_=b.getCoordinateFromPixelInternal(P),b.render(),E.adjustResolutionInternal(n,this.anchor_)},t.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,i=n.getView(),a=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,a),!1}else return!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}(Ru),bxe=gAt;var yAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_At=function(e){yAt(t,e);function t(r,n,i){var a=e.call(this,r)||this;return a.map=n,a.frameState=i!==void 0?i:null,a}return t}(aa),Uh=_At;var xAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wAt=function(e){xAt(t,e);function t(r,n,i,a,h,p){var g=e.call(this,r,n,h)||this;return g.originalEvent=i,g.pixel_=null,g.coordinate_=null,g.dragging=a!==void 0?a:!1,g.activePointers=p,g}return Object.defineProperty(t.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(r){this.pixel_=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(r){this.coordinate_=r},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){e.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){e.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},t}(Uh),ku=wAt;var Sr={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var bAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),EAt=function(e){bAt(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un,n.background_=r.background;var i=Er({},r);return typeof r.properties=="object"&&(delete i.properties,Er(i,r.properties)),i[Sr.OPACITY]=r.opacity!==void 0?r.opacity:1,kt(typeof i[Sr.OPACITY]=="number",64),i[Sr.VISIBLE]=r.visible!==void 0?r.visible:!0,i[Sr.Z_INDEX]=r.zIndex,i[Sr.MAX_RESOLUTION]=r.maxResolution!==void 0?r.maxResolution:1/0,i[Sr.MIN_RESOLUTION]=r.minResolution!==void 0?r.minResolution:0,i[Sr.MIN_ZOOM]=r.minZoom!==void 0?r.minZoom:-1/0,i[Sr.MAX_ZOOM]=r.maxZoom!==void 0?r.maxZoom:1/0,n.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,n.setProperties(i),n.state_=null,n}return t.prototype.getBackground=function(){return this.background_},t.prototype.getClassName=function(){return this.className_},t.prototype.getLayerState=function(r){var n=this.state_||{layer:this,managed:r===void 0?!0:r},i=this.getZIndex();return n.opacity=Wr(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},t.prototype.getLayersArray=function(r){return or()},t.prototype.getLayerStatesArray=function(r){return or()},t.prototype.getExtent=function(){return this.get(Sr.EXTENT)},t.prototype.getMaxResolution=function(){return this.get(Sr.MAX_RESOLUTION)},t.prototype.getMinResolution=function(){return this.get(Sr.MIN_RESOLUTION)},t.prototype.getMinZoom=function(){return this.get(Sr.MIN_ZOOM)},t.prototype.getMaxZoom=function(){return this.get(Sr.MAX_ZOOM)},t.prototype.getOpacity=function(){return this.get(Sr.OPACITY)},t.prototype.getSourceState=function(){return or()},t.prototype.getVisible=function(){return this.get(Sr.VISIBLE)},t.prototype.getZIndex=function(){return this.get(Sr.Z_INDEX)},t.prototype.setBackground=function(r){this.background_=r,this.changed()},t.prototype.setExtent=function(r){this.set(Sr.EXTENT,r)},t.prototype.setMaxResolution=function(r){this.set(Sr.MAX_RESOLUTION,r)},t.prototype.setMinResolution=function(r){this.set(Sr.MIN_RESOLUTION,r)},t.prototype.setMaxZoom=function(r){this.set(Sr.MAX_ZOOM,r)},t.prototype.setMinZoom=function(r){this.set(Sr.MIN_ZOOM,r)},t.prototype.setOpacity=function(r){kt(typeof r=="number",64),this.set(Sr.OPACITY,r)},t.prototype.setVisible=function(r){this.set(Sr.VISIBLE,r)},t.prototype.setZIndex=function(r){this.set(Sr.Z_INDEX,r)},t.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),e.prototype.disposeInternal.call(this)},t}(yi),KI=EAt;var _s={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var SAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TAt=function(e){SAt(t,e);function t(r){var n=this,i=Er({},r);delete i.source,n=e.call(this,i)||this,n.on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,n.rendered=!1,r.render&&(n.render=r.render),r.map&&n.setMap(r.map),n.addChangeListener(Sr.SOURCE,n.handleSourcePropertyChange_);var a=r.source?r.source:null;return n.setSource(a),n}return t.prototype.getLayersArray=function(r){var n=r||[];return n.push(this),n},t.prototype.getLayerStatesArray=function(r){var n=r||[];return n.push(this.getLayerState()),n},t.prototype.getSource=function(){return this.get(Sr.SOURCE)||null},t.prototype.getRenderSource=function(){return this.getSource()},t.prototype.getSourceState=function(){var r=this.getSource();return r?r.getState():"undefined"},t.prototype.handleSourceChange_=function(){this.changed()},t.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(gr(this.sourceChangeKey_),this.sourceChangeKey_=null);var r=this.getSource();r&&(this.sourceChangeKey_=Zt(r,dt.CHANGE,this.handleSourceChange_,this)),this.changed()},t.prototype.getFeatures=function(r){return this.renderer_?this.renderer_.getFeatures(r):new Promise(function(n){return n([])})},t.prototype.getData=function(r){return!this.renderer_||!this.rendered?null:this.renderer_.getData(r)},t.prototype.render=function(r,n){var i=this.getRenderer();if(i.prepareFrame(r))return this.rendered=!0,i.renderFrame(r,n)},t.prototype.unrender=function(){this.rendered=!1},t.prototype.setMapInternal=function(r){r||this.unrender(),this.set(Sr.MAP,r)},t.prototype.getMapInternal=function(){return this.get(Sr.MAP)},t.prototype.setMap=function(r){this.mapPrecomposeKey_&&(gr(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),r||this.changed(),this.mapRenderKey_&&(gr(this.mapRenderKey_),this.mapRenderKey_=null),r&&(this.mapPrecomposeKey_=Zt(r,_s.PRECOMPOSE,function(n){var i=n,a=i.frameState.layerStatesArray,h=this.getLayerState(!1);kt(!a.some(function(p){return p.layer===h.layer}),67),a.push(h)},this),this.mapRenderKey_=Zt(this,dt.CHANGE,r.render,r),this.changed())},t.prototype.setSource=function(r){this.set(Sr.SOURCE,r)},t.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},t.prototype.hasRenderer=function(){return!!this.renderer_},t.prototype.createRenderer=function(){return null},t.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),e.prototype.disposeInternal.call(this)},t}(KI);function Tp(e,t){if(!e.visible)return!1;var r=t.resolution;if(r<e.minResolution||r>=e.maxResolution)return!1;var n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}var Dx=TAt;var uo={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function fB(e,t,r){return r===void 0&&(r=[0,0]),r[0]=e[0]+2*t,r[1]=e[1]+2*t,r}function pB(e){return e[0]>0&&e[1]>0}function XI(e,t,r){return r===void 0&&(r=[0,0]),r[0]=e[0]*t+.5|0,r[1]=e[1]*t+.5|0,r}function sa(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}var IAt=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,CAt=/^([a-z]*)$|^hsla?\(.*\)$/i;function Sxe(e){return typeof e=="string"?e:MAt(e)}function AAt(e){var t=document.createElement("div");if(t.style.color=e,t.style.color!==""){document.body.appendChild(t);var r=getComputedStyle(t).color;return document.body.removeChild(t),r}else return""}var qAt=function(){var e=1024,t={},r=0;return function(n){var i;if(t.hasOwnProperty(n))i=t[n];else{if(r>=e){var a=0;for(var h in t)a++&3||(delete t[h],--r)}i=PAt(n),t[n]=i,++r}return i}}();function dB(e){return Array.isArray(e)?e:qAt(e)}function PAt(e){var t,r,n,i,a;if(CAt.exec(e)&&(e=AAt(e)),IAt.exec(e)){var h=e.length-1,p=void 0;h<=4?p=1:p=2;var g=h===4||h===8;t=parseInt(e.substr(1+0*p,p),16),r=parseInt(e.substr(1+1*p,p),16),n=parseInt(e.substr(1+2*p,p),16),g?i=parseInt(e.substr(1+3*p,p),16):i=255,p==1&&(t=(t<<4)+t,r=(r<<4)+r,n=(n<<4)+n,g&&(i=(i<<4)+i)),a=[t,r,n,i/255]}else e.indexOf("rgba(")==0?(a=e.slice(5,-1).split(",").map(Number),Exe(a)):e.indexOf("rgb(")==0?(a=e.slice(4,-1).split(",").map(Number),a.push(1),Exe(a)):kt(!1,14);return a}function Exe(e){return e[0]=Wr(e[0]+.5|0,0,255),e[1]=Wr(e[1]+.5|0,0,255),e[2]=Wr(e[2]+.5|0,0,255),e[3]=Wr(e[3],0,1),e}function MAt(e){var t=e[0];t!=(t|0)&&(t=t+.5|0);var r=e[1];r!=(r|0)&&(r=r+.5|0);var n=e[2];n!=(n|0)&&(n=n+.5|0);var i=e[3]===void 0?1:Math.round(e[3]*100)/100;return"rgba("+t+","+r+","+n+","+i+")"}var Nu=new yi,OAt=new Mu;OAt.setSize=function(){console.warn("labelCache is deprecated.")};var Vv=null,mB,RAt={},gar=function(){var e=100,t="32px ",r=["monospace","serif"],n=r.length,i="wmytzilWMYTZIL@#/&?$%10\uF013",a,h;function p(b,E,q){for(var P=!0,L=0;L<n;++L){var W=r[L];if(h=Txe(b+" "+E+" "+t+W,i),q!=W){var Q=Txe(b+" "+E+" "+t+q+","+W,i);P=P&&Q!=h}}return!!P}function g(){for(var b=!0,E=Nu.getKeys(),q=0,P=E.length;q<P;++q){var L=E[q];Nu.get(L)<e&&(p.apply(this,L.split(`
`))?(Pu(RAt),Vv=null,mB=void 0,Nu.set(L,e)):(Nu.set(L,Nu.get(L)+1,!0),b=!1))}b&&(clearInterval(a),a=void 0)}return function(b){var E=nxe(b);if(E)for(var q=E.families,P=0,L=q.length;P<L;++P){var W=q[P],Q=E.style+`
`+E.weight+`
`+W;Nu.get(Q)===void 0&&(Nu.set(Q,e,!0),p(E.style,E.weight,W)||(Nu.set(Q,0,!0),a===void 0&&(a=setInterval(g,32))))}}}();function DAt(e,t){return Vv||(Vv=Hl(1,1)),e!=mB&&(Vv.font=e,mB=Vv.font),Vv.measureText(t)}function Txe(e,t){return DAt(e,t).width}var LAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kAt=function(e){LAt(t,e);function t(r){var n=e.call(this)||this;return n.ready=!0,n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=r,n.declutterExecutorGroup=null,n}return t.prototype.getFeatures=function(r){return or()},t.prototype.getData=function(r){return null},t.prototype.prepareFrame=function(r){return or()},t.prototype.renderFrame=function(r,n){return or()},t.prototype.loadedTileCallback=function(r,n,i){r[n]||(r[n]={}),r[n][i.tileCoord.toString()]=i},t.prototype.createLoadedTileFinder=function(r,n,i){return function(a,h){var p=this.loadedTileCallback.bind(this,i,a);return r.forEachLoadedTile(n,a,h,p)}.bind(this)},t.prototype.forEachFeatureAtCoordinate=function(r,n,i,a,h){},t.prototype.getDataAtPixel=function(r,n,i){return null},t.prototype.getLayer=function(){return this.layer_},t.prototype.handleFontsChanged=function(){},t.prototype.handleImageChange_=function(r){var n=r.target;n.getState()===uo.LOADED&&this.renderIfReadyAndVisible()},t.prototype.loadImage=function(r){var n=r.getState();return n!=uo.LOADED&&n!=uo.ERROR&&r.addEventListener(dt.CHANGE,this.boundHandleImageChange_),n==uo.IDLE&&(r.load(),n=r.getState()),n==uo.LOADED},t.prototype.renderIfReadyAndVisible=function(){var r=this.getLayer();r&&r.getVisible()&&r.getSourceState()==="ready"&&r.changed()},t.prototype.disposeInternal=function(){delete this.layer_,e.prototype.disposeInternal.call(this)},t}(DI),Ixe=kAt;var NAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FAt=function(e){NAt(t,e);function t(r,n,i,a){var h=e.call(this,r)||this;return h.inversePixelTransform=n,h.frameState=i,h.context=a,h}return t}(aa),YI=FAt;var zAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var $v=null;function jAt(){var e=document.createElement("canvas");e.width=1,e.height=1,$v=e.getContext("2d")}var BAt=function(e){zAt(t,e);function t(r){var n=e.call(this,r)||this;return n.container=null,n.renderedResolution,n.tempTransform=Wl(),n.pixelTransform=Wl(),n.inversePixelTransform=Wl(),n.context=null,n.containerReused=!1,n.pixelContext_=null,n.frameState=null,n}return t.prototype.getImageData=function(r,n,i){$v||jAt(),$v.clearRect(0,0,1,1);var a;try{$v.drawImage(r,n,i,1,1,0,0,1,1),a=$v.getImageData(0,0,1,1).data}catch(h){return $v=null,null}return a},t.prototype.getBackground=function(r){var n=this.getLayer(),i=n.getBackground();return typeof i=="function"&&(i=i(r.viewState.resolution)),i||void 0},t.prototype.useContainer=function(r,n,i){var a=this.getLayer().getClassName(),h,p;if(r&&r.className===a&&(!i||r&&r.style.backgroundColor&&Lv(dB(r.style.backgroundColor),dB(i)))){var g=r.firstElementChild;g instanceof HTMLCanvasElement&&(p=g.getContext("2d"))}if(p&&p.canvas.style.transform===n?(this.container=r,this.context=p,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){h=document.createElement("div"),h.className=a;var b=h.style;b.position="absolute",b.width="100%",b.height="100%",p=Hl();var g=p.canvas;h.appendChild(g),b=g.style,b.position="absolute",b.left="0",b.transformOrigin="top left",this.container=h,this.context=p}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)},t.prototype.clipUnrotated=function(r,n,i){var a=vs(i),h=Pv(i),p=qv(i),g=Av(i);ki(n.coordinateToPixelTransform,a),ki(n.coordinateToPixelTransform,h),ki(n.coordinateToPixelTransform,p),ki(n.coordinateToPixelTransform,g);var b=this.inversePixelTransform;ki(b,a),ki(b,h),ki(b,p),ki(b,g),r.save(),r.beginPath(),r.moveTo(Math.round(a[0]),Math.round(a[1])),r.lineTo(Math.round(h[0]),Math.round(h[1])),r.lineTo(Math.round(p[0]),Math.round(p[1])),r.lineTo(Math.round(g[0]),Math.round(g[1])),r.clip()},t.prototype.dispatchRenderEvent_=function(r,n,i){var a=this.getLayer();if(a.hasListener(r)){var h=new YI(r,this.inversePixelTransform,i,n);a.dispatchEvent(h)}},t.prototype.preRender=function(r,n){this.frameState=n,this.dispatchRenderEvent_(_s.PRERENDER,r,n)},t.prototype.postRender=function(r,n){this.dispatchRenderEvent_(_s.POSTRENDER,r,n)},t.prototype.getRenderTransform=function(r,n,i,a,h,p,g){var b=h/2,E=p/2,q=a/n,P=-q,L=-r[0]+g,W=-r[1];return Zl(this.tempTransform,b,E,q,P,-i,L,W)},t.prototype.getDataAtPixel=function(r,n,i){var a=ki(this.inversePixelTransform,r.slice()),h=this.context,p=this.getLayer(),g=p.getExtent();if(g){var b=ki(n.pixelToCoordinateTransform,r.slice());if(!Rh(g,b))return null}var E=Math.round(a[0]),q=Math.round(a[1]),P=this.pixelContext_;if(!P){var L=document.createElement("canvas");L.width=1,L.height=1,P=L.getContext("2d"),this.pixelContext_=P}P.clearRect(0,0,1,1);var W;try{P.drawImage(h.canvas,E,q,1,1,0,0,1,1),W=P.getImageData(0,0,1,1).data}catch(Q){return Q.name==="SecurityError"?(this.pixelContext_=null,new Uint8Array):W}return W[3]===0?null:W},t.prototype.disposeInternal=function(){delete this.frameState,e.prototype.disposeInternal.call(this)},t}(Ixe),Cxe=BAt;var lo={ANIMATING:0,INTERACTING:1};var UAt=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var r in this.cache_){var n=this.cache_[r];!(t++&3)&&!n.hasListener()&&(delete this.cache_[r],--this.cacheSize_)}}},e.prototype.get=function(t,r,n){var i=Axe(t,r,n);return i in this.cache_?this.cache_[i]:null},e.prototype.set=function(t,r,n,i){var a=Axe(t,r,n);this.cache_[a]=i,++this.cacheSize_},e.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},e}();function Axe(e,t,r){var n=r?Sxe(r):"null";return t+":"+e+":"+n}var vB=new UAt;var VAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$At=function(e){VAt(t,e);function t(r,n,i,a){var h=e.call(this)||this;return h.extent=r,h.pixelRatio_=i,h.resolution=n,h.state=a,h}return t.prototype.changed=function(){this.dispatchEvent(dt.CHANGE)},t.prototype.getExtent=function(){return this.extent},t.prototype.getImage=function(){return or()},t.prototype.getPixelRatio=function(){return this.pixelRatio_},t.prototype.getResolution=function(){return this.resolution},t.prototype.getState=function(){return this.state},t.prototype.load=function(){or()},t}(Mu),qxe=$At;var GAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Har=function(e){GAt(t,e);function t(r,n,i,a,h,p){var g=e.call(this,r,n,i,uo.IDLE)||this;return g.src_=a,g.image_=new Image,h!==null&&(g.image_.crossOrigin=h),g.unlisten_=null,g.state=uo.IDLE,g.imageLoadFunction_=p,g}return t.prototype.getImage=function(){return this.image_},t.prototype.handleImageError_=function(){this.state=uo.ERROR,this.unlistenImage_(),this.changed()},t.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=ei(this.extent)/this.image_.height),this.state=uo.LOADED,this.unlistenImage_(),this.changed()},t.prototype.load=function(){(this.state==uo.IDLE||this.state==uo.ERROR)&&(this.state=uo.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=gB(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.setImage=function(r){this.image_=r,this.resolution=ei(this.extent)/this.image_.height},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(qxe);function gB(e,t,r){var n=e,i=!0,a=!1,h=!1,p=[kv(n,dt.LOAD,function(){h=!0,a||t()})];return n.src&&y0e?(a=!0,n.decode().then(function(){i&&t()}).catch(function(g){i&&(h?t():r())})):p.push(kv(n,dt.ERROR,r)),function(){i=!1,p.forEach(gr)}}var WAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZAt=function(e){WAt(t,e);function t(r){var n=e.call(this)||this;n.projection=Li(r.projection),n.attributions_=Pxe(r.attributions),n.attributionsCollapsible_=r.attributionsCollapsible!==void 0?r.attributionsCollapsible:!0,n.loading=!1,n.state_=r.state!==void 0?r.state:"ready",n.wrapX_=r.wrapX!==void 0?r.wrapX:!1,n.interpolate_=!!r.interpolate,n.viewResolver=null,n.viewRejector=null;var i=n;return n.viewPromise_=new Promise(function(a,h){i.viewResolver=a,i.viewRejector=h}),n}return t.prototype.getAttributions=function(){return this.attributions_},t.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},t.prototype.getProjection=function(){return this.projection},t.prototype.getResolutions=function(){return or()},t.prototype.getView=function(){return this.viewPromise_},t.prototype.getState=function(){return this.state_},t.prototype.getWrapX=function(){return this.wrapX_},t.prototype.getInterpolate=function(){return this.interpolate_},t.prototype.refresh=function(){this.changed()},t.prototype.setAttributions=function(r){this.attributions_=Pxe(r),this.changed()},t.prototype.setState=function(r){this.state_=r,this.changed()},t}(yi);function Pxe(e){return e?Array.isArray(e)?function(t){return e}:typeof e=="function"?e:function(t){return[e]}:null}var Mxe=ZAt;function JI(e){var t=e||{},r=new Oa,n=new _xe(-.005,.05,100),i=t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0;i&&r.push(new vxe);var a=t.doubleClickZoom!==void 0?t.doubleClickZoom:!0;a&&r.push(new fxe({delta:t.zoomDelta,duration:t.zoomDuration}));var h=t.dragPan!==void 0?t.dragPan:!0;h&&r.push(new pxe({onFocusOnly:t.onFocusOnly,kinetic:n}));var p=t.pinchRotate!==void 0?t.pinchRotate:!0;p&&r.push(new wxe);var g=t.pinchZoom!==void 0?t.pinchZoom:!0;g&&r.push(new bxe({duration:t.zoomDuration}));var b=t.keyboard!==void 0?t.keyboard:!0;b&&(r.push(new gxe),r.push(new yxe({delta:t.zoomDelta,duration:t.zoomDuration})));var E=t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0;E&&r.push(new xxe({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration}));var q=t.shiftDragZoom!==void 0?t.shiftDragZoom:!0;return q&&r.push(new ZI({duration:t.zoomDuration})),r}var HAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KAt=function(e){HAt(t,e);function t(r){var n=e.call(this)||this;return n.map_=r,n}return t.prototype.dispatchRenderEvent=function(r,n){or()},t.prototype.calculateMatrices2D=function(r){var n=r.viewState,i=r.coordinateToPixelTransform,a=r.pixelToCoordinateTransform;Zl(i,r.size[0]/2,r.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),FI(a,i)},t.prototype.forEachFeatureAtCoordinate=function(r,n,i,a,h,p,g,b){var E,q=n.viewState;function P(sr,lr,cr,Kt){return h.call(p,lr,sr?cr:null,Kt)}var L=q.projection,W=Z_e(r.slice(),L),Q=[[0,0]];if(L.canWrapX()&&a){var V=L.getExtent(),$=Br(V);Q.push([-$,0],[$,0])}for(var H=n.layerStatesArray,re=H.length,se=[],Ie=[],qe=0;qe<Q.length;qe++)for(var Ae=re-1;Ae>=0;--Ae){var Ue=H[Ae],Le=Ue.layer;if(Le.hasRenderer()&&Tp(Ue,q)&&g.call(b,Le)){var $t=Le.getRenderer(),Rt=Le.getSource();if($t&&Rt){var ir=Rt.getWrapX()?W:r,Kr=P.bind(null,Ue.managed);Ie[0]=ir[0]+Q[qe][0],Ie[1]=ir[1]+Q[qe][1],E=$t.forEachFeatureAtCoordinate(Ie,n,i,Kr,se)}if(E)return E}}if(se.length!==0){var Mn=1/se.length;return se.forEach(function(sr,lr){return sr.distanceSq+=lr*Mn}),se.sort(function(sr,lr){return sr.distanceSq-lr.distanceSq}),se.some(function(sr){return E=sr.callback(sr.feature,sr.layer,sr.geometry)}),E}},t.prototype.forEachLayerAtPixel=function(r,n,i,a,h){return or()},t.prototype.hasFeatureAtCoordinate=function(r,n,i,a,h,p){var g=this.forEachFeatureAtCoordinate(r,n,i,a,Fh,this,h,p);return g!==void 0},t.prototype.getMap=function(){return this.map_},t.prototype.renderFrame=function(r){or()},t.prototype.scheduleExpireIconCache=function(r){vB.canExpireCache()&&r.postRenderFunctions.push(XAt)},t}(Rv);function XAt(e,t){vB.expire()}var Oxe=KAt;var YAt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JAt=function(e){YAt(t,e);function t(r){var n=e.call(this,r)||this;n.fontChangeListenerKey_=Zt(Nu,Vl.PROPERTYCHANGE,r.redrawText.bind(r)),n.element_=document.createElement("div");var i=n.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",n.element_.className=ys+" ol-layers";var a=r.getViewport();return a.insertBefore(n.element_,a.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return t.prototype.dispatchRenderEvent=function(r,n){var i=this.getMap();if(i.hasListener(r)){var a=new YI(r,void 0,n);i.dispatchEvent(a)}},t.prototype.disposeInternal=function(){gr(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},t.prototype.renderFrame=function(r){if(!r){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(r),this.dispatchRenderEvent(_s.PRECOMPOSE,r);var n=r.layerStatesArray.sort(function(L,W){return L.zIndex-W.zIndex}),i=r.viewState;this.children_.length=0;for(var a=[],h=null,p=0,g=n.length;p<g;++p){var b=n[p];r.layerIndex=p;var E=b.layer,q=E.getSourceState();if(!Tp(b,i)||q!="ready"&&q!="undefined"){E.unrender();continue}var P=E.render(r,h);P&&(P!==h&&(this.children_.push(P),h=P),"getDeclutter"in E&&a.push(E))}for(var p=a.length-1;p>=0;--p)a[p].renderDeclutter(r);txe(this.element_,this.children_),this.dispatchRenderEvent(_s.POSTCOMPOSE,r),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(r)},t.prototype.forEachLayerAtPixel=function(r,n,i,a,h){for(var p=n.viewState,g=n.layerStatesArray,b=g.length,E=b-1;E>=0;--E){var q=g[E],P=q.layer;if(P.hasRenderer()&&Tp(q,p)&&h(P)){var L=P.getRenderer(),W=L.getDataAtPixel(r,n,i);if(W){var Q=a(P,W);if(Q)return Q}}}},t}(Oxe),Rxe=JAt;var Dxe=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kl=function(e){Dxe(t,e);function t(r,n){var i=e.call(this,r)||this;return i.layer=n,i}return t}(aa);var yB={LAYERS:"layers"},QAt=function(e){Dxe(t,e);function t(r){var n=this,i=r||{},a=Er({},i);delete a.layers;var h=i.layers;return n=e.call(this,a)||this,n.on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(yB.LAYERS,n.handleLayersChanged_),h?Array.isArray(h)?h=new Oa(h.slice(),{unique:!0}):kt(typeof h.getArray=="function",43):h=new Oa(void 0,{unique:!0}),n.setLayers(h),n}return t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(gr),this.layersListenerKeys_.length=0;var r=this.getLayers();this.layersListenerKeys_.push(Zt(r,Ma.ADD,this.handleLayersAdd_,this),Zt(r,Ma.REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_)this.listenerKeys_[n].forEach(gr);Pu(this.listenerKeys_);for(var i=r.getArray(),a=0,h=i.length;a<h;a++){var p=i[a];this.registerLayerListeners_(p),this.dispatchEvent(new Kl("addlayer",p))}this.changed()},t.prototype.registerLayerListeners_=function(r){var n=[Zt(r,Vl.PROPERTYCHANGE,this.handleLayerChange_,this),Zt(r,dt.CHANGE,this.handleLayerChange_,this)];r instanceof t&&n.push(Zt(r,"addlayer",this.handleLayerGroupAdd_,this),Zt(r,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Un(r)]=n},t.prototype.handleLayerGroupAdd_=function(r){this.dispatchEvent(new Kl("addlayer",r.layer))},t.prototype.handleLayerGroupRemove_=function(r){this.dispatchEvent(new Kl("removelayer",r.layer))},t.prototype.handleLayersAdd_=function(r){var n=r.element;this.registerLayerListeners_(n),this.dispatchEvent(new Kl("addlayer",n)),this.changed()},t.prototype.handleLayersRemove_=function(r){var n=r.element,i=Un(n);this.listenerKeys_[i].forEach(gr),delete this.listenerKeys_[i],this.dispatchEvent(new Kl("removelayer",n)),this.changed()},t.prototype.getLayers=function(){return this.get(yB.LAYERS)},t.prototype.setLayers=function(r){var n=this.getLayers();if(n)for(var i=n.getArray(),a=0,h=i.length;a<h;++a)this.dispatchEvent(new Kl("removelayer",i[a]));this.set(yB.LAYERS,r)},t.prototype.getLayersArray=function(r){var n=r!==void 0?r:[];return this.getLayers().forEach(function(i){i.getLayersArray(n)}),n},t.prototype.getLayerStatesArray=function(r){var n=r!==void 0?r:[],i=n.length;this.getLayers().forEach(function(E){E.getLayerStatesArray(n)});var a=this.getLayerState(),h=a.zIndex;!r&&a.zIndex===void 0&&(h=0);for(var p=i,g=n.length;p<g;p++){var b=n[p];b.opacity*=a.opacity,b.visible=b.visible&&a.visible,b.maxResolution=Math.min(b.maxResolution,a.maxResolution),b.minResolution=Math.max(b.minResolution,a.minResolution),b.minZoom=Math.max(b.minZoom,a.minZoom),b.maxZoom=Math.min(b.maxZoom,a.maxZoom),a.extent!==void 0&&(b.extent!==void 0?b.extent=Dh(b.extent,a.extent):b.extent=a.extent),b.zIndex===void 0&&(b.zIndex=h)}return n},t.prototype.getSourceState=function(){return"ready"},t}(KI),Lx=QAt;var kx={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var eqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tqt=function(e){eqt(t,e);function t(r,n){var i=e.call(this,r)||this;i.map_=r,i.clickTimeoutId_,i.emulateClicks_=!1,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=n===void 0?1:n,i.down_=null;var a=i.map_.getViewport();return i.activePointers_=[],i.trackedTouches_={},i.element_=a,i.pointerdownListenerKey_=Zt(a,kx.POINTERDOWN,i.handlePointerDown_,i),i.originalPointerMoveEvent_,i.relayedListenerKey_=Zt(a,kx.POINTERMOVE,i.relayMoveEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener(dt.TOUCHMOVE,i.boundHandleTouchMove_,NI?{passive:!1}:!1),i}return t.prototype.emulateClick_=function(r){var n=new ku(Zr.CLICK,this.map_,r);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new ku(Zr.DBLCLICK,this.map_,r),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var i=new ku(Zr.SINGLECLICK,this.map_,r);this.dispatchEvent(i)}.bind(this),250)},t.prototype.updateActivePointers_=function(r){var n=r,i=n.pointerId;if(n.type==Zr.POINTERUP||n.type==Zr.POINTERCANCEL){delete this.trackedTouches_[i];for(var a in this.trackedTouches_)if(this.trackedTouches_[a].target!==n.target){delete this.trackedTouches_[a];break}}else(n.type==Zr.POINTERDOWN||n.type==Zr.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=M_e(this.trackedTouches_)},t.prototype.handlePointerUp_=function(r){this.updateActivePointers_(r);var n=new ku(Zr.POINTERUP,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(r)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(gr),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},t.prototype.isMouseActionButton_=function(r){return r.button===0},t.prototype.handlePointerDown_=function(r){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(r);var n=new ku(Zr.POINTERDOWN,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.down_={};for(var i in r){var a=r[i];this.down_[i]=typeof a=="function"?Gl:a}if(this.dragListenerKeys_.length===0){var h=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Zt(h,Zr.POINTERMOVE,this.handlePointerMove_,this),Zt(h,Zr.POINTERUP,this.handlePointerUp_,this),Zt(this.element_,Zr.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==h&&this.dragListenerKeys_.push(Zt(this.element_.getRootNode(),Zr.POINTERUP,this.handlePointerUp_,this))}},t.prototype.handlePointerMove_=function(r){if(this.isMoving_(r)){this.updateActivePointers_(r),this.dragging_=!0;var n=new ku(Zr.POINTERDRAG,this.map_,r,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}},t.prototype.relayMoveEvent_=function(r){this.originalPointerMoveEvent_=r;var n=!!(this.down_&&this.isMoving_(r));this.dispatchEvent(new ku(Zr.POINTERMOVE,this.map_,r,n))},t.prototype.handleTouchMove_=function(r){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof r.cancelable!="boolean"||r.cancelable===!0)&&r.preventDefault()},t.prototype.isMoving_=function(r){return this.dragging_||Math.abs(r.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(r.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&(gr(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(dt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(gr(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(gr),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},t}(Mu),Lxe=tqt;var Nx=1/0,rqt=function(){function e(t,r){this.priorityFunction_=t,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return e.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Pu(this.queuedElements_)},e.prototype.dequeue=function(){var t=this.elements_,r=this.priorities_,n=t[0];t.length==1?(t.length=0,r.length=0):(t[0]=t.pop(),r[0]=r.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},e.prototype.enqueue=function(t){kt(!(this.keyFunction_(t)in this.queuedElements_),31);var r=this.priorityFunction_(t);return r!=Nx?(this.elements_.push(t),this.priorities_.push(r),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},e.prototype.getCount=function(){return this.elements_.length},e.prototype.getLeftChildIndex_=function(t){return t*2+1},e.prototype.getRightChildIndex_=function(t){return t*2+2},e.prototype.getParentIndex_=function(t){return t-1>>1},e.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},e.prototype.isEmpty=function(){return this.elements_.length===0},e.prototype.isKeyQueued=function(t){return t in this.queuedElements_},e.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},e.prototype.siftUp_=function(t){for(var r=this.elements_,n=this.priorities_,i=r.length,a=r[t],h=n[t],p=t;t<i>>1;){var g=this.getLeftChildIndex_(t),b=this.getRightChildIndex_(t),E=b<i&&n[b]<n[g]?b:g;r[t]=r[E],n[t]=n[E],t=E}r[t]=a,n[t]=h,this.siftDown_(p,t)},e.prototype.siftDown_=function(t,r){for(var n=this.elements_,i=this.priorities_,a=n[r],h=i[r];r>t;){var p=this.getParentIndex_(r);if(i[p]>h)n[r]=n[p],i[r]=i[p],r=p;else break}n[r]=a,i[r]=h},e.prototype.reprioritize=function(){var t=this.priorityFunction_,r=this.elements_,n=this.priorities_,i=0,a=r.length,h,p,g;for(p=0;p<a;++p)h=r[p],g=t(h),g==Nx?delete this.queuedElements_[this.keyFunction_(h)]:(n[i]=g,r[i++]=h);r.length=i,n.length=i,this.heapify_()},e}(),kxe=rqt;var vt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var nqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iqt=function(e){nqt(t,e);function t(r,n){var i=e.call(this,function(a){return r.apply(null,a)},function(a){return a[0].getKey()})||this;return i.boundHandleTileChange_=i.handleTileChange.bind(i),i.tileChangeCallback_=n,i.tilesLoading_=0,i.tilesLoadingKeys_={},i}return t.prototype.enqueue=function(r){var n=e.prototype.enqueue.call(this,r);if(n){var i=r[0];i.addEventListener(dt.CHANGE,this.boundHandleTileChange_)}return n},t.prototype.getTilesLoading=function(){return this.tilesLoading_},t.prototype.handleTileChange=function(r){var n=r.target,i=n.getState();if(i===vt.LOADED||i===vt.ERROR||i===vt.EMPTY){n.removeEventListener(dt.CHANGE,this.boundHandleTileChange_);var a=n.getKey();a in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[a],--this.tilesLoading_),this.tileChangeCallback_()}},t.prototype.loadMoreTiles=function(r,n){for(var i=0,a,h,p;this.tilesLoading_<r&&i<n&&this.getCount()>0;)h=this.dequeue()[0],p=h.getKey(),a=h.getState(),a===vt.IDLE&&!(p in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[p]=!0,++this.tilesLoading_,++i,h.load())},t}(kxe),Nxe=iqt;function Fxe(e,t,r,n,i){if(!e||!(r in e.wantedTiles))return Nx;if(!e.wantedTiles[r][t.getKey()])return Nx;var a=e.viewState.center,h=n[0]-a[0],p=n[1]-a[1];return 65536*Math.log(i)+Math.sqrt(h*h+p*p)/i}var xs={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var zxe=42,Gv=256;function _B(e,t,r){return function(n,i,a,h,p){if(n){if(!i&&!t)return n;var g=t?0:a[0]*i,b=t?0:a[1]*i,E=p?p[0]:0,q=p?p[1]:0,P=e[0]+g/2+E,L=e[2]-g/2+E,W=e[1]+b/2+q,Q=e[3]-b/2+q;P>L&&(P=(L+P)/2,L=P),W>Q&&(W=(Q+W)/2,Q=W);var V=Wr(n[0],P,L),$=Wr(n[1],W,Q);if(h&&r&&i){var H=30*i;V+=-H*Math.log(1+Math.max(0,P-n[0])/H)+H*Math.log(1+Math.max(0,n[0]-L)/H),$+=-H*Math.log(1+Math.max(0,W-n[1])/H)+H*Math.log(1+Math.max(0,n[1]-Q)/H)}return[V,$]}}}function jxe(e){return e}function xB(e,t,r,n){var i=Br(t)/r[0],a=ei(t)/r[1];return n?Math.min(e,Math.max(i,a)):Math.min(e,Math.min(i,a))}function wB(e,t,r){var n=Math.min(e,t),i=50;return n*=Math.log(1+i*Math.max(0,e/t-1))/i+1,r&&(n=Math.max(n,r),n/=Math.log(1+i*Math.max(0,r/e-1))/i+1),Wr(n,r/2,t*2)}function Bxe(e,t,r,n){return function(i,a,h,p){if(i!==void 0){var g=e[0],b=e[e.length-1],E=r?xB(g,r,h,n):g;if(p){var q=t!==void 0?t:!0;return q?wB(i,E,b):Wr(i,b,E)}var P=Math.min(E,i),L=Math.floor(Dv(e,P,a));return e[L]>E&&L<e.length-1?e[L+1]:e[L]}else return}}function Uxe(e,t,r,n,i,a){return function(h,p,g,b){if(h!==void 0){var E=i?xB(t,i,g,a):t,q=r!==void 0?r:0;if(b){var P=n!==void 0?n:!0;return P?wB(h,E,q):Wr(h,q,E)}var L=1e-9,W=Math.ceil(Math.log(t/E)/Math.log(e)-L),Q=-p*(.5-L)+.5,V=Math.min(E,h),$=Math.floor(Math.log(t/V)/Math.log(e)+Q),H=Math.max(W,$),re=t/Math.pow(e,H);return Wr(re,q,E)}else return}}function bB(e,t,r,n,i){return function(a,h,p,g){if(a!==void 0){var b=n?xB(e,n,p,i):e,E=r!==void 0?r:!0;return!E||!g?Wr(a,t,b):wB(a,b,t)}else return}}var aqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),EB=0,oqt=function(e){aqt(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var i=Er({},r);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=OI(i.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,i.projection&&X_e(),i.center&&(i.center=Gs(i.center,n.projection_)),i.extent&&(i.extent=Nh(i.extent,n.projection_)),n.applyOptions_(i),n}return t.prototype.applyOptions_=function(r){var n=Er({},r);for(var i in xs)delete n[i];this.setProperties(n,!0);var a=uqt(r);this.maxResolution_=a.maxResolution,this.minResolution_=a.minResolution,this.zoomFactor_=a.zoomFactor,this.resolutions_=r.resolutions,this.padding_=r.padding,this.minZoom_=a.minZoom;var h=sqt(r),p=a.constraint,g=lqt(r);this.constraints_={center:h,resolution:p,rotation:g},this.setRotation(r.rotation!==void 0?r.rotation:0),this.setCenterInternal(r.center!==void 0?r.center:null),r.resolution!==void 0?this.setResolution(r.resolution):r.zoom!==void 0&&this.setZoom(r.zoom)},Object.defineProperty(t.prototype,"padding",{get:function(){return this.padding_},set:function(r){var n=this.padding_;this.padding_=r;var i=this.getCenter();if(i){var a=r||[0,0,0,0];n=n||[0,0,0,0];var h=this.getResolution(),p=h/2*(a[3]-n[3]+n[1]-a[1]),g=h/2*(a[0]-n[0]+n[2]-a[2]);this.setCenterInternal([i[0]+p,i[1]-g])}},enumerable:!1,configurable:!0}),t.prototype.getUpdatedOptions_=function(r){var n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Er({},n,r)},t.prototype.animate=function(r){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var a=arguments[i];a.center&&(a=Er({},a),a.center=Gs(a.center,this.getProjection())),a.anchor&&(a=Er({},a),a.anchor=Gs(a.anchor,this.getProjection())),n[i]=a}this.animateInternal.apply(this,n)},t.prototype.animateInternal=function(r){var n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);for(var a=0;a<n&&!this.isDef();++a){var h=arguments[a];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(a===n){i&&QI(i,!0);return}for(var p=Date.now(),g=this.targetCenter_.slice(),b=this.targetResolution_,E=this.targetRotation_,q=[];a<n;++a){var P=arguments[a],L={start:p,complete:!1,anchor:P.anchor,duration:P.duration!==void 0?P.duration:1e3,easing:P.easing||f0e,callback:i};if(P.center&&(L.sourceCenter=g,L.targetCenter=P.center.slice(),g=L.targetCenter),P.zoom!==void 0?(L.sourceResolution=b,L.targetResolution=this.getResolutionForZoom(P.zoom),b=L.targetResolution):P.resolution&&(L.sourceResolution=b,L.targetResolution=P.resolution,b=L.targetResolution),P.rotation!==void 0){L.sourceRotation=E;var W=$s(P.rotation-E+Math.PI,2*Math.PI)-Math.PI;L.targetRotation=E+W,E=L.targetRotation}cqt(L)?L.complete=!0:p+=L.duration,q.push(L)}this.animations_.push(q),this.setHint(lo.ANIMATING,1),this.updateAnimations_()},t.prototype.getAnimating=function(){return this.hints_[lo.ANIMATING]>0},t.prototype.getInteracting=function(){return this.hints_[lo.INTERACTING]>0},t.prototype.cancelAnimations=function(){this.setHint(lo.ANIMATING,-this.hints_[lo.ANIMATING]);for(var r,n=0,i=this.animations_.length;n<i;++n){var a=this.animations_[n];if(a[0].callback&&QI(a[0].callback,!1),!r)for(var h=0,p=a.length;h<p;++h){var g=a[h];if(!g.complete){r=g.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=r,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},t.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var r=Date.now(),n=!1,i=this.animations_.length-1;i>=0;--i){for(var a=this.animations_[i],h=!0,p=0,g=a.length;p<g;++p){var b=a[p];if(!b.complete){var E=r-b.start,q=b.duration>0?E/b.duration:1;q>=1?(b.complete=!0,q=1):h=!1;var P=b.easing(q);if(b.sourceCenter){var L=b.sourceCenter[0],W=b.sourceCenter[1],Q=b.targetCenter[0],V=b.targetCenter[1];this.nextCenter_=b.targetCenter;var $=L+P*(Q-L),H=W+P*(V-W);this.targetCenter_=[$,H]}if(b.sourceResolution&&b.targetResolution){var re=P===1?b.targetResolution:b.sourceResolution+P*(b.targetResolution-b.sourceResolution);if(b.anchor){var se=this.getViewportSize_(this.getRotation()),Ie=this.constraints_.resolution(re,0,se,!0);this.targetCenter_=this.calculateCenterZoom(Ie,b.anchor)}this.nextResolution_=b.targetResolution,this.targetResolution_=re,this.applyTargetState_(!0)}if(b.sourceRotation!==void 0&&b.targetRotation!==void 0){var qe=P===1?$s(b.targetRotation+Math.PI,2*Math.PI)-Math.PI:b.sourceRotation+P*(b.targetRotation-b.sourceRotation);if(b.anchor){var Ae=this.constraints_.rotation(qe,!0);this.targetCenter_=this.calculateCenterRotate(Ae,b.anchor)}this.nextRotation_=b.targetRotation,this.targetRotation_=qe}if(this.applyTargetState_(!0),n=!0,!b.complete)break}}if(h){this.animations_[i]=null,this.setHint(lo.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var Ue=a[0].callback;Ue&&QI(Ue,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},t.prototype.calculateCenterRotate=function(r,n){var i,a=this.getCenterInternal();return a!==void 0&&(i=[a[0]-n[0],a[1]-n[1]],Mv(i,r-this.getRotation()),G_e(i,n)),i},t.prototype.calculateCenterZoom=function(r,n){var i,a=this.getCenterInternal(),h=this.getResolution();if(a!==void 0&&h!==void 0){var p=n[0]-r*(n[0]-a[0])/h,g=n[1]-r*(n[1]-a[1])/h;i=[p,g]}return i},t.prototype.getViewportSize_=function(r){var n=this.viewportSize_;if(r){var i=n[0],a=n[1];return[Math.abs(i*Math.cos(r))+Math.abs(a*Math.sin(r)),Math.abs(i*Math.sin(r))+Math.abs(a*Math.cos(r))]}else return n},t.prototype.setViewportSize=function(r){this.viewportSize_=Array.isArray(r)?r.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},t.prototype.getCenter=function(){var r=this.getCenterInternal();return r&&Ax(r,this.getProjection())},t.prototype.getCenterInternal=function(){return this.get(xs.CENTER)},t.prototype.getConstraints=function(){return this.constraints_},t.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},t.prototype.getHints=function(r){return r!==void 0?(r[0]=this.hints_[0],r[1]=this.hints_[1],r):this.hints_.slice()},t.prototype.calculateExtent=function(r){var n=this.calculateExtentInternal(r);return Q_e(n,this.getProjection())},t.prototype.calculateExtentInternal=function(r){var n=r||this.getViewportSizeMinusPadding_(),i=this.getCenterInternal();kt(i,1);var a=this.getResolution();kt(a!==void 0,2);var h=this.getRotation();return kt(h!==void 0,3),Ix(i,a,h,n)},t.prototype.getMaxResolution=function(){return this.maxResolution_},t.prototype.getMinResolution=function(){return this.minResolution_},t.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},t.prototype.setMaxZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({maxZoom:r}))},t.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},t.prototype.setMinZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({minZoom:r}))},t.prototype.setConstrainResolution=function(r){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:r}))},t.prototype.getProjection=function(){return this.projection_},t.prototype.getResolution=function(){return this.get(xs.RESOLUTION)},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getResolutionForExtent=function(r,n){return this.getResolutionForExtentInternal(Nh(r,this.getProjection()),n)},t.prototype.getResolutionForExtentInternal=function(r,n){var i=n||this.getViewportSizeMinusPadding_(),a=Br(r)/i[0],h=ei(r)/i[1];return Math.max(a,h)},t.prototype.getResolutionForValueFunction=function(r){var n=r||2,i=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,h=Math.log(i/a)/Math.log(n);return function(p){var g=i/Math.pow(n,p*h);return g}},t.prototype.getRotation=function(){return this.get(xs.ROTATION)},t.prototype.getValueForResolutionFunction=function(r){var n=Math.log(r||2),i=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,h=Math.log(i/a)/n;return function(p){var g=Math.log(i/p)/n/h;return g}},t.prototype.getViewportSizeMinusPadding_=function(r){var n=this.getViewportSize_(r),i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n},t.prototype.getState=function(){var r=this.getProjection(),n=this.getResolution(),i=this.getRotation(),a=this.getCenterInternal(),h=this.padding_;if(h){var p=this.getViewportSizeMinusPadding_();a=SB(a,this.getViewportSize_(),[p[0]/2+h[3],p[1]/2+h[0]],n,i)}return{center:a.slice(0),projection:r!==void 0?r:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}},t.prototype.getZoom=function(){var r,n=this.getResolution();return n!==void 0&&(r=this.getZoomForResolution(n)),r},t.prototype.getZoomForResolution=function(r){var n=this.minZoom_||0,i,a;if(this.resolutions_){var h=Dv(this.resolutions_,r,1);n=h,i=this.resolutions_[h],h==this.resolutions_.length-1?a=2:a=i/this.resolutions_[h+1]}else i=this.maxResolution_,a=this.zoomFactor_;return n+Math.log(i/r)/Math.log(a)},t.prototype.getResolutionForZoom=function(r){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=Wr(Math.floor(r),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,Wr(r-n,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,r-this.minZoom_)},t.prototype.fit=function(r,n){var i;if(kt(Array.isArray(r)||typeof r.getSimplifiedGeometry=="function",24),Array.isArray(r)){kt(!Cx(r),25);var a=Nh(r,this.getProjection());i=Px(a)}else if(r.getType()==="Circle"){var a=Nh(r.getExtent(),this.getProjection());i=Px(a),i.rotate(this.getRotation(),Bl(a))}else{var h=J_e();h?i=r.clone().transform(h,this.getProjection()):i=r}this.fitInternal(i,n)},t.prototype.rotatedExtentForGeometry=function(r){for(var n=this.getRotation(),i=Math.cos(n),a=Math.sin(-n),h=r.getFlatCoordinates(),p=r.getStride(),g=1/0,b=1/0,E=-1/0,q=-1/0,P=0,L=h.length;P<L;P+=p){var W=h[P]*i-h[P+1]*a,Q=h[P]*a+h[P+1]*i;g=Math.min(g,W),b=Math.min(b,Q),E=Math.max(E,W),q=Math.max(q,Q)}return[g,b,E,q]},t.prototype.fitInternal=function(r,n){var i=n||{},a=i.size;a||(a=this.getViewportSizeMinusPadding_());var h=i.padding!==void 0?i.padding:[0,0,0,0],p=i.nearest!==void 0?i.nearest:!1,g;i.minResolution!==void 0?g=i.minResolution:i.maxZoom!==void 0?g=this.getResolutionForZoom(i.maxZoom):g=0;var b=this.rotatedExtentForGeometry(r),E=this.getResolutionForExtentInternal(b,[a[0]-h[1]-h[3],a[1]-h[0]-h[2]]);E=isNaN(E)?g:Math.max(E,g),E=this.getConstrainedResolution(E,p?0:1);var q=this.getRotation(),P=Math.sin(q),L=Math.cos(q),W=Bl(b);W[0]+=(h[1]-h[3])/2*E,W[1]+=(h[0]-h[2])/2*E;var Q=W[0]*L-W[1]*P,V=W[1]*L+W[0]*P,$=this.getConstrainedCenter([Q,V],E),H=i.callback?i.callback:Gl;i.duration!==void 0?this.animateInternal({resolution:E,center:$,duration:i.duration,easing:i.easing},H):(this.targetResolution_=E,this.targetCenter_=$,this.applyTargetState_(!1,!0),QI(H,!0))},t.prototype.centerOn=function(r,n,i){this.centerOnInternal(Gs(r,this.getProjection()),n,i)},t.prototype.centerOnInternal=function(r,n,i){this.setCenterInternal(SB(r,n,i,this.getResolution(),this.getRotation()))},t.prototype.calculateCenterShift=function(r,n,i,a){var h,p=this.padding_;if(p&&r){var g=this.getViewportSizeMinusPadding_(-i),b=SB(r,a,[g[0]/2+p[3],g[1]/2+p[0]],n,i);h=[r[0]-b[0],r[1]-b[1]]}return h},t.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},t.prototype.adjustCenter=function(r){var n=Ax(this.targetCenter_,this.getProjection());this.setCenter([n[0]+r[0],n[1]+r[1]])},t.prototype.adjustCenterInternal=function(r){var n=this.targetCenter_;this.setCenterInternal([n[0]+r[0],n[1]+r[1]])},t.prototype.adjustResolution=function(r,n){var i=n&&Gs(n,this.getProjection());this.adjustResolutionInternal(r,i)},t.prototype.adjustResolutionInternal=function(r,n){var i=this.getAnimating()||this.getInteracting(),a=this.getViewportSize_(this.getRotation()),h=this.constraints_.resolution(this.targetResolution_*r,0,a,i);n&&(this.targetCenter_=this.calculateCenterZoom(h,n)),this.targetResolution_*=r,this.applyTargetState_()},t.prototype.adjustZoom=function(r,n){this.adjustResolution(Math.pow(this.zoomFactor_,-r),n)},t.prototype.adjustRotation=function(r,n){n&&(n=Gs(n,this.getProjection())),this.adjustRotationInternal(r,n)},t.prototype.adjustRotationInternal=function(r,n){var i=this.getAnimating()||this.getInteracting(),a=this.constraints_.rotation(this.targetRotation_+r,i);n&&(this.targetCenter_=this.calculateCenterRotate(a,n)),this.targetRotation_+=r,this.applyTargetState_()},t.prototype.setCenter=function(r){this.setCenterInternal(r&&Gs(r,this.getProjection()))},t.prototype.setCenterInternal=function(r){this.targetCenter_=r,this.applyTargetState_()},t.prototype.setHint=function(r,n){return this.hints_[r]+=n,this.changed(),this.hints_[r]},t.prototype.setResolution=function(r){this.targetResolution_=r,this.applyTargetState_()},t.prototype.setRotation=function(r){this.targetRotation_=r,this.applyTargetState_()},t.prototype.setZoom=function(r){this.setResolution(this.getResolutionForZoom(r))},t.prototype.applyTargetState_=function(r,n){var i=this.getAnimating()||this.getInteracting()||n,a=this.constraints_.rotation(this.targetRotation_,i),h=this.getViewportSize_(a),p=this.constraints_.resolution(this.targetResolution_,0,h,i),g=this.constraints_.center(this.targetCenter_,p,h,i,this.calculateCenterShift(this.targetCenter_,p,a,h));this.get(xs.ROTATION)!==a&&this.set(xs.ROTATION,a),this.get(xs.RESOLUTION)!==p&&(this.set(xs.RESOLUTION,p),this.set("zoom",this.getZoom(),!0)),(!g||!this.get(xs.CENTER)||!Ep(this.get(xs.CENTER),g))&&this.set(xs.CENTER,g),this.getAnimating()&&!r&&this.cancelAnimations(),this.cancelAnchor_=void 0},t.prototype.resolveConstraints=function(r,n,i){var a=r!==void 0?r:200,h=n||0,p=this.constraints_.rotation(this.targetRotation_),g=this.getViewportSize_(p),b=this.constraints_.resolution(this.targetResolution_,h,g),E=this.constraints_.center(this.targetCenter_,b,g,!1,this.calculateCenterShift(this.targetCenter_,b,p,g));if(a===0&&!this.cancelAnchor_){this.targetResolution_=b,this.targetRotation_=p,this.targetCenter_=E,this.applyTargetState_();return}var q=i||(a===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==b||this.getRotation()!==p||!this.getCenterInternal()||!Ep(this.getCenterInternal(),E))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:p,center:E,resolution:b,duration:a,easing:gs,anchor:q}))},t.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(lo.INTERACTING,1)},t.prototype.endInteraction=function(r,n,i){var a=i&&Gs(i,this.getProjection());this.endInteractionInternal(r,n,a)},t.prototype.endInteractionInternal=function(r,n,i){this.setHint(lo.INTERACTING,-1),this.resolveConstraints(r,n,i)},t.prototype.getConstrainedCenter=function(r,n){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(r,n||this.getResolution(),i)},t.prototype.getConstrainedZoom=function(r,n){var i=this.getResolutionForZoom(r);return this.getZoomForResolution(this.getConstrainedResolution(i,n))},t.prototype.getConstrainedResolution=function(r,n){var i=n||0,a=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(r,i,a)},t}(yi);function QI(e,t){setTimeout(function(){e(t)},0)}function sqt(e){if(e.extent!==void 0){var t=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return _B(e.extent,e.constrainOnlyCenter,t)}var r=OI(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,_B(n,!1,!1)}return jxe}function uqt(e){var t,r,n,i=28,a=2,h=e.minZoom!==void 0?e.minZoom:EB,p=e.maxZoom!==void 0?e.maxZoom:i,g=e.zoomFactor!==void 0?e.zoomFactor:a,b=e.multiWorld!==void 0?e.multiWorld:!1,E=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,q=e.showFullExtent!==void 0?e.showFullExtent:!1,P=OI(e.projection,"EPSG:3857"),L=P.getExtent(),W=e.constrainOnlyCenter,Q=e.extent;if(!b&&!Q&&P.isGlobal()&&(W=!1,Q=L),e.resolutions!==void 0){var V=e.resolutions;r=V[h],n=V[p]!==void 0?V[p]:V[V.length-1],e.constrainResolution?t=Bxe(V,E,!W&&Q,q):t=bB(r,n,E,!W&&Q,q)}else{var $=L?Math.max(Br(L),ei(L)):360*ao[oo.DEGREES]/P.getMetersPerUnit(),H=$/Gv/Math.pow(a,EB),re=H/Math.pow(a,i-EB);r=e.maxResolution,r!==void 0?h=0:r=H/Math.pow(g,h),n=e.minResolution,n===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?n=r/Math.pow(g,p):n=H/Math.pow(g,p):n=re),p=h+Math.floor(Math.log(r/n)/Math.log(g)),n=r/Math.pow(g,p-h),e.constrainResolution?t=Uxe(g,r,n,E,!W&&Q,q):t=bB(r,n,E,!W&&Q,q)}return{constraint:t,maxResolution:r,minResolution:n,minZoom:h,zoomFactor:g}}function lqt(e){var t=e.enableRotation!==void 0?e.enableRotation:!0;if(t){var r=e.constrainRotation;return r===void 0||r===!0?mxe():r===!1?cB:typeof r=="number"?dxe(r):cB}else return Uv}function cqt(e){return!(e.sourceCenter&&e.targetCenter&&!Ep(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function SB(e,t,r,n,i){var a=Math.cos(-i),h=Math.sin(-i),p=e[0]*a-e[1]*h,g=e[1]*a+e[0]*h;p+=(t[0]/2-r[0])*n,g+=(r[1]-t[1]/2)*n,h=-h;var b=p*a-g*h,E=g*a+p*h;return[b,E]}var Fu=oqt;var hqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function Vxe(e){if(e instanceof Dx){e.setMapInternal(null);return}e instanceof Lx&&e.getLayers().forEach(Vxe)}function $xe(e,t){if(e instanceof Dx){e.setMapInternal(t);return}if(e instanceof Lx)for(var r=e.getLayers().getArray(),n=0,i=r.length;n<i;++n)$xe(r[n],t)}var fqt=function(e){hqt(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var i=pqt(r);n.renderComplete_,n.loaded_=!0,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=r.maxTilesLoading!==void 0?r.maxTilesLoading:16,n.pixelRatio_=r.pixelRatio!==void 0?r.pixelRatio:LI,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=Wl(),n.pixelToCoordinateTransform_=Wl(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=r.moveTolerance,n.keyboardEventTarget_=i.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=i.controls||new Oa,n.interactions=i.interactions||new Oa,n.overlays_=i.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new Nxe(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(Vn.LAYERGROUP,n.handleLayerGroupChanged_),n.addChangeListener(Vn.VIEW,n.handleViewChanged_),n.addChangeListener(Vn.SIZE,n.handleSizeChanged_),n.addChangeListener(Vn.TARGET,n.handleTargetChanged_),n.setProperties(i.values);var a=n;return r.view&&!(r.view instanceof Fu)&&r.view.then(function(h){a.setView(new Fu(h))}),n.controls.addEventListener(Ma.ADD,function(h){h.element.setMap(this)}.bind(n)),n.controls.addEventListener(Ma.REMOVE,function(h){h.element.setMap(null)}.bind(n)),n.interactions.addEventListener(Ma.ADD,function(h){h.element.setMap(this)}.bind(n)),n.interactions.addEventListener(Ma.REMOVE,function(h){h.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(Ma.ADD,function(h){this.addOverlayInternal_(h.element)}.bind(n)),n.overlays_.addEventListener(Ma.REMOVE,function(h){var p=h.element,g=p.getId();g!==void 0&&delete this.overlayIdIndex_[g.toString()],h.element.setMap(null)}.bind(n)),n.controls.forEach(function(h){h.setMap(this)}.bind(n)),n.interactions.forEach(function(h){h.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return t.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(r){this.getControls().push(r)},t.prototype.addInteraction=function(r){this.getInteractions().push(r)},t.prototype.addLayer=function(r){var n=this.getLayerGroup().getLayers();n.push(r)},t.prototype.handleLayerAdd_=function(r){$xe(r.layer,this)},t.prototype.addOverlay=function(r){this.getOverlays().push(r)},t.prototype.addOverlayInternal_=function(r){var n=r.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=r),r.setMap(this)},t.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),e.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(r,n,i){if(!(!this.frameState_||!this.renderer_)){var a=this.getCoordinateFromPixelInternal(r);i=i!==void 0?i:{};var h=i.hitTolerance!==void 0?i.hitTolerance:0,p=i.layerFilter!==void 0?i.layerFilter:Fh,g=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(a,this.frameState_,h,g,n,null,p,null)}},t.prototype.getFeaturesAtPixel=function(r,n){var i=[];return this.forEachFeatureAtPixel(r,function(a){i.push(a)},n),i},t.prototype.getAllLayers=function(){var r=[];function n(i){i.forEach(function(a){a instanceof Lx?n(a.getLayers()):r.push(a)})}return n(this.getLayers()),r},t.prototype.forEachLayerAtPixel=function(r,n,i){if(!(!this.frameState_||!this.renderer_)){var a=i||{},h=a.hitTolerance!==void 0?a.hitTolerance:0,p=a.layerFilter||Fh;return this.renderer_.forEachLayerAtPixel(r,this.frameState_,h,n,p)}},t.prototype.hasFeatureAtPixel=function(r,n){if(!this.frameState_||!this.renderer_)return!1;var i=this.getCoordinateFromPixelInternal(r);n=n!==void 0?n:{};var a=n.layerFilter!==void 0?n.layerFilter:Fh,h=n.hitTolerance!==void 0?n.hitTolerance:0,p=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,h,p,a,null)},t.prototype.getEventCoordinate=function(r){return this.getCoordinateFromPixel(this.getEventPixel(r))},t.prototype.getEventCoordinateInternal=function(r){return this.getCoordinateFromPixelInternal(this.getEventPixel(r))},t.prototype.getEventPixel=function(r){var n=this.viewport_.getBoundingClientRect(),i="changedTouches"in r?r.changedTouches[0]:r;return[i.clientX-n.left,i.clientY-n.top]},t.prototype.getTarget=function(){return this.get(Vn.TARGET)},t.prototype.getTargetElement=function(){var r=this.getTarget();return r!==void 0?typeof r=="string"?document.getElementById(r):r:null},t.prototype.getCoordinateFromPixel=function(r){return Ax(this.getCoordinateFromPixelInternal(r),this.getView().getProjection())},t.prototype.getCoordinateFromPixelInternal=function(r){var n=this.frameState_;return n?ki(n.pixelToCoordinateTransform,r.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(r){var n=this.overlayIdIndex_[r.toString()];return n!==void 0?n:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get(Vn.LAYERGROUP)},t.prototype.setLayers=function(r){var n=this.getLayerGroup();if(r instanceof Oa){n.setLayers(r);return}var i=n.getLayers();i.clear(),i.extend(r)},t.prototype.getLayers=function(){var r=this.getLayerGroup().getLayers();return r},t.prototype.getLoadingOrNotReady=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,i=r.length;n<i;++n){var a=r[n];if(a.visible){var h=a.layer.getRenderer();if(h&&!h.ready)return!0;var p=a.layer.getSource();if(p&&p.loading)return!0}}return!1},t.prototype.getPixelFromCoordinate=function(r){var n=Gs(r,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},t.prototype.getPixelFromCoordinateInternal=function(r){var n=this.frameState_;return n?ki(n.coordinateToPixelTransform,r.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get(Vn.SIZE)},t.prototype.getView=function(){return this.get(Vn.VIEW)},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getOwnerDocument=function(){var r=this.getTargetElement();return r?r.ownerDocument:document},t.prototype.getTilePriority=function(r,n,i,a){return Fxe(this.frameState_,r,n,i,a)},t.prototype.handleBrowserEvent=function(r,n){var i=n||r.type,a=new ku(i,this,r);this.handleMapBrowserEvent(a)},t.prototype.handleMapBrowserEvent=function(r){if(this.frameState_){var n=r.originalEvent,i=n.type;if(i===kx.POINTERDOWN||i===dt.WHEEL||i===dt.KEYDOWN){var a=this.getOwnerDocument(),h=this.viewport_.getRootNode?this.viewport_.getRootNode():a,p=n.target;if(this.overlayContainerStopEvent_.contains(p)||!(h===a?a.documentElement:h).contains(p))return}if(r.frameState=this.frameState_,this.dispatchEvent(r)!==!1)for(var g=this.getInteractions().getArray().slice(),b=g.length-1;b>=0;b--){var E=g[b];if(!(E.getMap()!==this||!E.getActive()||!this.getTargetElement())){var q=E.handleEvent(r);if(!q||r.propagationStopped)break}}}},t.prototype.handlePostRender=function(){var r=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var i=this.maxTilesLoading_,a=i;if(r){var h=r.viewHints;if(h[lo.ANIMATING]||h[lo.INTERACTING]){var p=Date.now()-r.time>8;i=p?0:8,a=p?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,a))}r&&this.renderer_&&!r.animate&&(this.renderComplete_===!0?(this.hasListener(_s.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(_s.RENDERCOMPLETE,r),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Uh(Du.LOADEND,this,r)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Uh(Du.LOADSTART,this,r))));for(var g=this.postRenderFunctions_,b=0,E=g.length;b<E;++b)g[b](this,r);g.length=0},t.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},t.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var r=0,n=this.targetChangeHandlerKeys_.length;r<n;++r)gr(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(dt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(dt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Ox(this.viewport_)}var i=this.getTargetElement();if(!i)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{i.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Lxe(this,this.moveTolerance_);for(var a in Zr)this.mapBrowserEventHandler_.addEventListener(Zr[a],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(dt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(dt.WHEEL,this.boundHandleBrowserEvent_,NI?{passive:!1}:!1);var h=this.getOwnerDocument().defaultView,p=this.keyboardEventTarget_?this.keyboardEventTarget_:i;this.targetChangeHandlerKeys_=[Zt(p,dt.KEYDOWN,this.handleBrowserEvent,this),Zt(p,dt.KEYPRESS,this.handleBrowserEvent,this),Zt(h,dt.RESIZE,this.updateSize,this)]}this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(gr(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(gr(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var r=this.getView();r&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Zt(r,Vl.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Zt(r,dt.CHANGE,this.handleViewPropertyChanged_,this),r.resolveConstraints(0)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(gr),this.layerGroupPropertyListenerKeys_=null);var r=this.getLayerGroup();r&&(this.handleLayerAdd_(new Kl("addlayer",r)),this.layerGroupPropertyListenerKeys_=[Zt(r,Vl.PROPERTYCHANGE,this.render,this),Zt(r,dt.CHANGE,this.render,this),Zt(r,"addlayer",this.handleLayerAdd_,this),Zt(r,"removelayer",this.handleLayerRemove_,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.redrawText=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,i=r.length;n<i;++n){var a=r[n].layer;a.hasRenderer()&&a.getRenderer().handleFontsChanged()}},t.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(r){return this.getControls().remove(r)},t.prototype.removeInteraction=function(r){return this.getInteractions().remove(r)},t.prototype.removeLayer=function(r){var n=this.getLayerGroup().getLayers();return n.remove(r)},t.prototype.handleLayerRemove_=function(r){Vxe(r.layer)},t.prototype.removeOverlay=function(r){return this.getOverlays().remove(r)},t.prototype.renderFrame_=function(r){var n=this,i=this.getSize(),a=this.getView(),h=this.frameState_,p=null;if(i!==void 0&&pB(i)&&a&&a.isDef()){var g=a.getHints(this.frameState_?this.frameState_.viewHints:void 0),b=a.getState();if(p={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Ix(b.center,b.resolution,b.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:r,usedTiles:{},viewState:b,viewHints:g,wantedTiles:{},mapId:Un(this),renderTargets:{}},b.nextCenter&&b.nextResolution){var E=isNaN(b.nextRotation)?b.rotation:b.nextRotation;p.nextExtent=Ix(b.nextCenter,b.nextResolution,E,i)}}if(this.frameState_=p,this.renderer_.renderFrame(p),p){if(p.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,p.postRenderFunctions),h){var q=!this.previousExtent_||!Cx(this.previousExtent_)&&!Ex(p.extent,this.previousExtent_);q&&(this.dispatchEvent(new Uh(Du.MOVESTART,this,h)),this.previousExtent_=Cv(this.previousExtent_))}var P=this.previousExtent_&&!p.viewHints[lo.ANIMATING]&&!p.viewHints[lo.INTERACTING]&&!Ex(p.extent,this.previousExtent_);P&&(this.dispatchEvent(new Uh(Du.MOVEEND,this,p)),L_e(p.extent,this.previousExtent_))}this.dispatchEvent(new Uh(Du.POSTRENDER,this,p)),this.renderComplete_=this.hasListener(Du.LOADSTART)||this.hasListener(Du.LOADEND)||this.hasListener(_s.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},t.prototype.setLayerGroup=function(r){var n=this.getLayerGroup();n&&this.handleLayerRemove_(new Kl("removelayer",n)),this.set(Vn.LAYERGROUP,r)},t.prototype.setSize=function(r){this.set(Vn.SIZE,r)},t.prototype.setTarget=function(r){this.set(Vn.TARGET,r)},t.prototype.setView=function(r){if(!r||r instanceof Fu){this.set(Vn.VIEW,r);return}this.set(Vn.VIEW,new Fu);var n=this;r.then(function(i){n.setView(new Fu(i))})},t.prototype.updateSize=function(){var r=this.getTargetElement(),n=void 0;if(r){var i=getComputedStyle(r),a=r.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),h=r.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(a)&&!isNaN(h)&&(n=[a,h],!pB(n)&&(r.offsetWidth||r.offsetHeight||r.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(n),this.updateViewportSize_()},t.prototype.updateViewportSize_=function(){var r=this.getView();if(r){var n=void 0,i=getComputedStyle(this.viewport_);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),r.setViewportSize(n)}},t}(yi);function pqt(e){var t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var r={},n=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new Lx({layers:e.layers});r[Vn.LAYERGROUP]=n,r[Vn.TARGET]=e.target,r[Vn.VIEW]=e.view instanceof Fu?e.view:new Fu;var i;e.controls!==void 0&&(Array.isArray(e.controls)?i=new Oa(e.controls.slice()):(kt(typeof e.controls.getArray=="function",47),i=e.controls));var a;e.interactions!==void 0&&(Array.isArray(e.interactions)?a=new Oa(e.interactions.slice()):(kt(typeof e.interactions.getArray=="function",48),a=e.interactions));var h;return e.overlays!==void 0?Array.isArray(e.overlays)?h=new Oa(e.overlays.slice()):(kt(typeof e.overlays.getArray=="function",49),h=e.overlays):h=new Oa,{controls:i,interactions:a,keyboardEventTarget:t,overlays:h,values:r}}var Gxe=fqt;var dqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mqt=function(e){dqt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this,n.ulElement_=document.createElement("ul"),n.collapsed_=i.collapsed!==void 0?i.collapsed:!0,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=i.collapsible!==void 0,n.collapsible_=i.collapsible!==void 0?i.collapsible:!0,n.collapsible_||(n.collapsed_=!1);var a=i.className!==void 0?i.className:"ol-attribution",h=i.tipLabel!==void 0?i.tipLabel:"Attributions",p=i.expandClassName!==void 0?i.expandClassName:a+"-expand",g=i.collapseLabel!==void 0?i.collapseLabel:"\u203A",b=i.collapseClassName!==void 0?i.collapseClassName:a+"-collapse";typeof g=="string"?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=g,n.collapseLabel_.className=b):n.collapseLabel_=g;var E=i.label!==void 0?i.label:"i";typeof E=="string"?(n.label_=document.createElement("span"),n.label_.textContent=E,n.label_.className=p):n.label_=E;var q=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=h,n.toggleButton_.appendChild(q),n.toggleButton_.addEventListener(dt.CLICK,n.handleClick_.bind(n),!1);var P=a+" "+ys+" "+Lu+(n.collapsed_&&n.collapsible_?" "+lB:"")+(n.collapsible_?"":" ol-uncollapsible"),L=n.element;return L.className=P,L.appendChild(n.toggleButton_),L.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return t.prototype.collectSourceAttributions_=function(r){for(var n={},i=[],a=!0,h=r.layerStatesArray,p=0,g=h.length;p<g;++p){var b=h[p];if(Tp(b,r.viewState)){var E=b.layer.getSource();if(E){var q=E.getAttributions();if(q){var P=q(r);if(P)if(a=a&&E.getAttributionsCollapsible()!==!1,Array.isArray(P))for(var L=0,W=P.length;L<W;++L)P[L]in n||(i.push(P[L]),n[P[L]]=!0);else P in n||(i.push(P),n[P]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(a),i},t.prototype.updateElement_=function(r){if(!r){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var n=this.collectSourceAttributions_(r),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Lv(n,this.renderedAttributions_)){exe(this.ulElement_);for(var a=0,h=n.length;a<h;++a){var p=document.createElement("li");p.innerHTML=n[a],this.ulElement_.appendChild(p)}this.renderedAttributions_=n}},t.prototype.handleClick_=function(r){r.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},t.prototype.handleToggle_=function(){this.element.classList.toggle(lB),this.collapsed_?Bv(this.collapseLabel_,this.label_):Bv(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(r){this.collapsible_!==r&&(this.collapsible_=r,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(r){this.userCollapsed_=r,!(!this.collapsible_||this.collapsed_===r)&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.render=function(r){this.updateElement_(r.frameState)},t}(Do),Wxe=mqt;var vqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gqt=function(e){vqt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this;var a=i.className!==void 0?i.className:"ol-rotate",h=i.label!==void 0?i.label:"\u21E7",p=i.compassClassName!==void 0?i.compassClassName:"ol-compass";n.label_=null,typeof h=="string"?(n.label_=document.createElement("span"),n.label_.className=p,n.label_.textContent=h):(n.label_=h,n.label_.classList.add(p));var g=i.tipLabel?i.tipLabel:"Reset rotation",b=document.createElement("button");b.className=a+"-reset",b.setAttribute("type","button"),b.title=g,b.appendChild(n.label_),b.addEventListener(dt.CLICK,n.handleClick_.bind(n),!1);var E=a+" "+ys+" "+Lu,q=n.element;return q.className=E,q.appendChild(b),n.callResetNorth_=i.resetNorth?i.resetNorth:void 0,n.duration_=i.duration!==void 0?i.duration:250,n.autoHide_=i.autoHide!==void 0?i.autoHide:!0,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(Rx),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},t.prototype.resetNorth_=function(){var r=this.getMap(),n=r.getView();if(n){var i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:gs}):n.setRotation(0))}},t.prototype.render=function(r){var n=r.frameState;if(n){var i=n.viewState.rotation;if(i!=this.rotation_){var a="rotate("+i+"rad)";if(this.autoHide_){var h=this.element.classList.contains(Rx);!h&&i===0?this.element.classList.add(Rx):h&&i!==0&&this.element.classList.remove(Rx)}this.label_.style.transform=a}this.rotation_=i}},t}(Do),Zxe=gqt;var yqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_qt=function(e){yqt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,{element:document.createElement("div"),target:i.target})||this;var a=i.className!==void 0?i.className:"ol-zoom",h=i.delta!==void 0?i.delta:1,p=i.zoomInClassName!==void 0?i.zoomInClassName:a+"-in",g=i.zoomOutClassName!==void 0?i.zoomOutClassName:a+"-out",b=i.zoomInLabel!==void 0?i.zoomInLabel:"+",E=i.zoomOutLabel!==void 0?i.zoomOutLabel:"\u2013",q=i.zoomInTipLabel!==void 0?i.zoomInTipLabel:"Zoom in",P=i.zoomOutTipLabel!==void 0?i.zoomOutTipLabel:"Zoom out",L=document.createElement("button");L.className=p,L.setAttribute("type","button"),L.title=q,L.appendChild(typeof b=="string"?document.createTextNode(b):b),L.addEventListener(dt.CLICK,n.handleClick_.bind(n,h),!1);var W=document.createElement("button");W.className=g,W.setAttribute("type","button"),W.title=P,W.appendChild(typeof E=="string"?document.createTextNode(E):E),W.addEventListener(dt.CLICK,n.handleClick_.bind(n,-h),!1);var Q=a+" "+ys+" "+Lu,V=n.element;return V.className=Q,V.appendChild(L),V.appendChild(W),n.duration_=i.duration!==void 0?i.duration:250,n}return t.prototype.handleClick_=function(r,n){n.preventDefault(),this.zoomByDelta_(r)},t.prototype.zoomByDelta_=function(r){var n=this.getMap(),i=n.getView();if(i){var a=i.getZoom();if(a!==void 0){var h=i.getConstrainedZoom(a+r);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:h,duration:this.duration_,easing:gs})):i.setZoom(h)}}},t}(Do),eC=_qt;var xqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wqt=function(e){xqt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,{element:document.createElement("div"),target:i.target})||this,n.extent=i.extent?i.extent:null;var a=i.className!==void 0?i.className:"ol-zoom-extent",h=i.label!==void 0?i.label:"E",p=i.tipLabel!==void 0?i.tipLabel:"Fit to extent",g=document.createElement("button");g.setAttribute("type","button"),g.title=p,g.appendChild(typeof h=="string"?document.createTextNode(h):h),g.addEventListener(dt.CLICK,n.handleClick_.bind(n),!1);var b=a+" "+ys+" "+Lu,E=n.element;return E.className=b,E.appendChild(g),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.handleZoomToExtent()},t.prototype.handleZoomToExtent=function(){var r=this.getMap(),n=r.getView(),i=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(Px(i))},t}(Do),Hxe=wqt;function Kxe(e){var t=e||{},r=new Oa,n=t.zoom!==void 0?t.zoom:!0;n&&r.push(new eC(t.zoomOptions));var i=t.rotate!==void 0?t.rotate:!0;i&&r.push(new Zxe(t.rotateOptions));var a=t.attribution!==void 0?t.attribution:!0;return a&&r.push(new Wxe(t.attributionOptions)),r}var bqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Eqt=function(e){bqt(t,e);function t(r){return r=Er({},r),r.controls||(r.controls=Kxe()),r.interactions||(r.interactions=JI({onFocusOnly:!0})),e.call(this,r)||this}return t.prototype.createRenderer=function(){return new Rxe(this)},t}(Gxe),tC=Eqt;var Fx={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var Sqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tqt=function(e){Sqt(t,e);function t(r){var n=this,i=r||{},a=Er({},i);return delete a.preload,delete a.useInterimTilesOnError,n=e.call(this,a)||this,n.on,n.once,n.un,n.setPreload(i.preload!==void 0?i.preload:0),n.setUseInterimTilesOnError(i.useInterimTilesOnError!==void 0?i.useInterimTilesOnError:!0),n}return t.prototype.getPreload=function(){return this.get(Fx.PRELOAD)},t.prototype.setPreload=function(r){this.set(Fx.PRELOAD,r)},t.prototype.getUseInterimTilesOnError=function(){return this.get(Fx.USE_INTERIM_TILES_ON_ERROR)},t.prototype.setUseInterimTilesOnError=function(r){this.set(Fx.USE_INTERIM_TILES_ON_ERROR,r)},t.prototype.getData=function(r){return e.prototype.getData.call(this,r)},t}(Dx),Xxe=Tqt;var Iqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cqt=function(e){Iqt(t,e);function t(r,n,i){var a=e.call(this)||this,h=i||{};return a.tileCoord=r,a.state=n,a.interimTile=null,a.key="",a.transition_=h.transition===void 0?250:h.transition,a.transitionStarts_={},a.interpolate=!!h.interpolate,a}return t.prototype.changed=function(){this.dispatchEvent(dt.CHANGE)},t.prototype.release=function(){},t.prototype.getKey=function(){return this.key+"/"+this.tileCoord},t.prototype.getInterimTile=function(){if(!this.interimTile)return this;var r=this.interimTile;do{if(r.getState()==vt.LOADED)return this.transition_=0,r;r=r.interimTile}while(r);return this},t.prototype.refreshInterimChain=function(){if(this.interimTile){var r=this.interimTile,n=this;do{if(r.getState()==vt.LOADED){r.interimTile=null;break}else r.getState()==vt.LOADING?n=r:r.getState()==vt.IDLE?n.interimTile=r.interimTile:n=r;r=n.interimTile}while(r)}},t.prototype.getTileCoord=function(){return this.tileCoord},t.prototype.getState=function(){return this.state},t.prototype.setState=function(r){if(this.state!==vt.ERROR&&this.state>r)throw new Error("Tile load sequence violation");this.state=r,this.changed()},t.prototype.load=function(){or()},t.prototype.getAlpha=function(r,n){if(!this.transition_)return 1;var i=this.transitionStarts_[r];if(!i)i=n,this.transitionStarts_[r]=i;else if(i===-1)return 1;var a=n-i+1e3/60;return a>=this.transition_?1:Yj(a/this.transition_)},t.prototype.inTransition=function(r){return this.transition_?this.transitionStarts_[r]!==-1:!1},t.prototype.endTransition=function(r){this.transition_&&(this.transitionStarts_[r]=-1)},t}(Mu),rC=Cqt;var Aqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qqt=function(e){Aqt(t,e);function t(r,n,i,a,h,p){var g=e.call(this,r,n,p)||this;return g.crossOrigin_=a,g.src_=i,g.key=i,g.image_=new Image,a!==null&&(g.image_.crossOrigin=a),g.unlisten_=null,g.tileLoadFunction_=h,g}return t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(r){this.image_=r,this.state=vt.LOADED,this.unlistenImage_(),this.changed()},t.prototype.handleImageError_=function(){this.state=vt.ERROR,this.unlistenImage_(),this.image_=Pqt(),this.changed()},t.prototype.handleImageLoad_=function(){var r=this.image_;r.naturalWidth&&r.naturalHeight?this.state=vt.LOADED:this.state=vt.EMPTY,this.unlistenImage_(),this.changed()},t.prototype.load=function(){this.state==vt.ERROR&&(this.state=vt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==vt.IDLE&&(this.state=vt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=gB(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(rC);function Pqt(){var e=Hl(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}var nC=qqt;var Yxe=.5,zu=!0;var Mqt=10,Jxe=.25,Oqt=function(){function e(t,r,n,i,a,h){this.sourceProj_=t,this.targetProj_=r;var p={},g=Sp(this.targetProj_,this.sourceProj_);this.transformInv_=function(re){var se=re[0]+"/"+re[1];return p[se]||(p[se]=g(re)),p[se]},this.maxSourceExtent_=i,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Br(i)==Br(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Br(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Br(this.targetProj_.getExtent()):null;var b=vs(n),E=Pv(n),q=qv(n),P=Av(n),L=this.transformInv_(b),W=this.transformInv_(E),Q=this.transformInv_(q),V=this.transformInv_(P),$=Mqt+(h?Math.max(0,Math.ceil(w_e(Tx(n)/(h*h*256*256)))):0);if(this.addQuad_(b,E,q,P,L,W,Q,V,$),this.wrapsXInSource_){var H=1/0;this.triangles_.forEach(function(re,se,Ie){H=Math.min(H,re.source[0][0],re.source[1][0],re.source[2][0])}),this.triangles_.forEach(function(re){if(Math.max(re.source[0][0],re.source[1][0],re.source[2][0])-H>this.sourceWorldWidth_/2){var se=[[re.source[0][0],re.source[0][1]],[re.source[1][0],re.source[1][1]],[re.source[2][0],re.source[2][1]]];se[0][0]-H>this.sourceWorldWidth_/2&&(se[0][0]-=this.sourceWorldWidth_),se[1][0]-H>this.sourceWorldWidth_/2&&(se[1][0]-=this.sourceWorldWidth_),se[2][0]-H>this.sourceWorldWidth_/2&&(se[2][0]-=this.sourceWorldWidth_);var Ie=Math.min(se[0][0],se[1][0],se[2][0]),qe=Math.max(se[0][0],se[1][0],se[2][0]);qe-Ie<this.sourceWorldWidth_/2&&(re.source=se)}}.bind(this))}p={}}return e.prototype.addTriangle_=function(t,r,n,i,a,h){this.triangles_.push({source:[i,a,h],target:[t,r,n]})},e.prototype.addQuad_=function(t,r,n,i,a,h,p,g,b){var E=Bj([a,h,p,g]),q=this.sourceWorldWidth_?Br(E)/this.sourceWorldWidth_:null,P=this.sourceWorldWidth_,L=this.sourceProj_.canWrapX()&&q>.5&&q<1,W=!1;if(b>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var Q=Bj([t,r,n,i]),V=Br(Q)/this.targetWorldWidth_;W=V>Jxe||W}!L&&this.sourceProj_.isGlobal()&&q&&(W=q>Jxe||W)}if(!(!W&&this.maxSourceExtent_&&isFinite(E[0])&&isFinite(E[1])&&isFinite(E[2])&&isFinite(E[3])&&!bp(E,this.maxSourceExtent_))){var $=0;if(!W&&(!isFinite(a[0])||!isFinite(a[1])||!isFinite(h[0])||!isFinite(h[1])||!isFinite(p[0])||!isFinite(p[1])||!isFinite(g[0])||!isFinite(g[1]))){if(b>0)W=!0;else if($=(!isFinite(a[0])||!isFinite(a[1])?8:0)+(!isFinite(h[0])||!isFinite(h[1])?4:0)+(!isFinite(p[0])||!isFinite(p[1])?2:0)+(!isFinite(g[0])||!isFinite(g[1])?1:0),$!=1&&$!=2&&$!=4&&$!=8)return}if(b>0){if(!W){var H=[(t[0]+n[0])/2,(t[1]+n[1])/2],re=this.transformInv_(H),se=void 0;if(L){var Ie=($s(a[0],P)+$s(p[0],P))/2;se=Ie-$s(re[0],P)}else se=(a[0]+p[0])/2-re[0];var qe=(a[1]+p[1])/2-re[1],Ae=se*se+qe*qe;W=Ae>this.errorThresholdSquared_}if(W){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var Ue=[(r[0]+n[0])/2,(r[1]+n[1])/2],Le=this.transformInv_(Ue),$t=[(i[0]+t[0])/2,(i[1]+t[1])/2],Rt=this.transformInv_($t);this.addQuad_(t,r,Ue,$t,a,h,Le,Rt,b-1),this.addQuad_($t,Ue,n,i,Rt,Le,p,g,b-1)}else{var ir=[(t[0]+r[0])/2,(t[1]+r[1])/2],Kr=this.transformInv_(ir),Mn=[(n[0]+i[0])/2,(n[1]+i[1])/2],sr=this.transformInv_(Mn);this.addQuad_(t,ir,Mn,i,a,Kr,sr,g,b-1),this.addQuad_(ir,r,n,Mn,Kr,h,p,sr,b-1)}return}}if(L){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}$&11||this.addTriangle_(t,n,i,a,p,g),$&14||this.addTriangle_(t,n,r,a,p,h),$&&($&13||this.addTriangle_(r,i,t,h,g,a),$&7||this.addTriangle_(r,i,n,h,g,p))}},e.prototype.calculateSourceExtent=function(){var t=so();return this.triangles_.forEach(function(r,n,i){var a=r.source;Sx(t,a[0]),Sx(t,a[1]),Sx(t,a[2])}),t},e.prototype.getTriangles=function(){return this.triangles_},e}(),Qxe=Oqt;var zx={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},e1e={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0};var TB,CB=[];function t1e(e,t,r,n,i){e.beginPath(),e.moveTo(0,0),e.lineTo(t,r),e.lineTo(n,i),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(r,i)),e.restore()}function IB(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function Rqt(){if(TB===void 0){var e=document.createElement("canvas").getContext("2d");e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",t1e(e,4,5,4,0),t1e(e,4,5,0,5);var t=e.getImageData(0,0,3,3).data;TB=IB(t,0)||IB(t,4)||IB(t,8)}return TB}function iC(e,t,r,n){var i=Ov(r,t,e),a=Hj(t,n,r),h=t.getMetersPerUnit();h!==void 0&&(a*=h);var p=e.getMetersPerUnit();p!==void 0&&(a/=p);var g=e.getExtent();if(!g||Rh(g,i)){var b=Hj(e,a,i)/a;isFinite(b)&&b>0&&(a/=b)}return a}function r1e(e,t,r,n){var i=Bl(r),a=iC(e,t,i,n);return(!isFinite(a)||a<=0)&&PI(r,function(h){return a=iC(e,t,h,n),isFinite(a)&&a>0}),a}function n1e(e,t,r,n,i,a,h,p,g,b,E,q){var P=Hl(Math.round(r*e),Math.round(r*t),CB);if(q||Er(P,zx),g.length===0)return P.canvas;P.scale(r,r);function L(se){return Math.round(se*r)/r}P.globalCompositeOperation="lighter";var W=so();g.forEach(function(se,Ie,qe){z_e(W,se.extent)});var Q=Br(W),V=ei(W),$=Hl(Math.round(r*Q/n),Math.round(r*V/n));q||Er($,zx);var H=r/n;g.forEach(function(se,Ie,qe){var Ae=se.extent[0]-W[0],Ue=-(se.extent[3]-W[3]),Le=Br(se.extent),$t=ei(se.extent);se.image.width>0&&se.image.height>0&&$.drawImage(se.image,b,b,se.image.width-2*b,se.image.height-2*b,Ae*H,Ue*H,Le*H,$t*H)});var re=vs(h);return p.getTriangles().forEach(function(se,Ie,qe){var Ae=se.source,Ue=se.target,Le=Ae[0][0],$t=Ae[0][1],Rt=Ae[1][0],ir=Ae[1][1],Kr=Ae[2][0],Mn=Ae[2][1],sr=L((Ue[0][0]-re[0])/a),lr=L(-(Ue[0][1]-re[1])/a),cr=L((Ue[1][0]-re[0])/a),Kt=L(-(Ue[1][1]-re[1])/a),rn=L((Ue[2][0]-re[0])/a),nn=L(-(Ue[2][1]-re[1])/a),fa=Le,wi=$t;Le=0,$t=0,Rt-=fa,ir-=wi,Kr-=fa,Mn-=wi;var Gn=[[Rt,ir,0,0,cr-sr],[Kr,Mn,0,0,rn-sr],[0,0,Rt,ir,Kt-lr],[0,0,Kr,Mn,nn-lr]],ri=E_e(Gn);if(ri){if(P.save(),P.beginPath(),Rqt()||!q){P.moveTo(cr,Kt);for(var Dt=4,pn=sr-cr,ni=lr-Kt,an=0;an<Dt;an++)P.lineTo(cr+L((an+1)*pn/Dt),Kt+L(an*ni/(Dt-1))),an!=Dt-1&&P.lineTo(cr+L((an+1)*pn/Dt),Kt+L((an+1)*ni/(Dt-1)));P.lineTo(rn,nn)}else P.moveTo(cr,Kt),P.lineTo(sr,lr),P.lineTo(rn,nn);P.clip(),P.transform(ri[0],ri[2],ri[1],ri[3],sr,lr),P.translate(W[0]-fa,W[3]-wi),P.scale(n/r,-n/r),P.drawImage($.canvas,0,0),P.restore()}}),E&&(P.save(),P.globalCompositeOperation="source-over",P.strokeStyle="black",P.lineWidth=1,p.getTriangles().forEach(function(se,Ie,qe){var Ae=se.target,Ue=(Ae[0][0]-re[0])/a,Le=-(Ae[0][1]-re[1])/a,$t=(Ae[1][0]-re[0])/a,Rt=-(Ae[1][1]-re[1])/a,ir=(Ae[2][0]-re[0])/a,Kr=-(Ae[2][1]-re[1])/a;P.beginPath(),P.moveTo($t,Rt),P.lineTo(Ue,Le),P.lineTo(ir,Kr),P.closePath(),P.stroke()}),P.restore()),P.canvas}var Dqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lqt=function(e){Dqt(t,e);function t(r,n,i,a,h,p,g,b,E,q,P,L){var W=e.call(this,h,vt.IDLE,{interpolate:!!L})||this;W.renderEdges_=P!==void 0?P:!1,W.pixelRatio_=g,W.gutter_=b,W.canvas_=null,W.sourceTileGrid_=n,W.targetTileGrid_=a,W.wrappedTileCoord_=p||h,W.sourceTiles_=[],W.sourcesListenerKeys_=null,W.sourceZ_=0;var Q=a.getTileCoordExtent(W.wrappedTileCoord_),V=W.targetTileGrid_.getExtent(),$=W.sourceTileGrid_.getExtent(),H=V?Dh(Q,V):Q;if(Tx(H)===0)return W.state=vt.EMPTY,W;var re=r.getExtent();re&&($?$=Dh($,re):$=re);var se=a.getResolution(W.wrappedTileCoord_[0]),Ie=r1e(r,i,H,se);if(!isFinite(Ie)||Ie<=0)return W.state=vt.EMPTY,W;var qe=q!==void 0?q:Yxe;if(W.triangulation_=new Qxe(r,i,H,$,Ie*qe,se),W.triangulation_.getTriangles().length===0)return W.state=vt.EMPTY,W;W.sourceZ_=n.getZForResolution(Ie);var Ae=W.triangulation_.calculateSourceExtent();if($&&(r.canWrapX()?(Ae[1]=Wr(Ae[1],$[1],$[3]),Ae[3]=Wr(Ae[3],$[1],$[3])):Ae=Dh(Ae,$)),!Tx(Ae))W.state=vt.EMPTY;else{for(var Ue=n.getTileRangeForExtentAndZ(Ae,W.sourceZ_),Le=Ue.minX;Le<=Ue.maxX;Le++)for(var $t=Ue.minY;$t<=Ue.maxY;$t++){var Rt=E(W.sourceZ_,Le,$t,g);Rt&&W.sourceTiles_.push(Rt)}W.sourceTiles_.length===0&&(W.state=vt.EMPTY)}return W}return t.prototype.getImage=function(){return this.canvas_},t.prototype.reproject_=function(){var r=[];if(this.sourceTiles_.forEach(function(E,q,P){E&&E.getState()==vt.LOADED&&r.push({extent:this.sourceTileGrid_.getTileCoordExtent(E.tileCoord),image:E.getImage()})}.bind(this)),this.sourceTiles_.length=0,r.length===0)this.state=vt.ERROR;else{var n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),a=typeof i=="number"?i:i[0],h=typeof i=="number"?i:i[1],p=this.targetTileGrid_.getResolution(n),g=this.sourceTileGrid_.getResolution(this.sourceZ_),b=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=n1e(a,h,this.pixelRatio_,g,this.sourceTileGrid_.getExtent(),p,b,this.triangulation_,r,this.gutter_,this.renderEdges_,this.interpolate),this.state=vt.LOADED}this.changed()},t.prototype.load=function(){if(this.state==vt.IDLE){this.state=vt.LOADING,this.changed();var r=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,i,a){var h=n.getState();if(h==vt.IDLE||h==vt.LOADING){r++;var p=Zt(n,dt.CHANGE,function(g){var b=n.getState();(b==vt.LOADED||b==vt.ERROR||b==vt.EMPTY)&&(gr(p),r--,r===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(p)}}.bind(this)),r===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,a){var h=n.getState();h==vt.IDLE&&n.load()})}},t.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(gr),this.sourcesListenerKeys_=null},t.prototype.release=function(){this.canvas_&&(Q0e(this.canvas_.getContext("2d")),CB.push(this.canvas_),this.canvas_=null),e.prototype.release.call(this)},t}(rC),aC=Lqt;var i1e=function(){function e(t,r,n,i){this.minX=t,this.maxX=r,this.minY=n,this.maxY=i}return e.prototype.contains=function(t){return this.containsXY(t[1],t[2])},e.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},e.prototype.containsXY=function(t,r){return this.minX<=t&&t<=this.maxX&&this.minY<=r&&r<=this.maxY},e.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},e.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},e.prototype.getHeight=function(){return this.maxY-this.minY+1},e.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},e.prototype.getWidth=function(){return this.maxX-this.minX+1},e.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e}();function Ip(e,t,r,n,i){return i!==void 0?(i.minX=e,i.maxX=t,i.minY=r,i.maxY=n,i):new i1e(e,t,r,n)}var oC=i1e;var kqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nqt=function(e){kqt(t,e);function t(r){var n=e.call(this,r)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=so(),n.tmpTileRange_=new oC(0,0,0,0),n}return t.prototype.isDrawableTile=function(r){var n=this.getLayer(),i=r.getState(),a=n.getUseInterimTilesOnError();return i==vt.LOADED||i==vt.EMPTY||i==vt.ERROR&&!a},t.prototype.getTile=function(r,n,i,a){var h=a.pixelRatio,p=a.viewState.projection,g=this.getLayer(),b=g.getSource(),E=b.getTile(r,n,i,h,p);return E.getState()==vt.ERROR&&(g.getUseInterimTilesOnError()?g.getPreload()>0&&(this.newTiles_=!0):E.setState(vt.LOADED)),this.isDrawableTile(E)||(E=E.getInterimTile()),E},t.prototype.getData=function(r){var n=this.frameState;if(!n)return null;var i=this.getLayer(),a=ki(n.pixelToCoordinateTransform,r.slice()),h=i.getExtent();if(h&&!Rh(h,a))return null;for(var p=n.pixelRatio,g=n.viewState.projection,b=n.viewState,E=i.getRenderSource(),q=E.getTileGridForProjection(b.projection),P=E.getTilePixelRatio(n.pixelRatio),L=q.getZForResolution(b.resolution);L>=q.getMinZoom();--L){var W=q.getTileCoordForCoordAndZ(a,L),Q=E.getTile(L,W[1],W[2],p,g);if(!(Q instanceof nC||Q instanceof aC))return null;if(Q.getState()===vt.LOADED){var V=q.getOrigin(L),$=sa(q.getTileSize(L)),H=q.getResolution(L),re=Math.floor(P*((a[0]-V[0])/H-W[1]*$[0])),se=Math.floor(P*((V[1]-a[1])/H-W[2]*$[1])),Ie=Math.round(P*E.getGutterForProjection(b.projection));return this.getImageData(Q.getImage(),re+Ie,se+Ie)}}return null},t.prototype.loadedTileCallback=function(r,n,i){return this.isDrawableTile(i)?e.prototype.loadedTileCallback.call(this,r,n,i):!1},t.prototype.prepareFrame=function(r){return!!this.getLayer().getSource()},t.prototype.renderFrame=function(r,n){var i=r.layerStatesArray[r.layerIndex],a=r.viewState,h=a.projection,p=a.resolution,g=a.center,b=a.rotation,E=r.pixelRatio,q=this.getLayer(),P=q.getSource(),L=P.getRevision(),W=P.getTileGridForProjection(h),Q=W.getZForResolution(p,P.zDirection),V=W.getResolution(Q),$=r.extent,H=r.viewState.resolution,re=P.getTilePixelRatio(E),se=Math.round(Br($)/H*E),Ie=Math.round(ei($)/H*E),qe=i.extent&&Nh(i.extent,h);qe&&($=Dh($,Nh(i.extent,h)));var Ae=V*se/2/re,Ue=V*Ie/2/re,Le=[g[0]-Ae,g[1]-Ue,g[0]+Ae,g[1]+Ue],$t=W.getTileRangeForExtentAndZ($,Q),Rt={};Rt[Q]={};var ir=this.createLoadedTileFinder(P,h,Rt),Kr=this.tmpExtent,Mn=this.tmpTileRange_;this.newTiles_=!1;for(var sr=b?MI(a.center,H,b,r.size):void 0,lr=$t.minX;lr<=$t.maxX;++lr)for(var cr=$t.minY;cr<=$t.maxY;++cr)if(!(b&&!W.tileCoordIntersectsViewport([Q,lr,cr],sr))){var Kt=this.getTile(Q,lr,cr,r);if(this.isDrawableTile(Kt)){var rn=Un(this);if(Kt.getState()==vt.LOADED){Rt[Q][Kt.tileCoord.toString()]=Kt;var nn=Kt.inTransition(rn);nn&&i.opacity!==1&&(Kt.endTransition(rn),nn=!1),!this.newTiles_&&(nn||this.renderedTiles.indexOf(Kt)===-1)&&(this.newTiles_=!0)}if(Kt.getAlpha(rn,r.time)===1)continue}var fa=W.getTileCoordChildTileRange(Kt.tileCoord,Mn,Kr),wi=!1;fa&&(wi=ir(Q+1,fa)),wi||W.forEachTileCoordParentTileRange(Kt.tileCoord,ir,Mn,Kr)}var Gn=V/p*E/re;Zl(this.pixelTransform,r.size[0]/2,r.size[1]/2,1/E,1/E,b,-se/2,-Ie/2);var ri=x0e(this.pixelTransform);this.useContainer(n,ri,this.getBackground(r));var Dt=this.context,pn=Dt.canvas;FI(this.inversePixelTransform,this.pixelTransform),Zl(this.tempTransform,se/2,Ie/2,Gn,Gn,0,-se/2,-Ie/2),pn.width!=se||pn.height!=Ie?(pn.width=se,pn.height=Ie):this.containerReused||Dt.clearRect(0,0,se,Ie),qe&&this.clipUnrotated(Dt,r,qe),P.getInterpolate()||Er(Dt,zx),this.preRender(Dt,r),this.renderedTiles.length=0;var ni=Object.keys(Rt).map(Number);ni.sort(qx);var an,Es,wn;i.opacity===1&&(!this.containerReused||P.getOpaque(r.viewState.projection))?ni=ni.reverse():(an=[],Es=[]);for(var Da=ni.length-1;Da>=0;--Da){var Wn=ni[Da],Ss=P.getTilePixelSize(Wn,E,h),Ee=W.getResolution(Wn),No=Ee/V,Hs=Ss[0]*No*Gn,Xt=Ss[1]*No*Gn,Cr=W.getTileCoordForCoordAndZ(vs(Le),Wn),Ks=W.getTileCoordExtent(Cr),pa=ki(this.tempTransform,[re*(Ks[0]-Le[0])/V,re*(Le[3]-Ks[3])/V]),mo=re*P.getGutterForProjection(h),Ts=Rt[Wn];for(var zi in Ts){var Kt=Ts[zi],Xs=Kt.tileCoord,Ys=Cr[1]-Xs[1],Ne=Math.round(pa[0]-(Ys-1)*Hs),da=Cr[2]-Xs[2],Zn=Math.round(pa[1]-(da-1)*Xt),lr=Math.round(pa[0]-Ys*Hs),cr=Math.round(pa[1]-da*Xt),ii=Ne-lr,ji=Zn-cr,ze=Q===Wn,nn=ze&&Kt.getAlpha(Un(this),r.time)!==1,It=!1;if(!nn)if(an){wn=[lr,cr,lr+ii,cr,lr+ii,cr+ji,lr,cr+ji];for(var ft=0,ai=an.length;ft<ai;++ft)if(Q!==Wn&&Wn<Es[ft]){var Ur=an[ft];bp([lr,cr,lr+ii,cr+ji],[Ur[0],Ur[3],Ur[4],Ur[7]])&&(It||(Dt.save(),It=!0),Dt.beginPath(),Dt.moveTo(wn[0],wn[1]),Dt.lineTo(wn[2],wn[3]),Dt.lineTo(wn[4],wn[5]),Dt.lineTo(wn[6],wn[7]),Dt.moveTo(Ur[6],Ur[7]),Dt.lineTo(Ur[4],Ur[5]),Dt.lineTo(Ur[2],Ur[3]),Dt.lineTo(Ur[0],Ur[1]),Dt.clip())}an.push(wn),Es.push(Wn)}else Dt.clearRect(lr,cr,ii,ji);this.drawTileImage(Kt,r,lr,cr,ii,ji,mo,ze),an&&!nn?(It&&Dt.restore(),this.renderedTiles.unshift(Kt)):this.renderedTiles.push(Kt),this.updateUsedTiles(r.usedTiles,P,Kt)}}return this.renderedRevision=L,this.renderedResolution=V,this.extentChanged=!this.renderedExtent_||!Ex(this.renderedExtent_,Le),this.renderedExtent_=Le,this.renderedPixelRatio=E,this.renderedProjection=h,this.manageTilePyramid(r,P,W,E,h,$,Q,q.getPreload()),this.scheduleExpireCache(r,P),this.postRender(Dt,r),i.extent&&Dt.restore(),Er(Dt,e1e),ri!==pn.style.transform&&(pn.style.transform=ri),this.container},t.prototype.drawTileImage=function(r,n,i,a,h,p,g,b){var E=this.getTileImage(r);if(E){var q=Un(this),P=n.layerStatesArray[n.layerIndex],L=P.opacity*(b?r.getAlpha(q,n.time):1),W=L!==this.context.globalAlpha;W&&(this.context.save(),this.context.globalAlpha=L),this.context.drawImage(E,g,g,E.width-2*g,E.height-2*g,i,a,h,p),W&&this.context.restore(),L!==P.opacity?n.animate=!0:b&&r.endTransition(q)}},t.prototype.getImage=function(){var r=this.context;return r?r.canvas:null},t.prototype.getTileImage=function(r){return r.getImage()},t.prototype.scheduleExpireCache=function(r,n){if(n.canExpireCache()){var i=function(a,h,p){var g=Un(a);g in p.usedTiles&&a.expireCache(p.viewState.projection,p.usedTiles[g])}.bind(null,n);r.postRenderFunctions.push(i)}},t.prototype.updateUsedTiles=function(r,n,i){var a=Un(n);a in r||(r[a]={}),r[a][i.getKey()]=!0},t.prototype.manageTilePyramid=function(r,n,i,a,h,p,g,b,E){var q=Un(n);q in r.wantedTiles||(r.wantedTiles[q]={});var P=r.wantedTiles[q],L=r.tileQueue,W=i.getMinZoom(),Q=r.viewState.rotation,V=Q?MI(r.viewState.center,r.viewState.resolution,Q,r.size):void 0,$=0,H,re,se,Ie,qe,Ae;for(Ae=W;Ae<=g;++Ae)for(re=i.getTileRangeForExtentAndZ(p,Ae,re),se=i.getResolution(Ae),Ie=re.minX;Ie<=re.maxX;++Ie)for(qe=re.minY;qe<=re.maxY;++qe)Q&&!i.tileCoordIntersectsViewport([Ae,Ie,qe],V)||(g-Ae<=b?(++$,H=n.getTile(Ae,Ie,qe,a,h),H.getState()==vt.IDLE&&(P[H.getKey()]=!0,L.isKeyQueued(H.getKey())||L.enqueue([H,q,i.getTileCoordCenter(H.tileCoord),se])),E!==void 0&&E(H)):n.useTile(Ae,Ie,qe,h));n.updateCacheSize($,h)},t}(Cxe),a1e=Nqt;var Fqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zqt=function(e){Fqt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.createRenderer=function(){return new a1e(this)},t}(Xxe),jx=zqt;var jqt=function(){function e(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return e.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},e.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t){for(var r=this.oldest_;r;)t(r.value_,r.key_,this),r=r.newer},e.prototype.get=function(t,r){var n=this.entries_[t];return kt(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},e.prototype.remove=function(t){var r=this.entries_[t];return kt(r!==void 0,15),r===this.newest_?(this.newest_=r.older,this.newest_&&(this.newest_.newer=null)):r===this.oldest_?(this.oldest_=r.newer,this.oldest_&&(this.oldest_.older=null)):(r.newer.older=r.older,r.older.newer=r.newer),delete this.entries_[t],--this.count_,r.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)t[r++]=n.key_;return t},e.prototype.getValues=function(){var t=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)t[r++]=n.value_;return t},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.peek=function(t){if(this.containsKey(t))return this.entries_[t].value_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,r){this.get(t),this.entries_[t].value_=r},e.prototype.set=function(t,r){kt(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:r};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e}(),o1e=jqt;function AB(e,t,r,n){return n!==void 0?(n[0]=e,n[1]=t,n[2]=r,n):[e,t,r]}function Cp(e,t,r){return e+"/"+t+"/"+r}function sC(e){return Cp(e[0],e[1],e[2])}function s1e(e){return e.split("/").map(Number)}function uC(e){return(e[1]<<e[0])+e[2]}function u1e(e,t){var r=e[0],n=e[1],i=e[2];if(t.getMinZoom()>r||r>t.getMaxZoom())return!1;var a=t.getFullTileRange(r);return a?a.containsXY(n,i):!0}var Bqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Uqt=function(e){Bqt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.expireCache=function(r){for(;this.canExpireCache();){var n=this.peekLast();if(n.getKey()in r)break;this.pop().release()}},t.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var r=this.peekFirstKey(),n=s1e(r),i=n[0];this.forEach(function(a){a.tileCoord[0]!==i&&(this.remove(sC(a.tileCoord)),a.release())}.bind(this))}},t}(o1e),lC=Uqt;var cC={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var Vqt=[0,0,0],Vh=5,$qt=function(){function e(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,kt(u0e(this.resolutions_,function(h,p){return p-h},!0),17);var r;if(!t.origins){for(var n=0,i=this.resolutions_.length-1;n<i;++n)if(!r)r=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==r){r=void 0;break}}this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,kt(this.origins_.length==this.resolutions_.length,20));var a=t.extent;a!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=vs(a)),kt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,kt(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:Gv,kt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=a!==void 0?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(h,p){var g=new oC(Math.min(0,h[0]),Math.max(h[0]-1,-1),Math.min(0,h[1]),Math.max(h[1]-1,-1));if(a){var b=this.getTileRangeForExtentAndZ(a,p);g.minX=Math.max(b.minX,g.minX),g.maxX=Math.min(b.maxX,g.maxX),g.minY=Math.max(b.minY,g.minY),g.maxY=Math.min(b.maxY,g.maxY)}return g},this):a&&this.calculateTileRanges_(a)}return e.prototype.forEachTileCoord=function(t,r,n){for(var i=this.getTileRangeForExtentAndZ(t,r),a=i.minX,h=i.maxX;a<=h;++a)for(var p=i.minY,g=i.maxY;p<=g;++p)n([r,a,p])},e.prototype.forEachTileCoordParentTileRange=function(t,r,n,i){var a,h,p,g=null,b=t[0]-1;for(this.zoomFactor_===2?(h=t[1],p=t[2]):g=this.getTileCoordExtent(t,i);b>=this.minZoom;){if(this.zoomFactor_===2?(h=Math.floor(h/2),p=Math.floor(p/2),a=Ip(h,h,p,p,n)):a=this.getTileRangeForExtentAndZ(g,b,n),r(b,a))return!0;--b}return!1},e.prototype.getExtent=function(){return this.extent_},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.getMinZoom=function(){return this.minZoom},e.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},e.prototype.getResolution=function(t){return this.resolutions_[t]},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getTileCoordChildTileRange=function(t,r,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){var i=t[1]*2,a=t[2]*2;return Ip(i,i+1,a,a+1,r)}var h=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(h,t[0]+1,r)}return null},e.prototype.getTileRangeForTileCoordAndZ=function(t,r,n){if(r>this.maxZoom||r<this.minZoom)return null;var i=t[0],a=t[1],h=t[2];if(r===i)return Ip(a,h,a,h,n);if(this.zoomFactor_){var p=Math.pow(this.zoomFactor_,r-i),g=Math.floor(a*p),b=Math.floor(h*p);if(r<i)return Ip(g,g,b,b,n);var E=Math.floor(p*(a+1))-1,q=Math.floor(p*(h+1))-1;return Ip(g,E,b,q,n)}var P=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(P,r,n)},e.prototype.getTileRangeExtent=function(t,r,n){var i=this.getOrigin(t),a=this.getResolution(t),h=sa(this.getTileSize(t),this.tmpSize_),p=i[0]+r.minX*h[0]*a,g=i[0]+(r.maxX+1)*h[0]*a,b=i[1]+r.minY*h[1]*a,E=i[1]+(r.maxY+1)*h[1]*a;return jl(p,b,g,E,n)},e.prototype.getTileRangeForExtentAndZ=function(t,r,n){var i=Vqt;this.getTileCoordForXYAndZ_(t[0],t[3],r,!1,i);var a=i[1],h=i[2];return this.getTileCoordForXYAndZ_(t[2],t[1],r,!0,i),Ip(a,i[1],h,i[2],n)},e.prototype.getTileCoordCenter=function(t){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=sa(this.getTileSize(t[0]),this.tmpSize_);return[r[0]+(t[1]+.5)*i[0]*n,r[1]-(t[2]+.5)*i[1]*n]},e.prototype.getTileCoordExtent=function(t,r){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),a=sa(this.getTileSize(t[0]),this.tmpSize_),h=n[0]+t[1]*a[0]*i,p=n[1]-(t[2]+1)*a[1]*i,g=h+a[0]*i,b=p+a[1]*i;return jl(h,p,g,b,r)},e.prototype.getTileCoordForCoordAndResolution=function(t,r,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],r,!1,n)},e.prototype.getTileCoordForXYAndResolution_=function(t,r,n,i,a){var h=this.getZForResolution(n),p=n/this.getResolution(h),g=this.getOrigin(h),b=sa(this.getTileSize(h),this.tmpSize_),E=p*(t-g[0])/n/b[0],q=p*(g[1]-r)/n/b[1];return i?(E=xx(E,Vh)-1,q=xx(q,Vh)-1):(E=_x(E,Vh),q=_x(q,Vh)),AB(h,E,q,a)},e.prototype.getTileCoordForXYAndZ_=function(t,r,n,i,a){var h=this.getOrigin(n),p=this.getResolution(n),g=sa(this.getTileSize(n),this.tmpSize_),b=(t-h[0])/p/g[0],E=(h[1]-r)/p/g[1];return i?(b=xx(b,Vh)-1,E=xx(E,Vh)-1):(b=_x(b,Vh),E=_x(E,Vh)),AB(n,b,E,a)},e.prototype.getTileCoordForCoordAndZ=function(t,r,n){return this.getTileCoordForXYAndZ_(t[0],t[1],r,!1,n)},e.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},e.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},e.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},e.prototype.getZForResolution=function(t,r){var n=Dv(this.resolutions_,t,r||0);return Wr(n,this.minZoom,this.maxZoom)},e.prototype.tileCoordIntersectsViewport=function(t,r){return aB(r,0,r.length,2,this.getTileCoordExtent(t))},e.prototype.calculateTileRanges_=function(t){for(var r=this.resolutions_.length,n=new Array(r),i=this.minZoom;i<r;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n},e}(),qB=$qt;function hC(e){var t=e.getDefaultTileGrid();return t||(t=Wqt(e),e.setDefaultTileGrid(t)),t}function l1e(e,t,r){var n=t[0],i=e.getTileCoordCenter(t),a=fC(r);if(Rh(a,i))return t;var h=Br(a),p=Math.ceil((a[0]-i[0])/h);return i[0]+=h*p,e.getTileCoordForCoordAndZ(i,n)}function Gqt(e,t,r,n){var i=n!==void 0?n:"top-left",a=h1e(e,t,r);return new qB({extent:e,origin:j_e(e,i),resolutions:a,tileSize:r})}function c1e(e){var t=e||{},r=t.extent||Li("EPSG:3857").getExtent(),n={extent:r,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:h1e(r,t.maxZoom,t.tileSize,t.maxResolution)};return new qB(n)}function h1e(e,t,r,n){for(var i=t!==void 0?t:zxe,a=ei(e),h=Br(e),p=sa(r!==void 0?r:Gv),g=n>0?n:Math.max(h/p[0],a/p[1]),b=i+1,E=new Array(b),q=0;q<b;++q)E[q]=g/Math.pow(2,q);return E}function Wqt(e,t,r,n){var i=fC(e);return Gqt(i,t,r,n)}function fC(e){e=Li(e);var t=e.getExtent();if(!t){var r=180*ao[oo.DEGREES]/e.getMetersPerUnit();t=jl(-r,-r,r,r)}return t}var f1e=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zqt=function(e){f1e(t,e);function t(r){var n=e.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,projection:r.projection,state:r.state,wrapX:r.wrapX,interpolate:r.interpolate})||this;n.on,n.once,n.un,n.opaque_=r.opaque!==void 0?r.opaque:!1,n.tilePixelRatio_=r.tilePixelRatio!==void 0?r.tilePixelRatio:1,n.tileGrid=r.tileGrid!==void 0?r.tileGrid:null;var i=[256,256];return n.tileGrid&&sa(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),i),n.tileCache=new lC(r.cacheSize||0),n.tmpSize=[0,0],n.key_=r.key||"",n.tileOptions={transition:r.transition,interpolate:r.interpolate},n.zDirection=r.zDirection?r.zDirection:0,n}return t.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},t.prototype.expireCache=function(r,n){var i=this.getTileCacheForProjection(r);i&&i.expireCache(n)},t.prototype.forEachLoadedTile=function(r,n,i,a){var h=this.getTileCacheForProjection(r);if(!h)return!1;for(var p=!0,g,b,E,q=i.minX;q<=i.maxX;++q)for(var P=i.minY;P<=i.maxY;++P)b=Cp(n,q,P),E=!1,h.containsKey(b)&&(g=h.get(b),E=g.getState()===vt.LOADED,E&&(E=a(g)!==!1)),E||(p=!1);return p},t.prototype.getGutterForProjection=function(r){return 0},t.prototype.getKey=function(){return this.key_},t.prototype.setKey=function(r){this.key_!==r&&(this.key_=r,this.changed())},t.prototype.getOpaque=function(r){return this.opaque_},t.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},t.prototype.getTile=function(r,n,i,a,h){return or()},t.prototype.getTileGrid=function(){return this.tileGrid},t.prototype.getTileGridForProjection=function(r){return this.tileGrid?this.tileGrid:hC(r)},t.prototype.getTileCacheForProjection=function(r){var n=this.getProjection();return kt(n===null||Lh(n,r),68),this.tileCache},t.prototype.getTilePixelRatio=function(r){return this.tilePixelRatio_},t.prototype.getTilePixelSize=function(r,n,i){var a=this.getTileGridForProjection(i),h=this.getTilePixelRatio(n),p=sa(a.getTileSize(r),this.tmpSize);return h==1?p:XI(p,h,this.tmpSize)},t.prototype.getTileCoordForTileUrlFunction=function(r,n){var i=n!==void 0?n:this.getProjection(),a=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(r=l1e(a,r,i)),u1e(r,a)?r:null},t.prototype.clear=function(){this.tileCache.clear()},t.prototype.refresh=function(){this.clear(),e.prototype.refresh.call(this)},t.prototype.updateCacheSize=function(r,n){var i=this.getTileCacheForProjection(n);r>i.highWaterMark&&(i.highWaterMark=r)},t.prototype.useTile=function(r,n,i,a){},t}(Mxe),p1e=function(e){f1e(t,e);function t(r,n){var i=e.call(this,r)||this;return i.tile=n,i}return t}(aa);var d1e=Zqt;function Hqt(e,t){var r=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,a=/\{-y\}/g;return function(h,p,g){if(h)return e.replace(r,h[0].toString()).replace(n,h[1].toString()).replace(i,h[2].toString()).replace(a,function(){var b=h[0],E=t.getFullTileRange(b);kt(E,55);var q=E.getHeight()-h[2]-1;return q.toString()})}}function m1e(e,t){for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=Hqt(e[i],t);return Kqt(n)}function Kqt(e){return e.length===1?e[0]:function(t,r,n){if(t){var i=uC(t),a=$s(i,e.length);return e[a](t,r,n)}else return}}function v1e(e){var t=[],r=/\{([a-z])-([a-z])\}/.exec(e);if(r){var n=r[1].charCodeAt(0),i=r[2].charCodeAt(0),a=void 0;for(a=n;a<=i;++a)t.push(e.replace(r[0],String.fromCharCode(a)));return t}if(r=/\{(\d+)-(\d+)\}/.exec(e),r){for(var h=parseInt(r[2],10),p=parseInt(r[1],10);p<=h;p++)t.push(e.replace(r[0],p.toString()));return t}return t.push(e),t}var Xqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yqt=function(e){Xqt(t,e);function t(r){var n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tilePixelRatio:r.tilePixelRatio,wrapX:r.wrapX,transition:r.transition,interpolate:r.interpolate,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===t.prototype.tileUrlFunction,n.tileLoadFunction=r.tileLoadFunction,r.tileUrlFunction&&(n.tileUrlFunction=r.tileUrlFunction),n.urls=null,r.urls?n.setUrls(r.urls):r.url&&n.setUrl(r.url),n.tileLoadingKeys_={},n}return t.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},t.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},t.prototype.getUrls=function(){return this.urls},t.prototype.handleTileChange=function(r){var n=r.target,i=Un(n),a=n.getState(),h;a==vt.LOADING?(this.tileLoadingKeys_[i]=!0,h=cC.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],h=a==vt.ERROR?cC.TILELOADERROR:a==vt.LOADED?cC.TILELOADEND:void 0),h!=null&&this.dispatchEvent(new p1e(h,n))},t.prototype.setTileLoadFunction=function(r){this.tileCache.clear(),this.tileLoadFunction=r,this.changed()},t.prototype.setTileUrlFunction=function(r,n){this.tileUrlFunction=r,this.tileCache.pruneExceptNewestZ(),typeof n!="undefined"?this.setKey(n):this.changed()},t.prototype.setUrl=function(r){var n=v1e(r);this.urls=n,this.setUrls(n)},t.prototype.setUrls=function(r){this.urls=r;var n=r.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(m1e(r,this.tileGrid),n):this.setKey(n)},t.prototype.tileUrlFunction=function(r,n,i){},t.prototype.useTile=function(r,n,i){var a=Cp(r,n,i);this.tileCache.containsKey(a)&&this.tileCache.get(a)},t}(d1e),g1e=Yqt;var Jqt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qqt=function(e){Jqt(t,e);function t(r){var n=this,i=r.imageSmoothing!==void 0?r.imageSmoothing:!0;return r.interpolate!==void 0&&(i=r.interpolate),n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction?r.tileLoadFunction:ePt,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:r.wrapX,transition:r.transition,interpolate:i,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this,n.crossOrigin=r.crossOrigin!==void 0?r.crossOrigin:null,n.tileClass=r.tileClass!==void 0?r.tileClass:nC,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=r.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return t.prototype.canExpireCache=function(){if(!zu)return e.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var r in this.tileCacheForProjection)if(this.tileCacheForProjection[r].canExpireCache())return!0;return!1},t.prototype.expireCache=function(r,n){if(!zu){e.prototype.expireCache.call(this,r,n);return}var i=this.getTileCacheForProjection(r);this.tileCache.expireCache(this.tileCache==i?n:{});for(var a in this.tileCacheForProjection){var h=this.tileCacheForProjection[a];h.expireCache(h==i?n:{})}},t.prototype.getGutterForProjection=function(r){return zu&&this.getProjection()&&r&&!Lh(this.getProjection(),r)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getKey=function(){var r=e.prototype.getKey.call(this);return this.getInterpolate()||(r+=":disable-interpolation"),r},t.prototype.getOpaque=function(r){return zu&&this.getProjection()&&r&&!Lh(this.getProjection(),r)?!1:e.prototype.getOpaque.call(this,r)},t.prototype.getTileGridForProjection=function(r){if(!zu)return e.prototype.getTileGridForProjection.call(this,r);var n=this.getProjection();if(this.tileGrid&&(!n||Lh(n,r)))return this.tileGrid;var i=Un(r);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=hC(r)),this.tileGridForProjection[i]},t.prototype.getTileCacheForProjection=function(r){if(!zu)return e.prototype.getTileCacheForProjection.call(this,r);var n=this.getProjection();if(!n||Lh(n,r))return this.tileCache;var i=Un(r);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new lC(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},t.prototype.createTile_=function(r,n,i,a,h,p){var g=[r,n,i],b=this.getTileCoordForTileUrlFunction(g,h),E=b?this.tileUrlFunction(b,a,h):void 0,q=new this.tileClass(g,E!==void 0?vt.IDLE:vt.EMPTY,E!==void 0?E:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return q.key=p,q.addEventListener(dt.CHANGE,this.handleTileChange.bind(this)),q},t.prototype.getTile=function(r,n,i,a,h){var p=this.getProjection();if(!zu||!p||!h||Lh(p,h))return this.getTileInternal(r,n,i,a,p||h);var g=this.getTileCacheForProjection(h),b=[r,n,i],E=void 0,q=sC(b);g.containsKey(q)&&(E=g.get(q));var P=this.getKey();if(E&&E.key==P)return E;var L=this.getTileGridForProjection(p),W=this.getTileGridForProjection(h),Q=this.getTileCoordForTileUrlFunction(b,h),V=new aC(p,L,h,W,b,Q,this.getTilePixelRatio(a),this.getGutter(),function($,H,re,se){return this.getTileInternal($,H,re,se,p)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return V.key=P,E?(V.interimTile=E,V.refreshInterimChain(),g.replace(q,V)):g.set(q,V),V},t.prototype.getTileInternal=function(r,n,i,a,h){var p=null,g=Cp(r,n,i),b=this.getKey();if(!this.tileCache.containsKey(g))p=this.createTile_(r,n,i,a,h,b),this.tileCache.set(g,p);else if(p=this.tileCache.get(g),p.key!=b){var E=p;p=this.createTile_(r,n,i,a,h,b),E.getState()==vt.IDLE?p.interimTile=E.interimTile:p.interimTile=E,p.refreshInterimChain(),this.tileCache.replace(g,p)}return p},t.prototype.setRenderReprojectionEdges=function(r){if(!(!zu||this.renderReprojectionEdges_==r)){this.renderReprojectionEdges_=r;for(var n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},t.prototype.setTileGridForProjection=function(r,n){if(zu){var i=Li(r);if(i){var a=Un(i);a in this.tileGridForProjection||(this.tileGridForProjection[a]=n)}}},t}(g1e);function ePt(e,t){e.getImage().src=t}var pC=Qqt;var tPt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rPt=function(e){tPt(t,e);function t(r){var n=this,i=r||{},a=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(a=i.interpolate);var h=i.projection!==void 0?i.projection:"EPSG:3857",p=i.tileGrid!==void 0?i.tileGrid:c1e({extent:fC(h),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return n=e.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:a,opaque:i.opaque,projection:h,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:p,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this,n.gutter_=i.gutter!==void 0?i.gutter:0,n}return t.prototype.getGutter=function(){return this.gutter_},t}(pC),PB=rPt;var MB=class extends Do{constructor(r){let n=r||{},i=document.createElement("div");i.className="ol-layerspy ol-unselectable ol-control";let a=document.createElement("button");a.title=Fl("control-layerspy-title"),a.type="button",i.appendChild(a);super({element:i,target:n.target});di(this,"mousePosition",null);di(this,"activate",()=>{this.layers===void 0&&(this.layers=this.getMap().getLayers()),this.getMap().addLayer(this.layer),this.layer.on("prerender",this.handlePrecompose,this),this.layer.on("postrender",this.handlePostcompose,this);let r=this.getMap().getViewport();r.addEventListener("mousemove",this.handleMouseMove),r.addEventListener("mouseout",this.handleMouseOut),document.addEventListener("keydown",this.handleKeyPress),this.layers.on("add",this.handleAddedLayer),this.containerEl.classList.add("active"),this.renderRadiusbox&&this.renderTargetElement()});di(this,"changeLayer",r=>{this.containerEl.classList.contains("active")?(this.deactivate(),this.layer=r,this.activate()):this.layer=r});di(this,"deactivate",()=>{this.layer.un("prerender",this.handlePrecompose),this.layer.un("postrender",this.handlePostcompose);let r=this.getMap().getViewport();r.removeEventListener("mousemove",this.handleMouseMove),r.removeEventListener("mouseout",this.handleMouseOut),document.removeEventListener("keydown",this.handleKeyPress),this.layers.un("add",this.handleAddedLayer),this.getMap().removeLayer(this.layer),this.containerEl.classList.remove("active"),this.renderRadiusbox&&this.renderTargetElement()});di(this,"handlePostcompose",r=>{r.context.restore()});di(this,"handlePrecompose",r=>{let n=r.context,i=1;n.save(),n.beginPath();let a=this.mousePosition;if(a){let h=this.getMap().getLayers().getArray().find(b=>b.vkf_id===this.refActiveBasemapId.current).renderer_.context.canvas.style.transform,p=new DOMPoint(a[0],a[1]),g=new DOMMatrix(h);p=p.matrixTransform(g.invertSelf()),n.arc(p.x*i,p.y*i,this.clipRadius*i,0,2*Math.PI),n.lineWidth=5*i,n.strokeStyle="rgba(0,0,0,0.5)",n.stroke()}n.clip()});di(this,"handleMouseMove",r=>{this.mousePosition=this.getMap().getEventPixel(r),this.getMap().render()});di(this,"handleMouseOut",()=>{this.mousePosition=null,this.getMap().render()});di(this,"handleKeyPress",r=>{r.target.tagName.toLowerCase()!=="input"&&(r.key.toLowerCase()==="y"||r.keyCode==="KeyY"?(this.clipRadius=Math.min(this.clipRadius+5,150),this.getMap().render()):(r.key.toLowerCase()==="x"||r.keyCode==="KeyX")&&(this.clipRadius=Math.max(this.clipRadius-5,25),this.getMap().render()),this.updateClipRadiusDisplay())});di(this,"handleAddedLayer",r=>{r.target.getArray()[r.target.getLength()-1]!==this.layer&&(this.getMap().removeLayer(this.layer),this.getMap().addLayer(this.layer))});di(this,"handleExternal3dStateUpdate",r=>{this.containerEl.disabled=r,r?this.containerEl.classList.add("disabled"):this.containerEl.classList.remove("disabled")});di(this,"updateClipRadiusDisplay",()=>{let r=this.targetEl;r.innerHTML=`<strong>Radius: ${this.clipRadius}px</strong> (${Fl("control-layerspy-radius-tooltip")})`});di(this,"renderTargetElement",()=>{let r=this.targetEl,n=Lj(this.getMap());this.targetEl===void 0&&(r=document.createElement("div"),r.className="ol-control ol-layerspy-radius-box",r.innerHTML="",n.appendChild(r),this.targetEl=r),this.targetEl.classList.toggle("active"),n.classList.toggle("layerspy-active"),this.updateClipRadiusDisplay()});this.clipRadius=xp(n.radius)?parseInt(n.radius,0):75,n.refSpyLayer!==void 0&&(n.refSpyLayer.current=this),this.refActiveBasemapId=n.refActiveBasemapId,this.containerEl=a,this.renderRadiusbox=r.renderRadiusBox===void 0?!0:r.renderRadiusBox,a.addEventListener("click",h=>{h.preventDefault(),this.containerEl.classList.contains("active")?this.deactivate():this.activate()}),xp(n.spyLayer)&&this.changeLayer(n.spyLayer)}},y1e=MB;var _1e=e=>{let{children:t,extent:r,onLoad:n=()=>console.log("No onLoad function was passed to component Map2D."),urlsOsmBaseMap:i}=e,a=(0,Wv.useRef)(null);return(0,Wv.useEffect)(()=>{let h=()=>Va(void 0,null,function*(){let p=new jx({source:new PB({urls:i,crossOrigin:"*",maxZoom:18})});p.vkf_id="slub-osm";let g=new tC({controls:[new lxe({tipLabel:Fl("control-fullscreen-title")}),new eC({zoomInTipLabel:Fl("control-zoom-in"),zoomOutTipLabel:Fl("control-zoom-in")})],interactions:JI().extend([new ZI]),layers:[p],target:a.current,view:new Fu({projection:"EPSG:3857",center:[871713,6396955],zoom:4.3})});if(n({map:g}),r!=null){let E=kh(r,"EPSG:4326",g.getView().getProjection());g.getView().fit(E,{padding:[100,100,100,100]}),g.addControl(new Hxe({tipLabel:Fl("control-zoomtoextent-title"),extent:E}))}let b=new jx({zIndex:10,attribution:void 0,source:new PB({urls:i,crossOrigin:"*",attributions:[]})});b.vkf_id="slub-osm",g.addControl(new y1e({spyLayer:b,refActiveBasemapId:{current:p.vkf_id}}))});a.current!==null&&h()},[]),Wv.default.createElement("div",{className:"map-container",ref:a},t)};_1e.propTypes={extent:Ws.default.arrayOf(Ws.default.number),onLoad:Ws.default.func,urlNominatim:Ws.default.string,urlsOsmBaseMap:Ws.default.arrayOf(Ws.default.string),children:Ws.default.oneOfType([Ws.default.arrayOf(Ws.default.node),Ws.default.node])};var x1e=_1e;var w1e=x1e;var ua=De(Yt(),1);var nPt=()=>ua.default.createElement("div",{className:"vkf-loading-indicator"},ua.default.createElement("svg",{className:"loading-icon",version:"1.1",id:"Layer_1",x:"0",y:"0",viewBox:"0 0 70 100"},ua.default.createElement("rect",{fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 3 50)"},ua.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite"}),ua.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"1.2s",values:"0;60;0",repeatCount:"indefinite"})),ua.default.createElement("rect",{x:"17",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 20 50)"},ua.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.1s"}),ua.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:".5s",values:"0;5;0",repeatCount:"indefinite"})),ua.default.createElement("rect",{x:"40",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 40 50)"},ua.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.3s"}),ua.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"2s",values:"0;30;0",repeatCount:"indefinite",begin:"0.6s"})),ua.default.createElement("rect",{x:"60",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 58 50)"},ua.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.5s"}),ua.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"1s",values:"0;60;0",repeatCount:"indefinite",begin:".3s"}))),ua.default.createElement("div",{className:"loading-text"},"Loading\u2026")),b1e=nPt;var E1e=b1e;function S1e(e){return Va(this,null,function*(){let t=ia.getGeoreferenceApiClient(),r="/transformations/",n={map_id:e,additional_properties:!0},i=yield t.get(r,{params:n});if(i.status===200)return i.data;console.error("Something went wrong while trying to fetch transformation for given map_id.")})}function T1e(e){return Va(this,null,function*(){let t=ia.getGeoreferenceApiClient(),r="/transformations/",n={user_id:e},i=yield t.get(r,{params:n});if(i.status===200)return i.data;console.error("Something went wrong while trying to fetch transformation for given user id.")})}function I1e(e){return Va(this,null,function*(){let t=ia.getGeoreferenceApiClient(),r="/transformations/",n={validation:e},i=yield t.get(r,{params:n});if(i.status===200)return i.data;console.error("Something went wrong while trying to fetch transformation for given validation.")})}function C1e(e){return Va(this,null,function*(){let t=ia.getGeoreferenceApiClient(),r="/jobs/",n=e,i=yield t.post(r,n);if(i.status===200)return i.data;console.error("Something went wrong while trying to post a new job.")})}function A1e(e){return Va(this,null,function*(){let t=ia.getGeoreferenceApiClient(),r="/transformations/",n={transformation_id:e},i={dry_run:!0},a=yield t.post(r,n,{params:i});if(a.status===200)return a.data;console.error("Something went wrong while trying to fetch transformation preview for given transformation_id.")})}var Ux=De(Yt(),1),Zv=De(zr(),1);var Bx="1.3.0";function OB(e,t){var r=[];Object.keys(t).forEach(function(i){t[i]!==null&&t[i]!==void 0&&r.push(i+"="+encodeURIComponent(t[i]))});var n=r.join("&");return e=e.replace(/[?&]$/,""),e=e.indexOf("?")===-1?e+"?":e+"&",e+n}var iPt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),aPt=function(e){iPt(t,e);function t(r){var n=this,i=r||{},a=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(a=i.interpolate);var h=i.params||{},p="TRANSPARENT"in h?h.TRANSPARENT:!0;return n=e.call(this,{attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:a,opaque:!p,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,zDirection:i.zDirection})||this,n.gutter_=i.gutter!==void 0?i.gutter:0,n.params_=h,n.v13_=!0,n.serverType_=i.serverType,n.hidpi_=i.hidpi!==void 0?i.hidpi:!0,n.tmpExtent_=so(),n.updateV13_(),n.setKey(n.getKeyForParams_()),n}return t.prototype.getFeatureInfoUrl=function(r,n,i,a){var h=Li(i),p=this.getProjection(),g=this.getTileGrid();g||(g=this.getTileGridForProjection(h));var b=g.getZForResolution(n,this.zDirection),E=g.getTileCoordForCoordAndZ(r,b);if(!(g.getResolutions().length<=E[0])){var q=g.getResolution(E[0]),P=g.getTileCoordExtent(E,this.tmpExtent_),L=sa(g.getTileSize(E[0]),this.tmpSize),W=this.gutter_;W!==0&&(L=fB(L,W,this.tmpSize),P=Uj(P,q*W,P)),p&&p!==h&&(q=iC(p,h,r,q),P=kh(P,h,p),r=Ov(r,h,p));var Q={SERVICE:"WMS",VERSION:Bx,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Er(Q,this.params_,a);var V=Math.floor((r[0]-P[0])/q),$=Math.floor((P[3]-r[1])/q);return Q[this.v13_?"I":"X"]=V,Q[this.v13_?"J":"Y"]=$,this.getRequestUrl_(E,L,P,1,p||h,Q)}},t.prototype.getLegendUrl=function(r,n){if(this.urls[0]!==void 0){var i={SERVICE:"WMS",VERSION:Bx,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(n===void 0||n.LAYER===void 0){var a=this.params_.LAYERS,h=!Array.isArray(a)||a.length===1;if(!h)return;i.LAYER=a}if(r!==void 0){var p=this.getProjection()?this.getProjection().getMetersPerUnit():1,g=28e-5;i.SCALE=r*p/g}return Er(i,n),OB(this.urls[0],i)}},t.prototype.getGutter=function(){return this.gutter_},t.prototype.getParams=function(){return this.params_},t.prototype.getRequestUrl_=function(r,n,i,a,h,p){var g=this.urls;if(g){if(p.WIDTH=n[0],p.HEIGHT=n[1],p[this.v13_?"CRS":"SRS"]=h.getCode(),"STYLES"in this.params_||(p.STYLES=""),a!=1)switch(this.serverType_){case"geoserver":var b=90*a+.5|0;"FORMAT_OPTIONS"in p?p.FORMAT_OPTIONS+=";dpi:"+b:p.FORMAT_OPTIONS="dpi:"+b;break;case"mapserver":p.MAP_RESOLUTION=90*a;break;case"carmentaserver":case"qgis":p.DPI=90*a;break;default:kt(!1,52);break;}var E=h.getAxisOrientation(),q=i;if(this.v13_&&E.substr(0,2)=="ne"){var P=void 0;P=i[0],q[0]=i[1],q[1]=P,P=i[2],q[2]=i[3],q[3]=P}p.BBOX=q.join(",");var L;if(g.length==1)L=g[0];else{var W=$s(uC(r),g.length);L=g[W]}return OB(L,p)}},t.prototype.getTilePixelRatio=function(r){return!this.hidpi_||this.serverType_===void 0?1:r},t.prototype.getKeyForParams_=function(){var r=0,n=[];for(var i in this.params_)n[r++]=i+"-"+this.params_[i];return n.join("/")},t.prototype.updateParams=function(r){Er(this.params_,r),this.updateV13_(),this.setKey(this.getKeyForParams_())},t.prototype.updateV13_=function(){var r=this.params_.VERSION||Bx;this.v13_=$_e(r,"1.3")>=0},t.prototype.tileUrlFunction=function(r,n,i){var a=this.getTileGrid();if(a||(a=this.getTileGridForProjection(i)),!(a.getResolutions().length<=r[0])){n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);var h=a.getResolution(r[0]),p=a.getTileCoordExtent(r,this.tmpExtent_),g=sa(a.getTileSize(r[0]),this.tmpSize),b=this.gutter_;b!==0&&(g=fB(g,b,this.tmpSize),p=Uj(p,h*b,p)),n!=1&&(g=XI(g,n,this.tmpSize));var E={SERVICE:"WMS",VERSION:Bx,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Er(E,this.params_),this.getRequestUrl_(r,g,p,n,i,E)}},t}(pC),q1e=aPt;function oPt(e,t){return e.getCoordinates()[0].map(r=>t.getPixelFromCoordinate(r))}var P1e=e=>{let{map:t,layerName:r,onLoad:n=()=>{},wmsUrl:i}=e;return(0,Ux.useEffect)(()=>{let a=new jx({source:new q1e({url:i,params:{LAYERS:r,VERSION:"1.1.1"},projection:t.getView().getProjection()}),preload:1/0,zIndex:1});t.addLayer(a),n(a);let h=g=>{let b=t.getLayers().getArray().find(E=>E.get("key")==="clip");if(b!==void 0&&b.getSource().getFeatures().length>0){let E=oPt(b.getSource().getFeatures()[0].getGeometry(),t),q=1,P=g.context;P.save(),P.beginPath(),P.moveTo(E[0][0]*q,E[0][1]*q);for(let L=1;L<E.length;L++)P.lineTo(E[L][0]*q,E[L][1]*q);P.closePath(),P.clip()}},p=g=>{g.context.restore()};return a.on("prerender",h),a.on("postrender",p),()=>{a.un("prerender",h),a.un("postrender",p),t.removeLayer(a)}},[]),Ux.default.createElement(Ux.default.Fragment,null)};P1e.propTypes={clipPolygon:Zv.default.instanceOf(jI),layerName:Zv.default.string.isRequired,map:Zv.default.instanceOf(tC).isRequired,onLoad:Zv.default.func,wmsUrl:Zv.default.string.isRequired};var M1e=P1e;var O1e=M1e;var Mr=De(Yt(),1),co=De(zr(),1);var ju=De(Yt(),1);var sPt=()=>ju.default.createElement("div",{className:"lds-roller"},ju.default.createElement("div",null),ju.default.createElement("div",null),ju.default.createElement("div",null),ju.default.createElement("div",null),ju.default.createElement("div",null),ju.default.createElement("div",null),ju.default.createElement("div",null),ju.default.createElement("div",null)),R1e=sPt;var D1e=R1e;var Ap={BY_VALIDATION:"byValidationState",BY_MAPID:"byMapId",BY_USERID:"byUserId"},Xl=[{desc:"Auswahl von allen gespeicherten Transformation mit einem bestimmten Validierungsstatus",id:Ap.BY_VALIDATION,label:"Validation",type:"radio",value:"missing",values:["invalid","missing"]},{desc:"Auswahl von allen gespeicherten Transformation f\xFCr eine Karten-Id",id:Ap.BY_MAPID,label:"Karten-Id",type:"input",value:""},{desc:"Auswahl von allen gespeicherten Transformation f\xFCr eine Nutzer-Id",id:Ap.BY_USERID,label:"User-Id",type:"input",value:""}];function L1e(e){let t=n=>{e.onChange(n.target.value,e.id,"input")},r=()=>{e.onSubmit(e.value,e.id,"input")};return Mr.default.createElement("div",null,Mr.default.createElement("p",null,e.desc),Mr.default.createElement("div",{className:"input-group"},Mr.default.createElement("input",{value:e.value,onChange:t,type:"text",className:"form-control",placeholder:e.placeholder}),Mr.default.createElement("span",{className:"input-group-btn"},Mr.default.createElement("button",{className:"btn btn-default",onClick:r},Mr.default.createElement("span",{className:"glyphicon glyphicon-search","aria-hidden":!0})))))}L1e.propTypes={desc:co.default.string.isRequired,id:co.default.string.isRequired,placeholder:co.default.string.isRequired,onChange:co.default.func.isRequired,onSubmit:co.default.func.isRequired,value:co.default.string.isRequired};function k1e(e){return Mr.default.createElement("div",null,Mr.default.createElement("p",null,e.desc),Mr.default.createElement("div",null,e.values.map(t=>Mr.default.createElement("div",{key:t,className:"radio"},Mr.default.createElement("label",null,Mr.default.createElement("input",{type:"radio",name:`options-${t}`,value:t,checked:t===e.value,readOnly:!0,onClick:()=>e.onChange(t,e.id,"radio")})," ",t)))))}k1e.propTypes={desc:co.default.string.isRequired,id:co.default.string.isRequired,onChange:co.default.func.isRequired,value:co.default.string.isRequired,values:co.default.arrayOf(co.default.string).isRequired};var uPt=(e,t)=>Va(void 0,null,function*(){let r=yield S1e(e);t(r.transformations)}),lPt=(e,t)=>Va(void 0,null,function*(){let r=yield T1e(e);t(r.transformations)}),RB=(e,t)=>Va(void 0,null,function*(){let r=yield I1e(e);t(r.transformations)}),N1e=e=>{let[t,r]=(0,Mr.useState)(Xl[0]),[n,i]=(0,Mr.useState)(!1),[a,h]=(0,Mr.useState)({[Xl[0].id]:Xl[0].value,[Xl[1].id]:Xl[1].value,[Xl[2].id]:Xl[2].value}),p=E=>{r(E),E.id===Ap.BY_VALIDATION&&(i(!0),RB(a[E.id],q=>{i(!1),e.onChangeTransformations(q)}))},g=(E,q)=>{h(Object.assign({},a,{[q]:E})),q===Ap.BY_VALIDATION&&(i(!0),RB(E,P=>{i(!1),e.onChangeTransformations(P)}))},b=(E,q)=>{q===Ap.BY_MAPID?(i(!0),uPt(E,P=>{i(!1),e.onChangeTransformations(P)})):q===Ap.BY_USERID?(i(!0),lPt(E,P=>{i(!1),e.onChangeTransformations(P)})):console.warn("Given selection id is not supported.")};return(0,Mr.useEffect)(()=>{RB(Xl[0].value,e.onChangeTransformations)},[]),Mr.default.createElement("div",{className:"vkf-select-transformations"},Mr.default.createElement("div",{className:"nav-container"},Mr.default.createElement("ul",{className:"nav nav-pills"},Xl.map((E,q)=>Mr.default.createElement("li",{key:q,role:"presentation",className:t!==null&&t.id===E.id?"active":""},Mr.default.createElement("a",{href:"#",onClick:()=>p(E)},E.label)))),n&&Mr.default.createElement(D1e,null)),Mr.default.createElement("div",{className:"select-container"},t!==null&&t.type==="radio"&&Mr.default.createElement(k1e,{desc:t.desc,id:t.id,onChange:g,value:a[t.id],values:t.values}),t!==null&&t.type==="input"&&Mr.default.createElement(L1e,{desc:t.desc,id:t.id,onChange:g,onSubmit:b,value:a[t.id],placeholder:t.label})))};N1e.propTypes={onChangeTransformations:co.default.func.isRequired};var F1e=N1e;var Jt=De(Yt(),1);var ZB=De(Nwe(),1);function _t(){return _t=ZB.default?ZB.default.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_t.apply(this,arguments)}var abe=De(Hwe(),1);var YB=De(ibe(),1);function Yx(e,t){return Yx=YB.default?YB.default.bind():function(n,i){return n.__proto__=i,n},Yx(e,t)}function fr(e,t){e.prototype=(0,abe.default)(t.prototype),e.prototype.constructor=e,Yx(e,t)}var hbe=De(cbe(),1);function pr(e,t){if(e==null)return{};var r={},n=(0,hbe.default)(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function Zs(){return Zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zs.apply(this,arguments)}function TC(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var e3=De(Yt());var Cpr=De(IC()),yMt=function(){};function pbe(e,t){var r={};return Object.keys(e).forEach(function(n){if(r[Yv(n)]=yMt,0)var i}),r}function QB(e,t){return e[t]!==void 0}function Yv(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function dbe(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function Jx(e,t){return Jx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Jx(e,t)}function t3(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Jx(e,t)}var Jv=De(Yt()),_be=De(n3()),xbe=De(IC());var xMt="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function Qx(e,t,r){r===void 0&&(r=[]);var n=e.displayName||e.name||"Component",i=dbe(e),a=Object.keys(t),h=a.map(Yv);i||!r.length||(0,xbe.default)(!1);var p=function(b){t3(E,b);function E(){for(var P,L=arguments.length,W=new Array(L),Q=0;Q<L;Q++)W[Q]=arguments[Q];P=b.call.apply(b,[this].concat(W))||this,P.handlers=Object.create(null),a.forEach(function($){var H=t[$],re=function(Ie){if(P.props[H]){var qe;P._notifying=!0;for(var Ae=arguments.length,Ue=new Array(Ae>1?Ae-1:0),Le=1;Le<Ae;Le++)Ue[Le-1]=arguments[Le];(qe=P.props)[H].apply(qe,[Ie].concat(Ue)),P._notifying=!1}P.unmounted||P.setState(function($t){var Rt,ir=$t.values;return{values:Zs(Object.create(null),ir,(Rt={},Rt[$]=Ie,Rt))}})};P.handlers[H]=re}),r.length&&(P.attachRef=function($){P.inner=$});var V=Object.create(null);return a.forEach(function($){V[$]=P.props[Yv($)]}),P.state={values:V,prevProps:{}},P}var q=E.prototype;return q.shouldComponentUpdate=function(){return!this._notifying},E.getDerivedStateFromProps=function(L,W){var Q=W.values,V=W.prevProps,$={values:Zs(Object.create(null),Q),prevProps:{}};return a.forEach(function(H){$.prevProps[H]=L[H],!QB(L,H)&&QB(V,H)&&($.values[H]=L[Yv(H)])}),$},q.componentWillUnmount=function(){this.unmounted=!0},q.render=function(){var L=this,W=this.props,Q=W.innerRef,V=TC(W,["innerRef"]);h.forEach(function(H){delete V[H]});var $={};return a.forEach(function(H){var re=L.props[H];$[H]=re!==void 0?re:L.state.values[H]}),Jv.default.createElement(e,Zs({},V,$,this.handlers,{ref:Q||this.attachRef}))},E}(Jv.default.Component);(0,_be.polyfill)(p),p.displayName="Uncontrolled("+n+")",p.propTypes=Zs({innerRef:function(){}},pbe(t,n)),r.forEach(function(b){p.prototype[b]=function(){var q;return(q=this.inner)[b].apply(q,arguments)}});var g=p;return Jv.default.forwardRef&&(g=Jv.default.forwardRef(function(b,E){return Jv.default.createElement(p,Zs({},b,{innerRef:E,__source:{fileName:xMt,lineNumber:128},__self:this}))}),g.propTypes=p.propTypes),g.ControlledComponent=e,g.deferControlTo=function(b,E,q){return E===void 0&&(E={}),Qx(b,Zs({},t,E),q)},g}var s3=De(a3());var Abe=De(IC()),CC=De(zr());var Bu={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},o3={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};var Cbe={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},e1={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"};function u3(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[r.length-1];return typeof i=="function"?e.apply(void 0,r):function(a){return e.apply(void 0,r.concat([a]))}}}function hn(e,t){var r=(e.bsClass||"").trim();return r==null&&(0,Abe.default)(!1),r+(t?"-"+t:"")}var fn=u3(function(e,t){var r=t.propTypes||(t.propTypes={}),n=t.defaultProps||(t.defaultProps={});return r.bsClass=CC.default.string,n.bsClass=e,t}),qbe=u3(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var n=r.STYLES||[],i=r.propTypes||{};e.forEach(function(p){n.indexOf(p)===-1&&n.push(p)});var a=CC.default.oneOf(n);if(r.STYLES=n,a._values=n,r.propTypes=_t({},i,{bsStyle:a}),t!==void 0){var h=r.defaultProps||(r.defaultProps={});h.bsStyle=t}return r}),Qv=u3(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var n=r.SIZES||[],i=r.propTypes||{};e.forEach(function(p){n.indexOf(p)===-1&&n.push(p)});var a=[];n.forEach(function(p){var g=o3[p];g&&g!==p&&a.push(g),a.push(p)});var h=CC.default.oneOf(a);return h._values=a,r.SIZES=n,r.propTypes=_t({},i,{bsSize:h}),t!==void 0&&(r.defaultProps||(r.defaultProps={}),r.defaultProps.bsSize=t),r});function ca(e){var t,r=(t={},t[hn(e)]=!0,t);if(e.bsSize){var n=o3[e.bsSize]||e.bsSize;r[hn(e,n)]=!0}return e.bsStyle&&(r[hn(e,e.bsStyle)]=!0),r}function Pbe(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function Mbe(e){return e==="bsClass"||e==="bsSize"||e==="bsStyle"||e==="bsRole"}function fo(e){var t={};return(0,s3.default)(e).forEach(function(r){var n=r[0],i=r[1];Mbe(n)||(t[n]=i)}),[Pbe(e),t]}function AC(e,t){var r={};t.forEach(function(i){r[i]=!0});var n={};return(0,s3.default)(e).forEach(function(i){var a=i[0],h=i[1];!Mbe(a)&&!r[a]&&(n[a]=h)}),[Pbe(e),n]}var Ni=De(Yt());function IMt(e,t,r){var n=0;return Ni.default.Children.map(e,function(i){return Ni.default.isValidElement(i)?t.call(r,i,n++):i})}function CMt(e,t,r){var n=0;Ni.default.Children.forEach(e,function(i){Ni.default.isValidElement(i)&&t.call(r,i,n++)})}function AMt(e){var t=0;return Ni.default.Children.forEach(e,function(r){Ni.default.isValidElement(r)&&++t}),t}function qMt(e,t,r){var n=0,i=[];return Ni.default.Children.forEach(e,function(a){Ni.default.isValidElement(a)&&t.call(r,a,n++)&&i.push(a)}),i}function PMt(e,t,r){var n=0,i;return Ni.default.Children.forEach(e,function(a){i||Ni.default.isValidElement(a)&&t.call(r,a,n++)&&(i=a)}),i}function MMt(e,t,r){var n=0,i=!0;return Ni.default.Children.forEach(e,function(a){i&&Ni.default.isValidElement(a)&&(t.call(r,a,n++)||(i=!1))}),i}function OMt(e,t,r){var n=0,i=!1;return Ni.default.Children.forEach(e,function(a){i||Ni.default.isValidElement(a)&&t.call(r,a,n++)&&(i=!0)}),i}function RMt(e){var t=[];return Ni.default.Children.forEach(e,function(r){Ni.default.isValidElement(r)&&t.push(r)}),t}var qp={map:IMt,forEach:CMt,count:AMt,find:PMt,filter:qMt,every:MMt,some:OMt,toArray:RMt};var PC=De(zr()),l3=De(t1());var rdr=PC.default.oneOfType([PC.default.string,PC.default.number]);function Rbe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l3.default)(function(n,i,a){var h;return t.every(function(p){return qp.some(n.children,function(g){return g.props.bsRole===p})?!0:(h=p,!1)}),h?new Error("(children) "+a+" - Missing a required child with bsRole: "+(h+". "+a+" must have at least one child of each of ")+("the following bsRoles: "+t.join(", "))):null})}function Dbe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l3.default)(function(n,i,a){var h;return t.every(function(p){var g=qp.filter(n.children,function(b){return b.props.bsRole===p});return g.length>1?(h=p,!1):!0}),h?new Error("(children) "+a+" - Duplicate children detected of bsRole: "+(h+". Only one child each allowed with the following ")+("bsRoles: "+t.join(", "))):null})}var c3=De(zr()),r1=De(Yt()),kMt={label:c3.default.string.isRequired,onClick:c3.default.func},NMt={label:"Close"},h3=function(e){fr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.label,h=i.onClick;return r1.default.createElement("button",{type:"button",className:"close",onClick:h},r1.default.createElement("span",{"aria-hidden":"true"},"\xD7"),r1.default.createElement("span",{className:"sr-only"},a))},t}(r1.default.Component);h3.propTypes=kMt;h3.defaultProps=NMt;var Bbe=h3;function yr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var m3=De(Yt()),Ql=De(zr()),Kbe=De(Jl());function KMt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(n){return n!=null}).reduce(function(n,i){if(typeof i!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return n===null?i:function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];n.apply(this,p),i.apply(this,p)}},null)}var ti=KMt;var XMt={href:Ql.default.string,onClick:Ql.default.func,onKeyDown:Ql.default.func,disabled:Ql.default.bool,role:Ql.default.string,tabIndex:Ql.default.oneOfType([Ql.default.number,Ql.default.string]),componentClass:Kbe.default},YMt={componentClass:"a"};function Hbe(e){return!e||e.trim()==="#"}var v3=function(e){fr(t,e);function t(n,i){var a;return a=e.call(this,n,i)||this,a.handleClick=a.handleClick.bind(yr(yr(a))),a.handleKeyDown=a.handleKeyDown.bind(yr(yr(a))),a}var r=t.prototype;return r.handleClick=function(i){var a=this.props,h=a.disabled,p=a.href,g=a.onClick;if((h||Hbe(p))&&i.preventDefault(),h){i.stopPropagation();return}g&&g(i)},r.handleKeyDown=function(i){i.key===" "&&(i.preventDefault(),this.handleClick(i))},r.render=function(){var i=this.props,a=i.componentClass,h=i.disabled,p=i.onKeyDown,g=pr(i,["componentClass","disabled","onKeyDown"]);return Hbe(g.href)&&(g.role=g.role||"button",g.href=g.href||"#"),h&&(g.tabIndex=-1,g.style=_t({pointerEvents:"none"},g.style)),m3.default.createElement(a,_t({},g,{onClick:this.handleClick,onKeyDown:ti(this.handleKeyDown,p)}))},t}(m3.default.Component);v3.propTypes=XMt;v3.defaultProps=YMt;var eg=v3;var Xbe=De(jbe());var g3=De(ho()),UC=De(Yt()),Pp=De(zr()),Ybe=De(Jl());var JMt={active:Pp.default.bool,disabled:Pp.default.bool,block:Pp.default.bool,onClick:Pp.default.func,componentClass:Ybe.default,href:Pp.default.string,type:Pp.default.oneOf(["button","reset","submit"])},QMt={active:!1,block:!1,disabled:!1},y3=function(e){fr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.renderAnchor=function(i,a){return UC.default.createElement(eg,_t({},i,{className:(0,g3.default)(a,i.disabled&&"disabled")}))},r.renderButton=function(i,a){var h=i.componentClass,p=pr(i,["componentClass"]),g=h||"button";return UC.default.createElement(g,_t({},p,{type:p.type||"button",className:a}))},r.render=function(){var i,a=this.props,h=a.active,p=a.block,g=a.className,b=pr(a,["active","block","className"]),E=fo(b),q=E[0],P=E[1],L=_t({},ca(q),(i={active:h},i[hn(q,"block")]=p,i)),W=(0,g3.default)(g,L);return P.href?this.renderAnchor(P,W):this.renderButton(P,W)},t}(UC.default.Component);y3.propTypes=JMt;y3.defaultProps=QMt;var Gh=fn("btn",Qv([Bu.LARGE,Bu.SMALL,Bu.XSMALL],qbe((0,Xbe.default)(Cbe).concat([e1.DEFAULT,e1.PRIMARY,e1.LINK]),e1.DEFAULT,y3)));var Qbe=De(ho()),_3=De(Yt()),GC=De(zr()),eEe=De($C());var i2t={vertical:GC.default.bool,justified:GC.default.bool,block:(0,eEe.default)(GC.default.bool,function(e){var t=e.block,r=e.vertical;return t&&!r?new Error("`block` requires `vertical` to be set to have any effect"):null})},a2t={block:!1,justified:!1,vertical:!1},x3=function(e){fr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i,a=this.props,h=a.block,p=a.justified,g=a.vertical,b=a.className,E=pr(a,["block","justified","vertical","className"]),q=fo(E),P=q[0],L=q[1],W=_t({},ca(P),(i={},i[hn(P)]=!g,i[hn(P,"vertical")]=g,i[hn(P,"justified")]=p,i[hn(Gh.defaultProps,"block")]=h,i));return _3.default.createElement("div",_t({},L,{className:(0,Qbe.default)(b,W)}))},t}(_3.default.Component);x3.propTypes=i2t;x3.defaultProps=a2t;var tEe=fn("btn-group",x3);var BSe=De(ho()),USe=De(M3()),VSe=De(l1()),vA=De(R3()),ag=De(Yt()),Ra=De(zr()),K3=De(es()),$Se=De($C()),GSe=De(Jl()),WSe=De(kEe());var Imr=De(w3());var kSe=De(TSe());var NSe=De(ho()),d1=De(R3()),m1=De(Yt()),tc=De(zr()),FSe=De(es()),zSe=De(LSe());var dRt={open:tc.default.bool,pullRight:tc.default.bool,onClose:tc.default.func,labelledBy:tc.default.oneOfType([tc.default.string,tc.default.number]),onSelect:tc.default.func,rootCloseEvent:tc.default.oneOf(["click","mousedown"])},mRt={bsRole:"menu",pullRight:!1},G3=function(e){fr(t,e);function t(n){var i;return i=e.call(this,n)||this,i.handleRootClose=i.handleRootClose.bind(yr(yr(i))),i.handleKeyDown=i.handleKeyDown.bind(yr(yr(i))),i}var r=t.prototype;return r.getFocusableMenuItems=function(){var i=FSe.default.findDOMNode(this);return i?(0,kSe.default)(i.querySelectorAll("[tabIndex=\"-1\"]")):[]},r.getItemsAndActiveIndex=function(){var i=this.getFocusableMenuItems(),a=i.indexOf(document.activeElement);return{items:i,activeIndex:a}},r.focusNext=function(){var i=this.getItemsAndActiveIndex(),a=i.items,h=i.activeIndex;if(a.length!==0){var p=h===a.length-1?0:h+1;a[p].focus()}},r.focusPrevious=function(){var i=this.getItemsAndActiveIndex(),a=i.items,h=i.activeIndex;if(a.length!==0){var p=h===0?a.length-1:h-1;a[p].focus()}},r.handleKeyDown=function(i){switch(i.keyCode){case d1.default.codes.down:this.focusNext(),i.preventDefault();break;case d1.default.codes.up:this.focusPrevious(),i.preventDefault();break;case d1.default.codes.esc:case d1.default.codes.tab:this.props.onClose(i,{source:"keydown"});break;default:}},r.handleRootClose=function(i){this.props.onClose(i,{source:"rootClose"})},r.render=function(){var i,a=this,h=this.props,p=h.open,g=h.pullRight,b=h.labelledBy,E=h.onSelect,q=h.className,P=h.rootCloseEvent,L=h.children,W=pr(h,["open","pullRight","labelledBy","onSelect","className","rootCloseEvent","children"]),Q=AC(W,["onClose"]),V=Q[0],$=Q[1],H=_t({},ca(V),(i={},i[hn(V,"right")]=g,i));return m1.default.createElement(zSe.default,{disabled:!p,onRootClose:this.handleRootClose,event:P},m1.default.createElement("ul",_t({},$,{role:"menu",className:(0,NSe.default)(q,H),"aria-labelledby":b}),qp.map(L,function(re){return m1.default.cloneElement(re,{onKeyDown:ti(re.props.onKeyDown,a.handleKeyDown),onSelect:ti(re.props.onSelect,E)})})))},t}(m1.default.Component);G3.propTypes=dRt;G3.defaultProps=mRt;var W3=fn("dropdown-menu",G3);var mA=De(Yt()),v1=De(zr()),jSe=De(ho());var vRt={noCaret:v1.default.bool,open:v1.default.bool,title:v1.default.string,useAnchor:v1.default.bool},gRt={open:!1,useAnchor:!1,bsRole:"toggle"},Z3=function(e){fr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.noCaret,h=i.open,p=i.useAnchor,g=i.bsClass,b=i.className,E=i.children,q=pr(i,["noCaret","open","useAnchor","bsClass","className","children"]);delete q.bsRole;var P=p?eg:Gh,L=!a;return mA.default.createElement(P,_t({},q,{role:"button",className:(0,jSe.default)(b,g),"aria-haspopup":!0,"aria-expanded":h}),E||q.title,L&&" ",L&&mA.default.createElement("span",{className:"caret"}))},t}(mA.default.Component);Z3.propTypes=vRt;Z3.defaultProps=gRt;var H3=fn("dropdown-toggle",Z3);var ZSe=H3.defaultProps.bsRole,X3=W3.defaultProps.bsRole,yRt={dropup:Ra.default.bool,id:(0,WSe.default)(Ra.default.oneOfType([Ra.default.string,Ra.default.number])),componentClass:GSe.default,children:(0,$Se.default)(Rbe(ZSe,X3),Dbe(X3)),disabled:Ra.default.bool,pullRight:Ra.default.bool,open:Ra.default.bool,defaultOpen:Ra.default.bool,onToggle:Ra.default.func,onSelect:Ra.default.func,role:Ra.default.string,rootCloseEvent:Ra.default.oneOf(["click","mousedown"]),onMouseEnter:Ra.default.func,onMouseLeave:Ra.default.func},_Rt={componentClass:tEe},gA=function(e){fr(t,e);function t(n,i){var a;return a=e.call(this,n,i)||this,a.handleClick=a.handleClick.bind(yr(yr(a))),a.handleKeyDown=a.handleKeyDown.bind(yr(yr(a))),a.handleClose=a.handleClose.bind(yr(yr(a))),a._focusInDropdown=!1,a.lastOpenEventType=null,a}var r=t.prototype;return r.componentDidMount=function(){this.focusNextOnOpen()},r.UNSAFE_componentWillUpdate=function(i){!i.open&&this.props.open&&(this._focusInDropdown=(0,VSe.default)(K3.default.findDOMNode(this.menu),(0,USe.default)(document)))},r.componentDidUpdate=function(i){var a=this.props.open,h=i.open;a&&!h&&this.focusNextOnOpen(),!a&&h&&this._focusInDropdown&&(this._focusInDropdown=!1,this.focus())},r.focus=function(){var i=K3.default.findDOMNode(this.toggle);i&&i.focus&&i.focus()},r.focusNextOnOpen=function(){var i=this.menu;!i||!i.focusNext||(this.lastOpenEventType==="keydown"||this.props.role==="menuitem")&&i.focusNext()},r.handleClick=function(i){this.props.disabled||this.toggleOpen(i,{source:"click"})},r.handleClose=function(i,a){this.props.open&&this.toggleOpen(i,a)},r.handleKeyDown=function(i){if(!this.props.disabled)switch(i.keyCode){case vA.default.codes.down:this.props.open?this.menu.focusNext&&this.menu.focusNext():this.toggleOpen(i,{source:"keydown"}),i.preventDefault();break;case vA.default.codes.esc:case vA.default.codes.tab:this.handleClose(i,{source:"keydown"});break;default:}},r.toggleOpen=function(i,a){var h=!this.props.open;h&&(this.lastOpenEventType=a.source),this.props.onToggle&&this.props.onToggle(h,i,a)},r.renderMenu=function(i,a){var h=this,p=a.id,g=a.onSelect,b=a.rootCloseEvent,E=pr(a,["id","onSelect","rootCloseEvent"]),q=function(L){h.menu=L};return typeof i.ref=="string"||(q=ti(i.ref,q)),(0,ag.cloneElement)(i,_t({},E,{ref:q,labelledBy:p,bsClass:hn(E,"menu"),onClose:ti(i.props.onClose,this.handleClose),onSelect:ti(i.props.onSelect,g,function(P,L){return h.handleClose(L,{source:"select"})}),rootCloseEvent:b}))},r.renderToggle=function(i,a){var h=this,p=function(b){h.toggle=b};return typeof i.ref=="string"||(p=ti(i.ref,p)),(0,ag.cloneElement)(i,_t({},a,{ref:p,bsClass:hn(a,"toggle"),onClick:ti(i.props.onClick,this.handleClick),onKeyDown:ti(i.props.onKeyDown,this.handleKeyDown)}))},r.render=function(){var i,a=this,h=this.props,p=h.componentClass,g=h.id,b=h.dropup,E=h.disabled,q=h.pullRight,P=h.open,L=h.onSelect,W=h.role,Q=h.bsClass,V=h.className,$=h.rootCloseEvent,H=h.children,re=pr(h,["componentClass","id","dropup","disabled","pullRight","open","onSelect","role","bsClass","className","rootCloseEvent","children"]);delete re.onToggle;var se=(i={},i[Q]=!0,i.open=P,i.disabled=E,i);return b&&(se[Q]=!1,se.dropup=!0),ag.default.createElement(p,_t({},re,{className:(0,BSe.default)(V,se)}),qp.map(H,function(Ie){switch(Ie.props.bsRole){case ZSe:return a.renderToggle(Ie,{id:g,disabled:E,open:P,role:W,bsClass:Q});case X3:return a.renderMenu(Ie,{id:g,open:P,pullRight:q,bsClass:Q,onSelect:L,rootCloseEvent:$});default:return Ie;}}))},t}(ag.default.Component);gA.propTypes=yRt;gA.defaultProps=_Rt;fn("dropdown",gA);var Y3=Qx(gA,{open:"onToggle"});Y3.Toggle=H3;Y3.Menu=W3;var og=Y3;var y1=De(Yt()),sg=De(zr());var HSe=De(a3());function g1(e,t){var r=t.propTypes,n={},i={};return(0,HSe.default)(e).forEach(function(a){var h=a[0],p=a[1];r[h]?n[h]=p:i[h]=p}),[n,i]}var xRt=_t({},og.propTypes,{bsStyle:sg.default.string,bsSize:sg.default.string,title:sg.default.node.isRequired,noCaret:sg.default.bool,children:sg.default.node}),KSe=function(e){fr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.bsSize,h=i.bsStyle,p=i.title,g=i.children,b=pr(i,["bsSize","bsStyle","title","children"]),E=g1(b,og.ControlledComponent),q=E[0],P=E[1];return y1.default.createElement(og,_t({},q,{bsSize:a,bsStyle:h}),y1.default.createElement(og.Toggle,_t({},P,{bsSize:a,bsStyle:h}),p),y1.default.createElement(og.Menu,null,g))},t}(y1.default.Component);KSe.propTypes=xRt;var J3=KSe;var XSe=De(ho()),_A=De(Yt()),bs=De(zr()),ug=De(CEe()),yA,wRt={in:bs.default.bool,mountOnEnter:bs.default.bool,unmountOnExit:bs.default.bool,appear:bs.default.bool,timeout:bs.default.number,onEnter:bs.default.func,onEntering:bs.default.func,onEntered:bs.default.func,onExit:bs.default.func,onExiting:bs.default.func,onExited:bs.default.func},bRt={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},ERt=(yA={},yA[ug.ENTERING]="in",yA[ug.ENTERED]="in",yA),Q3=function(e){fr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.className,h=i.children,p=pr(i,["className","children"]);return _A.default.createElement(ug.default,p,function(g,b){return _A.default.cloneElement(h,_t({},b,{className:(0,XSe.default)("fade",a,h.props.className,ERt[g])}))})},t}(_A.default.Component);Q3.propTypes=wRt;Q3.defaultProps=bRt;var e4=Q3;var xA=De(ho()),lg=De(Yt()),rc=De(zr()),YSe=De($C());var SRt={active:rc.default.bool,disabled:rc.default.bool,divider:(0,YSe.default)(rc.default.bool,function(e){var t=e.divider,r=e.children;return t&&r?new Error("Children will not be rendered for dividers"):null}),eventKey:rc.default.any,header:rc.default.bool,href:rc.default.string,onClick:rc.default.func,onSelect:rc.default.func},TRt={divider:!1,disabled:!1,header:!1},t4=function(e){fr(t,e);function t(n,i){var a;return a=e.call(this,n,i)||this,a.handleClick=a.handleClick.bind(yr(yr(a))),a}var r=t.prototype;return r.handleClick=function(i){var a=this.props,h=a.href,p=a.disabled,g=a.onSelect,b=a.eventKey;(!h||p)&&i.preventDefault(),!p&&g&&g(b,i)},r.render=function(){var i=this.props,a=i.active,h=i.disabled,p=i.divider,g=i.header,b=i.onClick,E=i.className,q=i.style,P=pr(i,["active","disabled","divider","header","onClick","className","style"]),L=AC(P,["eventKey","onSelect"]),W=L[0],Q=L[1];return p?(Q.children=void 0,lg.default.createElement("li",_t({},Q,{role:"separator",className:(0,xA.default)(E,"divider"),style:q}))):g?lg.default.createElement("li",_t({},Q,{role:"heading",className:(0,xA.default)(E,hn(W,"header")),style:q})):lg.default.createElement("li",{role:"presentation",className:(0,xA.default)(E,{active:a,disabled:h}),style:q},lg.default.createElement(eg,_t({},Q,{role:"menuitem",tabIndex:"-1",onClick:ti(b,this.handleClick)})))},t}(lg.default.Component);t4.propTypes=SRt;t4.defaultProps=TRt;var r4=fn("dropdown",t4);var I4=De(ho()),C4=De(cTe()),AIe=De(s1()),qIe=De(Uu()),A4=De(a4()),fg=De(Yt()),xi=De(zr()),PIe=De(es()),pg=De(dIe()),MIe=De(l4()),OIe=De(Jl());var mIe=De(ho()),_4=De(Yt()),vIe=De(Jl());var kLt={componentClass:vIe.default},NLt={componentClass:"div"},x4=function(e){fr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.componentClass,h=i.className,p=pr(i,["componentClass","className"]),g=fo(p),b=g[0],E=g[1],q=ca(b);return _4.default.createElement(a,_t({},E,{className:(0,mIe.default)(h,q)}))},t}(_4.default.Component);x4.propTypes=kLt;x4.defaultProps=NLt;var gIe=fn("modal-body",x4);var w4=De(ho()),w1=De(Yt()),yIe=De(zr());var FLt={dialogClassName:yIe.default.string},_Ie=function(e){fr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i,a=this.props,h=a.dialogClassName,p=a.className,g=a.style,b=a.children,E=a.onMouseDownDialog,q=pr(a,["dialogClassName","className","style","children","onMouseDownDialog"]),P=fo(q),L=P[0],W=P[1],Q=hn(L),V=_t({display:"block"},g),$=_t({},ca(L),(i={},i[Q]=!1,i[hn(L,"dialog")]=!0,i));return w1.default.createElement("div",_t({},W,{tabIndex:"-1",role:"dialog",style:V,className:(0,w4.default)(p,Q)}),w1.default.createElement("div",{className:(0,w4.default)(h,$),onMouseDown:E},w1.default.createElement("div",{className:hn(L,"content"),role:"document"},b)))},t}(w1.default.Component);_Ie.propTypes=FLt;var VA=fn("modal",Qv([Bu.LARGE,Bu.SMALL],_Ie));var xIe=De(ho()),b4=De(Yt()),wIe=De(Jl());var zLt={componentClass:wIe.default},jLt={componentClass:"div"},E4=function(e){fr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.componentClass,h=i.className,p=pr(i,["componentClass","className"]),g=fo(p),b=g[0],E=g[1],q=ca(b);return b4.default.createElement(a,_t({},E,{className:(0,xIe.default)(h,q)}))},t}(b4.default.Component);E4.propTypes=zLt;E4.defaultProps=jLt;var bIe=fn("modal-footer",E4);var EIe=De(ho()),hg=De(zr()),$A=De(Yt());var BLt={closeLabel:hg.default.string,closeButton:hg.default.bool,onHide:hg.default.func},ULt={closeLabel:"Close",closeButton:!1},VLt={$bs_modal:hg.default.shape({onHide:hg.default.func})},GA=function(e){fr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.closeLabel,h=i.closeButton,p=i.onHide,g=i.className,b=i.children,E=pr(i,["closeLabel","closeButton","onHide","className","children"]),q=this.context.$bs_modal,P=fo(E),L=P[0],W=P[1],Q=ca(L);return $A.default.createElement("div",_t({},W,{className:(0,EIe.default)(g,Q)}),h&&$A.default.createElement(Bbe,{label:a,onClick:ti(q&&q.onHide,p)}),b)},t}($A.default.Component);GA.propTypes=BLt;GA.defaultProps=ULt;GA.contextTypes=VLt;var SIe=fn("modal-header",GA);var TIe=De(ho()),S4=De(Yt()),IIe=De(Jl());var $Lt={componentClass:IIe.default},GLt={componentClass:"h4"},T4=function(e){fr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.componentClass,h=i.className,p=pr(i,["componentClass","className"]),g=fo(p),b=g[0],E=g[1],q=ca(b);return S4.default.createElement(a,_t({},E,{className:(0,TIe.default)(h,q)}))},t}(S4.default.Component);T4.propTypes=$Lt;T4.defaultProps=GLt;var CIe=fn("modal-title",T4);var WLt=_t({},pg.default.propTypes,VA.propTypes,{backdrop:xi.default.oneOf(["static",!0,!1]),backdropClassName:xi.default.string,keyboard:xi.default.bool,animation:xi.default.bool,dialogComponentClass:OIe.default,autoFocus:xi.default.bool,enforceFocus:xi.default.bool,restoreFocus:xi.default.bool,show:xi.default.bool,onHide:xi.default.func,onEnter:xi.default.func,onEntering:xi.default.func,onEntered:xi.default.func,onExit:xi.default.func,onExiting:xi.default.func,onExited:xi.default.func,container:pg.default.propTypes.container}),ZLt=_t({},pg.default.defaultProps,{animation:!0,dialogComponentClass:VA}),HLt={$bs_modal:xi.default.shape({onHide:xi.default.func})};function KLt(e){return fg.default.createElement(e4,_t({},e,{timeout:ko.TRANSITION_DURATION}))}function XLt(e){return fg.default.createElement(e4,_t({},e,{timeout:ko.BACKDROP_TRANSITION_DURATION}))}var ko=function(e){fr(t,e);function t(n,i){var a;return a=e.call(this,n,i)||this,a.handleDialogBackdropMouseDown=function(){a._waitingForMouseUp=!0},a.handleMouseUp=function(h){var p=a._modal.getDialogElement();a._waitingForMouseUp&&h.target===p&&(a._ignoreBackdropClick=!0),a._waitingForMouseUp=!1},a.handleEntering=a.handleEntering.bind(yr(yr(a))),a.handleExited=a.handleExited.bind(yr(yr(a))),a.handleWindowResize=a.handleWindowResize.bind(yr(yr(a))),a.handleDialogClick=a.handleDialogClick.bind(yr(yr(a))),a.setModalRef=a.setModalRef.bind(yr(yr(a))),a.state={style:{}},a}var r=t.prototype;return r.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},r.componentWillUnmount=function(){this.handleExited()},r.setModalRef=function(i){this._modal=i},r.handleDialogClick=function(i){if(this._ignoreBackdropClick||i.target!==i.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},r.handleEntering=function(){C4.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},r.handleExited=function(){C4.default.off(window,"resize",this.handleWindowResize)},r.handleWindowResize=function(){this.updateStyle()},r.updateStyle=function(){if(qIe.default){var i=this._modal.getDialogElement(),a=i.scrollHeight,h=(0,AIe.default)(i),p=(0,MIe.default)(PIe.default.findDOMNode(this.props.container||h.body)),g=a>h.documentElement.clientHeight;this.setState({style:{paddingRight:p&&!g?(0,A4.default)():void 0,paddingLeft:!p&&g?(0,A4.default)():void 0}})}},r.render=function(){var i=this.props,a=i.backdrop,h=i.backdropClassName,p=i.animation,g=i.show,b=i.dialogComponentClass,E=i.className,q=i.style,P=i.children,L=i.onEntering,W=i.onExited,Q=pr(i,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),V=g1(Q,pg.default),$=V[0],H=V[1],re=g&&!p&&"in";return fg.default.createElement(pg.default,_t({},$,{ref:this.setModalRef,show:g,containerClassName:hn(Q,"open"),transition:p?KLt:void 0,backdrop:a,backdropTransition:p?XLt:void 0,backdropClassName:(0,I4.default)(hn(Q,"backdrop"),h,re),onEntering:ti(L,this.handleEntering),onExited:ti(W,this.handleExited),onMouseUp:this.handleMouseUp}),fg.default.createElement(b,_t({},H,{style:_t({},this.state.style,q),className:(0,I4.default)(E,re),onClick:a===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),P))},t}(fg.default.Component);ko.propTypes=WLt;ko.defaultProps=ZLt;ko.childContextTypes=HLt;ko.Body=gIe;ko.Header=SIe;ko.Title=CIe;ko.Footer=bIe;ko.Dialog=VA;ko.TRANSITION_DURATION=300;ko.BACKDROP_TRANSITION_DURATION=150;var Lp=fn("modal",Qv([Bu.LARGE,Bu.SMALL],ko));var $n=De(zr(),1);function RIe(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=RIe(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function YLt(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=RIe(e))&&(n&&(n+=" "),n+=t);return n}var WA=YLt;var xn=De(Yt(),1);var b1=De(zr(),1);var q4=[{id:"comment-1",text:"Ungenauigkeit"},{id:"comment-2",text:"Falsche Parameter"},{id:"comment-3",text:"Falsche Kartennummer"},{id:"comment-4",text:"Schlechte Genauigkeit des Originals"},{id:"others",text:"Andere Begr\xFCndung:"}],DIe=e=>{let{onClose:t,onSubmit:r,transformationId:n,validationValue:i}=e,[a,h]=(0,xn.useState)(q4[0].id),[p,g]=(0,xn.useState)(""),b=L=>{h(L.target.value)},E=()=>{t()},q=()=>{r({comment:a!=="others"?q4.find(L=>L.id===a).text:p,transformationId:n,validationValue:i})},P=L=>{g(L.target.value)};return xn.default.createElement("div",{className:"vkf-dialog-jobs-validation"},xn.default.createElement(Lp,{className:"vkf-dialog-jobs-validation",show:!0,onHide:E},xn.default.createElement(Lp.Header,null,xn.default.createElement(Lp.Title,null,"Setze validation=\"",i,"\""," ")),xn.default.createElement(Lp.Body,null,xn.default.createElement("div",{className:"dialog-content"},xn.default.createElement("p",null,"Soll der Validierungsstatus f\xFCr die Transformation mit der ID"," ",n," auf \"",i,"\" gesetzt werden.",i==="invalid"?"F\xFCr invalide Transformationen geben Sie bitte eine Begr\xFCndung mit an.":""),i==="invalid"&&xn.default.createElement(xn.default.Fragment,null,xn.default.createElement("br",null),xn.default.createElement("p",null,"Begr\xFCndung:"),q4.map((L,W)=>xn.default.createElement("div",{className:"radio",key:W},xn.default.createElement("label",null,xn.default.createElement("input",{type:"radio",name:L.id,id:L.id,value:L.id,checked:L.id===a,onChange:b})," ",L.text))),xn.default.createElement("br",null),xn.default.createElement("textarea",{className:"form-control",rows:"3",disabled:a!=="others",onChange:P})))),xn.default.createElement(Lp.Footer,null,xn.default.createElement(Gh,{onClick:E},"Abbrechen"),xn.default.createElement(Gh,{onClick:q,bsStyle:"primary"},"Save changes"))))};DIe.propTypes={onClose:b1.default.func.isRequired,onSubmit:b1.default.func.isRequired,transformationId:b1.default.any.isRequired,validationValue:b1.default.string.isRequired};var LIe=DIe;var kIe=["missing","valid","invalid"],NIe=e=>e==="missing"?"warning":e==="valid"?"success":"danger";function FIe({validation:e,onSelect:t}){return Jt.default.createElement(J3,{id:"validation-button",pullRight:!0,className:"btn-validation",bsStyle:NIe(e),title:`Validation: ${e}`,key:e},["valid","invalid"].map(r=>Jt.default.createElement(r4,{key:r,onClick:()=>t(r)},"Setze Validation auf \"",r,"\"")))}FIe.propTypes={validation:$n.default.oneOf(kIe).isRequired,onSelect:$n.default.func.isRequired};var zIe=e=>{let{isActive:t=!1,className:r="",data:n,onClickPreview:i=()=>console.log("The function onClickPreview is not passed to component TransformationItem.")}=e,{is_active:a,clip:h,params:p,map_id:g,metadata:b,submitted:E,transformation_id:q,user_id:P,validation:L}=n,W=ia.getSettings().LINK_TO_GEOREFERENCE,[Q,V]=(0,Jt.useState)(L),[$,H]=(0,Jt.useState)(!1),[re,se]=(0,Jt.useState)(null),Ie=(Ae,Ue)=>{Ue!==Q&&se({transformationId:Ae,validationValue:Ue})},qe=Ae=>{let Ue={name:Ae.validationValue==="valid"?"transformation_set_valid":"transformation_set_invalid",description:{comment:Ae.comment,transformation_id:Ae.transformationId}};V(Ae.validationValue),se(null),C1e(Ue)};return Jt.default.createElement("div",{className:WA("vkf-transformation-item panel panel-default",t?"preview-on":"",r)},Jt.default.createElement("div",{className:"panel-heading"},b.title_short,Jt.default.createElement("span",{className:WA("state-signal",NIe(Q))})),Jt.default.createElement("div",{className:"panel-body"},Jt.default.createElement("p",null,Jt.default.createElement("strong",null,"Transformation-ID:")," ",q),Jt.default.createElement("p",null,Jt.default.createElement("strong",null,"Karten-ID:")," ",g),Jt.default.createElement("p",null,Jt.default.createElement("strong",null,"Aktiv:")," ",a?"Ja":"Nein"),Jt.default.createElement("p",null,Jt.default.createElement("strong",null,"Erstellt von:")," ",P),Jt.default.createElement("p",null,Jt.default.createElement("strong",null,"Erstellt am:")," ",E),Jt.default.createElement("div",{className:WA("georef-params",$?"all":"")},Jt.default.createElement("p",null,Jt.default.createElement("strong",null,"Parameter:")," ",$?"":"..."),Jt.default.createElement("div",null,Jt.default.createElement("p",null,"Passpunkte"),Jt.default.createElement("p",null,JSON.stringify(p,null,2)),Jt.default.createElement("br",null),Jt.default.createElement("p",null,"Clip-Polygon"),Jt.default.createElement("p",null,JSON.stringify(h,null,2)),Jt.default.createElement("br",null),Jt.default.createElement("a",{href:`${W}?transformation_id=${q}&map_id=${g}`,target:"_blank",rel:"noreferrer",className:"btn btn-default btn-georef"},Jt.default.createElement("span",{className:"icon"})," Gehe zu Georeferenzierung")))),Jt.default.createElement("div",{className:"panel-footer"},Jt.default.createElement("button",{className:"btn btn-default",onClick:()=>i(n)},"Zeige Preview"),Jt.default.createElement("button",{className:"btn btn-default",onClick:()=>H(!$)},$?"Schlie\xDFe Parameter":"Zeige Parameter"),Jt.default.createElement(FIe,{validation:Q,onSelect:Ae=>Ie(q,Ae)})),re!==null&&Jt.default.createElement(LIe,{onSubmit:qe,onClose:()=>se(null),transformationId:re.transformationId,validationValue:re.validationValue}))};zIe.propTypes={isActive:$n.default.bool,className:$n.default.string,data:$n.default.shape({is_active:$n.default.bool,clip:$n.default.object,overwrites:$n.default.number.isRequired,params:$n.default.object.isRequired,submitted:$n.default.string.isRequired,transformation_id:$n.default.number.isRequired,user_id:$n.default.string.isRequired,map_id:$n.default.string.isRequired,metadata:$n.default.shape({time_publish:$n.default.string.isRequired,title:$n.default.string.isRequired,title_short:$n.default.string.isRequired}),validation:$n.default.oneOf(kIe).isRequired}).isRequired,onClickPreview:$n.default.func};var jIe=zIe;var JLt=()=>{let[e,t]=(0,Pn.useState)([]),[r,n]=(0,Pn.useState)(null),[i,a]=(0,Pn.useState)(null),[h,p]=(0,Pn.useState)(!1),g=b=>Va(void 0,null,function*(){if(!h){p(!0);let E=yield A1e(b.transformation_id);n(Object.assign(E,{transformation_id:b.transformation_id})),p(!1)}});return(0,Pn.useEffect)(()=>{if(r!==null&&i!==null){let b=kh(r.extent,"EPSG:4326",i.map.getView().getProjection());i.map.getView().fit(b,{padding:[100,100,100,100]})}},[r,i]),Pn.default.createElement("div",{className:"vkf-admin-evaluation"},Pn.default.createElement("h1",null,"Willkommen auf der Evaluierungsseite #",ia.getUsername()),Pn.default.createElement("p",null,"Die Evaluierungsseite bietet Ihnen die M\xF6glichkeit bestehende Transformationen zu validieren und ggf. zur\xFCckzusetzen. Sie k\xF6nnen Transformationen nach unterschiedlichen Kriterien ausw\xE4hlen."),Pn.default.createElement(F1e,{onChangeTransformations:t}),Pn.default.createElement("div",{className:"content"},Pn.default.createElement("div",{className:"row"},Pn.default.createElement("div",{className:"col-sm-6 col-md-6 col-lg-6 view-col"},Pn.default.createElement("div",null,e.map(b=>Pn.default.createElement(jIe,{isActive:r!==null&&r.transformation_id===b.transformation_id,key:b.transformation_id,data:b,onClickPreview:g})))),Pn.default.createElement("div",{className:"col-sm-6 col-md-6 col-lg-6 view-col"},Pn.default.createElement("div",{className:"custom-map-container"},Pn.default.createElement(w1e,{extent:null,onLoad:b=>a(b),urlsOsmBaseMap:ia.getDefaultBaseMapUrls(),urlNominatim:ia.getNominatimUrl()}),r!==null&&i!==null&&Pn.default.createElement(O1e,{key:r.wms_url,map:i.map,layerName:r.layer_name,wmsUrl:r.wms_url}),h&&Pn.default.createElement(E1e,null))))))},BIe=JLt;var QLt=ia;function ekt(e){VIe.default.render(UIe.default.createElement(BIe,null),e)}return $Ae(tkt)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.0/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

keycode/index.js:
  (*!
   * Programatically add the following
   *)
*/