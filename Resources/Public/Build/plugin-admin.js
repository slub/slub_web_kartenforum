var vk2=(()=>{var EPe=Object.create;var xy=Object.defineProperty,SPe=Object.defineProperties,TPe=Object.getOwnPropertyDescriptor,IPe=Object.getOwnPropertyDescriptors,CPe=Object.getOwnPropertyNames,b6=Object.getOwnPropertySymbols,APe=Object.getPrototypeOf,w6=Object.prototype.hasOwnProperty,qPe=Object.prototype.propertyIsEnumerable;var Mb=Math.pow,gP=(e,t,r)=>t in e?xy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yP=(e,t)=>{for(var r in t||(t={}))w6.call(t,r)&&gP(e,r,t[r]);if(b6)for(var r of b6(t))qPe.call(t,r)&&gP(e,r,t[r]);return e},_P=(e,t)=>SPe(e,IPe(t));var S=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),PPe=(e,t)=>{for(var r in t)xy(e,r,{get:t[r],enumerable:!0})},E6=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of CPe(t))!w6.call(e,i)&&i!==r&&xy(e,i,{get:()=>t[i],enumerable:!(n=TPe(t,i))||n.enumerable});return e};var De=(e,t,r)=>(r=e!=null?EPe(APe(e)):{},E6(t||!e||!e.__esModule?xy(r,"default",{value:e,enumerable:!0}):r,e)),MPe=e=>E6(xy({},"__esModule",{value:!0}),e);var pi=(e,t,r)=>gP(e,typeof t!="symbol"?t+"":t,r);var Ga=(e,t,r)=>new Promise((n,i)=>{var a=g=>{try{p(r.next(g))}catch(w){i(w)}},h=g=>{try{p(r.throw(g))}catch(w){i(w)}},p=g=>g.done?n(g.value):Promise.resolve(g.value).then(a,h);p((r=r.apply(e,t)).next())});var xP=S(($zt,T6)=>{"use strict";var S6=Object.getOwnPropertySymbols,OPe=Object.prototype.hasOwnProperty,RPe=Object.prototype.propertyIsEnumerable;function DPe(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function LPe(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(a){i[a]=a}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch(a){return!1}}T6.exports=LPe()?Object.assign:function(e,t){for(var r,n=DPe(e),i,a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var h in r)OPe.call(r,h)&&(n[h]=r[h]);if(S6){i=S6(r);for(var p=0;p<i.length;p++)RPe.call(r,i[p])&&(n[i[p]]=r[i[p]])}}return n}});var B6=S(hr=>{"use strict";var wP=xP(),Pd=60103,A6=60106;hr.Fragment=60107;hr.StrictMode=60108;hr.Profiler=60114;var q6=60109,P6=60110,M6=60112;hr.Suspense=60113;var O6=60115,R6=60116;typeof Symbol=="function"&&Symbol.for&&(Zo=Symbol.for,Pd=Zo("react.element"),A6=Zo("react.portal"),hr.Fragment=Zo("react.fragment"),hr.StrictMode=Zo("react.strict_mode"),hr.Profiler=Zo("react.profiler"),q6=Zo("react.provider"),P6=Zo("react.context"),M6=Zo("react.forward_ref"),hr.Suspense=Zo("react.suspense"),O6=Zo("react.memo"),R6=Zo("react.lazy"));var Zo,I6=typeof Symbol=="function"&&Symbol.iterator;function kPe(e){return e===null||typeof e!="object"?null:(e=I6&&e[I6]||e["@@iterator"],typeof e=="function"?e:null)}function by(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L6={};function Md(e,t,r){this.props=e,this.context=t,this.refs=L6,this.updater=r||D6}Md.prototype.isReactComponent={};Md.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(by(85));this.updater.enqueueSetState(this,e,t,"setState")};Md.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function k6(){}k6.prototype=Md.prototype;function EP(e,t,r){this.props=e,this.context=t,this.refs=L6,this.updater=r||D6}var SP=EP.prototype=new k6;SP.constructor=EP;wP(SP,Md.prototype);SP.isPureReactComponent=!0;var TP={current:null},N6=Object.prototype.hasOwnProperty,F6={key:!0,ref:!0,__self:!0,__source:!0};function z6(e,t,r){var n,i={},a=null,h=null;if(t!=null)for(n in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(a=""+t.key),t)N6.call(t,n)&&!F6.hasOwnProperty(n)&&(i[n]=t[n]);var p=arguments.length-2;if(p===1)i.children=r;else if(1<p){for(var g=Array(p),w=0;w<p;w++)g[w]=arguments[w+2];i.children=g}if(e&&e.defaultProps)for(n in p=e.defaultProps,p)i[n]===void 0&&(i[n]=p[n]);return{$$typeof:Pd,type:e,key:a,ref:h,props:i,_owner:TP.current}}function NPe(e,t){return{$$typeof:Pd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function IP(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pd}function FPe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var C6=/\/+/g;function bP(e,t){return typeof e=="object"&&e!==null&&e.key!=null?FPe(""+e.key):t.toString(36)}function Rb(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(a){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case Pd:case A6:h=!0;}}if(h)return h=e,i=i(h),e=n===""?"."+bP(h,0):n,Array.isArray(i)?(r="",e!=null&&(r=e.replace(C6,"$&/")+"/"),Rb(i,t,r,"",function(w){return w})):i!=null&&(IP(i)&&(i=NPe(i,r+(!i.key||h&&h.key===i.key?"":(""+i.key).replace(C6,"$&/")+"/")+e)),t.push(i)),1;if(h=0,n=n===""?".":n+":",Array.isArray(e))for(var p=0;p<e.length;p++){a=e[p];var g=n+bP(a,p);h+=Rb(a,t,r,g,i)}else if(g=kPe(e),typeof g=="function")for(e=g.call(e),p=0;!(a=e.next()).done;)a=a.value,g=n+bP(a,p++),h+=Rb(a,t,r,g,i);else if(a==="object")throw t=""+e,Error(by(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return h}function Ob(e,t,r){if(e==null)return e;var n=[],i=0;return Rb(e,n,"","",function(a){return t.call(r,a,i++)}),n}function zPe(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var j6={current:null};function cl(){var e=j6.current;if(e===null)throw Error(by(321));return e}var jPe={ReactCurrentDispatcher:j6,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:TP,IsSomeRendererActing:{current:!1},assign:wP};hr.Children={map:Ob,forEach:function(e,t,r){Ob(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ob(e,function(){t++}),t},toArray:function(e){return Ob(e,function(t){return t})||[]},only:function(e){if(!IP(e))throw Error(by(143));return e}};hr.Component=Md;hr.PureComponent=EP;hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jPe;hr.cloneElement=function(e,t,r){if(e==null)throw Error(by(267,e));var n=wP({},e.props),i=e.key,a=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,h=TP.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var p=e.type.defaultProps;for(g in t)N6.call(t,g)&&!F6.hasOwnProperty(g)&&(n[g]=t[g]===void 0&&p!==void 0?p[g]:t[g])}var g=arguments.length-2;if(g===1)n.children=r;else if(1<g){p=Array(g);for(var w=0;w<g;w++)p[w]=arguments[w+2];n.children=p}return{$$typeof:Pd,type:e.type,key:i,ref:a,props:n,_owner:h}};hr.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:P6,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:q6,_context:e},e.Consumer=e};hr.createElement=z6;hr.createFactory=function(e){var t=z6.bind(null,e);return t.type=e,t};hr.createRef=function(){return{current:null}};hr.forwardRef=function(e){return{$$typeof:M6,render:e}};hr.isValidElement=IP;hr.lazy=function(e){return{$$typeof:R6,_payload:{_status:-1,_result:e},_init:zPe}};hr.memo=function(e,t){return{$$typeof:O6,type:e,compare:t===void 0?null:t}};hr.useCallback=function(e,t){return cl().useCallback(e,t)};hr.useContext=function(e,t){return cl().useContext(e,t)};hr.useDebugValue=function(){};hr.useEffect=function(e,t){return cl().useEffect(e,t)};hr.useImperativeHandle=function(e,t,r){return cl().useImperativeHandle(e,t,r)};hr.useLayoutEffect=function(e,t){return cl().useLayoutEffect(e,t)};hr.useMemo=function(e,t){return cl().useMemo(e,t)};hr.useReducer=function(e,t,r){return cl().useReducer(e,t,r)};hr.useRef=function(e){return cl().useRef(e)};hr.useState=function(e){return cl().useState(e)};hr.version="17.0.2"});var Xt=S((Wzt,U6)=>{"use strict";U6.exports=B6()});var Z6=S(Ir=>{"use strict";var Rd,Sy,Nb,RP;typeof performance=="object"&&typeof performance.now=="function"?(V6=performance,Ir.unstable_now=function(){return V6.now()}):(CP=Date,$6=CP.now(),Ir.unstable_now=function(){return CP.now()-$6});var V6,CP,$6;typeof window=="undefined"||typeof MessageChannel!="function"?(Od=null,AP=null,qP=function(){if(Od!==null)try{var e=Ir.unstable_now();Od(!0,e),Od=null}catch(t){throw setTimeout(qP,0),t}},Rd=function(e){Od!==null?setTimeout(Rd,0,e):(Od=e,setTimeout(qP,0))},Sy=function(e,t){AP=setTimeout(e,t)},Nb=function(){clearTimeout(AP)},Ir.unstable_shouldYield=function(){return!1},RP=Ir.unstable_forceFrameRate=function(){}):(G6=window.setTimeout,W6=window.clearTimeout,typeof console!="undefined"&&(H6=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof H6!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),wy=!1,Ey=null,Db=-1,PP=5,MP=0,Ir.unstable_shouldYield=function(){return Ir.unstable_now()>=MP},RP=function(){},Ir.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):PP=0<e?Math.floor(1e3/e):5},OP=new MessageChannel,Lb=OP.port2,OP.port1.onmessage=function(){if(Ey!==null){var e=Ir.unstable_now();MP=e+PP;try{Ey(!0,e)?Lb.postMessage(null):(wy=!1,Ey=null)}catch(t){throw Lb.postMessage(null),t}}else wy=!1},Rd=function(e){Ey=e,wy||(wy=!0,Lb.postMessage(null))},Sy=function(e,t){Db=G6(function(){e(Ir.unstable_now())},t)},Nb=function(){W6(Db),Db=-1});var Od,AP,qP,G6,W6,H6,wy,Ey,Db,PP,MP,OP,Lb;function DP(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,i=e[n];if(i!==void 0&&0<kb(i,t))e[n]=t,e[r]=i,r=n;else break e}}function Ms(e){return e=e[0],e===void 0?null:e}function Fb(e){var t=e[0];if(t!==void 0){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length;n<i;){var a=2*(n+1)-1,h=e[a],p=a+1,g=e[p];if(h!==void 0&&0>kb(h,r))g!==void 0&&0>kb(g,h)?(e[n]=g,e[p]=r,n=p):(e[n]=h,e[a]=r,n=a);else if(g!==void 0&&0>kb(g,r))e[n]=g,e[p]=r,n=p;else break e}}return t}return null}function kb(e,t){var r=e.sortIndex-t.sortIndex;return r!==0?r:e.id-t.id}var uu=[],Nc=[],BPe=1,Ko=null,ea=3,zb=!1,Cf=!1,Ty=!1;function LP(e){for(var t=Ms(Nc);t!==null;){if(t.callback===null)Fb(Nc);else if(t.startTime<=e)Fb(Nc),t.sortIndex=t.expirationTime,DP(uu,t);else break;t=Ms(Nc)}}function kP(e){if(Ty=!1,LP(e),!Cf)if(Ms(uu)!==null)Cf=!0,Rd(NP);else{var t=Ms(Nc);t!==null&&Sy(kP,t.startTime-e)}}function NP(e,t){Cf=!1,Ty&&(Ty=!1,Nb()),zb=!0;var r=ea;try{for(LP(t),Ko=Ms(uu);Ko!==null&&(!(Ko.expirationTime>t)||e&&!Ir.unstable_shouldYield());){var n=Ko.callback;if(typeof n=="function"){Ko.callback=null,ea=Ko.priorityLevel;var i=n(Ko.expirationTime<=t);t=Ir.unstable_now(),typeof i=="function"?Ko.callback=i:Ko===Ms(uu)&&Fb(uu),LP(t)}else Fb(uu);Ko=Ms(uu)}if(Ko!==null)var a=!0;else{var h=Ms(Nc);h!==null&&Sy(kP,h.startTime-t),a=!1}return a}finally{Ko=null,ea=r,zb=!1}}var UPe=RP;Ir.unstable_IdlePriority=5;Ir.unstable_ImmediatePriority=1;Ir.unstable_LowPriority=4;Ir.unstable_NormalPriority=3;Ir.unstable_Profiling=null;Ir.unstable_UserBlockingPriority=2;Ir.unstable_cancelCallback=function(e){e.callback=null};Ir.unstable_continueExecution=function(){Cf||zb||(Cf=!0,Rd(NP))};Ir.unstable_getCurrentPriorityLevel=function(){return ea};Ir.unstable_getFirstCallbackNode=function(){return Ms(uu)};Ir.unstable_next=function(e){switch(ea){case 1:case 2:case 3:var t=3;break;default:t=ea;}var r=ea;ea=t;try{return e()}finally{ea=r}};Ir.unstable_pauseExecution=function(){};Ir.unstable_requestPaint=UPe;Ir.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3;}var r=ea;ea=e;try{return t()}finally{ea=r}};Ir.unstable_scheduleCallback=function(e,t,r){var n=Ir.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3;}return i=r+i,e={id:BPe++,callback:t,priorityLevel:e,startTime:r,expirationTime:i,sortIndex:-1},r>n?(e.sortIndex=r,DP(Nc,e),Ms(uu)===null&&e===Ms(Nc)&&(Ty?Nb():Ty=!0,Sy(kP,r-n))):(e.sortIndex=i,DP(uu,e),Cf||zb||(Cf=!0,Rd(NP))),e};Ir.unstable_wrapCallback=function(e){var t=ea;return function(){var r=ea;ea=t;try{return e.apply(this,arguments)}finally{ea=r}}}});var X6=S((Zzt,K6)=>{"use strict";K6.exports=Z6()});var k8=S(ts=>{"use strict";var Ow=Xt(),ln=xP(),di=X6();function He(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Ow)throw Error(He(227));var l$=new Set,t_={};function Ff(e,t){ev(e,t),ev(e+"Capture",t)}function ev(e,t){for(t_[e]=t,e=0;e<t.length;e++)l$.add(t[e])}var ml=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),VPe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y6=Object.prototype.hasOwnProperty,J6={},Q6={};function $Pe(e){return Y6.call(Q6,e)?!0:Y6.call(J6,e)?!1:VPe.test(e)?Q6[e]=!0:(J6[e]=!0,!1)}function GPe(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1;}}function WPe(e,t,r,n){if(t===null||typeof t=="undefined"||GPe(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t;}return!1}function Ca(e,t,r,n,i,a,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=h}var Mi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mi[e]=new Ca(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Mi[t]=new Ca(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mi[e]=new Ca(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mi[e]=new Ca(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mi[e]=new Ca(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mi[e]=new Ca(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mi[e]=new Ca(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mi[e]=new Ca(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mi[e]=new Ca(e,5,!1,e.toLowerCase(),null,!1,!1)});var WM=/[\-:]([a-z])/g;function HM(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(WM,HM);Mi[t]=new Ca(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(WM,HM);Mi[t]=new Ca(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(WM,HM);Mi[t]=new Ca(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mi[e]=new Ca(e,1,!1,e.toLowerCase(),null,!1,!1)});Mi.xlinkHref=new Ca("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mi[e]=new Ca(e,1,!1,e.toLowerCase(),null,!0,!0)});function ZM(e,t,r,n){var i=Mi.hasOwnProperty(t)?Mi[t]:null,a=i!==null?i.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");a||(WPe(t,r,i,n)&&(r=null),n||i===null?$Pe(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var zf=Ow.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fy=60103,qf=60106,zc=60107,KM=60108,Vy=60114,XM=60109,YM=60110,Rw=60112,$y=60113,lw=60120,Dw=60115,JM=60116,QM=60121,e2=60128,c$=60129,t2=60130,oM=60131;typeof Symbol=="function"&&Symbol.for&&(Xn=Symbol.for,Fy=Xn("react.element"),qf=Xn("react.portal"),zc=Xn("react.fragment"),KM=Xn("react.strict_mode"),Vy=Xn("react.profiler"),XM=Xn("react.provider"),YM=Xn("react.context"),Rw=Xn("react.forward_ref"),$y=Xn("react.suspense"),lw=Xn("react.suspense_list"),Dw=Xn("react.memo"),JM=Xn("react.lazy"),QM=Xn("react.block"),Xn("react.scope"),e2=Xn("react.opaque.id"),c$=Xn("react.debug_trace_mode"),t2=Xn("react.offscreen"),oM=Xn("react.legacy_hidden"));var Xn,eV=typeof Symbol=="function"&&Symbol.iterator;function Iy(e){return e===null||typeof e!="object"?null:(e=eV&&e[eV]||e["@@iterator"],typeof e=="function"?e:null)}var FP;function zy(e){if(FP===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);FP=t&&t[1]||""}return`
`+FP+e}var zP=!1;function jb(e,t){if(!e||zP)return"";zP=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var n=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){n=g}e.call(t.prototype)}}else{try{throw Error()}catch(g){n=g}e()}}catch(g){if(g&&n&&typeof g.stack=="string"){for(var i=g.stack.split(`
`),a=n.stack.split(`
`),h=i.length-1,p=a.length-1;1<=h&&0<=p&&i[h]!==a[p];)p--;for(;1<=h&&0<=p;h--,p--)if(i[h]!==a[p]){if(h!==1||p!==1)do if(h--,p--,0>p||i[h]!==a[p])return`
`+i[h].replace(" at new "," at ");while(1<=h&&0<=p);break}}}finally{zP=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?zy(e):""}function HPe(e){switch(e.tag){case 5:return zy(e.type);case 16:return zy("Lazy");case 13:return zy("Suspense");case 19:return zy("SuspenseList");case 0:case 2:case 15:return e=jb(e.type,!1),e;case 11:return e=jb(e.type.render,!1),e;case 22:return e=jb(e.type._render,!1),e;case 1:return e=jb(e.type,!0),e;default:return"";}}function $d(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zc:return"Fragment";case qf:return"Portal";case Vy:return"Profiler";case KM:return"StrictMode";case $y:return"Suspense";case lw:return"SuspenseList";}if(typeof e=="object")switch(e.$$typeof){case YM:return(e.displayName||"Context")+".Consumer";case XM:return(e._context.displayName||"Context")+".Provider";case Rw:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case Dw:return $d(e.type);case QM:return $d(e._render);case JM:t=e._payload,e=e._init;try{return $d(e(t))}catch(r){}}return null}function Yc(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return"";}}function h$(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ZPe(e){var t=h$(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(h){n=""+h,a.call(this,h)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bb(e){e._valueTracker||(e._valueTracker=ZPe(e))}function f$(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=h$(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function cw(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function sM(e,t){var r=t.checked;return ln({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function tV(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Yc(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function p$(e,t){t=t.checked,t!=null&&ZM(e,"checked",t,!1)}function uM(e,t){p$(e,t);var r=Yc(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?lM(e,t.type,r):t.hasOwnProperty("defaultValue")&&lM(e,t.type,Yc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rV(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function lM(e,t,r){(t!=="number"||cw(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function KPe(e){var t="";return Ow.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function cM(e,t){return e=ln({children:void 0},t),(t=KPe(t.children))&&(e.children=t),e}function Gd(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Yc(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function hM(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(He(91));return ln({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nV(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(He(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(He(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Yc(r)}}function d$(e,t){var r=Yc(t.value),n=Yc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function iV(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var fM={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function v$(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml";}}function pM(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?v$(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ub,m$=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!==fM.svg||"innerHTML"in e)e.innerHTML=t;else{for(Ub=Ub||document.createElement("div"),Ub.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ub.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function r_(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Gy={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XPe=["Webkit","ms","Moz","O"];Object.keys(Gy).forEach(function(e){XPe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Gy[t]=Gy[e]})});function g$(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Gy.hasOwnProperty(e)&&Gy[e]?(""+t).trim():t+"px"}function y$(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=g$(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var YPe=ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dM(e,t){if(t){if(YPe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(He(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(He(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(He(61))}if(t.style!=null&&typeof t.style!="object")throw Error(He(62))}}function vM(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0;}}function r2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mM=null,Wd=null,Hd=null;function aV(e){if(e=m_(e)){if(typeof mM!="function")throw Error(He(280));var t=e.stateNode;t&&(t=jw(t),mM(e.stateNode,e.type,t))}}function _$(e){Wd?Hd?Hd.push(e):Hd=[e]:Wd=e}function x$(){if(Wd){var e=Wd,t=Hd;if(Hd=Wd=null,aV(e),t)for(e=0;e<t.length;e++)aV(t[e])}}function n2(e,t){return e(t)}function b$(e,t,r,n,i){return e(t,r,n,i)}function i2(){}var w$=n2,Pf=!1,jP=!1;function a2(){(Wd!==null||Hd!==null)&&(i2(),x$())}function JPe(e,t,r){if(jP)return e(t,r);jP=!0;try{return w$(e,t,r)}finally{jP=!1,a2()}}function n_(e,t){var r=e.stateNode;if(r===null)return null;var n=jw(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1;}if(e)return null;if(r&&typeof r!="function")throw Error(He(231,t,typeof r));return r}var gM=!1;if(ml)try{Dd={},Object.defineProperty(Dd,"passive",{get:function(){gM=!0}}),window.addEventListener("test",Dd,Dd),window.removeEventListener("test",Dd,Dd)}catch(e){gM=!1}var Dd;function QPe(e,t,r,n,i,a,h,p,g){var w=Array.prototype.slice.call(arguments,3);try{t.apply(r,w)}catch(E){this.onError(E)}}var Wy=!1,hw=null,fw=!1,yM=null,eMe={onError:function(e){Wy=!0,hw=e}};function tMe(e,t,r,n,i,a,h,p,g){Wy=!1,hw=null,QPe.apply(eMe,arguments)}function rMe(e,t,r,n,i,a,h,p,g){if(tMe.apply(this,arguments),Wy){if(Wy){var w=hw;Wy=!1,hw=null}else throw Error(He(198));fw||(fw=!0,yM=w)}}function jf(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&1026&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function E$(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function oV(e){if(jf(e)!==e)throw Error(He(188))}function nMe(e){var t=e.alternate;if(!t){if(t=jf(e),t===null)throw Error(He(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return oV(i),e;if(a===n)return oV(i),t;a=a.sibling}throw Error(He(188))}if(r.return!==n.return)r=i,n=a;else{for(var h=!1,p=i.child;p;){if(p===r){h=!0,r=i,n=a;break}if(p===n){h=!0,n=i,r=a;break}p=p.sibling}if(!h){for(p=a.child;p;){if(p===r){h=!0,r=a,n=i;break}if(p===n){h=!0,n=a,r=i;break}p=p.sibling}if(!h)throw Error(He(189))}}if(r.alternate!==n)throw Error(He(190))}if(r.tag!==3)throw Error(He(188));return r.stateNode.current===r?e:t}function S$(e){if(e=nMe(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function sV(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var T$,o2,I$,C$,_M=!1,lu=[],Vc=null,$c=null,Gc=null,i_=new Map,a_=new Map,Cy=[],uV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xM(e,t,r,n,i){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[n]}}function lV(e,t){switch(e){case"focusin":case"focusout":Vc=null;break;case"dragenter":case"dragleave":$c=null;break;case"mouseover":case"mouseout":Gc=null;break;case"pointerover":case"pointerout":i_.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":a_.delete(t.pointerId);}}function Ay(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e=xM(t,r,n,i,a),t!==null&&(t=m_(t),t!==null&&o2(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function iMe(e,t,r,n,i){switch(t){case"focusin":return Vc=Ay(Vc,e,t,r,n,i),!0;case"dragenter":return $c=Ay($c,e,t,r,n,i),!0;case"mouseover":return Gc=Ay(Gc,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return i_.set(a,Ay(i_.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,a_.set(a,Ay(a_.get(a)||null,e,t,r,n,i)),!0;}return!1}function aMe(e){var t=Mf(e.target);if(t!==null){var r=jf(t);if(r!==null){if(t=r.tag,t===13){if(t=E$(r),t!==null){e.blockedOn=t,C$(e.lanePriority,function(){di.unstable_runWithPriority(e.priority,function(){I$(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qb(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=c2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=m_(r),t!==null&&o2(t),e.blockedOn=r,!1;t.shift()}return!0}function cV(e,t,r){Qb(e)&&r.delete(t)}function oMe(){for(_M=!1;0<lu.length;){var e=lu[0];if(e.blockedOn!==null){e=m_(e.blockedOn),e!==null&&T$(e);break}for(var t=e.targetContainers;0<t.length;){var r=c2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&lu.shift()}Vc!==null&&Qb(Vc)&&(Vc=null),$c!==null&&Qb($c)&&($c=null),Gc!==null&&Qb(Gc)&&(Gc=null),i_.forEach(cV),a_.forEach(cV)}function qy(e,t){e.blockedOn===t&&(e.blockedOn=null,_M||(_M=!0,di.unstable_scheduleCallback(di.unstable_NormalPriority,oMe)))}function A$(e){function t(i){return qy(i,e)}if(0<lu.length){qy(lu[0],e);for(var r=1;r<lu.length;r++){var n=lu[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Vc!==null&&qy(Vc,e),$c!==null&&qy($c,e),Gc!==null&&qy(Gc,e),i_.forEach(t),a_.forEach(t),r=0;r<Cy.length;r++)n=Cy[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Cy.length&&(r=Cy[0],r.blockedOn===null);)aMe(r),r.blockedOn===null&&Cy.shift()}function Vb(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Fd={animationend:Vb("Animation","AnimationEnd"),animationiteration:Vb("Animation","AnimationIteration"),animationstart:Vb("Animation","AnimationStart"),transitionend:Vb("Transition","TransitionEnd")},BP={},q$={};ml&&(q$=document.createElement("div").style,"AnimationEvent"in window||(delete Fd.animationend.animation,delete Fd.animationiteration.animation,delete Fd.animationstart.animation),"TransitionEvent"in window||delete Fd.transitionend.transition);function Lw(e){if(BP[e])return BP[e];if(!Fd[e])return e;var t=Fd[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in q$)return BP[e]=t[r];return e}var P$=Lw("animationend"),M$=Lw("animationiteration"),O$=Lw("animationstart"),R$=Lw("transitionend"),D$=new Map,s2=new Map,sMe=["abort","abort",P$,"animationEnd",M$,"animationIteration",O$,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",R$,"transitionEnd","waiting","waiting"];function u2(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),s2.set(n,t),D$.set(n,i),Ff(i,[n])}}var uMe=di.unstable_now;uMe();var $r=8;function kd(e){if(1&e)return $r=15,1;if(2&e)return $r=14,2;if(4&e)return $r=13,4;var t=24&e;return t!==0?($r=12,t):e&32?($r=11,32):(t=192&e,t!==0?($r=10,t):e&256?($r=9,256):(t=3584&e,t!==0?($r=8,t):e&4096?($r=7,4096):(t=4186112&e,t!==0?($r=6,t):(t=62914560&e,t!==0?($r=5,t):e&67108864?($r=4,67108864):e&134217728?($r=3,134217728):(t=805306368&e,t!==0?($r=2,t):1073741824&e?($r=1,1073741824):($r=8,e))))))}function lMe(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0;}}function cMe(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(He(358,e));}}function o_(e,t){var r=e.pendingLanes;if(r===0)return $r=0;var n=0,i=0,a=e.expiredLanes,h=e.suspendedLanes,p=e.pingedLanes;if(a!==0)n=a,i=$r=15;else if(a=r&134217727,a!==0){var g=a&~h;g!==0?(n=kd(g),i=$r):(p&=a,p!==0&&(n=kd(p),i=$r))}else a=r&~h,a!==0?(n=kd(a),i=$r):p!==0&&(n=kd(p),i=$r);if(n===0)return 0;if(n=31-Jc(n),n=r&((0>n?0:1<<n)<<1)-1,t!==0&&t!==n&&!(t&h)){if(kd(t),i<=$r)return t;$r=i}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Jc(t),i=1<<r,n|=e[r],t&=~i;return n}function L$(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pw(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=Nd(24&~t),e===0?pw(10,t):e;case 10:return e=Nd(192&~t),e===0?pw(8,t):e;case 8:return e=Nd(3584&~t),e===0&&(e=Nd(4186112&~t),e===0&&(e=512)),e;case 2:return t=Nd(805306368&~t),t===0&&(t=268435456),t;}throw Error(He(358,e))}function Nd(e){return e&-e}function UP(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function kw(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,e=e.eventTimes,t=31-Jc(t),e[t]=r}var Jc=Math.clz32?Math.clz32:pMe,hMe=Math.log,fMe=Math.LN2;function pMe(e){return e===0?32:31-(hMe(e)/fMe|0)|0}var dMe=di.unstable_UserBlockingPriority,vMe=di.unstable_runWithPriority,ew=!0;function mMe(e,t,r,n){Pf||i2();var i=l2,a=Pf;Pf=!0;try{b$(i,e,t,r,n)}finally{(Pf=a)||a2()}}function gMe(e,t,r,n){vMe(dMe,l2.bind(null,e,t,r,n))}function l2(e,t,r,n){if(ew){var i;if((i=(t&4)===0)&&0<lu.length&&-1<uV.indexOf(e))e=xM(null,e,t,r,n),lu.push(e);else{var a=c2(e,t,r,n);if(a===null)i&&lV(e,n);else{if(i){if(-1<uV.indexOf(e)){e=xM(a,e,t,r,n),lu.push(e);return}if(iMe(a,e,t,r,n))return;lV(e,n)}Z$(e,t,n,null,r)}}}}function c2(e,t,r,n){var i=r2(n);if(i=Mf(i),i!==null){var a=jf(i);if(a===null)i=null;else{var h=a.tag;if(h===13){if(i=E$(a),i!==null)return i;i=null}else if(h===3){if(a.stateNode.hydrate)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Z$(e,t,n,i,r),null}var jc=null,h2=null,tw=null;function k$(){if(tw)return tw;var e,t=h2,r=t.length,n,i="value"in jc?jc.value:jc.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var h=r-e;for(n=1;n<=h&&t[r-n]===i[a-n];n++);return tw=i.slice(e,1<n?1-n:void 0)}function rw(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $b(){return!0}function hV(){return!1}function Mo(e){function t(r,n,i,a,h){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=h,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(r=e[p],this[p]=r?r(a):a[p]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?$b:hV,this.isPropagationStopped=hV,this}return ln(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=$b)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=$b)},persist:function(){},isPersistent:$b}),t}var iv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},f2=Mo(iv),v_=ln({},iv,{view:0,detail:0}),yMe=Mo(v_),VP,$P,Py,Nw=ln({},v_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:p2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Py&&(Py&&e.type==="mousemove"?(VP=e.screenX-Py.screenX,$P=e.screenY-Py.screenY):$P=VP=0,Py=e),VP)},movementY:function(e){return"movementY"in e?e.movementY:$P}}),fV=Mo(Nw),_Me=ln({},Nw,{dataTransfer:0}),xMe=Mo(_Me),bMe=ln({},v_,{relatedTarget:0}),GP=Mo(bMe),wMe=ln({},iv,{animationName:0,elapsedTime:0,pseudoElement:0}),EMe=Mo(wMe),SMe=ln({},iv,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),TMe=Mo(SMe),IMe=ln({},iv,{data:0}),pV=Mo(IMe),CMe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AMe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qMe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PMe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qMe[e])?!!t[e]:!1}function p2(){return PMe}var MMe=ln({},v_,{key:function(e){if(e.key){var t=CMe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=rw(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?AMe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:p2,charCode:function(e){return e.type==="keypress"?rw(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?rw(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),OMe=Mo(MMe),RMe=ln({},Nw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dV=Mo(RMe),DMe=ln({},v_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:p2}),LMe=Mo(DMe),kMe=ln({},iv,{propertyName:0,elapsedTime:0,pseudoElement:0}),NMe=Mo(kMe),FMe=ln({},Nw,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zMe=Mo(FMe),jMe=[9,13,27,32],d2=ml&&"CompositionEvent"in window,Hy=null;ml&&"documentMode"in document&&(Hy=document.documentMode);var BMe=ml&&"TextEvent"in window&&!Hy,N$=ml&&(!d2||Hy&&8<Hy&&11>=Hy),vV=" ",mV=!1;function F$(e,t){switch(e){case"keyup":return jMe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1;}}function z$(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zd=!1;function UMe(e,t){switch(e){case"compositionend":return z$(t);case"keypress":return t.which!==32?null:(mV=!0,vV);case"textInput":return e=t.data,e===vV&&mV?null:e;default:return null;}}function VMe(e,t){if(zd)return e==="compositionend"||!d2&&F$(e,t)?(e=k$(),tw=h2=jc=null,zd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return N$&&t.locale!=="ko"?null:t.data;default:return null;}}var $Me={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gV(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$Me[e.type]:t==="textarea"}function j$(e,t,r,n){_$(n),t=dw(t,"onChange"),0<t.length&&(r=new f2("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Zy=null,s_=null;function GMe(e){G$(e,0)}function Fw(e){var t=Bd(e);if(f$(t))return e}function WMe(e,t){if(e==="change")return t}var B$=!1;ml&&(ml?(Wb="oninput"in document,Wb||(WP=document.createElement("div"),WP.setAttribute("oninput","return;"),Wb=typeof WP.oninput=="function"),Gb=Wb):Gb=!1,B$=Gb&&(!document.documentMode||9<document.documentMode));var Gb,Wb,WP;function yV(){Zy&&(Zy.detachEvent("onpropertychange",U$),s_=Zy=null)}function U$(e){if(e.propertyName==="value"&&Fw(s_)){var t=[];if(j$(t,s_,e,r2(e)),e=GMe,Pf)e(t);else{Pf=!0;try{n2(e,t)}finally{Pf=!1,a2()}}}}function HMe(e,t,r){e==="focusin"?(yV(),Zy=t,s_=r,Zy.attachEvent("onpropertychange",U$)):e==="focusout"&&yV()}function ZMe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fw(s_)}function KMe(e,t){if(e==="click")return Fw(t)}function XMe(e,t){if(e==="input"||e==="change")return Fw(t)}function YMe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xo=typeof Object.is=="function"?Object.is:YMe,JMe=Object.prototype.hasOwnProperty;function u_(e,t){if(Xo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!JMe.call(t,r[n])||!Xo(e[r[n]],t[r[n]]))return!1;return!0}function _V(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xV(e,t){var r=_V(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=_V(r)}}function V$(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?V$(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bV(){for(var e=window,t=cw();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch(n){r=!1}if(r)e=t.contentWindow;else break;t=cw(e.document)}return t}function bM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var QMe=ml&&"documentMode"in document&&11>=document.documentMode,jd=null,wM=null,Ky=null,EM=!1;function wV(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;EM||jd==null||jd!==cw(n)||(n=jd,"selectionStart"in n&&bM(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ky&&u_(Ky,n)||(Ky=n,n=dw(wM,"onSelect"),0<n.length&&(t=new f2("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=jd)))}u2("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);u2("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);u2(sMe,2);for(HP="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Hb=0;Hb<HP.length;Hb++)s2.set(HP[Hb],0);var HP,Hb;ev("onMouseEnter",["mouseout","mouseover"]);ev("onMouseLeave",["mouseout","mouseover"]);ev("onPointerEnter",["pointerout","pointerover"]);ev("onPointerLeave",["pointerout","pointerover"]);Ff("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ff("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ff("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ff("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ff("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ff("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$$=new Set("cancel close invalid load scroll toggle".split(" ").concat(jy));function EV(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,rMe(n,t,void 0,e),e.currentTarget=null}function G$(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var h=n.length-1;0<=h;h--){var p=n[h],g=p.instance,w=p.currentTarget;if(p=p.listener,g!==a&&i.isPropagationStopped())break e;EV(i,p,w),a=g}else for(h=0;h<n.length;h++){if(p=n[h],g=p.instance,w=p.currentTarget,p=p.listener,g!==a&&i.isPropagationStopped())break e;EV(i,p,w),a=g}}}if(fw)throw e=yM,fw=!1,yM=null,e}function Qr(e,t){var r=X$(t),n=e+"__bubble";r.has(n)||(H$(t,e,2,!1),r.add(n))}var SV="_reactListening"+Math.random().toString(36).slice(2);function W$(e){e[SV]||(e[SV]=!0,l$.forEach(function(t){$$.has(t)||TV(t,!1,e,null),TV(t,!0,e,null)}))}function TV(e,t,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,a=r;if(e==="selectionchange"&&r.nodeType!==9&&(a=r.ownerDocument),n!==null&&!t&&$$.has(e)){if(e!=="scroll")return;i|=2,a=n}var h=X$(a),p=e+"__"+(t?"capture":"bubble");h.has(p)||(t&&(i|=4),H$(a,e,i,t),h.add(p))}function H$(e,t,r,n){var i=s2.get(t);switch(i===void 0?2:i){case 0:i=mMe;break;case 1:i=gMe;break;default:i=l2;}r=i.bind(null,t,r,e),i=void 0,!gM||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Z$(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var h=n.tag;if(h===3||h===4){var p=n.stateNode.containerInfo;if(p===i||p.nodeType===8&&p.parentNode===i)break;if(h===4)for(h=n.return;h!==null;){var g=h.tag;if((g===3||g===4)&&(g=h.stateNode.containerInfo,g===i||g.nodeType===8&&g.parentNode===i))return;h=h.return}for(;p!==null;){if(h=Mf(p),h===null)return;if(g=h.tag,g===5||g===6){n=a=h;continue e}p=p.parentNode}}n=n.return}JPe(function(){var w=a,E=r2(r),q=[];e:{var P=D$.get(e);if(P!==void 0){var k=f2,W=e;switch(e){case"keypress":if(rw(r)===0)break e;case"keydown":case"keyup":k=OMe;break;case"focusin":W="focus",k=GP;break;case"focusout":W="blur",k=GP;break;case"beforeblur":case"afterblur":k=GP;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=fV;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=xMe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=LMe;break;case P$:case M$:case O$:k=EMe;break;case R$:k=NMe;break;case"scroll":k=yMe;break;case"wheel":k=zMe;break;case"copy":case"cut":case"paste":k=TMe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=dV;}var Q=(t&4)!==0,$=!Q&&e==="scroll",V=Q?P!==null?P+"Capture":null:P;Q=[];for(var Z=w,te;Z!==null;){te=Z;var se=te.stateNode;if(te.tag===5&&se!==null&&(te=se,V!==null&&(se=n_(Z,V),se!=null&&Q.push(l_(Z,se,te)))),$)break;Z=Z.return}0<Q.length&&(P=new k(P,W,null,r,E),q.push({event:P,listeners:Q}))}}if(!(t&7)){e:{if(P=e==="mouseover"||e==="pointerover",k=e==="mouseout"||e==="pointerout",P&&!(t&16)&&(W=r.relatedTarget||r.fromElement)&&(Mf(W)||W[av]))break e;if((k||P)&&(P=E.window===E?E:(P=E.ownerDocument)?P.defaultView||P.parentWindow:window,k?(W=r.relatedTarget||r.toElement,k=w,W=W?Mf(W):null,W!==null&&($=jf(W),W!==$||W.tag!==5&&W.tag!==6)&&(W=null)):(k=null,W=w),k!==W)){if(Q=fV,se="onMouseLeave",V="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(Q=dV,se="onPointerLeave",V="onPointerEnter",Z="pointer"),$=k==null?P:Bd(k),te=W==null?P:Bd(W),P=new Q(se,Z+"leave",k,r,E),P.target=$,P.relatedTarget=te,se=null,Mf(E)===w&&(Q=new Q(V,Z+"enter",W,r,E),Q.target=te,Q.relatedTarget=$,se=Q),$=se,k&&W)t:{for(Q=k,V=W,Z=0,te=Q;te;te=Ld(te))Z++;for(te=0,se=V;se;se=Ld(se))te++;for(;0<Z-te;)Q=Ld(Q),Z--;for(;0<te-Z;)V=Ld(V),te--;for(;Z--;){if(Q===V||V!==null&&Q===V.alternate)break t;Q=Ld(Q),V=Ld(V)}Q=null}else Q=null;k!==null&&IV(q,P,k,Q,!1),W!==null&&$!==null&&IV(q,$,W,Q,!0)}}e:{if(P=w?Bd(w):window,k=P.nodeName&&P.nodeName.toLowerCase(),k==="select"||k==="input"&&P.type==="file")var Ie=WMe;else if(gV(P)){if(B$)Ie=XMe;else{Ie=ZMe;var qe=HMe}}else(k=P.nodeName)&&k.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(Ie=KMe);if(Ie&&(Ie=Ie(e,w))){j$(q,Ie,r,E);break e}qe&&qe(e,P,w),e==="focusout"&&(qe=P._wrapperState)&&qe.controlled&&P.type==="number"&&lM(P,"number",P.value)}switch(qe=w?Bd(w):window,e){case"focusin":(gV(qe)||qe.contentEditable==="true")&&(jd=qe,wM=w,Ky=null);break;case"focusout":Ky=wM=jd=null;break;case"mousedown":EM=!0;break;case"contextmenu":case"mouseup":case"dragend":EM=!1,wV(q,r,E);break;case"selectionchange":if(QMe)break;case"keydown":case"keyup":wV(q,r,E);}var Ae;if(d2)e:{switch(e){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e;}Ue=void 0}else zd?F$(e,r)&&(Ue="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Ue="onCompositionStart");Ue&&(N$&&r.locale!=="ko"&&(zd||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&zd&&(Ae=k$()):(jc=E,h2="value"in jc?jc.value:jc.textContent,zd=!0)),qe=dw(w,Ue),0<qe.length&&(Ue=new pV(Ue,e,null,r,E),q.push({event:Ue,listeners:qe}),Ae?Ue.data=Ae:(Ae=z$(r),Ae!==null&&(Ue.data=Ae)))),(Ae=BMe?UMe(e,r):VMe(e,r))&&(w=dw(w,"onBeforeInput"),0<w.length&&(E=new pV("onBeforeInput","beforeinput",null,r,E),q.push({event:E,listeners:w}),E.data=Ae))}G$(q,t)})}function l_(e,t,r){return{instance:e,listener:t,currentTarget:r}}function dw(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=n_(e,r),a!=null&&n.unshift(l_(e,a,i)),a=n_(e,t),a!=null&&n.push(l_(e,a,i))),e=e.return}return n}function Ld(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function IV(e,t,r,n,i){for(var a=t._reactName,h=[];r!==null&&r!==n;){var p=r,g=p.alternate,w=p.stateNode;if(g!==null&&g===n)break;p.tag===5&&w!==null&&(p=w,i?(g=n_(r,a),g!=null&&h.unshift(l_(r,g,p))):i||(g=n_(r,a),g!=null&&h.push(l_(r,g,p)))),r=r.return}h.length!==0&&e.push({event:t,listeners:h})}function vw(){}var ZP=null,KP=null;function K$(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus;}return!1}function SM(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var CV=typeof setTimeout=="function"?setTimeout:void 0,e2e=typeof clearTimeout=="function"?clearTimeout:void 0;function v2(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function Zd(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function AV(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var XP=0;function t2e(e){return{$$typeof:e2,toString:e,valueOf:e}}var zw=Math.random().toString(36).slice(2),Bc="__reactFiber$"+zw,mw="__reactProps$"+zw,av="__reactContainer$"+zw,qV="__reactEvents$"+zw;function Mf(e){var t=e[Bc];if(t)return t;for(var r=e.parentNode;r;){if(t=r[av]||r[Bc]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=AV(e);e!==null;){if(r=e[Bc])return r;e=AV(e)}return t}e=r,r=e.parentNode}return null}function m_(e){return e=e[Bc]||e[av],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Bd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(He(33))}function jw(e){return e[mw]||null}function X$(e){var t=e[qV];return t===void 0&&(t=e[qV]=new Set),t}var TM=[],Ud=-1;function rh(e){return{current:e}}function en(e){0>Ud||(e.current=TM[Ud],TM[Ud]=null,Ud--)}function Tn(e,t){Ud++,TM[Ud]=e.current,e.current=t}var Qc={},ia=rh(Qc),Za=rh(!1),Lf=Qc;function tv(e,t){var r=e.type.contextTypes;if(!r)return Qc;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ka(e){return e=e.childContextTypes,e!=null}function gw(){en(Za),en(ia)}function PV(e,t,r){if(ia.current!==Qc)throw Error(He(168));Tn(ia,t),Tn(Za,r)}function Y$(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(He(108,$d(t)||"Unknown",i));return ln({},r,n)}function nw(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qc,Lf=ia.current,Tn(ia,e),Tn(Za,Za.current),!0}function MV(e,t,r){var n=e.stateNode;if(!n)throw Error(He(169));r?(e=Y$(e,t,Lf),n.__reactInternalMemoizedMergedChildContext=e,en(Za),en(ia),Tn(ia,e)):en(Za),Tn(Za,r)}var m2=null,Df=null,r2e=di.unstable_runWithPriority,g2=di.unstable_scheduleCallback,IM=di.unstable_cancelCallback,n2e=di.unstable_shouldYield,OV=di.unstable_requestPaint,CM=di.unstable_now,i2e=di.unstable_getCurrentPriorityLevel,Bw=di.unstable_ImmediatePriority,J$=di.unstable_UserBlockingPriority,Q$=di.unstable_NormalPriority,e8=di.unstable_LowPriority,t8=di.unstable_IdlePriority,YP={},a2e=OV!==void 0?OV:function(){},hl=null,iw=null,JP=!1,RV=CM(),ra=1e4>RV?CM:function(){return CM()-RV};function rv(){switch(i2e()){case Bw:return 99;case J$:return 98;case Q$:return 97;case e8:return 96;case t8:return 95;default:throw Error(He(332));}}function r8(e){switch(e){case 99:return Bw;case 98:return J$;case 97:return Q$;case 96:return e8;case 95:return t8;default:throw Error(He(332));}}function kf(e,t){return e=r8(e),r2e(e,t)}function c_(e,t,r){return e=r8(e),g2(e,t,r)}function du(){if(iw!==null){var e=iw;iw=null,IM(e)}n8()}function n8(){if(!JP&&hl!==null){JP=!0;var e=0;try{var t=hl;kf(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),hl=null}catch(r){throw hl!==null&&(hl=hl.slice(e+1)),g2(Bw,du),r}finally{JP=!1}}}var o2e=zf.ReactCurrentBatchConfig;function Os(e,t){if(e&&e.defaultProps){t=ln({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var yw=rh(null),_w=null,Vd=null,xw=null;function y2(){xw=Vd=_w=null}function _2(e){var t=yw.current;en(yw),e.type._context._currentValue=t}function i8(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function Kd(e,t){_w=e,xw=Vd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Rs=!0),e.firstContext=null)}function Qo(e,t){if(xw!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(xw=e,t=1073741823),t={context:e,observedBits:t,next:null},Vd===null){if(_w===null)throw Error(He(308));Vd=t,_w.dependencies={lanes:0,firstContext:t,responders:null}}else Vd=Vd.next=t;return e._currentValue}var Fc=!1;function x2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function a8(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hc(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function DV(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var h={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=h:a=a.next=h,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function h_(e,t,r,n){var i=e.updateQueue;Fc=!1;var a=i.firstBaseUpdate,h=i.lastBaseUpdate,p=i.shared.pending;if(p!==null){i.shared.pending=null;var g=p,w=g.next;g.next=null,h===null?a=w:h.next=w,h=g;var E=e.alternate;if(E!==null){E=E.updateQueue;var q=E.lastBaseUpdate;q!==h&&(q===null?E.firstBaseUpdate=w:q.next=w,E.lastBaseUpdate=g)}}if(a!==null){q=i.baseState,h=0,E=w=g=null;do{p=a.lane;var P=a.eventTime;if((n&p)===p){E!==null&&(E=E.next={eventTime:P,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=e,W=a;switch(p=t,P=r,W.tag){case 1:if(k=W.payload,typeof k=="function"){q=k.call(P,q,p);break e}q=k;break e;case 3:k.flags=k.flags&-4097|64;case 0:if(k=W.payload,p=typeof k=="function"?k.call(P,q,p):k,p==null)break e;q=ln({},q,p);break e;case 2:Fc=!0;}}a.callback!==null&&(e.flags|=32,p=i.effects,p===null?i.effects=[a]:p.push(a))}else P={eventTime:P,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},E===null?(w=E=P,g=q):E=E.next=P,h|=p;if(a=a.next,a===null){if(p=i.shared.pending,p===null)break;a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);E===null&&(g=q),i.baseState=g,i.firstBaseUpdate=w,i.lastBaseUpdate=E,y_|=h,e.lanes=h,e.memoizedState=q}}function LV(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(He(191,i));i.call(n)}}}var o8=new Ow.Component().refs;function bw(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ln({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Uw={isMounted:function(e){return(e=e._reactInternals)?jf(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Po(),i=Zc(e),a=Wc(n,i);a.payload=t,r!=null&&(a.callback=r),Hc(e,a),Kc(e,i,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Po(),i=Zc(e),a=Wc(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),Hc(e,a),Kc(e,i,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Po(),n=Zc(e),i=Wc(r,n);i.tag=2,t!=null&&(i.callback=t),Hc(e,i),Kc(e,n,r)}};function kV(e,t,r,n,i,a,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,h):t.prototype&&t.prototype.isPureReactComponent?!u_(r,n)||!u_(i,a):!0}function s8(e,t,r){var n=!1,i=Qc,a=t.contextType;return typeof a=="object"&&a!==null?a=Qo(a):(i=Ka(t)?Lf:ia.current,n=t.contextTypes,a=(n=n!=null)?tv(e,i):Qc),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Uw,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function NV(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Uw.enqueueReplaceState(t,t.state,null)}function AM(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=o8,x2(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Qo(a):(a=Ka(t)?Lf:ia.current,i.context=tv(e,a)),h_(e,r,i,n),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(bw(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Uw.enqueueReplaceState(i,i.state,null),h_(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4)}var Zb=Array.isArray;function My(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(He(309));var n=r.stateNode}if(!n)throw Error(He(147,e));var i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var h=n.refs;h===o8&&(h=n.refs={}),a===null?delete h[i]:h[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(He(284));if(!r._owner)throw Error(He(290,e))}return e}function Kb(e,t){if(e.type!=="textarea")throw Error(He(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function u8(e){function t($,V){if(e){var Z=$.lastEffect;Z!==null?(Z.nextEffect=V,$.lastEffect=V):$.firstEffect=$.lastEffect=V,V.nextEffect=null,V.flags=8}}function r($,V){if(!e)return null;for(;V!==null;)t($,V),V=V.sibling;return null}function n($,V){for($=new Map;V!==null;)V.key!==null?$.set(V.key,V):$.set(V.index,V),V=V.sibling;return $}function i($,V){return $=th($,V),$.index=0,$.sibling=null,$}function a($,V,Z){return $.index=Z,e?(Z=$.alternate,Z!==null?(Z=Z.index,Z<V?($.flags=2,V):Z):($.flags=2,V)):V}function h($){return e&&$.alternate===null&&($.flags=2),$}function p($,V,Z,te){return V===null||V.tag!==6?(V=nM(Z,$.mode,te),V.return=$,V):(V=i(V,Z),V.return=$,V)}function g($,V,Z,te){return V!==null&&V.elementType===Z.type?(te=i(V,Z.props),te.ref=My($,V,Z),te.return=$,te):(te=uw(Z.type,Z.key,Z.props,null,$.mode,te),te.ref=My($,V,Z),te.return=$,te)}function w($,V,Z,te){return V===null||V.tag!==4||V.stateNode.containerInfo!==Z.containerInfo||V.stateNode.implementation!==Z.implementation?(V=iM(Z,$.mode,te),V.return=$,V):(V=i(V,Z.children||[]),V.return=$,V)}function E($,V,Z,te,se){return V===null||V.tag!==7?(V=Qd(Z,$.mode,te,se),V.return=$,V):(V=i(V,Z),V.return=$,V)}function q($,V,Z){if(typeof V=="string"||typeof V=="number")return V=nM(""+V,$.mode,Z),V.return=$,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Fy:return Z=uw(V.type,V.key,V.props,null,$.mode,Z),Z.ref=My($,null,V),Z.return=$,Z;case qf:return V=iM(V,$.mode,Z),V.return=$,V;}if(Zb(V)||Iy(V))return V=Qd(V,$.mode,Z,null),V.return=$,V;Kb($,V)}return null}function P($,V,Z,te){var se=V!==null?V.key:null;if(typeof Z=="string"||typeof Z=="number")return se!==null?null:p($,V,""+Z,te);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Fy:return Z.key===se?Z.type===zc?E($,V,Z.props.children,te,se):g($,V,Z,te):null;case qf:return Z.key===se?w($,V,Z,te):null;}if(Zb(Z)||Iy(Z))return se!==null?null:E($,V,Z,te,null);Kb($,Z)}return null}function k($,V,Z,te,se){if(typeof te=="string"||typeof te=="number")return $=$.get(Z)||null,p(V,$,""+te,se);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Fy:return $=$.get(te.key===null?Z:te.key)||null,te.type===zc?E(V,$,te.props.children,se,te.key):g(V,$,te,se);case qf:return $=$.get(te.key===null?Z:te.key)||null,w(V,$,te,se);}if(Zb(te)||Iy(te))return $=$.get(Z)||null,E(V,$,te,se,null);Kb(V,te)}return null}function W($,V,Z,te){for(var se=null,Ie=null,qe=V,Ae=V=0,Ue=null;qe!==null&&Ae<Z.length;Ae++){qe.index>Ae?(Ue=qe,qe=null):Ue=qe.sibling;var Le=P($,qe,Z[Ae],te);if(Le===null){qe===null&&(qe=Ue);break}e&&qe&&Le.alternate===null&&t($,qe),V=a(Le,V,Ae),Ie===null?se=Le:Ie.sibling=Le,Ie=Le,qe=Ue}if(Ae===Z.length)return r($,qe),se;if(qe===null){for(;Ae<Z.length;Ae++)qe=q($,Z[Ae],te),qe!==null&&(V=a(qe,V,Ae),Ie===null?se=qe:Ie.sibling=qe,Ie=qe);return se}for(qe=n($,qe);Ae<Z.length;Ae++)Ue=k(qe,$,Ae,Z[Ae],te),Ue!==null&&(e&&Ue.alternate!==null&&qe.delete(Ue.key===null?Ae:Ue.key),V=a(Ue,V,Ae),Ie===null?se=Ue:Ie.sibling=Ue,Ie=Ue);return e&&qe.forEach(function($t){return t($,$t)}),se}function Q($,V,Z,te){var se=Iy(Z);if(typeof se!="function")throw Error(He(150));if(Z=se.call(Z),Z==null)throw Error(He(151));for(var Ie=se=null,qe=V,Ae=V=0,Ue=null,Le=Z.next();qe!==null&&!Le.done;Ae++,Le=Z.next()){qe.index>Ae?(Ue=qe,qe=null):Ue=qe.sibling;var $t=P($,qe,Le.value,te);if($t===null){qe===null&&(qe=Ue);break}e&&qe&&$t.alternate===null&&t($,qe),V=a($t,V,Ae),Ie===null?se=$t:Ie.sibling=$t,Ie=$t,qe=Ue}if(Le.done)return r($,qe),se;if(qe===null){for(;!Le.done;Ae++,Le=Z.next())Le=q($,Le.value,te),Le!==null&&(V=a(Le,V,Ae),Ie===null?se=Le:Ie.sibling=Le,Ie=Le);return se}for(qe=n($,qe);!Le.done;Ae++,Le=Z.next())Le=k(qe,$,Ae,Le.value,te),Le!==null&&(e&&Le.alternate!==null&&qe.delete(Le.key===null?Ae:Le.key),V=a(Le,V,Ae),Ie===null?se=Le:Ie.sibling=Le,Ie=Le);return e&&qe.forEach(function(Rt){return t($,Rt)}),se}return function($,V,Z,te){var se=typeof Z=="object"&&Z!==null&&Z.type===zc&&Z.key===null;se&&(Z=Z.props.children);var Ie=typeof Z=="object"&&Z!==null;if(Ie)switch(Z.$$typeof){case Fy:e:{for(Ie=Z.key,se=V;se!==null;){if(se.key===Ie){switch(se.tag){case 7:if(Z.type===zc){r($,se.sibling),V=i(se,Z.props.children),V.return=$,$=V;break e}break;default:if(se.elementType===Z.type){r($,se.sibling),V=i(se,Z.props),V.ref=My($,se,Z),V.return=$,$=V;break e}}r($,se);break}else t($,se);se=se.sibling}Z.type===zc?(V=Qd(Z.props.children,$.mode,te,Z.key),V.return=$,$=V):(te=uw(Z.type,Z.key,Z.props,null,$.mode,te),te.ref=My($,V,Z),te.return=$,$=te)}return h($);case qf:e:{for(se=Z.key;V!==null;){if(V.key===se){if(V.tag===4&&V.stateNode.containerInfo===Z.containerInfo&&V.stateNode.implementation===Z.implementation){r($,V.sibling),V=i(V,Z.children||[]),V.return=$,$=V;break e}else{r($,V);break}}else t($,V);V=V.sibling}V=iM(Z,$.mode,te),V.return=$,$=V}return h($);}if(typeof Z=="string"||typeof Z=="number")return Z=""+Z,V!==null&&V.tag===6?(r($,V.sibling),V=i(V,Z),V.return=$,$=V):(r($,V),V=nM(Z,$.mode,te),V.return=$,$=V),h($);if(Zb(Z))return W($,V,Z,te);if(Iy(Z))return Q($,V,Z,te);if(Ie&&Kb($,Z),typeof Z=="undefined"&&!se)switch($.tag){case 1:case 22:case 0:case 11:case 15:throw Error(He(152,$d($.type)||"Component"));}return r($,V)}}var ww=u8(!0),l8=u8(!1),g_={},fu=rh(g_),f_=rh(g_),p_=rh(g_);function Of(e){if(e===g_)throw Error(He(174));return e}function qM(e,t){switch(Tn(p_,t),Tn(f_,e),Tn(fu,g_),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pM(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pM(t,e);}en(fu),Tn(fu,t)}function nv(){en(fu),en(f_),en(p_)}function FV(e){Of(p_.current);var t=Of(fu.current),r=pM(t,e.type);t!==r&&(Tn(f_,e),Tn(fu,r))}function b2(e){f_.current===e&&(en(fu),en(f_))}var Sn=rh(0);function Ew(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pl=null,Uc=null,pu=!1;function c8(e,t){var r=Yo(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function zV(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1;}}function PM(e){if(pu){var t=Uc;if(t){var r=t;if(!zV(e,t)){if(t=Zd(r.nextSibling),!t||!zV(e,t)){e.flags=e.flags&-1025|2,pu=!1,pl=e;return}c8(pl,r)}pl=e,Uc=Zd(t.firstChild)}else e.flags=e.flags&-1025|2,pu=!1,pl=e}}function jV(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pl=e}function Xb(e){if(e!==pl)return!1;if(!pu)return jV(e),pu=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!SM(t,e.memoizedProps))for(t=Uc;t;)c8(e,t),t=Zd(t.nextSibling);if(jV(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(He(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Uc=Zd(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Uc=null}}else Uc=pl?Zd(e.stateNode.nextSibling):null;return!0}function QP(){Uc=pl=null,pu=!1}var Xd=[];function w2(){for(var e=0;e<Xd.length;e++)Xd[e]._workInProgressVersionPrimary=null;Xd.length=0}var Xy=zf.ReactCurrentDispatcher,Jo=zf.ReactCurrentBatchConfig,d_=0,On=null,ta=null,qi=null,Sw=!1,Yy=!1;function Wa(){throw Error(He(321))}function E2(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Xo(e[r],t[r]))return!1;return!0}function S2(e,t,r,n,i,a){if(d_=a,On=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xy.current=e===null||e.memoizedState===null?u2e:l2e,e=r(n,i),Yy){a=0;do{if(Yy=!1,!(25>a))throw Error(He(301));a+=1,qi=ta=null,t.updateQueue=null,Xy.current=c2e,e=r(n,i)}while(Yy)}if(Xy.current=Aw,t=ta!==null&&ta.next!==null,d_=0,qi=ta=On=null,Sw=!1,t)throw Error(He(300));return e}function Rf(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qi===null?On.memoizedState=qi=e:qi=qi.next=e,qi}function Bf(){if(ta===null){var e=On.alternate;e=e!==null?e.memoizedState:null}else e=ta.next;var t=qi===null?On.memoizedState:qi.next;if(t!==null)qi=t,ta=e;else{if(e===null)throw Error(He(310));ta=e,e={memoizedState:ta.memoizedState,baseState:ta.baseState,baseQueue:ta.baseQueue,queue:ta.queue,next:null},qi===null?On.memoizedState=qi=e:qi=qi.next=e}return qi}function cu(e,t){return typeof t=="function"?t(e):t}function Oy(e){var t=Bf(),r=t.queue;if(r===null)throw Error(He(311));r.lastRenderedReducer=e;var n=ta,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var h=i.next;i.next=a.next,a.next=h}n.baseQueue=i=a,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var p=h=a=null,g=i;do{var w=g.lane;if((d_&w)===w)p!==null&&(p=p.next={lane:0,action:g.action,eagerReducer:g.eagerReducer,eagerState:g.eagerState,next:null}),n=g.eagerReducer===e?g.eagerState:e(n,g.action);else{var E={lane:w,action:g.action,eagerReducer:g.eagerReducer,eagerState:g.eagerState,next:null};p===null?(h=p=E,a=n):p=p.next=E,On.lanes|=w,y_|=w}g=g.next}while(g!==null&&g!==i);p===null?a=n:p.next=h,Xo(n,t.memoizedState)||(Rs=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=p,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function Ry(e){var t=Bf(),r=t.queue;if(r===null)throw Error(He(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var h=i=i.next;do a=e(a,h.action),h=h.next;while(h!==i);Xo(a,t.memoizedState)||(Rs=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function BV(e,t,r){var n=t._getVersion;n=n(t._source);var i=t._workInProgressVersionPrimary;if(i!==null?e=i===n:(e=e.mutableReadLanes,(e=(d_&e)===e)&&(t._workInProgressVersionPrimary=n,Xd.push(t))),e)return r(t._source);throw Xd.push(t),Error(He(350))}function h8(e,t,r,n){var i=Ia;if(i===null)throw Error(He(349));var a=t._getVersion,h=a(t._source),p=Xy.current,g=p.useState(function(){return BV(i,t,r)}),w=g[1],E=g[0];g=qi;var q=e.memoizedState,P=q.refs,k=P.getSnapshot,W=q.source;q=q.subscribe;var Q=On;return e.memoizedState={refs:P,source:t,subscribe:n},p.useEffect(function(){P.getSnapshot=r,P.setSnapshot=w;var $=a(t._source);if(!Xo(h,$)){$=r(t._source),Xo(E,$)||(w($),$=Zc(Q),i.mutableReadLanes|=$&i.pendingLanes),$=i.mutableReadLanes,i.entangledLanes|=$;for(var V=i.entanglements,Z=$;0<Z;){var te=31-Jc(Z),se=1<<te;V[te]|=$,Z&=~se}}},[r,t,n]),p.useEffect(function(){return n(t._source,function(){var $=P.getSnapshot,V=P.setSnapshot;try{V($(t._source));var Z=Zc(Q);i.mutableReadLanes|=Z&i.pendingLanes}catch(te){V(function(){throw te})}})},[t,n]),Xo(k,r)&&Xo(W,t)&&Xo(q,n)||(e={pending:null,dispatch:null,lastRenderedReducer:cu,lastRenderedState:E},e.dispatch=w=C2.bind(null,On,e),g.queue=e,g.baseQueue=null,E=BV(i,t,r),g.memoizedState=g.baseState=E),E}function f8(e,t,r){var n=Bf();return h8(n,e,t,r)}function Dy(e){var t=Rf();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:cu,lastRenderedState:e},e=e.dispatch=C2.bind(null,On,e),[t.memoizedState,e]}function Tw(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=On.updateQueue,t===null?(t={lastEffect:null},On.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function UV(e){var t=Rf();return e={current:e},t.memoizedState=e}function Iw(){return Bf().memoizedState}function MM(e,t,r,n){var i=Rf();On.flags|=e,i.memoizedState=Tw(1|t,r,void 0,n===void 0?null:n)}function T2(e,t,r,n){var i=Bf();n=n===void 0?null:n;var a=void 0;if(ta!==null){var h=ta.memoizedState;if(a=h.destroy,n!==null&&E2(n,h.deps)){Tw(t,r,a,n);return}}On.flags|=e,i.memoizedState=Tw(1|t,r,a,n)}function VV(e,t){return MM(516,4,e,t)}function Cw(e,t){return T2(516,4,e,t)}function p8(e,t){return T2(4,2,e,t)}function d8(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function v8(e,t,r){return r=r!=null?r.concat([e]):null,T2(4,2,d8.bind(null,t,e),r)}function I2(){}function m8(e,t){var r=Bf();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&E2(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function g8(e,t){var r=Bf();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&E2(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function s2e(e,t){var r=rv();kf(98>r?98:r,function(){e(!0)}),kf(97<r?97:r,function(){var n=Jo.transition;Jo.transition=1;try{e(!1),t()}finally{Jo.transition=n}})}function C2(e,t,r){var n=Po(),i=Zc(e),a={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},h=t.pending;if(h===null?a.next=a:(a.next=h.next,h.next=a),t.pending=a,h=e.alternate,e===On||h!==null&&h===On)Yy=Sw=!0;else{if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var p=t.lastRenderedState,g=h(p,r);if(a.eagerReducer=h,a.eagerState=g,Xo(g,p))return}catch(w){}finally{}Kc(e,i,n)}}var Aw={readContext:Qo,useCallback:Wa,useContext:Wa,useEffect:Wa,useImperativeHandle:Wa,useLayoutEffect:Wa,useMemo:Wa,useReducer:Wa,useRef:Wa,useState:Wa,useDebugValue:Wa,useDeferredValue:Wa,useTransition:Wa,useMutableSource:Wa,useOpaqueIdentifier:Wa,unstable_isNewReconciler:!1},u2e={readContext:Qo,useCallback:function(e,t){return Rf().memoizedState=[e,t===void 0?null:t],e},useContext:Qo,useEffect:VV,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,MM(4,2,d8.bind(null,t,e),r)},useLayoutEffect:function(e,t){return MM(4,2,e,t)},useMemo:function(e,t){var r=Rf();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Rf();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=C2.bind(null,On,e),[n.memoizedState,e]},useRef:UV,useState:Dy,useDebugValue:I2,useDeferredValue:function(e){var t=Dy(e),r=t[0],n=t[1];return VV(function(){var i=Jo.transition;Jo.transition=1;try{n(e)}finally{Jo.transition=i}},[e]),r},useTransition:function(){var e=Dy(!1),t=e[0];return e=s2e.bind(null,e[1]),UV(e),[e,t]},useMutableSource:function(e,t,r){var n=Rf();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},h8(n,e,t,r)},useOpaqueIdentifier:function(){if(pu){var e=!1,t=t2e(function(){throw e||(e=!0,r("r:"+(XP++).toString(36))),Error(He(355))}),r=Dy(t)[1];return!(On.mode&2)&&(On.flags|=516,Tw(5,function(){r("r:"+(XP++).toString(36))},void 0,null)),t}return t="r:"+(XP++).toString(36),Dy(t),t},unstable_isNewReconciler:!1},l2e={readContext:Qo,useCallback:m8,useContext:Qo,useEffect:Cw,useImperativeHandle:v8,useLayoutEffect:p8,useMemo:g8,useReducer:Oy,useRef:Iw,useState:function(){return Oy(cu)},useDebugValue:I2,useDeferredValue:function(e){var t=Oy(cu),r=t[0],n=t[1];return Cw(function(){var i=Jo.transition;Jo.transition=1;try{n(e)}finally{Jo.transition=i}},[e]),r},useTransition:function(){var e=Oy(cu)[0];return[Iw().current,e]},useMutableSource:f8,useOpaqueIdentifier:function(){return Oy(cu)[0]},unstable_isNewReconciler:!1},c2e={readContext:Qo,useCallback:m8,useContext:Qo,useEffect:Cw,useImperativeHandle:v8,useLayoutEffect:p8,useMemo:g8,useReducer:Ry,useRef:Iw,useState:function(){return Ry(cu)},useDebugValue:I2,useDeferredValue:function(e){var t=Ry(cu),r=t[0],n=t[1];return Cw(function(){var i=Jo.transition;Jo.transition=1;try{n(e)}finally{Jo.transition=i}},[e]),r},useTransition:function(){var e=Ry(cu)[0];return[Iw().current,e]},useMutableSource:f8,useOpaqueIdentifier:function(){return Ry(cu)[0]},unstable_isNewReconciler:!1},h2e=zf.ReactCurrentOwner,Rs=!1;function Ha(e,t,r,n){t.child=e===null?l8(t,null,r,n):ww(t,e.child,r,n)}function $V(e,t,r,n,i){r=r.render;var a=t.ref;return Kd(t,i),n=S2(e,t,r,n,a,i),e!==null&&!Rs?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,dl(e,t,i)):(t.flags|=1,Ha(e,t,n,i),t.child)}function GV(e,t,r,n,i,a){if(e===null){var h=r.type;return typeof h=="function"&&!R2(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=h,y8(e,t,h,n,i,a)):(e=uw(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}return h=e.child,!(i&a)&&(i=h.memoizedProps,r=r.compare,r=r!==null?r:u_,r(i,n)&&e.ref===t.ref)?dl(e,t,a):(t.flags|=1,e=th(h,n),e.ref=t.ref,e.return=t,t.child=e)}function y8(e,t,r,n,i,a){if(e!==null&&u_(e.memoizedProps,n)&&e.ref===t.ref)if(Rs=!1,(a&i)!==0)e.flags&16384&&(Rs=!0);else return t.lanes=e.lanes,dl(e,t,a);return OM(e,t,r,n,a)}function eM(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding"){if(!(t.mode&4))t.memoizedState={baseLanes:0},Jb(t,r);else if(r&1073741824)t.memoizedState={baseLanes:0},Jb(t,a!==null?a.baseLanes:r);else return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Jb(t,e),null;}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Jb(t,n);return Ha(e,t,i,r),t.child}function _8(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function OM(e,t,r,n,i){var a=Ka(r)?Lf:ia.current;return a=tv(t,a),Kd(t,i),r=S2(e,t,r,n,a,i),e!==null&&!Rs?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,dl(e,t,i)):(t.flags|=1,Ha(e,t,r,i),t.child)}function WV(e,t,r,n,i){if(Ka(r)){var a=!0;nw(t)}else a=!1;if(Kd(t,i),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),s8(t,r,n),AM(t,r,n,i),n=!0;else if(e===null){var h=t.stateNode,p=t.memoizedProps;h.props=p;var g=h.context,w=r.contextType;typeof w=="object"&&w!==null?w=Qo(w):(w=Ka(r)?Lf:ia.current,w=tv(t,w));var E=r.getDerivedStateFromProps,q=typeof E=="function"||typeof h.getSnapshotBeforeUpdate=="function";q||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(p!==n||g!==w)&&NV(t,h,n,w),Fc=!1;var P=t.memoizedState;h.state=P,h_(t,n,h,i),g=t.memoizedState,p!==n||P!==g||Za.current||Fc?(typeof E=="function"&&(bw(t,r,E,n),g=t.memoizedState),(p=Fc||kV(t,r,p,n,P,g,w))?(q||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4)):(typeof h.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=g),h.props=n,h.state=g,h.context=w,n=p):(typeof h.componentDidMount=="function"&&(t.flags|=4),n=!1)}else{h=t.stateNode,a8(e,t),p=t.memoizedProps,w=t.type===t.elementType?p:Os(t.type,p),h.props=w,q=t.pendingProps,P=h.context,g=r.contextType,typeof g=="object"&&g!==null?g=Qo(g):(g=Ka(r)?Lf:ia.current,g=tv(t,g));var k=r.getDerivedStateFromProps;(E=typeof k=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(p!==q||P!==g)&&NV(t,h,n,g),Fc=!1,P=t.memoizedState,h.state=P,h_(t,n,h,i);var W=t.memoizedState;p!==q||P!==W||Za.current||Fc?(typeof k=="function"&&(bw(t,r,k,n),W=t.memoizedState),(w=Fc||kV(t,r,w,n,P,W,g))?(E||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(n,W,g),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(n,W,g)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof h.componentDidUpdate!="function"||p===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&P===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=W),h.props=n,h.state=W,h.context=g,n=w):(typeof h.componentDidUpdate!="function"||p===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&P===e.memoizedState||(t.flags|=256),n=!1)}return RM(e,t,r,n,a,i)}function RM(e,t,r,n,i,a){_8(e,t);var h=(t.flags&64)!==0;if(!n&&!h)return i&&MV(t,r,!1),dl(e,t,a);n=t.stateNode,h2e.current=t;var p=h&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&h?(t.child=ww(t,e.child,null,a),t.child=ww(t,null,p,a)):Ha(e,t,p,a),t.memoizedState=n.state,i&&MV(t,r,!0),t.child}function HV(e){var t=e.stateNode;t.pendingContext?PV(e,t.pendingContext,t.pendingContext!==t.context):t.context&&PV(e,t.context,!1),qM(e,t.containerInfo)}var Yb={dehydrated:null,retryLane:0};function ZV(e,t,r){var n=t.pendingProps,i=Sn.current,a=!1,h;return(h=(t.flags&64)!==0)||(h=e!==null&&e.memoizedState===null?!1:(i&2)!==0),h?(a=!0,t.flags&=-65):e!==null&&e.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),Tn(Sn,i&1),e===null?(n.fallback!==void 0&&PM(t),e=n.children,i=n.fallback,a?(e=KV(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Yb,e):typeof n.unstable_expectedLoadTime=="number"?(e=KV(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Yb,t.lanes=33554432,e):(r=D2({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?a?(n=YV(e,t,n.children,n.fallback,r),a=t.child,i=e.child.memoizedState,a.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},a.childLanes=e.childLanes&~r,t.memoizedState=Yb,n):(r=XV(e,t,n.children,r),t.memoizedState=null,r):a?(n=YV(e,t,n.children,n.fallback,r),a=t.child,i=e.child.memoizedState,a.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},a.childLanes=e.childLanes&~r,t.memoizedState=Yb,n):(r=XV(e,t,n.children,r),t.memoizedState=null,r)}function KV(e,t,r,n){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},!(i&2)&&a!==null?(a.childLanes=0,a.pendingProps=t):a=D2(t,i,0,null),r=Qd(r,i,n,null),a.return=e,r.return=e,a.sibling=r,e.child=a,r}function XV(e,t,r,n){var i=e.child;return e=i.sibling,r=th(i,{mode:"visible",children:r}),!(t.mode&2)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function YV(e,t,r,n,i){var a=t.mode,h=e.child;e=h.sibling;var p={mode:"hidden",children:r};return!(a&2)&&t.child!==h?(r=t.child,r.childLanes=0,r.pendingProps=p,h=r.lastEffect,h!==null?(t.firstEffect=r.firstEffect,t.lastEffect=h,h.nextEffect=null):t.firstEffect=t.lastEffect=null):r=th(h,p),e!==null?n=th(e,n):(n=Qd(n,a,i,null),n.flags|=2),n.return=t,r.return=t,r.sibling=n,t.child=r,n}function JV(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),i8(e.return,t)}function tM(e,t,r,n,i,a){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:a}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=n,h.tail=r,h.tailMode=i,h.lastEffect=a)}function QV(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(Ha(e,t,n.children,r),n=Sn.current,n&2)n=n&1|2,t.flags|=64;else{if(e!==null&&e.flags&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&JV(e,r);else if(e.tag===19)JV(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Tn(Sn,n),!(t.mode&2))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Ew(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),tM(t,!1,i,r,a,t.lastEffect);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ew(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}tM(t,!0,r,null,a,t.lastEffect);break;case"together":tM(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null;}return t.child}function dl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),y_|=t.lanes,r&t.childLanes){if(e!==null&&t.child!==e.child)throw Error(He(153));if(t.child!==null){for(e=t.child,r=th(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=th(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var x8,DM,b8,w8;x8=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};DM=function(){};b8=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Of(fu.current);var a=null;switch(r){case"input":i=sM(e,i),n=sM(e,n),a=[];break;case"option":i=cM(e,i),n=cM(e,n),a=[];break;case"select":i=ln({},i,{value:void 0}),n=ln({},n,{value:void 0}),a=[];break;case"textarea":i=hM(e,i),n=hM(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=vw);}dM(r,n);var h;r=null;for(w in i)if(!n.hasOwnProperty(w)&&i.hasOwnProperty(w)&&i[w]!=null)if(w==="style"){var p=i[w];for(h in p)p.hasOwnProperty(h)&&(r||(r={}),r[h]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(t_.hasOwnProperty(w)?a||(a=[]):(a=a||[]).push(w,null));for(w in n){var g=n[w];if(p=i!=null?i[w]:void 0,n.hasOwnProperty(w)&&g!==p&&(g!=null||p!=null))if(w==="style"){if(p){for(h in p)!p.hasOwnProperty(h)||g&&g.hasOwnProperty(h)||(r||(r={}),r[h]="");for(h in g)g.hasOwnProperty(h)&&p[h]!==g[h]&&(r||(r={}),r[h]=g[h])}else r||(a||(a=[]),a.push(w,r)),r=g;}else w==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,p=p?p.__html:void 0,g!=null&&p!==g&&(a=a||[]).push(w,g)):w==="children"?typeof g!="string"&&typeof g!="number"||(a=a||[]).push(w,""+g):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(t_.hasOwnProperty(w)?(g!=null&&w==="onScroll"&&Qr("scroll",e),a||p===g||(a=[])):typeof g=="object"&&g!==null&&g.$$typeof===e2?g.toString():(a=a||[]).push(w,g))}r&&(a=a||[]).push("style",r);var w=a;(t.updateQueue=w)&&(t.flags|=4)}};w8=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ly(e,t){if(!pu)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null;}}function f2e(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ka(t.type)&&gw(),null;case 3:return nv(),en(Za),en(ia),w2(),n=t.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Xb(t)?t.flags|=4:n.hydrate||(t.flags|=256)),DM(t),null;case 5:b2(t);var i=Of(p_.current);if(r=t.type,e!==null&&t.stateNode!=null)b8(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(t.stateNode===null)throw Error(He(166));return null}if(e=Of(fu.current),Xb(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Bc]=t,n[mw]=a,r){case"dialog":Qr("cancel",n),Qr("close",n);break;case"iframe":case"object":case"embed":Qr("load",n);break;case"video":case"audio":for(e=0;e<jy.length;e++)Qr(jy[e],n);break;case"source":Qr("error",n);break;case"img":case"image":case"link":Qr("error",n),Qr("load",n);break;case"details":Qr("toggle",n);break;case"input":tV(n,a),Qr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Qr("invalid",n);break;case"textarea":nV(n,a),Qr("invalid",n);}dM(r,a),e=null;for(var h in a)a.hasOwnProperty(h)&&(i=a[h],h==="children"?typeof i=="string"?n.textContent!==i&&(e=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(e=["children",""+i]):t_.hasOwnProperty(h)&&i!=null&&h==="onScroll"&&Qr("scroll",n));switch(r){case"input":Bb(n),rV(n,a,!0);break;case"textarea":Bb(n),iV(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=vw);}n=e,t.updateQueue=n,n!==null&&(t.flags|=4)}else{switch(h=i.nodeType===9?i:i.ownerDocument,e===fM.html&&(e=v$(r)),e===fM.html?r==="script"?(e=h.createElement("div"),e.innerHTML="<script></script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=h.createElement(r,{is:n.is}):(e=h.createElement(r),r==="select"&&(h=e,n.multiple?h.multiple=!0:n.size&&(h.size=n.size))):e=h.createElementNS(e,r),e[Bc]=t,e[mw]=n,x8(e,t,!1,!1),t.stateNode=e,h=vM(r,n),r){case"dialog":Qr("cancel",e),Qr("close",e),i=n;break;case"iframe":case"object":case"embed":Qr("load",e),i=n;break;case"video":case"audio":for(i=0;i<jy.length;i++)Qr(jy[i],e);i=n;break;case"source":Qr("error",e),i=n;break;case"img":case"image":case"link":Qr("error",e),Qr("load",e),i=n;break;case"details":Qr("toggle",e),i=n;break;case"input":tV(e,n),i=sM(e,n),Qr("invalid",e);break;case"option":i=cM(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=ln({},n,{value:void 0}),Qr("invalid",e);break;case"textarea":nV(e,n),i=hM(e,n),Qr("invalid",e);break;default:i=n;}dM(r,i);var p=i;for(a in p)if(p.hasOwnProperty(a)){var g=p[a];a==="style"?y$(e,g):a==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&m$(e,g)):a==="children"?typeof g=="string"?(r!=="textarea"||g!=="")&&r_(e,g):typeof g=="number"&&r_(e,""+g):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(t_.hasOwnProperty(a)?g!=null&&a==="onScroll"&&Qr("scroll",e):g!=null&&ZM(e,a,g,h))}switch(r){case"input":Bb(e),rV(e,n,!1);break;case"textarea":Bb(e),iV(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Yc(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Gd(e,!!n.multiple,a,!1):n.defaultValue!=null&&Gd(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=vw);}K$(r,n)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)w8(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(He(166));r=Of(p_.current),Of(fu.current),Xb(t)?(n=t.stateNode,r=t.memoizedProps,n[Bc]=t,n.nodeValue!==r&&(t.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Bc]=t,t.stateNode=n)}return null;case 13:return en(Sn),n=t.memoizedState,t.flags&64?(t.lanes=r,t):(n=n!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&Xb(t):r=e.memoizedState!==null,n&&!r&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||Sn.current&1?Pi===0&&(Pi=3):((Pi===0||Pi===3)&&(Pi=4),Ia===null||!(y_&134217727)&&!(sv&134217727)||Yd(Ia,na))),(n||r)&&(t.flags|=4),null);case 4:return nv(),DM(t),e===null&&W$(t.stateNode.containerInfo),null;case 10:return _2(t),null;case 17:return Ka(t.type)&&gw(),null;case 19:if(en(Sn),n=t.memoizedState,n===null)return null;if(a=(t.flags&64)!==0,h=n.rendering,h===null){if(a)Ly(n,!1);else{if(Pi!==0||e!==null&&e.flags&64)for(e=t.child;e!==null;){if(h=Ew(e),h!==null){for(t.flags|=64,Ly(n,!1),a=h.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,h=a.alternate,h===null?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,e=h.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Tn(Sn,Sn.current&1|2),t.child}e=e.sibling}n.tail!==null&&ra()>jM&&(t.flags|=64,a=!0,Ly(n,!1),t.lanes=33554432)}}else{if(!a)if(e=Ew(h),e!==null){if(t.flags|=64,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ly(n,!0),n.tail===null&&n.tailMode==="hidden"&&!h.alternate&&!pu)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*ra()-n.renderingStartTime>jM&&r!==1073741824&&(t.flags|=64,a=!0,Ly(n,!1),t.lanes=33554432);n.isBackwards?(h.sibling=t.child,t.child=h):(r=n.last,r!==null?r.sibling=h:t.child=h,n.last=h)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=ra(),r.sibling=null,t=Sn.current,Tn(Sn,a?t&1|2:t&1),r):null;case 23:case 24:return O2(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null;}throw Error(He(156,t.tag))}function p2e(e){switch(e.tag){case 1:Ka(e.type)&&gw();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(nv(),en(Za),en(ia),w2(),t=e.flags,t&64)throw Error(He(285));return e.flags=t&-4097|64,e;case 5:return b2(e),null;case 13:return en(Sn),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return en(Sn),null;case 4:return nv(),null;case 10:return _2(e),null;case 23:case 24:return O2(),null;default:return null;}}function A2(e,t){try{var r="",n=t;do r+=HPe(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i}}function LM(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var d2e=typeof WeakMap=="function"?WeakMap:Map;function E8(e,t,r){r=Wc(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Pw||(Pw=!0,BM=n),LM(e,t)},r}function S8(e,t,r){r=Wc(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return LM(e,t),n(i)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(hu===null?hu=new Set([this]):hu.add(this),LM(e,t));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),r}var v2e=typeof WeakSet=="function"?WeakSet:Set;function e$(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Xc(e,r)}else t.current=null}function m2e(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:Os(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&v2(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return;}throw Error(He(163))}function g2e(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var i=e;n=i.next,i=i.tag,i&4&&i&1&&(R8(r,e),T2e(r,e)),e=n}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:Os(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&LV(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode;}LV(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&K$(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&A$(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return;}throw Error(He(163))}function t$(e,t){for(var r=e;;){if(r.tag===5){var n=r.stateNode;if(t)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=g$("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function r$(e,t){if(Df&&typeof Df.onCommitFiberUnmount=="function")try{Df.onCommitFiberUnmount(m2,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var n=r,i=n.destroy;if(n=n.tag,i!==void 0)if(n&4)R8(t,r);else{n=t;try{i()}catch(a){Xc(n,a)}}r=r.next}while(r!==e)}break;case 1:if(e$(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Xc(t,a)}break;case 5:e$(t);break;case 4:T8(e,t);}}function n$(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function i$(e){return e.tag===5||e.tag===3||e.tag===4}function a$(e){e:{for(var t=e.return;t!==null;){if(i$(t))break e;t=t.return}throw Error(He(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(He(161));}r.flags&16&&(r_(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||i$(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?kM(e,r,t):NM(e,r,t)}function kM(e,t,r){var n=e.tag,i=n===5||n===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=vw));else if(n!==4&&(e=e.child,e!==null))for(kM(e,t,r),e=e.sibling;e!==null;)kM(e,t,r),e=e.sibling}function NM(e,t,r){var n=e.tag,i=n===5||n===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(NM(e,t,r),e=e.sibling;e!==null;)NM(e,t,r),e=e.sibling}function T8(e,t){for(var r=t,n=!1,i,a;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(He(160));switch(i=n.stateNode,n.tag){case 5:a=!1;break e;case 3:i=i.containerInfo,a=!0;break e;case 4:i=i.containerInfo,a=!0;break e;}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var h=e,p=r,g=p;;)if(r$(h,g),g.child!==null&&g.tag!==4)g.child.return=g,g=g.child;else{if(g===p)break e;for(;g.sibling===null;){if(g.return===null||g.return===p)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}a?(h=i,p=r.stateNode,h.nodeType===8?h.parentNode.removeChild(p):h.removeChild(p)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,a=!0,r.child.return=r,r=r.child;continue}}else if(r$(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function rM(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(e=n.destroy,n.destroy=void 0,e!==void 0&&e()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){n=t.memoizedProps;var i=e!==null?e.memoizedProps:n;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,a!==null){for(r[mw]=n,e==="input"&&n.type==="radio"&&n.name!=null&&p$(r,n),vM(e,i),t=vM(e,n),i=0;i<a.length;i+=2){var h=a[i],p=a[i+1];h==="style"?y$(r,p):h==="dangerouslySetInnerHTML"?m$(r,p):h==="children"?r_(r,p):ZM(r,h,p,t)}switch(e){case"input":uM(r,n);break;case"textarea":d$(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,a=n.value,a!=null?Gd(r,!!n.multiple,a,!1):e!==!!n.multiple&&(n.defaultValue!=null?Gd(r,!!n.multiple,n.defaultValue,!0):Gd(r,!!n.multiple,n.multiple?[]:"",!1));}}}return;case 6:if(t.stateNode===null)throw Error(He(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,A$(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(M2=ra(),t$(t.child,!0)),o$(t);return;case 19:o$(t);return;case 17:return;case 23:case 24:t$(t,t.memoizedState!==null);return;}throw Error(He(163))}function o$(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new v2e),t.forEach(function(n){var i=A2e.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function y2e(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var _2e=Math.ceil,qw=zf.ReactCurrentDispatcher,q2=zf.ReactCurrentOwner,Mt=0,Ia=null,Yn=null,na=0,Nf=0,FM=rh(0),Pi=0,Vw=null,ov=0,y_=0,sv=0,P2=0,zM=null,M2=0,jM=1/0;function uv(){jM=ra()+500}var ct=null,Pw=!1,BM=null,hu=null,eh=!1,Jy=null,By=90,UM=[],VM=[],vl=null,Qy=0,$M=null,aw=-1,fl=0,ow=0,e_=null,sw=!1;function Po(){return Mt&48?ra():aw!==-1?aw:aw=ra()}function Zc(e){if(e=e.mode,!(e&2))return 1;if(!(e&4))return rv()===99?1:2;if(fl===0&&(fl=ov),o2e.transition!==0){ow!==0&&(ow=zM!==null?zM.pendingLanes:0),e=fl;var t=4186112&~ow;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=rv(),Mt&4&&e===98?e=pw(12,fl):(e=lMe(e),e=pw(e,fl)),e}function Kc(e,t,r){if(50<Qy)throw Qy=0,$M=null,Error(He(185));if(e=$w(e,t),e===null)return null;kw(e,t,r),e===Ia&&(sv|=t,Pi===4&&Yd(e,na));var n=rv();t===1?Mt&8&&!(Mt&48)?GM(e):(es(e,r),Mt===0&&(uv(),du())):(!(Mt&4)||n!==98&&n!==99||(vl===null?vl=new Set([e]):vl.add(e)),es(e,r)),zM=e}function $w(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function es(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,h=e.pendingLanes;0<h;){var p=31-Jc(h),g=1<<p,w=a[p];if(w===-1){if(!(g&n)||g&i){w=t,kd(g);var E=$r;a[p]=10<=E?w+250:6<=E?w+5e3:-1}}else w<=t&&(e.expiredLanes|=g);h&=~g}if(n=o_(e,e===Ia?na:0),t=$r,n===0)r!==null&&(r!==YP&&IM(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==YP&&IM(r)}t===15?(r=GM.bind(null,e),hl===null?(hl=[r],iw=g2(Bw,n8)):hl.push(r),r=YP):t===14?r=c_(99,GM.bind(null,e)):(r=cMe(t),r=c_(r,I8.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function I8(e){if(aw=-1,ow=fl=0,Mt&48)throw Error(He(327));var t=e.callbackNode;if(nh()&&e.callbackNode!==t)return null;var r=o_(e,e===Ia?na:0);if(r===0)return null;var n=r,i=Mt;Mt|=16;var a=P8();(Ia!==e||na!==n)&&(uv(),Jd(e,n));do try{w2e();break}catch(p){q8(e,p)}while(!0);if(y2(),qw.current=a,Mt=i,Yn!==null?n=0:(Ia=null,na=0,n=Pi),ov&sv)Jd(e,0);else if(n!==0){if(n===2&&(Mt|=64,e.hydrate&&(e.hydrate=!1,v2(e.containerInfo)),r=L$(e),r!==0&&(n=Uy(e,r))),n===1)throw t=Vw,Jd(e,0),Yd(e,r),es(e,ra()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(He(345));case 2:Af(e);break;case 3:if(Yd(e,r),(r&62914560)===r&&(n=M2+500-ra(),10<n)){if(o_(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Po(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=CV(Af.bind(null,e),n);break}Af(e);break;case 4:if(Yd(e,r),(r&4186112)===r)break;for(n=e.eventTimes,i=-1;0<r;){var h=31-Jc(r);a=1<<h,h=n[h],h>i&&(i=h),r&=~a}if(r=i,r=ra()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_2e(r/1960))-r,10<r){e.timeoutHandle=CV(Af.bind(null,e),r);break}Af(e);break;case 5:Af(e);break;default:throw Error(He(329));}}return es(e,ra()),e.callbackNode===t?I8.bind(null,e):null}function Yd(e,t){for(t&=~P2,t&=~sv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Jc(t),n=1<<r;e[r]=-1,t&=~n}}function GM(e){if(Mt&48)throw Error(He(327));if(nh(),e===Ia&&e.expiredLanes&na){var t=na,r=Uy(e,t);ov&sv&&(t=o_(e,t),r=Uy(e,t))}else t=o_(e,0),r=Uy(e,t);if(e.tag!==0&&r===2&&(Mt|=64,e.hydrate&&(e.hydrate=!1,v2(e.containerInfo)),t=L$(e),t!==0&&(r=Uy(e,t))),r===1)throw r=Vw,Jd(e,0),Yd(e,t),es(e,ra()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Af(e),es(e,ra()),null}function x2e(){if(vl!==null){var e=vl;vl=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,es(t,ra())})}du()}function C8(e,t){var r=Mt;Mt|=1;try{return e(t)}finally{Mt=r,Mt===0&&(uv(),du())}}function A8(e,t){var r=Mt;Mt&=-2,Mt|=8;try{return e(t)}finally{Mt=r,Mt===0&&(uv(),du())}}function Jb(e,t){Tn(FM,Nf),Nf|=t,ov|=t}function O2(){Nf=FM.current,en(FM)}function Jd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,e2e(r)),Yn!==null)for(r=Yn.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&gw();break;case 3:nv(),en(Za),en(ia),w2();break;case 5:b2(n);break;case 4:nv();break;case 13:en(Sn);break;case 19:en(Sn);break;case 10:_2(n);break;case 23:case 24:O2();}r=r.return}Ia=e,Yn=th(e.current,null),na=Nf=ov=t,Pi=0,Vw=null,P2=sv=y_=0}function q8(e,t){do{var r=Yn;try{if(y2(),Xy.current=Aw,Sw){for(var n=On.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Sw=!1}if(d_=0,qi=ta=On=null,Yy=!1,q2.current=null,r===null||r.return===null){Pi=1,Vw=t,Yn=null;break}e:{var a=e,h=r.return,p=r,g=t;if(t=na,p.flags|=2048,p.firstEffect=p.lastEffect=null,g!==null&&typeof g=="object"&&typeof g.then=="function"){var w=g;if(!(p.mode&2)){var E=p.alternate;E?(p.updateQueue=E.updateQueue,p.memoizedState=E.memoizedState,p.lanes=E.lanes):(p.updateQueue=null,p.memoizedState=null)}var q=(Sn.current&1)!==0,P=h;do{var k;if(k=P.tag===13){var W=P.memoizedState;if(W!==null)k=W.dehydrated!==null;else{var Q=P.memoizedProps;k=Q.fallback===void 0?!1:Q.unstable_avoidThisFallback!==!0?!0:!q}}if(k){var $=P.updateQueue;if($===null){var V=new Set;V.add(w),P.updateQueue=V}else $.add(w);if(!(P.mode&2)){if(P.flags|=64,p.flags|=16384,p.flags&=-2981,p.tag===1)if(p.alternate===null)p.tag=17;else{var Z=Wc(-1,1);Z.tag=2,Hc(p,Z)}p.lanes|=1;break e}g=void 0,p=t;var te=a.pingCache;if(te===null?(te=a.pingCache=new d2e,g=new Set,te.set(w,g)):(g=te.get(w),g===void 0&&(g=new Set,te.set(w,g))),!g.has(p)){g.add(p);var se=C2e.bind(null,a,w,p);w.then(se,se)}P.flags|=4096,P.lanes=t;break e}P=P.return}while(P!==null);g=Error(($d(p.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Pi!==5&&(Pi=2),g=A2(g,p),P=h;do{switch(P.tag){case 3:a=g,P.flags|=4096,t&=-t,P.lanes|=t;var Ie=E8(P,a,t);DV(P,Ie);break e;case 1:a=g;var qe=P.type,Ae=P.stateNode;if(!(P.flags&64)&&(typeof qe.getDerivedStateFromError=="function"||Ae!==null&&typeof Ae.componentDidCatch=="function"&&(hu===null||!hu.has(Ae)))){P.flags|=4096,t&=-t,P.lanes|=t;var Ue=S8(P,a,t);DV(P,Ue);break e}}P=P.return}while(P!==null)}O8(r)}catch(Le){t=Le,Yn===r&&r!==null&&(Yn=r=r.return);continue}break}while(!0)}function P8(){var e=qw.current;return qw.current=Aw,e===null?Aw:e}function Uy(e,t){var r=Mt;Mt|=16;var n=P8();Ia===e&&na===t||Jd(e,t);do try{b2e();break}catch(i){q8(e,i)}while(!0);if(y2(),Mt=r,qw.current=n,Yn!==null)throw Error(He(261));return Ia=null,na=0,Pi}function b2e(){for(;Yn!==null;)M8(Yn)}function w2e(){for(;Yn!==null&&!n2e();)M8(Yn)}function M8(e){var t=D8(e.alternate,e,Nf);e.memoizedProps=e.pendingProps,t===null?O8(e):Yn=t,q2.current=null}function O8(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&2048){if(r=p2e(t),r!==null){r.flags&=2047,Yn=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}else{if(r=f2e(r,t,Nf),r!==null){Yn=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||Nf&1073741824||!(r.mode&4)){for(var n=0,i=r.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}e!==null&&!(e.flags&2048)&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}if(t=t.sibling,t!==null){Yn=t;return}Yn=t=e}while(t!==null);Pi===0&&(Pi=5)}function Af(e){var t=rv();return kf(99,E2e.bind(null,e,t)),null}function E2e(e,t){do nh();while(Jy!==null);if(Mt&48)throw Error(He(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(He(177));e.callbackNode=null;var n=r.lanes|r.childLanes,i=n,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var h=e.eventTimes,p=e.expirationTimes;0<a;){var g=31-Jc(a),w=1<<g;i[g]=0,h[g]=-1,p[g]=-1,a&=~w}if(vl!==null&&!(n&24)&&vl.has(e)&&vl.delete(e),e===Ia&&(Yn=Ia=null,na=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(i=Mt,Mt|=32,q2.current=null,ZP=ew,h=bV(),bM(h)){if("selectionStart"in h)p={start:h.selectionStart,end:h.selectionEnd};else e:if(p=(p=h.ownerDocument)&&p.defaultView||window,(w=p.getSelection&&p.getSelection())&&w.rangeCount!==0){p=w.anchorNode,a=w.anchorOffset,g=w.focusNode,w=w.focusOffset;try{p.nodeType,g.nodeType}catch(Le){p=null;break e}var E=0,q=-1,P=-1,k=0,W=0,Q=h,$=null;t:for(;;){for(var V;Q!==p||a!==0&&Q.nodeType!==3||(q=E+a),Q!==g||w!==0&&Q.nodeType!==3||(P=E+w),Q.nodeType===3&&(E+=Q.nodeValue.length),(V=Q.firstChild)!==null;)$=Q,Q=V;for(;;){if(Q===h)break t;if($===p&&++k===a&&(q=E),$===g&&++W===w&&(P=E),(V=Q.nextSibling)!==null)break;Q=$,$=Q.parentNode}Q=V}p=q===-1||P===-1?null:{start:q,end:P}}else p=null;p=p||{start:0,end:0}}else p=null;KP={focusedElem:h,selectionRange:p},ew=!1,e_=null,sw=!1,ct=n;do try{S2e()}catch(Le){if(ct===null)throw Error(He(330));Xc(ct,Le),ct=ct.nextEffect}while(ct!==null);e_=null,ct=n;do try{for(h=e;ct!==null;){var Z=ct.flags;if(Z&16&&r_(ct.stateNode,""),Z&128){var te=ct.alternate;if(te!==null){var se=te.ref;se!==null&&(typeof se=="function"?se(null):se.current=null)}}switch(Z&1038){case 2:a$(ct),ct.flags&=-3;break;case 6:a$(ct),ct.flags&=-3,rM(ct.alternate,ct);break;case 1024:ct.flags&=-1025;break;case 1028:ct.flags&=-1025,rM(ct.alternate,ct);break;case 4:rM(ct.alternate,ct);break;case 8:p=ct,T8(h,p);var Ie=p.alternate;n$(p),Ie!==null&&n$(Ie);}ct=ct.nextEffect}}catch(Le){if(ct===null)throw Error(He(330));Xc(ct,Le),ct=ct.nextEffect}while(ct!==null);if(se=KP,te=bV(),Z=se.focusedElem,h=se.selectionRange,te!==Z&&Z&&Z.ownerDocument&&V$(Z.ownerDocument.documentElement,Z)){for(h!==null&&bM(Z)&&(te=h.start,se=h.end,se===void 0&&(se=te),("selectionStart"in Z)?(Z.selectionStart=te,Z.selectionEnd=Math.min(se,Z.value.length)):(se=(te=Z.ownerDocument||document)&&te.defaultView||window,se.getSelection&&(se=se.getSelection(),p=Z.textContent.length,Ie=Math.min(h.start,p),h=h.end===void 0?Ie:Math.min(h.end,p),!se.extend&&Ie>h&&(p=h,h=Ie,Ie=p),p=xV(Z,Ie),a=xV(Z,h),p&&a&&(se.rangeCount!==1||se.anchorNode!==p.node||se.anchorOffset!==p.offset||se.focusNode!==a.node||se.focusOffset!==a.offset)&&(te=te.createRange(),te.setStart(p.node,p.offset),se.removeAllRanges(),Ie>h?(se.addRange(te),se.extend(a.node,a.offset)):(te.setEnd(a.node,a.offset),se.addRange(te)))))),te=[],se=Z;se=se.parentNode;)se.nodeType===1&&te.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<te.length;Z++)se=te[Z],se.element.scrollLeft=se.left,se.element.scrollTop=se.top}ew=!!ZP,KP=ZP=null,e.current=r,ct=n;do try{for(Z=e;ct!==null;){var qe=ct.flags;if(qe&36&&g2e(Z,ct.alternate,ct),qe&128){te=void 0;var Ae=ct.ref;if(Ae!==null){var Ue=ct.stateNode;switch(ct.tag){case 5:te=Ue;break;default:te=Ue;}typeof Ae=="function"?Ae(te):Ae.current=te}}ct=ct.nextEffect}}catch(Le){if(ct===null)throw Error(He(330));Xc(ct,Le),ct=ct.nextEffect}while(ct!==null);ct=null,a2e(),Mt=i}else e.current=r;if(eh)eh=!1,Jy=e,By=t;else for(ct=n;ct!==null;)t=ct.nextEffect,ct.nextEffect=null,ct.flags&8&&(qe=ct,qe.sibling=null,qe.stateNode=null),ct=t;if(n=e.pendingLanes,n===0&&(hu=null),n===1?e===$M?Qy++:(Qy=0,$M=e):Qy=0,r=r.stateNode,Df&&typeof Df.onCommitFiberRoot=="function")try{Df.onCommitFiberRoot(m2,r,void 0,(r.current.flags&64)===64)}catch(Le){}if(es(e,ra()),Pw)throw Pw=!1,e=BM,BM=null,e;return Mt&8||du(),null}function S2e(){for(;ct!==null;){var e=ct.alternate;sw||e_===null||(ct.flags&8?sV(ct,e_)&&(sw=!0):ct.tag===13&&y2e(e,ct)&&sV(ct,e_)&&(sw=!0));var t=ct.flags;t&256&&m2e(e,ct),!(t&512)||eh||(eh=!0,c_(97,function(){return nh(),null})),ct=ct.nextEffect}}function nh(){if(By!==90){var e=97<By?97:By;return By=90,kf(e,I2e)}return!1}function T2e(e,t){UM.push(t,e),eh||(eh=!0,c_(97,function(){return nh(),null}))}function R8(e,t){VM.push(t,e),eh||(eh=!0,c_(97,function(){return nh(),null}))}function I2e(){if(Jy===null)return!1;var e=Jy;if(Jy=null,Mt&48)throw Error(He(331));var t=Mt;Mt|=32;var r=VM;VM=[];for(var n=0;n<r.length;n+=2){var i=r[n],a=r[n+1],h=i.destroy;if(i.destroy=void 0,typeof h=="function")try{h()}catch(g){if(a===null)throw Error(He(330));Xc(a,g)}}for(r=UM,UM=[],n=0;n<r.length;n+=2){i=r[n],a=r[n+1];try{var p=i.create;i.destroy=p()}catch(g){if(a===null)throw Error(He(330));Xc(a,g)}}for(p=e.current.firstEffect;p!==null;)e=p.nextEffect,p.nextEffect=null,p.flags&8&&(p.sibling=null,p.stateNode=null),p=e;return Mt=t,du(),!0}function s$(e,t,r){t=A2(r,t),t=E8(e,t,1),Hc(e,t),t=Po(),e=$w(e,1),e!==null&&(kw(e,1,t),es(e,t))}function Xc(e,t){if(e.tag===3)s$(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){s$(r,e,t);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(hu===null||!hu.has(n))){e=A2(t,e);var i=S8(r,e,1);if(Hc(r,i),i=Po(),r=$w(r,1),r!==null)kw(r,1,i),es(r,i);else if(typeof n.componentDidCatch=="function"&&(hu===null||!hu.has(n)))try{n.componentDidCatch(t,e)}catch(a){}break}}r=r.return}}function C2e(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Po(),e.pingedLanes|=e.suspendedLanes&r,Ia===e&&(na&r)===r&&(Pi===4||Pi===3&&(na&62914560)===na&&500>ra()-M2?Jd(e,0):P2|=r),es(e,t)}function A2e(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,t&2?t&4?(fl===0&&(fl=ov),t=Nd(62914560&~fl),t===0&&(t=4194304)):t=rv()===99?1:2:t=1),r=Po(),e=$w(e,t),e!==null&&(kw(e,t,r),es(e,r))}var D8;D8=function(e,t,r){var n=t.lanes;if(e!==null){if(e.memoizedProps!==t.pendingProps||Za.current)Rs=!0;else if(r&n)Rs=!!(e.flags&16384);else{switch(Rs=!1,t.tag){case 3:HV(t),QP();break;case 5:FV(t);break;case 1:Ka(t.type)&&nw(t);break;case 4:qM(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var i=t.type._context;Tn(yw,i._currentValue),i._currentValue=n;break;case 13:if(t.memoizedState!==null)return r&t.child.childLanes?ZV(e,t,r):(Tn(Sn,Sn.current&1),t=dl(e,t,r),t!==null?t.sibling:null);Tn(Sn,Sn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&64){if(n)return QV(e,t,r);t.flags|=64}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Tn(Sn,Sn.current),n)break;return null;case 23:case 24:return t.lanes=0,eM(e,t,r);}return dl(e,t,r)}}else Rs=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=tv(t,ia.current),Kd(t,r),i=S2(null,t,n,e,i,r),t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ka(n)){var a=!0;nw(t)}else a=!1;t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,x2(t);var h=n.getDerivedStateFromProps;typeof h=="function"&&bw(t,n,h,e),i.updater=Uw,t.stateNode=i,i._reactInternals=t,AM(t,n,e,r),t=RM(null,t,n,!0,a,r)}else t.tag=0,Ha(null,t,i,r),t=t.child;return t;case 16:i=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=P2e(i),e=Os(i,e),a){case 0:t=OM(null,t,i,e,r);break e;case 1:t=WV(null,t,i,e,r);break e;case 11:t=$V(null,t,i,e,r);break e;case 14:t=GV(null,t,i,Os(i.type,e),n,r);break e;}throw Error(He(306,i,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Os(n,i),OM(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Os(n,i),WV(e,t,n,i,r);case 3:if(HV(t),n=t.updateQueue,e===null||n===null)throw Error(He(282));if(n=t.pendingProps,i=t.memoizedState,i=i!==null?i.element:null,a8(e,t),h_(t,n,null,r),n=t.memoizedState.element,n===i)QP(),t=dl(e,t,r);else{if(i=t.stateNode,(a=i.hydrate)&&(Uc=Zd(t.stateNode.containerInfo.firstChild),pl=t,a=pu=!0),a){if(e=i.mutableSourceEagerHydrationData,e!=null)for(i=0;i<e.length;i+=2)a=e[i],a._workInProgressVersionPrimary=e[i+1],Xd.push(a);for(r=l8(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else Ha(e,t,n,r),QP();t=t.child}return t;case 5:return FV(t),e===null&&PM(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,h=i.children,SM(n,i)?h=null:a!==null&&SM(n,a)&&(t.flags|=16),_8(e,t),Ha(e,t,h,r),t.child;case 6:return e===null&&PM(t),null;case 13:return ZV(e,t,r);case 4:return qM(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ww(t,null,n,r):Ha(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Os(n,i),$V(e,t,n,i,r);case 7:return Ha(e,t,t.pendingProps,r),t.child;case 8:return Ha(e,t,t.pendingProps.children,r),t.child;case 12:return Ha(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,i=t.pendingProps,h=t.memoizedProps,a=i.value;var p=t.type._context;if(Tn(yw,p._currentValue),p._currentValue=a,h!==null)if(p=h.value,a=Xo(p,a)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(p,a):1073741823)|0,a===0){if(h.children===i.children&&!Za.current){t=dl(e,t,r);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var g=p.dependencies;if(g!==null){h=p.child;for(var w=g.firstContext;w!==null;){if(w.context===n&&w.observedBits&a){p.tag===1&&(w=Wc(-1,r&-r),w.tag=2,Hc(p,w)),p.lanes|=r,w=p.alternate,w!==null&&(w.lanes|=r),i8(p.return,r),g.lanes|=r;break}w=w.next}}else h=p.tag===10&&p.type===t.type?null:p.child;if(h!==null)h.return=p;else for(h=p;h!==null;){if(h===t){h=null;break}if(p=h.sibling,p!==null){p.return=h.return,h=p;break}h=h.return}p=h}Ha(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps,n=a.children,Kd(t,r),i=Qo(i,a.unstable_observedBits),n=n(i),t.flags|=1,Ha(e,t,n,r),t.child;case 14:return i=t.type,a=Os(i,t.pendingProps),a=Os(i.type,a),GV(e,t,i,a,n,r);case 15:return y8(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Os(n,i),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ka(n)?(e=!0,nw(t)):e=!1,Kd(t,r),s8(t,n,i),AM(t,n,i,r),RM(null,t,n,!0,e,r);case 19:return QV(e,t,r);case 23:return eM(e,t,r);case 24:return eM(e,t,r);}throw Error(He(156,t.tag))};function q2e(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Yo(e,t,r,n){return new q2e(e,t,r,n)}function R2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function P2e(e){if(typeof e=="function")return R2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Rw)return 11;if(e===Dw)return 14}return 2}function th(e,t){var r=e.alternate;return r===null?(r=Yo(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function uw(e,t,r,n,i,a){var h=2;if(n=e,typeof e=="function")R2(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case zc:return Qd(r.children,i,a,t);case c$:h=8,i|=16;break;case KM:h=8,i|=1;break;case Vy:return e=Yo(12,r,t,i|8),e.elementType=Vy,e.type=Vy,e.lanes=a,e;case $y:return e=Yo(13,r,t,i),e.type=$y,e.elementType=$y,e.lanes=a,e;case lw:return e=Yo(19,r,t,i),e.elementType=lw,e.lanes=a,e;case t2:return D2(r,i,a,t);case oM:return e=Yo(24,r,t,i),e.elementType=oM,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case XM:h=10;break e;case YM:h=9;break e;case Rw:h=11;break e;case Dw:h=14;break e;case JM:h=16,n=null;break e;case QM:h=22;break e;}throw Error(He(130,e==null?e:typeof e,""));}return t=Yo(h,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function Qd(e,t,r,n){return e=Yo(7,e,n,t),e.lanes=r,e}function D2(e,t,r,n){return e=Yo(23,e,n,t),e.elementType=t2,e.lanes=r,e}function nM(e,t,r){return e=Yo(6,e,null,t),e.lanes=r,e}function iM(e,t,r){return t=Yo(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function M2e(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=UP(0),this.expirationTimes=UP(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=UP(0),this.mutableSourceEagerHydrationData=null}function O2e(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qf,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Mw(e,t,r,n){var i=t.current,a=Po(),h=Zc(i);e:if(r){r=r._reactInternals;t:{if(jf(r)!==r||r.tag!==1)throw Error(He(170));var p=r;do{switch(p.tag){case 3:p=p.stateNode.context;break t;case 1:if(Ka(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break t}}p=p.return}while(p!==null);throw Error(He(171))}if(r.tag===1){var g=r.type;if(Ka(g)){r=Y$(r,g,p);break e}}r=p}else r=Qc;return t.context===null?t.context=r:t.pendingContext=r,t=Wc(a,h),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),Hc(i,t),Kc(i,h,a),h}function aM(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode;}}function u$(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function L2(e,t){u$(e,t),(e=e.alternate)&&u$(e,t)}function R2e(){return null}function k2(e,t,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new M2e(e,t,r!=null&&r.hydrate===!0),t=Yo(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,x2(t),e[av]=r.current,W$(e.nodeType===8?e.parentNode:e),n)for(e=0;e<n.length;e++){t=n[e];var i=t._getVersion;i=i(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,i]:r.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=r}k2.prototype.render=function(e){Mw(e,this._internalRoot,null,null)};k2.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Mw(null,e,null,function(){t[av]=null})};function __(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function D2e(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new k2(e,0,t?{hydrate:!0}:void 0)}function Gw(e,t,r,n,i){var a=r._reactRootContainer;if(a){var h=a._internalRoot;if(typeof i=="function"){var p=i;i=function(){var w=aM(h);p.call(w)}}Mw(t,h,e,i)}else{if(a=r._reactRootContainer=D2e(r,n),h=a._internalRoot,typeof i=="function"){var g=i;i=function(){var w=aM(h);g.call(w)}}A8(function(){Mw(t,h,e,i)})}return aM(h)}T$=function(e){if(e.tag===13){var t=Po();Kc(e,4,t),L2(e,4)}};o2=function(e){if(e.tag===13){var t=Po();Kc(e,67108864,t),L2(e,67108864)}};I$=function(e){if(e.tag===13){var t=Po(),r=Zc(e);Kc(e,r,t),L2(e,r)}};C$=function(e,t){return t()};mM=function(e,t,r){switch(t){case"input":if(uM(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+"][type=\"radio\"]"),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=jw(n);if(!i)throw Error(He(90));f$(n),uM(n,i)}}}break;case"textarea":d$(e,r);break;case"select":t=r.value,t!=null&&Gd(e,!!r.multiple,t,!1);}};n2=C8;b$=function(e,t,r,n,i){var a=Mt;Mt|=4;try{return kf(98,e.bind(null,t,r,n,i))}finally{Mt=a,Mt===0&&(uv(),du())}};i2=function(){!(Mt&49)&&(x2e(),nh())};w$=function(e,t){var r=Mt;Mt|=2;try{return e(t)}finally{Mt=r,Mt===0&&(uv(),du())}};function L8(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!__(t))throw Error(He(200));return O2e(e,t,null,r)}var L2e={Events:[m_,Bd,jw,_$,x$,nh,{current:!1}]},ky={findFiberByHostInstance:Mf,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},k2e={bundleType:ky.bundleType,version:ky.version,rendererPackageName:ky.rendererPackageName,rendererConfig:ky.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zf.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=S$(e),e===null?null:e.stateNode},findFiberByHostInstance:ky.findFiberByHostInstance||R2e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(Ny=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Ny.isDisabled&&Ny.supportsFiber))try{m2=Ny.inject(k2e),Df=Ny}catch(e){}var Ny;ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L2e;ts.createPortal=L8;ts.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(He(188)):Error(He(268,Object.keys(e)));return e=S$(t),e=e===null?null:e.stateNode,e};ts.flushSync=function(e,t){var r=Mt;if(r&48)return e(t);Mt|=1;try{if(e)return kf(99,e.bind(null,t))}finally{Mt=r,du()}};ts.hydrate=function(e,t,r){if(!__(t))throw Error(He(200));return Gw(null,e,t,!0,r)};ts.render=function(e,t,r){if(!__(t))throw Error(He(200));return Gw(null,e,t,!1,r)};ts.unmountComponentAtNode=function(e){if(!__(e))throw Error(He(40));return e._reactRootContainer?(A8(function(){Gw(null,null,e,!1,function(){e._reactRootContainer=null,e[av]=null})}),!0):!1};ts.unstable_batchedUpdates=C8;ts.unstable_createPortal=function(e,t){return L8(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};ts.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!__(r))throw Error(He(200));if(e==null||e._reactInternals===void 0)throw Error(He(38));return Gw(e,t,r,!1,n)};ts.version="17.0.2"});var rs=S((Xzt,F8)=>{"use strict";function N8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N8)}catch(e){console.error(e)}}N8(),F8.exports=k8()});var Ze=S((N2,z8)=>{"use strict";var x_=function(e){return e&&e.Math===Math&&e};z8.exports=x_(typeof globalThis=="object"&&globalThis)||x_(typeof window=="object"&&window)||x_(typeof self=="object"&&self)||x_(typeof global=="object"&&global)||x_(typeof N2=="object"&&N2)||function(){return this}()||Function("return this")()});var Ne=S((Yzt,j8)=>{"use strict";j8.exports=function(e){try{return!!e()}catch(t){return!0}}});var dt=S((Jzt,B8)=>{"use strict";var N2e=Ne();B8.exports=!N2e(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var lv=S((Qzt,U8)=>{"use strict";var F2e=Ne();U8.exports=!F2e(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var Qe=S((ejt,V8)=>{"use strict";var z2e=lv(),Ww=Function.prototype.call;V8.exports=z2e?Ww.bind(Ww):function(){return Ww.apply(Ww,arguments)}});var b_=S(W8=>{"use strict";var $8={}.propertyIsEnumerable,G8=Object.getOwnPropertyDescriptor,j2e=G8&&!$8.call({1:2},1);W8.f=j2e?function(t){var r=G8(this,t);return!!r&&r.enumerable}:$8});var Xa=S((rjt,H8)=>{"use strict";H8.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var Oe=S((njt,X8)=>{"use strict";var Z8=lv(),K8=Function.prototype,F2=K8.call,B2e=Z8&&K8.bind.bind(F2,F2);X8.exports=Z8?B2e:function(e){return function(){return F2.apply(e,arguments)}}});var Oi=S((ijt,J8)=>{"use strict";var Y8=Oe(),U2e=Y8({}.toString),V2e=Y8("".slice);J8.exports=function(e){return V2e(U2e(e),8,-1)}});var gl=S((ajt,Q8)=>{"use strict";var $2e=Oe(),G2e=Ne(),W2e=Oi(),z2=Object,H2e=$2e("".split);Q8.exports=G2e(function(){return!z2("z").propertyIsEnumerable(0)})?function(e){return W2e(e)==="String"?H2e(e,""):z2(e)}:z2});var Nn=S((ojt,eG)=>{"use strict";eG.exports=function(e){return e==null}});var Br=S((sjt,tG)=>{"use strict";var Z2e=Nn(),K2e=TypeError;tG.exports=function(e){if(Z2e(e))throw new K2e("Can't call method on "+e);return e}});var Fn=S((ujt,rG)=>{"use strict";var X2e=gl(),Y2e=Br();rG.exports=function(e){return X2e(Y2e(e))}});var Ot=S((ljt,nG)=>{"use strict";var j2=typeof document=="object"&&document.all;nG.exports=typeof j2=="undefined"&&j2!==void 0?function(e){return typeof e=="function"||e===j2}:function(e){return typeof e=="function"}});var It=S((cjt,iG)=>{"use strict";var J2e=Ot();iG.exports=function(e){return typeof e=="object"?e!==null:J2e(e)}});var St=S((hjt,aG)=>{"use strict";var B2=Ze(),Q2e=Ot(),eOe=function(e){return Q2e(e)?e:void 0};aG.exports=function(e,t){return arguments.length<2?eOe(B2[e]):B2[e]&&B2[e][t]}});var Ri=S((fjt,oG)=>{"use strict";var tOe=Oe();oG.exports=tOe({}.isPrototypeOf)});var Ds=S((pjt,lG)=>{"use strict";var rOe=Ze(),sG=rOe.navigator,uG=sG&&sG.userAgent;lG.exports=uG?String(uG):""});var vu=S((djt,vG)=>{"use strict";var dG=Ze(),U2=Ds(),cG=dG.process,hG=dG.Deno,fG=cG&&cG.versions||hG&&hG.version,pG=fG&&fG.v8,Ls,Hw;pG&&(Ls=pG.split("."),Hw=Ls[0]>0&&Ls[0]<4?1:+(Ls[0]+Ls[1]));!Hw&&U2&&(Ls=U2.match(/Edge\/(\d+)/),(!Ls||Ls[1]>=74)&&(Ls=U2.match(/Chrome\/(\d+)/),Ls&&(Hw=+Ls[1])));vG.exports=Hw});var ih=S((vjt,gG)=>{"use strict";var mG=vu(),nOe=Ne(),iOe=Ze(),aOe=iOe.String;gG.exports=!!Object.getOwnPropertySymbols&&!nOe(function(){var e=Symbol("symbol detection");return!aOe(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&mG&&mG<41})});var V2=S((mjt,yG)=>{"use strict";var oOe=ih();yG.exports=oOe&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var yl=S((gjt,_G)=>{"use strict";var sOe=St(),uOe=Ot(),lOe=Ri(),cOe=V2(),hOe=Object;_G.exports=cOe?function(e){return typeof e=="symbol"}:function(e){var t=sOe("Symbol");return uOe(t)&&lOe(t.prototype,hOe(e))}});var ah=S((yjt,xG)=>{"use strict";var fOe=String;xG.exports=function(e){try{return fOe(e)}catch(t){return"Object"}}});var Et=S((_jt,bG)=>{"use strict";var pOe=Ot(),dOe=ah(),vOe=TypeError;bG.exports=function(e){if(pOe(e))return e;throw new vOe(dOe(e)+" is not a function")}});var In=S((xjt,wG)=>{"use strict";var mOe=Et(),gOe=Nn();wG.exports=function(e,t){var r=e[t];return gOe(r)?void 0:mOe(r)}});var H2=S((bjt,EG)=>{"use strict";var $2=Qe(),G2=Ot(),W2=It(),yOe=TypeError;EG.exports=function(e,t){var r,n;if(t==="string"&&G2(r=e.toString)&&!W2(n=$2(r,e))||G2(r=e.valueOf)&&!W2(n=$2(r,e))||t!=="string"&&G2(r=e.toString)&&!W2(n=$2(r,e)))return n;throw new yOe("Can't convert object to primitive value")}});var jt=S((wjt,SG)=>{"use strict";SG.exports=!1});var Zw=S((Ejt,IG)=>{"use strict";var TG=Ze(),_Oe=Object.defineProperty;IG.exports=function(e,t){try{_Oe(TG,e,{value:t,configurable:!0,writable:!0})}catch(r){TG[e]=t}return t}});var w_=S((Sjt,qG)=>{"use strict";var xOe=jt(),bOe=Ze(),wOe=Zw(),CG="__core-js_shared__",AG=qG.exports=bOe[CG]||wOe(CG,{});(AG.versions||(AG.versions=[])).push({version:"3.39.0",mode:xOe?"pure":"global",copyright:"\xA9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var _l=S((Tjt,MG)=>{"use strict";var PG=w_();MG.exports=function(e,t){return PG[e]||(PG[e]=t||{})}});var Bt=S((Ijt,OG)=>{"use strict";var EOe=Br(),SOe=Object;OG.exports=function(e){return SOe(EOe(e))}});var kt=S((Cjt,RG)=>{"use strict";var TOe=Oe(),IOe=Bt(),COe=TOe({}.hasOwnProperty);RG.exports=Object.hasOwn||function(t,r){return COe(IOe(t),r)}});var oh=S((Ajt,DG)=>{"use strict";var AOe=Oe(),qOe=0,POe=Math.random(),MOe=AOe(1 .toString);DG.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+MOe(++qOe+POe,36)}});var yt=S((qjt,kG)=>{"use strict";var OOe=Ze(),ROe=_l(),LG=kt(),DOe=oh(),LOe=ih(),kOe=V2(),cv=OOe.Symbol,Z2=ROe("wks"),NOe=kOe?cv.for||cv:cv&&cv.withoutSetter||DOe;kG.exports=function(e){return LG(Z2,e)||(Z2[e]=LOe&&LG(cv,e)?cv[e]:NOe("Symbol."+e)),Z2[e]}});var E_=S((Pjt,zG)=>{"use strict";var FOe=Qe(),NG=It(),FG=yl(),zOe=In(),jOe=H2(),BOe=yt(),UOe=TypeError,VOe=BOe("toPrimitive");zG.exports=function(e,t){if(!NG(e)||FG(e))return e;var r=zOe(e,VOe),n;if(r){if(t===void 0&&(t="default"),n=FOe(r,e,t),!NG(n)||FG(n))return n;throw new UOe("Can't convert object to primitive value")}return t===void 0&&(t="number"),jOe(e,t)}});var mu=S((Mjt,jG)=>{"use strict";var $Oe=E_(),GOe=yl();jG.exports=function(e){var t=$Oe(e,"string");return GOe(t)?t:t+""}});var S_=S((Ojt,UG)=>{"use strict";var WOe=Ze(),BG=It(),K2=WOe.document,HOe=BG(K2)&&BG(K2.createElement);UG.exports=function(e){return HOe?K2.createElement(e):{}}});var X2=S((Rjt,VG)=>{"use strict";var ZOe=dt(),KOe=Ne(),XOe=S_();VG.exports=!ZOe&&!KOe(function(){return Object.defineProperty(XOe("div"),"a",{get:function(){return 7}}).a!==7})});var vi=S(GG=>{"use strict";var YOe=dt(),JOe=Qe(),QOe=b_(),eRe=Xa(),tRe=Fn(),rRe=mu(),nRe=kt(),iRe=X2(),$G=Object.getOwnPropertyDescriptor;GG.f=YOe?$G:function(t,r){if(t=tRe(t),r=rRe(r),iRe)try{return $G(t,r)}catch(n){}if(nRe(t,r))return eRe(!JOe(QOe.f,t,r),t[r])}});var Y2=S((Ljt,WG)=>{"use strict";var aRe=dt(),oRe=Ne();WG.exports=aRe&&oRe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var Ye=S((kjt,HG)=>{"use strict";var sRe=It(),uRe=String,lRe=TypeError;HG.exports=function(e){if(sRe(e))return e;throw new lRe(uRe(e)+" is not an object")}});var Fr=S(KG=>{"use strict";var cRe=dt(),hRe=X2(),fRe=Y2(),Kw=Ye(),ZG=mu(),pRe=TypeError,J2=Object.defineProperty,dRe=Object.getOwnPropertyDescriptor,Q2="enumerable",eO="configurable",tO="writable";KG.f=cRe?fRe?function(t,r,n){if(Kw(t),r=ZG(r),Kw(n),typeof t=="function"&&r==="prototype"&&"value"in n&&tO in n&&!n[tO]){var i=dRe(t,r);i&&i[tO]&&(t[r]=n.value,n={configurable:eO in n?n[eO]:i[eO],enumerable:Q2 in n?n[Q2]:i[Q2],writable:!1})}return J2(t,r,n)}:J2:function(t,r,n){if(Kw(t),r=ZG(r),Kw(n),hRe)try{return J2(t,r,n)}catch(i){}if("get"in n||"set"in n)throw new pRe("Accessors not supported");return"value"in n&&(t[r]=n.value),t}});var zn=S((Fjt,XG)=>{"use strict";var vRe=dt(),mRe=Fr(),gRe=Xa();XG.exports=vRe?function(e,t,r){return mRe.f(e,t,gRe(1,r))}:function(e,t,r){return e[t]=r,e}});var Uf=S((zjt,JG)=>{"use strict";var rO=dt(),yRe=kt(),YG=Function.prototype,_Re=rO&&Object.getOwnPropertyDescriptor,nO=yRe(YG,"name"),xRe=nO&&function(){}.name==="something",bRe=nO&&(!rO||rO&&_Re(YG,"name").configurable);JG.exports={EXISTS:nO,PROPER:xRe,CONFIGURABLE:bRe}});var T_=S((jjt,QG)=>{"use strict";var wRe=Oe(),ERe=Ot(),iO=w_(),SRe=wRe(Function.toString);ERe(iO.inspectSource)||(iO.inspectSource=function(e){return SRe(e)});QG.exports=iO.inspectSource});var aO=S((Bjt,tW)=>{"use strict";var TRe=Ze(),IRe=Ot(),eW=TRe.WeakMap;tW.exports=IRe(eW)&&/native code/.test(String(eW))});var I_=S((Ujt,nW)=>{"use strict";var CRe=_l(),ARe=oh(),rW=CRe("keys");nW.exports=function(e){return rW[e]||(rW[e]=ARe(e))}});var hv=S((Vjt,iW)=>{"use strict";iW.exports={}});var dr=S(($jt,sW)=>{"use strict";var qRe=aO(),oW=Ze(),PRe=It(),MRe=zn(),oO=kt(),sO=w_(),ORe=I_(),RRe=hv(),aW="Object already initialized",uO=oW.TypeError,DRe=oW.WeakMap,Xw,C_,Yw,LRe=function(e){return Yw(e)?C_(e):Xw(e,{})},kRe=function(e){return function(t){var r;if(!PRe(t)||(r=C_(t)).type!==e)throw new uO("Incompatible receiver, "+e+" required");return r}};qRe||sO.state?(ks=sO.state||(sO.state=new DRe),ks.get=ks.get,ks.has=ks.has,ks.set=ks.set,Xw=function(e,t){if(ks.has(e))throw new uO(aW);return t.facade=e,ks.set(e,t),t},C_=function(e){return ks.get(e)||{}},Yw=function(e){return ks.has(e)}):(Vf=ORe("state"),RRe[Vf]=!0,Xw=function(e,t){if(oO(e,Vf))throw new uO(aW);return t.facade=e,MRe(e,Vf,t),t},C_=function(e){return oO(e,Vf)?e[Vf]:{}},Yw=function(e){return oO(e,Vf)});var ks,Vf;sW.exports={set:Xw,get:C_,has:Yw,enforce:LRe,getterFor:kRe}});var A_=S((Gjt,cW)=>{"use strict";var cO=Oe(),NRe=Ne(),FRe=Ot(),Jw=kt(),lO=dt(),zRe=Uf().CONFIGURABLE,jRe=T_(),lW=dr(),BRe=lW.enforce,URe=lW.get,uW=String,Qw=Object.defineProperty,VRe=cO("".slice),$Re=cO("".replace),GRe=cO([].join),WRe=lO&&!NRe(function(){return Qw(function(){},"length",{value:8}).length!==8}),HRe=String(String).split("String"),ZRe=cW.exports=function(e,t,r){VRe(uW(t),0,7)==="Symbol("&&(t="["+$Re(uW(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!Jw(e,"name")||zRe&&e.name!==t)&&(lO?Qw(e,"name",{value:t,configurable:!0}):e.name=t),WRe&&r&&Jw(r,"arity")&&e.length!==r.arity&&Qw(e,"length",{value:r.arity});try{r&&Jw(r,"constructor")&&r.constructor?lO&&Qw(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var n=BRe(e);return Jw(n,"source")||(n.source=GRe(HRe,typeof t=="string"?t:"")),e};Function.prototype.toString=ZRe(function(){return FRe(this)&&URe(this).source||jRe(this)},"toString")});var br=S((Wjt,hW)=>{"use strict";var KRe=Ot(),XRe=Fr(),YRe=A_(),JRe=Zw();hW.exports=function(e,t,r,n){n||(n={});var i=n.enumerable,a=n.name!==void 0?n.name:t;if(KRe(r)&&YRe(r,a,n),n.global)i?e[t]=r:JRe(t,r);else{try{n.unsafe?e[t]&&(i=!0):delete e[t]}catch(h){}i?e[t]=r:XRe.f(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e}});var hO=S((Hjt,fW)=>{"use strict";var QRe=Math.ceil,eDe=Math.floor;fW.exports=Math.trunc||function(t){var r=+t;return(r>0?eDe:QRe)(r)}});var Gr=S((Zjt,pW)=>{"use strict";var tDe=hO();pW.exports=function(e){var t=+e;return t!==t||t===0?0:tDe(t)}});var Ns=S((Kjt,dW)=>{"use strict";var rDe=Gr(),nDe=Math.max,iDe=Math.min;dW.exports=function(e,t){var r=rDe(e);return r<0?nDe(r+t,0):iDe(r,t)}});var Ya=S((Xjt,vW)=>{"use strict";var aDe=Gr(),oDe=Math.min;vW.exports=function(e){var t=aDe(e);return t>0?oDe(t,9007199254740991):0}});var Yt=S((Yjt,mW)=>{"use strict";var sDe=Ya();mW.exports=function(e){return sDe(e.length)}});var fv=S((Jjt,yW)=>{"use strict";var uDe=Fn(),lDe=Ns(),cDe=Yt(),gW=function(e){return function(t,r,n){var i=uDe(t),a=cDe(i);if(a===0)return!e&&-1;var h=lDe(n,a),p;if(e&&r!==r){for(;a>h;)if(p=i[h++],p!==p)return!0}else for(;a>h;h++)if((e||h in i)&&i[h]===r)return e||h||0;return!e&&-1}};yW.exports={includes:gW(!0),indexOf:gW(!1)}});var pO=S((Qjt,xW)=>{"use strict";var hDe=Oe(),fO=kt(),fDe=Fn(),pDe=fv().indexOf,dDe=hv(),_W=hDe([].push);xW.exports=function(e,t){var r=fDe(e),n=0,i=[],a;for(a in r)!fO(dDe,a)&&fO(r,a)&&_W(i,a);for(;t.length>n;)fO(r,a=t[n++])&&(~pDe(i,a)||_W(i,a));return i}});var eE=S((eBt,bW)=>{"use strict";bW.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var sh=S(wW=>{"use strict";var vDe=pO(),mDe=eE(),gDe=mDe.concat("length","prototype");wW.f=Object.getOwnPropertyNames||function(t){return vDe(t,gDe)}});var q_=S(EW=>{"use strict";EW.f=Object.getOwnPropertySymbols});var tE=S((nBt,SW)=>{"use strict";var yDe=St(),_De=Oe(),xDe=sh(),bDe=q_(),wDe=Ye(),EDe=_De([].concat);SW.exports=yDe("Reflect","ownKeys")||function(t){var r=xDe.f(wDe(t)),n=bDe.f;return n?EDe(r,n(t)):r}});var $f=S((iBt,IW)=>{"use strict";var TW=kt(),SDe=tE(),TDe=vi(),IDe=Fr();IW.exports=function(e,t,r){for(var n=SDe(t),i=IDe.f,a=TDe.f,h=0;h<n.length;h++){var p=n[h];!TW(e,p)&&!(r&&TW(r,p))&&i(e,p,a(t,p))}}});var pv=S((aBt,CW)=>{"use strict";var CDe=Ne(),ADe=Ot(),qDe=/#|\.prototype\./,P_=function(e,t){var r=MDe[PDe(e)];return r===RDe?!0:r===ODe?!1:ADe(t)?CDe(t):!!t},PDe=P_.normalize=function(e){return String(e).replace(qDe,".").toLowerCase()},MDe=P_.data={},ODe=P_.NATIVE="N",RDe=P_.POLYFILL="P";CW.exports=P_});var K=S((oBt,AW)=>{"use strict";var rE=Ze(),DDe=vi().f,LDe=zn(),kDe=br(),NDe=Zw(),FDe=$f(),zDe=pv();AW.exports=function(e,t){var r=e.target,n=e.global,i=e.stat,a,h,p,g,w,E;if(n?h=rE:i?h=rE[r]||NDe(r,{}):h=rE[r]&&rE[r].prototype,h)for(p in t){if(w=t[p],e.dontCallGetSet?(E=DDe(h,p),g=E&&E.value):g=h[p],a=zDe(n?p:r+(i?".":"#")+p,e.forced),!a&&g!==void 0){if(typeof w==typeof g)continue;FDe(w,g)}(e.sham||g&&g.sham)&&LDe(w,"sham",!0),kDe(h,p,w,e)}}});var nE=S((sBt,PW)=>{"use strict";var jDe=yt(),BDe=jDe("toStringTag"),qW={};qW[BDe]="z";PW.exports=String(qW)==="[object z]"});var Ja=S((uBt,MW)=>{"use strict";var UDe=nE(),VDe=Ot(),iE=Oi(),$De=yt(),GDe=$De("toStringTag"),WDe=Object,HDe=iE(function(){return arguments}())==="Arguments",ZDe=function(e,t){try{return e[t]}catch(r){}};MW.exports=UDe?iE:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=ZDe(t=WDe(e),GDe))=="string"?r:HDe?iE(t):(n=iE(t))==="Object"&&VDe(t.callee)?"Arguments":n}});var qt=S((lBt,OW)=>{"use strict";var KDe=Ja(),XDe=String;OW.exports=function(e){if(KDe(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return XDe(e)}});var Gf=S((cBt,RW)=>{"use strict";var YDe=pO(),JDe=eE();RW.exports=Object.keys||function(t){return YDe(t,JDe)}});var aE=S(DW=>{"use strict";var QDe=dt(),eLe=Y2(),tLe=Fr(),rLe=Ye(),nLe=Fn(),iLe=Gf();DW.f=QDe&&!eLe?Object.defineProperties:function(t,r){rLe(t);for(var n=nLe(r),i=iLe(r),a=i.length,h=0,p;a>h;)tLe.f(t,p=i[h++],n[p]);return t}});var dO=S((fBt,LW)=>{"use strict";var aLe=St();LW.exports=aLe("document","documentElement")});var Cn=S((pBt,UW)=>{"use strict";var oLe=Ye(),sLe=aE(),kW=eE(),uLe=hv(),lLe=dO(),cLe=S_(),hLe=I_(),NW=">",FW="<",mO="prototype",gO="script",jW=hLe("IE_PROTO"),vO=function(){},BW=function(e){return FW+gO+NW+e+FW+"/"+gO+NW},zW=function(e){e.write(BW("")),e.close();var t=e.parentWindow.Object;return e=null,t},fLe=function(){var e=cLe("iframe"),t="java"+gO+":",r;return e.style.display="none",lLe.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(BW("document.F=Object")),r.close(),r.F},oE,sE=function(){try{oE=new ActiveXObject("htmlfile")}catch(t){}sE=typeof document!="undefined"?document.domain&&oE?zW(oE):fLe():zW(oE);for(var e=kW.length;e--;)delete sE[mO][kW[e]];return sE()};uLe[jW]=!0;UW.exports=Object.create||function(t,r){var n;return t!==null?(vO[mO]=oLe(t),n=new vO,vO[mO]=null,n[jW]=t):n=sE(),r===void 0?n:sLe.f(n,r)}});var Qa=S((dBt,VW)=>{"use strict";var pLe=Oe();VW.exports=pLe([].slice)});var uE=S((vBt,WW)=>{"use strict";var dLe=Oi(),vLe=Fn(),$W=sh().f,mLe=Qa(),GW=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],gLe=function(e){try{return $W(e)}catch(t){return mLe(GW)}};WW.exports.f=function(t){return GW&&dLe(t)==="Window"?gLe(t):$W(vLe(t))}});var Wr=S((mBt,ZW)=>{"use strict";var HW=A_(),yLe=Fr();ZW.exports=function(e,t,r){return r.get&&HW(r.get,t,{getter:!0}),r.set&&HW(r.set,t,{setter:!0}),yLe.f(e,t,r)}});var yO=S(KW=>{"use strict";var _Le=yt();KW.f=_Le});var lE=S((yBt,XW)=>{"use strict";var xLe=Ze();XW.exports=xLe});var cn=S((_Bt,JW)=>{"use strict";var YW=lE(),bLe=kt(),wLe=yO(),ELe=Fr().f;JW.exports=function(e){var t=YW.Symbol||(YW.Symbol={});bLe(t,e)||ELe(t,e,{value:wLe.f(e)})}});var _O=S((xBt,QW)=>{"use strict";var SLe=Qe(),TLe=St(),ILe=yt(),CLe=br();QW.exports=function(){var e=TLe("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,n=ILe("toPrimitive");t&&!t[n]&&CLe(t,n,function(i){return SLe(r,this)},{arity:1})}});var Aa=S((bBt,tH)=>{"use strict";var ALe=Fr().f,qLe=kt(),PLe=yt(),eH=PLe("toStringTag");tH.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!qLe(e,eH)&&ALe(e,eH,{configurable:!0,value:t})}});var xl=S((wBt,rH)=>{"use strict";var MLe=Oi(),OLe=Oe();rH.exports=function(e){if(MLe(e)==="Function")return OLe(e)}});var Pr=S((EBt,iH)=>{"use strict";var nH=xl(),RLe=Et(),DLe=lv(),LLe=nH(nH.bind);iH.exports=function(e,t){return RLe(e),t===void 0?e:DLe?LLe(e,t):function(){return e.apply(t,arguments)}}});var Fs=S((SBt,aH)=>{"use strict";var kLe=Oi();aH.exports=Array.isArray||function(t){return kLe(t)==="Array"}});var zs=S((TBt,cH)=>{"use strict";var NLe=Oe(),FLe=Ne(),oH=Ot(),zLe=Ja(),jLe=St(),BLe=T_(),sH=function(){},uH=jLe("Reflect","construct"),xO=/^\s*(?:class|function)\b/,ULe=NLe(xO.exec),VLe=!xO.test(sH),M_=function(t){if(!oH(t))return!1;try{return uH(sH,[],t),!0}catch(r){return!1}},lH=function(t){if(!oH(t))return!1;switch(zLe(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1;}try{return VLe||!!ULe(xO,BLe(t))}catch(r){return!0}};lH.sham=!0;cH.exports=!uH||FLe(function(){var e;return M_(M_.call)||!M_(Object)||!M_(function(){e=!0})||e})?lH:M_});var dH=S((IBt,pH)=>{"use strict";var hH=Fs(),$Le=zs(),GLe=It(),WLe=yt(),HLe=WLe("species"),fH=Array;pH.exports=function(e){var t;return hH(e)&&(t=e.constructor,$Le(t)&&(t===fH||hH(t.prototype))?t=void 0:GLe(t)&&(t=t[HLe],t===null&&(t=void 0))),t===void 0?fH:t}});var dv=S((CBt,vH)=>{"use strict";var ZLe=dH();vH.exports=function(e,t){return new(ZLe(e))(t===0?0:t)}});var An=S((ABt,gH)=>{"use strict";var KLe=Pr(),XLe=Oe(),YLe=gl(),JLe=Bt(),QLe=Yt(),eke=dv(),mH=XLe([].push),uh=function(e){var t=e===1,r=e===2,n=e===3,i=e===4,a=e===6,h=e===7,p=e===5||a;return function(g,w,E,q){for(var P=JLe(g),k=YLe(P),W=QLe(k),Q=KLe(w,E),$=0,V=q||eke,Z=t?V(g,W):r||h?V(g,0):void 0,te,se;W>$;$++)if((p||$ in k)&&(te=k[$],se=Q(te,$,P),e))if(t)Z[$]=se;else if(se)switch(e){case 3:return!0;case 5:return te;case 6:return $;case 2:mH(Z,te);}else switch(e){case 4:return!1;case 7:mH(Z,te);}return a?-1:n||i?i:Z}};gH.exports={forEach:uh(0),map:uh(1),filter:uh(2),some:uh(3),every:uh(4),find:uh(5),findIndex:uh(6),filterReject:uh(7)}});var DH=S(()=>{"use strict";var cE=K(),D_=Ze(),qO=Qe(),tke=Oe(),rke=jt(),vv=dt(),mv=ih(),nke=Ne(),mi=kt(),ike=Ri(),SO=Ye(),hE=Fn(),PO=mu(),ake=qt(),TO=Xa(),gv=Cn(),xH=Gf(),oke=sh(),bH=uE(),ske=q_(),wH=vi(),EH=Fr(),uke=aE(),SH=b_(),bO=br(),lke=Wr(),MO=_l(),cke=I_(),TH=hv(),yH=oh(),hke=yt(),fke=yO(),pke=cn(),dke=_O(),vke=Aa(),IH=dr(),fE=An().forEach,eo=cke("hidden"),pE="Symbol",R_="prototype",mke=IH.set,_H=IH.getterFor(pE),ns=Object[R_],Wf=D_.Symbol,O_=Wf&&Wf[R_],gke=D_.RangeError,yke=D_.TypeError,wO=D_.QObject,CH=wH.f,Hf=EH.f,AH=bH.f,_ke=SH.f,qH=tke([].push),bl=MO("symbols"),L_=MO("op-symbols"),xke=MO("wks"),IO=!wO||!wO[R_]||!wO[R_].findChild,PH=function(e,t,r){var n=CH(ns,t);n&&delete ns[t],Hf(e,t,r),n&&e!==ns&&Hf(ns,t,n)},CO=vv&&nke(function(){return gv(Hf({},"a",{get:function(){return Hf(this,"a",{value:7}).a}})).a!==7})?PH:Hf,EO=function(e,t){var r=bl[e]=gv(O_);return mke(r,{type:pE,tag:e,description:t}),vv||(r.description=t),r},dE=function(t,r,n){t===ns&&dE(L_,r,n),SO(t);var i=PO(r);return SO(n),mi(bl,i)?(n.enumerable?(mi(t,eo)&&t[eo][i]&&(t[eo][i]=!1),n=gv(n,{enumerable:TO(0,!1)})):(mi(t,eo)||Hf(t,eo,TO(1,gv(null))),t[eo][i]=!0),CO(t,i,n)):Hf(t,i,n)},OO=function(t,r){SO(t);var n=hE(r),i=xH(n).concat(RH(n));return fE(i,function(a){(!vv||qO(AO,n,a))&&dE(t,a,n[a])}),t},bke=function(t,r){return r===void 0?gv(t):OO(gv(t),r)},AO=function(t){var r=PO(t),n=qO(_ke,this,r);return this===ns&&mi(bl,r)&&!mi(L_,r)?!1:n||!mi(this,r)||!mi(bl,r)||mi(this,eo)&&this[eo][r]?n:!0},MH=function(t,r){var n=hE(t),i=PO(r);if(!(n===ns&&mi(bl,i)&&!mi(L_,i))){var a=CH(n,i);return a&&mi(bl,i)&&!(mi(n,eo)&&n[eo][i])&&(a.enumerable=!0),a}},OH=function(t){var r=AH(hE(t)),n=[];return fE(r,function(i){!mi(bl,i)&&!mi(TH,i)&&qH(n,i)}),n},RH=function(e){var t=e===ns,r=AH(t?L_:hE(e)),n=[];return fE(r,function(i){mi(bl,i)&&(!t||mi(ns,i))&&qH(n,bl[i])}),n};mv||(Wf=function(){if(ike(O_,this))throw new yke("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:ake(arguments[0]),r=yH(t),n=function(i){var a=this===void 0?D_:this;a===ns&&qO(n,L_,i),mi(a,eo)&&mi(a[eo],r)&&(a[eo][r]=!1);var h=TO(1,i);try{CO(a,r,h)}catch(p){if(!(p instanceof gke))throw p;PH(a,r,h)}};return vv&&IO&&CO(ns,r,{configurable:!0,set:n}),EO(r,t)},O_=Wf[R_],bO(O_,"toString",function(){return _H(this).tag}),bO(Wf,"withoutSetter",function(e){return EO(yH(e),e)}),SH.f=AO,EH.f=dE,uke.f=OO,wH.f=MH,oke.f=bH.f=OH,ske.f=RH,fke.f=function(e){return EO(hke(e),e)},vv&&(lke(O_,"description",{configurable:!0,get:function(){return _H(this).description}}),rke||bO(ns,"propertyIsEnumerable",AO,{unsafe:!0})));cE({global:!0,constructor:!0,wrap:!0,forced:!mv,sham:!mv},{Symbol:Wf});fE(xH(xke),function(e){pke(e)});cE({target:pE,stat:!0,forced:!mv},{useSetter:function(){IO=!0},useSimple:function(){IO=!1}});cE({target:"Object",stat:!0,forced:!mv,sham:!vv},{create:bke,defineProperty:dE,defineProperties:OO,getOwnPropertyDescriptor:MH});cE({target:"Object",stat:!0,forced:!mv},{getOwnPropertyNames:OH});dke();vke(Wf,pE);TH[eo]=!0});var RO=S((MBt,LH)=>{"use strict";var wke=ih();LH.exports=wke&&!!Symbol.for&&!!Symbol.keyFor});var NH=S(()=>{"use strict";var Eke=K(),Ske=St(),Tke=kt(),Ike=qt(),kH=_l(),Cke=RO(),DO=kH("string-to-symbol-registry"),Ake=kH("symbol-to-string-registry");Eke({target:"Symbol",stat:!0,forced:!Cke},{for:function(e){var t=Ike(e);if(Tke(DO,t))return DO[t];var r=Ske("Symbol")(t);return DO[t]=r,Ake[r]=t,r}})});var zH=S(()=>{"use strict";var qke=K(),Pke=kt(),Mke=yl(),Oke=ah(),Rke=_l(),Dke=RO(),FH=Rke("symbol-to-string-registry");qke({target:"Symbol",stat:!0,forced:!Dke},{keyFor:function(t){if(!Mke(t))throw new TypeError(Oke(t)+" is not a symbol");if(Pke(FH,t))return FH[t]}})});var aa=S((kBt,VH)=>{"use strict";var Lke=lv(),UH=Function.prototype,jH=UH.apply,BH=UH.call;VH.exports=typeof Reflect=="object"&&Reflect.apply||(Lke?BH.bind(jH):function(){return BH.apply(jH,arguments)})});var LO=S((NBt,HH)=>{"use strict";var kke=Oe(),$H=Fs(),Nke=Ot(),GH=Oi(),Fke=qt(),WH=kke([].push);HH.exports=function(e){if(Nke(e))return e;if($H(e)){for(var t=e.length,r=[],n=0;n<t;n++){var i=e[n];typeof i=="string"?WH(r,i):(typeof i=="number"||GH(i)==="Number"||GH(i)==="String")&&WH(r,Fke(i))}var a=r.length,h=!0;return function(p,g){if(h)return h=!1,g;if($H(this))return g;for(var w=0;w<a;w++)if(r[w]===p)return g}}}});var kO=S(()=>{"use strict";var zke=K(),tZ=St(),rZ=aa(),jke=Qe(),k_=Oe(),nZ=Ne(),ZH=Ot(),KH=yl(),iZ=Qa(),Bke=LO(),Uke=ih(),Vke=String,lh=tZ("JSON","stringify"),vE=k_(/./.exec),XH=k_("".charAt),$ke=k_("".charCodeAt),Gke=k_("".replace),Wke=k_(1 .toString),Hke=/[\uD800-\uDFFF]/g,YH=/^[\uD800-\uDBFF]$/,JH=/^[\uDC00-\uDFFF]$/,QH=!Uke||nZ(function(){var e=tZ("Symbol")("stringify detection");return lh([e])!=="[null]"||lh({a:e})!=="{}"||lh(Object(e))!=="{}"}),eZ=nZ(function(){return lh("\uDF06\uD834")!=="\"\\udf06\\ud834\""||lh("\uDEAD")!=="\"\\udead\""}),Zke=function(e,t){var r=iZ(arguments),n=Bke(t);if(!(!ZH(n)&&(e===void 0||KH(e))))return r[1]=function(i,a){if(ZH(n)&&(a=jke(n,this,Vke(i),a)),!KH(a))return a},rZ(lh,null,r)},Kke=function(e,t,r){var n=XH(r,t-1),i=XH(r,t+1);return vE(YH,e)&&!vE(JH,i)||vE(JH,e)&&!vE(YH,n)?"\\u"+Wke($ke(e,0),16):e};lh&&zke({target:"JSON",stat:!0,arity:3,forced:QH||eZ},{stringify:function(t,r,n){var i=iZ(arguments),a=rZ(QH?Zke:lh,null,i);return eZ&&typeof a=="string"?Gke(a,Hke,Kke):a}})});var oZ=S(()=>{"use strict";var Xke=K(),Yke=ih(),Jke=Ne(),aZ=q_(),Qke=Bt(),eNe=!Yke||Jke(function(){aZ.f(1)});Xke({target:"Object",stat:!0,forced:eNe},{getOwnPropertySymbols:function(t){var r=aZ.f;return r?r(Qke(t)):[]}})});var sZ=S(()=>{"use strict";DH();NH();zH();kO();oZ()});var dZ=S(()=>{"use strict";var tNe=K(),rNe=dt(),nNe=Ze(),mE=Oe(),iNe=kt(),aNe=Ot(),oNe=Ri(),sNe=qt(),uNe=Wr(),lNe=$f(),wl=nNe.Symbol,Zf=wl&&wl.prototype;rNe&&aNe(wl)&&(!("description"in Zf)||wl().description!==void 0)&&(NO={},N_=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:sNe(arguments[0]),r=oNe(Zf,this)?new wl(t):t===void 0?wl():wl(t);return t===""&&(NO[r]=!0),r},lNe(N_,wl),N_.prototype=Zf,Zf.constructor=N_,uZ=String(wl("description detection"))==="Symbol(description detection)",lZ=mE(Zf.valueOf),cZ=mE(Zf.toString),hZ=/^Symbol\((.*)\)[^)]+$/,fZ=mE("".replace),pZ=mE("".slice),uNe(Zf,"description",{configurable:!0,get:function(){var t=lZ(this);if(iNe(NO,t))return"";var r=cZ(t),n=uZ?pZ(r,7,-1):fZ(r,hZ,"$1");return n===""?void 0:n}}),tNe({global:!0,constructor:!0,forced:!0},{Symbol:N_}));var NO,N_,uZ,lZ,cZ,hZ,fZ,pZ});var vZ=S(()=>{"use strict";var cNe=cn();cNe("asyncIterator")});var mZ=S(()=>{"use strict";var hNe=cn();hNe("hasInstance")});var gZ=S(()=>{"use strict";var fNe=cn();fNe("isConcatSpreadable")});var yZ=S(()=>{"use strict";var pNe=cn();pNe("iterator")});var _Z=S(()=>{"use strict";var dNe=cn();dNe("match")});var xZ=S(()=>{"use strict";var vNe=cn();vNe("matchAll")});var bZ=S(()=>{"use strict";var mNe=cn();mNe("replace")});var wZ=S(()=>{"use strict";var gNe=cn();gNe("search")});var EZ=S(()=>{"use strict";var yNe=cn();yNe("species")});var SZ=S(()=>{"use strict";var _Ne=cn();_Ne("split")});var TZ=S(()=>{"use strict";var xNe=cn(),bNe=_O();xNe("toPrimitive");bNe()});var IZ=S(()=>{"use strict";var wNe=St(),ENe=cn(),SNe=Aa();ENe("toStringTag");SNe(wNe("Symbol"),"Symbol")});var CZ=S(()=>{"use strict";var TNe=cn();TNe("unscopables")});var F_=S((y3t,AZ)=>{"use strict";var INe=Oe(),CNe=Et();AZ.exports=function(e,t,r){try{return INe(CNe(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(n){}}});var FO=S((_3t,qZ)=>{"use strict";var ANe=It();qZ.exports=function(e){return ANe(e)||e===null}});var zO=S((x3t,PZ)=>{"use strict";var qNe=FO(),PNe=String,MNe=TypeError;PZ.exports=function(e){if(qNe(e))return e;throw new MNe("Can't set "+PNe(e)+" as a prototype")}});var is=S((b3t,MZ)=>{"use strict";var ONe=F_(),RNe=It(),DNe=Br(),LNe=zO();MZ.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},r;try{r=ONe(Object.prototype,"__proto__","set"),r(t,[]),e=t instanceof Array}catch(n){}return function(i,a){return DNe(i),LNe(a),RNe(i)&&(e?r(i,a):i.__proto__=a),i}}():void 0)});var jO=S((w3t,OZ)=>{"use strict";var kNe=Fr().f;OZ.exports=function(e,t,r){r in e||kNe(e,r,{configurable:!0,get:function(){return t[r]},set:function(n){t[r]=n}})}});var ch=S((E3t,DZ)=>{"use strict";var NNe=Ot(),FNe=It(),RZ=is();DZ.exports=function(e,t,r){var n,i;return RZ&&NNe(n=t.constructor)&&n!==r&&FNe(i=n.prototype)&&i!==r.prototype&&RZ(e,i),e}});var Kf=S((S3t,LZ)=>{"use strict";var zNe=qt();LZ.exports=function(e,t){return e===void 0?arguments.length<2?"":t:zNe(e)}});var BO=S((T3t,kZ)=>{"use strict";var jNe=It(),BNe=zn();kZ.exports=function(e,t){jNe(t)&&"cause"in t&&BNe(e,"cause",t.cause)}});var gE=S((I3t,zZ)=>{"use strict";var UNe=Oe(),NZ=Error,VNe=UNe("".replace),$Ne=function(e){return String(new NZ(e).stack)}("zxcasd"),FZ=/\n\s*at [^:]*:[^\n]*/,GNe=FZ.test($Ne);zZ.exports=function(e,t){if(GNe&&typeof e=="string"&&!NZ.prepareStackTrace)for(;t--;)e=VNe(e,FZ,"");return e}});var UO=S((C3t,jZ)=>{"use strict";var WNe=Ne(),HNe=Xa();jZ.exports=!WNe(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",HNe(1,7)),e.stack!==7):!0})});var yE=S((A3t,UZ)=>{"use strict";var ZNe=zn(),KNe=gE(),XNe=UO(),BZ=Error.captureStackTrace;UZ.exports=function(e,t,r,n){XNe&&(BZ?BZ(e,t):ZNe(e,"stack",KNe(r,n)))}});var VO=S((q3t,KZ)=>{"use strict";var VZ=St(),YNe=kt(),$Z=zn(),JNe=Ri(),GZ=is(),WZ=$f(),HZ=jO(),QNe=ch(),eFe=Kf(),tFe=BO(),rFe=yE(),nFe=dt(),ZZ=jt();KZ.exports=function(e,t,r,n){var i="stackTraceLimit",a=n?2:1,h=e.split("."),p=h[h.length-1],g=VZ.apply(null,h);if(g){var w=g.prototype;if(!ZZ&&YNe(w,"cause")&&delete w.cause,!r)return g;var E=VZ("Error"),q=t(function(P,k){var W=eFe(n?k:P,void 0),Q=n?new g(P):new g;return W!==void 0&&$Z(Q,"message",W),rFe(Q,q,Q.stack,2),this&&JNe(w,this)&&QNe(Q,this,q),arguments.length>a&&tFe(Q,arguments[a]),Q});if(q.prototype=w,p!=="Error"?GZ?GZ(q,E):WZ(q,E,{name:!0}):nFe&&i in g&&(HZ(q,g,i),HZ(q,g,"prepareStackTrace")),WZ(q,g),!ZZ)try{w.name!==p&&$Z(w,"name",p),w.constructor=q}catch(P){}return q}}});var QZ=S(()=>{"use strict";var YZ=K(),iFe=Ze(),gu=aa(),JZ=VO(),$O="WebAssembly",XZ=iFe[$O],_E=new Error("e",{cause:7}).cause!==7,Xf=function(e,t){var r={};r[e]=JZ(e,t,_E),YZ({global:!0,constructor:!0,arity:1,forced:_E},r)},GO=function(e,t){if(XZ&&XZ[e]){var r={};r[e]=JZ($O+"."+e,t,_E),YZ({target:$O,stat:!0,constructor:!0,arity:1,forced:_E},r)}};Xf("Error",function(e){return function(r){return gu(e,this,arguments)}});Xf("EvalError",function(e){return function(r){return gu(e,this,arguments)}});Xf("RangeError",function(e){return function(r){return gu(e,this,arguments)}});Xf("ReferenceError",function(e){return function(r){return gu(e,this,arguments)}});Xf("SyntaxError",function(e){return function(r){return gu(e,this,arguments)}});Xf("TypeError",function(e){return function(r){return gu(e,this,arguments)}});Xf("URIError",function(e){return function(r){return gu(e,this,arguments)}});GO("CompileError",function(e){return function(r){return gu(e,this,arguments)}});GO("LinkError",function(e){return function(r){return gu(e,this,arguments)}});GO("RuntimeError",function(e){return function(r){return gu(e,this,arguments)}})});var WO=S((O3t,tK)=>{"use strict";var aFe=dt(),oFe=Ne(),sFe=Ye(),eK=Kf(),xE=Error.prototype.toString,uFe=oFe(function(){if(aFe){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if(xE.call(e)!=="true")return!0}return xE.call({message:1,name:2})!=="2: 1"||xE.call({})!=="Error"});tK.exports=uFe?function(){var t=sFe(this),r=eK(t.name,"Error"),n=eK(t.message);return r?n?r+": "+n:r:n}:xE});var iK=S(()=>{"use strict";var lFe=br(),rK=WO(),nK=Error.prototype;nK.toString!==rK&&lFe(nK,"toString",rK)});var bE=S((L3t,aK)=>{"use strict";var cFe=Ne();aK.exports=!cFe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var jn=S((k3t,sK)=>{"use strict";var hFe=kt(),fFe=Ot(),pFe=Bt(),dFe=I_(),vFe=bE(),oK=dFe("IE_PROTO"),HO=Object,mFe=HO.prototype;sK.exports=vFe?HO.getPrototypeOf:function(e){var t=pFe(e);if(hFe(t,oK))return t[oK];var r=t.constructor;return fFe(r)&&t instanceof r?r.prototype:t instanceof HO?mFe:null}});var Yf=S((N3t,uK)=>{"use strict";uK.exports={}});var wE=S((F3t,lK)=>{"use strict";var gFe=yt(),yFe=Yf(),_Fe=gFe("iterator"),xFe=Array.prototype;lK.exports=function(e){return e!==void 0&&(yFe.Array===e||xFe[_Fe]===e)}});var yu=S((z3t,hK)=>{"use strict";var bFe=Ja(),cK=In(),wFe=Nn(),EFe=Yf(),SFe=yt(),TFe=SFe("iterator");hK.exports=function(e){if(!wFe(e))return cK(e,TFe)||cK(e,"@@iterator")||EFe[bFe(e)]}});var hh=S((j3t,fK)=>{"use strict";var IFe=Qe(),CFe=Et(),AFe=Ye(),qFe=ah(),PFe=yu(),MFe=TypeError;fK.exports=function(e,t){var r=arguments.length<2?PFe(e):t;if(CFe(r))return AFe(IFe(r,e));throw new MFe(qFe(e)+" is not iterable")}});var El=S((B3t,dK)=>{"use strict";var OFe=Qe(),pK=Ye(),RFe=In();dK.exports=function(e,t,r){var n,i;pK(e);try{if(n=RFe(e,"return"),!n){if(t==="throw")throw r;return r}n=OFe(n,e)}catch(a){i=!0,n=a}if(t==="throw")throw r;if(i)throw n;return pK(n),r}});var hn=S((U3t,yK)=>{"use strict";var DFe=Pr(),LFe=Qe(),kFe=Ye(),NFe=ah(),FFe=wE(),zFe=Yt(),vK=Ri(),jFe=hh(),BFe=yu(),mK=El(),UFe=TypeError,EE=function(e,t){this.stopped=e,this.result=t},gK=EE.prototype;yK.exports=function(e,t,r){var n=r&&r.that,i=!!(r&&r.AS_ENTRIES),a=!!(r&&r.IS_RECORD),h=!!(r&&r.IS_ITERATOR),p=!!(r&&r.INTERRUPTED),g=DFe(t,n),w,E,q,P,k,W,Q,$=function(Z){return w&&mK(w,"normal",Z),new EE(!0,Z)},V=function(Z){return i?(kFe(Z),p?g(Z[0],Z[1],$):g(Z[0],Z[1])):p?g(Z,$):g(Z)};if(a)w=e.iterator;else if(h)w=e;else{if(E=BFe(e),!E)throw new UFe(NFe(e)+" is not iterable");if(FFe(E)){for(q=0,P=zFe(e);P>q;q++)if(k=V(e[q]),k&&vK(gK,k))return k;return new EE(!1)}w=jFe(e,E)}for(W=a?e.next:w.next;!(Q=LFe(W,w)).done;){try{k=V(Q.value)}catch(Z){mK(w,"throw",Z)}if(typeof k=="object"&&k&&vK(gK,k))return k}return new EE(!1)}});var xK=S(()=>{"use strict";var VFe=K(),$Fe=Ri(),GFe=jn(),SE=is(),WFe=$f(),_K=Cn(),ZO=zn(),KO=Xa(),HFe=BO(),ZFe=yE(),KFe=hn(),XFe=Kf(),YFe=yt(),JFe=YFe("toStringTag"),TE=Error,QFe=[].push,yv=function(t,r){var n=$Fe(XO,this),i;SE?i=SE(new TE,n?GFe(this):XO):(i=n?this:_K(XO),ZO(i,JFe,"Error")),r!==void 0&&ZO(i,"message",XFe(r)),ZFe(i,yv,i.stack,1),arguments.length>2&&HFe(i,arguments[2]);var a=[];return KFe(t,QFe,{that:a}),ZO(i,"errors",a),i};SE?SE(yv,TE):WFe(yv,TE,{name:!0});var XO=yv.prototype=_K(TE.prototype,{constructor:KO(1,yv),message:KO(1,""),name:KO(1,"AggregateError")});VFe({global:!0,constructor:!0,arity:2},{AggregateError:yv})});var YO=S(()=>{"use strict";xK()});var SK=S(()=>{"use strict";var eze=K(),tze=St(),rze=aa(),bK=Ne(),nze=VO(),JO="AggregateError",wK=tze(JO),EK=!bK(function(){return wK([1]).errors[0]!==1})&&bK(function(){return wK([1],JO,{cause:7}).cause!==7});eze({global:!0,constructor:!0,arity:2,forced:EK},{AggregateError:nze(JO,function(e){return function(r,n){return rze(e,this,arguments)}},EK,!0)})});var fn=S((K3t,TK)=>{"use strict";var ize=yt(),aze=Cn(),oze=Fr().f,QO=ize("unscopables"),eR=Array.prototype;eR[QO]===void 0&&oze(eR,QO,{configurable:!0,value:aze(null)});TK.exports=function(e){eR[QO][e]=!0}});var tR=S(()=>{"use strict";var sze=K(),uze=Bt(),lze=Yt(),cze=Gr(),hze=fn();sze({target:"Array",proto:!0},{at:function(t){var r=uze(this),n=lze(r),i=cze(t),a=i>=0?i:n+i;return a<0||a>=n?void 0:r[a]}});hze("at")});var fh=S((J3t,IK)=>{"use strict";var fze=TypeError,pze=9007199254740991;IK.exports=function(e){if(e>pze)throw fze("Maximum allowed index exceeded");return e}});var as=S((Q3t,CK)=>{"use strict";var dze=dt(),vze=Fr(),mze=Xa();CK.exports=function(e,t,r){dze?vze.f(e,t,mze(0,r)):e[t]=r}});var _v=S((e4t,AK)=>{"use strict";var gze=Ne(),yze=yt(),_ze=vu(),xze=yze("species");AK.exports=function(e){return _ze>=51||!gze(function(){var t=[],r=t.constructor={};return r[xze]=function(){return{foo:1}},t[e](Boolean).foo!==1})}});var OK=S(()=>{"use strict";var bze=K(),wze=Ne(),Eze=Fs(),Sze=It(),Tze=Bt(),Ize=Yt(),qK=fh(),PK=as(),Cze=dv(),Aze=_v(),qze=yt(),Pze=vu(),MK=qze("isConcatSpreadable"),Mze=Pze>=51||!wze(function(){var e=[];return e[MK]=!1,e.concat()[0]!==e}),Oze=function(e){if(!Sze(e))return!1;var t=e[MK];return t!==void 0?!!t:Eze(e)},Rze=!Mze||!Aze("concat");bze({target:"Array",proto:!0,arity:1,forced:Rze},{concat:function(t){var r=Tze(this),n=Cze(r,0),i=0,a,h,p,g,w;for(a=-1,p=arguments.length;a<p;a++)if(w=a===-1?r:arguments[a],Oze(w))for(g=Ize(w),qK(i+g),h=0;h<g;h++,i++)h in w&&PK(n,i,w[h]);else qK(i+1),PK(n,i++,w);return n.length=i,n}})});var z_=S((n4t,DK)=>{"use strict";var RK=ah(),Dze=TypeError;DK.exports=function(e,t){if(!delete e[t])throw new Dze("Cannot delete property "+RK(t)+" of "+RK(e))}});var nR=S((i4t,LK)=>{"use strict";var Lze=Bt(),rR=Ns(),kze=Yt(),Nze=z_(),Fze=Math.min;LK.exports=[].copyWithin||function(t,r){var n=Lze(this),i=kze(n),a=rR(t,i),h=rR(r,i),p=arguments.length>2?arguments[2]:void 0,g=Fze((p===void 0?i:rR(p,i))-h,i-a),w=1;for(h<a&&a<h+g&&(w=-1,h+=g-1,a+=g-1);g-->0;)h in n?n[a]=n[h]:Nze(n,a),a+=w,h+=w;return n}});var kK=S(()=>{"use strict";var zze=K(),jze=nR(),Bze=fn();zze({target:"Array",proto:!0},{copyWithin:jze});Bze("copyWithin")});var os=S((s4t,NK)=>{"use strict";var Uze=Ne();NK.exports=function(e,t){var r=[][e];return!!r&&Uze(function(){r.call(null,t||function(){return 1},1)})}});var FK=S(()=>{"use strict";var Vze=K(),$ze=An().every,Gze=os(),Wze=Gze("every");Vze({target:"Array",proto:!0,forced:!Wze},{every:function(t){return $ze(this,t,arguments.length>1?arguments[1]:void 0)}})});var IE=S((c4t,jK)=>{"use strict";var Hze=Bt(),zK=Ns(),Zze=Yt();jK.exports=function(t){for(var r=Hze(this),n=Zze(r),i=arguments.length,a=zK(i>1?arguments[1]:void 0,n),h=i>2?arguments[2]:void 0,p=h===void 0?n:zK(h,n);p>a;)r[a++]=t;return r}});var BK=S(()=>{"use strict";var Kze=K(),Xze=IE(),Yze=fn();Kze({target:"Array",proto:!0},{fill:Xze});Yze("fill")});var UK=S(()=>{"use strict";var Jze=K(),Qze=An().filter,eje=_v(),tje=eje("filter");Jze({target:"Array",proto:!0,forced:!tje},{filter:function(t){return Qze(this,t,arguments.length>1?arguments[1]:void 0)}})});var $K=S(()=>{"use strict";var rje=K(),nje=An().find,ije=fn(),iR="find",VK=!0;iR in[]&&Array(1)[iR](function(){VK=!1});rje({target:"Array",proto:!0,forced:VK},{find:function(t){return nje(this,t,arguments.length>1?arguments[1]:void 0)}});ije(iR)});var WK=S(()=>{"use strict";var aje=K(),oje=An().findIndex,sje=fn(),aR="findIndex",GK=!0;aR in[]&&Array(1)[aR](function(){GK=!1});aje({target:"Array",proto:!0,forced:GK},{findIndex:function(t){return oje(this,t,arguments.length>1?arguments[1]:void 0)}});sje(aR)});var j_=S((_4t,ZK)=>{"use strict";var uje=Pr(),lje=gl(),cje=Bt(),hje=Yt(),HK=function(e){var t=e===1;return function(r,n,i){for(var a=cje(r),h=lje(a),p=hje(h),g=uje(n,i),w,E;p-->0;)if(w=h[p],E=g(w,p,a),E)switch(e){case 0:return w;case 1:return p;}return t?-1:void 0}};ZK.exports={findLast:HK(0),findLastIndex:HK(1)}});var oR=S(()=>{"use strict";var fje=K(),pje=j_().findLast,dje=fn();fje({target:"Array",proto:!0},{findLast:function(t){return pje(this,t,arguments.length>1?arguments[1]:void 0)}});dje("findLast")});var sR=S(()=>{"use strict";var vje=K(),mje=j_().findLastIndex,gje=fn();vje({target:"Array",proto:!0},{findLastIndex:function(t){return mje(this,t,arguments.length>1?arguments[1]:void 0)}});gje("findLastIndex")});var uR=S((S4t,XK)=>{"use strict";var yje=Fs(),_je=Yt(),xje=fh(),bje=Pr(),KK=function(e,t,r,n,i,a,h,p){for(var g=i,w=0,E=h?bje(h,p):!1,q,P;w<n;)w in r&&(q=E?E(r[w],w,t):r[w],a>0&&yje(q)?(P=_je(q),g=KK(e,t,q,P,g,a-1)-1):(xje(g+1),e[g]=q),g++),w++;return g};XK.exports=KK});var YK=S(()=>{"use strict";var wje=K(),Eje=uR(),Sje=Bt(),Tje=Yt(),Ije=Gr(),Cje=dv();wje({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,r=Sje(this),n=Tje(r),i=Cje(r,0);return i.length=Eje(i,r,r,n,0,t===void 0?1:Ije(t)),i}})});var JK=S(()=>{"use strict";var Aje=K(),qje=uR(),Pje=Et(),Mje=Bt(),Oje=Yt(),Rje=dv();Aje({target:"Array",proto:!0},{flatMap:function(t){var r=Mje(this),n=Oje(r),i;return Pje(t),i=Rje(r,0),i.length=qje(i,r,r,n,0,1,t,arguments.length>1?arguments[1]:void 0),i}})});var lR=S((q4t,QK)=>{"use strict";var Dje=An().forEach,Lje=os(),kje=Lje("forEach");QK.exports=kje?[].forEach:function(t){return Dje(this,t,arguments.length>1?arguments[1]:void 0)}});var t9=S(()=>{"use strict";var Nje=K(),e9=lR();Nje({target:"Array",proto:!0,forced:[].forEach!==e9},{forEach:e9})});var CE=S((O4t,r9)=>{"use strict";var Fje=Ye(),zje=El();r9.exports=function(e,t,r,n){try{return n?t(Fje(r)[0],r[1]):t(r)}catch(i){zje(e,"throw",i)}}});var cR=S((R4t,a9)=>{"use strict";var jje=Pr(),Bje=Qe(),Uje=Bt(),Vje=CE(),$je=wE(),Gje=zs(),Wje=Yt(),n9=as(),Hje=hh(),Zje=yu(),i9=Array;a9.exports=function(t){var r=Uje(t),n=Gje(this),i=arguments.length,a=i>1?arguments[1]:void 0,h=a!==void 0;h&&(a=jje(a,i>2?arguments[2]:void 0));var p=Zje(r),g=0,w,E,q,P,k,W;if(p&&!(this===i9&&$je(p)))for(E=n?new this:[],P=Hje(r,p),k=P.next;!(q=Bje(k,P)).done;g++)W=h?Vje(P,a,[q.value,g],!0):q.value,n9(E,g,W);else for(w=Wje(r),E=n?new this(w):i9(w);w>g;g++)W=h?a(r[g],g):r[g],n9(E,g,W);return E.length=g,E}});var B_=S((D4t,l9)=>{"use strict";var Kje=yt(),s9=Kje("iterator"),u9=!1;try{o9=0,hR={next:function(){return{done:!!o9++}},return:function(){u9=!0}},hR[s9]=function(){return this},Array.from(hR,function(){throw 2})}catch(e){}var o9,hR;l9.exports=function(e,t){try{if(!t&&!u9)return!1}catch(i){return!1}var r=!1;try{var n={};n[s9]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(i){}return r}});var c9=S(()=>{"use strict";var Xje=K(),Yje=cR(),Jje=B_(),Qje=!Jje(function(e){Array.from(e)});Xje({target:"Array",stat:!0,forced:Qje},{from:Yje})});var h9=S(()=>{"use strict";var eBe=K(),tBe=fv().includes,rBe=Ne(),nBe=fn(),iBe=rBe(function(){return!Array(1).includes()});eBe({target:"Array",proto:!0,forced:iBe},{includes:function(t){return tBe(this,t,arguments.length>1?arguments[1]:void 0)}});nBe("includes")});var p9=S(()=>{"use strict";var aBe=K(),oBe=xl(),sBe=fv().indexOf,uBe=os(),fR=oBe([].indexOf),f9=!!fR&&1/fR([1],1,-0)<0,lBe=f9||!uBe("indexOf");aBe({target:"Array",proto:!0,forced:lBe},{indexOf:function(t){var r=arguments.length>1?arguments[1]:void 0;return f9?fR(this,t,r)||0:sBe(this,t,r)}})});var d9=S(()=>{"use strict";var cBe=K(),hBe=Fs();cBe({target:"Array",stat:!0},{isArray:hBe})});var Jf=S((V4t,g9)=>{"use strict";var fBe=Ne(),pBe=Ot(),dBe=It(),vBe=Cn(),v9=jn(),mBe=br(),gBe=yt(),yBe=jt(),vR=gBe("iterator"),m9=!1,Sl,pR,dR;[].keys&&(dR=[].keys(),"next"in dR?(pR=v9(v9(dR)),pR!==Object.prototype&&(Sl=pR)):m9=!0);var _Be=!dBe(Sl)||fBe(function(){var e={};return Sl[vR].call(e)!==e});_Be?Sl={}:yBe&&(Sl=vBe(Sl));pBe(Sl[vR])||mBe(Sl,vR,function(){return this});g9.exports={IteratorPrototype:Sl,BUGGY_SAFARI_ITERATORS:m9}});var ph=S(($4t,y9)=>{"use strict";var xBe=Jf().IteratorPrototype,bBe=Cn(),wBe=Xa(),EBe=Aa(),SBe=Yf(),TBe=function(){return this};y9.exports=function(e,t,r,n){var i=t+" Iterator";return e.prototype=bBe(xBe,{next:wBe(+!n,r)}),EBe(e,i,!1,!0),SBe[i]=TBe,e}});var PE=S((G4t,A9)=>{"use strict";var IBe=K(),CBe=Qe(),AE=jt(),I9=Uf(),ABe=Ot(),qBe=ph(),_9=jn(),x9=is(),PBe=Aa(),MBe=zn(),mR=br(),OBe=yt(),b9=Yf(),C9=Jf(),RBe=I9.PROPER,DBe=I9.CONFIGURABLE,w9=C9.IteratorPrototype,qE=C9.BUGGY_SAFARI_ITERATORS,U_=OBe("iterator"),E9="keys",V_="values",S9="entries",T9=function(){return this};A9.exports=function(e,t,r,n,i,a,h){qBe(r,t,n);var p=function(V){if(V===i&&P)return P;if(!qE&&V&&V in E)return E[V];switch(V){case E9:return function(){return new r(this,V)};case V_:return function(){return new r(this,V)};case S9:return function(){return new r(this,V)};}return function(){return new r(this)}},g=t+" Iterator",w=!1,E=e.prototype,q=E[U_]||E["@@iterator"]||i&&E[i],P=!qE&&q||p(i),k=t==="Array"&&E.entries||q,W,Q,$;if(k&&(W=_9(k.call(new e)),W!==Object.prototype&&W.next&&(!AE&&_9(W)!==w9&&(x9?x9(W,w9):ABe(W[U_])||mR(W,U_,T9)),PBe(W,g,!0,!0),AE&&(b9[g]=T9))),RBe&&i===V_&&q&&q.name!==V_&&(!AE&&DBe?MBe(E,"name",V_):(w=!0,P=function(){return CBe(q,this)})),i)if(Q={values:p(V_),keys:a?P:p(E9),entries:p(S9)},h)for($ in Q)(qE||w||!($ in E))&&mR(E,$,Q[$]);else IBe({target:t,proto:!0,forced:qE||w},Q);return(!AE||h)&&E[U_]!==P&&mR(E,U_,P,{name:i}),b9[t]=P,Q}});var gi=S((W4t,q9)=>{"use strict";q9.exports=function(e,t){return{value:e,done:t}}});var $_=S((H4t,D9)=>{"use strict";var LBe=Fn(),gR=fn(),P9=Yf(),O9=dr(),kBe=Fr().f,NBe=PE(),ME=gi(),FBe=jt(),zBe=dt(),R9="Array Iterator",jBe=O9.set,BBe=O9.getterFor(R9);D9.exports=NBe(Array,"Array",function(e,t){jBe(this,{type:R9,target:LBe(e),index:0,kind:t})},function(){var e=BBe(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,ME(void 0,!0);switch(e.kind){case"keys":return ME(r,!1);case"values":return ME(t[r],!1);}return ME([r,t[r]],!1)},"values");var M9=P9.Arguments=P9.Array;gR("keys");gR("values");gR("entries");if(!FBe&&zBe&&M9.name!=="values")try{kBe(M9,"name",{value:"values"})}catch(e){}});var L9=S(()=>{"use strict";var UBe=K(),VBe=Oe(),$Be=gl(),GBe=Fn(),WBe=os(),HBe=VBe([].join),ZBe=$Be!==Object,KBe=ZBe||!WBe("join",",");UBe({target:"Array",proto:!0,forced:KBe},{join:function(t){return HBe(GBe(this),t===void 0?",":t)}})});var _R=S((X4t,N9)=>{"use strict";var XBe=aa(),YBe=Fn(),JBe=Gr(),QBe=Yt(),e3e=os(),t3e=Math.min,yR=[].lastIndexOf,k9=!!yR&&1/[1].lastIndexOf(1,-0)<0,r3e=e3e("lastIndexOf"),n3e=k9||!r3e;N9.exports=n3e?function(t){if(k9)return XBe(yR,this,arguments)||0;var r=YBe(this),n=QBe(r);if(n===0)return-1;var i=n-1;for(arguments.length>1&&(i=t3e(i,JBe(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in r&&r[i]===t)return i||0;return-1}:yR});var z9=S(()=>{"use strict";var i3e=K(),F9=_R();i3e({target:"Array",proto:!0,forced:F9!==[].lastIndexOf},{lastIndexOf:F9})});var j9=S(()=>{"use strict";var a3e=K(),o3e=An().map,s3e=_v(),u3e=s3e("map");a3e({target:"Array",proto:!0,forced:!u3e},{map:function(t){return o3e(this,t,arguments.length>1?arguments[1]:void 0)}})});var U9=S(()=>{"use strict";var l3e=K(),c3e=Ne(),h3e=zs(),f3e=as(),B9=Array,p3e=c3e(function(){function e(){}return!(B9.of.call(e)instanceof e)});l3e({target:"Array",stat:!0,forced:p3e},{of:function(){for(var t=0,r=arguments.length,n=new(h3e(this)?this:B9)(r);r>t;)f3e(n,t,arguments[t++]);return n.length=r,n}})});var OE=S((nUt,V9)=>{"use strict";var d3e=dt(),v3e=Fs(),m3e=TypeError,g3e=Object.getOwnPropertyDescriptor,y3e=d3e&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();V9.exports=y3e?function(e,t){if(v3e(e)&&!g3e(e,"length").writable)throw new m3e("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}});var $9=S(()=>{"use strict";var _3e=K(),x3e=Bt(),b3e=Yt(),w3e=OE(),E3e=fh(),S3e=Ne(),T3e=S3e(function(){return[].push.call({length:4294967296},1)!==4294967297}),I3e=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},C3e=T3e||!I3e();_3e({target:"Array",proto:!0,arity:1,forced:C3e},{push:function(t){var r=x3e(this),n=b3e(r),i=arguments.length;E3e(n+i);for(var a=0;a<i;a++)r[n]=arguments[a],n++;return w3e(r,n),n}})});var G_=S((oUt,Z9)=>{"use strict";var A3e=Et(),q3e=Bt(),P3e=gl(),M3e=Yt(),G9=TypeError,W9="Reduce of empty array with no initial value",H9=function(e){return function(t,r,n,i){var a=q3e(t),h=P3e(a),p=M3e(a);if(A3e(r),p===0&&n<2)throw new G9(W9);var g=e?p-1:0,w=e?-1:1;if(n<2)for(;;){if(g in h){i=h[g],g+=w;break}if(g+=w,e?g<0:p<=g)throw new G9(W9)}for(;e?g>=0:p>g;g+=w)g in h&&(i=r(i,h[g],g,a));return i}};Z9.exports={left:H9(!1),right:H9(!0)}});var H_=S((sUt,K9)=>{"use strict";var W_=Ze(),O3e=Ds(),R3e=Oi(),RE=function(e){return O3e.slice(0,e.length)===e};K9.exports=function(){return RE("Bun/")?"BUN":RE("Cloudflare-Workers")?"CLOUDFLARE":RE("Deno/")?"DENO":RE("Node.js/")?"NODE":W_.Bun&&typeof Bun.version=="string"?"BUN":W_.Deno&&typeof Deno.version=="object"?"DENO":R3e(W_.process)==="process"?"NODE":W_.window&&W_.document?"BROWSER":"REST"}()});var Qf=S((uUt,X9)=>{"use strict";var D3e=H_();X9.exports=D3e==="NODE"});var J9=S(()=>{"use strict";var L3e=K(),k3e=G_().left,N3e=os(),Y9=vu(),F3e=Qf(),z3e=!F3e&&Y9>79&&Y9<83,j3e=z3e||!N3e("reduce");L3e({target:"Array",proto:!0,forced:j3e},{reduce:function(t){var r=arguments.length;return k3e(this,t,r,r>1?arguments[1]:void 0)}})});var e7=S(()=>{"use strict";var B3e=K(),U3e=G_().right,V3e=os(),Q9=vu(),$3e=Qf(),G3e=!$3e&&Q9>79&&Q9<83,W3e=G3e||!V3e("reduceRight");B3e({target:"Array",proto:!0,forced:W3e},{reduceRight:function(t){return U3e(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var r7=S(()=>{"use strict";var H3e=K(),Z3e=Oe(),K3e=Fs(),X3e=Z3e([].reverse),t7=[1,2];H3e({target:"Array",proto:!0,forced:String(t7)===String(t7.reverse())},{reverse:function(){return K3e(this)&&(this.length=this.length),X3e(this)}})});var a7=S(()=>{"use strict";var Y3e=K(),n7=Fs(),J3e=zs(),Q3e=It(),i7=Ns(),e4e=Yt(),t4e=Fn(),r4e=as(),n4e=yt(),i4e=_v(),a4e=Qa(),o4e=i4e("slice"),s4e=n4e("species"),xR=Array,u4e=Math.max;Y3e({target:"Array",proto:!0,forced:!o4e},{slice:function(t,r){var n=t4e(this),i=e4e(n),a=i7(t,i),h=i7(r===void 0?i:r,i),p,g,w;if(n7(n)&&(p=n.constructor,J3e(p)&&(p===xR||n7(p.prototype))?p=void 0:Q3e(p)&&(p=p[s4e],p===null&&(p=void 0)),p===xR||p===void 0))return a4e(n,a,h);for(g=new(p===void 0?xR:p)(u4e(h-a,0)),w=0;a<h;a++,w++)a in n&&r4e(g,w,n[a]);return g.length=w,g}})});var o7=S(()=>{"use strict";var l4e=K(),c4e=An().some,h4e=os(),f4e=h4e("some");l4e({target:"Array",proto:!0,forced:!f4e},{some:function(t){return c4e(this,t,arguments.length>1?arguments[1]:void 0)}})});var DE=S((_Ut,u7)=>{"use strict";var s7=Qa(),p4e=Math.floor,bR=function(e,t){var r=e.length;if(r<8)for(var n=1,i,a;n<r;){for(a=n,i=e[n];a&&t(e[a-1],i)>0;)e[a]=e[--a];a!==n++&&(e[a]=i)}else for(var h=p4e(r/2),p=bR(s7(e,0,h),t),g=bR(s7(e,h),t),w=p.length,E=g.length,q=0,P=0;q<w||P<E;)e[q+P]=q<w&&P<E?t(p[q],g[P])<=0?p[q++]:g[P++]:q<w?p[q++]:g[P++];return e};u7.exports=bR});var wR=S((xUt,c7)=>{"use strict";var d4e=Ds(),l7=d4e.match(/firefox\/(\d+)/i);c7.exports=!!l7&&+l7[1]});var ER=S((bUt,h7)=>{"use strict";var v4e=Ds();h7.exports=/MSIE|Trident/.test(v4e)});var LE=S((wUt,p7)=>{"use strict";var m4e=Ds(),f7=m4e.match(/AppleWebKit\/(\d+)\./);p7.exports=!!f7&&+f7[1]});var w7=S(()=>{"use strict";var g4e=K(),x7=Oe(),y4e=Et(),_4e=Bt(),d7=Yt(),x4e=z_(),v7=qt(),SR=Ne(),b4e=DE(),w4e=os(),m7=wR(),E4e=ER(),g7=vu(),y7=LE(),dh=[],_7=x7(dh.sort),S4e=x7(dh.push),T4e=SR(function(){dh.sort(void 0)}),I4e=SR(function(){dh.sort(null)}),C4e=w4e("sort"),b7=!SR(function(){if(g7)return g7<70;if(!(m7&&m7>3)){if(E4e)return!0;if(y7)return y7<603;var e="",t,r,n,i;for(t=65;t<76;t++){switch(r=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2;}for(i=0;i<47;i++)dh.push({k:r+i,v:n})}for(dh.sort(function(a,h){return h.v-a.v}),i=0;i<dh.length;i++)r=dh[i].k.charAt(0),e.charAt(e.length-1)!==r&&(e+=r);return e!=="DGBEFHACIJK"}}),A4e=T4e||!I4e||!C4e||!b7,q4e=function(e){return function(t,r){return r===void 0?-1:t===void 0?1:e!==void 0?+e(t,r)||0:v7(t)>v7(r)?1:-1}};g4e({target:"Array",proto:!0,forced:A4e},{sort:function(t){t!==void 0&&y4e(t);var r=_4e(this);if(b7)return t===void 0?_7(r):_7(r,t);var n=[],i=d7(r),a,h;for(h=0;h<i;h++)h in r&&S4e(n,r[h]);for(b4e(n,q4e(t)),a=d7(n),h=0;h<a;)r[h]=n[h++];for(;h<i;)x4e(r,h++);return r}})});var vh=S((TUt,S7)=>{"use strict";var P4e=St(),M4e=Wr(),O4e=yt(),R4e=dt(),E7=O4e("species");S7.exports=function(e){var t=P4e(e);R4e&&t&&!t[E7]&&M4e(t,E7,{configurable:!0,get:function(){return this}})}});var T7=S(()=>{"use strict";var D4e=vh();D4e("Array")});var I7=S(()=>{"use strict";var L4e=K(),k4e=Bt(),N4e=Ns(),F4e=Gr(),z4e=Yt(),j4e=OE(),B4e=fh(),U4e=dv(),V4e=as(),TR=z_(),$4e=_v(),G4e=$4e("splice"),W4e=Math.max,H4e=Math.min;L4e({target:"Array",proto:!0,forced:!G4e},{splice:function(t,r){var n=k4e(this),i=z4e(n),a=N4e(t,i),h=arguments.length,p,g,w,E,q,P;for(h===0?p=g=0:h===1?(p=0,g=i-a):(p=h-2,g=H4e(W4e(F4e(r),0),i-a)),B4e(i+p-g),w=U4e(n,g),E=0;E<g;E++)q=a+E,q in n&&V4e(w,E,n[q]);if(w.length=g,p<g){for(E=a;E<i-g;E++)q=E+g,P=E+p,q in n?n[P]=n[q]:TR(n,P);for(E=i;E>i-g+p;E--)TR(n,E-1)}else if(p>g)for(E=i-g;E>a;E--)q=E+g-1,P=E+p-1,q in n?n[P]=n[q]:TR(n,P);for(E=0;E<p;E++)n[E+a]=arguments[E+2];return j4e(n,i-g+p),w}})});var IR=S((PUt,C7)=>{"use strict";var Z4e=Yt();C7.exports=function(e,t){for(var r=Z4e(e),n=new t(r),i=0;i<r;i++)n[i]=e[r-i-1];return n}});var CR=S(()=>{"use strict";var K4e=K(),X4e=IR(),Y4e=Fn(),J4e=fn(),Q4e=Array;K4e({target:"Array",proto:!0},{toReversed:function(){return X4e(Y4e(this),Q4e)}});J4e("toReversed")});var Tl=S((RUt,A7)=>{"use strict";var eUe=Yt();A7.exports=function(e,t,r){for(var n=0,i=arguments.length>2?r:eUe(t),a=new e(i);i>n;)a[n]=t[n++];return a}});var AR=S((DUt,q7)=>{"use strict";var tUe=Ze();q7.exports=function(e,t){var r=tUe[e],n=r&&r.prototype;return n&&n[t]}});var qR=S(()=>{"use strict";var rUe=K(),nUe=Oe(),iUe=Et(),aUe=Fn(),oUe=Tl(),sUe=AR(),uUe=fn(),lUe=Array,cUe=nUe(sUe("Array","sort"));rUe({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&iUe(t);var r=aUe(this),n=oUe(lUe,r);return cUe(n,t)}});uUe("toSorted")});var PR=S(()=>{"use strict";var hUe=K(),fUe=fn(),pUe=fh(),dUe=Yt(),vUe=Ns(),mUe=Fn(),gUe=Gr(),yUe=Array,_Ue=Math.max,xUe=Math.min;hUe({target:"Array",proto:!0},{toSpliced:function(t,r){var n=mUe(this),i=dUe(n),a=vUe(t,i),h=arguments.length,p=0,g,w,E,q;for(h===0?g=w=0:h===1?(g=0,w=i-a):(g=h-2,w=xUe(_Ue(gUe(r),0),i-a)),E=pUe(i+g-w),q=yUe(E);p<a;p++)q[p]=n[p];for(;p<a+g;p++)q[p]=arguments[p-a+2];for(;p<E;p++)q[p]=n[p+w-g];return q}});fUe("toSpliced")});var P7=S(()=>{"use strict";var bUe=fn();bUe("flat")});var M7=S(()=>{"use strict";var wUe=fn();wUe("flatMap")});var O7=S(()=>{"use strict";var EUe=K(),SUe=Bt(),TUe=Yt(),IUe=OE(),CUe=z_(),AUe=fh(),qUe=[].unshift(0)!==1,PUe=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},MUe=qUe||!PUe();EUe({target:"Array",proto:!0,arity:1,forced:MUe},{unshift:function(t){var r=SUe(this),n=TUe(r),i=arguments.length;if(i){AUe(n+i);for(var a=n;a--;){var h=a+i;a in r?r[h]=r[a]:CUe(r,h)}for(var p=0;p<i;p++)r[p]=arguments[p]}return IUe(r,n+i)}})});var MR=S((GUt,R7)=>{"use strict";var OUe=Yt(),RUe=Gr(),DUe=RangeError;R7.exports=function(e,t,r,n){var i=OUe(e),a=RUe(r),h=a<0?i+a:a;if(h>=i||h<0)throw new DUe("Incorrect index");for(var p=new t(i),g=0;g<i;g++)p[g]=g===h?n:e[g];return p}});var OR=S(()=>{"use strict";var LUe=K(),kUe=MR(),NUe=Fn(),FUe=Array;LUe({target:"Array",proto:!0},{with:function(e,t){return kUe(NUe(this),FUe,e,t)}})});var kE=S((ZUt,D7)=>{"use strict";D7.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var ss=S((KUt,L7)=>{"use strict";var zUe=br();L7.exports=function(e,t,r){for(var n in t)zUe(e,n,t[n],r);return e}});var oa=S((XUt,k7)=>{"use strict";var jUe=Ri(),BUe=TypeError;k7.exports=function(e,t){if(jUe(t,e))return e;throw new BUe("Incorrect invocation")}});var xv=S((YUt,N7)=>{"use strict";var UUe=Gr(),VUe=Ya(),$Ue=RangeError;N7.exports=function(e){if(e===void 0)return 0;var t=UUe(e),r=VUe(t);if(t!==r)throw new $Ue("Wrong length or index");return r}});var NE=S((JUt,F7)=>{"use strict";F7.exports=Math.sign||function(t){var r=+t;return r===0||r!==r?r:r<0?-1:1}});var RR=S((QUt,B7)=>{"use strict";var GUe=NE(),WUe=Math.abs,j7=2220446049250313e-31,z7=1/j7,HUe=function(e){return e+z7-z7};B7.exports=function(e,t,r,n){var i=+e,a=WUe(i),h=GUe(i);if(a<n)return h*HUe(a/n/t)*n*t;var p=(1+t/j7)*a,g=p-(p-a);return g>r||g!==g?h*(1/0):h*g}});var FE=S((e5t,U7)=>{"use strict";var ZUe=RR(),KUe=1.1920928955078125e-7,XUe=34028234663852886e22,YUe=11754943508222875e-54;U7.exports=Math.fround||function(t){return ZUe(t,KUe,XUe,YUe)}});var zE=S((t5t,V7)=>{"use strict";var JUe=Array,QUe=Math.abs,Il=Math.pow,e5e=Math.floor,t5e=Math.log,r5e=Math.LN2,n5e=function(e,t,r){var n=JUe(r),i=r*8-t-1,a=(1<<i)-1,h=a>>1,p=t===23?Il(2,-24)-Il(2,-77):0,g=e<0||e===0&&1/e<0?1:0,w=0,E,q,P;for(e=QUe(e),e!==e||e===1/0?(q=e!==e?1:0,E=a):(E=e5e(t5e(e)/r5e),P=Il(2,-E),e*P<1&&(E--,P*=2),E+h>=1?e+=p/P:e+=p*Il(2,1-h),e*P>=2&&(E++,P/=2),E+h>=a?(q=0,E=a):E+h>=1?(q=(e*P-1)*Il(2,t),E+=h):(q=e*Il(2,h-1)*Il(2,t),E=0));t>=8;)n[w++]=q&255,q/=256,t-=8;for(E=E<<t|q,i+=t;i>0;)n[w++]=E&255,E/=256,i-=8;return n[w-1]|=g*128,n},i5e=function(e,t){var r=e.length,n=r*8-t-1,i=(1<<n)-1,a=i>>1,h=n-7,p=r-1,g=e[p--],w=g&127,E;for(g>>=7;h>0;)w=w*256+e[p--],h-=8;for(E=w&(1<<-h)-1,w>>=-h,h+=t;h>0;)E=E*256+e[p--],h-=8;if(w===0)w=1-a;else{if(w===i)return E?NaN:g?-1/0:1/0;E+=Il(2,t),w-=a}return(g?-1:1)*E*Il(2,w-t)};V7.exports={pack:n5e,unpack:i5e}});var X_=S((r5t,oX)=>{"use strict";var $E=Ze(),FR=Oe(),DR=dt(),a5e=kE(),tX=Uf(),o5e=zn(),s5e=Wr(),$7=ss(),LR=Ne(),jE=oa(),u5e=Gr(),l5e=Ya(),UE=xv(),c5e=FE(),rX=zE(),h5e=jn(),G7=is(),f5e=IE(),p5e=Qa(),d5e=ch(),v5e=$f(),nX=Aa(),zR=dr(),m5e=tX.PROPER,W7=tX.CONFIGURABLE,wv="ArrayBuffer",GE="DataView",Ev="prototype",g5e="Wrong length",iX="Wrong index",H7=zR.getterFor(wv),K_=zR.getterFor(GE),Z7=zR.set,js=$E[wv],Oo=js,bv=Oo&&Oo[Ev],_u=$E[GE],ep=_u&&_u[Ev],K7=Object.prototype,y5e=$E.Array,VE=$E.RangeError,_5e=FR(f5e),x5e=FR([].reverse),aX=rX.pack,X7=rX.unpack,Y7=function(e){return[e&255]},J7=function(e){return[e&255,e>>8&255]},Q7=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},eX=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},b5e=function(e){return aX(c5e(e),23,4)},w5e=function(e){return aX(e,52,8)},BE=function(e,t,r){s5e(e[Ev],t,{configurable:!0,get:function(){return r(this)[t]}})},mh=function(e,t,r,n){var i=K_(e),a=UE(r),h=!!n;if(a+t>i.byteLength)throw new VE(iX);var p=i.bytes,g=a+i.byteOffset,w=p5e(p,g,g+t);return h?w:x5e(w)},gh=function(e,t,r,n,i,a){var h=K_(e),p=UE(r),g=n(+i),w=!!a;if(p+t>h.byteLength)throw new VE(iX);for(var E=h.bytes,q=p+h.byteOffset,P=0;P<t;P++)E[q+P]=g[w?P:t-P-1]};a5e?(kR=m5e&&js.name!==wv,!LR(function(){js(1)})||!LR(function(){new js(-1)})||LR(function(){return new js,new js(1.5),new js(NaN),js.length!==1||kR&&!W7})?(Oo=function(t){return jE(this,bv),d5e(new js(UE(t)),this,Oo)},Oo[Ev]=bv,bv.constructor=Oo,v5e(Oo,js)):kR&&W7&&o5e(js,"name",wv),G7&&h5e(ep)!==K7&&G7(ep,K7),Z_=new _u(new Oo(2)),NR=FR(ep.setInt8),Z_.setInt8(0,2147483648),Z_.setInt8(1,2147483649),(Z_.getInt8(0)||!Z_.getInt8(1))&&$7(ep,{setInt8:function(t,r){NR(this,t,r<<24>>24)},setUint8:function(t,r){NR(this,t,r<<24>>24)}},{unsafe:!0})):(Oo=function(t){jE(this,bv);var r=UE(t);Z7(this,{type:wv,bytes:_5e(y5e(r),0),byteLength:r}),DR||(this.byteLength=r,this.detached=!1)},bv=Oo[Ev],_u=function(t,r,n){jE(this,ep),jE(t,bv);var i=H7(t),a=i.byteLength,h=u5e(r);if(h<0||h>a)throw new VE("Wrong offset");if(n=n===void 0?a-h:l5e(n),h+n>a)throw new VE(g5e);Z7(this,{type:GE,buffer:t,byteLength:n,byteOffset:h,bytes:i.bytes}),DR||(this.buffer=t,this.byteLength=n,this.byteOffset=h)},ep=_u[Ev],DR&&(BE(Oo,"byteLength",H7),BE(_u,"buffer",K_),BE(_u,"byteLength",K_),BE(_u,"byteOffset",K_)),$7(ep,{getInt8:function(t){return mh(this,1,t)[0]<<24>>24},getUint8:function(t){return mh(this,1,t)[0]},getInt16:function(t){var r=mh(this,2,t,arguments.length>1?arguments[1]:!1);return(r[1]<<8|r[0])<<16>>16},getUint16:function(t){var r=mh(this,2,t,arguments.length>1?arguments[1]:!1);return r[1]<<8|r[0]},getInt32:function(t){return eX(mh(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return eX(mh(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return X7(mh(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return X7(mh(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,r){gh(this,1,t,Y7,r)},setUint8:function(t,r){gh(this,1,t,Y7,r)},setInt16:function(t,r){gh(this,2,t,J7,r,arguments.length>2?arguments[2]:!1)},setUint16:function(t,r){gh(this,2,t,J7,r,arguments.length>2?arguments[2]:!1)},setInt32:function(t,r){gh(this,4,t,Q7,r,arguments.length>2?arguments[2]:!1)},setUint32:function(t,r){gh(this,4,t,Q7,r,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,r){gh(this,4,t,b5e,r,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,r){gh(this,8,t,w5e,r,arguments.length>2?arguments[2]:!1)}}));var kR,Z_,NR;nX(Oo,wv);nX(_u,GE);oX.exports={ArrayBuffer:Oo,DataView:_u}});var uX=S(()=>{"use strict";var E5e=K(),S5e=Ze(),T5e=X_(),I5e=vh(),jR="ArrayBuffer",sX=T5e[jR],C5e=S5e[jR];E5e({global:!0,constructor:!0,forced:C5e!==sX},{ArrayBuffer:sX});I5e(jR)});var zt=S((a5t,yX)=>{"use strict";var A5e=kE(),$R=dt(),qa=Ze(),fX=Ot(),ZE=It(),_h=kt(),GR=Ja(),q5e=ah(),P5e=zn(),BR=br(),M5e=Wr(),O5e=Ri(),KE=jn(),Tv=is(),R5e=yt(),D5e=oh(),pX=dr(),dX=pX.enforce,L5e=pX.get,WE=qa.Int8Array,UR=WE&&WE.prototype,lX=qa.Uint8ClampedArray,cX=lX&&lX.prototype,xu=WE&&KE(WE),Bs=UR&&KE(UR),k5e=Object.prototype,WR=qa.TypeError,hX=R5e("toStringTag"),VR=D5e("TYPED_ARRAY_TAG"),HE="TypedArrayConstructor",Cl=A5e&&!!Tv&&GR(qa.opera)!=="Opera",vX=!1,to,yh,Sv,Al={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},HR={BigInt64Array:8,BigUint64Array:8},N5e=function(t){if(!ZE(t))return!1;var r=GR(t);return r==="DataView"||_h(Al,r)||_h(HR,r)},mX=function(e){var t=KE(e);if(ZE(t)){var r=L5e(t);return r&&_h(r,HE)?r[HE]:mX(t)}},gX=function(e){if(!ZE(e))return!1;var t=GR(e);return _h(Al,t)||_h(HR,t)},F5e=function(e){if(gX(e))return e;throw new WR("Target is not a typed array")},z5e=function(e){if(fX(e)&&(!Tv||O5e(xu,e)))return e;throw new WR(q5e(e)+" is not a typed array constructor")},j5e=function(e,t,r,n){if($R){if(r)for(var i in Al){var a=qa[i];if(a&&_h(a.prototype,e))try{delete a.prototype[e]}catch(h){try{a.prototype[e]=t}catch(p){}}}(!Bs[e]||r)&&BR(Bs,e,r?t:Cl&&UR[e]||t,n)}},B5e=function(e,t,r){var n,i;if($R){if(Tv){if(r){for(n in Al)if(i=qa[n],i&&_h(i,e))try{delete i[e]}catch(a){}}if(!xu[e]||r)try{return BR(xu,e,r?t:Cl&&xu[e]||t)}catch(a){}else return}for(n in Al)i=qa[n],i&&(!i[e]||r)&&BR(i,e,t)}};for(to in Al)yh=qa[to],Sv=yh&&yh.prototype,Sv?dX(Sv)[HE]=yh:Cl=!1;for(to in HR)yh=qa[to],Sv=yh&&yh.prototype,Sv&&(dX(Sv)[HE]=yh);if((!Cl||!fX(xu)||xu===Function.prototype)&&(xu=function(){throw new WR("Incorrect invocation")},Cl))for(to in Al)qa[to]&&Tv(qa[to],xu);if((!Cl||!Bs||Bs===k5e)&&(Bs=xu.prototype,Cl))for(to in Al)qa[to]&&Tv(qa[to].prototype,Bs);Cl&&KE(cX)!==Bs&&Tv(cX,Bs);if($R&&!_h(Bs,hX)){vX=!0,M5e(Bs,hX,{configurable:!0,get:function(){return ZE(this)?this[VR]:void 0}});for(to in Al)qa[to]&&P5e(qa[to],VR,to)}yX.exports={NATIVE_ARRAY_BUFFER_VIEWS:Cl,TYPED_ARRAY_TAG:vX&&VR,aTypedArray:F5e,aTypedArrayConstructor:z5e,exportTypedArrayMethod:j5e,exportTypedArrayStaticMethod:B5e,getTypedArrayConstructor:mX,isView:N5e,isTypedArray:gX,TypedArray:xu,TypedArrayPrototype:Bs}});var xX=S(()=>{"use strict";var U5e=K(),_X=zt(),V5e=_X.NATIVE_ARRAY_BUFFER_VIEWS;U5e({target:"ArrayBuffer",stat:!0,forced:!V5e},{isView:_X.isView})});var IX=S(()=>{"use strict";var $5e=K(),KR=xl(),G5e=Ne(),SX=X_(),bX=Ye(),wX=Ns(),W5e=Ya(),XR=SX.ArrayBuffer,ZR=SX.DataView,TX=ZR.prototype,EX=KR(XR.prototype.slice),H5e=KR(TX.getUint8),Z5e=KR(TX.setUint8),K5e=G5e(function(){return!new XR(2).slice(1,void 0).byteLength});$5e({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:K5e},{slice:function(t,r){if(EX&&r===void 0)return EX(bX(this),t);for(var n=bX(this).byteLength,i=wX(t,n),a=wX(r===void 0?n:r,n),h=new XR(W5e(a-i)),p=new ZR(this),g=new ZR(h),w=0;i<a;)Z5e(g,w++,H5e(p,i++));return h}})});var CX=S(()=>{"use strict";var X5e=K(),Y5e=X_(),J5e=kE();X5e({global:!0,constructor:!0,forced:!J5e},{DataView:Y5e.DataView})});var AX=S(()=>{"use strict";CX()});var YR=S((d5t,MX)=>{"use strict";var PX=Ze(),Q5e=F_(),e6e=Oi(),qX=PX.ArrayBuffer,t6e=PX.TypeError;MX.exports=qX&&Q5e(qX.prototype,"byteLength","get")||function(e){if(e6e(e)!=="ArrayBuffer")throw new t6e("ArrayBuffer expected");return e.byteLength}});var JR=S((v5t,LX)=>{"use strict";var r6e=Ze(),n6e=xl(),i6e=YR(),OX=r6e.ArrayBuffer,RX=OX&&OX.prototype,DX=RX&&n6e(RX.slice);LX.exports=function(e){if(i6e(e)!==0||!DX)return!1;try{return DX(e,0,0),!1}catch(t){return!0}}});var QR=S(()=>{"use strict";var a6e=dt(),o6e=Wr(),s6e=JR(),kX=ArrayBuffer.prototype;a6e&&!("detached"in kX)&&o6e(kX,"detached",{configurable:!0,get:function(){return s6e(this)}})});var Iv=S((y5t,NX)=>{"use strict";var u6e=JR(),l6e=TypeError;NX.exports=function(e){if(u6e(e))throw new l6e("ArrayBuffer is detached");return e}});var eD=S((_5t,FX)=>{"use strict";var c6e=Ze(),h6e=Qf();FX.exports=function(e){if(h6e){try{return c6e.process.getBuiltinModule(e)}catch(t){}try{return Function("return require(\""+e+"\")")()}catch(t){}}}});var XE=S((x5t,jX)=>{"use strict";var f6e=Ze(),p6e=Ne(),tD=vu(),rD=H_(),zX=f6e.structuredClone;jX.exports=!!zX&&!p6e(function(){if(rD==="DENO"&&tD>92||rD==="NODE"&&tD>94||rD==="BROWSER"&&tD>97)return!1;var e=new ArrayBuffer(8),t=zX(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var sD=S((b5t,VX)=>{"use strict";var oD=Ze(),d6e=eD(),v6e=XE(),m6e=oD.structuredClone,BX=oD.ArrayBuffer,YE=oD.MessageChannel,aD=!1,nD,UX,JE,iD;if(v6e)aD=function(e){m6e(e,{transfer:[e]})};else if(BX)try{YE||(nD=d6e("worker_threads"),nD&&(YE=nD.MessageChannel)),YE&&(UX=new YE,JE=new BX(2),iD=function(e){UX.port1.postMessage(null,[e])},JE.byteLength===2&&(iD(JE),JE.byteLength===0&&(aD=iD)))}catch(e){}VX.exports=aD});var pD=S((w5t,XX)=>{"use strict";var cD=Ze(),hD=Oe(),HX=F_(),g6e=xv(),y6e=Iv(),_6e=YR(),$X=sD(),uD=XE(),x6e=cD.structuredClone,ZX=cD.ArrayBuffer,lD=cD.DataView,b6e=Math.min,fD=ZX.prototype,KX=lD.prototype,w6e=hD(fD.slice),GX=HX(fD,"resizable","get"),WX=HX(fD,"maxByteLength","get"),E6e=hD(KX.getInt8),S6e=hD(KX.setInt8);XX.exports=(uD||$X)&&function(e,t,r){var n=_6e(e),i=t===void 0?n:g6e(t),a=!GX||!GX(e),h;if(y6e(e),uD&&(e=x6e(e,{transfer:[e]}),n===i&&(r||a)))return e;if(n>=i&&(!r||a))h=w6e(e,0,i);else{var p=r&&!a&&WX?{maxByteLength:WX(e)}:void 0;h=new ZX(i,p);for(var g=new lD(e),w=new lD(h),E=b6e(i,n),q=0;q<E;q++)S6e(w,q,E6e(g,q))}return uD||$X(e),h}});var dD=S(()=>{"use strict";var T6e=K(),YX=pD();YX&&T6e({target:"ArrayBuffer",proto:!0},{transfer:function(){return YX(this,arguments.length?arguments[0]:void 0,!0)}})});var vD=S(()=>{"use strict";var I6e=K(),JX=pD();JX&&I6e({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return JX(this,arguments.length?arguments[0]:void 0,!1)}})});var QX=S(()=>{"use strict";var C6e=K(),A6e=Oe(),q6e=Ne(),P6e=q6e(function(){return new Date(16e11).getYear()!==120}),M6e=A6e(Date.prototype.getFullYear);C6e({target:"Date",proto:!0,forced:P6e},{getYear:function(){return M6e(this)-1900}})});var tY=S(()=>{"use strict";var O6e=K(),R6e=Oe(),eY=Date,D6e=R6e(eY.prototype.getTime);O6e({target:"Date",stat:!0},{now:function(){return D6e(new eY)}})});var iY=S(()=>{"use strict";var L6e=K(),rY=Oe(),k6e=Gr(),nY=Date.prototype,N6e=rY(nY.getTime),F6e=rY(nY.setFullYear);L6e({target:"Date",proto:!0},{setYear:function(t){N6e(this);var r=k6e(t),n=r>=0&&r<=99?r+1900:r;return F6e(this,n)}})});var aY=S(()=>{"use strict";var z6e=K();z6e({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var Y_=S((L5t,oY)=>{"use strict";var j6e=Gr(),B6e=qt(),U6e=Br(),V6e=RangeError;oY.exports=function(t){var r=B6e(U6e(this)),n="",i=j6e(t);if(i<0||i===1/0)throw new V6e("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(r+=r))i&1&&(n+=r);return n}});var J_=S((k5t,cY)=>{"use strict";var lY=Oe(),$6e=Ya(),sY=qt(),G6e=Y_(),W6e=Br(),H6e=lY(G6e),Z6e=lY("".slice),K6e=Math.ceil,uY=function(e){return function(t,r,n){var i=sY(W6e(t)),a=$6e(r),h=i.length,p=n===void 0?" ":sY(n),g,w;return a<=h||p===""?i:(g=a-h,w=H6e(p,K6e(g/p.length)),w.length>g&&(w=Z6e(w,0,g)),e?i+w:w+i)}};cY.exports={start:uY(!1),end:uY(!0)}});var pY=S((N5t,fY)=>{"use strict";var xh=Oe(),hY=Ne(),tp=J_().start,X6e=RangeError,Y6e=isFinite,J6e=Math.abs,ql=Date.prototype,mD=ql.toISOString,Q6e=xh(ql.getTime),eVe=xh(ql.getUTCDate),tVe=xh(ql.getUTCFullYear),rVe=xh(ql.getUTCHours),nVe=xh(ql.getUTCMilliseconds),iVe=xh(ql.getUTCMinutes),aVe=xh(ql.getUTCMonth),oVe=xh(ql.getUTCSeconds);fY.exports=hY(function(){return mD.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!hY(function(){mD.call(new Date(NaN))})?function(){if(!Y6e(Q6e(this)))throw new X6e("Invalid time value");var t=this,r=tVe(t),n=nVe(t),i=r<0?"-":r>9999?"+":"";return i+tp(J6e(r),i?6:4,0)+"-"+tp(aVe(t)+1,2,0)+"-"+tp(eVe(t),2,0)+"T"+tp(rVe(t),2,0)+":"+tp(iVe(t),2,0)+":"+tp(oVe(t),2,0)+"."+tp(n,3,0)+"Z"}:mD});var vY=S(()=>{"use strict";var sVe=K(),dY=pY();sVe({target:"Date",proto:!0,forced:Date.prototype.toISOString!==dY},{toISOString:dY})});var mY=S(()=>{"use strict";var uVe=K(),lVe=Ne(),cVe=Bt(),hVe=E_(),fVe=lVe(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});uVe({target:"Date",proto:!0,arity:1,forced:fVe},{toJSON:function(t){var r=cVe(this),n=hVe(r,"number");return typeof n=="number"&&!isFinite(n)?null:r.toISOString()}})});var yY=S((U5t,gY)=>{"use strict";var pVe=Ye(),dVe=H2(),vVe=TypeError;gY.exports=function(e){if(pVe(this),e==="string"||e==="default")e="string";else if(e!=="number")throw new vVe("Incorrect hint");return dVe(this,e)}});var bY=S(()=>{"use strict";var mVe=kt(),gVe=br(),yVe=yY(),_Ve=yt(),_Y=_Ve("toPrimitive"),xY=Date.prototype;mVe(xY,_Y)||gVe(xY,_Y,yVe)});var TY=S(()=>{"use strict";var EY=Oe(),xVe=br(),gD=Date.prototype,wY="Invalid Date",SY="toString",bVe=EY(gD[SY]),wVe=EY(gD.getTime);String(new Date(NaN))!==wY&&xVe(gD,SY,function(){var t=wVe(this);return t===t?bVe(this):wY})});var CY=S(()=>{"use strict";var EVe=K(),Q_=Oe(),SVe=qt(),TVe=Q_("".charAt),IVe=Q_("".charCodeAt),CVe=Q_(/./.exec),AVe=Q_(1 .toString),qVe=Q_("".toUpperCase),PVe=/[\w*+\-./@]/,IY=function(e,t){for(var r=AVe(e,16);r.length<t;)r="0"+r;return r};EVe({global:!0},{escape:function(t){for(var r=SVe(t),n="",i=r.length,a=0,h,p;a<i;)h=TVe(r,a++),CVe(PVe,h)?n+=h:(p=IVe(h,0),p<256?n+="%"+IY(p,2):n+="%u"+qVe(IY(p,4)));return n}})});var _D=S((K5t,MY)=>{"use strict";var qY=Oe(),MVe=Et(),OVe=It(),RVe=kt(),AY=Qa(),DVe=lv(),PY=Function,LVe=qY([].concat),kVe=qY([].join),yD={},NVe=function(e,t,r){if(!RVe(yD,t)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";yD[t]=PY("C,a","return new C("+kVe(n,",")+")")}return yD[t](e,r)};MY.exports=DVe?PY.bind:function(t){var r=MVe(this),n=r.prototype,i=AY(arguments,1),a=function(){var p=LVe(i,AY(arguments));return this instanceof a?NVe(r,p.length,p):r.apply(t,p)};return OVe(n)&&(a.prototype=n),a}});var RY=S(()=>{"use strict";var FVe=K(),OY=_D();FVe({target:"Function",proto:!0,forced:Function.bind!==OY},{bind:OY})});var kY=S(()=>{"use strict";var zVe=Ot(),DY=It(),jVe=Fr(),BVe=Ri(),UVe=yt(),VVe=A_(),xD=UVe("hasInstance"),LY=Function.prototype;xD in LY||jVe.f(LY,xD,{value:VVe(function(e){if(!zVe(this)||!DY(e))return!1;var t=this.prototype;return DY(t)?BVe(t,e):e instanceof this},xD)})});var jY=S(()=>{"use strict";var $Ve=dt(),GVe=Uf().EXISTS,NY=Oe(),WVe=Wr(),FY=Function.prototype,HVe=NY(FY.toString),zY=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,ZVe=NY(zY.exec),KVe="name";$Ve&&!GVe&&WVe(FY,KVe,{configurable:!0,get:function(){try{return ZVe(zY,HVe(this))[1]}catch(e){return""}}})});var wD=S(()=>{"use strict";var XVe=K(),bD=Ze();XVe({global:!0,forced:bD.globalThis!==bD},{globalThis:bD})});var CD=S(()=>{"use strict";var YVe=K(),JVe=Ze(),QVe=oa(),e$e=Ye(),t$e=Ot(),r$e=jn(),n$e=Wr(),i$e=as(),a$e=Ne(),TD=kt(),o$e=yt(),bu=Jf().IteratorPrototype,s$e=dt(),u$e=jt(),ED="constructor",UY="Iterator",BY=o$e("toStringTag"),VY=TypeError,SD=JVe[UY],$Y=u$e||!t$e(SD)||SD.prototype!==bu||!a$e(function(){SD({})}),ID=function(){if(QVe(this,bu),r$e(this)===bu)throw new VY("Abstract class Iterator not directly constructable")},GY=function(e,t){s$e?n$e(bu,e,{configurable:!0,get:function(){return t},set:function(r){if(e$e(this),this===bu)throw new VY("You can't redefine this property");TD(this,e)?this[e]=r:i$e(this,e,r)}}):bu[e]=t};TD(bu,BY)||GY(BY,UY);($Y||!TD(bu,ED)||bu[ED]===Object)&&GY(ED,ID);ID.prototype=bu;YVe({global:!0,constructor:!0,forced:$Y},{Iterator:ID})});var tn=S((o6t,WY)=>{"use strict";WY.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var e0=S((s6t,HY)=>{"use strict";var l$e=RangeError;HY.exports=function(e){if(e===e)return e;throw new l$e("NaN is not allowed")}});var Cv=S((u6t,ZY)=>{"use strict";var c$e=Gr(),h$e=RangeError;ZY.exports=function(e){var t=c$e(e);if(t<0)throw new h$e("The argument can't be less than 0");return t}});var bh=S((l6t,eJ)=>{"use strict";var f$e=Qe(),p$e=Cn(),d$e=zn(),v$e=ss(),m$e=yt(),KY=dr(),g$e=In(),y$e=Jf().IteratorPrototype,AD=gi(),qD=El(),_$e=m$e("toStringTag"),XY="IteratorHelper",YY="WrapForValidIterator",x$e=KY.set,JY=function(e){var t=KY.getterFor(e?YY:XY);return v$e(p$e(y$e),{next:function(){var n=t(this);if(e)return n.nextHandler();try{var i=n.done?void 0:n.nextHandler();return AD(i,n.done)}catch(a){throw n.done=!0,a}},return:function(){var r=t(this),n=r.iterator;if(r.done=!0,e){var i=g$e(n,"return");return i?f$e(i,n):AD(void 0,!0)}if(r.inner)try{qD(r.inner.iterator,"normal")}catch(a){return qD(n,"throw",a)}return n&&qD(n,"normal"),AD(void 0,!0)}})},b$e=JY(!0),QY=JY(!1);d$e(QY,_$e,"Iterator Helper");eJ.exports=function(e,t){var r=function(i,a){a?(a.iterator=i.iterator,a.next=i.next):a=i,a.type=t?YY:XY,a.nextHandler=e,a.counter=0,a.done=!1,x$e(this,a)};return r.prototype=t?b$e:QY,r}});var MD=S(()=>{"use strict";var w$e=K(),tJ=Qe(),PD=Ye(),E$e=tn(),S$e=e0(),T$e=Cv(),I$e=bh(),C$e=jt(),A$e=I$e(function(){for(var e=this.iterator,t=this.next,r,n;this.remaining;)if(this.remaining--,r=PD(tJ(t,e)),n=this.done=!!r.done,n)return;if(r=PD(tJ(t,e)),n=this.done=!!r.done,!n)return r.value});w$e({target:"Iterator",proto:!0,real:!0,forced:C$e},{drop:function(t){PD(this);var r=T$e(S$e(+t));return new A$e(E$e(this),{remaining:r})}})});var OD=S(()=>{"use strict";var q$e=K(),P$e=hn(),M$e=Et(),O$e=Ye(),R$e=tn();q$e({target:"Iterator",proto:!0,real:!0},{every:function(t){O$e(this),M$e(t);var r=R$e(this),n=0;return!P$e(r,function(i,a){if(!t(i,n++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var RD=S(()=>{"use strict";var D$e=K(),L$e=Qe(),k$e=Et(),rJ=Ye(),N$e=tn(),F$e=bh(),z$e=CE(),j$e=jt(),B$e=F$e(function(){for(var e=this.iterator,t=this.predicate,r=this.next,n,i,a;;){if(n=rJ(L$e(r,e)),i=this.done=!!n.done,i)return;if(a=n.value,z$e(e,t,[a,this.counter++],!0))return a}});D$e({target:"Iterator",proto:!0,real:!0,forced:j$e},{filter:function(t){return rJ(this),k$e(t),new B$e(N$e(this),{predicate:t})}})});var DD=S(()=>{"use strict";var U$e=K(),V$e=hn(),$$e=Et(),G$e=Ye(),W$e=tn();U$e({target:"Iterator",proto:!0,real:!0},{find:function(t){G$e(this),$$e(t);var r=W$e(this),n=0;return V$e(r,function(i,a){if(t(i,n++))return a(i)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var LD=S((y6t,iJ)=>{"use strict";var H$e=Qe(),nJ=Ye(),Z$e=tn(),K$e=yu();iJ.exports=function(e,t){(!t||typeof e!="string")&&nJ(e);var r=K$e(e);return Z$e(nJ(r!==void 0?H$e(r,e):e))}});var ND=S(()=>{"use strict";var X$e=K(),aJ=Qe(),Y$e=Et(),kD=Ye(),J$e=tn(),Q$e=LD(),e8e=bh(),oJ=El(),t8e=jt(),r8e=e8e(function(){for(var e=this.iterator,t=this.mapper,r,n;;){if(n=this.inner)try{if(r=kD(aJ(n.next,n.iterator)),!r.done)return r.value;this.inner=null}catch(i){oJ(e,"throw",i)}if(r=kD(aJ(this.next,e)),this.done=!!r.done)return;try{this.inner=Q$e(t(r.value,this.counter++),!1)}catch(i){oJ(e,"throw",i)}}});X$e({target:"Iterator",proto:!0,real:!0,forced:t8e},{flatMap:function(t){return kD(this),Y$e(t),new r8e(J$e(this),{mapper:t,inner:null})}})});var FD=S(()=>{"use strict";var n8e=K(),i8e=hn(),a8e=Et(),o8e=Ye(),s8e=tn();n8e({target:"Iterator",proto:!0,real:!0},{forEach:function(t){o8e(this),a8e(t);var r=s8e(this),n=0;i8e(r,function(i){t(i,n++)},{IS_RECORD:!0})}})});var zD=S(()=>{"use strict";var u8e=K(),l8e=Qe(),c8e=Bt(),h8e=Ri(),f8e=Jf().IteratorPrototype,p8e=bh(),d8e=LD(),v8e=jt(),m8e=p8e(function(){return l8e(this.next,this.iterator)},!0);u8e({target:"Iterator",stat:!0,forced:v8e},{from:function(t){var r=d8e(typeof t=="string"?c8e(t):t,!0);return h8e(f8e,r.iterator)?r.iterator:new m8e(r)}})});var jD=S((T6t,uJ)=>{"use strict";var g8e=Qe(),y8e=Et(),sJ=Ye(),_8e=tn(),x8e=bh(),b8e=CE(),w8e=x8e(function(){var e=this.iterator,t=sJ(g8e(this.next,e)),r=this.done=!!t.done;if(!r)return b8e(e,this.mapper,[t.value,this.counter++],!0)});uJ.exports=function(t){return sJ(this),y8e(t),new w8e(_8e(this),{mapper:t})}});var BD=S(()=>{"use strict";var E8e=K(),S8e=jD(),T8e=jt();E8e({target:"Iterator",proto:!0,real:!0,forced:T8e},{map:S8e})});var UD=S(()=>{"use strict";var I8e=K(),C8e=hn(),A8e=Et(),q8e=Ye(),P8e=tn(),M8e=TypeError;I8e({target:"Iterator",proto:!0,real:!0},{reduce:function(t){q8e(this),A8e(t);var r=P8e(this),n=arguments.length<2,i=n?void 0:arguments[1],a=0;if(C8e(r,function(h){n?(n=!1,i=h):i=t(i,h,a),a++},{IS_RECORD:!0}),n)throw new M8e("Reduce of empty iterator with no initial value");return i}})});var VD=S(()=>{"use strict";var O8e=K(),R8e=hn(),D8e=Et(),L8e=Ye(),k8e=tn();O8e({target:"Iterator",proto:!0,real:!0},{some:function(t){L8e(this),D8e(t);var r=k8e(this),n=0;return R8e(r,function(i,a){if(t(i,n++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var $D=S(()=>{"use strict";var N8e=K(),F8e=Qe(),lJ=Ye(),z8e=tn(),j8e=e0(),B8e=Cv(),U8e=bh(),V8e=El(),$8e=jt(),G8e=U8e(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,V8e(e,"normal",void 0);var t=lJ(F8e(this.next,e)),r=this.done=!!t.done;if(!r)return t.value});N8e({target:"Iterator",proto:!0,real:!0,forced:$8e},{take:function(t){lJ(this);var r=B8e(j8e(+t));return new G8e(z8e(this),{remaining:r})}})});var GD=S(()=>{"use strict";var W8e=K(),H8e=Ye(),Z8e=hn(),K8e=tn(),X8e=[].push;W8e({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return Z8e(K8e(H8e(this)),X8e,{that:t,IS_RECORD:!0}),t}})});var cJ=S(()=>{"use strict";var Y8e=Ze(),J8e=Aa();J8e(Y8e.JSON,"JSON",!0)});var QE=S((F6t,hJ)=>{"use strict";var Q8e=Ne();hJ.exports=Q8e(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var tS=S((z6t,pJ)=>{"use strict";var eGe=Ne(),tGe=It(),rGe=Oi(),fJ=QE(),eS=Object.isExtensible,nGe=eGe(function(){eS(1)});pJ.exports=nGe||fJ?function(t){return!tGe(t)||fJ&&rGe(t)==="ArrayBuffer"?!1:eS?eS(t):!0}:eS});var Pl=S((j6t,dJ)=>{"use strict";var iGe=Ne();dJ.exports=!iGe(function(){return Object.isExtensible(Object.preventExtensions({}))})});var wh=S((B6t,gJ)=>{"use strict";var aGe=K(),oGe=Oe(),sGe=hv(),uGe=It(),WD=kt(),lGe=Fr().f,vJ=sh(),cGe=uE(),HD=tS(),hGe=oh(),fGe=Pl(),mJ=!1,Ml=hGe("meta"),pGe=0,ZD=function(e){lGe(e,Ml,{value:{objectID:"O"+pGe++,weakData:{}}})},dGe=function(e,t){if(!uGe(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!WD(e,Ml)){if(!HD(e))return"F";if(!t)return"E";ZD(e)}return e[Ml].objectID},vGe=function(e,t){if(!WD(e,Ml)){if(!HD(e))return!0;if(!t)return!1;ZD(e)}return e[Ml].weakData},mGe=function(e){return fGe&&mJ&&HD(e)&&!WD(e,Ml)&&ZD(e),e},gGe=function(){yGe.enable=function(){},mJ=!0;var e=vJ.f,t=oGe([].splice),r={};r[Ml]=1,e(r).length&&(vJ.f=function(n){for(var i=e(n),a=0,h=i.length;a<h;a++)if(i[a]===Ml){t(i,a,1);break}return i},aGe({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:cGe.f}))},yGe=gJ.exports={enable:gGe,fastKey:dGe,getWeakData:vGe,onFreeze:mGe};sGe[Ml]=!0});var t0=S((U6t,_J)=>{"use strict";var _Ge=K(),xGe=Ze(),bGe=Oe(),yJ=pv(),wGe=br(),EGe=wh(),SGe=hn(),TGe=oa(),IGe=Ot(),CGe=Nn(),KD=It(),XD=Ne(),AGe=B_(),qGe=Aa(),PGe=ch();_J.exports=function(e,t,r){var n=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,a=n?"set":"add",h=xGe[e],p=h&&h.prototype,g=h,w={},E=function(V){var Z=bGe(p[V]);wGe(p,V,V==="add"?function(se){return Z(this,se===0?0:se),this}:V==="delete"?function(te){return i&&!KD(te)?!1:Z(this,te===0?0:te)}:V==="get"?function(se){return i&&!KD(se)?void 0:Z(this,se===0?0:se)}:V==="has"?function(se){return i&&!KD(se)?!1:Z(this,se===0?0:se)}:function(se,Ie){return Z(this,se===0?0:se,Ie),this})},q=yJ(e,!IGe(h)||!(i||p.forEach&&!XD(function(){new h().entries().next()})));if(q)g=r.getConstructor(t,e,n,a),EGe.enable();else if(yJ(e,!0)){var P=new g,k=P[a](i?{}:-0,1)!==P,W=XD(function(){P.has(1)}),Q=AGe(function(V){new h(V)}),$=!i&&XD(function(){for(var V=new h,Z=5;Z--;)V[a](Z,Z);return!V.has(-0)});Q||(g=t(function(V,Z){TGe(V,p);var te=PGe(new h,V,g);return CGe(Z)||SGe(Z,te[a],{that:te,AS_ENTRIES:n}),te}),g.prototype=p,p.constructor=g),(W||$)&&(E("delete"),E("has"),n&&E("get")),($||k)&&E(a),i&&p.clear&&delete p.clear}return w[e]=g,_Ge({global:!0,constructor:!0,forced:g!==h},w),qGe(g,e),i||r.setStrong(g,e,n),g}});var JD=S((V6t,TJ)=>{"use strict";var xJ=Cn(),MGe=Wr(),bJ=ss(),OGe=Pr(),RGe=oa(),DGe=Nn(),LGe=hn(),kGe=PE(),rS=gi(),NGe=vh(),r0=dt(),wJ=wh().fastKey,SJ=dr(),EJ=SJ.set,YD=SJ.getterFor;TJ.exports={getConstructor:function(e,t,r,n){var i=e(function(w,E){RGe(w,a),EJ(w,{type:t,index:xJ(null),first:null,last:null,size:0}),r0||(w.size=0),DGe(E)||LGe(E,w[n],{that:w,AS_ENTRIES:r})}),a=i.prototype,h=YD(t),p=function(w,E,q){var P=h(w),k=g(w,E),W,Q;return k?k.value=q:(P.last=k={index:Q=wJ(E,!0),key:E,value:q,previous:W=P.last,next:null,removed:!1},P.first||(P.first=k),W&&(W.next=k),r0?P.size++:w.size++,Q!=="F"&&(P.index[Q]=k)),w},g=function(w,E){var q=h(w),P=wJ(E),k;if(P!=="F")return q.index[P];for(k=q.first;k;k=k.next)if(k.key===E)return k};return bJ(a,{clear:function(){for(var E=this,q=h(E),P=q.first;P;)P.removed=!0,P.previous&&(P.previous=P.previous.next=null),P=P.next;q.first=q.last=null,q.index=xJ(null),r0?q.size=0:E.size=0},delete:function(w){var E=this,q=h(E),P=g(E,w);if(P){var k=P.next,W=P.previous;delete q.index[P.index],P.removed=!0,W&&(W.next=k),k&&(k.previous=W),q.first===P&&(q.first=k),q.last===P&&(q.last=W),r0?q.size--:E.size--}return!!P},forEach:function(E){for(var q=h(this),P=OGe(E,arguments.length>1?arguments[1]:void 0),k;k=k?k.next:q.first;)for(P(k.value,k.key,this);k&&k.removed;)k=k.previous},has:function(E){return!!g(this,E)}}),bJ(a,r?{get:function(E){var q=g(this,E);return q&&q.value},set:function(E,q){return p(this,E===0?0:E,q)}}:{add:function(E){return p(this,E=E===0?0:E,E)}}),r0&&MGe(a,"size",{configurable:!0,get:function(){return h(this).size}}),i},setStrong:function(e,t,r){var n=t+" Iterator",i=YD(t),a=YD(n);kGe(e,t,function(h,p){EJ(this,{type:n,target:h,state:i(h),kind:p,last:null})},function(){for(var h=a(this),p=h.kind,g=h.last;g&&g.removed;)g=g.previous;return!h.target||!(h.last=g=g?g.next:h.state.first)?(h.target=null,rS(void 0,!0)):rS(p==="keys"?g.key:p==="values"?g.value:[g.key,g.value],!1)},r?"entries":"values",!r,!0),NGe(t)}}});var IJ=S(()=>{"use strict";var FGe=t0(),zGe=JD();FGe("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},zGe)});var nS=S(()=>{"use strict";IJ()});var Jn=S((Z6t,CJ)=>{"use strict";var iS=Oe(),n0=Map.prototype;CJ.exports={Map,set:iS(n0.set),get:iS(n0.get),has:iS(n0.has),remove:iS(n0.delete),proto:n0}});var QD=S(()=>{"use strict";var jGe=K(),BGe=Oe(),UGe=Et(),VGe=Br(),$Ge=hn(),aS=Jn(),AJ=jt(),GGe=Ne(),qJ=aS.Map,WGe=aS.has,HGe=aS.get,ZGe=aS.set,KGe=BGe([].push),XGe=AJ||GGe(function(){return qJ.groupBy("ab",function(e){return e}).get("a").length!==1});jGe({target:"Map",stat:!0,forced:AJ||XGe},{groupBy:function(t,r){VGe(t),UGe(r);var n=new qJ,i=0;return $Ge(t,function(a){var h=r(a,i++);WGe(n,h)?KGe(HGe(n,h),a):ZGe(n,h,[a])}),n}})});var eL=S((Y6t,PJ)=>{"use strict";var YGe=Math.log;PJ.exports=Math.log1p||function(t){var r=+t;return r>-1e-8&&r<1e-8?r-r*r/2:YGe(1+r)}});var OJ=S(()=>{"use strict";var JGe=K(),QGe=eL(),tL=Math.acosh,eWe=Math.log,MJ=Math.sqrt,tWe=Math.LN2,rWe=!tL||Math.floor(tL(Number.MAX_VALUE))!==710||tL(1/0)!==1/0;JGe({target:"Math",stat:!0,forced:rWe},{acosh:function(t){var r=+t;return r<1?NaN:r>94906265.62425156?eWe(r)+tWe:QGe(r-1+MJ(r-1)*MJ(r+1))}})});var LJ=S(()=>{"use strict";var nWe=K(),RJ=Math.asinh,iWe=Math.log,aWe=Math.sqrt;function DJ(e){var t=+e;return!isFinite(t)||t===0?t:t<0?-DJ(-t):iWe(t+aWe(t*t+1))}var oWe=!(RJ&&1/RJ(0)>0);nWe({target:"Math",stat:!0,forced:oWe},{asinh:DJ})});var NJ=S(()=>{"use strict";var sWe=K(),kJ=Math.atanh,uWe=Math.log,lWe=!(kJ&&1/kJ(-0)<0);sWe({target:"Math",stat:!0,forced:lWe},{atanh:function(t){var r=+t;return r===0?r:uWe((1+r)/(1-r))/2}})});var FJ=S(()=>{"use strict";var cWe=K(),hWe=NE(),fWe=Math.abs,pWe=Math.pow;cWe({target:"Math",stat:!0},{cbrt:function(t){var r=+t;return hWe(r)*pWe(fWe(r),1/3)}})});var zJ=S(()=>{"use strict";var dWe=K(),vWe=Math.floor,mWe=Math.log,gWe=Math.LOG2E;dWe({target:"Math",stat:!0},{clz32:function(t){var r=t>>>0;return r?31-vWe(mWe(r+.5)*gWe):32}})});var a0=S((uVt,jJ)=>{"use strict";var i0=Math.expm1,yWe=Math.exp;jJ.exports=!i0||i0(10)>22025.465794806718||i0(10)<22025.465794806718||i0(-2e-17)!==-2e-17?function(t){var r=+t;return r===0?r:r>-1e-6&&r<1e-6?r+r*r/2:yWe(r)-1}:i0});var UJ=S(()=>{"use strict";var _We=K(),xWe=a0(),BJ=Math.cosh,bWe=Math.abs,rL=Math.E,wWe=!BJ||BJ(710)===1/0;_We({target:"Math",stat:!0,forced:wWe},{cosh:function(t){var r=xWe(bWe(t)-1)+1;return(r+1/(r*rL*rL))*(rL/2)}})});var $J=S(()=>{"use strict";var EWe=K(),VJ=a0();EWe({target:"Math",stat:!0,forced:VJ!==Math.expm1},{expm1:VJ})});var GJ=S(()=>{"use strict";var SWe=K(),TWe=FE();SWe({target:"Math",stat:!0},{fround:TWe})});var HJ=S(()=>{"use strict";var IWe=K(),WJ=Math.hypot,CWe=Math.abs,AWe=Math.sqrt,qWe=!!WJ&&WJ(1/0,NaN)!==1/0;IWe({target:"Math",stat:!0,arity:2,forced:qWe},{hypot:function(t,r){for(var n=0,i=0,a=arguments.length,h=0,p,g;i<a;)p=CWe(arguments[i++]),h<p?(g=h/p,n=n*g*g+1,h=p):p>0?(g=p/h,n+=g*g):n+=p;return h===1/0?1/0:h*AWe(n)}})});var KJ=S(()=>{"use strict";var PWe=K(),MWe=Ne(),ZJ=Math.imul,OWe=MWe(function(){return ZJ(4294967295,5)!==-5||ZJ.length!==2});PWe({target:"Math",stat:!0,forced:OWe},{imul:function(t,r){var n=65535,i=+t,a=+r,h=n&i,p=n&a;return 0|h*p+((n&i>>>16)*p+h*(n&a>>>16)<<16>>>0)}})});var nL=S((_Vt,XJ)=>{"use strict";var RWe=Math.log,DWe=Math.LOG10E;XJ.exports=Math.log10||function(t){return RWe(t)*DWe}});var YJ=S(()=>{"use strict";var LWe=K(),kWe=nL();LWe({target:"Math",stat:!0},{log10:kWe})});var JJ=S(()=>{"use strict";var NWe=K(),FWe=eL();NWe({target:"Math",stat:!0},{log1p:FWe})});var QJ=S(()=>{"use strict";var zWe=K(),jWe=Math.log,BWe=Math.LN2;zWe({target:"Math",stat:!0},{log2:function(t){return jWe(t)/BWe}})});var eQ=S(()=>{"use strict";var UWe=K(),VWe=NE();UWe({target:"Math",stat:!0},{sign:VWe})});var nQ=S(()=>{"use strict";var $We=K(),GWe=Ne(),tQ=a0(),WWe=Math.abs,rQ=Math.exp,HWe=Math.E,ZWe=GWe(function(){return Math.sinh(-2e-17)!==-2e-17});$We({target:"Math",stat:!0,forced:ZWe},{sinh:function(t){var r=+t;return WWe(r)<1?(tQ(r)-tQ(-r))/2:(rQ(r-1)-rQ(-r-1))*(HWe/2)}})});var oQ=S(()=>{"use strict";var KWe=K(),iQ=a0(),aQ=Math.exp;KWe({target:"Math",stat:!0},{tanh:function(t){var r=+t,n=iQ(r),i=iQ(-r);return n===1/0?1:i===1/0?-1:(n-i)/(aQ(r)+aQ(-r))}})});var sQ=S(()=>{"use strict";var XWe=Aa();XWe(Math,"Math",!0)});var uQ=S(()=>{"use strict";var YWe=K(),JWe=hO();YWe({target:"Math",stat:!0},{trunc:JWe})});var o0=S((kVt,lQ)=>{"use strict";var QWe=Oe();lQ.exports=QWe(1 .valueOf)});var rp=S((NVt,cQ)=>{"use strict";cQ.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var np=S((FVt,fQ)=>{"use strict";var eHe=Oe(),tHe=Br(),rHe=qt(),aL=rp(),hQ=eHe("".replace),nHe=RegExp("^["+aL+"]+"),iHe=RegExp("(^|[^"+aL+"])["+aL+"]+$"),iL=function(e){return function(t){var r=rHe(tHe(t));return e&1&&(r=hQ(r,nHe,"")),e&2&&(r=hQ(r,iHe,"$1")),r}};fQ.exports={start:iL(1),end:iL(2),trim:iL(3)}});var _Q=S(()=>{"use strict";var aHe=K(),oL=jt(),oHe=dt(),vQ=Ze(),sL=lE(),mQ=Oe(),sHe=pv(),pQ=kt(),uHe=ch(),lHe=Ri(),cHe=yl(),gQ=E_(),hHe=Ne(),fHe=sh().f,pHe=vi().f,dHe=Fr().f,vHe=o0(),mHe=np().trim,s0="Number",Av=vQ[s0],dQ=sL[s0],uL=Av.prototype,gHe=vQ.TypeError,yHe=mQ("".slice),oS=mQ("".charCodeAt),_He=function(e){var t=gQ(e,"number");return typeof t=="bigint"?t:xHe(t)},xHe=function(e){var t=gQ(e,"number"),r,n,i,a,h,p,g,w;if(cHe(t))throw new gHe("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=mHe(t),r=oS(t,0),r===43||r===45){if(n=oS(t,2),n===88||n===120)return NaN}else if(r===48){switch(oS(t,1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+t;}for(h=yHe(t,2),p=h.length,g=0;g<p;g++)if(w=oS(h,g),w<48||w>a)return NaN;return parseInt(h,i)}}return+t},lL=sHe(s0,!Av(" 0o1")||!Av("0b1")||Av("+0x1")),bHe=function(e){return lHe(uL,e)&&hHe(function(){vHe(e)})},sS=function(t){var r=arguments.length<1?0:Av(_He(t));return bHe(this)?uHe(Object(r),this,sS):r};sS.prototype=uL;lL&&!oL&&(uL.constructor=sS);aHe({global:!0,constructor:!0,wrap:!0,forced:lL},{Number:sS});var yQ=function(e,t){for(var r=oHe?fHe(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),n=0,i;r.length>n;n++)pQ(t,i=r[n])&&!pQ(e,i)&&dHe(e,i,pHe(t,i))};oL&&dQ&&yQ(sL[s0],dQ);(lL||oL)&&yQ(sL[s0],Av)});var xQ=S(()=>{"use strict";var wHe=K();wHe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var cL=S((VVt,bQ)=>{"use strict";var EHe=Ze(),SHe=EHe.isFinite;bQ.exports=Number.isFinite||function(t){return typeof t=="number"&&SHe(t)}});var wQ=S(()=>{"use strict";var THe=K(),IHe=cL();THe({target:"Number",stat:!0},{isFinite:IHe})});var uS=S((WVt,EQ)=>{"use strict";var CHe=It(),AHe=Math.floor;EQ.exports=Number.isInteger||function(t){return!CHe(t)&&isFinite(t)&&AHe(t)===t}});var SQ=S(()=>{"use strict";var qHe=K(),PHe=uS();qHe({target:"Number",stat:!0},{isInteger:PHe})});var TQ=S(()=>{"use strict";var MHe=K();MHe({target:"Number",stat:!0},{isNaN:function(t){return t!==t}})});var IQ=S(()=>{"use strict";var OHe=K(),RHe=uS(),DHe=Math.abs;OHe({target:"Number",stat:!0},{isSafeInteger:function(t){return RHe(t)&&DHe(t)<=9007199254740991}})});var CQ=S(()=>{"use strict";var LHe=K();LHe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var AQ=S(()=>{"use strict";var kHe=K();kHe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var hL=S((n$t,OQ)=>{"use strict";var MQ=Ze(),NHe=Ne(),FHe=Oe(),zHe=qt(),jHe=np().trim,BHe=rp(),UHe=FHe("".charAt),lS=MQ.parseFloat,qQ=MQ.Symbol,PQ=qQ&&qQ.iterator,VHe=1/lS(BHe+"-0")!==-1/0||PQ&&!NHe(function(){lS(Object(PQ))});OQ.exports=VHe?function(t){var r=jHe(zHe(t)),n=lS(r);return n===0&&UHe(r,0)==="-"?-0:n}:lS});var DQ=S(()=>{"use strict";var $He=K(),RQ=hL();$He({target:"Number",stat:!0,forced:Number.parseFloat!==RQ},{parseFloat:RQ})});var fL=S((o$t,jQ)=>{"use strict";var FQ=Ze(),GHe=Ne(),WHe=Oe(),HHe=qt(),ZHe=np().trim,LQ=rp(),u0=FQ.parseInt,kQ=FQ.Symbol,NQ=kQ&&kQ.iterator,zQ=/^[+-]?0x/i,KHe=WHe(zQ.exec),XHe=u0(LQ+"08")!==8||u0(LQ+"0x16")!==22||NQ&&!GHe(function(){u0(Object(NQ))});jQ.exports=XHe?function(t,r){var n=ZHe(HHe(t));return u0(n,r>>>0||(KHe(zQ,n)?16:10))}:u0});var UQ=S(()=>{"use strict";var YHe=K(),BQ=fL();YHe({target:"Number",stat:!0,forced:Number.parseInt!==BQ},{parseInt:BQ})});var HQ=S(()=>{"use strict";var JHe=K(),dL=Oe(),QHe=Gr(),eZe=o0(),tZe=Y_(),rZe=nL(),pL=Ne(),nZe=RangeError,VQ=String,iZe=isFinite,aZe=Math.abs,oZe=Math.floor,$Q=Math.pow,sZe=Math.round,wu=dL(1 .toExponential),uZe=dL(tZe),GQ=dL("".slice),WQ=wu(-69e-12,4)==="-6.9000e-11"&&wu(1.255,2)==="1.25e+0"&&wu(12345,3)==="1.235e+4"&&wu(25,0)==="3e+1",lZe=function(){return pL(function(){wu(1,1/0)})&&pL(function(){wu(1,-1/0)})},cZe=function(){return!pL(function(){wu(1/0,1/0),wu(NaN,1/0)})},hZe=!WQ||!lZe()||!cZe();JHe({target:"Number",proto:!0,forced:hZe},{toExponential:function(t){var r=eZe(this);if(t===void 0)return wu(r);var n=QHe(t);if(!iZe(r))return String(r);if(n<0||n>20)throw new nZe("Incorrect fraction digits");if(WQ)return wu(r,n);var i="",a,h,p,g;if(r<0&&(i="-",r=-r),r===0)h=0,a=uZe("0",n+1);else{var w=rZe(r);h=oZe(w);var E=$Q(10,h-n),q=sZe(r/E);2*r>=(2*q+1)*E&&(q+=1),q>=$Q(10,n+1)&&(q/=10,h+=1),a=VQ(q)}return n!==0&&(a=GQ(a,0,1)+"."+GQ(a,1)),h===0?(p="+",g="0"):(p=h>0?"+":"-",g=VQ(aZe(h))),a+="e"+p+g,i+a}})});var QQ=S(()=>{"use strict";var fZe=K(),gL=Oe(),pZe=Gr(),dZe=o0(),vZe=Y_(),ZQ=Ne(),mZe=RangeError,YQ=String,JQ=Math.floor,mL=gL(vZe),KQ=gL("".slice),l0=gL(1 .toFixed),Pv=function(e,t,r){return t===0?r:t%2===1?Pv(e,t-1,r*e):Pv(e*e,t/2,r)},gZe=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t},qv=function(e,t,r){for(var n=-1,i=r;++n<6;)i+=t*e[n],e[n]=i%1e7,i=JQ(i/1e7)},vL=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=JQ(n/t),n=n%t*1e7},XQ=function(e){for(var t=6,r="";--t>=0;)if(r!==""||t===0||e[t]!==0){var n=YQ(e[t]);r=r===""?n:r+mL("0",7-n.length)+n}return r},yZe=ZQ(function(){return l0(8e-5,3)!=="0.000"||l0(.9,0)!=="1"||l0(1.255,2)!=="1.25"||l0(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!ZQ(function(){l0({})});fZe({target:"Number",proto:!0,forced:yZe},{toFixed:function(t){var r=dZe(this),n=pZe(t),i=[0,0,0,0,0,0],a="",h="0",p,g,w,E;if(n<0||n>20)throw new mZe("Incorrect fraction digits");if(r!==r)return"NaN";if(r<=-1e21||r>=1e21)return YQ(r);if(r<0&&(a="-",r=-r),r>1e-21)if(p=gZe(r*Pv(2,69,1))-69,g=p<0?r*Pv(2,-p,1):r/Pv(2,p,1),g*=4503599627370496,p=52-p,p>0){for(qv(i,0,g),w=n;w>=7;)qv(i,1e7,0),w-=7;for(qv(i,Pv(10,w,1),0),w=p-1;w>=23;)vL(i,1<<23),w-=23;vL(i,1<<w),qv(i,1,1),vL(i,2),h=XQ(i)}else qv(i,0,g),qv(i,1<<-p,0),h=XQ(i)+mL("0",n);return n>0?(E=h.length,h=a+(E<=n?"0."+mL("0",n-E)+h:KQ(h,0,E-n)+"."+KQ(h,E-n))):h=a+h,h}})});var ree=S(()=>{"use strict";var _Ze=K(),xZe=Oe(),eee=Ne(),tee=o0(),cS=xZe(1 .toPrecision),bZe=eee(function(){return cS(1,void 0)!=="1"})||!eee(function(){cS({})});_Ze({target:"Number",proto:!0,forced:bZe},{toPrecision:function(t){return t===void 0?cS(tee(this)):cS(tee(this),t)}})});var _L=S((v$t,aee)=>{"use strict";var nee=dt(),wZe=Oe(),EZe=Qe(),SZe=Ne(),yL=Gf(),TZe=q_(),IZe=b_(),CZe=Bt(),AZe=gl(),Mv=Object.assign,iee=Object.defineProperty,qZe=wZe([].concat);aee.exports=!Mv||SZe(function(){if(nee&&Mv({b:1},Mv(iee({},"a",{enumerable:!0,get:function(){iee(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},r=Symbol("assign detection"),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(i){t[i]=i}),Mv({},e)[r]!==7||yL(Mv({},t)).join("")!==n})?function(t,r){for(var n=CZe(t),i=arguments.length,a=1,h=TZe.f,p=IZe.f;i>a;)for(var g=AZe(arguments[a++]),w=h?qZe(yL(g),h(g)):yL(g),E=w.length,q=0,P;E>q;)P=w[q++],(!nee||EZe(p,g,P))&&(n[P]=g[P]);return n}:Mv});var see=S(()=>{"use strict";var PZe=K(),oee=_L();PZe({target:"Object",stat:!0,arity:2,forced:Object.assign!==oee},{assign:oee})});var uee=S(()=>{"use strict";var MZe=K(),OZe=dt(),RZe=Cn();MZe({target:"Object",stat:!0,sham:!OZe},{create:RZe})});var c0=S((x$t,cee)=>{"use strict";var DZe=jt(),LZe=Ze(),kZe=Ne(),lee=LE();cee.exports=DZe||!kZe(function(){if(!(lee&&lee<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete LZe[e]}})});var hee=S(()=>{"use strict";var NZe=K(),FZe=dt(),zZe=c0(),jZe=Et(),BZe=Bt(),UZe=Fr();FZe&&NZe({target:"Object",proto:!0,forced:zZe},{__defineGetter__:function(t,r){UZe.f(BZe(this),t,{get:jZe(r),enumerable:!0,configurable:!0})}})});var pee=S(()=>{"use strict";var VZe=K(),$Ze=dt(),fee=aE().f;VZe({target:"Object",stat:!0,forced:Object.defineProperties!==fee,sham:!$Ze},{defineProperties:fee})});var vee=S(()=>{"use strict";var GZe=K(),WZe=dt(),dee=Fr().f;GZe({target:"Object",stat:!0,forced:Object.defineProperty!==dee,sham:!WZe},{defineProperty:dee})});var mee=S(()=>{"use strict";var HZe=K(),ZZe=dt(),KZe=c0(),XZe=Et(),YZe=Bt(),JZe=Fr();ZZe&&HZe({target:"Object",proto:!0,forced:KZe},{__defineSetter__:function(t,r){JZe.f(YZe(this),t,{set:XZe(r),enumerable:!0,configurable:!0})}})});var xL=S((q$t,bee)=>{"use strict";var yee=dt(),QZe=Ne(),_ee=Oe(),eKe=jn(),tKe=Gf(),rKe=Fn(),nKe=b_().f,xee=_ee(nKe),iKe=_ee([].push),aKe=yee&&QZe(function(){var e=Object.create(null);return e[2]=2,!xee(e,2)}),gee=function(e){return function(t){for(var r=rKe(t),n=tKe(r),i=aKe&&eKe(r)===null,a=n.length,h=0,p=[],g;a>h;)g=n[h++],(!yee||(i?g in r:xee(r,g)))&&iKe(p,e?[g,r[g]]:r[g]);return p}};bee.exports={entries:gee(!0),values:gee(!1)}});var wee=S(()=>{"use strict";var oKe=K(),sKe=xL().entries;oKe({target:"Object",stat:!0},{entries:function(t){return sKe(t)}})});var Eee=S(()=>{"use strict";var uKe=K(),lKe=Pl(),cKe=Ne(),hKe=It(),fKe=wh().onFreeze,bL=Object.freeze,pKe=cKe(function(){bL(1)});uKe({target:"Object",stat:!0,forced:pKe,sham:!lKe},{freeze:function(t){return bL&&hKe(t)?bL(fKe(t)):t}})});var See=S(()=>{"use strict";var dKe=K(),vKe=hn(),mKe=as();dKe({target:"Object",stat:!0},{fromEntries:function(t){var r={};return vKe(t,function(n,i){mKe(r,n,i)},{AS_ENTRIES:!0}),r}})});var Cee=S(()=>{"use strict";var gKe=K(),yKe=Ne(),_Ke=Fn(),Tee=vi().f,Iee=dt(),xKe=!Iee||yKe(function(){Tee(1)});gKe({target:"Object",stat:!0,forced:xKe,sham:!Iee},{getOwnPropertyDescriptor:function(t,r){return Tee(_Ke(t),r)}})});var Aee=S(()=>{"use strict";var bKe=K(),wKe=dt(),EKe=tE(),SKe=Fn(),TKe=vi(),IKe=as();bKe({target:"Object",stat:!0,sham:!wKe},{getOwnPropertyDescriptors:function(t){for(var r=SKe(t),n=TKe.f,i=EKe(r),a={},h=0,p,g;i.length>h;)g=n(r,p=i[h++]),g!==void 0&&IKe(a,p,g);return a}})});var qee=S(()=>{"use strict";var CKe=K(),AKe=Ne(),qKe=uE().f,PKe=AKe(function(){return!Object.getOwnPropertyNames(1)});CKe({target:"Object",stat:!0,forced:PKe},{getOwnPropertyNames:qKe})});var Mee=S(()=>{"use strict";var MKe=K(),OKe=Ne(),RKe=Bt(),Pee=jn(),DKe=bE(),LKe=OKe(function(){Pee(1)});MKe({target:"Object",stat:!0,forced:LKe,sham:!DKe},{getPrototypeOf:function(t){return Pee(RKe(t))}})});var wL=S(()=>{"use strict";var kKe=K(),NKe=St(),FKe=Oe(),zKe=Et(),jKe=Br(),BKe=mu(),UKe=hn(),VKe=Ne(),Oee=Object.groupBy,$Ke=NKe("Object","create"),GKe=FKe([].push),WKe=!Oee||VKe(function(){return Oee("ab",function(e){return e}).a.length!==1});kKe({target:"Object",stat:!0,forced:WKe},{groupBy:function(t,r){jKe(t),zKe(r);var n=$Ke(null),i=0;return UKe(t,function(a){var h=BKe(r(a,i++));h in n?GKe(n[h],a):n[h]=[a]}),n}})});var EL=S(()=>{"use strict";var HKe=K(),ZKe=kt();HKe({target:"Object",stat:!0},{hasOwn:ZKe})});var SL=S((Z$t,Ree)=>{"use strict";Ree.exports=Object.is||function(t,r){return t===r?t!==0||1/t===1/r:t!==t&&r!==r}});var Dee=S(()=>{"use strict";var KKe=K(),XKe=SL();KKe({target:"Object",stat:!0},{is:XKe})});var kee=S(()=>{"use strict";var YKe=K(),Lee=tS();YKe({target:"Object",stat:!0,forced:Object.isExtensible!==Lee},{isExtensible:Lee})});var Fee=S(()=>{"use strict";var JKe=K(),QKe=Ne(),e9e=It(),t9e=Oi(),Nee=QE(),TL=Object.isFrozen,r9e=Nee||QKe(function(){TL(1)});JKe({target:"Object",stat:!0,forced:r9e},{isFrozen:function(t){return!e9e(t)||Nee&&t9e(t)==="ArrayBuffer"?!0:TL?TL(t):!1}})});var jee=S(()=>{"use strict";var n9e=K(),i9e=Ne(),a9e=It(),o9e=Oi(),zee=QE(),IL=Object.isSealed,s9e=zee||i9e(function(){IL(1)});n9e({target:"Object",stat:!0,forced:s9e},{isSealed:function(t){return!a9e(t)||zee&&o9e(t)==="ArrayBuffer"?!0:IL?IL(t):!1}})});var Uee=S(()=>{"use strict";var u9e=K(),l9e=Bt(),Bee=Gf(),c9e=Ne(),h9e=c9e(function(){Bee(1)});u9e({target:"Object",stat:!0,forced:h9e},{keys:function(t){return Bee(l9e(t))}})});var Vee=S(()=>{"use strict";var f9e=K(),p9e=dt(),d9e=c0(),v9e=Bt(),m9e=mu(),g9e=jn(),y9e=vi().f;p9e&&f9e({target:"Object",proto:!0,forced:d9e},{__lookupGetter__:function(t){var r=v9e(this),n=m9e(t),i;do if(i=y9e(r,n))return i.get;while(r=g9e(r))}})});var $ee=S(()=>{"use strict";var _9e=K(),x9e=dt(),b9e=c0(),w9e=Bt(),E9e=mu(),S9e=jn(),T9e=vi().f;x9e&&_9e({target:"Object",proto:!0,forced:b9e},{__lookupSetter__:function(t){var r=w9e(this),n=E9e(t),i;do if(i=T9e(r,n))return i.set;while(r=S9e(r))}})});var Gee=S(()=>{"use strict";var I9e=K(),C9e=It(),A9e=wh().onFreeze,q9e=Pl(),P9e=Ne(),CL=Object.preventExtensions,M9e=P9e(function(){CL(1)});I9e({target:"Object",stat:!0,forced:M9e,sham:!q9e},{preventExtensions:function(t){return CL&&C9e(t)?CL(A9e(t)):t}})});var Xee=S(()=>{"use strict";var O9e=dt(),R9e=Wr(),D9e=It(),L9e=FO(),k9e=Bt(),N9e=Br(),Wee=Object.getPrototypeOf,Hee=Object.setPrototypeOf,Zee=Object.prototype,Kee="__proto__";if(O9e&&Wee&&Hee&&!(Kee in Zee))try{R9e(Zee,Kee,{configurable:!0,get:function(){return Wee(k9e(this))},set:function(t){var r=N9e(this);L9e(t)&&D9e(r)&&Hee(r,t)}})}catch(e){}});var Yee=S(()=>{"use strict";var F9e=K(),z9e=It(),j9e=wh().onFreeze,B9e=Pl(),U9e=Ne(),AL=Object.seal,V9e=U9e(function(){AL(1)});F9e({target:"Object",stat:!0,forced:V9e,sham:!B9e},{seal:function(t){return AL&&z9e(t)?AL(j9e(t)):t}})});var Jee=S(()=>{"use strict";var $9e=K(),G9e=is();$9e({target:"Object",stat:!0},{setPrototypeOf:G9e})});var ete=S((g8t,Qee)=>{"use strict";var W9e=nE(),H9e=Ja();Qee.exports=W9e?{}.toString:function(){return"[object "+H9e(this)+"]"}});var tte=S(()=>{"use strict";var Z9e=nE(),K9e=br(),X9e=ete();Z9e||K9e(Object.prototype,"toString",X9e,{unsafe:!0})});var rte=S(()=>{"use strict";var Y9e=K(),J9e=xL().values;Y9e({target:"Object",stat:!0},{values:function(t){return J9e(t)}})});var ite=S(()=>{"use strict";var Q9e=K(),nte=hL();Q9e({global:!0,forced:parseFloat!==nte},{parseFloat:nte})});var ote=S(()=>{"use strict";var e7e=K(),ate=fL();e7e({global:!0,forced:parseInt!==ate},{parseInt:ate})});var h0=S((I8t,ste)=>{"use strict";var t7e=zs(),r7e=ah(),n7e=TypeError;ste.exports=function(e){if(t7e(e))return e;throw new n7e(r7e(e)+" is not a constructor")}});var f0=S((C8t,lte)=>{"use strict";var ute=Ye(),i7e=h0(),a7e=Nn(),o7e=yt(),s7e=o7e("species");lte.exports=function(e,t){var r=ute(e).constructor,n;return r===void 0||a7e(n=ute(r)[s7e])?t:i7e(n)}});var Ro=S((A8t,cte)=>{"use strict";var u7e=TypeError;cte.exports=function(e,t){if(e<t)throw new u7e("Not enough arguments");return e}});var qL=S((q8t,hte)=>{"use strict";var l7e=Ds();hte.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(l7e)});var v0=S((P8t,xte)=>{"use strict";var Do=Ze(),c7e=aa(),h7e=Pr(),fte=Ot(),f7e=kt(),_te=Ne(),pte=dO(),p7e=Qa(),dte=S_(),d7e=Ro(),v7e=qL(),m7e=Qf(),LL=Do.setImmediate,kL=Do.clearImmediate,g7e=Do.process,PL=Do.Dispatch,y7e=Do.Function,vte=Do.MessageChannel,_7e=Do.String,ML=0,p0={},mte="onreadystatechange",d0,ip,OL,RL;_te(function(){d0=Do.location});var NL=function(e){if(f7e(p0,e)){var t=p0[e];delete p0[e],t()}},DL=function(e){return function(){NL(e)}},gte=function(e){NL(e.data)},yte=function(e){Do.postMessage(_7e(e),d0.protocol+"//"+d0.host)};(!LL||!kL)&&(LL=function(t){d7e(arguments.length,1);var r=fte(t)?t:y7e(t),n=p7e(arguments,1);return p0[++ML]=function(){c7e(r,void 0,n)},ip(ML),ML},kL=function(t){delete p0[t]},m7e?ip=function(e){g7e.nextTick(DL(e))}:PL&&PL.now?ip=function(e){PL.now(DL(e))}:vte&&!v7e?(OL=new vte,RL=OL.port2,OL.port1.onmessage=gte,ip=h7e(RL.postMessage,RL)):Do.addEventListener&&fte(Do.postMessage)&&!Do.importScripts&&d0&&d0.protocol!=="file:"&&!_te(yte)?(ip=yte,Do.addEventListener("message",gte,!1)):mte in dte("script")?ip=function(e){pte.appendChild(dte("script"))[mte]=function(){pte.removeChild(this),NL(e)}}:ip=function(e){setTimeout(DL(e),0)});xte.exports={set:LL,clear:kL}});var FL=S((M8t,wte)=>{"use strict";var bte=Ze(),x7e=dt(),b7e=Object.getOwnPropertyDescriptor;wte.exports=function(e){if(!x7e)return bte[e];var t=b7e(bte,e);return t&&t.value}});var zL=S((O8t,Ste)=>{"use strict";var Ete=function(){this.head=null,this.tail=null};Ete.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};Ste.exports=Ete});var Ite=S((R8t,Tte)=>{"use strict";var w7e=Ds();Tte.exports=/ipad|iphone|ipod/i.test(w7e)&&typeof Pebble!="undefined"});var Ate=S((D8t,Cte)=>{"use strict";var E7e=Ds();Cte.exports=/web0s(?!.*chrome)/i.test(E7e)});var GL=S((L8t,Dte)=>{"use strict";var Rv=Ze(),S7e=FL(),qte=Pr(),jL=v0().set,T7e=zL(),I7e=qL(),C7e=Ite(),A7e=Ate(),BL=Qf(),Pte=Rv.MutationObserver||Rv.WebKitMutationObserver,Mte=Rv.document,Ote=Rv.process,hS=Rv.Promise,$L=S7e("queueMicrotask"),Ov,UL,VL,fS,Rte;$L||(m0=new T7e,g0=function(){var e,t;for(BL&&(e=Ote.domain)&&e.exit();t=m0.get();)try{t()}catch(r){throw m0.head&&Ov(),r}e&&e.enter()},!I7e&&!BL&&!A7e&&Pte&&Mte?(UL=!0,VL=Mte.createTextNode(""),new Pte(g0).observe(VL,{characterData:!0}),Ov=function(){VL.data=UL=!UL}):!C7e&&hS&&hS.resolve?(fS=hS.resolve(void 0),fS.constructor=hS,Rte=qte(fS.then,fS),Ov=function(){Rte(g0)}):BL?Ov=function(){Ote.nextTick(g0)}:(jL=qte(jL,Rv),Ov=function(){jL(g0)}),$L=function(e){m0.head||Ov(),m0.add(e)});var m0,g0;Dte.exports=$L});var WL=S((k8t,Lte)=>{"use strict";Lte.exports=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(r){}}});var Eh=S((N8t,kte)=>{"use strict";kte.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var ap=S((F8t,Nte)=>{"use strict";var q7e=Ze();Nte.exports=q7e.Promise});var Dv=S((z8t,Bte)=>{"use strict";var P7e=Ze(),y0=ap(),M7e=Ot(),O7e=pv(),R7e=T_(),D7e=yt(),Fte=H_(),L7e=jt(),HL=vu(),zte=y0&&y0.prototype,k7e=D7e("species"),ZL=!1,jte=M7e(P7e.PromiseRejectionEvent),N7e=O7e("Promise",function(){var e=R7e(y0),t=e!==String(y0);if(!t&&HL===66||L7e&&!(zte.catch&&zte.finally))return!0;if(!HL||HL<51||!/native code/.test(e)){var r=new y0(function(a){a(1)}),n=function(a){a(function(){},function(){})},i=r.constructor={};if(i[k7e]=n,ZL=r.then(function(){})instanceof n,!ZL)return!0}return!t&&(Fte==="BROWSER"||Fte==="DENO")&&!jte});Bte.exports={CONSTRUCTOR:N7e,REJECTION_EVENT:jte,SUBCLASSING:ZL}});var Eu=S((j8t,Vte)=>{"use strict";var Ute=Et(),F7e=TypeError,z7e=function(e){var t,r;this.promise=new e(function(n,i){if(t!==void 0||r!==void 0)throw new F7e("Bad Promise constructor");t=n,r=i}),this.resolve=Ute(t),this.reject=Ute(r)};Vte.exports.f=function(e){return new z7e(e)}});var ure=S(()=>{"use strict";var j7e=K(),B7e=jt(),mS=Qf(),Sh=Ze(),Fv=Qe(),$te=br(),Gte=is(),U7e=Aa(),V7e=vh(),$7e=Et(),vS=Ot(),G7e=It(),W7e=oa(),H7e=f0(),Xte=v0().set,QL=GL(),Z7e=WL(),K7e=Eh(),X7e=zL(),Yte=dr(),gS=ap(),ek=Dv(),Jte=Eu(),yS="Promise",Qte=ek.CONSTRUCTOR,Y7e=ek.REJECTION_EVENT,J7e=ek.SUBCLASSING,KL=Yte.getterFor(yS),Q7e=Yte.set,Lv=gS&&gS.prototype,op=gS,pS=Lv,ere=Sh.TypeError,XL=Sh.document,tk=Sh.process,YL=Jte.f,eXe=YL,tXe=!!(XL&&XL.createEvent&&Sh.dispatchEvent),tre="unhandledrejection",rXe="rejectionhandled",Wte=0,rre=1,nXe=2,rk=1,nre=2,dS,Hte,iXe,Zte,ire=function(e){var t;return G7e(e)&&vS(t=e.then)?t:!1},are=function(e,t){var r=t.value,n=t.state===rre,i=n?e.ok:e.fail,a=e.resolve,h=e.reject,p=e.domain,g,w,E;try{i?(n||(t.rejection===nre&&oXe(t),t.rejection=rk),i===!0?g=r:(p&&p.enter(),g=i(r),p&&(p.exit(),E=!0)),g===e.promise?h(new ere("Promise-chain cycle")):(w=ire(g))?Fv(w,g,a,h):a(g)):h(r)}catch(q){p&&!E&&p.exit(),h(q)}},ore=function(e,t){e.notified||(e.notified=!0,QL(function(){for(var r=e.reactions,n;n=r.get();)are(n,e);e.notified=!1,t&&!e.rejection&&aXe(e)}))},sre=function(e,t,r){var n,i;tXe?(n=XL.createEvent("Event"),n.promise=t,n.reason=r,n.initEvent(e,!1,!0),Sh.dispatchEvent(n)):n={promise:t,reason:r},!Y7e&&(i=Sh["on"+e])?i(n):e===tre&&Z7e("Unhandled promise rejection",r)},aXe=function(e){Fv(Xte,Sh,function(){var t=e.facade,r=e.value,n=Kte(e),i;if(n&&(i=K7e(function(){mS?tk.emit("unhandledRejection",r,t):sre(tre,t,r)}),e.rejection=mS||Kte(e)?nre:rk,i.error))throw i.value})},Kte=function(e){return e.rejection!==rk&&!e.parent},oXe=function(e){Fv(Xte,Sh,function(){var t=e.facade;mS?tk.emit("rejectionHandled",t):sre(rXe,t,e.value)})},kv=function(e,t,r){return function(n){e(t,n,r)}},Nv=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=nXe,ore(e,!0))},JL=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new ere("Promise can't be resolved itself");var n=ire(t);n?QL(function(){var i={done:!1};try{Fv(n,t,kv(JL,i,e),kv(Nv,i,e))}catch(a){Nv(i,a,e)}}):(e.value=t,e.state=rre,ore(e,!1))}catch(i){Nv({done:!1},i,e)}}};if(Qte&&(op=function(t){W7e(this,pS),$7e(t),Fv(dS,this);var r=KL(this);try{t(kv(JL,r),kv(Nv,r))}catch(n){Nv(r,n)}},pS=op.prototype,dS=function(t){Q7e(this,{type:yS,done:!1,notified:!1,parent:!1,reactions:new X7e,rejection:!1,state:Wte,value:null})},dS.prototype=$te(pS,"then",function(t,r){var n=KL(this),i=YL(H7e(this,op));return n.parent=!0,i.ok=vS(t)?t:!0,i.fail=vS(r)&&r,i.domain=mS?tk.domain:void 0,n.state===Wte?n.reactions.add(i):QL(function(){are(i,n)}),i.promise}),Hte=function(){var e=new dS,t=KL(e);this.promise=e,this.resolve=kv(JL,t),this.reject=kv(Nv,t)},Jte.f=YL=function(e){return e===op||e===iXe?new Hte(e):eXe(e)},!B7e&&vS(gS)&&Lv!==Object.prototype)){Zte=Lv.then,J7e||$te(Lv,"then",function(t,r){var n=this;return new op(function(i,a){Fv(Zte,n,i,a)}).then(t,r)},{unsafe:!0});try{delete Lv.constructor}catch(e){}Gte&&Gte(Lv,pS)}j7e({global:!0,constructor:!0,wrap:!0,forced:Qte},{Promise:op});U7e(op,yS,!1,!0);V7e(yS)});var _0=S((V8t,lre)=>{"use strict";var sXe=ap(),uXe=B_(),lXe=Dv().CONSTRUCTOR;lre.exports=lXe||!uXe(function(e){sXe.all(e).then(void 0,function(){})})});var cre=S(()=>{"use strict";var cXe=K(),hXe=Qe(),fXe=Et(),pXe=Eu(),dXe=Eh(),vXe=hn(),mXe=_0();cXe({target:"Promise",stat:!0,forced:mXe},{all:function(t){var r=this,n=pXe.f(r),i=n.resolve,a=n.reject,h=dXe(function(){var p=fXe(r.resolve),g=[],w=0,E=1;vXe(t,function(q){var P=w++,k=!1;E++,hXe(p,r,q).then(function(W){k||(k=!0,g[P]=W,--E||i(g))},a)}),--E||i(g)});return h.error&&a(h.value),n.promise}})});var fre=S(()=>{"use strict";var gXe=K(),yXe=jt(),_Xe=Dv().CONSTRUCTOR,ik=ap(),xXe=St(),bXe=Ot(),wXe=br(),hre=ik&&ik.prototype;gXe({target:"Promise",proto:!0,forced:_Xe,real:!0},{catch:function(e){return this.then(void 0,e)}});!yXe&&bXe(ik)&&(nk=xXe("Promise").prototype.catch,hre.catch!==nk&&wXe(hre,"catch",nk,{unsafe:!0}));var nk});var pre=S(()=>{"use strict";var EXe=K(),SXe=Qe(),TXe=Et(),IXe=Eu(),CXe=Eh(),AXe=hn(),qXe=_0();EXe({target:"Promise",stat:!0,forced:qXe},{race:function(t){var r=this,n=IXe.f(r),i=n.reject,a=CXe(function(){var h=TXe(r.resolve);AXe(t,function(p){SXe(h,r,p).then(n.resolve,i)})});return a.error&&i(a.value),n.promise}})});var dre=S(()=>{"use strict";var PXe=K(),MXe=Eu(),OXe=Dv().CONSTRUCTOR;PXe({target:"Promise",stat:!0,forced:OXe},{reject:function(t){var r=MXe.f(this),n=r.reject;return n(t),r.promise}})});var ak=S((J8t,vre)=>{"use strict";var RXe=Ye(),DXe=It(),LXe=Eu();vre.exports=function(e,t){if(RXe(e),DXe(t)&&t.constructor===e)return t;var r=LXe.f(e),n=r.resolve;return n(t),r.promise}});var yre=S(()=>{"use strict";var kXe=K(),NXe=St(),mre=jt(),FXe=ap(),gre=Dv().CONSTRUCTOR,zXe=ak(),jXe=NXe("Promise"),BXe=mre&&!gre;kXe({target:"Promise",stat:!0,forced:mre||gre},{resolve:function(t){return zXe(BXe&&this===jXe?FXe:this,t)}})});var _re=S(()=>{"use strict";ure();cre();fre();pre();dre();yre()});var ok=S(()=>{"use strict";var UXe=K(),VXe=Qe(),$Xe=Et(),GXe=Eu(),WXe=Eh(),HXe=hn(),ZXe=_0();UXe({target:"Promise",stat:!0,forced:ZXe},{allSettled:function(t){var r=this,n=GXe.f(r),i=n.resolve,a=n.reject,h=WXe(function(){var p=$Xe(r.resolve),g=[],w=0,E=1;HXe(t,function(q){var P=w++,k=!1;E++,VXe(p,r,q).then(function(W){k||(k=!0,g[P]={status:"fulfilled",value:W},--E||i(g))},function(W){k||(k=!0,g[P]={status:"rejected",reason:W},--E||i(g))})}),--E||i(g)});return h.error&&a(h.value),n.promise}})});var sk=S(()=>{"use strict";var KXe=K(),XXe=Qe(),YXe=Et(),JXe=St(),QXe=Eu(),eYe=Eh(),tYe=hn(),rYe=_0(),xre="No one promise resolved";KXe({target:"Promise",stat:!0,forced:rYe},{any:function(t){var r=this,n=JXe("AggregateError"),i=QXe.f(r),a=i.resolve,h=i.reject,p=eYe(function(){var g=YXe(r.resolve),w=[],E=0,q=1,P=!1;tYe(t,function(k){var W=E++,Q=!1;q++,XXe(g,r,k).then(function($){Q||P||(P=!0,a($))},function($){Q||P||(Q=!0,w[W]=$,--q||h(new n(w,xre)))})}),--q||h(new n(w,xre))});return p.error&&h(p.value),i.promise}})});var Sre=S(()=>{"use strict";var nYe=K(),iYe=jt(),_S=ap(),aYe=Ne(),wre=St(),Ere=Ot(),oYe=f0(),bre=ak(),sYe=br(),lk=_S&&_S.prototype,uYe=!!_S&&aYe(function(){lk.finally.call({then:function(){}},function(){})});nYe({target:"Promise",proto:!0,real:!0,forced:uYe},{finally:function(e){var t=oYe(this,wre("Promise")),r=Ere(e);return this.then(r?function(n){return bre(t,e()).then(function(){return n})}:e,r?function(n){return bre(t,e()).then(function(){throw n})}:e)}});!iYe&&Ere(_S)&&(uk=wre("Promise").prototype.finally,lk.finally!==uk&&sYe(lk,"finally",uk,{unsafe:!0}));var uk});var hk=S(()=>{"use strict";var lYe=K(),cYe=Ze(),hYe=aa(),fYe=Qa(),pYe=Eu(),dYe=Et(),Ire=Eh(),ck=cYe.Promise,Tre=!1,vYe=!ck||!ck.try||Ire(function(){ck.try(function(e){Tre=e===8},8)}).error||!Tre;lYe({target:"Promise",stat:!0,forced:vYe},{try:function(e){var t=arguments.length>1?fYe(arguments,1):[],r=pYe.f(this),n=Ire(function(){return hYe(dYe(e),void 0,t)});return(n.error?r.reject:r.resolve)(n.value),r.promise}})});var fk=S(()=>{"use strict";var mYe=K(),gYe=Eu();mYe({target:"Promise",stat:!0},{withResolvers:function(){var t=gYe.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var Cre=S(()=>{"use strict";var yYe=K(),_Ye=aa(),xYe=Et(),bYe=Ye(),wYe=Ne(),EYe=!wYe(function(){Reflect.apply(function(){})});yYe({target:"Reflect",stat:!0,forced:EYe},{apply:function(t,r,n){return _Ye(xYe(t),r,bYe(n))}})});var Dre=S(()=>{"use strict";var SYe=K(),TYe=St(),pk=aa(),IYe=_D(),Are=h0(),CYe=Ye(),qre=It(),AYe=Cn(),Mre=Ne(),dk=TYe("Reflect","construct"),qYe=Object.prototype,PYe=[].push,Ore=Mre(function(){function e(){}return!(dk(function(){},[],e)instanceof e)}),Rre=!Mre(function(){dk(function(){})}),Pre=Ore||Rre;SYe({target:"Reflect",stat:!0,forced:Pre,sham:Pre},{construct:function(t,r){Are(t),CYe(r);var n=arguments.length<3?t:Are(arguments[2]);if(Rre&&!Ore)return dk(t,r,n);if(t===n){switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3]);}var i=[null];return pk(PYe,i,r),new(pk(IYe,t,i))}var a=n.prototype,h=AYe(qre(a)?a:qYe),p=pk(t,h,r);return qre(p)?p:h}})});var Nre=S(()=>{"use strict";var MYe=K(),OYe=dt(),Lre=Ye(),RYe=mu(),kre=Fr(),DYe=Ne(),LYe=DYe(function(){Reflect.defineProperty(kre.f({},1,{value:1}),1,{value:2})});MYe({target:"Reflect",stat:!0,forced:LYe,sham:!OYe},{defineProperty:function(t,r,n){Lre(t);var i=RYe(r);Lre(n);try{return kre.f(t,i,n),!0}catch(a){return!1}}})});var Fre=S(()=>{"use strict";var kYe=K(),NYe=Ye(),FYe=vi().f;kYe({target:"Reflect",stat:!0},{deleteProperty:function(t,r){var n=FYe(NYe(t),r);return n&&!n.configurable?!1:delete t[r]}})});var vk=S((bGt,jre)=>{"use strict";var zre=kt();jre.exports=function(e){return e!==void 0&&(zre(e,"value")||zre(e,"writable"))}});var Ure=S(()=>{"use strict";var zYe=K(),jYe=Qe(),BYe=It(),UYe=Ye(),VYe=vk(),$Ye=vi(),GYe=jn();function Bre(e,t){var r=arguments.length<3?e:arguments[2],n,i;if(UYe(e)===r)return e[t];if(n=$Ye.f(e,t),n)return VYe(n)?n.value:n.get===void 0?void 0:jYe(n.get,r);if(BYe(i=GYe(e)))return Bre(i,t,r)}zYe({target:"Reflect",stat:!0},{get:Bre})});var Vre=S(()=>{"use strict";var WYe=K(),HYe=dt(),ZYe=Ye(),KYe=vi();WYe({target:"Reflect",stat:!0,sham:!HYe},{getOwnPropertyDescriptor:function(t,r){return KYe.f(ZYe(t),r)}})});var $re=S(()=>{"use strict";var XYe=K(),YYe=Ye(),JYe=jn(),QYe=bE();XYe({target:"Reflect",stat:!0,sham:!QYe},{getPrototypeOf:function(t){return JYe(YYe(t))}})});var Gre=S(()=>{"use strict";var eJe=K();eJe({target:"Reflect",stat:!0},{has:function(t,r){return r in t}})});var Wre=S(()=>{"use strict";var tJe=K(),rJe=Ye(),nJe=tS();tJe({target:"Reflect",stat:!0},{isExtensible:function(t){return rJe(t),nJe(t)}})});var Hre=S(()=>{"use strict";var iJe=K(),aJe=tE();iJe({target:"Reflect",stat:!0},{ownKeys:aJe})});var Zre=S(()=>{"use strict";var oJe=K(),sJe=St(),uJe=Ye(),lJe=Pl();oJe({target:"Reflect",stat:!0,sham:!lJe},{preventExtensions:function(t){uJe(t);try{var r=sJe("Object","preventExtensions");return r&&r(t),!0}catch(n){return!1}}})});var Qre=S(()=>{"use strict";var cJe=K(),hJe=Qe(),fJe=Ye(),Kre=It(),pJe=vk(),dJe=Ne(),mk=Fr(),Xre=vi(),vJe=jn(),Yre=Xa();function Jre(e,t,r){var n=arguments.length<4?e:arguments[3],i=Xre.f(fJe(e),t),a,h,p;if(!i){if(Kre(h=vJe(e)))return Jre(h,t,r,n);i=Yre(0)}if(pJe(i)){if(i.writable===!1||!Kre(n))return!1;if(a=Xre.f(n,t)){if(a.get||a.set||a.writable===!1)return!1;a.value=r,mk.f(n,t,a)}else mk.f(n,t,Yre(0,r))}else{if(p=i.set,p===void 0)return!1;hJe(p,n,r)}return!0}var mJe=dJe(function(){var e=function(){},t=mk.f(new e,"a",{configurable:!0});return Reflect.set(e.prototype,"a",1,t)!==!1});cJe({target:"Reflect",stat:!0,forced:mJe},{set:Jre})});var tne=S(()=>{"use strict";var gJe=K(),yJe=Ye(),_Je=zO(),ene=is();ene&&gJe({target:"Reflect",stat:!0},{setPrototypeOf:function(t,r){yJe(t),_Je(r);try{return ene(t,r),!0}catch(n){return!1}}})});var rne=S(()=>{"use strict";var xJe=K(),bJe=Ze(),wJe=Aa();xJe({global:!0},{Reflect:{}});wJe(bJe.Reflect,"Reflect",!0)});var x0=S((UGt,nne)=>{"use strict";var EJe=It(),SJe=Oi(),TJe=yt(),IJe=TJe("match");nne.exports=function(e){var t;return EJe(e)&&((t=e[IJe])!==void 0?!!t:SJe(e)==="RegExp")}});var xS=S((VGt,ine)=>{"use strict";var CJe=Ye();ine.exports=function(){var e=CJe(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var zv=S(($Gt,one)=>{"use strict";var AJe=Qe(),qJe=kt(),PJe=Ri(),MJe=xS(),ane=RegExp.prototype;one.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in ane)&&!qJe(e,"flags")&&PJe(ane,e)?AJe(MJe,e):t}});var b0=S((GGt,sne)=>{"use strict";var gk=Ne(),OJe=Ze(),yk=OJe.RegExp,_k=gk(function(){var e=yk("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),RJe=_k||gk(function(){return!yk("a","y").sticky}),DJe=_k||gk(function(){var e=yk("^r","gy");return e.lastIndex=2,e.exec("str")!==null});sne.exports={BROKEN_CARET:DJe,MISSED_STICKY:RJe,UNSUPPORTED_Y:_k}});var bS=S((WGt,une)=>{"use strict";var LJe=Ne(),kJe=Ze(),NJe=kJe.RegExp;une.exports=LJe(function(){var e=NJe(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")})});var xk=S((HGt,lne)=>{"use strict";var FJe=Ne(),zJe=Ze(),jJe=zJe.RegExp;lne.exports=FJe(function(){var e=jJe("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"})});var _ne=S(()=>{"use strict";var BJe=dt(),Sk=Ze(),w0=Oe(),UJe=pv(),VJe=ch(),$Je=zn(),GJe=Cn(),WJe=sh().f,cne=Ri(),HJe=x0(),hne=qt(),ZJe=zv(),vne=b0(),KJe=jO(),XJe=br(),YJe=Ne(),JJe=kt(),QJe=dr().enforce,eQe=vh(),tQe=yt(),mne=bS(),gne=xk(),rQe=tQe("match"),Ih=Sk.RegExp,jv=Ih.prototype,nQe=Sk.SyntaxError,iQe=w0(jv.exec),wS=w0("".charAt),fne=w0("".replace),pne=w0("".indexOf),dne=w0("".slice),aQe=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,sp=/a/g,bk=/a/g,oQe=new Ih(sp)!==sp,yne=vne.MISSED_STICKY,sQe=vne.UNSUPPORTED_Y,uQe=BJe&&(!oQe||yne||mne||gne||YJe(function(){return bk[rQe]=!1,Ih(sp)!==sp||Ih(bk)===bk||String(Ih(sp,"i"))!=="/a/i"})),lQe=function(e){for(var t=e.length,r=0,n="",i=!1,a;r<=t;r++){if(a=wS(e,r),a==="\\"){n+=a+wS(e,++r);continue}!i&&a==="."?n+="[\\s\\S]":(a==="["?i=!0:a==="]"&&(i=!1),n+=a)}return n},cQe=function(e){for(var t=e.length,r=0,n="",i=[],a=GJe(null),h=!1,p=!1,g=0,w="",E;r<=t;r++){if(E=wS(e,r),E==="\\")E+=wS(e,++r);else if(E==="]")h=!1;else if(!h)switch(!0){case E==="[":h=!0;break;case E==="(":if(n+=E,dne(e,r+1,r+3)==="?:")continue;iQe(aQe,dne(e,r+1))&&(r+=2,p=!0),g++;continue;case E===">"&&p:if(w===""||JJe(a,w))throw new nQe("Invalid capture group name");a[w]=!0,i[i.length]=[w,g],p=!1,w="";continue;}p?w+=E:n+=E}return[n,i]};if(UJe("RegExp",uQe)){for(Th=function(t,r){var n=cne(jv,this),i=HJe(t),a=r===void 0,h=[],p=t,g,w,E,q,P,k;if(!n&&i&&a&&t.constructor===Th)return t;if((i||cne(jv,t))&&(t=t.source,a&&(r=ZJe(p))),t=t===void 0?"":hne(t),r=r===void 0?"":hne(r),p=t,mne&&("dotAll"in sp)&&(w=!!r&&pne(r,"s")>-1,w&&(r=fne(r,/s/g,""))),g=r,yne&&("sticky"in sp)&&(E=!!r&&pne(r,"y")>-1,E&&sQe&&(r=fne(r,/y/g,""))),gne&&(q=cQe(t),t=q[0],h=q[1]),P=VJe(Ih(t,r),n?this:jv,Th),(w||E||h.length)&&(k=QJe(P),w&&(k.dotAll=!0,k.raw=Th(lQe(t),g)),E&&(k.sticky=!0),h.length&&(k.groups=h)),t!==p)try{$Je(P,"source",p===""?"(?:)":p)}catch(W){}return P},wk=WJe(Ih),Ek=0;wk.length>Ek;)KJe(Th,Ih,wk[Ek++]);jv.constructor=Th,Th.prototype=jv,XJe(Sk,"RegExp",Th,{constructor:!0})}var Th,wk,Ek;eQe("RegExp")});var bne=S(()=>{"use strict";var hQe=dt(),fQe=bS(),pQe=Oi(),dQe=Wr(),vQe=dr().get,xne=RegExp.prototype,mQe=TypeError;hQe&&fQe&&dQe(xne,"dotAll",{configurable:!0,get:function(){if(this!==xne){if(pQe(this)==="RegExp")return!!vQe(this).dotAll;throw new mQe("Incompatible receiver, RegExp required")}}})});var TS=S((JGt,Ene)=>{"use strict";var Bv=Qe(),SS=Oe(),gQe=qt(),yQe=xS(),_Qe=b0(),xQe=_l(),bQe=Cn(),wQe=dr().get,EQe=bS(),SQe=xk(),TQe=xQe("native-string-replace",String.prototype.replace),ES=RegExp.prototype.exec,Ik=ES,IQe=SS("".charAt),CQe=SS("".indexOf),AQe=SS("".replace),Tk=SS("".slice),Ck=function(){var e=/a/,t=/b*/g;return Bv(ES,e,"a"),Bv(ES,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),wne=_Qe.BROKEN_CARET,Ak=/()??/.exec("")[1]!==void 0,qQe=Ck||Ak||wne||EQe||SQe;qQe&&(Ik=function(t){var r=this,n=wQe(r),i=gQe(t),a=n.raw,h,p,g,w,E,q,P;if(a)return a.lastIndex=r.lastIndex,h=Bv(Ik,a,i),r.lastIndex=a.lastIndex,h;var k=n.groups,W=wne&&r.sticky,Q=Bv(yQe,r),$=r.source,V=0,Z=i;if(W&&(Q=AQe(Q,"y",""),CQe(Q,"g")===-1&&(Q+="g"),Z=Tk(i,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&IQe(i,r.lastIndex-1)!==`
`)&&($="(?: "+$+")",Z=" "+Z,V++),p=new RegExp("^(?:"+$+")",Q)),Ak&&(p=new RegExp("^"+$+"$(?!\\s)",Q)),Ck&&(g=r.lastIndex),w=Bv(ES,W?p:r,Z),W?w?(w.input=Tk(w.input,V),w[0]=Tk(w[0],V),w.index=r.lastIndex,r.lastIndex+=w[0].length):r.lastIndex=0:Ck&&w&&(r.lastIndex=r.global?w.index+w[0].length:g),Ak&&w&&w.length>1&&Bv(TQe,w[0],p,function(){for(E=1;E<arguments.length-2;E++)arguments[E]===void 0&&(w[E]=void 0)}),w&&k)for(w.groups=q=bQe(null),E=0;E<k.length;E++)P=k[E],q[P[0]]=w[P[1]];return w});Ene.exports=Ik});var IS=S(()=>{"use strict";var PQe=K(),Sne=TS();PQe({target:"RegExp",proto:!0,forced:/./.exec!==Sne},{exec:Sne})});var Cne=S(()=>{"use strict";var MQe=Ze(),OQe=dt(),RQe=Wr(),DQe=xS(),LQe=Ne(),Tne=MQe.RegExp,Ine=Tne.prototype,kQe=OQe&&LQe(function(){var e=!0;try{Tne(".","d")}catch(g){e=!1}var t={},r="",n=e?"dgimsy":"gimsy",i=function(g,w){Object.defineProperty(t,g,{get:function(){return r+=w,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(a.hasIndices="d");for(var h in a)i(h,a[h]);var p=Object.getOwnPropertyDescriptor(Ine,"flags").get.call(t);return p!==n||r!==n});kQe&&RQe(Ine,"flags",{configurable:!0,get:DQe})});var qne=S(()=>{"use strict";var NQe=dt(),FQe=b0().MISSED_STICKY,zQe=Oi(),jQe=Wr(),BQe=dr().get,Ane=RegExp.prototype,UQe=TypeError;NQe&&FQe&&jQe(Ane,"sticky",{configurable:!0,get:function(){if(this!==Ane){if(zQe(this)==="RegExp")return!!BQe(this).sticky;throw new UQe("Incompatible receiver, RegExp required")}}})});var One=S(()=>{"use strict";IS();var VQe=K(),Pne=Qe(),$Qe=Ot(),Mne=Ye(),GQe=qt(),WQe=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),HQe=/./.test;VQe({target:"RegExp",proto:!0,forced:!WQe},{test:function(e){var t=Mne(this),r=GQe(e),n=t.exec;if(!$Qe(n))return Pne(HQe,t,r);var i=Pne(n,t,r);return i===null?!1:(Mne(i),!0)}})});var kne=S(()=>{"use strict";var ZQe=Uf().PROPER,KQe=br(),XQe=Ye(),Rne=qt(),YQe=Ne(),JQe=zv(),qk="toString",Dne=RegExp.prototype,Lne=Dne[qk],QQe=YQe(function(){return Lne.call({source:"a",flags:"b"})!=="/a/b"}),eet=ZQe&&Lne.name!==qk;(QQe||eet)&&KQe(Dne,qk,function(){var t=XQe(this),r=Rne(t.source),n=Rne(JQe(t));return"/"+r+"/"+n},{unsafe:!0})});var Nne=S(()=>{"use strict";var tet=t0(),ret=JD();tet("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},ret)});var Fne=S(()=>{"use strict";Nne()});var yi=S((pWt,zne)=>{"use strict";var Pk=Oe(),CS=Set.prototype;zne.exports={Set,add:Pk(CS.add),has:Pk(CS.has),remove:Pk(CS.delete),proto:CS}});var Di=S((dWt,jne)=>{"use strict";var net=yi().has;jne.exports=function(e){return net(e),e}});var Ol=S((vWt,Bne)=>{"use strict";var iet=Qe();Bne.exports=function(e,t,r){for(var n=r?e:e.iterator,i=e.next,a,h;!(a=iet(i,n)).done;)if(h=t(a.value),h!==void 0)return h}});var ro=S((mWt,Wne)=>{"use strict";var Une=Oe(),aet=Ol(),Vne=yi(),oet=Vne.Set,$ne=Vne.proto,set=Une($ne.forEach),Gne=Une($ne.keys),uet=Gne(new oet).next;Wne.exports=function(e,t,r){return r?aet({iterator:Gne(e),next:uet},t):set(e,t)}});var AS=S((gWt,Zne)=>{"use strict";var Hne=yi(),cet=ro(),het=Hne.Set,fet=Hne.add;Zne.exports=function(e){var t=new het;return cet(e,function(r){fet(t,r)}),t}});var Uv=S((yWt,Kne)=>{"use strict";var pet=F_(),det=yi();Kne.exports=pet(det.proto,"size","get")||function(e){return e.size}});var Ch=S((_Wt,tie)=>{"use strict";var Xne=Et(),Qne=Ye(),Yne=Qe(),vet=Gr(),met=tn(),Jne="Invalid size",get=RangeError,yet=TypeError,_et=Math.max,eie=function(e,t){this.set=e,this.size=_et(t,0),this.has=Xne(e.has),this.keys=Xne(e.keys)};eie.prototype={getIterator:function(){return met(Qne(Yne(this.keys,this.set)))},includes:function(e){return Yne(this.has,this.set,e)}};tie.exports=function(e){Qne(e);var t=+e.size;if(t!==t)throw new yet(Jne);var r=vet(t);if(r<0)throw new get(Jne);return new eie(e,r)}});var Mk=S((xWt,iie)=>{"use strict";var xet=Di(),nie=yi(),bet=AS(),wet=Uv(),Eet=Ch(),Tet=ro(),Iet=Ol(),Cet=nie.has,rie=nie.remove;iie.exports=function(t){var r=xet(this),n=Eet(t),i=bet(r);return wet(r)<=n.size?Tet(r,function(a){n.includes(a)&&rie(i,a)}):Iet(n.getIterator(),function(a){Cet(r,a)&&rie(i,a)}),i}});var Ah=S((bWt,oie)=>{"use strict";var Aet=St(),aie=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};oie.exports=function(e){var t=Aet("Set");try{new t()[e](aie(0));try{return new t()[e](aie(-1)),!1}catch(r){return!0}}catch(r){return!1}}});var Ok=S(()=>{"use strict";var qet=K(),Pet=Mk(),Met=Ah();qet({target:"Set",proto:!0,real:!0,forced:!Met("difference")},{difference:Pet})});var Dk=S((SWt,uie)=>{"use strict";var Oet=Di(),Rk=yi(),Ret=Uv(),Det=Ch(),Let=ro(),ket=Ol(),Net=Rk.Set,sie=Rk.add,Fet=Rk.has;uie.exports=function(t){var r=Oet(this),n=Det(t),i=new Net;return Ret(r)>n.size?ket(n.getIterator(),function(a){Fet(r,a)&&sie(i,a)}):Let(r,function(a){n.includes(a)&&sie(i,a)}),i}});var Lk=S(()=>{"use strict";var zet=K(),jet=Ne(),Bet=Dk(),Uet=Ah(),Vet=!Uet("intersection")||jet(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});zet({target:"Set",proto:!0,real:!0,forced:Vet},{intersection:Bet})});var kk=S((CWt,lie)=>{"use strict";var $et=Di(),Get=yi().has,Wet=Uv(),Het=Ch(),Zet=ro(),Ket=Ol(),Xet=El();lie.exports=function(t){var r=$et(this),n=Het(t);if(Wet(r)<=n.size)return Zet(r,function(a){if(n.includes(a))return!1},!0)!==!1;var i=n.getIterator();return Ket(i,function(a){if(Get(r,a))return Xet(i,"normal",!1)})!==!1}});var Nk=S(()=>{"use strict";var Yet=K(),Jet=kk(),Qet=Ah();Yet({target:"Set",proto:!0,real:!0,forced:!Qet("isDisjointFrom")},{isDisjointFrom:Jet})});var Fk=S((PWt,cie)=>{"use strict";var ett=Di(),ttt=Uv(),rtt=ro(),ntt=Ch();cie.exports=function(t){var r=ett(this),n=ntt(t);return ttt(r)>n.size?!1:rtt(r,function(i){if(!n.includes(i))return!1},!0)!==!1}});var zk=S(()=>{"use strict";var itt=K(),att=Fk(),ott=Ah();itt({target:"Set",proto:!0,real:!0,forced:!ott("isSubsetOf")},{isSubsetOf:att})});var jk=S((RWt,hie)=>{"use strict";var stt=Di(),utt=yi().has,ltt=Uv(),ctt=Ch(),htt=Ol(),ftt=El();hie.exports=function(t){var r=stt(this),n=ctt(t);if(ltt(r)<n.size)return!1;var i=n.getIterator();return htt(i,function(a){if(!utt(r,a))return ftt(i,"normal",!1)})!==!1}});var Bk=S(()=>{"use strict";var ptt=K(),dtt=jk(),vtt=Ah();ptt({target:"Set",proto:!0,real:!0,forced:!vtt("isSupersetOf")},{isSupersetOf:dtt})});var Vk=S((kWt,fie)=>{"use strict";var mtt=Di(),Uk=yi(),gtt=AS(),ytt=Ch(),_tt=Ol(),xtt=Uk.add,btt=Uk.has,wtt=Uk.remove;fie.exports=function(t){var r=mtt(this),n=ytt(t).getIterator(),i=gtt(r);return _tt(n,function(a){btt(r,a)?wtt(i,a):xtt(i,a)}),i}});var $k=S(()=>{"use strict";var Ett=K(),Stt=Vk(),Ttt=Ah();Ett({target:"Set",proto:!0,real:!0,forced:!Ttt("symmetricDifference")},{symmetricDifference:Stt})});var Gk=S((zWt,pie)=>{"use strict";var Itt=Di(),Ctt=yi().add,Att=AS(),qtt=Ch(),Ptt=Ol();pie.exports=function(t){var r=Itt(this),n=qtt(t).getIterator(),i=Att(r);return Ptt(n,function(a){Ctt(i,a)}),i}});var Wk=S(()=>{"use strict";var Mtt=K(),Ott=Gk(),Rtt=Ah();Mtt({target:"Set",proto:!0,real:!0,forced:!Rtt("union")},{union:Ott})});var die=S(()=>{"use strict";var Dtt=K(),Ltt=Oe(),ktt=Br(),Ntt=Gr(),Ftt=qt(),ztt=Ne(),jtt=Ltt("".charAt),Btt=ztt(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});Dtt({target:"String",proto:!0,forced:Btt},{at:function(t){var r=Ftt(ktt(this)),n=r.length,i=Ntt(t),a=i>=0?i:n+i;return a<0||a>=n?void 0:jtt(r,a)}})});var up=S(($Wt,gie)=>{"use strict";var Hk=Oe(),Utt=Gr(),Vtt=qt(),$tt=Br(),Gtt=Hk("".charAt),vie=Hk("".charCodeAt),Wtt=Hk("".slice),mie=function(e){return function(t,r){var n=Vtt($tt(t)),i=Utt(r),a=n.length,h,p;return i<0||i>=a?e?"":void 0:(h=vie(n,i),h<55296||h>56319||i+1===a||(p=vie(n,i+1))<56320||p>57343?e?Gtt(n,i):h:e?Wtt(n,i,i+2):(h-55296<<10)+(p-56320)+65536)}};gie.exports={codeAt:mie(!1),charAt:mie(!0)}});var yie=S(()=>{"use strict";var Htt=K(),Ztt=up().codeAt;Htt({target:"String",proto:!0},{codePointAt:function(t){return Ztt(this,t)}})});var qS=S((HWt,_ie)=>{"use strict";var Ktt=x0(),Xtt=TypeError;_ie.exports=function(e){if(Ktt(e))throw new Xtt("The method doesn't accept regular expressions");return e}});var PS=S((ZWt,xie)=>{"use strict";var Ytt=yt(),Jtt=Ytt("match");xie.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[Jtt]=!1,"/./"[e](t)}catch(n){}}return!1}});var Eie=S(()=>{"use strict";var Qtt=K(),ert=xl(),trt=vi().f,rrt=Ya(),bie=qt(),nrt=qS(),irt=Br(),art=PS(),ort=jt(),srt=ert("".slice),urt=Math.min,wie=art("endsWith"),lrt=!ort&&!wie&&!!function(){var e=trt(String.prototype,"endsWith");return e&&!e.writable}();Qtt({target:"String",proto:!0,forced:!lrt&&!wie},{endsWith:function(t){var r=bie(irt(this));nrt(t);var n=arguments.length>1?arguments[1]:void 0,i=r.length,a=n===void 0?i:urt(rrt(n),i),h=bie(t);return srt(r,a-h.length,a)===h}})});var Zk=S(()=>{"use strict";var crt=K(),hrt=Oe(),frt=Ns(),prt=RangeError,Sie=String.fromCharCode,Tie=String.fromCodePoint,drt=hrt([].join),vrt=!!Tie&&Tie.length!==1;crt({target:"String",stat:!0,arity:1,forced:vrt},{fromCodePoint:function(t){for(var r=[],n=arguments.length,i=0,a;n>i;){if(a=+arguments[i++],frt(a,1114111)!==a)throw new prt(a+" is not a valid code point");r[i]=a<65536?Sie(a):Sie(((a-=65536)>>10)+55296,a%1024+56320)}return drt(r,"")}})});var Cie=S(()=>{"use strict";var mrt=K(),grt=Oe(),yrt=qS(),_rt=Br(),Iie=qt(),xrt=PS(),brt=grt("".indexOf);mrt({target:"String",proto:!0,forced:!xrt("includes")},{includes:function(t){return!!~brt(Iie(_rt(this)),Iie(yrt(t)),arguments.length>1?arguments[1]:void 0)}})});var Kk=S(()=>{"use strict";var wrt=K(),Ert=Oe(),Srt=Br(),Trt=qt(),Aie=Ert("".charCodeAt);wrt({target:"String",proto:!0},{isWellFormed:function(){for(var t=Trt(Srt(this)),r=t.length,n=0;n<r;n++){var i=Aie(t,n);if((i&63488)===55296&&(i>=56320||++n>=r||(Aie(t,n)&64512)!==56320))return!1}return!0}})});var Xk=S(()=>{"use strict";var Irt=up().charAt,Crt=qt(),Pie=dr(),Art=PE(),qie=gi(),Mie="String Iterator",qrt=Pie.set,Prt=Pie.getterFor(Mie);Art(String,"String",function(e){qrt(this,{type:Mie,string:Crt(e),index:0})},function(){var t=Prt(this),r=t.string,n=t.index,i;return n>=r.length?qie(void 0,!0):(i=Irt(r,n),t.index+=i.length,qie(i,!1))})});var E0=S((aHt,kie)=>{"use strict";IS();var Oie=Qe(),Rie=br(),Mrt=TS(),Die=Ne(),Lie=yt(),Ort=zn(),Rrt=Lie("species"),Yk=RegExp.prototype;kie.exports=function(e,t,r,n){var i=Lie(e),a=!Die(function(){var w={};return w[i]=function(){return 7},""[e](w)!==7}),h=a&&!Die(function(){var w=!1,E=/a/;return e==="split"&&(E={},E.constructor={},E.constructor[Rrt]=function(){return E},E.flags="",E[i]=/./[i]),E.exec=function(){return w=!0,null},E[i](""),!w});if(!a||!h||r){var p=/./[i],g=t(i,""[e],function(w,E,q,P,k){var W=E.exec;return W===Mrt||W===Yk.exec?a&&!k?{done:!0,value:Oie(p,E,q,P)}:{done:!0,value:Oie(w,q,E,P)}:{done:!1}});Rie(String.prototype,e,g[0]),Rie(Yk,i,g[1])}n&&Ort(Yk[i],"sham",!0)}});var S0=S((oHt,Nie)=>{"use strict";var Drt=up().charAt;Nie.exports=function(e,t,r){return t+(r?Drt(e,t).length:1)}});var Vv=S((sHt,zie)=>{"use strict";var Fie=Qe(),Lrt=Ye(),krt=Ot(),Nrt=Oi(),Frt=TS(),zrt=TypeError;zie.exports=function(e,t){var r=e.exec;if(krt(r)){var n=Fie(r,e,t);return n!==null&&Lrt(n),n}if(Nrt(e)==="RegExp")return Fie(Frt,e,t);throw new zrt("RegExp#exec called on incompatible receiver")}});var Bie=S(()=>{"use strict";var jrt=Qe(),Brt=E0(),Urt=Ye(),Vrt=Nn(),$rt=Ya(),Jk=qt(),Grt=Br(),Wrt=In(),Hrt=S0(),jie=Vv();Brt("match",function(e,t,r){return[function(i){var a=Grt(this),h=Vrt(i)?void 0:Wrt(i,e);return h?jrt(h,i,a):new RegExp(i)[e](Jk(a))},function(n){var i=Urt(this),a=Jk(n),h=r(t,i,a);if(h.done)return h.value;if(!i.global)return jie(i,a);var p=i.unicode;i.lastIndex=0;for(var g=[],w=0,E;(E=jie(i,a))!==null;){var q=Jk(E[0]);g[w]=q,q===""&&(i.lastIndex=Hrt(a,$rt(i.lastIndex),p)),w++}return w===0?null:g}]})});var nN=S(()=>{"use strict";var Zrt=K(),Uie=Qe(),Gie=xl(),Krt=ph(),MS=gi(),Vie=Br(),Wie=Ya(),T0=qt(),Xrt=Ye(),Yrt=Nn(),Jrt=Oi(),Qrt=x0(),Hie=zv(),ent=In(),tnt=br(),rnt=Ne(),nnt=yt(),int=f0(),ant=S0(),ont=Vv(),Zie=dr(),eN=jt(),OS=nnt("matchAll"),Kie="RegExp String",Xie=Kie+" Iterator",snt=Zie.set,unt=Zie.getterFor(Xie),$ie=RegExp.prototype,lnt=TypeError,tN=Gie("".indexOf),RS=Gie("".matchAll),Qk=!!RS&&!rnt(function(){RS("a",/./)}),cnt=Krt(function(t,r,n,i){snt(this,{type:Xie,regexp:t,string:r,global:n,unicode:i,done:!1})},Kie,function(){var t=unt(this);if(t.done)return MS(void 0,!0);var r=t.regexp,n=t.string,i=ont(r,n);return i===null?(t.done=!0,MS(void 0,!0)):t.global?(T0(i[0])===""&&(r.lastIndex=ant(n,Wie(r.lastIndex),t.unicode)),MS(i,!1)):(t.done=!0,MS(i,!1))}),rN=function(e){var t=Xrt(this),r=T0(e),n=int(t,RegExp),i=T0(Hie(t)),a,h,p;return a=new n(n===RegExp?t.source:t,i),h=!!~tN(i,"g"),p=!!~tN(i,"u"),a.lastIndex=Wie(t.lastIndex),new cnt(a,r,h,p)};Zrt({target:"String",proto:!0,forced:Qk},{matchAll:function(t){var r=Vie(this),n,i,a,h;if(Yrt(t)){if(Qk)return RS(r,t)}else{if(Qrt(t)&&(n=T0(Vie(Hie(t))),!~tN(n,"g")))throw new lnt("`.matchAll` does not allow non-global regexes");if(Qk)return RS(r,t);if(a=ent(t,OS),a===void 0&&eN&&Jrt(t)==="RegExp"&&(a=rN),a)return Uie(a,t,r)}return i=T0(r),h=new RegExp(t,"g"),eN?Uie(rN,h,i):h[OS](i)}});eN||OS in $ie||tnt($ie,OS,rN)});var iN=S((fHt,Yie)=>{"use strict";var hnt=Ds();Yie.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(hnt)});var Jie=S(()=>{"use strict";var fnt=K(),pnt=J_().end,dnt=iN();fnt({target:"String",proto:!0,forced:dnt},{padEnd:function(t){return pnt(this,t,arguments.length>1?arguments[1]:void 0)}})});var Qie=S(()=>{"use strict";var vnt=K(),mnt=J_().start,gnt=iN();vnt({target:"String",proto:!0,forced:gnt},{padStart:function(t){return mnt(this,t,arguments.length>1?arguments[1]:void 0)}})});var nae=S(()=>{"use strict";var ynt=K(),rae=Oe(),_nt=Fn(),xnt=Bt(),eae=qt(),bnt=Yt(),tae=rae([].push),wnt=rae([].join);ynt({target:"String",stat:!0},{raw:function(t){var r=_nt(xnt(t).raw),n=bnt(r);if(!n)return"";for(var i=arguments.length,a=[],h=0;;){if(tae(a,eae(r[h++])),h===n)return wnt(a,"");h<i&&tae(a,eae(arguments[h]))}}})});var iae=S(()=>{"use strict";var Ent=K(),Snt=Y_();Ent({target:"String",proto:!0},{repeat:Snt})});var uN=S((bHt,aae)=>{"use strict";var sN=Oe(),Tnt=Bt(),Int=Math.floor,aN=sN("".charAt),Cnt=sN("".replace),oN=sN("".slice),Ant=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,qnt=/\$([$&'`]|\d{1,2})/g;aae.exports=function(e,t,r,n,i,a){var h=r+e.length,p=n.length,g=qnt;return i!==void 0&&(i=Tnt(i),g=Ant),Cnt(a,g,function(w,E){var q;switch(aN(E,0)){case"$":return"$";case"&":return e;case"`":return oN(t,0,r);case"'":return oN(t,h);case"<":q=i[oN(E,1,-1)];break;default:var P=+E;if(P===0)return w;if(P>p){var k=Int(P/10);return k===0?w:k<=p?n[k-1]===void 0?aN(E,1):n[k-1]+aN(E,1):w}q=n[P-1];}return q===void 0?"":q})}});var cae=S(()=>{"use strict";var Pnt=aa(),oae=Qe(),DS=Oe(),Mnt=E0(),Ont=Ne(),Rnt=Ye(),Dnt=Ot(),Lnt=Nn(),knt=Gr(),Nnt=Ya(),$v=qt(),Fnt=Br(),znt=S0(),jnt=In(),Bnt=uN(),Unt=Vv(),Vnt=yt(),cN=Vnt("replace"),$nt=Math.max,Gnt=Math.min,Wnt=DS([].concat),lN=DS([].push),sae=DS("".indexOf),uae=DS("".slice),Hnt=function(e){return e===void 0?e:String(e)},Znt=function(){return"a".replace(/./,"$0")==="$0"}(),lae=function(){return /./[cN]?/./[cN]("a","$0")==="":!1}(),Knt=!Ont(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});Mnt("replace",function(e,t,r){var n=lae?"$":"$0";return[function(a,h){var p=Fnt(this),g=Lnt(a)?void 0:jnt(a,cN);return g?oae(g,a,p,h):oae(t,$v(p),a,h)},function(i,a){var h=Rnt(this),p=$v(i);if(typeof a=="string"&&sae(a,n)===-1&&sae(a,"$<")===-1){var g=r(t,h,p,a);if(g.done)return g.value}var w=Dnt(a);w||(a=$v(a));var E=h.global,q;E&&(q=h.unicode,h.lastIndex=0);for(var P=[],k;k=Unt(h,p),!(k===null||(lN(P,k),!E));){var W=$v(k[0]);W===""&&(h.lastIndex=znt(p,Nnt(h.lastIndex),q))}for(var Q="",$=0,V=0;V<P.length;V++){k=P[V];for(var Z=$v(k[0]),te=$nt(Gnt(knt(k.index),p.length),0),se=[],Ie,qe=1;qe<k.length;qe++)lN(se,Hnt(k[qe]));var Ae=k.groups;if(w){var Ue=Wnt([Z],se,te,p);Ae!==void 0&&lN(Ue,Ae),Ie=$v(Pnt(a,void 0,Ue))}else Ie=Bnt(Z,p,te,se,Ae,a);te>=$&&(Q+=uae(p,$,te)+Ie,$=te+Z.length)}return Q+uae(p,$)}]},!Knt||!Znt||lae)});var pN=S(()=>{"use strict";var Xnt=K(),Ynt=Qe(),fN=Oe(),hae=Br(),Jnt=Ot(),Qnt=Nn(),eit=x0(),Gv=qt(),tit=In(),rit=zv(),nit=uN(),iit=yt(),ait=jt(),oit=iit("replace"),sit=TypeError,hN=fN("".indexOf),uit=fN("".replace),fae=fN("".slice),lit=Math.max;Xnt({target:"String",proto:!0},{replaceAll:function(t,r){var n=hae(this),i,a,h,p,g,w,E,q,P,k,W=0,Q="";if(!Qnt(t)){if(i=eit(t),i&&(a=Gv(hae(rit(t))),!~hN(a,"g")))throw new sit("`.replaceAll` does not allow non-global regexes");if(h=tit(t,oit),h)return Ynt(h,t,n,r);if(ait&&i)return uit(Gv(n),t,r)}for(p=Gv(n),g=Gv(t),w=Jnt(r),w||(r=Gv(r)),E=g.length,q=lit(1,E),P=hN(p,g);P!==-1;)k=w?Gv(r(g,P,p)):nit(g,p,P,[],void 0,r),Q+=fae(p,W,P)+k,W=P+E,P=P+q>p.length?-1:hN(p,g,P+q);return W<p.length&&(Q+=fae(p,W)),Q}})});var vae=S(()=>{"use strict";var cit=Qe(),hit=E0(),fit=Ye(),pit=Nn(),dit=Br(),pae=SL(),dae=qt(),vit=In(),mit=Vv();hit("search",function(e,t,r){return[function(i){var a=dit(this),h=pit(i)?void 0:vit(i,e);return h?cit(h,i,a):new RegExp(i)[e](dae(a))},function(n){var i=fit(this),a=dae(n),h=r(t,i,a);if(h.done)return h.value;var p=i.lastIndex;pae(p,0)||(i.lastIndex=0);var g=mit(i,a);return pae(i.lastIndex,p)||(i.lastIndex=p),g===null?-1:g.index}]})});var xae=S(()=>{"use strict";var dN=Qe(),_ae=Oe(),git=E0(),yit=Ye(),_it=Nn(),xit=Br(),bit=f0(),wit=S0(),Eit=Ya(),mae=qt(),Sit=In(),gae=Vv(),Tit=b0(),Iit=Ne(),Wv=Tit.UNSUPPORTED_Y,Cit=4294967295,Ait=Math.min,vN=_ae([].push),mN=_ae("".slice),qit=!Iit(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return r.length!==2||r[0]!=="a"||r[1]!=="b"}),yae="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;git("split",function(e,t,r){var n="0".split(void 0,0).length?function(i,a){return i===void 0&&a===0?[]:dN(t,this,i,a)}:t;return[function(a,h){var p=xit(this),g=_it(a)?void 0:Sit(a,e);return g?dN(g,a,p,h):dN(n,mae(p),a,h)},function(i,a){var h=yit(this),p=mae(i);if(!yae){var g=r(n,h,p,a,n!==t);if(g.done)return g.value}var w=bit(h,RegExp),E=h.unicode,q=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(Wv?"g":"y"),P=new w(Wv?"^(?:"+h.source+")":h,q),k=a===void 0?Cit:a>>>0;if(k===0)return[];if(p.length===0)return gae(P,p)===null?[p]:[];for(var W=0,Q=0,$=[];Q<p.length;){P.lastIndex=Wv?0:Q;var V=gae(P,Wv?mN(p,Q):p),Z;if(V===null||(Z=Ait(Eit(P.lastIndex+(Wv?Q:0)),p.length))===W)Q=wit(p,Q,E);else{if(vN($,mN(p,W,Q)),$.length===k)return $;for(var te=1;te<=V.length-1;te++)if(vN($,V[te]),$.length===k)return $;Q=W=Z}}return vN($,mN(p,W)),$}]},yae||!qit,Wv)});var Eae=S(()=>{"use strict";var Pit=K(),Mit=xl(),Oit=vi().f,Rit=Ya(),bae=qt(),Dit=qS(),Lit=Br(),kit=PS(),Nit=jt(),Fit=Mit("".slice),zit=Math.min,wae=kit("startsWith"),jit=!Nit&&!wae&&!!function(){var e=Oit(String.prototype,"startsWith");return e&&!e.writable}();Pit({target:"String",proto:!0,forced:!jit&&!wae},{startsWith:function(t){var r=bae(Lit(this));Dit(t);var n=Rit(zit(arguments.length>1?arguments[1]:void 0,r.length)),i=bae(t);return Fit(r,n,n+i.length)===i}})});var Tae=S(()=>{"use strict";var Bit=K(),Uit=Oe(),Vit=Br(),Sae=Gr(),$it=qt(),Git=Uit("".slice),Wit=Math.max,Hit=Math.min,Zit=!"".substr||"ab".substr(-1)!=="b";Bit({target:"String",proto:!0,forced:Zit},{substr:function(t,r){var n=$it(Vit(this)),i=n.length,a=Sae(t),h,p;return a===1/0&&(a=0),a<0&&(a=Wit(i+a,0)),h=r===void 0?i:Sae(r),h<=0||h===1/0?"":(p=Hit(a+h,i),a>=p?"":Git(n,a,p))}})});var xN=S(()=>{"use strict";var Kit=K(),Aae=Qe(),_N=Oe(),Xit=Br(),Yit=qt(),Jit=Ne(),Qit=Array,gN=_N("".charAt),Iae=_N("".charCodeAt),eat=_N([].join),yN="".toWellFormed,tat="\uFFFD",Cae=yN&&Jit(function(){return Aae(yN,1)!=="1"});Kit({target:"String",proto:!0,forced:Cae},{toWellFormed:function(){var t=Yit(Xit(this));if(Cae)return Aae(yN,t);for(var r=t.length,n=Qit(r),i=0;i<r;i++){var a=Iae(t,i);(a&63488)!==55296?n[i]=gN(t,i):a>=56320||i+1>=r||(Iae(t,i+1)&64512)!==56320?n[i]=tat:(n[i]=gN(t,i),n[++i]=gN(t,i))}return eat(n,"")}})});var LS=S((kHt,Mae)=>{"use strict";var rat=Uf().PROPER,nat=Ne(),qae=rp(),Pae="\u200B\x85\u180E";Mae.exports=function(e){return nat(function(){return!!qae[e]()||Pae[e]()!==Pae||rat&&qae[e].name!==e})}});var Oae=S(()=>{"use strict";var iat=K(),aat=np().trim,oat=LS();iat({target:"String",proto:!0,forced:oat("trim")},{trim:function(){return aat(this)}})});var bN=S((zHt,Rae)=>{"use strict";var sat=np().end,uat=LS();Rae.exports=uat("trimEnd")?function(){return sat(this)}:"".trimEnd});var Lae=S(()=>{"use strict";var lat=K(),Dae=bN();lat({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==Dae},{trimRight:Dae})});var Nae=S(()=>{"use strict";Lae();var cat=K(),kae=bN();cat({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==kae},{trimEnd:kae})});var wN=S(($Ht,Fae)=>{"use strict";var hat=np().start,fat=LS();Fae.exports=fat("trimStart")?function(){return hat(this)}:"".trimStart});var jae=S(()=>{"use strict";var pat=K(),zae=wN();pat({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==zae},{trimLeft:zae})});var Uae=S(()=>{"use strict";jae();var dat=K(),Bae=wN();dat({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==Bae},{trimStart:Bae})});var no=S((KHt,$ae)=>{"use strict";var vat=Oe(),mat=Br(),Vae=qt(),gat=/"/g,yat=vat("".replace);$ae.exports=function(e,t,r,n){var i=Vae(mat(e)),a="<"+t;return r!==""&&(a+=" "+r+"=\""+yat(Vae(n),gat,"&quot;")+"\""),a+">"+i+"</"+t+">"}});var io=S((XHt,Gae)=>{"use strict";var _at=Ne();Gae.exports=function(e){return _at(function(){var t=""[e]("\"");return t!==t.toLowerCase()||t.split("\"").length>3})}});var Wae=S(()=>{"use strict";var xat=K(),bat=no(),wat=io();xat({target:"String",proto:!0,forced:wat("anchor")},{anchor:function(t){return bat(this,"a","name",t)}})});var Hae=S(()=>{"use strict";var Eat=K(),Sat=no(),Tat=io();Eat({target:"String",proto:!0,forced:Tat("big")},{big:function(){return Sat(this,"big","","")}})});var Zae=S(()=>{"use strict";var Iat=K(),Cat=no(),Aat=io();Iat({target:"String",proto:!0,forced:Aat("blink")},{blink:function(){return Cat(this,"blink","","")}})});var Kae=S(()=>{"use strict";var qat=K(),Pat=no(),Mat=io();qat({target:"String",proto:!0,forced:Mat("bold")},{bold:function(){return Pat(this,"b","","")}})});var Xae=S(()=>{"use strict";var Oat=K(),Rat=no(),Dat=io();Oat({target:"String",proto:!0,forced:Dat("fixed")},{fixed:function(){return Rat(this,"tt","","")}})});var Yae=S(()=>{"use strict";var Lat=K(),kat=no(),Nat=io();Lat({target:"String",proto:!0,forced:Nat("fontcolor")},{fontcolor:function(t){return kat(this,"font","color",t)}})});var Jae=S(()=>{"use strict";var Fat=K(),zat=no(),jat=io();Fat({target:"String",proto:!0,forced:jat("fontsize")},{fontsize:function(t){return zat(this,"font","size",t)}})});var Qae=S(()=>{"use strict";var Bat=K(),Uat=no(),Vat=io();Bat({target:"String",proto:!0,forced:Vat("italics")},{italics:function(){return Uat(this,"i","","")}})});var eoe=S(()=>{"use strict";var $at=K(),Gat=no(),Wat=io();$at({target:"String",proto:!0,forced:Wat("link")},{link:function(t){return Gat(this,"a","href",t)}})});var toe=S(()=>{"use strict";var Hat=K(),Zat=no(),Kat=io();Hat({target:"String",proto:!0,forced:Kat("small")},{small:function(){return Zat(this,"small","","")}})});var roe=S(()=>{"use strict";var Xat=K(),Yat=no(),Jat=io();Xat({target:"String",proto:!0,forced:Jat("strike")},{strike:function(){return Yat(this,"strike","","")}})});var noe=S(()=>{"use strict";var Qat=K(),eot=no(),tot=io();Qat({target:"String",proto:!0,forced:tot("sub")},{sub:function(){return eot(this,"sub","","")}})});var ioe=S(()=>{"use strict";var rot=K(),not=no(),iot=io();rot({target:"String",proto:!0,forced:iot("sup")},{sup:function(){return not(this,"sup","","")}})});var kS=S((EZt,ooe)=>{"use strict";var aoe=Ze(),EN=Ne(),aot=B_(),oot=zt().NATIVE_ARRAY_BUFFER_VIEWS,sot=aoe.ArrayBuffer,lp=aoe.Int8Array;ooe.exports=!oot||!EN(function(){lp(1)})||!EN(function(){new lp(-1)})||!aot(function(e){new lp,new lp(null),new lp(1.5),new lp(e)},!0)||EN(function(){return new lp(new sot(2),1,void 0).length!==1})});var SN=S((SZt,soe)=>{"use strict";var uot=Cv(),lot=RangeError;soe.exports=function(e,t){var r=uot(e);if(r%t)throw new lot("Wrong offset");return r}});var TN=S((TZt,uoe)=>{"use strict";var cot=Math.round;uoe.exports=function(e){var t=cot(e);return t<0?0:t>255?255:t&255}});var NS=S((IZt,loe)=>{"use strict";var hot=Ja();loe.exports=function(e){var t=hot(e);return t==="BigInt64Array"||t==="BigUint64Array"}});var I0=S((CZt,coe)=>{"use strict";var fot=E_(),pot=TypeError;coe.exports=function(e){var t=fot(e,"number");if(typeof t=="number")throw new pot("Can't convert number to bigint");return BigInt(t)}});var IN=S((AZt,hoe)=>{"use strict";var dot=Pr(),vot=Qe(),mot=h0(),got=Bt(),yot=Yt(),_ot=hh(),xot=yu(),bot=wE(),wot=NS(),Eot=zt().aTypedArrayConstructor,Sot=I0();hoe.exports=function(t){var r=mot(this),n=got(t),i=arguments.length,a=i>1?arguments[1]:void 0,h=a!==void 0,p=xot(n),g,w,E,q,P,k,W,Q;if(p&&!bot(p))for(W=_ot(n,p),Q=W.next,n=[];!(k=vot(Q,W)).done;)n.push(k.value);for(h&&i>2&&(a=dot(a,arguments[2])),w=yot(n),E=new(Eot(r))(w),q=wot(E),g=0;w>g;g++)P=h?a(n[g],g):n[g],E[g]=q?Sot(P):+P;return E}});var Su=S((qZt,RN)=>{"use strict";var foe=K(),Eoe=Ze(),poe=Qe(),Tot=dt(),Iot=kS(),P0=zt(),Soe=X_(),doe=oa(),Cot=Xa(),C0=zn(),Aot=uS(),qot=Ya(),voe=xv(),CN=SN(),Pot=TN(),Toe=mu(),A0=kt(),Mot=Ja(),PN=It(),Oot=yl(),Rot=Cn(),Dot=Ri(),FS=is(),Lot=sh().f,moe=IN(),kot=An().forEach,Not=vh(),Fot=Wr(),Ioe=Fr(),Coe=vi(),goe=Tl(),DN=dr(),zot=ch(),MN=DN.get,jot=DN.set,Bot=DN.enforce,Aoe=Ioe.f,Uot=Coe.f,AN=Eoe.RangeError,qoe=Soe.ArrayBuffer,Vot=qoe.prototype,$ot=Soe.DataView,zS=P0.NATIVE_ARRAY_BUFFER_VIEWS,yoe=P0.TYPED_ARRAY_TAG,_oe=P0.TypedArray,q0=P0.TypedArrayPrototype,ON=P0.isTypedArray,jS="BYTES_PER_ELEMENT",qN="Wrong length",BS=function(e,t){Fot(e,t,{configurable:!0,get:function(){return MN(this)[t]}})},xoe=function(e){var t;return Dot(Vot,e)||(t=Mot(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},Poe=function(e,t){return ON(e)&&!Oot(t)&&t in e&&Aot(+t)&&t>=0},boe=function(t,r){return r=Toe(r),Poe(t,r)?Cot(2,t[r]):Uot(t,r)},woe=function(t,r,n){return r=Toe(r),Poe(t,r)&&PN(n)&&A0(n,"value")&&!A0(n,"get")&&!A0(n,"set")&&!n.configurable&&(!A0(n,"writable")||n.writable)&&(!A0(n,"enumerable")||n.enumerable)?(t[r]=n.value,t):Aoe(t,r,n)};Tot?(zS||(Coe.f=boe,Ioe.f=woe,BS(q0,"buffer"),BS(q0,"byteOffset"),BS(q0,"byteLength"),BS(q0,"length")),foe({target:"Object",stat:!0,forced:!zS},{getOwnPropertyDescriptor:boe,defineProperty:woe}),RN.exports=function(e,t,r){var n=e.match(/\d+/)[0]/8,i=e+(r?"Clamped":"")+"Array",a="get"+e,h="set"+e,p=Eoe[i],g=p,w=g&&g.prototype,E={},q=function(Q,$){var V=MN(Q);return V.view[a]($*n+V.byteOffset,!0)},P=function(Q,$,V){var Z=MN(Q);Z.view[h]($*n+Z.byteOffset,r?Pot(V):V,!0)},k=function(Q,$){Aoe(Q,$,{get:function(){return q(this,$)},set:function(V){return P(this,$,V)},enumerable:!0})};zS?Iot&&(g=t(function(Q,$,V,Z){return doe(Q,w),zot(function(){return PN($)?xoe($)?Z!==void 0?new p($,CN(V,n),Z):V!==void 0?new p($,CN(V,n)):new p($):ON($)?goe(g,$):poe(moe,g,$):new p(voe($))}(),Q,g)}),FS&&FS(g,_oe),kot(Lot(p),function(Q){Q in g||C0(g,Q,p[Q])}),g.prototype=w):(g=t(function(Q,$,V,Z){doe(Q,w);var te=0,se=0,Ie,qe,Ae;if(!PN($))Ae=voe($),qe=Ae*n,Ie=new qoe(qe);else if(xoe($)){Ie=$,se=CN(V,n);var Ue=$.byteLength;if(Z===void 0){if(Ue%n)throw new AN(qN);if(qe=Ue-se,qe<0)throw new AN(qN)}else if(qe=qot(Z)*n,qe+se>Ue)throw new AN(qN);Ae=qe/n}else return ON($)?goe(g,$):poe(moe,g,$);for(jot(Q,{buffer:Ie,byteOffset:se,byteLength:qe,length:Ae,view:new $ot(Ie)});te<Ae;)k(Q,te++)}),FS&&FS(g,_oe),w=g.prototype=Rot(q0)),w.constructor!==g&&C0(w,"constructor",g),Bot(w).TypedArrayConstructor=g,yoe&&C0(w,yoe,i);var W=g!==p;E[i]=g,foe({global:!0,constructor:!0,forced:W,sham:!zS},E),jS in g||C0(g,jS,n),jS in w||C0(w,jS,n),Not(i)}):RN.exports=function(){}});var Moe=S(()=>{"use strict";var Got=Su();Got("Float32",function(e){return function(r,n,i){return e(this,r,n,i)}})});var Ooe=S(()=>{"use strict";var Wot=Su();Wot("Float64",function(e){return function(r,n,i){return e(this,r,n,i)}})});var Roe=S(()=>{"use strict";var Hot=Su();Hot("Int8",function(e){return function(r,n,i){return e(this,r,n,i)}})});var Doe=S(()=>{"use strict";var Zot=Su();Zot("Int16",function(e){return function(r,n,i){return e(this,r,n,i)}})});var Loe=S(()=>{"use strict";var Kot=Su();Kot("Int32",function(e){return function(r,n,i){return e(this,r,n,i)}})});var koe=S(()=>{"use strict";var Xot=Su();Xot("Uint8",function(e){return function(r,n,i){return e(this,r,n,i)}})});var Noe=S(()=>{"use strict";var Yot=Su();Yot("Uint8",function(e){return function(r,n,i){return e(this,r,n,i)}},!0)});var Foe=S(()=>{"use strict";var Jot=Su();Jot("Uint16",function(e){return function(r,n,i){return e(this,r,n,i)}})});var zoe=S(()=>{"use strict";var Qot=Su();Qot("Uint32",function(e){return function(r,n,i){return e(this,r,n,i)}})});var LN=S(()=>{"use strict";var joe=zt(),est=Yt(),tst=Gr(),rst=joe.aTypedArray,nst=joe.exportTypedArrayMethod;nst("at",function(t){var r=rst(this),n=est(r),i=tst(t),a=i>=0?i:n+i;return a<0||a>=n?void 0:r[a]})});var Uoe=S(()=>{"use strict";var ist=Oe(),Boe=zt(),ast=nR(),ost=ist(ast),sst=Boe.aTypedArray,ust=Boe.exportTypedArrayMethod;ust("copyWithin",function(t,r){return ost(sst(this),t,r,arguments.length>2?arguments[2]:void 0)})});var $oe=S(()=>{"use strict";var Voe=zt(),lst=An().every,cst=Voe.aTypedArray,hst=Voe.exportTypedArrayMethod;hst("every",function(t){return lst(cst(this),t,arguments.length>1?arguments[1]:void 0)})});var Woe=S(()=>{"use strict";var Goe=zt(),fst=IE(),pst=I0(),dst=Ja(),vst=Qe(),mst=Oe(),gst=Ne(),yst=Goe.aTypedArray,_st=Goe.exportTypedArrayMethod,xst=mst("".slice),bst=gst(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});_st("fill",function(t){var r=arguments.length;yst(this);var n=xst(dst(this),0,3)==="Big"?pst(t):+t;return vst(fst,this,n,r>1?arguments[1]:void 0,r>2?arguments[2]:void 0)},bst)});var US=S((rKt,Hoe)=>{"use strict";var wst=Tl(),Est=zt().getTypedArrayConstructor;Hoe.exports=function(e,t){return wst(Est(e),t)}});var Koe=S(()=>{"use strict";var Zoe=zt(),Sst=An().filter,Tst=US(),Ist=Zoe.aTypedArray,Cst=Zoe.exportTypedArrayMethod;Cst("filter",function(t){var r=Sst(Ist(this),t,arguments.length>1?arguments[1]:void 0);return Tst(this,r)})});var Yoe=S(()=>{"use strict";var Xoe=zt(),Ast=An().find,qst=Xoe.aTypedArray,Pst=Xoe.exportTypedArrayMethod;Pst("find",function(t){return Ast(qst(this),t,arguments.length>1?arguments[1]:void 0)})});var Qoe=S(()=>{"use strict";var Joe=zt(),Mst=An().findIndex,Ost=Joe.aTypedArray,Rst=Joe.exportTypedArrayMethod;Rst("findIndex",function(t){return Mst(Ost(this),t,arguments.length>1?arguments[1]:void 0)})});var kN=S(()=>{"use strict";var ese=zt(),Dst=j_().findLast,Lst=ese.aTypedArray,kst=ese.exportTypedArrayMethod;kst("findLast",function(t){return Dst(Lst(this),t,arguments.length>1?arguments[1]:void 0)})});var NN=S(()=>{"use strict";var tse=zt(),Nst=j_().findLastIndex,Fst=tse.aTypedArray,zst=tse.exportTypedArrayMethod;zst("findLastIndex",function(t){return Nst(Fst(this),t,arguments.length>1?arguments[1]:void 0)})});var nse=S(()=>{"use strict";var rse=zt(),jst=An().forEach,Bst=rse.aTypedArray,Ust=rse.exportTypedArrayMethod;Ust("forEach",function(t){jst(Bst(this),t,arguments.length>1?arguments[1]:void 0)})});var ise=S(()=>{"use strict";var Vst=kS(),$st=zt().exportTypedArrayStaticMethod,Gst=IN();$st("from",Gst,Vst)});var ose=S(()=>{"use strict";var ase=zt(),Wst=fv().includes,Hst=ase.aTypedArray,Zst=ase.exportTypedArrayMethod;Zst("includes",function(t){return Wst(Hst(this),t,arguments.length>1?arguments[1]:void 0)})});var use=S(()=>{"use strict";var sse=zt(),Kst=fv().indexOf,Xst=sse.aTypedArray,Yst=sse.exportTypedArrayMethod;Yst("indexOf",function(t){return Kst(Xst(this),t,arguments.length>1?arguments[1]:void 0)})});var pse=S(()=>{"use strict";var Jst=Ze(),Qst=Ne(),FN=Oe(),cse=zt(),zN=$_(),eut=yt(),jN=eut("iterator"),lse=Jst.Uint8Array,tut=FN(zN.values),rut=FN(zN.keys),nut=FN(zN.entries),BN=cse.aTypedArray,VS=cse.exportTypedArrayMethod,Hv=lse&&lse.prototype,$S=!Qst(function(){Hv[jN].call([1])}),hse=!!Hv&&Hv.values&&Hv[jN]===Hv.values&&Hv.values.name==="values",fse=function(){return tut(BN(this))};VS("entries",function(){return nut(BN(this))},$S);VS("keys",function(){return rut(BN(this))},$S);VS("values",fse,$S||!hse,{name:"values"});VS(jN,fse,$S||!hse,{name:"values"})});var vse=S(()=>{"use strict";var dse=zt(),iut=Oe(),aut=dse.aTypedArray,out=dse.exportTypedArrayMethod,sut=iut([].join);out("join",function(t){return sut(aut(this),t)})});var gse=S(()=>{"use strict";var mse=zt(),uut=aa(),lut=_R(),cut=mse.aTypedArray,hut=mse.exportTypedArrayMethod;hut("lastIndexOf",function(t){var r=arguments.length;return uut(lut,cut(this),r>1?[t,arguments[1]]:[t])})});var yse=S(()=>{"use strict";var UN=zt(),fut=An().map,put=UN.aTypedArray,dut=UN.getTypedArrayConstructor,vut=UN.exportTypedArrayMethod;vut("map",function(t){return fut(put(this),t,arguments.length>1?arguments[1]:void 0,function(r,n){return new(dut(r))(n)})})});var xse=S(()=>{"use strict";var _se=zt(),mut=kS(),gut=_se.aTypedArrayConstructor,yut=_se.exportTypedArrayStaticMethod;yut("of",function(){for(var t=0,r=arguments.length,n=new(gut(this))(r);r>t;)n[t]=arguments[t++];return n},mut)});var wse=S(()=>{"use strict";var bse=zt(),_ut=G_().left,xut=bse.aTypedArray,but=bse.exportTypedArrayMethod;but("reduce",function(t){var r=arguments.length;return _ut(xut(this),t,r,r>1?arguments[1]:void 0)})});var Sse=S(()=>{"use strict";var Ese=zt(),wut=G_().right,Eut=Ese.aTypedArray,Sut=Ese.exportTypedArrayMethod;Sut("reduceRight",function(t){var r=arguments.length;return wut(Eut(this),t,r,r>1?arguments[1]:void 0)})});var Ise=S(()=>{"use strict";var Tse=zt(),Tut=Tse.aTypedArray,Iut=Tse.exportTypedArrayMethod,Cut=Math.floor;Iut("reverse",function(){for(var t=this,r=Tut(t).length,n=Cut(r/2),i=0,a;i<n;)a=t[i],t[i++]=t[--r],t[r]=a;return t})});var Ose=S(()=>{"use strict";var Ase=Ze(),qse=Qe(),GN=zt(),Aut=Yt(),qut=SN(),Put=Bt(),Pse=Ne(),Mut=Ase.RangeError,VN=Ase.Int8Array,Cse=VN&&VN.prototype,Mse=Cse&&Cse.set,Out=GN.aTypedArray,Rut=GN.exportTypedArrayMethod,$N=!Pse(function(){var e=new Uint8ClampedArray(2);return qse(Mse,e,{length:1,0:3},1),e[1]!==3}),Dut=$N&&GN.NATIVE_ARRAY_BUFFER_VIEWS&&Pse(function(){var e=new VN(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});Rut("set",function(t){Out(this);var r=qut(arguments.length>1?arguments[1]:void 0,1),n=Put(t);if($N)return qse(Mse,this,n,r);var i=this.length,a=Aut(n),h=0;if(a+r>i)throw new Mut("Wrong length");for(;h<a;)this[r+h]=n[h++]},!$N||Dut)});var Rse=S(()=>{"use strict";var WN=zt(),Lut=Ne(),kut=Qa(),Nut=WN.aTypedArray,Fut=WN.getTypedArrayConstructor,zut=WN.exportTypedArrayMethod,jut=Lut(function(){new Int8Array(1).slice()});zut("slice",function(t,r){for(var n=kut(Nut(this),t,r),i=Fut(this),a=0,h=n.length,p=new i(h);h>a;)p[a]=n[a++];return p},jut)});var Lse=S(()=>{"use strict";var Dse=zt(),But=An().some,Uut=Dse.aTypedArray,Vut=Dse.exportTypedArrayMethod;Vut("some",function(t){return But(Uut(this),t,arguments.length>1?arguments[1]:void 0)})});var Bse=S(()=>{"use strict";var $ut=Ze(),Gut=xl(),HN=Ne(),Wut=Et(),Hut=DE(),jse=zt(),kse=wR(),Zut=ER(),Nse=vu(),Fse=LE(),Kut=jse.aTypedArray,Xut=jse.exportTypedArrayMethod,M0=$ut.Uint16Array,Zv=M0&&Gut(M0.prototype.sort),Yut=!!Zv&&!(HN(function(){Zv(new M0(2),null)})&&HN(function(){Zv(new M0(2),{})})),zse=!!Zv&&!HN(function(){if(Nse)return Nse<74;if(kse)return kse<67;if(Zut)return!0;if(Fse)return Fse<602;var e=new M0(516),t=Array(516),r,n;for(r=0;r<516;r++)n=r%4,e[r]=515-r,t[r]=r-2*n+3;for(Zv(e,function(i,a){return(i/4|0)-(a/4|0)}),r=0;r<516;r++)if(e[r]!==t[r])return!0}),Jut=function(e){return function(t,r){return e!==void 0?+e(t,r)||0:r!==r?-1:t!==t?1:t===0&&r===0?1/t>0&&1/r<0?1:-1:t>r}};Xut("sort",function(t){return t!==void 0&&Wut(t),zse?Zv(this,t):Hut(Kut(this),Jut(t))},!zse||Yut)});var Vse=S(()=>{"use strict";var ZN=zt(),Qut=Ya(),Use=Ns(),elt=ZN.aTypedArray,tlt=ZN.getTypedArrayConstructor,rlt=ZN.exportTypedArrayMethod;rlt("subarray",function(t,r){var n=elt(this),i=n.length,a=Use(t,i),h=tlt(n);return new h(n.buffer,n.byteOffset+a*n.BYTES_PER_ELEMENT,Qut((r===void 0?i:Use(r,i))-a))})});var Zse=S(()=>{"use strict";var nlt=Ze(),ilt=aa(),Wse=zt(),KN=Ne(),$se=Qa(),GS=nlt.Int8Array,Gse=Wse.aTypedArray,alt=Wse.exportTypedArrayMethod,Hse=[].toLocaleString,olt=!!GS&&KN(function(){Hse.call(new GS(1))}),slt=KN(function(){return[1,2].toLocaleString()!==new GS([1,2]).toLocaleString()})||!KN(function(){GS.prototype.toLocaleString.call([1,2])});alt("toLocaleString",function(){return ilt(Hse,olt?$se(Gse(this)):Gse(this),$se(arguments))},slt)});var YN=S(()=>{"use strict";var ult=IR(),XN=zt(),llt=XN.aTypedArray,clt=XN.exportTypedArrayMethod,hlt=XN.getTypedArrayConstructor;clt("toReversed",function(){return ult(llt(this),hlt(this))})});var JN=S(()=>{"use strict";var WS=zt(),flt=Oe(),plt=Et(),dlt=Tl(),vlt=WS.aTypedArray,mlt=WS.getTypedArrayConstructor,glt=WS.exportTypedArrayMethod,ylt=flt(WS.TypedArrayPrototype.sort);glt("toSorted",function(t){t!==void 0&&plt(t);var r=vlt(this),n=dlt(mlt(r),r);return ylt(n,t)})});var Xse=S(()=>{"use strict";var _lt=zt().exportTypedArrayMethod,xlt=Ne(),blt=Ze(),wlt=Oe(),Kse=blt.Uint8Array,Elt=Kse&&Kse.prototype||{},HS=[].toString,Slt=wlt([].join);xlt(function(){HS.call({})})&&(HS=function(){return Slt(this)});var Tlt=Elt.toString!==HS;_lt("toString",HS,Tlt)});var eF=S(()=>{"use strict";var Ilt=MR(),QN=zt(),Clt=NS(),Alt=Gr(),qlt=I0(),Plt=QN.aTypedArray,Mlt=QN.getTypedArrayConstructor,Olt=QN.exportTypedArrayMethod,Rlt=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return e===8}}();Olt("with",function(e,t){var r=Plt(this),n=Alt(e),i=Clt(r)?qlt(t):+t;return Ilt(r,Mlt(r),n,i)},!Rlt)});var tue=S(()=>{"use strict";var Dlt=K(),tF=Oe(),Llt=qt(),Yse=String.fromCharCode,Jse=tF("".charAt),Qse=tF(/./.exec),eue=tF("".slice),klt=/^[\da-f]{2}$/i,Nlt=/^[\da-f]{4}$/i;Dlt({global:!0},{unescape:function(t){for(var r=Llt(t),n="",i=r.length,a=0,h,p;a<i;){if(h=Jse(r,a++),h==="%"){if(Jse(r,a)==="u"){if(p=eue(r,a+1,a+5),Qse(Nlt,p)){n+=Yse(parseInt(p,16)),a+=5;continue}}else if(p=eue(r,a,a+2),Qse(klt,p)){n+=Yse(parseInt(p,16)),a+=2;continue}}n+=h}return n}})});var iF=S((a9t,sue)=>{"use strict";var Flt=Oe(),rue=ss(),ZS=wh().getWeakData,zlt=oa(),jlt=Ye(),Blt=Nn(),rF=It(),Ult=hn(),iue=An(),nue=kt(),aue=dr(),Vlt=aue.set,$lt=aue.getterFor,Glt=iue.find,Wlt=iue.findIndex,Hlt=Flt([].splice),Zlt=0,KS=function(e){return e.frozen||(e.frozen=new oue)},oue=function(){this.entries=[]},nF=function(e,t){return Glt(e.entries,function(r){return r[0]===t})};oue.prototype={get:function(e){var t=nF(this,e);if(t)return t[1]},has:function(e){return!!nF(this,e)},set:function(e,t){var r=nF(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=Wlt(this.entries,function(r){return r[0]===e});return~t&&Hlt(this.entries,t,1),!!~t}};sue.exports={getConstructor:function(e,t,r,n){var i=e(function(g,w){zlt(g,a),Vlt(g,{type:t,id:Zlt++,frozen:null}),Blt(w)||Ult(w,g[n],{that:g,AS_ENTRIES:r})}),a=i.prototype,h=$lt(t),p=function(g,w,E){var q=h(g),P=ZS(jlt(w),!0);return P===!0?KS(q).set(w,E):P[q.id]=E,g};return rue(a,{delete:function(g){var w=h(this);if(!rF(g))return!1;var E=ZS(g);return E===!0?KS(w).delete(g):E&&nue(E,w.id)&&delete E[w.id]},has:function(w){var E=h(this);if(!rF(w))return!1;var q=ZS(w);return q===!0?KS(E).has(w):q&&nue(q,E.id)}}),rue(a,r?{get:function(w){var E=h(this);if(rF(w)){var q=ZS(w);if(q===!0)return KS(E).get(w);if(q)return q[E.id]}},set:function(w,E){return p(this,w,E)}}:{add:function(w){return p(this,w,!0)}}),i}}});var vue=S(()=>{"use strict";var Klt=Pl(),uue=Ze(),QS=Oe(),lue=ss(),Xlt=wh(),Ylt=t0(),cue=iF(),XS=It(),YS=dr().enforce,Jlt=Ne(),Qlt=aO(),D0=Object,ect=Array.isArray,JS=D0.isExtensible,hue=D0.isFrozen,tct=D0.isSealed,fue=D0.freeze,rct=D0.seal,nct=!uue.ActiveXObject&&"ActiveXObject"in uue,O0,pue=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},due=Ylt("WeakMap",pue,cue),Kv=due.prototype,eT=QS(Kv.set),ict=function(){return Klt&&Jlt(function(){var e=fue([]);return eT(new due,e,1),!hue(e)})};Qlt&&(nct?(O0=cue.getConstructor(pue,"WeakMap",!0),Xlt.enable(),aF=QS(Kv.delete),R0=QS(Kv.has),oF=QS(Kv.get),lue(Kv,{delete:function(e){if(XS(e)&&!JS(e)){var t=YS(this);return t.frozen||(t.frozen=new O0),aF(this,e)||t.frozen.delete(e)}return aF(this,e)},has:function(t){if(XS(t)&&!JS(t)){var r=YS(this);return r.frozen||(r.frozen=new O0),R0(this,t)||r.frozen.has(t)}return R0(this,t)},get:function(t){if(XS(t)&&!JS(t)){var r=YS(this);return r.frozen||(r.frozen=new O0),R0(this,t)?oF(this,t):r.frozen.get(t)}return oF(this,t)},set:function(t,r){if(XS(t)&&!JS(t)){var n=YS(this);n.frozen||(n.frozen=new O0),R0(this,t)?eT(this,t,r):n.frozen.set(t,r)}else eT(this,t,r);return this}})):ict()&&lue(Kv,{set:function(t,r){var n;return ect(t)&&(hue(t)?n=fue:tct(t)&&(n=rct)),eT(this,t,r),n&&n(t),this}}));var aF,R0,oF});var tT=S(()=>{"use strict";vue()});var mue=S(()=>{"use strict";var act=t0(),oct=iF();act("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},oct)});var gue=S(()=>{"use strict";mue()});var yue=S(()=>{"use strict";YO()});var bue=S(()=>{"use strict";var sct=K(),uct=Ze(),lct=Ri(),_ue=jn(),nT=is(),cct=$f(),xue=Cn(),rT=zn(),sF=Xa(),hct=yE(),fct=Kf(),pct=yt(),dct=Ne(),vct=jt(),Xv=uct.SuppressedError,mct=pct("toStringTag"),iT=Error,gct=!!Xv&&Xv.length!==3,yct=!!Xv&&dct(function(){return new Xv(1,2,3,{cause:4}).cause===4}),aT=gct||yct,cp=function(t,r,n){var i=lct(L0,this),a;return nT?a=aT&&(!i||_ue(this)===L0)?new Xv:nT(new iT,i?_ue(this):L0):(a=i?this:xue(L0),rT(a,mct,"Error")),n!==void 0&&rT(a,"message",fct(n)),hct(a,cp,a.stack,1),rT(a,"error",t),rT(a,"suppressed",r),a};nT?nT(cp,iT):cct(cp,iT,{name:!0});var L0=cp.prototype=aT?Xv.prototype:xue(iT.prototype,{constructor:sF(1,cp),message:sF(1,""),name:sF(1,"SuppressedError")});aT&&!vct&&(L0.constructor=cp);sct({global:!0,constructor:!0,arity:3,forced:aT},{SuppressedError:cp})});var Yv=S((y9t,que)=>{"use strict";var Iue=Ze(),Cue=w_(),Aue=Ot(),_ct=Cn(),oT=jn(),xct=br(),bct=yt(),wct=jt(),wue="USE_FUNCTION_CONSTRUCTOR",Eue=bct("asyncIterator"),Sue=Iue.AsyncIterator,Tue=Cue.AsyncIteratorPrototype,Tu,uF;if(Tue)Tu=Tue;else if(Aue(Sue))Tu=Sue.prototype;else if(Cue[wue]||Iue[wue])try{uF=oT(oT(oT(Function("return async function*(){}()")()))),oT(uF)===Object.prototype&&(Tu=uF)}catch(e){}Tu?wct&&(Tu=_ct(Tu)):Tu={};Aue(Tu[Eue])||xct(Tu,Eue,function(){return this});que.exports=Tu});var k0=S((_9t,Fue)=>{"use strict";var Pue=Qe(),Mue=Ye(),Ect=Cn(),Sct=In(),Tct=ss(),Due=dr(),Ict=St(),Cct=Yv(),Lue=gi(),lF=Ict("Promise"),kue="AsyncFromSyncIterator",Act=Due.set,Oue=Due.getterFor(kue),Rue=function(e,t,r){var n=e.done;lF.resolve(e.value).then(function(i){t(Lue(i,n))},r)},Nue=function(t){t.type=kue,Act(this,t)};Nue.prototype=Tct(Ect(Cct),{next:function(){var t=Oue(this);return new lF(function(r,n){var i=Mue(Pue(t.next,t.iterator));Rue(i,r,n)})},return:function(){var e=Oue(this).iterator;return new lF(function(t,r){var n=Sct(e,"return");if(n===void 0)return t(Lue(void 0,!0));var i=Mue(Pue(n,e));Rue(i,t,r)})}});Fue.exports=Nue});var jue=S((x9t,zue)=>{"use strict";var qct=Qe(),Pct=k0(),Mct=Ye(),Oct=hh(),Rct=tn(),Dct=In(),Lct=yt(),kct=Lct("asyncIterator");zue.exports=function(e,t){var r=arguments.length<2?Dct(e,kct):t;return r?Mct(qct(r,e)):new Pct(Rct(Oct(e)))}});var Jv=S((b9t,Bue)=>{"use strict";var Nct=Qe(),Fct=St(),zct=In();Bue.exports=function(e,t,r,n){try{var i=zct(e,"return");if(i)return Fct("Promise").resolve(Nct(i,e)).then(function(){t(r)},function(a){n(a)})}catch(a){return n(a)}t(r)}});var hp=S((w9t,Uue)=>{"use strict";var jct=Qe(),Bct=Et(),cF=Ye(),Uct=It(),Vct=fh(),$ct=St(),Gct=tn(),hF=Jv(),N0=function(e){var t=e===0,r=e===1,n=e===2,i=e===3;return function(a,h,p){cF(a);var g=h!==void 0;(g||!t)&&Bct(h);var w=Gct(a),E=$ct("Promise"),q=w.iterator,P=w.next,k=0;return new E(function(W,Q){var $=function(Z){hF(q,Q,Z,Q)},V=function(){try{if(g)try{Vct(k)}catch(Z){$(Z)}E.resolve(cF(jct(P,q))).then(function(Z){try{if(cF(Z).done)t?(p.length=k,W(p)):W(i?!1:n||void 0);else{var te=Z.value;try{if(g){var se=h(te,k),Ie=function(qe){if(r)V();else if(n)qe?V():hF(q,W,!1,Q);else if(t)try{p[k++]=qe,V()}catch(Ae){$(Ae)}else qe?hF(q,W,i||te,Q):V()};Uct(se)?E.resolve(se).then(Ie,$):Ie(se)}else p[k++]=te,V()}catch(qe){$(qe)}}}catch(qe){Q(qe)}},Q)}catch(Z){Q(Z)}};V()})}};Uue.exports={toArray:N0(0),forEach:N0(1),every:N0(2),some:N0(3),find:N0(4)}});var fF=S((E9t,Wue)=>{"use strict";var Wct=Pr(),Vue=Oe(),Hct=Bt(),Zct=zs(),Kct=jue(),Xct=hh(),Yct=tn(),Jct=yu(),Qct=In(),eht=St(),tht=AR(),rht=yt(),nht=k0(),iht=hp().toArray,aht=rht("asyncIterator"),$ue=Vue(tht("Array","values")),oht=Vue($ue([]).next),sht=function(){return new Gue(this)},Gue=function(e){this.iterator=$ue(e)};Gue.prototype.next=function(){return oht(this.iterator)};Wue.exports=function(t){var r=this,n=arguments.length,i=n>1?arguments[1]:void 0,a=n>2?arguments[2]:void 0;return new(eht("Promise"))(function(h){var p=Hct(t);i!==void 0&&(i=Wct(i,a));var g=Qct(p,aht),w=g?void 0:Jct(p)||sht,E=Zct(r)?new r:[],q=g?Kct(p,g):new nht(Yct(Xct(p,w)));h(iht(q,i,E))})}});var Zue=S(()=>{"use strict";var uht=K(),lht=fF(),cht=Ne(),Hue=Array.fromAsync,hht=!Hue||cht(function(){var e=0;return Hue.call(function(){return e++,[]},{length:0}),e!==1});uht({target:"Array",stat:!0,forced:hht},{fromAsync:lht})});var Kue=S(()=>{"use strict";tR()});var Xue=S(()=>{"use strict";var fht=K(),pht=An().filterReject,dht=fn();fht({target:"Array",proto:!0,forced:!0},{filterOut:function(t){return pht(this,t,arguments.length>1?arguments[1]:void 0)}});dht("filterOut")});var Yue=S(()=>{"use strict";var vht=K(),mht=An().filterReject,ght=fn();vht({target:"Array",proto:!0,forced:!0},{filterReject:function(t){return mht(this,t,arguments.length>1?arguments[1]:void 0)}});ght("filterReject")});var Jue=S(()=>{"use strict";oR()});var Que=S(()=>{"use strict";sR()});var sT=S((k9t,ele)=>{"use strict";var yht=Pr(),_ht=Oe(),xht=gl(),bht=Bt(),wht=mu(),Eht=Yt(),Sht=Cn(),Tht=Tl(),Iht=Array,Cht=_ht([].push);ele.exports=function(e,t,r,n){for(var i=bht(e),a=xht(i),h=yht(t,r),p=Sht(null),g=Eht(a),w=0,E,q,P;g>w;w++)P=a[w],q=wht(h(P,w,i)),q in p?Cht(p[q],P):p[q]=[P];if(n&&(E=n(i),E!==Iht))for(q in p)p[q]=Tht(E,p[q]);return p}});var tle=S(()=>{"use strict";var Aht=K(),qht=sT(),Pht=fn();Aht({target:"Array",proto:!0},{group:function(t){var r=arguments.length>1?arguments[1]:void 0;return qht(this,t,r)}});Pht("group")});var rle=S(()=>{"use strict";var Mht=K(),Oht=sT(),Rht=os(),Dht=fn();Mht({target:"Array",proto:!0,forced:!Rht("groupBy")},{groupBy:function(t){var r=arguments.length>1?arguments[1]:void 0;return Oht(this,t,r)}});Dht("groupBy")});var pF=S((B9t,nle)=>{"use strict";var Lht=Pr(),kht=Oe(),Nht=gl(),Fht=Bt(),zht=Yt(),uT=Jn(),jht=uT.Map,Bht=uT.get,Uht=uT.has,Vht=uT.set,$ht=kht([].push);nle.exports=function(t){for(var r=Fht(this),n=Nht(r),i=Lht(t,arguments.length>1?arguments[1]:void 0),a=new jht,h=zht(n),p=0,g,w;h>p;p++)w=n[p],g=i(w,p,r),Uht(a,g)?$ht(Bht(a,g),w):Vht(a,g,[w]);return a}});var ile=S(()=>{"use strict";var Ght=K(),Wht=os(),Hht=fn(),Zht=pF(),Kht=jt();Ght({target:"Array",proto:!0,name:"groupToMap",forced:Kht||!Wht("groupByToMap")},{groupByToMap:Zht});Hht("groupByToMap")});var ale=S(()=>{"use strict";var Xht=K(),Yht=fn(),Jht=pF(),Qht=jt();Xht({target:"Array",proto:!0,forced:Qht},{groupToMap:Jht});Yht("groupToMap")});var ule=S(()=>{"use strict";var eft=K(),tft=Fs(),ole=Object.isFrozen,sle=function(e,t){if(!ole||!tft(e)||!ole(e))return!1;for(var r=0,n=e.length,i;r<n;)if(i=e[r++],!(typeof i=="string"||t&&i===void 0))return!1;return n!==0};eft({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(t){if(!sle(t,!0))return!1;var r=t.raw;return r.length===t.length&&sle(r,!1)}})});var lle=S(()=>{"use strict";var rft=dt(),nft=fn(),ift=Bt(),aft=Yt(),oft=Wr();rft&&(oft(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=ift(this),r=aft(t);return r===0?0:r-1}}),nft("lastIndex"))});var fle=S(()=>{"use strict";var sft=dt(),uft=fn(),cle=Bt(),hle=Yt(),lft=Wr();sft&&(lft(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=cle(this),r=hle(t);return r===0?void 0:t[r-1]},set:function(t){var r=cle(this),n=hle(r);return r[n===0?0:n-1]=t}}),uft("lastItem"))});var ple=S(()=>{"use strict";CR()});var dle=S(()=>{"use strict";qR()});var vle=S(()=>{"use strict";PR()});var us=S((i7t,xle)=>{"use strict";var mle=Oe(),cft=Ol(),gle=Jn(),hft=gle.Map,yle=gle.proto,fft=mle(yle.forEach),_le=mle(yle.entries),pft=_le(new hft).next;xle.exports=function(e,t,r){return r?cft({iterator:_le(e),next:pft},function(n){return t(n[1],n[0])}):fft(e,t)}});var lT=S((a7t,ble)=>{"use strict";var dft=Oe(),vft=Et(),mft=Nn(),gft=Yt(),yft=Bt(),dF=Jn(),_ft=us(),xft=dF.Map,bft=dF.has,wft=dF.set,Eft=dft([].push);ble.exports=function(t){var r=yft(this),n=gft(r),i=[],a=new xft,h=mft(t)?function(E){return E}:vft(t),p,g,w;for(p=0;p<n;p++)g=r[p],w=h(g),bft(a,w)||wft(a,w,g);return _ft(a,function(E){Eft(i,E)}),i}});var wle=S(()=>{"use strict";var Sft=K(),Tft=fn(),Ift=lT();Sft({target:"Array",proto:!0,forced:!0},{uniqueBy:Ift});Tft("uniqueBy")});var Ele=S(()=>{"use strict";OR()});var Sle=S(()=>{"use strict";QR()});var Tle=S(()=>{"use strict";dD()});var Ile=S(()=>{"use strict";vD()});var mF=S((m7t,Mle)=>{"use strict";var Cft=Qe(),Aft=Oe(),qft=Pr(),Pft=Ye(),Mft=Et(),qle=Nn(),vF=In(),Ple=yt(),Oft=Ple("asyncDispose"),Cle=Ple("dispose"),Rft=Aft([].push),Dft=function(e,t){if(t==="async-dispose"){var r=vF(e,Oft);return r!==void 0||(r=vF(e,Cle),r===void 0)?r:function(){Cft(r,this)}}return vF(e,Cle)},Ale=function(e,t,r){return arguments.length<3&&!qle(e)&&(r=Mft(Dft(Pft(e),t))),r===void 0?function(){}:qft(r,e)};Mle.exports=function(e,t,r,n){var i;if(arguments.length<4){if(qle(t)&&r==="sync-dispose")return;i=Ale(t,r)}else i=Ale(void 0,r,n);Rft(e.stack,i)}});var Fle=S(()=>{"use strict";var Lft=K(),hT=dt(),Dle=St(),Ole=Et(),kft=oa(),Lle=br(),Nft=ss(),Fft=Wr(),kle=yt(),Nle=dr(),gF=mF(),Rle=Dle("Promise"),zft=Dle("SuppressedError"),jft=ReferenceError,Bft=kle("asyncDispose"),Uft=kle("toStringTag"),pT="AsyncDisposableStack",Vft=Nle.set,fT=Nle.getterFor(pT),yF="async-dispose",F0="disposed",$ft="pending",cT=function(e){var t=fT(e);if(t.state===F0)throw new jft(pT+" already disposed");return t},_F=function(){Vft(kft(this,Qv),{type:pT,state:$ft,stack:[]}),hT||(this.disposed=!1)},Qv=_F.prototype;Nft(Qv,{disposeAsync:function(){var t=this;return new Rle(function(r,n){var i=fT(t);if(i.state===F0)return r(void 0);i.state=F0,hT||(t.disposed=!0);var a=i.stack,h=a.length,p=!1,g,w=function(q){p?g=new zft(q,g):(p=!0,g=q),E()},E=function(){if(h){var q=a[--h];a[h]=null;try{Rle.resolve(q()).then(E,w)}catch(P){w(P)}}else i.stack=null,p?n(g):r(void 0)};E()})},use:function(t){return gF(cT(this),t,yF),t},adopt:function(t,r){var n=cT(this);return Ole(r),gF(n,void 0,yF,function(){return r(t)}),t},defer:function(t){var r=cT(this);Ole(t),gF(r,void 0,yF,t)},move:function(){var t=cT(this),r=new _F;return fT(r).stack=t.stack,t.stack=[],t.state=F0,hT||(this.disposed=!0),r}});hT&&Fft(Qv,"disposed",{configurable:!0,get:function(){return fT(this).state===F0}});Lle(Qv,Bft,Qv.disposeAsync,{name:"disposeAsync"});Lle(Qv,Uft,pT,{nonWritable:!0});Lft({global:!0,constructor:!0},{AsyncDisposableStack:_F})});var Vle=S(()=>{"use strict";var Gft=K(),Wft=oa(),Hft=jn(),jle=zn(),Ble=kt(),Zft=yt(),qh=Yv(),Ule=jt(),zle=Zft("toStringTag"),Kft=TypeError,xF=function(){if(Wft(this,qh),Hft(this)===qh)throw new Kft("Abstract class AsyncIterator not directly constructable")};xF.prototype=qh;Ble(qh,zle)||jle(qh,zle,"AsyncIterator");(Ule||!Ble(qh,"constructor")||qh.constructor===Object)&&jle(qh,"constructor",xF);Gft({global:!0,constructor:!0,forced:Ule},{AsyncIterator:xF})});var fp=S((b7t,Yle)=>{"use strict";var Xft=Qe(),dT=Eh(),$le=Ye(),Yft=Cn(),Jft=zn(),Qft=ss(),ept=yt(),Wle=dr(),tpt=St(),rpt=In(),npt=Yv(),bF=gi(),Gle=El(),Iu=tpt("Promise"),ipt=ept("toStringTag"),Hle="AsyncIteratorHelper",Zle="WrapForValidAsyncIterator",apt=Wle.set,Kle=function(e){var t=!e,r=Wle.getterFor(e?Zle:Hle),n=function(i){var a=dT(function(){return r(i)}),h=a.error,p=a.value;return h||t&&p.done?{exit:!0,value:h?Iu.reject(p):Iu.resolve(bF(void 0,!0))}:{exit:!1,value:p}};return Qft(Yft(npt),{next:function(){var a=n(this),h=a.value;if(a.exit)return h;var p=dT(function(){return $le(h.nextHandler(Iu))}),g=p.error,w=p.value;return g&&(h.done=!0),g?Iu.reject(w):Iu.resolve(w)},return:function(){var i=n(this),a=i.value;if(i.exit)return a;a.done=!0;var h=a.iterator,p,g,w=dT(function(){if(a.inner)try{Gle(a.inner.iterator,"normal")}catch(E){return Gle(h,"throw",E)}return rpt(h,"return")});return p=g=w.value,w.error?Iu.reject(g):p===void 0?Iu.resolve(bF(void 0,!0)):(w=dT(function(){return Xft(p,h)}),g=w.value,w.error?Iu.reject(g):e?Iu.resolve(g):Iu.resolve(g).then(function(E){return $le(E),bF(void 0,!0)}))}})},opt=Kle(!0),Xle=Kle(!1);Jft(Xle,ipt,"Async Iterator Helper");Yle.exports=function(e,t){var r=function(i,a){a?(a.iterator=i.iterator,a.next=i.next):a=i,a.type=t?Zle:Hle,a.nextHandler=e,a.counter=0,a.done=!1,apt(this,a)};return r.prototype=t?opt:Xle,r}});var EF=S((w7t,Qle)=>{"use strict";var spt=Qe(),upt=Et(),wF=Ye(),lpt=It(),cpt=tn(),hpt=fp(),Jle=gi(),fpt=Jv(),ppt=hpt(function(e){var t=this,r=t.iterator,n=t.mapper;return new e(function(i,a){var h=function(g){t.done=!0,a(g)},p=function(g){fpt(r,h,g,h)};e.resolve(wF(spt(t.next,r))).then(function(g){try{if(wF(g).done)t.done=!0,i(Jle(void 0,!0));else{var w=g.value;try{var E=n(w,t.counter++),q=function(P){i(Jle(P,!1))};lpt(E)?e.resolve(E).then(q,p):q(E)}catch(P){p(P)}}}catch(P){h(P)}},h)})});Qle.exports=function(t){return wF(this),upt(t),new ppt(cpt(this),{mapper:t})}});var SF=S((E7t,ece)=>{"use strict";var dpt=Qe(),vpt=EF(),mpt=function(e,t){return[t,e]};ece.exports=function(){return dpt(vpt,this,mpt)}});var tce=S(()=>{"use strict";var gpt=K(),ypt=SF();gpt({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:ypt})});var ace=S(()=>{"use strict";var _pt=Qe(),xpt=br(),bpt=St(),wpt=In(),Ept=kt(),Spt=yt(),rce=Yv(),nce=Spt("asyncDispose"),ice=bpt("Promise");Ept(rce,nce)||xpt(rce,nce,function(){var e=this;return new ice(function(t,r){var n=wpt(e,"return");n?ice.resolve(_pt(n,e)).then(function(){t(void 0)},r):t(void 0)})})});var sce=S(()=>{"use strict";var Tpt=K(),Ipt=Qe(),TF=Ye(),Cpt=tn(),Apt=e0(),qpt=Cv(),Ppt=fp(),oce=gi(),Mpt=jt(),Opt=Ppt(function(e){var t=this;return new e(function(r,n){var i=function(h){t.done=!0,n(h)},a=function(){try{e.resolve(TF(Ipt(t.next,t.iterator))).then(function(h){try{TF(h).done?(t.done=!0,r(oce(void 0,!0))):t.remaining?(t.remaining--,a()):r(oce(h.value,!1))}catch(p){i(p)}},i)}catch(h){i(h)}};a()})});Tpt({target:"AsyncIterator",proto:!0,real:!0,forced:Mpt},{drop:function(t){TF(this);var r=qpt(Apt(+t));return new Opt(Cpt(this),{remaining:r})}})});var uce=S(()=>{"use strict";var Rpt=K(),Dpt=hp().every;Rpt({target:"AsyncIterator",proto:!0,real:!0},{every:function(t){return Dpt(this,t)}})});var cce=S(()=>{"use strict";var Lpt=K(),kpt=Qe(),Npt=Et(),IF=Ye(),Fpt=It(),zpt=tn(),jpt=fp(),lce=gi(),Bpt=Jv(),Upt=jt(),Vpt=jpt(function(e){var t=this,r=t.iterator,n=t.predicate;return new e(function(i,a){var h=function(w){t.done=!0,a(w)},p=function(w){Bpt(r,h,w,h)},g=function(){try{e.resolve(IF(kpt(t.next,r))).then(function(w){try{if(IF(w).done)t.done=!0,i(lce(void 0,!0));else{var E=w.value;try{var q=n(E,t.counter++),P=function(k){k?i(lce(E,!1)):g()};Fpt(q)?e.resolve(q).then(P,p):P(q)}catch(k){p(k)}}}catch(k){h(k)}},h)}catch(w){h(w)}};g()})});Lpt({target:"AsyncIterator",proto:!0,real:!0,forced:Upt},{filter:function(t){return IF(this),Npt(t),new Vpt(zpt(this),{predicate:t})}})});var hce=S(()=>{"use strict";var $pt=K(),Gpt=hp().find;$pt({target:"AsyncIterator",proto:!0,real:!0},{find:function(t){return Gpt(this,t)}})});var CF=S((k7t,dce)=>{"use strict";var Wpt=Qe(),Hpt=Ot(),fce=Ye(),pce=tn(),Zpt=yu(),Kpt=In(),Xpt=yt(),Ypt=k0(),Jpt=Xpt("asyncIterator");dce.exports=function(e){var t=fce(e),r=!0,n=Kpt(t,Jpt),i;return Hpt(n)||(n=Zpt(t),r=!1),n!==void 0?i=Wpt(n,t):(i=t,r=!0),fce(i),pce(r?i:new Ypt(pce(i)))}});var gce=S(()=>{"use strict";var Qpt=K(),vce=Qe(),edt=Et(),z0=Ye(),tdt=It(),rdt=tn(),ndt=fp(),mce=gi(),idt=CF(),adt=Jv(),odt=jt(),sdt=ndt(function(e){var t=this,r=t.iterator,n=t.mapper;return new e(function(i,a){var h=function(E){t.done=!0,a(E)},p=function(E){adt(r,h,E,h)},g=function(){try{e.resolve(z0(vce(t.next,r))).then(function(E){try{if(z0(E).done)t.done=!0,i(mce(void 0,!0));else{var q=E.value;try{var P=n(q,t.counter++),k=function(W){try{t.inner=idt(W),w()}catch(Q){p(Q)}};tdt(P)?e.resolve(P).then(k,p):k(P)}catch(W){p(W)}}}catch(W){h(W)}},h)}catch(E){h(E)}},w=function(){var E=t.inner;if(E)try{e.resolve(z0(vce(E.next,E.iterator))).then(function(q){try{z0(q).done?(t.inner=null,g()):i(mce(q.value,!1))}catch(P){p(P)}},p)}catch(q){p(q)}else g()};w()})});Qpt({target:"AsyncIterator",proto:!0,real:!0,forced:odt},{flatMap:function(t){return z0(this),edt(t),new sdt(rdt(this),{mapper:t,inner:null})}})});var yce=S(()=>{"use strict";var udt=K(),ldt=hp().forEach;udt({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(t){return ldt(this,t)}})});var AF=S((B7t,_ce)=>{"use strict";var cdt=Qe(),hdt=fp();_ce.exports=hdt(function(){return cdt(this.next,this.iterator)},!0)});var xce=S(()=>{"use strict";var fdt=K(),pdt=Bt(),ddt=Ri(),vdt=CF(),mdt=Yv(),gdt=AF(),ydt=jt();fdt({target:"AsyncIterator",stat:!0,forced:ydt},{from:function(t){var r=vdt(typeof t=="string"?pdt(t):t);return ddt(mdt,r.iterator)?r.iterator:new gdt(r)}})});var bce=S(()=>{"use strict";var _dt=K(),xdt=SF();_dt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:xdt})});var wce=S(()=>{"use strict";var bdt=K(),wdt=EF(),Edt=jt();bdt({target:"AsyncIterator",proto:!0,real:!0,forced:Edt},{map:wdt})});var Ece=S(()=>{"use strict";var Sdt=K(),Tdt=Qe(),Idt=Et(),qF=Ye(),Cdt=It(),Adt=St(),qdt=tn(),Pdt=Jv(),PF=Adt("Promise"),Mdt=TypeError;Sdt({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(t){qF(this),Idt(t);var r=qdt(this),n=r.iterator,i=r.next,a=arguments.length<2,h=a?void 0:arguments[1],p=0;return new PF(function(g,w){var E=function(P){Pdt(n,w,P,w)},q=function(){try{PF.resolve(qF(Tdt(i,n))).then(function(P){try{if(qF(P).done)a?w(new Mdt("Reduce of empty iterator with no initial value")):g(h);else{var k=P.value;if(a)a=!1,h=k,q();else try{var W=t(h,k,p),Q=function($){h=$,q()};Cdt(W)?PF.resolve(W).then(Q,E):Q(W)}catch($){E($)}}p++}catch($){w($)}},w)}catch(P){w(P)}};q()})}})});var Sce=S(()=>{"use strict";var Odt=K(),Rdt=hp().some;Odt({target:"AsyncIterator",proto:!0,real:!0},{some:function(t){return Rdt(this,t)}})});var Cce=S(()=>{"use strict";var Ddt=K(),Tce=Qe(),Ice=Ye(),Ldt=tn(),kdt=e0(),Ndt=Cv(),Fdt=fp(),MF=gi(),zdt=jt(),jdt=Fdt(function(e){var t=this,r=t.iterator,n;if(!t.remaining--){var i=MF(void 0,!0);return t.done=!0,n=r.return,n!==void 0?e.resolve(Tce(n,r,void 0)).then(function(){return i}):i}return e.resolve(Tce(t.next,r)).then(function(a){return Ice(a).done?(t.done=!0,MF(void 0,!0)):MF(a.value,!1)}).then(null,function(a){throw t.done=!0,a})});Ddt({target:"AsyncIterator",proto:!0,real:!0,forced:zdt},{take:function(t){Ice(this);var r=Ndt(kdt(+t));return new jdt(Ldt(this),{remaining:r})}})});var Ace=S(()=>{"use strict";var Bdt=K(),Udt=hp().toArray;Bdt({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return Udt(this,void 0,[])}})});var mT=S((rXt,Dce)=>{"use strict";var Pce=dr(),Vdt=ph(),OF=gi(),$dt=Nn(),Gdt=It(),Wdt=Wr(),Mce=dt(),j0="Incorrect Iterator.range arguments",DF="NumericRangeIterator",Hdt=Pce.set,Oce=Pce.getterFor(DF),qce=RangeError,RF=TypeError,Rce=Vdt(function(t,r,n,i,a,h){if(typeof t!=i||r!==1/0&&r!==-1/0&&typeof r!=i)throw new RF(j0);if(t===1/0||t===-1/0)throw new qce(j0);var p=r>t,g=!1,w;if(n===void 0)w=void 0;else if(Gdt(n))w=n.step,g=!!n.inclusive;else if(typeof n==i)w=n;else throw new RF(j0);if($dt(w)&&(w=p?h:-h),typeof w!=i)throw new RF(j0);if(w===1/0||w===-1/0||w===a&&t!==r)throw new qce(j0);var E=t!==t||r!==r||w!==w||r>t!=w>a;Hdt(this,{type:DF,start:t,end:r,step:w,inclusive:g,hitsEnd:E,currentCount:a,zero:a}),Mce||(this.start=t,this.end=r,this.step=w,this.inclusive=g)},DF,function(){var t=Oce(this);if(t.hitsEnd)return OF(void 0,!0);var r=t.start,n=t.end,i=t.step,a=r+i*t.currentCount++;a===n&&(t.hitsEnd=!0);var h=t.inclusive,p;return n>r?p=h?a>n:a>=n:p=h?n>a:n>=a,p?(t.hitsEnd=!0,OF(void 0,!0)):OF(a,!1)}),vT=function(e){Wdt(Rce.prototype,e,{get:function(){return Oce(this)[e]},set:function(){},configurable:!0,enumerable:!1})};Mce&&(vT("start"),vT("end"),vT("inclusive"),vT("step"));Dce.exports=Rce});var Lce=S(()=>{"use strict";var Zdt=K(),Kdt=mT();typeof BigInt=="function"&&Zdt({target:"BigInt",stat:!0,forced:!0},{range:function(t,r,n){return new Kdt(t,r,n,"bigint",BigInt(0),BigInt(1))}})});var LF=S((aXt,zce)=>{"use strict";nS();tT();var Fce=St(),Xdt=Cn(),kce=It(),Ydt=Object,Jdt=TypeError,Qdt=Fce("Map"),evt=Fce("WeakMap"),gT=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=Xdt(null)};gT.prototype.get=function(e,t){return this[e]||(this[e]=t())};gT.prototype.next=function(e,t,r){var n=r?this.objectsByIndex[e]||(this.objectsByIndex[e]=new evt):this.primitives||(this.primitives=new Qdt),i=n.get(t);return i||n.set(t,i=new gT),i};var Nce=new gT;zce.exports=function(){var e=Nce,t=arguments.length,r,n;for(r=0;r<t;r++)kce(n=arguments[r])&&(e=e.next(r,n,!0));if(this===Ydt&&e===Nce)throw new Jdt("Composite keys must contain a non-primitive component");for(r=0;r<t;r++)kce(n=arguments[r])||(e=e.next(r,n,!1));return e}});var Bce=S(()=>{"use strict";var tvt=K(),rvt=aa(),nvt=LF(),ivt=St(),jce=Cn(),avt=Object,ovt=function(){var e=ivt("Object","freeze");return e?e(jce(null)):jce(null)};tvt({global:!0,forced:!0},{compositeKey:function(){return rvt(nvt,avt,arguments).get("object",ovt)}})});var Vce=S(()=>{"use strict";var svt=K(),uvt=LF(),Uce=St(),lvt=aa();svt({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?Uce("Symbol").for(arguments[0]):lvt(uvt,null,arguments).get("symbol",Uce("Symbol"))}})});var $ce=S(()=>{"use strict";var cvt=K(),hvt=Oe(),fvt=zE().unpack,pvt=hvt(DataView.prototype.getUint16);cvt({target:"DataView",proto:!0},{getFloat16:function(t){var r=pvt(this,t,arguments.length>1?arguments[1]:!1);return fvt([r&255,r>>8&255],10)}})});var Gce=S(()=>{"use strict";var dvt=K(),vvt=Oe(),mvt=vvt(DataView.prototype.getUint8);dvt({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(t){return mvt(this,t)}})});var kF=S((dXt,Wce)=>{"use strict";var gvt=Ja(),yvt=TypeError;Wce.exports=function(e){if(gvt(e)==="DataView")return e;throw new yvt("Argument is not a DataView")}});var NF=S((vXt,Hce)=>{"use strict";var _vt=RR(),xvt=.0009765625,bvt=65504,wvt=6103515625e-14;Hce.exports=Math.f16round||function(t){return _vt(t,xvt,bvt,wvt)}});var Zce=S(()=>{"use strict";var Evt=K(),Svt=Oe(),Tvt=kF(),Ivt=xv(),Cvt=zE().pack,Avt=NF(),qvt=Svt(DataView.prototype.setUint16);Evt({target:"DataView",proto:!0},{setFloat16:function(t,r){Tvt(this);var n=Ivt(t),i=Cvt(Avt(r),10,2);return qvt(this,n,i[1]<<8|i[0],arguments.length>2?arguments[2]:!1)}})});var Kce=S(()=>{"use strict";var Pvt=K(),Mvt=Oe(),Ovt=kF(),Rvt=xv(),Dvt=TN(),Lvt=Mvt(DataView.prototype.setUint8);Pvt({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(t,r){Ovt(this);var n=Rvt(t);return Lvt(this,n,Dvt(r))}})});var ehe=S(()=>{"use strict";var kvt=K(),_T=dt(),Nvt=St(),Xce=Et(),Fvt=oa(),Yce=br(),zvt=ss(),jvt=Wr(),Jce=yt(),Qce=dr(),FF=mF(),Bvt=Nvt("SuppressedError"),Uvt=ReferenceError,Vvt=Jce("dispose"),$vt=Jce("toStringTag"),bT="DisposableStack",Gvt=Qce.set,xT=Qce.getterFor(bT),zF="sync-dispose",B0="disposed",Wvt="pending",yT=function(e){var t=xT(e);if(t.state===B0)throw new Uvt(bT+" already disposed");return t},jF=function(){Gvt(Fvt(this,em),{type:bT,state:Wvt,stack:[]}),_T||(this.disposed=!1)},em=jF.prototype;zvt(em,{dispose:function(){var t=xT(this);if(t.state!==B0){t.state=B0,_T||(this.disposed=!0);for(var r=t.stack,n=r.length,i=!1,a;n;){var h=r[--n];r[n]=null;try{h()}catch(p){i?a=new Bvt(p,a):(i=!0,a=p)}}if(t.stack=null,i)throw a}},use:function(t){return FF(yT(this),t,zF),t},adopt:function(t,r){var n=yT(this);return Xce(r),FF(n,void 0,zF,function(){r(t)}),t},defer:function(t){var r=yT(this);Xce(t),FF(r,void 0,zF,t)},move:function(){var t=yT(this),r=new jF;return xT(r).stack=t.stack,t.stack=[],t.state=B0,_T||(this.disposed=!0),r}});_T&&jvt(em,"disposed",{configurable:!0,get:function(){return xT(this).state===B0}});Yce(em,Vvt,em.dispose,{name:"dispose"});Yce(em,$vt,bT,{nonWritable:!0});kvt({global:!0,constructor:!0},{DisposableStack:jF})});var BF=S((wXt,the)=>{"use strict";var Hvt=Oe(),Zvt=Et();the.exports=function(){return Hvt(Zvt(this))}});var rhe=S(()=>{"use strict";var Kvt=K(),Xvt=BF();Kvt({target:"Function",proto:!0,forced:!0},{demethodize:Xvt})});var ihe=S(()=>{"use strict";var Yvt=K(),Jvt=Oe(),Qvt=Ot(),emt=T_(),tmt=kt(),rmt=dt(),nmt=Object.getOwnPropertyDescriptor,nhe=/^\s*class\b/,imt=Jvt(nhe.exec),amt=function(e){try{if(!rmt||!imt(nhe,emt(e)))return!1}catch(r){}var t=nmt(e,"prototype");return!!t&&tmt(t,"writable")&&!t.writable};Yvt({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(t){return Qvt(t)&&!amt(t)}})});var ahe=S(()=>{"use strict";var omt=K(),smt=zs();omt({target:"Function",stat:!0,forced:!0},{isConstructor:smt})});var uhe=S(()=>{"use strict";var umt=yt(),lmt=Fr().f,ohe=umt("metadata"),she=Function.prototype;she[ohe]===void 0&&lmt(she,ohe,{value:null})});var lhe=S(()=>{"use strict";var cmt=K(),hmt=BF();cmt({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:hmt})});var che=S(()=>{"use strict";wD()});var hhe=S(()=>{"use strict";CD()});var UF=S((NXt,fhe)=>{"use strict";var fmt=Qe(),pmt=jD(),dmt=function(e,t){return[t,e]};fhe.exports=function(){return fmt(pmt,this,dmt)}});var phe=S(()=>{"use strict";var vmt=K(),mmt=UF();vmt({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:mmt})});var mhe=S(()=>{"use strict";var gmt=K(),dhe=Qe(),ymt=Et(),vhe=Ye(),_mt=yu(),xmt=bh(),bmt=Array,wmt=xmt(function(){for(;;){var e=this.iterator;if(!e){var t=this.nextIterableIndex++,r=this.iterables;if(t>=r.length){this.done=!0;return}var n=r[t];this.iterables[t]=null,e=this.iterator=dhe(n.method,n.iterable),this.next=e.next}var i=vhe(dhe(this.next,e));if(i.done){this.iterator=null,this.next=null;continue}return i.value}});gmt({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var t=arguments.length,r=bmt(t),n=0;n<t;n++){var i=vhe(arguments[n]);r[n]={iterable:i,method:ymt(_mt(i))}}return new wmt({iterables:r,nextIterableIndex:0,iterator:null,next:null})}})});var _he=S(()=>{"use strict";var Emt=Qe(),Smt=br(),Tmt=In(),Imt=kt(),Cmt=yt(),ghe=Jf().IteratorPrototype,yhe=Cmt("dispose");Imt(ghe,yhe)||Smt(ghe,yhe,function(){var e=Tmt(this,"return");e&&Emt(e,this)})});var xhe=S(()=>{"use strict";MD()});var bhe=S(()=>{"use strict";OD()});var whe=S(()=>{"use strict";RD()});var Ehe=S(()=>{"use strict";DD()});var She=S(()=>{"use strict";ND()});var The=S(()=>{"use strict";FD()});var Ihe=S(()=>{"use strict";zD()});var Che=S(()=>{"use strict";var Amt=K(),qmt=UF();Amt({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:qmt})});var Ahe=S(()=>{"use strict";BD()});var Phe=S(()=>{"use strict";var Pmt=K(),qhe=mT(),Mmt=TypeError;Pmt({target:"Iterator",stat:!0,forced:!0},{range:function(t,r,n){if(typeof t=="number")return new qhe(t,r,n,"number",0,1);if(typeof t=="bigint")return new qhe(t,r,n,"bigint",BigInt(0),BigInt(1));throw new Mmt("Incorrect Iterator.range arguments")}})});var Mhe=S(()=>{"use strict";UD()});var Ohe=S(()=>{"use strict";VD()});var Rhe=S(()=>{"use strict";$D()});var Dhe=S(()=>{"use strict";GD()});var khe=S(()=>{"use strict";var Omt=K(),Rmt=Ye(),Dmt=k0(),Lmt=AF(),Lhe=tn(),kmt=jt();Omt({target:"Iterator",proto:!0,real:!0,forced:kmt},{toAsync:function(){return new Lmt(Lhe(new Dmt(Lhe(Rmt(this)))))}})});var VF=S((xYt,Nhe)=>{"use strict";var Nmt=Ne();Nhe.exports=!Nmt(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})});var $F=S((bYt,Fhe)=>{"use strict";var Fmt=It(),zmt=dr().get;Fhe.exports=function(t){if(!Fmt(t))return!1;var r=zmt(t);return!!r&&r.type==="RawJSON"}});var zhe=S(()=>{"use strict";var jmt=K(),Bmt=VF(),Umt=$F();jmt({target:"JSON",stat:!0,forced:!Bmt},{isRawJSON:Umt})});var WF=S((SYt,Vhe)=>{"use strict";var GF=Oe(),Vmt=kt(),wT=SyntaxError,$mt=parseInt,Gmt=String.fromCharCode,Wmt=GF("".charAt),jhe=GF("".slice),Bhe=GF(/./.exec),Uhe={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},Hmt=/^[\da-f]{4}$/i,Zmt=/^[\u0000-\u001F]$/;Vhe.exports=function(e,t){for(var r=!0,n="";t<e.length;){var i=Wmt(e,t);if(i==="\\"){var a=jhe(e,t,t+2);if(Vmt(Uhe,a))n+=Uhe[a],t+=2;else if(a==="\\u"){t+=2;var h=jhe(e,t,t+4);if(!Bhe(Hmt,h))throw new wT("Bad Unicode escape at: "+t);n+=Gmt($mt(h,16)),t+=4}else throw new wT("Unknown escape sequence: \""+a+"\"")}else if(i==="\""){r=!1,t++;break}else{if(Bhe(Zmt,i))throw new wT("Bad control character in string literal at: "+t);n+=i,t++}}if(r)throw new wT("Unterminated string at: "+t);return{value:n,end:t}}});var Yhe=S(()=>{"use strict";var Kmt=K(),Xmt=dt(),ez=Ze(),Ymt=St(),ET=Oe(),Jmt=Qe(),Khe=Ot(),Qmt=It(),egt=Fs(),tgt=kt(),rgt=qt(),$he=Yt(),YF=as(),Xhe=Ne(),ngt=WF(),igt=ih(),Ghe=ez.JSON,agt=ez.Number,tm=ez.SyntaxError,tz=Ghe&&Ghe.parse,ogt=Ymt("Object","keys"),sgt=Object.getOwnPropertyDescriptor,Li=ET("".charAt),HF=ET("".slice),ZF=ET(/./.exec),Whe=ET([].push),KF=/^\d$/,ugt=/^[1-9]$/,lgt=/^[\d-]$/,U0=/^[\t\n\r ]$/,XF=0,Hhe=1,cgt=function(e,t){e=rgt(e);var r=new QF(e,0,""),n=r.parse(),i=n.value,a=r.skip(U0,n.end);if(a<e.length)throw new tm("Unexpected extra character: \""+Li(e,a)+"\" after the parsed data at: "+a);return Khe(t)?JF({"":i},"",t,n):i},JF=function(e,t,r,n){var i=e[t],a=n&&i===n.value,h=a&&typeof n.source=="string"?{source:n.source}:{},p,g,w,E,q;if(Qmt(i)){var P=egt(i),k=a?n.nodes:P?[]:{};if(P)for(p=k.length,w=$he(i),E=0;E<w;E++)Zhe(i,E,JF(i,""+E,r,E<p?k[E]:void 0));else for(g=ogt(i),w=$he(g),E=0;E<w;E++)q=g[E],Zhe(i,q,JF(i,q,r,tgt(k,q)?k[q]:void 0))}return Jmt(r,e,t,i,h)},Zhe=function(e,t,r){if(Xmt){var n=sgt(e,t);if(n&&!n.configurable)return}r===void 0?delete e[t]:YF(e,t,r)},hgt=function(e,t,r,n){this.value=e,this.end=t,this.source=r,this.nodes=n},QF=function(e,t){this.source=e,this.index=t};QF.prototype={fork:function(e){return new QF(this.source,e)},parse:function(){var e=this.source,t=this.skip(U0,this.index),r=this.fork(t),n=Li(e,t);if(ZF(lgt,n))return r.number();switch(n){case"{":return r.object();case"[":return r.array();case"\"":return r.string();case"t":return r.keyword(!0);case"f":return r.keyword(!1);case"n":return r.keyword(null);}throw new tm("Unexpected character: \""+n+"\" at: "+t)},node:function(e,t,r,n,i){return new hgt(t,n,e?null:HF(this.source,r,n),i)},object:function(){for(var e=this.source,t=this.index+1,r=!1,n={},i={};t<e.length;){if(t=this.until(["\"","}"],t),Li(e,t)==="}"&&!r){t++;break}var a=this.fork(t).string(),h=a.value;t=a.end,t=this.until([":"],t)+1,t=this.skip(U0,t),a=this.fork(t).parse(),YF(i,h,a),YF(n,h,a.value),t=this.until([",","}"],a.end);var p=Li(e,t);if(p===",")r=!0,t++;else if(p==="}"){t++;break}}return this.node(Hhe,n,this.index,t,i)},array:function(){for(var e=this.source,t=this.index+1,r=!1,n=[],i=[];t<e.length;){if(t=this.skip(U0,t),Li(e,t)==="]"&&!r){t++;break}var a=this.fork(t).parse();if(Whe(i,a),Whe(n,a.value),t=this.until([",","]"],a.end),Li(e,t)===",")r=!0,t++;else if(Li(e,t)==="]"){t++;break}}return this.node(Hhe,n,this.index,t,i)},string:function(){var e=this.index,t=ngt(this.source,this.index+1);return this.node(XF,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,r=t;if(Li(e,r)==="-"&&r++,Li(e,r)==="0")r++;else if(ZF(ugt,Li(e,r)))r=this.skip(KF,r+1);else throw new tm("Failed to parse number at: "+r);if(Li(e,r)==="."&&(r=this.skip(KF,r+1)),Li(e,r)==="e"||Li(e,r)==="E"){r++,(Li(e,r)==="+"||Li(e,r)==="-")&&r++;var n=r;if(r=this.skip(KF,r),n===r)throw new tm("Failed to parse number's exponent value at: "+r)}return this.node(XF,agt(HF(e,t,r)),t,r)},keyword:function(e){var t=""+e,r=this.index,n=r+t.length;if(HF(this.source,r,n)!==t)throw new tm("Failed to parse value at: "+r);return this.node(XF,e,r,n)},skip:function(e,t){for(var r=this.source;t<r.length&&ZF(e,Li(r,t));t++);return t},until:function(e,t){t=this.skip(U0,t);for(var r=Li(this.source,t),n=0;n<e.length;n++)if(e[n]===r)return t;throw new tm("Unexpected character: \""+r+"\" at: "+t)}};var fgt=Xhe(function(){var e="9007199254740993",t;return tz(e,function(r,n,i){t=i.source}),t!==e}),pgt=igt&&!Xhe(function(){return 1/tz("-0 \t")!==-1/0});Kmt({target:"JSON",stat:!0,forced:fgt},{parse:function(t,r){return pgt&&!Khe(r)?tz(t):cgt(t,r)}})});var afe=S(()=>{"use strict";var nfe=K(),dgt=Pl(),ife=VF(),ST=St(),vgt=Qe(),az=Oe(),mgt=Ot(),ggt=$F(),ygt=qt(),_gt=as(),xgt=WF(),bgt=LO(),wgt=oh(),Egt=dr().set,Sgt=String,Jhe=SyntaxError,Tgt=ST("JSON","parse"),Qhe=ST("JSON","stringify"),Igt=ST("Object","create"),Cgt=ST("Object","freeze"),nz=az("".charAt),rz=az("".slice),Agt=az([].push),iz=wgt(),efe=iz.length,tfe="Unacceptable as raw JSON",rfe=function(e){return e===" "||e==="\t"||e===`
`||e==="\r"};nfe({target:"JSON",stat:!0,forced:!ife},{rawJSON:function(t){var r=ygt(t);if(r===""||rfe(nz(r,0))||rfe(nz(r,r.length-1)))throw new Jhe(tfe);var n=Tgt(r);if(typeof n=="object"&&n!==null)throw new Jhe(tfe);var i=Igt(null);return Egt(i,{type:"RawJSON"}),_gt(i,"rawJSON",r),dgt?Cgt(i):i}});Qhe&&nfe({target:"JSON",stat:!0,arity:3,forced:!ife},{stringify:function(t,r,n){var i=bgt(r),a=[],h=Qhe(t,function(k,W){var Q=mgt(i)?vgt(i,this,Sgt(k),W):W;return ggt(Q)?iz+(Agt(a,Q.rawJSON)-1):Q},n);if(typeof h!="string")return h;for(var p="",g=h.length,w=0;w<g;w++){var E=nz(h,w);if(E==="\""){var q=xgt(h,++w).end-1,P=rz(h,w,q);p+=rz(P,0,efe)===iz?a[rz(P,efe)]:"\""+P+"\"",w=q}else p+=E}return p}})});var ki=S((qYt,ofe)=>{"use strict";var qgt=Jn().has;ofe.exports=function(e){return qgt(e),e}});var sfe=S(()=>{"use strict";var Pgt=K(),Mgt=ki(),Ogt=Jn().remove;Pgt({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Mgt(this),r=!0,n,i=0,a=arguments.length;i<a;i++)n=Ogt(t,arguments[i]),r=r&&n;return!!r}})});var lfe=S(()=>{"use strict";var Rgt=K(),Dgt=ki(),oz=Jn(),Lgt=oz.get,kgt=oz.has,ufe=oz.set;Rgt({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var n=Dgt(this),i,a;return kgt(n,t)?(i=Lgt(n,t),"update"in r&&(i=r.update(i,t,n),ufe(n,t,i)),i):(a=r.insert(t,n),ufe(n,t,a),a)}})});var cfe=S(()=>{"use strict";var Ngt=K(),Fgt=Pr(),zgt=ki(),jgt=us();Ngt({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var r=zgt(this),n=Fgt(t,arguments.length>1?arguments[1]:void 0);return jgt(r,function(i,a){if(!n(i,a,r))return!1},!0)!==!1}})});var ffe=S(()=>{"use strict";var Bgt=K(),Ugt=Pr(),Vgt=ki(),hfe=Jn(),$gt=us(),Ggt=hfe.Map,Wgt=hfe.set;Bgt({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var r=Vgt(this),n=Ugt(t,arguments.length>1?arguments[1]:void 0),i=new Ggt;return $gt(r,function(a,h){n(a,h,r)&&Wgt(i,h,a)}),i}})});var pfe=S(()=>{"use strict";var Hgt=K(),Zgt=Pr(),Kgt=ki(),Xgt=us();Hgt({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var r=Kgt(this),n=Zgt(t,arguments.length>1?arguments[1]:void 0),i=Xgt(r,function(a,h){if(n(a,h,r))return{value:a}},!0);return i&&i.value}})});var dfe=S(()=>{"use strict";var Ygt=K(),Jgt=Pr(),Qgt=ki(),eyt=us();Ygt({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var r=Qgt(this),n=Jgt(t,arguments.length>1?arguments[1]:void 0),i=eyt(r,function(a,h){if(n(a,h,r))return{key:h}},!0);return i&&i.key}})});var V0=S((UYt,vfe)=>{"use strict";var tyt=Pr(),ryt=Ye(),nyt=Bt(),iyt=hn();vfe.exports=function(e,t,r){return function(i){var a=nyt(i),h=arguments.length,p=h>1?arguments[1]:void 0,g=p!==void 0,w=g?tyt(p,h>2?arguments[2]:void 0):void 0,E=new e,q=0;return iyt(a,function(P){var k=g?w(P,q++):P;r?t(E,ryt(k)[0],k[1]):t(E,k)}),E}}});var gfe=S(()=>{"use strict";var ayt=K(),mfe=Jn(),oyt=V0();ayt({target:"Map",stat:!0,forced:!0},{from:oyt(mfe.Map,mfe.set,!0)})});var yfe=S(()=>{"use strict";var syt=K(),uyt=ki(),sz=Jn(),lyt=sz.get,cyt=sz.has,hyt=sz.set;syt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,r){return cyt(uyt(this),t)?lyt(this,t):(hyt(this,t,r),r)}})});var _fe=S(()=>{"use strict";var fyt=K(),pyt=Et(),dyt=ki(),uz=Jn(),vyt=uz.get,myt=uz.has,gyt=uz.set;fyt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,r){if(dyt(this),pyt(r),myt(this,t))return vyt(this,t);t===0&&1/t===-1/0&&(t=0);var n=r(t);return gyt(this,t,n),n}})});var xfe=S(()=>{"use strict";QD()});var wfe=S((YYt,bfe)=>{"use strict";bfe.exports=function(e,t){return e===t||e!==e&&t!==t}});var Efe=S(()=>{"use strict";var yyt=K(),_yt=wfe(),xyt=ki(),byt=us();yyt({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return byt(xyt(this),function(r){if(_yt(r,t))return!0},!0)===!0}})});var Tfe=S(()=>{"use strict";var wyt=K(),Eyt=Qe(),Syt=hn(),Tyt=Ot(),Sfe=Et(),Iyt=Jn().Map;wyt({target:"Map",stat:!0,forced:!0},{keyBy:function(t,r){var n=Tyt(this)?this:Iyt,i=new n;Sfe(r);var a=Sfe(i.set);return Syt(t,function(h){Eyt(a,i,r(h),h)}),i}})});var Ife=S(()=>{"use strict";var Cyt=K(),Ayt=ki(),qyt=us();Cyt({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var r=qyt(Ayt(this),function(n,i){if(n===t)return{key:i}},!0);return r&&r.key}})});var Afe=S(()=>{"use strict";var Pyt=K(),Myt=Pr(),Oyt=ki(),Cfe=Jn(),Ryt=us(),Dyt=Cfe.Map,Lyt=Cfe.set;Pyt({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var r=Oyt(this),n=Myt(t,arguments.length>1?arguments[1]:void 0),i=new Dyt;return Ryt(r,function(a,h){Lyt(i,n(a,h,r),a)}),i}})});var Pfe=S(()=>{"use strict";var kyt=K(),Nyt=Pr(),Fyt=ki(),qfe=Jn(),zyt=us(),jyt=qfe.Map,Byt=qfe.set;kyt({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var r=Fyt(this),n=Nyt(t,arguments.length>1?arguments[1]:void 0),i=new jyt;return zyt(r,function(a,h){Byt(i,h,n(a,h,r))}),i}})});var Mfe=S(()=>{"use strict";var Uyt=K(),Vyt=ki(),$yt=hn(),Gyt=Jn().set;Uyt({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var r=Vyt(this),n=arguments.length,i=0;i<n;)$yt(arguments[i++],function(a,h){Gyt(r,a,h)},{AS_ENTRIES:!0});return r}})});var $0=S((cJt,Ofe)=>{"use strict";var Wyt=Ye();Ofe.exports=function(e,t,r){return function(){for(var i=new e,a=arguments.length,h=0;h<a;h++){var p=arguments[h];r?t(i,Wyt(p)[0],p[1]):t(i,p)}return i}}});var Dfe=S(()=>{"use strict";var Hyt=K(),Rfe=Jn(),Zyt=$0();Hyt({target:"Map",stat:!0,forced:!0},{of:Zyt(Rfe.Map,Rfe.set,!0)})});var Lfe=S(()=>{"use strict";var Kyt=K(),Xyt=Et(),Yyt=ki(),Jyt=us(),Qyt=TypeError;Kyt({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=Yyt(this),n=arguments.length<2,i=n?void 0:arguments[1];if(Xyt(t),Jyt(r,function(a,h){n?(n=!1,i=a):i=t(i,a,h,r)}),n)throw new Qyt("Reduce of empty map with no initial value");return i}})});var kfe=S(()=>{"use strict";var e_t=K(),t_t=Pr(),r_t=ki(),n_t=us();e_t({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var r=r_t(this),n=t_t(t,arguments.length>1?arguments[1]:void 0);return n_t(r,function(i,a){if(n(i,a,r))return!0},!0)===!0}})});var Ffe=S(()=>{"use strict";var i_t=K(),Nfe=Et(),a_t=ki(),lz=Jn(),o_t=TypeError,s_t=lz.get,u_t=lz.has,l_t=lz.set;i_t({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,r){var n=a_t(this),i=arguments.length;Nfe(r);var a=u_t(n,t);if(!a&&i<3)throw new o_t("Updating absent value");var h=a?s_t(n,t):Nfe(i>2?arguments[2]:void 0)(t,n);return l_t(n,t,r(h,t,n)),n}})});var CT=S((_Jt,zfe)=>{"use strict";var TT=Qe(),cz=Et(),IT=Ot(),c_t=Ye(),h_t=TypeError;zfe.exports=function(t,r){var n=c_t(this),i=cz(n.get),a=cz(n.has),h=cz(n.set),p=arguments.length>2?arguments[2]:void 0,g;if(!IT(r)&&!IT(p))throw new h_t("At least one callback required");return TT(a,n,t)?(g=TT(i,n,t),IT(r)&&(g=r(g),TT(h,n,t,g))):IT(p)&&(g=p(),TT(h,n,t,g)),g}});var jfe=S(()=>{"use strict";var f_t=K(),p_t=CT();f_t({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:p_t})});var Bfe=S(()=>{"use strict";var d_t=K(),v_t=CT();d_t({target:"Map",proto:!0,real:!0,forced:!0},{upsert:v_t})});var Ufe=S(()=>{"use strict";var m_t=K(),g_t=Math.min,y_t=Math.max;m_t({target:"Math",stat:!0,forced:!0},{clamp:function(t,r,n){return g_t(n,y_t(r,t))}})});var Vfe=S(()=>{"use strict";var __t=K();__t({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var $fe=S(()=>{"use strict";var x_t=K(),b_t=180/Math.PI;x_t({target:"Math",stat:!0,forced:!0},{degrees:function(t){return t*b_t}})});var hz=S((PJt,Gfe)=>{"use strict";Gfe.exports=Math.scale||function(t,r,n,i,a){var h=+t,p=+r,g=+n,w=+i,E=+a;return h!==h||p!==p||g!==g||w!==w||E!==E?NaN:h===1/0||h===-1/0?h:(h-p)*(E-w)/(g-p)+w}});var Wfe=S(()=>{"use strict";var w_t=K(),E_t=hz(),S_t=FE();w_t({target:"Math",stat:!0,forced:!0},{fscale:function(t,r,n,i,a){return S_t(E_t(t,r,n,i,a))}})});var Hfe=S(()=>{"use strict";var T_t=K(),I_t=NF();T_t({target:"Math",stat:!0},{f16round:I_t})});var Zfe=S(()=>{"use strict";var C_t=K();C_t({target:"Math",stat:!0,forced:!0},{iaddh:function(t,r,n,i){var a=t>>>0,h=r>>>0,p=n>>>0;return h+(i>>>0)+((a&p|(a|p)&~(a+p>>>0))>>>31)|0}})});var Kfe=S(()=>{"use strict";var A_t=K();A_t({target:"Math",stat:!0,forced:!0},{imulh:function(t,r){var n=65535,i=+t,a=+r,h=i&n,p=a&n,g=i>>16,w=a>>16,E=(g*p>>>0)+(h*p>>>16);return g*w+(E>>16)+((h*w>>>0)+(E&n)>>16)}})});var Xfe=S(()=>{"use strict";var q_t=K();q_t({target:"Math",stat:!0,forced:!0},{isubh:function(t,r,n,i){var a=t>>>0,h=r>>>0,p=n>>>0;return h-(i>>>0)-((~a&p|~(a^p)&a-p>>>0)>>>31)|0}})});var Yfe=S(()=>{"use strict";var P_t=K();P_t({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var Jfe=S(()=>{"use strict";var M_t=K(),O_t=Math.PI/180;M_t({target:"Math",stat:!0,forced:!0},{radians:function(t){return t*O_t}})});var Qfe=S(()=>{"use strict";var R_t=K(),D_t=hz();R_t({target:"Math",stat:!0,forced:!0},{scale:D_t})});var npe=S(()=>{"use strict";var L_t=K(),k_t=Ye(),N_t=cL(),F_t=ph(),z_t=gi(),epe=dr(),tpe="Seeded Random",rpe=tpe+" Generator",j_t="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",B_t=epe.set,U_t=epe.getterFor(rpe),V_t=TypeError,$_t=F_t(function(t){B_t(this,{type:rpe,seed:t%2147483647})},tpe,function(){var t=U_t(this),r=t.seed=(t.seed*1103515245+12345)%2147483647;return z_t((r&1073741823)/1073741823,!1)});L_t({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var r=k_t(t).seed;if(!N_t(r))throw new V_t(j_t);return new $_t(r)}})});var ipe=S(()=>{"use strict";var G_t=K();G_t({target:"Math",stat:!0,forced:!0},{signbit:function(t){var r=+t;return r===r&&r===0?1/r===-1/0:r<0}})});var lpe=S(()=>{"use strict";var W_t=K(),H_t=Oe(),Z_t=hn(),K_t=RangeError,X_t=TypeError,ls=1/0,Y_t=NaN,pp=Math.abs,vz=Math.pow,ape=H_t([].push),G0=vz(2,1023),J_t=vz(2,53)-1,ope=Number.MAX_VALUE,spe=vz(2,971),W0={},fz={},pz={},dz={},upe={},AT=function(e,t){var r=e+t,n=t-(r-e);return{hi:r,lo:n}};W_t({target:"Math",stat:!0},{sumPrecise:function(t){var r=[],n=0,i=dz;switch(Z_t(t,function(te){if(++n>=J_t)throw new K_t("Maximum allowed index exceeded");if(typeof te!="number")throw new X_t("Value is not a number");i!==W0&&(te!==te?i=W0:te===ls?i=i===fz?W0:pz:te===-ls?i=i===pz?W0:fz:(te!==0||1/te===ls)&&(i===dz||i===upe)&&(i=upe,ape(r,te)))}),i){case W0:return Y_t;case fz:return-ls;case pz:return ls;case dz:return-0;}for(var a=[],h=0,p,g,w,E,q,P,k=0;k<r.length;k++){p=r[k];for(var W=0,Q=0;Q<a.length;Q++){if(g=a[Q],pp(p)<pp(g)&&(P=p,p=g,g=P),w=AT(p,g),E=w.hi,q=w.lo,pp(E)===ls){var $=E===ls?1:-1;h+=$,p=p-$*G0-$*G0,pp(p)<pp(g)&&(P=p,p=g,g=P),w=AT(p,g),E=w.hi,q=w.lo}q!==0&&(a[W++]=q),p=E}a.length=W,p!==0&&ape(a,p)}var V=a.length-1;if(E=0,q=0,h!==0){var Z=V>=0?a[V]:0;if(V--,pp(h)>1||h>0&&Z>0||h<0&&Z<0)return h>0?ls:-ls;if(w=AT(h*G0,Z/2),E=w.hi,q=w.lo,q*=2,pp(2*E)===ls)return E>0?E===G0&&q===-(spe/2)&&V>=0&&a[V]<0?ope:ls:E===-G0&&q===spe/2&&V>=0&&a[V]>0?-ope:-ls;q!==0&&(a[++V]=q,q=0),E*=2}for(;V>=0&&(w=AT(E,a[V--]),E=w.hi,q=w.lo,q===0););return V>=0&&(q<0&&a[V]<0||q>0&&a[V]>0)&&(g=q*2,p=E+g,g===p-E&&(E=p)),E}})});var cpe=S(()=>{"use strict";var Q_t=K();Q_t({target:"Math",stat:!0,forced:!0},{umulh:function(t,r){var n=65535,i=+t,a=+r,h=i&n,p=a&n,g=i>>>16,w=a>>>16,E=(g*p>>>0)+(h*p>>>16);return g*w+(E>>>16)+((h*w>>>0)+(E&n)>>>16)}})});var ppe=S(()=>{"use strict";var e0t=K(),Z0=Oe(),t0t=Gr(),H0="Invalid number representation",r0t="Invalid radix",n0t=RangeError,qT=SyntaxError,i0t=TypeError,hpe=parseInt,a0t=Math.pow,fpe=/^[\d.a-z]+$/,o0t=Z0("".charAt),s0t=Z0(fpe.exec),u0t=Z0(1 .toString),l0t=Z0("".slice),c0t=Z0("".split);e0t({target:"Number",stat:!0,forced:!0},{fromString:function(t,r){var n=1;if(typeof t!="string")throw new i0t(H0);if(!t.length)throw new qT(H0);if(o0t(t,0)==="-"&&(n=-1,t=l0t(t,1),!t.length))throw new qT(H0);var i=r===void 0?10:t0t(r);if(i<2||i>36)throw new n0t(r0t);if(!s0t(fpe,t))throw new qT(H0);var a=c0t(t,"."),h=hpe(a[0],i);if(a.length>1&&(h+=hpe(a[1],i)/a0t(i,a[1].length)),i===10&&u0t(h,i)!==t)throw new qT(H0);return n*h}})});var dpe=S(()=>{"use strict";var h0t=K(),f0t=mT();h0t({target:"Number",stat:!0,forced:!0},{range:function(t,r,n){return new f0t(t,r,n,"number",0,1)}})});var vpe=S(()=>{"use strict";EL()});var MT=S((sQt,ype)=>{"use strict";var mpe=dr(),p0t=ph(),PT=gi(),d0t=kt(),v0t=Gf(),m0t=Bt(),gpe="Object Iterator",g0t=mpe.set,y0t=mpe.getterFor(gpe);ype.exports=p0t(function(t,r){var n=m0t(t);g0t(this,{type:gpe,mode:r,object:n,keys:v0t(n),index:0})},"Object",function(){for(var t=y0t(this),r=t.keys;;){if(r===null||t.index>=r.length)return t.object=t.keys=null,PT(void 0,!0);var n=r[t.index++],i=t.object;if(d0t(i,n)){switch(t.mode){case"keys":return PT(n,!1);case"values":return PT(i[n],!1);}return PT([n,i[n]],!1)}}})});var _pe=S(()=>{"use strict";var _0t=K(),x0t=MT();_0t({target:"Object",stat:!0,forced:!0},{iterateEntries:function(t){return new x0t(t,"entries")}})});var xpe=S(()=>{"use strict";var b0t=K(),w0t=MT();b0t({target:"Object",stat:!0,forced:!0},{iterateKeys:function(t){return new w0t(t,"keys")}})});var bpe=S(()=>{"use strict";var E0t=K(),S0t=MT();E0t({target:"Object",stat:!0,forced:!0},{iterateValues:function(t){return new S0t(t,"values")}})});var wpe=S(()=>{"use strict";wL()});var Ope=S(()=>{"use strict";var T0t=K(),OT=Qe(),K0=dt(),I0t=vh(),Epe=Et(),C0t=Ye(),A0t=oa(),Spe=Ot(),q0t=Nn(),P0t=It(),RT=In(),M0t=br(),mz=ss(),Tpe=Wr(),rm=WL(),O0t=yt(),Ipe=dr(),R0t=O0t("observable"),gz="Observable",Cpe="Subscription",Ape="SubscriptionObserver",yz=Ipe.getterFor,_z=Ipe.set,D0t=yz(gz),qpe=yz(Cpe),DT=yz(Ape),Ppe=function(e){this.observer=C0t(e),this.cleanup=null,this.subscriptionObserver=null};Ppe.prototype={type:Cpe,clean:function(){var e=this.cleanup;if(e){this.cleanup=null;try{e()}catch(t){rm(t)}}},close:function(){if(!K0){var e=this.facade,t=this.subscriptionObserver;e.closed=!0,t&&(t.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var xz=function(e,t){var r=_z(this,new Ppe(e)),n;K0||(this.closed=!1);try{(n=RT(e,"start"))&&OT(n,e,this)}catch(p){rm(p)}if(!r.isClosed()){var i=r.subscriptionObserver=new bz(r);try{var a=t(i),h=a;q0t(a)||(r.cleanup=Spe(a.unsubscribe)?function(){h.unsubscribe()}:Epe(a))}catch(p){i.error(p);return}r.isClosed()&&r.clean()}};xz.prototype=mz({},{unsubscribe:function(){var t=qpe(this);t.isClosed()||(t.close(),t.clean())}});K0&&Tpe(xz.prototype,"closed",{configurable:!0,get:function(){return qpe(this).isClosed()}});var bz=function(e){_z(this,{type:Ape,subscriptionState:e}),K0||(this.closed=!1)};bz.prototype=mz({},{next:function(t){var r=DT(this).subscriptionState;if(!r.isClosed()){var n=r.observer;try{var i=RT(n,"next");i&&OT(i,n,t)}catch(a){rm(a)}}},error:function(t){var r=DT(this).subscriptionState;if(!r.isClosed()){var n=r.observer;r.close();try{var i=RT(n,"error");i?OT(i,n,t):rm(t)}catch(a){rm(a)}r.clean()}},complete:function(){var t=DT(this).subscriptionState;if(!t.isClosed()){var r=t.observer;t.close();try{var n=RT(r,"complete");n&&OT(n,r)}catch(i){rm(i)}t.clean()}}});K0&&Tpe(bz.prototype,"closed",{configurable:!0,get:function(){return DT(this).subscriptionState.isClosed()}});var Mpe=function(t){A0t(this,wz),_z(this,{type:gz,subscriber:Epe(t)})},wz=Mpe.prototype;mz(wz,{subscribe:function(t){var r=arguments.length;return new xz(Spe(t)?{next:t,error:r>1?arguments[1]:void 0,complete:r>2?arguments[2]:void 0}:P0t(t)?t:{},D0t(this).subscriber)}});M0t(wz,R0t,function(){return this});T0t({global:!0,constructor:!0,forced:!0},{Observable:Mpe});I0t(gz)});var Dpe=S(()=>{"use strict";var L0t=K(),k0t=St(),N0t=Qe(),Rpe=Ye(),F0t=zs(),z0t=hh(),j0t=In(),B0t=hn(),U0t=yt(),V0t=U0t("observable");L0t({target:"Observable",stat:!0,forced:!0},{from:function(t){var r=F0t(this)?this:k0t("Observable"),n=j0t(Rpe(t),V0t);if(n){var i=Rpe(N0t(n,t));return i.constructor===r?i:new r(function(h){return i.subscribe(h)})}var a=z0t(t);return new r(function(h){B0t(a,function(p,g){if(h.next(p),h.closed)return g()},{IS_ITERATOR:!0,INTERRUPTED:!0}),h.complete()})}})});var kpe=S(()=>{"use strict";var $0t=K(),Lpe=St(),G0t=zs(),W0t=Lpe("Array");$0t({target:"Observable",stat:!0,forced:!0},{of:function(){for(var t=G0t(this)?this:Lpe("Observable"),r=arguments.length,n=W0t(r),i=0;i<r;)n[i]=arguments[i++];return new t(function(a){for(var h=0;h<r;h++)if(a.next(n[h]),a.closed)return;a.complete()})}})});var Npe=S(()=>{"use strict";Ope();Dpe();kpe()});var Fpe=S(()=>{"use strict";ok()});var zpe=S(()=>{"use strict";sk()});var jpe=S(()=>{"use strict";hk()});var Bpe=S(()=>{"use strict";fk()});var Cu=S((OQt,Gpe)=>{"use strict";nS();tT();var $pe=St(),H0t=Oe(),Z0t=_l(),Upe=$pe("Map"),K0t=$pe("WeakMap"),X0t=H0t([].push),Vpe=Z0t("metadata"),Ez=Vpe.store||(Vpe.store=new K0t),X0=function(e,t,r){var n=Ez.get(e);if(!n){if(!r)return;Ez.set(e,n=new Upe)}var i=n.get(t);if(!i){if(!r)return;n.set(t,i=new Upe)}return i},Y0t=function(e,t,r){var n=X0(t,r,!1);return n===void 0?!1:n.has(e)},J0t=function(e,t,r){var n=X0(t,r,!1);return n===void 0?void 0:n.get(e)},Q0t=function(e,t,r,n){X0(r,n,!0).set(e,t)},ext=function(e,t){var r=X0(e,t,!1),n=[];return r&&r.forEach(function(i,a){X0t(n,a)}),n},txt=function(e){return e===void 0||typeof e=="symbol"?e:String(e)};Gpe.exports={store:Ez,getMap:X0,has:Y0t,get:J0t,set:Q0t,keys:ext,toKey:txt}});var Hpe=S(()=>{"use strict";var rxt=K(),Wpe=Cu(),nxt=Ye(),ixt=Wpe.toKey,axt=Wpe.set;rxt({target:"Reflect",stat:!0},{defineMetadata:function(t,r,n){var i=arguments.length<4?void 0:ixt(arguments[3]);axt(t,r,nxt(n),i)}})});var Kpe=S(()=>{"use strict";var oxt=K(),Sz=Cu(),sxt=Ye(),uxt=Sz.toKey,lxt=Sz.getMap,Zpe=Sz.store;oxt({target:"Reflect",stat:!0},{deleteMetadata:function(t,r){var n=arguments.length<3?void 0:uxt(arguments[2]),i=lxt(sxt(r),n,!1);if(i===void 0||!i.delete(t))return!1;if(i.size)return!0;var a=Zpe.get(r);return a.delete(n),!!a.size||Zpe.delete(r)}})});var Ype=S(()=>{"use strict";var cxt=K(),Tz=Cu(),hxt=Ye(),fxt=jn(),pxt=Tz.has,dxt=Tz.get,vxt=Tz.toKey,Xpe=function(e,t,r){var n=pxt(e,t,r);if(n)return dxt(e,t,r);var i=fxt(t);return i!==null?Xpe(e,i,r):void 0};cxt({target:"Reflect",stat:!0},{getMetadata:function(t,r){var n=arguments.length<3?void 0:vxt(arguments[2]);return Xpe(t,hxt(r),n)}})});var tde=S(()=>{"use strict";var mxt=K(),Jpe=Oe(),Qpe=Cu(),gxt=Ye(),yxt=jn(),_xt=lT(),xxt=Jpe(_xt),bxt=Jpe([].concat),wxt=Qpe.keys,Ext=Qpe.toKey,ede=function(e,t){var r=wxt(e,t),n=yxt(e);if(n===null)return r;var i=ede(n,t);return i.length?r.length?xxt(bxt(r,i)):i:r};mxt({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var r=arguments.length<2?void 0:Ext(arguments[1]);return ede(gxt(t),r)}})});var nde=S(()=>{"use strict";var Sxt=K(),rde=Cu(),Txt=Ye(),Ixt=rde.get,Cxt=rde.toKey;Sxt({target:"Reflect",stat:!0},{getOwnMetadata:function(t,r){var n=arguments.length<3?void 0:Cxt(arguments[2]);return Ixt(t,Txt(r),n)}})});var ade=S(()=>{"use strict";var Axt=K(),ide=Cu(),qxt=Ye(),Pxt=ide.keys,Mxt=ide.toKey;Axt({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var r=arguments.length<2?void 0:Mxt(arguments[1]);return Pxt(qxt(t),r)}})});var ude=S(()=>{"use strict";var Oxt=K(),ode=Cu(),Rxt=Ye(),Dxt=jn(),Lxt=ode.has,kxt=ode.toKey,sde=function(e,t,r){var n=Lxt(e,t,r);if(n)return!0;var i=Dxt(t);return i!==null?sde(e,i,r):!1};Oxt({target:"Reflect",stat:!0},{hasMetadata:function(t,r){var n=arguments.length<3?void 0:kxt(arguments[2]);return sde(t,Rxt(r),n)}})});var cde=S(()=>{"use strict";var Nxt=K(),lde=Cu(),Fxt=Ye(),zxt=lde.has,jxt=lde.toKey;Nxt({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,r){var n=arguments.length<3?void 0:jxt(arguments[2]);return zxt(t,Fxt(r),n)}})});var fde=S(()=>{"use strict";var Bxt=K(),hde=Cu(),Uxt=Ye(),Vxt=hde.toKey,$xt=hde.set;Bxt({target:"Reflect",stat:!0},{metadata:function(t,r){return function(i,a){$xt(t,r,Uxt(i),Vxt(a))}}})});var Y0=S((YQt,pde)=>{"use strict";var Gxt=TypeError;pde.exports=function(e){if(typeof e=="string")return e;throw new Gxt("Argument is not a string")}});var _de=S(()=>{"use strict";var Wxt=K(),J0=Oe(),Hxt=Y0(),Zxt=kt(),dde=J_().start,Kxt=rp(),Xxt=Array,vde=RegExp.escape,mde=J0("".charAt),Az=J0("".charCodeAt),Yxt=J0(1.1.toString),Jxt=J0([].join),yde=/^[0-9a-z]/i,Qxt=/^[$()*+./?[\\\]^{|}]/,e1t=RegExp("^[!\"#%&',\\-:;<=>@`~"+Kxt+"]"),Iz=J0(yde.exec),gde={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},Cz=function(e){var t=Yxt(Az(e,0),16);return t.length<3?"\\x"+dde(t,2,"0"):"\\u"+dde(t,4,"0")},t1t=!vde||vde("ab")!=="\\x61b";Wxt({target:"RegExp",stat:!0,forced:t1t},{escape:function(t){Hxt(t);for(var r=t.length,n=Xxt(r),i=0;i<r;i++){var a=mde(t,i);if(i===0&&Iz(yde,a))n[i]=Cz(a);else if(Zxt(gde,a))n[i]="\\"+gde[a];else if(Iz(Qxt,a))n[i]="\\"+a;else if(Iz(e1t,a))n[i]=Cz(a);else{var h=Az(a,0);(h&63488)!==55296?n[i]=a:h>=56320||i+1>=r||(Az(t,i+1)&64512)!==56320?n[i]=Cz(a):(n[i]=a,n[++i]=mde(t,i))}}return Jxt(n,"")}})});var xde=S(()=>{"use strict";var r1t=K(),n1t=Di(),i1t=yi().add;r1t({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=n1t(this),r=0,n=arguments.length;r<n;r++)i1t(t,arguments[r]);return t}})});var bde=S(()=>{"use strict";var a1t=K(),o1t=Di(),s1t=yi().remove;a1t({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=o1t(this),r=!0,n,i=0,a=arguments.length;i<a;i++)n=s1t(t,arguments[i]),r=r&&n;return!!r}})});var wde=S(()=>{"use strict";Ok()});var Sde=S((oer,Ede)=>{"use strict";var u1t=Ja(),l1t=kt(),c1t=Nn(),h1t=yt(),f1t=Yf(),p1t=h1t("iterator"),d1t=Object;Ede.exports=function(e){if(c1t(e))return!1;var t=d1t(e);return t[p1t]!==void 0||"@@iterator"in t||l1t(f1t,u1t(t))}});var Ph=S((ser,Ide)=>{"use strict";var v1t=St(),Tde=Ot(),m1t=Sde(),g1t=It(),y1t=v1t("Set"),_1t=function(e){return g1t(e)&&typeof e.size=="number"&&Tde(e.has)&&Tde(e.keys)};Ide.exports=function(e){return _1t(e)?e:m1t(e)?new y1t(e):e}});var Cde=S(()=>{"use strict";var x1t=K(),b1t=Qe(),w1t=Ph(),E1t=Mk();x1t({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return b1t(E1t,this,w1t(t))}})});var Ade=S(()=>{"use strict";var S1t=K(),T1t=Pr(),I1t=Di(),C1t=ro();S1t({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var r=I1t(this),n=T1t(t,arguments.length>1?arguments[1]:void 0);return C1t(r,function(i){if(!n(i,i,r))return!1},!0)!==!1}})});var Pde=S(()=>{"use strict";var A1t=K(),q1t=Pr(),P1t=Di(),qde=yi(),M1t=ro(),O1t=qde.Set,R1t=qde.add;A1t({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var r=P1t(this),n=q1t(t,arguments.length>1?arguments[1]:void 0),i=new O1t;return M1t(r,function(a){n(a,a,r)&&R1t(i,a)}),i}})});var Mde=S(()=>{"use strict";var D1t=K(),L1t=Pr(),k1t=Di(),N1t=ro();D1t({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var r=k1t(this),n=L1t(t,arguments.length>1?arguments[1]:void 0),i=N1t(r,function(a){if(n(a,a,r))return{value:a}},!0);return i&&i.value}})});var Rde=S(()=>{"use strict";var F1t=K(),Ode=yi(),z1t=V0();F1t({target:"Set",stat:!0,forced:!0},{from:z1t(Ode.Set,Ode.add,!1)})});var Dde=S(()=>{"use strict";Lk()});var Lde=S(()=>{"use strict";var j1t=K(),B1t=Qe(),U1t=Ph(),V1t=Dk();j1t({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return B1t(V1t,this,U1t(t))}})});var kde=S(()=>{"use strict";Nk()});var Nde=S(()=>{"use strict";var $1t=K(),G1t=Qe(),W1t=Ph(),H1t=kk();$1t({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return G1t(H1t,this,W1t(t))}})});var Fde=S(()=>{"use strict";zk()});var zde=S(()=>{"use strict";var Z1t=K(),K1t=Qe(),X1t=Ph(),Y1t=Fk();Z1t({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return K1t(Y1t,this,X1t(t))}})});var jde=S(()=>{"use strict";Bk()});var Bde=S(()=>{"use strict";var J1t=K(),Q1t=Qe(),ebt=Ph(),tbt=jk();J1t({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return Q1t(tbt,this,ebt(t))}})});var Vde=S(()=>{"use strict";var rbt=K(),Ude=Oe(),nbt=Di(),ibt=ro(),abt=qt(),obt=Ude([].join),sbt=Ude([].push);rbt({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var r=nbt(this),n=t===void 0?",":abt(t),i=[];return ibt(r,function(a){sbt(i,a)}),obt(i,n)}})});var Gde=S(()=>{"use strict";var ubt=K(),lbt=Pr(),cbt=Di(),$de=yi(),hbt=ro(),fbt=$de.Set,pbt=$de.add;ubt({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var r=cbt(this),n=lbt(t,arguments.length>1?arguments[1]:void 0),i=new fbt;return hbt(r,function(a){pbt(i,n(a,a,r))}),i}})});var Hde=S(()=>{"use strict";var dbt=K(),Wde=yi(),vbt=$0();dbt({target:"Set",stat:!0,forced:!0},{of:vbt(Wde.Set,Wde.add,!1)})});var Zde=S(()=>{"use strict";var mbt=K(),gbt=Et(),ybt=Di(),_bt=ro(),xbt=TypeError;mbt({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=ybt(this),n=arguments.length<2,i=n?void 0:arguments[1];if(gbt(t),_bt(r,function(a){n?(n=!1,i=a):i=t(i,a,a,r)}),n)throw new xbt("Reduce of empty set with no initial value");return i}})});var Kde=S(()=>{"use strict";var bbt=K(),wbt=Pr(),Ebt=Di(),Sbt=ro();bbt({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var r=Ebt(this),n=wbt(t,arguments.length>1?arguments[1]:void 0);return Sbt(r,function(i){if(n(i,i,r))return!0},!0)===!0}})});var Xde=S(()=>{"use strict";$k()});var Yde=S(()=>{"use strict";var Tbt=K(),Ibt=Qe(),Cbt=Ph(),Abt=Vk();Tbt({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return Ibt(Abt,this,Cbt(t))}})});var Jde=S(()=>{"use strict";Wk()});var Qde=S(()=>{"use strict";var qbt=K(),Pbt=Qe(),Mbt=Ph(),Obt=Gk();qbt({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return Pbt(Obt,this,Mbt(t))}})});var eve=S(()=>{"use strict";var Rbt=K(),Dbt=up().charAt,Lbt=Br(),kbt=Gr(),Nbt=qt();Rbt({target:"String",proto:!0,forced:!0},{at:function(t){var r=Nbt(Lbt(this)),n=r.length,i=kbt(t),a=i>=0?i:n+i;return a<0||a>=n?void 0:Dbt(r,a)}})});var qz=S((etr,ive)=>{"use strict";var nve=Oe(),Fbt=Fn(),tve=qt(),zbt=Yt(),jbt=TypeError,rve=nve([].push),Bbt=nve([].join);ive.exports=function(t){var r=Fbt(t),n=zbt(r);if(!n)return"";for(var i=arguments.length,a=[],h=0;;){var p=r[h++];if(p===void 0)throw new jbt("Incorrect template");if(rve(a,tve(p)),h===n)return Bbt(a,"");h<i&&rve(a,tve(arguments[h]))}}});var ave=S(()=>{"use strict";var Ubt=K(),Vbt=qz();Ubt({target:"String",stat:!0,forced:!0},{cooked:Vbt})});var cve=S(()=>{"use strict";var $bt=K(),Gbt=ph(),ove=gi(),Wbt=Br(),Hbt=qt(),sve=dr(),uve=up(),Zbt=uve.codeAt,Kbt=uve.charAt,lve="String Iterator",Xbt=sve.set,Ybt=sve.getterFor(lve),Jbt=Gbt(function(t){Xbt(this,{type:lve,string:t,index:0})},"String",function(){var t=Ybt(this),r=t.string,n=t.index,i;return n>=r.length?ove(void 0,!0):(i=Kbt(r,n),t.index+=i.length,ove({codePoint:Zbt(i,0),position:n},!1))});$bt({target:"String",proto:!0,forced:!0},{codePoints:function(){return new Jbt(Hbt(Wbt(this)))}})});var Rl=S((atr,hve)=>{"use strict";var LT=Oe(),kT=WeakMap.prototype;hve.exports={WeakMap,set:LT(kT.set),get:LT(kT.get),has:LT(kT.has),remove:LT(kT.delete)}});var xve=S((otr,_ve)=>{"use strict";var Qbt=St(),NT=Oe(),ewt=String.fromCharCode,twt=Qbt("String","fromCodePoint"),Pz=NT("".charAt),gve=NT("".charCodeAt),fve=NT("".indexOf),pve=NT("".slice),Oz=48,yve=57,dve=97,rwt=102,vve=65,nwt=70,mve=function(e,t){var r=gve(e,t);return r>=Oz&&r<=yve},Mz=function(e,t,r){if(r>=e.length)return-1;for(var n=0;t<r;t++){var i=iwt(gve(e,t));if(i===-1)return-1;n=n*16+i}return n},iwt=function(e){return e>=Oz&&e<=yve?e-Oz:e>=dve&&e<=rwt?e-dve+10:e>=vve&&e<=nwt?e-vve+10:-1};_ve.exports=function(e){for(var t="",r=0,n=0,i;(n=fve(e,"\\",n))>-1;){if(t+=pve(e,r,n),++n===e.length)return;var a=Pz(e,n++);switch(a){case"b":t+="\b";break;case"t":t+="\t";break;case"n":t+=`
`;break;case"v":t+="\x0B";break;case"f":t+="\f";break;case"r":t+="\r";break;case"\r":n<e.length&&Pz(e,n)===`
`&&++n;case`
`:case"\u2028":case"\u2029":break;case"0":if(mve(e,n))return;t+="\0";break;case"x":if(i=Mz(e,n,n+2),i===-1)return;n+=2,t+=ewt(i);break;case"u":if(n<e.length&&Pz(e,n)==="{"){var h=fve(e,"}",++n);if(h===-1)return;i=Mz(e,n,h),n=h+1}else i=Mz(e,n,n+4),n+=4;if(i===-1||i>1114111)return;t+=twt(i);break;default:if(mve(a,0))return;t+=a;}r=n}return t+pve(e,r)}});var Pve=S(()=>{"use strict";var awt=Pl(),owt=K(),swt=A_(),FT=Oe(),Tve=aa(),Ive=Ye(),uwt=Bt(),lwt=Ot(),cwt=Yt(),hwt=Fr().f,fwt=Qa(),zT=Rl(),pwt=qz(),dwt=xve(),Cve=rp(),Rz=new zT.WeakMap,vwt=zT.get,mwt=zT.has,gwt=zT.set,Dz=Array,Q0=TypeError,bve=Object.freeze||Object,ywt=Object.isFrozen,_wt=Math.min,wve=FT("".charAt),Ave=FT("".slice),xwt=FT("".split),Eve=FT(/./.exec),bwt=/([\n\u2028\u2029]|\r\n?)/g,wwt=RegExp("^["+Cve+"]*"),Ewt=RegExp("[^"+Cve+"]"),Sve="Invalid tag",Swt="Invalid opening line",Twt="Invalid closing line",Iwt=function(e){var t=e.raw;if(awt&&!ywt(t))throw new Q0("Raw template should be frozen");if(mwt(Rz,t))return vwt(Rz,t);var r=Cwt(t),n=qwt(r);return hwt(n,"raw",{value:bve(r)}),bve(n),gwt(Rz,t,n),n},Cwt=function(e){var t=uwt(e),r=cwt(t),n=Dz(r),i=Dz(r),a=0,h,p,g,w;if(!r)throw new Q0(Sve);for(;a<r;a++){var E=t[a];if(typeof E=="string")n[a]=xwt(E,bwt);else throw new Q0(Sve)}for(a=0;a<r;a++){var q=a+1===r;if(h=n[a],a===0){if(h.length===1||h[0].length>0)throw new Q0(Swt);h[1]=""}if(q){if(h.length===1||Eve(Ewt,h[h.length-1]))throw new Q0(Twt);h[h.length-2]="",h[h.length-1]=""}for(var P=2;P<h.length;P+=2){var k=h[P],W=P+1===h.length&&!q,Q=Eve(wwt,k)[0];if(!W&&Q.length===k.length){h[P]="";continue}p=Awt(Q,p)}}var $=p?p.length:0;for(a=0;a<r;a++){for(h=n[a],g=h[0],w=1;w<h.length;w+=2)g+=h[w]+Ave(h[w+1],$);i[a]=g}return i},Awt=function(e,t){if(t===void 0||e===t)return e;for(var r=0,n=_wt(e.length,t.length);r<n&&wve(e,r)===wve(t,r);r++);return Ave(e,0,r)},qwt=function(e){for(var t=0,r=e.length,n=Dz(r);t<r;t++)n[t]=dwt(e[t]);return n},qve=function(e){return swt(function(t){var r=fwt(arguments);return r[0]=Iwt(Ive(t)),Tve(e,this,r)},"")},Pwt=qve(pwt);owt({target:"String",stat:!0,forced:!0},{dedent:function(t){return Ive(t),lwt(t)?qve(t):Tve(Pwt,this,arguments)}})});var Mve=S(()=>{"use strict";Kk()});var Ove=S(()=>{"use strict";nN()});var Rve=S(()=>{"use strict";pN()});var Dve=S(()=>{"use strict";xN()});var Lve=S(()=>{"use strict";var Mwt=Ze(),Owt=cn(),Rwt=Fr().f,Dwt=vi().f,Lz=Mwt.Symbol;Owt("asyncDispose");Lz&&(ex=Dwt(Lz,"asyncDispose"),ex.enumerable&&ex.configurable&&ex.writable&&Rwt(Lz,"asyncDispose",{value:ex.value,enumerable:!1,configurable:!1,writable:!1}));var ex});var kve=S(()=>{"use strict";var Lwt=cn();Lwt("customMatcher")});var Nve=S(()=>{"use strict";var kwt=Ze(),Nwt=cn(),Fwt=Fr().f,zwt=vi().f,kz=kwt.Symbol;Nwt("dispose");kz&&(tx=zwt(kz,"dispose"),tx.enumerable&&tx.configurable&&tx.writable&&Fwt(kz,"dispose",{value:tx.value,enumerable:!1,configurable:!1,writable:!1}));var tx});var Fz=S((Etr,Fve)=>{"use strict";var jwt=St(),Bwt=Oe(),Nz=jwt("Symbol"),Uwt=Nz.keyFor,Vwt=Bwt(Nz.prototype.valueOf);Fve.exports=Nz.isRegisteredSymbol||function(t){try{return Uwt(Vwt(t))!==void 0}catch(r){return!1}}});var zve=S(()=>{"use strict";var $wt=K(),Gwt=Fz();$wt({target:"Symbol",stat:!0},{isRegisteredSymbol:Gwt})});var jve=S(()=>{"use strict";var Wwt=K(),Hwt=Fz();Wwt({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Hwt})});var Bz=S((Atr,Wve)=>{"use strict";var Zwt=_l(),$ve=St(),Kwt=Oe(),Xwt=yl(),Ywt=yt(),BT=$ve("Symbol"),Bve=BT.isWellKnownSymbol,Gve=$ve("Object","getOwnPropertyNames"),Jwt=Kwt(BT.prototype.valueOf),Uve=Zwt("wks");for(jT=0,zz=Gve(BT),Vve=zz.length;jT<Vve;jT++)try{jz=zz[jT],Xwt(BT[jz])&&Ywt(jz)}catch(e){}var jz,jT,zz,Vve;Wve.exports=function(t){if(Bve&&Bve(t))return!0;try{for(var r=Jwt(t),n=0,i=Gve(Uve),a=i.length;n<a;n++)if(Uve[i[n]]==r)return!0}catch(h){}return!1}});var Hve=S(()=>{"use strict";var Qwt=K(),eEt=Bz();Qwt({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:eEt})});var Zve=S(()=>{"use strict";var tEt=K(),rEt=Bz();tEt({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:rEt})});var Kve=S(()=>{"use strict";var nEt=cn();nEt("matcher")});var Xve=S(()=>{"use strict";var iEt=cn();iEt("metadata")});var Yve=S(()=>{"use strict";var aEt=cn();aEt("metadataKey")});var Jve=S(()=>{"use strict";var oEt=cn();oEt("observable")});var Qve=S(()=>{"use strict";var sEt=cn();sEt("patternMatch")});var eme=S(()=>{"use strict";var uEt=cn();uEt("replaceAll")});var rme=S(()=>{"use strict";var lEt=St(),cEt=h0(),hEt=fF(),tme=zt(),fEt=Tl(),pEt=tme.aTypedArrayConstructor,dEt=tme.exportTypedArrayStaticMethod;dEt("fromAsync",function(t){var r=this,n=arguments.length,i=n>1?arguments[1]:void 0,a=n>2?arguments[2]:void 0;return new(lEt("Promise"))(function(h){cEt(r),h(hEt(t,i,a))}).then(function(h){return fEt(pEt(r),h)})},!0)});var nme=S(()=>{"use strict";LN()});var ame=S(()=>{"use strict";var ime=zt(),vEt=An().filterReject,mEt=US(),gEt=ime.aTypedArray,yEt=ime.exportTypedArrayMethod;yEt("filterOut",function(t){var r=vEt(gEt(this),t,arguments.length>1?arguments[1]:void 0);return mEt(this,r)},!0)});var sme=S(()=>{"use strict";var ome=zt(),_Et=An().filterReject,xEt=US(),bEt=ome.aTypedArray,wEt=ome.exportTypedArrayMethod;wEt("filterReject",function(t){var r=_Et(bEt(this),t,arguments.length>1?arguments[1]:void 0);return xEt(this,r)},!0)});var ume=S(()=>{"use strict";kN()});var lme=S(()=>{"use strict";NN()});var cme=S(()=>{"use strict";var Uz=zt(),EEt=sT(),SEt=Uz.aTypedArray,TEt=Uz.getTypedArrayConstructor,IEt=Uz.exportTypedArrayMethod;IEt("groupBy",function(t){var r=arguments.length>1?arguments[1]:void 0;return EEt(SEt(this),t,r,TEt)},!0)});var hme=S(()=>{"use strict";YN()});var fme=S(()=>{"use strict";JN()});var pme=S(()=>{"use strict";var Vz=zt(),CEt=Yt(),AEt=NS(),qEt=Ns(),PEt=I0(),MEt=Gr(),OEt=Ne(),REt=Vz.aTypedArray,DEt=Vz.getTypedArrayConstructor,LEt=Vz.exportTypedArrayMethod,kEt=Math.max,NEt=Math.min,FEt=!OEt(function(){var e=new Int8Array([1]),t=e.toSpliced(1,0,{valueOf:function(){return e[0]=2,3}});return t[0]!==2||t[1]!==3});LEt("toSpliced",function(t,r){var n=REt(this),i=DEt(n),a=CEt(n),h=qEt(t,a),p=arguments.length,g=0,w,E,q,P,k,W,Q;if(p===0)w=E=0;else if(p===1)w=0,E=a-h;else if(E=NEt(kEt(MEt(r),0),a-h),w=p-2,w){P=new i(w),q=AEt(P);for(var $=2;$<p;$++)k=arguments[$],P[$-2]=q?PEt(k):+k}for(W=a+w-E,Q=new i(W);g<h;g++)Q[g]=n[g];for(;g<h+w;g++)Q[g]=P[g-h];for(;g<W;g++)Q[g]=n[g+E-w];return Q},!FEt)});var dme=S(()=>{"use strict";var zEt=Oe(),$z=zt(),jEt=Tl(),BEt=lT(),UEt=$z.aTypedArray,VEt=$z.getTypedArrayConstructor,$Et=$z.exportTypedArrayMethod,GEt=zEt(BEt);$Et("uniqueBy",function(t){return UEt(this),jEt(VEt(this),GEt(this,t))},!0)});var vme=S(()=>{"use strict";eF()});var Gz=S((vrr,mme)=>{"use strict";var WEt=It(),HEt=String,ZEt=TypeError;mme.exports=function(e){if(e===void 0||WEt(e))return e;throw new ZEt(HEt(e)+" is not an object or undefined")}});var rx=S((mrr,bme)=>{"use strict";var xme="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",gme=xme+"+/",yme=xme+"-_",_me=function(e){for(var t={},r=0;r<64;r++)t[e.charAt(r)]=r;return t};bme.exports={i2c:gme,c2i:_me(gme),i2cUrl:yme,c2iUrl:_me(yme)}});var Wz=S((grr,wme)=>{"use strict";var KEt=TypeError;wme.exports=function(e){var t=e&&e.alphabet;if(t===void 0||t==="base64"||t==="base64url")return t||"base64";throw new KEt("Incorrect `alphabet` option")}});var Xz=S((yrr,Tme)=>{"use strict";var Eme=Ze(),XEt=Oe(),YEt=Gz(),JEt=Y0(),QEt=kt(),Sme=rx(),eSt=Wz(),tSt=Iv(),rSt=Sme.c2i,nSt=Sme.c2iUrl,Mh=Eme.SyntaxError,iSt=Eme.TypeError,dp=XEt("".charAt),Hz=function(e,t){for(var r=e.length;t<r;t++){var n=dp(e,t);if(n!==" "&&n!=="\t"&&n!==`
`&&n!=="\f"&&n!=="\r")break}return t},Zz=function(e,t,r){var n=e.length;n<4&&(e+=n===2?"AA":"A");var i=(t[dp(e,0)]<<18)+(t[dp(e,1)]<<12)+(t[dp(e,2)]<<6)+t[dp(e,3)],a=[i>>16&255,i>>8&255,i&255];if(n===2){if(r&&a[1]!==0)throw new Mh("Extra bits");return[a[0]]}if(n===3){if(r&&a[2]!==0)throw new Mh("Extra bits");return[a[0],a[1]]}return a},Kz=function(e,t,r){for(var n=t.length,i=0;i<n;i++)e[r+i]=t[i];return r+n};Tme.exports=function(e,t,r,n){JEt(e),YEt(t);var i=eSt(t)==="base64"?rSt:nSt,a=t?t.lastChunkHandling:void 0;if(a===void 0&&(a="loose"),a!=="loose"&&a!=="strict"&&a!=="stop-before-partial")throw new iSt("Incorrect `lastChunkHandling` option");r&&tSt(r.buffer);var h=r||[],p=0,g=0,w="",E=0;if(n)for(;;){if(E=Hz(e,E),E===e.length){if(w.length>0){if(a==="stop-before-partial")break;if(a==="loose"){if(w.length===1)throw new Mh("Malformed padding: exactly one additional character");p=Kz(h,Zz(w,i,!1),p)}else throw new Mh("Missing padding")}g=e.length;break}var q=dp(e,E);if(++E,q==="="){if(w.length<2)throw new Mh("Padding is too early");if(E=Hz(e,E),w.length===2){if(E===e.length){if(a==="stop-before-partial")break;throw new Mh("Malformed padding: only one =")}dp(e,E)==="="&&(++E,E=Hz(e,E))}if(E<e.length)throw new Mh("Unexpected character after padding");p=Kz(h,Zz(w,i,a==="strict"),p),g=e.length;break}if(!QEt(i,q))throw new Mh("Unexpected character");var P=n-p;if(P===1&&w.length===2||P===2&&w.length===3||(w+=q,w.length===4&&(p=Kz(h,Zz(w,i,!1),p),w="",g=E,p===n)))break}return{bytes:h,read:g,written:p}}});var Cme=S(()=>{"use strict";var aSt=K(),oSt=Ze(),sSt=Tl(),uSt=Xz(),Ime=oSt.Uint8Array;Ime&&aSt({target:"Uint8Array",stat:!0},{fromBase64:function(t){var r=uSt(t,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return sSt(Ime,r.bytes)}})});var Jz=S((brr,Mme)=>{"use strict";var Yz=Ze(),qme=Oe(),lSt=Yz.Uint8Array,Ame=Yz.SyntaxError,cSt=Yz.parseInt,hSt=Math.min,Pme=/[^\da-f]/i,fSt=qme(Pme.exec),pSt=qme("".slice);Mme.exports=function(e,t){var r=e.length;if(r%2!==0)throw new Ame("String should be an even number of characters");for(var n=t?hSt(t.length,r/2):r/2,i=t||new lSt(n),a=0,h=0;h<n;){var p=pSt(e,a,a+=2);if(fSt(Pme,p))throw new Ame("String should only contain hex characters");i[h++]=cSt(p,16)}return{bytes:i,read:a}}});var Ome=S(()=>{"use strict";var dSt=K(),vSt=Ze(),mSt=Y0(),gSt=Jz();vSt.Uint8Array&&dSt({target:"Uint8Array",stat:!0},{fromHex:function(t){return gSt(mSt(t)).bytes}})});var nx=S((Srr,Rme)=>{"use strict";var ySt=Ja(),_St=TypeError;Rme.exports=function(e){if(ySt(e)==="Uint8Array")return e;throw new _St("Argument is not an Uint8Array")}});var Dme=S(()=>{"use strict";var xSt=K(),bSt=Ze(),wSt=Xz(),ESt=nx(),SSt=bSt.Uint8Array;SSt&&xSt({target:"Uint8Array",proto:!0},{setFromBase64:function(t){ESt(this);var r=wSt(t,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:r.read,written:r.written}}})});var Lme=S(()=>{"use strict";var TSt=K(),ISt=Ze(),CSt=Y0(),ASt=nx(),qSt=Iv(),PSt=Jz();ISt.Uint8Array&&TSt({target:"Uint8Array",proto:!0},{setFromHex:function(t){ASt(this),CSt(t),qSt(this.buffer);var r=PSt(t,this).read;return{read:r,written:r/2}}})});var Nme=S(()=>{"use strict";var MSt=K(),OSt=Ze(),RSt=Oe(),DSt=Gz(),LSt=nx(),kSt=Iv(),kme=rx(),NSt=Wz(),FSt=kme.i2c,zSt=kme.i2cUrl,jSt=RSt("".charAt);OSt.Uint8Array&&MSt({target:"Uint8Array",proto:!0},{toBase64:function(){var t=LSt(this),r=arguments.length?DSt(arguments[0]):void 0,n=NSt(r)==="base64"?FSt:zSt,i=!!r&&!!r.omitPadding;kSt(this.buffer);for(var a="",h=0,p=t.length,g,w=function(E){return jSt(n,g>>6*E&63)};h+2<p;h+=3)g=(t[h]<<16)+(t[h+1]<<8)+t[h+2],a+=w(3)+w(2)+w(1)+w(0);return h+2===p?(g=(t[h]<<16)+(t[h+1]<<8),a+=w(3)+w(2)+w(1)+(i?"":"=")):h+1===p&&(g=t[h]<<16,a+=w(3)+w(2)+(i?"":"==")),a}})});var Fme=S(()=>{"use strict";var BSt=K(),USt=Ze(),VSt=Oe(),$St=nx(),GSt=Iv(),WSt=VSt(1 .toString);USt.Uint8Array&&BSt({target:"Uint8Array",proto:!0},{toHex:function(){$St(this),GSt(this.buffer);for(var t="",r=0,n=this.length;r<n;r++){var i=WSt(this[r],16);t+=i.length===1?"0"+i:i}return t}})});var ix=S((Rrr,zme)=>{"use strict";var HSt=Rl().has;zme.exports=function(e){return HSt(e),e}});var jme=S(()=>{"use strict";var ZSt=K(),KSt=ix(),XSt=Rl().remove;ZSt({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=KSt(this),r=!0,n,i=0,a=arguments.length;i<a;i++)n=XSt(t,arguments[i]),r=r&&n;return!!r}})});var Ume=S(()=>{"use strict";var YSt=K(),Bme=Rl(),JSt=V0();YSt({target:"WeakMap",stat:!0,forced:!0},{from:JSt(Bme.WeakMap,Bme.set,!0)})});var $me=S(()=>{"use strict";var QSt=K(),Vme=Rl(),eTt=$0();QSt({target:"WeakMap",stat:!0,forced:!0},{of:eTt(Vme.WeakMap,Vme.set,!0)})});var Wme=S(()=>{"use strict";var tTt=K(),rTt=ix(),Qz=Rl(),nTt=Qz.get,iTt=Qz.has,Gme=Qz.set;tTt({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var n=rTt(this),i,a;return iTt(n,t)?(i=nTt(n,t),"update"in r&&(i=r.update(i,t,n),Gme(n,t,i)),i):(a=r.insert(t,n),Gme(n,t,a),a)}})});var Hme=S(()=>{"use strict";var aTt=K(),oTt=ix(),ej=Rl(),sTt=ej.get,uTt=ej.has,lTt=ej.set;aTt({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,r){return uTt(oTt(this),t)?sTt(this,t):(lTt(this,t,r),r)}})});var Kme=S(()=>{"use strict";var cTt=K(),hTt=Et(),fTt=ix(),tj=Rl(),pTt=tj.get,dTt=tj.has,Zme=tj.set;cTt({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,r){if(fTt(this),hTt(r),dTt(this,t))return pTt(this,t);Zme(this,t);var n=r(t);return Zme(this,t,n),n}})});var Xme=S(()=>{"use strict";var vTt=K(),mTt=CT();vTt({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:mTt})});var nm=S((Zrr,Yme)=>{"use strict";var rj=Oe(),nj=WeakSet.prototype;Yme.exports={WeakSet,add:rj(nj.add),has:rj(nj.has),remove:rj(nj.delete)}});var ij=S((Krr,Jme)=>{"use strict";var gTt=nm().has;Jme.exports=function(e){return gTt(e),e}});var Qme=S(()=>{"use strict";var yTt=K(),_Tt=ij(),xTt=nm().add;yTt({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=_Tt(this),r=0,n=arguments.length;r<n;r++)xTt(t,arguments[r]);return t}})});var ege=S(()=>{"use strict";var bTt=K(),wTt=ij(),ETt=nm().remove;bTt({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=wTt(this),r=!0,n,i=0,a=arguments.length;i<a;i++)n=ETt(t,arguments[i]),r=r&&n;return!!r}})});var rge=S(()=>{"use strict";var STt=K(),tge=nm(),TTt=V0();STt({target:"WeakSet",stat:!0,forced:!0},{from:TTt(tge.WeakSet,tge.add,!1)})});var ige=S(()=>{"use strict";var ITt=K(),nge=nm(),CTt=$0();ITt({target:"WeakSet",stat:!0,forced:!0},{of:CTt(nge.WeakSet,nge.add,!1)})});var hge=S(()=>{"use strict";var ATt=K(),qTt=Ze(),sge=St(),aj=Oe(),PTt=Qe(),UT=Ne(),MTt=qt(),OTt=Ro(),age=rx().c2i,uge=/[^\d+/a-z]/i,RTt=/[\t\n\f\r ]+/g,DTt=/[=]{1,2}$/,vp=sge("atob"),LTt=String.fromCharCode,kTt=aj("".charAt),oge=aj("".replace),NTt=aj(uge.exec),im=!!vp&&!UT(function(){return vp("aGk=")!=="hi"}),lge=im&&UT(function(){return vp(" ")!==""}),cge=im&&!UT(function(){vp("a")}),FTt=im&&!UT(function(){vp()}),zTt=im&&vp.length!==1,jTt=!im||lge||cge||FTt||zTt;ATt({global:!0,bind:!0,enumerable:!0,forced:jTt},{atob:function(t){if(OTt(arguments.length,1),im&&!lge&&!cge)return PTt(vp,qTt,t);var r=oge(MTt(t),RTt,""),n="",i=0,a=0,h,p,g;if(r.length%4===0&&(r=oge(r,DTt,"")),h=r.length,h%4===1||NTt(uge,r))throw new(sge("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;i<h;)p=kTt(r,i++),g=a%4?g*64+age[p]:age[p],a++%4&&(n+=LTt(255&g>>(-2*a&6)));return n}})});var mge=S(()=>{"use strict";var BTt=K(),UTt=Ze(),dge=St(),vge=Oe(),VTt=Qe(),oj=Ne(),fge=qt(),$Tt=Ro(),GTt=rx().i2c,am=dge("btoa"),pge=vge("".charAt),WTt=vge("".charCodeAt),ax=!!am&&!oj(function(){return am("hi")!=="aGk="}),HTt=ax&&!oj(function(){am()}),ZTt=ax&&oj(function(){return am(null)!=="bnVsbA=="}),KTt=ax&&am.length!==1;BTt({global:!0,bind:!0,enumerable:!0,forced:!ax||HTt||ZTt||KTt},{btoa:function(t){if($Tt(arguments.length,1),ax)return VTt(am,UTt,fge(t));for(var r=fge(t),n="",i=0,a=GTt,h,p;pge(r,i)||(a="=",i%1);){if(p=WTt(r,i+=3/4),p>255)throw new(dge("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");h=h<<8|p,n+=pge(a,63&h>>8-i%1*8)}return n}})});var sj=S((unr,gge)=>{"use strict";gge.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var lj=S((lnr,_ge)=>{"use strict";var XTt=S_(),uj=XTt("span").classList,yge=uj&&uj.constructor&&uj.constructor.prototype;_ge.exports=yge===Object.prototype?void 0:yge});var Ege=S(()=>{"use strict";var xge=Ze(),bge=sj(),YTt=lj(),cj=lR(),JTt=zn(),wge=function(e){if(e&&e.forEach!==cj)try{JTt(e,"forEach",cj)}catch(t){e.forEach=cj}};for(VT in bge)bge[VT]&&wge(xge[VT]&&xge[VT].prototype);var VT;wge(YTt)});var Age=S(()=>{"use strict";var Sge=Ze(),Ige=sj(),QTt=lj(),ox=$_(),Tge=zn(),eIt=Aa(),tIt=yt(),hj=tIt("iterator"),fj=ox.values,Cge=function(e,t){if(e){if(e[hj]!==fj)try{Tge(e,hj,fj)}catch(n){e[hj]=fj}if(eIt(e,t,!0),Ige[t]){for(var r in ox)if(e[r]!==ox[r])try{Tge(e,r,ox[r])}catch(n){e[r]=ox[r]}}}};for($T in Ige)Cge(Sge[$T]&&Sge[$T].prototype,$T);var $T;Cge(QTt,"DOMTokenList")});var pj=S((dnr,qge)=>{"use strict";qge.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var jge=S(()=>{"use strict";var rIt=K(),HT=St(),nIt=eD(),_j=Ne(),iIt=Cn(),xj=Xa(),ZT=Fr().f,aIt=br(),GT=Wr(),WT=kt(),oIt=oa(),sIt=Ye(),Oge=WO(),Pge=Kf(),om=pj(),uIt=gE(),Rge=dr(),bj=dt(),Dge=jt(),sm="DOMException",yj="DATA_CLONE_ERR",XT=HT("Error"),Dl=HT(sm)||function(){try{var e=HT("MessageChannel")||nIt("worker_threads").MessageChannel;new e().port1.postMessage(new WeakMap)}catch(t){if(t.name===yj&&t.code===25)return t.constructor}}(),lIt=Dl&&Dl.prototype,Lge=XT.prototype,cIt=Rge.set,hIt=Rge.getterFor(sm),fIt="stack"in new XT(sm),kge=function(e){return WT(om,e)&&om[e].m?om[e].c:0},wj=function(){oIt(this,ux);var t=arguments.length,r=Pge(t<1?void 0:arguments[0]),n=Pge(t<2?void 0:arguments[1],"Error"),i=kge(n);if(cIt(this,{type:sm,name:n,message:r,code:i}),bj||(this.name=n,this.message=r,this.code=i),fIt){var a=new XT(r);a.name=sm,ZT(this,"stack",xj(1,uIt(a.stack,1)))}},ux=wj.prototype=iIt(Lge),Nge=function(e){return{enumerable:!0,configurable:!0,get:e}},dj=function(e){return Nge(function(){return hIt(this)[e]})};bj&&(GT(ux,"code",dj("code")),GT(ux,"message",dj("message")),GT(ux,"name",dj("name")));ZT(ux,"constructor",xj(1,wj));var YT=_j(function(){return!(new Dl instanceof XT)}),Fge=YT||_j(function(){return Lge.toString!==Oge||String(new Dl(1,2))!=="2: 1"}),zge=YT||_j(function(){return new Dl(1,"DataCloneError").code!==25}),pIt=YT||Dl[yj]!==25||lIt[yj]!==25,Mge=Dge?Fge||zge||pIt:YT;rIt({global:!0,constructor:!0,forced:Mge},{DOMException:Mge?wj:Dl});var lx=HT(sm),KT=lx.prototype;Fge&&(Dge||Dl===lx)&&aIt(KT,"toString",Oge);zge&&bj&&Dl===lx&&GT(KT,"code",Nge(function(){return kge(sIt(this).name)}));for(vj in om)WT(om,vj)&&(mj=om[vj],sx=mj.s,gj=xj(6,mj.c),WT(lx,sx)||ZT(lx,sx,gj),WT(KT,sx)||ZT(KT,sx,gj));var mj,sx,gj,vj});var Hge=S(()=>{"use strict";var dIt=K(),vIt=Ze(),Pj=St(),Aj=Xa(),qj=Fr().f,Bge=kt(),mIt=oa(),gIt=ch(),Uge=Kf(),Ej=pj(),yIt=gE(),_It=dt(),Gge=jt(),hx="DOMException",Wge=Pj("Error"),fx=Pj(hx),Mj=function(){mIt(this,xIt);var t=arguments.length,r=Uge(t<1?void 0:arguments[0]),n=Uge(t<2?void 0:arguments[1],"Error"),i=new fx(r,n),a=new Wge(r);return a.name=hx,qj(i,"stack",Aj(1,yIt(a.stack,1))),gIt(i,this,Mj),i},xIt=Mj.prototype=fx.prototype,bIt="stack"in new Wge(hx),wIt="stack"in new fx(1,2),Sj=fx&&_It&&Object.getOwnPropertyDescriptor(vIt,hx),EIt=!!Sj&&!(Sj.writable&&Sj.configurable),Vge=bIt&&!EIt&&!wIt;dIt({global:!0,constructor:!0,forced:Gge||Vge},{DOMException:Vge?Mj:fx});var cx=Pj(hx),$ge=cx.prototype;if($ge.constructor!==cx){Gge||qj($ge,"constructor",Aj(1,cx));for(Tj in Ej)Bge(Ej,Tj)&&(Ij=Ej[Tj],Cj=Ij.s,Bge(cx,Cj)||qj(cx,Cj,Aj(6,Ij.c)))}var Ij,Cj,Tj});var Kge=S(()=>{"use strict";var SIt=St(),TIt=Aa(),Zge="DOMException";TIt(SIt(Zge),Zge)});var Yge=S(()=>{"use strict";var IIt=K(),CIt=Ze(),Xge=v0().clear;IIt({global:!0,bind:!0,enumerable:!0,forced:CIt.clearImmediate!==Xge},{clearImmediate:Xge})});var JT=S((Enr,Qge)=>{"use strict";var Jge=Ze(),AIt=aa(),qIt=Ot(),PIt=H_(),MIt=Ds(),OIt=Qa(),RIt=Ro(),DIt=Jge.Function,LIt=/MSIE .\./.test(MIt)||PIt==="BUN"&&function(){var e=Jge.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}();Qge.exports=function(e,t){var r=t?2:1;return LIt?function(n,i){var a=RIt(arguments.length,1)>r,h=qIt(n)?n:DIt(n),p=a?OIt(arguments,r):[],g=a?function(){AIt(h,this,p)}:h;return t?e(g,i):e(g)}:e}});var nye=S(()=>{"use strict";var kIt=K(),rye=Ze(),eye=v0().set,NIt=JT(),tye=rye.setImmediate?NIt(eye,!1):eye;kIt({global:!0,bind:!0,enumerable:!0,forced:rye.setImmediate!==tye},{setImmediate:tye})});var iye=S(()=>{"use strict";Yge();nye()});var aye=S(()=>{"use strict";var FIt=K(),zIt=Ze(),jIt=GL(),BIt=Et(),UIt=Ro(),VIt=Ne(),$It=dt(),GIt=VIt(function(){return $It&&Object.getOwnPropertyDescriptor(zIt,"queueMicrotask").value.length!==1});FIt({global:!0,enumerable:!0,dontCallGetSet:!0,forced:GIt},{queueMicrotask:function(t){UIt(arguments.length,1),jIt(BIt(t))}})});var sye=S(()=>{"use strict";var WIt=K(),Oh=Ze(),HIt=Wr(),ZIt=dt(),KIt=TypeError,XIt=Object.defineProperty,oye=Oh.self!==Oh;try{ZIt?(QT=Object.getOwnPropertyDescriptor(Oh,"self"),(oye||!QT||!QT.get||!QT.enumerable)&&HIt(Oh,"self",{get:function(){return Oh},set:function(t){if(this!==Oh)throw new KIt("Illegal invocation");XIt(Oh,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):WIt({global:!0,simple:!0,forced:oye},{self:Oh})}catch(e){}var QT});var yye=S(()=>{"use strict";var YIt=jt(),JIt=K(),Fi=Ze(),dx=St(),mx=Oe(),Nj=Ne(),QIt=oh(),lm=Ot(),eCt=zs(),tCt=Nn(),iI=It(),rCt=yl(),nCt=hn(),cye=Ye(),rI=Ja(),iCt=kt(),aCt=as(),Oj=zn(),eI=Yt(),oCt=Ro(),sCt=zv(),aI=Jn(),Fj=yi(),uCt=ro(),uye=sD(),lCt=UO(),zj=XE(),px=Fi.Object,cCt=Fi.Array,hye=Fi.Date,fye=Fi.Error,hCt=Fi.TypeError,fCt=Fi.PerformanceMark,mp=dx("DOMException"),Lj=aI.Map,jj=aI.has,pye=aI.get,nI=aI.set,dye=Fj.Set,vye=Fj.add,pCt=Fj.has,dCt=dx("Object","keys"),vCt=mx([].push),mCt=mx((!0).valueOf),gCt=mx(1 .valueOf),yCt=mx("".valueOf),_Ct=mx(hye.prototype.getTime),kj=QIt("structuredClone"),vx="DataCloneError",tI="Transferring",mye=function(e){return!Nj(function(){var t=new Fi.Set([7]),r=e(t),n=e(px(7));return r===t||!r.has(7)||!iI(n)||+n!=7})&&e},lye=function(e,t){return!Nj(function(){var r=new t,n=e({a:r,b:r});return!(n&&n.a===n.b&&n.a instanceof t&&n.a.stack===r.stack)})},xCt=function(e){return!Nj(function(){var t=e(new Fi.AggregateError([1],kj,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==kj||t.cause!==3})},um=Fi.structuredClone,bCt=YIt||!lye(um,fye)||!lye(um,mp)||!xCt(um),wCt=!um&&mye(function(e){return new fCt(kj,{detail:e}).detail}),Ll=mye(um)||wCt,Rj=function(e){throw new mp("Uncloneable type: "+e,vx)},ao=function(e,t){throw new mp((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",vx)},Dj=function(e,t){return Ll||ao(t),Ll(e)},ECt=function(){var e;try{e=new Fi.DataTransfer}catch(t){try{e=new Fi.ClipboardEvent("").clipboardData}catch(r){}}return e&&e.items&&e.files?e:null},gye=function(e,t,r){if(jj(t,e))return pye(t,e);var n=r||rI(e),i,a,h,p,g,w;if(n==="SharedArrayBuffer")Ll?i=Ll(e):i=e;else{var E=Fi.DataView;!E&&!lm(e.slice)&&ao("ArrayBuffer");try{if(lm(e.slice)&&!e.resizable)i=e.slice(0);else for(a=e.byteLength,h=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,i=new ArrayBuffer(a,h),p=new E(e),g=new E(i),w=0;w<a;w++)g.setUint8(w,p.getUint8(w))}catch(q){throw new mp("ArrayBuffer is detached",vx)}}return nI(t,e,i),i},SCt=function(e,t,r,n,i){var a=Fi[t];return iI(a)||ao(t),new a(gye(e.buffer,i),r,n)},Ni=function(e,t){if(rCt(e)&&Rj("Symbol"),!iI(e))return e;if(t){if(jj(t,e))return pye(t,e)}else t=new Lj;var r=rI(e),n,i,a,h,p,g,w,E;switch(r){case"Array":a=cCt(eI(e));break;case"Object":a={};break;case"Map":a=new Lj;break;case"Set":a=new dye;break;case"RegExp":a=new RegExp(e.source,sCt(e));break;case"Error":switch(i=e.name,i){case"AggregateError":a=new(dx(i))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":a=new(dx(i));break;case"CompileError":case"LinkError":case"RuntimeError":a=new(dx("WebAssembly",i));break;default:a=new fye;}break;case"DOMException":a=new mp(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":a=gye(e,t,r);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":g=r==="DataView"?e.byteLength:e.length,a=SCt(e,r,e.byteOffset,g,t);break;case"DOMQuad":try{a=new DOMQuad(Ni(e.p1,t),Ni(e.p2,t),Ni(e.p3,t),Ni(e.p4,t))}catch(q){a=Dj(e,r)}break;case"File":if(Ll)try{a=Ll(e),rI(a)!==r&&(a=void 0)}catch(q){}if(!a)try{a=new File([e],e.name,e)}catch(q){}a||ao(r);break;case"FileList":if(h=ECt(),h){for(p=0,g=eI(e);p<g;p++)h.items.add(Ni(e[p],t));a=h.files}else a=Dj(e,r);break;case"ImageData":try{a=new ImageData(Ni(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(q){a=Dj(e,r)}break;default:if(Ll)a=Ll(e);else switch(r){case"BigInt":a=px(e.valueOf());break;case"Boolean":a=px(mCt(e));break;case"Number":a=px(gCt(e));break;case"String":a=px(yCt(e));break;case"Date":a=new hye(_Ct(e));break;case"Blob":try{a=e.slice(0,e.size,e.type)}catch(q){ao(r)}break;case"DOMPoint":case"DOMPointReadOnly":n=Fi[r];try{a=n.fromPoint?n.fromPoint(e):new n(e.x,e.y,e.z,e.w)}catch(q){ao(r)}break;case"DOMRect":case"DOMRectReadOnly":n=Fi[r];try{a=n.fromRect?n.fromRect(e):new n(e.x,e.y,e.width,e.height)}catch(q){ao(r)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=Fi[r];try{a=n.fromMatrix?n.fromMatrix(e):new n(e)}catch(q){ao(r)}break;case"AudioData":case"VideoFrame":lm(e.clone)||ao(r);try{a=e.clone()}catch(q){Rj(r)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":ao(r);default:Rj(r);}}switch(nI(t,e,a),r){case"Array":case"Object":for(w=dCt(e),p=0,g=eI(w);p<g;p++)E=w[p],aCt(a,E,Ni(e[E],t));break;case"Map":e.forEach(function(q,P){nI(a,Ni(P,t),Ni(q,t))});break;case"Set":e.forEach(function(q){vye(a,Ni(q,t))});break;case"Error":Oj(a,"message",Ni(e.message,t)),iCt(e,"cause")&&Oj(a,"cause",Ni(e.cause,t)),i==="AggregateError"?a.errors=Ni(e.errors,t):i==="SuppressedError"&&(a.error=Ni(e.error,t),a.suppressed=Ni(e.suppressed,t));case"DOMException":lCt&&Oj(a,"stack",Ni(e.stack,t));}return a},TCt=function(e,t){if(!iI(e))throw new hCt("Transfer option cannot be converted to a sequence");var r=[];nCt(e,function(P){vCt(r,cye(P))});for(var n=0,i=eI(r),a=new dye,h,p,g,w,E,q;n<i;){if(h=r[n++],p=rI(h),p==="ArrayBuffer"?pCt(a,h):jj(t,h))throw new mp("Duplicate transferable",vx);if(p==="ArrayBuffer"){vye(a,h);continue}if(zj)w=um(h,{transfer:[h]});else switch(p){case"ImageBitmap":g=Fi.OffscreenCanvas,eCt(g)||ao(p,tI);try{E=new g(h.width,h.height),q=E.getContext("bitmaprenderer"),q.transferFromImageBitmap(h),w=E.transferToImageBitmap()}catch(P){}break;case"AudioData":case"VideoFrame":(!lm(h.clone)||!lm(h.close))&&ao(p,tI);try{w=h.clone(),h.close()}catch(P){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":ao(p,tI);}if(w===void 0)throw new mp("This object cannot be transferred: "+p,vx);nI(t,h,w)}return a},ICt=function(e){uCt(e,function(t){zj?Ll(t,{transfer:[t]}):lm(t.transfer)?t.transfer():uye?uye(t):ao("ArrayBuffer",tI)})};JIt({global:!0,enumerable:!0,sham:!zj,forced:bCt},{structuredClone:function(t){var r=oCt(arguments.length,1)>1&&!tCt(arguments[1])?cye(arguments[1]):void 0,n=r?r.transfer:void 0,i,a;n!==void 0&&(i=new Lj,a=TCt(n,i));var h=Ni(t,i);return a&&ICt(a),h}})});var bye=S(()=>{"use strict";var CCt=K(),xye=Ze(),ACt=JT(),_ye=ACt(xye.setInterval,!0);CCt({global:!0,bind:!0,forced:xye.setInterval!==_ye},{setInterval:_ye})});var Sye=S(()=>{"use strict";var qCt=K(),Eye=Ze(),PCt=JT(),wye=PCt(Eye.setTimeout,!0);qCt({global:!0,bind:!0,forced:Eye.setTimeout!==wye},{setTimeout:wye})});var Tye=S(()=>{"use strict";bye();Sye()});var gx=S((jnr,Cye)=>{"use strict";var MCt=Ne(),OCt=yt(),RCt=dt(),Iye=jt(),DCt=OCt("iterator");Cye.exports=!MCt(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",t.forEach(function(i,a){t.delete("b"),n+=a+i}),r.delete("a",2),r.delete("b",void 0),Iye&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(Iye||!RCt)||!t.sort||e.href!=="https://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[DCt]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var kye=S((Bnr,Lye)=>{"use strict";var gp=Oe(),Bj=2147483647,yx=36,Oye=1,$j=26,LCt=38,kCt=700,NCt=72,FCt=128,zCt="-",jCt=/[^\0-\u007E]/,Rye=/[.\u3002\uFF0E\uFF61]/g,Aye="Overflow: input needs wider integers to process",Uj=yx-Oye,qye=RangeError,BCt=gp(Rye.exec),cm=Math.floor,Vj=String.fromCharCode,Pye=gp("".charCodeAt),Dye=gp([].join),Rh=gp([].push),UCt=gp("".replace),VCt=gp("".split),$Ct=gp("".toLowerCase),GCt=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=Pye(e,r++);if(i>=55296&&i<=56319&&r<n){var a=Pye(e,r++);(a&64512)===56320?Rh(t,((i&1023)<<10)+(a&1023)+65536):(Rh(t,i),r--)}else Rh(t,i)}return t},Mye=function(e){return e+22+75*(e<26)},WCt=function(e,t,r){var n=0;for(e=r?cm(e/kCt):e>>1,e+=cm(e/t);e>Uj*$j>>1;)e=cm(e/Uj),n+=yx;return cm(n+(Uj+1)*e/(e+LCt))},HCt=function(e){var t=[];e=GCt(e);var r=e.length,n=FCt,i=0,a=NCt,h,p;for(h=0;h<e.length;h++)p=e[h],p<128&&Rh(t,Vj(p));var g=t.length,w=g;for(g&&Rh(t,zCt);w<r;){var E=Bj;for(h=0;h<e.length;h++)p=e[h],p>=n&&p<E&&(E=p);var q=w+1;if(E-n>cm((Bj-i)/q))throw new qye(Aye);for(i+=(E-n)*q,n=E,h=0;h<e.length;h++){if(p=e[h],p<n&&++i>Bj)throw new qye(Aye);if(p===n){for(var P=i,k=yx;;){var W=k<=a?Oye:k>=a+$j?$j:k-a;if(P<W)break;var Q=P-W,$=yx-W;Rh(t,Vj(Mye(W+Q%$))),P=cm(Q/$),k+=yx}Rh(t,Vj(Mye(P))),a=WCt(i,q,w===g),i=0,w++}}i++,n++}return Dye(t,"")};Lye.exports=function(e){var t=[],r=VCt(UCt($Ct(e),Rye,"."),"."),n,i;for(n=0;n<r.length;n++)i=r[n],Rh(t,BCt(jCt,i)?"xn--"+HCt(i):i);return Dye(t,".")}});var Qj=S((Unr,a_e)=>{"use strict";$_();Zk();var Xj=K(),Kye=Ze(),Yj=FL(),ZCt=St(),oI=Qe(),Us=Oe(),_x=dt(),Xye=gx(),Yye=br(),KCt=Wr(),XCt=ss(),YCt=Aa(),JCt=ph(),Jj=dr(),Jye=oa(),Gj=Ot(),QCt=kt(),eAt=Pr(),tAt=Ja(),rAt=Ye(),Qye=It(),Pa=qt(),nAt=Cn(),Nye=Xa(),Fye=hh(),iAt=yu(),sI=gi(),hm=Ro(),aAt=yt(),oAt=DE(),sAt=aAt("iterator"),pm="URLSearchParams",e_e=pm+"Iterator",t_e=Jj.set,cs=Jj.getterFor(pm),uAt=Jj.getterFor(e_e),zye=Yj("fetch"),cI=Yj("Request"),xx=Yj("Headers"),Wj=cI&&cI.prototype,jye=xx&&xx.prototype,lAt=Kye.TypeError,cAt=Kye.encodeURIComponent,hAt=String.fromCharCode,fAt=ZCt("String","fromCodePoint"),pAt=parseInt,lI=Us("".charAt),Bye=Us([].join),Dh=Us([].push),r_e=Us("".replace),dAt=Us([].shift),Uye=Us([].splice),Vye=Us("".split),n_e=Us("".slice),vAt=Us(/./.exec),mAt=/\+/g,Hj="\uFFFD",gAt=/^[0-9a-f]+$/i,$ye=function(e,t){var r=n_e(e,t,t+2);return vAt(gAt,r)?pAt(r,16):NaN},yAt=function(e){for(var t=0,r=128;r>0&&e&r;r>>=1)t++;return t},_At=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(e[0]&31)<<6|e[1]&63;break;case 3:t=(e[0]&15)<<12|(e[1]&63)<<6|e[2]&63;break;case 4:t=(e[0]&7)<<18|(e[1]&63)<<12|(e[2]&63)<<6|e[3]&63;break;}return t>1114111?null:t},Gye=function(e){e=r_e(e,mAt," ");for(var t=e.length,r="",n=0;n<t;){var i=lI(e,n);if(i==="%"){if(lI(e,n+1)==="%"||n+3>t){r+="%",n++;continue}var a=$ye(e,n+1);if(a!==a){r+=i,n++;continue}n+=2;var h=yAt(a);if(h===0)i=hAt(a);else{if(h===1||h>4){r+=Hj,n++;continue}for(var p=[a],g=1;g<h&&(n++,!(n+3>t||lI(e,n)!=="%"));){var w=$ye(e,n+1);if(w!==w){n+=3;break}if(w>191||w<128)break;Dh(p,w),n+=2,g++}if(p.length!==h){r+=Hj;continue}var E=_At(p);E===null?r+=Hj:i=fAt(E)}}r+=i,n++}return r},xAt=/[!'()~]|%20/g,bAt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},wAt=function(e){return bAt[e]},Wye=function(e){return r_e(cAt(e),xAt,wAt)},Zj=JCt(function(t,r){t_e(this,{type:e_e,target:cs(t).entries,index:0,kind:r})},pm,function(){var t=uAt(this),r=t.target,n=t.index++;if(!r||n>=r.length)return t.target=null,sI(void 0,!0);var i=r[n];switch(t.kind){case"keys":return sI(i.key,!1);case"values":return sI(i.value,!1);}return sI([i.key,i.value],!1)},!0),i_e=function(e){this.entries=[],this.url=null,e!==void 0&&(Qye(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?lI(e,0)==="?"?n_e(e,1):e:Pa(e)))};i_e.prototype={type:pm,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t=this.entries,r=iAt(e),n,i,a,h,p,g,w;if(r)for(n=Fye(e,r),i=n.next;!(a=oI(i,n)).done;){if(h=Fye(rAt(a.value)),p=h.next,(g=oI(p,h)).done||(w=oI(p,h)).done||!oI(p,h).done)throw new lAt("Expected sequence with length 2");Dh(t,{key:Pa(g.value),value:Pa(w.value)})}else for(var E in e)QCt(e,E)&&Dh(t,{key:E,value:Pa(e[E])})},parseQuery:function(e){if(e)for(var t=this.entries,r=Vye(e,"&"),n=0,i,a;n<r.length;)i=r[n++],i.length&&(a=Vye(i,"="),Dh(t,{key:Gye(dAt(a)),value:Gye(Bye(a,"="))}))},serialize:function(){for(var e=this.entries,t=[],r=0,n;r<e.length;)n=e[r++],Dh(t,Wye(n.key)+"="+Wye(n.value));return Bye(t,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var hI=function(){Jye(this,fm);var t=arguments.length>0?arguments[0]:void 0,r=t_e(this,new i_e(t));_x||(this.size=r.entries.length)},fm=hI.prototype;XCt(fm,{append:function(t,r){var n=cs(this);hm(arguments.length,2),Dh(n.entries,{key:Pa(t),value:Pa(r)}),_x||this.length++,n.updateURL()},delete:function(e){for(var t=cs(this),r=hm(arguments.length,1),n=t.entries,i=Pa(e),a=r<2?void 0:arguments[1],h=a===void 0?a:Pa(a),p=0;p<n.length;){var g=n[p];if(g.key===i&&(h===void 0||g.value===h)){if(Uye(n,p,1),h!==void 0)break}else p++}_x||(this.size=n.length),t.updateURL()},get:function(t){var r=cs(this).entries;hm(arguments.length,1);for(var n=Pa(t),i=0;i<r.length;i++)if(r[i].key===n)return r[i].value;return null},getAll:function(t){var r=cs(this).entries;hm(arguments.length,1);for(var n=Pa(t),i=[],a=0;a<r.length;a++)r[a].key===n&&Dh(i,r[a].value);return i},has:function(t){for(var r=cs(this).entries,n=hm(arguments.length,1),i=Pa(t),a=n<2?void 0:arguments[1],h=a===void 0?a:Pa(a),p=0;p<r.length;){var g=r[p++];if(g.key===i&&(h===void 0||g.value===h))return!0}return!1},set:function(t,r){var n=cs(this);hm(arguments.length,1);for(var i=n.entries,a=!1,h=Pa(t),p=Pa(r),g=0,w;g<i.length;g++)w=i[g],w.key===h&&(a?Uye(i,g--,1):(a=!0,w.value=p));a||Dh(i,{key:h,value:p}),_x||(this.size=i.length),n.updateURL()},sort:function(){var t=cs(this);oAt(t.entries,function(r,n){return r.key>n.key?1:-1}),t.updateURL()},forEach:function(t){for(var r=cs(this).entries,n=eAt(t,arguments.length>1?arguments[1]:void 0),i=0,a;i<r.length;)a=r[i++],n(a.value,a.key,this)},keys:function(){return new Zj(this,"keys")},values:function(){return new Zj(this,"values")},entries:function(){return new Zj(this,"entries")}},{enumerable:!0});Yye(fm,sAt,fm.entries,{name:"entries"});Yye(fm,"toString",function(){return cs(this).serialize()},{enumerable:!0});_x&&KCt(fm,"size",{get:function(){return cs(this).entries.length},configurable:!0,enumerable:!0});YCt(hI,pm);Xj({global:!0,constructor:!0,forced:!Xye},{URLSearchParams:hI});!Xye&&Gj(xx)&&(Hye=Us(jye.has),Zye=Us(jye.set),Kj=function(e){if(Qye(e)){var t=e.body,r;if(tAt(t)===pm)return r=e.headers?new xx(e.headers):new xx,Hye(r,"content-type")||Zye(r,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),nAt(e,{body:Nye(0,Pa(t)),headers:Nye(0,r)})}return e},Gj(zye)&&Xj({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return zye(t,arguments.length>1?Kj(arguments[1]):{})}}),Gj(cI)&&(uI=function(t){return Jye(this,Wj),new cI(t,arguments.length>1?Kj(arguments[1]):{})},Wj.constructor=uI,uI.prototype=Wj,Xj({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:uI})));var Hye,Zye,Kj,uI;a_e.exports={URLSearchParams:hI,getState:cs}});var S_e=S(()=>{"use strict";Xk();var EAt=K(),mB=dt(),SAt=gx(),gB=Ze(),o_e=Pr(),vs=Oe(),mI=br(),hs=Wr(),TAt=oa(),pB=kt(),yB=_L(),dm=cR(),Vs=Qa(),IAt=up().codeAt,CAt=kye(),Nl=qt(),AAt=Aa(),qAt=Ro(),g_e=Qj(),y_e=dr(),PAt=y_e.set,gI=y_e.getterFor("URL"),MAt=g_e.URLSearchParams,OAt=g_e.getState,bx=gB.URL,dB=gB.TypeError,yI=gB.parseInt,RAt=Math.floor,s_e=Math.pow,ds=vs("".charAt),$s=vs(/./.exec),Ex=vs([].join),DAt=vs(1 .toString),LAt=vs([].pop),mm=vs([].push),eB=vs("".replace),kAt=vs([].shift),NAt=vs("".split),Tx=vs("".slice),_I=vs("".toLowerCase),FAt=vs([].unshift),zAt="Invalid authority",tB="Invalid scheme",yp="Invalid host",u_e="Invalid port",x_e=/[a-z]/i,jAt=/[\d+-.a-z]/i,vB=/\d/,BAt=/^0x/i,UAt=/^[0-7]+$/,VAt=/^\d+$/,b_e=/^[\da-f]+$/i,$At=/[\0\t\n\r #%/:<>?@[\\\]^|]/,GAt=/[\0\t\n\r #/:<>?@[\\\]^|]/,WAt=/^[\u0000-\u0020]+/,HAt=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ZAt=/[\t\n\r]/g,fs,KAt=function(e){var t=NAt(e,"."),r,n,i,a,h,p,g;if(t.length&&t[t.length-1]===""&&t.length--,r=t.length,r>4)return e;for(n=[],i=0;i<r;i++){if(a=t[i],a==="")return e;if(h=10,a.length>1&&ds(a,0)==="0"&&(h=$s(BAt,a)?16:8,a=Tx(a,h===8?1:2)),a==="")p=0;else{if(!$s(h===10?VAt:h===8?UAt:b_e,a))return e;p=yI(a,h)}mm(n,p)}for(i=0;i<r;i++)if(p=n[i],i===r-1){if(p>=s_e(256,5-r))return null}else if(p>255)return null;for(g=LAt(n),i=0;i<n.length;i++)g+=n[i]*s_e(256,3-i);return g},XAt=function(e){var t=[0,0,0,0,0,0,0,0],r=0,n=null,i=0,a,h,p,g,w,E,q,P=function(){return ds(e,i)};if(P()===":"){if(ds(e,1)!==":")return;i+=2,r++,n=r}for(;P();){if(r===8)return;if(P()===":"){if(n!==null)return;i++,r++,n=r;continue}for(a=h=0;h<4&&$s(b_e,P());)a=a*16+yI(P(),16),i++,h++;if(P()==="."){if(h===0||(i-=h,r>6))return;for(p=0;P();){if(g=null,p>0)if(P()==="."&&p<4)i++;else return;if(!$s(vB,P()))return;for(;$s(vB,P());){if(w=yI(P(),10),g===null)g=w;else{if(g===0)return;g=g*10+w}if(g>255)return;i++}t[r]=t[r]*256+g,p++,(p===2||p===4)&&r++}if(p!==4)return;break}else if(P()===":"){if(i++,!P())return}else if(P())return;t[r++]=a}if(n!==null)for(E=r-n,r=7;r!==0&&E>0;)q=t[r],t[r--]=t[n+E-1],t[n+--E]=q;else if(r!==8)return;return t},YAt=function(e){for(var t=null,r=1,n=null,i=0,a=0;a<8;a++)e[a]!==0?(i>r&&(t=n,r=i),n=null,i=0):(n===null&&(n=a),++i);return i>r?n:t},wx=function(e){var t,r,n,i;if(typeof e=="number"){for(t=[],r=0;r<4;r++)FAt(t,e%256),e=RAt(e/256);return Ex(t,".")}if(typeof e=="object"){for(t="",n=YAt(e),r=0;r<8;r++)i&&e[r]===0||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=DAt(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},vI={},w_e=yB({},vI,{" ":1,"\"":1,"<":1,">":1,"`":1}),E_e=yB({},w_e,{"#":1,"?":1,"{":1,"}":1}),rB=yB({},E_e,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Lh=function(e,t){var r=IAt(e,0);return r>32&&r<127&&!pB(t,e)?e:encodeURIComponent(e)},fI={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Sx=function(e,t){var r;return e.length===2&&$s(x_e,ds(e,0))&&((r=ds(e,1))===":"||!t&&r==="|")},l_e=function(e){var t;return e.length>1&&Sx(Tx(e,0,2))&&(e.length===2||(t=ds(e,2))==="/"||t==="\\"||t==="?"||t==="#")},JAt=function(e){return e==="."||_I(e)==="%2e"},QAt=function(e){return e=_I(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},nB={},c_e={},iB={},h_e={},f_e={},aB={},p_e={},d_e={},pI={},dI={},oB={},sB={},uB={},lB={},v_e={},cB={},vm={},Au={},m_e={},_p={},kl={},_B=function(e,t,r){var n=Nl(e),i,a,h;if(t){if(a=this.parse(n),a)throw new dB(a);this.searchParams=null}else{if(r!==void 0&&(i=new _B(r,!0)),a=this.parse(n,null,i),a)throw new dB(a);h=OAt(new MAt),h.bindURL(this),this.searchParams=h}};_B.prototype={type:"URL",parse:function(e,t,r){var n=this,i=t||nB,a=0,h="",p=!1,g=!1,w=!1,E,q,P,k;for(e=Nl(e),t||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,e=eB(e,WAt,""),e=eB(e,HAt,"$1")),e=eB(e,ZAt,""),E=dm(e);a<=E.length;){switch(q=E[a],i){case nB:if(q&&$s(x_e,q))h+=_I(q),i=c_e;else{if(t)return tB;i=iB;continue}break;case c_e:if(q&&($s(jAt,q)||q==="+"||q==="-"||q==="."))h+=_I(q);else if(q===":"){if(t&&(n.isSpecial()!==pB(fI,h)||h==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=h,t){n.isSpecial()&&fI[n.scheme]===n.port&&(n.port=null);return}h="",n.scheme==="file"?i=lB:n.isSpecial()&&r&&r.scheme===n.scheme?i=h_e:n.isSpecial()?i=d_e:E[a+1]==="/"?(i=f_e,a++):(n.cannotBeABaseURL=!0,mm(n.path,""),i=m_e)}else{if(t)return tB;h="",i=iB,a=0;continue}break;case iB:if(!r||r.cannotBeABaseURL&&q!=="#")return tB;if(r.cannotBeABaseURL&&q==="#"){n.scheme=r.scheme,n.path=Vs(r.path),n.query=r.query,n.fragment="",n.cannotBeABaseURL=!0,i=kl;break}i=r.scheme==="file"?lB:aB;continue;case h_e:if(q==="/"&&E[a+1]==="/")i=pI,a++;else{i=aB;continue}break;case f_e:if(q==="/"){i=dI;break}else{i=Au;continue}case aB:if(n.scheme=r.scheme,q===fs)n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Vs(r.path),n.query=r.query;else if(q==="/"||q==="\\"&&n.isSpecial())i=p_e;else if(q==="?")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Vs(r.path),n.query="",i=_p;else if(q==="#")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Vs(r.path),n.query=r.query,n.fragment="",i=kl;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Vs(r.path),n.path.length--,i=Au;continue}break;case p_e:if(n.isSpecial()&&(q==="/"||q==="\\"))i=pI;else if(q==="/")i=dI;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,i=Au;continue}break;case d_e:if(i=pI,q!=="/"||ds(h,a+1)!=="/")continue;a++;break;case pI:if(q!=="/"&&q!=="\\"){i=dI;continue}break;case dI:if(q==="@"){p&&(h="%40"+h),p=!0,P=dm(h);for(var W=0;W<P.length;W++){var Q=P[W];if(Q===":"&&!w){w=!0;continue}var $=Lh(Q,rB);w?n.password+=$:n.username+=$}h=""}else if(q===fs||q==="/"||q==="?"||q==="#"||q==="\\"&&n.isSpecial()){if(p&&h==="")return zAt;a-=dm(h).length+1,h="",i=oB}else h+=q;break;case oB:case sB:if(t&&n.scheme==="file"){i=cB;continue}else if(q===":"&&!g){if(h==="")return yp;if(k=n.parseHost(h),k)return k;if(h="",i=uB,t===sB)return}else if(q===fs||q==="/"||q==="?"||q==="#"||q==="\\"&&n.isSpecial()){if(n.isSpecial()&&h==="")return yp;if(t&&h===""&&(n.includesCredentials()||n.port!==null))return;if(k=n.parseHost(h),k)return k;if(h="",i=vm,t)return;continue}else q==="["?g=!0:q==="]"&&(g=!1),h+=q;break;case uB:if($s(vB,q))h+=q;else if(q===fs||q==="/"||q==="?"||q==="#"||q==="\\"&&n.isSpecial()||t){if(h!==""){var V=yI(h,10);if(V>65535)return u_e;n.port=n.isSpecial()&&V===fI[n.scheme]?null:V,h=""}if(t)return;i=vm;continue}else return u_e;break;case lB:if(n.scheme="file",q==="/"||q==="\\")i=v_e;else if(r&&r.scheme==="file")switch(q){case fs:n.host=r.host,n.path=Vs(r.path),n.query=r.query;break;case"?":n.host=r.host,n.path=Vs(r.path),n.query="",i=_p;break;case"#":n.host=r.host,n.path=Vs(r.path),n.query=r.query,n.fragment="",i=kl;break;default:l_e(Ex(Vs(E,a),""))||(n.host=r.host,n.path=Vs(r.path),n.shortenPath()),i=Au;continue;}else{i=Au;continue}break;case v_e:if(q==="/"||q==="\\"){i=cB;break}r&&r.scheme==="file"&&!l_e(Ex(Vs(E,a),""))&&(Sx(r.path[0],!0)?mm(n.path,r.path[0]):n.host=r.host),i=Au;continue;case cB:if(q===fs||q==="/"||q==="\\"||q==="?"||q==="#"){if(!t&&Sx(h))i=Au;else if(h===""){if(n.host="",t)return;i=vm}else{if(k=n.parseHost(h),k)return k;if(n.host==="localhost"&&(n.host=""),t)return;h="",i=vm}continue}else h+=q;break;case vm:if(n.isSpecial()){if(i=Au,q!=="/"&&q!=="\\")continue}else if(!t&&q==="?")n.query="",i=_p;else if(!t&&q==="#")n.fragment="",i=kl;else if(q!==fs&&(i=Au,q!=="/"))continue;break;case Au:if(q===fs||q==="/"||q==="\\"&&n.isSpecial()||!t&&(q==="?"||q==="#")){if(QAt(h)?(n.shortenPath(),q!=="/"&&!(q==="\\"&&n.isSpecial())&&mm(n.path,"")):JAt(h)?q!=="/"&&!(q==="\\"&&n.isSpecial())&&mm(n.path,""):(n.scheme==="file"&&!n.path.length&&Sx(h)&&(n.host&&(n.host=""),h=ds(h,0)+":"),mm(n.path,h)),h="",n.scheme==="file"&&(q===fs||q==="?"||q==="#"))for(;n.path.length>1&&n.path[0]==="";)kAt(n.path);q==="?"?(n.query="",i=_p):q==="#"&&(n.fragment="",i=kl)}else h+=Lh(q,E_e);break;case m_e:q==="?"?(n.query="",i=_p):q==="#"?(n.fragment="",i=kl):q!==fs&&(n.path[0]+=Lh(q,vI));break;case _p:!t&&q==="#"?(n.fragment="",i=kl):q!==fs&&(q==="'"&&n.isSpecial()?n.query+="%27":q==="#"?n.query+="%23":n.query+=Lh(q,vI));break;case kl:q!==fs&&(n.fragment+=Lh(q,w_e));break;}a++}},parseHost:function(e){var t,r,n;if(ds(e,0)==="["){if(ds(e,e.length-1)!=="]"||(t=XAt(Tx(e,1,-1)),!t))return yp;this.host=t}else if(this.isSpecial()){if(e=CAt(e),$s($At,e)||(t=KAt(e),t===null))return yp;this.host=t}else{if($s(GAt,e))return yp;for(t="",r=dm(e),n=0;n<r.length;n++)t+=Lh(r[n],vI);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return pB(fI,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&(this.scheme!=="file"||t!==1||!Sx(e[0],!0))&&e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,i=e.host,a=e.port,h=e.path,p=e.query,g=e.fragment,w=t+":";return i!==null?(w+="//",e.includesCredentials()&&(w+=r+(n?":"+n:"")+"@"),w+=wx(i),a!==null&&(w+=":"+a)):t==="file"&&(w+="//"),w+=e.cannotBeABaseURL?h[0]:h.length?"/"+Ex(h,"/"):"",p!==null&&(w+="?"+p),g!==null&&(w+="#"+g),w},setHref:function(e){var t=this.parse(e);if(t)throw new dB(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e==="blob")try{return new gm(e.path[0]).origin}catch(r){return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+wx(this.host)+(t!==null?":"+t:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Nl(e)+":",nB)},getUsername:function(){return this.username},setUsername:function(e){var t=dm(Nl(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=Lh(t[r],rB)}},getPassword:function(){return this.password},setPassword:function(e){var t=dm(Nl(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=Lh(t[r],rB)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?wx(e):wx(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,oB)},getHostname:function(){var e=this.host;return e===null?"":wx(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,sB)},getPort:function(){var e=this.port;return e===null?"":Nl(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=Nl(e),e===""?this.port=null:this.parse(e,uB))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+Ex(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,vm))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=Nl(e),e===""?this.query=null:(ds(e,0)==="?"&&(e=Tx(e,1)),this.query="",this.parse(e,_p)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=Nl(e),e===""){this.fragment=null;return}ds(e,0)==="#"&&(e=Tx(e,1)),this.fragment="",this.parse(e,kl)},update:function(){this.query=this.searchParams.serialize()||null}};var gm=function(t){var r=TAt(this,Ma),n=qAt(arguments.length,1)>1?arguments[1]:void 0,i=PAt(r,new _B(t,!1,n));mB||(r.href=i.serialize(),r.origin=i.getOrigin(),r.protocol=i.getProtocol(),r.username=i.getUsername(),r.password=i.getPassword(),r.host=i.getHost(),r.hostname=i.getHostname(),r.port=i.getPort(),r.pathname=i.getPathname(),r.search=i.getSearch(),r.searchParams=i.getSearchParams(),r.hash=i.getHash())},Ma=gm.prototype,ps=function(e,t){return{get:function(){return gI(this)[e]()},set:t&&function(r){return gI(this)[t](r)},configurable:!0,enumerable:!0}};mB&&(hs(Ma,"href",ps("serialize","setHref")),hs(Ma,"origin",ps("getOrigin")),hs(Ma,"protocol",ps("getProtocol","setProtocol")),hs(Ma,"username",ps("getUsername","setUsername")),hs(Ma,"password",ps("getPassword","setPassword")),hs(Ma,"host",ps("getHost","setHost")),hs(Ma,"hostname",ps("getHostname","setHostname")),hs(Ma,"port",ps("getPort","setPort")),hs(Ma,"pathname",ps("getPathname","setPathname")),hs(Ma,"search",ps("getSearch","setSearch")),hs(Ma,"searchParams",ps("getSearchParams")),hs(Ma,"hash",ps("getHash","setHash")));mI(Ma,"toJSON",function(){return gI(this).serialize()},{enumerable:!0});mI(Ma,"toString",function(){return gI(this).serialize()},{enumerable:!0});bx&&(hB=bx.createObjectURL,fB=bx.revokeObjectURL,hB&&mI(gm,"createObjectURL",o_e(hB,bx)),fB&&mI(gm,"revokeObjectURL",o_e(fB,bx)));var hB,fB;AAt(gm,"URL");EAt({global:!0,constructor:!0,forced:!SAt,sham:!mB},{URL:gm})});var T_e=S(()=>{"use strict";S_e()});var A_e=S(()=>{"use strict";var eqt=K(),tqt=St(),C_e=Ne(),rqt=Ro(),I_e=qt(),nqt=gx(),xB=tqt("URL"),iqt=nqt&&C_e(function(){xB.canParse()}),aqt=C_e(function(){return xB.canParse.length!==1});eqt({target:"URL",stat:!0,forced:!iqt||aqt},{canParse:function(t){var r=rqt(arguments.length,1),n=I_e(t),i=r<2||arguments[1]===void 0?void 0:I_e(arguments[1]);try{return!!new xB(n,i)}catch(a){return!1}}})});var P_e=S(()=>{"use strict";var oqt=K(),sqt=St(),uqt=Ro(),q_e=qt(),lqt=gx(),cqt=sqt("URL");oqt({target:"URL",stat:!0,forced:!lqt},{parse:function(t){var r=uqt(arguments.length,1),n=q_e(t),i=r<2||arguments[1]===void 0?void 0:q_e(arguments[1]);try{return new cqt(n,i)}catch(a){return null}}})});var M_e=S(()=>{"use strict";var hqt=K(),fqt=Qe();hqt({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return fqt(URL.prototype.toString,this)}})});var O_e=S(()=>{"use strict";Qj()});var k_e=S(()=>{"use strict";var pqt=br(),xI=Oe(),R_e=qt(),dqt=Ro(),L_e=URLSearchParams,bI=L_e.prototype,vqt=xI(bI.append),D_e=xI(bI.delete),mqt=xI(bI.forEach),gqt=xI([].push),bB=new L_e("a=1&a=2&b=3");bB.delete("a",1);bB.delete("b",void 0);bB+""!="a=2"&&pqt(bI,"delete",function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&r===void 0)return D_e(this,e);var n=[];mqt(this,function(q,P){gqt(n,{key:P,value:q})}),dqt(t,1);for(var i=R_e(e),a=R_e(r),h=0,p=0,g=!1,w=n.length,E;h<w;)E=n[h++],g||E.key===i?(g=!0,D_e(this,E.key)):p++;for(;p<w;)E=n[p++],E.key===i&&E.value===a||vqt(this,E.key,E.value)},{enumerable:!0,unsafe:!0})});var j_e=S(()=>{"use strict";var yqt=br(),F_e=Oe(),_qt=qt(),xqt=Ro(),z_e=URLSearchParams,wB=z_e.prototype,bqt=F_e(wB.getAll),wqt=F_e(wB.has),N_e=new z_e("a=1");(N_e.has("a",2)||!N_e.has("a",void 0))&&yqt(wB,"has",function(t){var r=arguments.length,n=r<2?void 0:arguments[1];if(r&&n===void 0)return wqt(this,t);var i=bqt(this,t);xqt(r,1);for(var a=_qt(n),h=0;h<i.length;)if(i[h++]===a)return!0;return!1},{enumerable:!0,unsafe:!0})});var B_e=S(()=>{"use strict";var Eqt=dt(),Sqt=Oe(),Tqt=Wr(),EB=URLSearchParams.prototype,Iqt=Sqt(EB.forEach);Eqt&&!("size"in EB)&&Tqt(EB,"size",{get:function(){var t=0;return Iqt(this,function(){t++}),t},configurable:!0,enumerable:!0})});var V_e=S((sir,U_e)=>{"use strict";sZ();dZ();vZ();mZ();gZ();yZ();_Z();xZ();bZ();wZ();EZ();SZ();TZ();IZ();CZ();QZ();iK();YO();SK();tR();OK();kK();FK();BK();UK();$K();WK();oR();sR();YK();JK();t9();c9();h9();p9();d9();$_();L9();z9();j9();U9();$9();J9();e7();r7();a7();o7();w7();T7();I7();CR();qR();PR();P7();M7();O7();OR();uX();xX();IX();AX();QR();dD();vD();QX();tY();iY();aY();vY();mY();bY();TY();CY();RY();kY();jY();wD();CD();MD();OD();RD();DD();ND();FD();zD();BD();UD();VD();$D();GD();kO();cJ();nS();QD();OJ();LJ();NJ();FJ();zJ();UJ();$J();GJ();HJ();KJ();YJ();JJ();QJ();eQ();nQ();oQ();sQ();uQ();_Q();xQ();wQ();SQ();TQ();IQ();CQ();AQ();DQ();UQ();HQ();QQ();ree();see();uee();hee();pee();vee();mee();wee();Eee();See();Cee();Aee();qee();Mee();wL();EL();Dee();kee();Fee();jee();Uee();Vee();$ee();Gee();Xee();Yee();Jee();tte();rte();ite();ote();_re();ok();sk();Sre();hk();fk();Cre();Dre();Nre();Fre();Ure();Vre();$re();Gre();Wre();Hre();Zre();Qre();tne();rne();_ne();bne();IS();Cne();qne();One();kne();Fne();Ok();Lk();Nk();zk();Bk();$k();Wk();die();yie();Eie();Zk();Cie();Kk();Xk();Bie();nN();Jie();Qie();nae();iae();cae();pN();vae();xae();Eae();Tae();xN();Oae();Nae();Uae();Wae();Hae();Zae();Kae();Xae();Yae();Jae();Qae();eoe();toe();roe();noe();ioe();Moe();Ooe();Roe();Doe();Loe();koe();Noe();Foe();zoe();LN();Uoe();$oe();Woe();Koe();Yoe();Qoe();kN();NN();nse();ise();ose();use();pse();vse();gse();yse();xse();wse();Sse();Ise();Ose();Rse();Lse();Bse();Vse();Zse();YN();JN();Xse();eF();tue();tT();gue();yue();bue();Zue();Kue();Xue();Yue();Jue();Que();tle();rle();ile();ale();ule();lle();fle();ple();dle();vle();wle();Ele();Sle();Tle();Ile();Fle();Vle();tce();ace();sce();uce();cce();hce();gce();yce();xce();bce();wce();Ece();Sce();Cce();Ace();Lce();Bce();Vce();$ce();Gce();Zce();Kce();ehe();rhe();ihe();ahe();uhe();lhe();che();hhe();phe();mhe();_he();xhe();bhe();whe();Ehe();She();The();Ihe();Che();Ahe();Phe();Mhe();Ohe();Rhe();Dhe();khe();zhe();Yhe();afe();sfe();lfe();cfe();ffe();pfe();dfe();gfe();yfe();_fe();xfe();Efe();Tfe();Ife();Afe();Pfe();Mfe();Dfe();Lfe();kfe();Ffe();jfe();Bfe();Ufe();Vfe();$fe();Wfe();Hfe();Zfe();Kfe();Xfe();Yfe();Jfe();Qfe();npe();ipe();lpe();cpe();ppe();dpe();vpe();_pe();xpe();bpe();wpe();Npe();Fpe();zpe();jpe();Bpe();Hpe();Kpe();Ype();tde();nde();ade();ude();cde();fde();_de();xde();bde();wde();Cde();Ade();Pde();Mde();Rde();Dde();Lde();kde();Nde();Fde();zde();jde();Bde();Vde();Gde();Hde();Zde();Kde();Xde();Yde();Jde();Qde();eve();ave();cve();Pve();Mve();Ove();Rve();Dve();Lve();kve();Nve();zve();jve();Hve();Zve();Kve();Xve();Yve();Jve();Qve();eme();rme();nme();ame();sme();ume();lme();cme();hme();fme();pme();dme();vme();Cme();Ome();Dme();Lme();Nme();Fme();jme();Ume();$me();Wme();Hme();Kme();Xme();Qme();ege();rge();ige();hge();mge();Ege();Age();jge();Hge();Kge();iye();aye();sye();yye();Tye();T_e();A_e();P_e();M_e();O_e();k_e();j_e();B_e();U_e.exports=lE()});var G_e=S((uir,$_e)=>{"use strict";$_e.exports=V_e()});var SB=S((lir,W_e)=>{"use strict";W_e.exports=function(t,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return t.apply(r,i)}}});var oo=S((cir,K_e)=>{"use strict";var Cqt=SB(),xp=Object.prototype.toString;function CB(e){return xp.call(e)==="[object Array]"}function TB(e){return typeof e=="undefined"}function Aqt(e){return e!==null&&!TB(e)&&e.constructor!==null&&!TB(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function qqt(e){return xp.call(e)==="[object ArrayBuffer]"}function Pqt(e){return typeof FormData!="undefined"&&e instanceof FormData}function Mqt(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function Oqt(e){return typeof e=="string"}function Rqt(e){return typeof e=="number"}function H_e(e){return e!==null&&typeof e=="object"}function wI(e){if(xp.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function Dqt(e){return xp.call(e)==="[object Date]"}function Lqt(e){return xp.call(e)==="[object File]"}function kqt(e){return xp.call(e)==="[object Blob]"}function Z_e(e){return xp.call(e)==="[object Function]"}function Nqt(e){return H_e(e)&&Z_e(e.pipe)}function Fqt(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function zqt(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function jqt(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function AB(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),CB(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function IB(){var e={};function t(i,a){wI(e[a])&&wI(i)?e[a]=IB(e[a],i):wI(i)?e[a]=IB({},i):CB(i)?e[a]=i.slice():e[a]=i}for(var r=0,n=arguments.length;r<n;r++)AB(arguments[r],t);return e}function Bqt(e,t,r){return AB(t,function(i,a){r&&typeof i=="function"?e[a]=Cqt(i,r):e[a]=i}),e}function Uqt(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}K_e.exports={isArray:CB,isArrayBuffer:qqt,isBuffer:Aqt,isFormData:Pqt,isArrayBufferView:Mqt,isString:Oqt,isNumber:Rqt,isObject:H_e,isPlainObject:wI,isUndefined:TB,isDate:Dqt,isFile:Lqt,isBlob:kqt,isFunction:Z_e,isStream:Nqt,isURLSearchParams:Fqt,isStandardBrowserEnv:jqt,forEach:AB,merge:IB,extend:Bqt,trim:zqt,stripBOM:Uqt}});var qB=S((hir,Y_e)=>{"use strict";var ym=oo();function X_e(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Y_e.exports=function(t,r,n){if(!r)return t;var i;if(n)i=n(r);else if(ym.isURLSearchParams(r))i=r.toString();else{var a=[];ym.forEach(r,function(g,w){g===null||typeof g=="undefined"||(ym.isArray(g)?w=w+"[]":g=[g],ym.forEach(g,function(q){ym.isDate(q)?q=q.toISOString():ym.isObject(q)&&(q=JSON.stringify(q)),a.push(X_e(w)+"="+X_e(q))}))}),i=a.join("&")}if(i){var h=t.indexOf("#");h!==-1&&(t=t.slice(0,h)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}});var Q_e=S((fir,J_e)=>{"use strict";var Vqt=oo();function EI(){this.handlers=[]}EI.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};EI.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};EI.prototype.forEach=function(t){Vqt.forEach(this.handlers,function(n){n!==null&&t(n)})};J_e.exports=EI});var t0e=S((pir,e0e)=>{"use strict";var $qt=oo();e0e.exports=function(t,r){$qt.forEach(t,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(t[r]=i,delete t[a])})}});var PB=S((dir,r0e)=>{"use strict";r0e.exports=function(t,r,n,i,a){return t.config=r,n&&(t.code=n),t.request=i,t.response=a,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}});var MB=S((vir,n0e)=>{"use strict";var Gqt=PB();n0e.exports=function(t,r,n,i,a){var h=new Error(t);return Gqt(h,r,n,i,a)}});var a0e=S((mir,i0e)=>{"use strict";var Wqt=MB();i0e.exports=function(t,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):r(Wqt("Request failed with status code "+n.status,n.config,null,n.request,n))}});var s0e=S((gir,o0e)=>{"use strict";var SI=oo();o0e.exports=SI.isStandardBrowserEnv()?function(){return{write:function(r,n,i,a,h,p){var g=[];g.push(r+"="+encodeURIComponent(n)),SI.isNumber(i)&&g.push("expires="+new Date(i).toGMTString()),SI.isString(a)&&g.push("path="+a),SI.isString(h)&&g.push("domain="+h),p===!0&&g.push("secure"),document.cookie=g.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var l0e=S((yir,u0e)=>{"use strict";u0e.exports=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}});var h0e=S((_ir,c0e)=>{"use strict";c0e.exports=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}});var p0e=S((xir,f0e)=>{"use strict";var Hqt=l0e(),Zqt=h0e();f0e.exports=function(t,r){return t&&!Hqt(r)?Zqt(t,r):r}});var v0e=S((bir,d0e)=>{"use strict";var OB=oo(),Kqt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];d0e.exports=function(t){var r={},n,i,a;return t&&OB.forEach(t.split(`
`),function(p){if(a=p.indexOf(":"),n=OB.trim(p.substr(0,a)).toLowerCase(),i=OB.trim(p.substr(a+1)),n){if(r[n]&&Kqt.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r}});var y0e=S((wir,g0e)=>{"use strict";var m0e=oo();g0e.exports=m0e.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(a){var h=a;return t&&(r.setAttribute("href",h),h=r.href),r.setAttribute("href",h),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(h){var p=m0e.isString(h)?i(h):h;return p.protocol===n.protocol&&p.host===n.host}}():function(){return function(){return!0}}()});var Ix=S((Eir,_0e)=>{"use strict";function RB(e){this.message=e}RB.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};RB.prototype.__CANCEL__=!0;_0e.exports=RB});var LB=S((Sir,x0e)=>{"use strict";var TI=oo(),Xqt=a0e(),Yqt=s0e(),Jqt=qB(),Qqt=p0e(),ePt=v0e(),tPt=y0e(),DB=MB(),rPt=Cx(),nPt=Ix();x0e.exports=function(t){return new Promise(function(n,i){var a=t.data,h=t.headers,p=t.responseType,g;function w(){t.cancelToken&&t.cancelToken.unsubscribe(g),t.signal&&t.signal.removeEventListener("abort",g)}TI.isFormData(a)&&delete h["Content-Type"];var E=new XMLHttpRequest;if(t.auth){var q=t.auth.username||"",P=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";h.Authorization="Basic "+btoa(q+":"+P)}var k=Qqt(t.baseURL,t.url);E.open(t.method.toUpperCase(),Jqt(k,t.params,t.paramsSerializer),!0),E.timeout=t.timeout;function W(){if(E){var $="getAllResponseHeaders"in E?ePt(E.getAllResponseHeaders()):null,V=!p||p==="text"||p==="json"?E.responseText:E.response,Z={data:V,status:E.status,statusText:E.statusText,headers:$,config:t,request:E};Xqt(function(se){n(se),w()},function(se){i(se),w()},Z),E=null}}if("onloadend"in E?E.onloadend=W:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(W)},E.onabort=function(){E&&(i(DB("Request aborted",t,"ECONNABORTED",E)),E=null)},E.onerror=function(){i(DB("Network Error",t,null,E)),E=null},E.ontimeout=function(){var V=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",Z=t.transitional||rPt.transitional;t.timeoutErrorMessage&&(V=t.timeoutErrorMessage),i(DB(V,t,Z.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",E)),E=null},TI.isStandardBrowserEnv()){var Q=(t.withCredentials||tPt(k))&&t.xsrfCookieName?Yqt.read(t.xsrfCookieName):void 0;Q&&(h[t.xsrfHeaderName]=Q)}"setRequestHeader"in E&&TI.forEach(h,function(V,Z){typeof a=="undefined"&&Z.toLowerCase()==="content-type"?delete h[Z]:E.setRequestHeader(Z,V)}),TI.isUndefined(t.withCredentials)||(E.withCredentials=!!t.withCredentials),p&&p!=="json"&&(E.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&E.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&E.upload&&E.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(g=function($){E&&(i(!$||$&&$.type?new nPt("canceled"):$),E.abort(),E=null)},t.cancelToken&&t.cancelToken.subscribe(g),t.signal&&(t.signal.aborted?g():t.signal.addEventListener("abort",g))),a||(a=null),E.send(a)})}});var Cx=S((Tir,E0e)=>{"use strict";var zi=oo(),b0e=t0e(),iPt=PB(),aPt={"Content-Type":"application/x-www-form-urlencoded"};function w0e(e,t){!zi.isUndefined(e)&&zi.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function oPt(){var e;return typeof XMLHttpRequest!="undefined"?e=LB():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(e=LB()),e}function sPt(e,t,r){if(zi.isString(e))try{return(t||JSON.parse)(e),zi.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var II={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:oPt(),transformRequest:[function(t,r){return b0e(r,"Accept"),b0e(r,"Content-Type"),zi.isFormData(t)||zi.isArrayBuffer(t)||zi.isBuffer(t)||zi.isStream(t)||zi.isFile(t)||zi.isBlob(t)?t:zi.isArrayBufferView(t)?t.buffer:zi.isURLSearchParams(t)?(w0e(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):zi.isObject(t)||r&&r["Content-Type"]==="application/json"?(w0e(r,"application/json"),sPt(t)):t}],transformResponse:[function(t){var r=this.transitional||II.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&zi.isString(t)&&t.length)try{return JSON.parse(t)}catch(h){if(a)throw h.name==="SyntaxError"?iPt(h,this,"E_JSON_PARSE"):h}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};zi.forEach(["delete","get","head"],function(t){II.headers[t]={}});zi.forEach(["post","put","patch"],function(t){II.headers[t]=zi.merge(aPt)});E0e.exports=II});var T0e=S((Iir,S0e)=>{"use strict";var uPt=oo(),lPt=Cx();S0e.exports=function(t,r,n){var i=this||lPt;return uPt.forEach(n,function(h){t=h.call(i,t,r)}),t}});var kB=S((Cir,I0e)=>{"use strict";I0e.exports=function(t){return!!(t&&t.__CANCEL__)}});var q0e=S((Air,A0e)=>{"use strict";var C0e=oo(),NB=T0e(),cPt=kB(),hPt=Cx(),fPt=Ix();function FB(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new fPt("canceled")}A0e.exports=function(t){FB(t),t.headers=t.headers||{},t.data=NB.call(t,t.data,t.headers,t.transformRequest),t.headers=C0e.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),C0e.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var r=t.adapter||hPt.adapter;return r(t).then(function(i){return FB(t),i.data=NB.call(t,i.data,i.headers,t.transformResponse),i},function(i){return cPt(i)||(FB(t),i&&i.response&&(i.response.data=NB.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})}});var zB=S((qir,P0e)=>{"use strict";var Lo=oo();P0e.exports=function(t,r){r=r||{};var n={};function i(E,q){return Lo.isPlainObject(E)&&Lo.isPlainObject(q)?Lo.merge(E,q):Lo.isPlainObject(q)?Lo.merge({},q):Lo.isArray(q)?q.slice():q}function a(E){if(Lo.isUndefined(r[E])){if(!Lo.isUndefined(t[E]))return i(void 0,t[E])}else return i(t[E],r[E])}function h(E){if(!Lo.isUndefined(r[E]))return i(void 0,r[E])}function p(E){if(Lo.isUndefined(r[E])){if(!Lo.isUndefined(t[E]))return i(void 0,t[E])}else return i(void 0,r[E])}function g(E){if(E in r)return i(t[E],r[E]);if(E in t)return i(void 0,t[E])}var w={url:h,method:h,data:h,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:g};return Lo.forEach(Object.keys(t).concat(Object.keys(r)),function(q){var P=w[q]||a,k=P(q);Lo.isUndefined(k)&&P!==g||(n[q]=k)}),n}});var jB=S((Pir,M0e)=>{M0e.exports={version:"0.24.0"}});var D0e=S((Mir,R0e)=>{"use strict";var pPt=jB().version,BB={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){BB[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var O0e={};BB.transitional=function(t,r,n){function i(a,h){return"[Axios v"+pPt+"] Transitional option '"+a+"'"+h+(n?". "+n:"")}return function(a,h,p){if(t===!1)throw new Error(i(h," has been removed"+(r?" in "+r:"")));return r&&!O0e[h]&&(O0e[h]=!0,console.warn(i(h," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,h,p):!0}};function dPt(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-->0;){var a=n[i],h=t[a];if(h){var p=e[a],g=p===void 0||h(p,a,e);if(g!==!0)throw new TypeError("option "+a+" must be "+g);continue}if(r!==!0)throw Error("Unknown option "+a)}}R0e.exports={assertOptions:dPt,validators:BB}});var j0e=S((Oir,z0e)=>{"use strict";var N0e=oo(),vPt=qB(),L0e=Q_e(),k0e=q0e(),CI=zB(),F0e=D0e(),_m=F0e.validators;function Ax(e){this.defaults=e,this.interceptors={request:new L0e,response:new L0e}}Ax.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=CI(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&F0e.assertOptions(r,{silentJSONParsing:_m.transitional(_m.boolean),forcedJSONParsing:_m.transitional(_m.boolean),clarifyTimeoutError:_m.transitional(_m.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(t)===!1||(i=i&&P.synchronous,n.unshift(P.fulfilled,P.rejected))});var a=[];this.interceptors.response.forEach(function(P){a.push(P.fulfilled,P.rejected)});var h;if(!i){var p=[k0e,void 0];for(Array.prototype.unshift.apply(p,n),p=p.concat(a),h=Promise.resolve(t);p.length;)h=h.then(p.shift(),p.shift());return h}for(var g=t;n.length;){var w=n.shift(),E=n.shift();try{g=w(g)}catch(q){E(q);break}}try{h=k0e(g)}catch(q){return Promise.reject(q)}for(;a.length;)h=h.then(a.shift(),a.shift());return h};Ax.prototype.getUri=function(t){return t=CI(this.defaults,t),vPt(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};N0e.forEach(["delete","get","head","options"],function(t){Ax.prototype[t]=function(r,n){return this.request(CI(n||{},{method:t,url:r,data:(n||{}).data}))}});N0e.forEach(["post","put","patch"],function(t){Ax.prototype[t]=function(r,n,i){return this.request(CI(i||{},{method:t,url:r,data:n}))}});z0e.exports=Ax});var U0e=S((Rir,B0e)=>{"use strict";var mPt=Ix();function xm(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(i){t=i});var r=this;this.promise.then(function(n){if(r._listeners){var i,a=r._listeners.length;for(i=0;i<a;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,a=new Promise(function(h){r.subscribe(h),i=h}).then(n);return a.cancel=function(){r.unsubscribe(i)},a},e(function(i){r.reason||(r.reason=new mPt(i),t(r.reason))})}xm.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};xm.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};xm.prototype.unsubscribe=function(t){if(this._listeners){var r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}};xm.source=function(){var t,r=new xm(function(i){t=i});return{token:r,cancel:t}};B0e.exports=xm});var $0e=S((Dir,V0e)=>{"use strict";V0e.exports=function(t){return function(n){return t.apply(null,n)}}});var W0e=S((Lir,G0e)=>{"use strict";G0e.exports=function(t){return typeof t=="object"&&t.isAxiosError===!0}});var K0e=S((kir,UB)=>{"use strict";var H0e=oo(),gPt=SB(),AI=j0e(),yPt=zB(),_Pt=Cx();function Z0e(e){var t=new AI(e),r=gPt(AI.prototype.request,t);return H0e.extend(r,AI.prototype,t),H0e.extend(r,t),r.create=function(i){return Z0e(yPt(e,i))},r}var qu=Z0e(_Pt);qu.Axios=AI;qu.Cancel=Ix();qu.CancelToken=U0e();qu.isCancel=kB();qu.VERSION=jB().version;qu.all=function(t){return Promise.all(t)};qu.spread=$0e();qu.isAxiosError=W0e();UB.exports=qu;UB.exports.default=qu});var Y0e=S((Nir,X0e)=>{X0e.exports=K0e()});var Q0e=S((VB,$B)=>{(function(e,t){typeof VB=="object"&&typeof $B!="undefined"?$B.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.maplibregl=t())})(VB,function(){"use strict";var e={},t={};function r(i,a,h){if(t[i]=h,i==="index"){var p="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",g={};return t.shared(g),t.index(e,g),typeof window!="undefined"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([p],{type:"text/javascript"}))),e}}r("shared",["exports"],function(i){"use strict";function a(u,s,l,f){return new(l||(l=Promise))(function(m,x){function b(O){try{C(f.next(O))}catch(R){x(R)}}function T(O){try{C(f.throw(O))}catch(R){x(R)}}function C(O){var R;O.done?m(O.value):(R=O.value,R instanceof l?R:new l(function(L){L(R)})).then(b,T)}C((f=f.apply(u,s||[])).next())})}function h(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}typeof SuppressedError=="function"&&SuppressedError;var p=g;function g(u,s){this.x=u,this.y=s}g.prototype={clone:function(){return new g(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,s){return this.clone()._rotateAround(u,s)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var s=u.x-this.x,l=u.y-this.y;return s*s+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,s){return Math.atan2(this.x*s-this.y*u,this.x*u+this.y*s)},_matMult:function(u){var s=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=s,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var s=Math.cos(u),l=Math.sin(u),f=l*this.x+s*this.y;return this.x=s*this.x-l*this.y,this.y=f,this},_rotateAround:function(u,s){var l=Math.cos(u),f=Math.sin(u),m=s.y+f*(this.x-s.x)+l*(this.y-s.y);return this.x=s.x+l*(this.x-s.x)-f*(this.y-s.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},g.convert=function(u){return u instanceof g?u:Array.isArray(u)?new g(u[0],u[1]):u};var w=h(p),E=q;function q(u,s,l,f){this.cx=3*u,this.bx=3*(l-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(f-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=s,this.p2x=l,this.p2y=f}q.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,s){if(s===void 0&&(s=1e-6),u<0)return 0;if(u>1)return 1;for(var l=u,f=0;f<8;f++){var m=this.sampleCurveX(l)-u;if(Math.abs(m)<s)return l;var x=this.sampleCurveDerivativeX(l);if(Math.abs(x)<1e-6)break;l-=m/x}var b=0,T=1;for(l=u,f=0;f<20&&(m=this.sampleCurveX(l),!(Math.abs(m-u)<s));f++)u>m?b=l:T=l,l=.5*(T-b)+b;return l},solve:function(u,s){return this.sampleCurveY(this.solveCurveX(u,s))}};var P=h(E);let k,W;function Q(){return k==null&&(k=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),k}function $(){if(W==null&&(W=!1,Q())){let s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let f=0;f<5*5;f++){let m=4*f;s.fillStyle=`rgb(${m},${m+1},${m+2})`,s.fillRect(f%5,Math.floor(f/5),1,1)}let l=s.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&l[f]!==f){W=!0;break}}}return W||!1}function V(u,s,l,f){let m=new P(u,s,l,f);return x=>m.solve(x)}let Z=V(.25,.1,.25,1);function te(u,s,l){return Math.min(l,Math.max(s,u))}function se(u,s,l){let f=l-s,m=((u-s)%f+f)%f+s;return m===s?l:m}function Ie(u,...s){for(let l of s)for(let f in l)u[f]=l[f];return u}let qe=1;function Ae(u,s,l){let f={};for(let m in u)f[m]=s.call(this,u[m],m,u);return f}function Ue(u,s,l){let f={};for(let m in u)s.call(this,u[m],m,u)&&(f[m]=u[m]);return f}function Le(u){return Array.isArray(u)?u.map(Le):typeof u=="object"&&u?Ae(u,Le):u}let $t={};function Rt(u){$t[u]||(typeof console!="undefined"&&console.warn(u),$t[u]=!0)}function ir(u,s,l){return(l.y-u.y)*(s.x-u.x)>(s.y-u.y)*(l.x-u.x)}function Xr(u){return typeof WorkerGlobalScope!="undefined"&&u!==void 0&&u instanceof WorkerGlobalScope}let Pn=null;function sr(u){return typeof ImageBitmap!="undefined"&&u instanceof ImageBitmap}let lr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function cr(u,s,l,f,m){return a(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let x=new VideoFrame(u,{timestamp:0});try{let b=x==null?void 0:x.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);let T=b.startsWith("BGR"),C=new Uint8ClampedArray(f*m*4);if(yield x.copyTo(C,function(O,R,L,z,U){let H=4*Math.max(-R,0),X=(Math.max(0,L)-L)*z*4+H,ne=4*z,ue=Math.max(0,R),xe=Math.max(0,L);return{rect:{x:ue,y:xe,width:Math.min(O.width,R+z)-ue,height:Math.min(O.height,L+U)-xe},layout:[{offset:X,stride:ne}]}}(u,s,l,f,m)),T)for(let O=0;O<C.length;O+=4){let R=C[O];C[O]=C[O+2],C[O+2]=R}return C}finally{x.close()}})}let Zt,rn,nn="AbortError";function va(){return new Error(nn)}let Ei={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function $n(u){return Ei.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))]}let ti="global-dispatcher";class Dt extends Error{constructor(s,l,f,m){super(`AJAXError: ${l} (${s}): ${f}`),this.status=s,this.statusText=l,this.url=f,this.body=m}}let vn=()=>Xr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ri=function(u,s){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){let f=$n(u.url);if(f)return f(u,s);if(Xr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,targetMapId:ti},s)}if(!(/^file:/.test(l=u.url)||/^file:/.test(vn())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(f,m){return a(this,void 0,void 0,function*(){let x=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:vn(),signal:m.signal});f.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");let b=yield fetch(x);if(!b.ok){let O=yield b.blob();throw new Dt(b.status,b.statusText,f.url,O)}let T;T=f.type==="arrayBuffer"||f.type==="image"?b.arrayBuffer():f.type==="json"?b.json():b.text();let C=yield T;if(m.signal.aborted)throw va();return{data:C,cacheControl:b.headers.get("Cache-Control"),expires:b.headers.get("Expires")}})}(u,s);if(Xr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,mustQueue:!0,targetMapId:ti},s)}var l;return function(f,m){return new Promise((x,b)=>{var T;let C=new XMLHttpRequest;C.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(C.responseType="arraybuffer");for(let O in f.headers)C.setRequestHeader(O,f.headers[O]);f.type==="json"&&(C.responseType="text",!((T=f.headers)===null||T===void 0)&&T.Accept||C.setRequestHeader("Accept","application/json")),C.withCredentials=f.credentials==="include",C.onerror=()=>{b(new Error(C.statusText))},C.onload=()=>{if(!m.signal.aborted)if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let O=C.response;if(f.type==="json")try{O=JSON.parse(C.response)}catch(R){return void b(R)}x({data:O,cacheControl:C.getResponseHeader("Cache-Control"),expires:C.getResponseHeader("Expires")})}else{let O=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});b(new Dt(C.status,C.statusText,f.url,O))}},m.signal.addEventListener("abort",()=>{C.abort(),b(va())}),C.send(f.body)})}(u,s)};function an(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;let s=new URL(u),l=window.location;return s.protocol===l.protocol&&s.host===l.host}function ws(u,s,l){l[u]&&l[u].indexOf(s)!==-1||(l[u]=l[u]||[],l[u].push(s))}function xn(u,s,l){if(l&&l[u]){let f=l[u].indexOf(s);f!==-1&&l[u].splice(f,1)}}class ka{constructor(s,l={}){Ie(this,l),this.type=s}}class Gn extends ka{constructor(s,l={}){super("error",Ie({error:s},l))}}class Es{on(s,l){return this._listeners=this._listeners||{},ws(s,l,this._listeners),this}off(s,l){return xn(s,l,this._listeners),xn(s,l,this._oneTimeListeners),this}once(s,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},ws(s,l,this._oneTimeListeners),this):new Promise(f=>this.once(s,f))}fire(s,l){typeof s=="string"&&(s=new ka(s,l||{}));let f=s.type;if(this.listens(f)){s.target=this;let m=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(let T of m)T.call(this,s);let x=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(let T of x)xn(f,T,this._oneTimeListeners),T.call(this,s);let b=this._eventedParent;b&&(Ie(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(s))}else s instanceof Gn&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,l){return this._eventedParent=s,this._eventedParentData=l,this}}var Ee={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let zo=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ks(u,s){let l={};for(let f in u)f!=="ref"&&(l[f]=u[f]);return zo.forEach(f=>{f in s&&(l[f]=s[f])}),l}function Kt(u,s){if(Array.isArray(u)){if(!Array.isArray(s)||u.length!==s.length)return!1;for(let l=0;l<u.length;l++)if(!Kt(u[l],s[l]))return!1;return!0}if(typeof u=="object"&&u!==null&&s!==null){if(typeof s!="object"||Object.keys(u).length!==Object.keys(s).length)return!1;for(let l in u)if(!Kt(u[l],s[l]))return!1;return!0}return u===s}function Cr(u,s){u.push(s)}function Xs(u,s,l){Cr(l,{command:"addSource",args:[u,s[u]]})}function ma(u,s,l){Cr(s,{command:"removeSource",args:[u]}),l[u]=!0}function go(u,s,l,f){ma(u,l,f),Xs(u,s,l)}function Ss(u,s,l){let f;for(f in u[l])if(Object.prototype.hasOwnProperty.call(u[l],f)&&f!=="data"&&!Kt(u[l][f],s[l][f]))return!1;for(f in s[l])if(Object.prototype.hasOwnProperty.call(s[l],f)&&f!=="data"&&!Kt(u[l][f],s[l][f]))return!1;return!0}function $i(u,s,l,f,m,x){u=u||{},s=s||{};for(let b in u)Object.prototype.hasOwnProperty.call(u,b)&&(Kt(u[b],s[b])||l.push({command:x,args:[f,b,s[b],m]}));for(let b in s)Object.prototype.hasOwnProperty.call(s,b)&&!Object.prototype.hasOwnProperty.call(u,b)&&(Kt(u[b],s[b])||l.push({command:x,args:[f,b,s[b],m]}))}function Ys(u){return u.id}function Js(u,s){return u[s.id]=s,u}class Fe{constructor(s,l,f,m){this.message=(s?`${s}: `:"")+f,m&&(this.identifier=m),l!=null&&l.__line__&&(this.line=l.__line__)}}function ga(u,...s){for(let l of s)for(let f in l)u[f]=l[f];return u}class Wn extends Error{constructor(s,l){super(l),this.message=l,this.key=s}}class ni{constructor(s,l=[]){this.parent=s,this.bindings={};for(let[f,m]of l)this.bindings[f]=m}concat(s){return new ni(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}let Gi={kind:"null"},ze={kind:"number"},Ct={kind:"string"},ft={kind:"boolean"},ii={kind:"color"},Vr={kind:"object"},Tt={kind:"value"},jo={kind:"collator"},Ts={kind:"formatted"},Qs={kind:"padding"},Bo={kind:"resolvedImage"},oe={kind:"variableAnchorOffsetCollection"};function B(u,s){return{kind:"array",itemType:u,N:s}}function j(u){if(u.kind==="array"){let s=j(u.itemType);return typeof u.N=="number"?`array<${s}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${s}>`}return u.kind}let J=[Gi,ze,Ct,ft,ii,Ts,Vr,B(Tt),Qs,Bo,oe];function ie(u,s){if(s.kind==="error")return null;if(u.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!ie(u.itemType,s.itemType))&&(typeof u.N!="number"||u.N===s.N))return null}else{if(u.kind===s.kind)return null;if(u.kind==="value"){for(let l of J)if(!ie(l,s))return null}}return`Expected ${j(u)} but found ${j(s)} instead.`}function de(u,s){return s.some(l=>l.kind===u.kind)}function me(u,s){return s.some(l=>l==="null"?u===null:l==="array"?Array.isArray(u):l==="object"?u&&!Array.isArray(u)&&typeof u=="object":l===typeof u)}function _e(u,s){return u.kind==="array"&&s.kind==="array"?u.itemType.kind===s.itemType.kind&&typeof u.N=="number":u.kind===s.kind}let he=.96422,Te=.82521,Me=4/29,we=6/29,je=3*we*we,lt=we*we*we,ht=Math.PI/180,Qt=180/Math.PI;function At(u){return(u%=360)<0&&(u+=360),u}function er([u,s,l,f]){let m,x,b=bn((.2225045*(u=Ut(u))+.7168786*(s=Ut(s))+.0606169*(l=Ut(l)))/1);u===s&&s===l?m=x=b:(m=bn((.4360747*u+.3850649*s+.1430804*l)/he),x=bn((.0139322*u+.0971045*s+.7141733*l)/Te));let T=116*b-16;return[T<0?0:T,500*(m-b),200*(b-x),f]}function Ut(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function bn(u){return u>lt?Math.pow(u,1/3):u/je+Me}function Yr([u,s,l,f]){let m=(u+16)/116,x=isNaN(s)?m:m+s/500,b=isNaN(l)?m:m-l/200;return m=1*fr(m),x=he*fr(x),b=Te*fr(b),[Lt(3.1338561*x-1.6168667*m-.4906146*b),Lt(-.9787684*x+1.9161415*m+.033454*b),Lt(.0719453*x-.2289914*m+1.4052427*b),f]}function Lt(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function fr(u){return u>we?u*u*u:je*(u-Me)}function jr(u){return parseInt(u.padEnd(2,u),16)/255}function Rn(u,s){return Hn(s?u/100:u,0,1)}function Hn(u,s,l){return Math.min(Math.max(s,u),l)}function Si(u){return!u.some(Number.isNaN)}let nc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class pr{constructor(s,l,f,m=1,x=!0){this.r=s,this.g=l,this.b=f,this.a=m,x||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[s,l,f,m]))}static parse(s){if(s instanceof pr)return s;if(typeof s!="string")return;let l=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];let m=nc[f];if(m){let[b,T,C]=m;return[b/255,T/255,C/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){let b=f.length<6?1:2,T=1;return[jr(f.slice(T,T+=b)),jr(f.slice(T,T+=b)),jr(f.slice(T,T+=b)),jr(f.slice(T,T+b)||"ff")]}if(f.startsWith("rgb")){let b=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){let[T,C,O,R,L,z,U,H,X,ne,ue,xe]=b,pe=[R||" ",U||" ",ne].join("");if(pe==="  "||pe==="  /"||pe===",,"||pe===",,,"){let ye=[O,z,X].join(""),Se=ye==="%%%"?100:ye===""?255:0;if(Se){let Re=[Hn(+C/Se,0,1),Hn(+L/Se,0,1),Hn(+H/Se,0,1),ue?Rn(+ue,xe):1];if(Si(Re))return Re}}return}}let x=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){let[b,T,C,O,R,L,z,U,H]=x,X=[C||" ",R||" ",z].join("");if(X==="  "||X==="  /"||X===",,"||X===",,,"){let ne=[+T,Hn(+O,0,100),Hn(+L,0,100),U?Rn(+U,H):1];if(Si(ne))return function([ue,xe,pe,ye]){function Se(Re){let Je=(Re+ue/30)%12,pt=xe*Math.min(pe,1-pe);return pe-pt*Math.max(-1,Math.min(Je-3,9-Je,1))}return ue=At(ue),xe/=100,pe/=100,[Se(0),Se(8),Se(4),ye]}(ne)}}}(s);return l?new pr(...l,!1):void 0}get rgb(){let{r:s,g:l,b:f,a:m}=this,x=m||1/0;return this.overwriteGetter("rgb",[s/x,l/x,f/x,m])}get hcl(){return this.overwriteGetter("hcl",function(s){let[l,f,m,x]=er(s),b=Math.sqrt(f*f+m*m);return[Math.round(1e4*b)?At(Math.atan2(m,f)*Qt):NaN,b,l,x]}(this.rgb))}get lab(){return this.overwriteGetter("lab",er(this.rgb))}overwriteGetter(s,l){return Object.defineProperty(this,s,{value:l}),l}toString(){let[s,l,f,m]=this.rgb;return`rgba(${[s,l,f].map(x=>Math.round(255*x)).join(",")},${m})`}}pr.black=new pr(0,0,0,1),pr.white=new pr(1,1,1,1),pr.transparent=new pr(0,0,0,0),pr.red=new pr(1,0,0,1);class fg{constructor(s,l,f){this.sensitivity=s?l?"variant":"case":l?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,l){return this.collator.compare(s,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class pg{constructor(s,l,f,m,x){this.text=s,this.image=l,this.scale=f,this.fontStack=m,this.textColor=x}}class ya{constructor(s){this.sections=s}static fromString(s){return new ya([new pg(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof ya?s:ya.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class _a{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof _a)return s;if(typeof s=="number")return new _a([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(let l of s)if(typeof l!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]];}return new _a(s)}}toString(){return JSON.stringify(this.values)}}let rq=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Na{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Na)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let l=0;l<s.length;l+=2){let f=s[l],m=s[l+1];if(typeof f!="string"||!rq.has(f)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new Na(s)}}toString(){return JSON.stringify(this.values)}}class xa{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new xa({name:s,available:!1}):null}}function ic(u,s,l,f){return typeof u=="number"&&u>=0&&u<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof l=="number"&&l>=0&&l<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[u,s,l,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[u,s,l,f]:[u,s,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Hu(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof pr||u instanceof fg||u instanceof ya||u instanceof _a||u instanceof Na||u instanceof xa)return!0;if(Array.isArray(u)){for(let s of u)if(!Hu(s))return!1;return!0}if(typeof u=="object"){for(let s in u)if(!Hu(u[s]))return!1;return!0}return!1}function wn(u){if(u===null)return Gi;if(typeof u=="string")return Ct;if(typeof u=="boolean")return ft;if(typeof u=="number")return ze;if(u instanceof pr)return ii;if(u instanceof fg)return jo;if(u instanceof ya)return Ts;if(u instanceof _a)return Qs;if(u instanceof Na)return oe;if(u instanceof xa)return Bo;if(Array.isArray(u)){let s=u.length,l;for(let f of u){let m=wn(f);if(l){if(l===m)continue;l=Tt;break}l=m}return B(l||Tt,s)}return Vr}function ef(u){let s=typeof u;return u===null?"":s==="string"||s==="number"||s==="boolean"?String(u):u instanceof pr||u instanceof ya||u instanceof _a||u instanceof Na||u instanceof xa?u.toString():JSON.stringify(u)}class yo{constructor(s,l){this.type=s,this.value=l}static parse(s,l){if(s.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!Hu(s[1]))return l.error("invalid value");let f=s[1],m=wn(f),x=l.expectedType;return m.kind!=="array"||m.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(m=x),new yo(m,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class mn{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}let kp={string:Ct,number:ze,boolean:ft,object:Vr};class _o{constructor(s,l){this.type=s,this.args=l}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");let f,m=1,x=s[0];if(x==="array"){let T,C;if(s.length>2){let O=s[1];if(typeof O!="string"||!(O in kp)||O==="object")return l.error("The item type argument of \"array\" must be one of string, number, boolean",1);T=kp[O],m++}else T=Tt;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return l.error("The length argument to \"array\" must be a positive integer literal",2);C=s[2],m++}f=B(T,C)}else{if(!kp[x])throw new Error(`Types doesn't contain name = ${x}`);f=kp[x]}let b=[];for(;m<s.length;m++){let T=l.parse(s[m],m,Tt);if(!T)return null;b.push(T)}return new _o(f,b)}evaluate(s){for(let l=0;l<this.args.length;l++){let f=this.args[l].evaluate(s);if(!ie(this.type,wn(f)))return f;if(l===this.args.length-1)throw new mn(`Expected value to be of type ${j(this.type)}, but found ${j(wn(f))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}let dg={"to-boolean":ft,"to-color":ii,"to-number":ze,"to-string":Ct};class xo{constructor(s,l){this.type=s,this.args=l}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");let f=s[0];if(!dg[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&s.length!==2)return l.error("Expected one argument.");let m=dg[f],x=[];for(let b=1;b<s.length;b++){let T=l.parse(s[b],b,Tt);if(!T)return null;x.push(T)}return new xo(m,x)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let l,f;for(let m of this.args){if(l=m.evaluate(s),f=null,l instanceof pr)return l;if(typeof l=="string"){let x=s.parseColor(l);if(x)return x}else if(Array.isArray(l)&&(f=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:ic(l[0],l[1],l[2],l[3]),!f))return new pr(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new mn(f||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(let f of this.args){l=f.evaluate(s);let m=_a.parse(l);if(m)return m}throw new mn(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(let f of this.args){l=f.evaluate(s);let m=Na.parse(l);if(m)return m}throw new mn(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(let f of this.args){if(l=f.evaluate(s),l===null)return 0;let m=Number(l);if(!isNaN(m))return m}throw new mn(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return ya.fromString(ef(this.args[0].evaluate(s)));case"resolvedImage":return xa.fromString(ef(this.args[0].evaluate(s)));default:return ef(this.args[0].evaluate(s));}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}let nq=["Unknown","Point","LineString","Polygon"];class Np{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?nq[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let l=this._parseColorCache[s];return l||(l=this._parseColorCache[s]=pr.parse(s)),l}}class Zu{constructor(s,l,f=[],m,x=new ni,b=[]){this.registry=s,this.path=f,this.key=f.map(T=>`[${T}]`).join(""),this.scope=x,this.errors=b,this.expectedType=m,this._isConstant=l}parse(s,l,f,m,x={}){return l?this.concat(l,f,m)._parse(s,x):this._parse(s,x)}_parse(s,l){function f(m,x,b){return b==="assert"?new _o(x,[m]):b==="coerce"?new xo(x,[m]):m}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let m=s[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let x=this.registry[m];if(x){let b=x.parse(s,this);if(!b)return null;if(this.expectedType){let T=this.expectedType,C=b.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||C.kind!=="value"){if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||C.kind!=="value"&&C.kind!=="string"){if(T.kind!=="padding"||C.kind!=="value"&&C.kind!=="number"&&C.kind!=="array"){if(T.kind!=="variableAnchorOffsetCollection"||C.kind!=="value"&&C.kind!=="array"){if(this.checkSubtype(T,C))return null}else b=f(b,T,l.typeAnnotation||"coerce");}else b=f(b,T,l.typeAnnotation||"coerce");}else b=f(b,T,l.typeAnnotation||"coerce");}else b=f(b,T,l.typeAnnotation||"assert")}if(!(b instanceof yo)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){let T=new Np;try{b=new yo(b.type,b.evaluate(T))}catch(C){return this.error(C.message),null}}return b}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof s} instead.`)}concat(s,l,f){let m=typeof s=="number"?this.path.concat(s):this.path,x=f?this.scope.concat(f):this.scope;return new Zu(this.registry,this._isConstant,m,l||null,x,this.errors)}error(s,...l){let f=`${this.key}${l.map(m=>`[${m}]`).join("")}`;this.errors.push(new Wn(f,s))}checkSubtype(s,l){let f=ie(s,l);return f&&this.error(f),f}}class eu{constructor(s,l){this.type=l.type,this.bindings=[].concat(s),this.result=l}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(let l of this.bindings)s(l[1]);s(this.result)}static parse(s,l){if(s.length<4)return l.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);let f=[];for(let x=1;x<s.length-1;x+=2){let b=s[x];if(typeof b!="string")return l.error(`Expected string, but found ${typeof b} instead.`,x);if(/[^a-zA-Z0-9_]/.test(b))return l.error("Variable names must contain only alphanumeric characters or '_'.",x);let T=l.parse(s[x+1],x+1);if(!T)return null;f.push([b,T])}let m=l.parse(s[s.length-1],s.length-1,l.expectedType,f);return m?new eu(f,m):null}outputDefined(){return this.result.outputDefined()}}class ar{constructor(s,l){this.type=l.type,this.name=s,this.boundExpression=l}static parse(s,l){if(s.length!==2||typeof s[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");let f=s[1];return l.scope.has(f)?new ar(f,l.scope.get(f)):l.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class vg{constructor(s,l,f){this.type=s,this.index=l,this.input=f}static parse(s,l){if(s.length!==3)return l.error(`Expected 2 arguments, but found ${s.length-1} instead.`);let f=l.parse(s[1],1,ze),m=l.parse(s[2],2,B(l.expectedType||Tt));return f&&m?new vg(m.type.itemType,f,m):null}evaluate(s){let l=this.index.evaluate(s),f=this.input.evaluate(s);if(l<0)throw new mn(`Array index out of bounds: ${l} < 0.`);if(l>=f.length)throw new mn(`Array index out of bounds: ${l} > ${f.length-1}.`);if(l!==Math.floor(l))throw new mn(`Array index must be an integer, but found ${l} instead.`);return f[l]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class mg{constructor(s,l){this.type=ft,this.needle=s,this.haystack=l}static parse(s,l){if(s.length!==3)return l.error(`Expected 2 arguments, but found ${s.length-1} instead.`);let f=l.parse(s[1],1,Tt),m=l.parse(s[2],2,Tt);return f&&m?de(f.type,[ft,Ct,ze,Gi,Tt])?new mg(f,m):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${j(f.type)} instead`):null}evaluate(s){let l=this.needle.evaluate(s),f=this.haystack.evaluate(s);if(!f)return!1;if(!me(l,["boolean","string","number","null"]))throw new mn(`Expected first argument to be of type boolean, string, number or null, but found ${j(wn(l))} instead.`);if(!me(f,["string","array"]))throw new mn(`Expected second argument to be of type array or string, but found ${j(wn(f))} instead.`);return f.indexOf(l)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class ac{constructor(s,l,f){this.type=ze,this.needle=s,this.haystack=l,this.fromIndex=f}static parse(s,l){if(s.length<=2||s.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);let f=l.parse(s[1],1,Tt),m=l.parse(s[2],2,Tt);if(!f||!m)return null;if(!de(f.type,[ft,Ct,ze,Gi,Tt]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${j(f.type)} instead`);if(s.length===4){let x=l.parse(s[3],3,ze);return x?new ac(f,m,x):null}return new ac(f,m)}evaluate(s){let l=this.needle.evaluate(s),f=this.haystack.evaluate(s);if(!me(l,["boolean","string","number","null"]))throw new mn(`Expected first argument to be of type boolean, string, number or null, but found ${j(wn(l))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(s)),me(f,["string"])){let x=f.indexOf(l,m);return x===-1?-1:[...f.slice(0,x)].length}if(me(f,["array"]))return f.indexOf(l,m);throw new mn(`Expected second argument to be of type array or string, but found ${j(wn(f))} instead.`)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class gg{constructor(s,l,f,m,x,b){this.inputType=s,this.type=l,this.input=f,this.cases=m,this.outputs=x,this.otherwise=b}static parse(s,l){if(s.length<5)return l.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return l.error("Expected an even number of arguments.");let f,m;l.expectedType&&l.expectedType.kind!=="value"&&(m=l.expectedType);let x={},b=[];for(let O=2;O<s.length-1;O+=2){let R=s[O],L=s[O+1];Array.isArray(R)||(R=[R]);let z=l.concat(O);if(R.length===0)return z.error("Expected at least one branch label.");for(let H of R){if(typeof H!="number"&&typeof H!="string")return z.error("Branch labels must be numbers or strings.");if(typeof H=="number"&&Math.abs(H)>Number.MAX_SAFE_INTEGER)return z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof H=="number"&&Math.floor(H)!==H)return z.error("Numeric branch labels must be integer values.");if(f){if(z.checkSubtype(f,wn(H)))return null}else f=wn(H);if(x[String(H)]!==void 0)return z.error("Branch labels must be unique.");x[String(H)]=b.length}let U=l.parse(L,O,m);if(!U)return null;m=m||U.type,b.push(U)}let T=l.parse(s[1],1,Tt);if(!T)return null;let C=l.parse(s[s.length-1],s.length-1,m);return C?T.type.kind!=="value"&&l.concat(1).checkSubtype(f,T.type)?null:new gg(f,m,T,x,b,C):null}evaluate(s){let l=this.input.evaluate(s);return(wn(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class Fp{constructor(s,l,f){this.type=s,this.branches=l,this.otherwise=f}static parse(s,l){if(s.length<4)return l.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return l.error("Expected an odd number of arguments.");let f;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);let m=[];for(let b=1;b<s.length-1;b+=2){let T=l.parse(s[b],b,ft);if(!T)return null;let C=l.parse(s[b+1],b+1,f);if(!C)return null;m.push([T,C]),f=f||C.type}let x=l.parse(s[s.length-1],s.length-1,f);if(!x)return null;if(!f)throw new Error("Can't infer output type");return new Fp(f,m,x)}evaluate(s){for(let[l,f]of this.branches)if(l.evaluate(s))return f.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(let[l,f]of this.branches)s(l),s(f);s(this.otherwise)}outputDefined(){return this.branches.every(([s,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class tf{constructor(s,l,f,m){this.type=s,this.input=l,this.beginIndex=f,this.endIndex=m}static parse(s,l){if(s.length<=2||s.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);let f=l.parse(s[1],1,Tt),m=l.parse(s[2],2,ze);if(!f||!m)return null;if(!de(f.type,[B(Tt),Ct,Tt]))return l.error(`Expected first argument to be of type array or string, but found ${j(f.type)} instead`);if(s.length===4){let x=l.parse(s[3],3,ze);return x?new tf(f.type,f,m,x):null}return new tf(f.type,f,m)}evaluate(s){let l=this.input.evaluate(s),f=this.beginIndex.evaluate(s),m;if(this.endIndex&&(m=this.endIndex.evaluate(s)),me(l,["string"]))return[...l].slice(f,m).join("");if(me(l,["array"]))return l.slice(f,m);throw new mn(`Expected first argument to be of type array or string, but found ${j(wn(l))} instead.`)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function zp(u,s){let l=u.length-1,f,m,x=0,b=l,T=0;for(;x<=b;)if(T=Math.floor((x+b)/2),f=u[T],m=u[T+1],f<=s){if(T===l||s<m)return T;x=T+1}else{if(!(f>s))throw new mn("Input is not a number.");b=T-1}return 0}class oc{constructor(s,l,f){this.type=s,this.input=l,this.labels=[],this.outputs=[];for(let[m,x]of f)this.labels.push(m),this.outputs.push(x)}static parse(s,l){if(s.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return l.error("Expected an even number of arguments.");let f=l.parse(s[1],1,ze);if(!f)return null;let m=[],x=null;l.expectedType&&l.expectedType.kind!=="value"&&(x=l.expectedType);for(let b=1;b<s.length;b+=2){let T=b===1?-1/0:s[b],C=s[b+1],O=b,R=b+1;if(typeof T!="number")return l.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",O);if(m.length&&m[m.length-1][0]>=T)return l.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",O);let L=l.parse(C,R,x);if(!L)return null;x=x||L.type,m.push([T,L])}return new oc(x,f,m)}evaluate(s){let l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(s);let m=this.input.evaluate(s);if(m<=l[0])return f[0].evaluate(s);let x=l.length;return m>=l[x-1]?f[x-1].evaluate(s):f[zp(l,m)].evaluate(s)}eachChild(s){s(this.input);for(let l of this.outputs)s(l)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function q1(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var iq=P1;function P1(u,s,l,f){this.cx=3*u,this.bx=3*(l-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(f-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=s,this.p2x=l,this.p2y=f}P1.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,s){if(s===void 0&&(s=1e-6),u<0)return 0;if(u>1)return 1;for(var l=u,f=0;f<8;f++){var m=this.sampleCurveX(l)-u;if(Math.abs(m)<s)return l;var x=this.sampleCurveDerivativeX(l);if(Math.abs(x)<1e-6)break;l-=m/x}var b=0,T=1;for(l=u,f=0;f<20&&(m=this.sampleCurveX(l),!(Math.abs(m-u)<s));f++)u>m?b=l:T=l,l=.5*(T-b)+b;return l},solve:function(u,s){return this.sampleCurveY(this.solveCurveX(u,s))}};var aq=q1(iq);function Ku(u,s,l){return u+l*(s-u)}function rf(u,s,l){return u.map((f,m)=>Ku(f,s[m],l))}let Wi={number:Ku,color:function(u,s,l,f="rgb"){switch(f){case"rgb":{let[m,x,b,T]=rf(u.rgb,s.rgb,l);return new pr(m,x,b,T,!1)}case"hcl":{let[m,x,b,T]=u.hcl,[C,O,R,L]=s.hcl,z,U;if(isNaN(m)||isNaN(C))isNaN(m)?isNaN(C)?z=NaN:(z=C,b!==1&&b!==0||(U=O)):(z=m,R!==1&&R!==0||(U=x));else{let xe=C-m;C>m&&xe>180?xe-=360:C<m&&m-C>180&&(xe+=360),z=m+l*xe}let[H,X,ne,ue]=function([xe,pe,ye,Se]){return xe=isNaN(xe)?0:xe*ht,Yr([ye,Math.cos(xe)*pe,Math.sin(xe)*pe,Se])}([z,U!=null?U:Ku(x,O,l),Ku(b,R,l),Ku(T,L,l)]);return new pr(H,X,ne,ue,!1)}case"lab":{let[m,x,b,T]=Yr(rf(u.lab,s.lab,l));return new pr(m,x,b,T,!1)}}},array:rf,padding:function(u,s,l){return new _a(rf(u.values,s.values,l))},variableAnchorOffsetCollection:function(u,s,l){let f=u.values,m=s.values;if(f.length!==m.length)throw new mn(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${s.toString()}`);let x=[];for(let b=0;b<f.length;b+=2){if(f[b]!==m[b])throw new mn(`Cannot interpolate values containing mismatched anchors. from[${b}]: ${f[b]}, to[${b}]: ${m[b]}`);x.push(f[b]);let[T,C]=f[b+1],[O,R]=m[b+1];x.push([Ku(T,O,l),Ku(C,R,l)])}return new Na(x)}};class Hi{constructor(s,l,f,m,x){this.type=s,this.operator=l,this.interpolation=f,this.input=m,this.labels=[],this.outputs=[];for(let[b,T]of x)this.labels.push(b),this.outputs.push(T)}static interpolationFactor(s,l,f,m){let x=0;if(s.name==="exponential")x=jp(l,s.base,f,m);else if(s.name==="linear")x=jp(l,1,f,m);else if(s.name==="cubic-bezier"){let b=s.controlPoints;x=new aq(b[0],b[1],b[2],b[3]).solve(jp(l,1,f,m))}return x}static parse(s,l){let[f,m,x,...b]=s;if(!Array.isArray(m)||m.length===0)return l.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){let O=m[1];if(typeof O!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:O}}else{if(m[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(m[0])}`,1,0);{let O=m.slice(1);if(O.length!==4||O.some(R=>typeof R!="number"||R<0||R>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:O}}}if(s.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(x=l.parse(x,2,ze),!x)return null;let T=[],C=null;f==="interpolate-hcl"||f==="interpolate-lab"?C=ii:l.expectedType&&l.expectedType.kind!=="value"&&(C=l.expectedType);for(let O=0;O<b.length;O+=2){let R=b[O],L=b[O+1],z=O+3,U=O+4;if(typeof R!="number")return l.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",z);if(T.length&&T[T.length-1][0]>=R)return l.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",z);let H=l.parse(L,U,C);if(!H)return null;C=C||H.type,T.push([R,H])}return _e(C,ze)||_e(C,ii)||_e(C,Qs)||_e(C,oe)||_e(C,B(ze))?new Hi(C,f,m,x,T):l.error(`Type ${j(C)} is not interpolatable.`)}evaluate(s){let l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(s);let m=this.input.evaluate(s);if(m<=l[0])return f[0].evaluate(s);let x=l.length;if(m>=l[x-1])return f[x-1].evaluate(s);let b=zp(l,m),T=Hi.interpolationFactor(this.interpolation,m,l[b],l[b+1]),C=f[b].evaluate(s),O=f[b+1].evaluate(s);switch(this.operator){case"interpolate":return Wi[this.type.kind](C,O,T);case"interpolate-hcl":return Wi.color(C,O,T,"hcl");case"interpolate-lab":return Wi.color(C,O,T,"lab");}}eachChild(s){s(this.input);for(let l of this.outputs)s(l)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function jp(u,s,l,f){let m=f-l,x=u-l;return m===0?0:s===1?x/m:(Math.pow(s,x)-1)/(Math.pow(s,m)-1)}class Bp{constructor(s,l){this.type=s,this.args=l}static parse(s,l){if(s.length<2)return l.error("Expectected at least one argument.");let f=null,m=l.expectedType;m&&m.kind!=="value"&&(f=m);let x=[];for(let T of s.slice(1)){let C=l.parse(T,1+x.length,f,void 0,{typeAnnotation:"omit"});if(!C)return null;f=f||C.type,x.push(C)}if(!f)throw new Error("No output type");let b=m&&x.some(T=>ie(m,T.type));return new Bp(b?Tt:f,x)}evaluate(s){let l,f=null,m=0;for(let x of this.args)if(m++,f=x.evaluate(s),f&&f instanceof xa&&!f.available&&(l||(l=f.name),f=null,m===this.args.length&&(f=l)),f!==null)break;return f}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}function Up(u,s){return u==="=="||u==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function M1(u,s,l,f){return f.compare(s,l)===0}function sc(u,s,l){let f=u!=="=="&&u!=="!=";return class J0e{constructor(x,b,T){this.type=ft,this.lhs=x,this.rhs=b,this.collator=T,this.hasUntypedArgument=x.type.kind==="value"||b.type.kind==="value"}static parse(x,b){if(x.length!==3&&x.length!==4)return b.error("Expected two or three arguments.");let T=x[0],C=b.parse(x[1],1,Tt);if(!C)return null;if(!Up(T,C.type))return b.concat(1).error(`"${T}" comparisons are not supported for type '${j(C.type)}'.`);let O=b.parse(x[2],2,Tt);if(!O)return null;if(!Up(T,O.type))return b.concat(2).error(`"${T}" comparisons are not supported for type '${j(O.type)}'.`);if(C.type.kind!==O.type.kind&&C.type.kind!=="value"&&O.type.kind!=="value")return b.error(`Cannot compare types '${j(C.type)}' and '${j(O.type)}'.`);f&&(C.type.kind==="value"&&O.type.kind!=="value"?C=new _o(O.type,[C]):C.type.kind!=="value"&&O.type.kind==="value"&&(O=new _o(C.type,[O])));let R=null;if(x.length===4){if(C.type.kind!=="string"&&O.type.kind!=="string"&&C.type.kind!=="value"&&O.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(R=b.parse(x[3],3,jo),!R)return null}return new J0e(C,O,R)}evaluate(x){let b=this.lhs.evaluate(x),T=this.rhs.evaluate(x);if(f&&this.hasUntypedArgument){let C=wn(b),O=wn(T);if(C.kind!==O.kind||C.kind!=="string"&&C.kind!=="number")throw new mn(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${C.kind}, ${O.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){let C=wn(b),O=wn(T);if(C.kind!=="string"||O.kind!=="string")return s(x,b,T)}return this.collator?l(x,b,T,this.collator.evaluate(x)):s(x,b,T)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}let oq=sc("==",function(u,s,l){return s===l},M1),O1=sc("!=",function(u,s,l){return s!==l},function(u,s,l,f){return!M1(0,s,l,f)}),R1=sc("<",function(u,s,l){return s<l},function(u,s,l,f){return f.compare(s,l)<0}),sq=sc(">",function(u,s,l){return s>l},function(u,s,l,f){return f.compare(s,l)>0}),uq=sc("<=",function(u,s,l){return s<=l},function(u,s,l,f){return f.compare(s,l)<=0}),D1=sc(">=",function(u,s,l){return s>=l},function(u,s,l,f){return f.compare(s,l)>=0});class nf{constructor(s,l,f){this.type=jo,this.locale=f,this.caseSensitive=s,this.diacriticSensitive=l}static parse(s,l){if(s.length!==2)return l.error("Expected one argument.");let f=s[1];if(typeof f!="object"||Array.isArray(f))return l.error("Collator options argument must be an object.");let m=l.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,ft);if(!m)return null;let x=l.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,ft);if(!x)return null;let b=null;return f.locale&&(b=l.parse(f.locale,1,Ct),!b)?null:new nf(m,x,b)}evaluate(s){return new fg(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}class yg{constructor(s,l,f,m,x){this.type=Ct,this.number=s,this.locale=l,this.currency=f,this.minFractionDigits=m,this.maxFractionDigits=x}static parse(s,l){if(s.length!==3)return l.error("Expected two arguments.");let f=l.parse(s[1],1,ze);if(!f)return null;let m=s[2];if(typeof m!="object"||Array.isArray(m))return l.error("NumberFormat options argument must be an object.");let x=null;if(m.locale&&(x=l.parse(m.locale,1,Ct),!x))return null;let b=null;if(m.currency&&(b=l.parse(m.currency,1,Ct),!b))return null;let T=null;if(m["min-fraction-digits"]&&(T=l.parse(m["min-fraction-digits"],1,ze),!T))return null;let C=null;return m["max-fraction-digits"]&&(C=l.parse(m["max-fraction-digits"],1,ze),!C)?null:new yg(f,x,b,T,C)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class Vp{constructor(s){this.type=Ts,this.sections=s}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");let f=s[1];if(!Array.isArray(f)&&typeof f=="object")return l.error("First argument must be an image or text section.");let m=[],x=!1;for(let b=1;b<=s.length-1;++b){let T=s[b];if(x&&typeof T=="object"&&!Array.isArray(T)){x=!1;let C=null;if(T["font-scale"]&&(C=l.parse(T["font-scale"],1,ze),!C))return null;let O=null;if(T["text-font"]&&(O=l.parse(T["text-font"],1,B(Ct)),!O))return null;let R=null;if(T["text-color"]&&(R=l.parse(T["text-color"],1,ii),!R))return null;let L=m[m.length-1];L.scale=C,L.font=O,L.textColor=R}else{let C=l.parse(s[b],1,Tt);if(!C)return null;let O=C.type.kind;if(O!=="string"&&O!=="value"&&O!=="null"&&O!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,m.push({content:C,scale:null,font:null,textColor:null})}}return new Vp(m)}evaluate(s){return new ya(this.sections.map(l=>{let f=l.content.evaluate(s);return wn(f)===Bo?new pg("",f,null,null,null):new pg(ef(f),null,l.scale?l.scale.evaluate(s):null,l.font?l.font.evaluate(s).join(","):null,l.textColor?l.textColor.evaluate(s):null)}))}eachChild(s){for(let l of this.sections)s(l.content),l.scale&&s(l.scale),l.font&&s(l.font),l.textColor&&s(l.textColor)}outputDefined(){return!1}}class _g{constructor(s){this.type=Bo,this.input=s}static parse(s,l){if(s.length!==2)return l.error("Expected two arguments.");let f=l.parse(s[1],1,Ct);return f?new _g(f):l.error("No image name provided.")}evaluate(s){let l=this.input.evaluate(s),f=xa.fromString(l);return f&&s.availableImages&&(f.available=s.availableImages.indexOf(l)>-1),f}eachChild(s){s(this.input)}outputDefined(){return!1}}class xg{constructor(s){this.type=ze,this.input=s}static parse(s,l){if(s.length!==2)return l.error(`Expected 1 argument, but found ${s.length-1} instead.`);let f=l.parse(s[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${j(f.type)} instead.`):new xg(f):null}evaluate(s){let l=this.input.evaluate(s);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new mn(`Expected value to be of type string or array, but found ${j(wn(l))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}let Uo=8192;function lq(u,s){let l=(180+u[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,m=Math.pow(2,s.z);return[Math.round(l*m*Uo),Math.round(f*m*Uo)]}function bg(u,s){let l=Math.pow(2,s.z);return[(m=(u[0]/Uo+s.x)/l,360*m-180),(f=(u[1]/Uo+s.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,m}function Xu(u,s){u[0]=Math.min(u[0],s[0]),u[1]=Math.min(u[1],s[1]),u[2]=Math.max(u[2],s[0]),u[3]=Math.max(u[3],s[1])}function tu(u,s){return!(u[0]<=s[0]||u[2]>=s[2]||u[1]<=s[1]||u[3]>=s[3])}function ur(u,s,l){let f=u[0]-s[0],m=u[1]-s[1],x=u[0]-l[0],b=u[1]-l[1];return f*b-x*m==0&&f*x<=0&&m*b<=0}function $p(u,s,l,f){return(m=[f[0]-l[0],f[1]-l[1]])[0]*(x=[s[0]-u[0],s[1]-u[1]])[1]-m[1]*x[0]!=0&&!(!k1(u,s,l,f)||!k1(l,f,u,s));var m,x}function cq(u,s,l){for(let f of l)for(let m=0;m<f.length-1;++m)if($p(u,s,f[m],f[m+1]))return!0;return!1}function uc(u,s,l=!1){let f=!1;for(let T of s)for(let C=0;C<T.length-1;C++){if(ur(u,T[C],T[C+1]))return l;(x=T[C])[1]>(m=u)[1]!=(b=T[C+1])[1]>m[1]&&m[0]<(b[0]-x[0])*(m[1]-x[1])/(b[1]-x[1])+x[0]&&(f=!f)}var m,x,b;return f}function hq(u,s){for(let l of s)if(uc(u,l))return!0;return!1}function L1(u,s){for(let l of u)if(!uc(l,s))return!1;for(let l=0;l<u.length-1;++l)if(cq(u[l],u[l+1],s))return!1;return!0}function fq(u,s){for(let l of s)if(L1(u,l))return!0;return!1}function k1(u,s,l,f){let m=f[0]-l[0],x=f[1]-l[1],b=(u[0]-l[0])*x-m*(u[1]-l[1]),T=(s[0]-l[0])*x-m*(s[1]-l[1]);return b>0&&T<0||b<0&&T>0}function wg(u,s,l){let f=[];for(let m=0;m<u.length;m++){let x=[];for(let b=0;b<u[m].length;b++){let T=lq(u[m][b],l);Xu(s,T),x.push(T)}f.push(x)}return f}function N1(u,s,l){let f=[];for(let m=0;m<u.length;m++){let x=wg(u[m],s,l);f.push(x)}return f}function F1(u,s,l,f){if(u[0]<l[0]||u[0]>l[2]){let m=.5*f,x=u[0]-l[0]>m?-f:l[0]-u[0]>m?f:0;x===0&&(x=u[0]-l[2]>m?-f:l[2]-u[0]>m?f:0),u[0]+=x}Xu(s,u)}function z1(u,s,l,f){let m=Math.pow(2,f.z)*Uo,x=[f.x*Uo,f.y*Uo],b=[];for(let T of u)for(let C of T){let O=[C.x+x[0],C.y+x[1]];F1(O,s,l,m),b.push(O)}return b}function j1(u,s,l,f){let m=Math.pow(2,f.z)*Uo,x=[f.x*Uo,f.y*Uo],b=[];for(let C of u){let O=[];for(let R of C){let L=[R.x+x[0],R.y+x[1]];Xu(s,L),O.push(L)}b.push(O)}if(s[2]-s[0]<=m/2){(T=s)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(let C of b)for(let O of C)F1(O,s,l,m)}var T;return b}class Yu{constructor(s,l){this.type=ft,this.geojson=s,this.geometries=l}static parse(s,l){if(s.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Hu(s[1])){let f=s[1];if(f.type==="FeatureCollection"){let m=[];for(let x of f.features){let{type:b,coordinates:T}=x.geometry;b==="Polygon"&&m.push(T),b==="MultiPolygon"&&m.push(...T)}if(m.length)return new Yu(f,{type:"MultiPolygon",coordinates:m})}else if(f.type==="Feature"){let m=f.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Yu(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new Yu(f,f)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(l,f){let m=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],b=l.canonicalID();if(f.type==="Polygon"){let T=wg(f.coordinates,x,b),C=z1(l.geometry(),m,x,b);if(!tu(m,x))return!1;for(let O of C)if(!uc(O,T))return!1}if(f.type==="MultiPolygon"){let T=N1(f.coordinates,x,b),C=z1(l.geometry(),m,x,b);if(!tu(m,x))return!1;for(let O of C)if(!hq(O,T))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(l,f){let m=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],b=l.canonicalID();if(f.type==="Polygon"){let T=wg(f.coordinates,x,b),C=j1(l.geometry(),m,x,b);if(!tu(m,x))return!1;for(let O of C)if(!L1(O,T))return!1}if(f.type==="MultiPolygon"){let T=N1(f.coordinates,x,b),C=j1(l.geometry(),m,x,b);if(!tu(m,x))return!1;for(let O of C)if(!fq(O,T))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let B1=class{constructor(u=[],s=(l,f)=>l<f?-1:l>f?1:0){if(this.data=u,this.length=this.data.length,this.compare=s,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;let u=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),u}peek(){return this.data[0]}_up(u){let{data:s,compare:l}=this,f=s[u];for(;u>0;){let m=u-1>>1,x=s[m];if(l(f,x)>=0)break;s[u]=x,u=m}s[u]=f}_down(u){let{data:s,compare:l}=this,f=this.length>>1,m=s[u];for(;u<f;){let x=1+(u<<1),b=x+1;if(b<this.length&&l(s[b],s[x])<0&&(x=b),l(s[x],m)>=0)break;s[u]=s[x],u=x}s[u]=m}};function pq(u,s,l,f,m){U1(u,s,l,f||u.length-1,m||dq)}function U1(u,s,l,f,m){for(;f>l;){if(f-l>600){var x=f-l+1,b=s-l+1,T=Math.log(x),C=.5*Math.exp(2*T/3),O=.5*Math.sqrt(T*C*(x-C)/x)*(b-x/2<0?-1:1);U1(u,s,Math.max(l,Math.floor(s-b*C/x+O)),Math.min(f,Math.floor(s+(x-b)*C/x+O)),m)}var R=u[s],L=l,z=f;for(af(u,l,s),m(u[f],R)>0&&af(u,l,f);L<z;){for(af(u,L,z),L++,z--;m(u[L],R)<0;)L++;for(;m(u[z],R)>0;)z--}m(u[l],R)===0?af(u,l,z):af(u,++z,f),z<=s&&(l=z+1),s<=z&&(f=z-1)}}function af(u,s,l){var f=u[s];u[s]=u[l],u[l]=f}function dq(u,s){return u<s?-1:u>s?1:0}function Gp(u,s){if(u.length<=1)return[u];let l=[],f,m;for(let x of u){let b=mq(x);b!==0&&(x.area=Math.abs(b),m===void 0&&(m=b<0),m===b<0?(f&&l.push(f),f=[x]):f.push(x))}if(f&&l.push(f),s>1)for(let x=0;x<l.length;x++)l[x].length<=s||(pq(l[x],s,1,l[x].length-1,vq),l[x]=l[x].slice(0,s));return l}function vq(u,s){return s.area-u.area}function mq(u){let s=0;for(let l,f,m=0,x=u.length,b=x-1;m<x;b=m++)l=u[m],f=u[b],s+=(f.x-l.x)*(l.y+f.y);return s}let V1=1/298.257223563,$1=V1*(2-V1),G1=Math.PI/180;class Eg{constructor(s){let l=6378.137*G1*1e3,f=Math.cos(s*G1),m=1/(1-$1*(1-f*f)),x=Math.sqrt(m);this.kx=l*x*f,this.ky=l*x*m*(1-$1)}distance(s,l){let f=this.wrap(s[0]-l[0])*this.kx,m=(s[1]-l[1])*this.ky;return Math.sqrt(f*f+m*m)}pointOnLine(s,l){let f,m,x,b,T=1/0;for(let C=0;C<s.length-1;C++){let O=s[C][0],R=s[C][1],L=this.wrap(s[C+1][0]-O)*this.kx,z=(s[C+1][1]-R)*this.ky,U=0;L===0&&z===0||(U=(this.wrap(l[0]-O)*this.kx*L+(l[1]-R)*this.ky*z)/(L*L+z*z),U>1?(O=s[C+1][0],R=s[C+1][1]):U>0&&(O+=L/this.kx*U,R+=z/this.ky*U)),L=this.wrap(l[0]-O)*this.kx,z=(l[1]-R)*this.ky;let H=L*L+z*z;H<T&&(T=H,f=O,m=R,x=C,b=U)}return{point:[f,m],index:x,t:Math.max(0,Math.min(1,b))}}wrap(s){for(;s<-180;)s+=360;for(;s>180;)s-=360;return s}}function W1(u,s){return s[0]-u[0]}function Wp(u){return u[1]-u[0]+1}function Is(u,s){return u[1]>=u[0]&&u[1]<s}function Sg(u,s){if(u[0]>u[1])return[null,null];let l=Wp(u);if(s){if(l===2)return[u,null];let m=Math.floor(l/2);return[[u[0],u[0]+m],[u[0]+m,u[1]]]}if(l===1)return[u,null];let f=Math.floor(l/2)-1;return[[u[0],u[0]+f],[u[0]+f+1,u[1]]]}function Tg(u,s){if(!Is(s,u.length))return[1/0,1/0,-1/0,-1/0];let l=[1/0,1/0,-1/0,-1/0];for(let f=s[0];f<=s[1];++f)Xu(l,u[f]);return l}function Ig(u){let s=[1/0,1/0,-1/0,-1/0];for(let l of u)for(let f of l)Xu(s,f);return s}function Hp(u){return u[0]!==-1/0&&u[1]!==-1/0&&u[2]!==1/0&&u[3]!==1/0}function Cg(u,s,l){if(!Hp(u)||!Hp(s))return NaN;let f=0,m=0;return u[2]<s[0]&&(f=s[0]-u[2]),u[0]>s[2]&&(f=u[0]-s[2]),u[1]>s[3]&&(m=u[1]-s[3]),u[3]<s[1]&&(m=s[1]-u[3]),l.distance([0,0],[f,m])}function Ju(u,s,l){let f=l.pointOnLine(s,u);return l.distance(u,f.point)}function Ag(u,s,l,f,m){let x=Math.min(Ju(u,[l,f],m),Ju(s,[l,f],m)),b=Math.min(Ju(l,[u,s],m),Ju(f,[u,s],m));return Math.min(x,b)}function gq(u,s,l,f,m){if(!Is(s,u.length)||!Is(f,l.length))return 1/0;let x=1/0;for(let b=s[0];b<s[1];++b){let T=u[b],C=u[b+1];for(let O=f[0];O<f[1];++O){let R=l[O],L=l[O+1];if($p(T,C,R,L))return 0;x=Math.min(x,Ag(T,C,R,L,m))}}return x}function on(u,s,l,f,m){if(!Is(s,u.length)||!Is(f,l.length))return NaN;let x=1/0;for(let b=s[0];b<=s[1];++b)for(let T=f[0];T<=f[1];++T)if(x=Math.min(x,m.distance(u[b],l[T])),x===0)return x;return x}function yq(u,s,l){if(uc(u,s,!0))return 0;let f=1/0;for(let m of s){let x=m[0],b=m[m.length-1];if(x!==b&&(f=Math.min(f,Ju(u,[b,x],l)),f===0))return f;let T=l.pointOnLine(m,u);if(f=Math.min(f,l.distance(u,T.point)),f===0)return f}return f}function Ft(u,s,l,f){if(!Is(s,u.length))return NaN;for(let x=s[0];x<=s[1];++x)if(uc(u[x],l,!0))return 0;let m=1/0;for(let x=s[0];x<s[1];++x){let b=u[x],T=u[x+1];for(let C of l)for(let O=0,R=C.length,L=R-1;O<R;L=O++){let z=C[L],U=C[O];if($p(b,T,z,U))return 0;m=Math.min(m,Ag(b,T,z,U,f))}}return m}function Zp(u,s){for(let l of u)for(let f of l)if(uc(f,s,!0))return!0;return!1}function Ar(u,s,l,f=1/0){let m=Ig(u),x=Ig(s);if(f!==1/0&&Cg(m,x,l)>=f)return f;if(tu(m,x)){if(Zp(u,s))return 0}else if(Zp(s,u))return 0;let b=1/0;for(let T of u)for(let C=0,O=T.length,R=O-1;C<O;R=C++){let L=T[R],z=T[C];for(let U of s)for(let H=0,X=U.length,ne=X-1;H<X;ne=H++){let ue=U[ne],xe=U[H];if($p(L,z,ue,xe))return 0;b=Math.min(b,Ag(L,z,ue,xe,l))}}return b}function yr(u,s,l,f,m,x){if(!x)return;let b=Cg(Tg(f,x),m,l);b<s&&u.push([b,x,[0,0]])}function Qu(u,s,l,f,m,x,b){if(!x||!b)return;let T=Cg(Tg(f,x),Tg(m,b),l);T<s&&u.push([T,x,b])}function of(u,s,l,f,m=1/0){let x=Math.min(f.distance(u[0],l[0][0]),m);if(x===0)return x;let b=new B1([[0,[0,u.length-1],[0,0]]],W1),T=Ig(l);for(;b.length>0;){let C=b.pop();if(C[0]>=x)continue;let O=C[1],R=s?50:100;if(Wp(O)<=R){if(!Is(O,u.length))return NaN;if(s){let L=Ft(u,O,l,f);if(isNaN(L)||L===0)return L;x=Math.min(x,L)}else for(let L=O[0];L<=O[1];++L){let z=yq(u[L],l,f);if(x=Math.min(x,z),x===0)return 0}}else{let L=Sg(O,s);yr(b,x,f,u,T,L[0]),yr(b,x,f,u,T,L[1])}}return x}function sf(u,s,l,f,m,x=1/0){let b=Math.min(x,m.distance(u[0],l[0]));if(b===0)return b;let T=new B1([[0,[0,u.length-1],[0,l.length-1]]],W1);for(;T.length>0;){let C=T.pop();if(C[0]>=b)continue;let O=C[1],R=C[2],L=s?50:100,z=f?50:100;if(Wp(O)<=L&&Wp(R)<=z){if(!Is(O,u.length)&&Is(R,l.length))return NaN;let U;if(s&&f)U=gq(u,O,l,R,m),b=Math.min(b,U);else if(s&&!f){let H=u.slice(O[0],O[1]+1);for(let X=R[0];X<=R[1];++X)if(U=Ju(l[X],H,m),b=Math.min(b,U),b===0)return b}else if(!s&&f){let H=l.slice(R[0],R[1]+1);for(let X=O[0];X<=O[1];++X)if(U=Ju(u[X],H,m),b=Math.min(b,U),b===0)return b}else U=on(u,O,l,R,m),b=Math.min(b,U)}else{let U=Sg(O,s),H=Sg(R,f);Qu(T,b,m,u,l,U[0],H[0]),Qu(T,b,m,u,l,U[0],H[1]),Qu(T,b,m,u,l,U[1],H[0]),Qu(T,b,m,u,l,U[1],H[1])}}return b}function qg(u){return u.type==="MultiPolygon"?u.coordinates.map(s=>({type:"Polygon",coordinates:s})):u.type==="MultiLineString"?u.coordinates.map(s=>({type:"LineString",coordinates:s})):u.type==="MultiPoint"?u.coordinates.map(s=>({type:"Point",coordinates:s})):[u]}class el{constructor(s,l){this.type=ze,this.geojson=s,this.geometries=l}static parse(s,l){if(s.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Hu(s[1])){let f=s[1];if(f.type==="FeatureCollection")return new el(f,f.features.map(m=>qg(m.geometry)).flat());if(f.type==="Feature")return new el(f,qg(f.geometry));if("type"in f&&"coordinates"in f)return new el(f,qg(f))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(l,f){let m=l.geometry(),x=m.flat().map(C=>bg([C.x,C.y],l.canonical));if(m.length===0)return NaN;let b=new Eg(x[0][1]),T=1/0;for(let C of f){switch(C.type){case"Point":T=Math.min(T,sf(x,!1,[C.coordinates],!1,b,T));break;case"LineString":T=Math.min(T,sf(x,!1,C.coordinates,!0,b,T));break;case"Polygon":T=Math.min(T,of(x,!1,C.coordinates,b,T));}if(T===0)return T}return T}(s,this.geometries);if(s.geometryType()==="LineString")return function(l,f){let m=l.geometry(),x=m.flat().map(C=>bg([C.x,C.y],l.canonical));if(m.length===0)return NaN;let b=new Eg(x[0][1]),T=1/0;for(let C of f){switch(C.type){case"Point":T=Math.min(T,sf(x,!0,[C.coordinates],!1,b,T));break;case"LineString":T=Math.min(T,sf(x,!0,C.coordinates,!0,b,T));break;case"Polygon":T=Math.min(T,of(x,!0,C.coordinates,b,T));}if(T===0)return T}return T}(s,this.geometries);if(s.geometryType()==="Polygon")return function(l,f){let m=l.geometry();if(m.length===0||m[0].length===0)return NaN;let x=Gp(m,0).map(C=>C.map(O=>O.map(R=>bg([R.x,R.y],l.canonical)))),b=new Eg(x[0][0][0][1]),T=1/0;for(let C of f)for(let O of x){switch(C.type){case"Point":T=Math.min(T,of([C.coordinates],!1,O,b,T));break;case"LineString":T=Math.min(T,of(C.coordinates,!0,O,b,T));break;case"Polygon":T=Math.min(T,Ar(O,C.coordinates,b,T));}if(T===0)return T}return T}(s,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}let lc={"==":oq,"!=":O1,">":sq,"<":R1,">=":D1,"<=":uq,array:_o,at:vg,boolean:_o,case:Fp,coalesce:Bp,collator:nf,format:Vp,image:_g,in:mg,"index-of":ac,interpolate:Hi,"interpolate-hcl":Hi,"interpolate-lab":Hi,length:xg,let:eu,literal:yo,match:gg,number:_o,"number-format":yg,object:_o,slice:tf,step:oc,string:_o,"to-boolean":xo,"to-color":xo,"to-number":xo,"to-string":xo,var:ar,within:Yu,distance:el};class Fa{constructor(s,l,f,m){this.name=s,this.type=l,this._evaluate=f,this.args=m}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,l){let f=s[0],m=Fa.definitions[f];if(!m)return l.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);let x=Array.isArray(m)?m[0]:m.type,b=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,T=b.filter(([O])=>!Array.isArray(O)||O.length===s.length-1),C=null;for(let[O,R]of T){C=new Zu(l.registry,uf,l.path,null,l.scope);let L=[],z=!1;for(let U=1;U<s.length;U++){let H=s[U],X=Array.isArray(O)?O[U-1]:O.type,ne=C.parse(H,1+L.length,X);if(!ne){z=!0;break}L.push(ne)}if(!z)if(Array.isArray(O)&&O.length!==L.length)C.error(`Expected ${O.length} arguments, but found ${L.length} instead.`);else{for(let U=0;U<L.length;U++){let H=Array.isArray(O)?O[U]:O.type,X=L[U];C.concat(U+1).checkSubtype(H,X.type)}if(C.errors.length===0)return new Fa(f,x,R,L)}}if(T.length===1)l.errors.push(...C.errors);else{let O=(T.length?T:b).map(([L])=>{return z=L,Array.isArray(z)?`(${z.map(j).join(", ")})`:`(${j(z.type)}...)`;var z}).join(" | "),R=[];for(let L=1;L<s.length;L++){let z=l.parse(s[L],1+R.length);if(!z)return null;R.push(j(z.type))}l.error(`Expected arguments of type ${O}, but found (${R.join(", ")}) instead.`)}return null}static register(s,l){Fa.definitions=l;for(let f in l)s[f]=Fa}}function Pg(u,[s,l,f,m]){s=s.evaluate(u),l=l.evaluate(u),f=f.evaluate(u);let x=m?m.evaluate(u):1,b=ic(s,l,f,x);if(b)throw new mn(b);return new pr(s/255,l/255,f/255,x,!1)}function Mg(u,s){return u in s}function Og(u,s){let l=s[u];return l===void 0?null:l}function tl(u){return{type:u}}function uf(u){if(u instanceof ar)return uf(u.boundExpression);if(u instanceof Fa&&u.name==="error"||u instanceof nf||u instanceof Yu||u instanceof el)return!1;let s=u instanceof xo||u instanceof _o,l=!0;return u.eachChild(f=>{l=s?l&&uf(f):l&&f instanceof yo}),!!l&&lf(u)&&cf(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function lf(u){if(u instanceof Fa&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof Yu||u instanceof el)return!1;let s=!0;return u.eachChild(l=>{s&&!lf(l)&&(s=!1)}),s}function cc(u){if(u instanceof Fa&&u.name==="feature-state")return!1;let s=!0;return u.eachChild(l=>{s&&!cc(l)&&(s=!1)}),s}function cf(u,s){if(u instanceof Fa&&s.indexOf(u.name)>=0)return!1;let l=!0;return u.eachChild(f=>{l&&!cf(f,s)&&(l=!1)}),l}function Kp(u){return{result:"success",value:u}}function hc(u){return{result:"error",value:u}}function fc(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function H1(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function Rg(u){return!!u.expression&&u.expression.interpolated}function rr(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Xp(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function _q(u){return u}function Z1(u,s){let l=s.type==="color",f=u.stops&&typeof u.stops[0][0]=="object",m=f||!(f||u.property!==void 0),x=u.type||(Rg(s)?"exponential":"interval");if(l||s.type==="padding"){let R=l?pr.parse:_a.parse;(u=ga({},u)).stops&&(u.stops=u.stops.map(L=>[L[0],R(L[1])])),u.default=R(u.default?u.default:s.default)}if(u.colorSpace&&(b=u.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var b;let T,C,O;if(x==="exponential")T=X1;else if(x==="interval")T=Yp;else if(x==="categorical"){T=K1,C=Object.create(null);for(let R of u.stops)C[R[0]]=R[1];O=typeof u.stops[0][0]}else{if(x!=="identity")throw new Error(`Unknown function type "${x}"`);T=Y1}if(f){let R={},L=[];for(let H=0;H<u.stops.length;H++){let X=u.stops[H],ne=X[0].zoom;R[ne]===void 0&&(R[ne]={zoom:ne,type:u.type,property:u.property,default:u.default,stops:[]},L.push(ne)),R[ne].stops.push([X[0].value,X[1]])}let z=[];for(let H of L)z.push([R[H].zoom,Z1(R[H],s)]);let U={name:"linear"};return{kind:"composite",interpolationType:U,interpolationFactor:Hi.interpolationFactor.bind(void 0,U),zoomStops:z.map(H=>H[0]),evaluate:({zoom:H},X)=>X1({stops:z,base:u.base},s,H).evaluate(H,X)}}if(m){let R=x==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:Hi.interpolationFactor.bind(void 0,R),zoomStops:u.stops.map(L=>L[0]),evaluate:({zoom:L})=>T(u,s,L,C,O)}}return{kind:"source",evaluate(R,L){let z=L&&L.properties?L.properties[u.property]:void 0;return z===void 0?pc(u.default,s.default):T(u,s,z,C,O)}}}function pc(u,s,l){return u!==void 0?u:s!==void 0?s:l!==void 0?l:void 0}function K1(u,s,l,f,m){return pc(typeof l===m?f[l]:void 0,u.default,s.default)}function Yp(u,s,l){if(rr(l)!=="number")return pc(u.default,s.default);let f=u.stops.length;if(f===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[f-1][0])return u.stops[f-1][1];let m=zp(u.stops.map(x=>x[0]),l);return u.stops[m][1]}function X1(u,s,l){let f=u.base!==void 0?u.base:1;if(rr(l)!=="number")return pc(u.default,s.default);let m=u.stops.length;if(m===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[m-1][0])return u.stops[m-1][1];let x=zp(u.stops.map(R=>R[0]),l),b=function(R,L,z,U){let H=U-z,X=R-z;return H===0?0:L===1?X/H:(Math.pow(L,X)-1)/(Math.pow(L,H)-1)}(l,f,u.stops[x][0],u.stops[x+1][0]),T=u.stops[x][1],C=u.stops[x+1][1],O=Wi[s.type]||_q;return typeof T.evaluate=="function"?{evaluate(...R){let L=T.evaluate.apply(void 0,R),z=C.evaluate.apply(void 0,R);if(L!==void 0&&z!==void 0)return O(L,z,b,u.colorSpace)}}:O(T,C,b,u.colorSpace)}function Y1(u,s,l){switch(s.type){case"color":l=pr.parse(l);break;case"formatted":l=ya.fromString(l.toString());break;case"resolvedImage":l=xa.fromString(l.toString());break;case"padding":l=_a.parse(l);break;default:rr(l)===s.type||s.type==="enum"&&s.values[l]||(l=void 0);}return pc(l,u.default,s.default)}Fa.register(lc,{error:[{kind:"error"},[Ct],(u,[s])=>{throw new mn(s.evaluate(u))}],typeof:[Ct,[Tt],(u,[s])=>j(wn(s.evaluate(u)))],"to-rgba":[B(ze,4),[ii],(u,[s])=>{let[l,f,m,x]=s.evaluate(u).rgb;return[255*l,255*f,255*m,x]}],rgb:[ii,[ze,ze,ze],Pg],rgba:[ii,[ze,ze,ze,ze],Pg],has:{type:ft,overloads:[[[Ct],(u,[s])=>Mg(s.evaluate(u),u.properties())],[[Ct,Vr],(u,[s,l])=>Mg(s.evaluate(u),l.evaluate(u))]]},get:{type:Tt,overloads:[[[Ct],(u,[s])=>Og(s.evaluate(u),u.properties())],[[Ct,Vr],(u,[s,l])=>Og(s.evaluate(u),l.evaluate(u))]]},"feature-state":[Tt,[Ct],(u,[s])=>Og(s.evaluate(u),u.featureState||{})],properties:[Vr,[],u=>u.properties()],"geometry-type":[Ct,[],u=>u.geometryType()],id:[Tt,[],u=>u.id()],zoom:[ze,[],u=>u.globals.zoom],"heatmap-density":[ze,[],u=>u.globals.heatmapDensity||0],"line-progress":[ze,[],u=>u.globals.lineProgress||0],accumulated:[Tt,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[ze,tl(ze),(u,s)=>{let l=0;for(let f of s)l+=f.evaluate(u);return l}],"*":[ze,tl(ze),(u,s)=>{let l=1;for(let f of s)l*=f.evaluate(u);return l}],"-":{type:ze,overloads:[[[ze,ze],(u,[s,l])=>s.evaluate(u)-l.evaluate(u)],[[ze],(u,[s])=>-s.evaluate(u)]]},"/":[ze,[ze,ze],(u,[s,l])=>s.evaluate(u)/l.evaluate(u)],"%":[ze,[ze,ze],(u,[s,l])=>s.evaluate(u)%l.evaluate(u)],ln2:[ze,[],()=>Math.LN2],pi:[ze,[],()=>Math.PI],e:[ze,[],()=>Math.E],"^":[ze,[ze,ze],(u,[s,l])=>Math.pow(s.evaluate(u),l.evaluate(u))],sqrt:[ze,[ze],(u,[s])=>Math.sqrt(s.evaluate(u))],log10:[ze,[ze],(u,[s])=>Math.log(s.evaluate(u))/Math.LN10],ln:[ze,[ze],(u,[s])=>Math.log(s.evaluate(u))],log2:[ze,[ze],(u,[s])=>Math.log(s.evaluate(u))/Math.LN2],sin:[ze,[ze],(u,[s])=>Math.sin(s.evaluate(u))],cos:[ze,[ze],(u,[s])=>Math.cos(s.evaluate(u))],tan:[ze,[ze],(u,[s])=>Math.tan(s.evaluate(u))],asin:[ze,[ze],(u,[s])=>Math.asin(s.evaluate(u))],acos:[ze,[ze],(u,[s])=>Math.acos(s.evaluate(u))],atan:[ze,[ze],(u,[s])=>Math.atan(s.evaluate(u))],min:[ze,tl(ze),(u,s)=>Math.min(...s.map(l=>l.evaluate(u)))],max:[ze,tl(ze),(u,s)=>Math.max(...s.map(l=>l.evaluate(u)))],abs:[ze,[ze],(u,[s])=>Math.abs(s.evaluate(u))],round:[ze,[ze],(u,[s])=>{let l=s.evaluate(u);return l<0?-Math.round(-l):Math.round(l)}],floor:[ze,[ze],(u,[s])=>Math.floor(s.evaluate(u))],ceil:[ze,[ze],(u,[s])=>Math.ceil(s.evaluate(u))],"filter-==":[ft,[Ct,Tt],(u,[s,l])=>u.properties()[s.value]===l.value],"filter-id-==":[ft,[Tt],(u,[s])=>u.id()===s.value],"filter-type-==":[ft,[Ct],(u,[s])=>u.geometryType()===s.value],"filter-<":[ft,[Ct,Tt],(u,[s,l])=>{let f=u.properties()[s.value],m=l.value;return typeof f==typeof m&&f<m}],"filter-id-<":[ft,[Tt],(u,[s])=>{let l=u.id(),f=s.value;return typeof l==typeof f&&l<f}],"filter->":[ft,[Ct,Tt],(u,[s,l])=>{let f=u.properties()[s.value],m=l.value;return typeof f==typeof m&&f>m}],"filter-id->":[ft,[Tt],(u,[s])=>{let l=u.id(),f=s.value;return typeof l==typeof f&&l>f}],"filter-<=":[ft,[Ct,Tt],(u,[s,l])=>{let f=u.properties()[s.value],m=l.value;return typeof f==typeof m&&f<=m}],"filter-id-<=":[ft,[Tt],(u,[s])=>{let l=u.id(),f=s.value;return typeof l==typeof f&&l<=f}],"filter->=":[ft,[Ct,Tt],(u,[s,l])=>{let f=u.properties()[s.value],m=l.value;return typeof f==typeof m&&f>=m}],"filter-id->=":[ft,[Tt],(u,[s])=>{let l=u.id(),f=s.value;return typeof l==typeof f&&l>=f}],"filter-has":[ft,[Tt],(u,[s])=>s.value in u.properties()],"filter-has-id":[ft,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[ft,[B(Ct)],(u,[s])=>s.value.indexOf(u.geometryType())>=0],"filter-id-in":[ft,[B(Tt)],(u,[s])=>s.value.indexOf(u.id())>=0],"filter-in-small":[ft,[Ct,B(Tt)],(u,[s,l])=>l.value.indexOf(u.properties()[s.value])>=0],"filter-in-large":[ft,[Ct,B(Tt)],(u,[s,l])=>function(f,m,x,b){for(;x<=b;){let T=x+b>>1;if(m[T]===f)return!0;m[T]>f?b=T-1:x=T+1}return!1}(u.properties()[s.value],l.value,0,l.value.length-1)],all:{type:ft,overloads:[[[ft,ft],(u,[s,l])=>s.evaluate(u)&&l.evaluate(u)],[tl(ft),(u,s)=>{for(let l of s)if(!l.evaluate(u))return!1;return!0}]]},any:{type:ft,overloads:[[[ft,ft],(u,[s,l])=>s.evaluate(u)||l.evaluate(u)],[tl(ft),(u,s)=>{for(let l of s)if(l.evaluate(u))return!0;return!1}]]},"!":[ft,[ft],(u,[s])=>!s.evaluate(u)],"is-supported-script":[ft,[Ct],(u,[s])=>{let l=u.globals&&u.globals.isSupportedScript;return!l||l(s.evaluate(u))}],upcase:[Ct,[Ct],(u,[s])=>s.evaluate(u).toUpperCase()],downcase:[Ct,[Ct],(u,[s])=>s.evaluate(u).toLowerCase()],concat:[Ct,tl(Tt),(u,s)=>s.map(l=>ef(l.evaluate(u))).join("")],"resolved-locale":[Ct,[jo],(u,[s])=>s.evaluate(u).resolvedLocale()]});class Jp{constructor(s,l){var f;this.expression=s,this._warningHistory={},this._evaluator=new Np,this._defaultValue=l?(f=l).type==="color"&&Xp(f.default)?new pr(0,0,0,0):f.type==="color"?pr.parse(f.default)||null:f.type==="padding"?_a.parse(f.default)||null:f.type==="variableAnchorOffsetCollection"?Na.parse(f.default)||null:f.default===void 0?null:f.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(s,l,f,m,x,b){return this._evaluator.globals=s,this._evaluator.feature=l,this._evaluator.featureState=f,this._evaluator.canonical=m,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(s,l,f,m,x,b){this._evaluator.globals=s,this._evaluator.feature=l||null,this._evaluator.featureState=f||null,this._evaluator.canonical=m,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=b||null;try{let T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new mn(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console!="undefined"&&console.warn(T.message)),this._defaultValue}}}function Qp(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in lc}function dc(u,s){let l=new Zu(lc,uf,[],s?function(m){let x={color:ii,string:Ct,number:ze,enum:Ct,boolean:ft,formatted:Ts,padding:Qs,resolvedImage:Bo,variableAnchorOffsetCollection:oe};return m.type==="array"?B(x[m.value]||Tt,m.length):x[m.type]}(s):void 0),f=l.parse(u,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?Kp(new Jp(f,s)):hc(l.errors)}class vc{constructor(s,l){this.kind=s,this._styleExpression=l,this.isStateDependent=s!=="constant"&&!cc(l.expression)}evaluateWithoutErrorHandling(s,l,f,m,x,b){return this._styleExpression.evaluateWithoutErrorHandling(s,l,f,m,x,b)}evaluate(s,l,f,m,x,b){return this._styleExpression.evaluate(s,l,f,m,x,b)}}class mc{constructor(s,l,f,m){this.kind=s,this.zoomStops=f,this._styleExpression=l,this.isStateDependent=s!=="camera"&&!cc(l.expression),this.interpolationType=m}evaluateWithoutErrorHandling(s,l,f,m,x,b){return this._styleExpression.evaluateWithoutErrorHandling(s,l,f,m,x,b)}evaluate(s,l,f,m,x,b){return this._styleExpression.evaluate(s,l,f,m,x,b)}interpolationFactor(s,l,f){return this.interpolationType?Hi.interpolationFactor(this.interpolationType,s,l,f):0}}function Dg(u,s){let l=dc(u,s);if(l.result==="error")return l;let f=l.value.expression,m=lf(f);if(!m&&!fc(s))return hc([new Wn("","data expressions not supported")]);let x=cf(f,["zoom"]);if(!x&&!H1(s))return hc([new Wn("","zoom expressions not supported")]);let b=hf(f);return b||x?b instanceof Wn?hc([b]):b instanceof Hi&&!Rg(s)?hc([new Wn("","\"interpolate\" expressions cannot be used with this property")]):Kp(b?new mc(m?"camera":"composite",l.value,b.labels,b instanceof Hi?b.interpolation:void 0):new vc(m?"constant":"source",l.value)):hc([new Wn("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class gc{constructor(s,l){this._parameters=s,this._specification=l,ga(this,Z1(this._parameters,this._specification))}static deserialize(s){return new gc(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function hf(u){let s=null;if(u instanceof eu)s=hf(u.result);else if(u instanceof Bp){for(let l of u.args)if(s=hf(l),s)break}else(u instanceof oc||u instanceof Hi)&&u.input instanceof Fa&&u.input.name==="zoom"&&(s=u);return s instanceof Wn||u.eachChild(l=>{let f=hf(l);f instanceof Wn?s=f:!s&&f?s=new Wn("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):s&&f&&s!==f&&(s=new Wn("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),s}function ed(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(let s of u.slice(1))if(!ed(s)&&typeof s!="boolean")return!1;return!0;default:return!0;}}let td={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Lg(u){if(u==null)return{filter:()=>!0,needGeometry:!1};ed(u)||(u=rd(u));let s=dc(u,td);if(s.result==="error")throw new Error(s.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,f,m)=>s.value.evaluate(l,f,{},m),needGeometry:J1(u)}}function xq(u,s){return u<s?-1:u>s?1:0}function J1(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let s=1;s<u.length;s++)if(J1(u[s]))return!0;return!1}function rd(u){if(!u)return!0;let s=u[0];return u.length<=1?s!=="any":s==="=="?kg(u[1],u[2],"=="):s==="!="?ai(kg(u[1],u[2],"==")):s==="<"||s===">"||s==="<="||s===">="?kg(u[1],u[2],s):s==="any"?(l=u.slice(1),["any"].concat(l.map(rd))):s==="all"?["all"].concat(u.slice(1).map(rd)):s==="none"?["all"].concat(u.slice(1).map(rd).map(ai)):s==="in"?ff(u[1],u.slice(2)):s==="!in"?ai(ff(u[1],u.slice(2))):s==="has"?pf(u[1]):s!=="!has"||ai(pf(u[1]));var l}function kg(u,s,l){switch(u){case"$type":return[`filter-type-${l}`,s];case"$id":return[`filter-id-${l}`,s];default:return[`filter-${l}`,u,s];}}function ff(u,s){if(s.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(l=>typeof l!=typeof s[0])?["filter-in-large",u,["literal",s.sort(xq)]]:["filter-in-small",u,["literal",s]];}}function pf(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u];}}function ai(u){return["!",u]}function rl(u){let s=typeof u;if(s==="number"||s==="boolean"||s==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let m="[";for(let x of u)m+=`${rl(x)},`;return`${m}]`}let l=Object.keys(u).sort(),f="{";for(let m=0;m<l.length;m++)f+=`${JSON.stringify(l[m])}:${rl(u[l[m]])},`;return`${f}}`}function Q1(u){let s="";for(let l of zo)s+=`/${rl(u[l])}`;return s}function eb(u){let s=u.value;return s?[new Fe(u.key,s,"constants have been deprecated as of v8")]:[]}function sn(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function bo(u){if(Array.isArray(u))return u.map(bo);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){let s={};for(let l in u)s[l]=bo(u[l]);return s}return sn(u)}function ba(u){let s=u.key,l=u.value,f=u.valueSpec||{},m=u.objectElementValidators||{},x=u.style,b=u.styleSpec,T=u.validateSpec,C=[],O=rr(l);if(O!=="object")return[new Fe(s,l,`object expected, ${O} found`)];for(let R in l){let L=R.split(".")[0],z=f[L]||f["*"],U;if(m[L])U=m[L];else if(f[L])U=T;else if(m["*"])U=m["*"];else{if(!f["*"]){C.push(new Fe(s,l[R],`unknown property "${R}"`));continue}U=T}C=C.concat(U({key:(s&&`${s}.`)+R,value:l[R],valueSpec:z,style:x,styleSpec:b,object:l,objectKey:R,validateSpec:T},l))}for(let R in f)m[R]||f[R].required&&f[R].default===void 0&&l[R]===void 0&&C.push(new Fe(s,l,`missing required property "${R}"`));return C}function df(u){let s=u.value,l=u.valueSpec,f=u.style,m=u.styleSpec,x=u.key,b=u.arrayElementValidator||u.validateSpec;if(rr(s)!=="array")return[new Fe(x,s,`array expected, ${rr(s)} found`)];if(l.length&&s.length!==l.length)return[new Fe(x,s,`array length ${l.length} expected, length ${s.length} found`)];if(l["min-length"]&&s.length<l["min-length"])return[new Fe(x,s,`array length at least ${l["min-length"]} expected, length ${s.length} found`)];let T={type:l.value,values:l.values};m.$version<7&&(T.function=l.function),rr(l.value)==="object"&&(T=l.value);let C=[];for(let O=0;O<s.length;O++)C=C.concat(b({array:s,arrayIndex:O,value:s[O],valueSpec:T,validateSpec:u.validateSpec,style:f,styleSpec:m,key:`${x}[${O}]`}));return C}function Ng(u){let s=u.key,l=u.value,f=u.valueSpec,m=rr(l);return m==="number"&&l!=l&&(m="NaN"),m!=="number"?[new Fe(s,l,`number expected, ${m} found`)]:"minimum"in f&&l<f.minimum?[new Fe(s,l,`${l} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&l>f.maximum?[new Fe(s,l,`${l} is greater than the maximum value ${f.maximum}`)]:[]}function nd(u){let s=u.valueSpec,l=sn(u.value.type),f,m,x,b={},T=l!=="categorical"&&u.value.property===void 0,C=!T,O=rr(u.value.stops)==="array"&&rr(u.value.stops[0])==="array"&&rr(u.value.stops[0][0])==="object",R=ba({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(U){if(l==="identity")return[new Fe(U.key,U.value,"identity function may not have a \"stops\" property")];let H=[],X=U.value;return H=H.concat(df({key:U.key,value:X,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:L})),rr(X)==="array"&&X.length===0&&H.push(new Fe(U.key,X,"array must have at least one stop")),H},default:function(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:s,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}});return l==="identity"&&T&&R.push(new Fe(u.key,u.value,"missing required property \"property\"")),l==="identity"||u.value.stops||R.push(new Fe(u.key,u.value,"missing required property \"stops\"")),l==="exponential"&&u.valueSpec.expression&&!Rg(u.valueSpec)&&R.push(new Fe(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(C&&!fc(u.valueSpec)?R.push(new Fe(u.key,u.value,"property functions not supported")):T&&!H1(u.valueSpec)&&R.push(new Fe(u.key,u.value,"zoom functions not supported"))),l!=="categorical"&&!O||u.value.property!==void 0||R.push(new Fe(u.key,u.value,"\"property\" property is required")),R;function L(U){let H=[],X=U.value,ne=U.key;if(rr(X)!=="array")return[new Fe(ne,X,`array expected, ${rr(X)} found`)];if(X.length!==2)return[new Fe(ne,X,`array length 2 expected, length ${X.length} found`)];if(O){if(rr(X[0])!=="object")return[new Fe(ne,X,`object expected, ${rr(X[0])} found`)];if(X[0].zoom===void 0)return[new Fe(ne,X,"object stop key must have zoom")];if(X[0].value===void 0)return[new Fe(ne,X,"object stop key must have value")];if(x&&x>sn(X[0].zoom))return[new Fe(ne,X[0].zoom,"stop zoom values must appear in ascending order")];sn(X[0].zoom)!==x&&(x=sn(X[0].zoom),m=void 0,b={}),H=H.concat(ba({key:`${ne}[0]`,value:X[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:Ng,value:z}}))}else H=H.concat(z({key:`${ne}[0]`,value:X[0],valueSpec:{},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},X));return Qp(bo(X[1]))?H.concat([new Fe(`${ne}[1]`,X[1],"expressions are not allowed in function stops.")]):H.concat(U.validateSpec({key:`${ne}[1]`,value:X[1],valueSpec:s,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function z(U,H){let X=rr(U.value),ne=sn(U.value),ue=U.value!==null?U.value:H;if(f){if(X!==f)return[new Fe(U.key,ue,`${X} stop domain type must match previous stop domain type ${f}`)]}else f=X;if(X!=="number"&&X!=="string"&&X!=="boolean")return[new Fe(U.key,ue,"stop domain value must be a number, string, or boolean")];if(X!=="number"&&l!=="categorical"){let xe=`number expected, ${X} found`;return fc(s)&&l===void 0&&(xe+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new Fe(U.key,ue,xe)]}return l!=="categorical"||X!=="number"||isFinite(ne)&&Math.floor(ne)===ne?l!=="categorical"&&X==="number"&&m!==void 0&&ne<m?[new Fe(U.key,ue,"stop domain values must appear in ascending order")]:(m=ne,l==="categorical"&&ne in b?[new Fe(U.key,ue,"stop domain values must be unique")]:(b[ne]=!0,[])):[new Fe(U.key,ue,`integer expected, found ${ne}`)]}}function yc(u){let s=(u.expressionContext==="property"?Dg:dc)(bo(u.value),u.valueSpec);if(s.result==="error")return s.value.map(f=>new Fe(`${u.key}${f.key}`,u.value,f.message));let l=s.value.expression||s.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!l.outputDefined())return[new Fe(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!cc(l))return[new Fe(u.key,u.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(u.expressionContext==="filter"&&!cc(l))return[new Fe(u.key,u.value,"\"feature-state\" data expressions are not supported with filters.")];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!cf(l,["zoom","feature-state"]))return[new Fe(u.key,u.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(u.expressionContext==="cluster-initial"&&!lf(l))return[new Fe(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Cs(u){let s=u.key,l=u.value,f=u.valueSpec,m=[];return Array.isArray(f.values)?f.values.indexOf(sn(l))===-1&&m.push(new Fe(s,l,`expected one of [${f.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(f.values).indexOf(sn(l))===-1&&m.push(new Fe(s,l,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(l)} found`)),m}function Fg(u){return ed(bo(u.value))?yc(ga({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):id(u)}function id(u){let s=u.value,l=u.key;if(rr(s)!=="array")return[new Fe(l,s,`array expected, ${rr(s)} found`)];let f=u.styleSpec,m,x=[];if(s.length<1)return[new Fe(l,s,"filter array must have at least 1 element")];switch(x=x.concat(Cs({key:`${l}[0]`,value:s[0],valueSpec:f.filter_operator,style:u.style,styleSpec:u.styleSpec})),sn(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&sn(s[1])==="$type"&&x.push(new Fe(l,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&x.push(new Fe(l,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(m=rr(s[1]),m!=="string"&&x.push(new Fe(`${l}[1]`,s[1],`string expected, ${m} found`)));for(let b=2;b<s.length;b++)m=rr(s[b]),sn(s[1])==="$type"?x=x.concat(Cs({key:`${l}[${b}]`,value:s[b],valueSpec:f.geometry_type,style:u.style,styleSpec:u.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&x.push(new Fe(`${l}[${b}]`,s[b],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let b=1;b<s.length;b++)x=x.concat(id({key:`${l}[${b}]`,value:s[b],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":m=rr(s[1]),s.length!==2?x.push(new Fe(l,s,`filter array for "${s[0]}" operator must have 2 elements`)):m!=="string"&&x.push(new Fe(`${l}[1]`,s[1],`string expected, ${m} found`));}return x}function zg(u,s){let l=u.key,f=u.validateSpec,m=u.style,x=u.styleSpec,b=u.value,T=u.objectKey,C=x[`${s}_${u.layerType}`];if(!C)return[];let O=T.match(/^(.*)-transition$/);if(s==="paint"&&O&&C[O[1]]&&C[O[1]].transition)return f({key:l,value:b,valueSpec:x.transition,style:m,styleSpec:x});let R=u.valueSpec||C[T];if(!R)return[new Fe(l,b,`unknown property "${T}"`)];let L;if(rr(b)==="string"&&fc(R)&&!R.tokens&&(L=/^{([^}]+)}$/.exec(b)))return[new Fe(l,b,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(L[1])} }\`.`)];let z=[];return u.layerType==="symbol"&&(T==="text-field"&&m&&!m.glyphs&&z.push(new Fe(l,b,"use of \"text-field\" requires a style \"glyphs\" property")),T==="text-font"&&Xp(bo(b))&&sn(b.type)==="identity"&&z.push(new Fe(l,b,"\"text-font\" does not support identity functions"))),z.concat(f({key:u.key,value:b,valueSpec:R,style:m,styleSpec:x,expressionContext:"property",propertyType:s,propertyKey:T}))}function ad(u){return zg(u,"paint")}function jg(u){return zg(u,"layout")}function Bg(u){let s=[],l=u.value,f=u.key,m=u.style,x=u.styleSpec;l.type||l.ref||s.push(new Fe(f,l,"either \"type\" or \"ref\" is required"));let b=sn(l.type),T=sn(l.ref);if(l.id){let C=sn(l.id);for(let O=0;O<u.arrayIndex;O++){let R=m.layers[O];sn(R.id)===C&&s.push(new Fe(f,l.id,`duplicate layer id "${l.id}", previously used at line ${R.id.__line__}`))}}if("ref"in l){let C;["type","source","source-layer","filter","layout"].forEach(O=>{O in l&&s.push(new Fe(f,l[O],`"${O}" is prohibited for ref layers`))}),m.layers.forEach(O=>{sn(O.id)===T&&(C=O)}),C?C.ref?s.push(new Fe(f,l.ref,"ref cannot reference another ref layer")):b=sn(C.type):s.push(new Fe(f,l.ref,`ref layer "${T}" not found`))}else if(b!=="background")if(l.source){let C=m.sources&&m.sources[l.source],O=C&&sn(C.type);C?O==="vector"&&b==="raster"?s.push(new Fe(f,l.source,`layer "${l.id}" requires a raster source`)):O!=="raster-dem"&&b==="hillshade"?s.push(new Fe(f,l.source,`layer "${l.id}" requires a raster-dem source`)):O==="raster"&&b!=="raster"?s.push(new Fe(f,l.source,`layer "${l.id}" requires a vector source`)):O!=="vector"||l["source-layer"]?O==="raster-dem"&&b!=="hillshade"?s.push(new Fe(f,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):b!=="line"||!l.paint||!l.paint["line-gradient"]||O==="geojson"&&C.lineMetrics||s.push(new Fe(f,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new Fe(f,l,`layer "${l.id}" must specify a "source-layer"`)):s.push(new Fe(f,l.source,`source "${l.source}" not found`))}else s.push(new Fe(f,l,"missing required property \"source\""));return s=s.concat(ba({key:f,value:l,valueSpec:x.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${f}.type`,value:l.type,valueSpec:x.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:l,objectKey:"type"}),filter:Fg,layout:C=>ba({layer:l,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":O=>jg(ga({layerType:b},O))}}),paint:C=>ba({layer:l,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":O=>ad(ga({layerType:b},O))}})}})),s}function nl(u){let s=u.value,l=u.key,f=rr(s);return f!=="string"?[new Fe(l,s,`string expected, ${f} found`)]:[]}let od={promoteId:function({key:u,value:s}){if(rr(s)==="string")return nl({key:u,value:s});{let l=[];for(let f in s)l.push(...nl({key:`${u}.${f}`,value:s[f]}));return l}}};function vf(u){let s=u.value,l=u.key,f=u.styleSpec,m=u.style,x=u.validateSpec;if(!s.type)return[new Fe(l,s,"\"type\" is required")];let b=sn(s.type),T;switch(b){case"vector":case"raster":return T=ba({key:l,value:s,valueSpec:f[`source_${b.replace("-","_")}`],style:u.style,styleSpec:f,objectElementValidators:od,validateSpec:x}),T;case"raster-dem":return T=function(C){var O;let R=(O=C.sourceName)!==null&&O!==void 0?O:"",L=C.value,z=C.styleSpec,U=z.source_raster_dem,H=C.style,X=[],ne=rr(L);if(L===void 0)return X;if(ne!=="object")return X.push(new Fe("source_raster_dem",L,`object expected, ${ne} found`)),X;let ue=sn(L.encoding)==="custom",xe=["redFactor","greenFactor","blueFactor","baseShift"],pe=C.value.encoding?`"${C.value.encoding}"`:"Default";for(let ye in L)!ue&&xe.includes(ye)?X.push(new Fe(ye,L[ye],`In "${R}": "${ye}" is only valid when "encoding" is set to "custom". ${pe} encoding found`)):U[ye]?X=X.concat(C.validateSpec({key:ye,value:L[ye],valueSpec:U[ye],validateSpec:C.validateSpec,style:H,styleSpec:z})):X.push(new Fe(ye,L[ye],`unknown property "${ye}"`));return X}({sourceName:l,value:s,style:u.style,styleSpec:f,validateSpec:x}),T;case"geojson":if(T=ba({key:l,value:s,valueSpec:f.source_geojson,style:m,styleSpec:f,validateSpec:x,objectElementValidators:od}),s.cluster)for(let C in s.clusterProperties){let[O,R]=s.clusterProperties[C],L=typeof O=="string"?[O,["accumulated"],["get",C]]:O;T.push(...yc({key:`${l}.${C}.map`,value:R,validateSpec:x,expressionContext:"cluster-map"})),T.push(...yc({key:`${l}.${C}.reduce`,value:L,validateSpec:x,expressionContext:"cluster-reduce"}))}return T;case"video":return ba({key:l,value:s,valueSpec:f.source_video,style:m,validateSpec:x,styleSpec:f});case"image":return ba({key:l,value:s,valueSpec:f.source_image,style:m,validateSpec:x,styleSpec:f});case"canvas":return[new Fe(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Cs({key:`${l}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:x,styleSpec:f});}}function Ug(u){let s=u.value,l=u.styleSpec,f=l.light,m=u.style,x=[],b=rr(s);if(s===void 0)return x;if(b!=="object")return x=x.concat([new Fe("light",s,`object expected, ${b} found`)]),x;for(let T in s){let C=T.match(/^(.*)-transition$/);x=x.concat(C&&f[C[1]]&&f[C[1]].transition?u.validateSpec({key:T,value:s[T],valueSpec:l.transition,validateSpec:u.validateSpec,style:m,styleSpec:l}):f[T]?u.validateSpec({key:T,value:s[T],valueSpec:f[T],validateSpec:u.validateSpec,style:m,styleSpec:l}):[new Fe(T,s[T],`unknown property "${T}"`)])}return x}function Vg(u){let s=u.value,l=u.styleSpec,f=l.sky,m=u.style,x=rr(s);if(s===void 0)return[];if(x!=="object")return[new Fe("sky",s,`object expected, ${x} found`)];let b=[];for(let T in s)b=b.concat(f[T]?u.validateSpec({key:T,value:s[T],valueSpec:f[T],style:m,styleSpec:l}):[new Fe(T,s[T],`unknown property "${T}"`)]);return b}function $g(u){let s=u.value,l=u.styleSpec,f=l.terrain,m=u.style,x=[],b=rr(s);if(s===void 0)return x;if(b!=="object")return x=x.concat([new Fe("terrain",s,`object expected, ${b} found`)]),x;for(let T in s)x=x.concat(f[T]?u.validateSpec({key:T,value:s[T],valueSpec:f[T],validateSpec:u.validateSpec,style:m,styleSpec:l}):[new Fe(T,s[T],`unknown property "${T}"`)]);return x}function Gg(u){let s=[],l=u.value,f=u.key;if(Array.isArray(l)){let m=[],x=[];for(let b in l)l[b].id&&m.includes(l[b].id)&&s.push(new Fe(f,l,`all the sprites' ids must be unique, but ${l[b].id} is duplicated`)),m.push(l[b].id),l[b].url&&x.includes(l[b].url)&&s.push(new Fe(f,l,`all the sprites' URLs must be unique, but ${l[b].url} is duplicated`)),x.push(l[b].url),s=s.concat(ba({key:`${f}[${b}]`,value:l[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return s}return nl({key:f,value:l})}let sd={"*":()=>[],array:df,boolean:function(u){let s=u.value,l=u.key,f=rr(s);return f!=="boolean"?[new Fe(l,s,`boolean expected, ${f} found`)]:[]},number:Ng,color:function(u){let s=u.key,l=u.value,f=rr(l);return f!=="string"?[new Fe(s,l,`color expected, ${f} found`)]:pr.parse(String(l))?[]:[new Fe(s,l,`color expected, "${l}" found`)]},constants:eb,enum:Cs,filter:Fg,function:nd,layer:Bg,object:ba,source:vf,light:Ug,sky:Vg,terrain:$g,projection:function(u){let s=u.value,l=u.styleSpec,f=l.projection,m=u.style,x=rr(s);if(s===void 0)return[];if(x!=="object")return[new Fe("projection",s,`object expected, ${x} found`)];let b=[];for(let T in s)b=b.concat(f[T]?u.validateSpec({key:T,value:s[T],valueSpec:f[T],style:m,styleSpec:l}):[new Fe(T,s[T],`unknown property "${T}"`)]);return b},string:nl,formatted:function(u){return nl(u).length===0?[]:yc(u)},resolvedImage:function(u){return nl(u).length===0?[]:yc(u)},padding:function(u){let s=u.key,l=u.value;if(rr(l)==="array"){if(l.length<1||l.length>4)return[new Fe(s,l,`padding requires 1 to 4 values; ${l.length} values found`)];let f={type:"number"},m=[];for(let x=0;x<l.length;x++)m=m.concat(u.validateSpec({key:`${s}[${x}]`,value:l[x],validateSpec:u.validateSpec,valueSpec:f}));return m}return Ng({key:s,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(u){let s=u.key,l=u.value,f=rr(l),m=u.styleSpec;if(f!=="array"||l.length<1||l.length%2!=0)return[new Fe(s,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let b=0;b<l.length;b+=2)x=x.concat(Cs({key:`${s}[${b}]`,value:l[b],valueSpec:m.layout_symbol["text-anchor"]})),x=x.concat(df({key:`${s}[${b+1}]`,value:l[b+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:m}));return x},sprite:Gg};function _c(u){let s=u.value,l=u.valueSpec,f=u.styleSpec;return u.validateSpec=_c,l.expression&&Xp(sn(s))?nd(u):l.expression&&Qp(bo(s))?yc(u):l.type&&sd[l.type]?sd[l.type](u):ba(ga({},u,{valueSpec:l.type?f[l.type]:l}))}function tb(u){let s=u.value,l=u.key,f=nl(u);return f.length||(s.indexOf("{fontstack}")===-1&&f.push(new Fe(l,s,"\"glyphs\" url must include a \"{fontstack}\" token")),s.indexOf("{range}")===-1&&f.push(new Fe(l,s,"\"glyphs\" url must include a \"{range}\" token"))),f}function za(u,s=Ee){let l=[];return l=l.concat(_c({key:"",value:u,valueSpec:s.$root,styleSpec:s,style:u,validateSpec:_c,objectElementValidators:{glyphs:tb,"*":()=>[]}})),u.constants&&(l=l.concat(eb({key:"constants",value:u.constants,style:u,styleSpec:s,validateSpec:_c}))),Wg(l)}function Vo(u){return function(s){return u(_P(yP({},s),{validateSpec:_c}))}}function Wg(u){return[].concat(u).sort((s,l)=>s.line-l.line)}function wo(u){return function(...s){return Wg(u.apply(this,s))}}za.source=wo(Vo(vf)),za.sprite=wo(Vo(Gg)),za.glyphs=wo(Vo(tb)),za.light=wo(Vo(Ug)),za.sky=wo(Vo(Vg)),za.terrain=wo(Vo($g)),za.layer=wo(Vo(Bg)),za.filter=wo(Vo(Fg)),za.paintProperty=wo(Vo(ad)),za.layoutProperty=wo(Vo(jg));let il=za,bq=il.light,wq=il.sky,rb=il.paintProperty,nb=il.layoutProperty;function Hg(u,s){let l=!1;if(s&&s.length)for(let f of s)u.fire(new Gn(new Error(f.message))),l=!0;return l}class xc{constructor(s,l,f){let m=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;let b=new Int32Array(this.arrayBuffer);s=b[0],this.d=(l=b[1])+2*(f=b[2]);for(let C=0;C<this.d*this.d;C++){let O=b[3+C],R=b[3+C+1];m.push(O===R?null:b.subarray(O,R))}let T=b[3+m.length+1];this.keys=b.subarray(b[3+m.length],T),this.bboxes=b.subarray(T),this.insert=this._insertReadonly}else{this.d=l+2*f;for(let b=0;b<this.d*this.d;b++)m.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=s,this.padding=f,this.scale=l/s,this.uid=0;let x=f/l*s;this.min=-x,this.max=s+x}insert(s,l,f,m,x){this._forEachCell(l,f,m,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,l,f,m,x,b){this.cells[x].push(b)}query(s,l,f,m,x){let b=this.min,T=this.max;if(s<=b&&l<=b&&T<=f&&T<=m&&!x)return Array.prototype.slice.call(this.keys);{let C=[];return this._forEachCell(s,l,f,m,this._queryCell,C,{},x),C}}_queryCell(s,l,f,m,x,b,T,C){let O=this.cells[x];if(O!==null){let R=this.keys,L=this.bboxes;for(let z=0;z<O.length;z++){let U=O[z];if(T[U]===void 0){let H=4*U;(C?C(L[H+0],L[H+1],L[H+2],L[H+3]):s<=L[H+2]&&l<=L[H+3]&&f>=L[H+0]&&m>=L[H+1])?(T[U]=!0,b.push(R[U])):T[U]=!1}}}}_forEachCell(s,l,f,m,x,b,T,C){let O=this._convertToCellCoord(s),R=this._convertToCellCoord(l),L=this._convertToCellCoord(f),z=this._convertToCellCoord(m);for(let U=O;U<=L;U++)for(let H=R;H<=z;H++){let X=this.d*H+U;if((!C||C(this._convertFromCellCoord(U),this._convertFromCellCoord(H),this._convertFromCellCoord(U+1),this._convertFromCellCoord(H+1)))&&x.call(this,s,l,f,m,X,b,T,C))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let s=this.cells,l=3+this.cells.length+1+1,f=0;for(let b=0;b<this.cells.length;b++)f+=this.cells[b].length;let m=new Int32Array(l+f+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let x=l;for(let b=0;b<s.length;b++){let T=s[b];m[3+b]=x,m.set(T,x),x+=T.length}return m[3+s.length]=x,m.set(this.keys,x),x+=this.keys.length,m[3+s.length+1]=x,m.set(this.bboxes,x),x+=this.bboxes.length,m.buffer}static serialize(s,l){let f=s.toArrayBuffer();return l&&l.push(f),{buffer:f}}static deserialize(s){return new xc(s.buffer)}}let ja={};function rt(u,s,l={}){if(ja[u])throw new Error(`${u} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:u,writeable:!1}),ja[u]={klass:s,omit:l.omit||[],shallow:l.shallow||[]}}rt("Object",Object),rt("TransferableGridIndex",xc),rt("Color",pr),rt("Error",Error),rt("AJAXError",Dt),rt("ResolvedImage",xa),rt("StylePropertyFunction",gc),rt("StyleExpression",Jp,{omit:["_evaluator"]}),rt("ZoomDependentExpression",mc),rt("ZoomConstantExpression",vc),rt("CompoundExpression",Fa,{omit:["_evaluate"]});for(let u in lc)lc[u]._classRegistryKey||rt(`Expression_${u}`,lc[u]);function ud(u){return u&&typeof ArrayBuffer!="undefined"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Zg(u){return u.$name||u.constructor._classRegistryKey}function ib(u){return!function(s){if(s===null||typeof s!="object")return!1;let l=Zg(s);return!(!l||l==="Object")}(u)&&(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||u instanceof Error||ud(u)||sr(u)||ArrayBuffer.isView(u)||u instanceof ImageData)}function bc(u,s){if(ib(u))return(ud(u)||sr(u))&&s&&s.push(u),ArrayBuffer.isView(u)&&s&&s.push(u.buffer),u instanceof ImageData&&s&&s.push(u.data.buffer),u;if(Array.isArray(u)){let x=[];for(let b of u)x.push(bc(b,s));return x}if(typeof u!="object")throw new Error("can't serialize object of type "+typeof u);let l=Zg(u);if(!l)throw new Error(`can't serialize object of unregistered class ${u.constructor.name}`);if(!ja[l])throw new Error(`${l} is not registered.`);let{klass:f}=ja[l],m=f.serialize?f.serialize(u,s):{};if(f.serialize){if(s&&m===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let x in u){if(!u.hasOwnProperty(x)||ja[l].omit.indexOf(x)>=0)continue;let b=u[x];m[x]=ja[l].shallow.indexOf(x)>=0?b:bc(b,s)}u instanceof Error&&(m.message=u.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(m.$name=l),m}function wc(u){if(ib(u))return u;if(Array.isArray(u))return u.map(wc);if(typeof u!="object")throw new Error("can't deserialize object of type "+typeof u);let s=Zg(u)||"Object";if(!ja[s])throw new Error(`can't deserialize unregistered class ${s}`);let{klass:l}=ja[s];if(!l)throw new Error(`can't deserialize unregistered class ${s}`);if(l.deserialize)return l.deserialize(u);let f=Object.create(l.prototype);for(let m of Object.keys(u)){if(m==="$name")continue;let x=u[m];f[m]=ja[s].shallow.indexOf(m)>=0?x:wc(x)}return f}class Kg{constructor(){this.first=!0}update(s,l){let f=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=l),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=f,!0))}}let Gt={"Latin-1 Supplement":u=>u>=128&&u<=255,"Hangul Jamo":u=>u>=4352&&u<=4607,Khmer:u=>u>=6016&&u<=6143,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Katakana:u=>u>=12448&&u<=12543,Kanbun:u=>u>=12688&&u<=12703,"CJK Strokes":u=>u>=12736&&u<=12783,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"Private Use Area":u=>u>=57344&&u<=63743,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function Xg(u){for(let s of u)if(Jg(s.charCodeAt(0)))return!0;return!1}function Eq(u){for(let s of u)if(!Ec(s.charCodeAt(0)))return!1;return!0}function Yg(u){let s=u.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch(f){return null}}).filter(l=>l);return new RegExp(s.join("|"),"u")}let Sq=Yg(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ec(u){return!Sq.test(String.fromCodePoint(u))}let ab=Yg(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Jg(u){return!(u!==746&&u!==747&&(u<4352||!(Gt["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Gt["CJK Compatibility"](u)||Gt["CJK Strokes"](u)||!(!Gt["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Gt["Enclosed CJK Letters and Months"](u)||Gt["Ideographic Description Characters"](u)||Gt.Kanbun(u)||Gt.Katakana(u)&&u!==12540||!(!Gt["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Gt["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Gt["Vertical Forms"](u)||Gt["Yijing Hexagram Symbols"](u)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(u))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(u))||ab.test(String.fromCodePoint(u)))))}function ob(u){return!(Jg(u)||function(s){return!!(Gt["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Gt["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Gt["Letterlike Symbols"](s)||Gt["Number Forms"](s)||Gt["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Gt["Control Pictures"](s)&&s!==9251||Gt["Optical Character Recognition"](s)||Gt["Enclosed Alphanumerics"](s)||Gt["Geometric Shapes"](s)||Gt["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Gt["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Gt["CJK Symbols and Punctuation"](s)||Gt.Katakana(s)||Gt["Private Use Area"](s)||Gt["CJK Compatibility Forms"](s)||Gt["Small Form Variants"](s)||Gt["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(u))}let Tq=Yg(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Qg(u){return Tq.test(String.fromCodePoint(u))}function Iq(u,s){return!(!s&&Qg(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Gt.Khmer(u))}function Cq(u){for(let s of u)if(Qg(s.charCodeAt(0)))return!0;return!1}let wa=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(u){this.pluginStatus=u.pluginStatus,this.pluginURL=u.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(u){this.applyArabicShaping=u.applyArabicShaping,this.processBidirectionalText=u.processBidirectionalText,this.processStyledBidirectionalText=u.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Rr{constructor(s,l){this.zoom=s,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Kg,this.transition={})}isSupportedScript(s){return function(l,f){for(let m of l)if(!Iq(m.charCodeAt(0),f))return!1;return!0}(s,wa.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let s=this.zoom,l=s-Math.floor(s),f=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*l}}}class Sc{constructor(s,l){this.property=s,this.value=l,this.expression=function(f,m){if(Xp(f))return new gc(f,m);if(Qp(f)){let x=Dg(f,m);if(x.result==="error")throw new Error(x.value.map(b=>`${b.key}: ${b.message}`).join(", "));return x.value}{let x=f;return m.type==="color"&&typeof f=="string"?x=pr.parse(f):m.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(f)&&(x=Na.parse(f)):x=_a.parse(f),{kind:"constant",evaluate:()=>x}}}(l===void 0?s.specification.default:l,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,l,f){return this.property.possiblyEvaluate(this,s,l,f)}}class ld{constructor(s){this.property=s,this.value=new Sc(s,void 0)}transitioned(s,l){return new sb(this.property,this.value,l,Ie({},s.transition,this.transition),s.now)}untransitioned(){return new sb(this.property,this.value,null,{},0)}}class cd{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return Le(this._values[s].value.value)}setValue(s,l){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new ld(this._values[s].property)),this._values[s].value=new Sc(this._values[s].property,l===null?void 0:Le(l))}getTransition(s){return Le(this._values[s].transition)}setTransition(s,l){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new ld(this._values[s].property)),this._values[s].transition=Le(l)||void 0}serialize(){let s={};for(let l of Object.keys(this._values)){let f=this.getValue(l);f!==void 0&&(s[l]=f);let m=this.getTransition(l);m!==void 0&&(s[`${l}-transition`]=m)}return s}transitioned(s,l){let f=new mf(this._properties);for(let m of Object.keys(this._values))f._values[m]=this._values[m].transitioned(s,l._values[m]);return f}untransitioned(){let s=new mf(this._properties);for(let l of Object.keys(this._values))s._values[l]=this._values[l].untransitioned();return s}}class sb{constructor(s,l,f,m,x){this.property=s,this.value=l,this.begin=x+m.delay||0,this.end=this.begin+m.duration||0,s.specification.transition&&(m.delay||m.duration)&&(this.prior=f)}possiblyEvaluate(s,l,f){let m=s.now||0,x=this.value.possiblyEvaluate(s,l,f),b=this.prior;if(b){if(m>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(m<this.begin)return b.possiblyEvaluate(s,l,f);{let T=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(s,l,f),x,function(C){if(C<=0)return 0;if(C>=1)return 1;let O=C*C,R=O*C;return 4*(C<.5?R:3*(C-O)+R-.75)}(T))}}return x}}class mf{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,l,f){let m=new yf(this._properties);for(let x of Object.keys(this._values))m._values[x]=this._values[x].possiblyEvaluate(s,l,f);return m}hasTransition(){for(let s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class gf{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return this._values[s].value!==void 0}getValue(s){return Le(this._values[s].value)}setValue(s,l){this._values[s]=new Sc(this._values[s].property,l===null?void 0:Le(l))}serialize(){let s={};for(let l of Object.keys(this._values)){let f=this.getValue(l);f!==void 0&&(s[l]=f)}return s}possiblyEvaluate(s,l,f){let m=new yf(this._properties);for(let x of Object.keys(this._values))m._values[x]=this._values[x].possiblyEvaluate(s,l,f);return m}}class $o{constructor(s,l,f){this.property=s,this.value=l,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,l,f,m){return this.property.evaluate(this.value,this.parameters,s,l,f,m)}}class yf{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class it{constructor(s){this.specification=s}possiblyEvaluate(s,l){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(l)}interpolate(s,l,f){let m=Wi[this.specification.type];return m?m(s,l,f):s}}class mt{constructor(s,l){this.specification=s,this.overrides=l}possiblyEvaluate(s,l,f,m){return new $o(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(l,null,{},f,m)}:s.expression,l)}interpolate(s,l,f){if(s.value.kind!=="constant"||l.value.kind!=="constant")return s;if(s.value.value===void 0||l.value.value===void 0)return new $o(this,{kind:"constant",value:void 0},s.parameters);let m=Wi[this.specification.type];if(m){let x=m(s.value.value,l.value.value,f);return new $o(this,{kind:"constant",value:x},s.parameters)}return s}evaluate(s,l,f,m,x,b){return s.kind==="constant"?s.value:s.evaluate(l,f,m,x,b)}}class hd extends mt{possiblyEvaluate(s,l,f,m){if(s.value===void 0)return new $o(this,{kind:"constant",value:void 0},l);if(s.expression.kind==="constant"){let x=s.expression.evaluate(l,null,{},f,m),b=s.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,T=this._calculate(b,b,b,l);return new $o(this,{kind:"constant",value:T},l)}if(s.expression.kind==="camera"){let x=this._calculate(s.expression.evaluate({zoom:l.zoom-1}),s.expression.evaluate({zoom:l.zoom}),s.expression.evaluate({zoom:l.zoom+1}),l);return new $o(this,{kind:"constant",value:x},l)}return new $o(this,s.expression,l)}evaluate(s,l,f,m,x,b){if(s.kind==="source"){let T=s.evaluate(l,f,m,x,b);return this._calculate(T,T,T,l)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(l.zoom)-1},f,m),s.evaluate({zoom:Math.floor(l.zoom)},f,m),s.evaluate({zoom:Math.floor(l.zoom)+1},f,m),l):s.value}_calculate(s,l,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:s,to:l}:{from:f,to:l}}interpolate(s){return s}}class fd{constructor(s){this.specification=s}possiblyEvaluate(s,l,f,m){if(s.value!==void 0){if(s.expression.kind==="constant"){let x=s.expression.evaluate(l,null,{},f,m);return this._calculate(x,x,x,l)}return this._calculate(s.expression.evaluate(new Rr(Math.floor(l.zoom-1),l)),s.expression.evaluate(new Rr(Math.floor(l.zoom),l)),s.expression.evaluate(new Rr(Math.floor(l.zoom+1),l)),l)}}_calculate(s,l,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:s,to:l}:{from:f,to:l}}interpolate(s){return s}}class ey{constructor(s){this.specification=s}possiblyEvaluate(s,l,f,m){return!!s.expression.evaluate(l,null,{},f,m)}interpolate(){return!1}}class _{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let l in s){let f=s[l];f.specification.overridable&&this.overridableProperties.push(l);let m=this.defaultPropertyValues[l]=new Sc(f,void 0),x=this.defaultTransitionablePropertyValues[l]=new ld(f);this.defaultTransitioningPropertyValues[l]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=m.possiblyEvaluate({})}}}rt("DataDrivenProperty",mt),rt("DataConstantProperty",it),rt("CrossFadedDataDrivenProperty",hd),rt("CrossFadedProperty",fd),rt("ColorRampProperty",ey);let o="-transition";class c extends Es{constructor(s,l){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),l.layout&&(this._unevaluatedLayout=new gf(l.layout)),l.paint)){this._transitionablePaint=new cd(l.paint);for(let f in s.paint)this.setPaintProperty(f,s.paint[f],{validate:!1});for(let f in s.layout)this.setLayoutProperty(f,s.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new yf(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,l,f={}){l!=null&&this._validate(nb,`layers.${this.id}.layout.${s}`,s,l,f)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,l):this.visibility=l)}getPaintProperty(s){return s.endsWith(o)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,l,f={}){if(l!=null&&this._validate(rb,`layers.${this.id}.paint.${s}`,s,l,f))return!1;if(s.endsWith(o))return this._transitionablePaint.setTransition(s.slice(0,-11),l||void 0),!1;{let m=this._transitionablePaint._values[s],x=m.property.specification["property-type"]==="cross-faded-data-driven",b=m.value.isDataDriven(),T=m.value;this._transitionablePaint.setValue(s,l),this._handleSpecialPaintPropertyUpdate(s);let C=this._transitionablePaint._values[s].value;return C.isDataDriven()||b||x||this._handleOverridablePaintPropertyUpdate(s,T,C)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,l,f){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,l){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,l)}serialize(){let s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),Ue(s,(l,f)=>!(l===void 0||f==="layout"&&!Object.keys(l).length||f==="paint"&&!Object.keys(l).length))}_validate(s,l,f,m,x={}){return(!x||x.validate!==!1)&&Hg(this,s.call(il,{key:l,layerType:this.type,objectKey:f,value:m,styleSpec:Ee,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let s in this.paint._values){let l=this.paint.get(s);if(l instanceof $o&&fc(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}let d={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class v{constructor(s,l){this._structArray=s,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class y{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,l){return s._trim(),l&&(s.isTransferred=!0,l.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){let l=Object.create(this.prototype);return l.arrayBuffer=s.arrayBuffer,l.length=s.length,l.capacity=s.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function I(u,s=1){let l=0,f=0;return{members:u.map(m=>{let x=d[m.type].BYTES_PER_ELEMENT,b=l=A(l,Math.max(s,x)),T=m.components||1;return f=Math.max(f,x),l+=x*T,{name:m.name,type:m.type,components:T,offset:b}}),size:A(l,Math.max(f,s)),alignment:s}}function A(u,s){return Math.ceil(u/s)*s}class M extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l){let f=this.length;return this.resize(f+1),this.emplace(f,s,l)}emplace(s,l,f){let m=2*s;return this.int16[m+0]=l,this.int16[m+1]=f,s}}M.prototype.bytesPerElement=4,rt("StructArrayLayout2i4",M);class D extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,f){let m=this.length;return this.resize(m+1),this.emplace(m,s,l,f)}emplace(s,l,f,m){let x=3*s;return this.int16[x+0]=l,this.int16[x+1]=f,this.int16[x+2]=m,s}}D.prototype.bytesPerElement=6,rt("StructArrayLayout3i6",D);class N extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,f,m){let x=this.length;return this.resize(x+1),this.emplace(x,s,l,f,m)}emplace(s,l,f,m,x){let b=4*s;return this.int16[b+0]=l,this.int16[b+1]=f,this.int16[b+2]=m,this.int16[b+3]=x,s}}N.prototype.bytesPerElement=8,rt("StructArrayLayout4i8",N);class F extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,f,m,x,b){let T=this.length;return this.resize(T+1),this.emplace(T,s,l,f,m,x,b)}emplace(s,l,f,m,x,b,T){let C=6*s;return this.int16[C+0]=l,this.int16[C+1]=f,this.int16[C+2]=m,this.int16[C+3]=x,this.int16[C+4]=b,this.int16[C+5]=T,s}}F.prototype.bytesPerElement=12,rt("StructArrayLayout2i4i12",F);class G extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,f,m,x,b){let T=this.length;return this.resize(T+1),this.emplace(T,s,l,f,m,x,b)}emplace(s,l,f,m,x,b,T){let C=4*s,O=8*s;return this.int16[C+0]=l,this.int16[C+1]=f,this.uint8[O+4]=m,this.uint8[O+5]=x,this.uint8[O+6]=b,this.uint8[O+7]=T,s}}G.prototype.bytesPerElement=8,rt("StructArrayLayout2i4ub8",G);class Y extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l){let f=this.length;return this.resize(f+1),this.emplace(f,s,l)}emplace(s,l,f){let m=2*s;return this.float32[m+0]=l,this.float32[m+1]=f,s}}Y.prototype.bytesPerElement=8,rt("StructArrayLayout2f8",Y);class ee extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,f,m,x,b,T,C,O,R){let L=this.length;return this.resize(L+1),this.emplace(L,s,l,f,m,x,b,T,C,O,R)}emplace(s,l,f,m,x,b,T,C,O,R,L){let z=10*s;return this.uint16[z+0]=l,this.uint16[z+1]=f,this.uint16[z+2]=m,this.uint16[z+3]=x,this.uint16[z+4]=b,this.uint16[z+5]=T,this.uint16[z+6]=C,this.uint16[z+7]=O,this.uint16[z+8]=R,this.uint16[z+9]=L,s}}ee.prototype.bytesPerElement=20,rt("StructArrayLayout10ui20",ee);class ae extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,f,m,x,b,T,C,O,R,L,z){let U=this.length;return this.resize(U+1),this.emplace(U,s,l,f,m,x,b,T,C,O,R,L,z)}emplace(s,l,f,m,x,b,T,C,O,R,L,z,U){let H=12*s;return this.int16[H+0]=l,this.int16[H+1]=f,this.int16[H+2]=m,this.int16[H+3]=x,this.uint16[H+4]=b,this.uint16[H+5]=T,this.uint16[H+6]=C,this.uint16[H+7]=O,this.int16[H+8]=R,this.int16[H+9]=L,this.int16[H+10]=z,this.int16[H+11]=U,s}}ae.prototype.bytesPerElement=24,rt("StructArrayLayout4i4ui4i24",ae);class le extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,f){let m=this.length;return this.resize(m+1),this.emplace(m,s,l,f)}emplace(s,l,f,m){let x=3*s;return this.float32[x+0]=l,this.float32[x+1]=f,this.float32[x+2]=m,s}}le.prototype.bytesPerElement=12,rt("StructArrayLayout3f12",le);class ce extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){let l=this.length;return this.resize(l+1),this.emplace(l,s)}emplace(s,l){return this.uint32[1*s+0]=l,s}}ce.prototype.bytesPerElement=4,rt("StructArrayLayout1ul4",ce);class fe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,f,m,x,b,T,C,O){let R=this.length;return this.resize(R+1),this.emplace(R,s,l,f,m,x,b,T,C,O)}emplace(s,l,f,m,x,b,T,C,O,R){let L=10*s,z=5*s;return this.int16[L+0]=l,this.int16[L+1]=f,this.int16[L+2]=m,this.int16[L+3]=x,this.int16[L+4]=b,this.int16[L+5]=T,this.uint32[z+3]=C,this.uint16[L+8]=O,this.uint16[L+9]=R,s}}fe.prototype.bytesPerElement=20,rt("StructArrayLayout6i1ul2ui20",fe);class re extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,f,m,x,b){let T=this.length;return this.resize(T+1),this.emplace(T,s,l,f,m,x,b)}emplace(s,l,f,m,x,b,T){let C=6*s;return this.int16[C+0]=l,this.int16[C+1]=f,this.int16[C+2]=m,this.int16[C+3]=x,this.int16[C+4]=b,this.int16[C+5]=T,s}}re.prototype.bytesPerElement=12,rt("StructArrayLayout2i2i2i12",re);class ve extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,f,m,x){let b=this.length;return this.resize(b+1),this.emplace(b,s,l,f,m,x)}emplace(s,l,f,m,x,b){let T=4*s,C=8*s;return this.float32[T+0]=l,this.float32[T+1]=f,this.float32[T+2]=m,this.int16[C+6]=x,this.int16[C+7]=b,s}}ve.prototype.bytesPerElement=16,rt("StructArrayLayout2f1f2i16",ve);class ge extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,f,m,x,b){let T=this.length;return this.resize(T+1),this.emplace(T,s,l,f,m,x,b)}emplace(s,l,f,m,x,b,T){let C=16*s,O=4*s,R=8*s;return this.uint8[C+0]=l,this.uint8[C+1]=f,this.float32[O+1]=m,this.float32[O+2]=x,this.int16[R+6]=b,this.int16[R+7]=T,s}}ge.prototype.bytesPerElement=16,rt("StructArrayLayout2ub2f2i16",ge);class be extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,f){let m=this.length;return this.resize(m+1),this.emplace(m,s,l,f)}emplace(s,l,f,m){let x=3*s;return this.uint16[x+0]=l,this.uint16[x+1]=f,this.uint16[x+2]=m,s}}be.prototype.bytesPerElement=6,rt("StructArrayLayout3ui6",be);class Pe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,f,m,x,b,T,C,O,R,L,z,U,H,X,ne,ue){let xe=this.length;return this.resize(xe+1),this.emplace(xe,s,l,f,m,x,b,T,C,O,R,L,z,U,H,X,ne,ue)}emplace(s,l,f,m,x,b,T,C,O,R,L,z,U,H,X,ne,ue,xe){let pe=24*s,ye=12*s,Se=48*s;return this.int16[pe+0]=l,this.int16[pe+1]=f,this.uint16[pe+2]=m,this.uint16[pe+3]=x,this.uint32[ye+2]=b,this.uint32[ye+3]=T,this.uint32[ye+4]=C,this.uint16[pe+10]=O,this.uint16[pe+11]=R,this.uint16[pe+12]=L,this.float32[ye+7]=z,this.float32[ye+8]=U,this.uint8[Se+36]=H,this.uint8[Se+37]=X,this.uint8[Se+38]=ne,this.uint32[ye+10]=ue,this.int16[pe+22]=xe,s}}Pe.prototype.bytesPerElement=48,rt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Pe);class ke extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,f,m,x,b,T,C,O,R,L,z,U,H,X,ne,ue,xe,pe,ye,Se,Re,Je,pt,Ke,Ge,st,nt){let tt=this.length;return this.resize(tt+1),this.emplace(tt,s,l,f,m,x,b,T,C,O,R,L,z,U,H,X,ne,ue,xe,pe,ye,Se,Re,Je,pt,Ke,Ge,st,nt)}emplace(s,l,f,m,x,b,T,C,O,R,L,z,U,H,X,ne,ue,xe,pe,ye,Se,Re,Je,pt,Ke,Ge,st,nt,tt){let Ce=32*s,ut=16*s;return this.int16[Ce+0]=l,this.int16[Ce+1]=f,this.int16[Ce+2]=m,this.int16[Ce+3]=x,this.int16[Ce+4]=b,this.int16[Ce+5]=T,this.int16[Ce+6]=C,this.int16[Ce+7]=O,this.uint16[Ce+8]=R,this.uint16[Ce+9]=L,this.uint16[Ce+10]=z,this.uint16[Ce+11]=U,this.uint16[Ce+12]=H,this.uint16[Ce+13]=X,this.uint16[Ce+14]=ne,this.uint16[Ce+15]=ue,this.uint16[Ce+16]=xe,this.uint16[Ce+17]=pe,this.uint16[Ce+18]=ye,this.uint16[Ce+19]=Se,this.uint16[Ce+20]=Re,this.uint16[Ce+21]=Je,this.uint16[Ce+22]=pt,this.uint32[ut+12]=Ke,this.float32[ut+13]=Ge,this.float32[ut+14]=st,this.uint16[Ce+30]=nt,this.uint16[Ce+31]=tt,s}}ke.prototype.bytesPerElement=64,rt("StructArrayLayout8i15ui1ul2f2ui64",ke);class We extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){let l=this.length;return this.resize(l+1),this.emplace(l,s)}emplace(s,l){return this.float32[1*s+0]=l,s}}We.prototype.bytesPerElement=4,rt("StructArrayLayout1f4",We);class et extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,f){let m=this.length;return this.resize(m+1),this.emplace(m,s,l,f)}emplace(s,l,f,m){let x=3*s;return this.uint16[6*s+0]=l,this.float32[x+1]=f,this.float32[x+2]=m,s}}et.prototype.bytesPerElement=12,rt("StructArrayLayout1ui2f12",et);class Ve extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,f){let m=this.length;return this.resize(m+1),this.emplace(m,s,l,f)}emplace(s,l,f,m){let x=4*s;return this.uint32[2*s+0]=l,this.uint16[x+2]=f,this.uint16[x+3]=m,s}}Ve.prototype.bytesPerElement=8,rt("StructArrayLayout1ul2ui8",Ve);class Be extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l){let f=this.length;return this.resize(f+1),this.emplace(f,s,l)}emplace(s,l,f){let m=2*s;return this.uint16[m+0]=l,this.uint16[m+1]=f,s}}Be.prototype.bytesPerElement=4,rt("StructArrayLayout2ui4",Be);class at extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){let l=this.length;return this.resize(l+1),this.emplace(l,s)}emplace(s,l){return this.uint16[1*s+0]=l,s}}at.prototype.bytesPerElement=2,rt("StructArrayLayout1ui2",at);class wt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,f,m){let x=this.length;return this.resize(x+1),this.emplace(x,s,l,f,m)}emplace(s,l,f,m,x){let b=4*s;return this.float32[b+0]=l,this.float32[b+1]=f,this.float32[b+2]=m,this.float32[b+3]=x,s}}wt.prototype.bytesPerElement=16,rt("StructArrayLayout4f16",wt);class $e extends v{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new w(this.anchorPointX,this.anchorPointY)}}$e.prototype.size=20;class Xe extends fe{get(s){return new $e(this,s)}}rt("CollisionBoxArray",Xe);class _t extends v{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}_t.prototype.size=48;class Dr extends Pe{get(s){return new _t(this,s)}}rt("PlacedSymbolArray",Dr);class Pt extends v{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Pt.prototype.size=64;class Vt extends ke{get(s){return new Pt(this,s)}}rt("SymbolInstanceArray",Vt);class Lr extends We{getoffsetX(s){return this.float32[1*s+0]}}rt("GlyphOffsetArray",Lr);class oi extends D{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}rt("SymbolLineVertexArray",oi);class Eo extends v{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Eo.prototype.size=12;class kr extends et{get(s){return new Eo(this,s)}}rt("TextAnchorOffsetArray",kr);class Zi extends v{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Zi.prototype.size=8;class Ti extends Ve{get(s){return new Zi(this,s)}}rt("FeatureIndexArray",Ti);class si extends M{}class Ii extends M{}class Go extends M{}class Tc extends F{}class pd extends G{}class Ic extends Y{}class Ba extends ee{}class dd extends ae{}class ty extends le{}class Ua extends ce{}class Va extends re{}class ru extends ge{}class So extends be{}class Zn extends Be{}let ui=I([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ea}=ui;class Wt{constructor(s=[]){this.segments=s}prepareSegment(s,l,f,m){let x=this.segments[this.segments.length-1];return s>Wt.MAX_VERTEX_ARRAY_LENGTH&&Rt(`Max vertices per segment is ${Wt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!x||x.vertexLength+s>Wt.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==m)&&(x={vertexOffset:l.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},m!==void 0&&(x.sortKey=m),this.segments.push(x)),x}get(){return this.segments}destroy(){for(let s of this.segments)for(let l in s.vaos)s.vaos[l].destroy()}static simpleSegment(s,l,f,m){return new Wt([{vertexOffset:s,primitiveOffset:l,vertexLength:f,primitiveLength:m,vaos:{},sortKey:0}])}}function al(u,s){return 256*(u=te(Math.floor(u),0,255))+te(Math.floor(s),0,255)}Wt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,rt("SegmentVector",Wt);let Cc=I([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ac={exports:{}},ub={exports:{}};ub.exports=function(u,s){var l,f,m,x,b,T,C,O;for(f=u.length-(l=3&u.length),m=s,b=3432918353,T=461845907,O=0;O<f;)C=255&u.charCodeAt(O)|(255&u.charCodeAt(++O))<<8|(255&u.charCodeAt(++O))<<16|(255&u.charCodeAt(++O))<<24,++O,m=27492+(65535&(x=5*(65535&(m=(m^=C=(65535&(C=(C=(65535&C)*b+(((C>>>16)*b&65535)<<16)&4294967295)<<15|C>>>17))*T+(((C>>>16)*T&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(C=0,l){case 3:C^=(255&u.charCodeAt(O+2))<<16;case 2:C^=(255&u.charCodeAt(O+1))<<8;case 1:m^=C=(65535&(C=(C=(65535&(C^=255&u.charCodeAt(O)))*b+(((C>>>16)*b&65535)<<16)&4294967295)<<15|C>>>17))*T+(((C>>>16)*T&65535)<<16)&4294967295;}return m^=u.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var Aq=ub.exports,lb={exports:{}};lb.exports=function(u,s){for(var l,f=u.length,m=s^f,x=0;f>=4;)l=1540483477*(65535&(l=255&u.charCodeAt(x)|(255&u.charCodeAt(++x))<<8|(255&u.charCodeAt(++x))<<16|(255&u.charCodeAt(++x))<<24))+((1540483477*(l>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),f-=4,++x;switch(f){case 3:m^=(255&u.charCodeAt(x+2))<<16;case 2:m^=(255&u.charCodeAt(x+1))<<8;case 1:m=1540483477*(65535&(m^=255&u.charCodeAt(x)))+((1540483477*(m>>>16)&65535)<<16);}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var nu=Aq,cb=lb.exports;Ac.exports=nu,Ac.exports.murmur3=nu,Ac.exports.murmur2=cb;var vd=h(Ac.exports);class _f{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,l,f,m){this.ids.push(md(s)),this.positions.push(l,f,m)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let l=md(s),f=0,m=this.ids.length-1;for(;f<m;){let b=f+m>>1;this.ids[b]>=l?m=b:f=b+1}let x=[];for(;this.ids[f]===l;)x.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return x}static serialize(s,l){let f=new Float64Array(s.ids),m=new Uint32Array(s.positions);return gd(f,m,0,f.length-1),l&&l.push(f.buffer,m.buffer),{ids:f,positions:m}}static deserialize(s){let l=new _f;return l.ids=s.ids,l.positions=s.positions,l.indexed=!0,l}}function md(u){let s=+u;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:vd(String(u))}function gd(u,s,l,f){for(;l<f;){let m=u[l+f>>1],x=l-1,b=f+1;for(;;){do x++;while(u[x]<m);do b--;while(u[b]>m);if(x>=b)break;qc(u,x,b),qc(s,3*x,3*b),qc(s,3*x+1,3*b+1),qc(s,3*x+2,3*b+2)}b-l<f-b?(gd(u,s,l,b),l=b+1):(gd(u,s,b+1,f),f=b)}}function qc(u,s,l){let f=u[s];u[s]=u[l],u[l]=f}rt("FeaturePositionMap",_f);class xf{constructor(s,l){this.gl=s.gl,this.location=l}}class hb extends xf{constructor(s,l){super(s,l),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class FU extends xf{constructor(s,l){super(s,l),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class zU extends xf{constructor(s,l){super(s,l),this.current=pr.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}let MAe=new Float32Array(16);function qq(u){return[al(255*u.r,255*u.g),al(255*u.b,255*u.a)]}class ry{constructor(s,l,f){this.value=s,this.uniformNames=l.map(m=>`u_${m}`),this.type=f}setUniform(s,l,f){s.set(f.constantOr(this.value))}getBinding(s,l,f){return this.type==="color"?new zU(s,l):new hb(s,l)}}class yd{constructor(s,l){this.uniformNames=l.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=s.tlbr}setUniform(s,l,f,m){let x=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&s.set(x)}getBinding(s,l,f){return f.substr(0,9)==="u_pattern"?new FU(s,l):new hb(s,l)}}class ol{constructor(s,l,f,m){this.expression=s,this.type=f,this.maxValue=0,this.paintVertexAttributes=l.map(x=>({name:`a_${x}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(s,l,f,m,x){let b=this.paintVertexArray.length,T=this.expression.evaluate(new Rr(0),l,{},m,[],x);this.paintVertexArray.resize(s),this._setPaintValue(b,s,T)}updatePaintArray(s,l,f,m){let x=this.expression.evaluate({zoom:0},f,m);this._setPaintValue(s,l,x)}_setPaintValue(s,l,f){if(this.type==="color"){let m=qq(f);for(let x=s;x<l;x++)this.paintVertexArray.emplace(x,m[0],m[1])}else{for(let m=s;m<l;m++)this.paintVertexArray.emplace(m,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class As{constructor(s,l,f,m,x,b){this.expression=s,this.uniformNames=l.map(T=>`u_${T}_t`),this.type=f,this.useIntegerZoom=m,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=l.map(T=>({name:`a_${T}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(s,l,f,m,x){let b=this.expression.evaluate(new Rr(this.zoom),l,{},m,[],x),T=this.expression.evaluate(new Rr(this.zoom+1),l,{},m,[],x),C=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(C,s,b,T)}updatePaintArray(s,l,f,m){let x=this.expression.evaluate({zoom:this.zoom},f,m),b=this.expression.evaluate({zoom:this.zoom+1},f,m);this._setPaintValue(s,l,x,b)}_setPaintValue(s,l,f,m){if(this.type==="color"){let x=qq(f),b=qq(m);for(let T=s;T<l;T++)this.paintVertexArray.emplace(T,x[0],x[1],b[0],b[1])}else{for(let x=s;x<l;x++)this.paintVertexArray.emplace(x,f,m);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(m))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,l){let f=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,m=te(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);s.set(m)}getBinding(s,l,f){return new hb(s,l)}}class Pc{constructor(s,l,f,m,x,b){this.expression=s,this.type=l,this.useIntegerZoom=f,this.zoom=m,this.layerId=b,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(s,l,f){let m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(m,s,l.patterns&&l.patterns[this.layerId],f)}updatePaintArray(s,l,f,m,x){this._setPaintValues(s,l,f.patterns&&f.patterns[this.layerId],x)}_setPaintValues(s,l,f,m){if(!m||!f)return;let{min:x,mid:b,max:T}=f,C=m[x],O=m[b],R=m[T];if(C&&O&&R)for(let L=s;L<l;L++)this.zoomInPaintVertexArray.emplace(L,O.tl[0],O.tl[1],O.br[0],O.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],O.pixelRatio,C.pixelRatio),this.zoomOutPaintVertexArray.emplace(L,O.tl[0],O.tl[1],O.br[0],O.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],O.pixelRatio,R.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,Cc.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,Cc.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class jU{constructor(s,l,f){this.binders={},this._buffers=[];let m=[];for(let x in s.paint._values){if(!f(x))continue;let b=s.paint.get(x);if(!(b instanceof $o&&fc(b.property.specification)))continue;let T=OAe(x,s.type),C=b.value,O=b.property.specification.type,R=b.property.useIntegerZoom,L=b.property.specification["property-type"],z=L==="cross-faded"||L==="cross-faded-data-driven";if(C.kind==="constant")this.binders[x]=z?new yd(C.value,T):new ry(C.value,T,O),m.push(`/u_${x}`);else if(C.kind==="source"||z){let U=BU(x,O,"source");this.binders[x]=z?new Pc(C,O,R,l,U,s.id):new ol(C,T,O,U),m.push(`/a_${x}`)}else{let U=BU(x,O,"composite");this.binders[x]=new As(C,T,O,R,l,U),m.push(`/z_${x}`)}}this.cacheKey=m.sort().join("")}getMaxValue(s){let l=this.binders[s];return l instanceof ol||l instanceof As?l.maxValue:0}populatePaintArrays(s,l,f,m,x){for(let b in this.binders){let T=this.binders[b];(T instanceof ol||T instanceof As||T instanceof Pc)&&T.populatePaintArray(s,l,f,m,x)}}setConstantPatternPositions(s,l){for(let f in this.binders){let m=this.binders[f];m instanceof yd&&m.setConstantPatternPositions(s,l)}}updatePaintArrays(s,l,f,m,x){let b=!1;for(let T in s){let C=l.getPositions(T);for(let O of C){let R=f.feature(O.index);for(let L in this.binders){let z=this.binders[L];if((z instanceof ol||z instanceof As||z instanceof Pc)&&z.expression.isStateDependent===!0){let U=m.paint.get(L);z.expression=U.value,z.updatePaintArray(O.start,O.end,R,s[T],x),b=!0}}}}return b}defines(){let s=[];for(let l in this.binders){let f=this.binders[l];(f instanceof ry||f instanceof yd)&&s.push(...f.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return s}getBinderAttributes(){let s=[];for(let l in this.binders){let f=this.binders[l];if(f instanceof ol||f instanceof As)for(let m=0;m<f.paintVertexAttributes.length;m++)s.push(f.paintVertexAttributes[m].name);else if(f instanceof Pc)for(let m=0;m<Cc.members.length;m++)s.push(Cc.members[m].name)}return s}getBinderUniforms(){let s=[];for(let l in this.binders){let f=this.binders[l];if(f instanceof ry||f instanceof yd||f instanceof As)for(let m of f.uniformNames)s.push(m)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,l){let f=[];for(let m in this.binders){let x=this.binders[m];if(x instanceof ry||x instanceof yd||x instanceof As){for(let b of x.uniformNames)if(l[b]){let T=x.getBinding(s,l[b],b);f.push({name:b,property:m,binding:T})}}}return f}setUniforms(s,l,f,m){for(let{name:x,property:b,binding:T}of l)this.binders[b].setUniform(T,m,f.get(b),x)}updatePaintBuffers(s){this._buffers=[];for(let l in this.binders){let f=this.binders[l];if(s&&f instanceof Pc){let m=s.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(f instanceof ol||f instanceof As)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(s){for(let l in this.binders){let f=this.binders[l];(f instanceof ol||f instanceof As||f instanceof Pc)&&f.upload(s)}this.updatePaintBuffers()}destroy(){for(let s in this.binders){let l=this.binders[s];(l instanceof ol||l instanceof As||l instanceof Pc)&&l.destroy()}}}class bf{constructor(s,l,f=()=>!0){this.programConfigurations={};for(let m of s)this.programConfigurations[m.id]=new jU(m,l,f);this.needsUpload=!1,this._featureMap=new _f,this._bufferOffset=0}populatePaintArrays(s,l,f,m,x,b){for(let T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(s,l,m,x,b);l.id!==void 0&&this._featureMap.add(l.id,f,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,l,f,m){for(let x of f)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(s,this._featureMap,l,x,m)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(let l in this.programConfigurations)this.programConfigurations[l].upload(s);this.needsUpload=!1}}destroy(){for(let s in this.programConfigurations)this.programConfigurations[s].destroy()}}function OAe(u,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${s}-`,"").replace(/-/g,"_")]}function BU(u,s,l){let f={color:{source:Y,composite:wt},number:{source:We,composite:Y}},m=function(x){return{"line-pattern":{source:Ba,composite:Ba},"fill-pattern":{source:Ba,composite:Ba},"fill-extrusion-pattern":{source:Ba,composite:Ba}}[x]}(u);return m&&m[l]||f[s][l]}rt("ConstantBinder",ry),rt("CrossFadedConstantBinder",yd),rt("SourceExpressionBinder",ol),rt("CrossFadedCompositeBinder",Pc),rt("CompositeExpressionBinder",As),rt("ProgramConfiguration",jU,{omit:["_buffers"]}),rt("ProgramConfigurationSet",bf);let En=8192,Pq=Math.pow(2,14)-1,UU=-Pq-1;function wf(u){let s=En/u.extent,l=u.loadGeometry();for(let f=0;f<l.length;f++){let m=l[f];for(let x=0;x<m.length;x++){let b=m[x],T=Math.round(b.x*s),C=Math.round(b.y*s);b.x=te(T,UU,Pq),b.y=te(C,UU,Pq),(T<b.x||T>b.x+1||C<b.y||C>b.y+1)&&Rt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function Ef(u,s){return{type:u.type,id:u.id,properties:u.properties,geometry:s?wf(u):[]}}function fb(u,s,l,f,m){u.emplaceBack(2*s+(f+1)/2,2*l+(m+1)/2)}class Mq{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Ii,this.indexArray=new So,this.segments=new Wt,this.programConfigurations=new bf(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,f){let m=this.layers[0],x=[],b=null,T=!1;m.type==="circle"&&(b=m.layout.get("circle-sort-key"),T=!b.isConstant());for(let{feature:C,id:O,index:R,sourceLayerIndex:L}of s){let z=this.layers[0]._featureFilter.needGeometry,U=Ef(C,z);if(!this.layers[0]._featureFilter.filter(new Rr(this.zoom),U,f))continue;let H=T?b.evaluate(U,{},f):void 0,X={id:O,properties:C.properties,type:C.type,sourceLayerIndex:L,index:R,geometry:z?U.geometry:wf(C),patterns:{},sortKey:H};x.push(X)}T&&x.sort((C,O)=>C.sortKey-O.sortKey);for(let C of x){let{geometry:O,index:R,sourceLayerIndex:L}=C,z=s[R].feature;this.addFeature(C,O,R,f),l.featureIndex.insert(z,O,R,L,this.index)}}update(s,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Ea),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,l,f,m){for(let x of l)for(let b of x){let T=b.x,C=b.y;if(T<0||T>=En||C<0||C>=En)continue;let O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),R=O.vertexLength;fb(this.layoutVertexArray,T,C,-1,-1),fb(this.layoutVertexArray,T,C,1,-1),fb(this.layoutVertexArray,T,C,1,1),fb(this.layoutVertexArray,T,C,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),O.vertexLength+=4,O.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,{},m)}}function VU(u,s){for(let l=0;l<u.length;l++)if(_d(s,u[l]))return!0;for(let l=0;l<s.length;l++)if(_d(u,s[l]))return!0;return!!Oq(u,s)}function RAe(u,s,l){return!!_d(u,s)||!!Rq(s,u,l)}function $U(u,s){if(u.length===1)return WU(s,u[0]);for(let l=0;l<s.length;l++){let f=s[l];for(let m=0;m<f.length;m++)if(_d(u,f[m]))return!0}for(let l=0;l<u.length;l++)if(WU(s,u[l]))return!0;for(let l=0;l<s.length;l++)if(Oq(u,s[l]))return!0;return!1}function DAe(u,s,l){if(u.length>1){if(Oq(u,s))return!0;for(let f=0;f<s.length;f++)if(Rq(s[f],u,l))return!0}for(let f=0;f<u.length;f++)if(Rq(u[f],s,l))return!0;return!1}function Oq(u,s){if(u.length===0||s.length===0)return!1;for(let l=0;l<u.length-1;l++){let f=u[l],m=u[l+1];for(let x=0;x<s.length-1;x++)if(LAe(f,m,s[x],s[x+1]))return!0}return!1}function LAe(u,s,l,f){return ir(u,l,f)!==ir(s,l,f)&&ir(u,s,l)!==ir(u,s,f)}function Rq(u,s,l){let f=l*l;if(s.length===1)return u.distSqr(s[0])<f;for(let m=1;m<s.length;m++)if(GU(u,s[m-1],s[m])<f)return!0;return!1}function GU(u,s,l){let f=s.distSqr(l);if(f===0)return u.distSqr(s);let m=((u.x-s.x)*(l.x-s.x)+(u.y-s.y)*(l.y-s.y))/f;return u.distSqr(m<0?s:m>1?l:l.sub(s)._mult(m)._add(s))}function WU(u,s){let l,f,m,x=!1;for(let b=0;b<u.length;b++){l=u[b];for(let T=0,C=l.length-1;T<l.length;C=T++)f=l[T],m=l[C],f.y>s.y!=m.y>s.y&&s.x<(m.x-f.x)*(s.y-f.y)/(m.y-f.y)+f.x&&(x=!x)}return x}function _d(u,s){let l=!1;for(let f=0,m=u.length-1;f<u.length;m=f++){let x=u[f],b=u[m];x.y>s.y!=b.y>s.y&&s.x<(b.x-x.x)*(s.y-x.y)/(b.y-x.y)+x.x&&(l=!l)}return l}function kAe(u,s,l){let f=l[0],m=l[2];if(u.x<f.x&&s.x<f.x||u.x>m.x&&s.x>m.x||u.y<f.y&&s.y<f.y||u.y>m.y&&s.y>m.y)return!1;let x=ir(u,s,l[0]);return x!==ir(u,s,l[1])||x!==ir(u,s,l[2])||x!==ir(u,s,l[3])}function ny(u,s,l){let f=s.paint.get(u).value;return f.kind==="constant"?f.value:l.programConfigurations.get(s.id).getMaxValue(u)}function pb(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function db(u,s,l,f,m){if(!s[0]&&!s[1])return u;let x=w.convert(s)._mult(m);l==="viewport"&&x._rotate(-f);let b=[];for(let T=0;T<u.length;T++)b.push(u[T].sub(x));return b}let HU,ZU;rt("CircleBucket",Mq,{omit:["layers"]});var NAe={get paint(){return ZU=ZU||new _({"circle-radius":new mt(Ee.paint_circle["circle-radius"]),"circle-color":new mt(Ee.paint_circle["circle-color"]),"circle-blur":new mt(Ee.paint_circle["circle-blur"]),"circle-opacity":new mt(Ee.paint_circle["circle-opacity"]),"circle-translate":new it(Ee.paint_circle["circle-translate"]),"circle-translate-anchor":new it(Ee.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new it(Ee.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new it(Ee.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new mt(Ee.paint_circle["circle-stroke-width"]),"circle-stroke-color":new mt(Ee.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new mt(Ee.paint_circle["circle-stroke-opacity"])})},get layout(){return HU=HU||new _({"circle-sort-key":new mt(Ee.layout_circle["circle-sort-key"])})}},Ki=1e-6,xd=typeof Float32Array!="undefined"?Float32Array:Array;function Dq(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function KU(u,s,l){var f=s[0],m=s[1],x=s[2],b=s[3],T=s[4],C=s[5],O=s[6],R=s[7],L=s[8],z=s[9],U=s[10],H=s[11],X=s[12],ne=s[13],ue=s[14],xe=s[15],pe=l[0],ye=l[1],Se=l[2],Re=l[3];return u[0]=pe*f+ye*T+Se*L+Re*X,u[1]=pe*m+ye*C+Se*z+Re*ne,u[2]=pe*x+ye*O+Se*U+Re*ue,u[3]=pe*b+ye*R+Se*H+Re*xe,u[4]=(pe=l[4])*f+(ye=l[5])*T+(Se=l[6])*L+(Re=l[7])*X,u[5]=pe*m+ye*C+Se*z+Re*ne,u[6]=pe*x+ye*O+Se*U+Re*ue,u[7]=pe*b+ye*R+Se*H+Re*xe,u[8]=(pe=l[8])*f+(ye=l[9])*T+(Se=l[10])*L+(Re=l[11])*X,u[9]=pe*m+ye*C+Se*z+Re*ne,u[10]=pe*x+ye*O+Se*U+Re*ue,u[11]=pe*b+ye*R+Se*H+Re*xe,u[12]=(pe=l[12])*f+(ye=l[13])*T+(Se=l[14])*L+(Re=l[15])*X,u[13]=pe*m+ye*C+Se*z+Re*ne,u[14]=pe*x+ye*O+Se*U+Re*ue,u[15]=pe*b+ye*R+Se*H+Re*xe,u}Math.hypot||(Math.hypot=function(){for(var u=0,s=arguments.length;s--;)u+=arguments[s]*arguments[s];return Math.sqrt(u)});var iy,FAe=KU;function vb(u,s,l){var f=s[0],m=s[1],x=s[2],b=s[3];return u[0]=l[0]*f+l[4]*m+l[8]*x+l[12]*b,u[1]=l[1]*f+l[5]*m+l[9]*x+l[13]*b,u[2]=l[2]*f+l[6]*m+l[10]*x+l[14]*b,u[3]=l[3]*f+l[7]*m+l[11]*x+l[15]*b,u}iy=new xd(4),xd!=Float32Array&&(iy[0]=0,iy[1]=0,iy[2]=0,iy[3]=0);class zAe extends c{constructor(s){super(s,NAe)}createBucket(s){return new Mq(s)}queryRadius(s){let l=s;return ny("circle-radius",this,l)+ny("circle-stroke-width",this,l)+pb(this.paint.get("circle-translate"))}queryIntersectsFeature(s,l,f,m,x,b,T,C){let O=db(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,T),R=this.paint.get("circle-radius").evaluate(l,f)+this.paint.get("circle-stroke-width").evaluate(l,f),L=this.paint.get("circle-pitch-alignment")==="map",z=L?O:function(H,X){return H.map(ne=>XU(ne,X))}(O,C),U=L?R*T:R;for(let H of m)for(let X of H){let ne=L?X:XU(X,C),ue=U,xe=vb([],[X.x,X.y,0,1],C);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ue*=xe[3]/b.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ue*=b.cameraToCenterDistance/xe[3]),RAe(z,ne,ue))return!0}return!1}}function XU(u,s){let l=vb([],[u.x,u.y,0,1],s);return new w(l[0]/l[3],l[1]/l[3])}class YU extends Mq{}let JU;rt("HeatmapBucket",YU,{omit:["layers"]});var jAe={get paint(){return JU=JU||new _({"heatmap-radius":new mt(Ee.paint_heatmap["heatmap-radius"]),"heatmap-weight":new mt(Ee.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new it(Ee.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ey(Ee.paint_heatmap["heatmap-color"]),"heatmap-opacity":new it(Ee.paint_heatmap["heatmap-opacity"])})}};function Lq(u,{width:s,height:l},f,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==s*l*f)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${s*l*f}`)}else m=new Uint8Array(s*l*f);return u.width=s,u.height=l,u.data=m,u}function QU(u,{width:s,height:l},f){if(s===u.width&&l===u.height)return;let m=Lq({},{width:s,height:l},f);kq(u,m,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,s),height:Math.min(u.height,l)},f),u.width=s,u.height=l,u.data=m.data}function kq(u,s,l,f,m,x){if(m.width===0||m.height===0)return s;if(m.width>u.width||m.height>u.height||l.x>u.width-m.width||l.y>u.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>s.width||m.height>s.height||f.x>s.width-m.width||f.y>s.height-m.height)throw new RangeError("out of range destination coordinates for image copy");let b=u.data,T=s.data;if(b===T)throw new Error("srcData equals dstData, so image is already copied");for(let C=0;C<m.height;C++){let O=((l.y+C)*u.width+l.x)*x,R=((f.y+C)*s.width+f.x)*x;for(let L=0;L<m.width*x;L++)T[R+L]=b[O+L]}return s}class ay{constructor(s,l){Lq(this,s,1,l)}resize(s){QU(this,s,1)}clone(){return new ay({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,l,f,m,x){kq(s,l,f,m,x,1)}}class To{constructor(s,l){Lq(this,s,4,l)}resize(s){QU(this,s,4)}replace(s,l){l?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new To({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,l,f,m,x){kq(s,l,f,m,x,4)}}function e5(u){let s={},l=u.resolution||256,f=u.clips?u.clips.length:1,m=u.image||new To({width:l,height:f});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);let x=(b,T,C)=>{s[u.evaluationKey]=C;let O=u.expression.evaluate(s);m.data[b+T+0]=Math.floor(255*O.r/O.a),m.data[b+T+1]=Math.floor(255*O.g/O.a),m.data[b+T+2]=Math.floor(255*O.b/O.a),m.data[b+T+3]=Math.floor(255*O.a)};if(u.clips)for(let b=0,T=0;b<f;++b,T+=4*l)for(let C=0,O=0;C<l;C++,O+=4){let R=C/(l-1),{start:L,end:z}=u.clips[b];x(T,O,L*(1-R)+z*R)}else for(let b=0,T=0;b<l;b++,T+=4)x(0,T,b/(l-1));return m}rt("AlphaImage",ay),rt("RGBAImage",To);let Nq="big-fb";class BAe extends c{createBucket(s){return new YU(s)}constructor(s){super(s,jAe),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=e5({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Nq)&&this.heatmapFbos.delete(Nq)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let t5;var UAe={get paint(){return t5=t5||new _({"hillshade-illumination-direction":new it(Ee.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new it(Ee.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new it(Ee.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new it(Ee.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new it(Ee.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new it(Ee.paint_hillshade["hillshade-accent-color"])})}};class VAe extends c{constructor(s){super(s,UAe)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let $Ae=I([{name:"a_pos",components:2,type:"Int16"}],4),{members:GAe}=$Ae;function r5(u,s,l=2){let f=s&&s.length,m=f?s[0]*l:u.length,x=n5(u,0,m,l,!0),b=[];if(!x||x.next===x.prev)return b;let T,C,O;if(f&&(x=function(R,L,z,U){let H=[];for(let X=0,ne=L.length;X<ne;X++){let ue=n5(R,L[X]*U,X<ne-1?L[X+1]*U:R.length,U,!1);ue===ue.next&&(ue.steiner=!0),H.push(QAe(ue))}H.sort(XAe);for(let X=0;X<H.length;X++)z=YAe(H[X],z);return z}(u,s,x,l)),u.length>80*l){T=1/0,C=1/0;let R=-1/0,L=-1/0;for(let z=l;z<m;z+=l){let U=u[z],H=u[z+1];U<T&&(T=U),H<C&&(C=H),U>R&&(R=U),H>L&&(L=H)}O=Math.max(R-T,L-C),O=O!==0?32767/O:0}return oy(x,b,l,T,C,O,0),b}function n5(u,s,l,f,m){let x;if(m===function(b,T,C,O){let R=0;for(let L=T,z=C-O;L<C;L+=O)R+=(b[z]-b[L])*(b[L+1]+b[z+1]),z=L;return R}(u,s,l,f)>0)for(let b=s;b<l;b+=f)x=o5(b/f|0,u[b],u[b+1],x);else for(let b=l-f;b>=s;b-=f)x=o5(b/f|0,u[b],u[b+1],x);return x&&mb(x,x.next)&&(uy(x),x=x.next),x}function Sf(u,s){if(!u)return u;s||(s=u);let l,f=u;do if(l=!1,f.steiner||!mb(f,f.next)&&gn(f.prev,f,f.next)!==0)f=f.next;else{if(uy(f),f=s=f.prev,f===f.next)break;l=!0}while(l||f!==s);return s}function oy(u,s,l,f,m,x,b){if(!u)return;!b&&x&&function(C,O,R,L){let z=C;do z.z===0&&(z.z=Fq(z.x,z.y,O,R,L)),z.prevZ=z.prev,z.nextZ=z.next,z=z.next;while(z!==C);z.prevZ.nextZ=null,z.prevZ=null,function(U){let H,X=1;do{let ne,ue=U;U=null;let xe=null;for(H=0;ue;){H++;let pe=ue,ye=0;for(let Re=0;Re<X&&(ye++,pe=pe.nextZ,pe);Re++);let Se=X;for(;ye>0||Se>0&&pe;)ye!==0&&(Se===0||!pe||ue.z<=pe.z)?(ne=ue,ue=ue.nextZ,ye--):(ne=pe,pe=pe.nextZ,Se--),xe?xe.nextZ=ne:U=ne,ne.prevZ=xe,xe=ne;ue=pe}xe.nextZ=null,X*=2}while(H>1)}(z)}(u,f,m,x);let T=u;for(;u.prev!==u.next;){let C=u.prev,O=u.next;if(x?HAe(u,f,m,x):WAe(u))s.push(C.i,u.i,O.i),uy(u),u=O.next,T=O.next;else if((u=O)===T){b?b===1?oy(u=ZAe(Sf(u),s),s,l,f,m,x,2):b===2&&KAe(u,s,l,f,m,x):oy(Sf(u),s,l,f,m,x,1);break}}}function WAe(u){let s=u.prev,l=u,f=u.next;if(gn(s,l,f)>=0)return!1;let m=s.x,x=l.x,b=f.x,T=s.y,C=l.y,O=f.y,R=m<x?m<b?m:b:x<b?x:b,L=T<C?T<O?T:O:C<O?C:O,z=m>x?m>b?m:b:x>b?x:b,U=T>C?T>O?T:O:C>O?C:O,H=f.next;for(;H!==s;){if(H.x>=R&&H.x<=z&&H.y>=L&&H.y<=U&&bd(m,T,x,C,b,O,H.x,H.y)&&gn(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function HAe(u,s,l,f){let m=u.prev,x=u,b=u.next;if(gn(m,x,b)>=0)return!1;let T=m.x,C=x.x,O=b.x,R=m.y,L=x.y,z=b.y,U=T<C?T<O?T:O:C<O?C:O,H=R<L?R<z?R:z:L<z?L:z,X=T>C?T>O?T:O:C>O?C:O,ne=R>L?R>z?R:z:L>z?L:z,ue=Fq(U,H,s,l,f),xe=Fq(X,ne,s,l,f),pe=u.prevZ,ye=u.nextZ;for(;pe&&pe.z>=ue&&ye&&ye.z<=xe;){if(pe.x>=U&&pe.x<=X&&pe.y>=H&&pe.y<=ne&&pe!==m&&pe!==b&&bd(T,R,C,L,O,z,pe.x,pe.y)&&gn(pe.prev,pe,pe.next)>=0||(pe=pe.prevZ,ye.x>=U&&ye.x<=X&&ye.y>=H&&ye.y<=ne&&ye!==m&&ye!==b&&bd(T,R,C,L,O,z,ye.x,ye.y)&&gn(ye.prev,ye,ye.next)>=0))return!1;ye=ye.nextZ}for(;pe&&pe.z>=ue;){if(pe.x>=U&&pe.x<=X&&pe.y>=H&&pe.y<=ne&&pe!==m&&pe!==b&&bd(T,R,C,L,O,z,pe.x,pe.y)&&gn(pe.prev,pe,pe.next)>=0)return!1;pe=pe.prevZ}for(;ye&&ye.z<=xe;){if(ye.x>=U&&ye.x<=X&&ye.y>=H&&ye.y<=ne&&ye!==m&&ye!==b&&bd(T,R,C,L,O,z,ye.x,ye.y)&&gn(ye.prev,ye,ye.next)>=0)return!1;ye=ye.nextZ}return!0}function ZAe(u,s){let l=u;do{let f=l.prev,m=l.next.next;!mb(f,m)&&i5(f,l,l.next,m)&&sy(f,m)&&sy(m,f)&&(s.push(f.i,l.i,m.i),uy(l),uy(l.next),l=u=m),l=l.next}while(l!==u);return Sf(l)}function KAe(u,s,l,f,m,x){let b=u;do{let T=b.next.next;for(;T!==b.prev;){if(b.i!==T.i&&eqe(b,T)){let C=a5(b,T);return b=Sf(b,b.next),C=Sf(C,C.next),oy(b,s,l,f,m,x,0),void oy(C,s,l,f,m,x,0)}T=T.next}b=b.next}while(b!==u)}function XAe(u,s){return u.x-s.x}function YAe(u,s){let l=function(m,x){let b=x,T=m.x,C=m.y,O,R=-1/0;do{if(C<=b.y&&C>=b.next.y&&b.next.y!==b.y){let X=b.x+(C-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(X<=T&&X>R&&(R=X,O=b.x<b.next.x?b:b.next,X===T))return O}b=b.next}while(b!==x);if(!O)return null;let L=O,z=O.x,U=O.y,H=1/0;b=O;do{if(T>=b.x&&b.x>=z&&T!==b.x&&bd(C<U?T:R,C,z,U,C<U?R:T,C,b.x,b.y)){let X=Math.abs(C-b.y)/(T-b.x);sy(b,m)&&(X<H||X===H&&(b.x>O.x||b.x===O.x&&JAe(O,b)))&&(O=b,H=X)}b=b.next}while(b!==L);return O}(u,s);if(!l)return s;let f=a5(l,u);return Sf(f,f.next),Sf(l,l.next)}function JAe(u,s){return gn(u.prev,u,s.prev)<0&&gn(s.next,u,u.next)<0}function Fq(u,s,l,f,m){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-l)*m|0)|u<<8))|u<<4))|u<<2))|u<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-f)*m|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function QAe(u){let s=u,l=u;do(s.x<l.x||s.x===l.x&&s.y<l.y)&&(l=s),s=s.next;while(s!==u);return l}function bd(u,s,l,f,m,x,b,T){return(m-b)*(s-T)>=(u-b)*(x-T)&&(u-b)*(f-T)>=(l-b)*(s-T)&&(l-b)*(x-T)>=(m-b)*(f-T)}function eqe(u,s){return u.next.i!==s.i&&u.prev.i!==s.i&&!function(l,f){let m=l;do{if(m.i!==l.i&&m.next.i!==l.i&&m.i!==f.i&&m.next.i!==f.i&&i5(m,m.next,l,f))return!0;m=m.next}while(m!==l);return!1}(u,s)&&(sy(u,s)&&sy(s,u)&&function(l,f){let m=l,x=!1,b=(l.x+f.x)/2,T=(l.y+f.y)/2;do m.y>T!=m.next.y>T&&m.next.y!==m.y&&b<(m.next.x-m.x)*(T-m.y)/(m.next.y-m.y)+m.x&&(x=!x),m=m.next;while(m!==l);return x}(u,s)&&(gn(u.prev,u,s.prev)||gn(u,s.prev,s))||mb(u,s)&&gn(u.prev,u,u.next)>0&&gn(s.prev,s,s.next)>0)}function gn(u,s,l){return(s.y-u.y)*(l.x-s.x)-(s.x-u.x)*(l.y-s.y)}function mb(u,s){return u.x===s.x&&u.y===s.y}function i5(u,s,l,f){let m=yb(gn(u,s,l)),x=yb(gn(u,s,f)),b=yb(gn(l,f,u)),T=yb(gn(l,f,s));return m!==x&&b!==T||!(m!==0||!gb(u,l,s))||!(x!==0||!gb(u,f,s))||!(b!==0||!gb(l,u,f))||!(T!==0||!gb(l,s,f))}function gb(u,s,l){return s.x<=Math.max(u.x,l.x)&&s.x>=Math.min(u.x,l.x)&&s.y<=Math.max(u.y,l.y)&&s.y>=Math.min(u.y,l.y)}function yb(u){return u>0?1:u<0?-1:0}function sy(u,s){return gn(u.prev,u,u.next)<0?gn(u,s,u.next)>=0&&gn(u,u.prev,s)>=0:gn(u,s,u.prev)<0||gn(u,u.next,s)<0}function a5(u,s){let l=zq(u.i,u.x,u.y),f=zq(s.i,s.x,s.y),m=u.next,x=s.prev;return u.next=s,s.prev=u,l.next=m,m.prev=l,f.next=l,l.prev=f,x.next=f,f.prev=x,f}function o5(u,s,l,f){let m=zq(u,s,l);return f?(m.next=f.next,m.prev=f,f.next.prev=m,f.next=m):(m.prev=m,m.next=m),m}function uy(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function zq(u,s,l){return{i:u,x:s,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function jq(u,s,l){let f=l.patternDependencies,m=!1;for(let x of s){let b=x.paint.get(`${u}-pattern`);b.isConstant()||(m=!0);let T=b.constantOr(null);T&&(m=!0,f[T.to]=!0,f[T.from]=!0)}return m}function Bq(u,s,l,f,m){let x=m.patternDependencies;for(let b of s){let T=b.paint.get(`${u}-pattern`).value;if(T.kind!=="constant"){let C=T.evaluate({zoom:f-1},l,{},m.availableImages),O=T.evaluate({zoom:f},l,{},m.availableImages),R=T.evaluate({zoom:f+1},l,{},m.availableImages);C=C&&C.name?C.name:C,O=O&&O.name?O.name:O,R=R&&R.name?R.name:R,x[C]=!0,x[O]=!0,x[R]=!0,l.patterns[b.id]={min:C,mid:O,max:R}}}return l}class Uq{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Go,this.indexArray=new So,this.indexArray2=new Zn,this.programConfigurations=new bf(s.layers,s.zoom),this.segments=new Wt,this.segments2=new Wt,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,f){this.hasPattern=jq("fill",this.layers,l);let m=this.layers[0].layout.get("fill-sort-key"),x=!m.isConstant(),b=[];for(let{feature:T,id:C,index:O,sourceLayerIndex:R}of s){let L=this.layers[0]._featureFilter.needGeometry,z=Ef(T,L);if(!this.layers[0]._featureFilter.filter(new Rr(this.zoom),z,f))continue;let U=x?m.evaluate(z,{},f,l.availableImages):void 0,H={id:C,properties:T.properties,type:T.type,sourceLayerIndex:R,index:O,geometry:L?z.geometry:wf(T),patterns:{},sortKey:U};b.push(H)}x&&b.sort((T,C)=>T.sortKey-C.sortKey);for(let T of b){let{geometry:C,index:O,sourceLayerIndex:R}=T;if(this.hasPattern){let L=Bq("fill",this.layers,T,this.zoom,l);this.patternFeatures.push(L)}else this.addFeature(T,C,O,f,{});l.featureIndex.insert(s[O].feature,C,O,R,this.index)}}update(s,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,f)}addFeatures(s,l,f){for(let m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,GAe),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,l,f,m,x){for(let b of Gp(l,500)){let T=0;for(let U of b)T+=U.length;let C=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),O=C.vertexLength,R=[],L=[];for(let U of b){if(U.length===0)continue;U!==b[0]&&L.push(R.length/2);let H=this.segments2.prepareSegment(U.length,this.layoutVertexArray,this.indexArray2),X=H.vertexLength;this.layoutVertexArray.emplaceBack(U[0].x,U[0].y),this.indexArray2.emplaceBack(X+U.length-1,X),R.push(U[0].x),R.push(U[0].y);for(let ne=1;ne<U.length;ne++)this.layoutVertexArray.emplaceBack(U[ne].x,U[ne].y),this.indexArray2.emplaceBack(X+ne-1,X+ne),R.push(U[ne].x),R.push(U[ne].y);H.vertexLength+=U.length,H.primitiveLength+=U.length}let z=r5(R,L);for(let U=0;U<z.length;U+=3)this.indexArray.emplaceBack(O+z[U],O+z[U+1],O+z[U+2]);C.vertexLength+=T,C.primitiveLength+=z.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,x,m)}}let s5,u5;rt("FillBucket",Uq,{omit:["layers","patternFeatures"]});var tqe={get paint(){return u5=u5||new _({"fill-antialias":new it(Ee.paint_fill["fill-antialias"]),"fill-opacity":new mt(Ee.paint_fill["fill-opacity"]),"fill-color":new mt(Ee.paint_fill["fill-color"]),"fill-outline-color":new mt(Ee.paint_fill["fill-outline-color"]),"fill-translate":new it(Ee.paint_fill["fill-translate"]),"fill-translate-anchor":new it(Ee.paint_fill["fill-translate-anchor"]),"fill-pattern":new hd(Ee.paint_fill["fill-pattern"])})},get layout(){return s5=s5||new _({"fill-sort-key":new mt(Ee.layout_fill["fill-sort-key"])})}};class rqe extends c{constructor(s){super(s,tqe)}recalculate(s,l){super.recalculate(s,l);let f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new Uq(s)}queryRadius(){return pb(this.paint.get("fill-translate"))}queryIntersectsFeature(s,l,f,m,x,b,T){return $U(db(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,T),m)}isTileClipped(){return!0}}let nqe=I([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),iqe=I([{name:"a_centroid",components:2,type:"Int16"}],4),{members:aqe}=nqe;var Mc={},oqe=p,l5=wd;function wd(u,s,l,f,m){this.properties={},this.extent=l,this.type=0,this._pbf=u,this._geometry=-1,this._keys=f,this._values=m,u.readFields(sqe,this,s)}function sqe(u,s,l){u==1?s.id=l.readVarint():u==2?function(f,m){for(var x=f.readVarint()+f.pos;f.pos<x;){var b=m._keys[f.readVarint()],T=m._values[f.readVarint()];m.properties[b]=T}}(l,s):u==3?s.type=l.readVarint():u==4&&(s._geometry=l.pos)}function uqe(u){for(var s,l,f=0,m=0,x=u.length,b=x-1;m<x;b=m++)f+=((l=u[b]).x-(s=u[m]).x)*(s.y+l.y);return f}wd.types=["Unknown","Point","LineString","Polygon"],wd.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var s,l=u.readVarint()+u.pos,f=1,m=0,x=0,b=0,T=[];u.pos<l;){if(m<=0){var C=u.readVarint();f=7&C,m=C>>3}if(m--,f===1||f===2)x+=u.readSVarint(),b+=u.readSVarint(),f===1&&(s&&T.push(s),s=[]),s.push(new oqe(x,b));else{if(f!==7)throw new Error("unknown command "+f);s&&s.push(s[0].clone())}}return s&&T.push(s),T},wd.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var s=u.readVarint()+u.pos,l=1,f=0,m=0,x=0,b=1/0,T=-1/0,C=1/0,O=-1/0;u.pos<s;){if(f<=0){var R=u.readVarint();l=7&R,f=R>>3}if(f--,l===1||l===2)(m+=u.readSVarint())<b&&(b=m),m>T&&(T=m),(x+=u.readSVarint())<C&&(C=x),x>O&&(O=x);else if(l!==7)throw new Error("unknown command "+l)}return[b,C,T,O]},wd.prototype.toGeoJSON=function(u,s,l){var f,m,x=this.extent*Math.pow(2,l),b=this.extent*u,T=this.extent*s,C=this.loadGeometry(),O=wd.types[this.type];function R(U){for(var H=0;H<U.length;H++){var X=U[H];U[H]=[360*(X.x+b)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(X.y+T)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var L=[];for(f=0;f<C.length;f++)L[f]=C[f][0];R(C=L);break;case 2:for(f=0;f<C.length;f++)R(C[f]);break;case 3:for(C=function(U){var H=U.length;if(H<=1)return[U];for(var X,ne,ue=[],xe=0;xe<H;xe++){var pe=uqe(U[xe]);pe!==0&&(ne===void 0&&(ne=pe<0),ne===pe<0?(X&&ue.push(X),X=[U[xe]]):X.push(U[xe]))}return X&&ue.push(X),ue}(C),f=0;f<C.length;f++)for(m=0;m<C[f].length;m++)R(C[f][m]);}C.length===1?C=C[0]:O="Multi"+O;var z={type:"Feature",geometry:{type:O,coordinates:C},properties:this.properties};return"id"in this&&(z.id=this.id),z};var lqe=l5,c5=h5;function h5(u,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(cqe,this,s),this.length=this._features.length}function cqe(u,s,l){u===15?s.version=l.readVarint():u===1?s.name=l.readString():u===5?s.extent=l.readVarint():u===2?s._features.push(l.pos):u===3?s._keys.push(l.readString()):u===4&&s._values.push(function(f){for(var m=null,x=f.readVarint()+f.pos;f.pos<x;){var b=f.readVarint()>>3;m=b===1?f.readString():b===2?f.readFloat():b===3?f.readDouble():b===4?f.readVarint64():b===5?f.readVarint():b===6?f.readSVarint():b===7?f.readBoolean():null}return m}(l))}h5.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var s=this._pbf.readVarint()+this._pbf.pos;return new lqe(this._pbf,s,this.extent,this._keys,this._values)};var hqe=c5;function fqe(u,s,l){if(u===3){var f=new hqe(l,l.readVarint()+l.pos);f.length&&(s[f.name]=f)}}Mc.VectorTile=function(u,s){this.layers=u.readFields(fqe,{},s)},Mc.VectorTileFeature=l5,Mc.VectorTileLayer=c5;let pqe=Mc.VectorTileFeature.types,Vq=Math.pow(2,13);function ly(u,s,l,f,m,x,b,T){u.emplaceBack(s,l,2*Math.floor(f*Vq)+b,m*Vq*2,x*Vq*2,Math.round(T))}class $q{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Tc,this.centroidVertexArray=new si,this.indexArray=new So,this.programConfigurations=new bf(s.layers,s.zoom),this.segments=new Wt,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,f){this.features=[],this.hasPattern=jq("fill-extrusion",this.layers,l);for(let{feature:m,id:x,index:b,sourceLayerIndex:T}of s){let C=this.layers[0]._featureFilter.needGeometry,O=Ef(m,C);if(!this.layers[0]._featureFilter.filter(new Rr(this.zoom),O,f))continue;let R={id:x,sourceLayerIndex:T,index:b,geometry:C?O.geometry:wf(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Bq("fill-extrusion",this.layers,R,this.zoom,l)):this.addFeature(R,R.geometry,b,f,{}),l.featureIndex.insert(m,R.geometry,b,T,this.index,!0)}}addFeatures(s,l,f){for(let m of this.features){let{geometry:x}=m;this.addFeature(m,x,m.index,l,f)}}update(s,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,aqe),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,iqe.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,l,f,m,x){for(let b of Gp(l,500)){let T={x:0,y:0,vertexCount:0},C=0;for(let H of b)C+=H.length;let O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let H of b){if(H.length===0||vqe(H))continue;let X=0;for(let ne=0;ne<H.length;ne++){let ue=H[ne];if(ne>=1){let xe=H[ne-1];if(!dqe(ue,xe)){O.vertexLength+4>Wt.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let pe=ue.sub(xe)._perp()._unit(),ye=xe.dist(ue);X+ye>32768&&(X=0),ly(this.layoutVertexArray,ue.x,ue.y,pe.x,pe.y,0,0,X),ly(this.layoutVertexArray,ue.x,ue.y,pe.x,pe.y,0,1,X),T.x+=2*ue.x,T.y+=2*ue.y,T.vertexCount+=2,X+=ye,ly(this.layoutVertexArray,xe.x,xe.y,pe.x,pe.y,0,0,X),ly(this.layoutVertexArray,xe.x,xe.y,pe.x,pe.y,0,1,X),T.x+=2*xe.x,T.y+=2*xe.y,T.vertexCount+=2;let Se=O.vertexLength;this.indexArray.emplaceBack(Se,Se+2,Se+1),this.indexArray.emplaceBack(Se+1,Se+2,Se+3),O.vertexLength+=4,O.primitiveLength+=2}}}}if(O.vertexLength+C>Wt.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),pqe[s.type]!=="Polygon")continue;let R=[],L=[],z=O.vertexLength;for(let H of b)if(H.length!==0){H!==b[0]&&L.push(R.length/2);for(let X=0;X<H.length;X++){let ne=H[X];ly(this.layoutVertexArray,ne.x,ne.y,0,0,1,1,0),T.x+=ne.x,T.y+=ne.y,T.vertexCount+=1,R.push(ne.x),R.push(ne.y)}}let U=r5(R,L);for(let H=0;H<U.length;H+=3)this.indexArray.emplaceBack(z+U[H],z+U[H+2],z+U[H+1]);O.primitiveLength+=U.length/3,O.vertexLength+=C;for(let H=0;H<T.vertexCount;H++){let X=Math.floor(T.x/T.vertexCount),ne=Math.floor(T.y/T.vertexCount);this.centroidVertexArray.emplaceBack(X,ne)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,x,m)}}function dqe(u,s){return u.x===s.x&&(u.x<0||u.x>En)||u.y===s.y&&(u.y<0||u.y>En)}function vqe(u){return u.every(s=>s.x<0)||u.every(s=>s.x>En)||u.every(s=>s.y<0)||u.every(s=>s.y>En)}let f5;rt("FillExtrusionBucket",$q,{omit:["layers","features"]});var mqe={get paint(){return f5=f5||new _({"fill-extrusion-opacity":new it(Ee["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new mt(Ee["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new it(Ee["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new it(Ee["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new hd(Ee["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new mt(Ee["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new mt(Ee["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new it(Ee["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class gqe extends c{constructor(s){super(s,mqe)}createBucket(s){return new $q(s)}queryRadius(){return pb(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(s,l,f,m,x,b,T,C){let O=db(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,T),R=this.paint.get("fill-extrusion-height").evaluate(l,f),L=this.paint.get("fill-extrusion-base").evaluate(l,f),z=function(H,X,ne,ue){let xe=[];for(let pe of H){let ye=[pe.x,pe.y,0,1];vb(ye,ye,X),xe.push(new w(ye[0]/ye[3],ye[1]/ye[3]))}return xe}(O,C),U=function(H,X,ne,ue){let xe=[],pe=[],ye=ue[8]*X,Se=ue[9]*X,Re=ue[10]*X,Je=ue[11]*X,pt=ue[8]*ne,Ke=ue[9]*ne,Ge=ue[10]*ne,st=ue[11]*ne;for(let nt of H){let tt=[],Ce=[];for(let ut of nt){let ot=ut.x,xt=ut.y,Tr=ue[0]*ot+ue[4]*xt+ue[12],xr=ue[1]*ot+ue[5]*xt+ue[13],Dn=ue[2]*ot+ue[6]*xt+ue[14],Wo=ue[3]*ot+ue[7]*xt+ue[15],ci=Dn+Re,Ln=Wo+Je,Xi=Tr+pt,Yi=xr+Ke,Ji=Dn+Ge,un=Wo+st,kn=new w((Tr+ye)/Ln,(xr+Se)/Ln);kn.z=ci/Ln,tt.push(kn);let Ci=new w(Xi/un,Yi/un);Ci.z=Ji/un,Ce.push(Ci)}xe.push(tt),pe.push(Ce)}return[xe,pe]}(m,L,R,C);return function(H,X,ne){let ue=1/0;$U(ne,X)&&(ue=p5(ne,X[0]));for(let xe=0;xe<X.length;xe++){let pe=X[xe],ye=H[xe];for(let Se=0;Se<pe.length-1;Se++){let Re=pe[Se],Je=[Re,pe[Se+1],ye[Se+1],ye[Se],Re];VU(ne,Je)&&(ue=Math.min(ue,p5(ne,Je)))}}return ue!==1/0&&ue}(U[0],U[1],z)}}function cy(u,s){return u.x*s.x+u.y*s.y}function p5(u,s){if(u.length===1){let l=0,f=s[l++],m;for(;!m||f.equals(m);)if(m=s[l++],!m)return 1/0;for(;l<s.length;l++){let x=s[l],b=u[0],T=m.sub(f),C=x.sub(f),O=b.sub(f),R=cy(T,T),L=cy(T,C),z=cy(C,C),U=cy(O,T),H=cy(O,C),X=R*z-L*L,ne=(z*U-L*H)/X,ue=(R*H-L*U)/X,xe=f.z*(1-ne-ue)+m.z*ne+x.z*ue;if(isFinite(xe))return xe}return 1/0}{let l=1/0;for(let f of s)l=Math.min(l,f.z);return l}}let yqe=I([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:_qe}=yqe,xqe=I([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:bqe}=xqe,wqe=Mc.VectorTileFeature.types,Eqe=Math.cos(Math.PI/180*37.5),d5=Math.pow(2,14)/.5;class Gq{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new pd,this.layoutVertexArray2=new Ic,this.indexArray=new So,this.programConfigurations=new bf(s.layers,s.zoom),this.segments=new Wt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,f){this.hasPattern=jq("line",this.layers,l);let m=this.layers[0].layout.get("line-sort-key"),x=!m.isConstant(),b=[];for(let{feature:T,id:C,index:O,sourceLayerIndex:R}of s){let L=this.layers[0]._featureFilter.needGeometry,z=Ef(T,L);if(!this.layers[0]._featureFilter.filter(new Rr(this.zoom),z,f))continue;let U=x?m.evaluate(z,{},f):void 0,H={id:C,properties:T.properties,type:T.type,sourceLayerIndex:R,index:O,geometry:L?z.geometry:wf(T),patterns:{},sortKey:U};b.push(H)}x&&b.sort((T,C)=>T.sortKey-C.sortKey);for(let T of b){let{geometry:C,index:O,sourceLayerIndex:R}=T;if(this.hasPattern){let L=Bq("line",this.layers,T,this.zoom,l);this.patternFeatures.push(L)}else this.addFeature(T,C,O,f,{});l.featureIndex.insert(s[O].feature,C,O,R,this.index)}}update(s,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,f)}addFeatures(s,l,f){for(let m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,bqe)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,_qe),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,l,f,m,x){let b=this.layers[0].layout,T=b.get("line-join").evaluate(s,{}),C=b.get("line-cap"),O=b.get("line-miter-limit"),R=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(let L of l)this.addLine(L,s,T,C,O,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,x,m)}addLine(s,l,f,m,x,b){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ue=0;ue<s.length-1;ue++)this.totalDistance+=s[ue].dist(s[ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let T=wqe[l.type]==="Polygon",C=s.length;for(;C>=2&&s[C-1].equals(s[C-2]);)C--;let O=0;for(;O<C-1&&s[O].equals(s[O+1]);)O++;if(C<(T?3:2))return;f==="bevel"&&(x=1.05);let R=this.overscaling<=16?15*En/(512*this.overscaling):0,L=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray),z,U,H,X,ne;this.e1=this.e2=-1,T&&(z=s[C-2],ne=s[O].sub(z)._unit()._perp());for(let ue=O;ue<C;ue++){if(H=ue===C-1?T?s[O+1]:void 0:s[ue+1],H&&s[ue].equals(H))continue;ne&&(X=ne),z&&(U=z),z=s[ue],ne=H?H.sub(z)._unit()._perp():X,X=X||ne;let xe=X.add(ne);xe.x===0&&xe.y===0||xe._unit();let pe=X.x*ne.x+X.y*ne.y,ye=xe.x*ne.x+xe.y*ne.y,Se=ye!==0?1/ye:1/0,Re=2*Math.sqrt(2-2*ye),Je=ye<Eqe&&U&&H,pt=X.x*ne.y-X.y*ne.x>0;if(Je&&ue>O){let st=z.dist(U);if(st>2*R){let nt=z.sub(z.sub(U)._mult(R/st)._round());this.updateDistance(U,nt),this.addCurrentVertex(nt,X,0,0,L),U=nt}}let Ke=U&&H,Ge=Ke?f:T?"butt":m;if(Ke&&Ge==="round"&&(Se<b?Ge="miter":Se<=2&&(Ge="fakeround")),Ge==="miter"&&Se>x&&(Ge="bevel"),Ge==="bevel"&&(Se>2&&(Ge="flipbevel"),Se<x&&(Ge="miter")),U&&this.updateDistance(U,z),Ge==="miter")xe._mult(Se),this.addCurrentVertex(z,xe,0,0,L);else if(Ge==="flipbevel"){if(Se>100)xe=ne.mult(-1);else{let st=Se*X.add(ne).mag()/X.sub(ne).mag();xe._perp()._mult(st*(pt?-1:1))}this.addCurrentVertex(z,xe,0,0,L),this.addCurrentVertex(z,xe.mult(-1),0,0,L)}else if(Ge==="bevel"||Ge==="fakeround"){let st=-Math.sqrt(Se*Se-1),nt=pt?st:0,tt=pt?0:st;if(U&&this.addCurrentVertex(z,X,nt,tt,L),Ge==="fakeround"){let Ce=Math.round(180*Re/Math.PI/20);for(let ut=1;ut<Ce;ut++){let ot=ut/Ce;if(ot!==.5){let Tr=ot-.5;ot+=ot*Tr*(ot-1)*((1.0904+pe*(pe*(3.55645-1.43519*pe)-3.2452))*Tr*Tr+(.848013+pe*(.215638*pe-1.06021)))}let xt=ne.sub(X)._mult(ot)._add(X)._unit()._mult(pt?-1:1);this.addHalfVertex(z,xt.x,xt.y,!1,pt,0,L)}}H&&this.addCurrentVertex(z,ne,-nt,-tt,L)}else if(Ge==="butt")this.addCurrentVertex(z,xe,0,0,L);else if(Ge==="square"){let st=U?1:-1;this.addCurrentVertex(z,xe,st,st,L)}else Ge==="round"&&(U&&(this.addCurrentVertex(z,X,0,0,L),this.addCurrentVertex(z,X,1,1,L,!0)),H&&(this.addCurrentVertex(z,ne,-1,-1,L,!0),this.addCurrentVertex(z,ne,0,0,L)));if(Je&&ue<C-1){let st=z.dist(H);if(st>2*R){let nt=z.add(H.sub(z)._mult(R/st)._round());this.updateDistance(z,nt),this.addCurrentVertex(nt,ne,0,0,L),z=nt}}}}addCurrentVertex(s,l,f,m,x,b=!1){let T=l.y*m-l.x,C=-l.y-l.x*m;this.addHalfVertex(s,l.x+l.y*f,l.y-l.x*f,b,!1,f,x),this.addHalfVertex(s,T,C,b,!0,-m,x),this.distance>d5/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,l,f,m,x,b))}addHalfVertex({x:s,y:l},f,m,x,b,T,C){let O=.5*(this.lineClips?this.scaledDistance*(d5-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(x?1:0),(l<<1)+(b?1:0),Math.round(63*f)+128,Math.round(63*m)+128,1+(T===0?0:T<0?-1:1)|(63&O)<<2,O>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let R=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,R),C.primitiveLength++),b?this.e2=R:this.e1=R}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,l){this.distance+=s.dist(l),this.updateScaledDistance()}}let v5,m5;rt("LineBucket",Gq,{omit:["layers","patternFeatures"]});var g5={get paint(){return m5=m5||new _({"line-opacity":new mt(Ee.paint_line["line-opacity"]),"line-color":new mt(Ee.paint_line["line-color"]),"line-translate":new it(Ee.paint_line["line-translate"]),"line-translate-anchor":new it(Ee.paint_line["line-translate-anchor"]),"line-width":new mt(Ee.paint_line["line-width"]),"line-gap-width":new mt(Ee.paint_line["line-gap-width"]),"line-offset":new mt(Ee.paint_line["line-offset"]),"line-blur":new mt(Ee.paint_line["line-blur"]),"line-dasharray":new fd(Ee.paint_line["line-dasharray"]),"line-pattern":new hd(Ee.paint_line["line-pattern"]),"line-gradient":new ey(Ee.paint_line["line-gradient"])})},get layout(){return v5=v5||new _({"line-cap":new it(Ee.layout_line["line-cap"]),"line-join":new mt(Ee.layout_line["line-join"]),"line-miter-limit":new it(Ee.layout_line["line-miter-limit"]),"line-round-limit":new it(Ee.layout_line["line-round-limit"]),"line-sort-key":new mt(Ee.layout_line["line-sort-key"])})}};class Sqe extends mt{possiblyEvaluate(s,l){return l=new Rr(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(s,l)}evaluate(s,l,f,m){return l=Ie({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(s,l,f,m)}}let _b;class Tqe extends c{constructor(s){super(s,g5),this.gradientVersion=0,_b||(_b=new Sqe(g5.paint.properties["line-width"].specification),_b.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){let l=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof oc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,l){super.recalculate(s,l),this.paint._values["line-floorwidth"]=_b.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new Gq(s)}queryRadius(s){let l=s,f=y5(ny("line-width",this,l),ny("line-gap-width",this,l)),m=ny("line-offset",this,l);return f/2+Math.abs(m)+pb(this.paint.get("line-translate"))}queryIntersectsFeature(s,l,f,m,x,b,T){let C=db(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,T),O=T/2*y5(this.paint.get("line-width").evaluate(l,f),this.paint.get("line-gap-width").evaluate(l,f)),R=this.paint.get("line-offset").evaluate(l,f);return R&&(m=function(L,z){let U=[];for(let H=0;H<L.length;H++){let X=L[H],ne=[];for(let ue=0;ue<X.length;ue++){let xe=X[ue-1],pe=X[ue],ye=X[ue+1],Se=ue===0?new w(0,0):pe.sub(xe)._unit()._perp(),Re=ue===X.length-1?new w(0,0):ye.sub(pe)._unit()._perp(),Je=Se._add(Re)._unit(),pt=Je.x*Re.x+Je.y*Re.y;pt!==0&&Je._mult(1/pt),ne.push(Je._mult(z)._add(pe))}U.push(ne)}return U}(m,R*T)),function(L,z,U){for(let H=0;H<z.length;H++){let X=z[H];if(L.length>=3){for(let ne=0;ne<X.length;ne++)if(_d(L,X[ne]))return!0}if(DAe(L,X,U))return!0}return!1}(C,m,O)}isTileClipped(){return!0}}function y5(u,s){return s>0?s+2*u:u}let Iqe=I([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Cqe=I([{name:"a_projected_pos",components:3,type:"Float32"}],4);I([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let Aqe=I([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);I([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let _5=I([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),qqe=I([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Pqe(u,s,l){return u.sections.forEach(f=>{f.text=function(m,x,b){let T=x.layout.get("text-transform").evaluate(b,{});return T==="uppercase"?m=m.toLocaleUpperCase():T==="lowercase"&&(m=m.toLocaleLowerCase()),wa.applyArabicShaping&&(m=wa.applyArabicShaping(m)),m}(f.text,s,l)}),u}I([{name:"triangle",components:3,type:"Uint16"}]),I([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),I([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),I([{type:"Float32",name:"offsetX"}]),I([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),I([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let hy={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Mn=24,x5=_r,b5=function(u,s,l,f,m){var x,b,T=8*m-f-1,C=(1<<T)-1,O=C>>1,R=-7,L=l?m-1:0,z=l?-1:1,U=u[s+L];for(L+=z,x=U&(1<<-R)-1,U>>=-R,R+=T;R>0;x=256*x+u[s+L],L+=z,R-=8);for(b=x&(1<<-R)-1,x>>=-R,R+=f;R>0;b=256*b+u[s+L],L+=z,R-=8);if(x===0)x=1-O;else{if(x===C)return b?NaN:1/0*(U?-1:1);b+=Math.pow(2,f),x-=O}return(U?-1:1)*b*Math.pow(2,x-f)},w5=function(u,s,l,f,m,x){var b,T,C,O=8*x-m-1,R=(1<<O)-1,L=R>>1,z=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=f?0:x-1,H=f?1:-1,X=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(T=isNaN(s)?1:0,b=R):(b=Math.floor(Math.log(s)/Math.LN2),s*(C=Math.pow(2,-b))<1&&(b--,C*=2),(s+=b+L>=1?z/C:z*Math.pow(2,1-L))*C>=2&&(b++,C/=2),b+L>=R?(T=0,b=R):b+L>=1?(T=(s*C-1)*Math.pow(2,m),b+=L):(T=s*Math.pow(2,L-1)*Math.pow(2,m),b=0));m>=8;u[l+U]=255&T,U+=H,T/=256,m-=8);for(b=b<<m|T,O+=m;O>0;u[l+U]=255&b,U+=H,b/=256,O-=8);u[l+U-H]|=128*X};function _r(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}_r.Varint=0,_r.Fixed64=1,_r.Bytes=2,_r.Fixed32=5;var Wq=4294967296,E5=1/Wq,S5=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");function sl(u){return u.type===_r.Bytes?u.readVarint()+u.pos:u.pos+1}function Ed(u,s,l){return l?4294967296*s+(u>>>0):4294967296*(s>>>0)+(u>>>0)}function T5(u,s,l){var f=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));l.realloc(f);for(var m=l.pos-1;m>=u;m--)l.buf[m+f]=l.buf[m]}function Mqe(u,s){for(var l=0;l<u.length;l++)s.writeVarint(u[l])}function Oqe(u,s){for(var l=0;l<u.length;l++)s.writeSVarint(u[l])}function Rqe(u,s){for(var l=0;l<u.length;l++)s.writeFloat(u[l])}function Dqe(u,s){for(var l=0;l<u.length;l++)s.writeDouble(u[l])}function Lqe(u,s){for(var l=0;l<u.length;l++)s.writeBoolean(u[l])}function kqe(u,s){for(var l=0;l<u.length;l++)s.writeFixed32(u[l])}function Nqe(u,s){for(var l=0;l<u.length;l++)s.writeSFixed32(u[l])}function Fqe(u,s){for(var l=0;l<u.length;l++)s.writeFixed64(u[l])}function zqe(u,s){for(var l=0;l<u.length;l++)s.writeSFixed64(u[l])}function xb(u,s){return(u[s]|u[s+1]<<8|u[s+2]<<16)+16777216*u[s+3]}function Sd(u,s,l){u[l]=s,u[l+1]=s>>>8,u[l+2]=s>>>16,u[l+3]=s>>>24}function I5(u,s){return(u[s]|u[s+1]<<8|u[s+2]<<16)+(u[s+3]<<24)}_r.prototype={destroy:function(){this.buf=null},readFields:function(u,s,l){for(l=l||this.length;this.pos<l;){var f=this.readVarint(),m=f>>3,x=this.pos;this.type=7&f,u(m,s,this),this.pos===x&&this.skip(f)}return s},readMessage:function(u,s){return this.readFields(u,s,this.readVarint()+this.pos)},readFixed32:function(){var u=xb(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=I5(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=xb(this.buf,this.pos)+xb(this.buf,this.pos+4)*Wq;return this.pos+=8,u},readSFixed64:function(){var u=xb(this.buf,this.pos)+I5(this.buf,this.pos+4)*Wq;return this.pos+=8,u},readFloat:function(){var u=b5(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=b5(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var s,l,f=this.buf;return s=127&(l=f[this.pos++]),l<128?s:(s|=(127&(l=f[this.pos++]))<<7,l<128?s:(s|=(127&(l=f[this.pos++]))<<14,l<128?s:(s|=(127&(l=f[this.pos++]))<<21,l<128?s:function(m,x,b){var T,C,O=b.buf;if(T=(112&(C=O[b.pos++]))>>4,C<128||(T|=(127&(C=O[b.pos++]))<<3,C<128)||(T|=(127&(C=O[b.pos++]))<<10,C<128)||(T|=(127&(C=O[b.pos++]))<<17,C<128)||(T|=(127&(C=O[b.pos++]))<<24,C<128)||(T|=(1&(C=O[b.pos++]))<<31,C<128))return Ed(m,T,x);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(l=f[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,s=this.pos;return this.pos=u,u-s>=12&&S5?function(l,f,m){return S5.decode(l.subarray(f,m))}(this.buf,s,u):function(l,f,m){for(var x="",b=f;b<m;){var T,C,O,R=l[b],L=null,z=R>239?4:R>223?3:R>191?2:1;if(b+z>m)break;z===1?R<128&&(L=R):z===2?(192&(T=l[b+1]))==128&&(L=(31&R)<<6|63&T)<=127&&(L=null):z===3?(C=l[b+2],(192&(T=l[b+1]))==128&&(192&C)==128&&((L=(15&R)<<12|(63&T)<<6|63&C)<=2047||L>=55296&&L<=57343)&&(L=null)):z===4&&(C=l[b+2],O=l[b+3],(192&(T=l[b+1]))==128&&(192&C)==128&&(192&O)==128&&((L=(15&R)<<18|(63&T)<<12|(63&C)<<6|63&O)<=65535||L>=1114112)&&(L=null)),L===null?(L=65533,z=1):L>65535&&(L-=65536,x+=String.fromCharCode(L>>>10&1023|55296),L=56320|1023&L),x+=String.fromCharCode(L),b+=z}return x}(this.buf,s,u)},readBytes:function(){var u=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,u);return this.pos=u,s},readPackedVarint:function(u,s){if(this.type!==_r.Bytes)return u.push(this.readVarint(s));var l=sl(this);for(u=u||[];this.pos<l;)u.push(this.readVarint(s));return u},readPackedSVarint:function(u){if(this.type!==_r.Bytes)return u.push(this.readSVarint());var s=sl(this);for(u=u||[];this.pos<s;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==_r.Bytes)return u.push(this.readBoolean());var s=sl(this);for(u=u||[];this.pos<s;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==_r.Bytes)return u.push(this.readFloat());var s=sl(this);for(u=u||[];this.pos<s;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==_r.Bytes)return u.push(this.readDouble());var s=sl(this);for(u=u||[];this.pos<s;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==_r.Bytes)return u.push(this.readFixed32());var s=sl(this);for(u=u||[];this.pos<s;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==_r.Bytes)return u.push(this.readSFixed32());var s=sl(this);for(u=u||[];this.pos<s;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==_r.Bytes)return u.push(this.readFixed64());var s=sl(this);for(u=u||[];this.pos<s;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==_r.Bytes)return u.push(this.readSFixed64());var s=sl(this);for(u=u||[];this.pos<s;)u.push(this.readSFixed64());return u},skip:function(u){var s=7&u;if(s===_r.Varint)for(;this.buf[this.pos++]>127;);else if(s===_r.Bytes)this.pos=this.readVarint()+this.pos;else if(s===_r.Fixed32)this.pos+=4;else{if(s!==_r.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(u,s){this.writeVarint(u<<3|s)},realloc:function(u){for(var s=this.length||16;s<this.pos+u;)s*=2;if(s!==this.length){var l=new Uint8Array(s);l.set(this.buf),this.buf=l,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),Sd(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),Sd(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),Sd(this.buf,-1&u,this.pos),Sd(this.buf,Math.floor(u*E5),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),Sd(this.buf,-1&u,this.pos),Sd(this.buf,Math.floor(u*E5),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(s,l){var f,m;if(s>=0?(f=s%4294967296|0,m=s/4294967296|0):(m=~(-s/4294967296),4294967295^(f=~(-s%4294967296))?f=f+1|0:(f=0,m=m+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(x,b,T){T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,T.buf[T.pos]=127&(x>>>=7)}(f,0,l),function(x,b){var T=(7&x)<<4;b.buf[b.pos++]|=T|((x>>>=3)?128:0),x&&(b.buf[b.pos++]=127&x|((x>>>=7)?128:0),x&&(b.buf[b.pos++]=127&x|((x>>>=7)?128:0),x&&(b.buf[b.pos++]=127&x|((x>>>=7)?128:0),x&&(b.buf[b.pos++]=127&x|((x>>>=7)?128:0),x&&(b.buf[b.pos++]=127&x)))))}(m,l)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var s=this.pos;this.pos=function(f,m,x){for(var b,T,C=0;C<m.length;C++){if((b=m.charCodeAt(C))>55295&&b<57344){if(!T){b>56319||C+1===m.length?(f[x++]=239,f[x++]=191,f[x++]=189):T=b;continue}if(b<56320){f[x++]=239,f[x++]=191,f[x++]=189,T=b;continue}b=T-55296<<10|b-56320|65536,T=null}else T&&(f[x++]=239,f[x++]=191,f[x++]=189,T=null);b<128?f[x++]=b:(b<2048?f[x++]=b>>6|192:(b<65536?f[x++]=b>>12|224:(f[x++]=b>>18|240,f[x++]=b>>12&63|128),f[x++]=b>>6&63|128),f[x++]=63&b|128)}return x}(this.buf,u,this.pos);var l=this.pos-s;l>=128&&T5(s,l,this),this.pos=s-1,this.writeVarint(l),this.pos+=l},writeFloat:function(u){this.realloc(4),w5(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),w5(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var s=u.length;this.writeVarint(s),this.realloc(s);for(var l=0;l<s;l++)this.buf[this.pos++]=u[l]},writeRawMessage:function(u,s){this.pos++;var l=this.pos;u(s,this);var f=this.pos-l;f>=128&&T5(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f},writeMessage:function(u,s,l){this.writeTag(u,_r.Bytes),this.writeRawMessage(s,l)},writePackedVarint:function(u,s){s.length&&this.writeMessage(u,Mqe,s)},writePackedSVarint:function(u,s){s.length&&this.writeMessage(u,Oqe,s)},writePackedBoolean:function(u,s){s.length&&this.writeMessage(u,Lqe,s)},writePackedFloat:function(u,s){s.length&&this.writeMessage(u,Rqe,s)},writePackedDouble:function(u,s){s.length&&this.writeMessage(u,Dqe,s)},writePackedFixed32:function(u,s){s.length&&this.writeMessage(u,kqe,s)},writePackedSFixed32:function(u,s){s.length&&this.writeMessage(u,Nqe,s)},writePackedFixed64:function(u,s){s.length&&this.writeMessage(u,Fqe,s)},writePackedSFixed64:function(u,s){s.length&&this.writeMessage(u,zqe,s)},writeBytesField:function(u,s){this.writeTag(u,_r.Bytes),this.writeBytes(s)},writeFixed32Field:function(u,s){this.writeTag(u,_r.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(u,s){this.writeTag(u,_r.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(u,s){this.writeTag(u,_r.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(u,s){this.writeTag(u,_r.Fixed64),this.writeSFixed64(s)},writeVarintField:function(u,s){this.writeTag(u,_r.Varint),this.writeVarint(s)},writeSVarintField:function(u,s){this.writeTag(u,_r.Varint),this.writeSVarint(s)},writeStringField:function(u,s){this.writeTag(u,_r.Bytes),this.writeString(s)},writeFloatField:function(u,s){this.writeTag(u,_r.Fixed32),this.writeFloat(s)},writeDoubleField:function(u,s){this.writeTag(u,_r.Fixed64),this.writeDouble(s)},writeBooleanField:function(u,s){this.writeVarintField(u,!!s)}};var Hq=h(x5);let Zq=3;function jqe(u,s,l){u===1&&l.readMessage(Bqe,s)}function Bqe(u,s,l){if(u===3){let{id:f,bitmap:m,width:x,height:b,left:T,top:C,advance:O}=l.readMessage(Uqe,{});s.push({id:f,bitmap:new ay({width:x+2*Zq,height:b+2*Zq},m),metrics:{width:x,height:b,left:T,top:C,advance:O}})}}function Uqe(u,s,l){u===1?s.id=l.readVarint():u===2?s.bitmap=l.readBytes():u===3?s.width=l.readVarint():u===4?s.height=l.readVarint():u===5?s.left=l.readSVarint():u===6?s.top=l.readSVarint():u===7&&(s.advance=l.readVarint())}let C5=Zq;function A5(u){let s=0,l=0;for(let b of u)s+=b.w*b.h,l=Math.max(l,b.w);u.sort((b,T)=>T.h-b.h);let f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),l),h:1/0}],m=0,x=0;for(let b of u)for(let T=f.length-1;T>=0;T--){let C=f[T];if(!(b.w>C.w||b.h>C.h)){if(b.x=C.x,b.y=C.y,x=Math.max(x,b.y+b.h),m=Math.max(m,b.x+b.w),b.w===C.w&&b.h===C.h){let O=f.pop();T<f.length&&(f[T]=O)}else b.h===C.h?(C.x+=b.w,C.w-=b.w):b.w===C.w?(C.y+=b.h,C.h-=b.h):(f.push({x:C.x+b.w,y:C.y,w:C.w-b.w,h:b.h}),C.y+=b.h,C.h-=b.h);break}}return{w:m,h:x,fill:s/(m*x)||0}}let Sa=1;class Kq{constructor(s,{pixelRatio:l,version:f,stretchX:m,stretchY:x,content:b,textFitWidth:T,textFitHeight:C}){this.paddedRect=s,this.pixelRatio=l,this.stretchX=m,this.stretchY=x,this.content=b,this.version=f,this.textFitWidth=T,this.textFitHeight=C}get tl(){return[this.paddedRect.x+Sa,this.paddedRect.y+Sa]}get br(){return[this.paddedRect.x+this.paddedRect.w-Sa,this.paddedRect.y+this.paddedRect.h-Sa]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Sa)/this.pixelRatio,(this.paddedRect.h-2*Sa)/this.pixelRatio]}}class q5{constructor(s,l){let f={},m={};this.haveRenderCallbacks=[];let x=[];this.addImages(s,f,x),this.addImages(l,m,x);let{w:b,h:T}=A5(x),C=new To({width:b||1,height:T||1});for(let O in s){let R=s[O],L=f[O].paddedRect;To.copy(R.data,C,{x:0,y:0},{x:L.x+Sa,y:L.y+Sa},R.data)}for(let O in l){let R=l[O],L=m[O].paddedRect,z=L.x+Sa,U=L.y+Sa,H=R.data.width,X=R.data.height;To.copy(R.data,C,{x:0,y:0},{x:z,y:U},R.data),To.copy(R.data,C,{x:0,y:X-1},{x:z,y:U-1},{width:H,height:1}),To.copy(R.data,C,{x:0,y:0},{x:z,y:U+X},{width:H,height:1}),To.copy(R.data,C,{x:H-1,y:0},{x:z-1,y:U},{width:1,height:X}),To.copy(R.data,C,{x:0,y:0},{x:z+H,y:U},{width:1,height:X})}this.image=C,this.iconPositions=f,this.patternPositions=m}addImages(s,l,f){for(let m in s){let x=s[m],b={x:0,y:0,w:x.data.width+2*Sa,h:x.data.height+2*Sa};f.push(b),l[m]=new Kq(b,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(s,l){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let f in s.updatedImages)this.patchUpdatedImage(this.iconPositions[f],s.getImage(f),l),this.patchUpdatedImage(this.patternPositions[f],s.getImage(f),l)}patchUpdatedImage(s,l,f){if(!s||!l||s.version===l.version)return;s.version=l.version;let[m,x]=s.tl;f.update(l.data,void 0,{x:m,y:x})}}var Oc;rt("ImagePosition",Kq),rt("ImageAtlas",q5),i.ah=void 0,(Oc=i.ah||(i.ah={}))[Oc.none=0]="none",Oc[Oc.horizontal=1]="horizontal",Oc[Oc.vertical=2]="vertical",Oc[Oc.horizontalOnly=3]="horizontalOnly";let fy=-17;class py{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,l){let f=new py;return f.scale=s||1,f.fontStack=l,f}static forImage(s){let l=new py;return l.imageName=s,l}}class Td{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,l){let f=new Td;for(let m=0;m<s.sections.length;m++){let x=s.sections[m];x.image?f.addImageSection(x):f.addTextSection(x,l)}return f}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let l="";for(let f=0;f<s.length;f++){let m=s.charCodeAt(f+1)||null,x=s.charCodeAt(f-1)||null;l+=m&&ob(m)&&!hy[s[f+1]]||x&&ob(x)&&!hy[s[f-1]]||!hy[s[f]]?s[f]:hy[s[f]]}return l}(this.text)}trim(){let s=0;for(let f=0;f<this.text.length&&wb[this.text.charCodeAt(f)];f++)s++;let l=this.text.length;for(let f=this.text.length-1;f>=0&&f>=s&&wb[this.text.charCodeAt(f)];f--)l--;this.text=this.text.substring(s,l),this.sectionIndex=this.sectionIndex.slice(s,l)}substring(s,l){let f=new Td;return f.text=this.text.substring(s,l),f.sectionIndex=this.sectionIndex.slice(s,l),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,l)=>Math.max(s,this.sections[l].scale),0)}addTextSection(s,l){this.text+=s.text,this.sections.push(py.forText(s.scale,s.fontStack||l));let f=this.sections.length-1;for(let m=0;m<s.text.length;++m)this.sectionIndex.push(f)}addImageSection(s){let l=s.image?s.image.name:"";if(l.length===0)return void Rt("Can't add FormattedSection with an empty image.");let f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(py.forImage(l)),this.sectionIndex.push(this.sections.length-1)):Rt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function bb(u,s,l,f,m,x,b,T,C,O,R,L,z,U,H){let X=Td.fromFeature(u,m),ne;L===i.ah.vertical&&X.verticalizePunctuation();let{processBidirectionalText:ue,processStyledBidirectionalText:xe}=wa;if(ue&&X.sections.length===1){ne=[];let Se=ue(X.toString(),Xq(X,O,x,s,f,U));for(let Re of Se){let Je=new Td;Je.text=Re,Je.sections=X.sections;for(let pt=0;pt<Re.length;pt++)Je.sectionIndex.push(0);ne.push(Je)}}else if(xe){ne=[];let Se=xe(X.text,X.sectionIndex,Xq(X,O,x,s,f,U));for(let Re of Se){let Je=new Td;Je.text=Re[0],Je.sectionIndex=Re[1],Je.sections=X.sections,ne.push(Je)}}else ne=function(Se,Re){let Je=[],pt=Se.text,Ke=0;for(let Ge of Re)Je.push(Se.substring(Ke,Ge)),Ke=Ge;return Ke<pt.length&&Je.push(Se.substring(Ke,pt.length)),Je}(X,Xq(X,O,x,s,f,U));let pe=[],ye={positionedLines:pe,text:X.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:L,iconsInText:!1,verticalizable:!1};return function(Se,Re,Je,pt,Ke,Ge,st,nt,tt,Ce,ut,ot){let xt=0,Tr=fy,xr=0,Dn=0,Wo=nt==="right"?1:nt==="left"?0:.5,ci=0;for(let un of Ke){un.trim();let kn=un.getMaxScale(),Ci=(kn-1)*Mn,hi={positionedGlyphs:[],lineOffset:0};Se.positionedLines[ci]=hi;let Qi=hi.positionedGlyphs,fi=0;if(!un.length()){Tr+=Ge,++ci;continue}for(let Ta=0;Ta<un.length();Ta++){let nr=un.getSection(Ta),qr=un.getSectionIndex(Ta),Nr=un.getCharCode(Ta),$a=0,Jr=null,qd=null,au=null,ou=Mn,Ho=!(tt===i.ah.horizontal||!ut&&!Jg(Nr)||ut&&(wb[Nr]||(Ln=Nr,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Ln)))));if(nr.imageName){let Ao=pt[nr.imageName];if(!Ao)continue;au=nr.imageName,Se.iconsInText=Se.iconsInText||!0,qd=Ao.paddedRect;let Kn=Ao.displaySize;nr.scale=nr.scale*Mn/ot,Jr={width:Kn[0],height:Kn[1],left:Sa,top:-C5,advance:Ho?Kn[1]:Kn[0]},$a=Ci+(Mn-Kn[1]*nr.scale),ou=Jr.advance;let ul=Ho?Kn[0]*nr.scale-Mn*kn:Kn[1]*nr.scale-Mn*kn;ul>0&&ul>fi&&(fi=ul)}else{let Ao=Je[nr.fontStack],Kn=Ao&&Ao[Nr];if(Kn&&Kn.rect)qd=Kn.rect,Jr=Kn.metrics;else{let ul=Re[nr.fontStack],_y=ul&&ul[Nr];if(!_y)continue;Jr=_y.metrics}$a=(kn-nr.scale)*Mn}Ho?(Se.verticalizable=!0,Qi.push({glyph:Nr,imageName:au,x:xt,y:Tr+$a,vertical:Ho,scale:nr.scale,fontStack:nr.fontStack,sectionIndex:qr,metrics:Jr,rect:qd}),xt+=ou*nr.scale+Ce):(Qi.push({glyph:Nr,imageName:au,x:xt,y:Tr+$a,vertical:Ho,scale:nr.scale,fontStack:nr.fontStack,sectionIndex:qr,metrics:Jr,rect:qd}),xt+=Jr.advance*nr.scale+Ce)}Qi.length!==0&&(xr=Math.max(xt-Ce,xr),Wqe(Qi,0,Qi.length-1,Wo,fi)),xt=0;let Co=Ge*kn+fi;hi.lineOffset=Math.max(fi,Ci),Tr+=Co,Dn=Math.max(Co,Dn),++ci}var Ln;let Xi=Tr-fy,{horizontalAlign:Yi,verticalAlign:Ji}=Yq(st);(function(un,kn,Ci,hi,Qi,fi,Co,Ta,nr){let qr=(kn-Ci)*Qi,Nr=0;Nr=fi!==Co?-Ta*hi-fy:(-hi*nr+.5)*Co;for(let $a of un)for(let Jr of $a.positionedGlyphs)Jr.x+=qr,Jr.y+=Nr})(Se.positionedLines,Wo,Yi,Ji,xr,Dn,Ge,Xi,Ke.length),Se.top+=-Ji*Xi,Se.bottom=Se.top+Xi,Se.left+=-Yi*xr,Se.right=Se.left+xr}(ye,s,l,f,ne,b,T,C,L,O,z,H),!function(Se){for(let Re of Se)if(Re.positionedGlyphs.length!==0)return!1;return!0}(pe)&&ye}let wb={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Vqe={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},$qe={40:!0};function P5(u,s,l,f,m,x){if(s.imageName){let b=f[s.imageName];return b?b.displaySize[0]*s.scale*Mn/x+m:0}{let b=l[s.fontStack],T=b&&b[u];return T?T.metrics.advance*s.scale+m:0}}function M5(u,s,l,f){let m=Math.pow(u-s,2);return f?u<s?m/2:2*m:m+Math.abs(l)*l}function Gqe(u,s,l){let f=0;return u===10&&(f-=1e4),l&&(f+=150),u!==40&&u!==65288||(f+=50),s!==41&&s!==65289||(f+=50),f}function O5(u,s,l,f,m,x){let b=null,T=M5(s,l,m,x);for(let C of f){let O=M5(s-C.x,l,m,x)+C.badness;O<=T&&(b=C,T=O)}return{index:u,x:s,priorBreak:b,badness:T}}function R5(u){return u?R5(u.priorBreak).concat(u.index):[]}function Xq(u,s,l,f,m,x){if(!u)return[];let b=[],T=function(L,z,U,H,X,ne){let ue=0;for(let xe=0;xe<L.length();xe++){let pe=L.getSection(xe);ue+=P5(L.getCharCode(xe),pe,H,X,z,ne)}return ue/Math.max(1,Math.ceil(ue/U))}(u,s,l,f,m,x),C=u.text.indexOf("\u200B")>=0,O=0;for(let L=0;L<u.length();L++){let z=u.getSection(L),U=u.getCharCode(L);if(wb[U]||(O+=P5(U,z,f,m,s,x)),L<u.length()-1){let H=!((R=U)<11904)&&(!!Gt["CJK Compatibility Forms"](R)||!!Gt["CJK Compatibility"](R)||!!Gt["CJK Strokes"](R)||!!Gt["CJK Symbols and Punctuation"](R)||!!Gt["Enclosed CJK Letters and Months"](R)||!!Gt["Halfwidth and Fullwidth Forms"](R)||!!Gt["Ideographic Description Characters"](R)||!!Gt["Vertical Forms"](R)||ab.test(String.fromCodePoint(R)));(Vqe[U]||H||z.imageName||L!==u.length()-2&&$qe[u.getCharCode(L+1)])&&b.push(O5(L+1,O,T,b,Gqe(U,u.getCharCode(L+1),H&&C),!1))}}var R;return R5(O5(u.length(),O,T,b,0,!0))}function Yq(u){let s=.5,l=.5;switch(u){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0;}switch(u){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0;}return{horizontalAlign:s,verticalAlign:l}}function Wqe(u,s,l,f,m){if(!f&&!m)return;let x=u[l],b=(u[l].x+x.metrics.advance*x.scale)*f;for(let T=s;T<=l;T++)u[T].x-=b,u[T].y+=m}function Hqe(u,s,l){let{horizontalAlign:f,verticalAlign:m}=Yq(l),x=s[0]-u.displaySize[0]*f,b=s[1]-u.displaySize[1]*m;return{image:u,top:b,bottom:b+u.displaySize[1],left:x,right:x+u.displaySize[0]}}function D5(u){var s,l;let f=u.left,m=u.top,x=u.right-f,b=u.bottom-m,T=(s=u.image.textFitWidth)!==null&&s!==void 0?s:"stretchOrShrink",C=(l=u.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",O=(u.image.content[2]-u.image.content[0])/(u.image.content[3]-u.image.content[1]);if(C==="proportional"){if(T==="stretchOnly"&&x/b<O||T==="proportional"){let R=Math.ceil(b*O);f*=R/x,x=R}}else if(T==="proportional"&&C==="stretchOnly"&&O!==0&&x/b>O){let R=Math.ceil(x/O);m*=R/b,b=R}return{x1:f,y1:m,x2:f+x,y2:m+b}}function L5(u,s,l,f,m,x){let b=u.image,T;if(b.content){let ne=b.content,ue=b.pixelRatio||1;T=[ne[0]/ue,ne[1]/ue,b.displaySize[0]-ne[2]/ue,b.displaySize[1]-ne[3]/ue]}let C=s.left*x,O=s.right*x,R,L,z,U;l==="width"||l==="both"?(U=m[0]+C-f[3],L=m[0]+O+f[1]):(U=m[0]+(C+O-b.displaySize[0])/2,L=U+b.displaySize[0]);let H=s.top*x,X=s.bottom*x;return l==="height"||l==="both"?(R=m[1]+H-f[0],z=m[1]+X+f[2]):(R=m[1]+(H+X-b.displaySize[1])/2,z=R+b.displaySize[1]),{image:b,top:R,right:L,bottom:z,left:U,collisionPadding:T}}let dy=255,iu=128,Rc=dy*iu;function k5(u,s){let{expression:l}=s;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Rr(u+1))};if(l.kind==="source")return{kind:"source"};{let{zoomStops:f,interpolationType:m}=l,x=0;for(;x<f.length&&f[x]<=u;)x++;x=Math.max(0,x-1);let b=x;for(;b<f.length&&f[b]<u+1;)b++;b=Math.min(f.length-1,b);let T=f[x],C=f[b];return l.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:C,interpolationType:m}:{kind:"camera",minZoom:T,maxZoom:C,minSize:l.evaluate(new Rr(T)),maxSize:l.evaluate(new Rr(C)),interpolationType:m}}}function Jq(u,s,l){let f="never",m=u.get(s);return m?f=m:u.get(l)&&(f="always"),f}let Zqe=Mc.VectorTileFeature.types,Kqe=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Eb(u,s,l,f,m,x,b,T,C,O,R,L,z){let U=T?Math.min(Rc,Math.round(T[0])):0,H=T?Math.min(Rc,Math.round(T[1])):0;u.emplaceBack(s,l,Math.round(32*f),Math.round(32*m),x,b,(U<<1)+(C?1:0),H,16*O,16*R,256*L,256*z)}function Qq(u,s,l){u.emplaceBack(s.x,s.y,l),u.emplaceBack(s.x,s.y,l),u.emplaceBack(s.x,s.y,l),u.emplaceBack(s.x,s.y,l)}function Xqe(u){for(let s of u.sections)if(Cq(s.text))return!0;return!1}class eP{constructor(s){this.layoutVertexArray=new dd,this.indexArray=new So,this.programConfigurations=s,this.segments=new Wt,this.dynamicLayoutVertexArray=new ty,this.opacityVertexArray=new Ua,this.hasVisibleVertices=!1,this.placedSymbolArray=new Dr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,l,f,m){this.isEmpty()||(f&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Iqe.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,Cqe.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,Kqe,!0),this.opacityVertexBuffer.itemSize=1),(f||m)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}rt("SymbolBuffers",eP);class tP{constructor(s,l,f){this.layoutVertexArray=new s,this.layoutAttributes=l,this.indexArray=new f,this.segments=new Wt,this.collisionVertexArray=new ru}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,Aqe.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}rt("CollisionBuffers",tP);class Id{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(b=>b.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Dq([]),this.placementViewportMatrix=Dq([]);let l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=k5(this.zoom,l["text-size"]),this.iconSizeData=k5(this.zoom,l["icon-size"]);let f=this.layers[0].layout,m=f.get("symbol-sort-key"),x=f.get("symbol-z-order");this.canOverlap=Jq(f,"text-overlap","text-allow-overlap")!=="never"||Jq(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(b=>i.ah[b])),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=s.sourceID}createArrays(){this.text=new eP(new bf(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new eP(new bf(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new Lr,this.lineVertexArray=new oi,this.symbolInstances=new Vt,this.textAnchorOffsets=new kr}calculateGlyphDependencies(s,l,f,m,x){for(let b=0;b<s.length;b++)if(l[s.charCodeAt(b)]=!0,(f||m)&&x){let T=hy[s.charAt(b)];T&&(l[T.charCodeAt(0)]=!0)}}populate(s,l,f){let m=this.layers[0],x=m.layout,b=x.get("text-font"),T=x.get("text-field"),C=x.get("icon-image"),O=(T.value.kind!=="constant"||T.value.value instanceof ya&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),R=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,L=x.get("symbol-sort-key");if(this.features=[],!O&&!R)return;let z=l.iconDependencies,U=l.glyphDependencies,H=l.availableImages,X=new Rr(this.zoom);for(let{feature:ne,id:ue,index:xe,sourceLayerIndex:pe}of s){let ye=m._featureFilter.needGeometry,Se=Ef(ne,ye);if(!m._featureFilter.filter(X,Se,f))continue;let Re,Je;if(ye||(Se.geometry=wf(ne)),O){let Ke=m.getValueAndResolveTokens("text-field",Se,f,H),Ge=ya.factory(Ke),st=this.hasRTLText=this.hasRTLText||Xqe(Ge);(!st||wa.getRTLTextPluginStatus()==="unavailable"||st&&wa.isParsed())&&(Re=Pqe(Ge,m,Se))}if(R){let Ke=m.getValueAndResolveTokens("icon-image",Se,f,H);Je=Ke instanceof xa?Ke:xa.fromString(Ke)}if(!Re&&!Je)continue;let pt=this.sortFeaturesByKey?L.evaluate(Se,{},f):void 0;if(this.features.push({id:ue,text:Re,icon:Je,index:xe,sourceLayerIndex:pe,geometry:Se.geometry,properties:ne.properties,type:Zqe[ne.type],sortKey:pt}),Je&&(z[Je.name]=!0),Re){let Ke=b.evaluate(Se,{},f).join(","),Ge=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(i.ah.vertical)>=0;for(let st of Re.sections)if(st.image)z[st.image.name]=!0;else{let nt=Xg(Re.toString()),tt=st.fontStack||Ke,Ce=U[tt]=U[tt]||{};this.calculateGlyphDependencies(st.text,Ce,Ge,this.allowVerticalPlacement,nt)}}}x.get("symbol-placement")==="line"&&(this.features=function(ne){let ue={},xe={},pe=[],ye=0;function Se(Ke){pe.push(ne[Ke]),ye++}function Re(Ke,Ge,st){let nt=xe[Ke];return delete xe[Ke],xe[Ge]=nt,pe[nt].geometry[0].pop(),pe[nt].geometry[0]=pe[nt].geometry[0].concat(st[0]),nt}function Je(Ke,Ge,st){let nt=ue[Ge];return delete ue[Ge],ue[Ke]=nt,pe[nt].geometry[0].shift(),pe[nt].geometry[0]=st[0].concat(pe[nt].geometry[0]),nt}function pt(Ke,Ge,st){let nt=st?Ge[0][Ge[0].length-1]:Ge[0][0];return`${Ke}:${nt.x}:${nt.y}`}for(let Ke=0;Ke<ne.length;Ke++){let Ge=ne[Ke],st=Ge.geometry,nt=Ge.text?Ge.text.toString():null;if(!nt){Se(Ke);continue}let tt=pt(nt,st),Ce=pt(nt,st,!0);if(tt in xe&&Ce in ue&&xe[tt]!==ue[Ce]){let ut=Je(tt,Ce,st),ot=Re(tt,Ce,pe[ut].geometry);delete ue[tt],delete xe[Ce],xe[pt(nt,pe[ot].geometry,!0)]=ot,pe[ut].geometry=null}else tt in xe?Re(tt,Ce,st):Ce in ue?Je(tt,Ce,st):(Se(Ke),ue[tt]=ye-1,xe[Ce]=ye-1)}return pe.filter(Ke=>Ke.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ne,ue)=>ne.sortKey-ue.sortKey)}update(s,l,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,l,this.layers,f),this.icon.programConfigurations.updatePaintArrays(s,l,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,l){let f=this.lineVertexArray.length;if(s.segment!==void 0){let m=s.dist(l[s.segment+1]),x=s.dist(l[s.segment]),b={};for(let T=s.segment+1;T<l.length;T++)b[T]={x:l[T].x,y:l[T].y,tileUnitDistanceFromAnchor:m},T<l.length-1&&(m+=l[T+1].dist(l[T]));for(let T=s.segment||0;T>=0;T--)b[T]={x:l[T].x,y:l[T].y,tileUnitDistanceFromAnchor:x},T>0&&(x+=l[T-1].dist(l[T]));for(let T=0;T<l.length;T++){let C=b[T];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(s,l,f,m,x,b,T,C,O,R,L,z){let U=s.indexArray,H=s.layoutVertexArray,X=s.segments.prepareSegment(4*l.length,H,U,this.canOverlap?b.sortKey:void 0),ne=this.glyphOffsetArray.length,ue=X.vertexLength,xe=this.allowVerticalPlacement&&T===i.ah.vertical?Math.PI/2:0,pe=b.text&&b.text.sections;for(let ye=0;ye<l.length;ye++){let{tl:Se,tr:Re,bl:Je,br:pt,tex:Ke,pixelOffsetTL:Ge,pixelOffsetBR:st,minFontScaleX:nt,minFontScaleY:tt,glyphOffset:Ce,isSDF:ut,sectionIndex:ot}=l[ye],xt=X.vertexLength,Tr=Ce[1];Eb(H,C.x,C.y,Se.x,Tr+Se.y,Ke.x,Ke.y,f,ut,Ge.x,Ge.y,nt,tt),Eb(H,C.x,C.y,Re.x,Tr+Re.y,Ke.x+Ke.w,Ke.y,f,ut,st.x,Ge.y,nt,tt),Eb(H,C.x,C.y,Je.x,Tr+Je.y,Ke.x,Ke.y+Ke.h,f,ut,Ge.x,st.y,nt,tt),Eb(H,C.x,C.y,pt.x,Tr+pt.y,Ke.x+Ke.w,Ke.y+Ke.h,f,ut,st.x,st.y,nt,tt),Qq(s.dynamicLayoutVertexArray,C,xe),U.emplaceBack(xt,xt+1,xt+2),U.emplaceBack(xt+1,xt+2,xt+3),X.vertexLength+=4,X.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ce[0]),ye!==l.length-1&&ot===l[ye+1].sectionIndex||s.programConfigurations.populatePaintArrays(H.length,b,b.index,{},z,pe&&pe[ot])}s.placedSymbolArray.emplaceBack(C.x,C.y,ne,this.glyphOffsetArray.length-ne,ue,O,R,C.segment,f?f[0]:0,f?f[1]:0,m[0],m[1],T,0,!1,0,L)}_addCollisionDebugVertex(s,l,f,m,x,b){return l.emplaceBack(0,0),s.emplaceBack(f.x,f.y,m,x,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(s,l,f,m,x,b,T){let C=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),O=C.vertexLength,R=x.layoutVertexArray,L=x.collisionVertexArray,z=T.anchorX,U=T.anchorY;this._addCollisionDebugVertex(R,L,b,z,U,new w(s,l)),this._addCollisionDebugVertex(R,L,b,z,U,new w(f,l)),this._addCollisionDebugVertex(R,L,b,z,U,new w(f,m)),this._addCollisionDebugVertex(R,L,b,z,U,new w(s,m)),C.vertexLength+=4;let H=x.indexArray;H.emplaceBack(O,O+1),H.emplaceBack(O+1,O+2),H.emplaceBack(O+2,O+3),H.emplaceBack(O+3,O),C.primitiveLength+=4}addDebugCollisionBoxes(s,l,f,m){for(let x=s;x<l;x++){let b=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,m?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new tP(Va,_5.members,Zn),this.iconCollisionBox=new tP(Va,_5.members,Zn);for(let s=0;s<this.symbolInstances.length;s++){let l=this.symbolInstances.get(s);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(s,l,f,m,x,b,T,C,O){let R={};for(let L=l;L<f;L++){let z=s.get(L);R.textBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY},R.textFeatureIndex=z.featureIndex;break}for(let L=m;L<x;L++){let z=s.get(L);R.verticalTextBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY},R.verticalTextFeatureIndex=z.featureIndex;break}for(let L=b;L<T;L++){let z=s.get(L);R.iconBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY},R.iconFeatureIndex=z.featureIndex;break}for(let L=C;L<O;L++){let z=s.get(L);R.verticalIconBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY},R.verticalIconFeatureIndex=z.featureIndex;break}return R}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){let f=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,l){let f=s.placedSymbolArray.get(l),m=f.vertexStartIndex+4*f.numGlyphs;for(let x=f.vertexStartIndex;x<m;x+=4)s.indexArray.emplaceBack(x,x+1,x+2),s.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let l=Math.sin(s),f=Math.cos(s),m=[],x=[],b=[];for(let T=0;T<this.symbolInstances.length;++T){b.push(T);let C=this.symbolInstances.get(T);m.push(0|Math.round(l*C.anchorX+f*C.anchorY)),x.push(C.featureIndex)}return b.sort((T,C)=>m[T]-m[C]||x[C]-x[T]),b}addToSortKeyRanges(s,l){let f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===l?f.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let l of this.symbolInstanceIndexes){let f=this.symbolInstances.get(l);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((m,x,b)=>{m>=0&&b.indexOf(m)===x&&this.addIndicesForPlacedSymbol(this.text,m)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let N5,F5;rt("SymbolBucket",Id,{omit:["layers","collisionBoxArray","features","compareText"]}),Id.MAX_GLYPHS=65535,Id.addDynamicAttributes=Qq;var rP={get paint(){return F5=F5||new _({"icon-opacity":new mt(Ee.paint_symbol["icon-opacity"]),"icon-color":new mt(Ee.paint_symbol["icon-color"]),"icon-halo-color":new mt(Ee.paint_symbol["icon-halo-color"]),"icon-halo-width":new mt(Ee.paint_symbol["icon-halo-width"]),"icon-halo-blur":new mt(Ee.paint_symbol["icon-halo-blur"]),"icon-translate":new it(Ee.paint_symbol["icon-translate"]),"icon-translate-anchor":new it(Ee.paint_symbol["icon-translate-anchor"]),"text-opacity":new mt(Ee.paint_symbol["text-opacity"]),"text-color":new mt(Ee.paint_symbol["text-color"],{runtimeType:ii,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new mt(Ee.paint_symbol["text-halo-color"]),"text-halo-width":new mt(Ee.paint_symbol["text-halo-width"]),"text-halo-blur":new mt(Ee.paint_symbol["text-halo-blur"]),"text-translate":new it(Ee.paint_symbol["text-translate"]),"text-translate-anchor":new it(Ee.paint_symbol["text-translate-anchor"])})},get layout(){return N5=N5||new _({"symbol-placement":new it(Ee.layout_symbol["symbol-placement"]),"symbol-spacing":new it(Ee.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new it(Ee.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new mt(Ee.layout_symbol["symbol-sort-key"]),"symbol-z-order":new it(Ee.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new it(Ee.layout_symbol["icon-allow-overlap"]),"icon-overlap":new it(Ee.layout_symbol["icon-overlap"]),"icon-ignore-placement":new it(Ee.layout_symbol["icon-ignore-placement"]),"icon-optional":new it(Ee.layout_symbol["icon-optional"]),"icon-rotation-alignment":new it(Ee.layout_symbol["icon-rotation-alignment"]),"icon-size":new mt(Ee.layout_symbol["icon-size"]),"icon-text-fit":new it(Ee.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new it(Ee.layout_symbol["icon-text-fit-padding"]),"icon-image":new mt(Ee.layout_symbol["icon-image"]),"icon-rotate":new mt(Ee.layout_symbol["icon-rotate"]),"icon-padding":new mt(Ee.layout_symbol["icon-padding"]),"icon-keep-upright":new it(Ee.layout_symbol["icon-keep-upright"]),"icon-offset":new mt(Ee.layout_symbol["icon-offset"]),"icon-anchor":new mt(Ee.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new it(Ee.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new it(Ee.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new it(Ee.layout_symbol["text-rotation-alignment"]),"text-field":new mt(Ee.layout_symbol["text-field"]),"text-font":new mt(Ee.layout_symbol["text-font"]),"text-size":new mt(Ee.layout_symbol["text-size"]),"text-max-width":new mt(Ee.layout_symbol["text-max-width"]),"text-line-height":new it(Ee.layout_symbol["text-line-height"]),"text-letter-spacing":new mt(Ee.layout_symbol["text-letter-spacing"]),"text-justify":new mt(Ee.layout_symbol["text-justify"]),"text-radial-offset":new mt(Ee.layout_symbol["text-radial-offset"]),"text-variable-anchor":new it(Ee.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new mt(Ee.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new mt(Ee.layout_symbol["text-anchor"]),"text-max-angle":new it(Ee.layout_symbol["text-max-angle"]),"text-writing-mode":new it(Ee.layout_symbol["text-writing-mode"]),"text-rotate":new mt(Ee.layout_symbol["text-rotate"]),"text-padding":new it(Ee.layout_symbol["text-padding"]),"text-keep-upright":new it(Ee.layout_symbol["text-keep-upright"]),"text-transform":new mt(Ee.layout_symbol["text-transform"]),"text-offset":new mt(Ee.layout_symbol["text-offset"]),"text-allow-overlap":new it(Ee.layout_symbol["text-allow-overlap"]),"text-overlap":new it(Ee.layout_symbol["text-overlap"]),"text-ignore-placement":new it(Ee.layout_symbol["text-ignore-placement"]),"text-optional":new it(Ee.layout_symbol["text-optional"])})}};class z5{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:Gi,this.defaultValue=s}evaluate(s){if(s.formattedSection){let l=this.defaultValue.property.overrides;if(l&&l.hasOverride(s.formattedSection))return l.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}rt("FormatSectionOverride",z5,{omit:["defaultValue"]});class Sb extends c{constructor(s){super(s,rP)}recalculate(s,l){if(super.recalculate(s,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let f=this.layout.get("text-writing-mode");if(f){let m=[];for(let x of f)m.indexOf(x)<0&&m.push(x);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,l,f,m){let x=this.layout.get(s).evaluate(l,{},f,m),b=this._unevaluatedLayout._values[s];return b.isDataDriven()||Qp(b.value)||!x?x:function(T,C){return C.replace(/{([^{}]+)}/g,(O,R)=>T&&R in T?String(T[R]):"")}(l.properties,x)}createBucket(s){return new Id(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let s of rP.paint.overridableProperties){if(!Sb.hasPaintOverride(this.layout,s))continue;let l=this.paint.get(s),f=new z5(l),m=new Jp(f,l.property.specification),x=null;x=l.value.kind==="constant"||l.value.kind==="source"?new vc("source",m):new mc("composite",m,l.value.zoomStops),this.paint._values[s]=new $o(l.property,x,l.parameters)}}_handleOverridablePaintPropertyUpdate(s,l,f){return!(!this.layout||l.isDataDriven()||f.isDataDriven())&&Sb.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,l){let f=s.get("text-field"),m=rP.paint.properties[l],x=!1,b=T=>{for(let C of T)if(m.overrides&&m.overrides.hasOverride(C))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof ya)b(f.value.value.sections);else if(f.value.kind==="source"){let T=O=>{x||(O instanceof yo&&wn(O.value)===Ts?b(O.value.sections):O instanceof Vp?b(O.sections):O.eachChild(T))},C=f.value;C._styleExpression&&T(C._styleExpression.expression)}return x}}let j5;var Yqe={get paint(){return j5=j5||new _({"background-color":new it(Ee.paint_background["background-color"]),"background-pattern":new fd(Ee.paint_background["background-pattern"]),"background-opacity":new it(Ee.paint_background["background-opacity"])})}};class Jqe extends c{constructor(s){super(s,Yqe)}}let B5;var Qqe={get paint(){return B5=B5||new _({"raster-opacity":new it(Ee.paint_raster["raster-opacity"]),"raster-hue-rotate":new it(Ee.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new it(Ee.paint_raster["raster-brightness-min"]),"raster-brightness-max":new it(Ee.paint_raster["raster-brightness-max"]),"raster-saturation":new it(Ee.paint_raster["raster-saturation"]),"raster-contrast":new it(Ee.paint_raster["raster-contrast"]),"raster-resampling":new it(Ee.paint_raster["raster-resampling"]),"raster-fade-duration":new it(Ee.paint_raster["raster-fade-duration"])})}};class ePe extends c{constructor(s){super(s,Qqe)}}class tPe extends c{constructor(s){super(s,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class rPe{constructor(s){this._methodToThrottle=s,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let nP=6371008.8;class Dc{constructor(s,l){if(isNaN(s)||isNaN(l))throw new Error(`Invalid LngLat object: (${s}, ${l})`);if(this.lng=+s,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Dc(se(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){let l=Math.PI/180,f=this.lat*l,m=s.lat*l,x=Math.sin(f)*Math.sin(m)+Math.cos(f)*Math.cos(m)*Math.cos((s.lng-this.lng)*l);return nP*Math.acos(Math.min(x,1))}static convert(s){if(s instanceof Dc)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new Dc(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new Dc(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let U5=2*Math.PI*nP;function V5(u){return U5*Math.cos(u*Math.PI/180)}function $5(u){return(180+u)/360}function G5(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function W5(u,s){return u/V5(s)}function iP(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}class vy{constructor(s,l,f=0){this.x=+s,this.y=+l,this.z=+f}static fromLngLat(s,l=0){let f=Dc.convert(s);return new vy($5(f.lng),G5(f.lat),W5(l,f.lat))}toLngLat(){return new Dc(360*this.x-180,iP(this.y))}toAltitude(){return this.z*V5(iP(this.y))}meterInMercatorCoordinateUnits(){return 1/U5*(s=iP(this.y),1/Math.cos(s*Math.PI/180));var s}}function H5(u,s,l){var f=2*Math.PI*6378137/256/Math.pow(2,l);return[u*f-2*Math.PI*6378137/2,s*f-2*Math.PI*6378137/2]}class aP{constructor(s,l,f){if(!function(m,x,b){return!(m<0||m>25||b<0||b>=Math.pow(2,m)||x<0||x>=Math.pow(2,m))}(s,l,f))throw new Error(`x=${l}, y=${f}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=l,this.y=f,this.key=my(0,s,s,l,f)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,l,f){let m=(b=this.y,T=this.z,C=H5(256*(x=this.x),256*(b=Math.pow(2,T)-b-1),T),O=H5(256*(x+1),256*(b+1),T),C[0]+","+C[1]+","+O[0]+","+O[1]);var x,b,T,C,O;let R=function(L,z,U){let H,X="";for(let ne=L;ne>0;ne--)H=1<<ne-1,X+=(z&H?1:0)+(U&H?2:0);return X}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,R).replace(/{bbox-epsg-3857}/g,m)}isChildOf(s){let l=this.z-s.z;return l>0&&s.x===this.x>>l&&s.y===this.y>>l}getTilePoint(s){let l=Math.pow(2,this.z);return new w((s.x*l-this.x)*En,(s.y*l-this.y)*En)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Z5{constructor(s,l){this.wrap=s,this.canonical=l,this.key=my(s,l.z,l.z,l.x,l.y)}}class Io{constructor(s,l,f,m,x){if(s<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${f}`);this.overscaledZ=s,this.wrap=l,this.canonical=new aP(f,+m,+x),this.key=my(l,s,f,m,x)}clone(){return new Io(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);let l=this.canonical.z-s;return s>this.canonical.z?new Io(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Io(s,this.wrap,s,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(s,l){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);let f=this.canonical.z-s;return s>this.canonical.z?my(this.wrap*+l,s,this.canonical.z,this.canonical.x,this.canonical.y):my(this.wrap*+l,s,s,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(s){if(s.wrap!==this.wrap)return!1;let l=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>l&&s.canonical.y===this.canonical.y>>l}children(s){if(this.overscaledZ>=s)return[new Io(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let l=this.canonical.z+1,f=2*this.canonical.x,m=2*this.canonical.y;return[new Io(l,this.wrap,l,f,m),new Io(l,this.wrap,l,f+1,m),new Io(l,this.wrap,l,f,m+1),new Io(l,this.wrap,l,f+1,m+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new Io(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new Io(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Z5(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new vy(s.x-this.wrap,s.y))}}function my(u,s,l,f,m){(u*=2)<0&&(u=-1*u-1);let x=1<<l;return(x*x*u+x*m+f).toString(36)+l.toString(36)+s.toString(36)}rt("CanonicalTileID",aP),rt("OverscaledTileID",Io,{omit:["posMatrix"]});class K5{constructor(s,l,f,m=1,x=1,b=1,T=0){if(this.uid=s,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void Rt(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;let C=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=x,this.blueFactor=b,this.baseShift=T;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4;}for(let O=0;O<C;O++)this.data[this._idx(-1,O)]=this.data[this._idx(0,O)],this.data[this._idx(C,O)]=this.data[this._idx(C-1,O)],this.data[this._idx(O,-1)]=this.data[this._idx(O,0)],this.data[this._idx(O,C)]=this.data[this._idx(O,C-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(C,-1)]=this.data[this._idx(C-1,0)],this.data[this._idx(-1,C)]=this.data[this._idx(0,C-1)],this.data[this._idx(C,C)]=this.data[this._idx(C-1,C-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let O=0;O<C;O++)for(let R=0;R<C;R++){let L=this.get(O,R);L>this.max&&(this.max=L),L<this.min&&(this.min=L)}}get(s,l){let f=new Uint8Array(this.data.buffer),m=4*this._idx(s,l);return this.unpack(f[m],f[m+1],f[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,l){if(s<-1||s>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(s+1)}unpack(s,l,f){return s*this.redFactor+l*this.greenFactor+f*this.blueFactor-this.baseShift}getPixels(){return new To({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,l,f){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let m=l*this.dim,x=l*this.dim+this.dim,b=f*this.dim,T=f*this.dim+this.dim;switch(l){case-1:m=x-1;break;case 1:x=m+1;}switch(f){case-1:b=T-1;break;case 1:T=b+1;}let C=-l*this.dim,O=-f*this.dim;for(let R=b;R<T;R++)for(let L=m;L<x;L++)this.data[this._idx(L,R)]=s.data[this._idx(L+C,R+O)]}}rt("DEMData",K5);class X5{constructor(s){this._stringToNumber={},this._numberToString=[];for(let l=0;l<s.length;l++){let f=s[l];this._stringToNumber[f]=l,this._numberToString[l]=f}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class Y5{constructor(s,l,f,m,x){this.type="Feature",this._vectorTileFeature=s,s._z=l,s._x=f,s._y=m,this.properties=s.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){let s={geometry:this.geometry};for(let l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(s[l]=this[l]);return s}}class J5{constructor(s,l){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new xc(En,16,0),this.grid3D=new xc(En,16,0),this.featureIndexArray=new Ti,this.promoteId=l}insert(s,l,f,m,x,b){let T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,m,x);let C=b?this.grid3D:this.grid;for(let O=0;O<l.length;O++){let R=l[O],L=[1/0,1/0,-1/0,-1/0];for(let z=0;z<R.length;z++){let U=R[z];L[0]=Math.min(L[0],U.x),L[1]=Math.min(L[1],U.y),L[2]=Math.max(L[2],U.x),L[3]=Math.max(L[3],U.y)}L[0]<En&&L[1]<En&&L[2]>=0&&L[3]>=0&&C.insert(T,L[0],L[1],L[2],L[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Mc.VectorTile(new Hq(this.rawTileData)).layers,this.sourceLayerCoder=new X5(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,l,f,m){this.loadVTLayers();let x=s.params||{},b=En/s.tileSize/s.scale,T=Lg(x.filter),C=s.queryGeometry,O=s.queryPadding*b,R=e6(C),L=this.grid.query(R.minX-O,R.minY-O,R.maxX+O,R.maxY+O),z=e6(s.cameraQueryGeometry),U=this.grid3D.query(z.minX-O,z.minY-O,z.maxX+O,z.maxY+O,(ne,ue,xe,pe)=>function(ye,Se,Re,Je,pt){for(let Ge of ye)if(Se<=Ge.x&&Re<=Ge.y&&Je>=Ge.x&&pt>=Ge.y)return!0;let Ke=[new w(Se,Re),new w(Se,pt),new w(Je,pt),new w(Je,Re)];if(ye.length>2){for(let Ge of Ke)if(_d(ye,Ge))return!0}for(let Ge=0;Ge<ye.length-1;Ge++)if(kAe(ye[Ge],ye[Ge+1],Ke))return!0;return!1}(s.cameraQueryGeometry,ne-O,ue-O,xe+O,pe+O));for(let ne of U)L.push(ne);L.sort(nPe);let H={},X;for(let ne=0;ne<L.length;ne++){let ue=L[ne];if(ue===X)continue;X=ue;let xe=this.featureIndexArray.get(ue),pe=null;this.loadMatchingFeature(H,xe.bucketIndex,xe.sourceLayerIndex,xe.featureIndex,T,x.layers,x.availableImages,l,f,m,(ye,Se,Re)=>(pe||(pe=wf(ye)),Se.queryIntersectsFeature(C,ye,Re,pe,this.z,s.transform,b,s.pixelPosMatrix)))}return H}loadMatchingFeature(s,l,f,m,x,b,T,C,O,R,L){let z=this.bucketLayerIDs[l];if(b&&!function(ne,ue){for(let xe=0;xe<ne.length;xe++)if(ue.indexOf(ne[xe])>=0)return!0;return!1}(b,z))return;let U=this.sourceLayerCoder.decode(f),H=this.vtLayers[U].feature(m);if(x.needGeometry){let ne=Ef(H,!0);if(!x.filter(new Rr(this.tileID.overscaledZ),ne,this.tileID.canonical))return}else if(!x.filter(new Rr(this.tileID.overscaledZ),H))return;let X=this.getId(H,U);for(let ne=0;ne<z.length;ne++){let ue=z[ne];if(b&&b.indexOf(ue)<0)continue;let xe=C[ue];if(!xe)continue;let pe={};X&&R&&(pe=R.getState(xe.sourceLayer||"_geojsonTileLayer",X));let ye=Ie({},O[ue]);ye.paint=Q5(ye.paint,xe.paint,H,pe,T),ye.layout=Q5(ye.layout,xe.layout,H,pe,T);let Se=!L||L(H,xe,pe);if(!Se)continue;let Re=new Y5(H,this.z,this.x,this.y,X);Re.layer=ye;let Je=s[ue];Je===void 0&&(Je=s[ue]=[]),Je.push({featureIndex:m,feature:Re,intersectionZ:Se})}}lookupSymbolFeatures(s,l,f,m,x,b,T,C){let O={};this.loadVTLayers();let R=Lg(x);for(let L of s)this.loadMatchingFeature(O,f,m,L,R,b,T,C,l);return O}hasLayer(s){for(let l of this.bucketLayerIDs)for(let f of l)if(s===f)return!0;return!1}getId(s,l){let f=s.id;return this.promoteId&&(f=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof f=="boolean"&&(f=Number(f))),f}}function Q5(u,s,l,f,m){return Ae(u,(x,b)=>{let T=s instanceof yf?s.get(b):null;return T&&T.evaluate?T.evaluate(l,f,m):T})}function e6(u){let s=1/0,l=1/0,f=-1/0,m=-1/0;for(let x of u)s=Math.min(s,x.x),l=Math.min(l,x.y),f=Math.max(f,x.x),m=Math.max(m,x.y);return{minX:s,minY:l,maxX:f,maxY:m}}function nPe(u,s){return s-u}function t6(u,s,l,f,m){let x=[];for(let b=0;b<u.length;b++){let T=u[b],C;for(let O=0;O<T.length-1;O++){let R=T[O],L=T[O+1];R.x<s&&L.x<s||(R.x<s?R=new w(s,R.y+(s-R.x)/(L.x-R.x)*(L.y-R.y))._round():L.x<s&&(L=new w(s,R.y+(s-R.x)/(L.x-R.x)*(L.y-R.y))._round()),R.y<l&&L.y<l||(R.y<l?R=new w(R.x+(l-R.y)/(L.y-R.y)*(L.x-R.x),l)._round():L.y<l&&(L=new w(R.x+(l-R.y)/(L.y-R.y)*(L.x-R.x),l)._round()),R.x>=f&&L.x>=f||(R.x>=f?R=new w(f,R.y+(f-R.x)/(L.x-R.x)*(L.y-R.y))._round():L.x>=f&&(L=new w(f,R.y+(f-R.x)/(L.x-R.x)*(L.y-R.y))._round()),R.y>=m&&L.y>=m||(R.y>=m?R=new w(R.x+(m-R.y)/(L.y-R.y)*(L.x-R.x),m)._round():L.y>=m&&(L=new w(R.x+(m-R.y)/(L.y-R.y)*(L.x-R.x),m)._round()),C&&R.equals(C[C.length-1])||(C=[R],x.push(C)),C.push(L)))))}}return x}rt("FeatureIndex",J5,{omit:["rawTileData","sourceLayerCoder"]});class Lc extends w{constructor(s,l,f,m){super(s,l),this.angle=f,m!==void 0&&(this.segment=m)}clone(){return new Lc(this.x,this.y,this.angle,this.segment)}}function r6(u,s,l,f,m){if(s.segment===void 0||l===0)return!0;let x=s,b=s.segment+1,T=0;for(;T>-l/2;){if(b--,b<0)return!1;T-=u[b].dist(x),x=u[b]}T+=u[b].dist(u[b+1]),b++;let C=[],O=0;for(;T<l/2;){let R=u[b],L=u[b+1];if(!L)return!1;let z=u[b-1].angleTo(R)-R.angleTo(L);for(z=Math.abs((z+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:T,angleDelta:z}),O+=z;T-C[0].distance>f;)O-=C.shift().angleDelta;if(O>m)return!1;b++,T+=R.dist(L)}return!0}function n6(u){let s=0;for(let l=0;l<u.length-1;l++)s+=u[l].dist(u[l+1]);return s}function i6(u,s,l){return u?.6*s*l:0}function a6(u,s){return Math.max(u?u.right-u.left:0,s?s.right-s.left:0)}function iPe(u,s,l,f,m,x){let b=i6(l,m,x),T=a6(l,f)*x,C=0,O=n6(u)/2;for(let R=0;R<u.length-1;R++){let L=u[R],z=u[R+1],U=L.dist(z);if(C+U>O){let H=(O-C)/U,X=Wi.number(L.x,z.x,H),ne=Wi.number(L.y,z.y,H),ue=new Lc(X,ne,z.angleTo(L),R);return ue._round(),!b||r6(u,ue,T,b,s)?ue:void 0}C+=U}}function aPe(u,s,l,f,m,x,b,T,C){let O=i6(f,x,b),R=a6(f,m),L=R*b,z=u[0].x===0||u[0].x===C||u[0].y===0||u[0].y===C;return s-L<s/4&&(s=L+s/4),o6(u,z?s/2*T%s:(R/2+2*x)*b*T%s,s,O,l,L,z,!1,C)}function o6(u,s,l,f,m,x,b,T,C){let O=x/2,R=n6(u),L=0,z=s-l,U=[];for(let H=0;H<u.length-1;H++){let X=u[H],ne=u[H+1],ue=X.dist(ne),xe=ne.angleTo(X);for(;z+l<L+ue;){z+=l;let pe=(z-L)/ue,ye=Wi.number(X.x,ne.x,pe),Se=Wi.number(X.y,ne.y,pe);if(ye>=0&&ye<C&&Se>=0&&Se<C&&z-O>=0&&z+O<=R){let Re=new Lc(ye,Se,xe,H);Re._round(),f&&!r6(u,Re,x,f,m)||U.push(Re)}}L+=ue}return T||U.length||b||(U=o6(u,L/2,l,f,m,x,b,!0,C)),U}rt("Anchor",Lc);let Cd=Sa;function s6(u,s,l,f){let m=[],x=u.image,b=x.pixelRatio,T=x.paddedRect.w-2*Cd,C=x.paddedRect.h-2*Cd,O={x1:u.left,y1:u.top,x2:u.right,y2:u.bottom},R=x.stretchX||[[0,T]],L=x.stretchY||[[0,C]],z=(Ce,ut)=>Ce+ut[1]-ut[0],U=R.reduce(z,0),H=L.reduce(z,0),X=T-U,ne=C-H,ue=0,xe=U,pe=0,ye=H,Se=0,Re=X,Je=0,pt=ne;if(x.content&&f){let Ce=x.content,ut=Ce[2]-Ce[0],ot=Ce[3]-Ce[1];(x.textFitWidth||x.textFitHeight)&&(O=D5(u)),ue=Tb(R,0,Ce[0]),pe=Tb(L,0,Ce[1]),xe=Tb(R,Ce[0],Ce[2]),ye=Tb(L,Ce[1],Ce[3]),Se=Ce[0]-ue,Je=Ce[1]-pe,Re=ut-xe,pt=ot-ye}let Ke=O.x1,Ge=O.y1,st=O.x2-Ke,nt=O.y2-Ge,tt=(Ce,ut,ot,xt)=>{let Tr=Ib(Ce.stretch-ue,xe,st,Ke),xr=Cb(Ce.fixed-Se,Re,Ce.stretch,U),Dn=Ib(ut.stretch-pe,ye,nt,Ge),Wo=Cb(ut.fixed-Je,pt,ut.stretch,H),ci=Ib(ot.stretch-ue,xe,st,Ke),Ln=Cb(ot.fixed-Se,Re,ot.stretch,U),Xi=Ib(xt.stretch-pe,ye,nt,Ge),Yi=Cb(xt.fixed-Je,pt,xt.stretch,H),Ji=new w(Tr,Dn),un=new w(ci,Dn),kn=new w(ci,Xi),Ci=new w(Tr,Xi),hi=new w(xr/b,Wo/b),Qi=new w(Ln/b,Yi/b),fi=s*Math.PI/180;if(fi){let nr=Math.sin(fi),qr=Math.cos(fi),Nr=[qr,-nr,nr,qr];Ji._matMult(Nr),un._matMult(Nr),Ci._matMult(Nr),kn._matMult(Nr)}let Co=Ce.stretch+Ce.fixed,Ta=ut.stretch+ut.fixed;return{tl:Ji,tr:un,bl:Ci,br:kn,tex:{x:x.paddedRect.x+Cd+Co,y:x.paddedRect.y+Cd+Ta,w:ot.stretch+ot.fixed-Co,h:xt.stretch+xt.fixed-Ta},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:hi,pixelOffsetBR:Qi,minFontScaleX:Re/b/st,minFontScaleY:pt/b/nt,isSDF:l}};if(f&&(x.stretchX||x.stretchY)){let Ce=u6(R,X,U),ut=u6(L,ne,H);for(let ot=0;ot<Ce.length-1;ot++){let xt=Ce[ot],Tr=Ce[ot+1];for(let xr=0;xr<ut.length-1;xr++)m.push(tt(xt,ut[xr],Tr,ut[xr+1]))}}else m.push(tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:C+1}));return m}function Tb(u,s,l){let f=0;for(let m of u)f+=Math.max(s,Math.min(l,m[1]))-Math.max(s,Math.min(l,m[0]));return f}function u6(u,s,l){let f=[{fixed:-Cd,stretch:0}];for(let[m,x]of u){let b=f[f.length-1];f.push({fixed:m-b.stretch,stretch:b.stretch}),f.push({fixed:m-b.stretch,stretch:b.stretch+(x-m)})}return f.push({fixed:s+Cd,stretch:l}),f}function Ib(u,s,l,f){return u/s*l+f}function Cb(u,s,l,f){return u-s*l/f}class Ab{constructor(s,l,f,m,x,b,T,C,O,R){var L;if(this.boxStartIndex=s.length,O){let z=b.top,U=b.bottom,H=b.collisionPadding;H&&(z-=H[1],U+=H[3]);let X=U-z;X>0&&(X=Math.max(10,X),this.circleDiameter=X)}else{let z=!((L=b.image)===null||L===void 0)&&L.content&&(b.image.textFitWidth||b.image.textFitHeight)?D5(b):{x1:b.left,y1:b.top,x2:b.right,y2:b.bottom};z.y1=z.y1*T-C[0],z.y2=z.y2*T+C[2],z.x1=z.x1*T-C[3],z.x2=z.x2*T+C[1];let U=b.collisionPadding;if(U&&(z.x1-=U[0]*T,z.y1-=U[1]*T,z.x2+=U[2]*T,z.y2+=U[3]*T),R){let H=new w(z.x1,z.y1),X=new w(z.x2,z.y1),ne=new w(z.x1,z.y2),ue=new w(z.x2,z.y2),xe=R*Math.PI/180;H._rotate(xe),X._rotate(xe),ne._rotate(xe),ue._rotate(xe),z.x1=Math.min(H.x,X.x,ne.x,ue.x),z.x2=Math.max(H.x,X.x,ne.x,ue.x),z.y1=Math.min(H.y,X.y,ne.y,ue.y),z.y2=Math.max(H.y,X.y,ne.y,ue.y)}s.emplaceBack(l.x,l.y,z.x1,z.y1,z.x2,z.y2,f,m,x)}this.boxEndIndex=s.length}}class oPe{constructor(s=[],l=(f,m)=>f<m?-1:f>m?1:0){if(this.data=s,this.length=this.data.length,this.compare=l,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;let s=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),s}peek(){return this.data[0]}_up(s){let{data:l,compare:f}=this,m=l[s];for(;s>0;){let x=s-1>>1,b=l[x];if(f(m,b)>=0)break;l[s]=b,s=x}l[s]=m}_down(s){let{data:l,compare:f}=this,m=this.length>>1,x=l[s];for(;s<m;){let b=1+(s<<1),T=b+1;if(T<this.length&&f(l[T],l[b])<0&&(b=T),f(l[b],x)>=0)break;l[s]=l[b],s=b}l[s]=x}}function sPe(u,s=1,l=!1){let f=1/0,m=1/0,x=-1/0,b=-1/0,T=u[0];for(let U=0;U<T.length;U++){let H=T[U];(!U||H.x<f)&&(f=H.x),(!U||H.y<m)&&(m=H.y),(!U||H.x>x)&&(x=H.x),(!U||H.y>b)&&(b=H.y)}let C=Math.min(x-f,b-m),O=C/2,R=new oPe([],uPe);if(C===0)return new w(f,m);for(let U=f;U<x;U+=C)for(let H=m;H<b;H+=C)R.push(new Ad(U+O,H+O,O,u));let L=function(U){let H=0,X=0,ne=0,ue=U[0];for(let xe=0,pe=ue.length,ye=pe-1;xe<pe;ye=xe++){let Se=ue[xe],Re=ue[ye],Je=Se.x*Re.y-Re.x*Se.y;X+=(Se.x+Re.x)*Je,ne+=(Se.y+Re.y)*Je,H+=3*Je}return new Ad(X/H,ne/H,0,U)}(u),z=R.length;for(;R.length;){let U=R.pop();(U.d>L.d||!L.d)&&(L=U,l&&console.log("found best %d after %d probes",Math.round(1e4*U.d)/1e4,z)),U.max-L.d<=s||(O=U.h/2,R.push(new Ad(U.p.x-O,U.p.y-O,O,u)),R.push(new Ad(U.p.x+O,U.p.y-O,O,u)),R.push(new Ad(U.p.x-O,U.p.y+O,O,u)),R.push(new Ad(U.p.x+O,U.p.y+O,O,u)),z+=4)}return l&&(console.log(`num probes: ${z}`),console.log(`best distance: ${L.d}`)),L.p}function uPe(u,s){return s.max-u.max}function Ad(u,s,l,f){this.p=new w(u,s),this.h=l,this.d=function(m,x){let b=!1,T=1/0;for(let C=0;C<x.length;C++){let O=x[C];for(let R=0,L=O.length,z=L-1;R<L;z=R++){let U=O[R],H=O[z];U.y>m.y!=H.y>m.y&&m.x<(H.x-U.x)*(m.y-U.y)/(H.y-U.y)+U.x&&(b=!b),T=Math.min(T,GU(m,U,H))}}return(b?1:-1)*Math.sqrt(T)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var li;i.aq=void 0,(li=i.aq||(i.aq={}))[li.center=1]="center",li[li.left=2]="left",li[li.right=3]="right",li[li.top=4]="top",li[li.bottom=5]="bottom",li[li["top-left"]=6]="top-left",li[li["top-right"]=7]="top-right",li[li["bottom-left"]=8]="bottom-left",li[li["bottom-right"]=9]="bottom-right";let kc=7,oP=Number.POSITIVE_INFINITY;function l6(u,s){return s[1]!==oP?function(l,f,m){let x=0,b=0;switch(f=Math.abs(f),m=Math.abs(m),l){case"top-right":case"top-left":case"top":b=m-kc;break;case"bottom-right":case"bottom-left":case"bottom":b=-m+kc;}switch(l){case"top-right":case"bottom-right":case"right":x=-f;break;case"top-left":case"bottom-left":case"left":x=f;}return[x,b]}(u,s[0],s[1]):function(l,f){let m=0,x=0;f<0&&(f=0);let b=f/Math.SQRT2;switch(l){case"top-right":case"top-left":x=b-kc;break;case"bottom-right":case"bottom-left":x=-b+kc;break;case"bottom":x=-f+kc;break;case"top":x=f-kc;}switch(l){case"top-right":case"bottom-right":m=-b;break;case"top-left":case"bottom-left":m=b;break;case"left":m=f;break;case"right":m=-f;}return[m,x]}(u,s[0])}function c6(u,s,l){var f;let m=u.layout,x=(f=m.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(s,{},l);if(x){let T=x.values,C=[];for(let O=0;O<T.length;O+=2){let R=C[O]=T[O],L=T[O+1].map(z=>z*Mn);R.startsWith("top")?L[1]-=kc:R.startsWith("bottom")&&(L[1]+=kc),C[O+1]=L}return new Na(C)}let b=m.get("text-variable-anchor");if(b){let T;T=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(s,{},l)*Mn,oP]:m.get("text-offset").evaluate(s,{},l).map(O=>O*Mn);let C=[];for(let O of b)C.push(O,l6(O,T));return new Na(C)}return null}function sP(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left";}return"center"}function lPe(u,s,l,f,m,x,b,T,C,O,R){let L=x.textMaxSize.evaluate(s,{});L===void 0&&(L=b);let z=u.layers[0].layout,U=z.get("icon-offset").evaluate(s,{},R),H=f6(l.horizontal),X=b/24,ne=u.tilePixelRatio*X,ue=u.tilePixelRatio*L/24,xe=u.tilePixelRatio*T,pe=u.tilePixelRatio*z.get("symbol-spacing"),ye=z.get("text-padding")*u.tilePixelRatio,Se=function(Ce,ut,ot,xt=1){let Tr=Ce.get("icon-padding").evaluate(ut,{},ot),xr=Tr&&Tr.values;return[xr[0]*xt,xr[1]*xt,xr[2]*xt,xr[3]*xt]}(z,s,R,u.tilePixelRatio),Re=z.get("text-max-angle")/180*Math.PI,Je=z.get("text-rotation-alignment")!=="viewport"&&z.get("symbol-placement")!=="point",pt=z.get("icon-rotation-alignment")==="map"&&z.get("symbol-placement")!=="point",Ke=z.get("symbol-placement"),Ge=pe/2,st=z.get("icon-text-fit"),nt;f&&st!=="none"&&(u.allowVerticalPlacement&&l.vertical&&(nt=L5(f,l.vertical,st,z.get("icon-text-fit-padding"),U,X)),H&&(f=L5(f,H,st,z.get("icon-text-fit-padding"),U,X)));let tt=(Ce,ut)=>{ut.x<0||ut.x>=En||ut.y<0||ut.y>=En||function(ot,xt,Tr,xr,Dn,Wo,ci,Ln,Xi,Yi,Ji,un,kn,Ci,hi,Qi,fi,Co,Ta,nr,qr,Nr,$a,Jr,qd){let au=ot.addToLineVertexArray(xt,Tr),ou,Ho,Ao,Kn,ul=0,_y=0,m6=0,g6=0,vP=-1,mP=-1,ll={},y6=vd("");if(ot.allowVerticalPlacement&&xr.vertical){let Ai=Ln.layout.get("text-rotate").evaluate(qr,{},Jr)+90;Ao=new Ab(Xi,xt,Yi,Ji,un,xr.vertical,kn,Ci,hi,Ai),ci&&(Kn=new Ab(Xi,xt,Yi,Ji,un,ci,fi,Co,hi,Ai))}if(Dn){let Ai=Ln.layout.get("icon-rotate").evaluate(qr,{}),qo=Ln.layout.get("icon-text-fit")!=="none",Tf=s6(Dn,Ai,$a,qo),Ps=ci?s6(ci,Ai,$a,qo):void 0;Ho=new Ab(Xi,xt,Yi,Ji,un,Dn,fi,Co,!1,Ai),ul=4*Tf.length;let If=ot.iconSizeData,su=null;If.kind==="source"?(su=[iu*Ln.layout.get("icon-size").evaluate(qr,{})],su[0]>Rc&&Rt(`${ot.layerIds[0]}: Value for "icon-size" is >= ${dy}. Reduce your "icon-size".`)):If.kind==="composite"&&(su=[iu*Nr.compositeIconSizes[0].evaluate(qr,{},Jr),iu*Nr.compositeIconSizes[1].evaluate(qr,{},Jr)],(su[0]>Rc||su[1]>Rc)&&Rt(`${ot.layerIds[0]}: Value for "icon-size" is >= ${dy}. Reduce your "icon-size".`)),ot.addSymbols(ot.icon,Tf,su,nr,Ta,qr,i.ah.none,xt,au.lineStartIndex,au.lineLength,-1,Jr),vP=ot.icon.placedSymbolArray.length-1,Ps&&(_y=4*Ps.length,ot.addSymbols(ot.icon,Ps,su,nr,Ta,qr,i.ah.vertical,xt,au.lineStartIndex,au.lineLength,-1,Jr),mP=ot.icon.placedSymbolArray.length-1)}let _6=Object.keys(xr.horizontal);for(let Ai of _6){let qo=xr.horizontal[Ai];if(!ou){y6=vd(qo.text);let Ps=Ln.layout.get("text-rotate").evaluate(qr,{},Jr);ou=new Ab(Xi,xt,Yi,Ji,un,qo,kn,Ci,hi,Ps)}let Tf=qo.positionedLines.length===1;if(m6+=h6(ot,xt,qo,Wo,Ln,hi,qr,Qi,au,xr.vertical?i.ah.horizontal:i.ah.horizontalOnly,Tf?_6:[Ai],ll,vP,Nr,Jr),Tf)break}xr.vertical&&(g6+=h6(ot,xt,xr.vertical,Wo,Ln,hi,qr,Qi,au,i.ah.vertical,["vertical"],ll,mP,Nr,Jr));let fPe=ou?ou.boxStartIndex:ot.collisionBoxArray.length,pPe=ou?ou.boxEndIndex:ot.collisionBoxArray.length,dPe=Ao?Ao.boxStartIndex:ot.collisionBoxArray.length,vPe=Ao?Ao.boxEndIndex:ot.collisionBoxArray.length,mPe=Ho?Ho.boxStartIndex:ot.collisionBoxArray.length,gPe=Ho?Ho.boxEndIndex:ot.collisionBoxArray.length,yPe=Kn?Kn.boxStartIndex:ot.collisionBoxArray.length,_Pe=Kn?Kn.boxEndIndex:ot.collisionBoxArray.length,qs=-1,Pb=(Ai,qo)=>Ai&&Ai.circleDiameter?Math.max(Ai.circleDiameter,qo):qo;qs=Pb(ou,qs),qs=Pb(Ao,qs),qs=Pb(Ho,qs),qs=Pb(Kn,qs);let x6=qs>-1?1:0;x6&&(qs*=qd/Mn),ot.glyphOffsetArray.length>=Id.MAX_GLYPHS&&Rt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),qr.sortKey!==void 0&&ot.addToSortKeyRanges(ot.symbolInstances.length,qr.sortKey);let xPe=c6(Ln,qr,Jr),[bPe,wPe]=function(Ai,qo){let Tf=Ai.length,Ps=qo==null?void 0:qo.values;if((Ps==null?void 0:Ps.length)>0)for(let If=0;If<Ps.length;If+=2){let su=Ps[If+1];Ai.emplaceBack(i.aq[Ps[If]],su[0],su[1])}return[Tf,Ai.length]}(ot.textAnchorOffsets,xPe);ot.symbolInstances.emplaceBack(xt.x,xt.y,ll.right>=0?ll.right:-1,ll.center>=0?ll.center:-1,ll.left>=0?ll.left:-1,ll.vertical||-1,vP,mP,y6,fPe,pPe,dPe,vPe,mPe,gPe,yPe,_Pe,Yi,m6,g6,ul,_y,x6,0,kn,qs,bPe,wPe)}(u,ut,Ce,l,f,m,nt,u.layers[0],u.collisionBoxArray,s.index,s.sourceLayerIndex,u.index,ne,[ye,ye,ye,ye],Je,C,xe,Se,pt,U,s,x,O,R,b)};if(Ke==="line")for(let Ce of t6(s.geometry,0,0,En,En)){let ut=aPe(Ce,pe,Re,l.vertical||H,f,24,ue,u.overscaling,En);for(let ot of ut)H&&cPe(u,H.text,Ge,ot)||tt(Ce,ot)}else if(Ke==="line-center"){for(let Ce of s.geometry)if(Ce.length>1){let ut=iPe(Ce,Re,l.vertical||H,f,24,ue);ut&&tt(Ce,ut)}}else if(s.type==="Polygon")for(let Ce of Gp(s.geometry,0)){let ut=sPe(Ce,16);tt(Ce[0],new Lc(ut.x,ut.y,0))}else if(s.type==="LineString")for(let Ce of s.geometry)tt(Ce,new Lc(Ce[0].x,Ce[0].y,0));else if(s.type==="Point")for(let Ce of s.geometry)for(let ut of Ce)tt([ut],new Lc(ut.x,ut.y,0))}function h6(u,s,l,f,m,x,b,T,C,O,R,L,z,U,H){let X=function(xe,pe,ye,Se,Re,Je,pt,Ke){let Ge=Se.layout.get("text-rotate").evaluate(Je,{})*Math.PI/180,st=[];for(let nt of pe.positionedLines)for(let tt of nt.positionedGlyphs){if(!tt.rect)continue;let Ce=tt.rect||{},ut=C5+1,ot=!0,xt=1,Tr=0,xr=(Re||Ke)&&tt.vertical,Dn=tt.metrics.advance*tt.scale/2;if(Ke&&pe.verticalizable&&(Tr=nt.lineOffset/2-(tt.imageName?-(Mn-tt.metrics.width*tt.scale)/2:(tt.scale-1)*Mn)),tt.imageName){let nr=pt[tt.imageName];ot=nr.sdf,xt=nr.pixelRatio,ut=Sa/xt}let Wo=Re?[tt.x+Dn,tt.y]:[0,0],ci=Re?[0,0]:[tt.x+Dn+ye[0],tt.y+ye[1]-Tr],Ln=[0,0];xr&&(Ln=ci,ci=[0,0]);let Xi=tt.metrics.isDoubleResolution?2:1,Yi=(tt.metrics.left-ut)*tt.scale-Dn+ci[0],Ji=(-tt.metrics.top-ut)*tt.scale+ci[1],un=Yi+Ce.w/Xi*tt.scale/xt,kn=Ji+Ce.h/Xi*tt.scale/xt,Ci=new w(Yi,Ji),hi=new w(un,Ji),Qi=new w(Yi,kn),fi=new w(un,kn);if(xr){let nr=new w(-Dn,Dn-fy),qr=-Math.PI/2,Nr=Mn/2-Dn,$a=new w(5-fy-Nr,-(tt.imageName?Nr:0)),Jr=new w(...Ln);Ci._rotateAround(qr,nr)._add($a)._add(Jr),hi._rotateAround(qr,nr)._add($a)._add(Jr),Qi._rotateAround(qr,nr)._add($a)._add(Jr),fi._rotateAround(qr,nr)._add($a)._add(Jr)}if(Ge){let nr=Math.sin(Ge),qr=Math.cos(Ge),Nr=[qr,-nr,nr,qr];Ci._matMult(Nr),hi._matMult(Nr),Qi._matMult(Nr),fi._matMult(Nr)}let Co=new w(0,0),Ta=new w(0,0);st.push({tl:Ci,tr:hi,bl:Qi,br:fi,tex:Ce,writingMode:pe.writingMode,glyphOffset:Wo,sectionIndex:tt.sectionIndex,isSDF:ot,pixelOffsetTL:Co,pixelOffsetBR:Ta,minFontScaleX:0,minFontScaleY:0})}return st}(0,l,T,m,x,b,f,u.allowVerticalPlacement),ne=u.textSizeData,ue=null;ne.kind==="source"?(ue=[iu*m.layout.get("text-size").evaluate(b,{})],ue[0]>Rc&&Rt(`${u.layerIds[0]}: Value for "text-size" is >= ${dy}. Reduce your "text-size".`)):ne.kind==="composite"&&(ue=[iu*U.compositeTextSizes[0].evaluate(b,{},H),iu*U.compositeTextSizes[1].evaluate(b,{},H)],(ue[0]>Rc||ue[1]>Rc)&&Rt(`${u.layerIds[0]}: Value for "text-size" is >= ${dy}. Reduce your "text-size".`)),u.addSymbols(u.text,X,ue,T,x,b,O,s,C.lineStartIndex,C.lineLength,z,H);for(let xe of R)L[xe]=u.text.placedSymbolArray.length-1;return 4*X.length}function f6(u){for(let s in u)return u[s];return null}function cPe(u,s,l,f){let m=u.compareText;if(s in m){let x=m[s];for(let b=x.length-1;b>=0;b--)if(f.dist(x[b])<l)return!0}else m[s]=[];return m[s].push(f),!1}let p6=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class uP{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[l,f]=new Uint8Array(s,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");let m=f>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);let x=p6[15&f];if(!x)throw new Error("Unrecognized array type.");let[b]=new Uint16Array(s,2,1),[T]=new Uint32Array(s,4,1);return new uP(T,b,x,s)}constructor(s,l=64,f=Float64Array,m){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=f,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;let x=p6.indexOf(this.ArrayType),b=2*s*this.ArrayType.BYTES_PER_ELEMENT,T=s*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-T%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${f}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+T+C,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+b+T+C),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+T+C,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=s)}add(s,l){let f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=s,this.coords[this._pos++]=l,f}finish(){let s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return lP(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,l,f,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:x,coords:b,nodeSize:T}=this,C=[0,x.length-1,0],O=[];for(;C.length;){let R=C.pop()||0,L=C.pop()||0,z=C.pop()||0;if(L-z<=T){for(let ne=z;ne<=L;ne++){let ue=b[2*ne],xe=b[2*ne+1];ue>=s&&ue<=f&&xe>=l&&xe<=m&&O.push(x[ne])}continue}let U=z+L>>1,H=b[2*U],X=b[2*U+1];H>=s&&H<=f&&X>=l&&X<=m&&O.push(x[U]),(R===0?s<=H:l<=X)&&(C.push(z),C.push(U-1),C.push(1-R)),(R===0?f>=H:m>=X)&&(C.push(U+1),C.push(L),C.push(1-R))}return O}within(s,l,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:m,coords:x,nodeSize:b}=this,T=[0,m.length-1,0],C=[],O=f*f;for(;T.length;){let R=T.pop()||0,L=T.pop()||0,z=T.pop()||0;if(L-z<=b){for(let ne=z;ne<=L;ne++)v6(x[2*ne],x[2*ne+1],s,l)<=O&&C.push(m[ne]);continue}let U=z+L>>1,H=x[2*U],X=x[2*U+1];v6(H,X,s,l)<=O&&C.push(m[U]),(R===0?s-f<=H:l-f<=X)&&(T.push(z),T.push(U-1),T.push(1-R)),(R===0?s+f>=H:l+f>=X)&&(T.push(U+1),T.push(L),T.push(1-R))}return C}}function lP(u,s,l,f,m,x){if(m-f<=l)return;let b=f+m>>1;d6(u,s,b,f,m,x),lP(u,s,l,f,b-1,1-x),lP(u,s,l,b+1,m,1-x)}function d6(u,s,l,f,m,x){for(;m>f;){if(m-f>600){let O=m-f+1,R=l-f+1,L=Math.log(O),z=.5*Math.exp(2*L/3),U=.5*Math.sqrt(L*z*(O-z)/O)*(R-O/2<0?-1:1);d6(u,s,l,Math.max(f,Math.floor(l-R*z/O+U)),Math.min(m,Math.floor(l+(O-R)*z/O+U)),x)}let b=s[2*l+x],T=f,C=m;for(gy(u,s,f,l),s[2*m+x]>b&&gy(u,s,f,m);T<C;){for(gy(u,s,T,C),T++,C--;s[2*T+x]<b;)T++;for(;s[2*C+x]>b;)C--}s[2*f+x]===b?gy(u,s,f,C):(C++,gy(u,s,C,m)),C<=l&&(f=C+1),l<=C&&(m=C-1)}}function gy(u,s,l,f){cP(u,l,f),cP(s,2*l,2*f),cP(s,2*l+1,2*f+1)}function cP(u,s,l){let f=u[s];u[s]=u[l],u[l]=f}function v6(u,s,l,f){let m=u-l,x=s-f;return m*m+x*x}var hP;i.bg=void 0,(hP=i.bg||(i.bg={})).create="create",hP.load="load",hP.fullLoad="fullLoad";let qb=null,yy=[],fP=1e3/60,pP="loadTime",dP="fullLoadTime",hPe={mark(u){performance.mark(u)},frame(u){let s=u;qb!=null&&yy.push(s-qb),qb=s},clearMetrics(){qb=null,yy=[],performance.clearMeasures(pP),performance.clearMeasures(dP);for(let u in i.bg)performance.clearMarks(i.bg[u])},getPerformanceMetrics(){performance.measure(pP,i.bg.create,i.bg.load),performance.measure(dP,i.bg.create,i.bg.fullLoad);let u=performance.getEntriesByName(pP)[0].duration,s=performance.getEntriesByName(dP)[0].duration,l=yy.length,f=1/(yy.reduce((x,b)=>x+b,0)/l/1e3),m=yy.filter(x=>x>fP).reduce((x,b)=>x+(b-fP)/fP,0);return{loadTime:u,fullLoadTime:s,fps:f,percentDroppedFrames:m/(l+m)*100,totalFrames:l}}};i.$=class extends N{},i.A=xd,i.B=wq,i.C=function(u){if(Pn==null){let s=u.navigator?u.navigator.userAgent:null;Pn=!!u.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Pn},i.D=it,i.E=Es,i.F=class{constructor(u,s){this.target=u,this.mapId=s,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new rPe(()=>this.process()),this.subscription=function(l,f,m,x){return l.addEventListener(f,m,!1),{unsubscribe:()=>{l.removeEventListener(f,m,!1)}}}(this.target,"message",l=>this.receive(l)),this.globalScope=Xr(self)?u:window}registerMessageHandler(u,s){this.messageHandlers[u]=s}sendAsync(u,s){return new Promise((l,f)=>{let m=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[m]={resolve:l,reject:f},s&&s.signal.addEventListener("abort",()=>{delete this.resolveRejects[m];let T={id:m,type:"<cancel>",origin:location.origin,targetMapId:u.targetMapId,sourceMapId:this.mapId};this.target.postMessage(T)},{once:!0});let x=[],b=Object.assign(Object.assign({},u),{id:m,sourceMapId:this.mapId,origin:location.origin,data:bc(u.data,x)});this.target.postMessage(b,{transfer:x})})}receive(u){let s=u.data,l=s.id;if(!(s.origin!=="file://"&&location.origin!=="file://"&&s.origin!=="resource://android"&&location.origin!=="resource://android"&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId)){if(s.type==="<cancel>"){delete this.tasks[l];let f=this.abortControllers[l];return delete this.abortControllers[l],void(f&&f.abort())}if(Xr(self)||s.mustQueue)return this.tasks[l]=s,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,s)}}process(){if(this.taskQueue.length===0)return;let u=this.taskQueue.shift(),s=this.tasks[u];delete this.tasks[u],this.taskQueue.length>0&&this.invoker.trigger(),s&&this.processTask(u,s)}processTask(u,s){return a(this,void 0,void 0,function*(){if(s.type==="<response>"){let m=this.resolveRejects[u];return delete this.resolveRejects[u],m?void(s.error?m.reject(wc(s.error)):m.resolve(wc(s.data))):void 0}if(!this.messageHandlers[s.type])return void this.completeTask(u,new Error(`Could not find a registered handler for ${s.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let l=wc(s.data),f=new AbortController;this.abortControllers[u]=f;try{let m=yield this.messageHandlers[s.type](s.sourceMapId,l,f);this.completeTask(u,null,m)}catch(m){this.completeTask(u,m)}})}completeTask(u,s,l){let f=[];delete this.abortControllers[u];let m={id:u,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:s?bc(s):null,data:bc(l,f)};this.target.postMessage(m,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},i.G=ti,i.H=function(){var u=new xd(16);return xd!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},i.I=Kq,i.J=function(u,s,l){var f,m,x,b,T,C,O,R,L,z,U,H,X=l[0],ne=l[1],ue=l[2];return s===u?(u[12]=s[0]*X+s[4]*ne+s[8]*ue+s[12],u[13]=s[1]*X+s[5]*ne+s[9]*ue+s[13],u[14]=s[2]*X+s[6]*ne+s[10]*ue+s[14],u[15]=s[3]*X+s[7]*ne+s[11]*ue+s[15]):(m=s[1],x=s[2],b=s[3],T=s[4],C=s[5],O=s[6],R=s[7],L=s[8],z=s[9],U=s[10],H=s[11],u[0]=f=s[0],u[1]=m,u[2]=x,u[3]=b,u[4]=T,u[5]=C,u[6]=O,u[7]=R,u[8]=L,u[9]=z,u[10]=U,u[11]=H,u[12]=f*X+T*ne+L*ue+s[12],u[13]=m*X+C*ne+z*ue+s[13],u[14]=x*X+O*ne+U*ue+s[14],u[15]=b*X+R*ne+H*ue+s[15]),u},i.K=function(u,s,l){var f=l[0],m=l[1],x=l[2];return u[0]=s[0]*f,u[1]=s[1]*f,u[2]=s[2]*f,u[3]=s[3]*f,u[4]=s[4]*m,u[5]=s[5]*m,u[6]=s[6]*m,u[7]=s[7]*m,u[8]=s[8]*x,u[9]=s[9]*x,u[10]=s[10]*x,u[11]=s[11]*x,u[12]=s[12],u[13]=s[13],u[14]=s[14],u[15]=s[15],u},i.L=KU,i.M=function(u,s){let l={};for(let f=0;f<s.length;f++){let m=s[f];m in u&&(l[m]=u[m])}return l},i.N=Dc,i.O=$5,i.P=w,i.Q=G5,i.R=To,i.S=Io,i.T=cd,i.U=Q,i.V=$,i.W=cr,i.X=En,i.Y=I,i.Z=vy,i._=a,i.a=Ei,i.a$=function(u,s){var l=u[0],f=u[1],m=u[2],x=u[3],b=u[4],T=u[5],C=u[6],O=u[7],R=u[8],L=u[9],z=u[10],U=u[11],H=u[12],X=u[13],ne=u[14],ue=u[15],xe=s[0],pe=s[1],ye=s[2],Se=s[3],Re=s[4],Je=s[5],pt=s[6],Ke=s[7],Ge=s[8],st=s[9],nt=s[10],tt=s[11],Ce=s[12],ut=s[13],ot=s[14],xt=s[15];return Math.abs(l-xe)<=Ki*Math.max(1,Math.abs(l),Math.abs(xe))&&Math.abs(f-pe)<=Ki*Math.max(1,Math.abs(f),Math.abs(pe))&&Math.abs(m-ye)<=Ki*Math.max(1,Math.abs(m),Math.abs(ye))&&Math.abs(x-Se)<=Ki*Math.max(1,Math.abs(x),Math.abs(Se))&&Math.abs(b-Re)<=Ki*Math.max(1,Math.abs(b),Math.abs(Re))&&Math.abs(T-Je)<=Ki*Math.max(1,Math.abs(T),Math.abs(Je))&&Math.abs(C-pt)<=Ki*Math.max(1,Math.abs(C),Math.abs(pt))&&Math.abs(O-Ke)<=Ki*Math.max(1,Math.abs(O),Math.abs(Ke))&&Math.abs(R-Ge)<=Ki*Math.max(1,Math.abs(R),Math.abs(Ge))&&Math.abs(L-st)<=Ki*Math.max(1,Math.abs(L),Math.abs(st))&&Math.abs(z-nt)<=Ki*Math.max(1,Math.abs(z),Math.abs(nt))&&Math.abs(U-tt)<=Ki*Math.max(1,Math.abs(U),Math.abs(tt))&&Math.abs(H-Ce)<=Ki*Math.max(1,Math.abs(H),Math.abs(Ce))&&Math.abs(X-ut)<=Ki*Math.max(1,Math.abs(X),Math.abs(ut))&&Math.abs(ne-ot)<=Ki*Math.max(1,Math.abs(ne),Math.abs(ot))&&Math.abs(ue-xt)<=Ki*Math.max(1,Math.abs(ue),Math.abs(xt))},i.a0=Wt,i.a1=aP,i.a2=Fe,i.a3=u=>{let s=window.document.createElement("video");return s.muted=!0,new Promise(l=>{s.onloadstart=()=>{l(s)};for(let f of u){let m=window.document.createElement("source");an(f)||(s.crossOrigin="Anonymous"),m.src=f,s.appendChild(m)}})},i.a4=function(){return qe++},i.a5=Xe,i.a6=Id,i.a7=Lg,i.a8=Ef,i.a9=Y5,i.aA=function(u){if(u.type==="custom")return new tPe(u);switch(u.type){case"background":return new Jqe(u);case"circle":return new zAe(u);case"fill":return new rqe(u);case"fill-extrusion":return new gqe(u);case"heatmap":return new BAe(u);case"hillshade":return new VAe(u);case"line":return new Tqe(u);case"raster":return new ePe(u);case"symbol":return new Sb(u);}},i.aB=Le,i.aC=function(u,s){if(!u)return[{command:"setStyle",args:[s]}];let l=[];try{if(!Kt(u.version,s.version))return[{command:"setStyle",args:[s]}];Kt(u.center,s.center)||l.push({command:"setCenter",args:[s.center]}),Kt(u.zoom,s.zoom)||l.push({command:"setZoom",args:[s.zoom]}),Kt(u.bearing,s.bearing)||l.push({command:"setBearing",args:[s.bearing]}),Kt(u.pitch,s.pitch)||l.push({command:"setPitch",args:[s.pitch]}),Kt(u.sprite,s.sprite)||l.push({command:"setSprite",args:[s.sprite]}),Kt(u.glyphs,s.glyphs)||l.push({command:"setGlyphs",args:[s.glyphs]}),Kt(u.transition,s.transition)||l.push({command:"setTransition",args:[s.transition]}),Kt(u.light,s.light)||l.push({command:"setLight",args:[s.light]}),Kt(u.terrain,s.terrain)||l.push({command:"setTerrain",args:[s.terrain]}),Kt(u.sky,s.sky)||l.push({command:"setSky",args:[s.sky]}),Kt(u.projection,s.projection)||l.push({command:"setProjection",args:[s.projection]});let f={},m=[];(function(b,T,C,O){let R;for(R in T=T||{},b=b||{})Object.prototype.hasOwnProperty.call(b,R)&&(Object.prototype.hasOwnProperty.call(T,R)||ma(R,C,O));for(R in T)Object.prototype.hasOwnProperty.call(T,R)&&(Object.prototype.hasOwnProperty.call(b,R)?Kt(b[R],T[R])||(b[R].type==="geojson"&&T[R].type==="geojson"&&Ss(b,T,R)?Cr(C,{command:"setGeoJSONSourceData",args:[R,T[R].data]}):go(R,T,C,O)):Xs(R,T,C))})(u.sources,s.sources,m,f);let x=[];u.layers&&u.layers.forEach(b=>{"source"in b&&f[b.source]?l.push({command:"removeLayer",args:[b.id]}):x.push(b)}),l=l.concat(m),function(b,T,C){T=T||[];let O=(b=b||[]).map(Ys),R=T.map(Ys),L=b.reduce(Js,{}),z=T.reduce(Js,{}),U=O.slice(),H=Object.create(null),X,ne,ue,xe,pe;for(let ye=0,Se=0;ye<O.length;ye++)X=O[ye],Object.prototype.hasOwnProperty.call(z,X)?Se++:(Cr(C,{command:"removeLayer",args:[X]}),U.splice(U.indexOf(X,Se),1));for(let ye=0,Se=0;ye<R.length;ye++)X=R[R.length-1-ye],U[U.length-1-ye]!==X&&(Object.prototype.hasOwnProperty.call(L,X)?(Cr(C,{command:"removeLayer",args:[X]}),U.splice(U.lastIndexOf(X,U.length-Se),1)):Se++,xe=U[U.length-ye],Cr(C,{command:"addLayer",args:[z[X],xe]}),U.splice(U.length-ye,0,X),H[X]=!0);for(let ye=0;ye<R.length;ye++)if(X=R[ye],ne=L[X],ue=z[X],!H[X]&&!Kt(ne,ue))if(Kt(ne.source,ue.source)&&Kt(ne["source-layer"],ue["source-layer"])&&Kt(ne.type,ue.type)){for(pe in $i(ne.layout,ue.layout,C,X,null,"setLayoutProperty"),$i(ne.paint,ue.paint,C,X,null,"setPaintProperty"),Kt(ne.filter,ue.filter)||Cr(C,{command:"setFilter",args:[X,ue.filter]}),Kt(ne.minzoom,ue.minzoom)&&Kt(ne.maxzoom,ue.maxzoom)||Cr(C,{command:"setLayerZoomRange",args:[X,ue.minzoom,ue.maxzoom]}),ne)Object.prototype.hasOwnProperty.call(ne,pe)&&pe!=="layout"&&pe!=="paint"&&pe!=="filter"&&pe!=="metadata"&&pe!=="minzoom"&&pe!=="maxzoom"&&(pe.indexOf("paint.")===0?$i(ne[pe],ue[pe],C,X,pe.slice(6),"setPaintProperty"):Kt(ne[pe],ue[pe])||Cr(C,{command:"setLayerProperty",args:[X,pe,ue[pe]]}));for(pe in ue)Object.prototype.hasOwnProperty.call(ue,pe)&&!Object.prototype.hasOwnProperty.call(ne,pe)&&pe!=="layout"&&pe!=="paint"&&pe!=="filter"&&pe!=="metadata"&&pe!=="minzoom"&&pe!=="maxzoom"&&(pe.indexOf("paint.")===0?$i(ne[pe],ue[pe],C,X,pe.slice(6),"setPaintProperty"):Kt(ne[pe],ue[pe])||Cr(C,{command:"setLayerProperty",args:[X,pe,ue[pe]]}))}else Cr(C,{command:"removeLayer",args:[X]}),xe=U[U.lastIndexOf(X)+1],Cr(C,{command:"addLayer",args:[ue,xe]})}(x,s.layers,l)}catch(f){console.warn("Unable to compute style diff:",f),l=[{command:"setStyle",args:[s]}]}return l},i.aD=function(u){let s=[],l=u.id;return l===void 0&&s.push({message:`layers.${l}: missing required property "id"`}),u.render===void 0&&s.push({message:`layers.${l}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&s.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),s},i.aE=function u(s,l){if(Array.isArray(s)){if(!Array.isArray(l)||s.length!==l.length)return!1;for(let f=0;f<s.length;f++)if(!u(s[f],l[f]))return!1;return!0}if(typeof s=="object"&&s!==null&&l!==null){if(typeof l!="object"||Object.keys(s).length!==Object.keys(l).length)return!1;for(let f in s)if(!u(s[f],l[f]))return!1;return!0}return s===l},i.aF=Ae,i.aG=Ue,i.aH=class extends xf{constructor(u,s){super(u,s),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},i.aI=hb,i.aJ=class extends xf{constructor(u,s){super(u,s),this.current=MAe}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let s=1;s<16;s++)if(u[s]!==this.current[s]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},i.aK=FU,i.aL=zU,i.aM=pr,i.aN=class extends xf{constructor(u,s){super(u,s),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},i.aO=class extends xf{constructor(u,s){super(u,s),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},i.aP=function(u,s,l,f,m,x,b){var T=1/(s-l),C=1/(f-m),O=1/(x-b);return u[0]=-2*T,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*C,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*O,u[11]=0,u[12]=(s+l)*T,u[13]=(m+f)*C,u[14]=(b+x)*O,u[15]=1,u},i.aQ=FAe,i.aR=class extends ve{},i.aS=qqe,i.aT=class extends be{},i.aU=Nq,i.aV=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},i.aW=e5,i.aX=si,i.aY=So,i.aZ=class extends at{},i.a_=function(u,s){return u[0]===s[0]&&u[1]===s[1]&&u[2]===s[2]&&u[3]===s[3]&&u[4]===s[4]&&u[5]===s[5]&&u[6]===s[6]&&u[7]===s[7]&&u[8]===s[8]&&u[9]===s[9]&&u[10]===s[10]&&u[11]===s[11]&&u[12]===s[12]&&u[13]===s[13]&&u[14]===s[14]&&u[15]===s[15]},i.aa=function(u){let s={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,f,m,x)=>{let b=m||x;return s[f]=!b||b.toLowerCase(),""}),s["max-age"]){let l=parseInt(s["max-age"],10);isNaN(l)?delete s["max-age"]:s["max-age"]=l}return s},i.ab=function(u,s){let l=[];for(let f in u)f in s||l.push(f);return l},i.ac=te,i.ad=function(u,s,l){var f=Math.sin(l),m=Math.cos(l),x=s[0],b=s[1],T=s[2],C=s[3],O=s[4],R=s[5],L=s[6],z=s[7];return s!==u&&(u[8]=s[8],u[9]=s[9],u[10]=s[10],u[11]=s[11],u[12]=s[12],u[13]=s[13],u[14]=s[14],u[15]=s[15]),u[0]=x*m+O*f,u[1]=b*m+R*f,u[2]=T*m+L*f,u[3]=C*m+z*f,u[4]=O*m-x*f,u[5]=R*m-b*f,u[6]=L*m-T*f,u[7]=z*m-C*f,u},i.ae=function(u){var s=new xd(16);return s[0]=u[0],s[1]=u[1],s[2]=u[2],s[3]=u[3],s[4]=u[4],s[5]=u[5],s[6]=u[6],s[7]=u[7],s[8]=u[8],s[9]=u[9],s[10]=u[10],s[11]=u[11],s[12]=u[12],s[13]=u[13],s[14]=u[14],s[15]=u[15],s},i.af=vb,i.ag=function(u,s){let l=0,f=0;if(u.kind==="constant")f=u.layoutSize;else if(u.kind!=="source"){let{interpolationType:m,minZoom:x,maxZoom:b}=u,T=m?te(Hi.interpolationFactor(m,s,x,b),0,1):0;u.kind==="camera"?f=Wi.number(u.minSize,u.maxSize,T):l=T}return{uSizeT:l,uSize:f}},i.ai=function(u,{uSize:s,uSizeT:l},{lowerSize:f,upperSize:m}){return u.kind==="source"?f/iu:u.kind==="composite"?Wi.number(f/iu,m/iu,l):s},i.aj=Qq,i.ak=function(u,s,l,f){let m=s.y-u.y,x=s.x-u.x,b=f.y-l.y,T=f.x-l.x,C=b*x-T*m;if(C===0)return null;let O=(T*(u.y-l.y)-b*(u.x-l.x))/C;return new w(u.x+O*x,u.y+O*m)},i.al=t6,i.am=VU,i.an=Dq,i.ao=function(u){let s=1/0,l=1/0,f=-1/0,m=-1/0;for(let x of u)s=Math.min(s,x.x),l=Math.min(l,x.y),f=Math.max(f,x.x),m=Math.max(m,x.y);return[s,l,f,m]},i.ap=Mn,i.ar=Jq,i.as=function(u,s){var l=s[0],f=s[1],m=s[2],x=s[3],b=s[4],T=s[5],C=s[6],O=s[7],R=s[8],L=s[9],z=s[10],U=s[11],H=s[12],X=s[13],ne=s[14],ue=s[15],xe=l*T-f*b,pe=l*C-m*b,ye=l*O-x*b,Se=f*C-m*T,Re=f*O-x*T,Je=m*O-x*C,pt=R*X-L*H,Ke=R*ne-z*H,Ge=R*ue-U*H,st=L*ne-z*X,nt=L*ue-U*X,tt=z*ue-U*ne,Ce=xe*tt-pe*nt+ye*st+Se*Ge-Re*Ke+Je*pt;return Ce?(u[0]=(T*tt-C*nt+O*st)*(Ce=1/Ce),u[1]=(m*nt-f*tt-x*st)*Ce,u[2]=(X*Je-ne*Re+ue*Se)*Ce,u[3]=(z*Re-L*Je-U*Se)*Ce,u[4]=(C*Ge-b*tt-O*Ke)*Ce,u[5]=(l*tt-m*Ge+x*Ke)*Ce,u[6]=(ne*ye-H*Je-ue*pe)*Ce,u[7]=(R*Je-z*ye+U*pe)*Ce,u[8]=(b*nt-T*Ge+O*pt)*Ce,u[9]=(f*Ge-l*nt-x*pt)*Ce,u[10]=(H*Re-X*ye+ue*xe)*Ce,u[11]=(L*ye-R*Re-U*xe)*Ce,u[12]=(T*Ke-b*st-C*pt)*Ce,u[13]=(l*st-f*Ke+m*pt)*Ce,u[14]=(X*pe-H*Se-ne*xe)*Ce,u[15]=(R*Se-L*pe+z*xe)*Ce,u):null},i.at=sP,i.au=Yq,i.av=uP,i.aw=function(){let u={},s=Ee.$version;for(let l in Ee.$root){let f=Ee.$root[l];if(f.required){let m=null;m=l==="version"?s:f.type==="array"?[]:{},m!=null&&(u[l]=m)}}return u},i.ax=Kg,i.ay=vn,i.az=function(u){u=u.slice();let s=Object.create(null);for(let l=0;l<u.length;l++)s[u[l].id]=u[l];for(let l=0;l<u.length;l++)"ref"in u[l]&&(u[l]=Ks(u[l],s[u[l].ref]));return u},i.b=sr,i.b0=function(u,s){return u[0]=s[0],u[1]=s[1],u[2]=s[2],u[3]=s[3],u[4]=s[4],u[5]=s[5],u[6]=s[6],u[7]=s[7],u[8]=s[8],u[9]=s[9],u[10]=s[10],u[11]=s[11],u[12]=s[12],u[13]=s[13],u[14]=s[14],u[15]=s[15],u},i.b1=function(u,s,l){return u[0]=s[0]*l[0],u[1]=s[1]*l[1],u[2]=s[2]*l[2],u[3]=s[3]*l[3],u},i.b2=function(u,s){return u[0]*s[0]+u[1]*s[1]+u[2]*s[2]+u[3]*s[3]},i.b3=se,i.b4=Z5,i.b5=W5,i.b6=function(u,s,l,f,m){var x,b=1/Math.tan(s/2);return u[0]=b/l,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=b,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,m!=null&&m!==1/0?(u[10]=(m+f)*(x=1/(f-m)),u[14]=2*m*f*x):(u[10]=-1,u[14]=-2*f),u},i.b7=function(u,s,l){var f=Math.sin(l),m=Math.cos(l),x=s[4],b=s[5],T=s[6],C=s[7],O=s[8],R=s[9],L=s[10],z=s[11];return s!==u&&(u[0]=s[0],u[1]=s[1],u[2]=s[2],u[3]=s[3],u[12]=s[12],u[13]=s[13],u[14]=s[14],u[15]=s[15]),u[4]=x*m+O*f,u[5]=b*m+R*f,u[6]=T*m+L*f,u[7]=C*m+z*f,u[8]=O*m-x*f,u[9]=R*m-b*f,u[10]=L*m-T*f,u[11]=z*m-C*f,u},i.b8=V,i.b9=Z,i.bA=x5,i.bB=function(u){return u.message===nn},i.bC=dc,i.bD=wa,i.ba=function(u){return u*Math.PI/180},i.bb=function(u,s){let{x:l,y:f}=vy.fromLngLat(s);return!(u<0||u>25||f<0||f>=1||l<0||l>=1)},i.bc=function(u,s){return u[0]=s[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=s[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=s[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},i.bd=class extends D{},i.be=nP,i.bf=hPe,i.bh=Dt,i.bi=function(u,s){Ei.REGISTERED_PROTOCOLS[u]=s},i.bj=function(u){delete Ei.REGISTERED_PROTOCOLS[u]},i.bk=function(u,s){let l={};for(let m=0;m<u.length;m++){let x=s&&s[u[m].id]||Q1(u[m]);s&&(s[u[m].id]=x);let b=l[x];b||(b=l[x]=[]),b.push(u[m])}let f=[];for(let m in l)f.push(l[m]);return f},i.bl=rt,i.bm=X5,i.bn=J5,i.bo=q5,i.bp=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=En/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;let s=u.bucket.layers[0],l=s.layout,f=s._unevaluatedLayout._values,m={layoutIconSize:f["icon-size"].possiblyEvaluate(new Rr(u.bucket.zoom+1),u.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new Rr(u.bucket.zoom+1),u.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new Rr(18))};if(u.bucket.textSizeData.kind==="composite"){let{minZoom:O,maxZoom:R}=u.bucket.textSizeData;m.compositeTextSizes=[f["text-size"].possiblyEvaluate(new Rr(O),u.canonical),f["text-size"].possiblyEvaluate(new Rr(R),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){let{minZoom:O,maxZoom:R}=u.bucket.iconSizeData;m.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new Rr(O),u.canonical),f["icon-size"].possiblyEvaluate(new Rr(R),u.canonical)]}let x=l.get("text-line-height")*Mn,b=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",T=l.get("text-keep-upright"),C=l.get("text-size");for(let O of u.bucket.features){let R=l.get("text-font").evaluate(O,{},u.canonical).join(","),L=C.evaluate(O,{},u.canonical),z=m.layoutTextSize.evaluate(O,{},u.canonical),U=m.layoutIconSize.evaluate(O,{},u.canonical),H={horizontal:{},vertical:void 0},X=O.text,ne,ue=[0,0];if(X){let ye=X.toString(),Se=l.get("text-letter-spacing").evaluate(O,{},u.canonical)*Mn,Re=Eq(ye)?Se:0,Je=l.get("text-anchor").evaluate(O,{},u.canonical),pt=c6(s,O,u.canonical);if(!pt){let nt=l.get("text-radial-offset").evaluate(O,{},u.canonical);ue=nt?l6(Je,[nt*Mn,oP]):l.get("text-offset").evaluate(O,{},u.canonical).map(tt=>tt*Mn)}let Ke=b?"center":l.get("text-justify").evaluate(O,{},u.canonical),Ge=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(O,{},u.canonical)*Mn:1/0,st=()=>{u.bucket.allowVerticalPlacement&&Xg(ye)&&(H.vertical=bb(X,u.glyphMap,u.glyphPositions,u.imagePositions,R,Ge,x,Je,"left",Re,ue,i.ah.vertical,!0,z,L))};if(!b&&pt){let nt=new Set;if(Ke==="auto")for(let Ce=0;Ce<pt.values.length;Ce+=2)nt.add(sP(pt.values[Ce]));else nt.add(Ke);let tt=!1;for(let Ce of nt)if(!H.horizontal[Ce])if(tt)H.horizontal[Ce]=H.horizontal[0];else{let ut=bb(X,u.glyphMap,u.glyphPositions,u.imagePositions,R,Ge,x,"center",Ce,Re,ue,i.ah.horizontal,!1,z,L);ut&&(H.horizontal[Ce]=ut,tt=ut.positionedLines.length===1)}st()}else{Ke==="auto"&&(Ke=sP(Je));let nt=bb(X,u.glyphMap,u.glyphPositions,u.imagePositions,R,Ge,x,Je,Ke,Re,ue,i.ah.horizontal,!1,z,L);nt&&(H.horizontal[Ke]=nt),st(),Xg(ye)&&b&&T&&(H.vertical=bb(X,u.glyphMap,u.glyphPositions,u.imagePositions,R,Ge,x,Je,Ke,Re,ue,i.ah.vertical,!1,z,L))}}let xe=!1;if(O.icon&&O.icon.name){let ye=u.imageMap[O.icon.name];ye&&(ne=Hqe(u.imagePositions[O.icon.name],l.get("icon-offset").evaluate(O,{},u.canonical),l.get("icon-anchor").evaluate(O,{},u.canonical)),xe=!!ye.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=xe:u.bucket.sdfIcons!==xe&&Rt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ye.pixelRatio!==u.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}let pe=f6(H.horizontal)||H.vertical;u.bucket.iconsInText=!!pe&&pe.iconsInText,(pe||ne)&&lPe(u.bucket,O,H,ne,u.imageMap,m,z,U,ue,xe,u.canonical)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},i.bq=Gq,i.br=Uq,i.bs=$q,i.bt=Mc,i.bu=Hq,i.bv=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},i.bw=function(u,s,l,f,m){return a(this,void 0,void 0,function*(){if($())try{return yield cr(u,s,l,f,m)}catch(x){}return function(x,b,T,C,O){let R=x.width,L=x.height;Zt&&rn||(Zt=new OffscreenCanvas(R,L),rn=Zt.getContext("2d",{willReadFrequently:!0})),Zt.width=R,Zt.height=L,rn.drawImage(x,0,0,R,L);let z=rn.getImageData(b,T,C,O);return rn.clearRect(0,0,R,L),z.data}(u,s,l,f,m)})},i.bx=K5,i.by=h,i.bz=p,i.c=va,i.d=u=>a(void 0,void 0,void 0,function*(){if(u.byteLength===0)return createImageBitmap(new ImageData(1,1));let s=new Blob([new Uint8Array(u)],{type:"image/png"});try{return createImageBitmap(s)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),i.e=Ie,i.f=u=>new Promise((s,l)=>{let f=new Image;f.onload=()=>{s(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame(()=>{f.src=lr})},f.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let m=new Blob([new Uint8Array(u)],{type:"image/png"});f.src=u.byteLength?URL.createObjectURL(m):lr}),i.g=$n,i.h=(u,s)=>ri(Ie(u,{type:"json"}),s),i.i=Xr,i.j=Gn,i.k=ka,i.l=(u,s)=>ri(Ie(u,{type:"arrayBuffer"}),s),i.m=ri,i.n=function(u){return new Hq(u).readFields(jqe,[])},i.o=ay,i.p=A5,i.q=_,i.r=bq,i.s=an,i.t=Hg,i.u=il,i.v=Ee,i.w=Rt,i.x=function([u,s,l]){return s+=90,s*=Math.PI/180,l*=Math.PI/180,{x:u*Math.cos(s)*Math.sin(l),y:u*Math.sin(s)*Math.sin(l),z:u*Math.cos(l)}},i.y=Wi,i.z=Rr}),r("worker",["./shared"],function(i){"use strict";class a{constructor(B){this.keyCache={},B&&this.replace(B)}replace(B){this._layerConfigs={},this._layers={},this.update(B,[])}update(B,j){for(let ie of B){this._layerConfigs[ie.id]=ie;let de=this._layers[ie.id]=i.aA(ie);de._featureFilter=i.a7(de.filter),this.keyCache[ie.id]&&delete this.keyCache[ie.id]}for(let ie of j)delete this.keyCache[ie],delete this._layerConfigs[ie],delete this._layers[ie];this.familiesBySource={};let J=i.bk(Object.values(this._layerConfigs),this.keyCache);for(let ie of J){let de=ie.map(we=>this._layers[we.id]),me=de[0];if(me.visibility==="none")continue;let _e=me.source||"",he=this.familiesBySource[_e];he||(he=this.familiesBySource[_e]={});let Te=me.sourceLayer||"_geojsonTileLayer",Me=he[Te];Me||(Me=he[Te]=[]),Me.push(de)}}}class h{constructor(B){let j={},J=[];for(let _e in B){let he=B[_e],Te=j[_e]={};for(let Me in he){let we=he[+Me];if(!we||we.bitmap.width===0||we.bitmap.height===0)continue;let je={x:0,y:0,w:we.bitmap.width+2,h:we.bitmap.height+2};J.push(je),Te[Me]={rect:je,metrics:we.metrics}}}let{w:ie,h:de}=i.p(J),me=new i.o({width:ie||1,height:de||1});for(let _e in B){let he=B[_e];for(let Te in he){let Me=he[+Te];if(!Me||Me.bitmap.width===0||Me.bitmap.height===0)continue;let we=j[_e][Te].rect;i.o.copy(Me.bitmap,me,{x:0,y:0},{x:we.x+1,y:we.y+1},Me.bitmap)}}this.image=me,this.positions=j}}i.bl("GlyphAtlas",h);class p{constructor(B){this.tileID=new i.S(B.tileID.overscaledZ,B.tileID.wrap,B.tileID.canonical.z,B.tileID.canonical.x,B.tileID.canonical.y),this.uid=B.uid,this.zoom=B.zoom,this.pixelRatio=B.pixelRatio,this.tileSize=B.tileSize,this.source=B.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=B.showCollisionBoxes,this.collectResourceTiming=!!B.collectResourceTiming,this.returnDependencies=!!B.returnDependencies,this.promoteId=B.promoteId,this.inFlightDependencies=[]}parse(B,j,J,ie){return i._(this,void 0,void 0,function*(){this.status="parsing",this.data=B,this.collisionBoxArray=new i.a5;let de=new i.bm(Object.keys(B.layers).sort()),me=new i.bn(this.tileID,this.promoteId);me.bucketLayerIDs=[];let _e={},he={featureIndex:me,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:J},Te=j.familiesBySource[this.source];for(let Lt in Te){let fr=B.layers[Lt];if(!fr)continue;fr.version===1&&i.w(`Vector tile source "${this.source}" layer "${Lt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let jr=de.encode(Lt),Rn=[];for(let Hn=0;Hn<fr.length;Hn++){let Si=fr.feature(Hn),nc=me.getId(Si,Lt);Rn.push({feature:Si,id:nc,index:Hn,sourceLayerIndex:jr})}for(let Hn of Te[Lt]){let Si=Hn[0];Si.source!==this.source&&i.w(`layer.source = ${Si.source} does not equal this.source = ${this.source}`),Si.minzoom&&this.zoom<Math.floor(Si.minzoom)||Si.maxzoom&&this.zoom>=Si.maxzoom||Si.visibility!=="none"&&(g(Hn,this.zoom,J),(_e[Si.id]=Si.createBucket({index:me.bucketLayerIDs.length,layers:Hn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:jr,sourceID:this.source})).populate(Rn,he,this.tileID.canonical),me.bucketLayerIDs.push(Hn.map(nc=>nc.id)))}}let Me=i.aF(he.glyphDependencies,Lt=>Object.keys(Lt).map(Number));this.inFlightDependencies.forEach(Lt=>Lt==null?void 0:Lt.abort()),this.inFlightDependencies=[];let we=Promise.resolve({});if(Object.keys(Me).length){let Lt=new AbortController;this.inFlightDependencies.push(Lt),we=ie.sendAsync({type:"GG",data:{stacks:Me,source:this.source,tileID:this.tileID,type:"glyphs"}},Lt)}let je=Object.keys(he.iconDependencies),lt=Promise.resolve({});if(je.length){let Lt=new AbortController;this.inFlightDependencies.push(Lt),lt=ie.sendAsync({type:"GI",data:{icons:je,source:this.source,tileID:this.tileID,type:"icons"}},Lt)}let ht=Object.keys(he.patternDependencies),Qt=Promise.resolve({});if(ht.length){let Lt=new AbortController;this.inFlightDependencies.push(Lt),Qt=ie.sendAsync({type:"GI",data:{icons:ht,source:this.source,tileID:this.tileID,type:"patterns"}},Lt)}let[At,er,Ut]=yield Promise.all([we,lt,Qt]),bn=new h(At),Yr=new i.bo(er,Ut);for(let Lt in _e){let fr=_e[Lt];fr instanceof i.a6?(g(fr.layers,this.zoom,J),i.bp({bucket:fr,glyphMap:At,glyphPositions:bn.positions,imageMap:er,imagePositions:Yr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):fr.hasPattern&&(fr instanceof i.bq||fr instanceof i.br||fr instanceof i.bs)&&(g(fr.layers,this.zoom,J),fr.addFeatures(he,this.tileID.canonical,Yr.patternPositions))}return this.status="done",{buckets:Object.values(_e).filter(Lt=>!Lt.isEmpty()),featureIndex:me,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:bn.image,imageAtlas:Yr,glyphMap:this.returnDependencies?At:null,iconMap:this.returnDependencies?er:null,glyphPositions:this.returnDependencies?bn.positions:null}})}}function g(oe,B,j){let J=new i.z(B);for(let ie of oe)ie.recalculate(J,j)}class w{constructor(B,j,J){this.actor=B,this.layerIndex=j,this.availableImages=J,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(B,j){return i._(this,void 0,void 0,function*(){let J=yield i.l(B.request,j);try{return{vectorTile:new i.bt.VectorTile(new i.bu(J.data)),rawData:J.data,cacheControl:J.cacheControl,expires:J.expires}}catch(ie){let de=new Uint8Array(J.data),me=`Unable to parse the tile at ${B.request.url}, `;throw me+=de[0]===31&&de[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ie.message}`,new Error(me)}})}loadTile(B){return i._(this,void 0,void 0,function*(){let j=B.uid,J=!!(B&&B.request&&B.request.collectResourceTiming)&&new i.bv(B.request),ie=new p(B);this.loading[j]=ie;let de=new AbortController;ie.abort=de;try{let me=yield this.loadVectorTile(B,de);if(delete this.loading[j],!me)return null;let _e=me.rawData,he={};me.expires&&(he.expires=me.expires),me.cacheControl&&(he.cacheControl=me.cacheControl);let Te={};if(J){let we=J.finish();we&&(Te.resourceTiming=JSON.parse(JSON.stringify(we)))}ie.vectorTile=me.vectorTile;let Me=ie.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[j]=ie,this.fetching[j]={rawTileData:_e,cacheControl:he,resourceTiming:Te};try{let we=yield Me;return i.e({rawTileData:_e.slice(0)},we,he,Te)}finally{delete this.fetching[j]}}catch(me){throw delete this.loading[j],ie.status="done",this.loaded[j]=ie,me}})}reloadTile(B){return i._(this,void 0,void 0,function*(){let j=B.uid;if(!this.loaded||!this.loaded[j])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let J=this.loaded[j];if(J.showCollisionBoxes=B.showCollisionBoxes,J.status==="parsing"){let ie=yield J.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor),de;if(this.fetching[j]){let{rawTileData:me,cacheControl:_e,resourceTiming:he}=this.fetching[j];delete this.fetching[j],de=i.e({rawTileData:me.slice(0)},ie,_e,he)}else de=ie;return de}if(J.status==="done"&&J.vectorTile)return J.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(B){return i._(this,void 0,void 0,function*(){let j=this.loading,J=B.uid;j&&j[J]&&j[J].abort&&(j[J].abort.abort(),delete j[J])})}removeTile(B){return i._(this,void 0,void 0,function*(){this.loaded&&this.loaded[B.uid]&&delete this.loaded[B.uid]})}}class E{constructor(){this.loaded={}}loadTile(B){return i._(this,void 0,void 0,function*(){let{uid:j,encoding:J,rawImageData:ie,redFactor:de,greenFactor:me,blueFactor:_e,baseShift:he}=B,Te=ie.width+2,Me=ie.height+2,we=i.b(ie)?new i.R({width:Te,height:Me},(yield i.bw(ie,-1,-1,Te,Me))):ie,je=new i.bx(j,we,J,de,me,_e,he);return this.loaded=this.loaded||{},this.loaded[j]=je,je})}removeTile(B){let j=this.loaded,J=B.uid;j&&j[J]&&delete j[J]}}function q(oe,B){if(oe.length!==0){P(oe[0],B);for(var j=1;j<oe.length;j++)P(oe[j],!B)}}function P(oe,B){for(var j=0,J=0,ie=0,de=oe.length,me=de-1;ie<de;me=ie++){var _e=(oe[ie][0]-oe[me][0])*(oe[me][1]+oe[ie][1]),he=j+_e;J+=Math.abs(j)>=Math.abs(_e)?j-he+_e:_e-he+j,j=he}j+J>=0!=!!B&&oe.reverse()}var k=i.by(function oe(B,j){var J,ie=B&&B.type;if(ie==="FeatureCollection")for(J=0;J<B.features.length;J++)oe(B.features[J],j);else if(ie==="GeometryCollection")for(J=0;J<B.geometries.length;J++)oe(B.geometries[J],j);else if(ie==="Feature")oe(B.geometry,j);else if(ie==="Polygon")q(B.coordinates,j);else if(ie==="MultiPolygon")for(J=0;J<B.coordinates.length;J++)q(B.coordinates[J],j);return B});let W=i.bt.VectorTileFeature.prototype.toGeoJSON;var Q={exports:{}},$=i.bz,V=i.bt.VectorTileFeature,Z=te;function te(oe,B){this.options=B||{},this.features=oe,this.length=oe.length}function se(oe,B){this.id=typeof oe.id=="number"?oe.id:void 0,this.type=oe.type,this.rawGeometry=oe.type===1?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=B||4096}te.prototype.feature=function(oe){return new se(this.features[oe],this.options.extent)},se.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var B=0;B<oe.length;B++){for(var j=oe[B],J=[],ie=0;ie<j.length;ie++)J.push(new $(j[ie][0],j[ie][1]));this.geometry.push(J)}return this.geometry},se.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,B=1/0,j=-1/0,J=1/0,ie=-1/0,de=0;de<oe.length;de++)for(var me=oe[de],_e=0;_e<me.length;_e++){var he=me[_e];B=Math.min(B,he.x),j=Math.max(j,he.x),J=Math.min(J,he.y),ie=Math.max(ie,he.y)}return[B,J,j,ie]},se.prototype.toGeoJSON=V.prototype.toGeoJSON;var Ie=i.bA,qe=Z;function Ae(oe){var B=new Ie;return function(j,J){for(var ie in j.layers)J.writeMessage(3,Ue,j.layers[ie])}(oe,B),B.finish()}function Ue(oe,B){var j;B.writeVarintField(15,oe.version||1),B.writeStringField(1,oe.name||""),B.writeVarintField(5,oe.extent||4096);var J={keys:[],values:[],keycache:{},valuecache:{}};for(j=0;j<oe.length;j++)J.feature=oe.feature(j),B.writeMessage(2,Le,J);var ie=J.keys;for(j=0;j<ie.length;j++)B.writeStringField(3,ie[j]);var de=J.values;for(j=0;j<de.length;j++)B.writeMessage(4,Pn,de[j])}function Le(oe,B){var j=oe.feature;j.id!==void 0&&B.writeVarintField(1,j.id),B.writeMessage(2,$t,oe),B.writeVarintField(3,j.type),B.writeMessage(4,Xr,j)}function $t(oe,B){var j=oe.feature,J=oe.keys,ie=oe.values,de=oe.keycache,me=oe.valuecache;for(var _e in j.properties){var he=j.properties[_e],Te=de[_e];if(he!==null){Te===void 0&&(J.push(_e),de[_e]=Te=J.length-1),B.writeVarint(Te);var Me=typeof he;Me!=="string"&&Me!=="boolean"&&Me!=="number"&&(he=JSON.stringify(he));var we=Me+":"+he,je=me[we];je===void 0&&(ie.push(he),me[we]=je=ie.length-1),B.writeVarint(je)}}}function Rt(oe,B){return(B<<3)+(7&oe)}function ir(oe){return oe<<1^oe>>31}function Xr(oe,B){for(var j=oe.loadGeometry(),J=oe.type,ie=0,de=0,me=j.length,_e=0;_e<me;_e++){var he=j[_e],Te=1;J===1&&(Te=he.length),B.writeVarint(Rt(1,Te));for(var Me=J===3?he.length-1:he.length,we=0;we<Me;we++){we===1&&J!==1&&B.writeVarint(Rt(2,Me-1));var je=he[we].x-ie,lt=he[we].y-de;B.writeVarint(ir(je)),B.writeVarint(ir(lt)),ie+=je,de+=lt}J===3&&B.writeVarint(Rt(7,1))}}function Pn(oe,B){var j=typeof oe;j==="string"?B.writeStringField(1,oe):j==="boolean"?B.writeBooleanField(7,oe):j==="number"&&(oe%1!=0?B.writeDoubleField(3,oe):oe<0?B.writeSVarintField(6,oe):B.writeVarintField(5,oe))}Q.exports=Ae,Q.exports.fromVectorTileJs=Ae,Q.exports.fromGeojsonVt=function(oe,B){B=B||{};var j={};for(var J in oe)j[J]=new qe(oe[J].features,B),j[J].name=J,j[J].version=B.version,j[J].extent=B.extent;return Ae({layers:j})},Q.exports.GeoJSONWrapper=qe;var sr=i.by(Q.exports);let lr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:oe=>oe},cr=Math.fround||(Zt=new Float32Array(1),oe=>(Zt[0]=+oe,Zt[0]));var Zt;let rn=3,nn=5,va=6;class Ei{constructor(B){this.options=Object.assign(Object.create(lr),B),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(B){let{log:j,minZoom:J,maxZoom:ie}=this.options;j&&console.time("total time");let de=`prepare ${B.length} points`;j&&console.time(de),this.points=B;let me=[];for(let he=0;he<B.length;he++){let Te=B[he];if(!Te.geometry)continue;let[Me,we]=Te.geometry.coordinates,je=cr(Dt(Me)),lt=cr(vn(we));me.push(je,lt,1/0,he,-1,1),this.options.reduce&&me.push(0)}let _e=this.trees[ie+1]=this._createTree(me);j&&console.timeEnd(de);for(let he=ie;he>=J;he--){let Te=+Date.now();_e=this.trees[he]=this._createTree(this._cluster(_e,he)),j&&console.log("z%d: %d clusters in %dms",he,_e.numItems,+Date.now()-Te)}return j&&console.timeEnd("total time"),this}getClusters(B,j){let J=((B[0]+180)%360+360)%360-180,ie=Math.max(-90,Math.min(90,B[1])),de=B[2]===180?180:((B[2]+180)%360+360)%360-180,me=Math.max(-90,Math.min(90,B[3]));if(B[2]-B[0]>=360)J=-180,de=180;else if(J>de){let we=this.getClusters([J,ie,180,me],j),je=this.getClusters([-180,ie,de,me],j);return we.concat(je)}let _e=this.trees[this._limitZoom(j)],he=_e.range(Dt(J),vn(me),Dt(de),vn(ie)),Te=_e.data,Me=[];for(let we of he){let je=this.stride*we;Me.push(Te[je+nn]>1?$n(Te,je,this.clusterProps):this.points[Te[je+rn]])}return Me}getChildren(B){let j=this._getOriginId(B),J=this._getOriginZoom(B),ie="No cluster with the specified id.",de=this.trees[J];if(!de)throw new Error(ie);let me=de.data;if(j*this.stride>=me.length)throw new Error(ie);let _e=this.options.radius/(this.options.extent*Math.pow(2,J-1)),he=de.within(me[j*this.stride],me[j*this.stride+1],_e),Te=[];for(let Me of he){let we=Me*this.stride;me[we+4]===B&&Te.push(me[we+nn]>1?$n(me,we,this.clusterProps):this.points[me[we+rn]])}if(Te.length===0)throw new Error(ie);return Te}getLeaves(B,j,J){let ie=[];return this._appendLeaves(ie,B,j=j||10,J=J||0,0),ie}getTile(B,j,J){let ie=this.trees[this._limitZoom(B)],de=Math.pow(2,B),{extent:me,radius:_e}=this.options,he=_e/me,Te=(J-he)/de,Me=(J+1+he)/de,we={features:[]};return this._addTileFeatures(ie.range((j-he)/de,Te,(j+1+he)/de,Me),ie.data,j,J,de,we),j===0&&this._addTileFeatures(ie.range(1-he/de,Te,1,Me),ie.data,de,J,de,we),j===de-1&&this._addTileFeatures(ie.range(0,Te,he/de,Me),ie.data,-1,J,de,we),we.features.length?we:null}getClusterExpansionZoom(B){let j=this._getOriginZoom(B)-1;for(;j<=this.options.maxZoom;){let J=this.getChildren(B);if(j++,J.length!==1)break;B=J[0].properties.cluster_id}return j}_appendLeaves(B,j,J,ie,de){let me=this.getChildren(j);for(let _e of me){let he=_e.properties;if(he&&he.cluster?de+he.point_count<=ie?de+=he.point_count:de=this._appendLeaves(B,he.cluster_id,J,ie,de):de<ie?de++:B.push(_e),B.length===J)break}return de}_createTree(B){let j=new i.av(B.length/this.stride|0,this.options.nodeSize,Float32Array);for(let J=0;J<B.length;J+=this.stride)j.add(B[J],B[J+1]);return j.finish(),j.data=B,j}_addTileFeatures(B,j,J,ie,de,me){for(let _e of B){let he=_e*this.stride,Te=j[he+nn]>1,Me,we,je;if(Te)Me=ti(j,he,this.clusterProps),we=j[he],je=j[he+1];else{let Qt=this.points[j[he+rn]];Me=Qt.properties;let[At,er]=Qt.geometry.coordinates;we=Dt(At),je=vn(er)}let lt={type:1,geometry:[[Math.round(this.options.extent*(we*de-J)),Math.round(this.options.extent*(je*de-ie))]],tags:Me},ht;ht=Te||this.options.generateId?j[he+rn]:this.points[j[he+rn]].id,ht!==void 0&&(lt.id=ht),me.features.push(lt)}}_limitZoom(B){return Math.max(this.options.minZoom,Math.min(Math.floor(+B),this.options.maxZoom+1))}_cluster(B,j){let{radius:J,extent:ie,reduce:de,minPoints:me}=this.options,_e=J/(ie*Math.pow(2,j)),he=B.data,Te=[],Me=this.stride;for(let we=0;we<he.length;we+=Me){if(he[we+2]<=j)continue;he[we+2]=j;let je=he[we],lt=he[we+1],ht=B.within(he[we],he[we+1],_e),Qt=he[we+nn],At=Qt;for(let er of ht){let Ut=er*Me;he[Ut+2]>j&&(At+=he[Ut+nn])}if(At>Qt&&At>=me){let er,Ut=je*Qt,bn=lt*Qt,Yr=-1,Lt=((we/Me|0)<<5)+(j+1)+this.points.length;for(let fr of ht){let jr=fr*Me;if(he[jr+2]<=j)continue;he[jr+2]=j;let Rn=he[jr+nn];Ut+=he[jr]*Rn,bn+=he[jr+1]*Rn,he[jr+4]=Lt,de&&(er||(er=this._map(he,we,!0),Yr=this.clusterProps.length,this.clusterProps.push(er)),de(er,this._map(he,jr)))}he[we+4]=Lt,Te.push(Ut/At,bn/At,1/0,Lt,-1,At),de&&Te.push(Yr)}else{for(let er=0;er<Me;er++)Te.push(he[we+er]);if(At>1)for(let er of ht){let Ut=er*Me;if(!(he[Ut+2]<=j)){he[Ut+2]=j;for(let bn=0;bn<Me;bn++)Te.push(he[Ut+bn])}}}}return Te}_getOriginId(B){return B-this.points.length>>5}_getOriginZoom(B){return(B-this.points.length)%32}_map(B,j,J){if(B[j+nn]>1){let me=this.clusterProps[B[j+va]];return J?Object.assign({},me):me}let ie=this.points[B[j+rn]].properties,de=this.options.map(ie);return J&&de===ie?Object.assign({},de):de}}function $n(oe,B,j){return{type:"Feature",id:oe[B+rn],properties:ti(oe,B,j),geometry:{type:"Point",coordinates:[(J=oe[B],360*(J-.5)),ri(oe[B+1])]}};var J}function ti(oe,B,j){let J=oe[B+nn],ie=J>=1e4?`${Math.round(J/1e3)}k`:J>=1e3?Math.round(J/100)/10+"k":J,de=oe[B+va],me=de===-1?{}:Object.assign({},j[de]);return Object.assign(me,{cluster:!0,cluster_id:oe[B+rn],point_count:J,point_count_abbreviated:ie})}function Dt(oe){return oe/360+.5}function vn(oe){let B=Math.sin(oe*Math.PI/180),j=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return j<0?0:j>1?1:j}function ri(oe){let B=(180-360*oe)*Math.PI/180;return 360*Math.atan(Math.exp(B))/Math.PI-90}function an(oe,B,j,J){let ie=J,de=B+(j-B>>1),me,_e=j-B,he=oe[B],Te=oe[B+1],Me=oe[j],we=oe[j+1];for(let je=B+3;je<j;je+=3){let lt=ws(oe[je],oe[je+1],he,Te,Me,we);if(lt>ie)me=je,ie=lt;else if(lt===ie){let ht=Math.abs(je-de);ht<_e&&(me=je,_e=ht)}}ie>J&&(me-B>3&&an(oe,B,me,J),oe[me+2]=ie,j-me>3&&an(oe,me,j,J))}function ws(oe,B,j,J,ie,de){let me=ie-j,_e=de-J;if(me!==0||_e!==0){let he=((oe-j)*me+(B-J)*_e)/(me*me+_e*_e);he>1?(j=ie,J=de):he>0&&(j+=me*he,J+=_e*he)}return me=oe-j,_e=B-J,me*me+_e*_e}function xn(oe,B,j,J){let ie={id:oe==null?null:oe,type:B,geometry:j,tags:J,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(B==="Point"||B==="MultiPoint"||B==="LineString")ka(ie,j);else if(B==="Polygon")ka(ie,j[0]);else if(B==="MultiLineString")for(let de of j)ka(ie,de);else if(B==="MultiPolygon")for(let de of j)ka(ie,de[0]);return ie}function ka(oe,B){for(let j=0;j<B.length;j+=3)oe.minX=Math.min(oe.minX,B[j]),oe.minY=Math.min(oe.minY,B[j+1]),oe.maxX=Math.max(oe.maxX,B[j]),oe.maxY=Math.max(oe.maxY,B[j+1])}function Gn(oe,B,j,J){if(!B.geometry)return;let ie=B.geometry.coordinates;if(ie&&ie.length===0)return;let de=B.geometry.type,me=Math.pow(j.tolerance/((1<<j.maxZoom)*j.extent),2),_e=[],he=B.id;if(j.promoteId?he=B.properties[j.promoteId]:j.generateId&&(he=J||0),de==="Point")Es(ie,_e);else if(de==="MultiPoint")for(let Te of ie)Es(Te,_e);else if(de==="LineString")Ee(ie,_e,me,!1);else if(de==="MultiLineString"){if(j.lineMetrics){for(let Te of ie)_e=[],Ee(Te,_e,me,!1),oe.push(xn(he,"LineString",_e,B.properties));return}zo(ie,_e,me,!1)}else if(de==="Polygon")zo(ie,_e,me,!0);else{if(de!=="MultiPolygon"){if(de==="GeometryCollection"){for(let Te of B.geometry.geometries)Gn(oe,{id:he,geometry:Te,properties:B.properties},j,J);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Te of ie){let Me=[];zo(Te,Me,me,!0),_e.push(Me)}}oe.push(xn(he,de,_e,B.properties))}function Es(oe,B){B.push(Ks(oe[0]),Kt(oe[1]),0)}function Ee(oe,B,j,J){let ie,de,me=0;for(let he=0;he<oe.length;he++){let Te=Ks(oe[he][0]),Me=Kt(oe[he][1]);B.push(Te,Me,0),he>0&&(me+=J?(ie*Me-Te*de)/2:Math.sqrt(Math.pow(Te-ie,2)+Math.pow(Me-de,2))),ie=Te,de=Me}let _e=B.length-3;B[2]=1,an(B,0,_e,j),B[_e+2]=1,B.size=Math.abs(me),B.start=0,B.end=B.size}function zo(oe,B,j,J){for(let ie=0;ie<oe.length;ie++){let de=[];Ee(oe[ie],de,j,J),B.push(de)}}function Ks(oe){return oe/360+.5}function Kt(oe){let B=Math.sin(oe*Math.PI/180),j=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return j<0?0:j>1?1:j}function Cr(oe,B,j,J,ie,de,me,_e){if(J/=B,de>=(j/=B)&&me<J)return oe;if(me<j||de>=J)return null;let he=[];for(let Te of oe){let Me=Te.geometry,we=Te.type,je=ie===0?Te.minX:Te.minY,lt=ie===0?Te.maxX:Te.maxY;if(je>=j&&lt<J){he.push(Te);continue}if(lt<j||je>=J)continue;let ht=[];if(we==="Point"||we==="MultiPoint")Xs(Me,ht,j,J,ie);else if(we==="LineString")ma(Me,ht,j,J,ie,!1,_e.lineMetrics);else if(we==="MultiLineString")Ss(Me,ht,j,J,ie,!1);else if(we==="Polygon")Ss(Me,ht,j,J,ie,!0);else if(we==="MultiPolygon")for(let Qt of Me){let At=[];Ss(Qt,At,j,J,ie,!0),At.length&&ht.push(At)}if(ht.length){if(_e.lineMetrics&&we==="LineString"){for(let Qt of ht)he.push(xn(Te.id,we,Qt,Te.tags));continue}we!=="LineString"&&we!=="MultiLineString"||(ht.length===1?(we="LineString",ht=ht[0]):we="MultiLineString"),we!=="Point"&&we!=="MultiPoint"||(we=ht.length===3?"Point":"MultiPoint"),he.push(xn(Te.id,we,ht,Te.tags))}}return he.length?he:null}function Xs(oe,B,j,J,ie){for(let de=0;de<oe.length;de+=3){let me=oe[de+ie];me>=j&&me<=J&&$i(B,oe[de],oe[de+1],oe[de+2])}}function ma(oe,B,j,J,ie,de,me){let _e=go(oe),he=ie===0?Ys:Js,Te,Me,we=oe.start;for(let At=0;At<oe.length-3;At+=3){let er=oe[At],Ut=oe[At+1],bn=oe[At+2],Yr=oe[At+3],Lt=oe[At+4],fr=ie===0?er:Ut,jr=ie===0?Yr:Lt,Rn=!1;me&&(Te=Math.sqrt(Math.pow(er-Yr,2)+Math.pow(Ut-Lt,2))),fr<j?jr>j&&(Me=he(_e,er,Ut,Yr,Lt,j),me&&(_e.start=we+Te*Me)):fr>J?jr<J&&(Me=he(_e,er,Ut,Yr,Lt,J),me&&(_e.start=we+Te*Me)):$i(_e,er,Ut,bn),jr<j&&fr>=j&&(Me=he(_e,er,Ut,Yr,Lt,j),Rn=!0),jr>J&&fr<=J&&(Me=he(_e,er,Ut,Yr,Lt,J),Rn=!0),!de&&Rn&&(me&&(_e.end=we+Te*Me),B.push(_e),_e=go(oe)),me&&(we+=Te)}let je=oe.length-3,lt=oe[je],ht=oe[je+1],Qt=ie===0?lt:ht;Qt>=j&&Qt<=J&&$i(_e,lt,ht,oe[je+2]),je=_e.length-3,de&&je>=3&&(_e[je]!==_e[0]||_e[je+1]!==_e[1])&&$i(_e,_e[0],_e[1],_e[2]),_e.length&&B.push(_e)}function go(oe){let B=[];return B.size=oe.size,B.start=oe.start,B.end=oe.end,B}function Ss(oe,B,j,J,ie,de){for(let me of oe)ma(me,B,j,J,ie,de,!1)}function $i(oe,B,j,J){oe.push(B,j,J)}function Ys(oe,B,j,J,ie,de){let me=(de-B)/(J-B);return $i(oe,de,j+(ie-j)*me,1),me}function Js(oe,B,j,J,ie,de){let me=(de-j)/(ie-j);return $i(oe,B+(J-B)*me,de,1),me}function Fe(oe,B){let j=[];for(let J=0;J<oe.length;J++){let ie=oe[J],de=ie.type,me;if(de==="Point"||de==="MultiPoint"||de==="LineString")me=ga(ie.geometry,B);else if(de==="MultiLineString"||de==="Polygon"){me=[];for(let _e of ie.geometry)me.push(ga(_e,B))}else if(de==="MultiPolygon"){me=[];for(let _e of ie.geometry){let he=[];for(let Te of _e)he.push(ga(Te,B));me.push(he)}}j.push(xn(ie.id,de,me,ie.tags))}return j}function ga(oe,B){let j=[];j.size=oe.size,oe.start!==void 0&&(j.start=oe.start,j.end=oe.end);for(let J=0;J<oe.length;J+=3)j.push(oe[J]+B,oe[J+1],oe[J+2]);return j}function Wn(oe,B){if(oe.transformed)return oe;let j=1<<oe.z,J=oe.x,ie=oe.y;for(let de of oe.features){let me=de.geometry,_e=de.type;if(de.geometry=[],_e===1)for(let he=0;he<me.length;he+=2)de.geometry.push(ni(me[he],me[he+1],B,j,J,ie));else for(let he=0;he<me.length;he++){let Te=[];for(let Me=0;Me<me[he].length;Me+=2)Te.push(ni(me[he][Me],me[he][Me+1],B,j,J,ie));de.geometry.push(Te)}}return oe.transformed=!0,oe}function ni(oe,B,j,J,ie,de){return[Math.round(j*(oe*J-ie)),Math.round(j*(B*J-de))]}function Gi(oe,B,j,J,ie){let de=B===ie.maxZoom?0:ie.tolerance/((1<<B)*ie.extent),me={features:[],numPoints:0,numSimplified:0,numFeatures:oe.length,source:null,x:j,y:J,z:B,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let _e of oe)ze(me,_e,de,ie);return me}function ze(oe,B,j,J){let ie=B.geometry,de=B.type,me=[];if(oe.minX=Math.min(oe.minX,B.minX),oe.minY=Math.min(oe.minY,B.minY),oe.maxX=Math.max(oe.maxX,B.maxX),oe.maxY=Math.max(oe.maxY,B.maxY),de==="Point"||de==="MultiPoint")for(let _e=0;_e<ie.length;_e+=3)me.push(ie[_e],ie[_e+1]),oe.numPoints++,oe.numSimplified++;else if(de==="LineString")Ct(me,ie,oe,j,!1,!1);else if(de==="MultiLineString"||de==="Polygon")for(let _e=0;_e<ie.length;_e++)Ct(me,ie[_e],oe,j,de==="Polygon",_e===0);else if(de==="MultiPolygon")for(let _e=0;_e<ie.length;_e++){let he=ie[_e];for(let Te=0;Te<he.length;Te++)Ct(me,he[Te],oe,j,!0,Te===0)}if(me.length){let _e=B.tags||null;if(de==="LineString"&&J.lineMetrics){_e={};for(let Te in B.tags)_e[Te]=B.tags[Te];_e.mapbox_clip_start=ie.start/ie.size,_e.mapbox_clip_end=ie.end/ie.size}let he={geometry:me,type:de==="Polygon"||de==="MultiPolygon"?3:de==="LineString"||de==="MultiLineString"?2:1,tags:_e};B.id!==null&&(he.id=B.id),oe.features.push(he)}}function Ct(oe,B,j,J,ie,de){let me=J*J;if(J>0&&B.size<(ie?me:J))return void(j.numPoints+=B.length/3);let _e=[];for(let he=0;he<B.length;he+=3)(J===0||B[he+2]>me)&&(j.numSimplified++,_e.push(B[he],B[he+1])),j.numPoints++;ie&&function(he,Te){let Me=0;for(let we=0,je=he.length,lt=je-2;we<je;lt=we,we+=2)Me+=(he[we]-he[lt])*(he[we+1]+he[lt+1]);if(Me>0===Te)for(let we=0,je=he.length;we<je/2;we+=2){let lt=he[we],ht=he[we+1];he[we]=he[je-2-we],he[we+1]=he[je-1-we],he[je-2-we]=lt,he[je-1-we]=ht}}(_e,de),oe.push(_e)}let ft={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ii{constructor(B,j){let J=(j=this.options=function(de,me){for(let _e in me)de[_e]=me[_e];return de}(Object.create(ft),j)).debug;if(J&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");let ie=function(de,me){let _e=[];if(de.type==="FeatureCollection")for(let he=0;he<de.features.length;he++)Gn(_e,de.features[he],me,he);else Gn(_e,de.type==="Feature"?de:{geometry:de},me);return _e}(B,j);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ie=function(de,me){let _e=me.buffer/me.extent,he=de,Te=Cr(de,1,-1-_e,_e,0,-1,2,me),Me=Cr(de,1,1-_e,2+_e,0,-1,2,me);return(Te||Me)&&(he=Cr(de,1,-_e,1+_e,0,-1,2,me)||[],Te&&(he=Fe(Te,1).concat(he)),Me&&(he=he.concat(Fe(Me,-1)))),he}(ie,j),ie.length&&this.splitTile(ie,0,0,0),J&&(ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(B,j,J,ie,de,me,_e){let he=[B,j,J,ie],Te=this.options,Me=Te.debug;for(;he.length;){ie=he.pop(),J=he.pop(),j=he.pop(),B=he.pop();let we=1<<j,je=Vr(j,J,ie),lt=this.tiles[je];if(!lt&&(Me>1&&console.time("creation"),lt=this.tiles[je]=Gi(B,j,J,ie,Te),this.tileCoords.push({z:j,x:J,y:ie}),Me)){Me>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,J,ie,lt.numFeatures,lt.numPoints,lt.numSimplified),console.timeEnd("creation"));let Rn=`z${j}`;this.stats[Rn]=(this.stats[Rn]||0)+1,this.total++}if(lt.source=B,de==null){if(j===Te.indexMaxZoom||lt.numPoints<=Te.indexMaxPoints)continue}else{if(j===Te.maxZoom||j===de)continue;if(de!=null){let Rn=de-j;if(J!==me>>Rn||ie!==_e>>Rn)continue}}if(lt.source=null,B.length===0)continue;Me>1&&console.time("clipping");let ht=.5*Te.buffer/Te.extent,Qt=.5-ht,At=.5+ht,er=1+ht,Ut=null,bn=null,Yr=null,Lt=null,fr=Cr(B,we,J-ht,J+At,0,lt.minX,lt.maxX,Te),jr=Cr(B,we,J+Qt,J+er,0,lt.minX,lt.maxX,Te);B=null,fr&&(Ut=Cr(fr,we,ie-ht,ie+At,1,lt.minY,lt.maxY,Te),bn=Cr(fr,we,ie+Qt,ie+er,1,lt.minY,lt.maxY,Te),fr=null),jr&&(Yr=Cr(jr,we,ie-ht,ie+At,1,lt.minY,lt.maxY,Te),Lt=Cr(jr,we,ie+Qt,ie+er,1,lt.minY,lt.maxY,Te),jr=null),Me>1&&console.timeEnd("clipping"),he.push(Ut||[],j+1,2*J,2*ie),he.push(bn||[],j+1,2*J,2*ie+1),he.push(Yr||[],j+1,2*J+1,2*ie),he.push(Lt||[],j+1,2*J+1,2*ie+1)}}getTile(B,j,J){B=+B,j=+j,J=+J;let ie=this.options,{extent:de,debug:me}=ie;if(B<0||B>24)return null;let _e=1<<B,he=Vr(B,j=j+_e&_e-1,J);if(this.tiles[he])return Wn(this.tiles[he],de);me>1&&console.log("drilling down to z%d-%d-%d",B,j,J);let Te,Me=B,we=j,je=J;for(;!Te&&Me>0;)Me--,we>>=1,je>>=1,Te=this.tiles[Vr(Me,we,je)];return Te&&Te.source?(me>1&&(console.log("found parent tile z%d-%d-%d",Me,we,je),console.time("drilling down")),this.splitTile(Te.source,Me,we,je,B,j,J),me>1&&console.timeEnd("drilling down"),this.tiles[he]?Wn(this.tiles[he],de):null):null}}function Vr(oe,B,j){return 32*((1<<oe)*j+B)+oe}function Tt(oe,B){return B?oe.properties[B]:oe.id}function jo(oe,B){if(oe==null)return!0;if(oe.type==="Feature")return Tt(oe,B)!=null;if(oe.type==="FeatureCollection"){let j=new Set;for(let J of oe.features){let ie=Tt(J,B);if(ie==null||j.has(ie))return!1;j.add(ie)}return!0}return!1}function Ts(oe,B){let j=new Map;if(oe!=null)if(oe.type==="Feature")j.set(Tt(oe,B),oe);else for(let J of oe.features)j.set(Tt(J,B),J);return j}class Qs extends w{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(B,j){return i._(this,void 0,void 0,function*(){let J=B.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let ie=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!ie)return null;let de=new class{constructor(_e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.X,this.length=_e.length,this._features=_e}feature(_e){return new class{constructor(he){this._feature=he,this.extent=i.X,this.type=he.type,this.properties=he.tags,"id"in he&&!isNaN(he.id)&&(this.id=parseInt(he.id,10))}loadGeometry(){if(this._feature.type===1){let he=[];for(let Te of this._feature.geometry)he.push([new i.P(Te[0],Te[1])]);return he}{let he=[];for(let Te of this._feature.geometry){let Me=[];for(let we of Te)Me.push(new i.P(we[0],we[1]));he.push(Me)}return he}}toGeoJSON(he,Te,Me){return W.call(this,he,Te,Me)}}(this._features[_e])}}(ie.features),me=sr(de);return me.byteOffset===0&&me.byteLength===me.buffer.byteLength||(me=new Uint8Array(me)),{vectorTile:de,rawData:me.buffer}})}loadData(B){return i._(this,void 0,void 0,function*(){var j;(j=this._pendingRequest)===null||j===void 0||j.abort();let J=!!(B&&B.request&&B.request.collectResourceTiming)&&new i.bv(B.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(B,this._pendingRequest),this._geoJSONIndex=B.cluster?new Ei(function({superclusterOptions:me,clusterProperties:_e}){if(!_e||!me)return me;let he={},Te={},Me={accumulated:null,zoom:0},we={properties:null},je=Object.keys(_e);for(let lt of je){let[ht,Qt]=_e[lt],At=i.bC(Qt),er=i.bC(typeof ht=="string"?[ht,["accumulated"],["get",lt]]:ht);he[lt]=At.value,Te[lt]=er.value}return me.map=lt=>{we.properties=lt;let ht={};for(let Qt of je)ht[Qt]=he[Qt].evaluate(Me,we);return ht},me.reduce=(lt,ht)=>{we.properties=ht;for(let Qt of je)Me.accumulated=lt[Qt],lt[Qt]=Te[Qt].evaluate(Me,we)},me}(B)).load((yield this._pendingData).features):(ie=yield this._pendingData,new ii(ie,B.geojsonVtOptions)),this.loaded={};let de={};if(J){let me=J.finish();me&&(de.resourceTiming={},de.resourceTiming[B.source]=JSON.parse(JSON.stringify(me)))}return de}catch(de){if(delete this._pendingRequest,i.bB(de))return{abandoned:!0};throw de}var ie})}getData(){return i._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(B){let j=this.loaded;return j&&j[B.uid]?super.reloadTile(B):this.loadTile(B)}loadAndProcessGeoJSON(B,j){return i._(this,void 0,void 0,function*(){let J=yield this.loadGeoJSON(B,j);if(delete this._pendingRequest,typeof J!="object")throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`);if(k(J,!0),B.filter){let ie=i.bC(B.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ie.result==="error")throw new Error(ie.value.map(me=>`${me.key}: ${me.message}`).join(", "));J={type:"FeatureCollection",features:J.features.filter(me=>ie.value.evaluate({zoom:0},me))}}return J})}loadGeoJSON(B,j){return i._(this,void 0,void 0,function*(){let{promoteId:J}=B;if(B.request){let ie=yield i.h(B.request,j);return this._dataUpdateable=jo(ie.data,J)?Ts(ie.data,J):void 0,ie.data}if(typeof B.data=="string")try{let ie=JSON.parse(B.data);return this._dataUpdateable=jo(ie,J)?Ts(ie,J):void 0,ie}catch(ie){throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`)}if(!B.dataDiff)throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${B.source}`);return function(ie,de,me){var _e,he,Te,Me;if(de.removeAll&&ie.clear(),de.remove)for(let we of de.remove)ie.delete(we);if(de.add)for(let we of de.add){let je=Tt(we,me);je!=null&&ie.set(je,we)}if(de.update)for(let we of de.update){let je=ie.get(we.id);if(je==null)continue;let lt=!we.removeAllProperties&&(((_e=we.removeProperties)===null||_e===void 0?void 0:_e.length)>0||((he=we.addOrUpdateProperties)===null||he===void 0?void 0:he.length)>0);if((we.newGeometry||we.removeAllProperties||lt)&&(je=Object.assign({},je),ie.set(we.id,je),lt&&(je.properties=Object.assign({},je.properties))),we.newGeometry&&(je.geometry=we.newGeometry),we.removeAllProperties)je.properties={};else if(((Te=we.removeProperties)===null||Te===void 0?void 0:Te.length)>0)for(let ht of we.removeProperties)Object.prototype.hasOwnProperty.call(je.properties,ht)&&delete je.properties[ht];if(((Me=we.addOrUpdateProperties)===null||Me===void 0?void 0:Me.length)>0)for(let{key:ht,value:Qt}of we.addOrUpdateProperties)je.properties[ht]=Qt}}(this._dataUpdateable,B.dataDiff,J),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(B){return i._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(B){return this._geoJSONIndex.getClusterExpansionZoom(B.clusterId)}getClusterChildren(B){return this._geoJSONIndex.getChildren(B.clusterId)}getClusterLeaves(B){return this._geoJSONIndex.getLeaves(B.clusterId,B.limit,B.offset)}}class Bo{constructor(B){this.self=B,this.actor=new i.F(B),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(j,J)=>{if(this.externalWorkerSourceTypes[j])throw new Error(`Worker source with name "${j}" already registered.`);this.externalWorkerSourceTypes[j]=J},this.self.addProtocol=i.bi,this.self.removeProtocol=i.bj,this.self.registerRTLTextPlugin=j=>{if(i.bD.isParsed())throw new Error("RTL text plugin already registered.");i.bD.setMethods(j)},this.actor.registerMessageHandler("LDT",(j,J)=>this._getDEMWorkerSource(j,J.source).loadTile(J)),this.actor.registerMessageHandler("RDT",(j,J)=>i._(this,void 0,void 0,function*(){this._getDEMWorkerSource(j,J.source).removeTile(J)})),this.actor.registerMessageHandler("GCEZ",(j,J)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(j,J.type,J.source).getClusterExpansionZoom(J)})),this.actor.registerMessageHandler("GCC",(j,J)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(j,J.type,J.source).getClusterChildren(J)})),this.actor.registerMessageHandler("GCL",(j,J)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(j,J.type,J.source).getClusterLeaves(J)})),this.actor.registerMessageHandler("LD",(j,J)=>this._getWorkerSource(j,J.type,J.source).loadData(J)),this.actor.registerMessageHandler("GD",(j,J)=>this._getWorkerSource(j,J.type,J.source).getData()),this.actor.registerMessageHandler("LT",(j,J)=>this._getWorkerSource(j,J.type,J.source).loadTile(J)),this.actor.registerMessageHandler("RT",(j,J)=>this._getWorkerSource(j,J.type,J.source).reloadTile(J)),this.actor.registerMessageHandler("AT",(j,J)=>this._getWorkerSource(j,J.type,J.source).abortTile(J)),this.actor.registerMessageHandler("RMT",(j,J)=>this._getWorkerSource(j,J.type,J.source).removeTile(J)),this.actor.registerMessageHandler("RS",(j,J)=>i._(this,void 0,void 0,function*(){if(!this.workerSources[j]||!this.workerSources[j][J.type]||!this.workerSources[j][J.type][J.source])return;let ie=this.workerSources[j][J.type][J.source];delete this.workerSources[j][J.type][J.source],ie.removeSource!==void 0&&ie.removeSource(J)})),this.actor.registerMessageHandler("RM",j=>i._(this,void 0,void 0,function*(){delete this.layerIndexes[j],delete this.availableImages[j],delete this.workerSources[j],delete this.demWorkerSources[j]})),this.actor.registerMessageHandler("SR",(j,J)=>i._(this,void 0,void 0,function*(){this.referrer=J})),this.actor.registerMessageHandler("SRPS",(j,J)=>this._syncRTLPluginState(j,J)),this.actor.registerMessageHandler("IS",(j,J)=>i._(this,void 0,void 0,function*(){this.self.importScripts(J)})),this.actor.registerMessageHandler("SI",(j,J)=>this._setImages(j,J)),this.actor.registerMessageHandler("UL",(j,J)=>i._(this,void 0,void 0,function*(){this._getLayerIndex(j).update(J.layers,J.removedIds)})),this.actor.registerMessageHandler("SL",(j,J)=>i._(this,void 0,void 0,function*(){this._getLayerIndex(j).replace(J)}))}_setImages(B,j){return i._(this,void 0,void 0,function*(){this.availableImages[B]=j;for(let J in this.workerSources[B]){let ie=this.workerSources[B][J];for(let de in ie)ie[de].availableImages=j}})}_syncRTLPluginState(B,j){return i._(this,void 0,void 0,function*(){if(i.bD.isParsed())return i.bD.getState();if(j.pluginStatus!=="loading")return i.bD.setState(j),j;let J=j.pluginURL;if(this.self.importScripts(J),i.bD.isParsed()){let ie={pluginStatus:"loaded",pluginURL:J};return i.bD.setState(ie),ie}throw i.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${J}`)})}_getAvailableImages(B){let j=this.availableImages[B];return j||(j=[]),j}_getLayerIndex(B){let j=this.layerIndexes[B];return j||(j=this.layerIndexes[B]=new a),j}_getWorkerSource(B,j,J){if(this.workerSources[B]||(this.workerSources[B]={}),this.workerSources[B][j]||(this.workerSources[B][j]={}),!this.workerSources[B][j][J]){let ie={sendAsync:(de,me)=>(de.targetMapId=B,this.actor.sendAsync(de,me))};switch(j){case"vector":this.workerSources[B][j][J]=new w(ie,this._getLayerIndex(B),this._getAvailableImages(B));break;case"geojson":this.workerSources[B][j][J]=new Qs(ie,this._getLayerIndex(B),this._getAvailableImages(B));break;default:this.workerSources[B][j][J]=new this.externalWorkerSourceTypes[j](ie,this._getLayerIndex(B),this._getAvailableImages(B));}}return this.workerSources[B][j][J]}_getDEMWorkerSource(B,j){return this.demWorkerSources[B]||(this.demWorkerSources[B]={}),this.demWorkerSources[B][j]||(this.demWorkerSources[B][j]=new E),this.demWorkerSources[B][j]}}return i.i(self)&&(self.worker=new Bo(self)),Bo}),r("index",["exports","./shared"],function(i,a){"use strict";var h="4.7.1";let p,g,w={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:_=>new Promise((o,c)=>{let d=requestAnimationFrame(o);_.signal.addEventListener("abort",()=>{cancelAnimationFrame(d),c(a.c())})}),getImageData(_,o=0){return this.getImageCanvasContext(_).getImageData(-o,-o,_.width+2*o,_.height+2*o)},getImageCanvasContext(_){let o=window.document.createElement("canvas"),c=o.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return o.width=_.width,o.height=_.height,c.drawImage(_,0,0,_.width,_.height),c},resolveURL:_=>(p||(p=document.createElement("a")),p.href=_,p.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(g==null&&(g=matchMedia("(prefers-reduced-motion: reduce)")),g.matches)}};class E{static testProp(o){if(!E.docStyle)return o[0];for(let c=0;c<o.length;c++)if(o[c]in E.docStyle)return o[c];return o[0]}static create(o,c,d){let v=window.document.createElement(o);return c!==void 0&&(v.className=c),d&&d.appendChild(v),v}static createNS(o,c){return window.document.createElementNS(o,c)}static disableDrag(){E.docStyle&&E.selectProp&&(E.userSelect=E.docStyle[E.selectProp],E.docStyle[E.selectProp]="none")}static enableDrag(){E.docStyle&&E.selectProp&&(E.docStyle[E.selectProp]=E.userSelect)}static setTransform(o,c){o.style[E.transformProp]=c}static addEventListener(o,c,d,v={}){o.addEventListener(c,d,"passive"in v?v:v.capture)}static removeEventListener(o,c,d,v={}){o.removeEventListener(c,d,"passive"in v?v:v.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",E.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",E.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",E.suppressClickInternal,!0)},0)}static getScale(o){let c=o.getBoundingClientRect();return{x:c.width/o.offsetWidth||1,y:c.height/o.offsetHeight||1,boundingClientRect:c}}static getPoint(o,c,d){let v=c.boundingClientRect;return new a.P((d.clientX-v.left)/c.x-o.clientLeft,(d.clientY-v.top)/c.y-o.clientTop)}static mousePos(o,c){let d=E.getScale(o);return E.getPoint(o,d,c)}static touchPos(o,c){let d=[],v=E.getScale(o);for(let y=0;y<c.length;y++)d.push(E.getPoint(o,v,c[y]));return d}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}}E.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,E.selectProp=E.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),E.transformProp=E.testProp(["transform","WebkitTransform"]);let q={supported:!1,testSupport:function(_){!W&&k&&(Q?$(_):P=_)}},P,k,W=!1,Q=!1;function $(_){let o=_.createTexture();_.bindTexture(_.TEXTURE_2D,o);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,k),_.isContextLost())return;q.supported=!0}catch(c){}_.deleteTexture(o),W=!0}var V;typeof document!="undefined"&&(k=document.createElement("img"),k.onload=()=>{P&&$(P),P=null,Q=!0},k.onerror=()=>{W=!0,P=null},k.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let o,c,d,v;_.resetRequestQueue=()=>{o=[],c=0,d=0,v={}},_.addThrottleControl=M=>{let D=d++;return v[D]=M,D},_.removeThrottleControl=M=>{delete v[M],I()},_.getImage=(M,D,N=!0)=>new Promise((F,G)=>{q.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),a.e(M,{type:"image"}),o.push({abortController:D,requestParameters:M,supportImageRefresh:N,state:"queued",onError:Y=>{G(Y)},onSuccess:Y=>{F(Y)}}),I()});let y=M=>a._(this,void 0,void 0,function*(){M.state="running";let{requestParameters:D,supportImageRefresh:N,onError:F,onSuccess:G,abortController:Y}=M,ee=N===!1&&!a.i(self)&&!a.g(D.url)&&(!D.headers||Object.keys(D.headers).reduce((ce,fe)=>ce&&fe==="accept",!0));c++;let ae=ee?A(D,Y):a.m(D,Y);try{let ce=yield ae;delete M.abortController,M.state="completed",ce.data instanceof HTMLImageElement||a.b(ce.data)?G(ce):ce.data&&G({data:yield(le=ce.data,typeof createImageBitmap=="function"?a.d(le):a.f(le)),cacheControl:ce.cacheControl,expires:ce.expires})}catch(ce){delete M.abortController,F(ce)}finally{c--,I()}var le}),I=()=>{let M=(()=>{for(let D of Object.keys(v))if(v[D]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let D=c;D<M&&o.length>0;D++){let N=o.shift();N.abortController.signal.aborted?D--:y(N)}},A=(M,D)=>new Promise((N,F)=>{let G=new Image,Y=M.url,ee=M.credentials;ee&&ee==="include"?G.crossOrigin="use-credentials":(ee&&ee==="same-origin"||!a.s(Y))&&(G.crossOrigin="anonymous"),D.signal.addEventListener("abort",()=>{G.src="",F(a.c())}),G.fetchPriority="high",G.onload=()=>{G.onerror=G.onload=null,N({data:G})},G.onerror=()=>{G.onerror=G.onload=null,D.signal.aborted||F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},G.src=Y})}(V||(V={})),V.resetRequestQueue();class Z{constructor(o){this._transformRequestFn=o}transformRequest(o,c){return this._transformRequestFn&&this._transformRequestFn(o,c)||{url:o}}setTransformRequest(o){this._transformRequestFn=o}}function te(_){var o=new a.A(3);return o[0]=_[0],o[1]=_[1],o[2]=_[2],o}var se,Ie=function(_,o,c){return _[0]=o[0]-c[0],_[1]=o[1]-c[1],_[2]=o[2]-c[2],_};se=new a.A(3),a.A!=Float32Array&&(se[0]=0,se[1]=0,se[2]=0);var qe=function(_){var o=_[0],c=_[1];return o*o+c*c};function Ae(_){let o=[];if(typeof _=="string")o.push({id:"default",url:_});else if(_&&_.length>0){let c=[];for(let{id:d,url:v}of _){let y=`${d}${v}`;c.indexOf(y)===-1&&(c.push(y),o.push({id:d,url:v}))}}return o}function Ue(_,o,c){let d=_.split("?");return d[0]+=`${o}${c}`,d.join("?")}(function(){var _=new a.A(2);a.A!=Float32Array&&(_[0]=0,_[1]=0)})();class Le{constructor(o,c,d,v){this.context=o,this.format=d,this.texture=o.gl.createTexture(),this.update(c,v)}update(o,c,d){let{width:v,height:y}=o,I=!(this.size&&this.size[0]===v&&this.size[1]===y||d),{context:A}=this,{gl:M}=A;if(this.useMipmap=!!(c&&c.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!c||c.premultiply!==!1)),I)this.size=[v,y],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||a.b(o)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,o):M.texImage2D(M.TEXTURE_2D,0,this.format,v,y,0,this.format,M.UNSIGNED_BYTE,o.data);else{let{x:D,y:N}=d||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||a.b(o)?M.texSubImage2D(M.TEXTURE_2D,0,D,N,M.RGBA,M.UNSIGNED_BYTE,o):M.texSubImage2D(M.TEXTURE_2D,0,D,N,v,y,M.RGBA,M.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(o,c,d){let{context:v}=this,{gl:y}=v;y.bindTexture(y.TEXTURE_2D,this.texture),d!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=y.LINEAR),o!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,o),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,d||o),this.filter=o),c!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,c),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}function $t(_){let{userImage:o}=_;return!!(o&&o.render&&o.render())&&(_.data.replace(new Uint8Array(o.data.buffer)),!0)}class Rt extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(let{ids:c,promiseResolve:d}of this.requestors)d(this._getImagesForIds(c));this.requestors=[]}}getImage(o){let c=this.images[o];if(c&&!c.data&&c.spriteData){let d=c.spriteData;c.data=new a.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),c.spriteData=null}return c}addImage(o,c){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,c)&&(this.images[o]=c)}_validate(o,c){let d=!0,v=c.data||c.spriteData;return this._validateStretch(c.stretchX,v&&v.width)||(this.fire(new a.j(new Error(`Image "${o}" has invalid "stretchX" value`))),d=!1),this._validateStretch(c.stretchY,v&&v.height)||(this.fire(new a.j(new Error(`Image "${o}" has invalid "stretchY" value`))),d=!1),this._validateContent(c.content,c)||(this.fire(new a.j(new Error(`Image "${o}" has invalid "content" value`))),d=!1),d}_validateStretch(o,c){if(!o)return!0;let d=0;for(let v of o){if(v[0]<d||v[1]<v[0]||c<v[1])return!1;d=v[1]}return!0}_validateContent(o,c){if(!o)return!0;if(o.length!==4)return!1;let d=c.spriteData,v=d&&d.width||c.data.width,y=d&&d.height||c.data.height;return!(o[0]<0||v<o[0]||o[1]<0||y<o[1]||o[2]<0||v<o[2]||o[3]<0||y<o[3]||o[2]<o[0]||o[3]<o[1])}updateImage(o,c,d=!0){let v=this.getImage(o);if(d&&(v.data.width!==c.data.width||v.data.height!==c.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=v.version+1,this.images[o]=c,this.updatedImages[o]=!0}removeImage(o){let c=this.images[o];delete this.images[o],delete this.patterns[o],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o){return new Promise((c,d)=>{let v=!0;if(!this.isLoaded())for(let y of o)this.images[y]||(v=!1);this.isLoaded()||v?c(this._getImagesForIds(o)):this.requestors.push({ids:o,promiseResolve:c})})}_getImagesForIds(o){let c={};for(let d of o){let v=this.getImage(d);v||(this.fire(new a.k("styleimagemissing",{id:d})),v=this.getImage(d)),v?c[d]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,textFitWidth:v.textFitWidth,textFitHeight:v.textFitHeight,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:a.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){let{width:o,height:c}=this.atlasImage;return{width:o,height:c}}getPattern(o){let c=this.patterns[o],d=this.getImage(o);if(!d)return null;if(c&&c.position.version===d.version)return c.position;if(c)c.position.version=d.version;else{let v={w:d.data.width+2,h:d.data.height+2,x:0,y:0},y=new a.I(v,d);this.patterns[o]={bin:v,position:y}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){let c=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Le(o,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){let o=[];for(let y in this.patterns)o.push(this.patterns[y].bin);let{w:c,h:d}=a.p(o),v=this.atlasImage;v.resize({width:c||1,height:d||1});for(let y in this.patterns){let{bin:I}=this.patterns[y],A=I.x+1,M=I.y+1,D=this.getImage(y).data,N=D.width,F=D.height;a.R.copy(D,v,{x:0,y:0},{x:A,y:M},{width:N,height:F}),a.R.copy(D,v,{x:0,y:F-1},{x:A,y:M-1},{width:N,height:1}),a.R.copy(D,v,{x:0,y:0},{x:A,y:M+F},{width:N,height:1}),a.R.copy(D,v,{x:N-1,y:0},{x:A-1,y:M},{width:1,height:F}),a.R.copy(D,v,{x:0,y:0},{x:A+N,y:M},{width:1,height:F})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(let c of o){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;let d=this.getImage(c);d||a.w(`Image with ID: "${c}" was not found`),$t(d)&&this.updateImage(c,d)}}}let ir=1e20;function Xr(_,o,c,d,v,y,I,A,M){for(let D=o;D<o+d;D++)Pn(_,c*y+D,y,v,I,A,M);for(let D=c;D<c+v;D++)Pn(_,D*y+o,1,d,I,A,M)}function Pn(_,o,c,d,v,y,I){y[0]=0,I[0]=-ir,I[1]=ir,v[0]=_[o];for(let A=1,M=0,D=0;A<d;A++){v[A]=_[o+A*c];let N=A*A;do{let F=y[M];D=(v[A]-v[F]+N-F*F)/(A-F)/2}while(D<=I[M]&&--M>-1);M++,y[M]=A,I[M]=D,I[M+1]=ir}for(let A=0,M=0;A<d;A++){for(;I[M+1]<A;)M++;let D=y[M],N=A-D;_[o+A*c]=v[D]+N*N}}class sr{constructor(o,c){this.requestManager=o,this.localIdeographFontFamily=c,this.entries={}}setURL(o){this.url=o}getGlyphs(o){return a._(this,void 0,void 0,function*(){let c=[];for(let y in o)for(let I of o[y])c.push(this._getAndCacheGlyphsPromise(y,I));let d=yield Promise.all(c),v={};for(let{stack:y,id:I,glyph:A}of d)v[y]||(v[y]={}),v[y][I]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};return v})}_getAndCacheGlyphsPromise(o,c){return a._(this,void 0,void 0,function*(){let d=this.entries[o];d||(d=this.entries[o]={glyphs:{},requests:{},ranges:{}});let v=d.glyphs[c];if(v!==void 0)return{stack:o,id:c,glyph:v};if(v=this._tinySDF(d,o,c),v)return d.glyphs[c]=v,{stack:o,id:c,glyph:v};let y=Math.floor(c/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[y])return{stack:o,id:c,glyph:v};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[y]){let A=sr.loadGlyphRange(o,y,this.url,this.requestManager);d.requests[y]=A}let I=yield d.requests[y];for(let A in I)this._doesCharSupportLocalGlyph(+A)||(d.glyphs[+A]=I[+A]);return d.ranges[y]=!0,{stack:o,id:c,glyph:I[c]||null}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(o))}_tinySDF(o,c,d){let v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(d))return;let y=o.tinySDF;if(!y){let A="400";/bold/i.test(c)?A="900":/medium/i.test(c)?A="500":/light/i.test(c)&&(A="200"),y=o.tinySDF=new sr.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:v,fontWeight:A})}let I=y.draw(String.fromCharCode(d));return{id:d,bitmap:new a.o({width:I.width||60,height:I.height||60},I.data),metrics:{width:I.glyphWidth/2||24,height:I.glyphHeight/2||24,left:I.glyphLeft/2+.5||0,top:I.glyphTop/2-27.5||-8,advance:I.glyphAdvance/2||24,isDoubleResolution:!0}}}}sr.loadGlyphRange=function(_,o,c,d){return a._(this,void 0,void 0,function*(){let v=256*o,y=v+255,I=d.transformRequest(c.replace("{fontstack}",_).replace("{range}",`${v}-${y}`),"Glyphs"),A=yield a.l(I,new AbortController);if(!A||!A.data)throw new Error(`Could not load glyph range. range: ${o}, ${v}-${y}`);let M={};for(let D of a.n(A.data))M[D.id]=D;return M})},sr.TinySDF=class{constructor({fontSize:_=24,buffer:o=3,radius:c=8,cutoff:d=.25,fontFamily:v="sans-serif",fontWeight:y="normal",fontStyle:I="normal"}={}){this.buffer=o,this.cutoff=d,this.radius=c;let A=this.size=_+4*o,M=this._createCanvas(A),D=this.ctx=M.getContext("2d",{willReadFrequently:!0});D.font=`${I} ${y} ${_}px ${v}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(_){let o=document.createElement("canvas");return o.width=o.height=_,o}draw(_){let{width:o,actualBoundingBoxAscent:c,actualBoundingBoxDescent:d,actualBoundingBoxLeft:v,actualBoundingBoxRight:y}=this.ctx.measureText(_),I=Math.ceil(c),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-v))),M=Math.min(this.size-this.buffer,I+Math.ceil(d)),D=A+2*this.buffer,N=M+2*this.buffer,F=Math.max(D*N,0),G=new Uint8ClampedArray(F),Y={data:G,width:D,height:N,glyphWidth:A,glyphHeight:M,glyphTop:I,glyphLeft:0,glyphAdvance:o};if(A===0||M===0)return Y;let{ctx:ee,buffer:ae,gridInner:le,gridOuter:ce}=this;ee.clearRect(ae,ae,A,M),ee.fillText(_,ae,ae+I);let fe=ee.getImageData(ae,ae,A,M);ce.fill(ir,0,F),le.fill(0,0,F);for(let re=0;re<M;re++)for(let ve=0;ve<A;ve++){let ge=fe.data[4*(re*A+ve)+3]/255;if(ge===0)continue;let be=(re+ae)*D+ve+ae;if(ge===1)ce[be]=0,le[be]=ir;else{let Pe=.5-ge;ce[be]=Pe>0?Pe*Pe:0,le[be]=Pe<0?Pe*Pe:0}}Xr(ce,0,0,D,N,D,this.f,this.v,this.z),Xr(le,ae,ae,A,M,D,this.f,this.v,this.z);for(let re=0;re<F;re++){let ve=Math.sqrt(ce[re])-Math.sqrt(le[re]);G[re]=Math.round(255-255*(ve/this.radius+this.cutoff))}return Y}};class lr{constructor(){this.specification=a.v.light.position}possiblyEvaluate(o,c){return a.x(o.expression.evaluate(c))}interpolate(o,c,d){return{x:a.y.number(o.x,c.x,d),y:a.y.number(o.y,c.y,d),z:a.y.number(o.z,c.z,d)}}}let cr;class Zt extends a.E{constructor(o){super(),cr=cr||new a.q({anchor:new a.D(a.v.light.anchor),position:new lr,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(cr),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,c={}){if(!this._validate(a.r,o,c))for(let d in o){let v=o[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),v):this._transitionable.setValue(d,v)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,c,d){return(!d||d.validate!==!1)&&a.t(this,o.call(a.u,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}let rn=new a.q({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class nn extends a.E{constructor(o){super(),this._transitionable=new a.T(rn),this.setSky(o),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.z(0))}setSky(o,c={}){if(!this._validate(a.B,o,c)){o||(o={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let d in o){let v=o[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),v):this._transitionable.setValue(d,v)}}}getSky(){return this._transitionable.serialize()}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,c,d={}){return(d==null?void 0:d.validate)!==!1&&a.t(this,o.call(a.u,a.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(o){return o<60?0:o<70?(o-60)/10:1}}class va{constructor(o,c){this.width=o,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,c){let d=o.join(",")+String(c);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(o,c)),this.dashEntry[d]}getDashRanges(o,c,d){let v=[],y=o.length%2==1?-o[o.length-1]*d:0,I=o[0]*d,A=!0;v.push({left:y,right:I,isDash:A,zeroLength:o[0]===0});let M=o[0];for(let D=1;D<o.length;D++){A=!A;let N=o[D];y=M*d,M+=N,I=M*d,v.push({left:y,right:I,isDash:A,zeroLength:N===0})}return v}addRoundDash(o,c,d){let v=c/2;for(let y=-d;y<=d;y++){let I=this.width*(this.nextRow+d+y),A=0,M=o[A];for(let D=0;D<this.width;D++){D/M.right>1&&(M=o[++A]);let N=Math.abs(D-M.left),F=Math.abs(D-M.right),G=Math.min(N,F),Y,ee=y/d*(v+1);if(M.isDash){let ae=v-Math.abs(ee);Y=Math.sqrt(G*G+ae*ae)}else Y=v-Math.sqrt(G*G+ee*ee);this.data[I+D]=Math.max(0,Math.min(255,Y+128))}}}addRegularDash(o){for(let A=o.length-1;A>=0;--A){let M=o[A],D=o[A+1];M.zeroLength?o.splice(A,1):D&&D.isDash===M.isDash&&(D.left=M.left,o.splice(A,1))}let c=o[0],d=o[o.length-1];c.isDash===d.isDash&&(c.left=d.left-this.width,d.right=c.right+this.width);let v=this.width*this.nextRow,y=0,I=o[y];for(let A=0;A<this.width;A++){A/I.right>1&&(I=o[++y]);let M=Math.abs(A-I.left),D=Math.abs(A-I.right),N=Math.min(M,D);this.data[v+A]=Math.max(0,Math.min(255,(I.isDash?N:-N)+128))}}addDash(o,c){let d=c?7:0,v=2*d+1;if(this.nextRow+v>this.height)return a.w("LineAtlas out of space"),null;let y=0;for(let A=0;A<o.length;A++)y+=o[A];if(y!==0){let A=this.width/y,M=this.getDashRanges(o,this.width,A);c?this.addRoundDash(M,A,d):this.addRegularDash(M)}let I={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:y};return this.nextRow+=v,this.dirty=!0,I}bind(o){let c=o.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}let Ei="maplibre_preloaded_worker_pool";class $n{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<$n.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ei]}numActive(){return Object.keys(this.active).length}}let ti=Math.floor(w.hardwareConcurrency/2),Dt,vn;function ri(){return Dt||(Dt=new $n),Dt}$n.workerCount=a.C(globalThis)?Math.max(Math.min(ti,3),1):1;class an{constructor(o,c){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=c;let d=this.workerPool.acquire(c);for(let v=0;v<d.length;v++){let y=new a.F(d[v],c);y.name=`Worker ${v}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,c){let d=[];for(let v of this.actors)d.push(v.sendAsync({type:o,data:c}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(o=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],o&&this.workerPool.release(this.id)}registerMessageHandler(o,c){for(let d of this.actors)d.registerMessageHandler(o,c)}}function ws(){return vn||(vn=new an(ri(),a.G),vn.registerMessageHandler("GR",(_,o,c)=>a.m(o,c))),vn}function xn(_,o){let c=a.H();return a.J(c,c,[1,1,0]),a.K(c,c,[.5*_.width,.5*_.height,1]),a.L(c,c,_.calculatePosMatrix(o.toUnwrapped()))}function ka(_,o,c,d,v,y){let I=function(F,G,Y){if(F)for(let ee of F){let ae=G[ee];if(ae&&ae.source===Y&&ae.type==="fill-extrusion")return!0}else for(let ee in G){let ae=G[ee];if(ae.source===Y&&ae.type==="fill-extrusion")return!0}return!1}(v&&v.layers,o,_.id),A=y.maxPitchScaleFactor(),M=_.tilesIn(d,A,I);M.sort(Gn);let D=[];for(let F of M)D.push({wrappedTileID:F.tileID.wrapped().key,queryResults:F.tile.queryRenderedFeatures(o,c,_._state,F.queryGeometry,F.cameraQueryGeometry,F.scale,v,y,A,xn(_.transform,F.tileID))});let N=function(F){let G={},Y={};for(let ee of F){let ae=ee.queryResults,le=ee.wrappedTileID,ce=Y[le]=Y[le]||{};for(let fe in ae){let re=ae[fe],ve=ce[fe]=ce[fe]||{},ge=G[fe]=G[fe]||[];for(let be of re)ve[be.featureIndex]||(ve[be.featureIndex]=!0,ge.push(be))}}return G}(D);for(let F in N)N[F].forEach(G=>{let Y=G.feature,ee=_.getFeatureState(Y.layer["source-layer"],Y.id);Y.source=Y.layer.source,Y.layer["source-layer"]&&(Y.sourceLayer=Y.layer["source-layer"]),Y.state=ee});return N}function Gn(_,o){let c=_.tileID,d=o.tileID;return c.overscaledZ-d.overscaledZ||c.canonical.y-d.canonical.y||c.wrap-d.wrap||c.canonical.x-d.canonical.x}function Es(_,o,c){return a._(this,void 0,void 0,function*(){let d=_;if(_.url?d=(yield a.h(o.transformRequest(_.url,"Source"),c)).data:yield w.frameAsync(c),!d)return null;let v=a.M(a.e(d,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(v.vectorLayerIds=d.vector_layers.map(y=>y.id)),v})}class Ee{constructor(o,c){o&&(c?this.setSouthWest(o).setNorthEast(c):Array.isArray(o)&&(o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1])))}setNorthEast(o){return this._ne=o instanceof a.N?new a.N(o.lng,o.lat):a.N.convert(o),this}setSouthWest(o){return this._sw=o instanceof a.N?new a.N(o.lng,o.lat):a.N.convert(o),this}extend(o){let c=this._sw,d=this._ne,v,y;if(o instanceof a.N)v=o,y=o;else{if(!(o instanceof Ee))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Ee.convert(o)):this.extend(a.N.convert(o)):o&&("lng"in o||"lon"in o)&&"lat"in o?this.extend(a.N.convert(o)):this;if(v=o._sw,y=o._ne,!v||!y)return this}return c||d?(c.lng=Math.min(v.lng,c.lng),c.lat=Math.min(v.lat,c.lat),d.lng=Math.max(y.lng,d.lng),d.lat=Math.max(y.lat,d.lat)):(this._sw=new a.N(v.lng,v.lat),this._ne=new a.N(y.lng,y.lat)),this}getCenter(){return new a.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.N(this.getWest(),this.getNorth())}getSouthEast(){return new a.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){let{lng:c,lat:d}=a.N.convert(o),v=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&v}static convert(o){return o instanceof Ee?o:o&&new Ee(o)}static fromLngLat(o,c=0){let d=360*c/40075017,v=d/Math.cos(Math.PI/180*o.lat);return new Ee(new a.N(o.lng-v,o.lat-d),new a.N(o.lng+v,o.lat+d))}adjustAntiMeridian(){let o=new a.N(this._sw.lng,this._sw.lat),c=new a.N(this._ne.lng,this._ne.lat);return new Ee(o,o.lng>c.lng?new a.N(c.lng+360,c.lat):c)}}class zo{constructor(o,c,d){this.bounds=Ee.convert(this.validateBounds(o)),this.minzoom=c||0,this.maxzoom=d||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){let c=Math.pow(2,o.z),d=Math.floor(a.O(this.bounds.getWest())*c),v=Math.floor(a.Q(this.bounds.getNorth())*c),y=Math.ceil(a.O(this.bounds.getEast())*c),I=Math.ceil(a.Q(this.bounds.getSouth())*c);return o.x>=d&&o.x<y&&o.y>=v&&o.y<I}}class Ks extends a.E{constructor(o,c,d,v){if(super(),this.id=o,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.M(c,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let o=yield Es(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),o&&(a.e(this,o),o.bounds&&(this.tileBounds=new zo(o.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(o){this._tileJSONRequest=null,this.fire(new a.j(o))}})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.abort(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(o){return a._(this,void 0,void 0,function*(){let c=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(c,"Tile"),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(o.actor&&o.state!=="expired"){if(o.state==="loading")return new Promise((y,I)=>{o.reloadPromise={resolve:y,reject:I}})}else o.actor=this.dispatcher.getActor(),v="LT";o.abortController=new AbortController;try{let y=yield o.actor.sendAsync({type:v,data:d},o.abortController);if(delete o.abortController,o.aborted)return;this._afterTileLoadWorkerResponse(o,y)}catch(y){if(delete o.abortController,o.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(o,null)}})}_afterTileLoadWorkerResponse(o,c){if(c&&c.resourceTiming&&(o.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&o.setExpiryData(c),o.loadVectorData(c,this.map.painter),o.reloadPromise){let d=o.reloadPromise;o.reloadPromise=null,this.loadTile(o).then(d.resolve).catch(d.reject)}}abortTile(o){return a._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.actor&&(yield o.actor.sendAsync({type:"AT",data:{uid:o.uid,type:this.type,source:this.id}}))})}unloadTile(o){return a._(this,void 0,void 0,function*(){o.unloadVectorData(),o.actor&&(yield o.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Kt extends a.E{constructor(o,c,d,v){super(),this.id=o,this.dispatcher=d,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},c),a.e(this,a.M(c,["url","scheme","tileSize"]))}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let o=yield Es(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,o&&(a.e(this,o),o.bounds&&(this.tileBounds=new zo(o.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(o){this._tileJSONRequest=null,this.fire(new a.j(o))}})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(o){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}serialize(){return a.e({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o){return a._(this,void 0,void 0,function*(){let c=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.abortController=new AbortController;try{let d=yield V.getImage(this.map._requestManager.transformRequest(c,"Tile"),o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&o.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});let v=this.map.painter.context,y=v.gl,I=d.data;o.texture=this.map.painter.getTileTexture(I.width),o.texture?o.texture.update(I,{useMipmap:!0}):(o.texture=new Le(v,I,y.RGBA,{useMipmap:!0}),o.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),o.state="loaded"}}catch(d){if(delete o.abortController,o.aborted)o.state="unloaded";else if(d)throw o.state="errored",d}})}abortTile(o){return a._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController)})}unloadTile(o){return a._(this,void 0,void 0,function*(){o.texture&&this.map.painter.saveTileTexture(o.texture)})}hasTransition(){return!1}}class Cr extends Kt{constructor(o,c,d,v){super(o,c,d,v),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(o){return a._(this,void 0,void 0,function*(){let c=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(c,"Tile");o.neighboringTiles=this._getNeighboringTiles(o.tileID),o.abortController=new AbortController;try{let v=yield V.getImage(d,o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(v&&v.data){let y=v.data;this.map._refreshExpiredTiles&&v.cacheControl&&v.expires&&o.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});let I=a.b(y)&&a.U()?y:yield this.readImageNow(y),A={type:this.type,uid:o.uid,source:this.id,rawImageData:I,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!o.actor||o.state==="expired"){o.actor=this.dispatcher.getActor();let M=yield o.actor.sendAsync({type:"LDT",data:A});o.dem=M,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded"}}}catch(v){if(delete o.abortController,o.aborted)o.state="unloaded";else if(v)throw o.state="errored",v}})}readImageNow(o){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&a.V()){let c=o.width+2,d=o.height+2;try{return new a.R({width:c,height:d},(yield a.W(o,-1,-1,c,d)))}catch(v){}}return w.getImageData(o,1)})}_getNeighboringTiles(o){let c=o.canonical,d=Math.pow(2,c.z),v=(c.x-1+d)%d,y=c.x===0?o.wrap-1:o.wrap,I=(c.x+1+d)%d,A=c.x+1===d?o.wrap+1:o.wrap,M={};return M[new a.S(o.overscaledZ,y,c.z,v,c.y).key]={backfilled:!1},M[new a.S(o.overscaledZ,A,c.z,I,c.y).key]={backfilled:!1},c.y>0&&(M[new a.S(o.overscaledZ,y,c.z,v,c.y-1).key]={backfilled:!1},M[new a.S(o.overscaledZ,o.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},M[new a.S(o.overscaledZ,A,c.z,I,c.y-1).key]={backfilled:!1}),c.y+1<d&&(M[new a.S(o.overscaledZ,y,c.z,v,c.y+1).key]={backfilled:!1},M[new a.S(o.overscaledZ,o.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},M[new a.S(o.overscaledZ,A,c.z,I,c.y+1).key]={backfilled:!1}),M}unloadTile(o){return a._(this,void 0,void 0,function*(){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&(yield o.actor.sendAsync({type:"RDT",data:{type:this.type,uid:o.uid,source:this.id}}))})}}class Xs extends a.E{constructor(o,c,d,v){super(),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(v),this._data=c.data,this._options=a.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;let y=a.X/this.tileSize;c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*y,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*y,extent:a.X,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:a.X,radius:(c.clusterRadius||50)*y,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._updateWorkerData(),this}updateData(o){return this._updateWorkerData(o),this}getData(){return a._(this,void 0,void 0,function*(){let o=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:o})})}setClusterOptions(o){return this.workerOptions.cluster=o.cluster,o&&(o.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=o.clusterRadius),o.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=o.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(o){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:o,source:this.id}})}getClusterChildren(o){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:o,source:this.id}})}getClusterLeaves(o,c,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:o,limit:c,offset:d}})}_updateWorkerData(o){return a._(this,void 0,void 0,function*(){let c=a.e({type:this.type},this.workerOptions);o?c.dataDiff=o:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(w.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"}));try{let d=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let v=null;d.resourceTiming&&d.resourceTiming[this.id]&&(v=d.resourceTiming[this.id].slice(0));let y={dataType:"source"};this._collectResourceTiming&&v&&v.length>0&&a.e(y,{resourceTiming:v}),this.fire(new a.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new a.k("dataabort",{dataType:"source"}));this.fire(new a.j(d))}})}loaded(){return this._pendingLoads===0}loadTile(o){return a._(this,void 0,void 0,function*(){let c=o.actor?"RT":"LT";o.actor=this.actor;let d={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.abortController=new AbortController;let v=yield this.actor.sendAsync({type:c,data:d},o.abortController);delete o.abortController,o.unloadVectorData(),o.aborted||o.loadVectorData(v,this.map.painter,c==="RT")})}abortTile(o){return a._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.aborted=!0})}unloadTile(o){return a._(this,void 0,void 0,function*(){o.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ma=a.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class go extends a.E{constructor(o,c,d,v){super(),this.id=o,this.dispatcher=d,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=c}load(o){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let c=yield V.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,o&&(this.coordinates=o),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new a.j(c))}})}loaded(){return this._loaded}updateImage(o){return o.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=o.url,this.load(o.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(o){this.coordinates=o;let c=o.map(a.Z.fromLngLat);this.tileID=function(v){let y=1/0,I=1/0,A=-1/0,M=-1/0;for(let G of v)y=Math.min(y,G.x),I=Math.min(I,G.y),A=Math.max(A,G.x),M=Math.max(M,G.y);let D=Math.max(A-y,M-I),N=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),F=Math.pow(2,N);return new a.a1(N,Math.floor((y+A)/2*F),Math.floor((I+M)/2*F))}(c),this.minzoom=this.maxzoom=this.tileID.z;let d=c.map(v=>this.tileID.getTilePoint(v)._round());return this._boundsArray=new a.$,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,a.X,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,a.X),this._boundsArray.emplaceBack(d[2].x,d[2].y,a.X,a.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let o=this.map.painter.context,c=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,ma.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Le(o,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let d=!1;for(let v in this.tiles){let y=this.tiles[v];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(o){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={}):o.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Ss extends go{constructor(o,c,d,v){super(o,c,d,v),this.roundZoom=!0,this.type="video",this.options=c}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;let o=this.options;this.urls=[];for(let c of o.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{let c=yield a.a3(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new a.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){let c=this.video.seekable;o<c.start(0)||o>c.end(0)?this.fire(new a.j(new a.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let o=this.map.painter.context,c=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,ma.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new Le(o,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let d=!1;for(let v in this.tiles){let y=this.tiles[v];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class $i extends go{constructor(o,c,d,v){super(o,c,d,v),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(I=>typeof I!="number"))||this.fire(new a.j(new a.a2(`sources.${o}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new a.j(new a.a2(`sources.${o}`,null,"missing required property \"coordinates\""))),c.animate&&typeof c.animate!="boolean"&&this.fire(new a.j(new a.a2(`sources.${o}`,null,"optional \"animate\" property must be a boolean value"))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.a2(`sources.${o}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new a.j(new a.a2(`sources.${o}`,null,"missing required property \"canvas\""))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let c=this.map.painter.context,d=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,ma.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Le(c,this.canvas,d.RGBA,{premultiply:!0});let v=!1;for(let y in this.tiles){let I=this.tiles[y];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,v=!0)}v&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}let Ys={},Js=_=>{switch(_){case"geojson":return Xs;case"image":return go;case"raster":return Kt;case"raster-dem":return Cr;case"vector":return Ks;case"video":return Ss;case"canvas":return $i;}return Ys[_]},Fe="RTLPluginLoaded";class ga extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ws()}_syncState(o){return this.status=o,this.dispatcher.broadcast("SRPS",{pluginStatus:o,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(o){return a._(this,arguments,void 0,function*(c,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=w.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.k(Fe))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Wn=null;function ni(){return Wn||(Wn=new ga),Wn}class Gi{constructor(o,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=o,this.uid=a.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(o){let c=o+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(o,c,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(v,y){let I={};if(!y)return I;for(let A of v){let M=A.layerIds.map(D=>y.getLayer(D)).filter(Boolean);if(M.length!==0){A.layers=M,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(D=>M.filter(N=>N.id===D)[0]));for(let D of M)I[D.id]=A}}return I}(o.buckets,c.style),this.hasSymbolBuckets=!1;for(let v in this.buckets){let y=this.buckets[v];if(y instanceof a.a6){if(this.hasSymbolBuckets=!0,!d)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let v in this.buckets){let y=this.buckets[v];if(y instanceof a.a6&&y.hasRTLText){this.hasRTLText=!0,ni().lazyLoad();break}}this.queryPadding=0;for(let v in this.buckets){let y=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(v).queryRadius(y))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new a.a5}unloadVectorData(){for(let o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(let d in this.buckets){let v=this.buckets[d];v.uploadPending()&&v.upload(o)}let c=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Le(o,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Le(o,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,c,d,v,y,I,A,M,D,N){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:y,scale:I,tileSize:this.tileSize,pixelPosMatrix:N,transform:M,params:A,queryPadding:this.queryPadding*D},o,c,d):{}}querySourceFeatures(o,c){let d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;let v=d.loadVTLayers(),y=c&&c.sourceLayer?c.sourceLayer:"",I=v._geojsonTileLayer||v[y];if(!I)return;let A=a.a7(c&&c.filter),{z:M,x:D,y:N}=this.tileID.canonical,F={z:M,x:D,y:N};for(let G=0;G<I.length;G++){let Y=I.feature(G);if(A.needGeometry){let le=a.a8(Y,!0);if(!A.filter(new a.z(this.tileID.overscaledZ),le,this.tileID.canonical))continue}else if(!A.filter(new a.z(this.tileID.overscaledZ),Y))continue;let ee=d.getId(Y,y),ae=new a.a9(Y,M,D,N,ee);ae.tile=F,o.push(ae)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){let c=this.expirationTime;if(o.cacheControl){let d=a.aa(o.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){let d=Date.now(),v=!1;if(this.expirationTime>d)v=!1;else if(c){if(this.expirationTime<c)v=!0;else{let y=this.expirationTime-c;y?this.expirationTime=d+Math.max(y,3e4):v=!0}}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;let d=this.latestFeatureIndex.loadVTLayers();for(let v in this.buckets){if(!c.style.hasLayer(v))continue;let y=this.buckets[v],I=y.layers[0].sourceLayer||"_geojsonTileLayer",A=d[I],M=o[I];if(!A||!M||Object.keys(M).length===0)continue;y.update(M,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});let D=c&&c.style&&c.style.getLayer(v);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<w.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=w.now()+o}setDependencies(o,c){let d={};for(let v of c)d[v]=!0;this.dependencies[o]=d}hasDependency(o,c){for(let d of o){let v=this.dependencies[d];if(v){for(let y of c)if(v[y])return!0}}return!1}}class ze{constructor(o,c){this.max=o,this.onRemove=c,this.reset()}reset(){for(let o in this.data)for(let c of this.data[o])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(o,c,d){let v=o.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);let y={value:c,timeout:void 0};if(d!==void 0&&(y.timeout=setTimeout(()=>{this.remove(o,y)},d)),this.data[v].push(y),this.order.push(v),this.order.length>this.max){let I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){let c=this.data[o].shift();return c.timeout&&clearTimeout(c.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),c.value}getByKey(o){let c=this.data[o];return c?c[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,c){if(!this.has(o))return this;let d=o.wrapped().key,v=c===void 0?0:this.data[d].indexOf(c),y=this.data[d][v];return this.data[d].splice(v,1),y.timeout&&clearTimeout(y.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(y.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){let c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(o){let c=[];for(let d in this.data)for(let v of this.data[d])o(v.value)||c.push(v);for(let d of c)this.remove(d.value.tileID,d)}}class Ct{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,c,d){let v=String(c);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][v]=this.stateChanges[o][v]||{},a.e(this.stateChanges[o][v],d),this.deletedStates[o]===null){this.deletedStates[o]={};for(let y in this.state[o])y!==v&&(this.deletedStates[o][y]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][v]===null){this.deletedStates[o][v]={};for(let y in this.state[o][v])d[y]||(this.deletedStates[o][v][y]=null)}else for(let y in d)this.deletedStates[o]&&this.deletedStates[o][v]&&this.deletedStates[o][v][y]===null&&delete this.deletedStates[o][v][y]}removeFeatureState(o,c,d){if(this.deletedStates[o]===null)return;let v=String(c);if(this.deletedStates[o]=this.deletedStates[o]||{},d&&c!==void 0)this.deletedStates[o][v]!==null&&(this.deletedStates[o][v]=this.deletedStates[o][v]||{},this.deletedStates[o][v][d]=null);else if(c!==void 0){if(this.stateChanges[o]&&this.stateChanges[o][v])for(d in this.deletedStates[o][v]={},this.stateChanges[o][v])this.deletedStates[o][v][d]=null;else this.deletedStates[o][v]=null;}else this.deletedStates[o]=null}getState(o,c){let d=String(c),v=a.e({},(this.state[o]||{})[d],(this.stateChanges[o]||{})[d]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){let y=this.deletedStates[o][c];if(y===null)return{};for(let I in y)delete v[I]}return v}initializeTileState(o,c){o.setFeatureState(this.state,c)}coalesceChanges(o,c){let d={};for(let v in this.stateChanges){this.state[v]=this.state[v]||{};let y={};for(let I in this.stateChanges[v])this.state[v][I]||(this.state[v][I]={}),a.e(this.state[v][I],this.stateChanges[v][I]),y[I]=this.state[v][I];d[v]=y}for(let v in this.deletedStates){this.state[v]=this.state[v]||{};let y={};if(this.deletedStates[v]===null)for(let I in this.state[v])y[I]={},this.state[v][I]={};else for(let I in this.deletedStates[v]){if(this.deletedStates[v][I]===null)this.state[v][I]={};else for(let A of Object.keys(this.deletedStates[v][I]))delete this.state[v][I][A];y[I]=this.state[v][I]}d[v]=d[v]||{},a.e(d[v],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(let v in o)o[v].setFeatureState(d,c)}}class ft extends a.E{constructor(o,c,d){super(),this.id=o,this.dispatcher=d,this.on("data",v=>this._dataHandler(v)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((v,y,I,A)=>{let M=new(Js(y.type))(v,y,I,A);if(M.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${M.id}`);return M})(o,c,d,this),this._tiles={},this._cache=new ze(0,v=>this._unloadTile(v)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ct,this._didEmitContent=!1,this._updated=!1}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._maxTileCacheZoomLevels=o?o._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let o in this._tiles){let c=this._tiles[o];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,c,d){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(o),this._tileLoaded(o,c,d)}catch(v){o.state="errored",v.status!==404?this._source.fire(new a.j(v,{tile:o})):this.update(this.transform,this.terrain)}})}_unloadTile(o){this._source.unloadTile&&this._source.unloadTile(o)}_abortTile(o){this._source.abortTile&&this._source.abortTile(o),this._source.fire(new a.k("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let c in this._tiles){let d=this._tiles[c];d.upload(o),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(ii).map(o=>o.key)}getRenderableIds(o){let c=[];for(let d in this._tiles)this._isIdRenderable(d,o)&&c.push(this._tiles[d]);return o?c.sort((d,v)=>{let y=d.tileID,I=v.tileID,A=new a.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),M=new a.P(I.canonical.x,I.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-I.overscaledZ||M.y-A.y||M.x-A.x}).map(d=>d.tileID.key):c.map(d=>d.tileID).sort(ii).map(d=>d.key)}hasRenderableParent(o){let c=this.findLoadedParent(o,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(o,c){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(c||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")}}_reloadTile(o,c){return a._(this,void 0,void 0,function*(){let d=this._tiles[o];d&&(d.state!=="loading"&&(d.state=c),yield this._loadTile(d,o,c))})}_tileLoaded(o,c,d){o.timeAdded=w.now(),d==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(c,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){let c=this.getRenderableIds();for(let v=0;v<c.length;v++){let y=c[v];if(o.neighboringTiles&&o.neighboringTiles[y]){let I=this.getTileByID(y);d(o,I),d(I,o)}}function d(v,y){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let I=y.tileID.canonical.x-v.tileID.canonical.x,A=y.tileID.canonical.y-v.tileID.canonical.y,M=Math.pow(2,v.tileID.canonical.z),D=y.tileID.key;I===0&&A===0||Math.abs(A)>1||(Math.abs(I)>1&&(Math.abs(I+M)===1?I+=M:Math.abs(I-M)===1&&(I-=M)),y.dem&&v.dem&&(v.dem.backfillBorder(y.dem,I,A),v.neighboringTiles&&v.neighboringTiles[D]&&(v.neighboringTiles[D].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,c,d,v){for(let y in this._tiles){let I=this._tiles[y];if(v[y]||!I.hasData()||I.tileID.overscaledZ<=c||I.tileID.overscaledZ>d)continue;let A=I.tileID;for(;I&&I.tileID.overscaledZ>c+1;){let D=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[D.key],I&&I.hasData()&&(A=D)}let M=A;for(;M.overscaledZ>c;)if(M=M.scaledTo(M.overscaledZ-1),o[M.key]){v[A.key]=A;break}}}findLoadedParent(o,c){if(o.key in this._loadedParentTiles){let d=this._loadedParentTiles[o.key];return d&&d.tileID.overscaledZ>=c?d:null}for(let d=o.overscaledZ-1;d>=c;d--){let v=o.scaledTo(d),y=this._getLoadedTile(v);if(y)return y}}findLoadedSibling(o){return this._getLoadedTile(o)}_getLoadedTile(o){let c=this._tiles[o.key];return c&&c.hasData()?c:this._cache.getByKey(o.wrapped().key)}updateCacheSize(o){let c=Math.ceil(o.width/this._source.tileSize)+1,d=Math.ceil(o.height/this._source.tileSize)+1,v=Math.floor(c*d*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(y)}handleWrapJump(o){let c=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,c){let d={};for(let v in this._tiles){let y=this._tiles[v];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+c),d[y.tileID.key]=y}this._tiles=d;for(let v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(let v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}_updateCoveredAndRetainedTiles(o,c,d,v,y,I){let A={},M={},D=Object.keys(o),N=w.now();for(let F of D){let G=o[F],Y=this._tiles[F];if(!Y||Y.fadeEndTime!==0&&Y.fadeEndTime<=N)continue;let ee=this.findLoadedParent(G,c),ae=this.findLoadedSibling(G),le=ee||ae||null;le&&(this._addTile(le.tileID),A[le.tileID.key]=le.tileID),M[F]=G}this._retainLoadedChildren(M,v,d,o);for(let F in A)o[F]||(this._coveredTiles[F]=!0,o[F]=A[F]);if(I){let F={},G={};for(let Y of y)this._tiles[Y.key].hasData()?F[Y.key]=Y:G[Y.key]=Y;for(let Y in G){let ee=G[Y].children(this._source.maxzoom);this._tiles[ee[0].key]&&this._tiles[ee[1].key]&&this._tiles[ee[2].key]&&this._tiles[ee[3].key]&&(F[ee[0].key]=o[ee[0].key]=ee[0],F[ee[1].key]=o[ee[1].key]=ee[1],F[ee[2].key]=o[ee[2].key]=ee[2],F[ee[3].key]=o[ee[3].key]=ee[3],delete G[Y])}for(let Y in G){let ee=G[Y],ae=this.findLoadedParent(ee,this._source.minzoom),le=this.findLoadedSibling(ee),ce=ae||le||null;if(ce){F[ce.tileID.key]=o[ce.tileID.key]=ce.tileID;for(let fe in F)F[fe].isChildOf(ce.tileID)&&delete F[fe]}}for(let Y in this._tiles)F[Y]||(this._coveredTiles[Y]=!0)}}update(o,c){if(!this._sourceLoaded||this._paused)return;let d;this.transform=o,this.terrain=c,this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(N=>new a.S(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y)):(d=o.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(d=d.filter(N=>this._source.hasTile(N)))):d=[];let v=o.coveringZoomLevel(this._source),y=Math.max(v-ft.maxOverzooming,this._source.minzoom),I=Math.max(v+ft.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let N={};for(let F of d)if(F.canonical.z>this._source.minzoom){let G=F.scaledTo(F.canonical.z-1);N[G.key]=G;let Y=F.scaledTo(Math.max(this._source.minzoom,Math.min(F.canonical.z,5)));N[Y.key]=Y}d=d.concat(Object.values(N))}let A=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let M=this._updateRetainedTiles(d,v);Vr(this._source.type)&&this._updateCoveredAndRetainedTiles(M,y,I,v,d,c);for(let N in M)this._tiles[N].clearFadeHold();let D=a.ab(this._tiles,M);for(let N of D){let F=this._tiles[N];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(N)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)}_updateRetainedTiles(o,c){var d;let v={},y={},I=Math.max(c-ft.maxOverzooming,this._source.minzoom),A=Math.max(c+ft.maxUnderzooming,this._source.minzoom),M={};for(let D of o){let N=this._addTile(D);v[D.key]=D,N.hasData()||c<this._source.maxzoom&&(M[D.key]=D)}this._retainLoadedChildren(M,c,A,v);for(let D of o){let N=this._tiles[D.key];if(N.hasData())continue;if(c+1>this._source.maxzoom){let G=D.children(this._source.maxzoom)[0],Y=this.getTile(G);if(Y&&Y.hasData()){v[G.key]=G;continue}}else{let G=D.children(this._source.maxzoom);if(v[G[0].key]&&v[G[1].key]&&v[G[2].key]&&v[G[3].key])continue}let F=N.wasRequested();for(let G=D.overscaledZ-1;G>=I;--G){let Y=D.scaledTo(G);if(y[Y.key])break;if(y[Y.key]=!0,N=this.getTile(Y),!N&&F&&(N=this._addTile(Y)),N){let ee=N.hasData();if((ee||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||F)&&(v[Y.key]=Y),F=N.wasRequested(),ee)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let o in this._tiles){let c=[],d,v=this._tiles[o].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){d=this._loadedParentTiles[v.key];break}c.push(v.key);let y=v.scaledTo(v.overscaledZ-1);if(d=this._getLoadedTile(y),d)break;v=y}for(let y of c)this._loadedParentTiles[y]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let o in this._tiles){let c=this._tiles[o].tileID,d=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=d}}_addTile(o){let c=this._tiles[o.key];if(c)return c;c=this._cache.getAndRemove(o),c&&(this._setTileReloadTimer(o.key,c),c.tileID=o,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,c)));let d=c;return c||(c=new Gi(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(c,o.key,c.state)),c.uses++,this._tiles[o.key]=c,d||this._source.fire(new a.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(o,c){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);let d=c.getExpiryTimeout();d&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},d))}_removeTile(o){let c=this._tiles[o];c&&(c.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(o){let c=o.sourceDataType;o.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&o.dataType==="source"&&c==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,c,d){let v=[],y=this.transform;if(!y)return v;let I=d?y.getCameraQueryGeometry(o):o,A=o.map(ee=>y.pointCoordinate(ee,this.terrain)),M=I.map(ee=>y.pointCoordinate(ee,this.terrain)),D=this.getIds(),N=1/0,F=1/0,G=-1/0,Y=-1/0;for(let ee of M)N=Math.min(N,ee.x),F=Math.min(F,ee.y),G=Math.max(G,ee.x),Y=Math.max(Y,ee.y);for(let ee=0;ee<D.length;ee++){let ae=this._tiles[D[ee]];if(ae.holdingForFade())continue;let le=ae.tileID,ce=Math.pow(2,y.zoom-ae.tileID.overscaledZ),fe=c*ae.queryPadding*a.X/ae.tileSize/ce,re=[le.getTilePoint(new a.Z(N,F)),le.getTilePoint(new a.Z(G,Y))];if(re[0].x-fe<a.X&&re[0].y-fe<a.X&&re[1].x+fe>=0&&re[1].y+fe>=0){let ve=A.map(be=>le.getTilePoint(be)),ge=M.map(be=>le.getTilePoint(be));v.push({tile:ae,tileID:le,queryGeometry:ve,cameraQueryGeometry:ge,scale:ce})}}return v}getVisibleCoordinates(o){let c=this.getRenderableIds(o).map(d=>this._tiles[d].tileID);for(let d of c)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Vr(this._source.type)){let o=w.now();for(let c in this._tiles)if(this._tiles[c].fadeEndTime>=o)return!0}return!1}setFeatureState(o,c,d){this._state.updateState(o=o||"_geojsonTileLayer",c,d)}removeFeatureState(o,c,d){this._state.removeFeatureState(o=o||"_geojsonTileLayer",c,d)}getFeatureState(o,c){return this._state.getState(o=o||"_geojsonTileLayer",c)}setDependencies(o,c,d){let v=this._tiles[o];v&&v.setDependencies(c,d)}reloadTilesForDependencies(o,c){for(let d in this._tiles)this._tiles[d].hasDependency(o,c)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(o,c))}}function ii(_,o){let c=Math.abs(2*_.wrap)-+(_.wrap<0),d=Math.abs(2*o.wrap)-+(o.wrap<0);return _.overscaledZ-o.overscaledZ||d-c||o.canonical.y-_.canonical.y||o.canonical.x-_.canonical.x}function Vr(_){return _==="raster"||_==="image"||_==="video"}ft.maxOverzooming=10,ft.maxUnderzooming=3;class Tt{constructor(o,c){this.reset(o,c)}reset(o,c){this.points=o||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=a.ac(o,0,1);let c=1,d=this._distances[c],v=o*this.paddedLength+this.padding;for(;d<v&&c<this._distances.length;)d=this._distances[++c];let y=c-1,I=this._distances[y],A=d-I,M=A>0?(v-I)/A:0;return this.points[y].mult(1-M).add(this.points[c].mult(M))}}function jo(_,o){let c=!0;return _==="always"||_!=="never"&&o!=="never"||(c=!1),c}class Ts{constructor(o,c,d){let v=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(o/d),this.yCellCount=Math.ceil(c/d);for(let I=0;I<this.xCellCount*this.yCellCount;I++)v.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=c,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,c,d,v,y){this._forEachCell(c,d,v,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(y)}insertCircle(o,c,d,v){this._forEachCell(c-v,d-v,c+v,d+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(c),this.circles.push(d),this.circles.push(v)}_insertBoxCell(o,c,d,v,y,I){this.boxCells[y].push(I)}_insertCircleCell(o,c,d,v,y,I){this.circleCells[y].push(I)}_query(o,c,d,v,y,I,A){if(d<0||o>this.width||v<0||c>this.height)return[];let M=[];if(o<=0&&c<=0&&this.width<=d&&this.height<=v){if(y)return[{key:null,x1:o,y1:c,x2:d,y2:v}];for(let D=0;D<this.boxKeys.length;D++)M.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){let N=this.circles[3*D],F=this.circles[3*D+1],G=this.circles[3*D+2];M.push({key:this.circleKeys[D],x1:N-G,y1:F-G,x2:N+G,y2:F+G})}}else this._forEachCell(o,c,d,v,this._queryCell,M,{hitTest:y,overlapMode:I,seenUids:{box:{},circle:{}}},A);return M}query(o,c,d,v){return this._query(o,c,d,v,!1,null)}hitTest(o,c,d,v,y,I){return this._query(o,c,d,v,!0,y,I).length>0}hitTestCircle(o,c,d,v,y){let I=o-d,A=o+d,M=c-d,D=c+d;if(A<0||I>this.width||D<0||M>this.height)return!1;let N=[];return this._forEachCell(I,M,A,D,this._queryCellCircle,N,{hitTest:!0,overlapMode:v,circle:{x:o,y:c,radius:d},seenUids:{box:{},circle:{}}},y),N.length>0}_queryCell(o,c,d,v,y,I,A,M){let{seenUids:D,hitTest:N,overlapMode:F}=A,G=this.boxCells[y];if(G!==null){let ee=this.bboxes;for(let ae of G)if(!D.box[ae]){D.box[ae]=!0;let le=4*ae,ce=this.boxKeys[ae];if(o<=ee[le+2]&&c<=ee[le+3]&&d>=ee[le+0]&&v>=ee[le+1]&&(!M||M(ce))&&(!N||!jo(F,ce.overlapMode))&&(I.push({key:ce,x1:ee[le],y1:ee[le+1],x2:ee[le+2],y2:ee[le+3]}),N))return!0}}let Y=this.circleCells[y];if(Y!==null){let ee=this.circles;for(let ae of Y)if(!D.circle[ae]){D.circle[ae]=!0;let le=3*ae,ce=this.circleKeys[ae];if(this._circleAndRectCollide(ee[le],ee[le+1],ee[le+2],o,c,d,v)&&(!M||M(ce))&&(!N||!jo(F,ce.overlapMode))){let fe=ee[le],re=ee[le+1],ve=ee[le+2];if(I.push({key:ce,x1:fe-ve,y1:re-ve,x2:fe+ve,y2:re+ve}),N)return!0}}}return!1}_queryCellCircle(o,c,d,v,y,I,A,M){let{circle:D,seenUids:N,overlapMode:F}=A,G=this.boxCells[y];if(G!==null){let ee=this.bboxes;for(let ae of G)if(!N.box[ae]){N.box[ae]=!0;let le=4*ae,ce=this.boxKeys[ae];if(this._circleAndRectCollide(D.x,D.y,D.radius,ee[le+0],ee[le+1],ee[le+2],ee[le+3])&&(!M||M(ce))&&!jo(F,ce.overlapMode))return I.push(!0),!0}}let Y=this.circleCells[y];if(Y!==null){let ee=this.circles;for(let ae of Y)if(!N.circle[ae]){N.circle[ae]=!0;let le=3*ae,ce=this.circleKeys[ae];if(this._circlesCollide(ee[le],ee[le+1],ee[le+2],D.x,D.y,D.radius)&&(!M||M(ce))&&!jo(F,ce.overlapMode))return I.push(!0),!0}}}_forEachCell(o,c,d,v,y,I,A,M){let D=this._convertToXCellCoord(o),N=this._convertToYCellCoord(c),F=this._convertToXCellCoord(d),G=this._convertToYCellCoord(v);for(let Y=D;Y<=F;Y++)for(let ee=N;ee<=G;ee++)if(y.call(this,o,c,d,v,this.xCellCount*ee+Y,I,A,M))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,c,d,v,y,I){let A=v-o,M=y-c,D=d+I;return D*D>A*A+M*M}_circleAndRectCollide(o,c,d,v,y,I,A){let M=(I-v)/2,D=Math.abs(o-(v+M));if(D>M+d)return!1;let N=(A-y)/2,F=Math.abs(c-(y+N));if(F>N+d)return!1;if(D<=M||F<=N)return!0;let G=D-M,Y=F-N;return G*G+Y*Y<=d*d}}function Qs(_,o,c,d,v){let y=a.H();return o?(a.K(y,y,[1/v,1/v,1]),c||a.ad(y,y,d.angle)):a.L(y,d.labelPlaneMatrix,_),y}function Bo(_,o,c,d,v){if(o){let y=a.ae(_);return a.K(y,y,[v,v,1]),c||a.ad(y,y,-d.angle),y}return d.glCoordMatrix}function oe(_,o,c,d){let v;d?(v=[_,o,d(_,o),1],a.af(v,v,c)):(v=[_,o,0,1],Qt(v,v,c));let y=v[3];return{point:new a.P(v[0]/y,v[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function B(_,o){return .5+_/o*.5}function j(_,o){return _.x>=-o[0]&&_.x<=o[0]&&_.y>=-o[1]&&_.y<=o[1]}function J(_,o,c,d,v,y,I,A,M,D,N,F,G,Y,ee){let ae=d?_.textSizeData:_.iconSizeData,le=a.ag(ae,c.transform.zoom),ce=[256/c.width*2+1,256/c.height*2+1],fe=d?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;fe.clear();let re=_.lineVertexArray,ve=d?_.text.placedSymbolArray:_.icon.placedSymbolArray,ge=c.transform.width/c.transform.height,be=!1;for(let Pe=0;Pe<ve.length;Pe++){let ke=ve.get(Pe);if(ke.hidden||ke.writingMode===a.ah.vertical&&!be){ht(ke.numGlyphs,fe);continue}be=!1;let We=oe(ke.anchorX,ke.anchorY,o,ee);if(!j(We.point,ce)){ht(ke.numGlyphs,fe);continue}let et=B(c.transform.cameraToCenterDistance,We.signedDistanceFromCamera),Ve=a.ai(ae,le,ke),Be=I?Ve/et:Ve*et,at={getElevation:ee,labelPlaneMatrix:v,lineVertexArray:re,pitchWithMap:I,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:D,tileAnchorPoint:new a.P(ke.anchorX,ke.anchorY),unwrappedTileID:N,width:F,height:G,translation:Y},wt=me(at,ke,Be,!1,A,o,y,_.glyphOffsetArray,fe,ge,M);be=wt.useVertical,(wt.notEnoughRoom||be||wt.needsFlipping&&me(at,ke,Be,!0,A,o,y,_.glyphOffsetArray,fe,ge,M).notEnoughRoom)&&ht(ke.numGlyphs,fe)}d?_.text.dynamicLayoutVertexBuffer.updateData(fe):_.icon.dynamicLayoutVertexBuffer.updateData(fe)}function ie(_,o,c,d,v,y,I,A){let M=y.glyphStartIndex+y.numGlyphs,D=y.lineStartIndex,N=y.lineStartIndex+y.lineLength,F=o.getoffsetX(y.glyphStartIndex),G=o.getoffsetX(M-1),Y=je(_*F,c,d,v,y.segment,D,N,A,I);if(!Y)return null;let ee=je(_*G,c,d,v,y.segment,D,N,A,I);return ee?A.projectionCache.anyProjectionOccluded?null:{first:Y,last:ee}:null}function de(_,o,c,d){return _===a.ah.horizontal&&Math.abs(c.y-o.y)>Math.abs(c.x-o.x)*d?{useVertical:!0}:(_===a.ah.vertical?o.y<c.y:o.x>c.x)?{needsFlipping:!0}:null}function me(_,o,c,d,v,y,I,A,M,D,N){let F=c/24,G=o.lineOffsetX*F,Y=o.lineOffsetY*F,ee;if(o.numGlyphs>1){let ae=o.glyphStartIndex+o.numGlyphs,le=o.lineStartIndex,ce=o.lineStartIndex+o.lineLength,fe=ie(F,A,G,Y,d,o,N,_);if(!fe)return{notEnoughRoom:!0};let re=oe(fe.first.point.x,fe.first.point.y,I,_.getElevation).point,ve=oe(fe.last.point.x,fe.last.point.y,I,_.getElevation).point;if(v&&!d){let ge=de(o.writingMode,re,ve,D);if(ge)return ge}ee=[fe.first];for(let ge=o.glyphStartIndex+1;ge<ae-1;ge++)ee.push(je(F*A.getoffsetX(ge),G,Y,d,o.segment,le,ce,_,N));ee.push(fe.last)}else{if(v&&!d){let le=oe(_.tileAnchorPoint.x,_.tileAnchorPoint.y,y,_.getElevation).point,ce=o.lineStartIndex+o.segment+1,fe=new a.P(_.lineVertexArray.getx(ce),_.lineVertexArray.gety(ce)),re=oe(fe.x,fe.y,y,_.getElevation),ve=re.signedDistanceFromCamera>0?re.point:function(be,Pe,ke,We,et,Ve){return _e(be,Pe,ke,1,et,Ve)}(_.tileAnchorPoint,fe,le,0,y,_),ge=de(o.writingMode,le,ve,D);if(ge)return ge}let ae=je(F*A.getoffsetX(o.glyphStartIndex),G,Y,d,o.segment,o.lineStartIndex,o.lineStartIndex+o.lineLength,_,N);if(!ae||_.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ee=[ae]}for(let ae of ee)a.aj(M,ae.point,ae.angle);return{}}function _e(_,o,c,d,v,y){let I=_.add(_.sub(o)._unit()),A=v!==void 0?oe(I.x,I.y,v,y.getElevation).point:Te(I.x,I.y,y).point,M=c.sub(A);return c.add(M._mult(d/M.mag()))}function he(_,o,c){let d=o.projectionCache;if(d.projections[_])return d.projections[_];let v=new a.P(o.lineVertexArray.getx(_),o.lineVertexArray.gety(_)),y=Te(v.x,v.y,o);if(y.signedDistanceFromCamera>0)return d.projections[_]=y.point,d.anyProjectionOccluded=d.anyProjectionOccluded||y.isOccluded,y.point;let I=_-c.direction;return function(A,M,D,N,F){return _e(A,M,D,N,void 0,F)}(c.distanceFromAnchor===0?o.tileAnchorPoint:new a.P(o.lineVertexArray.getx(I),o.lineVertexArray.gety(I)),v,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,o)}function Te(_,o,c){let d=_+c.translation[0],v=o+c.translation[1],y;return!c.pitchWithMap&&c.projection.useSpecialProjectionForSymbols?(y=c.projection.projectTileCoordinates(d,v,c.unwrappedTileID,c.getElevation),y.point.x=(.5*y.point.x+.5)*c.width,y.point.y=(.5*-y.point.y+.5)*c.height):(y=oe(d,v,c.labelPlaneMatrix,c.getElevation),y.isOccluded=!1),y}function Me(_,o,c){return _._unit()._perp()._mult(o*c)}function we(_,o,c,d,v,y,I,A,M){if(A.projectionCache.offsets[_])return A.projectionCache.offsets[_];let D=c.add(o);if(_+M.direction<d||_+M.direction>=v)return A.projectionCache.offsets[_]=D,D;let N=he(_+M.direction,A,M),F=Me(N.sub(c),I,M.direction),G=c.add(F),Y=N.add(F);return A.projectionCache.offsets[_]=a.ak(y,D,G,Y)||D,A.projectionCache.offsets[_]}function je(_,o,c,d,v,y,I,A,M){let D=d?_-o:_+o,N=D>0?1:-1,F=0;d&&(N*=-1,F=Math.PI),N<0&&(F+=Math.PI);let G,Y=N>0?y+v:y+v+1;A.projectionCache.cachedAnchorPoint?G=A.projectionCache.cachedAnchorPoint:(G=Te(A.tileAnchorPoint.x,A.tileAnchorPoint.y,A).point,A.projectionCache.cachedAnchorPoint=G);let ee,ae,le=G,ce=G,fe=0,re=0,ve=Math.abs(D),ge=[],be;for(;fe+re<=ve;){if(Y+=N,Y<y||Y>=I)return null;fe+=re,ce=le,ae=ee;let We={absOffsetX:ve,direction:N,distanceFromAnchor:fe,previousVertex:ce};if(le=he(Y,A,We),c===0)ge.push(ce),be=le.sub(ce);else{let et,Ve=le.sub(ce);et=Ve.mag()===0?Me(he(Y+N,A,We).sub(le),c,N):Me(Ve,c,N),ae||(ae=ce.add(et)),ee=we(Y,et,le,y,I,ae,c,A,We),ge.push(ae),be=ee.sub(ae)}re=be.mag()}let Pe=be._mult((ve-fe)/re)._add(ae||ce),ke=F+Math.atan2(le.y-ce.y,le.x-ce.x);return ge.push(Pe),{point:Pe,angle:M?ke:0,path:ge}}let lt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ht(_,o){for(let c=0;c<_;c++){let d=o.length;o.resize(d+4),o.float32.set(lt,3*d)}}function Qt(_,o,c){let d=o[0],v=o[1];return _[0]=c[0]*d+c[4]*v+c[12],_[1]=c[1]*d+c[5]*v+c[13],_[3]=c[3]*d+c[7]*v+c[15],_}let At=100;class er{constructor(o,c,d=new Ts(o.width+200,o.height+200,25),v=new Ts(o.width+200,o.height+200,25)){this.transform=o,this.mapProjection=c,this.grid=d,this.ignoredGrid=v,this.pitchFactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+At,this.screenBottomBoundary=o.height+At,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,c,d,v,y,I,A,M,D,N,F){let G=o.anchorPointX+M[0],Y=o.anchorPointY+M[1],ee=this.projectAndGetPerspectiveRatio(v,G,Y,y,N),ae=d*ee.perspectiveRatio,le;if(I||A)le=this._projectCollisionBox(o,ae,v,y,I,A,M,ee,N,F);else{let ge=ee.point.x+(F?F.x*ae:0),be=ee.point.y+(F?F.y*ae:0);le={allPointsOccluded:!1,box:[ge+o.x1*ae,be+o.y1*ae,ge+o.x2*ae,be+o.y2*ae]}}let[ce,fe,re,ve]=le.box;return this.mapProjection.useSpecialProjectionForSymbols&&(I?le.allPointsOccluded:this.mapProjection.isOccluded(G,Y,y))||ee.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(ce,fe,re,ve)||c!=="always"&&this.grid.hitTest(ce,fe,re,ve,c,D)?{box:[ce,fe,re,ve],placeable:!1,offscreen:!1}:{box:[ce,fe,re,ve],placeable:!0,offscreen:this.isOffscreen(ce,fe,re,ve)}}placeCollisionCircles(o,c,d,v,y,I,A,M,D,N,F,G,Y,ee,ae,le){let ce=[],fe=new a.P(c.anchorX,c.anchorY),re=this.getPerspectiveRatio(I,fe.x,fe.y,A,le),ve=(F?y/re:y*re)/a.ap,ge={getElevation:le,labelPlaneMatrix:M,lineVertexArray:d,pitchWithMap:F,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:fe,unwrappedTileID:A,width:this.transform.width,height:this.transform.height,translation:ae},be=ie(ve,v,c.lineOffsetX*ve,c.lineOffsetY*ve,!1,c,!1,ge),Pe=!1,ke=!1,We=!0;if(be){let et=.5*Y*re+ee,Ve=new a.P(-100,-100),Be=new a.P(this.screenRightBoundary,this.screenBottomBoundary),at=new Tt,wt=be.first,$e=be.last,Xe=[];for(let Pt=wt.path.length-1;Pt>=1;Pt--)Xe.push(wt.path[Pt]);for(let Pt=1;Pt<$e.path.length;Pt++)Xe.push($e.path[Pt]);let _t=2.5*et;if(D){let Pt=this.projectPathToScreenSpace(Xe,ge,D);Xe=Pt.some(Vt=>Vt.signedDistanceFromCamera<=0)?[]:Pt.map(Vt=>Vt.point)}let Dr=[];if(Xe.length>0){let Pt=Xe[0].clone(),Vt=Xe[0].clone();for(let Lr=1;Lr<Xe.length;Lr++)Pt.x=Math.min(Pt.x,Xe[Lr].x),Pt.y=Math.min(Pt.y,Xe[Lr].y),Vt.x=Math.max(Vt.x,Xe[Lr].x),Vt.y=Math.max(Vt.y,Xe[Lr].y);Dr=Pt.x>=Ve.x&&Vt.x<=Be.x&&Pt.y>=Ve.y&&Vt.y<=Be.y?[Xe]:Vt.x<Ve.x||Pt.x>Be.x||Vt.y<Ve.y||Pt.y>Be.y?[]:a.al([Xe],Ve.x,Ve.y,Be.x,Be.y)}for(let Pt of Dr){at.reset(Pt,.25*et);let Vt=0;Vt=at.length<=.5*et?1:Math.ceil(at.paddedLength/_t)+1;for(let Lr=0;Lr<Vt;Lr++){let oi=Lr/Math.max(Vt-1,1),Eo=at.lerp(oi),kr=Eo.x+At,Zi=Eo.y+At;ce.push(kr,Zi,et,0);let Ti=kr-et,si=Zi-et,Ii=kr+et,Go=Zi+et;if(We=We&&this.isOffscreen(Ti,si,Ii,Go),ke=ke||this.isInsideGrid(Ti,si,Ii,Go),o!=="always"&&this.grid.hitTestCircle(kr,Zi,et,o,G)&&(Pe=!0,!N))return{circles:[],offscreen:!1,collisionDetected:Pe}}}}return{circles:!N&&Pe||!ke||re<this.perspectiveRatioCutoff?[]:ce,offscreen:We,collisionDetected:Pe}}projectPathToScreenSpace(o,c,d){return o.map(v=>oe(v.x,v.y,d,c.getElevation))}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let c=[],d=1/0,v=1/0,y=-1/0,I=-1/0;for(let N of o){let F=new a.P(N.x+At,N.y+At);d=Math.min(d,F.x),v=Math.min(v,F.y),y=Math.max(y,F.x),I=Math.max(I,F.y),c.push(F)}let A=this.grid.query(d,v,y,I).concat(this.ignoredGrid.query(d,v,y,I)),M={},D={};for(let N of A){let F=N.key;if(M[F.bucketInstanceId]===void 0&&(M[F.bucketInstanceId]={}),M[F.bucketInstanceId][F.featureIndex])continue;let G=[new a.P(N.x1,N.y1),new a.P(N.x2,N.y1),new a.P(N.x2,N.y2),new a.P(N.x1,N.y2)];a.am(c,G)&&(M[F.bucketInstanceId][F.featureIndex]=!0,D[F.bucketInstanceId]===void 0&&(D[F.bucketInstanceId]=[]),D[F.bucketInstanceId].push(F.featureIndex))}return D}insertCollisionBox(o,c,d,v,y,I){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:y,collisionGroupID:I,overlapMode:c},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,c,d,v,y,I){let A=d?this.ignoredGrid:this.grid,M={bucketInstanceId:v,featureIndex:y,collisionGroupID:I,overlapMode:c};for(let D=0;D<o.length;D+=4)A.insertCircle(M,o[D],o[D+1],o[D+2])}projectAndGetPerspectiveRatio(o,c,d,v,y){let I;y?(I=[c,d,y(c,d),1],a.af(I,I,o)):(I=[c,d,0,1],Qt(I,I,o));let A=I[3];return{point:new a.P((I[0]/A+1)/2*this.transform.width+At,(-I[1]/A+1)/2*this.transform.height+At),perspectiveRatio:.5+this.transform.cameraToCenterDistance/A*.5,isOccluded:!1,signedDistanceFromCamera:A}}getPerspectiveRatio(o,c,d,v,y){let I=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,d,v,y):oe(c,d,o,y);return .5+this.transform.cameraToCenterDistance/I.signedDistanceFromCamera*.5}isOffscreen(o,c,d,v){return d<At||o>=this.screenRightBoundary||v<At||c>this.screenBottomBoundary}isInsideGrid(o,c,d,v){return d>=0&&o<this.gridRightBoundary&&v>=0&&c<this.gridBottomBoundary}getViewportMatrix(){let o=a.an([]);return a.J(o,o,[-100,-100,0]),o}_projectCollisionBox(o,c,d,v,y,I,A,M,D,N){let F=new a.P(1,0),G=new a.P(0,1),Y=new a.P(o.anchorPointX+A[0],o.anchorPointY+A[1]);if(I&&!y){let We=this.projectAndGetPerspectiveRatio(d,Y.x+1,Y.y,v,D).point.sub(M.point).unit(),et=Math.atan(We.y/We.x)+(We.x<0?Math.PI:0),Ve=Math.sin(et),Be=Math.cos(et);F=new a.P(Be,Ve),G=new a.P(-Ve,Be)}else if(!I&&y){let We=-this.transform.angle,et=Math.sin(We),Ve=Math.cos(We);F=new a.P(Ve,et),G=new a.P(-et,Ve)}let ee=M.point,ae=c;if(y){ee=Y;let We=this.transform.zoom-Math.floor(this.transform.zoom);ae=Math.pow(2,-We),ae*=this.mapProjection.getPitchedTextCorrection(this.transform,Y,v),N||(ae*=a.ac(.5+M.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}N&&(ee=ee.add(F.mult(N.x*ae)).add(G.mult(N.y*ae)));let le=o.x1*ae,ce=o.x2*ae,fe=(le+ce)/2,re=o.y1*ae,ve=o.y2*ae,ge=(re+ve)/2,be=[{offsetX:le,offsetY:re},{offsetX:fe,offsetY:re},{offsetX:ce,offsetY:re},{offsetX:ce,offsetY:ge},{offsetX:ce,offsetY:ve},{offsetX:fe,offsetY:ve},{offsetX:le,offsetY:ve},{offsetX:le,offsetY:ge}],Pe=[];for(let{offsetX:We,offsetY:et}of be)Pe.push(new a.P(ee.x+F.x*We+G.x*et,ee.y+F.y*We+G.y*et));let ke=!1;if(y){let We=Pe.map(et=>this.projectAndGetPerspectiveRatio(d,et.x,et.y,v,D));ke=We.some(et=>!et.isOccluded),Pe=We.map(et=>et.point)}else ke=!0;return{box:a.ao(Pe),allPointsOccluded:!ke}}}function Ut(_,o,c){return o*(a.X/(_.tileSize*Math.pow(2,c-_.tileID.overscaledZ)))}class bn{constructor(o,c,d,v){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?c:-c))):v&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Yr{constructor(o,c,d,v,y){this.text=new bn(o?o.text:null,c,d,y),this.icon=new bn(o?o.icon:null,c,v,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Lt{constructor(o,c,d){this.text=o,this.icon=c,this.skipFade=d}}class fr{constructor(){this.invProjMatrix=a.H(),this.viewportMatrix=a.H(),this.circles=[]}}class jr{constructor(o,c,d,v,y){this.bucketInstanceId=o,this.featureIndex=c,this.sourceLayerIndex=d,this.bucketIndex=v,this.tileID=y}}class Rn{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){let c=++this.maxGroupID;this.collisionGroups[o]={ID:c,predicate:d=>d.collisionGroupID===c}}return this.collisionGroups[o]}}function Hn(_,o,c,d,v){let{horizontalAlign:y,verticalAlign:I}=a.au(_);return new a.P(-(y-.5)*o+d[0]*v,-(I-.5)*c+d[1]*v)}class Si{constructor(o,c,d,v,y,I){this.transform=o.clone(),this.terrain=d,this.collisionIndex=new er(this.transform,c),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new Rn(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(o){let c=this.terrain;return c?(d,v)=>c.getElevation(o,d,v):null}getBucketParts(o,c,d,v){let y=d.getBucket(c),I=d.latestFeatureIndex;if(!y||!I||c.id!==y.layerIds[0])return;let A=d.collisionBoxArray,M=y.layers[0].layout,D=y.layers[0].paint,N=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),F=d.tileSize/a.X,G=d.tileID.toUnwrapped(),Y=this.transform.calculatePosMatrix(G),ee=M.get("text-pitch-alignment")==="map",ae=M.get("text-rotation-alignment")==="map",le=Ut(d,1,this.transform.zoom),ce=this.collisionIndex.mapProjection.translatePosition(this.transform,d,D.get("text-translate"),D.get("text-translate-anchor")),fe=this.collisionIndex.mapProjection.translatePosition(this.transform,d,D.get("icon-translate"),D.get("icon-translate-anchor")),re=Qs(Y,ee,ae,this.transform,le),ve=null;if(ee){let be=Bo(Y,ee,ae,this.transform,le);ve=a.L([],this.transform.labelPlaneMatrix,be)}this.retainedQueryData[y.bucketInstanceId]=new jr(y.bucketInstanceId,I,y.sourceLayerIndex,y.index,d.tileID);let ge={bucket:y,layout:M,translationText:ce,translationIcon:fe,posMatrix:Y,unwrappedTileID:G,textLabelPlaneMatrix:re,labelToScreenMatrix:ve,scale:N,textPixelRatio:F,holdingForFade:d.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:a.ag(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(v)for(let be of y.sortKeyRanges){let{sortKey:Pe,symbolInstanceStart:ke,symbolInstanceEnd:We}=be;o.push({sortKey:Pe,symbolInstanceStart:ke,symbolInstanceEnd:We,parameters:ge})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:ge})}attemptAnchorPlacement(o,c,d,v,y,I,A,M,D,N,F,G,Y,ee,ae,le,ce,fe,re){let ve=a.aq[o.textAnchor],ge=[o.textOffset0,o.textOffset1],be=Hn(ve,d,v,ge,y),Pe=this.collisionIndex.placeCollisionBox(c,G,M,D,N,A,I,le,F.predicate,re,be);if((!fe||this.collisionIndex.placeCollisionBox(fe,G,M,D,N,A,I,ce,F.predicate,re,be).placeable)&&Pe.placeable){let ke;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID].text&&(ke=this.prevPlacement.variableOffsets[Y.crossTileID].anchor),Y.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Y.crossTileID]={textOffset:ge,width:d,height:v,anchor:ve,textBoxScale:y,prevAnchor:ke},this.markUsedJustification(ee,ve,Y,ae),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,ae,Y),this.placedOrientations[Y.crossTileID]=ae),{shift:be,placedGlyphBoxes:Pe}}}placeLayerBucketPart(o,c,d){let{bucket:v,layout:y,translationText:I,translationIcon:A,posMatrix:M,unwrappedTileID:D,textLabelPlaneMatrix:N,labelToScreenMatrix:F,textPixelRatio:G,holdingForFade:Y,collisionBoxArray:ee,partiallyEvaluatedTextSize:ae,collisionGroup:le}=o.parameters,ce=y.get("text-optional"),fe=y.get("icon-optional"),re=a.ar(y,"text-overlap","text-allow-overlap"),ve=re==="always",ge=a.ar(y,"icon-overlap","icon-allow-overlap"),be=ge==="always",Pe=y.get("text-rotation-alignment")==="map",ke=y.get("text-pitch-alignment")==="map",We=y.get("icon-text-fit")!=="none",et=y.get("symbol-z-order")==="viewport-y",Ve=ve&&(be||!v.hasIconData()||fe),Be=be&&(ve||!v.hasTextData()||ce);!v.collisionArrays&&ee&&v.deserializeCollisionBoxes(ee);let at=this._getTerrainElevationFunc(this.retainedQueryData[v.bucketInstanceId].tileID),wt=($e,Xe,_t)=>{var Dr,Pt;if(c[$e.crossTileID])return;if(Y)return void(this.placements[$e.crossTileID]=new Lt(!1,!1,!1));let Vt=!1,Lr=!1,oi=!0,Eo=null,kr={box:null,placeable:!1,offscreen:null},Zi={box:null,placeable:!1,offscreen:null},Ti=null,si=null,Ii=null,Go=0,Tc=0,pd=0;Xe.textFeatureIndex?Go=Xe.textFeatureIndex:$e.useRuntimeCollisionCircles&&(Go=$e.featureIndex),Xe.verticalTextFeatureIndex&&(Tc=Xe.verticalTextFeatureIndex);let Ic=Xe.textBox;if(Ic){let Ua=Zn=>{let ui=a.ah.horizontal;if(v.allowVerticalPlacement&&!Zn&&this.prevPlacement){let Ea=this.prevPlacement.placedOrientations[$e.crossTileID];Ea&&(this.placedOrientations[$e.crossTileID]=Ea,ui=Ea,this.markUsedOrientation(v,ui,$e))}return ui},Va=(Zn,ui)=>{if(v.allowVerticalPlacement&&$e.numVerticalGlyphVertices>0&&Xe.verticalTextBox){for(let Ea of v.writingModes)if(Ea===a.ah.vertical?(kr=ui(),Zi=kr):kr=Zn(),kr&&kr.placeable)break}else kr=Zn()},ru=$e.textAnchorOffsetStartIndex,So=$e.textAnchorOffsetEndIndex;if(So===ru){let Zn=(ui,Ea)=>{let Wt=this.collisionIndex.placeCollisionBox(ui,re,G,M,D,ke,Pe,I,le.predicate,at);return Wt&&Wt.placeable&&(this.markUsedOrientation(v,Ea,$e),this.placedOrientations[$e.crossTileID]=Ea),Wt};Va(()=>Zn(Ic,a.ah.horizontal),()=>{let ui=Xe.verticalTextBox;return v.allowVerticalPlacement&&$e.numVerticalGlyphVertices>0&&ui?Zn(ui,a.ah.vertical):{box:null,offscreen:null}}),Ua(kr&&kr.placeable)}else{let Zn=a.aq[(Pt=(Dr=this.prevPlacement)===null||Dr===void 0?void 0:Dr.variableOffsets[$e.crossTileID])===null||Pt===void 0?void 0:Pt.anchor],ui=(Wt,al,Cc)=>{let Ac=Wt.x2-Wt.x1,ub=Wt.y2-Wt.y1,Aq=$e.textBoxScale,lb=We&&ge==="never"?al:null,nu=null,cb=re==="never"?1:2,vd="never";Zn&&cb++;for(let _f=0;_f<cb;_f++){for(let md=ru;md<So;md++){let gd=v.textAnchorOffsets.get(md);if(Zn&&gd.textAnchor!==Zn)continue;let qc=this.attemptAnchorPlacement(gd,Wt,Ac,ub,Aq,Pe,ke,G,M,D,le,vd,$e,v,Cc,I,A,lb,at);if(qc&&(nu=qc.placedGlyphBoxes,nu&&nu.placeable))return Vt=!0,Eo=qc.shift,nu}Zn?Zn=null:vd=re}return d&&!nu&&(nu={box:this.collisionIndex.placeCollisionBox(Ic,"always",G,M,D,ke,Pe,I,le.predicate,at,new a.P(0,0)).box,offscreen:!1,placeable:!1}),nu};Va(()=>ui(Ic,Xe.iconBox,a.ah.horizontal),()=>{let Wt=Xe.verticalTextBox;return v.allowVerticalPlacement&&(!kr||!kr.placeable)&&$e.numVerticalGlyphVertices>0&&Wt?ui(Wt,Xe.verticalIconBox,a.ah.vertical):{box:null,occluded:!0,offscreen:null}}),kr&&(Vt=kr.placeable,oi=kr.offscreen);let Ea=Ua(kr&&kr.placeable);if(!Vt&&this.prevPlacement){let Wt=this.prevPlacement.variableOffsets[$e.crossTileID];Wt&&(this.variableOffsets[$e.crossTileID]=Wt,this.markUsedJustification(v,Wt.anchor,$e,Ea))}}}if(Ti=kr,Vt=Ti&&Ti.placeable,oi=Ti&&Ti.offscreen,$e.useRuntimeCollisionCircles){let Ua=v.text.placedSymbolArray.get($e.centerJustifiedTextSymbolIndex),Va=a.ai(v.textSizeData,ae,Ua),ru=y.get("text-padding");si=this.collisionIndex.placeCollisionCircles(re,Ua,v.lineVertexArray,v.glyphOffsetArray,Va,M,D,N,F,d,ke,le.predicate,$e.collisionCircleDiameter,ru,I,at),si.circles.length&&si.collisionDetected&&!d&&a.w("Collisions detected, but collision boxes are not shown"),Vt=ve||si.circles.length>0&&!si.collisionDetected,oi=oi&&si.offscreen}if(Xe.iconFeatureIndex&&(pd=Xe.iconFeatureIndex),Xe.iconBox){let Ua=Va=>this.collisionIndex.placeCollisionBox(Va,ge,G,M,D,ke,Pe,A,le.predicate,at,We&&Eo?Eo:void 0);Zi&&Zi.placeable&&Xe.verticalIconBox?(Ii=Ua(Xe.verticalIconBox),Lr=Ii.placeable):(Ii=Ua(Xe.iconBox),Lr=Ii.placeable),oi=oi&&Ii.offscreen}let Ba=ce||$e.numHorizontalGlyphVertices===0&&$e.numVerticalGlyphVertices===0,dd=fe||$e.numIconVertices===0;Ba||dd?dd?Ba||(Lr=Lr&&Vt):Vt=Lr&&Vt:Lr=Vt=Lr&&Vt;let ty=Lr&&Ii.placeable;if(Vt&&Ti.placeable&&this.collisionIndex.insertCollisionBox(Ti.box,re,y.get("text-ignore-placement"),v.bucketInstanceId,Zi&&Zi.placeable&&Tc?Tc:Go,le.ID),ty&&this.collisionIndex.insertCollisionBox(Ii.box,ge,y.get("icon-ignore-placement"),v.bucketInstanceId,pd,le.ID),si&&Vt&&this.collisionIndex.insertCollisionCircles(si.circles,re,y.get("text-ignore-placement"),v.bucketInstanceId,Go,le.ID),d&&this.storeCollisionData(v.bucketInstanceId,_t,Xe,Ti,Ii,si),$e.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[$e.crossTileID]=new Lt(Vt||Ve,Lr||Be,oi||v.justReloaded),c[$e.crossTileID]=!0};if(et){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let $e=v.getSortedSymbolIndexes(this.transform.angle);for(let Xe=$e.length-1;Xe>=0;--Xe){let _t=$e[Xe];wt(v.symbolInstances.get(_t),v.collisionArrays[_t],_t)}}else for(let $e=o.symbolInstanceStart;$e<o.symbolInstanceEnd;$e++)wt(v.symbolInstances.get($e),v.collisionArrays[$e],$e);if(d&&v.bucketInstanceId in this.collisionCircleArrays){let $e=this.collisionCircleArrays[v.bucketInstanceId];a.as($e.invProjMatrix,M),$e.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}storeCollisionData(o,c,d,v,y,I){if(d.textBox||d.iconBox){let A,M;this.collisionBoxArrays.has(o)?A=this.collisionBoxArrays.get(o):(A=new Map,this.collisionBoxArrays.set(o,A)),A.has(c)?M=A.get(c):(M={text:null,icon:null},A.set(c,M)),d.textBox&&(M.text=v.box),d.iconBox&&(M.icon=y.box)}if(I){let A=this.collisionCircleArrays[o];A===void 0&&(A=this.collisionCircleArrays[o]=new fr);for(let M=0;M<I.circles.length;M+=4)A.circles.push(I.circles[M+0]),A.circles.push(I.circles[M+1]),A.circles.push(I.circles[M+2]),A.circles.push(I.collisionDetected?1:0)}}markUsedJustification(o,c,d,v){let y;y=v===a.ah.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[a.at(c)];let I=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(let A of I)A>=0&&(o.text.placedSymbolArray.get(A).crossTileID=y>=0&&A!==y?0:d.crossTileID)}markUsedOrientation(o,c,d){let v=c===a.ah.horizontal||c===a.ah.horizontalOnly?c:0,y=c===a.ah.vertical?c:0,I=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(let A of I)o.text.placedSymbolArray.get(A).placedOrientation=v;d.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;let c=this.prevPlacement,d=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;let v=c?c.symbolFadeChange(o):1,y=c?c.opacities:{},I=c?c.variableOffsets:{},A=c?c.placedOrientations:{};for(let M in this.placements){let D=this.placements[M],N=y[M];N?(this.opacities[M]=new Yr(N,v,D.text,D.icon),d=d||D.text!==N.text.placed||D.icon!==N.icon.placed):(this.opacities[M]=new Yr(null,v,D.text,D.icon,D.skipFade),d=d||D.text||D.icon)}for(let M in y){let D=y[M];if(!this.opacities[M]){let N=new Yr(D,v,!1,!1);N.isHidden()||(this.opacities[M]=N,d=d||D.text.placed||D.icon.placed)}}for(let M in I)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=I[M]);for(let M in A)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=A[M]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:o)}updateLayerOpacities(o,c){let d={};for(let v of c){let y=v.getBucket(o);y&&v.latestFeatureIndex&&o.id===y.layerIds[0]&&this.updateBucketOpacities(y,v.tileID,d,v.collisionBoxArray)}}updateBucketOpacities(o,c,d,v){o.hasTextData()&&(o.text.opacityVertexArray.clear(),o.text.hasVisibleVertices=!1),o.hasIconData()&&(o.icon.opacityVertexArray.clear(),o.icon.hasVisibleVertices=!1),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();let y=o.layers[0],I=y.layout,A=new Yr(null,0,!1,!1,!0),M=I.get("text-allow-overlap"),D=I.get("icon-allow-overlap"),N=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),F=I.get("text-rotation-alignment")==="map",G=I.get("text-pitch-alignment")==="map",Y=I.get("icon-text-fit")!=="none",ee=new Yr(null,0,M&&(D||!o.hasIconData()||I.get("icon-optional")),D&&(M||!o.hasTextData()||I.get("text-optional")),!0);!o.collisionArrays&&v&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(v);let ae=(ce,fe,re)=>{for(let ve=0;ve<fe/4;ve++)ce.opacityVertexArray.emplaceBack(re);ce.hasVisibleVertices=ce.hasVisibleVertices||re!==ic},le=this.collisionBoxArrays.get(o.bucketInstanceId);for(let ce=0;ce<o.symbolInstances.length;ce++){let fe=o.symbolInstances.get(ce),{numHorizontalGlyphVertices:re,numVerticalGlyphVertices:ve,crossTileID:ge}=fe,be=this.opacities[ge];d[ge]?be=A:be||(be=ee,this.opacities[ge]=be),d[ge]=!0;let Pe=fe.numIconVertices>0,ke=this.placedOrientations[fe.crossTileID],We=ke===a.ah.vertical,et=ke===a.ah.horizontal||ke===a.ah.horizontalOnly;if(re>0||ve>0){let Be=xa(be.text);ae(o.text,re,We?ic:Be),ae(o.text,ve,et?ic:Be);let at=be.text.isHidden();[fe.rightJustifiedTextSymbolIndex,fe.centerJustifiedTextSymbolIndex,fe.leftJustifiedTextSymbolIndex].forEach(Xe=>{Xe>=0&&(o.text.placedSymbolArray.get(Xe).hidden=at||We?1:0)}),fe.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(fe.verticalPlacedTextSymbolIndex).hidden=at||et?1:0);let wt=this.variableOffsets[fe.crossTileID];wt&&this.markUsedJustification(o,wt.anchor,fe,ke);let $e=this.placedOrientations[fe.crossTileID];$e&&(this.markUsedJustification(o,"left",fe,$e),this.markUsedOrientation(o,$e,fe))}if(Pe){let Be=xa(be.icon),at=!(Y&&fe.verticalPlacedIconSymbolIndex&&We);fe.placedIconSymbolIndex>=0&&(ae(o.icon,fe.numIconVertices,at?Be:ic),o.icon.placedSymbolArray.get(fe.placedIconSymbolIndex).hidden=be.icon.isHidden()),fe.verticalPlacedIconSymbolIndex>=0&&(ae(o.icon,fe.numVerticalIconVertices,at?ic:Be),o.icon.placedSymbolArray.get(fe.verticalPlacedIconSymbolIndex).hidden=be.icon.isHidden())}let Ve=le&&le.has(ce)?le.get(ce):{text:null,icon:null};if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){let Be=o.collisionArrays[ce];if(Be){let at=new a.P(0,0);if(Be.textBox||Be.verticalTextBox){let wt=!0;if(N){let $e=this.variableOffsets[ge];$e?(at=Hn($e.anchor,$e.width,$e.height,$e.textOffset,$e.textBoxScale),F&&at._rotate(G?this.transform.angle:-this.transform.angle)):wt=!1}if(Be.textBox||Be.verticalTextBox){let $e;Be.textBox&&($e=We),Be.verticalTextBox&&($e=et),nc(o.textCollisionBox.collisionVertexArray,be.text.placed,!wt||$e,Ve.text,at.x,at.y)}}if(Be.iconBox||Be.verticalIconBox){let wt=!!(!et&&Be.verticalIconBox),$e;Be.iconBox&&($e=wt),Be.verticalIconBox&&($e=!wt),nc(o.iconCollisionBox.collisionVertexArray,be.icon.placed,$e,Ve.icon,Y?at.x:0,Y?at.y:0)}}}}if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);if(o.bucketInstanceId in this.collisionCircleArrays){let ce=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=ce.invProjMatrix,o.placementViewportMatrix=ce.viewportMatrix,o.collisionCircleArray=ce.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,c){let d=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*d>o}setStale(){this.stale=!0}}function nc(_,o,c,d,v,y){d&&d.length!==0||(d=[0,0,0,0]);let I=d[0]-At,A=d[1]-At,M=d[2]-At,D=d[3]-At;_.emplaceBack(o?1:0,c?1:0,v||0,y||0,I,A),_.emplaceBack(o?1:0,c?1:0,v||0,y||0,M,A),_.emplaceBack(o?1:0,c?1:0,v||0,y||0,M,D),_.emplaceBack(o?1:0,c?1:0,v||0,y||0,I,D)}let pr=Math.pow(2,25),fg=Math.pow(2,24),pg=Math.pow(2,17),ya=Math.pow(2,16),_a=Math.pow(2,9),rq=Math.pow(2,8),Na=Math.pow(2,1);function xa(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;let o=_.placed?1:0,c=Math.floor(127*_.opacity);return c*pr+o*fg+c*pg+o*ya+c*_a+o*rq+c*Na+o}let ic=0;function Hu(){return{isOccluded:(_,o,c)=>!1,getPitchedTextCorrection:(_,o,c)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(_,o,c,d){throw new Error("Not implemented.")},translatePosition:(_,o,c,d)=>function(v,y,I,A,M=!1){if(!I[0]&&!I[1])return[0,0];let D=M?A==="map"?v.angle:0:A==="viewport"?-v.angle:0;if(D){let N=Math.sin(D),F=Math.cos(D);I=[I[0]*F-I[1]*N,I[0]*N+I[1]*F]}return[M?I[0]:Ut(y,I[0],v.zoom),M?I[1]:Ut(y,I[1],v.zoom)]}(_,o,c,d),getCircleRadiusCorrection:_=>1}}class wn{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,c,d,v,y){let I=this._bucketParts;for(;this._currentTileIndex<o.length;)if(c.getBucketParts(I,v,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((A,M)=>A.sortKey-M.sortKey));this._currentPartIndex<I.length;)if(c.placeLayerBucketPart(I[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,y())return!0;return!1}}class ef{constructor(o,c,d,v,y,I,A,M){this.placement=new Si(o,Hu(),c,I,A,M),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(o,c,d){let v=w.now(),y=()=>!this._forceFullPlacement&&w.now()-v>2;for(;this._currentPlacementIndex>=0;){let I=c[o[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=A)&&(!I.maxzoom||I.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new wn(I)),this._inProgressLayer.continuePlacement(d[I.source],this.placement,this._showCollisionBoxes,I,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}let yo=512/a.X/2;class mn{constructor(o,c,d){this.tileID=o,this.bucketInstanceId=d,this._symbolsByKey={};let v=new Map;for(let y=0;y<c.length;y++){let I=c.get(y),A=I.key,M=v.get(A);M?M.push(I):v.set(A,[I])}for(let[y,I]of v){let A={positions:I.map(M=>({x:Math.floor(M.anchorX*yo),y:Math.floor(M.anchorY*yo)})),crossTileIDs:I.map(M=>M.crossTileID)};if(A.positions.length>128){let M=new a.av(A.positions.length,16,Uint16Array);for(let{x:D,y:N}of A.positions)M.add(D,N);M.finish(),delete A.positions,A.index=M}this._symbolsByKey[y]=A}}getScaledCoordinates(o,c){let{x:d,y:v,z:y}=this.tileID.canonical,{x:I,y:A,z:M}=c.canonical,D=yo/Math.pow(2,M-y),N=(A*a.X+o.anchorY)*D,F=v*a.X*yo;return{x:Math.floor((I*a.X+o.anchorX)*D-d*a.X*yo),y:Math.floor(N-F)}}findMatches(o,c,d){let v=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let y=0;y<o.length;y++){let I=o.get(y);if(I.crossTileID)continue;let A=this._symbolsByKey[I.key];if(!A)continue;let M=this.getScaledCoordinates(I,c);if(A.index){let D=A.index.range(M.x-v,M.y-v,M.x+v,M.y+v).sort();for(let N of D){let F=A.crossTileIDs[N];if(!d[F]){d[F]=!0,I.crossTileID=F;break}}}else if(A.positions)for(let D=0;D<A.positions.length;D++){let N=A.positions[D],F=A.crossTileIDs[D];if(Math.abs(N.x-M.x)<=v&&Math.abs(N.y-M.y)<=v&&!d[F]){d[F]=!0,I.crossTileID=F;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:o})=>o)}}class kp{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class _o{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){let c=Math.round((o-this.lng)/360);if(c!==0)for(let d in this.indexes){let v=this.indexes[d],y={};for(let I in v){let A=v[I];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+c),y[A.tileID.key]=A}this.indexes[d]=y}this.lng=o}addBucket(o,c,d){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let y=0;y<c.symbolInstances.length;y++)c.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});let v=this.usedCrossTileIDs[o.overscaledZ];for(let y in this.indexes){let I=this.indexes[y];if(Number(y)>o.overscaledZ)for(let A in I){let M=I[A];M.tileID.isChildOf(o)&&M.findMatches(c.symbolInstances,o,v)}else{let A=I[o.scaledTo(Number(y)).key];A&&A.findMatches(c.symbolInstances,o,v)}}for(let y=0;y<c.symbolInstances.length;y++){let I=c.symbolInstances.get(y);I.crossTileID||(I.crossTileID=d.generate(),v[I.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new mn(o,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(o,c){for(let d of c.getCrossTileIDsLists())for(let v of d)delete this.usedCrossTileIDs[o][v]}removeStaleBuckets(o){let c=!1;for(let d in this.indexes){let v=this.indexes[d];for(let y in v)o[v[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,v[y]),delete v[y],c=!0)}return c}}class dg{constructor(){this.layerIndexes={},this.crossTileIDs=new kp,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,c,d){let v=this.layerIndexes[o.id];v===void 0&&(v=this.layerIndexes[o.id]=new _o);let y=!1,I={};v.handleWrapJump(d);for(let A of c){let M=A.getBucket(o);M&&o.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(A.tileID,M,this.crossTileIDs)&&(y=!0),I[M.bucketInstanceId]=!0)}return v.removeStaleBuckets(I)&&(y=!0),y}pruneUnusedLayers(o){let c={};o.forEach(d=>{c[d]=!0});for(let d in this.layerIndexes)c[d]||delete this.layerIndexes[d]}}let xo=(_,o)=>a.t(_,o&&o.filter(c=>c.identifier!=="source.canvas")),nq=a.aw();class Np extends a.E{constructor(o,c={}){super(),this._rtlPluginLoaded=()=>{for(let d in this.sourceCaches){let v=this.sourceCaches[d].getSource().type;v!=="vector"&&v!=="geojson"||this.sourceCaches[d].reload()}},this.map=o,this.dispatcher=new an(ri(),o._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,v)=>this.getGlyphs(d,v)),this.dispatcher.registerMessageHandler("GI",(d,v)=>this.getImages(d,v)),this.imageManager=new Rt,this.imageManager.setEventedParent(this),this.glyphManager=new sr(o._requestManager,c.localIdeographFontFamily),this.lineAtlas=new va(256,512),this.crossTileSymbolIndex=new dg,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",a.ay()),ni().on(Fe,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;let v=this.sourceCaches[d.sourceId];if(!v)return;let y=v.getSource();if(y&&y.vectorLayerIds)for(let I in this._layers){let A=this._layers[I];A.source===y.id&&this._validateLayer(A)}})}loadURL(o,c={},d){this.fire(new a.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;let v=this.map._requestManager.transformRequest(o,"Style");this._loadStyleRequest=new AbortController;let y=this._loadStyleRequest;a.h(v,this._loadStyleRequest).then(I=>{this._loadStyleRequest=null,this._load(I.data,c,d)}).catch(I=>{this._loadStyleRequest=null,I&&!y.signal.aborted&&this.fire(new a.j(I))})}loadJSON(o,c={},d){this.fire(new a.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,w.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(o,c,d)}).catch(()=>{})}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(nq,{validate:!1})}_load(o,c,d){var v;let y=c.transformStyle?c.transformStyle(d,o):o;if(!c.validate||!xo(this,a.u(y))){this._loaded=!0,this.stylesheet=y;for(let I in y.sources)this.addSource(I,y.sources[I],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new Zt(this.stylesheet.light),this.sky=new nn(this.stylesheet.sky),this.map.setTerrain((v=this.stylesheet.terrain)!==null&&v!==void 0?v:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){let o=a.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",o),this._order=o.map(c=>c.id),this._layers={},this._serializedLayers=null;for(let c of o){let d=a.aA(c);d.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=d}}_loadSprite(o,c=!1,d=void 0){let v;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,I,A,M){return a._(this,void 0,void 0,function*(){let D=Ae(y),N=A>1?"@2x":"",F={},G={};for(let{id:Y,url:ee}of D){let ae=I.transformRequest(Ue(ee,N,".json"),"SpriteJSON");F[Y]=a.h(ae,M);let le=I.transformRequest(Ue(ee,N,".png"),"SpriteImage");G[Y]=V.getImage(le,M)}return yield Promise.all([...Object.values(F),...Object.values(G)]),function(Y,ee){return a._(this,void 0,void 0,function*(){let ae={};for(let le in Y){ae[le]={};let ce=w.getImageCanvasContext((yield ee[le]).data),fe=(yield Y[le]).data;for(let re in fe){let{width:ve,height:ge,x:be,y:Pe,sdf:ke,pixelRatio:We,stretchX:et,stretchY:Ve,content:Be,textFitWidth:at,textFitHeight:wt}=fe[re];ae[le][re]={data:null,pixelRatio:We,sdf:ke,stretchX:et,stretchY:Ve,content:Be,textFitWidth:at,textFitHeight:wt,spriteData:{width:ve,height:ge,x:be,y:Pe,context:ce}}}}return ae})}(F,G)})}(o,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(let I in y){this._spritesImagesIds[I]=[];let A=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter(M=>!(M in y)):[];for(let M of A)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(let M in y[I]){let D=I==="default"?M:`${I}:${M}`;this._spritesImagesIds[I].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,y[I][M],!1):this.imageManager.addImage(D,y[I][M]),c&&(this._changedImages[D]=!0)}}}).catch(y=>{this._spriteRequest=null,v=y,this.fire(new a.j(v))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),d&&d(v)})}_unloadSprite(){for(let o of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(o),this._changedImages[o]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(o){let c=this.sourceCaches[o.source];if(!c)return;let d=o.sourceLayer;if(!d)return;let v=c.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(d)===-1)&&this.fire(new a.j(new Error(`Source layer "${d}" does not exist on source "${v.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(o,c=!1){let d=this._serializedAllLayers();if(!o||o.length===0)return Object.values(c?a.aB(d):d);let v=[];for(let y of o)if(d[y]){let I=c?a.aB(d[y]):d[y];v.push(I)}return v}_serializedAllLayers(){let o=this._serializedLayers;if(o)return o;o=this._serializedLayers={};let c=Object.keys(this._layers);for(let d of c){let v=this._layers[d];v.type!=="custom"&&(o[d]=v.serialize())}return o}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(let o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(let o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;let c=this._changed;if(c){let v=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(v.length||y.length)&&this._updateWorkerLayers(v,y);for(let I in this._updatedSources){let A=this._updatedSources[I];if(A==="reload")this._reloadSource(I);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(I)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let I in this._updatedPaintProps)this._layers[I].updateTransitions(o);this.light.updateTransitions(o),this.sky.updateTransitions(o),this._resetUpdates()}let d={};for(let v in this.sourceCaches){let y=this.sourceCaches[v];d[v]=y.used,y.used=!1}for(let v of this._order){let y=this._layers[v];y.recalculate(o,this._availableImages),!y.isHidden(o.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(let v in d){let y=this.sourceCaches[v];!!d[v]!=!!y.used&&y.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(o),this.sky.recalculate(o),this.z=o.zoom,c&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){let o=Object.keys(this._changedImages);if(o.length){for(let c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(o,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(o,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(o,c={}){var d;this._checkLoaded();let v=this.serialize();if(o=c.transformStyle?c.transformStyle(v,o):o,((d=c.validate)===null||d===void 0||d)&&xo(this,a.u(o)))return!1;(o=a.aB(o)).layers=a.az(o.layers);let y=a.aC(v,o),I=this._getOperationsToPerform(y);if(I.unimplemented.length>0)throw new Error(`Unimplemented: ${I.unimplemented.join(", ")}.`);if(I.operations.length===0)return!1;for(let A of I.operations)A();return this.stylesheet=o,this._serializedLayers=null,!0}_getOperationsToPerform(o){let c=[],d=[];for(let v of o)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,v.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,v.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,v.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,v.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,v.args));break;case"addSource":c.push(()=>this.addSource.apply(this,v.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,v.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,v.args));break;case"setLight":c.push(()=>this.setLight.apply(this,v.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,v.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,v.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,v.args));break;case"setSky":c.push(()=>this.setSky.apply(this,v.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,v.args));break;case"setTransition":c.push(()=>{});break;default:d.push(v.command);}return{operations:c,unimplemented:d}}addImage(o,c){if(this.getImage(o))return this.fire(new a.j(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,c),this._afterImageUpdated(o)}updateImage(o,c){this.imageManager.updateImage(o,c)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new a.j(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,c,d={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(a.u.source,`sources.${o}`,c,null,d))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);let v=this.sourceCaches[o]=new ft(o,c,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:o})),v.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(let d in this._layers)if(this._layers[d].source===o)return this.fire(new a.j(new Error(`Source "${o}" cannot be removed while layer "${d}" is using it.`)));let c=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],c.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,c){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);let d=this.sourceCaches[o].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(c),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,c,d={}){this._checkLoaded();let v=o.id;if(this.getLayer(v))return void this.fire(new a.j(new Error(`Layer "${v}" already exists on this map.`)));let y;if(o.type==="custom"){if(xo(this,a.aD(o)))return;y=a.aA(o)}else{if("source"in o&&typeof o.source=="object"&&(this.addSource(v,o.source),o=a.aB(o),o=a.e(o,{source:v})),this._validate(a.u.layer,`layers.${v}`,o,{arrayIndex:-1},d))return;y=a.aA(o),this._validateLayer(y),y.setEventedParent(this,{layer:{id:v}})}let I=c?this._order.indexOf(c):this._order.length;if(c&&I===-1)this.fire(new a.j(new Error(`Cannot add layer "${v}" before non-existing layer "${c}".`)));else{if(this._order.splice(I,0,v),this._layerOrderChanged=!0,this._layers[v]=y,this._removedLayers[v]&&y.source&&y.type!=="custom"){let A=this._removedLayers[v];delete this._removedLayers[v],A.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(o,c){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new a.j(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===c)return;let d=this._order.indexOf(o);this._order.splice(d,1);let v=c?this._order.indexOf(c):this._order.length;c&&v===-1?this.fire(new a.j(new Error(`Cannot move layer "${o}" before non-existing layer "${c}".`))):(this._order.splice(v,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();let c=this._layers[o];if(!c)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${o}".`)));c.setEventedParent(null);let d=this._order.indexOf(o);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=c,delete this._layers[o],this._serializedLayers&&delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],c.onRemove&&c.onRemove(this.map)}getLayer(o){return this._layers[o]}getLayersOrder(){return[...this._order]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,c,d){this._checkLoaded();let v=this.getLayer(o);v?v.minzoom===c&&v.maxzoom===d||(c!=null&&(v.minzoom=c),d!=null&&(v.maxzoom=d),this._updateLayer(v)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,c,d={}){this._checkLoaded();let v=this.getLayer(o);if(v){if(!a.aE(v.filter,c))return c==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(a.u.filter,`layers.${v.id}.filter`,c,null,d)||(v.filter=a.aB(c),this._updateLayer(v)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return a.aB(this.getLayer(o).filter)}setLayoutProperty(o,c,d,v={}){this._checkLoaded();let y=this.getLayer(o);y?a.aE(y.getLayoutProperty(c),d)||(y.setLayoutProperty(c,d,v),this._updateLayer(y)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,c){let d=this.getLayer(o);if(d)return d.getLayoutProperty(c);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,c,d,v={}){this._checkLoaded();let y=this.getLayer(o);y?a.aE(y.getPaintProperty(c),d)||(y.setPaintProperty(c,d,v)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[o]=!0,this._serializedLayers=null):this.fire(new a.j(new Error(`Cannot style non-existing layer "${o}".`)))}getPaintProperty(o,c){return this.getLayer(o).getPaintProperty(c)}setFeatureState(o,c){this._checkLoaded();let d=o.source,v=o.sourceLayer,y=this.sourceCaches[d];if(y===void 0)return void this.fire(new a.j(new Error(`The source '${d}' does not exist in the map's style.`)));let I=y.getSource().type;I==="geojson"&&v?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||v?(o.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(v,o.id,c)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,c){this._checkLoaded();let d=o.source,v=this.sourceCaches[d];if(v===void 0)return void this.fire(new a.j(new Error(`The source '${d}' does not exist in the map's style.`)));let y=v.getSource().type,I=y==="vector"?o.sourceLayer:void 0;y!=="vector"||I?c&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(I,o.id,c):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();let c=o.source,d=o.sourceLayer,v=this.sourceCaches[c];if(v!==void 0)return v.getSource().type!=="vector"||d?(o.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),v.getFeatureState(d,o.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let o=a.aF(this.sourceCaches,y=>y.serialize()),c=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,v=this.stylesheet;return a.aG({version:v.version,name:v.name,metadata:v.metadata,light:v.light,sky:v.sky,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,sources:o,layers:c,terrain:d},y=>y!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(o){let c=I=>this._layers[I].type==="fill-extrusion",d={},v=[];for(let I=this._order.length-1;I>=0;I--){let A=this._order[I];if(c(A)){d[A]=I;for(let M of o){let D=M[A];if(D)for(let N of D)v.push(N)}}}v.sort((I,A)=>A.intersectionZ-I.intersectionZ);let y=[];for(let I=this._order.length-1;I>=0;I--){let A=this._order[I];if(c(A))for(let M=v.length-1;M>=0;M--){let D=v[M].feature;if(d[D.layer.id]<I)break;y.push(D),v.pop()}else for(let M of o){let D=M[A];if(D)for(let N of D)y.push(N.feature)}}return y}queryRenderedFeatures(o,c,d){c&&c.filter&&this._validate(a.u.filter,"queryRenderedFeatures.filter",c.filter,null,c);let v={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(let A of c.layers){let M=this._layers[A];if(!M)return this.fire(new a.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];v[M.source]=!0}}let y=[];c.availableImages=this._availableImages;let I=this._serializedAllLayers();for(let A in this.sourceCaches)c.layers&&!v[A]||y.push(ka(this.sourceCaches[A],this._layers,I,o,c,d));return this.placement&&y.push(function(A,M,D,N,F,G,Y){let ee={},ae=G.queryRenderedSymbols(N),le=[];for(let ce of Object.keys(ae).map(Number))le.push(Y[ce]);le.sort(Gn);for(let ce of le){let fe=ce.featureIndex.lookupSymbolFeatures(ae[ce.bucketInstanceId],M,ce.bucketIndex,ce.sourceLayerIndex,F.filter,F.layers,F.availableImages,A);for(let re in fe){let ve=ee[re]=ee[re]||[],ge=fe[re];ge.sort((be,Pe)=>{let ke=ce.featureSortOrder;if(ke){let We=ke.indexOf(be.featureIndex);return ke.indexOf(Pe.featureIndex)-We}return Pe.featureIndex-be.featureIndex});for(let be of ge)ve.push(be)}}for(let ce in ee)ee[ce].forEach(fe=>{let re=fe.feature,ve=D[A[ce].source].getFeatureState(re.layer["source-layer"],re.id);re.source=re.layer.source,re.layer["source-layer"]&&(re.sourceLayer=re.layer["source-layer"]),re.state=ve});return ee}(this._layers,I,this.sourceCaches,o,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(o,c){c&&c.filter&&this._validate(a.u.filter,"querySourceFeatures.filter",c.filter,null,c);let d=this.sourceCaches[o];return d?function(v,y){let I=v.getRenderableIds().map(D=>v.getTileByID(D)),A=[],M={};for(let D=0;D<I.length;D++){let N=I[D],F=N.tileID.canonical.key;M[F]||(M[F]=!0,N.querySourceFeatures(A,y))}return A}(d,c):[]}getLight(){return this.light.getLight()}setLight(o,c={}){this._checkLoaded();let d=this.light.getLight(),v=!1;for(let I in o)if(!a.aE(o[I],d[I])){v=!0;break}if(!v)return;let y={now:w.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,c),this.light.updateTransitions(y)}getSky(){var o;return(o=this.stylesheet)===null||o===void 0?void 0:o.sky}setSky(o,c={}){let d=this.getSky(),v=!1;if(!o&&!d)return;if(o&&!d)v=!0;else if(!o&&d)v=!0;else for(let I in o)if(!a.aE(o[I],d[I])){v=!0;break}if(!v)return;let y={now:w.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=o,this.sky.setSky(o,c),this.sky.updateTransitions(y)}_validate(o,c,d,v,y={}){return(!y||y.validate!==!1)&&xo(this,o.call(a.u,a.e({key:c,style:this.serialize(),value:d,styleSpec:a.v},v)))}_remove(o=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ni().off(Fe,this._rtlPluginLoaded);for(let c in this._layers)this._layers[c].setEventedParent(null);for(let c in this.sourceCaches){let d=this.sourceCaches[c];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),o&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(o)}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(let c in this.sourceCaches)this.sourceCaches[c].update(o,this.map.terrain)}_generateCollisionBoxes(){for(let o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,c,d,v,y=!1){let I=!1,A=!1,M={};for(let D of this._order){let N=this._layers[D];if(N.type!=="symbol")continue;if(!M[N.source]){let G=this.sourceCaches[N.source];M[N.source]=G.getRenderableIds(!0).map(Y=>G.getTileByID(Y)).sort((Y,ee)=>ee.tileID.overscaledZ-Y.tileID.overscaledZ||(Y.tileID.isLessThan(ee.tileID)?-1:1))}let F=this.crossTileSymbolIndex.addLayer(N,M[N.source],o.center.lng);I=I||F}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(w.now(),o.zoom))&&(this.pauseablePlacement=new ef(o,this.map.terrain,this._order,y,c,d,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(w.now()),A=!0),I&&this.pauseablePlacement.placement.setStale()),A||I)for(let D of this._order){let N=this._layers[D];N.type==="symbol"&&this.placement.updateLayerOpacities(N,M[N.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(w.now())}_releaseSymbolFadeTiles(){for(let o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,c){return a._(this,void 0,void 0,function*(){let d=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();let v=this.sourceCaches[c.source];return v&&v.setDependencies(c.tileID.key,c.type,c.icons),d})}getGlyphs(o,c){return a._(this,void 0,void 0,function*(){let d=yield this.glyphManager.getGlyphs(c.stacks),v=this.sourceCaches[c.source];return v&&v.setDependencies(c.tileID.key,c.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(o,c={}){this._checkLoaded(),o&&this._validate(a.u.glyphs,"glyphs",o,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=o,this.glyphManager.entries={},this.glyphManager.setURL(o))}addSprite(o,c,d={},v){this._checkLoaded();let y=[{id:o,url:c}],I=[...Ae(this.stylesheet.sprite),...y];this._validate(a.u.sprite,"sprite",I,null,d)||(this.stylesheet.sprite=I,this._loadSprite(y,!0,v))}removeSprite(o){this._checkLoaded();let c=Ae(this.stylesheet.sprite);if(c.find(d=>d.id===o)){if(this._spritesImagesIds[o])for(let d of this._spritesImagesIds[o])this.imageManager.removeImage(d),this._changedImages[d]=!0;c.splice(c.findIndex(d=>d.id===o),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[o],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${o}" doesn't exists on this map.`)))}getSprite(){return Ae(this.stylesheet.sprite)}setSprite(o,c={},d){this._checkLoaded(),o&&this._validate(a.u.sprite,"sprite",o,null,c)||(this.stylesheet.sprite=o,o?this._loadSprite(o,!0,d):(this._unloadSprite(),d&&d(null)))}}var Zu=a.Y([{name:"a_pos",type:"Int16",components:2}]);let eu={prelude:ar(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:ar(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ar(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ar(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ar("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ar(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:ar(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ar("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ar("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ar("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:ar(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:ar(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:ar(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:ar(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ar(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ar(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ar(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ar(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ar(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ar(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ar(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ar(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:ar(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ar(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ar(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ar(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ar("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ar("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ar("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:ar("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ar(_,o){let c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=o.match(/attribute ([\w]+) ([\w]+)/g),v=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=y?y.concat(v):v,A={};return{fragmentSource:_=_.replace(c,(M,D,N,F,G)=>(A[G]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${G}
varying ${N} ${F} ${G};
#else
uniform ${N} ${F} u_${G};
#endif
`:`
#ifdef HAS_UNIFORM_u_${G}
    ${N} ${F} ${G} = u_${G};
#endif
`)),vertexSource:o=o.replace(c,(M,D,N,F,G)=>{let Y=F==="float"?"vec2":"vec4",ee=G.match(/color/)?"color":Y;return A[G]?D==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${N} ${Y} a_${G};
varying ${N} ${F} ${G};
#else
uniform ${N} ${F} u_${G};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = a_${G};
#else
    ${N} ${F} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = unpack_mix_${ee}(a_${G}, u_${G}_t);
#else
    ${N} ${F} ${G} = u_${G};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${N} ${Y} a_${G};
#else
uniform ${N} ${F} u_${G};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${N} ${F} ${G} = a_${G};
#else
    ${N} ${F} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${N} ${F} ${G} = unpack_mix_${ee}(a_${G}, u_${G}_t);
#else
    ${N} ${F} ${G} = u_${G};
#endif
`}),staticAttributes:d,staticUniforms:I}}class vg{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,c,d,v,y,I,A,M,D){this.context=o;let N=this.boundPaintVertexBuffers.length!==v.length;for(let F=0;!N&&F<v.length;F++)this.boundPaintVertexBuffers[F]!==v[F]&&(N=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==d||N||this.boundIndexBuffer!==y||this.boundVertexOffset!==I||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==D?this.freshBind(c,d,v,y,I,A,M,D):(o.bindVertexArray.set(this.vao),A&&A.bind(),y&&y.dynamicDraw&&y.bind(),M&&M.bind(),D&&D.bind())}freshBind(o,c,d,v,y,I,A,M){let D=o.numAttributes,N=this.context,F=N.gl;this.vao&&this.destroy(),this.vao=N.createVertexArray(),N.bindVertexArray.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=v,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=I,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=M,c.enableAttributes(F,o);for(let G of d)G.enableAttributes(F,o);I&&I.enableAttributes(F,o),A&&A.enableAttributes(F,o),M&&M.enableAttributes(F,o),c.bind(),c.setVertexAttribPointers(F,o,y);for(let G of d)G.bind(),G.setVertexAttribPointers(F,o,y);I&&(I.bind(),I.setVertexAttribPointers(F,o,y)),v&&v.bind(),A&&(A.bind(),A.setVertexAttribPointers(F,o,y)),M&&(M.bind(),M.setVertexAttribPointers(F,o,y)),N.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let mg=(_,o,c,d,v)=>({u_matrix:_,u_texture:0,u_ele_delta:o,u_fog_matrix:c,u_fog_color:d?d.properties.get("fog-color"):a.aM.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:d?d.calculateFogBlendOpacity(v):0,u_horizon_color:d?d.properties.get("horizon-color"):a.aM.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1});function ac(_){let o=[];for(let c=0;c<_.length;c++){if(_[c]===null)continue;let d=_[c].split(" ");o.push(d.pop())}return o}class gg{constructor(o,c,d,v,y,I){let A=o.gl;this.program=A.createProgram();let M=ac(c.staticAttributes),D=d?d.getBinderAttributes():[],N=M.concat(D),F=eu.prelude.staticUniforms?ac(eu.prelude.staticUniforms):[],G=c.staticUniforms?ac(c.staticUniforms):[],Y=d?d.getBinderUniforms():[],ee=F.concat(G).concat(Y),ae=[];for(let be of ee)ae.indexOf(be)<0&&ae.push(be);let le=d?d.defines():[];y&&le.push("#define OVERDRAW_INSPECTOR;"),I&&le.push("#define TERRAIN3D;");let ce=le.concat(eu.prelude.fragmentSource,c.fragmentSource).join(`
`),fe=le.concat(eu.prelude.vertexSource,c.vertexSource).join(`
`),re=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(re,ce),A.compileShader(re),!A.getShaderParameter(re,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(re)}`);A.attachShader(this.program,re);let ve=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(ve,fe),A.compileShader(ve),!A.getShaderParameter(ve,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(ve)}`);A.attachShader(this.program,ve),this.attributes={};let ge={};this.numAttributes=N.length;for(let be=0;be<this.numAttributes;be++)N[be]&&(A.bindAttribLocation(this.program,be,N[be]),this.attributes[N[be]]=be);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(ve),A.deleteShader(re);for(let be=0;be<ae.length;be++){let Pe=ae[be];if(Pe&&!ge[Pe]){let ke=A.getUniformLocation(this.program,Pe);ke&&(ge[Pe]=ke)}}this.fixedUniforms=v(o,ge),this.terrainUniforms=((be,Pe)=>({u_depth:new a.aH(be,Pe.u_depth),u_terrain:new a.aH(be,Pe.u_terrain),u_terrain_dim:new a.aI(be,Pe.u_terrain_dim),u_terrain_matrix:new a.aJ(be,Pe.u_terrain_matrix),u_terrain_unpack:new a.aK(be,Pe.u_terrain_unpack),u_terrain_exaggeration:new a.aI(be,Pe.u_terrain_exaggeration)}))(o,ge),this.binderUniforms=d?d.getUniforms(o,ge):[]}draw(o,c,d,v,y,I,A,M,D,N,F,G,Y,ee,ae,le,ce,fe){let re=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(d),o.setStencilMode(v),o.setColorMode(y),o.setCullFace(I),M){o.activeTexture.set(re.TEXTURE2),re.bindTexture(re.TEXTURE_2D,M.depthTexture),o.activeTexture.set(re.TEXTURE3),re.bindTexture(re.TEXTURE_2D,M.texture);for(let ge in this.terrainUniforms)this.terrainUniforms[ge].set(M[ge])}for(let ge in this.fixedUniforms)this.fixedUniforms[ge].set(A[ge]);ae&&ae.setUniforms(o,this.binderUniforms,Y,{zoom:ee});let ve=0;switch(c){case re.LINES:ve=2;break;case re.TRIANGLES:ve=3;break;case re.LINE_STRIP:ve=1;}for(let ge of G.get()){let be=ge.vaos||(ge.vaos={});(be[D]||(be[D]=new vg)).bind(o,this,N,ae?ae.getPaintVertexBuffers():[],F,ge.vertexOffset,le,ce,fe),re.drawElements(c,ge.primitiveLength*ve,re.UNSIGNED_SHORT,ge.primitiveOffset*ve*2)}}}function Fp(_,o,c){let d=1/Ut(c,1,o.transform.tileZoom),v=Math.pow(2,c.tileID.overscaledZ),y=c.tileSize*Math.pow(2,o.transform.tileZoom)/v,I=y*(c.tileID.canonical.x+c.tileID.wrap*v),A=y*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[d,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[I>>16,A>>16],u_pixel_coord_lower:[65535&I,65535&A]}}let tf=(_,o,c,d)=>{let v=o.style.light,y=v.properties.get("position"),I=[y.x,y.y,y.z],A=function(){var D=new a.A(9);return a.A!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D}();v.properties.get("anchor")==="viewport"&&function(D,N){var F=Math.sin(N),G=Math.cos(N);D[0]=G,D[1]=F,D[2]=0,D[3]=-F,D[4]=G,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(A,-o.transform.angle),function(D,N,F){var G=N[0],Y=N[1],ee=N[2];D[0]=G*F[0]+Y*F[3]+ee*F[6],D[1]=G*F[1]+Y*F[4]+ee*F[7],D[2]=G*F[2]+Y*F[5]+ee*F[8]}(I,I,A);let M=v.properties.get("color");return{u_matrix:_,u_lightpos:I,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+c,u_opacity:d}},zp=(_,o,c,d,v,y,I)=>a.e(tf(_,o,c,d),Fp(y,o,I),{u_height_factor:-Math.pow(2,v.overscaledZ)/I.tileSize/8}),oc=_=>({u_matrix:_}),q1=(_,o,c,d)=>a.e(oc(_),Fp(c,o,d)),iq=(_,o)=>({u_matrix:_,u_world:o}),P1=(_,o,c,d,v)=>a.e(q1(_,o,c,d),{u_world:v}),aq=(_,o,c,d)=>{let v=_.transform,y,I;if(d.paint.get("circle-pitch-alignment")==="map"){let A=Ut(c,1,v.zoom);y=!0,I=[A,A]}else y=!1,I=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(o.posMatrix,c,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:I}},Ku=(_,o,c)=>({u_matrix:_,u_inv_matrix:o,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}),rf=(_,o,c=1)=>({u_matrix:_,u_color:o,u_overlay:0,u_overlay_scale:c}),Wi=_=>({u_matrix:_}),Hi=(_,o,c,d)=>({u_matrix:_,u_extrude_scale:Ut(o,1,c),u_intensity:d}),jp=(_,o,c,d)=>{let v=a.H();a.aP(v,0,_.width,_.height,0,0,1);let y=_.context.gl;return{u_matrix:v,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:c,u_color_ramp:d,u_opacity:o.paint.get("heatmap-opacity")}};function Bp(_,o){let c=Math.pow(2,o.canonical.z),d=o.canonical.y;return[new a.Z(0,d/c).toLngLat().lat,new a.Z(0,(d+1)/c).toLngLat().lat]}let Up=(_,o,c,d)=>{let v=_.transform;return{u_matrix:R1(_,o,c,d),u_ratio:1/Ut(o,1,v.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},M1=(_,o,c,d,v)=>a.e(Up(_,o,c,v),{u_image:0,u_image_height:d}),sc=(_,o,c,d,v)=>{let y=_.transform,I=O1(o,y);return{u_matrix:R1(_,o,c,v),u_texsize:o.imageAtlasTexture.size,u_ratio:1/Ut(o,1,y.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[I,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},oq=(_,o,c,d,v,y)=>{let I=_.lineAtlas,A=O1(o,_.transform),M=c.layout.get("line-cap")==="round",D=I.getDash(d.from,M),N=I.getDash(d.to,M),F=D.width*v.fromScale,G=N.width*v.toScale;return a.e(Up(_,o,c,y),{u_patternscale_a:[A/F,-D.height/2],u_patternscale_b:[A/G,-N.height/2],u_sdfgamma:I.width/(256*Math.min(F,G)*_.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:N.y,u_mix:v.t})};function O1(_,o){return 1/Ut(_,1,o.tileZoom)}function R1(_,o,c,d){return _.translatePosMatrix(d?d.posMatrix:o.tileID.posMatrix,o,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}let sq=(_,o,c,d,v)=>{return{u_matrix:_,u_tl_parent:o,u_scale_parent:c,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(I=v.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(y=v.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:uq(v.paint.get("raster-hue-rotate"))};var y,I};function uq(_){_*=Math.PI/180;let o=Math.sin(_),c=Math.cos(_);return[(2*c+1)/3,(-Math.sqrt(3)*o-c+1)/3,(Math.sqrt(3)*o-c+1)/3]}let D1=(_,o,c,d,v,y,I,A,M,D,N,F,G,Y)=>{let ee=I.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:ee.cameraToCenterDistance,u_pitch:ee.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:ee.width/ee.height,u_fade_change:I.options.fadeDuration?I.symbolFadeChange:1,u_matrix:A,u_label_plane_matrix:M,u_coord_matrix:D,u_is_text:+F,u_pitch_with_map:+d,u_is_along_line:v,u_is_variable_anchor:y,u_texsize:G,u_texture:0,u_translation:N,u_pitched_scale:Y}},nf=(_,o,c,d,v,y,I,A,M,D,N,F,G,Y,ee)=>{let ae=I.transform;return a.e(D1(_,o,c,d,v,y,I,A,M,D,N,F,G,ee),{u_gamma_scale:d?Math.cos(ae._pitch)*ae.cameraToCenterDistance:1,u_device_pixel_ratio:I.pixelRatio,u_is_halo:+Y})},yg=(_,o,c,d,v,y,I,A,M,D,N,F,G,Y)=>a.e(nf(_,o,c,d,v,y,I,A,M,D,N,!0,F,!0,Y),{u_texsize_icon:G,u_texture_icon:1}),Vp=(_,o,c)=>({u_matrix:_,u_opacity:o,u_color:c}),_g=(_,o,c,d,v,y)=>a.e(function(I,A,M,D){let N=M.imageManager.getPattern(I.from.toString()),F=M.imageManager.getPattern(I.to.toString()),{width:G,height:Y}=M.imageManager.getPixelSize(),ee=Math.pow(2,D.tileID.overscaledZ),ae=D.tileSize*Math.pow(2,M.transform.tileZoom)/ee,le=ae*(D.tileID.canonical.x+D.tileID.wrap*ee),ce=ae*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:N.tl,u_pattern_br_a:N.br,u_pattern_tl_b:F.tl,u_pattern_br_b:F.br,u_texsize:[G,Y],u_mix:A.t,u_pattern_size_a:N.displaySize,u_pattern_size_b:F.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/Ut(D,1,M.transform.tileZoom),u_pixel_coord_upper:[le>>16,ce>>16],u_pixel_coord_lower:[65535&le,65535&ce]}}(d,y,c,v),{u_matrix:_,u_opacity:o}),xg={fillExtrusion:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_lightpos:new a.aN(_,o.u_lightpos),u_lightintensity:new a.aI(_,o.u_lightintensity),u_lightcolor:new a.aN(_,o.u_lightcolor),u_vertical_gradient:new a.aI(_,o.u_vertical_gradient),u_opacity:new a.aI(_,o.u_opacity)}),fillExtrusionPattern:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_lightpos:new a.aN(_,o.u_lightpos),u_lightintensity:new a.aI(_,o.u_lightintensity),u_lightcolor:new a.aN(_,o.u_lightcolor),u_vertical_gradient:new a.aI(_,o.u_vertical_gradient),u_height_factor:new a.aI(_,o.u_height_factor),u_image:new a.aH(_,o.u_image),u_texsize:new a.aO(_,o.u_texsize),u_pixel_coord_upper:new a.aO(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(_,o.u_pixel_coord_lower),u_scale:new a.aN(_,o.u_scale),u_fade:new a.aI(_,o.u_fade),u_opacity:new a.aI(_,o.u_opacity)}),fill:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix)}),fillPattern:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_image:new a.aH(_,o.u_image),u_texsize:new a.aO(_,o.u_texsize),u_pixel_coord_upper:new a.aO(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(_,o.u_pixel_coord_lower),u_scale:new a.aN(_,o.u_scale),u_fade:new a.aI(_,o.u_fade)}),fillOutline:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_world:new a.aO(_,o.u_world)}),fillOutlinePattern:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_world:new a.aO(_,o.u_world),u_image:new a.aH(_,o.u_image),u_texsize:new a.aO(_,o.u_texsize),u_pixel_coord_upper:new a.aO(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(_,o.u_pixel_coord_lower),u_scale:new a.aN(_,o.u_scale),u_fade:new a.aI(_,o.u_fade)}),circle:(_,o)=>({u_camera_to_center_distance:new a.aI(_,o.u_camera_to_center_distance),u_scale_with_map:new a.aH(_,o.u_scale_with_map),u_pitch_with_map:new a.aH(_,o.u_pitch_with_map),u_extrude_scale:new a.aO(_,o.u_extrude_scale),u_device_pixel_ratio:new a.aI(_,o.u_device_pixel_ratio),u_matrix:new a.aJ(_,o.u_matrix)}),collisionBox:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_pixel_extrude_scale:new a.aO(_,o.u_pixel_extrude_scale)}),collisionCircle:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_inv_matrix:new a.aJ(_,o.u_inv_matrix),u_camera_to_center_distance:new a.aI(_,o.u_camera_to_center_distance),u_viewport_size:new a.aO(_,o.u_viewport_size)}),debug:(_,o)=>({u_color:new a.aL(_,o.u_color),u_matrix:new a.aJ(_,o.u_matrix),u_overlay:new a.aH(_,o.u_overlay),u_overlay_scale:new a.aI(_,o.u_overlay_scale)}),clippingMask:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix)}),heatmap:(_,o)=>({u_extrude_scale:new a.aI(_,o.u_extrude_scale),u_intensity:new a.aI(_,o.u_intensity),u_matrix:new a.aJ(_,o.u_matrix)}),heatmapTexture:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_world:new a.aO(_,o.u_world),u_image:new a.aH(_,o.u_image),u_color_ramp:new a.aH(_,o.u_color_ramp),u_opacity:new a.aI(_,o.u_opacity)}),hillshade:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_image:new a.aH(_,o.u_image),u_latrange:new a.aO(_,o.u_latrange),u_light:new a.aO(_,o.u_light),u_shadow:new a.aL(_,o.u_shadow),u_highlight:new a.aL(_,o.u_highlight),u_accent:new a.aL(_,o.u_accent)}),hillshadePrepare:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_image:new a.aH(_,o.u_image),u_dimension:new a.aO(_,o.u_dimension),u_zoom:new a.aI(_,o.u_zoom),u_unpack:new a.aK(_,o.u_unpack)}),line:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_ratio:new a.aI(_,o.u_ratio),u_device_pixel_ratio:new a.aI(_,o.u_device_pixel_ratio),u_units_to_pixels:new a.aO(_,o.u_units_to_pixels)}),lineGradient:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_ratio:new a.aI(_,o.u_ratio),u_device_pixel_ratio:new a.aI(_,o.u_device_pixel_ratio),u_units_to_pixels:new a.aO(_,o.u_units_to_pixels),u_image:new a.aH(_,o.u_image),u_image_height:new a.aI(_,o.u_image_height)}),linePattern:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_texsize:new a.aO(_,o.u_texsize),u_ratio:new a.aI(_,o.u_ratio),u_device_pixel_ratio:new a.aI(_,o.u_device_pixel_ratio),u_image:new a.aH(_,o.u_image),u_units_to_pixels:new a.aO(_,o.u_units_to_pixels),u_scale:new a.aN(_,o.u_scale),u_fade:new a.aI(_,o.u_fade)}),lineSDF:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_ratio:new a.aI(_,o.u_ratio),u_device_pixel_ratio:new a.aI(_,o.u_device_pixel_ratio),u_units_to_pixels:new a.aO(_,o.u_units_to_pixels),u_patternscale_a:new a.aO(_,o.u_patternscale_a),u_patternscale_b:new a.aO(_,o.u_patternscale_b),u_sdfgamma:new a.aI(_,o.u_sdfgamma),u_image:new a.aH(_,o.u_image),u_tex_y_a:new a.aI(_,o.u_tex_y_a),u_tex_y_b:new a.aI(_,o.u_tex_y_b),u_mix:new a.aI(_,o.u_mix)}),raster:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_tl_parent:new a.aO(_,o.u_tl_parent),u_scale_parent:new a.aI(_,o.u_scale_parent),u_buffer_scale:new a.aI(_,o.u_buffer_scale),u_fade_t:new a.aI(_,o.u_fade_t),u_opacity:new a.aI(_,o.u_opacity),u_image0:new a.aH(_,o.u_image0),u_image1:new a.aH(_,o.u_image1),u_brightness_low:new a.aI(_,o.u_brightness_low),u_brightness_high:new a.aI(_,o.u_brightness_high),u_saturation_factor:new a.aI(_,o.u_saturation_factor),u_contrast_factor:new a.aI(_,o.u_contrast_factor),u_spin_weights:new a.aN(_,o.u_spin_weights)}),symbolIcon:(_,o)=>({u_is_size_zoom_constant:new a.aH(_,o.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(_,o.u_is_size_feature_constant),u_size_t:new a.aI(_,o.u_size_t),u_size:new a.aI(_,o.u_size),u_camera_to_center_distance:new a.aI(_,o.u_camera_to_center_distance),u_pitch:new a.aI(_,o.u_pitch),u_rotate_symbol:new a.aH(_,o.u_rotate_symbol),u_aspect_ratio:new a.aI(_,o.u_aspect_ratio),u_fade_change:new a.aI(_,o.u_fade_change),u_matrix:new a.aJ(_,o.u_matrix),u_label_plane_matrix:new a.aJ(_,o.u_label_plane_matrix),u_coord_matrix:new a.aJ(_,o.u_coord_matrix),u_is_text:new a.aH(_,o.u_is_text),u_pitch_with_map:new a.aH(_,o.u_pitch_with_map),u_is_along_line:new a.aH(_,o.u_is_along_line),u_is_variable_anchor:new a.aH(_,o.u_is_variable_anchor),u_texsize:new a.aO(_,o.u_texsize),u_texture:new a.aH(_,o.u_texture),u_translation:new a.aO(_,o.u_translation),u_pitched_scale:new a.aI(_,o.u_pitched_scale)}),symbolSDF:(_,o)=>({u_is_size_zoom_constant:new a.aH(_,o.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(_,o.u_is_size_feature_constant),u_size_t:new a.aI(_,o.u_size_t),u_size:new a.aI(_,o.u_size),u_camera_to_center_distance:new a.aI(_,o.u_camera_to_center_distance),u_pitch:new a.aI(_,o.u_pitch),u_rotate_symbol:new a.aH(_,o.u_rotate_symbol),u_aspect_ratio:new a.aI(_,o.u_aspect_ratio),u_fade_change:new a.aI(_,o.u_fade_change),u_matrix:new a.aJ(_,o.u_matrix),u_label_plane_matrix:new a.aJ(_,o.u_label_plane_matrix),u_coord_matrix:new a.aJ(_,o.u_coord_matrix),u_is_text:new a.aH(_,o.u_is_text),u_pitch_with_map:new a.aH(_,o.u_pitch_with_map),u_is_along_line:new a.aH(_,o.u_is_along_line),u_is_variable_anchor:new a.aH(_,o.u_is_variable_anchor),u_texsize:new a.aO(_,o.u_texsize),u_texture:new a.aH(_,o.u_texture),u_gamma_scale:new a.aI(_,o.u_gamma_scale),u_device_pixel_ratio:new a.aI(_,o.u_device_pixel_ratio),u_is_halo:new a.aH(_,o.u_is_halo),u_translation:new a.aO(_,o.u_translation),u_pitched_scale:new a.aI(_,o.u_pitched_scale)}),symbolTextAndIcon:(_,o)=>({u_is_size_zoom_constant:new a.aH(_,o.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(_,o.u_is_size_feature_constant),u_size_t:new a.aI(_,o.u_size_t),u_size:new a.aI(_,o.u_size),u_camera_to_center_distance:new a.aI(_,o.u_camera_to_center_distance),u_pitch:new a.aI(_,o.u_pitch),u_rotate_symbol:new a.aH(_,o.u_rotate_symbol),u_aspect_ratio:new a.aI(_,o.u_aspect_ratio),u_fade_change:new a.aI(_,o.u_fade_change),u_matrix:new a.aJ(_,o.u_matrix),u_label_plane_matrix:new a.aJ(_,o.u_label_plane_matrix),u_coord_matrix:new a.aJ(_,o.u_coord_matrix),u_is_text:new a.aH(_,o.u_is_text),u_pitch_with_map:new a.aH(_,o.u_pitch_with_map),u_is_along_line:new a.aH(_,o.u_is_along_line),u_is_variable_anchor:new a.aH(_,o.u_is_variable_anchor),u_texsize:new a.aO(_,o.u_texsize),u_texsize_icon:new a.aO(_,o.u_texsize_icon),u_texture:new a.aH(_,o.u_texture),u_texture_icon:new a.aH(_,o.u_texture_icon),u_gamma_scale:new a.aI(_,o.u_gamma_scale),u_device_pixel_ratio:new a.aI(_,o.u_device_pixel_ratio),u_is_halo:new a.aH(_,o.u_is_halo),u_translation:new a.aO(_,o.u_translation),u_pitched_scale:new a.aI(_,o.u_pitched_scale)}),background:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_opacity:new a.aI(_,o.u_opacity),u_color:new a.aL(_,o.u_color)}),backgroundPattern:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_opacity:new a.aI(_,o.u_opacity),u_image:new a.aH(_,o.u_image),u_pattern_tl_a:new a.aO(_,o.u_pattern_tl_a),u_pattern_br_a:new a.aO(_,o.u_pattern_br_a),u_pattern_tl_b:new a.aO(_,o.u_pattern_tl_b),u_pattern_br_b:new a.aO(_,o.u_pattern_br_b),u_texsize:new a.aO(_,o.u_texsize),u_mix:new a.aI(_,o.u_mix),u_pattern_size_a:new a.aO(_,o.u_pattern_size_a),u_pattern_size_b:new a.aO(_,o.u_pattern_size_b),u_scale_a:new a.aI(_,o.u_scale_a),u_scale_b:new a.aI(_,o.u_scale_b),u_pixel_coord_upper:new a.aO(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(_,o.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aI(_,o.u_tile_units_to_pixels)}),terrain:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_texture:new a.aH(_,o.u_texture),u_ele_delta:new a.aI(_,o.u_ele_delta),u_fog_matrix:new a.aJ(_,o.u_fog_matrix),u_fog_color:new a.aL(_,o.u_fog_color),u_fog_ground_blend:new a.aI(_,o.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.aI(_,o.u_fog_ground_blend_opacity),u_horizon_color:new a.aL(_,o.u_horizon_color),u_horizon_fog_blend:new a.aI(_,o.u_horizon_fog_blend)}),terrainDepth:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_ele_delta:new a.aI(_,o.u_ele_delta)}),terrainCoords:(_,o)=>({u_matrix:new a.aJ(_,o.u_matrix),u_texture:new a.aH(_,o.u_texture),u_terrain_coords_id:new a.aI(_,o.u_terrain_coords_id),u_ele_delta:new a.aI(_,o.u_ele_delta)}),sky:(_,o)=>({u_sky_color:new a.aL(_,o.u_sky_color),u_horizon_color:new a.aL(_,o.u_horizon_color),u_horizon:new a.aI(_,o.u_horizon),u_sky_horizon_blend:new a.aI(_,o.u_sky_horizon_blend)})};class Uo{constructor(o,c,d){this.context=o;let v=o.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){let c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let lq={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class bg{constructor(o,c,d,v){this.length=c.length,this.attributes=d,this.itemSize=c.bytesPerElement,this.dynamicDraw=v,this.context=o;let y=o.gl;this.buffer=y.createBuffer(),o.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);let c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,c){for(let d=0;d<this.attributes.length;d++){let v=c.attributes[this.attributes[d].name];v!==void 0&&o.enableVertexAttribArray(v)}}setVertexAttribPointers(o,c,d){for(let v=0;v<this.attributes.length;v++){let y=this.attributes[v],I=c.attributes[y.name];I!==void 0&&o.vertexAttribPointer(I,y.components,o[lq[y.type]],!1,this.itemSize,y.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Xu=new WeakMap;function tu(_){var o;if(Xu.has(_))return Xu.get(_);{let c=(o=_.getParameter(_.VERSION))===null||o===void 0?void 0:o.startsWith("WebGL 2.0");return Xu.set(_,c),c}}class ur{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class $p extends ur{getDefault(){return a.aM.transparent}set(o){let c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class cq extends ur{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class uc extends ur{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class hq extends ur{getDefault(){return[!0,!0,!0,!0]}set(o){let c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class L1 extends ur{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class fq extends ur{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class k1 extends ur{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){let c=this.current;(o.func!==c.func||o.ref!==c.ref||o.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class wg extends ur{getDefault(){let o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){let c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class N1 extends ur{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;o?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=o,this.dirty=!1}}class F1 extends ur{getDefault(){return[0,1]}set(o){let c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class z1 extends ur{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;o?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=o,this.dirty=!1}}class j1 extends ur{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class Yu extends ur{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;o?c.enable(c.BLEND):c.disable(c.BLEND),this.current=o,this.dirty=!1}}class B1 extends ur{getDefault(){let o=this.gl;return[o.ONE,o.ZERO]}set(o){let c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class pq extends ur{getDefault(){return a.aM.transparent}set(o){let c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class U1 extends ur{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class af extends ur{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;o?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=o,this.dirty=!1}}class dq extends ur{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Gp extends ur{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class vq extends ur{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class mq extends ur{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class V1 extends ur{getDefault(){let o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){let c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class $1 extends ur{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class G1 extends ur{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Eg extends ur{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;c.bindTexture(c.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class W1 extends ur{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Wp extends ur{getDefault(){return null}set(o){let c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Is extends ur{getDefault(){return null}set(o){var c;if(o===this.current&&!this.dirty)return;let d=this.gl;tu(d)?d.bindVertexArray(o):(c=d.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(o),this.current=o,this.dirty=!1}}class Sg extends ur{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class Tg extends ur{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Ig extends ur{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class Hp extends ur{constructor(o,c){super(o),this.context=o,this.parent=c}getDefault(){return null}}class Cg extends Hp{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Ju extends Hp{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Ag extends Hp{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class gq{constructor(o,c,d,v,y){this.context=o,this.width=c,this.height=d;let I=o.gl,A=this.framebuffer=I.createFramebuffer();if(this.colorAttachment=new Cg(o,A),v)this.depthAttachment=y?new Ag(o,A):new Ju(o,A);else if(y)throw new Error("Stencil cannot be set without depth");if(I.checkFramebufferStatus(I.FRAMEBUFFER)!==I.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let o=this.context.gl,c=this.colorAttachment.get();if(c&&o.deleteTexture(c),this.depthAttachment){let d=this.depthAttachment.get();d&&o.deleteRenderbuffer(d)}o.deleteFramebuffer(this.framebuffer)}}class on{constructor(o,c,d){this.blendFunction=o,this.blendColor=c,this.mask=d}}on.Replace=[1,0],on.disabled=new on(on.Replace,a.aM.transparent,[!1,!1,!1,!1]),on.unblended=new on(on.Replace,a.aM.transparent,[!0,!0,!0,!0]),on.alphaBlended=new on([1,771],a.aM.transparent,[!0,!0,!0,!0]);class yq{constructor(o){var c,d;if(this.gl=o,this.clearColor=new $p(this),this.clearDepth=new cq(this),this.clearStencil=new uc(this),this.colorMask=new hq(this),this.depthMask=new L1(this),this.stencilMask=new fq(this),this.stencilFunc=new k1(this),this.stencilOp=new wg(this),this.stencilTest=new N1(this),this.depthRange=new F1(this),this.depthTest=new z1(this),this.depthFunc=new j1(this),this.blend=new Yu(this),this.blendFunc=new B1(this),this.blendColor=new pq(this),this.blendEquation=new U1(this),this.cullFace=new af(this),this.cullFaceSide=new dq(this),this.frontFace=new Gp(this),this.program=new vq(this),this.activeTexture=new mq(this),this.viewport=new V1(this),this.bindFramebuffer=new $1(this),this.bindRenderbuffer=new G1(this),this.bindTexture=new Eg(this),this.bindVertexBuffer=new W1(this),this.bindElementBuffer=new Wp(this),this.bindVertexArray=new Is(this),this.pixelStoreUnpack=new Sg(this),this.pixelStoreUnpackPremultiplyAlpha=new Tg(this),this.pixelStoreUnpackFlipY=new Ig(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),tu(o)){this.HALF_FLOAT=o.HALF_FLOAT;let v=o.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=o.RGBA16F)!==null&&c!==void 0?c:v==null?void 0:v.RGBA16F_EXT,this.RGB16F=(d=o.RGB16F)!==null&&d!==void 0?d:v==null?void 0:v.RGB16F_EXT,o.getExtension("EXT_color_buffer_float")}else{o.getExtension("EXT_color_buffer_half_float"),o.getExtension("OES_texture_half_float_linear");let v=o.getExtension("OES_texture_half_float");this.HALF_FLOAT=v==null?void 0:v.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,c){return new Uo(this,o,c)}createVertexBuffer(o,c,d){return new bg(this,o,c,d)}createRenderbuffer(o,c,d){let v=this.gl,y=v.createRenderbuffer();return this.bindRenderbuffer.set(y),v.renderbufferStorage(v.RENDERBUFFER,o,c,d),this.bindRenderbuffer.set(null),y}createFramebuffer(o,c,d,v){return new gq(this,o,c,d,v)}clear({color:o,depth:c,stencil:d}){let v=this.gl,y=0;o&&(y|=v.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(y|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),d!==void 0&&(y|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),v.clear(y)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){a.aE(o.blendFunction,on.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}createVertexArray(){var o;return tu(this.gl)?this.gl.createVertexArray():(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.createVertexArrayOES()}deleteVertexArray(o){var c;return tu(this.gl)?this.gl.deleteVertexArray(o):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(o)}unbindVAO(){this.bindVertexArray.set(null)}}class Ft{constructor(o,c,d){this.func=o,this.mask=c,this.range=d}}Ft.ReadOnly=!1,Ft.ReadWrite=!0,Ft.disabled=new Ft(519,Ft.ReadOnly,[0,1]);let Zp=7680;class Ar{constructor(o,c,d,v,y,I){this.test=o,this.ref=c,this.mask=d,this.fail=v,this.depthFail=y,this.pass=I}}Ar.disabled=new Ar({func:519,mask:0},0,0,Zp,Zp,Zp);class yr{constructor(o,c,d){this.enable=o,this.mode=c,this.frontFace=d}}let Qu;function of(_,o,c,d,v){let y=_.context,I=y.gl,A=_.useProgram("collisionBox"),M=[],D=0,N=0;for(let ce=0;ce<d.length;ce++){let fe=d[ce],re=o.getTile(fe).getBucket(c);if(!re)continue;let ve=v?re.textCollisionBox:re.iconCollisionBox,ge=re.collisionCircleArray;if(ge.length>0){let be=a.H();a.aQ(be,re.placementInvProjMatrix,_.transform.glCoordMatrix),a.aQ(be,be,re.placementViewportMatrix),M.push({circleArray:ge,circleOffset:N,transform:fe.posMatrix,invTransform:be,coord:fe}),D+=ge.length/4,N=D}ve&&A.draw(y,I.LINES,Ft.disabled,Ar.disabled,_.colorModeForRenderPass(),yr.disabled,{u_matrix:fe.posMatrix,u_pixel_extrude_scale:[1/(F=_.transform).width,1/F.height]},_.style.map.terrain&&_.style.map.terrain.getTerrainData(fe),c.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,null,_.transform.zoom,null,null,ve.collisionVertexBuffer)}var F;if(!v||!M.length)return;let G=_.useProgram("collisionCircle"),Y=new a.aR;Y.resize(4*D),Y._trim();let ee=0;for(let ce of M)for(let fe=0;fe<ce.circleArray.length/4;fe++){let re=4*fe,ve=ce.circleArray[re+0],ge=ce.circleArray[re+1],be=ce.circleArray[re+2],Pe=ce.circleArray[re+3];Y.emplace(ee++,ve,ge,be,Pe,0),Y.emplace(ee++,ve,ge,be,Pe,1),Y.emplace(ee++,ve,ge,be,Pe,2),Y.emplace(ee++,ve,ge,be,Pe,3)}(!Qu||Qu.length<2*D)&&(Qu=function(ce){let fe=2*ce,re=new a.aT;re.resize(fe),re._trim();for(let ve=0;ve<fe;ve++){let ge=6*ve;re.uint16[ge+0]=4*ve+0,re.uint16[ge+1]=4*ve+1,re.uint16[ge+2]=4*ve+2,re.uint16[ge+3]=4*ve+2,re.uint16[ge+4]=4*ve+3,re.uint16[ge+5]=4*ve+0}return re}(D));let ae=y.createIndexBuffer(Qu,!0),le=y.createVertexBuffer(Y,a.aS.members,!0);for(let ce of M){let fe=Ku(ce.transform,ce.invTransform,_.transform);G.draw(y,I.TRIANGLES,Ft.disabled,Ar.disabled,_.colorModeForRenderPass(),yr.disabled,fe,_.style.map.terrain&&_.style.map.terrain.getTerrainData(ce.coord),c.id,le,ae,a.a0.simpleSegment(0,2*ce.circleOffset,ce.circleArray.length,ce.circleArray.length/2),null,_.transform.zoom,null,null,null)}le.destroy(),ae.destroy()}yr.disabled=new yr(!1,1029,2305),yr.backCCW=new yr(!0,1029,2305);let sf=a.an(new Float32Array(16));function qg(_,o,c,d,v,y){let{horizontalAlign:I,verticalAlign:A}=a.au(_);return new a.P((-(I-.5)*o/v+d[0])*y,(-(A-.5)*c/v+d[1])*y)}function el(_,o,c,d,v,y){let I=o.tileAnchorPoint.add(new a.P(o.translation[0],o.translation[1]));if(o.pitchWithMap){let A=d.mult(y);c||(A=A.rotate(-v));let M=I.add(A);return oe(M.x,M.y,o.labelPlaneMatrix,o.getElevation).point}if(c){let A=Te(o.tileAnchorPoint.x+1,o.tileAnchorPoint.y,o).point.sub(_),M=Math.atan(A.y/A.x)+(A.x<0?Math.PI:0);return _.add(d.rotate(M))}return _.add(d)}function lc(_,o,c,d,v,y,I,A,M,D,N,F,G,Y){let ee=_.text.placedSymbolArray,ae=_.text.dynamicLayoutVertexArray,le=_.icon.dynamicLayoutVertexArray,ce={};ae.clear();for(let fe=0;fe<ee.length;fe++){let re=ee.get(fe),ve=re.hidden||!re.crossTileID||_.allowVerticalPlacement&&!re.placedOrientation?null:d[re.crossTileID];if(ve){let ge=new a.P(re.anchorX,re.anchorY),be={getElevation:Y,width:v.width,height:v.height,labelPlaneMatrix:y,lineVertexArray:null,pitchWithMap:c,projection:N,projectionCache:null,tileAnchorPoint:ge,translation:F,unwrappedTileID:G},Pe=c?oe(ge.x,ge.y,I,Y):Te(ge.x,ge.y,be),ke=B(v.cameraToCenterDistance,Pe.signedDistanceFromCamera),We=a.ai(_.textSizeData,M,re)*ke/a.ap;c&&(We*=_.tilePixelRatio/A);let{width:et,height:Ve,anchor:Be,textOffset:at,textBoxScale:wt}=ve,$e=qg(Be,et,Ve,at,wt,We),Xe=N.getPitchedTextCorrection(v,ge.add(new a.P(F[0],F[1])),G),_t=el(Pe.point,be,o,$e,v.angle,Xe),Dr=_.allowVerticalPlacement&&re.placedOrientation===a.ah.vertical?Math.PI/2:0;for(let Pt=0;Pt<re.numGlyphs;Pt++)a.aj(ae,_t,Dr);D&&re.associatedIconIndex>=0&&(ce[re.associatedIconIndex]={shiftedAnchor:_t,angle:Dr})}else ht(re.numGlyphs,ae)}if(D){le.clear();let fe=_.icon.placedSymbolArray;for(let re=0;re<fe.length;re++){let ve=fe.get(re);if(ve.hidden)ht(ve.numGlyphs,le);else{let ge=ce[re];if(ge)for(let be=0;be<ve.numGlyphs;be++)a.aj(le,ge.shiftedAnchor,ge.angle);else ht(ve.numGlyphs,le)}}_.icon.dynamicLayoutVertexBuffer.updateData(le)}_.text.dynamicLayoutVertexBuffer.updateData(ae)}function Fa(_,o,c){return c.iconsInText&&o?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Pg(_,o,c,d,v,y,I,A,M,D,N,F){let G=_.context,Y=G.gl,ee=_.transform,ae=Hu(),le=A==="map",ce=M==="map",fe=A!=="viewport"&&c.layout.get("symbol-placement")!=="point",re=le&&!ce&&!fe,ve=!ce&&fe,ge=!c.layout.get("symbol-sort-key").isConstant(),be=!1,Pe=_.depthModeForSublayer(0,Ft.ReadOnly),ke=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),We=[],et=ae.getCircleRadiusCorrection(ee);for(let Ve of d){let Be=o.getTile(Ve),at=Be.getBucket(c);if(!at)continue;let wt=v?at.text:at.icon;if(!wt||!wt.segments.get().length||!wt.hasVisibleVertices)continue;let $e=wt.programConfigurations.get(c.id),Xe=v||at.sdfIcons,_t=v?at.textSizeData:at.iconSizeData,Dr=ce||ee.pitch!==0,Pt=_.useProgram(Fa(Xe,v,at),$e),Vt=a.ag(_t,ee.zoom),Lr=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ve),oi,Eo,kr,Zi,Ti=[0,0],si=null;if(v)Eo=Be.glyphAtlasTexture,kr=Y.LINEAR,oi=Be.glyphAtlasTexture.size,at.iconsInText&&(Ti=Be.imageAtlasTexture.size,si=Be.imageAtlasTexture,Zi=Dr||_.options.rotating||_.options.zooming||_t.kind==="composite"||_t.kind==="camera"?Y.LINEAR:Y.NEAREST);else{let Wt=c.layout.get("icon-size").constantOr(0)!==1||at.iconsNeedLinear;Eo=Be.imageAtlasTexture,kr=Xe||_.options.rotating||_.options.zooming||Wt||Dr?Y.LINEAR:Y.NEAREST,oi=Be.imageAtlasTexture.size}let Ii=Ut(Be,1,_.transform.zoom),Go=ve?Ve.posMatrix:sf,Tc=Qs(Go,ce,le,_.transform,Ii),pd=Bo(Go,ce,le,_.transform,Ii),Ic=Bo(Ve.posMatrix,ce,le,_.transform,Ii),Ba=ae.translatePosition(_.transform,Be,y,I),dd=ke&&at.hasTextData(),ty=c.layout.get("icon-text-fit")!=="none"&&dd&&at.hasIconData();if(fe){let Wt=_.style.map.terrain?(Cc,Ac)=>_.style.map.terrain.getElevation(Ve,Cc,Ac):null,al=c.layout.get("text-rotation-alignment")==="map";J(at,Ve.posMatrix,_,v,Tc,Ic,ce,D,al,ae,Ve.toUnwrapped(),ee.width,ee.height,Ba,Wt)}let Ua=Ve.posMatrix,Va=v&&ke||ty,ru=fe||Va?sf:Tc,So=pd,Zn=Xe&&c.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ui;ui=Xe?at.iconsInText?yg(_t.kind,Vt,re,ce,fe,Va,_,Ua,ru,So,Ba,oi,Ti,et):nf(_t.kind,Vt,re,ce,fe,Va,_,Ua,ru,So,Ba,v,oi,!0,et):D1(_t.kind,Vt,re,ce,fe,Va,_,Ua,ru,So,Ba,v,oi,et);let Ea={program:Pt,buffers:wt,uniformValues:ui,atlasTexture:Eo,atlasTextureIcon:si,atlasInterpolation:kr,atlasInterpolationIcon:Zi,isSDF:Xe,hasHalo:Zn};if(ge&&at.canOverlap){be=!0;let Wt=wt.segments.get();for(let al of Wt)We.push({segments:new a.a0([al]),sortKey:al.sortKey,state:Ea,terrainData:Lr})}else We.push({segments:wt.segments,sortKey:0,state:Ea,terrainData:Lr})}be&&We.sort((Ve,Be)=>Ve.sortKey-Be.sortKey);for(let Ve of We){let Be=Ve.state;if(G.activeTexture.set(Y.TEXTURE0),Be.atlasTexture.bind(Be.atlasInterpolation,Y.CLAMP_TO_EDGE),Be.atlasTextureIcon&&(G.activeTexture.set(Y.TEXTURE1),Be.atlasTextureIcon&&Be.atlasTextureIcon.bind(Be.atlasInterpolationIcon,Y.CLAMP_TO_EDGE)),Be.isSDF){let at=Be.uniformValues;Be.hasHalo&&(at.u_is_halo=1,Mg(Be.buffers,Ve.segments,c,_,Be.program,Pe,N,F,at,Ve.terrainData)),at.u_is_halo=0}Mg(Be.buffers,Ve.segments,c,_,Be.program,Pe,N,F,Be.uniformValues,Ve.terrainData)}}function Mg(_,o,c,d,v,y,I,A,M,D){let N=d.context;v.draw(N,N.gl.TRIANGLES,y,I,A,yr.disabled,M,D,c.id,_.layoutVertexBuffer,_.indexBuffer,o,c.paint,d.transform.zoom,_.programConfigurations.get(c.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Og(_,o,c,d){let v=_.context,y=v.gl,I=Ar.disabled,A=new on([y.ONE,y.ONE],a.aM.transparent,[!0,!0,!0,!0]),M=o.getBucket(c);if(!M)return;let D=d.key,N=c.heatmapFbos.get(D);N||(N=uf(v,o.tileSize,o.tileSize),c.heatmapFbos.set(D,N)),v.bindFramebuffer.set(N.framebuffer),v.viewport.set([0,0,o.tileSize,o.tileSize]),v.clear({color:a.aM.transparent});let F=M.programConfigurations.get(c.id),G=_.useProgram("heatmap",F),Y=_.style.map.terrain.getTerrainData(d);G.draw(v,y.TRIANGLES,Ft.disabled,I,A,yr.disabled,Hi(d.posMatrix,o,_.transform.zoom,c.paint.get("heatmap-intensity")),Y,c.id,M.layoutVertexBuffer,M.indexBuffer,M.segments,c.paint,_.transform.zoom,F)}function tl(_,o,c){let d=_.context,v=d.gl;d.setColorMode(_.colorModeForRenderPass());let y=lf(d,o),I=c.key,A=o.heatmapFbos.get(I);A&&(d.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,A.colorAttachment.get()),d.activeTexture.set(v.TEXTURE1),y.bind(v.LINEAR,v.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(d,v.TRIANGLES,Ft.disabled,Ar.disabled,_.colorModeForRenderPass(),yr.disabled,jp(_,o,0,1),null,o.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,o.paint,_.transform.zoom),A.destroy(),o.heatmapFbos.delete(I))}function uf(_,o,c){var d,v;let y=_.gl,I=y.createTexture();y.bindTexture(y.TEXTURE_2D,I),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);let A=(d=_.HALF_FLOAT)!==null&&d!==void 0?d:y.UNSIGNED_BYTE,M=(v=_.RGBA16F)!==null&&v!==void 0?v:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,M,o,c,0,y.RGBA,A,null);let D=_.createFramebuffer(o,c,!1,!1);return D.colorAttachment.set(I),D}function lf(_,o){return o.colorRampTexture||(o.colorRampTexture=new Le(_,o.colorRamp,_.gl.RGBA)),o.colorRampTexture}function cc(_,o,c,d,v){if(!c||!d||!d.imageAtlas)return;let y=d.imageAtlas.patternPositions,I=y[c.to.toString()],A=y[c.from.toString()];if(!I&&A&&(I=A),!A&&I&&(A=I),!I||!A){let M=v.getPaintProperty(o);I=y[M],A=y[M]}I&&A&&_.setConstantPatternPositions(I,A)}function cf(_,o,c,d,v,y,I){let A=_.context.gl,M="fill-pattern",D=c.paint.get(M),N=D&&D.constantOr(1),F=c.getCrossfadeParameters(),G,Y,ee,ae,le;I?(Y=N&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",G=A.LINES):(Y=N?"fillPattern":"fill",G=A.TRIANGLES);let ce=D.constantOr(null);for(let fe of d){let re=o.getTile(fe);if(N&&!re.patternsLoaded())continue;let ve=re.getBucket(c);if(!ve)continue;let ge=ve.programConfigurations.get(c.id),be=_.useProgram(Y,ge),Pe=_.style.map.terrain&&_.style.map.terrain.getTerrainData(fe);N&&(_.context.activeTexture.set(A.TEXTURE0),re.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),ge.updatePaintBuffers(F)),cc(ge,M,ce,re,c);let ke=Pe?fe:null,We=_.translatePosMatrix(ke?ke.posMatrix:fe.posMatrix,re,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(I){ae=ve.indexBuffer2,le=ve.segments2;let et=[A.drawingBufferWidth,A.drawingBufferHeight];ee=Y==="fillOutlinePattern"&&N?P1(We,_,F,re,et):iq(We,et)}else ae=ve.indexBuffer,le=ve.segments,ee=N?q1(We,_,F,re):oc(We);be.draw(_.context,G,v,_.stencilModeForClipping(fe),y,yr.disabled,ee,Pe,c.id,ve.layoutVertexBuffer,ae,le,c.paint,_.transform.zoom,ge)}}function Kp(_,o,c,d,v,y,I){let A=_.context,M=A.gl,D="fill-extrusion-pattern",N=c.paint.get(D),F=N.constantOr(1),G=c.getCrossfadeParameters(),Y=c.paint.get("fill-extrusion-opacity"),ee=N.constantOr(null);for(let ae of d){let le=o.getTile(ae),ce=le.getBucket(c);if(!ce)continue;let fe=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ae),re=ce.programConfigurations.get(c.id),ve=_.useProgram(F?"fillExtrusionPattern":"fillExtrusion",re);F&&(_.context.activeTexture.set(M.TEXTURE0),le.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),re.updatePaintBuffers(G)),cc(re,D,ee,le,c);let ge=_.translatePosMatrix(ae.posMatrix,le,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),be=c.paint.get("fill-extrusion-vertical-gradient"),Pe=F?zp(ge,_,be,Y,ae,G,le):tf(ge,_,be,Y);ve.draw(A,A.gl.TRIANGLES,v,y,I,yr.backCCW,Pe,fe,c.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,c.paint,_.transform.zoom,re,_.style.map.terrain&&ce.centroidVertexBuffer)}}function hc(_,o,c,d,v,y,I){let A=_.context,M=A.gl,D=c.fbo;if(!D)return;let N=_.useProgram("hillshade"),F=_.style.map.terrain&&_.style.map.terrain.getTerrainData(o);A.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,D.colorAttachment.get()),N.draw(A,M.TRIANGLES,v,y,I,yr.disabled,((G,Y,ee,ae)=>{let le=ee.paint.get("hillshade-shadow-color"),ce=ee.paint.get("hillshade-highlight-color"),fe=ee.paint.get("hillshade-accent-color"),re=ee.paint.get("hillshade-illumination-direction")*(Math.PI/180);ee.paint.get("hillshade-illumination-anchor")==="viewport"&&(re-=G.transform.angle);let ve=!G.options.moving;return{u_matrix:ae?ae.posMatrix:G.transform.calculatePosMatrix(Y.tileID.toUnwrapped(),ve),u_image:0,u_latrange:Bp(0,Y.tileID),u_light:[ee.paint.get("hillshade-exaggeration"),re],u_shadow:le,u_highlight:ce,u_accent:fe}})(_,c,d,F?o:null),F,d.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function fc(_,o,c,d,v,y){let I=_.context,A=I.gl,M=o.dem;if(M&&M.data){let D=M.dim,N=M.stride,F=M.getPixels();if(I.activeTexture.set(A.TEXTURE1),I.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||_.getTileTexture(N),o.demTexture){let Y=o.demTexture;Y.update(F,{premultiply:!1}),Y.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else o.demTexture=new Le(I,F,A.RGBA,{premultiply:!1}),o.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);I.activeTexture.set(A.TEXTURE0);let G=o.fbo;if(!G){let Y=new Le(I,{width:D,height:D,data:null},A.RGBA);Y.bind(A.LINEAR,A.CLAMP_TO_EDGE),G=o.fbo=I.createFramebuffer(D,D,!0,!1),G.colorAttachment.set(Y.texture)}I.bindFramebuffer.set(G.framebuffer),I.viewport.set([0,0,D,D]),_.useProgram("hillshadePrepare").draw(I,A.TRIANGLES,d,v,y,yr.disabled,((Y,ee)=>{let ae=ee.stride,le=a.H();return a.aP(le,0,a.X,-a.X,0,0,1),a.J(le,le,[0,-a.X,0]),{u_matrix:le,u_image:1,u_dimension:[ae,ae],u_zoom:Y.overscaledZ,u_unpack:ee.getUnpackVector()}})(o.tileID,M),null,c.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),o.needsHillshadePrepare=!1}}function H1(_,o,c,d,v,y){let I=d.paint.get("raster-fade-duration");if(!y&&I>0){let A=w.now(),M=(A-_.timeAdded)/I,D=o?(A-o.timeAdded)/I:-1,N=c.getSource(),F=v.coveringZoomLevel({tileSize:N.tileSize,roundZoom:N.roundZoom}),G=!o||Math.abs(o.tileID.overscaledZ-F)>Math.abs(_.tileID.overscaledZ-F),Y=G&&_.refreshedUponExpiration?1:a.ac(G?M:1-D,0,1);return _.refreshedUponExpiration&&M>=1&&(_.refreshedUponExpiration=!1),o?{opacity:1,mix:1-Y}:{opacity:Y,mix:0}}return{opacity:1,mix:0}}let Rg=new a.aM(1,0,0,1),rr=new a.aM(0,1,0,1),Xp=new a.aM(0,0,1,1),_q=new a.aM(1,0,1,1),Z1=new a.aM(0,1,1,1);function pc(_,o,c,d){Yp(_,0,o+c/2,_.transform.width,c,d)}function K1(_,o,c,d){Yp(_,o-c/2,0,c,_.transform.height,d)}function Yp(_,o,c,d,v,y){let I=_.context,A=I.gl;A.enable(A.SCISSOR_TEST),A.scissor(o*_.pixelRatio,c*_.pixelRatio,d*_.pixelRatio,v*_.pixelRatio),I.clear({color:y}),A.disable(A.SCISSOR_TEST)}function X1(_,o,c){let d=_.context,v=d.gl,y=c.posMatrix,I=_.useProgram("debug"),A=Ft.disabled,M=Ar.disabled,D=_.colorModeForRenderPass(),N="$debug",F=_.style.map.terrain&&_.style.map.terrain.getTerrainData(c);d.activeTexture.set(v.TEXTURE0);let G=o.getTileByID(c.key).latestRawTileData,Y=Math.floor((G&&G.byteLength||0)/1024),ee=o.getTile(c).tileSize,ae=512/Math.min(ee,512)*(c.overscaledZ/_.transform.zoom)*.5,le=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(le+=` => ${c.overscaledZ}`),function(ce,fe){ce.initDebugOverlayCanvas();let re=ce.debugOverlayCanvas,ve=ce.context.gl,ge=ce.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,re.width,re.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold 36px Open Sans, sans-serif",ge.fillText(fe,5,5),ge.strokeText(fe,5,5),ce.debugOverlayTexture.update(re),ce.debugOverlayTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)}(_,`${le} ${Y}kB`),I.draw(d,v.TRIANGLES,A,M,on.alphaBlended,yr.disabled,rf(y,a.aM.transparent,ae),null,N,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),I.draw(d,v.LINE_STRIP,A,M,D,yr.disabled,rf(y,a.aM.red),F,N,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function Y1(_,o,c){let d=_.context,v=d.gl,y=_.colorModeForRenderPass(),I=new Ft(v.LEQUAL,Ft.ReadWrite,_.depthRangeFor3D),A=_.useProgram("terrain"),M=o.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,_.width,_.height]);for(let D of c){let N=_.renderToTexture.getTexture(D),F=o.getTerrainData(D.tileID);d.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,N.texture);let G=_.transform.calculatePosMatrix(D.tileID.toUnwrapped()),Y=o.getMeshFrameDelta(_.transform.zoom),ee=_.transform.calculateFogMatrix(D.tileID.toUnwrapped()),ae=mg(G,Y,ee,_.style.sky,_.transform.pitch);A.draw(d,v.TRIANGLES,I,Ar.disabled,y,yr.backCCW,ae,F,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}class Jp{constructor(o,c,d){this.vertexBuffer=o,this.indexBuffer=c,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Qp{constructor(o,c){this.context=new yq(o),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ft.maxUnderzooming+ft.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new dg}resize(o,c,d){if(this.width=Math.floor(o*d),this.height=Math.floor(c*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let v of this.style._order)this.style._layers[v].resize()}setup(){let o=this.context,c=new a.aX;c.emplaceBack(0,0),c.emplaceBack(a.X,0),c.emplaceBack(0,a.X),c.emplaceBack(a.X,a.X),this.tileExtentBuffer=o.createVertexBuffer(c,Zu.members),this.tileExtentSegments=a.a0.simpleSegment(0,0,4,2);let d=new a.aX;d.emplaceBack(0,0),d.emplaceBack(a.X,0),d.emplaceBack(0,a.X),d.emplaceBack(a.X,a.X),this.debugBuffer=o.createVertexBuffer(d,Zu.members),this.debugSegments=a.a0.simpleSegment(0,0,4,5);let v=new a.$;v.emplaceBack(0,0,0,0),v.emplaceBack(a.X,0,a.X,0),v.emplaceBack(0,a.X,0,a.X),v.emplaceBack(a.X,a.X,a.X,a.X),this.rasterBoundsBuffer=o.createVertexBuffer(v,ma.members),this.rasterBoundsSegments=a.a0.simpleSegment(0,0,4,2);let y=new a.aX;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(y,Zu.members),this.viewportSegments=a.a0.simpleSegment(0,0,4,2);let I=new a.aZ;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(I);let A=new a.aY;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(A);let M=this.context.gl;this.stencilClearMode=new Ar({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){let o=this.context,c=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let d=a.H();a.aP(d,0,this.width,this.height,0,0,1),a.K(d,d,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,c.TRIANGLES,Ft.disabled,this.stencilClearMode,on.disabled,yr.disabled,Wi(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,c){if(this.currentStencilSource===o.source||!o.isTileClipped()||!c||!c.length)return;this.currentStencilSource=o.source;let d=this.context,v=d.gl;this.nextStencilID+c.length>256&&this.clearStencil(),d.setColorMode(on.disabled),d.setDepthMode(Ft.disabled);let y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(let I of c){let A=this._tileClippingMaskIDs[I.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(I);y.draw(d,v.TRIANGLES,Ft.disabled,new Ar({func:v.ALWAYS,mask:0},A,255,v.KEEP,v.KEEP,v.REPLACE),on.disabled,yr.disabled,Wi(I.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let o=this.nextStencilID++,c=this.context.gl;return new Ar({func:c.NOTEQUAL,mask:255},o,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(o){let c=this.context.gl;return new Ar({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(o){let c=this.context.gl,d=o.sort((I,A)=>A.overscaledZ-I.overscaledZ),v=d[d.length-1].overscaledZ,y=d[0].overscaledZ-v+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();let I={};for(let A=0;A<y;A++)I[A+v]=new Ar({func:c.GEQUAL,mask:255},A+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=y,[I,d]}return[{[v]:Ar.disabled},d]}colorModeForRenderPass(){let o=this.context.gl;return this._showOverdrawInspector?new on([o.CONSTANT_COLOR,o.ONE],new a.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?on.unblended:on.alphaBlended}depthModeForSublayer(o,c,d){if(!this.opaquePassEnabledForLayer())return Ft.disabled;let v=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new Ft(d||this.context.gl.LEQUAL,c,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,c){this.style=o,this.options=c,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(w.now()),this.imageManager.beginFrame();let d=this.style._order,v=this.style.sourceCaches,y={},I={},A={};for(let M in v){let D=v[M];D.used&&D.prepare(this.context),y[M]=D.getVisibleCoordinates(),I[M]=y[M].slice().reverse(),A[M]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<d.length;M++)if(this.style._layers[d[M]].is3D()){this.opaquePassCutoff=M;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let M of d){let D=this.style._layers[M];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;let N=I[D.source];(D.type==="custom"||N.length)&&this.renderLayer(this,v[D.source],D,N)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?a.aM.black:a.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(M,D){let N=M.context,F=N.gl,G=((ce,fe,re)=>({u_sky_color:ce.properties.get("sky-color"),u_horizon_color:ce.properties.get("horizon-color"),u_horizon:(fe.height/2+fe.getHorizon())*re,u_sky_horizon_blend:ce.properties.get("sky-horizon-blend")*fe.height/2*re}))(D,M.style.map.transform,M.pixelRatio),Y=new Ft(F.LEQUAL,Ft.ReadWrite,[0,1]),ee=Ar.disabled,ae=M.colorModeForRenderPass(),le=M.useProgram("sky");if(!D.mesh){let ce=new a.aX;ce.emplaceBack(-1,-1),ce.emplaceBack(1,-1),ce.emplaceBack(1,1),ce.emplaceBack(-1,1);let fe=new a.aY;fe.emplaceBack(0,1,2),fe.emplaceBack(0,2,3),D.mesh=new Jp(N.createVertexBuffer(ce,Zu.members),N.createIndexBuffer(fe),a.a0.simpleSegment(0,0,ce.length,fe.length))}le.draw(N,F.TRIANGLES,Y,ee,ae,yr.disabled,G,void 0,"sky",D.mesh.vertexBuffer,D.mesh.indexBuffer,D.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){let M=this.style._layers[d[this.currentLayer]],D=v[M.source],N=y[M.source];this._renderTileClippingMasks(M,N),this.renderLayer(this,D,M,N)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){let M=this.style._layers[d[this.currentLayer]],D=v[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;let N=(M.type==="symbol"?A:I)[M.source];this._renderTileClippingMasks(M,y[M.source]),this.renderLayer(this,D,M,N)}if(this.options.showTileBoundaries){let M=function(D,N){let F=null,G=Object.values(D._layers).flatMap(le=>le.source&&!le.isHidden(N)?[D.sourceCaches[le.source]]:[]),Y=G.filter(le=>le.getSource().type==="vector"),ee=G.filter(le=>le.getSource().type!=="vector"),ae=le=>{(!F||F.getSource().maxzoom<le.getSource().maxzoom)&&(F=le)};return Y.forEach(le=>ae(le)),F||ee.forEach(le=>ae(le)),F}(this.style,this.transform.zoom);M&&function(D,N,F){for(let G=0;G<F.length;G++)X1(D,N,F[G])}(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){let D=M.transform.padding;pc(M,M.transform.height-(D.top||0),3,Rg),pc(M,D.bottom||0,3,rr),K1(M,D.left||0,3,Xp),K1(M,M.transform.width-(D.right||0),3,_q);let N=M.transform.centerPoint;(function(F,G,Y,ee){Yp(F,G-1,Y-10,2,20,ee),Yp(F,G-10,Y-1,20,2,ee)})(M,N.x,M.transform.height-N.y,Z1)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(o){if(!this.style||!this.style.map||!this.style.map.terrain)return;let c=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix,v=this.terrainFacilitator.dirty;v||(v=o?!a.a_(c,d):!a.a$(c,d)),v||(v=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),v&&(a.b0(c,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,I){let A=y.context,M=A.gl,D=on.unblended,N=new Ft(M.LEQUAL,Ft.ReadWrite,[0,1]),F=I.getTerrainMesh(),G=I.sourceCache.getRenderableTiles(),Y=y.useProgram("terrainDepth");A.bindFramebuffer.set(I.getFramebuffer("depth").framebuffer),A.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),A.clear({color:a.aM.transparent,depth:1});for(let ee of G){let ae=I.getTerrainData(ee.tileID),le={u_matrix:y.transform.calculatePosMatrix(ee.tileID.toUnwrapped()),u_ele_delta:I.getMeshFrameDelta(y.transform.zoom)};Y.draw(A,M.TRIANGLES,N,Ar.disabled,D,yr.backCCW,le,ae,"terrain",F.vertexBuffer,F.indexBuffer,F.segments)}A.bindFramebuffer.set(null),A.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,I){let A=y.context,M=A.gl,D=on.unblended,N=new Ft(M.LEQUAL,Ft.ReadWrite,[0,1]),F=I.getTerrainMesh(),G=I.getCoordsTexture(),Y=I.sourceCache.getRenderableTiles(),ee=y.useProgram("terrainCoords");A.bindFramebuffer.set(I.getFramebuffer("coords").framebuffer),A.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),A.clear({color:a.aM.transparent,depth:1}),I.coordsIndex=[];for(let ae of Y){let le=I.getTerrainData(ae.tileID);A.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,G.texture);let ce={u_matrix:y.transform.calculatePosMatrix(ae.tileID.toUnwrapped()),u_terrain_coords_id:(255-I.coordsIndex.length)/255,u_texture:0,u_ele_delta:I.getMeshFrameDelta(y.transform.zoom)};ee.draw(A,M.TRIANGLES,N,Ar.disabled,D,yr.backCCW,ce,le,"terrain",F.vertexBuffer,F.indexBuffer,F.segments),I.coordsIndex.push(ae.tileID.key)}A.bindFramebuffer.set(null),A.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(o,c,d,v){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(v||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(y,I,A,M,D){if(y.renderPass!=="translucent")return;let N=Ar.disabled,F=y.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(G,Y,ee,ae,le,ce,fe,re,ve){let ge=Y.transform,be=Hu(),Pe=le==="map",ke=ce==="map";for(let We of G){let et=ae.getTile(We),Ve=et.getBucket(ee);if(!Ve||!Ve.text||!Ve.text.segments.get().length)continue;let Be=a.ag(Ve.textSizeData,ge.zoom),at=Ut(et,1,Y.transform.zoom),wt=Qs(We.posMatrix,ke,Pe,Y.transform,at),$e=ee.layout.get("icon-text-fit")!=="none"&&Ve.hasIconData();if(Be){let Xe=Math.pow(2,ge.zoom-et.tileID.overscaledZ),_t=Y.style.map.terrain?(Pt,Vt)=>Y.style.map.terrain.getElevation(We,Pt,Vt):null,Dr=be.translatePosition(ge,et,fe,re);lc(Ve,Pe,ke,ve,ge,wt,We.posMatrix,Xe,Be,$e,be,Dr,We.toUnwrapped(),_t)}}}(M,y,A,I,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),D),A.paint.get("icon-opacity").constantOr(1)!==0&&Pg(y,I,A,M,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),N,F),A.paint.get("text-opacity").constantOr(1)!==0&&Pg(y,I,A,M,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),N,F),I.map.showCollisionBoxes&&(of(y,I,A,M,!0),of(y,I,A,M,!1))})(o,c,d,v,this.style.placement.variableOffsets);break;case"circle":(function(y,I,A,M){if(y.renderPass!=="translucent")return;let D=A.paint.get("circle-opacity"),N=A.paint.get("circle-stroke-width"),F=A.paint.get("circle-stroke-opacity"),G=!A.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(N.constantOr(1)===0||F.constantOr(1)===0))return;let Y=y.context,ee=Y.gl,ae=y.depthModeForSublayer(0,Ft.ReadOnly),le=Ar.disabled,ce=y.colorModeForRenderPass(),fe=[];for(let re=0;re<M.length;re++){let ve=M[re],ge=I.getTile(ve),be=ge.getBucket(A);if(!be)continue;let Pe=be.programConfigurations.get(A.id),ke=y.useProgram("circle",Pe),We=be.layoutVertexBuffer,et=be.indexBuffer,Ve=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ve),Be={programConfiguration:Pe,program:ke,layoutVertexBuffer:We,indexBuffer:et,uniformValues:aq(y,ve,ge,A),terrainData:Ve};if(G){let at=be.segments.get();for(let wt of at)fe.push({segments:new a.a0([wt]),sortKey:wt.sortKey,state:Be})}else fe.push({segments:be.segments,sortKey:0,state:Be})}G&&fe.sort((re,ve)=>re.sortKey-ve.sortKey);for(let re of fe){let{programConfiguration:ve,program:ge,layoutVertexBuffer:be,indexBuffer:Pe,uniformValues:ke,terrainData:We}=re.state;ge.draw(Y,ee.TRIANGLES,ae,le,ce,yr.disabled,ke,We,A.id,be,Pe,re.segments,A.paint,y.transform.zoom,ve)}})(o,c,d,v);break;case"heatmap":(function(y,I,A,M){if(A.paint.get("heatmap-opacity")===0)return;let D=y.context;if(y.style.map.terrain){for(let N of M){let F=I.getTile(N);I.hasRenderableParent(N)||(y.renderPass==="offscreen"?Og(y,F,A,N):y.renderPass==="translucent"&&tl(y,A,N))}D.viewport.set([0,0,y.width,y.height])}else y.renderPass==="offscreen"?function(N,F,G,Y){let ee=N.context,ae=ee.gl,le=Ar.disabled,ce=new on([ae.ONE,ae.ONE],a.aM.transparent,[!0,!0,!0,!0]);(function(fe,re,ve){let ge=fe.gl;fe.activeTexture.set(ge.TEXTURE1),fe.viewport.set([0,0,re.width/4,re.height/4]);let be=ve.heatmapFbos.get(a.aU);be?(ge.bindTexture(ge.TEXTURE_2D,be.colorAttachment.get()),fe.bindFramebuffer.set(be.framebuffer)):(be=uf(fe,re.width/4,re.height/4),ve.heatmapFbos.set(a.aU,be))})(ee,N,G),ee.clear({color:a.aM.transparent});for(let fe=0;fe<Y.length;fe++){let re=Y[fe];if(F.hasRenderableParent(re))continue;let ve=F.getTile(re),ge=ve.getBucket(G);if(!ge)continue;let be=ge.programConfigurations.get(G.id),Pe=N.useProgram("heatmap",be),{zoom:ke}=N.transform;Pe.draw(ee,ae.TRIANGLES,Ft.disabled,le,ce,yr.disabled,Hi(re.posMatrix,ve,ke,G.paint.get("heatmap-intensity")),null,G.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,G.paint,N.transform.zoom,be)}ee.viewport.set([0,0,N.width,N.height])}(y,I,A,M):y.renderPass==="translucent"&&function(N,F){let G=N.context,Y=G.gl;G.setColorMode(N.colorModeForRenderPass());let ee=F.heatmapFbos.get(a.aU);ee&&(G.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,ee.colorAttachment.get()),G.activeTexture.set(Y.TEXTURE1),lf(G,F).bind(Y.LINEAR,Y.CLAMP_TO_EDGE),N.useProgram("heatmapTexture").draw(G,Y.TRIANGLES,Ft.disabled,Ar.disabled,N.colorModeForRenderPass(),yr.disabled,jp(N,F,0,1),null,F.id,N.viewportBuffer,N.quadTriangleIndexBuffer,N.viewportSegments,F.paint,N.transform.zoom))}(y,A)})(o,c,d,v);break;case"line":(function(y,I,A,M){if(y.renderPass!=="translucent")return;let D=A.paint.get("line-opacity"),N=A.paint.get("line-width");if(D.constantOr(1)===0||N.constantOr(1)===0)return;let F=y.depthModeForSublayer(0,Ft.ReadOnly),G=y.colorModeForRenderPass(),Y=A.paint.get("line-dasharray"),ee=A.paint.get("line-pattern"),ae=ee.constantOr(1),le=A.paint.get("line-gradient"),ce=A.getCrossfadeParameters(),fe=ae?"linePattern":Y?"lineSDF":le?"lineGradient":"line",re=y.context,ve=re.gl,ge=!0;for(let be of M){let Pe=I.getTile(be);if(ae&&!Pe.patternsLoaded())continue;let ke=Pe.getBucket(A);if(!ke)continue;let We=ke.programConfigurations.get(A.id),et=y.context.program.get(),Ve=y.useProgram(fe,We),Be=ge||Ve.program!==et,at=y.style.map.terrain&&y.style.map.terrain.getTerrainData(be),wt=ee.constantOr(null);if(wt&&Pe.imageAtlas){let _t=Pe.imageAtlas,Dr=_t.patternPositions[wt.to.toString()],Pt=_t.patternPositions[wt.from.toString()];Dr&&Pt&&We.setConstantPatternPositions(Dr,Pt)}let $e=at?be:null,Xe=ae?sc(y,Pe,A,ce,$e):Y?oq(y,Pe,A,Y,ce,$e):le?M1(y,Pe,A,ke.lineClipsArray.length,$e):Up(y,Pe,A,$e);if(ae)re.activeTexture.set(ve.TEXTURE0),Pe.imageAtlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),We.updatePaintBuffers(ce);else if(Y&&(Be||y.lineAtlas.dirty))re.activeTexture.set(ve.TEXTURE0),y.lineAtlas.bind(re);else if(le){let _t=ke.gradients[A.id],Dr=_t.texture;if(A.gradientVersion!==_t.version){let Pt=256;if(A.stepInterpolant){let Vt=I.getSource().maxzoom,Lr=be.canonical.z===Vt?Math.ceil(1<<y.transform.maxZoom-be.canonical.z):1;Pt=a.ac(a.aV(ke.maxLineLength/a.X*1024*Lr),256,re.maxTextureSize)}_t.gradient=a.aW({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:Pt,image:_t.gradient||void 0,clips:ke.lineClipsArray}),_t.texture?_t.texture.update(_t.gradient):_t.texture=new Le(re,_t.gradient,ve.RGBA),_t.version=A.gradientVersion,Dr=_t.texture}re.activeTexture.set(ve.TEXTURE0),Dr.bind(A.stepInterpolant?ve.NEAREST:ve.LINEAR,ve.CLAMP_TO_EDGE)}Ve.draw(re,ve.TRIANGLES,F,y.stencilModeForClipping(be),G,yr.disabled,Xe,at,A.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,A.paint,y.transform.zoom,We,ke.layoutVertexBuffer2),ge=!1}})(o,c,d,v);break;case"fill":(function(y,I,A,M){let D=A.paint.get("fill-color"),N=A.paint.get("fill-opacity");if(N.constantOr(1)===0)return;let F=y.colorModeForRenderPass(),G=A.paint.get("fill-pattern"),Y=y.opaquePassEnabledForLayer()&&!G.constantOr(1)&&D.constantOr(a.aM.transparent).a===1&&N.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===Y){let ee=y.depthModeForSublayer(1,y.renderPass==="opaque"?Ft.ReadWrite:Ft.ReadOnly);cf(y,I,A,M,ee,F,!1)}if(y.renderPass==="translucent"&&A.paint.get("fill-antialias")){let ee=y.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,Ft.ReadOnly);cf(y,I,A,M,ee,F,!0)}})(o,c,d,v);break;case"fill-extrusion":(function(y,I,A,M){let D=A.paint.get("fill-extrusion-opacity");if(D!==0&&y.renderPass==="translucent"){let N=new Ft(y.context.gl.LEQUAL,Ft.ReadWrite,y.depthRangeFor3D);if(D!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))Kp(y,I,A,M,N,Ar.disabled,on.disabled),Kp(y,I,A,M,N,y.stencilModeFor3D(),y.colorModeForRenderPass());else{let F=y.colorModeForRenderPass();Kp(y,I,A,M,N,Ar.disabled,F)}}})(o,c,d,v);break;case"hillshade":(function(y,I,A,M){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;let D=y.context,N=y.depthModeForSublayer(0,Ft.ReadOnly),F=y.colorModeForRenderPass(),[G,Y]=y.renderPass==="translucent"?y.stencilConfigForOverlap(M):[{},M];for(let ee of Y){let ae=I.getTile(ee);ae.needsHillshadePrepare!==void 0&&ae.needsHillshadePrepare&&y.renderPass==="offscreen"?fc(y,ae,A,N,Ar.disabled,F):y.renderPass==="translucent"&&hc(y,ee,ae,A,N,G[ee.overscaledZ],F)}D.viewport.set([0,0,y.width,y.height])})(o,c,d,v);break;case"raster":(function(y,I,A,M){if(y.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!M.length)return;let D=y.context,N=D.gl,F=I.getSource(),G=y.useProgram("raster"),Y=y.colorModeForRenderPass(),[ee,ae]=F instanceof go?[{},M]:y.stencilConfigForOverlap(M),le=ae[ae.length-1].overscaledZ,ce=!y.options.moving;for(let fe of ae){let re=y.depthModeForSublayer(fe.overscaledZ-le,A.paint.get("raster-opacity")===1?Ft.ReadWrite:Ft.ReadOnly,N.LESS),ve=I.getTile(fe);ve.registerFadeDuration(A.paint.get("raster-fade-duration"));let ge=I.findLoadedParent(fe,0),be=I.findLoadedSibling(fe),Pe=H1(ve,ge||be||null,I,A,y.transform,y.style.map.terrain),ke,We,et=A.paint.get("raster-resampling")==="nearest"?N.NEAREST:N.LINEAR;D.activeTexture.set(N.TEXTURE0),ve.texture.bind(et,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(N.TEXTURE1),ge?(ge.texture.bind(et,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),ke=Math.pow(2,ge.tileID.overscaledZ-ve.tileID.overscaledZ),We=[ve.tileID.canonical.x*ke%1,ve.tileID.canonical.y*ke%1]):ve.texture.bind(et,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),ve.texture.useMipmap&&D.extTextureFilterAnisotropic&&y.transform.pitch>20&&N.texParameterf(N.TEXTURE_2D,D.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,D.extTextureFilterAnisotropicMax);let Ve=y.style.map.terrain&&y.style.map.terrain.getTerrainData(fe),Be=Ve?fe:null,at=Be?Be.posMatrix:y.transform.calculatePosMatrix(fe.toUnwrapped(),ce),wt=sq(at,We||[0,0],ke||1,Pe,A);F instanceof go?G.draw(D,N.TRIANGLES,re,Ar.disabled,Y,yr.disabled,wt,Ve,A.id,F.boundsBuffer,y.quadTriangleIndexBuffer,F.boundsSegments):G.draw(D,N.TRIANGLES,re,ee[fe.overscaledZ],Y,yr.disabled,wt,Ve,A.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(o,c,d,v);break;case"background":(function(y,I,A,M){let D=A.paint.get("background-color"),N=A.paint.get("background-opacity");if(N===0)return;let F=y.context,G=F.gl,Y=y.transform,ee=Y.tileSize,ae=A.paint.get("background-pattern");if(y.isPatternMissing(ae))return;let le=!ae&&D.a===1&&N===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==le)return;let ce=Ar.disabled,fe=y.depthModeForSublayer(0,le==="opaque"?Ft.ReadWrite:Ft.ReadOnly),re=y.colorModeForRenderPass(),ve=y.useProgram(ae?"backgroundPattern":"background"),ge=M||Y.coveringTiles({tileSize:ee,terrain:y.style.map.terrain});ae&&(F.activeTexture.set(G.TEXTURE0),y.imageManager.bind(y.context));let be=A.getCrossfadeParameters();for(let Pe of ge){let ke=M?Pe.posMatrix:y.transform.calculatePosMatrix(Pe.toUnwrapped()),We=ae?_g(ke,N,y,ae,{tileID:Pe,tileSize:ee},be):Vp(ke,N,D),et=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Pe);ve.draw(F,G.TRIANGLES,fe,ce,re,yr.disabled,We,et,A.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(o,0,d,v);break;case"custom":(function(y,I,A){let M=y.context,D=A.implementation;if(y.renderPass==="offscreen"){let N=D.prerender;N&&(y.setCustomLayerDefaults(),M.setColorMode(y.colorModeForRenderPass()),N.call(D,M.gl,y.transform.customLayerMatrix()),M.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),M.setColorMode(y.colorModeForRenderPass()),M.setStencilMode(Ar.disabled);let N=D.renderingMode==="3d"?new Ft(y.context.gl.LEQUAL,Ft.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,Ft.ReadOnly);M.setDepthMode(N),D.render(M.gl,y.transform.customLayerMatrix(),{farZ:y.transform.farZ,nearZ:y.transform.nearZ,fov:y.transform._fov,modelViewProjectionMatrix:y.transform.modelViewProjectionMatrix,projectionMatrix:y.transform.projectionMatrix}),M.setDirty(),y.setBaseState(),M.bindFramebuffer.set(null)}})(o,0,d);}}translatePosMatrix(o,c,d,v,y){if(!d[0]&&!d[1])return o;let I=y?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(I){let D=Math.sin(I),N=Math.cos(I);d=[d[0]*N-d[1]*D,d[0]*D+d[1]*N]}let A=[y?d[0]:Ut(c,d[0],this.transform.zoom),y?d[1]:Ut(c,d[1],this.transform.zoom),0],M=new Float32Array(16);return a.J(M,o,A),M}saveTileTexture(o){let c=this._tileTextures[o.size[0]];c?c.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){let c=this._tileTextures[o];return c&&c.length>0?c.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;let c=this.imageManager.getPattern(o.from.toString()),d=this.imageManager.getPattern(o.to.toString());return!c||!d}useProgram(o,c){this.cache=this.cache||{};let d=o+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new gg(this.context,eu[o],c,xg[o],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Le(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:o,drawingBufferHeight:c}=this.context.gl;return this.width!==o||this.height!==c}}class dc{constructor(o,c){this.points=o,this.planes=c}static fromInvProjectionMatrix(o,c,d){let v=Math.pow(2,d),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{let M=1/(A=a.af([],A,o))[3]/c*v;return a.b1(A,A,[M,M,1/A[3],M])}),I=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{let M=function(G,Y){var ee=Y[0],ae=Y[1],le=Y[2],ce=ee*ee+ae*ae+le*le;return ce>0&&(ce=1/Math.sqrt(ce)),G[0]=Y[0]*ce,G[1]=Y[1]*ce,G[2]=Y[2]*ce,G}([],function(G,Y,ee){var ae=Y[0],le=Y[1],ce=Y[2],fe=ee[0],re=ee[1],ve=ee[2];return G[0]=le*ve-ce*re,G[1]=ce*fe-ae*ve,G[2]=ae*re-le*fe,G}([],Ie([],y[A[0]],y[A[1]]),Ie([],y[A[2]],y[A[1]]))),D=-((N=M)[0]*(F=y[A[1]])[0]+N[1]*F[1]+N[2]*F[2]);var N,F;return M.concat(D)});return new dc(y,I)}}class vc{constructor(o,c){this.min=o,this.max=c,this.center=function(d,v,y){return d[0]=.5*v[0],d[1]=.5*v[1],d[2]=.5*v[2],d}([],function(d,v,y){return d[0]=v[0]+y[0],d[1]=v[1]+y[1],d[2]=v[2]+y[2],d}([],this.min,this.max))}quadrant(o){let c=[o%2==0,o<2],d=te(this.min),v=te(this.max);for(let y=0;y<c.length;y++)d[y]=c[y]?this.min[y]:this.center[y],v[y]=c[y]?this.center[y]:this.max[y];return v[2]=this.max[2],new vc(d,v)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersects(o){let c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],d=!0;for(let v=0;v<o.planes.length;v++){let y=o.planes[v],I=0;for(let A=0;A<c.length;A++)a.b2(y,c[A])>=0&&I++;if(I===0)return 0;I!==c.length&&(d=!1)}if(d)return 2;for(let v=0;v<3;v++){let y=Number.MAX_VALUE,I=-Number.MAX_VALUE;for(let A=0;A<o.points.length;A++){let M=o.points[A][v]-this.min[v];y=Math.min(y,M),I=Math.max(I,M)}if(I<0||y>this.max[v]-this.min[v])return 0}return 1}}class mc{constructor(o=0,c=0,d=0,v=0){if(isNaN(o)||o<0||isNaN(c)||c<0||isNaN(d)||d<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=c,this.left=d,this.right=v}interpolate(o,c,d){return c.top!=null&&o.top!=null&&(this.top=a.y.number(o.top,c.top,d)),c.bottom!=null&&o.bottom!=null&&(this.bottom=a.y.number(o.bottom,c.bottom,d)),c.left!=null&&o.left!=null&&(this.left=a.y.number(o.left,c.left,d)),c.right!=null&&o.right!=null&&(this.right=a.y.number(o.right,c.right,d)),this}getCenter(o,c){let d=a.ac((this.left+o-this.right)/2,0,o),v=a.ac((this.top+c-this.bottom)/2,0,c);return new a.P(d,v)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new mc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}let Dg=85.051129;class gc{constructor(o,c,d,v,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=o||0,this._maxZoom=c||22,this._minPitch=d==null?0:d,this._maxPitch=v==null?60:v,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new mc,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){let o=new gc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.apply(this),o}apply(o){this.tileSize=o.tileSize,this.latRange=o.latRange,this.lngRange=o.lngRange,this.width=o.width,this.height=o.height,this._center=o._center,this._elevation=o._elevation,this.minElevationForCurrentTile=o.minElevationForCurrentTile,this.zoom=o.zoom,this.angle=o.angle,this._fov=o._fov,this._pitch=o._pitch,this._unmodified=o._unmodified,this._edgeInsets=o._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(o){let c=-a.b3(o,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var d=new a.A(4);return a.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,v,y){var I=v[0],A=v[1],M=v[2],D=v[3],N=Math.sin(y),F=Math.cos(y);d[0]=I*F+M*N,d[1]=A*F+D*N,d[2]=I*-N+M*F,d[3]=A*-N+D*F}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){let c=a.ac(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(o){let c=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,c,d){this._unmodified=!1,this._edgeInsets.interpolate(o,c,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){let c=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(o){let c=[new a.b4(0,o)];if(this._renderWorldCopies){let d=this.pointCoordinate(new a.P(0,0)),v=this.pointCoordinate(new a.P(this.width,0)),y=this.pointCoordinate(new a.P(this.width,this.height)),I=this.pointCoordinate(new a.P(0,this.height)),A=Math.floor(Math.min(d.x,v.x,y.x,I.x)),M=Math.floor(Math.max(d.x,v.x,y.x,I.x)),D=1;for(let N=A-D;N<=M+D;N++)N!==0&&c.push(new a.b4(N,o))}return c}coveringTiles(o){var c,d;let v=this.coveringZoomLevel(o),y=v;if(o.minzoom!==void 0&&v<o.minzoom)return[];o.maxzoom!==void 0&&v>o.maxzoom&&(v=o.maxzoom);let I=this.pointCoordinate(this.getCameraPoint()),A=a.Z.fromLngLat(this.center),M=Math.pow(2,v),D=[M*I.x,M*I.y,0],N=[M*A.x,M*A.y,0],F=dc.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,v),G=o.minzoom||0;!o.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(G=v);let Y=o.terrain?2/Math.min(this.tileSize,o.tileSize)*this.tileSize:3,ee=re=>({aabb:new vc([re*M,0,0],[(re+1)*M,M,0]),zoom:0,x:0,y:0,wrap:re,fullyVisible:!1}),ae=[],le=[],ce=v,fe=o.reparseOverscaled?y:v;if(this._renderWorldCopies)for(let re=1;re<=3;re++)ae.push(ee(-re)),ae.push(ee(re));for(ae.push(ee(0));ae.length>0;){let re=ae.pop(),ve=re.x,ge=re.y,be=re.fullyVisible;if(!be){let Ve=re.aabb.intersects(F);if(Ve===0)continue;be=Ve===2}let Pe=o.terrain?D:N,ke=re.aabb.distanceX(Pe),We=re.aabb.distanceY(Pe),et=Math.max(Math.abs(ke),Math.abs(We));if(re.zoom===ce||et>Y+(1<<ce-re.zoom)-2&&re.zoom>=G){let Ve=ce-re.zoom,Be=D[0]-.5-(ve<<Ve),at=D[1]-.5-(ge<<Ve);le.push({tileID:new a.S(re.zoom===ce?fe:re.zoom,re.wrap,re.zoom,ve,ge),distanceSq:qe([N[0]-.5-ve,N[1]-.5-ge]),tileDistanceToCamera:Math.sqrt(Be*Be+at*at)})}else for(let Ve=0;Ve<4;Ve++){let Be=(ve<<1)+Ve%2,at=(ge<<1)+(Ve>>1),wt=re.zoom+1,$e=re.aabb.quadrant(Ve);if(o.terrain){let Xe=new a.S(wt,re.wrap,wt,Be,at),_t=o.terrain.getMinMaxElevation(Xe),Dr=(c=_t.minElevation)!==null&&c!==void 0?c:this.elevation,Pt=(d=_t.maxElevation)!==null&&d!==void 0?d:this.elevation;$e=new vc([$e.min[0],$e.min[1],Dr],[$e.max[0],$e.max[1],Pt])}ae.push({aabb:$e,zoom:wt,x:Be,y:at,wrap:re.wrap,fullyVisible:be})}}return le.sort((re,ve)=>re.distanceSq-ve.distanceSq).map(re=>re.tileID)}resize(o,c){this.width=o,this.height=c,this.pixelsToGLUnits=[2/o,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){let c=a.ac(o.lat,-85.051129,Dg);return new a.P(a.O(o.lng)*this.worldSize,a.Q(c)*this.worldSize)}unproject(o){return new a.Z(o.x/this.worldSize,o.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(o){let c=this.elevation,d=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,v=this.pointLocation(this.centerPoint,o),y=o.getElevationForLngLatZoom(v,this.tileZoom);if(!(this.elevation-y))return;let I=d+c-y,A=Math.cos(this._pitch)*this.cameraToCenterDistance/I/a.b5(1,v.lat),M=this.scaleZoom(A/this.tileSize);this._elevation=y,this._center=v,this.zoom=M}setLocationAtPoint(o,c){let d=this.pointCoordinate(c),v=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(o),I=new a.Z(y.x-(d.x-v.x),y.y-(d.y-v.y));this.center=this.coordinateLocation(I),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(o,c){return c?this.coordinatePoint(this.locationCoordinate(o),c.getElevationForLngLatZoom(o,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(o))}pointLocation(o,c){return this.coordinateLocation(this.pointCoordinate(o,c))}locationCoordinate(o){return a.Z.fromLngLat(o)}coordinateLocation(o){return o&&o.toLngLat()}pointCoordinate(o,c){if(c){let G=c.pointCoordinate(o);if(G!=null)return G}let d=[o.x,o.y,0,1],v=[o.x,o.y,1,1];a.af(d,d,this.pixelMatrixInverse),a.af(v,v,this.pixelMatrixInverse);let y=d[3],I=v[3],A=d[1]/y,M=v[1]/I,D=d[2]/y,N=v[2]/I,F=D===N?0:(0-D)/(N-D);return new a.Z(a.y.number(d[0]/y,v[0]/I,F)/this.worldSize,a.y.number(A,M,F)/this.worldSize)}coordinatePoint(o,c=0,d=this.pixelMatrix){let v=[o.x*this.worldSize,o.y*this.worldSize,c,1];return a.af(v,v,d),new a.P(v[0]/v[3],v[1]/v[3])}getBounds(){let o=Math.max(0,this.height/2-this.getHorizon());return new Ee().extend(this.pointLocation(new a.P(0,o))).extend(this.pointLocation(new a.P(this.width,o))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ee([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Dg])}calculateTileMatrix(o){let c=o.canonical,d=this.worldSize/this.zoomScale(c.z),v=c.x+Math.pow(2,c.z)*o.wrap,y=a.an(new Float64Array(16));return a.J(y,y,[v*d,c.y*d,0]),a.K(y,y,[d/a.X,d/a.X,1]),y}calculatePosMatrix(o,c=!1){let d=o.key,v=c?this._alignedPosMatrixCache:this._posMatrixCache;if(v[d])return v[d];let y=this.calculateTileMatrix(o);return a.L(y,c?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,y),v[d]=new Float32Array(y),v[d]}calculateFogMatrix(o){let c=o.key,d=this._fogMatrixCache;if(d[c])return d[c];let v=this.calculateTileMatrix(o);return a.L(v,this.fogMatrix,v),d[c]=new Float32Array(v),d[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(o,c){c=a.ac(+c,this.minZoom,this.maxZoom);let d={center:new a.N(o.lng,o.lat),zoom:c},v=this.lngRange;if(!this._renderWorldCopies&&v===null){let re=179.9999999999;v=[-re,re]}let y=this.tileSize*this.zoomScale(d.zoom),I=0,A=y,M=0,D=y,N=0,F=0,{x:G,y:Y}=this.size;if(this.latRange){let re=this.latRange;I=a.Q(re[1])*y,A=a.Q(re[0])*y,A-I<Y&&(N=Y/(A-I))}v&&(M=a.b3(a.O(v[0])*y,0,y),D=a.b3(a.O(v[1])*y,0,y),D<M&&(D+=y),D-M<G&&(F=G/(D-M)));let{x:ee,y:ae}=this.project.call({worldSize:y},o),le,ce,fe=Math.max(F||0,N||0);if(fe){let re=new a.P(F?(D+M)/2:ee,N?(A+I)/2:ae);return d.center=this.unproject.call({worldSize:y},re).wrap(),d.zoom+=this.scaleZoom(fe),d}if(this.latRange){let re=Y/2;ae-re<I&&(ce=I+re),ae+re>A&&(ce=A-re)}if(v){let re=(M+D)/2,ve=ee;this._renderWorldCopies&&(ve=a.b3(ee,re-y/2,re+y/2));let ge=G/2;ve-ge<M&&(le=M+ge),ve+ge>D&&(le=D-ge)}if(le!==void 0||ce!==void 0){let re=new a.P(le!=null?le:ee,ce!=null?ce:ae);d.center=this.unproject.call({worldSize:y},re).wrap()}return d}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let o=this._unmodified,{center:c,zoom:d}=this.getConstrained(this.center,this.zoom);this.center=c,this.zoom=d,this._unmodified=o,this._constraining=!1}_calcMatrices(){if(!this.height)return;let o=this.centerOffset,c=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b5(1,this.center.lat)*this.worldSize;let v=a.an(new Float64Array(16));a.K(v,v,[this.width/2,-this.height/2,1]),a.J(v,v,[1,-1,0]),this.labelPlaneMatrix=v,v=a.an(new Float64Array(16)),a.K(v,v,[1,-1,1]),a.J(v,v,[-1,-1,0]),a.K(v,v,[2/this.width,2/this.height,1]),this.glCoordMatrix=v;let y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),I=Math.min(this.elevation,this.minElevationForCurrentTile),A=y-I*this._pixelPerMeter/Math.cos(this._pitch),M=I<0?A:y,D=Math.PI/2+this._pitch,N=this._fov*(.5+o.y/this.height),F=Math.sin(N)*M/Math.sin(a.ac(Math.PI-D-N,.01,Math.PI-.01)),G=this.getHorizon(),Y=2*Math.atan(G/this.cameraToCenterDistance)*(.5+o.y/(2*G)),ee=Math.sin(Y)*M/Math.sin(a.ac(Math.PI-D-Y,.01,Math.PI-.01)),ae=Math.min(F,ee);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*ae+M),this.nearZ=this.height/50,v=new Float64Array(16),a.b6(v,this._fov,this.width/this.height,this.nearZ,this.farZ),v[8]=2*-o.x/this.width,v[9]=2*o.y/this.height,this.projectionMatrix=a.ae(v),a.K(v,v,[1,-1,1]),a.J(v,v,[0,0,-this.cameraToCenterDistance]),a.b7(v,v,this._pitch),a.ad(v,v,this.angle),a.J(v,v,[-c,-d,0]),this.mercatorMatrix=a.K([],v,[this.worldSize,this.worldSize,this.worldSize]),a.K(v,v,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.L(new Float64Array(16),this.labelPlaneMatrix,v),a.J(v,v,[0,0,-this.elevation]),this.modelViewProjectionMatrix=v,this.invModelViewProjectionMatrix=a.as([],v),this.fogMatrix=new Float64Array(16),a.b6(this.fogMatrix,this._fov,this.width/this.height,y,this.farZ),this.fogMatrix[8]=2*-o.x/this.width,this.fogMatrix[9]=2*o.y/this.height,a.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b7(this.fogMatrix,this.fogMatrix,this._pitch),a.ad(this.fogMatrix,this.fogMatrix,this.angle),a.J(this.fogMatrix,this.fogMatrix,[-c,-d,0]),a.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=a.L(new Float64Array(16),this.labelPlaneMatrix,v);let le=this.width%2/2,ce=this.height%2/2,fe=Math.cos(this.angle),re=Math.sin(this.angle),ve=c-Math.round(c)+fe*le+re*ce,ge=d-Math.round(d)+fe*ce+re*le,be=new Float64Array(v);if(a.J(be,be,[ve>.5?ve-1:ve,ge>.5?ge-1:ge,0]),this.alignedModelViewProjectionMatrix=be,v=a.as(new Float64Array(16),this.pixelMatrix),!v)throw new Error("failed to invert matrix");this.pixelMatrixInverse=v,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let o=this.pointCoordinate(new a.P(0,0)),c=[o.x*this.worldSize,o.y*this.worldSize,0,1];return a.af(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,o))}getCameraQueryGeometry(o){let c=this.getCameraPoint();if(o.length===1)return[o[0],c];{let d=c.x,v=c.y,y=c.x,I=c.y;for(let A of o)d=Math.min(d,A.x),v=Math.min(v,A.y),y=Math.max(y,A.x),I=Math.max(I,A.y);return[new a.P(d,v),new a.P(y,v),new a.P(y,I),new a.P(d,I),new a.P(d,v)]}}lngLatToCameraDepth(o,c){let d=this.locationCoordinate(o),v=[d.x*this.worldSize,d.y*this.worldSize,c,1];return a.af(v,v,this.modelViewProjectionMatrix),v[2]/v[3]}}function hf(_,o){let c,d=!1,v=null,y=null,I=()=>{v=null,d&&(_.apply(y,c),v=setTimeout(I,o),d=!1)};return(...A)=>(d=!0,y=this,c=A,v||I(),v)}class ed{constructor(o){this._getCurrentHash=()=>{let c=window.location.hash.replace("#","");if(this._hashName){let d;return c.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(d=v)}),(d&&d[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{let c=this._getCurrentHash();if(c.length>=3&&!c.some(d=>isNaN(d))){let d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:d,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{let c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{let c=this._getCurrentHash();if(c.length===0)return;let d=c.join("/"),v=d;v.split("&").length>0&&(v=v.split("&")[0]),this._hashName&&(v=`${this._hashName}=${d}`);let y=window.location.hash.replace(v,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let I=window.location.href.replace(/(#.+)?$/,y);I=I.replace("&&","&"),window.history.replaceState(window.history.state,null,I)},this._updateHash=hf(this._updateHashUnthrottled,300),this._hashName=o&&encodeURIComponent(o)}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(o){let c=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,v=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,v),I=Math.round(c.lng*y)/y,A=Math.round(c.lat*y)/y,M=this._map.getBearing(),D=this._map.getPitch(),N="";if(N+=o?`/${I}/${A}/${d}`:`${d}/${A}/${I}`,(M||D)&&(N+="/"+Math.round(10*M)/10),D&&(N+=`/${Math.round(D)}`),this._hashName){let F=this._hashName,G=!1,Y=window.location.hash.slice(1).split("&").map(ee=>{let ae=ee.split("=")[0];return ae===F?(G=!0,`${ae}=${N}`):ee}).filter(ee=>ee);return G||Y.push(`${F}=${N}`),`#${Y.join("&")}`}return`#${N}`}}let td={linearity:.3,easing:a.b8(0,0,.3,1)},Lg=a.e({deceleration:2500,maxSpeed:1400},td),xq=a.e({deceleration:20,maxSpeed:1400},td),J1=a.e({deceleration:1e3,maxSpeed:360},td),rd=a.e({deceleration:1e3,maxSpeed:90},td);class kg{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:w.now(),settings:o})}_drainInertiaBuffer(){let o=this._inertiaBuffer,c=w.now();for(;o.length>0&&c-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let c={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:y}of this._inertiaBuffer)c.zoom+=y.zoomDelta||0,c.bearing+=y.bearingDelta||0,c.pitch+=y.pitchDelta||0,y.panDelta&&c.pan._add(y.panDelta),y.around&&(c.around=y.around),y.pinchAround&&(c.pinchAround=y.pinchAround);let d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(c.pan.mag()){let y=pf(c.pan.mag(),d,a.e({},Lg,o||{}));v.offset=c.pan.mult(y.amount/c.pan.mag()),v.center=this._map.transform.center,ff(v,y)}if(c.zoom){let y=pf(c.zoom,d,xq);v.zoom=this._map.transform.zoom+y.amount,ff(v,y)}if(c.bearing){let y=pf(c.bearing,d,J1);v.bearing=this._map.transform.bearing+a.ac(y.amount,-179,179),ff(v,y)}if(c.pitch){let y=pf(c.pitch,d,rd);v.pitch=this._map.transform.pitch+y.amount,ff(v,y)}if(v.zoom||v.bearing){let y=c.pinchAround===void 0?c.around:c.pinchAround;v.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),a.e(v,{noMoveStart:!0})}}function ff(_,o){(!_.duration||_.duration<o.duration)&&(_.duration=o.duration,_.easing=o.easing)}function pf(_,o,c){let{maxSpeed:d,linearity:v,deceleration:y}=c,I=a.ac(_*v/(o/1e3),-d,d),A=Math.abs(I)/(y*v);return{easing:c.easing,duration:1e3*A,amount:I*(A/2)}}class ai extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,d,v={}){let y=E.mousePos(c.getCanvas(),d),I=c.unproject(y);super(o,a.e({point:y,lngLat:I,originalEvent:d},v)),this._defaultPrevented=!1,this.target=c}}class rl extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,d){let v=o==="touchend"?d.changedTouches:d.touches,y=E.touchPos(c.getCanvasContainer(),v),I=y.map(M=>c.unproject(M)),A=y.reduce((M,D,N,F)=>M.add(D.div(F.length)),new a.P(0,0));super(o,{points:y,point:A,lngLats:I,lngLat:c.unproject(A),originalEvent:d}),this._defaultPrevented=!1}}class Q1 extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,d){super(o,{originalEvent:d}),this._defaultPrevented=!1}}class eb{constructor(o,c){this._map=o,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new Q1(o.type,this._map,o))}mousedown(o,c){return this._mousedownPos=c,this._firePreventable(new ai(o.type,this._map,o))}mouseup(o){this._map.fire(new ai(o.type,this._map,o))}click(o,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new ai(o.type,this._map,o))}dblclick(o){return this._firePreventable(new ai(o.type,this._map,o))}mouseover(o){this._map.fire(new ai(o.type,this._map,o))}mouseout(o){this._map.fire(new ai(o.type,this._map,o))}touchstart(o){return this._firePreventable(new rl(o.type,this._map,o))}touchmove(o){this._map.fire(new rl(o.type,this._map,o))}touchend(o){this._map.fire(new rl(o.type,this._map,o))}touchcancel(o){this._map.fire(new rl(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class sn{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new ai(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ai("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new ai(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bo{constructor(o){this._map=o}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(o){return this.transform.pointLocation(a.P.convert(o),this._map.terrain)}}class ba{constructor(o,c){this._map=o,this._tr=new bo(o),this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,c){this.isEnabled()&&o.shiftKey&&o.button===0&&(E.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(o,c){if(!this._active)return;let d=c;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;let v=this._startPos;this._lastPos=d,this._box||(this._box=E.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",o));let y=Math.min(v.x,d.x),I=Math.max(v.x,d.x),A=Math.min(v.y,d.y),M=Math.max(v.y,d.y);E.setTransform(this._box,`translate(${y}px,${A}px)`),this._box.style.width=I-y+"px",this._box.style.height=M-A+"px"}mouseupWindow(o,c){if(!this._active||o.button!==0)return;let d=this._startPos,v=c;if(this.reset(),E.suppressClick(),d.x!==v.x||d.y!==v.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:o})),{cameraAnimation:y=>y.fitScreenCoordinates(d,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(E.remove(this._box),this._box=null),E.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,c){return this._map.fire(new a.k(o,{originalEvent:c}))}}function df(_,o){if(_.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${o.length}`);let c={};for(let d=0;d<_.length;d++)c[_[d].identifier]=o[d];return c}class Ng{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,c,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),d.length===this.numTouches&&(this.centroid=function(v){let y=new a.P(0,0);for(let I of v)y._add(I);return y.div(v.length)}(c),this.touches=df(d,c)))}touchmove(o,c,d){if(this.aborted||!this.centroid)return;let v=df(d,c);for(let y in this.touches){let I=v[y];(!I||I.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(o,c,d){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){let v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class nd{constructor(o){this.singleTap=new Ng(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,c,d){this.singleTap.touchstart(o,c,d)}touchmove(o,c,d){this.singleTap.touchmove(o,c,d)}touchend(o,c,d){let v=this.singleTap.touchend(o,c,d);if(v){let y=o.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(v)<30;if(y&&I||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class yc{constructor(o){this._tr=new bo(o),this._zoomIn=new nd({numTouches:1,numTaps:2}),this._zoomOut=new nd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,c,d){this._zoomIn.touchstart(o,c,d),this._zoomOut.touchstart(o,c,d)}touchmove(o,c,d){this._zoomIn.touchmove(o,c,d),this._zoomOut.touchmove(o,c,d)}touchend(o,c,d){let v=this._zoomIn.touchend(o,c,d),y=this._zoomOut.touchend(o,c,d),I=this._tr;return v?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:I.zoom+1,around:I.unproject(v)},{originalEvent:o})}):y?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:I.zoom-1,around:I.unproject(y)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cs{constructor(o){this._enabled=!!o.enable,this._moveStateManager=o.moveStateManager,this._clickTolerance=o.clickTolerance||1,this._moveFunction=o.move,this._activateOnStart=!!o.activateOnStart,o.assignEvents(this),this.reset()}reset(o){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(o)}_move(...o){let c=this._moveFunction(...o);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(o,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(o)&&(this._moveStateManager.startMove(o),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(o,c){if(!this.isEnabled())return;let d=this._lastPoint;if(!d)return;if(o.preventDefault(),!this._moveStateManager.isValidMoveEvent(o))return void this.reset(o);let v=c.length?c[0]:c;return!this._moved&&v.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(d,v))}dragEnd(o){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(o)&&(this._moved&&E.suppressClick(),this.reset(o))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let Fg={0:1,2:2};class id{constructor(o){this._correctEvent=o.checkCorrectEvent}startMove(o){let c=E.mouseButton(o);this._eventButton=c}endMove(o){delete this._eventButton}isValidStartEvent(o){return this._correctEvent(o)}isValidMoveEvent(o){return!function(c,d){let v=Fg[d];return c.buttons===void 0||(c.buttons&v)!==v}(o,this._eventButton)}isValidEndEvent(o){return E.mouseButton(o)===this._eventButton}}class zg{constructor(){this._firstTouch=void 0}_isOneFingerTouch(o){return o.targetTouches.length===1}_isSameTouchEvent(o){return o.targetTouches[0].identifier===this._firstTouch}startMove(o){this._firstTouch=o.targetTouches[0].identifier}endMove(o){delete this._firstTouch}isValidStartEvent(o){return this._isOneFingerTouch(o)}isValidMoveEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}isValidEndEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}}let ad=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=o=>{o.preventDefault()}},jg=({enable:_,clickTolerance:o,bearingDegreesPerPixelMoved:c=.8})=>{let d=new id({checkCorrectEvent:v=>E.mouseButton(v)===0&&v.ctrlKey||E.mouseButton(v)===2});return new Cs({clickTolerance:o,move:(v,y)=>({bearingDelta:(y.x-v.x)*c}),moveStateManager:d,enable:_,assignEvents:ad})},Bg=({enable:_,clickTolerance:o,pitchDegreesPerPixelMoved:c=-.5})=>{let d=new id({checkCorrectEvent:v=>E.mouseButton(v)===0&&v.ctrlKey||E.mouseButton(v)===2});return new Cs({clickTolerance:o,move:(v,y)=>({pitchDelta:(y.y-v.y)*c}),moveStateManager:d,enable:_,assignEvents:ad})};class nl{constructor(o,c){this._clickTolerance=o.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(o){return o<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(o,c,d){return this._calculateTransform(o,c,d)}touchmove(o,c,d){if(this._active){if(!this._shouldBePrevented(d.length))return o.preventDefault(),this._calculateTransform(o,c,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",o)}}touchend(o,c,d){this._calculateTransform(o,c,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,c,d){d.length>0&&(this._active=!0);let v=df(d,c),y=new a.P(0,0),I=new a.P(0,0),A=0;for(let D in v){let N=v[D],F=this._touches[D];F&&(y._add(N),I._add(N.sub(F)),A++,v[D]=N)}if(this._touches=v,this._shouldBePrevented(A)||!I.mag())return;let M=I.div(A);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(A),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class od{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(o,c,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([c[0],c[1]]))}touchmove(o,c,d){if(!this._firstTwoTouches)return;o.preventDefault();let[v,y]=this._firstTwoTouches,I=vf(d,c,v),A=vf(d,c,y);if(!I||!A)return;let M=this._aroundCenter?null:I.add(A).div(2);return this._move([I,A],M,o)}touchend(o,c,d){if(!this._firstTwoTouches)return;let[v,y]=this._firstTwoTouches,I=vf(d,c,v),A=vf(d,c,y);I&&A||(this._active&&E.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function vf(_,o,c){for(let d=0;d<_.length;d++)if(_[d].identifier===c)return o[d]}function Ug(_,o){return Math.log(_/o)/Math.LN2}class Vg extends od{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,c){let d=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(Ug(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ug(this._distance,d),pinchAround:c}}}function $g(_,o){return 180*_.angleWith(o)/Math.PI}class Gg extends od{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,c,d){let v=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$g(this._vector,v),pinchAround:c}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());let c=25/(Math.PI*this._minDiameter)*360,d=$g(o,this._startVector);return Math.abs(d)<c}}function sd(_){return Math.abs(_.y)>Math.abs(_.x)}class _c extends od{constructor(o){super(),this._currentTouchCount=0,this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,c,d){super.touchstart(o,c,d),this._currentTouchCount=d.length}_start(o){this._lastPoints=o,sd(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,c,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let v=o[0].sub(this._lastPoints[0]),y=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,y,d.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(v.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(o,c,d){if(this._valid!==void 0)return this._valid;let v=o.mag()>=2,y=c.mag()>=2;if(!v&&!y)return;if(!v||!y)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;let I=o.y>0==c.y>0;return sd(o)&&sd(c)&&I}}let tb={panStep:100,bearingStep:15,pitchStep:10};class za{constructor(o){this._tr=new bo(o);let c=tb;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let c=0,d=0,v=0,y=0,I=0;switch(o.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:o.shiftKey?d=-1:(o.preventDefault(),y=-1);break;case 39:o.shiftKey?d=1:(o.preventDefault(),y=1);break;case 38:o.shiftKey?v=1:(o.preventDefault(),I=-1);break;case 40:o.shiftKey?v=-1:(o.preventDefault(),I=1);break;default:return;}return this._rotationDisabled&&(d=0,v=0),{cameraAnimation:A=>{let M=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:Vo,zoom:c?Math.round(M.zoom)+c*(o.shiftKey?2:1):M.zoom,bearing:M.bearing+d*this._bearingStep,pitch:M.pitch+v*this._pitchStep,offset:[-y*this._panStep,-I*this._panStep],center:M.center},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Vo(_){return _*(2-_)}let Wg=4.000244140625;class wo{constructor(o,c){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=o,this._tr=new bo(o),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(o){return!!this._map.cooperativeGestures.isEnabled()&&!(o.ctrlKey||this._map.cooperativeGestures.isBypassed(o))}wheel(o){if(!this.isEnabled())return;if(this._shouldBePrevented(o))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",o);let c=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY,d=w.now(),v=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,c!==0&&c%Wg==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(v*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),o.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=o,this._delta-=c,this._active||this._start(o)),o.preventDefault()}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let c=E.mousePos(this._map.getCanvas(),o),d=this._tr;this._around=c.y>d.transform.height/2-d.transform.getHorizon()?a.N.convert(this._aroundCenter?d.center:d.unproject(c)):a.N.convert(d.center),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let o=this._tr.transform;if(this._delta!==0){let M=this._type==="wheel"&&Math.abs(this._delta)>Wg?this._wheelZoomRate:this._defaultZoomRate,D=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&D!==0&&(D=1/D);let N=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):o.scale;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(N*D))),this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let c=typeof this._targetZoom=="number"?this._targetZoom:o.zoom,d=this._startZoom,v=this._easing,y,I=!1,A=w.now()-this._lastWheelEventTime;if(this._type==="wheel"&&d&&v&&A){let M=Math.min(A/200,1),D=v(M);y=a.y.number(d,c,D),M<1?this._frameId||(this._frameId=!0):I=!0}else y=c,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!I,zoomDelta:y-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let c=a.b9;if(this._prevEase){let d=this._prevEase,v=(w.now()-d.start)/d.duration,y=d.easing(v+.01)-d.easing(v),I=.27/Math.sqrt(y*y+1e-4)*.01,A=Math.sqrt(.0729-I*I);c=a.b8(I,A,.25,1)}return this._prevEase={start:w.now(),duration:o,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class il{constructor(o,c){this._clickZoom=o,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class bq{constructor(o){this._tr=new bo(o),this.reset()}reset(){this._active=!1}dblclick(o,c){return o.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(o.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wq{constructor(){this._tap=new nd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(o,c,d){if(!this._swipePoint)if(this._tapTime){let v=c[0],y=o.timeStamp-this._tapTime<500,I=this._tapPoint.dist(v)<30;y&&I?d.length>0&&(this._swipePoint=v,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(o,c,d)}touchmove(o,c,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;let v=c[0],y=v.y-this._swipePoint.y;return this._swipePoint=v,o.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(o,c,d)}touchend(o,c,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{let v=this._tap.touchend(o,c,d);v&&(this._tapTime=o.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rb{constructor(o,c,d){this._el=o,this._mousePan=c,this._touchPan=d}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class nb{constructor(o,c,d){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=c,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Hg{constructor(o,c,d,v){this._el=o,this._touchZoom=c,this._touchRotate=d,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class xc{constructor(o,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=o,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let o=this._map.getCanvasContainer();o.classList.add("maplibregl-cooperative-gestures"),this._container=E.create("div","maplibregl-cooperative-gesture-screen",o);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=c,this._container.appendChild(v);let y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=d,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(E.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(o){return o[this._bypassKey]}notifyGestureBlocked(o,c){this._enabled&&(this._map.fire(new a.k("cooperativegestureprevented",{gestureType:o,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let ja=_=>_.zoom||_.drag||_.pitch||_.rotate;class rt extends a.k{}function ud(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class Zg{constructor(o,c){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,y)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let I=v.type==="renderFrame"?void 0:v,A={needsRenderFrame:!1},M={},D={},N=v.touches,F=N?this._getMapTouches(N):void 0,G=F?E.touchPos(this._map.getCanvas(),F):E.mousePos(this._map.getCanvas(),v);for(let{handlerName:ae,handler:le,allowed:ce}of this._handlers){if(!le.isEnabled())continue;let fe;this._blockedByActive(D,ce,ae)?le.reset():le[y||v.type]&&(fe=le[y||v.type](v,G,F),this.mergeHandlerResult(A,M,fe,ae,I),fe&&fe.needsRenderFrame&&this._triggerRenderFrame()),(fe||le.isActive())&&(D[ae]=le)}let Y={};for(let ae in this._previousActiveHandlers)D[ae]||(Y[ae]=I);this._previousActiveHandlers=D,(Object.keys(Y).length||ud(A))&&(this._changes.push([A,M,Y]),this._triggerRenderFrame()),(Object.keys(D).length||ud(A))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:ee}=A;ee&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ee(this._map))},this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new kg(o),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);let d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(let[v,y,I]of this._listeners)E.addEventListener(v,y,v===document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(let[o,c,d]of this._listeners)E.removeEventListener(o,c,o===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(o){let c=this._map,d=c.getCanvasContainer();this._add("mapEvent",new eb(c,o));let v=c.boxZoom=new ba(c,o);this._add("boxZoom",v),o.interactive&&o.boxZoom&&v.enable();let y=c.cooperativeGestures=new xc(c,o.cooperativeGestures);this._add("cooperativeGestures",y),o.cooperativeGestures&&y.enable();let I=new yc(c),A=new bq(c);c.doubleClickZoom=new il(A,I),this._add("tapZoom",I),this._add("clickZoom",A),o.interactive&&o.doubleClickZoom&&c.doubleClickZoom.enable();let M=new wq;this._add("tapDragZoom",M);let D=c.touchPitch=new _c(c);this._add("touchPitch",D),o.interactive&&o.touchPitch&&c.touchPitch.enable(o.touchPitch);let N=jg(o),F=Bg(o);c.dragRotate=new nb(o,N,F),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",F,["mouseRotate"]),o.interactive&&o.dragRotate&&c.dragRotate.enable();let G=(({enable:fe,clickTolerance:re})=>{let ve=new id({checkCorrectEvent:ge=>E.mouseButton(ge)===0&&!ge.ctrlKey});return new Cs({clickTolerance:re,move:(ge,be)=>({around:be,panDelta:be.sub(ge)}),activateOnStart:!0,moveStateManager:ve,enable:fe,assignEvents:ad})})(o),Y=new nl(o,c);c.dragPan=new rb(d,G,Y),this._add("mousePan",G),this._add("touchPan",Y,["touchZoom","touchRotate"]),o.interactive&&o.dragPan&&c.dragPan.enable(o.dragPan);let ee=new Gg,ae=new Vg;c.touchZoomRotate=new Hg(d,ae,ee,M),this._add("touchRotate",ee,["touchPan","touchZoom"]),this._add("touchZoom",ae,["touchPan","touchRotate"]),o.interactive&&o.touchZoomRotate&&c.touchZoomRotate.enable(o.touchZoomRotate);let le=c.scrollZoom=new wo(c,()=>this._triggerRenderFrame());this._add("scrollZoom",le,["mousePan"]),o.interactive&&o.scrollZoom&&c.scrollZoom.enable(o.scrollZoom);let ce=c.keyboard=new za(c);this._add("keyboard",ce),o.interactive&&o.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new sn(c))}_add(o,c,d){this._handlers.push({handlerName:o,handler:c,allowed:d}),this._handlersById[o]=c}stop(o){if(!this._updatingCamera){for(let{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(let{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ja(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,c,d){for(let v in o)if(v!==d&&(!c||c.indexOf(v)<0))return!0;return!1}_getMapTouches(o){let c=[];for(let d of o)this._el.contains(d.target)&&c.push(d);return c}mergeHandlerResult(o,c,d,v,y){if(!d)return;a.e(o,d);let I={handlerName:v,originalEvent:d.originalEvent||y};d.zoomDelta!==void 0&&(c.zoom=I),d.panDelta!==void 0&&(c.drag=I),d.pitchDelta!==void 0&&(c.pitch=I),d.bearingDelta!==void 0&&(c.rotate=I)}_applyChanges(){let o={},c={},d={};for(let[v,y,I]of this._changes)v.panDelta&&(o.panDelta=(o.panDelta||new a.P(0,0))._add(v.panDelta)),v.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(o.around=v.around),v.pinchAround!==void 0&&(o.pinchAround=v.pinchAround),v.noInertia&&(o.noInertia=v.noInertia),a.e(c,y),a.e(d,I);this._updateMapTransform(o,c,d),this._changes=[]}_updateMapTransform(o,c,d){let v=this._map,y=v._getTransformForUpdate(),I=v.terrain;if(!(ud(o)||I&&this._terrainMovement))return this._fireEvents(c,d,!0);let{panDelta:A,zoomDelta:M,bearingDelta:D,pitchDelta:N,around:F,pinchAround:G}=o;G!==void 0&&(F=G),v._stop(!0),F=F||v.transform.centerPoint;let Y=y.pointLocation(A?F.sub(A):F);D&&(y.bearing+=D),N&&(y.pitch+=N),M&&(y.zoom+=M),I?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(A)):y.setLocationAtPoint(Y,F):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(Y,F)):y.setLocationAtPoint(Y,F),v._applyUpdatedTransform(y),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(c,d,!0)}_fireEvents(o,c,d){let v=ja(this._eventsInProgress),y=ja(o),I={};for(let F in o){let{originalEvent:G}=o[F];this._eventsInProgress[F]||(I[`${F}start`]=G),this._eventsInProgress[F]=o[F]}!v&&y&&this._fireEvent("movestart",y.originalEvent);for(let F in I)this._fireEvent(F,I[F]);y&&this._fireEvent("move",y.originalEvent);for(let F in o){let{originalEvent:G}=o[F];this._fireEvent(F,G)}let A={},M;for(let F in this._eventsInProgress){let{handlerName:G,originalEvent:Y}=this._eventsInProgress[F];this._handlersById[G].isActive()||(delete this._eventsInProgress[F],M=c[G]||Y,A[`${F}end`]=M)}for(let F in A)this._fireEvent(F,A[F]);let D=ja(this._eventsInProgress),N=(v||y)&&!D;if(N&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let F=this._map._getTransformForUpdate();F.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(F)}if(d&&N){this._updatingCamera=!0;let F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),G=Y=>Y!==0&&-this._bearingSnap<Y&&Y<this._bearingSnap;!F||!F.essential&&w.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:M})),G(this._map.getBearing())&&this._map.resetNorth()):(G(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(o,c){this._map.fire(new a.k(o,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new rt("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ib extends a.E{constructor(o,c){super(),this._renderFrameCallback=()=>{let d=Math.min((w.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.N(this.transform.center.lng,this.transform.center.lat)}setCenter(o,c){return this.jumpTo({center:o},c)}panBy(o,c,d){return o=a.P.convert(o).mult(-1),this.panTo(this.transform.center,a.e({offset:o},c),d)}panTo(o,c,d){return this.easeTo(a.e({center:o},c),d)}getZoom(){return this.transform.zoom}setZoom(o,c){return this.jumpTo({zoom:o},c),this}zoomTo(o,c,d){return this.easeTo(a.e({zoom:o},c),d)}zoomIn(o,c){return this.zoomTo(this.getZoom()+1,o,c),this}zoomOut(o,c){return this.zoomTo(this.getZoom()-1,o,c),this}getBearing(){return this.transform.bearing}setBearing(o,c){return this.jumpTo({bearing:o},c),this}getPadding(){return this.transform.padding}setPadding(o,c){return this.jumpTo({padding:o},c),this}rotateTo(o,c,d){return this.easeTo(a.e({bearing:o},c),d)}resetNorth(o,c){return this.rotateTo(0,a.e({duration:1e3},o),c),this}resetNorthPitch(o,c){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},o),c),this}snapToNorth(o,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,c):this}getPitch(){return this.transform.pitch}setPitch(o,c){return this.jumpTo({pitch:o},c),this}cameraForBounds(o,c){o=Ee.convert(o).adjustAntiMeridian();let d=c&&c.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),d,c)}_cameraForBoxAndBearing(o,c,d,v){let y={top:0,bottom:0,right:0,left:0};if(typeof(v=a.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){let Ve=v.padding;v.padding={top:Ve,bottom:Ve,right:Ve,left:Ve}}v.padding=a.e(y,v.padding);let I=this.transform,A=I.padding,M=new Ee(o,c),D=I.project(M.getNorthWest()),N=I.project(M.getNorthEast()),F=I.project(M.getSouthEast()),G=I.project(M.getSouthWest()),Y=a.ba(-d),ee=D.rotate(Y),ae=N.rotate(Y),le=F.rotate(Y),ce=G.rotate(Y),fe=new a.P(Math.max(ee.x,ae.x,ce.x,le.x),Math.max(ee.y,ae.y,ce.y,le.y)),re=new a.P(Math.min(ee.x,ae.x,ce.x,le.x),Math.min(ee.y,ae.y,ce.y,le.y)),ve=fe.sub(re),ge=(I.width-(A.left+A.right+v.padding.left+v.padding.right))/ve.x,be=(I.height-(A.top+A.bottom+v.padding.top+v.padding.bottom))/ve.y;if(be<0||ge<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let Pe=Math.min(I.scaleZoom(I.scale*Math.min(ge,be)),v.maxZoom),ke=a.P.convert(v.offset),We=new a.P((v.padding.left-v.padding.right)/2,(v.padding.top-v.padding.bottom)/2).rotate(a.ba(d)),et=ke.add(We).mult(I.scale/I.zoomScale(Pe));return{center:I.unproject(D.add(F).div(2).sub(et)),zoom:Pe,bearing:d}}fitBounds(o,c,d){return this._fitInternal(this.cameraForBounds(o,c),c,d)}fitScreenCoordinates(o,c,d,v,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(o)),this.transform.pointLocation(a.P.convert(c)),d,v),v,y)}_fitInternal(o,c,d){return o?(delete(c=a.e(o,c)).padding,c.linear?this.easeTo(c,d):this.flyTo(c,d)):this}jumpTo(o,c){this.stop();let d=this._getTransformForUpdate(),v=!1,y=!1,I=!1;return"zoom"in o&&d.zoom!==+o.zoom&&(v=!0,d.zoom=+o.zoom),o.center!==void 0&&(d.center=a.N.convert(o.center)),"bearing"in o&&d.bearing!==+o.bearing&&(y=!0,d.bearing=+o.bearing),"pitch"in o&&d.pitch!==+o.pitch&&(I=!0,d.pitch=+o.pitch),o.padding==null||d.isPaddingEqual(o.padding)||(d.padding=o.padding),this._applyUpdatedTransform(d),this.fire(new a.k("movestart",c)).fire(new a.k("move",c)),v&&this.fire(new a.k("zoomstart",c)).fire(new a.k("zoom",c)).fire(new a.k("zoomend",c)),y&&this.fire(new a.k("rotatestart",c)).fire(new a.k("rotate",c)).fire(new a.k("rotateend",c)),I&&this.fire(new a.k("pitchstart",c)).fire(new a.k("pitch",c)).fire(new a.k("pitchend",c)),this.fire(new a.k("moveend",c))}calculateCameraOptionsFromTo(o,c,d,v=0){let y=a.Z.fromLngLat(o,c),I=a.Z.fromLngLat(d,v),A=I.x-y.x,M=I.y-y.y,D=I.z-y.z,N=Math.hypot(A,M,D);if(N===0)throw new Error("Can't calculate camera options with same From and To");let F=Math.hypot(A,M),G=this.transform.scaleZoom(this.transform.cameraToCenterDistance/N/this.transform.tileSize),Y=180*Math.atan2(A,-M)/Math.PI,ee=180*Math.acos(F/N)/Math.PI;return ee=D<0?90-ee:90+ee,{center:I.toLngLat(),zoom:G,pitch:ee,bearing:Y}}easeTo(o,c){var d;this._stop(!1,o.easeId),((o=a.e({offset:[0,0],duration:500,easing:a.b9},o)).animate===!1||!o.essential&&w.prefersReducedMotion)&&(o.duration=0);let v=this._getTransformForUpdate(),y=v.zoom,I=v.bearing,A=v.pitch,M=v.padding,D="bearing"in o?this._normalizeBearing(o.bearing,I):I,N="pitch"in o?+o.pitch:A,F="padding"in o?o.padding:v.padding,G=a.P.convert(o.offset),Y=v.centerPoint.add(G),ee=v.pointLocation(Y),{center:ae,zoom:le}=v.getConstrained(a.N.convert(o.center||ee),(d=o.zoom)!==null&&d!==void 0?d:y);this._normalizeCenter(ae,v);let ce=v.project(ee),fe=v.project(ae).sub(ce),re=v.zoomScale(le-y),ve,ge;o.around&&(ve=a.N.convert(o.around),ge=v.locationPoint(ve));let be={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||le!==y,this._rotating=this._rotating||I!==D,this._pitching=this._pitching||N!==A,this._padding=!v.isPaddingEqual(F),this._easeId=o.easeId,this._prepareEase(c,o.noMoveStart,be),this.terrain&&this._prepareElevation(ae),this._ease(Pe=>{if(this._zooming&&(v.zoom=a.y.number(y,le,Pe)),this._rotating&&(v.bearing=a.y.number(I,D,Pe)),this._pitching&&(v.pitch=a.y.number(A,N,Pe)),this._padding&&(v.interpolatePadding(M,F,Pe),Y=v.centerPoint.add(G)),this.terrain&&!o.freezeElevation&&this._updateElevation(Pe),ve)v.setLocationAtPoint(ve,ge);else{let ke=v.zoomScale(v.zoom-y),We=le>y?Math.min(2,re):Math.max(.5,re),et=Math.pow(We,1-Pe),Ve=v.unproject(ce.add(fe.mult(Pe*et)).mult(ke));v.setLocationAtPoint(v.renderWorldCopies?Ve.wrap():Ve,Y)}this._applyUpdatedTransform(v),this._fireMoveEvents(c)},Pe=>{this.terrain&&o.freezeElevation&&this._finalizeElevation(),this._afterEase(c,Pe)},o),this}_prepareEase(o,c,d={}){this._moving=!0,c||d.moving||this.fire(new a.k("movestart",o)),this._zooming&&!d.zooming&&this.fire(new a.k("zoomstart",o)),this._rotating&&!d.rotating&&this.fire(new a.k("rotatestart",o)),this._pitching&&!d.pitching&&this.fire(new a.k("pitchstart",o))}_prepareElevation(o){this._elevationCenter=o,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(o){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);let c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(o<1&&c!==this._elevationTarget){let d=this._elevationTarget-this._elevationStart;this._elevationStart+=o*(d-(c-(d*o+this._elevationStart))/(1-o)),this._elevationTarget=c}this.transform.elevation=a.y.number(this._elevationStart,this._elevationTarget,o)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(o){let c=o.getCameraPosition(),d=this.terrain.getElevationForLngLatZoom(c.lngLat,o.zoom);if(c.altitude<d){let v=this.calculateCameraOptionsFromTo(c.lngLat,d,o.center,o.elevation);return{pitch:v.pitch,zoom:v.zoom}}return{}}_applyUpdatedTransform(o){let c=[];if(this.terrain&&c.push(v=>this._elevateCameraIfInsideTerrain(v)),this.transformCameraUpdate&&c.push(v=>this.transformCameraUpdate(v)),!c.length)return;let d=o.clone();for(let v of c){let y=d.clone(),{center:I,zoom:A,pitch:M,bearing:D,elevation:N}=v(y);I&&(y.center=I),A!==void 0&&(y.zoom=A),M!==void 0&&(y.pitch=M),D!==void 0&&(y.bearing=D),N!==void 0&&(y.elevation=N),d.apply(y)}this.transform.apply(d)}_fireMoveEvents(o){this.fire(new a.k("move",o)),this._zooming&&this.fire(new a.k("zoom",o)),this._rotating&&this.fire(new a.k("rotate",o)),this._pitching&&this.fire(new a.k("pitch",o))}_afterEase(o,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;let d=this._zooming,v=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new a.k("zoomend",o)),v&&this.fire(new a.k("rotateend",o)),y&&this.fire(new a.k("pitchend",o)),this.fire(new a.k("moveend",o))}flyTo(o,c){var d;if(!o.essential&&w.prefersReducedMotion){let Xe=a.M(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Xe,c)}this.stop(),o=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.b9},o);let v=this._getTransformForUpdate(),y=v.zoom,I=v.bearing,A=v.pitch,M=v.padding,D="bearing"in o?this._normalizeBearing(o.bearing,I):I,N="pitch"in o?+o.pitch:A,F="padding"in o?o.padding:v.padding,G=a.P.convert(o.offset),Y=v.centerPoint.add(G),ee=v.pointLocation(Y),{center:ae,zoom:le}=v.getConstrained(a.N.convert(o.center||ee),(d=o.zoom)!==null&&d!==void 0?d:y);this._normalizeCenter(ae,v);let ce=v.zoomScale(le-y),fe=v.project(ee),re=v.project(ae).sub(fe),ve=o.curve,ge=Math.max(v.width,v.height),be=ge/ce,Pe=re.mag();if("minZoom"in o){let Xe=a.ac(Math.min(o.minZoom,y,le),v.minZoom,v.maxZoom),_t=ge/v.zoomScale(Xe-y);ve=Math.sqrt(_t/Pe*2)}let ke=ve*ve;function We(Xe){let _t=(be*be-ge*ge+(Xe?-1:1)*ke*ke*Pe*Pe)/(2*(Xe?be:ge)*ke*Pe);return Math.log(Math.sqrt(_t*_t+1)-_t)}function et(Xe){return(Math.exp(Xe)-Math.exp(-Xe))/2}function Ve(Xe){return(Math.exp(Xe)+Math.exp(-Xe))/2}let Be=We(!1),at=function(Xe){return Ve(Be)/Ve(Be+ve*Xe)},wt=function(Xe){return ge*((Ve(Be)*(et(_t=Be+ve*Xe)/Ve(_t))-et(Be))/ke)/Pe;var _t},$e=(We(!0)-Be)/ve;if(Math.abs(Pe)<1e-6||!isFinite($e)){if(Math.abs(ge-be)<1e-6)return this.easeTo(o,c);let Xe=be<ge?-1:1;$e=Math.abs(Math.log(be/ge))/ve,wt=()=>0,at=_t=>Math.exp(Xe*ve*_t)}return o.duration="duration"in o?+o.duration:1e3*$e/("screenSpeed"in o?+o.screenSpeed/ve:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=I!==D,this._pitching=N!==A,this._padding=!v.isPaddingEqual(F),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(ae),this._ease(Xe=>{let _t=Xe*$e,Dr=1/at(_t);v.zoom=Xe===1?le:y+v.scaleZoom(Dr),this._rotating&&(v.bearing=a.y.number(I,D,Xe)),this._pitching&&(v.pitch=a.y.number(A,N,Xe)),this._padding&&(v.interpolatePadding(M,F,Xe),Y=v.centerPoint.add(G)),this.terrain&&!o.freezeElevation&&this._updateElevation(Xe);let Pt=Xe===1?ae:v.unproject(fe.add(re.mult(wt(_t))).mult(Dr));v.setLocationAtPoint(v.renderWorldCopies?Pt.wrap():Pt,Y),this._applyUpdatedTransform(v),this._fireMoveEvents(c)},()=>{this.terrain&&o.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,c){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,c)}return o||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(o,c,d){d.animate===!1||d.duration===0?(o(1),c()):(this._easeStart=w.now(),this._easeOptions=d,this._onEaseFrame=o,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(o,c){o=a.b3(o,-180,180);let d=Math.abs(o-c);return Math.abs(o-360-c)<d&&(o-=360),Math.abs(o+360-c)<d&&(o+=360),o}_normalizeCenter(o,c){if(!c.renderWorldCopies||c.lngRange)return;let d=o.lng-c.center.lng;o.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(o){return this.terrain?this.terrain.getElevationForLngLatZoom(a.N.convert(o),this.transform.tileZoom)-this.transform.elevation:null}}let bc={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class wc{constructor(o=bc){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=o}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options.compact,this._container=E.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=E.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=E.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){E.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,c){let d=this._map._getUIString(`AttributionControl.${c}`);o.title=d,o.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(v=>typeof v!="string"?"":v)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){let v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}let c=this._map.style.sourceCaches;for(let v in c){let y=c[v];if(y.used||y.usedForTerrain){let I=y.getSource();I.attribution&&o.indexOf(I.attribution)<0&&o.push(I.attribution)}}o=o.filter(v=>String(v).trim()),o.sort((v,y)=>v.length-y.length),o=o.filter((v,y)=>{for(let I=y+1;I<o.length;I++)if(o[I].indexOf(v)>=0)return!1;return!0});let d=o.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,o.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Kg{constructor(o={}){this._updateCompact=()=>{let c=this._container.children;if(c.length){let d=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=o}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=E.create("div","maplibregl-ctrl");let c=E.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){E.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Gt{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){let c=++this._id;return this._queue.push({callback:o,id:c,cancelled:!1}),c}remove(o){let c=this._currentlyRunning,d=c?this._queue.concat(c):this._queue;for(let v of d)if(v.id===o)return void(v.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let c=this._currentlyRunning=this._queue;this._queue=[];for(let d of c)if(!d.cancelled&&(d.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Xg=a.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Eq extends a.E{constructor(o){super(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,o.usedForTerrain=!0,o.tileSize=this.tileSize*Mb(2,this.deltaZoom)}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(o,c){this.sourceCache.update(o,c),this._renderableTilesKeys=[];let d={};for(let v of o.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))d[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.posMatrix=new Float64Array(16),a.aP(v.posMatrix,0,a.X,0,a.X,0,1),this._tiles[v.key]=new Gi(v,this.tileSize));for(let v in this._tiles)d[v]||delete this._tiles[v]}freeRtt(o){for(let c in this._tiles){let d=this._tiles[c];(!o||d.tileID.equals(o)||d.tileID.isChildOf(o)||o.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o){let c={};for(let d of this._renderableTilesKeys){let v=this._tiles[d].tileID;if(v.canonical.equals(o.canonical)){let y=o.clone();y.posMatrix=new Float64Array(16),a.aP(y.posMatrix,0,a.X,0,a.X,0,1),c[d]=y}else if(v.canonical.isChildOf(o.canonical)){let y=o.clone();y.posMatrix=new Float64Array(16);let I=v.canonical.z-o.canonical.z,A=v.canonical.x-(v.canonical.x>>I<<I),M=v.canonical.y-(v.canonical.y>>I<<I),D=a.X>>I;a.aP(y.posMatrix,0,D,0,D,0,1),a.J(y.posMatrix,y.posMatrix,[-A*D,-M*D,0]),c[d]=y}else if(o.canonical.isChildOf(v.canonical)){let y=o.clone();y.posMatrix=new Float64Array(16);let I=o.canonical.z-v.canonical.z,A=o.canonical.x-(o.canonical.x>>I<<I),M=o.canonical.y-(o.canonical.y>>I<<I),D=a.X>>I;a.aP(y.posMatrix,0,a.X,0,a.X,0,1),a.J(y.posMatrix,y.posMatrix,[A*D,M*D,0]),a.K(y.posMatrix,y.posMatrix,[1/Mb(2,I),1/Mb(2,I),0]),c[d]=y}}return c}getSourceTile(o,c){let d=this.sourceCache._source,v=o.overscaledZ-this.deltaZoom;if(v>d.maxzoom&&(v=d.maxzoom),v<d.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(v).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!y||!y.dem)&&c)for(;v>=d.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(o.scaledTo(v--).key);return y}tilesAfterTime(o=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=o)}}class Yg{constructor(o,c,d){this.painter=o,this.sourceCache=new Eq(c),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(o,c,d,v=a.X){var y;if(!(c>=0&&c<v&&d>=0&&d<v))return 0;let I=this.getTerrainData(o),A=(y=I.tile)===null||y===void 0?void 0:y.dem;if(!A)return 0;let M=function(ee,ae,le){var ce=ae[0],fe=ae[1];return ee[0]=le[0]*ce+le[4]*fe+le[12],ee[1]=le[1]*ce+le[5]*fe+le[13],ee}([],[c/v*a.X,d/v*a.X],I.u_terrain_matrix),D=[M[0]*A.dim,M[1]*A.dim],N=Math.floor(D[0]),F=Math.floor(D[1]),G=D[0]-N,Y=D[1]-F;return A.get(N,F)*(1-G)*(1-Y)+A.get(N+1,F)*G*(1-Y)+A.get(N,F+1)*(1-G)*Y+A.get(N+1,F+1)*G*Y}getElevationForLngLatZoom(o,c){if(!a.bb(c,o.wrap()))return 0;let{tileID:d,mercatorX:v,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(o,c);return this.getElevation(d,v%a.X,y%a.X,a.X)}getElevation(o,c,d,v=a.X){return this.getDEMElevation(o,c,d,v)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){let v=this.painter.context,y=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Le(v,y,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Le(v,new a.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.an([])}let c=this.sourceCache.getSourceTile(o,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){let v=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new Le(v,c.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),c.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}let d=c&&c+c.tileID.key+o.key;if(d&&!this._demMatrixCache[d]){let v=this.sourceCache.sourceCache._source.maxzoom,y=o.canonical.z-c.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=v?y=o.canonical.z-v:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let I=o.canonical.x-(o.canonical.x>>y<<y),A=o.canonical.y-(o.canonical.y>>y<<y),M=a.bc(new Float64Array(16),[1/(a.X<<y),1/(a.X<<y),0]);a.J(M,M,[I*a.X,A*a.X,0]),this._demMatrixCache[o.key]={matrix:M,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(o){let c=this.painter,d=c.width/devicePixelRatio,v=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Le(c.context,{width:d,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Le(c.context,{width:d,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(d,v,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,d,v))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let o=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,I=0;y<this._coordsTextureSize;y++)for(let A=0;A<this._coordsTextureSize;A++,I+=4)c[I+0]=255&A,c[I+1]=255&y,c[I+2]=A>>8<<4|y>>8,c[I+3]=0;let d=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),v=new Le(o,d,o.gl.RGBA,{premultiply:!1});return v.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(o){this.painter.maybeDrawDepthAndCoords(!0);let c=new Uint8Array(4),d=this.painter.context,v=d.gl,y=Math.round(o.x*this.painter.pixelRatio/devicePixelRatio),I=Math.round(o.y*this.painter.pixelRatio/devicePixelRatio),A=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(y,A-I-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),d.bindFramebuffer.set(null);let M=c[0]+(c[2]>>4<<8),D=c[1]+((15&c[2])<<8),N=this.coordsIndex[255-c[3]],F=N&&this.sourceCache.getTileByID(N);if(!F)return null;let G=this._coordsTextureSize,Y=(1<<F.tileID.canonical.z)*G;return new a.Z((F.tileID.canonical.x*G+M)/Y+F.tileID.wrap,(F.tileID.canonical.y*G+D)/Y,this.getElevation(F.tileID,M,D,G))}depthAtPoint(o){let c=new Uint8Array(4),d=this.painter.context,v=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(o.x,this.painter.height/devicePixelRatio-o.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),d.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;let o=this.painter.context,c=new a.bd,d=new a.aY,v=this.meshSize,y=a.X/v,I=v*v;for(let F=0;F<=v;F++)for(let G=0;G<=v;G++)c.emplaceBack(G*y,F*y,0);for(let F=0;F<I;F+=v+1)for(let G=0;G<v;G++)d.emplaceBack(G+F,v+G+F+1,v+G+F+2),d.emplaceBack(G+F,v+G+F+2,G+F+1);let A=c.length,M=A+2*(v+1);for(let F of[0,1])for(let G=0;G<=v;G++)for(let Y of[0,1])c.emplaceBack(G*y,F*a.X,Y);for(let F=0;F<2*v;F+=2)d.emplaceBack(M+F,M+F+1,M+F+3),d.emplaceBack(M+F,M+F+3,M+F+2),d.emplaceBack(A+F,A+F+3,A+F+1),d.emplaceBack(A+F,A+F+2,A+F+3);let D=c.length,N=D+2*(v+1);for(let F of[0,1])for(let G=0;G<=v;G++)for(let Y of[0,1])c.emplaceBack(F*a.X,G*y,Y);for(let F=0;F<2*v;F+=2)d.emplaceBack(D+F,D+F+1,D+F+3),d.emplaceBack(D+F,D+F+3,D+F+2),d.emplaceBack(N+F,N+F+3,N+F+1),d.emplaceBack(N+F,N+F+2,N+F+3);return this._mesh=new Jp(o.createVertexBuffer(c,Xg.members),o.createIndexBuffer(d),a.a0.simpleSegment(0,0,c.length,d.length)),this._mesh}getMeshFrameDelta(o){return 2*Math.PI*a.be/Math.pow(2,o)/5}getMinTileElevationForLngLatZoom(o,c){var d;let{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(o,c);return(d=this.getMinMaxElevation(v).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(o){let c=this.getTerrainData(o).tile,d={minElevation:null,maxElevation:null};return c&&c.dem&&(d.minElevation=c.dem.min*this.exaggeration,d.maxElevation=c.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(o,c){let d=a.Z.fromLngLat(o.wrap()),v=(1<<c)*a.X,y=d.x*v,I=d.y*v,A=Math.floor(y/a.X),M=Math.floor(I/a.X);return{tileID:new a.S(c,0,c,A,M),mercatorX:y,mercatorY:I}}}class Sq{constructor(o,c,d){this._context=o,this._size=c,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let o of this._objects)o.texture.destroy(),o.fbo.destroy()}_createObject(o){let c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new Le(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(d.texture),{id:o,fbo:c,texture:d,stamp:-1,inUse:!1}}getObjectForId(o){return this._objects[o]}useObject(o){o.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>o.id!==c),this._recentlyUsed.push(o.id)}stampObject(o){o.stamp=++this._stamp}getOrCreateFreeObject(){for(let c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let o=this._createObject(this._objects.length);return this._objects.push(o),o}freeObject(o){o.inUse=!1}freeAllObjects(){for(let o of this._objects)this.freeObject(o)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(o=>!o.inUse)===!1}}let Ec={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ab{constructor(o,c){this.painter=o,this.terrain=c,this.pool=new Sq(o.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(o){return this.pool.getObjectForId(o.rtt[this._stacks.length-1].id).texture}prepareForRender(o,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=o._order.filter(d=>!o._layers[d].isHidden(c)),this._coordsDescendingInv={};for(let d in o.sourceCaches){this._coordsDescendingInv[d]={};let v=o.sourceCaches[d].getVisibleCoordinates();for(let y of v){let I=this.terrain.sourceCache.getTerrainCoords(y);for(let A in I)this._coordsDescendingInv[d][A]||(this._coordsDescendingInv[d][A]=[]),this._coordsDescendingInv[d][A].push(I[A])}}this._coordsDescendingInvStr={};for(let d of o._order){let v=o._layers[d],y=v.source;if(Ec[v.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(let I in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][I]=this._coordsDescendingInv[y][I].map(A=>A.key).sort().join()}}for(let d of this._renderableTiles)for(let v in this._coordsDescendingInvStr){let y=this._coordsDescendingInvStr[v][d.tileID.key];y&&y!==d.rttCoords[v]&&(d.rtt=[])}}renderLayer(o){if(o.isHidden(this.painter.transform.zoom))return!1;let c=o.type,d=this.painter,v=this._renderableLayerIds[this._renderableLayerIds.length-1]===o.id;if(Ec[c]&&(this._prevType&&Ec[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(o.id),!v))return!0;if(Ec[this._prevType]||Ec[c]&&v){this._prevType=c;let y=this._stacks.length-1,I=this._stacks[y]||[];for(let A of this._renderableTiles){if(this.pool.isFull()&&(Y1(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[y]){let D=this.pool.getObjectForId(A.rtt[y].id);if(D.stamp===A.rtt[y].stamp){this.pool.useObject(D);continue}}let M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),A.rtt[y]={id:M.id,stamp:M.stamp},d.context.bindFramebuffer.set(M.fbo.framebuffer),d.context.clear({color:a.aM.transparent,stencil:0}),d.currentStencilSource=void 0;for(let D=0;D<I.length;D++){let N=d.style._layers[I[D]],F=N.source?this._coordsDescendingInv[N.source][A.tileID.key]:[A.tileID];d.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),d._renderTileClippingMasks(N,F),d.renderLayer(d,d.style.sourceCaches[N.source],N,F),N.source&&(A.rttCoords[N.source]=this._coordsDescendingInvStr[N.source][A.tileID.key])}}return Y1(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ec[c]}return!1}}let Jg={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ob=h,Tq={hash:!1,interactive:!0,bearingSnap:7,attributionControl:bc,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Qg=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},Iq={showCompass:!0,showZoom:!0,visualizePitch:!1};class Cq{constructor(o,c,d=!1){this.mousedown=I=>{this.startMouse(a.e({},I,{ctrlKey:!0,preventDefault:()=>I.preventDefault()}),E.mousePos(this.element,I)),E.addEventListener(window,"mousemove",this.mousemove),E.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=I=>{this.moveMouse(I,E.mousePos(this.element,I))},this.mouseup=I=>{this.mouseRotate.dragEnd(I),this.mousePitch&&this.mousePitch.dragEnd(I),this.offTemp()},this.touchstart=I=>{I.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=E.touchPos(this.element,I.targetTouches)[0],this.startTouch(I,this._startPos),E.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.addEventListener(window,"touchend",this.touchend))},this.touchmove=I=>{I.targetTouches.length!==1?this.reset():(this._lastPos=E.touchPos(this.element,I.targetTouches)[0],this.moveTouch(I,this._lastPos))},this.touchend=I=>{I.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;let v=o.dragRotate._mouseRotate.getClickTolerance(),y=o.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=jg({clickTolerance:v,enable:!0}),this.touchRotate=(({enable:I,clickTolerance:A,bearingDegreesPerPixelMoved:M=.8})=>{let D=new zg;return new Cs({clickTolerance:A,move:(N,F)=>({bearingDelta:(F.x-N.x)*M}),moveStateManager:D,enable:I,assignEvents:Qg})})({clickTolerance:v,enable:!0}),this.map=o,d&&(this.mousePitch=Bg({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:I,clickTolerance:A,pitchDegreesPerPixelMoved:M=-.5})=>{let D=new zg;return new Cs({clickTolerance:A,move:(N,F)=>({pitchDelta:(F.y-N.y)*M}),moveStateManager:D,enable:I,assignEvents:Qg})})({clickTolerance:y,enable:!0})),E.addEventListener(c,"mousedown",this.mousedown),E.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),E.addEventListener(c,"touchcancel",this.reset)}startMouse(o,c){this.mouseRotate.dragStart(o,c),this.mousePitch&&this.mousePitch.dragStart(o,c),E.disableDrag()}startTouch(o,c){this.touchRotate.dragStart(o,c),this.touchPitch&&this.touchPitch.dragStart(o,c),E.disableDrag()}moveMouse(o,c){let d=this.map,{bearingDelta:v}=this.mouseRotate.dragMove(o,c)||{};if(v&&d.setBearing(d.getBearing()+v),this.mousePitch){let{pitchDelta:y}=this.mousePitch.dragMove(o,c)||{};y&&d.setPitch(d.getPitch()+y)}}moveTouch(o,c){let d=this.map,{bearingDelta:v}=this.touchRotate.dragMove(o,c)||{};if(v&&d.setBearing(d.getBearing()+v),this.touchPitch){let{pitchDelta:y}=this.touchPitch.dragMove(o,c)||{};y&&d.setPitch(d.getPitch()+y)}}off(){let o=this.element;E.removeEventListener(o,"mousedown",this.mousedown),E.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),E.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.removeEventListener(window,"touchend",this.touchend),E.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){E.enableDrag(),E.removeEventListener(window,"mousemove",this.mousemove),E.removeEventListener(window,"mouseup",this.mouseup),E.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.removeEventListener(window,"touchend",this.touchend)}}let wa;function Rr(_,o,c){let d=new a.N(_.lng,_.lat);if(_=new a.N(_.lng,_.lat),o){let v=new a.N(_.lng-360,_.lat),y=new a.N(_.lng+360,_.lat),I=c.locationPoint(_).distSqr(o);c.locationPoint(v).distSqr(o)<I?_=v:c.locationPoint(y).distSqr(o)<I&&(_=y)}for(;Math.abs(_.lng-c.center.lng)>180;){let v=c.locationPoint(_);if(v.x>=0&&v.y>=0&&v.x<=c.width&&v.y<=c.height)break;_.lng>c.center.lng?_.lng-=360:_.lng+=360}return _.lng!==d.lng&&c.locationPoint(_).y>c.height/2-c.getHorizon()?_:d}let Sc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ld(_,o,c){let d=_.classList;for(let v in Sc)d.remove(`maplibregl-${c}-anchor-${v}`);d.add(`maplibregl-${c}-anchor-${o}`)}class cd extends a.E{constructor(o){if(super(),this._onKeyPress=c=>{let d=c.code,v=c.charCode||c.keyCode;d!=="Space"&&d!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=c=>{let d=c.originalEvent.target,v=this._element;this._popup&&(d===v||v.contains(d))&&this.togglePopup()},this._update=c=>{var d;if(!this._map)return;let v=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!v)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Rr(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),E.setTransform(this._element,`${Sc[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${y}`),w.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){let d=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._subpixelPositioning=o&&o.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(o==null?void 0:o.opacity,o==null?void 0:o.opacityWhenCovered),o&&o.element)this._element=o.element,this._offset=a.P.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=E.create("div");let c=E.createNS("http://www.w3.org/2000/svg","svg"),d=41,v=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${d}px`),c.setAttributeNS(null,"width",`${v}px`),c.setAttributeNS(null,"viewBox",`0 0 ${v} ${d}`);let y=E.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");let I=E.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill-rule","nonzero");let A=E.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");let M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let ce of M){let fe=E.createNS("http://www.w3.org/2000/svg","ellipse");fe.setAttributeNS(null,"opacity","0.04"),fe.setAttributeNS(null,"cx","10.5"),fe.setAttributeNS(null,"cy","5.80029008"),fe.setAttributeNS(null,"rx",ce.rx),fe.setAttributeNS(null,"ry",ce.ry),A.appendChild(fe)}let D=E.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);let N=E.createNS("http://www.w3.org/2000/svg","path");N.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(N);let F=E.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"opacity","0.25"),F.setAttributeNS(null,"fill","#000000");let G=E.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),F.appendChild(G);let Y=E.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Y.setAttributeNS(null,"fill","#FFFFFF");let ee=E.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");let ae=E.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#000000"),ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962");let le=E.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#FFFFFF"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962"),ee.appendChild(ae),ee.appendChild(le),I.appendChild(A),I.appendChild(D),I.appendChild(F),I.appendChild(Y),I.appendChild(ee),c.appendChild(I),c.setAttributeNS(null,"height",d*this._scale+"px"),c.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(c),this._offset=a.P.convert(o&&o.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),ld(this._element,this._anchor,"marker"),o&&o.className)for(let c of o.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(o){return this.remove(),this._map=o,this._element.setAttribute("aria-label",o._getUIString("Marker.Title")),o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),o.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),E.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=a.N.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){let v=Math.abs(13.5)/Math.SQRT2;o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(o){return this._subpixelPositioning=o,this}getPopup(){return this._popup}togglePopup(){let o=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:o?(o.isOpen()?o.remove():(o.setLngLat(this._lngLat),o.addTo(this._map)),this):this}_updateOpacity(o=!1){var c,d;if(!(!((c=this._map)===null||c===void 0)&&c.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(o)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let v=this._map,y=v.terrain.depthAtPoint(this._pos),I=v.terrain.getElevationForLngLatZoom(this._lngLat,v.transform.tileZoom);if(v.transform.lngLatToCameraDepth(this._lngLat,I)-y<.006)return void(this._element.style.opacity=this._opacity);let A=-this._offset.y/v.transform._pixelPerMeter,M=Math.sin(v.getPitch()*Math.PI/180)*A,D=v.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),N=v.transform.lngLatToCameraDepth(this._lngLat,I+M)-D>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&N&&this._popup.remove(),this._element.style.opacity=N?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(o){return this._offset=a.P.convert(o),this._update(),this}addClassName(o){this._element.classList.add(o)}removeClassName(o){this._element.classList.remove(o)}toggleClassName(o){return this._element.classList.toggle(o)}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(o,c){return o===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),o!==void 0&&(this._opacity=o),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}let sb={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},mf=0,gf=!1,$o={maxWidth:100,unit:"metric"};function yf(_,o,c){let d=c&&c.maxWidth||100,v=_._container.clientHeight/2,y=_.unproject([0,v]),I=_.unproject([d,v]),A=y.distanceTo(I);if(c&&c.unit==="imperial"){let M=3.2808*A;M>5280?it(o,d,M/5280,_._getUIString("ScaleControl.Miles")):it(o,d,M,_._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?it(o,d,A/1852,_._getUIString("ScaleControl.NauticalMiles")):A>=1e3?it(o,d,A/1e3,_._getUIString("ScaleControl.Kilometers")):it(o,d,A,_._getUIString("ScaleControl.Meters"))}function it(_,o,c,d){let v=function(y){let I=Math.pow(10,`${Math.floor(y)}`.length-1),A=y/I;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(M){let D=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*D)/D}(A),I*A}(c);_.style.width=o*(v/c)+"px",_.innerHTML=`${v}&nbsp;${d}`}let mt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},hd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function fd(_){if(_){if(typeof _=="number"){let o=Math.round(Math.abs(_)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,_),"top-left":new a.P(o,o),"top-right":new a.P(-o,o),bottom:new a.P(0,-_),"bottom-left":new a.P(o,-o),"bottom-right":new a.P(-o,-o),left:new a.P(_,0),right:new a.P(-_,0)}}if(_ instanceof a.P||Array.isArray(_)){let o=a.P.convert(_);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:a.P.convert(_.center||[0,0]),top:a.P.convert(_.top||[0,0]),"top-left":a.P.convert(_["top-left"]||[0,0]),"top-right":a.P.convert(_["top-right"]||[0,0]),bottom:a.P.convert(_.bottom||[0,0]),"bottom-left":a.P.convert(_["bottom-left"]||[0,0]),"bottom-right":a.P.convert(_["bottom-right"]||[0,0]),left:a.P.convert(_.left||[0,0]),right:a.P.convert(_.right||[0,0])}}return fd(new a.P(0,0))}let ey=h;i.AJAXError=a.bh,i.Evented=a.E,i.LngLat=a.N,i.MercatorCoordinate=a.Z,i.Point=a.P,i.addProtocol=a.bi,i.config=a.a,i.removeProtocol=a.bj,i.AttributionControl=wc,i.BoxZoomHandler=ba,i.CanvasSource=$i,i.CooperativeGesturesHandler=xc,i.DoubleClickZoomHandler=il,i.DragPanHandler=rb,i.DragRotateHandler=nb,i.EdgeInsets=mc,i.FullscreenControl=class extends a.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var o;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((o=c==null?void 0:c.shadowRoot)===null||o===void 0)&&o.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){E.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let _=this._fullscreenButton=E.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);E.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},i.GeoJSONSource=Xs,i.GeolocateControl=class extends a.E{constructor(_){super(),this._onSuccess=o=>{if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",o)),this._finish()}},this._updateCamera=o=>{let c=new a.N(o.coords.longitude,o.coords.latitude),d=o.coords.accuracy,v=this._map.getBearing(),y=a.e({bearing:v},this.options.fitBoundsOptions),I=Ee.fromLngLat(c,d);this._map.fitBounds(I,y,{geolocateSource:!0})},this._updateMarker=o=>{if(o){let c=new a.N(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=o=>{if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&gf)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",o)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=E.create("button","maplibregl-ctrl-geolocate",this._container),E.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=o=>{if(this._map){if(o===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");let c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{let c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=E.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new cd({element:this._dotElement}),this._circleElement=E.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new cd({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")),this.fire(new a.k("userlocationlostfocus")))})}},this.options=a.e({},sb,_)}onAdd(_){return this._map=_,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(o=!1){if(wa!==void 0&&!o)return wa;if(window.navigator.permissions===void 0)return wa=!!window.navigator.geolocation,wa;try{wa=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(c){wa=!!window.navigator.geolocation}return wa})}().then(o=>this._finishSetupUI(o)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),E.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,mf=0,gf=!1}_isOutOfMapMaxBounds(_){let o=this._map.getMaxBounds(),c=_.coords;return o&&(c.longitude<o.getWest()||c.longitude>o.getEast()||c.latitude<o.getSouth()||c.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}}_updateCircleRadius(){let _=this._map.getBounds(),o=_.getSouthEast(),c=_.getNorthEast(),d=o.distanceTo(c),v=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":mf--,gf=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart")),this.fire(new a.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),mf++,mf>1?(_={maximumAge:6e5,timeout:0},gf=!0):(_=this.options.positionOptions,gf=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},i.Hash=ed,i.ImageSource=go,i.KeyboardHandler=za,i.LngLatBounds=Ee,i.LogoControl=Kg,i.Map=class extends ib{constructor(_){a.bf.mark(a.bg.create);let o=Object.assign(Object.assign({},Tq),_);if(o.minZoom!=null&&o.maxZoom!=null&&o.minZoom>o.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(o.minPitch!=null&&o.maxPitch!=null&&o.minPitch>o.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(o.minPitch!=null&&o.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(o.maxPitch!=null&&o.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new gc(o.minZoom,o.maxZoom,o.minPitch,o.maxPitch,o.renderWorldCopies),{bearingSnap:o.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Gt,this._controls=[],this._mapId=a.a4(),this._contextLost=c=>{c.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.k("webglcontextlost",{originalEvent:c}))},this._contextRestored=c=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:c}))},this._onMapScroll=c=>{if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=o.interactive,this._maxTileCacheSize=o.maxTileCacheSize,this._maxTileCacheZoomLevels=o.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=o.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=o.preserveDrawingBuffer===!0,this._antialias=o.antialias===!0,this._trackResize=o.trackResize===!0,this._bearingSnap=o.bearingSnap,this._refreshExpiredTiles=o.refreshExpiredTiles===!0,this._fadeDuration=o.fadeDuration,this._crossSourceCollisions=o.crossSourceCollisions===!0,this._collectResourceTiming=o.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Jg),o.locale),this._clickTolerance=o.clickTolerance,this._overridePixelRatio=o.pixelRatio,this._maxCanvasSize=o.maxCanvasSize,this.transformCameraUpdate=o.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=o.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=V.addThrottleControl(()=>this.isMoving()),this._requestManager=new Z(o.transformRequest),typeof o.container=="string"){if(this._container=document.getElementById(o.container),!this._container)throw new Error(`Container '${o.container}' not found.`)}else{if(!(o.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=o.container}if(o.maxBounds&&this.setMaxBounds(o.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let c=!1,d=hf(v=>{this._trackResize&&!this._removed&&(this.resize(v),this.redraw())},50);this._resizeObserver=new ResizeObserver(v=>{c?d(v):c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Zg(this,o),this._hash=o.hash&&new ed(typeof o.hash=="string"&&o.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:o.center,zoom:o.zoom,bearing:o.bearing,pitch:o.pitch}),o.bounds&&(this.resize(),this.fitBounds(o.bounds,a.e({},o.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=o.localIdeographFontFamily,this._validateStyle=o.validateStyle,o.style&&this.setStyle(o.style,{localIdeographFontFamily:o.localIdeographFontFamily}),o.attributionControl&&this.addControl(new wc(typeof o.attributionControl=="boolean"?void 0:o.attributionControl)),o.maplibreLogo&&this.addControl(new Kg,o.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new a.k(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new a.k(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new a.k("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(_,o){if(o===void 0&&(o=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let c=_.onAdd(this);this._controls.push(_);let d=this._controlPositions[o];return o.indexOf("bottom")!==-1?d.insertBefore(c,d.firstChild):d.appendChild(c),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let o=this._controls.indexOf(_);return o>-1&&this._controls.splice(o,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,o,c,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,o,c,d)}resize(_){var o;let c=this._containerDimensions(),d=c[0],v=c[1],y=this._getClampedPixelRatio(d,v);if(this._resizeCanvas(d,v,y),this.painter.resize(d,v,y),this.painter.overLimit()){let A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];let M=this._getClampedPixelRatio(d,v);this._resizeCanvas(d,v,M),this.painter.resize(d,v,M)}this.transform.resize(d,v),(o=this._requestedCameraState)===null||o===void 0||o.resize(d,v);let I=!this._moving;return I&&(this.stop(),this.fire(new a.k("movestart",_)).fire(new a.k("move",_))),this.fire(new a.k("resize",_)),I&&this.fire(new a.k("moveend",_)),this}_getClampedPixelRatio(_,o){let{0:c,1:d}=this._maxCanvasSize,v=this.getPixelRatio(),y=_*v,I=o*v;return Math.min(y>c?c/y:1,I>d?d/I:1)*v}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(Ee.convert(_)),this._update()}setMinZoom(_){if((_=_==null?-2:_)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_==null?22:_)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_==null?0:_)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_==null?60:_)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}project(_){return this.transform.locationPoint(a.N.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(a.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,o,c){if(_==="mouseenter"||_==="mouseover"){let d=!1;return{layers:o,listener:c,delegates:{mousemove:y=>{let I=o.filter(M=>this.getLayer(M)),A=I.length!==0?this.queryRenderedFeatures(y.point,{layers:I}):[];A.length?d||(d=!0,c.call(this,new ai(_,this,y.originalEvent,{features:A}))):d=!1},mouseout:()=>{d=!1}}}}if(_==="mouseleave"||_==="mouseout"){let d=!1;return{layers:o,listener:c,delegates:{mousemove:I=>{let A=o.filter(M=>this.getLayer(M));(A.length!==0?this.queryRenderedFeatures(I.point,{layers:A}):[]).length?d=!0:d&&(d=!1,c.call(this,new ai(_,this,I.originalEvent)))},mouseout:I=>{d&&(d=!1,c.call(this,new ai(_,this,I.originalEvent)))}}}}{let d=v=>{let y=o.filter(A=>this.getLayer(A)),I=y.length!==0?this.queryRenderedFeatures(v.point,{layers:y}):[];I.length&&(v.features=I,c.call(this,v),delete v.features)};return{layers:o,listener:c,delegates:{[_]:d}}}}_saveDelegatedListener(_,o){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(o)}_removeDelegatedListener(_,o,c){if(!this._delegatedListeners||!this._delegatedListeners[_])return;let d=this._delegatedListeners[_];for(let v=0;v<d.length;v++){let y=d[v];if(y.listener===c&&y.layers.length===o.length&&y.layers.every(I=>o.includes(I))){for(let I in y.delegates)this.off(I,y.delegates[I]);return void d.splice(v,1)}}}on(_,o,c){if(c===void 0)return super.on(_,o);let d=this._createDelegatedListener(_,typeof o=="string"?[o]:o,c);this._saveDelegatedListener(_,d);for(let v in d.delegates)this.on(v,d.delegates[v]);return this}once(_,o,c){if(c===void 0)return super.once(_,o);let d=typeof o=="string"?[o]:o,v=this._createDelegatedListener(_,d,c);for(let y in v.delegates){let I=v.delegates[y];v.delegates[y]=(...A)=>{this._removeDelegatedListener(_,d,c),I(...A)}}this._saveDelegatedListener(_,v);for(let y in v.delegates)this.once(y,v.delegates[y]);return this}off(_,o,c){return c===void 0?super.off(_,o):(this._removeDelegatedListener(_,typeof o=="string"?[o]:o,c),this)}queryRenderedFeatures(_,o){if(!this.style)return[];let c,d=_ instanceof a.P||Array.isArray(_),v=d?_:[[0,0],[this.transform.width,this.transform.height]];if(o=o||(d?{}:_)||{},v instanceof a.P||typeof v[0]=="number")c=[a.P.convert(v)];else{let y=a.P.convert(v[0]),I=a.P.convert(v[1]);c=[y,new a.P(I.x,y.y),I,new a.P(y.x,I.y),y]}return this.style.queryRenderedFeatures(c,o,this.transform)}querySourceFeatures(_,o){return this.style.querySourceFeatures(_,o)}setStyle(_,o){return(o=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(_,o))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){let o=this._locale[_];if(o==null)throw new Error(`Missing UI string '${_}'`);return o}_updateStyle(_,o){if(o.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,o));let c=this.style&&o.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new Np(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,o,c):this.style.loadJSON(_,o,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Np(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,o){if(typeof _=="string"){let c=this._requestManager.transformRequest(_,"Style");a.h(c,new AbortController).then(d=>{this._updateDiff(d.data,o)}).catch(d=>{d&&this.fire(new a.j(d))})}else typeof _=="object"&&this._updateDiff(_,o)}_updateDiff(_,o){try{this.style.setState(_,o)&&this._update(!0)}catch(c){a.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(_,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(_,o){return this._lazyInitEmptyStyle(),this.style.addSource(_,o),this._update(!0)}isSourceLoaded(_){let o=this.style&&this.style.sourceCaches[_];if(o!==void 0)return o.loaded();this.fire(new a.j(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){let o=this.style.sourceCaches[_.source];if(!o)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&o.reload();for(let c in this.style._layers){let d=this.style._layers[c];d.type==="hillshade"&&d.source===_.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Yg(this.painter,o,_),this.painter.renderToTexture=new ab(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==_.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:_})),this}getTerrain(){var _,o;return(o=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&o!==void 0?o:null}areTilesLoaded(){let _=this.style&&this.style.sourceCaches;for(let o in _){let c=_[o]._tiles;for(let d in c){let v=c[d];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,o,c={}){let{pixelRatio:d=1,sdf:v=!1,stretchX:y,stretchY:I,content:A,textFitWidth:M,textFitHeight:D}=c;if(this._lazyInitEmptyStyle(),!(o instanceof HTMLImageElement||a.b(o))){if(o.width===void 0||o.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:N,height:F,data:G}=o,Y=o;return this.style.addImage(_,{data:new a.R({width:N,height:F},new Uint8Array(G)),pixelRatio:d,stretchX:y,stretchY:I,content:A,textFitWidth:M,textFitHeight:D,sdf:v,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,_),this}}{let{width:N,height:F,data:G}=w.getImageData(o);this.style.addImage(_,{data:new a.R({width:N,height:F},G),pixelRatio:d,stretchX:y,stretchY:I,content:A,textFitWidth:M,textFitHeight:D,sdf:v,version:0})}}updateImage(_,o){let c=this.style.getImage(_);if(!c)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let d=o instanceof HTMLImageElement||a.b(o)?w.getImageData(o):o,{width:v,height:y,data:I}=d;if(v===void 0||y===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==c.data.width||y!==c.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));let A=!(o instanceof HTMLImageElement||a.b(o));return c.data.replace(I,A),this.style.updateImage(_,c),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return V.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,o){return this._lazyInitEmptyStyle(),this.style.addLayer(_,o),this._update(!0)}moveLayer(_,o){return this.style.moveLayer(_,o),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,o,c){return this.style.setLayerZoomRange(_,o,c),this._update(!0)}setFilter(_,o,c={}){return this.style.setFilter(_,o,c),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,o,c,d={}){return this.style.setPaintProperty(_,o,c,d),this._update(!0)}getPaintProperty(_,o){return this.style.getPaintProperty(_,o)}setLayoutProperty(_,o,c,d={}){return this.style.setLayoutProperty(_,o,c,d),this._update(!0)}getLayoutProperty(_,o){return this.style.getLayoutProperty(_,o)}setGlyphs(_,o={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,o),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,o,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,o,c,d=>{d||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,o={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,o,c=>{c||this._update(!0)}),this}setLight(_,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,o),this._update(!0)}getLight(){return this.style.getLight()}setSky(_){return this._lazyInitEmptyStyle(),this.style.setSky(_),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,o){return this.style.setFeatureState(_,o),this._update()}removeFeatureState(_,o){return this.style.removeFeatureState(_,o),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,o=0;return this._container&&(_=this._container.clientWidth||400,o=this._container.clientHeight||300),[_,o]}_setupContainer(){let _=this._container;_.classList.add("maplibregl-map");let o=this._canvasContainer=E.create("div","maplibregl-canvas-container",_);this._interactive&&o.classList.add("maplibregl-interactive"),this._canvas=E.create("canvas","maplibregl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let c=this._containerDimensions(),d=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],d);let v=this._controlContainer=E.create("div","maplibregl-control-container",_),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(I=>{y[I]=E.create("div",`maplibregl-ctrl-${I} `,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,o,c){this._canvas.width=Math.floor(c*_),this._canvas.height=Math.floor(c*o),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${o}px`}_setupPainter(){let _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},o=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{o={requestedAttributes:_},d&&(o.statusMessage=d.statusMessage,o.type=d.type)},{once:!0});let c=this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_);if(!c){let d="Failed to initialize WebGL";throw o?(o.message=d,new Error(JSON.stringify(o))):new Error(d)}this.painter=new Qp(c,this.transform),q.testSupport(c)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){let o=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let v=this.transform.zoom,y=w.now();this.style.zoomHistory.update(v,y);let I=new a.z(v,{now:y,fadeDuration:o,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=I.crossFadingFactor();A===1&&A===this._crossFadingFactor||(c=!0,this._crossFadingFactor=A),this.style.update(I)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bf.mark(a.bg.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,a.bf.mark(a.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(let c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),V.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();let o=this.painter.context.gl.getExtension("WEBGL_lose_context");o!=null&&o.loseContext&&o.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),E.remove(this._canvasContainer),E.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),a.bf.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,w.frameAsync(this._frameRequest).then(_=>{a.bf.frame(_),this._frameRequest=null,this._render(_)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return ob}getCameraTargetElevation(){return this.transform.elevation}},i.MapMouseEvent=ai,i.MapTouchEvent=rl,i.MapWheelEvent=Q1,i.Marker=cd,i.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{let o=this._map.getZoom(),c=o===this._map.getMaxZoom(),d=o===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{let o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=o},this._setButtonTitle=(o,c)=>{let d=this._map._getUIString(`NavigationControl.${c}`);o.title=d,o.setAttribute("aria-label",d)},this.options=a.e({},Iq,_),this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),E.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),E.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=E.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Cq(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){E.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,o){let c=E.create("button",_,this._container);return c.type="button",c.addEventListener("click",o),c}},i.Popup=class extends a.E{constructor(_){super(),this.remove=()=>(this._content&&E.remove(this._content),this._container&&(E.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.k("close"))),this),this._onMouseUp=o=>{this._update(o.point)},this._onMouseMove=o=>{this._update(o.point)},this._onDrag=o=>{this._update(o.point)},this._update=o=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=E.create("div","maplibregl-popup",this._map.getContainer()),this._tip=E.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let A of this.options.className.split(" "))this._container.classList.add(A);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Rr(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!o)return;let d=this._flatPos=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&o?o:this._map.transform.locationPoint(this._lngLat));let v=this.options.anchor,y=fd(this.options.offset);if(!v){let A=this._container.offsetWidth,M=this._container.offsetHeight,D;D=d.y+y.bottom.y<M?["top"]:d.y>this._map.transform.height-M?["bottom"]:[],d.x<A/2?D.push("left"):d.x>this._map.transform.width-A/2&&D.push("right"),v=D.length===0?"bottom":D.join("-")}let I=d.add(y[v]);this.options.subpixelPositioning||(I=I.round()),E.setTransform(this._container,`${Sc[v]} translate(${I.x}px,${I.y}px)`),ld(this._container,v,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(mt),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=a.N.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){let o=document.createDocumentFragment(),c=document.createElement("body"),d;for(c.innerHTML=_;d=c.firstChild,d;)o.appendChild(d);return this.setDOMContent(o)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=E.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=E.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let _=this._container.querySelector(hd);_&&_.focus()}},i.RasterDEMTileSource=Cr,i.RasterTileSource=Kt,i.ScaleControl=class{constructor(_){this._onMove=()=>{yf(this._map,this._container,this.options)},this.setUnit=o=>{this.options.unit=o,yf(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},$o),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){E.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},i.ScrollZoomHandler=wo,i.Style=Np,i.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=E.create("button","maplibregl-ctrl-terrain",this._container),E.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){E.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},i.TwoFingersTouchPitchHandler=_c,i.TwoFingersTouchRotateHandler=Gg,i.TwoFingersTouchZoomHandler=Vg,i.TwoFingersTouchZoomRotateHandler=Hg,i.VectorTileSource=Ks,i.VideoSource=Ss,i.addSourceType=(_,o)=>a._(void 0,void 0,void 0,function*(){if(Js(_))throw new Error(`A source type called "${_}" already exists.`);((c,d)=>{Ys[c]=d})(_,o)}),i.clearPrewarmedResources=function(){let _=Dt;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Ei),Dt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},i.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},i.getRTLTextPluginStatus=function(){return ni().getRTLTextPluginStatus()},i.getVersion=function(){return ey},i.getWorkerCount=function(){return $n.workerCount},i.getWorkerUrl=function(){return a.a.WORKER_URL},i.importScriptInWorkers=function(_){return ws().broadcast("IS",_)},i.prewarm=function(){ri().acquire(Ei)},i.setMaxParallelImageRequests=function(_){a.a.MAX_PARALLEL_IMAGE_REQUESTS=_},i.setRTLTextPlugin=function(_,o){return ni().setRTLTextPlugin(_,o)},i.setWorkerCount=function(_){$n.workerCount=_},i.setWorkerUrl=function(_){a.a.WORKER_URL=_}});var n=e;return n})});var lxe=S((car,uxe)=>{var GB=1/0,xPt=17976931348623157e292,exe=NaN,bPt="[object Symbol]",wPt=/^\s+|\s+$/g,EPt=/^[-+]0x[0-9a-f]+$/i,SPt=/^0b[01]+$/i,TPt=/^0o[0-7]+$/i,IPt=parseInt,CPt=typeof global=="object"&&global&&global.Object===Object&&global,APt=typeof self=="object"&&self&&self.Object===Object&&self,qPt=CPt||APt||Function("return this")(),PPt=Object.prototype,MPt=PPt.toString,txe=qPt.Symbol,OPt=Math.min,rxe=txe?txe.prototype:void 0,nxe=rxe?rxe.toString:void 0;function RPt(e){if(typeof e=="string")return e;if(oxe(e))return nxe?nxe.call(e):"";var t=e+"";return t=="0"&&1/e==-GB?"-0":t}function DPt(e){var t=Math[e];return function(r,n){if(r=sxe(r),n=OPt(NPt(n),292),n){var i=(axe(r)+"e").split("e"),a=t(i[0]+"e"+(+i[1]+n));return i=(axe(a)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return t(r)}}function ixe(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function LPt(e){return!!e&&typeof e=="object"}function oxe(e){return typeof e=="symbol"||LPt(e)&&MPt.call(e)==bPt}function kPt(e){if(!e)return e===0?e:0;if(e=sxe(e),e===GB||e===-GB){var t=e<0?-1:1;return t*xPt}return e===e?e:0}function NPt(e){var t=kPt(e),r=t%1;return t===t?r?t-r:t:0}function sxe(e){if(typeof e=="number")return e;if(oxe(e))return exe;if(ixe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ixe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(wPt,"");var r=SPt.test(e);return r||TPt.test(e)?IPt(e.slice(2),r?2:8):EPt.test(e)?exe:+e}function axe(e){return e==null?"":RPt(e)}var FPt=DPt("round");uxe.exports=FPt});var Hxe=S((qor,Wxe)=>{"use strict";var oMt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Wxe.exports=oMt});var Yxe=S((Por,Xxe)=>{"use strict";var sMt=Hxe();function Zxe(){}function Kxe(){}Kxe.resetWarningCache=Zxe;Xxe.exports=function(){function e(n,i,a,h,p,g){if(g!==sMt){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Kxe,resetWarningCache:Zxe};return r.PropTypes=r,r}});var zr=S((Ror,Jxe)=>{Jxe.exports=Yxe()();var Mor,Oor});var Wm=S((zgr,Mwe)=>{var tRt=Mwe.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=tRt)});var Bu=S((jgr,Owe)=>{var rRt=Owe.exports={version:"2.6.12"};typeof __e=="number"&&(__e=rRt)});var Dwe=S((Bgr,Rwe)=>{Rwe.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}});var _C=S((Ugr,Lwe)=>{var nRt=Dwe();Lwe.exports=function(e,t,r){if(nRt(e),t===void 0)return e;switch(r){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,a){return e.call(t,n,i,a)};}return function(){return e.apply(t,arguments)}}});var e1=S((Vgr,kwe)=>{kwe.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}});var Hm=S(($gr,Nwe)=>{var iRt=e1();Nwe.exports=function(e){if(!iRt(e))throw TypeError(e+" is not an object!");return e}});var xC=S((Ggr,Fwe)=>{Fwe.exports=function(e){try{return!!e()}catch(t){return!0}}});var Hh=S((Wgr,zwe)=>{zwe.exports=!xC()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var $3=S((Hgr,Bwe)=>{var jwe=e1(),V3=Wm().document,aRt=jwe(V3)&&jwe(V3.createElement);Bwe.exports=function(e){return aRt?V3.createElement(e):{}}});var G3=S((Zgr,Uwe)=>{Uwe.exports=!Hh()&&!xC()(function(){return Object.defineProperty($3()("div"),"a",{get:function(){return 7}}).a!=7})});var W3=S((Kgr,Vwe)=>{var bC=e1();Vwe.exports=function(e,t){if(!bC(e))return e;var r,n;if(t&&typeof(r=e.toString)=="function"&&!bC(n=r.call(e))||typeof(r=e.valueOf)=="function"&&!bC(n=r.call(e))||!t&&typeof(r=e.toString)=="function"&&!bC(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}});var t1=S(Gwe=>{var $we=Hm(),oRt=G3(),sRt=W3(),uRt=Object.defineProperty;Gwe.f=Hh()?Object.defineProperty:function(t,r,n){if($we(t),r=sRt(r,!0),$we(n),oRt)try{return uRt(t,r,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[r]=n.value),t}});var r1=S((Ygr,Wwe)=>{Wwe.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var n1=S((Jgr,Hwe)=>{var lRt=t1(),cRt=r1();Hwe.exports=Hh()?function(e,t,r){return lRt.f(e,t,cRt(1,r))}:function(e,t,r){return e[t]=r,e}});var Zm=S((Qgr,Zwe)=>{var hRt={}.hasOwnProperty;Zwe.exports=function(e,t){return hRt.call(e,t)}});var Zh=S((eyr,Xwe)=>{var wC=Wm(),H3=Bu(),Kwe=_C(),fRt=n1(),pRt=Zm(),EC="prototype",fa=function(e,t,r){var n=e&fa.F,i=e&fa.G,a=e&fa.S,h=e&fa.P,p=e&fa.B,g=e&fa.W,w=i?H3:H3[t]||(H3[t]={}),E=w[EC],q=i?wC:a?wC[t]:(wC[t]||{})[EC],P,k,W;i&&(r=t);for(P in r)k=!n&&q&&q[P]!==void 0,!(k&&pRt(w,P))&&(W=k?q[P]:r[P],w[P]=i&&typeof q[P]!="function"?r[P]:p&&k?Kwe(W,wC):g&&q[P]==W?function(Q){var $=function(V,Z,te){if(this instanceof Q){switch(arguments.length){case 0:return new Q;case 1:return new Q(V);case 2:return new Q(V,Z);}return new Q(V,Z,te)}return Q.apply(this,arguments)};return $[EC]=Q[EC],$}(W):h&&typeof W=="function"?Kwe(Function.call,W):W,h&&((w.virtual||(w.virtual={}))[P]=W,e&fa.R&&E&&!E[P]&&fRt(E,P,W)))};fa.F=1;fa.G=2;fa.S=4;fa.P=8;fa.B=16;fa.W=32;fa.U=64;fa.R=128;Xwe.exports=fa});var Z3=S((tyr,Ywe)=>{var dRt={}.toString;Ywe.exports=function(e){return dRt.call(e).slice(8,-1)}});var K3=S((ryr,Jwe)=>{var vRt=Z3();Jwe.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return vRt(e)=="String"?e.split(""):Object(e)}});var SC=S((nyr,Qwe)=>{Qwe.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}});var i1=S((iyr,eEe)=>{var mRt=K3(),gRt=SC();eEe.exports=function(e){return mRt(gRt(e))}});var TC=S((ayr,tEe)=>{var yRt=Math.ceil,_Rt=Math.floor;tEe.exports=function(e){return isNaN(e=+e)?0:(e>0?_Rt:yRt)(e)}});var X3=S((oyr,rEe)=>{var xRt=TC(),bRt=Math.min;rEe.exports=function(e){return e>0?bRt(xRt(e),9007199254740991):0}});var iEe=S((syr,nEe)=>{var wRt=TC(),ERt=Math.max,SRt=Math.min;nEe.exports=function(e,t){return e=wRt(e),e<0?ERt(e+t,0):SRt(e,t)}});var oEe=S((uyr,aEe)=>{var TRt=i1(),IRt=X3(),CRt=iEe();aEe.exports=function(e){return function(t,r,n){var i=TRt(t),a=IRt(i.length),h=CRt(n,a),p;if(e&&r!=r){for(;a>h;)if(p=i[h++],p!=p)return!0}else for(;a>h;h++)if((e||h in i)&&i[h]===r)return e||h||0;return!e&&-1}}});var Y3=S((lyr,sEe)=>{sEe.exports=!0});var J3=S((cyr,hEe)=>{var ARt=Bu(),uEe=Wm(),lEe="__core-js_shared__",cEe=uEe[lEe]||(uEe[lEe]={});(hEe.exports=function(e,t){return cEe[e]||(cEe[e]=t!==void 0?t:{})})("versions",[]).push({version:ARt.version,mode:Y3()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var Q3=S((hyr,fEe)=>{var qRt=0,PRt=Math.random();fEe.exports=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++qRt+PRt).toString(36))}});var IC=S((fyr,dEe)=>{var pEe=J3()("keys"),MRt=Q3();dEe.exports=function(e){return pEe[e]||(pEe[e]=MRt(e))}});var gEe=S((pyr,mEe)=>{var vEe=Zm(),ORt=i1(),RRt=oEe()(!1),DRt=IC()("IE_PROTO");mEe.exports=function(e,t){var r=ORt(e),n=0,i=[],a;for(a in r)a!=DRt&&vEe(r,a)&&i.push(a);for(;t.length>n;)vEe(r,a=t[n++])&&(~RRt(i,a)||i.push(a));return i}});var e4=S((dyr,yEe)=>{yEe.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var CC=S((vyr,_Ee)=>{var LRt=gEe(),kRt=e4();_Ee.exports=Object.keys||function(t){return LRt(t,kRt)}});var bEe=S(xEe=>{xEe.f=Object.getOwnPropertySymbols});var AC=S(wEe=>{wEe.f={}.propertyIsEnumerable});var qC=S((yyr,EEe)=>{var NRt=SC();EEe.exports=function(e){return Object(NRt(e))}});var IEe=S((_yr,TEe)=>{"use strict";var FRt=Hh(),SEe=CC(),zRt=bEe(),jRt=AC(),BRt=qC(),URt=K3(),PC=Object.assign;TEe.exports=!PC||xC()(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(i){t[i]=i}),PC({},e)[r]!=7||Object.keys(PC({},t)).join("")!=n})?function(t,r){for(var n=BRt(t),i=arguments.length,a=1,h=zRt.f,p=jRt.f;i>a;)for(var g=URt(arguments[a++]),w=h?SEe(g).concat(h(g)):SEe(g),E=w.length,q=0,P;E>q;)P=w[q++],(!FRt||p.call(g,P))&&(n[P]=g[P]);return n}:PC});var CEe=S(()=>{var t4=Zh();t4(t4.S+t4.F,"Object",{assign:IEe()})});var qEe=S((wyr,AEe)=>{CEe();AEe.exports=Bu().Object.assign});var MEe=S((Syr,PEe)=>{var VRt=t1(),$Rt=Hm(),GRt=CC();PEe.exports=Hh()?Object.defineProperties:function(t,r){$Rt(t);for(var n=GRt(r),i=n.length,a=0,h;i>a;)VRt.f(t,h=n[a++],r[h]);return t}});var DEe=S((Tyr,REe)=>{var OEe=Wm().document;REe.exports=OEe&&OEe.documentElement});var a4=S((Iyr,kEe)=>{var WRt=Hm(),HRt=MEe(),LEe=e4(),ZRt=IC()("IE_PROTO"),n4=function(){},i4="prototype",MC=function(){var e=$3()("iframe"),t=LEe.length,r="<",n=">",i;for(e.style.display="none",DEe().appendChild(e),e.src="javascript:",i=e.contentWindow.document,i.open(),i.write(r+"script"+n+"document.F=Object"+r+"/script"+n),i.close(),MC=i.F;t--;)delete MC[i4][LEe[t]];return MC()};kEe.exports=Object.create||function(t,r){var n;return t!==null?(n4[i4]=WRt(t),n=new n4,n4[i4]=null,n[ZRt]=t):n=MC(),r===void 0?n:HRt(n,r)}});var FEe=S(()=>{var NEe=Zh();NEe(NEe.S,"Object",{create:a4()})});var jEe=S((qyr,zEe)=>{FEe();var KRt=Bu().Object;zEe.exports=function(t,r){return KRt.create(t,r)}});var VEe=S(UEe=>{var XRt=AC(),YRt=r1(),JRt=i1(),QRt=W3(),eDt=Zm(),tDt=G3(),BEe=Object.getOwnPropertyDescriptor;UEe.f=Hh()?BEe:function(t,r){if(t=JRt(t),r=QRt(r,!0),tDt)try{return BEe(t,r)}catch(n){}if(eDt(t,r))return YRt(!XRt.f.call(t,r),t[r])}});var WEe=S((Myr,GEe)=>{var rDt=e1(),nDt=Hm(),$Ee=function(e,t){if(nDt(e),!rDt(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};GEe.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=_C()(Function.call,VEe().f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(n){t=!0}return function(i,a){return $Ee(i,a),t?i.__proto__=a:r(i,a),i}}({},!1):void 0),check:$Ee}});var ZEe=S(()=>{var HEe=Zh();HEe(HEe.S,"Object",{setPrototypeOf:WEe().set})});var XEe=S((Dyr,KEe)=>{ZEe();KEe.exports=Bu().Object.setPrototypeOf});var po=S((zyr,RC)=>{(function(){"use strict";var e={}.hasOwnProperty;function t(){for(var i="",a=0;a<arguments.length;a++){var h=arguments[a];h&&(i=n(i,r(h)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return t.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var a="";for(var h in i)e.call(i,h)&&i[h]&&(a=n(a,h));return a}function n(i,a){return a?i?i+" "+a:i+a:i}typeof RC!="undefined"&&RC.exports?(t.default=t,RC.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var DC=S((Uyr,JEe)=>{"use strict";var iDt=function(e,t,r,n,i,a,h,p){if(!e){var g;if(t===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var w=[r,n,i,a,h,p],E=0;g=new Error(t.replace(/%s/g,function(){return w[E++]})),g.name="Invariant Violation"}throw g.framesToPop=1,g}};JEe.exports=iDt});var h4=S(c4=>{"use strict";Object.defineProperty(c4,"__esModule",{value:!0});function nSe(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function iSe(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n!=null?n:null}this.setState(t.bind(this))}function aSe(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}nSe.__suppressDeprecationWarning=!0;iSe.__suppressDeprecationWarning=!0;aSe.__suppressDeprecationWarning=!0;function oDt(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,i=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?i="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),r!==null||n!==null||i!==null){var a=e.displayName||e.name,h=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+a+" uses "+h+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=nSe,t.componentWillReceiveProps=iSe),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=aSe;var p=t.componentDidUpdate;t.componentDidUpdate=function(w,E,q){var P=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:q;p.call(this,w,E,P)}}return e}c4.polyfill=oDt});var f4=S((s_r,uSe)=>{var uDt=Hh(),lDt=CC(),cDt=i1(),hDt=AC().f;uSe.exports=function(e){return function(t){for(var r=cDt(t),n=lDt(r),i=n.length,a=0,h=[],p;i>a;)p=n[a++],(!uDt||hDt.call(r,p))&&h.push(e?[p,r[p]]:r[p]);return h}}});var cSe=S(()=>{var lSe=Zh(),fDt=f4()(!0);lSe(lSe.S,"Object",{entries:function(t){return fDt(t)}})});var fSe=S((c_r,hSe)=>{cSe();hSe.exports=Bu().Object.entries});var p4=S((h_r,pSe)=>{pSe.exports=fSe()});var s1=S((FC,_Se)=>{"use strict";Object.defineProperty(FC,"__esModule",{value:!0});FC.default=bDt;function bDt(e){function t(n,i,a,h,p,g){var w=h||"<<anonymous>>",E=g||a;if(i[a]==null)return n?new Error("Required "+p+" `"+E+"` was not specified "+("in `"+w+"`.")):null;for(var q=arguments.length,P=Array(q>6?q-6:0),k=6;k<q;k++)P[k-6]=arguments[k];return e.apply(void 0,[i,a,w,p,E].concat(P))}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}_Se.exports=FC.default});var ESe=S(()=>{var wSe=Zh(),wDt=f4()(!1);wSe(wSe.S,"Object",{values:function(t){return wDt(t)}})});var TSe=S((w_r,SSe)=>{ESe();SSe.exports=Bu().Object.values});var CSe=S((E_r,ISe)=>{ISe.exports=TSe()});var PSe=S(Or=>{"use strict";var bi=typeof Symbol=="function"&&Symbol.for,x4=bi?Symbol.for("react.element"):60103,b4=bi?Symbol.for("react.portal"):60106,jC=bi?Symbol.for("react.fragment"):60107,BC=bi?Symbol.for("react.strict_mode"):60108,UC=bi?Symbol.for("react.profiler"):60114,VC=bi?Symbol.for("react.provider"):60109,$C=bi?Symbol.for("react.context"):60110,w4=bi?Symbol.for("react.async_mode"):60111,GC=bi?Symbol.for("react.concurrent_mode"):60111,WC=bi?Symbol.for("react.forward_ref"):60112,HC=bi?Symbol.for("react.suspense"):60113,TDt=bi?Symbol.for("react.suspense_list"):60120,ZC=bi?Symbol.for("react.memo"):60115,KC=bi?Symbol.for("react.lazy"):60116,IDt=bi?Symbol.for("react.block"):60121,CDt=bi?Symbol.for("react.fundamental"):60117,ADt=bi?Symbol.for("react.responder"):60118,qDt=bi?Symbol.for("react.scope"):60119;function No(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case x4:switch(e=e.type,e){case w4:case GC:case jC:case UC:case BC:case HC:return e;default:switch(e=e&&e.$$typeof,e){case $C:case WC:case KC:case ZC:case VC:return e;default:return t;}}case b4:return t;}}}function qSe(e){return No(e)===GC}Or.AsyncMode=w4;Or.ConcurrentMode=GC;Or.ContextConsumer=$C;Or.ContextProvider=VC;Or.Element=x4;Or.ForwardRef=WC;Or.Fragment=jC;Or.Lazy=KC;Or.Memo=ZC;Or.Portal=b4;Or.Profiler=UC;Or.StrictMode=BC;Or.Suspense=HC;Or.isAsyncMode=function(e){return qSe(e)||No(e)===w4};Or.isConcurrentMode=qSe;Or.isContextConsumer=function(e){return No(e)===$C};Or.isContextProvider=function(e){return No(e)===VC};Or.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===x4};Or.isForwardRef=function(e){return No(e)===WC};Or.isFragment=function(e){return No(e)===jC};Or.isLazy=function(e){return No(e)===KC};Or.isMemo=function(e){return No(e)===ZC};Or.isPortal=function(e){return No(e)===b4};Or.isProfiler=function(e){return No(e)===UC};Or.isStrictMode=function(e){return No(e)===BC};Or.isSuspense=function(e){return No(e)===HC};Or.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===jC||e===GC||e===UC||e===BC||e===HC||e===TDt||typeof e=="object"&&e!==null&&(e.$$typeof===KC||e.$$typeof===ZC||e.$$typeof===VC||e.$$typeof===$C||e.$$typeof===WC||e.$$typeof===CDt||e.$$typeof===ADt||e.$$typeof===qDt||e.$$typeof===IDt)};Or.typeOf=No});var OSe=S((A_r,MSe)=>{"use strict";MSe.exports=PSe()});var Jl=S((XC,DSe)=>{"use strict";Object.defineProperty(XC,"__esModule",{value:!0});var PDt=Xt(),MDt=RSe(PDt),ODt=OSe(),RDt=s1(),DDt=RSe(RDt);function RSe(e){return e&&e.__esModule?e:{default:e}}function LDt(e,t,r,n,i){var a=e[t];return MDt.default.isValidElement(a)?new Error("Invalid "+n+" `"+i+"` of type ReactElement "+("supplied to `"+r+"`,expected an element type (a string ")+", component class, or function component)."):(0,ODt.isValidElementType)(a)?null:new Error("Invalid "+n+" `"+i+"` of value `"+a+"` "+("supplied to `"+r+"`, expected an element type (a string ")+", component class, or function component).")}XC.default=(0,DDt.default)(LDt);DSe.exports=XC.default});var QC=S((JC,zSe)=>{"use strict";Object.defineProperty(JC,"__esModule",{value:!0});JC.default=$Dt;var BDt=s1(),UDt=VDt(BDt);function VDt(e){return e&&e.__esModule?e:{default:e}}function $Dt(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(){for(var i=arguments.length,a=Array(i),h=0;h<i;h++)a[h]=arguments[h];var p=null;return t.forEach(function(g){if(p==null){var w=g.apply(void 0,a);w!=null&&(p=w)}}),p}return(0,UDt.default)(n)}zSe.exports=JC.default});var q4=S((K_r,VSe)=>{"use strict";var HDt=function(){};VSe.exports=HDt});var da=S((X_r,l1)=>{function ZDt(e){return e&&e.__esModule?e:{default:e}}l1.exports=ZDt,l1.exports.__esModule=!0,l1.exports.default=l1.exports});var GSe=S((tA,$Se)=>{"use strict";tA.__esModule=!0;tA.default=XDt;var KDt=/-(.)/g;function XDt(e){return e.replace(KDt,function(t,r){return r.toUpperCase()})}$Se.exports=tA.default});var P4=S((rA,WSe)=>{"use strict";var YDt=da();rA.__esModule=!0;rA.default=eLt;var JDt=YDt(GSe()),QDt=/^-ms-/;function eLt(e){return(0,JDt.default)(e.replace(QDt,"ms-"))}WSe.exports=rA.default});var ZSe=S((nA,HSe)=>{"use strict";nA.__esModule=!0;nA.default=rLt;var tLt=/([A-Z])/g;function rLt(e){return e.replace(tLt,"-$1").toLowerCase()}HSe.exports=nA.default});var XSe=S((iA,KSe)=>{"use strict";var nLt=da();iA.__esModule=!0;iA.default=oLt;var iLt=nLt(ZSe()),aLt=/^ms-/;function oLt(e){return(0,iLt.default)(e).replace(aLt,"-ms-")}KSe.exports=iA.default});var JSe=S((aA,YSe)=>{"use strict";var sLt=da();aA.__esModule=!0;aA.default=hLt;var uLt=sLt(P4()),lLt=/^(top|right|bottom|left)$/,cLt=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function hLt(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(n){var i=e.style;n=(0,uLt.default)(n),n=="float"&&(n="styleFloat");var a=e.currentStyle[n]||null;if(a==null&&i&&i[n]&&(a=i[n]),cLt.test(a)&&!lLt.test(n)){var h=i.left,p=e.runtimeStyle,g=p&&p.left;g&&(p.left=e.currentStyle.left),i.left=n==="fontSize"?"1em":a,a=i.pixelLeft+"px",i.left=h,g&&(p.left=g)}return a}}}YSe.exports=aA.default});var eTe=S((oA,QSe)=>{"use strict";oA.__esModule=!0;oA.default=fLt;function fLt(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}QSe.exports=oA.default});var $u=S((c1,tTe)=>{"use strict";c1.__esModule=!0;c1.default=void 0;var pLt=!!(typeof window!="undefined"&&window.document&&window.document.createElement);c1.default=pLt;tTe.exports=c1.default});var sTe=S(tr=>{"use strict";var dLt=da();tr.__esModule=!0;tr.default=tr.animationEnd=tr.animationDelay=tr.animationTiming=tr.animationDuration=tr.animationName=tr.transitionEnd=tr.transitionDuration=tr.transitionDelay=tr.transitionTiming=tr.transitionProperty=tr.transform=void 0;var vLt=dLt($u()),uA="transform";tr.transform=uA;var Gu,M4,rTe;tr.animationEnd=rTe;tr.transitionEnd=M4;var O4,R4,D4,L4;tr.transitionDelay=L4;tr.transitionTiming=D4;tr.transitionDuration=R4;tr.transitionProperty=O4;var nTe,iTe,aTe,oTe;tr.animationDelay=oTe;tr.animationTiming=aTe;tr.animationDuration=iTe;tr.animationName=nTe;vLt.default&&(sA=gLt(),Gu=sA.prefix,tr.transitionEnd=M4=sA.transitionEnd,tr.animationEnd=rTe=sA.animationEnd,tr.transform=uA=Gu+"-"+uA,tr.transitionProperty=O4=Gu+"-transition-property",tr.transitionDuration=R4=Gu+"-transition-duration",tr.transitionDelay=L4=Gu+"-transition-delay",tr.transitionTiming=D4=Gu+"-transition-timing-function",tr.animationName=nTe=Gu+"-animation-name",tr.animationDuration=iTe=Gu+"-animation-duration",tr.animationTiming=aTe=Gu+"-animation-delay",tr.animationDelay=oTe=Gu+"-animation-timing-function");var sA,mLt={transform:uA,end:M4,property:O4,timing:D4,delay:L4,duration:R4};tr.default=mLt;function gLt(){for(var e=document.createElement("div").style,t={O:function(w){return"o"+w.toLowerCase()},Moz:function(w){return w.toLowerCase()},Webkit:function(w){return"webkit"+w},ms:function(w){return"MS"+w}},r=Object.keys(t),n,i,a="",h=0;h<r.length;h++){var p=r[h];if(p+"TransitionProperty"in e){a="-"+p.toLowerCase(),n=t[p]("TransitionEnd"),i=t[p]("AnimationEnd");break}}return!n&&"transitionProperty"in e&&(n="transitionend"),!i&&"animationName"in e&&(i="animationend"),e=null,{animationEnd:i,transitionEnd:n,prefix:a}}});var lTe=S((lA,uTe)=>{"use strict";lA.__esModule=!0;lA.default=_Lt;var yLt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function _Lt(e){return!!(e&&yLt.test(e))}uTe.exports=lA.default});var hTe=S((cA,cTe)=>{"use strict";var h1=da();cA.__esModule=!0;cA.default=TLt;var xLt=h1(P4()),k4=h1(XSe()),bLt=h1(JSe()),wLt=h1(eTe()),ELt=sTe(),SLt=h1(lTe());function TLt(e,t,r){var n="",i="",a=t;if(typeof t=="string"){if(r===void 0)return e.style[(0,xLt.default)(t)]||(0,bLt.default)(e).getPropertyValue((0,k4.default)(t));(a={})[t]=r}Object.keys(a).forEach(function(h){var p=a[h];!p&&p!==0?(0,wLt.default)(e,(0,k4.default)(h)):(0,SLt.default)(h)?i+=h+"("+p+") ":n+=(0,k4.default)(h)+": "+p+";"}),i&&(n+=ELt.transform+": "+i+";"),e.style.cssText+=";"+n}cTe.exports=cA.default});var fTe=S(Qm=>{"use strict";Qm.__esModule=!0;Qm.classNamesShape=Qm.timeoutsShape=void 0;var J_r=ILt(zr());function ILt(e){return e&&e.__esModule?e:{default:e}}var CLt=null;Qm.timeoutsShape=CLt;var ALt=null;Qm.classNamesShape=ALt});var dTe=S(mo=>{"use strict";mo.__esModule=!0;mo.default=mo.EXITING=mo.ENTERED=mo.ENTERING=mo.EXITED=mo.UNMOUNTED=void 0;var qLt=OLt(zr()),N4=pTe(Xt()),PLt=pTe(rs()),MLt=h4(),e0r=fTe();function pTe(e){return e&&e.__esModule?e:{default:e}}function OLt(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}}return t.default=e,t}function RLt(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function DLt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var f1="unmounted";mo.UNMOUNTED=f1;var Mp="exited";mo.EXITED=Mp;var Op="entering";mo.ENTERING=Op;var tg="entered";mo.ENTERED=tg;var F4="exiting";mo.EXITING=F4;var Wu=function(e){DLt(t,e);function t(n,i){var a;a=e.call(this,n,i)||this;var h=i.transitionGroup,p=h&&!h.isMounting?n.enter:n.appear,g;return a.appearStatus=null,n.in?p?(g=Mp,a.appearStatus=Op):g=tg:n.unmountOnExit||n.mountOnEnter?g=f1:g=Mp,a.state={status:g},a.nextCallback=null,a}var r=t.prototype;return r.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(i,a){var h=i.in;return h&&a.status===f1?{status:Mp}:null},r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var a=null;if(i!==this.props){var h=this.state.status;this.props.in?h!==Op&&h!==tg&&(a=Op):(h===Op||h===tg)&&(a=F4)}this.updateStatus(!1,a)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,a,h,p;return a=h=p=i,i!=null&&typeof i!="number"&&(a=i.exit,h=i.enter,p=i.appear!==void 0?i.appear:h),{exit:a,enter:h,appear:p}},r.updateStatus=function(i,a){if(i===void 0&&(i=!1),a!==null){this.cancelNextCallback();var h=PLt.default.findDOMNode(this);a===Op?this.performEnter(h,i):this.performExit(h)}else this.props.unmountOnExit&&this.state.status===Mp&&this.setState({status:f1})},r.performEnter=function(i,a){var h=this,p=this.props.enter,g=this.context.transitionGroup?this.context.transitionGroup.isMounting:a,w=this.getTimeouts(),E=g?w.appear:w.enter;if(!a&&!p){this.safeSetState({status:tg},function(){h.props.onEntered(i)});return}this.props.onEnter(i,g),this.safeSetState({status:Op},function(){h.props.onEntering(i,g),h.onTransitionEnd(i,E,function(){h.safeSetState({status:tg},function(){h.props.onEntered(i,g)})})})},r.performExit=function(i){var a=this,h=this.props.exit,p=this.getTimeouts();if(!h){this.safeSetState({status:Mp},function(){a.props.onExited(i)});return}this.props.onExit(i),this.safeSetState({status:F4},function(){a.props.onExiting(i),a.onTransitionEnd(i,p.exit,function(){a.safeSetState({status:Mp},function(){a.props.onExited(i)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,a){a=this.setNextCallback(a),this.setState(i,a)},r.setNextCallback=function(i){var a=this,h=!0;return this.nextCallback=function(p){h&&(h=!1,a.nextCallback=null,i(p))},this.nextCallback.cancel=function(){h=!1},this.nextCallback},r.onTransitionEnd=function(i,a,h){this.setNextCallback(h);var p=a==null&&!this.props.addEndListener;if(!i||p){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(i,this.nextCallback),a!=null&&setTimeout(this.nextCallback,a)},r.render=function(){var i=this.state.status;if(i===f1)return null;var a=this.props,h=a.children,p=RLt(a,["children"]);if(delete p.in,delete p.mountOnEnter,delete p.unmountOnExit,delete p.appear,delete p.enter,delete p.exit,delete p.timeout,delete p.addEndListener,delete p.onEnter,delete p.onEntering,delete p.onEntered,delete p.onExit,delete p.onExiting,delete p.onExited,typeof h=="function")return h(i,p);var g=N4.default.Children.only(h);return N4.default.cloneElement(g,p)},t}(N4.default.Component);Wu.contextTypes={transitionGroup:qLt.object};Wu.childContextTypes={transitionGroup:function(){}};Wu.propTypes={};function eg(){}Wu.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:eg,onEntering:eg,onEntered:eg,onExit:eg,onExiting:eg,onExited:eg};Wu.UNMOUNTED=0;Wu.EXITED=1;Wu.ENTERING=2;Wu.ENTERED=3;Wu.EXITING=4;var LLt=(0,MLt.polyfill)(Wu);mo.default=LLt});var p1=S((hA,vTe)=>{"use strict";hA.__esModule=!0;hA.default=kLt;function kLt(e){return e&&e.ownerDocument||document}vTe.exports=hA.default});var z4=S((fA,mTe)=>{"use strict";var NLt=da();fA.__esModule=!0;fA.default=zLt;var FLt=NLt(p1());function zLt(e){e===void 0&&(e=(0,FLt.default)());try{return e.activeElement}catch(t){}}mTe.exports=fA.default});var v1=S((d1,yTe)=>{"use strict";var jLt=da();d1.__esModule=!0;d1.default=void 0;var BLt=jLt($u()),ULt=function(){return BLt.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(e.compareDocumentPosition(t)&16):gTe(e,t)}:gTe}();d1.default=ULt;function gTe(e,t){if(t)do if(t===e)return!0;while(t=t.parentNode);return!1}yTe.exports=d1.default});var B4=S((Rp,bTe)=>{function _Te(e){if(e&&typeof e=="object"){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if(typeof e=="number")return xTe[e];var r=String(e),n=ec[r.toLowerCase()];if(n)return n;var n=pA[r.toLowerCase()];if(n)return n;if(r.length===1)return r.charCodeAt(0)}_Te.isEventKey=function(t,r){if(t&&typeof t=="object"){var n=t.which||t.keyCode||t.charCode;if(n==null)return!1;if(typeof r=="string"){var i=ec[r.toLowerCase()];if(i)return i===n;var i=pA[r.toLowerCase()];if(i)return i===n}else if(typeof r=="number")return r===n;return!1}};Rp=bTe.exports=_Te;var ec=Rp.code=Rp.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},pA=Rp.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(yn=97;yn<123;yn++)ec[String.fromCharCode(yn)]=yn-32;for(yn=48;yn<58;yn++)ec[yn-48]=yn;var yn;for(yn=1;yn<13;yn++)ec["f"+yn]=yn+111;for(yn=0;yn<10;yn++)ec["numpad "+yn]=yn+96;var xTe=Rp.names=Rp.title={};for(yn in ec)xTe[ec[yn]]=yn;for(j4 in pA)ec[j4]=pA[j4];var j4});var ETe=S((dA,wTe)=>{"use strict";Object.defineProperty(dA,"__esModule",{value:!0});dA.default=VLt;function VLt(e){return function(r,n,i,a,h){var p=i||"<<anonymous>>",g=h||n;if(r[n]==null)return new Error("The "+a+" `"+g+"` is required to make "+("`"+p+"` accessible for users of assistive ")+"technologies such as screen readers.");for(var w=arguments.length,E=Array(w>5?w-5:0),q=5;q<w;q++)E[q-5]=arguments[q];return e.apply(void 0,[r,n,i,a,h].concat(E))}}wTe.exports=dA.default});var TTe=S((r0r,STe)=>{var $Lt=TC(),GLt=SC();STe.exports=function(e){return function(t,r){var n=String(GLt(t)),i=$Lt(r),a=n.length,h,p;return i<0||i>=a?e?"":void 0:(h=n.charCodeAt(i),h<55296||h>56319||i+1===a||(p=n.charCodeAt(i+1))<56320||p>57343?e?n.charAt(i):h:e?n.slice(i,i+2):(h-55296<<10)+(p-56320)+65536)}}});var CTe=S((n0r,ITe)=>{ITe.exports=n1()});var vA=S((i0r,ATe)=>{ATe.exports={}});var Xh=S((a0r,PTe)=>{var U4=J3()("wks"),WLt=Q3(),V4=Wm().Symbol,qTe=typeof V4=="function",HLt=PTe.exports=function(e){return U4[e]||(U4[e]=qTe&&V4[e]||(qTe?V4:WLt)("Symbol."+e))};HLt.store=U4});var $4=S((o0r,OTe)=>{var ZLt=t1().f,KLt=Zm(),MTe=Xh()("toStringTag");OTe.exports=function(e,t,r){e&&!KLt(e=r?e:e.prototype,MTe)&&ZLt(e,MTe,{configurable:!0,value:t})}});var LTe=S((s0r,DTe)=>{"use strict";var XLt=a4(),YLt=r1(),JLt=$4(),RTe={};n1()(RTe,Xh()("iterator"),function(){return this});DTe.exports=function(e,t,r){e.prototype=XLt(RTe,{next:YLt(1,r)}),JLt(e,t+" Iterator")}});var FTe=S((u0r,NTe)=>{var QLt=Zm(),ekt=qC(),kTe=IC()("IE_PROTO"),tkt=Object.prototype;NTe.exports=Object.getPrototypeOf||function(e){return e=ekt(e),QLt(e,kTe)?e[kTe]:typeof e.constructor=="function"&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?tkt:null}});var GTe=S((l0r,$Te)=>{"use strict";var zTe=Y3(),G4=Zh(),rkt=CTe(),jTe=n1(),BTe=vA(),nkt=LTe(),ikt=$4(),akt=FTe(),m1=Xh()("iterator"),W4=!([].keys&&"next"in[].keys()),okt="@@iterator",UTe="keys",mA="values",VTe=function(){return this};$Te.exports=function(e,t,r,n,i,a,h){nkt(r,t,n);var p=function(te){if(!W4&&te in q)return q[te];switch(te){case UTe:return function(){return new r(this,te)};case mA:return function(){return new r(this,te)};}return function(){return new r(this,te)}},g=t+" Iterator",w=i==mA,E=!1,q=e.prototype,P=q[m1]||q[okt]||i&&q[i],k=P||p(i),W=i?w?p("entries"):k:void 0,Q=t=="Array"&&q.entries||P,$,V,Z;if(Q&&(Z=akt(Q.call(new e)),Z!==Object.prototype&&Z.next&&(ikt(Z,g,!0),!zTe&&typeof Z[m1]!="function"&&jTe(Z,m1,VTe))),w&&P&&P.name!==mA&&(E=!0,k=function(){return P.call(this)}),(!zTe||h)&&(W4||E||!q[m1])&&jTe(q,m1,k),BTe[t]=k,BTe[g]=VTe,i)if($={values:w?k:p(mA),keys:a?k:p(UTe),entries:W},h)for(V in $)V in q||rkt(q,V,$[V]);else G4(G4.P+G4.F*(W4||E),t,$);return $}});var WTe=S(()=>{"use strict";var skt=TTe()(!0);GTe()(String,"String",function(e){this._t=String(e),this._i=0},function(){var e=this._t,t=this._i,r;return t>=e.length?{value:void 0,done:!0}:(r=skt(e,t),this._i+=r.length,{value:r,done:!1})})});var KTe=S((f0r,ZTe)=>{var HTe=Hm();ZTe.exports=function(e,t,r,n){try{return n?t(HTe(r)[0],r[1]):t(r)}catch(a){var i=e.return;throw i!==void 0&&HTe(i.call(e)),a}}});var YTe=S((p0r,XTe)=>{var ukt=vA(),lkt=Xh()("iterator"),ckt=Array.prototype;XTe.exports=function(e){return e!==void 0&&(ukt.Array===e||ckt[lkt]===e)}});var QTe=S((d0r,JTe)=>{"use strict";var hkt=t1(),fkt=r1();JTe.exports=function(e,t,r){t in e?hkt.f(e,t,fkt(0,r)):e[t]=r}});var tIe=S((v0r,eIe)=>{var H4=Z3(),pkt=Xh()("toStringTag"),dkt=H4(function(){return arguments}())=="Arguments",vkt=function(e,t){try{return e[t]}catch(r){}};eIe.exports=function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=vkt(t=Object(e),pkt))=="string"?r:dkt?H4(t):(n=H4(t))=="Object"&&typeof t.callee=="function"?"Arguments":n}});var nIe=S((m0r,rIe)=>{var mkt=tIe(),gkt=Xh()("iterator"),ykt=vA();rIe.exports=Bu().getIteratorMethod=function(e){if(e!=null)return e[gkt]||e["@@iterator"]||ykt[mkt(e)]}});var oIe=S((g0r,aIe)=>{var K4=Xh()("iterator"),iIe=!1;try{Z4=[7][K4](),Z4.return=function(){iIe=!0},Array.from(Z4,function(){throw 2})}catch(e){}var Z4;aIe.exports=function(e,t){if(!t&&!iIe)return!1;var r=!1;try{var n=[7],i=n[K4]();i.next=function(){return{done:r=!0}},n[K4]=function(){return i},e(n)}catch(a){}return r}});var uIe=S(()=>{"use strict";var _kt=_C(),X4=Zh(),xkt=qC(),bkt=KTe(),wkt=YTe(),Ekt=X3(),sIe=QTe(),Skt=nIe();X4(X4.S+X4.F*!oIe()(function(e){Array.from(e)}),"Array",{from:function(t){var r=xkt(t),n=typeof this=="function"?this:Array,i=arguments.length,a=i>1?arguments[1]:void 0,h=a!==void 0,p=0,g=Skt(r),w,E,q,P;if(h&&(a=_kt(a,i>2?arguments[2]:void 0,2)),g!=null&&!(n==Array&&wkt(g)))for(P=g.call(r),E=new n;!(q=P.next()).done;p++)sIe(E,p,h?bkt(P,a,[q.value,p],!0):q.value);else for(w=Ekt(r.length),E=new n(w);w>p;p++)sIe(E,p,h?a(r[p],p):r[p]);return E.length=p,E}})});var cIe=S((x0r,lIe)=>{WTe();uIe();lIe.exports=Bu().Array.from});var fIe=S((b0r,hIe)=>{hIe.exports=cIe()});var gA=S((g1,dIe)=>{"use strict";var Tkt=da();g1.__esModule=!0;g1.default=void 0;var Ikt=Tkt($u()),pIe=function(){};Ikt.default&&(pIe=function(){if(document.addEventListener)return function(e,t,r,n){return e.addEventListener(t,r,n||!1)};if(document.attachEvent)return function(e,t,r){return e.attachEvent("on"+t,function(n){n=n||window.event,n.target=n.target||n.srcElement,n.currentTarget=e,r.call(e,n)})}}());var Ckt=pIe;g1.default=Ckt;dIe.exports=g1.default});var yA=S((y1,mIe)=>{"use strict";var Akt=da();y1.__esModule=!0;y1.default=void 0;var qkt=Akt($u()),vIe=function(){};qkt.default&&(vIe=function(){if(document.addEventListener)return function(e,t,r,n){return e.removeEventListener(t,r,n||!1)};if(document.attachEvent)return function(e,t,r){return e.detachEvent("on"+t,r)}}());var Pkt=vIe;y1.default=Pkt;mIe.exports=y1.default});var Y4=S((_A,yIe)=>{"use strict";_A.__esModule=!0;_A.default=function(e,t,r,n){return(0,Okt.default)(e,t,r,n),{remove:function(){(0,Dkt.default)(e,t,r,n)}}};var Mkt=gA(),Okt=gIe(Mkt),Rkt=yA(),Dkt=gIe(Rkt);function gIe(e){return e&&e.__esModule?e:{default:e}}yIe.exports=_A.default});var _1=S((xA,xIe)=>{"use strict";xA.__esModule=!0;xA.default=function(e){return(0,Fkt.default)(kkt.default.findDOMNode(e))};var Lkt=rs(),kkt=_Ie(Lkt),Nkt=p1(),Fkt=_Ie(Nkt);function _Ie(e){return e&&e.__esModule?e:{default:e}}xIe.exports=xA.default});var wIe=S((EA,bIe)=>{"use strict";EA.__esModule=!0;var zkt=v1(),jkt=rg(zkt),Bkt=zr(),bA=rg(Bkt),Ukt=Xt(),Vkt=rg(Ukt),$kt=rs(),Gkt=rg($kt),Wkt=Y4(),J4=rg(Wkt),Hkt=_1(),Zkt=rg(Hkt);function rg(e){return e&&e.__esModule?e:{default:e}}function Kkt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xkt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Ykt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Jkt=27;function Qkt(e){return e.button===0}function eNt(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var wA=function(e){Ykt(t,e);function t(r,n){Kkt(this,t);var i=Xkt(this,e.call(this,r,n));return i.addEventListeners=function(){i.currentEvent=window.event;var a=i.props.event,h=(0,Zkt.default)(i);i.documentMouseCaptureListener=(0,J4.default)(h,a,i.handleMouseCapture,!0),i.documentMouseListener=(0,J4.default)(h,a,i.handleMouse),i.documentKeyupListener=(0,J4.default)(h,"keyup",i.handleKeyUp)},i.removeEventListeners=function(){i.documentMouseCaptureListener&&i.documentMouseCaptureListener.remove(),i.documentMouseListener&&i.documentMouseListener.remove(),i.documentKeyupListener&&i.documentKeyupListener.remove()},i.handleMouseCapture=function(a){i.preventMouseRootClose=eNt(a)||!Qkt(a)||(0,jkt.default)(Gkt.default.findDOMNode(i),a.target)},i.handleMouse=function(a){if(a===i.currentEvent){i.currentEvent=void 0;return}!i.preventMouseRootClose&&i.props.onRootClose&&i.props.onRootClose(a)},i.handleKeyUp=function(a){if(a===i.currentEvent){i.currentEvent=void 0;return}a.keyCode===Jkt&&i.props.onRootClose&&i.props.onRootClose(a)},i.preventMouseRootClose=!1,i}return t.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},t.prototype.componentDidUpdate=function(n){!this.props.disabled&&n.disabled?this.addEventListeners():this.props.disabled&&!n.disabled&&this.removeEventListeners()},t.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},t.prototype.render=function(){return this.props.children},t}(Vkt.default.Component);wA.displayName="RootCloseWrapper";wA.propTypes={onRootClose:bA.default.func,children:bA.default.element,disabled:bA.default.bool,event:bA.default.oneOf(["click","mousedown"])};wA.defaultProps={event:"click"};EA.default=wA;bIe.exports=EA.default});var jIe=S((PA,zIe)=>{"use strict";PA.__esModule=!0;PA.default=dNt;var pNt=/^[\w-]*$/,hU=Function.prototype.bind.call(Function.prototype.call,[].slice);function dNt(e,t){var r=t[0]==="#",n=t[0]===".",i=r||n?t.slice(1):t,a=pNt.test(i),h;return a?r?(e=e.getElementById?e:document,(h=e.getElementById(i))?[h]:[]):e.getElementsByClassName&&n?hU(e.getElementsByClassName(i)):hU(e.getElementsByTagName(t)):hU(e.querySelectorAll(t))}zIe.exports=PA.default});var VIe=S((MA,UIe)=>{"use strict";var BIe=da();MA.__esModule=!0;MA.default=gNt;var vNt=BIe(v1()),mNt=BIe(jIe());function gNt(e,t){return function(n){var i=n.currentTarget,a=n.target,h=(0,mNt.default)(i,e);h.some(function(p){return(0,vNt.default)(p,a)})&&t.call(this,n)}}UIe.exports=MA.default});var WIe=S((T1,GIe)=>{"use strict";var fU=da();T1.__esModule=!0;T1.default=void 0;var yNt=fU($u()),_Nt=fU(gA()),xNt=fU(yA()),$Ie=function(){};yNt.default&&($Ie=function(t,r,n,i){return(0,_Nt.default)(t,r,n,i),function(){(0,xNt.default)(t,r,n,i)}});var bNt=$Ie;T1.default=bNt;GIe.exports=T1.default});var YIe=S(Yh=>{"use strict";var OA=da();Yh.__esModule=!0;Yh.default=void 0;var HIe=OA(gA());Yh.on=HIe.default;var ZIe=OA(yA());Yh.off=ZIe.default;var KIe=OA(VIe());Yh.filter=KIe.default;var XIe=OA(WIe());Yh.listen=XIe.default;var wNt={on:HIe.default,off:ZIe.default,filter:KIe.default,listen:XIe.default};Yh.default=wNt});var pU=S((DA,JIe)=>{"use strict";var ENt=da();DA.__esModule=!0;DA.default=TNt;var SNt=ENt($u()),RA;function TNt(e){if((!RA&&RA!==0||e)&&SNt.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),RA=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return RA}JIe.exports=DA.default});var kA=S((LA,eCe)=>{"use strict";Object.defineProperty(LA,"__esModule",{value:!0});var INt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CNt=Xt(),ANt=QIe(CNt),qNt=s1(),PNt=QIe(qNt);function QIe(e){return e&&e.__esModule?e:{default:e}}function MNt(e,t,r,n,i){var a=e[t],h=typeof a=="undefined"?"undefined":INt(a);return ANt.default.isValidElement(a)?new Error("Invalid "+n+" `"+i+"` of type ReactElement "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(h!=="object"||typeof a.render!="function")&&a.nodeType!==1?new Error("Invalid "+n+" `"+i+"` of value `"+a+"` "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement."):null}LA.default=(0,PNt.default)(MNt);eCe.exports=LA.default});var iCe=S((yxr,nCe)=>{"use strict";var ONt=!1,rCe=function(){};ONt&&(tCe=function(t,r){var n=arguments.length;r=new Array(n>1?n-1:0);for(var i=1;i<n;i++)r[i-1]=arguments[i];var a=0,h="Warning: "+t.replace(/%s/g,function(){return r[a++]});typeof console!="undefined"&&console.error(h);try{throw new Error(h)}catch(p){}},rCe=function(e,t,r){var n=arguments.length;r=new Array(n>2?n-2:0);for(var i=2;i<n;i++)r[i-2]=arguments[i];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||tCe.apply(null,[t].concat(r))});var tCe;nCe.exports=rCe});var sCe=S((NA,oCe)=>{"use strict";Object.defineProperty(NA,"__esModule",{value:!0});NA.default=aCe;var RNt=iCe(),DNt=LNt(RNt);function LNt(e){return e&&e.__esModule?e:{default:e}}var dU={};function aCe(e,t){return function(n,i,a,h,p){var g=a||"<<anonymous>>",w=p||i;if(n[i]!=null){var E=a+"."+i;(0,DNt.default)(dU[E],"The "+h+" `"+w+"` of "+("`"+g+"` is deprecated. "+t+".")),dU[E]=!0}for(var q=arguments.length,P=Array(q>5?q-5:0),k=5;k<q;k++)P[k-5]=arguments[k];return e.apply(void 0,[n,i,a,h,p].concat(P))}}function kNt(){dU={}}aCe._resetWarned=kNt;oCe.exports=NA.default});var vU=S((FA,uCe)=>{"use strict";FA.__esModule=!0;FA.default=NNt;function NNt(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}uCe.exports=FA.default});var cCe=S((zA,lCe)=>{"use strict";var FNt=da();zA.__esModule=!0;zA.default=jNt;var zNt=FNt(vU());function jNt(e,t){e.classList?e.classList.add(t):(0,zNt.default)(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}lCe.exports=zA.default});var pCe=S((_xr,fCe)=>{"use strict";function hCe(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}fCe.exports=function(t,r){t.classList?t.classList.remove(r):typeof t.className=="string"?t.className=hCe(t.className,r):t.setAttribute("class",hCe(t.className&&t.className.baseVal||"",r))}});var gCe=S(Dp=>{"use strict";var mU=da();Dp.__esModule=!0;Dp.default=void 0;var dCe=mU(cCe());Dp.addClass=dCe.default;var vCe=mU(pCe());Dp.removeClass=vCe.default;var mCe=mU(vU());Dp.hasClass=mCe.default;var BNt={addClass:dCe.default,removeClass:vCe.default,hasClass:mCe.default};Dp.default=BNt});var _Ce=S((jA,yCe)=>{"use strict";jA.__esModule=!0;jA.default=UNt;function UNt(e){return e===e.window?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}yCe.exports=jA.default});var gU=S((BA,wCe)=>{"use strict";BA.__esModule=!0;BA.default=ZNt;var VNt=_Ce(),xCe=bCe(VNt),$Nt=p1(),GNt=bCe($Nt);function bCe(e){return e&&e.__esModule?e:{default:e}}function WNt(e){return e&&e.tagName.toLowerCase()==="body"}function HNt(e){var t=(0,GNt.default)(e),r=(0,xCe.default)(t),n=r.innerWidth;if(!n){var i=t.documentElement.getBoundingClientRect();n=i.right-Math.abs(i.left)}return t.body.clientWidth<n}function ZNt(e){var t=(0,xCe.default)(e);return t||WNt(e)?HNt(e):e.scrollHeight>e.clientHeight}wCe.exports=BA.default});var SCe=S(I1=>{"use strict";I1.__esModule=!0;I1.ariaHidden=yU;I1.hideSiblings=YNt;I1.showSiblings=JNt;var KNt=["template","script","style"],XNt=function(t){var r=t.nodeType,n=t.tagName;return r===1&&KNt.indexOf(n.toLowerCase())===-1},ECe=function(t,r,n){r=[].concat(r),[].forEach.call(t.children,function(i){r.indexOf(i)===-1&&XNt(i)&&n(i)})};function yU(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function YNt(e,t){ECe(e,t,function(r){return yU(!0,r)})}function JNt(e,t){ECe(e,t,function(r){return yU(!1,r)})}});var ACe=S((VA,CCe)=>{"use strict";VA.__esModule=!0;var QNt=gCe(),TCe=UA(QNt),eFt=hTe(),ICe=UA(eFt),tFt=pU(),rFt=UA(tFt),nFt=gU(),iFt=UA(nFt),_U=SCe();function UA(e){return e&&e.__esModule?e:{default:e}}function aFt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oFt(e,t){var r=-1;return e.some(function(n,i){if(t(n,i))return r=i,!0}),r}function sFt(e,t){return oFt(e,function(r){return r.modals.indexOf(t)!==-1})}function uFt(e,t){var r={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(r.paddingRight=parseInt((0,ICe.default)(t,"paddingRight")||0,10)+(0,rFt.default)()+"px"),(0,ICe.default)(t,r)}function lFt(e,t){var r=e.style;Object.keys(r).forEach(function(n){return t.style[n]=r[n]})}var cFt=function e(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.hideSiblingNodes,i=n===void 0?!0:n,a=r.handleContainerOverflow,h=a===void 0?!0:a;aFt(this,e),this.add=function(p,g,w){var E=t.modals.indexOf(p),q=t.containers.indexOf(g);if(E!==-1)return E;if(E=t.modals.length,t.modals.push(p),t.hideSiblingNodes&&(0,_U.hideSiblings)(g,p.modalNode),q!==-1)return t.data[q].modals.push(p),E;var P={modals:[p],classes:w?w.split(/\s+/):[],overflowing:(0,iFt.default)(g)};return t.handleContainerOverflow&&uFt(P,g),P.classes.forEach(TCe.default.addClass.bind(null,g)),t.containers.push(g),t.data.push(P),E},this.remove=function(p){var g=t.modals.indexOf(p);if(g!==-1){var w=sFt(t.data,p),E=t.data[w],q=t.containers[w];E.modals.splice(E.modals.indexOf(p),1),t.modals.splice(g,1),E.modals.length===0?(E.classes.forEach(TCe.default.removeClass.bind(null,q)),t.handleContainerOverflow&&lFt(E,q),t.hideSiblingNodes&&(0,_U.showSiblings)(q,p.modalNode),t.containers.splice(w,1),t.data.splice(w,1)):t.hideSiblingNodes&&(0,_U.ariaHidden)(!1,E.modals[E.modals.length-1].modalNode)}},this.isTopModal=function(p){return!!t.modals.length&&t.modals[t.modals.length-1]===p},this.hideSiblingNodes=i,this.handleContainerOverflow=h,this.modals=[],this.containers=[],this.data=[]};VA.default=cFt;CCe.exports=VA.default});var GA=S(($A,qCe)=>{"use strict";$A.__esModule=!0;$A.default=dFt;var hFt=rs(),fFt=pFt(hFt);function pFt(e){return e&&e.__esModule?e:{default:e}}function dFt(e,t){return e=typeof e=="function"?e():e,fFt.default.findDOMNode(e)||t}qCe.exports=$A.default});var kCe=S((WA,LCe)=>{"use strict";WA.__esModule=!0;var vFt=zr(),xU=ug(vFt),mFt=kA(),gFt=ug(mFt),yFt=Xt(),PCe=ug(yFt),_Ft=rs(),MCe=ug(_Ft),xFt=GA(),OCe=ug(xFt),bFt=_1(),RCe=ug(bFt);function ug(e){return e&&e.__esModule?e:{default:e}}function wFt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DCe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function EFt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var bU=function(e){EFt(t,e);function t(){var r,n,i;wFt(this,t);for(var a=arguments.length,h=Array(a),p=0;p<a;p++)h[p]=arguments[p];return i=(r=(n=DCe(this,e.call.apply(e,[this].concat(h))),n),n._mountOverlayTarget=function(){n._overlayTarget||(n._overlayTarget=document.createElement("div"),n._portalContainerNode=(0,OCe.default)(n.props.container,(0,RCe.default)(n).body),n._portalContainerNode.appendChild(n._overlayTarget))},n._unmountOverlayTarget=function(){n._overlayTarget&&(n._portalContainerNode.removeChild(n._overlayTarget),n._overlayTarget=null),n._portalContainerNode=null},n._renderOverlay=function(){var g=n.props.children?PCe.default.Children.only(n.props.children):null;if(g!==null){n._mountOverlayTarget();var w=!n._overlayInstance;n._overlayInstance=MCe.default.unstable_renderSubtreeIntoContainer(n,g,n._overlayTarget,function(){w&&n.props.onRendered&&n.props.onRendered()})}else n._unrenderOverlay(),n._unmountOverlayTarget()},n._unrenderOverlay=function(){n._overlayTarget&&(MCe.default.unmountComponentAtNode(n._overlayTarget),n._overlayInstance=null)},n.getMountNode=function(){return n._overlayTarget},r),DCe(n,i)}return t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.UNSAFE_componentWillReceiveProps=function(n){this._overlayTarget&&n.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,OCe.default)(n.container,(0,RCe.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(PCe.default.Component);bU.displayName="Portal";bU.propTypes={container:xU.default.oneOfType([gFt.default,xU.default.func]),onRendered:xU.default.func};WA.default=bU;LCe.exports=WA.default});var zCe=S((HA,FCe)=>{"use strict";HA.__esModule=!0;var SFt=$u(),TFt=Jh(SFt),IFt=zr(),wU=Jh(IFt),CFt=kA(),AFt=Jh(CFt),qFt=Xt(),PFt=Jh(qFt),MFt=rs(),EU=Jh(MFt),OFt=GA(),RFt=Jh(OFt),DFt=_1(),LFt=Jh(DFt),kFt=kCe(),NFt=Jh(kFt);function Jh(e){return e&&e.__esModule?e:{default:e}}function FFt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NCe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function zFt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var SU=function(e){zFt(t,e);function t(){var r,n,i;FFt(this,t);for(var a=arguments.length,h=Array(a),p=0;p<a;p++)h[p]=arguments[p];return i=(r=(n=NCe(this,e.call.apply(e,[this].concat(h))),n),n.getMountNode=function(){return n._portalContainerNode},r),NCe(n,i)}return t.prototype.UNSAFE_componentWillMount=function(){if(TFt.default){var n=this.props.container;typeof n=="function"&&(n=n()),!(n&&!EU.default.findDOMNode(n))&&this.setContainer(n)}},t.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.container!==this.props.container&&this.setContainer(n.container)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.setContainer=function(n){this._portalContainerNode=(0,RFt.default)(n,(0,LFt.default)(this).body)},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?EU.default.createPortal(this.props.children,this._portalContainerNode):null},t}(PFt.default.Component);SU.displayName="Portal";SU.propTypes={container:wU.default.oneOfType([AFt.default,wU.default.func]),onRendered:wU.default.func};HA.default=EU.default.createPortal?SU:NFt.default;FCe.exports=HA.default});var VCe=S((ZA,UCe)=>{"use strict";ZA.__esModule=!0;var jFt=zr(),BFt=jCe(jFt),UFt=Xt(),VFt=jCe(UFt);function jCe(e){return e&&e.__esModule?e:{default:e}}function $Ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GFt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function WFt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var HFt={children:BFt.default.node},BCe=function(e){WFt(t,e);function t(){return $Ft(this,t),GFt(this,e.apply(this,arguments))}return t.prototype.render=function(){return this.props.children},t}(VFt.default.Component);BCe.propTypes=HFt;ZA.default=BCe;UCe.exports=ZA.default});var GCe=S((KA,$Ce)=>{"use strict";KA.__esModule=!0;KA.default=ZFt;function ZFt(e){var t=!document.addEventListener,r=void 0;return t?(document.attachEvent("onfocusin",e),r=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),r=function(){return document.removeEventListener("focus",e,!0)}),{remove:r}}$Ce.exports=KA.default});var tAe=S((YA,eAe)=>{"use strict";YA.__esModule=!0;var KCe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KFt=z4(),TU=Vi(KFt),XFt=v1(),XCe=Vi(XFt),YFt=$u(),JFt=Vi(YFt),QFt=zr(),Kr=Vi(QFt),ezt=kA(),tzt=Vi(ezt),rzt=sCe(),nzt=Vi(rzt),izt=Jl(),WCe=Vi(izt),YCe=Xt(),Qh=Vi(YCe),azt=rs(),ozt=Vi(azt),szt=q4(),uzt=Vi(szt),lzt=ACe(),JCe=Vi(lzt),czt=zCe(),QCe=Vi(czt),hzt=VCe(),fzt=Vi(hzt),pzt=Y4(),HCe=Vi(pzt),dzt=GCe(),vzt=Vi(dzt),mzt=GA(),gzt=Vi(mzt),yzt=_1(),IU=Vi(yzt);function Vi(e){return e&&e.__esModule?e:{default:e}}function _zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZCe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function xzt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var bzt=new JCe.default,XA=function(e){xzt(t,e);function t(){var r,n,i;_zt(this,t);for(var a=arguments.length,h=Array(a),p=0;p<a;p++)h[p]=arguments[p];return i=(r=(n=ZCe(this,e.call.apply(e,[this].concat(h))),n),wzt.call(n),r),ZCe(n,i)}return t.prototype.omitProps=function(n,i){var a=Object.keys(n),h={};return a.map(function(p){Object.prototype.hasOwnProperty.call(i,p)||(h[p]=n[p])}),h},t.prototype.render=function(){var n=this.props,i=n.show,a=n.container,h=n.children,p=n.transition,g=n.backdrop,w=n.className,E=n.style,q=n.onExit,P=n.onExiting,k=n.onEnter,W=n.onEntering,Q=n.onEntered,$=Qh.default.Children.only(h),V=this.omitProps(this.props,t.propTypes),Z=i||p&&!this.state.exited;if(!Z)return null;var te=$.props,se=te.role,Ie=te.tabIndex;return(se===void 0||Ie===void 0)&&($=(0,YCe.cloneElement)($,{role:se===void 0?"document":se,tabIndex:Ie==null?"-1":Ie})),p&&($=Qh.default.createElement(p,{appear:!0,unmountOnExit:!0,in:i,onExit:q,onExiting:P,onExited:this.handleHidden,onEnter:k,onEntering:W,onEntered:Q},$)),Qh.default.createElement(QCe.default,{ref:this.setMountNode,container:a,onRendered:this.onPortalRendered},Qh.default.createElement("div",KCe({ref:this.setModalNodeRef,role:se||"dialog"},V,{style:E,className:w}),g&&this.renderBackdrop(),Qh.default.createElement(fzt.default,{ref:this.setDialogRef},$)))},t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},t.prototype.UNSAFE_componentWillUpdate=function(n){!this.props.show&&n.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(n){var i=this.props.transition;n.show&&!this.props.show&&!i?this.onHide():!n.show&&this.props.show&&this.onShow()},t.prototype.componentWillUnmount=function(){var n=this.props,i=n.show,a=n.transition;this._isMounted=!1,(i||a&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var n=this.getDialogElement(),i=(0,TU.default)((0,IU.default)(this));n&&!(0,XCe.default)(n,i)&&(this.lastFocus=i,n.hasAttribute("tabIndex")||((0,uzt.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),n.setAttribute("tabIndex",-1)),n.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return ozt.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(Qh.default.Component);XA.propTypes=KCe({},QCe.default.propTypes,{show:Kr.default.bool,container:Kr.default.oneOfType([tzt.default,Kr.default.func]),onShow:Kr.default.func,onHide:Kr.default.func,backdrop:Kr.default.oneOfType([Kr.default.bool,Kr.default.oneOf(["static"])]),renderBackdrop:Kr.default.func,onEscapeKeyDown:Kr.default.func,onEscapeKeyUp:(0,nzt.default)(Kr.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:Kr.default.func,backdropStyle:Kr.default.object,backdropClassName:Kr.default.string,containerClassName:Kr.default.string,keyboard:Kr.default.bool,transition:WCe.default,backdropTransition:WCe.default,autoFocus:Kr.default.bool,enforceFocus:Kr.default.bool,restoreFocus:Kr.default.bool,onEnter:Kr.default.func,onEntering:Kr.default.func,onEntered:Kr.default.func,onExit:Kr.default.func,onExiting:Kr.default.func,onExited:Kr.default.func,manager:Kr.default.object.isRequired});XA.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:bzt,renderBackdrop:function(t){return Qh.default.createElement("div",t)}};var wzt=function(){var t=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var r=t.props,n=r.backdropStyle,i=r.backdropClassName,a=r.renderBackdrop,h=r.backdropTransition,p=function(E){return t.backdrop=E},g=a({ref:p,style:n,className:i,onClick:t.handleBackdropClick});return h&&(g=Qh.default.createElement(h,{appear:!0,in:t.props.show},g)),g},this.onPortalRendered=function(){t.autoFocus(),t.props.onShow&&t.props.onShow()},this.onShow=function(){var r=(0,IU.default)(t),n=(0,gzt.default)(t.props.container,r.body);t.props.manager.add(t,n,t.props.containerClassName),t._onDocumentKeydownListener=(0,HCe.default)(r,"keydown",t.handleDocumentKeyDown),t._onDocumentKeyupListener=(0,HCe.default)(r,"keyup",t.handleDocumentKeyUp),t._onFocusinListener=(0,vzt.default)(t.enforceFocus)},this.onHide=function(){t.props.manager.remove(t),t._onDocumentKeydownListener.remove(),t._onDocumentKeyupListener.remove(),t._onFocusinListener.remove(),t.props.restoreFocus&&t.restoreLastFocus()},this.setMountNode=function(r){t.mountNode=r&&r.getMountNode()},this.setModalNodeRef=function(r){t.modalNode=r},this.setDialogRef=function(r){t.dialog=r},this.handleHidden=function(){if(t.setState({exited:!0}),t.onHide(),t.props.onExited){var r;(r=t.props).onExited.apply(r,arguments)}},this.handleBackdropClick=function(r){r.target===r.currentTarget&&(t.props.onBackdropClick&&t.props.onBackdropClick(r),t.props.backdrop===!0&&t.props.onHide())},this.handleDocumentKeyDown=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&(t.props.onEscapeKeyDown&&t.props.onEscapeKeyDown(r),t.props.onHide())},this.handleDocumentKeyUp=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&t.props.onEscapeKeyUp&&t.props.onEscapeKeyUp(r)},this.checkForFocus=function(){JFt.default&&(t.lastFocus=(0,TU.default)())},this.enforceFocus=function(){if(!(!t.props.enforceFocus||!t._isMounted||!t.isTopModal())){var r=t.getDialogElement(),n=(0,TU.default)((0,IU.default)(t));r&&!(0,XCe.default)(r,n)&&r.focus()}}};XA.Manager=JCe.default;YA.default=XA;eAe.exports=YA.default});var Uzt={};PPe(Uzt,{SettingsProvider:()=>jzt,renderAdminApp:()=>Bzt});var qAe=De(Xt(),1),PAe=De(rs(),1),$1r=De(G_e(),1);var hxe=De(Y0e(),1);var qx=De(Q0e(),1);var zPt=De(lxe(),1);var WB=(e,t="control-feedback-container")=>{let r=document.getElementById(t);if(r===null){let n=e.getCanvasContainer();r=document.createElement("div"),r.id=t,n.appendChild(r)}return r};function zl(e){return e!=null}function cxe(e){return typeof e=="string"||e instanceof String}function Fl(e){let t=sa.getLanguageDict();if(t===void 0)throw new Error("Dictionary is undefined.");let r=t[e];return r===void 0?(console.warn(`Translation for key "${e}" was not found in dictionary.`),""):r}var BPt={EN:"en",DE:"de"},UPt=typeof process!="undefined"&&zl(process.env.DEV_MODE_SECRET)&&process.env.DEV_MODE_SECRET!==""&&zl(process.env.DEV_MODE_NAME)&&process.env.DEV_MODE_NAME!=="",qI=()=>({"Dev-Mode-Secret":process.env.DEV_MODE_SECRET,"Dev-Mode-Name":process.env.DEV_MODE_NAME}),Oa={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:BPt.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},sa={axiosApiInstance:null,appendSettings(e){Oa=Object.assign({},Oa,e)},getSettings(){return Oa},getBaseMaps(){return Oa.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},Oa.MAPVIEW_PARAMS)},getLanguageDict(){return Oa.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return Oa.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},Oa.TERRAIN_TILES)},getUsername(){return Oa.USERNAME},isUserAuthenticated(){return Oa.USER_ISAUTHENTICATED===!0},updateSettings(e){Oa=e},_initAxiosApiInstance(){let e=Oa.API_GEOREFERENCE_BASEURL,t=cxe(e)&&e.length===0;if(!zl(e)||t)throw new Error("The URL for the georeference service is not set.");let r=Object.assign({baseURL:e,withCredentials:!0},UPt?{headers:{get:qI(),post:qI(),put:qI(),delete:qI()}}:{});this.axiosApiInstance=hxe.default.create(r)},getGeoreferenceApiClient(){return zl(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let e=Oa.MARKER_URL;if(!zl(e))throw new Error("The marker icon url is not set.");return{id:Oa.MARKER_IMAGE_ID,url:e}},getUserRole(){return Oa.USER_ROLE}};var qn=De(Xt(),1);var Gs={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Bar={9001:Gs.METERS,9002:Gs.FEET,9003:Gs.USFEET,9101:Gs.RADIANS,9102:Gs.DEGREES};var so={};so[Gs.RADIANS]=6370997/(2*Math.PI);so[Gs.DEGREES]=2*Math.PI*6370997/360;so[Gs.FEET]=.3048;so[Gs.METERS]=1;so[Gs.USFEET]=1200/3937;var uo=Gs;var VPt=function(){function e(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return e.prototype.canWrapX=function(){return this.canWrapX_},e.prototype.getCode=function(){return this.code_},e.prototype.getExtent=function(){return this.extent_},e.prototype.getUnits=function(){return this.units_},e.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||so[this.units_]},e.prototype.getWorldExtent=function(){return this.worldExtent_},e.prototype.getAxisOrientation=function(){return this.axisOrientation_},e.prototype.isGlobal=function(){return this.global_},e.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)},e.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},e.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},e.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)},e.prototype.setWorldExtent=function(t){this.worldExtent_=t},e.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},e.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e}(),PI=VPt;function Hr(e,t,r){return Math.min(Math.max(e,t),r)}var fxe=function(){var e;return"cosh"in Math?e=Math.cosh:e=function(t){var r=Math.exp(t);return(r+1/r)/2},e}(),pxe=function(){var e;return"log2"in Math?e=Math.log2:e=function(t){return Math.log(t)*Math.LOG2E},e}();function dxe(e,t,r,n,i,a){var h=i-r,p=a-n;if(h!==0||p!==0){var g=((e-r)*h+(t-n)*p)/(h*h+p*p);g>1?(r=i,n=a):g>0&&(r+=h*g,n+=p*g)}return jl(e,t,r,n)}function jl(e,t,r,n){var i=r-e,a=n-t;return i*i+a*a}function vxe(e){for(var t=e.length,r=0;r<t;r++){for(var n=r,i=Math.abs(e[r][r]),a=r+1;a<t;a++){var h=Math.abs(e[a][r]);h>i&&(i=h,n=a)}if(i===0)return null;var p=e[n];e[n]=e[r],e[r]=p;for(var g=r+1;g<t;g++)for(var w=-e[g][r]/e[r][r],E=r;E<t+1;E++)r==E?e[g][E]=0:e[g][E]+=w*e[r][E]}for(var q=new Array(t),P=t-1;P>=0;P--){q[P]=e[P][t]/e[P][P];for(var k=P-1;k>=0;k--)e[k][t]-=e[k][P]*q[P]}return q}function bm(e){return e*Math.PI/180}function Ws(e,t){var r=e%t;return r*t<0?r+t:r}function mxe(e,t,r){return e+r*(t-e)}function gxe(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}function Px(e,t){return Math.floor(gxe(e,t))}function Mx(e,t){return Math.ceil(gxe(e,t))}var $Pt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ox=6378137,Em=Math.PI*Ox,GPt=[-Em,-Em,Em,Em],WPt=[-180,-85,180,85],MI=Ox*Math.log(Math.tan(Math.PI/2)),wm=function(e){$Pt(t,e);function t(r){return e.call(this,{code:r,units:uo.METERS,extent:GPt,global:!0,worldExtent:WPt,getPointResolution:function(n,i){return n/fxe(i[1]/Ox)}})||this}return t}(PI),HB=[new wm("EPSG:3857"),new wm("EPSG:102100"),new wm("EPSG:102113"),new wm("EPSG:900913"),new wm("http://www.opengis.net/def/crs/EPSG/0/3857"),new wm("http://www.opengis.net/gml/srs/epsg.xml#3857")];function yxe(e,t,r){var n=e.length,i=r>1?r:2,a=t;a===void 0&&(i>2?a=e.slice():a=new Array(n));for(var h=0;h<n;h+=i){a[h]=Em*e[h]/180;var p=Ox*Math.log(Math.tan(Math.PI*(+e[h+1]+90)/360));p>MI?p=MI:p<-MI&&(p=-MI),a[h+1]=p}return a}function _xe(e,t,r){var n=e.length,i=r>1?r:2,a=t;a===void 0&&(i>2?a=e.slice():a=new Array(n));for(var h=0;h<n;h+=i)a[h]=180*e[h]/Em,a[h+1]=360*Math.atan(Math.exp(e[h+1]/Ox))/Math.PI-90;return a}var HPt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZPt=6378137,xxe=[-180,-90,180,90],KPt=Math.PI*ZPt/180,bp=function(e){HPt(t,e);function t(r,n){return e.call(this,{code:r,units:uo.DEGREES,extent:xxe,axisOrientation:n,global:!0,metersPerUnit:KPt,worldExtent:xxe})||this}return t}(PI),ZB=[new bp("CRS:84"),new bp("EPSG:4326","neu"),new bp("urn:ogc:def:crs:OGC:1.3:CRS84"),new bp("urn:ogc:def:crs:OGC:2:84"),new bp("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new bp("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new bp("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var KB={};function bxe(e){return KB[e]||KB[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function wxe(e,t){KB[e]=t}var wr=typeof Object.assign=="function"?Object.assign:function(e,t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1,i=arguments.length;n<i;++n){var a=arguments[n];if(a!=null)for(var h in a)a.hasOwnProperty(h)&&(r[h]=a[h])}return r};function Pu(e){for(var t in e)delete e[t]}var Exe=typeof Object.values=="function"?Object.values:function(e){var t=[];for(var r in e)t.push(e[r]);return t};function Sxe(e){var t;for(t in e)return!1;return!t}var Sm={};function Rx(e,t,r){var n=e.getCode(),i=t.getCode();n in Sm||(Sm[n]={}),Sm[n][i]=r}function Txe(e,t){var r;return e in Sm&&t in Sm[e]&&(r=Sm[e][t]),r}var _i={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function or(){return function(){throw new Error("Unimplemented abstract method.")}()}var XPt=0;function Bn(e){return e.ol_uid||(e.ol_uid=String(++XPt))}var OI="6.15.1";var YPt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JPt=function(e){YPt(t,e);function t(r){var n=this,i=OI==="latest"?OI:"v"+OI.split("-")[0],a="Assertion failed. See https://openlayers.org/en/"+i+"/doc/errors/#"+r+" for details.";return n=e.call(this,a)||this,n.code=r,n.name="AssertionError",n.message=a,n}return t}(Error),RI=JPt;function Nt(e,t){if(!e)throw new RI(t)}function XB(e){for(var t=lo(),r=0,n=e.length;r<n;++r)Lx(t,e[r]);return t}function QPt(e,t,r){var n=Math.min.apply(null,e),i=Math.min.apply(null,t),a=Math.max.apply(null,e),h=Math.max.apply(null,t);return Bl(n,i,a,h,r)}function YB(e,t,r){return r?(r[0]=e[0]-t,r[1]=e[1]-t,r[2]=e[2]+t,r[3]=e[3]+t,r):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function Cxe(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function DI(e,t,r){var n,i;return t<e[0]?n=e[0]-t:e[2]<t?n=t-e[2]:n=0,r<e[1]?i=e[1]-r:e[3]<r?i=r-e[3]:i=0,n*n+i*i}function kh(e,t){return JB(e,t[0],t[1])}function Axe(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function JB(e,t,r){return e[0]<=t&&t<=e[2]&&e[1]<=r&&r<=e[3]}function Ixe(e,t){var r=e[0],n=e[1],i=e[2],a=e[3],h=t[0],p=t[1],g=_i.UNKNOWN;return h<r?g=g|_i.LEFT:h>i&&(g=g|_i.RIGHT),p<n?g=g|_i.BELOW:p>a&&(g=g|_i.ABOVE),g===_i.UNKNOWN&&(g=_i.INTERSECTING),g}function lo(){return[1/0,1/0,-1/0,-1/0]}function Bl(e,t,r,n,i){return i?(i[0]=e,i[1]=t,i[2]=r,i[3]=n,i):[e,t,r,n]}function Tm(e){return Bl(1/0,1/0,-1/0,-1/0,e)}function qxe(e,t){var r=e[0],n=e[1];return Bl(r,n,r,n,t)}function Pxe(e,t,r,n,i){var a=Tm(i);return QB(a,e,t,r,n)}function Dx(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function Mxe(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function Lx(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function QB(e,t,r,n,i){for(;r<n;r+=i)eMt(e,t[r],t[r+1]);return e}function eMt(e,t,r){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],r),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],r)}function LI(e,t){var r;return r=t(Im(e)),r||(r=t(Cm(e)),r)||(r=t(Am(e)),r)||(r=t(ms(e)),r)?r:!1}function kx(e){var t=0;return Fx(e)||(t=Ur(e)*Qn(e)),t}function Im(e){return[e[0],e[1]]}function Cm(e){return[e[2],e[1]]}function Ul(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function Oxe(e,t){var r;return t==="bottom-left"?r=Im(e):t==="bottom-right"?r=Cm(e):t==="top-left"?r=ms(e):t==="top-right"?r=Am(e):Nt(!1,13),r}function Nx(e,t,r,n,i){var a=kI(e,t,r,n),h=a[0],p=a[1],g=a[2],w=a[3],E=a[4],q=a[5],P=a[6],k=a[7];return Bl(Math.min(h,g,E,P),Math.min(p,w,q,k),Math.max(h,g,E,P),Math.max(p,w,q,k),i)}function kI(e,t,r,n){var i=t*n[0]/2,a=t*n[1]/2,h=Math.cos(r),p=Math.sin(r),g=i*h,w=i*p,E=a*h,q=a*p,P=e[0],k=e[1];return[P-g+q,k-w-E,P-g-q,k-w+E,P+g-q,k+w+E,P+g+q,k+w-E,P-g+q,k-w-E]}function Qn(e){return e[3]-e[1]}function Nh(e,t,r){var n=r||lo();return wp(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):Tm(n),n}function ms(e){return[e[0],e[3]]}function Am(e){return[e[2],e[3]]}function Ur(e){return e[2]-e[0]}function wp(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function Fx(e){return e[2]<e[0]||e[3]<e[1]}function Rxe(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function Dxe(e,t,r){var n=!1,i=Ixe(e,t),a=Ixe(e,r);if(i===_i.INTERSECTING||a===_i.INTERSECTING)n=!0;else{var h=e[0],p=e[1],g=e[2],w=e[3],E=t[0],q=t[1],P=r[0],k=r[1],W=(k-q)/(P-E),Q=void 0,$=void 0;a&_i.ABOVE&&!(i&_i.ABOVE)&&(Q=P-(k-w)/W,n=Q>=h&&Q<=g),!n&&a&_i.RIGHT&&!(i&_i.RIGHT)&&($=k-(P-g)*W,n=$>=p&&$<=w),!n&&a&_i.BELOW&&!(i&_i.BELOW)&&(Q=P-(k-p)/W,n=Q>=h&&Q<=g),!n&&a&_i.LEFT&&!(i&_i.LEFT)&&($=k-(P-h)*W,n=$>=p&&$<=w)}return n}function Lxe(e,t,r,n){var i=[];if(n>1)for(var a=e[2]-e[0],h=e[3]-e[1],p=0;p<n;++p)i.push(e[0]+a*p/n,e[1],e[2],e[1]+h*p/n,e[2]-a*p/n,e[3],e[0],e[3]-h*p/n);else i=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]];t(i,i,2);for(var g=[],w=[],p=0,E=i.length;p<E;p+=2)g.push(i[p]),w.push(i[p+1]);return QPt(g,w,r)}function kxe(e,t){for(var r=(""+e).split("."),n=(""+t).split("."),i=0;i<Math.max(r.length,n.length);i++){var a=parseInt(r[i]||"0",10),h=parseInt(n[i]||"0",10);if(a>h)return 1;if(h>a)return-1}return 0}function Nxe(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function Ep(e,t){for(var r=!0,n=e.length-1;n>=0;--n)if(e[n]!=t[n]){r=!1;break}return r}function qm(e,t){var r=Math.cos(t),n=Math.sin(t),i=e[0]*r-e[1]*n,a=e[1]*r+e[0]*n;return e[0]=i,e[1]=a,e}function Fxe(e,t){return e[0]*=t,e[1]*=t,e}function zxe(e,t){if(t.canWrapX()){var r=Ur(t.getExtent()),n=jxe(e,t,r);n&&(e[0]-=n*r)}return e}function jxe(e,t,r){var n=t.getExtent(),i=0;if(t.canWrapX()&&(e[0]<n[0]||e[0]>n[2])){var a=r||Ur(n);i=Math.floor((e[0]-n[0])/a)}return i}var tMt=6371008.8;function e3(e,t,r){var n=r||tMt,i=bm(e[1]),a=bm(t[1]),h=(a-i)/2,p=bm(t[0]-e[0])/2,g=Math.sin(h)*Math.sin(h)+Math.sin(p)*Math.sin(p)*Math.cos(i)*Math.cos(a);return 2*n*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))}var t3=!0;function Uxe(e){var t=e===void 0?!0:e;t3=!t}function r3(e,t,r){var n;if(t!==void 0){for(var i=0,a=e.length;i<a;++i)t[i]=e[i];n=t}else n=e.slice();return n}function Vxe(e,t,r){if(t!==void 0&&e!==t){for(var n=0,i=e.length;n<i;++n)t[n]=e[n];e=t}return e}function rMt(e){wxe(e.getCode(),e),Rx(e,e,r3)}function nMt(e){e.forEach(rMt)}function ji(e){return typeof e=="string"?bxe(e):e||null}function n3(e,t,r,n){e=ji(e);var i,a=e.getPointResolutionFunc();if(a){if(i=a(t,r),n&&n!==e.getUnits()){var h=e.getMetersPerUnit();h&&(i=i*h/so[n])}}else{var p=e.getUnits();if(p==uo.DEGREES&&!n||n==uo.DEGREES)i=t;else{var g=i3(e,ji("EPSG:4326"));if(g===Vxe&&p!==uo.DEGREES)i=t*e.getMetersPerUnit();else{var w=[r[0]-t/2,r[1],r[0]+t/2,r[1],r[0],r[1]-t/2,r[0],r[1]+t/2];w=g(w,w,2);var E=e3(w.slice(0,2),w.slice(2,4)),q=e3(w.slice(4,6),w.slice(6,8));i=(E+q)/2}var h=n?so[n]:e.getMetersPerUnit();h!==void 0&&(i/=h)}}return i}function Bxe(e){nMt(e),e.forEach(function(t){e.forEach(function(r){t!==r&&Rx(t,r,r3)})})}function iMt(e,t,r,n){e.forEach(function(i){t.forEach(function(a){Rx(i,a,r),Rx(a,i,n)})})}function NI(e,t){return e?typeof e=="string"?ji(e):e:ji(t)}function Fh(e,t){if(e===t)return!0;var r=e.getUnits()===t.getUnits();if(e.getCode()===t.getCode())return r;var n=i3(e,t);return n===r3&&r}function i3(e,t){var r=e.getCode(),n=t.getCode(),i=Txe(r,n);return i||(i=Vxe),i}function Sp(e,t){var r=ji(e),n=ji(t);return i3(r,n)}function Pm(e,t,r){var n=Sp(t,r);return n(e,void 0,e.length)}function zh(e,t,r,n){var i=Sp(t,r);return Lxe(e,i,void 0,n)}var Vl=null;function $xe(){return Vl}function zx(e,t){return Vl?Pm(e,t,Vl):e}function Hs(e,t){return Vl?Pm(e,Vl,t):(t3&&!Ep(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(t3=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e)}function Gxe(e,t){return Vl?zh(e,t,Vl):e}function jh(e,t){return Vl?zh(e,Vl,t):e}function aMt(){Bxe(HB),Bxe(ZB),iMt(ZB,HB,yxe,_xe)}aMt();var $m=De(Xt(),1),Zs=De(zr(),1);var uMt=function(){function e(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return e.prototype.preventDefault=function(){this.defaultPrevented=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e}();var ua=uMt;var $l={PROPERTYCHANGE:"propertychange"};var lMt=function(){function e(){this.disposed=!1}return e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},e.prototype.disposeInternal=function(){},e}(),Mm=lMt;function jx(e,t){return e>t?1:e<t?-1:0}function Om(e,t,r){var n=e.length;if(e[0]<=t)return 0;if(t<=e[n-1])return n-1;var i=void 0;if(r>0){for(i=1;i<n;++i)if(e[i]<t)return i-1}else if(r<0){for(i=1;i<n;++i)if(e[i]<=t)return i}else for(i=1;i<n;++i){if(e[i]==t)return i;if(e[i]<t)return typeof r=="function"?r(t,e[i-1],e[i])>0?i-1:i:e[i-1]-t<t-e[i]?i-1:i}return n-1}function Qxe(e,t){for(var r=Array.isArray(t)?t:[t],n=r.length,i=0;i<n;i++)e[e.length]=r[i]}function Rm(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function e1e(e,t,r){var n=t||jx;return e.every(function(i,a){if(a===0)return!0;var h=n(e[a-1],i);return!(h>0||r&&h===0)})}function Bh(){return!0}function Gl(){return!1}function Wl(){}function t1e(e){var t=!1,r,n,i;return function(){var a=Array.prototype.slice.call(arguments);return(!t||this!==i||!Rm(a,n))&&(t=!0,i=this,n=a,r=e.apply(this,arguments)),r}}var cMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hMt=function(e){cMt(t,e);function t(r){var n=e.call(this)||this;return n.eventTarget_=r,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return t.prototype.addEventListener=function(r,n){if(!(!r||!n)){var i=this.listeners_||(this.listeners_={}),a=i[r]||(i[r]=[]);a.indexOf(n)===-1&&a.push(n)}},t.prototype.dispatchEvent=function(r){var n=typeof r=="string",i=n?r:r.type,a=this.listeners_&&this.listeners_[i];if(a){var h=n?new ua(r):r;h.target||(h.target=this.eventTarget_||this);var p=this.dispatching_||(this.dispatching_={}),g=this.pendingRemovals_||(this.pendingRemovals_={});i in p||(p[i]=0,g[i]=0),++p[i];for(var w,E=0,q=a.length;E<q;++E)if("handleEvent"in a[E]?w=a[E].handleEvent(h):w=a[E].call(this,h),w===!1||h.propagationStopped){w=!1;break}if(--p[i]===0){var P=g[i];for(delete g[i];P--;)this.removeEventListener(i,Wl);delete p[i]}return w}},t.prototype.disposeInternal=function(){this.listeners_&&Pu(this.listeners_)},t.prototype.getListeners=function(r){return this.listeners_&&this.listeners_[r]||void 0},t.prototype.hasListener=function(r){return this.listeners_?r?r in this.listeners_:Object.keys(this.listeners_).length>0:!1},t.prototype.removeEventListener=function(r,n){var i=this.listeners_&&this.listeners_[r];if(i){var a=i.indexOf(n);a!==-1&&(this.pendingRemovals_&&r in this.pendingRemovals_?(i[a]=Wl,++this.pendingRemovals_[r]):(i.splice(a,1),i.length===0&&delete this.listeners_[r]))}},t}(Mm),Mu=hMt;var vt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Ht(e,t,r,n,i){if(n&&n!==e&&(r=r.bind(n)),i){var a=r;r=function(){e.removeEventListener(t,r),a.apply(this,arguments)}}var h={target:e,type:t,listener:r};return e.addEventListener(t,r),h}function Dm(e,t,r,n){return Ht(e,t,r,n,!0)}function vr(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Pu(e))}var fMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FI=function(e){fMt(t,e);function t(){var r=e.call(this)||this;return r.on=r.onInternal,r.once=r.onceInternal,r.un=r.unInternal,r.revision_=0,r}return t.prototype.changed=function(){++this.revision_,this.dispatchEvent(vt.CHANGE)},t.prototype.getRevision=function(){return this.revision_},t.prototype.onInternal=function(r,n){if(Array.isArray(r)){for(var i=r.length,a=new Array(i),h=0;h<i;++h)a[h]=Ht(this,r[h],n);return a}else return Ht(this,r,n)},t.prototype.onceInternal=function(r,n){var i;if(Array.isArray(r)){var a=r.length;i=new Array(a);for(var h=0;h<a;++h)i[h]=Dm(this,r[h],n)}else i=Dm(this,r,n);return n.ol_key=i,i},t.prototype.unInternal=function(r,n){var i=n.ol_key;if(i)pMt(i);else if(Array.isArray(r))for(var a=0,h=r.length;a<h;++a)this.removeEventListener(r[a],n);else this.removeEventListener(r,n)},t}(Mu);FI.prototype.on;FI.prototype.once;FI.prototype.un;function pMt(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;++t)vr(e[t]);else vr(e)}var zI=FI;var n1e=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r1e=function(e){n1e(t,e);function t(r,n,i){var a=e.call(this,r)||this;return a.key=n,a.oldValue=i,a}return t}(ua);var dMt=function(e){n1e(t,e);function t(r){var n=e.call(this)||this;return n.on,n.once,n.un,Bn(n),n.values_=null,r!==void 0&&n.setProperties(r),n}return t.prototype.get=function(r){var n;return this.values_&&this.values_.hasOwnProperty(r)&&(n=this.values_[r]),n},t.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},t.prototype.getProperties=function(){return this.values_&&wr({},this.values_)||{}},t.prototype.hasProperties=function(){return!!this.values_},t.prototype.notify=function(r,n){var i;i="change:".concat(r),this.hasListener(i)&&this.dispatchEvent(new r1e(i,r,n)),i=$l.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new r1e(i,r,n))},t.prototype.addChangeListener=function(r,n){this.addEventListener("change:".concat(r),n)},t.prototype.removeChangeListener=function(r,n){this.removeEventListener("change:".concat(r),n)},t.prototype.set=function(r,n,i){var a=this.values_||(this.values_={});if(i)a[r]=n;else{var h=a[r];a[r]=n,h!==n&&this.notify(r,h)}},t.prototype.setProperties=function(r,n){for(var i in r)this.set(i,r[i],n)},t.prototype.applyProperties=function(r){r.values_&&wr(this.values_||(this.values_={}),r.values_)},t.prototype.unset=function(r,n){if(this.values_&&r in this.values_){var i=this.values_[r];delete this.values_[r],Sxe(this.values_)&&(this.values_=null),n||this.notify(r,i)}},t}(zI),xi=dMt;var a3={ACTIVE:"active"};function o3(e){return Math.pow(e,3)}function gs(e){return 1-o3(1-e)}function i1e(e){return 3*e*e-2*e*e*e}function a1e(e){return e}var vMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mMt=function(e){vMt(t,e);function t(r){var n=e.call(this)||this;return n.on,n.once,n.un,r&&r.handleEvent&&(n.handleEvent=r.handleEvent),n.map_=null,n.setActive(!0),n}return t.prototype.getActive=function(){return this.get(a3.ACTIVE)},t.prototype.getMap=function(){return this.map_},t.prototype.handleEvent=function(r){return!0},t.prototype.setActive=function(r){this.set(a3.ACTIVE,r)},t.prototype.setMap=function(r){this.map_=r},t}(xi);function o1e(e,t,r){var n=e.getCenterInternal();if(n){var i=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:r!==void 0?r:250,easing:a1e,center:e.getConstrainedCenter(i)})}}function Lm(e,t,r,n){var i=e.getZoom();if(i!==void 0){var a=e.getConstrainedZoom(i+t),h=e.getResolutionForZoom(a);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:h,anchor:r,duration:n!==void 0?n:250,easing:gs})}}var Ou=mMt;var Zr={SINGLECLICK:"singleclick",CLICK:vt.CLICK,DBLCLICK:vt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var gMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yMt=function(e){gMt(t,e);function t(r){var n=this,i=r||{};return n=e.call(this,i)||this,i.handleDownEvent&&(n.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(n.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(n.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(n.handleUpEvent=i.handleUpEvent),i.stopDown&&(n.stopDown=i.stopDown),n.handlingDownUpSequence=!1,n.targetPointers=[],n}return t.prototype.getPointerCount=function(){return this.targetPointers.length},t.prototype.handleDownEvent=function(r){return!1},t.prototype.handleDragEvent=function(r){},t.prototype.handleEvent=function(r){if(!r.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(r),this.handlingDownUpSequence){if(r.type==Zr.POINTERDRAG)this.handleDragEvent(r),r.originalEvent.preventDefault();else if(r.type==Zr.POINTERUP){var i=this.handleUpEvent(r);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(r.type==Zr.POINTERDOWN){var a=this.handleDownEvent(r);this.handlingDownUpSequence=a,n=this.stopDown(a)}else r.type==Zr.POINTERMOVE&&this.handleMoveEvent(r);return!n},t.prototype.handleMoveEvent=function(r){},t.prototype.handleUpEvent=function(r){return!1},t.prototype.stopDown=function(r){return r},t.prototype.updateTrackedPointers_=function(r){r.activePointers&&(this.targetPointers=r.activePointers)},t}(Ou);function km(e){for(var t=e.length,r=0,n=0,i=0;i<t;i++)r+=e[i].clientX,n+=e[i].clientY;return[r/t,n/t]}var Ru=yMt;var la={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};var Uh=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",s1e=Uh.indexOf("firefox")!==-1,_Mt=Uh.indexOf("safari")!==-1&&Uh.indexOf("chrom")==-1,msr=_Mt&&!!(Uh.indexOf("version/15.4")>=0||Uh.match(/cpu (os|iphone os) 15_4 like mac os x/)),u1e=Uh.indexOf("webkit")!==-1&&Uh.indexOf("edge")==-1,l1e=Uh.indexOf("macintosh")!==-1,jI=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,BI=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,c1e=typeof Image!="undefined"&&Image.prototype.decode,UI=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(r){}return e}();var xsr=new Array(6);function Hl(){return[1,0,0,1,0,0]}function Bi(e,t){var r=t[0],n=t[1];return t[0]=e[0]*r+e[2]*n+e[4],t[1]=e[1]*r+e[3]*n+e[5],t}function Zl(e,t,r,n,i,a,h,p){var g=Math.sin(a),w=Math.cos(a);return e[0]=n*w,e[1]=i*g,e[2]=-n*g,e[3]=i*w,e[4]=h*n*w-p*n*g+t,e[5]=h*i*g+p*i*w+r,e}function VI(e,t){var r=xMt(t);Nt(r!==0,32);var n=t[0],i=t[1],a=t[2],h=t[3],p=t[4],g=t[5];return e[0]=h/r,e[1]=-i/r,e[2]=-a/r,e[3]=n/r,e[4]=(a*g-h*p)/r,e[5]=-(n*g-i*p)/r,e}function xMt(e){return e[0]*e[3]-e[1]*e[2]}var h1e;function f1e(e){var t="matrix("+e.join(", ")+")";if(BI)return t;var r=h1e||(h1e=document.createElement("div"));return r.style.transform=t,r.style.transform}function s3(e,t,r,n,i,a){for(var h=a||[],p=0,g=t;g<r;g+=n){var w=e[g],E=e[g+1];h[p++]=i[0]*w+i[2]*E+i[4],h[p++]=i[1]*w+i[3]*E+i[5]}return a&&h.length!=p&&(h.length=p),h}function p1e(e,t,r,n,i,a,h){for(var p=h||[],g=Math.cos(i),w=Math.sin(i),E=a[0],q=a[1],P=0,k=t;k<r;k+=n){var W=e[k]-E,Q=e[k+1]-q;p[P++]=E+W*g-Q*w,p[P++]=q+W*w+Q*g;for(var $=k+2;$<k+n;++$)p[P++]=e[$]}return h&&p.length!=P&&(p.length=P),p}function d1e(e,t,r,n,i,a,h,p){for(var g=p||[],w=h[0],E=h[1],q=0,P=t;P<r;P+=n){var k=e[P]-w,W=e[P+1]-E;g[q++]=w+i*k,g[q++]=E+a*W;for(var Q=P+2;Q<P+n;++Q)g[q++]=e[Q]}return p&&g.length!=q&&(g.length=q),g}function v1e(e,t,r,n,i,a,h){for(var p=h||[],g=0,w=t;w<r;w+=n){p[g++]=e[w]+i,p[g++]=e[w+1]+a;for(var E=w+2;E<w+n;++E)p[g++]=e[E]}return h&&p.length!=g&&(p.length=g),p}var bMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m1e=Hl(),wMt=function(e){bMt(t,e);function t(){var r=e.call(this)||this;return r.extent_=lo(),r.extentRevision_=-1,r.simplifiedGeometryMaxMinSquaredTolerance=0,r.simplifiedGeometryRevision=0,r.simplifyTransformedInternal=t1e(function(n,i,a){if(!a)return this.getSimplifiedGeometry(i);var h=this.clone();return h.applyTransform(a),h.getSimplifiedGeometry(i)}),r}return t.prototype.simplifyTransformed=function(r,n){return this.simplifyTransformedInternal(this.getRevision(),r,n)},t.prototype.clone=function(){return or()},t.prototype.closestPointXY=function(r,n,i,a){return or()},t.prototype.containsXY=function(r,n){var i=this.getClosestPoint([r,n]);return i[0]===r&&i[1]===n},t.prototype.getClosestPoint=function(r,n){var i=n||[NaN,NaN];return this.closestPointXY(r[0],r[1],i,1/0),i},t.prototype.intersectsCoordinate=function(r){return this.containsXY(r[0],r[1])},t.prototype.computeExtent=function(r){return or()},t.prototype.getExtent=function(r){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&Tm(n),this.extentRevision_=this.getRevision()}return Rxe(this.extent_,r)},t.prototype.rotate=function(r,n){or()},t.prototype.scale=function(r,n,i){or()},t.prototype.simplify=function(r){return this.getSimplifiedGeometry(r*r)},t.prototype.getSimplifiedGeometry=function(r){return or()},t.prototype.getType=function(){return or()},t.prototype.applyTransform=function(r){or()},t.prototype.intersectsExtent=function(r){return or()},t.prototype.translate=function(r,n){or()},t.prototype.transform=function(r,n){var i=ji(r),a=i.getUnits()==uo.TILE_PIXELS?function(h,p,g){var w=i.getExtent(),E=i.getWorldExtent(),q=Qn(E)/Qn(w);return Zl(m1e,E[0],E[3],q,-q,0,0,0),s3(h,0,h.length,g,m1e,p),Sp(i,n)(h,p,g)}:Sp(i,n);return this.applyTransform(a),this},t}(xi),g1e=wMt;var EMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),SMt=function(e){EMt(t,e);function t(){var r=e.call(this)||this;return r.layout=la.XY,r.stride=2,r.flatCoordinates=null,r}return t.prototype.computeExtent=function(r){return Pxe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r)},t.prototype.getCoordinates=function(){return or()},t.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.getFlatCoordinates=function(){return this.flatCoordinates},t.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},t.prototype.getLayout=function(){return this.layout},t.prototype.getSimplifiedGeometry=function(r){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),r<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&r<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(r),i=n.getFlatCoordinates();return i.length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=r,this)},t.prototype.getSimplifiedGeometryInternal=function(r){return this},t.prototype.getStride=function(){return this.stride},t.prototype.setFlatCoordinates=function(r,n){this.stride=y1e(r),this.layout=r,this.flatCoordinates=n},t.prototype.setCoordinates=function(r,n){or()},t.prototype.setLayout=function(r,n,i){var a;if(r)a=y1e(r);else{for(var h=0;h<i;++h)if(n.length===0){this.layout=la.XY,this.stride=2;return}else n=n[0];a=n.length,r=TMt(a)}this.layout=r,this.stride=a},t.prototype.applyTransform=function(r){this.flatCoordinates&&(r(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},t.prototype.rotate=function(r,n){var i=this.getFlatCoordinates();if(i){var a=this.getStride();p1e(i,0,i.length,a,r,n,i),this.changed()}},t.prototype.scale=function(r,n,i){var a=n;a===void 0&&(a=r);var h=i;h||(h=Ul(this.getExtent()));var p=this.getFlatCoordinates();if(p){var g=this.getStride();d1e(p,0,p.length,g,r,a,h,p),this.changed()}},t.prototype.translate=function(r,n){var i=this.getFlatCoordinates();if(i){var a=this.getStride();v1e(i,0,i.length,a,r,n,i),this.changed()}},t}(g1e);function TMt(e){var t;return e==2?t=la.XY:e==3?t=la.XYZ:e==4&&(t=la.XYZM),t}function y1e(e){var t;return e==la.XY?t=2:e==la.XYZ||e==la.XYM?t=3:e==la.XYZM&&(t=4),t}var Nm=SMt;function _1e(e,t,r,n,i,a,h){var p=e[t],g=e[t+1],w=e[r]-p,E=e[r+1]-g,q;if(w===0&&E===0)q=t;else{var P=((i-p)*w+(a-g)*E)/(w*w+E*E);if(P>1)q=r;else if(P>0){for(var k=0;k<n;++k)h[k]=mxe(e[t+k],e[r+k],P);h.length=n;return}else q=t}for(var k=0;k<n;++k)h[k]=e[q+k];h.length=n}function u3(e,t,r,n,i){var a=e[t],h=e[t+1];for(t+=n;t<r;t+=n){var p=e[t],g=e[t+1],w=jl(a,h,p,g);w>i&&(i=w),a=p,h=g}return i}function x1e(e,t,r,n,i){for(var a=0,h=r.length;a<h;++a){var p=r[a];i=u3(e,t,p,n,i),t=p}return i}function l3(e,t,r,n,i,a,h,p,g,w,E){if(t==r)return w;var q,P;if(i===0)if(P=jl(h,p,e[t],e[t+1]),P<w){for(q=0;q<n;++q)g[q]=e[t+q];return g.length=n,P}else return w;for(var k=E||[NaN,NaN],W=t+n;W<r;)if(_1e(e,W-n,W,n,h,p,k),P=jl(h,p,k[0],k[1]),P<w){for(w=P,q=0;q<n;++q)g[q]=k[q];g.length=n,W+=n}else W+=n*Math.max((Math.sqrt(P)-Math.sqrt(w))/i|0,1);if(a&&(_1e(e,r-n,t,n,h,p,k),P=jl(h,p,k[0],k[1]),P<w)){for(w=P,q=0;q<n;++q)g[q]=k[q];g.length=n}return w}function b1e(e,t,r,n,i,a,h,p,g,w,E){for(var q=E||[NaN,NaN],P=0,k=r.length;P<k;++P){var W=r[P];w=l3(e,t,W,n,i,a,h,p,g,w,q),t=W}return w}function w1e(e,t,r,n){for(var i=0,a=r.length;i<a;++i)e[t++]=r[i];return t}function c3(e,t,r,n){for(var i=0,a=r.length;i<a;++i)for(var h=r[i],p=0;p<n;++p)e[t++]=h[p];return t}function E1e(e,t,r,n,i){for(var a=i||[],h=0,p=0,g=r.length;p<g;++p){var w=c3(e,t,r[p],n);a[h++]=w,t=w}return a.length=h,a}function S1e(e,t,r,n,i,a,h){var p=(r-t)/n;if(p<3){for(;t<r;t+=n)a[h++]=e[t],a[h++]=e[t+1];return h}var g=new Array(p);g[0]=1,g[p-1]=1;for(var w=[t,r-n],E=0;w.length>0;){for(var q=w.pop(),P=w.pop(),k=0,W=e[P],Q=e[P+1],$=e[q],V=e[q+1],Z=P+n;Z<q;Z+=n){var te=e[Z],se=e[Z+1],Ie=dxe(te,se,W,Q,$,V);Ie>k&&(E=Z,k=Ie)}k>i&&(g[(E-t)/n]=1,P+n<E&&w.push(P,E),E+n<q&&w.push(E,q))}for(var Z=0;Z<p;++Z)g[Z]&&(a[h++]=e[t+Z*n],a[h++]=e[t+Z*n+1]);return h}function Fm(e,t){return t*Math.round(e/t)}function IMt(e,t,r,n,i,a,h){if(t==r)return h;var p=Fm(e[t],i),g=Fm(e[t+1],i);t+=n,a[h++]=p,a[h++]=g;var w,E;do if(w=Fm(e[t],i),E=Fm(e[t+1],i),t+=n,t==r)return a[h++]=w,a[h++]=E,h;while(w==p&&E==g);for(;t<r;){var q=Fm(e[t],i),P=Fm(e[t+1],i);if(t+=n,!(q==w&&P==E)){var k=w-p,W=E-g,Q=q-p,$=P-g;if(k*$==W*Q&&(k<0&&Q<k||k==Q||k>0&&Q>k)&&(W<0&&$<W||W==$||W>0&&$>W)){w=q,E=P;continue}a[h++]=w,a[h++]=E,p=w,g=E,w=q,E=P}}return a[h++]=w,a[h++]=E,h}function T1e(e,t,r,n,i,a,h,p){for(var g=0,w=r.length;g<w;++g){var E=r[g];h=IMt(e,t,E,n,i,a,h),p.push(h),t=E}return h}function h3(e,t,r,n,i){for(var a=i!==void 0?i:[],h=0,p=t;p<r;p+=n)a[h++]=e.slice(p,p+n);return a.length=h,a}function I1e(e,t,r,n,i){for(var a=i!==void 0?i:[],h=0,p=0,g=r.length;p<g;++p){var w=r[p];a[h++]=h3(e,t,w,n,a[h]),t=w}return a.length=h,a}function f3(e,t,r,n){for(var i=0,a=e[r-n],h=e[r-n+1];t<r;t+=n){var p=e[t],g=e[t+1];i+=h*p-a*g,a=p,h=g}return i/2}function C1e(e,t,r,n){for(var i=0,a=0,h=r.length;a<h;++a){var p=r[a];i+=f3(e,t,p,n),t=p}return i}var CMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),AMt=function(e){CMt(t,e);function t(r,n){var i=e.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(r[0])?i.setFlatCoordinates(n,r):i.setCoordinates(r,n),i}return t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(r,n,i,a){return a<DI(this.getExtent(),r,n)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(u3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),l3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,r,n,i,a))},t.prototype.getArea=function(){return f3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinates=function(){return h3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getSimplifiedGeometryInternal=function(r){var n=[];return n.length=S1e(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,n,0),new t(n,la.XY)},t.prototype.getType=function(){return"LinearRing"},t.prototype.intersectsExtent=function(r){return!1},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=c3(this.flatCoordinates,0,r,this.stride),this.changed()},t}(Nm),p3=AMt;var qMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),PMt=function(e){qMt(t,e);function t(r,n){var i=e.call(this)||this;return i.setCoordinates(r,n),i}return t.prototype.clone=function(){var r=new t(this.flatCoordinates.slice(),this.layout);return r.applyProperties(this),r},t.prototype.closestPointXY=function(r,n,i,a){var h=this.flatCoordinates,p=jl(r,n,h[0],h[1]);if(p<a){for(var g=this.stride,w=0;w<g;++w)i[w]=h[w];return i.length=g,p}else return a},t.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},t.prototype.computeExtent=function(r){return qxe(this.flatCoordinates,r)},t.prototype.getType=function(){return"Point"},t.prototype.intersectsExtent=function(r){return JB(r,this.flatCoordinates[0],this.flatCoordinates[1])},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=w1e(this.flatCoordinates,0,r,this.stride),this.changed()},t}(Nm),A1e=PMt;function q1e(e,t,r,n,i){var a=LI(i,function(h){return!Vh(e,t,r,n,h[0],h[1])});return!a}function Vh(e,t,r,n,i,a){for(var h=0,p=e[r-n],g=e[r-n+1];t<r;t+=n){var w=e[t],E=e[t+1];g<=a?E>a&&(w-p)*(a-g)-(i-p)*(E-g)>0&&h++:E<=a&&(w-p)*(a-g)-(i-p)*(E-g)<0&&h--,p=w,g=E}return h!==0}function $I(e,t,r,n,i,a){if(r.length===0||!Vh(e,t,r[0],n,i,a))return!1;for(var h=1,p=r.length;h<p;++h)if(Vh(e,r[h-1],r[h],n,i,a))return!1;return!0}function P1e(e,t,r,n,i,a,h){for(var p,g,w,E,q,P,k,W=i[a+1],Q=[],$=0,V=r.length;$<V;++$){var Z=r[$];for(E=e[Z-n],P=e[Z-n+1],p=t;p<Z;p+=n)q=e[p],k=e[p+1],(W<=P&&k<=W||P<=W&&W<=k)&&(w=(W-P)/(k-P)*(q-E)+E,Q.push(w)),E=q,P=k}var te=NaN,se=-1/0;for(Q.sort(jx),E=Q[0],p=1,g=Q.length;p<g;++p){q=Q[p];var Ie=Math.abs(q-E);Ie>se&&(w=(E+q)/2,$I(e,t,r,n,w,W)&&(te=w,se=Ie)),E=q}return isNaN(te)&&(te=i[a]),h?(h.push(te,W,se),h):[te,W,se]}function M1e(e,t,r,n,i){var a;for(t+=n;t<r;t+=n)if(a=i(e.slice(t-n,t),e.slice(t,t+n)),a)return a;return!1}function O1e(e,t,r,n,i){var a=QB(lo(),e,t,r,n);return wp(i,a)?Axe(i,a)||a[0]>=i[0]&&a[2]<=i[2]||a[1]>=i[1]&&a[3]<=i[3]?!0:M1e(e,t,r,n,function(h,p){return Dxe(i,h,p)}):!1}function d3(e,t,r,n,i){return!!(O1e(e,t,r,n,i)||Vh(e,t,r,n,i[0],i[1])||Vh(e,t,r,n,i[0],i[3])||Vh(e,t,r,n,i[2],i[1])||Vh(e,t,r,n,i[2],i[3]))}function R1e(e,t,r,n,i){if(!d3(e,t,r[0],n,i))return!1;if(r.length===1)return!0;for(var a=1,h=r.length;a<h;++a)if(q1e(e,r[a-1],r[a],n,i)&&!O1e(e,r[a-1],r[a],n,i))return!1;return!0}function D1e(e,t,r,n){for(;t<r-n;){for(var i=0;i<n;++i){var a=e[t+i];e[t+i]=e[r-n+i],e[r-n+i]=a}t+=n,r-=n}}function L1e(e,t,r,n){for(var i=0,a=e[r-n],h=e[r-n+1];t<r;t+=n){var p=e[t],g=e[t+1];i+=(p-a)*(g+h),a=p,h=g}return i===0?void 0:i>0}function k1e(e,t,r,n,i){for(var a=i!==void 0?i:!1,h=0,p=r.length;h<p;++h){var g=r[h],w=L1e(e,t,g,n);if(h===0){if(a&&w||!a&&!w)return!1}else if(a&&!w||!a&&w)return!1;t=g}return!0}function v3(e,t,r,n,i){for(var a=i!==void 0?i:!1,h=0,p=r.length;h<p;++h){var g=r[h],w=L1e(e,t,g,n),E=h===0?a&&w||!a&&!w:a&&!w||!a&&w;E&&D1e(e,t,g,n),t=g}return t}var MMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),N1e=function(e){MMt(t,e);function t(r,n,i){var a=e.call(this)||this;return a.ends_=[],a.flatInteriorPointRevision_=-1,a.flatInteriorPoint_=null,a.maxDelta_=-1,a.maxDeltaRevision_=-1,a.orientedRevision_=-1,a.orientedFlatCoordinates_=null,n!==void 0&&i?(a.setFlatCoordinates(n,r),a.ends_=i):a.setCoordinates(r,n),a}return t.prototype.appendLinearRing=function(r){this.flatCoordinates?Qxe(this.flatCoordinates,r.getFlatCoordinates()):this.flatCoordinates=r.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){var r=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return r.applyProperties(this),r},t.prototype.closestPointXY=function(r,n,i,a){return a<DI(this.getExtent(),r,n)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(x1e(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),b1e(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,r,n,i,a))},t.prototype.containsXY=function(r,n){return $I(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,n)},t.prototype.getArea=function(){return C1e(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},t.prototype.getCoordinates=function(r){var n;return r!==void 0?(n=this.getOrientedFlatCoordinates().slice(),v3(n,0,this.ends_,this.stride,r)):n=this.flatCoordinates,I1e(n,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var r=Ul(this.getExtent());this.flatInteriorPoint_=P1e(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},t.prototype.getInteriorPoint=function(){return new A1e(this.getFlatInteriorPoint(),la.XYM)},t.prototype.getLinearRingCount=function(){return this.ends_.length},t.prototype.getLinearRing=function(r){return r<0||this.ends_.length<=r?null:new p3(this.flatCoordinates.slice(r===0?0:this.ends_[r-1],this.ends_[r]),this.layout)},t.prototype.getLinearRings=function(){for(var r=this.layout,n=this.flatCoordinates,i=this.ends_,a=[],h=0,p=0,g=i.length;p<g;++p){var w=i[p],E=new p3(n.slice(h,w),r);a.push(E),h=w}return a},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var r=this.flatCoordinates;k1e(r,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=r:(this.orientedFlatCoordinates_=r.slice(),this.orientedFlatCoordinates_.length=v3(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(r){var n=[],i=[];return n.length=T1e(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(r),n,0,i),new t(n,la.XY,i)},t.prototype.getType=function(){return"Polygon"},t.prototype.intersectsExtent=function(r){return R1e(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r)},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=E1e(this.flatCoordinates,0,r,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},t}(Nm),GI=N1e;function Bx(e){var t=e[0],r=e[1],n=e[2],i=e[3],a=[t,r,t,i,n,i,n,r,t,r];return new N1e(a,la.XY,[a.length])}var OMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),RMt=function(e){OMt(t,e);function t(r){var n=e.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+r,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return t.prototype.disposeInternal=function(){this.setMap(null)},t.prototype.render_=function(){var r=this.startPixel_,n=this.endPixel_,i="px",a=this.element_.style;a.left=Math.min(r[0],n[0])+i,a.top=Math.min(r[1],n[1])+i,a.width=Math.abs(n[0]-r[0])+i,a.height=Math.abs(n[1]-r[1])+i},t.prototype.setMap=function(r){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=r,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},t.prototype.setPixels=function(r,n){this.startPixel_=r,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},t.prototype.createOrUpdateGeometry=function(){var r=this.startPixel_,n=this.endPixel_,i=[r,[r[0],n[1]],n,[n[0],r[1]]],a=i.map(this.map_.getCoordinateFromPixelInternal,this.map_);a[4]=a[0].slice(),this.geometry_?this.geometry_.setCoordinates([a]):this.geometry_=new GI([a])},t.prototype.getGeometry=function(){return this.geometry_},t}(Mm),F1e=RMt;function Ux(e){var t=arguments;return function(r){for(var n=!0,i=0,a=t.length;i<a&&(n=n&&t[i](r),!!n);++i);return n}}var z1e=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},DMt=function(e){var t=e.map.getTargetElement(),r=e.map.getOwnerDocument().activeElement;return t.contains(r)},WI=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?DMt(e):!0},j1e=Bh;var HI=function(e){var t=e.originalEvent;return t.button==0&&!(u1e&&l1e&&t.ctrlKey)};var ZI=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var B1e=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},KI=function(e){var t=e.originalEvent,r=t.target.tagName;return r!=="INPUT"&&r!=="SELECT"&&r!=="TEXTAREA"&&!t.target.isContentEditable},XI=function(e){var t=e.originalEvent;return Nt(t!==void 0,56),t.pointerType=="mouse"};var U1e=function(e){var t=e.originalEvent;return Nt(t!==void 0,56),t.isPrimary&&t.button===0};var V1e=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),YI={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},m3=function(e){V1e(t,e);function t(r,n,i){var a=e.call(this,r)||this;return a.coordinate=n,a.mapBrowserEvent=i,a}return t}(ua);var LMt=function(e){V1e(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var i=r||{};return n.box_=new F1e(i.className||"ol-dragbox"),n.minArea_=i.minArea!==void 0?i.minArea:64,i.onBoxEnd&&(n.onBoxEnd=i.onBoxEnd),n.startPixel_=null,n.condition_=i.condition?i.condition:HI,n.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:n.defaultBoxEndCondition,n}return t.prototype.defaultBoxEndCondition=function(r,n,i){var a=i[0]-n[0],h=i[1]-n[1];return a*a+h*h>=this.minArea_},t.prototype.getGeometry=function(){return this.box_.getGeometry()},t.prototype.handleDragEvent=function(r){this.box_.setPixels(this.startPixel_,r.pixel),this.dispatchEvent(new m3(YI.BOXDRAG,r.coordinate,r))},t.prototype.handleUpEvent=function(r){this.box_.setMap(null);var n=this.boxEndCondition_(r,this.startPixel_,r.pixel);return n&&this.onBoxEnd(r),this.dispatchEvent(new m3(n?YI.BOXEND:YI.BOXCANCEL,r.coordinate,r)),!1},t.prototype.handleDownEvent=function(r){return this.condition_(r)?(this.startPixel_=r.pixel,this.box_.setMap(r.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new m3(YI.BOXSTART,r.coordinate,r)),!0):!1},t.prototype.onBoxEnd=function(r){},t}(Ru),$1e=LMt;var kMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NMt=function(e){kMt(t,e);function t(r){var n=this,i=r||{},a=i.condition?i.condition:B1e;return n=e.call(this,{condition:a,className:i.className||"ol-dragzoom",minArea:i.minArea})||this,n.duration_=i.duration!==void 0?i.duration:200,n.out_=i.out!==void 0?i.out:!1,n}return t.prototype.onBoxEnd=function(r){var n=this.getMap(),i=n.getView(),a=this.getGeometry();if(this.out_){var h=i.rotatedExtentForGeometry(a),p=i.getResolutionForExtentInternal(h),g=i.getResolution()/p;a=a.clone(),a.scale(g*g)}i.fitInternal(a,{duration:this.duration_,easing:gs})},t}($1e),JI=NMt;var Du={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};function Kl(e,t,r,n){var i;return r&&r.length?i=r.shift():BI?i=new OffscreenCanvas(e||300,t||300):i=document.createElement("canvas"),e&&(i.width=e),t&&(i.height=t),i.getContext("2d",n)}function G1e(e){var t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function zm(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function Vx(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function W1e(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function H1e(e,t){for(var r=e.childNodes,n=0;;++n){var i=r[n],a=t[n];if(!i&&!a)break;if(i!==a){if(!i){e.appendChild(a);continue}if(!a){e.removeChild(i),--n;continue}e.insertBefore(a,i)}}}var FMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zMt=function(e){FMt(t,e);function t(r){var n=e.call(this)||this,i=r.element;return i&&!r.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),n.element=i||null,n.target_=null,n.map_=null,n.listenerKeys=[],r.render&&(n.render=r.render),r.target&&n.setTarget(r.target),n}return t.prototype.disposeInternal=function(){Vx(this.element),e.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(r){this.map_&&Vx(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n)vr(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=r,r){var a=this.target_?this.target_:r.getOverlayContainerStopEvent();a.appendChild(this.element),this.render!==Wl&&this.listenerKeys.push(Ht(r,Du.POSTRENDER,this.render,this)),r.render()}},t.prototype.render=function(r){},t.prototype.setTarget=function(r){this.target_=typeof r=="string"?document.getElementById(r):r},t}(xi),ko=zMt;var Un={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var $x="ol-hidden";var ys="ol-unselectable",g3="ol-unsupported",Lu="ol-control",y3="ol-collapsed",jMt=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Z1e=["style","variant","weight","size","lineHeight","family"],K1e=function(e){var t=e.match(jMt);if(!t)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=Z1e.length;n<i;++n){var a=t[n+1];a!==void 0&&(r[Z1e[n]]=a)}return r.families=r.family.split(/,\s?/),r};var BMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),X1e=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],Y1e={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},UMt=function(e){BMt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,{element:document.createElement("div"),target:i.target})||this,n.on,n.once,n.un,n.keys_=i.keys!==void 0?i.keys:!1,n.source_=i.source,n.isInFullscreen_=!1,n.boundHandleMapTargetChange_=n.handleMapTargetChange_.bind(n),n.cssClassName_=i.className!==void 0?i.className:"ol-full-screen",n.documentListeners_=[],n.activeClassName_=i.activeClassName!==void 0?i.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=i.inactiveClassName!==void 0?i.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var a=i.label!==void 0?i.label:"\u2922";n.labelNode_=typeof a=="string"?document.createTextNode(a):a;var h=i.labelActive!==void 0?i.labelActive:"\xD7";n.labelActiveNode_=typeof h=="string"?document.createTextNode(h):h;var p=i.tipLabel?i.tipLabel:"Toggle full-screen";return n.button_=document.createElement("button"),n.button_.title=p,n.button_.setAttribute("type","button"),n.button_.appendChild(n.labelNode_),n.button_.addEventListener(vt.CLICK,n.handleClick_.bind(n),!1),n.setClassName_(n.button_,n.isInFullscreen_),n.element.className="".concat(n.cssClassName_," ").concat(ys," ").concat(Lu),n.element.appendChild(n.button_),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.handleFullScreen_()},t.prototype.handleFullScreen_=function(){var r=this.getMap();if(r){var n=r.getOwnerDocument();if(J1e(n))if(Q1e(n))$Mt(n);else{var i=void 0;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=r.getTargetElement(),this.keys_?VMt(i):ebe(i)}}},t.prototype.handleFullScreenChange_=function(){var r=this.getMap();if(r){var n=this.isInFullscreen_;this.isInFullscreen_=Q1e(r.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(zm(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(Y1e.ENTERFULLSCREEN)):(zm(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(Y1e.LEAVEFULLSCREEN)),r.updateSize())}},t.prototype.setClassName_=function(r,n){var i,a,h,p;n?((i=r.classList).remove.apply(i,this.inactiveClassName_),(a=r.classList).add.apply(a,this.activeClassName_)):((h=r.classList).remove.apply(h,this.activeClassName_),(p=r.classList).add.apply(p,this.inactiveClassName_))},t.prototype.setMap=function(r){var n=this.getMap();n&&n.removeChangeListener(Un.TARGET,this.boundHandleMapTargetChange_),e.prototype.setMap.call(this,r),this.handleMapTargetChange_(),r&&r.addChangeListener(Un.TARGET,this.boundHandleMapTargetChange_)},t.prototype.handleMapTargetChange_=function(){for(var r=this.documentListeners_,n=0,i=r.length;n<i;++n)vr(r[n]);r.length=0;var a=this.getMap();if(a){var h=a.getOwnerDocument();J1e(h)?this.element.classList.remove(g3):this.element.classList.add(g3);for(var n=0,i=X1e.length;n<i;++n)r.push(Ht(h,X1e[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},t}(ko);function J1e(e){var t=e.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&e.msFullscreenEnabled||t.requestFullscreen&&e.fullscreenEnabled)}function Q1e(e){return!!(e.webkitIsFullScreen||e.msFullscreenElement||e.fullscreenElement)}function ebe(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function VMt(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():ebe(e)}function $Mt(e){e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}var tbe=UMt;var Ra={ADD:"add",REMOVE:"remove"};var nbe=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rbe={LENGTH:"length"},QI=function(e){nbe(t,e);function t(r,n,i){var a=e.call(this,r)||this;return a.element=n,a.index=i,a}return t}(ua);var GMt=function(e){nbe(t,e);function t(r,n){var i=e.call(this)||this;i.on,i.once,i.un;var a=n||{};if(i.unique_=!!a.unique,i.array_=r||[],i.unique_)for(var h=0,p=i.array_.length;h<p;++h)i.assertUnique_(i.array_[h],h);return i.updateLength_(),i}return t.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},t.prototype.extend=function(r){for(var n=0,i=r.length;n<i;++n)this.push(r[n]);return this},t.prototype.forEach=function(r){for(var n=this.array_,i=0,a=n.length;i<a;++i)r(n[i],i,n)},t.prototype.getArray=function(){return this.array_},t.prototype.item=function(r){return this.array_[r]},t.prototype.getLength=function(){return this.get(rbe.LENGTH)},t.prototype.insertAt=function(r,n){this.unique_&&this.assertUnique_(n),this.array_.splice(r,0,n),this.updateLength_(),this.dispatchEvent(new QI(Ra.ADD,n,r))},t.prototype.pop=function(){return this.removeAt(this.getLength()-1)},t.prototype.push=function(r){this.unique_&&this.assertUnique_(r);var n=this.getLength();return this.insertAt(n,r),this.getLength()},t.prototype.remove=function(r){for(var n=this.array_,i=0,a=n.length;i<a;++i)if(n[i]===r)return this.removeAt(i)},t.prototype.removeAt=function(r){var n=this.array_[r];return this.array_.splice(r,1),this.updateLength_(),this.dispatchEvent(new QI(Ra.REMOVE,n,r)),n},t.prototype.setAt=function(r,n){var i=this.getLength();if(r<i){this.unique_&&this.assertUnique_(n,r);var a=this.array_[r];this.array_[r]=n,this.dispatchEvent(new QI(Ra.REMOVE,a,r)),this.dispatchEvent(new QI(Ra.ADD,n,r))}else{for(var h=i;h<r;++h)this.insertAt(h,void 0);this.insertAt(r,n)}},t.prototype.updateLength_=function(){this.set(rbe.LENGTH,this.array_.length)},t.prototype.assertUnique_=function(r,n){for(var i=0,a=this.array_.length;i<a;++i)if(this.array_[i]===r&&i!==n)throw new RI(58)},t}(xi),Da=GMt;var WMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HMt=function(e){WMt(t,e);function t(r){var n=e.call(this)||this,i=r||{};return n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:250,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==Zr.DBLCLICK){var i=r.originalEvent,a=r.map,h=r.coordinate,p=i.shiftKey?-this.delta_:this.delta_,g=a.getView();Lm(g,p,h,this.duration_),i.preventDefault(),n=!0}return!n},t}(Ou),ibe=HMt;var ZMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KMt=function(e){ZMt(t,e);function t(r){var n=e.call(this,{stopDown:Gl})||this,i=r||{};n.kinetic_=i.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var a=i.condition?i.condition:Ux(ZI,U1e);return n.condition_=i.onFocusOnly?Ux(WI,a):a,n.noKinetic_=!1,n}return t.prototype.handleDragEvent=function(r){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=km(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var a=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],h=r.map,p=h.getView();Fxe(a,p.getResolution()),qm(a,p.getRotation()),p.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,r.originalEvent.preventDefault()},t.prototype.handleUpEvent=function(r){var n=r.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var a=this.kinetic_.getDistance(),h=this.kinetic_.getAngle(),p=i.getCenterInternal(),g=n.getPixelFromCoordinateInternal(p),w=n.getCoordinateFromPixelInternal([g[0]-a*Math.cos(h),g[1]-a*Math.sin(h)]);i.animateInternal({center:i.getConstrainedCenter(w),duration:500,easing:gs})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>0&&this.condition_(r)){var n=r.map,i=n.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},t}(Ru),abe=KMt;function jm(e){if(e!==void 0)return 0}function _3(e){if(e!==void 0)return e}function obe(e){var t=2*Math.PI/e;return function(r,n){if(n)return r;if(r!==void 0)return r=Math.floor(r/t+.5)*t,r}}function sbe(e){var t=e||bm(5);return function(r,n){if(n)return r;if(r!==void 0)return Math.abs(r)<=t?0:r}}var XMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),YMt=function(e){XMt(t,e);function t(r){var n=this,i=r||{};return n=e.call(this,{stopDown:Gl})||this,n.condition_=i.condition?i.condition:z1e,n.lastAngle_=void 0,n.duration_=i.duration!==void 0?i.duration:250,n}return t.prototype.handleDragEvent=function(r){if(XI(r)){var n=r.map,i=n.getView();if(i.getConstraints().rotation!==jm){var a=n.getSize(),h=r.pixel,p=Math.atan2(a[1]/2-h[1],h[0]-a[0]/2);if(this.lastAngle_!==void 0){var g=p-this.lastAngle_;i.adjustRotationInternal(-g)}this.lastAngle_=p}}},t.prototype.handleUpEvent=function(r){if(!XI(r))return!0;var n=r.map,i=n.getView();return i.endInteraction(this.duration_),!1},t.prototype.handleDownEvent=function(r){if(!XI(r))return!1;if(HI(r)&&this.condition_(r)){var n=r.map;return n.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},t}(Ru),ube=YMt;var $h={LEFT:37,UP:38,RIGHT:39,DOWN:40};var JMt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),QMt=function(e){JMt(t,e);function t(r){var n=e.call(this)||this,i=r||{};return n.defaultCondition_=function(a){return ZI(a)&&KI(a)},n.condition_=i.condition!==void 0?i.condition:n.defaultCondition_,n.duration_=i.duration!==void 0?i.duration:100,n.pixelDelta_=i.pixelDelta!==void 0?i.pixelDelta:128,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==vt.KEYDOWN){var i=r.originalEvent,a=i.keyCode;if(this.condition_(r)&&(a==$h.DOWN||a==$h.LEFT||a==$h.RIGHT||a==$h.UP)){var h=r.map,p=h.getView(),g=p.getResolution()*this.pixelDelta_,w=0,E=0;a==$h.DOWN?E=-g:a==$h.LEFT?w=-g:a==$h.RIGHT?w=g:E=g;var q=[w,E];qm(q,p.getRotation()),o1e(p,q,this.duration_),i.preventDefault(),n=!0}}return!n},t}(Ou),lbe=QMt;var e2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),t2t=function(e){e2t(t,e);function t(r){var n=e.call(this)||this,i=r||{};return n.condition_=i.condition?i.condition:KI,n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:100,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==vt.KEYDOWN||r.type==vt.KEYPRESS){var i=r.originalEvent,a=i.charCode;if(this.condition_(r)&&(a==43||a==45)){var h=r.map,p=a==43?this.delta_:-this.delta_,g=h.getView();Lm(g,p,void 0,this.duration_),i.preventDefault(),n=!0}}return!n},t}(Ou),cbe=t2t;var r2t=function(){function e(t,r,n){this.decay_=t,this.minVelocity_=r,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return e.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},e.prototype.update=function(t,r){this.points_.push(t,r,Date.now())},e.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,r=this.points_.length-3;if(this.points_[r+2]<t)return!1;for(var n=r-3;n>0&&this.points_[n+2]>t;)n-=3;var i=this.points_[r+2]-this.points_[n+2];if(i<16.666666666666668)return!1;var a=this.points_[r]-this.points_[n],h=this.points_[r+1]-this.points_[n+1];return this.angle_=Math.atan2(h,a),this.initialVelocity_=Math.sqrt(a*a+h*h)/i,this.initialVelocity_>this.minVelocity_},e.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},e.prototype.getAngle=function(){return this.angle_},e}(),hbe=r2t;var n2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),x3={TRACKPAD:"trackpad",WHEEL:"wheel"},i2t=function(e){n2t(t,e);function t(r){var n=this,i=r||{};n=e.call(this,i)||this,n.totalDelta_=0,n.lastDelta_=0,n.maxDelta_=i.maxDelta!==void 0?i.maxDelta:1,n.duration_=i.duration!==void 0?i.duration:250,n.timeout_=i.timeout!==void 0?i.timeout:80,n.useAnchor_=i.useAnchor!==void 0?i.useAnchor:!0,n.constrainResolution_=i.constrainResolution!==void 0?i.constrainResolution:!1;var a=i.condition?i.condition:j1e;return n.condition_=i.onFocusOnly?Ux(WI,a):a,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return t.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var r=this.getMap();if(r){var n=r.getView();n.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},t.prototype.handleEvent=function(r){if(!this.condition_(r))return!0;var n=r.type;if(n!==vt.WHEEL)return!0;var i=r.map,a=r.originalEvent;a.preventDefault(),this.useAnchor_&&(this.lastAnchor_=r.coordinate);var h;if(r.type==vt.WHEEL&&(h=a.deltaY,s1e&&a.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(h/=jI),a.deltaMode===WheelEvent.DOM_DELTA_LINE&&(h*=40)),h===0)return!1;this.lastDelta_=h;var p=Date.now();this.startTime_===void 0&&(this.startTime_=p),(!this.mode_||p-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(h)<4?x3.TRACKPAD:x3.WHEEL);var g=i.getView();if(this.mode_===x3.TRACKPAD&&!(g.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(g.getAnimating()&&g.cancelAnimations(),g.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),g.adjustZoom(-h/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=p,!1;this.totalDelta_+=h;var w=Math.max(this.timeout_-(p-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),w),!1},t.prototype.handleWheelZoom_=function(r){var n=r.getView();n.getAnimating()&&n.cancelAnimations();var i=-Hr(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Lm(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},t.prototype.setMouseAnchor=function(r){this.useAnchor_=r,r||(this.lastAnchor_=null)},t}(Ou),fbe=i2t;var a2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),o2t=function(e){a2t(t,e);function t(r){var n=this,i=r||{},a=i;return a.stopDown||(a.stopDown=Gl),n=e.call(this,a)||this,n.anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=i.threshold!==void 0?i.threshold:.3,n.duration_=i.duration!==void 0?i.duration:250,n}return t.prototype.handleDragEvent=function(r){var n=0,i=this.targetPointers[0],a=this.targetPointers[1],h=Math.atan2(a.clientY-i.clientY,a.clientX-i.clientX);if(this.lastAngle_!==void 0){var p=h-this.lastAngle_;this.rotationDelta_+=p,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=p}this.lastAngle_=h;var g=r.map,w=g.getView();if(w.getConstraints().rotation!==jm){var E=g.getViewport().getBoundingClientRect(),q=km(this.targetPointers);q[0]-=E.left,q[1]-=E.top,this.anchor_=g.getCoordinateFromPixelInternal(q),this.rotating_&&(g.render(),w.adjustRotationInternal(n,this.anchor_))}},t.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,i=n.getView();return i.endInteraction(this.duration_),!1}else return!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}(Ru),pbe=o2t;var s2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),u2t=function(e){s2t(t,e);function t(r){var n=this,i=r||{},a=i;return a.stopDown||(a.stopDown=Gl),n=e.call(this,a)||this,n.anchor_=null,n.duration_=i.duration!==void 0?i.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return t.prototype.handleDragEvent=function(r){var n=1,i=this.targetPointers[0],a=this.targetPointers[1],h=i.clientX-a.clientX,p=i.clientY-a.clientY,g=Math.sqrt(h*h+p*p);this.lastDistance_!==void 0&&(n=this.lastDistance_/g),this.lastDistance_=g;var w=r.map,E=w.getView();n!=1&&(this.lastScaleDelta_=n);var q=w.getViewport().getBoundingClientRect(),P=km(this.targetPointers);P[0]-=q.left,P[1]-=q.top,this.anchor_=w.getCoordinateFromPixelInternal(P),w.render(),E.adjustResolutionInternal(n,this.anchor_)},t.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,i=n.getView(),a=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,a),!1}else return!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}(Ru),dbe=u2t;var l2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),c2t=function(e){l2t(t,e);function t(r,n,i){var a=e.call(this,r)||this;return a.map=n,a.frameState=i!==void 0?i:null,a}return t}(ua),Gh=c2t;var h2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),f2t=function(e){h2t(t,e);function t(r,n,i,a,h,p){var g=e.call(this,r,n,h)||this;return g.originalEvent=i,g.pixel_=null,g.coordinate_=null,g.dragging=a!==void 0?a:!1,g.activePointers=p,g}return Object.defineProperty(t.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(r){this.pixel_=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(r){this.coordinate_=r},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){e.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){e.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},t}(Gh),ku=f2t;var Er={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var p2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),d2t=function(e){p2t(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un,n.background_=r.background;var i=wr({},r);return typeof r.properties=="object"&&(delete i.properties,wr(i,r.properties)),i[Er.OPACITY]=r.opacity!==void 0?r.opacity:1,Nt(typeof i[Er.OPACITY]=="number",64),i[Er.VISIBLE]=r.visible!==void 0?r.visible:!0,i[Er.Z_INDEX]=r.zIndex,i[Er.MAX_RESOLUTION]=r.maxResolution!==void 0?r.maxResolution:1/0,i[Er.MIN_RESOLUTION]=r.minResolution!==void 0?r.minResolution:0,i[Er.MIN_ZOOM]=r.minZoom!==void 0?r.minZoom:-1/0,i[Er.MAX_ZOOM]=r.maxZoom!==void 0?r.maxZoom:1/0,n.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,n.setProperties(i),n.state_=null,n}return t.prototype.getBackground=function(){return this.background_},t.prototype.getClassName=function(){return this.className_},t.prototype.getLayerState=function(r){var n=this.state_||{layer:this,managed:r===void 0?!0:r},i=this.getZIndex();return n.opacity=Hr(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},t.prototype.getLayersArray=function(r){return or()},t.prototype.getLayerStatesArray=function(r){return or()},t.prototype.getExtent=function(){return this.get(Er.EXTENT)},t.prototype.getMaxResolution=function(){return this.get(Er.MAX_RESOLUTION)},t.prototype.getMinResolution=function(){return this.get(Er.MIN_RESOLUTION)},t.prototype.getMinZoom=function(){return this.get(Er.MIN_ZOOM)},t.prototype.getMaxZoom=function(){return this.get(Er.MAX_ZOOM)},t.prototype.getOpacity=function(){return this.get(Er.OPACITY)},t.prototype.getSourceState=function(){return or()},t.prototype.getVisible=function(){return this.get(Er.VISIBLE)},t.prototype.getZIndex=function(){return this.get(Er.Z_INDEX)},t.prototype.setBackground=function(r){this.background_=r,this.changed()},t.prototype.setExtent=function(r){this.set(Er.EXTENT,r)},t.prototype.setMaxResolution=function(r){this.set(Er.MAX_RESOLUTION,r)},t.prototype.setMinResolution=function(r){this.set(Er.MIN_RESOLUTION,r)},t.prototype.setMaxZoom=function(r){this.set(Er.MAX_ZOOM,r)},t.prototype.setMinZoom=function(r){this.set(Er.MIN_ZOOM,r)},t.prototype.setOpacity=function(r){Nt(typeof r=="number",64),this.set(Er.OPACITY,r)},t.prototype.setVisible=function(r){this.set(Er.VISIBLE,r)},t.prototype.setZIndex=function(r){this.set(Er.Z_INDEX,r)},t.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),e.prototype.disposeInternal.call(this)},t}(xi),eC=d2t;var _s={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var v2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m2t=function(e){v2t(t,e);function t(r){var n=this,i=wr({},r);delete i.source,n=e.call(this,i)||this,n.on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,n.rendered=!1,r.render&&(n.render=r.render),r.map&&n.setMap(r.map),n.addChangeListener(Er.SOURCE,n.handleSourcePropertyChange_);var a=r.source?r.source:null;return n.setSource(a),n}return t.prototype.getLayersArray=function(r){var n=r||[];return n.push(this),n},t.prototype.getLayerStatesArray=function(r){var n=r||[];return n.push(this.getLayerState()),n},t.prototype.getSource=function(){return this.get(Er.SOURCE)||null},t.prototype.getRenderSource=function(){return this.getSource()},t.prototype.getSourceState=function(){var r=this.getSource();return r?r.getState():"undefined"},t.prototype.handleSourceChange_=function(){this.changed()},t.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(vr(this.sourceChangeKey_),this.sourceChangeKey_=null);var r=this.getSource();r&&(this.sourceChangeKey_=Ht(r,vt.CHANGE,this.handleSourceChange_,this)),this.changed()},t.prototype.getFeatures=function(r){return this.renderer_?this.renderer_.getFeatures(r):new Promise(function(n){return n([])})},t.prototype.getData=function(r){return!this.renderer_||!this.rendered?null:this.renderer_.getData(r)},t.prototype.render=function(r,n){var i=this.getRenderer();if(i.prepareFrame(r))return this.rendered=!0,i.renderFrame(r,n)},t.prototype.unrender=function(){this.rendered=!1},t.prototype.setMapInternal=function(r){r||this.unrender(),this.set(Er.MAP,r)},t.prototype.getMapInternal=function(){return this.get(Er.MAP)},t.prototype.setMap=function(r){this.mapPrecomposeKey_&&(vr(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),r||this.changed(),this.mapRenderKey_&&(vr(this.mapRenderKey_),this.mapRenderKey_=null),r&&(this.mapPrecomposeKey_=Ht(r,_s.PRECOMPOSE,function(n){var i=n,a=i.frameState.layerStatesArray,h=this.getLayerState(!1);Nt(!a.some(function(p){return p.layer===h.layer}),67),a.push(h)},this),this.mapRenderKey_=Ht(this,vt.CHANGE,r.render,r),this.changed())},t.prototype.setSource=function(r){this.set(Er.SOURCE,r)},t.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},t.prototype.hasRenderer=function(){return!!this.renderer_},t.prototype.createRenderer=function(){return null},t.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),e.prototype.disposeInternal.call(this)},t}(eC);function Tp(e,t){if(!e.visible)return!1;var r=t.resolution;if(r<e.minResolution||r>=e.maxResolution)return!1;var n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}var Gx=m2t;var co={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function b3(e,t,r){return r===void 0&&(r=[0,0]),r[0]=e[0]+2*t,r[1]=e[1]+2*t,r}function w3(e){return e[0]>0&&e[1]>0}function tC(e,t,r){return r===void 0&&(r=[0,0]),r[0]=e[0]*t+.5|0,r[1]=e[1]*t+.5|0,r}function ca(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}var g2t=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,y2t=/^([a-z]*)$|^hsla?\(.*\)$/i;function mbe(e){return typeof e=="string"?e:w2t(e)}function _2t(e){var t=document.createElement("div");if(t.style.color=e,t.style.color!==""){document.body.appendChild(t);var r=getComputedStyle(t).color;return document.body.removeChild(t),r}else return""}var x2t=function(){var e=1024,t={},r=0;return function(n){var i;if(t.hasOwnProperty(n))i=t[n];else{if(r>=e){var a=0;for(var h in t)a++&3||(delete t[h],--r)}i=b2t(n),t[n]=i,++r}return i}}();function E3(e){return Array.isArray(e)?e:x2t(e)}function b2t(e){var t,r,n,i,a;if(y2t.exec(e)&&(e=_2t(e)),g2t.exec(e)){var h=e.length-1,p=void 0;h<=4?p=1:p=2;var g=h===4||h===8;t=parseInt(e.substr(1+0*p,p),16),r=parseInt(e.substr(1+1*p,p),16),n=parseInt(e.substr(1+2*p,p),16),g?i=parseInt(e.substr(1+3*p,p),16):i=255,p==1&&(t=(t<<4)+t,r=(r<<4)+r,n=(n<<4)+n,g&&(i=(i<<4)+i)),a=[t,r,n,i/255]}else e.indexOf("rgba(")==0?(a=e.slice(5,-1).split(",").map(Number),vbe(a)):e.indexOf("rgb(")==0?(a=e.slice(4,-1).split(",").map(Number),a.push(1),vbe(a)):Nt(!1,14);return a}function vbe(e){return e[0]=Hr(e[0]+.5|0,0,255),e[1]=Hr(e[1]+.5|0,0,255),e[2]=Hr(e[2]+.5|0,0,255),e[3]=Hr(e[3],0,1),e}function w2t(e){var t=e[0];t!=(t|0)&&(t=t+.5|0);var r=e[1];r!=(r|0)&&(r=r+.5|0);var n=e[2];n!=(n|0)&&(n=n+.5|0);var i=e[3]===void 0?1:Math.round(e[3]*100)/100;return"rgba("+t+","+r+","+n+","+i+")"}var Nu=new xi,E2t=new Mu;E2t.setSize=function(){console.warn("labelCache is deprecated.")};var Bm=null,S3,S2t={},Fcr=function(){var e=100,t="32px ",r=["monospace","serif"],n=r.length,i="wmytzilWMYTZIL@#/&?$%10\uF013",a,h;function p(w,E,q){for(var P=!0,k=0;k<n;++k){var W=r[k];if(h=gbe(w+" "+E+" "+t+W,i),q!=W){var Q=gbe(w+" "+E+" "+t+q+","+W,i);P=P&&Q!=h}}return!!P}function g(){for(var w=!0,E=Nu.getKeys(),q=0,P=E.length;q<P;++q){var k=E[q];Nu.get(k)<e&&(p.apply(this,k.split(`
`))?(Pu(S2t),Bm=null,S3=void 0,Nu.set(k,e)):(Nu.set(k,Nu.get(k)+1,!0),w=!1))}w&&(clearInterval(a),a=void 0)}return function(w){var E=K1e(w);if(E)for(var q=E.families,P=0,k=q.length;P<k;++P){var W=q[P],Q=E.style+`
`+E.weight+`
`+W;Nu.get(Q)===void 0&&(Nu.set(Q,e,!0),p(E.style,E.weight,W)||(Nu.set(Q,0,!0),a===void 0&&(a=setInterval(g,32))))}}}();function T2t(e,t){return Bm||(Bm=Kl(1,1)),e!=S3&&(Bm.font=e,S3=Bm.font),Bm.measureText(t)}function gbe(e,t){return T2t(e,t).width}var I2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),C2t=function(e){I2t(t,e);function t(r){var n=e.call(this)||this;return n.ready=!0,n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=r,n.declutterExecutorGroup=null,n}return t.prototype.getFeatures=function(r){return or()},t.prototype.getData=function(r){return null},t.prototype.prepareFrame=function(r){return or()},t.prototype.renderFrame=function(r,n){return or()},t.prototype.loadedTileCallback=function(r,n,i){r[n]||(r[n]={}),r[n][i.tileCoord.toString()]=i},t.prototype.createLoadedTileFinder=function(r,n,i){return function(a,h){var p=this.loadedTileCallback.bind(this,i,a);return r.forEachLoadedTile(n,a,h,p)}.bind(this)},t.prototype.forEachFeatureAtCoordinate=function(r,n,i,a,h){},t.prototype.getDataAtPixel=function(r,n,i){return null},t.prototype.getLayer=function(){return this.layer_},t.prototype.handleFontsChanged=function(){},t.prototype.handleImageChange_=function(r){var n=r.target;n.getState()===co.LOADED&&this.renderIfReadyAndVisible()},t.prototype.loadImage=function(r){var n=r.getState();return n!=co.LOADED&&n!=co.ERROR&&r.addEventListener(vt.CHANGE,this.boundHandleImageChange_),n==co.IDLE&&(r.load(),n=r.getState()),n==co.LOADED},t.prototype.renderIfReadyAndVisible=function(){var r=this.getLayer();r&&r.getVisible()&&r.getSourceState()==="ready"&&r.changed()},t.prototype.disposeInternal=function(){delete this.layer_,e.prototype.disposeInternal.call(this)},t}(zI),ybe=C2t;var A2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q2t=function(e){A2t(t,e);function t(r,n,i,a){var h=e.call(this,r)||this;return h.inversePixelTransform=n,h.frameState=i,h.context=a,h}return t}(ua),rC=q2t;var P2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var Um=null;function M2t(){var e=document.createElement("canvas");e.width=1,e.height=1,Um=e.getContext("2d")}var O2t=function(e){P2t(t,e);function t(r){var n=e.call(this,r)||this;return n.container=null,n.renderedResolution,n.tempTransform=Hl(),n.pixelTransform=Hl(),n.inversePixelTransform=Hl(),n.context=null,n.containerReused=!1,n.pixelContext_=null,n.frameState=null,n}return t.prototype.getImageData=function(r,n,i){Um||M2t(),Um.clearRect(0,0,1,1);var a;try{Um.drawImage(r,n,i,1,1,0,0,1,1),a=Um.getImageData(0,0,1,1).data}catch(h){return Um=null,null}return a},t.prototype.getBackground=function(r){var n=this.getLayer(),i=n.getBackground();return typeof i=="function"&&(i=i(r.viewState.resolution)),i||void 0},t.prototype.useContainer=function(r,n,i){var a=this.getLayer().getClassName(),h,p;if(r&&r.className===a&&(!i||r&&r.style.backgroundColor&&Rm(E3(r.style.backgroundColor),E3(i)))){var g=r.firstElementChild;g instanceof HTMLCanvasElement&&(p=g.getContext("2d"))}if(p&&p.canvas.style.transform===n?(this.container=r,this.context=p,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){h=document.createElement("div"),h.className=a;var w=h.style;w.position="absolute",w.width="100%",w.height="100%",p=Kl();var g=p.canvas;h.appendChild(g),w=g.style,w.position="absolute",w.left="0",w.transformOrigin="top left",this.container=h,this.context=p}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)},t.prototype.clipUnrotated=function(r,n,i){var a=ms(i),h=Am(i),p=Cm(i),g=Im(i);Bi(n.coordinateToPixelTransform,a),Bi(n.coordinateToPixelTransform,h),Bi(n.coordinateToPixelTransform,p),Bi(n.coordinateToPixelTransform,g);var w=this.inversePixelTransform;Bi(w,a),Bi(w,h),Bi(w,p),Bi(w,g),r.save(),r.beginPath(),r.moveTo(Math.round(a[0]),Math.round(a[1])),r.lineTo(Math.round(h[0]),Math.round(h[1])),r.lineTo(Math.round(p[0]),Math.round(p[1])),r.lineTo(Math.round(g[0]),Math.round(g[1])),r.clip()},t.prototype.dispatchRenderEvent_=function(r,n,i){var a=this.getLayer();if(a.hasListener(r)){var h=new rC(r,this.inversePixelTransform,i,n);a.dispatchEvent(h)}},t.prototype.preRender=function(r,n){this.frameState=n,this.dispatchRenderEvent_(_s.PRERENDER,r,n)},t.prototype.postRender=function(r,n){this.dispatchRenderEvent_(_s.POSTRENDER,r,n)},t.prototype.getRenderTransform=function(r,n,i,a,h,p,g){var w=h/2,E=p/2,q=a/n,P=-q,k=-r[0]+g,W=-r[1];return Zl(this.tempTransform,w,E,q,P,-i,k,W)},t.prototype.getDataAtPixel=function(r,n,i){var a=Bi(this.inversePixelTransform,r.slice()),h=this.context,p=this.getLayer(),g=p.getExtent();if(g){var w=Bi(n.pixelToCoordinateTransform,r.slice());if(!kh(g,w))return null}var E=Math.round(a[0]),q=Math.round(a[1]),P=this.pixelContext_;if(!P){var k=document.createElement("canvas");k.width=1,k.height=1,P=k.getContext("2d"),this.pixelContext_=P}P.clearRect(0,0,1,1);var W;try{P.drawImage(h.canvas,E,q,1,1,0,0,1,1),W=P.getImageData(0,0,1,1).data}catch(Q){return Q.name==="SecurityError"?(this.pixelContext_=null,new Uint8Array):W}return W[3]===0?null:W},t.prototype.disposeInternal=function(){delete this.frameState,e.prototype.disposeInternal.call(this)},t}(ybe),_be=O2t;var ho={ANIMATING:0,INTERACTING:1};var R2t=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var r in this.cache_){var n=this.cache_[r];!(t++&3)&&!n.hasListener()&&(delete this.cache_[r],--this.cacheSize_)}}},e.prototype.get=function(t,r,n){var i=xbe(t,r,n);return i in this.cache_?this.cache_[i]:null},e.prototype.set=function(t,r,n,i){var a=xbe(t,r,n);this.cache_[a]=i,++this.cacheSize_},e.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},e}();function xbe(e,t,r){var n=r?mbe(r):"null";return t+":"+e+":"+n}var T3=new R2t;var D2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),L2t=function(e){D2t(t,e);function t(r,n,i,a){var h=e.call(this)||this;return h.extent=r,h.pixelRatio_=i,h.resolution=n,h.state=a,h}return t.prototype.changed=function(){this.dispatchEvent(vt.CHANGE)},t.prototype.getExtent=function(){return this.extent},t.prototype.getImage=function(){return or()},t.prototype.getPixelRatio=function(){return this.pixelRatio_},t.prototype.getResolution=function(){return this.resolution},t.prototype.getState=function(){return this.state},t.prototype.load=function(){or()},t}(Mu),bbe=L2t;var k2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vhr=function(e){k2t(t,e);function t(r,n,i,a,h,p){var g=e.call(this,r,n,i,co.IDLE)||this;return g.src_=a,g.image_=new Image,h!==null&&(g.image_.crossOrigin=h),g.unlisten_=null,g.state=co.IDLE,g.imageLoadFunction_=p,g}return t.prototype.getImage=function(){return this.image_},t.prototype.handleImageError_=function(){this.state=co.ERROR,this.unlistenImage_(),this.changed()},t.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=Qn(this.extent)/this.image_.height),this.state=co.LOADED,this.unlistenImage_(),this.changed()},t.prototype.load=function(){(this.state==co.IDLE||this.state==co.ERROR)&&(this.state=co.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=I3(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.setImage=function(r){this.image_=r,this.resolution=Qn(this.extent)/this.image_.height},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(bbe);function I3(e,t,r){var n=e,i=!0,a=!1,h=!1,p=[Dm(n,vt.LOAD,function(){h=!0,a||t()})];return n.src&&c1e?(a=!0,n.decode().then(function(){i&&t()}).catch(function(g){i&&(h?t():r())})):p.push(Dm(n,vt.ERROR,r)),function(){i=!1,p.forEach(vr)}}var N2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),F2t=function(e){N2t(t,e);function t(r){var n=e.call(this)||this;n.projection=ji(r.projection),n.attributions_=wbe(r.attributions),n.attributionsCollapsible_=r.attributionsCollapsible!==void 0?r.attributionsCollapsible:!0,n.loading=!1,n.state_=r.state!==void 0?r.state:"ready",n.wrapX_=r.wrapX!==void 0?r.wrapX:!1,n.interpolate_=!!r.interpolate,n.viewResolver=null,n.viewRejector=null;var i=n;return n.viewPromise_=new Promise(function(a,h){i.viewResolver=a,i.viewRejector=h}),n}return t.prototype.getAttributions=function(){return this.attributions_},t.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},t.prototype.getProjection=function(){return this.projection},t.prototype.getResolutions=function(){return or()},t.prototype.getView=function(){return this.viewPromise_},t.prototype.getState=function(){return this.state_},t.prototype.getWrapX=function(){return this.wrapX_},t.prototype.getInterpolate=function(){return this.interpolate_},t.prototype.refresh=function(){this.changed()},t.prototype.setAttributions=function(r){this.attributions_=wbe(r),this.changed()},t.prototype.setState=function(r){this.state_=r,this.changed()},t}(xi);function wbe(e){return e?Array.isArray(e)?function(t){return e}:typeof e=="function"?e:function(t){return[e]}:null}var Ebe=F2t;function nC(e){var t=e||{},r=new Da,n=new hbe(-.005,.05,100),i=t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0;i&&r.push(new ube);var a=t.doubleClickZoom!==void 0?t.doubleClickZoom:!0;a&&r.push(new ibe({delta:t.zoomDelta,duration:t.zoomDuration}));var h=t.dragPan!==void 0?t.dragPan:!0;h&&r.push(new abe({onFocusOnly:t.onFocusOnly,kinetic:n}));var p=t.pinchRotate!==void 0?t.pinchRotate:!0;p&&r.push(new pbe);var g=t.pinchZoom!==void 0?t.pinchZoom:!0;g&&r.push(new dbe({duration:t.zoomDuration}));var w=t.keyboard!==void 0?t.keyboard:!0;w&&(r.push(new lbe),r.push(new cbe({delta:t.zoomDelta,duration:t.zoomDuration})));var E=t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0;E&&r.push(new fbe({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration}));var q=t.shiftDragZoom!==void 0?t.shiftDragZoom:!0;return q&&r.push(new JI({duration:t.zoomDuration})),r}var z2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),j2t=function(e){z2t(t,e);function t(r){var n=e.call(this)||this;return n.map_=r,n}return t.prototype.dispatchRenderEvent=function(r,n){or()},t.prototype.calculateMatrices2D=function(r){var n=r.viewState,i=r.coordinateToPixelTransform,a=r.pixelToCoordinateTransform;Zl(i,r.size[0]/2,r.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),VI(a,i)},t.prototype.forEachFeatureAtCoordinate=function(r,n,i,a,h,p,g,w){var E,q=n.viewState;function P(sr,lr,cr,Zt){return h.call(p,lr,sr?cr:null,Zt)}var k=q.projection,W=zxe(r.slice(),k),Q=[[0,0]];if(k.canWrapX()&&a){var $=k.getExtent(),V=Ur($);Q.push([-V,0],[V,0])}for(var Z=n.layerStatesArray,te=Z.length,se=[],Ie=[],qe=0;qe<Q.length;qe++)for(var Ae=te-1;Ae>=0;--Ae){var Ue=Z[Ae],Le=Ue.layer;if(Le.hasRenderer()&&Tp(Ue,q)&&g.call(w,Le)){var $t=Le.getRenderer(),Rt=Le.getSource();if($t&&Rt){var ir=Rt.getWrapX()?W:r,Xr=P.bind(null,Ue.managed);Ie[0]=ir[0]+Q[qe][0],Ie[1]=ir[1]+Q[qe][1],E=$t.forEachFeatureAtCoordinate(Ie,n,i,Xr,se)}if(E)return E}}if(se.length!==0){var Pn=1/se.length;return se.forEach(function(sr,lr){return sr.distanceSq+=lr*Pn}),se.sort(function(sr,lr){return sr.distanceSq-lr.distanceSq}),se.some(function(sr){return E=sr.callback(sr.feature,sr.layer,sr.geometry)}),E}},t.prototype.forEachLayerAtPixel=function(r,n,i,a,h){return or()},t.prototype.hasFeatureAtCoordinate=function(r,n,i,a,h,p){var g=this.forEachFeatureAtCoordinate(r,n,i,a,Bh,this,h,p);return g!==void 0},t.prototype.getMap=function(){return this.map_},t.prototype.renderFrame=function(r){or()},t.prototype.scheduleExpireIconCache=function(r){T3.canExpireCache()&&r.postRenderFunctions.push(B2t)},t}(Mm);function B2t(e,t){T3.expire()}var Sbe=j2t;var U2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V2t=function(e){U2t(t,e);function t(r){var n=e.call(this,r)||this;n.fontChangeListenerKey_=Ht(Nu,$l.PROPERTYCHANGE,r.redrawText.bind(r)),n.element_=document.createElement("div");var i=n.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",n.element_.className=ys+" ol-layers";var a=r.getViewport();return a.insertBefore(n.element_,a.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return t.prototype.dispatchRenderEvent=function(r,n){var i=this.getMap();if(i.hasListener(r)){var a=new rC(r,void 0,n);i.dispatchEvent(a)}},t.prototype.disposeInternal=function(){vr(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},t.prototype.renderFrame=function(r){if(!r){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(r),this.dispatchRenderEvent(_s.PRECOMPOSE,r);var n=r.layerStatesArray.sort(function(k,W){return k.zIndex-W.zIndex}),i=r.viewState;this.children_.length=0;for(var a=[],h=null,p=0,g=n.length;p<g;++p){var w=n[p];r.layerIndex=p;var E=w.layer,q=E.getSourceState();if(!Tp(w,i)||q!="ready"&&q!="undefined"){E.unrender();continue}var P=E.render(r,h);P&&(P!==h&&(this.children_.push(P),h=P),"getDeclutter"in E&&a.push(E))}for(var p=a.length-1;p>=0;--p)a[p].renderDeclutter(r);H1e(this.element_,this.children_),this.dispatchRenderEvent(_s.POSTCOMPOSE,r),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(r)},t.prototype.forEachLayerAtPixel=function(r,n,i,a,h){for(var p=n.viewState,g=n.layerStatesArray,w=g.length,E=w-1;E>=0;--E){var q=g[E],P=q.layer;if(P.hasRenderer()&&Tp(q,p)&&h(P)){var k=P.getRenderer(),W=k.getDataAtPixel(r,n,i);if(W){var Q=a(P,W);if(Q)return Q}}}},t}(Sbe),Tbe=V2t;var Ibe=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xl=function(e){Ibe(t,e);function t(r,n){var i=e.call(this,r)||this;return i.layer=n,i}return t}(ua);var C3={LAYERS:"layers"},$2t=function(e){Ibe(t,e);function t(r){var n=this,i=r||{},a=wr({},i);delete a.layers;var h=i.layers;return n=e.call(this,a)||this,n.on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(C3.LAYERS,n.handleLayersChanged_),h?Array.isArray(h)?h=new Da(h.slice(),{unique:!0}):Nt(typeof h.getArray=="function",43):h=new Da(void 0,{unique:!0}),n.setLayers(h),n}return t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(vr),this.layersListenerKeys_.length=0;var r=this.getLayers();this.layersListenerKeys_.push(Ht(r,Ra.ADD,this.handleLayersAdd_,this),Ht(r,Ra.REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_)this.listenerKeys_[n].forEach(vr);Pu(this.listenerKeys_);for(var i=r.getArray(),a=0,h=i.length;a<h;a++){var p=i[a];this.registerLayerListeners_(p),this.dispatchEvent(new Xl("addlayer",p))}this.changed()},t.prototype.registerLayerListeners_=function(r){var n=[Ht(r,$l.PROPERTYCHANGE,this.handleLayerChange_,this),Ht(r,vt.CHANGE,this.handleLayerChange_,this)];r instanceof t&&n.push(Ht(r,"addlayer",this.handleLayerGroupAdd_,this),Ht(r,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Bn(r)]=n},t.prototype.handleLayerGroupAdd_=function(r){this.dispatchEvent(new Xl("addlayer",r.layer))},t.prototype.handleLayerGroupRemove_=function(r){this.dispatchEvent(new Xl("removelayer",r.layer))},t.prototype.handleLayersAdd_=function(r){var n=r.element;this.registerLayerListeners_(n),this.dispatchEvent(new Xl("addlayer",n)),this.changed()},t.prototype.handleLayersRemove_=function(r){var n=r.element,i=Bn(n);this.listenerKeys_[i].forEach(vr),delete this.listenerKeys_[i],this.dispatchEvent(new Xl("removelayer",n)),this.changed()},t.prototype.getLayers=function(){return this.get(C3.LAYERS)},t.prototype.setLayers=function(r){var n=this.getLayers();if(n)for(var i=n.getArray(),a=0,h=i.length;a<h;++a)this.dispatchEvent(new Xl("removelayer",i[a]));this.set(C3.LAYERS,r)},t.prototype.getLayersArray=function(r){var n=r!==void 0?r:[];return this.getLayers().forEach(function(i){i.getLayersArray(n)}),n},t.prototype.getLayerStatesArray=function(r){var n=r!==void 0?r:[],i=n.length;this.getLayers().forEach(function(E){E.getLayerStatesArray(n)});var a=this.getLayerState(),h=a.zIndex;!r&&a.zIndex===void 0&&(h=0);for(var p=i,g=n.length;p<g;p++){var w=n[p];w.opacity*=a.opacity,w.visible=w.visible&&a.visible,w.maxResolution=Math.min(w.maxResolution,a.maxResolution),w.minResolution=Math.max(w.minResolution,a.minResolution),w.minZoom=Math.max(w.minZoom,a.minZoom),w.maxZoom=Math.min(w.maxZoom,a.maxZoom),a.extent!==void 0&&(w.extent!==void 0?w.extent=Nh(w.extent,a.extent):w.extent=a.extent),w.zIndex===void 0&&(w.zIndex=h)}return n},t.prototype.getSourceState=function(){return"ready"},t}(eC),Wx=$2t;var Hx={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var G2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),W2t=function(e){G2t(t,e);function t(r,n){var i=e.call(this,r)||this;i.map_=r,i.clickTimeoutId_,i.emulateClicks_=!1,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=n===void 0?1:n,i.down_=null;var a=i.map_.getViewport();return i.activePointers_=[],i.trackedTouches_={},i.element_=a,i.pointerdownListenerKey_=Ht(a,Hx.POINTERDOWN,i.handlePointerDown_,i),i.originalPointerMoveEvent_,i.relayedListenerKey_=Ht(a,Hx.POINTERMOVE,i.relayMoveEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener(vt.TOUCHMOVE,i.boundHandleTouchMove_,UI?{passive:!1}:!1),i}return t.prototype.emulateClick_=function(r){var n=new ku(Zr.CLICK,this.map_,r);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new ku(Zr.DBLCLICK,this.map_,r),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var i=new ku(Zr.SINGLECLICK,this.map_,r);this.dispatchEvent(i)}.bind(this),250)},t.prototype.updateActivePointers_=function(r){var n=r,i=n.pointerId;if(n.type==Zr.POINTERUP||n.type==Zr.POINTERCANCEL){delete this.trackedTouches_[i];for(var a in this.trackedTouches_)if(this.trackedTouches_[a].target!==n.target){delete this.trackedTouches_[a];break}}else(n.type==Zr.POINTERDOWN||n.type==Zr.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Exe(this.trackedTouches_)},t.prototype.handlePointerUp_=function(r){this.updateActivePointers_(r);var n=new ku(Zr.POINTERUP,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(r)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(vr),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},t.prototype.isMouseActionButton_=function(r){return r.button===0},t.prototype.handlePointerDown_=function(r){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(r);var n=new ku(Zr.POINTERDOWN,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.down_={};for(var i in r){var a=r[i];this.down_[i]=typeof a=="function"?Wl:a}if(this.dragListenerKeys_.length===0){var h=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ht(h,Zr.POINTERMOVE,this.handlePointerMove_,this),Ht(h,Zr.POINTERUP,this.handlePointerUp_,this),Ht(this.element_,Zr.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==h&&this.dragListenerKeys_.push(Ht(this.element_.getRootNode(),Zr.POINTERUP,this.handlePointerUp_,this))}},t.prototype.handlePointerMove_=function(r){if(this.isMoving_(r)){this.updateActivePointers_(r),this.dragging_=!0;var n=new ku(Zr.POINTERDRAG,this.map_,r,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}},t.prototype.relayMoveEvent_=function(r){this.originalPointerMoveEvent_=r;var n=!!(this.down_&&this.isMoving_(r));this.dispatchEvent(new ku(Zr.POINTERMOVE,this.map_,r,n))},t.prototype.handleTouchMove_=function(r){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof r.cancelable!="boolean"||r.cancelable===!0)&&r.preventDefault()},t.prototype.isMoving_=function(r){return this.dragging_||Math.abs(r.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(r.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&(vr(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(vt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(vr(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(vr),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},t}(Mu),Cbe=W2t;var Zx=1/0,H2t=function(){function e(t,r){this.priorityFunction_=t,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return e.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Pu(this.queuedElements_)},e.prototype.dequeue=function(){var t=this.elements_,r=this.priorities_,n=t[0];t.length==1?(t.length=0,r.length=0):(t[0]=t.pop(),r[0]=r.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},e.prototype.enqueue=function(t){Nt(!(this.keyFunction_(t)in this.queuedElements_),31);var r=this.priorityFunction_(t);return r!=Zx?(this.elements_.push(t),this.priorities_.push(r),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},e.prototype.getCount=function(){return this.elements_.length},e.prototype.getLeftChildIndex_=function(t){return t*2+1},e.prototype.getRightChildIndex_=function(t){return t*2+2},e.prototype.getParentIndex_=function(t){return t-1>>1},e.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},e.prototype.isEmpty=function(){return this.elements_.length===0},e.prototype.isKeyQueued=function(t){return t in this.queuedElements_},e.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},e.prototype.siftUp_=function(t){for(var r=this.elements_,n=this.priorities_,i=r.length,a=r[t],h=n[t],p=t;t<i>>1;){var g=this.getLeftChildIndex_(t),w=this.getRightChildIndex_(t),E=w<i&&n[w]<n[g]?w:g;r[t]=r[E],n[t]=n[E],t=E}r[t]=a,n[t]=h,this.siftDown_(p,t)},e.prototype.siftDown_=function(t,r){for(var n=this.elements_,i=this.priorities_,a=n[r],h=i[r];r>t;){var p=this.getParentIndex_(r);if(i[p]>h)n[r]=n[p],i[r]=i[p],r=p;else break}n[r]=a,i[r]=h},e.prototype.reprioritize=function(){var t=this.priorityFunction_,r=this.elements_,n=this.priorities_,i=0,a=r.length,h,p,g;for(p=0;p<a;++p)h=r[p],g=t(h),g==Zx?delete this.queuedElements_[this.keyFunction_(h)]:(n[i]=g,r[i++]=h);r.length=i,n.length=i,this.heapify_()},e}(),Abe=H2t;var gt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var Z2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K2t=function(e){Z2t(t,e);function t(r,n){var i=e.call(this,function(a){return r.apply(null,a)},function(a){return a[0].getKey()})||this;return i.boundHandleTileChange_=i.handleTileChange.bind(i),i.tileChangeCallback_=n,i.tilesLoading_=0,i.tilesLoadingKeys_={},i}return t.prototype.enqueue=function(r){var n=e.prototype.enqueue.call(this,r);if(n){var i=r[0];i.addEventListener(vt.CHANGE,this.boundHandleTileChange_)}return n},t.prototype.getTilesLoading=function(){return this.tilesLoading_},t.prototype.handleTileChange=function(r){var n=r.target,i=n.getState();if(i===gt.LOADED||i===gt.ERROR||i===gt.EMPTY){n.removeEventListener(vt.CHANGE,this.boundHandleTileChange_);var a=n.getKey();a in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[a],--this.tilesLoading_),this.tileChangeCallback_()}},t.prototype.loadMoreTiles=function(r,n){for(var i=0,a,h,p;this.tilesLoading_<r&&i<n&&this.getCount()>0;)h=this.dequeue()[0],p=h.getKey(),a=h.getState(),a===gt.IDLE&&!(p in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[p]=!0,++this.tilesLoading_,++i,h.load())},t}(Abe),qbe=K2t;function Pbe(e,t,r,n,i){if(!e||!(r in e.wantedTiles))return Zx;if(!e.wantedTiles[r][t.getKey()])return Zx;var a=e.viewState.center,h=n[0]-a[0],p=n[1]-a[1];return 65536*Math.log(i)+Math.sqrt(h*h+p*p)/i}var xs={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var Mbe=42,Vm=256;function A3(e,t,r){return function(n,i,a,h,p){if(n){if(!i&&!t)return n;var g=t?0:a[0]*i,w=t?0:a[1]*i,E=p?p[0]:0,q=p?p[1]:0,P=e[0]+g/2+E,k=e[2]-g/2+E,W=e[1]+w/2+q,Q=e[3]-w/2+q;P>k&&(P=(k+P)/2,k=P),W>Q&&(W=(Q+W)/2,Q=W);var $=Hr(n[0],P,k),V=Hr(n[1],W,Q);if(h&&r&&i){var Z=30*i;$+=-Z*Math.log(1+Math.max(0,P-n[0])/Z)+Z*Math.log(1+Math.max(0,n[0]-k)/Z),V+=-Z*Math.log(1+Math.max(0,W-n[1])/Z)+Z*Math.log(1+Math.max(0,n[1]-Q)/Z)}return[$,V]}}}function Obe(e){return e}function q3(e,t,r,n){var i=Ur(t)/r[0],a=Qn(t)/r[1];return n?Math.min(e,Math.max(i,a)):Math.min(e,Math.min(i,a))}function P3(e,t,r){var n=Math.min(e,t),i=50;return n*=Math.log(1+i*Math.max(0,e/t-1))/i+1,r&&(n=Math.max(n,r),n/=Math.log(1+i*Math.max(0,r/e-1))/i+1),Hr(n,r/2,t*2)}function Rbe(e,t,r,n){return function(i,a,h,p){if(i!==void 0){var g=e[0],w=e[e.length-1],E=r?q3(g,r,h,n):g;if(p){var q=t!==void 0?t:!0;return q?P3(i,E,w):Hr(i,w,E)}var P=Math.min(E,i),k=Math.floor(Om(e,P,a));return e[k]>E&&k<e.length-1?e[k+1]:e[k]}else return}}function Dbe(e,t,r,n,i,a){return function(h,p,g,w){if(h!==void 0){var E=i?q3(t,i,g,a):t,q=r!==void 0?r:0;if(w){var P=n!==void 0?n:!0;return P?P3(h,E,q):Hr(h,q,E)}var k=1e-9,W=Math.ceil(Math.log(t/E)/Math.log(e)-k),Q=-p*(.5-k)+.5,$=Math.min(E,h),V=Math.floor(Math.log(t/$)/Math.log(e)+Q),Z=Math.max(W,V),te=t/Math.pow(e,Z);return Hr(te,q,E)}else return}}function M3(e,t,r,n,i){return function(a,h,p,g){if(a!==void 0){var w=n?q3(e,n,p,i):e,E=r!==void 0?r:!0;return!E||!g?Hr(a,t,w):P3(a,w,t)}else return}}var X2t=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O3=0,Y2t=function(e){X2t(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var i=wr({},r);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=NI(i.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,i.projection&&Uxe(),i.center&&(i.center=Hs(i.center,n.projection_)),i.extent&&(i.extent=jh(i.extent,n.projection_)),n.applyOptions_(i),n}return t.prototype.applyOptions_=function(r){var n=wr({},r);for(var i in xs)delete n[i];this.setProperties(n,!0);var a=Q2t(r);this.maxResolution_=a.maxResolution,this.minResolution_=a.minResolution,this.zoomFactor_=a.zoomFactor,this.resolutions_=r.resolutions,this.padding_=r.padding,this.minZoom_=a.minZoom;var h=J2t(r),p=a.constraint,g=eOt(r);this.constraints_={center:h,resolution:p,rotation:g},this.setRotation(r.rotation!==void 0?r.rotation:0),this.setCenterInternal(r.center!==void 0?r.center:null),r.resolution!==void 0?this.setResolution(r.resolution):r.zoom!==void 0&&this.setZoom(r.zoom)},Object.defineProperty(t.prototype,"padding",{get:function(){return this.padding_},set:function(r){var n=this.padding_;this.padding_=r;var i=this.getCenter();if(i){var a=r||[0,0,0,0];n=n||[0,0,0,0];var h=this.getResolution(),p=h/2*(a[3]-n[3]+n[1]-a[1]),g=h/2*(a[0]-n[0]+n[2]-a[2]);this.setCenterInternal([i[0]+p,i[1]-g])}},enumerable:!1,configurable:!0}),t.prototype.getUpdatedOptions_=function(r){var n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),wr({},n,r)},t.prototype.animate=function(r){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var a=arguments[i];a.center&&(a=wr({},a),a.center=Hs(a.center,this.getProjection())),a.anchor&&(a=wr({},a),a.anchor=Hs(a.anchor,this.getProjection())),n[i]=a}this.animateInternal.apply(this,n)},t.prototype.animateInternal=function(r){var n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);for(var a=0;a<n&&!this.isDef();++a){var h=arguments[a];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(a===n){i&&iC(i,!0);return}for(var p=Date.now(),g=this.targetCenter_.slice(),w=this.targetResolution_,E=this.targetRotation_,q=[];a<n;++a){var P=arguments[a],k={start:p,complete:!1,anchor:P.anchor,duration:P.duration!==void 0?P.duration:1e3,easing:P.easing||i1e,callback:i};if(P.center&&(k.sourceCenter=g,k.targetCenter=P.center.slice(),g=k.targetCenter),P.zoom!==void 0?(k.sourceResolution=w,k.targetResolution=this.getResolutionForZoom(P.zoom),w=k.targetResolution):P.resolution&&(k.sourceResolution=w,k.targetResolution=P.resolution,w=k.targetResolution),P.rotation!==void 0){k.sourceRotation=E;var W=Ws(P.rotation-E+Math.PI,2*Math.PI)-Math.PI;k.targetRotation=E+W,E=k.targetRotation}tOt(k)?k.complete=!0:p+=k.duration,q.push(k)}this.animations_.push(q),this.setHint(ho.ANIMATING,1),this.updateAnimations_()},t.prototype.getAnimating=function(){return this.hints_[ho.ANIMATING]>0},t.prototype.getInteracting=function(){return this.hints_[ho.INTERACTING]>0},t.prototype.cancelAnimations=function(){this.setHint(ho.ANIMATING,-this.hints_[ho.ANIMATING]);for(var r,n=0,i=this.animations_.length;n<i;++n){var a=this.animations_[n];if(a[0].callback&&iC(a[0].callback,!1),!r)for(var h=0,p=a.length;h<p;++h){var g=a[h];if(!g.complete){r=g.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=r,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},t.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var r=Date.now(),n=!1,i=this.animations_.length-1;i>=0;--i){for(var a=this.animations_[i],h=!0,p=0,g=a.length;p<g;++p){var w=a[p];if(!w.complete){var E=r-w.start,q=w.duration>0?E/w.duration:1;q>=1?(w.complete=!0,q=1):h=!1;var P=w.easing(q);if(w.sourceCenter){var k=w.sourceCenter[0],W=w.sourceCenter[1],Q=w.targetCenter[0],$=w.targetCenter[1];this.nextCenter_=w.targetCenter;var V=k+P*(Q-k),Z=W+P*($-W);this.targetCenter_=[V,Z]}if(w.sourceResolution&&w.targetResolution){var te=P===1?w.targetResolution:w.sourceResolution+P*(w.targetResolution-w.sourceResolution);if(w.anchor){var se=this.getViewportSize_(this.getRotation()),Ie=this.constraints_.resolution(te,0,se,!0);this.targetCenter_=this.calculateCenterZoom(Ie,w.anchor)}this.nextResolution_=w.targetResolution,this.targetResolution_=te,this.applyTargetState_(!0)}if(w.sourceRotation!==void 0&&w.targetRotation!==void 0){var qe=P===1?Ws(w.targetRotation+Math.PI,2*Math.PI)-Math.PI:w.sourceRotation+P*(w.targetRotation-w.sourceRotation);if(w.anchor){var Ae=this.constraints_.rotation(qe,!0);this.targetCenter_=this.calculateCenterRotate(Ae,w.anchor)}this.nextRotation_=w.targetRotation,this.targetRotation_=qe}if(this.applyTargetState_(!0),n=!0,!w.complete)break}}if(h){this.animations_[i]=null,this.setHint(ho.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var Ue=a[0].callback;Ue&&iC(Ue,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},t.prototype.calculateCenterRotate=function(r,n){var i,a=this.getCenterInternal();return a!==void 0&&(i=[a[0]-n[0],a[1]-n[1]],qm(i,r-this.getRotation()),Nxe(i,n)),i},t.prototype.calculateCenterZoom=function(r,n){var i,a=this.getCenterInternal(),h=this.getResolution();if(a!==void 0&&h!==void 0){var p=n[0]-r*(n[0]-a[0])/h,g=n[1]-r*(n[1]-a[1])/h;i=[p,g]}return i},t.prototype.getViewportSize_=function(r){var n=this.viewportSize_;if(r){var i=n[0],a=n[1];return[Math.abs(i*Math.cos(r))+Math.abs(a*Math.sin(r)),Math.abs(i*Math.sin(r))+Math.abs(a*Math.cos(r))]}else return n},t.prototype.setViewportSize=function(r){this.viewportSize_=Array.isArray(r)?r.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},t.prototype.getCenter=function(){var r=this.getCenterInternal();return r&&zx(r,this.getProjection())},t.prototype.getCenterInternal=function(){return this.get(xs.CENTER)},t.prototype.getConstraints=function(){return this.constraints_},t.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},t.prototype.getHints=function(r){return r!==void 0?(r[0]=this.hints_[0],r[1]=this.hints_[1],r):this.hints_.slice()},t.prototype.calculateExtent=function(r){var n=this.calculateExtentInternal(r);return Gxe(n,this.getProjection())},t.prototype.calculateExtentInternal=function(r){var n=r||this.getViewportSizeMinusPadding_(),i=this.getCenterInternal();Nt(i,1);var a=this.getResolution();Nt(a!==void 0,2);var h=this.getRotation();return Nt(h!==void 0,3),Nx(i,a,h,n)},t.prototype.getMaxResolution=function(){return this.maxResolution_},t.prototype.getMinResolution=function(){return this.minResolution_},t.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},t.prototype.setMaxZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({maxZoom:r}))},t.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},t.prototype.setMinZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({minZoom:r}))},t.prototype.setConstrainResolution=function(r){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:r}))},t.prototype.getProjection=function(){return this.projection_},t.prototype.getResolution=function(){return this.get(xs.RESOLUTION)},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getResolutionForExtent=function(r,n){return this.getResolutionForExtentInternal(jh(r,this.getProjection()),n)},t.prototype.getResolutionForExtentInternal=function(r,n){var i=n||this.getViewportSizeMinusPadding_(),a=Ur(r)/i[0],h=Qn(r)/i[1];return Math.max(a,h)},t.prototype.getResolutionForValueFunction=function(r){var n=r||2,i=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,h=Math.log(i/a)/Math.log(n);return function(p){var g=i/Math.pow(n,p*h);return g}},t.prototype.getRotation=function(){return this.get(xs.ROTATION)},t.prototype.getValueForResolutionFunction=function(r){var n=Math.log(r||2),i=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,h=Math.log(i/a)/n;return function(p){var g=Math.log(i/p)/n/h;return g}},t.prototype.getViewportSizeMinusPadding_=function(r){var n=this.getViewportSize_(r),i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n},t.prototype.getState=function(){var r=this.getProjection(),n=this.getResolution(),i=this.getRotation(),a=this.getCenterInternal(),h=this.padding_;if(h){var p=this.getViewportSizeMinusPadding_();a=R3(a,this.getViewportSize_(),[p[0]/2+h[3],p[1]/2+h[0]],n,i)}return{center:a.slice(0),projection:r!==void 0?r:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}},t.prototype.getZoom=function(){var r,n=this.getResolution();return n!==void 0&&(r=this.getZoomForResolution(n)),r},t.prototype.getZoomForResolution=function(r){var n=this.minZoom_||0,i,a;if(this.resolutions_){var h=Om(this.resolutions_,r,1);n=h,i=this.resolutions_[h],h==this.resolutions_.length-1?a=2:a=i/this.resolutions_[h+1]}else i=this.maxResolution_,a=this.zoomFactor_;return n+Math.log(i/r)/Math.log(a)},t.prototype.getResolutionForZoom=function(r){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=Hr(Math.floor(r),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,Hr(r-n,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,r-this.minZoom_)},t.prototype.fit=function(r,n){var i;if(Nt(Array.isArray(r)||typeof r.getSimplifiedGeometry=="function",24),Array.isArray(r)){Nt(!Fx(r),25);var a=jh(r,this.getProjection());i=Bx(a)}else if(r.getType()==="Circle"){var a=jh(r.getExtent(),this.getProjection());i=Bx(a),i.rotate(this.getRotation(),Ul(a))}else{var h=$xe();h?i=r.clone().transform(h,this.getProjection()):i=r}this.fitInternal(i,n)},t.prototype.rotatedExtentForGeometry=function(r){for(var n=this.getRotation(),i=Math.cos(n),a=Math.sin(-n),h=r.getFlatCoordinates(),p=r.getStride(),g=1/0,w=1/0,E=-1/0,q=-1/0,P=0,k=h.length;P<k;P+=p){var W=h[P]*i-h[P+1]*a,Q=h[P]*a+h[P+1]*i;g=Math.min(g,W),w=Math.min(w,Q),E=Math.max(E,W),q=Math.max(q,Q)}return[g,w,E,q]},t.prototype.fitInternal=function(r,n){var i=n||{},a=i.size;a||(a=this.getViewportSizeMinusPadding_());var h=i.padding!==void 0?i.padding:[0,0,0,0],p=i.nearest!==void 0?i.nearest:!1,g;i.minResolution!==void 0?g=i.minResolution:i.maxZoom!==void 0?g=this.getResolutionForZoom(i.maxZoom):g=0;var w=this.rotatedExtentForGeometry(r),E=this.getResolutionForExtentInternal(w,[a[0]-h[1]-h[3],a[1]-h[0]-h[2]]);E=isNaN(E)?g:Math.max(E,g),E=this.getConstrainedResolution(E,p?0:1);var q=this.getRotation(),P=Math.sin(q),k=Math.cos(q),W=Ul(w);W[0]+=(h[1]-h[3])/2*E,W[1]+=(h[0]-h[2])/2*E;var Q=W[0]*k-W[1]*P,$=W[1]*k+W[0]*P,V=this.getConstrainedCenter([Q,$],E),Z=i.callback?i.callback:Wl;i.duration!==void 0?this.animateInternal({resolution:E,center:V,duration:i.duration,easing:i.easing},Z):(this.targetResolution_=E,this.targetCenter_=V,this.applyTargetState_(!1,!0),iC(Z,!0))},t.prototype.centerOn=function(r,n,i){this.centerOnInternal(Hs(r,this.getProjection()),n,i)},t.prototype.centerOnInternal=function(r,n,i){this.setCenterInternal(R3(r,n,i,this.getResolution(),this.getRotation()))},t.prototype.calculateCenterShift=function(r,n,i,a){var h,p=this.padding_;if(p&&r){var g=this.getViewportSizeMinusPadding_(-i),w=R3(r,a,[g[0]/2+p[3],g[1]/2+p[0]],n,i);h=[r[0]-w[0],r[1]-w[1]]}return h},t.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},t.prototype.adjustCenter=function(r){var n=zx(this.targetCenter_,this.getProjection());this.setCenter([n[0]+r[0],n[1]+r[1]])},t.prototype.adjustCenterInternal=function(r){var n=this.targetCenter_;this.setCenterInternal([n[0]+r[0],n[1]+r[1]])},t.prototype.adjustResolution=function(r,n){var i=n&&Hs(n,this.getProjection());this.adjustResolutionInternal(r,i)},t.prototype.adjustResolutionInternal=function(r,n){var i=this.getAnimating()||this.getInteracting(),a=this.getViewportSize_(this.getRotation()),h=this.constraints_.resolution(this.targetResolution_*r,0,a,i);n&&(this.targetCenter_=this.calculateCenterZoom(h,n)),this.targetResolution_*=r,this.applyTargetState_()},t.prototype.adjustZoom=function(r,n){this.adjustResolution(Math.pow(this.zoomFactor_,-r),n)},t.prototype.adjustRotation=function(r,n){n&&(n=Hs(n,this.getProjection())),this.adjustRotationInternal(r,n)},t.prototype.adjustRotationInternal=function(r,n){var i=this.getAnimating()||this.getInteracting(),a=this.constraints_.rotation(this.targetRotation_+r,i);n&&(this.targetCenter_=this.calculateCenterRotate(a,n)),this.targetRotation_+=r,this.applyTargetState_()},t.prototype.setCenter=function(r){this.setCenterInternal(r&&Hs(r,this.getProjection()))},t.prototype.setCenterInternal=function(r){this.targetCenter_=r,this.applyTargetState_()},t.prototype.setHint=function(r,n){return this.hints_[r]+=n,this.changed(),this.hints_[r]},t.prototype.setResolution=function(r){this.targetResolution_=r,this.applyTargetState_()},t.prototype.setRotation=function(r){this.targetRotation_=r,this.applyTargetState_()},t.prototype.setZoom=function(r){this.setResolution(this.getResolutionForZoom(r))},t.prototype.applyTargetState_=function(r,n){var i=this.getAnimating()||this.getInteracting()||n,a=this.constraints_.rotation(this.targetRotation_,i),h=this.getViewportSize_(a),p=this.constraints_.resolution(this.targetResolution_,0,h,i),g=this.constraints_.center(this.targetCenter_,p,h,i,this.calculateCenterShift(this.targetCenter_,p,a,h));this.get(xs.ROTATION)!==a&&this.set(xs.ROTATION,a),this.get(xs.RESOLUTION)!==p&&(this.set(xs.RESOLUTION,p),this.set("zoom",this.getZoom(),!0)),(!g||!this.get(xs.CENTER)||!Ep(this.get(xs.CENTER),g))&&this.set(xs.CENTER,g),this.getAnimating()&&!r&&this.cancelAnimations(),this.cancelAnchor_=void 0},t.prototype.resolveConstraints=function(r,n,i){var a=r!==void 0?r:200,h=n||0,p=this.constraints_.rotation(this.targetRotation_),g=this.getViewportSize_(p),w=this.constraints_.resolution(this.targetResolution_,h,g),E=this.constraints_.center(this.targetCenter_,w,g,!1,this.calculateCenterShift(this.targetCenter_,w,p,g));if(a===0&&!this.cancelAnchor_){this.targetResolution_=w,this.targetRotation_=p,this.targetCenter_=E,this.applyTargetState_();return}var q=i||(a===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==w||this.getRotation()!==p||!this.getCenterInternal()||!Ep(this.getCenterInternal(),E))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:p,center:E,resolution:w,duration:a,easing:gs,anchor:q}))},t.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(ho.INTERACTING,1)},t.prototype.endInteraction=function(r,n,i){var a=i&&Hs(i,this.getProjection());this.endInteractionInternal(r,n,a)},t.prototype.endInteractionInternal=function(r,n,i){this.setHint(ho.INTERACTING,-1),this.resolveConstraints(r,n,i)},t.prototype.getConstrainedCenter=function(r,n){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(r,n||this.getResolution(),i)},t.prototype.getConstrainedZoom=function(r,n){var i=this.getResolutionForZoom(r);return this.getZoomForResolution(this.getConstrainedResolution(i,n))},t.prototype.getConstrainedResolution=function(r,n){var i=n||0,a=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(r,i,a)},t}(xi);function iC(e,t){setTimeout(function(){e(t)},0)}function J2t(e){if(e.extent!==void 0){var t=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return A3(e.extent,e.constrainOnlyCenter,t)}var r=NI(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,A3(n,!1,!1)}return Obe}function Q2t(e){var t,r,n,i=28,a=2,h=e.minZoom!==void 0?e.minZoom:O3,p=e.maxZoom!==void 0?e.maxZoom:i,g=e.zoomFactor!==void 0?e.zoomFactor:a,w=e.multiWorld!==void 0?e.multiWorld:!1,E=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,q=e.showFullExtent!==void 0?e.showFullExtent:!1,P=NI(e.projection,"EPSG:3857"),k=P.getExtent(),W=e.constrainOnlyCenter,Q=e.extent;if(!w&&!Q&&P.isGlobal()&&(W=!1,Q=k),e.resolutions!==void 0){var $=e.resolutions;r=$[h],n=$[p]!==void 0?$[p]:$[$.length-1],e.constrainResolution?t=Rbe($,E,!W&&Q,q):t=M3(r,n,E,!W&&Q,q)}else{var V=k?Math.max(Ur(k),Qn(k)):360*so[uo.DEGREES]/P.getMetersPerUnit(),Z=V/Vm/Math.pow(a,O3),te=Z/Math.pow(a,i-O3);r=e.maxResolution,r!==void 0?h=0:r=Z/Math.pow(g,h),n=e.minResolution,n===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?n=r/Math.pow(g,p):n=Z/Math.pow(g,p):n=te),p=h+Math.floor(Math.log(r/n)/Math.log(g)),n=r/Math.pow(g,p-h),e.constrainResolution?t=Dbe(g,r,n,E,!W&&Q,q):t=M3(r,n,E,!W&&Q,q)}return{constraint:t,maxResolution:r,minResolution:n,minZoom:h,zoomFactor:g}}function eOt(e){var t=e.enableRotation!==void 0?e.enableRotation:!0;if(t){var r=e.constrainRotation;return r===void 0||r===!0?sbe():r===!1?_3:typeof r=="number"?obe(r):_3}else return jm}function tOt(e){return!(e.sourceCenter&&e.targetCenter&&!Ep(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function R3(e,t,r,n,i){var a=Math.cos(-i),h=Math.sin(-i),p=e[0]*a-e[1]*h,g=e[1]*a+e[0]*h;p+=(t[0]/2-r[0])*n,g+=(r[1]-t[1]/2)*n,h=-h;var w=p*a-g*h,E=g*a+p*h;return[w,E]}var Fu=Y2t;var rOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function Lbe(e){if(e instanceof Gx){e.setMapInternal(null);return}e instanceof Wx&&e.getLayers().forEach(Lbe)}function kbe(e,t){if(e instanceof Gx){e.setMapInternal(t);return}if(e instanceof Wx)for(var r=e.getLayers().getArray(),n=0,i=r.length;n<i;++n)kbe(r[n],t)}var nOt=function(e){rOt(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var i=iOt(r);n.renderComplete_,n.loaded_=!0,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=r.maxTilesLoading!==void 0?r.maxTilesLoading:16,n.pixelRatio_=r.pixelRatio!==void 0?r.pixelRatio:jI,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=Hl(),n.pixelToCoordinateTransform_=Hl(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=r.moveTolerance,n.keyboardEventTarget_=i.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=i.controls||new Da,n.interactions=i.interactions||new Da,n.overlays_=i.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new qbe(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(Un.LAYERGROUP,n.handleLayerGroupChanged_),n.addChangeListener(Un.VIEW,n.handleViewChanged_),n.addChangeListener(Un.SIZE,n.handleSizeChanged_),n.addChangeListener(Un.TARGET,n.handleTargetChanged_),n.setProperties(i.values);var a=n;return r.view&&!(r.view instanceof Fu)&&r.view.then(function(h){a.setView(new Fu(h))}),n.controls.addEventListener(Ra.ADD,function(h){h.element.setMap(this)}.bind(n)),n.controls.addEventListener(Ra.REMOVE,function(h){h.element.setMap(null)}.bind(n)),n.interactions.addEventListener(Ra.ADD,function(h){h.element.setMap(this)}.bind(n)),n.interactions.addEventListener(Ra.REMOVE,function(h){h.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(Ra.ADD,function(h){this.addOverlayInternal_(h.element)}.bind(n)),n.overlays_.addEventListener(Ra.REMOVE,function(h){var p=h.element,g=p.getId();g!==void 0&&delete this.overlayIdIndex_[g.toString()],h.element.setMap(null)}.bind(n)),n.controls.forEach(function(h){h.setMap(this)}.bind(n)),n.interactions.forEach(function(h){h.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return t.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(r){this.getControls().push(r)},t.prototype.addInteraction=function(r){this.getInteractions().push(r)},t.prototype.addLayer=function(r){var n=this.getLayerGroup().getLayers();n.push(r)},t.prototype.handleLayerAdd_=function(r){kbe(r.layer,this)},t.prototype.addOverlay=function(r){this.getOverlays().push(r)},t.prototype.addOverlayInternal_=function(r){var n=r.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=r),r.setMap(this)},t.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),e.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(r,n,i){if(!(!this.frameState_||!this.renderer_)){var a=this.getCoordinateFromPixelInternal(r);i=i!==void 0?i:{};var h=i.hitTolerance!==void 0?i.hitTolerance:0,p=i.layerFilter!==void 0?i.layerFilter:Bh,g=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(a,this.frameState_,h,g,n,null,p,null)}},t.prototype.getFeaturesAtPixel=function(r,n){var i=[];return this.forEachFeatureAtPixel(r,function(a){i.push(a)},n),i},t.prototype.getAllLayers=function(){var r=[];function n(i){i.forEach(function(a){a instanceof Wx?n(a.getLayers()):r.push(a)})}return n(this.getLayers()),r},t.prototype.forEachLayerAtPixel=function(r,n,i){if(!(!this.frameState_||!this.renderer_)){var a=i||{},h=a.hitTolerance!==void 0?a.hitTolerance:0,p=a.layerFilter||Bh;return this.renderer_.forEachLayerAtPixel(r,this.frameState_,h,n,p)}},t.prototype.hasFeatureAtPixel=function(r,n){if(!this.frameState_||!this.renderer_)return!1;var i=this.getCoordinateFromPixelInternal(r);n=n!==void 0?n:{};var a=n.layerFilter!==void 0?n.layerFilter:Bh,h=n.hitTolerance!==void 0?n.hitTolerance:0,p=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,h,p,a,null)},t.prototype.getEventCoordinate=function(r){return this.getCoordinateFromPixel(this.getEventPixel(r))},t.prototype.getEventCoordinateInternal=function(r){return this.getCoordinateFromPixelInternal(this.getEventPixel(r))},t.prototype.getEventPixel=function(r){var n=this.viewport_.getBoundingClientRect(),i="changedTouches"in r?r.changedTouches[0]:r;return[i.clientX-n.left,i.clientY-n.top]},t.prototype.getTarget=function(){return this.get(Un.TARGET)},t.prototype.getTargetElement=function(){var r=this.getTarget();return r!==void 0?typeof r=="string"?document.getElementById(r):r:null},t.prototype.getCoordinateFromPixel=function(r){return zx(this.getCoordinateFromPixelInternal(r),this.getView().getProjection())},t.prototype.getCoordinateFromPixelInternal=function(r){var n=this.frameState_;return n?Bi(n.pixelToCoordinateTransform,r.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(r){var n=this.overlayIdIndex_[r.toString()];return n!==void 0?n:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get(Un.LAYERGROUP)},t.prototype.setLayers=function(r){var n=this.getLayerGroup();if(r instanceof Da){n.setLayers(r);return}var i=n.getLayers();i.clear(),i.extend(r)},t.prototype.getLayers=function(){var r=this.getLayerGroup().getLayers();return r},t.prototype.getLoadingOrNotReady=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,i=r.length;n<i;++n){var a=r[n];if(a.visible){var h=a.layer.getRenderer();if(h&&!h.ready)return!0;var p=a.layer.getSource();if(p&&p.loading)return!0}}return!1},t.prototype.getPixelFromCoordinate=function(r){var n=Hs(r,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},t.prototype.getPixelFromCoordinateInternal=function(r){var n=this.frameState_;return n?Bi(n.coordinateToPixelTransform,r.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get(Un.SIZE)},t.prototype.getView=function(){return this.get(Un.VIEW)},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getOwnerDocument=function(){var r=this.getTargetElement();return r?r.ownerDocument:document},t.prototype.getTilePriority=function(r,n,i,a){return Pbe(this.frameState_,r,n,i,a)},t.prototype.handleBrowserEvent=function(r,n){var i=n||r.type,a=new ku(i,this,r);this.handleMapBrowserEvent(a)},t.prototype.handleMapBrowserEvent=function(r){if(this.frameState_){var n=r.originalEvent,i=n.type;if(i===Hx.POINTERDOWN||i===vt.WHEEL||i===vt.KEYDOWN){var a=this.getOwnerDocument(),h=this.viewport_.getRootNode?this.viewport_.getRootNode():a,p=n.target;if(this.overlayContainerStopEvent_.contains(p)||!(h===a?a.documentElement:h).contains(p))return}if(r.frameState=this.frameState_,this.dispatchEvent(r)!==!1)for(var g=this.getInteractions().getArray().slice(),w=g.length-1;w>=0;w--){var E=g[w];if(!(E.getMap()!==this||!E.getActive()||!this.getTargetElement())){var q=E.handleEvent(r);if(!q||r.propagationStopped)break}}}},t.prototype.handlePostRender=function(){var r=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var i=this.maxTilesLoading_,a=i;if(r){var h=r.viewHints;if(h[ho.ANIMATING]||h[ho.INTERACTING]){var p=Date.now()-r.time>8;i=p?0:8,a=p?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,a))}r&&this.renderer_&&!r.animate&&(this.renderComplete_===!0?(this.hasListener(_s.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(_s.RENDERCOMPLETE,r),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Gh(Du.LOADEND,this,r)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Gh(Du.LOADSTART,this,r))));for(var g=this.postRenderFunctions_,w=0,E=g.length;w<E;++w)g[w](this,r);g.length=0},t.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},t.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var r=0,n=this.targetChangeHandlerKeys_.length;r<n;++r)vr(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(vt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(vt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Vx(this.viewport_)}var i=this.getTargetElement();if(!i)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{i.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Cbe(this,this.moveTolerance_);for(var a in Zr)this.mapBrowserEventHandler_.addEventListener(Zr[a],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(vt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(vt.WHEEL,this.boundHandleBrowserEvent_,UI?{passive:!1}:!1);var h=this.getOwnerDocument().defaultView,p=this.keyboardEventTarget_?this.keyboardEventTarget_:i;this.targetChangeHandlerKeys_=[Ht(p,vt.KEYDOWN,this.handleBrowserEvent,this),Ht(p,vt.KEYPRESS,this.handleBrowserEvent,this),Ht(h,vt.RESIZE,this.updateSize,this)]}this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(vr(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(vr(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var r=this.getView();r&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Ht(r,$l.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ht(r,vt.CHANGE,this.handleViewPropertyChanged_,this),r.resolveConstraints(0)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(vr),this.layerGroupPropertyListenerKeys_=null);var r=this.getLayerGroup();r&&(this.handleLayerAdd_(new Xl("addlayer",r)),this.layerGroupPropertyListenerKeys_=[Ht(r,$l.PROPERTYCHANGE,this.render,this),Ht(r,vt.CHANGE,this.render,this),Ht(r,"addlayer",this.handleLayerAdd_,this),Ht(r,"removelayer",this.handleLayerRemove_,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.redrawText=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,i=r.length;n<i;++n){var a=r[n].layer;a.hasRenderer()&&a.getRenderer().handleFontsChanged()}},t.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(r){return this.getControls().remove(r)},t.prototype.removeInteraction=function(r){return this.getInteractions().remove(r)},t.prototype.removeLayer=function(r){var n=this.getLayerGroup().getLayers();return n.remove(r)},t.prototype.handleLayerRemove_=function(r){Lbe(r.layer)},t.prototype.removeOverlay=function(r){return this.getOverlays().remove(r)},t.prototype.renderFrame_=function(r){var n=this,i=this.getSize(),a=this.getView(),h=this.frameState_,p=null;if(i!==void 0&&w3(i)&&a&&a.isDef()){var g=a.getHints(this.frameState_?this.frameState_.viewHints:void 0),w=a.getState();if(p={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Nx(w.center,w.resolution,w.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:r,usedTiles:{},viewState:w,viewHints:g,wantedTiles:{},mapId:Bn(this),renderTargets:{}},w.nextCenter&&w.nextResolution){var E=isNaN(w.nextRotation)?w.rotation:w.nextRotation;p.nextExtent=Nx(w.nextCenter,w.nextResolution,E,i)}}if(this.frameState_=p,this.renderer_.renderFrame(p),p){if(p.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,p.postRenderFunctions),h){var q=!this.previousExtent_||!Fx(this.previousExtent_)&&!Dx(p.extent,this.previousExtent_);q&&(this.dispatchEvent(new Gh(Du.MOVESTART,this,h)),this.previousExtent_=Tm(this.previousExtent_))}var P=this.previousExtent_&&!p.viewHints[ho.ANIMATING]&&!p.viewHints[ho.INTERACTING]&&!Dx(p.extent,this.previousExtent_);P&&(this.dispatchEvent(new Gh(Du.MOVEEND,this,p)),Cxe(p.extent,this.previousExtent_))}this.dispatchEvent(new Gh(Du.POSTRENDER,this,p)),this.renderComplete_=this.hasListener(Du.LOADSTART)||this.hasListener(Du.LOADEND)||this.hasListener(_s.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},t.prototype.setLayerGroup=function(r){var n=this.getLayerGroup();n&&this.handleLayerRemove_(new Xl("removelayer",n)),this.set(Un.LAYERGROUP,r)},t.prototype.setSize=function(r){this.set(Un.SIZE,r)},t.prototype.setTarget=function(r){this.set(Un.TARGET,r)},t.prototype.setView=function(r){if(!r||r instanceof Fu){this.set(Un.VIEW,r);return}this.set(Un.VIEW,new Fu);var n=this;r.then(function(i){n.setView(new Fu(i))})},t.prototype.updateSize=function(){var r=this.getTargetElement(),n=void 0;if(r){var i=getComputedStyle(r),a=r.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),h=r.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(a)&&!isNaN(h)&&(n=[a,h],!w3(n)&&(r.offsetWidth||r.offsetHeight||r.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(n),this.updateViewportSize_()},t.prototype.updateViewportSize_=function(){var r=this.getView();if(r){var n=void 0,i=getComputedStyle(this.viewport_);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),r.setViewportSize(n)}},t}(xi);function iOt(e){var t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var r={},n=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new Wx({layers:e.layers});r[Un.LAYERGROUP]=n,r[Un.TARGET]=e.target,r[Un.VIEW]=e.view instanceof Fu?e.view:new Fu;var i;e.controls!==void 0&&(Array.isArray(e.controls)?i=new Da(e.controls.slice()):(Nt(typeof e.controls.getArray=="function",47),i=e.controls));var a;e.interactions!==void 0&&(Array.isArray(e.interactions)?a=new Da(e.interactions.slice()):(Nt(typeof e.interactions.getArray=="function",48),a=e.interactions));var h;return e.overlays!==void 0?Array.isArray(e.overlays)?h=new Da(e.overlays.slice()):(Nt(typeof e.overlays.getArray=="function",49),h=e.overlays):h=new Da,{controls:i,interactions:a,keyboardEventTarget:t,overlays:h,values:r}}var Nbe=nOt;var aOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oOt=function(e){aOt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this,n.ulElement_=document.createElement("ul"),n.collapsed_=i.collapsed!==void 0?i.collapsed:!0,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=i.collapsible!==void 0,n.collapsible_=i.collapsible!==void 0?i.collapsible:!0,n.collapsible_||(n.collapsed_=!1);var a=i.className!==void 0?i.className:"ol-attribution",h=i.tipLabel!==void 0?i.tipLabel:"Attributions",p=i.expandClassName!==void 0?i.expandClassName:a+"-expand",g=i.collapseLabel!==void 0?i.collapseLabel:"\u203A",w=i.collapseClassName!==void 0?i.collapseClassName:a+"-collapse";typeof g=="string"?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=g,n.collapseLabel_.className=w):n.collapseLabel_=g;var E=i.label!==void 0?i.label:"i";typeof E=="string"?(n.label_=document.createElement("span"),n.label_.textContent=E,n.label_.className=p):n.label_=E;var q=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=h,n.toggleButton_.appendChild(q),n.toggleButton_.addEventListener(vt.CLICK,n.handleClick_.bind(n),!1);var P=a+" "+ys+" "+Lu+(n.collapsed_&&n.collapsible_?" "+y3:"")+(n.collapsible_?"":" ol-uncollapsible"),k=n.element;return k.className=P,k.appendChild(n.toggleButton_),k.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return t.prototype.collectSourceAttributions_=function(r){for(var n={},i=[],a=!0,h=r.layerStatesArray,p=0,g=h.length;p<g;++p){var w=h[p];if(Tp(w,r.viewState)){var E=w.layer.getSource();if(E){var q=E.getAttributions();if(q){var P=q(r);if(P)if(a=a&&E.getAttributionsCollapsible()!==!1,Array.isArray(P))for(var k=0,W=P.length;k<W;++k)P[k]in n||(i.push(P[k]),n[P[k]]=!0);else P in n||(i.push(P),n[P]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(a),i},t.prototype.updateElement_=function(r){if(!r){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var n=this.collectSourceAttributions_(r),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Rm(n,this.renderedAttributions_)){W1e(this.ulElement_);for(var a=0,h=n.length;a<h;++a){var p=document.createElement("li");p.innerHTML=n[a],this.ulElement_.appendChild(p)}this.renderedAttributions_=n}},t.prototype.handleClick_=function(r){r.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},t.prototype.handleToggle_=function(){this.element.classList.toggle(y3),this.collapsed_?zm(this.collapseLabel_,this.label_):zm(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(r){this.collapsible_!==r&&(this.collapsible_=r,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(r){this.userCollapsed_=r,!(!this.collapsible_||this.collapsed_===r)&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.render=function(r){this.updateElement_(r.frameState)},t}(ko),Fbe=oOt;var sOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uOt=function(e){sOt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this;var a=i.className!==void 0?i.className:"ol-rotate",h=i.label!==void 0?i.label:"\u21E7",p=i.compassClassName!==void 0?i.compassClassName:"ol-compass";n.label_=null,typeof h=="string"?(n.label_=document.createElement("span"),n.label_.className=p,n.label_.textContent=h):(n.label_=h,n.label_.classList.add(p));var g=i.tipLabel?i.tipLabel:"Reset rotation",w=document.createElement("button");w.className=a+"-reset",w.setAttribute("type","button"),w.title=g,w.appendChild(n.label_),w.addEventListener(vt.CLICK,n.handleClick_.bind(n),!1);var E=a+" "+ys+" "+Lu,q=n.element;return q.className=E,q.appendChild(w),n.callResetNorth_=i.resetNorth?i.resetNorth:void 0,n.duration_=i.duration!==void 0?i.duration:250,n.autoHide_=i.autoHide!==void 0?i.autoHide:!0,n.rotation_=void 0,n.autoHide_&&n.element.classList.add($x),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},t.prototype.resetNorth_=function(){var r=this.getMap(),n=r.getView();if(n){var i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:gs}):n.setRotation(0))}},t.prototype.render=function(r){var n=r.frameState;if(n){var i=n.viewState.rotation;if(i!=this.rotation_){var a="rotate("+i+"rad)";if(this.autoHide_){var h=this.element.classList.contains($x);!h&&i===0?this.element.classList.add($x):h&&i!==0&&this.element.classList.remove($x)}this.label_.style.transform=a}this.rotation_=i}},t}(ko),zbe=uOt;var lOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cOt=function(e){lOt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,{element:document.createElement("div"),target:i.target})||this;var a=i.className!==void 0?i.className:"ol-zoom",h=i.delta!==void 0?i.delta:1,p=i.zoomInClassName!==void 0?i.zoomInClassName:a+"-in",g=i.zoomOutClassName!==void 0?i.zoomOutClassName:a+"-out",w=i.zoomInLabel!==void 0?i.zoomInLabel:"+",E=i.zoomOutLabel!==void 0?i.zoomOutLabel:"\u2013",q=i.zoomInTipLabel!==void 0?i.zoomInTipLabel:"Zoom in",P=i.zoomOutTipLabel!==void 0?i.zoomOutTipLabel:"Zoom out",k=document.createElement("button");k.className=p,k.setAttribute("type","button"),k.title=q,k.appendChild(typeof w=="string"?document.createTextNode(w):w),k.addEventListener(vt.CLICK,n.handleClick_.bind(n,h),!1);var W=document.createElement("button");W.className=g,W.setAttribute("type","button"),W.title=P,W.appendChild(typeof E=="string"?document.createTextNode(E):E),W.addEventListener(vt.CLICK,n.handleClick_.bind(n,-h),!1);var Q=a+" "+ys+" "+Lu,$=n.element;return $.className=Q,$.appendChild(k),$.appendChild(W),n.duration_=i.duration!==void 0?i.duration:250,n}return t.prototype.handleClick_=function(r,n){n.preventDefault(),this.zoomByDelta_(r)},t.prototype.zoomByDelta_=function(r){var n=this.getMap(),i=n.getView();if(i){var a=i.getZoom();if(a!==void 0){var h=i.getConstrainedZoom(a+r);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:h,duration:this.duration_,easing:gs})):i.setZoom(h)}}},t}(ko),aC=cOt;var hOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fOt=function(e){hOt(t,e);function t(r){var n=this,i=r||{};n=e.call(this,{element:document.createElement("div"),target:i.target})||this,n.extent=i.extent?i.extent:null;var a=i.className!==void 0?i.className:"ol-zoom-extent",h=i.label!==void 0?i.label:"E",p=i.tipLabel!==void 0?i.tipLabel:"Fit to extent",g=document.createElement("button");g.setAttribute("type","button"),g.title=p,g.appendChild(typeof h=="string"?document.createTextNode(h):h),g.addEventListener(vt.CLICK,n.handleClick_.bind(n),!1);var w=a+" "+ys+" "+Lu,E=n.element;return E.className=w,E.appendChild(g),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.handleZoomToExtent()},t.prototype.handleZoomToExtent=function(){var r=this.getMap(),n=r.getView(),i=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(Bx(i))},t}(ko),jbe=fOt;function Bbe(e){var t=e||{},r=new Da,n=t.zoom!==void 0?t.zoom:!0;n&&r.push(new aC(t.zoomOptions));var i=t.rotate!==void 0?t.rotate:!0;i&&r.push(new zbe(t.rotateOptions));var a=t.attribution!==void 0?t.attribution:!0;return a&&r.push(new Fbe(t.attributionOptions)),r}var pOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dOt=function(e){pOt(t,e);function t(r){return r=wr({},r),r.controls||(r.controls=Bbe()),r.interactions||(r.interactions=nC({onFocusOnly:!0})),e.call(this,r)||this}return t.prototype.createRenderer=function(){return new Tbe(this)},t}(Nbe),oC=dOt;var Kx={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var vOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mOt=function(e){vOt(t,e);function t(r){var n=this,i=r||{},a=wr({},i);return delete a.preload,delete a.useInterimTilesOnError,n=e.call(this,a)||this,n.on,n.once,n.un,n.setPreload(i.preload!==void 0?i.preload:0),n.setUseInterimTilesOnError(i.useInterimTilesOnError!==void 0?i.useInterimTilesOnError:!0),n}return t.prototype.getPreload=function(){return this.get(Kx.PRELOAD)},t.prototype.setPreload=function(r){this.set(Kx.PRELOAD,r)},t.prototype.getUseInterimTilesOnError=function(){return this.get(Kx.USE_INTERIM_TILES_ON_ERROR)},t.prototype.setUseInterimTilesOnError=function(r){this.set(Kx.USE_INTERIM_TILES_ON_ERROR,r)},t.prototype.getData=function(r){return e.prototype.getData.call(this,r)},t}(Gx),Ube=mOt;var gOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yOt=function(e){gOt(t,e);function t(r,n,i){var a=e.call(this)||this,h=i||{};return a.tileCoord=r,a.state=n,a.interimTile=null,a.key="",a.transition_=h.transition===void 0?250:h.transition,a.transitionStarts_={},a.interpolate=!!h.interpolate,a}return t.prototype.changed=function(){this.dispatchEvent(vt.CHANGE)},t.prototype.release=function(){},t.prototype.getKey=function(){return this.key+"/"+this.tileCoord},t.prototype.getInterimTile=function(){if(!this.interimTile)return this;var r=this.interimTile;do{if(r.getState()==gt.LOADED)return this.transition_=0,r;r=r.interimTile}while(r);return this},t.prototype.refreshInterimChain=function(){if(this.interimTile){var r=this.interimTile,n=this;do{if(r.getState()==gt.LOADED){r.interimTile=null;break}else r.getState()==gt.LOADING?n=r:r.getState()==gt.IDLE?n.interimTile=r.interimTile:n=r;r=n.interimTile}while(r)}},t.prototype.getTileCoord=function(){return this.tileCoord},t.prototype.getState=function(){return this.state},t.prototype.setState=function(r){if(this.state!==gt.ERROR&&this.state>r)throw new Error("Tile load sequence violation");this.state=r,this.changed()},t.prototype.load=function(){or()},t.prototype.getAlpha=function(r,n){if(!this.transition_)return 1;var i=this.transitionStarts_[r];if(!i)i=n,this.transitionStarts_[r]=i;else if(i===-1)return 1;var a=n-i+1e3/60;return a>=this.transition_?1:o3(a/this.transition_)},t.prototype.inTransition=function(r){return this.transition_?this.transitionStarts_[r]!==-1:!1},t.prototype.endTransition=function(r){this.transition_&&(this.transitionStarts_[r]=-1)},t}(Mu),sC=yOt;var _Ot=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xOt=function(e){_Ot(t,e);function t(r,n,i,a,h,p){var g=e.call(this,r,n,p)||this;return g.crossOrigin_=a,g.src_=i,g.key=i,g.image_=new Image,a!==null&&(g.image_.crossOrigin=a),g.unlisten_=null,g.tileLoadFunction_=h,g}return t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(r){this.image_=r,this.state=gt.LOADED,this.unlistenImage_(),this.changed()},t.prototype.handleImageError_=function(){this.state=gt.ERROR,this.unlistenImage_(),this.image_=bOt(),this.changed()},t.prototype.handleImageLoad_=function(){var r=this.image_;r.naturalWidth&&r.naturalHeight?this.state=gt.LOADED:this.state=gt.EMPTY,this.unlistenImage_(),this.changed()},t.prototype.load=function(){this.state==gt.ERROR&&(this.state=gt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==gt.IDLE&&(this.state=gt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=I3(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(sC);function bOt(){var e=Kl(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}var uC=xOt;var Vbe=.5,zu=!0;var wOt=10,$be=.25,EOt=function(){function e(t,r,n,i,a,h){this.sourceProj_=t,this.targetProj_=r;var p={},g=Sp(this.targetProj_,this.sourceProj_);this.transformInv_=function(te){var se=te[0]+"/"+te[1];return p[se]||(p[se]=g(te)),p[se]},this.maxSourceExtent_=i,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Ur(i)==Ur(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ur(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ur(this.targetProj_.getExtent()):null;var w=ms(n),E=Am(n),q=Cm(n),P=Im(n),k=this.transformInv_(w),W=this.transformInv_(E),Q=this.transformInv_(q),$=this.transformInv_(P),V=wOt+(h?Math.max(0,Math.ceil(pxe(kx(n)/(h*h*256*256)))):0);if(this.addQuad_(w,E,q,P,k,W,Q,$,V),this.wrapsXInSource_){var Z=1/0;this.triangles_.forEach(function(te,se,Ie){Z=Math.min(Z,te.source[0][0],te.source[1][0],te.source[2][0])}),this.triangles_.forEach(function(te){if(Math.max(te.source[0][0],te.source[1][0],te.source[2][0])-Z>this.sourceWorldWidth_/2){var se=[[te.source[0][0],te.source[0][1]],[te.source[1][0],te.source[1][1]],[te.source[2][0],te.source[2][1]]];se[0][0]-Z>this.sourceWorldWidth_/2&&(se[0][0]-=this.sourceWorldWidth_),se[1][0]-Z>this.sourceWorldWidth_/2&&(se[1][0]-=this.sourceWorldWidth_),se[2][0]-Z>this.sourceWorldWidth_/2&&(se[2][0]-=this.sourceWorldWidth_);var Ie=Math.min(se[0][0],se[1][0],se[2][0]),qe=Math.max(se[0][0],se[1][0],se[2][0]);qe-Ie<this.sourceWorldWidth_/2&&(te.source=se)}}.bind(this))}p={}}return e.prototype.addTriangle_=function(t,r,n,i,a,h){this.triangles_.push({source:[i,a,h],target:[t,r,n]})},e.prototype.addQuad_=function(t,r,n,i,a,h,p,g,w){var E=XB([a,h,p,g]),q=this.sourceWorldWidth_?Ur(E)/this.sourceWorldWidth_:null,P=this.sourceWorldWidth_,k=this.sourceProj_.canWrapX()&&q>.5&&q<1,W=!1;if(w>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var Q=XB([t,r,n,i]),$=Ur(Q)/this.targetWorldWidth_;W=$>$be||W}!k&&this.sourceProj_.isGlobal()&&q&&(W=q>$be||W)}if(!(!W&&this.maxSourceExtent_&&isFinite(E[0])&&isFinite(E[1])&&isFinite(E[2])&&isFinite(E[3])&&!wp(E,this.maxSourceExtent_))){var V=0;if(!W&&(!isFinite(a[0])||!isFinite(a[1])||!isFinite(h[0])||!isFinite(h[1])||!isFinite(p[0])||!isFinite(p[1])||!isFinite(g[0])||!isFinite(g[1]))){if(w>0)W=!0;else if(V=(!isFinite(a[0])||!isFinite(a[1])?8:0)+(!isFinite(h[0])||!isFinite(h[1])?4:0)+(!isFinite(p[0])||!isFinite(p[1])?2:0)+(!isFinite(g[0])||!isFinite(g[1])?1:0),V!=1&&V!=2&&V!=4&&V!=8)return}if(w>0){if(!W){var Z=[(t[0]+n[0])/2,(t[1]+n[1])/2],te=this.transformInv_(Z),se=void 0;if(k){var Ie=(Ws(a[0],P)+Ws(p[0],P))/2;se=Ie-Ws(te[0],P)}else se=(a[0]+p[0])/2-te[0];var qe=(a[1]+p[1])/2-te[1],Ae=se*se+qe*qe;W=Ae>this.errorThresholdSquared_}if(W){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var Ue=[(r[0]+n[0])/2,(r[1]+n[1])/2],Le=this.transformInv_(Ue),$t=[(i[0]+t[0])/2,(i[1]+t[1])/2],Rt=this.transformInv_($t);this.addQuad_(t,r,Ue,$t,a,h,Le,Rt,w-1),this.addQuad_($t,Ue,n,i,Rt,Le,p,g,w-1)}else{var ir=[(t[0]+r[0])/2,(t[1]+r[1])/2],Xr=this.transformInv_(ir),Pn=[(n[0]+i[0])/2,(n[1]+i[1])/2],sr=this.transformInv_(Pn);this.addQuad_(t,ir,Pn,i,a,Xr,sr,g,w-1),this.addQuad_(ir,r,n,Pn,Xr,h,p,sr,w-1)}return}}if(k){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}V&11||this.addTriangle_(t,n,i,a,p,g),V&14||this.addTriangle_(t,n,r,a,p,h),V&&(V&13||this.addTriangle_(r,i,t,h,g,a),V&7||this.addTriangle_(r,i,n,h,g,p))}},e.prototype.calculateSourceExtent=function(){var t=lo();return this.triangles_.forEach(function(r,n,i){var a=r.source;Lx(t,a[0]),Lx(t,a[1]),Lx(t,a[2])}),t},e.prototype.getTriangles=function(){return this.triangles_},e}(),Gbe=EOt;var Xx={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},Wbe={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0};var D3,k3=[];function Hbe(e,t,r,n,i){e.beginPath(),e.moveTo(0,0),e.lineTo(t,r),e.lineTo(n,i),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(r,i)),e.restore()}function L3(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function SOt(){if(D3===void 0){var e=document.createElement("canvas").getContext("2d");e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",Hbe(e,4,5,4,0),Hbe(e,4,5,0,5);var t=e.getImageData(0,0,3,3).data;D3=L3(t,0)||L3(t,4)||L3(t,8)}return D3}function lC(e,t,r,n){var i=Pm(r,t,e),a=n3(t,n,r),h=t.getMetersPerUnit();h!==void 0&&(a*=h);var p=e.getMetersPerUnit();p!==void 0&&(a/=p);var g=e.getExtent();if(!g||kh(g,i)){var w=n3(e,a,i)/a;isFinite(w)&&w>0&&(a/=w)}return a}function Zbe(e,t,r,n){var i=Ul(r),a=lC(e,t,i,n);return(!isFinite(a)||a<=0)&&LI(r,function(h){return a=lC(e,t,h,n),isFinite(a)&&a>0}),a}function Kbe(e,t,r,n,i,a,h,p,g,w,E,q){var P=Kl(Math.round(r*e),Math.round(r*t),k3);if(q||wr(P,Xx),g.length===0)return P.canvas;P.scale(r,r);function k(se){return Math.round(se*r)/r}P.globalCompositeOperation="lighter";var W=lo();g.forEach(function(se,Ie,qe){Mxe(W,se.extent)});var Q=Ur(W),$=Qn(W),V=Kl(Math.round(r*Q/n),Math.round(r*$/n));q||wr(V,Xx);var Z=r/n;g.forEach(function(se,Ie,qe){var Ae=se.extent[0]-W[0],Ue=-(se.extent[3]-W[3]),Le=Ur(se.extent),$t=Qn(se.extent);se.image.width>0&&se.image.height>0&&V.drawImage(se.image,w,w,se.image.width-2*w,se.image.height-2*w,Ae*Z,Ue*Z,Le*Z,$t*Z)});var te=ms(h);return p.getTriangles().forEach(function(se,Ie,qe){var Ae=se.source,Ue=se.target,Le=Ae[0][0],$t=Ae[0][1],Rt=Ae[1][0],ir=Ae[1][1],Xr=Ae[2][0],Pn=Ae[2][1],sr=k((Ue[0][0]-te[0])/a),lr=k(-(Ue[0][1]-te[1])/a),cr=k((Ue[1][0]-te[0])/a),Zt=k(-(Ue[1][1]-te[1])/a),rn=k((Ue[2][0]-te[0])/a),nn=k(-(Ue[2][1]-te[1])/a),va=Le,Ei=$t;Le=0,$t=0,Rt-=va,ir-=Ei,Xr-=va,Pn-=Ei;var $n=[[Rt,ir,0,0,cr-sr],[Xr,Pn,0,0,rn-sr],[0,0,Rt,ir,Zt-lr],[0,0,Xr,Pn,nn-lr]],ti=vxe($n);if(ti){if(P.save(),P.beginPath(),SOt()||!q){P.moveTo(cr,Zt);for(var Dt=4,vn=sr-cr,ri=lr-Zt,an=0;an<Dt;an++)P.lineTo(cr+k((an+1)*vn/Dt),Zt+k(an*ri/(Dt-1))),an!=Dt-1&&P.lineTo(cr+k((an+1)*vn/Dt),Zt+k((an+1)*ri/(Dt-1)));P.lineTo(rn,nn)}else P.moveTo(cr,Zt),P.lineTo(sr,lr),P.lineTo(rn,nn);P.clip(),P.transform(ti[0],ti[2],ti[1],ti[3],sr,lr),P.translate(W[0]-va,W[3]-Ei),P.scale(n/r,-n/r),P.drawImage(V.canvas,0,0),P.restore()}}),E&&(P.save(),P.globalCompositeOperation="source-over",P.strokeStyle="black",P.lineWidth=1,p.getTriangles().forEach(function(se,Ie,qe){var Ae=se.target,Ue=(Ae[0][0]-te[0])/a,Le=-(Ae[0][1]-te[1])/a,$t=(Ae[1][0]-te[0])/a,Rt=-(Ae[1][1]-te[1])/a,ir=(Ae[2][0]-te[0])/a,Xr=-(Ae[2][1]-te[1])/a;P.beginPath(),P.moveTo($t,Rt),P.lineTo(Ue,Le),P.lineTo(ir,Xr),P.closePath(),P.stroke()}),P.restore()),P.canvas}var TOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IOt=function(e){TOt(t,e);function t(r,n,i,a,h,p,g,w,E,q,P,k){var W=e.call(this,h,gt.IDLE,{interpolate:!!k})||this;W.renderEdges_=P!==void 0?P:!1,W.pixelRatio_=g,W.gutter_=w,W.canvas_=null,W.sourceTileGrid_=n,W.targetTileGrid_=a,W.wrappedTileCoord_=p||h,W.sourceTiles_=[],W.sourcesListenerKeys_=null,W.sourceZ_=0;var Q=a.getTileCoordExtent(W.wrappedTileCoord_),$=W.targetTileGrid_.getExtent(),V=W.sourceTileGrid_.getExtent(),Z=$?Nh(Q,$):Q;if(kx(Z)===0)return W.state=gt.EMPTY,W;var te=r.getExtent();te&&(V?V=Nh(V,te):V=te);var se=a.getResolution(W.wrappedTileCoord_[0]),Ie=Zbe(r,i,Z,se);if(!isFinite(Ie)||Ie<=0)return W.state=gt.EMPTY,W;var qe=q!==void 0?q:Vbe;if(W.triangulation_=new Gbe(r,i,Z,V,Ie*qe,se),W.triangulation_.getTriangles().length===0)return W.state=gt.EMPTY,W;W.sourceZ_=n.getZForResolution(Ie);var Ae=W.triangulation_.calculateSourceExtent();if(V&&(r.canWrapX()?(Ae[1]=Hr(Ae[1],V[1],V[3]),Ae[3]=Hr(Ae[3],V[1],V[3])):Ae=Nh(Ae,V)),!kx(Ae))W.state=gt.EMPTY;else{for(var Ue=n.getTileRangeForExtentAndZ(Ae,W.sourceZ_),Le=Ue.minX;Le<=Ue.maxX;Le++)for(var $t=Ue.minY;$t<=Ue.maxY;$t++){var Rt=E(W.sourceZ_,Le,$t,g);Rt&&W.sourceTiles_.push(Rt)}W.sourceTiles_.length===0&&(W.state=gt.EMPTY)}return W}return t.prototype.getImage=function(){return this.canvas_},t.prototype.reproject_=function(){var r=[];if(this.sourceTiles_.forEach(function(E,q,P){E&&E.getState()==gt.LOADED&&r.push({extent:this.sourceTileGrid_.getTileCoordExtent(E.tileCoord),image:E.getImage()})}.bind(this)),this.sourceTiles_.length=0,r.length===0)this.state=gt.ERROR;else{var n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),a=typeof i=="number"?i:i[0],h=typeof i=="number"?i:i[1],p=this.targetTileGrid_.getResolution(n),g=this.sourceTileGrid_.getResolution(this.sourceZ_),w=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Kbe(a,h,this.pixelRatio_,g,this.sourceTileGrid_.getExtent(),p,w,this.triangulation_,r,this.gutter_,this.renderEdges_,this.interpolate),this.state=gt.LOADED}this.changed()},t.prototype.load=function(){if(this.state==gt.IDLE){this.state=gt.LOADING,this.changed();var r=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,i,a){var h=n.getState();if(h==gt.IDLE||h==gt.LOADING){r++;var p=Ht(n,vt.CHANGE,function(g){var w=n.getState();(w==gt.LOADED||w==gt.ERROR||w==gt.EMPTY)&&(vr(p),r--,r===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(p)}}.bind(this)),r===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,a){var h=n.getState();h==gt.IDLE&&n.load()})}},t.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(vr),this.sourcesListenerKeys_=null},t.prototype.release=function(){this.canvas_&&(G1e(this.canvas_.getContext("2d")),k3.push(this.canvas_),this.canvas_=null),e.prototype.release.call(this)},t}(sC),cC=IOt;var Xbe=function(){function e(t,r,n,i){this.minX=t,this.maxX=r,this.minY=n,this.maxY=i}return e.prototype.contains=function(t){return this.containsXY(t[1],t[2])},e.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},e.prototype.containsXY=function(t,r){return this.minX<=t&&t<=this.maxX&&this.minY<=r&&r<=this.maxY},e.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},e.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},e.prototype.getHeight=function(){return this.maxY-this.minY+1},e.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},e.prototype.getWidth=function(){return this.maxX-this.minX+1},e.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e}();function Ip(e,t,r,n,i){return i!==void 0?(i.minX=e,i.maxX=t,i.minY=r,i.maxY=n,i):new Xbe(e,t,r,n)}var hC=Xbe;var COt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),AOt=function(e){COt(t,e);function t(r){var n=e.call(this,r)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=lo(),n.tmpTileRange_=new hC(0,0,0,0),n}return t.prototype.isDrawableTile=function(r){var n=this.getLayer(),i=r.getState(),a=n.getUseInterimTilesOnError();return i==gt.LOADED||i==gt.EMPTY||i==gt.ERROR&&!a},t.prototype.getTile=function(r,n,i,a){var h=a.pixelRatio,p=a.viewState.projection,g=this.getLayer(),w=g.getSource(),E=w.getTile(r,n,i,h,p);return E.getState()==gt.ERROR&&(g.getUseInterimTilesOnError()?g.getPreload()>0&&(this.newTiles_=!0):E.setState(gt.LOADED)),this.isDrawableTile(E)||(E=E.getInterimTile()),E},t.prototype.getData=function(r){var n=this.frameState;if(!n)return null;var i=this.getLayer(),a=Bi(n.pixelToCoordinateTransform,r.slice()),h=i.getExtent();if(h&&!kh(h,a))return null;for(var p=n.pixelRatio,g=n.viewState.projection,w=n.viewState,E=i.getRenderSource(),q=E.getTileGridForProjection(w.projection),P=E.getTilePixelRatio(n.pixelRatio),k=q.getZForResolution(w.resolution);k>=q.getMinZoom();--k){var W=q.getTileCoordForCoordAndZ(a,k),Q=E.getTile(k,W[1],W[2],p,g);if(!(Q instanceof uC||Q instanceof cC))return null;if(Q.getState()===gt.LOADED){var $=q.getOrigin(k),V=ca(q.getTileSize(k)),Z=q.getResolution(k),te=Math.floor(P*((a[0]-$[0])/Z-W[1]*V[0])),se=Math.floor(P*(($[1]-a[1])/Z-W[2]*V[1])),Ie=Math.round(P*E.getGutterForProjection(w.projection));return this.getImageData(Q.getImage(),te+Ie,se+Ie)}}return null},t.prototype.loadedTileCallback=function(r,n,i){return this.isDrawableTile(i)?e.prototype.loadedTileCallback.call(this,r,n,i):!1},t.prototype.prepareFrame=function(r){return!!this.getLayer().getSource()},t.prototype.renderFrame=function(r,n){var i=r.layerStatesArray[r.layerIndex],a=r.viewState,h=a.projection,p=a.resolution,g=a.center,w=a.rotation,E=r.pixelRatio,q=this.getLayer(),P=q.getSource(),k=P.getRevision(),W=P.getTileGridForProjection(h),Q=W.getZForResolution(p,P.zDirection),$=W.getResolution(Q),V=r.extent,Z=r.viewState.resolution,te=P.getTilePixelRatio(E),se=Math.round(Ur(V)/Z*E),Ie=Math.round(Qn(V)/Z*E),qe=i.extent&&jh(i.extent,h);qe&&(V=Nh(V,jh(i.extent,h)));var Ae=$*se/2/te,Ue=$*Ie/2/te,Le=[g[0]-Ae,g[1]-Ue,g[0]+Ae,g[1]+Ue],$t=W.getTileRangeForExtentAndZ(V,Q),Rt={};Rt[Q]={};var ir=this.createLoadedTileFinder(P,h,Rt),Xr=this.tmpExtent,Pn=this.tmpTileRange_;this.newTiles_=!1;for(var sr=w?kI(a.center,Z,w,r.size):void 0,lr=$t.minX;lr<=$t.maxX;++lr)for(var cr=$t.minY;cr<=$t.maxY;++cr)if(!(w&&!W.tileCoordIntersectsViewport([Q,lr,cr],sr))){var Zt=this.getTile(Q,lr,cr,r);if(this.isDrawableTile(Zt)){var rn=Bn(this);if(Zt.getState()==gt.LOADED){Rt[Q][Zt.tileCoord.toString()]=Zt;var nn=Zt.inTransition(rn);nn&&i.opacity!==1&&(Zt.endTransition(rn),nn=!1),!this.newTiles_&&(nn||this.renderedTiles.indexOf(Zt)===-1)&&(this.newTiles_=!0)}if(Zt.getAlpha(rn,r.time)===1)continue}var va=W.getTileCoordChildTileRange(Zt.tileCoord,Pn,Xr),Ei=!1;va&&(Ei=ir(Q+1,va)),Ei||W.forEachTileCoordParentTileRange(Zt.tileCoord,ir,Pn,Xr)}var $n=$/p*E/te;Zl(this.pixelTransform,r.size[0]/2,r.size[1]/2,1/E,1/E,w,-se/2,-Ie/2);var ti=f1e(this.pixelTransform);this.useContainer(n,ti,this.getBackground(r));var Dt=this.context,vn=Dt.canvas;VI(this.inversePixelTransform,this.pixelTransform),Zl(this.tempTransform,se/2,Ie/2,$n,$n,0,-se/2,-Ie/2),vn.width!=se||vn.height!=Ie?(vn.width=se,vn.height=Ie):this.containerReused||Dt.clearRect(0,0,se,Ie),qe&&this.clipUnrotated(Dt,r,qe),P.getInterpolate()||wr(Dt,Xx),this.preRender(Dt,r),this.renderedTiles.length=0;var ri=Object.keys(Rt).map(Number);ri.sort(jx);var an,ws,xn;i.opacity===1&&(!this.containerReused||P.getOpaque(r.viewState.projection))?ri=ri.reverse():(an=[],ws=[]);for(var ka=ri.length-1;ka>=0;--ka){var Gn=ri[ka],Es=P.getTilePixelSize(Gn,E,h),Ee=W.getResolution(Gn),zo=Ee/$,Ks=Es[0]*zo*$n,Kt=Es[1]*zo*$n,Cr=W.getTileCoordForCoordAndZ(ms(Le),Gn),Xs=W.getTileCoordExtent(Cr),ma=Bi(this.tempTransform,[te*(Xs[0]-Le[0])/$,te*(Le[3]-Xs[3])/$]),go=te*P.getGutterForProjection(h),Ss=Rt[Gn];for(var $i in Ss){var Zt=Ss[$i],Ys=Zt.tileCoord,Js=Cr[1]-Ys[1],Fe=Math.round(ma[0]-(Js-1)*Ks),ga=Cr[2]-Ys[2],Wn=Math.round(ma[1]-(ga-1)*Kt),lr=Math.round(ma[0]-Js*Ks),cr=Math.round(ma[1]-ga*Kt),ni=Fe-lr,Gi=Wn-cr,ze=Q===Gn,nn=ze&&Zt.getAlpha(Bn(this),r.time)!==1,Ct=!1;if(!nn)if(an){xn=[lr,cr,lr+ni,cr,lr+ni,cr+Gi,lr,cr+Gi];for(var ft=0,ii=an.length;ft<ii;++ft)if(Q!==Gn&&Gn<ws[ft]){var Vr=an[ft];wp([lr,cr,lr+ni,cr+Gi],[Vr[0],Vr[3],Vr[4],Vr[7]])&&(Ct||(Dt.save(),Ct=!0),Dt.beginPath(),Dt.moveTo(xn[0],xn[1]),Dt.lineTo(xn[2],xn[3]),Dt.lineTo(xn[4],xn[5]),Dt.lineTo(xn[6],xn[7]),Dt.moveTo(Vr[6],Vr[7]),Dt.lineTo(Vr[4],Vr[5]),Dt.lineTo(Vr[2],Vr[3]),Dt.lineTo(Vr[0],Vr[1]),Dt.clip())}an.push(xn),ws.push(Gn)}else Dt.clearRect(lr,cr,ni,Gi);this.drawTileImage(Zt,r,lr,cr,ni,Gi,go,ze),an&&!nn?(Ct&&Dt.restore(),this.renderedTiles.unshift(Zt)):this.renderedTiles.push(Zt),this.updateUsedTiles(r.usedTiles,P,Zt)}}return this.renderedRevision=k,this.renderedResolution=$,this.extentChanged=!this.renderedExtent_||!Dx(this.renderedExtent_,Le),this.renderedExtent_=Le,this.renderedPixelRatio=E,this.renderedProjection=h,this.manageTilePyramid(r,P,W,E,h,V,Q,q.getPreload()),this.scheduleExpireCache(r,P),this.postRender(Dt,r),i.extent&&Dt.restore(),wr(Dt,Wbe),ti!==vn.style.transform&&(vn.style.transform=ti),this.container},t.prototype.drawTileImage=function(r,n,i,a,h,p,g,w){var E=this.getTileImage(r);if(E){var q=Bn(this),P=n.layerStatesArray[n.layerIndex],k=P.opacity*(w?r.getAlpha(q,n.time):1),W=k!==this.context.globalAlpha;W&&(this.context.save(),this.context.globalAlpha=k),this.context.drawImage(E,g,g,E.width-2*g,E.height-2*g,i,a,h,p),W&&this.context.restore(),k!==P.opacity?n.animate=!0:w&&r.endTransition(q)}},t.prototype.getImage=function(){var r=this.context;return r?r.canvas:null},t.prototype.getTileImage=function(r){return r.getImage()},t.prototype.scheduleExpireCache=function(r,n){if(n.canExpireCache()){var i=function(a,h,p){var g=Bn(a);g in p.usedTiles&&a.expireCache(p.viewState.projection,p.usedTiles[g])}.bind(null,n);r.postRenderFunctions.push(i)}},t.prototype.updateUsedTiles=function(r,n,i){var a=Bn(n);a in r||(r[a]={}),r[a][i.getKey()]=!0},t.prototype.manageTilePyramid=function(r,n,i,a,h,p,g,w,E){var q=Bn(n);q in r.wantedTiles||(r.wantedTiles[q]={});var P=r.wantedTiles[q],k=r.tileQueue,W=i.getMinZoom(),Q=r.viewState.rotation,$=Q?kI(r.viewState.center,r.viewState.resolution,Q,r.size):void 0,V=0,Z,te,se,Ie,qe,Ae;for(Ae=W;Ae<=g;++Ae)for(te=i.getTileRangeForExtentAndZ(p,Ae,te),se=i.getResolution(Ae),Ie=te.minX;Ie<=te.maxX;++Ie)for(qe=te.minY;qe<=te.maxY;++qe)Q&&!i.tileCoordIntersectsViewport([Ae,Ie,qe],$)||(g-Ae<=w?(++V,Z=n.getTile(Ae,Ie,qe,a,h),Z.getState()==gt.IDLE&&(P[Z.getKey()]=!0,k.isKeyQueued(Z.getKey())||k.enqueue([Z,q,i.getTileCoordCenter(Z.tileCoord),se])),E!==void 0&&E(Z)):n.useTile(Ae,Ie,qe,h));n.updateCacheSize(V,h)},t}(_be),Ybe=AOt;var qOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),POt=function(e){qOt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.createRenderer=function(){return new Ybe(this)},t}(Ube),Yx=POt;var MOt=function(){function e(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return e.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},e.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t){for(var r=this.oldest_;r;)t(r.value_,r.key_,this),r=r.newer},e.prototype.get=function(t,r){var n=this.entries_[t];return Nt(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},e.prototype.remove=function(t){var r=this.entries_[t];return Nt(r!==void 0,15),r===this.newest_?(this.newest_=r.older,this.newest_&&(this.newest_.newer=null)):r===this.oldest_?(this.oldest_=r.newer,this.oldest_&&(this.oldest_.older=null)):(r.newer.older=r.older,r.older.newer=r.newer),delete this.entries_[t],--this.count_,r.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)t[r++]=n.key_;return t},e.prototype.getValues=function(){var t=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)t[r++]=n.value_;return t},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.peek=function(t){if(this.containsKey(t))return this.entries_[t].value_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,r){this.get(t),this.entries_[t].value_=r},e.prototype.set=function(t,r){Nt(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:r};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e}(),Jbe=MOt;function N3(e,t,r,n){return n!==void 0?(n[0]=e,n[1]=t,n[2]=r,n):[e,t,r]}function Cp(e,t,r){return e+"/"+t+"/"+r}function fC(e){return Cp(e[0],e[1],e[2])}function Qbe(e){return e.split("/").map(Number)}function pC(e){return(e[1]<<e[0])+e[2]}function ewe(e,t){var r=e[0],n=e[1],i=e[2];if(t.getMinZoom()>r||r>t.getMaxZoom())return!1;var a=t.getFullTileRange(r);return a?a.containsXY(n,i):!0}var OOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ROt=function(e){OOt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.expireCache=function(r){for(;this.canExpireCache();){var n=this.peekLast();if(n.getKey()in r)break;this.pop().release()}},t.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var r=this.peekFirstKey(),n=Qbe(r),i=n[0];this.forEach(function(a){a.tileCoord[0]!==i&&(this.remove(fC(a.tileCoord)),a.release())}.bind(this))}},t}(Jbe),dC=ROt;var vC={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var DOt=[0,0,0],Wh=5,LOt=function(){function e(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Nt(e1e(this.resolutions_,function(h,p){return p-h},!0),17);var r;if(!t.origins){for(var n=0,i=this.resolutions_.length-1;n<i;++n)if(!r)r=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==r){r=void 0;break}}this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Nt(this.origins_.length==this.resolutions_.length,20));var a=t.extent;a!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ms(a)),Nt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Nt(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:Vm,Nt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=a!==void 0?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(h,p){var g=new hC(Math.min(0,h[0]),Math.max(h[0]-1,-1),Math.min(0,h[1]),Math.max(h[1]-1,-1));if(a){var w=this.getTileRangeForExtentAndZ(a,p);g.minX=Math.max(w.minX,g.minX),g.maxX=Math.min(w.maxX,g.maxX),g.minY=Math.max(w.minY,g.minY),g.maxY=Math.min(w.maxY,g.maxY)}return g},this):a&&this.calculateTileRanges_(a)}return e.prototype.forEachTileCoord=function(t,r,n){for(var i=this.getTileRangeForExtentAndZ(t,r),a=i.minX,h=i.maxX;a<=h;++a)for(var p=i.minY,g=i.maxY;p<=g;++p)n([r,a,p])},e.prototype.forEachTileCoordParentTileRange=function(t,r,n,i){var a,h,p,g=null,w=t[0]-1;for(this.zoomFactor_===2?(h=t[1],p=t[2]):g=this.getTileCoordExtent(t,i);w>=this.minZoom;){if(this.zoomFactor_===2?(h=Math.floor(h/2),p=Math.floor(p/2),a=Ip(h,h,p,p,n)):a=this.getTileRangeForExtentAndZ(g,w,n),r(w,a))return!0;--w}return!1},e.prototype.getExtent=function(){return this.extent_},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.getMinZoom=function(){return this.minZoom},e.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},e.prototype.getResolution=function(t){return this.resolutions_[t]},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getTileCoordChildTileRange=function(t,r,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){var i=t[1]*2,a=t[2]*2;return Ip(i,i+1,a,a+1,r)}var h=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(h,t[0]+1,r)}return null},e.prototype.getTileRangeForTileCoordAndZ=function(t,r,n){if(r>this.maxZoom||r<this.minZoom)return null;var i=t[0],a=t[1],h=t[2];if(r===i)return Ip(a,h,a,h,n);if(this.zoomFactor_){var p=Math.pow(this.zoomFactor_,r-i),g=Math.floor(a*p),w=Math.floor(h*p);if(r<i)return Ip(g,g,w,w,n);var E=Math.floor(p*(a+1))-1,q=Math.floor(p*(h+1))-1;return Ip(g,E,w,q,n)}var P=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(P,r,n)},e.prototype.getTileRangeExtent=function(t,r,n){var i=this.getOrigin(t),a=this.getResolution(t),h=ca(this.getTileSize(t),this.tmpSize_),p=i[0]+r.minX*h[0]*a,g=i[0]+(r.maxX+1)*h[0]*a,w=i[1]+r.minY*h[1]*a,E=i[1]+(r.maxY+1)*h[1]*a;return Bl(p,w,g,E,n)},e.prototype.getTileRangeForExtentAndZ=function(t,r,n){var i=DOt;this.getTileCoordForXYAndZ_(t[0],t[3],r,!1,i);var a=i[1],h=i[2];return this.getTileCoordForXYAndZ_(t[2],t[1],r,!0,i),Ip(a,i[1],h,i[2],n)},e.prototype.getTileCoordCenter=function(t){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=ca(this.getTileSize(t[0]),this.tmpSize_);return[r[0]+(t[1]+.5)*i[0]*n,r[1]-(t[2]+.5)*i[1]*n]},e.prototype.getTileCoordExtent=function(t,r){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),a=ca(this.getTileSize(t[0]),this.tmpSize_),h=n[0]+t[1]*a[0]*i,p=n[1]-(t[2]+1)*a[1]*i,g=h+a[0]*i,w=p+a[1]*i;return Bl(h,p,g,w,r)},e.prototype.getTileCoordForCoordAndResolution=function(t,r,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],r,!1,n)},e.prototype.getTileCoordForXYAndResolution_=function(t,r,n,i,a){var h=this.getZForResolution(n),p=n/this.getResolution(h),g=this.getOrigin(h),w=ca(this.getTileSize(h),this.tmpSize_),E=p*(t-g[0])/n/w[0],q=p*(g[1]-r)/n/w[1];return i?(E=Mx(E,Wh)-1,q=Mx(q,Wh)-1):(E=Px(E,Wh),q=Px(q,Wh)),N3(h,E,q,a)},e.prototype.getTileCoordForXYAndZ_=function(t,r,n,i,a){var h=this.getOrigin(n),p=this.getResolution(n),g=ca(this.getTileSize(n),this.tmpSize_),w=(t-h[0])/p/g[0],E=(h[1]-r)/p/g[1];return i?(w=Mx(w,Wh)-1,E=Mx(E,Wh)-1):(w=Px(w,Wh),E=Px(E,Wh)),N3(n,w,E,a)},e.prototype.getTileCoordForCoordAndZ=function(t,r,n){return this.getTileCoordForXYAndZ_(t[0],t[1],r,!1,n)},e.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},e.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},e.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},e.prototype.getZForResolution=function(t,r){var n=Om(this.resolutions_,t,r||0);return Hr(n,this.minZoom,this.maxZoom)},e.prototype.tileCoordIntersectsViewport=function(t,r){return d3(r,0,r.length,2,this.getTileCoordExtent(t))},e.prototype.calculateTileRanges_=function(t){for(var r=this.resolutions_.length,n=new Array(r),i=this.minZoom;i<r;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n},e}(),F3=LOt;function mC(e){var t=e.getDefaultTileGrid();return t||(t=NOt(e),e.setDefaultTileGrid(t)),t}function twe(e,t,r){var n=t[0],i=e.getTileCoordCenter(t),a=gC(r);if(kh(a,i))return t;var h=Ur(a),p=Math.ceil((a[0]-i[0])/h);return i[0]+=h*p,e.getTileCoordForCoordAndZ(i,n)}function kOt(e,t,r,n){var i=n!==void 0?n:"top-left",a=nwe(e,t,r);return new F3({extent:e,origin:Oxe(e,i),resolutions:a,tileSize:r})}function rwe(e){var t=e||{},r=t.extent||ji("EPSG:3857").getExtent(),n={extent:r,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:nwe(r,t.maxZoom,t.tileSize,t.maxResolution)};return new F3(n)}function nwe(e,t,r,n){for(var i=t!==void 0?t:Mbe,a=Qn(e),h=Ur(e),p=ca(r!==void 0?r:Vm),g=n>0?n:Math.max(h/p[0],a/p[1]),w=i+1,E=new Array(w),q=0;q<w;++q)E[q]=g/Math.pow(2,q);return E}function NOt(e,t,r,n){var i=gC(e);return kOt(i,t,r,n)}function gC(e){e=ji(e);var t=e.getExtent();if(!t){var r=180*so[uo.DEGREES]/e.getMetersPerUnit();t=Bl(-r,-r,r,r)}return t}var iwe=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FOt=function(e){iwe(t,e);function t(r){var n=e.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,projection:r.projection,state:r.state,wrapX:r.wrapX,interpolate:r.interpolate})||this;n.on,n.once,n.un,n.opaque_=r.opaque!==void 0?r.opaque:!1,n.tilePixelRatio_=r.tilePixelRatio!==void 0?r.tilePixelRatio:1,n.tileGrid=r.tileGrid!==void 0?r.tileGrid:null;var i=[256,256];return n.tileGrid&&ca(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),i),n.tileCache=new dC(r.cacheSize||0),n.tmpSize=[0,0],n.key_=r.key||"",n.tileOptions={transition:r.transition,interpolate:r.interpolate},n.zDirection=r.zDirection?r.zDirection:0,n}return t.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},t.prototype.expireCache=function(r,n){var i=this.getTileCacheForProjection(r);i&&i.expireCache(n)},t.prototype.forEachLoadedTile=function(r,n,i,a){var h=this.getTileCacheForProjection(r);if(!h)return!1;for(var p=!0,g,w,E,q=i.minX;q<=i.maxX;++q)for(var P=i.minY;P<=i.maxY;++P)w=Cp(n,q,P),E=!1,h.containsKey(w)&&(g=h.get(w),E=g.getState()===gt.LOADED,E&&(E=a(g)!==!1)),E||(p=!1);return p},t.prototype.getGutterForProjection=function(r){return 0},t.prototype.getKey=function(){return this.key_},t.prototype.setKey=function(r){this.key_!==r&&(this.key_=r,this.changed())},t.prototype.getOpaque=function(r){return this.opaque_},t.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},t.prototype.getTile=function(r,n,i,a,h){return or()},t.prototype.getTileGrid=function(){return this.tileGrid},t.prototype.getTileGridForProjection=function(r){return this.tileGrid?this.tileGrid:mC(r)},t.prototype.getTileCacheForProjection=function(r){var n=this.getProjection();return Nt(n===null||Fh(n,r),68),this.tileCache},t.prototype.getTilePixelRatio=function(r){return this.tilePixelRatio_},t.prototype.getTilePixelSize=function(r,n,i){var a=this.getTileGridForProjection(i),h=this.getTilePixelRatio(n),p=ca(a.getTileSize(r),this.tmpSize);return h==1?p:tC(p,h,this.tmpSize)},t.prototype.getTileCoordForTileUrlFunction=function(r,n){var i=n!==void 0?n:this.getProjection(),a=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(r=twe(a,r,i)),ewe(r,a)?r:null},t.prototype.clear=function(){this.tileCache.clear()},t.prototype.refresh=function(){this.clear(),e.prototype.refresh.call(this)},t.prototype.updateCacheSize=function(r,n){var i=this.getTileCacheForProjection(n);r>i.highWaterMark&&(i.highWaterMark=r)},t.prototype.useTile=function(r,n,i,a){},t}(Ebe),awe=function(e){iwe(t,e);function t(r,n){var i=e.call(this,r)||this;return i.tile=n,i}return t}(ua);var owe=FOt;function zOt(e,t){var r=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,a=/\{-y\}/g;return function(h,p,g){if(h)return e.replace(r,h[0].toString()).replace(n,h[1].toString()).replace(i,h[2].toString()).replace(a,function(){var w=h[0],E=t.getFullTileRange(w);Nt(E,55);var q=E.getHeight()-h[2]-1;return q.toString()})}}function swe(e,t){for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=zOt(e[i],t);return jOt(n)}function jOt(e){return e.length===1?e[0]:function(t,r,n){if(t){var i=pC(t),a=Ws(i,e.length);return e[a](t,r,n)}else return}}function uwe(e){var t=[],r=/\{([a-z])-([a-z])\}/.exec(e);if(r){var n=r[1].charCodeAt(0),i=r[2].charCodeAt(0),a=void 0;for(a=n;a<=i;++a)t.push(e.replace(r[0],String.fromCharCode(a)));return t}if(r=/\{(\d+)-(\d+)\}/.exec(e),r){for(var h=parseInt(r[2],10),p=parseInt(r[1],10);p<=h;p++)t.push(e.replace(r[0],p.toString()));return t}return t.push(e),t}var BOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UOt=function(e){BOt(t,e);function t(r){var n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tilePixelRatio:r.tilePixelRatio,wrapX:r.wrapX,transition:r.transition,interpolate:r.interpolate,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===t.prototype.tileUrlFunction,n.tileLoadFunction=r.tileLoadFunction,r.tileUrlFunction&&(n.tileUrlFunction=r.tileUrlFunction),n.urls=null,r.urls?n.setUrls(r.urls):r.url&&n.setUrl(r.url),n.tileLoadingKeys_={},n}return t.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},t.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},t.prototype.getUrls=function(){return this.urls},t.prototype.handleTileChange=function(r){var n=r.target,i=Bn(n),a=n.getState(),h;a==gt.LOADING?(this.tileLoadingKeys_[i]=!0,h=vC.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],h=a==gt.ERROR?vC.TILELOADERROR:a==gt.LOADED?vC.TILELOADEND:void 0),h!=null&&this.dispatchEvent(new awe(h,n))},t.prototype.setTileLoadFunction=function(r){this.tileCache.clear(),this.tileLoadFunction=r,this.changed()},t.prototype.setTileUrlFunction=function(r,n){this.tileUrlFunction=r,this.tileCache.pruneExceptNewestZ(),typeof n!="undefined"?this.setKey(n):this.changed()},t.prototype.setUrl=function(r){var n=uwe(r);this.urls=n,this.setUrls(n)},t.prototype.setUrls=function(r){this.urls=r;var n=r.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(swe(r,this.tileGrid),n):this.setKey(n)},t.prototype.tileUrlFunction=function(r,n,i){},t.prototype.useTile=function(r,n,i){var a=Cp(r,n,i);this.tileCache.containsKey(a)&&this.tileCache.get(a)},t}(owe),lwe=UOt;var VOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$Ot=function(e){VOt(t,e);function t(r){var n=this,i=r.imageSmoothing!==void 0?r.imageSmoothing:!0;return r.interpolate!==void 0&&(i=r.interpolate),n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction?r.tileLoadFunction:GOt,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:r.wrapX,transition:r.transition,interpolate:i,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this,n.crossOrigin=r.crossOrigin!==void 0?r.crossOrigin:null,n.tileClass=r.tileClass!==void 0?r.tileClass:uC,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=r.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return t.prototype.canExpireCache=function(){if(!zu)return e.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var r in this.tileCacheForProjection)if(this.tileCacheForProjection[r].canExpireCache())return!0;return!1},t.prototype.expireCache=function(r,n){if(!zu){e.prototype.expireCache.call(this,r,n);return}var i=this.getTileCacheForProjection(r);this.tileCache.expireCache(this.tileCache==i?n:{});for(var a in this.tileCacheForProjection){var h=this.tileCacheForProjection[a];h.expireCache(h==i?n:{})}},t.prototype.getGutterForProjection=function(r){return zu&&this.getProjection()&&r&&!Fh(this.getProjection(),r)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getKey=function(){var r=e.prototype.getKey.call(this);return this.getInterpolate()||(r+=":disable-interpolation"),r},t.prototype.getOpaque=function(r){return zu&&this.getProjection()&&r&&!Fh(this.getProjection(),r)?!1:e.prototype.getOpaque.call(this,r)},t.prototype.getTileGridForProjection=function(r){if(!zu)return e.prototype.getTileGridForProjection.call(this,r);var n=this.getProjection();if(this.tileGrid&&(!n||Fh(n,r)))return this.tileGrid;var i=Bn(r);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=mC(r)),this.tileGridForProjection[i]},t.prototype.getTileCacheForProjection=function(r){if(!zu)return e.prototype.getTileCacheForProjection.call(this,r);var n=this.getProjection();if(!n||Fh(n,r))return this.tileCache;var i=Bn(r);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new dC(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},t.prototype.createTile_=function(r,n,i,a,h,p){var g=[r,n,i],w=this.getTileCoordForTileUrlFunction(g,h),E=w?this.tileUrlFunction(w,a,h):void 0,q=new this.tileClass(g,E!==void 0?gt.IDLE:gt.EMPTY,E!==void 0?E:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return q.key=p,q.addEventListener(vt.CHANGE,this.handleTileChange.bind(this)),q},t.prototype.getTile=function(r,n,i,a,h){var p=this.getProjection();if(!zu||!p||!h||Fh(p,h))return this.getTileInternal(r,n,i,a,p||h);var g=this.getTileCacheForProjection(h),w=[r,n,i],E=void 0,q=fC(w);g.containsKey(q)&&(E=g.get(q));var P=this.getKey();if(E&&E.key==P)return E;var k=this.getTileGridForProjection(p),W=this.getTileGridForProjection(h),Q=this.getTileCoordForTileUrlFunction(w,h),$=new cC(p,k,h,W,w,Q,this.getTilePixelRatio(a),this.getGutter(),function(V,Z,te,se){return this.getTileInternal(V,Z,te,se,p)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return $.key=P,E?($.interimTile=E,$.refreshInterimChain(),g.replace(q,$)):g.set(q,$),$},t.prototype.getTileInternal=function(r,n,i,a,h){var p=null,g=Cp(r,n,i),w=this.getKey();if(!this.tileCache.containsKey(g))p=this.createTile_(r,n,i,a,h,w),this.tileCache.set(g,p);else if(p=this.tileCache.get(g),p.key!=w){var E=p;p=this.createTile_(r,n,i,a,h,w),E.getState()==gt.IDLE?p.interimTile=E.interimTile:p.interimTile=E,p.refreshInterimChain(),this.tileCache.replace(g,p)}return p},t.prototype.setRenderReprojectionEdges=function(r){if(!(!zu||this.renderReprojectionEdges_==r)){this.renderReprojectionEdges_=r;for(var n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},t.prototype.setTileGridForProjection=function(r,n){if(zu){var i=ji(r);if(i){var a=Bn(i);a in this.tileGridForProjection||(this.tileGridForProjection[a]=n)}}},t}(lwe);function GOt(e,t){e.getImage().src=t}var yC=$Ot;var WOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HOt=function(e){WOt(t,e);function t(r){var n=this,i=r||{},a=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(a=i.interpolate);var h=i.projection!==void 0?i.projection:"EPSG:3857",p=i.tileGrid!==void 0?i.tileGrid:rwe({extent:gC(h),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return n=e.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:a,opaque:i.opaque,projection:h,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:p,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this,n.gutter_=i.gutter!==void 0?i.gutter:0,n}return t.prototype.getGutter=function(){return this.gutter_},t}(yC),z3=HOt;var j3=class extends ko{constructor(r){let n=r||{},i=document.createElement("div");i.className="ol-layerspy ol-unselectable ol-control";let a=document.createElement("button");a.title=Fl("control-layerspy-title"),a.type="button",i.appendChild(a);super({element:i,target:n.target});pi(this,"mousePosition",null);pi(this,"activate",()=>{this.layers===void 0&&(this.layers=this.getMap().getLayers()),this.getMap().addLayer(this.layer),this.layer.on("prerender",this.handlePrecompose,this),this.layer.on("postrender",this.handlePostcompose,this);let r=this.getMap().getViewport();r.addEventListener("mousemove",this.handleMouseMove),r.addEventListener("mouseout",this.handleMouseOut),document.addEventListener("keydown",this.handleKeyPress),this.layers.on("add",this.handleAddedLayer),this.containerEl.classList.add("active"),this.renderRadiusbox&&this.renderTargetElement()});pi(this,"changeLayer",r=>{this.containerEl.classList.contains("active")?(this.deactivate(),this.layer=r,this.activate()):this.layer=r});pi(this,"deactivate",()=>{this.layer.un("prerender",this.handlePrecompose),this.layer.un("postrender",this.handlePostcompose);let r=this.getMap().getViewport();r.removeEventListener("mousemove",this.handleMouseMove),r.removeEventListener("mouseout",this.handleMouseOut),document.removeEventListener("keydown",this.handleKeyPress),this.layers.un("add",this.handleAddedLayer),this.getMap().removeLayer(this.layer),this.containerEl.classList.remove("active"),this.renderRadiusbox&&this.renderTargetElement()});pi(this,"handlePostcompose",r=>{r.context.restore()});pi(this,"handlePrecompose",r=>{let n=r.context,i=1;n.save(),n.beginPath();let a=this.mousePosition;if(a){let h=this.getMap().getLayers().getArray().find(w=>w.vkf_id===this.refActiveBasemapId.current).renderer_.context.canvas.style.transform,p=new DOMPoint(a[0],a[1]),g=new DOMMatrix(h);p=p.matrixTransform(g.invertSelf()),n.arc(p.x*i,p.y*i,this.clipRadius*i,0,2*Math.PI),n.lineWidth=5*i,n.strokeStyle="rgba(0,0,0,0.5)",n.stroke()}n.clip()});pi(this,"handleMouseMove",r=>{this.mousePosition=this.getMap().getEventPixel(r),this.getMap().render()});pi(this,"handleMouseOut",()=>{this.mousePosition=null,this.getMap().render()});pi(this,"handleKeyPress",r=>{r.target.tagName.toLowerCase()!=="input"&&(r.key.toLowerCase()==="y"||r.keyCode==="KeyY"?(this.clipRadius=Math.min(this.clipRadius+5,150),this.getMap().render()):(r.key.toLowerCase()==="x"||r.keyCode==="KeyX")&&(this.clipRadius=Math.max(this.clipRadius-5,25),this.getMap().render()),this.updateClipRadiusDisplay())});pi(this,"handleAddedLayer",r=>{r.target.getArray()[r.target.getLength()-1]!==this.layer&&(this.getMap().removeLayer(this.layer),this.getMap().addLayer(this.layer))});pi(this,"handleExternal3dStateUpdate",r=>{this.containerEl.disabled=r,r?this.containerEl.classList.add("disabled"):this.containerEl.classList.remove("disabled")});pi(this,"updateClipRadiusDisplay",()=>{let r=this.targetEl;r.innerHTML=`<strong>Radius: ${this.clipRadius}px</strong> (${Fl("control-layerspy-radius-tooltip")})`});pi(this,"renderTargetElement",()=>{let r=this.targetEl,n=WB(this.getMap());this.targetEl===void 0&&(r=document.createElement("div"),r.className="ol-control ol-layerspy-radius-box",r.innerHTML="",n.appendChild(r),this.targetEl=r),this.targetEl.classList.toggle("active"),n.classList.toggle("layerspy-active"),this.updateClipRadiusDisplay()});this.clipRadius=zl(n.radius)?parseInt(n.radius,0):75,n.refSpyLayer!==void 0&&(n.refSpyLayer.current=this),this.refActiveBasemapId=n.refActiveBasemapId,this.containerEl=a,this.renderRadiusbox=r.renderRadiusBox===void 0?!0:r.renderRadiusBox,a.addEventListener("click",h=>{h.preventDefault(),this.containerEl.classList.contains("active")?this.deactivate():this.activate()}),zl(n.spyLayer)&&this.changeLayer(n.spyLayer)}},cwe=j3;var hwe=e=>{let{children:t,extent:r,onLoad:n=()=>console.log("No onLoad function was passed to component Map2D."),urlsOsmBaseMap:i}=e,a=(0,$m.useRef)(null);return(0,$m.useEffect)(()=>{let h=()=>Ga(void 0,null,function*(){let p=new Yx({source:new z3({urls:i,crossOrigin:"*",maxZoom:18})});p.vkf_id="slub-osm";let g=new oC({controls:[new tbe({tipLabel:Fl("control-fullscreen-title")}),new aC({zoomInTipLabel:Fl("control-zoom-in"),zoomOutTipLabel:Fl("control-zoom-in")})],interactions:nC().extend([new JI]),layers:[p],target:a.current,view:new Fu({projection:"EPSG:3857",center:[871713,6396955],zoom:4.3})});if(n({map:g}),r!=null){let E=zh(r,"EPSG:4326",g.getView().getProjection());g.getView().fit(E,{padding:[100,100,100,100]}),g.addControl(new jbe({tipLabel:Fl("control-zoomtoextent-title"),extent:E}))}let w=new Yx({zIndex:10,attribution:void 0,source:new z3({urls:i,crossOrigin:"*",attributions:[]})});w.vkf_id="slub-osm",g.addControl(new cwe({spyLayer:w,refActiveBasemapId:{current:p.vkf_id}}))});a.current!==null&&h()},[]),$m.default.createElement("div",{className:"map-container",ref:a},t)};hwe.propTypes={extent:Zs.default.arrayOf(Zs.default.number),onLoad:Zs.default.func,urlNominatim:Zs.default.string,urlsOsmBaseMap:Zs.default.arrayOf(Zs.default.string),children:Zs.default.oneOfType([Zs.default.arrayOf(Zs.default.node),Zs.default.node])};var fwe=hwe;var pwe=fwe;var ha=De(Xt(),1);var ZOt=()=>ha.default.createElement("div",{className:"vkf-loading-indicator"},ha.default.createElement("svg",{className:"loading-icon",version:"1.1",id:"Layer_1",x:"0",y:"0",viewBox:"0 0 70 100"},ha.default.createElement("rect",{fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 3 50)"},ha.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite"}),ha.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"1.2s",values:"0;60;0",repeatCount:"indefinite"})),ha.default.createElement("rect",{x:"17",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 20 50)"},ha.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.1s"}),ha.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:".5s",values:"0;5;0",repeatCount:"indefinite"})),ha.default.createElement("rect",{x:"40",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 40 50)"},ha.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.3s"}),ha.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"2s",values:"0;30;0",repeatCount:"indefinite",begin:"0.6s"})),ha.default.createElement("rect",{x:"60",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 58 50)"},ha.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.5s"}),ha.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"1s",values:"0;60;0",repeatCount:"indefinite",begin:".3s"}))),ha.default.createElement("div",{className:"loading-text"},"Loading\u2026")),dwe=ZOt;var vwe=dwe;function mwe(e){return Ga(this,null,function*(){let t=sa.getGeoreferenceApiClient(),r="/transformations/",n={map_id:e,additional_properties:!0},i=yield t.get(r,{params:n});if(i.status===200)return i.data;console.error("Something went wrong while trying to fetch transformation for given map_id.")})}function gwe(e){return Ga(this,null,function*(){let t=sa.getGeoreferenceApiClient(),r="/transformations/",n={user_id:e},i=yield t.get(r,{params:n});if(i.status===200)return i.data;console.error("Something went wrong while trying to fetch transformation for given user id.")})}function ywe(e){return Ga(this,null,function*(){let t=sa.getGeoreferenceApiClient(),r="/transformations/",n={validation:e},i=yield t.get(r,{params:n});if(i.status===200)return i.data;console.error("Something went wrong while trying to fetch transformation for given validation.")})}function _we(e){return Ga(this,null,function*(){let t=sa.getGeoreferenceApiClient(),r="/jobs/",n=e,i=yield t.post(r,n);if(i.status===200)return i.data;console.error("Something went wrong while trying to post a new job.")})}function xwe(e){return Ga(this,null,function*(){let t=sa.getGeoreferenceApiClient(),r="/transformations/",n={transformation_id:e},i={dry_run:!0},a=yield t.post(r,n,{params:i});if(a.status===200)return a.data;console.error("Something went wrong while trying to fetch transformation preview for given transformation_id.")})}var Qx=De(Xt(),1),Gm=De(zr(),1);var Jx="1.3.0";function B3(e,t){var r=[];Object.keys(t).forEach(function(i){t[i]!==null&&t[i]!==void 0&&r.push(i+"="+encodeURIComponent(t[i]))});var n=r.join("&");return e=e.replace(/[?&]$/,""),e=e.indexOf("?")===-1?e+"?":e+"&",e+n}var KOt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XOt=function(e){KOt(t,e);function t(r){var n=this,i=r||{},a=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(a=i.interpolate);var h=i.params||{},p="TRANSPARENT"in h?h.TRANSPARENT:!0;return n=e.call(this,{attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:a,opaque:!p,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,zDirection:i.zDirection})||this,n.gutter_=i.gutter!==void 0?i.gutter:0,n.params_=h,n.v13_=!0,n.serverType_=i.serverType,n.hidpi_=i.hidpi!==void 0?i.hidpi:!0,n.tmpExtent_=lo(),n.updateV13_(),n.setKey(n.getKeyForParams_()),n}return t.prototype.getFeatureInfoUrl=function(r,n,i,a){var h=ji(i),p=this.getProjection(),g=this.getTileGrid();g||(g=this.getTileGridForProjection(h));var w=g.getZForResolution(n,this.zDirection),E=g.getTileCoordForCoordAndZ(r,w);if(!(g.getResolutions().length<=E[0])){var q=g.getResolution(E[0]),P=g.getTileCoordExtent(E,this.tmpExtent_),k=ca(g.getTileSize(E[0]),this.tmpSize),W=this.gutter_;W!==0&&(k=b3(k,W,this.tmpSize),P=YB(P,q*W,P)),p&&p!==h&&(q=lC(p,h,r,q),P=zh(P,h,p),r=Pm(r,h,p));var Q={SERVICE:"WMS",VERSION:Jx,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};wr(Q,this.params_,a);var $=Math.floor((r[0]-P[0])/q),V=Math.floor((P[3]-r[1])/q);return Q[this.v13_?"I":"X"]=$,Q[this.v13_?"J":"Y"]=V,this.getRequestUrl_(E,k,P,1,p||h,Q)}},t.prototype.getLegendUrl=function(r,n){if(this.urls[0]!==void 0){var i={SERVICE:"WMS",VERSION:Jx,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(n===void 0||n.LAYER===void 0){var a=this.params_.LAYERS,h=!Array.isArray(a)||a.length===1;if(!h)return;i.LAYER=a}if(r!==void 0){var p=this.getProjection()?this.getProjection().getMetersPerUnit():1,g=28e-5;i.SCALE=r*p/g}return wr(i,n),B3(this.urls[0],i)}},t.prototype.getGutter=function(){return this.gutter_},t.prototype.getParams=function(){return this.params_},t.prototype.getRequestUrl_=function(r,n,i,a,h,p){var g=this.urls;if(g){if(p.WIDTH=n[0],p.HEIGHT=n[1],p[this.v13_?"CRS":"SRS"]=h.getCode(),"STYLES"in this.params_||(p.STYLES=""),a!=1)switch(this.serverType_){case"geoserver":var w=90*a+.5|0;"FORMAT_OPTIONS"in p?p.FORMAT_OPTIONS+=";dpi:"+w:p.FORMAT_OPTIONS="dpi:"+w;break;case"mapserver":p.MAP_RESOLUTION=90*a;break;case"carmentaserver":case"qgis":p.DPI=90*a;break;default:Nt(!1,52);break;}var E=h.getAxisOrientation(),q=i;if(this.v13_&&E.substr(0,2)=="ne"){var P=void 0;P=i[0],q[0]=i[1],q[1]=P,P=i[2],q[2]=i[3],q[3]=P}p.BBOX=q.join(",");var k;if(g.length==1)k=g[0];else{var W=Ws(pC(r),g.length);k=g[W]}return B3(k,p)}},t.prototype.getTilePixelRatio=function(r){return!this.hidpi_||this.serverType_===void 0?1:r},t.prototype.getKeyForParams_=function(){var r=0,n=[];for(var i in this.params_)n[r++]=i+"-"+this.params_[i];return n.join("/")},t.prototype.updateParams=function(r){wr(this.params_,r),this.updateV13_(),this.setKey(this.getKeyForParams_())},t.prototype.updateV13_=function(){var r=this.params_.VERSION||Jx;this.v13_=kxe(r,"1.3")>=0},t.prototype.tileUrlFunction=function(r,n,i){var a=this.getTileGrid();if(a||(a=this.getTileGridForProjection(i)),!(a.getResolutions().length<=r[0])){n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);var h=a.getResolution(r[0]),p=a.getTileCoordExtent(r,this.tmpExtent_),g=ca(a.getTileSize(r[0]),this.tmpSize),w=this.gutter_;w!==0&&(g=b3(g,w,this.tmpSize),p=YB(p,h*w,p)),n!=1&&(g=tC(g,n,this.tmpSize));var E={SERVICE:"WMS",VERSION:Jx,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return wr(E,this.params_),this.getRequestUrl_(r,g,p,n,i,E)}},t}(yC),bwe=XOt;function YOt(e,t){return e.getCoordinates()[0].map(r=>t.getPixelFromCoordinate(r))}var wwe=e=>{let{map:t,layerName:r,onLoad:n=()=>{},wmsUrl:i}=e;return(0,Qx.useEffect)(()=>{let a=new Yx({source:new bwe({url:i,params:{LAYERS:r,VERSION:"1.1.1"},projection:t.getView().getProjection()}),preload:1/0,zIndex:1});t.addLayer(a),n(a);let h=g=>{let w=t.getLayers().getArray().find(E=>E.get("key")==="clip");if(w!==void 0&&w.getSource().getFeatures().length>0){let E=YOt(w.getSource().getFeatures()[0].getGeometry(),t),q=1,P=g.context;P.save(),P.beginPath(),P.moveTo(E[0][0]*q,E[0][1]*q);for(let k=1;k<E.length;k++)P.lineTo(E[k][0]*q,E[k][1]*q);P.closePath(),P.clip()}},p=g=>{g.context.restore()};return a.on("prerender",h),a.on("postrender",p),()=>{a.un("prerender",h),a.un("postrender",p),t.removeLayer(a)}},[]),Qx.default.createElement(Qx.default.Fragment,null)};wwe.propTypes={clipPolygon:Gm.default.instanceOf(GI),layerName:Gm.default.string.isRequired,map:Gm.default.instanceOf(oC).isRequired,onLoad:Gm.default.func,wmsUrl:Gm.default.string.isRequired};var Ewe=wwe;var Swe=Ewe;var Mr=De(Xt(),1),fo=De(zr(),1);var ju=De(Xt(),1);var JOt=()=>ju.default.createElement("div",{className:"lds-roller"},ju.default.createElement("div",null),ju.default.createElement("div",null),ju.default.createElement("div",null),ju.default.createElement("div",null),ju.default.createElement("div",null),ju.default.createElement("div",null),ju.default.createElement("div",null),ju.default.createElement("div",null)),Twe=JOt;var Iwe=Twe;var Ap={BY_VALIDATION:"byValidationState",BY_MAPID:"byMapId",BY_USERID:"byUserId"},Yl=[{desc:"Auswahl von allen gespeicherten Transformation mit einem bestimmten Validierungsstatus",id:Ap.BY_VALIDATION,label:"Validation",type:"radio",value:"missing",values:["invalid","missing"]},{desc:"Auswahl von allen gespeicherten Transformation f\xFCr eine Karten-Id",id:Ap.BY_MAPID,label:"Karten-Id",type:"input",value:""},{desc:"Auswahl von allen gespeicherten Transformation f\xFCr eine Nutzer-Id",id:Ap.BY_USERID,label:"User-Id",type:"input",value:""}];function Cwe(e){let t=n=>{e.onChange(n.target.value,e.id,"input")},r=()=>{e.onSubmit(e.value,e.id,"input")};return Mr.default.createElement("div",null,Mr.default.createElement("p",null,e.desc),Mr.default.createElement("div",{className:"input-group"},Mr.default.createElement("input",{value:e.value,onChange:t,type:"text",className:"form-control",placeholder:e.placeholder}),Mr.default.createElement("span",{className:"input-group-btn"},Mr.default.createElement("button",{className:"btn btn-default",onClick:r},Mr.default.createElement("span",{className:"glyphicon glyphicon-search","aria-hidden":!0})))))}Cwe.propTypes={desc:fo.default.string.isRequired,id:fo.default.string.isRequired,placeholder:fo.default.string.isRequired,onChange:fo.default.func.isRequired,onSubmit:fo.default.func.isRequired,value:fo.default.string.isRequired};function Awe(e){return Mr.default.createElement("div",null,Mr.default.createElement("p",null,e.desc),Mr.default.createElement("div",null,e.values.map(t=>Mr.default.createElement("div",{key:t,className:"radio"},Mr.default.createElement("label",null,Mr.default.createElement("input",{type:"radio",name:`options-${t}`,value:t,checked:t===e.value,readOnly:!0,onClick:()=>e.onChange(t,e.id,"radio")})," ",t)))))}Awe.propTypes={desc:fo.default.string.isRequired,id:fo.default.string.isRequired,onChange:fo.default.func.isRequired,value:fo.default.string.isRequired,values:fo.default.arrayOf(fo.default.string).isRequired};var QOt=(e,t)=>Ga(void 0,null,function*(){let r=yield mwe(e);t(r.transformations)}),eRt=(e,t)=>Ga(void 0,null,function*(){let r=yield gwe(e);t(r.transformations)}),U3=(e,t)=>Ga(void 0,null,function*(){let r=yield ywe(e);t(r.transformations)}),qwe=e=>{let[t,r]=(0,Mr.useState)(Yl[0]),[n,i]=(0,Mr.useState)(!1),[a,h]=(0,Mr.useState)({[Yl[0].id]:Yl[0].value,[Yl[1].id]:Yl[1].value,[Yl[2].id]:Yl[2].value}),p=E=>{r(E),E.id===Ap.BY_VALIDATION&&(i(!0),U3(a[E.id],q=>{i(!1),e.onChangeTransformations(q)}))},g=(E,q)=>{h(Object.assign({},a,{[q]:E})),q===Ap.BY_VALIDATION&&(i(!0),U3(E,P=>{i(!1),e.onChangeTransformations(P)}))},w=(E,q)=>{q===Ap.BY_MAPID?(i(!0),QOt(E,P=>{i(!1),e.onChangeTransformations(P)})):q===Ap.BY_USERID?(i(!0),eRt(E,P=>{i(!1),e.onChangeTransformations(P)})):console.warn("Given selection id is not supported.")};return(0,Mr.useEffect)(()=>{U3(Yl[0].value,e.onChangeTransformations)},[]),Mr.default.createElement("div",{className:"vkf-select-transformations"},Mr.default.createElement("div",{className:"nav-container"},Mr.default.createElement("ul",{className:"nav nav-pills"},Yl.map((E,q)=>Mr.default.createElement("li",{key:q,role:"presentation",className:t!==null&&t.id===E.id?"active":""},Mr.default.createElement("a",{href:"#",onClick:()=>p(E)},E.label)))),n&&Mr.default.createElement(Iwe,null)),Mr.default.createElement("div",{className:"select-container"},t!==null&&t.type==="radio"&&Mr.default.createElement(Awe,{desc:t.desc,id:t.id,onChange:g,value:a[t.id],values:t.values}),t!==null&&t.type==="input"&&Mr.default.createElement(Cwe,{desc:t.desc,id:t.id,onChange:g,onSubmit:w,value:a[t.id],placeholder:t.label})))};qwe.propTypes={onChangeTransformations:fo.default.func.isRequired};var Pwe=qwe;var Jt=De(Xt(),1);var r4=De(qEe(),1);function bt(){return bt=r4.default?r4.default.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bt.apply(null,arguments)}var YEe=De(jEe(),1);var o4=De(XEe(),1);function OC(e,t){return OC=o4.default?o4.default.bind():function(r,n){return r.__proto__=n,r},OC(e,t)}function mr(e,t){e.prototype=(0,YEe.default)(t.prototype),e.prototype.constructor=e,OC(e,t)}function gr(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}function Uu(){return Uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uu.apply(null,arguments)}function s4(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}var l4=De(Xt());var Vyr=De(DC()),aDt=function(){};function QEe(e,t){var r={};return Object.keys(e).forEach(function(n){if(r[Km(n)]=aDt,0)var i}),r}function u4(e,t){return e[t]!==void 0}function Km(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function eSe(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function LC(e,t){return LC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},LC(e,t)}function rSe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,LC(e,t)}var Xm=De(Xt()),oSe=De(h4()),sSe=De(DC());var sDt="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function a1(e,t,r){r===void 0&&(r=[]);var n=e.displayName||e.name||"Component",i=eSe(e),a=Object.keys(t),h=a.map(Km);i||!r.length||(0,sSe.default)(!1);var p=function(w){rSe(E,w);function E(){for(var P,k=arguments.length,W=new Array(k),Q=0;Q<k;Q++)W[Q]=arguments[Q];P=w.call.apply(w,[this].concat(W))||this,P.handlers=Object.create(null),a.forEach(function(V){var Z=t[V],te=function(Ie){if(P.props[Z]){var qe;P._notifying=!0;for(var Ae=arguments.length,Ue=new Array(Ae>1?Ae-1:0),Le=1;Le<Ae;Le++)Ue[Le-1]=arguments[Le];(qe=P.props)[Z].apply(qe,[Ie].concat(Ue)),P._notifying=!1}P.unmounted||P.setState(function($t){var Rt,ir=$t.values;return{values:Uu(Object.create(null),ir,(Rt={},Rt[V]=Ie,Rt))}})};P.handlers[Z]=te}),r.length&&(P.attachRef=function(V){P.inner=V});var $=Object.create(null);return a.forEach(function(V){$[V]=P.props[Km(V)]}),P.state={values:$,prevProps:{}},P}var q=E.prototype;return q.shouldComponentUpdate=function(){return!this._notifying},E.getDerivedStateFromProps=function(k,W){var Q=W.values,$=W.prevProps,V={values:Uu(Object.create(null),Q),prevProps:{}};return a.forEach(function(Z){V.prevProps[Z]=k[Z],!u4(k,Z)&&u4($,Z)&&(V.values[Z]=k[Km(Z)])}),V},q.componentWillUnmount=function(){this.unmounted=!0},q.render=function(){var k=this,W=this.props,Q=W.innerRef,$=s4(W,["innerRef"]);h.forEach(function(Z){delete $[Z]});var V={};return a.forEach(function(Z){var te=k.props[Z];V[Z]=te!==void 0?te:k.state.values[Z]}),Xm.default.createElement(e,Uu({},$,V,this.handlers,{ref:Q||this.attachRef}))},E}(Xm.default.Component);(0,oSe.polyfill)(p),p.displayName="Uncontrolled("+n+")",p.propTypes=Uu({innerRef:function(){}},QEe(t,n)),r.forEach(function(w){p.prototype[w]=function(){var q;return(q=this.inner)[w].apply(q,arguments)}});var g=p;return Xm.default.forwardRef&&(g=Xm.default.forwardRef(function(w,E){return Xm.default.createElement(p,Uu({},w,{innerRef:E,__source:{fileName:sDt,lineNumber:128},__self:this}))}),g.propTypes=p.propTypes),g.ControlledComponent=e,g.deferControlTo=function(w,E,q){return E===void 0&&(E={}),a1(w,Uu({},t,E),q)},g}var v4=De(p4());var vSe=De(DC()),kC=De(zr());var Vu={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},d4={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};var dSe={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},o1={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"};function m4(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[r.length-1];return typeof i=="function"?e.apply(void 0,r):function(a){return e.apply(void 0,r.concat([a]))}}}function pn(e,t){var r=(e.bsClass||"").trim();return r==null&&(0,vSe.default)(!1),r+(t?"-"+t:"")}var dn=m4(function(e,t){var r=t.propTypes||(t.propTypes={}),n=t.defaultProps||(t.defaultProps={});return r.bsClass=kC.default.string,n.bsClass=e,t}),mSe=m4(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var n=r.STYLES||[],i=r.propTypes||{};e.forEach(function(p){n.indexOf(p)===-1&&n.push(p)});var a=kC.default.oneOf(n);if(r.STYLES=n,a._values=n,r.propTypes=bt({},i,{bsStyle:a}),t!==void 0){var h=r.defaultProps||(r.defaultProps={});h.bsStyle=t}return r}),Ym=m4(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var n=r.SIZES||[],i=r.propTypes||{};e.forEach(function(p){n.indexOf(p)===-1&&n.push(p)});var a=[];n.forEach(function(p){var g=d4[p];g&&g!==p&&a.push(g),a.push(p)});var h=kC.default.oneOf(a);return h._values=a,r.SIZES=n,r.propTypes=bt({},i,{bsSize:h}),t!==void 0&&(r.defaultProps||(r.defaultProps={}),r.defaultProps.bsSize=t),r});function pa(e){var t,r=(t={},t[pn(e)]=!0,t);if(e.bsSize){var n=d4[e.bsSize]||e.bsSize;r[pn(e,n)]=!0}return e.bsStyle&&(r[pn(e,e.bsStyle)]=!0),r}function gSe(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function ySe(e){return e==="bsClass"||e==="bsSize"||e==="bsStyle"||e==="bsRole"}function vo(e){var t={};return(0,v4.default)(e).forEach(function(r){var n=r[0],i=r[1];ySe(n)||(t[n]=i)}),[gSe(e),t]}function NC(e,t){var r={};t.forEach(function(i){r[i]=!0});var n={};return(0,v4.default)(e).forEach(function(i){var a=i[0],h=i[1];!ySe(a)&&!r[a]&&(n[a]=h)}),[gSe(e),n]}var Ui=De(Xt());function pDt(e,t,r){var n=0;return Ui.default.Children.map(e,function(i){return Ui.default.isValidElement(i)?t.call(r,i,n++):i})}function dDt(e,t,r){var n=0;Ui.default.Children.forEach(e,function(i){Ui.default.isValidElement(i)&&t.call(r,i,n++)})}function vDt(e){var t=0;return Ui.default.Children.forEach(e,function(r){Ui.default.isValidElement(r)&&++t}),t}function mDt(e,t,r){var n=0,i=[];return Ui.default.Children.forEach(e,function(a){Ui.default.isValidElement(a)&&t.call(r,a,n++)&&i.push(a)}),i}function gDt(e,t,r){var n=0,i;return Ui.default.Children.forEach(e,function(a){i||Ui.default.isValidElement(a)&&t.call(r,a,n++)&&(i=a)}),i}function yDt(e,t,r){var n=0,i=!0;return Ui.default.Children.forEach(e,function(a){i&&Ui.default.isValidElement(a)&&(t.call(r,a,n++)||(i=!1))}),i}function _Dt(e,t,r){var n=0,i=!1;return Ui.default.Children.forEach(e,function(a){i||Ui.default.isValidElement(a)&&t.call(r,a,n++)&&(i=!0)}),i}function xDt(e){var t=[];return Ui.default.Children.forEach(e,function(r){Ui.default.isValidElement(r)&&t.push(r)}),t}var qp={map:pDt,forEach:dDt,count:vDt,find:gDt,filter:mDt,every:yDt,some:_Dt,toArray:xDt};var zC=De(zr()),g4=De(s1());var y_r=zC.default.oneOfType([zC.default.string,zC.default.number]);function xSe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,g4.default)(function(n,i,a){var h;return t.every(function(p){return qp.some(n.children,function(g){return g.props.bsRole===p})?!0:(h=p,!1)}),h?new Error("(children) "+a+" - Missing a required child with bsRole: "+(h+". "+a+" must have at least one child of each of ")+("the following bsRoles: "+t.join(", "))):null})}function bSe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,g4.default)(function(n,i,a){var h;return t.every(function(p){var g=qp.filter(n.children,function(w){return w.props.bsRole===p});return g.length>1?(h=p,!1):!0}),h?new Error("(children) "+a+" - Duplicate children detected of bsRole: "+(h+". Only one child each allowed with the following ")+("bsRoles: "+t.join(", "))):null})}var y4=De(zr()),u1=De(Xt()),EDt={label:y4.default.string.isRequired,onClick:y4.default.func},SDt={label:"Close"},_4=function(e){mr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.label,h=i.onClick;return u1.default.createElement("button",{type:"button",className:"close",onClick:h},u1.default.createElement("span",{"aria-hidden":"true"},"\xD7"),u1.default.createElement("span",{className:"sr-only"},a))},t}(u1.default.Component);_4.propTypes=EDt;_4.defaultProps=SDt;var ASe=_4;function Sr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E4=De(Xt()),Ql=De(zr()),kSe=De(Jl());function kDt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(n){return n!=null}).reduce(function(n,i){if(typeof i!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return n===null?i:function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];n.apply(this,p),i.apply(this,p)}},null)}var ei=kDt;var NDt={href:Ql.default.string,onClick:Ql.default.func,onKeyDown:Ql.default.func,disabled:Ql.default.bool,role:Ql.default.string,tabIndex:Ql.default.oneOfType([Ql.default.number,Ql.default.string]),componentClass:kSe.default},FDt={componentClass:"a"};function LSe(e){return!e||e.trim()==="#"}var S4=function(e){mr(t,e);function t(n,i){var a;return a=e.call(this,n,i)||this,a.handleClick=a.handleClick.bind(Sr(Sr(a))),a.handleKeyDown=a.handleKeyDown.bind(Sr(Sr(a))),a}var r=t.prototype;return r.handleClick=function(i){var a=this.props,h=a.disabled,p=a.href,g=a.onClick;if((h||LSe(p))&&i.preventDefault(),h){i.stopPropagation();return}g&&g(i)},r.handleKeyDown=function(i){i.key===" "&&(i.preventDefault(),this.handleClick(i))},r.render=function(){var i=this.props,a=i.componentClass,h=i.disabled,p=i.onKeyDown,g=gr(i,["componentClass","disabled","onKeyDown"]);return LSe(g.href)&&(g.role=g.role||"button",g.href=g.href||"#"),h&&(g.tabIndex=-1,g.style=bt({pointerEvents:"none"},g.style)),E4.default.createElement(a,bt({},g,{onClick:this.handleClick,onKeyDown:ei(this.handleKeyDown,p)}))},t}(E4.default.Component);S4.propTypes=NDt;S4.defaultProps=FDt;var Jm=S4;var NSe=De(CSe());var T4=De(po()),YC=De(Xt()),Pp=De(zr()),FSe=De(Jl());var zDt={active:Pp.default.bool,disabled:Pp.default.bool,block:Pp.default.bool,onClick:Pp.default.func,componentClass:FSe.default,href:Pp.default.string,type:Pp.default.oneOf(["button","reset","submit"])},jDt={active:!1,block:!1,disabled:!1},I4=function(e){mr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.renderAnchor=function(i,a){return YC.default.createElement(Jm,bt({},i,{className:(0,T4.default)(a,i.disabled&&"disabled")}))},r.renderButton=function(i,a){var h=i.componentClass,p=gr(i,["componentClass"]),g=h||"button";return YC.default.createElement(g,bt({},p,{type:p.type||"button",className:a}))},r.render=function(){var i,a=this.props,h=a.active,p=a.block,g=a.className,w=gr(a,["active","block","className"]),E=vo(w),q=E[0],P=E[1],k=bt({},pa(q),(i={active:h},i[pn(q,"block")]=p,i)),W=(0,T4.default)(g,k);return P.href?this.renderAnchor(P,W):this.renderButton(P,W)},t}(YC.default.Component);I4.propTypes=zDt;I4.defaultProps=jDt;var Kh=dn("btn",Ym([Vu.LARGE,Vu.SMALL,Vu.XSMALL],mSe((0,NSe.default)(dSe).concat([o1.DEFAULT,o1.PRIMARY,o1.LINK]),o1.DEFAULT,I4)));var jSe=De(po()),C4=De(Xt()),eA=De(zr()),BSe=De(QC());var GDt={vertical:eA.default.bool,justified:eA.default.bool,block:(0,BSe.default)(eA.default.bool,function(e){var t=e.block,r=e.vertical;return t&&!r?new Error("`block` requires `vertical` to be set to have any effect"):null})},WDt={block:!1,justified:!1,vertical:!1},A4=function(e){mr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i,a=this.props,h=a.block,p=a.justified,g=a.vertical,w=a.className,E=gr(a,["block","justified","vertical","className"]),q=vo(E),P=q[0],k=q[1],W=bt({},pa(P),(i={},i[pn(P)]=!g,i[pn(P,"vertical")]=g,i[pn(P,"justified")]=p,i[pn(Kh.defaultProps,"block")]=h,i));return C4.default.createElement("div",bt({},k,{className:(0,jSe.default)(w,W)}))},t}(C4.default.Component);A4.propTypes=GDt;A4.defaultProps=WDt;var USe=dn("btn-group",A4);var AIe=De(po()),qIe=De(z4()),PIe=De(v1()),TA=De(B4()),ng=De(Xt()),La=De(zr()),nU=De(rs()),MIe=De(QC()),OIe=De(Jl()),RIe=De(ETe());var U0r=De(q4());var EIe=De(fIe());var SIe=De(po()),x1=De(B4()),b1=De(Xt()),tc=De(zr()),TIe=De(rs()),IIe=De(wIe());var tNt={open:tc.default.bool,pullRight:tc.default.bool,onClose:tc.default.func,labelledBy:tc.default.oneOfType([tc.default.string,tc.default.number]),onSelect:tc.default.func,rootCloseEvent:tc.default.oneOf(["click","mousedown"])},rNt={bsRole:"menu",pullRight:!1},Q4=function(e){mr(t,e);function t(n){var i;return i=e.call(this,n)||this,i.handleRootClose=i.handleRootClose.bind(Sr(Sr(i))),i.handleKeyDown=i.handleKeyDown.bind(Sr(Sr(i))),i}var r=t.prototype;return r.getFocusableMenuItems=function(){var i=TIe.default.findDOMNode(this);return i?(0,EIe.default)(i.querySelectorAll("[tabIndex=\"-1\"]")):[]},r.getItemsAndActiveIndex=function(){var i=this.getFocusableMenuItems(),a=i.indexOf(document.activeElement);return{items:i,activeIndex:a}},r.focusNext=function(){var i=this.getItemsAndActiveIndex(),a=i.items,h=i.activeIndex;if(a.length!==0){var p=h===a.length-1?0:h+1;a[p].focus()}},r.focusPrevious=function(){var i=this.getItemsAndActiveIndex(),a=i.items,h=i.activeIndex;if(a.length!==0){var p=h===0?a.length-1:h-1;a[p].focus()}},r.handleKeyDown=function(i){switch(i.keyCode){case x1.default.codes.down:this.focusNext(),i.preventDefault();break;case x1.default.codes.up:this.focusPrevious(),i.preventDefault();break;case x1.default.codes.esc:case x1.default.codes.tab:this.props.onClose(i,{source:"keydown"});break;default:}},r.handleRootClose=function(i){this.props.onClose(i,{source:"rootClose"})},r.render=function(){var i,a=this,h=this.props,p=h.open,g=h.pullRight,w=h.labelledBy,E=h.onSelect,q=h.className,P=h.rootCloseEvent,k=h.children,W=gr(h,["open","pullRight","labelledBy","onSelect","className","rootCloseEvent","children"]),Q=NC(W,["onClose"]),$=Q[0],V=Q[1],Z=bt({},pa($),(i={},i[pn($,"right")]=g,i));return b1.default.createElement(IIe.default,{disabled:!p,onRootClose:this.handleRootClose,event:P},b1.default.createElement("ul",bt({},V,{role:"menu",className:(0,SIe.default)(q,Z),"aria-labelledby":w}),qp.map(k,function(te){return b1.default.cloneElement(te,{onKeyDown:ei(te.props.onKeyDown,a.handleKeyDown),onSelect:ei(te.props.onSelect,E)})})))},t}(b1.default.Component);Q4.propTypes=tNt;Q4.defaultProps=rNt;var eU=dn("dropdown-menu",Q4);var SA=De(Xt()),w1=De(zr()),CIe=De(po());var nNt={noCaret:w1.default.bool,open:w1.default.bool,title:w1.default.string,useAnchor:w1.default.bool},iNt={open:!1,useAnchor:!1,bsRole:"toggle"},tU=function(e){mr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.noCaret,h=i.open,p=i.useAnchor,g=i.bsClass,w=i.className,E=i.children,q=gr(i,["noCaret","open","useAnchor","bsClass","className","children"]);delete q.bsRole;var P=p?Jm:Kh,k=!a;return SA.default.createElement(P,bt({},q,{role:"button",className:(0,CIe.default)(w,g),"aria-haspopup":!0,"aria-expanded":h}),E||q.title,k&&" ",k&&SA.default.createElement("span",{className:"caret"}))},t}(SA.default.Component);tU.propTypes=nNt;tU.defaultProps=iNt;var rU=dn("dropdown-toggle",tU);var DIe=rU.defaultProps.bsRole,iU=eU.defaultProps.bsRole,aNt={dropup:La.default.bool,id:(0,RIe.default)(La.default.oneOfType([La.default.string,La.default.number])),componentClass:OIe.default,children:(0,MIe.default)(xSe(DIe,iU),bSe(iU)),disabled:La.default.bool,pullRight:La.default.bool,open:La.default.bool,defaultOpen:La.default.bool,onToggle:La.default.func,onSelect:La.default.func,role:La.default.string,rootCloseEvent:La.default.oneOf(["click","mousedown"]),onMouseEnter:La.default.func,onMouseLeave:La.default.func},oNt={componentClass:USe},IA=function(e){mr(t,e);function t(n,i){var a;return a=e.call(this,n,i)||this,a.handleClick=a.handleClick.bind(Sr(Sr(a))),a.handleKeyDown=a.handleKeyDown.bind(Sr(Sr(a))),a.handleClose=a.handleClose.bind(Sr(Sr(a))),a._focusInDropdown=!1,a.lastOpenEventType=null,a}var r=t.prototype;return r.componentDidMount=function(){this.focusNextOnOpen()},r.UNSAFE_componentWillUpdate=function(i){!i.open&&this.props.open&&(this._focusInDropdown=(0,PIe.default)(nU.default.findDOMNode(this.menu),(0,qIe.default)(document)))},r.componentDidUpdate=function(i){var a=this.props.open,h=i.open;a&&!h&&this.focusNextOnOpen(),!a&&h&&this._focusInDropdown&&(this._focusInDropdown=!1,this.focus())},r.focus=function(){var i=nU.default.findDOMNode(this.toggle);i&&i.focus&&i.focus()},r.focusNextOnOpen=function(){var i=this.menu;!i||!i.focusNext||(this.lastOpenEventType==="keydown"||this.props.role==="menuitem")&&i.focusNext()},r.handleClick=function(i){this.props.disabled||this.toggleOpen(i,{source:"click"})},r.handleClose=function(i,a){this.props.open&&this.toggleOpen(i,a)},r.handleKeyDown=function(i){if(!this.props.disabled)switch(i.keyCode){case TA.default.codes.down:this.props.open?this.menu.focusNext&&this.menu.focusNext():this.toggleOpen(i,{source:"keydown"}),i.preventDefault();break;case TA.default.codes.esc:case TA.default.codes.tab:this.handleClose(i,{source:"keydown"});break;default:}},r.toggleOpen=function(i,a){var h=!this.props.open;h&&(this.lastOpenEventType=a.source),this.props.onToggle&&this.props.onToggle(h,i,a)},r.renderMenu=function(i,a){var h=this,p=a.id,g=a.onSelect,w=a.rootCloseEvent,E=gr(a,["id","onSelect","rootCloseEvent"]),q=function(k){h.menu=k};return typeof i.ref=="string"||(q=ei(i.ref,q)),(0,ng.cloneElement)(i,bt({},E,{ref:q,labelledBy:p,bsClass:pn(E,"menu"),onClose:ei(i.props.onClose,this.handleClose),onSelect:ei(i.props.onSelect,g,function(P,k){return h.handleClose(k,{source:"select"})}),rootCloseEvent:w}))},r.renderToggle=function(i,a){var h=this,p=function(w){h.toggle=w};return typeof i.ref=="string"||(p=ei(i.ref,p)),(0,ng.cloneElement)(i,bt({},a,{ref:p,bsClass:pn(a,"toggle"),onClick:ei(i.props.onClick,this.handleClick),onKeyDown:ei(i.props.onKeyDown,this.handleKeyDown)}))},r.render=function(){var i,a=this,h=this.props,p=h.componentClass,g=h.id,w=h.dropup,E=h.disabled,q=h.pullRight,P=h.open,k=h.onSelect,W=h.role,Q=h.bsClass,$=h.className,V=h.rootCloseEvent,Z=h.children,te=gr(h,["componentClass","id","dropup","disabled","pullRight","open","onSelect","role","bsClass","className","rootCloseEvent","children"]);delete te.onToggle;var se=(i={},i[Q]=!0,i.open=P,i.disabled=E,i);return w&&(se[Q]=!1,se.dropup=!0),ng.default.createElement(p,bt({},te,{className:(0,AIe.default)($,se)}),qp.map(Z,function(Ie){switch(Ie.props.bsRole){case DIe:return a.renderToggle(Ie,{id:g,disabled:E,open:P,role:W,bsClass:Q});case iU:return a.renderMenu(Ie,{id:g,open:P,pullRight:q,bsClass:Q,onSelect:k,rootCloseEvent:V});default:return Ie;}}))},t}(ng.default.Component);IA.propTypes=aNt;IA.defaultProps=oNt;dn("dropdown",IA);var aU=a1(IA,{open:"onToggle"});aU.Toggle=rU;aU.Menu=eU;var ig=aU;var S1=De(Xt()),ag=De(zr());var LIe=De(p4());function E1(e,t){var r=t.propTypes,n={},i={};return(0,LIe.default)(e).forEach(function(a){var h=a[0],p=a[1];r[h]?n[h]=p:i[h]=p}),[n,i]}var sNt=bt({},ig.propTypes,{bsStyle:ag.default.string,bsSize:ag.default.string,title:ag.default.node.isRequired,noCaret:ag.default.bool,children:ag.default.node}),kIe=function(e){mr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.bsSize,h=i.bsStyle,p=i.title,g=i.children,w=gr(i,["bsSize","bsStyle","title","children"]),E=E1(w,ig.ControlledComponent),q=E[0],P=E[1];return S1.default.createElement(ig,bt({},q,{bsSize:a,bsStyle:h}),S1.default.createElement(ig.Toggle,bt({},P,{bsSize:a,bsStyle:h}),p),S1.default.createElement(ig.Menu,null,g))},t}(S1.default.Component);kIe.propTypes=sNt;var oU=kIe;var NIe=De(po()),AA=De(Xt()),bs=De(zr()),og=De(dTe()),CA,uNt={in:bs.default.bool,mountOnEnter:bs.default.bool,unmountOnExit:bs.default.bool,appear:bs.default.bool,timeout:bs.default.number,onEnter:bs.default.func,onEntering:bs.default.func,onEntered:bs.default.func,onExit:bs.default.func,onExiting:bs.default.func,onExited:bs.default.func},lNt={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},cNt=(CA={},CA[og.ENTERING]="in",CA[og.ENTERED]="in",CA),sU=function(e){mr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.className,h=i.children,p=gr(i,["className","children"]);return AA.default.createElement(og.default,p,function(g,w){return AA.default.cloneElement(h,bt({},w,{className:(0,NIe.default)("fade",a,h.props.className,cNt[g])}))})},t}(AA.default.Component);sU.propTypes=uNt;sU.defaultProps=lNt;var uU=sU;var qA=De(po()),sg=De(Xt()),rc=De(zr()),FIe=De(QC());var hNt={active:rc.default.bool,disabled:rc.default.bool,divider:(0,FIe.default)(rc.default.bool,function(e){var t=e.divider,r=e.children;return t&&r?new Error("Children will not be rendered for dividers"):null}),eventKey:rc.default.any,header:rc.default.bool,href:rc.default.string,onClick:rc.default.func,onSelect:rc.default.func},fNt={divider:!1,disabled:!1,header:!1},lU=function(e){mr(t,e);function t(n,i){var a;return a=e.call(this,n,i)||this,a.handleClick=a.handleClick.bind(Sr(Sr(a))),a}var r=t.prototype;return r.handleClick=function(i){var a=this.props,h=a.href,p=a.disabled,g=a.onSelect,w=a.eventKey;(!h||p)&&i.preventDefault(),!p&&g&&g(w,i)},r.render=function(){var i=this.props,a=i.active,h=i.disabled,p=i.divider,g=i.header,w=i.onClick,E=i.className,q=i.style,P=gr(i,["active","disabled","divider","header","onClick","className","style"]),k=NC(P,["eventKey","onSelect"]),W=k[0],Q=k[1];return p?(Q.children=void 0,sg.default.createElement("li",bt({},Q,{role:"separator",className:(0,qA.default)(E,"divider"),style:q}))):g?sg.default.createElement("li",bt({},Q,{role:"heading",className:(0,qA.default)(E,pn(W,"header")),style:q})):sg.default.createElement("li",{role:"presentation",className:(0,qA.default)(E,{active:a,disabled:h}),style:q},sg.default.createElement(Jm,bt({},Q,{role:"menuitem",tabIndex:"-1",onClick:ei(w,this.handleClick)})))},t}(sg.default.Component);lU.propTypes=hNt;lU.defaultProps=fNt;var cU=dn("dropdown",lU);var DU=De(po()),LU=De(YIe()),vAe=De(p1()),mAe=De($u()),kU=De(pU()),cg=De(Xt()),wi=De(zr()),gAe=De(rs()),hg=De(tAe()),yAe=De(gU()),_Ae=De(Jl());var rAe=De(po()),CU=De(Xt()),nAe=De(Jl());var Ezt={componentClass:nAe.default},Szt={componentClass:"div"},AU=function(e){mr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.componentClass,h=i.className,p=gr(i,["componentClass","className"]),g=vo(p),w=g[0],E=g[1],q=pa(w);return CU.default.createElement(a,bt({},E,{className:(0,rAe.default)(h,q)}))},t}(CU.default.Component);AU.propTypes=Ezt;AU.defaultProps=Szt;var iAe=dn("modal-body",AU);var qU=De(po()),C1=De(Xt()),aAe=De(zr());var Tzt={dialogClassName:aAe.default.string},oAe=function(e){mr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i,a=this.props,h=a.dialogClassName,p=a.className,g=a.style,w=a.children,E=a.onMouseDownDialog,q=gr(a,["dialogClassName","className","style","children","onMouseDownDialog"]),P=vo(q),k=P[0],W=P[1],Q=pn(k),$=bt({display:"block"},g),V=bt({},pa(k),(i={},i[Q]=!1,i[pn(k,"dialog")]=!0,i));return C1.default.createElement("div",bt({},W,{tabIndex:"-1",role:"dialog",style:$,className:(0,qU.default)(p,Q)}),C1.default.createElement("div",{className:(0,qU.default)(h,V),onMouseDown:E},C1.default.createElement("div",{className:pn(k,"content"),role:"document"},w)))},t}(C1.default.Component);oAe.propTypes=Tzt;var JA=dn("modal",Ym([Vu.LARGE,Vu.SMALL],oAe));var sAe=De(po()),PU=De(Xt()),uAe=De(Jl());var Izt={componentClass:uAe.default},Czt={componentClass:"div"},MU=function(e){mr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.componentClass,h=i.className,p=gr(i,["componentClass","className"]),g=vo(p),w=g[0],E=g[1],q=pa(w);return PU.default.createElement(a,bt({},E,{className:(0,sAe.default)(h,q)}))},t}(PU.default.Component);MU.propTypes=Izt;MU.defaultProps=Czt;var lAe=dn("modal-footer",MU);var cAe=De(po()),lg=De(zr()),QA=De(Xt());var Azt={closeLabel:lg.default.string,closeButton:lg.default.bool,onHide:lg.default.func},qzt={closeLabel:"Close",closeButton:!1},Pzt={$bs_modal:lg.default.shape({onHide:lg.default.func})},eq=function(e){mr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.closeLabel,h=i.closeButton,p=i.onHide,g=i.className,w=i.children,E=gr(i,["closeLabel","closeButton","onHide","className","children"]),q=this.context.$bs_modal,P=vo(E),k=P[0],W=P[1],Q=pa(k);return QA.default.createElement("div",bt({},W,{className:(0,cAe.default)(g,Q)}),h&&QA.default.createElement(ASe,{label:a,onClick:ei(q&&q.onHide,p)}),w)},t}(QA.default.Component);eq.propTypes=Azt;eq.defaultProps=qzt;eq.contextTypes=Pzt;var hAe=dn("modal-header",eq);var fAe=De(po()),OU=De(Xt()),pAe=De(Jl());var Mzt={componentClass:pAe.default},Ozt={componentClass:"h4"},RU=function(e){mr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.componentClass,h=i.className,p=gr(i,["componentClass","className"]),g=vo(p),w=g[0],E=g[1],q=pa(w);return OU.default.createElement(a,bt({},E,{className:(0,fAe.default)(h,q)}))},t}(OU.default.Component);RU.propTypes=Mzt;RU.defaultProps=Ozt;var dAe=dn("modal-title",RU);var Rzt=bt({},hg.default.propTypes,JA.propTypes,{backdrop:wi.default.oneOf(["static",!0,!1]),backdropClassName:wi.default.string,keyboard:wi.default.bool,animation:wi.default.bool,dialogComponentClass:_Ae.default,autoFocus:wi.default.bool,enforceFocus:wi.default.bool,restoreFocus:wi.default.bool,show:wi.default.bool,onHide:wi.default.func,onEnter:wi.default.func,onEntering:wi.default.func,onEntered:wi.default.func,onExit:wi.default.func,onExiting:wi.default.func,onExited:wi.default.func,container:hg.default.propTypes.container}),Dzt=bt({},hg.default.defaultProps,{animation:!0,dialogComponentClass:JA}),Lzt={$bs_modal:wi.default.shape({onHide:wi.default.func})};function kzt(e){return cg.default.createElement(uU,bt({},e,{timeout:Fo.TRANSITION_DURATION}))}function Nzt(e){return cg.default.createElement(uU,bt({},e,{timeout:Fo.BACKDROP_TRANSITION_DURATION}))}var Fo=function(e){mr(t,e);function t(n,i){var a;return a=e.call(this,n,i)||this,a.handleDialogBackdropMouseDown=function(){a._waitingForMouseUp=!0},a.handleMouseUp=function(h){var p=a._modal.getDialogElement();a._waitingForMouseUp&&h.target===p&&(a._ignoreBackdropClick=!0),a._waitingForMouseUp=!1},a.handleEntering=a.handleEntering.bind(Sr(Sr(a))),a.handleExited=a.handleExited.bind(Sr(Sr(a))),a.handleWindowResize=a.handleWindowResize.bind(Sr(Sr(a))),a.handleDialogClick=a.handleDialogClick.bind(Sr(Sr(a))),a.setModalRef=a.setModalRef.bind(Sr(Sr(a))),a.state={style:{}},a}var r=t.prototype;return r.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},r.componentWillUnmount=function(){this.handleExited()},r.setModalRef=function(i){this._modal=i},r.handleDialogClick=function(i){if(this._ignoreBackdropClick||i.target!==i.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},r.handleEntering=function(){LU.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},r.handleExited=function(){LU.default.off(window,"resize",this.handleWindowResize)},r.handleWindowResize=function(){this.updateStyle()},r.updateStyle=function(){if(mAe.default){var i=this._modal.getDialogElement(),a=i.scrollHeight,h=(0,vAe.default)(i),p=(0,yAe.default)(gAe.default.findDOMNode(this.props.container||h.body)),g=a>h.documentElement.clientHeight;this.setState({style:{paddingRight:p&&!g?(0,kU.default)():void 0,paddingLeft:!p&&g?(0,kU.default)():void 0}})}},r.render=function(){var i=this.props,a=i.backdrop,h=i.backdropClassName,p=i.animation,g=i.show,w=i.dialogComponentClass,E=i.className,q=i.style,P=i.children,k=i.onEntering,W=i.onExited,Q=gr(i,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),$=E1(Q,hg.default),V=$[0],Z=$[1],te=g&&!p&&"in";return cg.default.createElement(hg.default,bt({},V,{ref:this.setModalRef,show:g,containerClassName:pn(Q,"open"),transition:p?kzt:void 0,backdrop:a,backdropTransition:p?Nzt:void 0,backdropClassName:(0,DU.default)(pn(Q,"backdrop"),h,te),onEntering:ei(k,this.handleEntering),onExited:ei(W,this.handleExited),onMouseUp:this.handleMouseUp}),cg.default.createElement(w,bt({},Z,{style:bt({},this.state.style,q),className:(0,DU.default)(E,te),onClick:a===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),P))},t}(cg.default.Component);Fo.propTypes=Rzt;Fo.defaultProps=Dzt;Fo.childContextTypes=Lzt;Fo.Body=iAe;Fo.Header=hAe;Fo.Title=dAe;Fo.Footer=lAe;Fo.Dialog=JA;Fo.TRANSITION_DURATION=300;Fo.BACKDROP_TRANSITION_DURATION=150;var Lp=dn("modal",Ym([Vu.LARGE,Vu.SMALL],Fo));var Vn=De(zr(),1);function xAe(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=xAe(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function Fzt(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=xAe(e))&&(n&&(n+=" "),n+=t);return n}var tq=Fzt;var _n=De(Xt(),1);var A1=De(zr(),1);var NU=[{id:"comment-1",text:"Ungenauigkeit"},{id:"comment-2",text:"Falsche Parameter"},{id:"comment-3",text:"Falsche Kartennummer"},{id:"comment-4",text:"Schlechte Genauigkeit des Originals"},{id:"others",text:"Andere Begr\xFCndung:"}],bAe=e=>{let{onClose:t,onSubmit:r,transformationId:n,validationValue:i}=e,[a,h]=(0,_n.useState)(NU[0].id),[p,g]=(0,_n.useState)(""),w=k=>{h(k.target.value)},E=()=>{t()},q=()=>{r({comment:a!=="others"?NU.find(k=>k.id===a).text:p,transformationId:n,validationValue:i})},P=k=>{g(k.target.value)};return _n.default.createElement("div",{className:"vkf-dialog-jobs-validation"},_n.default.createElement(Lp,{className:"vkf-dialog-jobs-validation",show:!0,onHide:E},_n.default.createElement(Lp.Header,null,_n.default.createElement(Lp.Title,null,"Setze validation=\"",i,"\""," ")),_n.default.createElement(Lp.Body,null,_n.default.createElement("div",{className:"dialog-content"},_n.default.createElement("p",null,"Soll der Validierungsstatus f\xFCr die Transformation mit der ID"," ",n," auf \"",i,"\" gesetzt werden.",i==="invalid"?"F\xFCr invalide Transformationen geben Sie bitte eine Begr\xFCndung mit an.":""),i==="invalid"&&_n.default.createElement(_n.default.Fragment,null,_n.default.createElement("br",null),_n.default.createElement("p",null,"Begr\xFCndung:"),NU.map((k,W)=>_n.default.createElement("div",{className:"radio",key:W},_n.default.createElement("label",null,_n.default.createElement("input",{type:"radio",name:k.id,id:k.id,value:k.id,checked:k.id===a,onChange:w})," ",k.text))),_n.default.createElement("br",null),_n.default.createElement("textarea",{className:"form-control",rows:"3",disabled:a!=="others",onChange:P})))),_n.default.createElement(Lp.Footer,null,_n.default.createElement(Kh,{onClick:E},"Abbrechen"),_n.default.createElement(Kh,{onClick:q,bsStyle:"primary"},"Save changes"))))};bAe.propTypes={onClose:A1.default.func.isRequired,onSubmit:A1.default.func.isRequired,transformationId:A1.default.any.isRequired,validationValue:A1.default.string.isRequired};var wAe=bAe;var EAe=["missing","valid","invalid"],SAe=e=>e==="missing"?"warning":e==="valid"?"success":"danger";function TAe({validation:e,onSelect:t}){return Jt.default.createElement(oU,{id:"validation-button",pullRight:!0,className:"btn-validation",bsStyle:SAe(e),title:`Validation: ${e}`,key:e},["valid","invalid"].map(r=>Jt.default.createElement(cU,{key:r,onClick:()=>t(r)},"Setze Validation auf \"",r,"\"")))}TAe.propTypes={validation:Vn.default.oneOf(EAe).isRequired,onSelect:Vn.default.func.isRequired};var IAe=e=>{let{isActive:t=!1,className:r="",data:n,onClickPreview:i=()=>console.log("The function onClickPreview is not passed to component TransformationItem.")}=e,{is_active:a,clip:h,params:p,map_id:g,metadata:w,submitted:E,transformation_id:q,user_id:P,validation:k}=n,W=sa.getSettings().LINK_TO_GEOREFERENCE,[Q,$]=(0,Jt.useState)(k),[V,Z]=(0,Jt.useState)(!1),[te,se]=(0,Jt.useState)(null),Ie=(Ae,Ue)=>{Ue!==Q&&se({transformationId:Ae,validationValue:Ue})},qe=Ae=>{let Ue={name:Ae.validationValue==="valid"?"transformation_set_valid":"transformation_set_invalid",description:{comment:Ae.comment,transformation_id:Ae.transformationId}};$(Ae.validationValue),se(null),_we(Ue)};return Jt.default.createElement("div",{className:tq("vkf-transformation-item panel panel-default",t?"preview-on":"",r)},Jt.default.createElement("div",{className:"panel-heading"},w.title_short,Jt.default.createElement("span",{className:tq("state-signal",SAe(Q))})),Jt.default.createElement("div",{className:"panel-body"},Jt.default.createElement("p",null,Jt.default.createElement("strong",null,"Transformation-ID:")," ",q),Jt.default.createElement("p",null,Jt.default.createElement("strong",null,"Karten-ID:")," ",g),Jt.default.createElement("p",null,Jt.default.createElement("strong",null,"Aktiv:")," ",a?"Ja":"Nein"),Jt.default.createElement("p",null,Jt.default.createElement("strong",null,"Erstellt von:")," ",P),Jt.default.createElement("p",null,Jt.default.createElement("strong",null,"Erstellt am:")," ",E),Jt.default.createElement("div",{className:tq("georef-params",V?"all":"")},Jt.default.createElement("p",null,Jt.default.createElement("strong",null,"Parameter:")," ",V?"":"..."),Jt.default.createElement("div",null,Jt.default.createElement("p",null,"Passpunkte"),Jt.default.createElement("p",null,JSON.stringify(p,null,2)),Jt.default.createElement("br",null),Jt.default.createElement("p",null,"Clip-Polygon"),Jt.default.createElement("p",null,JSON.stringify(h,null,2)),Jt.default.createElement("br",null),Jt.default.createElement("a",{href:`${W}?transformation_id=${q}&map_id=${g}`,target:"_blank",rel:"noreferrer",className:"btn btn-default btn-georef"},Jt.default.createElement("span",{className:"icon"})," Gehe zu Georeferenzierung")))),Jt.default.createElement("div",{className:"panel-footer"},Jt.default.createElement("button",{className:"btn btn-default",onClick:()=>i(n)},"Zeige Preview"),Jt.default.createElement("button",{className:"btn btn-default",onClick:()=>Z(!V)},V?"Schlie\xDFe Parameter":"Zeige Parameter"),Jt.default.createElement(TAe,{validation:Q,onSelect:Ae=>Ie(q,Ae)})),te!==null&&Jt.default.createElement(wAe,{onSubmit:qe,onClose:()=>se(null),transformationId:te.transformationId,validationValue:te.validationValue}))};IAe.propTypes={isActive:Vn.default.bool,className:Vn.default.string,data:Vn.default.shape({is_active:Vn.default.bool,clip:Vn.default.object,overwrites:Vn.default.number.isRequired,params:Vn.default.object.isRequired,submitted:Vn.default.string.isRequired,transformation_id:Vn.default.number.isRequired,user_id:Vn.default.string.isRequired,map_id:Vn.default.string.isRequired,metadata:Vn.default.shape({time_publish:Vn.default.string.isRequired,title:Vn.default.string.isRequired,title_short:Vn.default.string.isRequired}),validation:Vn.default.oneOf(EAe).isRequired}).isRequired,onClickPreview:Vn.default.func};var CAe=IAe;var zzt=()=>{let[e,t]=(0,qn.useState)([]),[r,n]=(0,qn.useState)(null),[i,a]=(0,qn.useState)(null),[h,p]=(0,qn.useState)(!1),g=w=>Ga(void 0,null,function*(){if(!h){p(!0);let E=yield xwe(w.transformation_id);n(Object.assign(E,{transformation_id:w.transformation_id})),p(!1)}});return(0,qn.useEffect)(()=>{if(r!==null&&i!==null){let w=zh(r.extent,"EPSG:4326",i.map.getView().getProjection());i.map.getView().fit(w,{padding:[100,100,100,100]})}},[r,i]),qn.default.createElement("div",{className:"vkf-admin-evaluation"},qn.default.createElement("h1",null,"Willkommen auf der Evaluierungsseite #",sa.getUsername()),qn.default.createElement("p",null,"Die Evaluierungsseite bietet Ihnen die M\xF6glichkeit bestehende Transformationen zu validieren und ggf. zur\xFCckzusetzen. Sie k\xF6nnen Transformationen nach unterschiedlichen Kriterien ausw\xE4hlen."),qn.default.createElement(Pwe,{onChangeTransformations:t}),qn.default.createElement("div",{className:"content"},qn.default.createElement("div",{className:"row"},qn.default.createElement("div",{className:"col-sm-6 col-md-6 col-lg-6 view-col"},qn.default.createElement("div",null,e.map(w=>qn.default.createElement(CAe,{isActive:r!==null&&r.transformation_id===w.transformation_id,key:w.transformation_id,data:w,onClickPreview:g})))),qn.default.createElement("div",{className:"col-sm-6 col-md-6 col-lg-6 view-col"},qn.default.createElement("div",{className:"custom-map-container"},qn.default.createElement(pwe,{extent:null,onLoad:w=>a(w),urlsOsmBaseMap:sa.getDefaultBaseMapUrls(),urlNominatim:sa.getNominatimUrl()}),r!==null&&i!==null&&qn.default.createElement(Swe,{key:r.wms_url,map:i.map,layerName:r.layer_name,wmsUrl:r.wms_url}),h&&qn.default.createElement(vwe,null))))))},AAe=zzt;var jzt=sa;function Bzt(e){PAe.default.render(qAe.default.createElement(AAe,null),e)}return MPe(Uzt)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

keycode/index.js:
  (*!
   * Programatically add the following
   *)
*/