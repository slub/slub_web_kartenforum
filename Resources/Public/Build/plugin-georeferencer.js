var vk2=(()=>{var p$e=Object.create;var Jb=Object.defineProperty,d$e=Object.defineProperties,m$e=Object.getOwnPropertyDescriptor,g$e=Object.getOwnPropertyDescriptors,v$e=Object.getOwnPropertyNames,VM=Object.getOwnPropertySymbols,y$e=Object.getPrototypeOf,dj=Object.prototype.hasOwnProperty,wQ=Object.prototype.propertyIsEnumerable;var GM=Math.pow,pj=(r,e,t)=>e in r?Jb(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,xt=(r,e)=>{for(var t in e||(e={}))dj.call(e,t)&&pj(r,t,e[t]);if(VM)for(var t of VM(e))wQ.call(e,t)&&pj(r,t,e[t]);return r},nn=(r,e)=>d$e(r,g$e(e));var Oo=(r,e)=>{var t={};for(var n in r)dj.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&VM)for(var n of VM(r))e.indexOf(n)<0&&wQ.call(r,n)&&(t[n]=r[n]);return t};var A=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),_$e=(r,e)=>{for(var t in e)Jb(r,t,{get:e[t],enumerable:!0})},EQ=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of v$e(e))!dj.call(r,i)&&i!==t&&Jb(r,i,{get:()=>e[i],enumerable:!(n=m$e(e,i))||n.enumerable});return r};var ke=(r,e,t)=>(t=r!=null?p$e(y$e(r)):{},EQ(e||!r||!r.__esModule?Jb(t,"default",{value:r,enumerable:!0}):t,r)),x$e=r=>EQ(Jb({},"__esModule",{value:!0}),r);var go=(r,e,t)=>pj(r,typeof e!="symbol"?e+"":e,t);var vo=(r,e,t)=>new Promise((n,i)=>{var o=p=>{try{c(t.next(p))}catch(g){i(g)}},l=p=>{try{c(t.throw(p))}catch(g){i(g)}},c=p=>p.done?n(p.value):Promise.resolve(p.value).then(o,l);c((t=t.apply(r,e)).next())});var mj=A((rcr,TQ)=>{"use strict";var SQ=Object.getOwnPropertySymbols,b$e=Object.prototype.hasOwnProperty,w$e=Object.prototype.propertyIsEnumerable;function E$e(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function S$e(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch(o){return!1}}TQ.exports=S$e()?Object.assign:function(r,e){for(var t,n=E$e(r),i,o=1;o<arguments.length;o++){t=Object(arguments[o]);for(var l in t)b$e.call(t,l)&&(n[l]=t[l]);if(SQ){i=SQ(t);for(var c=0;c<i.length;c++)w$e.call(t,i[c])&&(n[i[c]]=t[i[c]])}}return n}});var BQ=A(yn=>{"use strict";var vj=mj(),my=60103,AQ=60106;yn.Fragment=60107;yn.StrictMode=60108;yn.Profiler=60114;var CQ=60109,PQ=60110,RQ=60112;yn.Suspense=60113;var OQ=60115,LQ=60116;typeof Symbol=="function"&&Symbol.for&&(Nl=Symbol.for,my=Nl("react.element"),AQ=Nl("react.portal"),yn.Fragment=Nl("react.fragment"),yn.StrictMode=Nl("react.strict_mode"),yn.Profiler=Nl("react.profiler"),CQ=Nl("react.provider"),PQ=Nl("react.context"),RQ=Nl("react.forward_ref"),yn.Suspense=Nl("react.suspense"),OQ=Nl("react.memo"),LQ=Nl("react.lazy"));var Nl,IQ=typeof Symbol=="function"&&Symbol.iterator;function T$e(r){return r===null||typeof r!="object"?null:(r=IQ&&r[IQ]||r["@@iterator"],typeof r=="function"?r:null)}function ew(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DQ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},NQ={};function gy(r,e,t){this.props=r,this.context=e,this.refs=NQ,this.updater=t||DQ}gy.prototype.isReactComponent={};gy.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error(ew(85));this.updater.enqueueSetState(this,r,e,"setState")};gy.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function kQ(){}kQ.prototype=gy.prototype;function yj(r,e,t){this.props=r,this.context=e,this.refs=NQ,this.updater=t||DQ}var _j=yj.prototype=new kQ;_j.constructor=yj;vj(_j,gy.prototype);_j.isPureReactComponent=!0;var xj={current:null},qQ=Object.prototype.hasOwnProperty,jQ={key:!0,ref:!0,__self:!0,__source:!0};function FQ(r,e,t){var n,i={},o=null,l=null;if(e!=null)for(n in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)qQ.call(e,n)&&!jQ.hasOwnProperty(n)&&(i[n]=e[n]);var c=arguments.length-2;if(c===1)i.children=t;else if(1<c){for(var p=Array(c),g=0;g<c;g++)p[g]=arguments[g+2];i.children=p}if(r&&r.defaultProps)for(n in c=r.defaultProps,c)i[n]===void 0&&(i[n]=c[n]);return{$$typeof:my,type:r,key:o,ref:l,props:i,_owner:xj.current}}function I$e(r,e){return{$$typeof:my,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function bj(r){return typeof r=="object"&&r!==null&&r.$$typeof===my}function M$e(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var MQ=/\/+/g;function gj(r,e){return typeof r=="object"&&r!==null&&r.key!=null?M$e(""+r.key):e.toString(36)}function HM(r,e,t,n,i){var o=typeof r;(o==="undefined"||o==="boolean")&&(r=null);var l=!1;if(r===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(r.$$typeof){case my:case AQ:l=!0}}if(l)return l=r,i=i(l),r=n===""?"."+gj(l,0):n,Array.isArray(i)?(t="",r!=null&&(t=r.replace(MQ,"$&/")+"/"),HM(i,e,t,"",function(g){return g})):i!=null&&(bj(i)&&(i=I$e(i,t+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(MQ,"$&/")+"/")+r)),e.push(i)),1;if(l=0,n=n===""?".":n+":",Array.isArray(r))for(var c=0;c<r.length;c++){o=r[c];var p=n+gj(o,c);l+=HM(o,e,t,p,i)}else if(p=T$e(r),typeof p=="function")for(r=p.call(r),c=0;!(o=r.next()).done;)o=o.value,p=n+gj(o,c++),l+=HM(o,e,t,p,i);else if(o==="object")throw e=""+r,Error(ew(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e));return l}function $M(r,e,t){if(r==null)return r;var n=[],i=0;return HM(r,n,"","",function(o){return e.call(t,o,i++)}),n}function A$e(r){if(r._status===-1){var e=r._result;e=e(),r._status=0,r._result=e,e.then(function(t){r._status===0&&(t=t.default,r._status=1,r._result=t)},function(t){r._status===0&&(r._status=2,r._result=t)})}if(r._status===1)return r._result;throw r._result}var zQ={current:null};function Bh(){var r=zQ.current;if(r===null)throw Error(ew(321));return r}var C$e={ReactCurrentDispatcher:zQ,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:xj,IsSomeRendererActing:{current:!1},assign:vj};yn.Children={map:$M,forEach:function(r,e,t){$M(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return $M(r,function(){e++}),e},toArray:function(r){return $M(r,function(e){return e})||[]},only:function(r){if(!bj(r))throw Error(ew(143));return r}};yn.Component=gy;yn.PureComponent=yj;yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C$e;yn.cloneElement=function(r,e,t){if(r==null)throw Error(ew(267,r));var n=vj({},r.props),i=r.key,o=r.ref,l=r._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=xj.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var c=r.type.defaultProps;for(p in e)qQ.call(e,p)&&!jQ.hasOwnProperty(p)&&(n[p]=e[p]===void 0&&c!==void 0?c[p]:e[p])}var p=arguments.length-2;if(p===1)n.children=t;else if(1<p){c=Array(p);for(var g=0;g<p;g++)c[g]=arguments[g+2];n.children=c}return{$$typeof:my,type:r.type,key:i,ref:o,props:n,_owner:l}};yn.createContext=function(r,e){return e===void 0&&(e=null),r={$$typeof:PQ,_calculateChangedBits:e,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null},r.Provider={$$typeof:CQ,_context:r},r.Consumer=r};yn.createElement=FQ;yn.createFactory=function(r){var e=FQ.bind(null,r);return e.type=r,e};yn.createRef=function(){return{current:null}};yn.forwardRef=function(r){return{$$typeof:RQ,render:r}};yn.isValidElement=bj;yn.lazy=function(r){return{$$typeof:LQ,_payload:{_status:-1,_result:r},_init:A$e}};yn.memo=function(r,e){return{$$typeof:OQ,type:r,compare:e===void 0?null:e}};yn.useCallback=function(r,e){return Bh().useCallback(r,e)};yn.useContext=function(r,e){return Bh().useContext(r,e)};yn.useDebugValue=function(){};yn.useEffect=function(r,e){return Bh().useEffect(r,e)};yn.useImperativeHandle=function(r,e,t){return Bh().useImperativeHandle(r,e,t)};yn.useLayoutEffect=function(r,e){return Bh().useLayoutEffect(r,e)};yn.useMemo=function(r,e){return Bh().useMemo(r,e)};yn.useReducer=function(r,e,t){return Bh().useReducer(r,e,t)};yn.useRef=function(r){return Bh().useRef(r)};yn.useState=function(r){return Bh().useState(r)};yn.version="17.0.2"});var Et=A((icr,UQ)=>{"use strict";UQ.exports=BQ()});var ZQ=A(An=>{"use strict";var yy,nw,KM,Aj;typeof performance=="object"&&typeof performance.now=="function"?(VQ=performance,An.unstable_now=function(){return VQ.now()}):(wj=Date,GQ=wj.now(),An.unstable_now=function(){return wj.now()-GQ});var VQ,wj,GQ;typeof window=="undefined"||typeof MessageChannel!="function"?(vy=null,Ej=null,Sj=function(){if(vy!==null)try{var r=An.unstable_now();vy(!0,r),vy=null}catch(e){throw setTimeout(Sj,0),e}},yy=function(r){vy!==null?setTimeout(yy,0,r):(vy=r,setTimeout(Sj,0))},nw=function(r,e){Ej=setTimeout(r,e)},KM=function(){clearTimeout(Ej)},An.unstable_shouldYield=function(){return!1},Aj=An.unstable_forceFrameRate=function(){}):($Q=window.setTimeout,HQ=window.clearTimeout,typeof console!="undefined"&&(WQ=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof WQ!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),tw=!1,rw=null,WM=-1,Tj=5,Ij=0,An.unstable_shouldYield=function(){return An.unstable_now()>=Ij},Aj=function(){},An.unstable_forceFrameRate=function(r){0>r||125<r?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Tj=0<r?Math.floor(1e3/r):5},Mj=new MessageChannel,ZM=Mj.port2,Mj.port1.onmessage=function(){if(rw!==null){var r=An.unstable_now();Ij=r+Tj;try{rw(!0,r)?ZM.postMessage(null):(tw=!1,rw=null)}catch(e){throw ZM.postMessage(null),e}}else tw=!1},yy=function(r){rw=r,tw||(tw=!0,ZM.postMessage(null))},nw=function(r,e){WM=$Q(function(){r(An.unstable_now())},e)},KM=function(){HQ(WM),WM=-1});var vy,Ej,Sj,$Q,HQ,WQ,tw,rw,WM,Tj,Ij,Mj,ZM;function Cj(r,e){var t=r.length;r.push(e);e:for(;;){var n=t-1>>>1,i=r[n];if(i!==void 0&&0<YM(i,e))r[n]=e,r[t]=i,t=n;else break e}}function qu(r){return r=r[0],r===void 0?null:r}function XM(r){var e=r[0];if(e!==void 0){var t=r.pop();if(t!==e){r[0]=t;e:for(var n=0,i=r.length;n<i;){var o=2*(n+1)-1,l=r[o],c=o+1,p=r[c];if(l!==void 0&&0>YM(l,t))p!==void 0&&0>YM(p,l)?(r[n]=p,r[c]=t,n=c):(r[n]=l,r[o]=t,n=o);else if(p!==void 0&&0>YM(p,t))r[n]=p,r[c]=t,n=c;else break e}}return e}return null}function YM(r,e){var t=r.sortIndex-e.sortIndex;return t!==0?t:r.id-e.id}var Pc=[],vp=[],P$e=1,kl=null,Aa=3,QM=!1,Vm=!1,iw=!1;function Pj(r){for(var e=qu(vp);e!==null;){if(e.callback===null)XM(vp);else if(e.startTime<=r)XM(vp),e.sortIndex=e.expirationTime,Cj(Pc,e);else break;e=qu(vp)}}function Rj(r){if(iw=!1,Pj(r),!Vm)if(qu(Pc)!==null)Vm=!0,yy(Oj);else{var e=qu(vp);e!==null&&nw(Rj,e.startTime-r)}}function Oj(r,e){Vm=!1,iw&&(iw=!1,KM()),QM=!0;var t=Aa;try{for(Pj(e),kl=qu(Pc);kl!==null&&(!(kl.expirationTime>e)||r&&!An.unstable_shouldYield());){var n=kl.callback;if(typeof n=="function"){kl.callback=null,Aa=kl.priorityLevel;var i=n(kl.expirationTime<=e);e=An.unstable_now(),typeof i=="function"?kl.callback=i:kl===qu(Pc)&&XM(Pc),Pj(e)}else XM(Pc);kl=qu(Pc)}if(kl!==null)var o=!0;else{var l=qu(vp);l!==null&&nw(Rj,l.startTime-e),o=!1}return o}finally{kl=null,Aa=t,QM=!1}}var R$e=Aj;An.unstable_IdlePriority=5;An.unstable_ImmediatePriority=1;An.unstable_LowPriority=4;An.unstable_NormalPriority=3;An.unstable_Profiling=null;An.unstable_UserBlockingPriority=2;An.unstable_cancelCallback=function(r){r.callback=null};An.unstable_continueExecution=function(){Vm||QM||(Vm=!0,yy(Oj))};An.unstable_getCurrentPriorityLevel=function(){return Aa};An.unstable_getFirstCallbackNode=function(){return qu(Pc)};An.unstable_next=function(r){switch(Aa){case 1:case 2:case 3:var e=3;break;default:e=Aa}var t=Aa;Aa=e;try{return r()}finally{Aa=t}};An.unstable_pauseExecution=function(){};An.unstable_requestPaint=R$e;An.unstable_runWithPriority=function(r,e){switch(r){case 1:case 2:case 3:case 4:case 5:break;default:r=3}var t=Aa;Aa=r;try{return e()}finally{Aa=t}};An.unstable_scheduleCallback=function(r,e,t){var n=An.unstable_now();switch(typeof t=="object"&&t!==null?(t=t.delay,t=typeof t=="number"&&0<t?n+t:n):t=n,r){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=t+i,r={id:P$e++,callback:e,priorityLevel:r,startTime:t,expirationTime:i,sortIndex:-1},t>n?(r.sortIndex=t,Cj(vp,r),qu(Pc)===null&&r===qu(vp)&&(iw?KM():iw=!0,nw(Rj,t-n))):(r.sortIndex=i,Cj(Pc,r),Vm||QM||(Vm=!0,yy(Oj))),r};An.unstable_wrapCallback=function(r){var e=Aa;return function(){var t=Aa;Aa=e;try{return r.apply(this,arguments)}finally{Aa=t}}}});var KQ=A((acr,YQ)=>{"use strict";YQ.exports=ZQ()});var kte=A(Ul=>{"use strict";var $A=Et(),Si=mj(),Zo=KQ();function Ot(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!$A)throw Error(Ot(227));var uee=new Set,Dw={};function eg(r,e){Fy(r,e),Fy(r+"Capture",e)}function Fy(r,e){for(Dw[r]=e,r=0;r<e.length;r++)uee.add(e[r])}var Wh=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),O$e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,XQ=Object.prototype.hasOwnProperty,QQ={},JQ={};function L$e(r){return XQ.call(JQ,r)?!0:XQ.call(QQ,r)?!1:O$e.test(r)?JQ[r]=!0:(QQ[r]=!0,!1)}function D$e(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function N$e(r,e,t,n){if(e===null||typeof e=="undefined"||D$e(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function is(r,e,t,n,i,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var ha={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){ha[r]=new is(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];ha[e]=new is(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){ha[r]=new is(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){ha[r]=new is(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){ha[r]=new is(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){ha[r]=new is(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){ha[r]=new is(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){ha[r]=new is(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){ha[r]=new is(r,5,!1,r.toLowerCase(),null,!1,!1)});var BF=/[\-:]([a-z])/g;function UF(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(BF,UF);ha[e]=new is(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(BF,UF);ha[e]=new is(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(BF,UF);ha[e]=new is(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){ha[r]=new is(r,1,!1,r.toLowerCase(),null,!1,!1)});ha.xlinkHref=new is("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){ha[r]=new is(r,1,!1,r.toLowerCase(),null,!0,!0)});function VF(r,e,t,n){var i=ha.hasOwnProperty(e)?ha[e]:null,o=i!==null?i.type===0:n?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");o||(N$e(e,t,i,n)&&(t=null),n||i===null?L$e(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var tg=$A.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vw=60103,$m=60106,_p=60107,GF=60108,ww=60114,$F=60109,HF=60110,HA=60112,Ew=60113,wA=60120,WA=60115,WF=60116,ZF=60121,YF=60128,cee=60129,KF=60130,tF=60131;typeof Symbol=="function"&&Symbol.for&&(Lo=Symbol.for,vw=Lo("react.element"),$m=Lo("react.portal"),_p=Lo("react.fragment"),GF=Lo("react.strict_mode"),ww=Lo("react.profiler"),$F=Lo("react.provider"),HF=Lo("react.context"),HA=Lo("react.forward_ref"),Ew=Lo("react.suspense"),wA=Lo("react.suspense_list"),WA=Lo("react.memo"),WF=Lo("react.lazy"),ZF=Lo("react.block"),Lo("react.scope"),YF=Lo("react.opaque.id"),cee=Lo("react.debug_trace_mode"),KF=Lo("react.offscreen"),tF=Lo("react.legacy_hidden"));var Lo,eJ=typeof Symbol=="function"&&Symbol.iterator;function ow(r){return r===null||typeof r!="object"?null:(r=eJ&&r[eJ]||r["@@iterator"],typeof r=="function"?r:null)}var Lj;function yw(r){if(Lj===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Lj=e&&e[1]||""}return`
`+Lj+r}var Dj=!1;function JM(r,e){if(!r||Dj)return"";Dj=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e){if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var n=p}Reflect.construct(r,[],e)}else{try{e.call()}catch(p){n=p}r.call(e.prototype)}}else{try{throw Error()}catch(p){n=p}r()}}catch(p){if(p&&n&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),o=n.stack.split(`
`),l=i.length-1,c=o.length-1;1<=l&&0<=c&&i[l]!==o[c];)c--;for(;1<=l&&0<=c;l--,c--)if(i[l]!==o[c]){if(l!==1||c!==1)do if(l--,c--,0>c||i[l]!==o[c])return`
`+i[l].replace(" at new "," at ");while(1<=l&&0<=c);break}}}finally{Dj=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?yw(r):""}function k$e(r){switch(r.tag){case 5:return yw(r.type);case 16:return yw("Lazy");case 13:return yw("Suspense");case 19:return yw("SuspenseList");case 0:case 2:case 15:return r=JM(r.type,!1),r;case 11:return r=JM(r.type.render,!1),r;case 22:return r=JM(r.type._render,!1),r;case 1:return r=JM(r.type,!0),r;default:return""}}function Cy(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case _p:return"Fragment";case $m:return"Portal";case ww:return"Profiler";case GF:return"StrictMode";case Ew:return"Suspense";case wA:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case HF:return(r.displayName||"Context")+".Consumer";case $F:return(r._context.displayName||"Context")+".Provider";case HA:var e=r.render;return e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case WA:return Cy(r.type);case ZF:return Cy(r._render);case WF:e=r._payload,r=r._init;try{return Cy(r(e))}catch(t){}}return null}function Rp(r){switch(typeof r){case"boolean":case"number":case"object":case"string":case"undefined":return r;default:return""}}function hee(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function q$e(r){var e=hee(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t!="undefined"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,o=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){n=""+l,o.call(this,l)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function eA(r){r._valueTracker||(r._valueTracker=q$e(r))}function fee(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=hee(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function EA(r){if(r=r||(typeof document!="undefined"?document:void 0),typeof r=="undefined")return null;try{return r.activeElement||r.body}catch(e){return r.body}}function rF(r,e){var t=e.checked;return Si({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:r._wrapperState.initialChecked})}function tJ(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=Rp(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pee(r,e){e=e.checked,e!=null&&VF(r,"checked",e,!1)}function nF(r,e){pee(r,e);var t=Rp(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?iF(r,e.type,t):e.hasOwnProperty("defaultValue")&&iF(r,e.type,Rp(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function rJ(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function iF(r,e,t){(e!=="number"||EA(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}function j$e(r){var e="";return $A.Children.forEach(r,function(t){t!=null&&(e+=t)}),e}function oF(r,e){return r=Si({children:void 0},e),(e=j$e(e.children))&&(r.children=e),r}function Py(r,e,t,n){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&n&&(r[t].defaultSelected=!0)}else{for(t=""+Rp(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function aF(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ot(91));return Si({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function nJ(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ot(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(Ot(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:Rp(t)}}function dee(r,e){var t=Rp(e.value),n=Rp(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function iJ(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}var sF={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function mee(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lF(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?mee(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var tA,gee=function(r){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,i)})}:r}(function(r,e){if(r.namespaceURI!==sF.svg||"innerHTML"in r)r.innerHTML=e;else{for(tA=tA||document.createElement("div"),tA.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tA.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function Nw(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var Sw={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F$e=["Webkit","ms","Moz","O"];Object.keys(Sw).forEach(function(r){F$e.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),Sw[e]=Sw[r]})});function vee(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Sw.hasOwnProperty(r)&&Sw[r]?(""+e).trim():e+"px"}function yee(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=vee(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,i):r[t]=i}}var z$e=Si({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uF(r,e){if(e){if(z$e[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ot(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ot(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(Ot(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ot(62))}}function cF(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function XF(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var hF=null,Ry=null,Oy=null;function oJ(r){if(r=Yw(r)){if(typeof hF!="function")throw Error(Ot(280));var e=r.stateNode;e&&(e=JA(e),hF(r.stateNode,r.type,e))}}function _ee(r){Ry?Oy?Oy.push(r):Oy=[r]:Ry=r}function xee(){if(Ry){var r=Ry,e=Oy;if(Oy=Ry=null,oJ(r),e)for(r=0;r<e.length;r++)oJ(e[r])}}function QF(r,e){return r(e)}function bee(r,e,t,n,i){return r(e,t,n,i)}function JF(){}var wee=QF,Hm=!1,Nj=!1;function ez(){(Ry!==null||Oy!==null)&&(JF(),xee())}function B$e(r,e,t){if(Nj)return r(e,t);Nj=!0;try{return wee(r,e,t)}finally{Nj=!1,ez()}}function kw(r,e){var t=r.stateNode;if(t===null)return null;var n=JA(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(Ot(231,e,typeof t));return t}var fF=!1;if(Wh)try{_y={},Object.defineProperty(_y,"passive",{get:function(){fF=!0}}),window.addEventListener("test",_y,_y),window.removeEventListener("test",_y,_y)}catch(r){fF=!1}var _y;function U$e(r,e,t,n,i,o,l,c,p){var g=Array.prototype.slice.call(arguments,3);try{e.apply(t,g)}catch(_){this.onError(_)}}var Tw=!1,SA=null,TA=!1,pF=null,V$e={onError:function(r){Tw=!0,SA=r}};function G$e(r,e,t,n,i,o,l,c,p){Tw=!1,SA=null,U$e.apply(V$e,arguments)}function $$e(r,e,t,n,i,o,l,c,p){if(G$e.apply(this,arguments),Tw){if(Tw){var g=SA;Tw=!1,SA=null}else throw Error(Ot(198));TA||(TA=!0,pF=g)}}function rg(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,(e.flags&1026)!==0&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function Eee(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function aJ(r){if(rg(r)!==r)throw Error(Ot(188))}function H$e(r){var e=r.alternate;if(!e){if(e=rg(r),e===null)throw Error(Ot(188));return e!==r?null:r}for(var t=r,n=e;;){var i=t.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===t)return aJ(i),r;if(o===n)return aJ(i),e;o=o.sibling}throw Error(Ot(188))}if(t.return!==n.return)t=i,n=o;else{for(var l=!1,c=i.child;c;){if(c===t){l=!0,t=i,n=o;break}if(c===n){l=!0,n=i,t=o;break}c=c.sibling}if(!l){for(c=o.child;c;){if(c===t){l=!0,t=o,n=i;break}if(c===n){l=!0,n=o,t=i;break}c=c.sibling}if(!l)throw Error(Ot(189))}}if(t.alternate!==n)throw Error(Ot(190))}if(t.tag!==3)throw Error(Ot(188));return t.stateNode.current===t?r:e}function See(r){if(r=H$e(r),!r)return null;for(var e=r;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===r)break;for(;!e.sibling;){if(!e.return||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function sJ(r,e){for(var t=r.alternate;e!==null;){if(e===r||e===t)return!0;e=e.return}return!1}var Tee,tz,Iee,Mee,dF=!1,Rc=[],Ep=null,Sp=null,Tp=null,qw=new Map,jw=new Map,aw=[],lJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mF(r,e,t,n,i){return{blockedOn:r,domEventName:e,eventSystemFlags:t|16,nativeEvent:i,targetContainers:[n]}}function uJ(r,e){switch(r){case"focusin":case"focusout":Ep=null;break;case"dragenter":case"dragleave":Sp=null;break;case"mouseover":case"mouseout":Tp=null;break;case"pointerover":case"pointerout":qw.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jw.delete(e.pointerId)}}function sw(r,e,t,n,i,o){return r===null||r.nativeEvent!==o?(r=mF(e,t,n,i,o),e!==null&&(e=Yw(e),e!==null&&tz(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function W$e(r,e,t,n,i){switch(e){case"focusin":return Ep=sw(Ep,r,e,t,n,i),!0;case"dragenter":return Sp=sw(Sp,r,e,t,n,i),!0;case"mouseover":return Tp=sw(Tp,r,e,t,n,i),!0;case"pointerover":var o=i.pointerId;return qw.set(o,sw(qw.get(o)||null,r,e,t,n,i)),!0;case"gotpointercapture":return o=i.pointerId,jw.set(o,sw(jw.get(o)||null,r,e,t,n,i)),!0}return!1}function Z$e(r){var e=Wm(r.target);if(e!==null){var t=rg(e);if(t!==null){if(e=t.tag,e===13){if(e=Eee(t),e!==null){r.blockedOn=e,Mee(r.lanePriority,function(){Zo.unstable_runWithPriority(r.priority,function(){Iee(t)})});return}}else if(e===3&&t.stateNode.hydrate){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function fA(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=oz(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t!==null)return e=Yw(t),e!==null&&tz(e),r.blockedOn=t,!1;e.shift()}return!0}function cJ(r,e,t){fA(r)&&t.delete(e)}function Y$e(){for(dF=!1;0<Rc.length;){var r=Rc[0];if(r.blockedOn!==null){r=Yw(r.blockedOn),r!==null&&Tee(r);break}for(var e=r.targetContainers;0<e.length;){var t=oz(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t!==null){r.blockedOn=t;break}e.shift()}r.blockedOn===null&&Rc.shift()}Ep!==null&&fA(Ep)&&(Ep=null),Sp!==null&&fA(Sp)&&(Sp=null),Tp!==null&&fA(Tp)&&(Tp=null),qw.forEach(cJ),jw.forEach(cJ)}function lw(r,e){r.blockedOn===e&&(r.blockedOn=null,dF||(dF=!0,Zo.unstable_scheduleCallback(Zo.unstable_NormalPriority,Y$e)))}function Aee(r){function e(i){return lw(i,r)}if(0<Rc.length){lw(Rc[0],r);for(var t=1;t<Rc.length;t++){var n=Rc[t];n.blockedOn===r&&(n.blockedOn=null)}}for(Ep!==null&&lw(Ep,r),Sp!==null&&lw(Sp,r),Tp!==null&&lw(Tp,r),qw.forEach(e),jw.forEach(e),t=0;t<aw.length;t++)n=aw[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<aw.length&&(t=aw[0],t.blockedOn===null);)Z$e(t),t.blockedOn===null&&aw.shift()}function rA(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var Ey={animationend:rA("Animation","AnimationEnd"),animationiteration:rA("Animation","AnimationIteration"),animationstart:rA("Animation","AnimationStart"),transitionend:rA("Transition","TransitionEnd")},kj={},Cee={};Wh&&(Cee=document.createElement("div").style,"AnimationEvent"in window||(delete Ey.animationend.animation,delete Ey.animationiteration.animation,delete Ey.animationstart.animation),"TransitionEvent"in window||delete Ey.transitionend.transition);function ZA(r){if(kj[r])return kj[r];if(!Ey[r])return r;var e=Ey[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in Cee)return kj[r]=e[t];return r}var Pee=ZA("animationend"),Ree=ZA("animationiteration"),Oee=ZA("animationstart"),Lee=ZA("transitionend"),Dee=new Map,rz=new Map,K$e=["abort","abort",Pee,"animationEnd",Ree,"animationIteration",Oee,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lee,"transitionEnd","waiting","waiting"];function nz(r,e){for(var t=0;t<r.length;t+=2){var n=r[t],i=r[t+1];i="on"+(i[0].toUpperCase()+i.slice(1)),rz.set(n,e),Dee.set(n,i),eg(i,[n])}}var X$e=Zo.unstable_now;X$e();var li=8;function by(r){if((1&r)!==0)return li=15,1;if((2&r)!==0)return li=14,2;if((4&r)!==0)return li=13,4;var e=24&r;return e!==0?(li=12,e):(r&32)!==0?(li=11,32):(e=192&r,e!==0?(li=10,e):(r&256)!==0?(li=9,256):(e=3584&r,e!==0?(li=8,e):(r&4096)!==0?(li=7,4096):(e=4186112&r,e!==0?(li=6,e):(e=62914560&r,e!==0?(li=5,e):r&67108864?(li=4,67108864):(r&134217728)!==0?(li=3,134217728):(e=805306368&r,e!==0?(li=2,e):(1073741824&r)!==0?(li=1,1073741824):(li=8,r))))))}function Q$e(r){switch(r){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function J$e(r){switch(r){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Ot(358,r))}}function Fw(r,e){var t=r.pendingLanes;if(t===0)return li=0;var n=0,i=0,o=r.expiredLanes,l=r.suspendedLanes,c=r.pingedLanes;if(o!==0)n=o,i=li=15;else if(o=t&134217727,o!==0){var p=o&~l;p!==0?(n=by(p),i=li):(c&=o,c!==0&&(n=by(c),i=li))}else o=t&~l,o!==0?(n=by(o),i=li):c!==0&&(n=by(c),i=li);if(n===0)return 0;if(n=31-Op(n),n=t&((0>n?0:1<<n)<<1)-1,e!==0&&e!==n&&(e&l)===0){if(by(e),i<=li)return e;li=i}if(e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-Op(e),i=1<<t,n|=r[t],e&=~i;return n}function Nee(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function IA(r,e){switch(r){case 15:return 1;case 14:return 2;case 12:return r=wy(24&~e),r===0?IA(10,e):r;case 10:return r=wy(192&~e),r===0?IA(8,e):r;case 8:return r=wy(3584&~e),r===0&&(r=wy(4186112&~e),r===0&&(r=512)),r;case 2:return e=wy(805306368&~e),e===0&&(e=268435456),e}throw Error(Ot(358,r))}function wy(r){return r&-r}function qj(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function YA(r,e,t){r.pendingLanes|=e;var n=e-1;r.suspendedLanes&=n,r.pingedLanes&=n,r=r.eventTimes,e=31-Op(e),r[e]=t}var Op=Math.clz32?Math.clz32:r8e,e8e=Math.log,t8e=Math.LN2;function r8e(r){return r===0?32:31-(e8e(r)/t8e|0)|0}var n8e=Zo.unstable_UserBlockingPriority,i8e=Zo.unstable_runWithPriority,pA=!0;function o8e(r,e,t,n){Hm||JF();var i=iz,o=Hm;Hm=!0;try{bee(i,r,e,t,n)}finally{(Hm=o)||ez()}}function a8e(r,e,t,n){i8e(n8e,iz.bind(null,r,e,t,n))}function iz(r,e,t,n){if(pA){var i;if((i=(e&4)===0)&&0<Rc.length&&-1<lJ.indexOf(r))r=mF(null,r,e,t,n),Rc.push(r);else{var o=oz(r,e,t,n);if(o===null)i&&uJ(r,n);else{if(i){if(-1<lJ.indexOf(r)){r=mF(o,r,e,t,n),Rc.push(r);return}if(W$e(o,r,e,t,n))return;uJ(r,n)}Zee(r,e,n,null,t)}}}}function oz(r,e,t,n){var i=XF(n);if(i=Wm(i),i!==null){var o=rg(i);if(o===null)i=null;else{var l=o.tag;if(l===13){if(i=Eee(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Zee(r,e,n,i,t),null}var xp=null,az=null,dA=null;function kee(){if(dA)return dA;var r,e=az,t=e.length,n,i="value"in xp?xp.value:xp.textContent,o=i.length;for(r=0;r<t&&e[r]===i[r];r++);var l=t-r;for(n=1;n<=l&&e[t-n]===i[o-n];n++);return dA=i.slice(r,1<n?1-n:void 0)}function mA(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function nA(){return!0}function hJ(){return!1}function fl(r){function e(t,n,i,o,l){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var c in r)r.hasOwnProperty(c)&&(t=r[c],this[c]=t?t(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?nA:hJ,this.isPropagationStopped=hJ,this}return Si(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=nA)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=nA)},persist:function(){},isPersistent:nA}),e}var Vy={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sz=fl(Vy),Zw=Si({},Vy,{view:0,detail:0}),s8e=fl(Zw),jj,Fj,uw,KA=Si({},Zw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lz,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==uw&&(uw&&r.type==="mousemove"?(jj=r.screenX-uw.screenX,Fj=r.screenY-uw.screenY):Fj=jj=0,uw=r),jj)},movementY:function(r){return"movementY"in r?r.movementY:Fj}}),fJ=fl(KA),l8e=Si({},KA,{dataTransfer:0}),u8e=fl(l8e),c8e=Si({},Zw,{relatedTarget:0}),zj=fl(c8e),h8e=Si({},Vy,{animationName:0,elapsedTime:0,pseudoElement:0}),f8e=fl(h8e),p8e=Si({},Vy,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),d8e=fl(p8e),m8e=Si({},Vy,{data:0}),pJ=fl(m8e),g8e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v8e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y8e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _8e(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=y8e[r])?!!e[r]:!1}function lz(){return _8e}var x8e=Si({},Zw,{key:function(r){if(r.key){var e=g8e[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=mA(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?v8e[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lz,charCode:function(r){return r.type==="keypress"?mA(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?mA(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),b8e=fl(x8e),w8e=Si({},KA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dJ=fl(w8e),E8e=Si({},Zw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lz}),S8e=fl(E8e),T8e=Si({},Vy,{propertyName:0,elapsedTime:0,pseudoElement:0}),I8e=fl(T8e),M8e=Si({},KA,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),A8e=fl(M8e),C8e=[9,13,27,32],uz=Wh&&"CompositionEvent"in window,Iw=null;Wh&&"documentMode"in document&&(Iw=document.documentMode);var P8e=Wh&&"TextEvent"in window&&!Iw,qee=Wh&&(!uz||Iw&&8<Iw&&11>=Iw),mJ=" ",gJ=!1;function jee(r,e){switch(r){case"keyup":return C8e.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fee(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Sy=!1;function R8e(r,e){switch(r){case"compositionend":return Fee(e);case"keypress":return e.which!==32?null:(gJ=!0,mJ);case"textInput":return r=e.data,r===mJ&&gJ?null:r;default:return null}}function O8e(r,e){if(Sy)return r==="compositionend"||!uz&&jee(r,e)?(r=kee(),dA=az=xp=null,Sy=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qee&&e.locale!=="ko"?null:e.data;default:return null}}var L8e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vJ(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!L8e[r.type]:e==="textarea"}function zee(r,e,t,n){_ee(n),e=MA(e,"onChange"),0<e.length&&(t=new sz("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var Mw=null,zw=null;function D8e(r){$ee(r,0)}function XA(r){var e=Iy(r);if(fee(e))return r}function N8e(r,e){if(r==="change")return e}var Bee=!1;Wh&&(Wh?(oA="oninput"in document,oA||(Bj=document.createElement("div"),Bj.setAttribute("oninput","return;"),oA=typeof Bj.oninput=="function"),iA=oA):iA=!1,Bee=iA&&(!document.documentMode||9<document.documentMode));var iA,oA,Bj;function yJ(){Mw&&(Mw.detachEvent("onpropertychange",Uee),zw=Mw=null)}function Uee(r){if(r.propertyName==="value"&&XA(zw)){var e=[];if(zee(e,zw,r,XF(r)),r=D8e,Hm)r(e);else{Hm=!0;try{QF(r,e)}finally{Hm=!1,ez()}}}}function k8e(r,e,t){r==="focusin"?(yJ(),Mw=e,zw=t,Mw.attachEvent("onpropertychange",Uee)):r==="focusout"&&yJ()}function q8e(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return XA(zw)}function j8e(r,e){if(r==="click")return XA(e)}function F8e(r,e){if(r==="input"||r==="change")return XA(e)}function z8e(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var ql=typeof Object.is=="function"?Object.is:z8e,B8e=Object.prototype.hasOwnProperty;function Bw(r,e){if(ql(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++)if(!B8e.call(e,t[n])||!ql(r[t[n]],e[t[n]]))return!1;return!0}function _J(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function xJ(r,e){var t=_J(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=_J(t)}}function Vee(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?Vee(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function bJ(){for(var r=window,e=EA();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch(n){t=!1}if(t)r=e.contentWindow;else break;e=EA(r.document)}return e}function gF(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}var U8e=Wh&&"documentMode"in document&&11>=document.documentMode,Ty=null,vF=null,Aw=null,yF=!1;function wJ(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;yF||Ty==null||Ty!==EA(n)||(n=Ty,"selectionStart"in n&&gF(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Aw&&Bw(Aw,n)||(Aw=n,n=MA(vF,"onSelect"),0<n.length&&(e=new sz("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=Ty)))}nz("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);nz("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);nz(K$e,2);for(Uj="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),aA=0;aA<Uj.length;aA++)rz.set(Uj[aA],0);var Uj,aA;Fy("onMouseEnter",["mouseout","mouseover"]);Fy("onMouseLeave",["mouseout","mouseover"]);Fy("onPointerEnter",["pointerout","pointerover"]);Fy("onPointerLeave",["pointerout","pointerover"]);eg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eg("onBeforeInput",["compositionend","keypress","textInput","paste"]);eg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _w="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gee=new Set("cancel close invalid load scroll toggle".split(" ").concat(_w));function EJ(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,$$e(n,e,void 0,r),r.currentTarget=null}function $ee(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var l=n.length-1;0<=l;l--){var c=n[l],p=c.instance,g=c.currentTarget;if(c=c.listener,p!==o&&i.isPropagationStopped())break e;EJ(i,c,g),o=p}else for(l=0;l<n.length;l++){if(c=n[l],p=c.instance,g=c.currentTarget,c=c.listener,p!==o&&i.isPropagationStopped())break e;EJ(i,c,g),o=p}}}if(TA)throw r=pF,TA=!1,pF=null,r}function yi(r,e){var t=Kee(e),n=r+"__bubble";t.has(n)||(Wee(e,r,2,!1),t.add(n))}var SJ="_reactListening"+Math.random().toString(36).slice(2);function Hee(r){r[SJ]||(r[SJ]=!0,uee.forEach(function(e){Gee.has(e)||TJ(e,!1,r,null),TJ(e,!0,r,null)}))}function TJ(r,e,t,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,o=t;if(r==="selectionchange"&&t.nodeType!==9&&(o=t.ownerDocument),n!==null&&!e&&Gee.has(r)){if(r!=="scroll")return;i|=2,o=n}var l=Kee(o),c=r+"__"+(e?"capture":"bubble");l.has(c)||(e&&(i|=4),Wee(o,r,i,e),l.add(c))}function Wee(r,e,t,n){var i=rz.get(e);switch(i===void 0?2:i){case 0:i=o8e;break;case 1:i=a8e;break;default:i=iz}t=i.bind(null,e,t,r),i=void 0,!fF||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function Zee(r,e,t,n,i){var o=n;if((e&1)===0&&(e&2)===0&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var c=n.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(l===4)for(l=n.return;l!==null;){var p=l.tag;if((p===3||p===4)&&(p=l.stateNode.containerInfo,p===i||p.nodeType===8&&p.parentNode===i))return;l=l.return}for(;c!==null;){if(l=Wm(c),l===null)return;if(p=l.tag,p===5||p===6){n=o=l;continue e}c=c.parentNode}}n=n.return}B$e(function(){var g=o,_=XF(t),x=[];e:{var T=Dee.get(r);if(T!==void 0){var C=sz,D=r;switch(r){case"keypress":if(mA(t)===0)break e;case"keydown":case"keyup":C=b8e;break;case"focusin":D="focus",C=zj;break;case"focusout":D="blur",C=zj;break;case"beforeblur":case"afterblur":C=zj;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=fJ;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=u8e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=S8e;break;case Pee:case Ree:case Oee:C=f8e;break;case Lee:C=I8e;break;case"scroll":C=s8e;break;case"wheel":C=A8e;break;case"copy":case"cut":case"paste":C=d8e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=dJ}var F=(e&4)!==0,O=!F&&r==="scroll",k=F?T!==null?T+"Capture":null:T;F=[];for(var q=g,U;q!==null;){U=q;var H=U.stateNode;if(U.tag===5&&H!==null&&(U=H,k!==null&&(H=kw(q,k),H!=null&&F.push(Uw(q,H,U)))),O)break;q=q.return}0<F.length&&(T=new C(T,D,null,t,_),x.push({event:T,listeners:F}))}}if((e&7)===0){e:{if(T=r==="mouseover"||r==="pointerover",C=r==="mouseout"||r==="pointerout",T&&(e&16)===0&&(D=t.relatedTarget||t.fromElement)&&(Wm(D)||D[Gy]))break e;if((C||T)&&(T=_.window===_?_:(T=_.ownerDocument)?T.defaultView||T.parentWindow:window,C?(D=t.relatedTarget||t.toElement,C=g,D=D?Wm(D):null,D!==null&&(O=rg(D),D!==O||D.tag!==5&&D.tag!==6)&&(D=null)):(C=null,D=g),C!==D)){if(F=fJ,H="onMouseLeave",k="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(F=dJ,H="onPointerLeave",k="onPointerEnter",q="pointer"),O=C==null?T:Iy(C),U=D==null?T:Iy(D),T=new F(H,q+"leave",C,t,_),T.target=O,T.relatedTarget=U,H=null,Wm(_)===g&&(F=new F(k,q+"enter",D,t,_),F.target=U,F.relatedTarget=O,H=F),O=H,C&&D)t:{for(F=C,k=D,q=0,U=F;U;U=xy(U))q++;for(U=0,H=k;H;H=xy(H))U++;for(;0<q-U;)F=xy(F),q--;for(;0<U-q;)k=xy(k),U--;for(;q--;){if(F===k||k!==null&&F===k.alternate)break t;F=xy(F),k=xy(k)}F=null}else F=null;C!==null&&IJ(x,T,C,F,!1),D!==null&&O!==null&&IJ(x,O,D,F,!0)}}e:{if(T=g?Iy(g):window,C=T.nodeName&&T.nodeName.toLowerCase(),C==="select"||C==="input"&&T.type==="file")var se=N8e;else if(vJ(T)){if(Bee)se=F8e;else{se=q8e;var ie=k8e}}else(C=T.nodeName)&&C.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(se=j8e);if(se&&(se=se(r,g))){zee(x,se,t,_);break e}ie&&ie(r,T,g),r==="focusout"&&(ie=T._wrapperState)&&ie.controlled&&T.type==="number"&&iF(T,"number",T.value)}switch(ie=g?Iy(g):window,r){case"focusin":(vJ(ie)||ie.contentEditable==="true")&&(Ty=ie,vF=g,Aw=null);break;case"focusout":Aw=vF=Ty=null;break;case"mousedown":yF=!0;break;case"contextmenu":case"mouseup":case"dragend":yF=!1,wJ(x,t,_);break;case"selectionchange":if(U8e)break;case"keydown":case"keyup":wJ(x,t,_)}var ue;if(uz)e:{switch(r){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else Sy?jee(r,t)&&(ve="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(ve="onCompositionStart");ve&&(qee&&t.locale!=="ko"&&(Sy||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&Sy&&(ue=kee()):(xp=_,az="value"in xp?xp.value:xp.textContent,Sy=!0)),ie=MA(g,ve),0<ie.length&&(ve=new pJ(ve,r,null,t,_),x.push({event:ve,listeners:ie}),ue?ve.data=ue:(ue=Fee(t),ue!==null&&(ve.data=ue)))),(ue=P8e?R8e(r,t):O8e(r,t))&&(g=MA(g,"onBeforeInput"),0<g.length&&(_=new pJ("onBeforeInput","beforeinput",null,t,_),x.push({event:_,listeners:g}),_.data=ue))}$ee(x,e)})}function Uw(r,e,t){return{instance:r,listener:e,currentTarget:t}}function MA(r,e){for(var t=e+"Capture",n=[];r!==null;){var i=r,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=kw(r,t),o!=null&&n.unshift(Uw(r,o,i)),o=kw(r,e),o!=null&&n.push(Uw(r,o,i))),r=r.return}return n}function xy(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function IJ(r,e,t,n,i){for(var o=e._reactName,l=[];t!==null&&t!==n;){var c=t,p=c.alternate,g=c.stateNode;if(p!==null&&p===n)break;c.tag===5&&g!==null&&(c=g,i?(p=kw(t,o),p!=null&&l.unshift(Uw(t,p,c))):i||(p=kw(t,o),p!=null&&l.push(Uw(t,p,c)))),t=t.return}l.length!==0&&r.push({event:e,listeners:l})}function AA(){}var Vj=null,Gj=null;function Yee(r,e){switch(r){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function _F(r,e){return r==="textarea"||r==="option"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var MJ=typeof setTimeout=="function"?setTimeout:void 0,V8e=typeof clearTimeout=="function"?clearTimeout:void 0;function cz(r){r.nodeType===1?r.textContent="":r.nodeType===9&&(r=r.body,r!=null&&(r.textContent=""))}function Ly(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break}return r}function AJ(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var $j=0;function G8e(r){return{$$typeof:YF,toString:r,valueOf:r}}var QA=Math.random().toString(36).slice(2),bp="__reactFiber$"+QA,CA="__reactProps$"+QA,Gy="__reactContainer$"+QA,CJ="__reactEvents$"+QA;function Wm(r){var e=r[bp];if(e)return e;for(var t=r.parentNode;t;){if(e=t[Gy]||t[bp]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=AJ(r);r!==null;){if(t=r[bp])return t;r=AJ(r)}return e}r=t,t=r.parentNode}return null}function Yw(r){return r=r[bp]||r[Gy],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Iy(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(Ot(33))}function JA(r){return r[CA]||null}function Kee(r){var e=r[CJ];return e===void 0&&(e=r[CJ]=new Set),e}var xF=[],My=-1;function kp(r){return{current:r}}function _i(r){0>My||(r.current=xF[My],xF[My]=null,My--)}function Hi(r,e){My++,xF[My]=r.current,r.current=e}var Lp={},Oa=kp(Lp),As=kp(!1),Xm=Lp;function zy(r,e){var t=r.type.contextTypes;if(!t)return Lp;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in t)i[o]=e[o];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function Cs(r){return r=r.childContextTypes,r!=null}function PA(){_i(As),_i(Oa)}function PJ(r,e,t){if(Oa.current!==Lp)throw Error(Ot(168));Hi(Oa,e),Hi(As,t)}function Xee(r,e,t){var n=r.stateNode;if(r=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in r))throw Error(Ot(108,Cy(e)||"Unknown",i));return Si({},t,n)}function gA(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Lp,Xm=Oa.current,Hi(Oa,r),Hi(As,As.current),!0}function RJ(r,e,t){var n=r.stateNode;if(!n)throw Error(Ot(169));t?(r=Xee(r,e,Xm),n.__reactInternalMemoizedMergedChildContext=r,_i(As),_i(Oa),Hi(Oa,r)):_i(As),Hi(As,t)}var hz=null,Km=null,$8e=Zo.unstable_runWithPriority,fz=Zo.unstable_scheduleCallback,bF=Zo.unstable_cancelCallback,H8e=Zo.unstable_shouldYield,OJ=Zo.unstable_requestPaint,wF=Zo.unstable_now,W8e=Zo.unstable_getCurrentPriorityLevel,eC=Zo.unstable_ImmediatePriority,Qee=Zo.unstable_UserBlockingPriority,Jee=Zo.unstable_NormalPriority,ete=Zo.unstable_LowPriority,tte=Zo.unstable_IdlePriority,Hj={},Z8e=OJ!==void 0?OJ:function(){},Uh=null,vA=null,Wj=!1,LJ=wF(),Pa=1e4>LJ?wF:function(){return wF()-LJ};function By(){switch(W8e()){case eC:return 99;case Qee:return 98;case Jee:return 97;case ete:return 96;case tte:return 95;default:throw Error(Ot(332))}}function rte(r){switch(r){case 99:return eC;case 98:return Qee;case 97:return Jee;case 96:return ete;case 95:return tte;default:throw Error(Ot(332))}}function Qm(r,e){return r=rte(r),$8e(r,e)}function Vw(r,e,t){return r=rte(r),fz(r,e,t)}function kc(){if(vA!==null){var r=vA;vA=null,bF(r)}nte()}function nte(){if(!Wj&&Uh!==null){Wj=!0;var r=0;try{var e=Uh;Qm(99,function(){for(;r<e.length;r++){var t=e[r];do t=t(!0);while(t!==null)}}),Uh=null}catch(t){throw Uh!==null&&(Uh=Uh.slice(r+1)),fz(eC,kc),t}finally{Wj=!1}}}var Y8e=tg.ReactCurrentBatchConfig;function ju(r,e){if(r&&r.defaultProps){e=Si({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}var RA=kp(null),OA=null,Ay=null,LA=null;function pz(){LA=Ay=OA=null}function dz(r){var e=RA.current;_i(RA),r.type._context._currentValue=e}function ite(r,e){for(;r!==null;){var t=r.alternate;if((r.childLanes&e)===e){if(t===null||(t.childLanes&e)===e)break;t.childLanes|=e}else r.childLanes|=e,t!==null&&(t.childLanes|=e);r=r.return}}function Dy(r,e){OA=r,LA=Ay=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&e)!==0&&(Fu=!0),r.firstContext=null)}function zl(r,e){if(LA!==r&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(LA=r,e=1073741823),e={context:r,observedBits:e,next:null},Ay===null){if(OA===null)throw Error(Ot(308));Ay=e,OA.dependencies={lanes:0,firstContext:e,responders:null}}else Ay=Ay.next=e;return r._currentValue}var yp=!1;function mz(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ote(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ip(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function Mp(r,e){if(r=r.updateQueue,r!==null){r=r.shared;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}}function DJ(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?i=o=l:o=o.next=l,t=t.next}while(t!==null);o===null?i=o=e:o=o.next=e}else i=o=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function Gw(r,e,t,n){var i=r.updateQueue;yp=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var p=c,g=p.next;p.next=null,l===null?o=g:l.next=g,l=p;var _=r.alternate;if(_!==null){_=_.updateQueue;var x=_.lastBaseUpdate;x!==l&&(x===null?_.firstBaseUpdate=g:x.next=g,_.lastBaseUpdate=p)}}if(o!==null){x=i.baseState,l=0,_=g=p=null;do{c=o.lane;var T=o.eventTime;if((n&c)===c){_!==null&&(_=_.next={eventTime:T,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var C=r,D=o;switch(c=e,T=t,D.tag){case 1:if(C=D.payload,typeof C=="function"){x=C.call(T,x,c);break e}x=C;break e;case 3:C.flags=C.flags&-4097|64;case 0:if(C=D.payload,c=typeof C=="function"?C.call(T,x,c):C,c==null)break e;x=Si({},x,c);break e;case 2:yp=!0}}o.callback!==null&&(r.flags|=32,c=i.effects,c===null?i.effects=[o]:c.push(o))}else T={eventTime:T,lane:c,tag:o.tag,payload:o.payload,callback:o.callback,next:null},_===null?(g=_=T,p=x):_=_.next=T,l|=c;if(o=o.next,o===null){if(c=i.shared.pending,c===null)break;o=c.next,c.next=null,i.lastBaseUpdate=c,i.shared.pending=null}}while(!0);_===null&&(p=x),i.baseState=p,i.firstBaseUpdate=g,i.lastBaseUpdate=_,Xw|=l,r.lanes=l,r.memoizedState=x}}function NJ(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(Ot(191,i));i.call(n)}}}var ate=new $A.Component().refs;function DA(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:Si({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var tC={isMounted:function(r){return(r=r._reactInternals)?rg(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=hl(),i=Ap(r),o=Ip(n,i);o.payload=e,t!=null&&(o.callback=t),Mp(r,o),Cp(r,i,n)},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=hl(),i=Ap(r),o=Ip(n,i);o.tag=1,o.payload=e,t!=null&&(o.callback=t),Mp(r,o),Cp(r,i,n)},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=hl(),n=Ap(r),i=Ip(t,n);i.tag=2,e!=null&&(i.callback=e),Mp(r,i),Cp(r,n,t)}};function kJ(r,e,t,n,i,o,l){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,o,l):e.prototype&&e.prototype.isPureReactComponent?!Bw(t,n)||!Bw(i,o):!0}function ste(r,e,t){var n=!1,i=Lp,o=e.contextType;return typeof o=="object"&&o!==null?o=zl(o):(i=Cs(e)?Xm:Oa.current,n=e.contextTypes,o=(n=n!=null)?zy(r,i):Lp),e=new e(t,o),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tC,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=o),e}function qJ(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&tC.enqueueReplaceState(e,e.state,null)}function EF(r,e,t,n){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs=ate,mz(r);var o=e.contextType;typeof o=="object"&&o!==null?i.context=zl(o):(o=Cs(e)?Xm:Oa.current,i.context=zy(r,o)),Gw(r,t,i,n),i.state=r.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(DA(r,e,o,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&tC.enqueueReplaceState(i,i.state,null),Gw(r,t,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4)}var sA=Array.isArray;function cw(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ot(309));var n=t.stateNode}if(!n)throw Error(Ot(147,r));var i=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=n.refs;l===ate&&(l=n.refs={}),o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof r!="string")throw Error(Ot(284));if(!t._owner)throw Error(Ot(290,r))}return r}function lA(r,e){if(r.type!=="textarea")throw Error(Ot(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function lte(r){function e(O,k){if(r){var q=O.lastEffect;q!==null?(q.nextEffect=k,O.lastEffect=k):O.firstEffect=O.lastEffect=k,k.nextEffect=null,k.flags=8}}function t(O,k){if(!r)return null;for(;k!==null;)e(O,k),k=k.sibling;return null}function n(O,k){for(O=new Map;k!==null;)k.key!==null?O.set(k.key,k):O.set(k.index,k),k=k.sibling;return O}function i(O,k){return O=Np(O,k),O.index=0,O.sibling=null,O}function o(O,k,q){return O.index=q,r?(q=O.alternate,q!==null?(q=q.index,q<k?(O.flags=2,k):q):(O.flags=2,k)):k}function l(O){return r&&O.alternate===null&&(O.flags=2),O}function c(O,k,q,U){return k===null||k.tag!==6?(k=Qj(q,O.mode,U),k.return=O,k):(k=i(k,q),k.return=O,k)}function p(O,k,q,U){return k!==null&&k.elementType===q.type?(U=i(k,q.props),U.ref=cw(O,k,q),U.return=O,U):(U=bA(q.type,q.key,q.props,null,O.mode,U),U.ref=cw(O,k,q),U.return=O,U)}function g(O,k,q,U){return k===null||k.tag!==4||k.stateNode.containerInfo!==q.containerInfo||k.stateNode.implementation!==q.implementation?(k=Jj(q,O.mode,U),k.return=O,k):(k=i(k,q.children||[]),k.return=O,k)}function _(O,k,q,U,H){return k===null||k.tag!==7?(k=jy(q,O.mode,U,H),k.return=O,k):(k=i(k,q),k.return=O,k)}function x(O,k,q){if(typeof k=="string"||typeof k=="number")return k=Qj(""+k,O.mode,q),k.return=O,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case vw:return q=bA(k.type,k.key,k.props,null,O.mode,q),q.ref=cw(O,null,k),q.return=O,q;case $m:return k=Jj(k,O.mode,q),k.return=O,k}if(sA(k)||ow(k))return k=jy(k,O.mode,q,null),k.return=O,k;lA(O,k)}return null}function T(O,k,q,U){var H=k!==null?k.key:null;if(typeof q=="string"||typeof q=="number")return H!==null?null:c(O,k,""+q,U);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case vw:return q.key===H?q.type===_p?_(O,k,q.props.children,U,H):p(O,k,q,U):null;case $m:return q.key===H?g(O,k,q,U):null}if(sA(q)||ow(q))return H!==null?null:_(O,k,q,U,null);lA(O,q)}return null}function C(O,k,q,U,H){if(typeof U=="string"||typeof U=="number")return O=O.get(q)||null,c(k,O,""+U,H);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case vw:return O=O.get(U.key===null?q:U.key)||null,U.type===_p?_(k,O,U.props.children,H,U.key):p(k,O,U,H);case $m:return O=O.get(U.key===null?q:U.key)||null,g(k,O,U,H)}if(sA(U)||ow(U))return O=O.get(q)||null,_(k,O,U,H,null);lA(k,U)}return null}function D(O,k,q,U){for(var H=null,se=null,ie=k,ue=k=0,ve=null;ie!==null&&ue<q.length;ue++){ie.index>ue?(ve=ie,ie=null):ve=ie.sibling;var ye=T(O,ie,q[ue],U);if(ye===null){ie===null&&(ie=ve);break}r&&ie&&ye.alternate===null&&e(O,ie),k=o(ye,k,ue),se===null?H=ye:se.sibling=ye,se=ye,ie=ve}if(ue===q.length)return t(O,ie),H;if(ie===null){for(;ue<q.length;ue++)ie=x(O,q[ue],U),ie!==null&&(k=o(ie,k,ue),se===null?H=ie:se.sibling=ie,se=ie);return H}for(ie=n(O,ie);ue<q.length;ue++)ve=C(ie,O,ue,q[ue],U),ve!==null&&(r&&ve.alternate!==null&&ie.delete(ve.key===null?ue:ve.key),k=o(ve,k,ue),se===null?H=ve:se.sibling=ve,se=ve);return r&&ie.forEach(function(ge){return e(O,ge)}),H}function F(O,k,q,U){var H=ow(q);if(typeof H!="function")throw Error(Ot(150));if(q=H.call(q),q==null)throw Error(Ot(151));for(var se=H=null,ie=k,ue=k=0,ve=null,ye=q.next();ie!==null&&!ye.done;ue++,ye=q.next()){ie.index>ue?(ve=ie,ie=null):ve=ie.sibling;var ge=T(O,ie,ye.value,U);if(ge===null){ie===null&&(ie=ve);break}r&&ie&&ge.alternate===null&&e(O,ie),k=o(ge,k,ue),se===null?H=ge:se.sibling=ge,se=ge,ie=ve}if(ye.done)return t(O,ie),H;if(ie===null){for(;!ye.done;ue++,ye=q.next())ye=x(O,ye.value,U),ye!==null&&(k=o(ye,k,ue),se===null?H=ye:se.sibling=ye,se=ye);return H}for(ie=n(O,ie);!ye.done;ue++,ye=q.next())ye=C(ie,O,ue,ye.value,U),ye!==null&&(r&&ye.alternate!==null&&ie.delete(ye.key===null?ue:ye.key),k=o(ye,k,ue),se===null?H=ye:se.sibling=ye,se=ye);return r&&ie.forEach(function(_e){return e(O,_e)}),H}return function(O,k,q,U){var H=typeof q=="object"&&q!==null&&q.type===_p&&q.key===null;H&&(q=q.props.children);var se=typeof q=="object"&&q!==null;if(se)switch(q.$$typeof){case vw:e:{for(se=q.key,H=k;H!==null;){if(H.key===se){switch(H.tag){case 7:if(q.type===_p){t(O,H.sibling),k=i(H,q.props.children),k.return=O,O=k;break e}break;default:if(H.elementType===q.type){t(O,H.sibling),k=i(H,q.props),k.ref=cw(O,H,q),k.return=O,O=k;break e}}t(O,H);break}else e(O,H);H=H.sibling}q.type===_p?(k=jy(q.props.children,O.mode,U,q.key),k.return=O,O=k):(U=bA(q.type,q.key,q.props,null,O.mode,U),U.ref=cw(O,k,q),U.return=O,O=U)}return l(O);case $m:e:{for(H=q.key;k!==null;){if(k.key===H){if(k.tag===4&&k.stateNode.containerInfo===q.containerInfo&&k.stateNode.implementation===q.implementation){t(O,k.sibling),k=i(k,q.children||[]),k.return=O,O=k;break e}else{t(O,k);break}}else e(O,k);k=k.sibling}k=Jj(q,O.mode,U),k.return=O,O=k}return l(O)}if(typeof q=="string"||typeof q=="number")return q=""+q,k!==null&&k.tag===6?(t(O,k.sibling),k=i(k,q),k.return=O,O=k):(t(O,k),k=Qj(q,O.mode,U),k.return=O,O=k),l(O);if(sA(q))return D(O,k,q,U);if(ow(q))return F(O,k,q,U);if(se&&lA(O,q),typeof q=="undefined"&&!H)switch(O.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Ot(152,Cy(O.type)||"Component"))}return t(O,k)}}var NA=lte(!0),ute=lte(!1),Kw={},Dc=kp(Kw),$w=kp(Kw),Hw=kp(Kw);function Zm(r){if(r===Kw)throw Error(Ot(174));return r}function SF(r,e){switch(Hi(Hw,e),Hi($w,r),Hi(Dc,Kw),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lF(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=lF(e,r)}_i(Dc),Hi(Dc,e)}function Uy(){_i(Dc),_i($w),_i(Hw)}function jJ(r){Zm(Hw.current);var e=Zm(Dc.current),t=lF(e,r.type);e!==t&&(Hi($w,r),Hi(Dc,t))}function gz(r){$w.current===r&&(_i(Dc),_i($w))}var $i=kp(0);function kA(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gh=null,wp=null,Nc=!1;function cte(r,e){var t=jl(5,null,null,0);t.elementType="DELETED",t.type="DELETED",t.stateNode=e,t.return=r,t.flags=8,r.lastEffect!==null?(r.lastEffect.nextEffect=t,r.lastEffect=t):r.firstEffect=r.lastEffect=t}function FJ(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function TF(r){if(Nc){var e=wp;if(e){var t=e;if(!FJ(r,e)){if(e=Ly(t.nextSibling),!e||!FJ(r,e)){r.flags=r.flags&-1025|2,Nc=!1,Gh=r;return}cte(Gh,t)}Gh=r,wp=Ly(e.firstChild)}else r.flags=r.flags&-1025|2,Nc=!1,Gh=r}}function zJ(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Gh=r}function uA(r){if(r!==Gh)return!1;if(!Nc)return zJ(r),Nc=!0,!1;var e=r.type;if(r.tag!==5||e!=="head"&&e!=="body"&&!_F(e,r.memoizedProps))for(e=wp;e;)cte(r,e),e=Ly(e.nextSibling);if(zJ(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Ot(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){wp=Ly(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}wp=null}}else wp=Gh?Ly(r.stateNode.nextSibling):null;return!0}function Zj(){wp=Gh=null,Nc=!1}var Ny=[];function vz(){for(var r=0;r<Ny.length;r++)Ny[r]._workInProgressVersionPrimary=null;Ny.length=0}var Cw=tg.ReactCurrentDispatcher,Fl=tg.ReactCurrentBatchConfig,Ww=0,to=null,Ca=null,ua=null,qA=!1,Pw=!1;function Is(){throw Error(Ot(321))}function yz(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!ql(r[t],e[t]))return!1;return!0}function _z(r,e,t,n,i,o){if(Ww=o,to=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cw.current=r===null||r.memoizedState===null?X8e:Q8e,r=t(n,i),Pw){o=0;do{if(Pw=!1,!(25>o))throw Error(Ot(301));o+=1,ua=Ca=null,e.updateQueue=null,Cw.current=J8e,r=t(n,i)}while(Pw)}if(Cw.current=BA,e=Ca!==null&&Ca.next!==null,Ww=0,ua=Ca=to=null,qA=!1,e)throw Error(Ot(300));return r}function Ym(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ua===null?to.memoizedState=ua=r:ua=ua.next=r,ua}function ng(){if(Ca===null){var r=to.alternate;r=r!==null?r.memoizedState:null}else r=Ca.next;var e=ua===null?to.memoizedState:ua.next;if(e!==null)ua=e,Ca=r;else{if(r===null)throw Error(Ot(310));Ca=r,r={memoizedState:Ca.memoizedState,baseState:Ca.baseState,baseQueue:Ca.baseQueue,queue:Ca.queue,next:null},ua===null?to.memoizedState=ua=r:ua=ua.next=r}return ua}function Oc(r,e){return typeof e=="function"?e(r):e}function hw(r){var e=ng(),t=e.queue;if(t===null)throw Error(Ot(311));t.lastRenderedReducer=r;var n=Ca,i=n.baseQueue,o=t.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}n.baseQueue=i=o,t.pending=null}if(i!==null){i=i.next,n=n.baseState;var c=l=o=null,p=i;do{var g=p.lane;if((Ww&g)===g)c!==null&&(c=c.next={lane:0,action:p.action,eagerReducer:p.eagerReducer,eagerState:p.eagerState,next:null}),n=p.eagerReducer===r?p.eagerState:r(n,p.action);else{var _={lane:g,action:p.action,eagerReducer:p.eagerReducer,eagerState:p.eagerState,next:null};c===null?(l=c=_,o=n):c=c.next=_,to.lanes|=g,Xw|=g}p=p.next}while(p!==null&&p!==i);c===null?o=n:c.next=l,ql(n,e.memoizedState)||(Fu=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,t.lastRenderedState=n}return[e.memoizedState,t.dispatch]}function fw(r){var e=ng(),t=e.queue;if(t===null)throw Error(Ot(311));t.lastRenderedReducer=r;var n=t.dispatch,i=t.pending,o=e.memoizedState;if(i!==null){t.pending=null;var l=i=i.next;do o=r(o,l.action),l=l.next;while(l!==i);ql(o,e.memoizedState)||(Fu=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,n]}function BJ(r,e,t){var n=e._getVersion;n=n(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?r=i===n:(r=r.mutableReadLanes,(r=(Ww&r)===r)&&(e._workInProgressVersionPrimary=n,Ny.push(e))),r)return t(e._source);throw Ny.push(e),Error(Ot(350))}function hte(r,e,t,n){var i=ns;if(i===null)throw Error(Ot(349));var o=e._getVersion,l=o(e._source),c=Cw.current,p=c.useState(function(){return BJ(i,e,t)}),g=p[1],_=p[0];p=ua;var x=r.memoizedState,T=x.refs,C=T.getSnapshot,D=x.source;x=x.subscribe;var F=to;return r.memoizedState={refs:T,source:e,subscribe:n},c.useEffect(function(){T.getSnapshot=t,T.setSnapshot=g;var O=o(e._source);if(!ql(l,O)){O=t(e._source),ql(_,O)||(g(O),O=Ap(F),i.mutableReadLanes|=O&i.pendingLanes),O=i.mutableReadLanes,i.entangledLanes|=O;for(var k=i.entanglements,q=O;0<q;){var U=31-Op(q),H=1<<U;k[U]|=O,q&=~H}}},[t,e,n]),c.useEffect(function(){return n(e._source,function(){var O=T.getSnapshot,k=T.setSnapshot;try{k(O(e._source));var q=Ap(F);i.mutableReadLanes|=q&i.pendingLanes}catch(U){k(function(){throw U})}})},[e,n]),ql(C,t)&&ql(D,e)&&ql(x,n)||(r={pending:null,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:_},r.dispatch=g=wz.bind(null,to,r),p.queue=r,p.baseQueue=null,_=BJ(i,e,t),p.memoizedState=p.baseState=_),_}function fte(r,e,t){var n=ng();return hte(n,r,e,t)}function pw(r){var e=Ym();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r=e.queue={pending:null,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:r},r=r.dispatch=wz.bind(null,to,r),[e.memoizedState,r]}function jA(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=to.updateQueue,e===null?(e={lastEffect:null},to.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function UJ(r){var e=Ym();return r={current:r},e.memoizedState=r}function FA(){return ng().memoizedState}function IF(r,e,t,n){var i=Ym();to.flags|=r,i.memoizedState=jA(1|e,t,void 0,n===void 0?null:n)}function xz(r,e,t,n){var i=ng();n=n===void 0?null:n;var o=void 0;if(Ca!==null){var l=Ca.memoizedState;if(o=l.destroy,n!==null&&yz(n,l.deps)){jA(e,t,o,n);return}}to.flags|=r,i.memoizedState=jA(1|e,t,o,n)}function VJ(r,e){return IF(516,4,r,e)}function zA(r,e){return xz(516,4,r,e)}function pte(r,e){return xz(4,2,r,e)}function dte(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function mte(r,e,t){return t=t!=null?t.concat([r]):null,xz(4,2,dte.bind(null,e,r),t)}function bz(){}function gte(r,e){var t=ng();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&yz(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function vte(r,e){var t=ng();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&yz(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function K8e(r,e){var t=By();Qm(98>t?98:t,function(){r(!0)}),Qm(97<t?97:t,function(){var n=Fl.transition;Fl.transition=1;try{r(!1),e()}finally{Fl.transition=n}})}function wz(r,e,t){var n=hl(),i=Ap(r),o={lane:i,action:t,eagerReducer:null,eagerState:null,next:null},l=e.pending;if(l===null?o.next=o:(o.next=l.next,l.next=o),e.pending=o,l=r.alternate,r===to||l!==null&&l===to)Pw=qA=!0;else{if(r.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var c=e.lastRenderedState,p=l(c,t);if(o.eagerReducer=l,o.eagerState=p,ql(p,c))return}catch(g){}finally{}Cp(r,i,n)}}var BA={readContext:zl,useCallback:Is,useContext:Is,useEffect:Is,useImperativeHandle:Is,useLayoutEffect:Is,useMemo:Is,useReducer:Is,useRef:Is,useState:Is,useDebugValue:Is,useDeferredValue:Is,useTransition:Is,useMutableSource:Is,useOpaqueIdentifier:Is,unstable_isNewReconciler:!1},X8e={readContext:zl,useCallback:function(r,e){return Ym().memoizedState=[r,e===void 0?null:e],r},useContext:zl,useEffect:VJ,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,IF(4,2,dte.bind(null,e,r),t)},useLayoutEffect:function(r,e){return IF(4,2,r,e)},useMemo:function(r,e){var t=Ym();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=Ym();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r=n.queue={pending:null,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},r=r.dispatch=wz.bind(null,to,r),[n.memoizedState,r]},useRef:UJ,useState:pw,useDebugValue:bz,useDeferredValue:function(r){var e=pw(r),t=e[0],n=e[1];return VJ(function(){var i=Fl.transition;Fl.transition=1;try{n(r)}finally{Fl.transition=i}},[r]),t},useTransition:function(){var r=pw(!1),e=r[0];return r=K8e.bind(null,r[1]),UJ(r),[r,e]},useMutableSource:function(r,e,t){var n=Ym();return n.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:r,subscribe:t},hte(n,r,e,t)},useOpaqueIdentifier:function(){if(Nc){var r=!1,e=G8e(function(){throw r||(r=!0,t("r:"+($j++).toString(36))),Error(Ot(355))}),t=pw(e)[1];return(to.mode&2)===0&&(to.flags|=516,jA(5,function(){t("r:"+($j++).toString(36))},void 0,null)),e}return e="r:"+($j++).toString(36),pw(e),e},unstable_isNewReconciler:!1},Q8e={readContext:zl,useCallback:gte,useContext:zl,useEffect:zA,useImperativeHandle:mte,useLayoutEffect:pte,useMemo:vte,useReducer:hw,useRef:FA,useState:function(){return hw(Oc)},useDebugValue:bz,useDeferredValue:function(r){var e=hw(Oc),t=e[0],n=e[1];return zA(function(){var i=Fl.transition;Fl.transition=1;try{n(r)}finally{Fl.transition=i}},[r]),t},useTransition:function(){var r=hw(Oc)[0];return[FA().current,r]},useMutableSource:fte,useOpaqueIdentifier:function(){return hw(Oc)[0]},unstable_isNewReconciler:!1},J8e={readContext:zl,useCallback:gte,useContext:zl,useEffect:zA,useImperativeHandle:mte,useLayoutEffect:pte,useMemo:vte,useReducer:fw,useRef:FA,useState:function(){return fw(Oc)},useDebugValue:bz,useDeferredValue:function(r){var e=fw(Oc),t=e[0],n=e[1];return zA(function(){var i=Fl.transition;Fl.transition=1;try{n(r)}finally{Fl.transition=i}},[r]),t},useTransition:function(){var r=fw(Oc)[0];return[FA().current,r]},useMutableSource:fte,useOpaqueIdentifier:function(){return fw(Oc)[0]},unstable_isNewReconciler:!1},eHe=tg.ReactCurrentOwner,Fu=!1;function Ms(r,e,t,n){e.child=r===null?ute(e,null,t,n):NA(e,r.child,t,n)}function GJ(r,e,t,n,i){t=t.render;var o=e.ref;return Dy(e,i),n=_z(r,e,t,n,o,i),r!==null&&!Fu?(e.updateQueue=r.updateQueue,e.flags&=-517,r.lanes&=~i,$h(r,e,i)):(e.flags|=1,Ms(r,e,n,i),e.child)}function $J(r,e,t,n,i,o){if(r===null){var l=t.type;return typeof l=="function"&&!Az(l)&&l.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=l,yte(r,e,l,n,i,o)):(r=bA(t.type,null,n,e,e.mode,o),r.ref=e.ref,r.return=e,e.child=r)}return l=r.child,(i&o)===0&&(i=l.memoizedProps,t=t.compare,t=t!==null?t:Bw,t(i,n)&&r.ref===e.ref)?$h(r,e,o):(e.flags|=1,r=Np(l,n),r.ref=e.ref,r.return=e,e.child=r)}function yte(r,e,t,n,i,o){if(r!==null&&Bw(r.memoizedProps,n)&&r.ref===e.ref)if(Fu=!1,(o&i)!==0)(r.flags&16384)!==0&&(Fu=!0);else return e.lanes=r.lanes,$h(r,e,o);return MF(r,e,t,n,o)}function Yj(r,e,t){var n=e.pendingProps,i=n.children,o=r!==null?r.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding"){if((e.mode&4)===0)e.memoizedState={baseLanes:0},hA(e,t);else if((t&1073741824)!==0)e.memoizedState={baseLanes:0},hA(e,o!==null?o.baseLanes:t);else return r=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r},hA(e,r),null;}else o!==null?(n=o.baseLanes|t,e.memoizedState=null):n=t,hA(e,n);return Ms(r,e,i,t),e.child}function _te(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=128)}function MF(r,e,t,n,i){var o=Cs(t)?Xm:Oa.current;return o=zy(e,o),Dy(e,i),t=_z(r,e,t,n,o,i),r!==null&&!Fu?(e.updateQueue=r.updateQueue,e.flags&=-517,r.lanes&=~i,$h(r,e,i)):(e.flags|=1,Ms(r,e,t,i),e.child)}function HJ(r,e,t,n,i){if(Cs(t)){var o=!0;gA(e)}else o=!1;if(Dy(e,i),e.stateNode===null)r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2),ste(e,t,n),EF(e,t,n,i),n=!0;else if(r===null){var l=e.stateNode,c=e.memoizedProps;l.props=c;var p=l.context,g=t.contextType;typeof g=="object"&&g!==null?g=zl(g):(g=Cs(t)?Xm:Oa.current,g=zy(e,g));var _=t.getDerivedStateFromProps,x=typeof _=="function"||typeof l.getSnapshotBeforeUpdate=="function";x||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==n||p!==g)&&qJ(e,l,n,g),yp=!1;var T=e.memoizedState;l.state=T,Gw(e,n,l,i),p=e.memoizedState,c!==n||T!==p||As.current||yp?(typeof _=="function"&&(DA(e,t,_,n),p=e.memoizedState),(c=yp||kJ(e,t,c,n,T,p,g))?(x||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4)):(typeof l.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=n,e.memoizedState=p),l.props=n,l.state=p,l.context=g,n=c):(typeof l.componentDidMount=="function"&&(e.flags|=4),n=!1)}else{l=e.stateNode,ote(r,e),c=e.memoizedProps,g=e.type===e.elementType?c:ju(e.type,c),l.props=g,x=e.pendingProps,T=l.context,p=t.contextType,typeof p=="object"&&p!==null?p=zl(p):(p=Cs(t)?Xm:Oa.current,p=zy(e,p));var C=t.getDerivedStateFromProps;(_=typeof C=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==x||T!==p)&&qJ(e,l,n,p),yp=!1,T=e.memoizedState,l.state=T,Gw(e,n,l,i);var D=e.memoizedState;c!==x||T!==D||As.current||yp?(typeof C=="function"&&(DA(e,t,C,n),D=e.memoizedState),(g=yp||kJ(e,t,g,n,T,D,p))?(_||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,D,p),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,D,p)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof l.componentDidUpdate!="function"||c===r.memoizedProps&&T===r.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===r.memoizedProps&&T===r.memoizedState||(e.flags|=256),e.memoizedProps=n,e.memoizedState=D),l.props=n,l.state=D,l.context=p,n=g):(typeof l.componentDidUpdate!="function"||c===r.memoizedProps&&T===r.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===r.memoizedProps&&T===r.memoizedState||(e.flags|=256),n=!1)}return AF(r,e,t,n,o,i)}function AF(r,e,t,n,i,o){_te(r,e);var l=(e.flags&64)!==0;if(!n&&!l)return i&&RJ(e,t,!1),$h(r,e,o);n=e.stateNode,eHe.current=e;var c=l&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&l?(e.child=NA(e,r.child,null,o),e.child=NA(e,null,c,o)):Ms(r,e,c,o),e.memoizedState=n.state,i&&RJ(e,t,!0),e.child}function WJ(r){var e=r.stateNode;e.pendingContext?PJ(r,e.pendingContext,e.pendingContext!==e.context):e.context&&PJ(r,e.context,!1),SF(r,e.containerInfo)}var cA={dehydrated:null,retryLane:0};function ZJ(r,e,t){var n=e.pendingProps,i=$i.current,o=!1,l;return(l=(e.flags&64)!==0)||(l=r!==null&&r.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-65):r!==null&&r.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),Hi($i,i&1),r===null?(n.fallback!==void 0&&TF(e),r=n.children,i=n.fallback,o?(r=YJ(e,r,i,t),e.child.memoizedState={baseLanes:t},e.memoizedState=cA,r):typeof n.unstable_expectedLoadTime=="number"?(r=YJ(e,r,i,t),e.child.memoizedState={baseLanes:t},e.memoizedState=cA,e.lanes=33554432,r):(t=Cz({mode:"visible",children:r},e.mode,t,null),t.return=e,e.child=t)):r.memoizedState!==null?o?(n=XJ(r,e,n.children,n.fallback,t),o=e.child,i=r.child.memoizedState,o.memoizedState=i===null?{baseLanes:t}:{baseLanes:i.baseLanes|t},o.childLanes=r.childLanes&~t,e.memoizedState=cA,n):(t=KJ(r,e,n.children,t),e.memoizedState=null,t):o?(n=XJ(r,e,n.children,n.fallback,t),o=e.child,i=r.child.memoizedState,o.memoizedState=i===null?{baseLanes:t}:{baseLanes:i.baseLanes|t},o.childLanes=r.childLanes&~t,e.memoizedState=cA,n):(t=KJ(r,e,n.children,t),e.memoizedState=null,t)}function YJ(r,e,t,n){var i=r.mode,o=r.child;return e={mode:"hidden",children:e},(i&2)===0&&o!==null?(o.childLanes=0,o.pendingProps=e):o=Cz(e,i,0,null),t=jy(t,i,n,null),o.return=r,t.return=r,o.sibling=t,r.child=o,t}function KJ(r,e,t,n){var i=r.child;return r=i.sibling,t=Np(i,{mode:"visible",children:t}),(e.mode&2)===0&&(t.lanes=n),t.return=e,t.sibling=null,r!==null&&(r.nextEffect=null,r.flags=8,e.firstEffect=e.lastEffect=r),e.child=t}function XJ(r,e,t,n,i){var o=e.mode,l=r.child;r=l.sibling;var c={mode:"hidden",children:t};return(o&2)===0&&e.child!==l?(t=e.child,t.childLanes=0,t.pendingProps=c,l=t.lastEffect,l!==null?(e.firstEffect=t.firstEffect,e.lastEffect=l,l.nextEffect=null):e.firstEffect=e.lastEffect=null):t=Np(l,c),r!==null?n=Np(r,n):(n=jy(n,o,i,null),n.flags|=2),n.return=e,t.return=e,t.sibling=n,e.child=t,n}function QJ(r,e){r.lanes|=e;var t=r.alternate;t!==null&&(t.lanes|=e),ite(r.return,e)}function Kj(r,e,t,n,i,o){var l=r.memoizedState;l===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i,lastEffect:o}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=t,l.tailMode=i,l.lastEffect=o)}function JJ(r,e,t){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(Ms(r,e,n.children,t),n=$i.current,(n&2)!==0)n=n&1|2,e.flags|=64;else{if(r!==null&&(r.flags&64)!==0)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&QJ(r,t);else if(r.tag===19)QJ(r,t);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(Hi($i,n),(e.mode&2)===0)e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&kA(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Kj(e,!1,i,t,o,e.lastEffect);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&kA(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}Kj(e,!0,t,null,o,e.lastEffect);break;case"together":Kj(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function $h(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),Xw|=e.lanes,(t&e.childLanes)!==0){if(r!==null&&e.child!==r.child)throw Error(Ot(153));if(e.child!==null){for(r=e.child,t=Np(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=Np(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}return null}var xte,CF,bte,wte;xte=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};CF=function(){};bte=function(r,e,t,n){var i=r.memoizedProps;if(i!==n){r=e.stateNode,Zm(Dc.current);var o=null;switch(t){case"input":i=rF(r,i),n=rF(r,n),o=[];break;case"option":i=oF(r,i),n=oF(r,n),o=[];break;case"select":i=Si({},i,{value:void 0}),n=Si({},n,{value:void 0}),o=[];break;case"textarea":i=aF(r,i),n=aF(r,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=AA)}uF(t,n);var l;t=null;for(g in i)if(!n.hasOwnProperty(g)&&i.hasOwnProperty(g)&&i[g]!=null)if(g==="style"){var c=i[g];for(l in c)c.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Dw.hasOwnProperty(g)?o||(o=[]):(o=o||[]).push(g,null));for(g in n){var p=n[g];if(c=i!=null?i[g]:void 0,n.hasOwnProperty(g)&&p!==c&&(p!=null||c!=null))if(g==="style"){if(c){for(l in c)!c.hasOwnProperty(l)||p&&p.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in p)p.hasOwnProperty(l)&&c[l]!==p[l]&&(t||(t={}),t[l]=p[l])}else t||(o||(o=[]),o.push(g,t)),t=p;}else g==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,c=c?c.__html:void 0,p!=null&&c!==p&&(o=o||[]).push(g,p)):g==="children"?typeof p!="string"&&typeof p!="number"||(o=o||[]).push(g,""+p):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Dw.hasOwnProperty(g)?(p!=null&&g==="onScroll"&&yi("scroll",r),o||c===p||(o=[])):typeof p=="object"&&p!==null&&p.$$typeof===YF?p.toString():(o=o||[]).push(g,p))}t&&(o=o||[]).push("style",t);var g=o;(e.updateQueue=g)&&(e.flags|=4)}};wte=function(r,e,t,n){t!==n&&(e.flags|=4)};function dw(r,e){if(!Nc)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function tHe(r,e,t){var n=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Cs(e.type)&&PA(),null;case 3:return Uy(),_i(As),_i(Oa),vz(),n=e.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(uA(e)?e.flags|=4:n.hydrate||(e.flags|=256)),CF(e),null;case 5:gz(e);var i=Zm(Hw.current);if(t=e.type,r!==null&&e.stateNode!=null)bte(r,e,t,n,i),r.ref!==e.ref&&(e.flags|=128);else{if(!n){if(e.stateNode===null)throw Error(Ot(166));return null}if(r=Zm(Dc.current),uA(e)){n=e.stateNode,t=e.type;var o=e.memoizedProps;switch(n[bp]=e,n[CA]=o,t){case"dialog":yi("cancel",n),yi("close",n);break;case"iframe":case"object":case"embed":yi("load",n);break;case"video":case"audio":for(r=0;r<_w.length;r++)yi(_w[r],n);break;case"source":yi("error",n);break;case"img":case"image":case"link":yi("error",n),yi("load",n);break;case"details":yi("toggle",n);break;case"input":tJ(n,o),yi("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},yi("invalid",n);break;case"textarea":nJ(n,o),yi("invalid",n)}uF(t,o),r=null;for(var l in o)o.hasOwnProperty(l)&&(i=o[l],l==="children"?typeof i=="string"?n.textContent!==i&&(r=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(r=["children",""+i]):Dw.hasOwnProperty(l)&&i!=null&&l==="onScroll"&&yi("scroll",n));switch(t){case"input":eA(n),rJ(n,o,!0);break;case"textarea":eA(n),iJ(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=AA)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{switch(l=i.nodeType===9?i:i.ownerDocument,r===sF.html&&(r=mee(t)),r===sF.html?t==="script"?(r=l.createElement("div"),r.innerHTML="<script></script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=l.createElement(t,{is:n.is}):(r=l.createElement(t),t==="select"&&(l=r,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):r=l.createElementNS(r,t),r[bp]=e,r[CA]=n,xte(r,e,!1,!1),e.stateNode=r,l=cF(t,n),t){case"dialog":yi("cancel",r),yi("close",r),i=n;break;case"iframe":case"object":case"embed":yi("load",r),i=n;break;case"video":case"audio":for(i=0;i<_w.length;i++)yi(_w[i],r);i=n;break;case"source":yi("error",r),i=n;break;case"img":case"image":case"link":yi("error",r),yi("load",r),i=n;break;case"details":yi("toggle",r),i=n;break;case"input":tJ(r,n),i=rF(r,n),yi("invalid",r);break;case"option":i=oF(r,n);break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=Si({},n,{value:void 0}),yi("invalid",r);break;case"textarea":nJ(r,n),i=aF(r,n),yi("invalid",r);break;default:i=n}uF(t,i);var c=i;for(o in c)if(c.hasOwnProperty(o)){var p=c[o];o==="style"?yee(r,p):o==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&gee(r,p)):o==="children"?typeof p=="string"?(t!=="textarea"||p!=="")&&Nw(r,p):typeof p=="number"&&Nw(r,""+p):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Dw.hasOwnProperty(o)?p!=null&&o==="onScroll"&&yi("scroll",r):p!=null&&VF(r,o,p,l))}switch(t){case"input":eA(r),rJ(r,n,!1);break;case"textarea":eA(r),iJ(r);break;case"option":n.value!=null&&r.setAttribute("value",""+Rp(n.value));break;case"select":r.multiple=!!n.multiple,o=n.value,o!=null?Py(r,!!n.multiple,o,!1):n.defaultValue!=null&&Py(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=AA)}Yee(t,n)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(r&&e.stateNode!=null)wte(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Ot(166));t=Zm(Hw.current),Zm(Dc.current),uA(e)?(n=e.stateNode,t=e.memoizedProps,n[bp]=e,n.nodeValue!==t&&(e.flags|=4)):(n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[bp]=e,e.stateNode=n)}return null;case 13:return _i($i),n=e.memoizedState,(e.flags&64)!==0?(e.lanes=t,e):(n=n!==null,t=!1,r===null?e.memoizedProps.fallback!==void 0&&uA(e):t=r.memoizedState!==null,n&&!t&&(e.mode&2)!==0&&(r===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||($i.current&1)!==0?ca===0&&(ca=3):((ca===0||ca===3)&&(ca=4),ns===null||(Xw&134217727)===0&&(Hy&134217727)===0||ky(ns,Ra))),(n||t)&&(e.flags|=4),null);case 4:return Uy(),CF(e),r===null&&Hee(e.stateNode.containerInfo),null;case 10:return dz(e),null;case 17:return Cs(e.type)&&PA(),null;case 19:if(_i($i),n=e.memoizedState,n===null)return null;if(o=(e.flags&64)!==0,l=n.rendering,l===null){if(o)dw(n,!1);else{if(ca!==0||r!==null&&(r.flags&64)!==0)for(r=e.child;r!==null;){if(l=kA(r),l!==null){for(e.flags|=64,dw(n,!1),o=l.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),n.lastEffect===null&&(e.firstEffect=null),e.lastEffect=n.lastEffect,n=t,t=e.child;t!==null;)o=t,r=n,o.flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,l=o.alternate,l===null?(o.childLanes=0,o.lanes=r,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,r=l.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return Hi($i,$i.current&1|2),e.child}r=r.sibling}n.tail!==null&&Pa()>NF&&(e.flags|=64,o=!0,dw(n,!1),e.lanes=33554432)}}else{if(!o)if(r=kA(l),r!==null){if(e.flags|=64,o=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),dw(n,!0),n.tail===null&&n.tailMode==="hidden"&&!l.alternate&&!Nc)return e=e.lastEffect=n.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*Pa()-n.renderingStartTime>NF&&t!==1073741824&&(e.flags|=64,o=!0,dw(n,!1),e.lanes=33554432);n.isBackwards?(l.sibling=e.child,e.child=l):(t=n.last,t!==null?t.sibling=l:e.child=l,n.last=l)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.lastEffect=e.lastEffect,n.renderingStartTime=Pa(),t.sibling=null,e=$i.current,Hi($i,o?e&1|2:e&1),t):null;case 23:case 24:return Mz(),r!==null&&r.memoizedState!==null!=(e.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(Ot(156,e.tag))}function rHe(r){switch(r.tag){case 1:Cs(r.type)&&PA();var e=r.flags;return e&4096?(r.flags=e&-4097|64,r):null;case 3:if(Uy(),_i(As),_i(Oa),vz(),e=r.flags,(e&64)!==0)throw Error(Ot(285));return r.flags=e&-4097|64,r;case 5:return gz(r),null;case 13:return _i($i),e=r.flags,e&4096?(r.flags=e&-4097|64,r):null;case 19:return _i($i),null;case 4:return Uy(),null;case 10:return dz(r),null;case 23:case 24:return Mz(),null;default:return null}}function Ez(r,e){try{var t="",n=e;do t+=k$e(n),n=n.return;while(n);var i=t}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:r,source:e,stack:i}}function PF(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var nHe=typeof WeakMap=="function"?WeakMap:Map;function Ete(r,e,t){t=Ip(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){VA||(VA=!0,kF=n),PF(r,e)},t}function Ste(r,e,t){t=Ip(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return PF(r,e),n(i)}}var o=r.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){typeof n!="function"&&(Lc===null?Lc=new Set([this]):Lc.add(this),PF(r,e));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),t}var iHe=typeof WeakSet=="function"?WeakSet:Set;function eee(r){var e=r.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(t){Pp(r,t)}else e.current=null}function oHe(r,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&r!==null){var t=r.memoizedProps,n=r.memoizedState;r=e.stateNode,e=r.getSnapshotBeforeUpdate(e.elementType===e.type?t:ju(e.type,t),n),r.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&cz(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Ot(163))}function aHe(r,e,t){switch(t.tag){case 0:case 11:case 15:case 22:if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){r=e=e.next;do{if((r.tag&3)===3){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){r=e=e.next;do{var i=r;n=i.next,i=i.tag,(i&4)!==0&&(i&1)!==0&&(Lte(t,r),dHe(t,r)),r=n}while(r!==e)}return;case 1:r=t.stateNode,t.flags&4&&(e===null?r.componentDidMount():(n=t.elementType===t.type?e.memoizedProps:ju(t.type,e.memoizedProps),r.componentDidUpdate(n,e.memoizedState,r.__reactInternalSnapshotBeforeUpdate))),e=t.updateQueue,e!==null&&NJ(t,e,r);return;case 3:if(e=t.updateQueue,e!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}NJ(t,e,r)}return;case 5:r=t.stateNode,e===null&&t.flags&4&&Yee(t.type,t.memoizedProps)&&r.focus();return;case 6:return;case 4:return;case 12:return;case 13:t.memoizedState===null&&(t=t.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&Aee(t))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Ot(163))}function tee(r,e){for(var t=r;;){if(t.tag===5){var n=t.stateNode;if(e)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=t.stateNode;var i=t.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=vee("display",i)}}else if(t.tag===6)t.stateNode.nodeValue=e?"":t.memoizedProps;else if((t.tag!==23&&t.tag!==24||t.memoizedState===null||t===r)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function ree(r,e){if(Km&&typeof Km.onCommitFiberUnmount=="function")try{Km.onCommitFiberUnmount(hz,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(r=e.updateQueue,r!==null&&(r=r.lastEffect,r!==null)){var t=r=r.next;do{var n=t,i=n.destroy;if(n=n.tag,i!==void 0)if((n&4)!==0)Lte(e,t);else{n=e;try{i()}catch(o){Pp(n,o)}}t=t.next}while(t!==r)}break;case 1:if(eee(e),r=e.stateNode,typeof r.componentWillUnmount=="function")try{r.props=e.memoizedProps,r.state=e.memoizedState,r.componentWillUnmount()}catch(o){Pp(e,o)}break;case 5:eee(e);break;case 4:Tte(r,e)}}function nee(r){r.alternate=null,r.child=null,r.dependencies=null,r.firstEffect=null,r.lastEffect=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.return=null,r.updateQueue=null}function iee(r){return r.tag===5||r.tag===3||r.tag===4}function oee(r){e:{for(var e=r.return;e!==null;){if(iee(e))break e;e=e.return}throw Error(Ot(160))}var t=e;switch(e=t.stateNode,t.tag){case 5:var n=!1;break;case 3:e=e.containerInfo,n=!0;break;case 4:e=e.containerInfo,n=!0;break;default:throw Error(Ot(161))}t.flags&16&&(Nw(e,""),t.flags&=-17);e:t:for(t=r;;){for(;t.sibling===null;){if(t.return===null||iee(t.return)){t=null;break e}t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2)){t=t.stateNode;break e}}n?RF(r,t,e):OF(r,t,e)}function RF(r,e,t){var n=r.tag,i=n===5||n===6;if(i)r=i?r.stateNode:r.stateNode.instance,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=AA));else if(n!==4&&(r=r.child,r!==null))for(RF(r,e,t),r=r.sibling;r!==null;)RF(r,e,t),r=r.sibling}function OF(r,e,t){var n=r.tag,i=n===5||n===6;if(i)r=i?r.stateNode:r.stateNode.instance,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(OF(r,e,t),r=r.sibling;r!==null;)OF(r,e,t),r=r.sibling}function Tte(r,e){for(var t=e,n=!1,i,o;;){if(!n){n=t.return;e:for(;;){if(n===null)throw Error(Ot(160));switch(i=n.stateNode,n.tag){case 5:o=!1;break e;case 3:i=i.containerInfo,o=!0;break e;case 4:i=i.containerInfo,o=!0;break e}n=n.return}n=!0}if(t.tag===5||t.tag===6){e:for(var l=r,c=t,p=c;;)if(ree(l,p),p.child!==null&&p.tag!==4)p.child.return=p,p=p.child;else{if(p===c)break e;for(;p.sibling===null;){if(p.return===null||p.return===c)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}o?(l=i,c=t.stateNode,l.nodeType===8?l.parentNode.removeChild(c):l.removeChild(c)):i.removeChild(t.stateNode)}else if(t.tag===4){if(t.child!==null){i=t.stateNode.containerInfo,o=!0,t.child.return=t,t=t.child;continue}}else if(ree(r,t),t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return,t.tag===4&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function Xj(r,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var t=e.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do(n.tag&3)===3&&(r=n.destroy,n.destroy=void 0,r!==void 0&&r()),n=n.next;while(n!==t)}return;case 1:return;case 5:if(t=e.stateNode,t!=null){n=e.memoizedProps;var i=r!==null?r.memoizedProps:n;r=e.type;var o=e.updateQueue;if(e.updateQueue=null,o!==null){for(t[CA]=n,r==="input"&&n.type==="radio"&&n.name!=null&&pee(t,n),cF(r,i),e=cF(r,n),i=0;i<o.length;i+=2){var l=o[i],c=o[i+1];l==="style"?yee(t,c):l==="dangerouslySetInnerHTML"?gee(t,c):l==="children"?Nw(t,c):VF(t,l,c,e)}switch(r){case"input":nF(t,n);break;case"textarea":dee(t,n);break;case"select":r=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!n.multiple,o=n.value,o!=null?Py(t,!!n.multiple,o,!1):r!==!!n.multiple&&(n.defaultValue!=null?Py(t,!!n.multiple,n.defaultValue,!0):Py(t,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(Ot(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:t=e.stateNode,t.hydrate&&(t.hydrate=!1,Aee(t.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(Iz=Pa(),tee(e.child,!0)),aee(e);return;case 19:aee(e);return;case 17:return;case 23:case 24:tee(e,e.memoizedState!==null);return}throw Error(Ot(163))}function aee(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new iHe),e.forEach(function(n){var i=vHe.bind(null,r,n);t.has(n)||(t.add(n),n.then(i,i))})}}function sHe(r,e){return r!==null&&(r=r.memoizedState,r===null||r.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var lHe=Math.ceil,UA=tg.ReactCurrentDispatcher,Sz=tg.ReactCurrentOwner,Pr=0,ns=null,Do=null,Ra=0,Jm=0,LF=kp(0),ca=0,rC=null,$y=0,Xw=0,Hy=0,Tz=0,DF=null,Iz=0,NF=1/0;function Wy(){NF=Pa()+500}var Qt=null,VA=!1,kF=null,Lc=null,Dp=!1,Rw=null,xw=90,qF=[],jF=[],Hh=null,Ow=0,FF=null,yA=-1,Vh=0,_A=0,Lw=null,xA=!1;function hl(){return(Pr&48)!==0?Pa():yA!==-1?yA:yA=Pa()}function Ap(r){if(r=r.mode,(r&2)===0)return 1;if((r&4)===0)return By()===99?1:2;if(Vh===0&&(Vh=$y),Y8e.transition!==0){_A!==0&&(_A=DF!==null?DF.pendingLanes:0),r=Vh;var e=4186112&~_A;return e&=-e,e===0&&(r=4186112&~r,e=r&-r,e===0&&(e=8192)),e}return r=By(),(Pr&4)!==0&&r===98?r=IA(12,Vh):(r=Q$e(r),r=IA(r,Vh)),r}function Cp(r,e,t){if(50<Ow)throw Ow=0,FF=null,Error(Ot(185));if(r=nC(r,e),r===null)return null;YA(r,e,t),r===ns&&(Hy|=e,ca===4&&ky(r,Ra));var n=By();e===1?(Pr&8)!==0&&(Pr&48)===0?zF(r):(Bl(r,t),Pr===0&&(Wy(),kc())):((Pr&4)===0||n!==98&&n!==99||(Hh===null?Hh=new Set([r]):Hh.add(r)),Bl(r,t)),DF=r}function nC(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}function Bl(r,e){for(var t=r.callbackNode,n=r.suspendedLanes,i=r.pingedLanes,o=r.expirationTimes,l=r.pendingLanes;0<l;){var c=31-Op(l),p=1<<c,g=o[c];if(g===-1){if((p&n)===0||(p&i)!==0){g=e,by(p);var _=li;o[c]=10<=_?g+250:6<=_?g+5e3:-1}}else g<=e&&(r.expiredLanes|=p);l&=~p}if(n=Fw(r,r===ns?Ra:0),e=li,n===0)t!==null&&(t!==Hj&&bF(t),r.callbackNode=null,r.callbackPriority=0);else{if(t!==null){if(r.callbackPriority===e)return;t!==Hj&&bF(t)}e===15?(t=zF.bind(null,r),Uh===null?(Uh=[t],vA=fz(eC,nte)):Uh.push(t),t=Hj):e===14?t=Vw(99,zF.bind(null,r)):(t=J$e(e),t=Vw(t,Ite.bind(null,r))),r.callbackPriority=e,r.callbackNode=t}}function Ite(r){if(yA=-1,_A=Vh=0,(Pr&48)!==0)throw Error(Ot(327));var e=r.callbackNode;if(qp()&&r.callbackNode!==e)return null;var t=Fw(r,r===ns?Ra:0);if(t===0)return null;var n=t,i=Pr;Pr|=16;var o=Pte();(ns!==r||Ra!==n)&&(Wy(),qy(r,n));do try{hHe();break}catch(c){Cte(r,c)}while(!0);if(pz(),UA.current=o,Pr=i,Do!==null?n=0:(ns=null,Ra=0,n=ca),($y&Hy)!==0)qy(r,0);else if(n!==0){if(n===2&&(Pr|=64,r.hydrate&&(r.hydrate=!1,cz(r.containerInfo)),t=Nee(r),t!==0&&(n=bw(r,t))),n===1)throw e=rC,qy(r,0),ky(r,t),Bl(r,Pa()),e;switch(r.finishedWork=r.current.alternate,r.finishedLanes=t,n){case 0:case 1:throw Error(Ot(345));case 2:Gm(r);break;case 3:if(ky(r,t),(t&62914560)===t&&(n=Iz+500-Pa(),10<n)){if(Fw(r,0)!==0)break;if(i=r.suspendedLanes,(i&t)!==t){hl(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=MJ(Gm.bind(null,r),n);break}Gm(r);break;case 4:if(ky(r,t),(t&4186112)===t)break;for(n=r.eventTimes,i=-1;0<t;){var l=31-Op(t);o=1<<l,l=n[l],l>i&&(i=l),t&=~o}if(t=i,t=Pa()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*lHe(t/1960))-t,10<t){r.timeoutHandle=MJ(Gm.bind(null,r),t);break}Gm(r);break;case 5:Gm(r);break;default:throw Error(Ot(329))}}return Bl(r,Pa()),r.callbackNode===e?Ite.bind(null,r):null}function ky(r,e){for(e&=~Tz,e&=~Hy,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-Op(e),n=1<<t;r[t]=-1,e&=~n}}function zF(r){if((Pr&48)!==0)throw Error(Ot(327));if(qp(),r===ns&&(r.expiredLanes&Ra)!==0){var e=Ra,t=bw(r,e);($y&Hy)!==0&&(e=Fw(r,e),t=bw(r,e))}else e=Fw(r,0),t=bw(r,e);if(r.tag!==0&&t===2&&(Pr|=64,r.hydrate&&(r.hydrate=!1,cz(r.containerInfo)),e=Nee(r),e!==0&&(t=bw(r,e))),t===1)throw t=rC,qy(r,0),ky(r,e),Bl(r,Pa()),t;return r.finishedWork=r.current.alternate,r.finishedLanes=e,Gm(r),Bl(r,Pa()),null}function uHe(){if(Hh!==null){var r=Hh;Hh=null,r.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,Bl(e,Pa())})}kc()}function Mte(r,e){var t=Pr;Pr|=1;try{return r(e)}finally{Pr=t,Pr===0&&(Wy(),kc())}}function Ate(r,e){var t=Pr;Pr&=-2,Pr|=8;try{return r(e)}finally{Pr=t,Pr===0&&(Wy(),kc())}}function hA(r,e){Hi(LF,Jm),Jm|=e,$y|=e}function Mz(){Jm=LF.current,_i(LF)}function qy(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,V8e(t)),Do!==null)for(t=Do.return;t!==null;){var n=t;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&PA();break;case 3:Uy(),_i(As),_i(Oa),vz();break;case 5:gz(n);break;case 4:Uy();break;case 13:_i($i);break;case 19:_i($i);break;case 10:dz(n);break;case 23:case 24:Mz()}t=t.return}ns=r,Do=Np(r.current,null),Ra=Jm=$y=e,ca=0,rC=null,Tz=Hy=Xw=0}function Cte(r,e){do{var t=Do;try{if(pz(),Cw.current=BA,qA){for(var n=to.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}qA=!1}if(Ww=0,ua=Ca=to=null,Pw=!1,Sz.current=null,t===null||t.return===null){ca=1,rC=e,Do=null;break}e:{var o=r,l=t.return,c=t,p=e;if(e=Ra,c.flags|=2048,c.firstEffect=c.lastEffect=null,p!==null&&typeof p=="object"&&typeof p.then=="function"){var g=p;if((c.mode&2)===0){var _=c.alternate;_?(c.updateQueue=_.updateQueue,c.memoizedState=_.memoizedState,c.lanes=_.lanes):(c.updateQueue=null,c.memoizedState=null)}var x=($i.current&1)!==0,T=l;do{var C;if(C=T.tag===13){var D=T.memoizedState;if(D!==null)C=D.dehydrated!==null;else{var F=T.memoizedProps;C=F.fallback===void 0?!1:F.unstable_avoidThisFallback!==!0?!0:!x}}if(C){var O=T.updateQueue;if(O===null){var k=new Set;k.add(g),T.updateQueue=k}else O.add(g);if((T.mode&2)===0){if(T.flags|=64,c.flags|=16384,c.flags&=-2981,c.tag===1)if(c.alternate===null)c.tag=17;else{var q=Ip(-1,1);q.tag=2,Mp(c,q)}c.lanes|=1;break e}p=void 0,c=e;var U=o.pingCache;if(U===null?(U=o.pingCache=new nHe,p=new Set,U.set(g,p)):(p=U.get(g),p===void 0&&(p=new Set,U.set(g,p))),!p.has(c)){p.add(c);var H=gHe.bind(null,o,g,c);g.then(H,H)}T.flags|=4096,T.lanes=e;break e}T=T.return}while(T!==null);p=Error((Cy(c.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}ca!==5&&(ca=2),p=Ez(p,c),T=l;do{switch(T.tag){case 3:o=p,T.flags|=4096,e&=-e,T.lanes|=e;var se=Ete(T,o,e);DJ(T,se);break e;case 1:o=p;var ie=T.type,ue=T.stateNode;if((T.flags&64)===0&&(typeof ie.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(Lc===null||!Lc.has(ue)))){T.flags|=4096,e&=-e,T.lanes|=e;var ve=Ste(T,o,e);DJ(T,ve);break e}}T=T.return}while(T!==null)}Ote(t)}catch(ye){e=ye,Do===t&&t!==null&&(Do=t=t.return);continue}break}while(!0)}function Pte(){var r=UA.current;return UA.current=BA,r===null?BA:r}function bw(r,e){var t=Pr;Pr|=16;var n=Pte();ns===r&&Ra===e||qy(r,e);do try{cHe();break}catch(i){Cte(r,i)}while(!0);if(pz(),Pr=t,UA.current=n,Do!==null)throw Error(Ot(261));return ns=null,Ra=0,ca}function cHe(){for(;Do!==null;)Rte(Do)}function hHe(){for(;Do!==null&&!H8e();)Rte(Do)}function Rte(r){var e=Dte(r.alternate,r,Jm);r.memoizedProps=r.pendingProps,e===null?Ote(r):Do=e,Sz.current=null}function Ote(r){var e=r;do{var t=e.alternate;if(r=e.return,(e.flags&2048)===0){if(t=tHe(t,e,Jm),t!==null){Do=t;return}if(t=e,t.tag!==24&&t.tag!==23||t.memoizedState===null||(Jm&1073741824)!==0||(t.mode&4)===0){for(var n=0,i=t.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;t.childLanes=n}r!==null&&(r.flags&2048)===0&&(r.firstEffect===null&&(r.firstEffect=e.firstEffect),e.lastEffect!==null&&(r.lastEffect!==null&&(r.lastEffect.nextEffect=e.firstEffect),r.lastEffect=e.lastEffect),1<e.flags&&(r.lastEffect!==null?r.lastEffect.nextEffect=e:r.firstEffect=e,r.lastEffect=e))}else{if(t=rHe(e),t!==null){t.flags&=2047,Do=t;return}r!==null&&(r.firstEffect=r.lastEffect=null,r.flags|=2048)}if(e=e.sibling,e!==null){Do=e;return}Do=e=r}while(e!==null);ca===0&&(ca=5)}function Gm(r){var e=By();return Qm(99,fHe.bind(null,r,e)),null}function fHe(r,e){do qp();while(Rw!==null);if((Pr&48)!==0)throw Error(Ot(327));var t=r.finishedWork;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(Ot(177));r.callbackNode=null;var n=t.lanes|t.childLanes,i=n,o=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;for(var l=r.eventTimes,c=r.expirationTimes;0<o;){var p=31-Op(o),g=1<<p;i[p]=0,l[p]=-1,c[p]=-1,o&=~g}if(Hh!==null&&(n&24)===0&&Hh.has(r)&&Hh.delete(r),r===ns&&(Do=ns=null,Ra=0),1<t.flags?t.lastEffect!==null?(t.lastEffect.nextEffect=t,n=t.firstEffect):n=t:n=t.firstEffect,n!==null){if(i=Pr,Pr|=32,Sz.current=null,Vj=pA,l=bJ(),gF(l)){if("selectionStart"in l)c={start:l.selectionStart,end:l.selectionEnd};else e:if(c=(c=l.ownerDocument)&&c.defaultView||window,(g=c.getSelection&&c.getSelection())&&g.rangeCount!==0){c=g.anchorNode,o=g.anchorOffset,p=g.focusNode,g=g.focusOffset;try{c.nodeType,p.nodeType}catch(ye){c=null;break e}var _=0,x=-1,T=-1,C=0,D=0,F=l,O=null;t:for(;;){for(var k;F!==c||o!==0&&F.nodeType!==3||(x=_+o),F!==p||g!==0&&F.nodeType!==3||(T=_+g),F.nodeType===3&&(_+=F.nodeValue.length),(k=F.firstChild)!==null;)O=F,F=k;for(;;){if(F===l)break t;if(O===c&&++C===o&&(x=_),O===p&&++D===g&&(T=_),(k=F.nextSibling)!==null)break;F=O,O=F.parentNode}F=k}c=x===-1||T===-1?null:{start:x,end:T}}else c=null;c=c||{start:0,end:0}}else c=null;Gj={focusedElem:l,selectionRange:c},pA=!1,Lw=null,xA=!1,Qt=n;do try{pHe()}catch(ye){if(Qt===null)throw Error(Ot(330));Pp(Qt,ye),Qt=Qt.nextEffect}while(Qt!==null);Lw=null,Qt=n;do try{for(l=r;Qt!==null;){var q=Qt.flags;if(q&16&&Nw(Qt.stateNode,""),q&128){var U=Qt.alternate;if(U!==null){var H=U.ref;H!==null&&(typeof H=="function"?H(null):H.current=null)}}switch(q&1038){case 2:oee(Qt),Qt.flags&=-3;break;case 6:oee(Qt),Qt.flags&=-3,Xj(Qt.alternate,Qt);break;case 1024:Qt.flags&=-1025;break;case 1028:Qt.flags&=-1025,Xj(Qt.alternate,Qt);break;case 4:Xj(Qt.alternate,Qt);break;case 8:c=Qt,Tte(l,c);var se=c.alternate;nee(c),se!==null&&nee(se)}Qt=Qt.nextEffect}}catch(ye){if(Qt===null)throw Error(Ot(330));Pp(Qt,ye),Qt=Qt.nextEffect}while(Qt!==null);if(H=Gj,U=bJ(),q=H.focusedElem,l=H.selectionRange,U!==q&&q&&q.ownerDocument&&Vee(q.ownerDocument.documentElement,q)){for(l!==null&&gF(q)&&(U=l.start,H=l.end,H===void 0&&(H=U),"selectionStart"in q?(q.selectionStart=U,q.selectionEnd=Math.min(H,q.value.length)):(H=(U=q.ownerDocument||document)&&U.defaultView||window,H.getSelection&&(H=H.getSelection(),c=q.textContent.length,se=Math.min(l.start,c),l=l.end===void 0?se:Math.min(l.end,c),!H.extend&&se>l&&(c=l,l=se,se=c),c=xJ(q,se),o=xJ(q,l),c&&o&&(H.rangeCount!==1||H.anchorNode!==c.node||H.anchorOffset!==c.offset||H.focusNode!==o.node||H.focusOffset!==o.offset)&&(U=U.createRange(),U.setStart(c.node,c.offset),H.removeAllRanges(),se>l?(H.addRange(U),H.extend(o.node,o.offset)):(U.setEnd(o.node,o.offset),H.addRange(U)))))),U=[],H=q;H=H.parentNode;)H.nodeType===1&&U.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<U.length;q++)H=U[q],H.element.scrollLeft=H.left,H.element.scrollTop=H.top}pA=!!Vj,Gj=Vj=null,r.current=t,Qt=n;do try{for(q=r;Qt!==null;){var ie=Qt.flags;if(ie&36&&aHe(q,Qt.alternate,Qt),ie&128){U=void 0;var ue=Qt.ref;if(ue!==null){var ve=Qt.stateNode;switch(Qt.tag){case 5:U=ve;break;default:U=ve}typeof ue=="function"?ue(U):ue.current=U}}Qt=Qt.nextEffect}}catch(ye){if(Qt===null)throw Error(Ot(330));Pp(Qt,ye),Qt=Qt.nextEffect}while(Qt!==null);Qt=null,Z8e(),Pr=i}else r.current=t;if(Dp)Dp=!1,Rw=r,xw=e;else for(Qt=n;Qt!==null;)e=Qt.nextEffect,Qt.nextEffect=null,Qt.flags&8&&(ie=Qt,ie.sibling=null,ie.stateNode=null),Qt=e;if(n=r.pendingLanes,n===0&&(Lc=null),n===1?r===FF?Ow++:(Ow=0,FF=r):Ow=0,t=t.stateNode,Km&&typeof Km.onCommitFiberRoot=="function")try{Km.onCommitFiberRoot(hz,t,void 0,(t.current.flags&64)===64)}catch(ye){}if(Bl(r,Pa()),VA)throw VA=!1,r=kF,kF=null,r;return(Pr&8)!==0||kc(),null}function pHe(){for(;Qt!==null;){var r=Qt.alternate;xA||Lw===null||((Qt.flags&8)!==0?sJ(Qt,Lw)&&(xA=!0):Qt.tag===13&&sHe(r,Qt)&&sJ(Qt,Lw)&&(xA=!0));var e=Qt.flags;(e&256)!==0&&oHe(r,Qt),(e&512)===0||Dp||(Dp=!0,Vw(97,function(){return qp(),null})),Qt=Qt.nextEffect}}function qp(){if(xw!==90){var r=97<xw?97:xw;return xw=90,Qm(r,mHe)}return!1}function dHe(r,e){qF.push(e,r),Dp||(Dp=!0,Vw(97,function(){return qp(),null}))}function Lte(r,e){jF.push(e,r),Dp||(Dp=!0,Vw(97,function(){return qp(),null}))}function mHe(){if(Rw===null)return!1;var r=Rw;if(Rw=null,(Pr&48)!==0)throw Error(Ot(331));var e=Pr;Pr|=32;var t=jF;jF=[];for(var n=0;n<t.length;n+=2){var i=t[n],o=t[n+1],l=i.destroy;if(i.destroy=void 0,typeof l=="function")try{l()}catch(p){if(o===null)throw Error(Ot(330));Pp(o,p)}}for(t=qF,qF=[],n=0;n<t.length;n+=2){i=t[n],o=t[n+1];try{var c=i.create;i.destroy=c()}catch(p){if(o===null)throw Error(Ot(330));Pp(o,p)}}for(c=r.current.firstEffect;c!==null;)r=c.nextEffect,c.nextEffect=null,c.flags&8&&(c.sibling=null,c.stateNode=null),c=r;return Pr=e,kc(),!0}function see(r,e,t){e=Ez(t,e),e=Ete(r,e,1),Mp(r,e),e=hl(),r=nC(r,1),r!==null&&(YA(r,1,e),Bl(r,e))}function Pp(r,e){if(r.tag===3)see(r,r,e);else for(var t=r.return;t!==null;){if(t.tag===3){see(t,r,e);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Lc===null||!Lc.has(n))){r=Ez(e,r);var i=Ste(t,r,1);if(Mp(t,i),i=hl(),t=nC(t,1),t!==null)YA(t,1,i),Bl(t,i);else if(typeof n.componentDidCatch=="function"&&(Lc===null||!Lc.has(n)))try{n.componentDidCatch(e,r)}catch(o){}break}}t=t.return}}function gHe(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=hl(),r.pingedLanes|=r.suspendedLanes&t,ns===r&&(Ra&t)===t&&(ca===4||ca===3&&(Ra&62914560)===Ra&&500>Pa()-Iz?qy(r,0):Tz|=t),Bl(r,e)}function vHe(r,e){var t=r.stateNode;t!==null&&t.delete(e),e=0,e===0&&(e=r.mode,(e&2)===0?e=1:(e&4)===0?e=By()===99?1:2:(Vh===0&&(Vh=$y),e=wy(62914560&~Vh),e===0&&(e=4194304))),t=hl(),r=nC(r,e),r!==null&&(YA(r,e,t),Bl(r,t))}var Dte;Dte=function(r,e,t){var n=e.lanes;if(r!==null){if(r.memoizedProps!==e.pendingProps||As.current)Fu=!0;else if((t&n)!==0)Fu=(r.flags&16384)!==0;else{switch(Fu=!1,e.tag){case 3:WJ(e),Zj();break;case 5:jJ(e);break;case 1:Cs(e.type)&&gA(e);break;case 4:SF(e,e.stateNode.containerInfo);break;case 10:n=e.memoizedProps.value;var i=e.type._context;Hi(RA,i._currentValue),i._currentValue=n;break;case 13:if(e.memoizedState!==null)return(t&e.child.childLanes)!==0?ZJ(r,e,t):(Hi($i,$i.current&1),e=$h(r,e,t),e!==null?e.sibling:null);Hi($i,$i.current&1);break;case 19:if(n=(t&e.childLanes)!==0,(r.flags&64)!==0){if(n)return JJ(r,e,t);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Hi($i,$i.current),n)break;return null;case 23:case 24:return e.lanes=0,Yj(r,e,t)}return $h(r,e,t)}}else Fu=!1;switch(e.lanes=0,e.tag){case 2:if(n=e.type,r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2),r=e.pendingProps,i=zy(e,Oa.current),Dy(e,t),i=_z(null,e,n,r,i,t),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Cs(n)){var o=!0;gA(e)}else o=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mz(e);var l=n.getDerivedStateFromProps;typeof l=="function"&&DA(e,n,l,r),i.updater=tC,e.stateNode=i,i._reactInternals=e,EF(e,n,r,t),e=AF(null,e,n,!0,o,t)}else e.tag=0,Ms(null,e,i,t),e=e.child;return e;case 16:i=e.elementType;e:{switch(r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2),r=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=_He(i),r=ju(i,r),o){case 0:e=MF(null,e,i,r,t);break e;case 1:e=HJ(null,e,i,r,t);break e;case 11:e=GJ(null,e,i,r,t);break e;case 14:e=$J(null,e,i,ju(i.type,r),n,t);break e}throw Error(Ot(306,i,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ju(n,i),MF(r,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ju(n,i),HJ(r,e,n,i,t);case 3:if(WJ(e),n=e.updateQueue,r===null||n===null)throw Error(Ot(282));if(n=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,ote(r,e),Gw(e,n,null,t),n=e.memoizedState.element,n===i)Zj(),e=$h(r,e,t);else{if(i=e.stateNode,(o=i.hydrate)&&(wp=Ly(e.stateNode.containerInfo.firstChild),Gh=e,o=Nc=!0),o){if(r=i.mutableSourceEagerHydrationData,r!=null)for(i=0;i<r.length;i+=2)o=r[i],o._workInProgressVersionPrimary=r[i+1],Ny.push(o);for(t=ute(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|1024,t=t.sibling}else Ms(r,e,n,t),Zj();e=e.child}return e;case 5:return jJ(e),r===null&&TF(e),n=e.type,i=e.pendingProps,o=r!==null?r.memoizedProps:null,l=i.children,_F(n,i)?l=null:o!==null&&_F(n,o)&&(e.flags|=16),_te(r,e),Ms(r,e,l,t),e.child;case 6:return r===null&&TF(e),null;case 13:return ZJ(r,e,t);case 4:return SF(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=NA(e,null,n,t):Ms(r,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ju(n,i),GJ(r,e,n,i,t);case 7:return Ms(r,e,e.pendingProps,t),e.child;case 8:return Ms(r,e,e.pendingProps.children,t),e.child;case 12:return Ms(r,e,e.pendingProps.children,t),e.child;case 10:e:{n=e.type._context,i=e.pendingProps,l=e.memoizedProps,o=i.value;var c=e.type._context;if(Hi(RA,c._currentValue),c._currentValue=o,l!==null)if(c=l.value,o=ql(c,o)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(c,o):1073741823)|0,o===0){if(l.children===i.children&&!As.current){e=$h(r,e,t);break e}}else for(c=e.child,c!==null&&(c.return=e);c!==null;){var p=c.dependencies;if(p!==null){l=c.child;for(var g=p.firstContext;g!==null;){if(g.context===n&&(g.observedBits&o)!==0){c.tag===1&&(g=Ip(-1,t&-t),g.tag=2,Mp(c,g)),c.lanes|=t,g=c.alternate,g!==null&&(g.lanes|=t),ite(c.return,t),p.lanes|=t;break}g=g.next}}else l=c.tag===10&&c.type===e.type?null:c.child;if(l!==null)l.return=c;else for(l=c;l!==null;){if(l===e){l=null;break}if(c=l.sibling,c!==null){c.return=l.return,l=c;break}l=l.return}c=l}Ms(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,o=e.pendingProps,n=o.children,Dy(e,t),i=zl(i,o.unstable_observedBits),n=n(i),e.flags|=1,Ms(r,e,n,t),e.child;case 14:return i=e.type,o=ju(i,e.pendingProps),o=ju(i.type,o),$J(r,e,i,o,n,t);case 15:return yte(r,e,e.type,e.pendingProps,n,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ju(n,i),r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Cs(n)?(r=!0,gA(e)):r=!1,Dy(e,t),ste(e,n,i),EF(e,n,i,t),AF(null,e,n,!0,r,t);case 19:return JJ(r,e,t);case 23:return Yj(r,e,t);case 24:return Yj(r,e,t)}throw Error(Ot(156,e.tag))};function yHe(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function jl(r,e,t,n){return new yHe(r,e,t,n)}function Az(r){return r=r.prototype,!(!r||!r.isReactComponent)}function _He(r){if(typeof r=="function")return Az(r)?1:0;if(r!=null){if(r=r.$$typeof,r===HA)return 11;if(r===WA)return 14}return 2}function Np(r,e){var t=r.alternate;return t===null?(t=jl(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.nextEffect=null,t.firstEffect=null,t.lastEffect=null),t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function bA(r,e,t,n,i,o){var l=2;if(n=r,typeof r=="function")Az(r)&&(l=1);else if(typeof r=="string")l=5;else e:switch(r){case _p:return jy(t.children,i,o,e);case cee:l=8,i|=16;break;case GF:l=8,i|=1;break;case ww:return r=jl(12,t,e,i|8),r.elementType=ww,r.type=ww,r.lanes=o,r;case Ew:return r=jl(13,t,e,i),r.type=Ew,r.elementType=Ew,r.lanes=o,r;case wA:return r=jl(19,t,e,i),r.elementType=wA,r.lanes=o,r;case KF:return Cz(t,i,o,e);case tF:return r=jl(24,t,e,i),r.elementType=tF,r.lanes=o,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case $F:l=10;break e;case HF:l=9;break e;case HA:l=11;break e;case WA:l=14;break e;case WF:l=16,n=null;break e;case ZF:l=22;break e}throw Error(Ot(130,r==null?r:typeof r,""))}return e=jl(l,t,e,i),e.elementType=r,e.type=n,e.lanes=o,e}function jy(r,e,t,n){return r=jl(7,r,n,e),r.lanes=t,r}function Cz(r,e,t,n){return r=jl(23,r,n,e),r.elementType=KF,r.lanes=t,r}function Qj(r,e,t){return r=jl(6,r,null,e),r.lanes=t,r}function Jj(r,e,t){return e=jl(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function xHe(r,e,t){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=t,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qj(0),this.expirationTimes=qj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qj(0),this.mutableSourceEagerHydrationData=null}function bHe(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$m,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function GA(r,e,t,n){var i=e.current,o=hl(),l=Ap(i);e:if(t){t=t._reactInternals;t:{if(rg(t)!==t||t.tag!==1)throw Error(Ot(170));var c=t;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(Cs(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(c!==null);throw Error(Ot(171))}if(t.tag===1){var p=t.type;if(Cs(p)){t=Xee(t,p,c);break e}}t=c}else t=Lp;return e.context===null?e.context=t:e.pendingContext=t,e=Ip(o,l),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),Mp(i,e),Cp(i,l,o),l}function eF(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function lee(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function Pz(r,e){lee(r,e),(r=r.alternate)&&lee(r,e)}function wHe(){return null}function Rz(r,e,t){var n=t!=null&&t.hydrationOptions!=null&&t.hydrationOptions.mutableSources||null;if(t=new xHe(r,e,t!=null&&t.hydrate===!0),e=jl(3,null,null,e===2?7:e===1?3:0),t.current=e,e.stateNode=t,mz(e),r[Gy]=t.current,Hee(r.nodeType===8?r.parentNode:r),n)for(r=0;r<n.length;r++){e=n[r];var i=e._getVersion;i=i(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,i]:t.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=t}Rz.prototype.render=function(r){GA(r,this._internalRoot,null,null)};Rz.prototype.unmount=function(){var r=this._internalRoot,e=r.containerInfo;GA(null,r,null,function(){e[Gy]=null})};function Qw(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function EHe(r,e){if(e||(e=r?r.nodeType===9?r.documentElement:r.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var t;t=r.lastChild;)r.removeChild(t);return new Rz(r,0,e?{hydrate:!0}:void 0)}function iC(r,e,t,n,i){var o=t._reactRootContainer;if(o){var l=o._internalRoot;if(typeof i=="function"){var c=i;i=function(){var g=eF(l);c.call(g)}}GA(e,l,r,i)}else{if(o=t._reactRootContainer=EHe(t,n),l=o._internalRoot,typeof i=="function"){var p=i;i=function(){var g=eF(l);p.call(g)}}Ate(function(){GA(e,l,r,i)})}return eF(l)}Tee=function(r){if(r.tag===13){var e=hl();Cp(r,4,e),Pz(r,4)}};tz=function(r){if(r.tag===13){var e=hl();Cp(r,67108864,e),Pz(r,67108864)}};Iee=function(r){if(r.tag===13){var e=hl(),t=Ap(r);Cp(r,t,e),Pz(r,t)}};Mee=function(r,e){return e()};hF=function(r,e,t){switch(e){case"input":if(nF(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+"][type=\"radio\"]"),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var i=JA(n);if(!i)throw Error(Ot(90));fee(n),nF(n,i)}}}break;case"textarea":dee(r,t);break;case"select":e=t.value,e!=null&&Py(r,!!t.multiple,e,!1)}};QF=Mte;bee=function(r,e,t,n,i){var o=Pr;Pr|=4;try{return Qm(98,r.bind(null,e,t,n,i))}finally{Pr=o,Pr===0&&(Wy(),kc())}};JF=function(){(Pr&49)===0&&(uHe(),qp())};wee=function(r,e){var t=Pr;Pr|=2;try{return r(e)}finally{Pr=t,Pr===0&&(Wy(),kc())}};function Nte(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qw(e))throw Error(Ot(200));return bHe(r,e,null,t)}var SHe={Events:[Yw,Iy,JA,_ee,xee,qp,{current:!1}]},mw={findFiberByHostInstance:Wm,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},THe={bundleType:mw.bundleType,version:mw.version,rendererPackageName:mw.rendererPackageName,rendererConfig:mw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tg.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=See(r),r===null?null:r.stateNode},findFiberByHostInstance:mw.findFiberByHostInstance||wHe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(gw=__REACT_DEVTOOLS_GLOBAL_HOOK__,!gw.isDisabled&&gw.supportsFiber))try{hz=gw.inject(THe),Km=gw}catch(r){}var gw;Ul.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SHe;Ul.createPortal=Nte;Ul.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(Ot(188)):Error(Ot(268,Object.keys(r)));return r=See(e),r=r===null?null:r.stateNode,r};Ul.flushSync=function(r,e){var t=Pr;if((t&48)!==0)return r(e);Pr|=1;try{if(r)return Qm(99,r.bind(null,e))}finally{Pr=t,kc()}};Ul.hydrate=function(r,e,t){if(!Qw(e))throw Error(Ot(200));return iC(null,r,e,!0,t)};Ul.render=function(r,e,t){if(!Qw(e))throw Error(Ot(200));return iC(null,r,e,!1,t)};Ul.unmountComponentAtNode=function(r){if(!Qw(r))throw Error(Ot(40));return r._reactRootContainer?(Ate(function(){iC(null,null,r,!1,function(){r._reactRootContainer=null,r[Gy]=null})}),!0):!1};Ul.unstable_batchedUpdates=Mte;Ul.unstable_createPortal=function(r,e){return Nte(r,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Ul.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!Qw(t))throw Error(Ot(200));if(r==null||r._reactInternals===void 0)throw Error(Ot(38));return iC(r,e,t,!1,n)};Ul.version="17.0.2"});var No=A((lcr,jte)=>{"use strict";function qte(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qte)}catch(r){console.error(r)}}qte(),jte.exports=kte()});var Lt=A((Oz,Fte)=>{"use strict";var Jw=function(r){return r&&r.Math===Math&&r};Fte.exports=Jw(typeof globalThis=="object"&&globalThis)||Jw(typeof window=="object"&&window)||Jw(typeof self=="object"&&self)||Jw(typeof global=="object"&&global)||Jw(typeof Oz=="object"&&Oz)||function(){return this}()||Function("return this")()});var yt=A((ucr,zte)=>{"use strict";zte.exports=function(r){try{return!!r()}catch(e){return!0}}});var ar=A((ccr,Bte)=>{"use strict";var IHe=yt();Bte.exports=!IHe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var Zy=A((hcr,Ute)=>{"use strict";var MHe=yt();Ute.exports=!MHe(function(){var r=function(){}.bind();return typeof r!="function"||r.hasOwnProperty("prototype")})});var Dt=A((fcr,Vte)=>{"use strict";var AHe=Zy(),oC=Function.prototype.call;Vte.exports=AHe?oC.bind(oC):function(){return oC.apply(oC,arguments)}});var e1=A(Hte=>{"use strict";var Gte={}.propertyIsEnumerable,$te=Object.getOwnPropertyDescriptor,CHe=$te&&!Gte.call({1:2},1);Hte.f=CHe?function(e){var t=$te(this,e);return!!t&&t.enumerable}:Gte});var Ps=A((dcr,Wte)=>{"use strict";Wte.exports=function(r,e){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:e}}});var pt=A((mcr,Kte)=>{"use strict";var Zte=Zy(),Yte=Function.prototype,Lz=Yte.call,PHe=Zte&&Yte.bind.bind(Lz,Lz);Kte.exports=Zte?PHe:function(r){return function(){return Lz.apply(r,arguments)}}});var fa=A((gcr,Qte)=>{"use strict";var Xte=pt(),RHe=Xte({}.toString),OHe=Xte("".slice);Qte.exports=function(r){return OHe(RHe(r),8,-1)}});var Zh=A((vcr,Jte)=>{"use strict";var LHe=pt(),DHe=yt(),NHe=fa(),Dz=Object,kHe=LHe("".split);Jte.exports=DHe(function(){return!Dz("z").propertyIsEnumerable(0)})?function(r){return NHe(r)==="String"?kHe(r,""):Dz(r)}:Dz});var Rs=A((ycr,ere)=>{"use strict";ere.exports=function(r){return r==null}});var ei=A((_cr,tre)=>{"use strict";var qHe=Rs(),jHe=TypeError;tre.exports=function(r){if(qHe(r))throw new jHe("Can't call method on "+r);return r}});var yo=A((xcr,rre)=>{"use strict";var FHe=Zh(),zHe=ei();rre.exports=function(r){return FHe(zHe(r))}});var Rr=A((bcr,nre)=>{"use strict";var Nz=typeof document=="object"&&document.all;nre.exports=typeof Nz=="undefined"&&Nz!==void 0?function(r){return typeof r=="function"||r===Nz}:function(r){return typeof r=="function"}});var lr=A((wcr,ire)=>{"use strict";var BHe=Rr();ire.exports=function(r){return typeof r=="object"?r!==null:BHe(r)}});var gr=A((Ecr,ore)=>{"use strict";var kz=Lt(),UHe=Rr(),VHe=function(r){return UHe(r)?r:void 0};ore.exports=function(r,e){return arguments.length<2?VHe(kz[r]):kz[r]&&kz[r][e]}});var pa=A((Scr,are)=>{"use strict";var GHe=pt();are.exports=GHe({}.isPrototypeOf)});var zu=A((Tcr,ure)=>{"use strict";var $He=Lt(),sre=$He.navigator,lre=sre&&sre.userAgent;ure.exports=lre?String(lre):""});var Uu=A((Icr,mre)=>{"use strict";var dre=Lt(),qz=zu(),cre=dre.process,hre=dre.Deno,fre=cre&&cre.versions||hre&&hre.version,pre=fre&&fre.v8,Bu,aC;pre&&(Bu=pre.split("."),aC=Bu[0]>0&&Bu[0]<4?1:+(Bu[0]+Bu[1]));!aC&&qz&&(Bu=qz.match(/Edge\/(\d+)/),(!Bu||Bu[1]>=74)&&(Bu=qz.match(/Chrome\/(\d+)/),Bu&&(aC=+Bu[1])));mre.exports=aC});var jp=A((Mcr,vre)=>{"use strict";var gre=Uu(),HHe=yt(),WHe=Lt(),ZHe=WHe.String;vre.exports=!!Object.getOwnPropertySymbols&&!HHe(function(){var r=Symbol("symbol detection");return!ZHe(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&gre&&gre<41})});var jz=A((Acr,yre)=>{"use strict";var YHe=jp();yre.exports=YHe&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var Yh=A((Ccr,_re)=>{"use strict";var KHe=gr(),XHe=Rr(),QHe=pa(),JHe=jz(),eWe=Object;_re.exports=JHe?function(r){return typeof r=="symbol"}:function(r){var e=KHe("Symbol");return XHe(e)&&QHe(e.prototype,eWe(r))}});var Fp=A((Pcr,xre)=>{"use strict";var tWe=String;xre.exports=function(r){try{return tWe(r)}catch(e){return"Object"}}});var vr=A((Rcr,bre)=>{"use strict";var rWe=Rr(),nWe=Fp(),iWe=TypeError;bre.exports=function(r){if(rWe(r))return r;throw new iWe(nWe(r)+" is not a function")}});var Wi=A((Ocr,wre)=>{"use strict";var oWe=vr(),aWe=Rs();wre.exports=function(r,e){var t=r[e];return aWe(t)?void 0:oWe(t)}});var Uz=A((Lcr,Ere)=>{"use strict";var Fz=Dt(),zz=Rr(),Bz=lr(),sWe=TypeError;Ere.exports=function(r,e){var t,n;if(e==="string"&&zz(t=r.toString)&&!Bz(n=Fz(t,r))||zz(t=r.valueOf)&&!Bz(n=Fz(t,r))||e!=="string"&&zz(t=r.toString)&&!Bz(n=Fz(t,r)))return n;throw new sWe("Can't convert object to primitive value")}});var un=A((Dcr,Sre)=>{"use strict";Sre.exports=!1});var sC=A((Ncr,Ire)=>{"use strict";var Tre=Lt(),lWe=Object.defineProperty;Ire.exports=function(r,e){try{lWe(Tre,r,{value:e,configurable:!0,writable:!0})}catch(t){Tre[r]=e}return e}});var t1=A((kcr,Cre)=>{"use strict";var uWe=un(),cWe=Lt(),hWe=sC(),Mre="__core-js_shared__",Are=Cre.exports=cWe[Mre]||hWe(Mre,{});(Are.versions||(Are.versions=[])).push({version:"3.42.0",mode:uWe?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var Kh=A((qcr,Rre)=>{"use strict";var Pre=t1();Rre.exports=function(r,e){return Pre[r]||(Pre[r]=e||{})}});var Ur=A((jcr,Ore)=>{"use strict";var fWe=ei(),pWe=Object;Ore.exports=function(r){return pWe(fWe(r))}});var Nr=A((Fcr,Lre)=>{"use strict";var dWe=pt(),mWe=Ur(),gWe=dWe({}.hasOwnProperty);Lre.exports=Object.hasOwn||function(e,t){return gWe(mWe(e),t)}});var zp=A((zcr,Dre)=>{"use strict";var vWe=pt(),yWe=0,_We=Math.random(),xWe=vWe(1 .toString);Dre.exports=function(r){return"Symbol("+(r===void 0?"":r)+")_"+xWe(++yWe+_We,36)}});var fr=A((Bcr,kre)=>{"use strict";var bWe=Lt(),wWe=Kh(),Nre=Nr(),EWe=zp(),SWe=jp(),TWe=jz(),Yy=bWe.Symbol,Vz=wWe("wks"),IWe=TWe?Yy.for||Yy:Yy&&Yy.withoutSetter||EWe;kre.exports=function(r){return Nre(Vz,r)||(Vz[r]=SWe&&Nre(Yy,r)?Yy[r]:IWe("Symbol."+r)),Vz[r]}});var r1=A((Ucr,Fre)=>{"use strict";var MWe=Dt(),qre=lr(),jre=Yh(),AWe=Wi(),CWe=Uz(),PWe=fr(),RWe=TypeError,OWe=PWe("toPrimitive");Fre.exports=function(r,e){if(!qre(r)||jre(r))return r;var t=AWe(r,OWe),n;if(t){if(e===void 0&&(e="default"),n=MWe(t,r,e),!qre(n)||jre(n))return n;throw new RWe("Can't convert object to primitive value")}return e===void 0&&(e="number"),CWe(r,e)}});var qc=A((Vcr,zre)=>{"use strict";var LWe=r1(),DWe=Yh();zre.exports=function(r){var e=LWe(r,"string");return DWe(e)?e:e+""}});var n1=A((Gcr,Ure)=>{"use strict";var NWe=Lt(),Bre=lr(),Gz=NWe.document,kWe=Bre(Gz)&&Bre(Gz.createElement);Ure.exports=function(r){return kWe?Gz.createElement(r):{}}});var $z=A(($cr,Vre)=>{"use strict";var qWe=ar(),jWe=yt(),FWe=n1();Vre.exports=!qWe&&!jWe(function(){return Object.defineProperty(FWe("div"),"a",{get:function(){return 7}}).a!==7})});var Yo=A($re=>{"use strict";var zWe=ar(),BWe=Dt(),UWe=e1(),VWe=Ps(),GWe=yo(),$We=qc(),HWe=Nr(),WWe=$z(),Gre=Object.getOwnPropertyDescriptor;$re.f=zWe?Gre:function(e,t){if(e=GWe(e),t=$We(t),WWe)try{return Gre(e,t)}catch(n){}if(HWe(e,t))return VWe(!BWe(UWe.f,e,t),e[t])}});var Hz=A((Wcr,Hre)=>{"use strict";var ZWe=ar(),YWe=yt();Hre.exports=ZWe&&YWe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var kt=A((Zcr,Wre)=>{"use strict";var KWe=lr(),XWe=String,QWe=TypeError;Wre.exports=function(r){if(KWe(r))return r;throw new QWe(XWe(r)+" is not an object")}});var Wn=A(Yre=>{"use strict";var JWe=ar(),eZe=$z(),tZe=Hz(),lC=kt(),Zre=qc(),rZe=TypeError,Wz=Object.defineProperty,nZe=Object.getOwnPropertyDescriptor,Zz="enumerable",Yz="configurable",Kz="writable";Yre.f=JWe?tZe?function(e,t,n){if(lC(e),t=Zre(t),lC(n),typeof e=="function"&&t==="prototype"&&"value"in n&&Kz in n&&!n[Kz]){var i=nZe(e,t);i&&i[Kz]&&(e[t]=n.value,n={configurable:Yz in n?n[Yz]:i[Yz],enumerable:Zz in n?n[Zz]:i[Zz],writable:!1})}return Wz(e,t,n)}:Wz:function(e,t,n){if(lC(e),t=Zre(t),lC(n),eZe)try{return Wz(e,t,n)}catch(i){}if("get"in n||"set"in n)throw new rZe("Accessors not supported");return"value"in n&&(e[t]=n.value),e}});var _o=A((Kcr,Kre)=>{"use strict";var iZe=ar(),oZe=Wn(),aZe=Ps();Kre.exports=iZe?function(r,e,t){return oZe.f(r,e,aZe(1,t))}:function(r,e,t){return r[e]=t,r}});var ig=A((Xcr,Qre)=>{"use strict";var Xz=ar(),sZe=Nr(),Xre=Function.prototype,lZe=Xz&&Object.getOwnPropertyDescriptor,Qz=sZe(Xre,"name"),uZe=Qz&&function(){}.name==="something",cZe=Qz&&(!Xz||Xz&&lZe(Xre,"name").configurable);Qre.exports={EXISTS:Qz,PROPER:uZe,CONFIGURABLE:cZe}});var i1=A((Qcr,Jre)=>{"use strict";var hZe=pt(),fZe=Rr(),Jz=t1(),pZe=hZe(Function.toString);fZe(Jz.inspectSource)||(Jz.inspectSource=function(r){return pZe(r)});Jre.exports=Jz.inspectSource});var e4=A((Jcr,tne)=>{"use strict";var dZe=Lt(),mZe=Rr(),ene=dZe.WeakMap;tne.exports=mZe(ene)&&/native code/.test(String(ene))});var o1=A((ehr,nne)=>{"use strict";var gZe=Kh(),vZe=zp(),rne=gZe("keys");nne.exports=function(r){return rne[r]||(rne[r]=vZe(r))}});var Ky=A((thr,ine)=>{"use strict";ine.exports={}});var xn=A((rhr,sne)=>{"use strict";var yZe=e4(),ane=Lt(),_Ze=lr(),xZe=_o(),t4=Nr(),r4=t1(),bZe=o1(),wZe=Ky(),one="Object already initialized",n4=ane.TypeError,EZe=ane.WeakMap,uC,a1,cC,SZe=function(r){return cC(r)?a1(r):uC(r,{})},TZe=function(r){return function(e){var t;if(!_Ze(e)||(t=a1(e)).type!==r)throw new n4("Incompatible receiver, "+r+" required");return t}};yZe||r4.state?(Vu=r4.state||(r4.state=new EZe),Vu.get=Vu.get,Vu.has=Vu.has,Vu.set=Vu.set,uC=function(r,e){if(Vu.has(r))throw new n4(one);return e.facade=r,Vu.set(r,e),e},a1=function(r){return Vu.get(r)||{}},cC=function(r){return Vu.has(r)}):(og=bZe("state"),wZe[og]=!0,uC=function(r,e){if(t4(r,og))throw new n4(one);return e.facade=r,xZe(r,og,e),e},a1=function(r){return t4(r,og)?r[og]:{}},cC=function(r){return t4(r,og)});var Vu,og;sne.exports={set:uC,get:a1,has:cC,enforce:SZe,getterFor:TZe}});var s1=A((nhr,cne)=>{"use strict";var o4=pt(),IZe=yt(),MZe=Rr(),hC=Nr(),i4=ar(),AZe=ig().CONFIGURABLE,CZe=i1(),une=xn(),PZe=une.enforce,RZe=une.get,lne=String,fC=Object.defineProperty,OZe=o4("".slice),LZe=o4("".replace),DZe=o4([].join),NZe=i4&&!IZe(function(){return fC(function(){},"length",{value:8}).length!==8}),kZe=String(String).split("String"),qZe=cne.exports=function(r,e,t){OZe(lne(e),0,7)==="Symbol("&&(e="["+LZe(lne(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!hC(r,"name")||AZe&&r.name!==e)&&(i4?fC(r,"name",{value:e,configurable:!0}):r.name=e),NZe&&t&&hC(t,"arity")&&r.length!==t.arity&&fC(r,"length",{value:t.arity});try{t&&hC(t,"constructor")&&t.constructor?i4&&fC(r,"prototype",{writable:!1}):r.prototype&&(r.prototype=void 0)}catch(i){}var n=PZe(r);return hC(n,"source")||(n.source=DZe(kZe,typeof e=="string"?e:"")),r};Function.prototype.toString=qZe(function(){return MZe(this)&&RZe(this).source||CZe(this)},"toString")});var Sn=A((ihr,hne)=>{"use strict";var jZe=Rr(),FZe=Wn(),zZe=s1(),BZe=sC();hne.exports=function(r,e,t,n){n||(n={});var i=n.enumerable,o=n.name!==void 0?n.name:e;if(jZe(t)&&zZe(t,o,n),n.global)i?r[e]=t:BZe(e,t);else{try{n.unsafe?r[e]&&(i=!0):delete r[e]}catch(l){}i?r[e]=t:FZe.f(r,e,{value:t,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return r}});var a4=A((ohr,fne)=>{"use strict";var UZe=Math.ceil,VZe=Math.floor;fne.exports=Math.trunc||function(e){var t=+e;return(t>0?VZe:UZe)(t)}});var ui=A((ahr,pne)=>{"use strict";var GZe=a4();pne.exports=function(r){var e=+r;return e!==e||e===0?0:GZe(e)}});var Gu=A((shr,dne)=>{"use strict";var $Ze=ui(),HZe=Math.max,WZe=Math.min;dne.exports=function(r,e){var t=$Ze(r);return t<0?HZe(t+e,0):WZe(t,e)}});var Os=A((lhr,mne)=>{"use strict";var ZZe=ui(),YZe=Math.min;mne.exports=function(r){var e=ZZe(r);return e>0?YZe(e,9007199254740991):0}});var en=A((uhr,gne)=>{"use strict";var KZe=Os();gne.exports=function(r){return KZe(r.length)}});var Xy=A((chr,yne)=>{"use strict";var XZe=yo(),QZe=Gu(),JZe=en(),vne=function(r){return function(e,t,n){var i=XZe(e),o=JZe(i);if(o===0)return!r&&-1;var l=QZe(n,o),c;if(r&&t!==t){for(;o>l;)if(c=i[l++],c!==c)return!0}else for(;o>l;l++)if((r||l in i)&&i[l]===t)return r||l||0;return!r&&-1}};yne.exports={includes:vne(!0),indexOf:vne(!1)}});var l4=A((hhr,xne)=>{"use strict";var eYe=pt(),s4=Nr(),tYe=yo(),rYe=Xy().indexOf,nYe=Ky(),_ne=eYe([].push);xne.exports=function(r,e){var t=tYe(r),n=0,i=[],o;for(o in t)!s4(nYe,o)&&s4(t,o)&&_ne(i,o);for(;e.length>n;)s4(t,o=e[n++])&&(~rYe(i,o)||_ne(i,o));return i}});var pC=A((fhr,bne)=>{"use strict";bne.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var Bp=A(wne=>{"use strict";var iYe=l4(),oYe=pC(),aYe=oYe.concat("length","prototype");wne.f=Object.getOwnPropertyNames||function(e){return iYe(e,aYe)}});var l1=A(Ene=>{"use strict";Ene.f=Object.getOwnPropertySymbols});var dC=A((mhr,Sne)=>{"use strict";var sYe=gr(),lYe=pt(),uYe=Bp(),cYe=l1(),hYe=kt(),fYe=lYe([].concat);Sne.exports=sYe("Reflect","ownKeys")||function(e){var t=uYe.f(hYe(e)),n=cYe.f;return n?fYe(t,n(e)):t}});var ag=A((ghr,Ine)=>{"use strict";var Tne=Nr(),pYe=dC(),dYe=Yo(),mYe=Wn();Ine.exports=function(r,e,t){for(var n=pYe(e),i=mYe.f,o=dYe.f,l=0;l<n.length;l++){var c=n[l];!Tne(r,c)&&!(t&&Tne(t,c))&&i(r,c,o(e,c))}}});var Qy=A((vhr,Mne)=>{"use strict";var gYe=yt(),vYe=Rr(),yYe=/#|\.prototype\./,u1=function(r,e){var t=xYe[_Ye(r)];return t===wYe?!0:t===bYe?!1:vYe(e)?gYe(e):!!e},_Ye=u1.normalize=function(r){return String(r).replace(yYe,".").toLowerCase()},xYe=u1.data={},bYe=u1.NATIVE="N",wYe=u1.POLYFILL="P";Mne.exports=u1});var ae=A((yhr,Ane)=>{"use strict";var mC=Lt(),EYe=Yo().f,SYe=_o(),TYe=Sn(),IYe=sC(),MYe=ag(),AYe=Qy();Ane.exports=function(r,e){var t=r.target,n=r.global,i=r.stat,o,l,c,p,g,_;if(n?l=mC:i?l=mC[t]||IYe(t,{}):l=mC[t]&&mC[t].prototype,l)for(c in e){if(g=e[c],r.dontCallGetSet?(_=EYe(l,c),p=_&&_.value):p=l[c],o=AYe(n?c:t+(i?".":"#")+c,r.forced),!o&&p!==void 0){if(typeof g==typeof p)continue;MYe(g,p)}(r.sham||p&&p.sham)&&SYe(g,"sham",!0),TYe(l,c,g,r)}}});var gC=A((_hr,Pne)=>{"use strict";var CYe=fr(),PYe=CYe("toStringTag"),Cne={};Cne[PYe]="z";Pne.exports=String(Cne)==="[object z]"});var os=A((xhr,Rne)=>{"use strict";var RYe=gC(),OYe=Rr(),vC=fa(),LYe=fr(),DYe=LYe("toStringTag"),NYe=Object,kYe=vC(function(){return arguments}())==="Arguments",qYe=function(r,e){try{return r[e]}catch(t){}};Rne.exports=RYe?vC:function(r){var e,t,n;return r===void 0?"Undefined":r===null?"Null":typeof(t=qYe(e=NYe(r),DYe))=="string"?t:kYe?vC(e):(n=vC(e))==="Object"&&OYe(e.callee)?"Arguments":n}});var wr=A((bhr,One)=>{"use strict";var jYe=os(),FYe=String;One.exports=function(r){if(jYe(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return FYe(r)}});var sg=A((whr,Lne)=>{"use strict";var zYe=l4(),BYe=pC();Lne.exports=Object.keys||function(e){return zYe(e,BYe)}});var yC=A(Dne=>{"use strict";var UYe=ar(),VYe=Hz(),GYe=Wn(),$Ye=kt(),HYe=yo(),WYe=sg();Dne.f=UYe&&!VYe?Object.defineProperties:function(e,t){$Ye(e);for(var n=HYe(t),i=WYe(t),o=i.length,l=0,c;o>l;)GYe.f(e,c=i[l++],n[c]);return e}});var u4=A((Shr,Nne)=>{"use strict";var ZYe=gr();Nne.exports=ZYe("document","documentElement")});var Zi=A((Thr,Une)=>{"use strict";var YYe=kt(),KYe=yC(),kne=pC(),XYe=Ky(),QYe=u4(),JYe=n1(),e9e=o1(),qne=">",jne="<",h4="prototype",f4="script",zne=e9e("IE_PROTO"),c4=function(){},Bne=function(r){return jne+f4+qne+r+jne+"/"+f4+qne},Fne=function(r){r.write(Bne("")),r.close();var e=r.parentWindow.Object;return r=null,e},t9e=function(){var r=JYe("iframe"),e="java"+f4+":",t;return r.style.display="none",QYe.appendChild(r),r.src=String(e),t=r.contentWindow.document,t.open(),t.write(Bne("document.F=Object")),t.close(),t.F},_C,xC=function(){try{_C=new ActiveXObject("htmlfile")}catch(e){}xC=typeof document!="undefined"?document.domain&&_C?Fne(_C):t9e():Fne(_C);for(var r=kne.length;r--;)delete xC[h4][kne[r]];return xC()};XYe[zne]=!0;Une.exports=Object.create||function(e,t){var n;return e!==null?(c4[h4]=YYe(e),n=new c4,c4[h4]=null,n[zne]=e):n=xC(),t===void 0?n:KYe.f(n,t)}});var Ls=A((Ihr,Vne)=>{"use strict";var r9e=pt();Vne.exports=r9e([].slice)});var bC=A((Mhr,Hne)=>{"use strict";var n9e=fa(),i9e=yo(),Gne=Bp().f,o9e=Ls(),$ne=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a9e=function(r){try{return Gne(r)}catch(e){return o9e($ne)}};Hne.exports.f=function(e){return $ne&&n9e(e)==="Window"?a9e(e):Gne(i9e(e))}});var ci=A((Ahr,Zne)=>{"use strict";var Wne=s1(),s9e=Wn();Zne.exports=function(r,e,t){return t.get&&Wne(t.get,e,{getter:!0}),t.set&&Wne(t.set,e,{setter:!0}),s9e.f(r,e,t)}});var p4=A(Yne=>{"use strict";var l9e=fr();Yne.f=l9e});var wC=A((Phr,Kne)=>{"use strict";var u9e=Lt();Kne.exports=u9e});var Ti=A((Rhr,Qne)=>{"use strict";var Xne=wC(),c9e=Nr(),h9e=p4(),f9e=Wn().f;Qne.exports=function(r){var e=Xne.Symbol||(Xne.Symbol={});c9e(e,r)||f9e(e,r,{value:h9e.f(r)})}});var d4=A((Ohr,Jne)=>{"use strict";var p9e=Dt(),d9e=gr(),m9e=fr(),g9e=Sn();Jne.exports=function(){var r=d9e("Symbol"),e=r&&r.prototype,t=e&&e.valueOf,n=m9e("toPrimitive");e&&!e[n]&&g9e(e,n,function(i){return p9e(t,this)},{arity:1})}});var as=A((Lhr,tie)=>{"use strict";var v9e=Wn().f,y9e=Nr(),_9e=fr(),eie=_9e("toStringTag");tie.exports=function(r,e,t){r&&!t&&(r=r.prototype),r&&!y9e(r,eie)&&v9e(r,eie,{configurable:!0,value:e})}});var Up=A((Dhr,rie)=>{"use strict";var x9e=fa(),b9e=pt();rie.exports=function(r){if(x9e(r)==="Function")return b9e(r)}});var kn=A((Nhr,iie)=>{"use strict";var nie=Up(),w9e=vr(),E9e=Zy(),S9e=nie(nie.bind);iie.exports=function(r,e){return w9e(r),e===void 0?r:E9e?S9e(r,e):function(){return r.apply(e,arguments)}}});var $u=A((khr,oie)=>{"use strict";var T9e=fa();oie.exports=Array.isArray||function(e){return T9e(e)==="Array"}});var Hu=A((qhr,cie)=>{"use strict";var I9e=pt(),M9e=yt(),aie=Rr(),A9e=os(),C9e=gr(),P9e=i1(),sie=function(){},lie=C9e("Reflect","construct"),m4=/^\s*(?:class|function)\b/,R9e=I9e(m4.exec),O9e=!m4.test(sie),c1=function(e){if(!aie(e))return!1;try{return lie(sie,[],e),!0}catch(t){return!1}},uie=function(e){if(!aie(e))return!1;switch(A9e(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return O9e||!!R9e(m4,P9e(e))}catch(t){return!0}};uie.sham=!0;cie.exports=!lie||M9e(function(){var r;return c1(c1.call)||!c1(Object)||!c1(function(){r=!0})||r})?uie:c1});var die=A((jhr,pie)=>{"use strict";var hie=$u(),L9e=Hu(),D9e=lr(),N9e=fr(),k9e=N9e("species"),fie=Array;pie.exports=function(r){var e;return hie(r)&&(e=r.constructor,L9e(e)&&(e===fie||hie(e.prototype))?e=void 0:D9e(e)&&(e=e[k9e],e===null&&(e=void 0))),e===void 0?fie:e}});var Jy=A((Fhr,mie)=>{"use strict";var q9e=die();mie.exports=function(r,e){return new(q9e(r))(e===0?0:e)}});var Yi=A((zhr,vie)=>{"use strict";var j9e=kn(),F9e=pt(),z9e=Zh(),B9e=Ur(),U9e=en(),V9e=Jy(),gie=F9e([].push),Vp=function(r){var e=r===1,t=r===2,n=r===3,i=r===4,o=r===6,l=r===7,c=r===5||o;return function(p,g,_,x){for(var T=B9e(p),C=z9e(T),D=U9e(C),F=j9e(g,_),O=0,k=x||V9e,q=e?k(p,D):t||l?k(p,0):void 0,U,H;D>O;O++)if((c||O in C)&&(U=C[O],H=F(U,O,T),r))if(e)q[O]=H;else if(H)switch(r){case 3:return!0;case 5:return U;case 6:return O;case 2:gie(q,U)}else switch(r){case 4:return!1;case 7:gie(q,U)}return o?-1:n||i?i:q}};vie.exports={forEach:Vp(0),map:Vp(1),filter:Vp(2),some:Vp(3),every:Vp(4),find:Vp(5),findIndex:Vp(6),filterReject:Vp(7)}});var Die=A(()=>{"use strict";var EC=ae(),p1=Lt(),S4=Dt(),G9e=pt(),$9e=un(),e_=ar(),t_=jp(),H9e=yt(),Ko=Nr(),W9e=pa(),_4=kt(),SC=yo(),T4=qc(),Z9e=wr(),x4=Ps(),r_=Zi(),xie=sg(),Y9e=Bp(),bie=bC(),K9e=l1(),wie=Yo(),Eie=Wn(),X9e=yC(),Sie=e1(),g4=Sn(),Q9e=ci(),I4=Kh(),J9e=o1(),Tie=Ky(),yie=zp(),eKe=fr(),tKe=p4(),rKe=Ti(),nKe=d4(),iKe=as(),Iie=xn(),TC=Yi().forEach,Ds=J9e("hidden"),IC="Symbol",f1="prototype",oKe=Iie.set,_ie=Iie.getterFor(IC),Vl=Object[f1],lg=p1.Symbol,h1=lg&&lg[f1],aKe=p1.RangeError,sKe=p1.TypeError,v4=p1.QObject,Mie=wie.f,ug=Eie.f,Aie=bie.f,lKe=Sie.f,Cie=G9e([].push),Xh=I4("symbols"),d1=I4("op-symbols"),uKe=I4("wks"),b4=!v4||!v4[f1]||!v4[f1].findChild,Pie=function(r,e,t){var n=Mie(Vl,e);n&&delete Vl[e],ug(r,e,t),n&&r!==Vl&&ug(Vl,e,n)},w4=e_&&H9e(function(){return r_(ug({},"a",{get:function(){return ug(this,"a",{value:7}).a}})).a!==7})?Pie:ug,y4=function(r,e){var t=Xh[r]=r_(h1);return oKe(t,{type:IC,tag:r,description:e}),e_||(t.description=e),t},MC=function(e,t,n){e===Vl&&MC(d1,t,n),_4(e);var i=T4(t);return _4(n),Ko(Xh,i)?(n.enumerable?(Ko(e,Ds)&&e[Ds][i]&&(e[Ds][i]=!1),n=r_(n,{enumerable:x4(0,!1)})):(Ko(e,Ds)||ug(e,Ds,x4(1,r_(null))),e[Ds][i]=!0),w4(e,i,n)):ug(e,i,n)},M4=function(e,t){_4(e);var n=SC(t),i=xie(n).concat(Lie(n));return TC(i,function(o){(!e_||S4(E4,n,o))&&MC(e,o,n[o])}),e},cKe=function(e,t){return t===void 0?r_(e):M4(r_(e),t)},E4=function(e){var t=T4(e),n=S4(lKe,this,t);return this===Vl&&Ko(Xh,t)&&!Ko(d1,t)?!1:n||!Ko(this,t)||!Ko(Xh,t)||Ko(this,Ds)&&this[Ds][t]?n:!0},Rie=function(e,t){var n=SC(e),i=T4(t);if(!(n===Vl&&Ko(Xh,i)&&!Ko(d1,i))){var o=Mie(n,i);return o&&Ko(Xh,i)&&!(Ko(n,Ds)&&n[Ds][i])&&(o.enumerable=!0),o}},Oie=function(e){var t=Aie(SC(e)),n=[];return TC(t,function(i){!Ko(Xh,i)&&!Ko(Tie,i)&&Cie(n,i)}),n},Lie=function(r){var e=r===Vl,t=Aie(e?d1:SC(r)),n=[];return TC(t,function(i){Ko(Xh,i)&&(!e||Ko(Vl,i))&&Cie(n,Xh[i])}),n};t_||(lg=function(){if(W9e(h1,this))throw new sKe("Symbol is not a constructor");var e=!arguments.length||arguments[0]===void 0?void 0:Z9e(arguments[0]),t=yie(e),n=function(i){var o=this===void 0?p1:this;o===Vl&&S4(n,d1,i),Ko(o,Ds)&&Ko(o[Ds],t)&&(o[Ds][t]=!1);var l=x4(1,i);try{w4(o,t,l)}catch(c){if(!(c instanceof aKe))throw c;Pie(o,t,l)}};return e_&&b4&&w4(Vl,t,{configurable:!0,set:n}),y4(t,e)},h1=lg[f1],g4(h1,"toString",function(){return _ie(this).tag}),g4(lg,"withoutSetter",function(r){return y4(yie(r),r)}),Sie.f=E4,Eie.f=MC,X9e.f=M4,wie.f=Rie,Y9e.f=bie.f=Oie,K9e.f=Lie,tKe.f=function(r){return y4(eKe(r),r)},e_&&(Q9e(h1,"description",{configurable:!0,get:function(){return _ie(this).description}}),$9e||g4(Vl,"propertyIsEnumerable",E4,{unsafe:!0})));EC({global:!0,constructor:!0,wrap:!0,forced:!t_,sham:!t_},{Symbol:lg});TC(xie(uKe),function(r){rKe(r)});EC({target:IC,stat:!0,forced:!t_},{useSetter:function(){b4=!0},useSimple:function(){b4=!1}});EC({target:"Object",stat:!0,forced:!t_,sham:!e_},{create:cKe,defineProperty:MC,defineProperties:M4,getOwnPropertyDescriptor:Rie});EC({target:"Object",stat:!0,forced:!t_},{getOwnPropertyNames:Oie});nKe();iKe(lg,IC);Tie[Ds]=!0});var A4=A((Vhr,Nie)=>{"use strict";var hKe=jp();Nie.exports=hKe&&!!Symbol.for&&!!Symbol.keyFor});var qie=A(()=>{"use strict";var fKe=ae(),pKe=gr(),dKe=Nr(),mKe=wr(),kie=Kh(),gKe=A4(),C4=kie("string-to-symbol-registry"),vKe=kie("symbol-to-string-registry");fKe({target:"Symbol",stat:!0,forced:!gKe},{for:function(r){var e=mKe(r);if(dKe(C4,e))return C4[e];var t=pKe("Symbol")(e);return C4[e]=t,vKe[t]=e,t}})});var Fie=A(()=>{"use strict";var yKe=ae(),_Ke=Nr(),xKe=Yh(),bKe=Fp(),wKe=Kh(),EKe=A4(),jie=wKe("symbol-to-string-registry");yKe({target:"Symbol",stat:!0,forced:!EKe},{keyFor:function(e){if(!xKe(e))throw new TypeError(bKe(e)+" is not a symbol");if(_Ke(jie,e))return jie[e]}})});var da=A((Zhr,Vie)=>{"use strict";var SKe=Zy(),Uie=Function.prototype,zie=Uie.apply,Bie=Uie.call;Vie.exports=typeof Reflect=="object"&&Reflect.apply||(SKe?Bie.bind(zie):function(){return Bie.apply(zie,arguments)})});var P4=A((Yhr,Wie)=>{"use strict";var TKe=pt(),Gie=$u(),IKe=Rr(),$ie=fa(),MKe=wr(),Hie=TKe([].push);Wie.exports=function(r){if(IKe(r))return r;if(Gie(r)){for(var e=r.length,t=[],n=0;n<e;n++){var i=r[n];typeof i=="string"?Hie(t,i):(typeof i=="number"||$ie(i)==="Number"||$ie(i)==="String")&&Hie(t,MKe(i))}var o=t.length,l=!0;return function(c,p){if(l)return l=!1,p;if(Gie(this))return p;for(var g=0;g<o;g++)if(t[g]===c)return p}}}});var R4=A(()=>{"use strict";var AKe=ae(),toe=gr(),roe=da(),CKe=Dt(),m1=pt(),noe=yt(),Zie=Rr(),Yie=Yh(),ioe=Ls(),PKe=P4(),RKe=jp(),OKe=String,Gp=toe("JSON","stringify"),AC=m1(/./.exec),Kie=m1("".charAt),LKe=m1("".charCodeAt),DKe=m1("".replace),NKe=m1(1 .toString),kKe=/[\uD800-\uDFFF]/g,Xie=/^[\uD800-\uDBFF]$/,Qie=/^[\uDC00-\uDFFF]$/,Jie=!RKe||noe(function(){var r=toe("Symbol")("stringify detection");return Gp([r])!=="[null]"||Gp({a:r})!=="{}"||Gp(Object(r))!=="{}"}),eoe=noe(function(){return Gp("\uDF06\uD834")!=="\"\\udf06\\ud834\""||Gp("\uDEAD")!=="\"\\udead\""}),qKe=function(r,e){var t=ioe(arguments),n=PKe(e);if(!(!Zie(n)&&(r===void 0||Yie(r))))return t[1]=function(i,o){if(Zie(n)&&(o=CKe(n,this,OKe(i),o)),!Yie(o))return o},roe(Gp,null,t)},jKe=function(r,e,t){var n=Kie(t,e-1),i=Kie(t,e+1);return AC(Xie,r)&&!AC(Qie,i)||AC(Qie,r)&&!AC(Xie,n)?"\\u"+NKe(LKe(r,0),16):r};Gp&&AKe({target:"JSON",stat:!0,arity:3,forced:Jie||eoe},{stringify:function(e,t,n){var i=ioe(arguments),o=roe(Jie?qKe:Gp,null,i);return eoe&&typeof o=="string"?DKe(o,kKe,jKe):o}})});var aoe=A(()=>{"use strict";var FKe=ae(),zKe=jp(),BKe=yt(),ooe=l1(),UKe=Ur(),VKe=!zKe||BKe(function(){ooe.f(1)});FKe({target:"Object",stat:!0,forced:VKe},{getOwnPropertySymbols:function(e){var t=ooe.f;return t?t(UKe(e)):[]}})});var soe=A(()=>{"use strict";Die();qie();Fie();R4();aoe()});var doe=A(()=>{"use strict";var GKe=ae(),$Ke=ar(),HKe=Lt(),CC=pt(),WKe=Nr(),ZKe=Rr(),YKe=pa(),KKe=wr(),XKe=ci(),QKe=ag(),Qh=HKe.Symbol,cg=Qh&&Qh.prototype;$Ke&&ZKe(Qh)&&(!("description"in cg)||Qh().description!==void 0)&&(O4={},g1=function(){var e=arguments.length<1||arguments[0]===void 0?void 0:KKe(arguments[0]),t=YKe(cg,this)?new Qh(e):e===void 0?Qh():Qh(e);return e===""&&(O4[t]=!0),t},QKe(g1,Qh),g1.prototype=cg,cg.constructor=g1,loe=String(Qh("description detection"))==="Symbol(description detection)",uoe=CC(cg.valueOf),coe=CC(cg.toString),hoe=/^Symbol\((.*)\)[^)]+$/,foe=CC("".replace),poe=CC("".slice),XKe(cg,"description",{configurable:!0,get:function(){var e=uoe(this);if(WKe(O4,e))return"";var t=coe(e),n=loe?poe(t,7,-1):foe(t,hoe,"$1");return n===""?void 0:n}}),GKe({global:!0,constructor:!0,forced:!0},{Symbol:g1}));var O4,g1,loe,uoe,coe,hoe,foe,poe});var moe=A(()=>{"use strict";var JKe=Ti();JKe("asyncIterator")});var goe=A(()=>{"use strict";var e7e=Ti();e7e("hasInstance")});var voe=A(()=>{"use strict";var t7e=Ti();t7e("isConcatSpreadable")});var yoe=A(()=>{"use strict";var r7e=Ti();r7e("iterator")});var _oe=A(()=>{"use strict";var n7e=Ti();n7e("match")});var xoe=A(()=>{"use strict";var i7e=Ti();i7e("matchAll")});var boe=A(()=>{"use strict";var o7e=Ti();o7e("replace")});var woe=A(()=>{"use strict";var a7e=Ti();a7e("search")});var Eoe=A(()=>{"use strict";var s7e=Ti();s7e("species")});var Soe=A(()=>{"use strict";var l7e=Ti();l7e("split")});var Toe=A(()=>{"use strict";var u7e=Ti(),c7e=d4();u7e("toPrimitive");c7e()});var Ioe=A(()=>{"use strict";var h7e=gr(),f7e=Ti(),p7e=as();f7e("toStringTag");p7e(h7e("Symbol"),"Symbol")});var Moe=A(()=>{"use strict";var d7e=Ti();d7e("unscopables")});var v1=A((Pfr,Aoe)=>{"use strict";var m7e=pt(),g7e=vr();Aoe.exports=function(r,e,t){try{return m7e(g7e(Object.getOwnPropertyDescriptor(r,e)[t]))}catch(n){}}});var L4=A((Rfr,Coe)=>{"use strict";var v7e=lr();Coe.exports=function(r){return v7e(r)||r===null}});var D4=A((Ofr,Poe)=>{"use strict";var y7e=L4(),_7e=String,x7e=TypeError;Poe.exports=function(r){if(y7e(r))return r;throw new x7e("Can't set "+_7e(r)+" as a prototype")}});var Gl=A((Lfr,Roe)=>{"use strict";var b7e=v1(),w7e=lr(),E7e=ei(),S7e=D4();Roe.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r=!1,e={},t;try{t=b7e(Object.prototype,"__proto__","set"),t(e,[]),r=e instanceof Array}catch(n){}return function(i,o){return E7e(i),S7e(o),w7e(i)&&(r?t(i,o):i.__proto__=o),i}}():void 0)});var N4=A((Dfr,Ooe)=>{"use strict";var T7e=Wn().f;Ooe.exports=function(r,e,t){t in r||T7e(r,t,{configurable:!0,get:function(){return e[t]},set:function(n){e[t]=n}})}});var $p=A((Nfr,Doe)=>{"use strict";var I7e=Rr(),M7e=lr(),Loe=Gl();Doe.exports=function(r,e,t){var n,i;return Loe&&I7e(n=e.constructor)&&n!==t&&M7e(i=n.prototype)&&i!==t.prototype&&Loe(r,i),r}});var hg=A((kfr,Noe)=>{"use strict";var A7e=wr();Noe.exports=function(r,e){return r===void 0?arguments.length<2?"":e:A7e(r)}});var k4=A((qfr,koe)=>{"use strict";var C7e=lr(),P7e=_o();koe.exports=function(r,e){C7e(e)&&"cause"in e&&P7e(r,"cause",e.cause)}});var PC=A((jfr,Foe)=>{"use strict";var R7e=pt(),qoe=Error,O7e=R7e("".replace),L7e=function(r){return String(new qoe(r).stack)}("zxcasd"),joe=/\n\s*at [^:]*:[^\n]*/,D7e=joe.test(L7e);Foe.exports=function(r,e){if(D7e&&typeof r=="string"&&!qoe.prepareStackTrace)for(;e--;)r=O7e(r,joe,"");return r}});var q4=A((Ffr,zoe)=>{"use strict";var N7e=yt(),k7e=Ps();zoe.exports=!N7e(function(){var r=new Error("a");return"stack"in r?(Object.defineProperty(r,"stack",k7e(1,7)),r.stack!==7):!0})});var RC=A((zfr,Uoe)=>{"use strict";var q7e=_o(),j7e=PC(),F7e=q4(),Boe=Error.captureStackTrace;Uoe.exports=function(r,e,t,n){F7e&&(Boe?Boe(r,e):q7e(r,"stack",j7e(t,n)))}});var j4=A((Bfr,Yoe)=>{"use strict";var Voe=gr(),z7e=Nr(),Goe=_o(),B7e=pa(),$oe=Gl(),Hoe=ag(),Woe=N4(),U7e=$p(),V7e=hg(),G7e=k4(),$7e=RC(),H7e=ar(),Zoe=un();Yoe.exports=function(r,e,t,n){var i="stackTraceLimit",o=n?2:1,l=r.split("."),c=l[l.length-1],p=Voe.apply(null,l);if(p){var g=p.prototype;if(!Zoe&&z7e(g,"cause")&&delete g.cause,!t)return p;var _=Voe("Error"),x=e(function(T,C){var D=V7e(n?C:T,void 0),F=n?new p(T):new p;return D!==void 0&&Goe(F,"message",D),$7e(F,x,F.stack,2),this&&B7e(g,this)&&U7e(F,this,x),arguments.length>o&&G7e(F,arguments[o]),F});if(x.prototype=g,c!=="Error"?$oe?$oe(x,_):Hoe(x,_,{name:!0}):H7e&&i in p&&(Woe(x,p,i),Woe(x,p,"prepareStackTrace")),Hoe(x,p),!Zoe)try{g.name!==c&&Goe(g,"name",c),g.constructor=x}catch(T){}return x}}});var Joe=A(()=>{"use strict";var Xoe=ae(),W7e=Lt(),jc=da(),Qoe=j4(),F4="WebAssembly",Koe=W7e[F4],OC=new Error("e",{cause:7}).cause!==7,fg=function(r,e){var t={};t[r]=Qoe(r,e,OC),Xoe({global:!0,constructor:!0,arity:1,forced:OC},t)},z4=function(r,e){if(Koe&&Koe[r]){var t={};t[r]=Qoe(F4+"."+r,e,OC),Xoe({target:F4,stat:!0,constructor:!0,arity:1,forced:OC},t)}};fg("Error",function(r){return function(t){return jc(r,this,arguments)}});fg("EvalError",function(r){return function(t){return jc(r,this,arguments)}});fg("RangeError",function(r){return function(t){return jc(r,this,arguments)}});fg("ReferenceError",function(r){return function(t){return jc(r,this,arguments)}});fg("SyntaxError",function(r){return function(t){return jc(r,this,arguments)}});fg("TypeError",function(r){return function(t){return jc(r,this,arguments)}});fg("URIError",function(r){return function(t){return jc(r,this,arguments)}});z4("CompileError",function(r){return function(t){return jc(r,this,arguments)}});z4("LinkError",function(r){return function(t){return jc(r,this,arguments)}});z4("RuntimeError",function(r){return function(t){return jc(r,this,arguments)}})});var B4=A((Gfr,tae)=>{"use strict";var Z7e=ar(),Y7e=yt(),K7e=kt(),eae=hg(),LC=Error.prototype.toString,X7e=Y7e(function(){if(Z7e){var r=Object.create(Object.defineProperty({},"name",{get:function(){return this===r}}));if(LC.call(r)!=="true")return!0}return LC.call({message:1,name:2})!=="2: 1"||LC.call({})!=="Error"});tae.exports=X7e?function(){var e=K7e(this),t=eae(e.name,"Error"),n=eae(e.message);return t?n?t+": "+n:t:n}:LC});var iae=A(()=>{"use strict";var Q7e=Sn(),rae=B4(),nae=Error.prototype;nae.toString!==rae&&Q7e(nae,"toString",rae)});var DC=A((Wfr,oae)=>{"use strict";var J7e=yt();oae.exports=!J7e(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})});var xo=A((Zfr,sae)=>{"use strict";var eXe=Nr(),tXe=Rr(),rXe=Ur(),nXe=o1(),iXe=DC(),aae=nXe("IE_PROTO"),U4=Object,oXe=U4.prototype;sae.exports=iXe?U4.getPrototypeOf:function(r){var e=rXe(r);if(eXe(e,aae))return e[aae];var t=e.constructor;return tXe(t)&&e instanceof t?t.prototype:e instanceof U4?oXe:null}});var pg=A((Yfr,lae)=>{"use strict";lae.exports={}});var NC=A((Kfr,uae)=>{"use strict";var aXe=fr(),sXe=pg(),lXe=aXe("iterator"),uXe=Array.prototype;uae.exports=function(r){return r!==void 0&&(sXe.Array===r||uXe[lXe]===r)}});var Fc=A((Xfr,hae)=>{"use strict";var cXe=os(),cae=Wi(),hXe=Rs(),fXe=pg(),pXe=fr(),dXe=pXe("iterator");hae.exports=function(r){if(!hXe(r))return cae(r,dXe)||cae(r,"@@iterator")||fXe[cXe(r)]}});var Hp=A((Qfr,fae)=>{"use strict";var mXe=Dt(),gXe=vr(),vXe=kt(),yXe=Fp(),_Xe=Fc(),xXe=TypeError;fae.exports=function(r,e){var t=arguments.length<2?_Xe(r):e;if(gXe(t))return vXe(mXe(t,r));throw new xXe(yXe(r)+" is not iterable")}});var Xo=A((Jfr,dae)=>{"use strict";var bXe=Dt(),pae=kt(),wXe=Wi();dae.exports=function(r,e,t){var n,i;pae(r);try{if(n=wXe(r,"return"),!n){if(e==="throw")throw t;return t}n=bXe(n,r)}catch(o){i=!0,n=o}if(e==="throw")throw t;if(i)throw n;return pae(n),t}});var Ii=A((epr,yae)=>{"use strict";var EXe=kn(),SXe=Dt(),TXe=kt(),IXe=Fp(),MXe=NC(),AXe=en(),mae=pa(),CXe=Hp(),PXe=Fc(),gae=Xo(),RXe=TypeError,kC=function(r,e){this.stopped=r,this.result=e},vae=kC.prototype;yae.exports=function(r,e,t){var n=t&&t.that,i=!!(t&&t.AS_ENTRIES),o=!!(t&&t.IS_RECORD),l=!!(t&&t.IS_ITERATOR),c=!!(t&&t.INTERRUPTED),p=EXe(e,n),g,_,x,T,C,D,F,O=function(q){return g&&gae(g,"normal",q),new kC(!0,q)},k=function(q){return i?(TXe(q),c?p(q[0],q[1],O):p(q[0],q[1])):c?p(q,O):p(q)};if(o)g=r.iterator;else if(l)g=r;else{if(_=PXe(r),!_)throw new RXe(IXe(r)+" is not iterable");if(MXe(_)){for(x=0,T=AXe(r);T>x;x++)if(C=k(r[x]),C&&mae(vae,C))return C;return new kC(!1)}g=CXe(r,_)}for(D=o?r.next:g.next;!(F=SXe(D,g)).done;){try{C=k(F.value)}catch(q){gae(g,"throw",q)}if(typeof C=="object"&&C&&mae(vae,C))return C}return new kC(!1)}});var xae=A(()=>{"use strict";var OXe=ae(),LXe=pa(),DXe=xo(),qC=Gl(),NXe=ag(),_ae=Zi(),V4=_o(),G4=Ps(),kXe=k4(),qXe=RC(),jXe=Ii(),FXe=hg(),zXe=fr(),BXe=zXe("toStringTag"),jC=Error,UXe=[].push,n_=function(e,t){var n=LXe($4,this),i;qC?i=qC(new jC,n?DXe(this):$4):(i=n?this:_ae($4),V4(i,BXe,"Error")),t!==void 0&&V4(i,"message",FXe(t)),qXe(i,n_,i.stack,1),arguments.length>2&&kXe(i,arguments[2]);var o=[];return jXe(e,UXe,{that:o}),V4(i,"errors",o),i};qC?qC(n_,jC):NXe(n_,jC,{name:!0});var $4=n_.prototype=_ae(jC.prototype,{constructor:G4(1,n_),message:G4(1,""),name:G4(1,"AggregateError")});OXe({global:!0,constructor:!0,arity:2},{AggregateError:n_})});var H4=A(()=>{"use strict";xae()});var Sae=A(()=>{"use strict";var VXe=ae(),GXe=gr(),$Xe=da(),bae=yt(),HXe=j4(),W4="AggregateError",wae=GXe(W4),Eae=!bae(function(){return wae([1]).errors[0]!==1})&&bae(function(){return wae([1],W4,{cause:7}).cause!==7});VXe({global:!0,constructor:!0,arity:2,forced:Eae},{AggregateError:HXe(W4,function(r){return function(t,n){return $Xe(r,this,arguments)}},Eae,!0)})});var Mi=A((spr,Tae)=>{"use strict";var WXe=fr(),ZXe=Zi(),YXe=Wn().f,Z4=WXe("unscopables"),Y4=Array.prototype;Y4[Z4]===void 0&&YXe(Y4,Z4,{configurable:!0,value:ZXe(null)});Tae.exports=function(r){Y4[Z4][r]=!0}});var K4=A(()=>{"use strict";var KXe=ae(),XXe=Ur(),QXe=en(),JXe=ui(),eQe=Mi();KXe({target:"Array",proto:!0},{at:function(e){var t=XXe(this),n=QXe(t),i=JXe(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:t[o]}});eQe("at")});var Wp=A((cpr,Iae)=>{"use strict";var tQe=TypeError,rQe=9007199254740991;Iae.exports=function(r){if(r>rQe)throw tQe("Maximum allowed index exceeded");return r}});var $l=A((hpr,Mae)=>{"use strict";var nQe=ar(),iQe=Wn(),oQe=Ps();Mae.exports=function(r,e,t){nQe?iQe.f(r,e,oQe(0,t)):r[e]=t}});var i_=A((fpr,Aae)=>{"use strict";var aQe=yt(),sQe=fr(),lQe=Uu(),uQe=sQe("species");Aae.exports=function(r){return lQe>=51||!aQe(function(){var e=[],t=e.constructor={};return t[uQe]=function(){return{foo:1}},e[r](Boolean).foo!==1})}});var Oae=A(()=>{"use strict";var cQe=ae(),hQe=yt(),fQe=$u(),pQe=lr(),dQe=Ur(),mQe=en(),Cae=Wp(),Pae=$l(),gQe=Jy(),vQe=i_(),yQe=fr(),_Qe=Uu(),Rae=yQe("isConcatSpreadable"),xQe=_Qe>=51||!hQe(function(){var r=[];return r[Rae]=!1,r.concat()[0]!==r}),bQe=function(r){if(!pQe(r))return!1;var e=r[Rae];return e!==void 0?!!e:fQe(r)},wQe=!xQe||!vQe("concat");cQe({target:"Array",proto:!0,arity:1,forced:wQe},{concat:function(e){var t=dQe(this),n=gQe(t,0),i=0,o,l,c,p,g;for(o=-1,c=arguments.length;o<c;o++)if(g=o===-1?t:arguments[o],bQe(g))for(p=mQe(g),Cae(i+p),l=0;l<p;l++,i++)l in g&&Pae(n,i,g[l]);else Cae(i+1),Pae(n,i++,g);return n.length=i,n}})});var y1=A((mpr,Dae)=>{"use strict";var Lae=Fp(),EQe=TypeError;Dae.exports=function(r,e){if(!delete r[e])throw new EQe("Cannot delete property "+Lae(e)+" of "+Lae(r))}});var Q4=A((gpr,Nae)=>{"use strict";var SQe=Ur(),X4=Gu(),TQe=en(),IQe=y1(),MQe=Math.min;Nae.exports=[].copyWithin||function(e,t){var n=SQe(this),i=TQe(n),o=X4(e,i),l=X4(t,i),c=arguments.length>2?arguments[2]:void 0,p=MQe((c===void 0?i:X4(c,i))-l,i-o),g=1;for(l<o&&o<l+p&&(g=-1,l+=p-1,o+=p-1);p-->0;)l in n?n[o]=n[l]:IQe(n,o),o+=g,l+=g;return n}});var kae=A(()=>{"use strict";var AQe=ae(),CQe=Q4(),PQe=Mi();AQe({target:"Array",proto:!0},{copyWithin:CQe});PQe("copyWithin")});var Hl=A((_pr,qae)=>{"use strict";var RQe=yt();qae.exports=function(r,e){var t=[][r];return!!t&&RQe(function(){t.call(null,e||function(){return 1},1)})}});var jae=A(()=>{"use strict";var OQe=ae(),LQe=Yi().every,DQe=Hl(),NQe=DQe("every");OQe({target:"Array",proto:!0,forced:!NQe},{every:function(e){return LQe(this,e,arguments.length>1?arguments[1]:void 0)}})});var FC=A((wpr,zae)=>{"use strict";var kQe=Ur(),Fae=Gu(),qQe=en();zae.exports=function(e){for(var t=kQe(this),n=qQe(t),i=arguments.length,o=Fae(i>1?arguments[1]:void 0,n),l=i>2?arguments[2]:void 0,c=l===void 0?n:Fae(l,n);c>o;)t[o++]=e;return t}});var Bae=A(()=>{"use strict";var jQe=ae(),FQe=FC(),zQe=Mi();jQe({target:"Array",proto:!0},{fill:FQe});zQe("fill")});var Uae=A(()=>{"use strict";var BQe=ae(),UQe=Yi().filter,VQe=i_(),GQe=VQe("filter");BQe({target:"Array",proto:!0,forced:!GQe},{filter:function(e){return UQe(this,e,arguments.length>1?arguments[1]:void 0)}})});var Gae=A(()=>{"use strict";var $Qe=ae(),HQe=Yi().find,WQe=Mi(),J4="find",Vae=!0;J4 in[]&&Array(1)[J4](function(){Vae=!1});$Qe({target:"Array",proto:!0,forced:Vae},{find:function(e){return HQe(this,e,arguments.length>1?arguments[1]:void 0)}});WQe(J4)});var Hae=A(()=>{"use strict";var ZQe=ae(),YQe=Yi().findIndex,KQe=Mi(),eB="findIndex",$ae=!0;eB in[]&&Array(1)[eB](function(){$ae=!1});ZQe({target:"Array",proto:!0,forced:$ae},{findIndex:function(e){return YQe(this,e,arguments.length>1?arguments[1]:void 0)}});KQe(eB)});var _1=A((Rpr,Zae)=>{"use strict";var XQe=kn(),QQe=Zh(),JQe=Ur(),eJe=en(),Wae=function(r){var e=r===1;return function(t,n,i){for(var o=JQe(t),l=QQe(o),c=eJe(l),p=XQe(n,i),g,_;c-->0;)if(g=l[c],_=p(g,c,o),_)switch(r){case 0:return g;case 1:return c}return e?-1:void 0}};Zae.exports={findLast:Wae(0),findLastIndex:Wae(1)}});var tB=A(()=>{"use strict";var tJe=ae(),rJe=_1().findLast,nJe=Mi();tJe({target:"Array",proto:!0},{findLast:function(e){return rJe(this,e,arguments.length>1?arguments[1]:void 0)}});nJe("findLast")});var rB=A(()=>{"use strict";var iJe=ae(),oJe=_1().findLastIndex,aJe=Mi();iJe({target:"Array",proto:!0},{findLastIndex:function(e){return oJe(this,e,arguments.length>1?arguments[1]:void 0)}});aJe("findLastIndex")});var nB=A((kpr,Kae)=>{"use strict";var sJe=$u(),lJe=en(),uJe=Wp(),cJe=kn(),Yae=function(r,e,t,n,i,o,l,c){for(var p=i,g=0,_=l?cJe(l,c):!1,x,T;g<n;)g in t&&(x=_?_(t[g],g,e):t[g],o>0&&sJe(x)?(T=lJe(x),p=Yae(r,e,x,T,p,o-1)-1):(uJe(p+1),r[p]=x),p++),g++;return p};Kae.exports=Yae});var Xae=A(()=>{"use strict";var hJe=ae(),fJe=nB(),pJe=Ur(),dJe=en(),mJe=ui(),gJe=Jy();hJe({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=pJe(this),n=dJe(t),i=gJe(t,0);return i.length=fJe(i,t,t,n,0,e===void 0?1:mJe(e)),i}})});var Qae=A(()=>{"use strict";var vJe=ae(),yJe=nB(),_Je=vr(),xJe=Ur(),bJe=en(),wJe=Jy();vJe({target:"Array",proto:!0},{flatMap:function(e){var t=xJe(this),n=bJe(t),i;return _Je(e),i=wJe(t,0),i.length=yJe(i,t,t,n,0,1,e,arguments.length>1?arguments[1]:void 0),i}})});var iB=A((Bpr,Jae)=>{"use strict";var EJe=Yi().forEach,SJe=Hl(),TJe=SJe("forEach");Jae.exports=TJe?[].forEach:function(e){return EJe(this,e,arguments.length>1?arguments[1]:void 0)}});var tse=A(()=>{"use strict";var IJe=ae(),ese=iB();IJe({target:"Array",proto:!0,forced:[].forEach!==ese},{forEach:ese})});var zC=A((Gpr,rse)=>{"use strict";var MJe=kt(),AJe=Xo();rse.exports=function(r,e,t,n){try{return n?e(MJe(t)[0],t[1]):e(t)}catch(i){AJe(r,"throw",i)}}});var oB=A(($pr,ose)=>{"use strict";var CJe=kn(),PJe=Dt(),RJe=Ur(),OJe=zC(),LJe=NC(),DJe=Hu(),NJe=en(),nse=$l(),kJe=Hp(),qJe=Fc(),ise=Array;ose.exports=function(e){var t=RJe(e),n=DJe(this),i=arguments.length,o=i>1?arguments[1]:void 0,l=o!==void 0;l&&(o=CJe(o,i>2?arguments[2]:void 0));var c=qJe(t),p=0,g,_,x,T,C,D;if(c&&!(this===ise&&LJe(c)))for(_=n?new this:[],T=kJe(t,c),C=T.next;!(x=PJe(C,T)).done;p++)D=l?OJe(T,o,[x.value,p],!0):x.value,nse(_,p,D);else for(g=NJe(t),_=n?new this(g):ise(g);g>p;p++)D=l?o(t[p],p):t[p],nse(_,p,D);return _.length=p,_}});var x1=A((Hpr,use)=>{"use strict";var jJe=fr(),sse=jJe("iterator"),lse=!1;try{ase=0,aB={next:function(){return{done:!!ase++}},return:function(){lse=!0}},aB[sse]=function(){return this},Array.from(aB,function(){throw 2})}catch(r){}var ase,aB;use.exports=function(r,e){try{if(!e&&!lse)return!1}catch(i){return!1}var t=!1;try{var n={};n[sse]=function(){return{next:function(){return{done:t=!0}}}},r(n)}catch(i){}return t}});var cse=A(()=>{"use strict";var FJe=ae(),zJe=oB(),BJe=x1(),UJe=!BJe(function(r){Array.from(r)});FJe({target:"Array",stat:!0,forced:UJe},{from:zJe})});var hse=A(()=>{"use strict";var VJe=ae(),GJe=Xy().includes,$Je=yt(),HJe=Mi(),WJe=$Je(function(){return!Array(1).includes()});VJe({target:"Array",proto:!0,forced:WJe},{includes:function(e){return GJe(this,e,arguments.length>1?arguments[1]:void 0)}});HJe("includes")});var pse=A(()=>{"use strict";var ZJe=ae(),YJe=Up(),KJe=Xy().indexOf,XJe=Hl(),sB=YJe([].indexOf),fse=!!sB&&1/sB([1],1,-0)<0,QJe=fse||!XJe("indexOf");ZJe({target:"Array",proto:!0,forced:QJe},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return fse?sB(this,e,t)||0:KJe(this,e,t)}})});var dse=A(()=>{"use strict";var JJe=ae(),eet=$u();JJe({target:"Array",stat:!0},{isArray:eet})});var Zp=A((tdr,vse)=>{"use strict";var tet=yt(),ret=Rr(),net=lr(),iet=Zi(),mse=xo(),oet=Sn(),aet=fr(),set=un(),cB=aet("iterator"),gse=!1,Jh,lB,uB;[].keys&&(uB=[].keys(),"next"in uB?(lB=mse(mse(uB)),lB!==Object.prototype&&(Jh=lB)):gse=!0);var uet=!net(Jh)||tet(function(){var r={};return Jh[cB].call(r)!==r});uet?Jh={}:set&&(Jh=iet(Jh));ret(Jh[cB])||oet(Jh,cB,function(){return this});vse.exports={IteratorPrototype:Jh,BUGGY_SAFARI_ITERATORS:gse}});var Yp=A((rdr,yse)=>{"use strict";var cet=Zp().IteratorPrototype,het=Zi(),fet=Ps(),pet=as(),det=pg(),met=function(){return this};yse.exports=function(r,e,t,n){var i=e+" Iterator";return r.prototype=het(cet,{next:fet(+!n,t)}),pet(r,i,!1,!0),det[i]=met,r}});var VC=A((ndr,Ase)=>{"use strict";var get=ae(),vet=Dt(),BC=un(),Ise=ig(),yet=Rr(),_et=Yp(),_se=xo(),xse=Gl(),xet=as(),bet=_o(),hB=Sn(),wet=fr(),bse=pg(),Mse=Zp(),Eet=Ise.PROPER,Tet=Ise.CONFIGURABLE,wse=Mse.IteratorPrototype,UC=Mse.BUGGY_SAFARI_ITERATORS,b1=wet("iterator"),Ese="keys",w1="values",Sse="entries",Tse=function(){return this};Ase.exports=function(r,e,t,n,i,o,l){_et(t,e,n);var c=function(k){if(k===i&&T)return T;if(!UC&&k&&k in _)return _[k];switch(k){case Ese:return function(){return new t(this,k)};case w1:return function(){return new t(this,k)};case Sse:return function(){return new t(this,k)}}return function(){return new t(this)}},p=e+" Iterator",g=!1,_=r.prototype,x=_[b1]||_["@@iterator"]||i&&_[i],T=!UC&&x||c(i),C=e==="Array"&&_.entries||x,D,F,O;if(C&&(D=_se(C.call(new r)),D!==Object.prototype&&D.next&&(!BC&&_se(D)!==wse&&(xse?xse(D,wse):yet(D[b1])||hB(D,b1,Tse)),xet(D,p,!0,!0),BC&&(bse[p]=Tse))),Eet&&i===w1&&x&&x.name!==w1&&(!BC&&Tet?bet(_,"name",w1):(g=!0,T=function(){return vet(x,this)})),i)if(F={values:c(w1),keys:o?T:c(Ese),entries:c(Sse)},l)for(O in F)(UC||g||!(O in _))&&hB(_,O,F[O]);else get({target:e,proto:!0,forced:UC||g},F);return(!BC||l)&&_[b1]!==T&&hB(_,b1,T,{name:i}),bse[e]=T,F}});var ko=A((idr,Cse)=>{"use strict";Cse.exports=function(r,e){return{value:r,done:e}}});var E1=A((odr,Dse)=>{"use strict";var Iet=yo(),fB=Mi(),Pse=pg(),Ose=xn(),Met=Wn().f,Aet=VC(),GC=ko(),Cet=un(),Pet=ar(),Lse="Array Iterator",Ret=Ose.set,Oet=Ose.getterFor(Lse);Dse.exports=Aet(Array,"Array",function(r,e){Ret(this,{type:Lse,target:Iet(r),index:0,kind:e})},function(){var r=Oet(this),e=r.target,t=r.index++;if(!e||t>=e.length)return r.target=null,GC(void 0,!0);switch(r.kind){case"keys":return GC(t,!1);case"values":return GC(e[t],!1)}return GC([t,e[t]],!1)},"values");var Rse=Pse.Arguments=Pse.Array;fB("keys");fB("values");fB("entries");if(!Cet&&Pet&&Rse.name!=="values")try{Met(Rse,"name",{value:"values"})}catch(r){}});var Nse=A(()=>{"use strict";var Let=ae(),Det=pt(),Net=Zh(),ket=yo(),qet=Hl(),jet=Det([].join),Fet=Net!==Object,zet=Fet||!qet("join",",");Let({target:"Array",proto:!0,forced:zet},{join:function(e){return jet(ket(this),e===void 0?",":e)}})});var dB=A((ldr,qse)=>{"use strict";var Bet=da(),Uet=yo(),Vet=ui(),Get=en(),$et=Hl(),Het=Math.min,pB=[].lastIndexOf,kse=!!pB&&1/[1].lastIndexOf(1,-0)<0,Wet=$et("lastIndexOf"),Zet=kse||!Wet;qse.exports=Zet?function(e){if(kse)return Bet(pB,this,arguments)||0;var t=Uet(this),n=Get(t);if(n===0)return-1;var i=n-1;for(arguments.length>1&&(i=Het(i,Vet(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}:pB});var Fse=A(()=>{"use strict";var Yet=ae(),jse=dB();Yet({target:"Array",proto:!0,forced:jse!==[].lastIndexOf},{lastIndexOf:jse})});var zse=A(()=>{"use strict";var Ket=ae(),Xet=Yi().map,Qet=i_(),Jet=Qet("map");Ket({target:"Array",proto:!0,forced:!Jet},{map:function(e){return Xet(this,e,arguments.length>1?arguments[1]:void 0)}})});var Use=A(()=>{"use strict";var ett=ae(),ttt=yt(),rtt=Hu(),ntt=$l(),Bse=Array,itt=ttt(function(){function r(){}return!(Bse.of.call(r)instanceof r)});ett({target:"Array",stat:!0,forced:itt},{of:function(){for(var e=0,t=arguments.length,n=new(rtt(this)?this:Bse)(t);t>e;)ntt(n,e,arguments[e++]);return n.length=t,n}})});var $C=A((mdr,Vse)=>{"use strict";var ott=ar(),att=$u(),stt=TypeError,ltt=Object.getOwnPropertyDescriptor,utt=ott&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(r){return r instanceof TypeError}}();Vse.exports=utt?function(r,e){if(att(r)&&!ltt(r,"length").writable)throw new stt("Cannot set read only .length");return r.length=e}:function(r,e){return r.length=e}});var Gse=A(()=>{"use strict";var ctt=ae(),htt=Ur(),ftt=en(),ptt=$C(),dtt=Wp(),mtt=yt(),gtt=mtt(function(){return[].push.call({length:4294967296},1)!==4294967297}),vtt=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(r){return r instanceof TypeError}},ytt=gtt||!vtt();ctt({target:"Array",proto:!0,arity:1,forced:ytt},{push:function(e){var t=htt(this),n=ftt(t),i=arguments.length;dtt(n+i);for(var o=0;o<i;o++)t[n]=arguments[o],n++;return ptt(t,n),n}})});var S1=A((ydr,Zse)=>{"use strict";var _tt=vr(),xtt=Ur(),btt=Zh(),wtt=en(),$se=TypeError,Hse="Reduce of empty array with no initial value",Wse=function(r){return function(e,t,n,i){var o=xtt(e),l=btt(o),c=wtt(o);if(_tt(t),c===0&&n<2)throw new $se(Hse);var p=r?c-1:0,g=r?-1:1;if(n<2)for(;;){if(p in l){i=l[p],p+=g;break}if(p+=g,r?p<0:c<=p)throw new $se(Hse)}for(;r?p>=0:c>p;p+=g)p in l&&(i=t(i,l[p],p,o));return i}};Zse.exports={left:Wse(!1),right:Wse(!0)}});var I1=A((_dr,Yse)=>{"use strict";var T1=Lt(),Ett=zu(),Stt=fa(),HC=function(r){return Ett.slice(0,r.length)===r};Yse.exports=function(){return HC("Bun/")?"BUN":HC("Cloudflare-Workers")?"CLOUDFLARE":HC("Deno/")?"DENO":HC("Node.js/")?"NODE":T1.Bun&&typeof Bun.version=="string"?"BUN":T1.Deno&&typeof Deno.version=="object"?"DENO":Stt(T1.process)==="process"?"NODE":T1.window&&T1.document?"BROWSER":"REST"}()});var dg=A((xdr,Kse)=>{"use strict";var Ttt=I1();Kse.exports=Ttt==="NODE"});var Qse=A(()=>{"use strict";var Itt=ae(),Mtt=S1().left,Att=Hl(),Xse=Uu(),Ctt=dg(),Ptt=!Ctt&&Xse>79&&Xse<83,Rtt=Ptt||!Att("reduce");Itt({target:"Array",proto:!0,forced:Rtt},{reduce:function(e){var t=arguments.length;return Mtt(this,e,t,t>1?arguments[1]:void 0)}})});var ele=A(()=>{"use strict";var Ott=ae(),Ltt=S1().right,Dtt=Hl(),Jse=Uu(),Ntt=dg(),ktt=!Ntt&&Jse>79&&Jse<83,qtt=ktt||!Dtt("reduceRight");Ott({target:"Array",proto:!0,forced:qtt},{reduceRight:function(e){return Ltt(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var rle=A(()=>{"use strict";var jtt=ae(),Ftt=pt(),ztt=$u(),Btt=Ftt([].reverse),tle=[1,2];jtt({target:"Array",proto:!0,forced:String(tle)===String(tle.reverse())},{reverse:function(){return ztt(this)&&(this.length=this.length),Btt(this)}})});var ole=A(()=>{"use strict";var Utt=ae(),nle=$u(),Vtt=Hu(),Gtt=lr(),ile=Gu(),$tt=en(),Htt=yo(),Wtt=$l(),Ztt=fr(),Ytt=i_(),Ktt=Ls(),Xtt=Ytt("slice"),Qtt=Ztt("species"),mB=Array,Jtt=Math.max;Utt({target:"Array",proto:!0,forced:!Xtt},{slice:function(e,t){var n=Htt(this),i=$tt(n),o=ile(e,i),l=ile(t===void 0?i:t,i),c,p,g;if(nle(n)&&(c=n.constructor,Vtt(c)&&(c===mB||nle(c.prototype))?c=void 0:Gtt(c)&&(c=c[Qtt],c===null&&(c=void 0)),c===mB||c===void 0))return Ktt(n,o,l);for(p=new(c===void 0?mB:c)(Jtt(l-o,0)),g=0;o<l;o++,g++)o in n&&Wtt(p,g,n[o]);return p.length=g,p}})});var ale=A(()=>{"use strict";var ert=ae(),trt=Yi().some,rrt=Hl(),nrt=rrt("some");ert({target:"Array",proto:!0,forced:!nrt},{some:function(e){return trt(this,e,arguments.length>1?arguments[1]:void 0)}})});var WC=A((Rdr,lle)=>{"use strict";var sle=Ls(),irt=Math.floor,gB=function(r,e){var t=r.length;if(t<8)for(var n=1,i,o;n<t;){for(o=n,i=r[n];o&&e(r[o-1],i)>0;)r[o]=r[--o];o!==n++&&(r[o]=i)}else for(var l=irt(t/2),c=gB(sle(r,0,l),e),p=gB(sle(r,l),e),g=c.length,_=p.length,x=0,T=0;x<g||T<_;)r[x+T]=x<g&&T<_?e(c[x],p[T])<=0?c[x++]:p[T++]:x<g?c[x++]:p[T++];return r};lle.exports=gB});var vB=A((Odr,cle)=>{"use strict";var ort=zu(),ule=ort.match(/firefox\/(\d+)/i);cle.exports=!!ule&&+ule[1]});var yB=A((Ldr,hle)=>{"use strict";var art=zu();hle.exports=/MSIE|Trident/.test(art)});var ZC=A((Ddr,ple)=>{"use strict";var srt=zu(),fle=srt.match(/AppleWebKit\/(\d+)\./);ple.exports=!!fle&&+fle[1]});var wle=A(()=>{"use strict";var lrt=ae(),xle=pt(),urt=vr(),crt=Ur(),dle=en(),hrt=y1(),mle=wr(),_B=yt(),frt=WC(),prt=Hl(),gle=vB(),drt=yB(),vle=Uu(),yle=ZC(),Kp=[],_le=xle(Kp.sort),mrt=xle(Kp.push),grt=_B(function(){Kp.sort(void 0)}),vrt=_B(function(){Kp.sort(null)}),yrt=prt("sort"),ble=!_B(function(){if(vle)return vle<70;if(!(gle&&gle>3)){if(drt)return!0;if(yle)return yle<603;var r="",e,t,n,i;for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)Kp.push({k:t+i,v:n})}for(Kp.sort(function(o,l){return l.v-o.v}),i=0;i<Kp.length;i++)t=Kp[i].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return r!=="DGBEFHACIJK"}}),_rt=grt||!vrt||!yrt||!ble,xrt=function(r){return function(e,t){return t===void 0?-1:e===void 0?1:r!==void 0?+r(e,t)||0:mle(e)>mle(t)?1:-1}};lrt({target:"Array",proto:!0,forced:_rt},{sort:function(e){e!==void 0&&urt(e);var t=crt(this);if(ble)return e===void 0?_le(t):_le(t,e);var n=[],i=dle(t),o,l;for(l=0;l<i;l++)l in t&&mrt(n,t[l]);for(frt(n,xrt(e)),o=dle(n),l=0;l<o;)t[l]=n[l++];for(;l<i;)hrt(t,l++);return t}})});var Xp=A((qdr,Sle)=>{"use strict";var brt=gr(),wrt=ci(),Ert=fr(),Srt=ar(),Ele=Ert("species");Sle.exports=function(r){var e=brt(r);Srt&&e&&!e[Ele]&&wrt(e,Ele,{configurable:!0,get:function(){return this}})}});var Tle=A(()=>{"use strict";var Trt=Xp();Trt("Array")});var Ile=A(()=>{"use strict";var Irt=ae(),Mrt=Ur(),Art=Gu(),Crt=ui(),Prt=en(),Rrt=$C(),Ort=Wp(),Lrt=Jy(),Drt=$l(),xB=y1(),Nrt=i_(),krt=Nrt("splice"),qrt=Math.max,jrt=Math.min;Irt({target:"Array",proto:!0,forced:!krt},{splice:function(e,t){var n=Mrt(this),i=Prt(n),o=Art(e,i),l=arguments.length,c,p,g,_,x,T;for(l===0?c=p=0:l===1?(c=0,p=i-o):(c=l-2,p=jrt(qrt(Crt(t),0),i-o)),Ort(i+c-p),g=Lrt(n,p),_=0;_<p;_++)x=o+_,x in n&&Drt(g,_,n[x]);if(g.length=p,c<p){for(_=o;_<i-p;_++)x=_+p,T=_+c,x in n?n[T]=n[x]:xB(n,T);for(_=i;_>i-p+c;_--)xB(n,_-1)}else if(c>p)for(_=i-p;_>o;_--)x=_+p-1,T=_+c-1,x in n?n[T]=n[x]:xB(n,T);for(_=0;_<c;_++)n[_+o]=arguments[_+2];return Rrt(n,i-p+c),g}})});var bB=A((Udr,Mle)=>{"use strict";var Frt=en();Mle.exports=function(r,e){for(var t=Frt(r),n=new e(t),i=0;i<t;i++)n[i]=r[t-i-1];return n}});var wB=A(()=>{"use strict";var zrt=ae(),Brt=bB(),Urt=yo(),Vrt=Mi(),Grt=Array;zrt({target:"Array",proto:!0},{toReversed:function(){return Brt(Urt(this),Grt)}});Vrt("toReversed")});var ef=A(($dr,Ale)=>{"use strict";var $rt=en();Ale.exports=function(r,e,t){for(var n=0,i=arguments.length>2?t:$rt(e),o=new r(i);i>n;)o[n]=e[n++];return o}});var EB=A((Hdr,Cle)=>{"use strict";var Hrt=Lt();Cle.exports=function(r,e){var t=Hrt[r],n=t&&t.prototype;return n&&n[e]}});var SB=A(()=>{"use strict";var Wrt=ae(),Zrt=pt(),Yrt=vr(),Krt=yo(),Xrt=ef(),Qrt=EB(),Jrt=Mi(),ent=Array,tnt=Zrt(Qrt("Array","sort"));Wrt({target:"Array",proto:!0},{toSorted:function(e){e!==void 0&&Yrt(e);var t=Krt(this),n=Xrt(ent,t);return tnt(n,e)}});Jrt("toSorted")});var TB=A(()=>{"use strict";var rnt=ae(),nnt=Mi(),int=Wp(),ont=en(),ant=Gu(),snt=yo(),lnt=ui(),unt=Array,cnt=Math.max,hnt=Math.min;rnt({target:"Array",proto:!0},{toSpliced:function(e,t){var n=snt(this),i=ont(n),o=ant(e,i),l=arguments.length,c=0,p,g,_,x;for(l===0?p=g=0:l===1?(p=0,g=i-o):(p=l-2,g=hnt(cnt(lnt(t),0),i-o)),_=int(i+p-g),x=unt(_);c<o;c++)x[c]=n[c];for(;c<o+p;c++)x[c]=arguments[c-o+2];for(;c<_;c++)x[c]=n[c+g-p];return x}});nnt("toSpliced")});var Ple=A(()=>{"use strict";var fnt=Mi();fnt("flat")});var Rle=A(()=>{"use strict";var pnt=Mi();pnt("flatMap")});var Ole=A(()=>{"use strict";var dnt=ae(),mnt=Ur(),gnt=en(),vnt=$C(),ynt=y1(),_nt=Wp(),xnt=[].unshift(0)!==1,bnt=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(r){return r instanceof TypeError}},wnt=xnt||!bnt();dnt({target:"Array",proto:!0,arity:1,forced:wnt},{unshift:function(e){var t=mnt(this),n=gnt(t),i=arguments.length;if(i){_nt(n+i);for(var o=n;o--;){var l=o+i;o in t?t[l]=t[o]:ynt(t,l)}for(var c=0;c<i;c++)t[c]=arguments[c]}return vnt(t,n+i)}})});var IB=A((nmr,Lle)=>{"use strict";var Ent=en(),Snt=ui(),Tnt=RangeError;Lle.exports=function(r,e,t,n){var i=Ent(r),o=Snt(t),l=o<0?i+o:o;if(l>=i||l<0)throw new Tnt("Incorrect index");for(var c=new e(i),p=0;p<i;p++)c[p]=p===l?n:r[p];return c}});var MB=A(()=>{"use strict";var Int=ae(),Mnt=IB(),Ant=yo(),Cnt=Array;Int({target:"Array",proto:!0},{with:function(r,e){return Mnt(Ant(this),Cnt,r,e)}})});var M1=A((amr,Dle)=>{"use strict";Dle.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var Wl=A((smr,Nle)=>{"use strict";var Pnt=Sn();Nle.exports=function(r,e,t){for(var n in e)Pnt(r,n,e[n],t);return r}});var La=A((lmr,kle)=>{"use strict";var Rnt=pa(),Ont=TypeError;kle.exports=function(r,e){if(Rnt(e,r))return r;throw new Ont("Incorrect invocation")}});var o_=A((umr,qle)=>{"use strict";var Lnt=ui(),Dnt=Os(),Nnt=RangeError;qle.exports=function(r){if(r===void 0)return 0;var e=Lnt(r),t=Dnt(e);if(e!==t)throw new Nnt("Wrong length or index");return t}});var YC=A((cmr,jle)=>{"use strict";jle.exports=Math.sign||function(e){var t=+e;return t===0||t!==t?t:t<0?-1:1}});var AB=A((hmr,zle)=>{"use strict";var knt=2220446049250313e-31,Fle=1/knt;zle.exports=function(r){return r+Fle-Fle}});var CB=A((fmr,Ble)=>{"use strict";var qnt=YC(),jnt=AB(),Fnt=Math.abs,znt=2220446049250313e-31;Ble.exports=function(r,e,t,n){var i=+r,o=Fnt(i),l=qnt(i);if(o<n)return l*jnt(o/n/e)*n*e;var c=(1+e/znt)*o,p=c-(c-o);return p>t||p!==p?l*(1/0):l*p}});var KC=A((pmr,Ule)=>{"use strict";var Bnt=CB(),Unt=1.1920928955078125e-7,Vnt=34028234663852886e22,Gnt=11754943508222875e-54;Ule.exports=Math.fround||function(e){return Bnt(e,Unt,Vnt,Gnt)}});var Gle=A((dmr,Vle)=>{"use strict";var $nt=Array,Hnt=Math.abs,tf=Math.pow,Wnt=Math.floor,Znt=Math.log,Ynt=Math.LN2,Knt=function(r,e,t){var n=$nt(t),i=t*8-e-1,o=(1<<i)-1,l=o>>1,c=e===23?tf(2,-24)-tf(2,-77):0,p=r<0||r===0&&1/r<0?1:0,g=0,_,x,T;for(r=Hnt(r),r!==r||r===1/0?(x=r!==r?1:0,_=o):(_=Wnt(Znt(r)/Ynt),T=tf(2,-_),r*T<1&&(_--,T*=2),_+l>=1?r+=c/T:r+=c*tf(2,1-l),r*T>=2&&(_++,T/=2),_+l>=o?(x=0,_=o):_+l>=1?(x=(r*T-1)*tf(2,e),_+=l):(x=r*tf(2,l-1)*tf(2,e),_=0));e>=8;)n[g++]=x&255,x/=256,e-=8;for(_=_<<e|x,i+=e;i>0;)n[g++]=_&255,_/=256,i-=8;return n[g-1]|=p*128,n},Xnt=function(r,e){var t=r.length,n=t*8-e-1,i=(1<<n)-1,o=i>>1,l=n-7,c=t-1,p=r[c--],g=p&127,_;for(p>>=7;l>0;)g=g*256+r[c--],l-=8;for(_=g&(1<<-l)-1,g>>=-l,l+=e;l>0;)_=_*256+r[c--],l-=8;if(g===0)g=1-o;else{if(g===i)return _?NaN:p?-1/0:1/0;_+=tf(2,e),g-=o}return(p?-1:1)*_*tf(2,g-e)};Vle.exports={pack:Knt,unpack:Xnt}});var P1=A((mmr,sue)=>{"use strict";var tP=Lt(),DB=pt(),PB=ar(),Qnt=M1(),rue=ig(),Jnt=_o(),eit=ci(),$le=Wl(),RB=yt(),XC=La(),tit=ui(),rit=Os(),JC=o_(),nit=KC(),nue=Gle(),iit=xo(),Hle=Gl(),oit=FC(),ait=Ls(),sit=$p(),lit=ag(),iue=as(),NB=xn(),uit=rue.PROPER,Wle=rue.CONFIGURABLE,s_="ArrayBuffer",rP="DataView",l_="prototype",cit="Wrong length",oue="Wrong index",Zle=NB.getterFor(s_),C1=NB.getterFor(rP),Yle=NB.set,Wu=tP[s_],pl=Wu,a_=pl&&pl[l_],zc=tP[rP],mg=zc&&zc[l_],Kle=Object.prototype,hit=tP.Array,eP=tP.RangeError,fit=DB(oit),pit=DB([].reverse),aue=nue.pack,Xle=nue.unpack,Qle=function(r){return[r&255]},Jle=function(r){return[r&255,r>>8&255]},eue=function(r){return[r&255,r>>8&255,r>>16&255,r>>24&255]},tue=function(r){return r[3]<<24|r[2]<<16|r[1]<<8|r[0]},dit=function(r){return aue(nit(r),23,4)},mit=function(r){return aue(r,52,8)},QC=function(r,e,t){eit(r[l_],e,{configurable:!0,get:function(){return t(this)[e]}})},Qp=function(r,e,t,n){var i=C1(r),o=JC(t),l=!!n;if(o+e>i.byteLength)throw new eP(oue);var c=i.bytes,p=o+i.byteOffset,g=ait(c,p,p+e);return l?g:pit(g)},Jp=function(r,e,t,n,i,o){var l=C1(r),c=JC(t),p=n(+i),g=!!o;if(c+e>l.byteLength)throw new eP(oue);for(var _=l.bytes,x=c+l.byteOffset,T=0;T<e;T++)_[x+T]=p[g?T:e-T-1]};Qnt?(OB=uit&&Wu.name!==s_,!RB(function(){Wu(1)})||!RB(function(){new Wu(-1)})||RB(function(){return new Wu,new Wu(1.5),new Wu(NaN),Wu.length!==1||OB&&!Wle})?(pl=function(e){return XC(this,a_),sit(new Wu(JC(e)),this,pl)},pl[l_]=a_,a_.constructor=pl,lit(pl,Wu)):OB&&Wle&&Jnt(Wu,"name",s_),Hle&&iit(mg)!==Kle&&Hle(mg,Kle),A1=new zc(new pl(2)),LB=DB(mg.setInt8),A1.setInt8(0,2147483648),A1.setInt8(1,2147483649),(A1.getInt8(0)||!A1.getInt8(1))&&$le(mg,{setInt8:function(e,t){LB(this,e,t<<24>>24)},setUint8:function(e,t){LB(this,e,t<<24>>24)}},{unsafe:!0})):(pl=function(e){XC(this,a_);var t=JC(e);Yle(this,{type:s_,bytes:fit(hit(t),0),byteLength:t}),PB||(this.byteLength=t,this.detached=!1)},a_=pl[l_],zc=function(e,t,n){XC(this,mg),XC(e,a_);var i=Zle(e),o=i.byteLength,l=tit(t);if(l<0||l>o)throw new eP("Wrong offset");if(n=n===void 0?o-l:rit(n),l+n>o)throw new eP(cit);Yle(this,{type:rP,buffer:e,byteLength:n,byteOffset:l,bytes:i.bytes}),PB||(this.buffer=e,this.byteLength=n,this.byteOffset=l)},mg=zc[l_],PB&&(QC(pl,"byteLength",Zle),QC(zc,"buffer",C1),QC(zc,"byteLength",C1),QC(zc,"byteOffset",C1)),$le(mg,{getInt8:function(e){return Qp(this,1,e)[0]<<24>>24},getUint8:function(e){return Qp(this,1,e)[0]},getInt16:function(e){var t=Qp(this,2,e,arguments.length>1?arguments[1]:!1);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Qp(this,2,e,arguments.length>1?arguments[1]:!1);return t[1]<<8|t[0]},getInt32:function(e){return tue(Qp(this,4,e,arguments.length>1?arguments[1]:!1))},getUint32:function(e){return tue(Qp(this,4,e,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(e){return Xle(Qp(this,4,e,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(e){return Xle(Qp(this,8,e,arguments.length>1?arguments[1]:!1),52)},setInt8:function(e,t){Jp(this,1,e,Qle,t)},setUint8:function(e,t){Jp(this,1,e,Qle,t)},setInt16:function(e,t){Jp(this,2,e,Jle,t,arguments.length>2?arguments[2]:!1)},setUint16:function(e,t){Jp(this,2,e,Jle,t,arguments.length>2?arguments[2]:!1)},setInt32:function(e,t){Jp(this,4,e,eue,t,arguments.length>2?arguments[2]:!1)},setUint32:function(e,t){Jp(this,4,e,eue,t,arguments.length>2?arguments[2]:!1)},setFloat32:function(e,t){Jp(this,4,e,dit,t,arguments.length>2?arguments[2]:!1)},setFloat64:function(e,t){Jp(this,8,e,mit,t,arguments.length>2?arguments[2]:!1)}}));var OB,A1,LB;iue(pl,s_);iue(zc,rP);sue.exports={ArrayBuffer:pl,DataView:zc}});var uue=A(()=>{"use strict";var git=ae(),vit=Lt(),yit=P1(),_it=Xp(),kB="ArrayBuffer",lue=yit[kB],xit=vit[kB];git({global:!0,constructor:!0,forced:xit!==lue},{ArrayBuffer:lue});_it(kB)});var qr=A((ymr,_ue)=>{"use strict";var bit=M1(),zB=ar(),ss=Lt(),pue=Rr(),oP=lr(),td=Nr(),BB=os(),wit=Fp(),Eit=_o(),qB=Sn(),Sit=ci(),Tit=pa(),aP=xo(),c_=Gl(),Iit=fr(),Mit=zp(),due=xn(),mue=due.enforce,Ait=due.get,nP=ss.Int8Array,jB=nP&&nP.prototype,cue=ss.Uint8ClampedArray,hue=cue&&cue.prototype,Bc=nP&&aP(nP),Zu=jB&&aP(jB),Cit=Object.prototype,UB=ss.TypeError,fue=Iit("toStringTag"),FB=Mit("TYPED_ARRAY_TAG"),iP="TypedArrayConstructor",rf=bit&&!!c_&&BB(ss.opera)!=="Opera",gue=!1,Ns,ed,u_,nf={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},VB={BigInt64Array:8,BigUint64Array:8},Pit=function(e){if(!oP(e))return!1;var t=BB(e);return t==="DataView"||td(nf,t)||td(VB,t)},vue=function(r){var e=aP(r);if(oP(e)){var t=Ait(e);return t&&td(t,iP)?t[iP]:vue(e)}},yue=function(r){if(!oP(r))return!1;var e=BB(r);return td(nf,e)||td(VB,e)},Rit=function(r){if(yue(r))return r;throw new UB("Target is not a typed array")},Oit=function(r){if(pue(r)&&(!c_||Tit(Bc,r)))return r;throw new UB(wit(r)+" is not a typed array constructor")},Lit=function(r,e,t,n){if(zB){if(t)for(var i in nf){var o=ss[i];if(o&&td(o.prototype,r))try{delete o.prototype[r]}catch(l){try{o.prototype[r]=e}catch(c){}}}(!Zu[r]||t)&&qB(Zu,r,t?e:rf&&jB[r]||e,n)}},Dit=function(r,e,t){var n,i;if(zB){if(c_){if(t){for(n in nf)if(i=ss[n],i&&td(i,r))try{delete i[r]}catch(o){}}if(!Bc[r]||t)try{return qB(Bc,r,t?e:rf&&Bc[r]||e)}catch(o){}else return}for(n in nf)i=ss[n],i&&(!i[r]||t)&&qB(i,r,e)}};for(Ns in nf)ed=ss[Ns],u_=ed&&ed.prototype,u_?mue(u_)[iP]=ed:rf=!1;for(Ns in VB)ed=ss[Ns],u_=ed&&ed.prototype,u_&&(mue(u_)[iP]=ed);if((!rf||!pue(Bc)||Bc===Function.prototype)&&(Bc=function(){throw new UB("Incorrect invocation")},rf))for(Ns in nf)ss[Ns]&&c_(ss[Ns],Bc);if((!rf||!Zu||Zu===Cit)&&(Zu=Bc.prototype,rf))for(Ns in nf)ss[Ns]&&c_(ss[Ns].prototype,Zu);rf&&aP(hue)!==Zu&&c_(hue,Zu);if(zB&&!td(Zu,fue)){gue=!0,Sit(Zu,fue,{configurable:!0,get:function(){return oP(this)?this[FB]:void 0}});for(Ns in nf)ss[Ns]&&Eit(ss[Ns],FB,Ns)}_ue.exports={NATIVE_ARRAY_BUFFER_VIEWS:rf,TYPED_ARRAY_TAG:gue&&FB,aTypedArray:Rit,aTypedArrayConstructor:Oit,exportTypedArrayMethod:Lit,exportTypedArrayStaticMethod:Dit,getTypedArrayConstructor:vue,isView:Pit,isTypedArray:yue,TypedArray:Bc,TypedArrayPrototype:Zu}});var bue=A(()=>{"use strict";var Nit=ae(),xue=qr(),kit=xue.NATIVE_ARRAY_BUFFER_VIEWS;Nit({target:"ArrayBuffer",stat:!0,forced:!kit},{isView:xue.isView})});var Mue=A(()=>{"use strict";var qit=ae(),$B=Up(),jit=yt(),Tue=P1(),wue=kt(),Eue=Gu(),Fit=Os(),HB=Tue.ArrayBuffer,GB=Tue.DataView,Iue=GB.prototype,Sue=$B(HB.prototype.slice),zit=$B(Iue.getUint8),Bit=$B(Iue.setUint8),Uit=jit(function(){return!new HB(2).slice(1,void 0).byteLength});qit({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Uit},{slice:function(e,t){if(Sue&&t===void 0)return Sue(wue(this),e);for(var n=wue(this).byteLength,i=Eue(e,n),o=Eue(t===void 0?n:t,n),l=new HB(Fit(o-i)),c=new GB(this),p=new GB(l),g=0;i<o;)Bit(p,g++,zit(c,i++));return l}})});var Aue=A(()=>{"use strict";var Vit=ae(),Git=P1(),$it=M1();Vit({global:!0,constructor:!0,forced:!$it},{DataView:Git.DataView})});var Cue=A(()=>{"use strict";Aue()});var WB=A(()=>{"use strict";var Hit=ae(),Wit=pt(),Lue=Math.pow,Pue=31,Zit=1023,Rue=Lue(2,-24),Oue=.0009765625,Yit=function(r){var e=r>>>15,t=r>>>10&Pue,n=r&Zit;return t===Pue?n===0?e===0?1/0:-1/0:NaN:t===0?n*(e===0?Rue:-Rue):Lue(2,t-15)*(e===0?1+n*Oue:-1-n*Oue)},Kit=Wit(DataView.prototype.getUint16);Hit({target:"DataView",proto:!0},{getFloat16:function(e){var t=Kit(this,e,arguments.length>1?arguments[1]:!1);return Yit(t)}})});var ZB=A((Cmr,Due)=>{"use strict";var Xit=os(),Qit=TypeError;Due.exports=function(r){if(Xit(r)==="DataView")return r;throw new Qit("Argument is not a DataView")}});var YB=A((Pmr,Nue)=>{"use strict";var Jit=Math.log,eot=Math.LN2;Nue.exports=Math.log2||function(e){return Jit(e)/eot}});var XB=A(()=>{"use strict";var tot=ae(),rot=pt(),not=ZB(),iot=o_(),oot=YB(),kue=AB(),aot=Math.pow,sot=65520,lot=61005353927612305e-21,uot=16777216,KB=1024,cot=function(r){if(r!==r)return 32256;if(r===0)return(1/r===-1/0)<<15;var e=r<0;if(e&&(r=-r),r>=sot)return e<<15|31744;if(r<lot)return e<<15|kue(r*uot);var t=oot(r)|0;if(t===-15)return e<<15|KB;var n=kue((r*aot(2,-t)-1)*KB);return n===KB?e<<15|t+16<<10:e<<15|t+15<<10|n},hot=rot(DataView.prototype.setUint16);tot({target:"DataView",proto:!0},{setFloat16:function(e,t){not(this);var n=iot(e),i=cot(+t);return hot(this,n,i,arguments.length>2?arguments[2]:!1)}})});var QB=A((Lmr,Fue)=>{"use strict";var jue=Lt(),fot=v1(),pot=fa(),que=jue.ArrayBuffer,dot=jue.TypeError;Fue.exports=que&&fot(que.prototype,"byteLength","get")||function(r){if(pot(r)!=="ArrayBuffer")throw new dot("ArrayBuffer expected");return r.byteLength}});var JB=A((Dmr,zue)=>{"use strict";var mot=Lt(),got=M1(),vot=QB(),yot=mot.DataView;zue.exports=function(r){if(!got||vot(r)!==0)return!1;try{return new yot(r),!1}catch(e){return!0}}});var eU=A(()=>{"use strict";var _ot=ar(),xot=ci(),bot=JB(),Bue=ArrayBuffer.prototype;_ot&&!("detached"in Bue)&&xot(Bue,"detached",{configurable:!0,get:function(){return bot(this)}})});var h_=A((qmr,Uue)=>{"use strict";var wot=JB(),Eot=TypeError;Uue.exports=function(r){if(wot(r))throw new Eot("ArrayBuffer is detached");return r}});var tU=A((jmr,Vue)=>{"use strict";var Sot=Lt(),Tot=dg();Vue.exports=function(r){if(Tot){try{return Sot.process.getBuiltinModule(r)}catch(e){}try{return Function("return require(\""+r+"\")")()}catch(e){}}}});var sP=A((Fmr,$ue)=>{"use strict";var Iot=Lt(),Mot=yt(),rU=Uu(),nU=I1(),Gue=Iot.structuredClone;$ue.exports=!!Gue&&!Mot(function(){if(nU==="DENO"&&rU>92||nU==="NODE"&&rU>94||nU==="BROWSER"&&rU>97)return!1;var r=new ArrayBuffer(8),e=Gue(r,{transfer:[r]});return r.byteLength!==0||e.byteLength!==8})});var lU=A((zmr,Zue)=>{"use strict";var sU=Lt(),Aot=tU(),Cot=sP(),Pot=sU.structuredClone,Hue=sU.ArrayBuffer,lP=sU.MessageChannel,aU=!1,iU,Wue,uP,oU;if(Cot)aU=function(r){Pot(r,{transfer:[r]})};else if(Hue)try{lP||(iU=Aot("worker_threads"),iU&&(lP=iU.MessageChannel)),lP&&(Wue=new lP,uP=new Hue(2),oU=function(r){Wue.port1.postMessage(null,[r])},uP.byteLength===2&&(oU(uP),uP.byteLength===0&&(aU=oU)))}catch(r){}Zue.exports=aU});var dU=A((Bmr,tce)=>{"use strict";var hU=Lt(),fU=pt(),Que=v1(),Rot=o_(),Oot=h_(),Lot=QB(),Yue=lU(),uU=sP(),Dot=hU.structuredClone,Jue=hU.ArrayBuffer,cU=hU.DataView,Not=Math.min,pU=Jue.prototype,ece=cU.prototype,kot=fU(pU.slice),Kue=Que(pU,"resizable","get"),Xue=Que(pU,"maxByteLength","get"),qot=fU(ece.getInt8),jot=fU(ece.setInt8);tce.exports=(uU||Yue)&&function(r,e,t){var n=Lot(r),i=e===void 0?n:Rot(e),o=!Kue||!Kue(r),l;if(Oot(r),uU&&(r=Dot(r,{transfer:[r]}),n===i&&(t||o)))return r;if(n>=i&&(!t||o))l=kot(r,0,i);else{var c=t&&!o&&Xue?{maxByteLength:Xue(r)}:void 0;l=new Jue(i,c);for(var p=new cU(r),g=new cU(l),_=Not(i,n),x=0;x<_;x++)jot(g,x,qot(p,x))}return uU||Yue(r),l}});var mU=A(()=>{"use strict";var Fot=ae(),rce=dU();rce&&Fot({target:"ArrayBuffer",proto:!0},{transfer:function(){return rce(this,arguments.length?arguments[0]:void 0,!0)}})});var gU=A(()=>{"use strict";var zot=ae(),nce=dU();nce&&zot({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return nce(this,arguments.length?arguments[0]:void 0,!1)}})});var ice=A(()=>{"use strict";var Bot=ae(),Uot=pt(),Vot=yt(),Got=Vot(function(){return new Date(16e11).getYear()!==120}),$ot=Uot(Date.prototype.getFullYear);Bot({target:"Date",proto:!0,forced:Got},{getYear:function(){return $ot(this)-1900}})});var ace=A(()=>{"use strict";var Hot=ae(),Wot=pt(),oce=Date,Zot=Wot(oce.prototype.getTime);Hot({target:"Date",stat:!0},{now:function(){return Zot(new oce)}})});var uce=A(()=>{"use strict";var Yot=ae(),sce=pt(),Kot=ui(),lce=Date.prototype,Xot=sce(lce.getTime),Qot=sce(lce.setFullYear);Yot({target:"Date",proto:!0},{setYear:function(e){Xot(this);var t=Kot(e),n=t>=0&&t<=99?t+1900:t;return Qot(this,n)}})});var cce=A(()=>{"use strict";var Jot=ae();Jot({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var R1=A((egr,hce)=>{"use strict";var eat=ui(),tat=wr(),rat=ei(),nat=RangeError;hce.exports=function(e){var t=tat(rat(this)),n="",i=eat(e);if(i<0||i===1/0)throw new nat("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))i&1&&(n+=t);return n}});var O1=A((tgr,mce)=>{"use strict";var dce=pt(),iat=Os(),fce=wr(),oat=R1(),aat=ei(),sat=dce(oat),lat=dce("".slice),uat=Math.ceil,pce=function(r){return function(e,t,n){var i=fce(aat(e)),o=iat(t),l=i.length,c=n===void 0?" ":fce(n),p,g;return o<=l||c===""?i:(p=o-l,g=sat(c,uat(p/c.length)),g.length>p&&(g=lat(g,0,p)),r?i+g:g+i)}};mce.exports={start:pce(!1),end:pce(!0)}});var yce=A((rgr,vce)=>{"use strict";var rd=pt(),gce=yt(),gg=O1().start,cat=RangeError,hat=isFinite,fat=Math.abs,of=Date.prototype,vU=of.toISOString,pat=rd(of.getTime),dat=rd(of.getUTCDate),mat=rd(of.getUTCFullYear),gat=rd(of.getUTCHours),vat=rd(of.getUTCMilliseconds),yat=rd(of.getUTCMinutes),_at=rd(of.getUTCMonth),xat=rd(of.getUTCSeconds);vce.exports=gce(function(){return vU.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!gce(function(){vU.call(new Date(NaN))})?function(){if(!hat(pat(this)))throw new cat("Invalid time value");var e=this,t=mat(e),n=vat(e),i=t<0?"-":t>9999?"+":"";return i+gg(fat(t),i?6:4,0)+"-"+gg(_at(e)+1,2,0)+"-"+gg(dat(e),2,0)+"T"+gg(gat(e),2,0)+":"+gg(yat(e),2,0)+":"+gg(xat(e),2,0)+"."+gg(n,3,0)+"Z"}:vU});var xce=A(()=>{"use strict";var bat=ae(),_ce=yce();bat({target:"Date",proto:!0,forced:Date.prototype.toISOString!==_ce},{toISOString:_ce})});var bce=A(()=>{"use strict";var wat=ae(),Eat=yt(),Sat=Ur(),Tat=r1(),Iat=Eat(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});wat({target:"Date",proto:!0,arity:1,forced:Iat},{toJSON:function(e){var t=Sat(this),n=Tat(t,"number");return typeof n=="number"&&!isFinite(n)?null:t.toISOString()}})});var Ece=A((sgr,wce)=>{"use strict";var Mat=kt(),Aat=Uz(),Cat=TypeError;wce.exports=function(r){if(Mat(this),r==="string"||r==="default")r="string";else if(r!=="number")throw new Cat("Incorrect hint");return Aat(this,r)}});var Ice=A(()=>{"use strict";var Pat=Nr(),Rat=Sn(),Oat=Ece(),Lat=fr(),Sce=Lat("toPrimitive"),Tce=Date.prototype;Pat(Tce,Sce)||Rat(Tce,Sce,Oat)});var Pce=A(()=>{"use strict";var Ace=pt(),Dat=Sn(),yU=Date.prototype,Mce="Invalid Date",Cce="toString",Nat=Ace(yU[Cce]),kat=Ace(yU.getTime);String(new Date(NaN))!==Mce&&Dat(yU,Cce,function(){var e=kat(this);return e===e?Nat(this):Mce})});var Oce=A(()=>{"use strict";var qat=ae(),L1=pt(),jat=wr(),Fat=L1("".charAt),zat=L1("".charCodeAt),Bat=L1(/./.exec),Uat=L1(1 .toString),Vat=L1("".toUpperCase),Gat=/[\w*+\-./@]/,Rce=function(r,e){for(var t=Uat(r,16);t.length<e;)t="0"+t;return t};qat({global:!0},{escape:function(e){for(var t=jat(e),n="",i=t.length,o=0,l,c;o<i;)l=Fat(t,o++),Bat(Gat,l)?n+=l:(c=zat(l,0),c<256?n+="%"+Rce(c,2):n+="%u"+Vat(Rce(c,4)));return n}})});var xU=A((dgr,kce)=>{"use strict";var Dce=pt(),$at=vr(),Hat=lr(),Wat=Nr(),Lce=Ls(),Zat=Zy(),Nce=Function,Yat=Dce([].concat),Kat=Dce([].join),_U={},Xat=function(r,e,t){if(!Wat(_U,e)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";_U[e]=Nce("C,a","return new C("+Kat(n,",")+")")}return _U[e](r,t)};kce.exports=Zat?Nce.bind:function(e){var t=$at(this),n=t.prototype,i=Lce(arguments,1),o=function(){var c=Yat(i,Lce(arguments));return this instanceof o?Xat(t,c.length,c):t.apply(e,c)};return Hat(n)&&(o.prototype=n),o}});var jce=A(()=>{"use strict";var Qat=ae(),qce=xU();Qat({target:"Function",proto:!0,forced:Function.bind!==qce},{bind:qce})});var Bce=A(()=>{"use strict";var Jat=Rr(),Fce=lr(),est=Wn(),tst=pa(),rst=fr(),nst=s1(),bU=rst("hasInstance"),zce=Function.prototype;bU in zce||est.f(zce,bU,{value:nst(function(r){if(!Jat(this)||!Fce(r))return!1;var e=this.prototype;return Fce(e)?tst(e,r):r instanceof this},bU)})});var $ce=A(()=>{"use strict";var ist=ar(),ost=ig().EXISTS,Uce=pt(),ast=ci(),Vce=Function.prototype,sst=Uce(Vce.toString),Gce=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,lst=Uce(Gce.exec),ust="name";ist&&!ost&&ast(Vce,ust,{configurable:!0,get:function(){try{return lst(Gce,sst(this))[1]}catch(r){return""}}})});var EU=A(()=>{"use strict";var cst=ae(),wU=Lt();cst({global:!0,forced:wU.globalThis!==wU},{globalThis:wU})});var AU=A(()=>{"use strict";var hst=ae(),fst=Lt(),pst=La(),dst=kt(),mst=Rr(),gst=xo(),vst=ci(),yst=$l(),_st=yt(),IU=Nr(),xst=fr(),Uc=Zp().IteratorPrototype,bst=ar(),wst=un(),SU="constructor",Wce="Iterator",Hce=xst("toStringTag"),Zce=TypeError,TU=fst[Wce],Yce=wst||!mst(TU)||TU.prototype!==Uc||!_st(function(){TU({})}),MU=function(){if(pst(this,Uc),gst(this)===Uc)throw new Zce("Abstract class Iterator not directly constructable")},Kce=function(r,e){bst?vst(Uc,r,{configurable:!0,get:function(){return e},set:function(t){if(dst(this),this===Uc)throw new Zce("You can't redefine this property");IU(this,r)?this[r]=t:yst(this,r,t)}}):Uc[r]=e};IU(Uc,Hce)||Kce(Hce,Wce);(Yce||!IU(Uc,SU)||Uc[SU]===Object)&&Kce(SU,MU);MU.prototype=Uc;hst({global:!0,constructor:!0,forced:Yce},{Iterator:MU})});var xi=A((Tgr,Xce)=>{"use strict";Xce.exports=function(r){return{iterator:r,next:r.next,done:!1}}});var f_=A((Igr,Qce)=>{"use strict";var Est=RangeError;Qce.exports=function(r){if(r===r)return r;throw new Est("NaN is not allowed")}});var p_=A((Mgr,Jce)=>{"use strict";var Sst=ui(),Tst=RangeError;Jce.exports=function(r){var e=Sst(r);if(e<0)throw new Tst("The argument can't be less than 0");return e}});var nd=A((Agr,ohe)=>{"use strict";var Ist=Dt(),Mst=Zi(),Ast=_o(),Cst=Wl(),Pst=fr(),ehe=xn(),Rst=Wi(),Ost=Zp().IteratorPrototype,cP=ko(),CU=Xo(),Lst=Pst("toStringTag"),the="IteratorHelper",rhe="WrapForValidIterator",Dst=ehe.set,nhe=function(r){var e=ehe.getterFor(r?rhe:the);return Cst(Mst(Ost),{next:function(){var n=e(this);if(r)return n.nextHandler();if(n.done)return cP(void 0,!0);try{var i=n.nextHandler();return n.returnHandlerResult?i:cP(i,n.done)}catch(o){throw n.done=!0,o}},return:function(){var t=e(this),n=t.iterator;if(t.done=!0,r){var i=Rst(n,"return");return i?Ist(i,n):cP(void 0,!0)}if(t.inner)try{CU(t.inner.iterator,"normal")}catch(o){return CU(n,"throw",o)}return n&&CU(n,"normal"),cP(void 0,!0)}})},Nst=nhe(!0),ihe=nhe(!1);Ast(ihe,Lst,"Iterator Helper");ohe.exports=function(r,e,t){var n=function(o,l){l?(l.iterator=o.iterator,l.next=o.next):l=o,l.type=e?rhe:the,l.returnHandlerResult=!!t,l.nextHandler=r,l.counter=0,l.done=!1,Dst(this,l)};return n.prototype=e?Nst:ihe,n}});var Yu=A((Cgr,ahe)=>{"use strict";var kst=Lt();ahe.exports=function(r,e){var t=kst.Iterator,n=t&&t.prototype,i=n&&n[r],o=!1;if(i)try{i.call({next:function(){return{done:!0}},return:function(){o=!0}},-1)}catch(l){l instanceof e||(o=!1)}if(!o)return i}});var LU=A(()=>{"use strict";var qst=ae(),RU=Dt(),OU=kt(),jst=xi(),Fst=f_(),zst=p_(),Bst=Xo(),Ust=nd(),Vst=Yu(),she=un(),PU=!she&&Vst("drop",RangeError),Gst=Ust(function(){for(var r=this.iterator,e=this.next,t,n;this.remaining;)if(this.remaining--,t=OU(RU(e,r)),n=this.done=!!t.done,n)return;if(t=OU(RU(e,r)),n=this.done=!!t.done,!n)return t.value});qst({target:"Iterator",proto:!0,real:!0,forced:she||PU},{drop:function(e){OU(this);var t;try{t=zst(Fst(+e))}catch(n){Bst(this,"throw",n)}return PU?RU(PU,this,t):new Gst(jst(this),{remaining:t})}})});var NU=A(()=>{"use strict";var $st=ae(),Hst=Dt(),Wst=Ii(),Zst=vr(),Yst=kt(),Kst=xi(),Xst=Xo(),Qst=Yu(),DU=Qst("every",TypeError);$st({target:"Iterator",proto:!0,real:!0,forced:DU},{every:function(e){Yst(this);try{Zst(e)}catch(i){Xst(this,"throw",i)}if(DU)return Hst(DU,this,e);var t=Kst(this),n=0;return!Wst(t,function(i,o){if(!e(i,n++))return o()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var qU=A(()=>{"use strict";var Jst=ae(),lhe=Dt(),elt=vr(),uhe=kt(),tlt=xi(),rlt=nd(),nlt=zC(),che=un(),ilt=Xo(),olt=Yu(),kU=!che&&olt("filter",TypeError),alt=rlt(function(){for(var r=this.iterator,e=this.predicate,t=this.next,n,i,o;;){if(n=uhe(lhe(t,r)),i=this.done=!!n.done,i)return;if(o=n.value,nlt(r,e,[o,this.counter++],!0))return o}});Jst({target:"Iterator",proto:!0,real:!0,forced:che||kU},{filter:function(e){uhe(this);try{elt(e)}catch(t){ilt(this,"throw",t)}return kU?lhe(kU,this,e):new alt(tlt(this),{predicate:e})}})});var FU=A(()=>{"use strict";var slt=ae(),llt=Dt(),ult=Ii(),clt=vr(),hlt=kt(),flt=xi(),plt=Xo(),dlt=Yu(),jU=dlt("find",TypeError);slt({target:"Iterator",proto:!0,real:!0,forced:jU},{find:function(e){hlt(this);try{clt(e)}catch(i){plt(this,"throw",i)}if(jU)return llt(jU,this,e);var t=flt(this),n=0;return ult(t,function(i,o){if(e(i,n++))return o(i)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var zU=A((jgr,fhe)=>{"use strict";var mlt=Dt(),hhe=kt(),glt=xi(),vlt=Fc();fhe.exports=function(r,e){(!e||typeof r!="string")&&hhe(r);var t=vlt(r);return glt(hhe(t!==void 0?mlt(t,r):r))}});var $U=A(()=>{"use strict";var ylt=ae(),UU=Dt(),_lt=vr(),VU=kt(),xlt=xi(),blt=zU(),wlt=nd(),GU=Xo(),phe=un(),Elt=Yu(),BU=!phe&&Elt("flatMap",TypeError),Slt=wlt(function(){for(var r=this.iterator,e=this.mapper,t,n;;){if(n=this.inner)try{if(t=VU(UU(n.next,n.iterator)),!t.done)return t.value;this.inner=null}catch(i){GU(r,"throw",i)}if(t=VU(UU(this.next,r)),this.done=!!t.done)return;try{this.inner=blt(e(t.value,this.counter++),!1)}catch(i){GU(r,"throw",i)}}});ylt({target:"Iterator",proto:!0,real:!0,forced:phe||BU},{flatMap:function(e){VU(this);try{_lt(e)}catch(t){GU(this,"throw",t)}return BU?UU(BU,this,e):new Slt(xlt(this),{mapper:e,inner:null})}})});var WU=A(()=>{"use strict";var Tlt=ae(),Ilt=Dt(),Mlt=Ii(),Alt=vr(),Clt=kt(),Plt=xi(),Rlt=Xo(),Olt=Yu(),HU=Olt("forEach",TypeError);Tlt({target:"Iterator",proto:!0,real:!0,forced:HU},{forEach:function(e){Clt(this);try{Alt(e)}catch(i){Rlt(this,"throw",i)}if(HU)return Ilt(HU,this,e);var t=Plt(this),n=0;Mlt(t,function(i){e(i,n++)},{IS_RECORD:!0})}})});var ZU=A(()=>{"use strict";var Llt=ae(),Dlt=Dt(),Nlt=Ur(),klt=pa(),qlt=Zp().IteratorPrototype,jlt=nd(),Flt=zU(),zlt=un(),Blt=jlt(function(){return Dlt(this.next,this.iterator)},!0);Llt({target:"Iterator",stat:!0,forced:zlt},{from:function(e){var t=Flt(typeof e=="string"?Nlt(e):e,!0);return klt(qlt,t.iterator)?t.iterator:new Blt(t)}})});var hP=A(()=>{"use strict";var Ult=ae(),dhe=Dt(),Vlt=vr(),mhe=kt(),Glt=xi(),$lt=nd(),Hlt=zC(),Wlt=Xo(),Zlt=Yu(),ghe=un(),YU=!ghe&&Zlt("map",TypeError),Ylt=$lt(function(){var r=this.iterator,e=mhe(dhe(this.next,r)),t=this.done=!!e.done;if(!t)return Hlt(r,this.mapper,[e.value,this.counter++],!0)});Ult({target:"Iterator",proto:!0,real:!0,forced:ghe||YU},{map:function(e){mhe(this);try{Vlt(e)}catch(t){Wlt(this,"throw",t)}return YU?dhe(YU,this,e):new Ylt(Glt(this),{mapper:e})}})});var XU=A(()=>{"use strict";var Klt=ae(),Xlt=Ii(),Qlt=vr(),Jlt=kt(),eut=xi(),tut=Xo(),rut=Yu(),nut=da(),iut=yt(),vhe=TypeError,yhe=iut(function(){[].keys().reduce(function(){},void 0)}),KU=!yhe&&rut("reduce",vhe);Klt({target:"Iterator",proto:!0,real:!0,forced:yhe||KU},{reduce:function(e){Jlt(this);try{Qlt(e)}catch(l){tut(this,"throw",l)}var t=arguments.length<2,n=t?void 0:arguments[1];if(KU)return nut(KU,this,t?[e]:[e,n]);var i=eut(this),o=0;if(Xlt(i,function(l){t?(t=!1,n=l):n=e(n,l,o),o++},{IS_RECORD:!0}),t)throw new vhe("Reduce of empty iterator with no initial value");return n}})});var JU=A(()=>{"use strict";var out=ae(),aut=Dt(),sut=Ii(),lut=vr(),uut=kt(),cut=xi(),hut=Xo(),fut=Yu(),QU=fut("some",TypeError);out({target:"Iterator",proto:!0,real:!0,forced:QU},{some:function(e){uut(this);try{lut(e)}catch(i){hut(this,"throw",i)}if(QU)return aut(QU,this,e);var t=cut(this),n=0;return sut(t,function(i,o){if(e(i,n++))return o()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var t3=A(()=>{"use strict";var put=ae(),_he=Dt(),xhe=kt(),dut=xi(),mut=f_(),gut=p_(),vut=nd(),bhe=Xo(),yut=Yu(),whe=un(),e3=!whe&&yut("take",RangeError),_ut=vut(function(){var r=this.iterator;if(!this.remaining--)return this.done=!0,bhe(r,"normal",void 0);var e=xhe(_he(this.next,r)),t=this.done=!!e.done;if(!t)return e.value});put({target:"Iterator",proto:!0,real:!0,forced:whe||e3},{take:function(e){xhe(this);var t;try{t=gut(mut(+e))}catch(n){bhe(this,"throw",n)}return e3?_he(e3,this,t):new _ut(dut(this),{remaining:t})}})});var r3=A(()=>{"use strict";var xut=ae(),but=kt(),wut=Ii(),Eut=xi(),Sut=[].push;xut({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return wut(Eut(but(this)),Sut,{that:e,IS_RECORD:!0}),e}})});var Ehe=A(()=>{"use strict";var Tut=Lt(),Iut=as();Iut(Tut.JSON,"JSON",!0)});var fP=A((nvr,She)=>{"use strict";var Mut=yt();She.exports=Mut(function(){if(typeof ArrayBuffer=="function"){var r=new ArrayBuffer(8);Object.isExtensible(r)&&Object.defineProperty(r,"a",{value:8})}})});var dP=A((ivr,Ihe)=>{"use strict";var Aut=yt(),Cut=lr(),Put=fa(),The=fP(),pP=Object.isExtensible,Rut=Aut(function(){pP(1)});Ihe.exports=Rut||The?function(e){return!Cut(e)||The&&Put(e)==="ArrayBuffer"?!1:pP?pP(e):!0}:pP});var af=A((ovr,Mhe)=>{"use strict";var Out=yt();Mhe.exports=!Out(function(){return Object.isExtensible(Object.preventExtensions({}))})});var id=A((avr,Phe)=>{"use strict";var Lut=ae(),Dut=pt(),Nut=Ky(),kut=lr(),n3=Nr(),qut=Wn().f,Ahe=Bp(),jut=bC(),i3=dP(),Fut=zp(),zut=af(),Che=!1,sf=Fut("meta"),But=0,o3=function(r){qut(r,sf,{value:{objectID:"O"+But++,weakData:{}}})},Uut=function(r,e){if(!kut(r))return typeof r=="symbol"?r:(typeof r=="string"?"S":"P")+r;if(!n3(r,sf)){if(!i3(r))return"F";if(!e)return"E";o3(r)}return r[sf].objectID},Vut=function(r,e){if(!n3(r,sf)){if(!i3(r))return!0;if(!e)return!1;o3(r)}return r[sf].weakData},Gut=function(r){return zut&&Che&&i3(r)&&!n3(r,sf)&&o3(r),r},$ut=function(){Hut.enable=function(){},Che=!0;var r=Ahe.f,e=Dut([].splice),t={};t[sf]=1,r(t).length&&(Ahe.f=function(n){for(var i=r(n),o=0,l=i.length;o<l;o++)if(i[o]===sf){e(i,o,1);break}return i},Lut({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:jut.f}))},Hut=Phe.exports={enable:$ut,fastKey:Uut,getWeakData:Vut,onFreeze:Gut};Nut[sf]=!0});var D1=A((svr,Ohe)=>{"use strict";var Wut=ae(),Zut=Lt(),Yut=pt(),Rhe=Qy(),Kut=Sn(),Xut=id(),Qut=Ii(),Jut=La(),ect=Rr(),tct=Rs(),a3=lr(),s3=yt(),rct=x1(),nct=as(),ict=$p();Ohe.exports=function(r,e,t){var n=r.indexOf("Map")!==-1,i=r.indexOf("Weak")!==-1,o=n?"set":"add",l=Zut[r],c=l&&l.prototype,p=l,g={},_=function(k){var q=Yut(c[k]);Kut(c,k,k==="add"?function(H){return q(this,H===0?0:H),this}:k==="delete"?function(U){return i&&!a3(U)?!1:q(this,U===0?0:U)}:k==="get"?function(H){return i&&!a3(H)?void 0:q(this,H===0?0:H)}:k==="has"?function(H){return i&&!a3(H)?!1:q(this,H===0?0:H)}:function(H,se){return q(this,H===0?0:H,se),this})},x=Rhe(r,!ect(l)||!(i||c.forEach&&!s3(function(){new l().entries().next()})));if(x)p=t.getConstructor(e,r,n,o),Xut.enable();else if(Rhe(r,!0)){var T=new p,C=T[o](i?{}:-0,1)!==T,D=s3(function(){T.has(1)}),F=rct(function(k){new l(k)}),O=!i&&s3(function(){for(var k=new l,q=5;q--;)k[o](q,q);return!k.has(-0)});F||(p=e(function(k,q){Jut(k,c);var U=ict(new l,k,p);return tct(q)||Qut(q,U[o],{that:U,AS_ENTRIES:n}),U}),p.prototype=c,c.constructor=p),(D||O)&&(_("delete"),_("has"),n&&_("get")),(O||C)&&_(o),i&&c.clear&&delete c.clear}return g[r]=p,Wut({global:!0,constructor:!0,forced:p!==l},g),nct(p,r),i||t.setStrong(p,r,n),p}});var u3=A((lvr,jhe)=>{"use strict";var Lhe=Zi(),oct=ci(),Dhe=Wl(),act=kn(),sct=La(),lct=Rs(),uct=Ii(),cct=VC(),mP=ko(),hct=Xp(),N1=ar(),Nhe=id().fastKey,qhe=xn(),khe=qhe.set,l3=qhe.getterFor;jhe.exports={getConstructor:function(r,e,t,n){var i=r(function(g,_){sct(g,o),khe(g,{type:e,index:Lhe(null),first:null,last:null,size:0}),N1||(g.size=0),lct(_)||uct(_,g[n],{that:g,AS_ENTRIES:t})}),o=i.prototype,l=l3(e),c=function(g,_,x){var T=l(g),C=p(g,_),D,F;return C?C.value=x:(T.last=C={index:F=Nhe(_,!0),key:_,value:x,previous:D=T.last,next:null,removed:!1},T.first||(T.first=C),D&&(D.next=C),N1?T.size++:g.size++,F!=="F"&&(T.index[F]=C)),g},p=function(g,_){var x=l(g),T=Nhe(_),C;if(T!=="F")return x.index[T];for(C=x.first;C;C=C.next)if(C.key===_)return C};return Dhe(o,{clear:function(){for(var _=this,x=l(_),T=x.first;T;)T.removed=!0,T.previous&&(T.previous=T.previous.next=null),T=T.next;x.first=x.last=null,x.index=Lhe(null),N1?x.size=0:_.size=0},delete:function(g){var _=this,x=l(_),T=p(_,g);if(T){var C=T.next,D=T.previous;delete x.index[T.index],T.removed=!0,D&&(D.next=C),C&&(C.previous=D),x.first===T&&(x.first=C),x.last===T&&(x.last=D),N1?x.size--:_.size--}return!!T},forEach:function(_){for(var x=l(this),T=act(_,arguments.length>1?arguments[1]:void 0),C;C=C?C.next:x.first;)for(T(C.value,C.key,this);C&&C.removed;)C=C.previous},has:function(_){return!!p(this,_)}}),Dhe(o,t?{get:function(_){var x=p(this,_);return x&&x.value},set:function(_,x){return c(this,_===0?0:_,x)}}:{add:function(_){return c(this,_=_===0?0:_,_)}}),N1&&oct(o,"size",{configurable:!0,get:function(){return l(this).size}}),i},setStrong:function(r,e,t){var n=e+" Iterator",i=l3(e),o=l3(n);cct(r,e,function(l,c){khe(this,{type:n,target:l,state:i(l),kind:c,last:null})},function(){for(var l=o(this),c=l.kind,p=l.last;p&&p.removed;)p=p.previous;return!l.target||!(l.last=p=p?p.next:l.state.first)?(l.target=null,mP(void 0,!0)):mP(c==="keys"?p.key:c==="values"?p.value:[p.key,p.value],!1)},t?"entries":"values",!t,!0),hct(e)}}});var Fhe=A(()=>{"use strict";var fct=D1(),pct=u3();fct("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},pct)});var gP=A(()=>{"use strict";Fhe()});var qo=A((pvr,zhe)=>{"use strict";var vP=pt(),k1=Map.prototype;zhe.exports={Map,set:vP(k1.set),get:vP(k1.get),has:vP(k1.has),remove:vP(k1.delete),proto:k1}});var c3=A(()=>{"use strict";var dct=ae(),mct=pt(),gct=vr(),vct=ei(),yct=Ii(),yP=qo(),Bhe=un(),_ct=yt(),Uhe=yP.Map,xct=yP.has,bct=yP.get,wct=yP.set,Ect=mct([].push),Sct=Bhe||_ct(function(){return Uhe.groupBy("ab",function(r){return r}).get("a").length!==1});dct({target:"Map",stat:!0,forced:Bhe||Sct},{groupBy:function(e,t){vct(e),gct(t);var n=new Uhe,i=0;return yct(e,function(o){var l=t(o,i++);xct(n,l)?Ect(bct(n,l),o):wct(n,l,[o])}),n}})});var h3=A((gvr,Vhe)=>{"use strict";var Tct=Math.log;Vhe.exports=Math.log1p||function(e){var t=+e;return t>-1e-8&&t<1e-8?t-t*t/2:Tct(1+t)}});var $he=A(()=>{"use strict";var Ict=ae(),Mct=h3(),f3=Math.acosh,Act=Math.log,Ghe=Math.sqrt,Cct=Math.LN2,Pct=!f3||Math.floor(f3(Number.MAX_VALUE))!==710||f3(1/0)!==1/0;Ict({target:"Math",stat:!0,forced:Pct},{acosh:function(e){var t=+e;return t<1?NaN:t>94906265.62425156?Act(t)+Cct:Mct(t-1+Ghe(t-1)*Ghe(t+1))}})});var Zhe=A(()=>{"use strict";var Rct=ae(),Hhe=Math.asinh,Oct=Math.log,Lct=Math.sqrt;function Whe(r){var e=+r;return!isFinite(e)||e===0?e:e<0?-Whe(-e):Oct(e+Lct(e*e+1))}var Dct=!(Hhe&&1/Hhe(0)>0);Rct({target:"Math",stat:!0,forced:Dct},{asinh:Whe})});var Khe=A(()=>{"use strict";var Nct=ae(),Yhe=Math.atanh,kct=Math.log,qct=!(Yhe&&1/Yhe(-0)<0);Nct({target:"Math",stat:!0,forced:qct},{atanh:function(e){var t=+e;return t===0?t:kct((1+t)/(1-t))/2}})});var Xhe=A(()=>{"use strict";var jct=ae(),Fct=YC(),zct=Math.abs,Bct=Math.pow;jct({target:"Math",stat:!0},{cbrt:function(e){var t=+e;return Fct(t)*Bct(zct(t),1/3)}})});var Qhe=A(()=>{"use strict";var Uct=ae(),Vct=Math.floor,Gct=Math.log,$ct=Math.LOG2E;Uct({target:"Math",stat:!0},{clz32:function(e){var t=e>>>0;return t?31-Vct(Gct(t+.5)*$ct):32}})});var j1=A((Mvr,Jhe)=>{"use strict";var q1=Math.expm1,Hct=Math.exp;Jhe.exports=!q1||q1(10)>22025.465794806718||q1(10)<22025.465794806718||q1(-2e-17)!==-2e-17?function(e){var t=+e;return t===0?t:t>-1e-6&&t<1e-6?t+t*t/2:Hct(t)-1}:q1});var tfe=A(()=>{"use strict";var Wct=ae(),Zct=j1(),efe=Math.cosh,Yct=Math.abs,p3=Math.E,Kct=!efe||efe(710)===1/0;Wct({target:"Math",stat:!0,forced:Kct},{cosh:function(e){var t=Zct(Yct(e)-1)+1;return(t+1/(t*p3*p3))*(p3/2)}})});var nfe=A(()=>{"use strict";var Xct=ae(),rfe=j1();Xct({target:"Math",stat:!0,forced:rfe!==Math.expm1},{expm1:rfe})});var ife=A(()=>{"use strict";var Qct=ae(),Jct=KC();Qct({target:"Math",stat:!0},{fround:Jct})});var d3=A(()=>{"use strict";var eht=ae(),tht=CB(),rht=.0009765625,nht=65504,iht=6103515625e-14;eht({target:"Math",stat:!0},{f16round:function(e){return tht(e,rht,nht,iht)}})});var afe=A(()=>{"use strict";var oht=ae(),ofe=Math.hypot,aht=Math.abs,sht=Math.sqrt,lht=!!ofe&&ofe(1/0,NaN)!==1/0;oht({target:"Math",stat:!0,arity:2,forced:lht},{hypot:function(e,t){for(var n=0,i=0,o=arguments.length,l=0,c,p;i<o;)c=aht(arguments[i++]),l<c?(p=l/c,n=n*p*p+1,l=c):c>0?(p=c/l,n+=p*p):n+=c;return l===1/0?1/0:l*sht(n)}})});var lfe=A(()=>{"use strict";var uht=ae(),cht=yt(),sfe=Math.imul,hht=cht(function(){return sfe(4294967295,5)!==-5||sfe.length!==2});uht({target:"Math",stat:!0,forced:hht},{imul:function(e,t){var n=65535,i=+e,o=+t,l=n&i,c=n&o;return 0|l*c+((n&i>>>16)*c+l*(n&o>>>16)<<16>>>0)}})});var m3=A((zvr,ufe)=>{"use strict";var fht=Math.log,pht=Math.LOG10E;ufe.exports=Math.log10||function(e){return fht(e)*pht}});var cfe=A(()=>{"use strict";var dht=ae(),mht=m3();dht({target:"Math",stat:!0},{log10:mht})});var hfe=A(()=>{"use strict";var ght=ae(),vht=h3();ght({target:"Math",stat:!0},{log1p:vht})});var ffe=A(()=>{"use strict";var yht=ae(),_ht=YB();yht({target:"Math",stat:!0},{log2:_ht})});var pfe=A(()=>{"use strict";var xht=ae(),bht=YC();xht({target:"Math",stat:!0},{sign:bht})});var gfe=A(()=>{"use strict";var wht=ae(),Eht=yt(),dfe=j1(),Sht=Math.abs,mfe=Math.exp,Tht=Math.E,Iht=Eht(function(){return Math.sinh(-2e-17)!==-2e-17});wht({target:"Math",stat:!0,forced:Iht},{sinh:function(e){var t=+e;return Sht(t)<1?(dfe(t)-dfe(-t))/2:(mfe(t-1)-mfe(-t-1))*(Tht/2)}})});var _fe=A(()=>{"use strict";var Mht=ae(),vfe=j1(),yfe=Math.exp;Mht({target:"Math",stat:!0},{tanh:function(e){var t=+e,n=vfe(t),i=vfe(-t);return n===1/0?1:i===1/0?-1:(n-i)/(yfe(t)+yfe(-t))}})});var xfe=A(()=>{"use strict";var Aht=as();Aht(Math,"Math",!0)});var bfe=A(()=>{"use strict";var Cht=ae(),Pht=a4();Cht({target:"Math",stat:!0},{trunc:Pht})});var F1=A((nyr,wfe)=>{"use strict";var Rht=pt();wfe.exports=Rht(1 .valueOf)});var vg=A((iyr,Efe)=>{"use strict";Efe.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var yg=A((oyr,Tfe)=>{"use strict";var Oht=pt(),Lht=ei(),Dht=wr(),v3=vg(),Sfe=Oht("".replace),Nht=RegExp("^["+v3+"]+"),kht=RegExp("(^|[^"+v3+"])["+v3+"]+$"),g3=function(r){return function(e){var t=Dht(Lht(e));return r&1&&(t=Sfe(t,Nht,"")),r&2&&(t=Sfe(t,kht,"$1")),t}};Tfe.exports={start:g3(1),end:g3(2),trim:g3(3)}});var Ofe=A(()=>{"use strict";var qht=ae(),y3=un(),jht=ar(),Afe=Lt(),_3=wC(),Cfe=pt(),Fht=Qy(),Ife=Nr(),zht=$p(),Bht=pa(),Uht=Yh(),Pfe=r1(),Vht=yt(),Ght=Bp().f,$ht=Yo().f,Hht=Wn().f,Wht=F1(),Zht=yg().trim,z1="Number",d_=Afe[z1],Mfe=_3[z1],x3=d_.prototype,Yht=Afe.TypeError,Kht=Cfe("".slice),_P=Cfe("".charCodeAt),Xht=function(r){var e=Pfe(r,"number");return typeof e=="bigint"?e:Qht(e)},Qht=function(r){var e=Pfe(r,"number"),t,n,i,o,l,c,p,g;if(Uht(e))throw new Yht("Cannot convert a Symbol value to a number");if(typeof e=="string"&&e.length>2){if(e=Zht(e),t=_P(e,0),t===43||t===45){if(n=_P(e,2),n===88||n===120)return NaN}else if(t===48){switch(_P(e,1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+e}for(l=Kht(e,2),c=l.length,p=0;p<c;p++)if(g=_P(l,p),g<48||g>o)return NaN;return parseInt(l,i)}}return+e},b3=Fht(z1,!d_(" 0o1")||!d_("0b1")||d_("+0x1")),Jht=function(r){return Bht(x3,r)&&Vht(function(){Wht(r)})},xP=function(e){var t=arguments.length<1?0:d_(Xht(e));return Jht(this)?zht(Object(t),this,xP):t};xP.prototype=x3;b3&&!y3&&(x3.constructor=xP);qht({global:!0,constructor:!0,wrap:!0,forced:b3},{Number:xP});var Rfe=function(r,e){for(var t=jht?Ght(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),n=0,i;t.length>n;n++)Ife(e,i=t[n])&&!Ife(r,i)&&Hht(r,i,$ht(e,i))};y3&&Mfe&&Rfe(_3[z1],Mfe);(b3||y3)&&Rfe(_3[z1],d_)});var Lfe=A(()=>{"use strict";var eft=ae();eft({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var w3=A((cyr,Dfe)=>{"use strict";var tft=Lt(),rft=tft.isFinite;Dfe.exports=Number.isFinite||function(e){return typeof e=="number"&&rft(e)}});var Nfe=A(()=>{"use strict";var nft=ae(),ift=w3();nft({target:"Number",stat:!0},{isFinite:ift})});var bP=A((pyr,kfe)=>{"use strict";var oft=lr(),aft=Math.floor;kfe.exports=Number.isInteger||function(e){return!oft(e)&&isFinite(e)&&aft(e)===e}});var qfe=A(()=>{"use strict";var sft=ae(),lft=bP();sft({target:"Number",stat:!0},{isInteger:lft})});var jfe=A(()=>{"use strict";var uft=ae();uft({target:"Number",stat:!0},{isNaN:function(e){return e!==e}})});var Ffe=A(()=>{"use strict";var cft=ae(),hft=bP(),fft=Math.abs;cft({target:"Number",stat:!0},{isSafeInteger:function(e){return hft(e)&&fft(e)<=9007199254740991}})});var zfe=A(()=>{"use strict";var pft=ae();pft({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var Bfe=A(()=>{"use strict";var dft=ae();dft({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var E3=A((Syr,$fe)=>{"use strict";var Gfe=Lt(),mft=yt(),gft=pt(),vft=wr(),yft=yg().trim,_ft=vg(),xft=gft("".charAt),wP=Gfe.parseFloat,Ufe=Gfe.Symbol,Vfe=Ufe&&Ufe.iterator,bft=1/wP(_ft+"-0")!==-1/0||Vfe&&!mft(function(){wP(Object(Vfe))});$fe.exports=bft?function(e){var t=yft(vft(e)),n=wP(t);return n===0&&xft(t,0)==="-"?-0:n}:wP});var Wfe=A(()=>{"use strict";var wft=ae(),Hfe=E3();wft({target:"Number",stat:!0,forced:Number.parseFloat!==Hfe},{parseFloat:Hfe})});var S3=A((Myr,Jfe)=>{"use strict";var Xfe=Lt(),Eft=yt(),Sft=pt(),Tft=wr(),Ift=yg().trim,Zfe=vg(),B1=Xfe.parseInt,Yfe=Xfe.Symbol,Kfe=Yfe&&Yfe.iterator,Qfe=/^[+-]?0x/i,Mft=Sft(Qfe.exec),Aft=B1(Zfe+"08")!==8||B1(Zfe+"0x16")!==22||Kfe&&!Eft(function(){B1(Object(Kfe))});Jfe.exports=Aft?function(e,t){var n=Ift(Tft(e));return B1(n,t>>>0||(Mft(Qfe,n)?16:10))}:B1});var tpe=A(()=>{"use strict";var Cft=ae(),epe=S3();Cft({target:"Number",stat:!0,forced:Number.parseInt!==epe},{parseInt:epe})});var ape=A(()=>{"use strict";var Pft=ae(),I3=pt(),Rft=ui(),Oft=F1(),Lft=R1(),Dft=m3(),T3=yt(),Nft=RangeError,rpe=String,kft=isFinite,qft=Math.abs,jft=Math.floor,npe=Math.pow,Fft=Math.round,Vc=I3(1 .toExponential),zft=I3(Lft),ipe=I3("".slice),ope=Vc(-69e-12,4)==="-6.9000e-11"&&Vc(1.255,2)==="1.25e+0"&&Vc(12345,3)==="1.235e+4"&&Vc(25,0)==="3e+1",Bft=function(){return T3(function(){Vc(1,1/0)})&&T3(function(){Vc(1,-1/0)})},Uft=function(){return!T3(function(){Vc(1/0,1/0),Vc(NaN,1/0)})},Vft=!ope||!Bft()||!Uft();Pft({target:"Number",proto:!0,forced:Vft},{toExponential:function(e){var t=Oft(this);if(e===void 0)return Vc(t);var n=Rft(e);if(!kft(t))return String(t);if(n<0||n>20)throw new Nft("Incorrect fraction digits");if(ope)return Vc(t,n);var i="",o,l,c,p;if(t<0&&(i="-",t=-t),t===0)l=0,o=zft("0",n+1);else{var g=Dft(t);l=jft(g);var _=npe(10,l-n),x=Fft(t/_);2*t>=(2*x+1)*_&&(x+=1),x>=npe(10,n+1)&&(x/=10,l+=1),o=rpe(x)}return n!==0&&(o=ipe(o,0,1)+"."+ipe(o,1)),l===0?(c="+",p="0"):(c=l>0?"+":"-",p=rpe(qft(l))),o+="e"+c+p,i+o}})});var fpe=A(()=>{"use strict";var Gft=ae(),C3=pt(),$ft=ui(),Hft=F1(),Wft=R1(),spe=yt(),Zft=RangeError,cpe=String,hpe=Math.floor,A3=C3(Wft),lpe=C3("".slice),U1=C3(1 .toFixed),g_=function(r,e,t){return e===0?t:e%2===1?g_(r,e-1,t*r):g_(r*r,e/2,t)},Yft=function(r){for(var e=0,t=r;t>=4096;)e+=12,t/=4096;for(;t>=2;)e+=1,t/=2;return e},m_=function(r,e,t){for(var n=-1,i=t;++n<6;)i+=e*r[n],r[n]=i%1e7,i=hpe(i/1e7)},M3=function(r,e){for(var t=6,n=0;--t>=0;)n+=r[t],r[t]=hpe(n/e),n=n%e*1e7},upe=function(r){for(var e=6,t="";--e>=0;)if(t!==""||e===0||r[e]!==0){var n=cpe(r[e]);t=t===""?n:t+A3("0",7-n.length)+n}return t},Kft=spe(function(){return U1(8e-5,3)!=="0.000"||U1(.9,0)!=="1"||U1(1.255,2)!=="1.25"||U1(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!spe(function(){U1({})});Gft({target:"Number",proto:!0,forced:Kft},{toFixed:function(e){var t=Hft(this),n=$ft(e),i=[0,0,0,0,0,0],o="",l="0",c,p,g,_;if(n<0||n>20)throw new Zft("Incorrect fraction digits");if(t!==t)return"NaN";if(t<=-1e21||t>=1e21)return cpe(t);if(t<0&&(o="-",t=-t),t>1e-21)if(c=Yft(t*g_(2,69,1))-69,p=c<0?t*g_(2,-c,1):t/g_(2,c,1),p*=4503599627370496,c=52-c,c>0){for(m_(i,0,p),g=n;g>=7;)m_(i,1e7,0),g-=7;for(m_(i,g_(10,g,1),0),g=c-1;g>=23;)M3(i,1<<23),g-=23;M3(i,1<<g),m_(i,1,1),M3(i,2),l=upe(i)}else m_(i,0,p),m_(i,1<<-c,0),l=upe(i)+A3("0",n);return n>0?(_=l.length,l=o+(_<=n?"0."+A3("0",n-_)+l:lpe(l,0,_-n)+"."+lpe(l,_-n))):l=o+l,l}})});var mpe=A(()=>{"use strict";var Xft=ae(),Qft=pt(),ppe=yt(),dpe=F1(),EP=Qft(1 .toPrecision),Jft=ppe(function(){return EP(1,void 0)!=="1"})||!ppe(function(){EP({})});Xft({target:"Number",proto:!0,forced:Jft},{toPrecision:function(e){return e===void 0?EP(dpe(this)):EP(dpe(this),e)}})});var R3=A((kyr,ype)=>{"use strict";var gpe=ar(),ept=pt(),tpt=Dt(),rpt=yt(),P3=sg(),npt=l1(),ipt=e1(),opt=Ur(),apt=Zh(),v_=Object.assign,vpe=Object.defineProperty,spt=ept([].concat);ype.exports=!v_||rpt(function(){if(gpe&&v_({b:1},v_(vpe({},"a",{enumerable:!0,get:function(){vpe(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var r={},e={},t=Symbol("assign detection"),n="abcdefghijklmnopqrst";return r[t]=7,n.split("").forEach(function(i){e[i]=i}),v_({},r)[t]!==7||P3(v_({},e)).join("")!==n})?function(e,t){for(var n=opt(e),i=arguments.length,o=1,l=npt.f,c=ipt.f;i>o;)for(var p=apt(arguments[o++]),g=l?spt(P3(p),l(p)):P3(p),_=g.length,x=0,T;_>x;)T=g[x++],(!gpe||tpt(c,p,T))&&(n[T]=p[T]);return n}:v_});var xpe=A(()=>{"use strict";var lpt=ae(),_pe=R3();lpt({target:"Object",stat:!0,arity:2,forced:Object.assign!==_pe},{assign:_pe})});var bpe=A(()=>{"use strict";var upt=ae(),cpt=ar(),hpt=Zi();upt({target:"Object",stat:!0,sham:!cpt},{create:hpt})});var V1=A((Byr,Epe)=>{"use strict";var fpt=un(),ppt=Lt(),dpt=yt(),wpe=ZC();Epe.exports=fpt||!dpt(function(){if(!(wpe&&wpe<535)){var r=Math.random();__defineSetter__.call(null,r,function(){}),delete ppt[r]}})});var Spe=A(()=>{"use strict";var mpt=ae(),gpt=ar(),vpt=V1(),ypt=vr(),_pt=Ur(),xpt=Wn();gpt&&mpt({target:"Object",proto:!0,forced:vpt},{__defineGetter__:function(e,t){xpt.f(_pt(this),e,{get:ypt(t),enumerable:!0,configurable:!0})}})});var Ipe=A(()=>{"use strict";var bpt=ae(),wpt=ar(),Tpe=yC().f;bpt({target:"Object",stat:!0,forced:Object.defineProperties!==Tpe,sham:!wpt},{defineProperties:Tpe})});var Ape=A(()=>{"use strict";var Ept=ae(),Spt=ar(),Mpe=Wn().f;Ept({target:"Object",stat:!0,forced:Object.defineProperty!==Mpe,sham:!Spt},{defineProperty:Mpe})});var Cpe=A(()=>{"use strict";var Tpt=ae(),Ipt=ar(),Mpt=V1(),Apt=vr(),Cpt=Ur(),Ppt=Wn();Ipt&&Tpt({target:"Object",proto:!0,forced:Mpt},{__defineSetter__:function(e,t){Ppt.f(Cpt(this),e,{set:Apt(t),enumerable:!0,configurable:!0})}})});var O3=A((Kyr,Dpe)=>{"use strict";var Rpe=ar(),Rpt=yt(),Ope=pt(),Opt=xo(),Lpt=sg(),Dpt=yo(),Npt=e1().f,Lpe=Ope(Npt),kpt=Ope([].push),qpt=Rpe&&Rpt(function(){var r=Object.create(null);return r[2]=2,!Lpe(r,2)}),Ppe=function(r){return function(e){for(var t=Dpt(e),n=Lpt(t),i=qpt&&Opt(t)===null,o=n.length,l=0,c=[],p;o>l;)p=n[l++],(!Rpe||(i?p in t:Lpe(t,p)))&&kpt(c,r?[p,t[p]]:t[p]);return c}};Dpe.exports={entries:Ppe(!0),values:Ppe(!1)}});var Npe=A(()=>{"use strict";var jpt=ae(),Fpt=O3().entries;jpt({target:"Object",stat:!0},{entries:function(e){return Fpt(e)}})});var kpe=A(()=>{"use strict";var zpt=ae(),Bpt=af(),Upt=yt(),Vpt=lr(),Gpt=id().onFreeze,L3=Object.freeze,$pt=Upt(function(){L3(1)});zpt({target:"Object",stat:!0,forced:$pt,sham:!Bpt},{freeze:function(e){return L3&&Vpt(e)?L3(Gpt(e)):e}})});var qpe=A(()=>{"use strict";var Hpt=ae(),Wpt=Ii(),Zpt=$l();Hpt({target:"Object",stat:!0},{fromEntries:function(e){var t={};return Wpt(e,function(n,i){Zpt(t,n,i)},{AS_ENTRIES:!0}),t}})});var zpe=A(()=>{"use strict";var Ypt=ae(),Kpt=yt(),Xpt=yo(),jpe=Yo().f,Fpe=ar(),Qpt=!Fpe||Kpt(function(){jpe(1)});Ypt({target:"Object",stat:!0,forced:Qpt,sham:!Fpe},{getOwnPropertyDescriptor:function(e,t){return jpe(Xpt(e),t)}})});var Bpe=A(()=>{"use strict";var Jpt=ae(),edt=ar(),tdt=dC(),rdt=yo(),ndt=Yo(),idt=$l();Jpt({target:"Object",stat:!0,sham:!edt},{getOwnPropertyDescriptors:function(e){for(var t=rdt(e),n=ndt.f,i=tdt(t),o={},l=0,c,p;i.length>l;)p=n(t,c=i[l++]),p!==void 0&&idt(o,c,p);return o}})});var Upe=A(()=>{"use strict";var odt=ae(),adt=yt(),sdt=bC().f,ldt=adt(function(){return!Object.getOwnPropertyNames(1)});odt({target:"Object",stat:!0,forced:ldt},{getOwnPropertyNames:sdt})});var Gpe=A(()=>{"use strict";var udt=ae(),cdt=yt(),hdt=Ur(),Vpe=xo(),fdt=DC(),pdt=cdt(function(){Vpe(1)});udt({target:"Object",stat:!0,forced:pdt,sham:!fdt},{getPrototypeOf:function(e){return Vpe(hdt(e))}})});var D3=A(()=>{"use strict";var ddt=ae(),mdt=gr(),gdt=pt(),vdt=vr(),ydt=ei(),_dt=qc(),xdt=Ii(),bdt=yt(),$pe=Object.groupBy,wdt=mdt("Object","create"),Edt=gdt([].push),Sdt=!$pe||bdt(function(){return $pe("ab",function(r){return r}).a.length!==1});ddt({target:"Object",stat:!0,forced:Sdt},{groupBy:function(e,t){ydt(e),vdt(t);var n=wdt(null),i=0;return xdt(e,function(o){var l=_dt(t(o,i++));l in n?Edt(n[l],o):n[l]=[o]}),n}})});var N3=A(()=>{"use strict";var Tdt=ae(),Idt=Nr();Tdt({target:"Object",stat:!0},{hasOwn:Idt})});var SP=A((m_r,Hpe)=>{"use strict";Hpe.exports=Object.is||function(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}});var Wpe=A(()=>{"use strict";var Mdt=ae(),Adt=SP();Mdt({target:"Object",stat:!0},{is:Adt})});var Ype=A(()=>{"use strict";var Cdt=ae(),Zpe=dP();Cdt({target:"Object",stat:!0,forced:Object.isExtensible!==Zpe},{isExtensible:Zpe})});var Xpe=A(()=>{"use strict";var Pdt=ae(),Rdt=yt(),Odt=lr(),Ldt=fa(),Kpe=fP(),k3=Object.isFrozen,Ddt=Kpe||Rdt(function(){k3(1)});Pdt({target:"Object",stat:!0,forced:Ddt},{isFrozen:function(e){return!Odt(e)||Kpe&&Ldt(e)==="ArrayBuffer"?!0:k3?k3(e):!1}})});var Jpe=A(()=>{"use strict";var Ndt=ae(),kdt=yt(),qdt=lr(),jdt=fa(),Qpe=fP(),q3=Object.isSealed,Fdt=Qpe||kdt(function(){q3(1)});Ndt({target:"Object",stat:!0,forced:Fdt},{isSealed:function(e){return!qdt(e)||Qpe&&jdt(e)==="ArrayBuffer"?!0:q3?q3(e):!1}})});var tde=A(()=>{"use strict";var zdt=ae(),Bdt=Ur(),ede=sg(),Udt=yt(),Vdt=Udt(function(){ede(1)});zdt({target:"Object",stat:!0,forced:Vdt},{keys:function(e){return ede(Bdt(e))}})});var rde=A(()=>{"use strict";var Gdt=ae(),$dt=ar(),Hdt=V1(),Wdt=Ur(),Zdt=qc(),Ydt=xo(),Kdt=Yo().f;$dt&&Gdt({target:"Object",proto:!0,forced:Hdt},{__lookupGetter__:function(e){var t=Wdt(this),n=Zdt(e),i;do if(i=Kdt(t,n))return i.get;while(t=Ydt(t))}})});var nde=A(()=>{"use strict";var Xdt=ae(),Qdt=ar(),Jdt=V1(),emt=Ur(),tmt=qc(),rmt=xo(),nmt=Yo().f;Qdt&&Xdt({target:"Object",proto:!0,forced:Jdt},{__lookupSetter__:function(e){var t=emt(this),n=tmt(e),i;do if(i=nmt(t,n))return i.set;while(t=rmt(t))}})});var ide=A(()=>{"use strict";var imt=ae(),omt=lr(),amt=id().onFreeze,smt=af(),lmt=yt(),j3=Object.preventExtensions,umt=lmt(function(){j3(1)});imt({target:"Object",stat:!0,forced:umt,sham:!smt},{preventExtensions:function(e){return j3&&omt(e)?j3(amt(e)):e}})});var ude=A(()=>{"use strict";var cmt=ar(),hmt=ci(),fmt=lr(),pmt=L4(),dmt=Ur(),mmt=ei(),ode=Object.getPrototypeOf,ade=Object.setPrototypeOf,sde=Object.prototype,lde="__proto__";if(cmt&&ode&&ade&&!(lde in sde))try{hmt(sde,lde,{configurable:!0,get:function(){return ode(dmt(this))},set:function(e){var t=mmt(this);pmt(e)&&fmt(t)&&ade(t,e)}})}catch(r){}});var cde=A(()=>{"use strict";var gmt=ae(),vmt=lr(),ymt=id().onFreeze,_mt=af(),xmt=yt(),F3=Object.seal,bmt=xmt(function(){F3(1)});gmt({target:"Object",stat:!0,forced:bmt,sham:!_mt},{seal:function(e){return F3&&vmt(e)?F3(ymt(e)):e}})});var hde=A(()=>{"use strict";var wmt=ae(),Emt=Gl();wmt({target:"Object",stat:!0},{setPrototypeOf:Emt})});var pde=A((j_r,fde)=>{"use strict";var Smt=gC(),Tmt=os();fde.exports=Smt?{}.toString:function(){return"[object "+Tmt(this)+"]"}});var dde=A(()=>{"use strict";var Imt=gC(),Mmt=Sn(),Amt=pde();Imt||Mmt(Object.prototype,"toString",Amt,{unsafe:!0})});var mde=A(()=>{"use strict";var Cmt=ae(),Pmt=O3().values;Cmt({target:"Object",stat:!0},{values:function(e){return Pmt(e)}})});var vde=A(()=>{"use strict";var Rmt=ae(),gde=E3();Rmt({global:!0,forced:parseFloat!==gde},{parseFloat:gde})});var _de=A(()=>{"use strict";var Omt=ae(),yde=S3();Omt({global:!0,forced:parseInt!==yde},{parseInt:yde})});var G1=A((W_r,xde)=>{"use strict";var Lmt=Hu(),Dmt=Fp(),Nmt=TypeError;xde.exports=function(r){if(Lmt(r))return r;throw new Nmt(Dmt(r)+" is not a constructor")}});var $1=A((Z_r,wde)=>{"use strict";var bde=kt(),kmt=G1(),qmt=Rs(),jmt=fr(),Fmt=jmt("species");wde.exports=function(r,e){var t=bde(r).constructor,n;return t===void 0||qmt(n=bde(t)[Fmt])?e:kmt(n)}});var dl=A((Y_r,Ede)=>{"use strict";var zmt=TypeError;Ede.exports=function(r,e){if(r<e)throw new zmt("Not enough arguments");return r}});var z3=A((K_r,Sde)=>{"use strict";var Bmt=zu();Sde.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(Bmt)});var Z1=A((X_r,Lde)=>{"use strict";var ml=Lt(),Umt=da(),Vmt=kn(),Tde=Rr(),Gmt=Nr(),Ode=yt(),Ide=u4(),$mt=Ls(),Mde=n1(),Hmt=dl(),Wmt=z3(),Zmt=dg(),H3=ml.setImmediate,W3=ml.clearImmediate,Ymt=ml.process,B3=ml.Dispatch,Kmt=ml.Function,Ade=ml.MessageChannel,Xmt=ml.String,U3=0,H1={},Cde="onreadystatechange",W1,_g,V3,G3;Ode(function(){W1=ml.location});var Z3=function(r){if(Gmt(H1,r)){var e=H1[r];delete H1[r],e()}},$3=function(r){return function(){Z3(r)}},Pde=function(r){Z3(r.data)},Rde=function(r){ml.postMessage(Xmt(r),W1.protocol+"//"+W1.host)};(!H3||!W3)&&(H3=function(e){Hmt(arguments.length,1);var t=Tde(e)?e:Kmt(e),n=$mt(arguments,1);return H1[++U3]=function(){Umt(t,void 0,n)},_g(U3),U3},W3=function(e){delete H1[e]},Zmt?_g=function(r){Ymt.nextTick($3(r))}:B3&&B3.now?_g=function(r){B3.now($3(r))}:Ade&&!Wmt?(V3=new Ade,G3=V3.port2,V3.port1.onmessage=Pde,_g=Vmt(G3.postMessage,G3)):ml.addEventListener&&Tde(ml.postMessage)&&!ml.importScripts&&W1&&W1.protocol!=="file:"&&!Ode(Rde)?(_g=Rde,ml.addEventListener("message",Pde,!1)):Cde in Mde("script")?_g=function(r){Ide.appendChild(Mde("script"))[Cde]=function(){Ide.removeChild(this),Z3(r)}}:_g=function(r){setTimeout($3(r),0)});Lde.exports={set:H3,clear:W3}});var Y3=A((Q_r,Nde)=>{"use strict";var Dde=Lt(),Qmt=ar(),Jmt=Object.getOwnPropertyDescriptor;Nde.exports=function(r){if(!Qmt)return Dde[r];var e=Jmt(Dde,r);return e&&e.value}});var K3=A((J_r,qde)=>{"use strict";var kde=function(){this.head=null,this.tail=null};kde.prototype={add:function(r){var e={item:r,next:null},t=this.tail;t?t.next=e:this.head=e,this.tail=e},get:function(){var r=this.head;if(r){var e=this.head=r.next;return e===null&&(this.tail=null),r.item}}};qde.exports=kde});var Fde=A((e0r,jde)=>{"use strict";var egt=zu();jde.exports=/ipad|iphone|ipod/i.test(egt)&&typeof Pebble!="undefined"});var Bde=A((t0r,zde)=>{"use strict";var tgt=zu();zde.exports=/web0s(?!.*chrome)/i.test(tgt)});var r5=A((r0r,Wde)=>{"use strict";var __=Lt(),rgt=Y3(),Ude=kn(),X3=Z1().set,ngt=K3(),igt=z3(),ogt=Fde(),agt=Bde(),Q3=dg(),Vde=__.MutationObserver||__.WebKitMutationObserver,Gde=__.document,$de=__.process,TP=__.Promise,t5=rgt("queueMicrotask"),y_,J3,e5,IP,Hde;t5||(Y1=new ngt,K1=function(){var r,e;for(Q3&&(r=$de.domain)&&r.exit();e=Y1.get();)try{e()}catch(t){throw Y1.head&&y_(),t}r&&r.enter()},!igt&&!Q3&&!agt&&Vde&&Gde?(J3=!0,e5=Gde.createTextNode(""),new Vde(K1).observe(e5,{characterData:!0}),y_=function(){e5.data=J3=!J3}):!ogt&&TP&&TP.resolve?(IP=TP.resolve(void 0),IP.constructor=TP,Hde=Ude(IP.then,IP),y_=function(){Hde(K1)}):Q3?y_=function(){$de.nextTick(K1)}:(X3=Ude(X3,__),y_=function(){X3(K1)}),t5=function(r){Y1.head||y_(),Y1.add(r)});var Y1,K1;Wde.exports=t5});var n5=A((n0r,Zde)=>{"use strict";Zde.exports=function(r,e){try{arguments.length===1?console.error(r):console.error(r,e)}catch(t){}}});var od=A((i0r,Yde)=>{"use strict";Yde.exports=function(r){try{return{error:!1,value:r()}}catch(e){return{error:!0,value:e}}}});var xg=A((o0r,Kde)=>{"use strict";var sgt=Lt();Kde.exports=sgt.Promise});var x_=A((a0r,eme)=>{"use strict";var lgt=Lt(),X1=xg(),ugt=Rr(),cgt=Qy(),hgt=i1(),fgt=fr(),Xde=I1(),pgt=un(),i5=Uu(),Qde=X1&&X1.prototype,dgt=fgt("species"),o5=!1,Jde=ugt(lgt.PromiseRejectionEvent),mgt=cgt("Promise",function(){var r=hgt(X1),e=r!==String(X1);if(!e&&i5===66||pgt&&!(Qde.catch&&Qde.finally))return!0;if(!i5||i5<51||!/native code/.test(r)){var t=new X1(function(o){o(1)}),n=function(o){o(function(){},function(){})},i=t.constructor={};if(i[dgt]=n,o5=t.then(function(){})instanceof n,!o5)return!0}return!e&&(Xde==="BROWSER"||Xde==="DENO")&&!Jde});eme.exports={CONSTRUCTOR:mgt,REJECTION_EVENT:Jde,SUBCLASSING:o5}});var Gc=A((s0r,rme)=>{"use strict";var tme=vr(),ggt=TypeError,vgt=function(r){var e,t;this.promise=new r(function(n,i){if(e!==void 0||t!==void 0)throw new ggt("Bad Promise constructor");e=n,t=i}),this.resolve=tme(e),this.reject=tme(t)};rme.exports.f=function(r){return new vgt(r)}});var bme=A(()=>{"use strict";var ygt=ae(),_gt=un(),PP=dg(),ad=Lt(),S_=Dt(),nme=Sn(),ime=Gl(),xgt=as(),bgt=Xp(),wgt=vr(),CP=Rr(),Egt=lr(),Sgt=La(),Tgt=$1(),ume=Z1().set,c5=r5(),Igt=n5(),Mgt=od(),Agt=K3(),cme=xn(),RP=xg(),h5=x_(),hme=Gc(),OP="Promise",fme=h5.CONSTRUCTOR,Cgt=h5.REJECTION_EVENT,Pgt=h5.SUBCLASSING,a5=cme.getterFor(OP),Rgt=cme.set,b_=RP&&RP.prototype,bg=RP,MP=b_,pme=ad.TypeError,s5=ad.document,f5=ad.process,l5=hme.f,Ogt=l5,Lgt=!!(s5&&s5.createEvent&&ad.dispatchEvent),dme="unhandledrejection",Dgt="rejectionhandled",ome=0,mme=1,Ngt=2,p5=1,gme=2,AP,ame,kgt,sme,vme=function(r){var e;return Egt(r)&&CP(e=r.then)?e:!1},yme=function(r,e){var t=e.value,n=e.state===mme,i=n?r.ok:r.fail,o=r.resolve,l=r.reject,c=r.domain,p,g,_;try{i?(n||(e.rejection===gme&&jgt(e),e.rejection=p5),i===!0?p=t:(c&&c.enter(),p=i(t),c&&(c.exit(),_=!0)),p===r.promise?l(new pme("Promise-chain cycle")):(g=vme(p))?S_(g,p,o,l):o(p)):l(t)}catch(x){c&&!_&&c.exit(),l(x)}},_me=function(r,e){r.notified||(r.notified=!0,c5(function(){for(var t=r.reactions,n;n=t.get();)yme(n,r);r.notified=!1,e&&!r.rejection&&qgt(r)}))},xme=function(r,e,t){var n,i;Lgt?(n=s5.createEvent("Event"),n.promise=e,n.reason=t,n.initEvent(r,!1,!0),ad.dispatchEvent(n)):n={promise:e,reason:t},!Cgt&&(i=ad["on"+r])?i(n):r===dme&&Igt("Unhandled promise rejection",t)},qgt=function(r){S_(ume,ad,function(){var e=r.facade,t=r.value,n=lme(r),i;if(n&&(i=Mgt(function(){PP?f5.emit("unhandledRejection",t,e):xme(dme,e,t)}),r.rejection=PP||lme(r)?gme:p5,i.error))throw i.value})},lme=function(r){return r.rejection!==p5&&!r.parent},jgt=function(r){S_(ume,ad,function(){var e=r.facade;PP?f5.emit("rejectionHandled",e):xme(Dgt,e,r.value)})},w_=function(r,e,t){return function(n){r(e,n,t)}},E_=function(r,e,t){r.done||(r.done=!0,t&&(r=t),r.value=e,r.state=Ngt,_me(r,!0))},u5=function(r,e,t){if(!r.done){r.done=!0,t&&(r=t);try{if(r.facade===e)throw new pme("Promise can't be resolved itself");var n=vme(e);n?c5(function(){var i={done:!1};try{S_(n,e,w_(u5,i,r),w_(E_,i,r))}catch(o){E_(i,o,r)}}):(r.value=e,r.state=mme,_me(r,!1))}catch(i){E_({done:!1},i,r)}}};if(fme&&(bg=function(e){Sgt(this,MP),wgt(e),S_(AP,this);var t=a5(this);try{e(w_(u5,t),w_(E_,t))}catch(n){E_(t,n)}},MP=bg.prototype,AP=function(e){Rgt(this,{type:OP,done:!1,notified:!1,parent:!1,reactions:new Agt,rejection:!1,state:ome,value:null})},AP.prototype=nme(MP,"then",function(e,t){var n=a5(this),i=l5(Tgt(this,bg));return n.parent=!0,i.ok=CP(e)?e:!0,i.fail=CP(t)&&t,i.domain=PP?f5.domain:void 0,n.state===ome?n.reactions.add(i):c5(function(){yme(i,n)}),i.promise}),ame=function(){var r=new AP,e=a5(r);this.promise=r,this.resolve=w_(u5,e),this.reject=w_(E_,e)},hme.f=l5=function(r){return r===bg||r===kgt?new ame(r):Ogt(r)},!_gt&&CP(RP)&&b_!==Object.prototype)){sme=b_.then,Pgt||nme(b_,"then",function(e,t){var n=this;return new bg(function(i,o){S_(sme,n,i,o)}).then(e,t)},{unsafe:!0});try{delete b_.constructor}catch(r){}ime&&ime(b_,MP)}ygt({global:!0,constructor:!0,wrap:!0,forced:fme},{Promise:bg});xgt(bg,OP,!1,!0);bgt(OP)});var Q1=A((c0r,wme)=>{"use strict";var Fgt=xg(),zgt=x1(),Bgt=x_().CONSTRUCTOR;wme.exports=Bgt||!zgt(function(r){Fgt.all(r).then(void 0,function(){})})});var Eme=A(()=>{"use strict";var Ugt=ae(),Vgt=Dt(),Ggt=vr(),$gt=Gc(),Hgt=od(),Wgt=Ii(),Zgt=Q1();Ugt({target:"Promise",stat:!0,forced:Zgt},{all:function(e){var t=this,n=$gt.f(t),i=n.resolve,o=n.reject,l=Hgt(function(){var c=Ggt(t.resolve),p=[],g=0,_=1;Wgt(e,function(x){var T=g++,C=!1;_++,Vgt(c,t,x).then(function(D){C||(C=!0,p[T]=D,--_||i(p))},o)}),--_||i(p)});return l.error&&o(l.value),n.promise}})});var Tme=A(()=>{"use strict";var Ygt=ae(),Kgt=un(),Xgt=x_().CONSTRUCTOR,m5=xg(),Qgt=gr(),Jgt=Rr(),evt=Sn(),Sme=m5&&m5.prototype;Ygt({target:"Promise",proto:!0,forced:Xgt,real:!0},{catch:function(r){return this.then(void 0,r)}});!Kgt&&Jgt(m5)&&(d5=Qgt("Promise").prototype.catch,Sme.catch!==d5&&evt(Sme,"catch",d5,{unsafe:!0}));var d5});var Ime=A(()=>{"use strict";var tvt=ae(),rvt=Dt(),nvt=vr(),ivt=Gc(),ovt=od(),avt=Ii(),svt=Q1();tvt({target:"Promise",stat:!0,forced:svt},{race:function(e){var t=this,n=ivt.f(t),i=n.reject,o=ovt(function(){var l=nvt(t.resolve);avt(e,function(c){rvt(l,t,c).then(n.resolve,i)})});return o.error&&i(o.value),n.promise}})});var Mme=A(()=>{"use strict";var lvt=ae(),uvt=Gc(),cvt=x_().CONSTRUCTOR;lvt({target:"Promise",stat:!0,forced:cvt},{reject:function(e){var t=uvt.f(this),n=t.reject;return n(e),t.promise}})});var g5=A((_0r,Ame)=>{"use strict";var hvt=kt(),fvt=lr(),pvt=Gc();Ame.exports=function(r,e){if(hvt(r),fvt(e)&&e.constructor===r)return e;var t=pvt.f(r),n=t.resolve;return n(e),t.promise}});var Rme=A(()=>{"use strict";var dvt=ae(),mvt=gr(),Cme=un(),gvt=xg(),Pme=x_().CONSTRUCTOR,vvt=g5(),yvt=mvt("Promise"),_vt=Cme&&!Pme;dvt({target:"Promise",stat:!0,forced:Cme||Pme},{resolve:function(e){return vvt(_vt&&this===yvt?gvt:this,e)}})});var Ome=A(()=>{"use strict";bme();Eme();Tme();Ime();Mme();Rme()});var v5=A(()=>{"use strict";var xvt=ae(),bvt=Dt(),wvt=vr(),Evt=Gc(),Svt=od(),Tvt=Ii(),Ivt=Q1();xvt({target:"Promise",stat:!0,forced:Ivt},{allSettled:function(e){var t=this,n=Evt.f(t),i=n.resolve,o=n.reject,l=Svt(function(){var c=wvt(t.resolve),p=[],g=0,_=1;Tvt(e,function(x){var T=g++,C=!1;_++,bvt(c,t,x).then(function(D){C||(C=!0,p[T]={status:"fulfilled",value:D},--_||i(p))},function(D){C||(C=!0,p[T]={status:"rejected",reason:D},--_||i(p))})}),--_||i(p)});return l.error&&o(l.value),n.promise}})});var y5=A(()=>{"use strict";var Mvt=ae(),Avt=Dt(),Cvt=vr(),Pvt=gr(),Rvt=Gc(),Ovt=od(),Lvt=Ii(),Dvt=Q1(),Lme="No one promise resolved";Mvt({target:"Promise",stat:!0,forced:Dvt},{any:function(e){var t=this,n=Pvt("AggregateError"),i=Rvt.f(t),o=i.resolve,l=i.reject,c=Ovt(function(){var p=Cvt(t.resolve),g=[],_=0,x=1,T=!1;Lvt(e,function(C){var D=_++,F=!1;x++,Avt(p,t,C).then(function(O){F||T||(T=!0,o(O))},function(O){F||T||(F=!0,g[D]=O,--x||l(new n(g,Lme)))})}),--x||l(new n(g,Lme))});return c.error&&l(c.value),i.promise}})});var qme=A(()=>{"use strict";var Nvt=ae(),kvt=un(),LP=xg(),qvt=yt(),Nme=gr(),kme=Rr(),jvt=$1(),Dme=g5(),Fvt=Sn(),x5=LP&&LP.prototype,zvt=!!LP&&qvt(function(){x5.finally.call({then:function(){}},function(){})});Nvt({target:"Promise",proto:!0,real:!0,forced:zvt},{finally:function(r){var e=jvt(this,Nme("Promise")),t=kme(r);return this.then(t?function(n){return Dme(e,r()).then(function(){return n})}:r,t?function(n){return Dme(e,r()).then(function(){throw n})}:r)}});!kvt&&kme(LP)&&(_5=Nme("Promise").prototype.finally,x5.finally!==_5&&Fvt(x5,"finally",_5,{unsafe:!0}));var _5});var w5=A(()=>{"use strict";var Bvt=ae(),Uvt=Lt(),Vvt=da(),Gvt=Ls(),$vt=Gc(),Hvt=vr(),Fme=od(),b5=Uvt.Promise,jme=!1,Wvt=!b5||!b5.try||Fme(function(){b5.try(function(r){jme=r===8},8)}).error||!jme;Bvt({target:"Promise",stat:!0,forced:Wvt},{try:function(r){var e=arguments.length>1?Gvt(arguments,1):[],t=$vt.f(this),n=Fme(function(){return Vvt(Hvt(r),void 0,e)});return(n.error?t.reject:t.resolve)(n.value),t.promise}})});var E5=A(()=>{"use strict";var Zvt=ae(),Yvt=Gc();Zvt({target:"Promise",stat:!0},{withResolvers:function(){var e=Yvt.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}})});var zme=A(()=>{"use strict";var Kvt=ae(),Xvt=da(),Qvt=vr(),Jvt=kt(),eyt=yt(),tyt=!eyt(function(){Reflect.apply(function(){})});Kvt({target:"Reflect",stat:!0,forced:tyt},{apply:function(e,t,n){return Xvt(Qvt(e),t,Jvt(n))}})});var Wme=A(()=>{"use strict";var ryt=ae(),nyt=gr(),S5=da(),iyt=xU(),Bme=G1(),oyt=kt(),Ume=lr(),ayt=Zi(),Gme=yt(),T5=nyt("Reflect","construct"),syt=Object.prototype,lyt=[].push,$me=Gme(function(){function r(){}return!(T5(function(){},[],r)instanceof r)}),Hme=!Gme(function(){T5(function(){})}),Vme=$me||Hme;ryt({target:"Reflect",stat:!0,forced:Vme,sham:Vme},{construct:function(e,t){Bme(e),oyt(t);var n=arguments.length<3?e:Bme(arguments[2]);if(Hme&&!$me)return T5(e,t,n);if(e===n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return S5(lyt,i,t),new(S5(iyt,e,i))}var o=n.prototype,l=ayt(Ume(o)?o:syt),c=S5(e,l,t);return Ume(c)?c:l}})});var Kme=A(()=>{"use strict";var uyt=ae(),cyt=ar(),Zme=kt(),hyt=qc(),Yme=Wn(),fyt=yt(),pyt=fyt(function(){Reflect.defineProperty(Yme.f({},1,{value:1}),1,{value:2})});uyt({target:"Reflect",stat:!0,forced:pyt,sham:!cyt},{defineProperty:function(e,t,n){Zme(e);var i=hyt(t);Zme(n);try{return Yme.f(e,i,n),!0}catch(o){return!1}}})});var Xme=A(()=>{"use strict";var dyt=ae(),myt=kt(),gyt=Yo().f;dyt({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=gyt(myt(e),t);return n&&!n.configurable?!1:delete e[t]}})});var I5=A((U0r,Jme)=>{"use strict";var Qme=Nr();Jme.exports=function(r){return r!==void 0&&(Qme(r,"value")||Qme(r,"writable"))}});var tge=A(()=>{"use strict";var vyt=ae(),yyt=Dt(),_yt=lr(),xyt=kt(),byt=I5(),wyt=Yo(),Eyt=xo();function ege(r,e){var t=arguments.length<3?r:arguments[2],n,i;if(xyt(r)===t)return r[e];if(n=wyt.f(r,e),n)return byt(n)?n.value:n.get===void 0?void 0:yyt(n.get,t);if(_yt(i=Eyt(r)))return ege(i,e,t)}vyt({target:"Reflect",stat:!0},{get:ege})});var rge=A(()=>{"use strict";var Syt=ae(),Tyt=ar(),Iyt=kt(),Myt=Yo();Syt({target:"Reflect",stat:!0,sham:!Tyt},{getOwnPropertyDescriptor:function(e,t){return Myt.f(Iyt(e),t)}})});var nge=A(()=>{"use strict";var Ayt=ae(),Cyt=kt(),Pyt=xo(),Ryt=DC();Ayt({target:"Reflect",stat:!0,sham:!Ryt},{getPrototypeOf:function(e){return Pyt(Cyt(e))}})});var ige=A(()=>{"use strict";var Oyt=ae();Oyt({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})});var oge=A(()=>{"use strict";var Lyt=ae(),Dyt=kt(),Nyt=dP();Lyt({target:"Reflect",stat:!0},{isExtensible:function(e){return Dyt(e),Nyt(e)}})});var age=A(()=>{"use strict";var kyt=ae(),qyt=dC();kyt({target:"Reflect",stat:!0},{ownKeys:qyt})});var sge=A(()=>{"use strict";var jyt=ae(),Fyt=gr(),zyt=kt(),Byt=af();jyt({target:"Reflect",stat:!0,sham:!Byt},{preventExtensions:function(e){zyt(e);try{var t=Fyt("Object","preventExtensions");return t&&t(e),!0}catch(n){return!1}}})});var fge=A(()=>{"use strict";var Uyt=ae(),Vyt=Dt(),Gyt=kt(),lge=lr(),$yt=I5(),Hyt=yt(),M5=Wn(),uge=Yo(),Wyt=xo(),cge=Ps();function hge(r,e,t){var n=arguments.length<4?r:arguments[3],i=uge.f(Gyt(r),e),o,l,c;if(!i){if(lge(l=Wyt(r)))return hge(l,e,t,n);i=cge(0)}if($yt(i)){if(i.writable===!1||!lge(n))return!1;if(o=uge.f(n,e)){if(o.get||o.set||o.writable===!1)return!1;o.value=t,M5.f(n,e,o)}else M5.f(n,e,cge(0,t))}else{if(c=i.set,c===void 0)return!1;Vyt(c,n,t)}return!0}var Zyt=Hyt(function(){var r=function(){},e=M5.f(new r,"a",{configurable:!0});return Reflect.set(r.prototype,"a",1,e)!==!1});Uyt({target:"Reflect",stat:!0,forced:Zyt},{set:hge})});var dge=A(()=>{"use strict";var Yyt=ae(),Kyt=kt(),Xyt=D4(),pge=Gl();pge&&Yyt({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){Kyt(e),Xyt(t);try{return pge(e,t),!0}catch(n){return!1}}})});var mge=A(()=>{"use strict";var Qyt=ae(),Jyt=Lt(),e_t=as();Qyt({global:!0},{Reflect:{}});e_t(Jyt.Reflect,"Reflect",!0)});var J1=A((uxr,gge)=>{"use strict";var t_t=lr(),r_t=fa(),n_t=fr(),i_t=n_t("match");gge.exports=function(r){var e;return t_t(r)&&((e=r[i_t])!==void 0?!!e:r_t(r)==="RegExp")}});var DP=A((cxr,vge)=>{"use strict";var o_t=kt();vge.exports=function(){var r=o_t(this),e="";return r.hasIndices&&(e+="d"),r.global&&(e+="g"),r.ignoreCase&&(e+="i"),r.multiline&&(e+="m"),r.dotAll&&(e+="s"),r.unicode&&(e+="u"),r.unicodeSets&&(e+="v"),r.sticky&&(e+="y"),e}});var T_=A((hxr,_ge)=>{"use strict";var a_t=Dt(),s_t=Nr(),l_t=pa(),u_t=DP(),yge=RegExp.prototype;_ge.exports=function(r){var e=r.flags;return e===void 0&&!("flags"in yge)&&!s_t(r,"flags")&&l_t(yge,r)?a_t(u_t,r):e}});var eE=A((fxr,xge)=>{"use strict";var A5=yt(),c_t=Lt(),C5=c_t.RegExp,P5=A5(function(){var r=C5("a","y");return r.lastIndex=2,r.exec("abcd")!==null}),h_t=P5||A5(function(){return!C5("a","y").sticky}),f_t=P5||A5(function(){var r=C5("^r","gy");return r.lastIndex=2,r.exec("str")!==null});xge.exports={BROKEN_CARET:f_t,MISSED_STICKY:h_t,UNSUPPORTED_Y:P5}});var NP=A((pxr,bge)=>{"use strict";var p_t=yt(),d_t=Lt(),m_t=d_t.RegExp;bge.exports=p_t(function(){var r=m_t(".","s");return!(r.dotAll&&r.test(`
`)&&r.flags==="s")})});var R5=A((dxr,wge)=>{"use strict";var g_t=yt(),v_t=Lt(),y_t=v_t.RegExp;wge.exports=g_t(function(){var r=y_t("(?<a>b)","g");return r.exec("b").groups.a!=="b"||"b".replace(r,"$<a>c")!=="bc"})});var Oge=A(()=>{"use strict";var __t=ar(),N5=Lt(),tE=pt(),x_t=Qy(),b_t=$p(),w_t=_o(),E_t=Zi(),S_t=Bp().f,Ege=pa(),T_t=J1(),Sge=wr(),I_t=T_(),Age=eE(),M_t=N4(),A_t=Sn(),C_t=yt(),P_t=Nr(),R_t=xn().enforce,O_t=Xp(),L_t=fr(),Cge=NP(),Pge=R5(),D_t=L_t("match"),ld=N5.RegExp,I_=ld.prototype,N_t=N5.SyntaxError,k_t=tE(I_.exec),kP=tE("".charAt),Tge=tE("".replace),Ige=tE("".indexOf),Mge=tE("".slice),q_t=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,wg=/a/g,O5=/a/g,j_t=new ld(wg)!==wg,Rge=Age.MISSED_STICKY,F_t=Age.UNSUPPORTED_Y,z_t=__t&&(!j_t||Rge||Cge||Pge||C_t(function(){return O5[D_t]=!1,ld(wg)!==wg||ld(O5)===O5||String(ld(wg,"i"))!=="/a/i"})),B_t=function(r){for(var e=r.length,t=0,n="",i=!1,o;t<=e;t++){if(o=kP(r,t),o==="\\"){n+=o+kP(r,++t);continue}!i&&o==="."?n+="[\\s\\S]":(o==="["?i=!0:o==="]"&&(i=!1),n+=o)}return n},U_t=function(r){for(var e=r.length,t=0,n="",i=[],o=E_t(null),l=!1,c=!1,p=0,g="",_;t<=e;t++){if(_=kP(r,t),_==="\\")_+=kP(r,++t);else if(_==="]")l=!1;else if(!l)switch(!0){case _==="[":l=!0;break;case _==="(":if(n+=_,Mge(r,t+1,t+3)==="?:")continue;k_t(q_t,Mge(r,t+1))&&(t+=2,c=!0),p++;continue;case _===">"&&c:if(g===""||P_t(o,g))throw new N_t("Invalid capture group name");o[g]=!0,i[i.length]=[g,p],c=!1,g="";continue}c?g+=_:n+=_}return[n,i]};if(x_t("RegExp",z_t)){for(sd=function(e,t){var n=Ege(I_,this),i=T_t(e),o=t===void 0,l=[],c=e,p,g,_,x,T,C;if(!n&&i&&o&&e.constructor===sd)return e;if((i||Ege(I_,e))&&(e=e.source,o&&(t=I_t(c))),e=e===void 0?"":Sge(e),t=t===void 0?"":Sge(t),c=e,Cge&&"dotAll"in wg&&(g=!!t&&Ige(t,"s")>-1,g&&(t=Tge(t,/s/g,""))),p=t,Rge&&"sticky"in wg&&(_=!!t&&Ige(t,"y")>-1,_&&F_t&&(t=Tge(t,/y/g,""))),Pge&&(x=U_t(e),e=x[0],l=x[1]),T=b_t(ld(e,t),n?this:I_,sd),(g||_||l.length)&&(C=R_t(T),g&&(C.dotAll=!0,C.raw=sd(B_t(e),p)),_&&(C.sticky=!0),l.length&&(C.groups=l)),e!==c)try{w_t(T,"source",c===""?"(?:)":c)}catch(D){}return T},L5=S_t(ld),D5=0;L5.length>D5;)M_t(sd,ld,L5[D5++]);I_.constructor=sd,sd.prototype=I_,A_t(N5,"RegExp",sd,{constructor:!0})}var sd,L5,D5;O_t("RegExp")});var rE=A((vxr,Lge)=>{"use strict";var V_t=TypeError;Lge.exports=function(r){if(typeof r=="string")return r;throw new V_t("Argument is not a string")}});var F5=A(()=>{"use strict";var G_t=ae(),nE=pt(),$_t=rE(),H_t=Nr(),Dge=O1().start,W_t=vg(),Z_t=Array,Nge=RegExp.escape,kge=nE("".charAt),j5=nE("".charCodeAt),Y_t=nE(1.1.toString),K_t=nE([].join),jge=/^[0-9a-z]/i,X_t=/^[$()*+./?[\\\]^{|}]/,Q_t=RegExp("^[!\"#%&',\\-:;<=>@`~"+W_t+"]"),k5=nE(jge.exec),qge={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},q5=function(r){var e=Y_t(j5(r,0),16);return e.length<3?"\\x"+Dge(e,2,"0"):"\\u"+Dge(e,4,"0")},J_t=!Nge||Nge("ab")!=="\\x61b";G_t({target:"RegExp",stat:!0,forced:J_t},{escape:function(e){$_t(e);for(var t=e.length,n=Z_t(t),i=0;i<t;i++){var o=kge(e,i);if(i===0&&k5(jge,o))n[i]=q5(o);else if(H_t(qge,o))n[i]="\\"+qge[o];else if(k5(X_t,o))n[i]="\\"+o;else if(k5(Q_t,o))n[i]=q5(o);else{var l=j5(o,0);(l&63488)!==55296?n[i]=o:l>=56320||i+1>=t||(j5(e,i+1)&64512)!==56320?n[i]=q5(o):(n[i]=o,n[++i]=kge(e,i))}}return K_t(n,"")}})});var zge=A(()=>{"use strict";var e0t=ar(),t0t=NP(),r0t=fa(),n0t=ci(),i0t=xn().get,Fge=RegExp.prototype,o0t=TypeError;e0t&&t0t&&n0t(Fge,"dotAll",{configurable:!0,get:function(){if(this!==Fge){if(r0t(this)==="RegExp")return!!i0t(this).dotAll;throw new o0t("Incompatible receiver, RegExp required")}}})});var FP=A((wxr,Uge)=>{"use strict";var M_=Dt(),jP=pt(),a0t=wr(),s0t=DP(),l0t=eE(),u0t=Kh(),c0t=Zi(),h0t=xn().get,f0t=NP(),p0t=R5(),d0t=u0t("native-string-replace",String.prototype.replace),qP=RegExp.prototype.exec,B5=qP,m0t=jP("".charAt),g0t=jP("".indexOf),v0t=jP("".replace),z5=jP("".slice),U5=function(){var r=/a/,e=/b*/g;return M_(qP,r,"a"),M_(qP,e,"a"),r.lastIndex!==0||e.lastIndex!==0}(),Bge=l0t.BROKEN_CARET,V5=/()??/.exec("")[1]!==void 0,y0t=U5||V5||Bge||f0t||p0t;y0t&&(B5=function(e){var t=this,n=h0t(t),i=a0t(e),o=n.raw,l,c,p,g,_,x,T;if(o)return o.lastIndex=t.lastIndex,l=M_(B5,o,i),t.lastIndex=o.lastIndex,l;var C=n.groups,D=Bge&&t.sticky,F=M_(s0t,t),O=t.source,k=0,q=i;if(D&&(F=v0t(F,"y",""),g0t(F,"g")===-1&&(F+="g"),q=z5(i,t.lastIndex),t.lastIndex>0&&(!t.multiline||t.multiline&&m0t(i,t.lastIndex-1)!==`
`)&&(O="(?: "+O+")",q=" "+q,k++),c=new RegExp("^(?:"+O+")",F)),V5&&(c=new RegExp("^"+O+"$(?!\\s)",F)),U5&&(p=t.lastIndex),g=M_(qP,D?c:t,q),D?g?(g.input=z5(g.input,k),g[0]=z5(g[0],k),g.index=t.lastIndex,t.lastIndex+=g[0].length):t.lastIndex=0:U5&&g&&(t.lastIndex=t.global?g.index+g[0].length:p),V5&&g&&g.length>1&&M_(d0t,g[0],c,function(){for(_=1;_<arguments.length-2;_++)arguments[_]===void 0&&(g[_]=void 0)}),g&&C)for(g.groups=x=c0t(null),_=0;_<C.length;_++)T=C[_],x[T[0]]=g[T[1]];return g});Uge.exports=B5});var zP=A(()=>{"use strict";var _0t=ae(),Vge=FP();_0t({target:"RegExp",proto:!0,forced:/./.exec!==Vge},{exec:Vge})});var Hge=A(()=>{"use strict";var x0t=Lt(),b0t=ar(),w0t=ci(),E0t=DP(),S0t=yt(),Gge=x0t.RegExp,$ge=Gge.prototype,T0t=b0t&&S0t(function(){var r=!0;try{Gge(".","d")}catch(p){r=!1}var e={},t="",n=r?"dgimsy":"gimsy",i=function(p,g){Object.defineProperty(e,p,{get:function(){return t+=g,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};r&&(o.hasIndices="d");for(var l in o)i(l,o[l]);var c=Object.getOwnPropertyDescriptor($ge,"flags").get.call(e);return c!==n||t!==n});T0t&&w0t($ge,"flags",{configurable:!0,get:E0t})});var Zge=A(()=>{"use strict";var I0t=ar(),M0t=eE().MISSED_STICKY,A0t=fa(),C0t=ci(),P0t=xn().get,Wge=RegExp.prototype,R0t=TypeError;I0t&&M0t&&C0t(Wge,"sticky",{configurable:!0,get:function(){if(this!==Wge){if(A0t(this)==="RegExp")return!!P0t(this).sticky;throw new R0t("Incompatible receiver, RegExp required")}}})});var Xge=A(()=>{"use strict";zP();var O0t=ae(),Yge=Dt(),L0t=Rr(),Kge=kt(),D0t=wr(),N0t=function(){var r=!1,e=/[ac]/;return e.exec=function(){return r=!0,/./.exec.apply(this,arguments)},e.test("abc")===!0&&r}(),k0t=/./.test;O0t({target:"RegExp",proto:!0,forced:!N0t},{test:function(r){var e=Kge(this),t=D0t(r),n=e.exec;if(!L0t(n))return Yge(k0t,e,t);var i=Yge(n,e,t);return i===null?!1:(Kge(i),!0)}})});var tve=A(()=>{"use strict";var q0t=ig().PROPER,j0t=Sn(),F0t=kt(),Qge=wr(),z0t=yt(),B0t=T_(),G5="toString",Jge=RegExp.prototype,eve=Jge[G5],U0t=z0t(function(){return eve.call({source:"a",flags:"b"})!=="/a/b"}),V0t=q0t&&eve.name!==G5;(U0t||V0t)&&j0t(Jge,G5,function(){var e=F0t(this),t=Qge(e.source),n=Qge(B0t(e));return"/"+t+"/"+n},{unsafe:!0})});var rve=A(()=>{"use strict";var G0t=D1(),$0t=u3();G0t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},$0t)});var nve=A(()=>{"use strict";rve()});var Qo=A((qxr,ive)=>{"use strict";var $5=pt(),BP=Set.prototype;ive.exports={Set,add:$5(BP.add),has:$5(BP.has),remove:$5(BP.delete),proto:BP}});var ma=A((jxr,ove)=>{"use strict";var H0t=Qo().has;ove.exports=function(r){return H0t(r),r}});var lf=A((Fxr,ave)=>{"use strict";var W0t=Dt();ave.exports=function(r,e,t){for(var n=t?r:r.iterator,i=r.next,o,l;!(o=W0t(i,n)).done;)if(l=e(o.value),l!==void 0)return l}});var ks=A((zxr,hve)=>{"use strict";var sve=pt(),Z0t=lf(),lve=Qo(),Y0t=lve.Set,uve=lve.proto,K0t=sve(uve.forEach),cve=sve(uve.keys),X0t=cve(new Y0t).next;hve.exports=function(r,e,t){return t?Z0t({iterator:cve(r),next:X0t},e):K0t(r,e)}});var UP=A((Bxr,pve)=>{"use strict";var fve=Qo(),Q0t=ks(),J0t=fve.Set,ext=fve.add;pve.exports=function(r){var e=new J0t;return Q0t(r,function(t){ext(e,t)}),e}});var A_=A((Uxr,dve)=>{"use strict";var txt=v1(),rxt=Qo();dve.exports=txt(rxt.proto,"size","get")||function(r){return r.size}});var ud=A((Vxr,xve)=>{"use strict";var mve=vr(),yve=kt(),gve=Dt(),nxt=ui(),ixt=xi(),vve="Invalid size",oxt=RangeError,axt=TypeError,sxt=Math.max,_ve=function(r,e){this.set=r,this.size=sxt(e,0),this.has=mve(r.has),this.keys=mve(r.keys)};_ve.prototype={getIterator:function(){return ixt(yve(gve(this.keys,this.set)))},includes:function(r){return gve(this.has,this.set,r)}};xve.exports=function(r){yve(r);var e=+r.size;if(e!==e)throw new axt(vve);var t=nxt(e);if(t<0)throw new oxt(vve);return new _ve(r,t)}});var H5=A((Gxr,Eve)=>{"use strict";var lxt=ma(),wve=Qo(),uxt=UP(),cxt=A_(),hxt=ud(),fxt=ks(),pxt=lf(),dxt=wve.has,bve=wve.remove;Eve.exports=function(e){var t=lxt(this),n=hxt(e),i=uxt(t);return cxt(t)<=n.size?fxt(t,function(o){n.includes(o)&&bve(i,o)}):pxt(n.getIterator(),function(o){dxt(t,o)&&bve(i,o)}),i}});var cd=A(($xr,Ive)=>{"use strict";var mxt=gr(),Sve=function(r){return{size:r,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},Tve=function(r){return{size:r,has:function(){return!0},keys:function(){throw new Error("e")}}};Ive.exports=function(r,e){var t=mxt("Set");try{new t()[r](Sve(0));try{return new t()[r](Sve(-1)),!1}catch(i){if(!e)return!0;try{return new t()[r](Tve(-1/0)),!1}catch(o){var n=new t;return n.add(1),n.add(2),e(n[r](Tve(1/0)))}}}catch(i){return!1}}});var W5=A(()=>{"use strict";var gxt=ae(),vxt=H5(),yxt=cd(),_xt=!yxt("difference",function(r){return r.size===0});gxt({target:"Set",proto:!0,real:!0,forced:_xt},{difference:vxt})});var Y5=A((Zxr,Ave)=>{"use strict";var xxt=ma(),Z5=Qo(),bxt=A_(),wxt=ud(),Ext=ks(),Sxt=lf(),Txt=Z5.Set,Mve=Z5.add,Ixt=Z5.has;Ave.exports=function(e){var t=xxt(this),n=wxt(e),i=new Txt;return bxt(t)>n.size?Sxt(n.getIterator(),function(o){Ixt(t,o)&&Mve(i,o)}):Ext(t,function(o){n.includes(o)&&Mve(i,o)}),i}});var K5=A(()=>{"use strict";var Mxt=ae(),Axt=yt(),Cxt=Y5(),Pxt=cd(),Rxt=!Pxt("intersection",function(r){return r.size===2&&r.has(1)&&r.has(2)})||Axt(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});Mxt({target:"Set",proto:!0,real:!0,forced:Rxt},{intersection:Cxt})});var X5=A((Xxr,Cve)=>{"use strict";var Oxt=ma(),Lxt=Qo().has,Dxt=A_(),Nxt=ud(),kxt=ks(),qxt=lf(),jxt=Xo();Cve.exports=function(e){var t=Oxt(this),n=Nxt(e);if(Dxt(t)<=n.size)return kxt(t,function(o){if(n.includes(o))return!1},!0)!==!1;var i=n.getIterator();return qxt(i,function(o){if(Lxt(t,o))return jxt(i,"normal",!1)})!==!1}});var Q5=A(()=>{"use strict";var Fxt=ae(),zxt=X5(),Bxt=cd(),Uxt=!Bxt("isDisjointFrom",function(r){return!r});Fxt({target:"Set",proto:!0,real:!0,forced:Uxt},{isDisjointFrom:zxt})});var J5=A((ebr,Pve)=>{"use strict";var Vxt=ma(),Gxt=A_(),$xt=ks(),Hxt=ud();Pve.exports=function(e){var t=Vxt(this),n=Hxt(e);return Gxt(t)>n.size?!1:$xt(t,function(i){if(!n.includes(i))return!1},!0)!==!1}});var eV=A(()=>{"use strict";var Wxt=ae(),Zxt=J5(),Yxt=cd(),Kxt=!Yxt("isSubsetOf",function(r){return r});Wxt({target:"Set",proto:!0,real:!0,forced:Kxt},{isSubsetOf:Zxt})});var tV=A((nbr,Rve)=>{"use strict";var Xxt=ma(),Qxt=Qo().has,Jxt=A_(),ebt=ud(),tbt=lf(),rbt=Xo();Rve.exports=function(e){var t=Xxt(this),n=ebt(e);if(Jxt(t)<n.size)return!1;var i=n.getIterator();return tbt(i,function(o){if(!Qxt(t,o))return rbt(i,"normal",!1)})!==!1}});var rV=A(()=>{"use strict";var nbt=ae(),ibt=tV(),obt=cd(),abt=!obt("isSupersetOf",function(r){return!r});nbt({target:"Set",proto:!0,real:!0,forced:abt},{isSupersetOf:ibt})});var iV=A((abr,Ove)=>{"use strict";var sbt=ma(),nV=Qo(),lbt=UP(),ubt=ud(),cbt=lf(),hbt=nV.add,fbt=nV.has,pbt=nV.remove;Ove.exports=function(e){var t=sbt(this),n=ubt(e).getIterator(),i=lbt(t);return cbt(n,function(o){fbt(t,o)?pbt(i,o):hbt(i,o)}),i}});var oV=A(()=>{"use strict";var dbt=ae(),mbt=iV(),gbt=cd();dbt({target:"Set",proto:!0,real:!0,forced:!gbt("symmetricDifference")},{symmetricDifference:mbt})});var aV=A((ubr,Lve)=>{"use strict";var vbt=ma(),ybt=Qo().add,_bt=UP(),xbt=ud(),bbt=lf();Lve.exports=function(e){var t=vbt(this),n=xbt(e).getIterator(),i=_bt(t);return bbt(n,function(o){ybt(i,o)}),i}});var sV=A(()=>{"use strict";var wbt=ae(),Ebt=aV(),Sbt=cd();wbt({target:"Set",proto:!0,real:!0,forced:!Sbt("union")},{union:Ebt})});var Dve=A(()=>{"use strict";var Tbt=ae(),Ibt=pt(),Mbt=ei(),Abt=ui(),Cbt=wr(),Pbt=yt(),Rbt=Ibt("".charAt),Obt=Pbt(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});Tbt({target:"String",proto:!0,forced:Obt},{at:function(e){var t=Cbt(Mbt(this)),n=t.length,i=Abt(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:Rbt(t,o)}})});var Eg=A((dbr,qve)=>{"use strict";var lV=pt(),Lbt=ui(),Dbt=wr(),Nbt=ei(),kbt=lV("".charAt),Nve=lV("".charCodeAt),qbt=lV("".slice),kve=function(r){return function(e,t){var n=Dbt(Nbt(e)),i=Lbt(t),o=n.length,l,c;return i<0||i>=o?r?"":void 0:(l=Nve(n,i),l<55296||l>56319||i+1===o||(c=Nve(n,i+1))<56320||c>57343?r?kbt(n,i):l:r?qbt(n,i,i+2):(l-55296<<10)+(c-56320)+65536)}};qve.exports={codeAt:kve(!1),charAt:kve(!0)}});var jve=A(()=>{"use strict";var jbt=ae(),Fbt=Eg().codeAt;jbt({target:"String",proto:!0},{codePointAt:function(e){return Fbt(this,e)}})});var VP=A((vbr,Fve)=>{"use strict";var zbt=J1(),Bbt=TypeError;Fve.exports=function(r){if(zbt(r))throw new Bbt("The method doesn't accept regular expressions");return r}});var GP=A((ybr,zve)=>{"use strict";var Ubt=fr(),Vbt=Ubt("match");zve.exports=function(r){var e=/./;try{"/./"[r](e)}catch(t){try{return e[Vbt]=!1,"/./"[r](e)}catch(n){}}return!1}});var Vve=A(()=>{"use strict";var Gbt=ae(),$bt=Up(),Hbt=Yo().f,Wbt=Os(),Bve=wr(),Zbt=VP(),Ybt=ei(),Kbt=GP(),Xbt=un(),Qbt=$bt("".slice),Jbt=Math.min,Uve=Kbt("endsWith"),ewt=!Xbt&&!Uve&&!!function(){var r=Hbt(String.prototype,"endsWith");return r&&!r.writable}();Gbt({target:"String",proto:!0,forced:!ewt&&!Uve},{endsWith:function(e){var t=Bve(Ybt(this));Zbt(e);var n=arguments.length>1?arguments[1]:void 0,i=t.length,o=n===void 0?i:Jbt(Wbt(n),i),l=Bve(e);return Qbt(t,o-l.length,o)===l}})});var uV=A(()=>{"use strict";var twt=ae(),rwt=pt(),nwt=Gu(),iwt=RangeError,Gve=String.fromCharCode,$ve=String.fromCodePoint,owt=rwt([].join),awt=!!$ve&&$ve.length!==1;twt({target:"String",stat:!0,arity:1,forced:awt},{fromCodePoint:function(e){for(var t=[],n=arguments.length,i=0,o;n>i;){if(o=+arguments[i++],nwt(o,1114111)!==o)throw new iwt(o+" is not a valid code point");t[i]=o<65536?Gve(o):Gve(((o-=65536)>>10)+55296,o%1024+56320)}return owt(t,"")}})});var Wve=A(()=>{"use strict";var swt=ae(),lwt=pt(),uwt=VP(),cwt=ei(),Hve=wr(),hwt=GP(),fwt=lwt("".indexOf);swt({target:"String",proto:!0,forced:!hwt("includes")},{includes:function(e){return!!~fwt(Hve(cwt(this)),Hve(uwt(e)),arguments.length>1?arguments[1]:void 0)}})});var cV=A(()=>{"use strict";var pwt=ae(),dwt=pt(),mwt=ei(),gwt=wr(),Zve=dwt("".charCodeAt);pwt({target:"String",proto:!0},{isWellFormed:function(){for(var e=gwt(mwt(this)),t=e.length,n=0;n<t;n++){var i=Zve(e,n);if((i&63488)===55296&&(i>=56320||++n>=t||(Zve(e,n)&64512)!==56320))return!1}return!0}})});var hV=A(()=>{"use strict";var vwt=Eg().charAt,ywt=wr(),Kve=xn(),_wt=VC(),Yve=ko(),Xve="String Iterator",xwt=Kve.set,bwt=Kve.getterFor(Xve);_wt(String,"String",function(r){xwt(this,{type:Xve,string:ywt(r),index:0})},function(){var e=bwt(this),t=e.string,n=e.index,i;return n>=t.length?Yve(void 0,!0):(i=vwt(t,n),e.index+=i.length,Yve(i,!1))})});var iE=A((Cbr,rye)=>{"use strict";zP();var Qve=Dt(),Jve=Sn(),wwt=FP(),eye=yt(),tye=fr(),Ewt=_o(),Swt=tye("species"),fV=RegExp.prototype;rye.exports=function(r,e,t,n){var i=tye(r),o=!eye(function(){var g={};return g[i]=function(){return 7},""[r](g)!==7}),l=o&&!eye(function(){var g=!1,_=/a/;return r==="split"&&(_={},_.constructor={},_.constructor[Swt]=function(){return _},_.flags="",_[i]=/./[i]),_.exec=function(){return g=!0,null},_[i](""),!g});if(!o||!l||t){var c=/./[i],p=e(i,""[r],function(g,_,x,T,C){var D=_.exec;return D===wwt||D===fV.exec?o&&!C?{done:!0,value:Qve(c,_,x,T)}:{done:!0,value:Qve(g,x,_,T)}:{done:!1}});Jve(String.prototype,r,p[0]),Jve(fV,i,p[1])}n&&Ewt(fV[i],"sham",!0)}});var oE=A((Pbr,nye)=>{"use strict";var Twt=Eg().charAt;nye.exports=function(r,e,t){return e+(t?Twt(r,e).length:1)}});var C_=A((Rbr,oye)=>{"use strict";var iye=Dt(),Iwt=kt(),Mwt=Rr(),Awt=fa(),Cwt=FP(),Pwt=TypeError;oye.exports=function(r,e){var t=r.exec;if(Mwt(t)){var n=iye(t,r,e);return n!==null&&Iwt(n),n}if(Awt(r)==="RegExp")return iye(Cwt,r,e);throw new Pwt("RegExp#exec called on incompatible receiver")}});var sye=A(()=>{"use strict";var Rwt=Dt(),Owt=iE(),Lwt=kt(),Dwt=lr(),Nwt=Os(),pV=wr(),kwt=ei(),qwt=Wi(),jwt=oE(),aye=C_();Owt("match",function(r,e,t){return[function(i){var o=kwt(this),l=Dwt(i)?qwt(i,r):void 0;return l?Rwt(l,i,o):new RegExp(i)[r](pV(o))},function(n){var i=Lwt(this),o=pV(n),l=t(e,i,o);if(l.done)return l.value;if(!i.global)return aye(i,o);var c=i.unicode;i.lastIndex=0;for(var p=[],g=0,_;(_=aye(i,o))!==null;){var x=pV(_[0]);p[g]=x,x===""&&(i.lastIndex=jwt(o,Nwt(i.lastIndex),c)),g++}return g===0?null:p}]})});var yV=A(()=>{"use strict";var Fwt=ae(),lye=Dt(),hye=Up(),zwt=Yp(),$P=ko(),uye=ei(),fye=Os(),aE=wr(),Bwt=kt(),Uwt=lr(),Vwt=fa(),Gwt=J1(),pye=T_(),$wt=Wi(),Hwt=Sn(),Wwt=yt(),Zwt=fr(),Ywt=$1(),Kwt=oE(),Xwt=C_(),dye=xn(),mV=un(),HP=Zwt("matchAll"),mye="RegExp String",gye=mye+" Iterator",Qwt=dye.set,Jwt=dye.getterFor(gye),cye=RegExp.prototype,e1t=TypeError,gV=hye("".indexOf),WP=hye("".matchAll),dV=!!WP&&!Wwt(function(){WP("a",/./)}),t1t=zwt(function(e,t,n,i){Qwt(this,{type:gye,regexp:e,string:t,global:n,unicode:i,done:!1})},mye,function(){var e=Jwt(this);if(e.done)return $P(void 0,!0);var t=e.regexp,n=e.string,i=Xwt(t,n);return i===null?(e.done=!0,$P(void 0,!0)):e.global?(aE(i[0])===""&&(t.lastIndex=Kwt(n,fye(t.lastIndex),e.unicode)),$P(i,!1)):(e.done=!0,$P(i,!1))}),vV=function(r){var e=Bwt(this),t=aE(r),n=Ywt(e,RegExp),i=aE(pye(e)),o,l,c;return o=new n(n===RegExp?e.source:e,i),l=!!~gV(i,"g"),c=!!~gV(i,"u"),o.lastIndex=fye(e.lastIndex),new t1t(o,t,l,c)};Fwt({target:"String",proto:!0,forced:dV},{matchAll:function(e){var t=uye(this),n,i,o,l;if(Uwt(e)){if(Gwt(e)&&(n=aE(uye(pye(e))),!~gV(n,"g")))throw new e1t("`.matchAll` does not allow non-global regexes");if(dV)return WP(t,e);if(o=$wt(e,HP),o===void 0&&mV&&Vwt(e)==="RegExp"&&(o=vV),o)return lye(o,e,t)}else if(dV)return WP(t,e);return i=aE(t),l=new RegExp(e,"g"),mV?lye(vV,l,i):l[HP](i)}});mV||HP in cye||Hwt(cye,HP,vV)});var _V=A((kbr,vye)=>{"use strict";var r1t=zu();vye.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r1t)});var yye=A(()=>{"use strict";var n1t=ae(),i1t=O1().end,o1t=_V();n1t({target:"String",proto:!0,forced:o1t},{padEnd:function(e){return i1t(this,e,arguments.length>1?arguments[1]:void 0)}})});var _ye=A(()=>{"use strict";var a1t=ae(),s1t=O1().start,l1t=_V();a1t({target:"String",proto:!0,forced:l1t},{padStart:function(e){return s1t(this,e,arguments.length>1?arguments[1]:void 0)}})});var Eye=A(()=>{"use strict";var u1t=ae(),wye=pt(),c1t=yo(),h1t=Ur(),xye=wr(),f1t=en(),bye=wye([].push),p1t=wye([].join);u1t({target:"String",stat:!0},{raw:function(e){var t=c1t(h1t(e).raw),n=f1t(t);if(!n)return"";for(var i=arguments.length,o=[],l=0;;){if(bye(o,xye(t[l++])),l===n)return p1t(o,"");l<i&&bye(o,xye(arguments[l]))}}})});var Sye=A(()=>{"use strict";var d1t=ae(),m1t=R1();d1t({target:"String",proto:!0},{repeat:m1t})});var EV=A(($br,Tye)=>{"use strict";var wV=pt(),g1t=Ur(),v1t=Math.floor,xV=wV("".charAt),y1t=wV("".replace),bV=wV("".slice),_1t=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,x1t=/\$([$&'`]|\d{1,2})/g;Tye.exports=function(r,e,t,n,i,o){var l=t+r.length,c=n.length,p=x1t;return i!==void 0&&(i=g1t(i),p=_1t),y1t(o,p,function(g,_){var x;switch(xV(_,0)){case"$":return"$";case"&":return r;case"`":return bV(e,0,t);case"'":return bV(e,l);case"<":x=i[bV(_,1,-1)];break;default:var T=+_;if(T===0)return g;if(T>c){var C=v1t(T/10);return C===0?g:C<=c?n[C-1]===void 0?xV(_,1):n[C-1]+xV(_,1):g}x=n[T-1]}return x===void 0?"":x})}});var Pye=A(()=>{"use strict";var b1t=da(),Iye=Dt(),ZP=pt(),w1t=iE(),E1t=yt(),S1t=kt(),T1t=Rr(),I1t=lr(),M1t=ui(),A1t=Os(),P_=wr(),C1t=ei(),P1t=oE(),R1t=Wi(),O1t=EV(),L1t=C_(),D1t=fr(),TV=D1t("replace"),N1t=Math.max,k1t=Math.min,q1t=ZP([].concat),SV=ZP([].push),Mye=ZP("".indexOf),Aye=ZP("".slice),j1t=function(r){return r===void 0?r:String(r)},F1t=function(){return"a".replace(/./,"$0")==="$0"}(),Cye=function(){return /./[TV]?/./[TV]("a","$0")==="":!1}(),z1t=!E1t(function(){var r=/./;return r.exec=function(){var e=[];return e.groups={a:"7"},e},"".replace(r,"$<a>")!=="7"});w1t("replace",function(r,e,t){var n=Cye?"$":"$0";return[function(o,l){var c=C1t(this),p=I1t(o)?R1t(o,TV):void 0;return p?Iye(p,o,c,l):Iye(e,P_(c),o,l)},function(i,o){var l=S1t(this),c=P_(i);if(typeof o=="string"&&Mye(o,n)===-1&&Mye(o,"$<")===-1){var p=t(e,l,c,o);if(p.done)return p.value}var g=T1t(o);g||(o=P_(o));var _=l.global,x;_&&(x=l.unicode,l.lastIndex=0);for(var T=[],C;C=L1t(l,c),!(C===null||(SV(T,C),!_));){var D=P_(C[0]);D===""&&(l.lastIndex=P1t(c,A1t(l.lastIndex),x))}for(var F="",O=0,k=0;k<T.length;k++){C=T[k];for(var q=P_(C[0]),U=N1t(k1t(M1t(C.index),c.length),0),H=[],se,ie=1;ie<C.length;ie++)SV(H,j1t(C[ie]));var ue=C.groups;if(g){var ve=q1t([q],H,U,c);ue!==void 0&&SV(ve,ue),se=P_(b1t(o,void 0,ve))}else se=O1t(q,c,U,H,ue,o);U>=O&&(F+=Aye(c,O,U)+se,O=U+q.length)}return F+Aye(c,O)}]},!z1t||!F1t||Cye)});var AV=A(()=>{"use strict";var B1t=ae(),U1t=Dt(),MV=pt(),Rye=ei(),V1t=Rr(),G1t=lr(),$1t=J1(),R_=wr(),H1t=Wi(),W1t=T_(),Z1t=EV(),Y1t=fr(),K1t=un(),X1t=Y1t("replace"),Q1t=TypeError,IV=MV("".indexOf),J1t=MV("".replace),Oye=MV("".slice),eEt=Math.max;B1t({target:"String",proto:!0},{replaceAll:function(e,t){var n=Rye(this),i,o,l,c,p,g,_,x,T,C,D=0,F="";if(G1t(e)){if(i=$1t(e),i&&(o=R_(Rye(W1t(e))),!~IV(o,"g")))throw new Q1t("`.replaceAll` does not allow non-global regexes");if(l=H1t(e,X1t),l)return U1t(l,e,n,t);if(K1t&&i)return J1t(R_(n),e,t)}for(c=R_(n),p=R_(e),g=V1t(t),g||(t=R_(t)),_=p.length,x=eEt(1,_),T=IV(c,p);T!==-1;)C=g?R_(t(p,T,c)):Z1t(p,c,T,[],void 0,t),F+=Oye(c,D,T)+C,D=T+_,T=T+x>c.length?-1:IV(c,p,T+x);return D<c.length&&(F+=Oye(c,D)),F}})});var Nye=A(()=>{"use strict";var tEt=Dt(),rEt=iE(),nEt=kt(),iEt=lr(),oEt=ei(),Lye=SP(),Dye=wr(),aEt=Wi(),sEt=C_();rEt("search",function(r,e,t){return[function(i){var o=oEt(this),l=iEt(i)?aEt(i,r):void 0;return l?tEt(l,i,o):new RegExp(i)[r](Dye(o))},function(n){var i=nEt(this),o=Dye(n),l=t(e,i,o);if(l.done)return l.value;var c=i.lastIndex;Lye(c,0)||(i.lastIndex=0);var p=sEt(i,o);return Lye(i.lastIndex,c)||(i.lastIndex=c),p===null?-1:p.index}]})});var zye=A(()=>{"use strict";var CV=Dt(),Fye=pt(),lEt=iE(),uEt=kt(),cEt=lr(),hEt=ei(),fEt=$1(),pEt=oE(),dEt=Os(),kye=wr(),mEt=Wi(),qye=C_(),gEt=eE(),vEt=yt(),O_=gEt.UNSUPPORTED_Y,yEt=4294967295,_Et=Math.min,PV=Fye([].push),RV=Fye("".slice),xEt=!vEt(function(){var r=/(?:)/,e=r.exec;r.exec=function(){return e.apply(this,arguments)};var t="ab".split(r);return t.length!==2||t[0]!=="a"||t[1]!=="b"}),jye="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;lEt("split",function(r,e,t){var n="0".split(void 0,0).length?function(i,o){return i===void 0&&o===0?[]:CV(e,this,i,o)}:e;return[function(o,l){var c=hEt(this),p=cEt(o)?mEt(o,r):void 0;return p?CV(p,o,c,l):CV(n,kye(c),o,l)},function(i,o){var l=uEt(this),c=kye(i);if(!jye){var p=t(n,l,c,o,n!==e);if(p.done)return p.value}var g=fEt(l,RegExp),_=l.unicode,x=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(O_?"g":"y"),T=new g(O_?"^(?:"+l.source+")":l,x),C=o===void 0?yEt:o>>>0;if(C===0)return[];if(c.length===0)return qye(T,c)===null?[c]:[];for(var D=0,F=0,O=[];F<c.length;){T.lastIndex=O_?0:F;var k=qye(T,O_?RV(c,F):c),q;if(k===null||(q=_Et(dEt(T.lastIndex+(O_?F:0)),c.length))===D)F=pEt(c,F,_);else{if(PV(O,RV(c,D,F)),O.length===C)return O;for(var U=1;U<=k.length-1;U++)if(PV(O,k[U]),O.length===C)return O;F=D=q}}return PV(O,RV(c,D)),O}]},jye||!xEt,O_)});var Vye=A(()=>{"use strict";var bEt=ae(),wEt=Up(),EEt=Yo().f,SEt=Os(),Bye=wr(),TEt=VP(),IEt=ei(),MEt=GP(),AEt=un(),CEt=wEt("".slice),PEt=Math.min,Uye=MEt("startsWith"),REt=!AEt&&!Uye&&!!function(){var r=EEt(String.prototype,"startsWith");return r&&!r.writable}();bEt({target:"String",proto:!0,forced:!REt&&!Uye},{startsWith:function(e){var t=Bye(IEt(this));TEt(e);var n=SEt(PEt(arguments.length>1?arguments[1]:void 0,t.length)),i=Bye(e);return CEt(t,n,n+i.length)===i}})});var $ye=A(()=>{"use strict";var OEt=ae(),LEt=pt(),DEt=ei(),Gye=ui(),NEt=wr(),kEt=LEt("".slice),qEt=Math.max,jEt=Math.min,FEt=!"".substr||"ab".substr(-1)!=="b";OEt({target:"String",proto:!0,forced:FEt},{substr:function(e,t){var n=NEt(DEt(this)),i=n.length,o=Gye(e),l,c;return o===1/0&&(o=0),o<0&&(o=qEt(i+o,0)),l=t===void 0?i:Gye(t),l<=0||l===1/0?"":(c=jEt(o+l,i),o>=c?"":kEt(n,o,c))}})});var NV=A(()=>{"use strict";var zEt=ae(),Zye=Dt(),DV=pt(),BEt=ei(),UEt=wr(),VEt=yt(),GEt=Array,OV=DV("".charAt),Hye=DV("".charCodeAt),$Et=DV([].join),LV="".toWellFormed,HEt="\uFFFD",Wye=LV&&VEt(function(){return Zye(LV,1)!=="1"});zEt({target:"String",proto:!0,forced:Wye},{toWellFormed:function(){var e=UEt(BEt(this));if(Wye)return Zye(LV,e);for(var t=e.length,n=GEt(t),i=0;i<t;i++){var o=Hye(e,i);(o&63488)!==55296?n[i]=OV(e,i):o>=56320||i+1>=t||(Hye(e,i+1)&64512)!==56320?n[i]=HEt:(n[i]=OV(e,i),n[++i]=OV(e,i))}return $Et(n,"")}})});var YP=A((awr,Xye)=>{"use strict";var WEt=ig().PROPER,ZEt=yt(),Yye=vg(),Kye="\u200B\x85\u180E";Xye.exports=function(r){return ZEt(function(){return!!Yye[r]()||Kye[r]()!==Kye||WEt&&Yye[r].name!==r})}});var Qye=A(()=>{"use strict";var YEt=ae(),KEt=yg().trim,XEt=YP();YEt({target:"String",proto:!0,forced:XEt("trim")},{trim:function(){return KEt(this)}})});var kV=A((uwr,Jye)=>{"use strict";var QEt=yg().end,JEt=YP();Jye.exports=JEt("trimEnd")?function(){return QEt(this)}:"".trimEnd});var t_e=A(()=>{"use strict";var eSt=ae(),e_e=kV();eSt({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==e_e},{trimRight:e_e})});var n_e=A(()=>{"use strict";t_e();var tSt=ae(),r_e=kV();tSt({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==r_e},{trimEnd:r_e})});var qV=A((dwr,i_e)=>{"use strict";var rSt=yg().start,nSt=YP();i_e.exports=nSt("trimStart")?function(){return rSt(this)}:"".trimStart});var a_e=A(()=>{"use strict";var iSt=ae(),o_e=qV();iSt({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==o_e},{trimLeft:o_e})});var l_e=A(()=>{"use strict";a_e();var oSt=ae(),s_e=qV();oSt({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==s_e},{trimStart:s_e})});var qs=A((_wr,c_e)=>{"use strict";var aSt=pt(),sSt=ei(),u_e=wr(),lSt=/"/g,uSt=aSt("".replace);c_e.exports=function(r,e,t,n){var i=u_e(sSt(r)),o="<"+e;return t!==""&&(o+=" "+t+"=\""+uSt(u_e(n),lSt,"&quot;")+"\""),o+">"+i+"</"+e+">"}});var js=A((xwr,h_e)=>{"use strict";var cSt=yt();h_e.exports=function(r){return cSt(function(){var e=""[r]("\"");return e!==e.toLowerCase()||e.split("\"").length>3})}});var f_e=A(()=>{"use strict";var hSt=ae(),fSt=qs(),pSt=js();hSt({target:"String",proto:!0,forced:pSt("anchor")},{anchor:function(e){return fSt(this,"a","name",e)}})});var p_e=A(()=>{"use strict";var dSt=ae(),mSt=qs(),gSt=js();dSt({target:"String",proto:!0,forced:gSt("big")},{big:function(){return mSt(this,"big","","")}})});var d_e=A(()=>{"use strict";var vSt=ae(),ySt=qs(),_St=js();vSt({target:"String",proto:!0,forced:_St("blink")},{blink:function(){return ySt(this,"blink","","")}})});var m_e=A(()=>{"use strict";var xSt=ae(),bSt=qs(),wSt=js();xSt({target:"String",proto:!0,forced:wSt("bold")},{bold:function(){return bSt(this,"b","","")}})});var g_e=A(()=>{"use strict";var ESt=ae(),SSt=qs(),TSt=js();ESt({target:"String",proto:!0,forced:TSt("fixed")},{fixed:function(){return SSt(this,"tt","","")}})});var v_e=A(()=>{"use strict";var ISt=ae(),MSt=qs(),ASt=js();ISt({target:"String",proto:!0,forced:ASt("fontcolor")},{fontcolor:function(e){return MSt(this,"font","color",e)}})});var y_e=A(()=>{"use strict";var CSt=ae(),PSt=qs(),RSt=js();CSt({target:"String",proto:!0,forced:RSt("fontsize")},{fontsize:function(e){return PSt(this,"font","size",e)}})});var x_e=A(()=>{"use strict";var OSt=ae(),LSt=qs(),DSt=js();OSt({target:"String",proto:!0,forced:DSt("italics")},{italics:function(){return LSt(this,"i","","")}})});var b_e=A(()=>{"use strict";var NSt=ae(),kSt=qs(),qSt=js();NSt({target:"String",proto:!0,forced:qSt("link")},{link:function(e){return kSt(this,"a","href",e)}})});var w_e=A(()=>{"use strict";var jSt=ae(),FSt=qs(),zSt=js();jSt({target:"String",proto:!0,forced:zSt("small")},{small:function(){return FSt(this,"small","","")}})});var E_e=A(()=>{"use strict";var BSt=ae(),USt=qs(),VSt=js();BSt({target:"String",proto:!0,forced:VSt("strike")},{strike:function(){return USt(this,"strike","","")}})});var S_e=A(()=>{"use strict";var GSt=ae(),$St=qs(),HSt=js();GSt({target:"String",proto:!0,forced:HSt("sub")},{sub:function(){return $St(this,"sub","","")}})});var T_e=A(()=>{"use strict";var WSt=ae(),ZSt=qs(),YSt=js();WSt({target:"String",proto:!0,forced:YSt("sup")},{sup:function(){return ZSt(this,"sup","","")}})});var KP=A((Wwr,M_e)=>{"use strict";var I_e=Lt(),jV=yt(),KSt=x1(),XSt=qr().NATIVE_ARRAY_BUFFER_VIEWS,QSt=I_e.ArrayBuffer,Sg=I_e.Int8Array;M_e.exports=!XSt||!jV(function(){Sg(1)})||!jV(function(){new Sg(-1)})||!KSt(function(r){new Sg,new Sg(null),new Sg(1.5),new Sg(r)},!0)||jV(function(){return new Sg(new QSt(2),1,void 0).length!==1})});var FV=A((Zwr,A_e)=>{"use strict";var JSt=p_(),eTt=RangeError;A_e.exports=function(r,e){var t=JSt(r);if(t%e)throw new eTt("Wrong offset");return t}});var zV=A((Ywr,C_e)=>{"use strict";var tTt=Math.round;C_e.exports=function(r){var e=tTt(r);return e<0?0:e>255?255:e&255}});var XP=A((Kwr,P_e)=>{"use strict";var rTt=os();P_e.exports=function(r){var e=rTt(r);return e==="BigInt64Array"||e==="BigUint64Array"}});var sE=A((Xwr,R_e)=>{"use strict";var nTt=r1(),iTt=TypeError;R_e.exports=function(r){var e=nTt(r,"number");if(typeof e=="number")throw new iTt("Can't convert number to bigint");return BigInt(e)}});var BV=A((Qwr,O_e)=>{"use strict";var oTt=kn(),aTt=Dt(),sTt=G1(),lTt=Ur(),uTt=en(),cTt=Hp(),hTt=Fc(),fTt=NC(),pTt=XP(),dTt=qr().aTypedArrayConstructor,mTt=sE();O_e.exports=function(e){var t=sTt(this),n=lTt(e),i=arguments.length,o=i>1?arguments[1]:void 0,l=o!==void 0,c=hTt(n),p,g,_,x,T,C,D,F;if(c&&!fTt(c))for(D=cTt(n,c),F=D.next,n=[];!(C=aTt(F,D)).done;)n.push(C.value);for(l&&i>2&&(o=oTt(o,arguments[2])),g=uTt(n),_=new(dTt(t))(g),x=pTt(_),p=0;g>p;p++)T=l?o(n[p],p):n[p],_[p]=x?mTt(T):+T;return _}});var $c=A((Jwr,ZV)=>{"use strict";var L_e=ae(),G_e=Lt(),D_e=Dt(),gTt=ar(),vTt=KP(),hE=qr(),$_e=P1(),N_e=La(),yTt=Ps(),lE=_o(),_Tt=bP(),xTt=Os(),k_e=o_(),UV=FV(),bTt=zV(),H_e=qc(),uE=Nr(),wTt=os(),$V=lr(),ETt=Yh(),STt=Zi(),TTt=pa(),QP=Gl(),ITt=Bp().f,q_e=BV(),MTt=Yi().forEach,ATt=Xp(),CTt=ci(),W_e=Wn(),Z_e=Yo(),j_e=ef(),YV=xn(),PTt=$p(),HV=YV.get,RTt=YV.set,OTt=YV.enforce,Y_e=W_e.f,LTt=Z_e.f,VV=G_e.RangeError,K_e=$_e.ArrayBuffer,DTt=K_e.prototype,NTt=$_e.DataView,JP=hE.NATIVE_ARRAY_BUFFER_VIEWS,F_e=hE.TYPED_ARRAY_TAG,z_e=hE.TypedArray,cE=hE.TypedArrayPrototype,WV=hE.isTypedArray,eR="BYTES_PER_ELEMENT",GV="Wrong length",tR=function(r,e){CTt(r,e,{configurable:!0,get:function(){return HV(this)[e]}})},B_e=function(r){var e;return TTt(DTt,r)||(e=wTt(r))==="ArrayBuffer"||e==="SharedArrayBuffer"},X_e=function(r,e){return WV(r)&&!ETt(e)&&e in r&&_Tt(+e)&&e>=0},U_e=function(e,t){return t=H_e(t),X_e(e,t)?yTt(2,e[t]):LTt(e,t)},V_e=function(e,t,n){return t=H_e(t),X_e(e,t)&&$V(n)&&uE(n,"value")&&!uE(n,"get")&&!uE(n,"set")&&!n.configurable&&(!uE(n,"writable")||n.writable)&&(!uE(n,"enumerable")||n.enumerable)?(e[t]=n.value,e):Y_e(e,t,n)};gTt?(JP||(Z_e.f=U_e,W_e.f=V_e,tR(cE,"buffer"),tR(cE,"byteOffset"),tR(cE,"byteLength"),tR(cE,"length")),L_e({target:"Object",stat:!0,forced:!JP},{getOwnPropertyDescriptor:U_e,defineProperty:V_e}),ZV.exports=function(r,e,t){var n=r.match(/\d+/)[0]/8,i=r+(t?"Clamped":"")+"Array",o="get"+r,l="set"+r,c=G_e[i],p=c,g=p&&p.prototype,_={},x=function(F,O){var k=HV(F);return k.view[o](O*n+k.byteOffset,!0)},T=function(F,O,k){var q=HV(F);q.view[l](O*n+q.byteOffset,t?bTt(k):k,!0)},C=function(F,O){Y_e(F,O,{get:function(){return x(this,O)},set:function(k){return T(this,O,k)},enumerable:!0})};JP?vTt&&(p=e(function(F,O,k,q){return N_e(F,g),PTt(function(){return $V(O)?B_e(O)?q!==void 0?new c(O,UV(k,n),q):k!==void 0?new c(O,UV(k,n)):new c(O):WV(O)?j_e(p,O):D_e(q_e,p,O):new c(k_e(O))}(),F,p)}),QP&&QP(p,z_e),MTt(ITt(c),function(F){F in p||lE(p,F,c[F])}),p.prototype=g):(p=e(function(F,O,k,q){N_e(F,g);var U=0,H=0,se,ie,ue;if(!$V(O))ue=k_e(O),ie=ue*n,se=new K_e(ie);else if(B_e(O)){se=O,H=UV(k,n);var ve=O.byteLength;if(q===void 0){if(ve%n)throw new VV(GV);if(ie=ve-H,ie<0)throw new VV(GV)}else if(ie=xTt(q)*n,ie+H>ve)throw new VV(GV);ue=ie/n}else return WV(O)?j_e(p,O):D_e(q_e,p,O);for(RTt(F,{buffer:se,byteOffset:H,byteLength:ie,length:ue,view:new NTt(se)});U<ue;)C(F,U++)}),QP&&QP(p,z_e),g=p.prototype=STt(cE)),g.constructor!==p&&lE(g,"constructor",p),OTt(g).TypedArrayConstructor=p,F_e&&lE(g,F_e,i);var D=p!==c;_[i]=p,L_e({global:!0,constructor:!0,forced:D,sham:!JP},_),eR in p||lE(p,eR,n),eR in g||lE(g,eR,n),ATt(i)}):ZV.exports=function(){}});var Q_e=A(()=>{"use strict";var kTt=$c();kTt("Float32",function(r){return function(t,n,i){return r(this,t,n,i)}})});var J_e=A(()=>{"use strict";var qTt=$c();qTt("Float64",function(r){return function(t,n,i){return r(this,t,n,i)}})});var e0e=A(()=>{"use strict";var jTt=$c();jTt("Int8",function(r){return function(t,n,i){return r(this,t,n,i)}})});var t0e=A(()=>{"use strict";var FTt=$c();FTt("Int16",function(r){return function(t,n,i){return r(this,t,n,i)}})});var r0e=A(()=>{"use strict";var zTt=$c();zTt("Int32",function(r){return function(t,n,i){return r(this,t,n,i)}})});var n0e=A(()=>{"use strict";var BTt=$c();BTt("Uint8",function(r){return function(t,n,i){return r(this,t,n,i)}})});var i0e=A(()=>{"use strict";var UTt=$c();UTt("Uint8",function(r){return function(t,n,i){return r(this,t,n,i)}},!0)});var o0e=A(()=>{"use strict";var VTt=$c();VTt("Uint16",function(r){return function(t,n,i){return r(this,t,n,i)}})});var a0e=A(()=>{"use strict";var GTt=$c();GTt("Uint32",function(r){return function(t,n,i){return r(this,t,n,i)}})});var KV=A(()=>{"use strict";var s0e=qr(),$Tt=en(),HTt=ui(),WTt=s0e.aTypedArray,ZTt=s0e.exportTypedArrayMethod;ZTt("at",function(e){var t=WTt(this),n=$Tt(t),i=HTt(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:t[o]})});var u0e=A(()=>{"use strict";var YTt=pt(),l0e=qr(),KTt=Q4(),XTt=YTt(KTt),QTt=l0e.aTypedArray,JTt=l0e.exportTypedArrayMethod;JTt("copyWithin",function(e,t){return XTt(QTt(this),e,t,arguments.length>2?arguments[2]:void 0)})});var h0e=A(()=>{"use strict";var c0e=qr(),eIt=Yi().every,tIt=c0e.aTypedArray,rIt=c0e.exportTypedArrayMethod;rIt("every",function(e){return eIt(tIt(this),e,arguments.length>1?arguments[1]:void 0)})});var p0e=A(()=>{"use strict";var f0e=qr(),nIt=FC(),iIt=sE(),oIt=os(),aIt=Dt(),sIt=pt(),lIt=yt(),uIt=f0e.aTypedArray,cIt=f0e.exportTypedArrayMethod,hIt=sIt("".slice),fIt=lIt(function(){var r=0;return new Int8Array(2).fill({valueOf:function(){return r++}}),r!==1});cIt("fill",function(e){var t=arguments.length;uIt(this);var n=hIt(oIt(this),0,3)==="Big"?iIt(e):+e;return aIt(nIt,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)},fIt)});var rR=A((I1r,d0e)=>{"use strict";var pIt=ef(),dIt=qr().getTypedArrayConstructor;d0e.exports=function(r,e){return pIt(dIt(r),e)}});var g0e=A(()=>{"use strict";var m0e=qr(),mIt=Yi().filter,gIt=rR(),vIt=m0e.aTypedArray,yIt=m0e.exportTypedArrayMethod;yIt("filter",function(e){var t=mIt(vIt(this),e,arguments.length>1?arguments[1]:void 0);return gIt(this,t)})});var y0e=A(()=>{"use strict";var v0e=qr(),_It=Yi().find,xIt=v0e.aTypedArray,bIt=v0e.exportTypedArrayMethod;bIt("find",function(e){return _It(xIt(this),e,arguments.length>1?arguments[1]:void 0)})});var x0e=A(()=>{"use strict";var _0e=qr(),wIt=Yi().findIndex,EIt=_0e.aTypedArray,SIt=_0e.exportTypedArrayMethod;SIt("findIndex",function(e){return wIt(EIt(this),e,arguments.length>1?arguments[1]:void 0)})});var XV=A(()=>{"use strict";var b0e=qr(),TIt=_1().findLast,IIt=b0e.aTypedArray,MIt=b0e.exportTypedArrayMethod;MIt("findLast",function(e){return TIt(IIt(this),e,arguments.length>1?arguments[1]:void 0)})});var QV=A(()=>{"use strict";var w0e=qr(),AIt=_1().findLastIndex,CIt=w0e.aTypedArray,PIt=w0e.exportTypedArrayMethod;PIt("findLastIndex",function(e){return AIt(CIt(this),e,arguments.length>1?arguments[1]:void 0)})});var S0e=A(()=>{"use strict";var E0e=qr(),RIt=Yi().forEach,OIt=E0e.aTypedArray,LIt=E0e.exportTypedArrayMethod;LIt("forEach",function(e){RIt(OIt(this),e,arguments.length>1?arguments[1]:void 0)})});var T0e=A(()=>{"use strict";var DIt=KP(),NIt=qr().exportTypedArrayStaticMethod,kIt=BV();NIt("from",kIt,DIt)});var M0e=A(()=>{"use strict";var I0e=qr(),qIt=Xy().includes,jIt=I0e.aTypedArray,FIt=I0e.exportTypedArrayMethod;FIt("includes",function(e){return qIt(jIt(this),e,arguments.length>1?arguments[1]:void 0)})});var C0e=A(()=>{"use strict";var A0e=qr(),zIt=Xy().indexOf,BIt=A0e.aTypedArray,UIt=A0e.exportTypedArrayMethod;UIt("indexOf",function(e){return zIt(BIt(this),e,arguments.length>1?arguments[1]:void 0)})});var D0e=A(()=>{"use strict";var VIt=Lt(),GIt=yt(),JV=pt(),R0e=qr(),eG=E1(),$It=fr(),tG=$It("iterator"),P0e=VIt.Uint8Array,HIt=JV(eG.values),WIt=JV(eG.keys),ZIt=JV(eG.entries),rG=R0e.aTypedArray,nR=R0e.exportTypedArrayMethod,L_=P0e&&P0e.prototype,iR=!GIt(function(){L_[tG].call([1])}),O0e=!!L_&&L_.values&&L_[tG]===L_.values&&L_.values.name==="values",L0e=function(){return HIt(rG(this))};nR("entries",function(){return ZIt(rG(this))},iR);nR("keys",function(){return WIt(rG(this))},iR);nR("values",L0e,iR||!O0e,{name:"values"});nR(tG,L0e,iR||!O0e,{name:"values"})});var k0e=A(()=>{"use strict";var N0e=qr(),YIt=pt(),KIt=N0e.aTypedArray,XIt=N0e.exportTypedArrayMethod,QIt=YIt([].join);XIt("join",function(e){return QIt(KIt(this),e)})});var j0e=A(()=>{"use strict";var q0e=qr(),JIt=da(),eMt=dB(),tMt=q0e.aTypedArray,rMt=q0e.exportTypedArrayMethod;rMt("lastIndexOf",function(e){var t=arguments.length;return JIt(eMt,tMt(this),t>1?[e,arguments[1]]:[e])})});var F0e=A(()=>{"use strict";var nG=qr(),nMt=Yi().map,iMt=nG.aTypedArray,oMt=nG.getTypedArrayConstructor,aMt=nG.exportTypedArrayMethod;aMt("map",function(e){return nMt(iMt(this),e,arguments.length>1?arguments[1]:void 0,function(t,n){return new(oMt(t))(n)})})});var B0e=A(()=>{"use strict";var z0e=qr(),sMt=KP(),lMt=z0e.aTypedArrayConstructor,uMt=z0e.exportTypedArrayStaticMethod;uMt("of",function(){for(var e=0,t=arguments.length,n=new(lMt(this))(t);t>e;)n[e]=arguments[e++];return n},sMt)});var V0e=A(()=>{"use strict";var U0e=qr(),cMt=S1().left,hMt=U0e.aTypedArray,fMt=U0e.exportTypedArrayMethod;fMt("reduce",function(e){var t=arguments.length;return cMt(hMt(this),e,t,t>1?arguments[1]:void 0)})});var $0e=A(()=>{"use strict";var G0e=qr(),pMt=S1().right,dMt=G0e.aTypedArray,mMt=G0e.exportTypedArrayMethod;mMt("reduceRight",function(e){var t=arguments.length;return pMt(dMt(this),e,t,t>1?arguments[1]:void 0)})});var W0e=A(()=>{"use strict";var H0e=qr(),gMt=H0e.aTypedArray,vMt=H0e.exportTypedArrayMethod,yMt=Math.floor;vMt("reverse",function(){for(var e=this,t=gMt(e).length,n=yMt(t/2),i=0,o;i<n;)o=e[i],e[i++]=e[--t],e[t]=o;return e})});var J0e=A(()=>{"use strict";var Y0e=Lt(),K0e=Dt(),aG=qr(),_Mt=en(),xMt=FV(),bMt=Ur(),X0e=yt(),wMt=Y0e.RangeError,iG=Y0e.Int8Array,Z0e=iG&&iG.prototype,Q0e=Z0e&&Z0e.set,EMt=aG.aTypedArray,SMt=aG.exportTypedArrayMethod,oG=!X0e(function(){var r=new Uint8ClampedArray(2);return K0e(Q0e,r,{length:1,0:3},1),r[1]!==3}),TMt=oG&&aG.NATIVE_ARRAY_BUFFER_VIEWS&&X0e(function(){var r=new iG(2);return r.set(1),r.set("2",1),r[0]!==0||r[1]!==2});SMt("set",function(e){EMt(this);var t=xMt(arguments.length>1?arguments[1]:void 0,1),n=bMt(e);if(oG)return K0e(Q0e,this,n,t);var i=this.length,o=_Mt(n),l=0;if(o+t>i)throw new wMt("Wrong length");for(;l<o;)this[t+l]=n[l++]},!oG||TMt)});var exe=A(()=>{"use strict";var sG=qr(),IMt=yt(),MMt=Ls(),AMt=sG.aTypedArray,CMt=sG.getTypedArrayConstructor,PMt=sG.exportTypedArrayMethod,RMt=IMt(function(){new Int8Array(1).slice()});PMt("slice",function(e,t){for(var n=MMt(AMt(this),e,t),i=CMt(this),o=0,l=n.length,c=new i(l);l>o;)c[o]=n[o++];return c},RMt)});var rxe=A(()=>{"use strict";var txe=qr(),OMt=Yi().some,LMt=txe.aTypedArray,DMt=txe.exportTypedArrayMethod;DMt("some",function(e){return OMt(LMt(this),e,arguments.length>1?arguments[1]:void 0)})});var lxe=A(()=>{"use strict";var NMt=Lt(),kMt=Up(),lG=yt(),qMt=vr(),jMt=WC(),sxe=qr(),nxe=vB(),FMt=yB(),ixe=Uu(),oxe=ZC(),zMt=sxe.aTypedArray,BMt=sxe.exportTypedArrayMethod,fE=NMt.Uint16Array,D_=fE&&kMt(fE.prototype.sort),UMt=!!D_&&!(lG(function(){D_(new fE(2),null)})&&lG(function(){D_(new fE(2),{})})),axe=!!D_&&!lG(function(){if(ixe)return ixe<74;if(nxe)return nxe<67;if(FMt)return!0;if(oxe)return oxe<602;var r=new fE(516),e=Array(516),t,n;for(t=0;t<516;t++)n=t%4,r[t]=515-t,e[t]=t-2*n+3;for(D_(r,function(i,o){return(i/4|0)-(o/4|0)}),t=0;t<516;t++)if(r[t]!==e[t])return!0}),VMt=function(r){return function(e,t){return r!==void 0?+r(e,t)||0:t!==t?-1:e!==e?1:e===0&&t===0?1/e>0&&1/t<0?1:-1:e>t}};BMt("sort",function(e){return e!==void 0&&qMt(e),axe?D_(this,e):jMt(zMt(this),VMt(e))},!axe||UMt)});var cxe=A(()=>{"use strict";var uG=qr(),GMt=Os(),uxe=Gu(),$Mt=uG.aTypedArray,HMt=uG.getTypedArrayConstructor,WMt=uG.exportTypedArrayMethod;WMt("subarray",function(e,t){var n=$Mt(this),i=n.length,o=uxe(e,i),l=HMt(n);return new l(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,GMt((t===void 0?i:uxe(t,i))-o))})});var mxe=A(()=>{"use strict";var ZMt=Lt(),YMt=da(),pxe=qr(),cG=yt(),hxe=Ls(),oR=ZMt.Int8Array,fxe=pxe.aTypedArray,KMt=pxe.exportTypedArrayMethod,dxe=[].toLocaleString,XMt=!!oR&&cG(function(){dxe.call(new oR(1))}),QMt=cG(function(){return[1,2].toLocaleString()!==new oR([1,2]).toLocaleString()})||!cG(function(){oR.prototype.toLocaleString.call([1,2])});KMt("toLocaleString",function(){return YMt(dxe,XMt?hxe(fxe(this)):fxe(this),hxe(arguments))},QMt)});var fG=A(()=>{"use strict";var JMt=bB(),hG=qr(),eAt=hG.aTypedArray,tAt=hG.exportTypedArrayMethod,rAt=hG.getTypedArrayConstructor;tAt("toReversed",function(){return JMt(eAt(this),rAt(this))})});var pG=A(()=>{"use strict";var aR=qr(),nAt=pt(),iAt=vr(),oAt=ef(),aAt=aR.aTypedArray,sAt=aR.getTypedArrayConstructor,lAt=aR.exportTypedArrayMethod,uAt=nAt(aR.TypedArrayPrototype.sort);lAt("toSorted",function(e){e!==void 0&&iAt(e);var t=aAt(this),n=oAt(sAt(t),t);return uAt(n,e)})});var vxe=A(()=>{"use strict";var cAt=qr().exportTypedArrayMethod,hAt=yt(),fAt=Lt(),pAt=pt(),gxe=fAt.Uint8Array,dAt=gxe&&gxe.prototype||{},sR=[].toString,mAt=pAt([].join);hAt(function(){sR.call({})})&&(sR=function(){return mAt(this)});var gAt=dAt.toString!==sR;cAt("toString",sR,gAt)});var mG=A(()=>{"use strict";var vAt=IB(),dG=qr(),yAt=XP(),_At=ui(),xAt=sE(),bAt=dG.aTypedArray,wAt=dG.getTypedArrayConstructor,EAt=dG.exportTypedArrayMethod,SAt=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(r){return r===8}}();EAt("with",function(r,e){var t=bAt(this),n=_At(r),i=yAt(t)?xAt(e):+e;return vAt(t,wAt(t),n,i)},!SAt)});var wxe=A(()=>{"use strict";var TAt=ae(),gG=pt(),IAt=wr(),yxe=String.fromCharCode,_xe=gG("".charAt),xxe=gG(/./.exec),bxe=gG("".slice),MAt=/^[\da-f]{2}$/i,AAt=/^[\da-f]{4}$/i;TAt({global:!0},{unescape:function(e){for(var t=IAt(e),n="",i=t.length,o=0,l,c;o<i;){if(l=_xe(t,o++),l==="%"){if(_xe(t,o)==="u"){if(c=bxe(t,o+1,o+5),xxe(AAt,c)){n+=yxe(parseInt(c,16)),o+=5;continue}}else if(c=bxe(t,o,o+2),xxe(MAt,c)){n+=yxe(parseInt(c,16)),o+=2;continue}}n+=l}return n}})});var _G=A((CEr,Axe)=>{"use strict";var CAt=pt(),Exe=Wl(),lR=id().getWeakData,PAt=La(),RAt=kt(),OAt=Rs(),vG=lr(),LAt=Ii(),Txe=Yi(),Sxe=Nr(),Ixe=xn(),DAt=Ixe.set,NAt=Ixe.getterFor,kAt=Txe.find,qAt=Txe.findIndex,jAt=CAt([].splice),FAt=0,uR=function(r){return r.frozen||(r.frozen=new Mxe)},Mxe=function(){this.entries=[]},yG=function(r,e){return kAt(r.entries,function(t){return t[0]===e})};Mxe.prototype={get:function(r){var e=yG(this,r);if(e)return e[1]},has:function(r){return!!yG(this,r)},set:function(r,e){var t=yG(this,r);t?t[1]=e:this.entries.push([r,e])},delete:function(r){var e=qAt(this.entries,function(t){return t[0]===r});return~e&&jAt(this.entries,e,1),!!~e}};Axe.exports={getConstructor:function(r,e,t,n){var i=r(function(p,g){PAt(p,o),DAt(p,{type:e,id:FAt++,frozen:null}),OAt(g)||LAt(g,p[n],{that:p,AS_ENTRIES:t})}),o=i.prototype,l=NAt(e),c=function(p,g,_){var x=l(p),T=lR(RAt(g),!0);return T===!0?uR(x).set(g,_):T[x.id]=_,p};return Exe(o,{delete:function(p){var g=l(this);if(!vG(p))return!1;var _=lR(p);return _===!0?uR(g).delete(p):_&&Sxe(_,g.id)&&delete _[g.id]},has:function(g){var _=l(this);if(!vG(g))return!1;var x=lR(g);return x===!0?uR(_).has(g):x&&Sxe(x,_.id)}}),Exe(o,t?{get:function(g){var _=l(this);if(vG(g)){var x=lR(g);if(x===!0)return uR(_).get(g);if(x)return x[_.id]}},set:function(g,_){return c(this,g,_)}}:{add:function(g){return c(this,g,!0)}}),i}}});var kxe=A(()=>{"use strict";var zAt=af(),Cxe=Lt(),pR=pt(),Pxe=Wl(),BAt=id(),UAt=D1(),Rxe=_G(),cR=lr(),hR=xn().enforce,VAt=yt(),GAt=e4(),mE=Object,$At=Array.isArray,fR=mE.isExtensible,Oxe=mE.isFrozen,HAt=mE.isSealed,Lxe=mE.freeze,WAt=mE.seal,ZAt=!Cxe.ActiveXObject&&"ActiveXObject"in Cxe,pE,Dxe=function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},Nxe=UAt("WeakMap",Dxe,Rxe),N_=Nxe.prototype,dR=pR(N_.set),YAt=function(){return zAt&&VAt(function(){var r=Lxe([]);return dR(new Nxe,r,1),!Oxe(r)})};GAt&&(ZAt?(pE=Rxe.getConstructor(Dxe,"WeakMap",!0),BAt.enable(),xG=pR(N_.delete),dE=pR(N_.has),bG=pR(N_.get),Pxe(N_,{delete:function(r){if(cR(r)&&!fR(r)){var e=hR(this);return e.frozen||(e.frozen=new pE),xG(this,r)||e.frozen.delete(r)}return xG(this,r)},has:function(e){if(cR(e)&&!fR(e)){var t=hR(this);return t.frozen||(t.frozen=new pE),dE(this,e)||t.frozen.has(e)}return dE(this,e)},get:function(e){if(cR(e)&&!fR(e)){var t=hR(this);return t.frozen||(t.frozen=new pE),dE(this,e)?bG(this,e):t.frozen.get(e)}return bG(this,e)},set:function(e,t){if(cR(e)&&!fR(e)){var n=hR(this);n.frozen||(n.frozen=new pE),dE(this,e)?dR(this,e,t):n.frozen.set(e,t)}else dR(this,e,t);return this}})):YAt()&&Pxe(N_,{set:function(e,t){var n;return $At(e)&&(Oxe(e)?n=Lxe:HAt(e)&&(n=WAt)),dR(this,e,t),n&&n(e),this}}));var xG,dE,bG});var mR=A(()=>{"use strict";kxe()});var qxe=A(()=>{"use strict";var KAt=D1(),XAt=_G();KAt("WeakSet",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},XAt)});var jxe=A(()=>{"use strict";qxe()});var Fxe=A(()=>{"use strict";H4()});var Uxe=A(()=>{"use strict";var QAt=ae(),JAt=Lt(),eCt=pa(),zxe=xo(),vR=Gl(),tCt=ag(),Bxe=Zi(),gR=_o(),wG=Ps(),rCt=RC(),nCt=hg(),iCt=fr(),oCt=yt(),aCt=un(),k_=JAt.SuppressedError,sCt=iCt("toStringTag"),yR=Error,lCt=!!k_&&k_.length!==3,uCt=!!k_&&oCt(function(){return new k_(1,2,3,{cause:4}).cause===4}),_R=lCt||uCt,Tg=function(e,t,n){var i=eCt(gE,this),o;return vR?o=_R&&(!i||zxe(this)===gE)?new k_:vR(new yR,i?zxe(this):gE):(o=i?this:Bxe(gE),gR(o,sCt,"Error")),n!==void 0&&gR(o,"message",nCt(n)),rCt(o,Tg,o.stack,1),gR(o,"error",e),gR(o,"suppressed",t),o};vR?vR(Tg,yR):tCt(Tg,yR,{name:!0});var gE=Tg.prototype=_R?k_.prototype:Bxe(yR.prototype,{constructor:wG(1,Tg),message:wG(1,""),name:wG(1,"SuppressedError")});_R&&!aCt&&(gE.constructor=Tg);QAt({global:!0,constructor:!0,arity:3,forced:_R},{SuppressedError:Tg})});var q_=A((UEr,Kxe)=>{"use strict";var Wxe=Lt(),Zxe=t1(),Yxe=Rr(),cCt=Zi(),xR=xo(),hCt=Sn(),fCt=fr(),pCt=un(),Vxe="USE_FUNCTION_CONSTRUCTOR",Gxe=fCt("asyncIterator"),$xe=Wxe.AsyncIterator,Hxe=Zxe.AsyncIteratorPrototype,Hc,EG;if(Hxe)Hc=Hxe;else if(Yxe($xe))Hc=$xe.prototype;else if(Zxe[Vxe]||Wxe[Vxe])try{EG=xR(xR(xR(Function("return async function*(){}()")()))),xR(EG)===Object.prototype&&(Hc=EG)}catch(r){}Hc?pCt&&(Hc=cCt(Hc)):Hc={};Yxe(Hc[Gxe])||hCt(Hc,Gxe,function(){return this});Kxe.exports=Hc});var vE=A((VEr,obe)=>{"use strict";var Xxe=Dt(),Qxe=kt(),dCt=Zi(),mCt=Wi(),gCt=Wl(),tbe=xn(),vCt=Xo(),yCt=gr(),_Ct=q_(),rbe=ko(),SG=yCt("Promise"),nbe="AsyncFromSyncIterator",xCt=tbe.set,Jxe=tbe.getterFor(nbe),ebe=function(r,e,t,n,i){var o=r.done;SG.resolve(r.value).then(function(l){e(rbe(l,o))},function(l){if(!o&&i)try{vCt(n,"throw",l)}catch(c){l=c}t(l)})},ibe=function(e){e.type=nbe,xCt(this,e)};ibe.prototype=gCt(dCt(_Ct),{next:function(){var e=Jxe(this);return new SG(function(t,n){var i=Qxe(Xxe(e.next,e.iterator));ebe(i,t,n,e.iterator,!0)})},return:function(){var r=Jxe(this).iterator;return new SG(function(e,t){var n=mCt(r,"return");if(n===void 0)return e(rbe(void 0,!0));var i=Qxe(Xxe(n,r));ebe(i,e,t,r)})}});obe.exports=ibe});var sbe=A((GEr,abe)=>{"use strict";var bCt=Dt(),wCt=vE(),ECt=kt(),SCt=Hp(),TCt=xi(),ICt=Wi(),MCt=fr(),ACt=MCt("asyncIterator");abe.exports=function(r,e){var t=arguments.length<2?ICt(r,ACt):e;return t?ECt(bCt(t,r)):new wCt(TCt(SCt(r)))}});var j_=A(($Er,lbe)=>{"use strict";var CCt=Dt(),PCt=gr(),RCt=Wi();lbe.exports=function(r,e,t,n){try{var i=RCt(r,"return");if(i)return PCt("Promise").resolve(CCt(i,r)).then(function(){e(t)},function(o){n(o)})}catch(o){return n(o)}e(t)}});var Ig=A((HEr,ube)=>{"use strict";var OCt=Dt(),LCt=vr(),TG=kt(),DCt=lr(),NCt=Wp(),kCt=gr(),qCt=xi(),IG=j_(),yE=function(r){var e=r===0,t=r===1,n=r===2,i=r===3;return function(o,l,c){TG(o);var p=l!==void 0;(p||!e)&&LCt(l);var g=qCt(o),_=kCt("Promise"),x=g.iterator,T=g.next,C=0;return new _(function(D,F){var O=function(q){IG(x,F,q,F)},k=function(){try{if(p)try{NCt(C)}catch(q){O(q)}_.resolve(TG(OCt(T,x))).then(function(q){try{if(TG(q).done)e?(c.length=C,D(c)):D(i?!1:n||void 0);else{var U=q.value;try{if(p){var H=l(U,C),se=function(ie){if(t)k();else if(n)ie?k():IG(x,D,!1,F);else if(e)try{c[C++]=ie,k()}catch(ue){O(ue)}else ie?IG(x,D,i||U,F):k()};DCt(H)?_.resolve(H).then(se,O):se(H)}else c[C++]=U,k()}catch(ie){O(ie)}}}catch(ie){F(ie)}},F)}catch(q){F(q)}};k()})}};ube.exports={toArray:yE(0),forEach:yE(1),every:yE(2),some:yE(3),find:yE(4)}});var MG=A((WEr,pbe)=>{"use strict";var jCt=kn(),cbe=pt(),FCt=Ur(),zCt=Hu(),BCt=sbe(),UCt=Hp(),VCt=xi(),GCt=Fc(),$Ct=Wi(),HCt=gr(),WCt=EB(),ZCt=fr(),YCt=vE(),KCt=Ig().toArray,XCt=ZCt("asyncIterator"),hbe=cbe(WCt("Array","values")),QCt=cbe(hbe([]).next),JCt=function(){return new fbe(this)},fbe=function(r){this.iterator=hbe(r)};fbe.prototype.next=function(){return QCt(this.iterator)};pbe.exports=function(e){var t=this,n=arguments.length,i=n>1?arguments[1]:void 0,o=n>2?arguments[2]:void 0;return new(HCt("Promise"))(function(l){var c=FCt(e);i!==void 0&&(i=jCt(i,o));var p=$Ct(c,XCt),g=p?void 0:GCt(c)||JCt,_=zCt(t)?new t:[],x=p?BCt(c,p):new YCt(VCt(UCt(c,g)));l(KCt(x,i,_))})}});var mbe=A(()=>{"use strict";var ePt=ae(),tPt=MG(),rPt=yt(),dbe=Array.fromAsync,nPt=!dbe||rPt(function(){var r=0;return dbe.call(function(){return r++,[]},{length:0}),r!==1});ePt({target:"Array",stat:!0,forced:nPt},{fromAsync:tPt})});var gbe=A(()=>{"use strict";K4()});var vbe=A(()=>{"use strict";var iPt=ae(),oPt=Yi().filterReject,aPt=Mi();iPt({target:"Array",proto:!0,forced:!0},{filterOut:function(e){return oPt(this,e,arguments.length>1?arguments[1]:void 0)}});aPt("filterOut")});var ybe=A(()=>{"use strict";var sPt=ae(),lPt=Yi().filterReject,uPt=Mi();sPt({target:"Array",proto:!0,forced:!0},{filterReject:function(e){return lPt(this,e,arguments.length>1?arguments[1]:void 0)}});uPt("filterReject")});var _be=A(()=>{"use strict";tB()});var xbe=A(()=>{"use strict";rB()});var bR=A((aSr,bbe)=>{"use strict";var cPt=kn(),hPt=pt(),fPt=Zh(),pPt=Ur(),dPt=qc(),mPt=en(),gPt=Zi(),vPt=ef(),yPt=Array,_Pt=hPt([].push);bbe.exports=function(r,e,t,n){for(var i=pPt(r),o=fPt(i),l=cPt(e,t),c=gPt(null),p=mPt(o),g=0,_,x,T;p>g;g++)T=o[g],x=dPt(l(T,g,i)),x in c?_Pt(c[x],T):c[x]=[T];if(n&&(_=n(i),_!==yPt))for(x in c)c[x]=vPt(_,c[x]);return c}});var wbe=A(()=>{"use strict";var xPt=ae(),bPt=bR(),wPt=Mi();xPt({target:"Array",proto:!0},{group:function(e){var t=arguments.length>1?arguments[1]:void 0;return bPt(this,e,t)}});wPt("group")});var Ebe=A(()=>{"use strict";var EPt=ae(),SPt=bR(),TPt=Hl(),IPt=Mi();EPt({target:"Array",proto:!0,forced:!TPt("groupBy")},{groupBy:function(e){var t=arguments.length>1?arguments[1]:void 0;return SPt(this,e,t)}});IPt("groupBy")});var AG=A((hSr,Sbe)=>{"use strict";var MPt=kn(),APt=pt(),CPt=Zh(),PPt=Ur(),RPt=en(),wR=qo(),OPt=wR.Map,LPt=wR.get,DPt=wR.has,NPt=wR.set,kPt=APt([].push);Sbe.exports=function(e){for(var t=PPt(this),n=CPt(t),i=MPt(e,arguments.length>1?arguments[1]:void 0),o=new OPt,l=RPt(n),c=0,p,g;l>c;c++)g=n[c],p=i(g,c,t),DPt(o,p)?kPt(LPt(o,p),g):NPt(o,p,[g]);return o}});var Tbe=A(()=>{"use strict";var qPt=ae(),jPt=Hl(),FPt=Mi(),zPt=AG(),BPt=un();qPt({target:"Array",proto:!0,name:"groupToMap",forced:BPt||!jPt("groupByToMap")},{groupByToMap:zPt});FPt("groupByToMap")});var Ibe=A(()=>{"use strict";var UPt=ae(),VPt=Mi(),GPt=AG(),$Pt=un();UPt({target:"Array",proto:!0,forced:$Pt},{groupToMap:GPt});VPt("groupToMap")});var Cbe=A(()=>{"use strict";var HPt=ae(),WPt=$u(),Mbe=Object.isFrozen,Abe=function(r,e){if(!Mbe||!WPt(r)||!Mbe(r))return!1;for(var t=0,n=r.length,i;t<n;)if(i=r[t++],!(typeof i=="string"||e&&i===void 0))return!1;return n!==0};HPt({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(e){if(!Abe(e,!0))return!1;var t=e.raw;return t.length===e.length&&Abe(t,!1)}})});var Pbe=A(()=>{"use strict";var ZPt=ar(),YPt=Mi(),KPt=Ur(),XPt=en(),QPt=ci();ZPt&&(QPt(Array.prototype,"lastIndex",{configurable:!0,get:function(){var e=KPt(this),t=XPt(e);return t===0?0:t-1}}),YPt("lastIndex"))});var Lbe=A(()=>{"use strict";var JPt=ar(),eRt=Mi(),Rbe=Ur(),Obe=en(),tRt=ci();JPt&&(tRt(Array.prototype,"lastItem",{configurable:!0,get:function(){var e=Rbe(this),t=Obe(e);return t===0?void 0:e[t-1]},set:function(e){var t=Rbe(this),n=Obe(t);return t[n===0?0:n-1]=e}}),eRt("lastItem"))});var Dbe=A(()=>{"use strict";wB()});var Nbe=A(()=>{"use strict";SB()});var kbe=A(()=>{"use strict";TB()});var Zl=A((ASr,Bbe)=>{"use strict";var qbe=pt(),rRt=lf(),jbe=qo(),nRt=jbe.Map,Fbe=jbe.proto,iRt=qbe(Fbe.forEach),zbe=qbe(Fbe.entries),oRt=zbe(new nRt).next;Bbe.exports=function(r,e,t){return t?rRt({iterator:zbe(r),next:oRt},function(n){return e(n[1],n[0])}):iRt(r,e)}});var ER=A((CSr,Ube)=>{"use strict";var aRt=pt(),sRt=vr(),lRt=Rs(),uRt=en(),cRt=Ur(),CG=qo(),hRt=Zl(),fRt=CG.Map,pRt=CG.has,dRt=CG.set,mRt=aRt([].push);Ube.exports=function(e){var t=cRt(this),n=uRt(t),i=[],o=new fRt,l=lRt(e)?function(_){return _}:sRt(e),c,p,g;for(c=0;c<n;c++)p=t[c],g=l(p),pRt(o,g)||dRt(o,g,p);return hRt(o,function(_){mRt(i,_)}),i}});var Vbe=A(()=>{"use strict";var gRt=ae(),vRt=Mi(),yRt=ER();gRt({target:"Array",proto:!0,forced:!0},{uniqueBy:yRt});vRt("uniqueBy")});var Gbe=A(()=>{"use strict";MB()});var $be=A(()=>{"use strict";eU()});var Hbe=A(()=>{"use strict";mU()});var Wbe=A(()=>{"use strict";gU()});var RG=A((zSr,Qbe)=>{"use strict";var _Rt=gr(),xRt=Dt(),bRt=pt(),wRt=kn(),ERt=kt(),SRt=vr(),Kbe=Rs(),PG=Wi(),Xbe=fr(),TRt=Xbe("asyncDispose"),Zbe=Xbe("dispose"),IRt=bRt([].push),MRt=function(r,e){if(e==="async-dispose"){var t=PG(r,TRt);return t!==void 0||(t=PG(r,Zbe),t===void 0)?t:function(){var n=this,i=_Rt("Promise");return new i(function(o){xRt(t,n),o(void 0)})}}return PG(r,Zbe)},Ybe=function(r,e,t){return arguments.length<3&&!Kbe(r)&&(t=SRt(MRt(ERt(r),e))),t===void 0?function(){}:wRt(t,r)};Qbe.exports=function(r,e,t,n){var i;if(arguments.length<4){if(Kbe(e)&&t==="sync-dispose")return;i=Ybe(e,t)}else i=Ybe(void 0,t,n);IRt(r.stack,i)}});var awe=A(()=>{"use strict";var ARt=ae(),TR=ar(),rwe=gr(),Jbe=vr(),CRt=La(),nwe=Sn(),PRt=Wl(),RRt=ci(),iwe=fr(),owe=xn(),OG=RG(),ewe=Uu(),twe=rwe("Promise"),ORt=rwe("SuppressedError"),LRt=ReferenceError,DRt=iwe("asyncDispose"),NRt=iwe("toStringTag"),MR="AsyncDisposableStack",kRt=owe.set,IR=owe.getterFor(MR),LG="async-dispose",_E="disposed",qRt="pending",SR=function(r){var e=IR(r);if(e.state===_E)throw new LRt(MR+" already disposed");return e},DG=function(){kRt(CRt(this,F_),{type:MR,state:qRt,stack:[]}),TR||(this.disposed=!1)},F_=DG.prototype;PRt(F_,{disposeAsync:function(){var e=this;return new twe(function(t,n){var i=IR(e);if(i.state===_E)return t(void 0);i.state=_E,TR||(e.disposed=!0);var o=i.stack,l=o.length,c=!1,p,g=function(x){c?p=new ORt(x,p):(c=!0,p=x),_()},_=function(){if(l){var x=o[--l];o[l]=null;try{twe.resolve(x()).then(_,g)}catch(T){g(T)}}else i.stack=null,c?n(p):t(void 0)};_()})},use:function(e){return OG(SR(this),e,LG),e},adopt:function(e,t){var n=SR(this);return Jbe(t),OG(n,void 0,LG,function(){return t(e)}),e},defer:function(e){var t=SR(this);Jbe(e),OG(t,void 0,LG,e)},move:function(){var e=SR(this),t=new DG;return IR(t).stack=e.stack,e.stack=[],e.state=_E,TR||(this.disposed=!0),t}});TR&&RRt(F_,"disposed",{configurable:!0,get:function(){return IR(this).state===_E}});nwe(F_,DRt,F_.disposeAsync,{name:"disposeAsync"});nwe(F_,NRt,MR,{nonWritable:!0});var jRt=ewe&&ewe<136;ARt({global:!0,constructor:!0,forced:jRt},{AsyncDisposableStack:DG})});var hwe=A(()=>{"use strict";var FRt=ae(),zRt=La(),BRt=xo(),lwe=_o(),uwe=Nr(),URt=fr(),hd=q_(),cwe=un(),swe=URt("toStringTag"),VRt=TypeError,NG=function(){if(zRt(this,hd),BRt(this)===hd)throw new VRt("Abstract class AsyncIterator not directly constructable")};NG.prototype=hd;uwe(hd,swe)||lwe(hd,swe,"AsyncIterator");(cwe||!uwe(hd,"constructor")||hd.constructor===Object)&&lwe(hd,"constructor",NG);FRt({global:!0,constructor:!0,forced:cwe},{AsyncIterator:NG})});var Mg=A(($Sr,_we)=>{"use strict";var GRt=Dt(),AR=od(),fwe=kt(),$Rt=Zi(),HRt=_o(),WRt=Wl(),ZRt=fr(),dwe=xn(),YRt=gr(),KRt=Wi(),XRt=q_(),kG=ko(),pwe=Xo(),Wc=YRt("Promise"),QRt=ZRt("toStringTag"),mwe="AsyncIteratorHelper",gwe="WrapForValidAsyncIterator",JRt=dwe.set,vwe=function(r){var e=!r,t=dwe.getterFor(r?gwe:mwe),n=function(i){var o=AR(function(){return t(i)}),l=o.error,c=o.value;return l||e&&c.done?{exit:!0,value:l?Wc.reject(c):Wc.resolve(kG(void 0,!0))}:{exit:!1,value:c}};return WRt($Rt(XRt),{next:function(){var o=n(this),l=o.value;if(o.exit)return l;var c=AR(function(){return fwe(l.nextHandler(Wc))}),p=c.error,g=c.value;return p&&(l.done=!0),p?Wc.reject(g):Wc.resolve(g)},return:function(){var i=n(this),o=i.value;if(i.exit)return o;o.done=!0;var l=o.iterator,c,p,g=AR(function(){if(o.inner)try{pwe(o.inner.iterator,"normal")}catch(_){return pwe(l,"throw",_)}return KRt(l,"return")});return c=p=g.value,g.error?Wc.reject(p):c===void 0?Wc.resolve(kG(void 0,!0)):(g=AR(function(){return GRt(c,l)}),p=g.value,g.error?Wc.reject(p):r?Wc.resolve(p):Wc.resolve(p).then(function(_){return fwe(_),kG(void 0,!0)}))}})},eOt=vwe(!0),ywe=vwe(!1);HRt(ywe,QRt,"Async Iterator Helper");_we.exports=function(r,e){var t=function(i,o){o?(o.iterator=i.iterator,o.next=i.next):o=i,o.type=e?gwe:mwe,o.nextHandler=r,o.counter=0,o.done=!1,JRt(this,o)};return t.prototype=e?eOt:ywe,t}});var jG=A((HSr,bwe)=>{"use strict";var tOt=Dt(),rOt=vr(),qG=kt(),nOt=lr(),iOt=xi(),oOt=Mg(),xwe=ko(),aOt=j_(),sOt=oOt(function(r){var e=this,t=e.iterator,n=e.mapper;return new r(function(i,o){var l=function(p){e.done=!0,o(p)},c=function(p){aOt(t,l,p,l)};r.resolve(qG(tOt(e.next,t))).then(function(p){try{if(qG(p).done)e.done=!0,i(xwe(void 0,!0));else{var g=p.value;try{var _=n(g,e.counter++),x=function(T){i(xwe(T,!1))};nOt(_)?r.resolve(_).then(x,c):x(_)}catch(T){c(T)}}}catch(T){l(T)}},l)})});bwe.exports=function(e){return qG(this),rOt(e),new sOt(iOt(this),{mapper:e})}});var FG=A((WSr,wwe)=>{"use strict";var lOt=Dt(),uOt=jG(),cOt=function(r,e){return[e,r]};wwe.exports=function(){return lOt(uOt,this,cOt)}});var Ewe=A(()=>{"use strict";var hOt=ae(),fOt=FG();hOt({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:fOt})});var Mwe=A(()=>{"use strict";var pOt=Dt(),dOt=Sn(),mOt=gr(),gOt=Wi(),vOt=Nr(),yOt=fr(),Swe=q_(),Twe=yOt("asyncDispose"),Iwe=mOt("Promise");vOt(Swe,Twe)||dOt(Swe,Twe,function(){var r=this;return new Iwe(function(e,t){var n=gOt(r,"return");n?Iwe.resolve(pOt(n,r)).then(function(){e(void 0)},t):e(void 0)})})});var Cwe=A(()=>{"use strict";var _Ot=ae(),xOt=Dt(),zG=kt(),bOt=xi(),wOt=f_(),EOt=p_(),SOt=Mg(),Awe=ko(),TOt=SOt(function(r){var e=this;return new r(function(t,n){var i=function(l){e.done=!0,n(l)},o=function(){try{r.resolve(zG(xOt(e.next,e.iterator))).then(function(l){try{zG(l).done?(e.done=!0,t(Awe(void 0,!0))):e.remaining?(e.remaining--,o()):t(Awe(l.value,!1))}catch(c){i(c)}},i)}catch(l){i(l)}};o()})});_Ot({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{drop:function(e){zG(this);var t=EOt(wOt(+e));return new TOt(bOt(this),{remaining:t})}})});var Pwe=A(()=>{"use strict";var IOt=ae(),MOt=Ig().every;IOt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{every:function(e){return MOt(this,e)}})});var Owe=A(()=>{"use strict";var AOt=ae(),COt=Dt(),POt=vr(),BG=kt(),ROt=lr(),OOt=xi(),LOt=Mg(),Rwe=ko(),DOt=j_(),NOt=LOt(function(r){var e=this,t=e.iterator,n=e.predicate;return new r(function(i,o){var l=function(g){e.done=!0,o(g)},c=function(g){DOt(t,l,g,l)},p=function(){try{r.resolve(BG(COt(e.next,t))).then(function(g){try{if(BG(g).done)e.done=!0,i(Rwe(void 0,!0));else{var _=g.value;try{var x=n(_,e.counter++),T=function(C){C?i(Rwe(_,!1)):p()};ROt(x)?r.resolve(x).then(T,c):T(x)}catch(C){c(C)}}}catch(C){l(C)}},l)}catch(g){l(g)}};p()})});AOt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{filter:function(e){return BG(this),POt(e),new NOt(OOt(this),{predicate:e})}})});var Lwe=A(()=>{"use strict";var kOt=ae(),qOt=Ig().find;kOt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{find:function(e){return qOt(this,e)}})});var UG=A((aTr,kwe)=>{"use strict";var jOt=Dt(),FOt=Rr(),Dwe=kt(),Nwe=xi(),zOt=Fc(),BOt=Wi(),UOt=fr(),VOt=vE(),GOt=UOt("asyncIterator");kwe.exports=function(r){var e=Dwe(r),t=!0,n=BOt(e,GOt),i;return FOt(n)||(n=zOt(e),t=!1),n!==void 0?i=jOt(n,e):(i=e,t=!0),Dwe(i),Nwe(t?i:new VOt(Nwe(i)))}});var Fwe=A(()=>{"use strict";var $Ot=ae(),qwe=Dt(),HOt=vr(),xE=kt(),WOt=lr(),ZOt=xi(),YOt=Mg(),jwe=ko(),KOt=UG(),XOt=j_(),QOt=YOt(function(r){var e=this,t=e.iterator,n=e.mapper;return new r(function(i,o){var l=function(_){e.done=!0,o(_)},c=function(_){XOt(t,l,_,l)},p=function(){try{r.resolve(xE(qwe(e.next,t))).then(function(_){try{if(xE(_).done)e.done=!0,i(jwe(void 0,!0));else{var x=_.value;try{var T=n(x,e.counter++),C=function(D){try{e.inner=KOt(D),g()}catch(F){c(F)}};WOt(T)?r.resolve(T).then(C,c):C(T)}catch(D){c(D)}}}catch(D){l(D)}},l)}catch(_){l(_)}},g=function(){var _=e.inner;if(_)try{r.resolve(xE(qwe(_.next,_.iterator))).then(function(x){try{xE(x).done?(e.inner=null,p()):i(jwe(x.value,!1))}catch(T){c(T)}},c)}catch(x){c(x)}else p()};g()})});$Ot({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{flatMap:function(e){return xE(this),HOt(e),new QOt(ZOt(this),{mapper:e,inner:null})}})});var zwe=A(()=>{"use strict";var JOt=ae(),eLt=Ig().forEach;JOt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{forEach:function(e){return eLt(this,e)}})});var VG=A((hTr,Bwe)=>{"use strict";var tLt=Dt(),rLt=Mg();Bwe.exports=rLt(function(){return tLt(this.next,this.iterator)},!0)});var Uwe=A(()=>{"use strict";var nLt=ae(),iLt=Ur(),oLt=pa(),aLt=UG(),sLt=q_(),lLt=VG();nLt({target:"AsyncIterator",stat:!0,forced:!0},{from:function(e){var t=aLt(typeof e=="string"?iLt(e):e);return oLt(sLt,t.iterator)?t.iterator:new lLt(t)}})});var Vwe=A(()=>{"use strict";var uLt=ae(),cLt=FG();uLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:cLt})});var Gwe=A(()=>{"use strict";var hLt=ae(),fLt=jG();hLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{map:fLt})});var $we=A(()=>{"use strict";var pLt=ae(),dLt=Dt(),mLt=vr(),GG=kt(),gLt=lr(),vLt=gr(),yLt=xi(),_Lt=j_(),$G=vLt("Promise"),xLt=TypeError;pLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{reduce:function(e){GG(this),mLt(e);var t=yLt(this),n=t.iterator,i=t.next,o=arguments.length<2,l=o?void 0:arguments[1],c=0;return new $G(function(p,g){var _=function(T){_Lt(n,g,T,g)},x=function(){try{$G.resolve(GG(dLt(i,n))).then(function(T){try{if(GG(T).done)o?g(new xLt("Reduce of empty iterator with no initial value")):p(l);else{var C=T.value;if(o)o=!1,l=C,x();else try{var D=e(l,C,c),F=function(O){l=O,x()};gLt(D)?$G.resolve(D).then(F,_):F(D)}catch(O){_(O)}}c++}catch(O){g(O)}},g)}catch(T){g(T)}};x()})}})});var Hwe=A(()=>{"use strict";var bLt=ae(),wLt=Ig().some;bLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{some:function(e){return wLt(this,e)}})});var Ywe=A(()=>{"use strict";var ELt=ae(),Wwe=Dt(),Zwe=kt(),SLt=xi(),TLt=f_(),ILt=p_(),MLt=Mg(),HG=ko(),ALt=MLt(function(r){var e=this,t=e.iterator,n;if(!e.remaining--){var i=HG(void 0,!0);return e.done=!0,n=t.return,n!==void 0?r.resolve(Wwe(n,t,void 0)).then(function(){return i}):i}return r.resolve(Wwe(e.next,t)).then(function(o){return Zwe(o).done?(e.done=!0,HG(void 0,!0)):HG(o.value,!1)}).then(null,function(o){throw e.done=!0,o})});ELt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{take:function(e){Zwe(this);var t=ILt(TLt(+e));return new ALt(SLt(this),{remaining:t})}})});var Kwe=A(()=>{"use strict";var CLt=ae(),PLt=Ig().toArray;CLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{toArray:function(){return PLt(this,void 0,[])}})});var PR=A((ITr,r1e)=>{"use strict";var Qwe=xn(),RLt=Yp(),WG=ko(),OLt=Rs(),LLt=lr(),DLt=ci(),Jwe=ar(),bE="Incorrect Iterator.range arguments",YG="NumericRangeIterator",NLt=Qwe.set,e1e=Qwe.getterFor(YG),Xwe=RangeError,ZG=TypeError,t1e=RLt(function(e,t,n,i,o,l){if(typeof e!=i||t!==1/0&&t!==-1/0&&typeof t!=i)throw new ZG(bE);if(e===1/0||e===-1/0)throw new Xwe(bE);var c=t>e,p=!1,g;if(n===void 0)g=void 0;else if(LLt(n))g=n.step,p=!!n.inclusive;else if(typeof n==i)g=n;else throw new ZG(bE);if(OLt(g)&&(g=c?l:-l),typeof g!=i)throw new ZG(bE);if(g===1/0||g===-1/0||g===o&&e!==t)throw new Xwe(bE);var _=e!==e||t!==t||g!==g||t>e!=g>o;NLt(this,{type:YG,start:e,end:t,step:g,inclusive:p,hitsEnd:_,currentCount:o,zero:o}),Jwe||(this.start=e,this.end=t,this.step=g,this.inclusive=p)},YG,function(){var e=e1e(this);if(e.hitsEnd)return WG(void 0,!0);var t=e.start,n=e.end,i=e.step,o=t+i*e.currentCount++;o===n&&(e.hitsEnd=!0);var l=e.inclusive,c;return n>t?c=l?o>n:o>=n:c=l?n>o:n>=o,c?(e.hitsEnd=!0,WG(void 0,!0)):WG(o,!1)}),CR=function(r){DLt(t1e.prototype,r,{get:function(){return e1e(this)[r]},set:function(){},configurable:!0,enumerable:!1})};Jwe&&(CR("start"),CR("end"),CR("inclusive"),CR("step"));r1e.exports=t1e});var n1e=A(()=>{"use strict";var kLt=ae(),qLt=PR();typeof BigInt=="function"&&kLt({target:"BigInt",stat:!0,forced:!0},{range:function(e,t,n){return new qLt(e,t,n,"bigint",BigInt(0),BigInt(1))}})});var KG=A((CTr,s1e)=>{"use strict";gP();mR();var a1e=gr(),jLt=Zi(),i1e=lr(),FLt=Object,zLt=TypeError,BLt=a1e("Map"),ULt=a1e("WeakMap"),RR=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=jLt(null)};RR.prototype.get=function(r,e){return this[r]||(this[r]=e())};RR.prototype.next=function(r,e,t){var n=t?this.objectsByIndex[r]||(this.objectsByIndex[r]=new ULt):this.primitives||(this.primitives=new BLt),i=n.get(e);return i||n.set(e,i=new RR),i};var o1e=new RR;s1e.exports=function(){var r=o1e,e=arguments.length,t,n;for(t=0;t<e;t++)i1e(n=arguments[t])&&(r=r.next(t,n,!0));if(this===FLt&&r===o1e)throw new zLt("Composite keys must contain a non-primitive component");for(t=0;t<e;t++)i1e(n=arguments[t])||(r=r.next(t,n,!1));return r}});var u1e=A(()=>{"use strict";var VLt=ae(),GLt=da(),$Lt=KG(),HLt=gr(),l1e=Zi(),WLt=Object,ZLt=function(){var r=HLt("Object","freeze");return r?r(l1e(null)):l1e(null)};VLt({global:!0,forced:!0},{compositeKey:function(){return GLt($Lt,WLt,arguments).get("object",ZLt)}})});var h1e=A(()=>{"use strict";var YLt=ae(),KLt=KG(),c1e=gr(),XLt=da();YLt({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?c1e("Symbol").for(arguments[0]):XLt(KLt,null,arguments).get("symbol",c1e("Symbol"))}})});var f1e=A(()=>{"use strict";WB()});var p1e=A(()=>{"use strict";var QLt=ae(),JLt=pt(),e2t=JLt(DataView.prototype.getUint8);QLt({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(e){return e2t(this,e)}})});var d1e=A(()=>{"use strict";XB()});var m1e=A(()=>{"use strict";var t2t=ae(),r2t=pt(),n2t=ZB(),i2t=o_(),o2t=zV(),a2t=r2t(DataView.prototype.setUint8);t2t({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(e,t){n2t(this);var n=i2t(e);return a2t(this,n,o2t(t))}})});var x1e=A(()=>{"use strict";var s2t=ae(),LR=ar(),l2t=gr(),g1e=vr(),u2t=La(),v1e=Sn(),c2t=Wl(),h2t=ci(),y1e=fr(),_1e=xn(),XG=RG(),f2t=l2t("SuppressedError"),p2t=ReferenceError,d2t=y1e("dispose"),m2t=y1e("toStringTag"),NR="DisposableStack",g2t=_1e.set,DR=_1e.getterFor(NR),QG="sync-dispose",wE="disposed",v2t="pending",OR=function(r){var e=DR(r);if(e.state===wE)throw new p2t(NR+" already disposed");return e},JG=function(){g2t(u2t(this,z_),{type:NR,state:v2t,stack:[]}),LR||(this.disposed=!1)},z_=JG.prototype;c2t(z_,{dispose:function(){var e=DR(this);if(e.state!==wE){e.state=wE,LR||(this.disposed=!0);for(var t=e.stack,n=t.length,i=!1,o;n;){var l=t[--n];t[n]=null;try{l()}catch(c){i?o=new f2t(c,o):(i=!0,o=c)}}if(e.stack=null,i)throw o}},use:function(e){return XG(OR(this),e,QG),e},adopt:function(e,t){var n=OR(this);return g1e(t),XG(n,void 0,QG,function(){t(e)}),e},defer:function(e){var t=OR(this);g1e(e),XG(t,void 0,QG,e)},move:function(){var e=OR(this),t=new JG;return DR(t).stack=e.stack,e.stack=[],e.state=wE,LR||(this.disposed=!0),t}});LR&&h2t(z_,"disposed",{configurable:!0,get:function(){return DR(this).state===wE}});v1e(z_,d2t,z_.dispose,{name:"dispose"});v1e(z_,m2t,NR,{nonWritable:!0});s2t({global:!0,constructor:!0},{DisposableStack:JG})});var S1e=A(()=>{"use strict";var y2t=ae(),w1e=gr(),_2t=lr(),x2t=os(),b2t=yt(),E1e="Error",t6="DOMException",w2t=Object.setPrototypeOf||{}.__proto__,b1e=w1e(t6),e6=Error,kR=e6.isError,E2t=!kR||!w2t||b2t(function(){return b1e&&!kR(new b1e(t6))||!kR(new e6(E1e,{cause:function(){}}))||kR(w1e("Object","create")(e6.prototype))});y2t({target:"Error",stat:!0,sham:!0,forced:E2t},{isError:function(e){if(!_2t(e))return!1;var t=x2t(e);return t===E1e||t===t6}})});var r6=A((HTr,T1e)=>{"use strict";var S2t=pt(),T2t=vr();T1e.exports=function(){return S2t(T2t(this))}});var I1e=A(()=>{"use strict";var I2t=ae(),M2t=r6();I2t({target:"Function",proto:!0,forced:!0},{demethodize:M2t})});var A1e=A(()=>{"use strict";var A2t=ae(),C2t=pt(),P2t=Rr(),R2t=i1(),O2t=Nr(),L2t=ar(),D2t=Object.getOwnPropertyDescriptor,M1e=/^\s*class\b/,N2t=C2t(M1e.exec),k2t=function(r){try{if(!L2t||!N2t(M1e,R2t(r)))return!1}catch(t){}var e=D2t(r,"prototype");return!!e&&O2t(e,"writable")&&!e.writable};A2t({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(e){return P2t(e)&&!k2t(e)}})});var C1e=A(()=>{"use strict";var q2t=ae(),j2t=Hu();q2t({target:"Function",stat:!0,forced:!0},{isConstructor:j2t})});var O1e=A(()=>{"use strict";var F2t=fr(),z2t=Wn().f,P1e=F2t("metadata"),R1e=Function.prototype;R1e[P1e]===void 0&&z2t(R1e,P1e,{value:null})});var L1e=A(()=>{"use strict";var B2t=ae(),U2t=r6();B2t({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:U2t})});var D1e=A(()=>{"use strict";EU()});var N1e=A(()=>{"use strict";AU()});var n6=A((sIr,k1e)=>{"use strict";hP();var V2t=Dt(),G2t=Zp().IteratorPrototype.map,$2t=function(r,e){return[e,r]};k1e.exports=function(){return V2t(G2t,this,$2t)}});var q1e=A(()=>{"use strict";var H2t=ae(),W2t=n6();H2t({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:W2t})});var z1e=A(()=>{"use strict";var Z2t=ae(),j1e=Dt(),Y2t=vr(),F1e=kt(),K2t=Fc(),X2t=nd(),Q2t=ko(),J2t=Array,eDt=X2t(function(){for(;;){var r=this.iterator;if(!r){var e=this.nextIterableIndex++,t=this.iterables;if(e>=t.length)return this.done=!0,Q2t(void 0,!0);var n=t[e];this.iterables[e]=null,r=this.iterator=j1e(n.method,n.iterable),this.next=r.next}var i=F1e(j1e(this.next,r));if(i.done){this.iterator=null,this.next=null;continue}return i}},!1,!0);Z2t({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var e=arguments.length,t=J2t(e),n=0;n<e;n++){var i=F1e(arguments[n]);t[n]={iterable:i,method:Y2t(K2t(i))}}return new eDt({iterables:t,nextIterableIndex:0,iterator:null,next:null})}})});var V1e=A(()=>{"use strict";var tDt=Dt(),rDt=Sn(),nDt=Wi(),iDt=Nr(),oDt=fr(),B1e=Zp().IteratorPrototype,U1e=oDt("dispose");iDt(B1e,U1e)||rDt(B1e,U1e,function(){var r=nDt(this,"return");r&&tDt(r,this)})});var G1e=A(()=>{"use strict";LU()});var $1e=A(()=>{"use strict";NU()});var H1e=A(()=>{"use strict";qU()});var W1e=A(()=>{"use strict";FU()});var Z1e=A(()=>{"use strict";$U()});var Y1e=A(()=>{"use strict";WU()});var K1e=A(()=>{"use strict";ZU()});var X1e=A(()=>{"use strict";var aDt=ae(),sDt=n6();aDt({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:sDt})});var Q1e=A(()=>{"use strict";hP()});var eEe=A(()=>{"use strict";var lDt=ae(),J1e=PR(),uDt=TypeError;lDt({target:"Iterator",stat:!0,forced:!0},{range:function(e,t,n){if(typeof e=="number")return new J1e(e,t,n,"number",0,1);if(typeof e=="bigint")return new J1e(e,t,n,"bigint",BigInt(0),BigInt(1));throw new uDt("Incorrect Iterator.range arguments")}})});var tEe=A(()=>{"use strict";XU()});var rEe=A(()=>{"use strict";JU()});var nEe=A(()=>{"use strict";t3()});var iEe=A(()=>{"use strict";r3()});var aEe=A(()=>{"use strict";var cDt=ae(),hDt=kt(),fDt=vE(),pDt=VG(),oEe=xi();cDt({target:"Iterator",proto:!0,real:!0,forced:!0},{toAsync:function(){return new pDt(oEe(new fDt(oEe(hDt(this)))))}})});var i6=A((GIr,sEe)=>{"use strict";var dDt=yt();sEe.exports=!dDt(function(){var r="9007199254740993",e=JSON.rawJSON(r);return!JSON.isRawJSON(e)||JSON.stringify(e)!==r})});var o6=A(($Ir,lEe)=>{"use strict";var mDt=lr(),gDt=xn().get;lEe.exports=function(e){if(!mDt(e))return!1;var t=gDt(e);return!!t&&t.type==="RawJSON"}});var uEe=A(()=>{"use strict";var vDt=ae(),yDt=i6(),_Dt=o6();vDt({target:"JSON",stat:!0,forced:!yDt},{isRawJSON:_Dt})});var s6=A((ZIr,pEe)=>{"use strict";var a6=pt(),xDt=Nr(),qR=SyntaxError,bDt=parseInt,wDt=String.fromCharCode,EDt=a6("".charAt),cEe=a6("".slice),hEe=a6(/./.exec),fEe={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},SDt=/^[\da-f]{4}$/i,TDt=/^[\u0000-\u001F]$/;pEe.exports=function(r,e){for(var t=!0,n="";e<r.length;){var i=EDt(r,e);if(i==="\\"){var o=cEe(r,e,e+2);if(xDt(fEe,o))n+=fEe[o],e+=2;else if(o==="\\u"){e+=2;var l=cEe(r,e,e+4);if(!hEe(SDt,l))throw new qR("Bad Unicode escape at: "+e);n+=wDt(bDt(l,16)),e+=4}else throw new qR("Unknown escape sequence: \""+o+"\"")}else if(i==="\""){t=!1,e++;break}else{if(hEe(TDt,i))throw new qR("Bad control character in string literal at: "+e);n+=i,e++}}if(t)throw new qR("Unterminated string at: "+e);return{value:n,end:e}}});var bEe=A(()=>{"use strict";var IDt=ae(),MDt=ar(),m6=Lt(),ADt=gr(),jR=pt(),CDt=Dt(),_Ee=Rr(),PDt=lr(),RDt=$u(),ODt=Nr(),LDt=wr(),dEe=en(),f6=$l(),xEe=yt(),DDt=s6(),NDt=jp(),mEe=m6.JSON,kDt=m6.Number,B_=m6.SyntaxError,g6=mEe&&mEe.parse,qDt=ADt("Object","keys"),jDt=Object.getOwnPropertyDescriptor,ga=jR("".charAt),l6=jR("".slice),u6=jR(/./.exec),gEe=jR([].push),c6=/^\d$/,FDt=/^[1-9]$/,zDt=/^[\d-]$/,EE=/^[\t\n\r ]$/,h6=0,vEe=1,BDt=function(r,e){r=LDt(r);var t=new d6(r,0,""),n=t.parse(),i=n.value,o=t.skip(EE,n.end);if(o<r.length)throw new B_("Unexpected extra character: \""+ga(r,o)+"\" after the parsed data at: "+o);return _Ee(e)?p6({"":i},"",e,n):i},p6=function(r,e,t,n){var i=r[e],o=n&&i===n.value,l=o&&typeof n.source=="string"?{source:n.source}:{},c,p,g,_,x;if(PDt(i)){var T=RDt(i),C=o?n.nodes:T?[]:{};if(T)for(c=C.length,g=dEe(i),_=0;_<g;_++)yEe(i,_,p6(i,""+_,t,_<c?C[_]:void 0));else for(p=qDt(i),g=dEe(p),_=0;_<g;_++)x=p[_],yEe(i,x,p6(i,x,t,ODt(C,x)?C[x]:void 0))}return CDt(t,r,e,i,l)},yEe=function(r,e,t){if(MDt){var n=jDt(r,e);if(n&&!n.configurable)return}t===void 0?delete r[e]:f6(r,e,t)},UDt=function(r,e,t,n){this.value=r,this.end=e,this.source=t,this.nodes=n},d6=function(r,e){this.source=r,this.index=e};d6.prototype={fork:function(r){return new d6(this.source,r)},parse:function(){var r=this.source,e=this.skip(EE,this.index),t=this.fork(e),n=ga(r,e);if(u6(zDt,n))return t.number();switch(n){case"{":return t.object();case"[":return t.array();case"\"":return t.string();case"t":return t.keyword(!0);case"f":return t.keyword(!1);case"n":return t.keyword(null)}throw new B_("Unexpected character: \""+n+"\" at: "+e)},node:function(r,e,t,n,i){return new UDt(e,n,r?null:l6(this.source,t,n),i)},object:function(){for(var r=this.source,e=this.index+1,t=!1,n={},i={};e<r.length;){if(e=this.until(["\"","}"],e),ga(r,e)==="}"&&!t){e++;break}var o=this.fork(e).string(),l=o.value;e=o.end,e=this.until([":"],e)+1,e=this.skip(EE,e),o=this.fork(e).parse(),f6(i,l,o),f6(n,l,o.value),e=this.until([",","}"],o.end);var c=ga(r,e);if(c===",")t=!0,e++;else if(c==="}"){e++;break}}return this.node(vEe,n,this.index,e,i)},array:function(){for(var r=this.source,e=this.index+1,t=!1,n=[],i=[];e<r.length;){if(e=this.skip(EE,e),ga(r,e)==="]"&&!t){e++;break}var o=this.fork(e).parse();if(gEe(i,o),gEe(n,o.value),e=this.until([",","]"],o.end),ga(r,e)===",")t=!0,e++;else if(ga(r,e)==="]"){e++;break}}return this.node(vEe,n,this.index,e,i)},string:function(){var r=this.index,e=DDt(this.source,this.index+1);return this.node(h6,e.value,r,e.end)},number:function(){var r=this.source,e=this.index,t=e;if(ga(r,t)==="-"&&t++,ga(r,t)==="0")t++;else if(u6(FDt,ga(r,t)))t=this.skip(c6,t+1);else throw new B_("Failed to parse number at: "+t);if(ga(r,t)==="."&&(t=this.skip(c6,t+1)),ga(r,t)==="e"||ga(r,t)==="E"){t++,(ga(r,t)==="+"||ga(r,t)==="-")&&t++;var n=t;if(t=this.skip(c6,t),n===t)throw new B_("Failed to parse number's exponent value at: "+t)}return this.node(h6,kDt(l6(r,e,t)),e,t)},keyword:function(r){var e=""+r,t=this.index,n=t+e.length;if(l6(this.source,t,n)!==e)throw new B_("Failed to parse value at: "+t);return this.node(h6,r,t,n)},skip:function(r,e){for(var t=this.source;e<t.length&&u6(r,ga(t,e));e++);return e},until:function(r,e){e=this.skip(EE,e);for(var t=ga(this.source,e),n=0;n<r.length;n++)if(r[n]===t)return e;throw new B_("Unexpected character: \""+t+"\" at: "+e)}};var VDt=xEe(function(){var r="9007199254740993",e;return g6(r,function(t,n,i){e=i.source}),e!==r}),GDt=NDt&&!xEe(function(){return 1/g6("-0 \t")!==-1/0});IDt({target:"JSON",stat:!0,forced:VDt},{parse:function(e,t){return GDt&&!_Ee(t)?g6(e):BDt(e,t)}})});var CEe=A(()=>{"use strict";var MEe=ae(),$Dt=af(),AEe=i6(),FR=gr(),HDt=Dt(),x6=pt(),WDt=Rr(),ZDt=o6(),YDt=wr(),KDt=$l(),XDt=s6(),QDt=P4(),JDt=zp(),eNt=xn().set,tNt=String,wEe=SyntaxError,rNt=FR("JSON","parse"),EEe=FR("JSON","stringify"),nNt=FR("Object","create"),iNt=FR("Object","freeze"),y6=x6("".charAt),v6=x6("".slice),oNt=x6([].push),_6=JDt(),SEe=_6.length,TEe="Unacceptable as raw JSON",IEe=function(r){return r===" "||r==="\t"||r===`
`||r==="\r"};MEe({target:"JSON",stat:!0,forced:!AEe},{rawJSON:function(e){var t=YDt(e);if(t===""||IEe(y6(t,0))||IEe(y6(t,t.length-1)))throw new wEe(TEe);var n=rNt(t);if(typeof n=="object"&&n!==null)throw new wEe(TEe);var i=nNt(null);return eNt(i,{type:"RawJSON"}),KDt(i,"rawJSON",t),$Dt?iNt(i):i}});EEe&&MEe({target:"JSON",stat:!0,arity:3,forced:!AEe},{stringify:function(e,t,n){var i=QDt(t),o=[],l=EEe(e,function(C,D){var F=WDt(i)?HDt(i,this,tNt(C),D):D;return ZDt(F)?_6+(oNt(o,F.rawJSON)-1):F},n);if(typeof l!="string")return l;for(var c="",p=l.length,g=0;g<p;g++){var _=y6(l,g);if(_==="\""){var x=XDt(l,++g).end-1,T=v6(l,g,x);c+=v6(T,0,SEe)===_6?o[v6(T,SEe)]:"\""+T+"\"",g=x}else c+=_}return c}})});var va=A((JIr,PEe)=>{"use strict";var aNt=qo().has;PEe.exports=function(r){return aNt(r),r}});var REe=A(()=>{"use strict";var sNt=ae(),lNt=va(),uNt=qo().remove;sNt({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=lNt(this),t=!0,n,i=0,o=arguments.length;i<o;i++)n=uNt(e,arguments[i]),t=t&&n;return!!t}})});var LEe=A(()=>{"use strict";var cNt=ae(),hNt=va(),b6=qo(),fNt=b6.get,pNt=b6.has,OEe=b6.set;cNt({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(e,t){var n=hNt(this),i,o;return pNt(n,e)?(i=fNt(n,e),"update"in t&&(i=t.update(i,e,n),OEe(n,e,i)),i):(o=t.insert(e,n),OEe(n,e,o),o)}})});var DEe=A(()=>{"use strict";var dNt=ae(),mNt=kn(),gNt=va(),vNt=Zl();dNt({target:"Map",proto:!0,real:!0,forced:!0},{every:function(e){var t=gNt(this),n=mNt(e,arguments.length>1?arguments[1]:void 0);return vNt(t,function(i,o){if(!n(i,o,t))return!1},!0)!==!1}})});var kEe=A(()=>{"use strict";var yNt=ae(),_Nt=kn(),xNt=va(),NEe=qo(),bNt=Zl(),wNt=NEe.Map,ENt=NEe.set;yNt({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(e){var t=xNt(this),n=_Nt(e,arguments.length>1?arguments[1]:void 0),i=new wNt;return bNt(t,function(o,l){n(o,l,t)&&ENt(i,l,o)}),i}})});var qEe=A(()=>{"use strict";var SNt=ae(),TNt=kn(),INt=va(),MNt=Zl();SNt({target:"Map",proto:!0,real:!0,forced:!0},{find:function(e){var t=INt(this),n=TNt(e,arguments.length>1?arguments[1]:void 0),i=MNt(t,function(o,l){if(n(o,l,t))return{value:o}},!0);return i&&i.value}})});var jEe=A(()=>{"use strict";var ANt=ae(),CNt=kn(),PNt=va(),RNt=Zl();ANt({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(e){var t=PNt(this),n=CNt(e,arguments.length>1?arguments[1]:void 0),i=RNt(t,function(o,l){if(n(o,l,t))return{key:l}},!0);return i&&i.key}})});var SE=A((fMr,FEe)=>{"use strict";var ONt=kn(),LNt=kt(),DNt=Ur(),NNt=Ii();FEe.exports=function(r,e,t){return function(i){var o=DNt(i),l=arguments.length,c=l>1?arguments[1]:void 0,p=c!==void 0,g=p?ONt(c,l>2?arguments[2]:void 0):void 0,_=new r,x=0;return NNt(o,function(T){var C=p?g(T,x++):T;t?e(_,LNt(C)[0],C[1]):e(_,C)}),_}}});var BEe=A(()=>{"use strict";var kNt=ae(),zEe=qo(),qNt=SE();kNt({target:"Map",stat:!0,forced:!0},{from:qNt(zEe.Map,zEe.set,!0)})});var UEe=A(()=>{"use strict";var jNt=ae(),FNt=va(),w6=qo(),zNt=w6.get,BNt=w6.has,UNt=w6.set;jNt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(e,t){return BNt(FNt(this),e)?zNt(this,e):(UNt(this,e,t),t)}})});var VEe=A(()=>{"use strict";var VNt=ae(),GNt=vr(),$Nt=va(),E6=qo(),HNt=E6.get,WNt=E6.has,ZNt=E6.set;VNt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(e,t){if($Nt(this),GNt(t),WNt(this,e))return HNt(this,e);e===0&&1/e===-1/0&&(e=0);var n=t(e);return ZNt(this,e,n),n}})});var GEe=A(()=>{"use strict";c3()});var HEe=A((bMr,$Ee)=>{"use strict";$Ee.exports=function(r,e){return r===e||r!==r&&e!==e}});var WEe=A(()=>{"use strict";var YNt=ae(),KNt=HEe(),XNt=va(),QNt=Zl();YNt({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(e){return QNt(XNt(this),function(t){if(KNt(t,e))return!0},!0)===!0}})});var YEe=A(()=>{"use strict";var JNt=ae(),ekt=Dt(),tkt=Ii(),rkt=Rr(),ZEe=vr(),nkt=qo().Map;JNt({target:"Map",stat:!0,forced:!0},{keyBy:function(e,t){var n=rkt(this)?this:nkt,i=new n;ZEe(t);var o=ZEe(i.set);return tkt(e,function(l){ekt(o,i,t(l),l)}),i}})});var KEe=A(()=>{"use strict";var ikt=ae(),okt=va(),akt=Zl();ikt({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(e){var t=akt(okt(this),function(n,i){if(n===e)return{key:i}},!0);return t&&t.key}})});var QEe=A(()=>{"use strict";var skt=ae(),lkt=kn(),ukt=va(),XEe=qo(),ckt=Zl(),hkt=XEe.Map,fkt=XEe.set;skt({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(e){var t=ukt(this),n=lkt(e,arguments.length>1?arguments[1]:void 0),i=new hkt;return ckt(t,function(o,l){fkt(i,n(o,l,t),o)}),i}})});var eSe=A(()=>{"use strict";var pkt=ae(),dkt=kn(),mkt=va(),JEe=qo(),gkt=Zl(),vkt=JEe.Map,ykt=JEe.set;pkt({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(e){var t=mkt(this),n=dkt(e,arguments.length>1?arguments[1]:void 0),i=new vkt;return gkt(t,function(o,l){ykt(i,l,n(o,l,t))}),i}})});var tSe=A(()=>{"use strict";var _kt=ae(),xkt=va(),bkt=Ii(),wkt=qo().set;_kt({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(e){for(var t=xkt(this),n=arguments.length,i=0;i<n;)bkt(arguments[i++],function(o,l){wkt(t,o,l)},{AS_ENTRIES:!0});return t}})});var TE=A((DMr,rSe)=>{"use strict";var Ekt=kt();rSe.exports=function(r,e,t){return function(){for(var i=new r,o=arguments.length,l=0;l<o;l++){var c=arguments[l];t?e(i,Ekt(c)[0],c[1]):e(i,c)}return i}}});var iSe=A(()=>{"use strict";var Skt=ae(),nSe=qo(),Tkt=TE();Skt({target:"Map",stat:!0,forced:!0},{of:Tkt(nSe.Map,nSe.set,!0)})});var oSe=A(()=>{"use strict";var Ikt=ae(),Mkt=vr(),Akt=va(),Ckt=Zl(),Pkt=TypeError;Ikt({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=Akt(this),n=arguments.length<2,i=n?void 0:arguments[1];if(Mkt(e),Ckt(t,function(o,l){n?(n=!1,i=o):i=e(i,o,l,t)}),n)throw new Pkt("Reduce of empty map with no initial value");return i}})});var aSe=A(()=>{"use strict";var Rkt=ae(),Okt=kn(),Lkt=va(),Dkt=Zl();Rkt({target:"Map",proto:!0,real:!0,forced:!0},{some:function(e){var t=Lkt(this),n=Okt(e,arguments.length>1?arguments[1]:void 0);return Dkt(t,function(i,o){if(n(i,o,t))return!0},!0)===!0}})});var lSe=A(()=>{"use strict";var Nkt=ae(),sSe=vr(),kkt=va(),S6=qo(),qkt=TypeError,jkt=S6.get,Fkt=S6.has,zkt=S6.set;Nkt({target:"Map",proto:!0,real:!0,forced:!0},{update:function(e,t){var n=kkt(this),i=arguments.length;sSe(t);var o=Fkt(n,e);if(!o&&i<3)throw new qkt("Updating absent value");var l=o?jkt(n,e):sSe(i>2?arguments[2]:void 0)(e,n);return zkt(n,e,t(l,e,n)),n}})});var UR=A((VMr,uSe)=>{"use strict";var zR=Dt(),T6=vr(),BR=Rr(),Bkt=kt(),Ukt=TypeError;uSe.exports=function(e,t){var n=Bkt(this),i=T6(n.get),o=T6(n.has),l=T6(n.set),c=arguments.length>2?arguments[2]:void 0,p;if(!BR(t)&&!BR(c))throw new Ukt("At least one callback required");return zR(o,n,e)?(p=zR(i,n,e),BR(t)&&(p=t(p),zR(l,n,e,p))):BR(c)&&(p=c(),zR(l,n,e,p)),p}});var cSe=A(()=>{"use strict";var Vkt=ae(),Gkt=UR();Vkt({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:Gkt})});var hSe=A(()=>{"use strict";var $kt=ae(),Hkt=UR();$kt({target:"Map",proto:!0,real:!0,forced:!0},{upsert:Hkt})});var pSe=A((ZMr,fSe)=>{"use strict";var Wkt=TypeError;fSe.exports=function(r){if(typeof r=="number")return r;throw new Wkt("Argument is not a number")}});var gSe=A(()=>{"use strict";var Zkt=ae(),I6=pSe(),dSe=f_(),mSe=SP(),Ykt=RangeError,Kkt=Math.min,Xkt=Math.max;Zkt({target:"Math",stat:!0,forced:!0},{clamp:function(e,t,n){if(I6(e),dSe(I6(t)),dSe(I6(n)),mSe(t,0)&&mSe(n,-0)||t>n)throw new Ykt("`min` should be smaller than `max`");return Kkt(n,Xkt(t,e))}})});var vSe=A(()=>{"use strict";var Qkt=ae();Qkt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var ySe=A(()=>{"use strict";var Jkt=ae(),eqt=180/Math.PI;Jkt({target:"Math",stat:!0,forced:!0},{degrees:function(e){return e*eqt}})});var M6=A((tAr,_Se)=>{"use strict";_Se.exports=function(e,t,n,i,o){var l=+e,c=+t,p=+n,g=+i,_=+o;return l!==l||c!==c||p!==p||g!==g||_!==_?NaN:l===1/0||l===-1/0?l:(l-c)*(_-g)/(p-c)+g}});var xSe=A(()=>{"use strict";var tqt=ae(),rqt=M6(),nqt=KC();tqt({target:"Math",stat:!0,forced:!0},{fscale:function(e,t,n,i,o){return nqt(rqt(e,t,n,i,o))}})});var bSe=A(()=>{"use strict";d3()});var wSe=A(()=>{"use strict";var iqt=ae();iqt({target:"Math",stat:!0,forced:!0},{iaddh:function(e,t,n,i){var o=e>>>0,l=t>>>0,c=n>>>0;return l+(i>>>0)+((o&c|(o|c)&~(o+c>>>0))>>>31)|0}})});var ESe=A(()=>{"use strict";var oqt=ae();oqt({target:"Math",stat:!0,forced:!0},{imulh:function(e,t){var n=65535,i=+e,o=+t,l=i&n,c=o&n,p=i>>16,g=o>>16,_=(p*c>>>0)+(l*c>>>16);return p*g+(_>>16)+((l*g>>>0)+(_&n)>>16)}})});var SSe=A(()=>{"use strict";var aqt=ae();aqt({target:"Math",stat:!0,forced:!0},{isubh:function(e,t,n,i){var o=e>>>0,l=t>>>0,c=n>>>0;return l-(i>>>0)-((~o&c|~(o^c)&o-c>>>0)>>>31)|0}})});var TSe=A(()=>{"use strict";var sqt=ae();sqt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var ISe=A(()=>{"use strict";var lqt=ae(),uqt=Math.PI/180;lqt({target:"Math",stat:!0,forced:!0},{radians:function(e){return e*uqt}})});var MSe=A(()=>{"use strict";var cqt=ae(),hqt=M6();cqt({target:"Math",stat:!0,forced:!0},{scale:hqt})});var RSe=A(()=>{"use strict";var fqt=ae(),pqt=kt(),dqt=w3(),mqt=Yp(),gqt=ko(),ASe=xn(),CSe="Seeded Random",PSe=CSe+" Generator",vqt="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",yqt=ASe.set,_qt=ASe.getterFor(PSe),xqt=TypeError,bqt=mqt(function(e){yqt(this,{type:PSe,seed:e%2147483647})},CSe,function(){var e=_qt(this),t=e.seed=(e.seed*1103515245+12345)%2147483647;return gqt((t&1073741823)/1073741823,!1)});fqt({target:"Math",stat:!0,forced:!0},{seededPRNG:function(e){var t=pqt(e).seed;if(!dqt(t))throw new xqt(vqt);return new bqt(t)}})});var OSe=A(()=>{"use strict";var wqt=ae();wqt({target:"Math",stat:!0,forced:!0},{signbit:function(e){var t=+e;return t===t&&t===0?1/t===-1/0:t<0}})});var qSe=A(()=>{"use strict";var Eqt=ae(),Sqt=pt(),Tqt=Ii(),Iqt=RangeError,Mqt=TypeError,Yl=1/0,Aqt=NaN,Ag=Math.abs,R6=Math.pow,LSe=Sqt([].push),IE=R6(2,1023),Cqt=R6(2,53)-1,DSe=Number.MAX_VALUE,NSe=R6(2,971),ME={},A6={},C6={},P6={},kSe={},VR=function(r,e){var t=r+e,n=e-(t-r);return{hi:t,lo:n}};Eqt({target:"Math",stat:!0},{sumPrecise:function(e){var t=[],n=0,i=P6;switch(Tqt(e,function(U){if(++n>=Cqt)throw new Iqt("Maximum allowed index exceeded");if(typeof U!="number")throw new Mqt("Value is not a number");i!==ME&&(U!==U?i=ME:U===Yl?i=i===A6?ME:C6:U===-Yl?i=i===C6?ME:A6:(U!==0||1/U===Yl)&&(i===P6||i===kSe)&&(i=kSe,LSe(t,U)))}),i){case ME:return Aqt;case A6:return-Yl;case C6:return Yl;case P6:return-0}for(var o=[],l=0,c,p,g,_,x,T,C=0;C<t.length;C++){c=t[C];for(var D=0,F=0;F<o.length;F++){if(p=o[F],Ag(c)<Ag(p)&&(T=c,c=p,p=T),g=VR(c,p),_=g.hi,x=g.lo,Ag(_)===Yl){var O=_===Yl?1:-1;l+=O,c=c-O*IE-O*IE,Ag(c)<Ag(p)&&(T=c,c=p,p=T),g=VR(c,p),_=g.hi,x=g.lo}x!==0&&(o[D++]=x),c=_}o.length=D,c!==0&&LSe(o,c)}var k=o.length-1;if(_=0,x=0,l!==0){var q=k>=0?o[k]:0;if(k--,Ag(l)>1||l>0&&q>0||l<0&&q<0)return l>0?Yl:-Yl;if(g=VR(l*IE,q/2),_=g.hi,x=g.lo,x*=2,Ag(2*_)===Yl)return _>0?_===IE&&x===-(NSe/2)&&k>=0&&o[k]<0?DSe:Yl:_===-IE&&x===NSe/2&&k>=0&&o[k]>0?-DSe:-Yl;x!==0&&(o[++k]=x,x=0),_*=2}for(;k>=0&&(g=VR(_,o[k--]),_=g.hi,x=g.lo,x===0););return k>=0&&(x<0&&o[k]<0||x>0&&o[k]>0)&&(p=x*2,c=_+p,p===c-_&&(_=c)),_}})});var jSe=A(()=>{"use strict";var Pqt=ae();Pqt({target:"Math",stat:!0,forced:!0},{umulh:function(e,t){var n=65535,i=+e,o=+t,l=i&n,c=o&n,p=i>>>16,g=o>>>16,_=(p*c>>>0)+(l*c>>>16);return p*g+(_>>>16)+((l*g>>>0)+(_&n)>>>16)}})});var BSe=A(()=>{"use strict";var Rqt=ae(),CE=pt(),Oqt=ui(),AE="Invalid number representation",Lqt="Invalid radix",Dqt=RangeError,GR=SyntaxError,Nqt=TypeError,FSe=parseInt,kqt=Math.pow,zSe=/^[\d.a-z]+$/,qqt=CE("".charAt),jqt=CE(zSe.exec),Fqt=CE(1 .toString),zqt=CE("".slice),Bqt=CE("".split);Rqt({target:"Number",stat:!0,forced:!0},{fromString:function(e,t){var n=1;if(typeof e!="string")throw new Nqt(AE);if(!e.length)throw new GR(AE);if(qqt(e,0)==="-"&&(n=-1,e=zqt(e,1),!e.length))throw new GR(AE);var i=t===void 0?10:Oqt(t);if(i<2||i>36)throw new Dqt(Lqt);if(!jqt(zSe,e))throw new GR(AE);var o=Bqt(e,"."),l=FSe(o[0],i);if(o.length>1&&(l+=FSe(o[1],i)/kqt(i,o[1].length)),i===10&&Fqt(l,i)!==e)throw new GR(AE);return n*l}})});var USe=A(()=>{"use strict";var Uqt=ae(),Vqt=PR();Uqt({target:"Number",stat:!0,forced:!0},{range:function(e,t,n){return new Vqt(e,t,n,"number",0,1)}})});var VSe=A(()=>{"use strict";N3()});var HR=A((OAr,HSe)=>{"use strict";var GSe=xn(),Gqt=Yp(),$R=ko(),$qt=Nr(),Hqt=sg(),Wqt=Ur(),$Se="Object Iterator",Zqt=GSe.set,Yqt=GSe.getterFor($Se);HSe.exports=Gqt(function(e,t){var n=Wqt(e);Zqt(this,{type:$Se,mode:t,object:n,keys:Hqt(n),index:0})},"Object",function(){for(var e=Yqt(this),t=e.keys;;){if(t===null||e.index>=t.length)return e.object=e.keys=null,$R(void 0,!0);var n=t[e.index++],i=e.object;if($qt(i,n)){switch(e.mode){case"keys":return $R(n,!1);case"values":return $R(i[n],!1)}return $R([n,i[n]],!1)}}})});var WSe=A(()=>{"use strict";var Kqt=ae(),Xqt=HR();Kqt({target:"Object",stat:!0,forced:!0},{iterateEntries:function(e){return new Xqt(e,"entries")}})});var ZSe=A(()=>{"use strict";var Qqt=ae(),Jqt=HR();Qqt({target:"Object",stat:!0,forced:!0},{iterateKeys:function(e){return new Jqt(e,"keys")}})});var YSe=A(()=>{"use strict";var ejt=ae(),tjt=HR();ejt({target:"Object",stat:!0,forced:!0},{iterateValues:function(e){return new tjt(e,"values")}})});var KSe=A(()=>{"use strict";D3()});var aTe=A(()=>{"use strict";var rjt=ae(),WR=Dt(),PE=ar(),njt=Xp(),XSe=vr(),ijt=kt(),ojt=La(),QSe=Rr(),ajt=Rs(),sjt=lr(),ZR=Wi(),ljt=Sn(),O6=Wl(),JSe=ci(),U_=n5(),ujt=fr(),eTe=xn(),cjt=ujt("observable"),L6="Observable",tTe="Subscription",rTe="SubscriptionObserver",D6=eTe.getterFor,N6=eTe.set,hjt=D6(L6),nTe=D6(tTe),YR=D6(rTe),iTe=function(r){this.observer=ijt(r),this.cleanup=null,this.subscriptionObserver=null};iTe.prototype={type:tTe,clean:function(){var r=this.cleanup;if(r){this.cleanup=null;try{r()}catch(e){U_(e)}}},close:function(){if(!PE){var r=this.facade,e=this.subscriptionObserver;r.closed=!0,e&&(e.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var k6=function(r,e){var t=N6(this,new iTe(r)),n;PE||(this.closed=!1);try{(n=ZR(r,"start"))&&WR(n,r,this)}catch(c){U_(c)}if(!t.isClosed()){var i=t.subscriptionObserver=new q6(t);try{var o=e(i),l=o;ajt(o)||(t.cleanup=QSe(o.unsubscribe)?function(){l.unsubscribe()}:XSe(o))}catch(c){i.error(c);return}t.isClosed()&&t.clean()}};k6.prototype=O6({},{unsubscribe:function(){var e=nTe(this);e.isClosed()||(e.close(),e.clean())}});PE&&JSe(k6.prototype,"closed",{configurable:!0,get:function(){return nTe(this).isClosed()}});var q6=function(r){N6(this,{type:rTe,subscriptionState:r}),PE||(this.closed=!1)};q6.prototype=O6({},{next:function(e){var t=YR(this).subscriptionState;if(!t.isClosed()){var n=t.observer;try{var i=ZR(n,"next");i&&WR(i,n,e)}catch(o){U_(o)}}},error:function(e){var t=YR(this).subscriptionState;if(!t.isClosed()){var n=t.observer;t.close();try{var i=ZR(n,"error");i?WR(i,n,e):U_(e)}catch(o){U_(o)}t.clean()}},complete:function(){var e=YR(this).subscriptionState;if(!e.isClosed()){var t=e.observer;e.close();try{var n=ZR(t,"complete");n&&WR(n,t)}catch(i){U_(i)}e.clean()}}});PE&&JSe(q6.prototype,"closed",{configurable:!0,get:function(){return YR(this).subscriptionState.isClosed()}});var oTe=function(e){ojt(this,j6),N6(this,{type:L6,subscriber:XSe(e)})},j6=oTe.prototype;O6(j6,{subscribe:function(e){var t=arguments.length;return new k6(QSe(e)?{next:e,error:t>1?arguments[1]:void 0,complete:t>2?arguments[2]:void 0}:sjt(e)?e:{},hjt(this).subscriber)}});ljt(j6,cjt,function(){return this});rjt({global:!0,constructor:!0,forced:!0},{Observable:oTe});njt(L6)});var lTe=A(()=>{"use strict";var fjt=ae(),pjt=gr(),djt=Dt(),sTe=kt(),mjt=Hu(),gjt=Hp(),vjt=Wi(),yjt=Ii(),_jt=fr(),xjt=_jt("observable");fjt({target:"Observable",stat:!0,forced:!0},{from:function(e){var t=mjt(this)?this:pjt("Observable"),n=vjt(sTe(e),xjt);if(n){var i=sTe(djt(n,e));return i.constructor===t?i:new t(function(l){return i.subscribe(l)})}var o=gjt(e);return new t(function(l){yjt(o,function(c,p){if(l.next(c),l.closed)return p()},{IS_ITERATOR:!0,INTERRUPTED:!0}),l.complete()})}})});var cTe=A(()=>{"use strict";var bjt=ae(),uTe=gr(),wjt=Hu(),Ejt=uTe("Array");bjt({target:"Observable",stat:!0,forced:!0},{of:function(){for(var e=wjt(this)?this:uTe("Observable"),t=arguments.length,n=Ejt(t),i=0;i<t;)n[i]=arguments[i++];return new e(function(o){for(var l=0;l<t;l++)if(o.next(n[l]),o.closed)return;o.complete()})}})});var hTe=A(()=>{"use strict";aTe();lTe();cTe()});var fTe=A(()=>{"use strict";v5()});var pTe=A(()=>{"use strict";y5()});var dTe=A(()=>{"use strict";w5()});var mTe=A(()=>{"use strict";E5()});var Zc=A((nCr,_Te)=>{"use strict";gP();mR();var yTe=gr(),Sjt=pt(),Tjt=Kh(),gTe=yTe("Map"),Ijt=yTe("WeakMap"),Mjt=Sjt([].push),vTe=Tjt("metadata"),F6=vTe.store||(vTe.store=new Ijt),RE=function(r,e,t){var n=F6.get(r);if(!n){if(!t)return;F6.set(r,n=new gTe)}var i=n.get(e);if(!i){if(!t)return;n.set(e,i=new gTe)}return i},Ajt=function(r,e,t){var n=RE(e,t,!1);return n===void 0?!1:n.has(r)},Cjt=function(r,e,t){var n=RE(e,t,!1);return n===void 0?void 0:n.get(r)},Pjt=function(r,e,t,n){RE(t,n,!0).set(r,e)},Rjt=function(r,e){var t=RE(r,e,!1),n=[];return t&&t.forEach(function(i,o){Mjt(n,o)}),n},Ojt=function(r){return r===void 0||typeof r=="symbol"?r:String(r)};_Te.exports={store:F6,getMap:RE,has:Ajt,get:Cjt,set:Pjt,keys:Rjt,toKey:Ojt}});var bTe=A(()=>{"use strict";var Ljt=ae(),xTe=Zc(),Djt=kt(),Njt=xTe.toKey,kjt=xTe.set;Ljt({target:"Reflect",stat:!0},{defineMetadata:function(e,t,n){var i=arguments.length<4?void 0:Njt(arguments[3]);kjt(e,t,Djt(n),i)}})});var ETe=A(()=>{"use strict";var qjt=ae(),z6=Zc(),jjt=kt(),Fjt=z6.toKey,zjt=z6.getMap,wTe=z6.store;qjt({target:"Reflect",stat:!0},{deleteMetadata:function(e,t){var n=arguments.length<3?void 0:Fjt(arguments[2]),i=zjt(jjt(t),n,!1);if(i===void 0||!i.delete(e))return!1;if(i.size)return!0;var o=wTe.get(t);return o.delete(n),!!o.size||wTe.delete(t)}})});var TTe=A(()=>{"use strict";var Bjt=ae(),B6=Zc(),Ujt=kt(),Vjt=xo(),Gjt=B6.has,$jt=B6.get,Hjt=B6.toKey,STe=function(r,e,t){var n=Gjt(r,e,t);if(n)return $jt(r,e,t);var i=Vjt(e);return i!==null?STe(r,i,t):void 0};Bjt({target:"Reflect",stat:!0},{getMetadata:function(e,t){var n=arguments.length<3?void 0:Hjt(arguments[2]);return STe(e,Ujt(t),n)}})});var CTe=A(()=>{"use strict";var Wjt=ae(),ITe=pt(),MTe=Zc(),Zjt=kt(),Yjt=xo(),Kjt=ER(),Xjt=ITe(Kjt),Qjt=ITe([].concat),Jjt=MTe.keys,eFt=MTe.toKey,ATe=function(r,e){var t=Jjt(r,e),n=Yjt(r);if(n===null)return t;var i=ATe(n,e);return i.length?t.length?Xjt(Qjt(t,i)):i:t};Wjt({target:"Reflect",stat:!0},{getMetadataKeys:function(e){var t=arguments.length<2?void 0:eFt(arguments[1]);return ATe(Zjt(e),t)}})});var RTe=A(()=>{"use strict";var tFt=ae(),PTe=Zc(),rFt=kt(),nFt=PTe.get,iFt=PTe.toKey;tFt({target:"Reflect",stat:!0},{getOwnMetadata:function(e,t){var n=arguments.length<3?void 0:iFt(arguments[2]);return nFt(e,rFt(t),n)}})});var LTe=A(()=>{"use strict";var oFt=ae(),OTe=Zc(),aFt=kt(),sFt=OTe.keys,lFt=OTe.toKey;oFt({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(e){var t=arguments.length<2?void 0:lFt(arguments[1]);return sFt(aFt(e),t)}})});var kTe=A(()=>{"use strict";var uFt=ae(),DTe=Zc(),cFt=kt(),hFt=xo(),fFt=DTe.has,pFt=DTe.toKey,NTe=function(r,e,t){var n=fFt(r,e,t);if(n)return!0;var i=hFt(e);return i!==null?NTe(r,i,t):!1};uFt({target:"Reflect",stat:!0},{hasMetadata:function(e,t){var n=arguments.length<3?void 0:pFt(arguments[2]);return NTe(e,cFt(t),n)}})});var jTe=A(()=>{"use strict";var dFt=ae(),qTe=Zc(),mFt=kt(),gFt=qTe.has,vFt=qTe.toKey;dFt({target:"Reflect",stat:!0},{hasOwnMetadata:function(e,t){var n=arguments.length<3?void 0:vFt(arguments[2]);return gFt(e,mFt(t),n)}})});var zTe=A(()=>{"use strict";var yFt=ae(),FTe=Zc(),_Ft=kt(),xFt=FTe.toKey,bFt=FTe.set;yFt({target:"Reflect",stat:!0},{metadata:function(e,t){return function(i,o){bFt(e,t,_Ft(i),xFt(o))}}})});var BTe=A(()=>{"use strict";F5()});var UTe=A(()=>{"use strict";var wFt=ae(),EFt=ma(),SFt=Qo().add;wFt({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=EFt(this),t=0,n=arguments.length;t<n;t++)SFt(e,arguments[t]);return e}})});var VTe=A(()=>{"use strict";var TFt=ae(),IFt=ma(),MFt=Qo().remove;TFt({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=IFt(this),t=!0,n,i=0,o=arguments.length;i<o;i++)n=MFt(e,arguments[i]),t=t&&n;return!!t}})});var GTe=A(()=>{"use strict";W5()});var HTe=A((PCr,$Te)=>{"use strict";var AFt=os(),CFt=Nr(),PFt=Rs(),RFt=fr(),OFt=pg(),LFt=RFt("iterator"),DFt=Object;$Te.exports=function(r){if(PFt(r))return!1;var e=DFt(r);return e[LFt]!==void 0||"@@iterator"in e||CFt(OFt,AFt(e))}});var fd=A((RCr,ZTe)=>{"use strict";var NFt=gr(),WTe=Rr(),kFt=HTe(),qFt=lr(),jFt=NFt("Set"),FFt=function(r){return qFt(r)&&typeof r.size=="number"&&WTe(r.has)&&WTe(r.keys)};ZTe.exports=function(r){return FFt(r)?r:kFt(r)?new jFt(r):r}});var YTe=A(()=>{"use strict";var zFt=ae(),BFt=Dt(),UFt=fd(),VFt=H5();zFt({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(e){return BFt(VFt,this,UFt(e))}})});var KTe=A(()=>{"use strict";var GFt=ae(),$Ft=kn(),HFt=ma(),WFt=ks();GFt({target:"Set",proto:!0,real:!0,forced:!0},{every:function(e){var t=HFt(this),n=$Ft(e,arguments.length>1?arguments[1]:void 0);return WFt(t,function(i){if(!n(i,i,t))return!1},!0)!==!1}})});var QTe=A(()=>{"use strict";var ZFt=ae(),YFt=kn(),KFt=ma(),XTe=Qo(),XFt=ks(),QFt=XTe.Set,JFt=XTe.add;ZFt({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(e){var t=KFt(this),n=YFt(e,arguments.length>1?arguments[1]:void 0),i=new QFt;return XFt(t,function(o){n(o,o,t)&&JFt(i,o)}),i}})});var JTe=A(()=>{"use strict";var ezt=ae(),tzt=kn(),rzt=ma(),nzt=ks();ezt({target:"Set",proto:!0,real:!0,forced:!0},{find:function(e){var t=rzt(this),n=tzt(e,arguments.length>1?arguments[1]:void 0),i=nzt(t,function(o){if(n(o,o,t))return{value:o}},!0);return i&&i.value}})});var tIe=A(()=>{"use strict";var izt=ae(),eIe=Qo(),ozt=SE();izt({target:"Set",stat:!0,forced:!0},{from:ozt(eIe.Set,eIe.add,!1)})});var rIe=A(()=>{"use strict";K5()});var nIe=A(()=>{"use strict";var azt=ae(),szt=Dt(),lzt=fd(),uzt=Y5();azt({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(e){return szt(uzt,this,lzt(e))}})});var iIe=A(()=>{"use strict";Q5()});var oIe=A(()=>{"use strict";var czt=ae(),hzt=Dt(),fzt=fd(),pzt=X5();czt({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(e){return hzt(pzt,this,fzt(e))}})});var aIe=A(()=>{"use strict";eV()});var sIe=A(()=>{"use strict";var dzt=ae(),mzt=Dt(),gzt=fd(),vzt=J5();dzt({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(e){return mzt(vzt,this,gzt(e))}})});var lIe=A(()=>{"use strict";rV()});var uIe=A(()=>{"use strict";var yzt=ae(),_zt=Dt(),xzt=fd(),bzt=tV();yzt({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(e){return _zt(bzt,this,xzt(e))}})});var hIe=A(()=>{"use strict";var wzt=ae(),cIe=pt(),Ezt=ma(),Szt=ks(),Tzt=wr(),Izt=cIe([].join),Mzt=cIe([].push);wzt({target:"Set",proto:!0,real:!0,forced:!0},{join:function(e){var t=Ezt(this),n=e===void 0?",":Tzt(e),i=[];return Szt(t,function(o){Mzt(i,o)}),Izt(i,n)}})});var pIe=A(()=>{"use strict";var Azt=ae(),Czt=kn(),Pzt=ma(),fIe=Qo(),Rzt=ks(),Ozt=fIe.Set,Lzt=fIe.add;Azt({target:"Set",proto:!0,real:!0,forced:!0},{map:function(e){var t=Pzt(this),n=Czt(e,arguments.length>1?arguments[1]:void 0),i=new Ozt;return Rzt(t,function(o){Lzt(i,n(o,o,t))}),i}})});var mIe=A(()=>{"use strict";var Dzt=ae(),dIe=Qo(),Nzt=TE();Dzt({target:"Set",stat:!0,forced:!0},{of:Nzt(dIe.Set,dIe.add,!1)})});var gIe=A(()=>{"use strict";var kzt=ae(),qzt=vr(),jzt=ma(),Fzt=ks(),zzt=TypeError;kzt({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=jzt(this),n=arguments.length<2,i=n?void 0:arguments[1];if(qzt(e),Fzt(t,function(o){n?(n=!1,i=o):i=e(i,o,o,t)}),n)throw new zzt("Reduce of empty set with no initial value");return i}})});var vIe=A(()=>{"use strict";var Bzt=ae(),Uzt=kn(),Vzt=ma(),Gzt=ks();Bzt({target:"Set",proto:!0,real:!0,forced:!0},{some:function(e){var t=Vzt(this),n=Uzt(e,arguments.length>1?arguments[1]:void 0);return Gzt(t,function(i){if(n(i,i,t))return!0},!0)===!0}})});var yIe=A(()=>{"use strict";oV()});var _Ie=A(()=>{"use strict";var $zt=ae(),Hzt=Dt(),Wzt=fd(),Zzt=iV();$zt({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(e){return Hzt(Zzt,this,Wzt(e))}})});var xIe=A(()=>{"use strict";sV()});var bIe=A(()=>{"use strict";var Yzt=ae(),Kzt=Dt(),Xzt=fd(),Qzt=aV();Yzt({target:"Set",proto:!0,real:!0,forced:!0},{union:function(e){return Kzt(Qzt,this,Xzt(e))}})});var wIe=A(()=>{"use strict";var Jzt=ae(),e4t=Eg().charAt,t4t=ei(),r4t=ui(),n4t=wr();Jzt({target:"String",proto:!0,forced:!0},{at:function(e){var t=n4t(t4t(this)),n=t.length,i=r4t(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:e4t(t,o)}})});var U6=A((SPr,IIe)=>{"use strict";var TIe=pt(),i4t=yo(),EIe=wr(),o4t=en(),a4t=TypeError,SIe=TIe([].push),s4t=TIe([].join);IIe.exports=function(e){var t=i4t(e),n=o4t(t);if(!n)return"";for(var i=arguments.length,o=[],l=0;;){var c=t[l++];if(c===void 0)throw new a4t("Incorrect template");if(SIe(o,EIe(c)),l===n)return s4t(o,"");l<i&&SIe(o,EIe(arguments[l]))}}});var MIe=A(()=>{"use strict";var l4t=ae(),u4t=U6();l4t({target:"String",stat:!0,forced:!0},{cooked:u4t})});var OIe=A(()=>{"use strict";var c4t=ae(),h4t=Yp(),AIe=ko(),f4t=ei(),p4t=wr(),CIe=xn(),PIe=Eg(),d4t=PIe.codeAt,m4t=PIe.charAt,RIe="String Iterator",g4t=CIe.set,v4t=CIe.getterFor(RIe),y4t=h4t(function(e){g4t(this,{type:RIe,string:e,index:0})},"String",function(){var e=v4t(this),t=e.string,n=e.index,i;return n>=t.length?AIe(void 0,!0):(i=m4t(t,n),e.index+=i.length,AIe({codePoint:d4t(i,0),position:n},!1))});c4t({target:"String",proto:!0,forced:!0},{codePoints:function(){return new y4t(p4t(f4t(this)))}})});var Yc=A((CPr,LIe)=>{"use strict";var KR=pt(),XR=WeakMap.prototype;LIe.exports={WeakMap,set:KR(XR.set),get:KR(XR.get),has:KR(XR.has),remove:KR(XR.delete)}});var UIe=A((PPr,BIe)=>{"use strict";var _4t=gr(),QR=pt(),x4t=String.fromCharCode,b4t=_4t("String","fromCodePoint"),V6=QR("".charAt),FIe=QR("".charCodeAt),DIe=QR("".indexOf),NIe=QR("".slice),$6=48,zIe=57,kIe=97,w4t=102,qIe=65,E4t=70,jIe=function(r,e){var t=FIe(r,e);return t>=$6&&t<=zIe},G6=function(r,e,t){if(t>=r.length)return-1;for(var n=0;e<t;e++){var i=S4t(FIe(r,e));if(i===-1)return-1;n=n*16+i}return n},S4t=function(r){return r>=$6&&r<=zIe?r-$6:r>=kIe&&r<=w4t?r-kIe+10:r>=qIe&&r<=E4t?r-qIe+10:-1};BIe.exports=function(r){for(var e="",t=0,n=0,i;(n=DIe(r,"\\",n))>-1;){if(e+=NIe(r,t,n),++n===r.length)return;var o=V6(r,n++);switch(o){case"b":e+="\b";break;case"t":e+="\t";break;case"n":e+=`
`;break;case"v":e+="\x0B";break;case"f":e+="\f";break;case"r":e+="\r";break;case"\r":n<r.length&&V6(r,n)===`
`&&++n;case`
`:case"\u2028":case"\u2029":break;case"0":if(jIe(r,n))return;e+="\0";break;case"x":if(i=G6(r,n,n+2),i===-1)return;n+=2,e+=x4t(i);break;case"u":if(n<r.length&&V6(r,n)==="{"){var l=DIe(r,"}",++n);if(l===-1)return;i=G6(r,n,l),n=l+1}else i=G6(r,n,n+4),n+=4;if(i===-1||i>1114111)return;e+=b4t(i);break;default:if(jIe(o,0))return;e+=o}t=n}return e+NIe(r,t)}});var QIe=A(()=>{"use strict";var T4t=af(),I4t=ae(),M4t=s1(),JR=pt(),WIe=da(),ZIe=kt(),A4t=Ur(),C4t=Rr(),P4t=en(),R4t=Wn().f,O4t=Ls(),eO=Yc(),L4t=U6(),D4t=UIe(),YIe=vg(),H6=new eO.WeakMap,N4t=eO.get,k4t=eO.has,q4t=eO.set,W6=Array,OE=TypeError,VIe=Object.freeze||Object,j4t=Object.isFrozen,F4t=Math.min,GIe=JR("".charAt),KIe=JR("".slice),z4t=JR("".split),$Ie=JR(/./.exec),B4t=/([\n\u2028\u2029]|\r\n?)/g,U4t=RegExp("^["+YIe+"]*"),V4t=RegExp("[^"+YIe+"]"),HIe="Invalid tag",G4t="Invalid opening line",$4t="Invalid closing line",H4t=function(r){var e=r.raw;if(T4t&&!j4t(e))throw new OE("Raw template should be frozen");if(k4t(H6,e))return N4t(H6,e);var t=W4t(e),n=Y4t(t);return R4t(n,"raw",{value:VIe(t)}),VIe(n),q4t(H6,e,n),n},W4t=function(r){var e=A4t(r),t=P4t(e),n=W6(t),i=W6(t),o=0,l,c,p,g;if(!t)throw new OE(HIe);for(;o<t;o++){var _=e[o];if(typeof _=="string")n[o]=z4t(_,B4t);else throw new OE(HIe)}for(o=0;o<t;o++){var x=o+1===t;if(l=n[o],o===0){if(l.length===1||l[0].length>0)throw new OE(G4t);l[1]=""}if(x){if(l.length===1||$Ie(V4t,l[l.length-1]))throw new OE($4t);l[l.length-2]="",l[l.length-1]=""}for(var T=2;T<l.length;T+=2){var C=l[T],D=T+1===l.length&&!x,F=$Ie(U4t,C)[0];if(!D&&F.length===C.length){l[T]="";continue}c=Z4t(F,c)}}var O=c?c.length:0;for(o=0;o<t;o++){for(l=n[o],p=l[0],g=1;g<l.length;g+=2)p+=l[g]+KIe(l[g+1],O);i[o]=p}return i},Z4t=function(r,e){if(e===void 0||r===e)return r;for(var t=0,n=F4t(r.length,e.length);t<n&&GIe(r,t)===GIe(e,t);t++);return KIe(r,0,t)},Y4t=function(r){for(var e=0,t=r.length,n=W6(t);e<t;e++)n[e]=D4t(r[e]);return n},XIe=function(r){return M4t(function(e){var t=O4t(arguments);return t[0]=H4t(ZIe(e)),WIe(r,this,t)},"")},K4t=XIe(L4t);I4t({target:"String",stat:!0,forced:!0},{dedent:function(e){return ZIe(e),C4t(e)?XIe(e):WIe(K4t,this,arguments)}})});var JIe=A(()=>{"use strict";cV()});var eMe=A(()=>{"use strict";yV()});var tMe=A(()=>{"use strict";AV()});var rMe=A(()=>{"use strict";NV()});var nMe=A(()=>{"use strict";var X4t=Lt(),Q4t=Ti(),J4t=Wn().f,eBt=Yo().f,Z6=X4t.Symbol;Q4t("asyncDispose");Z6&&(LE=eBt(Z6,"asyncDispose"),LE.enumerable&&LE.configurable&&LE.writable&&J4t(Z6,"asyncDispose",{value:LE.value,enumerable:!1,configurable:!1,writable:!1}));var LE});var iMe=A(()=>{"use strict";var tBt=Ti();tBt("customMatcher")});var oMe=A(()=>{"use strict";var rBt=Lt(),nBt=Ti(),iBt=Wn().f,oBt=Yo().f,Y6=rBt.Symbol;nBt("dispose");Y6&&(DE=oBt(Y6,"dispose"),DE.enumerable&&DE.configurable&&DE.writable&&iBt(Y6,"dispose",{value:DE.value,enumerable:!1,configurable:!1,writable:!1}));var DE});var X6=A((WPr,aMe)=>{"use strict";var aBt=gr(),sBt=pt(),K6=aBt("Symbol"),lBt=K6.keyFor,uBt=sBt(K6.prototype.valueOf);aMe.exports=K6.isRegisteredSymbol||function(e){try{return lBt(uBt(e))!==void 0}catch(t){return!1}}});var sMe=A(()=>{"use strict";var cBt=ae(),hBt=X6();cBt({target:"Symbol",stat:!0},{isRegisteredSymbol:hBt})});var lMe=A(()=>{"use strict";var fBt=ae(),pBt=X6();fBt({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:pBt})});var e$=A((QPr,dMe)=>{"use strict";var dBt=Kh(),fMe=gr(),mBt=pt(),gBt=Yh(),vBt=fr(),rO=fMe("Symbol"),uMe=rO.isWellKnownSymbol,pMe=fMe("Object","getOwnPropertyNames"),yBt=mBt(rO.prototype.valueOf),cMe=dBt("wks");for(tO=0,Q6=pMe(rO),hMe=Q6.length;tO<hMe;tO++)try{J6=Q6[tO],gBt(rO[J6])&&vBt(J6)}catch(r){}var J6,tO,Q6,hMe;dMe.exports=function(e){if(uMe&&uMe(e))return!0;try{for(var t=yBt(e),n=0,i=pMe(cMe),o=i.length;n<o;n++)if(cMe[i[n]]==t)return!0}catch(l){}return!1}});var mMe=A(()=>{"use strict";var _Bt=ae(),xBt=e$();_Bt({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:xBt})});var gMe=A(()=>{"use strict";var bBt=ae(),wBt=e$();bBt({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:wBt})});var vMe=A(()=>{"use strict";var EBt=Ti();EBt("matcher")});var yMe=A(()=>{"use strict";var SBt=Ti();SBt("metadata")});var _Me=A(()=>{"use strict";var TBt=Ti();TBt("metadataKey")});var xMe=A(()=>{"use strict";var IBt=Ti();IBt("observable")});var bMe=A(()=>{"use strict";var MBt=Ti();MBt("patternMatch")});var wMe=A(()=>{"use strict";var ABt=Ti();ABt("replaceAll")});var SMe=A(()=>{"use strict";var CBt=gr(),PBt=G1(),RBt=MG(),EMe=qr(),OBt=ef(),LBt=EMe.aTypedArrayConstructor,DBt=EMe.exportTypedArrayStaticMethod;DBt("fromAsync",function(e){var t=this,n=arguments.length,i=n>1?arguments[1]:void 0,o=n>2?arguments[2]:void 0;return new(CBt("Promise"))(function(l){PBt(t),l(RBt(e,i,o))}).then(function(l){return OBt(LBt(t),l)})},!0)});var TMe=A(()=>{"use strict";KV()});var MMe=A(()=>{"use strict";var IMe=qr(),NBt=Yi().filterReject,kBt=rR(),qBt=IMe.aTypedArray,jBt=IMe.exportTypedArrayMethod;jBt("filterOut",function(e){var t=NBt(qBt(this),e,arguments.length>1?arguments[1]:void 0);return kBt(this,t)},!0)});var CMe=A(()=>{"use strict";var AMe=qr(),FBt=Yi().filterReject,zBt=rR(),BBt=AMe.aTypedArray,UBt=AMe.exportTypedArrayMethod;UBt("filterReject",function(e){var t=FBt(BBt(this),e,arguments.length>1?arguments[1]:void 0);return zBt(this,t)},!0)});var PMe=A(()=>{"use strict";XV()});var RMe=A(()=>{"use strict";QV()});var OMe=A(()=>{"use strict";var t$=qr(),VBt=bR(),GBt=t$.aTypedArray,$Bt=t$.getTypedArrayConstructor,HBt=t$.exportTypedArrayMethod;HBt("groupBy",function(e){var t=arguments.length>1?arguments[1]:void 0;return VBt(GBt(this),e,t,$Bt)},!0)});var LMe=A(()=>{"use strict";fG()});var DMe=A(()=>{"use strict";pG()});var NMe=A(()=>{"use strict";var r$=qr(),WBt=en(),ZBt=XP(),YBt=Gu(),KBt=sE(),XBt=ui(),QBt=r$.aTypedArray,JBt=r$.getTypedArrayConstructor,eUt=r$.exportTypedArrayMethod,tUt=Math.max,rUt=Math.min;eUt("toSpliced",function(e,t){var n=QBt(this),i=JBt(n),o=WBt(n),l=YBt(e,o),c=arguments.length,p=0,g,_,x,T,C,D,F;if(c===0)g=_=0;else if(c===1)g=0,_=o-l;else if(_=rUt(tUt(XBt(t),0),o-l),g=c-2,g){T=new i(g),x=ZBt(T);for(var O=2;O<c;O++)C=arguments[O],T[O-2]=x?KBt(C):+C}for(D=o+g-_,F=new i(D);p<l;p++)F[p]=n[p];for(;p<l+g;p++)F[p]=T[p-l];for(;p<D;p++)F[p]=n[p+_-g];return F},!0)});var kMe=A(()=>{"use strict";var nUt=pt(),n$=qr(),iUt=ef(),oUt=ER(),aUt=n$.aTypedArray,sUt=n$.getTypedArrayConstructor,lUt=n$.exportTypedArrayMethod,uUt=nUt(oUt);lUt("uniqueBy",function(e){return aUt(this),iUt(sUt(this),uUt(this,e))},!0)});var qMe=A(()=>{"use strict";mG()});var i$=A((FRr,jMe)=>{"use strict";var cUt=lr(),hUt=String,fUt=TypeError;jMe.exports=function(r){if(r===void 0||cUt(r))return r;throw new fUt(hUt(r)+" is not an object or undefined")}});var NE=A((zRr,VMe)=>{"use strict";var UMe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",FMe=UMe+"+/",zMe=UMe+"-_",BMe=function(r){for(var e={},t=0;t<64;t++)e[r.charAt(t)]=t;return e};VMe.exports={i2c:FMe,c2i:BMe(FMe),i2cUrl:zMe,c2iUrl:BMe(zMe)}});var o$=A((BRr,GMe)=>{"use strict";var pUt=TypeError;GMe.exports=function(r){var e=r&&r.alphabet;if(e===void 0||e==="base64"||e==="base64url")return e||"base64";throw new pUt("Incorrect `alphabet` option")}});var u$=A((URr,WMe)=>{"use strict";var $Me=Lt(),dUt=pt(),mUt=i$(),gUt=rE(),vUt=Nr(),HMe=NE(),yUt=o$(),_Ut=h_(),xUt=HMe.c2i,bUt=HMe.c2iUrl,pd=$Me.SyntaxError,wUt=$Me.TypeError,Cg=dUt("".charAt),a$=function(r,e){for(var t=r.length;e<t;e++){var n=Cg(r,e);if(n!==" "&&n!=="\t"&&n!==`
`&&n!=="\f"&&n!=="\r")break}return e},s$=function(r,e,t){var n=r.length;n<4&&(r+=n===2?"AA":"A");var i=(e[Cg(r,0)]<<18)+(e[Cg(r,1)]<<12)+(e[Cg(r,2)]<<6)+e[Cg(r,3)],o=[i>>16&255,i>>8&255,i&255];if(n===2){if(t&&o[1]!==0)throw new pd("Extra bits");return[o[0]]}if(n===3){if(t&&o[2]!==0)throw new pd("Extra bits");return[o[0],o[1]]}return o},l$=function(r,e,t){for(var n=e.length,i=0;i<n;i++)r[t+i]=e[i];return t+n};WMe.exports=function(r,e,t,n){gUt(r),mUt(e);var i=yUt(e)==="base64"?xUt:bUt,o=e?e.lastChunkHandling:void 0;if(o===void 0&&(o="loose"),o!=="loose"&&o!=="strict"&&o!=="stop-before-partial")throw new wUt("Incorrect `lastChunkHandling` option");t&&_Ut(t.buffer);var l=t||[],c=0,p=0,g="",_=0;if(n)for(;;){if(_=a$(r,_),_===r.length){if(g.length>0){if(o==="stop-before-partial")break;if(o==="loose"){if(g.length===1)throw new pd("Malformed padding: exactly one additional character");c=l$(l,s$(g,i,!1),c)}else throw new pd("Missing padding")}p=r.length;break}var x=Cg(r,_);if(++_,x==="="){if(g.length<2)throw new pd("Padding is too early");if(_=a$(r,_),g.length===2){if(_===r.length){if(o==="stop-before-partial")break;throw new pd("Malformed padding: only one =")}Cg(r,_)==="="&&(++_,_=a$(r,_))}if(_<r.length)throw new pd("Unexpected character after padding");c=l$(l,s$(g,i,o==="strict"),c),p=r.length;break}if(!vUt(i,x))throw new pd("Unexpected character");var T=n-c;if(T===1&&g.length===2||T===2&&g.length===3||(g+=x,g.length===4&&(c=l$(l,s$(g,i,!1),c),g="",p=_,c===n)))break}return{bytes:l,read:p,written:c}}});var YMe=A(()=>{"use strict";var EUt=ae(),SUt=Lt(),TUt=ef(),IUt=u$(),ZMe=SUt.Uint8Array;ZMe&&EUt({target:"Uint8Array",stat:!0},{fromBase64:function(e){var t=IUt(e,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return TUt(ZMe,t.bytes)}})});var h$=A(($Rr,JMe)=>{"use strict";var c$=Lt(),XMe=pt(),MUt=c$.Uint8Array,KMe=c$.SyntaxError,AUt=c$.parseInt,CUt=Math.min,QMe=/[^\da-f]/i,PUt=XMe(QMe.exec),RUt=XMe("".slice);JMe.exports=function(r,e){var t=r.length;if(t%2!==0)throw new KMe("String should be an even number of characters");for(var n=e?CUt(e.length,t/2):t/2,i=e||new MUt(n),o=0,l=0;l<n;){var c=RUt(r,o,o+=2);if(PUt(QMe,c))throw new KMe("String should only contain hex characters");i[l++]=AUt(c,16)}return{bytes:i,read:o}}});var eAe=A(()=>{"use strict";var OUt=ae(),LUt=Lt(),DUt=rE(),NUt=h$();LUt.Uint8Array&&OUt({target:"Uint8Array",stat:!0},{fromHex:function(e){return NUt(DUt(e)).bytes}})});var kE=A((ZRr,tAe)=>{"use strict";var kUt=os(),qUt=TypeError;tAe.exports=function(r){if(kUt(r)==="Uint8Array")return r;throw new qUt("Argument is not an Uint8Array")}});var rAe=A(()=>{"use strict";var jUt=ae(),FUt=Lt(),zUt=u$(),BUt=kE(),nO=FUt.Uint8Array,UUt=!nO||!nO.prototype.setFromBase64||!function(){var r=new nO([255,255,255,255,255]);try{r.setFromBase64("MjYyZg===")}catch(e){return r[0]===50&&r[1]===54&&r[2]===50&&r[3]===255&&r[4]===255}}();nO&&jUt({target:"Uint8Array",proto:!0,forced:UUt},{setFromBase64:function(e){BUt(this);var t=zUt(e,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:t.read,written:t.written}}})});var nAe=A(()=>{"use strict";var VUt=ae(),GUt=Lt(),$Ut=rE(),HUt=kE(),WUt=h_(),ZUt=h$();GUt.Uint8Array&&VUt({target:"Uint8Array",proto:!0},{setFromHex:function(e){HUt(this),$Ut(e),WUt(this.buffer);var t=ZUt(e,this).read;return{read:t,written:t/2}}})});var oAe=A(()=>{"use strict";var YUt=ae(),KUt=Lt(),XUt=pt(),QUt=i$(),JUt=kE(),e3t=h_(),iAe=NE(),t3t=o$(),r3t=iAe.i2c,n3t=iAe.i2cUrl,i3t=XUt("".charAt);KUt.Uint8Array&&YUt({target:"Uint8Array",proto:!0},{toBase64:function(){var e=JUt(this),t=arguments.length?QUt(arguments[0]):void 0,n=t3t(t)==="base64"?r3t:n3t,i=!!t&&!!t.omitPadding;e3t(this.buffer);for(var o="",l=0,c=e.length,p,g=function(_){return i3t(n,p>>6*_&63)};l+2<c;l+=3)p=(e[l]<<16)+(e[l+1]<<8)+e[l+2],o+=g(3)+g(2)+g(1)+g(0);return l+2===c?(p=(e[l]<<16)+(e[l+1]<<8),o+=g(3)+g(2)+g(1)+(i?"":"=")):l+1===c&&(p=e[l]<<16,o+=g(3)+g(2)+(i?"":"==")),o}})});var aAe=A(()=>{"use strict";var o3t=ae(),a3t=Lt(),s3t=pt(),l3t=kE(),u3t=h_(),c3t=s3t(1 .toString);a3t.Uint8Array&&o3t({target:"Uint8Array",proto:!0},{toHex:function(){l3t(this),u3t(this.buffer);for(var e="",t=0,n=this.length;t<n;t++){var i=c3t(this[t],16);e+=i.length===1?"0"+i:i}return e}})});var qE=A((nOr,sAe)=>{"use strict";var h3t=Yc().has;sAe.exports=function(r){return h3t(r),r}});var lAe=A(()=>{"use strict";var f3t=ae(),p3t=qE(),d3t=Yc().remove;f3t({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=p3t(this),t=!0,n,i=0,o=arguments.length;i<o;i++)n=d3t(e,arguments[i]),t=t&&n;return!!t}})});var cAe=A(()=>{"use strict";var m3t=ae(),uAe=Yc(),g3t=SE();m3t({target:"WeakMap",stat:!0,forced:!0},{from:g3t(uAe.WeakMap,uAe.set,!0)})});var fAe=A(()=>{"use strict";var v3t=ae(),hAe=Yc(),y3t=TE();v3t({target:"WeakMap",stat:!0,forced:!0},{of:y3t(hAe.WeakMap,hAe.set,!0)})});var dAe=A(()=>{"use strict";var _3t=ae(),x3t=qE(),f$=Yc(),b3t=f$.get,w3t=f$.has,pAe=f$.set;_3t({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(e,t){var n=x3t(this),i,o;return w3t(n,e)?(i=b3t(n,e),"update"in t&&(i=t.update(i,e,n),pAe(n,e,i)),i):(o=t.insert(e,n),pAe(n,e,o),o)}})});var mAe=A(()=>{"use strict";var E3t=ae(),S3t=qE(),p$=Yc(),T3t=p$.get,I3t=p$.has,M3t=p$.set;E3t({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(e,t){return I3t(S3t(this),e)?T3t(this,e):(M3t(this,e,t),t)}})});var yAe=A((dOr,vAe)=>{"use strict";var d$=Yc(),gAe=new d$.WeakMap,A3t=d$.set,C3t=d$.remove;vAe.exports=function(r){return A3t(gAe,r,1),C3t(gAe,r),r}});var _Ae=A(()=>{"use strict";var P3t=ae(),R3t=vr(),O3t=qE(),L3t=yAe(),m$=Yc(),D3t=m$.get,N3t=m$.has,k3t=m$.set;P3t({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(e,t){if(O3t(this),L3t(e),R3t(t),N3t(this,e))return D3t(this,e);var n=t(e);return k3t(this,e,n),n}})});var xAe=A(()=>{"use strict";var q3t=ae(),j3t=UR();q3t({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:j3t})});var V_=A((_Or,bAe)=>{"use strict";var g$=pt(),v$=WeakSet.prototype;bAe.exports={WeakSet,add:g$(v$.add),has:g$(v$.has),remove:g$(v$.delete)}});var y$=A((xOr,wAe)=>{"use strict";var F3t=V_().has;wAe.exports=function(r){return F3t(r),r}});var EAe=A(()=>{"use strict";var z3t=ae(),B3t=y$(),U3t=V_().add;z3t({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=B3t(this),t=0,n=arguments.length;t<n;t++)U3t(e,arguments[t]);return e}})});var SAe=A(()=>{"use strict";var V3t=ae(),G3t=y$(),$3t=V_().remove;V3t({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=G3t(this),t=!0,n,i=0,o=arguments.length;i<o;i++)n=$3t(e,arguments[i]),t=t&&n;return!!t}})});var IAe=A(()=>{"use strict";var H3t=ae(),TAe=V_(),W3t=SE();H3t({target:"WeakSet",stat:!0,forced:!0},{from:W3t(TAe.WeakSet,TAe.add,!1)})});var AAe=A(()=>{"use strict";var Z3t=ae(),MAe=V_(),Y3t=TE();Z3t({target:"WeakSet",stat:!0,forced:!0},{of:Y3t(MAe.WeakSet,MAe.add,!1)})});var NAe=A(()=>{"use strict";var K3t=ae(),X3t=Lt(),RAe=gr(),_$=pt(),Q3t=Dt(),iO=yt(),J3t=wr(),e5t=dl(),CAe=NE().c2i,OAe=/[^\d+/a-z]/i,t5t=/[\t\n\f\r ]+/g,r5t=/[=]{1,2}$/,Pg=RAe("atob"),n5t=String.fromCharCode,i5t=_$("".charAt),PAe=_$("".replace),o5t=_$(OAe.exec),G_=!!Pg&&!iO(function(){return Pg("aGk=")!=="hi"}),LAe=G_&&iO(function(){return Pg(" ")!==""}),DAe=G_&&!iO(function(){Pg("a")}),a5t=G_&&!iO(function(){Pg()}),s5t=G_&&Pg.length!==1,l5t=!G_||LAe||DAe||a5t||s5t;K3t({global:!0,bind:!0,enumerable:!0,forced:l5t},{atob:function(e){if(e5t(arguments.length,1),G_&&!LAe&&!DAe)return Q3t(Pg,X3t,e);var t=PAe(J3t(e),t5t,""),n="",i=0,o=0,l,c,p;if(t.length%4===0&&(t=PAe(t,r5t,"")),l=t.length,l%4===1||o5t(OAe,t))throw new(RAe("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;i<l;)c=i5t(t,i++),p=o%4?p*64+CAe[c]:CAe[c],o++%4&&(n+=n5t(255&p>>(-2*o&6)));return n}})});var zAe=A(()=>{"use strict";var u5t=ae(),c5t=Lt(),jAe=gr(),FAe=pt(),h5t=Dt(),x$=yt(),kAe=wr(),f5t=dl(),p5t=NE().i2c,$_=jAe("btoa"),qAe=FAe("".charAt),d5t=FAe("".charCodeAt),jE=!!$_&&!x$(function(){return $_("hi")!=="aGk="}),m5t=jE&&!x$(function(){$_()}),g5t=jE&&x$(function(){return $_(null)!=="bnVsbA=="}),v5t=jE&&$_.length!==1;u5t({global:!0,bind:!0,enumerable:!0,forced:!jE||m5t||g5t||v5t},{btoa:function(e){if(f5t(arguments.length,1),jE)return h5t($_,c5t,kAe(e));for(var t=kAe(e),n="",i=0,o=p5t,l,c;qAe(t,i)||(o="=",i%1);){if(c=d5t(t,i+=3/4),c>255)throw new(jAe("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");l=l<<8|c,n+=qAe(o,63&l>>8-i%1*8)}return n}})});var b$=A((LOr,BAe)=>{"use strict";BAe.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var E$=A((DOr,VAe)=>{"use strict";var y5t=n1(),w$=y5t("span").classList,UAe=w$&&w$.constructor&&w$.constructor.prototype;VAe.exports=UAe===Object.prototype?void 0:UAe});var WAe=A(()=>{"use strict";var GAe=Lt(),$Ae=b$(),_5t=E$(),S$=iB(),x5t=_o(),HAe=function(r){if(r&&r.forEach!==S$)try{x5t(r,"forEach",S$)}catch(e){r.forEach=S$}};for(oO in $Ae)$Ae[oO]&&HAe(GAe[oO]&&GAe[oO].prototype);var oO;HAe(_5t)});var QAe=A(()=>{"use strict";var ZAe=Lt(),KAe=b$(),b5t=E$(),FE=E1(),YAe=_o(),w5t=as(),E5t=fr(),T$=E5t("iterator"),I$=FE.values,XAe=function(r,e){if(r){if(r[T$]!==I$)try{YAe(r,T$,I$)}catch(n){r[T$]=I$}if(w5t(r,e,!0),KAe[e]){for(var t in FE)if(r[t]!==FE[t])try{YAe(r,t,FE[t])}catch(n){r[t]=FE[t]}}}};for(aO in KAe)XAe(ZAe[aO]&&ZAe[aO].prototype,aO);var aO;XAe(b5t,"DOMTokenList")});var M$=A((FOr,JAe)=>{"use strict";JAe.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var cCe=A(()=>{"use strict";var S5t=ae(),uO=gr(),T5t=tU(),L$=yt(),I5t=Zi(),D$=Ps(),cO=Wn().f,M5t=Sn(),sO=ci(),lO=Nr(),A5t=La(),C5t=kt(),rCe=B4(),eCe=hg(),H_=M$(),P5t=PC(),nCe=xn(),N$=ar(),iCe=un(),W_="DOMException",O$="DATA_CLONE_ERR",fO=uO("Error"),uf=uO(W_)||function(){try{var r=uO("MessageChannel")||T5t("worker_threads").MessageChannel;new r().port1.postMessage(new WeakMap)}catch(e){if(e.name===O$&&e.code===25)return e.constructor}}(),R5t=uf&&uf.prototype,oCe=fO.prototype,O5t=nCe.set,L5t=nCe.getterFor(W_),D5t="stack"in new fO(W_),aCe=function(r){return lO(H_,r)&&H_[r].m?H_[r].c:0},k$=function(){A5t(this,BE);var e=arguments.length,t=eCe(e<1?void 0:arguments[0]),n=eCe(e<2?void 0:arguments[1],"Error"),i=aCe(n);if(O5t(this,{type:W_,name:n,message:t,code:i}),N$||(this.name=n,this.message=t,this.code=i),D5t){var o=new fO(t);o.name=W_,cO(this,"stack",D$(1,P5t(o.stack,1)))}},BE=k$.prototype=I5t(oCe),sCe=function(r){return{enumerable:!0,configurable:!0,get:r}},A$=function(r){return sCe(function(){return L5t(this)[r]})};N$&&(sO(BE,"code",A$("code")),sO(BE,"message",A$("message")),sO(BE,"name",A$("name")));cO(BE,"constructor",D$(1,k$));var pO=L$(function(){return!(new uf instanceof fO)}),lCe=pO||L$(function(){return oCe.toString!==rCe||String(new uf(1,2))!=="2: 1"}),uCe=pO||L$(function(){return new uf(1,"DataCloneError").code!==25}),N5t=pO||uf[O$]!==25||R5t[O$]!==25,tCe=iCe?lCe||uCe||N5t:pO;S5t({global:!0,constructor:!0,forced:tCe},{DOMException:tCe?k$:uf});var UE=uO(W_),hO=UE.prototype;lCe&&(iCe||uf===UE)&&M5t(hO,"toString",rCe);uCe&&N$&&uf===UE&&sO(hO,"code",sCe(function(){return aCe(C5t(this).name)}));for(C$ in H_)lO(H_,C$)&&(P$=H_[C$],zE=P$.s,R$=D$(6,P$.c),lO(UE,zE)||cO(UE,zE,R$),lO(hO,zE)||cO(hO,zE,R$));var P$,zE,R$,C$});var vCe=A(()=>{"use strict";var k5t=ae(),q5t=Lt(),G$=gr(),U$=Ps(),V$=Wn().f,hCe=Nr(),j5t=La(),F5t=$p(),fCe=hg(),q$=M$(),z5t=PC(),B5t=ar(),mCe=un(),GE="DOMException",gCe=G$("Error"),$E=G$(GE),$$=function(){j5t(this,U5t);var e=arguments.length,t=fCe(e<1?void 0:arguments[0]),n=fCe(e<2?void 0:arguments[1],"Error"),i=new $E(t,n),o=new gCe(t);return o.name=GE,V$(i,"stack",U$(1,z5t(o.stack,1))),F5t(i,this,$$),i},U5t=$$.prototype=$E.prototype,V5t="stack"in new gCe(GE),G5t="stack"in new $E(1,2),j$=$E&&B5t&&Object.getOwnPropertyDescriptor(q5t,GE),$5t=!!j$&&!(j$.writable&&j$.configurable),pCe=V5t&&!$5t&&!G5t;k5t({global:!0,constructor:!0,forced:mCe||pCe},{DOMException:pCe?$$:$E});var VE=G$(GE),dCe=VE.prototype;if(dCe.constructor!==VE){mCe||V$(dCe,"constructor",U$(1,VE));for(F$ in q$)hCe(q$,F$)&&(z$=q$[F$],B$=z$.s,hCe(VE,B$)||V$(VE,B$,U$(6,z$.c)))}var z$,B$,F$});var _Ce=A(()=>{"use strict";var H5t=gr(),W5t=as(),yCe="DOMException";W5t(H5t(yCe),yCe)});var bCe=A(()=>{"use strict";var Z5t=ae(),Y5t=Lt(),xCe=Z1().clear;Z5t({global:!0,bind:!0,enumerable:!0,forced:Y5t.clearImmediate!==xCe},{clearImmediate:xCe})});var dO=A((ZOr,ECe)=>{"use strict";var wCe=Lt(),K5t=da(),X5t=Rr(),Q5t=I1(),J5t=zu(),eVt=Ls(),tVt=dl(),rVt=wCe.Function,nVt=/MSIE .\./.test(J5t)||Q5t==="BUN"&&function(){var r=wCe.Bun.version.split(".");return r.length<3||r[0]==="0"&&(r[1]<3||r[1]==="3"&&r[2]==="0")}();ECe.exports=function(r,e){var t=e?2:1;return nVt?function(n,i){var o=tVt(arguments.length,1)>t,l=X5t(n)?n:rVt(n),c=o?eVt(arguments,t):[],p=o?function(){K5t(l,this,c)}:l;return e?r(p,i):r(p)}:r}});var MCe=A(()=>{"use strict";var iVt=ae(),ICe=Lt(),SCe=Z1().set,oVt=dO(),TCe=ICe.setImmediate?oVt(SCe,!1):SCe;iVt({global:!0,bind:!0,enumerable:!0,forced:ICe.setImmediate!==TCe},{setImmediate:TCe})});var ACe=A(()=>{"use strict";bCe();MCe()});var CCe=A(()=>{"use strict";var aVt=ae(),sVt=Lt(),lVt=r5(),uVt=vr(),cVt=dl(),hVt=yt(),fVt=ar(),pVt=hVt(function(){return fVt&&Object.getOwnPropertyDescriptor(sVt,"queueMicrotask").value.length!==1});aVt({global:!0,enumerable:!0,dontCallGetSet:!0,forced:pVt},{queueMicrotask:function(e){cVt(arguments.length,1),lVt(uVt(e))}})});var RCe=A(()=>{"use strict";var dVt=ae(),dd=Lt(),mVt=ci(),gVt=ar(),vVt=TypeError,yVt=Object.defineProperty,PCe=dd.self!==dd;try{gVt?(mO=Object.getOwnPropertyDescriptor(dd,"self"),(PCe||!mO||!mO.get||!mO.enumerable)&&mVt(dd,"self",{get:function(){return dd},set:function(e){if(this!==dd)throw new vVt("Illegal invocation");yVt(dd,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):dVt({global:!0,simple:!0,forced:PCe},{self:dd})}catch(r){}var mO});var UCe=A(()=>{"use strict";var _Vt=un(),xVt=ae(),_a=Lt(),WE=gr(),YE=pt(),X$=yt(),bVt=zp(),Y_=Rr(),wVt=Hu(),EVt=Rs(),xO=lr(),SVt=Yh(),TVt=Ii(),DCe=kt(),yO=os(),IVt=Nr(),MVt=$l(),H$=_o(),gO=en(),AVt=dl(),CVt=T_(),bO=qo(),Q$=Qo(),PVt=ks(),OCe=lU(),RVt=q4(),J$=sP(),HE=_a.Object,OVt=_a.Array,NCe=_a.Date,kCe=_a.Error,LVt=_a.TypeError,DVt=_a.PerformanceMark,Rg=WE("DOMException"),Y$=bO.Map,e8=bO.has,qCe=bO.get,_O=bO.set,jCe=Q$.Set,FCe=Q$.add,NVt=Q$.has,kVt=WE("Object","keys"),qVt=YE([].push),jVt=YE((!0).valueOf),FVt=YE(1 .valueOf),zVt=YE("".valueOf),BVt=YE(NCe.prototype.getTime),K$=bVt("structuredClone"),ZE="DataCloneError",vO="Transferring",zCe=function(r){return!X$(function(){var e=new _a.Set([7]),t=r(e),n=r(HE(7));return t===e||!t.has(7)||!xO(n)||+n!=7})&&r},LCe=function(r,e){return!X$(function(){var t=new e,n=r({a:t,b:t});return!(n&&n.a===n.b&&n.a instanceof e&&n.a.stack===t.stack)})},UVt=function(r){return!X$(function(){var e=r(new _a.AggregateError([1],K$,{cause:3}));return e.name!=="AggregateError"||e.errors[0]!==1||e.message!==K$||e.cause!==3})},Z_=_a.structuredClone,VVt=_Vt||!LCe(Z_,kCe)||!LCe(Z_,Rg)||!UVt(Z_),GVt=!Z_&&zCe(function(r){return new DVt(K$,{detail:r}).detail}),cf=zCe(Z_)||GVt,W$=function(r){throw new Rg("Uncloneable type: "+r,ZE)},Fs=function(r,e){throw new Rg((e||"Cloning")+" of "+r+" cannot be properly polyfilled in this engine",ZE)},Z$=function(r,e){return cf||Fs(e),cf(r)},$Vt=function(){var r;try{r=new _a.DataTransfer}catch(e){try{r=new _a.ClipboardEvent("").clipboardData}catch(t){}}return r&&r.items&&r.files?r:null},BCe=function(r,e,t){if(e8(e,r))return qCe(e,r);var n=t||yO(r),i,o,l,c,p,g;if(n==="SharedArrayBuffer")cf?i=cf(r):i=r;else{var _=_a.DataView;!_&&!Y_(r.slice)&&Fs("ArrayBuffer");try{if(Y_(r.slice)&&!r.resizable)i=r.slice(0);else for(o=r.byteLength,l=("maxByteLength"in r)?{maxByteLength:r.maxByteLength}:void 0,i=new ArrayBuffer(o,l),c=new _(r),p=new _(i),g=0;g<o;g++)p.setUint8(g,c.getUint8(g))}catch(x){throw new Rg("ArrayBuffer is detached",ZE)}}return _O(e,r,i),i},HVt=function(r,e,t,n,i){var o=_a[e];return xO(o)||Fs(e),new o(BCe(r.buffer,i),t,n)},ya=function(r,e){if(SVt(r)&&W$("Symbol"),!xO(r))return r;if(e){if(e8(e,r))return qCe(e,r)}else e=new Y$;var t=yO(r),n,i,o,l,c,p,g,_;switch(t){case"Array":o=OVt(gO(r));break;case"Object":o={};break;case"Map":o=new Y$;break;case"Set":o=new jCe;break;case"RegExp":o=new RegExp(r.source,CVt(r));break;case"Error":switch(i=r.name,i){case"AggregateError":o=new(WE(i))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":o=new(WE(i));break;case"CompileError":case"LinkError":case"RuntimeError":o=new(WE("WebAssembly",i));break;default:o=new kCe}break;case"DOMException":o=new Rg(r.message,r.name);break;case"ArrayBuffer":case"SharedArrayBuffer":o=BCe(r,e,t);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":p=t==="DataView"?r.byteLength:r.length,o=HVt(r,t,r.byteOffset,p,e);break;case"DOMQuad":try{o=new DOMQuad(ya(r.p1,e),ya(r.p2,e),ya(r.p3,e),ya(r.p4,e))}catch(x){o=Z$(r,t)}break;case"File":if(cf)try{o=cf(r),yO(o)!==t&&(o=void 0)}catch(x){}if(!o)try{o=new File([r],r.name,r)}catch(x){}o||Fs(t);break;case"FileList":if(l=$Vt(),l){for(c=0,p=gO(r);c<p;c++)l.items.add(ya(r[c],e));o=l.files}else o=Z$(r,t);break;case"ImageData":try{o=new ImageData(ya(r.data,e),r.width,r.height,{colorSpace:r.colorSpace})}catch(x){o=Z$(r,t)}break;default:if(cf)o=cf(r);else switch(t){case"BigInt":o=HE(r.valueOf());break;case"Boolean":o=HE(jVt(r));break;case"Number":o=HE(FVt(r));break;case"String":o=HE(zVt(r));break;case"Date":o=new NCe(BVt(r));break;case"Blob":try{o=r.slice(0,r.size,r.type)}catch(x){Fs(t)}break;case"DOMPoint":case"DOMPointReadOnly":n=_a[t];try{o=n.fromPoint?n.fromPoint(r):new n(r.x,r.y,r.z,r.w)}catch(x){Fs(t)}break;case"DOMRect":case"DOMRectReadOnly":n=_a[t];try{o=n.fromRect?n.fromRect(r):new n(r.x,r.y,r.width,r.height)}catch(x){Fs(t)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=_a[t];try{o=n.fromMatrix?n.fromMatrix(r):new n(r)}catch(x){Fs(t)}break;case"AudioData":case"VideoFrame":Y_(r.clone)||Fs(t);try{o=r.clone()}catch(x){W$(t)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":Fs(t);default:W$(t)}}switch(_O(e,r,o),t){case"Array":case"Object":for(g=kVt(r),c=0,p=gO(g);c<p;c++)_=g[c],MVt(o,_,ya(r[_],e));break;case"Map":r.forEach(function(x,T){_O(o,ya(T,e),ya(x,e))});break;case"Set":r.forEach(function(x){FCe(o,ya(x,e))});break;case"Error":H$(o,"message",ya(r.message,e)),IVt(r,"cause")&&H$(o,"cause",ya(r.cause,e)),i==="AggregateError"?o.errors=ya(r.errors,e):i==="SuppressedError"&&(o.error=ya(r.error,e),o.suppressed=ya(r.suppressed,e));case"DOMException":RVt&&H$(o,"stack",ya(r.stack,e))}return o},WVt=function(r,e){if(!xO(r))throw new LVt("Transfer option cannot be converted to a sequence");var t=[];TVt(r,function(T){qVt(t,DCe(T))});for(var n=0,i=gO(t),o=new jCe,l,c,p,g,_,x;n<i;){if(l=t[n++],c=yO(l),c==="ArrayBuffer"?NVt(o,l):e8(e,l))throw new Rg("Duplicate transferable",ZE);if(c==="ArrayBuffer"){FCe(o,l);continue}if(J$)g=Z_(l,{transfer:[l]});else switch(c){case"ImageBitmap":p=_a.OffscreenCanvas,wVt(p)||Fs(c,vO);try{_=new p(l.width,l.height),x=_.getContext("bitmaprenderer"),x.transferFromImageBitmap(l),g=_.transferToImageBitmap()}catch(T){}break;case"AudioData":case"VideoFrame":(!Y_(l.clone)||!Y_(l.close))&&Fs(c,vO);try{g=l.clone(),l.close()}catch(T){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":Fs(c,vO)}if(g===void 0)throw new Rg("This object cannot be transferred: "+c,ZE);_O(e,l,g)}return o},ZVt=function(r){PVt(r,function(e){J$?cf(e,{transfer:[e]}):Y_(e.transfer)?e.transfer():OCe?OCe(e):Fs("ArrayBuffer",vO)})};xVt({global:!0,enumerable:!0,sham:!J$,forced:VVt},{structuredClone:function(e){var t=AVt(arguments.length,1)>1&&!EVt(arguments[1])?DCe(arguments[1]):void 0,n=t?t.transfer:void 0,i,o;n!==void 0&&(i=new Y$,o=WVt(n,i));var l=ya(e,i);return o&&ZVt(o),l}})});var $Ce=A(()=>{"use strict";var YVt=ae(),GCe=Lt(),KVt=dO(),VCe=KVt(GCe.setInterval,!0);YVt({global:!0,bind:!0,forced:GCe.setInterval!==VCe},{setInterval:VCe})});var ZCe=A(()=>{"use strict";var XVt=ae(),WCe=Lt(),QVt=dO(),HCe=QVt(WCe.setTimeout,!0);XVt({global:!0,bind:!0,forced:WCe.setTimeout!==HCe},{setTimeout:HCe})});var YCe=A(()=>{"use strict";$Ce();ZCe()});var KE=A((hLr,XCe)=>{"use strict";var JVt=yt(),eGt=fr(),tGt=ar(),KCe=un(),rGt=eGt("iterator");XCe.exports=!JVt(function(){var r=new URL("b?a=1&b=2&c=3","https://a"),e=r.searchParams,t=new URLSearchParams("a=1&a=2&b=3"),n="";return r.pathname="c%20d",e.forEach(function(i,o){e.delete("b"),n+=o+i}),t.delete("a",2),t.delete("b",void 0),KCe&&(!r.toJSON||!t.has("a",1)||t.has("a",2)||!t.has("a",void 0)||t.has("b"))||!e.size&&(KCe||!tGt)||!e.sort||r.href!=="https://a/c%20d?a=1&c=3"||e.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!e[rGt]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var aPe=A((fLr,oPe)=>{"use strict";var Og=pt(),t8=2147483647,XE=36,rPe=1,i8=26,nGt=38,iGt=700,oGt=72,aGt=128,sGt="-",lGt=/[^\0-\u007E]/,nPe=/[.\u3002\uFF0E\uFF61]/g,QCe="Overflow: input needs wider integers to process",r8=XE-rPe,JCe=RangeError,uGt=Og(nPe.exec),K_=Math.floor,n8=String.fromCharCode,ePe=Og("".charCodeAt),iPe=Og([].join),md=Og([].push),cGt=Og("".replace),hGt=Og("".split),fGt=Og("".toLowerCase),pGt=function(r){for(var e=[],t=0,n=r.length;t<n;){var i=ePe(r,t++);if(i>=55296&&i<=56319&&t<n){var o=ePe(r,t++);(o&64512)===56320?md(e,((i&1023)<<10)+(o&1023)+65536):(md(e,i),t--)}else md(e,i)}return e},tPe=function(r){return r+22+75*(r<26)},dGt=function(r,e,t){var n=0;for(r=t?K_(r/iGt):r>>1,r+=K_(r/e);r>r8*i8>>1;)r=K_(r/r8),n+=XE;return K_(n+(r8+1)*r/(r+nGt))},mGt=function(r){var e=[];r=pGt(r);var t=r.length,n=aGt,i=0,o=oGt,l,c;for(l=0;l<r.length;l++)c=r[l],c<128&&md(e,n8(c));var p=e.length,g=p;for(p&&md(e,sGt);g<t;){var _=t8;for(l=0;l<r.length;l++)c=r[l],c>=n&&c<_&&(_=c);var x=g+1;if(_-n>K_((t8-i)/x))throw new JCe(QCe);for(i+=(_-n)*x,n=_,l=0;l<r.length;l++){if(c=r[l],c<n&&++i>t8)throw new JCe(QCe);if(c===n){for(var T=i,C=XE;;){var D=C<=o?rPe:C>=o+i8?i8:C-o;if(T<D)break;var F=T-D,O=XE-D;md(e,n8(tPe(D+F%O))),T=K_(F/O),C+=XE}md(e,n8(tPe(T))),o=dGt(i,x,g===p),i=0,g++}}i++,n++}return iPe(e,"")};oPe.exports=function(r){var e=[],t=hGt(cGt(fGt(r),nPe,"."),"."),n,i;for(n=0;n<t.length;n++)i=t[n],md(e,uGt(lGt,i)?"xn--"+mGt(i):i);return iPe(e,".")}});var p8=A((pLr,CPe)=>{"use strict";E1();uV();var c8=ae(),_Pe=Lt(),h8=Y3(),gGt=gr(),wO=Dt(),Ku=pt(),QE=ar(),xPe=KE(),bPe=Sn(),vGt=ci(),yGt=Wl(),_Gt=as(),xGt=Yp(),f8=xn(),wPe=La(),o8=Rr(),bGt=Nr(),wGt=kn(),EGt=os(),SGt=kt(),EPe=lr(),ls=wr(),TGt=Zi(),sPe=Ps(),lPe=Hp(),IGt=Fc(),EO=ko(),X_=dl(),MGt=fr(),AGt=WC(),CGt=MGt("iterator"),J_="URLSearchParams",SPe=J_+"Iterator",TPe=f8.set,Kl=f8.getterFor(J_),PGt=f8.getterFor(SPe),uPe=h8("fetch"),IO=h8("Request"),JE=h8("Headers"),a8=IO&&IO.prototype,cPe=JE&&JE.prototype,RGt=_Pe.TypeError,OGt=_Pe.encodeURIComponent,LGt=String.fromCharCode,DGt=gGt("String","fromCodePoint"),NGt=parseInt,TO=Ku("".charAt),hPe=Ku([].join),gd=Ku([].push),IPe=Ku("".replace),kGt=Ku([].shift),fPe=Ku([].splice),pPe=Ku("".split),MPe=Ku("".slice),qGt=Ku(/./.exec),jGt=/\+/g,s8="\uFFFD",FGt=/^[0-9a-f]+$/i,dPe=function(r,e){var t=MPe(r,e,e+2);return qGt(FGt,t)?NGt(t,16):NaN},zGt=function(r){for(var e=0,t=128;t>0&&(r&t)!==0;t>>=1)e++;return e},BGt=function(r){var e=null;switch(r.length){case 1:e=r[0];break;case 2:e=(r[0]&31)<<6|r[1]&63;break;case 3:e=(r[0]&15)<<12|(r[1]&63)<<6|r[2]&63;break;case 4:e=(r[0]&7)<<18|(r[1]&63)<<12|(r[2]&63)<<6|r[3]&63;break}return e>1114111?null:e},mPe=function(r){r=IPe(r,jGt," ");for(var e=r.length,t="",n=0;n<e;){var i=TO(r,n);if(i==="%"){if(TO(r,n+1)==="%"||n+3>e){t+="%",n++;continue}var o=dPe(r,n+1);if(o!==o){t+=i,n++;continue}n+=2;var l=zGt(o);if(l===0)i=LGt(o);else{if(l===1||l>4){t+=s8,n++;continue}for(var c=[o],p=1;p<l&&(n++,!(n+3>e||TO(r,n)!=="%"));){var g=dPe(r,n+1);if(g!==g){n+=3;break}if(g>191||g<128)break;gd(c,g),n+=2,p++}if(c.length!==l){t+=s8;continue}var _=BGt(c);_===null?t+=s8:i=DGt(_)}}t+=i,n++}return t},UGt=/[!'()~]|%20/g,VGt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},GGt=function(r){return VGt[r]},gPe=function(r){return IPe(OGt(r),UGt,GGt)},l8=xGt(function(e,t){TPe(this,{type:SPe,target:Kl(e).entries,index:0,kind:t})},J_,function(){var e=PGt(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,EO(void 0,!0);var i=t[n];switch(e.kind){case"keys":return EO(i.key,!1);case"values":return EO(i.value,!1)}return EO([i.key,i.value],!1)},!0),APe=function(r){this.entries=[],this.url=null,r!==void 0&&(EPe(r)?this.parseObject(r):this.parseQuery(typeof r=="string"?TO(r,0)==="?"?MPe(r,1):r:ls(r)))};APe.prototype={type:J_,bindURL:function(r){this.url=r,this.update()},parseObject:function(r){var e=this.entries,t=IGt(r),n,i,o,l,c,p,g;if(t)for(n=lPe(r,t),i=n.next;!(o=wO(i,n)).done;){if(l=lPe(SGt(o.value)),c=l.next,(p=wO(c,l)).done||(g=wO(c,l)).done||!wO(c,l).done)throw new RGt("Expected sequence with length 2");gd(e,{key:ls(p.value),value:ls(g.value)})}else for(var _ in r)bGt(r,_)&&gd(e,{key:_,value:ls(r[_])})},parseQuery:function(r){if(r)for(var e=this.entries,t=pPe(r,"&"),n=0,i,o;n<t.length;)i=t[n++],i.length&&(o=pPe(i,"="),gd(e,{key:mPe(kGt(o)),value:mPe(hPe(o,"="))}))},serialize:function(){for(var r=this.entries,e=[],t=0,n;t<r.length;)n=r[t++],gd(e,gPe(n.key)+"="+gPe(n.value));return hPe(e,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var MO=function(){wPe(this,Q_);var e=arguments.length>0?arguments[0]:void 0,t=TPe(this,new APe(e));QE||(this.size=t.entries.length)},Q_=MO.prototype;yGt(Q_,{append:function(e,t){var n=Kl(this);X_(arguments.length,2),gd(n.entries,{key:ls(e),value:ls(t)}),QE||this.length++,n.updateURL()},delete:function(r){for(var e=Kl(this),t=X_(arguments.length,1),n=e.entries,i=ls(r),o=t<2?void 0:arguments[1],l=o===void 0?o:ls(o),c=0;c<n.length;){var p=n[c];if(p.key===i&&(l===void 0||p.value===l)){if(fPe(n,c,1),l!==void 0)break}else c++}QE||(this.size=n.length),e.updateURL()},get:function(e){var t=Kl(this).entries;X_(arguments.length,1);for(var n=ls(e),i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){var t=Kl(this).entries;X_(arguments.length,1);for(var n=ls(e),i=[],o=0;o<t.length;o++)t[o].key===n&&gd(i,t[o].value);return i},has:function(e){for(var t=Kl(this).entries,n=X_(arguments.length,1),i=ls(e),o=n<2?void 0:arguments[1],l=o===void 0?o:ls(o),c=0;c<t.length;){var p=t[c++];if(p.key===i&&(l===void 0||p.value===l))return!0}return!1},set:function(e,t){var n=Kl(this);X_(arguments.length,1);for(var i=n.entries,o=!1,l=ls(e),c=ls(t),p=0,g;p<i.length;p++)g=i[p],g.key===l&&(o?fPe(i,p--,1):(o=!0,g.value=c));o||gd(i,{key:l,value:c}),QE||(this.size=i.length),n.updateURL()},sort:function(){var e=Kl(this);AGt(e.entries,function(t,n){return t.key>n.key?1:-1}),e.updateURL()},forEach:function(e){for(var t=Kl(this).entries,n=wGt(e,arguments.length>1?arguments[1]:void 0),i=0,o;i<t.length;)o=t[i++],n(o.value,o.key,this)},keys:function(){return new l8(this,"keys")},values:function(){return new l8(this,"values")},entries:function(){return new l8(this,"entries")}},{enumerable:!0});bPe(Q_,CGt,Q_.entries,{name:"entries"});bPe(Q_,"toString",function(){return Kl(this).serialize()},{enumerable:!0});QE&&vGt(Q_,"size",{get:function(){return Kl(this).entries.length},configurable:!0,enumerable:!0});_Gt(MO,J_);c8({global:!0,constructor:!0,forced:!xPe},{URLSearchParams:MO});!xPe&&o8(JE)&&(vPe=Ku(cPe.has),yPe=Ku(cPe.set),u8=function(r){if(EPe(r)){var e=r.body,t;if(EGt(e)===J_)return t=r.headers?new JE(r.headers):new JE,vPe(t,"content-type")||yPe(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),TGt(r,{body:sPe(0,ls(e)),headers:sPe(0,t)})}return r},o8(uPe)&&c8({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return uPe(e,arguments.length>1?u8(arguments[1]):{})}}),o8(IO)&&(SO=function(e){return wPe(this,a8),new IO(e,arguments.length>1?u8(arguments[1]):{})},a8.constructor=SO,SO.prototype=a8,c8({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:SO})));var vPe,yPe,u8,SO;CPe.exports={URLSearchParams:MO,getState:Kl}});var WPe=A(()=>{"use strict";hV();var $Gt=ae(),P8=ar(),HGt=KE(),R8=Lt(),PPe=kn(),tu=pt(),OO=Sn(),Xl=ci(),WGt=La(),M8=Nr(),O8=R3(),e0=oB(),Xu=Ls(),ZGt=Eg().codeAt,YGt=aPe(),ff=wr(),KGt=as(),XGt=dl(),BPe=p8(),UPe=xn(),QGt=UPe.set,LO=UPe.getterFor("URL"),JGt=BPe.URLSearchParams,e6t=BPe.getState,eS=R8.URL,A8=R8.TypeError,DO=R8.parseInt,t6t=Math.floor,RPe=Math.pow,eu=tu("".charAt),Qu=tu(/./.exec),rS=tu([].join),r6t=tu(1 .toString),n6t=tu([].pop),r0=tu([].push),d8=tu("".replace),i6t=tu([].shift),o6t=tu("".split),iS=tu("".slice),NO=tu("".toLowerCase),a6t=tu([].unshift),s6t="Invalid authority",m8="Invalid scheme",Lg="Invalid host",OPe="Invalid port",VPe=/[a-z]/i,l6t=/[\d+-.a-z]/i,C8=/\d/,u6t=/^0x/i,c6t=/^[0-7]+$/,h6t=/^\d+$/,GPe=/^[\da-f]+$/i,f6t=/[\0\t\n\r #%/:<>?@[\\\]^|]/,p6t=/[\0\t\n\r #/:<>?@[\\\]^|]/,d6t=/^[\u0000-\u0020]+/,m6t=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,g6t=/[\t\n\r]/g,Ql,v6t=function(r){var e=o6t(r,"."),t,n,i,o,l,c,p;if(e.length&&e[e.length-1]===""&&e.length--,t=e.length,t>4)return r;for(n=[],i=0;i<t;i++){if(o=e[i],o==="")return r;if(l=10,o.length>1&&eu(o,0)==="0"&&(l=Qu(u6t,o)?16:8,o=iS(o,l===8?1:2)),o==="")c=0;else{if(!Qu(l===10?h6t:l===8?c6t:GPe,o))return r;c=DO(o,l)}r0(n,c)}for(i=0;i<t;i++)if(c=n[i],i===t-1){if(c>=RPe(256,5-t))return null}else if(c>255)return null;for(p=n6t(n),i=0;i<n.length;i++)p+=n[i]*RPe(256,3-i);return p},y6t=function(r){var e=[0,0,0,0,0,0,0,0],t=0,n=null,i=0,o,l,c,p,g,_,x,T=function(){return eu(r,i)};if(T()===":"){if(eu(r,1)!==":")return;i+=2,t++,n=t}for(;T();){if(t===8)return;if(T()===":"){if(n!==null)return;i++,t++,n=t;continue}for(o=l=0;l<4&&Qu(GPe,T());)o=o*16+DO(T(),16),i++,l++;if(T()==="."){if(l===0||(i-=l,t>6))return;for(c=0;T();){if(p=null,c>0)if(T()==="."&&c<4)i++;else return;if(!Qu(C8,T()))return;for(;Qu(C8,T());){if(g=DO(T(),10),p===null)p=g;else{if(p===0)return;p=p*10+g}if(p>255)return;i++}e[t]=e[t]*256+p,c++,(c===2||c===4)&&t++}if(c!==4)return;break}else if(T()===":"){if(i++,!T())return}else if(T())return;e[t++]=o}if(n!==null)for(_=t-n,t=7;t!==0&&_>0;)x=e[t],e[t--]=e[n+_-1],e[n+--_]=x;else if(t!==8)return;return e},_6t=function(r){for(var e=null,t=1,n=null,i=0,o=0;o<8;o++)r[o]!==0?(i>t&&(e=n,t=i),n=null,i=0):(n===null&&(n=o),++i);return i>t?n:e},tS=function(r){var e,t,n,i;if(typeof r=="number"){for(e=[],t=0;t<4;t++)a6t(e,r%256),r=t6t(r/256);return rS(e,".")}if(typeof r=="object"){for(e="",n=_6t(r),t=0;t<8;t++)i&&r[t]===0||(i&&(i=!1),n===t?(e+=t?":":"::",i=!0):(e+=r6t(r[t],16),t<7&&(e+=":")));return"["+e+"]"}return r},RO={},$Pe=O8({},RO,{" ":1,"\"":1,"<":1,">":1,"`":1}),HPe=O8({},$Pe,{"#":1,"?":1,"{":1,"}":1}),g8=O8({},HPe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),vd=function(r,e){var t=ZGt(r,0);return t>32&&t<127&&!M8(e,r)?r:encodeURIComponent(r)},AO={ftp:21,file:null,http:80,https:443,ws:80,wss:443},nS=function(r,e){var t;return r.length===2&&Qu(VPe,eu(r,0))&&((t=eu(r,1))===":"||!e&&t==="|")},LPe=function(r){var e;return r.length>1&&nS(iS(r,0,2))&&(r.length===2||(e=eu(r,2))==="/"||e==="\\"||e==="?"||e==="#")},x6t=function(r){return r==="."||NO(r)==="%2e"},b6t=function(r){return r=NO(r),r===".."||r==="%2e."||r===".%2e"||r==="%2e%2e"},v8={},DPe={},y8={},NPe={},kPe={},_8={},qPe={},jPe={},CO={},PO={},x8={},b8={},w8={},E8={},FPe={},S8={},t0={},Kc={},zPe={},Dg={},hf={},L8=function(r,e,t){var n=ff(r),i,o,l;if(e){if(o=this.parse(n),o)throw new A8(o);this.searchParams=null}else{if(t!==void 0&&(i=new L8(t,!0)),o=this.parse(n,null,i),o)throw new A8(o);l=e6t(new JGt),l.bindURL(this),this.searchParams=l}};L8.prototype={type:"URL",parse:function(r,e,t){var n=this,i=e||v8,o=0,l="",c=!1,p=!1,g=!1,_,x,T,C;for(r=ff(r),e||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,r=d8(r,d6t,""),r=d8(r,m6t,"$1")),r=d8(r,g6t,""),_=e0(r);o<=_.length;){switch(x=_[o],i){case v8:if(x&&Qu(VPe,x))l+=NO(x),i=DPe;else{if(e)return m8;i=y8;continue}break;case DPe:if(x&&(Qu(l6t,x)||x==="+"||x==="-"||x==="."))l+=NO(x);else if(x===":"){if(e&&(n.isSpecial()!==M8(AO,l)||l==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=l,e){n.isSpecial()&&AO[n.scheme]===n.port&&(n.port=null);return}l="",n.scheme==="file"?i=E8:n.isSpecial()&&t&&t.scheme===n.scheme?i=NPe:n.isSpecial()?i=jPe:_[o+1]==="/"?(i=kPe,o++):(n.cannotBeABaseURL=!0,r0(n.path,""),i=zPe)}else{if(e)return m8;l="",i=y8,o=0;continue}break;case y8:if(!t||t.cannotBeABaseURL&&x!=="#")return m8;if(t.cannotBeABaseURL&&x==="#"){n.scheme=t.scheme,n.path=Xu(t.path),n.query=t.query,n.fragment="",n.cannotBeABaseURL=!0,i=hf;break}i=t.scheme==="file"?E8:_8;continue;case NPe:if(x==="/"&&_[o+1]==="/")i=CO,o++;else{i=_8;continue}break;case kPe:if(x==="/"){i=PO;break}else{i=Kc;continue}case _8:if(n.scheme=t.scheme,x===Ql)n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=Xu(t.path),n.query=t.query;else if(x==="/"||x==="\\"&&n.isSpecial())i=qPe;else if(x==="?")n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=Xu(t.path),n.query="",i=Dg;else if(x==="#")n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=Xu(t.path),n.query=t.query,n.fragment="",i=hf;else{n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=Xu(t.path),n.path.length--,i=Kc;continue}break;case qPe:if(n.isSpecial()&&(x==="/"||x==="\\"))i=CO;else if(x==="/")i=PO;else{n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,i=Kc;continue}break;case jPe:if(i=CO,x!=="/"||eu(l,o+1)!=="/")continue;o++;break;case CO:if(x!=="/"&&x!=="\\"){i=PO;continue}break;case PO:if(x==="@"){c&&(l="%40"+l),c=!0,T=e0(l);for(var D=0;D<T.length;D++){var F=T[D];if(F===":"&&!g){g=!0;continue}var O=vd(F,g8);g?n.password+=O:n.username+=O}l=""}else if(x===Ql||x==="/"||x==="?"||x==="#"||x==="\\"&&n.isSpecial()){if(c&&l==="")return s6t;o-=e0(l).length+1,l="",i=x8}else l+=x;break;case x8:case b8:if(e&&n.scheme==="file"){i=S8;continue}else if(x===":"&&!p){if(l==="")return Lg;if(C=n.parseHost(l),C)return C;if(l="",i=w8,e===b8)return}else if(x===Ql||x==="/"||x==="?"||x==="#"||x==="\\"&&n.isSpecial()){if(n.isSpecial()&&l==="")return Lg;if(e&&l===""&&(n.includesCredentials()||n.port!==null))return;if(C=n.parseHost(l),C)return C;if(l="",i=t0,e)return;continue}else x==="["?p=!0:x==="]"&&(p=!1),l+=x;break;case w8:if(Qu(C8,x))l+=x;else if(x===Ql||x==="/"||x==="?"||x==="#"||x==="\\"&&n.isSpecial()||e){if(l!==""){var k=DO(l,10);if(k>65535)return OPe;n.port=n.isSpecial()&&k===AO[n.scheme]?null:k,l=""}if(e)return;i=t0;continue}else return OPe;break;case E8:if(n.scheme="file",x==="/"||x==="\\")i=FPe;else if(t&&t.scheme==="file")switch(x){case Ql:n.host=t.host,n.path=Xu(t.path),n.query=t.query;break;case"?":n.host=t.host,n.path=Xu(t.path),n.query="",i=Dg;break;case"#":n.host=t.host,n.path=Xu(t.path),n.query=t.query,n.fragment="",i=hf;break;default:LPe(rS(Xu(_,o),""))||(n.host=t.host,n.path=Xu(t.path),n.shortenPath()),i=Kc;continue}else{i=Kc;continue}break;case FPe:if(x==="/"||x==="\\"){i=S8;break}t&&t.scheme==="file"&&!LPe(rS(Xu(_,o),""))&&(nS(t.path[0],!0)?r0(n.path,t.path[0]):n.host=t.host),i=Kc;continue;case S8:if(x===Ql||x==="/"||x==="\\"||x==="?"||x==="#"){if(!e&&nS(l))i=Kc;else if(l===""){if(n.host="",e)return;i=t0}else{if(C=n.parseHost(l),C)return C;if(n.host==="localhost"&&(n.host=""),e)return;l="",i=t0}continue}else l+=x;break;case t0:if(n.isSpecial()){if(i=Kc,x!=="/"&&x!=="\\")continue}else if(!e&&x==="?")n.query="",i=Dg;else if(!e&&x==="#")n.fragment="",i=hf;else if(x!==Ql&&(i=Kc,x!=="/"))continue;break;case Kc:if(x===Ql||x==="/"||x==="\\"&&n.isSpecial()||!e&&(x==="?"||x==="#")){if(b6t(l)?(n.shortenPath(),x!=="/"&&!(x==="\\"&&n.isSpecial())&&r0(n.path,"")):x6t(l)?x!=="/"&&!(x==="\\"&&n.isSpecial())&&r0(n.path,""):(n.scheme==="file"&&!n.path.length&&nS(l)&&(n.host&&(n.host=""),l=eu(l,0)+":"),r0(n.path,l)),l="",n.scheme==="file"&&(x===Ql||x==="?"||x==="#"))for(;n.path.length>1&&n.path[0]==="";)i6t(n.path);x==="?"?(n.query="",i=Dg):x==="#"&&(n.fragment="",i=hf)}else l+=vd(x,HPe);break;case zPe:x==="?"?(n.query="",i=Dg):x==="#"?(n.fragment="",i=hf):x!==Ql&&(n.path[0]+=vd(x,RO));break;case Dg:!e&&x==="#"?(n.fragment="",i=hf):x!==Ql&&(x==="'"&&n.isSpecial()?n.query+="%27":x==="#"?n.query+="%23":n.query+=vd(x,RO));break;case hf:x!==Ql&&(n.fragment+=vd(x,$Pe));break}o++}},parseHost:function(r){var e,t,n;if(eu(r,0)==="["){if(eu(r,r.length-1)!=="]"||(e=y6t(iS(r,1,-1)),!e))return Lg;this.host=e}else if(this.isSpecial()){if(r=YGt(r),Qu(f6t,r)||(e=v6t(r),e===null))return Lg;this.host=e}else{if(Qu(p6t,r))return Lg;for(e="",t=e0(r),n=0;n<t.length;n++)e+=vd(t[n],RO);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return M8(AO,this.scheme)},shortenPath:function(){var r=this.path,e=r.length;e&&(this.scheme!=="file"||e!==1||!nS(r[0],!0))&&r.length--},serialize:function(){var r=this,e=r.scheme,t=r.username,n=r.password,i=r.host,o=r.port,l=r.path,c=r.query,p=r.fragment,g=e+":";return i!==null?(g+="//",r.includesCredentials()&&(g+=t+(n?":"+n:"")+"@"),g+=tS(i),o!==null&&(g+=":"+o)):e==="file"&&(g+="//"),g+=r.cannotBeABaseURL?l[0]:l.length?"/"+rS(l,"/"):"",c!==null&&(g+="?"+c),p!==null&&(g+="#"+p),g},setHref:function(r){var e=this.parse(r);if(e)throw new A8(e);this.searchParams.update()},getOrigin:function(){var r=this.scheme,e=this.port;if(r==="blob")try{return new n0(r.path[0]).origin}catch(t){return"null"}return r==="file"||!this.isSpecial()?"null":r+"://"+tS(this.host)+(e!==null?":"+e:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(r){this.parse(ff(r)+":",v8)},getUsername:function(){return this.username},setUsername:function(r){var e=e0(ff(r));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var t=0;t<e.length;t++)this.username+=vd(e[t],g8)}},getPassword:function(){return this.password},setPassword:function(r){var e=e0(ff(r));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var t=0;t<e.length;t++)this.password+=vd(e[t],g8)}},getHost:function(){var r=this.host,e=this.port;return r===null?"":e===null?tS(r):tS(r)+":"+e},setHost:function(r){this.cannotBeABaseURL||this.parse(r,x8)},getHostname:function(){var r=this.host;return r===null?"":tS(r)},setHostname:function(r){this.cannotBeABaseURL||this.parse(r,b8)},getPort:function(){var r=this.port;return r===null?"":ff(r)},setPort:function(r){this.cannotHaveUsernamePasswordPort()||(r=ff(r),r===""?this.port=null:this.parse(r,w8))},getPathname:function(){var r=this.path;return this.cannotBeABaseURL?r[0]:r.length?"/"+rS(r,"/"):""},setPathname:function(r){this.cannotBeABaseURL||(this.path=[],this.parse(r,t0))},getSearch:function(){var r=this.query;return r?"?"+r:""},setSearch:function(r){r=ff(r),r===""?this.query=null:(eu(r,0)==="?"&&(r=iS(r,1)),this.query="",this.parse(r,Dg)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var r=this.fragment;return r?"#"+r:""},setHash:function(r){if(r=ff(r),r===""){this.fragment=null;return}eu(r,0)==="#"&&(r=iS(r,1)),this.fragment="",this.parse(r,hf)},update:function(){this.query=this.searchParams.serialize()||null}};var n0=function(e){var t=WGt(this,us),n=XGt(arguments.length,1)>1?arguments[1]:void 0,i=QGt(t,new L8(e,!1,n));P8||(t.href=i.serialize(),t.origin=i.getOrigin(),t.protocol=i.getProtocol(),t.username=i.getUsername(),t.password=i.getPassword(),t.host=i.getHost(),t.hostname=i.getHostname(),t.port=i.getPort(),t.pathname=i.getPathname(),t.search=i.getSearch(),t.searchParams=i.getSearchParams(),t.hash=i.getHash())},us=n0.prototype,Jl=function(r,e){return{get:function(){return LO(this)[r]()},set:e&&function(t){return LO(this)[e](t)},configurable:!0,enumerable:!0}};P8&&(Xl(us,"href",Jl("serialize","setHref")),Xl(us,"origin",Jl("getOrigin")),Xl(us,"protocol",Jl("getProtocol","setProtocol")),Xl(us,"username",Jl("getUsername","setUsername")),Xl(us,"password",Jl("getPassword","setPassword")),Xl(us,"host",Jl("getHost","setHost")),Xl(us,"hostname",Jl("getHostname","setHostname")),Xl(us,"port",Jl("getPort","setPort")),Xl(us,"pathname",Jl("getPathname","setPathname")),Xl(us,"search",Jl("getSearch","setSearch")),Xl(us,"searchParams",Jl("getSearchParams")),Xl(us,"hash",Jl("getHash","setHash")));OO(us,"toJSON",function(){return LO(this).serialize()},{enumerable:!0});OO(us,"toString",function(){return LO(this).serialize()},{enumerable:!0});eS&&(T8=eS.createObjectURL,I8=eS.revokeObjectURL,T8&&OO(n0,"createObjectURL",PPe(T8,eS)),I8&&OO(n0,"revokeObjectURL",PPe(I8,eS)));var T8,I8;KGt(n0,"URL");$Gt({global:!0,constructor:!0,forced:!HGt,sham:!P8},{URL:n0})});var ZPe=A(()=>{"use strict";WPe()});var XPe=A(()=>{"use strict";var w6t=ae(),E6t=gr(),KPe=yt(),S6t=dl(),YPe=wr(),T6t=KE(),D8=E6t("URL"),I6t=T6t&&KPe(function(){D8.canParse()}),M6t=KPe(function(){return D8.canParse.length!==1});w6t({target:"URL",stat:!0,forced:!I6t||M6t},{canParse:function(e){var t=S6t(arguments.length,1),n=YPe(e),i=t<2||arguments[1]===void 0?void 0:YPe(arguments[1]);try{return!!new D8(n,i)}catch(o){return!1}}})});var JPe=A(()=>{"use strict";var A6t=ae(),C6t=gr(),P6t=dl(),QPe=wr(),R6t=KE(),O6t=C6t("URL");A6t({target:"URL",stat:!0,forced:!R6t},{parse:function(e){var t=P6t(arguments.length,1),n=QPe(e),i=t<2||arguments[1]===void 0?void 0:QPe(arguments[1]);try{return new O6t(n,i)}catch(o){return null}}})});var eRe=A(()=>{"use strict";var L6t=ae(),D6t=Dt();L6t({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return D6t(URL.prototype.toString,this)}})});var tRe=A(()=>{"use strict";p8()});var oRe=A(()=>{"use strict";var N6t=Sn(),kO=pt(),rRe=wr(),k6t=dl(),iRe=URLSearchParams,qO=iRe.prototype,q6t=kO(qO.append),nRe=kO(qO.delete),j6t=kO(qO.forEach),F6t=kO([].push),N8=new iRe("a=1&a=2&b=3");N8.delete("a",1);N8.delete("b",void 0);N8+""!="a=2"&&N6t(qO,"delete",function(r){var e=arguments.length,t=e<2?void 0:arguments[1];if(e&&t===void 0)return nRe(this,r);var n=[];j6t(this,function(x,T){F6t(n,{key:T,value:x})}),k6t(e,1);for(var i=rRe(r),o=rRe(t),l=0,c=0,p=!1,g=n.length,_;l<g;)_=n[l++],p||_.key===i?(p=!0,nRe(this,_.key)):c++;for(;c<g;)_=n[c++],_.key===i&&_.value===o||q6t(this,_.key,_.value)},{enumerable:!0,unsafe:!0})});var uRe=A(()=>{"use strict";var z6t=Sn(),sRe=pt(),B6t=wr(),U6t=dl(),lRe=URLSearchParams,k8=lRe.prototype,V6t=sRe(k8.getAll),G6t=sRe(k8.has),aRe=new lRe("a=1");(aRe.has("a",2)||!aRe.has("a",void 0))&&z6t(k8,"has",function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&n===void 0)return G6t(this,e);var i=V6t(this,e);U6t(t,1);for(var o=B6t(n),l=0;l<i.length;)if(i[l++]===o)return!0;return!1},{enumerable:!0,unsafe:!0})});var cRe=A(()=>{"use strict";var $6t=ar(),H6t=pt(),W6t=ci(),q8=URLSearchParams.prototype,Z6t=H6t(q8.forEach);$6t&&!("size"in q8)&&W6t(q8,"size",{get:function(){var e=0;return Z6t(this,function(){e++}),e},configurable:!0,enumerable:!0})});var fRe=A((OLr,hRe)=>{"use strict";soe();doe();moe();goe();voe();yoe();_oe();xoe();boe();woe();Eoe();Soe();Toe();Ioe();Moe();Joe();iae();H4();Sae();K4();Oae();kae();jae();Bae();Uae();Gae();Hae();tB();rB();Xae();Qae();tse();cse();hse();pse();dse();E1();Nse();Fse();zse();Use();Gse();Qse();ele();rle();ole();ale();wle();Tle();Ile();wB();SB();TB();Ple();Rle();Ole();MB();uue();bue();Mue();Cue();WB();XB();eU();mU();gU();ice();ace();uce();cce();xce();bce();Ice();Pce();Oce();jce();Bce();$ce();EU();AU();LU();NU();qU();FU();$U();WU();ZU();hP();XU();JU();t3();r3();R4();Ehe();gP();c3();$he();Zhe();Khe();Xhe();Qhe();tfe();nfe();ife();d3();afe();lfe();cfe();hfe();ffe();pfe();gfe();_fe();xfe();bfe();Ofe();Lfe();Nfe();qfe();jfe();Ffe();zfe();Bfe();Wfe();tpe();ape();fpe();mpe();xpe();bpe();Spe();Ipe();Ape();Cpe();Npe();kpe();qpe();zpe();Bpe();Upe();Gpe();D3();N3();Wpe();Ype();Xpe();Jpe();tde();rde();nde();ide();ude();cde();hde();dde();mde();vde();_de();Ome();v5();y5();qme();w5();E5();zme();Wme();Kme();Xme();tge();rge();nge();ige();oge();age();sge();fge();dge();mge();Oge();F5();zge();zP();Hge();Zge();Xge();tve();nve();W5();K5();Q5();eV();rV();oV();sV();Dve();jve();Vve();uV();Wve();cV();hV();sye();yV();yye();_ye();Eye();Sye();Pye();AV();Nye();zye();Vye();$ye();NV();Qye();n_e();l_e();f_e();p_e();d_e();m_e();g_e();v_e();y_e();x_e();b_e();w_e();E_e();S_e();T_e();Q_e();J_e();e0e();t0e();r0e();n0e();i0e();o0e();a0e();KV();u0e();h0e();p0e();g0e();y0e();x0e();XV();QV();S0e();T0e();M0e();C0e();D0e();k0e();j0e();F0e();B0e();V0e();$0e();W0e();J0e();exe();rxe();lxe();cxe();mxe();fG();pG();vxe();mG();wxe();mR();jxe();Fxe();Uxe();mbe();gbe();vbe();ybe();_be();xbe();wbe();Ebe();Tbe();Ibe();Cbe();Pbe();Lbe();Dbe();Nbe();kbe();Vbe();Gbe();$be();Hbe();Wbe();awe();hwe();Ewe();Mwe();Cwe();Pwe();Owe();Lwe();Fwe();zwe();Uwe();Vwe();Gwe();$we();Hwe();Ywe();Kwe();n1e();u1e();h1e();f1e();p1e();d1e();m1e();x1e();S1e();I1e();A1e();C1e();O1e();L1e();D1e();N1e();q1e();z1e();V1e();G1e();$1e();H1e();W1e();Z1e();Y1e();K1e();X1e();Q1e();eEe();tEe();rEe();nEe();iEe();aEe();uEe();bEe();CEe();REe();LEe();DEe();kEe();qEe();jEe();BEe();UEe();VEe();GEe();WEe();YEe();KEe();QEe();eSe();tSe();iSe();oSe();aSe();lSe();cSe();hSe();gSe();vSe();ySe();xSe();bSe();wSe();ESe();SSe();TSe();ISe();MSe();RSe();OSe();qSe();jSe();BSe();USe();VSe();WSe();ZSe();YSe();KSe();hTe();fTe();pTe();dTe();mTe();bTe();ETe();TTe();CTe();RTe();LTe();kTe();jTe();zTe();BTe();UTe();VTe();GTe();YTe();KTe();QTe();JTe();tIe();rIe();nIe();iIe();oIe();aIe();sIe();lIe();uIe();hIe();pIe();mIe();gIe();vIe();yIe();_Ie();xIe();bIe();wIe();MIe();OIe();QIe();JIe();eMe();tMe();rMe();nMe();iMe();oMe();sMe();lMe();mMe();gMe();vMe();yMe();_Me();xMe();bMe();wMe();SMe();TMe();MMe();CMe();PMe();RMe();OMe();LMe();DMe();NMe();kMe();qMe();YMe();eAe();rAe();nAe();oAe();aAe();lAe();cAe();fAe();dAe();mAe();_Ae();xAe();EAe();SAe();IAe();AAe();NAe();zAe();WAe();QAe();cCe();vCe();_Ce();ACe();CCe();RCe();UCe();YCe();ZPe();XPe();JPe();eRe();tRe();oRe();uRe();cRe();hRe.exports=wC()});var dRe=A((LLr,pRe)=>{"use strict";pRe.exports=fRe()});var j8=A((DLr,mRe)=>{"use strict";mRe.exports=function(e,t){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(t,i)}}});var zs=A((NLr,yRe)=>{"use strict";var Y6t=j8(),Ng=Object.prototype.toString;function B8(r){return Ng.call(r)==="[object Array]"}function F8(r){return typeof r=="undefined"}function K6t(r){return r!==null&&!F8(r)&&r.constructor!==null&&!F8(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function X6t(r){return Ng.call(r)==="[object ArrayBuffer]"}function Q6t(r){return typeof FormData!="undefined"&&r instanceof FormData}function J6t(r){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&r.buffer instanceof ArrayBuffer,e}function e$t(r){return typeof r=="string"}function t$t(r){return typeof r=="number"}function gRe(r){return r!==null&&typeof r=="object"}function jO(r){if(Ng.call(r)!=="[object Object]")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}function r$t(r){return Ng.call(r)==="[object Date]"}function n$t(r){return Ng.call(r)==="[object File]"}function i$t(r){return Ng.call(r)==="[object Blob]"}function vRe(r){return Ng.call(r)==="[object Function]"}function o$t(r){return gRe(r)&&vRe(r.pipe)}function a$t(r){return typeof URLSearchParams!="undefined"&&r instanceof URLSearchParams}function s$t(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function l$t(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function U8(r,e){if(!(r===null||typeof r=="undefined"))if(typeof r!="object"&&(r=[r]),B8(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function z8(){var r={};function e(i,o){jO(r[o])&&jO(i)?r[o]=z8(r[o],i):jO(i)?r[o]=z8({},i):B8(i)?r[o]=i.slice():r[o]=i}for(var t=0,n=arguments.length;t<n;t++)U8(arguments[t],e);return r}function u$t(r,e,t){return U8(e,function(i,o){t&&typeof i=="function"?r[o]=Y6t(i,t):r[o]=i}),r}function c$t(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}yRe.exports={isArray:B8,isArrayBuffer:X6t,isBuffer:K6t,isFormData:Q6t,isArrayBufferView:J6t,isString:e$t,isNumber:t$t,isObject:gRe,isPlainObject:jO,isUndefined:F8,isDate:r$t,isFile:n$t,isBlob:i$t,isFunction:vRe,isStream:o$t,isURLSearchParams:a$t,isStandardBrowserEnv:l$t,forEach:U8,merge:z8,extend:u$t,trim:s$t,stripBOM:c$t}});var V8=A((kLr,xRe)=>{"use strict";var i0=zs();function _Re(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}xRe.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(i0.isURLSearchParams(t))i=t.toString();else{var o=[];i0.forEach(t,function(p,g){p===null||typeof p=="undefined"||(i0.isArray(p)?g=g+"[]":p=[p],i0.forEach(p,function(x){i0.isDate(x)?x=x.toISOString():i0.isObject(x)&&(x=JSON.stringify(x)),o.push(_Re(g)+"="+_Re(x))}))}),i=o.join("&")}if(i){var l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var wRe=A((qLr,bRe)=>{"use strict";var h$t=zs();function FO(){this.handlers=[]}FO.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};FO.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};FO.prototype.forEach=function(e){h$t.forEach(this.handlers,function(n){n!==null&&e(n)})};bRe.exports=FO});var SRe=A((jLr,ERe)=>{"use strict";var f$t=zs();ERe.exports=function(e,t){f$t.forEach(e,function(i,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[o])})}});var G8=A((FLr,TRe)=>{"use strict";TRe.exports=function(e,t,n,i,o){return e.config=t,n&&(e.code=n),e.request=i,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var $8=A((zLr,IRe)=>{"use strict";var p$t=G8();IRe.exports=function(e,t,n,i,o){var l=new Error(e);return p$t(l,t,n,i,o)}});var ARe=A((BLr,MRe)=>{"use strict";var d$t=$8();MRe.exports=function(e,t,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(d$t("Request failed with status code "+n.status,n.config,null,n.request,n))}});var PRe=A((ULr,CRe)=>{"use strict";var zO=zs();CRe.exports=zO.isStandardBrowserEnv()?function(){return{write:function(t,n,i,o,l,c){var p=[];p.push(t+"="+encodeURIComponent(n)),zO.isNumber(i)&&p.push("expires="+new Date(i).toGMTString()),zO.isString(o)&&p.push("path="+o),zO.isString(l)&&p.push("domain="+l),c===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(t){var n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var ORe=A((VLr,RRe)=>{"use strict";RRe.exports=function(e){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var DRe=A((GLr,LRe)=>{"use strict";LRe.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}});var kRe=A(($Lr,NRe)=>{"use strict";var m$t=ORe(),g$t=DRe();NRe.exports=function(e,t){return e&&!m$t(t)?g$t(e,t):t}});var jRe=A((HLr,qRe)=>{"use strict";var H8=zs(),v$t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];qRe.exports=function(e){var t={},n,i,o;return e&&H8.forEach(e.split(`
`),function(c){if(o=c.indexOf(":"),n=H8.trim(c.substr(0,o)).toLowerCase(),i=H8.trim(c.substr(o+1)),n){if(t[n]&&v$t.indexOf(n)>=0)return;n==="set-cookie"?t[n]=(t[n]?t[n]:[]).concat([i]):t[n]=t[n]?t[n]+", "+i:i}}),t}});var BRe=A((WLr,zRe)=>{"use strict";var FRe=zs();zRe.exports=FRe.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),n;function i(o){var l=o;return e&&(t.setAttribute("href",l),l=t.href),t.setAttribute("href",l),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(l){var c=FRe.isString(l)?i(l):l;return c.protocol===n.protocol&&c.host===n.host}}():function(){return function(){return!0}}()});var oS=A((ZLr,URe)=>{"use strict";function W8(r){this.message=r}W8.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};W8.prototype.__CANCEL__=!0;URe.exports=W8});var Y8=A((YLr,VRe)=>{"use strict";var BO=zs(),y$t=ARe(),_$t=PRe(),x$t=V8(),b$t=kRe(),w$t=jRe(),E$t=BRe(),Z8=$8(),S$t=aS(),T$t=oS();VRe.exports=function(e){return new Promise(function(n,i){var o=e.data,l=e.headers,c=e.responseType,p;function g(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}BO.isFormData(o)&&delete l["Content-Type"];var _=new XMLHttpRequest;if(e.auth){var x=e.auth.username||"",T=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";l.Authorization="Basic "+btoa(x+":"+T)}var C=b$t(e.baseURL,e.url);_.open(e.method.toUpperCase(),x$t(C,e.params,e.paramsSerializer),!0),_.timeout=e.timeout;function D(){if(_){var O="getAllResponseHeaders"in _?w$t(_.getAllResponseHeaders()):null,k=!c||c==="text"||c==="json"?_.responseText:_.response,q={data:k,status:_.status,statusText:_.statusText,headers:O,config:e,request:_};y$t(function(H){n(H),g()},function(H){i(H),g()},q),_=null}}if("onloadend"in _?_.onloadend=D:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(D)},_.onabort=function(){_&&(i(Z8("Request aborted",e,"ECONNABORTED",_)),_=null)},_.onerror=function(){i(Z8("Network Error",e,null,_)),_=null},_.ontimeout=function(){var k=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",q=e.transitional||S$t.transitional;e.timeoutErrorMessage&&(k=e.timeoutErrorMessage),i(Z8(k,e,q.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",_)),_=null},BO.isStandardBrowserEnv()){var F=(e.withCredentials||E$t(C))&&e.xsrfCookieName?_$t.read(e.xsrfCookieName):void 0;F&&(l[e.xsrfHeaderName]=F)}"setRequestHeader"in _&&BO.forEach(l,function(k,q){typeof o=="undefined"&&q.toLowerCase()==="content-type"?delete l[q]:_.setRequestHeader(q,k)}),BO.isUndefined(e.withCredentials)||(_.withCredentials=!!e.withCredentials),c&&c!=="json"&&(_.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&_.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&_.upload&&_.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(O){_&&(i(!O||O&&O.type?new T$t("canceled"):O),_.abort(),_=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),o||(o=null),_.send(o)})}});var aS=A((KLr,HRe)=>{"use strict";var xa=zs(),GRe=SRe(),I$t=G8(),M$t={"Content-Type":"application/x-www-form-urlencoded"};function $Re(r,e){!xa.isUndefined(r)&&xa.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function A$t(){var r;return typeof XMLHttpRequest!="undefined"?r=Y8():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(r=Y8()),r}function C$t(r,e,t){if(xa.isString(r))try{return(e||JSON.parse)(r),xa.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var UO={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:A$t(),transformRequest:[function(e,t){return GRe(t,"Accept"),GRe(t,"Content-Type"),xa.isFormData(e)||xa.isArrayBuffer(e)||xa.isBuffer(e)||xa.isStream(e)||xa.isFile(e)||xa.isBlob(e)?e:xa.isArrayBufferView(e)?e.buffer:xa.isURLSearchParams(e)?($Re(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):xa.isObject(e)||t&&t["Content-Type"]==="application/json"?($Re(t,"application/json"),C$t(e)):e}],transformResponse:[function(e){var t=this.transitional||UO.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&xa.isString(e)&&e.length)try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?I$t(l,this,"E_JSON_PARSE"):l}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};xa.forEach(["delete","get","head"],function(e){UO.headers[e]={}});xa.forEach(["post","put","patch"],function(e){UO.headers[e]=xa.merge(M$t)});HRe.exports=UO});var ZRe=A((XLr,WRe)=>{"use strict";var P$t=zs(),R$t=aS();WRe.exports=function(e,t,n){var i=this||R$t;return P$t.forEach(n,function(l){e=l.call(i,e,t)}),e}});var K8=A((QLr,YRe)=>{"use strict";YRe.exports=function(e){return!!(e&&e.__CANCEL__)}});var QRe=A((JLr,XRe)=>{"use strict";var KRe=zs(),X8=ZRe(),O$t=K8(),L$t=aS(),D$t=oS();function Q8(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new D$t("canceled")}XRe.exports=function(e){Q8(e),e.headers=e.headers||{},e.data=X8.call(e,e.data,e.headers,e.transformRequest),e.headers=KRe.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),KRe.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||L$t.adapter;return t(e).then(function(i){return Q8(e),i.data=X8.call(e,i.data,i.headers,e.transformResponse),i},function(i){return O$t(i)||(Q8(e),i&&i.response&&(i.response.data=X8.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var J8=A((e2r,JRe)=>{"use strict";var gl=zs();JRe.exports=function(e,t){t=t||{};var n={};function i(_,x){return gl.isPlainObject(_)&&gl.isPlainObject(x)?gl.merge(_,x):gl.isPlainObject(x)?gl.merge({},x):gl.isArray(x)?x.slice():x}function o(_){if(gl.isUndefined(t[_])){if(!gl.isUndefined(e[_]))return i(void 0,e[_])}else return i(e[_],t[_])}function l(_){if(!gl.isUndefined(t[_]))return i(void 0,t[_])}function c(_){if(gl.isUndefined(t[_])){if(!gl.isUndefined(e[_]))return i(void 0,e[_])}else return i(void 0,t[_])}function p(_){if(_ in t)return i(e[_],t[_]);if(_ in e)return i(void 0,e[_])}var g={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:p};return gl.forEach(Object.keys(e).concat(Object.keys(t)),function(x){var T=g[x]||o,C=T(x);gl.isUndefined(C)&&T!==p||(n[x]=C)}),n}});var eH=A((t2r,eOe)=>{eOe.exports={version:"0.24.0"}});var nOe=A((r2r,rOe)=>{"use strict";var N$t=eH().version,tH={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){tH[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var tOe={};tH.transitional=function(e,t,n){function i(o,l){return"[Axios v"+N$t+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return function(o,l,c){if(e===!1)throw new Error(i(l," has been removed"+(t?" in "+t:"")));return t&&!tOe[l]&&(tOe[l]=!0,console.warn(i(l," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,l,c):!0}};function k$t(r,e,t){if(typeof r!="object")throw new TypeError("options must be an object");for(var n=Object.keys(r),i=n.length;i-->0;){var o=n[i],l=e[o];if(l){var c=r[o],p=c===void 0||l(c,o,r);if(p!==!0)throw new TypeError("option "+o+" must be "+p);continue}if(t!==!0)throw Error("Unknown option "+o)}}rOe.exports={assertOptions:k$t,validators:tH}});var uOe=A((n2r,lOe)=>{"use strict";var aOe=zs(),q$t=V8(),iOe=wRe(),oOe=QRe(),VO=J8(),sOe=nOe(),o0=sOe.validators;function sS(r){this.defaults=r,this.interceptors={request:new iOe,response:new iOe}}sS.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=VO(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&sOe.assertOptions(t,{silentJSONParsing:o0.transitional(o0.boolean),forcedJSONParsing:o0.transitional(o0.boolean),clarifyTimeoutError:o0.transitional(o0.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(e)===!1||(i=i&&T.synchronous,n.unshift(T.fulfilled,T.rejected))});var o=[];this.interceptors.response.forEach(function(T){o.push(T.fulfilled,T.rejected)});var l;if(!i){var c=[oOe,void 0];for(Array.prototype.unshift.apply(c,n),c=c.concat(o),l=Promise.resolve(e);c.length;)l=l.then(c.shift(),c.shift());return l}for(var p=e;n.length;){var g=n.shift(),_=n.shift();try{p=g(p)}catch(x){_(x);break}}try{l=oOe(p)}catch(x){return Promise.reject(x)}for(;o.length;)l=l.then(o.shift(),o.shift());return l};sS.prototype.getUri=function(e){return e=VO(this.defaults,e),q$t(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};aOe.forEach(["delete","get","head","options"],function(e){sS.prototype[e]=function(t,n){return this.request(VO(n||{},{method:e,url:t,data:(n||{}).data}))}});aOe.forEach(["post","put","patch"],function(e){sS.prototype[e]=function(t,n,i){return this.request(VO(i||{},{method:e,url:t,data:n}))}});lOe.exports=sS});var hOe=A((i2r,cOe)=>{"use strict";var j$t=oS();function a0(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var t=this;this.promise.then(function(n){if(t._listeners){var i,o=t._listeners.length;for(i=0;i<o;i++)t._listeners[i](n);t._listeners=null}}),this.promise.then=function(n){var i,o=new Promise(function(l){t.subscribe(l),i=l}).then(n);return o.cancel=function(){t.unsubscribe(i)},o},r(function(i){t.reason||(t.reason=new j$t(i),e(t.reason))})}a0.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};a0.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};a0.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}};a0.source=function(){var e,t=new a0(function(i){e=i});return{token:t,cancel:e}};cOe.exports=a0});var pOe=A((o2r,fOe)=>{"use strict";fOe.exports=function(e){return function(n){return e.apply(null,n)}}});var mOe=A((a2r,dOe)=>{"use strict";dOe.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var yOe=A((s2r,rH)=>{"use strict";var gOe=zs(),F$t=j8(),GO=uOe(),z$t=J8(),B$t=aS();function vOe(r){var e=new GO(r),t=F$t(GO.prototype.request,e);return gOe.extend(t,GO.prototype,e),gOe.extend(t,e),t.create=function(i){return vOe(z$t(r,i))},t}var Xc=vOe(B$t);Xc.Axios=GO;Xc.Cancel=oS();Xc.CancelToken=hOe();Xc.isCancel=K8();Xc.VERSION=eH().version;Xc.all=function(e){return Promise.all(e)};Xc.spread=pOe();Xc.isAxiosError=mOe();rH.exports=Xc;rH.exports.default=Xc});var lS=A((l2r,_Oe)=>{_Oe.exports=yOe()});var oH=A((nH,iH)=>{(function(r,e){typeof nH=="object"&&typeof iH!="undefined"?iH.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self,r.maplibregl=e())})(nH,function(){"use strict";var r={},e={};function t(i,o,l){if(e[i]=l,i==="index"){var c="var sharedModule = {}; ("+e.shared+")(sharedModule); ("+e.worker+")(sharedModule);",p={};return e.shared(p),e.index(r,p),typeof window!="undefined"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([c],{type:"text/javascript"}))),r}}t("shared",["exports"],function(i){"use strict";function o(f,s,h,d){return new(h||(h=Promise))(function(y,E){function S(N){try{R(d.next(N))}catch(z){E(z)}}function M(N){try{R(d.throw(N))}catch(z){E(z)}}function R(N){var z;N.done?y(N.value):(z=N.value,z instanceof h?z:new h(function(V){V(z)})).then(S,M)}R((d=d.apply(f,s||[])).next())})}function l(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var c,p;function g(){if(p)return c;function f(s,h){this.x=s,this.y=h}return p=1,c=f,f.prototype={clone:function(){return new f(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,h){return this.clone()._rotateAround(s,h)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var h=s.x-this.x,d=s.y-this.y;return h*h+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,h){return Math.atan2(this.x*h-this.y*s,this.x*s+this.y*h)},_matMult:function(s){var h=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=h,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var h=Math.cos(s),d=Math.sin(s),y=d*this.x+h*this.y;return this.x=h*this.x-d*this.y,this.y=y,this},_rotateAround:function(s,h){var d=Math.cos(s),y=Math.sin(s),E=h.y+y*(this.x-h.x)+d*(this.y-h.y);return this.x=h.x+d*(this.x-h.x)-y*(this.y-h.y),this.y=E,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(s){return s instanceof f?s:Array.isArray(s)?new f(s[0],s[1]):s},c}typeof SuppressedError=="function"&&SuppressedError;var _,x,T=l(g()),C=function(){if(x)return _;function f(s,h,d,y){this.cx=3*s,this.bx=3*(d-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(y-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=h,this.p2x=d,this.p2y=y}return x=1,_=f,f.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,h){if(h===void 0&&(h=1e-6),s<0)return 0;if(s>1)return 1;for(var d=s,y=0;y<8;y++){var E=this.sampleCurveX(d)-s;if(Math.abs(E)<h)return d;var S=this.sampleCurveDerivativeX(d);if(Math.abs(S)<1e-6)break;d-=E/S}var M=0,R=1;for(d=s,y=0;y<20&&(E=this.sampleCurveX(d),!(Math.abs(E-s)<h));y++)s>E?M=d:R=d,d=.5*(R-M)+M;return d},solve:function(s,h){return this.sampleCurveY(this.solveCurveX(s,h))}},_}(),D=l(C);let F,O;function k(){return F==null&&(F=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),F}function q(){if(O==null&&(O=!1,k())){let s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let d=0;d<5*5;d++){let y=4*d;s.fillStyle=`rgb(${y},${y+1},${y+2})`,s.fillRect(d%5,Math.floor(d/5),1,1)}let h=s.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&h[d]!==d){O=!0;break}}}return O||!1}var U=1e-6,H=typeof Float32Array!="undefined"?Float32Array:Array;function se(){var f=new H(9);return H!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function ie(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function ue(){var f=new H(3);return H!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function ve(f){return Math.hypot(f[0],f[1],f[2])}function ye(f,s,h){var d=new H(3);return d[0]=f,d[1]=s,d[2]=h,d}Math.hypot||(Math.hypot=function(){for(var f=0,s=arguments.length;s--;)f+=arguments[s]*arguments[s];return Math.sqrt(f)});var ge,_e=ve;function Le(f,s,h){var d=s[0],y=s[1],E=s[2],S=s[3];return f[0]=h[0]*d+h[4]*y+h[8]*E+h[12]*S,f[1]=h[1]*d+h[5]*y+h[9]*E+h[13]*S,f[2]=h[2]*d+h[6]*y+h[10]*E+h[14]*S,f[3]=h[3]*d+h[7]*y+h[11]*E+h[15]*S,f}function Re(){var f=new H(4);return H!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function je(){var f=new H(2);return H!=Float32Array&&(f[0]=0,f[1]=0),f}function $e(f,s){var h=new H(2);return h[0]=f,h[1]=s,h}ue(),ge=new H(4),H!=Float32Array&&(ge[0]=0,ge[1]=0,ge[2]=0,ge[3]=0),ue(),ye(1,0,0),ye(0,1,0),Re(),Re(),se(),je();let Be=8192;function nt(f,s,h){return s*(Be/(f.tileSize*Math.pow(2,h-f.tileID.overscaledZ)))}function We(f,s){return(f%s+s)%s}function mt(f,s,h){return f*(1-h)+s*h}function ht(f){if(f<=0)return 0;if(f>=1)return 1;let s=f*f,h=s*f;return 4*(f<.5?h:3*(f-s)+h-.75)}function _t(f,s,h,d){let y=new D(f,s,h,d);return E=>y.solve(E)}let ze=_t(.25,.1,.25,1);function St(f,s,h){return Math.min(h,Math.max(s,f))}function jt(f,s,h){let d=h-s,y=((f-s)%d+d)%d+s;return y===s?h:y}function Fe(f,...s){for(let h of s)for(let d in h)f[d]=h[d];return f}let st=1;function He(f,s,h){let d={};for(let y in f)d[y]=s.call(this,f[y],y,f);return d}function et(f,s,h){let d={};for(let y in f)s.call(this,f[y],y,f)&&(d[y]=f[y]);return d}function it(f){return Array.isArray(f)?f.map(it):typeof f=="object"&&f?He(f,it):f}let at={};function Nt(f){at[f]||(typeof console!="undefined"&&console.warn(f),at[f]=!0)}function At(f,s,h){return(h.y-f.y)*(s.x-f.x)>(s.y-f.y)*(h.x-f.x)}function Mt(f){return typeof WorkerGlobalScope!="undefined"&&f!==void 0&&f instanceof WorkerGlobalScope}let Ut=null;function Vt(f){return typeof ImageBitmap!="undefined"&&f instanceof ImageBitmap}let $t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Lr(f,s,h,d,y){return o(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let E=new VideoFrame(f,{timestamp:0});try{let S=E==null?void 0:E.format;if(!S||!S.startsWith("BGR")&&!S.startsWith("RGB"))throw new Error(`Unrecognized format ${S}`);let M=S.startsWith("BGR"),R=new Uint8ClampedArray(d*y*4);if(yield E.copyTo(R,function(N,z,V,W,K){let Q=4*Math.max(1,0),re=(Math.max(0,V)-V)*W*4+Q,ce=4*W,me=Math.max(0,z),Oe=Math.max(0,V);return{rect:{x:me,y:Oe,width:Math.min(N.width,z+W)-me,height:Math.min(N.height,V+K)-Oe},layout:[{offset:re,stride:ce}]}}(f,s,h,d,y)),M)for(let N=0;N<R.length;N+=4){let z=R[N];R[N]=R[N+2],R[N+2]=z}return R}finally{E.close()}})}let yr,ur;function cr(f,s,h,d){return f.addEventListener(s,h,d),{unsubscribe:()=>{f.removeEventListener(s,h,d)}}}function hr(f){return f*Math.PI/180}function dr(f){return f/Math.PI*180}let an={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},wn={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Ln="AbortError";function Un(){return new Error(Ln)}let di={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Li(f){return di.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}let ao="global-dispatcher";class Qn extends Error{constructor(s,h,d,y){super(`AJAXError: ${h} (${s}): ${d}`),this.status=s,this.statusText=h,this.url=d,this.body=y}}let ri=()=>Mt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,so=function(f,s){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){let d=Li(f.url);if(d)return d(f,s);if(Mt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:ao},s)}if(!(/^file:/.test(h=f.url)||/^file:/.test(ri())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,y){return o(this,void 0,void 0,function*(){let E=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:ri(),signal:y.signal}),S,M;d.type!=="json"||E.headers.has("Accept")||E.headers.set("Accept","application/json");try{S=yield fetch(E)}catch(N){throw new Qn(0,N.message,d.url,new Blob())}if(!S.ok){let N=yield S.blob();throw new Qn(S.status,S.statusText,d.url,N)}M=d.type==="arrayBuffer"||d.type==="image"?S.arrayBuffer():d.type==="json"?S.json():S.text();let R=yield M;if(y.signal.aborted)throw Un();return{data:R,cacheControl:S.headers.get("Cache-Control"),expires:S.headers.get("Expires")}})}(f,s);if(Mt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:ao},s)}var h;return function(d,y){return new Promise((E,S)=>{var M;let R=new XMLHttpRequest;R.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(R.responseType="arraybuffer");for(let N in d.headers)R.setRequestHeader(N,d.headers[N]);d.type==="json"&&(R.responseType="text",!((M=d.headers)===null||M===void 0)&&M.Accept||R.setRequestHeader("Accept","application/json")),R.withCredentials=d.credentials==="include",R.onerror=()=>{S(new Error(R.statusText))},R.onload=()=>{if(!y.signal.aborted)if((R.status>=200&&R.status<300||R.status===0)&&R.response!==null){let N=R.response;if(d.type==="json")try{N=JSON.parse(R.response)}catch(z){return void S(z)}E({data:N,cacheControl:R.getResponseHeader("Cache-Control"),expires:R.getResponseHeader("Expires")})}else{let N=new Blob([R.response],{type:R.getResponseHeader("Content-Type")});S(new Qn(R.status,R.statusText,d.url,N))}},y.signal.addEventListener("abort",()=>{R.abort(),S(Un())}),R.send(d.body)})}(f,s)};function qe(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;let s=new URL(f),h=window.location;return s.protocol===h.protocol&&s.host===h.host}function oe(f,s,h){h[f]&&h[f].indexOf(s)!==-1||(h[f]=h[f]||[],h[f].push(s))}function ne(f,s,h){if(h&&h[f]){let d=h[f].indexOf(s);d!==-1&&h[f].splice(d,1)}}class Z{constructor(s,h={}){Fe(this,h),this.type=s}}class X extends Z{constructor(s,h={}){super("error",Fe({error:s},h))}}class he{on(s,h){return this._listeners=this._listeners||{},oe(s,h,this._listeners),{unsubscribe:()=>{this.off(s,h)}}}off(s,h){return ne(s,h,this._listeners),ne(s,h,this._oneTimeListeners),this}once(s,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},oe(s,h,this._oneTimeListeners),this):new Promise(d=>this.once(s,d))}fire(s,h){typeof s=="string"&&(s=new Z(s,h||{}));let d=s.type;if(this.listens(d)){s.target=this;let y=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(let M of y)M.call(this,s);let E=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(let M of E)ne(d,M,this._oneTimeListeners),M.call(this,s);let S=this._eventedParent;S&&(Fe(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),S.fire(s))}else s instanceof X&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,h){return this._eventedParent=s,this._eventedParentData=h,this}}var ee={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let Ie=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function xe(f,s){let h={};for(let d in f)d!=="ref"&&(h[d]=f[d]);return Ie.forEach(d=>{d in s&&(h[d]=s[d])}),h}function Ce(f,s){if(Array.isArray(f)){if(!Array.isArray(s)||f.length!==s.length)return!1;for(let h=0;h<f.length;h++)if(!Ce(f[h],s[h]))return!1;return!0}if(typeof f=="object"&&f!==null&&s!==null){if(typeof s!="object"||Object.keys(f).length!==Object.keys(s).length)return!1;for(let h in f)if(!Ce(f[h],s[h]))return!1;return!0}return f===s}function Ne(f,s){f.push(s)}function Me(f,s,h){Ne(h,{command:"addSource",args:[f,s[f]]})}function Ge(f,s,h){Ne(s,{command:"removeSource",args:[f]}),h[f]=!0}function lt(f,s,h,d){Ge(f,h,d),Me(f,s,h)}function gt(f,s,h){let d;for(d in f[h])if(Object.prototype.hasOwnProperty.call(f[h],d)&&d!=="data"&&!Ce(f[h][d],s[h][d]))return!1;for(d in s[h])if(Object.prototype.hasOwnProperty.call(s[h],d)&&d!=="data"&&!Ce(f[h][d],s[h][d]))return!1;return!0}function Rt(f,s,h,d,y,E){f=f||{},s=s||{};for(let S in f)Object.prototype.hasOwnProperty.call(f,S)&&(Ce(f[S],s[S])||h.push({command:E,args:[d,S,s[S],y]}));for(let S in s)Object.prototype.hasOwnProperty.call(s,S)&&!Object.prototype.hasOwnProperty.call(f,S)&&(Ce(f[S],s[S])||h.push({command:E,args:[d,S,s[S],y]}))}function Xt(f){return f.id}function Gt(f,s){return f[s.id]=s,f}class Ye{constructor(s,h,d,y){this.message=(s?`${s}: `:"")+d,y&&(this.identifier=y),h!=null&&h.__line__&&(this.line=h.__line__)}}function Fr(f,...s){for(let h of s)for(let d in h)f[d]=h[d];return f}class Sr extends Error{constructor(s,h){super(h),this.message=h,this.key=s}}class Dr{constructor(s,h=[]){this.parent=s,this.bindings={};for(let[d,y]of h)this.bindings[d]=y}concat(s){return new Dr(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}let nr={kind:"null"},ot={kind:"number"},Yt={kind:"string"},mr={kind:"boolean"},In={kind:"color"},Zr={kind:"projectionDefinition"},Dn={kind:"object"},_r={kind:"value"},vc={kind:"collator"},yc={kind:"formatted"},wh={kind:"padding"},tm={kind:"colorArray"},Mu={kind:"numberArray"},Eh={kind:"resolvedImage"},Di={kind:"variableAnchorOffsetCollection"};function Ka(f,s){return{kind:"array",itemType:f,N:s}}function Jn(f){if(f.kind==="array"){let s=Jn(f.itemType);return typeof f.N=="number"?`array<${s}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${s}>`}return f.kind}let rm=[nr,ot,Yt,mr,In,Zr,yc,Dn,Ka(_r),wh,Mu,tm,Eh,Di];function Vf(f,s){if(s.kind==="error")return null;if(f.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!Vf(f.itemType,s.itemType))&&(typeof f.N!="number"||f.N===s.N))return null}else{if(f.kind===s.kind)return null;if(f.kind==="value"){for(let h of rm)if(!Vf(h,s))return null}}return`Expected ${Jn(f)} but found ${Jn(s)} instead.`}function Vx(f,s){return s.some(h=>h.kind===f.kind)}function Sh(f,s){return s.some(h=>h==="null"?f===null:h==="array"?Array.isArray(f):h==="object"?f&&!Array.isArray(f)&&typeof f=="object":h===typeof f)}function Au(f,s){return f.kind==="array"&&s.kind==="array"?f.itemType.kind===s.itemType.kind&&typeof f.N=="number":f.kind===s.kind}let OI=.96422,Gx=.82521,LI=4/29,Gf=6/29,DI=3*Gf*Gf,Yk=Gf*Gf*Gf,Kk=Math.PI/180,Xk=180/Math.PI;function NI(f){return(f%=360)<0&&(f+=360),f}function $x([f,s,h,d]){let y,E,S=Hx((.2225045*(f=Th(f))+.7168786*(s=Th(s))+.0606169*(h=Th(h)))/1);f===s&&s===h?y=E=S:(y=Hx((.4360747*f+.3850649*s+.1430804*h)/OI),E=Hx((.0139322*f+.0971045*s+.7141733*h)/Gx));let M=116*S-16;return[M<0?0:M,500*(y-S),200*(S-E),d]}function Th(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Hx(f){return f>Yk?Math.pow(f,1/3):f/DI+LI}function kI([f,s,h,d]){let y=(f+16)/116,E=isNaN(s)?y:y+s/500,S=isNaN(h)?y:y-h/200;return y=1*Wx(y),E=OI*Wx(E),S=Gx*Wx(S),[Ih(3.1338561*E-1.6168667*y-.4906146*S),Ih(-.9787684*E+1.9161415*y+.033454*S),Ih(.0719453*E-.2289914*y+1.4052427*S),d]}function Ih(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function Wx(f){return f>Gf?f*f*f:DI*(f-LI)}let Qk=Object.hasOwn||function(f,s){return Object.prototype.hasOwnProperty.call(f,s)};function nm(f,s){return Qk(f,s)?f[s]:void 0}function im(f){return parseInt(f.padEnd(2,f),16)/255}function Zx(f,s){return na(s?f/100:f,0,1)}function na(f,s,h){return Math.min(Math.max(s,f),h)}function Jr(f){return!f.some(Number.isNaN)}let $f={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ia(f,s,h){return f+h*(s-f)}function Mh(f,s,h){return f.map((d,y)=>ia(d,s[y],h))}class Yr{constructor(s,h,d,y=1,E=!0){this.r=s,this.g=h,this.b=d,this.a=y,E||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[s,h,d,y]))}static parse(s){if(s instanceof Yr)return s;if(typeof s!="string")return;let h=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];let y=nm($f,d);if(y){let[S,M,R]=y;return[S/255,M/255,R/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){let S=d.length<6?1:2,M=1;return[im(d.slice(M,M+=S)),im(d.slice(M,M+=S)),im(d.slice(M,M+=S)),im(d.slice(M,M+S)||"ff")]}if(d.startsWith("rgb")){let S=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){let[M,R,N,z,V,W,K,Q,re,ce,me,Oe]=S,we=[z||" ",K||" ",ce].join("");if(we==="  "||we==="  /"||we===",,"||we===",,,"){let Y=[N,W,re].join(""),le=Y==="%%%"?100:Y===""?255:0;if(le){let Ee=[na(+R/le,0,1),na(+V/le,0,1),na(+Q/le,0,1),me?Zx(+me,Oe):1];if(Jr(Ee))return Ee}}return}}let E=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(E){let[S,M,R,N,z,V,W,K,Q]=E,re=[R||" ",z||" ",W].join("");if(re==="  "||re==="  /"||re===",,"||re===",,,"){let ce=[+M,na(+N,0,100),na(+V,0,100),K?Zx(+K,Q):1];if(Jr(ce))return function([me,Oe,we,Y]){function le(Ee){let Ve=(Ee+me/30)%12,ut=Oe*Math.min(we,1-we);return we-ut*Math.max(-1,Math.min(Ve-3,9-Ve,1))}return me=NI(me),Oe/=100,we/=100,[le(0),le(8),le(4),Y]}(ce)}}}(s);return h?new Yr(...h,!1):void 0}get rgb(){let{r:s,g:h,b:d,a:y}=this,E=y||1/0;return this.overwriteGetter("rgb",[s/E,h/E,d/E,y])}get hcl(){return this.overwriteGetter("hcl",function(s){let[h,d,y,E]=$x(s),S=Math.sqrt(d*d+y*y);return[Math.round(1e4*S)?NI(Math.atan2(y,d)*Xk):NaN,S,h,E]}(this.rgb))}get lab(){return this.overwriteGetter("lab",$x(this.rgb))}overwriteGetter(s,h){return Object.defineProperty(this,s,{value:h}),h}toString(){let[s,h,d,y]=this.rgb;return`rgba(${[s,h,d].map(E=>Math.round(255*E)).join(",")},${y})`}static interpolate(s,h,d,y="rgb"){switch(y){case"rgb":{let[E,S,M,R]=Mh(s.rgb,h.rgb,d);return new Yr(E,S,M,R,!1)}case"hcl":{let[E,S,M,R]=s.hcl,[N,z,V,W]=h.hcl,K,Q;if(isNaN(E)||isNaN(N))isNaN(E)?isNaN(N)?K=NaN:(K=N,M!==1&&M!==0||(Q=z)):(K=E,V!==1&&V!==0||(Q=S));else{let we=N-E;N>E&&we>180?we-=360:N<E&&E-N>180&&(we+=360),K=E+d*we}let[re,ce,me,Oe]=function([we,Y,le,Ee]){return we=isNaN(we)?0:we*Kk,kI([le,Math.cos(we)*Y,Math.sin(we)*Y,Ee])}([K,Q!=null?Q:ia(S,z,d),ia(M,V,d),ia(R,W,d)]);return new Yr(re,ce,me,Oe,!1)}case"lab":{let[E,S,M,R]=kI(Mh(s.lab,h.lab,d));return new Yr(E,S,M,R,!1)}}}}Yr.black=new Yr(0,0,0,1),Yr.white=new Yr(1,1,1,1),Yr.transparent=new Yr(0,0,0,0),Yr.red=new Yr(1,0,0,1);class om{constructor(s,h,d){this.sensitivity=s?h?"variant":"case":h?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,h){return this.collator.compare(s,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let am=["bottom","center","top"];class Hf{constructor(s,h,d,y,E,S){this.text=s,this.image=h,this.scale=d,this.fontStack=y,this.textColor=E,this.verticalAlign=S}}class Ta{constructor(s){this.sections=s}static fromString(s){return new Ta([new Hf(s,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof Ta?s:Ta.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class Io{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Io)return s;if(typeof s=="number")return new Io([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(let h of s)if(typeof h!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new Io(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,h,d){return new Io(Mh(s.values,h.values,d))}}class Ni{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Ni)return s;if(typeof s=="number")return new Ni([s]);if(Array.isArray(s)){for(let h of s)if(typeof h!="number")return;return new Ni(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,h,d){return new Ni(Mh(s.values,h.values,d))}}class Mo{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Mo)return s;if(typeof s=="string"){let d=Yr.parse(s);return d?new Mo([d]):void 0}if(!Array.isArray(s))return;let h=[];for(let d of s){if(typeof d!="string")return;let y=Yr.parse(d);if(!y)return;h.push(y)}return new Mo(h)}toString(){return JSON.stringify(this.values)}static interpolate(s,h,d,y="rgb"){let E=[];if(s.values.length!=h.values.length)throw new Error(`colorArray: Arrays have mismatched length (${s.values.length} vs. ${h.values.length}), cannot interpolate.`);for(let S=0;S<s.values.length;S++)E.push(Yr.interpolate(s.values[S],h.values[S],d,y));return new Mo(E)}}class Vn extends Error{constructor(s){super(s),this.name="RuntimeError"}toJSON(){return this.message}}let Wf=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class oa{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof oa)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let h=0;h<s.length;h+=2){let d=s[h],y=s[h+1];if(typeof d!="string"||!Wf.has(d)||!Array.isArray(y)||y.length!==2||typeof y[0]!="number"||typeof y[1]!="number")return}return new oa(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,h,d){let y=s.values,E=h.values;if(y.length!==E.length)throw new Vn(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${h.toString()}`);let S=[];for(let M=0;M<y.length;M+=2){if(y[M]!==E[M])throw new Vn(`Cannot interpolate values containing mismatched anchors. from[${M}]: ${y[M]}, to[${M}]: ${E[M]}`);S.push(y[M]);let[R,N]=y[M+1],[z,V]=E[M+1];S.push([ia(R,z,d),ia(N,V,d)])}return new oa(S)}}class Xa{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new Xa({name:s,available:!1}):null}}class Ia{constructor(s,h,d){this.from=s,this.to=h,this.transition=d}static interpolate(s,h,d){return new Ia(s,h,d)}static parse(s){return s instanceof Ia?s:Array.isArray(s)&&s.length===3&&typeof s[0]=="string"&&typeof s[1]=="string"&&typeof s[2]=="number"?new Ia(s[0],s[1],s[2]):typeof s=="object"&&typeof s.from=="string"&&typeof s.to=="string"&&typeof s.transition=="number"?new Ia(s.from,s.to,s.transition):typeof s=="string"?new Ia(s,s,1):void 0}}function sm(f,s,h,d){return typeof f=="number"&&f>=0&&f<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof h=="number"&&h>=0&&h<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[f,s,h,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[f,s,h,d]:[f,s,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function En(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof Ia||f instanceof Yr||f instanceof om||f instanceof Ta||f instanceof Io||f instanceof Ni||f instanceof Mo||f instanceof oa||f instanceof Xa)return!0;if(Array.isArray(f)){for(let s of f)if(!En(s))return!1;return!0}if(typeof f=="object"){for(let s in f)if(!En(f[s]))return!1;return!0}return!1}function mi(f){if(f===null)return nr;if(typeof f=="string")return Yt;if(typeof f=="boolean")return mr;if(typeof f=="number")return ot;if(f instanceof Yr)return In;if(f instanceof Ia)return Zr;if(f instanceof om)return vc;if(f instanceof Ta)return yc;if(f instanceof Io)return wh;if(f instanceof Ni)return Mu;if(f instanceof Mo)return tm;if(f instanceof oa)return Di;if(f instanceof Xa)return Eh;if(Array.isArray(f)){let s=f.length,h;for(let d of f){let y=mi(d);if(h){if(h===y)continue;h=_r;break}h=y}return Ka(h||_r,s)}return Dn}function Kr(f){let s=typeof f;return f===null?"":s==="string"||s==="number"||s==="boolean"?String(f):f instanceof Yr||f instanceof Ia||f instanceof Ta||f instanceof Io||f instanceof Ni||f instanceof Mo||f instanceof oa||f instanceof Xa?f.toString():JSON.stringify(f)}class xr{constructor(s,h){this.type=s,this.value=h}static parse(s,h){if(s.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!En(s[1]))return h.error("invalid value");let d=s[1],y=mi(d),E=h.expectedType;return y.kind!=="array"||y.N!==0||!E||E.kind!=="array"||typeof E.N=="number"&&E.N!==0||(y=E),new xr(y,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let Zf={string:Yt,number:ot,boolean:mr,object:Dn};class Ar{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");let d,y=1,E=s[0];if(E==="array"){let M,R;if(s.length>2){let N=s[1];if(typeof N!="string"||!(N in Zf)||N==="object")return h.error("The item type argument of \"array\" must be one of string, number, boolean",1);M=Zf[N],y++}else M=_r;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return h.error("The length argument to \"array\" must be a positive integer literal",2);R=s[2],y++}d=Ka(M,R)}else{if(!Zf[E])throw new Error(`Types doesn't contain name = ${E}`);d=Zf[E]}let S=[];for(;y<s.length;y++){let M=h.parse(s[y],y,_r);if(!M)return null;S.push(M)}return new Ar(d,S)}evaluate(s){for(let h=0;h<this.args.length;h++){let d=this.args[h].evaluate(s);if(!Vf(this.type,mi(d)))return d;if(h===this.args.length-1)throw new Vn(`Expected value to be of type ${Jn(this.type)}, but found ${Jn(mi(d))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}let vv={"to-boolean":mr,"to-color":In,"to-number":ot,"to-string":Yt};class Vo{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");let d=s[0];if(!vv[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&s.length!==2)return h.error("Expected one argument.");let y=vv[d],E=[];for(let S=1;S<s.length;S++){let M=h.parse(s[S],S,_r);if(!M)return null;E.push(M)}return new Vo(y,E)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let h,d;for(let y of this.args){if(h=y.evaluate(s),d=null,h instanceof Yr)return h;if(typeof h=="string"){let E=s.parseColor(h);if(E)return E}else if(Array.isArray(h)&&(d=h.length<3||h.length>4?`Invalid rgba value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:sm(h[0],h[1],h[2],h[3]),!d))return new Yr(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new Vn(d||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(let d of this.args){h=d.evaluate(s);let y=Io.parse(h);if(y)return y}throw new Vn(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"numberArray":{let h;for(let d of this.args){h=d.evaluate(s);let y=Ni.parse(h);if(y)return y}throw new Vn(`Could not parse numberArray from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"colorArray":{let h;for(let d of this.args){h=d.evaluate(s);let y=Mo.parse(h);if(y)return y}throw new Vn(`Could not parse colorArray from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(let d of this.args){h=d.evaluate(s);let y=oa.parse(h);if(y)return y}throw new Vn(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(let d of this.args){if(h=d.evaluate(s),h===null)return 0;let y=Number(h);if(!isNaN(y))return y}throw new Vn(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return Ta.fromString(Kr(this.args[0].evaluate(s)));case"resolvedImage":return Xa.fromString(Kr(this.args[0].evaluate(s)));case"projectionDefinition":return this.args[0].evaluate(s);default:return Kr(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}let Yx=["Unknown","Point","LineString","Polygon"];class Kx{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Yx[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let h=this._parseColorCache.get(s);return h||(h=Yr.parse(s),this._parseColorCache.set(s,h)),h}}class lm{constructor(s,h,d=[],y,E=new Dr,S=[]){this.registry=s,this.path=d,this.key=d.map(M=>`[${M}]`).join(""),this.scope=E,this.errors=S,this.expectedType=y,this._isConstant=h}parse(s,h,d,y,E={}){return h?this.concat(h,d,y)._parse(s,E):this._parse(s,E)}_parse(s,h){function d(y,E,S){return S==="assert"?new Ar(E,[y]):S==="coerce"?new Vo(E,[y]):y}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let y=s[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let E=this.registry[y];if(E){let S=E.parse(s,this);if(!S)return null;if(this.expectedType){let M=this.expectedType,R=S.type;if(M.kind!=="string"&&M.kind!=="number"&&M.kind!=="boolean"&&M.kind!=="object"&&M.kind!=="array"||R.kind!=="value"){if(M.kind==="projectionDefinition"&&["string","array"].includes(R.kind)||["color","formatted","resolvedImage"].includes(M.kind)&&["value","string"].includes(R.kind)||["padding","numberArray"].includes(M.kind)&&["value","number","array"].includes(R.kind)||M.kind==="colorArray"&&["value","string","array"].includes(R.kind)||M.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(R.kind))S=d(S,M,h.typeAnnotation||"coerce");else if(this.checkSubtype(M,R))return null}else S=d(S,M,h.typeAnnotation||"assert")}if(!(S instanceof xr)&&S.type.kind!=="resolvedImage"&&this._isConstant(S)){let M=new Kx;try{S=new xr(S.type,S.evaluate(M))}catch(R){return this.error(R.message),null}}return S}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof s} instead.`)}concat(s,h,d){let y=typeof s=="number"?this.path.concat(s):this.path,E=d?this.scope.concat(d):this.scope;return new lm(this.registry,this._isConstant,y,h||null,E,this.errors)}error(s,...h){let d=`${this.key}${h.map(y=>`[${y}]`).join("")}`;this.errors.push(new Sr(d,s))}checkSubtype(s,h){let d=Vf(s,h);return d&&this.error(d),d}}class Yf{constructor(s,h){this.type=h.type,this.bindings=[].concat(s),this.result=h}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(let h of this.bindings)s(h[1]);s(this.result)}static parse(s,h){if(s.length<4)return h.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);let d=[];for(let E=1;E<s.length-1;E+=2){let S=s[E];if(typeof S!="string")return h.error(`Expected string, but found ${typeof S} instead.`,E);if(/[^a-zA-Z0-9_]/.test(S))return h.error("Variable names must contain only alphanumeric characters or '_'.",E);let M=h.parse(s[E+1],E+1);if(!M)return null;d.push([S,M])}let y=h.parse(s[s.length-1],s.length-1,h.expectedType,d);return y?new Yf(d,y):null}outputDefined(){return this.result.outputDefined()}}class um{constructor(s,h){this.type=h.type,this.name=s,this.boundExpression=h}static parse(s,h){if(s.length!==2||typeof s[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");let d=s[1];return h.scope.has(d)?new um(d,h.scope.get(d)):h.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Xx{constructor(s,h,d){this.type=s,this.index=h,this.input=d}static parse(s,h){if(s.length!==3)return h.error(`Expected 2 arguments, but found ${s.length-1} instead.`);let d=h.parse(s[1],1,ot),y=h.parse(s[2],2,Ka(h.expectedType||_r));return d&&y?new Xx(y.type.itemType,d,y):null}evaluate(s){let h=this.index.evaluate(s),d=this.input.evaluate(s);if(h<0)throw new Vn(`Array index out of bounds: ${h} < 0.`);if(h>=d.length)throw new Vn(`Array index out of bounds: ${h} > ${d.length-1}.`);if(h!==Math.floor(h))throw new Vn(`Array index must be an integer, but found ${h} instead.`);return d[h]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class yv{constructor(s,h){this.type=mr,this.needle=s,this.haystack=h}static parse(s,h){if(s.length!==3)return h.error(`Expected 2 arguments, but found ${s.length-1} instead.`);let d=h.parse(s[1],1,_r),y=h.parse(s[2],2,_r);return d&&y?Vx(d.type,[mr,Yt,ot,nr,_r])?new yv(d,y):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Jn(d.type)} instead`):null}evaluate(s){let h=this.needle.evaluate(s),d=this.haystack.evaluate(s);if(!d)return!1;if(!Sh(h,["boolean","string","number","null"]))throw new Vn(`Expected first argument to be of type boolean, string, number or null, but found ${Jn(mi(h))} instead.`);if(!Sh(d,["string","array"]))throw new Vn(`Expected second argument to be of type array or string, but found ${Jn(mi(d))} instead.`);return d.indexOf(h)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class cm{constructor(s,h,d){this.type=ot,this.needle=s,this.haystack=h,this.fromIndex=d}static parse(s,h){if(s.length<=2||s.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);let d=h.parse(s[1],1,_r),y=h.parse(s[2],2,_r);if(!d||!y)return null;if(!Vx(d.type,[mr,Yt,ot,nr,_r]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Jn(d.type)} instead`);if(s.length===4){let E=h.parse(s[3],3,ot);return E?new cm(d,y,E):null}return new cm(d,y)}evaluate(s){let h=this.needle.evaluate(s),d=this.haystack.evaluate(s);if(!Sh(h,["boolean","string","number","null"]))throw new Vn(`Expected first argument to be of type boolean, string, number or null, but found ${Jn(mi(h))} instead.`);let y;if(this.fromIndex&&(y=this.fromIndex.evaluate(s)),Sh(d,["string"])){let E=d.indexOf(h,y);return E===-1?-1:[...d.slice(0,E)].length}if(Sh(d,["array"]))return d.indexOf(h,y);throw new Vn(`Expected second argument to be of type array or string, but found ${Jn(mi(d))} instead.`)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class Ah{constructor(s,h,d,y,E,S){this.inputType=s,this.type=h,this.input=d,this.cases=y,this.outputs=E,this.otherwise=S}static parse(s,h){if(s.length<5)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return h.error("Expected an even number of arguments.");let d,y;h.expectedType&&h.expectedType.kind!=="value"&&(y=h.expectedType);let E={},S=[];for(let N=2;N<s.length-1;N+=2){let z=s[N],V=s[N+1];Array.isArray(z)||(z=[z]);let W=h.concat(N);if(z.length===0)return W.error("Expected at least one branch label.");for(let Q of z){if(typeof Q!="number"&&typeof Q!="string")return W.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return W.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return W.error("Numeric branch labels must be integer values.");if(d){if(W.checkSubtype(d,mi(Q)))return null}else d=mi(Q);if(E[String(Q)]!==void 0)return W.error("Branch labels must be unique.");E[String(Q)]=S.length}let K=h.parse(V,N,y);if(!K)return null;y=y||K.type,S.push(K)}let M=h.parse(s[1],1,_r);if(!M)return null;let R=h.parse(s[s.length-1],s.length-1,y);return R?M.type.kind!=="value"&&h.concat(1).checkSubtype(d,M.type)?null:new Ah(d,y,M,E,S,R):null}evaluate(s){let h=this.input.evaluate(s);return(mi(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class lo{constructor(s,h,d){this.type=s,this.branches=h,this.otherwise=d}static parse(s,h){if(s.length<4)return h.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return h.error("Expected an odd number of arguments.");let d;h.expectedType&&h.expectedType.kind!=="value"&&(d=h.expectedType);let y=[];for(let S=1;S<s.length-1;S+=2){let M=h.parse(s[S],S,mr);if(!M)return null;let R=h.parse(s[S+1],S+1,d);if(!R)return null;y.push([M,R]),d=d||R.type}let E=h.parse(s[s.length-1],s.length-1,d);if(!E)return null;if(!d)throw new Error("Can't infer output type");return new lo(d,y,E)}evaluate(s){for(let[h,d]of this.branches)if(h.evaluate(s))return d.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(let[h,d]of this.branches)s(h),s(d);s(this.otherwise)}outputDefined(){return this.branches.every(([s,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class Ch{constructor(s,h,d,y){this.type=s,this.input=h,this.beginIndex=d,this.endIndex=y}static parse(s,h){if(s.length<=2||s.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);let d=h.parse(s[1],1,_r),y=h.parse(s[2],2,ot);if(!d||!y)return null;if(!Vx(d.type,[Ka(_r),Yt,_r]))return h.error(`Expected first argument to be of type array or string, but found ${Jn(d.type)} instead`);if(s.length===4){let E=h.parse(s[3],3,ot);return E?new Ch(d.type,d,y,E):null}return new Ch(d.type,d,y)}evaluate(s){let h=this.input.evaluate(s),d=this.beginIndex.evaluate(s),y;if(this.endIndex&&(y=this.endIndex.evaluate(s)),Sh(h,["string"]))return[...h].slice(d,y).join("");if(Sh(h,["array"]))return h.slice(d,y);throw new Vn(`Expected first argument to be of type array or string, but found ${Jn(mi(h))} instead.`)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function hm(f,s){let h=f.length-1,d,y,E=0,S=h,M=0;for(;E<=S;)if(M=Math.floor((E+S)/2),d=f[M],y=f[M+1],d<=s){if(M===h||s<y)return M;E=M+1}else{if(!(d>s))throw new Vn("Input is not a number.");S=M-1}return 0}class _c{constructor(s,h,d){this.type=s,this.input=h,this.labels=[],this.outputs=[];for(let[y,E]of d)this.labels.push(y),this.outputs.push(E)}static parse(s,h){if(s.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return h.error("Expected an even number of arguments.");let d=h.parse(s[1],1,ot);if(!d)return null;let y=[],E=null;h.expectedType&&h.expectedType.kind!=="value"&&(E=h.expectedType);for(let S=1;S<s.length;S+=2){let M=S===1?-1/0:s[S],R=s[S+1],N=S,z=S+1;if(typeof M!="number")return h.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",N);if(y.length&&y[y.length-1][0]>=M)return h.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",N);let V=h.parse(R,z,E);if(!V)return null;E=E||V.type,y.push([M,V])}return new _c(E,d,y)}evaluate(s){let h=this.labels,d=this.outputs;if(h.length===1)return d[0].evaluate(s);let y=this.input.evaluate(s);if(y<=h[0])return d[0].evaluate(s);let E=h.length;return y>=h[E-1]?d[E-1].evaluate(s):d[hm(h,y)].evaluate(s)}eachChild(s){s(this.input);for(let h of this.outputs)s(h)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function uo(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var _v,xv,qI=function(){if(xv)return _v;function f(s,h,d,y){this.cx=3*s,this.bx=3*(d-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(y-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=h,this.p2x=d,this.p2y=y}return xv=1,_v=f,f.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,h){if(h===void 0&&(h=1e-6),s<0)return 0;if(s>1)return 1;for(var d=s,y=0;y<8;y++){var E=this.sampleCurveX(d)-s;if(Math.abs(E)<h)return d;var S=this.sampleCurveDerivativeX(d);if(Math.abs(S)<1e-6)break;d-=E/S}var M=0,R=1;for(d=s,y=0;y<20&&(E=this.sampleCurveX(d),!(Math.abs(E-s)<h));y++)s>E?M=d:R=d,d=.5*(R-M)+M;return d},solve:function(s,h){return this.sampleCurveY(this.solveCurveX(s,h))}},_v}(),Jk=uo(qI);class Go{constructor(s,h,d,y,E){this.type=s,this.operator=h,this.interpolation=d,this.input=y,this.labels=[],this.outputs=[];for(let[S,M]of E)this.labels.push(S),this.outputs.push(M)}static interpolationFactor(s,h,d,y){let E=0;if(s.name==="exponential")E=fm(h,s.base,d,y);else if(s.name==="linear")E=fm(h,1,d,y);else if(s.name==="cubic-bezier"){let S=s.controlPoints;E=new Jk(S[0],S[1],S[2],S[3]).solve(fm(h,1,d,y))}return E}static parse(s,h){let[d,y,E,...S]=s;if(!Array.isArray(y)||y.length===0)return h.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){let N=y[1];if(typeof N!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:N}}else{if(y[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(y[0])}`,1,0);{let N=y.slice(1);if(N.length!==4||N.some(z=>typeof z!="number"||z<0||z>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:N}}}if(s.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(E=h.parse(E,2,ot),!E)return null;let M=[],R=null;d!=="interpolate-hcl"&&d!=="interpolate-lab"||h.expectedType==tm?h.expectedType&&h.expectedType.kind!=="value"&&(R=h.expectedType):R=In;for(let N=0;N<S.length;N+=2){let z=S[N],V=S[N+1],W=N+3,K=N+4;if(typeof z!="number")return h.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",W);if(M.length&&M[M.length-1][0]>=z)return h.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",W);let Q=h.parse(V,K,R);if(!Q)return null;R=R||Q.type,M.push([z,Q])}return Au(R,ot)||Au(R,Zr)||Au(R,In)||Au(R,wh)||Au(R,Mu)||Au(R,tm)||Au(R,Di)||Au(R,Ka(ot))?new Go(R,d,y,E,M):h.error(`Type ${Jn(R)} is not interpolatable.`)}evaluate(s){let h=this.labels,d=this.outputs;if(h.length===1)return d[0].evaluate(s);let y=this.input.evaluate(s);if(y<=h[0])return d[0].evaluate(s);let E=h.length;if(y>=h[E-1])return d[E-1].evaluate(s);let S=hm(h,y),M=Go.interpolationFactor(this.interpolation,y,h[S],h[S+1]),R=d[S].evaluate(s),N=d[S+1].evaluate(s);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ia(R,N,M);case"color":return Yr.interpolate(R,N,M);case"padding":return Io.interpolate(R,N,M);case"colorArray":return Mo.interpolate(R,N,M);case"numberArray":return Ni.interpolate(R,N,M);case"variableAnchorOffsetCollection":return oa.interpolate(R,N,M);case"array":return Mh(R,N,M);case"projectionDefinition":return Ia.interpolate(R,N,M)}case"interpolate-hcl":switch(this.type.kind){case"color":return Yr.interpolate(R,N,M,"hcl");case"colorArray":return Mo.interpolate(R,N,M,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Yr.interpolate(R,N,M,"lab");case"colorArray":return Mo.interpolate(R,N,M,"lab")}}}eachChild(s){s(this.input);for(let h of this.outputs)s(h)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function fm(f,s,h,d){let y=d-h,E=f-h;return y===0?0:s===1?E/y:(Math.pow(s,E)-1)/(Math.pow(s,y)-1)}let Cl={color:Yr.interpolate,number:ia,padding:Io.interpolate,numberArray:Ni.interpolate,colorArray:Mo.interpolate,variableAnchorOffsetCollection:oa.interpolate,array:Mh};class Ph{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");let d=null,y=h.expectedType;y&&y.kind!=="value"&&(d=y);let E=[];for(let M of s.slice(1)){let R=h.parse(M,1+E.length,d,void 0,{typeAnnotation:"omit"});if(!R)return null;d=d||R.type,E.push(R)}if(!d)throw new Error("No output type");let S=y&&E.some(M=>Vf(y,M.type));return new Ph(S?_r:d,E)}evaluate(s){let h,d=null,y=0;for(let E of this.args)if(y++,d=E.evaluate(s),d&&d instanceof Xa&&!d.available&&(h||(h=d.name),d=null,y===this.args.length&&(d=h)),d!==null)break;return d}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}function pm(f,s){return f==="=="||f==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function bs(f,s,h,d){return d.compare(s,h)===0}function Rh(f,s,h){let d=f!=="=="&&f!=="!=";return class xOe{constructor(E,S,M){this.type=mr,this.lhs=E,this.rhs=S,this.collator=M,this.hasUntypedArgument=E.type.kind==="value"||S.type.kind==="value"}static parse(E,S){if(E.length!==3&&E.length!==4)return S.error("Expected two or three arguments.");let M=E[0],R=S.parse(E[1],1,_r);if(!R)return null;if(!pm(M,R.type))return S.concat(1).error(`"${M}" comparisons are not supported for type '${Jn(R.type)}'.`);let N=S.parse(E[2],2,_r);if(!N)return null;if(!pm(M,N.type))return S.concat(2).error(`"${M}" comparisons are not supported for type '${Jn(N.type)}'.`);if(R.type.kind!==N.type.kind&&R.type.kind!=="value"&&N.type.kind!=="value")return S.error(`Cannot compare types '${Jn(R.type)}' and '${Jn(N.type)}'.`);d&&(R.type.kind==="value"&&N.type.kind!=="value"?R=new Ar(N.type,[R]):R.type.kind!=="value"&&N.type.kind==="value"&&(N=new Ar(R.type,[N])));let z=null;if(E.length===4){if(R.type.kind!=="string"&&N.type.kind!=="string"&&R.type.kind!=="value"&&N.type.kind!=="value")return S.error("Cannot use collator to compare non-string types.");if(z=S.parse(E[3],3,vc),!z)return null}return new xOe(R,N,z)}evaluate(E){let S=this.lhs.evaluate(E),M=this.rhs.evaluate(E);if(d&&this.hasUntypedArgument){let R=mi(S),N=mi(M);if(R.kind!==N.kind||R.kind!=="string"&&R.kind!=="number")throw new Vn(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${R.kind}, ${N.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){let R=mi(S),N=mi(M);if(R.kind!=="string"||N.kind!=="string")return s(E,S,M)}return this.collator?h(E,S,M,this.collator.evaluate(E)):s(E,S,M)}eachChild(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)}outputDefined(){return!0}}}let bv=Rh("==",function(f,s,h){return s===h},bs),eq=Rh("!=",function(f,s,h){return s!==h},function(f,s,h,d){return!bs(0,s,h,d)}),Qx=Rh("<",function(f,s,h){return s<h},function(f,s,h,d){return d.compare(s,h)<0}),tq=Rh(">",function(f,s,h){return s>h},function(f,s,h,d){return d.compare(s,h)>0}),rq=Rh("<=",function(f,s,h){return s<=h},function(f,s,h,d){return d.compare(s,h)<=0}),nq=Rh(">=",function(f,s,h){return s>=h},function(f,s,h,d){return d.compare(s,h)>=0});class wv{constructor(s,h,d){this.type=vc,this.locale=d,this.caseSensitive=s,this.diacriticSensitive=h}static parse(s,h){if(s.length!==2)return h.error("Expected one argument.");let d=s[1];if(typeof d!="object"||Array.isArray(d))return h.error("Collator options argument must be an object.");let y=h.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,mr);if(!y)return null;let E=h.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,mr);if(!E)return null;let S=null;return d.locale&&(S=h.parse(d.locale,1,Yt),!S)?null:new wv(y,E,S)}evaluate(s){return new om(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}class Kf{constructor(s,h,d,y,E){this.type=Yt,this.number=s,this.locale=h,this.currency=d,this.minFractionDigits=y,this.maxFractionDigits=E}static parse(s,h){if(s.length!==3)return h.error("Expected two arguments.");let d=h.parse(s[1],1,ot);if(!d)return null;let y=s[2];if(typeof y!="object"||Array.isArray(y))return h.error("NumberFormat options argument must be an object.");let E=null;if(y.locale&&(E=h.parse(y.locale,1,Yt),!E))return null;let S=null;if(y.currency&&(S=h.parse(y.currency,1,Yt),!S))return null;let M=null;if(y["min-fraction-digits"]&&(M=h.parse(y["min-fraction-digits"],1,ot),!M))return null;let R=null;return y["max-fraction-digits"]&&(R=h.parse(y["max-fraction-digits"],1,ot),!R)?null:new Kf(d,E,S,M,R)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class Ev{constructor(s){this.type=yc,this.sections=s}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");let d=s[1];if(!Array.isArray(d)&&typeof d=="object")return h.error("First argument must be an image or text section.");let y=[],E=!1;for(let S=1;S<=s.length-1;++S){let M=s[S];if(E&&typeof M=="object"&&!Array.isArray(M)){E=!1;let R=null;if(M["font-scale"]&&(R=h.parse(M["font-scale"],1,ot),!R))return null;let N=null;if(M["text-font"]&&(N=h.parse(M["text-font"],1,Ka(Yt)),!N))return null;let z=null;if(M["text-color"]&&(z=h.parse(M["text-color"],1,In),!z))return null;let V=null;if(M["vertical-align"]){if(typeof M["vertical-align"]=="string"&&!am.includes(M["vertical-align"]))return h.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${M["vertical-align"]}' instead.`);if(V=h.parse(M["vertical-align"],1,Yt),!V)return null}let W=y[y.length-1];W.scale=R,W.font=N,W.textColor=z,W.verticalAlign=V}else{let R=h.parse(s[S],1,_r);if(!R)return null;let N=R.type.kind;if(N!=="string"&&N!=="value"&&N!=="null"&&N!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");E=!0,y.push({content:R,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Ev(y)}evaluate(s){return new Ta(this.sections.map(h=>{let d=h.content.evaluate(s);return mi(d)===Eh?new Hf("",d,null,null,null,h.verticalAlign?h.verticalAlign.evaluate(s):null):new Hf(Kr(d),null,h.scale?h.scale.evaluate(s):null,h.font?h.font.evaluate(s).join(","):null,h.textColor?h.textColor.evaluate(s):null,h.verticalAlign?h.verticalAlign.evaluate(s):null)}))}eachChild(s){for(let h of this.sections)s(h.content),h.scale&&s(h.scale),h.font&&s(h.font),h.textColor&&s(h.textColor),h.verticalAlign&&s(h.verticalAlign)}outputDefined(){return!1}}class Sv{constructor(s){this.type=Eh,this.input=s}static parse(s,h){if(s.length!==2)return h.error("Expected two arguments.");let d=h.parse(s[1],1,Yt);return d?new Sv(d):h.error("No image name provided.")}evaluate(s){let h=this.input.evaluate(s),d=Xa.fromString(h);return d&&s.availableImages&&(d.available=s.availableImages.indexOf(h)>-1),d}eachChild(s){s(this.input)}outputDefined(){return!1}}class Tv{constructor(s){this.type=ot,this.input=s}static parse(s,h){if(s.length!==2)return h.error(`Expected 1 argument, but found ${s.length-1} instead.`);let d=h.parse(s[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${Jn(d.type)} instead.`):new Tv(d):null}evaluate(s){let h=this.input.evaluate(s);if(typeof h=="string")return[...h].length;if(Array.isArray(h))return h.length;throw new Vn(`Expected value to be of type string or array, but found ${Jn(mi(h))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}let Pl=8192;function jI(f,s){let h=(180+f[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,y=Math.pow(2,s.z);return[Math.round(h*y*Pl),Math.round(d*y*Pl)]}function Jx(f,s){let h=Math.pow(2,s.z);return[(y=(f[0]/Pl+s.x)/h,360*y-180),(d=(f[1]/Pl+s.y)/h,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,y}function dm(f,s){f[0]=Math.min(f[0],s[0]),f[1]=Math.min(f[1],s[1]),f[2]=Math.max(f[2],s[0]),f[3]=Math.max(f[3],s[1])}function mm(f,s){return!(f[0]<=s[0]||f[2]>=s[2]||f[1]<=s[1]||f[3]>=s[3])}function iq(f,s,h){let d=f[0]-s[0],y=f[1]-s[1],E=f[0]-h[0],S=f[1]-h[1];return d*S-E*y==0&&d*E<=0&&y*S<=0}function Iv(f,s,h,d){return(y=[d[0]-h[0],d[1]-h[1]])[0]*(E=[s[0]-f[0],s[1]-f[1]])[1]-y[1]*E[0]!=0&&!(!UI(f,s,h,d)||!UI(h,d,f,s));var y,E}function FI(f,s,h){for(let d of h)for(let y=0;y<d.length-1;++y)if(Iv(f,s,d[y],d[y+1]))return!0;return!1}function Oh(f,s,h=!1){let d=!1;for(let M of s)for(let R=0;R<M.length-1;R++){if(iq(f,M[R],M[R+1]))return h;(E=M[R])[1]>(y=f)[1]!=(S=M[R+1])[1]>y[1]&&y[0]<(S[0]-E[0])*(y[1]-E[1])/(S[1]-E[1])+E[0]&&(d=!d)}var y,E,S;return d}function zI(f,s){for(let h of s)if(Oh(f,h))return!0;return!1}function BI(f,s){for(let h of f)if(!Oh(h,s))return!1;for(let h=0;h<f.length-1;++h)if(FI(f[h],f[h+1],s))return!1;return!0}function oq(f,s){for(let h of s)if(BI(f,h))return!0;return!1}function UI(f,s,h,d){let y=d[0]-h[0],E=d[1]-h[1],S=(f[0]-h[0])*E-y*(f[1]-h[1]),M=(s[0]-h[0])*E-y*(s[1]-h[1]);return S>0&&M<0||S<0&&M>0}function gm(f,s,h){let d=[];for(let y=0;y<f.length;y++){let E=[];for(let S=0;S<f[y].length;S++){let M=jI(f[y][S],h);dm(s,M),E.push(M)}d.push(E)}return d}function VI(f,s,h){let d=[];for(let y=0;y<f.length;y++){let E=gm(f[y],s,h);d.push(E)}return d}function GI(f,s,h,d){if(f[0]<h[0]||f[0]>h[2]){let y=.5*d,E=f[0]-h[0]>y?-d:h[0]-f[0]>y?d:0;E===0&&(E=f[0]-h[2]>y?-d:h[2]-f[0]>y?d:0),f[0]+=E}dm(s,f)}function $I(f,s,h,d){let y=Math.pow(2,d.z)*Pl,E=[d.x*Pl,d.y*Pl],S=[];for(let M of f)for(let R of M){let N=[R.x+E[0],R.y+E[1]];GI(N,s,h,y),S.push(N)}return S}function eb(f,s,h,d){let y=Math.pow(2,d.z)*Pl,E=[d.x*Pl,d.y*Pl],S=[];for(let R of f){let N=[];for(let z of R){let V=[z.x+E[0],z.y+E[1]];dm(s,V),N.push(V)}S.push(N)}if(s[2]-s[0]<=y/2){(M=s)[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(let R of S)for(let N of R)GI(N,s,h,y)}var M;return S}class xc{constructor(s,h){this.type=mr,this.geojson=s,this.geometries=h}static parse(s,h){if(s.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(En(s[1])){let d=s[1];if(d.type==="FeatureCollection"){let y=[];for(let E of d.features){let{type:S,coordinates:M}=E.geometry;S==="Polygon"&&y.push(M),S==="MultiPolygon"&&y.push(...M)}if(y.length)return new xc(d,{type:"MultiPolygon",coordinates:y})}else if(d.type==="Feature"){let y=d.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new xc(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new xc(d,d)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(h,d){let y=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],S=h.canonicalID();if(d.type==="Polygon"){let M=gm(d.coordinates,E,S),R=$I(h.geometry(),y,E,S);if(!mm(y,E))return!1;for(let N of R)if(!Oh(N,M))return!1}if(d.type==="MultiPolygon"){let M=VI(d.coordinates,E,S),R=$I(h.geometry(),y,E,S);if(!mm(y,E))return!1;for(let N of R)if(!zI(N,M))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(h,d){let y=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],S=h.canonicalID();if(d.type==="Polygon"){let M=gm(d.coordinates,E,S),R=eb(h.geometry(),y,E,S);if(!mm(y,E))return!1;for(let N of R)if(!BI(N,M))return!1}if(d.type==="MultiPolygon"){let M=VI(d.coordinates,E,S),R=eb(h.geometry(),y,E,S);if(!mm(y,E))return!1;for(let N of R)if(!oq(N,M))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let HI=class{constructor(f=[],s=(h,d)=>h<d?-1:h>d?1:0){if(this.data=f,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;let f=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),f}peek(){return this.data[0]}_up(f){let{data:s,compare:h}=this,d=s[f];for(;f>0;){let y=f-1>>1,E=s[y];if(h(d,E)>=0)break;s[f]=E,f=y}s[f]=d}_down(f){let{data:s,compare:h}=this,d=this.length>>1,y=s[f];for(;f<d;){let E=1+(f<<1),S=E+1;if(S<this.length&&h(s[S],s[E])<0&&(E=S),h(s[E],y)>=0)break;s[f]=s[E],f=E}s[f]=y}};function WI(f,s,h=0,d=f.length-1,y=ZI){for(;d>h;){if(d-h>600){let R=d-h+1,N=s-h+1,z=Math.log(R),V=.5*Math.exp(2*z/3),W=.5*Math.sqrt(z*V*(R-V)/R)*(N-R/2<0?-1:1);WI(f,s,Math.max(h,Math.floor(s-N*V/R+W)),Math.min(d,Math.floor(s+(R-N)*V/R+W)),y)}let E=f[s],S=h,M=d;for(Xf(f,h,s),y(f[d],E)>0&&Xf(f,h,d);S<M;){for(Xf(f,S,M),S++,M--;y(f[S],E)<0;)S++;for(;y(f[M],E)>0;)M--}y(f[h],E)===0?Xf(f,h,M):(M++,Xf(f,M,d)),M<=s&&(h=M+1),s<=M&&(d=M-1)}}function Xf(f,s,h){let d=f[s];f[s]=f[h],f[h]=d}function ZI(f,s){return f<s?-1:f>s?1:0}function Mv(f,s){if(f.length<=1)return[f];let h=[],d,y;for(let E of f){let S=sq(E);S!==0&&(E.area=Math.abs(S),y===void 0&&(y=S<0),y===S<0?(d&&h.push(d),d=[E]):d.push(E))}if(d&&h.push(d),s>1)for(let E=0;E<h.length;E++)h[E].length<=s||(WI(h[E],s,1,h[E].length-1,aq),h[E]=h[E].slice(0,s));return h}function aq(f,s){return s.area-f.area}function sq(f){let s=0;for(let h,d,y=0,E=f.length,S=E-1;y<E;S=y++)h=f[y],d=f[S],s+=(d.x-h.x)*(h.y+d.y);return s}let tb=1/298.257223563,YI=tb*(2-tb),KI=Math.PI/180;class rb{constructor(s){let h=6378.137*KI*1e3,d=Math.cos(s*KI),y=1/(1-YI*(1-d*d)),E=Math.sqrt(y);this.kx=h*E*d,this.ky=h*E*y*(1-YI)}distance(s,h){let d=this.wrap(s[0]-h[0])*this.kx,y=(s[1]-h[1])*this.ky;return Math.sqrt(d*d+y*y)}pointOnLine(s,h){let d,y,E,S,M=1/0;for(let R=0;R<s.length-1;R++){let N=s[R][0],z=s[R][1],V=this.wrap(s[R+1][0]-N)*this.kx,W=(s[R+1][1]-z)*this.ky,K=0;V===0&&W===0||(K=(this.wrap(h[0]-N)*this.kx*V+(h[1]-z)*this.ky*W)/(V*V+W*W),K>1?(N=s[R+1][0],z=s[R+1][1]):K>0&&(N+=V/this.kx*K,z+=W/this.ky*K)),V=this.wrap(h[0]-N)*this.kx,W=(h[1]-z)*this.ky;let Q=V*V+W*W;Q<M&&(M=Q,d=N,y=z,E=R,S=K)}return{point:[d,y],index:E,t:Math.max(0,Math.min(1,S))}}wrap(s){for(;s<-180;)s+=360;for(;s>180;)s-=360;return s}}function XI(f,s){return s[0]-f[0]}function rn(f){return f[1]-f[0]+1}function Cu(f,s){return f[1]>=f[0]&&f[1]<s}function nb(f,s){if(f[0]>f[1])return[null,null];let h=rn(f);if(s){if(h===2)return[f,null];let y=Math.floor(h/2);return[[f[0],f[0]+y],[f[0]+y,f[1]]]}if(h===1)return[f,null];let d=Math.floor(h/2)-1;return[[f[0],f[0]+d],[f[0]+d+1,f[1]]]}function ib(f,s){if(!Cu(s,f.length))return[1/0,1/0,-1/0,-1/0];let h=[1/0,1/0,-1/0,-1/0];for(let d=s[0];d<=s[1];++d)dm(h,f[d]);return h}function ob(f){let s=[1/0,1/0,-1/0,-1/0];for(let h of f)for(let d of h)dm(s,d);return s}function QI(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function ab(f,s,h){if(!QI(f)||!QI(s))return NaN;let d=0,y=0;return f[2]<s[0]&&(d=s[0]-f[2]),f[0]>s[2]&&(d=f[0]-s[2]),f[1]>s[3]&&(y=f[1]-s[3]),f[3]<s[1]&&(y=s[1]-f[3]),h.distance([0,0],[d,y])}function Lh(f,s,h){let d=h.pointOnLine(s,f);return h.distance(f,d.point)}function sb(f,s,h,d,y){let E=Math.min(Lh(f,[h,d],y),Lh(s,[h,d],y)),S=Math.min(Lh(h,[f,s],y),Lh(d,[f,s],y));return Math.min(E,S)}function lq(f,s,h,d,y){if(!Cu(s,f.length)||!Cu(d,h.length))return 1/0;let E=1/0;for(let S=s[0];S<s[1];++S){let M=f[S],R=f[S+1];for(let N=d[0];N<d[1];++N){let z=h[N],V=h[N+1];if(Iv(M,R,z,V))return 0;E=Math.min(E,sb(M,R,z,V,y))}}return E}function uq(f,s,h,d,y){if(!Cu(s,f.length)||!Cu(d,h.length))return NaN;let E=1/0;for(let S=s[0];S<=s[1];++S)for(let M=d[0];M<=d[1];++M)if(E=Math.min(E,y.distance(f[S],h[M])),E===0)return E;return E}function cq(f,s,h){if(Oh(f,s,!0))return 0;let d=1/0;for(let y of s){let E=y[0],S=y[y.length-1];if(E!==S&&(d=Math.min(d,Lh(f,[S,E],h)),d===0))return d;let M=h.pointOnLine(y,f);if(d=Math.min(d,h.distance(f,M.point)),d===0)return d}return d}function hq(f,s,h,d){if(!Cu(s,f.length))return NaN;for(let E=s[0];E<=s[1];++E)if(Oh(f[E],h,!0))return 0;let y=1/0;for(let E=s[0];E<s[1];++E){let S=f[E],M=f[E+1];for(let R of h)for(let N=0,z=R.length,V=z-1;N<z;V=N++){let W=R[V],K=R[N];if(Iv(S,M,W,K))return 0;y=Math.min(y,sb(S,M,W,K,d))}}return y}function JI(f,s){for(let h of f)for(let d of h)if(Oh(d,s,!0))return!0;return!1}function fq(f,s,h,d=1/0){let y=ob(f),E=ob(s);if(d!==1/0&&ab(y,E,h)>=d)return d;if(mm(y,E)){if(JI(f,s))return 0}else if(JI(s,f))return 0;let S=1/0;for(let M of f)for(let R=0,N=M.length,z=N-1;R<N;z=R++){let V=M[z],W=M[R];for(let K of s)for(let Q=0,re=K.length,ce=re-1;Q<re;ce=Q++){let me=K[ce],Oe=K[Q];if(Iv(V,W,me,Oe))return 0;S=Math.min(S,sb(V,W,me,Oe,h))}}return S}function eM(f,s,h,d,y,E){if(!E)return;let S=ab(ib(d,E),y,h);S<s&&f.push([S,E,[0,0]])}function Av(f,s,h,d,y,E,S){if(!E||!S)return;let M=ab(ib(d,E),ib(y,S),h);M<s&&f.push([M,E,S])}function Cv(f,s,h,d,y=1/0){let E=Math.min(d.distance(f[0],h[0][0]),y);if(E===0)return E;let S=new HI([[0,[0,f.length-1],[0,0]]],XI),M=ob(h);for(;S.length>0;){let R=S.pop();if(R[0]>=E)continue;let N=R[1],z=s?50:100;if(rn(N)<=z){if(!Cu(N,f.length))return NaN;if(s){let V=hq(f,N,h,d);if(isNaN(V)||V===0)return V;E=Math.min(E,V)}else for(let V=N[0];V<=N[1];++V){let W=cq(f[V],h,d);if(E=Math.min(E,W),E===0)return 0}}else{let V=nb(N,s);eM(S,E,d,f,M,V[0]),eM(S,E,d,f,M,V[1])}}return E}function Pv(f,s,h,d,y,E=1/0){let S=Math.min(E,y.distance(f[0],h[0]));if(S===0)return S;let M=new HI([[0,[0,f.length-1],[0,h.length-1]]],XI);for(;M.length>0;){let R=M.pop();if(R[0]>=S)continue;let N=R[1],z=R[2],V=s?50:100,W=d?50:100;if(rn(N)<=V&&rn(z)<=W){if(!Cu(N,f.length)&&Cu(z,h.length))return NaN;let K;if(s&&d)K=lq(f,N,h,z,y),S=Math.min(S,K);else if(s&&!d){let Q=f.slice(N[0],N[1]+1);for(let re=z[0];re<=z[1];++re)if(K=Lh(h[re],Q,y),S=Math.min(S,K),S===0)return S}else if(!s&&d){let Q=h.slice(z[0],z[1]+1);for(let re=N[0];re<=N[1];++re)if(K=Lh(f[re],Q,y),S=Math.min(S,K),S===0)return S}else K=uq(f,N,h,z,y),S=Math.min(S,K)}else{let K=nb(N,s),Q=nb(z,d);Av(M,S,y,f,h,K[0],Q[0]),Av(M,S,y,f,h,K[0],Q[1]),Av(M,S,y,f,h,K[1],Q[0]),Av(M,S,y,f,h,K[1],Q[1])}}return S}function lb(f){return f.type==="MultiPolygon"?f.coordinates.map(s=>({type:"Polygon",coordinates:s})):f.type==="MultiLineString"?f.coordinates.map(s=>({type:"LineString",coordinates:s})):f.type==="MultiPoint"?f.coordinates.map(s=>({type:"Point",coordinates:s})):[f]}class Dh{constructor(s,h){this.type=ot,this.geojson=s,this.geometries=h}static parse(s,h){if(s.length!==2)return h.error(`'distance' expression requires exactly one argument, but found ${s.length-1} instead.`);if(En(s[1])){let d=s[1];if(d.type==="FeatureCollection")return new Dh(d,d.features.map(y=>lb(y.geometry)).flat());if(d.type==="Feature")return new Dh(d,lb(d.geometry));if("type"in d&&"coordinates"in d)return new Dh(d,lb(d))}return h.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(h,d){let y=h.geometry(),E=y.flat().map(R=>Jx([R.x,R.y],h.canonical));if(y.length===0)return NaN;let S=new rb(E[0][1]),M=1/0;for(let R of d){switch(R.type){case"Point":M=Math.min(M,Pv(E,!1,[R.coordinates],!1,S,M));break;case"LineString":M=Math.min(M,Pv(E,!1,R.coordinates,!0,S,M));break;case"Polygon":M=Math.min(M,Cv(E,!1,R.coordinates,S,M))}if(M===0)return M}return M}(s,this.geometries);if(s.geometryType()==="LineString")return function(h,d){let y=h.geometry(),E=y.flat().map(R=>Jx([R.x,R.y],h.canonical));if(y.length===0)return NaN;let S=new rb(E[0][1]),M=1/0;for(let R of d){switch(R.type){case"Point":M=Math.min(M,Pv(E,!0,[R.coordinates],!1,S,M));break;case"LineString":M=Math.min(M,Pv(E,!0,R.coordinates,!0,S,M));break;case"Polygon":M=Math.min(M,Cv(E,!0,R.coordinates,S,M))}if(M===0)return M}return M}(s,this.geometries);if(s.geometryType()==="Polygon")return function(h,d){let y=h.geometry();if(y.length===0||y[0].length===0)return NaN;let E=Mv(y,0).map(R=>R.map(N=>N.map(z=>Jx([z.x,z.y],h.canonical)))),S=new rb(E[0][0][0][1]),M=1/0;for(let R of d)for(let N of E){switch(R.type){case"Point":M=Math.min(M,Cv([R.coordinates],!1,N,S,M));break;case"LineString":M=Math.min(M,Cv(R.coordinates,!0,N,S,M));break;case"Polygon":M=Math.min(M,fq(N,R.coordinates,S,M))}if(M===0)return M}return M}(s,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Rv{constructor(s){this.type=_r,this.key=s}static parse(s,h){if(s.length!==2)return h.error(`Expected 1 argument, but found ${s.length-1} instead.`);let d=s[1];return d==null?h.error("Global state property must be defined."):typeof d!="string"?h.error(`Global state property must be string, but found ${typeof s[1]} instead.`):new Rv(d)}evaluate(s){var h;let d=(h=s.globals)===null||h===void 0?void 0:h.globalState;return d&&Object.keys(d).length!==0?nm(d,this.key):null}eachChild(){}outputDefined(){return!1}}let Qf={"==":bv,"!=":eq,">":tq,"<":Qx,">=":nq,"<=":rq,array:Ar,at:Xx,boolean:Ar,case:lo,coalesce:Ph,collator:wv,format:Ev,image:Sv,in:yv,"index-of":cm,interpolate:Go,"interpolate-hcl":Go,"interpolate-lab":Go,length:Tv,let:Yf,literal:xr,match:Ah,number:Ar,"number-format":Kf,object:Ar,slice:Ch,step:_c,string:Ar,"to-boolean":Vo,"to-color":Vo,"to-number":Vo,"to-string":Vo,var:um,within:xc,distance:Dh,"global-state":Rv};class ws{constructor(s,h,d,y){this.name=s,this.type=h,this._evaluate=d,this.args=y}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,h){let d=s[0],y=ws.definitions[d];if(!y)return h.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);let E=Array.isArray(y)?y[0]:y.type,S=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,M=S.filter(([N])=>!Array.isArray(N)||N.length===s.length-1),R=null;for(let[N,z]of M){R=new lm(h.registry,Ov,h.path,null,h.scope);let V=[],W=!1;for(let K=1;K<s.length;K++){let Q=s[K],re=Array.isArray(N)?N[K-1]:N.type,ce=R.parse(Q,1+V.length,re);if(!ce){W=!0;break}V.push(ce)}if(!W)if(Array.isArray(N)&&N.length!==V.length)R.error(`Expected ${N.length} arguments, but found ${V.length} instead.`);else{for(let K=0;K<V.length;K++){let Q=Array.isArray(N)?N[K]:N.type,re=V[K];R.concat(K+1).checkSubtype(Q,re.type)}if(R.errors.length===0)return new ws(d,E,z,V)}}if(M.length===1)h.errors.push(...R.errors);else{let N=(M.length?M:S).map(([V])=>{return W=V,Array.isArray(W)?`(${W.map(Jn).join(", ")})`:`(${Jn(W.type)}...)`;var W}).join(" | "),z=[];for(let V=1;V<s.length;V++){let W=h.parse(s[V],1+z.length);if(!W)return null;z.push(Jn(W.type))}h.error(`Expected arguments of type ${N}, but found (${z.join(", ")}) instead.`)}return null}static register(s,h){ws.definitions=h;for(let d in h)s[d]=ws}}function tM(f,[s,h,d,y]){s=s.evaluate(f),h=h.evaluate(f),d=d.evaluate(f);let E=y?y.evaluate(f):1,S=sm(s,h,d,E);if(S)throw new Vn(S);return new Yr(s/255,h/255,d/255,E,!1)}function rM(f,s){return f in s}function ub(f,s){let h=s[f];return h===void 0?null:h}function Nh(f){return{type:f}}function Ov(f){if(f instanceof um)return Ov(f.boundExpression);if(f instanceof ws&&f.name==="error"||f instanceof wv||f instanceof xc||f instanceof Dh||f instanceof Rv)return!1;let s=f instanceof Vo||f instanceof Ar,h=!0;return f.eachChild(d=>{h=s?h&&Ov(d):h&&d instanceof xr}),!!h&&Lv(f)&&Dv(f,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Lv(f){if(f instanceof ws&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof xc||f instanceof Dh)return!1;let s=!0;return f.eachChild(h=>{s&&!Lv(h)&&(s=!1)}),s}function vm(f){if(f instanceof ws&&f.name==="feature-state")return!1;let s=!0;return f.eachChild(h=>{s&&!vm(h)&&(s=!1)}),s}function Dv(f,s){if(f instanceof ws&&s.indexOf(f.name)>=0)return!1;let h=!0;return f.eachChild(d=>{h&&!Dv(d,s)&&(h=!1)}),h}function Nv(f){return{result:"success",value:f}}function Jf(f){return{result:"error",value:f}}function ep(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function nM(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function kv(f){return!!f.expression&&f.expression.interpolated}function zr(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function qv(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)&&mi(f)===Dn}function jv(f){return f}function cb(f,s){let h=f.stops&&typeof f.stops[0][0]=="object",d=h||!(h||f.property!==void 0),y=f.type||(kv(s)?"exponential":"interval"),E=function(z){switch(z.type){case"color":return Yr.parse;case"padding":return Io.parse;case"numberArray":return Ni.parse;case"colorArray":return Mo.parse;default:return null}}(s);if(E&&((f=Fr({},f)).stops&&(f.stops=f.stops.map(z=>[z[0],E(z[1])])),f.default=E(f.default?f.default:s.default)),f.colorSpace&&(S=f.colorSpace)!=="rgb"&&S!=="hcl"&&S!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var S;let M=function(z){switch(z){case"exponential":return iM;case"interval":return dq;case"categorical":return pq;case"identity":return mq;default:throw new Error(`Unknown function type "${z}"`)}}(y),R,N;if(y==="categorical"){R=Object.create(null);for(let z of f.stops)R[z[0]]=z[1];N=typeof f.stops[0][0]}if(h){let z={},V=[];for(let Q=0;Q<f.stops.length;Q++){let re=f.stops[Q],ce=re[0].zoom;z[ce]===void 0&&(z[ce]={zoom:ce,type:f.type,property:f.property,default:f.default,stops:[]},V.push(ce)),z[ce].stops.push([re[0].value,re[1]])}let W=[];for(let Q of V)W.push([z[Q].zoom,cb(z[Q],s)]);let K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:Go.interpolationFactor.bind(void 0,K),zoomStops:W.map(Q=>Q[0]),evaluate:({zoom:Q},re)=>iM({stops:W,base:f.base},s,Q).evaluate(Q,re)}}if(d){let z=y==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:Go.interpolationFactor.bind(void 0,z),zoomStops:f.stops.map(V=>V[0]),evaluate:({zoom:V})=>M(f,s,V,R,N)}}return{kind:"source",evaluate(z,V){let W=V&&V.properties?V.properties[f.property]:void 0;return W===void 0?ym(f.default,s.default):M(f,s,W,R,N)}}}function ym(f,s,h){return f!==void 0?f:s!==void 0?s:h!==void 0?h:void 0}function pq(f,s,h,d,y){return ym(typeof h===y?d[h]:void 0,f.default,s.default)}function dq(f,s,h){if(zr(h)!=="number")return ym(f.default,s.default);let d=f.stops.length;if(d===1||h<=f.stops[0][0])return f.stops[0][1];if(h>=f.stops[d-1][0])return f.stops[d-1][1];let y=hm(f.stops.map(E=>E[0]),h);return f.stops[y][1]}function iM(f,s,h){let d=f.base!==void 0?f.base:1;if(zr(h)!=="number")return ym(f.default,s.default);let y=f.stops.length;if(y===1||h<=f.stops[0][0])return f.stops[0][1];if(h>=f.stops[y-1][0])return f.stops[y-1][1];let E=hm(f.stops.map(z=>z[0]),h),S=function(z,V,W,K){let Q=K-W,re=z-W;return Q===0?0:V===1?re/Q:(Math.pow(V,re)-1)/(Math.pow(V,Q)-1)}(h,d,f.stops[E][0],f.stops[E+1][0]),M=f.stops[E][1],R=f.stops[E+1][1],N=Cl[s.type]||jv;return typeof M.evaluate=="function"?{evaluate(...z){let V=M.evaluate.apply(void 0,z),W=R.evaluate.apply(void 0,z);if(V!==void 0&&W!==void 0)return N(V,W,S,f.colorSpace)}}:N(M,R,S,f.colorSpace)}function mq(f,s,h){switch(s.type){case"color":h=Yr.parse(h);break;case"formatted":h=Ta.fromString(h.toString());break;case"resolvedImage":h=Xa.fromString(h.toString());break;case"padding":h=Io.parse(h);break;case"colorArray":h=Mo.parse(h);break;case"numberArray":h=Ni.parse(h);break;default:zr(h)===s.type||s.type==="enum"&&s.values[h]||(h=void 0)}return ym(h,f.default,s.default)}ws.register(Qf,{error:[{kind:"error"},[Yt],(f,[s])=>{throw new Vn(s.evaluate(f))}],typeof:[Yt,[_r],(f,[s])=>Jn(mi(s.evaluate(f)))],"to-rgba":[Ka(ot,4),[In],(f,[s])=>{let[h,d,y,E]=s.evaluate(f).rgb;return[255*h,255*d,255*y,E]}],rgb:[In,[ot,ot,ot],tM],rgba:[In,[ot,ot,ot,ot],tM],has:{type:mr,overloads:[[[Yt],(f,[s])=>rM(s.evaluate(f),f.properties())],[[Yt,Dn],(f,[s,h])=>rM(s.evaluate(f),h.evaluate(f))]]},get:{type:_r,overloads:[[[Yt],(f,[s])=>ub(s.evaluate(f),f.properties())],[[Yt,Dn],(f,[s,h])=>ub(s.evaluate(f),h.evaluate(f))]]},"feature-state":[_r,[Yt],(f,[s])=>ub(s.evaluate(f),f.featureState||{})],properties:[Dn,[],f=>f.properties()],"geometry-type":[Yt,[],f=>f.geometryType()],id:[_r,[],f=>f.id()],zoom:[ot,[],f=>f.globals.zoom],"heatmap-density":[ot,[],f=>f.globals.heatmapDensity||0],"line-progress":[ot,[],f=>f.globals.lineProgress||0],accumulated:[_r,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[ot,Nh(ot),(f,s)=>{let h=0;for(let d of s)h+=d.evaluate(f);return h}],"*":[ot,Nh(ot),(f,s)=>{let h=1;for(let d of s)h*=d.evaluate(f);return h}],"-":{type:ot,overloads:[[[ot,ot],(f,[s,h])=>s.evaluate(f)-h.evaluate(f)],[[ot],(f,[s])=>-s.evaluate(f)]]},"/":[ot,[ot,ot],(f,[s,h])=>s.evaluate(f)/h.evaluate(f)],"%":[ot,[ot,ot],(f,[s,h])=>s.evaluate(f)%h.evaluate(f)],ln2:[ot,[],()=>Math.LN2],pi:[ot,[],()=>Math.PI],e:[ot,[],()=>Math.E],"^":[ot,[ot,ot],(f,[s,h])=>Math.pow(s.evaluate(f),h.evaluate(f))],sqrt:[ot,[ot],(f,[s])=>Math.sqrt(s.evaluate(f))],log10:[ot,[ot],(f,[s])=>Math.log(s.evaluate(f))/Math.LN10],ln:[ot,[ot],(f,[s])=>Math.log(s.evaluate(f))],log2:[ot,[ot],(f,[s])=>Math.log(s.evaluate(f))/Math.LN2],sin:[ot,[ot],(f,[s])=>Math.sin(s.evaluate(f))],cos:[ot,[ot],(f,[s])=>Math.cos(s.evaluate(f))],tan:[ot,[ot],(f,[s])=>Math.tan(s.evaluate(f))],asin:[ot,[ot],(f,[s])=>Math.asin(s.evaluate(f))],acos:[ot,[ot],(f,[s])=>Math.acos(s.evaluate(f))],atan:[ot,[ot],(f,[s])=>Math.atan(s.evaluate(f))],min:[ot,Nh(ot),(f,s)=>Math.min(...s.map(h=>h.evaluate(f)))],max:[ot,Nh(ot),(f,s)=>Math.max(...s.map(h=>h.evaluate(f)))],abs:[ot,[ot],(f,[s])=>Math.abs(s.evaluate(f))],round:[ot,[ot],(f,[s])=>{let h=s.evaluate(f);return h<0?-Math.round(-h):Math.round(h)}],floor:[ot,[ot],(f,[s])=>Math.floor(s.evaluate(f))],ceil:[ot,[ot],(f,[s])=>Math.ceil(s.evaluate(f))],"filter-==":[mr,[Yt,_r],(f,[s,h])=>f.properties()[s.value]===h.value],"filter-id-==":[mr,[_r],(f,[s])=>f.id()===s.value],"filter-type-==":[mr,[Yt],(f,[s])=>f.geometryType()===s.value],"filter-<":[mr,[Yt,_r],(f,[s,h])=>{let d=f.properties()[s.value],y=h.value;return typeof d==typeof y&&d<y}],"filter-id-<":[mr,[_r],(f,[s])=>{let h=f.id(),d=s.value;return typeof h==typeof d&&h<d}],"filter->":[mr,[Yt,_r],(f,[s,h])=>{let d=f.properties()[s.value],y=h.value;return typeof d==typeof y&&d>y}],"filter-id->":[mr,[_r],(f,[s])=>{let h=f.id(),d=s.value;return typeof h==typeof d&&h>d}],"filter-<=":[mr,[Yt,_r],(f,[s,h])=>{let d=f.properties()[s.value],y=h.value;return typeof d==typeof y&&d<=y}],"filter-id-<=":[mr,[_r],(f,[s])=>{let h=f.id(),d=s.value;return typeof h==typeof d&&h<=d}],"filter->=":[mr,[Yt,_r],(f,[s,h])=>{let d=f.properties()[s.value],y=h.value;return typeof d==typeof y&&d>=y}],"filter-id->=":[mr,[_r],(f,[s])=>{let h=f.id(),d=s.value;return typeof h==typeof d&&h>=d}],"filter-has":[mr,[_r],(f,[s])=>s.value in f.properties()],"filter-has-id":[mr,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[mr,[Ka(Yt)],(f,[s])=>s.value.indexOf(f.geometryType())>=0],"filter-id-in":[mr,[Ka(_r)],(f,[s])=>s.value.indexOf(f.id())>=0],"filter-in-small":[mr,[Yt,Ka(_r)],(f,[s,h])=>h.value.indexOf(f.properties()[s.value])>=0],"filter-in-large":[mr,[Yt,Ka(_r)],(f,[s,h])=>function(d,y,E,S){for(;E<=S;){let M=E+S>>1;if(y[M]===d)return!0;y[M]>d?S=M-1:E=M+1}return!1}(f.properties()[s.value],h.value,0,h.value.length-1)],all:{type:mr,overloads:[[[mr,mr],(f,[s,h])=>s.evaluate(f)&&h.evaluate(f)],[Nh(mr),(f,s)=>{for(let h of s)if(!h.evaluate(f))return!1;return!0}]]},any:{type:mr,overloads:[[[mr,mr],(f,[s,h])=>s.evaluate(f)||h.evaluate(f)],[Nh(mr),(f,s)=>{for(let h of s)if(h.evaluate(f))return!0;return!1}]]},"!":[mr,[mr],(f,[s])=>!s.evaluate(f)],"is-supported-script":[mr,[Yt],(f,[s])=>{let h=f.globals&&f.globals.isSupportedScript;return!h||h(s.evaluate(f))}],upcase:[Yt,[Yt],(f,[s])=>s.evaluate(f).toUpperCase()],downcase:[Yt,[Yt],(f,[s])=>s.evaluate(f).toLowerCase()],concat:[Yt,Nh(_r),(f,s)=>s.map(h=>Kr(h.evaluate(f))).join("")],"resolved-locale":[Yt,[vc],(f,[s])=>s.evaluate(f).resolvedLocale()]});class Fv{constructor(s,h){this.expression=s,this._warningHistory={},this._evaluator=new Kx,this._defaultValue=h?function(d){if(d.type==="color"&&qv(d.default))return new Yr(0,0,0,0);switch(d.type){case"color":return Yr.parse(d.default)||null;case"padding":return Io.parse(d.default)||null;case"numberArray":return Ni.parse(d.default)||null;case"colorArray":return Mo.parse(d.default)||null;case"variableAnchorOffsetCollection":return oa.parse(d.default)||null;case"projectionDefinition":return Ia.parse(d.default)||null;default:return d.default===void 0?null:d.default}}(h):null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(s,h,d,y,E,S){return this._evaluator.globals=s,this._evaluator.feature=h,this._evaluator.featureState=d,this._evaluator.canonical=y,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=S,this.expression.evaluate(this._evaluator)}evaluate(s,h,d,y,E,S){this._evaluator.globals=s,this._evaluator.feature=h||null,this._evaluator.featureState=d||null,this._evaluator.canonical=y,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=S||null;try{let M=this.expression.evaluate(this._evaluator);if(M==null||typeof M=="number"&&M!=M)return this._defaultValue;if(this._enumValues&&!(M in this._enumValues))throw new Vn(`Expected value to be one of ${Object.keys(this._enumValues).map(R=>JSON.stringify(R)).join(", ")}, but found ${JSON.stringify(M)} instead.`);return M}catch(M){return this._warningHistory[M.message]||(this._warningHistory[M.message]=!0,typeof console!="undefined"&&console.warn(M.message)),this._defaultValue}}}function _m(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in Qf}function zv(f,s){let h=new lm(Qf,Ov,[],s?function(y){let E={color:In,string:Yt,number:ot,enum:Yt,boolean:mr,formatted:yc,padding:wh,numberArray:Mu,colorArray:tm,projectionDefinition:Zr,resolvedImage:Eh,variableAnchorOffsetCollection:Di};return y.type==="array"?Ka(E[y.value]||_r,y.length):E[y.type]}(s):void 0),d=h.parse(f,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Nv(new Fv(d,s)):Jf(h.errors)}class hb{constructor(s,h){this.kind=s,this._styleExpression=h,this.isStateDependent=s!=="constant"&&!vm(h.expression)}evaluateWithoutErrorHandling(s,h,d,y,E,S){return this._styleExpression.evaluateWithoutErrorHandling(s,h,d,y,E,S)}evaluate(s,h,d,y,E,S){return this._styleExpression.evaluate(s,h,d,y,E,S)}}class Bv{constructor(s,h,d,y){this.kind=s,this.zoomStops=d,this._styleExpression=h,this.isStateDependent=s!=="camera"&&!vm(h.expression),this.interpolationType=y}evaluateWithoutErrorHandling(s,h,d,y,E,S){return this._styleExpression.evaluateWithoutErrorHandling(s,h,d,y,E,S)}evaluate(s,h,d,y,E,S){return this._styleExpression.evaluate(s,h,d,y,E,S)}interpolationFactor(s,h,d){return this.interpolationType?Go.interpolationFactor(this.interpolationType,s,h,d):0}}function fb(f,s){let h=zv(f,s);if(h.result==="error")return h;let d=h.value.expression,y=Lv(d);if(!y&&!ep(s))return Jf([new Sr("","data expressions not supported")]);let E=Dv(d,["zoom"]);if(!E&&!nM(s))return Jf([new Sr("","zoom expressions not supported")]);let S=bm(d);return S||E?S instanceof Sr?Jf([S]):S instanceof Go&&!kv(s)?Jf([new Sr("","\"interpolate\" expressions cannot be used with this property")]):Nv(S?new Bv(y?"camera":"composite",h.value,S.labels,S instanceof Go?S.interpolation:void 0):new hb(y?"constant":"source",h.value)):Jf([new Sr("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class xm{constructor(s,h){this._parameters=s,this._specification=h,Fr(this,cb(this._parameters,this._specification))}static deserialize(s){return new xm(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function bm(f){let s=null;if(f instanceof Yf)s=bm(f.result);else if(f instanceof Ph){for(let h of f.args)if(s=bm(h),s)break}else(f instanceof _c||f instanceof Go)&&f.input instanceof ws&&f.input.name==="zoom"&&(s=f);return s instanceof Sr||f.eachChild(h=>{let d=bm(h);d instanceof Sr?s=d:!s&&d?s=new Sr("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):s&&d&&s!==d&&(s=new Sr("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),s}function wm(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(let s of f.slice(1))if(!wm(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}let pb={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Em(f){if(f==null)return{filter:()=>!0,needGeometry:!1};wm(f)||(f=Vv(f));let s=zv(f,pb);if(s.result==="error")throw new Error(s.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,d,y)=>s.value.evaluate(h,d,{},y),needGeometry:oM(f)}}function Uv(f,s){return f<s?-1:f>s?1:0}function oM(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let s=1;s<f.length;s++)if(oM(f[s]))return!0;return!1}function Vv(f){if(!f)return!0;let s=f[0];return f.length<=1?s!=="any":s==="=="?db(f[1],f[2],"=="):s==="!="?Gv(db(f[1],f[2],"==")):s==="<"||s===">"||s==="<="||s===">="?db(f[1],f[2],s):s==="any"?(h=f.slice(1),["any"].concat(h.map(Vv))):s==="all"?["all"].concat(f.slice(1).map(Vv)):s==="none"?["all"].concat(f.slice(1).map(Vv).map(Gv)):s==="in"?aM(f[1],f.slice(2)):s==="!in"?Gv(aM(f[1],f.slice(2))):s==="has"?sM(f[1]):s!=="!has"||Gv(sM(f[1]));var h}function db(f,s,h){switch(f){case"$type":return[`filter-type-${h}`,s];case"$id":return[`filter-id-${h}`,s];default:return[`filter-${h}`,f,s]}}function aM(f,s){if(s.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(h=>typeof h!=typeof s[0])?["filter-in-large",f,["literal",s.sort(Uv)]]:["filter-in-small",f,["literal",s]]}}function sM(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function Gv(f){return["!",f]}function $v(f){let s=typeof f;if(s==="number"||s==="boolean"||s==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let y="[";for(let E of f)y+=`${$v(E)},`;return`${y}]`}let h=Object.keys(f).sort(),d="{";for(let y=0;y<h.length;y++)d+=`${JSON.stringify(h[y])}:${$v(f[h[y]])},`;return`${d}}`}function lM(f){let s="";for(let h of Ie)s+=`/${$v(f[h])}`;return s}function Sm(f){let s=f.value;return s?[new Ye(f.key,s,"constants have been deprecated as of v8")]:[]}function Ei(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function bc(f){if(Array.isArray(f))return f.map(bc);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){let s={};for(let h in f)s[h]=bc(f[h]);return s}return Ei(f)}function Qa(f){let s=f.key,h=f.value,d=f.valueSpec||{},y=f.objectElementValidators||{},E=f.style,S=f.styleSpec,M=f.validateSpec,R=[],N=zr(h);if(N!=="object")return[new Ye(s,h,`object expected, ${N} found`)];for(let z in h){let V=z.split(".")[0],W=nm(d,V)||d["*"],K;if(nm(y,V))K=y[V];else if(nm(d,V))K=M;else if(y["*"])K=y["*"];else{if(!d["*"]){R.push(new Ye(s,h[z],`unknown property "${z}"`));continue}K=M}R=R.concat(K({key:(s&&`${s}.`)+z,value:h[z],valueSpec:W,style:E,styleSpec:S,object:h,objectKey:z,validateSpec:M},h))}for(let z in d)y[z]||d[z].required&&d[z].default===void 0&&h[z]===void 0&&R.push(new Ye(s,h,`missing required property "${z}"`));return R}function mb(f){let s=f.value,h=f.valueSpec,d=f.style,y=f.styleSpec,E=f.key,S=f.arrayElementValidator||f.validateSpec;if(zr(s)!=="array")return[new Ye(E,s,`array expected, ${zr(s)} found`)];if(h.length&&s.length!==h.length)return[new Ye(E,s,`array length ${h.length} expected, length ${s.length} found`)];if(h["min-length"]&&s.length<h["min-length"])return[new Ye(E,s,`array length at least ${h["min-length"]} expected, length ${s.length} found`)];let M={type:h.value,values:h.values};y.$version<7&&(M.function=h.function),zr(h.value)==="object"&&(M=h.value);let R=[];for(let N=0;N<s.length;N++)R=R.concat(S({array:s,arrayIndex:N,value:s[N],valueSpec:M,validateSpec:f.validateSpec,style:d,styleSpec:y,key:`${E}[${N}]`}));return R}function Tm(f){let s=f.key,h=f.value,d=f.valueSpec,y=zr(h);return y==="number"&&h!=h&&(y="NaN"),y!=="number"?[new Ye(s,h,`number expected, ${y} found`)]:"minimum"in d&&h<d.minimum?[new Ye(s,h,`${h} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&h>d.maximum?[new Ye(s,h,`${h} is greater than the maximum value ${d.maximum}`)]:[]}function gb(f){let s=f.valueSpec,h=Ei(f.value.type),d,y,E,S={},M=h!=="categorical"&&f.value.property===void 0,R=!M,N=zr(f.value.stops)==="array"&&zr(f.value.stops[0])==="array"&&zr(f.value.stops[0][0])==="object",z=Qa({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(K){if(h==="identity")return[new Ye(K.key,K.value,"identity function may not have a \"stops\" property")];let Q=[],re=K.value;return Q=Q.concat(mb({key:K.key,value:re,valueSpec:K.valueSpec,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,arrayElementValidator:V})),zr(re)==="array"&&re.length===0&&Q.push(new Ye(K.key,re,"array must have at least one stop")),Q},default:function(K){return K.validateSpec({key:K.key,value:K.value,valueSpec:s,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec})}}});return h==="identity"&&M&&z.push(new Ye(f.key,f.value,"missing required property \"property\"")),h==="identity"||f.value.stops||z.push(new Ye(f.key,f.value,"missing required property \"stops\"")),h==="exponential"&&f.valueSpec.expression&&!kv(f.valueSpec)&&z.push(new Ye(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(R&&!ep(f.valueSpec)?z.push(new Ye(f.key,f.value,"property functions not supported")):M&&!nM(f.valueSpec)&&z.push(new Ye(f.key,f.value,"zoom functions not supported"))),h!=="categorical"&&!N||f.value.property!==void 0||z.push(new Ye(f.key,f.value,"\"property\" property is required")),z;function V(K){let Q=[],re=K.value,ce=K.key;if(zr(re)!=="array")return[new Ye(ce,re,`array expected, ${zr(re)} found`)];if(re.length!==2)return[new Ye(ce,re,`array length 2 expected, length ${re.length} found`)];if(N){if(zr(re[0])!=="object")return[new Ye(ce,re,`object expected, ${zr(re[0])} found`)];if(re[0].zoom===void 0)return[new Ye(ce,re,"object stop key must have zoom")];if(re[0].value===void 0)return[new Ye(ce,re,"object stop key must have value")];if(E&&E>Ei(re[0].zoom))return[new Ye(ce,re[0].zoom,"stop zoom values must appear in ascending order")];Ei(re[0].zoom)!==E&&(E=Ei(re[0].zoom),y=void 0,S={}),Q=Q.concat(Qa({key:`${ce}[0]`,value:re[0],valueSpec:{zoom:{}},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,objectElementValidators:{zoom:Tm,value:W}}))}else Q=Q.concat(W({key:`${ce}[0]`,value:re[0],validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec},re));return _m(bc(re[1]))?Q.concat([new Ye(`${ce}[1]`,re[1],"expressions are not allowed in function stops.")]):Q.concat(K.validateSpec({key:`${ce}[1]`,value:re[1],valueSpec:s,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec}))}function W(K,Q){let re=zr(K.value),ce=Ei(K.value),me=K.value!==null?K.value:Q;if(d){if(re!==d)return[new Ye(K.key,me,`${re} stop domain type must match previous stop domain type ${d}`)]}else d=re;if(re!=="number"&&re!=="string"&&re!=="boolean")return[new Ye(K.key,me,"stop domain value must be a number, string, or boolean")];if(re!=="number"&&h!=="categorical"){let Oe=`number expected, ${re} found`;return ep(s)&&h===void 0&&(Oe+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new Ye(K.key,me,Oe)]}return h!=="categorical"||re!=="number"||isFinite(ce)&&Math.floor(ce)===ce?h!=="categorical"&&re==="number"&&y!==void 0&&ce<y?[new Ye(K.key,me,"stop domain values must appear in ascending order")]:(y=ce,h==="categorical"&&ce in S?[new Ye(K.key,me,"stop domain values must be unique")]:(S[ce]=!0,[])):[new Ye(K.key,me,`integer expected, found ${ce}`)]}}function Rl(f){let s=(f.expressionContext==="property"?fb:zv)(bc(f.value),f.valueSpec);if(s.result==="error")return s.value.map(d=>new Ye(`${f.key}${d.key}`,f.value,d.message));let h=s.value.expression||s.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!h.outputDefined())return[new Ye(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!vm(h))return[new Ye(f.key,f.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(f.expressionContext==="filter"&&!vm(h))return[new Ye(f.key,f.value,"\"feature-state\" data expressions are not supported with filters.")];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!Dv(h,["zoom","feature-state"]))return[new Ye(f.key,f.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(f.expressionContext==="cluster-initial"&&!Lv(h))return[new Ye(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function vb(f){let s=f.key,h=f.value,d=zr(h);return d!=="string"?[new Ye(s,h,`color expected, ${d} found`)]:Yr.parse(String(h))?[]:[new Ye(s,h,`color expected, "${h}" found`)]}function Im(f){let s=f.key,h=f.value,d=f.valueSpec,y=[];return Array.isArray(d.values)?d.values.indexOf(Ei(h))===-1&&y.push(new Ye(s,h,`expected one of [${d.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(d.values).indexOf(Ei(h))===-1&&y.push(new Ye(s,h,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(h)} found`)),y}function yb(f){return wm(bc(f.value))?Rl(Fr({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):uM(f)}function uM(f){let s=f.value,h=f.key;if(zr(s)!=="array")return[new Ye(h,s,`array expected, ${zr(s)} found`)];let d=f.styleSpec,y,E=[];if(s.length<1)return[new Ye(h,s,"filter array must have at least 1 element")];switch(E=E.concat(Im({key:`${h}[0]`,value:s[0],valueSpec:d.filter_operator,style:f.style,styleSpec:f.styleSpec})),Ei(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&Ei(s[1])==="$type"&&E.push(new Ye(h,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&E.push(new Ye(h,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(y=zr(s[1]),y!=="string"&&E.push(new Ye(`${h}[1]`,s[1],`string expected, ${y} found`)));for(let S=2;S<s.length;S++)y=zr(s[S]),Ei(s[1])==="$type"?E=E.concat(Im({key:`${h}[${S}]`,value:s[S],valueSpec:d.geometry_type,style:f.style,styleSpec:f.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&E.push(new Ye(`${h}[${S}]`,s[S],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let S=1;S<s.length;S++)E=E.concat(uM({key:`${h}[${S}]`,value:s[S],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":y=zr(s[1]),s.length!==2?E.push(new Ye(h,s,`filter array for "${s[0]}" operator must have 2 elements`)):y!=="string"&&E.push(new Ye(`${h}[1]`,s[1],`string expected, ${y} found`))}return E}function cM(f,s){let h=f.key,d=f.validateSpec,y=f.style,E=f.styleSpec,S=f.value,M=f.objectKey,R=E[`${s}_${f.layerType}`];if(!R)return[];let N=M.match(/^(.*)-transition$/);if(s==="paint"&&N&&R[N[1]]&&R[N[1]].transition)return d({key:h,value:S,valueSpec:E.transition,style:y,styleSpec:E});let z=f.valueSpec||R[M];if(!z)return[new Ye(h,S,`unknown property "${M}"`)];let V;if(zr(S)==="string"&&ep(z)&&!z.tokens&&(V=/^{([^}]+)}$/.exec(S)))return[new Ye(h,S,`"${M}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(V[1])} }\`.`)];let W=[];return f.layerType==="symbol"&&(M==="text-field"&&y&&!y.glyphs&&W.push(new Ye(h,S,"use of \"text-field\" requires a style \"glyphs\" property")),M==="text-font"&&qv(bc(S))&&Ei(S.type)==="identity"&&W.push(new Ye(h,S,"\"text-font\" does not support identity functions"))),W.concat(d({key:f.key,value:S,valueSpec:z,style:y,styleSpec:E,expressionContext:"property",propertyType:s,propertyKey:M}))}function hM(f){return cM(f,"paint")}function tp(f){return cM(f,"layout")}function rp(f){let s=[],h=f.value,d=f.key,y=f.style,E=f.styleSpec;if(zr(h)!=="object")return[new Ye(d,h,`object expected, ${zr(h)} found`)];h.type||h.ref||s.push(new Ye(d,h,"either \"type\" or \"ref\" is required"));let S=Ei(h.type),M=Ei(h.ref);if(h.id){let R=Ei(h.id);for(let N=0;N<f.arrayIndex;N++){let z=y.layers[N];Ei(z.id)===R&&s.push(new Ye(d,h.id,`duplicate layer id "${h.id}", previously used at line ${z.id.__line__}`))}}if("ref"in h){let R;["type","source","source-layer","filter","layout"].forEach(N=>{N in h&&s.push(new Ye(d,h[N],`"${N}" is prohibited for ref layers`))}),y.layers.forEach(N=>{Ei(N.id)===M&&(R=N)}),R?R.ref?s.push(new Ye(d,h.ref,"ref cannot reference another ref layer")):S=Ei(R.type):s.push(new Ye(d,h.ref,`ref layer "${M}" not found`))}else if(S!=="background")if(h.source){let R=y.sources&&y.sources[h.source],N=R&&Ei(R.type);R?N==="vector"&&S==="raster"?s.push(new Ye(d,h.source,`layer "${h.id}" requires a raster source`)):N!=="raster-dem"&&S==="hillshade"?s.push(new Ye(d,h.source,`layer "${h.id}" requires a raster-dem source`)):N==="raster"&&S!=="raster"?s.push(new Ye(d,h.source,`layer "${h.id}" requires a vector source`)):N!=="vector"||h["source-layer"]?N==="raster-dem"&&S!=="hillshade"?s.push(new Ye(d,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):S!=="line"||!h.paint||!h.paint["line-gradient"]||N==="geojson"&&R.lineMetrics||s.push(new Ye(d,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new Ye(d,h,`layer "${h.id}" must specify a "source-layer"`)):s.push(new Ye(d,h.source,`source "${h.source}" not found`))}else s.push(new Ye(d,h,"missing required property \"source\""));return s=s.concat(Qa({key:d,value:h,valueSpec:E.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${d}.type`,value:h.type,valueSpec:E.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:h,objectKey:"type"}),filter:yb,layout:R=>Qa({layer:h,key:R.key,value:R.value,style:R.style,styleSpec:R.styleSpec,validateSpec:R.validateSpec,objectElementValidators:{"*":N=>tp(Fr({layerType:S},N))}}),paint:R=>Qa({layer:h,key:R.key,value:R.value,style:R.style,styleSpec:R.styleSpec,validateSpec:R.validateSpec,objectElementValidators:{"*":N=>hM(Fr({layerType:S},N))}})}})),s}function Ki(f){let s=f.value,h=f.key,d=zr(s);return d!=="string"?[new Ye(h,s,`string expected, ${d} found`)]:[]}let np={promoteId:function({key:f,value:s}){if(zr(s)==="string")return Ki({key:f,value:s});{let h=[];for(let d in s)h.push(...Ki({key:`${f}.${d}`,value:s[d]}));return h}}};function _b(f){let s=f.value,h=f.key,d=f.styleSpec,y=f.style,E=f.validateSpec;if(!s.type)return[new Ye(h,s,"\"type\" is required")];let S=Ei(s.type),M;switch(S){case"vector":case"raster":return M=Qa({key:h,value:s,valueSpec:d[`source_${S.replace("-","_")}`],style:f.style,styleSpec:d,objectElementValidators:np,validateSpec:E}),M;case"raster-dem":return M=function(R){var N;let z=(N=R.sourceName)!==null&&N!==void 0?N:"",V=R.value,W=R.styleSpec,K=W.source_raster_dem,Q=R.style,re=[],ce=zr(V);if(V===void 0)return re;if(ce!=="object")return re.push(new Ye("source_raster_dem",V,`object expected, ${ce} found`)),re;let me=Ei(V.encoding)==="custom",Oe=["redFactor","greenFactor","blueFactor","baseShift"],we=R.value.encoding?`"${R.value.encoding}"`:"Default";for(let Y in V)!me&&Oe.includes(Y)?re.push(new Ye(Y,V[Y],`In "${z}": "${Y}" is only valid when "encoding" is set to "custom". ${we} encoding found`)):K[Y]?re=re.concat(R.validateSpec({key:Y,value:V[Y],valueSpec:K[Y],validateSpec:R.validateSpec,style:Q,styleSpec:W})):re.push(new Ye(Y,V[Y],`unknown property "${Y}"`));return re}({sourceName:h,value:s,style:f.style,styleSpec:d,validateSpec:E}),M;case"geojson":if(M=Qa({key:h,value:s,valueSpec:d.source_geojson,style:y,styleSpec:d,validateSpec:E,objectElementValidators:np}),s.cluster)for(let R in s.clusterProperties){let[N,z]=s.clusterProperties[R],V=typeof N=="string"?[N,["accumulated"],["get",R]]:N;M.push(...Rl({key:`${h}.${R}.map`,value:z,expressionContext:"cluster-map"})),M.push(...Rl({key:`${h}.${R}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return M;case"video":return Qa({key:h,value:s,valueSpec:d.source_video,style:y,validateSpec:E,styleSpec:d});case"image":return Qa({key:h,value:s,valueSpec:d.source_image,style:y,validateSpec:E,styleSpec:d});case"canvas":return[new Ye(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Im({key:`${h}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function fM(f){let s=f.value,h=f.styleSpec,d=h.light,y=f.style,E=[],S=zr(s);if(s===void 0)return E;if(S!=="object")return E=E.concat([new Ye("light",s,`object expected, ${S} found`)]),E;for(let M in s){let R=M.match(/^(.*)-transition$/);E=E.concat(R&&d[R[1]]&&d[R[1]].transition?f.validateSpec({key:M,value:s[M],valueSpec:h.transition,validateSpec:f.validateSpec,style:y,styleSpec:h}):d[M]?f.validateSpec({key:M,value:s[M],valueSpec:d[M],validateSpec:f.validateSpec,style:y,styleSpec:h}):[new Ye(M,s[M],`unknown property "${M}"`)])}return E}function pM(f){let s=f.value,h=f.styleSpec,d=h.sky,y=f.style,E=zr(s);if(s===void 0)return[];if(E!=="object")return[new Ye("sky",s,`object expected, ${E} found`)];let S=[];for(let M in s)S=S.concat(d[M]?f.validateSpec({key:M,value:s[M],valueSpec:d[M],style:y,styleSpec:h}):[new Ye(M,s[M],`unknown property "${M}"`)]);return S}function ip(f){let s=f.value,h=f.styleSpec,d=h.terrain,y=f.style,E=[],S=zr(s);if(s===void 0)return E;if(S!=="object")return E=E.concat([new Ye("terrain",s,`object expected, ${S} found`)]),E;for(let M in s)E=E.concat(d[M]?f.validateSpec({key:M,value:s[M],valueSpec:d[M],validateSpec:f.validateSpec,style:y,styleSpec:h}):[new Ye(M,s[M],`unknown property "${M}"`)]);return E}function xb(f){let s=[],h=f.value,d=f.key;if(Array.isArray(h)){let y=[],E=[];for(let S in h)h[S].id&&y.includes(h[S].id)&&s.push(new Ye(d,h,`all the sprites' ids must be unique, but ${h[S].id} is duplicated`)),y.push(h[S].id),h[S].url&&E.includes(h[S].url)&&s.push(new Ye(d,h,`all the sprites' URLs must be unique, but ${h[S].url} is duplicated`)),E.push(h[S].url),s=s.concat(Qa({key:`${d}[${S}]`,value:h[S],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return s}return Ki({key:d,value:h})}function Hv(f){return s=f.value,s&&s.constructor===Object?[]:[new Ye(f.key,f.value,`object expected, ${zr(f.value)} found`)];var s}let dM={"*":()=>[],array:mb,boolean:function(f){let s=f.value,h=f.key,d=zr(s);return d!=="boolean"?[new Ye(h,s,`boolean expected, ${d} found`)]:[]},number:Tm,color:vb,constants:Sm,enum:Im,filter:yb,function:gb,layer:rp,object:Qa,source:_b,light:fM,sky:pM,terrain:ip,projection:function(f){let s=f.value,h=f.styleSpec,d=h.projection,y=f.style,E=zr(s);if(s===void 0)return[];if(E!=="object")return[new Ye("projection",s,`object expected, ${E} found`)];let S=[];for(let M in s)S=S.concat(d[M]?f.validateSpec({key:M,value:s[M],valueSpec:d[M],style:y,styleSpec:h}):[new Ye(M,s[M],`unknown property "${M}"`)]);return S},projectionDefinition:function(f){let s=f.key,h=f.value;h=h instanceof String?h.valueOf():h;let d=zr(h);return d!=="array"||function(y){return Array.isArray(y)&&y.length===3&&typeof y[0]=="string"&&typeof y[1]=="string"&&typeof y[2]=="number"}(h)||function(y){return!!["interpolate","step","literal"].includes(y[0])}(h)?["array","string"].includes(d)?[]:[new Ye(s,h,`projection expected, invalid type "${d}" found`)]:[new Ye(s,h,`projection expected, invalid array ${JSON.stringify(h)} found`)]},string:Ki,formatted:function(f){return Ki(f).length===0?[]:Rl(f)},resolvedImage:function(f){return Ki(f).length===0?[]:Rl(f)},padding:function(f){let s=f.key,h=f.value;if(zr(h)==="array"){if(h.length<1||h.length>4)return[new Ye(s,h,`padding requires 1 to 4 values; ${h.length} values found`)];let d={type:"number"},y=[];for(let E=0;E<h.length;E++)y=y.concat(f.validateSpec({key:`${s}[${E}]`,value:h[E],validateSpec:f.validateSpec,valueSpec:d}));return y}return Tm({key:s,value:h,valueSpec:{}})},numberArray:function(f){let s=f.key,h=f.value;if(zr(h)==="array"){let d={type:"number"};if(h.length<1)return[new Ye(s,h,"array length at least 1 expected, length 0 found")];let y=[];for(let E=0;E<h.length;E++)y=y.concat(f.validateSpec({key:`${s}[${E}]`,value:h[E],validateSpec:f.validateSpec,valueSpec:d}));return y}return Tm({key:s,value:h,valueSpec:{}})},colorArray:function(f){let s=f.key,h=f.value;if(zr(h)==="array"){if(h.length<1)return[new Ye(s,h,"array length at least 1 expected, length 0 found")];let d=[];for(let y=0;y<h.length;y++)d=d.concat(vb({key:`${s}[${y}]`,value:h[y]}));return d}return vb({key:s,value:h})},variableAnchorOffsetCollection:function(f){let s=f.key,h=f.value,d=zr(h),y=f.styleSpec;if(d!=="array"||h.length<1||h.length%2!=0)return[new Ye(s,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let E=[];for(let S=0;S<h.length;S+=2)E=E.concat(Im({key:`${s}[${S}]`,value:h[S],valueSpec:y.layout_symbol["text-anchor"]})),E=E.concat(mb({key:`${s}[${S+1}]`,value:h[S+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:y}));return E},sprite:xb,state:Hv};function op(f){let s=f.value,h=f.valueSpec,d=f.styleSpec;return f.validateSpec=op,h.expression&&qv(Ei(s))?gb(f):h.expression&&_m(bc(s))?Rl(f):h.type&&dM[h.type]?dM[h.type](f):Qa(Fr({},f,{valueSpec:h.type?d[h.type]:h}))}function mM(f){let s=f.value,h=f.key,d=Ki(f);return d.length||(s.indexOf("{fontstack}")===-1&&d.push(new Ye(h,s,"\"glyphs\" url must include a \"{fontstack}\" token")),s.indexOf("{range}")===-1&&d.push(new Ye(h,s,"\"glyphs\" url must include a \"{range}\" token"))),d}function $o(f,s=ee){let h=[];return h=h.concat(op({key:"",value:f,valueSpec:s.$root,styleSpec:s,style:f,validateSpec:op,objectElementValidators:{glyphs:mM,"*":()=>[]}})),f.constants&&(h=h.concat(Sm({key:"constants",value:f.constants}))),ap(h)}function il(f){return function(s){return f(nn(xt({},s),{validateSpec:op}))}}function ap(f){return[].concat(f).sort((s,h)=>s.line-h.line)}function ol(f){return function(...s){return ap(f.apply(this,s))}}$o.source=ol(il(_b)),$o.sprite=ol(il(xb)),$o.glyphs=ol(il(mM)),$o.light=ol(il(fM)),$o.sky=ol(il(pM)),$o.terrain=ol(il(ip)),$o.state=ol(il(Hv)),$o.layer=ol(il(rp)),$o.filter=ol(il(yb)),$o.paintProperty=ol(il(hM)),$o.layoutProperty=ol(il(tp));let sp=$o,Wv=sp.light,gq=sp.sky,bb=sp.paintProperty,Zv=sp.layoutProperty;function wb(f,s){let h=!1;if(s&&s.length)for(let d of s)f.fire(new X(new Error(d.message))),h=!0;return h}class lp{constructor(s,h,d){let y=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;let S=new Int32Array(this.arrayBuffer);s=S[0],this.d=(h=S[1])+2*(d=S[2]);for(let R=0;R<this.d*this.d;R++){let N=S[3+R],z=S[3+R+1];y.push(N===z?null:S.subarray(N,z))}let M=S[3+y.length+1];this.keys=S.subarray(S[3+y.length],M),this.bboxes=S.subarray(M),this.insert=this._insertReadonly}else{this.d=h+2*d;for(let S=0;S<this.d*this.d;S++)y.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=s,this.padding=d,this.scale=h/s,this.uid=0;let E=d/h*s;this.min=-E,this.max=s+E}insert(s,h,d,y,E){this._forEachCell(h,d,y,E,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(h),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(E)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,h,d,y,E,S){this.cells[E].push(S)}query(s,h,d,y,E){let S=this.min,M=this.max;if(s<=S&&h<=S&&M<=d&&M<=y&&!E)return Array.prototype.slice.call(this.keys);{let R=[];return this._forEachCell(s,h,d,y,this._queryCell,R,{},E),R}}_queryCell(s,h,d,y,E,S,M,R){let N=this.cells[E];if(N!==null){let z=this.keys,V=this.bboxes;for(let W=0;W<N.length;W++){let K=N[W];if(M[K]===void 0){let Q=4*K;(R?R(V[Q+0],V[Q+1],V[Q+2],V[Q+3]):s<=V[Q+2]&&h<=V[Q+3]&&d>=V[Q+0]&&y>=V[Q+1])?(M[K]=!0,S.push(z[K])):M[K]=!1}}}}_forEachCell(s,h,d,y,E,S,M,R){let N=this._convertToCellCoord(s),z=this._convertToCellCoord(h),V=this._convertToCellCoord(d),W=this._convertToCellCoord(y);for(let K=N;K<=V;K++)for(let Q=z;Q<=W;Q++){let re=this.d*Q+K;if((!R||R(this._convertFromCellCoord(K),this._convertFromCellCoord(Q),this._convertFromCellCoord(K+1),this._convertFromCellCoord(Q+1)))&&E.call(this,s,h,d,y,re,S,M,R))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let s=this.cells,h=3+this.cells.length+1+1,d=0;for(let S=0;S<this.cells.length;S++)d+=this.cells[S].length;let y=new Int32Array(h+d+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let E=h;for(let S=0;S<s.length;S++){let M=s[S];y[3+S]=E,y.set(M,E),E+=M.length}return y[3+s.length]=E,y.set(this.keys,E),E+=this.keys.length,y[3+s.length+1]=E,y.set(this.bboxes,E),E+=this.bboxes.length,y.buffer}static serialize(s,h){let d=s.toArrayBuffer();return h&&h.push(d),{buffer:d}}static deserialize(s){return new lp(s.buffer)}}let Ol={};function Ft(f,s,h={}){if(Ol[f])throw new Error(`${f} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:f,writeable:!1}),Ol[f]={klass:s,omit:h.omit||[],shallow:h.shallow||[]}}Ft("Object",Object),Ft("TransferableGridIndex",lp),Ft("Color",Yr),Ft("Error",Error),Ft("AJAXError",Qn),Ft("ResolvedImage",Xa),Ft("StylePropertyFunction",xm),Ft("StyleExpression",Fv,{omit:["_evaluator"]}),Ft("ZoomDependentExpression",Bv),Ft("ZoomConstantExpression",hb),Ft("CompoundExpression",ws,{omit:["_evaluate"]});for(let f in Qf)Qf[f]._classRegistryKey||Ft(`Expression_${f}`,Qf[f]);function Yv(f){return f&&typeof ArrayBuffer!="undefined"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function Kv(f){return f.$name||f.constructor._classRegistryKey}function gM(f){return!function(s){if(s===null||typeof s!="object")return!1;let h=Kv(s);return!(!h||h==="Object")}(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||Yv(f)||Vt(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function up(f,s){if(gM(f))return(Yv(f)||Vt(f))&&s&&s.push(f),ArrayBuffer.isView(f)&&s&&s.push(f.buffer),f instanceof ImageData&&s&&s.push(f.data.buffer),f;if(Array.isArray(f)){let E=[];for(let S of f)E.push(up(S,s));return E}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);let h=Kv(f);if(!h)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!Ol[h])throw new Error(`${h} is not registered.`);let{klass:d}=Ol[h],y=d.serialize?d.serialize(f,s):{};if(d.serialize){if(s&&y===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let E in f){if(!f.hasOwnProperty(E)||Ol[h].omit.indexOf(E)>=0)continue;let S=f[E];y[E]=Ol[h].shallow.indexOf(E)>=0?S:up(S,s)}f instanceof Error&&(y.message=f.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(y.$name=h),y}function Mm(f){if(gM(f))return f;if(Array.isArray(f))return f.map(Mm);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);let s=Kv(f)||"Object";if(!Ol[s])throw new Error(`can't deserialize unregistered class ${s}`);let{klass:h}=Ol[s];if(!h)throw new Error(`can't deserialize unregistered class ${s}`);if(h.deserialize)return h.deserialize(f);let d=Object.create(h.prototype);for(let y of Object.keys(f)){if(y==="$name")continue;let E=f[y];d[y]=Ol[s].shallow.indexOf(y)>=0?E:Mm(E)}return d}class Eb{constructor(){this.first=!0}update(s,h){let d=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=h),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=d,!0))}}let Br={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Hangul Syllables":f=>f>=44032&&f<=55215,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function Xv(f){for(let s of f)if(Qv(s.charCodeAt(0)))return!0;return!1}function vq(f){for(let s of f)if(!yM(s.charCodeAt(0)))return!1;return!0}function Sb(f){let s=f.map(h=>{try{return new RegExp(`\\p{sc=${h}}`,"u").source}catch(d){return null}}).filter(h=>h);return new RegExp(s.join("|"),"u")}let vM=Sb(["Arab","Dupl","Mong","Ougr","Syrc"]);function yM(f){return!vM.test(String.fromCodePoint(f))}let Tb=Sb(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Qv(f){return!(f!==746&&f!==747&&(f<4352||!(Br["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||Br["CJK Compatibility"](f)||Br["CJK Strokes"](f)||!(!Br["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||Br["Enclosed CJK Letters and Months"](f)||Br["Ideographic Description Characters"](f)||Br.Kanbun(f)||Br.Katakana(f)&&f!==12540||!(!Br["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!Br["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||Br["Vertical Forms"](f)||Br["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||Tb.test(String.fromCodePoint(f)))))}function Am(f){return!(Qv(f)||function(s){return!!(Br["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Br["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Br["Letterlike Symbols"](s)||Br["Number Forms"](s)||Br["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Br["Control Pictures"](s)&&s!==9251||Br["Optical Character Recognition"](s)||Br["Enclosed Alphanumerics"](s)||Br["Geometric Shapes"](s)||Br["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Br["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Br["CJK Symbols and Punctuation"](s)||Br.Katakana(s)||Br["Private Use Area"](s)||Br["CJK Compatibility Forms"](s)||Br["Small Form Variants"](s)||Br["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(f))}let yq=Sb(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Jv(f){return yq.test(String.fromCodePoint(f))}function _q(f,s){return!(!s&&Jv(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||Br.Khmer(f))}function xq(f){for(let s of f)if(Jv(s.charCodeAt(0)))return!0;return!1}let Pu=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(Pu.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,s){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;let h=f.pluginURL,d=new Promise(E=>{this.loadScriptResolve=E});s(h);let y=new Promise(E=>setTimeout(()=>E(),this.TIMEOUT));if(yield Promise.race([d,y]),this.isParsed()){let E={pluginStatus:"loaded",pluginURL:h};return this.setState(E),E}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${h}`)})}};class Gn{constructor(s,h){this.zoom=s,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Eb,this.transition={})}isSupportedScript(s){return function(h,d){for(let y of h)if(!_q(y.charCodeAt(0),d))return!1;return!0}(s,Pu.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let s=this.zoom,h=s-Math.floor(s),d=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*h}}}class Cm{constructor(s,h){this.property=s,this.value=h,this.expression=function(d,y){if(qv(d))return new xm(d,y);if(_m(d)){let E=fb(d,y);if(E.result==="error")throw new Error(E.value.map(S=>`${S.key}: ${S.message}`).join(", "));return E.value}{let E=d;return y.type==="color"&&typeof d=="string"?E=Yr.parse(d):y.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?y.type!=="numberArray"||typeof d!="number"&&!Array.isArray(d)?y.type!=="colorArray"||typeof d!="string"&&!Array.isArray(d)?y.type==="variableAnchorOffsetCollection"&&Array.isArray(d)?E=oa.parse(d):y.type==="projectionDefinition"&&typeof d=="string"&&(E=Ia.parse(d)):E=Mo.parse(d):E=Ni.parse(d):E=Io.parse(d),{kind:"constant",evaluate:()=>E}}}(h===void 0?s.specification.default:h,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,h,d){return this.property.possiblyEvaluate(this,s,h,d)}}class Ib{constructor(s){this.property=s,this.value=new Cm(s,void 0)}transitioned(s,h){return new xM(this.property,this.value,h,Fe({},s.transition,this.transition),s.now)}untransitioned(){return new xM(this.property,this.value,null,{},0)}}class _M{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return it(this._values[s].value.value)}setValue(s,h){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Ib(this._values[s].property)),this._values[s].value=new Cm(this._values[s].property,h===null?void 0:it(h))}getTransition(s){return it(this._values[s].transition)}setTransition(s,h){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Ib(this._values[s].property)),this._values[s].transition=it(h)||void 0}serialize(){let s={};for(let h of Object.keys(this._values)){let d=this.getValue(h);d!==void 0&&(s[h]=d);let y=this.getTransition(h);y!==void 0&&(s[`${h}-transition`]=y)}return s}transitioned(s,h){let d=new bM(this._properties);for(let y of Object.keys(this._values))d._values[y]=this._values[y].transitioned(s,h._values[y]);return d}untransitioned(){let s=new bM(this._properties);for(let h of Object.keys(this._values))s._values[h]=this._values[h].untransitioned();return s}}class xM{constructor(s,h,d,y,E){this.property=s,this.value=h,this.begin=E+y.delay||0,this.end=this.begin+y.duration||0,s.specification.transition&&(y.delay||y.duration)&&(this.prior=d)}possiblyEvaluate(s,h,d){let y=s.now||0,E=this.value.possiblyEvaluate(s,h,d),S=this.prior;if(S){if(y>this.end)return this.prior=null,E;if(this.value.isDataDriven())return this.prior=null,E;if(y<this.begin)return S.possiblyEvaluate(s,h,d);{let M=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(S.possiblyEvaluate(s,h,d),E,ht(M))}}return E}}class bM{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,h,d){let y=new ey(this._properties);for(let E of Object.keys(this._values))y._values[E]=this._values[E].possiblyEvaluate(s,h,d);return y}hasTransition(){for(let s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class bq{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return this._values[s].value!==void 0}getValue(s){return it(this._values[s].value)}setValue(s,h){this._values[s]=new Cm(this._values[s].property,h===null?void 0:it(h))}serialize(){let s={};for(let h of Object.keys(this._values)){let d=this.getValue(h);d!==void 0&&(s[h]=d)}return s}possiblyEvaluate(s,h,d){let y=new ey(this._properties);for(let E of Object.keys(this._values))y._values[E]=this._values[E].possiblyEvaluate(s,h,d);return y}}class aa{constructor(s,h,d){this.property=s,this.value=h,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,h,d,y){return this.property.evaluate(this.value,this.parameters,s,h,d,y)}}class ey{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Zt{constructor(s){this.specification=s}possiblyEvaluate(s,h){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(h)}interpolate(s,h,d){let y=Cl[this.specification.type];return y?y(s,h,d):s}}class sr{constructor(s,h){this.specification=s,this.overrides=h}possiblyEvaluate(s,h,d,y){return new aa(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(h,null,{},d,y)}:s.expression,h)}interpolate(s,h,d){if(s.value.kind!=="constant"||h.value.kind!=="constant")return s;if(s.value.value===void 0||h.value.value===void 0)return new aa(this,{kind:"constant",value:void 0},s.parameters);let y=Cl[this.specification.type];if(y){let E=y(s.value.value,h.value.value,d);return new aa(this,{kind:"constant",value:E},s.parameters)}return s}evaluate(s,h,d,y,E,S){return s.kind==="constant"?s.value:s.evaluate(h,d,y,E,S)}}class Pm extends sr{possiblyEvaluate(s,h,d,y){if(s.value===void 0)return new aa(this,{kind:"constant",value:void 0},h);if(s.expression.kind==="constant"){let E=s.expression.evaluate(h,null,{},d,y),S=s.property.specification.type==="resolvedImage"&&typeof E!="string"?E.name:E,M=this._calculate(S,S,S,h);return new aa(this,{kind:"constant",value:M},h)}if(s.expression.kind==="camera"){let E=this._calculate(s.expression.evaluate({zoom:h.zoom-1}),s.expression.evaluate({zoom:h.zoom}),s.expression.evaluate({zoom:h.zoom+1}),h);return new aa(this,{kind:"constant",value:E},h)}return new aa(this,s.expression,h)}evaluate(s,h,d,y,E,S){if(s.kind==="source"){let M=s.evaluate(h,d,y,E,S);return this._calculate(M,M,M,h)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(h.zoom)-1},d,y),s.evaluate({zoom:Math.floor(h.zoom)},d,y),s.evaluate({zoom:Math.floor(h.zoom)+1},d,y),h):s.value}_calculate(s,h,d,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:s,to:h}:{from:d,to:h}}interpolate(s){return s}}class Mb{constructor(s){this.specification=s}possiblyEvaluate(s,h,d,y){if(s.value!==void 0){if(s.expression.kind==="constant"){let E=s.expression.evaluate(h,null,{},d,y);return this._calculate(E,E,E,h)}return this._calculate(s.expression.evaluate(new Gn(Math.floor(h.zoom-1),h)),s.expression.evaluate(new Gn(Math.floor(h.zoom),h)),s.expression.evaluate(new Gn(Math.floor(h.zoom+1),h)),h)}}_calculate(s,h,d,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:s,to:h}:{from:d,to:h}}interpolate(s){return s}}class Ab{constructor(s){this.specification=s}possiblyEvaluate(s,h,d,y){return!!s.expression.evaluate(h,null,{},d,y)}interpolate(){return!1}}class Bi{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let h in s){let d=s[h];d.specification.overridable&&this.overridableProperties.push(h);let y=this.defaultPropertyValues[h]=new Cm(d,void 0),E=this.defaultTransitionablePropertyValues[h]=new Ib(d);this.defaultTransitioningPropertyValues[h]=E.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=y.possiblyEvaluate({})}}}Ft("DataDrivenProperty",sr),Ft("DataConstantProperty",Zt),Ft("CrossFadedDataDrivenProperty",Pm),Ft("CrossFadedProperty",Mb),Ft("ColorRampProperty",Ab);let Cb="-transition";class Es extends he{constructor(s,h){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),h.layout&&(this._unevaluatedLayout=new bq(h.layout)),h.paint)){this._transitionablePaint=new _M(h.paint);for(let d in s.paint)this.setPaintProperty(d,s.paint[d],{validate:!1});for(let d in s.layout)this.setLayoutProperty(d,s.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ey(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,h,d={}){h!=null&&this._validate(Zv,`layers.${this.id}.layout.${s}`,s,h,d)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,h):this.visibility=h)}getPaintProperty(s){return s.endsWith(Cb)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,h,d={}){if(h!=null&&this._validate(bb,`layers.${this.id}.paint.${s}`,s,h,d))return!1;if(s.endsWith(Cb))return this._transitionablePaint.setTransition(s.slice(0,-11),h||void 0),!1;{let y=this._transitionablePaint._values[s],E=y.property.specification["property-type"]==="cross-faded-data-driven",S=y.value.isDataDriven(),M=y.value;this._transitionablePaint.setValue(s,h),this._handleSpecialPaintPropertyUpdate(s);let R=this._transitionablePaint._values[s].value;return R.isDataDriven()||S||E||this._handleOverridablePaintPropertyUpdate(s,M,R)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,h,d){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,h){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,h)}serialize(){let s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),et(s,(h,d)=>!(h===void 0||d==="layout"&&!Object.keys(h).length||d==="paint"&&!Object.keys(h).length))}_validate(s,h,d,y,E={}){return(!E||E.validate!==!1)&&wb(this,s.call(sp,{key:h,layerType:this.type,objectKey:d,value:y,styleSpec:ee,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let s in this.paint._values){let h=this.paint.get(s);if(h instanceof aa&&ep(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}let wM={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class kh{constructor(s,h){this._structArray=s,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class gi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,h){return s._trim(),h&&(s.isTransferred=!0,h.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){let h=Object.create(this.prototype);return h.arrayBuffer=s.arrayBuffer,h.length=s.length,h.capacity=s.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ni(f,s=1){let h=0,d=0;return{members:f.map(y=>{let E=wM[y.type].BYTES_PER_ELEMENT,S=h=cp(h,Math.max(s,E)),M=y.components||1;return d=Math.max(d,E),h+=E*M,{name:y.name,type:y.type,components:M,offset:S}}),size:cp(h,Math.max(d,s)),alignment:s}}function cp(f,s){return Math.ceil(f/s)*s}class Rm extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h){let d=this.length;return this.resize(d+1),this.emplace(d,s,h)}emplace(s,h,d){let y=2*s;return this.int16[y+0]=h,this.int16[y+1]=d,s}}Rm.prototype.bytesPerElement=4,Ft("StructArrayLayout2i4",Rm);class Om extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,d){let y=this.length;return this.resize(y+1),this.emplace(y,s,h,d)}emplace(s,h,d,y){let E=3*s;return this.int16[E+0]=h,this.int16[E+1]=d,this.int16[E+2]=y,s}}Om.prototype.bytesPerElement=6,Ft("StructArrayLayout3i6",Om);class qh extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,d,y){let E=this.length;return this.resize(E+1),this.emplace(E,s,h,d,y)}emplace(s,h,d,y,E){let S=4*s;return this.int16[S+0]=h,this.int16[S+1]=d,this.int16[S+2]=y,this.int16[S+3]=E,s}}qh.prototype.bytesPerElement=8,Ft("StructArrayLayout4i8",qh);class Pb extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,d,y,E,S){let M=this.length;return this.resize(M+1),this.emplace(M,s,h,d,y,E,S)}emplace(s,h,d,y,E,S,M){let R=6*s;return this.int16[R+0]=h,this.int16[R+1]=d,this.int16[R+2]=y,this.int16[R+3]=E,this.int16[R+4]=S,this.int16[R+5]=M,s}}Pb.prototype.bytesPerElement=12,Ft("StructArrayLayout2i4i12",Pb);class Rb extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,d,y,E,S){let M=this.length;return this.resize(M+1),this.emplace(M,s,h,d,y,E,S)}emplace(s,h,d,y,E,S,M){let R=4*s,N=8*s;return this.int16[R+0]=h,this.int16[R+1]=d,this.uint8[N+4]=y,this.uint8[N+5]=E,this.uint8[N+6]=S,this.uint8[N+7]=M,s}}Rb.prototype.bytesPerElement=8,Ft("StructArrayLayout2i4ub8",Rb);class hp extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h){let d=this.length;return this.resize(d+1),this.emplace(d,s,h)}emplace(s,h,d){let y=2*s;return this.float32[y+0]=h,this.float32[y+1]=d,s}}hp.prototype.bytesPerElement=8,Ft("StructArrayLayout2f8",hp);class Ob extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,d,y,E,S,M,R,N,z){let V=this.length;return this.resize(V+1),this.emplace(V,s,h,d,y,E,S,M,R,N,z)}emplace(s,h,d,y,E,S,M,R,N,z,V){let W=10*s;return this.uint16[W+0]=h,this.uint16[W+1]=d,this.uint16[W+2]=y,this.uint16[W+3]=E,this.uint16[W+4]=S,this.uint16[W+5]=M,this.uint16[W+6]=R,this.uint16[W+7]=N,this.uint16[W+8]=z,this.uint16[W+9]=V,s}}Ob.prototype.bytesPerElement=20,Ft("StructArrayLayout10ui20",Ob);class b extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,d,y,E,S,M,R,N,z,V,W){let K=this.length;return this.resize(K+1),this.emplace(K,s,h,d,y,E,S,M,R,N,z,V,W)}emplace(s,h,d,y,E,S,M,R,N,z,V,W,K){let Q=12*s;return this.int16[Q+0]=h,this.int16[Q+1]=d,this.int16[Q+2]=y,this.int16[Q+3]=E,this.uint16[Q+4]=S,this.uint16[Q+5]=M,this.uint16[Q+6]=R,this.uint16[Q+7]=N,this.int16[Q+8]=z,this.int16[Q+9]=V,this.int16[Q+10]=W,this.int16[Q+11]=K,s}}b.prototype.bytesPerElement=24,Ft("StructArrayLayout4i4ui4i24",b);class a extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,d){let y=this.length;return this.resize(y+1),this.emplace(y,s,h,d)}emplace(s,h,d,y){let E=3*s;return this.float32[E+0]=h,this.float32[E+1]=d,this.float32[E+2]=y,s}}a.prototype.bytesPerElement=12,Ft("StructArrayLayout3f12",a);class u extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){let h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.uint32[1*s+0]=h,s}}u.prototype.bytesPerElement=4,Ft("StructArrayLayout1ul4",u);class m extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,d,y,E,S,M,R,N){let z=this.length;return this.resize(z+1),this.emplace(z,s,h,d,y,E,S,M,R,N)}emplace(s,h,d,y,E,S,M,R,N,z){let V=10*s,W=5*s;return this.int16[V+0]=h,this.int16[V+1]=d,this.int16[V+2]=y,this.int16[V+3]=E,this.int16[V+4]=S,this.int16[V+5]=M,this.uint32[W+3]=R,this.uint16[V+8]=N,this.uint16[V+9]=z,s}}m.prototype.bytesPerElement=20,Ft("StructArrayLayout6i1ul2ui20",m);class v extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,d,y,E,S){let M=this.length;return this.resize(M+1),this.emplace(M,s,h,d,y,E,S)}emplace(s,h,d,y,E,S,M){let R=6*s;return this.int16[R+0]=h,this.int16[R+1]=d,this.int16[R+2]=y,this.int16[R+3]=E,this.int16[R+4]=S,this.int16[R+5]=M,s}}v.prototype.bytesPerElement=12,Ft("StructArrayLayout2i2i2i12",v);class w extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,d,y,E){let S=this.length;return this.resize(S+1),this.emplace(S,s,h,d,y,E)}emplace(s,h,d,y,E,S){let M=4*s,R=8*s;return this.float32[M+0]=h,this.float32[M+1]=d,this.float32[M+2]=y,this.int16[R+6]=E,this.int16[R+7]=S,s}}w.prototype.bytesPerElement=16,Ft("StructArrayLayout2f1f2i16",w);class I extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,d,y,E,S){let M=this.length;return this.resize(M+1),this.emplace(M,s,h,d,y,E,S)}emplace(s,h,d,y,E,S,M){let R=16*s,N=4*s,z=8*s;return this.uint8[R+0]=h,this.uint8[R+1]=d,this.float32[N+1]=y,this.float32[N+2]=E,this.int16[z+6]=S,this.int16[z+7]=M,s}}I.prototype.bytesPerElement=16,Ft("StructArrayLayout2ub2f2i16",I);class P extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,d){let y=this.length;return this.resize(y+1),this.emplace(y,s,h,d)}emplace(s,h,d,y){let E=3*s;return this.uint16[E+0]=h,this.uint16[E+1]=d,this.uint16[E+2]=y,s}}P.prototype.bytesPerElement=6,Ft("StructArrayLayout3ui6",P);class L extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,d,y,E,S,M,R,N,z,V,W,K,Q,re,ce,me){let Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,s,h,d,y,E,S,M,R,N,z,V,W,K,Q,re,ce,me)}emplace(s,h,d,y,E,S,M,R,N,z,V,W,K,Q,re,ce,me,Oe){let we=24*s,Y=12*s,le=48*s;return this.int16[we+0]=h,this.int16[we+1]=d,this.uint16[we+2]=y,this.uint16[we+3]=E,this.uint32[Y+2]=S,this.uint32[Y+3]=M,this.uint32[Y+4]=R,this.uint16[we+10]=N,this.uint16[we+11]=z,this.uint16[we+12]=V,this.float32[Y+7]=W,this.float32[Y+8]=K,this.uint8[le+36]=Q,this.uint8[le+37]=re,this.uint8[le+38]=ce,this.uint32[Y+10]=me,this.int16[we+22]=Oe,s}}L.prototype.bytesPerElement=48,Ft("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",L);class j extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,d,y,E,S,M,R,N,z,V,W,K,Q,re,ce,me,Oe,we,Y,le,Ee,Ve,ut,Ze,Je,dt,ct){let vt=this.length;return this.resize(vt+1),this.emplace(vt,s,h,d,y,E,S,M,R,N,z,V,W,K,Q,re,ce,me,Oe,we,Y,le,Ee,Ve,ut,Ze,Je,dt,ct)}emplace(s,h,d,y,E,S,M,R,N,z,V,W,K,Q,re,ce,me,Oe,we,Y,le,Ee,Ve,ut,Ze,Je,dt,ct,vt){let rt=32*s,zt=16*s;return this.int16[rt+0]=h,this.int16[rt+1]=d,this.int16[rt+2]=y,this.int16[rt+3]=E,this.int16[rt+4]=S,this.int16[rt+5]=M,this.int16[rt+6]=R,this.int16[rt+7]=N,this.uint16[rt+8]=z,this.uint16[rt+9]=V,this.uint16[rt+10]=W,this.uint16[rt+11]=K,this.uint16[rt+12]=Q,this.uint16[rt+13]=re,this.uint16[rt+14]=ce,this.uint16[rt+15]=me,this.uint16[rt+16]=Oe,this.uint16[rt+17]=we,this.uint16[rt+18]=Y,this.uint16[rt+19]=le,this.uint16[rt+20]=Ee,this.uint16[rt+21]=Ve,this.uint16[rt+22]=ut,this.uint32[zt+12]=Ze,this.float32[zt+13]=Je,this.float32[zt+14]=dt,this.uint16[rt+30]=ct,this.uint16[rt+31]=vt,s}}j.prototype.bytesPerElement=64,Ft("StructArrayLayout8i15ui1ul2f2ui64",j);class B extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){let h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.float32[1*s+0]=h,s}}B.prototype.bytesPerElement=4,Ft("StructArrayLayout1f4",B);class $ extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,d){let y=this.length;return this.resize(y+1),this.emplace(y,s,h,d)}emplace(s,h,d,y){let E=3*s;return this.uint16[6*s+0]=h,this.float32[E+1]=d,this.float32[E+2]=y,s}}$.prototype.bytesPerElement=12,Ft("StructArrayLayout1ui2f12",$);class G extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,d){let y=this.length;return this.resize(y+1),this.emplace(y,s,h,d)}emplace(s,h,d,y){let E=4*s;return this.uint32[2*s+0]=h,this.uint16[E+2]=d,this.uint16[E+3]=y,s}}G.prototype.bytesPerElement=8,Ft("StructArrayLayout1ul2ui8",G);class J extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h){let d=this.length;return this.resize(d+1),this.emplace(d,s,h)}emplace(s,h,d){let y=2*s;return this.uint16[y+0]=h,this.uint16[y+1]=d,s}}J.prototype.bytesPerElement=4,Ft("StructArrayLayout2ui4",J);class te extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){let h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.uint16[1*s+0]=h,s}}te.prototype.bytesPerElement=2,Ft("StructArrayLayout1ui2",te);class pe extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,d,y){let E=this.length;return this.resize(E+1),this.emplace(E,s,h,d,y)}emplace(s,h,d,y,E){let S=4*s;return this.float32[S+0]=h,this.float32[S+1]=d,this.float32[S+2]=y,this.float32[S+3]=E,s}}pe.prototype.bytesPerElement=16,Ft("StructArrayLayout4f16",pe);class fe extends kh{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new T(this.anchorPointX,this.anchorPointY)}}fe.prototype.size=20;class de extends m{get(s){return new fe(this,s)}}Ft("CollisionBoxArray",de);class be extends kh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}be.prototype.size=48;class Te extends L{get(s){return new be(this,s)}}Ft("PlacedSymbolArray",Te);class Se extends kh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Se.prototype.size=64;class Ae extends j{get(s){return new Se(this,s)}}Ft("SymbolInstanceArray",Ae);class De extends B{getoffsetX(s){return this.float32[1*s+0]}}Ft("GlyphOffsetArray",De);class Pe extends Om{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Ft("SymbolLineVertexArray",Pe);class Ue extends kh{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ue.prototype.size=12;class tt extends ${get(s){return new Ue(this,s)}}Ft("TextAnchorOffsetArray",tt);class Ke extends kh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ke.prototype.size=8;class Xe extends G{get(s){return new Ke(this,s)}}Ft("FeatureIndexArray",Xe);class Qe extends Rm{}class Tt extends Rm{}class bt extends Rm{}class ft extends Pb{}class Ht extends Rb{}class Cr extends hp{}class Xr extends Ob{}class ii extends b{}class Mn extends a{}class oi extends u{}class ai extends v{}class Nn extends I{}class sn extends P{}class Xi extends J{}let co=ni([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ao}=co;class ln{constructor(s=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=s}prepareSegment(s,h,d,y){let E=this.segments[this.segments.length-1];return s>ln.MAX_VERTEX_ARRAY_LENGTH&&Nt(`Max vertices per segment is ${ln.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${ln.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!E||E.vertexLength+s>ln.MAX_VERTEX_ARRAY_LENGTH||E.sortKey!==y?this.createNewSegment(h,d,y):E}createNewSegment(s,h,d){let y={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(y.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(y),y}getOrCreateLatestSegment(s,h,d){return this.prepareSegment(0,s,h,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let s of this.segments)for(let h in s.vaos)s.vaos[h].destroy()}static simpleSegment(s,h,d,y){return new ln([{vertexOffset:s,primitiveOffset:h,vertexLength:d,primitiveLength:y,vaos:{},sortKey:0}])}}function wc(f,s){return 256*(f=St(Math.floor(f),0,255))+St(Math.floor(s),0,255)}ln.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ft("SegmentVector",ln);let Ll=ni([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ec,jh,Lm,Sc={exports:{}},Fh={exports:{}},Ja={exports:{}},Tc=function(){if(Lm)return Sc.exports;Lm=1;var f=(Ec||(Ec=1,Fh.exports=function(h,d){var y,E,S,M,R,N,z,V;for(E=h.length-(y=3&h.length),S=d,R=3432918353,N=461845907,V=0;V<E;)z=255&h.charCodeAt(V)|(255&h.charCodeAt(++V))<<8|(255&h.charCodeAt(++V))<<16|(255&h.charCodeAt(++V))<<24,++V,S=27492+(65535&(M=5*(65535&(S=(S^=z=(65535&(z=(z=(65535&z)*R+(((z>>>16)*R&65535)<<16)&4294967295)<<15|z>>>17))*N+(((z>>>16)*N&65535)<<16)&4294967295)<<13|S>>>19))+((5*(S>>>16)&65535)<<16)&4294967295))+((58964+(M>>>16)&65535)<<16);switch(z=0,y){case 3:z^=(255&h.charCodeAt(V+2))<<16;case 2:z^=(255&h.charCodeAt(V+1))<<8;case 1:S^=z=(65535&(z=(z=(65535&(z^=255&h.charCodeAt(V)))*R+(((z>>>16)*R&65535)<<16)&4294967295)<<15|z>>>17))*N+(((z>>>16)*N&65535)<<16)&4294967295}return S^=h.length,S=2246822507*(65535&(S^=S>>>16))+((2246822507*(S>>>16)&65535)<<16)&4294967295,S=3266489909*(65535&(S^=S>>>13))+((3266489909*(S>>>16)&65535)<<16)&4294967295,(S^=S>>>16)>>>0}),Fh.exports),s=(jh||(jh=1,Ja.exports=function(h,d){for(var y,E=h.length,S=d^E,M=0;E>=4;)y=1540483477*(65535&(y=255&h.charCodeAt(M)|(255&h.charCodeAt(++M))<<8|(255&h.charCodeAt(++M))<<16|(255&h.charCodeAt(++M))<<24))+((1540483477*(y>>>16)&65535)<<16),S=1540483477*(65535&S)+((1540483477*(S>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),E-=4,++M;switch(E){case 3:S^=(255&h.charCodeAt(M+2))<<16;case 2:S^=(255&h.charCodeAt(M+1))<<8;case 1:S=1540483477*(65535&(S^=255&h.charCodeAt(M)))+((1540483477*(S>>>16)&65535)<<16)}return S=1540483477*(65535&(S^=S>>>13))+((1540483477*(S>>>16)&65535)<<16),(S^=S>>>15)>>>0}),Ja.exports);return Sc.exports=f,Sc.exports.murmur3=f,Sc.exports.murmur2=s,Sc.exports}(),Ru=l(Tc);class Ic{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,h,d,y){this.ids.push(Ui(s)),this.positions.push(h,d,y)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let h=Ui(s),d=0,y=this.ids.length-1;for(;d<y;){let S=d+y>>1;this.ids[S]>=h?y=S:d=S+1}let E=[];for(;this.ids[d]===h;)E.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return E}static serialize(s,h){let d=new Float64Array(s.ids),y=new Uint32Array(s.positions);return Vi(d,y,0,d.length-1),h&&h.push(d.buffer,y.buffer),{ids:d,positions:y}}static deserialize(s){let h=new Ic;return h.ids=s.ids,h.positions=s.positions,h.indexed=!0,h}}function Ui(f){let s=+f;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:Ru(String(f))}function Vi(f,s,h,d){for(;h<d;){let y=f[h+d>>1],E=h-1,S=d+1;for(;;){do E++;while(f[E]<y);do S--;while(f[S]>y);if(E>=S)break;sa(f,E,S),sa(s,3*E,3*S),sa(s,3*E+1,3*S+1),sa(s,3*E+2,3*S+2)}S-h<d-S?(Vi(f,s,h,S),h=S+1):(Vi(f,s,S+1,d),d=S)}}function sa(f,s,h){let d=f[s];f[s]=f[h],f[h]=d}Ft("FeaturePositionMap",Ic);class $n{constructor(s,h){this.gl=s.gl,this.location=h}}class ty extends $n{constructor(s,h){super(s,h),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class EM extends $n{constructor(s,h){super(s,h),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class SM extends $n{constructor(s,h){super(s,h),this.current=Yr.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}let wq=new Float32Array(16);function Lb(f){return[wc(255*f.r,255*f.g),wc(255*f.b,255*f.a)]}class Dm{constructor(s,h,d){this.value=s,this.uniformNames=h.map(y=>`u_${y}`),this.type=d}setUniform(s,h,d){s.set(d.constantOr(this.value))}getBinding(s,h,d){return this.type==="color"?new SM(s,h):new ty(s,h)}}class Ss{constructor(s,h){this.uniformNames=h.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=s.tlbr}setUniform(s,h,d,y){let E=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;E&&s.set(E)}getBinding(s,h,d){return d.substr(0,9)==="u_pattern"?new EM(s,h):new ty(s,h)}}class Dl{constructor(s,h,d,y){this.expression=s,this.type=d,this.maxValue=0,this.paintVertexAttributes=h.map(E=>({name:`a_${E}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(s,h,d,y,E){let S=this.paintVertexArray.length,M=this.expression.evaluate(new Gn(0),h,{},y,[],E);this.paintVertexArray.resize(s),this._setPaintValue(S,s,M)}updatePaintArray(s,h,d,y){let E=this.expression.evaluate({zoom:0},d,y);this._setPaintValue(s,h,E)}_setPaintValue(s,h,d){if(this.type==="color"){let y=Lb(d);for(let E=s;E<h;E++)this.paintVertexArray.emplace(E,y[0],y[1])}else{for(let y=s;y<h;y++)this.paintVertexArray.emplace(y,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ts{constructor(s,h,d,y,E,S){this.expression=s,this.uniformNames=h.map(M=>`u_${M}_t`),this.type=d,this.useIntegerZoom=y,this.zoom=E,this.maxValue=0,this.paintVertexAttributes=h.map(M=>({name:`a_${M}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new S}populatePaintArray(s,h,d,y,E){let S=this.expression.evaluate(new Gn(this.zoom),h,{},y,[],E),M=this.expression.evaluate(new Gn(this.zoom+1),h,{},y,[],E),R=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(R,s,S,M)}updatePaintArray(s,h,d,y){let E=this.expression.evaluate({zoom:this.zoom},d,y),S=this.expression.evaluate({zoom:this.zoom+1},d,y);this._setPaintValue(s,h,E,S)}_setPaintValue(s,h,d,y){if(this.type==="color"){let E=Lb(d),S=Lb(y);for(let M=s;M<h;M++)this.paintVertexArray.emplace(M,E[0],E[1],S[0],S[1])}else{for(let E=s;E<h;E++)this.paintVertexArray.emplace(E,d,y);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(y))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,h){let d=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,y=St(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);s.set(y)}getBinding(s,h,d){return new ty(s,h)}}class Ou{constructor(s,h,d,y,E,S){this.expression=s,this.type=h,this.useIntegerZoom=d,this.zoom=y,this.layerId=S,this.zoomInPaintVertexArray=new E,this.zoomOutPaintVertexArray=new E}populatePaintArray(s,h,d){let y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(y,s,h.patterns&&h.patterns[this.layerId],d)}updatePaintArray(s,h,d,y,E){this._setPaintValues(s,h,d.patterns&&d.patterns[this.layerId],E)}_setPaintValues(s,h,d,y){if(!y||!d)return;let{min:E,mid:S,max:M}=d,R=y[E],N=y[S],z=y[M];if(R&&N&&z)for(let V=s;V<h;V++)this.zoomInPaintVertexArray.emplace(V,N.tl[0],N.tl[1],N.br[0],N.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],N.pixelRatio,R.pixelRatio),this.zoomOutPaintVertexArray.emplace(V,N.tl[0],N.tl[1],N.br[0],N.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],N.pixelRatio,z.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,Ll.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,Ll.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ry{constructor(s,h,d){this.binders={},this._buffers=[];let y=[];for(let E in s.paint._values){if(!d(E))continue;let S=s.paint.get(E);if(!(S instanceof aa&&ep(S.property.specification)))continue;let M=Db(E,s.type),R=S.value,N=S.property.specification.type,z=S.property.useIntegerZoom,V=S.property.specification["property-type"],W=V==="cross-faded"||V==="cross-faded-data-driven";if(R.kind==="constant")this.binders[E]=W?new Ss(R.value,M):new Dm(R.value,M,N),y.push(`/u_${E}`);else if(R.kind==="source"||W){let K=k7(E,N,"source");this.binders[E]=W?new Ou(R,N,z,h,K,s.id):new Dl(R,M,N,K),y.push(`/a_${E}`)}else{let K=k7(E,N,"composite");this.binders[E]=new Ts(R,M,N,z,h,K),y.push(`/z_${E}`)}}this.cacheKey=y.sort().join("")}getMaxValue(s){let h=this.binders[s];return h instanceof Dl||h instanceof Ts?h.maxValue:0}populatePaintArrays(s,h,d,y,E){for(let S in this.binders){let M=this.binders[S];(M instanceof Dl||M instanceof Ts||M instanceof Ou)&&M.populatePaintArray(s,h,d,y,E)}}setConstantPatternPositions(s,h){for(let d in this.binders){let y=this.binders[d];y instanceof Ss&&y.setConstantPatternPositions(s,h)}}updatePaintArrays(s,h,d,y,E){let S=!1;for(let M in s){let R=h.getPositions(M);for(let N of R){let z=d.feature(N.index);for(let V in this.binders){let W=this.binders[V];if((W instanceof Dl||W instanceof Ts||W instanceof Ou)&&W.expression.isStateDependent===!0){let K=y.paint.get(V);W.expression=K.value,W.updatePaintArray(N.start,N.end,z,s[M],E),S=!0}}}}return S}defines(){let s=[];for(let h in this.binders){let d=this.binders[h];(d instanceof Dm||d instanceof Ss)&&s.push(...d.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return s}getBinderAttributes(){let s=[];for(let h in this.binders){let d=this.binders[h];if(d instanceof Dl||d instanceof Ts)for(let y=0;y<d.paintVertexAttributes.length;y++)s.push(d.paintVertexAttributes[y].name);else if(d instanceof Ou)for(let y=0;y<Ll.members.length;y++)s.push(Ll.members[y].name)}return s}getBinderUniforms(){let s=[];for(let h in this.binders){let d=this.binders[h];if(d instanceof Dm||d instanceof Ss||d instanceof Ts)for(let y of d.uniformNames)s.push(y)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,h){let d=[];for(let y in this.binders){let E=this.binders[y];if(E instanceof Dm||E instanceof Ss||E instanceof Ts){for(let S of E.uniformNames)if(h[S]){let M=E.getBinding(s,h[S],S);d.push({name:S,property:y,binding:M})}}}return d}setUniforms(s,h,d,y){for(let{name:E,property:S,binding:M}of h)this.binders[S].setUniform(M,y,d.get(S),E)}updatePaintBuffers(s){this._buffers=[];for(let h in this.binders){let d=this.binders[h];if(s&&d instanceof Ou){let y=s.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(d instanceof Dl||d instanceof Ts)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(s){for(let h in this.binders){let d=this.binders[h];(d instanceof Dl||d instanceof Ts||d instanceof Ou)&&d.upload(s)}this.updatePaintBuffers()}destroy(){for(let s in this.binders){let h=this.binders[s];(h instanceof Dl||h instanceof Ts||h instanceof Ou)&&h.destroy()}}}class Mc{constructor(s,h,d=()=>!0){this.programConfigurations={};for(let y of s)this.programConfigurations[y.id]=new ry(y,h,d);this.needsUpload=!1,this._featureMap=new Ic,this._bufferOffset=0}populatePaintArrays(s,h,d,y,E,S){for(let M in this.programConfigurations)this.programConfigurations[M].populatePaintArrays(s,h,y,E,S);h.id!==void 0&&this._featureMap.add(h.id,d,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,h,d,y){for(let E of d)this.needsUpload=this.programConfigurations[E.id].updatePaintArrays(s,this._featureMap,h,E,y)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(let h in this.programConfigurations)this.programConfigurations[h].upload(s);this.needsUpload=!1}}destroy(){for(let s in this.programConfigurations)this.programConfigurations[s].destroy()}}function Db(f,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${s}-`,"").replace(/-/g,"_")]}function k7(f,s,h){let d={color:{source:hp,composite:pe},number:{source:B,composite:hp}},y=function(E){return{"line-pattern":{source:Xr,composite:Xr},"fill-pattern":{source:Xr,composite:Xr},"fill-extrusion-pattern":{source:Xr,composite:Xr}}[E]}(f);return y&&y[h]||d[s][h]}Ft("ConstantBinder",Dm),Ft("CrossFadedConstantBinder",Ss),Ft("SourceExpressionBinder",Dl),Ft("CrossFadedCompositeBinder",Ou),Ft("CompositeExpressionBinder",Ts),Ft("ProgramConfiguration",ry,{omit:["_buffers"]}),Ft("ProgramConfigurationSet",Mc);let Eq=Math.pow(2,14)-1,q7=-Eq-1;function Nm(f){let s=Be/f.extent,h=f.loadGeometry();for(let d=0;d<h.length;d++){let y=h[d];for(let E=0;E<y.length;E++){let S=y[E],M=Math.round(S.x*s),R=Math.round(S.y*s);S.x=St(M,q7,Eq),S.y=St(R,q7,Eq),(M<S.x||M>S.x+1||R<S.y||R>S.y+1)&&Nt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function km(f,s){return{type:f.type,id:f.id,properties:f.properties,geometry:s?Nm(f):[]}}let j7=-32768;function CGe(f,s,h,d,y){f.emplaceBack(j7+8*s+d,j7+8*h+y)}class Sq{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Tt,this.indexArray=new sn,this.segments=new ln,this.programConfigurations=new Mc(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,d){let y=this.layers[0],E=[],S=null,M=!1,R=y.type==="heatmap";if(y.type==="circle"){let z=y;S=z.layout.get("circle-sort-key"),M=!S.isConstant(),R=R||z.paint.get("circle-pitch-alignment")==="map"}let N=R?h.subdivisionGranularity.circle:1;for(let{feature:z,id:V,index:W,sourceLayerIndex:K}of s){let Q=this.layers[0]._featureFilter.needGeometry,re=km(z,Q);if(!this.layers[0]._featureFilter.filter(new Gn(this.zoom),re,d))continue;let ce=M?S.evaluate(re,{},d):void 0,me={id:V,properties:z.properties,type:z.type,sourceLayerIndex:K,index:W,geometry:Q?re.geometry:Nm(z),patterns:{},sortKey:ce};E.push(me)}M&&E.sort((z,V)=>z.sortKey-V.sortKey);for(let z of E){let{geometry:V,index:W,sourceLayerIndex:K}=z,Q=s[W].feature;this.addFeature(z,V,W,d,N),h.featureIndex.insert(Q,V,W,K,this.index)}}update(s,h,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Ao),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,h,d,y,E=1){let S;switch(E){case 1:S=[0,7];break;case 3:S=[0,2,5,7];break;case 5:S=[0,1,3,4,6,7];break;case 7:S=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${E}; valid values are 1, 3, 5, 7.`)}let M=S.length;for(let R of h)for(let N of R){let z=N.x,V=N.y;if(z<0||z>=Be||V<0||V>=Be)continue;let W=this.segments.prepareSegment(M*M,this.layoutVertexArray,this.indexArray,s.sortKey),K=W.vertexLength;for(let Q=0;Q<M;Q++)for(let re=0;re<M;re++)CGe(this.layoutVertexArray,z,V,S[re],S[Q]);for(let Q=0;Q<M-1;Q++)for(let re=0;re<M-1;re++){let ce=K+Q*M+re,me=K+(Q+1)*M+re;this.indexArray.emplaceBack(ce,me+1,ce+1),this.indexArray.emplaceBack(ce,me,me+1)}W.vertexLength+=M*M,W.primitiveLength+=(M-1)*(M-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,{},y)}}function F7(f,s){for(let h=0;h<f.length;h++)if(qm(s,f[h]))return!0;for(let h=0;h<s.length;h++)if(qm(f,s[h]))return!0;return!!Tq(f,s)}function PGe(f,s,h){return!!qm(f,s)||!!Iq(s,f,h)}function z7(f,s){if(f.length===1)return U7(s,f[0]);for(let h=0;h<s.length;h++){let d=s[h];for(let y=0;y<d.length;y++)if(qm(f,d[y]))return!0}for(let h=0;h<f.length;h++)if(U7(s,f[h]))return!0;for(let h=0;h<s.length;h++)if(Tq(f,s[h]))return!0;return!1}function RGe(f,s,h){if(f.length>1){if(Tq(f,s))return!0;for(let d=0;d<s.length;d++)if(Iq(s[d],f,h))return!0}for(let d=0;d<f.length;d++)if(Iq(f[d],s,h))return!0;return!1}function Tq(f,s){if(f.length===0||s.length===0)return!1;for(let h=0;h<f.length-1;h++){let d=f[h],y=f[h+1];for(let E=0;E<s.length-1;E++)if(OGe(d,y,s[E],s[E+1]))return!0}return!1}function OGe(f,s,h,d){return At(f,h,d)!==At(s,h,d)&&At(f,s,h)!==At(f,s,d)}function Iq(f,s,h){let d=h*h;if(s.length===1)return f.distSqr(s[0])<d;for(let y=1;y<s.length;y++)if(B7(f,s[y-1],s[y])<d)return!0;return!1}function B7(f,s,h){let d=s.distSqr(h);if(d===0)return f.distSqr(s);let y=((f.x-s.x)*(h.x-s.x)+(f.y-s.y)*(h.y-s.y))/d;return f.distSqr(y<0?s:y>1?h:h.sub(s)._mult(y)._add(s))}function U7(f,s){for(let h=0;h<f.length;h++)if(qm(f[h],s))return!0;return!1}function qm(f,s){let h=!1;for(let d=0,y=f.length-1;d<f.length;y=d++){let E=f[d],S=f[y];E.y>s.y!=S.y>s.y&&s.x<(S.x-E.x)*(s.y-E.y)/(S.y-E.y)+E.x&&(h=!h)}return h}function LGe(f,s,h){let d=h[0],y=h[2];if(f.x<d.x&&s.x<d.x||f.x>y.x&&s.x>y.x||f.y<d.y&&s.y<d.y||f.y>y.y&&s.y>y.y)return!1;let E=At(f,s,h[0]);return E!==At(f,s,h[1])||E!==At(f,s,h[2])||E!==At(f,s,h[3])}function Nb(f,s,h){let d=s.paint.get(f).value;return d.kind==="constant"?d.value:h.programConfigurations.get(s.id).getMaxValue(f)}function TM(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function IM(f,s,h,d,y){if(!s[0]&&!s[1])return f;let E=T.convert(s)._mult(y);h==="viewport"&&E._rotate(-d);let S=[];for(let M=0;M<f.length;M++)S.push(f[M].sub(E));return S}let V7,G7;Ft("CircleBucket",Sq,{omit:["layers"]});var DGe={get paint(){return G7=G7||new Bi({"circle-radius":new sr(ee.paint_circle["circle-radius"]),"circle-color":new sr(ee.paint_circle["circle-color"]),"circle-blur":new sr(ee.paint_circle["circle-blur"]),"circle-opacity":new sr(ee.paint_circle["circle-opacity"]),"circle-translate":new Zt(ee.paint_circle["circle-translate"]),"circle-translate-anchor":new Zt(ee.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Zt(ee.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Zt(ee.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new sr(ee.paint_circle["circle-stroke-width"]),"circle-stroke-color":new sr(ee.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new sr(ee.paint_circle["circle-stroke-opacity"])})},get layout(){return V7=V7||new Bi({"circle-sort-key":new sr(ee.layout_circle["circle-sort-key"])})}};class NGe extends Es{constructor(s){super(s,DGe)}createBucket(s){return new Sq(s)}queryRadius(s){let h=s;return Nb("circle-radius",this,h)+Nb("circle-stroke-width",this,h)+TM(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:s,feature:h,featureState:d,geometry:y,transform:E,pixelsToTileUnits:S,unwrappedTileID:M,getElevation:R}){let N=IM(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-E.bearingInRadians,S),z=this.paint.get("circle-radius").evaluate(h,d)+this.paint.get("circle-stroke-width").evaluate(h,d),V=this.paint.get("circle-pitch-alignment")==="map",W=V?N:function(Q,re,ce,me){return Q.map(Oe=>$7(Oe,re,ce,me))}(N,E,M,R),K=V?z*S:z;for(let Q of y)for(let re of Q){let ce=V?re:$7(re,E,M,R),me=K,Oe=E.projectTileCoordinates(re.x,re.y,M,R).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?me*=Oe/E.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(me*=E.cameraToCenterDistance/Oe),PGe(W,ce,me))return!0}return!1}}function $7(f,s,h,d){let y=s.projectTileCoordinates(f.x,f.y,h,d).point;return new T((.5*y.x+.5)*s.width,(.5*-y.y+.5)*s.height)}class H7 extends Sq{}let W7;Ft("HeatmapBucket",H7,{omit:["layers"]});var kGe={get paint(){return W7=W7||new Bi({"heatmap-radius":new sr(ee.paint_heatmap["heatmap-radius"]),"heatmap-weight":new sr(ee.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Zt(ee.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ab(ee.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Zt(ee.paint_heatmap["heatmap-opacity"])})}};function Mq(f,{width:s,height:h},d,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==s*h*d)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${s*h*d}`)}else y=new Uint8Array(s*h*d);return f.width=s,f.height=h,f.data=y,f}function Z7(f,{width:s,height:h},d){if(s===f.width&&h===f.height)return;let y=Mq({},{width:s,height:h},d);Aq(f,y,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,s),height:Math.min(f.height,h)},d),f.width=s,f.height=h,f.data=y.data}function Aq(f,s,h,d,y,E){if(y.width===0||y.height===0)return s;if(y.width>f.width||y.height>f.height||h.x>f.width-y.width||h.y>f.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>s.width||y.height>s.height||d.x>s.width-y.width||d.y>s.height-y.height)throw new RangeError("out of range destination coordinates for image copy");let S=f.data,M=s.data;if(S===M)throw new Error("srcData equals dstData, so image is already copied");for(let R=0;R<y.height;R++){let N=((h.y+R)*f.width+h.x)*E,z=((d.y+R)*s.width+d.x)*E;for(let V=0;V<y.width*E;V++)M[z+V]=S[N+V]}return s}class kb{constructor(s,h){Mq(this,s,1,h)}resize(s){Z7(this,s,1)}clone(){return new kb({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,h,d,y,E){Aq(s,h,d,y,E,1)}}class al{constructor(s,h){Mq(this,s,4,h)}resize(s){Z7(this,s,4)}replace(s,h){h?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new al({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,h,d,y,E){Aq(s,h,d,y,E,4)}}function Y7(f){let s={},h=f.resolution||256,d=f.clips?f.clips.length:1,y=f.image||new al({width:h,height:d});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);let E=(S,M,R)=>{s[f.evaluationKey]=R;let N=f.expression.evaluate(s);y.data[S+M+0]=Math.floor(255*N.r/N.a),y.data[S+M+1]=Math.floor(255*N.g/N.a),y.data[S+M+2]=Math.floor(255*N.b/N.a),y.data[S+M+3]=Math.floor(255*N.a)};if(f.clips)for(let S=0,M=0;S<d;++S,M+=4*h)for(let R=0,N=0;R<h;R++,N+=4){let z=R/(h-1),{start:V,end:W}=f.clips[S];E(M,N,V*(1-z)+W*z)}else for(let S=0,M=0;S<h;S++,M+=4)E(0,M,S/(h-1));return y}Ft("AlphaImage",kb),Ft("RGBAImage",al);let Cq="big-fb";class qGe extends Es{createBucket(s){return new H7(s)}constructor(s){super(s,kGe),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Y7({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Cq)&&this.heatmapFbos.delete(Cq)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let K7;var jGe={get paint(){return K7=K7||new Bi({"hillshade-illumination-direction":new Zt(ee.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Zt(ee.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Zt(ee.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Zt(ee.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Zt(ee.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Zt(ee.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Zt(ee.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Zt(ee.paint_hillshade["hillshade-method"])})}};class FGe extends Es{constructor(s){super(s,jGe),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let s=this.paint.get("hillshade-illumination-direction").values,h=this.paint.get("hillshade-illumination-altitude").values,d=this.paint.get("hillshade-highlight-color").values,y=this.paint.get("hillshade-shadow-color").values,E=Math.max(s.length,h.length,d.length,y.length);s=s.concat(Array(E-s.length).fill(s.at(-1))),h=h.concat(Array(E-h.length).fill(h.at(-1))),d=d.concat(Array(E-d.length).fill(d.at(-1))),y=y.concat(Array(E-y.length).fill(y.at(-1)));let S=h.map(hr);return{directionRadians:s.map(hr),altitudeRadians:S,shadowColor:y,highlightColor:d}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let zGe=ni([{name:"a_pos",components:2,type:"Int16"}],4),{members:BGe}=zGe;function Pq(f,s,h){let d=h.patternDependencies,y=!1;for(let E of s){let S=E.paint.get(`${f}-pattern`);S.isConstant()||(y=!0);let M=S.constantOr(null);M&&(y=!0,d[M.to]=!0,d[M.from]=!0)}return y}function Rq(f,s,h,d,y){let E=y.patternDependencies;for(let S of s){let M=S.paint.get(`${f}-pattern`).value;if(M.kind!=="constant"){let R=M.evaluate({zoom:d-1},h,{},y.availableImages),N=M.evaluate({zoom:d},h,{},y.availableImages),z=M.evaluate({zoom:d+1},h,{},y.availableImages);R=R&&R.name?R.name:R,N=N&&N.name?N.name:N,z=z&&z.name?z.name:z,E[R]=!0,E[N]=!0,E[z]=!0,h.patterns[S.id]={min:R,mid:N,max:z}}}return h}function X7(f,s,h,d,y){let E;if(y===function(S,M,R,N){let z=0;for(let V=M,W=R-N;V<R;V+=N)z+=(S[W]-S[V])*(S[V+1]+S[W+1]),W=V;return z}(f,s,h,d)>0)for(let S=s;S<h;S+=d)E=tX(S/d|0,f[S],f[S+1],E);else for(let S=h-d;S>=s;S-=d)E=tX(S/d|0,f[S],f[S+1],E);return E&&ny(E,E.next)&&(zb(E),E=E.next),E}function jm(f,s){if(!f)return f;s||(s=f);let h,d=f;do if(h=!1,d.steiner||!ny(d,d.next)&&ki(d.prev,d,d.next)!==0)d=d.next;else{if(zb(d),d=s=d.prev,d===d.next)break;h=!0}while(h||d!==s);return s}function qb(f,s,h,d,y,E,S){if(!f)return;!S&&E&&function(R,N,z,V){let W=R;do W.z===0&&(W.z=Oq(W.x,W.y,N,z,V)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==R);W.prevZ.nextZ=null,W.prevZ=null,function(K){let Q,re=1;do{let ce,me=K;K=null;let Oe=null;for(Q=0;me;){Q++;let we=me,Y=0;for(let Ee=0;Ee<re&&(Y++,we=we.nextZ,we);Ee++);let le=re;for(;Y>0||le>0&&we;)Y!==0&&(le===0||!we||me.z<=we.z)?(ce=me,me=me.nextZ,Y--):(ce=we,we=we.nextZ,le--),Oe?Oe.nextZ=ce:K=ce,ce.prevZ=Oe,Oe=ce;me=we}Oe.nextZ=null,re*=2}while(Q>1)}(W)}(f,d,y,E);let M=f;for(;f.prev!==f.next;){let R=f.prev,N=f.next;if(E?VGe(f,d,y,E):UGe(f))s.push(R.i,f.i,N.i),zb(f),f=N.next,M=N.next;else if((f=N)===M){S?S===1?qb(f=GGe(jm(f),s),s,h,d,y,E,2):S===2&&$Ge(f,s,h,d,y,E):qb(jm(f),s,h,d,y,E,1);break}}}function UGe(f){let s=f.prev,h=f,d=f.next;if(ki(s,h,d)>=0)return!1;let y=s.x,E=h.x,S=d.x,M=s.y,R=h.y,N=d.y,z=Math.min(y,E,S),V=Math.min(M,R,N),W=Math.max(y,E,S),K=Math.max(M,R,N),Q=d.next;for(;Q!==s;){if(Q.x>=z&&Q.x<=W&&Q.y>=V&&Q.y<=K&&jb(y,M,E,R,S,N,Q.x,Q.y)&&ki(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function VGe(f,s,h,d){let y=f.prev,E=f,S=f.next;if(ki(y,E,S)>=0)return!1;let M=y.x,R=E.x,N=S.x,z=y.y,V=E.y,W=S.y,K=Math.min(M,R,N),Q=Math.min(z,V,W),re=Math.max(M,R,N),ce=Math.max(z,V,W),me=Oq(K,Q,s,h,d),Oe=Oq(re,ce,s,h,d),we=f.prevZ,Y=f.nextZ;for(;we&&we.z>=me&&Y&&Y.z<=Oe;){if(we.x>=K&&we.x<=re&&we.y>=Q&&we.y<=ce&&we!==y&&we!==S&&jb(M,z,R,V,N,W,we.x,we.y)&&ki(we.prev,we,we.next)>=0||(we=we.prevZ,Y.x>=K&&Y.x<=re&&Y.y>=Q&&Y.y<=ce&&Y!==y&&Y!==S&&jb(M,z,R,V,N,W,Y.x,Y.y)&&ki(Y.prev,Y,Y.next)>=0))return!1;Y=Y.nextZ}for(;we&&we.z>=me;){if(we.x>=K&&we.x<=re&&we.y>=Q&&we.y<=ce&&we!==y&&we!==S&&jb(M,z,R,V,N,W,we.x,we.y)&&ki(we.prev,we,we.next)>=0)return!1;we=we.prevZ}for(;Y&&Y.z<=Oe;){if(Y.x>=K&&Y.x<=re&&Y.y>=Q&&Y.y<=ce&&Y!==y&&Y!==S&&jb(M,z,R,V,N,W,Y.x,Y.y)&&ki(Y.prev,Y,Y.next)>=0)return!1;Y=Y.nextZ}return!0}function GGe(f,s){let h=f;do{let d=h.prev,y=h.next.next;!ny(d,y)&&J7(d,h,h.next,y)&&Fb(d,y)&&Fb(y,d)&&(s.push(d.i,h.i,y.i),zb(h),zb(h.next),h=f=y),h=h.next}while(h!==f);return jm(h)}function $Ge(f,s,h,d,y,E){let S=f;do{let M=S.next.next;for(;M!==S.prev;){if(S.i!==M.i&&KGe(S,M)){let R=eX(S,M);return S=jm(S,S.next),R=jm(R,R.next),qb(S,s,h,d,y,E,0),void qb(R,s,h,d,y,E,0)}M=M.next}S=S.next}while(S!==f)}function HGe(f,s){let h=f.x-s.x;return h===0&&(h=f.y-s.y,h===0)&&(h=(f.next.y-f.y)/(f.next.x-f.x)-(s.next.y-s.y)/(s.next.x-s.x)),h}function WGe(f,s){let h=function(y,E){let S=E,M=y.x,R=y.y,N,z=-1/0;if(ny(y,S))return S;do{if(ny(y,S.next))return S.next;if(R<=S.y&&R>=S.next.y&&S.next.y!==S.y){let re=S.x+(R-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(re<=M&&re>z&&(z=re,N=S.x<S.next.x?S:S.next,re===M))return N}S=S.next}while(S!==E);if(!N)return null;let V=N,W=N.x,K=N.y,Q=1/0;S=N;do{if(M>=S.x&&S.x>=W&&M!==S.x&&Q7(R<K?M:z,R,W,K,R<K?z:M,R,S.x,S.y)){let re=Math.abs(R-S.y)/(M-S.x);Fb(S,y)&&(re<Q||re===Q&&(S.x>N.x||S.x===N.x&&ZGe(N,S)))&&(N=S,Q=re)}S=S.next}while(S!==V);return N}(f,s);if(!h)return s;let d=eX(h,f);return jm(d,d.next),jm(h,h.next)}function ZGe(f,s){return ki(f.prev,f,s.prev)<0&&ki(s.next,f,f.next)<0}function Oq(f,s,h,d,y){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-h)*y|0)|f<<8))|f<<4))|f<<2))|f<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-d)*y|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function YGe(f){let s=f,h=f;do(s.x<h.x||s.x===h.x&&s.y<h.y)&&(h=s),s=s.next;while(s!==f);return h}function Q7(f,s,h,d,y,E,S,M){return(y-S)*(s-M)>=(f-S)*(E-M)&&(f-S)*(d-M)>=(h-S)*(s-M)&&(h-S)*(E-M)>=(y-S)*(d-M)}function jb(f,s,h,d,y,E,S,M){return!(f===S&&s===M)&&Q7(f,s,h,d,y,E,S,M)}function KGe(f,s){return f.next.i!==s.i&&f.prev.i!==s.i&&!function(h,d){let y=h;do{if(y.i!==h.i&&y.next.i!==h.i&&y.i!==d.i&&y.next.i!==d.i&&J7(y,y.next,h,d))return!0;y=y.next}while(y!==h);return!1}(f,s)&&(Fb(f,s)&&Fb(s,f)&&function(h,d){let y=h,E=!1,S=(h.x+d.x)/2,M=(h.y+d.y)/2;do y.y>M!=y.next.y>M&&y.next.y!==y.y&&S<(y.next.x-y.x)*(M-y.y)/(y.next.y-y.y)+y.x&&(E=!E),y=y.next;while(y!==h);return E}(f,s)&&(ki(f.prev,f,s.prev)||ki(f,s.prev,s))||ny(f,s)&&ki(f.prev,f,f.next)>0&&ki(s.prev,s,s.next)>0)}function ki(f,s,h){return(s.y-f.y)*(h.x-s.x)-(s.x-f.x)*(h.y-s.y)}function ny(f,s){return f.x===s.x&&f.y===s.y}function J7(f,s,h,d){let y=AM(ki(f,s,h)),E=AM(ki(f,s,d)),S=AM(ki(h,d,f)),M=AM(ki(h,d,s));return y!==E&&S!==M||!(y!==0||!MM(f,h,s))||!(E!==0||!MM(f,d,s))||!(S!==0||!MM(h,f,d))||!(M!==0||!MM(h,s,d))}function MM(f,s,h){return s.x<=Math.max(f.x,h.x)&&s.x>=Math.min(f.x,h.x)&&s.y<=Math.max(f.y,h.y)&&s.y>=Math.min(f.y,h.y)}function AM(f){return f>0?1:f<0?-1:0}function Fb(f,s){return ki(f.prev,f,f.next)<0?ki(f,s,f.next)>=0&&ki(f,f.prev,s)>=0:ki(f,s,f.prev)<0||ki(f,f.next,s)<0}function eX(f,s){let h=Lq(f.i,f.x,f.y),d=Lq(s.i,s.x,s.y),y=f.next,E=s.prev;return f.next=s,s.prev=f,h.next=y,y.prev=h,d.next=h,h.prev=d,E.next=d,d.prev=E,d}function tX(f,s,h,d){let y=Lq(f,s,h);return d?(y.next=d.next,y.prev=d,d.next.prev=y,d.next=y):(y.prev=y,y.next=y),y}function zb(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function Lq(f,s,h){return{i:f,x:s,y:h,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class iy{constructor(s,h){if(h>s)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=s,this._minGranularity=h}getGranularityForZoomLevel(s){return Math.max(Math.floor(this._baseZoomGranularity/(1<<s)),this._minGranularity,1)}}class CM{constructor(s){this.fill=s.fill,this.line=s.line,this.tile=s.tile,this.stencil=s.stencil,this.circle=s.circle}}CM.noSubdivision=new CM({fill:new iy(0,0),line:new iy(0,0),tile:new iy(0,0),stencil:new iy(0,0),circle:1}),Ft("SubdivisionGranularityExpression",iy),Ft("SubdivisionGranularitySetting",CM);let oy=-32768,Bb=32767;class XGe{constructor(s,h){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=s,this._granularityCellSize=Be/s,this._canonical=h}_getKey(s,h){return(s+=32768)<<16|(h+=32768)<<0}_vertexToIndex(s,h){if(s<-32768||h<-32768||s>32767||h>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let d=0|Math.round(s),y=0|Math.round(h),E=this._getKey(d,y);if(this._vertexDictionary.has(E))return this._vertexDictionary.get(E);let S=this._vertexBuffer.length/2;return this._vertexDictionary.set(E,S),this._vertexBuffer.push(d,y),S}_subdivideTrianglesScanline(s){if(this._granularity<2)return function(y,E){let S=[];for(let M=0;M<E.length;M+=3){let R=E[M],N=E[M+1],z=E[M+2],V=y[2*R],W=y[2*R+1];(y[2*N]-V)*(y[2*z+1]-W)-(y[2*N+1]-W)*(y[2*z]-V)>0?(S.push(R),S.push(z),S.push(N)):(S.push(R),S.push(N),S.push(z))}return S}(this._vertexBuffer,s);let h=[],d=s.length;for(let y=0;y<d;y+=3){let E=[s[y+0],s[y+1],s[y+2]],S=[this._vertexBuffer[2*s[y+0]+0],this._vertexBuffer[2*s[y+0]+1],this._vertexBuffer[2*s[y+1]+0],this._vertexBuffer[2*s[y+1]+1],this._vertexBuffer[2*s[y+2]+0],this._vertexBuffer[2*s[y+2]+1]],M=1/0,R=1/0,N=-1/0,z=-1/0;for(let re=0;re<3;re++){let ce=S[2*re],me=S[2*re+1];M=Math.min(M,ce),N=Math.max(N,ce),R=Math.min(R,me),z=Math.max(z,me)}if(M===N||R===z)continue;let V=Math.floor(M/this._granularityCellSize),W=Math.ceil(N/this._granularityCellSize),K=Math.floor(R/this._granularityCellSize),Q=Math.ceil(z/this._granularityCellSize);if(V!==W||K!==Q)for(let re=K;re<Q;re++){let ce=this._scanlineGenerateVertexRingForCellRow(re,S,E);QGe(this._vertexBuffer,ce,h)}else h.push(...E)}return h}_scanlineGenerateVertexRingForCellRow(s,h,d){let y=s*this._granularityCellSize,E=y+this._granularityCellSize,S=[];for(let M=0;M<3;M++){let R=h[2*M],N=h[2*M+1],z=h[2*(M+1)%6],V=h[(2*(M+1)+1)%6],W=h[2*(M+2)%6],K=h[(2*(M+2)+1)%6],Q=z-R,re=V-N,ce=Q===0,me=re===0,Oe=(y-N)/re,we=(E-N)/re,Y=Math.min(Oe,we),le=Math.max(Oe,we);if(!me&&(Y>=1||le<=0)||me&&(N<y||N>E)){V>=y&&V<=E&&S.push(d[(M+1)%3]);continue}!me&&Y>0&&S.push(this._vertexToIndex(R+Q*Y,N+re*Y));let Ee=R+Q*Math.max(Y,0),Ve=R+Q*Math.min(le,1);ce||this._generateIntraEdgeVertices(S,R,N,z,V,Ee,Ve),!me&&le<1&&S.push(this._vertexToIndex(R+Q*le,N+re*le)),(me||V>=y&&V<=E)&&S.push(d[(M+1)%3]),!me&&(V<=y||V>=E)&&this._generateInterEdgeVertices(S,R,N,z,V,W,K,Ve,y,E)}return S}_generateIntraEdgeVertices(s,h,d,y,E,S,M){let R=y-h,N=E-d,z=N===0,V=z?Math.min(h,y):Math.min(S,M),W=z?Math.max(h,y):Math.max(S,M),K=Math.floor(V/this._granularityCellSize)+1,Q=Math.ceil(W/this._granularityCellSize)-1;if(z?h<y:S<M)for(let re=K;re<=Q;re++){let ce=re*this._granularityCellSize;s.push(this._vertexToIndex(ce,d+N*(ce-h)/R))}else for(let re=Q;re>=K;re--){let ce=re*this._granularityCellSize;s.push(this._vertexToIndex(ce,d+N*(ce-h)/R))}}_generateInterEdgeVertices(s,h,d,y,E,S,M,R,N,z){let V=E-d,W=S-y,K=M-E,Q=(N-E)/K,re=(z-E)/K,ce=Math.min(Q,re),me=Math.max(Q,re),Oe=y+W*ce,we=Math.floor(Math.min(Oe,R)/this._granularityCellSize)+1,Y=Math.ceil(Math.max(Oe,R)/this._granularityCellSize)-1,le=R<Oe,Ee=K===0;if(Ee&&(M===N||M===z))return;if(Ee||ce>=1||me<=0){let ut=d-M,Ze=S+(h-S)*Math.min((N-M)/ut,(z-M)/ut);we=Math.floor(Math.min(Ze,R)/this._granularityCellSize)+1,Y=Math.ceil(Math.max(Ze,R)/this._granularityCellSize)-1,le=R<Ze}let Ve=V>0?z:N;if(le)for(let ut=we;ut<=Y;ut++)s.push(this._vertexToIndex(ut*this._granularityCellSize,Ve));else for(let ut=Y;ut>=we;ut--)s.push(this._vertexToIndex(ut*this._granularityCellSize,Ve))}_generateOutline(s){let h=[];for(let d of s){let y=Fm(d,this._granularity,!0),E=this._pointArrayToIndices(y),S=[];for(let M=1;M<E.length;M++)S.push(E[M-1]),S.push(E[M]);h.push(S)}return h}_handlePoles(s){let h=!1,d=!1;this._canonical&&(this._canonical.y===0&&(h=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(h||d)&&this._fillPoles(s,h,d)}_ensureNoPoleVertices(){let s=this._vertexBuffer;for(let h=0;h<s.length;h+=2){let d=s[h+1];d===oy&&(s[h+1]=-32767),d===Bb&&(s[h+1]=32766)}}_generatePoleQuad(s,h,d,y,E,S){y>E!=(S===oy)?(s.push(h),s.push(d),s.push(this._vertexToIndex(y,S)),s.push(d),s.push(this._vertexToIndex(E,S)),s.push(this._vertexToIndex(y,S))):(s.push(d),s.push(h),s.push(this._vertexToIndex(y,S)),s.push(this._vertexToIndex(E,S)),s.push(d),s.push(this._vertexToIndex(y,S)))}_fillPoles(s,h,d){let y=this._vertexBuffer,E=Be,S=s.length;for(let M=2;M<S;M+=3){let R=s[M-2],N=s[M-1],z=s[M],V=y[2*R],W=y[2*R+1],K=y[2*N],Q=y[2*N+1],re=y[2*z],ce=y[2*z+1];h&&(W===0&&Q===0&&this._generatePoleQuad(s,R,N,V,K,oy),Q===0&&ce===0&&this._generatePoleQuad(s,N,z,K,re,oy),ce===0&&W===0&&this._generatePoleQuad(s,z,R,re,V,oy)),d&&(W===E&&Q===E&&this._generatePoleQuad(s,R,N,V,K,Bb),Q===E&&ce===E&&this._generatePoleQuad(s,N,z,K,re,Bb),ce===E&&W===E&&this._generatePoleQuad(s,z,R,re,V,Bb))}}_initializeVertices(s){for(let h=0;h<s.length;h+=2)this._vertexToIndex(s[h],s[h+1])}subdividePolygonInternal(s,h){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:d,holeIndices:y}=function(M){let R=[],N=[];for(let z of M)if(z.length!==0){z!==M[0]&&R.push(N.length/2);for(let V=0;V<z.length;V++)N.push(z[V].x),N.push(z[V].y)}return{flattened:N,holeIndices:R}}(s),E;this._initializeVertices(d);try{let M=function(N,z,V=2){let W=z&&z.length,K=W?z[0]*V:N.length,Q=X7(N,0,K,V,!0),re=[];if(!Q||Q.next===Q.prev)return re;let ce,me,Oe;if(W&&(Q=function(we,Y,le,Ee){let Ve=[];for(let ut=0,Ze=Y.length;ut<Ze;ut++){let Je=X7(we,Y[ut]*Ee,ut<Ze-1?Y[ut+1]*Ee:we.length,Ee,!1);Je===Je.next&&(Je.steiner=!0),Ve.push(YGe(Je))}Ve.sort(HGe);for(let ut=0;ut<Ve.length;ut++)le=WGe(Ve[ut],le);return le}(N,z,Q,V)),N.length>80*V){ce=1/0,me=1/0;let we=-1/0,Y=-1/0;for(let le=V;le<K;le+=V){let Ee=N[le],Ve=N[le+1];Ee<ce&&(ce=Ee),Ve<me&&(me=Ve),Ee>we&&(we=Ee),Ve>Y&&(Y=Ve)}Oe=Math.max(we-ce,Y-me),Oe=Oe!==0?32767/Oe:0}return qb(Q,re,V,ce,me,Oe,0),re}(d,y),R=this._convertIndices(d,M);E=this._subdivideTrianglesScanline(R)}catch(M){console.error(M)}let S=[];return h&&(S=this._generateOutline(s)),this._ensureNoPoleVertices(),this._handlePoles(E),{verticesFlattened:this._vertexBuffer,indicesTriangles:E,indicesLineList:S}}_convertIndices(s,h){let d=[];for(let y=0;y<h.length;y++)d.push(this._vertexToIndex(s[2*h[y]],s[2*h[y]+1]));return d}_pointArrayToIndices(s){let h=[];for(let d=0;d<s.length;d++){let y=s[d];h.push(this._vertexToIndex(y.x,y.y))}return h}}function rX(f,s,h,d=!0){return new XGe(h,s).subdividePolygonInternal(f,d)}function Fm(f,s,h=!1){if(!f||f.length<1)return[];if(f.length<2)return[];let d=f[0],y=f[f.length-1],E=h&&(d.x!==y.x||d.y!==y.y);if(s<2)return E?[...f,f[0]]:[...f];let S=Math.floor(Be/s),M=[];M.push(new T(f[0].x,f[0].y));let R=f.length,N=E?R:R-1;for(let z=0;z<N;z++){let V=f[z],W=z<R-1?f[z+1]:f[0],K=V.x,Q=V.y,re=W.x,ce=W.y,me=K!==re,Oe=Q!==ce;if(!me&&!Oe)continue;let we=re-K,Y=ce-Q,le=Math.abs(we),Ee=Math.abs(Y),Ve=K,ut=Q;for(;;){let Je=we>0?(Math.floor(Ve/S)+1)*S:(Math.ceil(Ve/S)-1)*S,dt=Y>0?(Math.floor(ut/S)+1)*S:(Math.ceil(ut/S)-1)*S,ct=Math.abs(Ve-Je),vt=Math.abs(ut-dt),rt=Math.abs(Ve-re),zt=Math.abs(ut-ce),or=me?ct/le:Number.POSITIVE_INFINITY,tr=Oe?vt/Ee:Number.POSITIVE_INFINITY;if((rt<=ct||!me)&&(zt<=vt||!Oe))break;if(or<tr&&me||!Oe){Ve=Je,ut+=Y*or;let Wt=new T(Ve,Math.round(ut));M[M.length-1].x===Wt.x&&M[M.length-1].y===Wt.y||M.push(Wt)}else{Ve+=we*tr,ut=dt;let Wt=new T(Math.round(Ve),ut);M[M.length-1].x===Wt.x&&M[M.length-1].y===Wt.y||M.push(Wt)}}let Ze=new T(re,ce);M[M.length-1].x===Ze.x&&M[M.length-1].y===Ze.y||M.push(Ze)}return M}function QGe(f,s,h){if(s.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,y=f[2*s[0]];for(let R=1;R<s.length;R++){let N=f[2*s[R]];N<y&&(y=N,d=R)}let E=s.length,S=d,M=(S+1)%E;for(;;){let R=S-1>=0?S-1:E-1,N=(M+1)%E,z=f[2*s[R]],V=f[2*s[N]],W=f[2*s[S]],K=f[2*s[S]+1],Q=f[2*s[M]+1],re=!1;if(z<V)re=!0;else if(z>V)re=!1;else{let ce=Q-K,me=-(f[2*s[M]]-W),Oe=K<Q?1:-1;((z-W)*ce+(f[2*s[R]+1]-K)*me)*Oe>((V-W)*ce+(f[2*s[N]+1]-K)*me)*Oe&&(re=!0)}if(re){let ce=s[R],me=s[S],Oe=s[M];ce!==me&&ce!==Oe&&me!==Oe&&h.push(Oe,me,ce),S--,S<0&&(S=E-1)}else{let ce=s[N],me=s[S],Oe=s[M];ce!==me&&ce!==Oe&&me!==Oe&&h.push(Oe,me,ce),M++,M>=E&&(M=0)}if(R===N)break}}function nX(f,s,h,d,y,E,S,M,R){let N=y.length/2,z=S&&M&&R;if(N<ln.MAX_VERTEX_ARRAY_LENGTH){let V=s.prepareSegment(N,h,d),W=V.vertexLength;for(let re=0;re<E.length;re+=3)d.emplaceBack(W+E[re],W+E[re+1],W+E[re+2]);let K,Q;V.vertexLength+=N,V.primitiveLength+=E.length/3,z&&(Q=S.prepareSegment(N,h,M),K=Q.vertexLength,Q.vertexLength+=N);for(let re=0;re<y.length;re+=2)f(y[re],y[re+1]);if(z)for(let re=0;re<R.length;re++){let ce=R[re];for(let me=1;me<ce.length;me+=2)M.emplaceBack(K+ce[me-1],K+ce[me]);Q.primitiveLength+=ce.length/2}}else(function(V,W,K,Q,re,ce){let me=[];for(let Ee=0;Ee<Q.length/2;Ee++)me.push(-1);let Oe={count:0},we=0,Y=V.getOrCreateLatestSegment(W,K),le=Y.vertexLength;for(let Ee=2;Ee<re.length;Ee+=3){let Ve=re[Ee-2],ut=re[Ee-1],Ze=re[Ee],Je=me[Ve]<we,dt=me[ut]<we,ct=me[Ze]<we;Y.vertexLength+((Je?1:0)+(dt?1:0)+(ct?1:0))>ln.MAX_VERTEX_ARRAY_LENGTH&&(Y=V.createNewSegment(W,K),we=Oe.count,Je=!0,dt=!0,ct=!0,le=0);let vt=Ub(me,Q,ce,Oe,Ve,Je,Y),rt=Ub(me,Q,ce,Oe,ut,dt,Y),zt=Ub(me,Q,ce,Oe,Ze,ct,Y);K.emplaceBack(le+vt-we,le+rt-we,le+zt-we),Y.primitiveLength++}})(s,h,d,y,E,f),z&&function(V,W,K,Q,re,ce){let me=[];for(let Ee=0;Ee<Q.length/2;Ee++)me.push(-1);let Oe={count:0},we=0,Y=V.getOrCreateLatestSegment(W,K),le=Y.vertexLength;for(let Ee=0;Ee<re.length;Ee++){let Ve=re[Ee];for(let ut=1;ut<re[Ee].length;ut+=2){let Ze=Ve[ut-1],Je=Ve[ut],dt=me[Ze]<we,ct=me[Je]<we;Y.vertexLength+((dt?1:0)+(ct?1:0))>ln.MAX_VERTEX_ARRAY_LENGTH&&(Y=V.createNewSegment(W,K),we=Oe.count,dt=!0,ct=!0,le=0);let vt=Ub(me,Q,ce,Oe,Ze,dt,Y),rt=Ub(me,Q,ce,Oe,Je,ct,Y);K.emplaceBack(le+vt-we,le+rt-we),Y.primitiveLength++}}}(S,h,M,y,R,f),s.forceNewSegmentOnNextPrepare(),S==null||S.forceNewSegmentOnNextPrepare()}function Ub(f,s,h,d,y,E,S){if(E){let M=d.count;return h(s[2*y],s[2*y+1]),f[y]=d.count,d.count++,S.vertexLength++,M}return f[y]}class Dq{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new bt,this.indexArray=new sn,this.indexArray2=new Xi,this.programConfigurations=new Mc(s.layers,s.zoom),this.segments=new ln,this.segments2=new ln,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,d){this.hasPattern=Pq("fill",this.layers,h);let y=this.layers[0].layout.get("fill-sort-key"),E=!y.isConstant(),S=[];for(let{feature:M,id:R,index:N,sourceLayerIndex:z}of s){let V=this.layers[0]._featureFilter.needGeometry,W=km(M,V);if(!this.layers[0]._featureFilter.filter(new Gn(this.zoom),W,d))continue;let K=E?y.evaluate(W,{},d,h.availableImages):void 0,Q={id:R,properties:M.properties,type:M.type,sourceLayerIndex:z,index:N,geometry:V?W.geometry:Nm(M),patterns:{},sortKey:K};S.push(Q)}E&&S.sort((M,R)=>M.sortKey-R.sortKey);for(let M of S){let{geometry:R,index:N,sourceLayerIndex:z}=M;if(this.hasPattern){let V=Rq("fill",this.layers,M,this.zoom,h);this.patternFeatures.push(V)}else this.addFeature(M,R,N,d,{},h.subdivisionGranularity);h.featureIndex.insert(s[N].feature,R,N,z,this.index)}}update(s,h,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,d)}addFeatures(s,h,d){for(let y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,h,d,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,BGe),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,h,d,y,E,S){for(let M of Mv(h,500)){let R=rX(M,y,S.fill.getGranularityForZoomLevel(y.z)),N=this.layoutVertexArray;nX((z,V)=>{N.emplaceBack(z,V)},this.segments,this.layoutVertexArray,this.indexArray,R.verticesFlattened,R.indicesTriangles,this.segments2,this.indexArray2,R.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,E,y)}}let iX,oX;Ft("FillBucket",Dq,{omit:["layers","patternFeatures"]});var JGe={get paint(){return oX=oX||new Bi({"fill-antialias":new Zt(ee.paint_fill["fill-antialias"]),"fill-opacity":new sr(ee.paint_fill["fill-opacity"]),"fill-color":new sr(ee.paint_fill["fill-color"]),"fill-outline-color":new sr(ee.paint_fill["fill-outline-color"]),"fill-translate":new Zt(ee.paint_fill["fill-translate"]),"fill-translate-anchor":new Zt(ee.paint_fill["fill-translate-anchor"]),"fill-pattern":new Pm(ee.paint_fill["fill-pattern"])})},get layout(){return iX=iX||new Bi({"fill-sort-key":new sr(ee.layout_fill["fill-sort-key"])})}};class e6e extends Es{constructor(s){super(s,JGe)}recalculate(s,h){super.recalculate(s,h);let d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new Dq(s)}queryRadius(){return TM(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:s,geometry:h,transform:d,pixelsToTileUnits:y}){return z7(IM(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,y),h)}isTileClipped(){return!0}}let t6e=ni([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),r6e=ni([{name:"a_centroid",components:2,type:"Int16"}],4),{members:n6e}=t6e;var Nq,aX,kq,sX,qq,lX,uX,PM={};function cX(){if(aX)return Nq;aX=1;var f=g();function s(y,E,S,M,R){this.properties={},this.extent=S,this.type=0,this._pbf=y,this._geometry=-1,this._keys=M,this._values=R,y.readFields(h,this,E)}function h(y,E,S){y==1?E.id=S.readVarint():y==2?function(M,R){for(var N=M.readVarint()+M.pos;M.pos<N;){var z=R._keys[M.readVarint()],V=R._values[M.readVarint()];R.properties[z]=V}}(S,E):y==3?E.type=S.readVarint():y==4&&(E._geometry=S.pos)}function d(y){for(var E,S,M=0,R=0,N=y.length,z=N-1;R<N;z=R++)M+=((S=y[z]).x-(E=y[R]).x)*(E.y+S.y);return M}return Nq=s,s.types=["Unknown","Point","LineString","Polygon"],s.prototype.loadGeometry=function(){var y=this._pbf;y.pos=this._geometry;for(var E,S=y.readVarint()+y.pos,M=1,R=0,N=0,z=0,V=[];y.pos<S;){if(R<=0){var W=y.readVarint();M=7&W,R=W>>3}if(R--,M===1||M===2)N+=y.readSVarint(),z+=y.readSVarint(),M===1&&(E&&V.push(E),E=[]),E.push(new f(N,z));else{if(M!==7)throw new Error("unknown command "+M);E&&E.push(E[0].clone())}}return E&&V.push(E),V},s.prototype.bbox=function(){var y=this._pbf;y.pos=this._geometry;for(var E=y.readVarint()+y.pos,S=1,M=0,R=0,N=0,z=1/0,V=-1/0,W=1/0,K=-1/0;y.pos<E;){if(M<=0){var Q=y.readVarint();S=7&Q,M=Q>>3}if(M--,S===1||S===2)(R+=y.readSVarint())<z&&(z=R),R>V&&(V=R),(N+=y.readSVarint())<W&&(W=N),N>K&&(K=N);else if(S!==7)throw new Error("unknown command "+S)}return[z,W,V,K]},s.prototype.toGeoJSON=function(y,E,S){var M,R,N=this.extent*Math.pow(2,S),z=this.extent*y,V=this.extent*E,W=this.loadGeometry(),K=s.types[this.type];function Q(me){for(var Oe=0;Oe<me.length;Oe++){var we=me[Oe];me[Oe]=[360*(we.x+z)/N-180,360/Math.PI*Math.atan(Math.exp((180-360*(we.y+V)/N)*Math.PI/180))-90]}}switch(this.type){case 1:var re=[];for(M=0;M<W.length;M++)re[M]=W[M][0];Q(W=re);break;case 2:for(M=0;M<W.length;M++)Q(W[M]);break;case 3:for(W=function(me){var Oe=me.length;if(Oe<=1)return[me];for(var we,Y,le=[],Ee=0;Ee<Oe;Ee++){var Ve=d(me[Ee]);Ve!==0&&(Y===void 0&&(Y=Ve<0),Y===Ve<0?(we&&le.push(we),we=[me[Ee]]):we.push(me[Ee]))}return we&&le.push(we),le}(W),M=0;M<W.length;M++)for(R=0;R<W[M].length;R++)Q(W[M][R])}W.length===1?W=W[0]:K="Multi"+K;var ce={type:"Feature",geometry:{type:K,coordinates:W},properties:this.properties};return"id"in this&&(ce.id=this.id),ce},Nq}function hX(){if(sX)return kq;sX=1;var f=cX();function s(d,y){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(h,this,y),this.length=this._features.length}function h(d,y,E){d===15?y.version=E.readVarint():d===1?y.name=E.readString():d===5?y.extent=E.readVarint():d===2?y._features.push(E.pos):d===3?y._keys.push(E.readString()):d===4&&y._values.push(function(S){for(var M=null,R=S.readVarint()+S.pos;S.pos<R;){var N=S.readVarint()>>3;M=N===1?S.readString():N===2?S.readFloat():N===3?S.readDouble():N===4?S.readVarint64():N===5?S.readVarint():N===6?S.readSVarint():N===7?S.readBoolean():null}return M}(E))}return kq=s,s.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var y=this._pbf.readVarint()+this._pbf.pos;return new f(this._pbf,y,this.extent,this._keys,this._values)},kq}function fX(){return uX||(uX=1,PM.VectorTile=function(){if(lX)return qq;lX=1;var f=hX();function s(h,d,y){if(h===3){var E=new f(y,y.readVarint()+y.pos);E.length&&(d[E.name]=E)}}return qq=function(h,d){this.layers=h.readFields(s,{},d)},qq}(),PM.VectorTileFeature=cX(),PM.VectorTileLayer=hX()),PM}var Vb=l(fX());let i6e=Vb.VectorTileFeature.types,jq=Math.pow(2,13);function Gb(f,s,h,d,y,E,S,M){f.emplaceBack(s,h,2*Math.floor(d*jq)+S,y*jq*2,E*jq*2,Math.round(M))}class Fq{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new ft,this.centroidVertexArray=new Qe,this.indexArray=new sn,this.programConfigurations=new Mc(s.layers,s.zoom),this.segments=new ln,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,d){this.features=[],this.hasPattern=Pq("fill-extrusion",this.layers,h);for(let{feature:y,id:E,index:S,sourceLayerIndex:M}of s){let R=this.layers[0]._featureFilter.needGeometry,N=km(y,R);if(!this.layers[0]._featureFilter.filter(new Gn(this.zoom),N,d))continue;let z={id:E,sourceLayerIndex:M,index:S,geometry:R?N.geometry:Nm(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(Rq("fill-extrusion",this.layers,z,this.zoom,h)):this.addFeature(z,z.geometry,S,d,{},h.subdivisionGranularity),h.featureIndex.insert(y,z.geometry,S,M,this.index,!0)}}addFeatures(s,h,d){for(let y of this.features){let{geometry:E}=y;this.addFeature(y,E,y.index,h,d,s.subdivisionGranularity)}}update(s,h,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,n6e),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,r6e.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,h,d,y,E,S){for(let M of Mv(h,500)){let R={x:0,y:0,sampleCount:0},N=this.layoutVertexArray.length;this.processPolygon(R,y,s,M,S);let z=this.layoutVertexArray.length-N,V=Math.floor(R.x/R.sampleCount),W=Math.floor(R.y/R.sampleCount);for(let K=0;K<z;K++)this.centroidVertexArray.emplaceBack(V,W)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,E,y)}processPolygon(s,h,d,y,E){if(y.length<1||pX(y[0]))return;for(let V of y)V.length!==0&&o6e(s,V);let S={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},M=E.fill.getGranularityForZoomLevel(h.z),R=i6e[d.type]==="Polygon";for(let V of y){if(V.length===0||pX(V))continue;let W=Fm(V,M,R);this._generateSideFaces(W,S)}if(!R)return;let N=rX(y,h,M,!1),z=this.layoutVertexArray;nX((V,W)=>{Gb(z,V,W,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,N.verticesFlattened,N.indicesTriangles)}_generateSideFaces(s,h){let d=0;for(let y=1;y<s.length;y++){let E=s[y],S=s[y-1];if(a6e(E,S))continue;h.segment.vertexLength+4>ln.MAX_VERTEX_ARRAY_LENGTH&&(h.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let M=E.sub(S)._perp()._unit(),R=S.dist(E);d+R>32768&&(d=0),Gb(this.layoutVertexArray,E.x,E.y,M.x,M.y,0,0,d),Gb(this.layoutVertexArray,E.x,E.y,M.x,M.y,0,1,d),d+=R,Gb(this.layoutVertexArray,S.x,S.y,M.x,M.y,0,0,d),Gb(this.layoutVertexArray,S.x,S.y,M.x,M.y,0,1,d);let N=h.segment.vertexLength;this.indexArray.emplaceBack(N,N+2,N+1),this.indexArray.emplaceBack(N+1,N+2,N+3),h.segment.vertexLength+=4,h.segment.primitiveLength+=2}}}function o6e(f,s){for(let h=0;h<s.length;h++){let d=s[h];h===s.length-1&&s[0].x===d.x&&s[0].y===d.y||(f.x+=d.x,f.y+=d.y,f.sampleCount++)}}function a6e(f,s){return f.x===s.x&&(f.x<0||f.x>Be)||f.y===s.y&&(f.y<0||f.y>Be)}function pX(f){return f.every(s=>s.x<0)||f.every(s=>s.x>Be)||f.every(s=>s.y<0)||f.every(s=>s.y>Be)}let dX;Ft("FillExtrusionBucket",Fq,{omit:["layers","features"]});var s6e={get paint(){return dX=dX||new Bi({"fill-extrusion-opacity":new Zt(ee["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new sr(ee["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Zt(ee["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Zt(ee["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Pm(ee["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new sr(ee["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new sr(ee["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Zt(ee["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class l6e extends Es{constructor(s){super(s,s6e)}createBucket(s){return new Fq(s)}queryRadius(){return TM(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:s,feature:h,featureState:d,geometry:y,transform:E,pixelsToTileUnits:S,pixelPosMatrix:M}){let R=IM(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-E.bearingInRadians,S),N=this.paint.get("fill-extrusion-height").evaluate(h,d),z=this.paint.get("fill-extrusion-base").evaluate(h,d),V=function(K,Q,re){let ce=[];for(let me of K){let Oe=[me.x,me.y,0,1];Le(Oe,Oe,Q),ce.push(new T(Oe[0]/Oe[3],Oe[1]/Oe[3]))}return ce}(R,M),W=function(K,Q,re,ce){let me=[],Oe=[],we=ce[8]*Q,Y=ce[9]*Q,le=ce[10]*Q,Ee=ce[11]*Q,Ve=ce[8]*re,ut=ce[9]*re,Ze=ce[10]*re,Je=ce[11]*re;for(let dt of K){let ct=[],vt=[];for(let rt of dt){let zt=rt.x,or=rt.y,tr=ce[0]*zt+ce[4]*or+ce[12],Wt=ce[1]*zt+ce[5]*or+ce[13],Hr=ce[2]*zt+ce[6]*or+ce[14],vi=ce[3]*zt+ce[7]*or+ce[15],Ji=Hr+le,Wo=vi+Ee,ll=tr+Ve,ts=Wt+ut,Co=Hr+Ze,si=vi+Je,ho=new T((tr+we)/Wo,(Wt+Y)/Wo);ho.z=Ji/Wo,ct.push(ho);let Po=new T(ll/si,ts/si);Po.z=Co/si,vt.push(Po)}me.push(ct),Oe.push(vt)}return[me,Oe]}(y,z,N,M);return function(K,Q,re){let ce=1/0;z7(re,Q)&&(ce=mX(re,Q[0]));for(let me=0;me<Q.length;me++){let Oe=Q[me],we=K[me];for(let Y=0;Y<Oe.length-1;Y++){let le=Oe[Y],Ee=[le,Oe[Y+1],we[Y+1],we[Y],le];F7(re,Ee)&&(ce=Math.min(ce,mX(re,Ee)))}}return ce!==1/0&&ce}(W[0],W[1],V)}}function $b(f,s){return f.x*s.x+f.y*s.y}function mX(f,s){if(f.length===1){let h=0,d=s[h++],y;for(;!y||d.equals(y);)if(y=s[h++],!y)return 1/0;for(;h<s.length;h++){let E=s[h],S=f[0],M=y.sub(d),R=E.sub(d),N=S.sub(d),z=$b(M,M),V=$b(M,R),W=$b(R,R),K=$b(N,M),Q=$b(N,R),re=z*W-V*V,ce=(W*K-V*Q)/re,me=(z*Q-V*K)/re,Oe=d.z*(1-ce-me)+y.z*ce+E.z*me;if(isFinite(Oe))return Oe}return 1/0}{let h=1/0;for(let d of s)h=Math.min(h,d.z);return h}}let u6e=ni([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:c6e}=u6e,h6e=ni([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:f6e}=h6e,p6e=Vb.VectorTileFeature.types,d6e=Math.cos(Math.PI/180*37.5),gX=Math.pow(2,14)/.5;class zq{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new Ht,this.layoutVertexArray2=new Cr,this.indexArray=new sn,this.programConfigurations=new Mc(s.layers,s.zoom),this.segments=new ln,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,d){this.hasPattern=Pq("line",this.layers,h);let y=this.layers[0].layout.get("line-sort-key"),E=!y.isConstant(),S=[];for(let{feature:M,id:R,index:N,sourceLayerIndex:z}of s){let V=this.layers[0]._featureFilter.needGeometry,W=km(M,V);if(!this.layers[0]._featureFilter.filter(new Gn(this.zoom),W,d))continue;let K=E?y.evaluate(W,{},d):void 0,Q={id:R,properties:M.properties,type:M.type,sourceLayerIndex:z,index:N,geometry:V?W.geometry:Nm(M),patterns:{},sortKey:K};S.push(Q)}E&&S.sort((M,R)=>M.sortKey-R.sortKey);for(let M of S){let{geometry:R,index:N,sourceLayerIndex:z}=M;if(this.hasPattern){let V=Rq("line",this.layers,M,this.zoom,h);this.patternFeatures.push(V)}else this.addFeature(M,R,N,d,{},h.subdivisionGranularity);h.featureIndex.insert(s[N].feature,R,N,z,this.index)}}update(s,h,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,d)}addFeatures(s,h,d){for(let y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,h,d,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,f6e)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,c6e),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,h,d,y,E,S){let M=this.layers[0].layout,R=M.get("line-join").evaluate(s,{}),N=M.get("line-cap"),z=M.get("line-miter-limit"),V=M.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(let W of h)this.addLine(W,s,R,N,z,V,y,S);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,E,y)}addLine(s,h,d,y,E,S,M,R){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,s=Fm(s,M?R.line.getGranularityForZoomLevel(M.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let we=0;we<s.length-1;we++)this.totalDistance+=s[we].dist(s[we+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let N=p6e[h.type]==="Polygon",z=s.length;for(;z>=2&&s[z-1].equals(s[z-2]);)z--;let V=0;for(;V<z-1&&s[V].equals(s[V+1]);)V++;if(z<(N?3:2))return;d==="bevel"&&(E=1.05);let W=this.overscaling<=16?15*Be/(512*this.overscaling):0,K=this.segments.prepareSegment(10*z,this.layoutVertexArray,this.indexArray),Q,re,ce,me,Oe;this.e1=this.e2=-1,N&&(Q=s[z-2],Oe=s[V].sub(Q)._unit()._perp());for(let we=V;we<z;we++){if(ce=we===z-1?N?s[V+1]:void 0:s[we+1],ce&&s[we].equals(ce))continue;Oe&&(me=Oe),Q&&(re=Q),Q=s[we],Oe=ce?ce.sub(Q)._unit()._perp():me,me=me||Oe;let Y=me.add(Oe);Y.x===0&&Y.y===0||Y._unit();let le=me.x*Oe.x+me.y*Oe.y,Ee=Y.x*Oe.x+Y.y*Oe.y,Ve=Ee!==0?1/Ee:1/0,ut=2*Math.sqrt(2-2*Ee),Ze=Ee<d6e&&re&&ce,Je=me.x*Oe.y-me.y*Oe.x>0;if(Ze&&we>V){let vt=Q.dist(re);if(vt>2*W){let rt=Q.sub(Q.sub(re)._mult(W/vt)._round());this.updateDistance(re,rt),this.addCurrentVertex(rt,me,0,0,K),re=rt}}let dt=re&&ce,ct=dt?d:N?"butt":y;if(dt&&ct==="round"&&(Ve<S?ct="miter":Ve<=2&&(ct="fakeround")),ct==="miter"&&Ve>E&&(ct="bevel"),ct==="bevel"&&(Ve>2&&(ct="flipbevel"),Ve<E&&(ct="miter")),re&&this.updateDistance(re,Q),ct==="miter")Y._mult(Ve),this.addCurrentVertex(Q,Y,0,0,K);else if(ct==="flipbevel"){if(Ve>100)Y=Oe.mult(-1);else{let vt=Ve*me.add(Oe).mag()/me.sub(Oe).mag();Y._perp()._mult(vt*(Je?-1:1))}this.addCurrentVertex(Q,Y,0,0,K),this.addCurrentVertex(Q,Y.mult(-1),0,0,K)}else if(ct==="bevel"||ct==="fakeround"){let vt=-Math.sqrt(Ve*Ve-1),rt=Je?vt:0,zt=Je?0:vt;if(re&&this.addCurrentVertex(Q,me,rt,zt,K),ct==="fakeround"){let or=Math.round(180*ut/Math.PI/20);for(let tr=1;tr<or;tr++){let Wt=tr/or;if(Wt!==.5){let vi=Wt-.5;Wt+=Wt*vi*(Wt-1)*((1.0904+le*(le*(3.55645-1.43519*le)-3.2452))*vi*vi+(.848013+le*(.215638*le-1.06021)))}let Hr=Oe.sub(me)._mult(Wt)._add(me)._unit()._mult(Je?-1:1);this.addHalfVertex(Q,Hr.x,Hr.y,!1,Je,0,K)}}ce&&this.addCurrentVertex(Q,Oe,-rt,-zt,K)}else if(ct==="butt")this.addCurrentVertex(Q,Y,0,0,K);else if(ct==="square"){let vt=re?1:-1;this.addCurrentVertex(Q,Y,vt,vt,K)}else ct==="round"&&(re&&(this.addCurrentVertex(Q,me,0,0,K),this.addCurrentVertex(Q,me,1,1,K,!0)),ce&&(this.addCurrentVertex(Q,Oe,-1,-1,K,!0),this.addCurrentVertex(Q,Oe,0,0,K)));if(Ze&&we<z-1){let vt=Q.dist(ce);if(vt>2*W){let rt=Q.add(ce.sub(Q)._mult(W/vt)._round());this.updateDistance(Q,rt),this.addCurrentVertex(rt,Oe,0,0,K),Q=rt}}}}addCurrentVertex(s,h,d,y,E,S=!1){let M=h.y*y-h.x,R=-h.y-h.x*y;this.addHalfVertex(s,h.x+h.y*d,h.y-h.x*d,S,!1,d,E),this.addHalfVertex(s,M,R,S,!0,-y,E),this.distance>gX/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,h,d,y,E,S))}addHalfVertex({x:s,y:h},d,y,E,S,M,R){let N=.5*(this.lineClips?this.scaledDistance*(gX-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(E?1:0),(h<<1)+(S?1:0),Math.round(63*d)+128,Math.round(63*y)+128,1+(M===0?0:M<0?-1:1)|(63&N)<<2,N>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let z=R.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,z,this.e2),R.primitiveLength++),S?this.e2=z:this.e1=z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,h){this.distance+=s.dist(h),this.updateScaledDistance()}}let vX,yX;Ft("LineBucket",zq,{omit:["layers","patternFeatures"]});var _X={get paint(){return yX=yX||new Bi({"line-opacity":new sr(ee.paint_line["line-opacity"]),"line-color":new sr(ee.paint_line["line-color"]),"line-translate":new Zt(ee.paint_line["line-translate"]),"line-translate-anchor":new Zt(ee.paint_line["line-translate-anchor"]),"line-width":new sr(ee.paint_line["line-width"]),"line-gap-width":new sr(ee.paint_line["line-gap-width"]),"line-offset":new sr(ee.paint_line["line-offset"]),"line-blur":new sr(ee.paint_line["line-blur"]),"line-dasharray":new Mb(ee.paint_line["line-dasharray"]),"line-pattern":new Pm(ee.paint_line["line-pattern"]),"line-gradient":new Ab(ee.paint_line["line-gradient"])})},get layout(){return vX=vX||new Bi({"line-cap":new Zt(ee.layout_line["line-cap"]),"line-join":new sr(ee.layout_line["line-join"]),"line-miter-limit":new Zt(ee.layout_line["line-miter-limit"]),"line-round-limit":new Zt(ee.layout_line["line-round-limit"]),"line-sort-key":new sr(ee.layout_line["line-sort-key"])})}};class m6e extends sr{possiblyEvaluate(s,h){return h=new Gn(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(s,h)}evaluate(s,h,d,y){return h=Fe({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(s,h,d,y)}}let RM;class g6e extends Es{constructor(s){super(s,_X),this.gradientVersion=0,RM||(RM=new m6e(_X.paint.properties["line-width"].specification),RM.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){let h=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof _c,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,h){super.recalculate(s,h),this.paint._values["line-floorwidth"]=RM.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new zq(s)}queryRadius(s){let h=s,d=xX(Nb("line-width",this,h),Nb("line-gap-width",this,h)),y=Nb("line-offset",this,h);return d/2+Math.abs(y)+TM(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:s,feature:h,featureState:d,geometry:y,transform:E,pixelsToTileUnits:S}){let M=IM(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-E.bearingInRadians,S),R=S/2*xX(this.paint.get("line-width").evaluate(h,d),this.paint.get("line-gap-width").evaluate(h,d)),N=this.paint.get("line-offset").evaluate(h,d);return N&&(y=function(z,V){let W=[];for(let K=0;K<z.length;K++){let Q=z[K],re=[];for(let ce=0;ce<Q.length;ce++){let me=Q[ce-1],Oe=Q[ce],we=Q[ce+1],Y=ce===0?new T(0,0):Oe.sub(me)._unit()._perp(),le=ce===Q.length-1?new T(0,0):we.sub(Oe)._unit()._perp(),Ee=Y._add(le)._unit(),Ve=Ee.x*le.x+Ee.y*le.y;Ve!==0&&Ee._mult(1/Ve),re.push(Ee._mult(V)._add(Oe))}W.push(re)}return W}(y,N*S)),function(z,V,W){for(let K=0;K<V.length;K++){let Q=V[K];if(z.length>=3){for(let re=0;re<Q.length;re++)if(qm(z,Q[re]))return!0}if(RGe(z,Q,W))return!0}return!1}(M,y,R)}isTileClipped(){return!0}}function xX(f,s){return s>0?s+2*f:f}let v6e=ni([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),y6e=ni([{name:"a_projected_pos",components:3,type:"Float32"}],4);ni([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let _6e=ni([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ni([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let bX=ni([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),x6e=ni([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function b6e(f,s,h){return f.sections.forEach(d=>{d.text=function(y,E,S){let M=E.layout.get("text-transform").evaluate(S,{});return M==="uppercase"?y=y.toLocaleUpperCase():M==="lowercase"&&(y=y.toLocaleLowerCase()),Pu.applyArabicShaping&&(y=Pu.applyArabicShaping(y)),y}(d.text,s,h)}),f}ni([{name:"triangle",components:3,type:"Uint16"}]),ni([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ni([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ni([{type:"Float32",name:"offsetX"}]),ni([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ni([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let Hb={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var wX,Bq,EX,Qi=24,Uq={};function w6e(){return wX||(wX=1,Uq.read=function(f,s,h,d,y){var E,S,M=8*y-d-1,R=(1<<M)-1,N=R>>1,z=-7,V=h?y-1:0,W=h?-1:1,K=f[s+V];for(V+=W,E=K&(1<<-z)-1,K>>=-z,z+=M;z>0;E=256*E+f[s+V],V+=W,z-=8);for(S=E&(1<<-z)-1,E>>=-z,z+=d;z>0;S=256*S+f[s+V],V+=W,z-=8);if(E===0)E=1-N;else{if(E===R)return S?NaN:1/0*(K?-1:1);S+=Math.pow(2,d),E-=N}return(K?-1:1)*S*Math.pow(2,E-d)},Uq.write=function(f,s,h,d,y,E){var S,M,R,N=8*E-y-1,z=(1<<N)-1,V=z>>1,W=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,K=d?0:E-1,Q=d?1:-1,re=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(M=isNaN(s)?1:0,S=z):(S=Math.floor(Math.log(s)/Math.LN2),s*(R=Math.pow(2,-S))<1&&(S--,R*=2),(s+=S+V>=1?W/R:W*Math.pow(2,1-V))*R>=2&&(S++,R/=2),S+V>=z?(M=0,S=z):S+V>=1?(M=(s*R-1)*Math.pow(2,y),S+=V):(M=s*Math.pow(2,V-1)*Math.pow(2,y),S=0));y>=8;f[h+K]=255&M,K+=Q,M/=256,y-=8);for(S=S<<y|M,N+=y;N>0;f[h+K]=255&S,K+=Q,S/=256,N-=8);f[h+K-Q]|=128*re}),Uq}function SX(){if(EX)return Bq;EX=1,Bq=s;var f=w6e();function s(Y){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Y)?Y:new Uint8Array(Y||0),this.pos=0,this.type=0,this.length=this.buf.length}s.Varint=0,s.Fixed64=1,s.Bytes=2,s.Fixed32=5;var h=4294967296,d=1/h,y=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");function E(Y){return Y.type===s.Bytes?Y.readVarint()+Y.pos:Y.pos+1}function S(Y,le,Ee){return Ee?4294967296*le+(Y>>>0):4294967296*(le>>>0)+(Y>>>0)}function M(Y,le,Ee){var Ve=le<=16383?1:le<=2097151?2:le<=268435455?3:Math.floor(Math.log(le)/(7*Math.LN2));Ee.realloc(Ve);for(var ut=Ee.pos-1;ut>=Y;ut--)Ee.buf[ut+Ve]=Ee.buf[ut]}function R(Y,le){for(var Ee=0;Ee<Y.length;Ee++)le.writeVarint(Y[Ee])}function N(Y,le){for(var Ee=0;Ee<Y.length;Ee++)le.writeSVarint(Y[Ee])}function z(Y,le){for(var Ee=0;Ee<Y.length;Ee++)le.writeFloat(Y[Ee])}function V(Y,le){for(var Ee=0;Ee<Y.length;Ee++)le.writeDouble(Y[Ee])}function W(Y,le){for(var Ee=0;Ee<Y.length;Ee++)le.writeBoolean(Y[Ee])}function K(Y,le){for(var Ee=0;Ee<Y.length;Ee++)le.writeFixed32(Y[Ee])}function Q(Y,le){for(var Ee=0;Ee<Y.length;Ee++)le.writeSFixed32(Y[Ee])}function re(Y,le){for(var Ee=0;Ee<Y.length;Ee++)le.writeFixed64(Y[Ee])}function ce(Y,le){for(var Ee=0;Ee<Y.length;Ee++)le.writeSFixed64(Y[Ee])}function me(Y,le){return(Y[le]|Y[le+1]<<8|Y[le+2]<<16)+16777216*Y[le+3]}function Oe(Y,le,Ee){Y[Ee]=le,Y[Ee+1]=le>>>8,Y[Ee+2]=le>>>16,Y[Ee+3]=le>>>24}function we(Y,le){return(Y[le]|Y[le+1]<<8|Y[le+2]<<16)+(Y[le+3]<<24)}return s.prototype={destroy:function(){this.buf=null},readFields:function(Y,le,Ee){for(Ee=Ee||this.length;this.pos<Ee;){var Ve=this.readVarint(),ut=Ve>>3,Ze=this.pos;this.type=7&Ve,Y(ut,le,this),this.pos===Ze&&this.skip(Ve)}return le},readMessage:function(Y,le){return this.readFields(Y,le,this.readVarint()+this.pos)},readFixed32:function(){var Y=me(this.buf,this.pos);return this.pos+=4,Y},readSFixed32:function(){var Y=we(this.buf,this.pos);return this.pos+=4,Y},readFixed64:function(){var Y=me(this.buf,this.pos)+me(this.buf,this.pos+4)*h;return this.pos+=8,Y},readSFixed64:function(){var Y=me(this.buf,this.pos)+we(this.buf,this.pos+4)*h;return this.pos+=8,Y},readFloat:function(){var Y=f.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Y},readDouble:function(){var Y=f.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Y},readVarint:function(Y){var le,Ee,Ve=this.buf;return le=127&(Ee=Ve[this.pos++]),Ee<128?le:(le|=(127&(Ee=Ve[this.pos++]))<<7,Ee<128?le:(le|=(127&(Ee=Ve[this.pos++]))<<14,Ee<128?le:(le|=(127&(Ee=Ve[this.pos++]))<<21,Ee<128?le:function(ut,Ze,Je){var dt,ct,vt=Je.buf;if(dt=(112&(ct=vt[Je.pos++]))>>4,ct<128||(dt|=(127&(ct=vt[Je.pos++]))<<3,ct<128)||(dt|=(127&(ct=vt[Je.pos++]))<<10,ct<128)||(dt|=(127&(ct=vt[Je.pos++]))<<17,ct<128)||(dt|=(127&(ct=vt[Je.pos++]))<<24,ct<128)||(dt|=(1&(ct=vt[Je.pos++]))<<31,ct<128))return S(ut,dt,Ze);throw new Error("Expected varint not more than 10 bytes")}(le|=(15&(Ee=Ve[this.pos]))<<28,Y,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Y=this.readVarint();return Y%2==1?(Y+1)/-2:Y/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Y=this.readVarint()+this.pos,le=this.pos;return this.pos=Y,Y-le>=12&&y?function(Ee,Ve,ut){return y.decode(Ee.subarray(Ve,ut))}(this.buf,le,Y):function(Ee,Ve,ut){for(var Ze="",Je=Ve;Je<ut;){var dt,ct,vt,rt=Ee[Je],zt=null,or=rt>239?4:rt>223?3:rt>191?2:1;if(Je+or>ut)break;or===1?rt<128&&(zt=rt):or===2?(192&(dt=Ee[Je+1]))==128&&(zt=(31&rt)<<6|63&dt)<=127&&(zt=null):or===3?(ct=Ee[Je+2],(192&(dt=Ee[Je+1]))==128&&(192&ct)==128&&((zt=(15&rt)<<12|(63&dt)<<6|63&ct)<=2047||zt>=55296&&zt<=57343)&&(zt=null)):or===4&&(ct=Ee[Je+2],vt=Ee[Je+3],(192&(dt=Ee[Je+1]))==128&&(192&ct)==128&&(192&vt)==128&&((zt=(15&rt)<<18|(63&dt)<<12|(63&ct)<<6|63&vt)<=65535||zt>=1114112)&&(zt=null)),zt===null?(zt=65533,or=1):zt>65535&&(zt-=65536,Ze+=String.fromCharCode(zt>>>10&1023|55296),zt=56320|1023&zt),Ze+=String.fromCharCode(zt),Je+=or}return Ze}(this.buf,le,Y)},readBytes:function(){var Y=this.readVarint()+this.pos,le=this.buf.subarray(this.pos,Y);return this.pos=Y,le},readPackedVarint:function(Y,le){if(this.type!==s.Bytes)return Y.push(this.readVarint(le));var Ee=E(this);for(Y=Y||[];this.pos<Ee;)Y.push(this.readVarint(le));return Y},readPackedSVarint:function(Y){if(this.type!==s.Bytes)return Y.push(this.readSVarint());var le=E(this);for(Y=Y||[];this.pos<le;)Y.push(this.readSVarint());return Y},readPackedBoolean:function(Y){if(this.type!==s.Bytes)return Y.push(this.readBoolean());var le=E(this);for(Y=Y||[];this.pos<le;)Y.push(this.readBoolean());return Y},readPackedFloat:function(Y){if(this.type!==s.Bytes)return Y.push(this.readFloat());var le=E(this);for(Y=Y||[];this.pos<le;)Y.push(this.readFloat());return Y},readPackedDouble:function(Y){if(this.type!==s.Bytes)return Y.push(this.readDouble());var le=E(this);for(Y=Y||[];this.pos<le;)Y.push(this.readDouble());return Y},readPackedFixed32:function(Y){if(this.type!==s.Bytes)return Y.push(this.readFixed32());var le=E(this);for(Y=Y||[];this.pos<le;)Y.push(this.readFixed32());return Y},readPackedSFixed32:function(Y){if(this.type!==s.Bytes)return Y.push(this.readSFixed32());var le=E(this);for(Y=Y||[];this.pos<le;)Y.push(this.readSFixed32());return Y},readPackedFixed64:function(Y){if(this.type!==s.Bytes)return Y.push(this.readFixed64());var le=E(this);for(Y=Y||[];this.pos<le;)Y.push(this.readFixed64());return Y},readPackedSFixed64:function(Y){if(this.type!==s.Bytes)return Y.push(this.readSFixed64());var le=E(this);for(Y=Y||[];this.pos<le;)Y.push(this.readSFixed64());return Y},skip:function(Y){var le=7&Y;if(le===s.Varint)for(;this.buf[this.pos++]>127;);else if(le===s.Bytes)this.pos=this.readVarint()+this.pos;else if(le===s.Fixed32)this.pos+=4;else{if(le!==s.Fixed64)throw new Error("Unimplemented type: "+le);this.pos+=8}},writeTag:function(Y,le){this.writeVarint(Y<<3|le)},realloc:function(Y){for(var le=this.length||16;le<this.pos+Y;)le*=2;if(le!==this.length){var Ee=new Uint8Array(le);Ee.set(this.buf),this.buf=Ee,this.length=le}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Y){this.realloc(4),Oe(this.buf,Y,this.pos),this.pos+=4},writeSFixed32:function(Y){this.realloc(4),Oe(this.buf,Y,this.pos),this.pos+=4},writeFixed64:function(Y){this.realloc(8),Oe(this.buf,-1&Y,this.pos),Oe(this.buf,Math.floor(Y*d),this.pos+4),this.pos+=8},writeSFixed64:function(Y){this.realloc(8),Oe(this.buf,-1&Y,this.pos),Oe(this.buf,Math.floor(Y*d),this.pos+4),this.pos+=8},writeVarint:function(Y){(Y=+Y||0)>268435455||Y<0?function(le,Ee){var Ve,ut;if(le>=0?(Ve=le%4294967296|0,ut=le/4294967296|0):(ut=~(-le/4294967296),4294967295^(Ve=~(-le%4294967296))?Ve=Ve+1|0:(Ve=0,ut=ut+1|0)),le>=18446744073709552e3||le<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ee.realloc(10),function(Ze,Je,dt){dt.buf[dt.pos++]=127&Ze|128,Ze>>>=7,dt.buf[dt.pos++]=127&Ze|128,Ze>>>=7,dt.buf[dt.pos++]=127&Ze|128,Ze>>>=7,dt.buf[dt.pos++]=127&Ze|128,dt.buf[dt.pos]=127&(Ze>>>=7)}(Ve,0,Ee),function(Ze,Je){var dt=(7&Ze)<<4;Je.buf[Je.pos++]|=dt|((Ze>>>=3)?128:0),Ze&&(Je.buf[Je.pos++]=127&Ze|((Ze>>>=7)?128:0),Ze&&(Je.buf[Je.pos++]=127&Ze|((Ze>>>=7)?128:0),Ze&&(Je.buf[Je.pos++]=127&Ze|((Ze>>>=7)?128:0),Ze&&(Je.buf[Je.pos++]=127&Ze|((Ze>>>=7)?128:0),Ze&&(Je.buf[Je.pos++]=127&Ze)))))}(ut,Ee)}(Y,this):(this.realloc(4),this.buf[this.pos++]=127&Y|(Y>127?128:0),Y<=127||(this.buf[this.pos++]=127&(Y>>>=7)|(Y>127?128:0),Y<=127||(this.buf[this.pos++]=127&(Y>>>=7)|(Y>127?128:0),Y<=127||(this.buf[this.pos++]=Y>>>7&127))))},writeSVarint:function(Y){this.writeVarint(Y<0?2*-Y-1:2*Y)},writeBoolean:function(Y){this.writeVarint(!!Y)},writeString:function(Y){Y=String(Y),this.realloc(4*Y.length),this.pos++;var le=this.pos;this.pos=function(Ve,ut,Ze){for(var Je,dt,ct=0;ct<ut.length;ct++){if((Je=ut.charCodeAt(ct))>55295&&Je<57344){if(!dt){Je>56319||ct+1===ut.length?(Ve[Ze++]=239,Ve[Ze++]=191,Ve[Ze++]=189):dt=Je;continue}if(Je<56320){Ve[Ze++]=239,Ve[Ze++]=191,Ve[Ze++]=189,dt=Je;continue}Je=dt-55296<<10|Je-56320|65536,dt=null}else dt&&(Ve[Ze++]=239,Ve[Ze++]=191,Ve[Ze++]=189,dt=null);Je<128?Ve[Ze++]=Je:(Je<2048?Ve[Ze++]=Je>>6|192:(Je<65536?Ve[Ze++]=Je>>12|224:(Ve[Ze++]=Je>>18|240,Ve[Ze++]=Je>>12&63|128),Ve[Ze++]=Je>>6&63|128),Ve[Ze++]=63&Je|128)}return Ze}(this.buf,Y,this.pos);var Ee=this.pos-le;Ee>=128&&M(le,Ee,this),this.pos=le-1,this.writeVarint(Ee),this.pos+=Ee},writeFloat:function(Y){this.realloc(4),f.write(this.buf,Y,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Y){this.realloc(8),f.write(this.buf,Y,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Y){var le=Y.length;this.writeVarint(le),this.realloc(le);for(var Ee=0;Ee<le;Ee++)this.buf[this.pos++]=Y[Ee]},writeRawMessage:function(Y,le){this.pos++;var Ee=this.pos;Y(le,this);var Ve=this.pos-Ee;Ve>=128&&M(Ee,Ve,this),this.pos=Ee-1,this.writeVarint(Ve),this.pos+=Ve},writeMessage:function(Y,le,Ee){this.writeTag(Y,s.Bytes),this.writeRawMessage(le,Ee)},writePackedVarint:function(Y,le){le.length&&this.writeMessage(Y,R,le)},writePackedSVarint:function(Y,le){le.length&&this.writeMessage(Y,N,le)},writePackedBoolean:function(Y,le){le.length&&this.writeMessage(Y,W,le)},writePackedFloat:function(Y,le){le.length&&this.writeMessage(Y,z,le)},writePackedDouble:function(Y,le){le.length&&this.writeMessage(Y,V,le)},writePackedFixed32:function(Y,le){le.length&&this.writeMessage(Y,K,le)},writePackedSFixed32:function(Y,le){le.length&&this.writeMessage(Y,Q,le)},writePackedFixed64:function(Y,le){le.length&&this.writeMessage(Y,re,le)},writePackedSFixed64:function(Y,le){le.length&&this.writeMessage(Y,ce,le)},writeBytesField:function(Y,le){this.writeTag(Y,s.Bytes),this.writeBytes(le)},writeFixed32Field:function(Y,le){this.writeTag(Y,s.Fixed32),this.writeFixed32(le)},writeSFixed32Field:function(Y,le){this.writeTag(Y,s.Fixed32),this.writeSFixed32(le)},writeFixed64Field:function(Y,le){this.writeTag(Y,s.Fixed64),this.writeFixed64(le)},writeSFixed64Field:function(Y,le){this.writeTag(Y,s.Fixed64),this.writeSFixed64(le)},writeVarintField:function(Y,le){this.writeTag(Y,s.Varint),this.writeVarint(le)},writeSVarintField:function(Y,le){this.writeTag(Y,s.Varint),this.writeSVarint(le)},writeStringField:function(Y,le){this.writeTag(Y,s.Bytes),this.writeString(le)},writeFloatField:function(Y,le){this.writeTag(Y,s.Fixed32),this.writeFloat(le)},writeDoubleField:function(Y,le){this.writeTag(Y,s.Fixed64),this.writeDouble(le)},writeBooleanField:function(Y,le){this.writeVarintField(Y,!!le)}},Bq}var Vq=l(SX());let Gq=3;function E6e(f,s,h){f===1&&h.readMessage(S6e,s)}function S6e(f,s,h){if(f===3){let{id:d,bitmap:y,width:E,height:S,left:M,top:R,advance:N}=h.readMessage(T6e,{});s.push({id:d,bitmap:new kb({width:E+2*Gq,height:S+2*Gq},y),metrics:{width:E,height:S,left:M,top:R,advance:N}})}}function T6e(f,s,h){f===1?s.id=h.readVarint():f===2?s.bitmap=h.readBytes():f===3?s.width=h.readVarint():f===4?s.height=h.readVarint():f===5?s.left=h.readSVarint():f===6?s.top=h.readSVarint():f===7&&(s.advance=h.readVarint())}let I6e=Gq;function TX(f){let s=0,h=0;for(let S of f)s+=S.w*S.h,h=Math.max(h,S.w);f.sort((S,M)=>M.h-S.h);let d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),h),h:1/0}],y=0,E=0;for(let S of f)for(let M=d.length-1;M>=0;M--){let R=d[M];if(!(S.w>R.w||S.h>R.h)){if(S.x=R.x,S.y=R.y,E=Math.max(E,S.y+S.h),y=Math.max(y,S.x+S.w),S.w===R.w&&S.h===R.h){let N=d.pop();M<d.length&&(d[M]=N)}else S.h===R.h?(R.x+=S.w,R.w-=S.w):S.w===R.w?(R.y+=S.h,R.h-=S.h):(d.push({x:R.x+S.w,y:R.y,w:R.w-S.w,h:S.h}),R.y+=S.h,R.h-=S.h);break}}return{w:y,h:E,fill:s/(y*E)||0}}let es=1;class $q{constructor(s,{pixelRatio:h,version:d,stretchX:y,stretchY:E,content:S,textFitWidth:M,textFitHeight:R}){this.paddedRect=s,this.pixelRatio=h,this.stretchX=y,this.stretchY=E,this.content=S,this.version=d,this.textFitWidth=M,this.textFitHeight=R}get tl(){return[this.paddedRect.x+es,this.paddedRect.y+es]}get br(){return[this.paddedRect.x+this.paddedRect.w-es,this.paddedRect.y+this.paddedRect.h-es]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*es)/this.pixelRatio,(this.paddedRect.h-2*es)/this.pixelRatio]}}class IX{constructor(s,h){let d={},y={};this.haveRenderCallbacks=[];let E=[];this.addImages(s,d,E),this.addImages(h,y,E);let{w:S,h:M}=TX(E),R=new al({width:S||1,height:M||1});for(let N in s){let z=s[N],V=d[N].paddedRect;al.copy(z.data,R,{x:0,y:0},{x:V.x+es,y:V.y+es},z.data)}for(let N in h){let z=h[N],V=y[N].paddedRect,W=V.x+es,K=V.y+es,Q=z.data.width,re=z.data.height;al.copy(z.data,R,{x:0,y:0},{x:W,y:K},z.data),al.copy(z.data,R,{x:0,y:re-1},{x:W,y:K-1},{width:Q,height:1}),al.copy(z.data,R,{x:0,y:0},{x:W,y:K+re},{width:Q,height:1}),al.copy(z.data,R,{x:Q-1,y:0},{x:W-1,y:K},{width:1,height:re}),al.copy(z.data,R,{x:0,y:0},{x:W+Q,y:K},{width:1,height:re})}this.image=R,this.iconPositions=d,this.patternPositions=y}addImages(s,h,d){for(let y in s){let E=s[y],S={x:0,y:0,w:E.data.width+2*es,h:E.data.height+2*es};d.push(S),h[y]=new $q(S,E),E.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(s,h){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let d in s.updatedImages)this.patchUpdatedImage(this.iconPositions[d],s.getImage(d),h),this.patchUpdatedImage(this.patternPositions[d],s.getImage(d),h)}patchUpdatedImage(s,h,d){if(!s||!h||s.version===h.version)return;s.version=h.version;let[y,E]=s.tl;d.update(h.data,void 0,{x:y,y:E})}}var fp;Ft("ImagePosition",$q),Ft("ImageAtlas",IX),i.al=void 0,(fp=i.al||(i.al={}))[fp.none=0]="none",fp[fp.horizontal=1]="horizontal",fp[fp.vertical=2]="vertical",fp[fp.horizontalOnly=3]="horizontalOnly";let OM=-17;class Wb{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(s,h,d){let y=new Wb;return y.scale=s||1,y.fontStack=h,y.verticalAlign=d||"bottom",y}static forImage(s,h){let d=new Wb;return d.imageName=s,d.verticalAlign=h||"bottom",d}}class ay{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,h){let d=new ay;for(let y=0;y<s.sections.length;y++){let E=s.sections[y];E.image?d.addImageSection(E):d.addTextSection(E,h)}return d}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let h="";for(let d=0;d<s.length;d++){let y=s.charCodeAt(d+1)||null,E=s.charCodeAt(d-1)||null;h+=y&&Am(y)&&!Hb[s[d+1]]||E&&Am(E)&&!Hb[s[d-1]]||!Hb[s[d]]?s[d]:Hb[s[d]]}return h}(this.text)}trim(){let s=0;for(let d=0;d<this.text.length&&DM[this.text.charCodeAt(d)];d++)s++;let h=this.text.length;for(let d=this.text.length-1;d>=0&&d>=s&&DM[this.text.charCodeAt(d)];d--)h--;this.text=this.text.substring(s,h),this.sectionIndex=this.sectionIndex.slice(s,h)}substring(s,h){let d=new ay;return d.text=this.text.substring(s,h),d.sectionIndex=this.sectionIndex.slice(s,h),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,h)=>Math.max(s,this.sections[h].scale),0)}getMaxImageSize(s){let h=0,d=0;for(let y=0;y<this.length();y++){let E=this.getSection(y);if(E.imageName){let S=s[E.imageName];if(!S)continue;let M=S.displaySize;h=Math.max(h,M[0]),d=Math.max(d,M[1])}}return{maxImageWidth:h,maxImageHeight:d}}addTextSection(s,h){this.text+=s.text,this.sections.push(Wb.forText(s.scale,s.fontStack||h,s.verticalAlign));let d=this.sections.length-1;for(let y=0;y<s.text.length;++y)this.sectionIndex.push(d)}addImageSection(s){let h=s.image?s.image.name:"";if(h.length===0)return void Nt("Can't add FormattedSection with an empty image.");let d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Wb.forImage(h,s.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Nt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function LM(f,s,h,d,y,E,S,M,R,N,z,V,W,K,Q){let re=ay.fromFeature(f,y),ce;V===i.al.vertical&&re.verticalizePunctuation();let{processBidirectionalText:me,processStyledBidirectionalText:Oe}=Pu;if(me&&re.sections.length===1){ce=[];let le=me(re.toString(),Hq(re,N,E,s,d,K));for(let Ee of le){let Ve=new ay;Ve.text=Ee,Ve.sections=re.sections;for(let ut=0;ut<Ee.length;ut++)Ve.sectionIndex.push(0);ce.push(Ve)}}else if(Oe){ce=[];let le=Oe(re.text,re.sectionIndex,Hq(re,N,E,s,d,K));for(let Ee of le){let Ve=new ay;Ve.text=Ee[0],Ve.sectionIndex=Ee[1],Ve.sections=re.sections,ce.push(Ve)}}else ce=function(le,Ee){let Ve=[],ut=le.text,Ze=0;for(let Je of Ee)Ve.push(le.substring(Ze,Je)),Ze=Je;return Ze<ut.length&&Ve.push(le.substring(Ze,ut.length)),Ve}(re,Hq(re,N,E,s,d,K));let we=[],Y={positionedLines:we,text:re.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:V,iconsInText:!1,verticalizable:!1};return function(le,Ee,Ve,ut,Ze,Je,dt,ct,vt,rt,zt,or){let tr=0,Wt=0,Hr=0,vi=0,Ji=ct==="right"?1:ct==="left"?0:.5,Wo=Qi/or,ll=0;for(let si of Ze){si.trim();let ho=si.getMaxScale(),Po={positionedGlyphs:[],lineOffset:0};le.positionedLines[ll]=Po;let Ro=Po.positionedGlyphs,Ma=0;if(!si.length()){Wt+=Je,++ll;continue}let ul=P6e(ut,si,Wo);for(let rs=0;rs<si.length();rs++){let eo=si.getSection(rs),po=si.getSectionIndex(rs),mo=si.getCharCode(rs),Gi=R6e(vt,zt,mo),Hn;if(eo.imageName){if(le.iconsInText=!0,eo.scale=eo.scale*Wo,Hn=L6e(eo,Gi,ho,ul,ut),!Hn)continue;Ma=Math.max(Ma,Hn.imageOffset)}else if(Hn=O6e(eo,mo,Gi,ul,Ee,Ve),!Hn)continue;let{rect:Lu,metrics:cy,baselineOffset:Du}=Hn;Ro.push({glyph:mo,imageName:eo.imageName,x:tr,y:Wt+Du+OM,vertical:Gi,scale:eo.scale,fontStack:eo.fontStack,sectionIndex:po,metrics:cy,rect:Lu}),Gi?(le.verticalizable=!0,tr+=(eo.imageName?cy.advance:Qi)*eo.scale+rt):tr+=cy.advance*eo.scale+rt}Ro.length!==0&&(Hr=Math.max(tr-rt,Hr),D6e(Ro,0,Ro.length-1,Ji)),tr=0,Po.lineOffset=Math.max(Ma,(ho-1)*Qi);let fo=Je*ho+Ma;Wt+=fo,vi=Math.max(fo,vi),++ll}let{horizontalAlign:ts,verticalAlign:Co}=Wq(dt);(function(si,ho,Po,Ro,Ma,ul,fo,rs,eo){let po=(ho-Po)*Ma,mo=0;mo=ul!==fo?-rs*Ro-OM:-Ro*eo*fo+.5*fo;for(let Gi of si)for(let Hn of Gi.positionedGlyphs)Hn.x+=po,Hn.y+=mo})(le.positionedLines,Ji,ts,Co,Hr,vi,Je,Wt,Ze.length),le.top+=-Co*Wt,le.bottom=le.top+Wt,le.left+=-ts*Hr,le.right=le.left+Hr}(Y,s,h,d,ce,S,M,R,V,N,W,Q),!function(le){for(let Ee of le)if(Ee.positionedGlyphs.length!==0)return!1;return!0}(we)&&Y}let DM={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},M6e={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},A6e={40:!0};function MX(f,s,h,d,y,E){if(s.imageName){let S=d[s.imageName];return S?S.displaySize[0]*s.scale*Qi/E+y:0}{let S=h[s.fontStack],M=S&&S[f];return M?M.metrics.advance*s.scale+y:0}}function AX(f,s,h,d){let y=Math.pow(f-s,2);return d?f<s?y/2:2*y:y+Math.abs(h)*h}function C6e(f,s,h){let d=0;return f===10&&(d-=1e4),h&&(d+=150),f!==40&&f!==65288||(d+=50),s!==41&&s!==65289||(d+=50),d}function CX(f,s,h,d,y,E){let S=null,M=AX(s,h,y,E);for(let R of d){let N=AX(s-R.x,h,y,E)+R.badness;N<=M&&(S=R,M=N)}return{index:f,x:s,priorBreak:S,badness:M}}function PX(f){return f?PX(f.priorBreak).concat(f.index):[]}function Hq(f,s,h,d,y,E){if(!f)return[];let S=[],M=function(V,W,K,Q,re,ce){let me=0;for(let Oe=0;Oe<V.length();Oe++){let we=V.getSection(Oe);me+=MX(V.getCharCode(Oe),we,Q,re,W,ce)}return me/Math.max(1,Math.ceil(me/K))}(f,s,h,d,y,E),R=f.text.indexOf("\u200B")>=0,N=0;for(let V=0;V<f.length();V++){let W=f.getSection(V),K=f.getCharCode(V);if(DM[K]||(N+=MX(K,W,d,y,s,E)),V<f.length()-1){let Q=!((z=K)<11904)&&(!!Br["CJK Compatibility Forms"](z)||!!Br["CJK Compatibility"](z)||!!Br["CJK Strokes"](z)||!!Br["CJK Symbols and Punctuation"](z)||!!Br["Enclosed CJK Letters and Months"](z)||!!Br["Halfwidth and Fullwidth Forms"](z)||!!Br["Ideographic Description Characters"](z)||!!Br["Vertical Forms"](z)||Tb.test(String.fromCodePoint(z)));(M6e[K]||Q||W.imageName||V!==f.length()-2&&A6e[f.getCharCode(V+1)])&&S.push(CX(V+1,N,M,S,C6e(K,f.getCharCode(V+1),Q&&R),!1))}}var z;return PX(CX(f.length(),N,M,S,0,!0))}function Wq(f){let s=.5,h=.5;switch(f){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:s,verticalAlign:h}}function P6e(f,s,h){let d=s.getMaxScale()*Qi,{maxImageWidth:y,maxImageHeight:E}=s.getMaxImageSize(f),S=Math.max(d,E*h);return{verticalLineContentWidth:Math.max(d,y*h),horizontalLineContentHeight:S}}function RX(f){switch(f){case"top":return 0;case"center":return .5;default:return 1}}function R6e(f,s,h){return!(f===i.al.horizontal||!s&&!Qv(h)||s&&(DM[h]||(d=h,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(d)))));var d}function O6e(f,s,h,d,y,E){let S=E[f.fontStack],M=function(N,z,V,W){if(N&&N.rect)return N;let K=z[V.fontStack],Q=K&&K[W];return Q?{rect:null,metrics:Q.metrics}:null}(S&&S[s],y,f,s);if(M===null)return null;let R;if(h)R=d.verticalLineContentWidth-f.scale*Qi;else{let N=RX(f.verticalAlign);R=(d.horizontalLineContentHeight-f.scale*Qi)*N}return{rect:M.rect,metrics:M.metrics,baselineOffset:R}}function L6e(f,s,h,d,y){let E=y[f.imageName];if(!E)return null;let S=E.paddedRect,M=E.displaySize,R={width:M[0],height:M[1],left:es,top:-3,advance:s?M[1]:M[0]},N;if(s)N=d.verticalLineContentWidth-M[1]*f.scale;else{let z=RX(f.verticalAlign);N=(d.horizontalLineContentHeight-M[1]*f.scale)*z}return{rect:S,metrics:R,baselineOffset:N,imageOffset:(s?M[0]:M[1])*f.scale-Qi*h}}function D6e(f,s,h,d){if(d===0)return;let y=f[h],E=(f[h].x+y.metrics.advance*y.scale)*d;for(let S=s;S<=h;S++)f[S].x-=E}function N6e(f,s,h){let{horizontalAlign:d,verticalAlign:y}=Wq(h),E=s[0]-f.displaySize[0]*d,S=s[1]-f.displaySize[1]*y;return{image:f,top:S,bottom:S+f.displaySize[1],left:E,right:E+f.displaySize[0]}}function OX(f){var s,h;let d=f.left,y=f.top,E=f.right-d,S=f.bottom-y,M=(s=f.image.textFitWidth)!==null&&s!==void 0?s:"stretchOrShrink",R=(h=f.image.textFitHeight)!==null&&h!==void 0?h:"stretchOrShrink",N=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(R==="proportional"){if(M==="stretchOnly"&&E/S<N||M==="proportional"){let z=Math.ceil(S*N);d*=z/E,E=z}}else if(M==="proportional"&&R==="stretchOnly"&&N!==0&&E/S>N){let z=Math.ceil(E/N);y*=z/S,S=z}return{x1:d,y1:y,x2:d+E,y2:y+S}}function LX(f,s,h,d,y,E){let S=f.image,M;if(S.content){let ce=S.content,me=S.pixelRatio||1;M=[ce[0]/me,ce[1]/me,S.displaySize[0]-ce[2]/me,S.displaySize[1]-ce[3]/me]}let R=s.left*E,N=s.right*E,z,V,W,K;h==="width"||h==="both"?(K=y[0]+R-d[3],V=y[0]+N+d[1]):(K=y[0]+(R+N-S.displaySize[0])/2,V=K+S.displaySize[0]);let Q=s.top*E,re=s.bottom*E;return h==="height"||h==="both"?(z=y[1]+Q-d[0],W=y[1]+re+d[2]):(z=y[1]+(Q+re-S.displaySize[1])/2,W=z+S.displaySize[1]),{image:S,top:z,right:V,bottom:W,left:K,collisionPadding:M}}let Zb=255,Ac=128,pp=Zb*Ac;function DX(f,s){let{expression:h}=s;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new Gn(f+1))};if(h.kind==="source")return{kind:"source"};{let{zoomStops:d,interpolationType:y}=h,E=0;for(;E<d.length&&d[E]<=f;)E++;E=Math.max(0,E-1);let S=E;for(;S<d.length&&d[S]<f+1;)S++;S=Math.min(d.length-1,S);let M=d[E],R=d[S];return h.kind==="composite"?{kind:"composite",minZoom:M,maxZoom:R,interpolationType:y}:{kind:"camera",minZoom:M,maxZoom:R,minSize:h.evaluate(new Gn(M)),maxSize:h.evaluate(new Gn(R)),interpolationType:y}}}function Zq(f,s,h){let d="never",y=f.get(s);return y?d=y:f.get(h)&&(d="always"),d}let k6e=Vb.VectorTileFeature.types,q6e=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function NM(f,s,h,d,y,E,S,M,R,N,z,V,W){let K=M?Math.min(pp,Math.round(M[0])):0,Q=M?Math.min(pp,Math.round(M[1])):0;f.emplaceBack(s,h,Math.round(32*d),Math.round(32*y),E,S,(K<<1)+(R?1:0),Q,16*N,16*z,256*V,256*W)}function Yq(f,s,h){f.emplaceBack(s.x,s.y,h),f.emplaceBack(s.x,s.y,h),f.emplaceBack(s.x,s.y,h),f.emplaceBack(s.x,s.y,h)}function j6e(f){for(let s of f.sections)if(xq(s.text))return!0;return!1}class Kq{constructor(s){this.layoutVertexArray=new ii,this.indexArray=new sn,this.programConfigurations=s,this.segments=new ln,this.dynamicLayoutVertexArray=new Mn,this.opacityVertexArray=new oi,this.hasVisibleVertices=!1,this.placedSymbolArray=new Te}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,h,d,y){this.isEmpty()||(d&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,v6e.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,y6e.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,q6e,!0),this.opacityVertexBuffer.itemSize=1),(d||y)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ft("SymbolBuffers",Kq);class Xq{constructor(s,h,d){this.layoutVertexArray=new s,this.layoutAttributes=h,this.indexArray=new d,this.segments=new ln,this.collisionVertexArray=new Nn}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,_6e.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ft("CollisionBuffers",Xq);class sy{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(S=>S.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=DX(this.zoom,h["text-size"]),this.iconSizeData=DX(this.zoom,h["icon-size"]);let d=this.layers[0].layout,y=d.get("symbol-sort-key"),E=d.get("symbol-z-order");this.canOverlap=Zq(d,"text-overlap","text-allow-overlap")!=="never"||Zq(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=E!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(E==="viewport-y"||E==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(S=>i.al[S])),this.stateDependentLayerIds=this.layers.filter(S=>S.isStateDependent()).map(S=>S.id),this.sourceID=s.sourceID}createArrays(){this.text=new Kq(new Mc(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new Kq(new Mc(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new De,this.lineVertexArray=new Pe,this.symbolInstances=new Ae,this.textAnchorOffsets=new tt}calculateGlyphDependencies(s,h,d,y,E){for(let S=0;S<s.length;S++)if(h[s.charCodeAt(S)]=!0,(d||y)&&E){let M=Hb[s.charAt(S)];M&&(h[M.charCodeAt(0)]=!0)}}populate(s,h,d){let y=this.layers[0],E=y.layout,S=E.get("text-font"),M=E.get("text-field"),R=E.get("icon-image"),N=(M.value.kind!=="constant"||M.value.value instanceof Ta&&!M.value.value.isEmpty()||M.value.value.toString().length>0)&&(S.value.kind!=="constant"||S.value.value.length>0),z=R.value.kind!=="constant"||!!R.value.value||Object.keys(R.parameters).length>0,V=E.get("symbol-sort-key");if(this.features=[],!N&&!z)return;let W=h.iconDependencies,K=h.glyphDependencies,Q=h.availableImages,re=new Gn(this.zoom);for(let{feature:ce,id:me,index:Oe,sourceLayerIndex:we}of s){let Y=y._featureFilter.needGeometry,le=km(ce,Y);if(!y._featureFilter.filter(re,le,d))continue;let Ee,Ve;if(Y||(le.geometry=Nm(ce)),N){let Ze=y.getValueAndResolveTokens("text-field",le,d,Q),Je=Ta.factory(Ze),dt=this.hasRTLText=this.hasRTLText||j6e(Je);(!dt||Pu.getRTLTextPluginStatus()==="unavailable"||dt&&Pu.isParsed())&&(Ee=b6e(Je,y,le))}if(z){let Ze=y.getValueAndResolveTokens("icon-image",le,d,Q);Ve=Ze instanceof Xa?Ze:Xa.fromString(Ze)}if(!Ee&&!Ve)continue;let ut=this.sortFeaturesByKey?V.evaluate(le,{},d):void 0;if(this.features.push({id:me,text:Ee,icon:Ve,index:Oe,sourceLayerIndex:we,geometry:le.geometry,properties:ce.properties,type:k6e[ce.type],sortKey:ut}),Ve&&(W[Ve.name]=!0),Ee){let Ze=S.evaluate(le,{},d).join(","),Je=E.get("text-rotation-alignment")!=="viewport"&&E.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(i.al.vertical)>=0;for(let dt of Ee.sections)if(dt.image)W[dt.image.name]=!0;else{let ct=Xv(Ee.toString()),vt=dt.fontStack||Ze,rt=K[vt]=K[vt]||{};this.calculateGlyphDependencies(dt.text,rt,Je,this.allowVerticalPlacement,ct)}}}E.get("symbol-placement")==="line"&&(this.features=function(ce){let me={},Oe={},we=[],Y=0;function le(Ze){we.push(ce[Ze]),Y++}function Ee(Ze,Je,dt){let ct=Oe[Ze];return delete Oe[Ze],Oe[Je]=ct,we[ct].geometry[0].pop(),we[ct].geometry[0]=we[ct].geometry[0].concat(dt[0]),ct}function Ve(Ze,Je,dt){let ct=me[Je];return delete me[Je],me[Ze]=ct,we[ct].geometry[0].shift(),we[ct].geometry[0]=dt[0].concat(we[ct].geometry[0]),ct}function ut(Ze,Je,dt){let ct=dt?Je[0][Je[0].length-1]:Je[0][0];return`${Ze}:${ct.x}:${ct.y}`}for(let Ze=0;Ze<ce.length;Ze++){let Je=ce[Ze],dt=Je.geometry,ct=Je.text?Je.text.toString():null;if(!ct){le(Ze);continue}let vt=ut(ct,dt),rt=ut(ct,dt,!0);if(vt in Oe&&rt in me&&Oe[vt]!==me[rt]){let zt=Ve(vt,rt,dt),or=Ee(vt,rt,we[zt].geometry);delete me[vt],delete Oe[rt],Oe[ut(ct,we[or].geometry,!0)]=or,we[zt].geometry=null}else vt in Oe?Ee(vt,rt,dt):rt in me?Ve(vt,rt,dt):(le(Ze),me[vt]=Y-1,Oe[rt]=Y-1)}return we.filter(Ze=>Ze.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ce,me)=>ce.sortKey-me.sortKey)}update(s,h,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,h,this.layers,d),this.icon.programConfigurations.updatePaintArrays(s,h,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,h){let d=this.lineVertexArray.length;if(s.segment!==void 0){let y=s.dist(h[s.segment+1]),E=s.dist(h[s.segment]),S={};for(let M=s.segment+1;M<h.length;M++)S[M]={x:h[M].x,y:h[M].y,tileUnitDistanceFromAnchor:y},M<h.length-1&&(y+=h[M+1].dist(h[M]));for(let M=s.segment||0;M>=0;M--)S[M]={x:h[M].x,y:h[M].y,tileUnitDistanceFromAnchor:E},M>0&&(E+=h[M-1].dist(h[M]));for(let M=0;M<h.length;M++){let R=S[M];this.lineVertexArray.emplaceBack(R.x,R.y,R.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(s,h,d,y,E,S,M,R,N,z,V,W){let K=s.indexArray,Q=s.layoutVertexArray,re=s.segments.prepareSegment(4*h.length,Q,K,this.canOverlap?S.sortKey:void 0),ce=this.glyphOffsetArray.length,me=re.vertexLength,Oe=this.allowVerticalPlacement&&M===i.al.vertical?Math.PI/2:0,we=S.text&&S.text.sections;for(let Y=0;Y<h.length;Y++){let{tl:le,tr:Ee,bl:Ve,br:ut,tex:Ze,pixelOffsetTL:Je,pixelOffsetBR:dt,minFontScaleX:ct,minFontScaleY:vt,glyphOffset:rt,isSDF:zt,sectionIndex:or}=h[Y],tr=re.vertexLength,Wt=rt[1];NM(Q,R.x,R.y,le.x,Wt+le.y,Ze.x,Ze.y,d,zt,Je.x,Je.y,ct,vt),NM(Q,R.x,R.y,Ee.x,Wt+Ee.y,Ze.x+Ze.w,Ze.y,d,zt,dt.x,Je.y,ct,vt),NM(Q,R.x,R.y,Ve.x,Wt+Ve.y,Ze.x,Ze.y+Ze.h,d,zt,Je.x,dt.y,ct,vt),NM(Q,R.x,R.y,ut.x,Wt+ut.y,Ze.x+Ze.w,Ze.y+Ze.h,d,zt,dt.x,dt.y,ct,vt),Yq(s.dynamicLayoutVertexArray,R,Oe),K.emplaceBack(tr,tr+2,tr+1),K.emplaceBack(tr+1,tr+2,tr+3),re.vertexLength+=4,re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(rt[0]),Y!==h.length-1&&or===h[Y+1].sectionIndex||s.programConfigurations.populatePaintArrays(Q.length,S,S.index,{},W,we&&we[or])}s.placedSymbolArray.emplaceBack(R.x,R.y,ce,this.glyphOffsetArray.length-ce,me,N,z,R.segment,d?d[0]:0,d?d[1]:0,y[0],y[1],M,0,!1,0,V)}_addCollisionDebugVertex(s,h,d,y,E,S){return h.emplaceBack(0,0),s.emplaceBack(d.x,d.y,y,E,Math.round(S.x),Math.round(S.y))}addCollisionDebugVertices(s,h,d,y,E,S,M){let R=E.segments.prepareSegment(4,E.layoutVertexArray,E.indexArray),N=R.vertexLength,z=E.layoutVertexArray,V=E.collisionVertexArray,W=M.anchorX,K=M.anchorY;this._addCollisionDebugVertex(z,V,S,W,K,new T(s,h)),this._addCollisionDebugVertex(z,V,S,W,K,new T(d,h)),this._addCollisionDebugVertex(z,V,S,W,K,new T(d,y)),this._addCollisionDebugVertex(z,V,S,W,K,new T(s,y)),R.vertexLength+=4;let Q=E.indexArray;Q.emplaceBack(N,N+1),Q.emplaceBack(N+1,N+2),Q.emplaceBack(N+2,N+3),Q.emplaceBack(N+3,N),R.primitiveLength+=4}addDebugCollisionBoxes(s,h,d,y){for(let E=s;E<h;E++){let S=this.collisionBoxArray.get(E);this.addCollisionDebugVertices(S.x1,S.y1,S.x2,S.y2,y?this.textCollisionBox:this.iconCollisionBox,S.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Xq(ai,bX.members,Xi),this.iconCollisionBox=new Xq(ai,bX.members,Xi);for(let s=0;s<this.symbolInstances.length;s++){let h=this.symbolInstances.get(s);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(s,h,d,y,E,S,M,R,N){let z={};for(let V=h;V<d;V++){let W=s.get(V);z.textBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},z.textFeatureIndex=W.featureIndex;break}for(let V=y;V<E;V++){let W=s.get(V);z.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},z.verticalTextFeatureIndex=W.featureIndex;break}for(let V=S;V<M;V++){let W=s.get(V);z.iconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},z.iconFeatureIndex=W.featureIndex;break}for(let V=R;V<N;V++){let W=s.get(V);z.verticalIconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},z.verticalIconFeatureIndex=W.featureIndex;break}return z}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){let d=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,h){let d=s.placedSymbolArray.get(h),y=d.vertexStartIndex+4*d.numGlyphs;for(let E=d.vertexStartIndex;E<y;E+=4)s.indexArray.emplaceBack(E,E+2,E+1),s.indexArray.emplaceBack(E+1,E+2,E+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let h=Math.sin(s),d=Math.cos(s),y=[],E=[],S=[];for(let M=0;M<this.symbolInstances.length;++M){S.push(M);let R=this.symbolInstances.get(M);y.push(0|Math.round(h*R.anchorX+d*R.anchorY)),E.push(R.featureIndex)}return S.sort((M,R)=>y[M]-y[R]||E[R]-E[M]),S}addToSortKeyRanges(s,h){let d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===h?d.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let h of this.symbolInstanceIndexes){let d=this.symbolInstances.get(h);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((y,E,S)=>{y>=0&&S.indexOf(y)===E&&this.addIndicesForPlacedSymbol(this.text,y)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let NX,kX;Ft("SymbolBucket",sy,{omit:["layers","collisionBoxArray","features","compareText"]}),sy.MAX_GLYPHS=65535,sy.addDynamicAttributes=Yq;var Qq={get paint(){return kX=kX||new Bi({"icon-opacity":new sr(ee.paint_symbol["icon-opacity"]),"icon-color":new sr(ee.paint_symbol["icon-color"]),"icon-halo-color":new sr(ee.paint_symbol["icon-halo-color"]),"icon-halo-width":new sr(ee.paint_symbol["icon-halo-width"]),"icon-halo-blur":new sr(ee.paint_symbol["icon-halo-blur"]),"icon-translate":new Zt(ee.paint_symbol["icon-translate"]),"icon-translate-anchor":new Zt(ee.paint_symbol["icon-translate-anchor"]),"text-opacity":new sr(ee.paint_symbol["text-opacity"]),"text-color":new sr(ee.paint_symbol["text-color"],{runtimeType:In,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new sr(ee.paint_symbol["text-halo-color"]),"text-halo-width":new sr(ee.paint_symbol["text-halo-width"]),"text-halo-blur":new sr(ee.paint_symbol["text-halo-blur"]),"text-translate":new Zt(ee.paint_symbol["text-translate"]),"text-translate-anchor":new Zt(ee.paint_symbol["text-translate-anchor"])})},get layout(){return NX=NX||new Bi({"symbol-placement":new Zt(ee.layout_symbol["symbol-placement"]),"symbol-spacing":new Zt(ee.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Zt(ee.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new sr(ee.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Zt(ee.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Zt(ee.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Zt(ee.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Zt(ee.layout_symbol["icon-ignore-placement"]),"icon-optional":new Zt(ee.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Zt(ee.layout_symbol["icon-rotation-alignment"]),"icon-size":new sr(ee.layout_symbol["icon-size"]),"icon-text-fit":new Zt(ee.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Zt(ee.layout_symbol["icon-text-fit-padding"]),"icon-image":new sr(ee.layout_symbol["icon-image"]),"icon-rotate":new sr(ee.layout_symbol["icon-rotate"]),"icon-padding":new sr(ee.layout_symbol["icon-padding"]),"icon-keep-upright":new Zt(ee.layout_symbol["icon-keep-upright"]),"icon-offset":new sr(ee.layout_symbol["icon-offset"]),"icon-anchor":new sr(ee.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Zt(ee.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Zt(ee.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Zt(ee.layout_symbol["text-rotation-alignment"]),"text-field":new sr(ee.layout_symbol["text-field"]),"text-font":new sr(ee.layout_symbol["text-font"]),"text-size":new sr(ee.layout_symbol["text-size"]),"text-max-width":new sr(ee.layout_symbol["text-max-width"]),"text-line-height":new Zt(ee.layout_symbol["text-line-height"]),"text-letter-spacing":new sr(ee.layout_symbol["text-letter-spacing"]),"text-justify":new sr(ee.layout_symbol["text-justify"]),"text-radial-offset":new sr(ee.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Zt(ee.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new sr(ee.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new sr(ee.layout_symbol["text-anchor"]),"text-max-angle":new Zt(ee.layout_symbol["text-max-angle"]),"text-writing-mode":new Zt(ee.layout_symbol["text-writing-mode"]),"text-rotate":new sr(ee.layout_symbol["text-rotate"]),"text-padding":new Zt(ee.layout_symbol["text-padding"]),"text-keep-upright":new Zt(ee.layout_symbol["text-keep-upright"]),"text-transform":new sr(ee.layout_symbol["text-transform"]),"text-offset":new sr(ee.layout_symbol["text-offset"]),"text-allow-overlap":new Zt(ee.layout_symbol["text-allow-overlap"]),"text-overlap":new Zt(ee.layout_symbol["text-overlap"]),"text-ignore-placement":new Zt(ee.layout_symbol["text-ignore-placement"]),"text-optional":new Zt(ee.layout_symbol["text-optional"])})}};class qX{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:nr,this.defaultValue=s}evaluate(s){if(s.formattedSection){let h=this.defaultValue.property.overrides;if(h&&h.hasOverride(s.formattedSection))return h.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ft("FormatSectionOverride",qX,{omit:["defaultValue"]});class kM extends Es{constructor(s){super(s,Qq)}recalculate(s,h){if(super.recalculate(s,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let d=this.layout.get("text-writing-mode");if(d){let y=[];for(let E of d)y.indexOf(E)<0&&y.push(E);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,h,d,y){let E=this.layout.get(s).evaluate(h,{},d,y),S=this._unevaluatedLayout._values[s];return S.isDataDriven()||_m(S.value)||!E?E:function(M,R){return R.replace(/{([^{}]+)}/g,(N,z)=>M&&z in M?String(M[z]):"")}(h.properties,E)}createBucket(s){return new sy(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let s of Qq.paint.overridableProperties){if(!kM.hasPaintOverride(this.layout,s))continue;let h=this.paint.get(s),d=new qX(h),y=new Fv(d,h.property.specification),E=null;E=h.value.kind==="constant"||h.value.kind==="source"?new hb("source",y):new Bv("composite",y,h.value.zoomStops),this.paint._values[s]=new aa(h.property,E,h.parameters)}}_handleOverridablePaintPropertyUpdate(s,h,d){return!(!this.layout||h.isDataDriven()||d.isDataDriven())&&kM.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,h){let d=s.get("text-field"),y=Qq.paint.properties[h],E=!1,S=M=>{for(let R of M)if(y.overrides&&y.overrides.hasOverride(R))return void(E=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Ta)S(d.value.value.sections);else if(d.value.kind==="source"){let M=N=>{E||(N instanceof xr&&mi(N.value)===yc?S(N.value.sections):N instanceof Ev?S(N.sections):N.eachChild(M))},R=d.value;R._styleExpression&&M(R._styleExpression.expression)}return E}}let jX;var F6e={get paint(){return jX=jX||new Bi({"background-color":new Zt(ee.paint_background["background-color"]),"background-pattern":new Mb(ee.paint_background["background-pattern"]),"background-opacity":new Zt(ee.paint_background["background-opacity"])})}};class z6e extends Es{constructor(s){super(s,F6e)}}let FX;var B6e={get paint(){return FX=FX||new Bi({"raster-opacity":new Zt(ee.paint_raster["raster-opacity"]),"raster-hue-rotate":new Zt(ee.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Zt(ee.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Zt(ee.paint_raster["raster-brightness-max"]),"raster-saturation":new Zt(ee.paint_raster["raster-saturation"]),"raster-contrast":new Zt(ee.paint_raster["raster-contrast"]),"raster-resampling":new Zt(ee.paint_raster["raster-resampling"]),"raster-fade-duration":new Zt(ee.paint_raster["raster-fade-duration"])})}};class U6e extends Es{constructor(s){super(s,B6e)}}class V6e extends Es{constructor(s){super(s,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class G6e{constructor(s){this._methodToThrottle=s,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let $6e={once:!0},Jq=6371008.8;class dp{constructor(s,h){if(isNaN(s)||isNaN(h))throw new Error(`Invalid LngLat object: (${s}, ${h})`);if(this.lng=+s,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new dp(jt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){let h=Math.PI/180,d=this.lat*h,y=s.lat*h,E=Math.sin(d)*Math.sin(y)+Math.cos(d)*Math.cos(y)*Math.cos((s.lng-this.lng)*h);return Jq*Math.acos(Math.min(E,1))}static convert(s){if(s instanceof dp)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new dp(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new dp(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let zX=2*Math.PI*Jq;function BX(f){return zX*Math.cos(f*Math.PI/180)}function UX(f){return(180+f)/360}function VX(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function GX(f,s){return f/BX(s)}function ej(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function $X(f,s){return f*BX(ej(s))}class Yb{constructor(s,h,d=0){this.x=+s,this.y=+h,this.z=+d}static fromLngLat(s,h=0){let d=dp.convert(s);return new Yb(UX(d.lng),VX(d.lat),GX(h,d.lat))}toLngLat(){return new dp(360*this.x-180,ej(this.y))}toAltitude(){return $X(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/zX*(s=ej(this.y),1/Math.cos(s*Math.PI/180));var s}}function HX(f,s,h){var d=2*Math.PI*6378137/256/Math.pow(2,h);return[f*d-2*Math.PI*6378137/2,s*d-2*Math.PI*6378137/2]}class tj{constructor(s,h,d){if(!function(y,E,S){return!(y<0||y>25||S<0||S>=Math.pow(2,y)||E<0||E>=Math.pow(2,y))}(s,h,d))throw new Error(`x=${h}, y=${d}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=h,this.y=d,this.key=ly(0,s,s,h,d)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,h,d){let y=(S=this.y,M=this.z,R=HX(256*(E=this.x),256*(S=Math.pow(2,M)-S-1),M),N=HX(256*(E+1),256*(S+1),M),R[0]+","+R[1]+","+N[0]+","+N[1]);var E,S,M,R,N;let z=function(V,W,K){let Q,re="";for(let ce=V;ce>0;ce--)Q=1<<ce-1,re+=(W&Q?1:0)+(K&Q?2:0);return re}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,z).replace(/{bbox-epsg-3857}/g,y)}isChildOf(s){let h=this.z-s.z;return h>0&&s.x===this.x>>h&&s.y===this.y>>h}getTilePoint(s){let h=Math.pow(2,this.z);return new T((s.x*h-this.x)*Be,(s.y*h-this.y)*Be)}toString(){return`${this.z}/${this.x}/${this.y}`}}class WX{constructor(s,h){this.wrap=s,this.canonical=h,this.key=ly(s,h.z,h.z,h.x,h.y)}}class sl{constructor(s,h,d,y,E){if(this.terrainRttPosMatrix32f=null,s<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${d}`);this.overscaledZ=s,this.wrap=h,this.canonical=new tj(d,+y,+E),this.key=ly(h,s,d,y,E)}clone(){return new sl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);let h=this.canonical.z-s;return s>this.canonical.z?new sl(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new sl(s,this.wrap,s,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(s,h){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);let d=this.canonical.z-s;return s>this.canonical.z?ly(this.wrap*+h,s,this.canonical.z,this.canonical.x,this.canonical.y):ly(this.wrap*+h,s,s,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(s){if(s.wrap!==this.wrap)return!1;let h=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>h&&s.canonical.y===this.canonical.y>>h}children(s){if(this.overscaledZ>=s)return[new sl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let h=this.canonical.z+1,d=2*this.canonical.x,y=2*this.canonical.y;return[new sl(h,this.wrap,h,d,y),new sl(h,this.wrap,h,d+1,y),new sl(h,this.wrap,h,d,y+1),new sl(h,this.wrap,h,d+1,y+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new sl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new sl(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new WX(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new Yb(s.x-this.wrap,s.y))}}function ly(f,s,h,d,y){(f*=2)<0&&(f=-1*f-1);let E=1<<h;return(E*E*f+E*y+d).toString(36)+h.toString(36)+s.toString(36)}Ft("CanonicalTileID",tj),Ft("OverscaledTileID",sl,{omit:["terrainRttPosMatrix32f"]});class ZX{constructor(s,h,d,y=1,E=1,S=1,M=0){if(this.uid=s,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void Nt(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;let R=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=y,this.greenFactor=E,this.blueFactor=S,this.baseShift=M;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let N=0;N<R;N++)this.data[this._idx(-1,N)]=this.data[this._idx(0,N)],this.data[this._idx(R,N)]=this.data[this._idx(R-1,N)],this.data[this._idx(N,-1)]=this.data[this._idx(N,0)],this.data[this._idx(N,R)]=this.data[this._idx(N,R-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(R,-1)]=this.data[this._idx(R-1,0)],this.data[this._idx(-1,R)]=this.data[this._idx(0,R-1)],this.data[this._idx(R,R)]=this.data[this._idx(R-1,R-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let N=0;N<R;N++)for(let z=0;z<R;z++){let V=this.get(N,z);V>this.max&&(this.max=V),V<this.min&&(this.min=V)}}get(s,h){let d=new Uint8Array(this.data.buffer),y=4*this._idx(s,h);return this.unpack(d[y],d[y+1],d[y+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,h){if(s<-1||s>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(s+1)}unpack(s,h,d){return s*this.redFactor+h*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new al({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,h,d){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let y=h*this.dim,E=h*this.dim+this.dim,S=d*this.dim,M=d*this.dim+this.dim;switch(h){case-1:y=E-1;break;case 1:E=y+1}switch(d){case-1:S=M-1;break;case 1:M=S+1}let R=-h*this.dim,N=-d*this.dim;for(let z=S;z<M;z++)for(let V=y;V<E;V++)this.data[this._idx(V,z)]=s.data[this._idx(V+R,z+N)]}}Ft("DEMData",ZX);class YX{constructor(s){this._stringToNumber={},this._numberToString=[];for(let h=0;h<s.length;h++){let d=s[h];this._stringToNumber[d]=h,this._numberToString[h]=d}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class KX{constructor(s,h,d,y,E){this.type="Feature",this._vectorTileFeature=s,s._z=h,s._x=d,s._y=y,this.properties=s.properties,this.id=E}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){let s={geometry:this.geometry};for(let h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(s[h]=this[h]);return s}}class XX{constructor(s,h){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new lp(Be,16,0),this.grid3D=new lp(Be,16,0),this.featureIndexArray=new Xe,this.promoteId=h}insert(s,h,d,y,E,S){let M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,y,E);let R=S?this.grid3D:this.grid;for(let N=0;N<h.length;N++){let z=h[N],V=[1/0,1/0,-1/0,-1/0];for(let W=0;W<z.length;W++){let K=z[W];V[0]=Math.min(V[0],K.x),V[1]=Math.min(V[1],K.y),V[2]=Math.max(V[2],K.x),V[3]=Math.max(V[3],K.y)}V[0]<Be&&V[1]<Be&&V[2]>=0&&V[3]>=0&&R.insert(M,V[0],V[1],V[2],V[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Vb.VectorTile(new Vq(this.rawTileData)).layers,this.sourceLayerCoder=new YX(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,h,d,y){this.loadVTLayers();let E=s.params,S=Be/s.tileSize/s.scale,M=Em(E.filter),R=s.queryGeometry,N=s.queryPadding*S,z=JX(R),V=this.grid.query(z.minX-N,z.minY-N,z.maxX+N,z.maxY+N),W=JX(s.cameraQueryGeometry),K=this.grid3D.query(W.minX-N,W.minY-N,W.maxX+N,W.maxY+N,(ce,me,Oe,we)=>function(Y,le,Ee,Ve,ut){for(let Je of Y)if(le<=Je.x&&Ee<=Je.y&&Ve>=Je.x&&ut>=Je.y)return!0;let Ze=[new T(le,Ee),new T(le,ut),new T(Ve,ut),new T(Ve,Ee)];if(Y.length>2){for(let Je of Ze)if(qm(Y,Je))return!0}for(let Je=0;Je<Y.length-1;Je++)if(LGe(Y[Je],Y[Je+1],Ze))return!0;return!1}(s.cameraQueryGeometry,ce-N,me-N,Oe+N,we+N));for(let ce of K)V.push(ce);V.sort(H6e);let Q={},re;for(let ce=0;ce<V.length;ce++){let me=V[ce];if(me===re)continue;re=me;let Oe=this.featureIndexArray.get(me),we=null;this.loadMatchingFeature(Q,Oe.bucketIndex,Oe.sourceLayerIndex,Oe.featureIndex,M,E.layers,E.availableImages,h,d,y,(Y,le,Ee)=>(we||(we=Nm(Y)),le.queryIntersectsFeature({queryGeometry:R,feature:Y,featureState:Ee,geometry:we,zoom:this.z,transform:s.transform,pixelsToTileUnits:S,pixelPosMatrix:s.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:s.getElevation})))}return Q}loadMatchingFeature(s,h,d,y,E,S,M,R,N,z,V){let W=this.bucketLayerIDs[h];if(S&&!W.some(ce=>S.has(ce)))return;let K=this.sourceLayerCoder.decode(d),Q=this.vtLayers[K].feature(y);if(E.needGeometry){let ce=km(Q,!0);if(!E.filter(new Gn(this.tileID.overscaledZ),ce,this.tileID.canonical))return}else if(!E.filter(new Gn(this.tileID.overscaledZ),Q))return;let re=this.getId(Q,K);for(let ce=0;ce<W.length;ce++){let me=W[ce];if(S&&!S.has(me))continue;let Oe=R[me];if(!Oe)continue;let we={};re&&z&&(we=z.getState(Oe.sourceLayer||"_geojsonTileLayer",re));let Y=Fe({},N[me]);Y.paint=QX(Y.paint,Oe.paint,Q,we,M),Y.layout=QX(Y.layout,Oe.layout,Q,we,M);let le=!V||V(Q,Oe,we);if(!le)continue;let Ee=new KX(Q,this.z,this.x,this.y,re);Ee.layer=Y;let Ve=s[me];Ve===void 0&&(Ve=s[me]=[]),Ve.push({featureIndex:y,feature:Ee,intersectionZ:le})}}lookupSymbolFeatures(s,h,d,y,E,S,M,R){let N={};this.loadVTLayers();let z=Em(E);for(let V of s)this.loadMatchingFeature(N,d,y,V,z,S,M,R,h);return N}hasLayer(s){for(let h of this.bucketLayerIDs)for(let d of h)if(s===d)return!0;return!1}getId(s,h){var d;let y=s.id;return this.promoteId&&(y=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof y=="boolean"&&(y=Number(y)),y===void 0&&!((d=s.properties)===null||d===void 0)&&d.cluster&&this.promoteId&&(y=Number(s.properties.cluster_id))),y}}function QX(f,s,h,d,y){return He(f,(E,S)=>{let M=s instanceof ey?s.get(S):null;return M&&M.evaluate?M.evaluate(h,d,y):M})}function JX(f){let s=1/0,h=1/0,d=-1/0,y=-1/0;for(let E of f)s=Math.min(s,E.x),h=Math.min(h,E.y),d=Math.max(d,E.x),y=Math.max(y,E.y);return{minX:s,minY:h,maxX:d,maxY:y}}function H6e(f,s){return s-f}function eQ(f,s,h,d,y){let E=[];for(let S=0;S<f.length;S++){let M=f[S],R;for(let N=0;N<M.length-1;N++){let z=M[N],V=M[N+1];z.x<s&&V.x<s||(z.x<s?z=new T(s,z.y+(s-z.x)/(V.x-z.x)*(V.y-z.y))._round():V.x<s&&(V=new T(s,z.y+(s-z.x)/(V.x-z.x)*(V.y-z.y))._round()),z.y<h&&V.y<h||(z.y<h?z=new T(z.x+(h-z.y)/(V.y-z.y)*(V.x-z.x),h)._round():V.y<h&&(V=new T(z.x+(h-z.y)/(V.y-z.y)*(V.x-z.x),h)._round()),z.x>=d&&V.x>=d||(z.x>=d?z=new T(d,z.y+(d-z.x)/(V.x-z.x)*(V.y-z.y))._round():V.x>=d&&(V=new T(d,z.y+(d-z.x)/(V.x-z.x)*(V.y-z.y))._round()),z.y>=y&&V.y>=y||(z.y>=y?z=new T(z.x+(y-z.y)/(V.y-z.y)*(V.x-z.x),y)._round():V.y>=y&&(V=new T(z.x+(y-z.y)/(V.y-z.y)*(V.x-z.x),y)._round()),R&&z.equals(R[R.length-1])||(R=[z],E.push(R)),R.push(V)))))}}return E}Ft("FeatureIndex",XX,{omit:["rawTileData","sourceLayerCoder"]});class mp extends T{constructor(s,h,d,y){super(s,h),this.angle=d,y!==void 0&&(this.segment=y)}clone(){return new mp(this.x,this.y,this.angle,this.segment)}}function tQ(f,s,h,d,y){if(s.segment===void 0||h===0)return!0;let E=s,S=s.segment+1,M=0;for(;M>-h/2;){if(S--,S<0)return!1;M-=f[S].dist(E),E=f[S]}M+=f[S].dist(f[S+1]),S++;let R=[],N=0;for(;M<h/2;){let z=f[S],V=f[S+1];if(!V)return!1;let W=f[S-1].angleTo(z)-z.angleTo(V);for(W=Math.abs((W+3*Math.PI)%(2*Math.PI)-Math.PI),R.push({distance:M,angleDelta:W}),N+=W;M-R[0].distance>d;)N-=R.shift().angleDelta;if(N>y)return!1;S++,M+=z.dist(V)}return!0}function rQ(f){let s=0;for(let h=0;h<f.length-1;h++)s+=f[h].dist(f[h+1]);return s}function nQ(f,s,h){return f?.6*s*h:0}function iQ(f,s){return Math.max(f?f.right-f.left:0,s?s.right-s.left:0)}function W6e(f,s,h,d,y,E){let S=nQ(h,y,E),M=iQ(h,d)*E,R=0,N=rQ(f)/2;for(let z=0;z<f.length-1;z++){let V=f[z],W=f[z+1],K=V.dist(W);if(R+K>N){let Q=(N-R)/K,re=Cl.number(V.x,W.x,Q),ce=Cl.number(V.y,W.y,Q),me=new mp(re,ce,W.angleTo(V),z);return me._round(),!S||tQ(f,me,M,S,s)?me:void 0}R+=K}}function Z6e(f,s,h,d,y,E,S,M,R){let N=nQ(d,E,S),z=iQ(d,y),V=z*S,W=f[0].x===0||f[0].x===R||f[0].y===0||f[0].y===R;return s-V<s/4&&(s=V+s/4),oQ(f,W?s/2*M%s:(z/2+2*E)*S*M%s,s,N,h,V,W,!1,R)}function oQ(f,s,h,d,y,E,S,M,R){let N=E/2,z=rQ(f),V=0,W=s-h,K=[];for(let Q=0;Q<f.length-1;Q++){let re=f[Q],ce=f[Q+1],me=re.dist(ce),Oe=ce.angleTo(re);for(;W+h<V+me;){W+=h;let we=(W-V)/me,Y=Cl.number(re.x,ce.x,we),le=Cl.number(re.y,ce.y,we);if(Y>=0&&Y<R&&le>=0&&le<R&&W-N>=0&&W+N<=z){let Ee=new mp(Y,le,Oe,Q);Ee._round(),d&&!tQ(f,Ee,E,d,y)||K.push(Ee)}}V+=me}return M||K.length||S||(K=oQ(f,V/2,h,d,y,E,S,!0,R)),K}Ft("Anchor",mp);let Kb=es;function aQ(f,s,h,d){let y=[],E=f.image,S=E.pixelRatio,M=E.paddedRect.w-2*Kb,R=E.paddedRect.h-2*Kb,N={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom},z=E.stretchX||[[0,M]],V=E.stretchY||[[0,R]],W=(rt,zt)=>rt+zt[1]-zt[0],K=z.reduce(W,0),Q=V.reduce(W,0),re=M-K,ce=R-Q,me=0,Oe=K,we=0,Y=Q,le=0,Ee=re,Ve=0,ut=ce;if(E.content&&d){let rt=E.content,zt=rt[2]-rt[0],or=rt[3]-rt[1];(E.textFitWidth||E.textFitHeight)&&(N=OX(f)),me=qM(z,0,rt[0]),we=qM(V,0,rt[1]),Oe=qM(z,rt[0],rt[2]),Y=qM(V,rt[1],rt[3]),le=rt[0]-me,Ve=rt[1]-we,Ee=zt-Oe,ut=or-Y}let Ze=N.x1,Je=N.y1,dt=N.x2-Ze,ct=N.y2-Je,vt=(rt,zt,or,tr)=>{let Wt=jM(rt.stretch-me,Oe,dt,Ze),Hr=FM(rt.fixed-le,Ee,rt.stretch,K),vi=jM(zt.stretch-we,Y,ct,Je),Ji=FM(zt.fixed-Ve,ut,zt.stretch,Q),Wo=jM(or.stretch-me,Oe,dt,Ze),ll=FM(or.fixed-le,Ee,or.stretch,K),ts=jM(tr.stretch-we,Y,ct,Je),Co=FM(tr.fixed-Ve,ut,tr.stretch,Q),si=new T(Wt,vi),ho=new T(Wo,vi),Po=new T(Wo,ts),Ro=new T(Wt,ts),Ma=new T(Hr/S,Ji/S),ul=new T(ll/S,Co/S),fo=s*Math.PI/180;if(fo){let po=Math.sin(fo),mo=Math.cos(fo),Gi=[mo,-po,po,mo];si._matMult(Gi),ho._matMult(Gi),Ro._matMult(Gi),Po._matMult(Gi)}let rs=rt.stretch+rt.fixed,eo=zt.stretch+zt.fixed;return{tl:si,tr:ho,bl:Ro,br:Po,tex:{x:E.paddedRect.x+Kb+rs,y:E.paddedRect.y+Kb+eo,w:or.stretch+or.fixed-rs,h:tr.stretch+tr.fixed-eo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ma,pixelOffsetBR:ul,minFontScaleX:Ee/S/dt,minFontScaleY:ut/S/ct,isSDF:h}};if(d&&(E.stretchX||E.stretchY)){let rt=sQ(z,re,K),zt=sQ(V,ce,Q);for(let or=0;or<rt.length-1;or++){let tr=rt[or],Wt=rt[or+1];for(let Hr=0;Hr<zt.length-1;Hr++)y.push(vt(tr,zt[Hr],Wt,zt[Hr+1]))}}else y.push(vt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:R+1}));return y}function qM(f,s,h){let d=0;for(let y of f)d+=Math.max(s,Math.min(h,y[1]))-Math.max(s,Math.min(h,y[0]));return d}function sQ(f,s,h){let d=[{fixed:-1,stretch:0}];for(let[y,E]of f){let S=d[d.length-1];d.push({fixed:y-S.stretch,stretch:S.stretch}),d.push({fixed:y-S.stretch,stretch:S.stretch+(E-y)})}return d.push({fixed:s+Kb,stretch:h}),d}function jM(f,s,h,d){return f/s*h+d}function FM(f,s,h,d){return f-s*h/d}class zM{constructor(s,h,d,y,E,S,M,R,N,z){var V;if(this.boxStartIndex=s.length,N){let W=S.top,K=S.bottom,Q=S.collisionPadding;Q&&(W-=Q[1],K+=Q[3]);let re=K-W;re>0&&(re=Math.max(10,re),this.circleDiameter=re)}else{let W=!((V=S.image)===null||V===void 0)&&V.content&&(S.image.textFitWidth||S.image.textFitHeight)?OX(S):{x1:S.left,y1:S.top,x2:S.right,y2:S.bottom};W.y1=W.y1*M-R[0],W.y2=W.y2*M+R[2],W.x1=W.x1*M-R[3],W.x2=W.x2*M+R[1];let K=S.collisionPadding;if(K&&(W.x1-=K[0]*M,W.y1-=K[1]*M,W.x2+=K[2]*M,W.y2+=K[3]*M),z){let Q=new T(W.x1,W.y1),re=new T(W.x2,W.y1),ce=new T(W.x1,W.y2),me=new T(W.x2,W.y2),Oe=z*Math.PI/180;Q._rotate(Oe),re._rotate(Oe),ce._rotate(Oe),me._rotate(Oe),W.x1=Math.min(Q.x,re.x,ce.x,me.x),W.x2=Math.max(Q.x,re.x,ce.x,me.x),W.y1=Math.min(Q.y,re.y,ce.y,me.y),W.y2=Math.max(Q.y,re.y,ce.y,me.y)}s.emplaceBack(h.x,h.y,W.x1,W.y1,W.x2,W.y2,d,y,E)}this.boxEndIndex=s.length}}class Y6e{constructor(s=[],h=(d,y)=>d<y?-1:d>y?1:0){if(this.data=s,this.length=this.data.length,this.compare=h,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;let s=this.data[0],h=this.data.pop();return--this.length>0&&(this.data[0]=h,this._down(0)),s}peek(){return this.data[0]}_up(s){let{data:h,compare:d}=this,y=h[s];for(;s>0;){let E=s-1>>1,S=h[E];if(d(y,S)>=0)break;h[s]=S,s=E}h[s]=y}_down(s){let{data:h,compare:d}=this,y=this.length>>1,E=h[s];for(;s<y;){let S=1+(s<<1),M=S+1;if(M<this.length&&d(h[M],h[S])<0&&(S=M),d(h[S],E)>=0)break;h[s]=h[S],s=S}h[s]=E}}function K6e(f,s=1,h=!1){let d=1/0,y=1/0,E=-1/0,S=-1/0,M=f[0];for(let K=0;K<M.length;K++){let Q=M[K];(!K||Q.x<d)&&(d=Q.x),(!K||Q.y<y)&&(y=Q.y),(!K||Q.x>E)&&(E=Q.x),(!K||Q.y>S)&&(S=Q.y)}let R=Math.min(E-d,S-y),N=R/2,z=new Y6e([],X6e);if(R===0)return new T(d,y);for(let K=d;K<E;K+=R)for(let Q=y;Q<S;Q+=R)z.push(new uy(K+N,Q+N,N,f));let V=function(K){let Q=0,re=0,ce=0,me=K[0];for(let Oe=0,we=me.length,Y=we-1;Oe<we;Y=Oe++){let le=me[Oe],Ee=me[Y],Ve=le.x*Ee.y-Ee.x*le.y;re+=(le.x+Ee.x)*Ve,ce+=(le.y+Ee.y)*Ve,Q+=3*Ve}return new uy(re/Q,ce/Q,0,K)}(f),W=z.length;for(;z.length;){let K=z.pop();(K.d>V.d||!V.d)&&(V=K,h&&console.log("found best %d after %d probes",Math.round(1e4*K.d)/1e4,W)),K.max-V.d<=s||(N=K.h/2,z.push(new uy(K.p.x-N,K.p.y-N,N,f)),z.push(new uy(K.p.x+N,K.p.y-N,N,f)),z.push(new uy(K.p.x-N,K.p.y+N,N,f)),z.push(new uy(K.p.x+N,K.p.y+N,N,f)),W+=4)}return h&&(console.log(`num probes: ${W}`),console.log(`best distance: ${V.d}`)),V.p}function X6e(f,s){return s.max-f.max}function uy(f,s,h,d){this.p=new T(f,s),this.h=h,this.d=function(y,E){let S=!1,M=1/0;for(let R=0;R<E.length;R++){let N=E[R];for(let z=0,V=N.length,W=V-1;z<V;W=z++){let K=N[z],Q=N[W];K.y>y.y!=Q.y>y.y&&y.x<(Q.x-K.x)*(y.y-K.y)/(Q.y-K.y)+K.x&&(S=!S),M=Math.min(M,B7(y,K,Q))}}return(S?1:-1)*Math.sqrt(M)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var Ho;i.aB=void 0,(Ho=i.aB||(i.aB={}))[Ho.center=1]="center",Ho[Ho.left=2]="left",Ho[Ho.right=3]="right",Ho[Ho.top=4]="top",Ho[Ho.bottom=5]="bottom",Ho[Ho["top-left"]=6]="top-left",Ho[Ho["top-right"]=7]="top-right",Ho[Ho["bottom-left"]=8]="bottom-left",Ho[Ho["bottom-right"]=9]="bottom-right";let gp=7,rj=Number.POSITIVE_INFINITY;function lQ(f,s){return s[1]!==rj?function(h,d,y){let E=0,S=0;switch(d=Math.abs(d),y=Math.abs(y),h){case"top-right":case"top-left":case"top":S=y-gp;break;case"bottom-right":case"bottom-left":case"bottom":S=-y+gp}switch(h){case"top-right":case"bottom-right":case"right":E=-d;break;case"top-left":case"bottom-left":case"left":E=d}return[E,S]}(f,s[0],s[1]):function(h,d){let y=0,E=0;d<0&&(d=0);let S=d/Math.SQRT2;switch(h){case"top-right":case"top-left":E=S-gp;break;case"bottom-right":case"bottom-left":E=-S+gp;break;case"bottom":E=-d+gp;break;case"top":E=d-gp}switch(h){case"top-right":case"bottom-right":y=-S;break;case"top-left":case"bottom-left":y=S;break;case"left":y=d;break;case"right":y=-d}return[y,E]}(f,s[0])}function uQ(f,s,h){var d;let y=f.layout,E=(d=y.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(s,{},h);if(E){let M=E.values,R=[];for(let N=0;N<M.length;N+=2){let z=R[N]=M[N],V=M[N+1].map(W=>W*Qi);z.startsWith("top")?V[1]-=gp:z.startsWith("bottom")&&(V[1]+=gp),R[N+1]=V}return new oa(R)}let S=y.get("text-variable-anchor");if(S){let M;M=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[y.get("text-radial-offset").evaluate(s,{},h)*Qi,rj]:y.get("text-offset").evaluate(s,{},h).map(N=>N*Qi);let R=[];for(let N of S)R.push(N,lQ(N,M));return new oa(R)}return null}function nj(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Q6e(f,s,h,d,y,E,S,M,R,N,z,V){let W=E.textMaxSize.evaluate(s,{});W===void 0&&(W=S);let K=f.layers[0].layout,Q=K.get("icon-offset").evaluate(s,{},z),re=hQ(h.horizontal),ce=S/24,me=f.tilePixelRatio*ce,Oe=f.tilePixelRatio*W/24,we=f.tilePixelRatio*M,Y=f.tilePixelRatio*K.get("symbol-spacing"),le=K.get("text-padding")*f.tilePixelRatio,Ee=function(or,tr,Wt,Hr=1){let vi=or.get("icon-padding").evaluate(tr,{},Wt),Ji=vi&&vi.values;return[Ji[0]*Hr,Ji[1]*Hr,Ji[2]*Hr,Ji[3]*Hr]}(K,s,z,f.tilePixelRatio),Ve=K.get("text-max-angle")/180*Math.PI,ut=K.get("text-rotation-alignment")!=="viewport"&&K.get("symbol-placement")!=="point",Ze=K.get("icon-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",Je=K.get("symbol-placement"),dt=Y/2,ct=K.get("icon-text-fit"),vt;d&&ct!=="none"&&(f.allowVerticalPlacement&&h.vertical&&(vt=LX(d,h.vertical,ct,K.get("icon-text-fit-padding"),Q,ce)),re&&(d=LX(d,re,ct,K.get("icon-text-fit-padding"),Q,ce)));let rt=z?V.line.getGranularityForZoomLevel(z.z):1,zt=(or,tr)=>{tr.x<0||tr.x>=Be||tr.y<0||tr.y>=Be||function(Wt,Hr,vi,Ji,Wo,ll,ts,Co,si,ho,Po,Ro,Ma,ul,fo,rs,eo,po,mo,Gi,Hn,Lu,cy,Du,t$e){let hy=Wt.addToLineVertexArray(Hr,vi),zm,fy,py,dy,mQ=0,gQ=0,vQ=0,yQ=0,hj=-1,fj=-1,zh={},_Q=Ru("");if(Wt.allowVerticalPlacement&&Ji.vertical){let la=Co.layout.get("text-rotate").evaluate(Hn,{},Du)+90;py=new zM(si,Hr,ho,Po,Ro,Ji.vertical,Ma,ul,fo,la),ts&&(dy=new zM(si,Hr,ho,Po,Ro,ts,eo,po,fo,la))}if(Wo){let la=Co.layout.get("icon-rotate").evaluate(Hn,{}),cl=Co.layout.get("icon-text-fit")!=="none",Bm=aQ(Wo,la,cy,cl),ku=ts?aQ(ts,la,cy,cl):void 0;fy=new zM(si,Hr,ho,Po,Ro,Wo,eo,po,!1,la),mQ=4*Bm.length;let Um=Wt.iconSizeData,Cc=null;Um.kind==="source"?(Cc=[Ac*Co.layout.get("icon-size").evaluate(Hn,{})],Cc[0]>pp&&Nt(`${Wt.layerIds[0]}: Value for "icon-size" is >= ${Zb}. Reduce your "icon-size".`)):Um.kind==="composite"&&(Cc=[Ac*Lu.compositeIconSizes[0].evaluate(Hn,{},Du),Ac*Lu.compositeIconSizes[1].evaluate(Hn,{},Du)],(Cc[0]>pp||Cc[1]>pp)&&Nt(`${Wt.layerIds[0]}: Value for "icon-size" is >= ${Zb}. Reduce your "icon-size".`)),Wt.addSymbols(Wt.icon,Bm,Cc,Gi,mo,Hn,i.al.none,Hr,hy.lineStartIndex,hy.lineLength,-1,Du),hj=Wt.icon.placedSymbolArray.length-1,ku&&(gQ=4*ku.length,Wt.addSymbols(Wt.icon,ku,Cc,Gi,mo,Hn,i.al.vertical,Hr,hy.lineStartIndex,hy.lineLength,-1,Du),fj=Wt.icon.placedSymbolArray.length-1)}let xQ=Object.keys(Ji.horizontal);for(let la of xQ){let cl=Ji.horizontal[la];if(!zm){_Q=Ru(cl.text);let ku=Co.layout.get("text-rotate").evaluate(Hn,{},Du);zm=new zM(si,Hr,ho,Po,Ro,cl,Ma,ul,fo,ku)}let Bm=cl.positionedLines.length===1;if(vQ+=cQ(Wt,Hr,cl,ll,Co,fo,Hn,rs,hy,Ji.vertical?i.al.horizontal:i.al.horizontalOnly,Bm?xQ:[la],zh,hj,Lu,Du),Bm)break}Ji.vertical&&(yQ+=cQ(Wt,Hr,Ji.vertical,ll,Co,fo,Hn,rs,hy,i.al.vertical,["vertical"],zh,fj,Lu,Du));let r$e=zm?zm.boxStartIndex:Wt.collisionBoxArray.length,n$e=zm?zm.boxEndIndex:Wt.collisionBoxArray.length,i$e=py?py.boxStartIndex:Wt.collisionBoxArray.length,o$e=py?py.boxEndIndex:Wt.collisionBoxArray.length,a$e=fy?fy.boxStartIndex:Wt.collisionBoxArray.length,s$e=fy?fy.boxEndIndex:Wt.collisionBoxArray.length,l$e=dy?dy.boxStartIndex:Wt.collisionBoxArray.length,u$e=dy?dy.boxEndIndex:Wt.collisionBoxArray.length,Nu=-1,UM=(la,cl)=>la&&la.circleDiameter?Math.max(la.circleDiameter,cl):cl;Nu=UM(zm,Nu),Nu=UM(py,Nu),Nu=UM(fy,Nu),Nu=UM(dy,Nu);let bQ=Nu>-1?1:0;bQ&&(Nu*=t$e/Qi),Wt.glyphOffsetArray.length>=sy.MAX_GLYPHS&&Nt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Hn.sortKey!==void 0&&Wt.addToSortKeyRanges(Wt.symbolInstances.length,Hn.sortKey);let c$e=uQ(Co,Hn,Du),[h$e,f$e]=function(la,cl){let Bm=la.length,ku=cl==null?void 0:cl.values;if((ku==null?void 0:ku.length)>0)for(let Um=0;Um<ku.length;Um+=2){let Cc=ku[Um+1];la.emplaceBack(i.aB[ku[Um]],Cc[0],Cc[1])}return[Bm,la.length]}(Wt.textAnchorOffsets,c$e);Wt.symbolInstances.emplaceBack(Hr.x,Hr.y,zh.right>=0?zh.right:-1,zh.center>=0?zh.center:-1,zh.left>=0?zh.left:-1,zh.vertical||-1,hj,fj,_Q,r$e,n$e,i$e,o$e,a$e,s$e,l$e,u$e,ho,vQ,yQ,mQ,gQ,bQ,0,Ma,Nu,h$e,f$e)}(f,tr,or,h,d,y,vt,f.layers[0],f.collisionBoxArray,s.index,s.sourceLayerIndex,f.index,me,[le,le,le,le],ut,R,we,Ee,Ze,Q,s,E,N,z,S)};if(Je==="line")for(let or of eQ(s.geometry,0,0,Be,Be)){let tr=Fm(or,rt),Wt=Z6e(tr,Y,Ve,h.vertical||re,d,24,Oe,f.overscaling,Be);for(let Hr of Wt)re&&J6e(f,re.text,dt,Hr)||zt(tr,Hr)}else if(Je==="line-center"){for(let or of s.geometry)if(or.length>1){let tr=Fm(or,rt),Wt=W6e(tr,Ve,h.vertical||re,d,24,Oe);Wt&&zt(tr,Wt)}}else if(s.type==="Polygon")for(let or of Mv(s.geometry,0)){let tr=K6e(or,16);zt(Fm(or[0],rt,!0),new mp(tr.x,tr.y,0))}else if(s.type==="LineString")for(let or of s.geometry){let tr=Fm(or,rt);zt(tr,new mp(tr[0].x,tr[0].y,0))}else if(s.type==="Point")for(let or of s.geometry)for(let tr of or)zt([tr],new mp(tr.x,tr.y,0))}function cQ(f,s,h,d,y,E,S,M,R,N,z,V,W,K,Q){let re=function(Oe,we,Y,le,Ee,Ve,ut,Ze){let Je=le.layout.get("text-rotate").evaluate(Ve,{})*Math.PI/180,dt=[];for(let ct of we.positionedLines)for(let vt of ct.positionedGlyphs){if(!vt.rect)continue;let rt=vt.rect||{},zt=I6e+1,or=!0,tr=1,Wt=0,Hr=(Ee||Ze)&&vt.vertical,vi=vt.metrics.advance*vt.scale/2;if(Ze&&we.verticalizable&&(Wt=ct.lineOffset/2-(vt.imageName?-(Qi-vt.metrics.width*vt.scale)/2:(vt.scale-1)*Qi)),vt.imageName){let po=ut[vt.imageName];or=po.sdf,tr=po.pixelRatio,zt=es/tr}let Ji=Ee?[vt.x+vi,vt.y]:[0,0],Wo=Ee?[0,0]:[vt.x+vi+Y[0],vt.y+Y[1]-Wt],ll=[0,0];Hr&&(ll=Wo,Wo=[0,0]);let ts=vt.metrics.isDoubleResolution?2:1,Co=(vt.metrics.left-zt)*vt.scale-vi+Wo[0],si=(-vt.metrics.top-zt)*vt.scale+Wo[1],ho=Co+rt.w/ts*vt.scale/tr,Po=si+rt.h/ts*vt.scale/tr,Ro=new T(Co,si),Ma=new T(ho,si),ul=new T(Co,Po),fo=new T(ho,Po);if(Hr){let po=new T(-vi,vi-OM),mo=-Math.PI/2,Gi=Qi/2-vi,Hn=new T(5-OM-Gi,-(vt.imageName?Gi:0)),Lu=new T(...ll);Ro._rotateAround(mo,po)._add(Hn)._add(Lu),Ma._rotateAround(mo,po)._add(Hn)._add(Lu),ul._rotateAround(mo,po)._add(Hn)._add(Lu),fo._rotateAround(mo,po)._add(Hn)._add(Lu)}if(Je){let po=Math.sin(Je),mo=Math.cos(Je),Gi=[mo,-po,po,mo];Ro._matMult(Gi),Ma._matMult(Gi),ul._matMult(Gi),fo._matMult(Gi)}let rs=new T(0,0),eo=new T(0,0);dt.push({tl:Ro,tr:Ma,bl:ul,br:fo,tex:rt,writingMode:we.writingMode,glyphOffset:Ji,sectionIndex:vt.sectionIndex,isSDF:or,pixelOffsetTL:rs,pixelOffsetBR:eo,minFontScaleX:0,minFontScaleY:0})}return dt}(0,h,M,y,E,S,d,f.allowVerticalPlacement),ce=f.textSizeData,me=null;ce.kind==="source"?(me=[Ac*y.layout.get("text-size").evaluate(S,{})],me[0]>pp&&Nt(`${f.layerIds[0]}: Value for "text-size" is >= ${Zb}. Reduce your "text-size".`)):ce.kind==="composite"&&(me=[Ac*K.compositeTextSizes[0].evaluate(S,{},Q),Ac*K.compositeTextSizes[1].evaluate(S,{},Q)],(me[0]>pp||me[1]>pp)&&Nt(`${f.layerIds[0]}: Value for "text-size" is >= ${Zb}. Reduce your "text-size".`)),f.addSymbols(f.text,re,me,M,E,S,N,s,R.lineStartIndex,R.lineLength,W,Q);for(let Oe of z)V[Oe]=f.text.placedSymbolArray.length-1;return 4*re.length}function hQ(f){for(let s in f)return f[s];return null}function J6e(f,s,h,d){let y=f.compareText;if(s in y){let E=y[s];for(let S=E.length-1;S>=0;S--)if(d.dist(E[S])<h)return!0}else y[s]=[];return y[s].push(d),!1}let fQ=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ij{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[h,d]=new Uint8Array(s,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");let y=d>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);let E=fQ[15&d];if(!E)throw new Error("Unrecognized array type.");let[S]=new Uint16Array(s,2,1),[M]=new Uint32Array(s,4,1);return new ij(M,S,E,s)}constructor(s,h=64,d=Float64Array,y){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=d,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;let E=fQ.indexOf(this.ArrayType),S=2*s*this.ArrayType.BYTES_PER_ELEMENT,M=s*this.IndexArrayType.BYTES_PER_ELEMENT,R=(8-M%8)%8;if(E<0)throw new Error(`Unexpected typed array class: ${d}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+M+R,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+S+M+R),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+M+R,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+E]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=s)}add(s,h){let d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=s,this.coords[this._pos++]=h,d}finish(){let s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return oj(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,h,d,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:E,coords:S,nodeSize:M}=this,R=[0,E.length-1,0],N=[];for(;R.length;){let z=R.pop()||0,V=R.pop()||0,W=R.pop()||0;if(V-W<=M){for(let ce=W;ce<=V;ce++){let me=S[2*ce],Oe=S[2*ce+1];me>=s&&me<=d&&Oe>=h&&Oe<=y&&N.push(E[ce])}continue}let K=W+V>>1,Q=S[2*K],re=S[2*K+1];Q>=s&&Q<=d&&re>=h&&re<=y&&N.push(E[K]),(z===0?s<=Q:h<=re)&&(R.push(W),R.push(K-1),R.push(1-z)),(z===0?d>=Q:y>=re)&&(R.push(K+1),R.push(V),R.push(1-z))}return N}within(s,h,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:y,coords:E,nodeSize:S}=this,M=[0,y.length-1,0],R=[],N=d*d;for(;M.length;){let z=M.pop()||0,V=M.pop()||0,W=M.pop()||0;if(V-W<=S){for(let ce=W;ce<=V;ce++)dQ(E[2*ce],E[2*ce+1],s,h)<=N&&R.push(y[ce]);continue}let K=W+V>>1,Q=E[2*K],re=E[2*K+1];dQ(Q,re,s,h)<=N&&R.push(y[K]),(z===0?s-d<=Q:h-d<=re)&&(M.push(W),M.push(K-1),M.push(1-z)),(z===0?s+d>=Q:h+d>=re)&&(M.push(K+1),M.push(V),M.push(1-z))}return R}}function oj(f,s,h,d,y,E){if(y-d<=h)return;let S=d+y>>1;pQ(f,s,S,d,y,E),oj(f,s,h,d,S-1,1-E),oj(f,s,h,S+1,y,1-E)}function pQ(f,s,h,d,y,E){for(;y>d;){if(y-d>600){let N=y-d+1,z=h-d+1,V=Math.log(N),W=.5*Math.exp(2*V/3),K=.5*Math.sqrt(V*W*(N-W)/N)*(z-N/2<0?-1:1);pQ(f,s,h,Math.max(d,Math.floor(h-z*W/N+K)),Math.min(y,Math.floor(h+(N-z)*W/N+K)),E)}let S=s[2*h+E],M=d,R=y;for(Xb(f,s,d,h),s[2*y+E]>S&&Xb(f,s,d,y);M<R;){for(Xb(f,s,M,R),M++,R--;s[2*M+E]<S;)M++;for(;s[2*R+E]>S;)R--}s[2*d+E]===S?Xb(f,s,d,R):(R++,Xb(f,s,R,y)),R<=h&&(d=R+1),h<=R&&(y=R-1)}}function Xb(f,s,h,d){aj(f,h,d),aj(s,2*h,2*d),aj(s,2*h+1,2*d+1)}function aj(f,s,h){let d=f[s];f[s]=f[h],f[h]=d}function dQ(f,s,h,d){let y=f-h,E=s-d;return y*y+E*E}var sj;i.co=void 0,(sj=i.co||(i.co={})).create="create",sj.load="load",sj.fullLoad="fullLoad";let BM=null,Qb=[],lj=1e3/60,uj="loadTime",cj="fullLoadTime",e$e={mark(f){performance.mark(f)},frame(f){let s=f;BM!=null&&Qb.push(s-BM),BM=s},clearMetrics(){BM=null,Qb=[],performance.clearMeasures(uj),performance.clearMeasures(cj);for(let f in i.co)performance.clearMarks(i.co[f])},getPerformanceMetrics(){performance.measure(uj,i.co.create,i.co.load),performance.measure(cj,i.co.create,i.co.fullLoad);let f=performance.getEntriesByName(uj)[0].duration,s=performance.getEntriesByName(cj)[0].duration,h=Qb.length,d=1/(Qb.reduce((E,S)=>E+S,0)/h/1e3),y=Qb.filter(E=>E>lj).reduce((E,S)=>E+(S-lj)/lj,0);return{loadTime:f,fullLoadTime:s,fps:d,percentDroppedFrames:y/(h+y)*100,totalFrames:h}}};i.$=Yb,i.A=H,i.B=Cl,i.C=Gn,i.D=Zt,i.E=he,i.F=gq,i.G=function(f){if(Ut==null){let s=f.navigator?f.navigator.userAgent:null;Ut=!!f.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Ut},i.H=class{constructor(f,s){this.target=f,this.mapId=s,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new G6e(()=>this.process()),this.subscription=cr(this.target,"message",h=>this.receive(h),!1),this.globalScope=Mt(self)?f:window}registerMessageHandler(f,s){this.messageHandlers[f]=s}sendAsync(f,s){return new Promise((h,d)=>{let y=Math.round(1e18*Math.random()).toString(36).substring(0,10),E=s?cr(s.signal,"abort",()=>{E==null||E.unsubscribe(),delete this.resolveRejects[y];let R={id:y,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(R)},$6e):null;this.resolveRejects[y]={resolve:R=>{E==null||E.unsubscribe(),h(R)},reject:R=>{E==null||E.unsubscribe(),d(R)}};let S=[],M=Object.assign(Object.assign({},f),{id:y,sourceMapId:this.mapId,origin:location.origin,data:up(f.data,S)});this.target.postMessage(M,{transfer:S})})}receive(f){let s=f.data,h=s.id;if(!(s.origin!=="file://"&&location.origin!=="file://"&&s.origin!=="resource://android"&&location.origin!=="resource://android"&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId)){if(s.type==="<cancel>"){delete this.tasks[h];let d=this.abortControllers[h];return delete this.abortControllers[h],void(d&&d.abort())}if(Mt(self)||s.mustQueue)return this.tasks[h]=s,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,s)}}process(){if(this.taskQueue.length===0)return;let f=this.taskQueue.shift(),s=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),s&&this.processTask(f,s)}processTask(f,s){return o(this,void 0,void 0,function*(){if(s.type==="<response>"){let y=this.resolveRejects[f];return delete this.resolveRejects[f],y?void(s.error?y.reject(Mm(s.error)):y.resolve(Mm(s.data))):void 0}if(!this.messageHandlers[s.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${s.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let h=Mm(s.data),d=new AbortController;this.abortControllers[f]=d;try{let y=yield this.messageHandlers[s.type](s.sourceMapId,h,d);this.completeTask(f,null,y)}catch(y){this.completeTask(f,y)}})}completeTask(f,s,h){let d=[];delete this.abortControllers[f];let y={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:s?up(s):null,data:up(h,d)};this.target.postMessage(y,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},i.I=$q,i.J=ao,i.K=function(){var f=new H(16);return H!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},i.L=function(f,s,h){var d,y,E,S,M,R,N,z,V,W,K,Q,re=h[0],ce=h[1],me=h[2];return s===f?(f[12]=s[0]*re+s[4]*ce+s[8]*me+s[12],f[13]=s[1]*re+s[5]*ce+s[9]*me+s[13],f[14]=s[2]*re+s[6]*ce+s[10]*me+s[14],f[15]=s[3]*re+s[7]*ce+s[11]*me+s[15]):(y=s[1],E=s[2],S=s[3],M=s[4],R=s[5],N=s[6],z=s[7],V=s[8],W=s[9],K=s[10],Q=s[11],f[0]=d=s[0],f[1]=y,f[2]=E,f[3]=S,f[4]=M,f[5]=R,f[6]=N,f[7]=z,f[8]=V,f[9]=W,f[10]=K,f[11]=Q,f[12]=d*re+M*ce+V*me+s[12],f[13]=y*re+R*ce+W*me+s[13],f[14]=E*re+N*ce+K*me+s[14],f[15]=S*re+z*ce+Q*me+s[15]),f},i.M=function(f,s,h){var d=h[0],y=h[1],E=h[2];return f[0]=s[0]*d,f[1]=s[1]*d,f[2]=s[2]*d,f[3]=s[3]*d,f[4]=s[4]*y,f[5]=s[5]*y,f[6]=s[6]*y,f[7]=s[7]*y,f[8]=s[8]*E,f[9]=s[9]*E,f[10]=s[10]*E,f[11]=s[11]*E,f[12]=s[12],f[13]=s[13],f[14]=s[14],f[15]=s[15],f},i.N=function(f,s,h){var d=s[0],y=s[1],E=s[2],S=s[3],M=s[4],R=s[5],N=s[6],z=s[7],V=s[8],W=s[9],K=s[10],Q=s[11],re=s[12],ce=s[13],me=s[14],Oe=s[15],we=h[0],Y=h[1],le=h[2],Ee=h[3];return f[0]=we*d+Y*M+le*V+Ee*re,f[1]=we*y+Y*R+le*W+Ee*ce,f[2]=we*E+Y*N+le*K+Ee*me,f[3]=we*S+Y*z+le*Q+Ee*Oe,f[4]=(we=h[4])*d+(Y=h[5])*M+(le=h[6])*V+(Ee=h[7])*re,f[5]=we*y+Y*R+le*W+Ee*ce,f[6]=we*E+Y*N+le*K+Ee*me,f[7]=we*S+Y*z+le*Q+Ee*Oe,f[8]=(we=h[8])*d+(Y=h[9])*M+(le=h[10])*V+(Ee=h[11])*re,f[9]=we*y+Y*R+le*W+Ee*ce,f[10]=we*E+Y*N+le*K+Ee*me,f[11]=we*S+Y*z+le*Q+Ee*Oe,f[12]=(we=h[12])*d+(Y=h[13])*M+(le=h[14])*V+(Ee=h[15])*re,f[13]=we*y+Y*R+le*W+Ee*ce,f[14]=we*E+Y*N+le*K+Ee*me,f[15]=we*S+Y*z+le*Q+Ee*Oe,f},i.O=function(f,s){let h={};for(let d=0;d<s.length;d++){let y=s[d];y in f&&(h[y]=f[y])}return h},i.P=T,i.Q=dp,i.R=al,i.S=VX,i.T=_M,i.U=UX,i.V=k,i.W=q,i.X=Lr,i.Y=sl,i.Z=Be,i._=o,i.a=di,i.a$=function(f,s,h){var d=Math.sin(h),y=Math.cos(h),E=s[4],S=s[5],M=s[6],R=s[7],N=s[8],z=s[9],V=s[10],W=s[11];return s!==f&&(f[0]=s[0],f[1]=s[1],f[2]=s[2],f[3]=s[3],f[12]=s[12],f[13]=s[13],f[14]=s[14],f[15]=s[15]),f[4]=E*y+N*d,f[5]=S*y+z*d,f[6]=M*y+V*d,f[7]=R*y+W*d,f[8]=N*y-E*d,f[9]=z*y-S*d,f[10]=V*y-M*d,f[11]=W*y-R*d,f},i.a0=25,i.a1=tj,i.a2=f=>{let s=window.document.createElement("video");return s.muted=!0,new Promise(h=>{s.onloadstart=()=>{h(s)};for(let d of f){let y=window.document.createElement("source");qe(d)||(s.crossOrigin="Anonymous"),y.src=d,s.appendChild(y)}})},i.a3=Ye,i.a4=function(){return st++},i.a5=de,i.a6=sy,i.a7=Em,i.a8=km,i.a9=KX,i.aA=function(f,s,h,d,y=!1){if(!h[0]&&!h[1])return[0,0];let E=y?d==="map"?-f.bearingInRadians:0:d==="viewport"?f.bearingInRadians:0;if(E){let S=Math.sin(E),M=Math.cos(E);h=[h[0]*M-h[1]*S,h[0]*S+h[1]*M]}return[y?h[0]:nt(s,h[0],f.zoom),y?h[1]:nt(s,h[1],f.zoom)]},i.aC=Zq,i.aD=nj,i.aE=Wq,i.aF=ij,i.aG=ni,i.aH=CM,i.aI=Qe,i.aJ=ln,i.aK=sn,i.aL=jt,i.aM=dr,i.aN=$X,i.aO=function(f,s,h){return f[0]=s[0]*h,f[1]=s[1]*h,f[2]=s[2]*h,f},i.aP=function(f,s,h){return f[0]=s[0]+h[0],f[1]=s[1]+h[1],f[2]=s[2]+h[2],f},i.aQ=function(f){var s=new H(3);return s[0]=f[0],s[1]=f[1],s[2]=f[2],s},i.aR=function(f,s,h){return f[0]=s[0]*h[0],f[1]=s[1]*h[1],f[2]=s[2]*h[2],f[3]=s[3]*h[3],f},i.aS=function(f,s,h){return f[0]=s[0]-h[0],f[1]=s[1]-h[1],f[2]=s[2]-h[2],f},i.aT=function(f,s){var h=s[0],d=s[1],y=s[2],E=h*h+d*d+y*y;return E>0&&(E=1/Math.sqrt(E)),f[0]=s[0]*E,f[1]=s[1]*E,f[2]=s[2]*E,f},i.aU=function(f,s,h){var d=s[0],y=s[1],E=s[2],S=h[0],M=h[1],R=h[2];return f[0]=y*R-E*M,f[1]=E*S-d*R,f[2]=d*M-y*S,f},i.aV=function(f,s){return f[0]*s[0]+f[1]*s[1]+f[2]*s[2]},i.aW=WX,i.aX=ly,i.aY=function(f,s,h,d,y){var E,S=1/Math.tan(s/2);return f[0]=S/h,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=S,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,y!=null&&y!==1/0?(f[10]=(y+d)*(E=1/(d-y)),f[14]=2*y*d*E):(f[10]=-1,f[14]=-2*d),f},i.aZ=function(f){var s=new H(16);return s[0]=f[0],s[1]=f[1],s[2]=f[2],s[3]=f[3],s[4]=f[4],s[5]=f[5],s[6]=f[6],s[7]=f[7],s[8]=f[8],s[9]=f[9],s[10]=f[10],s[11]=f[11],s[12]=f[12],s[13]=f[13],s[14]=f[14],s[15]=f[15],s},i.a_=function(f,s,h){var d=Math.sin(h),y=Math.cos(h),E=s[0],S=s[1],M=s[2],R=s[3],N=s[4],z=s[5],V=s[6],W=s[7];return s!==f&&(f[8]=s[8],f[9]=s[9],f[10]=s[10],f[11]=s[11],f[12]=s[12],f[13]=s[13],f[14]=s[14],f[15]=s[15]),f[0]=E*y+N*d,f[1]=S*y+z*d,f[2]=M*y+V*d,f[3]=R*y+W*d,f[4]=N*y-E*d,f[5]=z*y-S*d,f[6]=V*y-M*d,f[7]=W*y-R*d,f},i.aa=function(f){let s={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,d,y,E)=>{let S=y||E;return s[d]=!S||S.toLowerCase(),""}),s["max-age"]){let h=parseInt(s["max-age"],10);isNaN(h)?delete s["max-age"]:s["max-age"]=h}return s},i.ab=hr,i.ac=function(f){return Math.pow(2,f)},i.ad=ie,i.ae=St,i.af=85.051129,i.ag=GX,i.ah=function(f){return Math.log(f)/Math.LN2},i.ai=function(f){var s=f[0],h=f[1];return s*s+h*h},i.aj=function(f,s){let h=[];for(let d in f)d in s||h.push(d);return h},i.ak=function(f,s){let h=0,d=0;if(f.kind==="constant")d=f.layoutSize;else if(f.kind!=="source"){let{interpolationType:y,minZoom:E,maxZoom:S}=f,M=y?St(Go.interpolationFactor(y,s,E,S),0,1):0;f.kind==="camera"?d=Cl.number(f.minSize,f.maxSize,M):h=M}return{uSizeT:h,uSize:d}},i.am=function(f,{uSize:s,uSizeT:h},{lowerSize:d,upperSize:y}){return f.kind==="source"?d/Ac:f.kind==="composite"?Cl.number(d/Ac,y/Ac,h):s},i.an=function(f,s){var h=s[0],d=s[1],y=s[2],E=s[3],S=s[4],M=s[5],R=s[6],N=s[7],z=s[8],V=s[9],W=s[10],K=s[11],Q=s[12],re=s[13],ce=s[14],me=s[15],Oe=h*M-d*S,we=h*R-y*S,Y=h*N-E*S,le=d*R-y*M,Ee=d*N-E*M,Ve=y*N-E*R,ut=z*re-V*Q,Ze=z*ce-W*Q,Je=z*me-K*Q,dt=V*ce-W*re,ct=V*me-K*re,vt=W*me-K*ce,rt=Oe*vt-we*ct+Y*dt+le*Je-Ee*Ze+Ve*ut;return rt?(f[0]=(M*vt-R*ct+N*dt)*(rt=1/rt),f[1]=(y*ct-d*vt-E*dt)*rt,f[2]=(re*Ve-ce*Ee+me*le)*rt,f[3]=(W*Ee-V*Ve-K*le)*rt,f[4]=(R*Je-S*vt-N*Ze)*rt,f[5]=(h*vt-y*Je+E*Ze)*rt,f[6]=(ce*Y-Q*Ve-me*we)*rt,f[7]=(z*Ve-W*Y+K*we)*rt,f[8]=(S*ct-M*Je+N*ut)*rt,f[9]=(d*Je-h*ct-E*ut)*rt,f[10]=(Q*Ee-re*Y+me*Oe)*rt,f[11]=(V*Y-z*Ee-K*Oe)*rt,f[12]=(M*Ze-S*dt-R*ut)*rt,f[13]=(h*dt-d*Ze+y*ut)*rt,f[14]=(re*we-Q*le-ce*Oe)*rt,f[15]=(z*le-V*we+W*Oe)*rt,f):null},i.ao=je,i.ap=function(f){return Math.hypot(f[0],f[1])},i.aq=function(f){return f[0]=0,f[1]=0,f},i.ar=function(f,s,h){return f[0]=s[0]*h,f[1]=s[1]*h,f},i.as=Yq,i.at=Le,i.au=function(f,s,h,d){let y=s.y-f.y,E=s.x-f.x,S=d.y-h.y,M=d.x-h.x,R=S*E-M*y;if(R===0)return null;let N=(M*(f.y-h.y)-S*(f.x-h.x))/R;return new T(f.x+N*E,f.y+N*y)},i.av=eQ,i.aw=F7,i.ax=function(f){let s=1/0,h=1/0,d=-1/0,y=-1/0;for(let E of f)s=Math.min(s,E.x),h=Math.min(h,E.y),d=Math.max(d,E.x),y=Math.max(y,E.y);return[s,h,d,y]},i.ay=Qi,i.az=nt,i.b=Vt,i.b$=class extends te{},i.b0=function(){let f=new Float32Array(16);return ie(f),f},i.b1=function(){let f=new Float64Array(16);return ie(f),f},i.b2=function(){return new Float64Array(16)},i.b3=function(f,s,h){let d=new Float64Array(4);return function(y,E,S,M){var R=.5*Math.PI/180;E*=R,S*=R,M*=R;var N=Math.sin(E),z=Math.cos(E),V=Math.sin(S),W=Math.cos(S),K=Math.sin(M),Q=Math.cos(M);y[0]=N*W*Q-z*V*K,y[1]=z*V*Q+N*W*K,y[2]=z*W*K-N*V*Q,y[3]=z*W*Q+N*V*K}(d,f,s-90,h),d},i.b4=function(f,s,h,d){var y,E,S,M,R,N=s[0],z=s[1],V=s[2],W=s[3],K=h[0],Q=h[1],re=h[2],ce=h[3];return(E=N*K+z*Q+V*re+W*ce)<0&&(E=-E,K=-K,Q=-Q,re=-re,ce=-ce),1-E>U?(y=Math.acos(E),S=Math.sin(y),M=Math.sin((1-d)*y)/S,R=Math.sin(d*y)/S):(M=1-d,R=d),f[0]=M*N+R*K,f[1]=M*z+R*Q,f[2]=M*V+R*re,f[3]=M*W+R*ce,f},i.b5=function(f){let s=new Float64Array(9);var h,d,y,E,S,M,R,N,z,V,W,K,Q,re,ce,me,Oe,we;V=(y=(d=f)[0])*(R=y+y),W=(E=d[1])*R,Q=(S=d[2])*R,re=S*(N=E+E),me=(M=d[3])*R,Oe=M*N,we=M*(z=S+S),(h=s)[0]=1-(K=E*N)-(ce=S*z),h[3]=W-we,h[6]=Q+Oe,h[1]=W+we,h[4]=1-V-ce,h[7]=re-me,h[2]=Q-Oe,h[5]=re+me,h[8]=1-V-K;let Y=dr(-Math.asin(St(s[2],-1,1))),le,Ee;return Math.hypot(s[5],s[8])<.001?(le=0,Ee=-dr(Math.atan2(s[3],s[4]))):(le=dr(s[5]===0&&s[8]===0?0:Math.atan2(s[5],s[8])),Ee=dr(s[1]===0&&s[0]===0?0:Math.atan2(s[1],s[0]))),{roll:le,pitch:Y+90,bearing:Ee}},i.b6=function(f,s){return f.roll==s.roll&&f.pitch==s.pitch&&f.bearing==s.bearing},i.b7=Yr,i.b8=ty,i.b9=oy,i.bA=function(f){if(f.type==="custom")return new V6e(f);switch(f.type){case"background":return new z6e(f);case"circle":return new NGe(f);case"fill":return new e6e(f);case"fill-extrusion":return new l6e(f);case"heatmap":return new qGe(f);case"hillshade":return new FGe(f);case"line":return new g6e(f);case"raster":return new U6e(f);case"symbol":return new kM(f)}},i.bB=it,i.bC=function(f,s){if(!f)return[{command:"setStyle",args:[s]}];let h=[];try{if(!Ce(f.version,s.version))return[{command:"setStyle",args:[s]}];Ce(f.center,s.center)||h.push({command:"setCenter",args:[s.center]}),Ce(f.state,s.state)||h.push({command:"setGlobalState",args:[s.state]}),Ce(f.centerAltitude,s.centerAltitude)||h.push({command:"setCenterAltitude",args:[s.centerAltitude]}),Ce(f.zoom,s.zoom)||h.push({command:"setZoom",args:[s.zoom]}),Ce(f.bearing,s.bearing)||h.push({command:"setBearing",args:[s.bearing]}),Ce(f.pitch,s.pitch)||h.push({command:"setPitch",args:[s.pitch]}),Ce(f.roll,s.roll)||h.push({command:"setRoll",args:[s.roll]}),Ce(f.sprite,s.sprite)||h.push({command:"setSprite",args:[s.sprite]}),Ce(f.glyphs,s.glyphs)||h.push({command:"setGlyphs",args:[s.glyphs]}),Ce(f.transition,s.transition)||h.push({command:"setTransition",args:[s.transition]}),Ce(f.light,s.light)||h.push({command:"setLight",args:[s.light]}),Ce(f.terrain,s.terrain)||h.push({command:"setTerrain",args:[s.terrain]}),Ce(f.sky,s.sky)||h.push({command:"setSky",args:[s.sky]}),Ce(f.projection,s.projection)||h.push({command:"setProjection",args:[s.projection]});let d={},y=[];(function(S,M,R,N){let z;for(z in M=M||{},S=S||{})Object.prototype.hasOwnProperty.call(S,z)&&(Object.prototype.hasOwnProperty.call(M,z)||Ge(z,R,N));for(z in M)Object.prototype.hasOwnProperty.call(M,z)&&(Object.prototype.hasOwnProperty.call(S,z)?Ce(S[z],M[z])||(S[z].type==="geojson"&&M[z].type==="geojson"&&gt(S,M,z)?Ne(R,{command:"setGeoJSONSourceData",args:[z,M[z].data]}):lt(z,M,R,N)):Me(z,M,R))})(f.sources,s.sources,y,d);let E=[];f.layers&&f.layers.forEach(S=>{"source"in S&&d[S.source]?h.push({command:"removeLayer",args:[S.id]}):E.push(S)}),h=h.concat(y),function(S,M,R){M=M||[];let N=(S=S||[]).map(Xt),z=M.map(Xt),V=S.reduce(Gt,{}),W=M.reduce(Gt,{}),K=N.slice(),Q=Object.create(null),re,ce,me,Oe,we;for(let Y=0,le=0;Y<N.length;Y++)re=N[Y],Object.prototype.hasOwnProperty.call(W,re)?le++:(Ne(R,{command:"removeLayer",args:[re]}),K.splice(K.indexOf(re,le),1));for(let Y=0,le=0;Y<z.length;Y++)re=z[z.length-1-Y],K[K.length-1-Y]!==re&&(Object.prototype.hasOwnProperty.call(V,re)?(Ne(R,{command:"removeLayer",args:[re]}),K.splice(K.lastIndexOf(re,K.length-le),1)):le++,Oe=K[K.length-Y],Ne(R,{command:"addLayer",args:[W[re],Oe]}),K.splice(K.length-Y,0,re),Q[re]=!0);for(let Y=0;Y<z.length;Y++)if(re=z[Y],ce=V[re],me=W[re],!Q[re]&&!Ce(ce,me))if(Ce(ce.source,me.source)&&Ce(ce["source-layer"],me["source-layer"])&&Ce(ce.type,me.type)){for(we in Rt(ce.layout,me.layout,R,re,null,"setLayoutProperty"),Rt(ce.paint,me.paint,R,re,null,"setPaintProperty"),Ce(ce.filter,me.filter)||Ne(R,{command:"setFilter",args:[re,me.filter]}),Ce(ce.minzoom,me.minzoom)&&Ce(ce.maxzoom,me.maxzoom)||Ne(R,{command:"setLayerZoomRange",args:[re,me.minzoom,me.maxzoom]}),ce)Object.prototype.hasOwnProperty.call(ce,we)&&we!=="layout"&&we!=="paint"&&we!=="filter"&&we!=="metadata"&&we!=="minzoom"&&we!=="maxzoom"&&(we.indexOf("paint.")===0?Rt(ce[we],me[we],R,re,we.slice(6),"setPaintProperty"):Ce(ce[we],me[we])||Ne(R,{command:"setLayerProperty",args:[re,we,me[we]]}));for(we in me)Object.prototype.hasOwnProperty.call(me,we)&&!Object.prototype.hasOwnProperty.call(ce,we)&&we!=="layout"&&we!=="paint"&&we!=="filter"&&we!=="metadata"&&we!=="minzoom"&&we!=="maxzoom"&&(we.indexOf("paint.")===0?Rt(ce[we],me[we],R,re,we.slice(6),"setPaintProperty"):Ce(ce[we],me[we])||Ne(R,{command:"setLayerProperty",args:[re,we,me[we]]}))}else Ne(R,{command:"removeLayer",args:[re]}),Oe=K[K.lastIndexOf(re)+1],Ne(R,{command:"addLayer",args:[me,Oe]})}(E,s.layers,h)}catch(d){console.warn("Unable to compute style diff:",d),h=[{command:"setStyle",args:[s]}]}return h},i.bD=function(f){let s=[],h=f.id;return h===void 0&&s.push({message:`layers.${h}: missing required property "id"`}),f.render===void 0&&s.push({message:`layers.${h}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&s.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),s},i.bE=function f(s,h){if(Array.isArray(s)){if(!Array.isArray(h)||s.length!==h.length)return!1;for(let d=0;d<s.length;d++)if(!f(s[d],h[d]))return!1;return!0}if(typeof s=="object"&&s!==null&&h!==null){if(typeof h!="object"||Object.keys(s).length!==Object.keys(h).length)return!1;for(let d in s)if(!f(s[d],h[d]))return!1;return!0}return s===h},i.bF=He,i.bG=et,i.bH=class extends $n{constructor(f,s){super(f,s),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},i.bI=SM,i.bJ=class extends $n{constructor(f,s){super(f,s),this.current=wq}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let s=1;s<16;s++)if(f[s]!==this.current[s]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},i.bK=EM,i.bL=class extends $n{constructor(f,s){super(f,s),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},i.bM=class extends $n{constructor(f,s){super(f,s),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},i.bN=se,i.bO=function(f,s){var h=Math.sin(s),d=Math.cos(s);return f[0]=d,f[1]=h,f[2]=0,f[3]=-h,f[4]=d,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},i.bP=function(f,s,h){var d=s[0],y=s[1],E=s[2];return f[0]=d*h[0]+y*h[3]+E*h[6],f[1]=d*h[1]+y*h[4]+E*h[7],f[2]=d*h[2]+y*h[5]+E*h[8],f},i.bQ=function(f,s,h,d,y,E,S){var M=1/(s-h),R=1/(d-y),N=1/(E-S);return f[0]=-2*M,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*R,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*N,f[11]=0,f[12]=(s+h)*M,f[13]=(y+d)*R,f[14]=(S+E)*N,f[15]=1,f},i.bR=class extends $n{constructor(f,s){super(f,s),this.current=new Array}set(f){if(f!=this.current){this.current=f;let s=new Float32Array(4*f.length);for(let h=0;h<f.length;h++)s[4*h]=f[h].r,s[4*h+1]=f[h].g,s[4*h+2]=f[h].b,s[4*h+3]=f[h].a;this.gl.uniform4fv(this.location,s)}}},i.bS=class extends $n{constructor(f,s){super(f,s),this.current=new Array}set(f){if(f!=this.current){this.current=f;let s=new Float32Array(f);this.gl.uniform1fv(this.location,s)}}},i.bT=class extends w{},i.bU=x6e,i.bV=class extends P{},i.bW=Cq,i.bX=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},i.bY=Y7,i.bZ=function(f,s,h){var d=s[0],y=s[1],E=s[2],S=h[3]*d+h[7]*y+h[11]*E+h[15];return f[0]=(h[0]*d+h[4]*y+h[8]*E+h[12])/(S=S||1),f[1]=(h[1]*d+h[5]*y+h[9]*E+h[13])/S,f[2]=(h[2]*d+h[6]*y+h[10]*E+h[14])/S,f},i.b_=class extends qh{},i.ba=Bb,i.bb=iy,i.bc=mt,i.bd=ht,i.be=Ia,i.bf=function(f,s,h,d,y){return mt(d,y,St((f-s)/(h-s),0,1))},i.bg=We,i.bh=function(){return new Float64Array(3)},i.bi=function(f,s,h,d){return f[0]=s[0]+h[0]*d,f[1]=s[1]+h[1]*d,f[2]=s[2]+h[2]*d,f},i.bj=_e,i.bk=function(){return new Float64Array(4)},i.bl=function(f,s,h,d){var y=[],E=[];return y[0]=s[0]-h[0],y[1]=s[1]-h[1],y[2]=s[2]-h[2],E[0]=y[0]*Math.cos(d)-y[1]*Math.sin(d),E[1]=y[0]*Math.sin(d)+y[1]*Math.cos(d),E[2]=y[2],f[0]=E[0]+h[0],f[1]=E[1]+h[1],f[2]=E[2]+h[2],f},i.bm=function(f,s,h,d){var y=[],E=[];return y[0]=s[0]-h[0],y[1]=s[1]-h[1],y[2]=s[2]-h[2],E[0]=y[0],E[1]=y[1]*Math.cos(d)-y[2]*Math.sin(d),E[2]=y[1]*Math.sin(d)+y[2]*Math.cos(d),f[0]=E[0]+h[0],f[1]=E[1]+h[1],f[2]=E[2]+h[2],f},i.bn=function(f,s,h,d){var y=[],E=[];return y[0]=s[0]-h[0],y[1]=s[1]-h[1],y[2]=s[2]-h[2],E[0]=y[2]*Math.sin(d)+y[0]*Math.cos(d),E[1]=y[1],E[2]=y[2]*Math.cos(d)-y[0]*Math.sin(d),f[0]=E[0]+h[0],f[1]=E[1]+h[1],f[2]=E[2]+h[2],f},i.bo=ve,i.bp=function(f,s,h){var d=Math.sin(h),y=Math.cos(h),E=s[0],S=s[1],M=s[2],R=s[3],N=s[8],z=s[9],V=s[10],W=s[11];return s!==f&&(f[4]=s[4],f[5]=s[5],f[6]=s[6],f[7]=s[7],f[12]=s[12],f[13]=s[13],f[14]=s[14],f[15]=s[15]),f[0]=E*y-N*d,f[1]=S*y-z*d,f[2]=M*y-V*d,f[3]=R*y-W*d,f[8]=E*d+N*y,f[9]=S*d+z*y,f[10]=M*d+V*y,f[11]=R*d+W*y,f},i.bq=function(f,s){let h=We(f,360),d=We(s,360),y=d-h,E=d>h?y-360:y+360;return Math.abs(y)<Math.abs(E)?y:E},i.br=function(f){return f[0]=0,f[1]=0,f[2]=0,f},i.bs=function(f,s,h,d){let y=Math.sqrt(f*f+s*s),E=Math.sqrt(h*h+d*d);f/=y,s/=y,h/=E,d/=E;let S=Math.acos(f*h+s*d);return-s*h+f*d>0?S:-S},i.bt=function(f,s){return f[0]*s[0]+f[1]*s[1]+f[2]*s[2]+f[3]},i.bu=Jq,i.bv=function(f,s){let h=We(f,2*Math.PI),d=We(s,2*Math.PI);return Math.min(Math.abs(h-d),Math.abs(h-d+2*Math.PI),Math.abs(h-d-2*Math.PI))},i.bw=function(){let f={},s=ee.$version;for(let h in ee.$root){let d=ee.$root[h];if(d.required){let y=null;y=h==="version"?s:d.type==="array"?[]:{},y!=null&&(f[h]=y)}}return f},i.bx=Eb,i.by=ri,i.bz=function(f){f=f.slice();let s=Object.create(null);for(let h=0;h<f.length;h++)s[f[h].id]=f[h];for(let h=0;h<f.length;h++)"ref"in f[h]&&(f[h]=xe(f[h],s[f[h].ref]));return f},i.c=Un,i.c0=function(f,s){return f[0]===s[0]&&f[1]===s[1]&&f[2]===s[2]&&f[3]===s[3]&&f[4]===s[4]&&f[5]===s[5]&&f[6]===s[6]&&f[7]===s[7]&&f[8]===s[8]&&f[9]===s[9]&&f[10]===s[10]&&f[11]===s[11]&&f[12]===s[12]&&f[13]===s[13]&&f[14]===s[14]&&f[15]===s[15]},i.c1=function(f,s){var h=f[0],d=f[1],y=f[2],E=f[3],S=f[4],M=f[5],R=f[6],N=f[7],z=f[8],V=f[9],W=f[10],K=f[11],Q=f[12],re=f[13],ce=f[14],me=f[15],Oe=s[0],we=s[1],Y=s[2],le=s[3],Ee=s[4],Ve=s[5],ut=s[6],Ze=s[7],Je=s[8],dt=s[9],ct=s[10],vt=s[11],rt=s[12],zt=s[13],or=s[14],tr=s[15];return Math.abs(h-Oe)<=U*Math.max(1,Math.abs(h),Math.abs(Oe))&&Math.abs(d-we)<=U*Math.max(1,Math.abs(d),Math.abs(we))&&Math.abs(y-Y)<=U*Math.max(1,Math.abs(y),Math.abs(Y))&&Math.abs(E-le)<=U*Math.max(1,Math.abs(E),Math.abs(le))&&Math.abs(S-Ee)<=U*Math.max(1,Math.abs(S),Math.abs(Ee))&&Math.abs(M-Ve)<=U*Math.max(1,Math.abs(M),Math.abs(Ve))&&Math.abs(R-ut)<=U*Math.max(1,Math.abs(R),Math.abs(ut))&&Math.abs(N-Ze)<=U*Math.max(1,Math.abs(N),Math.abs(Ze))&&Math.abs(z-Je)<=U*Math.max(1,Math.abs(z),Math.abs(Je))&&Math.abs(V-dt)<=U*Math.max(1,Math.abs(V),Math.abs(dt))&&Math.abs(W-ct)<=U*Math.max(1,Math.abs(W),Math.abs(ct))&&Math.abs(K-vt)<=U*Math.max(1,Math.abs(K),Math.abs(vt))&&Math.abs(Q-rt)<=U*Math.max(1,Math.abs(Q),Math.abs(rt))&&Math.abs(re-zt)<=U*Math.max(1,Math.abs(re),Math.abs(zt))&&Math.abs(ce-or)<=U*Math.max(1,Math.abs(ce),Math.abs(or))&&Math.abs(me-tr)<=U*Math.max(1,Math.abs(me),Math.abs(tr))},i.c2=function(f,s){return f[0]=s[0],f[1]=s[1],f[2]=s[2],f[3]=s[3],f[4]=s[4],f[5]=s[5],f[6]=s[6],f[7]=s[7],f[8]=s[8],f[9]=s[9],f[10]=s[10],f[11]=s[11],f[12]=s[12],f[13]=s[13],f[14]=s[14],f[15]=s[15],f},i.c3=f=>f.type==="symbol",i.c4=f=>f.type==="circle",i.c5=f=>f.type==="heatmap",i.c6=f=>f.type==="line",i.c7=f=>f.type==="fill",i.c8=f=>f.type==="fill-extrusion",i.c9=f=>f.type==="hillshade",i.cA=Dq,i.cB=Fq,i.cC=Vb,i.cD=Vq,i.cE=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},i.cF=function(f,s,h,d,y){return o(this,void 0,void 0,function*(){if(q())try{return yield Lr(f,s,h,d,y)}catch(E){}return function(E,S,M,R,N){let z=E.width,V=E.height;yr&&ur||(yr=new OffscreenCanvas(z,V),ur=yr.getContext("2d",{willReadFrequently:!0})),yr.width=z,yr.height=V,ur.drawImage(E,0,0,z,V);let W=ur.getImageData(S,M,R,N);return ur.clearRect(0,0,z,V),W.data}(f,s,h,d,y)})},i.cG=ZX,i.cH=l,i.cI=g,i.cJ=fX,i.cK=SX,i.cL=zv,i.cM=Pu,i.ca=f=>f.type==="raster",i.cb=f=>f.type==="background",i.cc=f=>f.type==="custom",i.cd=_t,i.ce=function(f,s,h){let d=$e(s.x-h.x,s.y-h.y),y=$e(f.x-h.x,f.y-h.y);var E,S;return dr(Math.atan2(d[0]*y[1]-d[1]*y[0],(E=d)[0]*(S=y)[0]+E[1]*S[1]))},i.cf=ze,i.cg=function(f,s){return wn[s]&&(f instanceof MouseEvent||f instanceof WheelEvent)},i.ch=function(f,s){return an[s]&&"touches"in f},i.ci=function(f){return an[f]||wn[f]},i.cj=function(f,s,h){var d=s[0],y=s[1];return f[0]=h[0]*d+h[4]*y+h[12],f[1]=h[1]*d+h[5]*y+h[13],f},i.ck=function(f,s){let{x:h,y:d}=Yb.fromLngLat(s);return!(f<0||f>25||d<0||d>=1||h<0||h>=1)},i.cl=function(f,s){return f[0]=s[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=s[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=s[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},i.cm=class extends Om{},i.cn=e$e,i.cp=function(f){return f.message===Ln},i.cq=Qn,i.cr=function(f,s){di.REGISTERED_PROTOCOLS[f]=s},i.cs=function(f){delete di.REGISTERED_PROTOCOLS[f]},i.ct=function(f,s){let h={};for(let y=0;y<f.length;y++){let E=s&&s[f[y].id]||lM(f[y]);s&&(s[f[y].id]=E);let S=h[E];S||(S=h[E]=[]),S.push(f[y])}let d=[];for(let y in h)d.push(h[y]);return d},i.cu=Ft,i.cv=YX,i.cw=XX,i.cx=IX,i.cy=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=Be/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;let s=f.bucket.layers[0],h=s.layout,d=s._unevaluatedLayout._values,y={layoutIconSize:d["icon-size"].possiblyEvaluate(new Gn(f.bucket.zoom+1),f.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Gn(f.bucket.zoom+1),f.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Gn(18))};if(f.bucket.textSizeData.kind==="composite"){let{minZoom:N,maxZoom:z}=f.bucket.textSizeData;y.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Gn(N),f.canonical),d["text-size"].possiblyEvaluate(new Gn(z),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){let{minZoom:N,maxZoom:z}=f.bucket.iconSizeData;y.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Gn(N),f.canonical),d["icon-size"].possiblyEvaluate(new Gn(z),f.canonical)]}let E=h.get("text-line-height")*Qi,S=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",M=h.get("text-keep-upright"),R=h.get("text-size");for(let N of f.bucket.features){let z=h.get("text-font").evaluate(N,{},f.canonical).join(","),V=R.evaluate(N,{},f.canonical),W=y.layoutTextSize.evaluate(N,{},f.canonical),K=y.layoutIconSize.evaluate(N,{},f.canonical),Q={horizontal:{},vertical:void 0},re=N.text,ce,me=[0,0];if(re){let Y=re.toString(),le=h.get("text-letter-spacing").evaluate(N,{},f.canonical)*Qi,Ee=vq(Y)?le:0,Ve=h.get("text-anchor").evaluate(N,{},f.canonical),ut=uQ(s,N,f.canonical);if(!ut){let ct=h.get("text-radial-offset").evaluate(N,{},f.canonical);me=ct?lQ(Ve,[ct*Qi,rj]):h.get("text-offset").evaluate(N,{},f.canonical).map(vt=>vt*Qi)}let Ze=S?"center":h.get("text-justify").evaluate(N,{},f.canonical),Je=h.get("symbol-placement")==="point"?h.get("text-max-width").evaluate(N,{},f.canonical)*Qi:1/0,dt=()=>{f.bucket.allowVerticalPlacement&&Xv(Y)&&(Q.vertical=LM(re,f.glyphMap,f.glyphPositions,f.imagePositions,z,Je,E,Ve,"left",Ee,me,i.al.vertical,!0,W,V))};if(!S&&ut){let ct=new Set;if(Ze==="auto")for(let rt=0;rt<ut.values.length;rt+=2)ct.add(nj(ut.values[rt]));else ct.add(Ze);let vt=!1;for(let rt of ct)if(!Q.horizontal[rt])if(vt)Q.horizontal[rt]=Q.horizontal[0];else{let zt=LM(re,f.glyphMap,f.glyphPositions,f.imagePositions,z,Je,E,"center",rt,Ee,me,i.al.horizontal,!1,W,V);zt&&(Q.horizontal[rt]=zt,vt=zt.positionedLines.length===1)}dt()}else{Ze==="auto"&&(Ze=nj(Ve));let ct=LM(re,f.glyphMap,f.glyphPositions,f.imagePositions,z,Je,E,Ve,Ze,Ee,me,i.al.horizontal,!1,W,V);ct&&(Q.horizontal[Ze]=ct),dt(),Xv(Y)&&S&&M&&(Q.vertical=LM(re,f.glyphMap,f.glyphPositions,f.imagePositions,z,Je,E,Ve,Ze,Ee,me,i.al.vertical,!1,W,V))}}let Oe=!1;if(N.icon&&N.icon.name){let Y=f.imageMap[N.icon.name];Y&&(ce=N6e(f.imagePositions[N.icon.name],h.get("icon-offset").evaluate(N,{},f.canonical),h.get("icon-anchor").evaluate(N,{},f.canonical)),Oe=!!Y.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=Oe:f.bucket.sdfIcons!==Oe&&Nt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Y.pixelRatio!==f.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}let we=hQ(Q.horizontal)||Q.vertical;f.bucket.iconsInText=!!we&&we.iconsInText,(we||ce)&&Q6e(f.bucket,N,Q,ce,f.imageMap,y,W,K,me,Oe,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},i.cz=zq,i.d=qe,i.e=Fe,i.f=f=>o(void 0,void 0,void 0,function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));let s=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(s)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),i.g=Li,i.h=f=>new Promise((s,h)=>{let d=new Image;d.onload=()=>{s(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=$t})},d.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let y=new Blob([new Uint8Array(f)],{type:"image/png"});d.src=f.byteLength?URL.createObjectURL(y):$t}),i.i=Mt,i.j=(f,s)=>so(Fe(f,{type:"json"}),s),i.k=X,i.l=Z,i.m=so,i.n=(f,s)=>so(Fe(f,{type:"arrayBuffer"}),s),i.o=function(f){return new Vq(f).readFields(E6e,[])},i.p=TX,i.q=kb,i.r=Bi,i.s=cr,i.t=Wv,i.u=Br,i.v=ee,i.w=Nt,i.x=wb,i.y=sp,i.z=function([f,s,h]){return s+=90,s*=Math.PI/180,h*=Math.PI/180,{x:f*Math.cos(s)*Math.sin(h),y:f*Math.sin(s)*Math.sin(h),z:f*Math.cos(h)}}}),t("worker",["./shared"],function(i){"use strict";class o{constructor(oe){this.keyCache={},oe&&this.replace(oe)}replace(oe){this._layerConfigs={},this._layers={},this.update(oe,[])}update(oe,ne){for(let X of oe){this._layerConfigs[X.id]=X;let he=this._layers[X.id]=i.bA(X);he._featureFilter=i.a7(he.filter),this.keyCache[X.id]&&delete this.keyCache[X.id]}for(let X of ne)delete this.keyCache[X],delete this._layerConfigs[X],delete this._layers[X];this.familiesBySource={};let Z=i.ct(Object.values(this._layerConfigs),this.keyCache);for(let X of Z){let he=X.map(Me=>this._layers[Me.id]),ee=he[0];if(ee.visibility==="none")continue;let Ie=ee.source||"",xe=this.familiesBySource[Ie];xe||(xe=this.familiesBySource[Ie]={});let Ce=ee.sourceLayer||"_geojsonTileLayer",Ne=xe[Ce];Ne||(Ne=xe[Ce]=[]),Ne.push(he)}}}class l{constructor(oe){let ne={},Z=[];for(let Ie in oe){let xe=oe[Ie],Ce=ne[Ie]={};for(let Ne in xe){let Me=xe[+Ne];if(!Me||Me.bitmap.width===0||Me.bitmap.height===0)continue;let Ge={x:0,y:0,w:Me.bitmap.width+2,h:Me.bitmap.height+2};Z.push(Ge),Ce[Ne]={rect:Ge,metrics:Me.metrics}}}let{w:X,h:he}=i.p(Z),ee=new i.q({width:X||1,height:he||1});for(let Ie in oe){let xe=oe[Ie];for(let Ce in xe){let Ne=xe[+Ce];if(!Ne||Ne.bitmap.width===0||Ne.bitmap.height===0)continue;let Me=ne[Ie][Ce].rect;i.q.copy(Ne.bitmap,ee,{x:0,y:0},{x:Me.x+1,y:Me.y+1},Ne.bitmap)}}this.image=ee,this.positions=ne}}i.cu("GlyphAtlas",l);class c{constructor(oe){this.tileID=new i.Y(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId,this.inFlightDependencies=[]}parse(oe,ne,Z,X,he){return i._(this,void 0,void 0,function*(){this.status="parsing",this.data=oe,this.collisionBoxArray=new i.a5;let ee=new i.cv(Object.keys(oe.layers).sort()),Ie=new i.cw(this.tileID,this.promoteId);Ie.bucketLayerIDs=[];let xe={},Ce={featureIndex:Ie,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Z,subdivisionGranularity:he},Ne=ne.familiesBySource[this.source];for(let nr in Ne){let ot=oe.layers[nr];if(!ot)continue;ot.version===1&&i.w(`Vector tile source "${this.source}" layer "${nr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let Yt=ee.encode(nr),mr=[];for(let In=0;In<ot.length;In++){let Zr=ot.feature(In),Dn=Ie.getId(Zr,nr);mr.push({feature:Zr,id:Dn,index:In,sourceLayerIndex:Yt})}for(let In of Ne[nr]){let Zr=In[0];Zr.source!==this.source&&i.w(`layer.source = ${Zr.source} does not equal this.source = ${this.source}`),Zr.minzoom&&this.zoom<Math.floor(Zr.minzoom)||Zr.maxzoom&&this.zoom>=Zr.maxzoom||Zr.visibility!=="none"&&(p(In,this.zoom,Z),(xe[Zr.id]=Zr.createBucket({index:Ie.bucketLayerIDs.length,layers:In,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Yt,sourceID:this.source})).populate(mr,Ce,this.tileID.canonical),Ie.bucketLayerIDs.push(In.map(Dn=>Dn.id)))}}let Me=i.bF(Ce.glyphDependencies,nr=>Object.keys(nr).map(Number));this.inFlightDependencies.forEach(nr=>nr==null?void 0:nr.abort()),this.inFlightDependencies=[];let Ge=Promise.resolve({});if(Object.keys(Me).length){let nr=new AbortController;this.inFlightDependencies.push(nr),Ge=X.sendAsync({type:"GG",data:{stacks:Me,source:this.source,tileID:this.tileID,type:"glyphs"}},nr)}let lt=Object.keys(Ce.iconDependencies),gt=Promise.resolve({});if(lt.length){let nr=new AbortController;this.inFlightDependencies.push(nr),gt=X.sendAsync({type:"GI",data:{icons:lt,source:this.source,tileID:this.tileID,type:"icons"}},nr)}let Rt=Object.keys(Ce.patternDependencies),Xt=Promise.resolve({});if(Rt.length){let nr=new AbortController;this.inFlightDependencies.push(nr),Xt=X.sendAsync({type:"GI",data:{icons:Rt,source:this.source,tileID:this.tileID,type:"patterns"}},nr)}let[Gt,Ye,Fr]=yield Promise.all([Ge,gt,Xt]),Sr=new l(Gt),Dr=new i.cx(Ye,Fr);for(let nr in xe){let ot=xe[nr];ot instanceof i.a6?(p(ot.layers,this.zoom,Z),i.cy({bucket:ot,glyphMap:Gt,glyphPositions:Sr.positions,imageMap:Ye,imagePositions:Dr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ce.subdivisionGranularity})):ot.hasPattern&&(ot instanceof i.cz||ot instanceof i.cA||ot instanceof i.cB)&&(p(ot.layers,this.zoom,Z),ot.addFeatures(Ce,this.tileID.canonical,Dr.patternPositions))}return this.status="done",{buckets:Object.values(xe).filter(nr=>!nr.isEmpty()),featureIndex:Ie,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Sr.image,imageAtlas:Dr,glyphMap:this.returnDependencies?Gt:null,iconMap:this.returnDependencies?Ye:null,glyphPositions:this.returnDependencies?Sr.positions:null}})}}function p(qe,oe,ne){let Z=new i.C(oe);for(let X of qe)X.recalculate(Z,ne)}class g{constructor(oe,ne,Z){this.actor=oe,this.layerIndex=ne,this.availableImages=Z,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(oe,ne){return i._(this,void 0,void 0,function*(){let Z=yield i.n(oe.request,ne);try{return{vectorTile:new i.cC.VectorTile(new i.cD(Z.data)),rawData:Z.data,cacheControl:Z.cacheControl,expires:Z.expires}}catch(X){let he=new Uint8Array(Z.data),ee=`Unable to parse the tile at ${oe.request.url}, `;throw ee+=he[0]===31&&he[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${X.message}`,new Error(ee)}})}loadTile(oe){return i._(this,void 0,void 0,function*(){let ne=oe.uid,Z=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new i.cE(oe.request),X=new c(oe);this.loading[ne]=X;let he=new AbortController;X.abort=he;try{let ee=yield this.loadVectorTile(oe,he);if(delete this.loading[ne],!ee)return null;let Ie=ee.rawData,xe={};ee.expires&&(xe.expires=ee.expires),ee.cacheControl&&(xe.cacheControl=ee.cacheControl);let Ce={};if(Z){let Me=Z.finish();Me&&(Ce.resourceTiming=JSON.parse(JSON.stringify(Me)))}X.vectorTile=ee.vectorTile;let Ne=X.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,oe.subdivisionGranularity);this.loaded[ne]=X,this.fetching[ne]={rawTileData:Ie,cacheControl:xe,resourceTiming:Ce};try{let Me=yield Ne;return i.e({rawTileData:Ie.slice(0)},Me,xe,Ce)}finally{delete this.fetching[ne]}}catch(ee){throw delete this.loading[ne],X.status="done",this.loaded[ne]=X,ee}})}reloadTile(oe){return i._(this,void 0,void 0,function*(){let ne=oe.uid;if(!this.loaded||!this.loaded[ne])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let Z=this.loaded[ne];if(Z.showCollisionBoxes=oe.showCollisionBoxes,Z.status==="parsing"){let X=yield Z.parse(Z.vectorTile,this.layerIndex,this.availableImages,this.actor,oe.subdivisionGranularity),he;if(this.fetching[ne]){let{rawTileData:ee,cacheControl:Ie,resourceTiming:xe}=this.fetching[ne];delete this.fetching[ne],he=i.e({rawTileData:ee.slice(0)},X,Ie,xe)}else he=X;return he}if(Z.status==="done"&&Z.vectorTile)return Z.parse(Z.vectorTile,this.layerIndex,this.availableImages,this.actor,oe.subdivisionGranularity)})}abortTile(oe){return i._(this,void 0,void 0,function*(){let ne=this.loading,Z=oe.uid;ne&&ne[Z]&&ne[Z].abort&&(ne[Z].abort.abort(),delete ne[Z])})}removeTile(oe){return i._(this,void 0,void 0,function*(){this.loaded&&this.loaded[oe.uid]&&delete this.loaded[oe.uid]})}}class _{constructor(){this.loaded={}}loadTile(oe){return i._(this,void 0,void 0,function*(){let{uid:ne,encoding:Z,rawImageData:X,redFactor:he,greenFactor:ee,blueFactor:Ie,baseShift:xe}=oe,Ce=X.width+2,Ne=X.height+2,Me=i.b(X)?new i.R({width:Ce,height:Ne},yield i.cF(X,-1,-1,Ce,Ne)):X,Ge=new i.cG(ne,Me,Z,he,ee,Ie,xe);return this.loaded=this.loaded||{},this.loaded[ne]=Ge,Ge})}removeTile(oe){let ne=this.loaded,Z=oe.uid;ne&&ne[Z]&&delete ne[Z]}}var x,T,C=function(){if(T)return x;function qe(ne,Z){if(ne.length!==0){oe(ne[0],Z);for(var X=1;X<ne.length;X++)oe(ne[X],!Z)}}function oe(ne,Z){for(var X=0,he=0,ee=0,Ie=ne.length,xe=Ie-1;ee<Ie;xe=ee++){var Ce=(ne[ee][0]-ne[xe][0])*(ne[xe][1]+ne[ee][1]),Ne=X+Ce;he+=Math.abs(X)>=Math.abs(Ce)?X-Ne+Ce:Ce-Ne+X,X=Ne}X+he>=0!=!!Z&&ne.reverse()}return T=1,x=function ne(Z,X){var he,ee=Z&&Z.type;if(ee==="FeatureCollection")for(he=0;he<Z.features.length;he++)ne(Z.features[he],X);else if(ee==="GeometryCollection")for(he=0;he<Z.geometries.length;he++)ne(Z.geometries[he],X);else if(ee==="Feature")ne(Z.geometry,X);else if(ee==="Polygon")qe(Z.coordinates,X);else if(ee==="MultiPolygon")for(he=0;he<Z.coordinates.length;he++)qe(Z.coordinates[he],X);return Z}}(),D=i.cH(C);let F=i.cC.VectorTileFeature.prototype.toGeoJSON;class O{constructor(oe){this._feature=oe,this.extent=i.Z,this.type=oe.type,this.properties=oe.tags,"id"in oe&&!isNaN(oe.id)&&(this.id=parseInt(oe.id,10))}loadGeometry(){if(this._feature.type===1){let oe=[];for(let ne of this._feature.geometry)oe.push([new i.P(ne[0],ne[1])]);return oe}{let oe=[];for(let ne of this._feature.geometry){let Z=[];for(let X of ne)Z.push(new i.P(X[0],X[1]));oe.push(Z)}return oe}}toGeoJSON(oe,ne,Z){return F.call(this,oe,ne,Z)}}class k{constructor(oe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.Z,this.length=oe.length,this._features=oe}feature(oe){return new O(this._features[oe])}}var q,U,H,se={exports:{}},ie=function(){if(H)return se.exports;H=1;var qe=i.cK(),oe=function(){if(U)return q;U=1;var Ne=i.cI(),Me=i.cJ().VectorTileFeature;function Ge(gt,Rt){this.options=Rt||{},this.features=gt,this.length=gt.length}function lt(gt,Rt){this.id=typeof gt.id=="number"?gt.id:void 0,this.type=gt.type,this.rawGeometry=gt.type===1?[gt.geometry]:gt.geometry,this.properties=gt.tags,this.extent=Rt||4096}return q=Ge,Ge.prototype.feature=function(gt){return new lt(this.features[gt],this.options.extent)},lt.prototype.loadGeometry=function(){var gt=this.rawGeometry;this.geometry=[];for(var Rt=0;Rt<gt.length;Rt++){for(var Xt=gt[Rt],Gt=[],Ye=0;Ye<Xt.length;Ye++)Gt.push(new Ne(Xt[Ye][0],Xt[Ye][1]));this.geometry.push(Gt)}return this.geometry},lt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var gt=this.geometry,Rt=1/0,Xt=-1/0,Gt=1/0,Ye=-1/0,Fr=0;Fr<gt.length;Fr++)for(var Sr=gt[Fr],Dr=0;Dr<Sr.length;Dr++){var nr=Sr[Dr];Rt=Math.min(Rt,nr.x),Xt=Math.max(Xt,nr.x),Gt=Math.min(Gt,nr.y),Ye=Math.max(Ye,nr.y)}return[Rt,Gt,Xt,Ye]},lt.prototype.toGeoJSON=Me.prototype.toGeoJSON,q}();function ne(Ne){var Me=new qe;return function(Ge,lt){for(var gt in Ge.layers)lt.writeMessage(3,Z,Ge.layers[gt])}(Ne,Me),Me.finish()}function Z(Ne,Me){var Ge;Me.writeVarintField(15,Ne.version||1),Me.writeStringField(1,Ne.name||""),Me.writeVarintField(5,Ne.extent||4096);var lt={keys:[],values:[],keycache:{},valuecache:{}};for(Ge=0;Ge<Ne.length;Ge++)lt.feature=Ne.feature(Ge),Me.writeMessage(2,X,lt);var gt=lt.keys;for(Ge=0;Ge<gt.length;Ge++)Me.writeStringField(3,gt[Ge]);var Rt=lt.values;for(Ge=0;Ge<Rt.length;Ge++)Me.writeMessage(4,Ce,Rt[Ge])}function X(Ne,Me){var Ge=Ne.feature;Ge.id!==void 0&&Me.writeVarintField(1,Ge.id),Me.writeMessage(2,he,Ne),Me.writeVarintField(3,Ge.type),Me.writeMessage(4,xe,Ge)}function he(Ne,Me){var Ge=Ne.feature,lt=Ne.keys,gt=Ne.values,Rt=Ne.keycache,Xt=Ne.valuecache;for(var Gt in Ge.properties){var Ye=Ge.properties[Gt],Fr=Rt[Gt];if(Ye!==null){Fr===void 0&&(lt.push(Gt),Rt[Gt]=Fr=lt.length-1),Me.writeVarint(Fr);var Sr=typeof Ye;Sr!=="string"&&Sr!=="boolean"&&Sr!=="number"&&(Ye=JSON.stringify(Ye));var Dr=Sr+":"+Ye,nr=Xt[Dr];nr===void 0&&(gt.push(Ye),Xt[Dr]=nr=gt.length-1),Me.writeVarint(nr)}}}function ee(Ne,Me){return(Me<<3)+(7&Ne)}function Ie(Ne){return Ne<<1^Ne>>31}function xe(Ne,Me){for(var Ge=Ne.loadGeometry(),lt=Ne.type,gt=0,Rt=0,Xt=Ge.length,Gt=0;Gt<Xt;Gt++){var Ye=Ge[Gt],Fr=1;lt===1&&(Fr=Ye.length),Me.writeVarint(ee(1,Fr));for(var Sr=lt===3?Ye.length-1:Ye.length,Dr=0;Dr<Sr;Dr++){Dr===1&&lt!==1&&Me.writeVarint(ee(2,Sr-1));var nr=Ye[Dr].x-gt,ot=Ye[Dr].y-Rt;Me.writeVarint(Ie(nr)),Me.writeVarint(Ie(ot)),gt+=nr,Rt+=ot}lt===3&&Me.writeVarint(ee(7,1))}}function Ce(Ne,Me){var Ge=typeof Ne;Ge==="string"?Me.writeStringField(1,Ne):Ge==="boolean"?Me.writeBooleanField(7,Ne):Ge==="number"&&(Ne%1!=0?Me.writeDoubleField(3,Ne):Ne<0?Me.writeSVarintField(6,Ne):Me.writeVarintField(5,Ne))}return se.exports=ne,se.exports.fromVectorTileJs=ne,se.exports.fromGeojsonVt=function(Ne,Me){Me=Me||{};var Ge={};for(var lt in Ne)Ge[lt]=new oe(Ne[lt].features,Me),Ge[lt].name=lt,Ge[lt].version=Me.version,Ge[lt].extent=Me.extent;return ne({layers:Ge})},se.exports.GeoJSONWrapper=oe,se.exports}(),ue=i.cH(ie);let ve={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:qe=>qe},ye=Math.fround||(ge=new Float32Array(1),qe=>(ge[0]=+qe,ge[0]));var ge;let _e=3,Le=5,Re=6;class je{constructor(oe){this.options=Object.assign(Object.create(ve),oe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(oe){let{log:ne,minZoom:Z,maxZoom:X}=this.options;ne&&console.time("total time");let he=`prepare ${oe.length} points`;ne&&console.time(he),this.points=oe;let ee=[];for(let xe=0;xe<oe.length;xe++){let Ce=oe[xe];if(!Ce.geometry)continue;let[Ne,Me]=Ce.geometry.coordinates,Ge=ye(nt(Ne)),lt=ye(We(Me));ee.push(Ge,lt,1/0,xe,-1,1),this.options.reduce&&ee.push(0)}let Ie=this.trees[X+1]=this._createTree(ee);ne&&console.timeEnd(he);for(let xe=X;xe>=Z;xe--){let Ce=+Date.now();Ie=this.trees[xe]=this._createTree(this._cluster(Ie,xe)),ne&&console.log("z%d: %d clusters in %dms",xe,Ie.numItems,+Date.now()-Ce)}return ne&&console.timeEnd("total time"),this}getClusters(oe,ne){let Z=((oe[0]+180)%360+360)%360-180,X=Math.max(-90,Math.min(90,oe[1])),he=oe[2]===180?180:((oe[2]+180)%360+360)%360-180,ee=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)Z=-180,he=180;else if(Z>he){let Me=this.getClusters([Z,X,180,ee],ne),Ge=this.getClusters([-180,X,he,ee],ne);return Me.concat(Ge)}let Ie=this.trees[this._limitZoom(ne)],xe=Ie.range(nt(Z),We(ee),nt(he),We(X)),Ce=Ie.data,Ne=[];for(let Me of xe){let Ge=this.stride*Me;Ne.push(Ce[Ge+Le]>1?$e(Ce,Ge,this.clusterProps):this.points[Ce[Ge+_e]])}return Ne}getChildren(oe){let ne=this._getOriginId(oe),Z=this._getOriginZoom(oe),X="No cluster with the specified id.",he=this.trees[Z];if(!he)throw new Error(X);let ee=he.data;if(ne*this.stride>=ee.length)throw new Error(X);let Ie=this.options.radius/(this.options.extent*Math.pow(2,Z-1)),xe=he.within(ee[ne*this.stride],ee[ne*this.stride+1],Ie),Ce=[];for(let Ne of xe){let Me=Ne*this.stride;ee[Me+4]===oe&&Ce.push(ee[Me+Le]>1?$e(ee,Me,this.clusterProps):this.points[ee[Me+_e]])}if(Ce.length===0)throw new Error(X);return Ce}getLeaves(oe,ne,Z){let X=[];return this._appendLeaves(X,oe,ne=ne||10,Z=Z||0,0),X}getTile(oe,ne,Z){let X=this.trees[this._limitZoom(oe)],he=Math.pow(2,oe),{extent:ee,radius:Ie}=this.options,xe=Ie/ee,Ce=(Z-xe)/he,Ne=(Z+1+xe)/he,Me={features:[]};return this._addTileFeatures(X.range((ne-xe)/he,Ce,(ne+1+xe)/he,Ne),X.data,ne,Z,he,Me),ne===0&&this._addTileFeatures(X.range(1-xe/he,Ce,1,Ne),X.data,he,Z,he,Me),ne===he-1&&this._addTileFeatures(X.range(0,Ce,xe/he,Ne),X.data,-1,Z,he,Me),Me.features.length?Me:null}getClusterExpansionZoom(oe){let ne=this._getOriginZoom(oe)-1;for(;ne<=this.options.maxZoom;){let Z=this.getChildren(oe);if(ne++,Z.length!==1)break;oe=Z[0].properties.cluster_id}return ne}_appendLeaves(oe,ne,Z,X,he){let ee=this.getChildren(ne);for(let Ie of ee){let xe=Ie.properties;if(xe&&xe.cluster?he+xe.point_count<=X?he+=xe.point_count:he=this._appendLeaves(oe,xe.cluster_id,Z,X,he):he<X?he++:oe.push(Ie),oe.length===Z)break}return he}_createTree(oe){let ne=new i.aF(oe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Z=0;Z<oe.length;Z+=this.stride)ne.add(oe[Z],oe[Z+1]);return ne.finish(),ne.data=oe,ne}_addTileFeatures(oe,ne,Z,X,he,ee){for(let Ie of oe){let xe=Ie*this.stride,Ce=ne[xe+Le]>1,Ne,Me,Ge;if(Ce)Ne=Be(ne,xe,this.clusterProps),Me=ne[xe],Ge=ne[xe+1];else{let Rt=this.points[ne[xe+_e]];Ne=Rt.properties;let[Xt,Gt]=Rt.geometry.coordinates;Me=nt(Xt),Ge=We(Gt)}let lt={type:1,geometry:[[Math.round(this.options.extent*(Me*he-Z)),Math.round(this.options.extent*(Ge*he-X))]],tags:Ne},gt;gt=Ce||this.options.generateId?ne[xe+_e]:this.points[ne[xe+_e]].id,gt!==void 0&&(lt.id=gt),ee.features.push(lt)}}_limitZoom(oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+oe),this.options.maxZoom+1))}_cluster(oe,ne){let{radius:Z,extent:X,reduce:he,minPoints:ee}=this.options,Ie=Z/(X*Math.pow(2,ne)),xe=oe.data,Ce=[],Ne=this.stride;for(let Me=0;Me<xe.length;Me+=Ne){if(xe[Me+2]<=ne)continue;xe[Me+2]=ne;let Ge=xe[Me],lt=xe[Me+1],gt=oe.within(xe[Me],xe[Me+1],Ie),Rt=xe[Me+Le],Xt=Rt;for(let Gt of gt){let Ye=Gt*Ne;xe[Ye+2]>ne&&(Xt+=xe[Ye+Le])}if(Xt>Rt&&Xt>=ee){let Gt,Ye=Ge*Rt,Fr=lt*Rt,Sr=-1,Dr=((Me/Ne|0)<<5)+(ne+1)+this.points.length;for(let nr of gt){let ot=nr*Ne;if(xe[ot+2]<=ne)continue;xe[ot+2]=ne;let Yt=xe[ot+Le];Ye+=xe[ot]*Yt,Fr+=xe[ot+1]*Yt,xe[ot+4]=Dr,he&&(Gt||(Gt=this._map(xe,Me,!0),Sr=this.clusterProps.length,this.clusterProps.push(Gt)),he(Gt,this._map(xe,ot)))}xe[Me+4]=Dr,Ce.push(Ye/Xt,Fr/Xt,1/0,Dr,-1,Xt),he&&Ce.push(Sr)}else{for(let Gt=0;Gt<Ne;Gt++)Ce.push(xe[Me+Gt]);if(Xt>1)for(let Gt of gt){let Ye=Gt*Ne;if(!(xe[Ye+2]<=ne)){xe[Ye+2]=ne;for(let Fr=0;Fr<Ne;Fr++)Ce.push(xe[Ye+Fr])}}}}return Ce}_getOriginId(oe){return oe-this.points.length>>5}_getOriginZoom(oe){return(oe-this.points.length)%32}_map(oe,ne,Z){if(oe[ne+Le]>1){let ee=this.clusterProps[oe[ne+Re]];return Z?Object.assign({},ee):ee}let X=this.points[oe[ne+_e]].properties,he=this.options.map(X);return Z&&he===X?Object.assign({},he):he}}function $e(qe,oe,ne){return{type:"Feature",id:qe[oe+_e],properties:Be(qe,oe,ne),geometry:{type:"Point",coordinates:[(Z=qe[oe],360*(Z-.5)),mt(qe[oe+1])]}};var Z}function Be(qe,oe,ne){let Z=qe[oe+Le],X=Z>=1e4?`${Math.round(Z/1e3)}k`:Z>=1e3?Math.round(Z/100)/10+"k":Z,he=qe[oe+Re],ee=he===-1?{}:Object.assign({},ne[he]);return Object.assign(ee,{cluster:!0,cluster_id:qe[oe+_e],point_count:Z,point_count_abbreviated:X})}function nt(qe){return qe/360+.5}function We(qe){let oe=Math.sin(qe*Math.PI/180),ne=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return ne<0?0:ne>1?1:ne}function mt(qe){let oe=(180-360*qe)*Math.PI/180;return 360*Math.atan(Math.exp(oe))/Math.PI-90}function ht(qe,oe,ne,Z){let X=Z,he=oe+(ne-oe>>1),ee,Ie=ne-oe,xe=qe[oe],Ce=qe[oe+1],Ne=qe[ne],Me=qe[ne+1];for(let Ge=oe+3;Ge<ne;Ge+=3){let lt=_t(qe[Ge],qe[Ge+1],xe,Ce,Ne,Me);if(lt>X)ee=Ge,X=lt;else if(lt===X){let gt=Math.abs(Ge-he);gt<Ie&&(ee=Ge,Ie=gt)}}X>Z&&(ee-oe>3&&ht(qe,oe,ee,Z),qe[ee+2]=X,ne-ee>3&&ht(qe,ee,ne,Z))}function _t(qe,oe,ne,Z,X,he){let ee=X-ne,Ie=he-Z;if(ee!==0||Ie!==0){let xe=((qe-ne)*ee+(oe-Z)*Ie)/(ee*ee+Ie*Ie);xe>1?(ne=X,Z=he):xe>0&&(ne+=ee*xe,Z+=Ie*xe)}return ee=qe-ne,Ie=oe-Z,ee*ee+Ie*Ie}function ze(qe,oe,ne,Z){let X={id:qe==null?null:qe,type:oe,geometry:ne,tags:Z,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(oe==="Point"||oe==="MultiPoint"||oe==="LineString")St(X,ne);else if(oe==="Polygon")St(X,ne[0]);else if(oe==="MultiLineString")for(let he of ne)St(X,he);else if(oe==="MultiPolygon")for(let he of ne)St(X,he[0]);return X}function St(qe,oe){for(let ne=0;ne<oe.length;ne+=3)qe.minX=Math.min(qe.minX,oe[ne]),qe.minY=Math.min(qe.minY,oe[ne+1]),qe.maxX=Math.max(qe.maxX,oe[ne]),qe.maxY=Math.max(qe.maxY,oe[ne+1])}function jt(qe,oe,ne,Z){if(!oe.geometry)return;let X=oe.geometry.coordinates;if(X&&X.length===0)return;let he=oe.geometry.type,ee=Math.pow(ne.tolerance/((1<<ne.maxZoom)*ne.extent),2),Ie=[],xe=oe.id;if(ne.promoteId?xe=oe.properties[ne.promoteId]:ne.generateId&&(xe=Z||0),he==="Point")Fe(X,Ie);else if(he==="MultiPoint")for(let Ce of X)Fe(Ce,Ie);else if(he==="LineString")st(X,Ie,ee,!1);else if(he==="MultiLineString"){if(ne.lineMetrics){for(let Ce of X)Ie=[],st(Ce,Ie,ee,!1),qe.push(ze(xe,"LineString",Ie,oe.properties));return}He(X,Ie,ee,!1)}else if(he==="Polygon")He(X,Ie,ee,!0);else{if(he!=="MultiPolygon"){if(he==="GeometryCollection"){for(let Ce of oe.geometry.geometries)jt(qe,{id:xe,geometry:Ce,properties:oe.properties},ne,Z);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Ce of X){let Ne=[];He(Ce,Ne,ee,!0),Ie.push(Ne)}}qe.push(ze(xe,he,Ie,oe.properties))}function Fe(qe,oe){oe.push(et(qe[0]),it(qe[1]),0)}function st(qe,oe,ne,Z){let X,he,ee=0;for(let xe=0;xe<qe.length;xe++){let Ce=et(qe[xe][0]),Ne=it(qe[xe][1]);oe.push(Ce,Ne,0),xe>0&&(ee+=Z?(X*Ne-Ce*he)/2:Math.sqrt(Math.pow(Ce-X,2)+Math.pow(Ne-he,2))),X=Ce,he=Ne}let Ie=oe.length-3;oe[2]=1,ht(oe,0,Ie,ne),oe[Ie+2]=1,oe.size=Math.abs(ee),oe.start=0,oe.end=oe.size}function He(qe,oe,ne,Z){for(let X=0;X<qe.length;X++){let he=[];st(qe[X],he,ne,Z),oe.push(he)}}function et(qe){return qe/360+.5}function it(qe){let oe=Math.sin(qe*Math.PI/180),ne=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return ne<0?0:ne>1?1:ne}function at(qe,oe,ne,Z,X,he,ee,Ie){if(Z/=oe,he>=(ne/=oe)&&ee<Z)return qe;if(ee<ne||he>=Z)return null;let xe=[];for(let Ce of qe){let Ne=Ce.geometry,Me=Ce.type,Ge=X===0?Ce.minX:Ce.minY,lt=X===0?Ce.maxX:Ce.maxY;if(Ge>=ne&&lt<Z){xe.push(Ce);continue}if(lt<ne||Ge>=Z)continue;let gt=[];if(Me==="Point"||Me==="MultiPoint")Nt(Ne,gt,ne,Z,X);else if(Me==="LineString")At(Ne,gt,ne,Z,X,!1,Ie.lineMetrics);else if(Me==="MultiLineString")Ut(Ne,gt,ne,Z,X,!1);else if(Me==="Polygon")Ut(Ne,gt,ne,Z,X,!0);else if(Me==="MultiPolygon")for(let Rt of Ne){let Xt=[];Ut(Rt,Xt,ne,Z,X,!0),Xt.length&&gt.push(Xt)}if(gt.length){if(Ie.lineMetrics&&Me==="LineString"){for(let Rt of gt)xe.push(ze(Ce.id,Me,Rt,Ce.tags));continue}Me!=="LineString"&&Me!=="MultiLineString"||(gt.length===1?(Me="LineString",gt=gt[0]):Me="MultiLineString"),Me!=="Point"&&Me!=="MultiPoint"||(Me=gt.length===3?"Point":"MultiPoint"),xe.push(ze(Ce.id,Me,gt,Ce.tags))}}return xe.length?xe:null}function Nt(qe,oe,ne,Z,X){for(let he=0;he<qe.length;he+=3){let ee=qe[he+X];ee>=ne&&ee<=Z&&Vt(oe,qe[he],qe[he+1],qe[he+2])}}function At(qe,oe,ne,Z,X,he,ee){let Ie=Mt(qe),xe=X===0?$t:Lr,Ce,Ne,Me=qe.start;for(let Xt=0;Xt<qe.length-3;Xt+=3){let Gt=qe[Xt],Ye=qe[Xt+1],Fr=qe[Xt+2],Sr=qe[Xt+3],Dr=qe[Xt+4],nr=X===0?Gt:Ye,ot=X===0?Sr:Dr,Yt=!1;ee&&(Ce=Math.sqrt(Math.pow(Gt-Sr,2)+Math.pow(Ye-Dr,2))),nr<ne?ot>ne&&(Ne=xe(Ie,Gt,Ye,Sr,Dr,ne),ee&&(Ie.start=Me+Ce*Ne)):nr>Z?ot<Z&&(Ne=xe(Ie,Gt,Ye,Sr,Dr,Z),ee&&(Ie.start=Me+Ce*Ne)):Vt(Ie,Gt,Ye,Fr),ot<ne&&nr>=ne&&(Ne=xe(Ie,Gt,Ye,Sr,Dr,ne),Yt=!0),ot>Z&&nr<=Z&&(Ne=xe(Ie,Gt,Ye,Sr,Dr,Z),Yt=!0),!he&&Yt&&(ee&&(Ie.end=Me+Ce*Ne),oe.push(Ie),Ie=Mt(qe)),ee&&(Me+=Ce)}let Ge=qe.length-3,lt=qe[Ge],gt=qe[Ge+1],Rt=X===0?lt:gt;Rt>=ne&&Rt<=Z&&Vt(Ie,lt,gt,qe[Ge+2]),Ge=Ie.length-3,he&&Ge>=3&&(Ie[Ge]!==Ie[0]||Ie[Ge+1]!==Ie[1])&&Vt(Ie,Ie[0],Ie[1],Ie[2]),Ie.length&&oe.push(Ie)}function Mt(qe){let oe=[];return oe.size=qe.size,oe.start=qe.start,oe.end=qe.end,oe}function Ut(qe,oe,ne,Z,X,he){for(let ee of qe)At(ee,oe,ne,Z,X,he,!1)}function Vt(qe,oe,ne,Z){qe.push(oe,ne,Z)}function $t(qe,oe,ne,Z,X,he){let ee=(he-oe)/(Z-oe);return Vt(qe,he,ne+(X-ne)*ee,1),ee}function Lr(qe,oe,ne,Z,X,he){let ee=(he-ne)/(X-ne);return Vt(qe,oe+(Z-oe)*ee,he,1),ee}function yr(qe,oe){let ne=[];for(let Z=0;Z<qe.length;Z++){let X=qe[Z],he=X.type,ee;if(he==="Point"||he==="MultiPoint"||he==="LineString")ee=ur(X.geometry,oe);else if(he==="MultiLineString"||he==="Polygon"){ee=[];for(let Ie of X.geometry)ee.push(ur(Ie,oe))}else if(he==="MultiPolygon"){ee=[];for(let Ie of X.geometry){let xe=[];for(let Ce of Ie)xe.push(ur(Ce,oe));ee.push(xe)}}ne.push(ze(X.id,he,ee,X.tags))}return ne}function ur(qe,oe){let ne=[];ne.size=qe.size,qe.start!==void 0&&(ne.start=qe.start,ne.end=qe.end);for(let Z=0;Z<qe.length;Z+=3)ne.push(qe[Z]+oe,qe[Z+1],qe[Z+2]);return ne}function cr(qe,oe){if(qe.transformed)return qe;let ne=1<<qe.z,Z=qe.x,X=qe.y;for(let he of qe.features){let ee=he.geometry,Ie=he.type;if(he.geometry=[],Ie===1)for(let xe=0;xe<ee.length;xe+=2)he.geometry.push(hr(ee[xe],ee[xe+1],oe,ne,Z,X));else for(let xe=0;xe<ee.length;xe++){let Ce=[];for(let Ne=0;Ne<ee[xe].length;Ne+=2)Ce.push(hr(ee[xe][Ne],ee[xe][Ne+1],oe,ne,Z,X));he.geometry.push(Ce)}}return qe.transformed=!0,qe}function hr(qe,oe,ne,Z,X,he){return[Math.round(ne*(qe*Z-X)),Math.round(ne*(oe*Z-he))]}function dr(qe,oe,ne,Z,X){let he=oe===X.maxZoom?0:X.tolerance/((1<<oe)*X.extent),ee={features:[],numPoints:0,numSimplified:0,numFeatures:qe.length,source:null,x:ne,y:Z,z:oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let Ie of qe)an(ee,Ie,he,X);return ee}function an(qe,oe,ne,Z){let X=oe.geometry,he=oe.type,ee=[];if(qe.minX=Math.min(qe.minX,oe.minX),qe.minY=Math.min(qe.minY,oe.minY),qe.maxX=Math.max(qe.maxX,oe.maxX),qe.maxY=Math.max(qe.maxY,oe.maxY),he==="Point"||he==="MultiPoint")for(let Ie=0;Ie<X.length;Ie+=3)ee.push(X[Ie],X[Ie+1]),qe.numPoints++,qe.numSimplified++;else if(he==="LineString")wn(ee,X,qe,ne,!1,!1);else if(he==="MultiLineString"||he==="Polygon")for(let Ie=0;Ie<X.length;Ie++)wn(ee,X[Ie],qe,ne,he==="Polygon",Ie===0);else if(he==="MultiPolygon")for(let Ie=0;Ie<X.length;Ie++){let xe=X[Ie];for(let Ce=0;Ce<xe.length;Ce++)wn(ee,xe[Ce],qe,ne,!0,Ce===0)}if(ee.length){let Ie=oe.tags||null;if(he==="LineString"&&Z.lineMetrics){Ie={};for(let Ce in oe.tags)Ie[Ce]=oe.tags[Ce];Ie.mapbox_clip_start=X.start/X.size,Ie.mapbox_clip_end=X.end/X.size}let xe={geometry:ee,type:he==="Polygon"||he==="MultiPolygon"?3:he==="LineString"||he==="MultiLineString"?2:1,tags:Ie};oe.id!==null&&(xe.id=oe.id),qe.features.push(xe)}}function wn(qe,oe,ne,Z,X,he){let ee=Z*Z;if(Z>0&&oe.size<(X?ee:Z))return void(ne.numPoints+=oe.length/3);let Ie=[];for(let xe=0;xe<oe.length;xe+=3)(Z===0||oe[xe+2]>ee)&&(ne.numSimplified++,Ie.push(oe[xe],oe[xe+1])),ne.numPoints++;X&&function(xe,Ce){let Ne=0;for(let Me=0,Ge=xe.length,lt=Ge-2;Me<Ge;lt=Me,Me+=2)Ne+=(xe[Me]-xe[lt])*(xe[Me+1]+xe[lt+1]);if(Ne>0===Ce)for(let Me=0,Ge=xe.length;Me<Ge/2;Me+=2){let lt=xe[Me],gt=xe[Me+1];xe[Me]=xe[Ge-2-Me],xe[Me+1]=xe[Ge-1-Me],xe[Ge-2-Me]=lt,xe[Ge-1-Me]=gt}}(Ie,he),qe.push(Ie)}let Ln={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Un{constructor(oe,ne){let Z=(ne=this.options=function(he,ee){for(let Ie in ee)he[Ie]=ee[Ie];return he}(Object.create(Ln),ne)).debug;if(Z&&console.time("preprocess data"),ne.maxZoom<0||ne.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ne.promoteId&&ne.generateId)throw new Error("promoteId and generateId cannot be used together.");let X=function(he,ee){let Ie=[];if(he.type==="FeatureCollection")for(let xe=0;xe<he.features.length;xe++)jt(Ie,he.features[xe],ee,xe);else jt(Ie,he.type==="Feature"?he:{geometry:he},ee);return Ie}(oe,ne);this.tiles={},this.tileCoords=[],Z&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ne.indexMaxZoom,ne.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),X=function(he,ee){let Ie=ee.buffer/ee.extent,xe=he,Ce=at(he,1,-1-Ie,Ie,0,-1,2,ee),Ne=at(he,1,1-Ie,2+Ie,0,-1,2,ee);return(Ce||Ne)&&(xe=at(he,1,-Ie,1+Ie,0,-1,2,ee)||[],Ce&&(xe=yr(Ce,1).concat(xe)),Ne&&(xe=xe.concat(yr(Ne,-1)))),xe}(X,ne),X.length&&this.splitTile(X,0,0,0),Z&&(X.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(oe,ne,Z,X,he,ee,Ie){let xe=[oe,ne,Z,X],Ce=this.options,Ne=Ce.debug;for(;xe.length;){X=xe.pop(),Z=xe.pop(),ne=xe.pop(),oe=xe.pop();let Me=1<<ne,Ge=di(ne,Z,X),lt=this.tiles[Ge];if(!lt&&(Ne>1&&console.time("creation"),lt=this.tiles[Ge]=dr(oe,ne,Z,X,Ce),this.tileCoords.push({z:ne,x:Z,y:X}),Ne)){Ne>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ne,Z,X,lt.numFeatures,lt.numPoints,lt.numSimplified),console.timeEnd("creation"));let Yt=`z${ne}`;this.stats[Yt]=(this.stats[Yt]||0)+1,this.total++}if(lt.source=oe,he==null){if(ne===Ce.indexMaxZoom||lt.numPoints<=Ce.indexMaxPoints)continue}else{if(ne===Ce.maxZoom||ne===he)continue;if(he!=null){let Yt=he-ne;if(Z!==ee>>Yt||X!==Ie>>Yt)continue}}if(lt.source=null,oe.length===0)continue;Ne>1&&console.time("clipping");let gt=.5*Ce.buffer/Ce.extent,Rt=.5-gt,Xt=.5+gt,Gt=1+gt,Ye=null,Fr=null,Sr=null,Dr=null,nr=at(oe,Me,Z-gt,Z+Xt,0,lt.minX,lt.maxX,Ce),ot=at(oe,Me,Z+Rt,Z+Gt,0,lt.minX,lt.maxX,Ce);oe=null,nr&&(Ye=at(nr,Me,X-gt,X+Xt,1,lt.minY,lt.maxY,Ce),Fr=at(nr,Me,X+Rt,X+Gt,1,lt.minY,lt.maxY,Ce),nr=null),ot&&(Sr=at(ot,Me,X-gt,X+Xt,1,lt.minY,lt.maxY,Ce),Dr=at(ot,Me,X+Rt,X+Gt,1,lt.minY,lt.maxY,Ce),ot=null),Ne>1&&console.timeEnd("clipping"),xe.push(Ye||[],ne+1,2*Z,2*X),xe.push(Fr||[],ne+1,2*Z,2*X+1),xe.push(Sr||[],ne+1,2*Z+1,2*X),xe.push(Dr||[],ne+1,2*Z+1,2*X+1)}}getTile(oe,ne,Z){oe=+oe,ne=+ne,Z=+Z;let X=this.options,{extent:he,debug:ee}=X;if(oe<0||oe>24)return null;let Ie=1<<oe,xe=di(oe,ne=ne+Ie&Ie-1,Z);if(this.tiles[xe])return cr(this.tiles[xe],he);ee>1&&console.log("drilling down to z%d-%d-%d",oe,ne,Z);let Ce,Ne=oe,Me=ne,Ge=Z;for(;!Ce&&Ne>0;)Ne--,Me>>=1,Ge>>=1,Ce=this.tiles[di(Ne,Me,Ge)];return Ce&&Ce.source?(ee>1&&(console.log("found parent tile z%d-%d-%d",Ne,Me,Ge),console.time("drilling down")),this.splitTile(Ce.source,Ne,Me,Ge,oe,ne,Z),ee>1&&console.timeEnd("drilling down"),this.tiles[xe]?cr(this.tiles[xe],he):null):null}}function di(qe,oe,ne){return 32*((1<<qe)*ne+oe)+qe}function Li(qe,oe){return oe?qe.properties[oe]:qe.id}function ao(qe,oe){if(qe==null)return!0;if(qe.type==="Feature")return Li(qe,oe)!=null;if(qe.type==="FeatureCollection"){let ne=new Set;for(let Z of qe.features){let X=Li(Z,oe);if(X==null||ne.has(X))return!1;ne.add(X)}return!0}return!1}function Qn(qe,oe){let ne=new Map;if(qe!=null)if(qe.type==="Feature")ne.set(Li(qe,oe),qe);else for(let Z of qe.features)ne.set(Li(Z,oe),Z);return ne}class ri extends g{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(oe,ne){return i._(this,void 0,void 0,function*(){let Z=oe.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let X=this._geoJSONIndex.getTile(Z.z,Z.x,Z.y);if(!X)return null;let he=new k(X.features),ee=ue(he);return ee.byteOffset===0&&ee.byteLength===ee.buffer.byteLength||(ee=new Uint8Array(ee)),{vectorTile:he,rawData:ee.buffer}})}loadData(oe){return i._(this,void 0,void 0,function*(){var ne;(ne=this._pendingRequest)===null||ne===void 0||ne.abort();let Z=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new i.cE(oe.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(oe,this._pendingRequest),this._geoJSONIndex=oe.cluster?new je(function({superclusterOptions:ee,clusterProperties:Ie}){if(!Ie||!ee)return ee;let xe={},Ce={},Ne={accumulated:null,zoom:0},Me={properties:null},Ge=Object.keys(Ie);for(let lt of Ge){let[gt,Rt]=Ie[lt],Xt=i.cL(Rt),Gt=i.cL(typeof gt=="string"?[gt,["accumulated"],["get",lt]]:gt);xe[lt]=Xt.value,Ce[lt]=Gt.value}return ee.map=lt=>{Me.properties=lt;let gt={};for(let Rt of Ge)gt[Rt]=xe[Rt].evaluate(Ne,Me);return gt},ee.reduce=(lt,gt)=>{Me.properties=gt;for(let Rt of Ge)Ne.accumulated=lt[Rt],lt[Rt]=Ce[Rt].evaluate(Ne,Me)},ee}(oe)).load((yield this._pendingData).features):(X=yield this._pendingData,new Un(X,oe.geojsonVtOptions)),this.loaded={};let he={};if(Z){let ee=Z.finish();ee&&(he.resourceTiming={},he.resourceTiming[oe.source]=JSON.parse(JSON.stringify(ee)))}return he}catch(he){if(delete this._pendingRequest,i.cp(he))return{abandoned:!0};throw he}var X})}getData(){return i._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(oe){let ne=this.loaded;return ne&&ne[oe.uid]?super.reloadTile(oe):this.loadTile(oe)}loadAndProcessGeoJSON(oe,ne){return i._(this,void 0,void 0,function*(){let Z=yield this.loadGeoJSON(oe,ne);if(delete this._pendingRequest,typeof Z!="object")throw new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`);if(D(Z,!0),oe.filter){let X=i.cL(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(X.result==="error")throw new Error(X.value.map(ee=>`${ee.key}: ${ee.message}`).join(", "));Z={type:"FeatureCollection",features:Z.features.filter(ee=>X.value.evaluate({zoom:0},ee))}}return Z})}loadGeoJSON(oe,ne){return i._(this,void 0,void 0,function*(){let{promoteId:Z}=oe;if(oe.request){let X=yield i.j(oe.request,ne);return this._dataUpdateable=ao(X.data,Z)?Qn(X.data,Z):void 0,X.data}if(typeof oe.data=="string")try{let X=JSON.parse(oe.data);return this._dataUpdateable=ao(X,Z)?Qn(X,Z):void 0,X}catch(X){throw new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`)}if(!oe.dataDiff)throw new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${oe.source}`);return function(X,he,ee){var Ie,xe,Ce,Ne;if(he.removeAll&&X.clear(),he.remove)for(let Me of he.remove)X.delete(Me);if(he.add)for(let Me of he.add){let Ge=Li(Me,ee);Ge!=null&&X.set(Ge,Me)}if(he.update)for(let Me of he.update){let Ge=X.get(Me.id);if(Ge==null)continue;let lt=!Me.removeAllProperties&&(((Ie=Me.removeProperties)===null||Ie===void 0?void 0:Ie.length)>0||((xe=Me.addOrUpdateProperties)===null||xe===void 0?void 0:xe.length)>0);if((Me.newGeometry||Me.removeAllProperties||lt)&&(Ge=Object.assign({},Ge),X.set(Me.id,Ge),lt&&(Ge.properties=Object.assign({},Ge.properties))),Me.newGeometry&&(Ge.geometry=Me.newGeometry),Me.removeAllProperties)Ge.properties={};else if(((Ce=Me.removeProperties)===null||Ce===void 0?void 0:Ce.length)>0)for(let gt of Me.removeProperties)Object.prototype.hasOwnProperty.call(Ge.properties,gt)&&delete Ge.properties[gt];if(((Ne=Me.addOrUpdateProperties)===null||Ne===void 0?void 0:Ne.length)>0)for(let{key:gt,value:Rt}of Me.addOrUpdateProperties)Ge.properties[gt]=Rt}}(this._dataUpdateable,oe.dataDiff,Z),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(oe){return i._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(oe){return this._geoJSONIndex.getClusterExpansionZoom(oe.clusterId)}getClusterChildren(oe){return this._geoJSONIndex.getChildren(oe.clusterId)}getClusterLeaves(oe){return this._geoJSONIndex.getLeaves(oe.clusterId,oe.limit,oe.offset)}}class so{constructor(oe){this.self=oe,this.actor=new i.H(oe),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ne,Z)=>{if(this.externalWorkerSourceTypes[ne])throw new Error(`Worker source with name "${ne}" already registered.`);this.externalWorkerSourceTypes[ne]=Z},this.self.addProtocol=i.cr,this.self.removeProtocol=i.cs,this.self.registerRTLTextPlugin=ne=>{i.cM.setMethods(ne)},this.actor.registerMessageHandler("LDT",(ne,Z)=>this._getDEMWorkerSource(ne,Z.source).loadTile(Z)),this.actor.registerMessageHandler("RDT",(ne,Z)=>i._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ne,Z.source).removeTile(Z)})),this.actor.registerMessageHandler("GCEZ",(ne,Z)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(ne,Z.type,Z.source).getClusterExpansionZoom(Z)})),this.actor.registerMessageHandler("GCC",(ne,Z)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(ne,Z.type,Z.source).getClusterChildren(Z)})),this.actor.registerMessageHandler("GCL",(ne,Z)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(ne,Z.type,Z.source).getClusterLeaves(Z)})),this.actor.registerMessageHandler("LD",(ne,Z)=>this._getWorkerSource(ne,Z.type,Z.source).loadData(Z)),this.actor.registerMessageHandler("GD",(ne,Z)=>this._getWorkerSource(ne,Z.type,Z.source).getData()),this.actor.registerMessageHandler("LT",(ne,Z)=>this._getWorkerSource(ne,Z.type,Z.source).loadTile(Z)),this.actor.registerMessageHandler("RT",(ne,Z)=>this._getWorkerSource(ne,Z.type,Z.source).reloadTile(Z)),this.actor.registerMessageHandler("AT",(ne,Z)=>this._getWorkerSource(ne,Z.type,Z.source).abortTile(Z)),this.actor.registerMessageHandler("RMT",(ne,Z)=>this._getWorkerSource(ne,Z.type,Z.source).removeTile(Z)),this.actor.registerMessageHandler("RS",(ne,Z)=>i._(this,void 0,void 0,function*(){if(!this.workerSources[ne]||!this.workerSources[ne][Z.type]||!this.workerSources[ne][Z.type][Z.source])return;let X=this.workerSources[ne][Z.type][Z.source];delete this.workerSources[ne][Z.type][Z.source],X.removeSource!==void 0&&X.removeSource(Z)})),this.actor.registerMessageHandler("RM",ne=>i._(this,void 0,void 0,function*(){delete this.layerIndexes[ne],delete this.availableImages[ne],delete this.workerSources[ne],delete this.demWorkerSources[ne]})),this.actor.registerMessageHandler("SR",(ne,Z)=>i._(this,void 0,void 0,function*(){this.referrer=Z})),this.actor.registerMessageHandler("SRPS",(ne,Z)=>this._syncRTLPluginState(ne,Z)),this.actor.registerMessageHandler("IS",(ne,Z)=>i._(this,void 0,void 0,function*(){this.self.importScripts(Z)})),this.actor.registerMessageHandler("SI",(ne,Z)=>this._setImages(ne,Z)),this.actor.registerMessageHandler("UL",(ne,Z)=>i._(this,void 0,void 0,function*(){this._getLayerIndex(ne).update(Z.layers,Z.removedIds)})),this.actor.registerMessageHandler("SL",(ne,Z)=>i._(this,void 0,void 0,function*(){this._getLayerIndex(ne).replace(Z)}))}_setImages(oe,ne){return i._(this,void 0,void 0,function*(){this.availableImages[oe]=ne;for(let Z in this.workerSources[oe]){let X=this.workerSources[oe][Z];for(let he in X)X[he].availableImages=ne}})}_syncRTLPluginState(oe,ne){return i._(this,void 0,void 0,function*(){return yield i.cM.syncState(ne,this.self.importScripts)})}_getAvailableImages(oe){let ne=this.availableImages[oe];return ne||(ne=[]),ne}_getLayerIndex(oe){let ne=this.layerIndexes[oe];return ne||(ne=this.layerIndexes[oe]=new o),ne}_getWorkerSource(oe,ne,Z){if(this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][ne]||(this.workerSources[oe][ne]={}),!this.workerSources[oe][ne][Z]){let X={sendAsync:(he,ee)=>(he.targetMapId=oe,this.actor.sendAsync(he,ee))};switch(ne){case"vector":this.workerSources[oe][ne][Z]=new g(X,this._getLayerIndex(oe),this._getAvailableImages(oe));break;case"geojson":this.workerSources[oe][ne][Z]=new ri(X,this._getLayerIndex(oe),this._getAvailableImages(oe));break;default:this.workerSources[oe][ne][Z]=new this.externalWorkerSourceTypes[ne](X,this._getLayerIndex(oe),this._getAvailableImages(oe))}}return this.workerSources[oe][ne][Z]}_getDEMWorkerSource(oe,ne){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][ne]||(this.demWorkerSources[oe][ne]=new _),this.demWorkerSources[oe][ne]}}return i.i(self)&&(self.worker=new so(self)),so}),t("index",["exports","./shared"],function(i,o){"use strict";var l="5.5.0";function c(){var b=new o.A(4);return o.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b}let p,g,_={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(b,a,u){let m=requestAnimationFrame(w=>{v(),a(w)}),{unsubscribe:v}=o.s(b.signal,"abort",()=>{v(),cancelAnimationFrame(m),u(o.c())},!1)},frameAsync(b){return new Promise((a,u)=>{this.frame(b,a,u)})},getImageData(b,a=0){return this.getImageCanvasContext(b).getImageData(-a,-a,b.width+2*a,b.height+2*a)},getImageCanvasContext(b){let a=window.document.createElement("canvas"),u=a.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return a.width=b.width,a.height=b.height,u.drawImage(b,0,0,b.width,b.height),u},resolveURL:b=>(p||(p=document.createElement("a")),p.href=b,p.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(g==null&&(g=matchMedia("(prefers-reduced-motion: reduce)")),g.matches)}};class x{static testProp(a){if(!x.docStyle)return a[0];for(let u=0;u<a.length;u++)if(a[u]in x.docStyle)return a[u];return a[0]}static create(a,u,m){let v=window.document.createElement(a);return u!==void 0&&(v.className=u),m&&m.appendChild(v),v}static createNS(a,u){return window.document.createElementNS(a,u)}static disableDrag(){x.docStyle&&x.selectProp&&(x.userSelect=x.docStyle[x.selectProp],x.docStyle[x.selectProp]="none")}static enableDrag(){x.docStyle&&x.selectProp&&(x.docStyle[x.selectProp]=x.userSelect)}static setTransform(a,u){a.style[x.transformProp]=u}static addEventListener(a,u,m,v={}){a.addEventListener(u,m,"passive"in v?v:v.capture)}static removeEventListener(a,u,m,v={}){a.removeEventListener(u,m,"passive"in v?v:v.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",x.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",x.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",x.suppressClickInternal,!0)},0)}static getScale(a){let u=a.getBoundingClientRect();return{x:u.width/a.offsetWidth||1,y:u.height/a.offsetHeight||1,boundingClientRect:u}}static getPoint(a,u,m){let v=u.boundingClientRect;return new o.P((m.clientX-v.left)/u.x-a.clientLeft,(m.clientY-v.top)/u.y-a.clientTop)}static mousePos(a,u){let m=x.getScale(a);return x.getPoint(a,m,u)}static touchPos(a,u){let m=[],v=x.getScale(a);for(let w=0;w<u.length;w++)m.push(x.getPoint(a,v,u[w]));return m}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}static sanitize(a){let u=new DOMParser().parseFromString(a,"text/html").body||document.createElement("body"),m=u.querySelectorAll("script");for(let v of m)v.remove();return x.clean(u),u.innerHTML}static isPossiblyDangerous(a,u){let m=u.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(a)||!m.includes("javascript:")&&!m.includes("data:"))||!!a.startsWith("on")||void 0}static clean(a){let u=a.children;for(let m of u)x.removeAttributes(m),x.clean(m)}static removeAttributes(a){for(let{name:u,value:m}of a.attributes)x.isPossiblyDangerous(u,m)&&a.removeAttribute(u)}}x.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,x.selectProp=x.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),x.transformProp=x.testProp(["transform","WebkitTransform"]);let T={supported:!1,testSupport:function(b){!F&&D&&(O?k(b):C=b)}},C,D,F=!1,O=!1;function k(b){let a=b.createTexture();b.bindTexture(b.TEXTURE_2D,a);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,D),b.isContextLost())return;T.supported=!0}catch(u){}b.deleteTexture(a),F=!0}var q;typeof document!="undefined"&&(D=document.createElement("img"),D.onload=()=>{C&&k(C),C=null,O=!0},D.onerror=()=>{F=!0,C=null},D.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(b){let a,u,m,v;b.resetRequestQueue=()=>{a=[],u=0,m=0,v={}},b.addThrottleControl=L=>{let j=m++;return v[j]=L,j},b.removeThrottleControl=L=>{delete v[L],I()},b.getImage=(L,j,B=!0)=>new Promise(($,G)=>{T.supported&&(L.headers||(L.headers={}),L.headers.accept="image/webp,*/*"),o.e(L,{type:"image"}),a.push({abortController:j,requestParameters:L,supportImageRefresh:B,state:"queued",onError:J=>{G(J)},onSuccess:J=>{$(J)}}),I()});let w=L=>o._(this,void 0,void 0,function*(){L.state="running";let{requestParameters:j,supportImageRefresh:B,onError:$,onSuccess:G,abortController:J}=L,te=B===!1&&!o.i(self)&&!o.g(j.url)&&(!j.headers||Object.keys(j.headers).reduce((de,be)=>de&&be==="accept",!0));u++;let pe=te?P(j,J):o.m(j,J);try{let de=yield pe;delete L.abortController,L.state="completed",de.data instanceof HTMLImageElement||o.b(de.data)?G(de):de.data&&G({data:yield(fe=de.data,typeof createImageBitmap=="function"?o.f(fe):o.h(fe)),cacheControl:de.cacheControl,expires:de.expires})}catch(de){delete L.abortController,$(de)}finally{u--,I()}var fe}),I=()=>{let L=(()=>{for(let j of Object.keys(v))if(v[j]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let j=u;j<L&&a.length>0;j++){let B=a.shift();B.abortController.signal.aborted?j--:w(B)}},P=(L,j)=>new Promise((B,$)=>{let G=new Image,J=L.url,te=L.credentials;te&&te==="include"?G.crossOrigin="use-credentials":(te&&te==="same-origin"||!o.d(J))&&(G.crossOrigin="anonymous"),j.signal.addEventListener("abort",()=>{G.src="",$(o.c())}),G.fetchPriority="high",G.onload=()=>{G.onerror=G.onload=null,B({data:G})},G.onerror=()=>{G.onerror=G.onload=null,j.signal.aborted||$(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},G.src=J})}(q||(q={})),q.resetRequestQueue();class U{constructor(a){this._transformRequestFn=a}transformRequest(a,u){return this._transformRequestFn&&this._transformRequestFn(a,u)||{url:a}}setTransformRequest(a){this._transformRequestFn=a}}function H(b){let a=[];if(typeof b=="string")a.push({id:"default",url:b});else if(b&&b.length>0){let u=[];for(let{id:m,url:v}of b){let w=`${m}${v}`;u.indexOf(w)===-1&&(u.push(w),a.push({id:m,url:v}))}}return a}function se(b,a,u){try{let m=new URL(b);return m.pathname+=`${a}${u}`,m.toString()}catch(m){throw new Error(`Invalid sprite URL "${b}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class ie{constructor(a,u,m,v){this.context=a,this.format=m,this.texture=a.gl.createTexture(),this.update(u,v)}update(a,u,m){let{width:v,height:w}=a,I=!(this.size&&this.size[0]===v&&this.size[1]===w||m),{context:P}=this,{gl:L}=P;if(this.useMipmap=!!(u&&u.useMipmap),L.bindTexture(L.TEXTURE_2D,this.texture),P.pixelStoreUnpackFlipY.set(!1),P.pixelStoreUnpack.set(1),P.pixelStoreUnpackPremultiplyAlpha.set(this.format===L.RGBA&&(!u||u.premultiply!==!1)),I)this.size=[v,w],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||o.b(a)?L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,L.UNSIGNED_BYTE,a):L.texImage2D(L.TEXTURE_2D,0,this.format,v,w,0,this.format,L.UNSIGNED_BYTE,a.data);else{let{x:j,y:B}=m||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||o.b(a)?L.texSubImage2D(L.TEXTURE_2D,0,j,B,L.RGBA,L.UNSIGNED_BYTE,a):L.texSubImage2D(L.TEXTURE_2D,0,j,B,v,w,L.RGBA,L.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&L.generateMipmap(L.TEXTURE_2D),P.pixelStoreUnpackFlipY.setDefault(),P.pixelStoreUnpack.setDefault(),P.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(a,u,m){let{context:v}=this,{gl:w}=v;w.bindTexture(w.TEXTURE_2D,this.texture),m!==w.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=w.LINEAR),a!==this.filter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,a),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,m||a),this.filter=a),u!==this.wrap&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,u),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function ue(b){let{userImage:a}=b;return!!(a&&a.render&&a.render())&&(b.data.replace(new Uint8Array(a.data.buffer)),!0)}class ve extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(let{ids:u,promiseResolve:m}of this.requestors)m(this._getImagesForIds(u));this.requestors=[]}}getImage(a){let u=this.images[a];if(u&&!u.data&&u.spriteData){let m=u.spriteData;u.data=new o.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),u.spriteData=null}return u}addImage(a,u){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,u)&&(this.images[a]=u)}_validate(a,u){let m=!0,v=u.data||u.spriteData;return this._validateStretch(u.stretchX,v&&v.width)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchX" value`))),m=!1),this._validateStretch(u.stretchY,v&&v.height)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchY" value`))),m=!1),this._validateContent(u.content,u)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "content" value`))),m=!1),m}_validateStretch(a,u){if(!a)return!0;let m=0;for(let v of a){if(v[0]<m||v[1]<v[0]||u<v[1])return!1;m=v[1]}return!0}_validateContent(a,u){if(!a)return!0;if(a.length!==4)return!1;let m=u.spriteData,v=m&&m.width||u.data.width,w=m&&m.height||u.data.height;return!(a[0]<0||v<a[0]||a[1]<0||w<a[1]||a[2]<0||v<a[2]||a[3]<0||w<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,u,m=!0){let v=this.getImage(a);if(m&&(v.data.width!==u.data.width||v.data.height!==u.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=v.version+1,this.images[a]=u,this.updatedImages[a]=!0}removeImage(a){let u=this.images[a];delete this.images[a],delete this.patterns[a],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise((u,m)=>{let v=!0;if(!this.isLoaded())for(let w of a)this.images[w]||(v=!1);this.isLoaded()||v?u(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:u})})}_getImagesForIds(a){let u={};for(let m of a){let v=this.getImage(m);v||(this.fire(new o.l("styleimagemissing",{id:m})),v=this.getImage(m)),v?u[m]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,textFitWidth:v.textFitWidth,textFitHeight:v.textFitHeight,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:o.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){let{width:a,height:u}=this.atlasImage;return{width:a,height:u}}getPattern(a){let u=this.patterns[a],m=this.getImage(a);if(!m)return null;if(u&&u.position.version===m.version)return u.position;if(u)u.position.version=m.version;else{let v={w:m.data.width+2,h:m.data.height+2,x:0,y:0},w=new o.I(v,m);this.patterns[a]={bin:v,position:w}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){let u=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ie(a,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){let a=[];for(let w in this.patterns)a.push(this.patterns[w].bin);let{w:u,h:m}=o.p(a),v=this.atlasImage;v.resize({width:u||1,height:m||1});for(let w in this.patterns){let{bin:I}=this.patterns[w],P=I.x+1,L=I.y+1,j=this.getImage(w).data,B=j.width,$=j.height;o.R.copy(j,v,{x:0,y:0},{x:P,y:L},{width:B,height:$}),o.R.copy(j,v,{x:0,y:$-1},{x:P,y:L-1},{width:B,height:1}),o.R.copy(j,v,{x:0,y:0},{x:P,y:L+$},{width:B,height:1}),o.R.copy(j,v,{x:B-1,y:0},{x:P-1,y:L},{width:1,height:$}),o.R.copy(j,v,{x:0,y:0},{x:P+B,y:L},{width:1,height:$})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(let u of a){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;let m=this.getImage(u);m||o.w(`Image with ID: "${u}" was not found`),ue(m)&&this.updateImage(u,m)}}}let ye=1e20;function ge(b,a,u,m,v,w,I,P,L){for(let j=a;j<a+m;j++)_e(b,u*w+j,w,v,I,P,L);for(let j=u;j<u+v;j++)_e(b,j*w+a,1,m,I,P,L)}function _e(b,a,u,m,v,w,I){w[0]=0,I[0]=-1e20,I[1]=ye,v[0]=b[a];for(let P=1,L=0,j=0;P<m;P++){v[P]=b[a+P*u];let B=P*P;do{let $=w[L];j=(v[P]-v[$]+B-$*$)/(P-$)/2}while(j<=I[L]&&--L>-1);L++,w[L]=P,I[L]=j,I[L+1]=ye}for(let P=0,L=0;P<m;P++){for(;I[L+1]<P;)L++;let j=w[L],B=P-j;b[a+P*u]=v[j]+B*B}}class Le{constructor(a,u){this.requestManager=a,this.localIdeographFontFamily=u,this.entries={}}setURL(a){this.url=a}getGlyphs(a){return o._(this,void 0,void 0,function*(){let u=[];for(let w in a)for(let I of a[w])u.push(this._getAndCacheGlyphsPromise(w,I));let m=yield Promise.all(u),v={};for(let{stack:w,id:I,glyph:P}of m)v[w]||(v[w]={}),v[w][I]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};return v})}_getAndCacheGlyphsPromise(a,u){return o._(this,void 0,void 0,function*(){let m=this.entries[a];m||(m=this.entries[a]={glyphs:{},requests:{},ranges:{}});let v=m.glyphs[u];if(v!==void 0)return{stack:a,id:u,glyph:v};if(v=this._tinySDF(m,a,u),v)return m.glyphs[u]=v,{stack:a,id:u,glyph:v};let w=Math.floor(u/256);if(256*w>65535)throw new Error("glyphs > 65535 not supported");if(m.ranges[w])return{stack:a,id:u,glyph:v};if(!this.url)throw new Error("glyphsUrl is not set");if(!m.requests[w]){let P=Le.loadGlyphRange(a,w,this.url,this.requestManager);m.requests[w]=P}let I=yield m.requests[w];for(let P in I)this._doesCharSupportLocalGlyph(+P)||(m.glyphs[+P]=I[+P]);return m.ranges[w]=!0,{stack:a,id:u,glyph:I[u]||null}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(a))||o.u["CJK Unified Ideographs"](a)||o.u["Hangul Syllables"](a)||o.u.Hiragana(a)||o.u.Katakana(a)||o.u["CJK Symbols and Punctuation"](a)||o.u["Halfwidth and Fullwidth Forms"](a))}_tinySDF(a,u,m){let v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(m))return;let w=a.tinySDF;if(!w){let P="400";/bold/i.test(u)?P="900":/medium/i.test(u)?P="500":/light/i.test(u)&&(P="200"),w=a.tinySDF=new Le.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:v,fontWeight:P})}let I=w.draw(String.fromCharCode(m));return{id:m,bitmap:new o.q({width:I.width||60,height:I.height||60},I.data),metrics:{width:I.glyphWidth/2||24,height:I.glyphHeight/2||24,left:I.glyphLeft/2+.5||0,top:I.glyphTop/2-27.5||-8,advance:I.glyphAdvance/2||24,isDoubleResolution:!0}}}}Le.loadGlyphRange=function(b,a,u,m){return o._(this,void 0,void 0,function*(){let v=256*a,w=v+255,I=m.transformRequest(u.replace("{fontstack}",b).replace("{range}",`${v}-${w}`),"Glyphs"),P=yield o.n(I,new AbortController);if(!P||!P.data)throw new Error(`Could not load glyph range. range: ${a}, ${v}-${w}`);let L={};for(let j of o.o(P.data))L[j.id]=j;return L})},Le.TinySDF=class{constructor({fontSize:b=24,buffer:a=3,radius:u=8,cutoff:m=.25,fontFamily:v="sans-serif",fontWeight:w="normal",fontStyle:I="normal"}={}){this.buffer=a,this.cutoff=m,this.radius=u;let P=this.size=b+4*a,L=this._createCanvas(P),j=this.ctx=L.getContext("2d",{willReadFrequently:!0});j.font=`${I} ${w} ${b}px ${v}`,j.textBaseline="alphabetic",j.textAlign="left",j.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(b){let a=document.createElement("canvas");return a.width=a.height=b,a}draw(b){let{width:a,actualBoundingBoxAscent:u,actualBoundingBoxDescent:m,actualBoundingBoxLeft:v,actualBoundingBoxRight:w}=this.ctx.measureText(b),I=Math.ceil(u),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-v))),L=Math.min(this.size-this.buffer,I+Math.ceil(m)),j=P+2*this.buffer,B=L+2*this.buffer,$=Math.max(j*B,0),G=new Uint8ClampedArray($),J={data:G,width:j,height:B,glyphWidth:P,glyphHeight:L,glyphTop:I,glyphLeft:0,glyphAdvance:a};if(P===0||L===0)return J;let{ctx:te,buffer:pe,gridInner:fe,gridOuter:de}=this;te.clearRect(pe,pe,P,L),te.fillText(b,pe,pe+I);let be=te.getImageData(pe,pe,P,L);de.fill(ye,0,$),fe.fill(0,0,$);for(let Te=0;Te<L;Te++)for(let Se=0;Se<P;Se++){let Ae=be.data[4*(Te*P+Se)+3]/255;if(Ae===0)continue;let De=(Te+pe)*j+Se+pe;if(Ae===1)de[De]=0,fe[De]=ye;else{let Pe=.5-Ae;de[De]=Pe>0?Pe*Pe:0,fe[De]=Pe<0?Pe*Pe:0}}ge(de,0,0,j,B,j,this.f,this.v,this.z),ge(fe,pe,pe,P,L,j,this.f,this.v,this.z);for(let Te=0;Te<$;Te++){let Se=Math.sqrt(de[Te])-Math.sqrt(fe[Te]);G[Te]=Math.round(255-255*(Se/this.radius+this.cutoff))}return J}};class Re{constructor(){this.specification=o.v.light.position}possiblyEvaluate(a,u){return o.z(a.expression.evaluate(u))}interpolate(a,u,m){return{x:o.B.number(a.x,u.x,m),y:o.B.number(a.y,u.y,m),z:o.B.number(a.z,u.z,m)}}}let je;class $e extends o.E{constructor(a){super(),je=je||new o.r({anchor:new o.D(o.v.light.anchor),position:new Re,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(je),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,u={}){if(!this._validate(o.t,a,u))for(let m in a){let v=a[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),v):this._transitionable.setValue(m,v)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,u,m){return(!m||m.validate!==!1)&&o.x(this,a.call(o.y,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}let Be=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class nt extends o.E{constructor(a){super(),this._transitionable=new o.T(Be),this.setSky(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.C(0))}setSky(a,u={}){if(!this._validate(o.F,a,u)){a||(a={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let m in a){let v=a[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),v):this._transitionable.setValue(m,v)}}}getSky(){return this._transitionable.serialize()}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,u,m={}){return(m==null?void 0:m.validate)!==!1&&o.x(this,a.call(o.y,o.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(a){return a<60?0:a<70?(a-60)/10:1}}class We{constructor(a,u){this.width=a,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,u){let m=a.join(",")+String(u);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(a,u)),this.dashEntry[m]}getDashRanges(a,u,m){let v=[],w=a.length%2==1?-a[a.length-1]*m:0,I=a[0]*m,P=!0;v.push({left:w,right:I,isDash:P,zeroLength:a[0]===0});let L=a[0];for(let j=1;j<a.length;j++){P=!P;let B=a[j];w=L*m,L+=B,I=L*m,v.push({left:w,right:I,isDash:P,zeroLength:B===0})}return v}addRoundDash(a,u,m){let v=u/2;for(let w=-m;w<=m;w++){let I=this.width*(this.nextRow+m+w),P=0,L=a[P];for(let j=0;j<this.width;j++){j/L.right>1&&(L=a[++P]);let B=Math.abs(j-L.left),$=Math.abs(j-L.right),G=Math.min(B,$),J,te=w/m*(v+1);if(L.isDash){let pe=v-Math.abs(te);J=Math.sqrt(G*G+pe*pe)}else J=v-Math.sqrt(G*G+te*te);this.data[I+j]=Math.max(0,Math.min(255,J+128))}}}addRegularDash(a){for(let P=a.length-1;P>=0;--P){let L=a[P],j=a[P+1];L.zeroLength?a.splice(P,1):j&&j.isDash===L.isDash&&(j.left=L.left,a.splice(P,1))}let u=a[0],m=a[a.length-1];u.isDash===m.isDash&&(u.left=m.left-this.width,m.right=u.right+this.width);let v=this.width*this.nextRow,w=0,I=a[w];for(let P=0;P<this.width;P++){P/I.right>1&&(I=a[++w]);let L=Math.abs(P-I.left),j=Math.abs(P-I.right),B=Math.min(L,j);this.data[v+P]=Math.max(0,Math.min(255,(I.isDash?B:-B)+128))}}addDash(a,u){let m=u?7:0,v=2*m+1;if(this.nextRow+v>this.height)return o.w("LineAtlas out of space"),null;let w=0;for(let P=0;P<a.length;P++)w+=a[P];if(w!==0){let P=this.width/w,L=this.getDashRanges(a,this.width,P);u?this.addRoundDash(L,P,m):this.addRegularDash(L)}let I={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:w};return this.nextRow+=v,this.dirty=!0,I}bind(a){let u=a.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}let mt="maplibre_preloaded_worker_pool";class ht{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<ht.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[mt]}numActive(){return Object.keys(this.active).length}}let _t=Math.floor(_.hardwareConcurrency/2),ze,St;function jt(){return ze||(ze=new ht),ze}ht.workerCount=o.G(globalThis)?Math.max(Math.min(_t,3),1):1;class Fe{constructor(a,u){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=u;let m=this.workerPool.acquire(u);for(let v=0;v<m.length;v++){let w=new o.H(m[v],u);w.name=`Worker ${v}`,this.actors.push(w)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,u){let m=[];for(let v of this.actors)m.push(v.sendAsync({type:a,data:u}));return Promise.all(m)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,u){for(let m of this.actors)m.registerMessageHandler(a,u)}}function st(){return St||(St=new Fe(jt(),o.J),St.registerMessageHandler("GR",(b,a,u)=>o.m(a,u))),St}function He(b,a){let u=o.K();return o.L(u,u,[1,1,0]),o.M(u,u,[.5*b.width,.5*b.height,1]),b.calculatePosMatrix?o.N(u,u,b.calculatePosMatrix(a.toUnwrapped())):u}function et(b,a,u,m,v,w,I){var P;let L=function(G,J,te){if(G)for(let pe of G){let fe=J[pe];if(fe&&fe.source===te&&fe.type==="fill-extrusion")return!0}else for(let pe in J){let fe=J[pe];if(fe.source===te&&fe.type==="fill-extrusion")return!0}return!1}((P=v==null?void 0:v.layers)!==null&&P!==void 0?P:null,a,b.id),j=w.maxPitchScaleFactor(),B=b.tilesIn(m,j,L);B.sort(it);let $=[];for(let G of B)$.push({wrappedTileID:G.tileID.wrapped().key,queryResults:G.tile.queryRenderedFeatures(a,u,b._state,G.queryGeometry,G.cameraQueryGeometry,G.scale,v,w,j,He(b.transform,G.tileID),I?(J,te)=>I(G.tileID,J,te):void 0)});return function(G,J){for(let te in G)for(let pe of G[te])at(pe,J);return G}(function(G){let J={},te={};for(let pe of G){let fe=pe.queryResults,de=pe.wrappedTileID,be=te[de]=te[de]||{};for(let Te in fe){let Se=fe[Te],Ae=be[Te]=be[Te]||{},De=J[Te]=J[Te]||[];for(let Pe of Se)Ae[Pe.featureIndex]||(Ae[Pe.featureIndex]=!0,De.push(Pe))}}return J}($),b)}function it(b,a){let u=b.tileID,m=a.tileID;return u.overscaledZ-m.overscaledZ||u.canonical.y-m.canonical.y||u.wrap-m.wrap||u.canonical.x-m.canonical.x}function at(b,a){let u=b.feature,m=a.getFeatureState(u.layer["source-layer"],u.id);u.source=u.layer.source,u.layer["source-layer"]&&(u.sourceLayer=u.layer["source-layer"]),u.state=m}function Nt(b,a,u){return o._(this,void 0,void 0,function*(){let m=b;if(b.url?m=(yield o.j(a.transformRequest(b.url,"Source"),u)).data:yield _.frameAsync(u),!m)return null;let v=o.O(o.e(m,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in m&&m.vector_layers&&(v.vectorLayerIds=m.vector_layers.map(w=>w.id)),v})}class At{constructor(a,u){a&&(u?this.setSouthWest(a).setNorthEast(u):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof o.Q?new o.Q(a.lng,a.lat):o.Q.convert(a),this}setSouthWest(a){return this._sw=a instanceof o.Q?new o.Q(a.lng,a.lat):o.Q.convert(a),this}extend(a){let u=this._sw,m=this._ne,v,w;if(a instanceof o.Q)v=a,w=a;else{if(!(a instanceof At))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(At.convert(a)):this.extend(o.Q.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(o.Q.convert(a)):this;if(v=a._sw,w=a._ne,!v||!w)return this}return u||m?(u.lng=Math.min(v.lng,u.lng),u.lat=Math.min(v.lat,u.lat),m.lng=Math.max(w.lng,m.lng),m.lat=Math.max(w.lat,m.lat)):(this._sw=new o.Q(v.lng,v.lat),this._ne=new o.Q(w.lng,w.lat)),this}getCenter(){return new o.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.Q(this.getWest(),this.getNorth())}getSouthEast(){return new o.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){let{lng:u,lat:m}=o.Q.convert(a),v=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&v}static convert(a){return a instanceof At?a:a&&new At(a)}static fromLngLat(a,u=0){let m=360*u/40075017,v=m/Math.cos(Math.PI/180*a.lat);return new At(new o.Q(a.lng-v,a.lat-m),new o.Q(a.lng+v,a.lat+m))}adjustAntiMeridian(){let a=new o.Q(this._sw.lng,this._sw.lat),u=new o.Q(this._ne.lng,this._ne.lat);return new At(a,a.lng>u.lng?new o.Q(u.lng+360,u.lat):u)}}class Mt{constructor(a,u,m){this.bounds=At.convert(this.validateBounds(a)),this.minzoom=u||0,this.maxzoom=m||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){let u=Math.pow(2,a.z),m=Math.floor(o.U(this.bounds.getWest())*u),v=Math.floor(o.S(this.bounds.getNorth())*u),w=Math.ceil(o.U(this.bounds.getEast())*u),I=Math.ceil(o.S(this.bounds.getSouth())*u);return a.x>=m&&a.x<w&&a.y>=v&&a.y<I}}class Ut extends o.E{constructor(a,u,m,v){if(super(),this.id=a,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.O(u,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let a=yield Nt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(o.e(this,a),a.bounds&&(this.tileBounds=new Mt(a.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new o.k(a))}})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(a){return o._(this,void 0,void 0,function*(){let u=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(u,"Tile"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};m.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(a.actor&&a.state!=="expired"){if(a.state==="loading")return new Promise((w,I)=>{a.reloadPromise={resolve:w,reject:I}})}else a.actor=this.dispatcher.getActor(),v="LT";a.abortController=new AbortController;try{let w=yield a.actor.sendAsync({type:v,data:m},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,w)}catch(w){if(delete a.abortController,a.aborted)return;if(w&&w.status!==404)throw w;this._afterTileLoadWorkerResponse(a,null)}})}_afterTileLoadWorkerResponse(a,u){if(u&&u.resourceTiming&&(a.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&a.setExpiryData(u),a.loadVectorData(u,this.map.painter),a.reloadPromise){let m=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(m.resolve).catch(m.reject)}}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"AT",data:{uid:a.uid,type:this.type,source:this.id}}))})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Vt extends o.E{constructor(a,u,m,v){super(),this.id=a,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},u),o.e(this,o.O(u,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(a=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let u=yield Nt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(o.e(this,u),u.bounds&&(this.tileBounds=new Mt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:a})))}catch(u){this._tileJSONRequest=null,this.fire(new o.k(u))}})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load(!0)}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}serialize(){return o.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return o._(this,void 0,void 0,function*(){let u=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{let m=yield q.getImage(this.map._requestManager.transformRequest(u,"Tile"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(m&&m.data){this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&a.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});let v=this.map.painter.context,w=v.gl,I=m.data;a.texture=this.map.painter.getTileTexture(I.width),a.texture?a.texture.update(I,{useMipmap:!0}):(a.texture=new ie(v,I,w.RGBA,{useMipmap:!0}),a.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST)),a.state="loaded"}}catch(m){if(delete a.abortController,a.aborted)a.state="unloaded";else if(m)throw a.state="errored",m}})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)})}hasTransition(){return!1}}class $t extends Vt{constructor(a,u,m,v){super(a,u,m,v),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(a){return o._(this,void 0,void 0,function*(){let u=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(u,"Tile");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{let v=yield q.getImage(m,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(v&&v.data){let w=v.data;this.map._refreshExpiredTiles&&(v.cacheControl||v.expires)&&a.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});let I=o.b(w)&&o.V()?w:yield this.readImageNow(w),P={type:this.type,uid:a.uid,source:this.id,rawImageData:I,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state==="expired"){a.actor=this.dispatcher.getActor();let L=yield a.actor.sendAsync({type:"LDT",data:P});a.dem=L,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(v){if(delete a.abortController,a.aborted)a.state="unloaded";else if(v)throw a.state="errored",v}})}readImageNow(a){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&o.W()){let u=a.width+2,m=a.height+2;try{return new o.R({width:u,height:m},yield o.X(a,-1,-1,u,m))}catch(v){}}return _.getImageData(a,1)})}_getNeighboringTiles(a){let u=a.canonical,m=Math.pow(2,u.z),v=(u.x-1+m)%m,w=u.x===0?a.wrap-1:a.wrap,I=(u.x+1+m)%m,P=u.x+1===m?a.wrap+1:a.wrap,L={};return L[new o.Y(a.overscaledZ,w,u.z,v,u.y).key]={backfilled:!1},L[new o.Y(a.overscaledZ,P,u.z,I,u.y).key]={backfilled:!1},u.y>0&&(L[new o.Y(a.overscaledZ,w,u.z,v,u.y-1).key]={backfilled:!1},L[new o.Y(a.overscaledZ,a.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},L[new o.Y(a.overscaledZ,P,u.z,I,u.y-1).key]={backfilled:!1}),u.y+1<m&&(L[new o.Y(a.overscaledZ,w,u.z,v,u.y+1).key]={backfilled:!1},L[new o.Y(a.overscaledZ,a.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},L[new o.Y(a.overscaledZ,P,u.z,I,u.y+1).key]={backfilled:!1}),L}unloadTile(a){return o._(this,void 0,void 0,function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"RDT",data:{type:this.type,uid:a.uid,source:this.id}}))})}}class Lr extends o.E{constructor(a,u,m,v){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(v),this._data=u.data,this._options=o.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId,u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(u.buffer!==void 0?u.buffer:128),tolerance:this._pixelsToTileUnits(u.tolerance!==void 0?u.tolerance:.375),extent:o.Z,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:o.Z,radius:this._pixelsToTileUnits(u.clusterRadius||50),log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(a){return a*(o.Z/this.tileSize)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}getData(){return o._(this,void 0,void 0,function*(){let a=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:a})})}getCoordinatesFromGeometry(a){return a.type==="GeometryCollection"?a.geometries.map(u=>u.coordinates).flat(1/0):a.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,function*(){let a=new At,u=yield this.getData(),m;switch(u.type){case"FeatureCollection":m=u.features.map(v=>this.getCoordinatesFromGeometry(v.geometry)).flat(1/0);break;case"Feature":m=this.getCoordinatesFromGeometry(u.geometry);break;default:m=this.getCoordinatesFromGeometry(u)}if(m.length==0)return a;for(let v=0;v<m.length-1;v+=2)a.extend([m[v],m[v+1]]);return a})}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(a.clusterRadius)),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,u,m){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:a,limit:u,offset:m}})}_updateWorkerData(a){return o._(this,void 0,void 0,function*(){let u=o.e({type:this.type},this.workerOptions);a?u.dataDiff=a:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(_.resolveURL(this._data),"Source"),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.l("dataloading",{dataType:"source"}));try{let m=yield this.actor.sendAsync({type:"LD",data:u});if(this._pendingLoads--,this._removed||m.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));let v=null;m.resourceTiming&&m.resourceTiming[this.id]&&(v=m.resourceTiming[this.id].slice(0));let w={dataType:"source"};this._collectResourceTiming&&v&&v.length>0&&o.e(w,{resourceTiming:v}),this.fire(new o.l("data",Object.assign(Object.assign({},w),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},w),{sourceDataType:"content"})))}catch(m){if(this._pendingLoads--,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(m))}})}loaded(){return this._pendingLoads===0}loadTile(a){return o._(this,void 0,void 0,function*(){let u=a.actor?"RT":"LT";a.actor=this.actor;let m={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};a.abortController=new AbortController;let v=yield this.actor.sendAsync({type:u,data:m},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(v,this.map.painter,u==="RT")})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class yr extends o.E{constructor(a,u,m,v){super(),this.flippedWindingOrder=!1,this.id=a,this.dispatcher=m,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=u}load(a){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let u=yield q.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,a&&(this.coordinates=a),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new o.k(u))}})}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;let u=a.map(o.$.fromLngLat);var m;return this.tileID=function(v){let w=1/0,I=1/0,P=-1/0,L=-1/0;for(let G of v)w=Math.min(w,G.x),I=Math.min(I,G.y),P=Math.max(P,G.x),L=Math.max(L,G.y);let j=Math.max(P-w,L-I),B=Math.max(0,Math.floor(-Math.log(j)/Math.LN2)),$=Math.pow(2,B);return new o.a1(B,Math.floor((w+P)/2*$),Math.floor((I+L)/2*$))}(u),this.terrainTileRanges=this._getOverlappingTileRanges(u),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=u.map(v=>this.tileID.getTilePoint(v)._round()),this.flippedWindingOrder=((m=this.tileCoords)[1].x-m[0].x)*(m[2].y-m[0].y)-(m[1].y-m[0].y)*(m[2].x-m[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let a=this.map.painter.context,u=a.gl;this.texture||(this.texture=new ie(a,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let m=!1;for(let v in this.tiles){let w=this.tiles[v];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,m=!0)}m&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(a){let u=1/0,m=1/0,v=-1/0,w=-1/0;for(let P of a)u=Math.min(u,P.x),m=Math.min(m,P.y),v=Math.max(v,P.x),w=Math.max(w,P.y);let I={};for(let P=0;P<=o.a0;P++){let L=Math.pow(2,P),j=Math.floor(u*L),B=Math.floor(m*L),$=Math.floor(v*L),G=Math.floor(w*L);I[P]={minTileX:j,minTileY:B,maxTileX:$,maxTileY:G}}return I}}class ur extends yr{constructor(a,u,m,v){super(a,u,m,v),this.roundZoom=!0,this.type="video",this.options=u}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;let a=this.options;this.urls=[];for(let u of a.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{let u=yield o.a2(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new o.k(u))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){let u=this.video.seekable;a<u.start(0)||a>u.end(0)?this.fire(new o.k(new o.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let a=this.map.painter.context,u=a.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new ie(a,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let m=!1;for(let v in this.tiles){let w=this.tiles[v];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,m=!0)}m&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class cr extends yr{constructor(a,u,m,v){super(a,u,m,v),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(w=>!Array.isArray(w)||w.length!==2||w.some(I=>typeof I!="number"))||this.fire(new o.k(new o.a3(`sources.${a}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new o.k(new o.a3(`sources.${a}`,null,"missing required property \"coordinates\""))),u.animate&&typeof u.animate!="boolean"&&this.fire(new o.k(new o.a3(`sources.${a}`,null,"optional \"animate\" property must be a boolean value"))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a3(`sources.${a}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new o.k(new o.a3(`sources.${a}`,null,"missing required property \"canvas\""))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let u=this.map.painter.context,m=u.gl;this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ie(u,this.canvas,m.RGBA,{premultiply:!0});let v=!1;for(let w in this.tiles){let I=this.tiles[w];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,v=!0)}v&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}let hr={},dr=b=>{switch(b){case"geojson":return Lr;case"image":return yr;case"raster":return Vt;case"raster-dem":return $t;case"vector":return Ut;case"video":return ur;case"canvas":return cr}return hr[b]},an="RTLPluginLoaded";class wn extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=st()}_syncState(a){return this.status=a,this.dispatcher.broadcast("SRPS",{pluginStatus:a,pluginURL:this.url}).catch(u=>{throw this.status="error",u})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return o._(this,arguments,void 0,function*(u,m=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=_.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!m)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(an))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ln=null;function Un(){return Ln||(Ln=new wn),Ln}class di{constructor(a,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=o.a4(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){let u=a+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,u,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(v,w){let I={};if(!w)return I;for(let P of v){let L=P.layerIds.map(j=>w.getLayer(j)).filter(Boolean);if(L.length!==0){P.layers=L,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map(j=>L.filter(B=>B.id===j)[0]));for(let j of L)I[j.id]=P}}return I}(a.buckets,u==null?void 0:u.style),this.hasSymbolBuckets=!1;for(let v in this.buckets){let w=this.buckets[v];if(w instanceof o.a6){if(this.hasSymbolBuckets=!0,!m)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let v in this.buckets){let w=this.buckets[v];if(w instanceof o.a6&&w.hasRTLText){this.hasRTLText=!0,Un().lazyLoad();break}}this.queryPadding=0;for(let v in this.buckets){let w=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(v).queryRadius(w))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new o.a5}unloadVectorData(){for(let a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(let m in this.buckets){let v=this.buckets[m];v.uploadPending()&&v.upload(a)}let u=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ie(a,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ie(a,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,u,m,v,w,I,P,L,j,B,$){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:w,scale:I,tileSize:this.tileSize,pixelPosMatrix:B,transform:L,params:P,queryPadding:this.queryPadding*j,getElevation:$},a,u,m):{}}querySourceFeatures(a,u){let m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;let v=m.loadVTLayers(),w=u&&u.sourceLayer?u.sourceLayer:"",I=v._geojsonTileLayer||v[w];if(!I)return;let P=o.a7(u&&u.filter),{z:L,x:j,y:B}=this.tileID.canonical,$={z:L,x:j,y:B};for(let G=0;G<I.length;G++){let J=I.feature(G);if(P.needGeometry){let fe=o.a8(J,!0);if(!P.filter(new o.C(this.tileID.overscaledZ),fe,this.tileID.canonical))continue}else if(!P.filter(new o.C(this.tileID.overscaledZ),J))continue;let te=m.getId(J,w),pe=new o.a9(J,L,j,B,te);pe.tile=$,a.push(pe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){let u=this.expirationTime;if(a.cacheControl){let m=o.aa(a.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){let m=Date.now(),v=!1;if(this.expirationTime>m)v=!1;else if(u){if(this.expirationTime<u)v=!0;else{let w=this.expirationTime-u;w?this.expirationTime=m+Math.max(w,3e4):v=!0}}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;let m=this.latestFeatureIndex.loadVTLayers();for(let v in this.buckets){if(!u.style.hasLayer(v))continue;let w=this.buckets[v],I=w.layers[0].sourceLayer||"_geojsonTileLayer",P=m[I],L=a[I];if(!P||!L||Object.keys(L).length===0)continue;w.update(L,P,this.imageAtlas&&this.imageAtlas.patternPositions||{});let j=u&&u.style&&u.style.getLayer(v);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<_.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=_.now()+a}setDependencies(a,u){let m={};for(let v of u)m[v]=!0;this.dependencies[a]=m}hasDependency(a,u){for(let m of a){let v=this.dependencies[m];if(v){for(let w of u)if(v[w])return!0}}return!1}}class Li{constructor(a,u){this.max=a,this.onRemove=u,this.reset()}reset(){for(let a in this.data)for(let u of this.data[a])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(a,u,m){let v=a.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);let w={value:u,timeout:void 0};if(m!==void 0&&(w.timeout=setTimeout(()=>{this.remove(a,w)},m)),this.data[v].push(w),this.order.push(v),this.order.length>this.max){let I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){let u=this.data[a].shift();return u.timeout&&clearTimeout(u.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),u.value}getByKey(a){let u=this.data[a];return u?u[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,u){if(!this.has(a))return this;let m=a.wrapped().key,v=u===void 0?0:this.data[m].indexOf(u),w=this.data[m][v];return this.data[m].splice(v,1),w.timeout&&clearTimeout(w.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(w.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){let u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(a){let u=[];for(let m in this.data)for(let v of this.data[m])a(v.value)||u.push(v);for(let m of u)this.remove(m.value.tileID,m)}}class ao{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,u,m){let v=String(u);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][v]=this.stateChanges[a][v]||{},o.e(this.stateChanges[a][v],m),this.deletedStates[a]===null){this.deletedStates[a]={};for(let w in this.state[a])w!==v&&(this.deletedStates[a][w]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][v]===null){this.deletedStates[a][v]={};for(let w in this.state[a][v])m[w]||(this.deletedStates[a][v][w]=null)}else for(let w in m)this.deletedStates[a]&&this.deletedStates[a][v]&&this.deletedStates[a][v][w]===null&&delete this.deletedStates[a][v][w]}removeFeatureState(a,u,m){if(this.deletedStates[a]===null)return;let v=String(u);if(this.deletedStates[a]=this.deletedStates[a]||{},m&&u!==void 0)this.deletedStates[a][v]!==null&&(this.deletedStates[a][v]=this.deletedStates[a][v]||{},this.deletedStates[a][v][m]=null);else if(u!==void 0){if(this.stateChanges[a]&&this.stateChanges[a][v])for(m in this.deletedStates[a][v]={},this.stateChanges[a][v])this.deletedStates[a][v][m]=null;else this.deletedStates[a][v]=null;}else this.deletedStates[a]=null}getState(a,u){let m=String(u),v=o.e({},(this.state[a]||{})[m],(this.stateChanges[a]||{})[m]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){let w=this.deletedStates[a][u];if(w===null)return{};for(let I in w)delete v[I]}return v}initializeTileState(a,u){a.setFeatureState(this.state,u)}coalesceChanges(a,u){let m={};for(let v in this.stateChanges){this.state[v]=this.state[v]||{};let w={};for(let I in this.stateChanges[v])this.state[v][I]||(this.state[v][I]={}),o.e(this.state[v][I],this.stateChanges[v][I]),w[I]=this.state[v][I];m[v]=w}for(let v in this.deletedStates){this.state[v]=this.state[v]||{};let w={};if(this.deletedStates[v]===null)for(let I in this.state[v])w[I]={},this.state[v][I]={};else for(let I in this.deletedStates[v]){if(this.deletedStates[v][I]===null)this.state[v][I]={};else for(let P of Object.keys(this.deletedStates[v][I]))delete this.state[v][I][P];w[I]=this.state[v][I]}m[v]=m[v]||{},o.e(m[v],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(let v in a)a[v].setFeatureState(m,u)}}let Qn=89.25;function ri(b,a){let u=o.ae(a.lat,-85.051129,o.af);return new o.P(o.U(a.lng)*b,o.S(u)*b)}function so(b,a){return new o.$(a.x/b,a.y/b).toLngLat()}function qe(b){return b.cameraToCenterDistance*Math.min(.85*Math.tan(o.ab(90-b.pitch)),Math.tan(o.ab(Qn-b.pitch)))}function oe(b,a){let u=b.canonical,m=a/o.ac(u.z),v=u.x+Math.pow(2,u.z)*b.wrap,w=o.ad(new Float64Array(16));return o.L(w,w,[v*m,u.y*m,0]),o.M(w,w,[m/o.Z,m/o.Z,1]),w}function ne(b,a,u,m,v){let w=o.$.fromLngLat(b,a),I=v*o.ag(1,b.lat),P=I*Math.cos(o.ab(u)),L=Math.sqrt(I*I-P*P),j=L*Math.sin(o.ab(-m)),B=L*Math.cos(o.ab(-m));return new o.$(w.x+j,w.y+B,w.z+P)}function Z(b,a,u){let m=a.intersectsFrustum(b);if(!u)return m;let v=a.intersectsPlane(u);return m===0||v===0?0:m===2&&v===2?2:1}function X(b,a,u){let m=0,v=(u-a)/10;for(let w=0;w<10;w++)m+=v*Math.pow(Math.cos(a+(w+.5)/10*(u-a)),b);return m}function he(b,a){return function(u,m,v,w,I){let P=2*((b-1)/o.ah(Math.cos(o.ab(Qn-I))/Math.cos(o.ab(Qn)))-1),L=Math.acos(v/w),j=2*X(P-1,0,o.ab(I/2)),B=Math.min(o.ab(Qn),L+o.ab(I/2)),$=X(P-1,Math.min(B,L-o.ab(I/2)),B),G=Math.atan(m/v),J=Math.hypot(m,v),te=u;return te+=o.ah(w/J/Math.max(.5,Math.cos(o.ab(I/2)))),te+=P*o.ah(Math.cos(G))/2,te-=o.ah(Math.max(1,$/j/a))/2,te}}let ee=he(9.314,3);function Ie(b,a){let u=(a.roundZoom?Math.round:Math.floor)(b.zoom+o.ah(b.tileSize/a.tileSize));return Math.max(0,u)}function xe(b,a){let u=b.getCameraFrustum(),m=b.getClippingPlane(),v=b.screenPointToMercatorCoordinate(b.getCameraPoint()),w=o.$.fromLngLat(b.center,b.elevation);v.z=w.z+Math.cos(b.pitchInRadians)*b.cameraToCenterDistance/b.worldSize;let I=b.getCoveringTilesDetailsProvider(),P=I.allowVariableZoom(b,a),L=Ie(b,a),j=a.minzoom||0,B=a.maxzoom!==void 0?a.maxzoom:b.maxZoom,$=Math.min(Math.max(0,L),B),G=Math.pow(2,$),J=[G*v.x,G*v.y,0],te=[G*w.x,G*w.y,0],pe=Math.hypot(w.x-v.x,w.y-v.y),fe=Math.abs(w.z-v.z),de=Math.hypot(pe,fe),be=Ae=>({zoom:0,x:0,y:0,wrap:Ae,fullyVisible:!1}),Te=[],Se=[];if(b.renderWorldCopies&&I.allowWorldCopies())for(let Ae=1;Ae<=3;Ae++)Te.push(be(-Ae)),Te.push(be(Ae));for(Te.push(be(0));Te.length>0;){let Ae=Te.pop(),De=Ae.x,Pe=Ae.y,Ue=Ae.fullyVisible,tt={x:De,y:Pe,z:Ae.zoom},Ke=I.getTileAABB(tt,Ae.wrap,b.elevation,a);if(!Ue){let bt=Z(u,Ke,m);if(bt===0)continue;Ue=bt===2}let Xe=I.distanceToTile2d(v.x,v.y,tt,Ke),Qe=L;P&&(Qe=(a.calculateTileZoom||ee)(b.zoom+o.ah(b.tileSize/a.tileSize),Xe,fe,de,b.fov)),Qe=(a.roundZoom?Math.round:Math.floor)(Qe),Qe=Math.max(0,Qe);let Tt=Math.min(Qe,B);if(Ae.wrap=I.getWrap(w,tt,Ae.wrap),Ae.zoom>=Tt){if(Ae.zoom<j)continue;let bt=$-Ae.zoom,ft=J[0]-.5-(De<<bt),Ht=J[1]-.5-(Pe<<bt),Cr=a.reparseOverscaled?Math.max(Ae.zoom,Qe):Ae.zoom;Se.push({tileID:new o.Y(Ae.zoom===B?Cr:Ae.zoom,Ae.wrap,Ae.zoom,De,Pe),distanceSq:o.ai([te[0]-.5-De,te[1]-.5-Pe]),tileDistanceToCamera:Math.sqrt(ft*ft+Ht*Ht)})}else for(let bt=0;bt<4;bt++)Te.push({zoom:Ae.zoom+1,x:(De<<1)+bt%2,y:(Pe<<1)+(bt>>1),wrap:Ae.wrap,fullyVisible:Ue})}return Se.sort((Ae,De)=>Ae.distanceSq-De.distanceSq).map(Ae=>Ae.tileID)}class Ce extends o.E{constructor(a,u,m){super(),this.id=a,this.dispatcher=m,this.on("data",v=>this._dataHandler(v)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((v,w,I,P)=>{let L=new(dr(w.type))(v,w,I,P);if(L.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${L.id}`);return L})(a,u,m,this),this._tiles={},this._cache=new Li(0,v=>this._unloadTile(v)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ao,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let a in this._tiles){let u=this._tiles[a];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,u,m){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,u,m)}catch(v){a.state="errored",v.status!==404?this._source.fire(new o.k(v,{tile:a})):this.update(this.transform,this.terrain)}})}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new o.l("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let u in this._tiles){let m=this._tiles[u];m.upload(a),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(Ne).map(a=>a.key)}getRenderableIds(a){let u=[];for(let m in this._tiles)this._isIdRenderable(m,a)&&u.push(this._tiles[m]);return a?u.sort((m,v)=>{let w=m.tileID,I=v.tileID,P=new o.P(w.canonical.x,w.canonical.y)._rotate(-this.transform.bearingInRadians),L=new o.P(I.canonical.x,I.canonical.y)._rotate(-this.transform.bearingInRadians);return w.overscaledZ-I.overscaledZ||L.y-P.y||L.x-P.x}).map(m=>m.tileID.key):u.map(m=>m.tileID).sort(Ne).map(m=>m.key)}hasRenderableParent(a){let u=this.findLoadedParent(a,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(a,u){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(u||!this._tiles[a].holdingForFade())}reload(a){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let u in this._tiles)(a||this._tiles[u].state!=="errored")&&this._reloadTile(u,"reloading")}}_reloadTile(a,u){return o._(this,void 0,void 0,function*(){let m=this._tiles[a];m&&(m.state!=="loading"&&(m.state=u),yield this._loadTile(m,a,u))})}_tileLoaded(a,u,m){a.timeAdded=_.now(),m==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(u,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){let u=this.getRenderableIds();for(let v=0;v<u.length;v++){let w=u[v];if(a.neighboringTiles&&a.neighboringTiles[w]){let I=this.getTileByID(w);m(a,I),m(I,a)}}function m(v,w){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let I=w.tileID.canonical.x-v.tileID.canonical.x,P=w.tileID.canonical.y-v.tileID.canonical.y,L=Math.pow(2,v.tileID.canonical.z),j=w.tileID.key;I===0&&P===0||Math.abs(P)>1||(Math.abs(I)>1&&(Math.abs(I+L)===1?I+=L:Math.abs(I-L)===1&&(I-=L)),w.dem&&v.dem&&(v.dem.backfillBorder(w.dem,I,P),v.neighboringTiles&&v.neighboringTiles[j]&&(v.neighboringTiles[j].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,u,m,v){for(let w in this._tiles){let I=this._tiles[w];if(v[w]||!I.hasData()||I.tileID.overscaledZ<=u||I.tileID.overscaledZ>m)continue;let P=I.tileID;for(;I&&I.tileID.overscaledZ>u+1;){let j=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[j.key],I&&I.hasData()&&(P=j)}let L=P;for(;L.overscaledZ>u;)if(L=L.scaledTo(L.overscaledZ-1),a[L.key]||a[L.canonical.key]){v[P.key]=P;break}}}findLoadedParent(a,u){if(a.key in this._loadedParentTiles){let m=this._loadedParentTiles[a.key];return m&&m.tileID.overscaledZ>=u?m:null}for(let m=a.overscaledZ-1;m>=u;m--){let v=a.scaledTo(m),w=this._getLoadedTile(v);if(w)return w}}findLoadedSibling(a){return this._getLoadedTile(a)}_getLoadedTile(a){let u=this._tiles[a.key];return u&&u.hasData()?u:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){let u=Math.ceil(a.width/this._source.tileSize)+1,m=Math.ceil(a.height/this._source.tileSize)+1,v=Math.floor(u*m*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(w)}handleWrapJump(a){let u=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,u){let m={};for(let v in this._tiles){let w=this._tiles[v];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+u),m[w.tileID.key]=w}this._tiles=m;for(let v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(let v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}_updateCoveredAndRetainedTiles(a,u,m,v,w,I){let P={},L={},j=Object.keys(a),B=_.now();for(let $ of j){let G=a[$],J=this._tiles[$];if(!J||J.fadeEndTime!==0&&J.fadeEndTime<=B)continue;let te=this.findLoadedParent(G,u),pe=this.findLoadedSibling(G),fe=te||pe||null;fe&&(this._addTile(fe.tileID),P[fe.tileID.key]=fe.tileID),L[$]=G}this._retainLoadedChildren(L,v,m,a);for(let $ in P)a[$]||(this._coveredTiles[$]=!0,a[$]=P[$]);if(I){let $={},G={};for(let J of w)this._tiles[J.key].hasData()?$[J.key]=J:G[J.key]=J;for(let J in G){let te=G[J].children(this._source.maxzoom);this._tiles[te[0].key]&&this._tiles[te[1].key]&&this._tiles[te[2].key]&&this._tiles[te[3].key]&&($[te[0].key]=a[te[0].key]=te[0],$[te[1].key]=a[te[1].key]=te[1],$[te[2].key]=a[te[2].key]=te[2],$[te[3].key]=a[te[3].key]=te[3],delete G[J])}for(let J in G){let te=G[J],pe=this.findLoadedParent(te,this._source.minzoom),fe=this.findLoadedSibling(te),de=pe||fe||null;if(de){$[de.tileID.key]=a[de.tileID.key]=de.tileID;for(let be in $)$[be].isChildOf(de.tileID)&&delete $[be]}}for(let J in this._tiles)$[J]||(this._coveredTiles[J]=!0)}}update(a,u){if(!this._sourceLoaded||this._paused)return;let m;this.transform=a,this.terrain=u,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(B=>new o.Y(B.canonical.z,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y)):(m=xe(a,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(m=m.filter(B=>this._source.hasTile(B)))):m=[];let v=Ie(a,this._source),w=Math.max(v-Ce.maxOverzooming,this._source.minzoom),I=Math.max(v+Ce.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let B={};for(let $ of m)if($.canonical.z>this._source.minzoom){let G=$.scaledTo($.canonical.z-1);B[G.key]=G;let J=$.scaledTo(Math.max(this._source.minzoom,Math.min($.canonical.z,5)));B[J.key]=J}m=m.concat(Object.values(B))}let P=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,P&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let L=this._updateRetainedTiles(m,v);Me(this._source.type)&&this._updateCoveredAndRetainedTiles(L,w,I,v,m,u);for(let B in L)this._tiles[B].clearFadeHold();let j=o.aj(this._tiles,L);for(let B of j){let $=this._tiles[B];$.hasSymbolBuckets&&!$.holdingForFade()?$.setHoldDuration(this.map._fadeDuration):$.hasSymbolBuckets&&!$.symbolFadeFinished()||this._removeTile(B)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,u){var m;let v={},w={},I=Math.max(u-Ce.maxOverzooming,this._source.minzoom),P=Math.max(u+Ce.maxUnderzooming,this._source.minzoom),L={};for(let j of a){let B=this._addTile(j);v[j.key]=j,B.hasData()||u<this._source.maxzoom&&(L[j.key]=j)}this._retainLoadedChildren(L,u,P,v);for(let j of a){let B=this._tiles[j.key];if(B.hasData())continue;if(u+1>this._source.maxzoom){let G=j.children(this._source.maxzoom)[0],J=this.getTile(G);if(J&&J.hasData()){v[G.key]=G;continue}}else{let G=j.children(this._source.maxzoom);if(v[G[0].key]&&v[G[1].key]&&v[G[2].key]&&v[G[3].key])continue}let $=B.wasRequested();for(let G=j.overscaledZ-1;G>=I;--G){let J=j.scaledTo(G);if(w[J.key])break;if(w[J.key]=!0,B=this.getTile(J),!B&&$&&(B=this._addTile(J)),B){let te=B.hasData();if((te||!(!((m=this.map)===null||m===void 0)&&m.cancelPendingTileRequestsWhileZooming)||$)&&(v[J.key]=J),$=B.wasRequested(),te)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let a in this._tiles){let u=[],m,v=this._tiles[a].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){m=this._loadedParentTiles[v.key];break}u.push(v.key);let w=v.scaledTo(v.overscaledZ-1);if(m=this._getLoadedTile(w),m)break;v=w}for(let w of u)this._loadedParentTiles[w]=m}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let a in this._tiles){let u=this._tiles[a].tileID,m=this._getLoadedTile(u);this._loadedSiblingTiles[u.key]=m}}_addTile(a){let u=this._tiles[a.key];if(u)return u;u=this._cache.getAndRemove(a),u&&(this._setTileReloadTimer(a.key,u),u.tileID=a,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,u)));let m=u;return u||(u=new di(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(u,a.key,u.state)),u.uses++,this._tiles[a.key]=u,m||this._source.fire(new o.l("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(a,u){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);let m=u.getExpiryTimeout();m&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},m))}refreshTiles(a){for(let u in this._tiles)this._isIdRenderable(u)&&a.some(m=>m.equals(this._tiles[u].tileID.canonical))&&this._reloadTile(u,"expired")}_removeTile(a){let u=this._tiles[a];u&&(u.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(a){let u=a.sourceDataType;a.dataType==="source"&&u==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&a.dataType==="source"&&u==="content"&&(this.reload(a.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,u,m){let v=[],w=this.transform;if(!w)return v;let I=m?w.getCameraQueryGeometry(a):a,P=a.map(te=>w.screenPointToMercatorCoordinate(te,this.terrain)),L=I.map(te=>w.screenPointToMercatorCoordinate(te,this.terrain)),j=this.getIds(),B=1/0,$=1/0,G=-1/0,J=-1/0;for(let te of L)B=Math.min(B,te.x),$=Math.min($,te.y),G=Math.max(G,te.x),J=Math.max(J,te.y);for(let te=0;te<j.length;te++){let pe=this._tiles[j[te]];if(pe.holdingForFade())continue;let fe=w.getCoveringTilesDetailsProvider().allowWorldCopies()?pe.tileID:pe.tileID.unwrapTo(0),de=Math.pow(2,w.zoom-pe.tileID.overscaledZ),be=u*pe.queryPadding*o.Z/pe.tileSize/de,Te=[fe.getTilePoint(new o.$(B,$)),fe.getTilePoint(new o.$(G,J))];if(Te[0].x-be<o.Z&&Te[0].y-be<o.Z&&Te[1].x+be>=0&&Te[1].y+be>=0){let Se=P.map(De=>fe.getTilePoint(De)),Ae=L.map(De=>fe.getTilePoint(De));v.push({tile:pe,tileID:fe,queryGeometry:Se,cameraQueryGeometry:Ae,scale:de})}}return v}getVisibleCoordinates(a){let u=this.getRenderableIds(a).map(m=>this._tiles[m].tileID);return this.transform&&this.transform.populateCache(u),u}hasTransition(){if(this._source.hasTransition())return!0;if(Me(this._source.type)){let a=_.now();for(let u in this._tiles)if(this._tiles[u].fadeEndTime>=a)return!0}return!1}setFeatureState(a,u,m){this._state.updateState(a=a||"_geojsonTileLayer",u,m)}removeFeatureState(a,u,m){this._state.removeFeatureState(a=a||"_geojsonTileLayer",u,m)}getFeatureState(a,u){return this._state.getState(a=a||"_geojsonTileLayer",u)}setDependencies(a,u,m){let v=this._tiles[a];v&&v.setDependencies(u,m)}reloadTilesForDependencies(a,u){for(let m in this._tiles)this._tiles[m].hasDependency(a,u)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(a,u))}}function Ne(b,a){let u=Math.abs(2*b.wrap)-+(b.wrap<0),m=Math.abs(2*a.wrap)-+(a.wrap<0);return b.overscaledZ-a.overscaledZ||m-u||a.canonical.y-b.canonical.y||a.canonical.x-b.canonical.x}function Me(b){return b==="raster"||b==="image"||b==="video"}Ce.maxOverzooming=10,Ce.maxUnderzooming=3;class Ge{constructor(a,u){this.reset(a,u)}reset(a,u){this.points=a||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=o.ae(a,0,1);let u=1,m=this._distances[u],v=a*this.paddedLength+this.padding;for(;m<v&&u<this._distances.length;)m=this._distances[++u];let w=u-1,I=this._distances[w],P=m-I,L=P>0?(v-I)/P:0;return this.points[w].mult(1-L).add(this.points[u].mult(L))}}function lt(b,a){let u=!0;return b==="always"||b!=="never"&&a!=="never"||(u=!1),u}class gt{constructor(a,u,m){let v=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(a/m),this.yCellCount=Math.ceil(u/m);for(let I=0;I<this.xCellCount*this.yCellCount;I++)v.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=u,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,u,m,v,w){this._forEachCell(u,m,v,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(w)}insertCircle(a,u,m,v){this._forEachCell(u-v,m-v,u+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(u),this.circles.push(m),this.circles.push(v)}_insertBoxCell(a,u,m,v,w,I){this.boxCells[w].push(I)}_insertCircleCell(a,u,m,v,w,I){this.circleCells[w].push(I)}_query(a,u,m,v,w,I,P){if(m<0||a>this.width||v<0||u>this.height)return[];let L=[];if(a<=0&&u<=0&&this.width<=m&&this.height<=v){if(w)return[{key:null,x1:a,y1:u,x2:m,y2:v}];for(let j=0;j<this.boxKeys.length;j++)L.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(let j=0;j<this.circleKeys.length;j++){let B=this.circles[3*j],$=this.circles[3*j+1],G=this.circles[3*j+2];L.push({key:this.circleKeys[j],x1:B-G,y1:$-G,x2:B+G,y2:$+G})}}else this._forEachCell(a,u,m,v,this._queryCell,L,{hitTest:w,overlapMode:I,seenUids:{box:{},circle:{}}},P);return L}query(a,u,m,v){return this._query(a,u,m,v,!1,null)}hitTest(a,u,m,v,w,I){return this._query(a,u,m,v,!0,w,I).length>0}hitTestCircle(a,u,m,v,w){let I=a-m,P=a+m,L=u-m,j=u+m;if(P<0||I>this.width||j<0||L>this.height)return!1;let B=[];return this._forEachCell(I,L,P,j,this._queryCellCircle,B,{hitTest:!0,overlapMode:v,circle:{x:a,y:u,radius:m},seenUids:{box:{},circle:{}}},w),B.length>0}_queryCell(a,u,m,v,w,I,P,L){let{seenUids:j,hitTest:B,overlapMode:$}=P,G=this.boxCells[w];if(G!==null){let te=this.bboxes;for(let pe of G)if(!j.box[pe]){j.box[pe]=!0;let fe=4*pe,de=this.boxKeys[pe];if(a<=te[fe+2]&&u<=te[fe+3]&&m>=te[fe+0]&&v>=te[fe+1]&&(!L||L(de))&&(!B||!lt($,de.overlapMode))&&(I.push({key:de,x1:te[fe],y1:te[fe+1],x2:te[fe+2],y2:te[fe+3]}),B))return!0}}let J=this.circleCells[w];if(J!==null){let te=this.circles;for(let pe of J)if(!j.circle[pe]){j.circle[pe]=!0;let fe=3*pe,de=this.circleKeys[pe];if(this._circleAndRectCollide(te[fe],te[fe+1],te[fe+2],a,u,m,v)&&(!L||L(de))&&(!B||!lt($,de.overlapMode))){let be=te[fe],Te=te[fe+1],Se=te[fe+2];if(I.push({key:de,x1:be-Se,y1:Te-Se,x2:be+Se,y2:Te+Se}),B)return!0}}}return!1}_queryCellCircle(a,u,m,v,w,I,P,L){let{circle:j,seenUids:B,overlapMode:$}=P,G=this.boxCells[w];if(G!==null){let te=this.bboxes;for(let pe of G)if(!B.box[pe]){B.box[pe]=!0;let fe=4*pe,de=this.boxKeys[pe];if(this._circleAndRectCollide(j.x,j.y,j.radius,te[fe+0],te[fe+1],te[fe+2],te[fe+3])&&(!L||L(de))&&!lt($,de.overlapMode))return I.push(!0),!0}}let J=this.circleCells[w];if(J!==null){let te=this.circles;for(let pe of J)if(!B.circle[pe]){B.circle[pe]=!0;let fe=3*pe,de=this.circleKeys[pe];if(this._circlesCollide(te[fe],te[fe+1],te[fe+2],j.x,j.y,j.radius)&&(!L||L(de))&&!lt($,de.overlapMode))return I.push(!0),!0}}}_forEachCell(a,u,m,v,w,I,P,L){let j=this._convertToXCellCoord(a),B=this._convertToYCellCoord(u),$=this._convertToXCellCoord(m),G=this._convertToYCellCoord(v);for(let J=j;J<=$;J++)for(let te=B;te<=G;te++)if(w.call(this,a,u,m,v,this.xCellCount*te+J,I,P,L))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,u,m,v,w,I){let P=v-a,L=w-u,j=m+I;return j*j>P*P+L*L}_circleAndRectCollide(a,u,m,v,w,I,P){let L=(I-v)/2,j=Math.abs(a-(v+L));if(j>L+m)return!1;let B=(P-w)/2,$=Math.abs(u-(w+B));if($>B+m)return!1;if(j<=L||$<=B)return!0;let G=j-L,J=$-B;return G*G+J*J<=m*m}}function Rt(b,a,u){let m=o.K();if(!b){let{vecSouth:$,vecEast:G}=Gt(a),J=c();J[0]=G[0],J[1]=G[1],J[2]=$[0],J[3]=$[1],v=J,(B=(I=(w=J)[0])*(j=w[3])-(L=w[2])*(P=w[1]))&&(v[0]=j*(B=1/B),v[1]=-P*B,v[2]=-L*B,v[3]=I*B),m[0]=J[0],m[1]=J[1],m[4]=J[2],m[5]=J[3]}var v,w,I,P,L,j,B;return o.M(m,m,[1/u,1/u,1]),m}function Xt(b,a,u,m){if(b){let v=o.K();if(!a){let{vecSouth:w,vecEast:I}=Gt(u);v[0]=I[0],v[1]=I[1],v[4]=w[0],v[5]=w[1]}return o.M(v,v,[m,m,1]),v}return u.pixelsToClipSpaceMatrix}function Gt(b){let a=Math.cos(b.rollInRadians),u=Math.sin(b.rollInRadians),m=Math.cos(b.pitchInRadians),v=Math.cos(b.bearingInRadians),w=Math.sin(b.bearingInRadians),I=o.ao();I[0]=-v*m*u-w*a,I[1]=-w*m*u+v*a;let P=o.ap(I);P<1e-9?o.aq(I):o.ar(I,I,1/P);let L=o.ao();L[0]=v*m*a-w*u,L[1]=w*m*a+v*u;let j=o.ap(L);return j<1e-9?o.aq(L):o.ar(L,L,1/j),{vecEast:L,vecSouth:I}}function Ye(b,a,u,m){let v;m?(v=[b,a,m(b,a),1],o.at(v,v,u)):(v=[b,a,0,1],Eh(v,v,u));let w=v[3];return{point:new o.P(v[0]/w,v[1]/w),signedDistanceFromCamera:w,isOccluded:!1}}function Fr(b,a){return .5+b/a*.5}function Sr(b,a){return b.x>=-a[0]&&b.x<=a[0]&&b.y>=-a[1]&&b.y<=a[1]}function Dr(b,a,u,m,v,w,I,P,L,j,B,$,G){let J=u?b.textSizeData:b.iconSizeData,te=o.ak(J,a.transform.zoom),pe=[256/a.width*2+1,256/a.height*2+1],fe=u?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;fe.clear();let de=b.lineVertexArray,be=u?b.text.placedSymbolArray:b.icon.placedSymbolArray,Te=a.transform.width/a.transform.height,Se=!1;for(let Ae=0;Ae<be.length;Ae++){let De=be.get(Ae);if(De.hidden||De.writingMode===o.al.vertical&&!Se){Mu(De.numGlyphs,fe);continue}Se=!1;let Pe=new o.P(De.anchorX,De.anchorY),Ue={getElevation:G,pitchedLabelPlaneMatrix:m,lineVertexArray:de,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:a.transform,tileAnchorPoint:Pe,unwrappedTileID:L,width:j,height:B,translation:$},tt=_r(De.anchorX,De.anchorY,Ue);if(!Sr(tt.point,pe)){Mu(De.numGlyphs,fe);continue}let Ke=Fr(a.transform.cameraToCenterDistance,tt.signedDistanceFromCamera),Xe=o.am(J,te,De),Qe=w?Xe*a.transform.getPitchedTextCorrection(De.anchorX,De.anchorY,L)/Ke:Xe*Ke,Tt=Yt({projectionContext:Ue,pitchedLabelPlaneMatrixInverse:v,symbol:De,fontSize:Qe,flip:!1,keepUpright:I,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:fe,aspectRatio:Te,rotateToLine:P});Se=Tt.useVertical,(Tt.notEnoughRoom||Se||Tt.needsFlipping&&Yt({projectionContext:Ue,pitchedLabelPlaneMatrixInverse:v,symbol:De,fontSize:Qe,flip:!0,keepUpright:I,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:fe,aspectRatio:Te,rotateToLine:P}).notEnoughRoom)&&Mu(De.numGlyphs,fe)}u?b.text.dynamicLayoutVertexBuffer.updateData(fe):b.icon.dynamicLayoutVertexBuffer.updateData(fe)}function nr(b,a,u,m,v,w,I,P){let L=w.glyphStartIndex+w.numGlyphs,j=w.lineStartIndex,B=w.lineStartIndex+w.lineLength,$=a.getoffsetX(w.glyphStartIndex),G=a.getoffsetX(L-1),J=wh(b*$,u,m,v,w.segment,j,B,P,I);if(!J)return null;let te=wh(b*G,u,m,v,w.segment,j,B,P,I);return te?P.projectionCache.anyProjectionOccluded?null:{first:J,last:te}:null}function ot(b,a,u,m){return b===o.al.horizontal&&Math.abs(u.y-a.y)>Math.abs(u.x-a.x)*m?{useVertical:!0}:(b===o.al.vertical?a.y<u.y:a.x>u.x)?{needsFlipping:!0}:null}function Yt(b){let{projectionContext:a,pitchedLabelPlaneMatrixInverse:u,symbol:m,fontSize:v,flip:w,keepUpright:I,glyphOffsetArray:P,dynamicLayoutVertexArray:L,aspectRatio:j,rotateToLine:B}=b,$=v/24,G=m.lineOffsetX*$,J=m.lineOffsetY*$,te;if(m.numGlyphs>1){let pe=m.glyphStartIndex+m.numGlyphs,fe=m.lineStartIndex,de=m.lineStartIndex+m.lineLength,be=nr($,P,G,J,w,m,B,a);if(!be)return{notEnoughRoom:!0};let Te=Dn(be.first.point.x,be.first.point.y,a,u),Se=Dn(be.last.point.x,be.last.point.y,a,u);if(I&&!w){let Ae=ot(m.writingMode,Te,Se,j);if(Ae)return Ae}te=[be.first];for(let Ae=m.glyphStartIndex+1;Ae<pe-1;Ae++)te.push(wh($*P.getoffsetX(Ae),G,J,w,m.segment,fe,de,a,B));te.push(be.last)}else{if(I&&!w){let fe=Zr(a.tileAnchorPoint.x,a.tileAnchorPoint.y,a).point,de=m.lineStartIndex+m.segment+1,be=new o.P(a.lineVertexArray.getx(de),a.lineVertexArray.gety(de)),Te=Zr(be.x,be.y,a),Se=Te.signedDistanceFromCamera>0?Te.point:mr(a.tileAnchorPoint,be,fe,1,a),Ae=Dn(fe.x,fe.y,a,u),De=Dn(Se.x,Se.y,a,u),Pe=ot(m.writingMode,Ae,De,j);if(Pe)return Pe}let pe=wh($*P.getoffsetX(m.glyphStartIndex),G,J,w,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,a,B);if(!pe||a.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};te=[pe]}for(let pe of te)o.as(L,pe.point,pe.angle);return{}}function mr(b,a,u,m,v){let w=b.add(b.sub(a)._unit()),I=Zr(w.x,w.y,v).point,P=u.sub(I);return u.add(P._mult(m/P.mag()))}function In(b,a,u){let m=a.projectionCache;if(m.projections[b])return m.projections[b];let v=new o.P(a.lineVertexArray.getx(b),a.lineVertexArray.gety(b)),w=Zr(v.x,v.y,a);if(w.signedDistanceFromCamera>0)return m.projections[b]=w.point,m.anyProjectionOccluded=m.anyProjectionOccluded||w.isOccluded,w.point;let I=b-u.direction;return mr(u.distanceFromAnchor===0?a.tileAnchorPoint:new o.P(a.lineVertexArray.getx(I),a.lineVertexArray.gety(I)),v,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,a)}function Zr(b,a,u){let m=b+u.translation[0],v=a+u.translation[1],w;return u.pitchWithMap?(w=Ye(m,v,u.pitchedLabelPlaneMatrix,u.getElevation),w.isOccluded=!1):(w=u.transform.projectTileCoordinates(m,v,u.unwrappedTileID,u.getElevation),w.point.x=(.5*w.point.x+.5)*u.width,w.point.y=(.5*-w.point.y+.5)*u.height),w}function Dn(b,a,u,m){if(u.pitchWithMap){let v=[b,a,0,1];return o.at(v,v,m),u.transform.projectTileCoordinates(v[0]/v[3],v[1]/v[3],u.unwrappedTileID,u.getElevation).point}return{x:b/u.width*2-1,y:a/u.height*2-1}}function _r(b,a,u){return u.transform.projectTileCoordinates(b,a,u.unwrappedTileID,u.getElevation)}function vc(b,a,u){return b._unit()._perp()._mult(a*u)}function yc(b,a,u,m,v,w,I,P,L){if(P.projectionCache.offsets[b])return P.projectionCache.offsets[b];let j=u.add(a);if(b+L.direction<m||b+L.direction>=v)return P.projectionCache.offsets[b]=j,j;let B=In(b+L.direction,P,L),$=vc(B.sub(u),I,L.direction),G=u.add($),J=B.add($);return P.projectionCache.offsets[b]=o.au(w,j,G,J)||j,P.projectionCache.offsets[b]}function wh(b,a,u,m,v,w,I,P,L){let j=m?b-a:b+a,B=j>0?1:-1,$=0;m&&(B*=-1,$=Math.PI),B<0&&($+=Math.PI);let G,J=B>0?w+v:w+v+1;P.projectionCache.cachedAnchorPoint?G=P.projectionCache.cachedAnchorPoint:(G=Zr(P.tileAnchorPoint.x,P.tileAnchorPoint.y,P).point,P.projectionCache.cachedAnchorPoint=G);let te,pe,fe=G,de=G,be=0,Te=0,Se=Math.abs(j),Ae=[],De;for(;be+Te<=Se;){if(J+=B,J<w||J>=I)return null;be+=Te,de=fe,pe=te;let tt={absOffsetX:Se,direction:B,distanceFromAnchor:be,previousVertex:de};if(fe=In(J,P,tt),u===0)Ae.push(de),De=fe.sub(de);else{let Ke,Xe=fe.sub(de);Ke=Xe.mag()===0?vc(In(J+B,P,tt).sub(fe),u,B):vc(Xe,u,B),pe||(pe=de.add(Ke)),te=yc(J,Ke,fe,w,I,pe,u,P,tt),Ae.push(pe),De=te.sub(pe)}Te=De.mag()}let Pe=De._mult((Se-be)/Te)._add(pe||de),Ue=$+Math.atan2(fe.y-de.y,fe.x-de.x);return Ae.push(Pe),{point:Pe,angle:L?Ue:0,path:Ae}}let tm=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Mu(b,a){for(let u=0;u<b;u++){let m=a.length;a.resize(m+4),a.float32.set(tm,3*m)}}function Eh(b,a,u){let m=a[0],v=a[1];return b[0]=u[0]*m+u[4]*v+u[12],b[1]=u[1]*m+u[5]*v+u[13],b[3]=u[3]*m+u[7]*v+u[15],b}let Di=100;class Ka{constructor(a,u=new gt(a.width+200,a.height+200,25),m=new gt(a.width+200,a.height+200,25)){this.transform=a,this.grid=u,this.ignoredGrid=m,this.pitchFactor=Math.cos(a.pitch*Math.PI/180)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+Di,this.screenBottomBoundary=a.height+Di,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,u,m,v,w,I,P,L,j,B,$,G){let J=this.projectAndGetPerspectiveRatio(a.anchorPointX+L[0],a.anchorPointY+L[1],w,B,G),te=m*J.perspectiveRatio,pe;if(I||P)pe=this._projectCollisionBox(a,te,v,w,I,P,L,J,B,$,G);else{let De=J.x+($?$.x*te:0),Pe=J.y+($?$.y*te:0);pe={allPointsOccluded:!1,box:[De+a.x1*te,Pe+a.y1*te,De+a.x2*te,Pe+a.y2*te]}}let[fe,de,be,Te]=pe.box,Se=I?pe.allPointsOccluded:J.isOccluded,Ae=Se;return Ae||(Ae=J.perspectiveRatio<this.perspectiveRatioCutoff),Ae||(Ae=!this.isInsideGrid(fe,de,be,Te)),Ae||u!=="always"&&this.grid.hitTest(fe,de,be,Te,u,j)?{box:[fe,de,be,Te],placeable:!1,offscreen:!1,occluded:Se}:{box:[fe,de,be,Te],placeable:!0,offscreen:this.isOffscreen(fe,de,be,Te),occluded:Se}}placeCollisionCircles(a,u,m,v,w,I,P,L,j,B,$,G,J,te){let pe=[],fe=new o.P(u.anchorX,u.anchorY),de=this.getPerspectiveRatio(fe.x,fe.y,I,te),be=(j?w*this.transform.getPitchedTextCorrection(u.anchorX,u.anchorY,I)/de:w*de)/o.ay,Te={getElevation:te,pitchedLabelPlaneMatrix:P,lineVertexArray:m,pitchWithMap:j,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:fe,unwrappedTileID:I,width:this.transform.width,height:this.transform.height,translation:J},Se=nr(be,v,u.lineOffsetX*be,u.lineOffsetY*be,!1,u,!1,Te),Ae=!1,De=!1,Pe=!0;if(Se){let Ue=.5*$*de+G,tt=new o.P(-100,-100),Ke=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Xe=new Ge,Qe=Se.first,Tt=Se.last,bt=[];for(let Cr=Qe.path.length-1;Cr>=1;Cr--)bt.push(Qe.path[Cr]);for(let Cr=1;Cr<Tt.path.length;Cr++)bt.push(Tt.path[Cr]);let ft=2.5*Ue;if(j){let Cr=this.projectPathToScreenSpace(bt,Te);bt=Cr.some(Xr=>Xr.signedDistanceFromCamera<=0)?[]:Cr.map(Xr=>Xr.point)}let Ht=[];if(bt.length>0){let Cr=bt[0].clone(),Xr=bt[0].clone();for(let ii=1;ii<bt.length;ii++)Cr.x=Math.min(Cr.x,bt[ii].x),Cr.y=Math.min(Cr.y,bt[ii].y),Xr.x=Math.max(Xr.x,bt[ii].x),Xr.y=Math.max(Xr.y,bt[ii].y);Ht=Cr.x>=tt.x&&Xr.x<=Ke.x&&Cr.y>=tt.y&&Xr.y<=Ke.y?[bt]:Xr.x<tt.x||Cr.x>Ke.x||Xr.y<tt.y||Cr.y>Ke.y?[]:o.av([bt],tt.x,tt.y,Ke.x,Ke.y)}for(let Cr of Ht){Xe.reset(Cr,.25*Ue);let Xr=0;Xr=Xe.length<=.5*Ue?1:Math.ceil(Xe.paddedLength/ft)+1;for(let ii=0;ii<Xr;ii++){let Mn=ii/Math.max(Xr-1,1),oi=Xe.lerp(Mn),ai=oi.x+Di,Nn=oi.y+Di;pe.push(ai,Nn,Ue,0);let sn=ai-Ue,Xi=Nn-Ue,co=ai+Ue,Ao=Nn+Ue;if(Pe=Pe&&this.isOffscreen(sn,Xi,co,Ao),De=De||this.isInsideGrid(sn,Xi,co,Ao),a!=="always"&&this.grid.hitTestCircle(ai,Nn,Ue,a,B)&&(Ae=!0,!L))return{circles:[],offscreen:!1,collisionDetected:Ae}}}}return{circles:!L&&Ae||!De||de<this.perspectiveRatioCutoff?[]:pe,offscreen:Pe,collisionDetected:Ae}}projectPathToScreenSpace(a,u){let m=function(v,w){let I=o.K();return o.an(I,w.pitchedLabelPlaneMatrix),v.map(P=>{let L=Ye(P.x,P.y,I,w.getElevation),j=w.transform.projectTileCoordinates(L.point.x,L.point.y,w.unwrappedTileID,w.getElevation);return j.point.x=(.5*j.point.x+.5)*w.width,j.point.y=(.5*-j.point.y+.5)*w.height,j})}(a,u);return function(v){let w=0,I=0,P=0,L=0;for(let j=0;j<v.length;j++)v[j].isOccluded?(P=j+1,L=0):(L++,L>I&&(I=L,w=P));return v.slice(w,w+I)}(m)}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let u=[],m=1/0,v=1/0,w=-1/0,I=-1/0;for(let B of a){let $=new o.P(B.x+Di,B.y+Di);m=Math.min(m,$.x),v=Math.min(v,$.y),w=Math.max(w,$.x),I=Math.max(I,$.y),u.push($)}let P=this.grid.query(m,v,w,I).concat(this.ignoredGrid.query(m,v,w,I)),L={},j={};for(let B of P){let $=B.key;if(L[$.bucketInstanceId]===void 0&&(L[$.bucketInstanceId]={}),L[$.bucketInstanceId][$.featureIndex])continue;let G=[new o.P(B.x1,B.y1),new o.P(B.x2,B.y1),new o.P(B.x2,B.y2),new o.P(B.x1,B.y2)];o.aw(u,G)&&(L[$.bucketInstanceId][$.featureIndex]=!0,j[$.bucketInstanceId]===void 0&&(j[$.bucketInstanceId]=[]),j[$.bucketInstanceId].push($.featureIndex))}return j}insertCollisionBox(a,u,m,v,w,I){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:w,collisionGroupID:I,overlapMode:u},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,u,m,v,w,I){let P=m?this.ignoredGrid:this.grid,L={bucketInstanceId:v,featureIndex:w,collisionGroupID:I,overlapMode:u};for(let j=0;j<a.length;j+=4)P.insertCircle(L,a[j],a[j+1],a[j+2])}projectAndGetPerspectiveRatio(a,u,m,v,w){if(w){let I;v?(I=[a,u,v(a,u),1],o.at(I,I,w)):(I=[a,u,0,1],Eh(I,I,w));let P=I[3];return{x:(I[0]/P+1)/2*this.transform.width+Di,y:(-I[1]/P+1)/2*this.transform.height+Di,perspectiveRatio:.5+this.transform.cameraToCenterDistance/P*.5,isOccluded:!1,signedDistanceFromCamera:P}}{let I=this.transform.projectTileCoordinates(a,u,m,v);return{x:(I.point.x+1)/2*this.transform.width+Di,y:(1-I.point.y)/2*this.transform.height+Di,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I.signedDistanceFromCamera*.5,isOccluded:I.isOccluded,signedDistanceFromCamera:I.signedDistanceFromCamera}}}getPerspectiveRatio(a,u,m,v){let w=this.transform.projectTileCoordinates(a,u,m,v);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(a,u,m,v){return m<Di||a>=this.screenRightBoundary||v<Di||u>this.screenBottomBoundary}isInsideGrid(a,u,m,v){return m>=0&&a<this.gridRightBoundary&&v>=0&&u<this.gridBottomBoundary}getViewportMatrix(){let a=o.ad([]);return o.L(a,a,[-100,-100,0]),a}_projectCollisionBox(a,u,m,v,w,I,P,L,j,B,$){let G=1,J=0,te=0,pe=1,fe=a.anchorPointX+P[0],de=a.anchorPointY+P[1];if(I&&!w){let bt=this.projectAndGetPerspectiveRatio(fe+1,de,v,j,$),ft=bt.x-L.x,Ht=Math.atan((bt.y-L.y)/ft)+(ft<0?Math.PI:0),Cr=Math.sin(Ht),Xr=Math.cos(Ht);G=Xr,J=Cr,te=-Cr,pe=Xr}else if(!I&&w){let bt=Gt(this.transform);G=bt.vecEast[0],J=bt.vecEast[1],te=bt.vecSouth[0],pe=bt.vecSouth[1]}let be=L.x,Te=L.y,Se=u;w&&(be=fe,Te=de,Se=Math.pow(2,-(this.transform.zoom-m.overscaledZ)),Se*=this.transform.getPitchedTextCorrection(fe,de,v),B||(Se*=o.ae(.5+L.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),B&&(be+=G*B.x*Se+te*B.y*Se,Te+=J*B.x*Se+pe*B.y*Se);let Ae=a.x1*Se,De=a.x2*Se,Pe=(Ae+De)/2,Ue=a.y1*Se,tt=a.y2*Se,Ke=(Ue+tt)/2,Xe=[{offsetX:Ae,offsetY:Ue},{offsetX:Pe,offsetY:Ue},{offsetX:De,offsetY:Ue},{offsetX:De,offsetY:Ke},{offsetX:De,offsetY:tt},{offsetX:Pe,offsetY:tt},{offsetX:Ae,offsetY:tt},{offsetX:Ae,offsetY:Ke}],Qe=[];for(let{offsetX:bt,offsetY:ft}of Xe)Qe.push(new o.P(be+G*bt+te*ft,Te+J*bt+pe*ft));let Tt=!1;if(w){let bt=Qe.map(ft=>this.projectAndGetPerspectiveRatio(ft.x,ft.y,v,j,$));Tt=bt.some(ft=>!ft.isOccluded),Qe=bt.map(ft=>new o.P(ft.x,ft.y))}else Tt=!0;return{box:o.ax(Qe),allPointsOccluded:!Tt}}}class Jn{constructor(a,u,m,v){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?u:-u))):v&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class rm{constructor(a,u,m,v,w){this.text=new Jn(a?a.text:null,u,m,w),this.icon=new Jn(a?a.icon:null,u,v,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Vf{constructor(a,u,m){this.text=a,this.icon=u,this.skipFade=m}}class Vx{constructor(a,u,m,v,w){this.bucketInstanceId=a,this.featureIndex=u,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=w}}class Sh{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){let u=++this.maxGroupID;this.collisionGroups[a]={ID:u,predicate:m=>m.collisionGroupID===u}}return this.collisionGroups[a]}}function Au(b,a,u,m,v){let{horizontalAlign:w,verticalAlign:I}=o.aE(b);return new o.P(-(w-.5)*a+m[0]*v,-(I-.5)*u+m[1]*v)}class OI{constructor(a,u,m,v,w){this.transform=a.clone(),this.terrain=u,this.collisionIndex=new Ka(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Sh(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(a){let u=this.terrain;return u?(m,v)=>u.getElevation(a,m,v):null}getBucketParts(a,u,m,v){let w=m.getBucket(u),I=m.latestFeatureIndex;if(!w||!I||u.id!==w.layerIds[0])return;let P=m.collisionBoxArray,L=w.layers[0].layout,j=w.layers[0].paint,B=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),$=m.tileSize/o.Z,G=m.tileID.toUnwrapped(),J=L.get("text-rotation-alignment")==="map",te=o.az(m,1,this.transform.zoom),pe=o.aA(this.collisionIndex.transform,m,j.get("text-translate"),j.get("text-translate-anchor")),fe=o.aA(this.collisionIndex.transform,m,j.get("icon-translate"),j.get("icon-translate-anchor")),de=Rt(J,this.transform,te);this.retainedQueryData[w.bucketInstanceId]=new Vx(w.bucketInstanceId,I,w.sourceLayerIndex,w.index,m.tileID);let be={bucket:w,layout:L,translationText:pe,translationIcon:fe,unwrappedTileID:G,pitchedLabelPlaneMatrix:de,scale:B,textPixelRatio:$,holdingForFade:m.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:o.ak(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(v)for(let Te of w.sortKeyRanges){let{sortKey:Se,symbolInstanceStart:Ae,symbolInstanceEnd:De}=Te;a.push({sortKey:Se,symbolInstanceStart:Ae,symbolInstanceEnd:De,parameters:be})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:be})}attemptAnchorPlacement(a,u,m,v,w,I,P,L,j,B,$,G,J,te,pe,fe,de,be,Te,Se){let Ae=o.aB[a.textAnchor],De=[a.textOffset0,a.textOffset1],Pe=Au(Ae,m,v,De,w),Ue=this.collisionIndex.placeCollisionBox(u,G,L,j,B,P,I,fe,$.predicate,Te,Pe,Se);if((!be||this.collisionIndex.placeCollisionBox(be,G,L,j,B,P,I,de,$.predicate,Te,Pe,Se).placeable)&&Ue.placeable){let tt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID].text&&(tt=this.prevPlacement.variableOffsets[J.crossTileID].anchor),J.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[J.crossTileID]={textOffset:De,width:m,height:v,anchor:Ae,textBoxScale:w,prevAnchor:tt},this.markUsedJustification(te,Ae,J,pe),te.allowVerticalPlacement&&(this.markUsedOrientation(te,pe,J),this.placedOrientations[J.crossTileID]=pe),{shift:Pe,placedGlyphBoxes:Ue}}}placeLayerBucketPart(a,u,m){let{bucket:v,layout:w,translationText:I,translationIcon:P,unwrappedTileID:L,pitchedLabelPlaneMatrix:j,textPixelRatio:B,holdingForFade:$,collisionBoxArray:G,partiallyEvaluatedTextSize:J,collisionGroup:te}=a.parameters,pe=w.get("text-optional"),fe=w.get("icon-optional"),de=o.aC(w,"text-overlap","text-allow-overlap"),be=de==="always",Te=o.aC(w,"icon-overlap","icon-allow-overlap"),Se=Te==="always",Ae=w.get("text-rotation-alignment")==="map",De=w.get("text-pitch-alignment")==="map",Pe=w.get("icon-text-fit")!=="none",Ue=w.get("symbol-z-order")==="viewport-y",tt=be&&(Se||!v.hasIconData()||fe),Ke=Se&&(be||!v.hasTextData()||pe);!v.collisionArrays&&G&&v.deserializeCollisionBoxes(G);let Xe=this.retainedQueryData[v.bucketInstanceId].tileID,Qe=this._getTerrainElevationFunc(Xe),Tt=this.transform.getFastPathSimpleProjectionMatrix(Xe),bt=(ft,Ht,Cr)=>{var Xr,ii;if(u[ft.crossTileID])return;if($)return void(this.placements[ft.crossTileID]=new Vf(!1,!1,!1));let Mn=!1,oi=!1,ai=!0,Nn=null,sn={box:null,placeable:!1,offscreen:null,occluded:!1},Xi={placeable:!1},co=null,Ao=null,ln=null,wc=0,Ll=0,Ec=0;Ht.textFeatureIndex?wc=Ht.textFeatureIndex:ft.useRuntimeCollisionCircles&&(wc=ft.featureIndex),Ht.verticalTextFeatureIndex&&(Ll=Ht.verticalTextFeatureIndex);let jh=Ht.textBox;if(jh){let Ja=Ui=>{let Vi=o.al.horizontal;if(v.allowVerticalPlacement&&!Ui&&this.prevPlacement){let sa=this.prevPlacement.placedOrientations[ft.crossTileID];sa&&(this.placedOrientations[ft.crossTileID]=sa,Vi=sa,this.markUsedOrientation(v,Vi,ft))}return Vi},Tc=(Ui,Vi)=>{if(v.allowVerticalPlacement&&ft.numVerticalGlyphVertices>0&&Ht.verticalTextBox){for(let sa of v.writingModes)if(sa===o.al.vertical?(sn=Vi(),Xi=sn):sn=Ui(),sn&&sn.placeable)break}else sn=Ui()},Ru=ft.textAnchorOffsetStartIndex,Ic=ft.textAnchorOffsetEndIndex;if(Ic===Ru){let Ui=(Vi,sa)=>{let $n=this.collisionIndex.placeCollisionBox(Vi,de,B,Xe,L,De,Ae,I,te.predicate,Qe,void 0,Tt);return $n&&$n.placeable&&(this.markUsedOrientation(v,sa,ft),this.placedOrientations[ft.crossTileID]=sa),$n};Tc(()=>Ui(jh,o.al.horizontal),()=>{let Vi=Ht.verticalTextBox;return v.allowVerticalPlacement&&ft.numVerticalGlyphVertices>0&&Vi?Ui(Vi,o.al.vertical):{box:null,offscreen:null}}),Ja(sn&&sn.placeable)}else{let Ui=o.aB[(ii=(Xr=this.prevPlacement)===null||Xr===void 0?void 0:Xr.variableOffsets[ft.crossTileID])===null||ii===void 0?void 0:ii.anchor],Vi=($n,ty,EM)=>{let SM=$n.x2-$n.x1,wq=$n.y2-$n.y1,Lb=ft.textBoxScale,Dm=Pe&&Te==="never"?ty:null,Ss=null,Dl=de==="never"?1:2,Ts="never";Ui&&Dl++;for(let Ou=0;Ou<Dl;Ou++){for(let ry=Ru;ry<Ic;ry++){let Mc=v.textAnchorOffsets.get(ry);if(Ui&&Mc.textAnchor!==Ui)continue;let Db=this.attemptAnchorPlacement(Mc,$n,SM,wq,Lb,Ae,De,B,Xe,L,te,Ts,ft,v,EM,I,P,Dm,Qe);if(Db&&(Ss=Db.placedGlyphBoxes,Ss&&Ss.placeable))return Mn=!0,Nn=Db.shift,Ss}Ui?Ui=null:Ts=de}return m&&!Ss&&(Ss={box:this.collisionIndex.placeCollisionBox(jh,"always",B,Xe,L,De,Ae,I,te.predicate,Qe,void 0,Tt).box,offscreen:!1,placeable:!1,occluded:!1}),Ss};Tc(()=>Vi(jh,Ht.iconBox,o.al.horizontal),()=>{let $n=Ht.verticalTextBox;return v.allowVerticalPlacement&&(!sn||!sn.placeable)&&ft.numVerticalGlyphVertices>0&&$n?Vi($n,Ht.verticalIconBox,o.al.vertical):{box:null,occluded:!0,offscreen:null}}),sn&&(Mn=sn.placeable,ai=sn.offscreen);let sa=Ja(sn&&sn.placeable);if(!Mn&&this.prevPlacement){let $n=this.prevPlacement.variableOffsets[ft.crossTileID];$n&&(this.variableOffsets[ft.crossTileID]=$n,this.markUsedJustification(v,$n.anchor,ft,sa))}}}if(co=sn,Mn=co&&co.placeable,ai=co&&co.offscreen,ft.useRuntimeCollisionCircles){let Ja=v.text.placedSymbolArray.get(ft.centerJustifiedTextSymbolIndex),Tc=o.am(v.textSizeData,J,Ja),Ru=w.get("text-padding");Ao=this.collisionIndex.placeCollisionCircles(de,Ja,v.lineVertexArray,v.glyphOffsetArray,Tc,L,j,m,De,te.predicate,ft.collisionCircleDiameter,Ru,I,Qe),Ao.circles.length&&Ao.collisionDetected&&!m&&o.w("Collisions detected, but collision boxes are not shown"),Mn=be||Ao.circles.length>0&&!Ao.collisionDetected,ai=ai&&Ao.offscreen}if(Ht.iconFeatureIndex&&(Ec=Ht.iconFeatureIndex),Ht.iconBox){let Ja=Tc=>this.collisionIndex.placeCollisionBox(Tc,Te,B,Xe,L,De,Ae,P,te.predicate,Qe,Pe&&Nn?Nn:void 0,Tt);Xi&&Xi.placeable&&Ht.verticalIconBox?(ln=Ja(Ht.verticalIconBox),oi=ln.placeable):(ln=Ja(Ht.iconBox),oi=ln.placeable),ai=ai&&ln.offscreen}let Lm=pe||ft.numHorizontalGlyphVertices===0&&ft.numVerticalGlyphVertices===0,Sc=fe||ft.numIconVertices===0;Lm||Sc?Sc?Lm||(oi=oi&&Mn):Mn=oi&&Mn:oi=Mn=oi&&Mn;let Fh=oi&&ln.placeable;if(Mn&&co.placeable&&this.collisionIndex.insertCollisionBox(co.box,de,w.get("text-ignore-placement"),v.bucketInstanceId,Xi&&Xi.placeable&&Ll?Ll:wc,te.ID),Fh&&this.collisionIndex.insertCollisionBox(ln.box,Te,w.get("icon-ignore-placement"),v.bucketInstanceId,Ec,te.ID),Ao&&Mn&&this.collisionIndex.insertCollisionCircles(Ao.circles,de,w.get("text-ignore-placement"),v.bucketInstanceId,wc,te.ID),m&&this.storeCollisionData(v.bucketInstanceId,Cr,Ht,co,ln,Ao),ft.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ft.crossTileID]=new Vf((Mn||tt)&&!(co!=null&&co.occluded),(oi||Ke)&&!(ln!=null&&ln.occluded),ai||v.justReloaded),u[ft.crossTileID]=!0};if(Ue){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let ft=v.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Ht=ft.length-1;Ht>=0;--Ht){let Cr=ft[Ht];bt(v.symbolInstances.get(Cr),v.collisionArrays[Cr],Cr)}}else for(let ft=a.symbolInstanceStart;ft<a.symbolInstanceEnd;ft++)bt(v.symbolInstances.get(ft),v.collisionArrays[ft],ft);v.justReloaded=!1}storeCollisionData(a,u,m,v,w,I){if(m.textBox||m.iconBox){let P,L;this.collisionBoxArrays.has(a)?P=this.collisionBoxArrays.get(a):(P=new Map,this.collisionBoxArrays.set(a,P)),P.has(u)?L=P.get(u):(L={text:null,icon:null},P.set(u,L)),m.textBox&&(L.text=v.box),m.iconBox&&(L.icon=w.box)}if(I){let P=this.collisionCircleArrays[a];P===void 0&&(P=this.collisionCircleArrays[a]=[]);for(let L=0;L<I.circles.length;L+=4)P.push(I.circles[L+0]-Di),P.push(I.circles[L+1]-Di),P.push(I.circles[L+2]),P.push(I.collisionDetected?1:0)}}markUsedJustification(a,u,m,v){let w;w=v===o.al.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[o.aD(u)];let I=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(let P of I)P>=0&&(a.text.placedSymbolArray.get(P).crossTileID=w>=0&&P!==w?0:m.crossTileID)}markUsedOrientation(a,u,m){let v=u===o.al.horizontal||u===o.al.horizontalOnly?u:0,w=u===o.al.vertical?u:0,I=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(let P of I)a.text.placedSymbolArray.get(P).placedOrientation=v;m.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;let u=this.prevPlacement,m=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;let v=u?u.symbolFadeChange(a):1,w=u?u.opacities:{},I=u?u.variableOffsets:{},P=u?u.placedOrientations:{};for(let L in this.placements){let j=this.placements[L],B=w[L];B?(this.opacities[L]=new rm(B,v,j.text,j.icon),m=m||j.text!==B.text.placed||j.icon!==B.icon.placed):(this.opacities[L]=new rm(null,v,j.text,j.icon,j.skipFade),m=m||j.text||j.icon)}for(let L in w){let j=w[L];if(!this.opacities[L]){let B=new rm(j,v,!1,!1);B.isHidden()||(this.opacities[L]=B,m=m||j.text.placed||j.icon.placed)}}for(let L in I)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=I[L]);for(let L in P)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=P[L]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:a)}updateLayerOpacities(a,u){let m={};for(let v of u){let w=v.getBucket(a);w&&v.latestFeatureIndex&&a.id===w.layerIds[0]&&this.updateBucketOpacities(w,v.tileID,m,v.collisionBoxArray)}}updateBucketOpacities(a,u,m,v){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();let w=a.layers[0],I=w.layout,P=new rm(null,0,!1,!1,!0),L=I.get("text-allow-overlap"),j=I.get("icon-allow-overlap"),B=w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"),$=I.get("text-rotation-alignment")==="map",G=I.get("text-pitch-alignment")==="map",J=I.get("icon-text-fit")!=="none",te=new rm(null,0,L&&(j||!a.hasIconData()||I.get("icon-optional")),j&&(L||!a.hasTextData()||I.get("text-optional")),!0);!a.collisionArrays&&v&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(v);let pe=(de,be,Te)=>{for(let Se=0;Se<be/4;Se++)de.opacityVertexArray.emplaceBack(Te);de.hasVisibleVertices=de.hasVisibleVertices||Te!==Th},fe=this.collisionBoxArrays.get(a.bucketInstanceId);for(let de=0;de<a.symbolInstances.length;de++){let be=a.symbolInstances.get(de),{numHorizontalGlyphVertices:Te,numVerticalGlyphVertices:Se,crossTileID:Ae}=be,De=this.opacities[Ae];m[Ae]?De=P:De||(De=te,this.opacities[Ae]=De),m[Ae]=!0;let Pe=be.numIconVertices>0,Ue=this.placedOrientations[be.crossTileID],tt=Ue===o.al.vertical,Ke=Ue===o.al.horizontal||Ue===o.al.horizontalOnly;if(Te>0||Se>0){let Qe=$x(De.text);pe(a.text,Te,tt?Th:Qe),pe(a.text,Se,Ke?Th:Qe);let Tt=De.text.isHidden();[be.rightJustifiedTextSymbolIndex,be.centerJustifiedTextSymbolIndex,be.leftJustifiedTextSymbolIndex].forEach(Ht=>{Ht>=0&&(a.text.placedSymbolArray.get(Ht).hidden=Tt||tt?1:0)}),be.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(be.verticalPlacedTextSymbolIndex).hidden=Tt||Ke?1:0);let bt=this.variableOffsets[be.crossTileID];bt&&this.markUsedJustification(a,bt.anchor,be,Ue);let ft=this.placedOrientations[be.crossTileID];ft&&(this.markUsedJustification(a,"left",be,ft),this.markUsedOrientation(a,ft,be))}if(Pe){let Qe=$x(De.icon),Tt=!(J&&be.verticalPlacedIconSymbolIndex&&tt);be.placedIconSymbolIndex>=0&&(pe(a.icon,be.numIconVertices,Tt?Qe:Th),a.icon.placedSymbolArray.get(be.placedIconSymbolIndex).hidden=De.icon.isHidden()),be.verticalPlacedIconSymbolIndex>=0&&(pe(a.icon,be.numVerticalIconVertices,Tt?Th:Qe),a.icon.placedSymbolArray.get(be.verticalPlacedIconSymbolIndex).hidden=De.icon.isHidden())}let Xe=fe&&fe.has(de)?fe.get(de):{text:null,icon:null};if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){let Qe=a.collisionArrays[de];if(Qe){let Tt=new o.P(0,0);if(Qe.textBox||Qe.verticalTextBox){let bt=!0;if(B){let ft=this.variableOffsets[Ae];ft?(Tt=Au(ft.anchor,ft.width,ft.height,ft.textOffset,ft.textBoxScale),$&&Tt._rotate(G?-this.transform.bearingInRadians:this.transform.bearingInRadians)):bt=!1}if(Qe.textBox||Qe.verticalTextBox){let ft;Qe.textBox&&(ft=tt),Qe.verticalTextBox&&(ft=Ke),Gx(a.textCollisionBox.collisionVertexArray,De.text.placed,!bt||ft,Xe.text,Tt.x,Tt.y)}}if(Qe.iconBox||Qe.verticalIconBox){let bt=!!(!Ke&&Qe.verticalIconBox),ft;Qe.iconBox&&(ft=bt),Qe.verticalIconBox&&(ft=!bt),Gx(a.iconCollisionBox.collisionVertexArray,De.icon.placed,ft,Xe.icon,J?Tt.x:0,J?Tt.y:0)}}}}if(a.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);a.bucketInstanceId in this.collisionCircleArrays&&(a.collisionCircleArray=this.collisionCircleArrays[a.bucketInstanceId],delete this.collisionCircleArrays[a.bucketInstanceId])}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,u){let m=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*m>a}setStale(){this.stale=!0}}function Gx(b,a,u,m,v,w){m&&m.length!==0||(m=[0,0,0,0]);let I=m[0]-Di,P=m[1]-Di,L=m[2]-Di,j=m[3]-Di;b.emplaceBack(a?1:0,u?1:0,v||0,w||0,I,P),b.emplaceBack(a?1:0,u?1:0,v||0,w||0,L,P),b.emplaceBack(a?1:0,u?1:0,v||0,w||0,L,j),b.emplaceBack(a?1:0,u?1:0,v||0,w||0,I,j)}let LI=Math.pow(2,25),Gf=Math.pow(2,24),DI=Math.pow(2,17),Yk=Math.pow(2,16),Kk=Math.pow(2,9),Xk=Math.pow(2,8),NI=Math.pow(2,1);function $x(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;let a=b.placed?1:0,u=Math.floor(127*b.opacity);return u*LI+a*Gf+u*DI+a*Yk+u*Kk+a*Xk+u*NI+a}let Th=0;class Hx{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,u,m,v,w){let I=this._bucketParts;for(;this._currentTileIndex<a.length;)if(u.getBucketParts(I,v,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((P,L)=>P.sortKey-L.sortKey));this._currentPartIndex<I.length;)if(u.placeLayerBucketPart(I[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,w())return!0;return!1}}class kI{constructor(a,u,m,v,w,I,P,L){this.placement=new OI(a,u,I,P,L),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(a,u,m){let v=_.now(),w=()=>!this._forceFullPlacement&&_.now()-v>2;for(;this._currentPlacementIndex>=0;){let I=u[a[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=P)&&(!I.maxzoom||I.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new Hx(I)),this._inProgressLayer.continuePlacement(m[I.source],this.placement,this._showCollisionBoxes,I,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}let Ih=512/o.Z/2;class Wx{constructor(a,u,m){this.tileID=a,this.bucketInstanceId=m,this._symbolsByKey={};let v=new Map;for(let w=0;w<u.length;w++){let I=u.get(w),P=I.key,L=v.get(P);L?L.push(I):v.set(P,[I])}for(let[w,I]of v){let P={positions:I.map(L=>({x:Math.floor(L.anchorX*Ih),y:Math.floor(L.anchorY*Ih)})),crossTileIDs:I.map(L=>L.crossTileID)};if(P.positions.length>128){let L=new o.aF(P.positions.length,16,Uint16Array);for(let{x:j,y:B}of P.positions)L.add(j,B);L.finish(),delete P.positions,P.index=L}this._symbolsByKey[w]=P}}getScaledCoordinates(a,u){let{x:m,y:v,z:w}=this.tileID.canonical,{x:I,y:P,z:L}=u.canonical,j=Ih/Math.pow(2,L-w),B=(P*o.Z+a.anchorY)*j,$=v*o.Z*Ih;return{x:Math.floor((I*o.Z+a.anchorX)*j-m*o.Z*Ih),y:Math.floor(B-$)}}findMatches(a,u,m){let v=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let w=0;w<a.length;w++){let I=a.get(w);if(I.crossTileID)continue;let P=this._symbolsByKey[I.key];if(!P)continue;let L=this.getScaledCoordinates(I,u);if(P.index){let j=P.index.range(L.x-v,L.y-v,L.x+v,L.y+v).sort();for(let B of j){let $=P.crossTileIDs[B];if(!m[$]){m[$]=!0,I.crossTileID=$;break}}}else if(P.positions)for(let j=0;j<P.positions.length;j++){let B=P.positions[j],$=P.crossTileIDs[j];if(Math.abs(B.x-L.x)<=v&&Math.abs(B.y-L.y)<=v&&!m[$]){m[$]=!0,I.crossTileID=$;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class Qk{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class nm{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){let u=Math.round((a-this.lng)/360);if(u!==0)for(let m in this.indexes){let v=this.indexes[m],w={};for(let I in v){let P=v[I];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+u),w[P.tileID.key]=P}this.indexes[m]=w}this.lng=a}addBucket(a,u,m){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let w=0;w<u.symbolInstances.length;w++)u.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});let v=this.usedCrossTileIDs[a.overscaledZ];for(let w in this.indexes){let I=this.indexes[w];if(Number(w)>a.overscaledZ)for(let P in I){let L=I[P];L.tileID.isChildOf(a)&&L.findMatches(u.symbolInstances,a,v)}else{let P=I[a.scaledTo(Number(w)).key];P&&P.findMatches(u.symbolInstances,a,v)}}for(let w=0;w<u.symbolInstances.length;w++){let I=u.symbolInstances.get(w);I.crossTileID||(I.crossTileID=m.generate(),v[I.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new Wx(a,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(a,u){for(let m of u.getCrossTileIDsLists())for(let v of m)delete this.usedCrossTileIDs[a][v]}removeStaleBuckets(a){let u=!1;for(let m in this.indexes){let v=this.indexes[m];for(let w in v)a[v[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[w]),delete v[w],u=!0)}return u}}class im{constructor(){this.layerIndexes={},this.crossTileIDs=new Qk,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,u,m){let v=this.layerIndexes[a.id];v===void 0&&(v=this.layerIndexes[a.id]=new nm);let w=!1,I={};v.handleWrapJump(m);for(let P of u){let L=P.getBucket(a);L&&a.id===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(P.tileID,L,this.crossTileIDs)&&(w=!0),I[L.bucketInstanceId]=!0)}return v.removeStaleBuckets(I)&&(w=!0),w}pruneUnusedLayers(a){let u={};a.forEach(m=>{u[m]=!0});for(let m in this.layerIndexes)u[m]||delete this.layerIndexes[m]}}var Zx="void main() {fragColor=vec4(1.0);}";let na={prelude:Jr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Jr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Jr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Jr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Jr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Jr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Jr(Zx,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Jr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Jr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Jr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Jr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Jr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Jr(Zx,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Jr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Jr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Jr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Jr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Jr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Jr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Jr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Jr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Jr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Jr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Jr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Jr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Jr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Jr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Jr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Jr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Jr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Jr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Jr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Jr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Jr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Jr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Jr(b,a){let u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=a.match(/in ([\w]+) ([\w]+)/g),v=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=w?w.concat(v):v,P={};return{fragmentSource:b=b.replace(u,(L,j,B,$,G)=>(P[G]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_${G}
in ${B} ${$} ${G};
#else
uniform ${B} ${$} u_${G};
#endif
`:`
#ifdef HAS_UNIFORM_u_${G}
    ${B} ${$} ${G} = u_${G};
#endif
`)),vertexSource:a=a.replace(u,(L,j,B,$,G)=>{let J=$==="float"?"vec2":"vec4",te=G.match(/color/)?"color":J;return P[G]?j==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
in ${B} ${J} a_${G};
out ${B} ${$} ${G};
#else
uniform ${B} ${$} u_${G};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = a_${G};
#else
    ${B} ${$} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = unpack_mix_${te}(a_${G}, u_${G}_t);
#else
    ${B} ${$} ${G} = u_${G};
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
in ${B} ${J} a_${G};
#else
uniform ${B} ${$} u_${G};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${B} ${$} ${G} = a_${G};
#else
    ${B} ${$} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${B} ${$} ${G} = unpack_mix_${te}(a_${G}, u_${G}_t);
#else
    ${B} ${$} ${G} = u_${G};
#endif
`}),staticAttributes:m,staticUniforms:I}}class $f{constructor(a,u,m){this.vertexBuffer=a,this.indexBuffer=u,this.segments=m}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ia=o.aG([{name:"a_pos",type:"Int16",components:2}]);let Mh="#define PROJECTION_MERCATOR",Yr="mercator";class om{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Yr}get shaderDefine(){return Mh}get shaderPreludeCode(){return na.projectionMercator}get vertexShaderPreludeCode(){return na.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(a){}getMeshFromTileID(a,u,m,v,w){if(this._cachedMesh)return this._cachedMesh;let I=new o.aI;I.emplaceBack(0,0),I.emplaceBack(o.Z,0),I.emplaceBack(0,o.Z),I.emplaceBack(o.Z,o.Z);let P=a.createVertexBuffer(I,ia.members),L=o.aJ.simpleSegment(0,0,4,2),j=new o.aK;j.emplaceBack(1,0,2),j.emplaceBack(1,2,3);let B=a.createIndexBuffer(j);return this._cachedMesh=new $f(P,B,L),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(a){}}class am{constructor(a=0,u=0,m=0,v=0){if(isNaN(a)||a<0||isNaN(u)||u<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=u,this.left=m,this.right=v}interpolate(a,u,m){return u.top!=null&&a.top!=null&&(this.top=o.B.number(a.top,u.top,m)),u.bottom!=null&&a.bottom!=null&&(this.bottom=o.B.number(a.bottom,u.bottom,m)),u.left!=null&&a.left!=null&&(this.left=o.B.number(a.left,u.left,m)),u.right!=null&&a.right!=null&&(this.right=o.B.number(a.right,u.right,m)),this}getCenter(a,u){let m=o.ae((this.left+a-this.right)/2,0,a),v=o.ae((this.top+u-this.bottom)/2,0,u);return new o.P(m,v)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new am(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Hf(b,a){if(!b.renderWorldCopies||b.lngRange)return;let u=a.lng-b.center.lng;a.lng+=u>180?-360:u<-180?360:0}function Ta(b){return Math.max(0,Math.floor(b))}class Io{constructor(a,u,m,v,w,I){this._callbacks=a,this._tileSize=512,this._renderWorldCopies=I===void 0||!!I,this._minZoom=u||0,this._maxZoom=m||22,this._minPitch=v==null?0:v,this._maxPitch=w==null?60:w,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Ta(this._zoom),this._scale=o.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new am,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(a,u,m){this._latRange=a.latRange,this._lngRange=a.lngRange,this._width=a.width,this._height=a.height,this._center=a.center,this._elevation=a.elevation,this._minElevationForCurrentTile=a.minElevationForCurrentTile,this._zoom=a.zoom,this._tileZoom=Ta(this._zoom),this._scale=o.ac(this._zoom),this._bearingInRadians=a.bearingInRadians,this._fovInRadians=a.fovInRadians,this._pitchInRadians=a.pitchInRadians,this._rollInRadians=a.rollInRadians,this._unmodified=a.unmodified,this._edgeInsets=new am(a.padding.top,a.padding.bottom,a.padding.left,a.padding.right),this._minZoom=a.minZoom,this._maxZoom=a.maxZoom,this._minPitch=a.minPitch,this._maxPitch=a.maxPitch,this._renderWorldCopies=a.renderWorldCopies,this._cameraToCenterDistance=a.cameraToCenterDistance,this._nearZ=a.nearZ,this._farZ=a.farZ,this._autoCalculateNearFarZ=!m&&a.autoCalculateNearFarZ,u&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(a){this._minElevationForCurrentTile=a}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(a){this._minZoom!==a&&(this._minZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(a){this._minPitch!==a&&(this._minPitch=a,this.setPitch(Math.max(this.pitch,a)))}get maxPitch(){return this._maxPitch}setMaxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.setPitch(Math.min(this.pitch,a)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(a){let u=o.aL(a,-180,180)*Math.PI/180;var m,v,w,I,P,L,j,B,$;this._bearingInRadians!==u&&(this._unmodified=!1,this._bearingInRadians=u,this._calcMatrices(),this._rotationMatrix=c(),m=this._rotationMatrix,w=-this._bearingInRadians,I=(v=this._rotationMatrix)[0],P=v[1],L=v[2],j=v[3],B=Math.sin(w),$=Math.cos(w),m[0]=I*$+L*B,m[1]=P*$+j*B,m[2]=I*-B+L*$,m[3]=P*-B+j*$)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(a){let u=o.ae(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==u&&(this._unmodified=!1,this._pitchInRadians=u,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(a){let u=a/180*Math.PI;this._rollInRadians!==u&&(this._unmodified=!1,this._rollInRadians=u,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aM(this._fovInRadians)}setFov(a){a=o.ae(a,.1,150),this.fov!==a&&(this._unmodified=!1,this._fovInRadians=o.ab(a),this._calcMatrices())}get zoom(){return this._zoom}setZoom(a){let u=this.getConstrained(this._center,a).zoom;this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this._tileZoom=Math.max(0,Math.floor(u)),this._scale=o.ac(u),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(a,u){this._autoCalculateNearFarZ=!1,this._nearZ=a,this._farZ=u,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,u,m){this._unmodified=!1,this._edgeInsets.interpolate(a,u,m),this._constrain(),this._calcMatrices()}resize(a,u,m=!0){this._width=a,this._height=u,m&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new At([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(a){a?(this._lngRange=[a.getWest(),a.getEast()],this._latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,o.af])}getConstrained(a,u){return this._callbacks.getConstrained(a,u)}getCameraQueryGeometry(a,u){if(u.length===1)return[u[0],a];{let m=a.x,v=a.y,w=a.x,I=a.y;for(let P of u)m=Math.min(m,P.x),v=Math.min(v,P.y),w=Math.max(w,P.x),I=Math.max(I,P.y);return[new o.P(m,v),new o.P(w,v),new o.P(w,I),new o.P(m,I),new o.P(m,v)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let a=this._unmodified,{center:u,zoom:m}=this.getConstrained(this.center,this.zoom);this.setCenter(u),this.setZoom(m),this._unmodified=a,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let a=o.ad(new Float64Array(16));o.M(a,a,[this._width/2,-this._height/2,1]),o.L(a,a,[1,-1,0]),this._clipSpaceToPixelsMatrix=a,a=o.ad(new Float64Array(16)),o.M(a,a,[1,-1,1]),o.L(a,a,[-1,-1,0]),o.M(a,a,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=a,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(a,u,m,v){let w=m!==void 0?m:this.bearing,I=v=v!==void 0?v:this.pitch,P=o.$.fromLngLat(a,u),L=-Math.cos(o.ab(I)),j=Math.sin(o.ab(I)),B=j*Math.sin(o.ab(w)),$=-j*Math.cos(o.ab(w)),G=this.elevation,J=u-G,te;L*J>=0||Math.abs(L)<.1?(te=1e4,G=u+te*L):te=-J/L;let pe,fe,de=o.aN(1,P.y),be=0;do{if(be+=1,be>10)break;fe=te/de,pe=new o.$(P.x+B*fe,P.y+$*fe),de=1/pe.meterInMercatorCoordinateUnits()}while(Math.abs(te-fe*de)>1e-12);return{center:pe.toLngLat(),elevation:G,zoom:o.ah(this.height/2/Math.tan(this.fovInRadians/2)/fe/this.tileSize)}}recalculateZoomAndCenter(a){if(this.elevation-a==0)return;let u=o.ag(1,this.center.lat)*this.worldSize,m=this.cameraToCenterDistance/u,v=o.$.fromLngLat(this.center,this.elevation),w=ne(this.center,this.elevation,this.pitch,this.bearing,m);this._elevation=a;let I=this.calculateCenterFromCameraLngLatAlt(w.toLngLat(),o.aN(w.z,v.y),this.bearing,this.pitch);this._elevation=I.elevation,this._center=I.center,this.setZoom(I.zoom)}getCameraPoint(){let a=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(a*Math.sin(this.rollInRadians),a*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let a=o.ag(1,this.center.lat)*this.worldSize;return ne(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/a).toLngLat()}getMercatorTileCoordinates(a){if(!a)return[0,0,1,1];let u=a.canonical.z>=0?1<<a.canonical.z:Math.pow(2,a.canonical.z);return[a.canonical.x/u,a.canonical.y/u,1/u/o.Z,1/u/o.Z]}}class Ni{constructor(a,u){this.min=a,this.max=u,this.center=o.aO([],o.aP([],this.min,this.max),.5)}quadrant(a){let u=[a%2==0,a<2],m=o.aQ(this.min),v=o.aQ(this.max);for(let w=0;w<u.length;w++)m[w]=u[w]?this.min[w]:this.center[w],v[w]=u[w]?this.center[w]:this.max[w];return v[2]=this.max[2],new Ni(m,v)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersectsFrustum(a){let u=!0;for(let m=0;m<a.planes.length;m++){let v=this.intersectsPlane(a.planes[m]);if(v===0)return 0;v===1&&(u=!1)}return u?2:a.aabb.min[0]>this.max[0]||a.aabb.min[1]>this.max[1]||a.aabb.min[2]>this.max[2]||a.aabb.max[0]<this.min[0]||a.aabb.max[1]<this.min[1]||a.aabb.max[2]<this.min[2]?0:1}intersectsPlane(a){let u=a[3],m=a[3];for(let v=0;v<3;v++)a[v]>0?(u+=a[v]*this.min[v],m+=a[v]*this.max[v]):(m+=a[v]*this.min[v],u+=a[v]*this.max[v]);return u>=0?2:m<0?0:1}}class Mo{distanceToTile2d(a,u,m,v){let w=v.distanceX([a,u]),I=v.distanceY([a,u]);return Math.hypot(w,I)}getWrap(a,u,m){return m}getTileAABB(a,u,m,v){var w,I;let P=m,L=m;if(v.terrain){let B=new o.Y(a.z,u,a.z,a.x,a.y),$=v.terrain.getMinMaxElevation(B);P=(w=$.minElevation)!==null&&w!==void 0?w:m,L=(I=$.maxElevation)!==null&&I!==void 0?I:m}let j=1<<a.z;return new Ni([u+a.x/j,a.y/j,P],[u+(a.x+1)/j,(a.y+1)/j,L])}allowVariableZoom(a,u){let m=a.fov*(Math.abs(Math.cos(a.rollInRadians))*a.height+Math.abs(Math.sin(a.rollInRadians))*a.width)/a.height,v=o.ae(78.5-m/2,0,60);return!!u.terrain||a.pitch>v}allowWorldCopies(){return!0}recalculateCache(){}}class Vn{constructor(a,u,m){this.points=a,this.planes=u,this.aabb=m}static fromInvProjectionMatrix(a,u=1,m=0){let v=Math.pow(2,m),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(j=>{let B=1/(j=o.at([],j,a))[3]/u*v;return o.aR(j,j,[B,B,1/j[3],B])}),I=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(j=>{let B=o.aS([],w[j[0]],w[j[1]]),$=o.aS([],w[j[2]],w[j[1]]),G=o.aT([],o.aU([],B,$)),J=-o.aV(G,w[j[1]]);return G.concat(J)}),P=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],L=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let j of w)for(let B=0;B<3;B++)P[B]=Math.min(P[B],j[B]),L[B]=Math.max(L[B],j[B]);return new Vn(w,I,new Ni(P,L))}}class Wf{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,u,m){return this._helper.interpolatePadding(a,u,m)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,u,m=!0){this._helper.resize(a,u,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,u){this._helper.overrideNearFarZ(a,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a,u){}constructor(a,u,m,v,w){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Io({calcMatrices:()=>{this._calcMatrices()},getConstrained:(I,P)=>this.getConstrained(I,P)},a,u,m,v,w),this._coveringTilesDetailsProvider=new Mo}clone(){let a=new Wf;return a.apply(this),a}apply(a,u,m){this._helper.apply(a,u,m)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(a){let u=[new o.aW(0,a)];if(this._helper._renderWorldCopies){let m=this.screenPointToMercatorCoordinate(new o.P(0,0)),v=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),w=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),I=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),P=Math.floor(Math.min(m.x,v.x,w.x,I.x)),L=Math.floor(Math.max(m.x,v.x,w.x,I.x)),j=1;for(let B=P-j;B<=L+j;B++)B!==0&&u.push(new o.aW(B,a))}return u}getCameraFrustum(){return Vn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){let u=this.screenPointToLocation(this.centerPoint,a),m=a?a.getElevationForLngLatZoom(u,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(m)}setLocationAtPoint(a,u){let m=o.ag(this.elevation,this.center.lat),v=this.screenPointToMercatorCoordinateAtZ(u,m),w=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,m),I=o.$.fromLngLat(a),P=new o.$(I.x-(v.x-w.x),I.y-(v.y-w.y));this.setCenter(P==null?void 0:P.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(a,u){return u?this.coordinatePoint(o.$.fromLngLat(a),u.getElevationForLngLatZoom(a,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.$.fromLngLat(a))}screenPointToLocation(a,u){var m;return(m=this.screenPointToMercatorCoordinate(a,u))===null||m===void 0?void 0:m.toLngLat()}screenPointToMercatorCoordinate(a,u){if(u){let m=u.pointCoordinate(a);if(m!=null)return m}return this.screenPointToMercatorCoordinateAtZ(a)}screenPointToMercatorCoordinateAtZ(a,u){let m=u||0,v=[a.x,a.y,0,1],w=[a.x,a.y,1,1];o.at(v,v,this._pixelMatrixInverse),o.at(w,w,this._pixelMatrixInverse);let I=v[3],P=w[3],L=v[1]/I,j=w[1]/P,B=v[2]/I,$=w[2]/P,G=B===$?0:(m-B)/($-B);return new o.$(o.B.number(v[0]/I,w[0]/P,G)/this.worldSize,o.B.number(L,j,G)/this.worldSize,m)}coordinatePoint(a,u=0,m=this._pixelMatrix){let v=[a.x*this.worldSize,a.y*this.worldSize,u,1];return o.at(v,v,m),new o.P(v[0]/v[3],v[1]/v[3])}getBounds(){let a=Math.max(0,this._helper._height/2-qe(this));return new At().extend(this.screenPointToLocation(new o.P(0,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(a,u){return u?u.pointCoordinate(a)!=null:a.y>this.height/2-qe(this)}calculatePosMatrix(a,u=!1,m){var v;let w=(v=a.key)!==null&&v!==void 0?v:o.aX(a.wrap,a.canonical.z,a.canonical.z,a.canonical.x,a.canonical.y),I=u?this._alignedPosMatrixCache:this._posMatrixCache;if(I.has(w)){let j=I.get(w);return m?j.f32:j.f64}let P=oe(a,this.worldSize);o.N(P,u?this._alignedProjMatrix:this._viewProjMatrix,P);let L={f64:P,f32:new Float32Array(P)};return I.set(w,L),m?L.f32:L.f64}calculateFogMatrix(a){let u=a.key,m=this._fogMatrixCacheF32;if(m.has(u))return m.get(u);let v=oe(a,this.worldSize);return o.N(v,this._fogMatrix,v),m.set(u,new Float32Array(v)),m.get(u)}getConstrained(a,u){u=o.ae(+u,this.minZoom,this.maxZoom);let m={center:new o.Q(a.lng,a.lat),zoom:u},v=this._helper._lngRange;this._helper._renderWorldCopies||v!==null||(v=[-179.9999999999,180-1e-10]);let w=this.tileSize*o.ac(m.zoom),I=0,P=w,L=0,j=w,B=0,$=0,{x:G,y:J}=this.size;if(this._helper._latRange){let Te=this._helper._latRange;I=o.S(Te[1])*w,P=o.S(Te[0])*w,P-I<J&&(B=J/(P-I))}v&&(L=o.aL(o.U(v[0])*w,0,w),j=o.aL(o.U(v[1])*w,0,w),j<L&&(j+=w),j-L<G&&($=G/(j-L)));let{x:te,y:pe}=ri(w,a),fe,de,be=Math.max($||0,B||0);if(be){let Te=new o.P($?(j+L)/2:te,B?(P+I)/2:pe);return m.center=so(w,Te).wrap(),m.zoom+=o.ah(be),m}if(this._helper._latRange){let Te=J/2;pe-Te<I&&(de=I+Te),pe+Te>P&&(de=P-Te)}if(v){let Te=(L+j)/2,Se=te;this._helper._renderWorldCopies&&(Se=o.aL(te,Te-w/2,Te+w/2));let Ae=G/2;Se-Ae<L&&(fe=L+Ae),Se+Ae>j&&(fe=j-Ae)}if(fe!==void 0||de!==void 0){let Te=new o.P(fe!=null?fe:te,de!=null?de:pe);m.center=so(w,Te).wrap()}return m}calculateCenterFromCameraLngLatAlt(a,u,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(a,u,m,v)}_calculateNearFarZIfNeeded(a,u,m){if(!this._helper.autoCalculateNearFarZ)return;let v=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),w=a-v*this._helper._pixelPerMeter/Math.cos(u),I=v<0?w:a,P=Math.PI/2+this.pitchInRadians,L=o.ab(this.fov)*(Math.abs(Math.cos(o.ab(this.roll)))*this.height+Math.abs(Math.sin(o.ab(this.roll)))*this.width)/this.height*(.5+m.y/this.height),j=Math.sin(L)*I/Math.sin(o.ae(Math.PI-P-L,.01,Math.PI-.01)),B=qe(this),$=Math.atan(B/this._helper.cameraToCenterDistance),G=o.ab(.75),J=$>G?2*$*(.5+m.y/(2*B)):G,te=Math.sin(J)*I/Math.sin(o.ae(Math.PI-P-J,.01,Math.PI-.01)),pe=Math.min(j,te);this._helper._farZ=1.01*(Math.cos(Math.PI/2-u)*pe+I),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let a=this.centerOffset,u=ri(this.worldSize,this.center),m=u.x,v=u.y;this._helper._pixelPerMeter=o.ag(1,this.center.lat)*this.worldSize;let w=o.ab(Math.min(this.pitch,Qn)),I=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(w)),P;this._calculateNearFarZIfNeeded(I,w,a),P=new Float64Array(16),o.aY(P,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.an(this._invProjMatrix,P),P[8]=2*-a.x/this._helper._width,P[9]=2*a.y/this._helper._height,this._projectionMatrix=o.aZ(P),o.M(P,P,[1,-1,1]),o.L(P,P,[0,0,-this._helper.cameraToCenterDistance]),o.a_(P,P,-this.rollInRadians),o.a$(P,P,this.pitchInRadians),o.a_(P,P,-this.bearingInRadians),o.L(P,P,[-m,-v,0]),this._mercatorMatrix=o.M([],P,[this.worldSize,this.worldSize,this.worldSize]),o.M(P,P,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,P),o.L(P,P,[0,0,-this.elevation]),this._viewProjMatrix=P,this._invViewProjMatrix=o.an([],P);let L=[0,0,-1,1];o.at(L,L,this._invViewProjMatrix),this._cameraPosition=[L[0]/L[3],L[1]/L[3],L[2]/L[3]],this._fogMatrix=new Float64Array(16),o.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,I,this._helper._farZ),this._fogMatrix[8]=2*-a.x/this.width,this._fogMatrix[9]=2*a.y/this.height,o.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.L(this._fogMatrix,this._fogMatrix,[-m,-v,0]),o.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,P);let j=this._helper._width%2/2,B=this._helper._height%2/2,$=Math.cos(this.bearingInRadians),G=Math.sin(-this.bearingInRadians),J=m-Math.round(m)+$*j+G*B,te=v-Math.round(v)+$*B+G*j,pe=new Float64Array(P);if(o.L(pe,pe,[J>.5?J-1:J,te>.5?te-1:te,0]),this._alignedProjMatrix=pe,P=o.an(new Float64Array(16),this._pixelMatrix),!P)throw new Error("failed to invert matrix");this._pixelMatrixInverse=P,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let a=this.screenPointToMercatorCoordinate(new o.P(0,0)),u=[a.x*this.worldSize,a.y*this.worldSize,0,1];return o.at(u,u,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let a=o.ag(1,this.center.lat)*this.worldSize;return ne(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/a).toLngLat()}lngLatToCameraDepth(a,u){let m=o.$.fromLngLat(a),v=[m.x*this.worldSize,m.y*this.worldSize,u,1];return o.at(v,v,this._viewProjMatrix),v[2]/v[3]}getProjectionData(a){let{overscaledTileID:u,aligned:m,applyTerrainMatrix:v}=a,w=this._helper.getMercatorTileCoordinates(u),I=u?this.calculatePosMatrix(u,m,!0):null,P;return P=u&&u.terrainRttPosMatrix32f&&v?u.terrainRttPosMatrix32f:I||o.b0(),{mainMatrix:P,tileMercatorCoords:w,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:P}}isLocationOccluded(a){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(a,u,m){return 1}transformLightDirection(a){return o.aQ(a)}getRayDirectionFromPixel(a){throw new Error("Not implemented.")}projectTileCoordinates(a,u,m,v){let w=this.calculatePosMatrix(m),I;v?(I=[a,u,v(a,u),1],o.at(I,I,w)):(I=[a,u,0,1],Eh(I,I,w));let P=I[3];return{point:new o.P(I[0]/P,I[1]/P),signedDistanceFromCamera:P,isOccluded:!1}}populateCache(a){for(let u of a)this.calculatePosMatrix(u)}getMatrixForModel(a,u){let m=o.$.fromLngLat(a,u),v=m.meterInMercatorCoordinateUnits(),w=o.b1();return o.L(w,w,[m.x,m.y,m.z]),o.a_(w,w,Math.PI),o.a$(w,w,Math.PI/2),o.M(w,w,[-v,v,v]),w}getProjectionDataForCustomLayer(a=!0){let u=new o.Y(0,0,0,0,0),m=this.getProjectionData({overscaledTileID:u,applyGlobeMatrix:a}),v=oe(u,this.worldSize);o.N(v,this._viewProjMatrix,v),m.tileMercatorCoords=[0,0,1,1];let w=[o.Z,o.Z,this.worldSize/this._helper.pixelsPerMeter],I=o.b2();return o.M(I,v,w),m.fallbackMatrix=I,m.mainMatrix=I,m}getFastPathSimpleProjectionMatrix(a){return this.calculatePosMatrix(a)}}function oa(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Xa(b){if(b.useSlerp){if(b.k<1){let a=o.b3(b.startEulerAngles.roll,b.startEulerAngles.pitch,b.startEulerAngles.bearing),u=o.b3(b.endEulerAngles.roll,b.endEulerAngles.pitch,b.endEulerAngles.bearing),m=new Float64Array(4);o.b4(m,a,u,b.k);let v=o.b5(m);b.tr.setRoll(v.roll),b.tr.setPitch(v.pitch),b.tr.setBearing(v.bearing)}else b.tr.setRoll(b.endEulerAngles.roll),b.tr.setPitch(b.endEulerAngles.pitch),b.tr.setBearing(b.endEulerAngles.bearing);}else b.tr.setRoll(o.B.number(b.startEulerAngles.roll,b.endEulerAngles.roll,b.k)),b.tr.setPitch(o.B.number(b.startEulerAngles.pitch,b.endEulerAngles.pitch,b.k)),b.tr.setBearing(o.B.number(b.startEulerAngles.bearing,b.endEulerAngles.bearing,b.k))}function Ia(b,a,u,m,v){let w=v.padding,I=ri(v.worldSize,u.getNorthWest()),P=ri(v.worldSize,u.getNorthEast()),L=ri(v.worldSize,u.getSouthEast()),j=ri(v.worldSize,u.getSouthWest()),B=o.ab(-m),$=I.rotate(B),G=P.rotate(B),J=L.rotate(B),te=j.rotate(B),pe=new o.P(Math.max($.x,G.x,te.x,J.x),Math.max($.y,G.y,te.y,J.y)),fe=new o.P(Math.min($.x,G.x,te.x,J.x),Math.min($.y,G.y,te.y,J.y)),de=pe.sub(fe),be=(v.width-(w.left+w.right+a.left+a.right))/de.x,Te=(v.height-(w.top+w.bottom+a.top+a.bottom))/de.y;if(Te<0||be<0)return void oa();let Se=Math.min(o.ah(v.scale*Math.min(be,Te)),b.maxZoom),Ae=o.P.convert(b.offset),De=new o.P((a.left-a.right)/2,(a.top-a.bottom)/2).rotate(o.ab(m)),Pe=Ae.add(De).mult(v.scale/o.ac(Se));return{center:so(v.worldSize,I.add(L).div(2).sub(Pe)),zoom:Se,bearing:m}}class sm{get useGlobeControls(){return!1}handlePanInertia(a,u){return{easingOffset:a,easingCenter:u.center}}handleMapControlsRollPitchBearingZoom(a,u){a.bearingDelta&&u.setBearing(u.bearing+a.bearingDelta),a.pitchDelta&&u.setPitch(u.pitch+a.pitchDelta),a.rollDelta&&u.setRoll(u.roll+a.rollDelta),a.zoomDelta&&u.setZoom(u.zoom+a.zoomDelta)}handleMapControlsPan(a,u,m){a.around.distSqr(u.centerPoint)<.01||u.setLocationAtPoint(m,a.around)}cameraForBoxAndBearing(a,u,m,v,w){return Ia(a,u,m,v,w)}handleJumpToCenterZoom(a,u){a.zoom!==(u.zoom!==void 0?+u.zoom:a.zoom)&&a.setZoom(+u.zoom),u.center!==void 0&&a.setCenter(o.Q.convert(u.center))}handleEaseTo(a,u){let m=a.zoom,v=a.padding,w={roll:a.roll,pitch:a.pitch,bearing:a.bearing},I={roll:u.roll===void 0?a.roll:u.roll,pitch:u.pitch===void 0?a.pitch:u.pitch,bearing:u.bearing===void 0?a.bearing:u.bearing},P=u.zoom!==void 0,L=!a.isPaddingEqual(u.padding),j=!1,B=P?+u.zoom:a.zoom,$=a.centerPoint.add(u.offsetAsPoint),G=a.screenPointToLocation($),{center:J,zoom:te}=a.getConstrained(o.Q.convert(u.center||G),B!=null?B:m);Hf(a,J);let pe=ri(a.worldSize,G),fe=ri(a.worldSize,J).sub(pe),de=o.ac(te-m);return j=te!==m,{easeFunc:be=>{if(j&&a.setZoom(o.B.number(m,te,be)),o.b6(w,I)||Xa({startEulerAngles:w,endEulerAngles:I,tr:a,k:be,useSlerp:w.roll!=I.roll}),L&&(a.interpolatePadding(v,u.padding,be),$=a.centerPoint.add(u.offsetAsPoint)),u.around)a.setLocationAtPoint(u.around,u.aroundPoint);else{let Te=o.ac(a.zoom-m),Se=te>m?Math.min(2,de):Math.max(.5,de),Ae=Math.pow(Se,1-be),De=so(a.worldSize,pe.add(fe.mult(be*Ae)).mult(Te));a.setLocationAtPoint(a.renderWorldCopies?De.wrap():De,$)}},isZooming:j,elevationCenter:J}}handleFlyTo(a,u){let m=u.zoom!==void 0,v=a.zoom,w=a.getConstrained(o.Q.convert(u.center||u.locationAtOffset),m?+u.zoom:v),I=w.center,P=w.zoom;Hf(a,I);let L=ri(a.worldSize,u.locationAtOffset),j=ri(a.worldSize,I).sub(L),B=j.mag(),$=o.ac(P-v),G;if(u.minZoom!==void 0){let J=Math.min(+u.minZoom,v,P),te=a.getConstrained(I,J).zoom;G=o.ac(te-v)}return{easeFunc:(J,te,pe,fe)=>{a.setZoom(J===1?P:v+o.ah(te));let de=J===1?I:so(a.worldSize,L.add(j.mult(pe)).mult(te));a.setLocationAtPoint(a.renderWorldCopies?de.wrap():de,fe)},scaleOfZoom:$,targetCenter:I,scaleOfMinZoom:G,pixelPathLength:B}}}class En{constructor(a,u,m){this.blendFunction=a,this.blendColor=u,this.mask=m}}En.Replace=[1,0],En.disabled=new En(En.Replace,o.b7.transparent,[!1,!1,!1,!1]),En.unblended=new En(En.Replace,o.b7.transparent,[!0,!0,!0,!0]),En.alphaBlended=new En([1,771],o.b7.transparent,[!0,!0,!0,!0]);let mi=2305;class Kr{constructor(a,u,m){this.enable=a,this.mode=u,this.frontFace=m}}Kr.disabled=new Kr(!1,1029,mi),Kr.backCCW=new Kr(!0,1029,mi),Kr.frontCCW=new Kr(!0,1028,mi);class xr{constructor(a,u,m){this.func=a,this.mask=u,this.range=m}}xr.ReadOnly=!1,xr.ReadWrite=!0,xr.disabled=new xr(519,xr.ReadOnly,[0,1]);let Zf=7680;class Ar{constructor(a,u,m,v,w,I){this.test=a,this.ref=u,this.mask=m,this.fail=v,this.depthFail=w,this.pass=I}}Ar.disabled=new Ar({func:519,mask:0},0,0,Zf,Zf,Zf);let vv=new WeakMap;function Vo(b){var a;if(vv.has(b))return vv.get(b);{let u=(a=b.getParameter(b.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return vv.set(b,u),u}}class Yx{get awaitingQuery(){return!!this._readbackQueue}constructor(a){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=a;let u=a.context,m=u.gl;this._texFormat=m.RGBA,this._texType=m.UNSIGNED_BYTE;let v=new o.aI;v.emplaceBack(-1,-1),v.emplaceBack(2,-1),v.emplaceBack(-1,2);let w=new o.aK;w.emplaceBack(0,1,2),this._fullscreenTriangle=new $f(u.createVertexBuffer(v,ia.members),u.createIndexBuffer(w),o.aJ.simpleSegment(0,0,v.length,w.length)),this._resultBuffer=new Uint8Array(4),u.activeTexture.set(m.TEXTURE1);let I=m.createTexture();m.bindTexture(m.TEXTURE_2D,I),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST),m.texImage2D(m.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=u.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(I),Vo(m)&&(this._pbo=m.createBuffer(),m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.bufferData(m.PIXEL_PACK_BUFFER,4,m.STREAM_READ),m.bindBuffer(m.PIXEL_PACK_BUFFER,null))}destroy(){let a=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),a.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(a,u){let m=this._updateCount;return this._readbackQueue?m>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():m>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(a,u),this._updateCount++,this._measuredError}_bindFramebuffer(){let a=this._cachedRenderContext.context,u=a.gl;a.activeTexture.set(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,this._fbo.colorAttachment.get()),a.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(a,u){let m=this._cachedRenderContext.context,v=m.gl;if(this._bindFramebuffer(),m.viewport.set([0,0,this._texWidth,this._texHeight]),m.clear({color:o.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(m,v.TRIANGLES,xr.disabled,Ar.disabled,En.unblended,Kr.disabled,((w,I)=>({u_input:w,u_output_expected:I}))(a,u),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Vo(v)){v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.readBuffer(v.COLOR_ATTACHMENT0),v.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),v.bindBuffer(v.PIXEL_PACK_BUFFER,null);let w=v.fenceSync(v.SYNC_GPU_COMMANDS_COMPLETE,0);v.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:w}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let a=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Vo(a)){let u=a.clientWaitSync(this._readbackQueue.sync,0,0);if(u===a.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(u===a.TIMEOUT_EXPIRED)return;a.bindBuffer(a.PIXEL_PACK_BUFFER,this._pbo),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),a.bindBuffer(a.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),a.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Yx._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(a){let u=0;return u+=a[0]/256,u+=a[1]/65536,u+=a[2]/16777216,a[3]<127&&(u=-u),u/128}}let Kx=o.Z/128;function lm(b,a){let u=b.granularity!==void 0?Math.max(b.granularity,1):1,m=u+(b.generateBorders?2:0),v=u+(b.extendToNorthPole||b.generateBorders?1:0)+(b.extendToSouthPole||b.generateBorders?1:0),w=m+1,I=v+1,P=b.generateBorders?-1:0,L=b.generateBorders||b.extendToNorthPole?-1:0,j=u+(b.generateBorders?1:0),B=u+(b.generateBorders||b.extendToSouthPole?1:0),$=w*I,G=m*v*6,J=w*I>65536;if(J&&a==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let te=J||a==="32bit",pe=new Int16Array(2*$),fe=0;for(let Te=L;Te<=B;Te++)for(let Se=P;Se<=j;Se++){let Ae=Se/u*o.Z;Se===-1&&(Ae=-64),Se===u+1&&(Ae=o.Z+Kx);let De=Te/u*o.Z;Te===-1&&(De=b.extendToNorthPole?o.b9:-64),Te===u+1&&(De=b.extendToSouthPole?o.ba:o.Z+Kx),pe[fe++]=Ae,pe[fe++]=De}let de=te?new Uint32Array(G):new Uint16Array(G),be=0;for(let Te=0;Te<v;Te++)for(let Se=0;Se<m;Se++){let Ae=Se+1+Te*w,De=Se+(Te+1)*w,Pe=Se+1+(Te+1)*w;de[be++]=Se+Te*w,de[be++]=De,de[be++]=Ae,de[be++]=Ae,de[be++]=De,de[be++]=Pe}return{vertices:pe.buffer.slice(0),indices:de.buffer.slice(0),uses32bitIndices:te}}let Yf=new o.aH({fill:new o.bb(128,2),line:new o.bb(512,0),tile:new o.bb(128,32),stencil:new o.bb(128,1),circle:3});class um{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return na.projectionGlobe}get vertexShaderPreludeCode(){return na.projectionMercator.vertexSource}get subdivisionGranularity(){return Yf}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(a){this._errorMeasurement||(this._errorMeasurement=new Yx(a));let u=o.S(this._errorQueryLatitudeDegrees),m=2*Math.atan(Math.exp(Math.PI-u*Math.PI*2))-.5*Math.PI,v=this._errorMeasurement.updateErrorLoop(u,m),w=_.now();v!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=v,this._errorMeasurementLastChangeTime=w);let I=Math.min(Math.max((w-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bd(I))}_getMeshKey(a){return`${a.granularity.toString(36)}_${a.generateBorders?"b":""}${a.extendToNorthPole?"n":""}${a.extendToSouthPole?"s":""}`}getMeshFromTileID(a,u,m,v,w){let I=(w==="stencil"?Yf.stencil:Yf.tile).getGranularityForZoomLevel(u.z);return this._getMesh(a,{granularity:I,generateBorders:m,extendToNorthPole:u.y===0&&v,extendToSouthPole:u.y===(1<<u.z)-1&&v})}_getMesh(a,u){let m=this._getMeshKey(u);if(m in this._tileMeshCache)return this._tileMeshCache[m];let v=function(w,I){let P=lm(I,"16bit"),L=o.aI.deserialize({arrayBuffer:P.vertices,length:P.vertices.byteLength/2/2}),j=o.aK.deserialize({arrayBuffer:P.indices,length:P.indices.byteLength/2/3});return new $f(w.createVertexBuffer(L,ia.members),w.createIndexBuffer(j),o.aJ.simpleSegment(0,0,L.length,j.length))}(a,u);return this._tileMeshCache[m]=v,v}recalculate(a){}hasTransition(){let a=_.now(),u=!1;return u=u||(a-this._errorMeasurementLastChangeTime)/1e3<.7,u=u||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,u}setErrorQueryLatitudeDegrees(a){this._errorQueryLatitudeDegrees=a}}let Xx=new o.r({type:new o.D(o.v.projection.type)});class yv extends o.E{constructor(a){super(),this._transitionable=new o.T(Xx),this.setProjection(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.C(0)),this._mercatorProjection=new om,this._verticalPerspectiveProjection=new um}get transitionState(){let a=this.properties.get("type");if(typeof a=="string"&&a==="mercator")return 0;if(typeof a=="string"&&a==="vertical-perspective")return 1;if(a instanceof o.be){if(a.from==="vertical-perspective"&&a.to==="mercator")return 1-a.transition;if(a.from==="mercator"&&a.to==="vertical-perspective")return a.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(a){this._mercatorProjection.updateGPUdependent(a),this._verticalPerspectiveProjection.updateGPUdependent(a)}getMeshFromTileID(a,u,m,v,w){return this.currentProjection.getMeshFromTileID(a,u,m,v,w)}setProjection(a){this._transitionable.setValue("type",(a==null?void 0:a.type)||"mercator")}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}setErrorQueryLatitudeDegrees(a){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(a),this._mercatorProjection.setErrorQueryLatitudeDegrees(a)}}function cm(b){let a=Ch(b.worldSize,b.center.lat);return 2*Math.PI*a}function Ah(b,a,u,m,v){let w=1/(1<<v),I=a/o.Z*w+m*w,P=o.bg((b/o.Z*w+u*w)*Math.PI*2+Math.PI,2*Math.PI),L=2*Math.atan(Math.exp(Math.PI-I*Math.PI*2))-.5*Math.PI,j=Math.cos(L),B=new Float64Array(3);return B[0]=Math.sin(P)*j,B[1]=Math.sin(L),B[2]=Math.cos(P)*j,B}function lo(b){return function(a,u){let m=Math.cos(u),v=new Float64Array(3);return v[0]=Math.sin(a)*m,v[1]=Math.sin(u),v[2]=Math.cos(a)*m,v}(b.lng*Math.PI/180,b.lat*Math.PI/180)}function Ch(b,a){return b/(2*Math.PI)/Math.cos(a*Math.PI/180)}function hm(b){let a=Math.asin(b[1])/Math.PI*180,u=Math.sqrt(b[0]*b[0]+b[2]*b[2]);if(u>1e-6){let m=b[0]/u,v=Math.acos(b[2]/u),w=(m>0?v:-v)/Math.PI*180;return new o.Q(o.aL(w,-180,180),a)}return new o.Q(0,a)}function _c(b){return Math.cos(b*Math.PI/180)}function uo(b,a){let u=_c(b),m=_c(a);return o.ah(m/u)}function _v(b,a){let u=b.rotate(a.bearingInRadians),m=a.zoom+uo(a.center.lat,0),v=o.bc(1/_c(a.center.lat),1/_c(Math.min(Math.abs(a.center.lat),60)),o.bf(m,7,3,0,1)),w=360/cm({worldSize:a.worldSize,center:{lat:a.center.lat}});return new o.Q(a.center.lng-u.x*w*v,o.ae(a.center.lat+u.y*w,-85.051129,o.af))}function xv(b){let a=.5*b,u=Math.sin(a),m=Math.cos(a);return Math.log(u+m)-Math.log(m-u)}function qI(b,a,u,m){let v=b.lat+u*m;if(Math.abs(u)>1){let w=(Math.sign(b.lat+u)!==Math.sign(b.lat)?-Math.abs(b.lat):Math.abs(b.lat))*Math.PI/180,I=Math.abs(b.lat+u)*Math.PI/180,P=xv(w+m*(I-w)),L=xv(w),j=xv(I);return new o.Q(b.lng+a*((P-L)/(j-L)),v)}return new o.Q(b.lng+a*m,v)}class Jk{constructor(a){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=a}recalculateCache(){if(!this._hadAnyChanges)return;let a=this._cachePrevious;this._cachePrevious=this._cache,this._cache=a,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(a,u,m,v){let w=`${a.z}_${a.x}_${a.y}`,I=this._cache.get(w);if(I)return I;let P=this._cachePrevious.get(w);if(P)return this._cache.set(w,P),P;let L=this._aabbFactory(a,u,m,v);return this._cache.set(w,L),this._hadAnyChanges=!0,L}}function Go(b,a,u){let m=b-a;return m<0?-m:Math.max(0,m-u)}function fm(b,a,u,m,v){let w=b-u,I;return I=w<0?Math.min(-w,1+w-v):w>1?Math.min(Math.max(w-v,0),1-w):0,Math.max(I,Go(a,m,v))}class Cl{constructor(){this._aabbCache=new Jk(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(a,u,m,v){let w=1<<m.z,I=1/w,P=m.x/w,L=m.y/w,j=2;return j=Math.min(j,fm(a,u,P,L,I)),j=Math.min(j,fm(a,u,P+.5,-L-I,I)),j=Math.min(j,fm(a,u,P+.5,2-L-I,I)),j}getWrap(a,u,m){let v=1<<u.z,w=1/v,I=u.x/v,P=Go(a.x,I,w),L=Go(a.x,I-1,w),j=Go(a.x,I+1,w),B=Math.min(P,L,j);return B===j?1:B===L?-1:0}allowVariableZoom(a,u){return Ie(a,u)>4}allowWorldCopies(){return!1}getTileAABB(a,u,m,v){return this._aabbCache.getTileAABB(a,u,m,v)}_computeTileAABB(a,u,m,v){if(a.z<=0)return new Ni([-1,-1,-1],[1,1,1]);if(a.z===1)return new Ni([a.x===0?-1:0,a.y===0?0:-1,-1],[a.x===0?0:1,a.y===0?1:0,1]);{let w=[Ah(0,0,a.x,a.y,a.z),Ah(o.Z,0,a.x,a.y,a.z),Ah(o.Z,o.Z,a.x,a.y,a.z),Ah(0,o.Z,a.x,a.y,a.z)],I=[1,1,1],P=[-1,-1,-1];for(let L of w)for(let j=0;j<3;j++)I[j]=Math.min(I[j],L[j]),P[j]=Math.max(P[j],L[j]);if(a.y===0||a.y===(1<<a.z)-1){let L=[0,a.y===0?1:-1,0];for(let j=0;j<3;j++)I[j]=Math.min(I[j],L[j]),P[j]=Math.max(P[j],L[j])}return new Ni(I,P)}}}class Ph{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,u,m){return this._helper.interpolatePadding(a,u,m)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,u){this._helper.resize(a,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,u){this._helper.overrideNearFarZ(a,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a){}constructor(){this._cachedClippingPlane=o.bk(),this._projectionMatrix=o.b1(),this._globeViewProjMatrix32f=o.b0(),this._globeViewProjMatrixNoCorrection=o.b1(),this._globeViewProjMatrixNoCorrectionInverted=o.b1(),this._globeProjMatrixInverted=o.b1(),this._cameraPosition=o.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Io({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,u)=>this.getConstrained(a,u)}),this._coveringTilesDetailsProvider=new Cl}clone(){let a=new Ph;return a.apply(this),a}apply(a,u){this._globeLatitudeErrorCorrectionRadians=u||0,this._helper.apply(a)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let a=o.bh();return a[0]=this._cameraPosition[0],a[1]=this._cameraPosition[1],a[2]=this._cameraPosition[2],a}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(a){let{overscaledTileID:u,applyGlobeMatrix:m}=a,v=this._helper.getMercatorTileCoordinates(u);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:v,clippingPlane:this._cachedClippingPlane,projectionTransition:m?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(a){let u=this.pitchInRadians,m=this.cameraToCenterDistance/a,v=Math.sin(u)*m,w=Math.cos(u)*m+1,I=1/Math.sqrt(v*v+w*w)*1,P=-v,L=w,j=Math.sqrt(P*P+L*L);P/=j,L/=j;let B=[0,P,L];o.bl(B,B,[0,0,0],-this.bearingInRadians),o.bm(B,B,[0,0,0],-1*this.center.lat*Math.PI/180),o.bn(B,B,[0,0,0],this.center.lng*Math.PI/180);let $=1/o.bo(B);return o.aO(B,B,$),[...B,-I*$]}isLocationOccluded(a){return!this.isSurfacePointVisible(lo(a))}transformLightDirection(a){let u=this._helper._center.lng*Math.PI/180,m=this._helper._center.lat*Math.PI/180,v=Math.cos(m),w=[Math.sin(u)*v,Math.sin(m),Math.cos(u)*v],I=[w[2],0,-w[0]],P=[0,0,0];o.aU(P,I,w),o.aT(I,I),o.aT(P,P);let L=[0,0,0];return o.aT(L,[I[0]*a[0]+P[0]*a[1]+w[0]*a[2],I[1]*a[0]+P[1]*a[1]+w[1]*a[2],I[2]*a[0]+P[2]*a[1]+w[2]*a[2]]),L}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(a,u,m){let v=function(P,L,j){let B=1/(1<<j.z);return new o.$(P/o.Z*B+j.x*B,L/o.Z*B+j.y*B)}(a,u,m.canonical),w=(I=v.y,[o.bg(v.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-I*Math.PI*2))-.5*Math.PI]);var I;return this.getCircleRadiusCorrection()/Math.cos(w[1])}projectTileCoordinates(a,u,m,v){let w=m.canonical,I=Ah(a,u,w.x,w.y,w.z),P=1+(v?v(a,u):0)/o.bu,L=[I[0]*P,I[1]*P,I[2]*P,1];o.at(L,L,this._globeViewProjMatrixNoCorrection);let j=this._cachedClippingPlane,B=j[0]*I[0]+j[1]*I[1]+j[2]*I[2]+j[3]<0;return{point:new o.P(L[0]/L[3],L[1]/L[3]),signedDistanceFromCamera:L[3],isOccluded:B}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let a=Ch(this.worldSize,this.center.lat),u=o.b2(),m=o.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*a),o.aY(u,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let v=this.centerOffset;u[8]=2*-v.x/this._helper._width,u[9]=2*v.y/this._helper._height,this._projectionMatrix=o.aZ(u),this._globeProjMatrixInverted=o.b2(),o.an(this._globeProjMatrixInverted,u),o.L(u,u,[0,0,-this.cameraToCenterDistance]),o.a_(u,u,this.rollInRadians),o.a$(u,u,-this.pitchInRadians),o.a_(u,u,this.bearingInRadians),o.L(u,u,[0,0,-a]);let w=o.bh();w[0]=a,w[1]=a,w[2]=a,o.a$(m,u,this.center.lat*Math.PI/180),o.bp(m,m,-this.center.lng*Math.PI/180),o.M(m,m,w),this._globeViewProjMatrixNoCorrection=m,o.a$(u,u,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bp(u,u,-this.center.lng*Math.PI/180),o.M(u,u,w),this._globeViewProjMatrix32f=new Float32Array(u),this._globeViewProjMatrixNoCorrectionInverted=o.b2(),o.an(this._globeViewProjMatrixNoCorrectionInverted,m);let I=o.bh();this._cameraPosition=o.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/a,o.bl(this._cameraPosition,this._cameraPosition,I,-this.rollInRadians),o.bm(this._cameraPosition,this._cameraPosition,I,this.pitchInRadians),o.bl(this._cameraPosition,this._cameraPosition,I,-this.bearingInRadians),o.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bm(this._cameraPosition,this._cameraPosition,I,-this.center.lat*Math.PI/180),o.bn(this._cameraPosition,this._cameraPosition,I,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(a);let P=o.aZ(this._globeViewProjMatrixNoCorrectionInverted);o.M(P,P,[1,1,-1]),this._cachedFrustum=Vn.fromInvProjectionMatrix(P)}calculateFogMatrix(a){o.w("calculateFogMatrix is not supported on globe projection.");let u=o.b2();return o.ad(u),u}getVisibleUnwrappedCoordinates(a){return[new o.aW(0,a)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){a&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,u){if(!this._globeViewProjMatrixNoCorrection)return 1;let m=lo(a);o.aO(m,m,1+u/o.bu);let v=o.bk();return o.at(v,[m[0],m[1],m[2],1],this._globeViewProjMatrixNoCorrection),v[2]/v[3]}populateCache(a){}getBounds(){let a=.5*this.width,u=.5*this.height,m=[new o.P(0,0),new o.P(a,0),new o.P(this.width,0),new o.P(this.width,u),new o.P(this.width,this.height),new o.P(a,this.height),new o.P(0,this.height),new o.P(0,u)],v=[];for(let $ of m)v.push(this.unprojectScreenPoint($));let w=0,I=0,P=0,L=0,j=this.center;for(let $ of v){let G=o.bq(j.lng,$.lng),J=o.bq(j.lat,$.lat);G<I&&(I=G),G>w&&(w=G),J<L&&(L=J),J>P&&(P=J)}let B=[j.lng+I,j.lat+L,j.lng+w,j.lat+P];return this.isSurfacePointOnScreen([0,1,0])&&(B[3]=90,B[0]=-180,B[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(B[1]=-90,B[0]=-180,B[2]=180),new At(B)}getConstrained(a,u){let m=o.ae(a.lat,-85.051129,o.af),v=o.ae(+u,this.minZoom+uo(0,m),this.maxZoom);return{center:new o.Q(a.lng,m),zoom:v}}calculateCenterFromCameraLngLatAlt(a,u,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(a,u,m,v)}setLocationAtPoint(a,u){let m=lo(this.unprojectScreenPoint(u)),v=lo(a),w=o.bh();o.br(w);let I=o.bh();o.bn(I,m,w,-this.center.lng*Math.PI/180),o.bm(I,I,w,this.center.lat*Math.PI/180);let P=v[0]*v[0]+v[2]*v[2],L=I[0]*I[0];if(P<L)return;let j=Math.sqrt(P-L),B=-j,$=o.bs(v[0],v[2],I[0],j),G=o.bs(v[0],v[2],I[0],B),J=o.bh();o.bn(J,v,w,-$);let te=o.bs(J[1],J[2],I[1],I[2]),pe=o.bh();o.bn(pe,v,w,-G);let fe=o.bs(pe[1],pe[2],I[1],I[2]),de=.5*Math.PI,be=te>=-de&&te<=de,Te=fe>=-de&&fe<=de,Se,Ae;if(be&&Te){let tt=this.center.lng*Math.PI/180,Ke=this.center.lat*Math.PI/180;o.bv($,tt)+o.bv(te,Ke)<o.bv(G,tt)+o.bv(fe,Ke)?(Se=$,Ae=te):(Se=G,Ae=fe)}else if(be)Se=$,Ae=te;else{if(!Te)return;Se=G,Ae=fe}let De=Se/Math.PI*180,Pe=Ae/Math.PI*180,Ue=this.center.lat;this.setCenter(new o.Q(De,o.ae(Pe,-90,90))),this.setZoom(this.zoom+uo(Ue,this.center.lat))}locationToScreenPoint(a,u){let m=lo(a);if(u){let v=u.getElevationForLngLatZoom(a,this._helper._tileZoom);o.aO(m,m,1+v/o.bu)}return this._projectSurfacePointToScreen(m)}_projectSurfacePointToScreen(a){let u=o.bk();return o.at(u,[...a,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],new o.P((.5*u[0]+.5)*this.width,(.5*-u[1]+.5)*this.height)}screenPointToMercatorCoordinate(a,u){if(u){let m=u.pointCoordinate(a);if(m)return m}return o.$.fromLngLat(this.unprojectScreenPoint(a))}screenPointToLocation(a,u){var m;return(m=this.screenPointToMercatorCoordinate(a,u))===null||m===void 0?void 0:m.toLngLat()}isPointOnMapSurface(a,u){let m=this._cameraPosition,v=this.getRayDirectionFromPixel(a);return!!this.rayPlanetIntersection(m,v)}getRayDirectionFromPixel(a){let u=o.bk();u[0]=a.x/this.width*2-1,u[1]=-1*(a.y/this.height*2-1),u[2]=1,u[3]=1,o.at(u,u,this._globeViewProjMatrixNoCorrectionInverted),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3];let m=o.bh();m[0]=u[0]-this._cameraPosition[0],m[1]=u[1]-this._cameraPosition[1],m[2]=u[2]-this._cameraPosition[2];let v=o.bh();return o.aT(v,m),v}isSurfacePointVisible(a){let u=this._cachedClippingPlane;return u[0]*a[0]+u[1]*a[1]+u[2]*a[2]+u[3]>=0}isSurfacePointOnScreen(a){if(!this.isSurfacePointVisible(a))return!1;let u=o.bk();return o.at(u,[...a,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],u[0]>-1&&u[0]<1&&u[1]>-1&&u[1]<1&&u[2]>-1&&u[2]<1}rayPlanetIntersection(a,u){let m=o.aV(a,u),v=o.bh(),w=o.bh();o.aO(w,u,m),o.aS(v,a,w);let I=1-o.aV(v,v);if(I<0)return null;let P=o.aV(a,a)-1,L=-m+(m<0?1:-1)*Math.sqrt(I),j=P/L,B=L;return{tMin:Math.min(j,B),tMax:Math.max(j,B)}}unprojectScreenPoint(a){let u=this._cameraPosition,m=this.getRayDirectionFromPixel(a),v=this.rayPlanetIntersection(u,m);if(v){let B=o.bh();o.aP(B,u,[m[0]*v.tMin,m[1]*v.tMin,m[2]*v.tMin]);let $=o.bh();return o.aT($,B),hm($)}let w=this._cachedClippingPlane,I=w[0]*m[0]+w[1]*m[1]+w[2]*m[2],P=-o.bt(w,u)/I,L=o.bh();if(P>0)o.aP(L,u,[m[0]*P,m[1]*P,m[2]*P]);else{let B=o.bh();o.aP(B,u,[2*m[0],2*m[1],2*m[2]]);let $=o.bt(this._cachedClippingPlane,B);o.aS(L,B,[this._cachedClippingPlane[0]*$,this._cachedClippingPlane[1]*$,this._cachedClippingPlane[2]*$])}let j=function(B){let $=o.bh();return $[0]=B[0]*-B[3],$[1]=B[1]*-B[3],$[2]=B[2]*-B[3],{center:$,radius:Math.sqrt(1-B[3]*B[3])}}(w);return hm(function(B,$,G){let J=o.bh();o.aS(J,G,B);let te=o.bh();return o.bi(te,B,J,$/o.bj(J)),te}(j.center,j.radius,L))}getMatrixForModel(a,u){let m=o.Q.convert(a),v=1/o.bu,w=o.b1();return o.bp(w,w,m.lng/180*Math.PI),o.a$(w,w,-m.lat/180*Math.PI),o.L(w,w,[0,0,1+u/o.bu]),o.a$(w,w,.5*Math.PI),o.M(w,w,[v,v,v]),w}getProjectionDataForCustomLayer(a=!0){let u=this.getProjectionData({overscaledTileID:new o.Y(0,0,0,0,0),applyGlobeMatrix:a});return u.tileMercatorCoords=[0,0,1,1],u}getFastPathSimpleProjectionMatrix(a){}}class pm{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,u,m){return this._helper.interpolatePadding(a,u,m)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,u,m=!0){this._helper.resize(a,u,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,u){this._helper.overrideNearFarZ(a,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(a,u){this._globeness=a,this._globeLatitudeErrorCorrectionRadians=u,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Io({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,u)=>this.getConstrained(a,u)}),this._globeness=1,this._mercatorTransform=new Wf,this._verticalPerspectiveTransform=new Ph}clone(){let a=new pm;return a._globeness=this._globeness,a._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,a.apply(this),a}apply(a){this._helper.apply(a),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(a){let u=this._mercatorTransform.getProjectionData(a),m=this._verticalPerspectiveTransform.getProjectionData(a);return{mainMatrix:this.isGlobeRendering?m.mainMatrix:u.mainMatrix,clippingPlane:m.clippingPlane,tileMercatorCoords:m.tileMercatorCoords,projectionTransition:a.applyGlobeMatrix?this._globeness:0,fallbackMatrix:u.fallbackMatrix}}isLocationOccluded(a){return this.currentTransform.isLocationOccluded(a)}transformLightDirection(a){return this.currentTransform.transformLightDirection(a)}getPixelScale(){return o.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(a,u,m){let v=this._mercatorTransform.getPitchedTextCorrection(a,u,m),w=this._verticalPerspectiveTransform.getPitchedTextCorrection(a,u,m);return o.bc(v,w,this._globeness)}projectTileCoordinates(a,u,m,v){return this.currentTransform.projectTileCoordinates(a,u,m,v)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(a){return this.currentTransform.calculateFogMatrix(a)}getVisibleUnwrappedCoordinates(a){return this.currentTransform.getVisibleUnwrappedCoordinates(a)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(a){this._mercatorTransform.recalculateZoomAndCenter(a),this._verticalPerspectiveTransform.recalculateZoomAndCenter(a)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,u){return this.currentTransform.lngLatToCameraDepth(a,u)}populateCache(a){this._mercatorTransform.populateCache(a),this._verticalPerspectiveTransform.populateCache(a)}getBounds(){return this.currentTransform.getBounds()}getConstrained(a,u){return this.currentTransform.getConstrained(a,u)}calculateCenterFromCameraLngLatAlt(a,u,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(a,u,m,v)}setLocationAtPoint(a,u){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(a,u),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(a,u),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(a,u){return this.currentTransform.locationToScreenPoint(a,u)}screenPointToMercatorCoordinate(a,u){return this.currentTransform.screenPointToMercatorCoordinate(a,u)}screenPointToLocation(a,u){return this.currentTransform.screenPointToLocation(a,u)}isPointOnMapSurface(a,u){return this.currentTransform.isPointOnMapSurface(a,u)}getRayDirectionFromPixel(a){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(a)}getMatrixForModel(a,u){return this.currentTransform.getMatrixForModel(a,u)}getProjectionDataForCustomLayer(a=!0){let u=this._mercatorTransform.getProjectionDataForCustomLayer(a);if(!this.isGlobeRendering)return u;let m=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(a);return m.fallbackMatrix=u.mainMatrix,m}getFastPathSimpleProjectionMatrix(a){return this.currentTransform.getFastPathSimpleProjectionMatrix(a)}}class bs{get useGlobeControls(){return!0}handlePanInertia(a,u){let m=_v(a,u);return Math.abs(m.lng-u.center.lng)>180&&(m.lng=u.center.lng+179.5*Math.sign(m.lng-u.center.lng)),{easingCenter:m,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(a,u){let m=a.around,v=u.screenPointToLocation(m);a.bearingDelta&&u.setBearing(u.bearing+a.bearingDelta),a.pitchDelta&&u.setPitch(u.pitch+a.pitchDelta),a.rollDelta&&u.setRoll(u.roll+a.rollDelta);let w=u.zoom;a.zoomDelta&&u.setZoom(u.zoom+a.zoomDelta);let I=u.zoom-w;if(I===0)return;let P=o.bq(u.center.lng,v.lng),L=P/(Math.abs(P/180)+1),j=o.bq(u.center.lat,v.lat),B=u.getRayDirectionFromPixel(m),$=u.cameraPosition,G=-1*o.aV($,B),J=o.bh();o.aP(J,$,[B[0]*G,B[1]*G,B[2]*G]);let te=o.bo(J)-1,pe=Math.exp(.5*-Math.max(te-.3,0)),fe=Ch(u.worldSize,u.center.lat)/Math.min(u.width,u.height),de=o.bf(fe,.9,.5,1,.25),be=(1-o.ac(-I))*Math.min(pe,de),Te=u.center.lat,Se=u.zoom,Ae=new o.Q(u.center.lng+L*be,o.ae(u.center.lat+j*be,-85.051129,o.af));u.setLocationAtPoint(v,m);let De=u.center,Pe=o.bf(Math.abs(P),45,85,0,1),Ue=o.bf(fe,.75,.35,0,1),tt=Math.pow(Math.max(Pe,Ue),.25),Ke=o.bq(De.lng,Ae.lng),Xe=o.bq(De.lat,Ae.lat);u.setCenter(new o.Q(De.lng+Ke*tt,De.lat+Xe*tt).wrap()),u.setZoom(Se+uo(Te,u.center.lat))}handleMapControlsPan(a,u,m){if(!a.panDelta)return;let v=u.center.lat,w=u.zoom;u.setCenter(_v(a.panDelta,u).wrap()),u.setZoom(w+uo(v,u.center.lat))}cameraForBoxAndBearing(a,u,m,v,w){let I=Ia(a,u,m,v,w),P=u.left/w.width*2-1,L=(w.width-u.right)/w.width*2-1,j=u.top/w.height*-2+1,B=(w.height-u.bottom)/w.height*-2+1,$=o.bq(m.getWest(),m.getEast())<0,G=$?m.getEast():m.getWest(),J=$?m.getWest():m.getEast(),te=Math.max(m.getNorth(),m.getSouth()),pe=Math.min(m.getNorth(),m.getSouth()),fe=G+.5*o.bq(G,J),de=te+.5*o.bq(te,pe),be=w.clone();be.setCenter(I.center),be.setBearing(I.bearing),be.setPitch(0),be.setRoll(0),be.setZoom(I.zoom);let Te=be.modelViewProjectionMatrix,Se=[lo(m.getNorthWest()),lo(m.getNorthEast()),lo(m.getSouthWest()),lo(m.getSouthEast()),lo(new o.Q(J,de)),lo(new o.Q(G,de)),lo(new o.Q(fe,te)),lo(new o.Q(fe,pe))],Ae=lo(I.center),De=Number.POSITIVE_INFINITY;for(let Pe of Se)P<0&&(De=bs.getLesserNonNegativeNonNull(De,bs.solveVectorScale(Pe,Ae,Te,"x",P))),L>0&&(De=bs.getLesserNonNegativeNonNull(De,bs.solveVectorScale(Pe,Ae,Te,"x",L))),j>0&&(De=bs.getLesserNonNegativeNonNull(De,bs.solveVectorScale(Pe,Ae,Te,"y",j))),B<0&&(De=bs.getLesserNonNegativeNonNull(De,bs.solveVectorScale(Pe,Ae,Te,"y",B)));if(Number.isFinite(De)&&De!==0)return I.zoom=be.zoom+o.ah(De),I;oa()}handleJumpToCenterZoom(a,u){let m=a.center.lat,v=a.getConstrained(u.center?o.Q.convert(u.center):a.center,a.zoom).center;a.setCenter(v.wrap());let w=u.zoom!==void 0?+u.zoom:a.zoom+uo(m,v.lat);a.zoom!==w&&a.setZoom(w)}handleEaseTo(a,u){let m=a.zoom,v=a.center,w=a.padding,I={roll:a.roll,pitch:a.pitch,bearing:a.bearing},P={roll:u.roll===void 0?a.roll:u.roll,pitch:u.pitch===void 0?a.pitch:u.pitch,bearing:u.bearing===void 0?a.bearing:u.bearing},L=u.zoom!==void 0,j=!a.isPaddingEqual(u.padding),B=!1,$=u.center?o.Q.convert(u.center):v,G=a.getConstrained($,m).center;Hf(a,G);let J=a.clone();J.setCenter(G),J.setZoom(L?+u.zoom:m+uo(v.lat,$.lat)),J.setBearing(u.bearing);let te=new o.P(o.ae(a.centerPoint.x+u.offsetAsPoint.x,0,a.width),o.ae(a.centerPoint.y+u.offsetAsPoint.y,0,a.height));J.setLocationAtPoint(G,te);let pe=(u.offset&&u.offsetAsPoint.mag())>0?J.center:G,fe=L?+u.zoom:m+uo(v.lat,pe.lat),de=m+uo(v.lat,0),be=fe+uo(pe.lat,0),Te=o.bq(v.lng,pe.lng),Se=o.bq(v.lat,pe.lat),Ae=o.ac(be-de);return B=fe!==m,{easeFunc:De=>{if(o.b6(I,P)||Xa({startEulerAngles:I,endEulerAngles:P,tr:a,k:De,useSlerp:I.roll!=P.roll}),j&&a.interpolatePadding(w,u.padding,De),u.around)o.w("Easing around a point is not supported under globe projection."),a.setLocationAtPoint(u.around,u.aroundPoint);else{let Pe=be>de?Math.min(2,Ae):Math.max(.5,Ae),Ue=Math.pow(Pe,1-De),tt=qI(v,Te,Se,De*Ue);a.setCenter(tt.wrap())}if(B){let Pe=o.B.number(de,be,De)+uo(0,a.center.lat);a.setZoom(Pe)}},isZooming:B,elevationCenter:pe}}handleFlyTo(a,u){let m=u.zoom!==void 0,v=a.center,w=a.zoom,I=a.padding,P=!a.isPaddingEqual(u.padding),L=a.getConstrained(o.Q.convert(u.center||u.locationAtOffset),w).center,j=m?+u.zoom:a.zoom+uo(a.center.lat,L.lat),B=a.clone();B.setCenter(L),B.setZoom(j),B.setBearing(u.bearing);let $=new o.P(o.ae(a.centerPoint.x+u.offsetAsPoint.x,0,a.width),o.ae(a.centerPoint.y+u.offsetAsPoint.y,0,a.height));B.setLocationAtPoint(L,$);let G=B.center;Hf(a,G);let J=function(Se,Ae,De){let Pe=lo(Ae),Ue=lo(De),tt=o.aV(Pe,Ue),Ke=Math.acos(tt),Xe=cm(Se);return Ke/(2*Math.PI)*Xe}(a,v,G),te=w+uo(v.lat,0),pe=j+uo(G.lat,0),fe=o.ac(pe-te),de;if(typeof u.minZoom=="number"){let Se=+u.minZoom+uo(G.lat,0),Ae=Math.min(Se,te,pe)+uo(0,G.lat),De=a.getConstrained(G,Ae).zoom+uo(G.lat,0);de=o.ac(De-te)}let be=o.bq(v.lng,G.lng),Te=o.bq(v.lat,G.lat);return{easeFunc:(Se,Ae,De,Pe)=>{let Ue=qI(v,be,Te,De);P&&a.interpolatePadding(I,u.padding,Se);let tt=Se===1?G:Ue;a.setCenter(tt.wrap());let Ke=te+o.ah(Ae);a.setZoom(Se===1?j:Ke+uo(0,tt.lat))},scaleOfZoom:fe,targetCenter:G,scaleOfMinZoom:de,pixelPathLength:J}}static solveVectorScale(a,u,m,v,w){let I=v==="x"?[m[0],m[4],m[8],m[12]]:[m[1],m[5],m[9],m[13]],P=[m[3],m[7],m[11],m[15]],L=a[0]*I[0]+a[1]*I[1]+a[2]*I[2],j=a[0]*P[0]+a[1]*P[1]+a[2]*P[2],B=u[0]*I[0]+u[1]*I[1]+u[2]*I[2],$=u[0]*P[0]+u[1]*P[1]+u[2]*P[2];return B+w*j===L+w*$||P[3]*(L-B)+I[3]*($-j)+L*$==B*j?null:(B+I[3]-w*$-w*P[3])/(B-L-w*$+w*j)}static getLesserNonNegativeNonNull(a,u){return u!==null&&u>=0&&u<a?u:a}}class Rh{constructor(a){this._globe=a,this._mercatorCameraHelper=new sm,this._verticalPerspectiveCameraHelper=new bs}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(a,u){return this.currentHelper.handlePanInertia(a,u)}handleMapControlsRollPitchBearingZoom(a,u){return this.currentHelper.handleMapControlsRollPitchBearingZoom(a,u)}handleMapControlsPan(a,u,m){this.currentHelper.handleMapControlsPan(a,u,m)}cameraForBoxAndBearing(a,u,m,v,w){return this.currentHelper.cameraForBoxAndBearing(a,u,m,v,w)}handleJumpToCenterZoom(a,u){this.currentHelper.handleJumpToCenterZoom(a,u)}handleEaseTo(a,u){return this.currentHelper.handleEaseTo(a,u)}handleFlyTo(a,u){return this.currentHelper.handleFlyTo(a,u)}}let bv=(b,a)=>o.x(b,a&&a.filter(u=>u.identifier!=="source.canvas")),eq=o.bw();class Qx extends o.E{constructor(a,u={}){super(),this._rtlPluginLoaded=()=>{for(let m in this.sourceCaches){let v=this.sourceCaches[m].getSource().type;v!=="vector"&&v!=="geojson"||this.sourceCaches[m].reload()}},this.map=a,this.dispatcher=new Fe(jt(),a._getMapId()),this.dispatcher.registerMessageHandler("GG",(m,v)=>this.getGlyphs(m,v)),this.dispatcher.registerMessageHandler("GI",(m,v)=>this.getImages(m,v)),this.imageManager=new ve,this.imageManager.setEventedParent(this),this.glyphManager=new Le(a._requestManager,u.localIdeographFontFamily),this.lineAtlas=new We(256,512),this.crossTileSymbolIndex=new im,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.by()),Un().on(an,this._rtlPluginLoaded),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;let v=this.sourceCaches[m.sourceId];if(!v)return;let w=v.getSource();if(w&&w.vectorLayerIds)for(let I in this._layers){let P=this._layers[I];P.source===w.id&&this._validateLayer(P)}})}loadURL(a,u={},m){this.fire(new o.l("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;let v=this.map._requestManager.transformRequest(a,"Style");this._loadStyleRequest=new AbortController;let w=this._loadStyleRequest;o.j(v,this._loadStyleRequest).then(I=>{this._loadStyleRequest=null,this._load(I.data,u,m)}).catch(I=>{this._loadStyleRequest=null,I&&!w.signal.aborted&&this.fire(new o.k(I))})}loadJSON(a,u={},m){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,_.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(a,u,m)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(eq,{validate:!1})}_load(a,u,m){var v,w;let I=u.transformStyle?u.transformStyle(m,a):a;if(!u.validate||!bv(this,o.y(I))){this._loaded=!0,this.stylesheet=I;for(let P in I.sources)this.addSource(P,I.sources[P],{validate:!1});I.sprite?this._loadSprite(I.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(I.glyphs),this._createLayers(),this.light=new $e(this.stylesheet.light),this._setProjectionInternal(((v=this.stylesheet.projection)===null||v===void 0?void 0:v.type)||"mercator"),this.sky=new nt(this.stylesheet.sky),this.map.setTerrain((w=this.stylesheet.terrain)!==null&&w!==void 0?w:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){let a=o.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",a),this._order=a.map(u=>u.id),this._layers={},this._serializedLayers=null;for(let u of a){let m=o.bA(u);m.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=m}}_loadSprite(a,u=!1,m=void 0){let v;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(w,I,P,L){return o._(this,void 0,void 0,function*(){let j=H(w),B=P>1?"@2x":"",$={},G={};for(let{id:J,url:te}of j){let pe=I.transformRequest(se(te,B,".json"),"SpriteJSON");$[J]=o.j(pe,L);let fe=I.transformRequest(se(te,B,".png"),"SpriteImage");G[J]=q.getImage(fe,L)}return yield Promise.all([...Object.values($),...Object.values(G)]),function(J,te){return o._(this,void 0,void 0,function*(){let pe={};for(let fe in J){pe[fe]={};let de=_.getImageCanvasContext((yield te[fe]).data),be=(yield J[fe]).data;for(let Te in be){let{width:Se,height:Ae,x:De,y:Pe,sdf:Ue,pixelRatio:tt,stretchX:Ke,stretchY:Xe,content:Qe,textFitWidth:Tt,textFitHeight:bt}=be[Te];pe[fe][Te]={data:null,pixelRatio:tt,sdf:Ue,stretchX:Ke,stretchY:Xe,content:Qe,textFitWidth:Tt,textFitHeight:bt,spriteData:{width:Se,height:Ae,x:De,y:Pe,context:de}}}}return pe})}($,G)})}(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(w=>{if(this._spriteRequest=null,w)for(let I in w){this._spritesImagesIds[I]=[];let P=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter(L=>!(L in w)):[];for(let L of P)this.imageManager.removeImage(L),this._changedImages[L]=!0;for(let L in w[I]){let j=I==="default"?L:`${I}:${L}`;this._spritesImagesIds[I].push(j),j in this.imageManager.images?this.imageManager.updateImage(j,w[I][L],!1):this.imageManager.addImage(j,w[I][L]),u&&(this._changedImages[j]=!0)}}}).catch(w=>{this._spriteRequest=null,v=w,this.fire(new o.k(v))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),m&&m(v)})}_unloadSprite(){for(let a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(a){let u=this.sourceCaches[a.source];if(!u)return;let m=a.sourceLayer;if(!m)return;let v=u.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(m)===-1)&&this.fire(new o.k(new Error(`Source layer "${m}" does not exist on source "${v.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a,u=!1){let m=this._serializedAllLayers();if(!a||a.length===0)return Object.values(u?o.bB(m):m);let v=[];for(let w of a)if(m[w]){let I=u?o.bB(m[w]):m[w];v.push(I)}return v}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};let u=Object.keys(this._layers);for(let m of u){let v=this._layers[m];v.type!=="custom"&&(a[m]=v.serialize())}return a}hasTransitions(){var a,u,m;if(!((a=this.light)===null||a===void 0)&&a.hasTransition()||!((u=this.sky)===null||u===void 0)&&u.hasTransition()||!((m=this.projection)===null||m===void 0)&&m.hasTransition())return!0;for(let v in this.sourceCaches)if(this.sourceCaches[v].hasTransition())return!0;for(let v in this._layers)if(this._layers[v].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;let u=this._changed;if(u){let v=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(v.length||w.length)&&this._updateWorkerLayers(v,w);for(let I in this._updatedSources){let P=this._updatedSources[I];if(P==="reload")this._reloadSource(I);else{if(P!=="clear")throw new Error(`Invalid action ${P}`);this._clearSource(I)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let I in this._updatedPaintProps)this._layers[I].updateTransitions(a);this.light.updateTransitions(a),this.sky.updateTransitions(a),this._resetUpdates()}let m={};for(let v in this.sourceCaches){let w=this.sourceCaches[v];m[v]=w.used,w.used=!1}for(let v of this._order){let w=this._layers[v];w.recalculate(a,this._availableImages),!w.isHidden(a.zoom)&&w.source&&(this.sourceCaches[w.source].used=!0)}for(let v in m){let w=this.sourceCaches[v];!!m[v]!=!!w.used&&w.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(a),this.sky.recalculate(a),this.projection.recalculate(a),this.z=a.zoom,u&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let a=Object.keys(this._changedImages);if(a.length){for(let u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(a,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,u={}){var m;this._checkLoaded();let v=this.serialize();if(a=u.transformStyle?u.transformStyle(v,a):a,((m=u.validate)===null||m===void 0||m)&&bv(this,o.y(a)))return!1;(a=o.bB(a)).layers=o.bz(a.layers);let w=o.bC(v,a),I=this._getOperationsToPerform(w);if(I.unimplemented.length>0)throw new Error(`Unimplemented: ${I.unimplemented.join(", ")}.`);if(I.operations.length===0)return!1;for(let P of I.operations)P();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){let u=[],m=[];for(let v of a)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":u.push(()=>this.addLayer.apply(this,v.args));break;case"removeLayer":u.push(()=>this.removeLayer.apply(this,v.args));break;case"setPaintProperty":u.push(()=>this.setPaintProperty.apply(this,v.args));break;case"setLayoutProperty":u.push(()=>this.setLayoutProperty.apply(this,v.args));break;case"setFilter":u.push(()=>this.setFilter.apply(this,v.args));break;case"addSource":u.push(()=>this.addSource.apply(this,v.args));break;case"removeSource":u.push(()=>this.removeSource.apply(this,v.args));break;case"setLayerZoomRange":u.push(()=>this.setLayerZoomRange.apply(this,v.args));break;case"setLight":u.push(()=>this.setLight.apply(this,v.args));break;case"setGeoJSONSourceData":u.push(()=>this.setGeoJSONSourceData.apply(this,v.args));break;case"setGlyphs":u.push(()=>this.setGlyphs.apply(this,v.args));break;case"setSprite":u.push(()=>this.setSprite.apply(this,v.args));break;case"setTerrain":u.push(()=>this.map.setTerrain.apply(this,v.args));break;case"setSky":u.push(()=>this.setSky.apply(this,v.args));break;case"setProjection":this.setProjection.apply(this,v.args);break;case"setTransition":u.push(()=>{});break;default:m.push(v.command)}return{operations:u,unimplemented:m}}addImage(a,u){if(this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,u),this._afterImageUpdated(a)}updateImage(a,u){this.imageManager.updateImage(a,u)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,u,m={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(o.y.source,`sources.${a}`,u,null,m))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);let v=this.sourceCaches[a]=new Ce(a,u,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:a})),v.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(let m in this._layers)if(this._layers[m].source===a)return this.fire(new o.k(new Error(`Source "${a}" cannot be removed while layer "${m}" is using it.`)));let u=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],u.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,u){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);let m=this.sourceCaches[a].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(u),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,u,m={}){this._checkLoaded();let v=a.id;if(this.getLayer(v))return void this.fire(new o.k(new Error(`Layer "${v}" already exists on this map.`)));let w;if(a.type==="custom"){if(bv(this,o.bD(a)))return;w=o.bA(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(v,a.source),a=o.bB(a),a=o.e(a,{source:v})),this._validate(o.y.layer,`layers.${v}`,a,{arrayIndex:-1},m))return;w=o.bA(a),this._validateLayer(w),w.setEventedParent(this,{layer:{id:v}})}let I=u?this._order.indexOf(u):this._order.length;if(u&&I===-1)this.fire(new o.k(new Error(`Cannot add layer "${v}" before non-existing layer "${u}".`)));else{if(this._order.splice(I,0,v),this._layerOrderChanged=!0,this._layers[v]=w,this._removedLayers[v]&&w.source&&w.type!=="custom"){let P=this._removedLayers[v];delete this._removedLayers[v],P.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}moveLayer(a,u){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new o.k(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===u)return;let m=this._order.indexOf(a);this._order.splice(m,1);let v=u?this._order.indexOf(u):this._order.length;u&&v===-1?this.fire(new o.k(new Error(`Cannot move layer "${a}" before non-existing layer "${u}".`))):(this._order.splice(v,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();let u=this._layers[a];if(!u)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${a}".`)));u.setEventedParent(null);let m=this._order.indexOf(a);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=u,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],u.onRemove&&u.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,u,m){this._checkLoaded();let v=this.getLayer(a);v?v.minzoom===u&&v.maxzoom===m||(u!=null&&(v.minzoom=u),m!=null&&(v.maxzoom=m),this._updateLayer(v)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,u,m={}){this._checkLoaded();let v=this.getLayer(a);if(v){if(!o.bE(v.filter,u))return u==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(o.y.filter,`layers.${v.id}.filter`,u,null,m)||(v.filter=o.bB(u),this._updateLayer(v)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return o.bB(this.getLayer(a).filter)}setLayoutProperty(a,u,m,v={}){this._checkLoaded();let w=this.getLayer(a);w?o.bE(w.getLayoutProperty(u),m)||(w.setLayoutProperty(u,m,v),this._updateLayer(w)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,u){let m=this.getLayer(a);if(m)return m.getLayoutProperty(u);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,u,m,v={}){this._checkLoaded();let w=this.getLayer(a);w?o.bE(w.getPaintProperty(u),m)||(w.setPaintProperty(u,m,v)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[a]=!0,this._serializedLayers=null):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,u){return this.getLayer(a).getPaintProperty(u)}setFeatureState(a,u){this._checkLoaded();let m=a.source,v=a.sourceLayer,w=this.sourceCaches[m];if(w===void 0)return void this.fire(new o.k(new Error(`The source '${m}' does not exist in the map's style.`)));let I=w.getSource().type;I==="geojson"&&v?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||v?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),w.setFeatureState(v,a.id,u)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,u){this._checkLoaded();let m=a.source,v=this.sourceCaches[m];if(v===void 0)return void this.fire(new o.k(new Error(`The source '${m}' does not exist in the map's style.`)));let w=v.getSource().type,I=w==="vector"?a.sourceLayer:void 0;w!=="vector"||I?u&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(I,a.id,u):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();let u=a.source,m=a.sourceLayer,v=this.sourceCaches[u];if(v!==void 0)return v.getSource().type!=="vector"||m?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),v.getFeatureState(m,a.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let a=o.bF(this.sourceCaches,w=>w.serialize()),u=this._serializeByIds(this._order,!0),m=this.map.getTerrain()||void 0,v=this.stylesheet;return o.bG({version:v.version,name:v.name,metadata:v.metadata,light:v.light,sky:v.sky,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,projection:v.projection,sources:a,layers:u,terrain:m},w=>w!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){let u=I=>this._layers[I].type==="fill-extrusion",m={},v=[];for(let I=this._order.length-1;I>=0;I--){let P=this._order[I];if(u(P)){m[P]=I;for(let L of a){let j=L[P];if(j)for(let B of j)v.push(B)}}}v.sort((I,P)=>P.intersectionZ-I.intersectionZ);let w=[];for(let I=this._order.length-1;I>=0;I--){let P=this._order[I];if(u(P))for(let L=v.length-1;L>=0;L--){let j=v[L].feature;if(m[j.layer.id]<I)break;w.push(j),v.pop()}else for(let L of a){let j=L[P];if(j)for(let B of j)w.push(B.feature)}}return w}queryRenderedFeatures(a,u,m){u&&u.filter&&this._validate(o.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);let v={};if(u&&u.layers){if(!(Array.isArray(u.layers)||u.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let j of u.layers){let B=this._layers[j];if(!B)return this.fire(new o.k(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];v[B.source]=!0}}let w=[];u.availableImages=this._availableImages;let I=this._serializedAllLayers(),P=u.layers instanceof Set?u.layers:Array.isArray(u.layers)?new Set(u.layers):null,L=Object.assign(Object.assign({},u),{layers:P});for(let j in this.sourceCaches)u.layers&&!v[j]||w.push(et(this.sourceCaches[j],this._layers,I,a,L,m,this.map.terrain?(B,$,G)=>this.map.terrain.getElevation(B,$,G):void 0));return this.placement&&w.push(function(j,B,$,G,J,te,pe){let fe={},de=te.queryRenderedSymbols(G),be=[];for(let Te of Object.keys(de).map(Number))be.push(pe[Te]);be.sort(it);for(let Te of be){let Se=Te.featureIndex.lookupSymbolFeatures(de[Te.bucketInstanceId],B,Te.bucketIndex,Te.sourceLayerIndex,J.filter,J.layers,J.availableImages,j);for(let Ae in Se){let De=fe[Ae]=fe[Ae]||[],Pe=Se[Ae];Pe.sort((Ue,tt)=>{let Ke=Te.featureSortOrder;if(Ke){let Xe=Ke.indexOf(Ue.featureIndex);return Ke.indexOf(tt.featureIndex)-Xe}return tt.featureIndex-Ue.featureIndex});for(let Ue of Pe)De.push(Ue)}}return function(Te,Se,Ae){for(let De in Te)for(let Pe of Te[De])at(Pe,Ae[Se[De].source]);return Te}(fe,j,$)}(this._layers,I,this.sourceCaches,a,L,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(a,u){u&&u.filter&&this._validate(o.y.filter,"querySourceFeatures.filter",u.filter,null,u);let m=this.sourceCaches[a];return m?function(v,w){let I=v.getRenderableIds().map(j=>v.getTileByID(j)),P=[],L={};for(let j=0;j<I.length;j++){let B=I[j],$=B.tileID.canonical.key;L[$]||(L[$]=!0,B.querySourceFeatures(P,w))}return P}(m,u):[]}getLight(){return this.light.getLight()}setLight(a,u={}){this._checkLoaded();let m=this.light.getLight(),v=!1;for(let I in a)if(!o.bE(a[I],m[I])){v=!0;break}if(!v)return;let w={now:_.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,u),this.light.updateTransitions(w)}getProjection(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.projection}setProjection(a){if(this._checkLoaded(),this.projection){if(this.projection.name===a.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=a,this._setProjectionInternal(a.type)}getSky(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.sky}setSky(a,u={}){this._checkLoaded();let m=this.getSky(),v=!1;if(!a&&!m)return;if(a&&!m)v=!0;else if(!a&&m)v=!0;else for(let I in a)if(!o.bE(a[I],m[I])){v=!0;break}if(!v)return;let w={now:_.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=a,this.sky.setSky(a,u),this.sky.updateTransitions(w)}_setProjectionInternal(a){let u=function(m){if(Array.isArray(m)){let v=new yv({type:m});return{projection:v,transform:new pm,cameraHelper:new Rh(v)}}switch(m){case"mercator":return{projection:new om,transform:new Wf,cameraHelper:new sm};case"globe":{let v=new yv({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:v,transform:new pm,cameraHelper:new Rh(v)}}case"vertical-perspective":return{projection:new um,transform:new Ph,cameraHelper:new bs};default:return o.w(`Unknown projection name: ${m}. Falling back to mercator projection.`),{projection:new om,transform:new Wf,cameraHelper:new sm}}}(a);this.projection=u.projection,this.map.migrateProjection(u.transform,u.cameraHelper);for(let m in this.sourceCaches)this.sourceCaches[m].reload()}_validate(a,u,m,v,w={}){return(!w||w.validate!==!1)&&bv(this,a.call(o.y,o.e({key:u,style:this.serialize(),value:m,styleSpec:o.v},v)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Un().off(an,this._rtlPluginLoaded);for(let u in this._layers)this._layers[u].setEventedParent(null);for(let u in this.sourceCaches){let m=this.sourceCaches[u];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(let u in this.sourceCaches)this.sourceCaches[u].update(a,this.map.terrain)}_generateCollisionBoxes(){for(let a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,u,m,v,w=!1){let I=!1,P=!1,L={};for(let j of this._order){let B=this._layers[j];if(B.type!=="symbol")continue;if(!L[B.source]){let G=this.sourceCaches[B.source];L[B.source]=G.getRenderableIds(!0).map(J=>G.getTileByID(J)).sort((J,te)=>te.tileID.overscaledZ-J.tileID.overscaledZ||(J.tileID.isLessThan(te.tileID)?-1:1))}let $=this.crossTileSymbolIndex.addLayer(B,L[B.source],a.center.lng);I=I||$}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(_.now(),a.zoom))&&(this.pauseablePlacement=new kI(a,this.map.terrain,this._order,w,u,m,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(_.now()),P=!0),I&&this.pauseablePlacement.placement.setStale()),P||I)for(let j of this._order){let B=this._layers[j];B.type==="symbol"&&this.placement.updateLayerOpacities(B,L[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(_.now())}_releaseSymbolFadeTiles(){for(let a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,u){return o._(this,void 0,void 0,function*(){let m=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();let v=this.sourceCaches[u.source];return v&&v.setDependencies(u.tileID.key,u.type,u.icons),m})}getGlyphs(a,u){return o._(this,void 0,void 0,function*(){let m=yield this.glyphManager.getGlyphs(u.stacks),v=this.sourceCaches[u.source];return v&&v.setDependencies(u.tileID.key,u.type,[""]),m})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,u={}){this._checkLoaded(),a&&this._validate(o.y.glyphs,"glyphs",a,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,u,m={},v){this._checkLoaded();let w=[{id:a,url:u}],I=[...H(this.stylesheet.sprite),...w];this._validate(o.y.sprite,"sprite",I,null,m)||(this.stylesheet.sprite=I,this._loadSprite(w,!0,v))}removeSprite(a){this._checkLoaded();let u=H(this.stylesheet.sprite);if(u.find(m=>m.id===a)){if(this._spritesImagesIds[a])for(let m of this._spritesImagesIds[a])this.imageManager.removeImage(m),this._changedImages[m]=!0;u.splice(u.findIndex(m=>m.id===a),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return H(this.stylesheet.sprite)}setSprite(a,u={},m){this._checkLoaded(),a&&this._validate(o.y.sprite,"sprite",a,null,u)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,m):(this._unloadSprite(),m&&m(null)))}}var tq=o.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class rq{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,u,m,v,w,I,P,L,j){this.context=a;let B=this.boundPaintVertexBuffers.length!==v.length;for(let $=0;!B&&$<v.length;$++)this.boundPaintVertexBuffers[$]!==v[$]&&(B=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==m||B||this.boundIndexBuffer!==w||this.boundVertexOffset!==I||this.boundDynamicVertexBuffer!==P||this.boundDynamicVertexBuffer2!==L||this.boundDynamicVertexBuffer3!==j?this.freshBind(u,m,v,w,I,P,L,j):(a.bindVertexArray.set(this.vao),P&&P.bind(),w&&w.dynamicDraw&&w.bind(),L&&L.bind(),j&&j.bind())}freshBind(a,u,m,v,w,I,P,L){let j=a.numAttributes,B=this.context,$=B.gl;this.vao&&this.destroy(),this.vao=B.createVertexArray(),B.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=I,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=L,u.enableAttributes($,a);for(let G of m)G.enableAttributes($,a);I&&I.enableAttributes($,a),P&&P.enableAttributes($,a),L&&L.enableAttributes($,a),u.bind(),u.setVertexAttribPointers($,a,w);for(let G of m)G.bind(),G.setVertexAttribPointers($,a,w);I&&(I.bind(),I.setVertexAttribPointers($,a,w)),v&&v.bind(),P&&(P.bind(),P.setVertexAttribPointers($,a,w)),L&&(L.bind(),L.setVertexAttribPointers($,a,w)),B.currentNumAttributes=j}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let nq=(b,a,u,m,v)=>({u_texture:0,u_ele_delta:b,u_fog_matrix:a,u_fog_color:u?u.properties.get("fog-color"):o.b7.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?0:u?u.calculateFogBlendOpacity(m):0,u_horizon_color:u?u.properties.get("horizon-color"):o.b7.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1,u_is_globe_mode:v?1:0}),wv={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Kf(b){let a=[];for(let u=0;u<b.length;u++){if(b[u]===null)continue;let m=b[u].split(" ");a.push(m.pop())}return a}class Ev{constructor(a,u,m,v,w,I,P,L,j=[]){let B=a.gl;this.program=B.createProgram();let $=Kf(u.staticAttributes),G=m?m.getBinderAttributes():[],J=$.concat(G),te=na.prelude.staticUniforms?Kf(na.prelude.staticUniforms):[],pe=P.staticUniforms?Kf(P.staticUniforms):[],fe=u.staticUniforms?Kf(u.staticUniforms):[],de=m?m.getBinderUniforms():[],be=te.concat(pe).concat(fe).concat(de),Te=[];for(let Ke of be)Te.indexOf(Ke)<0&&Te.push(Ke);let Se=m?m.defines():[];Vo(B)&&Se.unshift("#version 300 es"),w&&Se.push("#define OVERDRAW_INSPECTOR;"),I&&Se.push("#define TERRAIN3D;"),L&&Se.push(L),j&&Se.push(...j);let Ae=Se.concat(na.prelude.fragmentSource,P.fragmentSource,u.fragmentSource).join(`
`),De=Se.concat(na.prelude.vertexSource,P.vertexSource,u.vertexSource).join(`
`);Vo(B)||(Ae=function(Ke){return Ke.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Ae),De=function(Ke){return Ke.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(De));let Pe=B.createShader(B.FRAGMENT_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(Pe,Ae),B.compileShader(Pe),!B.getShaderParameter(Pe,B.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${B.getShaderInfoLog(Pe)}`);B.attachShader(this.program,Pe);let Ue=B.createShader(B.VERTEX_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(Ue,De),B.compileShader(Ue),!B.getShaderParameter(Ue,B.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${B.getShaderInfoLog(Ue)}`);B.attachShader(this.program,Ue),this.attributes={};let tt={};this.numAttributes=J.length;for(let Ke=0;Ke<this.numAttributes;Ke++)J[Ke]&&(B.bindAttribLocation(this.program,Ke,J[Ke]),this.attributes[J[Ke]]=Ke);if(B.linkProgram(this.program),!B.getProgramParameter(this.program,B.LINK_STATUS))throw new Error(`Program failed to link: ${B.getProgramInfoLog(this.program)}`);B.deleteShader(Ue),B.deleteShader(Pe);for(let Ke=0;Ke<Te.length;Ke++){let Xe=Te[Ke];if(Xe&&!tt[Xe]){let Qe=B.getUniformLocation(this.program,Xe);Qe&&(tt[Xe]=Qe)}}this.fixedUniforms=v(a,tt),this.terrainUniforms=((Ke,Xe)=>({u_depth:new o.bH(Ke,Xe.u_depth),u_terrain:new o.bH(Ke,Xe.u_terrain),u_terrain_dim:new o.b8(Ke,Xe.u_terrain_dim),u_terrain_matrix:new o.bJ(Ke,Xe.u_terrain_matrix),u_terrain_unpack:new o.bK(Ke,Xe.u_terrain_unpack),u_terrain_exaggeration:new o.b8(Ke,Xe.u_terrain_exaggeration)}))(a,tt),this.projectionUniforms=((Ke,Xe)=>({u_projection_matrix:new o.bJ(Ke,Xe.u_projection_matrix),u_projection_tile_mercator_coords:new o.bK(Ke,Xe.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bK(Ke,Xe.u_projection_clipping_plane),u_projection_transition:new o.b8(Ke,Xe.u_projection_transition),u_projection_fallback_matrix:new o.bJ(Ke,Xe.u_projection_fallback_matrix)}))(a,tt),this.binderUniforms=m?m.getUniforms(a,tt):[]}draw(a,u,m,v,w,I,P,L,j,B,$,G,J,te,pe,fe,de,be,Te){let Se=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(m),a.setStencilMode(v),a.setColorMode(w),a.setCullFace(I),L){a.activeTexture.set(Se.TEXTURE2),Se.bindTexture(Se.TEXTURE_2D,L.depthTexture),a.activeTexture.set(Se.TEXTURE3),Se.bindTexture(Se.TEXTURE_2D,L.texture);for(let De in this.terrainUniforms)this.terrainUniforms[De].set(L[De])}if(j)for(let De in j)this.projectionUniforms[wv[De]].set(j[De]);if(P)for(let De in this.fixedUniforms)this.fixedUniforms[De].set(P[De]);fe&&fe.setUniforms(a,this.binderUniforms,te,{zoom:pe});let Ae=0;switch(u){case Se.LINES:Ae=2;break;case Se.TRIANGLES:Ae=3;break;case Se.LINE_STRIP:Ae=1}for(let De of J.get()){let Pe=De.vaos||(De.vaos={});(Pe[B]||(Pe[B]=new rq)).bind(a,this,$,fe?fe.getPaintVertexBuffers():[],G,De.vertexOffset,de,be,Te),Se.drawElements(u,De.primitiveLength*Ae,Se.UNSIGNED_SHORT,De.primitiveOffset*Ae*2)}}}function Sv(b,a,u){let m=1/o.az(u,1,a.transform.tileZoom),v=Math.pow(2,u.tileID.overscaledZ),w=u.tileSize*Math.pow(2,a.transform.tileZoom)/v,I=w*(u.tileID.canonical.x+u.tileID.wrap*v),P=w*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[m,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[I>>16,P>>16],u_pixel_coord_lower:[65535&I,65535&P]}}let Tv=(b,a,u,m)=>{let v=b.style.light,w=v.properties.get("position"),I=[w.x,w.y,w.z],P=o.bN();v.properties.get("anchor")==="viewport"&&o.bO(P,b.transform.bearingInRadians),o.bP(I,I,P);let L=b.transform.transformLightDirection(I),j=v.properties.get("color");return{u_lightpos:I,u_lightpos_globe:L,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[j.r,j.g,j.b],u_vertical_gradient:+a,u_opacity:u,u_fill_translate:m}},Pl=(b,a,u,m,v,w,I)=>o.e(Tv(b,a,u,m),Sv(w,b,I),{u_height_factor:-Math.pow(2,v.overscaledZ)/I.tileSize/8}),jI=(b,a,u,m)=>o.e(Sv(a,b,u),{u_fill_translate:m}),Jx=(b,a)=>({u_world:b,u_fill_translate:a}),dm=(b,a,u,m,v)=>o.e(jI(b,a,u,v),{u_world:m}),mm=(b,a,u,m,v)=>{let w=b.transform,I,P,L=0;if(u.paint.get("circle-pitch-alignment")==="map"){let j=o.az(a,1,w.zoom);I=!0,P=[j,j],L=j/(o.Z*Math.pow(2,a.tileID.overscaledZ))*2*Math.PI*v}else I=!1,P=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+I,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:P,u_globe_extrude_scale:L,u_translate:m}},iq=b=>({u_pixel_extrude_scale:[1/b.width,1/b.height]}),Iv=b=>({u_viewport_size:[b.width,b.height]}),FI=(b,a=1)=>({u_color:b,u_overlay:0,u_overlay_scale:a}),Oh=(b,a,u,m)=>{let v=o.az(b,1,a)/(o.Z*Math.pow(2,b.tileID.overscaledZ))*2*Math.PI*m;return{u_extrude_scale:o.az(b,1,a),u_intensity:u,u_globe_extrude_scale:v}},zI=(b,a,u,m)=>{let v=o.K();o.bQ(v,0,b.width,b.height,0,0,1);let w=b.context.gl;return{u_matrix:v,u_world:[w.drawingBufferWidth,w.drawingBufferHeight],u_image:u,u_color_ramp:m,u_opacity:a.paint.get("heatmap-opacity")}},BI=(b,a,u)=>{let m=u.paint.get("hillshade-accent-color"),v;switch(u.paint.get("hillshade-method")){case"basic":v=4;break;case"combined":v=1;break;case"igor":v=2;break;case"multidirectional":v=3;break;default:v=0}let w=u.getIlluminationProperties();for(let I=0;I<w.directionRadians.length;I++)u.paint.get("hillshade-illumination-anchor")==="viewport"&&(w.directionRadians[I]+=b.transform.bearingInRadians);return{u_image:0,u_latrange:UI(0,a.tileID),u_exaggeration:u.paint.get("hillshade-exaggeration"),u_altitudes:w.altitudeRadians,u_azimuths:w.directionRadians,u_accent:m,u_method:v,u_highlights:w.highlightColor,u_shadows:w.shadowColor}},oq=(b,a)=>{let u=a.stride,m=o.K();return o.bQ(m,0,o.Z,-8192,0,0,1),o.L(m,m,[0,-8192,0]),{u_matrix:m,u_image:1,u_dimension:[u,u],u_zoom:b.overscaledZ,u_unpack:a.getUnpackVector()}};function UI(b,a){let u=Math.pow(2,a.canonical.z),m=a.canonical.y;return[new o.$(0,m/u).toLngLat().lat,new o.$(0,(m+1)/u).toLngLat().lat]}let gm=(b,a,u,m)=>{let v=b.transform;return{u_translation:xc(b,a,u),u_ratio:m/o.az(a,1,v.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},VI=(b,a,u,m,v)=>o.e(gm(b,a,u,m),{u_image:0,u_image_height:v}),GI=(b,a,u,m,v)=>{let w=b.transform,I=eb(a,w);return{u_translation:xc(b,a,u),u_texsize:a.imageAtlasTexture.size,u_ratio:m/o.az(a,1,w.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[I,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},$I=(b,a,u,m,v,w)=>{let I=b.lineAtlas,P=eb(a,b.transform),L=u.layout.get("line-cap")==="round",j=I.getDash(v.from,L),B=I.getDash(v.to,L),$=j.width*w.fromScale,G=B.width*w.toScale;return o.e(gm(b,a,u,m),{u_patternscale_a:[P/$,-j.height/2],u_patternscale_b:[P/G,-B.height/2],u_sdfgamma:I.width/(256*Math.min($,G)*b.pixelRatio)/2,u_image:0,u_tex_y_a:j.y,u_tex_y_b:B.y,u_mix:w.t})};function eb(b,a){return 1/o.az(b,1,a.tileZoom)}function xc(b,a,u){return o.aA(b.transform,a,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}let HI=(b,a,u,m,v)=>{return{u_tl_parent:b,u_scale_parent:a,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(I=m.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(w=m.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:WI(m.paint.get("raster-hue-rotate")),u_coords_top:[v[0].x,v[0].y,v[1].x,v[1].y],u_coords_bottom:[v[3].x,v[3].y,v[2].x,v[2].y]};var w,I};function WI(b){b*=Math.PI/180;let a=Math.sin(b),u=Math.cos(b);return[(2*u+1)/3,(-Math.sqrt(3)*a-u+1)/3,(Math.sqrt(3)*a-u+1)/3]}let Xf=(b,a,u,m,v,w,I,P,L,j,B,$,G)=>{let J=I.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:J.cameraToCenterDistance,u_pitch:J.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:J.width/J.height,u_fade_change:I.options.fadeDuration?I.symbolFadeChange:1,u_label_plane_matrix:P,u_coord_matrix:L,u_is_text:+B,u_pitch_with_map:+m,u_is_along_line:v,u_is_variable_anchor:w,u_texsize:$,u_texture:0,u_translation:j,u_pitched_scale:G}},ZI=(b,a,u,m,v,w,I,P,L,j,B,$,G,J)=>{let te=I.transform;return o.e(Xf(b,a,u,m,v,w,I,P,L,j,B,$,J),{u_gamma_scale:m?Math.cos(te.pitch*Math.PI/180)*te.cameraToCenterDistance:1,u_device_pixel_ratio:I.pixelRatio,u_is_halo:1})},Mv=(b,a,u,m,v,w,I,P,L,j,B,$,G)=>o.e(ZI(b,a,u,m,v,w,I,P,L,j,!0,B,0,G),{u_texsize_icon:$,u_texture_icon:1}),aq=(b,a)=>({u_opacity:b,u_color:a}),sq=(b,a,u,m,v)=>o.e(function(w,I,P,L){let j=P.imageManager.getPattern(w.from.toString()),B=P.imageManager.getPattern(w.to.toString()),{width:$,height:G}=P.imageManager.getPixelSize(),J=Math.pow(2,L.tileID.overscaledZ),te=L.tileSize*Math.pow(2,P.transform.tileZoom)/J,pe=te*(L.tileID.canonical.x+L.tileID.wrap*J),fe=te*L.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:j.tl,u_pattern_br_a:j.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[$,G],u_mix:I.t,u_pattern_size_a:j.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/o.az(L,1,P.transform.tileZoom),u_pixel_coord_upper:[pe>>16,fe>>16],u_pixel_coord_lower:[65535&pe,65535&fe]}}(u,v,a,m),{u_opacity:b}),tb=(b,a)=>{},YI={fillExtrusion:(b,a)=>({u_lightpos:new o.bL(b,a.u_lightpos),u_lightpos_globe:new o.bL(b,a.u_lightpos_globe),u_lightintensity:new o.b8(b,a.u_lightintensity),u_lightcolor:new o.bL(b,a.u_lightcolor),u_vertical_gradient:new o.b8(b,a.u_vertical_gradient),u_opacity:new o.b8(b,a.u_opacity),u_fill_translate:new o.bM(b,a.u_fill_translate)}),fillExtrusionPattern:(b,a)=>({u_lightpos:new o.bL(b,a.u_lightpos),u_lightpos_globe:new o.bL(b,a.u_lightpos_globe),u_lightintensity:new o.b8(b,a.u_lightintensity),u_lightcolor:new o.bL(b,a.u_lightcolor),u_vertical_gradient:new o.b8(b,a.u_vertical_gradient),u_height_factor:new o.b8(b,a.u_height_factor),u_opacity:new o.b8(b,a.u_opacity),u_fill_translate:new o.bM(b,a.u_fill_translate),u_image:new o.bH(b,a.u_image),u_texsize:new o.bM(b,a.u_texsize),u_pixel_coord_upper:new o.bM(b,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(b,a.u_pixel_coord_lower),u_scale:new o.bL(b,a.u_scale),u_fade:new o.b8(b,a.u_fade)}),fill:(b,a)=>({u_fill_translate:new o.bM(b,a.u_fill_translate)}),fillPattern:(b,a)=>({u_image:new o.bH(b,a.u_image),u_texsize:new o.bM(b,a.u_texsize),u_pixel_coord_upper:new o.bM(b,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(b,a.u_pixel_coord_lower),u_scale:new o.bL(b,a.u_scale),u_fade:new o.b8(b,a.u_fade),u_fill_translate:new o.bM(b,a.u_fill_translate)}),fillOutline:(b,a)=>({u_world:new o.bM(b,a.u_world),u_fill_translate:new o.bM(b,a.u_fill_translate)}),fillOutlinePattern:(b,a)=>({u_world:new o.bM(b,a.u_world),u_image:new o.bH(b,a.u_image),u_texsize:new o.bM(b,a.u_texsize),u_pixel_coord_upper:new o.bM(b,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(b,a.u_pixel_coord_lower),u_scale:new o.bL(b,a.u_scale),u_fade:new o.b8(b,a.u_fade),u_fill_translate:new o.bM(b,a.u_fill_translate)}),circle:(b,a)=>({u_camera_to_center_distance:new o.b8(b,a.u_camera_to_center_distance),u_scale_with_map:new o.bH(b,a.u_scale_with_map),u_pitch_with_map:new o.bH(b,a.u_pitch_with_map),u_extrude_scale:new o.bM(b,a.u_extrude_scale),u_device_pixel_ratio:new o.b8(b,a.u_device_pixel_ratio),u_globe_extrude_scale:new o.b8(b,a.u_globe_extrude_scale),u_translate:new o.bM(b,a.u_translate)}),collisionBox:(b,a)=>({u_pixel_extrude_scale:new o.bM(b,a.u_pixel_extrude_scale)}),collisionCircle:(b,a)=>({u_viewport_size:new o.bM(b,a.u_viewport_size)}),debug:(b,a)=>({u_color:new o.bI(b,a.u_color),u_overlay:new o.bH(b,a.u_overlay),u_overlay_scale:new o.b8(b,a.u_overlay_scale)}),depth:tb,clippingMask:tb,heatmap:(b,a)=>({u_extrude_scale:new o.b8(b,a.u_extrude_scale),u_intensity:new o.b8(b,a.u_intensity),u_globe_extrude_scale:new o.b8(b,a.u_globe_extrude_scale)}),heatmapTexture:(b,a)=>({u_matrix:new o.bJ(b,a.u_matrix),u_world:new o.bM(b,a.u_world),u_image:new o.bH(b,a.u_image),u_color_ramp:new o.bH(b,a.u_color_ramp),u_opacity:new o.b8(b,a.u_opacity)}),hillshade:(b,a)=>({u_image:new o.bH(b,a.u_image),u_latrange:new o.bM(b,a.u_latrange),u_exaggeration:new o.b8(b,a.u_exaggeration),u_altitudes:new o.bS(b,a.u_altitudes),u_azimuths:new o.bS(b,a.u_azimuths),u_accent:new o.bI(b,a.u_accent),u_method:new o.bH(b,a.u_method),u_shadows:new o.bR(b,a.u_shadows),u_highlights:new o.bR(b,a.u_highlights)}),hillshadePrepare:(b,a)=>({u_matrix:new o.bJ(b,a.u_matrix),u_image:new o.bH(b,a.u_image),u_dimension:new o.bM(b,a.u_dimension),u_zoom:new o.b8(b,a.u_zoom),u_unpack:new o.bK(b,a.u_unpack)}),line:(b,a)=>({u_translation:new o.bM(b,a.u_translation),u_ratio:new o.b8(b,a.u_ratio),u_device_pixel_ratio:new o.b8(b,a.u_device_pixel_ratio),u_units_to_pixels:new o.bM(b,a.u_units_to_pixels)}),lineGradient:(b,a)=>({u_translation:new o.bM(b,a.u_translation),u_ratio:new o.b8(b,a.u_ratio),u_device_pixel_ratio:new o.b8(b,a.u_device_pixel_ratio),u_units_to_pixels:new o.bM(b,a.u_units_to_pixels),u_image:new o.bH(b,a.u_image),u_image_height:new o.b8(b,a.u_image_height)}),linePattern:(b,a)=>({u_translation:new o.bM(b,a.u_translation),u_texsize:new o.bM(b,a.u_texsize),u_ratio:new o.b8(b,a.u_ratio),u_device_pixel_ratio:new o.b8(b,a.u_device_pixel_ratio),u_image:new o.bH(b,a.u_image),u_units_to_pixels:new o.bM(b,a.u_units_to_pixels),u_scale:new o.bL(b,a.u_scale),u_fade:new o.b8(b,a.u_fade)}),lineSDF:(b,a)=>({u_translation:new o.bM(b,a.u_translation),u_ratio:new o.b8(b,a.u_ratio),u_device_pixel_ratio:new o.b8(b,a.u_device_pixel_ratio),u_units_to_pixels:new o.bM(b,a.u_units_to_pixels),u_patternscale_a:new o.bM(b,a.u_patternscale_a),u_patternscale_b:new o.bM(b,a.u_patternscale_b),u_sdfgamma:new o.b8(b,a.u_sdfgamma),u_image:new o.bH(b,a.u_image),u_tex_y_a:new o.b8(b,a.u_tex_y_a),u_tex_y_b:new o.b8(b,a.u_tex_y_b),u_mix:new o.b8(b,a.u_mix)}),raster:(b,a)=>({u_tl_parent:new o.bM(b,a.u_tl_parent),u_scale_parent:new o.b8(b,a.u_scale_parent),u_buffer_scale:new o.b8(b,a.u_buffer_scale),u_fade_t:new o.b8(b,a.u_fade_t),u_opacity:new o.b8(b,a.u_opacity),u_image0:new o.bH(b,a.u_image0),u_image1:new o.bH(b,a.u_image1),u_brightness_low:new o.b8(b,a.u_brightness_low),u_brightness_high:new o.b8(b,a.u_brightness_high),u_saturation_factor:new o.b8(b,a.u_saturation_factor),u_contrast_factor:new o.b8(b,a.u_contrast_factor),u_spin_weights:new o.bL(b,a.u_spin_weights),u_coords_top:new o.bK(b,a.u_coords_top),u_coords_bottom:new o.bK(b,a.u_coords_bottom)}),symbolIcon:(b,a)=>({u_is_size_zoom_constant:new o.bH(b,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(b,a.u_is_size_feature_constant),u_size_t:new o.b8(b,a.u_size_t),u_size:new o.b8(b,a.u_size),u_camera_to_center_distance:new o.b8(b,a.u_camera_to_center_distance),u_pitch:new o.b8(b,a.u_pitch),u_rotate_symbol:new o.bH(b,a.u_rotate_symbol),u_aspect_ratio:new o.b8(b,a.u_aspect_ratio),u_fade_change:new o.b8(b,a.u_fade_change),u_label_plane_matrix:new o.bJ(b,a.u_label_plane_matrix),u_coord_matrix:new o.bJ(b,a.u_coord_matrix),u_is_text:new o.bH(b,a.u_is_text),u_pitch_with_map:new o.bH(b,a.u_pitch_with_map),u_is_along_line:new o.bH(b,a.u_is_along_line),u_is_variable_anchor:new o.bH(b,a.u_is_variable_anchor),u_texsize:new o.bM(b,a.u_texsize),u_texture:new o.bH(b,a.u_texture),u_translation:new o.bM(b,a.u_translation),u_pitched_scale:new o.b8(b,a.u_pitched_scale)}),symbolSDF:(b,a)=>({u_is_size_zoom_constant:new o.bH(b,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(b,a.u_is_size_feature_constant),u_size_t:new o.b8(b,a.u_size_t),u_size:new o.b8(b,a.u_size),u_camera_to_center_distance:new o.b8(b,a.u_camera_to_center_distance),u_pitch:new o.b8(b,a.u_pitch),u_rotate_symbol:new o.bH(b,a.u_rotate_symbol),u_aspect_ratio:new o.b8(b,a.u_aspect_ratio),u_fade_change:new o.b8(b,a.u_fade_change),u_label_plane_matrix:new o.bJ(b,a.u_label_plane_matrix),u_coord_matrix:new o.bJ(b,a.u_coord_matrix),u_is_text:new o.bH(b,a.u_is_text),u_pitch_with_map:new o.bH(b,a.u_pitch_with_map),u_is_along_line:new o.bH(b,a.u_is_along_line),u_is_variable_anchor:new o.bH(b,a.u_is_variable_anchor),u_texsize:new o.bM(b,a.u_texsize),u_texture:new o.bH(b,a.u_texture),u_gamma_scale:new o.b8(b,a.u_gamma_scale),u_device_pixel_ratio:new o.b8(b,a.u_device_pixel_ratio),u_is_halo:new o.bH(b,a.u_is_halo),u_translation:new o.bM(b,a.u_translation),u_pitched_scale:new o.b8(b,a.u_pitched_scale)}),symbolTextAndIcon:(b,a)=>({u_is_size_zoom_constant:new o.bH(b,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(b,a.u_is_size_feature_constant),u_size_t:new o.b8(b,a.u_size_t),u_size:new o.b8(b,a.u_size),u_camera_to_center_distance:new o.b8(b,a.u_camera_to_center_distance),u_pitch:new o.b8(b,a.u_pitch),u_rotate_symbol:new o.bH(b,a.u_rotate_symbol),u_aspect_ratio:new o.b8(b,a.u_aspect_ratio),u_fade_change:new o.b8(b,a.u_fade_change),u_label_plane_matrix:new o.bJ(b,a.u_label_plane_matrix),u_coord_matrix:new o.bJ(b,a.u_coord_matrix),u_is_text:new o.bH(b,a.u_is_text),u_pitch_with_map:new o.bH(b,a.u_pitch_with_map),u_is_along_line:new o.bH(b,a.u_is_along_line),u_is_variable_anchor:new o.bH(b,a.u_is_variable_anchor),u_texsize:new o.bM(b,a.u_texsize),u_texsize_icon:new o.bM(b,a.u_texsize_icon),u_texture:new o.bH(b,a.u_texture),u_texture_icon:new o.bH(b,a.u_texture_icon),u_gamma_scale:new o.b8(b,a.u_gamma_scale),u_device_pixel_ratio:new o.b8(b,a.u_device_pixel_ratio),u_is_halo:new o.bH(b,a.u_is_halo),u_translation:new o.bM(b,a.u_translation),u_pitched_scale:new o.b8(b,a.u_pitched_scale)}),background:(b,a)=>({u_opacity:new o.b8(b,a.u_opacity),u_color:new o.bI(b,a.u_color)}),backgroundPattern:(b,a)=>({u_opacity:new o.b8(b,a.u_opacity),u_image:new o.bH(b,a.u_image),u_pattern_tl_a:new o.bM(b,a.u_pattern_tl_a),u_pattern_br_a:new o.bM(b,a.u_pattern_br_a),u_pattern_tl_b:new o.bM(b,a.u_pattern_tl_b),u_pattern_br_b:new o.bM(b,a.u_pattern_br_b),u_texsize:new o.bM(b,a.u_texsize),u_mix:new o.b8(b,a.u_mix),u_pattern_size_a:new o.bM(b,a.u_pattern_size_a),u_pattern_size_b:new o.bM(b,a.u_pattern_size_b),u_scale_a:new o.b8(b,a.u_scale_a),u_scale_b:new o.b8(b,a.u_scale_b),u_pixel_coord_upper:new o.bM(b,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(b,a.u_pixel_coord_lower),u_tile_units_to_pixels:new o.b8(b,a.u_tile_units_to_pixels)}),terrain:(b,a)=>({u_texture:new o.bH(b,a.u_texture),u_ele_delta:new o.b8(b,a.u_ele_delta),u_fog_matrix:new o.bJ(b,a.u_fog_matrix),u_fog_color:new o.bI(b,a.u_fog_color),u_fog_ground_blend:new o.b8(b,a.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.b8(b,a.u_fog_ground_blend_opacity),u_horizon_color:new o.bI(b,a.u_horizon_color),u_horizon_fog_blend:new o.b8(b,a.u_horizon_fog_blend),u_is_globe_mode:new o.b8(b,a.u_is_globe_mode)}),terrainDepth:(b,a)=>({u_ele_delta:new o.b8(b,a.u_ele_delta)}),terrainCoords:(b,a)=>({u_texture:new o.bH(b,a.u_texture),u_terrain_coords_id:new o.b8(b,a.u_terrain_coords_id),u_ele_delta:new o.b8(b,a.u_ele_delta)}),projectionErrorMeasurement:(b,a)=>({u_input:new o.b8(b,a.u_input),u_output_expected:new o.b8(b,a.u_output_expected)}),atmosphere:(b,a)=>({u_sun_pos:new o.bL(b,a.u_sun_pos),u_atmosphere_blend:new o.b8(b,a.u_atmosphere_blend),u_globe_position:new o.bL(b,a.u_globe_position),u_globe_radius:new o.b8(b,a.u_globe_radius),u_inv_proj_matrix:new o.bJ(b,a.u_inv_proj_matrix)}),sky:(b,a)=>({u_sky_color:new o.bI(b,a.u_sky_color),u_horizon_color:new o.bI(b,a.u_horizon_color),u_horizon:new o.bM(b,a.u_horizon),u_horizon_normal:new o.bM(b,a.u_horizon_normal),u_sky_horizon_blend:new o.b8(b,a.u_sky_horizon_blend),u_sky_blend:new o.b8(b,a.u_sky_blend)})};class KI{constructor(a,u,m){this.context=a;let v=a.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){let u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let rb={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class XI{constructor(a,u,m,v){this.length=u.length,this.attributes=m,this.itemSize=u.bytesPerElement,this.dynamicDraw=v,this.context=a;let w=a.gl;this.buffer=w.createBuffer(),a.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);let u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,u){for(let m=0;m<this.attributes.length;m++){let v=u.attributes[this.attributes[m].name];v!==void 0&&a.enableVertexAttribArray(v)}}setVertexAttribPointers(a,u,m){for(let v=0;v<this.attributes.length;v++){let w=this.attributes[v],I=u.attributes[w.name];I!==void 0&&a.vertexAttribPointer(I,w.components,a[rb[w.type]],!1,this.itemSize,w.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class rn{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Cu extends rn{getDefault(){return o.b7.transparent}set(a){let u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class nb extends rn{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class ib extends rn{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class ob extends rn{getDefault(){return[!0,!0,!0,!0]}set(a){let u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class QI extends rn{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class ab extends rn{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class Lh extends rn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){let u=this.current;(a.func!==u.func||a.ref!==u.ref||a.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class sb extends rn{getDefault(){let a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){let u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class lq extends rn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let u=this.gl;a?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=a,this.dirty=!1}}class uq extends rn{getDefault(){return[0,1]}set(a){let u=this.current;(a[0]!==u[0]||a[1]!==u[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class cq extends rn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let u=this.gl;a?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=a,this.dirty=!1}}class hq extends rn{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class JI extends rn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let u=this.gl;a?u.enable(u.BLEND):u.disable(u.BLEND),this.current=a,this.dirty=!1}}class fq extends rn{getDefault(){let a=this.gl;return[a.ONE,a.ZERO]}set(a){let u=this.current;(a[0]!==u[0]||a[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class eM extends rn{getDefault(){return o.b7.transparent}set(a){let u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Av extends rn{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class Cv extends rn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let u=this.gl;a?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=a,this.dirty=!1}}class Pv extends rn{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class lb extends rn{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class Dh extends rn{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class Rv extends rn{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class Qf extends rn{getDefault(){let a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){let u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class ws extends rn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class tM extends rn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class rM extends rn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let u=this.gl;u.bindTexture(u.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class ub extends rn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Nh extends rn{getDefault(){return null}set(a){let u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Ov extends rn{getDefault(){return null}set(a){var u;if(a===this.current&&!this.dirty)return;let m=this.gl;Vo(m)?m.bindVertexArray(a):(u=m.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class Lv extends rn{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;let u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class vm extends rn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class Dv extends rn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Nv extends rn{constructor(a,u){super(a),this.context=a,this.parent=u}getDefault(){return null}}class Jf extends Nv{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class ep extends Nv{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class nM extends Nv{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,a),this.current=a,this.dirty=!1}}let kv="Framebuffer is not complete";class zr{constructor(a,u,m,v,w){this.context=a,this.width=u,this.height=m;let I=a.gl,P=this.framebuffer=I.createFramebuffer();if(this.colorAttachment=new Jf(a,P),v)this.depthAttachment=w?new nM(a,P):new ep(a,P);else if(w)throw new Error("Stencil cannot be set without depth");if(I.checkFramebufferStatus(I.FRAMEBUFFER)!==I.FRAMEBUFFER_COMPLETE)throw new Error(kv)}destroy(){let a=this.context.gl,u=this.colorAttachment.get();if(u&&a.deleteTexture(u),this.depthAttachment){let m=this.depthAttachment.get();m&&a.deleteRenderbuffer(m)}a.deleteFramebuffer(this.framebuffer)}}class qv{constructor(a){var u,m;if(this.gl=a,this.clearColor=new Cu(this),this.clearDepth=new nb(this),this.clearStencil=new ib(this),this.colorMask=new ob(this),this.depthMask=new QI(this),this.stencilMask=new ab(this),this.stencilFunc=new Lh(this),this.stencilOp=new sb(this),this.stencilTest=new lq(this),this.depthRange=new uq(this),this.depthTest=new cq(this),this.depthFunc=new hq(this),this.blend=new JI(this),this.blendFunc=new fq(this),this.blendColor=new eM(this),this.blendEquation=new Av(this),this.cullFace=new Cv(this),this.cullFaceSide=new Pv(this),this.frontFace=new lb(this),this.program=new Dh(this),this.activeTexture=new Rv(this),this.viewport=new Qf(this),this.bindFramebuffer=new ws(this),this.bindRenderbuffer=new tM(this),this.bindTexture=new rM(this),this.bindVertexBuffer=new ub(this),this.bindElementBuffer=new Nh(this),this.bindVertexArray=new Ov(this),this.pixelStoreUnpack=new Lv(this),this.pixelStoreUnpackPremultiplyAlpha=new vm(this),this.pixelStoreUnpackFlipY=new Dv(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),Vo(a)){this.HALF_FLOAT=a.HALF_FLOAT;let v=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=a.RGBA16F)!==null&&u!==void 0?u:v==null?void 0:v.RGBA16F_EXT,this.RGB16F=(m=a.RGB16F)!==null&&m!==void 0?m:v==null?void 0:v.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");let v=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=v==null?void 0:v.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,u){return new KI(this,a,u)}createVertexBuffer(a,u,m){return new XI(this,a,u,m)}createRenderbuffer(a,u,m){let v=this.gl,w=v.createRenderbuffer();return this.bindRenderbuffer.set(w),v.renderbufferStorage(v.RENDERBUFFER,a,u,m),this.bindRenderbuffer.set(null),w}createFramebuffer(a,u,m,v){return new zr(this,a,u,m,v)}clear({color:a,depth:u,stencil:m}){let v=this.gl,w=0;a&&(w|=v.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(w|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),m!==void 0&&(w|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),v.clear(w)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){o.bE(a.blendFunction,En.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return Vo(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var u;return Vo(this.gl)?this.gl.deleteVertexArray(a):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}let jv;function cb(b,a,u,m,v){let w=b.context,I=b.transform,P=w.gl,L=b.useProgram("collisionBox"),j=[],B=0,$=0;for(let de=0;de<m.length;de++){let be=m[de],Te=a.getTile(be).getBucket(u);if(!Te)continue;let Se=v?Te.textCollisionBox:Te.iconCollisionBox,Ae=Te.collisionCircleArray;Ae.length>0&&(j.push({circleArray:Ae,circleOffset:$,coord:be}),B+=Ae.length/4,$=B),Se&&L.draw(w,P.LINES,xr.disabled,Ar.disabled,b.colorModeForRenderPass(),Kr.disabled,iq(b.transform),b.style.map.terrain&&b.style.map.terrain.getTerrainData(be),I.getProjectionData({overscaledTileID:be,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),u.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,null,b.transform.zoom,null,null,Se.collisionVertexBuffer)}if(!v||!j.length)return;let G=b.useProgram("collisionCircle"),J=new o.bT;J.resize(4*B),J._trim();let te=0;for(let de of j)for(let be=0;be<de.circleArray.length/4;be++){let Te=4*be,Se=de.circleArray[Te+0],Ae=de.circleArray[Te+1],De=de.circleArray[Te+2],Pe=de.circleArray[Te+3];J.emplace(te++,Se,Ae,De,Pe,0),J.emplace(te++,Se,Ae,De,Pe,1),J.emplace(te++,Se,Ae,De,Pe,2),J.emplace(te++,Se,Ae,De,Pe,3)}(!jv||jv.length<2*B)&&(jv=function(de){let be=2*de,Te=new o.bV;Te.resize(be),Te._trim();for(let Se=0;Se<be;Se++){let Ae=6*Se;Te.uint16[Ae+0]=4*Se+0,Te.uint16[Ae+1]=4*Se+1,Te.uint16[Ae+2]=4*Se+2,Te.uint16[Ae+3]=4*Se+2,Te.uint16[Ae+4]=4*Se+3,Te.uint16[Ae+5]=4*Se+0}return Te}(B));let pe=w.createIndexBuffer(jv,!0),fe=w.createVertexBuffer(J,o.bU.members,!0);for(let de of j){let be=Iv(b.transform);G.draw(w,P.TRIANGLES,xr.disabled,Ar.disabled,b.colorModeForRenderPass(),Kr.disabled,be,b.style.map.terrain&&b.style.map.terrain.getTerrainData(de.coord),null,u.id,fe,pe,o.aJ.simpleSegment(0,2*de.circleOffset,de.circleArray.length,de.circleArray.length/2),null,b.transform.zoom,null,null,null)}fe.destroy(),pe.destroy()}let ym=o.ad(new Float32Array(16));function pq(b,a,u,m,v,w){let{horizontalAlign:I,verticalAlign:P}=o.aE(b);return new o.P((-(I-.5)*a/v+m[0])*w,(-(P-.5)*u/v+m[1])*w)}function dq(b,a,u,m,v,w){let I=a.tileAnchorPoint.add(new o.P(a.translation[0],a.translation[1]));if(a.pitchWithMap){let P=m.mult(w);u||(P=P.rotate(-v));let L=I.add(P);return Ye(L.x,L.y,a.pitchedLabelPlaneMatrix,a.getElevation).point}if(u){let P=Zr(a.tileAnchorPoint.x+1,a.tileAnchorPoint.y,a).point.sub(b),L=Math.atan(P.y/P.x)+(P.x<0?Math.PI:0);return b.add(m.rotate(L))}return b.add(m)}function iM(b,a,u,m,v,w,I,P,L,j,B,$){let G=b.text.placedSymbolArray,J=b.text.dynamicLayoutVertexArray,te=b.icon.dynamicLayoutVertexArray,pe={};J.clear();for(let fe=0;fe<G.length;fe++){let de=G.get(fe),be=de.hidden||!de.crossTileID||b.allowVerticalPlacement&&!de.placedOrientation?null:m[de.crossTileID];if(be){let Te=new o.P(de.anchorX,de.anchorY),Se={getElevation:$,width:v.width,height:v.height,pitchedLabelPlaneMatrix:w,pitchWithMap:u,transform:v,tileAnchorPoint:Te,translation:j,unwrappedTileID:B},Ae=u?_r(Te.x,Te.y,Se):Zr(Te.x,Te.y,Se),De=Fr(v.cameraToCenterDistance,Ae.signedDistanceFromCamera),Pe=o.am(b.textSizeData,P,de)*De/o.ay;u&&(Pe*=b.tilePixelRatio/I);let{width:Ue,height:tt,anchor:Ke,textOffset:Xe,textBoxScale:Qe}=be,Tt=pq(Ke,Ue,tt,Xe,Qe,Pe),bt=v.getPitchedTextCorrection(Te.x+j[0],Te.y+j[1],B),ft=dq(Ae.point,Se,a,Tt,-v.bearingInRadians,bt),Ht=b.allowVerticalPlacement&&de.placedOrientation===o.al.vertical?Math.PI/2:0;for(let Cr=0;Cr<de.numGlyphs;Cr++)o.as(J,ft,Ht);L&&de.associatedIconIndex>=0&&(pe[de.associatedIconIndex]={shiftedAnchor:ft,angle:Ht})}else Mu(de.numGlyphs,J)}if(L){te.clear();let fe=b.icon.placedSymbolArray;for(let de=0;de<fe.length;de++){let be=fe.get(de);if(be.hidden)Mu(be.numGlyphs,te);else{let Te=pe[de];if(Te)for(let Se=0;Se<be.numGlyphs;Se++)o.as(te,Te.shiftedAnchor,Te.angle);else Mu(be.numGlyphs,te)}}b.icon.dynamicLayoutVertexBuffer.updateData(te)}b.text.dynamicLayoutVertexBuffer.updateData(J)}function mq(b,a,u){return u.iconsInText&&a?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function Fv(b,a,u,m,v,w,I,P,L,j,B,$,G){let J=b.context,te=J.gl,pe=b.transform,fe=P==="map",de=L==="map",be=P!=="viewport"&&u.layout.get("symbol-placement")!=="point",Te=fe&&!de&&!be,Se=!u.layout.get("symbol-sort-key").isConstant(),Ae=!1,De=b.getDepthModeForSublayer(0,xr.ReadOnly),Pe=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ue=[],tt=pe.getCircleRadiusCorrection();for(let Ke of m){let Xe=a.getTile(Ke),Qe=Xe.getBucket(u);if(!Qe)continue;let Tt=v?Qe.text:Qe.icon;if(!Tt||!Tt.segments.get().length||!Tt.hasVisibleVertices)continue;let bt=Tt.programConfigurations.get(u.id),ft=v||Qe.sdfIcons,Ht=v?Qe.textSizeData:Qe.iconSizeData,Cr=de||pe.pitch!==0,Xr=b.useProgram(mq(ft,v,Qe),bt),ii=o.ak(Ht,pe.zoom),Mn=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ke),oi,ai,Nn,sn,Xi=[0,0],co=null;if(v)ai=Xe.glyphAtlasTexture,Nn=te.LINEAR,oi=Xe.glyphAtlasTexture.size,Qe.iconsInText&&(Xi=Xe.imageAtlasTexture.size,co=Xe.imageAtlasTexture,sn=Cr||b.options.rotating||b.options.zooming||Ht.kind==="composite"||Ht.kind==="camera"?te.LINEAR:te.NEAREST);else{let Ui=u.layout.get("icon-size").constantOr(0)!==1||Qe.iconsNeedLinear;ai=Xe.imageAtlasTexture,Nn=ft||b.options.rotating||b.options.zooming||Ui||Cr?te.LINEAR:te.NEAREST,oi=Xe.imageAtlasTexture.size}let Ao=o.az(Xe,1,b.transform.zoom),ln=Rt(fe,b.transform,Ao),wc=o.K();o.an(wc,ln);let Ll=Xt(de,fe,b.transform,Ao),Ec=o.aA(pe,Xe,w,I),jh=pe.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),Lm=Pe&&Qe.hasTextData(),Sc=u.layout.get("icon-text-fit")!=="none"&&Lm&&Qe.hasIconData();if(be){let Ui=b.style.map.terrain?(sa,$n)=>b.style.map.terrain.getElevation(Ke,sa,$n):null,Vi=u.layout.get("text-rotation-alignment")==="map";Dr(Qe,b,v,ln,wc,de,j,Vi,Ke.toUnwrapped(),pe.width,pe.height,Ec,Ui)}let Fh=v&&Pe||Sc,Ja=be||Fh?ym:de?ln:b.transform.clipSpaceToPixelsMatrix,Tc=ft&&u.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Ru;Ru=ft?Qe.iconsInText?Mv(Ht.kind,ii,Te,de,be,Fh,b,Ja,Ll,Ec,oi,Xi,tt):ZI(Ht.kind,ii,Te,de,be,Fh,b,Ja,Ll,Ec,v,oi,0,tt):Xf(Ht.kind,ii,Te,de,be,Fh,b,Ja,Ll,Ec,v,oi,tt);let Ic={program:Xr,buffers:Tt,uniformValues:Ru,projectionData:jh,atlasTexture:ai,atlasTextureIcon:co,atlasInterpolation:Nn,atlasInterpolationIcon:sn,isSDF:ft,hasHalo:Tc};if(Se&&Qe.canOverlap){Ae=!0;let Ui=Tt.segments.get();for(let Vi of Ui)Ue.push({segments:new o.aJ([Vi]),sortKey:Vi.sortKey,state:Ic,terrainData:Mn})}else Ue.push({segments:Tt.segments,sortKey:0,state:Ic,terrainData:Mn})}Ae&&Ue.sort((Ke,Xe)=>Ke.sortKey-Xe.sortKey);for(let Ke of Ue){let Xe=Ke.state;if(J.activeTexture.set(te.TEXTURE0),Xe.atlasTexture.bind(Xe.atlasInterpolation,te.CLAMP_TO_EDGE),Xe.atlasTextureIcon&&(J.activeTexture.set(te.TEXTURE1),Xe.atlasTextureIcon&&Xe.atlasTextureIcon.bind(Xe.atlasInterpolationIcon,te.CLAMP_TO_EDGE)),Xe.isSDF){let Qe=Xe.uniformValues;Xe.hasHalo&&(Qe.u_is_halo=1,_m(Xe.buffers,Ke.segments,u,b,Xe.program,De,B,$,Qe,Xe.projectionData,Ke.terrainData)),Qe.u_is_halo=0}_m(Xe.buffers,Ke.segments,u,b,Xe.program,De,B,$,Xe.uniformValues,Xe.projectionData,Ke.terrainData)}}function _m(b,a,u,m,v,w,I,P,L,j,B){let $=m.context;v.draw($,$.gl.TRIANGLES,w,I,P,Kr.backCCW,L,B,j,u.id,b.layoutVertexBuffer,b.indexBuffer,a,u.paint,m.transform.zoom,b.programConfigurations.get(u.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function zv(b,a,u,m,v){let w=b.context,I=w.gl,P=Ar.disabled,L=new En([I.ONE,I.ONE],o.b7.transparent,[!0,!0,!0,!0]),j=a.getBucket(u);if(!j)return;let B=m.key,$=u.heatmapFbos.get(B);$||($=Bv(w,a.tileSize,a.tileSize),u.heatmapFbos.set(B,$)),w.bindFramebuffer.set($.framebuffer),w.viewport.set([0,0,a.tileSize,a.tileSize]),w.clear({color:o.b7.transparent});let G=j.programConfigurations.get(u.id),J=b.useProgram("heatmap",G,!v),te=b.transform.getProjectionData({overscaledTileID:a.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),pe=b.style.map.terrain.getTerrainData(m);J.draw(w,I.TRIANGLES,xr.disabled,P,L,Kr.disabled,Oh(a,b.transform.zoom,u.paint.get("heatmap-intensity"),1),pe,te,u.id,j.layoutVertexBuffer,j.indexBuffer,j.segments,u.paint,b.transform.zoom,G)}function hb(b,a,u,m,v){let w=b.context,I=w.gl,P=b.transform;w.setColorMode(b.colorModeForRenderPass());let L=fb(w,a),j=u.key,B=a.heatmapFbos.get(j);if(!B)return;w.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,B.colorAttachment.get()),w.activeTexture.set(I.TEXTURE1),L.bind(I.LINEAR,I.CLAMP_TO_EDGE);let $=P.getProjectionData({overscaledTileID:u,applyTerrainMatrix:v,applyGlobeMatrix:!m});b.useProgram("heatmapTexture").draw(w,I.TRIANGLES,xr.disabled,Ar.disabled,b.colorModeForRenderPass(),Kr.disabled,zI(b,a,0,1),null,$,a.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments,a.paint,P.zoom),B.destroy(),a.heatmapFbos.delete(j)}function Bv(b,a,u){var m,v;let w=b.gl,I=w.createTexture();w.bindTexture(w.TEXTURE_2D,I),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR);let P=(m=b.HALF_FLOAT)!==null&&m!==void 0?m:w.UNSIGNED_BYTE,L=(v=b.RGBA16F)!==null&&v!==void 0?v:w.RGBA;w.texImage2D(w.TEXTURE_2D,0,L,a,u,0,w.RGBA,P,null);let j=b.createFramebuffer(a,u,!1,!1);return j.colorAttachment.set(I),j}function fb(b,a){return a.colorRampTexture||(a.colorRampTexture=new ie(b,a.colorRamp,b.gl.RGBA)),a.colorRampTexture}function xm(b,a,u,m,v){if(!u||!m||!m.imageAtlas)return;let w=m.imageAtlas.patternPositions,I=w[u.to.toString()],P=w[u.from.toString()];if(!I&&P&&(I=P),!P&&I&&(P=I),!I||!P){let L=v.getPaintProperty(a);I=w[L],P=w[L]}I&&P&&b.setConstantPatternPositions(I,P)}function bm(b,a,u,m,v,w,I,P){let L=b.context.gl,j="fill-pattern",B=u.paint.get(j),$=B&&B.constantOr(1),G=u.getCrossfadeParameters(),J,te,pe,fe,de,be=b.transform,Te=u.paint.get("fill-translate"),Se=u.paint.get("fill-translate-anchor");I?(te=$&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",J=L.LINES):(te=$?"fillPattern":"fill",J=L.TRIANGLES);let Ae=B.constantOr(null);for(let De of m){let Pe=a.getTile(De);if($&&!Pe.patternsLoaded())continue;let Ue=Pe.getBucket(u);if(!Ue)continue;let tt=Ue.programConfigurations.get(u.id),Ke=b.useProgram(te,tt),Xe=b.style.map.terrain&&b.style.map.terrain.getTerrainData(De);$&&(b.context.activeTexture.set(L.TEXTURE0),Pe.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),tt.updatePaintBuffers(G)),xm(tt,j,Ae,Pe,u);let Qe=be.getProjectionData({overscaledTileID:De,applyGlobeMatrix:!P,applyTerrainMatrix:!0}),Tt=o.aA(be,Pe,Te,Se);if(I){fe=Ue.indexBuffer2,de=Ue.segments2;let ft=[L.drawingBufferWidth,L.drawingBufferHeight];pe=te==="fillOutlinePattern"&&$?dm(b,G,Pe,ft,Tt):Jx(ft,Tt)}else fe=Ue.indexBuffer,de=Ue.segments,pe=$?jI(b,G,Pe,Tt):{u_fill_translate:Tt};let bt=b.stencilModeForClipping(De);Ke.draw(b.context,J,v,bt,w,Kr.backCCW,pe,Xe,Qe,u.id,Ue.layoutVertexBuffer,fe,de,u.paint,b.transform.zoom,tt)}}function wm(b,a,u,m,v,w,I,P){let L=b.context,j=L.gl,B="fill-extrusion-pattern",$=u.paint.get(B),G=$.constantOr(1),J=u.getCrossfadeParameters(),te=u.paint.get("fill-extrusion-opacity"),pe=$.constantOr(null),fe=b.transform;for(let de of m){let be=a.getTile(de),Te=be.getBucket(u);if(!Te)continue;let Se=b.style.map.terrain&&b.style.map.terrain.getTerrainData(de),Ae=Te.programConfigurations.get(u.id),De=b.useProgram(G?"fillExtrusionPattern":"fillExtrusion",Ae);G&&(b.context.activeTexture.set(j.TEXTURE0),be.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),Ae.updatePaintBuffers(J));let Pe=fe.getProjectionData({overscaledTileID:de,applyGlobeMatrix:!P,applyTerrainMatrix:!0});xm(Ae,B,pe,be,u);let Ue=o.aA(fe,be,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),tt=u.paint.get("fill-extrusion-vertical-gradient"),Ke=G?Pl(b,tt,te,Ue,de,J,be):Tv(b,tt,te,Ue);De.draw(L,L.gl.TRIANGLES,v,w,I,Kr.backCCW,Ke,Se,Pe,u.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,u.paint,b.transform.zoom,Ae,b.style.map.terrain&&Te.centroidVertexBuffer)}}function pb(b,a,u,m,v,w,I,P,L){var j;let B=b.style.projection,$=b.context,G=b.transform,J=$.gl,te=[`#define NUM_ILLUMINATION_SOURCES ${u.paint.get("hillshade-highlight-color").values.length}`],pe=b.useProgram("hillshade",null,!1,te),fe=!b.options.moving;for(let de of m){let be=a.getTile(de),Te=be.fbo;if(!Te)continue;let Se=B.getMeshFromTileID($,de.canonical,P,!0,"raster"),Ae=(j=b.style.map.terrain)===null||j===void 0?void 0:j.getTerrainData(de);$.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,Te.colorAttachment.get());let De=G.getProjectionData({overscaledTileID:de,aligned:fe,applyGlobeMatrix:!L,applyTerrainMatrix:!0});pe.draw($,J.TRIANGLES,w,v[de.overscaledZ],I,Kr.backCCW,BI(b,be,u),Ae,De,u.id,Se.vertexBuffer,Se.indexBuffer,Se.segments)}}let Em=[new o.P(0,0),new o.P(o.Z,0),new o.P(o.Z,o.Z),new o.P(0,o.Z)];function Uv(b,a,u,m,v,w,I,P,L=!1,j=!1){let B=m[m.length-1].overscaledZ,$=b.context,G=$.gl,J=b.useProgram("raster"),te=b.transform,pe=b.style.projection,fe=b.colorModeForRenderPass(),de=!b.options.moving;for(let be of m){let Te=b.getDepthModeForSublayer(be.overscaledZ-B,u.paint.get("raster-opacity")===1?xr.ReadWrite:xr.ReadOnly,G.LESS),Se=a.getTile(be);Se.registerFadeDuration(u.paint.get("raster-fade-duration"));let Ae=a.findLoadedParent(be,0),De=a.findLoadedSibling(be),Pe=oM(Se,Ae||De||null,a,u,b.transform,b.style.map.terrain),Ue,tt,Ke=u.paint.get("raster-resampling")==="nearest"?G.NEAREST:G.LINEAR;$.activeTexture.set(G.TEXTURE0),Se.texture.bind(Ke,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),$.activeTexture.set(G.TEXTURE1),Ae?(Ae.texture.bind(Ke,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),Ue=Math.pow(2,Ae.tileID.overscaledZ-Se.tileID.overscaledZ),tt=[Se.tileID.canonical.x*Ue%1,Se.tileID.canonical.y*Ue%1]):Se.texture.bind(Ke,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),Se.texture.useMipmap&&$.extTextureFilterAnisotropic&&b.transform.pitch>20&&G.texParameterf(G.TEXTURE_2D,$.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,$.extTextureFilterAnisotropicMax);let Xe=b.style.map.terrain&&b.style.map.terrain.getTerrainData(be),Qe=te.getProjectionData({overscaledTileID:be,aligned:de,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),Tt=HI(tt||[0,0],Ue||1,Pe,u,P),bt=pe.getMeshFromTileID($,be.canonical,w,I,"raster");J.draw($,G.TRIANGLES,Te,v?v[be.overscaledZ]:Ar.disabled,fe,L?Kr.frontCCW:Kr.backCCW,Tt,Xe,Qe,u.id,bt.vertexBuffer,bt.indexBuffer,bt.segments)}}function oM(b,a,u,m,v,w){let I=m.paint.get("raster-fade-duration");if(!w&&I>0){let P=_.now(),L=(P-b.timeAdded)/I,j=a?(P-a.timeAdded)/I:-1,B=u.getSource(),$=Ie(v,{tileSize:B.tileSize,roundZoom:B.roundZoom}),G=!a||Math.abs(a.tileID.overscaledZ-$)>Math.abs(b.tileID.overscaledZ-$),J=G&&b.refreshedUponExpiration?1:o.ae(G?L:1-j,0,1);return b.refreshedUponExpiration&&L>=1&&(b.refreshedUponExpiration=!1),a?{opacity:1,mix:1-J}:{opacity:J,mix:0}}return{opacity:1,mix:0}}let Vv=new o.b7(1,0,0,1),db=new o.b7(0,1,0,1),aM=new o.b7(0,0,1,1),sM=new o.b7(1,0,1,1),Gv=new o.b7(0,1,1,1);function $v(b,a,u,m){Sm(b,0,a+u/2,b.transform.width,u,m)}function lM(b,a,u,m){Sm(b,a-u/2,0,u,b.transform.height,m)}function Sm(b,a,u,m,v,w){let I=b.context,P=I.gl;P.enable(P.SCISSOR_TEST),P.scissor(a*b.pixelRatio,u*b.pixelRatio,m*b.pixelRatio,v*b.pixelRatio),I.clear({color:w}),P.disable(P.SCISSOR_TEST)}function Ei(b,a,u){let m=b.context,v=m.gl,w=b.useProgram("debug"),I=xr.disabled,P=Ar.disabled,L=b.colorModeForRenderPass(),j="$debug",B=b.style.map.terrain&&b.style.map.terrain.getTerrainData(u);m.activeTexture.set(v.TEXTURE0);let $=a.getTileByID(u.key).latestRawTileData,G=Math.floor(($&&$.byteLength||0)/1024),J=a.getTile(u).tileSize,te=512/Math.min(J,512)*(u.overscaledZ/b.transform.zoom)*.5,pe=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(pe+=` => ${u.overscaledZ}`),function(de,be){de.initDebugOverlayCanvas();let Te=de.debugOverlayCanvas,Se=de.context.gl,Ae=de.debugOverlayCanvas.getContext("2d");Ae.clearRect(0,0,Te.width,Te.height),Ae.shadowColor="white",Ae.shadowBlur=2,Ae.lineWidth=1.5,Ae.strokeStyle="white",Ae.textBaseline="top",Ae.font="bold 36px Open Sans, sans-serif",Ae.fillText(be,5,5),Ae.strokeText(be,5,5),de.debugOverlayTexture.update(Te),de.debugOverlayTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE)}(b,`${pe} ${G}kB`);let fe=b.transform.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!0});w.draw(m,v.TRIANGLES,I,P,En.alphaBlended,Kr.disabled,FI(o.b7.transparent,te),null,fe,j,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),w.draw(m,v.LINE_STRIP,I,P,L,Kr.disabled,FI(o.b7.red),B,fe,j,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function bc(b,a,u,m){let{isRenderingGlobe:v}=m,w=b.context,I=w.gl,P=b.transform,L=b.colorModeForRenderPass(),j=b.getDepthModeFor3D(),B=b.useProgram("terrain");w.bindFramebuffer.set(null),w.viewport.set([0,0,b.width,b.height]);for(let $ of u){let G=a.getTerrainMesh($.tileID),J=b.renderToTexture.getTexture($),te=a.getTerrainData($.tileID);w.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,J.texture);let pe=a.getMeshFrameDelta(P.zoom),fe=P.calculateFogMatrix($.tileID.toUnwrapped()),de=nq(pe,fe,b.style.sky,P.pitch,v),be=P.getProjectionData({overscaledTileID:$.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});B.draw(w,I.TRIANGLES,j,Ar.disabled,L,Kr.backCCW,de,te,be,"terrain",G.vertexBuffer,G.indexBuffer,G.segments)}}function Qa(b,a){if(!a.mesh){let u=new o.aI;u.emplaceBack(-1,-1),u.emplaceBack(1,-1),u.emplaceBack(1,1),u.emplaceBack(-1,1);let m=new o.aK;m.emplaceBack(0,1,2),m.emplaceBack(0,2,3),a.mesh=new $f(b.createVertexBuffer(u,ia.members),b.createIndexBuffer(m),o.aJ.simpleSegment(0,0,u.length,m.length))}return a.mesh}class mb{constructor(a,u){this.context=new qv(a),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ce.maxUnderzooming+Ce.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new im}resize(a,u,m){if(this.width=Math.floor(a*m),this.height=Math.floor(u*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let v of this.style._order)this.style._layers[v].resize()}setup(){let a=this.context,u=new o.aI;u.emplaceBack(0,0),u.emplaceBack(o.Z,0),u.emplaceBack(0,o.Z),u.emplaceBack(o.Z,o.Z),this.tileExtentBuffer=a.createVertexBuffer(u,ia.members),this.tileExtentSegments=o.aJ.simpleSegment(0,0,4,2);let m=new o.aI;m.emplaceBack(0,0),m.emplaceBack(o.Z,0),m.emplaceBack(0,o.Z),m.emplaceBack(o.Z,o.Z),this.debugBuffer=a.createVertexBuffer(m,ia.members),this.debugSegments=o.aJ.simpleSegment(0,0,4,5);let v=new o.b_;v.emplaceBack(0,0,0,0),v.emplaceBack(o.Z,0,o.Z,0),v.emplaceBack(0,o.Z,0,o.Z),v.emplaceBack(o.Z,o.Z,o.Z,o.Z),this.rasterBoundsBuffer=a.createVertexBuffer(v,tq.members),this.rasterBoundsSegments=o.aJ.simpleSegment(0,0,4,2);let w=new o.aI;w.emplaceBack(0,0),w.emplaceBack(o.Z,0),w.emplaceBack(0,o.Z),w.emplaceBack(o.Z,o.Z),this.rasterBoundsBufferPosOnly=a.createVertexBuffer(w,ia.members),this.rasterBoundsSegmentsPosOnly=o.aJ.simpleSegment(0,0,4,5);let I=new o.aI;I.emplaceBack(0,0),I.emplaceBack(1,0),I.emplaceBack(0,1),I.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(I,ia.members),this.viewportSegments=o.aJ.simpleSegment(0,0,4,2);let P=new o.b$;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(P);let L=new o.aK;L.emplaceBack(1,0,2),L.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(L);let j=this.context.gl;this.stencilClearMode=new Ar({func:j.ALWAYS,mask:0},0,255,j.ZERO,j.ZERO,j.ZERO),this.tileExtentMesh=new $f(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let a=this.context,u=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let m=o.K();o.bQ(m,0,this.width,this.height,0,0,1),o.M(m,m,[u.drawingBufferWidth,u.drawingBufferHeight,0]);let v={mainMatrix:m,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:m};this.useProgram("clippingMask",null,!0).draw(a,u.TRIANGLES,xr.disabled,this.stencilClearMode,En.disabled,Kr.disabled,null,null,v,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,u,m){if(this.currentStencilSource===a.source||!a.isTileClipped()||!u||!u.length)return;this.currentStencilSource=a.source,this.nextStencilID+u.length>256&&this.clearStencil();let v=this.context;v.setColorMode(En.disabled),v.setDepthMode(xr.disabled);let w={};for(let I of u)w[I.key]=this.nextStencilID++;this._renderTileMasks(w,u,m,!0),this._renderTileMasks(w,u,m,!1),this._tileClippingMaskIDs=w}_renderTileMasks(a,u,m,v){let w=this.context,I=w.gl,P=this.style.projection,L=this.transform,j=this.useProgram("clippingMask");for(let B of u){let $=a[B.key],G=this.style.map.terrain&&this.style.map.terrain.getTerrainData(B),J=P.getMeshFromTileID(this.context,B.canonical,v,!0,"stencil"),te=L.getProjectionData({overscaledTileID:B,applyGlobeMatrix:!m,applyTerrainMatrix:!0});j.draw(w,I.TRIANGLES,xr.disabled,new Ar({func:I.ALWAYS,mask:0},$,255,I.KEEP,I.KEEP,I.REPLACE),En.disabled,m?Kr.disabled:Kr.backCCW,null,G,te,"$clipping",J.vertexBuffer,J.indexBuffer,J.segments)}}_renderTilesDepthBuffer(){let a=this.context,u=a.gl,m=this.style.projection,v=this.transform,w=this.useProgram("depth"),I=this.getDepthModeFor3D(),P=xe(v,{tileSize:v.tileSize});for(let L of P){let j=this.style.map.terrain&&this.style.map.terrain.getTerrainData(L),B=m.getMeshFromTileID(this.context,L.canonical,!0,!0,"raster"),$=v.getProjectionData({overscaledTileID:L,applyGlobeMatrix:!0,applyTerrainMatrix:!0});w.draw(a,u.TRIANGLES,I,Ar.disabled,En.disabled,Kr.backCCW,null,j,$,"$clipping",B.vertexBuffer,B.indexBuffer,B.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let a=this.nextStencilID++,u=this.context.gl;return new Ar({func:u.NOTEQUAL,mask:255},a,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(a){let u=this.context.gl;return new Ar({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,u.KEEP,u.KEEP,u.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(a){let u=this.context.gl,m=a.sort((I,P)=>P.overscaledZ-I.overscaledZ),v=m[m.length-1].overscaledZ,w=m[0].overscaledZ-v+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();let I={};for(let P=0;P<w;P++)I[P+v]=new Ar({func:u.GEQUAL,mask:255},P+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=w,[I,m]}return[{[v]:Ar.disabled},m]}stencilConfigForOverlapTwoPass(a){let u=this.context.gl,m=a.sort((I,P)=>P.overscaledZ-I.overscaledZ),v=m[m.length-1].overscaledZ,w=m[0].overscaledZ-v+1;if(this.clearStencil(),w>1){let I={},P={};for(let L=0;L<w;L++)I[L+v]=new Ar({func:u.GREATER,mask:255},w+1+L,255,u.KEEP,u.KEEP,u.REPLACE),P[L+v]=new Ar({func:u.GREATER,mask:255},1+L,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID=2*w+1,[I,P,m]}return this.nextStencilID=3,[{[v]:new Ar({func:u.GREATER,mask:255},2,255,u.KEEP,u.KEEP,u.REPLACE)},{[v]:new Ar({func:u.GREATER,mask:255},1,255,u.KEEP,u.KEEP,u.REPLACE)},m]}colorModeForRenderPass(){let a=this.context.gl;return this._showOverdrawInspector?new En([a.CONSTANT_COLOR,a.ONE],new o.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?En.unblended:En.alphaBlended}getDepthModeForSublayer(a,u,m){if(!this.opaquePassEnabledForLayer())return xr.disabled;let v=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new xr(m||this.context.gl.LEQUAL,u,[v,v])}getDepthModeFor3D(){return new xr(this.context.gl.LEQUAL,xr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,u){var m,v;this.style=a,this.options=u,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(_.now()),this.imageManager.beginFrame();let w=this.style._order,I=this.style.sourceCaches,P={},L={},j={},B={isRenderingToTexture:!1,isRenderingGlobe:((m=a.projection)===null||m===void 0?void 0:m.transitionState)>0};for(let G in I){let J=I[G];J.used&&J.prepare(this.context),P[G]=J.getVisibleCoordinates(!1),L[G]=P[G].slice().reverse(),j[G]=J.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let G=0;G<w.length;G++)if(this.style._layers[w[G]].is3D()){this.opaquePassCutoff=G;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let G of w){let J=this.style._layers[G];if(!J.hasOffscreenPass()||J.isHidden(this.transform.zoom))continue;let te=L[J.source];(J.type==="custom"||te.length)&&this.renderLayer(this,I[J.source],J,te,B)}if((v=this.style.projection)===null||v===void 0||v.updateGPUdependent({context:this.context,useProgram:G=>this.useProgram(G)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?o.b7.black:o.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(G,J){let te=G.context,pe=te.gl,fe=((De,Pe,Ue)=>{let tt=Math.cos(Pe.rollInRadians),Ke=Math.sin(Pe.rollInRadians),Xe=qe(Pe),Qe=Pe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:De.properties.get("sky-color"),u_horizon_color:De.properties.get("horizon-color"),u_horizon:[(Pe.width/2-Xe*Ke)*Ue,(Pe.height/2+Xe*tt)*Ue],u_horizon_normal:[-Ke,tt],u_sky_horizon_blend:De.properties.get("sky-horizon-blend")*Pe.height/2*Ue,u_sky_blend:Qe}})(J,G.style.map.transform,G.pixelRatio),de=new xr(pe.LEQUAL,xr.ReadWrite,[0,1]),be=Ar.disabled,Te=G.colorModeForRenderPass(),Se=G.useProgram("sky"),Ae=Qa(te,J);Se.draw(te,pe.TRIANGLES,de,be,Te,Kr.disabled,fe,null,void 0,"sky",Ae.vertexBuffer,Ae.indexBuffer,Ae.segments)}(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){let G=this.style._layers[w[this.currentLayer]],J=I[G.source],te=P[G.source];this._renderTileClippingMasks(G,te,!1),this.renderLayer(this,J,G,te,B)}this.renderPass="translucent";let $=!1;for(this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){let G=this.style._layers[w[this.currentLayer]],J=I[G.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(G,B))continue;this.opaquePassEnabledForLayer()||$||($=!0,B.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let te=(G.type==="symbol"?j:L)[G.source];this._renderTileClippingMasks(G,P[G.source],!!this.renderToTexture),this.renderLayer(this,J,G,te,B)}if(B.isRenderingGlobe&&function(G,J,te){let pe=G.context,fe=pe.gl,de=G.useProgram("atmosphere"),be=new xr(fe.LEQUAL,xr.ReadOnly,[0,1]),Te=G.transform,Se=function(Qe,Tt){let bt=Qe.properties.get("position"),ft=[-bt.x,-bt.y,-bt.z],Ht=o.ad(new Float64Array(16));return Qe.properties.get("anchor")==="map"&&(o.a_(Ht,Ht,Tt.rollInRadians),o.a$(Ht,Ht,-Tt.pitchInRadians),o.a_(Ht,Ht,Tt.bearingInRadians),o.a$(Ht,Ht,Tt.center.lat*Math.PI/180),o.bp(Ht,Ht,-Tt.center.lng*Math.PI/180)),o.bZ(ft,ft,Ht),ft}(te,G.transform),Ae=Te.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),De=J.properties.get("atmosphere-blend")*Ae.projectionTransition;if(De===0)return;let Pe=Ch(Te.worldSize,Te.center.lat),Ue=Te.inverseProjectionMatrix,tt=new Float64Array(4);tt[3]=1,o.at(tt,tt,Te.modelViewProjectionMatrix),tt[0]/=tt[3],tt[1]/=tt[3],tt[2]/=tt[3],tt[3]=1,o.at(tt,tt,Ue),tt[0]/=tt[3],tt[1]/=tt[3],tt[2]/=tt[3],tt[3]=1;let Ke=((Qe,Tt,bt,ft,Ht)=>({u_sun_pos:Qe,u_atmosphere_blend:Tt,u_globe_position:bt,u_globe_radius:ft,u_inv_proj_matrix:Ht}))(Se,De,[tt[0],tt[1],tt[2]],Pe,Ue),Xe=Qa(pe,J);de.draw(pe,fe.TRIANGLES,be,Ar.disabled,En.alphaBlended,Kr.disabled,Ke,null,null,"atmosphere",Xe.vertexBuffer,Xe.indexBuffer,Xe.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let G=function(J,te){let pe=null,fe=Object.values(J._layers).flatMap(Se=>Se.source&&!Se.isHidden(te)?[J.sourceCaches[Se.source]]:[]),de=fe.filter(Se=>Se.getSource().type==="vector"),be=fe.filter(Se=>Se.getSource().type!=="vector"),Te=Se=>{(!pe||pe.getSource().maxzoom<Se.getSource().maxzoom)&&(pe=Se)};return de.forEach(Se=>Te(Se)),pe||be.forEach(Se=>Te(Se)),pe}(this.style,this.transform.zoom);G&&function(J,te,pe){for(let fe=0;fe<pe.length;fe++)Ei(J,te,pe[fe])}(this,G,G.getVisibleCoordinates())}this.options.showPadding&&function(G){let J=G.transform.padding;$v(G,G.transform.height-(J.top||0),3,Vv),$v(G,J.bottom||0,3,db),lM(G,J.left||0,3,aM),lM(G,G.transform.width-(J.right||0),3,sM);let te=G.transform.centerPoint;(function(pe,fe,de,be){Sm(pe,fe-1,de-10,2,20,be),Sm(pe,fe-10,de-1,20,2,be)})(G,te.x,G.transform.height-te.y,Gv)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;let u=this.terrainFacilitator.matrix,m=this.transform.modelViewProjectionMatrix,v=this.terrainFacilitator.dirty;v||(v=a?!o.c0(u,m):!o.c1(u,m)),v||(v=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),v&&(o.c2(u,m),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(w,I){let P=w.context,L=P.gl,j=w.transform,B=En.unblended,$=new xr(L.LEQUAL,xr.ReadWrite,[0,1]),G=I.sourceCache.getRenderableTiles(),J=w.useProgram("terrainDepth");P.bindFramebuffer.set(I.getFramebuffer("depth").framebuffer),P.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),P.clear({color:o.b7.transparent,depth:1});for(let te of G){let pe=I.getTerrainMesh(te.tileID),fe=I.getTerrainData(te.tileID),de=j.getProjectionData({overscaledTileID:te.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),be={u_ele_delta:I.getMeshFrameDelta(j.zoom)};J.draw(P,L.TRIANGLES,$,Ar.disabled,B,Kr.backCCW,be,fe,de,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}P.bindFramebuffer.set(null),P.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain),function(w,I){let P=w.context,L=P.gl,j=w.transform,B=En.unblended,$=new xr(L.LEQUAL,xr.ReadWrite,[0,1]),G=I.getCoordsTexture(),J=I.sourceCache.getRenderableTiles(),te=w.useProgram("terrainCoords");P.bindFramebuffer.set(I.getFramebuffer("coords").framebuffer),P.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),P.clear({color:o.b7.transparent,depth:1}),I.coordsIndex=[];for(let pe of J){let fe=I.getTerrainMesh(pe.tileID),de=I.getTerrainData(pe.tileID);P.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,G.texture);let be={u_terrain_coords_id:(255-I.coordsIndex.length)/255,u_texture:0,u_ele_delta:I.getMeshFrameDelta(j.zoom)},Te=j.getProjectionData({overscaledTileID:pe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});te.draw(P,L.TRIANGLES,$,Ar.disabled,B,Kr.backCCW,be,de,Te,"terrain",fe.vertexBuffer,fe.indexBuffer,fe.segments),I.coordsIndex.push(pe.tileID.key)}P.bindFramebuffer.set(null),P.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain))}renderLayer(a,u,m,v,w){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||(v||[]).length)&&(this.id=m.id,o.c3(m)?function(I,P,L,j,B,$){if(I.renderPass!=="translucent")return;let{isRenderingToTexture:G}=$,J=Ar.disabled,te=I.colorModeForRenderPass();(L._unevaluatedLayout.hasValue("text-variable-anchor")||L._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(pe,fe,de,be,Te,Se,Ae,De,Pe){let Ue=fe.transform,tt=fe.style.map.terrain,Ke=Te==="map",Xe=Se==="map";for(let Qe of pe){let Tt=be.getTile(Qe),bt=Tt.getBucket(de);if(!bt||!bt.text||!bt.text.segments.get().length)continue;let ft=o.ak(bt.textSizeData,Ue.zoom),Ht=o.az(Tt,1,fe.transform.zoom),Cr=Rt(Ke,fe.transform,Ht),Xr=de.layout.get("icon-text-fit")!=="none"&&bt.hasIconData();if(ft){let ii=Math.pow(2,Ue.zoom-Tt.tileID.overscaledZ),Mn=tt?(oi,ai)=>tt.getElevation(Qe,oi,ai):null;iM(bt,Ke,Xe,Pe,Ue,Cr,ii,ft,Xr,o.aA(Ue,Tt,Ae,De),Qe.toUnwrapped(),Mn)}}}(j,I,L,P,L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),B),L.paint.get("icon-opacity").constantOr(1)!==0&&Fv(I,P,L,j,!1,L.paint.get("icon-translate"),L.paint.get("icon-translate-anchor"),L.layout.get("icon-rotation-alignment"),L.layout.get("icon-pitch-alignment"),L.layout.get("icon-keep-upright"),J,te,G),L.paint.get("text-opacity").constantOr(1)!==0&&Fv(I,P,L,j,!0,L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),L.layout.get("text-keep-upright"),J,te,G),P.map.showCollisionBoxes&&(cb(I,P,L,j,!0),cb(I,P,L,j,!1))}(a,u,m,v,this.style.placement.variableOffsets,w):o.c4(m)?function(I,P,L,j,B){if(I.renderPass!=="translucent")return;let{isRenderingToTexture:$}=B,G=L.paint.get("circle-opacity"),J=L.paint.get("circle-stroke-width"),te=L.paint.get("circle-stroke-opacity"),pe=!L.layout.get("circle-sort-key").isConstant();if(G.constantOr(1)===0&&(J.constantOr(1)===0||te.constantOr(1)===0))return;let fe=I.context,de=fe.gl,be=I.transform,Te=I.getDepthModeForSublayer(0,xr.ReadOnly),Se=Ar.disabled,Ae=I.colorModeForRenderPass(),De=[],Pe=be.getCircleRadiusCorrection();for(let Ue=0;Ue<j.length;Ue++){let tt=j[Ue],Ke=P.getTile(tt),Xe=Ke.getBucket(L);if(!Xe)continue;let Qe=L.paint.get("circle-translate"),Tt=L.paint.get("circle-translate-anchor"),bt=o.aA(be,Ke,Qe,Tt),ft=Xe.programConfigurations.get(L.id),Ht=I.useProgram("circle",ft),Cr=Xe.layoutVertexBuffer,Xr=Xe.indexBuffer,ii=I.style.map.terrain&&I.style.map.terrain.getTerrainData(tt),Mn={programConfiguration:ft,program:Ht,layoutVertexBuffer:Cr,indexBuffer:Xr,uniformValues:mm(I,Ke,L,bt,Pe),terrainData:ii,projectionData:be.getProjectionData({overscaledTileID:tt,applyGlobeMatrix:!$,applyTerrainMatrix:!0})};if(pe){let oi=Xe.segments.get();for(let ai of oi)De.push({segments:new o.aJ([ai]),sortKey:ai.sortKey,state:Mn})}else De.push({segments:Xe.segments,sortKey:0,state:Mn})}pe&&De.sort((Ue,tt)=>Ue.sortKey-tt.sortKey);for(let Ue of De){let{programConfiguration:tt,program:Ke,layoutVertexBuffer:Xe,indexBuffer:Qe,uniformValues:Tt,terrainData:bt,projectionData:ft}=Ue.state;Ke.draw(fe,de.TRIANGLES,Te,Se,Ae,Kr.backCCW,Tt,bt,ft,L.id,Xe,Qe,Ue.segments,L.paint,I.transform.zoom,tt)}}(a,u,m,v,w):o.c5(m)?function(I,P,L,j,B){if(L.paint.get("heatmap-opacity")===0)return;let $=I.context,{isRenderingToTexture:G,isRenderingGlobe:J}=B;if(I.style.map.terrain){for(let te of j){let pe=P.getTile(te);P.hasRenderableParent(te)||(I.renderPass==="offscreen"?zv(I,pe,L,te,J):I.renderPass==="translucent"&&hb(I,L,te,G,J))}$.viewport.set([0,0,I.width,I.height])}else I.renderPass==="offscreen"?function(te,pe,fe,de){let be=te.context,Te=be.gl,Se=te.transform,Ae=Ar.disabled,De=new En([Te.ONE,Te.ONE],o.b7.transparent,[!0,!0,!0,!0]);(function(Pe,Ue,tt){let Ke=Pe.gl;Pe.activeTexture.set(Ke.TEXTURE1),Pe.viewport.set([0,0,Ue.width/4,Ue.height/4]);let Xe=tt.heatmapFbos.get(o.bW);Xe?(Ke.bindTexture(Ke.TEXTURE_2D,Xe.colorAttachment.get()),Pe.bindFramebuffer.set(Xe.framebuffer)):(Xe=Bv(Pe,Ue.width/4,Ue.height/4),tt.heatmapFbos.set(o.bW,Xe))})(be,te,fe),be.clear({color:o.b7.transparent});for(let Pe=0;Pe<de.length;Pe++){let Ue=de[Pe];if(pe.hasRenderableParent(Ue))continue;let tt=pe.getTile(Ue),Ke=tt.getBucket(fe);if(!Ke)continue;let Xe=Ke.programConfigurations.get(fe.id),Qe=te.useProgram("heatmap",Xe),Tt=Se.getProjectionData({overscaledTileID:Ue,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),bt=Se.getCircleRadiusCorrection();Qe.draw(be,Te.TRIANGLES,xr.disabled,Ae,De,Kr.backCCW,Oh(tt,Se.zoom,fe.paint.get("heatmap-intensity"),bt),null,Tt,fe.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,fe.paint,Se.zoom,Xe)}be.viewport.set([0,0,te.width,te.height])}(I,P,L,j):I.renderPass==="translucent"&&function(te,pe){let fe=te.context,de=fe.gl;fe.setColorMode(te.colorModeForRenderPass());let be=pe.heatmapFbos.get(o.bW);be&&(fe.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,be.colorAttachment.get()),fe.activeTexture.set(de.TEXTURE1),fb(fe,pe).bind(de.LINEAR,de.CLAMP_TO_EDGE),te.useProgram("heatmapTexture").draw(fe,de.TRIANGLES,xr.disabled,Ar.disabled,te.colorModeForRenderPass(),Kr.disabled,zI(te,pe,0,1),null,null,pe.id,te.viewportBuffer,te.quadTriangleIndexBuffer,te.viewportSegments,pe.paint,te.transform.zoom))}(I,L)}(a,u,m,v,w):o.c6(m)?function(I,P,L,j,B){if(I.renderPass!=="translucent")return;let{isRenderingToTexture:$}=B,G=L.paint.get("line-opacity"),J=L.paint.get("line-width");if(G.constantOr(1)===0||J.constantOr(1)===0)return;let te=I.getDepthModeForSublayer(0,xr.ReadOnly),pe=I.colorModeForRenderPass(),fe=L.paint.get("line-dasharray"),de=L.paint.get("line-pattern"),be=de.constantOr(1),Te=L.paint.get("line-gradient"),Se=L.getCrossfadeParameters(),Ae=be?"linePattern":fe?"lineSDF":Te?"lineGradient":"line",De=I.context,Pe=De.gl,Ue=I.transform,tt=!0;for(let Ke of j){let Xe=P.getTile(Ke);if(be&&!Xe.patternsLoaded())continue;let Qe=Xe.getBucket(L);if(!Qe)continue;let Tt=Qe.programConfigurations.get(L.id),bt=I.context.program.get(),ft=I.useProgram(Ae,Tt),Ht=tt||ft.program!==bt,Cr=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Ke),Xr=de.constantOr(null);if(Xr&&Xe.imageAtlas){let Nn=Xe.imageAtlas,sn=Nn.patternPositions[Xr.to.toString()],Xi=Nn.patternPositions[Xr.from.toString()];sn&&Xi&&Tt.setConstantPatternPositions(sn,Xi)}let ii=Ue.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),Mn=Ue.getPixelScale(),oi=be?GI(I,Xe,L,Mn,Se):fe?$I(I,Xe,L,Mn,fe,Se):Te?VI(I,Xe,L,Mn,Qe.lineClipsArray.length):gm(I,Xe,L,Mn);if(be)De.activeTexture.set(Pe.TEXTURE0),Xe.imageAtlasTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),Tt.updatePaintBuffers(Se);else if(fe&&(Ht||I.lineAtlas.dirty))De.activeTexture.set(Pe.TEXTURE0),I.lineAtlas.bind(De);else if(Te){let Nn=Qe.gradients[L.id],sn=Nn.texture;if(L.gradientVersion!==Nn.version){let Xi=256;if(L.stepInterpolant){let co=P.getSource().maxzoom,Ao=Ke.canonical.z===co?Math.ceil(1<<I.transform.maxZoom-Ke.canonical.z):1;Xi=o.ae(o.bX(Qe.maxLineLength/o.Z*1024*Ao),256,De.maxTextureSize)}Nn.gradient=o.bY({expression:L.gradientExpression(),evaluationKey:"lineProgress",resolution:Xi,image:Nn.gradient||void 0,clips:Qe.lineClipsArray}),Nn.texture?Nn.texture.update(Nn.gradient):Nn.texture=new ie(De,Nn.gradient,Pe.RGBA),Nn.version=L.gradientVersion,sn=Nn.texture}De.activeTexture.set(Pe.TEXTURE0),sn.bind(L.stepInterpolant?Pe.NEAREST:Pe.LINEAR,Pe.CLAMP_TO_EDGE)}let ai=I.stencilModeForClipping(Ke);ft.draw(De,Pe.TRIANGLES,te,ai,pe,Kr.disabled,oi,Cr,ii,L.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,L.paint,I.transform.zoom,Tt,Qe.layoutVertexBuffer2),tt=!1}}(a,u,m,v,w):o.c7(m)?function(I,P,L,j,B){let $=L.paint.get("fill-color"),G=L.paint.get("fill-opacity");if(G.constantOr(1)===0)return;let{isRenderingToTexture:J}=B,te=I.colorModeForRenderPass(),pe=L.paint.get("fill-pattern"),fe=I.opaquePassEnabledForLayer()&&!pe.constantOr(1)&&$.constantOr(o.b7.transparent).a===1&&G.constantOr(0)===1?"opaque":"translucent";if(I.renderPass===fe){let de=I.getDepthModeForSublayer(1,I.renderPass==="opaque"?xr.ReadWrite:xr.ReadOnly);bm(I,P,L,j,de,te,!1,J)}if(I.renderPass==="translucent"&&L.paint.get("fill-antialias")){let de=I.getDepthModeForSublayer(L.getPaintProperty("fill-outline-color")?2:0,xr.ReadOnly);bm(I,P,L,j,de,te,!0,J)}}(a,u,m,v,w):o.c8(m)?function(I,P,L,j,B){let $=L.paint.get("fill-extrusion-opacity");if($===0)return;let{isRenderingToTexture:G}=B;if(I.renderPass==="translucent"){let J=new xr(I.context.gl.LEQUAL,xr.ReadWrite,I.depthRangeFor3D);if($!==1||L.paint.get("fill-extrusion-pattern").constantOr(1))wm(I,P,L,j,J,Ar.disabled,En.disabled,G),wm(I,P,L,j,J,I.stencilModeFor3D(),I.colorModeForRenderPass(),G);else{let te=I.colorModeForRenderPass();wm(I,P,L,j,J,Ar.disabled,te,G)}}}(a,u,m,v,w):o.c9(m)?function(I,P,L,j,B){if(I.renderPass!=="offscreen"&&I.renderPass!=="translucent")return;let{isRenderingToTexture:$}=B,G=I.context,J=I.style.projection.useSubdivision,te=I.getDepthModeForSublayer(0,xr.ReadOnly),pe=I.colorModeForRenderPass();if(I.renderPass==="offscreen")(function(fe,de,be,Te,Se,Ae,De){let Pe=fe.context,Ue=Pe.gl;for(let tt of be){let Ke=de.getTile(tt),Xe=Ke.dem;if(!Xe||!Xe.data||!Ke.needsHillshadePrepare)continue;let Qe=Xe.dim,Tt=Xe.stride,bt=Xe.getPixels();if(Pe.activeTexture.set(Ue.TEXTURE1),Pe.pixelStoreUnpackPremultiplyAlpha.set(!1),Ke.demTexture=Ke.demTexture||fe.getTileTexture(Tt),Ke.demTexture){let Ht=Ke.demTexture;Ht.update(bt,{premultiply:!1}),Ht.bind(Ue.NEAREST,Ue.CLAMP_TO_EDGE)}else Ke.demTexture=new ie(Pe,bt,Ue.RGBA,{premultiply:!1}),Ke.demTexture.bind(Ue.NEAREST,Ue.CLAMP_TO_EDGE);Pe.activeTexture.set(Ue.TEXTURE0);let ft=Ke.fbo;if(!ft){let Ht=new ie(Pe,{width:Qe,height:Qe,data:null},Ue.RGBA);Ht.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE),ft=Ke.fbo=Pe.createFramebuffer(Qe,Qe,!0,!1),ft.colorAttachment.set(Ht.texture)}Pe.bindFramebuffer.set(ft.framebuffer),Pe.viewport.set([0,0,Qe,Qe]),fe.useProgram("hillshadePrepare").draw(Pe,Ue.TRIANGLES,Se,Ae,De,Kr.disabled,oq(Ke.tileID,Xe),null,null,Te.id,fe.rasterBoundsBuffer,fe.quadTriangleIndexBuffer,fe.rasterBoundsSegments),Ke.needsHillshadePrepare=!1}})(I,P,j,L,te,Ar.disabled,pe),G.viewport.set([0,0,I.width,I.height]);else if(I.renderPass==="translucent")if(J){let[fe,de,be]=I.stencilConfigForOverlapTwoPass(j);pb(I,P,L,be,fe,te,pe,!1,$),pb(I,P,L,be,de,te,pe,!0,$)}else{let[fe,de]=I.getStencilConfigForOverlapAndUpdateStencilID(j);pb(I,P,L,de,fe,te,pe,!1,$)}}(a,u,m,v,w):o.ca(m)?function(I,P,L,j,B){if(I.renderPass!=="translucent"||L.paint.get("raster-opacity")===0||!j.length)return;let{isRenderingToTexture:$}=B,G=P.getSource(),J=I.style.projection.useSubdivision;if(G instanceof yr)Uv(I,P,L,j,null,!1,!1,G.tileCoords,G.flippedWindingOrder,$);else if(J){let[te,pe,fe]=I.stencilConfigForOverlapTwoPass(j);Uv(I,P,L,fe,te,!1,!0,Em,!1,$),Uv(I,P,L,fe,pe,!0,!0,Em,!1,$)}else{let[te,pe]=I.getStencilConfigForOverlapAndUpdateStencilID(j);Uv(I,P,L,pe,te,!1,!0,Em,!1,$)}}(a,u,m,v,w):o.cb(m)?function(I,P,L,j,B){let $=L.paint.get("background-color"),G=L.paint.get("background-opacity");if(G===0)return;let{isRenderingToTexture:J}=B,te=I.context,pe=te.gl,fe=I.style.projection,de=I.transform,be=de.tileSize,Te=L.paint.get("background-pattern");if(I.isPatternMissing(Te))return;let Se=!Te&&$.a===1&&G===1&&I.opaquePassEnabledForLayer()?"opaque":"translucent";if(I.renderPass!==Se)return;let Ae=Ar.disabled,De=I.getDepthModeForSublayer(0,Se==="opaque"?xr.ReadWrite:xr.ReadOnly),Pe=I.colorModeForRenderPass(),Ue=I.useProgram(Te?"backgroundPattern":"background"),tt=j||xe(de,{tileSize:be,terrain:I.style.map.terrain});Te&&(te.activeTexture.set(pe.TEXTURE0),I.imageManager.bind(I.context));let Ke=L.getCrossfadeParameters();for(let Xe of tt){let Qe=de.getProjectionData({overscaledTileID:Xe,applyGlobeMatrix:!J,applyTerrainMatrix:!0}),Tt=Te?sq(G,I,Te,{tileID:Xe,tileSize:be},Ke):aq(G,$),bt=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Xe),ft=fe.getMeshFromTileID(te,Xe.canonical,!1,!0,"raster");Ue.draw(te,pe.TRIANGLES,De,Ae,Pe,Kr.backCCW,Tt,bt,Qe,L.id,ft.vertexBuffer,ft.indexBuffer,ft.segments)}}(a,0,m,v,w):o.cc(m)&&function(I,P,L,j){let{isRenderingGlobe:B}=j,$=I.context,G=L.implementation,J=I.style.projection,te=I.transform,pe=te.getProjectionDataForCustomLayer(B),fe={farZ:te.farZ,nearZ:te.nearZ,fov:te.fov*Math.PI/180,modelViewProjectionMatrix:te.modelViewProjectionMatrix,projectionMatrix:te.projectionMatrix,shaderData:{variantName:J.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${J.shaderPreludeCode.vertexSource}`,define:J.shaderDefine},defaultProjectionData:pe},de=G.renderingMode?G.renderingMode:"2d";if(I.renderPass==="offscreen"){let be=G.prerender;be&&(I.setCustomLayerDefaults(),$.setColorMode(I.colorModeForRenderPass()),be.call(G,$.gl,fe),$.setDirty(),I.setBaseState())}else if(I.renderPass==="translucent"){I.setCustomLayerDefaults(),$.setColorMode(I.colorModeForRenderPass()),$.setStencilMode(Ar.disabled);let be=de==="3d"?I.getDepthModeFor3D():I.getDepthModeForSublayer(0,xr.ReadOnly);$.setDepthMode(be),G.render($.gl,fe),$.setDirty(),I.setBaseState(),$.bindFramebuffer.set(null)}}(a,0,m,w))}saveTileTexture(a){let u=this._tileTextures[a.size[0]];u?u.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){let u=this._tileTextures[a];return u&&u.length>0?u.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;let u=this.imageManager.getPattern(a.from.toString()),m=this.imageManager.getPattern(a.to.toString());return!u||!m}useProgram(a,u,m=!1,v=[]){this.cache=this.cache||{};let w=!!this.style.map.terrain,I=this.style.projection,P=m?na.projectionMercator:I.shaderPreludeCode,L=m?Mh:I.shaderDefine,j=a+(u?u.cacheKey:"")+`/${m?Yr:I.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(w?"/terrain":"")+(v?`/${v.join("/")}`:"");return this.cache[j]||(this.cache[j]=new Ev(this.context,na[a],u,YI[a],this._showOverdrawInspector,w,P,L,v)),this.cache[j]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ie(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:a,drawingBufferHeight:u}=this.context.gl;return this.width!==a||this.height!==u}}function Tm(b,a){let u,m=!1,v=null,w=null,I=()=>{v=null,m&&(b.apply(w,u),v=setTimeout(I,a),m=!1)};return(...P)=>(m=!0,w=this,u=P,v||I(),v)}class gb{constructor(a){this._getCurrentHash=()=>{let u=window.location.hash.replace("#","");if(this._hashName){let m;return u.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(m=v)}),(m&&m[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{let u=this._getCurrentHash();if(!this._isValidHash(u))return!1;let m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:m,pitch:+(u[4]||0)}),!0},this._updateHashUnthrottled=()=>{let u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{let u=this._getCurrentHash();if(u.length===0)return;let m=u.join("/"),v=m;v.split("&").length>0&&(v=v.split("&")[0]),this._hashName&&(v=`${this._hashName}=${m}`);let w=window.location.hash.replace(v,"");w.startsWith("#&")?w=w.slice(0,1)+w.slice(2):w==="#"&&(w="");let I=window.location.href.replace(/(#.+)?$/,w);I=I.replace("&&","&"),window.history.replaceState(window.history.state,null,I)},this._updateHash=Tm(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(a){let u=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,v),I=Math.round(u.lng*w)/w,P=Math.round(u.lat*w)/w,L=this._map.getBearing(),j=this._map.getPitch(),B="";if(B+=a?`/${I}/${P}/${m}`:`${m}/${P}/${I}`,(L||j)&&(B+="/"+Math.round(10*L)/10),j&&(B+=`/${Math.round(j)}`),this._hashName){let $=this._hashName,G=!1,J=window.location.hash.slice(1).split("&").map(te=>{let pe=te.split("=")[0];return pe===$?(G=!0,`${pe}=${B}`):te}).filter(te=>te);return G||J.push(`${$}=${B}`),`#${J.join("&")}`}return`#${B}`}_isValidHash(a){if(a.length<3||a.some(isNaN))return!1;try{new o.Q(+a[2],+a[1])}catch(w){return!1}let u=+a[0],m=+(a[3]||0),v=+(a[4]||0);return u>=this._map.getMinZoom()&&u<=this._map.getMaxZoom()&&m>=-180&&m<=180&&v>=this._map.getMinPitch()&&v<=this._map.getMaxPitch()}}let Rl={linearity:.3,easing:o.cd(0,0,.3,1)},vb=o.e({deceleration:2500,maxSpeed:1400},Rl),Im=o.e({deceleration:20,maxSpeed:1400},Rl),yb=o.e({deceleration:1e3,maxSpeed:360},Rl),uM=o.e({deceleration:1e3,maxSpeed:90},Rl),cM=o.e({deceleration:1e3,maxSpeed:360},Rl);class hM{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:_.now(),settings:a})}_drainInertiaBuffer(){let a=this._inertiaBuffer,u=_.now();for(;a.length>0&&u-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let u={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:w}of this._inertiaBuffer)u.zoom+=w.zoomDelta||0,u.bearing+=w.bearingDelta||0,u.pitch+=w.pitchDelta||0,u.roll+=w.rollDelta||0,w.panDelta&&u.pan._add(w.panDelta),w.around&&(u.around=w.around),w.pinchAround&&(u.pinchAround=w.pinchAround);let m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(u.pan.mag()){let w=rp(u.pan.mag(),m,o.e({},vb,a||{})),I=u.pan.mult(w.amount/u.pan.mag()),P=this._map.cameraHelper.handlePanInertia(I,this._map.transform);v.center=P.easingCenter,v.offset=P.easingOffset,tp(v,w)}if(u.zoom){let w=rp(u.zoom,m,Im);v.zoom=this._map.transform.zoom+w.amount,tp(v,w)}if(u.bearing){let w=rp(u.bearing,m,yb);v.bearing=this._map.transform.bearing+o.ae(w.amount,-179,179),tp(v,w)}if(u.pitch){let w=rp(u.pitch,m,uM);v.pitch=this._map.transform.pitch+w.amount,tp(v,w)}if(u.roll){let w=rp(u.roll,m,cM);v.roll=this._map.transform.roll+o.ae(w.amount,-179,179),tp(v,w)}if(v.zoom||v.bearing){let w=u.pinchAround===void 0?u.around:u.pinchAround;v.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),o.e(v,{noMoveStart:!0})}}function tp(b,a){(!b.duration||b.duration<a.duration)&&(b.duration=a.duration,b.easing=a.easing)}function rp(b,a,u){let{maxSpeed:m,linearity:v,deceleration:w}=u,I=o.ae(b*v/(a/1e3),-m,m),P=Math.abs(I)/(w*v);return{easing:u.easing,duration:1e3*P,amount:I*(P/2)}}class Ki extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u,m,v={}){m=m instanceof MouseEvent?m:new MouseEvent(a,m);let w=x.mousePos(u.getCanvas(),m),I=u.unproject(w);super(a,o.e({point:w,lngLat:I,originalEvent:m},v)),this._defaultPrevented=!1,this.target=u}}class np extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u,m){let v=a==="touchend"?m.changedTouches:m.touches,w=x.touchPos(u.getCanvasContainer(),v),I=w.map(L=>u.unproject(L)),P=w.reduce((L,j,B,$)=>L.add(j.div($.length)),new o.P(0,0));super(a,{points:w,point:P,lngLats:I,lngLat:u.unproject(P),originalEvent:m}),this._defaultPrevented=!1}}class _b extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u,m){super(a,{originalEvent:m}),this._defaultPrevented=!1}}class fM{constructor(a,u){this._map=a,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new _b(a.type,this._map,a))}mousedown(a,u){return this._mousedownPos=u,this._firePreventable(new Ki(a.type,this._map,a))}mouseup(a){this._map.fire(new Ki(a.type,this._map,a))}click(a,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Ki(a.type,this._map,a))}dblclick(a){return this._firePreventable(new Ki(a.type,this._map,a))}mouseover(a){this._map.fire(new Ki(a.type,this._map,a))}mouseout(a){this._map.fire(new Ki(a.type,this._map,a))}touchstart(a){return this._firePreventable(new np(a.type,this._map,a))}touchmove(a){this._map.fire(new np(a.type,this._map,a))}touchend(a){this._map.fire(new np(a.type,this._map,a))}touchcancel(a){this._map.fire(new np(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pM{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new Ki(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ki("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new Ki(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ip{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.screenPointToLocation(o.P.convert(a),this._map.terrain)}}class xb{constructor(a,u){this._map=a,this._tr=new ip(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,u){this.isEnabled()&&a.shiftKey&&a.button===0&&(x.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(a,u){if(!this._active)return;let m=u;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;let v=this._startPos;this._lastPos=m,this._box||(this._box=x.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));let w=Math.min(v.x,m.x),I=Math.max(v.x,m.x),P=Math.min(v.y,m.y),L=Math.max(v.y,m.y);x.setTransform(this._box,`translate(${w}px,${P}px)`),this._box.style.width=I-w+"px",this._box.style.height=L-P+"px"}mouseupWindow(a,u){if(!this._active||a.button!==0)return;let m=this._startPos,v=u;if(this.reset(),x.suppressClick(),m.x!==v.x||m.y!==v.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:a})),{cameraAnimation:w=>w.fitScreenCoordinates(m,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,u){return this._map.fire(new o.l(a,{originalEvent:u}))}}function Hv(b,a){if(b.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${a.length}`);let u={};for(let m=0;m<b.length;m++)u[b[m].identifier]=a[m];return u}class dM{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,u,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),m.length===this.numTouches&&(this.centroid=function(v){let w=new o.P(0,0);for(let I of v)w._add(I);return w.div(v.length)}(u),this.touches=Hv(m,u)))}touchmove(a,u,m){if(this.aborted||!this.centroid)return;let v=Hv(m,u);for(let w in this.touches){let I=v[w];(!I||I.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(a,u,m){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){let v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class op{constructor(a){this.singleTap=new dM(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,u,m){this.singleTap.touchstart(a,u,m)}touchmove(a,u,m){this.singleTap.touchmove(a,u,m)}touchend(a,u,m){let v=this.singleTap.touchend(a,u,m);if(v){let w=a.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(v)<30;if(w&&I||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class mM{constructor(a){this._tr=new ip(a),this._zoomIn=new op({numTouches:1,numTaps:2}),this._zoomOut=new op({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,u,m){this._zoomIn.touchstart(a,u,m),this._zoomOut.touchstart(a,u,m)}touchmove(a,u,m){this._zoomIn.touchmove(a,u,m),this._zoomOut.touchmove(a,u,m)}touchend(a,u,m){let v=this._zoomIn.touchend(a,u,m),w=this._zoomOut.touchend(a,u,m),I=this._tr;return v?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:I.zoom+1,around:I.unproject(v)},{originalEvent:a})}):w?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:I.zoom-1,around:I.unproject(w)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $o{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){let u=this._moveFunction(...a);if(u.bearingDelta||u.pitchDelta||u.rollDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(a,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=Array.isArray(u)?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,u){if(!this.isEnabled())return;let m=this._lastPoint;if(!m)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);let v=Array.isArray(u)?u[0]:u;return!this._moved&&v.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(m,v))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&x.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let il={0:1,2:2};class ap{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){let u=x.mouseButton(a);this._eventButton=u}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(u,m){let v=il[m];return u.buttons===void 0||(u.buttons&v)!==v}(a,this._eventButton)}isValidEndEvent(a){return x.mouseButton(a)===this._eventButton}}class ol{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}class sp{constructor(a=new ap({checkCorrectEvent:()=>!0}),u=new ol){this.mouseMoveStateManager=a,this.oneFingerTouchMoveStateManager=u}_executeRelevantHandler(a,u,m){return a instanceof MouseEvent?u(a):typeof TouchEvent!="undefined"&&a instanceof TouchEvent?m(a):void 0}startMove(a){this._executeRelevantHandler(a,u=>this.mouseMoveStateManager.startMove(u),u=>this.oneFingerTouchMoveStateManager.startMove(u))}endMove(a){this._executeRelevantHandler(a,u=>this.mouseMoveStateManager.endMove(u),u=>this.oneFingerTouchMoveStateManager.endMove(u))}isValidStartEvent(a){return this._executeRelevantHandler(a,u=>this.mouseMoveStateManager.isValidStartEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidStartEvent(u))}isValidMoveEvent(a){return this._executeRelevantHandler(a,u=>this.mouseMoveStateManager.isValidMoveEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(u))}isValidEndEvent(a){return this._executeRelevantHandler(a,u=>this.mouseMoveStateManager.isValidEndEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidEndEvent(u))}}let Wv=b=>{b.mousedown=b.dragStart,b.mousemoveWindow=b.dragMove,b.mouseup=b.dragEnd,b.contextmenu=a=>{a.preventDefault()}};class gq{constructor(a,u){this._clickTolerance=a.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(a){return a<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(a,u,m){return this._calculateTransform(a,u,m)}touchmove(a,u,m){if(this._active){if(!this._shouldBePrevented(m.length))return a.preventDefault(),this._calculateTransform(a,u,m);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",a)}}touchend(a,u,m){this._calculateTransform(a,u,m),this._active&&this._shouldBePrevented(m.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,u,m){m.length>0&&(this._active=!0);let v=Hv(m,u),w=new o.P(0,0),I=new o.P(0,0),P=0;for(let j in v){let B=v[j],$=this._touches[j];$&&(w._add(B),I._add(B.sub($)),P++,v[j]=B)}if(this._touches=v,this._shouldBePrevented(P)||!I.mag())return;let L=I.div(P);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(P),panDelta:L}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bb{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,u,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([u[0],u[1]]))}touchmove(a,u,m){if(!this._firstTwoTouches)return;a.preventDefault();let[v,w]=this._firstTwoTouches,I=Zv(m,u,v),P=Zv(m,u,w);if(!I||!P)return;let L=this._aroundCenter?null:I.add(P).div(2);return this._move([I,P],L,a)}touchend(a,u,m){if(!this._firstTwoTouches)return;let[v,w]=this._firstTwoTouches,I=Zv(m,u,v),P=Zv(m,u,w);I&&P||(this._active&&x.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Zv(b,a,u){for(let m=0;m<b.length;m++)if(b[m].identifier===u)return a[m]}function wb(b,a){return Math.log(b/a)/Math.LN2}class lp extends bb{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,u){let m=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(wb(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:wb(this._distance,m),pinchAround:u}}}function Ol(b,a){return 180*b.angleWith(a)/Math.PI}class Ft extends bb{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,u,m){let v=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ol(this._vector,v),pinchAround:u}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());let u=25/(Math.PI*this._minDiameter)*360,m=Ol(a,this._startVector);return Math.abs(m)<u}}function Yv(b){return Math.abs(b.y)>Math.abs(b.x)}class Kv extends bb{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,u,m){super.touchstart(a,u,m),this._currentTouchCount=m.length}_start(a){this._lastPoints=a,Yv(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,u,m){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let v=a[0].sub(this._lastPoints[0]),w=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,w,m.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(v.y+w.y)/2*-.5}):void 0}gestureBeginsVertically(a,u,m){if(this._valid!==void 0)return this._valid;let v=a.mag()>=2,w=u.mag()>=2;if(!v&&!w)return;if(!v||!w)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;let I=a.y>0==u.y>0;return Yv(a)&&Yv(u)&&I}}let gM={panStep:100,bearingStep:15,pitchStep:10};class up{constructor(a){this._tr=new ip(a);let u=gM;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let u=0,m=0,v=0,w=0,I=0;switch(a.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:a.shiftKey?m=-1:(a.preventDefault(),w=-1);break;case 39:a.shiftKey?m=1:(a.preventDefault(),w=1);break;case 38:a.shiftKey?v=1:(a.preventDefault(),I=-1);break;case 40:a.shiftKey?v=-1:(a.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:P=>{let L=this._tr;P.easeTo({duration:300,easeId:"keyboardHandler",easing:Mm,zoom:u?Math.round(L.zoom)+u*(a.shiftKey?2:1):L.zoom,bearing:L.bearing+m*this._bearingStep,pitch:L.pitch+v*this._pitchStep,offset:[-w*this._panStep,-I*this._panStep],center:L.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Mm(b){return b*(2-b)}let Eb=4.000244140625;class Br{constructor(a,u){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=a,this._tr=new ip(a),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(a){return!!this._map.cooperativeGestures.isEnabled()&&!(a.ctrlKey||this._map.cooperativeGestures.isBypassed(a))}wheel(a){if(!this.isEnabled())return;if(this._shouldBePrevented(a))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",a);let u=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY,m=_.now(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,u!==0&&u%Eb==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(v*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),a.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=a,this._delta-=u,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let u=x.mousePos(this._map.getCanvas(),a),m=this._tr;this._aroundPoint=this._aroundCenter?m.transform.locationToScreenPoint(o.Q.convert(m.center)):u,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let a=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let P=a.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=P),typeof this._targetZoom=="number"&&(this._targetZoom+=P)}if(this._delta!==0){let P=this._type==="wheel"&&Math.abs(this._delta)>Eb?this._wheelZoomRate:this._defaultZoomRate,L=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&L!==0&&(L=1/L);let j=typeof this._targetZoom!="number"?a.scale:o.ac(this._targetZoom);this._targetZoom=a.getConstrained(a.getCameraLngLat(),o.ah(j*L)).zoom,this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let u=typeof this._targetZoom!="number"?a.zoom:this._targetZoom,m=this._startZoom,v=this._easing,w,I=!1;if(this._type==="wheel"&&m&&v){let P=_.now()-this._lastWheelEventTime,L=Math.min((P+5)/200,1),j=v(L);w=o.B.number(m,u,j),L<1?this._frameId||(this._frameId=!0):I=!0}else w=u,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=w,{noInertia:!0,needsRenderFrame:!I,zoomDelta:w-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let u=o.cf;if(this._prevEase){let m=this._prevEase,v=(_.now()-m.start)/m.duration,w=m.easing(v+.01)-m.easing(v),I=.27/Math.sqrt(w*w+1e-4)*.01,P=Math.sqrt(.0729-I*I);u=o.cd(I,P,.25,1)}return this._prevEase={start:_.now(),duration:a,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Xv{constructor(a,u){this._clickZoom=a,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class vq{constructor(a){this._tr=new ip(a),this.reset()}reset(){this._active=!1}dblclick(a,u){return a.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sb{constructor(){this._tap=new op({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,u,m){if(!this._swipePoint)if(this._tapTime){let v=u[0],w=a.timeStamp-this._tapTime<500,I=this._tapPoint.dist(v)<30;w&&I?m.length>0&&(this._swipePoint=v,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(a,u,m)}touchmove(a,u,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;let v=u[0],w=v.y-this._swipePoint.y;return this._swipePoint=v,a.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(a,u,m)}touchend(a,u,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{let v=this._tap.touchend(a,u,m);v&&(this._tapTime=a.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vM{constructor(a,u,m){this._el=a,this._mousePan=u,this._touchPan=m}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class yM{constructor(a,u,m,v){this._pitchWithRotate=a.pitchWithRotate,this._rollEnabled=a.rollEnabled,this._mouseRotate=u,this._mousePitch=m,this._mouseRoll=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Tb{constructor(a,u,m,v){this._el=a,this._touchZoom=u,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Qv{constructor(a,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=a,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=x.create("div","maplibregl-cooperative-gesture-screen",a);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let m=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=u,this._container.appendChild(v);let w=document.createElement("div");w.className="maplibregl-mobile-message",w.textContent=m,this._container.appendChild(w),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(x.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(a){return a[this._bypassKey]}notifyGestureBlocked(a,u){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:a,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let Am=b=>b.zoom||b.drag||b.roll||b.pitch||b.rotate;class yq extends o.l{}function Jv(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta||b.rollDelta}class _q{constructor(a,u){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,w)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let I=v.type==="renderFrame"?void 0:v,P={needsRenderFrame:!1},L={},j={};for(let{handlerName:G,handler:J,allowed:te}of this._handlers){if(!J.isEnabled())continue;let pe;if(this._blockedByActive(j,te,G))J.reset();else if(J[w||v.type]){if(o.cg(v,w||v.type)){let fe=x.mousePos(this._map.getCanvas(),v);pe=J[w||v.type](v,fe)}else if(o.ch(v,w||v.type)){let fe=this._getMapTouches(v.touches),de=x.touchPos(this._map.getCanvas(),fe);pe=J[w||v.type](v,de,fe)}else o.ci(w||v.type)||(pe=J[w||v.type](v));this.mergeHandlerResult(P,L,pe,G,I),pe&&pe.needsRenderFrame&&this._triggerRenderFrame()}(pe||J.isActive())&&(j[G]=J)}let B={};for(let G in this._previousActiveHandlers)j[G]||(B[G]=I);this._previousActiveHandlers=j,(Object.keys(B).length||Jv(P))&&(this._changes.push([P,L,B]),this._triggerRenderFrame()),(Object.keys(j).length||Jv(P))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:$}=P;$&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],$(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new hM(a),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);let m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(let[v,w,I]of this._listeners)x.addEventListener(v,w,v===document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(let[a,u,m]of this._listeners)x.removeEventListener(a,u,a===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(a){let u=this._map,m=u.getCanvasContainer();this._add("mapEvent",new fM(u,a));let v=u.boxZoom=new xb(u,a);this._add("boxZoom",v),a.interactive&&a.boxZoom&&v.enable();let w=u.cooperativeGestures=new Qv(u,a.cooperativeGestures);this._add("cooperativeGestures",w),a.cooperativeGestures&&w.enable();let I=new mM(u),P=new vq(u);u.doubleClickZoom=new Xv(P,I),this._add("tapZoom",I),this._add("clickZoom",P),a.interactive&&a.doubleClickZoom&&u.doubleClickZoom.enable();let L=new Sb;this._add("tapDragZoom",L);let j=u.touchPitch=new Kv(u);this._add("touchPitch",j),a.interactive&&a.touchPitch&&u.touchPitch.enable(a.touchPitch);let B=()=>u.project(u.getCenter()),$=function({enable:Se,clickTolerance:Ae,aroundCenter:De=!0,minPixelCenterThreshold:Pe=100,rotateDegreesPerPixelMoved:Ue=.8},tt){let Ke=new ap({checkCorrectEvent:Xe=>x.mouseButton(Xe)===0&&Xe.ctrlKey||x.mouseButton(Xe)===2&&!Xe.ctrlKey});return new $o({clickTolerance:Ae,move:(Xe,Qe)=>{let Tt=tt();if(De&&Math.abs(Tt.y-Xe.y)>Pe)return{bearingDelta:o.ce(new o.P(Xe.x,Qe.y),Qe,Tt)};let bt=(Qe.x-Xe.x)*Ue;return De&&Qe.y<Tt.y&&(bt=-bt),{bearingDelta:bt}},moveStateManager:Ke,enable:Se,assignEvents:Wv})}(a,B),G=function({enable:Se,clickTolerance:Ae,pitchDegreesPerPixelMoved:De=-.5}){let Pe=new ap({checkCorrectEvent:Ue=>x.mouseButton(Ue)===0&&Ue.ctrlKey||x.mouseButton(Ue)===2});return new $o({clickTolerance:Ae,move:(Ue,tt)=>({pitchDelta:(tt.y-Ue.y)*De}),moveStateManager:Pe,enable:Se,assignEvents:Wv})}(a),J=function({enable:Se,clickTolerance:Ae,rollDegreesPerPixelMoved:De=.3},Pe){let Ue=new ap({checkCorrectEvent:tt=>x.mouseButton(tt)===2&&tt.ctrlKey});return new $o({clickTolerance:Ae,move:(tt,Ke)=>{let Xe=Pe(),Qe=(Ke.x-tt.x)*De;return Ke.y<Xe.y&&(Qe=-Qe),{rollDelta:Qe}},moveStateManager:Ue,enable:Se,assignEvents:Wv})}(a,B);u.dragRotate=new yM(a,$,G,J),this._add("mouseRotate",$,["mousePitch"]),this._add("mousePitch",G,["mouseRotate","mouseRoll"]),this._add("mouseRoll",J,["mousePitch"]),a.interactive&&a.dragRotate&&u.dragRotate.enable();let te=function({enable:Se,clickTolerance:Ae}){let De=new ap({checkCorrectEvent:Pe=>x.mouseButton(Pe)===0&&!Pe.ctrlKey});return new $o({clickTolerance:Ae,move:(Pe,Ue)=>({around:Ue,panDelta:Ue.sub(Pe)}),activateOnStart:!0,moveStateManager:De,enable:Se,assignEvents:Wv})}(a),pe=new gq(a,u);u.dragPan=new vM(m,te,pe),this._add("mousePan",te),this._add("touchPan",pe,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&u.dragPan.enable(a.dragPan);let fe=new Ft,de=new lp;u.touchZoomRotate=new Tb(m,de,fe,L),this._add("touchRotate",fe,["touchPan","touchZoom"]),this._add("touchZoom",de,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&u.touchZoomRotate.enable(a.touchZoomRotate);let be=u.scrollZoom=new Br(u,()=>this._triggerRenderFrame());this._add("scrollZoom",be,["mousePan"]),a.interactive&&a.scrollZoom&&u.scrollZoom.enable(a.scrollZoom);let Te=u.keyboard=new up(u);this._add("keyboard",Te),a.interactive&&a.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new pM(u))}_add(a,u,m){this._handlers.push({handlerName:a,handler:u,allowed:m}),this._handlersById[a]=u}stop(a){if(!this._updatingCamera){for(let{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(let{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Am(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,u,m){for(let v in a)if(v!==m&&(!u||u.indexOf(v)<0))return!0;return!1}_getMapTouches(a){let u=[];for(let m of a)this._el.contains(m.target)&&u.push(m);return u}mergeHandlerResult(a,u,m,v,w){if(!m)return;o.e(a,m);let I={handlerName:v,originalEvent:m.originalEvent||w};m.zoomDelta!==void 0&&(u.zoom=I),m.panDelta!==void 0&&(u.drag=I),m.rollDelta!==void 0&&(u.roll=I),m.pitchDelta!==void 0&&(u.pitch=I),m.bearingDelta!==void 0&&(u.rotate=I)}_applyChanges(){let a={},u={},m={};for(let[v,w,I]of this._changes)v.panDelta&&(a.panDelta=(a.panDelta||new o.P(0,0))._add(v.panDelta)),v.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+v.pitchDelta),v.rollDelta&&(a.rollDelta=(a.rollDelta||0)+v.rollDelta),v.around!==void 0&&(a.around=v.around),v.pinchAround!==void 0&&(a.pinchAround=v.pinchAround),v.noInertia&&(a.noInertia=v.noInertia),o.e(u,w),o.e(m,I);this._updateMapTransform(a,u,m),this._changes=[]}_updateMapTransform(a,u,m){let v=this._map,w=v._getTransformForUpdate(),I=v.terrain;if(!(Jv(a)||I&&this._terrainMovement))return this._fireEvents(u,m,!0);v._stop(!0);let{panDelta:P,zoomDelta:L,bearingDelta:j,pitchDelta:B,rollDelta:$,around:G,pinchAround:J}=a;J!==void 0&&(G=J),G=G||v.transform.centerPoint,I&&!w.isPointOnMapSurface(G)&&(G=w.centerPoint);let te={panDelta:P,zoomDelta:L,rollDelta:$,pitchDelta:B,bearingDelta:j,around:G};this._map.cameraHelper.useGlobeControls&&!w.isPointOnMapSurface(G)&&(G=w.centerPoint);let pe=G.distSqr(w.centerPoint)<.01?w.center:w.screenPointToLocation(P?G.sub(P):G);I?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(te,w),this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?w.setCenter(w.screenPointToLocation(w.centerPoint.sub(P))):this._map.cameraHelper.handleMapControlsPan(te,w,pe):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(te,w,pe))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(te,w),this._map.cameraHelper.handleMapControlsPan(te,w,pe)),v._applyUpdatedTransform(w),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(u,m,!0)}_fireEvents(a,u,m){let v=Am(this._eventsInProgress),w=Am(a),I={};for(let $ in a){let{originalEvent:G}=a[$];this._eventsInProgress[$]||(I[`${$}start`]=G),this._eventsInProgress[$]=a[$]}!v&&w&&this._fireEvent("movestart",w.originalEvent);for(let $ in I)this._fireEvent($,I[$]);w&&this._fireEvent("move",w.originalEvent);for(let $ in a){let{originalEvent:G}=a[$];this._fireEvent($,G)}let P={},L;for(let $ in this._eventsInProgress){let{handlerName:G,originalEvent:J}=this._eventsInProgress[$];this._handlersById[G].isActive()||(delete this._eventsInProgress[$],L=u[G]||J,P[`${$}end`]=L)}for(let $ in P)this._fireEvent($,P[$]);let j=Am(this._eventsInProgress),B=(v||w)&&!j;if(B&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let $=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&$.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform($)}if(m&&B){this._updatingCamera=!0;let $=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),G=J=>J!==0&&-this._bearingSnap<J&&J<this._bearingSnap;!$||!$.essential&&_.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:L})),G(this._map.getBearing())&&this._map.resetNorth()):(G($.bearing||this._map.getBearing())&&($.bearing=0),$.freezeElevation=!0,this._map.easeTo($,{originalEvent:L})),this._updatingCamera=!1}}_fireEvent(a,u){this._map.fire(new o.l(a,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new yq("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class xq extends o.E{constructor(a,u,m){super(),this._renderFrameCallback=()=>{let v=Math.min((_.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=m.bearingSnap,this.cameraHelper=u,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(a,u){a.apply(this.transform),this.transform=a,this.cameraHelper=u}getCenter(){return new o.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(a,u){return this.jumpTo({center:a},u)}getCenterElevation(){return this.transform.elevation}setCenterElevation(a,u){return this.jumpTo({elevation:a},u),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(a){this._centerClampedToGround=a}panBy(a,u,m){return a=o.P.convert(a).mult(-1),this.panTo(this.transform.center,o.e({offset:a},u),m)}panTo(a,u,m){return this.easeTo(o.e({center:a},u),m)}getZoom(){return this.transform.zoom}setZoom(a,u){return this.jumpTo({zoom:a},u),this}zoomTo(a,u,m){return this.easeTo(o.e({zoom:a},u),m)}zoomIn(a,u){return this.zoomTo(this.getZoom()+1,a,u),this}zoomOut(a,u){return this.zoomTo(this.getZoom()-1,a,u),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(a,u){return a!=this.transform.fov&&(this.transform.setFov(a),this.fire(new o.l("movestart",u)).fire(new o.l("move",u)).fire(new o.l("moveend",u))),this}getBearing(){return this.transform.bearing}setBearing(a,u){return this.jumpTo({bearing:a},u),this}getPadding(){return this.transform.padding}setPadding(a,u){return this.jumpTo({padding:a},u),this}rotateTo(a,u,m){return this.easeTo(o.e({bearing:a},u),m)}resetNorth(a,u){return this.rotateTo(0,o.e({duration:1e3},a),u),this}resetNorthPitch(a,u){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},a),u),this}snapToNorth(a,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,u):this}getPitch(){return this.transform.pitch}setPitch(a,u){return this.jumpTo({pitch:a},u),this}getRoll(){return this.transform.roll}setRoll(a,u){return this.jumpTo({roll:a},u),this}cameraForBounds(a,u){a=At.convert(a).adjustAntiMeridian();let m=u&&u.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),m,u)}_cameraForBoxAndBearing(a,u,m,v){let w={top:0,bottom:0,right:0,left:0};if(typeof(v=o.e({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){let j=v.padding;v.padding={top:j,bottom:j,right:j,left:j}}let I=o.e(w,v.padding);v.padding=I;let P=this.transform,L=new At(a,u);return this.cameraHelper.cameraForBoxAndBearing(v,I,L,m,P)}fitBounds(a,u,m){return this._fitInternal(this.cameraForBounds(a,u),u,m)}fitScreenCoordinates(a,u,m,v,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(a)),this.transform.screenPointToLocation(o.P.convert(u)),m,v),v,w)}_fitInternal(a,u,m){return a?(delete(u=o.e(a,u)).padding,u.linear?this.easeTo(u,m):this.flyTo(u,m)):this}jumpTo(a,u){this.stop();let m=this._getTransformForUpdate(),v=!1,w=!1,I=!1,P=m.zoom;this.cameraHelper.handleJumpToCenterZoom(m,a);let L=m.zoom!==P;return"elevation"in a&&m.elevation!==+a.elevation&&m.setElevation(+a.elevation),"bearing"in a&&m.bearing!==+a.bearing&&(v=!0,m.setBearing(+a.bearing)),"pitch"in a&&m.pitch!==+a.pitch&&(w=!0,m.setPitch(+a.pitch)),"roll"in a&&m.roll!==+a.roll&&(I=!0,m.setRoll(+a.roll)),a.padding==null||m.isPaddingEqual(a.padding)||m.setPadding(a.padding),this._applyUpdatedTransform(m),this.fire(new o.l("movestart",u)).fire(new o.l("move",u)),L&&this.fire(new o.l("zoomstart",u)).fire(new o.l("zoom",u)).fire(new o.l("zoomend",u)),v&&this.fire(new o.l("rotatestart",u)).fire(new o.l("rotate",u)).fire(new o.l("rotateend",u)),w&&this.fire(new o.l("pitchstart",u)).fire(new o.l("pitch",u)).fire(new o.l("pitchend",u)),I&&this.fire(new o.l("rollstart",u)).fire(new o.l("roll",u)).fire(new o.l("rollend",u)),this.fire(new o.l("moveend",u))}calculateCameraOptionsFromTo(a,u,m,v=0){let w=o.$.fromLngLat(a,u),I=o.$.fromLngLat(m,v),P=I.x-w.x,L=I.y-w.y,j=I.z-w.z,B=Math.hypot(P,L,j);if(B===0)throw new Error("Can't calculate camera options with same From and To");let $=Math.hypot(P,L),G=o.ah(this.transform.cameraToCenterDistance/B/this.transform.tileSize),J=180*Math.atan2(P,-L)/Math.PI,te=180*Math.acos($/B)/Math.PI;return te=j<0?90-te:90+te,{center:I.toLngLat(),elevation:v,zoom:G,pitch:te,bearing:J}}calculateCameraOptionsFromCameraLngLatAltRotation(a,u,m,v,w){let I=this.transform.calculateCenterFromCameraLngLatAlt(a,u,m,v);return{center:I.center,elevation:I.elevation,zoom:I.zoom,bearing:m,pitch:v,roll:w}}easeTo(a,u){this._stop(!1,a.easeId),((a=o.e({offset:[0,0],duration:500,easing:o.cf},a)).animate===!1||!a.essential&&_.prefersReducedMotion)&&(a.duration=0);let m=this._getTransformForUpdate(),v=this.getBearing(),w=m.pitch,I=m.roll,P="bearing"in a?this._normalizeBearing(a.bearing,v):v,L="pitch"in a?+a.pitch:w,j="roll"in a?this._normalizeBearing(a.roll,I):I,B="padding"in a?a.padding:m.padding,$=o.P.convert(a.offset),G,J;a.around&&(G=o.Q.convert(a.around),J=m.locationToScreenPoint(G));let te={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},pe=this.cameraHelper.handleEaseTo(m,{bearing:P,pitch:L,roll:j,padding:B,around:G,aroundPoint:J,offsetAsPoint:$,offset:a.offset,zoom:a.zoom,center:a.center});return this._rotating=this._rotating||v!==P,this._pitching=this._pitching||L!==w,this._rolling=this._rolling||j!==I,this._padding=!m.isPaddingEqual(B),this._zooming=this._zooming||pe.isZooming,this._easeId=a.easeId,this._prepareEase(u,a.noMoveStart,te),this.terrain&&this._prepareElevation(pe.elevationCenter),this._ease(fe=>{pe.easeFunc(fe),this.terrain&&!a.freezeElevation&&this._updateElevation(fe),this._applyUpdatedTransform(m),this._fireMoveEvents(u)},fe=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(u,fe)},a),this}_prepareEase(a,u,m={}){this._moving=!0,u||m.moving||this.fire(new o.l("movestart",a)),this._zooming&&!m.zooming&&this.fire(new o.l("zoomstart",a)),this._rotating&&!m.rotating&&this.fire(new o.l("rotatestart",a)),this._pitching&&!m.pitching&&this.fire(new o.l("pitchstart",a)),this._rolling&&!m.rolling&&this.fire(new o.l("rollstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&u!==this._elevationTarget){let m=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(m-(u-(m*a+this._elevationStart))/(1-a)),this._elevationTarget=u}this.transform.setElevation(o.B.number(this._elevationStart,this._elevationTarget,a))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(a){if(!this.terrain&&a.elevation>=0&&a.pitch<=90)return{};let u=a.getCameraLngLat(),m=a.getCameraAltitude(),v=this.terrain?this.terrain.getElevationForLngLatZoom(u,a.zoom):0;if(m<v){let w=this.calculateCameraOptionsFromTo(u,v,a.center,a.elevation);return{pitch:w.pitch,zoom:w.zoom}}return{}}_applyUpdatedTransform(a){let u=[];if(u.push(v=>this._elevateCameraIfInsideTerrain(v)),this.transformCameraUpdate&&u.push(v=>this.transformCameraUpdate(v)),!u.length)return;let m=a.clone();for(let v of u){let w=m.clone(),{center:I,zoom:P,roll:L,pitch:j,bearing:B,elevation:$}=v(w);I&&w.setCenter(I),$!==void 0&&w.setElevation($),P!==void 0&&w.setZoom(P),L!==void 0&&w.setRoll(L),j!==void 0&&w.setPitch(j),B!==void 0&&w.setBearing(B),m.apply(w)}this.transform.apply(m)}_fireMoveEvents(a){this.fire(new o.l("move",a)),this._zooming&&this.fire(new o.l("zoom",a)),this._rotating&&this.fire(new o.l("rotate",a)),this._pitching&&this.fire(new o.l("pitch",a)),this._rolling&&this.fire(new o.l("roll",a))}_afterEase(a,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;let m=this._zooming,v=this._rotating,w=this._pitching,I=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,m&&this.fire(new o.l("zoomend",a)),v&&this.fire(new o.l("rotateend",a)),w&&this.fire(new o.l("pitchend",a)),I&&this.fire(new o.l("rollend",a)),this.fire(new o.l("moveend",a))}flyTo(a,u){if(!a.essential&&_.prefersReducedMotion){let Qe=o.O(a,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Qe,u)}this.stop(),a=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cf},a);let m=this._getTransformForUpdate(),v=m.bearing,w=m.pitch,I=m.roll,P=m.padding,L="bearing"in a?this._normalizeBearing(a.bearing,v):v,j="pitch"in a?+a.pitch:w,B="roll"in a?this._normalizeBearing(a.roll,I):I,$="padding"in a?a.padding:m.padding,G=o.P.convert(a.offset),J=m.centerPoint.add(G),te=m.screenPointToLocation(J),pe=this.cameraHelper.handleFlyTo(m,{bearing:L,pitch:j,roll:B,padding:$,locationAtOffset:te,offsetAsPoint:G,center:a.center,minZoom:a.minZoom,zoom:a.zoom}),fe=a.curve,de=Math.max(m.width,m.height),be=de/pe.scaleOfZoom,Te=pe.pixelPathLength;typeof pe.scaleOfMinZoom=="number"&&(fe=Math.sqrt(de/pe.scaleOfMinZoom/Te*2));let Se=fe*fe;function Ae(Qe){let Tt=(be*be-de*de+(Qe?-1:1)*Se*Se*Te*Te)/(2*(Qe?be:de)*Se*Te);return Math.log(Math.sqrt(Tt*Tt+1)-Tt)}function De(Qe){return(Math.exp(Qe)-Math.exp(-Qe))/2}function Pe(Qe){return(Math.exp(Qe)+Math.exp(-Qe))/2}let Ue=Ae(!1),tt=function(Qe){return Pe(Ue)/Pe(Ue+fe*Qe)},Ke=function(Qe){return de*((Pe(Ue)*(De(Tt=Ue+fe*Qe)/Pe(Tt))-De(Ue))/Se)/Te;var Tt},Xe=(Ae(!0)-Ue)/fe;if(Math.abs(Te)<2e-6||!isFinite(Xe)){if(Math.abs(de-be)<1e-6)return this.easeTo(a,u);let Qe=be<de?-1:1;Xe=Math.abs(Math.log(be/de))/fe,Ke=()=>0,tt=Tt=>Math.exp(Qe*fe*Tt)}return a.duration="duration"in a?+a.duration:1e3*Xe/("screenSpeed"in a?+a.screenSpeed/fe:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=v!==L,this._pitching=j!==w,this._rolling=B!==I,this._padding=!m.isPaddingEqual($),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(pe.targetCenter),this._ease(Qe=>{let Tt=Qe*Xe,bt=1/tt(Tt),ft=Ke(Tt);this._rotating&&m.setBearing(o.B.number(v,L,Qe)),this._pitching&&m.setPitch(o.B.number(w,j,Qe)),this._rolling&&m.setRoll(o.B.number(I,B,Qe)),this._padding&&(m.interpolatePadding(P,$,Qe),J=m.centerPoint.add(G)),pe.easeFunc(Qe,bt,ft,J),this.terrain&&!a.freezeElevation&&this._updateElevation(Qe),this._applyUpdatedTransform(m),this._fireMoveEvents(u)},()=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(u)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,u){var m;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,u)}return a||(m=this.handlers)===null||m===void 0||m.stop(!1),this}_ease(a,u,m){m.animate===!1||m.duration===0?(a(1),u()):(this._easeStart=_.now(),this._easeOptions=m,this._onEaseFrame=a,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,u){a=o.aL(a,-180,180);let m=Math.abs(a-u);return Math.abs(a-360-u)<m&&(a-=360),Math.abs(a+360-u)<m&&(a+=360),a}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(o.Q.convert(a),this.transform.tileZoom):null}}let Pu={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class Gn{constructor(a=Pu){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=x.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=x.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=x.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,u){let m=this._map._getUIString(`AttributionControl.${u}`);a.title=m,a.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(v=>typeof v!="string"?"":v)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){let v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}let u=this._map.style.sourceCaches;for(let v in u){let w=u[v];if(w.used||w.usedForTerrain){let I=w.getSource();I.attribution&&a.indexOf(I.attribution)<0&&a.push(I.attribution)}}a=a.filter(v=>String(v).trim()),a.sort((v,w)=>v.length-w.length),a=a.filter((v,w)=>{for(let I=w+1;I<a.length;I++)if(a[I].indexOf(v)>=0)return!1;return!0});let m=a.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,a.length?(this._innerContainer.innerHTML=x.sanitize(m),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Cm{constructor(a={}){this._updateCompact=()=>{let u=this._container.children;if(u.length){let m=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=x.create("div","maplibregl-ctrl");let u=x.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){x.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ib{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){let u=++this._id;return this._queue.push({callback:a,id:u,cancelled:!1}),u}remove(a){let u=this._currentlyRunning,m=u?this._queue.concat(u):this._queue;for(let v of m)if(v.id===a)return void(v.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let u=this._currentlyRunning=this._queue;this._queue=[];for(let m of u)if(!m.cancelled&&(m.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var _M=o.aG([{name:"a_pos3d",type:"Int16",components:3}]);class xM extends o.E{constructor(a){super(),this._lastTilesetChange=_.now(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=a._source.tileSize*GM(2,this.deltaZoom),a.usedForTerrain=!0,a.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,u){this.sourceCache.update(a,u),this._renderableTilesKeys=[];let m={};for(let v of xe(a,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))m[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.terrainRttPosMatrix32f=new Float64Array(16),o.bQ(v.terrainRttPosMatrix32f,0,o.Z,o.Z,0,0,1),this._tiles[v.key]=new di(v,this.tileSize),this._lastTilesetChange=_.now());for(let v in this._tiles)m[v]||delete this._tiles[v]}freeRtt(a){for(let u in this._tiles){let m=this._tiles[u];(!a||m.tileID.equals(a)||m.tileID.isChildOf(a)||a.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a,u){return u?this._getTerrainCoordsForTileRanges(a,u):this._getTerrainCoordsForRegularTile(a)}_getTerrainCoordsForRegularTile(a){let u={};for(let m of this._renderableTilesKeys){let v=this._tiles[m].tileID,w=a.clone(),I=o.b2();if(v.canonical.equals(a.canonical))o.bQ(I,0,o.Z,o.Z,0,0,1);else if(v.canonical.isChildOf(a.canonical)){let P=v.canonical.z-a.canonical.z,L=v.canonical.x-(v.canonical.x>>P<<P),j=v.canonical.y-(v.canonical.y>>P<<P),B=o.Z>>P;o.bQ(I,0,B,B,0,0,1),o.L(I,I,[-L*B,-j*B,0])}else{if(!a.canonical.isChildOf(v.canonical))continue;{let P=a.canonical.z-v.canonical.z,L=a.canonical.x-(a.canonical.x>>P<<P),j=a.canonical.y-(a.canonical.y>>P<<P),B=o.Z>>P;o.bQ(I,0,o.Z,o.Z,0,0,1),o.L(I,I,[L*B,j*B,0]),o.M(I,I,[1/GM(2,P),1/GM(2,P),0])}}w.terrainRttPosMatrix32f=new Float32Array(I),u[m]=w}return u}_getTerrainCoordsForTileRanges(a,u){let m={};for(let v of this._renderableTilesKeys){let w=this._tiles[v].tileID;if(!this._isWithinTileRanges(w,u))continue;let I=a.clone(),P=o.b2();if(w.canonical.z===a.canonical.z){let L=a.canonical.x-w.canonical.x,j=a.canonical.y-w.canonical.y;o.bQ(P,0,o.Z,o.Z,0,0,1),o.L(P,P,[L*o.Z,j*o.Z,0])}else if(w.canonical.z>a.canonical.z){let L=w.canonical.z-a.canonical.z,j=w.canonical.x-(w.canonical.x>>L<<L),B=w.canonical.y-(w.canonical.y>>L<<L),$=a.canonical.x-(w.canonical.x>>L),G=a.canonical.y-(w.canonical.y>>L),J=o.Z>>L;o.bQ(P,0,J,J,0,0,1),o.L(P,P,[-j*J+$*o.Z,-B*J+G*o.Z,0])}else{let L=a.canonical.z-w.canonical.z,j=a.canonical.x-(a.canonical.x>>L<<L),B=a.canonical.y-(a.canonical.y>>L<<L),$=(a.canonical.x>>L)-w.canonical.x,G=(a.canonical.y>>L)-w.canonical.y,J=o.Z<<L;o.bQ(P,0,J,J,0,0,1),o.L(P,P,[j*o.Z+$*J,B*o.Z+G*J,0])}I.terrainRttPosMatrix32f=new Float32Array(P),m[v]=I}return m}getSourceTile(a,u){let m=this.sourceCache._source,v=a.overscaledZ-this.deltaZoom;if(v>m.maxzoom&&(v=m.maxzoom),v<m.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(v).key);let w=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!w||!w.dem)&&u)for(;v>=m.minzoom&&(!w||!w.dem);)w=this.sourceCache.getTileByID(a.scaledTo(v--).key);return w}anyTilesAfterTime(a=Date.now()){return this._lastTilesetChange>=a}_isWithinTileRanges(a,u){return u[a.canonical.z]&&a.canonical.x>=u[a.canonical.z].minTileX&&a.canonical.x<=u[a.canonical.z].maxTileX&&a.canonical.y>=u[a.canonical.z].minTileY&&a.canonical.y<=u[a.canonical.z].maxTileY}}class bM{constructor(a,u,m){this._meshCache={},this.painter=a,this.sourceCache=new xM(u),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,u,m,v=o.Z){var w;if(!(u>=0&&u<v&&m>=0&&m<v))return 0;let I=this.getTerrainData(a),P=(w=I.tile)===null||w===void 0?void 0:w.dem;if(!P)return 0;let L=o.cj([],[u/v*o.Z,m/v*o.Z],I.u_terrain_matrix),j=[L[0]*P.dim,L[1]*P.dim],B=Math.floor(j[0]),$=Math.floor(j[1]),G=j[0]-B,J=j[1]-$;return P.get(B,$)*(1-G)*(1-J)+P.get(B+1,$)*G*(1-J)+P.get(B,$+1)*(1-G)*J+P.get(B+1,$+1)*G*J}getElevationForLngLatZoom(a,u){if(!o.ck(u,a.wrap()))return 0;let{tileID:m,mercatorX:v,mercatorY:w}=this._getOverscaledTileIDFromLngLatZoom(a,u);return this.getElevation(m,v%o.Z,w%o.Z,o.Z)}getElevation(a,u,m,v=o.Z){return this.getDEMElevation(a,u,m,v)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){let v=this.painter.context,w=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ie(v,w,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ie(v,new o.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ad([])}let u=this.sourceCache.getSourceTile(a,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){let v=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new ie(v,u.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),u.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}let m=u&&u+u.tileID.key+a.key;if(m&&!this._demMatrixCache[m]){let v=this.sourceCache.sourceCache._source.maxzoom,w=a.canonical.z-u.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=v?w=a.canonical.z-v:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let I=a.canonical.x-(a.canonical.x>>w<<w),P=a.canonical.y-(a.canonical.y>>w<<w),L=o.cl(new Float64Array(16),[1/(o.Z<<w),1/(o.Z<<w),0]);o.L(L,L,[I*o.Z,P*o.Z,0]),this._demMatrixCache[a.key]={matrix:L,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(a){let u=this.painter,m=u.width/devicePixelRatio,v=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ie(u.context,{width:m,height:v,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ie(u.context,{width:m,height:v,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(m,v,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,m,v))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let w=0,I=0;w<this._coordsTextureSize;w++)for(let P=0;P<this._coordsTextureSize;P++,I+=4)u[I+0]=255&P,u[I+1]=255&w,u[I+2]=P>>8<<4|w>>8,u[I+3]=0;let m=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),v=new ie(a,m,a.gl.RGBA,{premultiply:!1});return v.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);let u=new Uint8Array(4),m=this.painter.context,v=m.gl,w=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),I=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),P=Math.round(this.painter.height/devicePixelRatio);m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(w,P-I-1,1,1,v.RGBA,v.UNSIGNED_BYTE,u),m.bindFramebuffer.set(null);let L=u[0]+(u[2]>>4<<8),j=u[1]+((15&u[2])<<8),B=this.coordsIndex[255-u[3]],$=B&&this.sourceCache.getTileByID(B);if(!$)return null;let G=this._coordsTextureSize,J=(1<<$.tileID.canonical.z)*G;return new o.$(($.tileID.canonical.x*G+L)/J+$.tileID.wrap,($.tileID.canonical.y*G+j)/J,this.getElevation($.tileID,L,j,G))}depthAtPoint(a){let u=new Uint8Array(4),m=this.painter.context,v=m.gl;return m.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,u),m.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(a){var u;let m=((u=this.painter.style.projection)===null||u===void 0?void 0:u.transitionState)>0,v=m&&a.canonical.y===0,w=m&&a.canonical.y===(1<<a.canonical.z)-1,I=`m_${v?"n":""}_${w?"s":""}`;if(this._meshCache[I])return this._meshCache[I];let P=this.painter.context,L=new o.cm,j=new o.aK,B=this.meshSize,$=o.Z/B,G=B*B;for(let Pe=0;Pe<=B;Pe++)for(let Ue=0;Ue<=B;Ue++)L.emplaceBack(Ue*$,Pe*$,0);for(let Pe=0;Pe<G;Pe+=B+1)for(let Ue=0;Ue<B;Ue++)j.emplaceBack(Ue+Pe,B+Ue+Pe+1,B+Ue+Pe+2),j.emplaceBack(Ue+Pe,B+Ue+Pe+2,Ue+Pe+1);let J=L.length,te=J+(B+1),pe=(B+1)*B,fe=v?o.b9:0,de=v?0:1,be=w?o.ba:o.Z,Te=w?0:1;for(let Pe=0;Pe<=B;Pe++)L.emplaceBack(Pe*$,fe,de);for(let Pe=0;Pe<=B;Pe++)L.emplaceBack(Pe*$,be,Te);for(let Pe=0;Pe<B;Pe++)j.emplaceBack(pe+Pe,te+Pe,te+Pe+1),j.emplaceBack(pe+Pe,te+Pe+1,pe+Pe+1),j.emplaceBack(0+Pe,J+Pe+1,J+Pe),j.emplaceBack(0+Pe,0+Pe+1,J+Pe+1);let Se=L.length,Ae=Se+2*(B+1);for(let Pe of[0,1])for(let Ue=0;Ue<=B;Ue++)for(let tt of[0,1])L.emplaceBack(Pe*o.Z,Ue*$,tt);for(let Pe=0;Pe<2*B;Pe+=2)j.emplaceBack(Se+Pe,Se+Pe+1,Se+Pe+3),j.emplaceBack(Se+Pe,Se+Pe+3,Se+Pe+2),j.emplaceBack(Ae+Pe,Ae+Pe+3,Ae+Pe+1),j.emplaceBack(Ae+Pe,Ae+Pe+2,Ae+Pe+3);let De=new $f(P.createVertexBuffer(L,_M.members),P.createIndexBuffer(j),o.aJ.simpleSegment(0,0,L.length,j.length));return this._meshCache[I]=De,De}getMeshFrameDelta(a){return 2*Math.PI*o.bu/Math.pow(2,Math.max(a,0))/5}getMinTileElevationForLngLatZoom(a,u){var m;let{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(a,u);return(m=this.getMinMaxElevation(v).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(a){let u=this.getTerrainData(a).tile,m={minElevation:null,maxElevation:null};return u&&u.dem&&(m.minElevation=u.dem.min*this.exaggeration,m.maxElevation=u.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(a,u){let m=o.$.fromLngLat(a.wrap()),v=(1<<u)*o.Z,w=m.x*v,I=m.y*v,P=Math.floor(w/o.Z),L=Math.floor(I/o.Z);return{tileID:new o.Y(u,0,u,P,L),mercatorX:w,mercatorY:I}}}class bq{constructor(a,u,m){this._context=a,this._size=u,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){let u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new ie(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(m.texture),{id:a,fbo:u,texture:m,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>a.id!==u),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(let u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(let a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}let aa={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ey{constructor(a,u){this.painter=a,this.terrain=u,this.pool=new bq(a.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(m=>!a._layers[m].isHidden(u)),this._coordsAscending={};for(let m in a.sourceCaches){this._coordsAscending[m]={};let v=a.sourceCaches[m].getVisibleCoordinates(),w=a.sourceCaches[m].getSource(),I=w instanceof yr?w.terrainTileRanges:null;for(let P of v){let L=this.terrain.sourceCache.getTerrainCoords(P,I);for(let j in L)this._coordsAscending[m][j]||(this._coordsAscending[m][j]=[]),this._coordsAscending[m][j].push(L[j])}}this._coordsAscendingStr={};for(let m of a._order){let v=a._layers[m],w=v.source;if(aa[v.type]&&!this._coordsAscendingStr[w]){this._coordsAscendingStr[w]={};for(let I in this._coordsAscending[w])this._coordsAscendingStr[w][I]=this._coordsAscending[w][I].map(P=>P.key).sort().join()}}for(let m of this._renderableTiles)for(let v in this._coordsAscendingStr){let w=this._coordsAscendingStr[v][m.tileID.key];w&&w!==m.rttCoords[v]&&(m.rtt=[])}}renderLayer(a,u){if(a.isHidden(this.painter.transform.zoom))return!1;let m=Object.assign(Object.assign({},u),{isRenderingToTexture:!0}),v=a.type,w=this.painter,I=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(aa[v]&&(this._prevType&&aa[this._prevType]||this._stacks.push([]),this._prevType=v,this._stacks[this._stacks.length-1].push(a.id),!I))return!0;if(aa[this._prevType]||aa[v]&&I){this._prevType=v;let P=this._stacks.length-1,L=this._stacks[P]||[];for(let j of this._renderableTiles){if(this.pool.isFull()&&(bc(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[P]){let $=this.pool.getObjectForId(j.rtt[P].id);if($.stamp===j.rtt[P].stamp){this.pool.useObject($);continue}}let B=this.pool.getOrCreateFreeObject();this.pool.useObject(B),this.pool.stampObject(B),j.rtt[P]={id:B.id,stamp:B.stamp},w.context.bindFramebuffer.set(B.fbo.framebuffer),w.context.clear({color:o.b7.transparent,stencil:0}),w.currentStencilSource=void 0;for(let $=0;$<L.length;$++){let G=w.style._layers[L[$]],J=G.source?this._coordsAscending[G.source][j.tileID.key]:[j.tileID];w.context.viewport.set([0,0,B.fbo.width,B.fbo.height]),w._renderTileClippingMasks(G,J,!0),w.renderLayer(w,w.style.sourceCaches[G.source],G,J,m),G.source&&(j.rttCoords[G.source]=this._coordsAscendingStr[G.source][j.tileID.key])}}return bc(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects(),aa[v]}return!1}}let Zt={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},sr=l,Pm={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Pu,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Mb={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Ab{constructor(a,u,m=!1){this.mousedown=w=>{this.startMove(w,x.mousePos(this.element,w)),x.addEventListener(window,"mousemove",this.mousemove),x.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.move(w,x.mousePos(this.element,w))},this.mouseup=w=>{this._rotatePitchHanlder.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,w.targetTouches)[0],this.startMove(w,this._startPos),x.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,w.targetTouches)[0],this.move(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=u;let v=new sp;this._rotatePitchHanlder=new $o({clickTolerance:3,move:(w,I)=>{let P=u.getBoundingClientRect(),L=new o.P((P.bottom-P.top)/2,(P.right-P.left)/2);return{bearingDelta:o.ce(new o.P(w.x,I.y),I,L),pitchDelta:m?-.5*(I.y-w.y):void 0}},moveStateManager:v,enable:!0,assignEvents:()=>{}}),this.map=a,x.addEventListener(u,"mousedown",this.mousedown),x.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(u,"touchcancel",this.reset)}startMove(a,u){this._rotatePitchHanlder.dragStart(a,u),x.disableDrag()}move(a,u){let m=this.map,{bearingDelta:v,pitchDelta:w}=this._rotatePitchHanlder.dragMove(a,u)||{};v&&m.setBearing(m.getBearing()+v),w&&m.setPitch(m.getPitch()+w)}off(){let a=this.element;x.removeEventListener(a,"mousedown",this.mousedown),x.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.removeEventListener(window,"touchend",this.touchend),x.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){x.enableDrag(),x.removeEventListener(window,"mousemove",this.mousemove),x.removeEventListener(window,"mouseup",this.mouseup),x.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.removeEventListener(window,"touchend",this.touchend)}}let Bi;function Cb(b,a,u,m=!1){if(m||!u.getCoveringTilesDetailsProvider().allowWorldCopies())return b==null?void 0:b.wrap();let v=new o.Q(b.lng,b.lat);if(b=new o.Q(b.lng,b.lat),a){let w=new o.Q(b.lng-360,b.lat),I=new o.Q(b.lng+360,b.lat),P=u.locationToScreenPoint(b).distSqr(a);u.locationToScreenPoint(w).distSqr(a)<P?b=w:u.locationToScreenPoint(I).distSqr(a)<P&&(b=I)}for(;Math.abs(b.lng-u.center.lng)>180;){let w=u.locationToScreenPoint(b);if(w.x>=0&&w.y>=0&&w.x<=u.width&&w.y<=u.height)break;b.lng>u.center.lng?b.lng-=360:b.lng+=360}return b.lng!==v.lng&&u.isPointOnMapSurface(u.locationToScreenPoint(b))?b:v}let Es={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function wM(b,a,u){let m=b.classList;for(let v in Es)m.remove(`maplibregl-${u}-anchor-${v}`);m.add(`maplibregl-${u}-anchor-${a}`)}class kh extends o.E{constructor(a){if(super(),this._onKeyPress=u=>{let m=u.code,v=u.charCode||u.keyCode;m!=="Space"&&m!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=u=>{let m=u.originalEvent.target,v=this._element;this._popup&&(m===v||v.contains(m))&&this.togglePopup()},this._update=u=>{if(!this._map)return;let m=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=Cb(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,`${Es[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${v}`),_.frameAsync(new AbortController).then(()=>{this._updateOpacity(u&&u.type==="moveend")}).catch(()=>{})},this._onMove=u=>{if(!this._isDragging){let m=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._subpixelPositioning=a&&a.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(a==null?void 0:a.opacity,a==null?void 0:a.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=o.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div");let u=x.createNS("http://www.w3.org/2000/svg","svg"),m=41,v=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${m}px`),u.setAttributeNS(null,"width",`${v}px`),u.setAttributeNS(null,"viewBox",`0 0 ${v} ${m}`);let w=x.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");let I=x.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill-rule","nonzero");let P=x.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(3.0, 29.0)"),P.setAttributeNS(null,"fill","#000000");let L=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let de of L){let be=x.createNS("http://www.w3.org/2000/svg","ellipse");be.setAttributeNS(null,"opacity","0.04"),be.setAttributeNS(null,"cx","10.5"),be.setAttributeNS(null,"cy","5.80029008"),be.setAttributeNS(null,"rx",de.rx),be.setAttributeNS(null,"ry",de.ry),P.appendChild(be)}let j=x.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill",this._color);let B=x.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),j.appendChild(B);let $=x.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"opacity","0.25"),$.setAttributeNS(null,"fill","#000000");let G=x.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),$.appendChild(G);let J=x.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(6.0, 7.0)"),J.setAttributeNS(null,"fill","#FFFFFF");let te=x.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(8.0, 8.0)");let pe=x.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#000000"),pe.setAttributeNS(null,"opacity","0.25"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962");let fe=x.createNS("http://www.w3.org/2000/svg","circle");fe.setAttributeNS(null,"fill","#FFFFFF"),fe.setAttributeNS(null,"cx","5.5"),fe.setAttributeNS(null,"cy","5.5"),fe.setAttributeNS(null,"r","5.4999962"),te.appendChild(pe),te.appendChild(fe),I.appendChild(P),I.appendChild(j),I.appendChild($),I.appendChild(J),I.appendChild(te),u.appendChild(I),u.setAttributeNS(null,"height",m*this._scale+"px"),u.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(u),this._offset=o.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),wM(this._element,this._anchor,"marker"),a&&a.className)for(let u of a.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(a){return this.remove(),this._map=a,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",a._getUIString("Marker.Title")),a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),a.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=o.Q.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){let v=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(a){return this._subpixelPositioning=a,this}getPopup(){return this._popup}togglePopup(){let a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var u,m;let v=(u=this._map)===null||u===void 0?void 0:u.terrain,w=this._map.transform.isLocationOccluded(this._lngLat);if(!v||w){let J=w?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==J&&(this._element.style.opacity=J))}if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let I=this._map,P=I.terrain.depthAtPoint(this._pos),L=I.terrain.getElevationForLngLatZoom(this._lngLat,I.transform.tileZoom);if(I.transform.lngLatToCameraDepth(this._lngLat,L)-P<.006)return void(this._element.style.opacity=this._opacity);let j=-this._offset.y/I.transform.pixelsPerMeter,B=Math.sin(I.getPitch()*Math.PI/180)*j,$=I.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),G=I.transform.lngLatToCameraDepth(this._lngLat,L+B)-$>.006;!((m=this._popup)===null||m===void 0)&&m.isOpen()&&G&&this._popup.remove(),this._element.style.opacity=G?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=o.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,u){return(this._opacity===void 0||a===void 0&&u===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),a!==void 0&&(this._opacity=a),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}let gi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ni=0,cp=!1,Rm={maxWidth:100,unit:"metric"};function Om(b,a,u){let m=u&&u.maxWidth||100,v=b._container.clientHeight/2,w=b._container.clientWidth/2,I=b.unproject([w-m/2,v]),P=b.unproject([w+m/2,v]),L=Math.round(b.project(P).x-b.project(I).x),j=Math.min(m,L,b._container.clientWidth),B=I.distanceTo(P);if(u&&u.unit==="imperial"){let $=3.2808*B;$>5280?qh(a,j,$/5280,b._getUIString("ScaleControl.Miles")):qh(a,j,$,b._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?qh(a,j,B/1852,b._getUIString("ScaleControl.NauticalMiles")):B>=1e3?qh(a,j,B/1e3,b._getUIString("ScaleControl.Kilometers")):qh(a,j,B,b._getUIString("ScaleControl.Meters"))}function qh(b,a,u,m){let v=function(w){let I=Math.pow(10,`${Math.floor(w)}`.length-1),P=w/I;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(L){let j=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10));return Math.round(L*j)/j}(P),I*P}(u);b.style.width=a*(v/u)+"px",b.innerHTML=`${v}&nbsp;${m}`}let Pb={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Rb=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function hp(b){if(b){if(typeof b=="number"){let a=Math.round(Math.abs(b)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,b),"top-left":new o.P(a,a),"top-right":new o.P(-a,a),bottom:new o.P(0,-b),"bottom-left":new o.P(a,-a),"bottom-right":new o.P(-a,-a),left:new o.P(b,0),right:new o.P(-b,0)}}if(b instanceof o.P||Array.isArray(b)){let a=o.P.convert(b);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:o.P.convert(b.center||[0,0]),top:o.P.convert(b.top||[0,0]),"top-left":o.P.convert(b["top-left"]||[0,0]),"top-right":o.P.convert(b["top-right"]||[0,0]),bottom:o.P.convert(b.bottom||[0,0]),"bottom-left":o.P.convert(b["bottom-left"]||[0,0]),"bottom-right":o.P.convert(b["bottom-right"]||[0,0]),left:o.P.convert(b.left||[0,0]),right:o.P.convert(b.right||[0,0])}}return hp(new o.P(0,0))}let Ob=l;i.AJAXError=o.cq,i.Event=o.l,i.Evented=o.E,i.LngLat=o.Q,i.MercatorCoordinate=o.$,i.Point=o.P,i.addProtocol=o.cr,i.config=o.a,i.removeProtocol=o.cs,i.AttributionControl=Gn,i.BoxZoomHandler=xb,i.CanvasSource=cr,i.CooperativeGesturesHandler=Qv,i.DoubleClickZoomHandler=Xv,i.DragPanHandler=vM,i.DragRotateHandler=yM,i.EdgeInsets=am,i.FullscreenControl=class extends o.E{constructor(b={}){super(),this._onFullscreenChange=()=>{var a;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((a=u==null?void 0:u.shadowRoot)===null||a===void 0)&&a.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){x.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let b=this._fullscreenButton=x.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);x.create("span","maplibregl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},i.GeoJSONSource=Lr,i.GeolocateControl=class extends o.E{constructor(b){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",a)),this._finish()}},this._updateCamera=a=>{let u=new o.Q(a.coords.longitude,a.coords.latitude),m=a.coords.accuracy,v=this._map.getBearing(),w=o.e({bearing:v},this.options.fitBoundsOptions),I=At.fromLngLat(u,m);this._map.fitBounds(I,w,{geolocateSource:!0})},this._updateMarker=a=>{if(a){let u=new o.Q(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=a=>{if(this._map){if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&cp)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=x.create("button","maplibregl-ctrl-geolocate",this._container),x.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=a=>{if(this._map){if(a===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");let u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{let u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new kh({element:this._dotElement}),this._circleElement=x.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new kh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},gi,b)}onAdd(b){return this._map=b,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(a=!1){if(Bi!==void 0&&!a)return Bi;if(window.navigator.permissions===void 0)return Bi=!!window.navigator.geolocation,Bi;try{Bi=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(u){Bi=!!window.navigator.geolocation}return Bi})}().then(a=>this._finishSetupUI(a)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ni=0,cp=!1}_isOutOfMapMaxBounds(b){let a=this._map.getMaxBounds(),u=b.coords;return a&&(u.longitude<a.getWest()||u.longitude>a.getEast()||u.latitude<a.getSouth()||u.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){let b=this._map.getBounds(),a=b.getSouthEast(),u=b.getNorthEast(),m=a.distanceTo(u),v=Math.ceil(this._accuracy/(m/this._map._container.clientHeight)*2);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ni--,cp=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ni++,ni>1?(b={maximumAge:6e5,timeout:0},cp=!0):(b=this.options.positionOptions,cp=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},i.GlobeControl=class{constructor(){this._toggleProjection=()=>{var b;let a=(b=this._map.getProjection())===null||b===void 0?void 0:b.type;this._map.setProjection(a!=="mercator"&&a?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var b;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((b=this._map.getProjection())===null||b===void 0?void 0:b.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(b){return this._map=b,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=x.create("button","maplibregl-ctrl-globe",this._container),x.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){x.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},i.Hash=gb,i.ImageSource=yr,i.KeyboardHandler=up,i.LngLatBounds=At,i.LogoControl=Cm,i.Map=class extends xq{constructor(b){var a,u;o.cn.mark(o.co.create);let m=Object.assign(Object.assign(Object.assign({},Pm),b),{canvasContextAttributes:Object.assign(Object.assign({},Pm.canvasContextAttributes),b.canvasContextAttributes)});if(m.minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let v=new Wf,w=new sm;if(m.minZoom!==void 0&&v.setMinZoom(m.minZoom),m.maxZoom!==void 0&&v.setMaxZoom(m.maxZoom),m.minPitch!==void 0&&v.setMinPitch(m.minPitch),m.maxPitch!==void 0&&v.setMaxPitch(m.maxPitch),m.renderWorldCopies!==void 0&&v.setRenderWorldCopies(m.renderWorldCopies),super(v,w,{bearingSnap:m.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ib,this._controls=[],this._mapId=o.a4(),this._contextLost=P=>{P.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:P}))},this._contextRestored=P=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:P}))},this._onMapScroll=P=>{if(P.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._maxTileCacheZoomLevels=m.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},m.canvasContextAttributes),this._trackResize=m.trackResize===!0,this._bearingSnap=m.bearingSnap,this._centerClampedToGround=m.centerClampedToGround,this._refreshExpiredTiles=m.refreshExpiredTiles===!0,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions===!0,this._collectResourceTiming=m.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Zt),m.locale),this._clickTolerance=m.clickTolerance,this._overridePixelRatio=m.pixelRatio,this._maxCanvasSize=m.maxCanvasSize,this.transformCameraUpdate=m.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=m.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=q.addThrottleControl(()=>this.isMoving()),this._requestManager=new U(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let P=!1,L=Tm(j=>{this._trackResize&&!this._removed&&(this.resize(j),this.redraw())},50);this._resizeObserver=new ResizeObserver(j=>{P?L(j):P=!0}),this._resizeObserver.observe(this._container)}this.handlers=new _q(this,m),this._hash=m.hash&&new gb(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,elevation:m.elevation,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,roll:m.roll}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,o.e({},m.fitBoundsOptions,{duration:0}))));let I=typeof m.style=="string"||((u=(a=m.style)===null||a===void 0?void 0:a.projection)===null||u===void 0?void 0:u.type)!=="globe";this.resize(null,I),this._localIdeographFontFamily=m.localIdeographFontFamily,this._validateStyle=m.validateStyle,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new Gn(typeof m.attributionControl=="boolean"?void 0:m.attributionControl)),m.maplibreLogo&&this.addControl(new Cm,m.logoPosition),this.on("style.load",()=>{if(I||this._resizeTransform(),this.transform.unmodified){let P=o.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(P)}}),this.on("data",P=>{this._update(P.dataType==="style"),this.fire(new o.l(`${P.dataType}data`,P))}),this.on("dataloading",P=>{this.fire(new o.l(`${P.dataType}dataloading`,P))}),this.on("dataabort",P=>{this.fire(new o.l("sourcedataabort",P))})}_getMapId(){return this._mapId}addControl(b,a){if(a===void 0&&(a=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let u=b.onAdd(this);this._controls.push(b);let m=this._controlPositions[a];return a.indexOf("bottom")!==-1?m.insertBefore(u,m.firstChild):m.appendChild(u),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let a=this._controls.indexOf(b);return a>-1&&this._controls.splice(a,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}calculateCameraOptionsFromTo(b,a,u,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(b,a,u,m)}resize(b,a=!0){let[u,m]=this._containerDimensions(),v=this._getClampedPixelRatio(u,m);if(this._resizeCanvas(u,m,v),this.painter.resize(u,m,v),this.painter.overLimit()){let I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];let P=this._getClampedPixelRatio(u,m);this._resizeCanvas(u,m,P),this.painter.resize(u,m,P)}this._resizeTransform(a);let w=!this._moving;return w&&(this.stop(),this.fire(new o.l("movestart",b)).fire(new o.l("move",b))),this.fire(new o.l("resize",b)),w&&this.fire(new o.l("moveend",b)),this}_resizeTransform(b=!0){var a;let[u,m]=this._containerDimensions();this.transform.resize(u,m,b),(a=this._requestedCameraState)===null||a===void 0||a.resize(u,m,b)}_getClampedPixelRatio(b,a){let{0:u,1:m}=this._maxCanvasSize,v=this.getPixelRatio(),w=b*v,I=a*v;return Math.min(w>u?u/w:1,I>m?m/I:1)*v}getPixelRatio(){var b;return(b=this._overridePixelRatio)!==null&&b!==void 0?b:devicePixelRatio}setPixelRatio(b){this._overridePixelRatio=b,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(At.convert(b)),this._update()}setMinZoom(b){if((b=b==null?-2:b)>=-2&&b<=this.transform.maxZoom)return this.transform.setMinZoom(b),this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b==null?22:b)>=this.transform.minZoom)return this.transform.setMaxZoom(b),this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b==null?0:b)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.setMinPitch(b),this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b==null?60:b)>180)throw new Error("maxPitch must be less than or equal to 180");if(b>=this.transform.minPitch)return this.transform.setMaxPitch(b),this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.setRenderWorldCopies(b),this._update()}project(b){return this.transform.locationToScreenPoint(o.Q.convert(b),this.style&&this.terrain)}unproject(b){return this.transform.screenPointToLocation(o.P.convert(b),this.terrain)}isMoving(){var b;return this._moving||((b=this.handlers)===null||b===void 0?void 0:b.isMoving())}isZooming(){var b;return this._zooming||((b=this.handlers)===null||b===void 0?void 0:b.isZooming())}isRotating(){var b;return this._rotating||((b=this.handlers)===null||b===void 0?void 0:b.isRotating())}_createDelegatedListener(b,a,u){if(b==="mouseenter"||b==="mouseover"){let m=!1;return{layers:a,listener:u,delegates:{mousemove:w=>{let I=a.filter(L=>this.getLayer(L)),P=I.length!==0?this.queryRenderedFeatures(w.point,{layers:I}):[];P.length?m||(m=!0,u.call(this,new Ki(b,this,w.originalEvent,{features:P}))):m=!1},mouseout:()=>{m=!1}}}}if(b==="mouseleave"||b==="mouseout"){let m=!1;return{layers:a,listener:u,delegates:{mousemove:I=>{let P=a.filter(L=>this.getLayer(L));(P.length!==0?this.queryRenderedFeatures(I.point,{layers:P}):[]).length?m=!0:m&&(m=!1,u.call(this,new Ki(b,this,I.originalEvent)))},mouseout:I=>{m&&(m=!1,u.call(this,new Ki(b,this,I.originalEvent)))}}}}{let m=v=>{let w=a.filter(P=>this.getLayer(P)),I=w.length!==0?this.queryRenderedFeatures(v.point,{layers:w}):[];I.length&&(v.features=I,u.call(this,v),delete v.features)};return{layers:a,listener:u,delegates:{[b]:m}}}}_saveDelegatedListener(b,a){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(a)}_removeDelegatedListener(b,a,u){if(!this._delegatedListeners||!this._delegatedListeners[b])return;let m=this._delegatedListeners[b];for(let v=0;v<m.length;v++){let w=m[v];if(w.listener===u&&w.layers.length===a.length&&w.layers.every(I=>a.includes(I))){for(let I in w.delegates)this.off(I,w.delegates[I]);return void m.splice(v,1)}}}on(b,a,u){if(u===void 0)return super.on(b,a);let m=typeof a=="string"?[a]:a,v=this._createDelegatedListener(b,m,u);this._saveDelegatedListener(b,v);for(let w in v.delegates)this.on(w,v.delegates[w]);return{unsubscribe:()=>{this._removeDelegatedListener(b,m,u)}}}once(b,a,u){if(u===void 0)return super.once(b,a);let m=typeof a=="string"?[a]:a,v=this._createDelegatedListener(b,m,u);for(let w in v.delegates){let I=v.delegates[w];v.delegates[w]=(...P)=>{this._removeDelegatedListener(b,m,u),I(...P)}}this._saveDelegatedListener(b,v);for(let w in v.delegates)this.once(w,v.delegates[w]);return this}off(b,a,u){return u===void 0?super.off(b,a):(this._removeDelegatedListener(b,typeof a=="string"?[a]:a,u),this)}queryRenderedFeatures(b,a){if(!this.style)return[];let u,m=b instanceof o.P||Array.isArray(b),v=m?b:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(m?{}:b)||{},v instanceof o.P||typeof v[0]=="number")u=[o.P.convert(v)];else{let w=o.P.convert(v[0]),I=o.P.convert(v[1]);u=[w,new o.P(I.x,w.y),I,new o.P(w.x,I.y),w]}return this.style.queryRenderedFeatures(u,a,this.transform)}querySourceFeatures(b,a){return this.style.querySourceFeatures(b,a)}setStyle(b,a){return(a=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(b,a))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){let a=this._locale[b];if(a==null)throw new Error(`Missing UI string '${b}'`);return a}_updateStyle(b,a){var u,m;if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(b,a));let v=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!b)),b?(this.style=new Qx(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b,a,v):this.style.loadJSON(b,a,v),this):((m=(u=this.style)===null||u===void 0?void 0:u.projection)===null||m===void 0||m.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Qx(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,a){if(typeof b=="string"){let u=this._requestManager.transformRequest(b,"Style");o.j(u,new AbortController).then(m=>{this._updateDiff(m.data,a)}).catch(m=>{m&&this.fire(new o.k(m))})}else typeof b=="object"&&this._updateDiff(b,a)}_updateDiff(b,a){try{this.style.setState(b,a)&&this._update(!0)}catch(u){o.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(b,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(b,a){return this._lazyInitEmptyStyle(),this.style.addSource(b,a),this._update(!0)}isSourceLoaded(b){let a=this.style&&this.style.sourceCaches[b];if(a!==void 0)return a.loaded();this.fire(new o.k(new Error(`There is no source with ID '${b}'`)))}setTerrain(b){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),b){let a=this.style.sourceCaches[b.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${b.source}`);this.terrain===null&&a.reload();for(let u in this.style._layers){let m=this.style._layers[u];m.type==="hillshade"&&m.source===b.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new bM(this.painter,a,b),this.painter.renderToTexture=new ey(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=u=>{var m;u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==b.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((m=u.source)===null||m===void 0?void 0:m.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:b})),this}getTerrain(){var b,a;return(a=(b=this.terrain)===null||b===void 0?void 0:b.options)!==null&&a!==void 0?a:null}areTilesLoaded(){let b=this.style&&this.style.sourceCaches;for(let a in b){let u=b[a]._tiles;for(let m in u){let v=u[m];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}setSourceTileLodParams(b,a,u){if(u){let m=this.getSource(u);if(!m)throw new Error(`There is no source with ID "${u}", cannot set LOD parameters`);m.calculateTileZoom=he(Math.max(1,b),Math.max(1,a))}else for(let m in this.style.sourceCaches)this.style.sourceCaches[m].getSource().calculateTileZoom=he(Math.max(1,b),Math.max(1,a));return this._update(!0),this}refreshTiles(b,a){let u=this.style.sourceCaches[b];if(!u)throw new Error(`There is no source cache with ID "${b}", cannot refresh tile`);a===void 0?u.reload():u.refreshTiles(a.map(m=>new o.a1(m.z,m.x,m.y)))}addImage(b,a,u={}){let{pixelRatio:m=1,sdf:v=!1,stretchX:w,stretchY:I,content:P,textFitWidth:L,textFitHeight:j}=u;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||o.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:B,height:$,data:G}=a,J=a;return this.style.addImage(b,{data:new o.R({width:B,height:$},new Uint8Array(G)),pixelRatio:m,stretchX:w,stretchY:I,content:P,textFitWidth:L,textFitHeight:j,sdf:v,version:0,userImage:J}),J.onAdd&&J.onAdd(this,b),this}}{let{width:B,height:$,data:G}=_.getImageData(a);this.style.addImage(b,{data:new o.R({width:B,height:$},G),pixelRatio:m,stretchX:w,stretchY:I,content:P,textFitWidth:L,textFitHeight:j,sdf:v,version:0})}}updateImage(b,a){let u=this.style.getImage(b);if(!u)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let m=a instanceof HTMLImageElement||o.b(a)?_.getImageData(a):a,{width:v,height:w,data:I}=m;if(v===void 0||w===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==u.data.width||w!==u.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let P=!(a instanceof HTMLImageElement||o.b(a));return u.data.replace(I,P),this.style.updateImage(b,u),this}getImage(b){return this.style.getImage(b)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b){return q.getImage(this._requestManager.transformRequest(b,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(b,a){return this._lazyInitEmptyStyle(),this.style.addLayer(b,a),this._update(!0)}moveLayer(b,a){return this.style.moveLayer(b,a),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(b,a,u){return this.style.setLayerZoomRange(b,a,u),this._update(!0)}setFilter(b,a,u={}){return this.style.setFilter(b,a,u),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,a,u,m={}){return this.style.setPaintProperty(b,a,u,m),this._update(!0)}getPaintProperty(b,a){return this.style.getPaintProperty(b,a)}setLayoutProperty(b,a,u,m={}){return this.style.setLayoutProperty(b,a,u,m),this._update(!0)}getLayoutProperty(b,a){return this.style.getLayoutProperty(b,a)}setGlyphs(b,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(b,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(b,a,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(b,a,u,m=>{m||this._update(!0)}),this}removeSprite(b){return this._lazyInitEmptyStyle(),this.style.removeSprite(b),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(b,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(b,a,u=>{u||this._update(!0)}),this}setLight(b,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,a),this._update(!0)}getLight(){return this.style.getLight()}setSky(b,a={}){return this._lazyInitEmptyStyle(),this.style.setSky(b,a),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(b,a){return this.style.setFeatureState(b,a),this._update()}removeFeatureState(b,a){return this.style.removeFeatureState(b,a),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,a=0;return this._container&&(b=this._container.clientWidth||400,a=this._container.clientHeight||300),[b,a]}_setupContainer(){let b=this._container;b.classList.add("maplibregl-map");let a=this._canvasContainer=x.create("div","maplibregl-canvas-container",b);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=x.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let u=this._containerDimensions(),m=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],m);let v=this._controlContainer=x.create("div","maplibregl-control-container",b),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(I=>{w[I]=x.create("div",`maplibregl-ctrl-${I} `,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(b,a,u){this._canvas.width=Math.floor(u*b),this._canvas.height=Math.floor(u*a),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${a}px`}_setupPainter(){let b=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),a=null;this._canvas.addEventListener("webglcontextcreationerror",m=>{a={requestedAttributes:b},m&&(a.statusMessage=m.statusMessage,a.type=m.type)},{once:!0});let u=null;if(u=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,b):this._canvas.getContext("webgl2",b)||this._canvas.getContext("webgl",b),!u){let m="Failed to initialize WebGL";throw a?(a.message=m,new Error(JSON.stringify(a))):new Error(m)}this.painter=new mb(u,this.transform),T.testSupport(u)}migrateProjection(b,a){super.migrateProjection(b,a),this.painter.transform=b,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){var a,u,m,v,w;let I=this._idleTriggered?this._fadeDuration:0,P=((a=this.style.projection)===null||a===void 0?void 0:a.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let L=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let $=this.transform.zoom,G=_.now();this.style.zoomHistory.update($,G);let J=new o.C($,{now:G,fadeDuration:I,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),te=J.crossFadingFactor();te===1&&te===this._crossFadingFactor||(L=!0,this._crossFadingFactor=te),this.style.update(J)}let j=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0!==P;(m=this.style.projection)===null||m===void 0||m.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((v=this.style.projection)===null||v===void 0?void 0:v.transitionState,(w=this.style.projection)===null||w===void 0?void 0:w.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||j)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,I,this._crossSourceCollisions,j),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:I,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cn.mark(o.co.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||L)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let B=this._sourcesDirty||this._styleDirty||this._placementDirty;return B||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||B||(this._fullyLoaded=!0,o.cn.mark(o.co.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var b;this._hash&&this._hash.remove();for(let u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),q.removeThrottleControl(this._imageQueueHandle),(b=this._resizeObserver)===null||b===void 0||b.disconnect();let a=this.painter.context.gl.getExtension("WEBGL_lose_context");a!=null&&a.loseContext&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),x.remove(this._canvasContainer),x.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cn.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,_.frame(this._frameRequest,b=>{o.cn.frame(b),this._frameRequest=null;try{this._render(b)}catch(a){if(!o.cp(a)&&!function(u){return u.message===kv}(a))throw a}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get version(){return sr}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(b){return this._lazyInitEmptyStyle(),this.style.setProjection(b),this._update(!0)}},i.MapMouseEvent=Ki,i.MapTouchEvent=np,i.MapWheelEvent=_b,i.Marker=kh,i.NavigationControl=class{constructor(b){this._updateZoomButtons=()=>{let a=this._map.getZoom(),u=a===this._map.getMaxZoom(),m=a===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(a,u)=>{let m=this._map._getUIString(`NavigationControl.${u}`);a.title=m,a.setAttribute("aria-label",m)},this.options=o.e({},Mb,b),this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),x.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),x.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=x.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ab(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,a){let u=x.create("button",b,this._container);return u.type="button",u.addEventListener("click",a),u}},i.Popup=class extends o.E{constructor(b){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=x.create("div","maplibregl-popup",this._map.getContainer()),this._tip=x.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let I of this.options.className.split(" "))this._container.classList.add(I);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Cb(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!a)return;let u=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationToScreenPoint(this._lngLat));let m=this.options.anchor,v=hp(this.options.offset);if(!m){let I=this._container.offsetWidth,P=this._container.offsetHeight,L;L=u.y+v.bottom.y<P?["top"]:u.y>this._map.transform.height-P?["bottom"]:[],u.x<I/2?L.push("left"):u.x>this._map.transform.width-I/2&&L.push("right"),m=L.length===0?"bottom":L.join("-")}let w=u.add(v[m]);this.options.subpixelPositioning||(w=w.round()),x.setTransform(this._container,`${Es[m]} translate(${w.x}px,${w.y}px)`),wM(this._container,m,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Pb),b)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=o.Q.convert(b),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){let a=document.createDocumentFragment(),u=document.createElement("body"),m;for(u.innerHTML=b;m=u.firstChild,m;)a.appendChild(m);return this.setDOMContent(a)}getMaxWidth(){var b;return(b=this._container)===null||b===void 0?void 0:b.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=x.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){return this._container&&this._container.classList.add(b),this}removeClassName(b){return this._container&&this._container.classList.remove(b),this}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}setSubpixelPositioning(b){this.options.subpixelPositioning=b}_createCloseButton(){this.options.closeButton&&(this._closeButton=x.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let b=this._container.querySelector(Rb);b&&b.focus()}},i.RasterDEMTileSource=$t,i.RasterTileSource=Vt,i.ScaleControl=class{constructor(b){this._onMove=()=>{Om(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,Om(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Rm),b)}getDefaultPosition(){return"bottom-left"}onAdd(b){return this._map=b,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},i.ScrollZoomHandler=Br,i.Style=Qx,i.TerrainControl=class{constructor(b){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=b}onAdd(b){return this._map=b,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=x.create("button","maplibregl-ctrl-terrain",this._container),x.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){x.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},i.TwoFingersTouchPitchHandler=Kv,i.TwoFingersTouchRotateHandler=Ft,i.TwoFingersTouchZoomHandler=lp,i.TwoFingersTouchZoomRotateHandler=Tb,i.VectorTileSource=Ut,i.VideoSource=ur,i.addSourceType=(b,a)=>o._(void 0,void 0,void 0,function*(){if(dr(b))throw new Error(`A source type called "${b}" already exists.`);((u,m)=>{hr[u]=m})(b,a)}),i.clearPrewarmedResources=function(){let b=ze;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(mt),ze=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},i.createTileMesh=lm,i.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},i.getRTLTextPluginStatus=function(){return Un().getRTLTextPluginStatus()},i.getVersion=function(){return Ob},i.getWorkerCount=function(){return ht.workerCount},i.getWorkerUrl=function(){return o.a.WORKER_URL},i.importScriptInWorkers=function(b){return st().broadcast("IS",b)},i.prewarm=function(){jt().acquire(mt)},i.setMaxParallelImageRequests=function(b){o.a.MAX_PARALLEL_IMAGE_REQUESTS=b},i.setRTLTextPlugin=function(b,a){return Un().setRTLTextPlugin(b,a)},i.setWorkerCount=function(b){ht.workerCount=b},i.setWorkerUrl=function(b){o.a.WORKER_URL=b}});var n=r;return n})});var $O=A((k2r,COe)=>{var aH=1/0,U$t=17976931348623157e292,bOe=NaN,V$t="[object Symbol]",G$t=/^\s+|\s+$/g,$$t=/^[-+]0x[0-9a-f]+$/i,H$t=/^0b[01]+$/i,W$t=/^0o[0-7]+$/i,Z$t=parseInt,Y$t=typeof global=="object"&&global&&global.Object===Object&&global,K$t=typeof self=="object"&&self&&self.Object===Object&&self,X$t=Y$t||K$t||Function("return this")(),Q$t=Object.prototype,J$t=Q$t.toString,wOe=X$t.Symbol,e8t=Math.min,EOe=wOe?wOe.prototype:void 0,SOe=EOe?EOe.toString:void 0;function t8t(r){if(typeof r=="string")return r;if(MOe(r))return SOe?SOe.call(r):"";var e=r+"";return e=="0"&&1/r==-aH?"-0":e}function r8t(r){var e=Math[r];return function(t,n){if(t=AOe(t),n=e8t(o8t(n),292),n){var i=(IOe(t)+"e").split("e"),o=e(i[0]+"e"+(+i[1]+n));return i=(IOe(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(t)}}function TOe(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function n8t(r){return!!r&&typeof r=="object"}function MOe(r){return typeof r=="symbol"||n8t(r)&&J$t.call(r)==V$t}function i8t(r){if(!r)return r===0?r:0;if(r=AOe(r),r===aH||r===-aH){var e=r<0?-1:1;return e*U$t}return r===r?r:0}function o8t(r){var e=i8t(r),t=e%1;return e===e?t?e-t:e:0}function AOe(r){if(typeof r=="number")return r;if(MOe(r))return bOe;if(TOe(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=TOe(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(G$t,"");var t=H$t.test(r);return t||W$t.test(r)?Z$t(r.slice(2),t?2:8):$$t.test(r)?bOe:+r}function IOe(r){return r==null?"":t8t(r)}var a8t=r8t("round");COe.exports=a8t});var YLe=A((HDr,ZLe)=>{"use strict";ZLe.exports=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)});var e2e=A((WDr,JLe)=>{"use strict";var QLe="%[a-f0-9]{2}",KLe=new RegExp("("+QLe+")|([^%]+?)","gi"),XLe=new RegExp("("+QLe+")+","gi");function XH(r,e){try{return[decodeURIComponent(r.join(""))]}catch(i){}if(r.length===1)return r;e=e||1;var t=r.slice(0,e),n=r.slice(e);return Array.prototype.concat.call([],XH(t),XH(n))}function P9t(r){try{return decodeURIComponent(r)}catch(n){for(var e=r.match(KLe)||[],t=1;t<e.length;t++)r=XH(e,t).join(""),e=r.match(KLe)||[];return r}}function R9t(r){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},t=XLe.exec(r);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch(c){var n=P9t(t[0]);n!==t[0]&&(e[t[0]]=n)}t=XLe.exec(r)}e["%C2"]="\uFFFD";for(var i=Object.keys(e),o=0;o<i.length;o++){var l=i[o];r=r.replace(new RegExp(l,"g"),e[l])}return r}JLe.exports=function(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch(e){return R9t(r)}}});var r2e=A((ZDr,t2e)=>{"use strict";t2e.exports=(r,e)=>{if(!(typeof r=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[r];let t=r.indexOf(e);return t===-1?[r]:[r.slice(0,t),r.slice(t+e.length)]}});var i2e=A((YDr,n2e)=>{"use strict";n2e.exports=function(r,e){for(var t={},n=Object.keys(r),i=Array.isArray(e),o=0;o<n.length;o++){var l=n[o],c=r[l];(i?e.indexOf(l)!==-1:e(l,c,r))&&(t[l]=c)}return t}});var JH=A(Us=>{"use strict";var O9t=YLe(),L9t=e2e(),a2e=r2e(),D9t=i2e(),N9t=r=>r==null,QH=Symbol("encodeFragmentIdentifier");function k9t(r){switch(r.arrayFormat){case"index":return e=>(t,n)=>{let i=t.length;return n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?t:n===null?[...t,[no(e,r),"[",i,"]"].join("")]:[...t,[no(e,r),"[",no(i,r),"]=",no(n,r)].join("")]};case"bracket":return e=>(t,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?t:n===null?[...t,[no(e,r),"[]"].join("")]:[...t,[no(e,r),"[]=",no(n,r)].join("")];case"colon-list-separator":return e=>(t,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?t:n===null?[...t,[no(e,r),":list="].join("")]:[...t,[no(e,r),":list=",no(n,r)].join("")];case"comma":case"separator":case"bracket-separator":{let e=r.arrayFormat==="bracket-separator"?"[]=":"=";return t=>(n,i)=>i===void 0||r.skipNull&&i===null||r.skipEmptyString&&i===""?n:(i=i===null?"":i,n.length===0?[[no(t,r),e,no(i,r)].join("")]:[[n,no(i,r)].join(r.arrayFormatSeparator)])}default:return e=>(t,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?t:n===null?[...t,no(e,r)]:[...t,[no(e,r),"=",no(n,r)].join("")]}}function q9t(r){let e;switch(r.arrayFormat){case"index":return(t,n,i)=>{if(e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),!e){i[t]=n;return}i[t]===void 0&&(i[t]={}),i[t][e[1]]=n};case"bracket":return(t,n,i)=>{if(e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),!e){i[t]=n;return}if(i[t]===void 0){i[t]=[n];return}i[t]=[].concat(i[t],n)};case"colon-list-separator":return(t,n,i)=>{if(e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),!e){i[t]=n;return}if(i[t]===void 0){i[t]=[n];return}i[t]=[].concat(i[t],n)};case"comma":case"separator":return(t,n,i)=>{let o=typeof n=="string"&&n.includes(r.arrayFormatSeparator),l=typeof n=="string"&&!o&&df(n,r).includes(r.arrayFormatSeparator);n=l?df(n,r):n;let c=o||l?n.split(r.arrayFormatSeparator).map(p=>df(p,r)):n===null?n:df(n,r);i[t]=c};case"bracket-separator":return(t,n,i)=>{let o=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!o){i[t]=n&&df(n,r);return}let l=n===null?[]:n.split(r.arrayFormatSeparator).map(c=>df(c,r));if(i[t]===void 0){i[t]=l;return}i[t]=[].concat(i[t],l)};default:return(t,n,i)=>{if(i[t]===void 0){i[t]=n;return}i[t]=[].concat(i[t],n)}}}function s2e(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function no(r,e){return e.encode?e.strict?O9t(r):encodeURIComponent(r):r}function df(r,e){return e.decode?L9t(r):r}function l2e(r){return Array.isArray(r)?r.sort():typeof r=="object"?l2e(Object.keys(r)).sort((e,t)=>Number(e)-Number(t)).map(e=>r[e]):r}function u2e(r){let e=r.indexOf("#");return e!==-1&&(r=r.slice(0,e)),r}function j9t(r){let e="",t=r.indexOf("#");return t!==-1&&(e=r.slice(t)),e}function c2e(r){r=u2e(r);let e=r.indexOf("?");return e===-1?"":r.slice(e+1)}function o2e(r,e){return e.parseNumbers&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?r=Number(r):e.parseBooleans&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")&&(r=r.toLowerCase()==="true"),r}function h2e(r,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),s2e(e.arrayFormatSeparator);let t=q9t(e),n=Object.create(null);if(typeof r!="string"||(r=r.trim().replace(/^[?#&]/,""),!r))return n;for(let i of r.split("&")){if(i==="")continue;let[o,l]=a2e(e.decode?i.replace(/\+/g," "):i,"=");l=l===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?l:df(l,e),t(df(o,e),l,n)}for(let i of Object.keys(n)){let o=n[i];if(typeof o=="object"&&o!==null)for(let l of Object.keys(o))o[l]=o2e(o[l],e);else n[i]=o2e(o,e)}return e.sort===!1?n:(e.sort===!0?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((i,o)=>{let l=n[o];return l&&typeof l=="object"&&!Array.isArray(l)?i[o]=l2e(l):i[o]=l,i},Object.create(null))}Us.extract=c2e;Us.parse=h2e;Us.stringify=(r,e)=>{if(!r)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),s2e(e.arrayFormatSeparator);let t=l=>e.skipNull&&N9t(r[l])||e.skipEmptyString&&r[l]==="",n=k9t(e),i={};for(let l of Object.keys(r))t(l)||(i[l]=r[l]);let o=Object.keys(i);return e.sort!==!1&&o.sort(e.sort),o.map(l=>{let c=r[l];return c===void 0?"":c===null?no(l,e):Array.isArray(c)?c.length===0&&e.arrayFormat==="bracket-separator"?no(l,e)+"[]":c.reduce(n(l),[]).join("&"):no(l,e)+"="+no(c,e)}).filter(l=>l.length>0).join("&")};Us.parseUrl=(r,e)=>{e=Object.assign({decode:!0},e);let[t,n]=a2e(r,"#");return Object.assign({url:t.split("?")[0]||"",query:h2e(c2e(r),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:df(n,e)}:{})};Us.stringifyUrl=(r,e)=>{e=Object.assign({encode:!0,strict:!0,[QH]:!0},e);let t=u2e(r.url).split("?")[0]||"",n=Us.extract(r.url),i=Us.parse(n,{sort:!1}),o=Object.assign(i,r.query),l=Us.stringify(o,e);l&&(l=`?${l}`);let c=j9t(r.url);return r.fragmentIdentifier&&(c=`#${e[QH]?no(r.fragmentIdentifier,e):r.fragmentIdentifier}`),`${t}${l}${c}`};Us.pick=(r,e,t)=>{t=Object.assign({parseFragmentIdentifier:!0,[QH]:!1},t);let{url:n,query:i,fragmentIdentifier:o}=Us.parseUrl(r,t);return Us.stringifyUrl({url:n,query:D9t(i,e),fragmentIdentifier:o},t)};Us.exclude=(r,e,t)=>{let n=Array.isArray(e)?i=>!e.includes(i):(i,o)=>!e(i,o);return Us.pick(r,n,t)}});var v2e=A((sNr,g2e)=>{"use strict";var F9t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";g2e.exports=F9t});var b2e=A((lNr,x2e)=>{"use strict";var z9t=v2e();function y2e(){}function _2e(){}_2e.resetWarningCache=y2e;x2e.exports=function(){function r(n,i,o,l,c,p){if(p!==z9t){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function e(){return r}var t={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:_2e,resetWarningCache:y2e};return t.PropTypes=t,t}});var tn=A((hNr,w2e)=>{w2e.exports=b2e()();var uNr,cNr});var p0=A((TNr,A2e)=>{var U9t=A2e.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=U9t)});var Jc=A((INr,C2e)=>{var V9t=C2e.exports={version:"2.6.12"};typeof __e=="number"&&(__e=V9t)});var R2e=A((MNr,P2e)=>{P2e.exports=function(r){if(typeof r!="function")throw TypeError(r+" is not a function!");return r}});var PL=A((ANr,O2e)=>{var G9t=R2e();O2e.exports=function(r,e,t){if(G9t(r),e===void 0)return r;switch(t){case 1:return function(n){return r.call(e,n)};case 2:return function(n,i){return r.call(e,n,i)};case 3:return function(n,i,o){return r.call(e,n,i,o)}}return function(){return r.apply(e,arguments)}}});var MS=A((CNr,L2e)=>{L2e.exports=function(r){return typeof r=="object"?r!==null:typeof r=="function"}});var d0=A((PNr,D2e)=>{var $9t=MS();D2e.exports=function(r){if(!$9t(r))throw TypeError(r+" is not an object!");return r}});var RL=A((RNr,N2e)=>{N2e.exports=function(r){try{return!!r()}catch(e){return!0}}});var wd=A((ONr,k2e)=>{k2e.exports=!RL()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var rW=A((LNr,j2e)=>{var q2e=MS(),tW=p0().document,H9t=q2e(tW)&&q2e(tW.createElement);j2e.exports=function(r){return H9t?tW.createElement(r):{}}});var nW=A((DNr,F2e)=>{F2e.exports=!wd()&&!RL()(function(){return Object.defineProperty(rW()("div"),"a",{get:function(){return 7}}).a!=7})});var iW=A((NNr,z2e)=>{var OL=MS();z2e.exports=function(r,e){if(!OL(r))return r;var t,n;if(e&&typeof(t=r.toString)=="function"&&!OL(n=t.call(r))||typeof(t=r.valueOf)=="function"&&!OL(n=t.call(r))||!e&&typeof(t=r.toString)=="function"&&!OL(n=t.call(r)))return n;throw TypeError("Can't convert object to primitive value")}});var AS=A(U2e=>{var B2e=d0(),W9t=nW(),Z9t=iW(),Y9t=Object.defineProperty;U2e.f=wd()?Object.defineProperty:function(e,t,n){if(B2e(e),t=Z9t(t,!0),B2e(n),W9t)try{return Y9t(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}});var CS=A((qNr,V2e)=>{V2e.exports=function(r,e){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:e}}});var PS=A((jNr,G2e)=>{var K9t=AS(),X9t=CS();G2e.exports=wd()?function(r,e,t){return K9t.f(r,e,X9t(1,t))}:function(r,e,t){return r[e]=t,r}});var m0=A((FNr,$2e)=>{var Q9t={}.hasOwnProperty;$2e.exports=function(r,e){return Q9t.call(r,e)}});var Ed=A((zNr,W2e)=>{var LL=p0(),oW=Jc(),H2e=PL(),J9t=PS(),eKt=m0(),DL="prototype",Na=function(r,e,t){var n=r&Na.F,i=r&Na.G,o=r&Na.S,l=r&Na.P,c=r&Na.B,p=r&Na.W,g=i?oW:oW[e]||(oW[e]={}),_=g[DL],x=i?LL:o?LL[e]:(LL[e]||{})[DL],T,C,D;i&&(t=e);for(T in t)C=!n&&x&&x[T]!==void 0,!(C&&eKt(g,T))&&(D=C?x[T]:t[T],g[T]=i&&typeof x[T]!="function"?t[T]:c&&C?H2e(D,LL):p&&x[T]==D?function(F){var O=function(k,q,U){if(this instanceof F){switch(arguments.length){case 0:return new F;case 1:return new F(k);case 2:return new F(k,q)}return new F(k,q,U)}return F.apply(this,arguments)};return O[DL]=F[DL],O}(D):l&&typeof D=="function"?H2e(Function.call,D):D,l&&((g.virtual||(g.virtual={}))[T]=D,r&Na.R&&_&&!_[T]&&J9t(_,T,D)))};Na.F=1;Na.G=2;Na.S=4;Na.P=8;Na.B=16;Na.W=32;Na.U=64;Na.R=128;W2e.exports=Na});var aW=A((BNr,Z2e)=>{var tKt={}.toString;Z2e.exports=function(r){return tKt.call(r).slice(8,-1)}});var sW=A((UNr,Y2e)=>{var rKt=aW();Y2e.exports=Object("z").propertyIsEnumerable(0)?Object:function(r){return rKt(r)=="String"?r.split(""):Object(r)}});var NL=A((VNr,K2e)=>{K2e.exports=function(r){if(r==null)throw TypeError("Can't call method on  "+r);return r}});var RS=A((GNr,X2e)=>{var nKt=sW(),iKt=NL();X2e.exports=function(r){return nKt(iKt(r))}});var kL=A(($Nr,Q2e)=>{var oKt=Math.ceil,aKt=Math.floor;Q2e.exports=function(r){return isNaN(r=+r)?0:(r>0?aKt:oKt)(r)}});var lW=A((HNr,J2e)=>{var sKt=kL(),lKt=Math.min;J2e.exports=function(r){return r>0?lKt(sKt(r),9007199254740991):0}});var tDe=A((WNr,eDe)=>{var uKt=kL(),cKt=Math.max,hKt=Math.min;eDe.exports=function(r,e){return r=uKt(r),r<0?cKt(r+e,0):hKt(r,e)}});var nDe=A((ZNr,rDe)=>{var fKt=RS(),pKt=lW(),dKt=tDe();rDe.exports=function(r){return function(e,t,n){var i=fKt(e),o=pKt(i.length),l=dKt(n,o),c;if(r&&t!=t){for(;o>l;)if(c=i[l++],c!=c)return!0}else for(;o>l;l++)if((r||l in i)&&i[l]===t)return r||l||0;return!r&&-1}}});var uW=A((YNr,iDe)=>{iDe.exports=!0});var cW=A((KNr,lDe)=>{var mKt=Jc(),oDe=p0(),aDe="__core-js_shared__",sDe=oDe[aDe]||(oDe[aDe]={});(lDe.exports=function(r,e){return sDe[r]||(sDe[r]=e!==void 0?e:{})})("versions",[]).push({version:mKt.version,mode:uW()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var hW=A((XNr,uDe)=>{var gKt=0,vKt=Math.random();uDe.exports=function(r){return"Symbol(".concat(r===void 0?"":r,")_",(++gKt+vKt).toString(36))}});var qL=A((QNr,hDe)=>{var cDe=cW()("keys"),yKt=hW();hDe.exports=function(r){return cDe[r]||(cDe[r]=yKt(r))}});var dDe=A((JNr,pDe)=>{var fDe=m0(),_Kt=RS(),xKt=nDe()(!1),bKt=qL()("IE_PROTO");pDe.exports=function(r,e){var t=_Kt(r),n=0,i=[],o;for(o in t)o!=bKt&&fDe(t,o)&&i.push(o);for(;e.length>n;)fDe(t,o=e[n++])&&(~xKt(i,o)||i.push(o));return i}});var fW=A((ekr,mDe)=>{mDe.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var jL=A((tkr,gDe)=>{var wKt=dDe(),EKt=fW();gDe.exports=Object.keys||function(e){return wKt(e,EKt)}});var yDe=A(vDe=>{vDe.f=Object.getOwnPropertySymbols});var FL=A(_De=>{_De.f={}.propertyIsEnumerable});var zL=A((ikr,xDe)=>{var SKt=NL();xDe.exports=function(r){return Object(SKt(r))}});var EDe=A((okr,wDe)=>{"use strict";var TKt=wd(),bDe=jL(),IKt=yDe(),MKt=FL(),AKt=zL(),CKt=sW(),BL=Object.assign;wDe.exports=!BL||RL()(function(){var r={},e={},t=Symbol(),n="abcdefghijklmnopqrst";return r[t]=7,n.split("").forEach(function(i){e[i]=i}),BL({},r)[t]!=7||Object.keys(BL({},e)).join("")!=n})?function(e,t){for(var n=AKt(e),i=arguments.length,o=1,l=IKt.f,c=MKt.f;i>o;)for(var p=CKt(arguments[o++]),g=l?bDe(p).concat(l(p)):bDe(p),_=g.length,x=0,T;_>x;)T=g[x++],(!TKt||c.call(p,T))&&(n[T]=p[T]);return n}:BL});var SDe=A(()=>{var pW=Ed();pW(pW.S+pW.F,"Object",{assign:EDe()})});var IDe=A((lkr,TDe)=>{SDe();TDe.exports=Jc().Object.assign});var ADe=A((ckr,MDe)=>{var PKt=AS(),RKt=d0(),OKt=jL();MDe.exports=wd()?Object.defineProperties:function(e,t){RKt(e);for(var n=OKt(t),i=n.length,o=0,l;i>o;)PKt.f(e,l=n[o++],t[l]);return e}});var RDe=A((hkr,PDe)=>{var CDe=p0().document;PDe.exports=CDe&&CDe.documentElement});var vW=A((fkr,LDe)=>{var LKt=d0(),DKt=ADe(),ODe=fW(),NKt=qL()("IE_PROTO"),mW=function(){},gW="prototype",UL=function(){var r=rW()("iframe"),e=ODe.length,t="<",n=">",i;for(r.style.display="none",RDe().appendChild(r),r.src="javascript:",i=r.contentWindow.document,i.open(),i.write(t+"script"+n+"document.F=Object"+t+"/script"+n),i.close(),UL=i.F;e--;)delete UL[gW][ODe[e]];return UL()};LDe.exports=Object.create||function(e,t){var n;return e!==null?(mW[gW]=LKt(e),n=new mW,mW[gW]=null,n[NKt]=e):n=UL(),t===void 0?n:DKt(n,t)}});var NDe=A(()=>{var DDe=Ed();DDe(DDe.S,"Object",{create:vW()})});var qDe=A((mkr,kDe)=>{NDe();var kKt=Jc().Object;kDe.exports=function(e,t){return kKt.create(e,t)}});var zDe=A(FDe=>{var qKt=FL(),jKt=CS(),FKt=RS(),zKt=iW(),BKt=m0(),UKt=nW(),jDe=Object.getOwnPropertyDescriptor;FDe.f=wd()?jDe:function(e,t){if(e=FKt(e),t=zKt(t,!0),UKt)try{return jDe(e,t)}catch(n){}if(BKt(e,t))return jKt(!qKt.f.call(e,t),e[t])}});var VDe=A((vkr,UDe)=>{var VKt=MS(),GKt=d0(),BDe=function(r,e){if(GKt(r),!VKt(e)&&e!==null)throw TypeError(e+": can't set as prototype!")};UDe.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(r,e,t){try{t=PL()(Function.call,zDe().f(Object.prototype,"__proto__").set,2),t(r,[]),e=!(r instanceof Array)}catch(n){e=!0}return function(i,o){return BDe(i,o),e?i.__proto__=o:t(i,o),i}}({},!1):void 0),check:BDe}});var $De=A(()=>{var GDe=Ed();GDe(GDe.S,"Object",{setPrototypeOf:VDe().set})});var WDe=A((xkr,HDe)=>{$De();HDe.exports=Jc().Object.setPrototypeOf});var bi=A((Tkr,GL)=>{(function(){"use strict";var r={}.hasOwnProperty;function e(){for(var i="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(i=n(i,t(l)))}return i}function t(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return e.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var l in i)r.call(i,l)&&i[l]&&(o=n(o,l));return o}function n(i,o){return o?i?i+" "+o:i+o:i}typeof GL!="undefined"&&GL.exports?(e.default=e,GL.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var $L=A((Akr,YDe)=>{"use strict";var $Kt=function(r,e,t,n,i,o,l,c){if(!r){var p;if(e===void 0)p=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var g=[t,n,i,o,l,c],_=0;p=new Error(e.replace(/%s/g,function(){return g[_++]})),p.name="Invariant Violation"}throw p.framesToPop=1,p}};YDe.exports=$Kt});var wW=A(bW=>{"use strict";Object.defineProperty(bW,"__esModule",{value:!0});function eNe(){var r=this.constructor.getDerivedStateFromProps(this.props,this.state);r!=null&&this.setState(r)}function tNe(r){function e(t){var n=this.constructor.getDerivedStateFromProps(r,t);return n!=null?n:null}this.setState(e.bind(this))}function rNe(r,e){try{var t=this.props,n=this.state;this.props=r,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,n)}finally{this.props=t,this.state=n}}eNe.__suppressDeprecationWarning=!0;tNe.__suppressDeprecationWarning=!0;rNe.__suppressDeprecationWarning=!0;function WKt(r){var e=r.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof r.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return r;var t=null,n=null,i=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),t!==null||n!==null||i!==null){var o=r.displayName||r.name,l=typeof r.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+l+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof r.getDerivedStateFromProps=="function"&&(e.componentWillMount=eNe,e.componentWillReceiveProps=tNe),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=rNe;var c=e.componentDidUpdate;e.componentDidUpdate=function(g,_,x){var T=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:x;c.call(this,g,_,T)}}return r}bW.polyfill=WKt});var EW=A((Wkr,oNe)=>{var YKt=wd(),KKt=jL(),XKt=RS(),QKt=FL().f;oNe.exports=function(r){return function(e){for(var t=XKt(e),n=KKt(t),i=n.length,o=0,l=[],c;i>o;)c=n[o++],(!YKt||QKt.call(t,c))&&l.push(r?[c,t[c]]:t[c]);return l}}});var sNe=A(()=>{var aNe=Ed(),JKt=EW()(!0);aNe(aNe.S,"Object",{entries:function(e){return JKt(e)}})});var uNe=A((Kkr,lNe)=>{sNe();lNe.exports=Jc().Object.entries});var SW=A((Xkr,cNe)=>{cNe.exports=uNe()});var NS=A((ZL,gNe)=>{"use strict";Object.defineProperty(ZL,"__esModule",{value:!0});ZL.default=l7t;function l7t(r){function e(n,i,o,l,c,p){var g=l||"<<anonymous>>",_=p||o;if(i[o]==null)return n?new Error("Required "+c+" `"+_+"` was not specified "+("in `"+g+"`.")):null;for(var x=arguments.length,T=Array(x>6?x-6:0),C=6;C<x;C++)T[C-6]=arguments[C];return r.apply(void 0,[i,o,g,c,_].concat(T))}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}gNe.exports=ZL.default});var xNe=A(()=>{var _Ne=Ed(),u7t=EW()(!1);_Ne(_Ne.S,"Object",{values:function(e){return u7t(e)}})});var wNe=A((lqr,bNe)=>{xNe();bNe.exports=Jc().Object.values});var SNe=A((uqr,ENe)=>{ENe.exports=wNe()});var MNe=A(qn=>{"use strict";var Jo=typeof Symbol=="function"&&Symbol.for,RW=Jo?Symbol.for("react.element"):60103,OW=Jo?Symbol.for("react.portal"):60106,KL=Jo?Symbol.for("react.fragment"):60107,XL=Jo?Symbol.for("react.strict_mode"):60108,QL=Jo?Symbol.for("react.profiler"):60114,JL=Jo?Symbol.for("react.provider"):60109,e2=Jo?Symbol.for("react.context"):60110,LW=Jo?Symbol.for("react.async_mode"):60111,t2=Jo?Symbol.for("react.concurrent_mode"):60111,r2=Jo?Symbol.for("react.forward_ref"):60112,n2=Jo?Symbol.for("react.suspense"):60113,f7t=Jo?Symbol.for("react.suspense_list"):60120,i2=Jo?Symbol.for("react.memo"):60115,o2=Jo?Symbol.for("react.lazy"):60116,p7t=Jo?Symbol.for("react.block"):60121,d7t=Jo?Symbol.for("react.fundamental"):60117,m7t=Jo?Symbol.for("react.responder"):60118,g7t=Jo?Symbol.for("react.scope"):60119;function yl(r){if(typeof r=="object"&&r!==null){var e=r.$$typeof;switch(e){case RW:switch(r=r.type,r){case LW:case t2:case KL:case QL:case XL:case n2:return r;default:switch(r=r&&r.$$typeof,r){case e2:case r2:case o2:case i2:case JL:return r;default:return e}}case OW:return e}}}function INe(r){return yl(r)===t2}qn.AsyncMode=LW;qn.ConcurrentMode=t2;qn.ContextConsumer=e2;qn.ContextProvider=JL;qn.Element=RW;qn.ForwardRef=r2;qn.Fragment=KL;qn.Lazy=o2;qn.Memo=i2;qn.Portal=OW;qn.Profiler=QL;qn.StrictMode=XL;qn.Suspense=n2;qn.isAsyncMode=function(r){return INe(r)||yl(r)===LW};qn.isConcurrentMode=INe;qn.isContextConsumer=function(r){return yl(r)===e2};qn.isContextProvider=function(r){return yl(r)===JL};qn.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===RW};qn.isForwardRef=function(r){return yl(r)===r2};qn.isFragment=function(r){return yl(r)===KL};qn.isLazy=function(r){return yl(r)===o2};qn.isMemo=function(r){return yl(r)===i2};qn.isPortal=function(r){return yl(r)===OW};qn.isProfiler=function(r){return yl(r)===QL};qn.isStrictMode=function(r){return yl(r)===XL};qn.isSuspense=function(r){return yl(r)===n2};qn.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===KL||r===t2||r===QL||r===XL||r===n2||r===f7t||typeof r=="object"&&r!==null&&(r.$$typeof===o2||r.$$typeof===i2||r.$$typeof===JL||r.$$typeof===e2||r.$$typeof===r2||r.$$typeof===d7t||r.$$typeof===m7t||r.$$typeof===g7t||r.$$typeof===p7t)};qn.typeOf=yl});var CNe=A((dqr,ANe)=>{"use strict";ANe.exports=MNe()});var gf=A((a2,RNe)=>{"use strict";Object.defineProperty(a2,"__esModule",{value:!0});var v7t=Et(),y7t=PNe(v7t),_7t=CNe(),x7t=NS(),b7t=PNe(x7t);function PNe(r){return r&&r.__esModule?r:{default:r}}function w7t(r,e,t,n,i){var o=r[e];return y7t.default.isValidElement(o)?new Error("Invalid "+n+" `"+i+"` of type ReactElement "+("supplied to `"+t+"`,expected an element type (a string ")+", component class, or function component)."):(0,_7t.isValidElementType)(o)?null:new Error("Invalid "+n+" `"+i+"` of value `"+o+"` "+("supplied to `"+t+"`, expected an element type (a string ")+", component class, or function component).")}a2.default=(0,b7t.default)(w7t);RNe.exports=a2.default});var u2=A((l2,kNe)=>{"use strict";Object.defineProperty(l2,"__esModule",{value:!0});l2.default=R7t;var A7t=NS(),C7t=P7t(A7t);function P7t(r){return r&&r.__esModule?r:{default:r}}function R7t(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];function n(){for(var i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];var c=null;return e.forEach(function(p){if(c==null){var g=p.apply(void 0,o);g!=null&&(c=g)}}),c}return(0,C7t.default)(n)}kNe.exports=l2.default});var zW=A((Nqr,zNe)=>{"use strict";var D7t=function(){};zNe.exports=D7t});var qa=A((kqr,qS)=>{function N7t(r){return r&&r.__esModule?r:{default:r}}qS.exports=N7t,qS.exports.__esModule=!0,qS.exports.default=qS.exports});var UNe=A((h2,BNe)=>{"use strict";h2.__esModule=!0;h2.default=q7t;var k7t=/-(.)/g;function q7t(r){return r.replace(k7t,function(e,t){return t.toUpperCase()})}BNe.exports=h2.default});var BW=A((f2,VNe)=>{"use strict";var j7t=qa();f2.__esModule=!0;f2.default=B7t;var F7t=j7t(UNe()),z7t=/^-ms-/;function B7t(r){return(0,F7t.default)(r.replace(z7t,"ms-"))}VNe.exports=f2.default});var $Ne=A((p2,GNe)=>{"use strict";p2.__esModule=!0;p2.default=V7t;var U7t=/([A-Z])/g;function V7t(r){return r.replace(U7t,"-$1").toLowerCase()}GNe.exports=p2.default});var WNe=A((d2,HNe)=>{"use strict";var G7t=qa();d2.__esModule=!0;d2.default=W7t;var $7t=G7t($Ne()),H7t=/^ms-/;function W7t(r){return(0,$7t.default)(r).replace(H7t,"-ms-")}HNe.exports=d2.default});var YNe=A((m2,ZNe)=>{"use strict";var Z7t=qa();m2.__esModule=!0;m2.default=Q7t;var Y7t=Z7t(BW()),K7t=/^(top|right|bottom|left)$/,X7t=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function Q7t(r){if(!r)throw new TypeError("No Element passed to `getComputedStyle()`");var e=r.ownerDocument;return"defaultView"in e?e.defaultView.opener?r.ownerDocument.defaultView.getComputedStyle(r,null):window.getComputedStyle(r,null):{getPropertyValue:function(n){var i=r.style;n=(0,Y7t.default)(n),n=="float"&&(n="styleFloat");var o=r.currentStyle[n]||null;if(o==null&&i&&i[n]&&(o=i[n]),X7t.test(o)&&!K7t.test(n)){var l=i.left,c=r.runtimeStyle,p=c&&c.left;p&&(c.left=r.currentStyle.left),i.left=n==="fontSize"?"1em":o,o=i.pixelLeft+"px",i.left=l,p&&(c.left=p)}return o}}}ZNe.exports=m2.default});var XNe=A((g2,KNe)=>{"use strict";g2.__esModule=!0;g2.default=J7t;function J7t(r,e){return"removeProperty"in r.style?r.style.removeProperty(e):r.style.removeAttribute(e)}KNe.exports=g2.default});var th=A((jS,QNe)=>{"use strict";jS.__esModule=!0;jS.default=void 0;var eXt=!!(typeof window!="undefined"&&window.document&&window.document.createElement);jS.default=eXt;QNe.exports=jS.default});var ike=A(on=>{"use strict";var tXt=qa();on.__esModule=!0;on.default=on.animationEnd=on.animationDelay=on.animationTiming=on.animationDuration=on.animationName=on.transitionEnd=on.transitionDuration=on.transitionDelay=on.transitionTiming=on.transitionProperty=on.transform=void 0;var rXt=tXt(th()),y2="transform";on.transform=y2;var rh,UW,JNe;on.animationEnd=JNe;on.transitionEnd=UW;var VW,GW,$W,HW;on.transitionDelay=HW;on.transitionTiming=$W;on.transitionDuration=GW;on.transitionProperty=VW;var eke,tke,rke,nke;on.animationDelay=nke;on.animationTiming=rke;on.animationDuration=tke;on.animationName=eke;rXt.default&&(v2=iXt(),rh=v2.prefix,on.transitionEnd=UW=v2.transitionEnd,on.animationEnd=JNe=v2.animationEnd,on.transform=y2=rh+"-"+y2,on.transitionProperty=VW=rh+"-transition-property",on.transitionDuration=GW=rh+"-transition-duration",on.transitionDelay=HW=rh+"-transition-delay",on.transitionTiming=$W=rh+"-transition-timing-function",on.animationName=eke=rh+"-animation-name",on.animationDuration=tke=rh+"-animation-duration",on.animationTiming=rke=rh+"-animation-delay",on.animationDelay=nke=rh+"-animation-timing-function");var v2,nXt={transform:y2,end:UW,property:VW,timing:$W,delay:HW,duration:GW};on.default=nXt;function iXt(){for(var r=document.createElement("div").style,e={O:function(g){return"o"+g.toLowerCase()},Moz:function(g){return g.toLowerCase()},Webkit:function(g){return"webkit"+g},ms:function(g){return"MS"+g}},t=Object.keys(e),n,i,o="",l=0;l<t.length;l++){var c=t[l];if(c+"TransitionProperty"in r){o="-"+c.toLowerCase(),n=e[c]("TransitionEnd"),i=e[c]("AnimationEnd");break}}return!n&&"transitionProperty"in r&&(n="transitionend"),!i&&"animationName"in r&&(i="animationend"),r=null,{animationEnd:i,transitionEnd:n,prefix:o}}});var ake=A((_2,oke)=>{"use strict";_2.__esModule=!0;_2.default=aXt;var oXt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function aXt(r){return!!(r&&oXt.test(r))}oke.exports=_2.default});var lke=A((x2,ske)=>{"use strict";var FS=qa();x2.__esModule=!0;x2.default=fXt;var sXt=FS(BW()),WW=FS(WNe()),lXt=FS(YNe()),uXt=FS(XNe()),cXt=ike(),hXt=FS(ake());function fXt(r,e,t){var n="",i="",o=e;if(typeof e=="string"){if(t===void 0)return r.style[(0,sXt.default)(e)]||(0,lXt.default)(r).getPropertyValue((0,WW.default)(e));(o={})[e]=t}Object.keys(o).forEach(function(l){var c=o[l];!c&&c!==0?(0,uXt.default)(r,(0,WW.default)(l)):(0,hXt.default)(l)?i+=l+"("+c+") ":n+=(0,WW.default)(l)+": "+c+";"}),i&&(n+=cXt.transform+": "+i+";"),r.style.cssText+=";"+n}ske.exports=x2.default});var uke=A(b0=>{"use strict";b0.__esModule=!0;b0.classNamesShape=b0.timeoutsShape=void 0;var jqr=pXt(tn());function pXt(r){return r&&r.__esModule?r:{default:r}}var dXt=null;b0.timeoutsShape=dXt;var mXt=null;b0.classNamesShape=mXt});var hke=A($s=>{"use strict";$s.__esModule=!0;$s.default=$s.EXITING=$s.ENTERED=$s.ENTERING=$s.EXITED=$s.UNMOUNTED=void 0;var gXt=_Xt(tn()),ZW=cke(Et()),vXt=cke(No()),yXt=wW(),zqr=uke();function cke(r){return r&&r.__esModule?r:{default:r}}function _Xt(r){if(r&&r.__esModule)return r;var e={};if(r!=null){for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,t):{};n.get||n.set?Object.defineProperty(e,t,n):e[t]=r[t]}}return e.default=r,e}function xXt(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function bXt(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var zS="unmounted";$s.UNMOUNTED=zS;var Vg="exited";$s.EXITED=Vg;var Gg="entering";$s.ENTERING=Gg;var E0="entered";$s.ENTERED=E0;var YW="exiting";$s.EXITING=YW;var nh=function(r){bXt(e,r);function e(n,i){var o;o=r.call(this,n,i)||this;var l=i.transitionGroup,c=l&&!l.isMounting?n.enter:n.appear,p;return o.appearStatus=null,n.in?c?(p=Vg,o.appearStatus=Gg):p=E0:n.unmountOnExit||n.mountOnEnter?p=zS:p=Vg,o.state={status:p},o.nextCallback=null,o}var t=e.prototype;return t.getChildContext=function(){return{transitionGroup:null}},e.getDerivedStateFromProps=function(i,o){var l=i.in;return l&&o.status===zS?{status:Vg}:null},t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(i){var o=null;if(i!==this.props){var l=this.state.status;this.props.in?l!==Gg&&l!==E0&&(o=Gg):(l===Gg||l===E0)&&(o=YW)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var i=this.props.timeout,o,l,c;return o=l=c=i,i!=null&&typeof i!="number"&&(o=i.exit,l=i.enter,c=i.appear!==void 0?i.appear:l),{exit:o,enter:l,appear:c}},t.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null){this.cancelNextCallback();var l=vXt.default.findDOMNode(this);o===Gg?this.performEnter(l,i):this.performExit(l)}else this.props.unmountOnExit&&this.state.status===Vg&&this.setState({status:zS})},t.performEnter=function(i,o){var l=this,c=this.props.enter,p=this.context.transitionGroup?this.context.transitionGroup.isMounting:o,g=this.getTimeouts(),_=p?g.appear:g.enter;if(!o&&!c){this.safeSetState({status:E0},function(){l.props.onEntered(i)});return}this.props.onEnter(i,p),this.safeSetState({status:Gg},function(){l.props.onEntering(i,p),l.onTransitionEnd(i,_,function(){l.safeSetState({status:E0},function(){l.props.onEntered(i,p)})})})},t.performExit=function(i){var o=this,l=this.props.exit,c=this.getTimeouts();if(!l){this.safeSetState({status:Vg},function(){o.props.onExited(i)});return}this.props.onExit(i),this.safeSetState({status:YW},function(){o.props.onExiting(i),o.onTransitionEnd(i,c.exit,function(){o.safeSetState({status:Vg},function(){o.props.onExited(i)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},t.setNextCallback=function(i){var o=this,l=!0;return this.nextCallback=function(c){l&&(l=!1,o.nextCallback=null,i(c))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},t.onTransitionEnd=function(i,o,l){this.setNextCallback(l);var c=o==null&&!this.props.addEndListener;if(!i||c){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(i,this.nextCallback),o!=null&&setTimeout(this.nextCallback,o)},t.render=function(){var i=this.state.status;if(i===zS)return null;var o=this.props,l=o.children,c=xXt(o,["children"]);if(delete c.in,delete c.mountOnEnter,delete c.unmountOnExit,delete c.appear,delete c.enter,delete c.exit,delete c.timeout,delete c.addEndListener,delete c.onEnter,delete c.onEntering,delete c.onEntered,delete c.onExit,delete c.onExiting,delete c.onExited,typeof l=="function")return l(i,c);var p=ZW.default.Children.only(l);return ZW.default.cloneElement(p,c)},e}(ZW.default.Component);nh.contextTypes={transitionGroup:gXt.object};nh.childContextTypes={transitionGroup:function(){}};nh.propTypes={};function w0(){}nh.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:w0,onEntering:w0,onEntered:w0,onExit:w0,onExiting:w0,onExited:w0};nh.UNMOUNTED=0;nh.EXITED=1;nh.ENTERING=2;nh.ENTERED=3;nh.EXITING=4;var wXt=(0,yXt.polyfill)(nh);$s.default=wXt});var BS=A((b2,fke)=>{"use strict";b2.__esModule=!0;b2.default=EXt;function EXt(r){return r&&r.ownerDocument||document}fke.exports=b2.default});var KW=A((w2,pke)=>{"use strict";var SXt=qa();w2.__esModule=!0;w2.default=IXt;var TXt=SXt(BS());function IXt(r){r===void 0&&(r=(0,TXt.default)());try{return r.activeElement}catch(e){}}pke.exports=w2.default});var VS=A((US,mke)=>{"use strict";var MXt=qa();US.__esModule=!0;US.default=void 0;var AXt=MXt(th()),CXt=function(){return AXt.default?function(r,e){return r.contains?r.contains(e):r.compareDocumentPosition?r===e||!!(r.compareDocumentPosition(e)&16):dke(r,e)}:dke}();US.default=CXt;function dke(r,e){if(e)do if(e===r)return!0;while(e=e.parentNode);return!1}mke.exports=US.default});var QW=A(($g,yke)=>{function gke(r){if(r&&typeof r=="object"){var e=r.which||r.keyCode||r.charCode;e&&(r=e)}if(typeof r=="number")return vke[r];var t=String(r),n=yf[t.toLowerCase()];if(n)return n;var n=E2[t.toLowerCase()];if(n)return n;if(t.length===1)return t.charCodeAt(0)}gke.isEventKey=function(e,t){if(e&&typeof e=="object"){var n=e.which||e.keyCode||e.charCode;if(n==null)return!1;if(typeof t=="string"){var i=yf[t.toLowerCase()];if(i)return i===n;var i=E2[t.toLowerCase()];if(i)return i===n}else if(typeof t=="number")return t===n;return!1}};$g=yke.exports=gke;var yf=$g.code=$g.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},E2=$g.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(ji=97;ji<123;ji++)yf[String.fromCharCode(ji)]=ji-32;for(ji=48;ji<58;ji++)yf[ji-48]=ji;var ji;for(ji=1;ji<13;ji++)yf["f"+ji]=ji+111;for(ji=0;ji<10;ji++)yf["numpad "+ji]=ji+96;var vke=$g.names=$g.title={};for(ji in yf)vke[yf[ji]]=ji;for(XW in E2)yf[XW]=E2[XW];var XW});var xke=A((S2,_ke)=>{"use strict";Object.defineProperty(S2,"__esModule",{value:!0});S2.default=PXt;function PXt(r){return function(t,n,i,o,l){var c=i||"<<anonymous>>",p=l||n;if(t[n]==null)return new Error("The "+o+" `"+p+"` is required to make "+("`"+c+"` accessible for users of assistive ")+"technologies such as screen readers.");for(var g=arguments.length,_=Array(g>5?g-5:0),x=5;x<g;x++)_[x-5]=arguments[x];return r.apply(void 0,[t,n,i,o,l].concat(_))}}_ke.exports=S2.default});var wke=A((Uqr,bke)=>{var RXt=kL(),OXt=NL();bke.exports=function(r){return function(e,t){var n=String(OXt(e)),i=RXt(t),o=n.length,l,c;return i<0||i>=o?r?"":void 0:(l=n.charCodeAt(i),l<55296||l>56319||i+1===o||(c=n.charCodeAt(i+1))<56320||c>57343?r?n.charAt(i):l:r?n.slice(i,i+2):(l-55296<<10)+(c-56320)+65536)}}});var Ske=A((Vqr,Eke)=>{Eke.exports=PS()});var T2=A((Gqr,Tke)=>{Tke.exports={}});var Td=A(($qr,Mke)=>{var JW=cW()("wks"),LXt=hW(),eZ=p0().Symbol,Ike=typeof eZ=="function",DXt=Mke.exports=function(r){return JW[r]||(JW[r]=Ike&&eZ[r]||(Ike?eZ:LXt)("Symbol."+r))};DXt.store=JW});var tZ=A((Hqr,Cke)=>{var NXt=AS().f,kXt=m0(),Ake=Td()("toStringTag");Cke.exports=function(r,e,t){r&&!kXt(r=t?r:r.prototype,Ake)&&NXt(r,Ake,{configurable:!0,value:e})}});var Oke=A((Wqr,Rke)=>{"use strict";var qXt=vW(),jXt=CS(),FXt=tZ(),Pke={};PS()(Pke,Td()("iterator"),function(){return this});Rke.exports=function(r,e,t){r.prototype=qXt(Pke,{next:jXt(1,t)}),FXt(r,e+" Iterator")}});var Nke=A((Zqr,Dke)=>{var zXt=m0(),BXt=zL(),Lke=qL()("IE_PROTO"),UXt=Object.prototype;Dke.exports=Object.getPrototypeOf||function(r){return r=BXt(r),zXt(r,Lke)?r[Lke]:typeof r.constructor=="function"&&r instanceof r.constructor?r.constructor.prototype:r instanceof Object?UXt:null}});var Uke=A((Yqr,Bke)=>{"use strict";var kke=uW(),rZ=Ed(),VXt=Ske(),qke=PS(),jke=T2(),GXt=Oke(),$Xt=tZ(),HXt=Nke(),GS=Td()("iterator"),nZ=!([].keys&&"next"in[].keys()),WXt="@@iterator",Fke="keys",I2="values",zke=function(){return this};Bke.exports=function(r,e,t,n,i,o,l){GXt(t,e,n);var c=function(U){if(!nZ&&U in x)return x[U];switch(U){case Fke:return function(){return new t(this,U)};case I2:return function(){return new t(this,U)}}return function(){return new t(this,U)}},p=e+" Iterator",g=i==I2,_=!1,x=r.prototype,T=x[GS]||x[WXt]||i&&x[i],C=T||c(i),D=i?g?c("entries"):C:void 0,F=e=="Array"&&x.entries||T,O,k,q;if(F&&(q=HXt(F.call(new r)),q!==Object.prototype&&q.next&&($Xt(q,p,!0),!kke&&typeof q[GS]!="function"&&qke(q,GS,zke))),g&&T&&T.name!==I2&&(_=!0,C=function(){return T.call(this)}),(!kke||l)&&(nZ||_||!x[GS])&&qke(x,GS,C),jke[e]=C,jke[p]=zke,i)if(O={values:g?C:c(I2),keys:o?C:c(Fke),entries:D},l)for(k in O)k in x||VXt(x,k,O[k]);else rZ(rZ.P+rZ.F*(nZ||_),e,O);return O}});var Vke=A(()=>{"use strict";var ZXt=wke()(!0);Uke()(String,"String",function(r){this._t=String(r),this._i=0},function(){var r=this._t,e=this._i,t;return e>=r.length?{value:void 0,done:!0}:(t=ZXt(r,e),this._i+=t.length,{value:t,done:!1})})});var Hke=A((Qqr,$ke)=>{var Gke=d0();$ke.exports=function(r,e,t,n){try{return n?e(Gke(t)[0],t[1]):e(t)}catch(o){var i=r.return;throw i!==void 0&&Gke(i.call(r)),o}}});var Zke=A((Jqr,Wke)=>{var YXt=T2(),KXt=Td()("iterator"),XXt=Array.prototype;Wke.exports=function(r){return r!==void 0&&(YXt.Array===r||XXt[KXt]===r)}});var Kke=A((ejr,Yke)=>{"use strict";var QXt=AS(),JXt=CS();Yke.exports=function(r,e,t){e in r?QXt.f(r,e,JXt(0,t)):r[e]=t}});var Qke=A((tjr,Xke)=>{var iZ=aW(),eQt=Td()("toStringTag"),tQt=iZ(function(){return arguments}())=="Arguments",rQt=function(r,e){try{return r[e]}catch(t){}};Xke.exports=function(r){var e,t,n;return r===void 0?"Undefined":r===null?"Null":typeof(t=rQt(e=Object(r),eQt))=="string"?t:tQt?iZ(e):(n=iZ(e))=="Object"&&typeof e.callee=="function"?"Arguments":n}});var eqe=A((rjr,Jke)=>{var nQt=Qke(),iQt=Td()("iterator"),oQt=T2();Jke.exports=Jc().getIteratorMethod=function(r){if(r!=null)return r[iQt]||r["@@iterator"]||oQt[nQt(r)]}});var nqe=A((njr,rqe)=>{var aZ=Td()("iterator"),tqe=!1;try{oZ=[7][aZ](),oZ.return=function(){tqe=!0},Array.from(oZ,function(){throw 2})}catch(r){}var oZ;rqe.exports=function(r,e){if(!e&&!tqe)return!1;var t=!1;try{var n=[7],i=n[aZ]();i.next=function(){return{done:t=!0}},n[aZ]=function(){return i},r(n)}catch(o){}return t}});var oqe=A(()=>{"use strict";var aQt=PL(),sZ=Ed(),sQt=zL(),lQt=Hke(),uQt=Zke(),cQt=lW(),iqe=Kke(),hQt=eqe();sZ(sZ.S+sZ.F*!nqe()(function(r){Array.from(r)}),"Array",{from:function(e){var t=sQt(e),n=typeof this=="function"?this:Array,i=arguments.length,o=i>1?arguments[1]:void 0,l=o!==void 0,c=0,p=hQt(t),g,_,x,T;if(l&&(o=aQt(o,i>2?arguments[2]:void 0,2)),p!=null&&!(n==Array&&uQt(p)))for(T=p.call(t),_=new n;!(x=T.next()).done;c++)iqe(_,c,l?lQt(T,o,[x.value,c],!0):x.value);else for(g=cQt(t.length),_=new n(g);g>c;c++)iqe(_,c,l?o(t[c],c):t[c]);return _.length=c,_}})});var sqe=A((ajr,aqe)=>{Vke();oqe();aqe.exports=Jc().Array.from});var uqe=A((sjr,lqe)=>{lqe.exports=sqe()});var M2=A(($S,hqe)=>{"use strict";var fQt=qa();$S.__esModule=!0;$S.default=void 0;var pQt=fQt(th()),cqe=function(){};pQt.default&&(cqe=function(){if(document.addEventListener)return function(r,e,t,n){return r.addEventListener(e,t,n||!1)};if(document.attachEvent)return function(r,e,t){return r.attachEvent("on"+e,function(n){n=n||window.event,n.target=n.target||n.srcElement,n.currentTarget=r,t.call(r,n)})}}());var dQt=cqe;$S.default=dQt;hqe.exports=$S.default});var A2=A((HS,pqe)=>{"use strict";var mQt=qa();HS.__esModule=!0;HS.default=void 0;var gQt=mQt(th()),fqe=function(){};gQt.default&&(fqe=function(){if(document.addEventListener)return function(r,e,t,n){return r.removeEventListener(e,t,n||!1)};if(document.attachEvent)return function(r,e,t){return r.detachEvent("on"+e,t)}}());var vQt=fqe;HS.default=vQt;pqe.exports=HS.default});var lZ=A((C2,mqe)=>{"use strict";C2.__esModule=!0;C2.default=function(r,e,t,n){return(0,_Qt.default)(r,e,t,n),{remove:function(){(0,bQt.default)(r,e,t,n)}}};var yQt=M2(),_Qt=dqe(yQt),xQt=A2(),bQt=dqe(xQt);function dqe(r){return r&&r.__esModule?r:{default:r}}mqe.exports=C2.default});var WS=A((P2,vqe)=>{"use strict";P2.__esModule=!0;P2.default=function(r){return(0,TQt.default)(EQt.default.findDOMNode(r))};var wQt=No(),EQt=gqe(wQt),SQt=BS(),TQt=gqe(SQt);function gqe(r){return r&&r.__esModule?r:{default:r}}vqe.exports=P2.default});var _qe=A((L2,yqe)=>{"use strict";L2.__esModule=!0;var IQt=VS(),MQt=S0(IQt),AQt=tn(),R2=S0(AQt),CQt=Et(),PQt=S0(CQt),RQt=No(),OQt=S0(RQt),LQt=lZ(),uZ=S0(LQt),DQt=WS(),NQt=S0(DQt);function S0(r){return r&&r.__esModule?r:{default:r}}function kQt(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function qQt(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function jQt(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var FQt=27;function zQt(r){return r.button===0}function BQt(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}var O2=function(r){jQt(e,r);function e(t,n){kQt(this,e);var i=qQt(this,r.call(this,t,n));return i.addEventListeners=function(){i.currentEvent=window.event;var o=i.props.event,l=(0,NQt.default)(i);i.documentMouseCaptureListener=(0,uZ.default)(l,o,i.handleMouseCapture,!0),i.documentMouseListener=(0,uZ.default)(l,o,i.handleMouse),i.documentKeyupListener=(0,uZ.default)(l,"keyup",i.handleKeyUp)},i.removeEventListeners=function(){i.documentMouseCaptureListener&&i.documentMouseCaptureListener.remove(),i.documentMouseListener&&i.documentMouseListener.remove(),i.documentKeyupListener&&i.documentKeyupListener.remove()},i.handleMouseCapture=function(o){i.preventMouseRootClose=BQt(o)||!zQt(o)||(0,MQt.default)(OQt.default.findDOMNode(i),o.target)},i.handleMouse=function(o){if(o===i.currentEvent){i.currentEvent=void 0;return}!i.preventMouseRootClose&&i.props.onRootClose&&i.props.onRootClose(o)},i.handleKeyUp=function(o){if(o===i.currentEvent){i.currentEvent=void 0;return}o.keyCode===FQt&&i.props.onRootClose&&i.props.onRootClose(o)},i.preventMouseRootClose=!1,i}return e.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},e.prototype.componentDidUpdate=function(n){!this.props.disabled&&n.disabled?this.addEventListeners():this.props.disabled&&!n.disabled&&this.removeEventListeners()},e.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},e.prototype.render=function(){return this.props.children},e}(PQt.default.Component);O2.displayName="RootCloseWrapper";O2.propTypes={onRootClose:R2.default.func,children:R2.default.element,disabled:R2.default.bool,event:R2.default.oneOf(["click","mousedown"])};O2.defaultProps={event:"click"};L2.default=O2;yqe.exports=L2.default});var kqe=A((z2,Nqe)=>{"use strict";z2.__esModule=!0;z2.default=eJt;var JQt=/^[\w-]*$/,wZ=Function.prototype.bind.call(Function.prototype.call,[].slice);function eJt(r,e){var t=e[0]==="#",n=e[0]===".",i=t||n?e.slice(1):e,o=JQt.test(i),l;return o?t?(r=r.getElementById?r:document,(l=r.getElementById(i))?[l]:[]):r.getElementsByClassName&&n?wZ(r.getElementsByClassName(i)):wZ(r.getElementsByTagName(e)):wZ(r.querySelectorAll(e))}Nqe.exports=z2.default});var Fqe=A((B2,jqe)=>{"use strict";var qqe=qa();B2.__esModule=!0;B2.default=nJt;var tJt=qqe(VS()),rJt=qqe(kqe());function nJt(r,e){return function(n){var i=n.currentTarget,o=n.target,l=(0,rJt.default)(i,r);l.some(function(c){return(0,tJt.default)(c,o)})&&e.call(this,n)}}jqe.exports=B2.default});var Uqe=A((QS,Bqe)=>{"use strict";var EZ=qa();QS.__esModule=!0;QS.default=void 0;var iJt=EZ(th()),oJt=EZ(M2()),aJt=EZ(A2()),zqe=function(){};iJt.default&&(zqe=function(e,t,n,i){return(0,oJt.default)(e,t,n,i),function(){(0,aJt.default)(e,t,n,i)}});var sJt=zqe;QS.default=sJt;Bqe.exports=QS.default});var Wqe=A(Id=>{"use strict";var U2=qa();Id.__esModule=!0;Id.default=void 0;var Vqe=U2(M2());Id.on=Vqe.default;var Gqe=U2(A2());Id.off=Gqe.default;var $qe=U2(Fqe());Id.filter=$qe.default;var Hqe=U2(Uqe());Id.listen=Hqe.default;var lJt={on:Vqe.default,off:Gqe.default,filter:$qe.default,listen:Hqe.default};Id.default=lJt});var SZ=A((G2,Zqe)=>{"use strict";var uJt=qa();G2.__esModule=!0;G2.default=hJt;var cJt=uJt(th()),V2;function hJt(r){if((!V2&&V2!==0||r)&&cJt.default){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),V2=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return V2}Zqe.exports=G2.default});var H2=A(($2,Kqe)=>{"use strict";Object.defineProperty($2,"__esModule",{value:!0});var fJt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},pJt=Et(),dJt=Yqe(pJt),mJt=NS(),gJt=Yqe(mJt);function Yqe(r){return r&&r.__esModule?r:{default:r}}function vJt(r,e,t,n,i){var o=r[e],l=typeof o=="undefined"?"undefined":fJt(o);return dJt.default.isValidElement(o)?new Error("Invalid "+n+" `"+i+"` of type ReactElement "+("supplied to `"+t+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(l!=="object"||typeof o.render!="function")&&o.nodeType!==1?new Error("Invalid "+n+" `"+i+"` of value `"+o+"` "+("supplied to `"+t+"`, expected a ReactComponent or a ")+"DOMElement."):null}$2.default=(0,gJt.default)(vJt);Kqe.exports=$2.default});var eje=A((Qjr,Jqe)=>{"use strict";var yJt=!1,Qqe=function(){};yJt&&(Xqe=function(e,t){var n=arguments.length;t=new Array(n>1?n-1:0);for(var i=1;i<n;i++)t[i-1]=arguments[i];var o=0,l="Warning: "+e.replace(/%s/g,function(){return t[o++]});typeof console!="undefined"&&console.error(l);try{throw new Error(l)}catch(c){}},Qqe=function(r,e,t){var n=arguments.length;t=new Array(n>2?n-2:0);for(var i=2;i<n;i++)t[i-2]=arguments[i];if(e===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");r||Xqe.apply(null,[e].concat(t))});var Xqe;Jqe.exports=Qqe});var nje=A((W2,rje)=>{"use strict";Object.defineProperty(W2,"__esModule",{value:!0});W2.default=tje;var _Jt=eje(),xJt=bJt(_Jt);function bJt(r){return r&&r.__esModule?r:{default:r}}var TZ={};function tje(r,e){return function(n,i,o,l,c){var p=o||"<<anonymous>>",g=c||i;if(n[i]!=null){var _=o+"."+i;(0,xJt.default)(TZ[_],"The "+l+" `"+g+"` of "+("`"+p+"` is deprecated. "+e+".")),TZ[_]=!0}for(var x=arguments.length,T=Array(x>5?x-5:0),C=5;C<x;C++)T[C-5]=arguments[C];return r.apply(void 0,[n,i,o,l,c].concat(T))}}function wJt(){TZ={}}tje._resetWarned=wJt;rje.exports=W2.default});var IZ=A((Z2,ije)=>{"use strict";Z2.__esModule=!0;Z2.default=EJt;function EJt(r,e){return r.classList?!!e&&r.classList.contains(e):(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+e+" ")!==-1}ije.exports=Z2.default});var aje=A((Y2,oje)=>{"use strict";var SJt=qa();Y2.__esModule=!0;Y2.default=IJt;var TJt=SJt(IZ());function IJt(r,e){r.classList?r.classList.add(e):(0,TJt.default)(r,e)||(typeof r.className=="string"?r.className=r.className+" "+e:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+e))}oje.exports=Y2.default});var uje=A((Jjr,lje)=>{"use strict";function sje(r,e){return r.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}lje.exports=function(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=sje(e.className,t):e.setAttribute("class",sje(e.className&&e.className.baseVal||"",t))}});var pje=A(Hg=>{"use strict";var MZ=qa();Hg.__esModule=!0;Hg.default=void 0;var cje=MZ(aje());Hg.addClass=cje.default;var hje=MZ(uje());Hg.removeClass=hje.default;var fje=MZ(IZ());Hg.hasClass=fje.default;var MJt={addClass:cje.default,removeClass:hje.default,hasClass:fje.default};Hg.default=MJt});var mje=A((K2,dje)=>{"use strict";K2.__esModule=!0;K2.default=AJt;function AJt(r){return r===r.window?r:r.nodeType===9?r.defaultView||r.parentWindow:!1}dje.exports=K2.default});var AZ=A((X2,yje)=>{"use strict";X2.__esModule=!0;X2.default=DJt;var CJt=mje(),gje=vje(CJt),PJt=BS(),RJt=vje(PJt);function vje(r){return r&&r.__esModule?r:{default:r}}function OJt(r){return r&&r.tagName.toLowerCase()==="body"}function LJt(r){var e=(0,RJt.default)(r),t=(0,gje.default)(e),n=t.innerWidth;if(!n){var i=e.documentElement.getBoundingClientRect();n=i.right-Math.abs(i.left)}return e.body.clientWidth<n}function DJt(r){var e=(0,gje.default)(r);return e||OJt(r)?LJt(r):r.scrollHeight>r.clientHeight}yje.exports=X2.default});var xje=A(JS=>{"use strict";JS.__esModule=!0;JS.ariaHidden=CZ;JS.hideSiblings=qJt;JS.showSiblings=jJt;var NJt=["template","script","style"],kJt=function(e){var t=e.nodeType,n=e.tagName;return t===1&&NJt.indexOf(n.toLowerCase())===-1},_je=function(e,t,n){t=[].concat(t),[].forEach.call(e.children,function(i){t.indexOf(i)===-1&&kJt(i)&&n(i)})};function CZ(r,e){e&&(r?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden"))}function qJt(r,e){_je(r,e,function(t){return CZ(!0,t)})}function jJt(r,e){_je(r,e,function(t){return CZ(!1,t)})}});var Sje=A((J2,Eje)=>{"use strict";J2.__esModule=!0;var FJt=pje(),bje=Q2(FJt),zJt=lke(),wje=Q2(zJt),BJt=SZ(),UJt=Q2(BJt),VJt=AZ(),GJt=Q2(VJt),PZ=xje();function Q2(r){return r&&r.__esModule?r:{default:r}}function $Jt(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function HJt(r,e){var t=-1;return r.some(function(n,i){if(e(n,i))return t=i,!0}),t}function WJt(r,e){return HJt(r,function(t){return t.modals.indexOf(e)!==-1})}function ZJt(r,e){var t={overflow:"hidden"};r.style={overflow:e.style.overflow,paddingRight:e.style.paddingRight},r.overflowing&&(t.paddingRight=parseInt((0,wje.default)(e,"paddingRight")||0,10)+(0,UJt.default)()+"px"),(0,wje.default)(e,t)}function YJt(r,e){var t=r.style;Object.keys(t).forEach(function(n){return e.style[n]=t[n]})}var KJt=function r(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.hideSiblingNodes,i=n===void 0?!0:n,o=t.handleContainerOverflow,l=o===void 0?!0:o;$Jt(this,r),this.add=function(c,p,g){var _=e.modals.indexOf(c),x=e.containers.indexOf(p);if(_!==-1)return _;if(_=e.modals.length,e.modals.push(c),e.hideSiblingNodes&&(0,PZ.hideSiblings)(p,c.modalNode),x!==-1)return e.data[x].modals.push(c),_;var T={modals:[c],classes:g?g.split(/\s+/):[],overflowing:(0,GJt.default)(p)};return e.handleContainerOverflow&&ZJt(T,p),T.classes.forEach(bje.default.addClass.bind(null,p)),e.containers.push(p),e.data.push(T),_},this.remove=function(c){var p=e.modals.indexOf(c);if(p!==-1){var g=WJt(e.data,c),_=e.data[g],x=e.containers[g];_.modals.splice(_.modals.indexOf(c),1),e.modals.splice(p,1),_.modals.length===0?(_.classes.forEach(bje.default.removeClass.bind(null,x)),e.handleContainerOverflow&&YJt(_,x),e.hideSiblingNodes&&(0,PZ.showSiblings)(x,c.modalNode),e.containers.splice(g,1),e.data.splice(g,1)):e.hideSiblingNodes&&(0,PZ.ariaHidden)(!1,_.modals[_.modals.length-1].modalNode)}},this.isTopModal=function(c){return!!e.modals.length&&e.modals[e.modals.length-1]===c},this.hideSiblingNodes=i,this.handleContainerOverflow=l,this.modals=[],this.containers=[],this.data=[]};J2.default=KJt;Eje.exports=J2.default});var tD=A((eD,Tje)=>{"use strict";eD.__esModule=!0;eD.default=eer;var XJt=No(),QJt=JJt(XJt);function JJt(r){return r&&r.__esModule?r:{default:r}}function eer(r,e){return r=typeof r=="function"?r():r,QJt.default.findDOMNode(r)||e}Tje.exports=eD.default});var Oje=A((rD,Rje)=>{"use strict";rD.__esModule=!0;var ter=tn(),RZ=A0(ter),rer=H2(),ner=A0(rer),ier=Et(),Ije=A0(ier),oer=No(),Mje=A0(oer),aer=tD(),Aje=A0(aer),ser=WS(),Cje=A0(ser);function A0(r){return r&&r.__esModule?r:{default:r}}function ler(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Pje(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function uer(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var OZ=function(r){uer(e,r);function e(){var t,n,i;ler(this,e);for(var o=arguments.length,l=Array(o),c=0;c<o;c++)l[c]=arguments[c];return i=(t=(n=Pje(this,r.call.apply(r,[this].concat(l))),n),n._mountOverlayTarget=function(){n._overlayTarget||(n._overlayTarget=document.createElement("div"),n._portalContainerNode=(0,Aje.default)(n.props.container,(0,Cje.default)(n).body),n._portalContainerNode.appendChild(n._overlayTarget))},n._unmountOverlayTarget=function(){n._overlayTarget&&(n._portalContainerNode.removeChild(n._overlayTarget),n._overlayTarget=null),n._portalContainerNode=null},n._renderOverlay=function(){var p=n.props.children?Ije.default.Children.only(n.props.children):null;if(p!==null){n._mountOverlayTarget();var g=!n._overlayInstance;n._overlayInstance=Mje.default.unstable_renderSubtreeIntoContainer(n,p,n._overlayTarget,function(){g&&n.props.onRendered&&n.props.onRendered()})}else n._unrenderOverlay(),n._unmountOverlayTarget()},n._unrenderOverlay=function(){n._overlayTarget&&(Mje.default.unmountComponentAtNode(n._overlayTarget),n._overlayInstance=null)},n.getMountNode=function(){return n._overlayTarget},t),Pje(n,i)}return e.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},e.prototype.componentDidUpdate=function(){this._renderOverlay()},e.prototype.UNSAFE_componentWillReceiveProps=function(n){this._overlayTarget&&n.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,Aje.default)(n.container,(0,Cje.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},e.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},e.prototype.render=function(){return null},e}(Ije.default.Component);OZ.displayName="Portal";OZ.propTypes={container:RZ.default.oneOfType([ner.default,RZ.default.func]),onRendered:RZ.default.func};rD.default=OZ;Rje.exports=rD.default});var Nje=A((nD,Dje)=>{"use strict";nD.__esModule=!0;var cer=th(),her=Md(cer),fer=tn(),LZ=Md(fer),per=H2(),der=Md(per),mer=Et(),ger=Md(mer),ver=No(),DZ=Md(ver),yer=tD(),_er=Md(yer),xer=WS(),ber=Md(xer),wer=Oje(),Eer=Md(wer);function Md(r){return r&&r.__esModule?r:{default:r}}function Ser(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Lje(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function Ter(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var NZ=function(r){Ter(e,r);function e(){var t,n,i;Ser(this,e);for(var o=arguments.length,l=Array(o),c=0;c<o;c++)l[c]=arguments[c];return i=(t=(n=Lje(this,r.call.apply(r,[this].concat(l))),n),n.getMountNode=function(){return n._portalContainerNode},t),Lje(n,i)}return e.prototype.UNSAFE_componentWillMount=function(){if(her.default){var n=this.props.container;typeof n=="function"&&(n=n()),!(n&&!DZ.default.findDOMNode(n))&&this.setContainer(n)}},e.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},e.prototype.UNSAFE_componentWillReceiveProps=function(n){n.container!==this.props.container&&this.setContainer(n.container)},e.prototype.componentWillUnmount=function(){this._portalContainerNode=null},e.prototype.setContainer=function(n){this._portalContainerNode=(0,_er.default)(n,(0,ber.default)(this).body)},e.prototype.render=function(){return this.props.children&&this._portalContainerNode?DZ.default.createPortal(this.props.children,this._portalContainerNode):null},e}(ger.default.Component);NZ.displayName="Portal";NZ.propTypes={container:LZ.default.oneOfType([der.default,LZ.default.func]),onRendered:LZ.default.func};nD.default=DZ.default.createPortal?NZ:Eer.default;Dje.exports=nD.default});var Fje=A((iD,jje)=>{"use strict";iD.__esModule=!0;var Ier=tn(),Mer=kje(Ier),Aer=Et(),Cer=kje(Aer);function kje(r){return r&&r.__esModule?r:{default:r}}function Per(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Rer(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function Oer(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var Ler={children:Mer.default.node},qje=function(r){Oer(e,r);function e(){return Per(this,e),Rer(this,r.apply(this,arguments))}return e.prototype.render=function(){return this.props.children},e}(Cer.default.Component);qje.propTypes=Ler;iD.default=qje;jje.exports=iD.default});var Bje=A((oD,zje)=>{"use strict";oD.__esModule=!0;oD.default=Der;function Der(r){var e=!document.addEventListener,t=void 0;return e?(document.attachEvent("onfocusin",r),t=function(){return document.detachEvent("onfocusin",r)}):(document.addEventListener("focus",r,!0),t=function(){return document.removeEventListener("focus",r,!0)}),{remove:t}}zje.exports=oD.default});var Xje=A((sD,Kje)=>{"use strict";sD.__esModule=!0;var $je=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ner=KW(),kZ=wa(Ner),ker=VS(),Hje=wa(ker),qer=th(),jer=wa(qer),Fer=tn(),hi=wa(Fer),zer=H2(),Ber=wa(zer),Uer=nje(),Ver=wa(Uer),Ger=gf(),Uje=wa(Ger),Wje=Et(),Ad=wa(Wje),$er=No(),Her=wa($er),Wer=zW(),Zer=wa(Wer),Yer=Sje(),Zje=wa(Yer),Ker=Nje(),Yje=wa(Ker),Xer=Fje(),Qer=wa(Xer),Jer=lZ(),Vje=wa(Jer),etr=Bje(),ttr=wa(etr),rtr=tD(),ntr=wa(rtr),itr=WS(),qZ=wa(itr);function wa(r){return r&&r.__esModule?r:{default:r}}function otr(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Gje(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function atr(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var str=new Zje.default,aD=function(r){atr(e,r);function e(){var t,n,i;otr(this,e);for(var o=arguments.length,l=Array(o),c=0;c<o;c++)l[c]=arguments[c];return i=(t=(n=Gje(this,r.call.apply(r,[this].concat(l))),n),ltr.call(n),t),Gje(n,i)}return e.prototype.omitProps=function(n,i){var o=Object.keys(n),l={};return o.map(function(c){Object.prototype.hasOwnProperty.call(i,c)||(l[c]=n[c])}),l},e.prototype.render=function(){var n=this.props,i=n.show,o=n.container,l=n.children,c=n.transition,p=n.backdrop,g=n.className,_=n.style,x=n.onExit,T=n.onExiting,C=n.onEnter,D=n.onEntering,F=n.onEntered,O=Ad.default.Children.only(l),k=this.omitProps(this.props,e.propTypes),q=i||c&&!this.state.exited;if(!q)return null;var U=O.props,H=U.role,se=U.tabIndex;return(H===void 0||se===void 0)&&(O=(0,Wje.cloneElement)(O,{role:H===void 0?"document":H,tabIndex:se==null?"-1":se})),c&&(O=Ad.default.createElement(c,{appear:!0,unmountOnExit:!0,in:i,onExit:x,onExiting:T,onExited:this.handleHidden,onEnter:C,onEntering:D,onEntered:F},O)),Ad.default.createElement(Yje.default,{ref:this.setMountNode,container:o,onRendered:this.onPortalRendered},Ad.default.createElement("div",$je({ref:this.setModalNodeRef,role:H||"dialog"},k,{style:_,className:g}),p&&this.renderBackdrop(),Ad.default.createElement(Qer.default,{ref:this.setDialogRef},O)))},e.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},e.prototype.UNSAFE_componentWillUpdate=function(n){!this.props.show&&n.show&&this.checkForFocus()},e.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},e.prototype.componentDidUpdate=function(n){var i=this.props.transition;n.show&&!this.props.show&&!i?this.onHide():!n.show&&this.props.show&&this.onShow()},e.prototype.componentWillUnmount=function(){var n=this.props,i=n.show,o=n.transition;this._isMounted=!1,(i||o&&!this.state.exited)&&this.onHide()},e.prototype.autoFocus=function(){if(this.props.autoFocus){var n=this.getDialogElement(),i=(0,kZ.default)((0,qZ.default)(this));n&&!(0,Hje.default)(n,i)&&(this.lastFocus=i,n.hasAttribute("tabIndex")||((0,Zer.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),n.setAttribute("tabIndex",-1)),n.focus())}},e.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},e.prototype.getDialogElement=function(){return Her.default.findDOMNode(this.dialog)},e.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},e}(Ad.default.Component);aD.propTypes=$je({},Yje.default.propTypes,{show:hi.default.bool,container:hi.default.oneOfType([Ber.default,hi.default.func]),onShow:hi.default.func,onHide:hi.default.func,backdrop:hi.default.oneOfType([hi.default.bool,hi.default.oneOf(["static"])]),renderBackdrop:hi.default.func,onEscapeKeyDown:hi.default.func,onEscapeKeyUp:(0,Ver.default)(hi.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:hi.default.func,backdropStyle:hi.default.object,backdropClassName:hi.default.string,containerClassName:hi.default.string,keyboard:hi.default.bool,transition:Uje.default,backdropTransition:Uje.default,autoFocus:hi.default.bool,enforceFocus:hi.default.bool,restoreFocus:hi.default.bool,onEnter:hi.default.func,onEntering:hi.default.func,onEntered:hi.default.func,onExit:hi.default.func,onExiting:hi.default.func,onExited:hi.default.func,manager:hi.default.object.isRequired});aD.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:str,renderBackdrop:function(e){return Ad.default.createElement("div",e)}};var ltr=function(){var e=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var t=e.props,n=t.backdropStyle,i=t.backdropClassName,o=t.renderBackdrop,l=t.backdropTransition,c=function(_){return e.backdrop=_},p=o({ref:c,style:n,className:i,onClick:e.handleBackdropClick});return l&&(p=Ad.default.createElement(l,{appear:!0,in:e.props.show},p)),p},this.onPortalRendered=function(){e.autoFocus(),e.props.onShow&&e.props.onShow()},this.onShow=function(){var t=(0,qZ.default)(e),n=(0,ntr.default)(e.props.container,t.body);e.props.manager.add(e,n,e.props.containerClassName),e._onDocumentKeydownListener=(0,Vje.default)(t,"keydown",e.handleDocumentKeyDown),e._onDocumentKeyupListener=(0,Vje.default)(t,"keyup",e.handleDocumentKeyUp),e._onFocusinListener=(0,ttr.default)(e.enforceFocus)},this.onHide=function(){e.props.manager.remove(e),e._onDocumentKeydownListener.remove(),e._onDocumentKeyupListener.remove(),e._onFocusinListener.remove(),e.props.restoreFocus&&e.restoreLastFocus()},this.setMountNode=function(t){e.mountNode=t&&t.getMountNode()},this.setModalNodeRef=function(t){e.modalNode=t},this.setDialogRef=function(t){e.dialog=t},this.handleHidden=function(){if(e.setState({exited:!0}),e.onHide(),e.props.onExited){var t;(t=e.props).onExited.apply(t,arguments)}},this.handleBackdropClick=function(t){t.target===t.currentTarget&&(e.props.onBackdropClick&&e.props.onBackdropClick(t),e.props.backdrop===!0&&e.props.onHide())},this.handleDocumentKeyDown=function(t){e.props.keyboard&&t.keyCode===27&&e.isTopModal()&&(e.props.onEscapeKeyDown&&e.props.onEscapeKeyDown(t),e.props.onHide())},this.handleDocumentKeyUp=function(t){e.props.keyboard&&t.keyCode===27&&e.isTopModal()&&e.props.onEscapeKeyUp&&e.props.onEscapeKeyUp(t)},this.checkForFocus=function(){jer.default&&(e.lastFocus=(0,kZ.default)())},this.enforceFocus=function(){if(!(!e.props.enforceFocus||!e._isMounted||!e.isTopModal())){var t=e.getDialogElement(),n=(0,kZ.default)((0,qZ.default)(e));t&&!(0,Hje.default)(t,n)&&t.focus()}}};aD.Manager=Zje.default;sD.default=aD;Kje.exports=sD.default});var DY=A((OY,LY)=>{(function(r,e){typeof OY=="object"&&typeof LY!="undefined"?LY.exports=e():typeof define=="function"&&define.amd?define(e):(r=r||self).RBush=e()})(OY,function(){"use strict";function r(O,k,q,U,H){(function se(ie,ue,ve,ye,ge){for(;ye>ve;){if(ye-ve>600){var _e=ye-ve+1,Le=ue-ve+1,Re=Math.log(_e),je=.5*Math.exp(2*Re/3),$e=.5*Math.sqrt(Re*je*(_e-je)/_e)*(Le-_e/2<0?-1:1),Be=Math.max(ve,Math.floor(ue-Le*je/_e+$e)),nt=Math.min(ye,Math.floor(ue+(_e-Le)*je/_e+$e));se(ie,ue,Be,nt,ge)}var We=ie[ue],mt=ve,ht=ye;for(e(ie,ve,ue),ge(ie[ye],We)>0&&e(ie,ve,ye);mt<ht;){for(e(ie,mt,ht),mt++,ht--;ge(ie[mt],We)<0;)mt++;for(;ge(ie[ht],We)>0;)ht--}ge(ie[ve],We)===0?e(ie,ve,ht):e(ie,++ht,ye),ht<=ue&&(ve=ht+1),ue<=ht&&(ye=ht-1)}})(O,k,q||0,U||O.length-1,H||t)}function e(O,k,q){var U=O[k];O[k]=O[q],O[q]=U}function t(O,k){return O<k?-1:O>k?1:0}var n=function(O){O===void 0&&(O=9),this._maxEntries=Math.max(4,O),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(O,k,q){if(!q)return k.indexOf(O);for(var U=0;U<k.length;U++)if(q(O,k[U]))return U;return-1}function o(O,k){l(O,0,O.children.length,k,O)}function l(O,k,q,U,H){H||(H=D(null)),H.minX=1/0,H.minY=1/0,H.maxX=-1/0,H.maxY=-1/0;for(var se=k;se<q;se++){var ie=O.children[se];c(H,O.leaf?U(ie):ie)}return H}function c(O,k){return O.minX=Math.min(O.minX,k.minX),O.minY=Math.min(O.minY,k.minY),O.maxX=Math.max(O.maxX,k.maxX),O.maxY=Math.max(O.maxY,k.maxY),O}function p(O,k){return O.minX-k.minX}function g(O,k){return O.minY-k.minY}function _(O){return(O.maxX-O.minX)*(O.maxY-O.minY)}function x(O){return O.maxX-O.minX+(O.maxY-O.minY)}function T(O,k){return O.minX<=k.minX&&O.minY<=k.minY&&k.maxX<=O.maxX&&k.maxY<=O.maxY}function C(O,k){return k.minX<=O.maxX&&k.minY<=O.maxY&&k.maxX>=O.minX&&k.maxY>=O.minY}function D(O){return{children:O,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function F(O,k,q,U,H){for(var se=[k,q];se.length;)if(!((q=se.pop())-(k=se.pop())<=U)){var ie=k+Math.ceil((q-k)/U/2)*U;r(O,ie,k,q,H),se.push(k,ie,ie,q)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(O){var k=this.data,q=[];if(!C(O,k))return q;for(var U=this.toBBox,H=[];k;){for(var se=0;se<k.children.length;se++){var ie=k.children[se],ue=k.leaf?U(ie):ie;C(O,ue)&&(k.leaf?q.push(ie):T(O,ue)?this._all(ie,q):H.push(ie))}k=H.pop()}return q},n.prototype.collides=function(O){var k=this.data;if(!C(O,k))return!1;for(var q=[];k;){for(var U=0;U<k.children.length;U++){var H=k.children[U],se=k.leaf?this.toBBox(H):H;if(C(O,se)){if(k.leaf||T(O,se))return!0;q.push(H)}}k=q.pop()}return!1},n.prototype.load=function(O){if(!O||!O.length)return this;if(O.length<this._minEntries){for(var k=0;k<O.length;k++)this.insert(O[k]);return this}var q=this._build(O.slice(),0,O.length-1,0);if(this.data.children.length){if(this.data.height===q.height)this._splitRoot(this.data,q);else{if(this.data.height<q.height){var U=this.data;this.data=q,q=U}this._insert(q,this.data.height-q.height-1,!0)}}else this.data=q;return this},n.prototype.insert=function(O){return O&&this._insert(O,this.data.height-1),this},n.prototype.clear=function(){return this.data=D([]),this},n.prototype.remove=function(O,k){if(!O)return this;for(var q,U,H,se=this.data,ie=this.toBBox(O),ue=[],ve=[];se||ue.length;){if(se||(se=ue.pop(),U=ue[ue.length-1],q=ve.pop(),H=!0),se.leaf){var ye=i(O,se.children,k);if(ye!==-1)return se.children.splice(ye,1),ue.push(se),this._condense(ue),this}H||se.leaf||!T(se,ie)?U?(q++,se=U.children[q],H=!1):se=null:(ue.push(se),ve.push(q),q=0,U=se,se=se.children[0])}return this},n.prototype.toBBox=function(O){return O},n.prototype.compareMinX=function(O,k){return O.minX-k.minX},n.prototype.compareMinY=function(O,k){return O.minY-k.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(O){return this.data=O,this},n.prototype._all=function(O,k){for(var q=[];O;)O.leaf?k.push.apply(k,O.children):q.push.apply(q,O.children),O=q.pop();return k},n.prototype._build=function(O,k,q,U){var H,se=q-k+1,ie=this._maxEntries;if(se<=ie)return o(H=D(O.slice(k,q+1)),this.toBBox),H;U||(U=Math.ceil(Math.log(se)/Math.log(ie)),ie=Math.ceil(se/Math.pow(ie,U-1))),(H=D([])).leaf=!1,H.height=U;var ue=Math.ceil(se/ie),ve=ue*Math.ceil(Math.sqrt(ie));F(O,k,q,ve,this.compareMinX);for(var ye=k;ye<=q;ye+=ve){var ge=Math.min(ye+ve-1,q);F(O,ye,ge,ue,this.compareMinY);for(var _e=ye;_e<=ge;_e+=ue){var Le=Math.min(_e+ue-1,ge);H.children.push(this._build(O,_e,Le,U-1))}}return o(H,this.toBBox),H},n.prototype._chooseSubtree=function(O,k,q,U){for(;U.push(k),!k.leaf&&U.length-1!==q;){for(var H=1/0,se=1/0,ie=void 0,ue=0;ue<k.children.length;ue++){var ve=k.children[ue],ye=_(ve),ge=(_e=O,Le=ve,(Math.max(Le.maxX,_e.maxX)-Math.min(Le.minX,_e.minX))*(Math.max(Le.maxY,_e.maxY)-Math.min(Le.minY,_e.minY))-ye);ge<se?(se=ge,H=ye<H?ye:H,ie=ve):ge===se&&ye<H&&(H=ye,ie=ve)}k=ie||k.children[0]}var _e,Le;return k},n.prototype._insert=function(O,k,q){var U=q?O:this.toBBox(O),H=[],se=this._chooseSubtree(U,this.data,k,H);for(se.children.push(O),c(se,U);k>=0&&H[k].children.length>this._maxEntries;)this._split(H,k),k--;this._adjustParentBBoxes(U,H,k)},n.prototype._split=function(O,k){var q=O[k],U=q.children.length,H=this._minEntries;this._chooseSplitAxis(q,H,U);var se=this._chooseSplitIndex(q,H,U),ie=D(q.children.splice(se,q.children.length-se));ie.height=q.height,ie.leaf=q.leaf,o(q,this.toBBox),o(ie,this.toBBox),k?O[k-1].children.push(ie):this._splitRoot(q,ie)},n.prototype._splitRoot=function(O,k){this.data=D([O,k]),this.data.height=O.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(O,k,q){for(var U,H,se,ie,ue,ve,ye,ge=1/0,_e=1/0,Le=k;Le<=q-k;Le++){var Re=l(O,0,Le,this.toBBox),je=l(O,Le,q,this.toBBox),$e=(H=Re,se=je,ie=void 0,ue=void 0,ve=void 0,ye=void 0,ie=Math.max(H.minX,se.minX),ue=Math.max(H.minY,se.minY),ve=Math.min(H.maxX,se.maxX),ye=Math.min(H.maxY,se.maxY),Math.max(0,ve-ie)*Math.max(0,ye-ue)),Be=_(Re)+_(je);$e<ge?(ge=$e,U=Le,_e=Be<_e?Be:_e):$e===ge&&Be<_e&&(_e=Be,U=Le)}return U||q-k},n.prototype._chooseSplitAxis=function(O,k,q){var U=O.leaf?this.compareMinX:p,H=O.leaf?this.compareMinY:g;this._allDistMargin(O,k,q,U)<this._allDistMargin(O,k,q,H)&&O.children.sort(U)},n.prototype._allDistMargin=function(O,k,q,U){O.children.sort(U);for(var H=this.toBBox,se=l(O,0,k,H),ie=l(O,q-k,q,H),ue=x(se)+x(ie),ve=k;ve<q-k;ve++){var ye=O.children[ve];c(se,O.leaf?H(ye):ye),ue+=x(se)}for(var ge=q-k-1;ge>=k;ge--){var _e=O.children[ge];c(ie,O.leaf?H(_e):_e),ue+=x(ie)}return ue},n.prototype._adjustParentBBoxes=function(O,k,q){for(var U=q;U>=0;U--)c(k[U],O)},n.prototype._condense=function(O){for(var k=O.length-1,q=void 0;k>=0;k--)O[k].children.length===0?k>0?(q=O[k-1].children).splice(q.indexOf(O[k]),1):this.clear():o(O[k],this.toBBox)},n})});var p3e=A(Bn=>{"use strict";var tK=Symbol.for("react.element"),rK=Symbol.for("react.portal"),HN=Symbol.for("react.fragment"),WN=Symbol.for("react.strict_mode"),ZN=Symbol.for("react.profiler"),YN=Symbol.for("react.provider"),KN=Symbol.for("react.context"),Asr=Symbol.for("react.server_context"),XN=Symbol.for("react.forward_ref"),QN=Symbol.for("react.suspense"),JN=Symbol.for("react.suspense_list"),ek=Symbol.for("react.memo"),tk=Symbol.for("react.lazy"),Csr=Symbol.for("react.offscreen"),f3e;f3e=Symbol.for("react.module.reference");function bu(r){if(typeof r=="object"&&r!==null){var e=r.$$typeof;switch(e){case tK:switch(r=r.type,r){case HN:case ZN:case WN:case QN:case JN:return r;default:switch(r=r&&r.$$typeof,r){case Asr:case KN:case XN:case tk:case ek:case YN:return r;default:return e}}case rK:return e}}}Bn.ContextConsumer=KN;Bn.ContextProvider=YN;Bn.Element=tK;Bn.ForwardRef=XN;Bn.Fragment=HN;Bn.Lazy=tk;Bn.Memo=ek;Bn.Portal=rK;Bn.Profiler=ZN;Bn.StrictMode=WN;Bn.Suspense=QN;Bn.SuspenseList=JN;Bn.isAsyncMode=function(){return!1};Bn.isConcurrentMode=function(){return!1};Bn.isContextConsumer=function(r){return bu(r)===KN};Bn.isContextProvider=function(r){return bu(r)===YN};Bn.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===tK};Bn.isForwardRef=function(r){return bu(r)===XN};Bn.isFragment=function(r){return bu(r)===HN};Bn.isLazy=function(r){return bu(r)===tk};Bn.isMemo=function(r){return bu(r)===ek};Bn.isPortal=function(r){return bu(r)===rK};Bn.isProfiler=function(r){return bu(r)===ZN};Bn.isStrictMode=function(r){return bu(r)===WN};Bn.isSuspense=function(r){return bu(r)===QN};Bn.isSuspenseList=function(r){return bu(r)===JN};Bn.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===HN||r===ZN||r===WN||r===QN||r===JN||r===Csr||typeof r=="object"&&r!==null&&(r.$$typeof===tk||r.$$typeof===ek||r.$$typeof===YN||r.$$typeof===KN||r.$$typeof===XN||r.$$typeof===f3e||r.getModuleId!==void 0)};Bn.typeOf=bu});var m3e=A((jnn,d3e)=>{"use strict";d3e.exports=p3e()});var _Ve=A(ti=>{"use strict";var jk=60103,Fk=60106,vI=60107,yI=60108,_I=60114,xI=60109,bI=60110,wI=60112,EI=60113,VK=60120,SI=60115,TI=60116,dVe=60121,mVe=60122,gVe=60117,vVe=60129,yVe=60131;typeof Symbol=="function"&&Symbol.for&&(ra=Symbol.for,jk=ra("react.element"),Fk=ra("react.portal"),vI=ra("react.fragment"),yI=ra("react.strict_mode"),_I=ra("react.profiler"),xI=ra("react.provider"),bI=ra("react.context"),wI=ra("react.forward_ref"),EI=ra("react.suspense"),VK=ra("react.suspense_list"),SI=ra("react.memo"),TI=ra("react.lazy"),dVe=ra("react.block"),mVe=ra("react.server.block"),gVe=ra("react.fundamental"),vVe=ra("react.debug_trace_mode"),yVe=ra("react.legacy_hidden"));var ra;function gc(r){if(typeof r=="object"&&r!==null){var e=r.$$typeof;switch(e){case jk:switch(r=r.type,r){case vI:case _I:case yI:case EI:case VK:return r;default:switch(r=r&&r.$$typeof,r){case bI:case wI:case TI:case SI:case xI:return r;default:return e}}case Fk:return e}}}var cur=xI,hur=jk,fur=wI,pur=vI,dur=TI,mur=SI,gur=Fk,vur=_I,yur=yI,_ur=EI;ti.ContextConsumer=bI;ti.ContextProvider=cur;ti.Element=hur;ti.ForwardRef=fur;ti.Fragment=pur;ti.Lazy=dur;ti.Memo=mur;ti.Portal=gur;ti.Profiler=vur;ti.StrictMode=yur;ti.Suspense=_ur;ti.isAsyncMode=function(){return!1};ti.isConcurrentMode=function(){return!1};ti.isContextConsumer=function(r){return gc(r)===bI};ti.isContextProvider=function(r){return gc(r)===xI};ti.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===jk};ti.isForwardRef=function(r){return gc(r)===wI};ti.isFragment=function(r){return gc(r)===vI};ti.isLazy=function(r){return gc(r)===TI};ti.isMemo=function(r){return gc(r)===SI};ti.isPortal=function(r){return gc(r)===Fk};ti.isProfiler=function(r){return gc(r)===_I};ti.isStrictMode=function(r){return gc(r)===yI};ti.isSuspense=function(r){return gc(r)===EI};ti.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===vI||r===_I||r===vVe||r===yI||r===EI||r===VK||r===yVe||typeof r=="object"&&r!==null&&(r.$$typeof===TI||r.$$typeof===SI||r.$$typeof===xI||r.$$typeof===bI||r.$$typeof===wI||r.$$typeof===gVe||r.$$typeof===dVe||r[0]===mVe)};ti.typeOf=gc});var bVe=A((pcn,xVe)=>{"use strict";xVe.exports=_Ve()});var ecr={};_$e(ecr,{SettingsProvider:()=>Qur,renderGeoreferenceApp:()=>Jur});var MGe=ke(Et(),1),AGe=ke(No(),1),Vhn=ke(dRe(),1);var POe=ke(lS(),1);var uS=ke(oH(),1);var s8t=ke($O(),1);var sH=(r,e="control-feedback-container")=>{let t=document.getElementById(e);if(t===null){let n=r.getCanvasContainer();t=document.createElement("div"),t.id=e,n.appendChild(t)}return t};function Zn(r){return r!=null}function kg(r){return typeof r=="string"||r instanceof String}function Ir(r){let e=qi.getLanguageDict();if(e===void 0)throw new Error("Dictionary is undefined.");let t=e[r];return t===void 0?(console.warn(`Translation for key "${r}" was not found in dictionary.`),""):t}var ROe={EN:"en",DE:"de"},u8t=typeof process!="undefined"&&Zn(process.env.DEV_MODE_SECRET)&&process.env.DEV_MODE_SECRET!==""&&Zn(process.env.DEV_MODE_NAME)&&process.env.DEV_MODE_NAME!=="",HO=()=>({"Dev-Mode-Secret":process.env.DEV_MODE_SECRET,"Dev-Mode-Name":process.env.DEV_MODE_NAME}),cs={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:ROe.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},qi={axiosApiInstance:null,appendSettings(r){cs=Object.assign({},cs,r)},getSettings(){return cs},getBaseMaps(){return cs.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},cs.MAPVIEW_PARAMS)},getLanguageDict(){return cs.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return cs.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},cs.TERRAIN_TILES)},getUsername(){return cs.USERNAME},isUserAuthenticated(){return cs.USER_ISAUTHENTICATED===!0},updateSettings(r){cs=r},_initAxiosApiInstance(){let r=cs.API_GEOREFERENCE_BASEURL,e=kg(r)&&r.length===0;if(!Zn(r)||e)throw new Error("The URL for the georeference service is not set.");let t=Object.assign({baseURL:r,withCredentials:!0},u8t?{headers:{get:HO(),post:HO(),put:HO(),delete:HO()}}:{});this.axiosApiInstance=POe.default.create(t)},getGeoreferenceApiClient(){return Zn(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let r=cs.MARKER_URL;if(!Zn(r))throw new Error("The marker icon url is not set.");return{id:cs.MARKER_IMAGE_ID,url:r}},getUserRole(){return cs.USER_ROLE}};var gv=ke(Et(),1);var Da=ke(Et()),YOe=ke(No());function c8t(r){return!!r&&typeof r.then=="function"}var ro=c8t;function h8t(r,e){if(r!=null)return r;throw new Error(e!=null?e:"Got unexpected null or undefined")}var Cn=h8t,XO=class{},f8t=new XO,AH={valueMaybe(){},valueOrThrow(){throw new Error(`Loadable expected value, but in "${this.state}" state`)},errorMaybe(){},errorOrThrow(){throw new Error(`Loadable expected error, but in "${this.state}" state`)},promiseMaybe(){},promiseOrThrow(){throw new Error(`Loadable expected promise, but in "${this.state}" state`)},is(r){return r.state===this.state&&r.contents===this.contents},map(r){if(this.state==="hasError")return this;if(this.state==="hasValue")try{let t=r(this.contents);return ro(t)?l0(t.then(n=>({__value:n}))):CH(t)}catch(t){return ro(t)?l0(t.next(()=>r(this.contents))):PH(t)}if(this.state==="loading")return l0(this.contents.then(t=>({__value:r(t.__value)})).catch(t=>{if(ro(t))return t.then(()=>r(this.contents));throw t}));throw new Error("Invalid Loadable state")}};function CH(r){return Object.freeze(nn(xt({state:"hasValue",contents:r},AH),{getValue(){return this.contents},toPromise(){return Promise.resolve(this.contents)},valueMaybe(){return this.contents},valueOrThrow(){return this.contents}}))}function PH(r){return Object.freeze(nn(xt({state:"hasError",contents:r},AH),{getValue(){throw this.contents},toPromise(){return Promise.reject(this.contents)},errorMaybe(){return this.contents},errorOrThrow(){return this.contents}}))}function l0(r){return Object.freeze(nn(xt({state:"loading",contents:r},AH),{getValue(){throw this.contents.then(({__value:e})=>e)},toPromise(){return this.contents.then(({__value:e})=>e)},promiseMaybe(){return this.contents.then(({__value:e})=>e)},promiseOrThrow(){return this.contents.then(({__value:e})=>e)}}))}function p8t(){return l0(new Promise(()=>{}))}function d8t(r){return r.every(e=>e.state==="hasValue")?CH(r.map(e=>e.contents)):r.some(e=>e.state==="hasError")?PH(Cn(r.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):l0(Promise.all(r.map(e=>e.contents)).then(e=>({__value:e})))}var bS={loadableWithValue:CH,loadableWithError:PH,loadableWithPromise:l0,loadableLoading:p8t,loadableAll:d8t,Canceled:XO,CANCELED:f8t},lH,KOe=(lH=Da.default.useMutableSource)!==null&&lH!==void 0?lH:Da.default.unstable_useMutableSource;function m8t(){return KOe&&!(typeof window!="undefined"&&window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE)}var XOe={mutableSourceExists:m8t,useMutableSource:KOe},{mutableSourceExists:g8t}=XOe,RH=new Map().set("recoil_hamt_2020",!0).set("recoil_memory_managament_2020",!0).set("recoil_suppress_rerender_in_callback",!0);function OH(r){var e;return r==="recoil_early_rendering_2021"&&!g8t()?!1:(e=RH.get(r))!==null&&e!==void 0?e:!1}OH.setPass=r=>{RH.set(r,!0)};OH.setFail=r=>{RH.set(r,!1)};var Yn=OH;function v8t(r,e,{error:t}={}){return null}var y8t=v8t,Qc=y8t;function _8t(r,e){let t=new Set(r);return t.add(e),t}function x8t(r,e){let t=new Set(r);return t.delete(e),t}function b8t(r,e,t){let n=new Map(r);return n.set(e,t),n}function w8t(r,e,t){let n=new Map(r);return n.set(e,t(n.get(e))),n}function E8t(r,e){let t=new Map(r);return t.delete(e),t}function S8t(r,e){let t=new Map(r);return e.forEach(n=>t.delete(n)),t}var QOe={setByAddingToSet:_8t,setByDeletingFromSet:x8t,mapBySettingInMap:b8t,mapByUpdatingInMap:w8t,mapByDeletingFromMap:E8t,mapByDeletingMultipleFromMap:S8t};function*T8t(r,e){let t=0;for(let n of r)e(n,t++)&&(yield n)}var JOe=T8t;function I8t(r,e){return function*(){let t=0;for(let n of r)yield e(n,t++)}()}var eLe=I8t;function M8t(r,...e){}var A8t=M8t,LH=A8t;function dn(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var yS=class{constructor(e){dn(this,"key",void 0),this.key=e}},QO=class extends yS{},JO=class extends yS{};function C8t(r){return r instanceof QO||r instanceof JO}var cL={AbstractRecoilValue:yS,RecoilState:QO,RecoilValueReadOnly:JO,isRecoilValue:C8t},P8t=cL.AbstractRecoilValue,R8t=cL.RecoilState,O8t=cL.RecoilValueReadOnly,L8t=cL.isRecoilValue,_d=Object.freeze({__proto__:null,AbstractRecoilValue:P8t,RecoilState:R8t,RecoilValueReadOnly:O8t,isRecoilValue:L8t}),eL=class{},D8t=new eL,fH=class extends Error{constructor(e){super(`Tried to set the value of Recoil selector ${e} using an updater function, but it is an async selector in a pending or error state; this is not supported.`)}},jg=new Map,DH=new Map;function N8t(r){return eLe(r,e=>Cn(DH.get(e)))}function k8t(r){if(jg.has(r.key)){let t=`Duplicate atom key "${r.key}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(t)}jg.set(r.key,r);let e=r.set==null?new _d.RecoilValueReadOnly(r.key):new _d.RecoilState(r.key);return DH.set(r.key,e),e}var tL=class extends Error{};function q8t(r){let e=jg.get(r);if(e==null)throw new tL(`Missing definition for RecoilValue: "${r}""`);return e}function j8t(r){return jg.get(r)}var rL=new Map;function F8t(r){var e;if(!Yn("recoil_memory_managament_2020"))return;let t=jg.get(r);if(!(t==null||(e=t.shouldDeleteConfigOnRelease)===null||e===void 0)&&e.call(t)){var n;jg.delete(r),(n=tLe(r))===null||n===void 0||n(),rL.delete(r)}}function z8t(r,e){Yn("recoil_memory_managament_2020")&&(e===void 0?rL.delete(r):rL.set(r,e))}function tLe(r){return rL.get(r)}var ru={nodes:jg,recoilValues:DH,registerNode:k8t,getNode:q8t,getNodeMaybe:j8t,deleteNodeConfigIfPossible:F8t,setConfigDeletionHandler:z8t,getConfigDeletionHandler:tLe,recoilValuesForKeys:N8t,NodeMissingError:tL,DefaultValue:eL,DEFAULT_VALUE:D8t,RecoilValueNotReady:fH},nL=class{};function B8t(){return new nL}var hL={RetentionZone:nL,retentionZone:B8t},{setByAddingToSet:U8t}=QOe,{getNode:fL,getNodeMaybe:V8t,recoilValuesForKeys:OOe}=ru,{RetentionZone:LOe}=hL,G8t=Object.freeze(new Set),pH=class extends Error{};function $8t(r,e,t){if(!Yn("recoil_memory_managament_2020"))return()=>{};let{nodesRetainedByZone:n}=r.getState().retention;function i(o){let l=n.get(o);l||n.set(o,l=new Set),l.add(e)}if(t instanceof LOe)i(t);else if(Array.isArray(t))for(let o of t)i(o);return()=>{if(!Yn("recoil_memory_managament_2020"))return;let o=r.getState().retention.nodesRetainedByZone;function l(c){let p=o.get(c);p&&p.delete(e),p&&p.size===0&&o.delete(c)}if(t instanceof LOe)l(t);else if(Array.isArray(t))for(let c of t)l(c)}}function NH(r,e,t,n){let i=r.getState();if(i.nodeCleanupFunctions.has(t))return;let o=fL(t),l=$8t(r,t,o.retainedBy),c=o.init(r,e,n);i.nodeCleanupFunctions.set(t,()=>{c(),l()})}function H8t(r,e){var t;let n=r.getState();(t=n.nodeCleanupFunctions.get(e))===null||t===void 0||t(),n.nodeCleanupFunctions.delete(e)}function W8t(r,e,t){return NH(r,e,t,"get"),fL(t).get(r,e)}function rLe(r,e,t){return fL(t).peek(r,e)}function Z8t(r,e,t){var n;let i=V8t(e);return i==null||(n=i.invalidate)===null||n===void 0||n.call(i,r),nn(xt({},r),{atomValues:r.atomValues.clone().delete(e),nonvalidatedAtoms:r.nonvalidatedAtoms.clone().set(e,t),dirtyAtoms:U8t(r.dirtyAtoms,e)})}function Y8t(r,e,t,n){let i=fL(t);if(i.set==null)throw new pH(`Attempt to set read-only RecoilValue: ${t}`);let o=i.set;return NH(r,e,t,"set"),o(r,e,n)}function K8t(r,e,t){var n,i,o;let l=r.getState(),c=r.getGraph(e.version),p=l.knownAtoms.has(t)?"atom":l.knownSelectors.has(t)?"selector":void 0,g=JOe(nLe(r,e,new Set([t])),_=>_!==t);return{loadable:rLe(r,e,t),isActive:l.knownAtoms.has(t)||l.knownSelectors.has(t),isSet:p==="selector"?!1:e.atomValues.has(t),isModified:e.dirtyAtoms.has(t),type:p,deps:OOe((n=c.nodeDeps.get(t))!==null&&n!==void 0?n:[]),subscribers:{nodes:OOe(g),components:eLe((i=(o=l.nodeToComponentSubscriptions.get(t))===null||o===void 0?void 0:o.values())!==null&&i!==void 0?i:[],([_])=>({name:_}))}}}function nLe(r,e,t){let n=new Set,i=Array.from(t),o=r.getGraph(e.version);for(let c=i.pop();c;c=i.pop()){var l;n.add(c);let p=(l=o.nodeToNodeSubscriptions.get(c))!==null&&l!==void 0?l:G8t;for(let g of p)n.has(g)||i.push(g)}return n}var f0={getNodeLoadable:W8t,peekNodeLoadable:rLe,setNodeValue:Y8t,cleanUpNode:H8t,setUnvalidatedAtomValue_DEPRECATED:Z8t,peekNodeInfo:K8t,getDownstreamNodes:nLe,initializeNodeIfNewToStore:NH},{CANCELED:X8t}=bS,{getDownstreamNodes:Q8t,getNodeLoadable:iLe,setNodeValue:J8t}=f0,{getNodeMaybe:oLe}=ru,{DefaultValue:kH,RecoilValueNotReady:eHt}=ru,{AbstractRecoilValue:tHt,RecoilState:rHt,RecoilValueReadOnly:nHt,isRecoilValue:iHt}=_d;function oHt(r,{key:e},t=r.getState().currentTree){var n,i;let o=r.getState();t.version===o.currentTree.version||t.version===((n=o.nextTree)===null||n===void 0?void 0:n.version)||t.version===((i=o.previousTree)===null||i===void 0?void 0:i.version)||Qc("Tried to read from a discarded tree");let l=iLe(r,t,e);return l.state==="loading"&&l.contents.catch(()=>X8t),l}function aHt(r,e){let t=r.clone();return e.forEach((n,i)=>{n.state==="hasValue"&&n.contents instanceof kH?t.delete(i):t.set(i,n)}),t}function sHt(r,e,{key:t},n){if(typeof n=="function"){let i=iLe(r,e,t);if(i.state==="loading")throw new eHt(t);if(i.state==="hasError")throw i.contents;return n(i.contents)}else return n}function lHt(r,e,t){if(t.type==="set"){let{recoilValue:i,valueOrUpdater:o}=t,l=sHt(r,e,i,o),c=J8t(r,e,i.key,l);for(let[p,g]of c.entries())dH(e,p,g)}else if(t.type==="setLoadable"){let{recoilValue:{key:i},loadable:o}=t;dH(e,i,o)}else if(t.type==="markModified"){let{recoilValue:{key:i}}=t;e.dirtyAtoms.add(i)}else if(t.type==="setUnvalidated"){var n;let{recoilValue:{key:i},unvalidatedValue:o}=t,l=oLe(i);l==null||(n=l.invalidate)===null||n===void 0||n.call(l,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,o),e.dirtyAtoms.add(i)}else Qc(`Unknown action ${t.type}`)}function dH(r,e,t){t.state==="hasValue"&&t.contents instanceof kH?r.atomValues.delete(e):r.atomValues.set(e,t),r.dirtyAtoms.add(e),r.nonvalidatedAtoms.delete(e)}function aLe(r,e){r.replaceState(t=>{let n=sLe(t);for(let i of e)lHt(r,n,i);return mH(r,n),n})}function pL(r,e){if(gS.length){let t=gS[gS.length-1],n=t.get(r);n||t.set(r,n=[]),n.push(e)}else aLe(r,[e])}var gS=[];function uHt(){let r=new Map;return gS.push(r),()=>{for(let[t,n]of r)aLe(t,n);gS.pop()!==r&&Qc("Incorrect order of batch popping")}}function sLe(r){return nn(xt({},r),{atomValues:r.atomValues.clone(),nonvalidatedAtoms:r.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(r.dirtyAtoms)})}function mH(r,e){let t=Q8t(r,e,e.dirtyAtoms);for(let o of t){var n,i;(n=oLe(o))===null||n===void 0||(i=n.invalidate)===null||i===void 0||i.call(n,e)}}function lLe(r,e,t){pL(r,{type:"set",recoilValue:e,valueOrUpdater:t})}function cHt(r,e,t){if(t instanceof kH)return lLe(r,e,t);pL(r,{type:"setLoadable",recoilValue:e,loadable:t})}function hHt(r,e){pL(r,{type:"markModified",recoilValue:e})}function fHt(r,e,t){pL(r,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:t})}var pHt=0;function dHt(r,{key:e},t,n=null){let i=pHt++,o=r.getState();if(o.nodeToComponentSubscriptions.has(e)||o.nodeToComponentSubscriptions.set(e,new Map),Cn(o.nodeToComponentSubscriptions.get(e)).set(i,[n!=null?n:"<not captured>",t]),Yn("recoil_early_rendering_2021")){let l=r.getState().nextTree;l&&l.dirtyAtoms.has(e)&&t(l)}return{release:()=>{let l=r.getState(),c=l.nodeToComponentSubscriptions.get(e);if(c===void 0||!c.has(i)){Qc(`Subscription missing at release time for atom ${e}. This is a bug in Recoil.`);return}c.delete(i),c.size===0&&l.nodeToComponentSubscriptions.delete(e)}}}var Fg={RecoilValueReadOnly:nHt,AbstractRecoilValue:tHt,RecoilState:rHt,getRecoilValueAsLoadable:oHt,setRecoilValue:lLe,setRecoilValueLoadable:cHt,markRecoilValueModified:hHt,setUnvalidatedRecoilValue:fHt,subscribeToRecoilValue:dHt,isRecoilValue:iHt,applyAtomValueWrites:aHt,batchStart:uHt,writeLoadableToTreeState:dH,invalidateDownstreams:mH,copyTreeState:sLe,invalidateDownstreams_FOR_TESTING:mH},{unstable_batchedUpdates:mHt}=YOe.default,gHt={unstable_batchedUpdates:mHt},{unstable_batchedUpdates:vHt}=gHt,yHt={unstable_batchedUpdates:vHt},{batchStart:_Ht}=Fg,{unstable_batchedUpdates:xHt}=yHt,qH=xHt,bHt=r=>{qH=r},wHt=()=>qH,EHt=r=>{qH(()=>{let e=()=>{};try{e=_Ht(),r()}finally{e()}})},jH={getBatcher:wHt,setBatcher:bHt,batchUpdates:EHt};function SHt(r,e){e()}var THt={enqueueExecution:SHt};function IHt(r,...e){let t=new Set;e:for(let n of r){for(let i of e)if(i.has(n))continue e;t.add(n)}return t}var iL=IHt;function MHt(r,e){let t=new Map;return r.forEach((n,i)=>{t.set(i,e(n,i))}),t}var oL=MHt;function AHt(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function CHt(r){return{nodeDeps:oL(r.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:oL(r.nodeToNodeSubscriptions,e=>new Set(e))}}function uH(r,e,t){let{nodeDeps:n,nodeToNodeSubscriptions:i}=e;r.forEach((o,l)=>{let c=n.get(l);if(c&&t&&c!==t.nodeDeps.get(l))return;n.set(l,new Set(o)),(c==null?o:iL(o,c)).forEach(g=>{i.has(g)||i.set(g,new Set),Cn(i.get(g)).add(l)}),c&&iL(c,o).forEach(_=>{if(!i.has(_))return;let x=Cn(i.get(_));x.delete(l),x.size===0&&i.delete(_)})})}function PHt(r,e,t){var n,i,o,l;let c=e.getState();t===c.currentTree.version||t===((n=c.nextTree)===null||n===void 0?void 0:n.version)||t===((i=c.previousTree)===null||i===void 0?void 0:i.version)||Qc("Tried to save dependencies to a discarded tree");let p=e.getGraph(t);if(uH(r,p),t===((o=c.previousTree)===null||o===void 0?void 0:o.version)){let _=e.getGraph(c.currentTree.version);uH(r,_,p)}if(t===((l=c.previousTree)===null||l===void 0?void 0:l.version)||t===c.currentTree.version){var g;let _=(g=c.nextTree)===null||g===void 0?void 0:g.version;if(_!==void 0){let x=e.getGraph(_);uH(r,x,p)}}}function RHt(r,e){r.forEach((t,n)=>{e.has(n)||e.set(n,new Set);let i=Cn(e.get(n));t.forEach(o=>i.add(o))})}function OHt(r,e,t){t.has(r)||t.set(r,new Set),Cn(t.get(r)).add(e)}var wS={addToDependencyMap:OHt,cloneGraph:CHt,graph:AHt,mergeDepsIntoDependencyMap:RHt,saveDependencyMapToStore:PHt};function LHt(r,e){return e={exports:{}},r(e,e.exports),e.exports}var DHt=LHt(function(r){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},t={},n=5,i=Math.pow(2,n),o=i-1,l=i/2,c=i/4,p={},g=function(X){return function(){return X}},_=t.hash=function(Z){var X=typeof Z=="undefined"?"undefined":e(Z);if(X==="number")return Z;X!=="string"&&(Z+="");for(var he=0,ee=0,Ie=Z.length;ee<Ie;++ee){var xe=Z.charCodeAt(ee);he=(he<<5)-he+xe|0}return he},x=function(X){return X-=X>>1&1431655765,X=(X&858993459)+(X>>2&858993459),X=X+(X>>4)&252645135,X+=X>>8,X+=X>>16,X&127},T=function(X,he){return he>>>X&o},C=function(X){return 1<<X},D=function(X,he){return x(X&he-1)},F=function(X,he,ee,Ie){var xe=Ie;if(!X){var Ce=Ie.length;xe=new Array(Ce);for(var Ne=0;Ne<Ce;++Ne)xe[Ne]=Ie[Ne]}return xe[he]=ee,xe},O=function(X,he,ee){var Ie=ee.length-1,xe=0,Ce=0,Ne=ee;if(X)xe=Ce=he;else for(Ne=new Array(Ie);xe<he;)Ne[Ce++]=ee[xe++];for(++xe;xe<=Ie;)Ne[Ce++]=ee[xe++];return X&&(Ne.length=Ie),Ne},k=function(X,he,ee,Ie){var xe=Ie.length;if(X){for(var Ce=xe;Ce>=he;)Ie[Ce--]=Ie[Ce];return Ie[he]=ee,Ie}for(var Ne=0,Me=0,Ge=new Array(xe+1);Ne<he;)Ge[Me++]=Ie[Ne++];for(Ge[he]=ee;Ne<xe;)Ge[++Me]=Ie[Ne++];return Ge},q=1,U=2,H=3,se=4,ie={__hamt_isEmpty:!0},ue=function(X){return X===ie||X&&X.__hamt_isEmpty},ve=function(X,he,ee,Ie){return{type:q,edit:X,hash:he,key:ee,value:Ie,_modify:We}},ye=function(X,he,ee){return{type:U,edit:X,hash:he,children:ee,_modify:mt}},ge=function(X,he,ee){return{type:H,edit:X,mask:he,children:ee,_modify:ht}},_e=function(X,he,ee){return{type:se,edit:X,size:he,children:ee,_modify:_t}},Le=function(X){return X===ie||X.type===q||X.type===U},Re=function(X,he,ee,Ie,xe){for(var Ce=[],Ne=Ie,Me=0,Ge=0;Ne;++Ge)Ne&1&&(Ce[Ge]=xe[Me++]),Ne>>>=1;return Ce[he]=ee,_e(X,Me+1,Ce)},je=function(X,he,ee,Ie){for(var xe=new Array(he-1),Ce=0,Ne=0,Me=0,Ge=Ie.length;Me<Ge;++Me)if(Me!==ee){var lt=Ie[Me];lt&&!ue(lt)&&(xe[Ce++]=lt,Ne|=1<<Me)}return ge(X,Ne,xe)},$e=function Z(X,he,ee,Ie,xe,Ce){if(ee===xe)return ye(X,ee,[Ce,Ie]);var Ne=T(he,ee),Me=T(he,xe);return ge(X,C(Ne)|C(Me),Ne===Me?[Z(X,he+n,ee,Ie,xe,Ce)]:Ne<Me?[Ie,Ce]:[Ce,Ie])},Be=function(X,he,ee,Ie,xe,Ce,Ne,Me){for(var Ge=xe.length,lt=0;lt<Ge;++lt){var gt=xe[lt];if(ee(Ne,gt.key)){var Rt=gt.value,Xt=Ce(Rt);return Xt===Rt?xe:Xt===p?(--Me.value,O(X,lt,xe)):F(X,lt,ve(he,Ie,Ne,Xt),xe)}}var Gt=Ce();return Gt===p?xe:(++Me.value,F(X,Ge,ve(he,Ie,Ne,Gt),xe))},nt=function(X,he){return X===he.edit},We=function(X,he,ee,Ie,xe,Ce,Ne){if(he(Ce,this.key)){var Me=Ie(this.value);return Me===this.value?this:Me===p?(--Ne.value,ie):nt(X,this)?(this.value=Me,this):ve(X,xe,Ce,Me)}var Ge=Ie();return Ge===p?this:(++Ne.value,$e(X,ee,this.hash,this,xe,ve(X,xe,Ce,Ge)))},mt=function(X,he,ee,Ie,xe,Ce,Ne){if(xe===this.hash){var Me=nt(X,this),Ge=Be(Me,X,he,this.hash,this.children,Ie,Ce,Ne);return Ge===this.children?this:Ge.length>1?ye(X,this.hash,Ge):Ge[0]}var lt=Ie();return lt===p?this:(++Ne.value,$e(X,ee,this.hash,this,xe,ve(X,xe,Ce,lt)))},ht=function(X,he,ee,Ie,xe,Ce,Ne){var Me=this.mask,Ge=this.children,lt=T(ee,xe),gt=C(lt),Rt=D(Me,gt),Xt=Me&gt,Gt=Xt?Ge[Rt]:ie,Ye=Gt._modify(X,he,ee+n,Ie,xe,Ce,Ne);if(Gt===Ye)return this;var Fr=nt(X,this),Sr=Me,Dr=void 0;if(Xt&&ue(Ye)){if(Sr&=~gt,!Sr)return ie;if(Ge.length<=2&&Le(Ge[Rt^1]))return Ge[Rt^1];Dr=O(Fr,Rt,Ge)}else if(!Xt&&!ue(Ye)){if(Ge.length>=l)return Re(X,lt,Ye,Me,Ge);Sr|=gt,Dr=k(Fr,Rt,Ye,Ge)}else Dr=F(Fr,Rt,Ye,Ge);return Fr?(this.mask=Sr,this.children=Dr,this):ge(X,Sr,Dr)},_t=function(X,he,ee,Ie,xe,Ce,Ne){var Me=this.size,Ge=this.children,lt=T(ee,xe),gt=Ge[lt],Rt=(gt||ie)._modify(X,he,ee+n,Ie,xe,Ce,Ne);if(gt===Rt)return this;var Xt=nt(X,this),Gt=void 0;if(ue(gt)&&!ue(Rt))++Me,Gt=F(Xt,lt,Rt,Ge);else if(!ue(gt)&&ue(Rt)){if(--Me,Me<=c)return je(X,Me,lt,Ge);Gt=F(Xt,lt,ie,Ge)}else Gt=F(Xt,lt,Rt,Ge);return Xt?(this.size=Me,this.children=Gt,this):_e(X,Me,Gt)};ie._modify=function(Z,X,he,ee,Ie,xe,Ce){var Ne=ee();return Ne===p?ie:(++Ce.value,ve(Z,Ie,xe,Ne))};function ze(Z,X,he,ee,Ie){this._editable=Z,this._edit=X,this._config=he,this._root=ee,this._size=Ie}ze.prototype.setTree=function(Z,X){return this._editable?(this._root=Z,this._size=X,this):Z===this._root?this:new ze(this._editable,this._edit,this._config,Z,X)};var St=t.tryGetHash=function(Z,X,he,ee){for(var Ie=ee._root,xe=0,Ce=ee._config.keyEq;;)switch(Ie.type){case q:return Ce(he,Ie.key)?Ie.value:Z;case U:{if(X===Ie.hash)for(var Ne=Ie.children,Me=0,Ge=Ne.length;Me<Ge;++Me){var lt=Ne[Me];if(Ce(he,lt.key))return lt.value}return Z}case H:{var gt=T(xe,X),Rt=C(gt);if(Ie.mask&Rt){Ie=Ie.children[D(Ie.mask,Rt)],xe+=n;break}return Z}case se:{if(Ie=Ie.children[T(xe,X)],Ie){xe+=n;break}return Z}default:return Z}};ze.prototype.tryGetHash=function(Z,X,he){return St(Z,X,he,this)};var jt=t.tryGet=function(Z,X,he){return St(Z,he._config.hash(X),X,he)};ze.prototype.tryGet=function(Z,X){return jt(Z,X,this)};var Fe=t.getHash=function(Z,X,he){return St(void 0,Z,X,he)};ze.prototype.getHash=function(Z,X){return Fe(Z,X,this)};var st=t.get=function(Z,X){return St(void 0,X._config.hash(Z),Z,X)};ze.prototype.get=function(Z,X){return jt(X,Z,this)};var He=t.has=function(Z,X,he){return St(p,Z,X,he)!==p};ze.prototype.hasHash=function(Z,X){return He(Z,X,this)};var et=t.has=function(Z,X){return He(X._config.hash(Z),Z,X)};ze.prototype.has=function(Z){return et(Z,this)};var it=function(X,he){return X===he};t.make=function(Z){return new ze(0,0,{keyEq:Z&&Z.keyEq||it,hash:Z&&Z.hash||_},ie,0)},t.empty=t.make();var at=t.isEmpty=function(Z){return Z&&!!ue(Z._root)};ze.prototype.isEmpty=function(){return at(this)};var Nt=t.modifyHash=function(Z,X,he,ee){var Ie={value:ee._size},xe=ee._root._modify(ee._editable?ee._edit:NaN,ee._config.keyEq,0,Z,X,he,Ie);return ee.setTree(xe,Ie.value)};ze.prototype.modifyHash=function(Z,X,he){return Nt(he,Z,X,this)};var At=t.modify=function(Z,X,he){return Nt(Z,he._config.hash(X),X,he)};ze.prototype.modify=function(Z,X){return At(X,Z,this)};var Mt=t.setHash=function(Z,X,he,ee){return Nt(g(he),Z,X,ee)};ze.prototype.setHash=function(Z,X,he){return Mt(Z,X,he,this)};var Ut=t.set=function(Z,X,he){return Mt(he._config.hash(Z),Z,X,he)};ze.prototype.set=function(Z,X){return Ut(Z,X,this)};var Vt=g(p),$t=t.removeHash=function(Z,X,he){return Nt(Vt,Z,X,he)};ze.prototype.removeHash=ze.prototype.deleteHash=function(Z,X){return $t(Z,X,this)};var Lr=t.remove=function(Z,X){return $t(X._config.hash(Z),Z,X)};ze.prototype.remove=ze.prototype.delete=function(Z){return Lr(Z,this)};var yr=t.beginMutation=function(Z){return new ze(Z._editable+1,Z._edit+1,Z._config,Z._root,Z._size)};ze.prototype.beginMutation=function(){return yr(this)};var ur=t.endMutation=function(Z){return Z._editable=Z._editable&&Z._editable-1,Z};ze.prototype.endMutation=function(){return ur(this)};var cr=t.mutate=function(Z,X){var he=yr(X);return Z(he),ur(he)};ze.prototype.mutate=function(Z){return cr(Z,this)};var hr=function(X){return X&&dr(X[0],X[1],X[2],X[3],X[4])},dr=function(X,he,ee,Ie,xe){for(;ee<X;){var Ce=he[ee++];if(Ce&&!ue(Ce))return an(Ce,Ie,[X,he,ee,Ie,xe])}return hr(xe)},an=function(X,he,ee){switch(X.type){case q:return{value:he(X),rest:ee};case U:case se:case H:var Ie=X.children;return dr(Ie.length,Ie,0,he,ee);default:return hr(ee)}},wn={done:!0};function Ln(Z){this.v=Z}Ln.prototype.next=function(){if(!this.v)return wn;var Z=this.v;return this.v=hr(Z.rest),Z},Ln.prototype[Symbol.iterator]=function(){return this};var Un=function(X,he){return new Ln(an(X._root,he))},di=function(X){return[X.key,X.value]},Li=t.entries=function(Z){return Un(Z,di)};ze.prototype.entries=ze.prototype[Symbol.iterator]=function(){return Li(this)};var ao=function(X){return X.key},Qn=t.keys=function(Z){return Un(Z,ao)};ze.prototype.keys=function(){return Qn(this)};var ri=function(X){return X.value},so=t.values=ze.prototype.values=function(Z){return Un(Z,ri)};ze.prototype.values=function(){return so(this)};var qe=t.fold=function(Z,X,he){var ee=he._root;if(ee.type===q)return Z(X,ee.value,ee.key);for(var Ie=[ee.children],xe=void 0;xe=Ie.pop();)for(var Ce=0,Ne=xe.length;Ce<Ne;){var Me=xe[Ce++];Me&&Me.type&&(Me.type===q?X=Z(X,Me.value,Me.key):Ie.push(Me.children))}return X};ze.prototype.fold=function(Z,X){return qe(Z,X,this)};var oe=t.forEach=function(Z,X){return qe(function(he,ee,Ie){return Z(ee,Ie,X)},null,X)};ze.prototype.forEach=function(Z){return oe(Z,this)};var ne=t.count=function(Z){return Z._size};ze.prototype.count=function(){return ne(this)},Object.defineProperty(ze.prototype,"size",{get:ze.prototype.count}),r.exports?r.exports=t:(void 0).hamt=t}),gH=class{constructor(e){dn(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,t){return this._map.set(e,t),this}delete(e){return this._map.delete(e),this}clone(){return FH(this)}toMap(){return new Map(this._map)}},vH=class r{constructor(e){if(dn(this,"_hamt",DHt.empty.beginMutation()),e instanceof r){let t=e._hamt.endMutation();e._hamt=t.beginMutation(),this._hamt=t.beginMutation()}else if(e)for(let[t,n]of e.entries())this._hamt.set(t,n)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,t){return this._hamt.set(e,t),this}delete(e){return this._hamt.delete(e),this}clone(){return FH(this)}toMap(){return new Map(this._hamt)}};function FH(r){return Yn("recoil_hamt_2020")?new vH(r):new gH(r)}var NHt={persistentMap:FH},kHt=NHt.persistentMap,qHt=Object.freeze({__proto__:null,persistentMap:kHt}),{graph:jHt}=wS,{persistentMap:DOe}=qHt,FHt=0,uLe=()=>FHt++;function cLe(){let r=uLe();return{version:r,stateID:r,transactionMetadata:{},dirtyAtoms:new Set,atomValues:DOe(),nonvalidatedAtoms:DOe()}}function zHt(){let r=cLe();return{currentTree:r,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(r.version,jHt()),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var hLe={makeEmptyTreeState:cLe,makeEmptyStoreState:zHt,getNextTreeStateVersion:uLe};function BHt(...r){let e=new Set;for(let t of r)for(let n of t)e.add(n);return e}var UHt=BHt;function VHt(r,e,t){let n=r.entries(),i=n.next();for(;!i.done;){let o=i.value;if(e.call(t,o[1],o[0],r))return!0;i=n.next()}return!1}var GHt=VHt,{cleanUpNode:$Ht}=f0,{deleteNodeConfigIfPossible:HHt,getNode:fLe}=ru,{RetentionZone:pLe}=hL,dLe=new Set;function mLe(r,e){let t=r.getState(),n=t.currentTree;if(t.nextTree){Qc("releaseNodesNowOnCurrentTree should only be called at the end of a batch");return}let i=new Set;for(let l of e)if(l instanceof pLe)for(let c of KHt(t,l))i.add(c);else i.add(l);let o=WHt(r,i);for(let l of o)YHt(r,n,l)}function WHt(r,e){let t=r.getState(),n=t.currentTree,i=r.getGraph(n.version),o=new Set,l=new Set;return c(e),o;function c(p){let g=new Set,_=ZHt(r,n,p,o,l);for(let D of _){var x;if(fLe(D).retainedBy==="recoilRoot"){l.add(D);continue}if(((x=t.retention.referenceCounts.get(D))!==null&&x!==void 0?x:0)>0){l.add(D);continue}if(gLe(D).some(O=>t.retention.referenceCounts.get(O))){l.add(D);continue}let F=i.nodeToNodeSubscriptions.get(D);if(F&&GHt(F,O=>l.has(O))){l.add(D);continue}o.add(D),g.add(D)}let T=new Set;for(let D of g)for(let F of(C=i.nodeDeps.get(D))!==null&&C!==void 0?C:dLe){var C;o.has(F)||T.add(F)}T.size&&c(T)}}function ZHt(r,e,t,n,i){let o=r.getGraph(e.version),l=[],c=new Set;for(;t.size>0;)p(Cn(t.values().next().value));return l;function p(g){if(n.has(g)||i.has(g)){t.delete(g);return}if(c.has(g))return;let _=o.nodeToNodeSubscriptions.get(g);if(_)for(let x of _)p(x);c.add(g),t.delete(g),l.push(g)}}function YHt(r,e,t){if(!Yn("recoil_memory_managament_2020"))return;$Ht(r,t);let n=r.getState();n.knownAtoms.delete(t),n.knownSelectors.delete(t),n.nodeTransactionSubscriptions.delete(t),n.retention.referenceCounts.delete(t);let i=gLe(t);for(let p of i){var o;(o=n.retention.nodesRetainedByZone.get(p))===null||o===void 0||o.delete(t)}e.atomValues.delete(t),e.dirtyAtoms.delete(t),e.nonvalidatedAtoms.delete(t);let l=n.graphsByVersion.get(e.version);if(l){let p=l.nodeDeps.get(t);if(p!==void 0){l.nodeDeps.delete(t);for(let g of p){var c;(c=l.nodeToNodeSubscriptions.get(g))===null||c===void 0||c.delete(t)}}l.nodeToNodeSubscriptions.delete(t)}HHt(t)}function KHt(r,e){var t;return(t=r.retention.nodesRetainedByZone.get(e))!==null&&t!==void 0?t:dLe}function gLe(r){let e=fLe(r).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof pLe?[e]:e}function XHt(r,e){let t=r.getState();t.nextTree?t.retention.retainablesToCheckForRelease.add(e):mLe(r,new Set([e]))}function QHt(r,e,t){var n;if(!Yn("recoil_memory_managament_2020"))return;let i=r.getState().retention.referenceCounts,o=((n=i.get(e))!==null&&n!==void 0?n:0)+t;o===0?vLe(r,e):i.set(e,o)}function vLe(r,e){if(!Yn("recoil_memory_managament_2020"))return;r.getState().retention.referenceCounts.delete(e),XHt(r,e)}function JHt(r){if(!Yn("recoil_memory_managament_2020"))return;let e=r.getState();mLe(r,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function eWt(r){return r===void 0?"recoilRoot":r}var ES={updateRetainCount:QHt,updateRetainCountToZero:vLe,releaseScheduledRetainablesNow:JHt,retainedByOptionWithDefault:eWt};function*tWt(r){for(let e of r)for(let t of e)yield t}var rWt=tWt,nWt=typeof window=="undefined",iWt=typeof navigator!="undefined"&&navigator.product==="ReactNative",zH={isSSR:nWt,isReactNative:iWt},{isSSR:oWt}=zH,{batchUpdates:yH}=jH,{initializeNodeIfNewToStore:aWt,peekNodeInfo:sWt}=f0,{graph:lWt}=wS,{DEFAULT_VALUE:uWt,recoilValues:NOe,recoilValuesForKeys:kOe}=ru,{AbstractRecoilValue:cWt,getRecoilValueAsLoadable:hWt,setRecoilValue:qOe,setUnvalidatedRecoilValue:fWt}=Fg,{updateRetainCount:KO}=ES,{getNextTreeStateVersion:pWt,makeEmptyStoreState:dWt}=hLe;var c0=class{constructor(e){dn(this,"_store",void 0),dn(this,"_refCount",0),dn(this,"getLoadable",t=>(this.checkRefCount_INTERNAL(),hWt(this._store,t))),dn(this,"getPromise",t=>(this.checkRefCount_INTERNAL(),this.getLoadable(t).toPromise())),dn(this,"getNodes_UNSTABLE",t=>{if(this.checkRefCount_INTERNAL(),(t==null?void 0:t.isModified)===!0){if((t==null?void 0:t.isInitialized)===!1)return[];let o=this._store.getState().currentTree;return kOe(o.dirtyAtoms)}let n=this._store.getState().knownAtoms,i=this._store.getState().knownSelectors;return(t==null?void 0:t.isInitialized)==null?NOe.values():t.isInitialized===!0?kOe(rWt([this._store.getState().knownAtoms,this._store.getState().knownSelectors])):JOe(NOe.values(),({key:o})=>!n.has(o)&&!i.has(o))}),dn(this,"getInfo_UNSTABLE",({key:t})=>(this.checkRefCount_INTERNAL(),sWt(this._store,this._store.getState().currentTree,t))),dn(this,"map",t=>{this.checkRefCount_INTERNAL();let n=new _S(this,yH);return t(n),_H(n.getStore_INTERNAL())}),dn(this,"asyncMap",t=>vo(this,null,function*(){this.checkRefCount_INTERNAL();let n=new _S(this,yH);return yield t(n),_H(n.getStore_INTERNAL())})),this._store={getState:()=>e,replaceState:t=>{e.currentTree=t(e.currentTree)},getGraph:t=>{let n=e.graphsByVersion;if(n.has(t))return Cn(n.get(t));let i=lWt();return n.set(t,i),i},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw new Error("Cannot subscribe to Snapshots")}};for(let t of this._store.getState().nodeCleanupFunctions.keys())aWt(this._store,e.currentTree,t,"get"),KO(this._store,t,1);this.retain(),this.autorelease_INTERNAL()}retain(){if(!Yn("recoil_memory_managament_2020"))return()=>{};this._refCount++;let e=!1;return()=>{e||(e=!0,this.release_INTERNAL())}}autorelease_INTERNAL(){Yn("recoil_memory_managament_2020")&&(oWt||window.setTimeout(()=>this.release_INTERNAL(),0))}release_INTERNAL(){Yn("recoil_memory_managament_2020")&&(this._refCount--,this._refCount)}checkRefCount_INTERNAL(){Yn("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this.getID_INTERNAL()}getID_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}};function yLe(r,e,t=!1){let n=r.getState(),i=t?pWt():e.version;return{currentTree:t?{version:i,stateID:i,transactionMetadata:xt({},e.transactionMetadata),dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()}:e,commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(n.knownAtoms),knownSelectors:new Set(n.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,r.getGraph(e.version)),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}function mWt(r){let e=new c0(dWt());return r!=null?e.map(r):e}function _H(r,e="current"){let t=r.getState(),n=e==="current"?t.currentTree:Cn(t.previousTree);return new c0(yLe(r,n))}var _S=class extends c0{constructor(e,t){super(yLe(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0)),dn(this,"_batch",void 0),dn(this,"set",(n,i)=>{this.checkRefCount_INTERNAL();let o=this.getStore_INTERNAL();this._batch(()=>{KO(o,n.key,1),qOe(this.getStore_INTERNAL(),n,i)})}),dn(this,"reset",n=>{this.checkRefCount_INTERNAL();let i=this.getStore_INTERNAL();this._batch(()=>{KO(i,n.key,1),qOe(this.getStore_INTERNAL(),n,uWt)})}),dn(this,"setUnvalidatedAtomValues_DEPRECATED",n=>{this.checkRefCount_INTERNAL();let i=this.getStore_INTERNAL();yH(()=>{for(let[o,l]of n.entries())KO(i,o,1),fWt(i,new cWt(o),l)})}),this._batch=t}},dL={Snapshot:c0,MutableSnapshot:_S,freshSnapshot:mWt,cloneSnapshot:_H},gWt=dL.Snapshot,vWt=dL.MutableSnapshot,yWt=dL.freshSnapshot,_Wt=dL.cloneSnapshot,mL=Object.freeze({__proto__:null,Snapshot:gWt,MutableSnapshot:vWt,freshSnapshot:yWt,cloneSnapshot:_Wt}),{getNextTreeStateVersion:xWt,makeEmptyStoreState:_Le}=hLe,{cleanUpNode:bWt,getDownstreamNodes:wWt,setNodeValue:EWt,setUnvalidatedAtomValue_DEPRECATED:SWt}=f0,{graph:TWt}=wS,{cloneGraph:IWt}=wS,{applyAtomValueWrites:MWt}=Fg,{releaseScheduledRetainablesNow:xLe}=ES,{freshSnapshot:AWt}=mL,{useCallback:CWt,useContext:bLe,useEffect:xH,useMemo:PWt,useRef:cH,useState:RWt}=Da.default;function cS(){throw new Error("This component must be used inside a <RecoilRoot> component.")}var wLe=Object.freeze({getState:cS,replaceState:cS,getGraph:cS,subscribeToTransactions:cS,addTransactionMetadata:cS}),bH=!1;function jOe(r){if(bH)throw new Error("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");let e=r.getState();if(e.nextTree===null){Yn("recoil_memory_managament_2020")&&Yn("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&xLe(r);let t=e.currentTree.version,n=xWt();e.nextTree=nn(xt({},e.currentTree),{version:n,stateID:n,dirtyAtoms:new Set,transactionMetadata:{}}),e.graphsByVersion.set(n,IWt(Cn(e.graphsByVersion.get(t))))}}var ELe=Da.default.createContext({current:wLe}),BH=()=>bLe(ELe),SLe=Da.default.createContext(null);function OWt(){let r=bLe(SLe);return r==null&&LH("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),r}function UH(r,e,t){let n=wWt(r,t,t.dirtyAtoms);for(let i of n){let o=e.nodeToComponentSubscriptions.get(i);if(o)for(let[l,[c,p]]of o)p(t)}}function TLe(r){let e=r.getState(),t=e.currentTree,n=t.dirtyAtoms;if(n.size){for(let[i,o]of e.nodeTransactionSubscriptions)if(n.has(i))for(let[l,c]of o)c(r);for(let[i,o]of e.transactionSubscriptions)o(r);(!Yn("recoil_early_rendering_2021")||e.suspendedComponentResolvers.size)&&(UH(r,e,t),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(t)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function LWt(r){let e=r.current.getState();e.commitDepth++;try{let{nextTree:t}=e;if(t===null)return;e.previousTree=e.currentTree,e.currentTree=t,e.nextTree=null,TLe(r.current),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):Qc("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,Yn("recoil_memory_managament_2020")&&xLe(r.current)}finally{e.commitDepth--}}function DWt({setNotifyBatcherOfChange:r}){let e=BH(),[t,n]=RWt([]);return r(()=>n({})),xH(()=>{THt.enqueueExecution("Batcher",()=>{LWt(e)})}),xH(()=>()=>{r(()=>{})},[r]),null}function NWt(r,e){let t=_Le();return e({set:(n,i)=>{let o=t.currentTree,l=EWt(r,o,n.key,i),c=new Set(l.keys()),p=o.nonvalidatedAtoms.clone();for(let g of c)p.delete(g);t.currentTree=nn(xt({},o),{dirtyAtoms:UHt(o.dirtyAtoms,c),atomValues:MWt(o.atomValues,l),nonvalidatedAtoms:p})},setUnvalidatedAtomValues:n=>{n.forEach((i,o)=>{t.currentTree=SWt(t.currentTree,o,i)})}}),t}function kWt(r){return AWt().map(r).getStore_INTERNAL().getState()}var FOe=0;function qWt({initializeState_DEPRECATED:r,initializeState:e,store_INTERNAL:t,children:n}){var i;let o,l=O=>{let k=o.current.graphsByVersion;if(k.has(O))return Cn(k.get(O));let q=TWt();return k.set(O,q),q},c=(O,k)=>{if(k==null){let{transactionSubscriptions:q}=D.current.getState(),U=FOe++;return q.set(U,O),{release:()=>{q.delete(U)}}}else{let{nodeTransactionSubscriptions:q}=D.current.getState();q.has(k)||q.set(k,new Map);let U=FOe++;return Cn(q.get(k)).set(U,O),{release:()=>{let H=q.get(k);H&&(H.delete(U),H.size===0&&q.delete(k))}}}},p=O=>{jOe(D.current);for(let k of Object.keys(O))Cn(D.current.getState().nextTree).transactionMetadata[k]=O[k]},g=O=>{let k=D.current.getState();jOe(D.current);let q=Cn(k.nextTree),U;try{bH=!0,U=O(q)}finally{bH=!1}U!==q&&(k.nextTree=U,Yn("recoil_early_rendering_2021")&&UH(C,k,U),Cn(_.current)())},_=cH(null),x=CWt(O=>{_.current=O},[_]),T=(i=Da.default.createMutableSource)!==null&&i!==void 0?i:Da.default.unstable_createMutableSource,C=t!=null?t:{getState:()=>o.current,replaceState:g,getGraph:l,subscribeToTransactions:c,addTransactionMetadata:p},D=cH(C);o=cH(r!=null?NWt(C,r):e!=null?kWt(e):_Le());let F=PWt(()=>T?T(o,()=>o.current.currentTree.version):null,[T,o]);return xH(()=>()=>{for(let O of D.current.getState().knownAtoms)bWt(D.current,O)},[]),Da.default.createElement(ELe.Provider,{value:D},Da.default.createElement(SLe.Provider,{value:F},Da.default.createElement(DWt,{setNotifyBatcherOfChange:x}),n))}function jWt(r){let i=r,{override:e}=i,t=Oo(i,["override"]),n=BH();return e===!1&&n.current!==wLe?r.children:Da.default.createElement(qWt,t)}var gL={useStoreRef:BH,useRecoilMutableSource:OWt,RecoilRoot:jWt,notifyComponents_FOR_TESTING:UH,sendEndOfBatchNotifications_FOR_TESTING:TLe},{loadableWithValue:FWt}=bS,{DEFAULT_VALUE:zWt,getNode:BWt}=ru,{copyTreeState:UWt,getRecoilValueAsLoadable:VWt,invalidateDownstreams:GWt,writeLoadableToTreeState:$Wt}=Fg;function zOe(r){return BWt(r.key).nodeType==="atom"}var wH=class{constructor(e,t){dn(this,"_store",void 0),dn(this,"_treeState",void 0),dn(this,"_changes",void 0),dn(this,"get",n=>{if(this._changes.has(n.key))return this._changes.get(n.key);if(!zOe(n))throw new Error("Reading selectors within atomicUpdate is not supported");let i=VWt(this._store,n,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:new Error(`Expected Recoil atom ${n.key} to have a value, but it is in a loading state.`)}),dn(this,"set",(n,i)=>{if(!zOe(n))throw new Error("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){let o=this.get(n);this._changes.set(n.key,i(o))}else this._changes.set(n.key,i)}),dn(this,"reset",n=>{this.set(n,zWt)}),this._store=e,this._treeState=t,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;let e=UWt(this._treeState);for(let[t,n]of this._changes)$Wt(e,t,FWt(n));return GWt(this._store,e),e}};function HWt(r){return e=>{r.replaceState(t=>{let n=new wH(r,t);return e(n),n.newTreeState_INTERNAL()})}}var WWt={atomicUpdater:HWt},ZWt=WWt.atomicUpdater,YWt=Object.freeze({__proto__:null,atomicUpdater:ZWt});function KWt(r,e){let t=new Map;for(let[n,i]of r)e(i,n)&&t.set(n,i);return t}var XWt=KWt;function QWt(r,e){let t=new Set;for(let n of r)e(n)&&t.add(n);return t}var JWt=QWt;function eZt(r,e){if(!r)throw new Error(e)}var tZt=eZt,aL=tZt;function rZt(...r){let e=new Map;for(let t=0;t<r.length;t++){let n=r[t].keys(),i;for(;!(i=n.next()).done;)e.set(i.value,r[t].get(i.value))}return e}var nZt=rZt;function iZt(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}var oZt=iZt;var{useRef:aZt}=Da.default;function sZt(){let r=aZt();if(0&&Yn("recoil_infer_component_names"))var e;return"<component name not available>"}var VH=sZt,{atomicUpdater:ILe}=YWt,{batchUpdates:GH}=jH,{DEFAULT_VALUE:vL,getNode:MLe,nodes:lZt}=ru,{useRecoilMutableSource:uZt,useStoreRef:vl}=gL,{isRecoilValue:fDr}=_d,{AbstractRecoilValue:$H,getRecoilValueAsLoadable:vS,setRecoilValue:h0,setRecoilValueLoadable:cZt,setUnvalidatedRecoilValue:hZt,subscribeToRecoilValue:HH}=Fg,{updateRetainCount:hS}=ES,{RetentionZone:fZt}=hL,{Snapshot:pDr,cloneSnapshot:xS}=mL,{setByAddingToSet:pZt}=QOe,{isSSR:sL}=zH,{mutableSourceExists:dZt,useMutableSource:mZt}=XOe,{useCallback:ec,useEffect:pf,useMemo:ALe,useRef:yd,useState:WH}=Da.default,CLe=12e4;function PLe(r,e,t){if(r.state==="hasValue")return r.contents;throw r.state==="loading"?new Promise(i=>{t.current.getState().suspendedComponentResolvers.add(i)}):r.state==="hasError"?r.contents:new Error(`Invalid value of loadable atom "${e.key}"`)}function gZt(){let r=vl(),[e,t]=WH([]),n=yd(new Set);n.current=new Set;let i=yd(new Set),o=yd(new Map),l=ec(p=>{let g=o.current.get(p);g&&(g.release(),o.current.delete(p))},[o]),c=VH();return pf(()=>{let p=r.current;function g(_,x){o.current.has(x)&&t([])}iL(n.current,i.current).forEach(_=>{if(o.current.has(_)){LH(`Double subscription to RecoilValue "${_}"`);return}let x=HH(p,new $H(_),C=>{g(C,_)},c);o.current.set(_,x),p.getState().nextTree?p.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{g(p.getState(),_)}):g(p.getState(),_)}),iL(i.current,n.current).forEach(_=>{l(_)}),i.current=n.current}),pf(()=>{let p=o.current;return()=>p.forEach((g,_)=>l(_))},[l]),ALe(()=>{function p(D){return F=>{h0(r.current,D,F)}}function g(D){return()=>h0(r.current,D,vL)}function _(D){var F;n.current.has(D.key)||(n.current=pZt(n.current,D.key));let O=r.current.getState();return vS(r.current,D,Yn("recoil_early_rendering_2021")&&(F=O.nextTree)!==null&&F!==void 0?F:O.currentTree)}function x(D){let F=_(D);return PLe(F,D,r)}function T(D){return[x(D),p(D)]}function C(D){return[_(D),p(D)]}return{getRecoilValue:x,getRecoilValueLoadable:_,getRecoilState:T,getRecoilStateLoadable:C,getSetRecoilState:p,getResetRecoilState:g}},[n,r])}var vZt={current:0};function yZt(r){let e=vl(),t=ec(()=>{var g;let _=e.current,x=_.getState(),T=Yn("recoil_early_rendering_2021")&&(g=x.nextTree)!==null&&g!==void 0?g:x.currentTree;return vS(_,r,T)},[e,r]),n=ec(()=>t(),[t]),i=VH(),o=ec((g,_)=>{let x=e.current;return HH(x,r,()=>{if(!Yn("recoil_suppress_rerender_in_callback"))return _();let C=t();p.current.is(C)||_(),p.current=C},i).release},[e,r,i,t]),l=uZt(),c=mZt(l,n,o),p=yd(c);return pf(()=>{p.current=c}),c}function _Zt(r){let e=vl(),[t,n]=WH([]),i=VH();pf(()=>{let c=e.current,p=c.getState(),g=HH(c,r,x=>{var T;if(!Yn("recoil_suppress_rerender_in_callback"))return n([]);let C=vS(c,r,c.getState().currentTree);!((T=l.current)===null||T===void 0)&&T.is(C)||n(C),l.current=C},i);if(p.nextTree)c.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{l.current=null,n([])});else{var _;if(!Yn("recoil_suppress_rerender_in_callback"))return n([]);let x=vS(c,r,c.getState().currentTree);!((_=l.current)===null||_===void 0)&&_.is(x)||n(x),l.current=x}return g.release},[i,r,e]);let o=vS(e.current,r),l=yd(o);return pf(()=>{l.current=o}),o}function ZH(r){return Yn("recoil_memory_managament_2020")&&DLe(r),dZt()?yZt(r):_Zt(r)}function RLe(r){let e=vl(),t=ZH(r);return PLe(t,r,e)}function YH(r){let e=vl();return ec(t=>{h0(e.current,r,t)},[e,r])}function xZt(r){let e=vl();return ec(()=>{h0(e.current,r,vL)},[e,r])}function bZt(r){return[RLe(r),YH(r)]}function wZt(r){return[ZH(r),YH(r)]}function yL(r){let e=vl();pf(()=>e.current.subscribeToTransactions(r).release,[r,e])}function BOe(r){let e=r.atomValues.toMap(),t=oL(XWt(e,(n,i)=>{let l=MLe(i).persistence_UNSTABLE;return l!=null&&l.type!=="none"&&n.state==="hasValue"}),n=>n.contents);return nZt(r.nonvalidatedAtoms.toMap(),t)}function EZt(r){yL(ec(e=>{let t=e.getState().previousTree,n=e.getState().currentTree;t||(Qc("Transaction subscribers notified without a previous tree being present -- this is a bug in Recoil"),t=e.getState().currentTree);let i=BOe(n),o=BOe(t),l=oL(lZt,p=>{var g,_,x,T;return{persistence_UNSTABLE:{type:(g=(_=p.persistence_UNSTABLE)===null||_===void 0?void 0:_.type)!==null&&g!==void 0?g:"none",backButton:(x=(T=p.persistence_UNSTABLE)===null||T===void 0?void 0:T.backButton)!==null&&x!==void 0?x:!1}}}),c=JWt(n.dirtyAtoms,p=>i.has(p)||o.has(p));r({atomValues:i,previousAtomValues:o,atomInfo:l,modifiedAtoms:c,transactionMetadata:xt({},n.transactionMetadata)})},[r]))}function SZt(r){yL(ec(e=>{let t=xS(e,"current"),n=xS(e,"previous");r({snapshot:t,previousSnapshot:n})},[r]))}function OLe(r){let e=yd();return pf(()=>{e.current=r}),e.current}function TZt(){let r=vl(),[e,t]=WH(()=>xS(r.current)),n=OLe(e),i=yd();return pf(()=>(i.current&&!sL&&window.clearTimeout(i.current),e.retain()),[e]),yL(ec(o=>t(xS(o)),[])),n!==e&&!sL&&(i.current&&(n==null||n.release_INTERNAL(),window.clearTimeout(i.current)),e.retain(),i.current=window.setTimeout(()=>{e.release_INTERNAL(),i.current=null},CLe)),e}function LLe(){let r=vl();return ec(e=>{var t;let n=r.current.getState(),i=(t=n.nextTree)!==null&&t!==void 0?t:n.currentTree,o=e.getStore_INTERNAL().getState().currentTree;GH(()=>{let l=new Set;for(let g of[i.atomValues.keys(),o.atomValues.keys()])for(let _ of g){var c,p;((c=i.atomValues.get(_))===null||c===void 0?void 0:c.contents)!==((p=o.atomValues.get(_))===null||p===void 0?void 0:p.contents)&&MLe(_).shouldRestoreFromSnapshots&&l.add(_)}l.forEach(g=>{cZt(r.current,new $H(g),o.atomValues.has(g)?Cn(o.atomValues.get(g)):vL)}),r.current.replaceState(g=>nn(xt({},g),{stateID:e.getID_INTERNAL()}))})},[r])}function IZt(){let r=vl();return(e,t={})=>{GH(()=>{r.current.addTransactionMetadata(t),e.forEach((n,i)=>hZt(r.current,new $H(i),n))})}}var lL=class{},MZt=new lL;function AZt(r,e){let t=vl(),n=LLe();return ec((...i)=>{function o(_,x){h0(t.current,_,x)}function l(_){h0(t.current,_,vL)}let c=xS(t.current),p=ILe(t.current),g=MZt;return GH(()=>{let _="useRecoilCallback expects a function that returns a function: it accepts a function of the type (RecoilInterface) => T = R and returns a callback function T => R, where RecoilInterface is an object {snapshot, set, ...} and T and R are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof r!="function")throw new Error(_);let x=r({set:o,reset:l,snapshot:c,gotoSnapshot:n,transact_UNSTABLE:p});if(typeof x!="function")throw new Error(_);g=x(...i)}),g instanceof lL&&aL(!1),g},e!=null?[...e,t]:void 0)}function DLe(r){if(Yn("recoil_memory_managament_2020"))return CZt(r)}function CZt(r){let t=(Array.isArray(r)?r:[r]).map(l=>l instanceof fZt?l:l.key),n=vl();pf(()=>{if(!Yn("recoil_memory_managament_2020"))return;let l=n.current;if(i.current&&!sL)window.clearTimeout(i.current),i.current=null;else for(let c of t)hS(l,c,1);return()=>{for(let c of t)hS(l,c,-1)}},[n,...t]);let i=yd(),o=OLe(t);if(!sL&&(o===void 0||!oZt(o,t))){let l=n.current;for(let c of t)hS(l,c,1);if(o)for(let c of o)hS(l,c,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(let c of t)hS(l,c,-1)},CLe)}}function PZt(r,e){let t=vl();return ALe(()=>(...n)=>{ILe(t.current)(o=>{r(o)(...n)})},e!=null?[...e,t]:void 0)}var RZt={recoilComponentGetRecoilValueCount_FOR_TESTING:vZt,useGotoRecoilSnapshot:LLe,useRecoilCallback:AZt,useRecoilInterface:gZt,useRecoilSnapshot:TZt,useRecoilState:bZt,useRecoilStateLoadable:wZt,useRecoilTransaction:PZt,useRecoilTransactionObserver:SZt,useRecoilValue:RLe,useRecoilValueLoadable:ZH,useRetain:DLe,useResetRecoilState:xZt,useSetRecoilState:YH,useSetUnvalidatedAtomValues:IZt,useTransactionObservation_DEPRECATED:EZt,useTransactionSubscription_DEPRECATED:yL},{peekNodeInfo:OZt}=f0,{useStoreRef:LZt}=gL;function DZt(){let r=LZt();return({key:e})=>OZt(r.current,r.current.getState().currentTree,e)}var NZt=DZt,{RecoilRoot:kZt,useStoreRef:qZt}=gL,{useMemo:jZt}=Da.default;function FZt(){let r=qZt().current;return jZt(()=>{function e({children:t}){return Da.default.createElement(kZt,{store_INTERNAL:r},t)}return e},[r])}var zZt=FZt;var{isReactNative:dDr,isSSR:mDr}=zH;function Ju(r,e,t){if(typeof r=="string"&&!r.includes("\"")&&!r.includes("\\"))return`"${r}"`;switch(typeof r){case"undefined":return"";case"boolean":return r?"true":"false";case"number":case"symbol":return String(r);case"string":return JSON.stringify(r);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw new Error("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${r.name})__`}if(r===null)return"null";if(typeof r!="object"){var n;return(n=JSON.stringify(r))!==null&&n!==void 0?n:""}if(ro(r))return"__PROMISE__";if(Array.isArray(r))return`[${r.map((i,o)=>Ju(i,e,o.toString()))}]`;if(typeof r.toJSON=="function")return Ju(r.toJSON(t),e,t);if(r instanceof Map){let i={};for(let[o,l]of r)i[typeof o=="string"?o:Ju(o,e)]=l;return Ju(i,e,t)}return r instanceof Set?Ju(Array.from(r).sort((i,o)=>Ju(i,e).localeCompare(Ju(o,e))),e,t):Symbol!==void 0&&r[Symbol.iterator]!=null&&typeof r[Symbol.iterator]=="function"?Ju(Array.from(r),e,t):`{${Object.keys(r).filter(i=>r[i]!==void 0).sort().map(i=>`${Ju(i,e)}:${Ju(r[i],e,i)}`).join(",")}}`}function BZt(r,e={allowFunctions:!1}){return Ju(r,e)}var _L=BZt,EH=class{constructor(e){var t,n,i;dn(this,"_numLeafs",void 0),dn(this,"_root",void 0),dn(this,"_onHit",void 0),dn(this,"_onSet",void 0),dn(this,"_mapNodeValue",void 0),this._numLeafs=0,this._root=null,this._onHit=(t=e==null?void 0:e.onHit)!==null&&t!==void 0?t:()=>{},this._onSet=(n=e==null?void 0:e.onSet)!==null&&n!==void 0?n:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:o=>o}size(){return this._numLeafs}root(){return this._root}get(e,t){var n;return(n=this.getLeafNode(e,t))===null||n===void 0?void 0:n.value}getLeafNode(e,t){return NLe(this.root(),n=>this._mapNodeValue(e(n)),{onNodeVisit:n=>{t==null||t.onNodeVisit(n),n.type==="leaf"&&this._onHit(n)}})}set(e,t,n){let i,o=SH(this.root(),e.map(([l,c])=>[l,this._mapNodeValue(c)]),null,t,null,{onNodeVisit:l=>{n==null||n.onNodeVisit(l),l.type==="leaf"&&(i=l)}});this.root()||(this._root=o),this._numLeafs++,this._onSet(Cn(i))}delete(e){if(!this.root())return!1;let t=Cn(this.root());return UZt(t,e,e.parent)?e===t||t.type==="branch"&&!t.branches.size?(this._root=null,this._numLeafs=0,!0):(this._numLeafs-=qLe(e),!0):!1}clear(){this._numLeafs=0,this._root=null}},NLe=(r,e,t)=>{var n;if(r==null)return;if(t==null||(n=t.onNodeVisit)===null||n===void 0||n.call(t,r),r.type==="leaf")return r;let i=e(r.nodeKey);return NLe(r.branches.get(i),e,t)},SH=(r,e,t,n,i,o)=>{var l;let c;if(r==null){if(e.length===0)c={type:"leaf",value:n,parent:t,branchKey:i};else{let[p,...g]=e,[_,x]=p;c={type:"branch",nodeKey:_,parent:t,branches:new Map,branchKey:i},c.branches.set(x,SH(null,g,c,n,x,o))}}else if(c=r,e.length){let[p,...g]=e,[_,x]=p;r.type==="branch"&&r.nodeKey===_||aL(!1),r.branches.set(x,SH(r.branches.get(x),g,r,n,x,o))}return o==null||(l=o.onNodeVisit)===null||l===void 0||l.call(o,c),c},UZt=(r,e,t)=>t?(t.branches.delete(e.branchKey),kLe(r,t,t.parent)):r===e,kLe=(r,e,t)=>t?(e.branches.size===0&&t.branches.delete(e.branchKey),kLe(r,t,t.parent)):r===e,qLe=r=>r.type==="leaf"?1:Array.from(r.branches.values()).reduce((e,t)=>e+qLe(t),0),VZt={TreeCache:EH},GZt=VZt.TreeCache,jLe=Object.freeze({__proto__:null,TreeCache:GZt}),TH=class{constructor(e){var t;dn(this,"_maxSize",void 0),dn(this,"_size",void 0),dn(this,"_head",void 0),dn(this,"_tail",void 0),dn(this,"_map",void 0),dn(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(t=e.mapKey)!==null&&t!==void 0?t:n=>n}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){let t=this._keyMapper(e),n=this._map.get(t);if(n)return this.set(e,n.value),n.value}set(e,t){let n=this._keyMapper(e);this._map.get(n)&&this.delete(e);let o=this.head(),l={key:e,right:o,left:null,value:t};o?o.left=l:this._tail=l,this._map.set(n,l),this._head=l,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){let e=this.tail();e&&this.delete(e.key)}delete(e){let t=this._keyMapper(e);if(!this._size||!this._map.has(t))return;let n=Cn(this._map.get(t)),i=n.right,o=n.left;i&&(i.left=n.left),o&&(o.right=n.right),n===this.head()&&(this._head=i),n===this.tail()&&(this._tail=o),this._map.delete(t),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}},$Zt={LRUCache:TH},HZt=$Zt.LRUCache,FLe=Object.freeze({__proto__:null,LRUCache:HZt}),{LRUCache:WZt}=FLe,{TreeCache:ZZt}=jLe;function YZt(r,e=t=>t){let t=new WZt({maxSize:r}),n=new ZZt({mapNodeValue:e,onHit:i=>{t.set(i,!0)},onSet:i=>{let o=t.tail();t.set(i,!0),o&&n.size()>r&&n.delete(o.key)}});return n}var UOe=YZt,{TreeCache:KZt}=jLe,WO={equality:"reference",eviction:"keep-all",maxSize:1/0};function XZt({equality:r=WO.equality,eviction:e=WO.eviction,maxSize:t=WO.maxSize}=WO){let n=QZt(r);return JZt(e,t,n)}function QZt(r){switch(r){case"reference":return e=>e;case"value":return e=>_L(e)}throw new Error(`Unrecognized equality policy ${r}`)}function JZt(r,e,t){switch(r){case"keep-all":return new KZt({mapNodeValue:t});case"lru":return UOe(Cn(e),t);case"most-recent":return UOe(1,t)}throw new Error(`Unrecognized eviction policy ${r}`)}var eYt=XZt;function tYt(r){return()=>null}var rYt={startPerfBlock:tYt},{CANCELED:fS,Canceled:nYt,loadableWithError:pS,loadableWithPromise:iYt,loadableWithValue:hH}=bS,{getNodeLoadable:VOe,peekNodeLoadable:oYt,setNodeValue:aYt}=f0,{saveDependencyMapToStore:sYt}=wS,{DEFAULT_VALUE:lYt,RecoilValueNotReady:uYt,getConfigDeletionHandler:cYt,registerNode:GOe}=ru,{isRecoilValue:hYt}=_d,{AbstractRecoilValue:fYt}=_d,{setRecoilValueLoadable:pYt}=Fg,{retainedByOptionWithDefault:dYt}=ES,{cloneSnapshot:mYt}=mL,{startPerfBlock:gYt}=rYt,dS=[],ZO=new Map,vYt=(()=>{let r=0;return()=>r++})();function yYt(){return{depValuesDiscoveredSoFarDuringAsyncWork:null,latestLoadable:null,latestExecutionId:null,stateVersion:null}}function _Yt(r){let{key:e,get:t,cachePolicy_UNSTABLE:n}=r,i=r.set!=null?r.set:void 0,o=eYt(n!=null?n:{equality:"reference",eviction:"keep-all"}),l=dYt(r.retainedBy_UNSTABLE),c=new Map,p=0;function g(){return!Yn("recoil_memory_managament_2020")||p>0}function _(Fe){return c.has(Fe)||c.set(Fe,yYt()),Cn(c.get(Fe))}function x(Fe){return p++,Fe.getState().knownSelectors.add(e),()=>{p--,Fe.getState().knownSelectors.delete(e),c.delete(Fe)}}function T(){return cYt(e)!==void 0&&!g()}function C(Fe,st,He){if(st.state==="loading"){let et=ZO.get(He);et==null&&ZO.set(He,et=new Set),et.add(Fe)}}function D(Fe,st){let He=ZO.get(st);if(He!==void 0){for(let et of He)pYt(et,new fYt(e),Fe);ZO.delete(st)}}function F(Fe,st,He){let et=Fe.getState().knownSelectors.has(He);if(et&&st.atomValues.has(He))return Cn(st.atomValues.get(He));let it=VOe(Fe,st,He);return it.state!=="loading"&&et&&st.atomValues.set(He,it),it}function O(Fe,st,He,et,it){return st.then(at=>{if(!g())return Be(Fe,it),fS;let Nt=hH(at);return ht(He,ue(et),Nt),U(Fe,He,new Set(et.keys()),it),q(Fe,Nt,it),{__value:at,__key:e}}).catch(at=>{if(!g())return Be(Fe,it),fS;if(nt(Fe,it)&&$e(et,Fe,it),ro(at))return k(Fe,at,He,et,it);let Nt=pS(at);throw ht(He,ue(et),Nt),U(Fe,He,new Set(et.keys()),it),q(Fe,Nt,it),at})}function k(Fe,st,He,et,it){return st.then(at=>{if(!g())return Be(Fe,it),fS;if(at instanceof nYt)return Qc("Selector was released while it had dependencies"),fS;let{__key:Nt,__value:At}=at!=null?at:{},Mt=!0;Nt!=null&&(He.atomValues.set(Nt,hH(At)),Mt=!1);let Ut=ie(Fe,He);if(Ut&&Ut.state==="hasValue")return Re(Ut,Fe),{__value:Ut.contents,__key:e};if(!nt(Fe,it)){var Vt;let yr=ge(He);if((yr==null||(Vt=yr.latestLoadable)===null||Vt===void 0?void 0:Vt.state)==="loading")return yr.latestLoadable.contents}let[$t,Lr]=se(Fe,He,it,Mt);if(nt(Fe,it)&&$e(Lr,Fe,it),We($t),$t.state!=="loading"&&(ht(He,ue(Lr),$t),U(Fe,He,new Set(Lr.keys()),it),q(Fe,$t,it)),$t.state==="hasError")throw $t.contents;return $t.state==="hasValue"?{__value:$t.contents,__key:e}:$t.contents}).catch(at=>{if(!g())return Be(Fe,it),fS;let Nt=pS(at);throw ht(He,ue(et),pS(at)),U(Fe,He,new Set(et.keys()),it),q(Fe,Nt,it),at})}function q(Fe,st,He){nt(Fe,He)&&(Re(st,Fe),D(st,He))}function U(Fe,st,He,et){var it,at,Nt,At;if(nt(Fe,et)||st.version===((it=Fe.getState())===null||it===void 0||(at=it.currentTree)===null||at===void 0?void 0:at.version)||st.version===((Nt=Fe.getState())===null||Nt===void 0||(At=Nt.nextTree)===null||At===void 0?void 0:At.version)){var Mt,Ut,Vt;sYt(new Map([[e,He]]),Fe,(Mt=(Ut=Fe.getState())===null||Ut===void 0||(Vt=Ut.nextTree)===null||Vt===void 0?void 0:Vt.version)!==null&&Mt!==void 0?Mt:Fe.getState().currentTree.version)}}function H(Fe,st,He,et,it){He.add(et),U(Fe,st,He,it)}function se(Fe,st,He,et=!1){let it=gYt(e),at,Nt=!1,At,Mt=new Map,Ut=new Set;U(Fe,st,Ut,He);function Vt(yr){let{key:ur}=yr;H(Fe,st,Ut,ur,He);let cr=et?VOe(Fe,st,ur):F(Fe,st,ur);if(We(cr),Mt.set(ur,cr),cr.state==="hasValue")return cr.contents;throw cr.contents}let $t=!1,Lr=yr=>(...ur)=>{if(!$t)throw new Error("getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can obtain the current Recoil state without a subscription.");let cr=mYt(Fe),hr=yr({snapshot:cr});if(typeof hr!="function")throw new Error("getCallback() expects a function that returns a function.");return hr(...ur)};try{at=t({get:Vt,getCallback:Lr}),at=hYt(at)?Vt(at):at,$t=!0,ro(at)?at=O(Fe,at,st,Mt,He).finally(it):it()}catch(yr){at=yr,ro(at)?at=k(Fe,at,st,Mt,He).finally(it):(Nt=!0,it())}return Nt?At=pS(at):ro(at)?At=iYt(at):At=hH(at),We(At),[At,Mt]}function ie(Fe,st){let He=new Set,et=_(Fe),it=o.get(at=>(typeof at!="string"&&aL(!1),F(Fe,st,at).contents),{onNodeVisit:at=>{at.type==="branch"&&at.nodeKey!==e&&typeof at.nodeKey=="string"&&He.add(at.nodeKey)}});return it&&U(Fe,st,He,et.latestExecutionId),it}function ue(Fe){return Array.from(Fe.entries()).map(([st,He])=>[st,He.contents])}function ve(Fe,st){let He=vYt(),[et,it]=se(Fe,st,He);return Re(et,Fe,it,He,st),je(st,ue(it),et),C(Fe,et,He),et}function ye(Fe,st){let He=ie(Fe,st);if(He!=null)return Re(He,Fe),He;let et=ge(st);if(et){let it=et;return C(Fe,Cn(it.latestLoadable),Cn(it.latestExecutionId)),Cn(it.latestLoadable)}return ve(Fe,st)}function ge(Fe){var st;let[,He]=(st=Array.from(c.entries()).find(([et,it])=>it.latestLoadable!=null&&it.latestExecutionId!=null&&!Le(et,Fe)))!==null&&st!==void 0?st:[];return He}let _e=new Map;function Le(Fe,st){var He,et;let it=_(Fe),at=(He=it.depValuesDiscoveredSoFarDuringAsyncWork)!==null&&He!==void 0?He:new Map,Nt=Array(((et=_e.get(st.version))!==null&&et!==void 0?et:new Map).entries()),At=_e.has(st.version)&&Nt.length===at.size&&Nt.every(([Mt,Ut])=>at.get(Mt)===Ut);return at==null||st.version===it.stateVersion||At?!1:(_e.set(st.version,new Map(at)),Array.from(at).some(([Mt,Ut])=>F(Fe,st,Mt).contents!==Ut.contents))}function Re(Fe,st,He,et,it){let at=_(st);Fe.state==="loading"?(at.depValuesDiscoveredSoFarDuringAsyncWork=He,at.latestExecutionId=et,at.latestLoadable=Fe,at.stateVersion=it==null?void 0:it.version):(at.depValuesDiscoveredSoFarDuringAsyncWork=null,at.latestExecutionId=null,at.latestLoadable=null,at.stateVersion=null)}function je(Fe,st,He){He.state!=="loading"&&ht(Fe,st,He)}function $e(Fe,st,He){let et=_(st);nt(st,He)&&(et.depValuesDiscoveredSoFarDuringAsyncWork=Fe)}function Be(Fe,st){nt(Fe,st)&&c.delete(Fe)}function nt(Fe,st){let He=_(Fe);return st===He.latestExecutionId}function We(Fe){Fe.state!=="loading"&&(Fe.contents,void 0)}function mt(Fe){}function ht(Fe,st,He){Fe.atomValues.set(e,He),o.set(st,He)}function _t(Fe){if(dS.includes(e)){let st=`Recoil selector has circular dependencies: ${dS.slice(dS.indexOf(e)).join(" \u2192 ")}`;return pS(new Error(st))}dS.push(e);try{return Fe()}finally{dS.pop()}}function ze(Fe,st){return o.get(et=>{typeof et!="string"&&aL(!1);let it=oYt(Fe,st,et);return it==null?void 0:it.contents})}function St(Fe,st){return _t(()=>ye(Fe,st))}function jt(Fe){Fe.atomValues.delete(e)}return i!=null?GOe({key:e,nodeType:"selector",peek:ze,get:St,set:(st,He,et)=>{let it=!1,at=new Map;function Nt({key:Vt}){if(it)throw new Error("Recoil: Async selector sets are not currently supported.");let $t=F(st,He,Vt);if(We($t),$t.state==="hasValue")return $t.contents;throw $t.state==="loading"?new uYt(Vt):$t.contents}function At(Vt,$t){if(it)throw new Error("Recoil: Async selector sets are not currently supported.");let Lr=typeof $t=="function"?$t(Nt(Vt)):$t;aYt(st,He,Vt.key,Lr).forEach((ur,cr)=>at.set(cr,ur))}function Mt(Vt){At(Vt,lYt)}let Ut=i({set:At,get:Nt,reset:Mt},et);if(Ut!==void 0)throw ro(Ut)?new Error("Recoil: Async selector sets are not currently supported."):new Error("Recoil: selector set should be a void function.");return it=!0,at},init:x,invalidate:jt,shouldDeleteConfigOnRelease:T,dangerouslyAllowMutability:r.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):GOe({key:e,nodeType:"selector",peek:ze,get:St,init:x,invalidate:jt,shouldDeleteConfigOnRelease:T,dangerouslyAllowMutability:r.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}var uL=_Yt,{loadableWithError:$Oe,loadableWithPromise:HOe,loadableWithValue:mS}=bS,{DEFAULT_VALUE:qg,DefaultValue:s0,getConfigDeletionHandler:zLe,registerNode:xYt,setConfigDeletionHandler:bYt}=ru,{isRecoilValue:wYt}=_d,{markRecoilValueModified:EYt,setRecoilValue:WOe,setRecoilValueLoadable:SYt}=Fg,{retainedByOptionWithDefault:TYt}=ES;function IYt(r){let{key:e,persistence_UNSTABLE:t}=r,n=TYt(r.retainedBy_UNSTABLE),i=0,o=ro(r.default)?HOe(r.default.then(O=>(o=mS(O),{__key:e,__value:O})).catch(O=>{throw o=$Oe(O),O})):mS(r.default),l,c=new Map;function p(O,k){let q=k.then(U=>{var H,se;return((se=((H=O.getState().nextTree)!==null&&H!==void 0?H:O.getState().currentTree).atomValues.get(e))===null||se===void 0?void 0:se.contents)===q&&WOe(O,F,U),{__key:e,__value:U}}).catch(U=>{var H,se;throw((se=((H=O.getState().nextTree)!==null&&H!==void 0?H:O.getState().currentTree).atomValues.get(e))===null||se===void 0?void 0:se.contents)===q&&SYt(O,F,$Oe(U)),U});return q}function g(O,k,q){i++;let U=O.getState().knownAtoms.has(e);if(O.getState().knownAtoms.add(e),o.state==="loading"){let ye=()=>{var ge;((ge=O.getState().nextTree)!==null&&ge!==void 0?ge:O.getState().currentTree).atomValues.has(e)||EYt(O,F)};o.contents.then(ye).catch(ye)}let H=qg,se=null;if(r.effects_UNSTABLE!=null&&!U){let ye=!0,ge=Re=>je=>{if(ye){let $e=H instanceof s0||ro(H)?o.state==="hasValue"?o.contents:qg:H;H=typeof je=="function"?je($e):je,ro(H)&&(H=H.then(Be=>(se={effect:Re,value:Be},Be)))}else{if(ro(je))throw new Error("Setting atoms to async values is not implemented.");typeof je!="function"&&(se={effect:Re,value:je}),WOe(O,F,typeof je=="function"?$e=>{let Be=je($e);return se={effect:Re,value:Be},Be}:je)}},_e=Re=>()=>ge(Re)(qg),Le=Re=>je=>{O.subscribeToTransactions($e=>{var Be;let{currentTree:nt,previousTree:We}=$e.getState();We||(Qc("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),We=nt);let mt=(Be=nt.atomValues.get(e))!==null&&Be!==void 0?Be:o;if(mt.state==="hasValue"){var ht,_t,ze,St;let jt=mt.contents,Fe=(ht=We.atomValues.get(e))!==null&&ht!==void 0?ht:o,st=Fe.state==="hasValue"?Fe.contents:qg;((_t=se)===null||_t===void 0?void 0:_t.effect)!==Re||((ze=se)===null||ze===void 0?void 0:ze.value)!==jt?je(jt,st):((St=se)===null||St===void 0?void 0:St.effect)===Re&&(se=null)}},e)};for(let Re of(ie=r.effects_UNSTABLE)!==null&&ie!==void 0?ie:[]){var ie;let je=Re({node:F,trigger:q,setSelf:ge(Re),resetSelf:_e(Re),onSet:Le(Re)});if(je!=null){var ue;c.set(O,[...((ue=c.get(O))!==null&&ue!==void 0?ue:[]),je])}}ye=!1}if(!(H instanceof s0)){var ve;let ye=ro(H)?HOe(p(O,H)):mS(H);k.atomValues.set(e,ye),(ve=O.getState().nextTree)===null||ve===void 0||ve.atomValues.set(e,ye)}return()=>{var ye;i--,(ye=c.get(O))===null||ye===void 0||ye.forEach(ge=>ge()),c.delete(O),O.getState().knownAtoms.delete(e)}}function _(O,k){var q,U,H;return(q=(U=k.atomValues.get(e))!==null&&U!==void 0?U:(H=l)===null||H===void 0?void 0:H[1])!==null&&q!==void 0?q:o}function x(O,k){if(k.atomValues.has(e))return Cn(k.atomValues.get(e));if(k.nonvalidatedAtoms.has(e)){if(l!=null)return l;if(t==null)return LH(`Tried to restore a persisted value for atom ${e} but it has no persistence settings.`),o;let q=k.nonvalidatedAtoms.get(e),U=t.validator(q,qg);return l=U instanceof s0?o:mS(U),l}else return o}function T(){l=void 0}function C(O,k,q){if(k.atomValues.has(e)){let U=Cn(k.atomValues.get(e));if(U.state==="hasValue"&&q===U.contents)return new Map}else if(!k.nonvalidatedAtoms.has(e)&&q instanceof s0)return new Map;return l=void 0,new Map().set(e,mS(q))}function D(){return zLe(e)!==void 0&&i<=0}let F=xYt({key:e,nodeType:"atom",peek:_,get:x,set:C,init:g,invalidate:T,shouldDeleteConfigOnRelease:D,dangerouslyAllowMutability:r.dangerouslyAllowMutability,persistence_UNSTABLE:r.persistence_UNSTABLE?{type:r.persistence_UNSTABLE.type,backButton:r.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:n});return F}function BLe(r){let n=r,{default:e}=n,t=Oo(n,["default"]);return wYt(e)?MYt(nn(xt({},t),{default:e})):IYt(nn(xt({},t),{default:e}))}function MYt(r){let e=BLe(nn(xt({},r),{default:qg,persistence_UNSTABLE:r.persistence_UNSTABLE===void 0?void 0:nn(xt({},r.persistence_UNSTABLE),{validator:n=>n instanceof s0?n:Cn(r.persistence_UNSTABLE).validator(n,qg)}),effects_UNSTABLE:r.effects_UNSTABLE})),t=uL({key:`${r.key}__withFallback`,get:({get:n})=>{let i=n(e);return i instanceof s0?r.default:i},set:({set:n},i)=>n(e,i),dangerouslyAllowMutability:r.dangerouslyAllowMutability});return bYt(t.key,zLe(r.key)),t}var ULe=BLe,IH=class{constructor(e){var t;dn(this,"_map",void 0),dn(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(t=e==null?void 0:e.mapKey)!==null&&t!==void 0?t:n=>n}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,t){this._map.set(this._keyMapper(e),t)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}},AYt={MapCache:IH},CYt=AYt.MapCache,PYt=Object.freeze({__proto__:null,MapCache:CYt}),{LRUCache:ZOe}=FLe,{MapCache:RYt}=PYt,YO={equality:"reference",eviction:"none",maxSize:1/0};function OYt({equality:r=YO.equality,eviction:e=YO.eviction,maxSize:t=YO.maxSize}=YO){let n=LYt(r);return DYt(e,t,n)}function LYt(r){switch(r){case"reference":return e=>e;case"value":return e=>_L(e)}throw new Error(`Unrecognized equality policy ${r}`)}function DYt(r,e,t){switch(r){case"keep-all":return new RYt({mapKey:t});case"lru":return new ZOe({mapKey:t,maxSize:Cn(e)});case"most-recent":return new ZOe({mapKey:t,maxSize:1})}throw new Error(`Unrecognized eviction policy ${r}`)}var VLe=OYt,{setConfigDeletionHandler:NYt}=ru;function kYt(r){var e,t;let n=VLe({equality:(e=(t=r.cachePolicyForParams_UNSTABLE)===null||t===void 0?void 0:t.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var o;let l=n.get(i);if(l!=null)return l;let _=r,{cachePolicyForParams_UNSTABLE:c}=_,p=Oo(_,["cachePolicyForParams_UNSTABLE"]),g=ULe(nn(xt({},p),{key:`${r.key}__${(o=_L(i))!==null&&o!==void 0?o:"void"}`,default:typeof r.default=="function"?r.default(i):r.default,retainedBy_UNSTABLE:typeof r.retainedBy_UNSTABLE=="function"?r.retainedBy_UNSTABLE(i):r.retainedBy_UNSTABLE,effects_UNSTABLE:typeof r.effects_UNSTABLE=="function"?r.effects_UNSTABLE(i):r.effects_UNSTABLE}));return n.set(i,g),NYt(g.key,()=>{n.delete(i)}),g}}var qYt=kYt,{setConfigDeletionHandler:jYt}=ru,FYt=0;function zYt(r){var e,t;let n=VLe({equality:(e=(t=r.cachePolicyForParams_UNSTABLE)===null||t===void 0?void 0:t.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var o;let l=n.get(i);if(l!=null)return l;let c=`${r.key}__selectorFamily/${(o=_L(i,{allowFunctions:!0}))!==null&&o!==void 0?o:"void"}/${FYt++}`,p=T=>r.get(i)(T),g=r.cachePolicy_UNSTABLE,_=typeof r.retainedBy_UNSTABLE=="function"?r.retainedBy_UNSTABLE(i):r.retainedBy_UNSTABLE,x;if(r.set!=null){let T=r.set;x=uL({key:c,get:p,set:(D,F)=>T(i)(D,F),cachePolicy_UNSTABLE:g,dangerouslyAllowMutability:r.dangerouslyAllowMutability,retainedBy_UNSTABLE:_})}else x=uL({key:c,get:p,cachePolicy_UNSTABLE:g,dangerouslyAllowMutability:r.dangerouslyAllowMutability,retainedBy_UNSTABLE:_});return n.set(i,x),jYt(x.key,()=>{n.delete(i)}),x}}var xd=zYt,BYt=xd({key:"__constant",get:r=>()=>r,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function UYt(r){return BYt(r)}var VYt=UYt,GYt=xd({key:"__error",get:r=>()=>{throw new Error(r)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function $Yt(r){return GYt(r)}var HYt=$Yt;function WYt(r){return r}var ZYt=WYt,{loadableWithError:GLe,loadableWithPromise:$Le,loadableWithValue:HLe}=bS;function xL(r,e){let t=Array(e.length).fill(void 0),n=Array(e.length).fill(void 0);for(let[i,o]of e.entries())try{t[i]=r(o)}catch(l){n[i]=l}return[t,n]}function YYt(r){return r!=null&&!ro(r)}function bL(r){return Array.isArray(r)?r:Object.getOwnPropertyNames(r).map(e=>r[e])}function KH(r){return r!=null&&typeof r=="object"&&r.hasOwnProperty("__value")?r.__value:r}function MH(r,e){return Array.isArray(r)?e:Object.getOwnPropertyNames(r).reduce((t,n,i)=>nn(xt({},t),{[n]:e[i]}),{})}function u0(r,e,t){let n=t.map((i,o)=>i==null?HLe(e[o]):ro(i)?$Le(i):GLe(i));return MH(r,n)}function KYt(r,e){return e.map((t,n)=>t===void 0?r[n]:t)}var XYt=xd({key:"__waitForNone",get:r=>({get:e})=>{let t=bL(r),[n,i]=xL(e,t);return u0(r,n,i)},dangerouslyAllowMutability:!0}),QYt=xd({key:"__waitForAny",get:r=>({get:e})=>{let t=bL(r),[n,i]=xL(e,t);return i.some(o=>!ro(o))?u0(r,n,i):new Promise(o=>{for(let[l,c]of i.entries())ro(c)&&c.then(p=>{n[l]=KH(p),i[l]=void 0,o(u0(r,n,i))}).catch(p=>{i[l]=p,o(u0(r,n,i))})})},dangerouslyAllowMutability:!0}),JYt=xd({key:"__waitForAll",get:r=>({get:e})=>{let t=bL(r),[n,i]=xL(e,t);if(i.every(l=>l==null))return MH(r,n);let o=i.find(YYt);if(o!=null)throw o;return Promise.all(i).then(l=>MH(r,KYt(n,l).map(KH)))},dangerouslyAllowMutability:!0}),e9t=xd({key:"__waitForAllSettled",get:r=>({get:e})=>{let t=bL(r),[n,i]=xL(e,t);return i.every(o=>!ro(o))?u0(r,n,i):Promise.all(i.map((o,l)=>ro(o)?o.then(c=>{n[l]=KH(c),i[l]=void 0}).catch(c=>{n[l]=void 0,i[l]=c}):null)).then(()=>u0(r,n,i))},dangerouslyAllowMutability:!0}),t9t=xd({key:"__noWait",get:r=>({get:e})=>{try{return HLe(e(r))}catch(t){return ro(t)?$Le(t):GLe(t)}},dangerouslyAllowMutability:!0}),r9t={waitForNone:XYt,waitForAny:QYt,waitForAll:JYt,waitForAllSettled:e9t,noWait:t9t},{batchUpdates:n9t,setBatcher:i9t}=jH,{DefaultValue:o9t}=ru,{RecoilRoot:a9t}=gL,{isRecoilValue:s9t}=_d,{retentionZone:l9t}=hL,{freshSnapshot:u9t}=mL,{useGotoRecoilSnapshot:c9t,useRecoilCallback:h9t,useRecoilSnapshot:f9t,useRecoilState:p9t,useRecoilStateLoadable:d9t,useRecoilTransaction:m9t,useRecoilTransactionObserver:g9t,useRecoilValue:v9t,useRecoilValueLoadable:y9t,useResetRecoilState:_9t,useRetain:x9t,useSetRecoilState:b9t,useSetUnvalidatedAtomValues:w9t,useTransactionObservation_DEPRECATED:E9t}=RZt,{noWait:S9t,waitForAll:T9t,waitForAllSettled:I9t,waitForAny:M9t,waitForNone:A9t}=r9t,cn={DefaultValue:o9t,RecoilRoot:a9t,useRecoilBridgeAcrossReactRoots_UNSTABLE:zZt,atom:ULe,selector:uL,retentionZone:l9t,atomFamily:qYt,selectorFamily:xd,constSelector:VYt,errorSelector:HYt,readOnlySelector:ZYt,useRecoilValue:v9t,useRecoilValueLoadable:y9t,useRecoilState:p9t,useRecoilStateLoadable:d9t,useSetRecoilState:b9t,useResetRecoilState:_9t,useGetRecoilValueInfo_UNSTABLE:NZt,useRetain:x9t,useRecoilCallback:h9t,useRecoilTransaction_UNSTABLE:m9t,useGotoRecoilSnapshot:c9t,useRecoilSnapshot:f9t,useRecoilTransactionObserver_UNSTABLE:g9t,useTransactionObservation_UNSTABLE:E9t,useSetUnvalidatedAtomValues_UNSTABLE:w9t,noWait:S9t,waitForNone:A9t,waitForAny:M9t,waitForAll:T9t,waitForAllSettled:I9t,isRecoilValue:s9t,batchUpdates:n9t,setBatcher:i9t,snapshot_UNSTABLE:u9t},gDr=cn.DefaultValue,WLe=cn.RecoilRoot,vDr=cn.useRecoilBridgeAcrossReactRoots_UNSTABLE,Vr=cn.atom,zg=cn.selector,yDr=cn.retentionZone,_Dr=cn.atomFamily,xDr=cn.selectorFamily,bDr=cn.constSelector,wDr=cn.errorSelector,EDr=cn.readOnlySelector,Bs=cn.useRecoilValue,SDr=cn.useRecoilValueLoadable,wL=cn.useRecoilState,TDr=cn.useRecoilStateLoadable,nu=cn.useSetRecoilState,IDr=cn.useResetRecoilState,MDr=cn.useGetRecoilValueInfo_UNSTABLE,ADr=cn.useRetain,C9t=cn.useRecoilCallback,CDr=cn.useRecoilTransaction_UNSTABLE,PDr=cn.useGotoRecoilSnapshot,RDr=cn.useRecoilSnapshot,ODr=cn.useRecoilTransactionObserver_UNSTABLE,LDr=cn.useTransactionObservation_UNSTABLE,DDr=cn.useSetUnvalidatedAtomValues_UNSTABLE,NDr=cn.noWait,kDr=cn.waitForNone,qDr=cn.waitForAny,jDr=cn.waitForAll,FDr=cn.waitForAllSettled,zDr=cn.isRecoilValue,BDr=cn.batchUpdates,UDr=cn.setBatcher,VDr=cn.snapshot_UNSTABLE;var io=ke(Et(),1);var aBe=ke(JH(),1);function f2e(r){return vo(this,null,function*(){let e=qi.getGeoreferenceApiClient(),t="/transformations/",n={map_id:r,additional_properties:!0},i=yield e.get(t,{params:n});if(i.status===200)return i.data;console.error("Something went wrong while trying to fetch transformation for given map_id.")})}function p2e(r,e){return vo(this,null,function*(){let t=qi.getGeoreferenceApiClient(),n="/transformations/",i={dry_run:!1},o=nn(xt({},e),{map_id:r}),l=yield t.post(n,o,{params:i});if(l.status===200)return l.data;console.error("Something went wrong while trying to confirm transformation for given map_id and params.")})}function d2e(r,e,t){return vo(this,null,function*(){let n=qi.getGeoreferenceApiClient(),i="/transformations/",o=Object.assign({map_id:r,params:e,overwrites:0},t!==void 0?{clip:t}:{}),l={dry_run:!0},c=yield n.post(i,o,{params:l});if(c.status===200)return c.data;console.error("Something went wrong while trying to fetch transformation for given map_id and params.")})}function m2e(r){return vo(this,null,function*(){let e=qi.getGeoreferenceApiClient(),t="/transformations/",n={transformation_id:r},i={dry_run:!0},o=yield e.post(t,n,{params:i});if(o.status===200)return o.data;console.error("Something went wrong while trying to fetch transformation preview for given transformation_id.")})}var bd=Vr({key:"notificationState",default:null});var nNr=Vr({key:"helperMessageState",default:null}),EL=Vr({key:"isLoadingState",default:!1}),SL=Vr({key:"mapMetadataState",default:null}),TL=Vr({key:"rectifiedImageParamsState",default:null}),IL=Vr({key:"sourceViewParamsState",default:null,dangerouslyAllowMutability:!0}),ML=Vr({key:"targetViewParamsState",default:null,dangerouslyAllowMutability:!0}),AL=Vr({key:"transformationState",default:null});var TS=ke(Et(),1),mf=ke(tn(),1);function E2e(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r))for(e=0;e<r.length;e++)r[e]&&(t=E2e(r[e]))&&(n&&(n+=" "),n+=t);else for(e in r)r[e]&&(n&&(n+=" "),n+=e);return n}function B9t(){for(var r,e,t=0,n="";t<arguments.length;)(r=arguments[t++])&&(e=E2e(r))&&(n&&(n+=" "),n+=e);return n}var Vs=B9t;var eW=ke(Et(),1),CL=ke(tn(),1);var S2e=({name:r,color:e,size:t})=>eW.default.createElement("svg",{viewBox:"0 0 24 24",className:`icon ${r}`,fill:e,width:t,height:t},eW.default.createElement("use",{xlinkHref:`${qi.getSettings().ICON_SPRITE}#${r}`}));S2e.propTypes={name:CL.default.string.isRequired,color:CL.default.string,size:CL.default.number};var T2e=S2e;var SS=T2e;var I2e=r=>{let{activeControl:e=null,className:t="",disabled:n=!1,iconClassName:i="",IconComponent:o,id:l="unknown",onClick:c,title:p="unknown"}=r;return TS.default.createElement("button",{onClick:()=>{c(l)},className:Vs("vkf-control-button",t,e===l&&"active",n&&"disabled"),disabled:n},o===void 0?TS.default.createElement(SS,{name:i,size:24}):TS.default.createElement(o,{glyph:i}),TS.default.createElement("span",{className:"text"},p))};I2e.propTypes={activeControl:mf.default.string,className:mf.default.string,disabled:mf.default.bool,id:mf.default.string.isRequired,iconClassName:mf.default.string,IconComponent:mf.default.elementType,onClick:mf.default.func.isRequired,title:mf.default.string};var M2e=I2e;var IS=M2e;var tc=ke(Et(),1),Hs=ke(tn(),1);var dW=ke(IDe(),1);function br(){return br=dW.default?dW.default.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},br.apply(null,arguments)}var ZDe=ke(qDe(),1);var yW=ke(WDe(),1);function VL(r,e){return VL=yW.default?yW.default.bind():function(t,n){return t.__proto__=n,t},VL(r,e)}function Pn(r,e){r.prototype=(0,ZDe.default)(e.prototype),r.prototype.constructor=r,VL(r,e)}function Rn(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function hn(){return hn=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},hn.apply(null,arguments)}function OS(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var xW=ke(Et());var Ckr=ke($L()),HKt=function(){};function KDe(r,e){var t={};return Object.keys(r).forEach(function(n){if(t[g0(n)]=HKt,0)var i}),t}function _W(r,e){return r[e]!==void 0}function g0(r){return"default"+r.charAt(0).toUpperCase()+r.substr(1)}function XDe(r){return!!r&&(typeof r!="function"||r.prototype&&r.prototype.isReactComponent)}function v0(r,e){return v0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},v0(r,e)}function JDe(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,v0(r,e)}var y0=ke(Et()),nNe=ke(wW()),iNe=ke($L());var ZKt="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function LS(r,e,t){t===void 0&&(t=[]);var n=r.displayName||r.name||"Component",i=XDe(r),o=Object.keys(e),l=o.map(g0);i||!t.length||(0,iNe.default)(!1);var c=function(g){JDe(_,g);function _(){for(var T,C=arguments.length,D=new Array(C),F=0;F<C;F++)D[F]=arguments[F];T=g.call.apply(g,[this].concat(D))||this,T.handlers=Object.create(null),o.forEach(function(k){var q=e[k],U=function(se){if(T.props[q]){var ie;T._notifying=!0;for(var ue=arguments.length,ve=new Array(ue>1?ue-1:0),ye=1;ye<ue;ye++)ve[ye-1]=arguments[ye];(ie=T.props)[q].apply(ie,[se].concat(ve)),T._notifying=!1}T.unmounted||T.setState(function(ge){var _e,Le=ge.values;return{values:hn(Object.create(null),Le,(_e={},_e[k]=se,_e))}})};T.handlers[q]=U}),t.length&&(T.attachRef=function(k){T.inner=k});var O=Object.create(null);return o.forEach(function(k){O[k]=T.props[g0(k)]}),T.state={values:O,prevProps:{}},T}var x=_.prototype;return x.shouldComponentUpdate=function(){return!this._notifying},_.getDerivedStateFromProps=function(C,D){var F=D.values,O=D.prevProps,k={values:hn(Object.create(null),F),prevProps:{}};return o.forEach(function(q){k.prevProps[q]=C[q],!_W(C,q)&&_W(O,q)&&(k.values[q]=C[g0(q)])}),k},x.componentWillUnmount=function(){this.unmounted=!0},x.render=function(){var C=this,D=this.props,F=D.innerRef,O=OS(D,["innerRef"]);l.forEach(function(q){delete O[q]});var k={};return o.forEach(function(q){var U=C.props[q];k[q]=U!==void 0?U:C.state.values[q]}),y0.default.createElement(r,hn({},O,k,this.handlers,{ref:F||this.attachRef}))},_}(y0.default.Component);(0,nNe.polyfill)(c),c.displayName="Uncontrolled("+n+")",c.propTypes=hn({innerRef:function(){}},KDe(e,n)),t.forEach(function(g){c.prototype[g]=function(){var x;return(x=this.inner)[g].apply(x,arguments)}});var p=c;return y0.default.forwardRef&&(p=y0.default.forwardRef(function(g,_){return y0.default.createElement(c,hn({},g,{innerRef:_,__source:{fileName:ZKt,lineNumber:128},__self:this}))}),p.propTypes=c.propTypes),p.ControlledComponent=r,p.deferControlTo=function(g,_,x){return _===void 0&&(_={}),LS(g,hn({},e,_),x)},p}var IW=ke(SW());var fNe=ke($L()),HL=ke(tn());var eh={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},TW={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};var hNe={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},DS={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"};function MW(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[t.length-1];return typeof i=="function"?r.apply(void 0,t):function(o){return r.apply(void 0,t.concat([o]))}}}function Ai(r,e){var t=(r.bsClass||"").trim();return t==null&&(0,fNe.default)(!1),t+(e?"-"+e:"")}var Ci=MW(function(r,e){var t=e.propTypes||(e.propTypes={}),n=e.defaultProps||(e.defaultProps={});return t.bsClass=HL.default.string,n.bsClass=r,e}),pNe=MW(function(r,e,t){typeof e!="string"&&(t=e,e=void 0);var n=t.STYLES||[],i=t.propTypes||{};r.forEach(function(c){n.indexOf(c)===-1&&n.push(c)});var o=HL.default.oneOf(n);if(t.STYLES=n,o._values=n,t.propTypes=br({},i,{bsStyle:o}),e!==void 0){var l=t.defaultProps||(t.defaultProps={});l.bsStyle=e}return t}),_0=MW(function(r,e,t){typeof e!="string"&&(t=e,e=void 0);var n=t.SIZES||[],i=t.propTypes||{};r.forEach(function(c){n.indexOf(c)===-1&&n.push(c)});var o=[];n.forEach(function(c){var p=TW[c];p&&p!==c&&o.push(p),o.push(c)});var l=HL.default.oneOf(o);return l._values=o,t.SIZES=n,t.propTypes=br({},i,{bsSize:l}),e!==void 0&&(t.defaultProps||(t.defaultProps={}),t.defaultProps.bsSize=e),t});function ka(r){var e,t=(e={},e[Ai(r)]=!0,e);if(r.bsSize){var n=TW[r.bsSize]||r.bsSize;t[Ai(r,n)]=!0}return r.bsStyle&&(t[Ai(r,r.bsStyle)]=!0),t}function dNe(r){return{bsClass:r.bsClass,bsSize:r.bsSize,bsStyle:r.bsStyle,bsRole:r.bsRole}}function mNe(r){return r==="bsClass"||r==="bsSize"||r==="bsStyle"||r==="bsRole"}function Gs(r){var e={};return(0,IW.default)(r).forEach(function(t){var n=t[0],i=t[1];mNe(n)||(e[n]=i)}),[dNe(r),e]}function WL(r,e){var t={};e.forEach(function(i){t[i]=!0});var n={};return(0,IW.default)(r).forEach(function(i){var o=i[0],l=i[1];!mNe(o)&&!t[o]&&(n[o]=l)}),[dNe(r),n]}var ba=ke(Et());function e7t(r,e,t){var n=0;return ba.default.Children.map(r,function(i){return ba.default.isValidElement(i)?e.call(t,i,n++):i})}function t7t(r,e,t){var n=0;ba.default.Children.forEach(r,function(i){ba.default.isValidElement(i)&&e.call(t,i,n++)})}function r7t(r){var e=0;return ba.default.Children.forEach(r,function(t){ba.default.isValidElement(t)&&++e}),e}function n7t(r,e,t){var n=0,i=[];return ba.default.Children.forEach(r,function(o){ba.default.isValidElement(o)&&e.call(t,o,n++)&&i.push(o)}),i}function i7t(r,e,t){var n=0,i;return ba.default.Children.forEach(r,function(o){i||ba.default.isValidElement(o)&&e.call(t,o,n++)&&(i=o)}),i}function o7t(r,e,t){var n=0,i=!0;return ba.default.Children.forEach(r,function(o){i&&ba.default.isValidElement(o)&&(e.call(t,o,n++)||(i=!1))}),i}function a7t(r,e,t){var n=0,i=!1;return ba.default.Children.forEach(r,function(o){i||ba.default.isValidElement(o)&&e.call(t,o,n++)&&(i=!0)}),i}function s7t(r){var e=[];return ba.default.Children.forEach(r,function(t){ba.default.isValidElement(t)&&e.push(t)}),e}var Bg={map:e7t,forEach:t7t,count:r7t,find:i7t,filter:n7t,every:o7t,some:a7t,toArray:s7t};var YL=ke(tn()),AW=ke(NS());var iqr=YL.default.oneOfType([YL.default.string,YL.default.number]);function vNe(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return(0,AW.default)(function(n,i,o){var l;return e.every(function(c){return Bg.some(n.children,function(p){return p.props.bsRole===c})?!0:(l=c,!1)}),l?new Error("(children) "+o+" - Missing a required child with bsRole: "+(l+". "+o+" must have at least one child of each of ")+("the following bsRoles: "+e.join(", "))):null})}function yNe(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return(0,AW.default)(function(n,i,o){var l;return e.every(function(c){var p=Bg.filter(n.children,function(g){return g.props.bsRole===c});return p.length>1?(l=c,!1):!0}),l?new Error("(children) "+o+" - Duplicate children detected of bsRole: "+(l+". Only one child each allowed with the following ")+("bsRoles: "+e.join(", "))):null})}var CW=ke(tn()),kS=ke(Et()),c7t={label:CW.default.string.isRequired,onClick:CW.default.func},h7t={label:"Close"},PW=function(r){Pn(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.label,l=i.onClick;return kS.default.createElement("button",{type:"button",className:"close",onClick:l},kS.default.createElement("span",{"aria-hidden":"true"},"\xD7"),kS.default.createElement("span",{className:"sr-only"},o))},e}(kS.default.Component);PW.propTypes=c7t;PW.defaultProps=h7t;var TNe=PW;function Tn(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}var DW=ke(Et()),vf=ke(tn()),LNe=ke(gf());function E7t(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return e.filter(function(n){return n!=null}).reduce(function(n,i){if(typeof i!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return n===null?i:function(){for(var l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];n.apply(this,c),i.apply(this,c)}},null)}var jo=E7t;var S7t={href:vf.default.string,onClick:vf.default.func,onKeyDown:vf.default.func,disabled:vf.default.bool,role:vf.default.string,tabIndex:vf.default.oneOfType([vf.default.number,vf.default.string]),componentClass:LNe.default},T7t={componentClass:"a"};function ONe(r){return!r||r.trim()==="#"}var NW=function(r){Pn(e,r);function e(n,i){var o;return o=r.call(this,n,i)||this,o.handleClick=o.handleClick.bind(Tn(Tn(o))),o.handleKeyDown=o.handleKeyDown.bind(Tn(Tn(o))),o}var t=e.prototype;return t.handleClick=function(i){var o=this.props,l=o.disabled,c=o.href,p=o.onClick;if((l||ONe(c))&&i.preventDefault(),l){i.stopPropagation();return}p&&p(i)},t.handleKeyDown=function(i){i.key===" "&&(i.preventDefault(),this.handleClick(i))},t.render=function(){var i=this.props,o=i.componentClass,l=i.disabled,c=i.onKeyDown,p=Rn(i,["componentClass","disabled","onKeyDown"]);return ONe(p.href)&&(p.role=p.role||"button",p.href=p.href||"#"),l&&(p.tabIndex=-1,p.style=br({pointerEvents:"none"},p.style)),DW.default.createElement(o,br({},p,{onClick:this.handleClick,onKeyDown:jo(this.handleKeyDown,c)}))},e}(DW.default.Component);NW.propTypes=S7t;NW.defaultProps=T7t;var x0=NW;var DNe=ke(SNe());var kW=ke(bi()),s2=ke(Et()),Ug=ke(tn()),NNe=ke(gf());var I7t={active:Ug.default.bool,disabled:Ug.default.bool,block:Ug.default.bool,onClick:Ug.default.func,componentClass:NNe.default,href:Ug.default.string,type:Ug.default.oneOf(["button","reset","submit"])},M7t={active:!1,block:!1,disabled:!1},qW=function(r){Pn(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.renderAnchor=function(i,o){return s2.default.createElement(x0,br({},i,{className:(0,kW.default)(o,i.disabled&&"disabled")}))},t.renderButton=function(i,o){var l=i.componentClass,c=Rn(i,["componentClass"]),p=l||"button";return s2.default.createElement(p,br({},c,{type:c.type||"button",className:o}))},t.render=function(){var i,o=this.props,l=o.active,c=o.block,p=o.className,g=Rn(o,["active","block","className"]),_=Gs(g),x=_[0],T=_[1],C=br({},ka(x),(i={active:l},i[Ai(x,"block")]=c,i)),D=(0,kW.default)(p,C);return T.href?this.renderAnchor(T,D):this.renderButton(T,D)},e}(s2.default.Component);qW.propTypes=I7t;qW.defaultProps=M7t;var Sd=Ci("btn",_0([eh.LARGE,eh.SMALL,eh.XSMALL],pNe((0,DNe.default)(hNe).concat([DS.DEFAULT,DS.PRIMARY,DS.LINK]),DS.DEFAULT,qW)));var qNe=ke(bi()),jW=ke(Et()),c2=ke(tn()),jNe=ke(u2());var O7t={vertical:c2.default.bool,justified:c2.default.bool,block:(0,jNe.default)(c2.default.bool,function(r){var e=r.block,t=r.vertical;return e&&!t?new Error("`block` requires `vertical` to be set to have any effect"):null})},L7t={block:!1,justified:!1,vertical:!1},FW=function(r){Pn(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i,o=this.props,l=o.block,c=o.justified,p=o.vertical,g=o.className,_=Rn(o,["block","justified","vertical","className"]),x=Gs(_),T=x[0],C=x[1],D=br({},ka(T),(i={},i[Ai(T)]=!p,i[Ai(T,"vertical")]=p,i[Ai(T,"justified")]=c,i[Ai(Sd.defaultProps,"block")]=l,i));return jW.default.createElement("div",br({},C,{className:(0,qNe.default)(g,D)}))},e}(jW.default.Component);FW.propTypes=O7t;FW.defaultProps=L7t;var FNe=Ci("btn-group",FW);var Tqe=ke(bi()),Iqe=ke(KW()),Mqe=ke(VS()),N2=ke(QW()),T0=ke(Et()),hs=ke(tn()),dZ=ke(No()),Aqe=ke(u2()),Cqe=ke(gf()),Pqe=ke(xke());var Ajr=ke(zW());var xqe=ke(uqe());var bqe=ke(bi()),ZS=ke(QW()),YS=ke(Et()),_f=ke(tn()),wqe=ke(No()),Eqe=ke(_qe());var UQt={open:_f.default.bool,pullRight:_f.default.bool,onClose:_f.default.func,labelledBy:_f.default.oneOfType([_f.default.string,_f.default.number]),onSelect:_f.default.func,rootCloseEvent:_f.default.oneOf(["click","mousedown"])},VQt={bsRole:"menu",pullRight:!1},cZ=function(r){Pn(e,r);function e(n){var i;return i=r.call(this,n)||this,i.handleRootClose=i.handleRootClose.bind(Tn(Tn(i))),i.handleKeyDown=i.handleKeyDown.bind(Tn(Tn(i))),i}var t=e.prototype;return t.getFocusableMenuItems=function(){var i=wqe.default.findDOMNode(this);return i?(0,xqe.default)(i.querySelectorAll("[tabIndex=\"-1\"]")):[]},t.getItemsAndActiveIndex=function(){var i=this.getFocusableMenuItems(),o=i.indexOf(document.activeElement);return{items:i,activeIndex:o}},t.focusNext=function(){var i=this.getItemsAndActiveIndex(),o=i.items,l=i.activeIndex;if(o.length!==0){var c=l===o.length-1?0:l+1;o[c].focus()}},t.focusPrevious=function(){var i=this.getItemsAndActiveIndex(),o=i.items,l=i.activeIndex;if(o.length!==0){var c=l===0?o.length-1:l-1;o[c].focus()}},t.handleKeyDown=function(i){switch(i.keyCode){case ZS.default.codes.down:this.focusNext(),i.preventDefault();break;case ZS.default.codes.up:this.focusPrevious(),i.preventDefault();break;case ZS.default.codes.esc:case ZS.default.codes.tab:this.props.onClose(i,{source:"keydown"});break;default:}},t.handleRootClose=function(i){this.props.onClose(i,{source:"rootClose"})},t.render=function(){var i,o=this,l=this.props,c=l.open,p=l.pullRight,g=l.labelledBy,_=l.onSelect,x=l.className,T=l.rootCloseEvent,C=l.children,D=Rn(l,["open","pullRight","labelledBy","onSelect","className","rootCloseEvent","children"]),F=WL(D,["onClose"]),O=F[0],k=F[1],q=br({},ka(O),(i={},i[Ai(O,"right")]=p,i));return YS.default.createElement(Eqe.default,{disabled:!c,onRootClose:this.handleRootClose,event:T},YS.default.createElement("ul",br({},k,{role:"menu",className:(0,bqe.default)(x,q),"aria-labelledby":g}),Bg.map(C,function(U){return YS.default.cloneElement(U,{onKeyDown:jo(U.props.onKeyDown,o.handleKeyDown),onSelect:jo(U.props.onSelect,_)})})))},e}(YS.default.Component);cZ.propTypes=UQt;cZ.defaultProps=VQt;var hZ=Ci("dropdown-menu",cZ);var D2=ke(Et()),KS=ke(tn()),Sqe=ke(bi());var GQt={noCaret:KS.default.bool,open:KS.default.bool,title:KS.default.string,useAnchor:KS.default.bool},$Qt={open:!1,useAnchor:!1,bsRole:"toggle"},fZ=function(r){Pn(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.noCaret,l=i.open,c=i.useAnchor,p=i.bsClass,g=i.className,_=i.children,x=Rn(i,["noCaret","open","useAnchor","bsClass","className","children"]);delete x.bsRole;var T=c?x0:Sd,C=!o;return D2.default.createElement(T,br({},x,{role:"button",className:(0,Sqe.default)(g,p),"aria-haspopup":!0,"aria-expanded":l}),_||x.title,C&&" ",C&&D2.default.createElement("span",{className:"caret"}))},e}(D2.default.Component);fZ.propTypes=GQt;fZ.defaultProps=$Qt;var pZ=Ci("dropdown-toggle",fZ);var Rqe=pZ.defaultProps.bsRole,mZ=hZ.defaultProps.bsRole,HQt={dropup:hs.default.bool,id:(0,Pqe.default)(hs.default.oneOfType([hs.default.string,hs.default.number])),componentClass:Cqe.default,children:(0,Aqe.default)(vNe(Rqe,mZ),yNe(mZ)),disabled:hs.default.bool,pullRight:hs.default.bool,open:hs.default.bool,defaultOpen:hs.default.bool,onToggle:hs.default.func,onSelect:hs.default.func,role:hs.default.string,rootCloseEvent:hs.default.oneOf(["click","mousedown"]),onMouseEnter:hs.default.func,onMouseLeave:hs.default.func},WQt={componentClass:FNe},k2=function(r){Pn(e,r);function e(n,i){var o;return o=r.call(this,n,i)||this,o.handleClick=o.handleClick.bind(Tn(Tn(o))),o.handleKeyDown=o.handleKeyDown.bind(Tn(Tn(o))),o.handleClose=o.handleClose.bind(Tn(Tn(o))),o._focusInDropdown=!1,o.lastOpenEventType=null,o}var t=e.prototype;return t.componentDidMount=function(){this.focusNextOnOpen()},t.UNSAFE_componentWillUpdate=function(i){!i.open&&this.props.open&&(this._focusInDropdown=(0,Mqe.default)(dZ.default.findDOMNode(this.menu),(0,Iqe.default)(document)))},t.componentDidUpdate=function(i){var o=this.props.open,l=i.open;o&&!l&&this.focusNextOnOpen(),!o&&l&&this._focusInDropdown&&(this._focusInDropdown=!1,this.focus())},t.focus=function(){var i=dZ.default.findDOMNode(this.toggle);i&&i.focus&&i.focus()},t.focusNextOnOpen=function(){var i=this.menu;!i||!i.focusNext||(this.lastOpenEventType==="keydown"||this.props.role==="menuitem")&&i.focusNext()},t.handleClick=function(i){this.props.disabled||this.toggleOpen(i,{source:"click"})},t.handleClose=function(i,o){this.props.open&&this.toggleOpen(i,o)},t.handleKeyDown=function(i){if(!this.props.disabled)switch(i.keyCode){case N2.default.codes.down:this.props.open?this.menu.focusNext&&this.menu.focusNext():this.toggleOpen(i,{source:"keydown"}),i.preventDefault();break;case N2.default.codes.esc:case N2.default.codes.tab:this.handleClose(i,{source:"keydown"});break;default:}},t.toggleOpen=function(i,o){var l=!this.props.open;l&&(this.lastOpenEventType=o.source),this.props.onToggle&&this.props.onToggle(l,i,o)},t.renderMenu=function(i,o){var l=this,c=o.id,p=o.onSelect,g=o.rootCloseEvent,_=Rn(o,["id","onSelect","rootCloseEvent"]),x=function(C){l.menu=C};return typeof i.ref=="string"||(x=jo(i.ref,x)),(0,T0.cloneElement)(i,br({},_,{ref:x,labelledBy:c,bsClass:Ai(_,"menu"),onClose:jo(i.props.onClose,this.handleClose),onSelect:jo(i.props.onSelect,p,function(T,C){return l.handleClose(C,{source:"select"})}),rootCloseEvent:g}))},t.renderToggle=function(i,o){var l=this,c=function(g){l.toggle=g};return typeof i.ref=="string"||(c=jo(i.ref,c)),(0,T0.cloneElement)(i,br({},o,{ref:c,bsClass:Ai(o,"toggle"),onClick:jo(i.props.onClick,this.handleClick),onKeyDown:jo(i.props.onKeyDown,this.handleKeyDown)}))},t.render=function(){var i,o=this,l=this.props,c=l.componentClass,p=l.id,g=l.dropup,_=l.disabled,x=l.pullRight,T=l.open,C=l.onSelect,D=l.role,F=l.bsClass,O=l.className,k=l.rootCloseEvent,q=l.children,U=Rn(l,["componentClass","id","dropup","disabled","pullRight","open","onSelect","role","bsClass","className","rootCloseEvent","children"]);delete U.onToggle;var H=(i={},i[F]=!0,i.open=T,i.disabled=_,i);return g&&(H[F]=!1,H.dropup=!0),T0.default.createElement(c,br({},U,{className:(0,Tqe.default)(O,H)}),Bg.map(q,function(se){switch(se.props.bsRole){case Rqe:return o.renderToggle(se,{id:p,disabled:_,open:T,role:D,bsClass:F});case mZ:return o.renderMenu(se,{id:p,open:T,pullRight:x,bsClass:F,onSelect:C,rootCloseEvent:k});default:return se}}))},e}(T0.default.Component);k2.propTypes=HQt;k2.defaultProps=WQt;Ci("dropdown",k2);var gZ=LS(k2,{open:"onToggle"});gZ.Toggle=pZ;gZ.Menu=hZ;var XS=gZ;var Oqe=ke(SW());function vZ(r,e){var t=e.propTypes,n={},i={};return(0,Oqe.default)(r).forEach(function(o){var l=o[0],c=o[1];t[l]?n[l]=c:i[l]=c}),[n,i]}var Lqe=ke(bi()),j2=ke(Et()),iu=ke(tn()),I0=ke(hke()),q2,ZQt={in:iu.default.bool,mountOnEnter:iu.default.bool,unmountOnExit:iu.default.bool,appear:iu.default.bool,timeout:iu.default.number,onEnter:iu.default.func,onEntering:iu.default.func,onEntered:iu.default.func,onExit:iu.default.func,onExiting:iu.default.func,onExited:iu.default.func},YQt={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},KQt=(q2={},q2[I0.ENTERING]="in",q2[I0.ENTERED]="in",q2),yZ=function(r){Pn(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.className,l=i.children,c=Rn(i,["className","children"]);return j2.default.createElement(I0.default,c,function(p,g){return j2.default.cloneElement(l,br({},g,{className:(0,Lqe.default)("fade",o,l.props.className,KQt[p])}))})},e}(j2.default.Component);yZ.propTypes=ZQt;yZ.defaultProps=YQt;var _Z=yZ;var F2=ke(bi()),M0=ke(Et()),xf=ke(tn()),Dqe=ke(u2());var XQt={active:xf.default.bool,disabled:xf.default.bool,divider:(0,Dqe.default)(xf.default.bool,function(r){var e=r.divider,t=r.children;return e&&t?new Error("Children will not be rendered for dividers"):null}),eventKey:xf.default.any,header:xf.default.bool,href:xf.default.string,onClick:xf.default.func,onSelect:xf.default.func},QQt={divider:!1,disabled:!1,header:!1},xZ=function(r){Pn(e,r);function e(n,i){var o;return o=r.call(this,n,i)||this,o.handleClick=o.handleClick.bind(Tn(Tn(o))),o}var t=e.prototype;return t.handleClick=function(i){var o=this.props,l=o.href,c=o.disabled,p=o.onSelect,g=o.eventKey;(!l||c)&&i.preventDefault(),!c&&p&&p(g,i)},t.render=function(){var i=this.props,o=i.active,l=i.disabled,c=i.divider,p=i.header,g=i.onClick,_=i.className,x=i.style,T=Rn(i,["active","disabled","divider","header","onClick","className","style"]),C=WL(T,["eventKey","onSelect"]),D=C[0],F=C[1];return c?(F.children=void 0,M0.default.createElement("li",br({},F,{role:"separator",className:(0,F2.default)(_,"divider"),style:x}))):p?M0.default.createElement("li",br({},F,{role:"heading",className:(0,F2.default)(_,Ai(D,"header")),style:x})):M0.default.createElement("li",{role:"presentation",className:(0,F2.default)(_,{active:o,disabled:l}),style:x},M0.default.createElement(x0,br({},F,{role:"menuitem",tabIndex:"-1",onClick:jo(g,this.handleClick)})))},e}(M0.default.Component);xZ.propTypes=XQt;xZ.defaultProps=QQt;var bZ=Ci("dropdown",xZ);var $Z=ke(bi()),HZ=ke(Wqe()),hFe=ke(BS()),fFe=ke(th()),WZ=ke(SZ()),P0=ke(Et()),ea=ke(tn()),pFe=ke(No()),R0=ke(Xje()),dFe=ke(AZ()),mFe=ke(gf());var Qje=ke(bi()),jZ=ke(Et()),Jje=ke(gf());var utr={componentClass:Jje.default},ctr={componentClass:"div"},FZ=function(r){Pn(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.componentClass,l=i.className,c=Rn(i,["componentClass","className"]),p=Gs(c),g=p[0],_=p[1],x=ka(g);return jZ.default.createElement(o,br({},_,{className:(0,Qje.default)(l,x)}))},e}(jZ.default.Component);FZ.propTypes=utr;FZ.defaultProps=ctr;var eFe=Ci("modal-body",FZ);var zZ=ke(bi()),eT=ke(Et()),tFe=ke(tn());var htr={dialogClassName:tFe.default.string},rFe=function(r){Pn(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i,o=this.props,l=o.dialogClassName,c=o.className,p=o.style,g=o.children,_=o.onMouseDownDialog,x=Rn(o,["dialogClassName","className","style","children","onMouseDownDialog"]),T=Gs(x),C=T[0],D=T[1],F=Ai(C),O=br({display:"block"},p),k=br({},ka(C),(i={},i[F]=!1,i[Ai(C,"dialog")]=!0,i));return eT.default.createElement("div",br({},D,{tabIndex:"-1",role:"dialog",style:O,className:(0,zZ.default)(c,F)}),eT.default.createElement("div",{className:(0,zZ.default)(l,k),onMouseDown:_},eT.default.createElement("div",{className:Ai(C,"content"),role:"document"},g)))},e}(eT.default.Component);rFe.propTypes=htr;var lD=Ci("modal",_0([eh.LARGE,eh.SMALL],rFe));var nFe=ke(bi()),BZ=ke(Et()),iFe=ke(gf());var ftr={componentClass:iFe.default},ptr={componentClass:"div"},UZ=function(r){Pn(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.componentClass,l=i.className,c=Rn(i,["componentClass","className"]),p=Gs(c),g=p[0],_=p[1],x=ka(g);return BZ.default.createElement(o,br({},_,{className:(0,nFe.default)(l,x)}))},e}(BZ.default.Component);UZ.propTypes=ftr;UZ.defaultProps=ptr;var oFe=Ci("modal-footer",UZ);var aFe=ke(bi()),C0=ke(tn()),uD=ke(Et());var dtr={closeLabel:C0.default.string,closeButton:C0.default.bool,onHide:C0.default.func},mtr={closeLabel:"Close",closeButton:!1},gtr={$bs_modal:C0.default.shape({onHide:C0.default.func})},cD=function(r){Pn(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.closeLabel,l=i.closeButton,c=i.onHide,p=i.className,g=i.children,_=Rn(i,["closeLabel","closeButton","onHide","className","children"]),x=this.context.$bs_modal,T=Gs(_),C=T[0],D=T[1],F=ka(C);return uD.default.createElement("div",br({},D,{className:(0,aFe.default)(p,F)}),l&&uD.default.createElement(TNe,{label:o,onClick:jo(x&&x.onHide,c)}),g)},e}(uD.default.Component);cD.propTypes=dtr;cD.defaultProps=mtr;cD.contextTypes=gtr;var sFe=Ci("modal-header",cD);var lFe=ke(bi()),VZ=ke(Et()),uFe=ke(gf());var vtr={componentClass:uFe.default},ytr={componentClass:"h4"},GZ=function(r){Pn(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.componentClass,l=i.className,c=Rn(i,["componentClass","className"]),p=Gs(c),g=p[0],_=p[1],x=ka(g);return VZ.default.createElement(o,br({},_,{className:(0,lFe.default)(l,x)}))},e}(VZ.default.Component);GZ.propTypes=vtr;GZ.defaultProps=ytr;var cFe=Ci("modal-title",GZ);var _tr=br({},R0.default.propTypes,lD.propTypes,{backdrop:ea.default.oneOf(["static",!0,!1]),backdropClassName:ea.default.string,keyboard:ea.default.bool,animation:ea.default.bool,dialogComponentClass:mFe.default,autoFocus:ea.default.bool,enforceFocus:ea.default.bool,restoreFocus:ea.default.bool,show:ea.default.bool,onHide:ea.default.func,onEnter:ea.default.func,onEntering:ea.default.func,onEntered:ea.default.func,onExit:ea.default.func,onExiting:ea.default.func,onExited:ea.default.func,container:R0.default.propTypes.container}),xtr=br({},R0.default.defaultProps,{animation:!0,dialogComponentClass:lD}),btr={$bs_modal:ea.default.shape({onHide:ea.default.func})};function wtr(r){return P0.default.createElement(_Z,br({},r,{timeout:_l.TRANSITION_DURATION}))}function Etr(r){return P0.default.createElement(_Z,br({},r,{timeout:_l.BACKDROP_TRANSITION_DURATION}))}var _l=function(r){Pn(e,r);function e(n,i){var o;return o=r.call(this,n,i)||this,o.handleDialogBackdropMouseDown=function(){o._waitingForMouseUp=!0},o.handleMouseUp=function(l){var c=o._modal.getDialogElement();o._waitingForMouseUp&&l.target===c&&(o._ignoreBackdropClick=!0),o._waitingForMouseUp=!1},o.handleEntering=o.handleEntering.bind(Tn(Tn(o))),o.handleExited=o.handleExited.bind(Tn(Tn(o))),o.handleWindowResize=o.handleWindowResize.bind(Tn(Tn(o))),o.handleDialogClick=o.handleDialogClick.bind(Tn(Tn(o))),o.setModalRef=o.setModalRef.bind(Tn(Tn(o))),o.state={style:{}},o}var t=e.prototype;return t.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},t.componentWillUnmount=function(){this.handleExited()},t.setModalRef=function(i){this._modal=i},t.handleDialogClick=function(i){if(this._ignoreBackdropClick||i.target!==i.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},t.handleEntering=function(){HZ.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},t.handleExited=function(){HZ.default.off(window,"resize",this.handleWindowResize)},t.handleWindowResize=function(){this.updateStyle()},t.updateStyle=function(){if(fFe.default){var i=this._modal.getDialogElement(),o=i.scrollHeight,l=(0,hFe.default)(i),c=(0,dFe.default)(pFe.default.findDOMNode(this.props.container||l.body)),p=o>l.documentElement.clientHeight;this.setState({style:{paddingRight:c&&!p?(0,WZ.default)():void 0,paddingLeft:!c&&p?(0,WZ.default)():void 0}})}},t.render=function(){var i=this.props,o=i.backdrop,l=i.backdropClassName,c=i.animation,p=i.show,g=i.dialogComponentClass,_=i.className,x=i.style,T=i.children,C=i.onEntering,D=i.onExited,F=Rn(i,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),O=vZ(F,R0.default),k=O[0],q=O[1],U=p&&!c&&"in";return P0.default.createElement(R0.default,br({},k,{ref:this.setModalRef,show:p,containerClassName:Ai(F,"open"),transition:c?wtr:void 0,backdrop:o,backdropTransition:c?Etr:void 0,backdropClassName:(0,$Z.default)(Ai(F,"backdrop"),l,U),onEntering:jo(C,this.handleEntering),onExited:jo(D,this.handleExited),onMouseUp:this.handleMouseUp}),P0.default.createElement(g,br({},q,{style:br({},this.state.style,x),className:(0,$Z.default)(_,U),onClick:o===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),T))},e}(P0.default.Component);_l.propTypes=_tr;_l.defaultProps=xtr;_l.childContextTypes=btr;_l.Body=eFe;_l.Header=sFe;_l.Title=cFe;_l.Footer=oFe;_l.Dialog=lD;_l.TRANSITION_DURATION=300;_l.BACKDROP_TRANSITION_DURATION=150;var Wg=Ci("modal",_0([eh.LARGE,eh.SMALL],_l));var ZZ={NONE:"control-none-gcp",ADD:"control-add-gcp",MOVE:"control-move-gcp",DEL:"control-del-gcp"},gFe=r=>{let{id:e,activeControl:t,className:n="",parentIconClassName:i,defaultTitle:o="unknown",disableActiveBehavior:l=!1,IconComponent:c,options:p=[{id:ZZ.ADD,title:Ir("georef-setgcp"),iconClassName:"icon-point-add"},{id:ZZ.MOVE,title:Ir("georef-movegcp"),iconClassName:"icon-point-move"},{id:ZZ.DEL,title:Ir("georef-delgcp"),iconClassName:"icon-point-remove"}],onClick:g}=r,_=p.find(T=>T.id===t),x=T=>{g(T)};return tc.default.createElement("div",{className:Vs("vkf-control-dropdown",_&&!l?"active":"",n)},tc.default.createElement(XS,{id:e,className:"btn-dropdown-vkf-control",bsStyle:"default",key:_?_.id:null},tc.default.createElement(XS.Toggle,null,c===void 0?tc.default.createElement(SS,{name:i,size:24}):tc.default.createElement(c,{glyph:i}),_?_.title:o),tc.default.createElement(XS.Menu,null,p.map(T=>tc.default.createElement(bZ,{key:T.id,eventKey:T.id,onClick:()=>x(T.id),className:Vs("control-option",T.id)},c===void 0?tc.default.createElement(SS,{name:`${T.iconClassName}`,size:24}):tc.default.createElement(c,{glyph:T.iconClassName}),tc.default.createElement("span",{className:"text"},T.title))))))};gFe.propTypes={activeControl:Hs.default.string,className:Hs.default.string,defaultTitle:Hs.default.string,disableActiveBehavior:Hs.default.bool,IconComponent:Hs.default.elementType,id:Hs.default.string,parentIconClassName:Hs.default.string,options:Hs.default.arrayOf(Hs.default.shape({id:Hs.default.string.isRequired,title:Hs.default.string.isRequired,iconClassName:Hs.default.string.isRequired})),onClick:Hs.default.func.isRequired};var vFe=gFe;var YZ=vFe;var ou=ke(Et(),1);var KZ=ke(tn(),1);var yFe=r=>{let{onClose:e,onSubmit:t}=r,n=()=>{e()},i=()=>{t()};return ou.default.createElement(ou.default.Fragment,null,ou.default.createElement(Wg,{className:"vkf-dialog-confirm",show:!0,onHide:n},ou.default.createElement(Wg.Header,null,ou.default.createElement(Wg.Title,null,Ir("georef-dialog-title"))),ou.default.createElement(Wg.Body,null,ou.default.createElement("div",{className:"dialog-content"},ou.default.createElement("p",null,Ir("georef-dialog-content")))),ou.default.createElement(Wg.Footer,null,ou.default.createElement(Sd,{onClick:n},Ir("georef-dialog-btn-cancel")),ou.default.createElement(Sd,{onClick:i,bsStyle:"primary"},Ir("georef-dialog-btn-submit")))))};yFe.propTypes={onClose:KZ.default.func.isRequired,onSubmit:KZ.default.func.isRequired};var _Fe=yFe;var xFe=_Fe;var D0=ke(Et(),1);var bFe={None:"NONE",BasemapSelector:"BASEMAP_SELECTOR",Permalink:"PERMALINK"};var wFe={NONE:0,FEATURE:1,METADATA:2,HISTORY:3},EFe={NONE:0,METADATA:1},SFe={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},TFe={STANDARD:"STANDARD",DRAW:"DRAW",VECTOR_MAP_EXTERNAL:"VECTOR_MAP_EXTERNAL"};var bo={id:"id",timeChanged:"time_changed",title:"title",thumbnailUrl:"thumb_url",bounds:"bounds",hasGeoReference:"has_georeference",tmsUrls:"tms_urls",onlineResources:"online_resources",mapScale:"map_scale",rawMapIds:"raw_map_ids",name:"name",description:"description",timePeriod:"time_period",externalContentUrl:"external_content_url",externalContentType:"external_content_type",type:"type",vectorMapId:"vector_map_id",version:"version",userRole:"user_role"};var tT={VKF:"vkf:geojson-spec-v1",IDOHIST:"idohist:idohist-v1"};var fD=ke(Et(),1);var rT=ke(Et(),1);var hD=ke(tn(),1);var IFe=(r,{sourceId:e,fillId:t,outlineId:n})=>{r.addSource(e,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),r.addLayer({id:t,type:"fill",source:e,paint:{"fill-color":"#ff0000","fill-opacity":.2}}),r.addLayer({id:n,type:"line",source:e,paint:{"line-color":"#ff0000","line-width":1}})},Str=(r,{sourceId:e,fillId:t,outlineId:n})=>{r.getLayer(t)&&r.removeLayer(t),r.getLayer(n)&&r.removeLayer(n),r.getSource(e)&&r.removeSource(e)},MFe=r=>{let e=Bs(XZ);return(0,rT.useEffect)(()=>{if(Zn(e)){let t=()=>{IFe(e,xt({},r))};return e._loaded?IFe(e,xt({},r)):e.once("load",t),()=>{Str(e,xt({},r)),e.off("load",t)}}},[e]),rT.default.createElement(rT.default.Fragment,null)};MFe.propTypes={sourceId:hD.default.string.isRequired,fillId:hD.default.string.isRequired,outlineId:hD.default.string.isRequired};var AFe=MFe;var CFe=AFe;var Ttr="vkf-map-overlay-source",nT="vkf-map-overlay-fill",Itr="vkf-map-overlay-outline";var Mtr=()=>fD.default.createElement(fD.default.Fragment,null,fD.default.createElement(CFe,{sourceId:Ttr,fillId:nT,outlineId:Itr}));Mtr.propTypes={};var pD=class extends Date{constructor(){super(),this.setTime(arguments.length===0?Date.now():arguments.length===1?typeof arguments[0]=="string"?+new Date(arguments[0]):arguments[0]:Date.UTC(...arguments))}getTimezoneOffset(){return 0}},RFe=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(r=>{if(RFe.test(r)){let e=Date.prototype[r.replace(RFe,"$1UTC")];e&&(pD.prototype[r]=e)}});var Wzr=new Intl.DateTimeFormat("en-US",{weekday:"short",timeZone:"UTC"}),Zzr=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",timeZone:"UTC"}),Yzr=new Intl.DateTimeFormat("en-GB",{hour12:!1,hour:"numeric",minute:"numeric",second:"numeric",timeZone:"UTC"});var Tr={SYMBOL:"symbol",LINE:"line",FILL:"fill",OUTLINE:"outline"},OFe={[Tr.LINE]:"line-opacity",[Tr.FILL]:"fill-opacity",[Tr.OUTLINE]:"outline-opacity"},Ptr={[Tr.LINE]:"stroke-opacity",[Tr.FILL]:"fill-opacity",[Tr.OUTLINE]:"stroke-opacity"};var mn={[Tr.SYMBOL]:{COLOR:"#0000FF"},[Tr.LINE]:{COLOR:"#00FF00",WIDTH:3,OPACITY:1},[Tr.OUTLINE]:{COLOR:"#0000FF",WIDTH:1,OPACITY:1},[Tr.FILL]:{COLOR:"#FFFF00",OPACITY:.27}},Rtr={[Tr.SYMBOL]:{type:"symbol",layout:{"icon-image":qi.getSettings().MARKER_IMAGE_ID,"icon-size":.5,"icon-anchor":"bottom","icon-allow-overlap":!0},paint:{"icon-color":["to-color",["feature-state","marker"],["get","marker"],mn[Tr.SYMBOL].COLOR],"icon-halo-color":"#FFF","icon-halo-width":1},filter:["==",["geometry-type"],"Point"]},[Tr.LINE]:{type:"line",paint:{"line-color":["coalesce",["feature-state","stroke"],["get","stroke"],mn[Tr.LINE].COLOR],"line-width":["coalesce",["feature-state","stroke-width"],["get","stroke-width"],mn[Tr.LINE].WIDTH],"line-opacity":["coalesce",["feature-state","stroke-opacity"],["get","stroke-opacity"],mn[Tr.LINE].OPACITY]},filter:["==",["geometry-type"],"LineString"]},[Tr.OUTLINE]:{type:"line",paint:{"line-color":["coalesce",["feature-state","stroke"],["get","stroke"],mn[Tr.OUTLINE].COLOR],"line-width":["coalesce",["feature-state","stroke-width"],["get","stroke-width"],mn[Tr.OUTLINE].WIDTH],"line-opacity":["coalesce",["feature-state","stroke-opacity"],["get","stroke-opacity"],mn[Tr.OUTLINE].OPACITY]},filter:["==",["geometry-type"],"Polygon"]},[Tr.FILL]:{type:"fill",paint:{"fill-color":["coalesce",["feature-state","fill"],["get","fill"],mn[Tr.FILL].COLOR],"fill-opacity":["coalesce",["feature-state","fill-opacity"],["get","fill-opacity"],mn[Tr.FILL].OPACITY]},filter:["==",["geometry-type"],"Polygon"]}};var O0={imgLink:"img_link",title:"title",description:"description",time:"time",marker:"marker",fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity"};var d4r={Point:{marker:mn[Tr.SYMBOL].COLOR},MultiPoint:{marker:mn[Tr.SYMBOL].COLOR},Polygon:{fill:mn[Tr.FILL].COLOR,"fill-opacity":mn[Tr.FILL].OPACITY,stroke:mn[Tr.OUTLINE].COLOR,"stroke-opacity":mn[Tr.OUTLINE].OPACITY,"stroke-width":mn[Tr.OUTLINE].WIDTH},MultiPolygon:{fill:mn[Tr.FILL].COLOR,"fill-opacity":mn[Tr.FILL].OPACITY,stroke:mn[Tr.OUTLINE].COLOR,"stroke-opacity":mn[Tr.OUTLINE].OPACITY,"stroke-width":mn[Tr.OUTLINE].WIDTH},LineString:{stroke:mn[Tr.LINE].COLOR,"stroke-opacity":mn[Tr.LINE].OPACITY,"stroke-width":mn[Tr.LINE].WIDTH},MultiLineString:{stroke:mn[Tr.LINE].COLOR,"stroke-opacity":mn[Tr.LINE].OPACITY,"stroke-width":mn[Tr.LINE].WIDTH},GeometryCollection:{fill:mn[Tr.FILL].COLOR,"fill-opacity":mn[Tr.FILL].OPACITY,stroke:mn[Tr.LINE].COLOR,"stroke-opacity":mn[Tr.LINE].OPACITY,"stroke-width":mn[Tr.LINE].WIDTH}},Otr={marker:{type:"color"},fill:{type:"color"},"fill-opacity":{step:.05,min:0,max:1,type:"number"},stroke:{type:"color"},"stroke-opacity":{max:1,min:0,step:.05,type:"number"},"stroke-width":{step:.1,min:0,max:20,type:"number"}},m4r=Object.keys(Otr),g4r=[O0.time,O0.title,O0.imgLink,O0.description];var ztr=ke(oH(),1);var LFe="#00b19e",rY="#00927E",L0={fill:.4,line:1},nY=["all",["==",["geometry-type"],"Polygon"],["==",["id"],"NON_EXISTING_ID"]],DFe={fill:{type:"fill",paint:{"fill-color":LFe,"fill-opacity":L0.fill},filter:nY},outline:{type:"line",paint:{"line-color":rY,"line-width":2,"line-opacity":L0.line},filter:nY}},jtr={line:{type:"line",paint:{"line-color":rY,"line-width":2,"line-opacity":L0.line},filter:["==",["geometry-type"],"LineString"]},fill:{type:"fill",paint:{"fill-color":LFe,"fill-opacity":L0.fill},filter:["==",["geometry-type"],"Polygon"]},outline:{type:"line",paint:{"line-color":rY,"line-width":2,"line-opacity":L0.line},filter:["==",["geometry-type"],"Polygon"]}};var iT={},iY="http://www.w3.org/2000/svg";typeof document!="undefined"&&(iT.svg=document.createElementNS(iY,"svg"),iT.arcs=document.createElementNS(iY,"g"),iT.arcs.classList.add("arcs"),iT.circle=document.createElementNS(iY,"circle"),iT.circle.classList.add("circle"));var Btr=Symbol("vkf:feature-properties");var nBr=typeof document!="undefined"?document.createElement("div"):{};var Utr=`${bo.timePeriod}_start`,Vtr=`${bo.timePeriod}_end`;var fUr=[{label:"VKF",value:tT.VKF},{label:"IDOHIST",value:tT.IDOHIST}],kFe=r=>({[bo.title]:r[bo.title],[bo.timePeriod]:r[bo.timePeriod],[bo.description]:r[bo.description],[bo.externalContentUrl]:r[bo.externalContentUrl],[bo.externalContentType]:r[bo.externalContentType],[bo.thumbnailUrl]:r[bo.thumbnailUrl]});var xUr=Vr({key:"activeBasemapId",default:qi.getSettings().BASEMAPS[0].id}),bUr=Vr({key:"currentApplicationState",default:void 0}),Gtr=Vr({key:"elementScreenSize",default:{map:{height:0,width:0}}});var wUr=Vr({key:"facetState",default:{facets:[],georeference:!1}}),EUr=Vr({key:"layoutState",default:SFe.VERTICAL}),SUr=Vr({key:"horizontalLayoutModeState",default:TFe.STANDARD}),XZ=Vr({key:"mapState",default:void 0,dangerouslyAllowMutability:!0}),TUr=Vr({key:"map3dState",default:!1}),IUr=Vr({key:"mapCountState",default:10}),MUr=Vr({key:"searchIsLoadingState",default:!1}),$tr=Vr({key:"selectedLayersState",default:[],dangerouslyAllowMutability:!0}),AUr=Vr({key:"selectedOriginalMapIdState",default:void 0}),Htr=Vr({key:"selectedGeoJsonLayerIdState",default:void 0}),Wtr=Vr({key:"selectedGeoJsonLayerLastUpdatedState",default:0}),CUr=zg({key:"selectedGeoJsonLayerState",get:({get:r})=>{let e=r(Htr),t=r($tr),n=r(Wtr);return{selectedLayer:t.find(o=>o.getId()===e),lastUpdated:n}},dangerouslyAllowMutability:!0}),NFe=Vr({key:"selectedGeoJsonFeatureIdentifierState",default:null}),PUr=zg({key:"isGeoJsonFeatureSelectedState",get:({get:r})=>{let e=r(NFe);if(!Zn(e))return!1;let{featureId:t,sourceId:n}=e;return Zn(t)&&Zn(n)}}),RUr=Vr({key:"timeExtentState",default:[1850,1970]}),Ztr=[1850,1970],OUr=Vr({key:"timeRangeState",default:Ztr}),LUr=Vr({key:"baseMapStyleLayersState",default:[]}),DUr=Vr({key:"activeDialogState",default:bFe.None}),NUr=Vr({key:"drawState",default:void 0}),kUr=Vr({key:"editedGeojsonState",default:null}),qUr=Vr({key:"metadataDrawState",default:null}),jUr=Vr({key:"vectorMapState",default:null}),Ytr=Vr({key:"vectorMapActiveVersionDrawState",default:null}),FUr=zg({key:"isActiveVectorMapVersionDifferentState",get:({get:r})=>r(Ytr)!==null}),zUr=Vr({key:"showDropZoneState",default:!1}),BUr=Vr({key:"addedFileState",default:null}),UUr=Vr({key:"addGeoJsonDialogState",default:!1}),VUr=Vr({key:"drawModePanelState",default:wFe.NONE}),GUr=Vr({key:"vectorMapExternalModePanelState",default:EFe.NONE}),oY=Vr({key:"layerExternalVectorMapState",default:null,dangerouslyAllowMutability:!0}),qFe=Vr({key:"forceUpdateLayerExternalVectorMapState",default:0}),$Ur=zg({key:"metadataExternalVectorMapState",get:({get:r})=>{r(qFe);let e=r(oY);return Zn(e)?kFe(e.getMetadata()):null},dangerouslyAllowMutability:!0}),HUr=zg({key:"geojsonExternalVectorMapState",get:({get:r})=>{r(qFe);let e=r(oY);return Zn(e)?e.getGeoJson():null},dangerouslyAllowMutability:!0}),WUr=zg({key:"layerIdExternalVectorMapState",get:({get:r})=>{let e=r(oY);return Zn(e)?e.getId():null},dangerouslyAllowMutability:!0});function dD(r){let[e,t]=(0,D0.useState)(r);return(0,D0.useEffect)(()=>{t(r)},[r]),e}function rr(){return function(){throw new Error("Unimplemented abstract method.")}()}var Ktr=0;function Jt(r){return r.ol_uid||(r.ol_uid=String(++Ktr))}var mD="6.15.1";var Xtr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qtr=function(r){Xtr(e,r);function e(t){var n=this,i=mD==="latest"?mD:"v"+mD.split("-")[0],o="Assertion failed. See https://openlayers.org/en/"+i+"/doc/errors/#"+t+" for details.";return n=r.call(this,o)||this,n.code=t,n.name="AssertionError",n.message=o,n}return e}(Error),gD=Qtr;var Jtr=function(){function r(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}return r.prototype.preventDefault=function(){this.defaultPrevented=!0},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r}();var Pi=Jtr;var rc={PROPERTYCHANGE:"propertychange"};var err=function(){function r(){this.disposed=!1}return r.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},r.prototype.disposeInternal=function(){},r}(),Cd=err;function jFe(r,e,t){for(var n,i,o=t||xl,l=0,c=r.length,p=!1;l<c;)n=l+(c-l>>1),i=+o(r[n],e),i<0?l=n+1:(c=n,p=!i);return p?l:~l}function xl(r,e){return r>e?1:r<e?-1:0}function N0(r,e){return r.indexOf(e)>=0}function k0(r,e,t){var n=r.length;if(r[0]<=e)return 0;if(e<=r[n-1])return n-1;var i=void 0;if(t>0){for(i=1;i<n;++i)if(r[i]<e)return i-1}else if(t<0){for(i=1;i<n;++i)if(r[i]<=e)return i}else for(i=1;i<n;++i){if(r[i]==e)return i;if(r[i]<e)return typeof t=="function"?t(e,r[i-1],r[i])>0?i-1:i:r[i-1]-e<e-r[i]?i-1:i}return n-1}function FFe(r,e,t){for(;e<t;){var n=r[e];r[e]=r[t],r[t]=n,++e,--t}}function ta(r,e){for(var t=Array.isArray(e)?e:[e],n=t.length,i=0;i<n;i++)r[r.length]=t[i]}function ja(r,e){var t=r.length;if(t!==e.length)return!1;for(var n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function zFe(r,e,t){var n=e||xl;return r.every(function(i,o){if(o===0)return!0;var l=n(r[o-1],i);return!(l>0||t&&l===0)})}function fs(){return!0}function au(){return!1}function bl(){}function BFe(r){var e=!1,t,n,i;return function(){var o=Array.prototype.slice.call(arguments);return(!e||this!==i||!ja(o,n))&&(e=!0,i=this,n=o,t=r.apply(this,arguments)),t}}var Gr=typeof Object.assign=="function"?Object.assign:function(r,e){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),n=1,i=arguments.length;n<i;++n){var o=arguments[n];if(o!=null)for(var l in o)o.hasOwnProperty(l)&&(t[l]=o[l])}return t};function Ws(r){for(var e in r)delete r[e]}var vD=typeof Object.values=="function"?Object.values:function(r){var e=[];for(var t in r)e.push(r[t]);return e};function nc(r){var e;for(e in r)return!1;return!e}var trr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rrr=function(r){trr(e,r);function e(t){var n=r.call(this)||this;return n.eventTarget_=t,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return e.prototype.addEventListener=function(t,n){if(!(!t||!n)){var i=this.listeners_||(this.listeners_={}),o=i[t]||(i[t]=[]);o.indexOf(n)===-1&&o.push(n)}},e.prototype.dispatchEvent=function(t){var n=typeof t=="string",i=n?t:t.type,o=this.listeners_&&this.listeners_[i];if(o){var l=n?new Pi(t):t;l.target||(l.target=this.eventTarget_||this);var c=this.dispatching_||(this.dispatching_={}),p=this.pendingRemovals_||(this.pendingRemovals_={});i in c||(c[i]=0,p[i]=0),++c[i];for(var g,_=0,x=o.length;_<x;++_)if("handleEvent"in o[_]?g=o[_].handleEvent(l):g=o[_].call(this,l),g===!1||l.propagationStopped){g=!1;break}if(--c[i]===0){var T=p[i];for(delete p[i];T--;)this.removeEventListener(i,bl);delete c[i]}return g}},e.prototype.disposeInternal=function(){this.listeners_&&Ws(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1},e.prototype.removeEventListener=function(t,n){var i=this.listeners_&&this.listeners_[t];if(i){var o=i.indexOf(n);o!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[o]=bl,++this.pendingRemovals_[t]):(i.splice(o,1),i.length===0&&delete this.listeners_[t]))}},e}(Cd),Zs=rrr;var qt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Mr(r,e,t,n,i){if(n&&n!==r&&(t=t.bind(n)),i){var o=t;t=function(){r.removeEventListener(e,t),o.apply(this,arguments)}}var l={target:r,type:e,listener:t};return r.addEventListener(e,t),l}function q0(r,e,t,n){return Mr(r,e,t,n,!0)}function Qr(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),Ws(r))}var nrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yD=function(r){nrr(e,r);function e(){var t=r.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return e.prototype.changed=function(){++this.revision_,this.dispatchEvent(qt.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,n){if(Array.isArray(t)){for(var i=t.length,o=new Array(i),l=0;l<i;++l)o[l]=Mr(this,t[l],n);return o}else return Mr(this,t,n)},e.prototype.onceInternal=function(t,n){var i;if(Array.isArray(t)){var o=t.length;i=new Array(o);for(var l=0;l<o;++l)i[l]=q0(this,t[l],n)}else i=q0(this,t,n);return n.ol_key=i,i},e.prototype.unInternal=function(t,n){var i=n.ol_key;if(i)irr(i);else if(Array.isArray(t))for(var o=0,l=t.length;o<l;++o)this.removeEventListener(t[o],n);else this.removeEventListener(t,n)},e}(Zs);yD.prototype.on;yD.prototype.once;yD.prototype.un;function irr(r){if(Array.isArray(r))for(var e=0,t=r.length;e<t;++e)Qr(r[e]);else Qr(r)}var _D=yD;var VFe=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),UFe=function(r){VFe(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.key=n,o.oldValue=i,o}return e}(Pi);var orr=function(r){VFe(e,r);function e(t){var n=r.call(this)||this;return n.on,n.once,n.un,Jt(n),n.values_=null,t!==void 0&&n.setProperties(t),n}return e.prototype.get=function(t){var n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&Gr({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,n){var i;i="change:".concat(t),this.hasListener(i)&&this.dispatchEvent(new UFe(i,t,n)),i=rc.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new UFe(i,t,n))},e.prototype.addChangeListener=function(t,n){this.addEventListener("change:".concat(t),n)},e.prototype.removeChangeListener=function(t,n){this.removeEventListener("change:".concat(t),n)},e.prototype.set=function(t,n,i){var o=this.values_||(this.values_={});if(i)o[t]=n;else{var l=o[t];o[t]=n,l!==n&&this.notify(t,l)}},e.prototype.setProperties=function(t,n){for(var i in t)this.set(i,t[i],n)},e.prototype.applyProperties=function(t){t.values_&&Gr(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,n){if(this.values_&&t in this.values_){var i=this.values_[t];delete this.values_[t],nc(this.values_)&&(this.values_=null),n||this.notify(t,i)}},e}(_D),wo=orr;var fi={ADD:"add",REMOVE:"remove"};var $Fe=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),GFe={LENGTH:"length"},xD=function(r){$Fe(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.element=n,o.index=i,o}return e}(Pi);var arr=function(r){$Fe(e,r);function e(t,n){var i=r.call(this)||this;i.on,i.once,i.un;var o=n||{};if(i.unique_=!!o.unique,i.array_=t||[],i.unique_)for(var l=0,c=i.array_.length;l<c;++l)i.assertUnique_(i.array_[l],l);return i.updateLength_(),i}return e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var n=0,i=t.length;n<i;++n)this.push(t[n]);return this},e.prototype.forEach=function(t){for(var n=this.array_,i=0,o=n.length;i<o;++i)t(n[i],i,n)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(GFe.LENGTH)},e.prototype.insertAt=function(t,n){this.unique_&&this.assertUnique_(n),this.array_.splice(t,0,n),this.updateLength_(),this.dispatchEvent(new xD(fi.ADD,n,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var n=this.getLength();return this.insertAt(n,t),this.getLength()},e.prototype.remove=function(t){for(var n=this.array_,i=0,o=n.length;i<o;++i)if(n[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var n=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new xD(fi.REMOVE,n,t)),n},e.prototype.setAt=function(t,n){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(n,t);var o=this.array_[t];this.array_[t]=n,this.dispatchEvent(new xD(fi.REMOVE,o,t)),this.dispatchEvent(new xD(fi.ADD,n,t))}else{for(var l=i;l<t;++l)this.insertAt(l,void 0);this.insertAt(t,n)}},e.prototype.updateLength_=function(){this.set(GFe.LENGTH,this.array_.length)},e.prototype.assertUnique_=function(t,n){for(var i=0,o=this.array_.length;i<o;++i)if(this.array_[i]===t&&i!==n)throw new gD(58)},e}(wo),Kn=arr;function ir(r,e){if(!r)throw new gD(e)}var srr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lrr=function(r){srr(e,r);function e(t){var n=r.call(this)||this;if(n.on,n.once,n.un,n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addChangeListener(n.geometryName_,n.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){var i=t;n.setGeometry(i)}else{var o=t;n.setProperties(o)}return n}return e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var i=this.getStyle();return i&&t.setStyle(i),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Qr(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Mr(t,qt.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?urr(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(wo);function urr(r){if(typeof r=="function")return r;var e;if(Array.isArray(r))e=r;else{ir(typeof r.getZIndex=="function",41);var t=r;e=[t]}return function(){return e}}var wl=lrr;var ic={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},B3r={9001:ic.METERS,9002:ic.FEET,9003:ic.USFEET,9101:ic.RADIANS,9102:ic.DEGREES};var Fa={};Fa[ic.RADIANS]=6370997/(2*Math.PI);Fa[ic.DEGREES]=2*Math.PI*6370997/360;Fa[ic.FEET]=.3048;Fa[ic.METERS]=1;Fa[ic.USFEET]=1200/3937;var za=ic;var Pd=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",HFe=Pd.indexOf("firefox")!==-1,crr=Pd.indexOf("safari")!==-1&&Pd.indexOf("chrom")==-1,WFe=crr&&!!(Pd.indexOf("version/15.4")>=0||Pd.match(/cpu (os|iphone os) 15_4 like mac os x/)),ZFe=Pd.indexOf("webkit")!==-1&&Pd.indexOf("edge")==-1,YFe=Pd.indexOf("macintosh")!==-1,bD=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,Rd=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,KFe=typeof Image!="undefined"&&Image.prototype.decode,wD=function(){var r=!1;try{var e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return r}();var aY=new Array(6);function Fi(){return[1,0,0,1,0,0]}function j0(r){return oT(r,1,0,0,1,0,0)}function sY(r,e){var t=r[0],n=r[1],i=r[2],o=r[3],l=r[4],c=r[5],p=e[0],g=e[1],_=e[2],x=e[3],T=e[4],C=e[5];return r[0]=t*p+i*g,r[1]=n*p+o*g,r[2]=t*_+i*x,r[3]=n*_+o*x,r[4]=t*T+i*C+l,r[5]=n*T+o*C+c,r}function oT(r,e,t,n,i,o,l){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=o,r[5]=l,r}function QFe(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function On(r,e){var t=e[0],n=e[1];return e[0]=r[0]*t+r[2]*n+r[4],e[1]=r[1]*t+r[3]*n+r[5],e}function ED(r,e){var t=Math.cos(e),n=Math.sin(e);return sY(r,oT(aY,t,n,-n,t,0,0))}function aT(r,e,t){return sY(r,oT(aY,e,0,0,t,0,0))}function JFe(r,e,t){return oT(r,e,0,0,t,0,0)}function eze(r,e,t){return sY(r,oT(aY,1,0,0,1,e,t))}function Eo(r,e,t,n,i,o,l,c){var p=Math.sin(o),g=Math.cos(o);return r[0]=n*g,r[1]=i*p,r[2]=-n*p,r[3]=i*g,r[4]=l*n*g-c*n*p+e,r[5]=l*i*p+c*i*g+t,r}function F0(r,e){var t=hrr(e);ir(t!==0,32);var n=e[0],i=e[1],o=e[2],l=e[3],c=e[4],p=e[5];return r[0]=l/t,r[1]=-i/t,r[2]=-o/t,r[3]=n/t,r[4]=(o*p-l*c)/t,r[5]=-(n*p-i*c)/t,r}function hrr(r){return r[0]*r[3]-r[1]*r[2]}var XFe;function SD(r){var e="matrix("+r.join(", ")+")";if(Rd)return e;var t=XFe||(XFe=document.createElement("div"));return t.style.transform=e,t.style.transform}var So={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Ea(r){for(var e=zi(),t=0,n=r.length;t<n;++t)Zg(e,r[t]);return e}function frr(r,e,t){var n=Math.min.apply(null,r),i=Math.min.apply(null,e),o=Math.max.apply(null,r),l=Math.max.apply(null,e);return Ba(n,i,o,l,t)}function oc(r,e,t){return t?(t[0]=r[0]-e,t[1]=r[1]-e,t[2]=r[2]+e,t[3]=r[3]+e,t):[r[0]-e,r[1]-e,r[2]+e,r[3]+e]}function ID(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r.slice()}function Ys(r,e,t){var n,i;return e<r[0]?n=r[0]-e:r[2]<e?n=e-r[2]:n=0,t<r[1]?i=r[1]-t:r[3]<t?i=t-r[3]:i=0,n*n+i*i}function ps(r,e){return sT(r,e[0],e[1])}function bf(r,e){return r[0]<=e[0]&&e[2]<=r[2]&&r[1]<=e[1]&&e[3]<=r[3]}function sT(r,e,t){return r[0]<=e&&e<=r[2]&&r[1]<=t&&t<=r[3]}function TD(r,e){var t=r[0],n=r[1],i=r[2],o=r[3],l=e[0],c=e[1],p=So.UNKNOWN;return l<t?p=p|So.LEFT:l>i&&(p=p|So.RIGHT),c<n?p=p|So.BELOW:c>o&&(p=p|So.ABOVE),p===So.UNKNOWN&&(p=So.INTERSECTING),p}function zi(){return[1/0,1/0,-1/0,-1/0]}function Ba(r,e,t,n,i){return i?(i[0]=r,i[1]=e,i[2]=t,i[3]=n,i):[r,e,t,n]}function Od(r){return Ba(1/0,1/0,-1/0,-1/0,r)}function z0(r,e){var t=r[0],n=r[1];return Ba(t,n,t,n,e)}function MD(r,e,t,n,i){var o=Od(i);return lY(o,r,e,t,n)}function wf(r,e){return r[0]==e[0]&&r[2]==e[2]&&r[1]==e[1]&&r[3]==e[3]}function AD(r,e){return e[0]<r[0]&&(r[0]=e[0]),e[2]>r[2]&&(r[2]=e[2]),e[1]<r[1]&&(r[1]=e[1]),e[3]>r[3]&&(r[3]=e[3]),r}function Zg(r,e){e[0]<r[0]&&(r[0]=e[0]),e[0]>r[2]&&(r[2]=e[0]),e[1]<r[1]&&(r[1]=e[1]),e[1]>r[3]&&(r[3]=e[1])}function lY(r,e,t,n,i){for(;t<n;t+=i)prr(r,e[t],e[t+1]);return r}function prr(r,e,t){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}function B0(r,e){var t;return t=e(U0(r)),t||(t=e(V0(r)),t)||(t=e(G0(r)),t)||(t=e(lu(r)),t)?t:!1}function lT(r){var e=0;return Yg(r)||(e=fn(r)*Fo(r)),e}function U0(r){return[r[0],r[1]]}function V0(r){return[r[2],r[1]]}function Ks(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function tze(r,e){var t;return e==="bottom-left"?t=U0(r):e==="bottom-right"?t=V0(r):e==="top-left"?t=lu(r):e==="top-right"?t=G0(r):ir(!1,13),t}function uT(r,e,t,n,i){var o=CD(r,e,t,n),l=o[0],c=o[1],p=o[2],g=o[3],_=o[4],x=o[5],T=o[6],C=o[7];return Ba(Math.min(l,p,_,T),Math.min(c,g,x,C),Math.max(l,p,_,T),Math.max(c,g,x,C),i)}function CD(r,e,t,n){var i=e*n[0]/2,o=e*n[1]/2,l=Math.cos(t),c=Math.sin(t),p=i*l,g=i*c,_=o*l,x=o*c,T=r[0],C=r[1];return[T-p+x,C-g-_,T-p-x,C-g+_,T+p-x,C+g+_,T+p+x,C+g-_,T-p+x,C-g-_]}function Fo(r){return r[3]-r[1]}function su(r,e,t){var n=t||zi();return Ri(r,e)?(r[0]>e[0]?n[0]=r[0]:n[0]=e[0],r[1]>e[1]?n[1]=r[1]:n[1]=e[1],r[2]<e[2]?n[2]=r[2]:n[2]=e[2],r[3]<e[3]?n[3]=r[3]:n[3]=e[3]):Od(n),n}function lu(r){return[r[0],r[3]]}function G0(r){return[r[2],r[3]]}function fn(r){return r[2]-r[0]}function Ri(r,e){return r[0]<=e[2]&&r[2]>=e[0]&&r[1]<=e[3]&&r[3]>=e[1]}function Yg(r){return r[2]<r[0]||r[3]<r[1]}function rze(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r}function nze(r,e,t){var n=!1,i=TD(r,e),o=TD(r,t);if(i===So.INTERSECTING||o===So.INTERSECTING)n=!0;else{var l=r[0],c=r[1],p=r[2],g=r[3],_=e[0],x=e[1],T=t[0],C=t[1],D=(C-x)/(T-_),F=void 0,O=void 0;o&So.ABOVE&&!(i&So.ABOVE)&&(F=T-(C-g)/D,n=F>=l&&F<=p),!n&&o&So.RIGHT&&!(i&So.RIGHT)&&(O=C-(T-p)*D,n=O>=c&&O<=g),!n&&o&So.BELOW&&!(i&So.BELOW)&&(F=T-(C-c)/D,n=F>=l&&F<=p),!n&&o&So.LEFT&&!(i&So.LEFT)&&(O=C-(T-l)*D,n=O>=c&&O<=g)}return n}function ize(r,e,t,n){var i=[];if(n>1)for(var o=r[2]-r[0],l=r[3]-r[1],c=0;c<n;++c)i.push(r[0]+o*c/n,r[1],r[2],r[1]+l*c/n,r[2]-o*c/n,r[3],r[0],r[3]-l*c/n);else i=[r[0],r[1],r[2],r[1],r[2],r[3],r[0],r[3]];e(i,i,2);for(var p=[],g=[],c=0,_=i.length;c<_;c+=2)p.push(i[c]),g.push(i[c+1]);return frr(p,g,t)}function uY(r,e){var t=e.getExtent(),n=Ks(r);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){var i=fn(t),o=Math.floor((n[0]-t[0])/i),l=o*i;r[0]-=l,r[2]-=l}return r}function oze(r,e){if(e.canWrapX()){var t=e.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[t[0],r[1],t[2],r[3]]];uY(r,e);var n=fn(t);if(fn(r)>n)return[[t[0],r[1],t[2],r[3]]];if(r[0]<t[0])return[[r[0]+n,r[1],t[2],r[3]],[t[0],r[1],r[2],r[3]]];if(r[2]>t[2])return[[r[0],r[1],t[2],r[3]],[t[0],r[1],r[2]-n,r[3]]]}return[r]}var drr=function(){function r(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}return r.prototype.canWrapX=function(){return this.canWrapX_},r.prototype.getCode=function(){return this.code_},r.prototype.getExtent=function(){return this.extent_},r.prototype.getUnits=function(){return this.units_},r.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Fa[this.units_]},r.prototype.getWorldExtent=function(){return this.worldExtent_},r.prototype.getAxisOrientation=function(){return this.axisOrientation_},r.prototype.isGlobal=function(){return this.global_},r.prototype.setGlobal=function(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)},r.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},r.prototype.setDefaultTileGrid=function(e){this.defaultTileGrid_=e},r.prototype.setExtent=function(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)},r.prototype.setWorldExtent=function(e){this.worldExtent_=e},r.prototype.setGetPointResolution=function(e){this.getPointResolutionFunc_=e},r.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},r}(),PD=drr;function jn(r,e,t){return Math.min(Math.max(r,e),t)}var aze=function(){var r;return"cosh"in Math?r=Math.cosh:r=function(e){var t=Math.exp(e);return(t+1/t)/2},r}(),RD=function(){var r;return"log2"in Math?r=Math.log2:r=function(e){return Math.log(e)*Math.LOG2E},r}();function sze(r,e,t,n,i,o){var l=i-t,c=o-n;if(l!==0||c!==0){var p=((r-t)*l+(e-n)*c)/(l*l+c*c);p>1?(t=i,n=o):p>0&&(t+=l*p,n+=c*p)}return ac(r,e,t,n)}function ac(r,e,t,n){var i=t-r,o=n-e;return i*i+o*o}function lze(r){for(var e=r.length,t=0;t<e;t++){for(var n=t,i=Math.abs(r[t][t]),o=t+1;o<e;o++){var l=Math.abs(r[o][t]);l>i&&(i=l,n=o)}if(i===0)return null;var c=r[n];r[n]=r[t],r[t]=c;for(var p=t+1;p<e;p++)for(var g=-r[p][t]/r[t][t],_=t;_<e+1;_++)t==_?r[p][_]=0:r[p][_]+=g*r[t][_]}for(var x=new Array(e),T=e-1;T>=0;T--){x[T]=r[T][e]/r[T][T];for(var C=T-1;C>=0;C--)r[C][e]-=r[C][T]*x[T]}return x}function $0(r){return r*Math.PI/180}function El(r,e){var t=r%e;return t*e<0?t+e:t}function uu(r,e,t){return r+t*(e-r)}function uze(r,e){var t=Math.pow(10,e);return Math.round(r*t)/t}function cT(r,e){return Math.floor(uze(r,e))}function hT(r,e){return Math.ceil(uze(r,e))}var mrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fT=6378137,W0=Math.PI*fT,grr=[-W0,-W0,W0,W0],vrr=[-180,-85,180,85],OD=fT*Math.log(Math.tan(Math.PI/2)),H0=function(r){mrr(e,r);function e(t){return r.call(this,{code:t,units:za.METERS,extent:grr,global:!0,worldExtent:vrr,getPointResolution:function(n,i){return n/aze(i[1]/fT)}})||this}return e}(PD),cY=[new H0("EPSG:3857"),new H0("EPSG:102100"),new H0("EPSG:102113"),new H0("EPSG:900913"),new H0("http://www.opengis.net/def/crs/EPSG/0/3857"),new H0("http://www.opengis.net/gml/srs/epsg.xml#3857")];function cze(r,e,t){var n=r.length,i=t>1?t:2,o=e;o===void 0&&(i>2?o=r.slice():o=new Array(n));for(var l=0;l<n;l+=i){o[l]=W0*r[l]/180;var c=fT*Math.log(Math.tan(Math.PI*(+r[l+1]+90)/360));c>OD?c=OD:c<-OD&&(c=-OD),o[l+1]=c}return o}function hze(r,e,t){var n=r.length,i=t>1?t:2,o=e;o===void 0&&(i>2?o=r.slice():o=new Array(n));for(var l=0;l<n;l+=i)o[l]=180*r[l]/W0,o[l+1]=360*Math.atan(Math.exp(r[l+1]/fT))/Math.PI-90;return o}var yrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_rr=6378137,fze=[-180,-90,180,90],xrr=Math.PI*_rr/180,Kg=function(r){yrr(e,r);function e(t,n){return r.call(this,{code:t,units:za.DEGREES,extent:fze,axisOrientation:n,global:!0,metersPerUnit:xrr,worldExtent:fze})||this}return e}(PD),hY=[new Kg("CRS:84"),new Kg("EPSG:4326","neu"),new Kg("urn:ogc:def:crs:OGC:1.3:CRS84"),new Kg("urn:ogc:def:crs:OGC:2:84"),new Kg("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Kg("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Kg("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var fY={};function pze(r){return fY[r]||fY[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function dze(r,e){fY[r]=e}var Z0={};function pT(r,e,t){var n=r.getCode(),i=e.getCode();n in Z0||(Z0[n]={}),Z0[n][i]=t}function mze(r,e){var t;return r in Z0&&e in Z0[r]&&(t=Z0[r][e]),t}function gze(r,e){for(var t=(""+r).split("."),n=(""+e).split("."),i=0;i<Math.max(t.length,n.length);i++){var o=parseInt(t[i]||"0",10),l=parseInt(n[i]||"0",10);if(o>l)return 1;if(l>o)return-1}return 0}function vze(r,e){return r[0]+=+e[0],r[1]+=+e[1],r}function pY(r,e){var t=r[0],n=r[1],i=e[0],o=e[1],l=i[0],c=i[1],p=o[0],g=o[1],_=p-l,x=g-c,T=_===0&&x===0?0:(_*(t-l)+x*(n-c))/(_*_+x*x||0),C,D;return T<=0?(C=l,D=c):T>=1?(C=p,D=g):(C=l+T*_,D=c+T*x),[C,D]}function ds(r,e){for(var t=!0,n=r.length-1;n>=0;--n)if(r[n]!=e[n]){t=!1;break}return t}function Y0(r,e){var t=Math.cos(e),n=Math.sin(e),i=r[0]*t-r[1]*n,o=r[1]*t+r[0]*n;return r[0]=i,r[1]=o,r}function yze(r,e){return r[0]*=e,r[1]*=e,r}function Ld(r,e){var t=r[0]-e[0],n=r[1]-e[1];return t*t+n*n}function dY(r,e){return Math.sqrt(Ld(r,e))}function _ze(r,e){return Ld(r,pY(r,e))}function LD(r,e){if(e.canWrapX()){var t=fn(e.getExtent()),n=xze(r,e,t);n&&(r[0]-=n*t)}return r}function xze(r,e,t){var n=e.getExtent(),i=0;if(e.canWrapX()&&(r[0]<n[0]||r[0]>n[2])){var o=t||fn(n);i=Math.floor((r[0]-n[0])/o)}return i}var brr=6371008.8;function mY(r,e,t){var n=t||brr,i=$0(r[1]),o=$0(e[1]),l=(o-i)/2,c=$0(e[0]-r[0])/2,p=Math.sin(l)*Math.sin(l)+Math.sin(c)*Math.sin(c)*Math.cos(i)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(p),Math.sqrt(1-p))}var gY=!0;function wze(r){var e=r===void 0?!0:r;gY=!e}function vY(r,e,t){var n;if(e!==void 0){for(var i=0,o=r.length;i<o;++i)e[i]=r[i];n=e}else n=r.slice();return n}function Eze(r,e,t){if(e!==void 0&&r!==e){for(var n=0,i=r.length;n<i;++n)e[n]=r[n];r=e}return r}function wrr(r){dze(r.getCode(),r),pT(r,r,vY)}function Err(r){r.forEach(wrr)}function Xn(r){return typeof r=="string"?pze(r):r||null}function yY(r,e,t,n){r=Xn(r);var i,o=r.getPointResolutionFunc();if(o){if(i=o(e,t),n&&n!==r.getUnits()){var l=r.getMetersPerUnit();l&&(i=i*l/Fa[n])}}else{var c=r.getUnits();if(c==za.DEGREES&&!n||n==za.DEGREES)i=e;else{var p=dT(r,Xn("EPSG:4326"));if(p===Eze&&c!==za.DEGREES)i=e*r.getMetersPerUnit();else{var g=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];g=p(g,g,2);var _=mY(g.slice(0,2),g.slice(2,4)),x=mY(g.slice(4,6),g.slice(6,8));i=(_+x)/2}var l=n?Fa[n]:r.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function bze(r){Err(r),r.forEach(function(e){r.forEach(function(t){e!==t&&pT(e,t,vY)})})}function Srr(r,e,t,n){r.forEach(function(i){e.forEach(function(o){pT(i,o,t),pT(o,i,n)})})}function DD(r,e){return r?typeof r=="string"?Xn(r):r:Xn(e)}function ih(r,e){if(r===e)return!0;var t=r.getUnits()===e.getUnits();if(r.getCode()===e.getCode())return t;var n=dT(r,e);return n===vY&&t}function dT(r,e){var t=r.getCode(),n=e.getCode(),i=mze(t,n);return i||(i=Eze),i}function Xg(r,e){var t=Xn(r),n=Xn(e);return dT(t,n)}function lc(r,e,t){var n=Xg(e,t);return n(r,void 0,r.length)}function Qg(r,e,t,n){var i=Xg(e,t);return ize(r,i,void 0,n)}var sc=null;function cu(){return sc}function Dd(r,e){return sc?lc(r,e,sc):r}function wi(r,e){return sc?lc(r,sc,e):(gY&&!ds(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(gY=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r)}function Nd(r,e){return sc?Qg(r,e,sc):r}function Ua(r,e){return sc?Qg(r,sc,e):r}function Sze(r,e){if(!sc)return r;var t=Xn(e).getUnits(),n=sc.getUnits();return t&&n?r*Fa[t]/Fa[n]:r}function Trr(){bze(cY),bze(hY),Srr(hY,cY,cze,hze)}Trr();function hu(r,e,t,n,i,o){for(var l=o||[],c=0,p=e;p<t;p+=n){var g=r[p],_=r[p+1];l[c++]=i[0]*g+i[2]*_+i[4],l[c++]=i[1]*g+i[3]*_+i[5]}return o&&l.length!=c&&(l.length=c),l}function K0(r,e,t,n,i,o,l){for(var c=l||[],p=Math.cos(i),g=Math.sin(i),_=o[0],x=o[1],T=0,C=e;C<t;C+=n){var D=r[C]-_,F=r[C+1]-x;c[T++]=_+D*p-F*g,c[T++]=x+D*g+F*p;for(var O=C+2;O<C+n;++O)c[T++]=r[O]}return l&&c.length!=T&&(c.length=T),c}function Tze(r,e,t,n,i,o,l,c){for(var p=c||[],g=l[0],_=l[1],x=0,T=e;T<t;T+=n){var C=r[T]-g,D=r[T+1]-_;p[x++]=g+i*C,p[x++]=_+o*D;for(var F=T+2;F<T+n;++F)p[x++]=r[F]}return c&&p.length!=x&&(p.length=x),p}function ND(r,e,t,n,i,o,l){for(var c=l||[],p=0,g=e;g<t;g+=n){c[p++]=r[g]+i,c[p++]=r[g+1]+o;for(var _=g+2;_<g+n;++_)c[p++]=r[_]}return l&&c.length!=p&&(c.length=p),c}var Irr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ize=Fi(),Mrr=function(r){Irr(e,r);function e(){var t=r.call(this)||this;return t.extent_=zi(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=BFe(function(n,i,o){if(!o)return this.getSimplifiedGeometry(i);var l=this.clone();return l.applyTransform(o),l.getSimplifiedGeometry(i)}),t}return e.prototype.simplifyTransformed=function(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)},e.prototype.clone=function(){return rr()},e.prototype.closestPointXY=function(t,n,i,o){return rr()},e.prototype.containsXY=function(t,n){var i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n},e.prototype.getClosestPoint=function(t,n){var i=n||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return rr()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&Od(n),this.extentRevision_=this.getRevision()}return rze(this.extent_,t)},e.prototype.rotate=function(t,n){rr()},e.prototype.scale=function(t,n,i){rr()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return rr()},e.prototype.getType=function(){return rr()},e.prototype.applyTransform=function(t){rr()},e.prototype.intersectsExtent=function(t){return rr()},e.prototype.translate=function(t,n){rr()},e.prototype.transform=function(t,n){var i=Xn(t),o=i.getUnits()==za.TILE_PIXELS?function(l,c,p){var g=i.getExtent(),_=i.getWorldExtent(),x=Fo(_)/Fo(g);return Eo(Ize,_[0],_[3],x,-x,0,0,0),hu(l,0,l.length,p,Ize,c),Xg(i,n)(l,c,p)}:Xg(i,n);return this.applyTransform(o),this},e}(wo),kD=Mrr;var Arr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Crr=function(r){Arr(e,r);function e(t){var n=r.call(this)||this;return n.geometries_=t||null,n.changeEventsKeys_=[],n.listenGeometriesChange_(),n}return e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(Qr),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,n=this.geometries_.length;t<n;++t)this.changeEventsKeys_.push(Mr(this.geometries_[t],qt.CHANGE,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){if(o<Ys(this.getExtent(),t,n))return o;for(var l=this.geometries_,c=0,p=l.length;c<p;++c)o=l[c].closestPointXY(t,n,i,o);return o},e.prototype.containsXY=function(t,n){for(var i=this.geometries_,o=0,l=i.length;o<l;++o)if(i[o].containsXY(t,n))return!0;return!1},e.prototype.computeExtent=function(t){Od(t);for(var n=this.geometries_,i=0,o=n.length;i<o;++i)AD(t,n[i].getExtent());return t},e.prototype.getGeometries=function(){return Mze(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],n=this.geometries_,i=0,o=n.length;i<o;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var n=[],i=this.geometries_,o=!1,l=0,c=i.length;l<c;++l){var p=i[l],g=p.getSimplifiedGeometry(t);n.push(g),g!==p&&(o=!0)}if(o){var _=new e(null);return _.setGeometriesArray(n),_}else return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return"GeometryCollection"},e.prototype.intersectsExtent=function(t){for(var n=this.geometries_,i=0,o=n.length;i<o;++i)if(n[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return this.geometries_.length===0},e.prototype.rotate=function(t,n){for(var i=this.geometries_,o=0,l=i.length;o<l;++o)i[o].rotate(t,n);this.changed()},e.prototype.scale=function(t,n,i){var o=i;o||(o=Ks(this.getExtent()));for(var l=this.geometries_,c=0,p=l.length;c<p;++c)l[c].scale(t,n,o);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(Mze(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var n=this.geometries_,i=0,o=n.length;i<o;++i)n[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,n){for(var i=this.geometries_,o=0,l=i.length;o<l;++o)i[o].translate(t,n);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),r.prototype.disposeInternal.call(this)},e}(kD);function Mze(r){for(var e=[],t=0,n=r.length;t<n;++t)e.push(r[t].clone());return e}var Aze=Crr;var Prr=function(){function r(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return r.prototype.getReadOptions=function(e,t){var n;if(t){var i=t.dataProjection?Xn(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()===za.TILE_PIXELS&&(i=Xn(i),i.setWorldExtent(t.extent)),n={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(n)},r.prototype.adaptOptions=function(e){return Gr({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)},r.prototype.getType=function(){return rr()},r.prototype.readFeature=function(e,t){return rr()},r.prototype.readFeatures=function(e,t){return rr()},r.prototype.readGeometry=function(e,t){return rr()},r.prototype.readProjection=function(e){return rr()},r.prototype.writeFeature=function(e,t){return rr()},r.prototype.writeFeatures=function(e,t){return rr()},r.prototype.writeGeometry=function(e,t){return rr()},r}(),Cze=Prr;function _Y(r,e,t){var n=t?Xn(t.featureProjection):null,i=t?Xn(t.dataProjection):null,o;if(n&&i&&!ih(n,i)?o=(e?r.clone():r).transform(e?n:i,e?i:n):o=r,e&&t&&t.decimals!==void 0){var l=Math.pow(10,t.decimals),c=function(p){for(var g=0,_=p.length;g<_;++g)p[g]=Math.round(p[g]*l)/l;return p};o===r&&(o=r.clone()),o.applyTransform(c)}return o}var Rrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Orr=function(r){Rrr(e,r);function e(){return r.call(this)||this}return e.prototype.getType=function(){return"json"},e.prototype.readFeature=function(t,n){return this.readFeatureFromObject(qD(t),this.getReadOptions(t,n))},e.prototype.readFeatures=function(t,n){return this.readFeaturesFromObject(qD(t),this.getReadOptions(t,n))},e.prototype.readFeatureFromObject=function(t,n){return rr()},e.prototype.readFeaturesFromObject=function(t,n){return rr()},e.prototype.readGeometry=function(t,n){return this.readGeometryFromObject(qD(t),this.getReadOptions(t,n))},e.prototype.readGeometryFromObject=function(t,n){return rr()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(qD(t))},e.prototype.readProjectionFromObject=function(t){return rr()},e.prototype.writeFeature=function(t,n){return JSON.stringify(this.writeFeatureObject(t,n))},e.prototype.writeFeatureObject=function(t,n){return rr()},e.prototype.writeFeatures=function(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))},e.prototype.writeFeaturesObject=function(t,n){return rr()},e.prototype.writeGeometry=function(t,n){return JSON.stringify(this.writeGeometryObject(t,n))},e.prototype.writeGeometryObject=function(t,n){return rr()},e}(Cze);function qD(r){if(typeof r=="string"){var e=JSON.parse(r);return e||null}else return r!==null?r:null}var Pze=Orr;var Fn={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};var Lrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Drr=function(r){Lrr(e,r);function e(){var t=r.call(this)||this;return t.layout=Fn.XY,t.stride=2,t.flatCoordinates=null,t}return e.prototype.computeExtent=function(t){return MD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return rr()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(t),i=n.getFlatCoordinates();return i.length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,n){this.stride=mT(t),this.layout=t,this.flatCoordinates=n},e.prototype.setCoordinates=function(t,n){rr()},e.prototype.setLayout=function(t,n,i){var o;if(t)o=mT(t);else{for(var l=0;l<i;++l)if(n.length===0){this.layout=Fn.XY,this.stride=2;return}else n=n[0];o=n.length,t=Nrr(o)}this.layout=t,this.stride=o},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,n){var i=this.getFlatCoordinates();if(i){var o=this.getStride();K0(i,0,i.length,o,t,n,i),this.changed()}},e.prototype.scale=function(t,n,i){var o=n;o===void 0&&(o=t);var l=i;l||(l=Ks(this.getExtent()));var c=this.getFlatCoordinates();if(c){var p=this.getStride();Tze(c,0,c.length,p,t,o,l,c),this.changed()}},e.prototype.translate=function(t,n){var i=this.getFlatCoordinates();if(i){var o=this.getStride();ND(i,0,i.length,o,t,n,i),this.changed()}},e}(kD);function Nrr(r){var e;return r==2?e=Fn.XY:r==3?e=Fn.XYZ:r==4&&(e=Fn.XYZM),e}function mT(r){var e;return r==Fn.XY?e=2:r==Fn.XYZ||r==Fn.XYM?e=3:r==Fn.XYZM&&(e=4),e}function Rze(r,e,t){var n=r.getFlatCoordinates();if(n){var i=r.getStride();return hu(n,0,n.length,i,e,t)}else return null}var Va=Drr;function Oze(r,e,t,n,i,o,l){var c=r[e],p=r[e+1],g=r[t]-c,_=r[t+1]-p,x;if(g===0&&_===0)x=e;else{var T=((i-c)*g+(o-p)*_)/(g*g+_*_);if(T>1)x=t;else if(T>0){for(var C=0;C<n;++C)l[C]=uu(r[e+C],r[t+C],T);l.length=n;return}else x=e}for(var C=0;C<n;++C)l[C]=r[x+C];l.length=n}function gT(r,e,t,n,i){var o=r[e],l=r[e+1];for(e+=n;e<t;e+=n){var c=r[e],p=r[e+1],g=ac(o,l,c,p);g>i&&(i=g),o=c,l=p}return i}function vT(r,e,t,n,i){for(var o=0,l=t.length;o<l;++o){var c=t[o];i=gT(r,e,c,n,i),e=c}return i}function Lze(r,e,t,n,i){for(var o=0,l=t.length;o<l;++o){var c=t[o];i=vT(r,e,c,n,i),e=c[c.length-1]}return i}function yT(r,e,t,n,i,o,l,c,p,g,_){if(e==t)return g;var x,T;if(i===0)if(T=ac(l,c,r[e],r[e+1]),T<g){for(x=0;x<n;++x)p[x]=r[e+x];return p.length=n,T}else return g;for(var C=_||[NaN,NaN],D=e+n;D<t;)if(Oze(r,D-n,D,n,l,c,C),T=ac(l,c,C[0],C[1]),T<g){for(g=T,x=0;x<n;++x)p[x]=C[x];p.length=n,D+=n}else D+=n*Math.max((Math.sqrt(T)-Math.sqrt(g))/i|0,1);if(o&&(Oze(r,t-n,e,n,l,c,C),T=ac(l,c,C[0],C[1]),T<g)){for(g=T,x=0;x<n;++x)p[x]=C[x];p.length=n}return g}function _T(r,e,t,n,i,o,l,c,p,g,_){for(var x=_||[NaN,NaN],T=0,C=t.length;T<C;++T){var D=t[T];g=yT(r,e,D,n,i,o,l,c,p,g,x),e=D}return g}function Dze(r,e,t,n,i,o,l,c,p,g,_){for(var x=_||[NaN,NaN],T=0,C=t.length;T<C;++T){var D=t[T];g=_T(r,e,D,n,i,o,l,c,p,g,x),e=D[D.length-1]}return g}function jD(r,e,t,n){for(var i=0,o=t.length;i<o;++i)r[e++]=t[i];return e}function Jg(r,e,t,n){for(var i=0,o=t.length;i<o;++i)for(var l=t[i],c=0;c<n;++c)r[e++]=l[c];return e}function xT(r,e,t,n,i){for(var o=i||[],l=0,c=0,p=t.length;c<p;++c){var g=Jg(r,e,t[c],n);o[l++]=g,e=g}return o.length=l,o}function Nze(r,e,t,n,i){for(var o=i||[],l=0,c=0,p=t.length;c<p;++c){var g=xT(r,e,t[c],n,o[l]);o[l++]=g,e=g[g.length-1]}return o.length=l,o}function bT(r,e,t,n,i,o,l){var c=(t-e)/n;if(c<3){for(;e<t;e+=n)o[l++]=r[e],o[l++]=r[e+1];return l}var p=new Array(c);p[0]=1,p[c-1]=1;for(var g=[e,t-n],_=0;g.length>0;){for(var x=g.pop(),T=g.pop(),C=0,D=r[T],F=r[T+1],O=r[x],k=r[x+1],q=T+n;q<x;q+=n){var U=r[q],H=r[q+1],se=sze(U,H,D,F,O,k);se>C&&(_=q,C=se)}C>i&&(p[(_-e)/n]=1,T+n<_&&g.push(T,_),_+n<x&&g.push(_,x))}for(var q=0;q<c;++q)p[q]&&(o[l++]=r[e+q*n],o[l++]=r[e+q*n+1]);return l}function kze(r,e,t,n,i,o,l,c){for(var p=0,g=t.length;p<g;++p){var _=t[p];l=bT(r,e,_,n,i,o,l),c.push(l),e=_}return l}function kd(r,e){return e*Math.round(r/e)}function krr(r,e,t,n,i,o,l){if(e==t)return l;var c=kd(r[e],i),p=kd(r[e+1],i);e+=n,o[l++]=c,o[l++]=p;var g,_;do if(g=kd(r[e],i),_=kd(r[e+1],i),e+=n,e==t)return o[l++]=g,o[l++]=_,l;while(g==c&&_==p);for(;e<t;){var x=kd(r[e],i),T=kd(r[e+1],i);if(e+=n,!(x==g&&T==_)){var C=g-c,D=_-p,F=x-c,O=T-p;if(C*O==D*F&&(C<0&&F<C||C==F||C>0&&F>C)&&(D<0&&O<D||D==O||D>0&&O>D)){g=x,_=T;continue}o[l++]=g,o[l++]=_,c=g,p=_,g=x,_=T}}return o[l++]=g,o[l++]=_,l}function xY(r,e,t,n,i,o,l,c){for(var p=0,g=t.length;p<g;++p){var _=t[p];l=krr(r,e,_,n,i,o,l),c.push(l),e=_}return l}function qze(r,e,t,n,i,o,l,c){for(var p=0,g=t.length;p<g;++p){var _=t[p],x=[];l=xY(r,e,_,n,i,o,l,x),c.push(x),e=_[_.length-1]}return l}function FD(r,e,t,n,i){var o;for(e+=n;e<t;e+=n)if(o=i(r.slice(e-n,e),r.slice(e,e+n)),o)return o;return!1}function fu(r,e,t,n,i){for(var o=i!==void 0?i:[],l=0,c=e;c<t;c+=n)o[l++]=r.slice(c,c+n);return o.length=l,o}function qd(r,e,t,n,i){for(var o=i!==void 0?i:[],l=0,c=0,p=t.length;c<p;++c){var g=t[c];o[l++]=fu(r,e,g,n,o[l]),e=g}return o.length=l,o}function wT(r,e,t,n,i){for(var o=i!==void 0?i:[],l=0,c=0,p=t.length;c<p;++c){var g=t[c];o[l++]=qd(r,e,g,n,o[l]),e=g[g.length-1]}return o.length=l,o}function BD(r,e,t,n,i,o,l){var c,p,g=(t-e)/n;if(g===1)c=e;else if(g===2)c=e,p=i;else if(g!==0){for(var _=r[e],x=r[e+1],T=0,C=[0],D=e+n;D<t;D+=n){var F=r[D],O=r[D+1];T+=Math.sqrt((F-_)*(F-_)+(O-x)*(O-x)),C.push(T),_=F,x=O}var k=i*T,q=jFe(C,k);q<0?(p=(k-C[-q-2])/(C[-q-1]-C[-q-2]),c=e+(-q-2)*n):c=e+q*n}for(var U=l>1?l:2,H=o||new Array(U),D=0;D<U;++D)H[D]=c===void 0?NaN:p===void 0?r[c+D]:uu(r[c+D],r[c+n+D],p);return H}function zD(r,e,t,n,i,o){if(t==e)return null;var l;if(i<r[e+n-1])return o?(l=r.slice(e,e+n),l[n-1]=i,l):null;if(r[t-1]<i)return o?(l=r.slice(t-n,t),l[n-1]=i,l):null;if(i==r[e+n-1])return r.slice(e,e+n);for(var c=e/n,p=t/n;c<p;){var g=c+p>>1;i<r[(g+1)*n-1]?p=g:c=g+1}var _=r[c*n-1];if(i==_)return r.slice((c-1)*n,(c-1)*n+n);var x=r[(c+1)*n-1],T=(i-_)/(x-_);l=[];for(var C=0;C<n-1;++C)l.push(uu(r[(c-1)*n+C],r[c*n+C],T));return l.push(i),l}function jze(r,e,t,n,i,o,l){if(l)return zD(r,e,t[t.length-1],n,i,o);var c;if(i<r[n-1])return o?(c=r.slice(0,n),c[n-1]=i,c):null;if(r[r.length-1]<i)return o?(c=r.slice(r.length-n),c[n-1]=i,c):null;for(var p=0,g=t.length;p<g;++p){var _=t[p];if(e!=_){if(i<r[e+n-1])return null;if(i<=r[_-1])return zD(r,e,_,n,i,!1);e=_}}return null}function Fze(r,e,t,n,i){var o=B0(i,function(l){return!jd(r,e,t,n,l[0],l[1])});return!o}function jd(r,e,t,n,i,o){for(var l=0,c=r[t-n],p=r[t-n+1];e<t;e+=n){var g=r[e],_=r[e+1];p<=o?_>o&&(g-c)*(o-p)-(i-c)*(_-p)>0&&l++:_<=o&&(g-c)*(o-p)-(i-c)*(_-p)<0&&l--,c=g,p=_}return l!==0}function ET(r,e,t,n,i,o){if(t.length===0||!jd(r,e,t[0],n,i,o))return!1;for(var l=1,c=t.length;l<c;++l)if(jd(r,t[l-1],t[l],n,i,o))return!1;return!0}function zze(r,e,t,n,i,o){if(t.length===0)return!1;for(var l=0,c=t.length;l<c;++l){var p=t[l];if(ET(r,e,p,n,i,o))return!0;e=p[p.length-1]}return!1}function ST(r,e,t,n,i){var o=lY(zi(),r,e,t,n);return Ri(i,o)?bf(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:FD(r,e,t,n,function(l,c){return nze(i,l,c)}):!1}function Bze(r,e,t,n,i){for(var o=0,l=t.length;o<l;++o){if(ST(r,e,t[o],n,i))return!0;e=t[o]}return!1}function bY(r,e,t,n,i){return!!(ST(r,e,t,n,i)||jd(r,e,t,n,i[0],i[1])||jd(r,e,t,n,i[0],i[3])||jd(r,e,t,n,i[2],i[1])||jd(r,e,t,n,i[2],i[3]))}function wY(r,e,t,n,i){if(!bY(r,e,t[0],n,i))return!1;if(t.length===1)return!0;for(var o=1,l=t.length;o<l;++o)if(Fze(r,t[o-1],t[o],n,i)&&!ST(r,t[o-1],t[o],n,i))return!1;return!0}function Uze(r,e,t,n,i){for(var o=0,l=t.length;o<l;++o){var c=t[o];if(wY(r,e,c,n,i))return!0;e=c[c.length-1]}return!1}function UD(r,e,t,n){for(var i=r[e],o=r[e+1],l=0,c=e+n;c<t;c+=n){var p=r[c],g=r[c+1];l+=Math.sqrt((p-i)*(p-i)+(g-o)*(g-o)),i=p,o=g}return l}var qrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),jrr=function(r){qrr(e,r);function e(t,n){var i=r.call(this)||this;return i.flatMidpoint_=null,i.flatMidpointRevision_=-1,i.maxDelta_=-1,i.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?i.setFlatCoordinates(n,t):i.setCoordinates(t,n),i}return e.prototype.appendCoordinate=function(t){this.flatCoordinates?ta(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){return o<Ys(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(gT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),yT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,n,i,o))},e.prototype.forEachSegment=function(t){return FD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,n){if(this.layout!=Fn.XYM&&this.layout!=Fn.XYZM)return null;var i=n!==void 0?n:!1;return zD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return fu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,n){return BD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)},e.prototype.getLength=function(){return UD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=bT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,Fn.XY)},e.prototype.getType=function(){return"LineString"},e.prototype.intersectsExtent=function(t){return ST(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jg(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Va),Ef=jrr;var Frr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zrr=function(r){Frr(e,r);function e(t,n,i){var o=r.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(t[0]))o.setCoordinates(t,n);else if(n!==void 0&&i)o.setFlatCoordinates(n,t),o.ends_=i;else{for(var l=o.getLayout(),c=t,p=[],g=[],_=0,x=c.length;_<x;++_){var T=c[_];_===0&&(l=T.getLayout()),ta(p,T.getFlatCoordinates()),g.push(p.length)}o.setFlatCoordinates(l,p),o.ends_=g}return o}return e.prototype.appendLineString=function(t){this.flatCoordinates?ta(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){return o<Ys(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vT(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_T(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,n,i,o))},e.prototype.getCoordinateAtM=function(t,n,i){if(this.layout!=Fn.XYM&&this.layout!=Fn.XYZM||this.flatCoordinates.length===0)return null;var o=n!==void 0?n:!1,l=i!==void 0?i:!1;return jze(this.flatCoordinates,0,this.ends_,this.stride,t,o,l)},e.prototype.getCoordinates=function(){return qd(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new Ef(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,n=this.ends_,i=this.layout,o=[],l=0,c=0,p=n.length;c<p;++c){var g=n[c],_=new Ef(t.slice(l,g),i);o.push(_),l=g}return o},e.prototype.getFlatMidpoints=function(){for(var t=[],n=this.flatCoordinates,i=0,o=this.ends_,l=this.stride,c=0,p=o.length;c<p;++c){var g=o[c],_=BD(n,i,g,l,.5);ta(t,_),i=g}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=kze(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,i),new e(n,Fn.XY,i)},e.prototype.getType=function(){return"MultiLineString"},e.prototype.intersectsExtent=function(t){return Bze(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=xT(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},e}(Va),VD=zrr;var Brr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Urr=function(r){Brr(e,r);function e(t,n){var i=r.call(this)||this;return i.setCoordinates(t,n),i}return e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){var l=this.flatCoordinates,c=ac(t,n,l[0],l[1]);if(c<o){for(var p=this.stride,g=0;g<p;++g)i[g]=l[g];return i.length=p,c}else return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return z0(this.flatCoordinates,t)},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(t){return sT(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=jD(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Va),Ga=Urr;var Vrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Grr=function(r){Vrr(e,r);function e(t,n){var i=r.call(this)||this;return n&&!Array.isArray(t[0])?i.setFlatCoordinates(n,t):i.setCoordinates(t,n),i}return e.prototype.appendPoint=function(t){this.flatCoordinates?ta(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){if(o<Ys(this.getExtent(),t,n))return o;for(var l=this.flatCoordinates,c=this.stride,p=0,g=l.length;p<g;p+=c){var _=ac(t,n,l[p],l[p+1]);if(_<o){o=_;for(var x=0;x<c;++x)i[x]=l[p+x];i.length=c}}return o},e.prototype.getCoordinates=function(){return fu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new Ga(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,n=this.layout,i=this.stride,o=[],l=0,c=t.length;l<c;l+=i){var p=new Ga(t.slice(l,l+i),n);o.push(p)}return o},e.prototype.getType=function(){return"MultiPoint"},e.prototype.intersectsExtent=function(t){for(var n=this.flatCoordinates,i=this.stride,o=0,l=n.length;o<l;o+=i){var c=n[o],p=n[o+1];if(sT(t,c,p))return!0}return!1},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jg(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Va),X0=Grr;function EY(r,e,t,n){for(var i=0,o=r[t-n],l=r[t-n+1];e<t;e+=n){var c=r[e],p=r[e+1];i+=l*c-o*p,o=c,l=p}return i/2}function SY(r,e,t,n){for(var i=0,o=0,l=t.length;o<l;++o){var c=t[o];i+=EY(r,e,c,n),e=c}return i}function Vze(r,e,t,n){for(var i=0,o=0,l=t.length;o<l;++o){var c=t[o];i+=SY(r,e,c,n),e=c[c.length-1]}return i}var $rr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hrr=function(r){$rr(e,r);function e(t,n){var i=r.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?i.setFlatCoordinates(n,t):i.setCoordinates(t,n),i}return e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,n,i,o){return o<Ys(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(gT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),yT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,i,o))},e.prototype.getArea=function(){return EY(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return fu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=bT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,Fn.XY)},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jg(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Va),TY=Hrr;function IY(r,e,t,n,i,o,l){for(var c,p,g,_,x,T,C,D=i[o+1],F=[],O=0,k=t.length;O<k;++O){var q=t[O];for(_=r[q-n],T=r[q-n+1],c=e;c<q;c+=n)x=r[c],C=r[c+1],(D<=T&&C<=D||T<=D&&D<=C)&&(g=(D-T)/(C-T)*(x-_)+_,F.push(g)),_=x,T=C}var U=NaN,H=-1/0;for(F.sort(xl),_=F[0],c=1,p=F.length;c<p;++c){x=F[c];var se=Math.abs(x-_);se>H&&(g=(_+x)/2,ET(r,e,t,n,g,D)&&(U=g,H=se)),_=x}return isNaN(U)&&(U=i[o]),l?(l.push(U,D,H),l):[U,D,H]}function Gze(r,e,t,n,i){for(var o=[],l=0,c=t.length;l<c;++l){var p=t[l];o=IY(r,e,p,n,i,2*l,o),e=p[p.length-1]}return o}function $ze(r,e,t,n){for(;e<t-n;){for(var i=0;i<n;++i){var o=r[e+i];r[e+i]=r[t-n+i],r[t-n+i]=o}e+=n,t-=n}}function Hze(r,e,t,n){for(var i=0,o=r[t-n],l=r[t-n+1];e<t;e+=n){var c=r[e],p=r[e+1];i+=(c-o)*(p+l),o=c,l=p}return i===0?void 0:i>0}function MY(r,e,t,n,i){for(var o=i!==void 0?i:!1,l=0,c=t.length;l<c;++l){var p=t[l],g=Hze(r,e,p,n);if(l===0){if(o&&g||!o&&!g)return!1}else if(o&&!g||!o&&g)return!1;e=p}return!0}function Wze(r,e,t,n,i){for(var o=0,l=t.length;o<l;++o){var c=t[o];if(!MY(r,e,c,n,i))return!1;c.length&&(e=c[c.length-1])}return!0}function GD(r,e,t,n,i){for(var o=i!==void 0?i:!1,l=0,c=t.length;l<c;++l){var p=t[l],g=Hze(r,e,p,n),_=l===0?o&&g||!o&&!g:o&&!g||!o&&g;_&&$ze(r,e,p,n),e=p}return e}function AY(r,e,t,n,i){for(var o=0,l=t.length;o<l;++o)e=GD(r,e,t[o],n,i);return e}var Wrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),CY=function(r){Wrr(e,r);function e(t,n,i){var o=r.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,n!==void 0&&i?(o.setFlatCoordinates(n,t),o.ends_=i):o.setCoordinates(t,n),o}return e.prototype.appendLinearRing=function(t){this.flatCoordinates?ta(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){return o<Ys(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vT(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_T(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,i,o))},e.prototype.containsXY=function(t,n){return ET(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)},e.prototype.getArea=function(){return SY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),GD(n,0,this.ends_,this.stride,t)):n=this.flatCoordinates,qd(n,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Ks(this.getExtent());this.flatInteriorPoint_=IY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Ga(this.getFlatInteriorPoint(),Fn.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new TY(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.ends_,o=[],l=0,c=0,p=i.length;c<p;++c){var g=i[c],_=new TY(n.slice(l,g),t);o.push(_),l=g}return o},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;MY(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=GD(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=xY(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new e(n,Fn.XY,i)},e.prototype.getType=function(){return"Polygon"},e.prototype.intersectsExtent=function(t){return wY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=xT(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},e}(Va),uc=CY;function TT(r){var e=r[0],t=r[1],n=r[2],i=r[3],o=[e,t,e,i,n,i,n,t,e,t];return new CY(o,Fn.XY,[o.length])}function $D(r,e,t){for(var n=e||32,i=r.getStride(),o=r.getLayout(),l=r.getCenter(),c=i*(n+1),p=new Array(c),g=0;g<c;g+=i){p[g]=0,p[g+1]=0;for(var _=2;_<i;_++)p[g+_]=l[_]}var x=[p.length],T=new CY(p,o,x);return Zze(T,l,r.getRadius(),t),T}function Zze(r,e,t,n){for(var i=r.getFlatCoordinates(),o=r.getStride(),l=i.length/o-1,c=n||0,p=0;p<=l;++p){var g=p*o,_=c+El(p,l)*2*Math.PI/l;i[g]=e[0]+t*Math.cos(_),i[g+1]=e[1]+t*Math.sin(_)}r.changed()}function Yze(r,e,t,n){for(var i=[],o=zi(),l=0,c=t.length;l<c;++l){var p=t[l];o=MD(r,e,p[0],n),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=p[p.length-1]}return i}var Zrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yrr=function(r){Zrr(e,r);function e(t,n,i){var o=r.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){for(var l=o.getLayout(),c=t,p=[],g=[],_=0,x=c.length;_<x;++_){var T=c[_];_===0&&(l=T.getLayout());for(var C=p.length,D=T.getEnds(),F=0,O=D.length;F<O;++F)D[F]+=C;ta(p,T.getFlatCoordinates()),g.push(D)}n=l,t=p,i=g}return n!==void 0&&i?(o.setFlatCoordinates(n,t),o.endss_=i):o.setCoordinates(t,n),o}return e.prototype.appendPolygon=function(t){var n;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.endss_.push();else{var i=this.flatCoordinates.length;ta(this.flatCoordinates,t.getFlatCoordinates()),n=t.getEnds().slice();for(var o=0,l=n.length;o<l;++o)n[o]+=i}this.endss_.push(n),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,n=new Array(t),i=0;i<t;++i)n[i]=this.endss_[i].slice();var o=new e(this.flatCoordinates.slice(),this.layout,n);return o.applyProperties(this),o},e.prototype.closestPointXY=function(t,n,i,o){return o<Ys(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Lze(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Dze(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,n,i,o))},e.prototype.containsXY=function(t,n){return zze(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,n)},e.prototype.getArea=function(){return Vze(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),AY(n,0,this.endss_,this.stride,t)):n=this.flatCoordinates,wT(n,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Yze(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Gze(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new X0(this.getFlatInteriorPoints().slice(),Fn.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Wze(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=AY(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=qze(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,i),new e(n,Fn.XY,i)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var n;if(t===0)n=0;else{var i=this.endss_[t-1];n=i[i.length-1]}var o=this.endss_[t].slice(),l=o[o.length-1];if(n!==0)for(var c=0,p=o.length;c<p;++c)o[c]-=n;return new uc(this.flatCoordinates.slice(n,l),this.layout,o)},e.prototype.getPolygons=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.endss_,o=[],l=0,c=0,p=i.length;c<p;++c){var g=i[c].slice(),_=g[g.length-1];if(l!==0)for(var x=0,T=g.length;x<T;++x)g[x]-=l;var C=new uc(n.slice(l,_),t,g);o.push(C),l=_}return o},e.prototype.getType=function(){return"MultiPolygon"},e.prototype.intersectsExtent=function(t){return Uze(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=Nze(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{var o=i[i.length-1];this.flatCoordinates.length=o.length===0?0:o[o.length-1]}this.changed()},e}(Va),HD=Yrr;var Krr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xrr=function(r){Krr(e,r);function e(t){var n=this,i=t||{};return n=r.call(this)||this,n.dataProjection=Xn(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(n.defaultFeatureProjection=Xn(i.featureProjection)),n.geometryName_=i.geometryName,n.extractGeometryName_=i.extractGeometryName,n.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],n}return e.prototype.readFeatureFromObject=function(t,n){var i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};var o=PY(i.geometry,n),l=new wl;return this.geometryName_?l.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&l.setGeometryName(i.geometry_name),l.setGeometry(o),"id"in i&&l.setId(i.id),i.properties&&l.setProperties(i.properties,!0),l},e.prototype.readFeaturesFromObject=function(t,n){var i=t,o=null;if(i.type==="FeatureCollection"){var l=t;o=[];for(var c=l.features,p=0,g=c.length;p<g;++p)o.push(this.readFeatureFromObject(c[p],n))}else o=[this.readFeatureFromObject(t,n)];return o},e.prototype.readGeometryFromObject=function(t,n){return PY(t,n)},e.prototype.readProjectionFromObject=function(t){var n=t.crs,i;return n?n.type=="name"?i=Xn(n.properties.name):n.type==="EPSG"?i=Xn("EPSG:"+n.properties.code):ir(!1,36):i=this.dataProjection,i},e.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var i={type:"Feature",geometry:null,properties:null},o=t.getId();if(o!==void 0&&(i.id=o),!t.hasProperties())return i;var l=t.getProperties(),c=t.getGeometry();return c&&(i.geometry=RY(c,n),delete l[t.getGeometryName()]),nc(l)||(i.properties=l),i},e.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var i=[],o=0,l=t.length;o<l;++o)i.push(this.writeFeatureObject(t[o],n));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(t,n){return RY(t,this.adaptOptions(n))},e}(Pze);function PY(r,e){if(!r)return null;var t;switch(r.type){case"Point":{t=Jrr(r);break}case"LineString":{t=enr(r);break}case"Polygon":{t=inr(r);break}case"MultiPoint":{t=rnr(r);break}case"MultiLineString":{t=tnr(r);break}case"MultiPolygon":{t=nnr(r);break}case"GeometryCollection":{t=Qrr(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type)}return _Y(t,!1,e)}function Qrr(r,e){var t=r.geometries.map(function(n){return PY(n,e)});return new Aze(t)}function Jrr(r){return new Ga(r.coordinates)}function enr(r){return new Ef(r.coordinates)}function tnr(r){return new VD(r.coordinates)}function rnr(r){return new X0(r.coordinates)}function nnr(r){return new HD(r.coordinates)}function inr(r){return new uc(r.coordinates)}function RY(r,e){r=_Y(r,!0,e);var t=r.getType(),n;switch(t){case"Point":{n=cnr(r,e);break}case"LineString":{n=anr(r,e);break}case"Polygon":{n=hnr(r,e);break}case"MultiPoint":{n=lnr(r,e);break}case"MultiLineString":{n=snr(r,e);break}case"MultiPolygon":{n=unr(r,e);break}case"GeometryCollection":{n=onr(r,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return n}function onr(r,e){var t=r.getGeometriesArray().map(function(n){var i=Gr({},e);return delete i.featureProjection,RY(n,i)});return{type:"GeometryCollection",geometries:t}}function anr(r,e){return{type:"LineString",coordinates:r.getCoordinates()}}function snr(r,e){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function lnr(r,e){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function unr(r,e){var t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(t)}}function cnr(r,e){return{type:"Point",coordinates:r.getCoordinates()}}function hnr(r,e){var t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(t)}}var IT=Xrr;var pn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var fnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pnr=function(r){fnr(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un,n.background_=t.background;var i=Gr({},t);return typeof t.properties=="object"&&(delete i.properties,Gr(i,t.properties)),i[pn.OPACITY]=t.opacity!==void 0?t.opacity:1,ir(typeof i[pn.OPACITY]=="number",64),i[pn.VISIBLE]=t.visible!==void 0?t.visible:!0,i[pn.Z_INDEX]=t.zIndex,i[pn.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,i[pn.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,i[pn.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,i[pn.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,n.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,n.setProperties(i),n.state_=null,n}return e.prototype.getBackground=function(){return this.background_},e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var n=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return n.opacity=jn(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},e.prototype.getLayersArray=function(t){return rr()},e.prototype.getLayerStatesArray=function(t){return rr()},e.prototype.getExtent=function(){return this.get(pn.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(pn.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(pn.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(pn.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(pn.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(pn.OPACITY)},e.prototype.getSourceState=function(){return rr()},e.prototype.getVisible=function(){return this.get(pn.VISIBLE)},e.prototype.getZIndex=function(){return this.get(pn.Z_INDEX)},e.prototype.setBackground=function(t){this.background_=t,this.changed()},e.prototype.setExtent=function(t){this.set(pn.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(pn.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(pn.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(pn.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(pn.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){ir(typeof t=="number",64),this.set(pn.OPACITY,t)},e.prototype.setVisible=function(t){this.set(pn.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(pn.Z_INDEX,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),r.prototype.disposeInternal.call(this)},e}(wo),WD=pnr;var zo={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var dnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mnr=function(r){dnr(e,r);function e(t){var n=this,i=Gr({},t);delete i.source,n=r.call(this,i)||this,n.on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,n.rendered=!1,t.render&&(n.render=t.render),t.map&&n.setMap(t.map),n.addChangeListener(pn.SOURCE,n.handleSourcePropertyChange_);var o=t.source?t.source:null;return n.setSource(o),n}return e.prototype.getLayersArray=function(t){var n=t||[];return n.push(this),n},e.prototype.getLayerStatesArray=function(t){var n=t||[];return n.push(this.getLayerState()),n},e.prototype.getSource=function(){return this.get(pn.SOURCE)||null},e.prototype.getRenderSource=function(){return this.getSource()},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():"undefined"},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Qr(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Mr(t,qt.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(function(n){return n([])})},e.prototype.getData=function(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)},e.prototype.render=function(t,n){var i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,n)},e.prototype.unrender=function(){this.rendered=!1},e.prototype.setMapInternal=function(t){t||this.unrender(),this.set(pn.MAP,t)},e.prototype.getMapInternal=function(){return this.get(pn.MAP)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Qr(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Qr(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Mr(t,zo.PRECOMPOSE,function(n){var i=n,o=i.frameState.layerStatesArray,l=this.getLayerState(!1);ir(!o.some(function(c){return c.layer===l.layer}),67),o.push(l)},this),this.mapRenderKey_=Mr(this,qt.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(pn.SOURCE,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),r.prototype.disposeInternal.call(this)},e}(WD);function ev(r,e){if(!r.visible)return!1;var t=e.resolution;if(t<r.minResolution||t>=r.maxResolution)return!1;var n=e.zoom;return n>r.minZoom&&n<=r.maxZoom}var tv=mnr;var p4e=ke(DY(),1);var bn={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function NY(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]+2*e,t[1]=r[1]+2*e,t}function kY(r){return r[0]>0&&r[1]>0}function ZD(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function zn(r,e){return Array.isArray(r)?r:(e===void 0?e=[r,r]:(e[0]=r,e[1]=r),e)}var gnr=function(){function r(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=zn(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}return r.prototype.clone=function(){var e=this.getScale();return new r({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},r.prototype.getOpacity=function(){return this.opacity_},r.prototype.getRotateWithView=function(){return this.rotateWithView_},r.prototype.getRotation=function(){return this.rotation_},r.prototype.getScale=function(){return this.scale_},r.prototype.getScaleArray=function(){return this.scaleArray_},r.prototype.getDisplacement=function(){return this.displacement_},r.prototype.getDeclutterMode=function(){return this.declutterMode_},r.prototype.getAnchor=function(){return rr()},r.prototype.getImage=function(e){return rr()},r.prototype.getHitDetectionImage=function(){return rr()},r.prototype.getPixelRatio=function(e){return 1},r.prototype.getImageState=function(){return rr()},r.prototype.getImageSize=function(){return rr()},r.prototype.getOrigin=function(){return rr()},r.prototype.getSize=function(){return rr()},r.prototype.setDisplacement=function(e){this.displacement_=e},r.prototype.setOpacity=function(e){this.opacity_=e},r.prototype.setRotateWithView=function(e){this.rotateWithView_=e},r.prototype.setRotation=function(e){this.rotation_=e},r.prototype.setScale=function(e){this.scale_=e,this.scaleArray_=zn(e)},r.prototype.listenImageChange=function(e){rr()},r.prototype.load=function(){rr()},r.prototype.unlistenImageChange=function(e){rr()},r}(),YD=gnr;var Xze=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Qze=/^([a-z]*)$|^hsla?\(.*\)$/i;function KD(r){return typeof r=="string"?r:jY(r)}function Jze(r){var e=document.createElement("div");if(e.style.color=r,e.style.color!==""){document.body.appendChild(e);var t=getComputedStyle(e).color;return document.body.removeChild(e),t}else return""}var qY=function(){var r=1024,e={},t=0;return function(n){var i;if(e.hasOwnProperty(n))i=e[n];else{if(t>=r){var o=0;for(var l in e)(o++&3)===0&&(delete e[l],--t)}i=vnr(n),e[n]=i,++t}return i}}();function Sf(r){return Array.isArray(r)?r:qY(r)}function vnr(r){var e,t,n,i,o;if(Qze.exec(r)&&(r=Jze(r)),Xze.exec(r)){var l=r.length-1,c=void 0;l<=4?c=1:c=2;var p=l===4||l===8;e=parseInt(r.substr(1+0*c,c),16),t=parseInt(r.substr(1+1*c,c),16),n=parseInt(r.substr(1+2*c,c),16),p?i=parseInt(r.substr(1+3*c,c),16):i=255,c==1&&(e=(e<<4)+e,t=(t<<4)+t,n=(n<<4)+n,p&&(i=(i<<4)+i)),o=[e,t,n,i/255]}else r.indexOf("rgba(")==0?(o=r.slice(5,-1).split(",").map(Number),Kze(o)):r.indexOf("rgb(")==0?(o=r.slice(4,-1).split(",").map(Number),o.push(1),Kze(o)):ir(!1,14);return o}function Kze(r){return r[0]=jn(r[0]+.5|0,0,255),r[1]=jn(r[1]+.5|0,0,255),r[2]=jn(r[2]+.5|0,0,255),r[3]=jn(r[3],0,1),r}function jY(r){var e=r[0];e!=(e|0)&&(e=e+.5|0);var t=r[1];t!=(t|0)&&(t=t+.5|0);var n=r[2];n!=(n|0)&&(n=n+.5|0);var i=r[3]===void 0?1:Math.round(r[3]*100)/100;return"rgba("+e+","+t+","+n+","+i+")"}function e4e(r){return Qze.test(r)&&(r=Jze(r)),Xze.test(r)||r.indexOf("rgba(")===0||r.indexOf("rgb(")===0}function Xs(r){return Array.isArray(r)?jY(r):r}function Oi(r,e,t,n){var i;return t&&t.length?i=t.shift():Rd?i=new OffscreenCanvas(r||300,e||300):i=document.createElement("canvas"),r&&(i.width=r),e&&(i.height=e),i.getContext("2d",n)}function XD(r){var e=r.canvas;e.width=1,e.height=1,r.clearRect(0,0,1,1)}function Q0(r,e){var t=e.parentNode;t&&t.replaceChild(r,e)}function MT(r){return r&&r.parentNode?r.parentNode.removeChild(r):null}function t4e(r){for(;r.lastChild;)r.removeChild(r.lastChild)}function r4e(r,e){for(var t=r.childNodes,n=0;;++n){var i=t[n],o=e[n];if(!i&&!o)break;if(i!==o){if(!i){r.appendChild(o);continue}if(!o){r.removeChild(i),--n;continue}r.insertBefore(o,i)}}}var AT="ol-hidden";var pu="ol-unselectable",FY="ol-unsupported",oh="ol-control",zY="ol-collapsed",ynr=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),n4e=["style","variant","weight","size","lineHeight","family"],BY=function(r){var e=r.match(ynr);if(!e)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=n4e.length;n<i;++n){var o=e[n+1];o!==void 0&&(t[n4e[n]]=o)}return t.families=t.family.split(/,\s?/),t};var JD="10px sans-serif",Qs="#000",rv="round",Tf=[],If=0,sh="round",Mf=10,Af="#000",Fd="center",nv="middle",Cf=[0,0,0,0],Pf=1,ah=new wo,_nr=new Zs;_nr.setSize=function(){console.warn("labelCache is deprecated.")};var J0=null,UY,VY={},i4e=function(){var r=100,e="32px ",t=["monospace","serif"],n=t.length,i="wmytzilWMYTZIL@#/&?$%10\uF013",o,l;function c(g,_,x){for(var T=!0,C=0;C<n;++C){var D=t[C];if(l=QD(g+" "+_+" "+e+D,i),x!=D){var F=QD(g+" "+_+" "+e+x+","+D,i);T=T&&F!=l}}return!!T}function p(){for(var g=!0,_=ah.getKeys(),x=0,T=_.length;x<T;++x){var C=_[x];ah.get(C)<r&&(c.apply(this,C.split(`
`))?(Ws(VY),J0=null,UY=void 0,ah.set(C,r)):(ah.set(C,ah.get(C)+1,!0),g=!1))}g&&(clearInterval(o),o=void 0)}return function(g){var _=BY(g);if(_)for(var x=_.families,T=0,C=x.length;T<C;++T){var D=x[T],F=_.style+`
`+_.weight+`
`+D;ah.get(F)===void 0&&(ah.set(F,r,!0),c(_.style,_.weight,D)||(ah.set(F,0,!0),o===void 0&&(o=setInterval(p,32))))}}}(),xnr=function(){var r;return function(e){var t=VY[e];if(t==null){if(Rd){var n=BY(e),i=o4e(e,"\u017Dg"),o=isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight);t=o*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=e,document.body.appendChild(r),t=r.offsetHeight,document.body.removeChild(r);VY[e]=t}return t}}();function o4e(r,e){return J0||(J0=Oi(1,1)),r!=UY&&(J0.font=r,UY=J0.font),J0.measureText(e)}function QD(r,e){return o4e(r,e).width}function GY(r,e,t){if(e in t)return t[e];var n=e.split(`
`).reduce(function(i,o){return Math.max(i,QD(r,o))},0);return t[e]=n,n}function a4e(r,e){for(var t=[],n=[],i=[],o=0,l=0,c=0,p=0,g=0,_=e.length;g<=_;g+=2){var x=e[g];if(x===`
`||g===_){o=Math.max(o,l),i.push(l),l=0,c+=p;continue}var T=e[g+1]||r.font,C=QD(T,x);t.push(C),l+=C;var D=xnr(T);n.push(D),p=Math.max(p,D)}return{width:o,height:c,widths:t,heights:n,lineWidths:i}}function s4e(r,e,t,n,i,o,l,c,p,g,_){r.save(),t!==1&&(r.globalAlpha*=t),e&&r.setTransform.apply(r,e),n.contextInstructions?(r.translate(p,g),r.scale(_[0],_[1]),bnr(n,r)):_[0]<0||_[1]<0?(r.translate(p,g),r.scale(_[0],_[1]),r.drawImage(n,i,o,l,c,0,0,l,c)):r.drawImage(n,i,o,l,c,p,g,l*_[0],c*_[1]),r.restore()}function bnr(r,e){for(var t=r.contextInstructions,n=0,i=t.length;n<i;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}var wnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Enr=function(r){wnr(e,r);function e(t){var n=this,i=t.rotateWithView!==void 0?t.rotateWithView:!1;return n=r.call(this,{opacity:1,rotateWithView:i,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})||this,n.canvas_=void 0,n.hitDetectionCanvas_=null,n.fill_=t.fill!==void 0?t.fill:null,n.origin_=[0,0],n.points_=t.points,n.radius_=t.radius!==void 0?t.radius:t.radius1,n.radius2_=t.radius2,n.angle_=t.angle!==void 0?t.angle:0,n.stroke_=t.stroke!==void 0?t.stroke:null,n.size_=null,n.renderOptions_=null,n.render(),n}return e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n},e.prototype.getAnchor=function(){var t=this.size_;if(!t)return null;var n=this.getDisplacement();return[t[0]/2-n[0],t[1]/2+n[1]]},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.setFill=function(t){this.fill_=t,this.render()},e.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},e.prototype.getImage=function(t){var n=this.canvas_[t];if(!n){var i=this.renderOptions_,o=Oi(i.size*t,i.size*t);this.draw_(i,o,t),n=o.canvas,this.canvas_[t]=n}return n},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.size_},e.prototype.getImageState=function(){return bn.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.setStroke=function(t){this.stroke_=t,this.render()},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.calculateLineJoinSize_=function(t,n,i){if(n===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return n;var o=this.radius_,l=this.radius2_===void 0?o:this.radius2_;if(o<l){var c=o;o=l,l=c}var p=this.radius2_===void 0?this.points_:this.points_*2,g=2*Math.PI/p,_=l*Math.sin(g),x=Math.sqrt(l*l-_*_),T=o-x,C=Math.sqrt(_*_+T*T),D=C/_;if(t==="miter"&&D<=i)return D*n;var F=n/2/D,O=n/2*(T/C),k=Math.sqrt((o+F)*(o+F)+O*O),q=k-o;if(this.radius2_===void 0||t==="bevel")return q*2;var U=o*Math.sin(g),H=Math.sqrt(o*o-U*U),se=l-H,ie=Math.sqrt(U*U+se*se),ue=ie/U;if(ue<=i){var ve=ue*n/2-l-o;return 2*Math.max(q,ve)}return q*2},e.prototype.createRenderOptions=function(){var t=sh,n=0,i=null,o=0,l,c=0;this.stroke_&&(l=this.stroke_.getColor(),l===null&&(l=Af),l=Xs(l),c=this.stroke_.getWidth(),c===void 0&&(c=Pf),i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=sh),n=this.stroke_.getMiterLimit(),n===void 0&&(n=Mf));var p=this.calculateLineJoinSize_(t,c,n),g=Math.max(this.radius_,this.radius2_||0),_=Math.ceil(2*g+p);return{strokeStyle:l,strokeWidth:c,size:_,lineDash:i,lineDashOffset:o,lineJoin:t,miterLimit:n}},e.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]},e.prototype.draw_=function(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.createPath_(n),this.fill_){var o=this.fill_.getColor();o===null&&(o=Qs),n.fillStyle=Xs(o),n.fill()}this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,n.setLineDash&&t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},e.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var n=this.fill_.getColor(),i=0;if(typeof n=="string"&&(n=Sf(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0){var o=Oi(t.size,t.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(t,o)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},e.prototype.createPath_=function(t){var n=this.points_,i=this.radius_;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{var o=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);for(var l=this.angle_-Math.PI/2,c=2*Math.PI/n,p=0;p<n;p++){var g=l+p*c,_=p%2===0?i:o;t.lineTo(_*Math.cos(g),_*Math.sin(g))}t.closePath()}},e.prototype.drawHitDetectionCanvas_=function(t,n){n.translate(t.size/2,t.size/2),this.createPath_(n),n.fillStyle=Qs,n.fill(),this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},e}(YD),l4e=Enr;var Snr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Tnr=function(r){Snr(e,r);function e(t){var n=t||{};return r.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,scale:n.scale!==void 0?n.scale:1,rotation:n.rotation!==void 0?n.rotation:0,rotateWithView:n.rotateWithView!==void 0?n.rotateWithView:!1,displacement:n.displacement!==void 0?n.displacement:[0,0],declutterMode:n.declutterMode})||this}return e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(l4e),iv=Tnr;var Inr=function(){function r(e){var t=e||{};this.color_=t.color!==void 0?t.color:null}return r.prototype.clone=function(){var e=this.getColor();return new r({color:Array.isArray(e)?e.slice():e||void 0})},r.prototype.getColor=function(){return this.color_},r.prototype.setColor=function(e){this.color_=e},r}(),Sl=Inr;var Mnr=function(){function r(e){var t=e||{};this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}return r.prototype.clone=function(){var e=this.getColor();return new r({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},r.prototype.getColor=function(){return this.color_},r.prototype.getLineCap=function(){return this.lineCap_},r.prototype.getLineDash=function(){return this.lineDash_},r.prototype.getLineDashOffset=function(){return this.lineDashOffset_},r.prototype.getLineJoin=function(){return this.lineJoin_},r.prototype.getMiterLimit=function(){return this.miterLimit_},r.prototype.getWidth=function(){return this.width_},r.prototype.setColor=function(e){this.color_=e},r.prototype.setLineCap=function(e){this.lineCap_=e},r.prototype.setLineDash=function(e){this.lineDash_=e},r.prototype.setLineDashOffset=function(e){this.lineDashOffset_=e},r.prototype.setLineJoin=function(e){this.lineJoin_=e},r.prototype.setMiterLimit=function(e){this.miterLimit_=e},r.prototype.setWidth=function(e){this.width_=e},r}(),cc=Mnr;var ex=function(){function r(e){var t=e||{};this.geometry_=null,this.geometryFunction_=u4e,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}return r.prototype.clone=function(){var e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new r({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},r.prototype.getRenderer=function(){return this.renderer_},r.prototype.setRenderer=function(e){this.renderer_=e},r.prototype.setHitDetectionRenderer=function(e){this.hitDetectionRenderer_=e},r.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},r.prototype.getGeometry=function(){return this.geometry_},r.prototype.getGeometryFunction=function(){return this.geometryFunction_},r.prototype.getFill=function(){return this.fill_},r.prototype.setFill=function(e){this.fill_=e},r.prototype.getImage=function(){return this.image_},r.prototype.setImage=function(e){this.image_=e},r.prototype.getStroke=function(){return this.stroke_},r.prototype.setStroke=function(e){this.stroke_=e},r.prototype.getText=function(){return this.text_},r.prototype.setText=function(e){this.text_=e},r.prototype.getZIndex=function(){return this.zIndex_},r.prototype.setGeometry=function(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=u4e,this.geometry_=e},r.prototype.setZIndex=function(e){this.zIndex_=e},r}();function c4e(r){var e;if(typeof r=="function")e=r;else{var t;if(Array.isArray(r))t=r;else{ir(typeof r.getZIndex=="function",41);var n=r;t=[n]}e=function(){return t}}return e}var $Y=null;function h4e(r,e){if(!$Y){var t=new Sl({color:"rgba(255,255,255,0.4)"}),n=new cc({color:"#3399CC",width:1.25});$Y=[new ex({image:new iv({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return $Y}function tx(){var r={},e=[255,255,255,1],t=[0,153,255,1],n=3;return r.Polygon=[new ex({fill:new Sl({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new ex({stroke:new cc({color:e,width:n+2})}),new ex({stroke:new cc({color:t,width:n})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new ex({image:new iv({radius:n*2,fill:new Sl({color:t}),stroke:new cc({color:e,width:n/2})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function u4e(r){return r.getGeometry()}var eN=ex;var Anr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),f4e={RENDER_ORDER:"renderOrder"},Cnr=function(r){Anr(e,r);function e(t){var n=this,i=t||{},o=Gr({},i);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,n=r.call(this,o)||this,n.declutter_=i.declutter!==void 0?i.declutter:!1,n.renderBuffer_=i.renderBuffer!==void 0?i.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(i.style),n.updateWhileAnimating_=i.updateWhileAnimating!==void 0?i.updateWhileAnimating:!1,n.updateWhileInteracting_=i.updateWhileInteracting!==void 0?i.updateWhileInteracting:!1,n}return e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(t){return r.prototype.getFeatures.call(this,t)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(f4e.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new p4e.default(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(f4e.RENDER_ORDER,t)},e.prototype.setStyle=function(t){this.style_=t!==void 0?t:h4e,this.styleFunction_=t===null?void 0:c4e(this.style_),this.changed()},e}(tv),d4e=Cnr;var CT={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},PT=[CT.FILL],lh=[CT.STROKE],Rf=[CT.BEGIN_PATH],HY=[CT.CLOSE_PATH],pr=CT;var Pnr=function(){function r(){}return r.prototype.drawCustom=function(e,t,n,i){},r.prototype.drawGeometry=function(e){},r.prototype.setStyle=function(e){},r.prototype.drawCircle=function(e,t){},r.prototype.drawFeature=function(e,t){},r.prototype.drawGeometryCollection=function(e,t){},r.prototype.drawLineString=function(e,t){},r.prototype.drawMultiLineString=function(e,t){},r.prototype.drawMultiPoint=function(e,t){},r.prototype.drawMultiPolygon=function(e,t){},r.prototype.drawPoint=function(e,t){},r.prototype.drawPolygon=function(e,t){},r.prototype.drawText=function(e,t){},r.prototype.setFillStrokeStyle=function(e,t){},r.prototype.setImageStyle=function(e,t){},r.prototype.setTextStyle=function(e,t){},r}(),tN=Pnr;var Rnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Onr=function(r){Rnr(e,r);function e(t,n,i,o){var l=r.call(this)||this;return l.tolerance=t,l.maxExtent=n,l.pixelRatio=o,l.maxLineWidth=0,l.resolution=i,l.beginGeometryInstruction1_=null,l.beginGeometryInstruction2_=null,l.bufferedMaxExtent_=null,l.instructions=[],l.coordinates=[],l.tmpCoordinate_=[],l.hitDetectionInstructions=[],l.state={},l}return e.prototype.applyPixelRatio=function(t){var n=this.pixelRatio;return n==1?t:t.map(function(i){return i*n})},e.prototype.appendFlatPointCoordinates=function(t,n){for(var i=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,l=this.coordinates,c=l.length,p=0,g=t.length;p<g;p+=n)o[0]=t[p],o[1]=t[p+1],ps(i,o)&&(l[c++]=o[0],l[c++]=o[1]);return c},e.prototype.appendFlatLineCoordinates=function(t,n,i,o,l,c){var p=this.coordinates,g=p.length,_=this.getBufferedMaxExtent();c&&(n+=o);var x=t[n],T=t[n+1],C=this.tmpCoordinate_,D=!0,F,O,k;for(F=n+o;F<i;F+=o)C[0]=t[F],C[1]=t[F+1],k=TD(_,C),k!==O?(D&&(p[g++]=x,p[g++]=T,D=!1),p[g++]=C[0],p[g++]=C[1]):k===So.INTERSECTING?(p[g++]=C[0],p[g++]=C[1],D=!1):D=!0,x=C[0],T=C[1],O=k;return(l&&D||F===n+o)&&(p[g++]=x,p[g++]=T),g},e.prototype.drawCustomCoordinates_=function(t,n,i,o,l){for(var c=0,p=i.length;c<p;++c){var g=i[c],_=this.appendFlatLineCoordinates(t,n,g,o,!1,!1);l.push(_),n=g}return n},e.prototype.drawCustom=function(t,n,i,o){this.beginGeometry(t,n);var l=t.getType(),c=t.getStride(),p=this.coordinates.length,g,_,x,T,C;switch(l){case"MultiPolygon":g=t.getOrientedFlatCoordinates(),T=[];var D=t.getEndss();C=0;for(var F=0,O=D.length;F<O;++F){var k=[];C=this.drawCustomCoordinates_(g,C,D[F],c,k),T.push(k)}this.instructions.push([pr.CUSTOM,p,T,t,i,wT]),this.hitDetectionInstructions.push([pr.CUSTOM,p,T,t,o||i,wT]);break;case"Polygon":case"MultiLineString":x=[],g=l=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),C=this.drawCustomCoordinates_(g,0,t.getEnds(),c,x),this.instructions.push([pr.CUSTOM,p,x,t,i,qd]),this.hitDetectionInstructions.push([pr.CUSTOM,p,x,t,o||i,qd]);break;case"LineString":case"Circle":g=t.getFlatCoordinates(),_=this.appendFlatLineCoordinates(g,0,g.length,c,!1,!1),this.instructions.push([pr.CUSTOM,p,_,t,i,fu]),this.hitDetectionInstructions.push([pr.CUSTOM,p,_,t,o||i,fu]);break;case"MultiPoint":g=t.getFlatCoordinates(),_=this.appendFlatPointCoordinates(g,c),_>p&&(this.instructions.push([pr.CUSTOM,p,_,t,i,fu]),this.hitDetectionInstructions.push([pr.CUSTOM,p,_,t,o||i,fu]));break;case"Point":g=t.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),_=this.coordinates.length,this.instructions.push([pr.CUSTOM,p,_,t,i]),this.hitDetectionInstructions.push([pr.CUSTOM,p,_,t,o||i]);break;default:}this.endGeometry(n)},e.prototype.beginGeometry=function(t,n){this.beginGeometryInstruction1_=[pr.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[pr.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var n,i=t.length,o,l,c=-1;for(n=0;n<i;++n)o=t[n],l=o[0],l==pr.END_GEOMETRY?c=n:l==pr.BEGIN_GEOMETRY&&(o[2]=n,FFe(this.hitDetectionInstructions,c,n),c=-1)},e.prototype.setFillStrokeStyle=function(t,n){var i=this.state;if(t){var o=t.getColor();i.fillStyle=Xs(o||Qs)}else i.fillStyle=void 0;if(n){var l=n.getColor();i.strokeStyle=Xs(l||Af);var c=n.getLineCap();i.lineCap=c!==void 0?c:rv;var p=n.getLineDash();i.lineDash=p?p.slice():Tf;var g=n.getLineDashOffset();i.lineDashOffset=g||If;var _=n.getLineJoin();i.lineJoin=_!==void 0?_:sh;var x=n.getWidth();i.lineWidth=x!==void 0?x:Pf;var T=n.getMiterLimit();i.miterLimit=T!==void 0?T:Mf,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var n=t.fillStyle,i=[pr.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[pr.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,n){var i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,n){var i=t.strokeStyle,o=t.lineCap,l=t.lineDash,c=t.lineDashOffset,p=t.lineJoin,g=t.lineWidth,_=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=o||l!=t.currentLineDash&&!ja(t.currentLineDash,l)||t.currentLineDashOffset!=c||t.currentLineJoin!=p||t.currentLineWidth!=g||t.currentMiterLimit!=_)&&(i!==void 0&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=o,t.currentLineDash=l,t.currentLineDashOffset=c,t.currentLineJoin=p,t.currentLineWidth=g,t.currentMiterLimit=_)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[pr.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=ID(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;oc(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(tN),uh=Onr;var Lnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Dnr=function(r){Lnr(e,r);function e(t,n,i,o){var l=r.call(this,t,n,i,o)||this;return l.hitDetectionImage_=null,l.image_=null,l.imagePixelRatio_=void 0,l.anchorX_=void 0,l.anchorY_=void 0,l.height_=void 0,l.opacity_=void 0,l.originX_=void 0,l.originY_=void 0,l.rotateWithView_=void 0,l.rotation_=void 0,l.scale_=void 0,l.width_=void 0,l.declutterMode_=void 0,l.declutterImageWithText_=void 0,l}return e.prototype.drawPoint=function(t,n){if(this.image_){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),o=t.getStride(),l=this.coordinates.length,c=this.appendFlatPointCoordinates(i,o);this.instructions.push([pr.DRAW_IMAGE,l,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([pr.DRAW_IMAGE,l,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}},e.prototype.drawMultiPoint=function(t,n){if(this.image_){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),o=t.getStride(),l=this.coordinates.length,c=this.appendFlatPointCoordinates(i,o);this.instructions.push([pr.DRAW_IMAGE,l,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([pr.DRAW_IMAGE,l,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,r.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,n){var i=t.getAnchor(),o=t.getSize(),l=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=n},e}(uh),m4e=Dnr;var Nnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),knr=function(r){Nnr(e,r);function e(t,n,i,o){return r.call(this,t,n,i,o)||this}return e.prototype.drawFlatCoordinates_=function(t,n,i,o){var l=this.coordinates.length,c=this.appendFlatLineCoordinates(t,n,i,o,!1,!1),p=[pr.MOVE_TO_LINE_TO,l,c];return this.instructions.push(p),this.hitDetectionInstructions.push(p),i},e.prototype.drawLineString=function(t,n){var i=this.state,o=i.strokeStyle,l=i.lineWidth;if(!(o===void 0||l===void 0)){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([pr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Tf,If],Rf);var c=t.getFlatCoordinates(),p=t.getStride();this.drawFlatCoordinates_(c,0,c.length,p),this.hitDetectionInstructions.push(lh),this.endGeometry(n)}},e.prototype.drawMultiLineString=function(t,n){var i=this.state,o=i.strokeStyle,l=i.lineWidth;if(!(o===void 0||l===void 0)){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([pr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Rf);for(var c=t.getEnds(),p=t.getFlatCoordinates(),g=t.getStride(),_=0,x=0,T=c.length;x<T;++x)_=this.drawFlatCoordinates_(p,_,c[x],g);this.hitDetectionInstructions.push(lh),this.endGeometry(n)}},e.prototype.finish=function(){var t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(lh),this.reverseHitDetectionInstructions(),this.state=null,r.prototype.finish.call(this)},e.prototype.applyStroke=function(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(lh),t.lastStroke=this.coordinates.length),t.lastStroke=0,r.prototype.applyStroke.call(this,t),this.instructions.push(Rf)},e}(uh),g4e=knr;var qnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),jnr=function(r){qnr(e,r);function e(t,n,i,o){return r.call(this,t,n,i,o)||this}return e.prototype.drawFlatCoordinatess_=function(t,n,i,o){var l=this.state,c=l.fillStyle!==void 0,p=l.strokeStyle!==void 0,g=i.length;this.instructions.push(Rf),this.hitDetectionInstructions.push(Rf);for(var _=0;_<g;++_){var x=i[_],T=this.coordinates.length,C=this.appendFlatLineCoordinates(t,n,x,o,!0,!p),D=[pr.MOVE_TO_LINE_TO,T,C];this.instructions.push(D),this.hitDetectionInstructions.push(D),p&&(this.instructions.push(HY),this.hitDetectionInstructions.push(HY)),n=x}return c&&(this.instructions.push(PT),this.hitDetectionInstructions.push(PT)),p&&(this.instructions.push(lh),this.hitDetectionInstructions.push(lh)),n},e.prototype.drawCircle=function(t,n){var i=this.state,o=i.fillStyle,l=i.strokeStyle;if(!(o===void 0&&l===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([pr.SET_FILL_STYLE,Qs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([pr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var c=t.getFlatCoordinates(),p=t.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(c,0,c.length,p,!1,!1);var _=[pr.CIRCLE,g];this.instructions.push(Rf,_),this.hitDetectionInstructions.push(Rf,_),i.fillStyle!==void 0&&(this.instructions.push(PT),this.hitDetectionInstructions.push(PT)),i.strokeStyle!==void 0&&(this.instructions.push(lh),this.hitDetectionInstructions.push(lh)),this.endGeometry(n)}},e.prototype.drawPolygon=function(t,n){var i=this.state,o=i.fillStyle,l=i.strokeStyle;if(!(o===void 0&&l===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([pr.SET_FILL_STYLE,Qs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([pr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var c=t.getEnds(),p=t.getOrientedFlatCoordinates(),g=t.getStride();this.drawFlatCoordinatess_(p,0,c,g),this.endGeometry(n)}},e.prototype.drawMultiPolygon=function(t,n){var i=this.state,o=i.fillStyle,l=i.strokeStyle;if(!(o===void 0&&l===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([pr.SET_FILL_STYLE,Qs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([pr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var c=t.getEndss(),p=t.getOrientedFlatCoordinates(),g=t.getStride(),_=0,x=0,T=c.length;x<T;++x)_=this.drawFlatCoordinatess_(p,_,c[x],g);this.endGeometry(n)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(t!==0)for(var n=this.coordinates,i=0,o=n.length;i<o;++i)n[i]=kd(n[i],t);return r.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state,n=t.fillStyle;n!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)},e}(uh),WY=jnr;var rN={POINT:"point",LINE:"line"};function v4e(r,e,t,n,i){var o=t,l=t,c=0,p=0,g=t,_,x,T,C,D,F,O,k,q,U;for(x=t;x<n;x+=i){var H=e[x],se=e[x+1];D!==void 0&&(q=H-D,U=se-F,C=Math.sqrt(q*q+U*U),O!==void 0&&(p+=T,_=Math.acos((O*q+k*U)/(T*C)),_>r&&(p>c&&(c=p,o=g,l=x),p=0,g=x-i)),T=C,O=q,k=U),D=H,F=se}return p+=C,p>c?[g,x]:[o,l]}var Fnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rx={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},znr=function(r){Fnr(e,r);function e(t,n,i,o){var l=r.call(this,t,n,i,o)||this;return l.labels_=null,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=void 0,l.textRotation_=0,l.textFillState_=null,l.fillStates={},l.textStrokeState_=null,l.strokeStates={},l.textState_={},l.textStates={},l.textKey_="",l.fillKey_="",l.strokeKey_="",l.declutterImageWithText_=void 0,l}return e.prototype.finish=function(){var t=r.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},e.prototype.drawText=function(t,n){var i=this.textFillState_,o=this.textStrokeState_,l=this.textState_;if(!(this.text_===""||!l||!i&&!o)){var c=this.coordinates,p=c.length,g=t.getType(),_=null,x=t.getStride();if(l.placement===rN.LINE&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!Ri(this.getBufferedMaxExtent(),t.getExtent()))return;var T=void 0;if(_=t.getFlatCoordinates(),g=="LineString")T=[_.length];else if(g=="MultiLineString")T=t.getEnds();else if(g=="Polygon")T=t.getEnds().slice(0,1);else if(g=="MultiPolygon"){var C=t.getEndss();T=[];for(var D=0,F=C.length;D<F;++D)T.push(C[D][0])}this.beginGeometry(t,n);for(var O=l.textAlign,k=0,q=void 0,U=0,H=T.length;U<H;++U){if(O==null){var se=v4e(l.maxAngle,_,k,T[U],x);k=se[0],q=se[1]}else q=T[U];for(var D=k;D<q;D+=x)c.push(_[D],_[D+1]);var ie=c.length;k=T[U],this.drawChars_(p,ie),p=ie}this.endGeometry(n)}else{var ue=l.overflow?null:[];switch(g){case"Point":case"MultiPoint":_=t.getFlatCoordinates();break;case"LineString":_=t.getFlatMidpoint();break;case"Circle":_=t.getCenter();break;case"MultiLineString":_=t.getFlatMidpoints(),x=2;break;case"Polygon":_=t.getFlatInteriorPoint(),l.overflow||ue.push(_[2]/this.resolution),x=3;break;case"MultiPolygon":var ve=t.getFlatInteriorPoints();_=[];for(var D=0,F=ve.length;D<F;D+=3)l.overflow||ue.push(ve[D+2]/this.resolution),_.push(ve[D],ve[D+1]);if(_.length===0)return;x=2;break;default:}var ie=this.appendFlatPointCoordinates(_,x);if(ie===p)return;if(ue&&(ie-p)/2!==_.length/x){var ye=p/2;ue=ue.filter(function(We,mt){var ht=c[(ye+mt)*2]===_[mt*x]&&c[(ye+mt)*2+1]===_[mt*x+1];return ht||--ye,ht})}this.saveTextStates_(),(l.backgroundFill||l.backgroundStroke)&&(this.setFillStrokeStyle(l.backgroundFill,l.backgroundStroke),l.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),l.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);var ge=l.padding;if(ge!=Cf&&(l.scale[0]<0||l.scale[1]<0)){var _e=l.padding[0],Le=l.padding[1],Re=l.padding[2],je=l.padding[3];l.scale[0]<0&&(Le=-Le,je=-je),l.scale[1]<0&&(_e=-_e,Re=-Re),ge=[_e,Le,Re,je]}var $e=this.pixelRatio;this.instructions.push([pr.DRAW_IMAGE,p,ie,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,ge==Cf?Cf:ge.map(function(We){return We*$e}),!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,ue]);var Be=1/$e;this.hitDetectionInstructions.push([pr.DRAW_IMAGE,p,ie,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[Be,Be],NaN,void 0,this.declutterImageWithText_,ge,!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,ue]),this.endGeometry(n)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,n=this.textState_,i=this.textFillState_,o=this.strokeKey_;t&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var l=this.textKey_;l in this.textStates||(this.textStates[l]={font:n.font,textAlign:n.textAlign||Fd,justify:n.justify,textBaseline:n.textBaseline||nv,scale:n.scale});var c=this.fillKey_;i&&(c in this.fillStates||(this.fillStates[c]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,n){var i=this.textStrokeState_,o=this.textState_,l=this.strokeKey_,c=this.textKey_,p=this.fillKey_;this.saveTextStates_();var g=this.pixelRatio,_=rx[o.textBaseline],x=this.textOffsetY_*g,T=this.text_,C=i?i.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([pr.DRAW_CHARS,t,n,_,o.overflow,p,o.maxAngle,g,x,l,C*g,T,c,1]),this.hitDetectionInstructions.push([pr.DRAW_CHARS,t,n,_,o.overflow,p,o.maxAngle,1,x,l,C,T,c,1/g])},e.prototype.setTextStyle=function(t,n){var i,o,l;if(!t)this.text_="";else{var c=t.getFill();c?(o=this.textFillState_,o||(o={},this.textFillState_=o),o.fillStyle=Xs(c.getColor()||Qs)):(o=null,this.textFillState_=o);var p=t.getStroke();if(!p)l=null,this.textStrokeState_=l;else{l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);var g=p.getLineDash(),_=p.getLineDashOffset(),x=p.getWidth(),T=p.getMiterLimit();l.lineCap=p.getLineCap()||rv,l.lineDash=g?g.slice():Tf,l.lineDashOffset=_===void 0?If:_,l.lineJoin=p.getLineJoin()||sh,l.lineWidth=x===void 0?Pf:x,l.miterLimit=T===void 0?Mf:T,l.strokeStyle=Xs(p.getColor()||Af)}i=this.textState_;var C=t.getFont()||JD;i4e(C);var D=t.getScaleArray();i.overflow=t.getOverflow(),i.font=C,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||nv,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Cf,i.scale=D===void 0?[1,1]:D;var F=t.getOffsetX(),O=t.getOffsetY(),k=t.getRotateWithView(),q=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=F===void 0?0:F,this.textOffsetY_=O===void 0?0:O,this.textRotateWithView_=k===void 0?!1:k,this.textRotation_=q===void 0?0:q,this.strokeKey_=l?(typeof l.strokeStyle=="string"?l.strokeStyle:Jt(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=o?typeof o.fillStyle=="string"?o.fillStyle:"|"+Jt(o.fillStyle):""}this.declutterImageWithText_=n},e}(uh),y4e=znr;var Bnr={Circle:WY,Default:uh,Image:m4e,LineString:g4e,Polygon:WY,Text:y4e},Unr=function(){function r(e,t,n,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}return r.prototype.finish=function(){var e={};for(var t in this.buildersByZIndex_){e[t]=e[t]||{};var n=this.buildersByZIndex_[t];for(var i in n){var o=n[i].finish();e[t][i]=o}}return e},r.prototype.getBuilder=function(e,t){var n=e!==void 0?e.toString():"0",i=this.buildersByZIndex_[n];i===void 0&&(i={},this.buildersByZIndex_[n]=i);var o=i[t];if(o===void 0){var l=Bnr[t];o=new l(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=o}return o},r}(),ZY=Unr;var Vnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gnr=function(r){Vnr(e,r);function e(t){var n=r.call(this)||this;return n.ready=!0,n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=t,n.declutterExecutorGroup=null,n}return e.prototype.getFeatures=function(t){return rr()},e.prototype.getData=function(t){return null},e.prototype.prepareFrame=function(t){return rr()},e.prototype.renderFrame=function(t,n){return rr()},e.prototype.loadedTileCallback=function(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i},e.prototype.createLoadedTileFinder=function(t,n,i){return function(o,l){var c=this.loadedTileCallback.bind(this,i,o);return t.forEachLoadedTile(n,o,l,c)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,n,i,o,l){},e.prototype.getDataAtPixel=function(t,n,i){return null},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){var n=t.target;n.getState()===bn.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var n=t.getState();return n!=bn.LOADED&&n!=bn.ERROR&&t.addEventListener(qt.CHANGE,this.boundHandleImageChange_),n==bn.IDLE&&(t.load(),n=t.getState()),n==bn.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()},e.prototype.disposeInternal=function(){delete this.layer_,r.prototype.disposeInternal.call(this)},e}(_D),nN=Gnr;var $nr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hnr=function(r){$nr(e,r);function e(t,n,i,o){var l=r.call(this,t)||this;return l.inversePixelTransform=n,l.frameState=i,l.context=o,l}return e}(Pi),zd=Hnr;var Wnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),YY=[],nx=null;function Znr(){var r=document.createElement("canvas");r.width=1,r.height=1,nx=r.getContext("2d")}var Ynr=function(r){Wnr(e,r);function e(t){var n=r.call(this,t)||this;return n.container=null,n.renderedResolution,n.tempTransform=Fi(),n.pixelTransform=Fi(),n.inversePixelTransform=Fi(),n.context=null,n.containerReused=!1,n.pixelContext_=null,n.frameState=null,n}return e.prototype.getImageData=function(t,n,i){nx||Znr(),nx.clearRect(0,0,1,1);var o;try{nx.drawImage(t,n,i,1,1,0,0,1,1),o=nx.getImageData(0,0,1,1).data}catch(l){return nx=null,null}return o},e.prototype.getBackground=function(t){var n=this.getLayer(),i=n.getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0},e.prototype.useContainer=function(t,n,i){var o=this.getLayer().getClassName(),l,c;if(t&&t.className===o&&(!i||t&&t.style.backgroundColor&&ja(Sf(t.style.backgroundColor),Sf(i)))){var p=t.firstElementChild;p instanceof HTMLCanvasElement&&(c=p.getContext("2d"))}if(c&&c.canvas.style.transform===n?(this.container=t,this.context=c,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){l=document.createElement("div"),l.className=o;var g=l.style;g.position="absolute",g.width="100%",g.height="100%",c=Oi();var p=c.canvas;l.appendChild(p),g=p.style,g.position="absolute",g.left="0",g.transformOrigin="top left",this.container=l,this.context=c}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)},e.prototype.clipUnrotated=function(t,n,i){var o=lu(i),l=G0(i),c=V0(i),p=U0(i);On(n.coordinateToPixelTransform,o),On(n.coordinateToPixelTransform,l),On(n.coordinateToPixelTransform,c),On(n.coordinateToPixelTransform,p);var g=this.inversePixelTransform;On(g,o),On(g,l),On(g,c),On(g,p),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.lineTo(Math.round(c[0]),Math.round(c[1])),t.lineTo(Math.round(p[0]),Math.round(p[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,n,i){var o=this.getLayer();if(o.hasListener(t)){var l=new zd(t,this.inversePixelTransform,i,n);o.dispatchEvent(l)}},e.prototype.preRender=function(t,n){this.frameState=n,this.dispatchRenderEvent_(zo.PRERENDER,t,n)},e.prototype.postRender=function(t,n){this.dispatchRenderEvent_(zo.POSTRENDER,t,n)},e.prototype.getRenderTransform=function(t,n,i,o,l,c,p){var g=l/2,_=c/2,x=o/n,T=-x,C=-t[0]+p,D=-t[1];return Eo(this.tempTransform,g,_,x,T,-i,C,D)},e.prototype.getDataAtPixel=function(t,n,i){var o=On(this.inversePixelTransform,t.slice()),l=this.context,c=this.getLayer(),p=c.getExtent();if(p){var g=On(n.pixelToCoordinateTransform,t.slice());if(!ps(p,g))return null}var _=Math.round(o[0]),x=Math.round(o[1]),T=this.pixelContext_;if(!T){var C=document.createElement("canvas");C.width=1,C.height=1,T=C.getContext("2d"),this.pixelContext_=T}T.clearRect(0,0,1,1);var D;try{T.drawImage(l.canvas,_,x,1,1,0,0,1,1),D=T.getImageData(0,0,1,1).data}catch(F){return F.name==="SecurityError"?(this.pixelContext_=null,new Uint8Array):D}return D[3]===0?null:D},e.prototype.disposeInternal=function(){delete this.frameState,r.prototype.disposeInternal.call(this)},e}(nN),iN=Ynr;function _4e(r,e,t,n,i,o,l,c,p,g,_,x){var T=r[e],C=r[e+1],D=0,F=0,O=0,k=0;function q(){D=T,F=C,e+=n,T=r[e],C=r[e+1],k+=O,O=Math.sqrt((T-D)*(T-D)+(C-F)*(C-F))}do q();while(e<t-n&&k+O<o);for(var U=O===0?0:(o-k)/O,H=uu(D,T,U),se=uu(F,C,U),ie=e-n,ue=k,ve=o+c*p(g,i,_);e<t-n&&k+O<ve;)q();U=O===0?0:(ve-k)/O;var ye=uu(D,T,U),ge=uu(F,C,U),_e;if(x){var Le=[H,se,ye,ge];K0(Le,0,4,2,x,Le,Le),_e=Le[0]>Le[2]}else _e=H>ye;var Re=Math.PI,je=[],$e=ie+n===e;e=ie,O=0,k=ue,T=r[e],C=r[e+1];var Be;if($e){q(),Be=Math.atan2(C-F,T-D),_e&&(Be+=Be>0?-Re:Re);var nt=(ye+H)/2,We=(ge+se)/2;return je[0]=[nt,We,(ve-o)/2,Be,i],je}i=i.replace(/\n/g," ");for(var mt=0,ht=i.length;mt<ht;){q();var _t=Math.atan2(C-F,T-D);if(_e&&(_t+=_t>0?-Re:Re),Be!==void 0){var ze=_t-Be;if(ze+=ze>Re?-2*Re:ze<-Re?2*Re:0,Math.abs(ze)>l)return null}Be=_t;for(var St=mt,jt=0;mt<ht;++mt){var Fe=_e?ht-mt-1:mt,st=c*p(g,i[Fe],_);if(e+n<t&&k+O<o+jt+st/2)break;jt+=st}if(mt!==St){var He=_e?i.substring(ht-St,ht-mt):i.substring(St,mt);U=O===0?0:(o+jt/2-k)/O;var nt=uu(D,T,U),We=uu(F,C,U);je.push([nt,We,jt/2,_t,He]),o+=jt}}return je}var ix=zi(),Bd=[],Of=[],Lf=[],Ud=[];function x4e(r){return r[3].declutterBox}var Knr=new RegExp("[\u0591-\u08FF\uFB1D-\uFDFF\uFE70-\uFEFC\u0800-\u0FFF\uE800-\uEFFF]");function b4e(r,e){return(e==="start"||e==="end")&&!Knr.test(r)&&(e=e==="start"?"left":"right"),rx[e]}function Xnr(r,e,t){return t>0&&r.push(`
`,""),r.push(e,""),r}var Qnr=function(){function r(e,t,n,i){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Fi(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}return r.prototype.createLabel=function(e,t,n,i){var o=e+t+n+i;if(this.labels_[o])return this.labels_[o];var l=i?this.strokeStates[i]:null,c=n?this.fillStates[n]:null,p=this.textStates[t],g=this.pixelRatio,_=[p.scale[0]*g,p.scale[1]*g],x=Array.isArray(e),T=p.justify?rx[p.justify]:b4e(Array.isArray(e)?e[0]:e,p.textAlign||Fd),C=i&&l.lineWidth?l.lineWidth:0,D=x?e:e.split(`
`).reduce(Xnr,[]),F=a4e(p,D),O=F.width,k=F.height,q=F.widths,U=F.heights,H=F.lineWidths,se=O+C,ie=[],ue=(se+2)*_[0],ve=(k+C)*_[1],ye={width:ue<0?Math.floor(ue):Math.ceil(ue),height:ve<0?Math.floor(ve):Math.ceil(ve),contextInstructions:ie};if((_[0]!=1||_[1]!=1)&&ie.push("scale",_),i){ie.push("strokeStyle",l.strokeStyle),ie.push("lineWidth",C),ie.push("lineCap",l.lineCap),ie.push("lineJoin",l.lineJoin),ie.push("miterLimit",l.miterLimit);var ge=Rd?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;ge.prototype.setLineDash&&(ie.push("setLineDash",[l.lineDash]),ie.push("lineDashOffset",l.lineDashOffset))}n&&ie.push("fillStyle",c.fillStyle),ie.push("textBaseline","middle"),ie.push("textAlign","center");for(var _e=.5-T,Le=T*se+_e*C,Re=[],je=[],$e=0,Be=0,nt=0,We=0,mt,ht=0,_t=D.length;ht<_t;ht+=2){var ze=D[ht];if(ze===`
`){Be+=$e,$e=0,Le=T*se+_e*C,++We;continue}var St=D[ht+1]||p.font;St!==mt&&(i&&Re.push("font",St),n&&je.push("font",St),mt=St),$e=Math.max($e,U[nt]);var jt=[ze,Le+_e*q[nt]+T*(q[nt]-H[We]),.5*(C+$e)+Be];Le+=q[nt],i&&Re.push("strokeText",jt),n&&je.push("fillText",jt),++nt}return Array.prototype.push.apply(ie,Re),Array.prototype.push.apply(ie,je),this.labels_[o]=ye,ye},r.prototype.replayTextBackground_=function(e,t,n,i,o,l,c){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,o),e.lineTo.apply(e,t),l&&(this.alignFill_=l[2],this.fill_(e)),c&&(this.setStrokeStyle_(e,c),e.stroke())},r.prototype.calculateImageOrLabelDimensions_=function(e,t,n,i,o,l,c,p,g,_,x,T,C,D,F,O){c*=T[0],p*=T[1];var k=n-c,q=i-p,U=o+g>e?e-g:o,H=l+_>t?t-_:l,se=D[3]+U*T[0]+D[1],ie=D[0]+H*T[1]+D[2],ue=k-D[3],ve=q-D[0];(F||x!==0)&&(Bd[0]=ue,Ud[0]=ue,Bd[1]=ve,Of[1]=ve,Of[0]=ue+se,Lf[0]=Of[0],Lf[1]=ve+ie,Ud[1]=Lf[1]);var ye;return x!==0?(ye=Eo(Fi(),n,i,1,1,x,-n,-i),On(ye,Bd),On(ye,Of),On(ye,Lf),On(ye,Ud),Ba(Math.min(Bd[0],Of[0],Lf[0],Ud[0]),Math.min(Bd[1],Of[1],Lf[1],Ud[1]),Math.max(Bd[0],Of[0],Lf[0],Ud[0]),Math.max(Bd[1],Of[1],Lf[1],Ud[1]),ix)):Ba(Math.min(ue,ue+se),Math.min(ve,ve+ie),Math.max(ue,ue+se),Math.max(ve,ve+ie),ix),C&&(k=Math.round(k),q=Math.round(q)),{drawImageX:k,drawImageY:q,drawImageW:U,drawImageH:H,originX:g,originY:_,declutterBox:{minX:ix[0],minY:ix[1],maxX:ix[2],maxY:ix[3],value:O},canvasTransform:ye,scale:T}},r.prototype.replayImageOrLabel_=function(e,t,n,i,o,l,c){var p=!!(l||c),g=i.declutterBox,_=e.canvas,x=c?c[2]*i.scale[0]/2:0,T=g.minX-x<=_.width/t&&g.maxX+x>=0&&g.minY-x<=_.height/t&&g.maxY+x>=0;return T&&(p&&this.replayTextBackground_(e,Bd,Of,Lf,Ud,l,c),s4e(e,i.canvasTransform,o,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0},r.prototype.fill_=function(e){if(this.alignFill_){var t=On(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(t[0]%n,t[1]%n),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()},r.prototype.setStrokeStyle_=function(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.setLineDash&&(e.lineDashOffset=t[7],e.setLineDash(t[6]))},r.prototype.drawLabelWithPointPlacement_=function(e,t,n,i){var o=this.textStates[t],l=this.createLabel(e,t,i,n),c=this.strokeStates[n],p=this.pixelRatio,g=b4e(Array.isArray(e)?e[0]:e,o.textAlign||Fd),_=rx[o.textBaseline||nv],x=c&&c.lineWidth?c.lineWidth:0,T=l.width/p-2*o.scale[0],C=g*T+2*(.5-g)*x,D=_*l.height/p+2*(.5-_)*x;return{label:l,anchorX:C,anchorY:D}},r.prototype.execute_=function(e,t,n,i,o,l,c,p){var g;this.pixelCoordinates_&&ja(n,this.renderedTransform_)?g=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),g=hu(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),QFe(this.renderedTransform_,n));for(var _=0,x=i.length,T=0,C,D,F,O,k,q,U,H,se,ie,ue,ve,ye=0,ge=0,_e=null,Le=null,Re=this.coordinateCache_,je=this.viewRotation_,$e=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,Be={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:je},nt=this.instructions!=i||this.overlaps?0:200,We,mt,ht,_t;_<x;){var ze=i[_],St=ze[0];switch(St){case pr.BEGIN_GEOMETRY:We=ze[1],_t=ze[3],We.getGeometry()?c!==void 0&&!Ri(c,_t.getExtent())?_=ze[2]+1:++_:_=ze[2];break;case pr.BEGIN_PATH:ye>nt&&(this.fill_(e),ye=0),ge>nt&&(e.stroke(),ge=0),!ye&&!ge&&(e.beginPath(),O=NaN,k=NaN),++_;break;case pr.CIRCLE:T=ze[1];var jt=g[T],Fe=g[T+1],st=g[T+2],He=g[T+3],et=st-jt,it=He-Fe,at=Math.sqrt(et*et+it*it);e.moveTo(jt+at,Fe),e.arc(jt,Fe,at,0,2*Math.PI,!0),++_;break;case pr.CLOSE_PATH:e.closePath(),++_;break;case pr.CUSTOM:T=ze[1],C=ze[2];var Nt=ze[3],At=ze[4],Mt=ze.length==6?ze[5]:void 0;Be.geometry=Nt,Be.feature=We,_ in Re||(Re[_]=[]);var Ut=Re[_];Mt?Mt(g,T,C,2,Ut):(Ut[0]=g[T],Ut[1]=g[T+1],Ut.length=2),At(Ut,Be),++_;break;case pr.DRAW_IMAGE:T=ze[1],C=ze[2],H=ze[3],D=ze[4],F=ze[5];var Vt=ze[6],$t=ze[7],Lr=ze[8],yr=ze[9],ur=ze[10],cr=ze[11],hr=ze[12],dr=ze[13],an=ze[14],wn=ze[15];if(!H&&ze.length>=20){se=ze[19],ie=ze[20],ue=ze[21],ve=ze[22];var Ln=this.drawLabelWithPointPlacement_(se,ie,ue,ve);H=Ln.label,ze[3]=H;var Un=ze[23];D=(Ln.anchorX-Un)*this.pixelRatio,ze[4]=D;var di=ze[24];F=(Ln.anchorY-di)*this.pixelRatio,ze[5]=F,Vt=H.height,ze[6]=Vt,dr=H.width,ze[13]=dr}var Li=void 0;ze.length>25&&(Li=ze[25]);var ao=void 0,Qn=void 0,ri=void 0;ze.length>17?(ao=ze[16],Qn=ze[17],ri=ze[18]):(ao=Cf,Qn=!1,ri=!1),ur&&$e?cr+=je:!ur&&!$e&&(cr-=je);for(var so=0;T<C;T+=2)if(!(Li&&Li[so++]<dr/this.pixelRatio)){var qe=this.calculateImageOrLabelDimensions_(H.width,H.height,g[T],g[T+1],dr,Vt,D,F,Lr,yr,cr,hr,o,ao,Qn||ri,We),oe=[e,t,H,qe,$t,Qn?_e:null,ri?Le:null];if(p){if(an==="none")continue;if(an==="obstacle"){p.insert(qe.declutterBox);continue}else{var ne=void 0,Z=void 0;if(wn){var X=C-T;if(!wn[X]){wn[X]=oe;continue}if(ne=wn[X],delete wn[X],Z=x4e(ne),p.collides(Z))continue}if(p.collides(qe.declutterBox))continue;ne&&(p.insert(Z),this.replayImageOrLabel_.apply(this,ne)),p.insert(qe.declutterBox)}}this.replayImageOrLabel_.apply(this,oe)}++_;break;case pr.DRAW_CHARS:var he=ze[1],ee=ze[2],Ie=ze[3],xe=ze[4];ve=ze[5];var Ce=ze[6],Ne=ze[7],Me=ze[8];ue=ze[9];var Ge=ze[10];se=ze[11],ie=ze[12];var lt=[ze[13],ze[13]],gt=this.textStates[ie],Rt=gt.font,Xt=[gt.scale[0]*Ne,gt.scale[1]*Ne],Gt=void 0;Rt in this.widths_?Gt=this.widths_[Rt]:(Gt={},this.widths_[Rt]=Gt);var Ye=UD(g,he,ee,2),Fr=Math.abs(Xt[0])*GY(Rt,se,Gt);if(xe||Fr<=Ye){var Sr=this.textStates[ie].textAlign,Dr=(Ye-Fr)*rx[Sr],nr=_4e(g,he,ee,2,se,Dr,Ce,Math.abs(Xt[0]),GY,Rt,Gt,$e?0:this.viewRotation_);e:if(nr){var ot=[],Yt=void 0,mr=void 0,In=void 0,Zr=void 0,Dn=void 0;if(ue)for(Yt=0,mr=nr.length;Yt<mr;++Yt){Dn=nr[Yt],In=Dn[4],Zr=this.createLabel(In,ie,"",ue),D=Dn[2]+(Xt[0]<0?-Ge:Ge),F=Ie*Zr.height+(.5-Ie)*2*Ge*Xt[1]/Xt[0]-Me;var qe=this.calculateImageOrLabelDimensions_(Zr.width,Zr.height,Dn[0],Dn[1],Zr.width,Zr.height,D,F,0,0,Dn[3],lt,!1,Cf,!1,We);if(p&&p.collides(qe.declutterBox))break e;ot.push([e,t,Zr,qe,1,null,null])}if(ve)for(Yt=0,mr=nr.length;Yt<mr;++Yt){Dn=nr[Yt],In=Dn[4],Zr=this.createLabel(In,ie,ve,""),D=Dn[2],F=Ie*Zr.height-Me;var qe=this.calculateImageOrLabelDimensions_(Zr.width,Zr.height,Dn[0],Dn[1],Zr.width,Zr.height,D,F,0,0,Dn[3],lt,!1,Cf,!1,We);if(p&&p.collides(qe.declutterBox))break e;ot.push([e,t,Zr,qe,1,null,null])}p&&p.load(ot.map(x4e));for(var _r=0,vc=ot.length;_r<vc;++_r)this.replayImageOrLabel_.apply(this,ot[_r])}}++_;break;case pr.END_GEOMETRY:if(l!==void 0){We=ze[1];var yc=l(We,_t);if(yc)return yc}++_;break;case pr.FILL:nt?ye++:this.fill_(e),++_;break;case pr.MOVE_TO_LINE_TO:for(T=ze[1],C=ze[2],mt=g[T],ht=g[T+1],q=mt+.5|0,U=ht+.5|0,(q!==O||U!==k)&&(e.moveTo(mt,ht),O=q,k=U),T+=2;T<C;T+=2)mt=g[T],ht=g[T+1],q=mt+.5|0,U=ht+.5|0,(T==C-2||q!==O||U!==k)&&(e.lineTo(mt,ht),O=q,k=U);++_;break;case pr.SET_FILL_STYLE:_e=ze,this.alignFill_=ze[2],ye&&(this.fill_(e),ye=0,ge&&(e.stroke(),ge=0)),e.fillStyle=ze[1],++_;break;case pr.SET_STROKE_STYLE:Le=ze,ge&&(e.stroke(),ge=0),this.setStrokeStyle_(e,ze),++_;break;case pr.STROKE:nt?ge++:e.stroke(),++_;break;default:++_;break}}ye&&this.fill_(e),ge&&e.stroke()},r.prototype.execute=function(e,t,n,i,o,l){this.viewRotation_=i,this.execute_(e,t,n,this.instructions,o,void 0,void 0,l)},r.prototype.executeHitDetection=function(e,t,n,i,o){return this.viewRotation_=n,this.execute_(e,1,t,this.hitDetectionInstructions,!0,i,o)},r}(),w4e=Qnr;var KY=["Polygon","Circle","LineString","Image","Text","Default"],Jnr=function(){function r(e,t,n,i,o,l){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=l,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Fi(),this.createExecutors_(o)}return r.prototype.clip=function(e,t){var n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()},r.prototype.createExecutors_=function(e){for(var t in e){var n=this.executorsByZIndex_[t];n===void 0&&(n={},this.executorsByZIndex_[t]=n);var i=e[t];for(var o in i){var l=i[o];n[o]=new w4e(this.resolution_,this.pixelRatio_,this.overlaps_,l)}}},r.prototype.hasExecutors=function(e){for(var t in this.executorsByZIndex_)for(var n=this.executorsByZIndex_[t],i=0,o=e.length;i<o;++i)if(e[i]in n)return!0;return!1},r.prototype.forEachFeatureAtCoordinate=function(e,t,n,i,o,l){i=Math.round(i);var c=i*2+1,p=Eo(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-n,-e[0],-e[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=Oi(c,c));var _=this.hitDetectionContext_;_.canvas.width!==c||_.canvas.height!==c?(_.canvas.width=c,_.canvas.height=c):g||_.clearRect(0,0,c,c);var x;this.renderBuffer_!==void 0&&(x=zi(),Zg(x,e),oc(x,t*(this.renderBuffer_+i),x));var T=eir(i),C;function D(ie,ue){for(var ve=_.getImageData(0,0,c,c).data,ye=0,ge=T.length;ye<ge;ye++)if(ve[T[ye]]>0){if(!l||C!=="Image"&&C!=="Text"||l.indexOf(ie)!==-1){var _e=(T[ye]-3)/4,Le=i-_e%c,Re=i-(_e/c|0),je=o(ie,ue,Le*Le+Re*Re);if(je)return je}_.clearRect(0,0,c,c);break}}var F=Object.keys(this.executorsByZIndex_).map(Number);F.sort(xl);var O,k,q,U,H;for(O=F.length-1;O>=0;--O){var se=F[O].toString();for(q=this.executorsByZIndex_[se],k=KY.length-1;k>=0;--k)if(C=KY[k],U=q[C],U!==void 0&&(H=U.executeHitDetection(_,p,n,D,x),H))return H}},r.prototype.getClipCoords=function(e){var t=this.maxExtent_;if(!t)return null;var n=t[0],i=t[1],o=t[2],l=t[3],c=[n,i,n,l,o,l,o,i];return hu(c,0,8,2,e,c),c},r.prototype.isEmpty=function(){return nc(this.executorsByZIndex_)},r.prototype.execute=function(e,t,n,i,o,l,c){var p=Object.keys(this.executorsByZIndex_).map(Number);p.sort(xl),this.maxExtent_&&(e.save(),this.clip(e,n));var g=l||KY,_,x,T,C,D,F;for(c&&p.reverse(),_=0,x=p.length;_<x;++_){var O=p[_].toString();for(D=this.executorsByZIndex_[O],T=0,C=g.length;T<C;++T){var k=g[T];F=D[k],F!==void 0&&F.execute(e,t,n,i,o,c)}}this.maxExtent_&&e.restore()},r}(),XY={};function eir(r){if(XY[r]!==void 0)return XY[r];for(var e=r*2+1,t=r*r,n=new Array(t+1),i=0;i<=r;++i)for(var o=0;o<=r;++o){var l=i*i+o*o;if(l>t)break;var c=n[l];c||(c=[],n[l]=c),c.push(((r+i)*e+(r+o))*4+3),i>0&&c.push(((r-i)*e+(r+o))*4+3),o>0&&(c.push(((r+i)*e+(r-o))*4+3),i>0&&c.push(((r-i)*e+(r-o))*4+3))}for(var p=[],i=0,g=n.length;i<g;++i)n[i]&&p.push.apply(p,n[i]);return XY[r]=p,p}var QY=Jnr;var Bo={ANIMATING:0,INTERACTING:1};var tir=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rir=function(r){tir(e,r);function e(t,n,i,o,l,c,p){var g=r.call(this)||this;return g.context_=t,g.pixelRatio_=n,g.extent_=i,g.transform_=o,g.viewRotation_=l,g.squaredTolerance_=c,g.userTransform_=p,g.contextFillState_=null,g.contextStrokeState_=null,g.contextTextState_=null,g.fillState_=null,g.strokeState_=null,g.image_=null,g.imageAnchorX_=0,g.imageAnchorY_=0,g.imageHeight_=0,g.imageOpacity_=0,g.imageOriginX_=0,g.imageOriginY_=0,g.imageRotateWithView_=!1,g.imageRotation_=0,g.imageScale_=[0,0],g.imageWidth_=0,g.text_="",g.textOffsetX_=0,g.textOffsetY_=0,g.textRotateWithView_=!1,g.textRotation_=0,g.textScale_=[0,0],g.textFillState_=null,g.textStrokeState_=null,g.textState_=null,g.pixelCoordinates_=[],g.tmpLocalTransform_=Fi(),g}return e.prototype.drawImages_=function(t,n,i,o){if(this.image_){var l=hu(t,n,i,o,this.transform_,this.pixelCoordinates_),c=this.context_,p=this.tmpLocalTransform_,g=c.globalAlpha;this.imageOpacity_!=1&&(c.globalAlpha=g*this.imageOpacity_);var _=this.imageRotation_;this.imageRotateWithView_&&(_+=this.viewRotation_);for(var x=0,T=l.length;x<T;x+=2){var C=l[x]-this.imageAnchorX_,D=l[x+1]-this.imageAnchorY_;if(_!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){var F=C+this.imageAnchorX_,O=D+this.imageAnchorY_;Eo(p,F,O,1,1,_,-F,-O),c.setTransform.apply(c,p),c.translate(F,O),c.scale(this.imageScale_[0],this.imageScale_[1]),c.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),c.setTransform(1,0,0,1,0,0)}else c.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,C,D,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(c.globalAlpha=g)}},e.prototype.drawText_=function(t,n,i,o){if(!(!this.textState_||this.text_==="")){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var l=hu(t,n,i,o,this.transform_,this.pixelCoordinates_),c=this.context_,p=this.textRotation_;for(this.textRotateWithView_&&(p+=this.viewRotation_);n<i;n+=o){var g=l[n]+this.textOffsetX_,_=l[n+1]+this.textOffsetY_;if(p!==0||this.textScale_[0]!=1||this.textScale_[1]!=1){var x=Eo(this.tmpLocalTransform_,g,_,1,1,p,-g,-_);c.setTransform.apply(c,x),c.translate(g,_),c.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&c.strokeText(this.text_,0,0),this.textFillState_&&c.fillText(this.text_,0,0),c.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&c.strokeText(this.text_,g,_),this.textFillState_&&c.fillText(this.text_,g,_)}}},e.prototype.moveToLineTo_=function(t,n,i,o,l){var c=this.context_,p=hu(t,n,i,o,this.transform_,this.pixelCoordinates_);c.moveTo(p[0],p[1]);var g=p.length;l&&(g-=2);for(var _=2;_<g;_+=2)c.lineTo(p[_],p[_+1]);return l&&c.closePath(),i},e.prototype.drawRings_=function(t,n,i,o){for(var l=0,c=i.length;l<c;++l)n=this.moveToLineTo_(t,n,i[l],o,!0);return n},e.prototype.drawCircle=function(t){if(Ri(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=Rze(t,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],o=n[3]-n[1],l=Math.sqrt(i*i+o*o),c=this.context_;c.beginPath(),c.arc(n[0],n[1],l,0,2*Math.PI),this.fillState_&&c.fill(),this.strokeState_&&c.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){var n=t.getType();switch(n){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break;default:}},e.prototype.drawFeature=function(t,n){var i=n.getGeometryFunction()(t);!i||!Ri(this.extent_,i.getExtent())||(this.setStyle(n),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var n=t.getGeometriesArray(),i=0,o=n.length;i<o;++i)this.drawGeometry(n[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ri(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=t.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),n.stroke()}if(this.text_!==""){var o=t.getFlatMidpoint();this.drawText_(o,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=t.getExtent();if(Ri(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,o=t.getFlatCoordinates(),l=0,c=t.getEnds(),p=t.getStride();i.beginPath();for(var g=0,_=c.length;g<_;++g)l=this.moveToLineTo_(o,l,c[g],p,!1);i.stroke()}if(this.text_!==""){var x=t.getFlatMidpoints();this.drawText_(x,0,x.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ri(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_;n.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ri(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=t.getOrientedFlatCoordinates(),o=0,l=t.getEndss(),c=t.getStride();n.beginPath();for(var p=0,g=l.length;p<g;++p){var _=l[p];o=this.drawRings_(i,o,_,c)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){var x=t.getFlatInteriorPoints();this.drawText_(x,0,x.length,2)}}},e.prototype.setContextFillState_=function(t){var n=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),n.setLineDash&&(ja(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var n=this.context_,i=this.contextTextState_,o=t.textAlign?t.textAlign:Fd;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=o&&(i.textAlign=o,n.textAlign=o),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=o,n.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:o,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,n){var i=this;if(!t)this.fillState_=null;else{var o=t.getColor();this.fillState_={fillStyle:Xs(o||Qs)}}if(!n)this.strokeState_=null;else{var l=n.getColor(),c=n.getLineCap(),p=n.getLineDash(),g=n.getLineDashOffset(),_=n.getLineJoin(),x=n.getWidth(),T=n.getMiterLimit(),C=p||Tf;this.strokeState_={lineCap:c!==void 0?c:rv,lineDash:this.pixelRatio_===1?C:C.map(function(D){return D*i.pixelRatio_}),lineDashOffset:(g||If)*this.pixelRatio_,lineJoin:_!==void 0?_:sh,lineWidth:(x!==void 0?x:Pf)*this.pixelRatio_,miterLimit:T!==void 0?T:Mf,strokeStyle:Xs(l||Af)}}},e.prototype.setImageStyle=function(t){var n;if(!t||!(n=t.getSize())){this.image_=null;return}var i=t.getAnchor(),o=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*this.pixelRatio_,this.imageAnchorY_=i[1]*this.pixelRatio_,this.imageHeight_=n[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=n[0]*this.pixelRatio_},e.prototype.setTextStyle=function(t){if(!t)this.text_="";else{var n=t.getFill();if(!n)this.textFillState_=null;else{var i=n.getColor();this.textFillState_={fillStyle:Xs(i||Qs)}}var o=t.getStroke();if(!o)this.textStrokeState_=null;else{var l=o.getColor(),c=o.getLineCap(),p=o.getLineDash(),g=o.getLineDashOffset(),_=o.getLineJoin(),x=o.getWidth(),T=o.getMiterLimit();this.textStrokeState_={lineCap:c!==void 0?c:rv,lineDash:p||Tf,lineDashOffset:g||If,lineJoin:_!==void 0?_:sh,lineWidth:x!==void 0?x:Pf,miterLimit:T!==void 0?T:Mf,strokeStyle:Xs(l||Af)}}var C=t.getFont(),D=t.getOffsetX(),F=t.getOffsetY(),O=t.getRotateWithView(),k=t.getRotation(),q=t.getScaleArray(),U=t.getText(),H=t.getTextAlign(),se=t.getTextBaseline();this.textState_={font:C!==void 0?C:JD,textAlign:H!==void 0?H:Fd,textBaseline:se!==void 0?se:nv},this.text_=U!==void 0?Array.isArray(U)?U.reduce(function(ie,ue,ve){return ie+=ve%2?" ":ue},""):U:"",this.textOffsetX_=D!==void 0?this.pixelRatio_*D:0,this.textOffsetY_=F!==void 0?this.pixelRatio_*F:0,this.textRotateWithView_=O!==void 0?O:!1,this.textRotation_=k!==void 0?k:0,this.textScale_=[this.pixelRatio_*q[0],this.pixelRatio_*q[1]]}},e}(tN),E4e=rir;var ch={FRACTION:"fraction",PIXELS:"pixels"};var Tl={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};var nir=function(){function r(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return r.prototype.clear=function(){this.cache_={},this.cacheSize_=0},r.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},r.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var n=this.cache_[t];(e++&3)===0&&!n.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}},r.prototype.get=function(e,t,n){var i=S4e(e,t,n);return i in this.cache_?this.cache_[i]:null},r.prototype.set=function(e,t,n,i){var o=S4e(e,t,n);this.cache_[o]=i,++this.cacheSize_},r.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},r}();function S4e(r,e,t){var n=t?KD(t):"null";return e+":"+r+":"+n}var ox=new nir;var iir=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),oir=function(r){iir(e,r);function e(t,n,i,o){var l=r.call(this)||this;return l.extent=t,l.pixelRatio_=i,l.resolution=n,l.state=o,l}return e.prototype.changed=function(){this.dispatchEvent(qt.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return rr()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){rr()},e}(Zs),T4e=oir;var air=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fHr=function(r){air(e,r);function e(t,n,i,o,l,c){var p=r.call(this,t,n,i,bn.IDLE)||this;return p.src_=o,p.image_=new Image,l!==null&&(p.image_.crossOrigin=l),p.unlisten_=null,p.state=bn.IDLE,p.imageLoadFunction_=c,p}return e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=bn.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=Fo(this.extent)/this.image_.height),this.state=bn.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){(this.state==bn.IDLE||this.state==bn.ERROR)&&(this.state=bn.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=RT(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=Fo(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(T4e);function RT(r,e,t){var n=r,i=!0,o=!1,l=!1,c=[q0(n,qt.LOAD,function(){l=!0,o||e()})];return n.src&&KFe?(o=!0,n.decode().then(function(){i&&e()}).catch(function(p){i&&(l?e():t())})):c.push(q0(n,qt.ERROR,t)),function(){i=!1,c.forEach(Qr)}}var sir=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),OT=null,lir=function(r){sir(e,r);function e(t,n,i,o,l,c){var p=r.call(this)||this;return p.hitDetectionImage_=null,p.image_=t||new Image,o!==null&&(p.image_.crossOrigin=o),p.canvas_={},p.color_=c,p.unlisten_=null,p.imageState_=l,p.size_=i,p.src_=n,p.tainted_,p}return e.prototype.isTainted_=function(){if(this.tainted_===void 0&&this.imageState_===bn.LOADED){OT||(OT=Oi(1,1)),OT.drawImage(this.image_,0,0);try{OT.getImageData(0,0,1,1),this.tainted_=!1}catch(t){OT=null,this.tainted_=!0}}return this.tainted_===!0},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(qt.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=bn.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=bn.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],n=this.size_[1],i=Oi(t,n);i.fillRect(0,0,t,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==bn.IDLE){this.imageState_=bn.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=RT(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(!(!this.color_||this.canvas_[t]||this.imageState_!==bn.LOADED)){var n=document.createElement("canvas");this.canvas_[t]=n,n.width=Math.ceil(this.image_.width*t),n.height=Math.ceil(this.image_.height*t);var i=n.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),i.globalCompositeOperation="multiply",i.globalCompositeOperation==="multiply"||this.isTainted_())i.fillStyle=KD(this.color_),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(this.image_,0,0);else{for(var o=i.getImageData(0,0,n.width,n.height),l=o.data,c=this.color_[0]/255,p=this.color_[1]/255,g=this.color_[2]/255,_=this.color_[3],x=0,T=l.length;x<T;x+=4)l[x]*=c,l[x+1]*=p,l[x+2]*=g,l[x+3]*=_;i.putImageData(o,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Zs);function I4e(r,e,t,n,i,o){var l=ox.get(e,n,o);return l||(l=new lir(r,e,t,n,i,o),ox.set(e,n,o,l)),l}var uir=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cir=function(r){uir(e,r);function e(t){var n=this,i=t||{},o=i.opacity!==void 0?i.opacity:1,l=i.rotation!==void 0?i.rotation:0,c=i.scale!==void 0?i.scale:1,p=i.rotateWithView!==void 0?i.rotateWithView:!1;n=r.call(this,{opacity:o,rotation:l,scale:c,displacement:i.displacement!==void 0?i.displacement:[0,0],rotateWithView:p,declutterMode:i.declutterMode})||this,n.anchor_=i.anchor!==void 0?i.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=i.anchorOrigin!==void 0?i.anchorOrigin:Tl.TOP_LEFT,n.anchorXUnits_=i.anchorXUnits!==void 0?i.anchorXUnits:ch.FRACTION,n.anchorYUnits_=i.anchorYUnits!==void 0?i.anchorYUnits:ch.FRACTION,n.crossOrigin_=i.crossOrigin!==void 0?i.crossOrigin:null;var g=i.img!==void 0?i.img:null;n.imgSize_=i.imgSize;var _=i.src;ir(!(_!==void 0&&g),4),ir(!g||g&&n.imgSize_,5),(_===void 0||_.length===0)&&g&&(_=g.src||Jt(g)),ir(_!==void 0&&_.length>0,6);var x=i.src!==void 0?bn.IDLE:bn.LOADED;return n.color_=i.color!==void 0?Sf(i.color):null,n.iconImage_=I4e(g,_,n.imgSize_!==void 0?n.imgSize_:null,n.crossOrigin_,x,n.color_),n.offset_=i.offset!==void 0?i.offset:[0,0],n.offsetOrigin_=i.offsetOrigin!==void 0?i.offsetOrigin:Tl.TOP_LEFT,n.origin_=null,n.size_=i.size!==void 0?i.size:null,n}return e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},e.prototype.getAnchor=function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var n=this.getSize();if(this.anchorXUnits_==ch.FRACTION||this.anchorYUnits_==ch.FRACTION){if(!n)return null;t=this.anchor_.slice(),this.anchorXUnits_==ch.FRACTION&&(t[0]*=n[0]),this.anchorYUnits_==ch.FRACTION&&(t[1]*=n[1])}if(this.anchorOrigin_!=Tl.TOP_LEFT){if(!n)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_==Tl.TOP_RIGHT||this.anchorOrigin_==Tl.BOTTOM_RIGHT)&&(t[0]=-t[0]+n[0]),(this.anchorOrigin_==Tl.BOTTOM_LEFT||this.anchorOrigin_==Tl.BOTTOM_RIGHT)&&(t[1]=-t[1]+n[1])}this.normalizedAnchor_=t}var i=this.getDisplacement();return[t[0]-i[0],t[1]+i[1]]},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=Tl.TOP_LEFT){var n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;t=t.slice(),(this.offsetOrigin_==Tl.TOP_RIGHT||this.offsetOrigin_==Tl.BOTTOM_RIGHT)&&(t[0]=i[0]-n[0]-t[0]),(this.offsetOrigin_==Tl.BOTTOM_LEFT||this.offsetOrigin_==Tl.BOTTOM_RIGHT)&&(t[1]=i[1]-n[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(qt.CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(qt.CHANGE,t)},e}(YD),JY=cir;var hir="#333",fir=function(){function r(e){var t=e||{};this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=zn(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Sl({color:hir}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:rN.POINT,this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}return r.prototype.clone=function(){var e=this.getScale();return new r({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})},r.prototype.getOverflow=function(){return this.overflow_},r.prototype.getFont=function(){return this.font_},r.prototype.getMaxAngle=function(){return this.maxAngle_},r.prototype.getPlacement=function(){return this.placement_},r.prototype.getOffsetX=function(){return this.offsetX_},r.prototype.getOffsetY=function(){return this.offsetY_},r.prototype.getFill=function(){return this.fill_},r.prototype.getRotateWithView=function(){return this.rotateWithView_},r.prototype.getRotation=function(){return this.rotation_},r.prototype.getScale=function(){return this.scale_},r.prototype.getScaleArray=function(){return this.scaleArray_},r.prototype.getStroke=function(){return this.stroke_},r.prototype.getText=function(){return this.text_},r.prototype.getTextAlign=function(){return this.textAlign_},r.prototype.getJustify=function(){return this.justify_},r.prototype.getTextBaseline=function(){return this.textBaseline_},r.prototype.getBackgroundFill=function(){return this.backgroundFill_},r.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},r.prototype.getPadding=function(){return this.padding_},r.prototype.setOverflow=function(e){this.overflow_=e},r.prototype.setFont=function(e){this.font_=e},r.prototype.setMaxAngle=function(e){this.maxAngle_=e},r.prototype.setOffsetX=function(e){this.offsetX_=e},r.prototype.setOffsetY=function(e){this.offsetY_=e},r.prototype.setPlacement=function(e){this.placement_=e},r.prototype.setRotateWithView=function(e){this.rotateWithView_=e},r.prototype.setFill=function(e){this.fill_=e},r.prototype.setRotation=function(e){this.rotation_=e},r.prototype.setScale=function(e){this.scale_=e,this.scaleArray_=zn(e!==void 0?e:1)},r.prototype.setStroke=function(e){this.stroke_=e},r.prototype.setText=function(e){this.text_=e},r.prototype.setTextAlign=function(e){this.textAlign_=e},r.prototype.setJustify=function(e){this.justify_=e},r.prototype.setTextBaseline=function(e){this.textBaseline_=e},r.prototype.setBackgroundFill=function(e){this.backgroundFill_=e},r.prototype.setBackgroundStroke=function(e){this.backgroundStroke_=e},r.prototype.setPadding=function(e){this.padding_=e},r}(),e9=fir;var hc=.5;function M4e(r,e,t,n,i,o,l){var c=r[0]*hc,p=r[1]*hc,g=Oi(c,p);g.imageSmoothingEnabled=!1;for(var _=g.canvas,x=new E4e(g,hc,i,null,l),T=t.length,C=Math.floor((256*256*256-1)/T),D={},F=1;F<=T;++F){var O=t[F-1],k=O.getStyleFunction()||n;if(n){var q=k(O,o);if(q){Array.isArray(q)||(q=[q]);for(var U=F*C,H="#"+("000000"+U.toString(16)).slice(-6),se=0,ie=q.length;se<ie;++se){var ue=q[se],ve=ue.getGeometryFunction()(O);if(!(!ve||!Ri(i,ve.getExtent()))){var ye=ue.clone(),ge=ye.getFill();ge&&ge.setColor(H);var _e=ye.getStroke();_e&&(_e.setColor(H),_e.setLineDash(null)),ye.setText(void 0);var Le=ue.getImage();if(Le&&Le.getOpacity()!==0){var Re=Le.getImageSize();if(!Re)continue;var je=Oi(Re[0],Re[1],void 0,{alpha:!1}),$e=je.canvas;je.fillStyle=H,je.fillRect(0,0,$e.width,$e.height),ye.setImage(new JY({img:$e,imgSize:Re,anchor:Le.getAnchor(),anchorXUnits:ch.PIXELS,anchorYUnits:ch.PIXELS,offset:Le.getOrigin(),opacity:1,size:Le.getSize(),scale:Le.getScale(),rotation:Le.getRotation(),rotateWithView:Le.getRotateWithView()}))}var Be=ye.getZIndex()||0,nt=D[Be];nt||(nt={},D[Be]=nt,nt.Polygon=[],nt.Circle=[],nt.LineString=[],nt.Point=[]),nt[ve.getType().replace("Multi","")].push(ve,ye)}}}}}for(var We=Object.keys(D).map(Number).sort(xl),F=0,mt=We.length;F<mt;++F){var nt=D[We[F]];for(var ht in nt)for(var _t=nt[ht],se=0,ie=_t.length;se<ie;se+=2){x.setStyle(_t[se+1]);for(var ze=0,St=e.length;ze<St;++ze)x.setTransform(e[ze]),x.drawGeometry(_t[se])}}return g.getImageData(0,0,_.width,_.height)}function A4e(r,e,t){var n=[];if(t){var i=Math.floor(Math.round(r[0])*hc),o=Math.floor(Math.round(r[1])*hc),l=(jn(i,0,t.width-1)+jn(o,0,t.height-1)*t.width)*4,c=t.data[l],p=t.data[l+1],g=t.data[l+2],_=g+256*(p+256*c),x=Math.floor((256*256*256-1)/e.length);_&&_%x===0&&n.push(e[_/x-1])}return n}var pir=.5,C4e={Point:xir,LineString:vir,Polygon:wir,MultiPoint:bir,MultiLineString:yir,MultiPolygon:_ir,GeometryCollection:gir,Circle:dir};function P4e(r,e){return parseInt(Jt(r),10)-parseInt(Jt(e),10)}function R4e(r,e){var t=oN(r,e);return t*t}function oN(r,e){return pir*r/e}function dir(r,e,t,n,i){var o=t.getFill(),l=t.getStroke();if(o||l){var c=r.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(o,l),c.drawCircle(e,n)}var p=t.getText();if(p&&p.getText()){var g=(i||r).getBuilder(t.getZIndex(),"Text");g.setTextStyle(p),g.drawText(e,n)}}function t9(r,e,t,n,i,o,l){var c=!1,p=t.getImage();if(p){var g=p.getImageState();g==bn.LOADED||g==bn.ERROR?p.unlistenImageChange(i):(g==bn.IDLE&&p.load(),p.listenImageChange(i),c=!0)}return mir(r,e,t,n,o,l),c}function mir(r,e,t,n,i,o){var l=t.getGeometryFunction()(e);if(l){var c=l.simplifyTransformed(n,i),p=t.getRenderer();if(p)O4e(r,c,t,e);else{var g=C4e[c.getType()];g(r,c,t,e,o)}}}function O4e(r,e,t,n){if(e.getType()=="GeometryCollection"){for(var i=e.getGeometries(),o=0,l=i.length;o<l;++o)O4e(r,i[o],t,n);return}var c=r.getBuilder(t.getZIndex(),"Default");c.drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer())}function gir(r,e,t,n,i){var o=e.getGeometriesArray(),l,c;for(l=0,c=o.length;l<c;++l){var p=C4e[o[l].getType()];p(r,o[l],t,n,i)}}function vir(r,e,t,n,i){var o=t.getStroke();if(o){var l=r.getBuilder(t.getZIndex(),"LineString");l.setFillStrokeStyle(null,o),l.drawLineString(e,n)}var c=t.getText();if(c&&c.getText()){var p=(i||r).getBuilder(t.getZIndex(),"Text");p.setTextStyle(c),p.drawText(e,n)}}function yir(r,e,t,n,i){var o=t.getStroke();if(o){var l=r.getBuilder(t.getZIndex(),"LineString");l.setFillStrokeStyle(null,o),l.drawMultiLineString(e,n)}var c=t.getText();if(c&&c.getText()){var p=(i||r).getBuilder(t.getZIndex(),"Text");p.setTextStyle(c),p.drawText(e,n)}}function _ir(r,e,t,n,i){var o=t.getFill(),l=t.getStroke();if(l||o){var c=r.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,l),c.drawMultiPolygon(e,n)}var p=t.getText();if(p&&p.getText()){var g=(i||r).getBuilder(t.getZIndex(),"Text");g.setTextStyle(p),g.drawText(e,n)}}function xir(r,e,t,n,i){var o=t.getImage(),l=t.getText(),c;if(o){if(o.getImageState()!=bn.LOADED)return;var p=r;if(i){var g=o.getDeclutterMode();if(g!=="none")if(p=i,g==="obstacle"){var _=r.getBuilder(t.getZIndex(),"Image");_.setImageStyle(o,c),_.drawPoint(e,n)}else l&&l.getText()&&(c={})}var x=p.getBuilder(t.getZIndex(),"Image");x.setImageStyle(o,c),x.drawPoint(e,n)}if(l&&l.getText()){var T=r;i&&(T=i);var C=T.getBuilder(t.getZIndex(),"Text");C.setTextStyle(l,c),C.drawText(e,n)}}function bir(r,e,t,n,i){var o=t.getImage(),l=t.getText(),c;if(o){if(o.getImageState()!=bn.LOADED)return;var p=r;if(i){var g=o.getDeclutterMode();if(g!=="none")if(p=i,g==="obstacle"){var _=r.getBuilder(t.getZIndex(),"Image");_.setImageStyle(o,c),_.drawMultiPoint(e,n)}else l&&l.getText()&&(c={})}var x=p.getBuilder(t.getZIndex(),"Image");x.setImageStyle(o,c),x.drawMultiPoint(e,n)}if(l&&l.getText()){var T=r;i&&(T=i);var C=T.getBuilder(t.getZIndex(),"Text");C.setTextStyle(l,c),C.drawText(e,n)}}function wir(r,e,t,n,i){var o=t.getFill(),l=t.getStroke();if(o||l){var c=r.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,l),c.drawPolygon(e,n)}var p=t.getText();if(p&&p.getText()){var g=(i||r).getBuilder(t.getZIndex(),"Text");g.setTextStyle(p),g.drawText(e,n)}}var Eir=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sir=function(r){Eir(e,r);function e(t){var n=r.call(this,t)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.animatingOrInteracting_,n.hitDetectionImageData_=null,n.renderedFeatures_=null,n.renderedRevision_=-1,n.renderedResolution_=NaN,n.renderedExtent_=zi(),n.wrappedRenderedExtent_=zi(),n.renderedRotation_,n.renderedCenter_=null,n.renderedProjection_=null,n.renderedRenderOrder_=null,n.replayGroup_=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n.compositionContext_=null,n.opacity_=1,n}return e.prototype.renderWorlds=function(t,n,i){var o=n.extent,l=n.viewState,c=l.center,p=l.resolution,g=l.projection,_=l.rotation,x=g.getExtent(),T=this.getLayer().getSource(),C=n.pixelRatio,D=n.viewHints,F=!(D[Bo.ANIMATING]||D[Bo.INTERACTING]),O=this.compositionContext_,k=Math.round(n.size[0]*C),q=Math.round(n.size[1]*C),U=T.getWrapX()&&g.canWrapX(),H=U?fn(x):null,se=U?Math.ceil((o[2]-x[2])/H)+1:1,ie=U?Math.floor((o[0]-x[0])/H):0;do{var ue=this.getRenderTransform(c,p,_,C,k,q,ie*H);t.execute(O,1,ue,_,F,void 0,i)}while(++ie<se)},e.prototype.setupCompositionContext_=function(){if(this.opacity_!==1){var t=Oi(this.context.canvas.width,this.context.canvas.height,YY);this.compositionContext_=t}else this.compositionContext_=this.context},e.prototype.releaseCompositionContext_=function(){if(this.opacity_!==1){var t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,XD(this.compositionContext_),YY.push(this.compositionContext_.canvas),this.compositionContext_=null}},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())},e.prototype.renderFrame=function(t,n){var i=t.pixelRatio,o=t.layerStatesArray[t.layerIndex];JFe(this.pixelTransform,1/i,1/i),F0(this.inversePixelTransform,this.pixelTransform);var l=SD(this.pixelTransform);this.useContainer(n,l,this.getBackground(t));var c=this.context,p=c.canvas,g=this.replayGroup_,_=this.declutterExecutorGroup;if((!g||g.isEmpty())&&(!_||_.isEmpty()))return null;var x=Math.round(t.size[0]*i),T=Math.round(t.size[1]*i);p.width!=x||p.height!=T?(p.width=x,p.height=T,p.style.transform!==l&&(p.style.transform=l)):this.containerReused||c.clearRect(0,0,x,T),this.preRender(c,t);var C=t.viewState,D=C.projection;this.opacity_=o.opacity,this.setupCompositionContext_();var F=!1,O=!0;if(o.extent&&this.clipping){var k=Ua(o.extent,D);O=Ri(k,t.extent),F=O&&!bf(k,t.extent),F&&this.clipUnrotated(this.compositionContext_,t,k)}return O&&this.renderWorlds(g,t),F&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(c,t),this.renderedRotation_!==C.rotation&&(this.renderedRotation_=C.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(n){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var i=[this.context.canvas.width,this.context.canvas.height];On(this.pixelTransform,i);var o=this.renderedCenter_,l=this.renderedResolution_,c=this.renderedRotation_,p=this.renderedProjection_,g=this.wrappedRenderedExtent_,_=this.getLayer(),x=[],T=i[0]*hc,C=i[1]*hc;x.push(this.getRenderTransform(o,l,c,hc,T,C,0).slice());var D=_.getSource(),F=p.getExtent();if(D.getWrapX()&&p.canWrapX()&&!bf(F,g)){for(var O=g[0],k=fn(F),q=0,U=void 0;O<F[0];)--q,U=k*q,x.push(this.getRenderTransform(o,l,c,hc,T,C,U).slice()),O+=k;for(q=0,O=g[2];O>F[2];)++q,U=k*q,x.push(this.getRenderTransform(o,l,c,hc,T,C,U).slice()),O-=k}this.hitDetectionImageData_=M4e(i,x,this.renderedFeatures_,_.getStyleFunction(),g,l,c)}n(A4e(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,n,i,o,l){var c=this;if(this.replayGroup_){var p=n.viewState.resolution,g=n.viewState.rotation,_=this.getLayer(),x={},T=function(F,O,k){var q=Jt(F),U=x[q];if(U){if(U!==!0&&k<U.distanceSq){if(k===0)return x[q]=!0,l.splice(l.lastIndexOf(U),1),o(F,_,O);U.geometry=O,U.distanceSq=k}}else{if(k===0)return x[q]=!0,o(F,_,O);l.push(x[q]={feature:F,layer:_,geometry:O,distanceSq:k,callback:o})}},C,D=[this.replayGroup_];return this.declutterExecutorGroup&&D.push(this.declutterExecutorGroup),D.some(function(F){return C=F.forEachFeatureAtCoordinate(t,p,g,i,T,F===c.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(function(O){return O.value}):null)}),C}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var n=this.getLayer(),i=n.getSource();if(!i)return!1;var o=t.viewHints[Bo.ANIMATING],l=t.viewHints[Bo.INTERACTING],c=n.getUpdateWhileAnimating(),p=n.getUpdateWhileInteracting();if(this.ready&&!c&&o||!p&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var g=t.extent,_=t.viewState,x=_.projection,T=_.resolution,C=t.pixelRatio,D=n.getRevision(),F=n.getRenderBuffer(),O=n.getRenderOrder();O===void 0&&(O=P4e);var k=_.center.slice(),q=oc(g,F*T),U=q.slice(),H=[q.slice()],se=x.getExtent();if(i.getWrapX()&&x.canWrapX()&&!bf(se,t.extent)){var ie=fn(se),ue=Math.max(fn(q)/2,ie);q[0]=se[0]-ue,q[2]=se[2]+ue,LD(k,x);var ve=uY(H[0],x);ve[0]<se[0]&&ve[2]<se[2]?H.push([ve[0]+ie,ve[1],ve[2]+ie,ve[3]]):ve[0]>se[0]&&ve[2]>se[2]&&H.push([ve[0]-ie,ve[1],ve[2]-ie,ve[3]])}if(this.ready&&this.renderedResolution_==T&&this.renderedRevision_==D&&this.renderedRenderOrder_==O&&bf(this.wrappedRenderedExtent_,q))return ja(this.renderedExtent_,U)||(this.hitDetectionImageData_=null,this.renderedExtent_=U),this.renderedCenter_=k,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var ye=new ZY(oN(T,C),q,T,C),ge;this.getLayer().getDeclutter()&&(ge=new ZY(oN(T,C),q,T,C));var _e=cu(),Le;if(_e){for(var Re=0,je=H.length;Re<je;++Re){var $e=H[Re],Be=Nd($e,x);i.loadFeatures(Be,Sze(T,x),_e)}Le=dT(_e,x)}else for(var Re=0,je=H.length;Re<je;++Re)i.loadFeatures(H[Re],T,x);var nt=R4e(T,C),We=!0,mt=function(jt){var Fe,st=jt.getStyleFunction()||n.getStyleFunction();if(st&&(Fe=st(jt,T)),Fe){var He=this.renderFeature(jt,nt,Fe,ye,Le,ge);We=We&&!He}}.bind(this),ht=Nd(q,x),_t=i.getFeaturesInExtent(ht);O&&_t.sort(O);for(var Re=0,je=_t.length;Re<je;++Re)mt(_t[Re]);this.renderedFeatures_=_t,this.ready=We;var ze=ye.finish(),St=new QY(q,T,C,i.getOverlaps(),ze,n.getRenderBuffer());return ge&&(this.declutterExecutorGroup=new QY(q,T,C,i.getOverlaps(),ge.finish(),n.getRenderBuffer())),this.renderedResolution_=T,this.renderedRevision_=D,this.renderedRenderOrder_=O,this.renderedExtent_=U,this.wrappedRenderedExtent_=q,this.renderedCenter_=k,this.renderedProjection_=x,this.replayGroup_=St,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,n,i,o,l,c){if(!i)return!1;var p=!1;if(Array.isArray(i))for(var g=0,_=i.length;g<_;++g)p=t9(o,t,i[g],n,this.boundHandleStyleImageChange_,l,c)||p;else p=t9(o,t,i,n,this.boundHandleStyleImageChange_,l,c);return p},e}(iN),L4e=Sir;var Tir=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Iir=function(r){Tir(e,r);function e(t){return r.call(this,t)||this}return e.prototype.createRenderer=function(){return new L4e(this)},e}(d4e),du=Iir;var D4e=ke(DY(),1);var Mir=function(){function r(e){this.rbush_=new D4e.default(e),this.items_={}}return r.prototype.insert=function(e,t){var n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[Jt(t)]=n},r.prototype.load=function(e,t){for(var n=new Array(t.length),i=0,o=t.length;i<o;i++){var l=e[i],c=t[i],p={minX:l[0],minY:l[1],maxX:l[2],maxY:l[3],value:c};n[i]=p,this.items_[Jt(c)]=p}this.rbush_.load(n)},r.prototype.remove=function(e){var t=Jt(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null},r.prototype.update=function(e,t){var n=this.items_[Jt(t)],i=[n.minX,n.minY,n.maxX,n.maxY];wf(i,e)||(this.remove(t),this.insert(e,t))},r.prototype.getAll=function(){var e=this.rbush_.all();return e.map(function(t){return t.value})},r.prototype.getInExtent=function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]},n=this.rbush_.search(t);return n.map(function(i){return i.value})},r.prototype.forEach=function(e){return this.forEach_(this.getAll(),e)},r.prototype.forEachInExtent=function(e,t){return this.forEach_(this.getInExtent(e),t)},r.prototype.forEach_=function(e,t){for(var n,i=0,o=e.length;i<o;i++)if(n=t(e[i]),n)return n;return n},r.prototype.isEmpty=function(){return nc(this.items_)},r.prototype.clear=function(){this.rbush_.clear(),this.items_={}},r.prototype.getExtent=function(e){var t=this.rbush_.toJSON();return Ba(t.minX,t.minY,t.maxX,t.maxY,e)},r.prototype.concat=function(e){this.rbush_.load(e.rbush_.all());for(var t in e.items_)this.items_[t]=e.items_[t]},r}(),LT=Mir;var Air=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Cir=function(r){Air(e,r);function e(t){var n=r.call(this)||this;n.projection=Xn(t.projection),n.attributions_=N4e(t.attributions),n.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,n.loading=!1,n.state_=t.state!==void 0?t.state:"ready",n.wrapX_=t.wrapX!==void 0?t.wrapX:!1,n.interpolate_=!!t.interpolate,n.viewResolver=null,n.viewRejector=null;var i=n;return n.viewPromise_=new Promise(function(o,l){i.viewResolver=o,i.viewRejector=l}),n}return e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return rr()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getInterpolate=function(){return this.interpolate_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=N4e(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(wo);function N4e(r){return r?Array.isArray(r)?function(e){return r}:typeof r=="function"?r:function(e){return[r]}:null}var aN=Cir;var ms={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function k4e(r,e){return[[-1/0,-1/0,1/0,1/0]]}var Pir=!1;function Rir(r,e,t,n,i,o,l){var c=new XMLHttpRequest;c.open("GET",typeof r=="function"?r(t,n,i):r,!0),e.getType()=="arraybuffer"&&(c.responseType="arraybuffer"),c.withCredentials=Pir,c.onload=function(p){if(!c.status||c.status>=200&&c.status<300){var g=e.getType(),_=void 0;g=="json"||g=="text"?_=c.responseText:g=="xml"?(_=c.responseXML,_||(_=new DOMParser().parseFromString(c.responseText,"application/xml"))):g=="arraybuffer"&&(_=c.response),_?o(e.readFeatures(_,{extent:t,featureProjection:i}),e.readProjection(_)):l()}else l()},c.onerror=l,c.send()}function r9(r,e){return function(t,n,i,o,l){var c=this;Rir(r,e,t,n,i,function(p,g){c.addFeatures(p),o!==void 0&&o(p)},l||bl)}}var q4e=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vd=function(r){q4e(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.feature=n,o.features=i,o}return e}(Pi);var Oir=function(r){q4e(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{attributions:i.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:i.wrapX!==void 0?i.wrapX:!0})||this,n.on,n.once,n.un,n.loader_=bl,n.format_=i.format,n.overlaps_=i.overlaps===void 0?!0:i.overlaps,n.url_=i.url,i.loader!==void 0?n.loader_=i.loader:n.url_!==void 0&&(ir(n.format_,7),n.loader_=r9(n.url_,n.format_)),n.strategy_=i.strategy!==void 0?i.strategy:k4e;var o=i.useSpatialIndex!==void 0?i.useSpatialIndex:!0;n.featuresRtree_=o?new LT:null,n.loadedExtentsRtree_=new LT,n.loadingExtentsCount_=0,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null;var l,c;return Array.isArray(i.features)?c=i.features:i.features&&(l=i.features,c=l.getArray()),!o&&l===void 0&&(l=new Kn(c)),c!==void 0&&n.addFeaturesInternal(c),l!==void 0&&n.bindFeaturesCollection_(l),n}return e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var n=Jt(t);if(!this.addToIndex_(n,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(n,t);var i=t.getGeometry();if(i){var o=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,t)}else this.nullGeometryFeatures_[n]=t;this.dispatchEvent(new Vd(ms.ADDFEATURE,t))},e.prototype.setupChangeEvents_=function(t,n){this.featureChangeKeys_[t]=[Mr(n,qt.CHANGE,this.handleFeatureChange_,this),Mr(n,rc.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,n){var i=!0,o=n.getId();return o!==void 0&&(o.toString()in this.idIndex_?i=!1:this.idIndex_[o.toString()]=n),i&&(ir(!(t in this.uidIndex_),30),this.uidIndex_[t]=n),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var n=[],i=[],o=[],l=0,c=t.length;l<c;l++){var p=t[l],g=Jt(p);this.addToIndex_(g,p)&&i.push(p)}for(var l=0,_=i.length;l<_;l++){var p=i[l],g=Jt(p);this.setupChangeEvents_(g,p);var x=p.getGeometry();if(x){var T=x.getExtent();n.push(T),o.push(p)}else this.nullGeometryFeatures_[g]=p}if(this.featuresRtree_&&this.featuresRtree_.load(n,o),this.hasListener(ms.ADDFEATURE))for(var l=0,C=i.length;l<C;l++)this.dispatchEvent(new Vd(ms.ADDFEATURE,i[l]))},e.prototype.bindFeaturesCollection_=function(t){var n=!1;this.addEventListener(ms.ADDFEATURE,function(i){n||(n=!0,t.push(i.feature),n=!1)}),this.addEventListener(ms.REMOVEFEATURE,function(i){n||(n=!0,t.remove(i.feature),n=!1)}),t.addEventListener(fi.ADD,function(i){n||(n=!0,this.addFeature(i.element),n=!1)}.bind(this)),t.addEventListener(fi.REMOVE,function(i){n||(n=!0,this.removeFeature(i.element),n=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var n in this.featureChangeKeys_){var i=this.featureChangeKeys_[n];i.forEach(Qr)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var o=function(p){this.removeFeatureInternal(p)}.bind(this);this.featuresRtree_.forEach(o);for(var l in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[l])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var c=new Vd(ms.CLEAR);this.dispatchEvent(c),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,n){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(o){var l=o.getGeometry();if(l.intersectsCoordinate(t))return n(o)})},e.prototype.forEachFeatureInExtent=function(t,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)},e.prototype.forEachFeatureIntersectingExtent=function(t,n){return this.forEachFeatureInExtent(t,function(i){var o=i.getGeometry();if(o.intersectsExtent(t)){var l=n(i);if(l)return l}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),nc(this.nullGeometryFeatures_)||ta(t,vD(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var n=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){n.push(i)}),n},e.prototype.getFeaturesInExtent=function(t,n){var i=this;if(this.featuresRtree_){var o=n&&n.canWrapX()&&this.getWrapX();if(!o)return this.featuresRtree_.getInExtent(t);var l=oze(t,n);return[].concat.apply([],l.map(function(c){return i.featuresRtree_.getInExtent(c)}))}else return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(t,n){var i=t[0],o=t[1],l=null,c=[NaN,NaN],p=1/0,g=[-1/0,-1/0,1/0,1/0],_=n||fs;return this.featuresRtree_.forEachInExtent(g,function(x){if(_(x)){var T=x.getGeometry(),C=p;if(p=T.closestPointXY(i,o,c,p),p<C){l=x;var D=Math.sqrt(p);g[0]=i-D,g[1]=o-D,g[2]=i+D,g[3]=o+D}}}),l},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var n=this.idIndex_[t.toString()];return n!==void 0?n:null},e.prototype.getFeatureByUid=function(t){var n=this.uidIndex_[t];return n!==void 0?n:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var n=t.target,i=Jt(n),o=n.getGeometry();if(!o)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{var l=o.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(l,n)):this.featuresRtree_&&this.featuresRtree_.update(l,n)}var c=n.getId();if(c!==void 0){var p=c.toString();this.idIndex_[p]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[p]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new Vd(ms.CHANGEFEATURE,n))},e.prototype.hasFeature=function(t){var n=t.getId();return n!==void 0?n in this.idIndex_:Jt(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&nc(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0},e.prototype.loadFeatures=function(t,n,i){for(var o=this.loadedExtentsRtree_,l=this.strategy_(t,n,i),c=function(x,T){var C=l[x],D=o.forEachInExtent(C,function(F){return bf(F.extent,C)});D||(++p.loadingExtentsCount_,p.dispatchEvent(new Vd(ms.FEATURESLOADSTART)),p.loader_.call(p,C,n,i,function(F){--this.loadingExtentsCount_,this.dispatchEvent(new Vd(ms.FEATURESLOADEND,void 0,F))}.bind(p),function(){--this.loadingExtentsCount_,this.dispatchEvent(new Vd(ms.FEATURESLOADERROR))}.bind(p)),o.insert(C,{extent:C.slice()}))},p=this,g=0,_=l.length;g<_;++g)c(g,_);this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),r.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var n=this.loadedExtentsRtree_,i;n.forEachInExtent(t,function(o){if(wf(o.extent,t))return i=o,!0}),i&&n.remove(i)},e.prototype.removeFeature=function(t){if(t){var n=Jt(t);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(t);var i=this.removeFeatureInternal(t);i&&this.changed()}},e.prototype.removeFeatureInternal=function(t){var n=Jt(t),i=this.featureChangeKeys_[n];if(i){i.forEach(Qr),delete this.featureChangeKeys_[n];var o=t.getId();return o!==void 0&&delete this.idIndex_[o.toString()],delete this.uidIndex_[n],this.dispatchEvent(new Vd(ms.REMOVEFEATURE,t)),t}},e.prototype.removeFromIdIndex_=function(t){var n=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],n=!0;break}return n},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){ir(this.format_,7),this.url_=t,this.setLoader(r9(t,this.format_))},e}(aN),hh=Oir;var c9=ke($O(),1);var n9=class{constructor(){this.listeners_=[]}on(e,t){this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push(t)}off(e,t){let n=this.listeners_[e];if(n){let i=n.indexOf(t);i>-1&&this.listeners_[e].slice(i,1)}}dispatch(e,t){let n=this.listeners_[e];if(n)for(let i=0,o=n.length;i<o;++i)n[i].call({},t)}},j4e=n9;function F4e(){return new eN({fill:new Sl({color:"rgba(255, 255, 255, 0.2)"}),stroke:new cc({color:"#ffcc33",width:2}),image:new iv({radius:7,fill:new Sl({color:"#ffcc33"})})})}function Gd(r){let t=2*Math.PI*8/6;return new eN({image:new iv({radius:8,fill:new Sl({color:"rgba(255,255,255,0.6)"}),stroke:new cc({color:"rgba(49,159,211,0.5)",width:15,lineDash:[0,t,t,t,t,t,t]})}),text:kg(r)?new e9({textAlign:"start",textBaseline:"bottom",font:"12px Calibri,sans-serif",text:r,fill:new Sl({color:"#aa3300"}),stroke:new cc({color:"#ffffff",width:3}),offsetX:10,offsetY:-5}):void 0})}function sN(r){let t=2*Math.PI*8/6;return new eN({image:new iv({radius:8,fill:new Sl({color:"rgba(255,128,0,0.6)"}),stroke:new cc({color:"rgba(240,0,0,0.5)",width:15,lineDash:[0,t,t,t,t,t,t]})}),text:kg(r)?new e9({textAlign:"start",textBaseline:"bottom",font:"12px Calibri,sans-serif",text:r,fill:new Sl({color:"#aa3300"}),stroke:new cc({color:"#ffffff",width:3}),offsetX:10,offsetY:-5}):void 0})}var qT=ke($O(),1);var Lir=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),z4e=function(r){Lir(e,r);function e(t,n,i){var o=r.call(this)||this;if(i!==void 0&&n===void 0)o.setFlatCoordinates(i,t);else{var l=n||0;o.setCenterAndRadius(t,l,i)}return o}return e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){var l=this.flatCoordinates,c=t-l[0],p=n-l[1],g=c*c+p*p;if(g<o){if(g===0)for(var _=0;_<this.stride;++_)i[_]=l[_];else{var x=this.getRadius()/Math.sqrt(g);i[0]=l[0]+x*c,i[1]=l[1]+x*p;for(var _=2;_<this.stride;++_)i[_]=l[_]}return i.length=this.stride,g}else return o},e.prototype.containsXY=function(t,n){var i=this.flatCoordinates,o=t-i[0],l=n-i[1];return o*o+l*l<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var n=this.flatCoordinates,i=n[this.stride]-n[0];return Ba(n[0]-i,n[1]-i,n[0]+i,n[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+n*n},e.prototype.getType=function(){return"Circle"},e.prototype.intersectsExtent=function(t){var n=this.getExtent();if(Ri(t,n)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||t[1]<=i[1]&&t[3]>=i[1]?!0:B0(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var n=this.stride,i=this.flatCoordinates[n]-this.flatCoordinates[0],o=t.slice();o[n]=o[0]+i;for(var l=1;l<n;++l)o[n+l]=t[l];this.setFlatCoordinates(this.layout,o),this.changed()},e.prototype.setCenterAndRadius=function(t,n,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,l=jD(o,0,t,this.stride);o[l++]=o[0]+n;for(var c=1,p=this.stride;c<p;++c)o[l++]=o[c];o.length=l,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,n){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,n){var i=this.getCenter(),o=this.getStride();this.setCenter(K0(i,0,i.length,o,t,n,i)),this.changed()},e.prototype.translate=function(t,n){var i=this.getCenter(),o=this.getStride();this.setCenter(ND(i,0,i.length,o,t,n,i)),this.changed()},e}(Va);z4e.prototype.transform;var B4e=z4e;var DT={ACTIVE:"active"};var Dir=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nir=function(r){Dir(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.map=n,o.frameState=i!==void 0?i:null,o}return e}(Pi),$d=Nir;var kir=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qir=function(r){kir(e,r);function e(t,n,i,o,l,c){var p=r.call(this,t,n,l)||this;return p.originalEvent=i,p.pixel_=null,p.coordinate_=null,p.dragging=o!==void 0?o:!1,p.activePointers=c,p}return Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){r.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){r.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}($d),mu=qir;var $r={SINGLECLICK:"singleclick",CLICK:qt.CLICK,DBLCLICK:qt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};function i9(r){return Math.pow(r,3)}function gu(r){return 1-i9(1-r)}function U4e(r){return 3*r*r-2*r*r*r}function V4e(r){return r}var jir=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fir=function(r){jir(e,r);function e(t){var n=r.call(this)||this;return n.on,n.once,n.un,t&&t.handleEvent&&(n.handleEvent=t.handleEvent),n.map_=null,n.setActive(!0),n}return e.prototype.getActive=function(){return this.get(DT.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(DT.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(wo);function G4e(r,e,t){var n=r.getCenterInternal();if(n){var i=[n[0]+e[0],n[1]+e[1]];r.animateInternal({duration:t!==void 0?t:250,easing:V4e,center:r.getConstrainedCenter(i)})}}function ax(r,e,t,n){var i=r.getZoom();if(i!==void 0){var o=r.getConstrainedZoom(i+e),l=r.getResolutionForZoom(o);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:l,anchor:t,duration:n!==void 0?n:250,easing:gu})}}var vu=Fir;var zir=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bir=function(r){zir(e,r);function e(t){var n=this,i=t||{};return n=r.call(this,i)||this,i.handleDownEvent&&(n.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(n.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(n.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(n.handleUpEvent=i.handleUpEvent),i.stopDown&&(n.stopDown=i.stopDown),n.handlingDownUpSequence=!1,n.targetPointers=[],n}return e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==$r.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==$r.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==$r.POINTERDOWN){var o=this.handleDownEvent(t);this.handlingDownUpSequence=o,n=this.stopDown(o)}else t.type==$r.POINTERMOVE&&this.handleMoveEvent(t);return!n},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){t.activePointers&&(this.targetPointers=t.activePointers)},e}(vu);function sx(r){for(var e=r.length,t=0,n=0,i=0;i<e;i++)t+=r[i].clientX,n+=r[i].clientY;return[t/e,n/e]}var Js=Bir;function NT(r){var e=arguments;return function(t){for(var n=!0,i=0,o=e.length;i<o&&(n=n&&e[i](t),!!n);++i);return n}}var $4e=function(r){var e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},H4e=function(r){var e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Uir=function(r){var e=r.map.getTargetElement(),t=r.map.getOwnerDocument().activeElement;return e.contains(t)},lN=function(r){return r.map.getTargetElement().hasAttribute("tabindex")?Uir(r):!0},lx=fs;var uN=function(r){var e=r.originalEvent;return e.button==0&&!(ZFe&&YFe&&e.ctrlKey)},o9=au;var ux=function(r){return r.type==$r.SINGLECLICK};var cx=function(r){var e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey};var Hd=function(r){var e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},cN=function(r){var e=r.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},hN=function(r){var e=r.originalEvent;return ir(e!==void 0,56),e.pointerType=="mouse"};var fN=function(r){var e=r.originalEvent;return ir(e!==void 0,56),e.isPrimary&&e.button===0};var W4e=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_n={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},pN={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},dN=function(r){W4e(e,r);function e(t,n){var i=r.call(this,t)||this;return i.feature=n,i}return e}(Pi);var Vir=function(r){W4e(e,r);function e(t){var n=this,i=t;i.stopDown||(i.stopDown=au),n=r.call(this,i)||this,n.on,n.once,n.un,n.shouldHandle_=!1,n.downPx_=null,n.downTimeout_,n.lastDragTime_,n.pointerType_,n.freehand_=!1,n.source_=t.source?t.source:null,n.features_=t.features?t.features:null,n.snapTolerance_=t.snapTolerance?t.snapTolerance:12,n.type_=t.type,n.mode_=$ir(n.type_),n.stopClick_=!!t.stopClick,n.minPoints_=t.minPoints?t.minPoints:n.mode_===_n.POLYGON?3:2,n.maxPoints_=n.mode_===_n.CIRCLE?2:t.maxPoints?t.maxPoints:1/0,n.finishCondition_=t.finishCondition?t.finishCondition:fs,n.geometryLayout_=t.geometryLayout?t.geometryLayout:Fn.XY;var o=t.geometryFunction;if(!o){var l=n.mode_;if(l===_n.CIRCLE)o=function(p,g,_){var x=g||new B4e([NaN,NaN]),T=wi(p[0],_),C=Ld(T,wi(p[p.length-1],_));x.setCenterAndRadius(T,Math.sqrt(C),this.geometryLayout_);var D=cu();return D&&x.transform(_,D),x};else{var c;l===_n.POINT?c=Ga:l===_n.LINE_STRING?c=Ef:l===_n.POLYGON&&(c=uc),o=function(p,g,_){return g?l===_n.POLYGON?p[0].length?g.setCoordinates([p[0].concat([p[0][0]])],this.geometryLayout_):g.setCoordinates([],this.geometryLayout_):g.setCoordinates(p,this.geometryLayout_):g=new c(p,this.geometryLayout_),g}}}return n.geometryFunction_=o,n.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,n.finishCoordinate_=null,n.sketchFeature_=null,n.sketchPoint_=null,n.sketchCoords_=null,n.sketchLine_=null,n.sketchLineCoords_=null,n.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,n.overlay_=new du({source:new hh({useSpatialIndex:!1,wrapX:t.wrapX?t.wrapX:!1}),style:t.style?t.style:Gir(),updateWhileInteracting:!0}),n.geometryName_=t.geometryName,n.condition_=t.condition?t.condition:cx,n.freehandCondition_,t.freehand?n.freehandCondition_=lx:n.freehandCondition_=t.freehandCondition?t.freehandCondition:Hd,n.addChangeListener(DT.ACTIVE,n.updateState_),n}return e.prototype.setMap=function(t){r.prototype.setMap.call(this,t),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(t){t.originalEvent.type===qt.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!==_n.POINT&&this.freehandCondition_(t);var n=t.type===$r.POINTERMOVE,i=!0;if(!this.freehand_&&this.lastDragTime_&&t.type===$r.POINTERDRAG){var o=Date.now();o-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&t.type===$r.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),i=!1):this.freehand_&&t.type===$r.POINTERDOWN?i=!1:n&&this.getPointerCount()<2?(i=t.type===$r.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===$r.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===$r.DBLCLICK&&(i=!1),r.prototype.handleEvent.call(this,t)&&i},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new mu($r.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var n=!0;if(this.getPointerCount()===0)if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_){var i=!this.finishCoordinate_;i&&this.startDrawing_(t.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_===_n.POINT)&&(this.atFinish_(t.pixel)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),n=!1}else this.freehand_&&this.abortDrawing();return!n&&this.stopClick_&&t.preventDefault(),n},e.prototype.handlePointerMove_=function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var n=this.downPx_,i=t.pixel,o=n[0]-i[0],l=n[1]-i[1],c=o*o+l*l;if(this.shouldHandle_=this.freehand_?c>this.squaredClickTolerance_:c<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t.coordinate):this.createOrUpdateSketchPoint_(t.coordinate.slice())},e.prototype.atFinish_=function(t){var n=!1;if(this.sketchFeature_){var i=!1,o=[this.finishCoordinate_],l=this.mode_;if(l===_n.POINT)n=!0;else if(l===_n.CIRCLE)n=this.sketchCoords_.length===2;else if(l===_n.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(l===_n.POLYGON){var c=this.sketchCoords_;i=c[0].length>this.minPoints_,o=[c[0][0],c[0][c[0].length-2]]}if(i)for(var p=this.getMap(),g=0,_=o.length;g<_;g++){var x=o[g],T=p.getPixelFromCoordinate(x),C=t[0]-T[0],D=t[1]-T[1],F=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(C*C+D*D)<=F,n){this.finishCoordinate_=x;break}}}return n},e.prototype.createOrUpdateSketchPoint_=function(t){if(!this.sketchPoint_)this.sketchPoint_=new wl(new Ga(t)),this.updateSketchFeatures_();else{var n=this.sketchPoint_.getGeometry();n.setCoordinates(t)}},e.prototype.createOrUpdateCustomSketchLine_=function(t){this.sketchLine_||(this.sketchLine_=new wl);var n=t.getLinearRing(0),i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),i.changed()):(i=new Ef(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(i))},e.prototype.startDrawing_=function(t){for(var n=this.getMap().getView().getProjection(),i=mT(this.geometryLayout_);t.length<i;)t.push(0);this.finishCoordinate_=t,this.mode_===_n.POINT?this.sketchCoords_=t.slice():this.mode_===_n.POLYGON?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new wl(new Ef(this.sketchLineCoords_)));var o=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new wl,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(o),this.updateSketchFeatures_(),this.dispatchEvent(new dN(pN.DRAWSTART,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){for(var n=this.getMap(),i=this.sketchFeature_.getGeometry(),o=n.getView().getProjection(),l=mT(this.geometryLayout_),c,p;t.length<l;)t.push(0);if(this.mode_===_n.POINT?p=this.sketchCoords_:this.mode_===_n.POLYGON?(c=this.sketchCoords_[0],p=c[c.length-1],this.atFinish_(n.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(c=this.sketchCoords_,p=c[c.length-1]),p[0]=t[0],p[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,o),this.sketchPoint_){var g=this.sketchPoint_.getGeometry();g.setCoordinates(t)}if(i.getType()==="Polygon"&&this.mode_!==_n.POLYGON)this.createOrUpdateCustomSketchLine_(i);else if(this.sketchLineCoords_){var _=this.sketchLine_.getGeometry();_.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),o,l,c=this.mode_;c===_n.LINE_STRING||c===_n.CIRCLE?(this.finishCoordinate_=t.slice(),l=this.sketchCoords_,l.length>=this.maxPoints_&&(this.freehand_?l.pop():o=!0),l.push(t.slice()),this.geometryFunction_(l,n,i)):c===_n.POLYGON&&(l=this.sketchCoords_[0],l.length>=this.maxPoints_&&(this.freehand_?l.pop():o=!0),l.push(t.slice()),o&&(this.finishCoordinate_=l[0]),this.geometryFunction_(this.sketchCoords_,n,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),o&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),i,o=this.mode_;if(o===_n.LINE_STRING||o===_n.CIRCLE){if(i=this.sketchCoords_,i.splice(-2,1),i.length>=2){this.finishCoordinate_=i[i.length-2].slice();var l=this.finishCoordinate_.slice();i[i.length-1]=l,this.createOrUpdateSketchPoint_(l)}this.geometryFunction_(i,t,n),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(o===_n.POLYGON){i=this.sketchCoords_[0],i.splice(-2,1);var c=this.sketchLine_.getGeometry();if(i.length>=2){var l=i[i.length-2].slice();i[i.length-1]=l,this.createOrUpdateSketchPoint_(l)}c.setCoordinates(i),this.geometryFunction_(this.sketchCoords_,t,n)}i.length===1&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var n=this.sketchCoords_,i=t.getGeometry(),o=this.getMap().getView().getProjection();this.mode_===_n.LINE_STRING?(n.pop(),this.geometryFunction_(n,i,o)):this.mode_===_n.POLYGON&&(n[0].pop(),this.geometryFunction_(n,i,o),n=i.getCoordinates()),this.type_==="MultiPoint"?t.setGeometry(new X0([n])):this.type_==="MultiLineString"?t.setGeometry(new VD([n])):this.type_==="MultiPolygon"&&t.setGeometry(new HD([n])),this.dispatchEvent(new dN(pN.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new dN(pN.DRAWABORT,t))},e.prototype.appendCoordinates=function(t){var n=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(t[0]);var o;if(n===_n.LINE_STRING||n===_n.CIRCLE)o=this.sketchCoords_;else if(n===_n.POLYGON)o=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&o.shift(),o.pop();for(var l=0;l<t.length;l++)this.addToDrawing_(t[l]);var c=t[t.length-1];this.addToDrawing_(c),this.modifyDrawing_(c)},e.prototype.extend=function(t){var n=t.getGeometry(),i=n;this.sketchFeature_=t,this.sketchCoords_=i.getCoordinates();var o=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=o.slice(),this.sketchCoords_.push(o.slice()),this.sketchPoint_=new wl(new Ga(o)),this.updateSketchFeatures_(),this.dispatchEvent(new dN(pN.DRAWSTART,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var n=this.overlay_.getSource();n.clear(!0),n.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),n=this.getActive();(!t||!n)&&this.abortDrawing(),this.overlay_.setMap(n?t:null)},e}(Js);function Gir(){var r=tx();return function(e,t){return r[e.getGeometry().getType()]}}function $ir(r){switch(r){case"Point":case"MultiPoint":return _n.POINT;case"LineString":case"MultiLineString":return _n.LINE_STRING;case"Polygon":case"MultiPolygon":return _n.POLYGON;case"Circle":return _n.CIRCLE;default:throw new Error("Invalid type: "+r)}}var mN=Vir;var Q4e=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Z4e=0,kT=1,Y4e=[0,0,0,0],hx=[],a9={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},s9=function(r){Q4e(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.features=n,o.mapBrowserEvent=i,o}return e}(Pi);var Hir=function(r){Q4e(e,r);function e(t){var n=r.call(this,t)||this;n.on,n.once,n.un,n.boundHandleFeatureChange_=n.handleFeatureChange_.bind(n),n.condition_=t.condition?t.condition:fN,n.defaultDeleteCondition_=function(o){return $4e(o)&&ux(o)},n.deleteCondition_=t.deleteCondition?t.deleteCondition:n.defaultDeleteCondition_,n.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:lx,n.vertexFeature_=null,n.vertexSegments_=null,n.lastPixel_=[0,0],n.ignoreNextSingleClick_=!1,n.featuresBeingModified_=null,n.rBush_=new LT,n.pixelTolerance_=t.pixelTolerance!==void 0?t.pixelTolerance:10,n.snappedToVertex_=!1,n.changingFeature_=!1,n.dragSegments_=[],n.overlay_=new du({source:new hh({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:Zir(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.SEGMENT_WRITERS_={Point:n.writePointGeometry_.bind(n),LineString:n.writeLineStringGeometry_.bind(n),LinearRing:n.writeLineStringGeometry_.bind(n),Polygon:n.writePolygonGeometry_.bind(n),MultiPoint:n.writeMultiPointGeometry_.bind(n),MultiLineString:n.writeMultiLineStringGeometry_.bind(n),MultiPolygon:n.writeMultiPolygonGeometry_.bind(n),Circle:n.writeCircleGeometry_.bind(n),GeometryCollection:n.writeGeometryCollectionGeometry_.bind(n)},n.source_=null,n.hitDetection_=null;var i;if(t.features?i=t.features:t.source&&(n.source_=t.source,i=new Kn(n.source_.getFeatures()),n.source_.addEventListener(ms.ADDFEATURE,n.handleSourceAdd_.bind(n)),n.source_.addEventListener(ms.REMOVEFEATURE,n.handleSourceRemove_.bind(n))),!i)throw new Error("The modify interaction requires features, a source or a layer");return t.hitDetection&&(n.hitDetection_=t.hitDetection),n.features_=i,n.features_.forEach(n.addFeature_.bind(n)),n.features_.addEventListener(fi.ADD,n.handleFeatureAdd_.bind(n)),n.features_.addEventListener(fi.REMOVE,n.handleFeatureRemove_.bind(n)),n.lastPointerEvent_=null,n.delta_=[0,0],n.snapToPointer_=t.snapToPointer===void 0?!n.hitDetection_:t.snapToPointer,n}return e.prototype.addFeature_=function(t){var n=t.getGeometry();if(n){var i=this.SEGMENT_WRITERS_[n.getType()];i&&i(t,n)}var o=this.getMap();o&&o.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,o),t.addEventListener(qt.CHANGE,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t,n){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Kn;for(var i=this.featuresBeingModified_.getArray(),o=0,l=n.length;o<l;++o)for(var c=n[o],p=0,g=c.length;p<g;++p){var _=c[p].feature;_&&i.indexOf(_)===-1&&this.featuresBeingModified_.push(_)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new s9(a9.MODIFYSTART,this.featuresBeingModified_,t))}},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(qt.CHANGE,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var n=this.rBush_,i=[];n.forEach(function(p){t===p.feature&&i.push(p)});for(var o=i.length-1;o>=0;--o){for(var l=i[o],c=this.dragSegments_.length-1;c>=0;--c)this.dragSegments_[c][0]===l&&this.dragSegments_.splice(c,1);n.remove(l)}},e.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),r.prototype.setActive.call(this,t)},e.prototype.setMap=function(t){this.overlay_.setMap(t),r.prototype.setMap.call(this,t)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var n=t.target;this.removeFeature_(n),this.addFeature_(n)}},e.prototype.handleFeatureRemove_=function(t){var n=t.element;this.removeFeature_(n)},e.prototype.writePointGeometry_=function(t,n){var i=n.getCoordinates(),o={feature:t,geometry:n,segment:[i,i]};this.rBush_.insert(n.getExtent(),o)},e.prototype.writeMultiPointGeometry_=function(t,n){for(var i=n.getCoordinates(),o=0,l=i.length;o<l;++o){var c=i[o],p={feature:t,geometry:n,depth:[o],index:o,segment:[c,c]};this.rBush_.insert(n.getExtent(),p)}},e.prototype.writeLineStringGeometry_=function(t,n){for(var i=n.getCoordinates(),o=0,l=i.length-1;o<l;++o){var c=i.slice(o,o+2),p={feature:t,geometry:n,index:o,segment:c};this.rBush_.insert(Ea(c),p)}},e.prototype.writeMultiLineStringGeometry_=function(t,n){for(var i=n.getCoordinates(),o=0,l=i.length;o<l;++o)for(var c=i[o],p=0,g=c.length-1;p<g;++p){var _=c.slice(p,p+2),x={feature:t,geometry:n,depth:[o],index:p,segment:_};this.rBush_.insert(Ea(_),x)}},e.prototype.writePolygonGeometry_=function(t,n){for(var i=n.getCoordinates(),o=0,l=i.length;o<l;++o)for(var c=i[o],p=0,g=c.length-1;p<g;++p){var _=c.slice(p,p+2),x={feature:t,geometry:n,depth:[o],index:p,segment:_};this.rBush_.insert(Ea(_),x)}},e.prototype.writeMultiPolygonGeometry_=function(t,n){for(var i=n.getCoordinates(),o=0,l=i.length;o<l;++o)for(var c=i[o],p=0,g=c.length;p<g;++p)for(var _=c[p],x=0,T=_.length-1;x<T;++x){var C=_.slice(x,x+2),D={feature:t,geometry:n,depth:[p,o],index:x,segment:C};this.rBush_.insert(Ea(C),D)}},e.prototype.writeCircleGeometry_=function(t,n){var i=n.getCenter(),o={feature:t,geometry:n,index:Z4e,segment:[i,i]},l={feature:t,geometry:n,index:kT,segment:[i,i]},c=[o,l];o.featureSegments=c,l.featureSegments=c,this.rBush_.insert(z0(i),o);var p=n,g=cu();if(g&&this.getMap()){var _=this.getMap().getView().getProjection();p=p.clone().transform(g,_),p=$D(p).transform(_,g)}this.rBush_.insert(p.getExtent(),l)},e.prototype.writeGeometryCollectionGeometry_=function(t,n){for(var i=n.getGeometriesArray(),o=0;o<i.length;++o){var l=i[o],c=this.SEGMENT_WRITERS_[l.getType()];c(t,l)}},e.prototype.createOrUpdateVertexFeature_=function(t,n,i){var o=this.vertexFeature_;if(!o)o=new wl(new Ga(t)),this.vertexFeature_=o,this.overlay_.getSource().addFeature(o);else{var l=o.getGeometry();l.setCoordinates(t)}return o.set("features",n),o.set("geometries",i),o},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;this.lastPointerEvent_=t;var n;return!t.map.getView().getInteracting()&&t.type==$r.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(t.type!=$r.SINGLECLICK||!this.ignoreNextSingleClick_?n=this.removePoint():n=!0),t.type==$r.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),r.prototype.handleEvent.call(this,t)&&!n},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);for(var n=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],i=[],o=[],l=0,c=this.dragSegments_.length;l<c;++l){var p=this.dragSegments_[l],g=p[0],_=g.feature;i.indexOf(_)===-1&&i.push(_);var x=g.geometry;o.indexOf(x)===-1&&o.push(x);for(var T=g.depth,C=void 0,D=g.segment,F=p[1];n.length<x.getStride();)n.push(D[F][n.length]);switch(x.getType()){case"Point":C=n,D[0]=n,D[1]=n;break;case"MultiPoint":C=x.getCoordinates(),C[g.index]=n,D[0]=n,D[1]=n;break;case"LineString":C=x.getCoordinates(),C[g.index+F]=n,D[F]=n;break;case"MultiLineString":C=x.getCoordinates(),C[T[0]][g.index+F]=n,D[F]=n;break;case"Polygon":C=x.getCoordinates(),C[T[0]][g.index+F]=n,D[F]=n;break;case"MultiPolygon":C=x.getCoordinates(),C[T[1]][T[0]][g.index+F]=n,D[F]=n;break;case"Circle":if(D[0]=n,D[1]=n,g.index===Z4e)this.changingFeature_=!0,x.setCenter(n),this.changingFeature_=!1;else{this.changingFeature_=!0;var O=t.map.getView().getProjection(),k=dY(wi(x.getCenter(),O),wi(n,O)),q=cu();if(q){var U=x.clone().transform(q,O);U.setRadius(k),k=U.transform(O,q).getRadius()}x.setRadius(k),this.changingFeature_=!1}break;default:}C&&this.setGeometryCoordinates_(x,C)}this.createOrUpdateVertexFeature_(n,i,o)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var n=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,n),this.dragSegments_.length=0,this.featuresBeingModified_=null;var i=this.vertexFeature_;if(i){var o=t.map.getView().getProjection(),l=[],c=i.getGeometry().getCoordinates(),p=Ea([c]),g=this.rBush_.getInExtent(p),_={};g.sort(Wir);for(var x=0,T=g.length;x<T;++x){var C=g[x],D=C.segment,F=Jt(C.geometry),O=C.depth;if(O&&(F+="-"+O.join("-")),_[F]||(_[F]=new Array(2)),C.geometry.getType()==="Circle"&&C.index===kT){var k=X4e(n,C,o);ds(k,c)&&!_[F][0]&&(this.dragSegments_.push([C,0]),_[F][0]=C);continue}if(ds(D[0],c)&&!_[F][0]){this.dragSegments_.push([C,0]),_[F][0]=C;continue}if(ds(D[1],c)&&!_[F][1]){if(_[F][0]&&_[F][0].index===0){var q=C.geometry.getCoordinates();switch(C.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":q=q[O[1]];case"Polygon":if(C.index!==q[O[0]].length-2)continue;break;default:}}this.dragSegments_.push([C,1]),_[F][1]=C;continue}Jt(D)in this.vertexSegments_&&!_[F][0]&&!_[F][1]&&this.insertVertexCondition_(t)&&l.push(C)}l.length&&this.willModifyFeatures_(t,[l]);for(var U=l.length-1;U>=0;--U)this.insertVertex_(l[U],c)}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var n=this.dragSegments_.length-1;n>=0;--n){var i=this.dragSegments_[n][0],o=i.geometry;if(o.getType()==="Circle"){var l=o.getCenter(),c=i.featureSegments[0],p=i.featureSegments[1];c.segment[0]=l,c.segment[1]=l,p.segment[0]=l,p.segment[1]=l,this.rBush_.update(z0(l),c);var g=o,_=cu();if(_){var x=t.map.getView().getProjection();g=g.clone().transform(_,x),g=$D(g).transform(x,_)}this.rBush_.update(g.getExtent(),p)}else this.rBush_.update(Ea(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new s9(a9.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,n,i){var o=this,l=i||n.getCoordinateFromPixel(t),c=n.getView().getProjection(),p=function(je,$e){return K4e(l,je,c)-K4e(l,$e,c)},g,_;if(this.hitDetection_){var x=typeof this.hitDetection_=="object"?function(je){return je===o.hitDetection_}:void 0;n.forEachFeatureAtPixel(t,function(je,$e,Be){if(Be=Be||je.getGeometry(),Be.getType()==="Point"&&N0(o.features_.getArray(),je)){_=Be;var nt=Be.getFlatCoordinates().slice(0,2);g=[{feature:je,geometry:Be,segment:[nt,nt]}]}return!0},{layerFilter:x})}if(!g){var T=Ua(z0(l,Y4e),c),C=n.getView().getResolution()*this.pixelTolerance_,D=Nd(oc(T,C,Y4e),c);g=this.rBush_.getInExtent(D)}if(g&&g.length>0){var F=g.sort(p)[0],O=F.segment,k=X4e(l,F,c),q=n.getPixelFromCoordinate(k),U=dY(t,q);if(_||U<=this.pixelTolerance_){var H={};if(H[Jt(O)]=!0,this.snapToPointer_||(this.delta_[0]=k[0]-l[0],this.delta_[1]=k[1]-l[1]),F.geometry.getType()==="Circle"&&F.index===kT)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(k,[F.feature],[F.geometry]);else{var se=n.getPixelFromCoordinate(O[0]),ie=n.getPixelFromCoordinate(O[1]),ue=Ld(q,se),ve=Ld(q,ie);U=Math.sqrt(Math.min(ue,ve)),this.snappedToVertex_=U<=this.pixelTolerance_,this.snappedToVertex_&&(k=ue>ve?O[1]:O[0]),this.createOrUpdateVertexFeature_(k,[F.feature],[F.geometry]);var ye={};ye[Jt(F.geometry)]=!0;for(var ge=1,_e=g.length;ge<_e;++ge){var Le=g[ge].segment;if(ds(O[0],Le[0])&&ds(O[1],Le[1])||ds(O[0],Le[1])&&ds(O[1],Le[0])){var Re=Jt(g[ge].geometry);Re in ye||(ye[Re]=!0,H[Jt(Le)]=!0)}else break}}this.vertexSegments_=H;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,n){for(var i=t.segment,o=t.feature,l=t.geometry,c=t.depth,p=t.index,g;n.length<l.getStride();)n.push(0);switch(l.getType()){case"MultiLineString":g=l.getCoordinates(),g[c[0]].splice(p+1,0,n);break;case"Polygon":g=l.getCoordinates(),g[c[0]].splice(p+1,0,n);break;case"MultiPolygon":g=l.getCoordinates(),g[c[1]][c[0]].splice(p+1,0,n);break;case"LineString":g=l.getCoordinates(),g.splice(p+1,0,n);break;default:return}this.setGeometryCoordinates_(l,g);var _=this.rBush_;_.remove(t),this.updateSegmentIndices_(l,p,c,1);var x={segment:[i[0],n],feature:o,geometry:l,depth:c,index:p};_.insert(Ea(x.segment),x),this.dragSegments_.push([x,1]);var T={segment:[n,i[1]],feature:o,geometry:l,depth:c,index:p+1};_.insert(Ea(T.segment),T),this.dragSegments_.push([T,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=$r.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);var n=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new s9(a9.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,n}return!1},e.prototype.removeVertex_=function(){var t=this.dragSegments_,n={},i=!1,o,l,c,p,g,_,x,T,C,D,F;for(g=t.length-1;g>=0;--g)c=t[g],D=c[0],F=Jt(D.feature),D.depth&&(F+="-"+D.depth.join("-")),F in n||(n[F]={}),c[1]===0?(n[F].right=D,n[F].index=D.index):c[1]==1&&(n[F].left=D,n[F].index=D.index+1);for(F in n){switch(C=n[F].right,x=n[F].left,_=n[F].index,T=_-1,x!==void 0?D=x:D=C,T<0&&(T=0),p=D.geometry,l=p.getCoordinates(),o=l,i=!1,p.getType()){case"MultiLineString":l[D.depth[0]].length>2&&(l[D.depth[0]].splice(_,1),i=!0);break;case"LineString":l.length>2&&(l.splice(_,1),i=!0);break;case"MultiPolygon":o=o[D.depth[1]];case"Polygon":o=o[D.depth[0]],o.length>4&&(_==o.length-1&&(_=0),o.splice(_,1),i=!0,_===0&&(o.pop(),o.push(o[0]),T=o.length-1));break;default:}if(i){this.setGeometryCoordinates_(p,l);var O=[];if(x!==void 0&&(this.rBush_.remove(x),O.push(x.segment[0])),C!==void 0&&(this.rBush_.remove(C),O.push(C.segment[1])),x!==void 0&&C!==void 0){var k={depth:D.depth,feature:D.feature,geometry:D.geometry,index:T,segment:O};this.rBush_.insert(Ea(k.segment),k)}this.updateSegmentIndices_(p,_,D.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return i},e.prototype.setGeometryCoordinates_=function(t,n){this.changingFeature_=!0,t.setCoordinates(n),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,n,i,o){this.rBush_.forEachInExtent(t.getExtent(),function(l){l.geometry===t&&(i===void 0||l.depth===void 0||ja(l.depth,i))&&l.index>n&&(l.index+=o)})},e}(Js);function Wir(r,e){return r.index-e.index}function K4e(r,e,t){var n=e.geometry;if(n.getType()==="Circle"){var i=n;if(e.index===kT){var o=cu();o&&(i=i.clone().transform(o,t));var l=Ld(i.getCenter(),wi(r,t)),c=Math.sqrt(l)-i.getRadius();return c*c}}var p=wi(r,t);return hx[0]=wi(e.segment[0],t),hx[1]=wi(e.segment[1],t),_ze(p,hx)}function X4e(r,e,t){var n=e.geometry;if(n.getType()==="Circle"&&e.index===kT){var i=n,o=cu();return o&&(i=i.clone().transform(o,t)),Dd(i.getClosestPoint(wi(r,t)),t)}var l=wi(r,t);return hx[0]=wi(e.segment[0],t),hx[1]=wi(e.segment[1],t),Dd(pY(l,hx),t)}function Zir(){var r=tx();return function(e,t){return r.Point}}var gN=Hir;var J4e=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yir={SELECT:"select"},Kir=function(r){J4e(e,r);function e(t,n,i,o){var l=r.call(this,t)||this;return l.selected=n,l.deselected=i,l.mapBrowserEvent=o,l}return e}(Pi);var vN={},Xir=function(r){J4e(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un;var i=t||{};n.boundAddFeature_=n.addFeature_.bind(n),n.boundRemoveFeature_=n.removeFeature_.bind(n),n.condition_=i.condition?i.condition:ux,n.addCondition_=i.addCondition?i.addCondition:o9,n.removeCondition_=i.removeCondition?i.removeCondition:o9,n.toggleCondition_=i.toggleCondition?i.toggleCondition:Hd,n.multi_=i.multi?i.multi:!1,n.filter_=i.filter?i.filter:fs,n.hitTolerance_=i.hitTolerance?i.hitTolerance:0,n.style_=i.style!==void 0?i.style:Qir(),n.features_=i.features||new Kn;var o;if(i.layers){if(typeof i.layers=="function")o=i.layers;else{var l=i.layers;o=function(c){return N0(l,c)}}}else o=fs;return n.layerFilter_=o,n.featureLayerAssociation_={},n}return e.prototype.addFeatureLayerAssociation_=function(t,n){this.featureLayerAssociation_[Jt(t)]=n},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[Jt(t)]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(t){var n=this.getMap();n&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),r.prototype.setMap.call(this,t),t?(this.features_.addEventListener(fi.ADD,this.boundAddFeature_),this.features_.addEventListener(fi.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(fi.ADD,this.boundAddFeature_),this.features_.removeEventListener(fi.REMOVE,this.boundRemoveFeature_))},e.prototype.addFeature_=function(t){var n=t.element;if(this.style_&&this.applySelectedStyle_(n),!this.getLayer(n)){var i=this.getMap().getAllLayers().find(function(o){if(o instanceof du&&o.getSource()&&o.getSource().hasFeature(n))return o});i&&this.addFeatureLayerAssociation_(n,i)}},e.prototype.removeFeature_=function(t){var n=t.element;this.style_&&this.restorePreviousStyle_(n)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(t){var n=Jt(t);n in vN||(vN[n]=t.getStyle()),t.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(t){for(var n=this.getMap().getInteractions().getArray(),i=n.length-1;i>=0;--i){var o=n[i];if(o!==this&&o instanceof e&&o.getStyle()&&o.getFeatures().getArray().lastIndexOf(t)!==-1){t.setStyle(o.getStyle());return}}var l=Jt(t);t.setStyle(vN[l]),delete vN[l]},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[Jt(t)]},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var n=this.addCondition_(t),i=this.removeCondition_(t),o=this.toggleCondition_(t),l=!n&&!i&&!o,c=t.map,p=this.getFeatures(),g=[],_=[];if(l){Ws(this.featureLayerAssociation_),c.forEachFeatureAtPixel(t.pixel,function(F,O){if(this.filter_(F,O))return this.addFeatureLayerAssociation_(F,O),_.push(F),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var x=p.getLength()-1;x>=0;--x){var T=p.item(x),C=_.indexOf(T);C>-1?_.splice(C,1):(p.remove(T),g.push(T))}_.length!==0&&p.extend(_)}else{c.forEachFeatureAtPixel(t.pixel,function(F,O){if(this.filter_(F,O))return(n||o)&&!N0(p.getArray(),F)?(this.addFeatureLayerAssociation_(F,O),_.push(F)):(i||o)&&N0(p.getArray(),F)&&(g.push(F),this.removeFeatureLayerAssociation_(F)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var D=g.length-1;D>=0;--D)p.remove(g[D]);p.extend(_)}return(_.length>0||g.length>0)&&this.dispatchEvent(new Kir(Yir.SELECT,_,g,t)),!0},e}(vu);function Qir(){var r=tx();return ta(r.Polygon,r.LineString),ta(r.GeometryCollection,r.LineString),function(e){return e.getGeometry()?r[e.getGeometry().getType()]:null}}var l9=Xir;function u9(r,e,t){t!==void 0&&t(),r.getTargetElement().style.cursor="grab",e.getTargetElement().style.cursor="grab";let n=o=>{o.target.getTargetElement().style.cursor="grabbing"},i=o=>{o.target.getTargetElement().style.cursor="grab"};return r.on("movestart",n),r.on("moveend",i),e.on("movestart",n),e.on("moveend",i),{disable:()=>{r.un("movestart",n),r.un("moveend",i),e.un("movestart",n),e.un("moveend",i)}}}function eBe(r,e,t,n,i,o,l,c){let p="activateAddGcpAction";c!==void 0&&c();let g={START:"Erzeugen Sie einen Passpunkt und setzen Sie daf\xFCr einen Punkt in der originalen Ansicht oder der georeferenzierten Ansicht.",SET_SRC:"Setzen Sie jetzt einen weiteren Punkt in der originalen Ansicht und schlie\xDFen Sie den Prozess der Erstellung eines Passpunktes ab.",SET_TRG:"Setzen Sie jetzt einen weiteren Punkt in der georeferenzierten Ansicht und schlie\xDFen Sie den Prozess der Erstellung eines Passpunktes ab."};r.getTargetElement().style.cursor="default",e.getTargetElement().style.cursor="default";let _=new mN({source:i,type:"Point",style:Gd}),x=new mN({source:o,type:"Point",style:Gd});r.addInteraction(_),e.addInteraction(x),i.georeference_id="src",o.georeference_id="trg";let T=()=>{let D=t.getFeatures().length+1,F=i.getFeatures()[0];F.setStyle(Gd(`${D}`)),F.setId(D),t.addFeature(F);let O=o.getFeatures()[0];O.setStyle(Gd(`${D}`)),O.setId(D),n.addFeature(O),i.clear(),o.clear()},C=D=>{let F=D.target,O=D.feature;(F.georeference_id==="src"&&o.getFeatures().length===1||F.georeference_id==="trg"&&i.getFeatures().length===1)&&setTimeout(T,100),F.getFeatures().length>1&&F.removeFeature(O),F.georeference_id==="src"?l(g.SET_TRG,p):l(g.SET_SRC,p),O.setStyle(sN())};return i.on("addfeature",C),o.on("addfeature",C),l(g.START,p),{disable:()=>{l(null,p),i.clear(),o.clear(),r.removeInteraction(_),e.removeInteraction(x),i.un("addfeature",C),o.un("addfeature",C)}}}function tBe(r,e,t,n,i,o){let l="activateMoveGcpAction";o!==void 0&&o();let c={START:"Klicken Sie auf Passpunkt und verschieben Sie diesen mittels Drag&Drop."};r.getTargetElement().style.cursor="grab",e.getTargetElement().style.cursor="grab";let p=new gN({source:t,pixelTolerance:10,style:sN}),g=new gN({source:n,pixelTolerance:10,style:sN});r.addInteraction(p),e.addInteraction(g);let _=T=>{T.target.getMap().getTargetElement().style.cursor="grabbing"},x=T=>{T.target.getMap().getTargetElement().style.cursor="grab"};return p.on("modifystart",_),p.on("modifyend",x),g.on("modifystart",_),g.on("modifyend",x),i(c.START,l),{disable:()=>{i(null,l),p.un("modifystart",_),p.un("modifyend",x),g.un("modifystart",_),g.un("modifyend",x),r.removeInteraction(p),e.removeInteraction(g)}}}function rBe(r,e,t,n,i,o,l,c){let p="activateDelGcpAction";c!==void 0&&c();let g={START:"Klicken Sie auf Passpunkt um diesen zu l\xF6schen."};r.getTargetElement().style.cursor="default",e.getTargetElement().style.cursor="default";let _=C=>{if(C.getId()===void 0)return;let F=t.getFeatureById(C.getId()),O=n.getFeatureById(C.getId());F!==null&&O!==null&&(t.removeFeature(F),n.removeFeature(O))},x=new l9({layer:i,hitTolerance:5,condition:C=>{C.type==="click"&&C.map.forEachFeatureAtPixel(C.pixel,_)}}),T=new l9({layer:o,hitTolerance:5,condition:C=>{C.type==="click"&&C.map.forEachFeatureAtPixel(C.pixel,_)}});return r.addInteraction(x),e.addInteraction(T),l(g.START,p),{disable:()=>{l(null,p),r.removeInteraction(x),e.removeInteraction(T)}}}function nBe(r,e,t,n){let i="activateDrawClipAction";n!==void 0&&n();let o={START:"Klicken Sie auf einen Punkt der georeferenzierten Karte und fangen Sie an das Clip-Polygon zu zeichnen oder zu editieren."};r.getTargetElement().style.cursor="default";let l,c=new mN({features:e.getFeaturesCollection(),type:"Polygon",minPoints:5,condition:g=>{let _=g.coordinate;return!(l!==void 0&&(0,qT.default)(l[0],4)===(0,qT.default)(_[0],4)&&(0,qT.default)(l[1],4)===(0,qT.default)(_[1],4))&&e.getFeatures().length===0}}),p=new gN({features:e.getFeaturesCollection(),deleteCondition:g=>{let _=e.getFeatures().length>=1?e.getFeatures()[0].getGeometry().getCoordinates()[0]:void 0;return _!==void 0&&_.length>5&&Hd(g)&&ux(event)}});return c.on("drawstart",()=>{e.getFeatures().length>=1&&this.abortDrawing()}),r.addInteraction(c),r.addInteraction(p),t(o.START,i),{disable:()=>{t(null,i),r.removeInteraction(c),r.removeInteraction(p)}}}var ov="EPSG:4326";function iBe(r){let{params:e,clip:t}=r,n=[...e.gcps.map(i=>i.target),...(t!=null?t.coordinates[0]:[])];return n.length>0?Ea(n):null}function oBe(r){return new IT().readGeometry(r,{dataProjection:ov,featureProjection:ov}).getExtent()}function Jir(r){return[Math.round(r[0]),Math.round(-1*r[1])]}function eor(r){return[Math.round(r[0]),Math.round(-1*r[1])]}var yN=class extends j4e{constructor(e){super(),this.srcMap_=e.sourceMap,this.trgMap_=e.targetMap,this.params_=e.params,this.clip_=e.clip,this.onSetHelperMsg_=e.onSetHelperMsg,this.clipVectorSource_=new hh({features:new Kn});let t=new du({source:this.clipVectorSource_,style:F4e(),zIndex:2});t.set("key","clip"),this.trgMap_.addLayer(t),this.srcVectorSource_=new hh({features:new Kn}),this.trgVectorSource_=new hh({features:new Kn}),this.srcVectorLayer_=new du({source:this.srcVectorSource_}),this.srcMap_.addLayer(this.srcVectorLayer_),this.trgVectorLayer_=new du({source:this.trgVectorSource_,zIndex:3}),this.trgMap_.addLayer(this.trgVectorLayer_),this.editSrcVectorSource_=new hh({features:new Kn}),this.editTrgVectorSource_=new hh({features:new Kn}),this.srcMap_.addLayer(new du({source:this.editSrcVectorSource_})),this.trgMap_.addLayer(new du({source:this.editTrgVectorSource_,zIndex:4})),this.loadData()}loadData(){if(this.params_.gcps.length>0)for(let e=0,t=this.params_.gcps.length;e<t;e++){let n=e+1,i=new wl(new Ga(Jir(this.params_.gcps[e].source)));i.setId(n),i.setStyle(Gd(`${n}`)),this.srcVectorSource_.addFeature(i);let o=new wl(new Ga(lc(this.params_.gcps[e].target,ov,this.trgMap_.getView().getProjection())));o.setId(n),o.setStyle(Gd(`${n}`)),this.trgVectorSource_.addFeature(o)}if(this.clip_){let e=new IT().readFeature(this.clip_,{dataProjection:ov,featureProjection:this.trgMap_.getView().getProjection()});this.clipVectorSource_.addFeature(e)}}activateAddAction(e){return eBe(this.srcMap_,this.trgMap_,this.srcVectorSource_,this.trgVectorSource_,this.editSrcVectorSource_,this.editTrgVectorSource_,this.onSetHelperMsg_,e)}activateMoveAction(e){return tBe(this.srcMap_,this.trgMap_,this.srcVectorSource_,this.trgVectorSource_,this.onSetHelperMsg_,e)}activateDelAction(e){return rBe(this.srcMap_,this.trgMap_,this.srcVectorSource_,this.trgVectorSource_,this.srcVectorLayer_,this.trgVectorLayer_,this.onSetHelperMsg_,e)}activateDrawClipAction(e){return nBe(this.trgMap_,this.clipVectorSource_,this.onSetHelperMsg_,e)}getParams(){let e=this.srcVectorSource_.getFeatures(),t=[];for(let n=0,i=e.length;n<i;n++){let o=e[n],l=this.trgVectorSource_.getFeatureById(o.getId());t.push({source:eor(o.getGeometry().getCoordinates()),target:lc(l.getGeometry().getCoordinates(),this.trgMap_.getView().getProjection(),ov)})}return Object.assign({},this.params_,{gcps:t})}getClip(){let e=this.clipVectorSource_.getFeatures().length>0?this.clipVectorSource_.getFeatures()[0]:void 0;if(e!==void 0)return new IT().writeGeometryObject(e.getGeometry(),{dataProjection:ov,featureProjection:"EPSG:3857",decimals:9});this.clip_}hasParamsOrClipChanged(){let t=c=>Object.assign({},c,{target:[(0,c9.default)(c.target[0],6),(0,c9.default)(c.target[1],6)]}),n=this.params_.gcps.map(t),i=this.getParams().gcps.map(t),o=JSON.stringify(n)===JSON.stringify(i),l=JSON.stringify(this.clip_)===JSON.stringify(this.getClip());return!o||!l}};var fc={ZOOM_PAN:"control-zoom-pan",ADD_GCP:"control-add-gcp",MOVE_GCP:"control-move-gcp",DEL_GCP:"control-del-gcp",DRAW_CLIP:"control-draw-clip"},_N={AFFINE:"affine",POLYNOM:"polynom",TPS:"tps"};function tor(){return[{id:fc.ADD_GCP,title:Ir("georef-setgcp"),iconClassName:"icon-point-add"},{id:fc.MOVE_GCP,title:Ir("georef-movegcp"),iconClassName:"icon-point-move"},{id:fc.DEL_GCP,title:Ir("georef-delgcp"),iconClassName:"icon-point-remove"}]}function ror(){return[{id:_N.AFFINE,title:"Affine",iconClassName:"icon-layercalc"},{id:_N.POLYNOM,title:"Polynom",iconClassName:"icon-layercalc"},{id:_N.TPS,title:"TPS",iconClassName:"icon-layercalc"}]}var nor=()=>{let r=Bs(AL),e=Bs(IL),t=Bs(ML),n=nu(bd),i=nu(TL),[o,l]=wL(EL),[c,p]=(0,io.useState)(null),[g,_]=(0,io.useState)(null),[x,T]=(0,io.useState)(null),C=dD(g),[D,F]=(0,io.useState)(_N.AFFINE),O=(0,io.useRef)(null),k=tor(),q=ror(),U=ve=>{_(ve)},H=ve=>{F(ve)},se=()=>{let ve=(ye,ge)=>vo(null,null,function*(){let _e=O.current.hasParamsOrClipChanged()||D!==r.params.algorithm||(r==null?void 0:r.overwrites)===void 0||r.overwrites===0?yield d2e(ye,ge):yield m2e(r.overwrites);l(!1),i(_e)});if(!o){let ye=Object.assign(O.current.getParams(),{algorithm:D});ye.gcps.length<4?n({id:"toolbar-info",type:"warning",text:Ir("georef-confirm-warn-gcp")}):(l(!0),ve(r.map_id,ye))}},ie=()=>{if(O.current!==null){let ve={clip:O.current.getClip(),params:Object.assign(O.current.getParams(),{algorithm:D}),overwrites:r.overwrites};ve.params.gcps.length<4?n({id:"toolbar-info",type:"warning",text:Ir("georef-confirm-warn-gcp")}):p({map_id:r.map_id,params:ve})}},ue=()=>{if(c!==null){let ve=(ye,ge)=>vo(null,null,function*(){let _e=yield p2e(ye,ge);if(l(!1),_e.error_code===void 0){let Le=aBe.default.parse(location.search),Re=Le.redirect!==void 0?Le.redirect:"/";window.location.href=`${window.location.origin}${Re}`}else n({id:"toolbar-info",type:"danger",text:_e.error_message})});p(null),l(!0),ve(c.map_id,c.params)}};return(0,io.useEffect)(()=>{r!==null&&O.current===null&&e!==null&&t!==null&&(O.current=new yN({clip:(r==null?void 0:r.clip)!==void 0&&(r==null?void 0:r.clip)!==null?{type:r.clip.type,coordinates:r.clip.coordinates}:void 0,onSetHelperMsg:ve=>{n({id:"toolbar-info",type:"info",text:ve})},params:{algorithm:r.params.algorithm,gcps:r.params.gcps},sourceMap:e.map,targetMap:t.map}),_(fc.ZOOM_PAN),T(u9(e.map,t.map,()=>{})),F(r.params.algorithm))},[r,e,t,_,T,n]),(0,io.useEffect)(()=>{x!==void 0&&g!==C&&(g===fc.ZOOM_PAN?T(u9(e.map,t.map,x.disable)):O.current!==null&&g===fc.ADD_GCP?T(O.current.activateAddAction(x.disable)):O.current!==null&&g===fc.MOVE_GCP?T(O.current.activateMoveAction(x.disable)):O.current!==null&&g===fc.DEL_GCP?T(O.current.activateDelAction(x.disable)):O.current!==null&&g===fc.DRAW_CLIP?T(O.current.activateDrawClipAction(x.disable)):x.disable())},[g,C,x,T]),io.default.createElement("div",{className:"vk-georeference-toolbar"},io.default.createElement("div",null,io.default.createElement(IS,{activeControl:g,id:fc.ZOOM_PAN,iconClassName:"icon-move",onClick:U,title:Ir("georef-movemap")}),io.default.createElement(YZ,{id:"control-toggle-gcp-action",activeControl:g,defaultTitle:Ir("georef-editgcp"),options:k,onClick:U,parentIconClassName:"icon-points"}),io.default.createElement(IS,{activeControl:g,id:fc.DRAW_CLIP,iconClassName:"icon-draw",onClick:U,title:Ir("georef-drawclip")})),io.default.createElement("div",null,io.default.createElement(YZ,{id:"control-toggle-transformation",activeControl:D,className:"control-toggle-transformations",parentIconClassName:"icon-layercalc",disableActiveBehavior:!0,options:q,onClick:H}),io.default.createElement(IS,{id:"get-rectified-image",iconClassName:"icon-reload",onClick:se,title:Ir("georef-validate")}),io.default.createElement(IS,{id:"confirm-rectified-image",iconClassName:"icon-save",className:"save",onClick:ie,title:Ir("georef-confirm")})),c!==null&&io.default.createElement(xFe,{onClose:()=>p(null),onSubmit:ue}))},sBe=nor;var Iu=ke(Et(),1),Wk=ke(tn(),1);var xGe=ke(JH(),1);var $a=ke(Et(),1);var ior=()=>$a.default.createElement("div",{className:"vkf-loading-indicator"},$a.default.createElement("svg",{className:"loading-icon",version:"1.1",id:"Layer_1",x:"0",y:"0",viewBox:"0 0 70 100"},$a.default.createElement("rect",{fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 3 50)"},$a.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite"}),$a.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"1.2s",values:"0;60;0",repeatCount:"indefinite"})),$a.default.createElement("rect",{x:"17",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 20 50)"},$a.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.1s"}),$a.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:".5s",values:"0;5;0",repeatCount:"indefinite"})),$a.default.createElement("rect",{x:"40",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 40 50)"},$a.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.3s"}),$a.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"2s",values:"0;30;0",repeatCount:"indefinite",begin:"0.6s"})),$a.default.createElement("rect",{x:"60",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 58 50)"},$a.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.5s"}),$a.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"1s",values:"0;60;0",repeatCount:"indefinite",begin:".3s"}))),$a.default.createElement("div",{className:"loading-text"},"Loading\u2026")),lBe=ior;var uBe=lBe;var FK=ke(Et(),1);var qx=ke(Et(),1),eVe=ke(lS(),1),dI=ke(tn(),1);var oor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),aor=function(r){oor(e,r);function e(t){var n=r.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+t,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,n=this.endPixel_,i="px",o=this.element_.style;o.left=Math.min(t[0],n[0])+i,o.top=Math.min(t[1],n[1])+i,o.width=Math.abs(n[0]-t[0])+i,o.height=Math.abs(n[1]-t[1])+i},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,n){this.startPixel_=t,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,n=this.endPixel_,i=[t,[t[0],n[1]],n,[n[0],t[1]]],o=i.map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new uc([o])},e.prototype.getGeometry=function(){return this.geometry_},e}(Cd),cBe=aor;var hBe=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xN={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},h9=function(r){hBe(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.coordinate=n,o.mapBrowserEvent=i,o}return e}(Pi);var sor=function(r){hBe(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un;var i=t||{};return n.box_=new cBe(i.className||"ol-dragbox"),n.minArea_=i.minArea!==void 0?i.minArea:64,i.onBoxEnd&&(n.onBoxEnd=i.onBoxEnd),n.startPixel_=null,n.condition_=i.condition?i.condition:uN,n.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:n.defaultBoxEndCondition,n}return e.prototype.defaultBoxEndCondition=function(t,n,i){var o=i[0]-n[0],l=i[1]-n[1];return o*o+l*l>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new h9(xN.BOXDRAG,t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var n=this.boxEndCondition_(t,this.startPixel_,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new h9(n?xN.BOXEND:xN.BOXCANCEL,t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new h9(xN.BOXSTART,t.coordinate,t)),!0):!1},e.prototype.onBoxEnd=function(t){},e}(Js),fBe=sor;var lor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),uor=function(r){lor(e,r);function e(t){var n=this,i=t||{},o=i.condition?i.condition:Hd;return n=r.call(this,{condition:o,className:i.className||"ol-dragzoom",minArea:i.minArea})||this,n.duration_=i.duration!==void 0?i.duration:200,n.out_=i.out!==void 0?i.out:!1,n}return e.prototype.onBoxEnd=function(t){var n=this.getMap(),i=n.getView(),o=this.getGeometry();if(this.out_){var l=i.rotatedExtentForGeometry(o),c=i.getResolutionForExtentInternal(l),p=i.getResolution()/c;o=o.clone(),o.scale(p*p)}i.fitInternal(o,{duration:this.duration_,easing:gu})},e}(fBe),fx=uor;var fh={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};var cor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),hor=function(r){cor(e,r);function e(t){var n=r.call(this)||this,i=t.element;return i&&!t.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),n.element=i||null,n.target_=null,n.map_=null,n.listenerKeys=[],t.render&&(n.render=t.render),t.target&&n.setTarget(t.target),n}return e.prototype.disposeInternal=function(){MT(this.element),r.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&MT(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n)Qr(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=t,t){var o=this.target_?this.target_:t.getOverlayContainerStopEvent();o.appendChild(this.element),this.render!==bl&&this.listenerKeys.push(Mr(t,fh.POSTRENDER,this.render,this)),t.render()}},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_=typeof t=="string"?document.getElementById(t):t},e}(wo),gs=hor;var To={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var por=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pBe=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],dBe={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},dor=function(r){por(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),target:i.target})||this,n.on,n.once,n.un,n.keys_=i.keys!==void 0?i.keys:!1,n.source_=i.source,n.isInFullscreen_=!1,n.boundHandleMapTargetChange_=n.handleMapTargetChange_.bind(n),n.cssClassName_=i.className!==void 0?i.className:"ol-full-screen",n.documentListeners_=[],n.activeClassName_=i.activeClassName!==void 0?i.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=i.inactiveClassName!==void 0?i.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var o=i.label!==void 0?i.label:"\u2922";n.labelNode_=typeof o=="string"?document.createTextNode(o):o;var l=i.labelActive!==void 0?i.labelActive:"\xD7";n.labelActiveNode_=typeof l=="string"?document.createTextNode(l):l;var c=i.tipLabel?i.tipLabel:"Toggle full-screen";return n.button_=document.createElement("button"),n.button_.title=c,n.button_.setAttribute("type","button"),n.button_.appendChild(n.labelNode_),n.button_.addEventListener(qt.CLICK,n.handleClick_.bind(n),!1),n.setClassName_(n.button_,n.isInFullscreen_),n.element.className="".concat(n.cssClassName_," ").concat(pu," ").concat(oh),n.element.appendChild(n.button_),n}return e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){var t=this.getMap();if(t){var n=t.getOwnerDocument();if(mBe(n))if(gBe(n))gor(n);else{var i=void 0;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=t.getTargetElement(),this.keys_?mor(i):vBe(i)}}},e.prototype.handleFullScreenChange_=function(){var t=this.getMap();if(t){var n=this.isInFullscreen_;this.isInFullscreen_=gBe(t.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Q0(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(dBe.ENTERFULLSCREEN)):(Q0(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(dBe.LEAVEFULLSCREEN)),t.updateSize())}},e.prototype.setClassName_=function(t,n){var i,o,l,c;n?((i=t.classList).remove.apply(i,this.inactiveClassName_),(o=t.classList).add.apply(o,this.activeClassName_)):((l=t.classList).remove.apply(l,this.activeClassName_),(c=t.classList).add.apply(c,this.inactiveClassName_))},e.prototype.setMap=function(t){var n=this.getMap();n&&n.removeChangeListener(To.TARGET,this.boundHandleMapTargetChange_),r.prototype.setMap.call(this,t),this.handleMapTargetChange_(),t&&t.addChangeListener(To.TARGET,this.boundHandleMapTargetChange_)},e.prototype.handleMapTargetChange_=function(){for(var t=this.documentListeners_,n=0,i=t.length;n<i;++n)Qr(t[n]);t.length=0;var o=this.getMap();if(o){var l=o.getOwnerDocument();mBe(l)?this.element.classList.remove(FY):this.element.classList.add(FY);for(var n=0,i=pBe.length;n<i;++n)t.push(Mr(l,pBe[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},e}(gs);function mBe(r){var e=r.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&r.msFullscreenEnabled||e.requestFullscreen&&r.fullscreenEnabled)}function gBe(r){return!!(r.webkitIsFullScreen||r.msFullscreenElement||r.fullscreenElement)}function vBe(r){r.requestFullscreen?r.requestFullscreen():r.msRequestFullscreen?r.msRequestFullscreen():r.webkitRequestFullscreen&&r.webkitRequestFullscreen()}function mor(r){r.webkitRequestFullscreen?r.webkitRequestFullscreen():vBe(r)}function gor(r){r.exitFullscreen?r.exitFullscreen():r.msExitFullscreen?r.msExitFullscreen():r.webkitExitFullscreen&&r.webkitExitFullscreen()}var bN=dor;var vor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yor=function(r){vor(e,r);function e(t){var n=r.call(this)||this,i=t||{};return n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleEvent=function(t){var n=!1;if(t.type==$r.DBLCLICK){var i=t.originalEvent,o=t.map,l=t.coordinate,c=i.shiftKey?-this.delta_:this.delta_,p=o.getView();ax(p,c,l,this.duration_),i.preventDefault(),n=!0}return!n},e}(vu),yBe=yor;var _or=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xor=function(r){_or(e,r);function e(t){var n=r.call(this,{stopDown:au})||this,i=t||{};n.kinetic_=i.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var o=i.condition?i.condition:NT(cx,fN);return n.condition_=i.onFocusOnly?NT(lN,o):o,n.noKinetic_=!1,n}return e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=sx(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],l=t.map,c=l.getView();yze(o,c.getResolution()),Y0(o,c.getRotation()),c.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var n=t.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),c=i.getCenterInternal(),p=n.getPixelFromCoordinateInternal(c),g=n.getCoordinateFromPixelInternal([p[0]-o*Math.cos(l),p[1]-o*Math.sin(l)]);i.animateInternal({center:i.getConstrainedCenter(g),duration:500,easing:gu})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var n=t.map,i=n.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},e}(Js),_Be=xor;function px(r){if(r!==void 0)return 0}function f9(r){if(r!==void 0)return r}function xBe(r){var e=2*Math.PI/r;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function bBe(r){var e=r||$0(5);return function(t,n){if(n)return t;if(t!==void 0)return Math.abs(t)<=e?0:t}}var bor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wor=function(r){bor(e,r);function e(t){var n=this,i=t||{};return n=r.call(this,{stopDown:au})||this,n.condition_=i.condition?i.condition:H4e,n.lastAngle_=void 0,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleDragEvent=function(t){if(hN(t)){var n=t.map,i=n.getView();if(i.getConstraints().rotation!==px){var o=n.getSize(),l=t.pixel,c=Math.atan2(o[1]/2-l[1],l[0]-o[0]/2);if(this.lastAngle_!==void 0){var p=c-this.lastAngle_;i.adjustRotationInternal(-p)}this.lastAngle_=c}}},e.prototype.handleUpEvent=function(t){if(!hN(t))return!0;var n=t.map,i=n.getView();return i.endInteraction(this.duration_),!1},e.prototype.handleDownEvent=function(t){if(!hN(t))return!1;if(uN(t)&&this.condition_(t)){var n=t.map;return n.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},e}(Js),wBe=wor;var Wd={LEFT:37,UP:38,RIGHT:39,DOWN:40};var Eor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sor=function(r){Eor(e,r);function e(t){var n=r.call(this)||this,i=t||{};return n.defaultCondition_=function(o){return cx(o)&&cN(o)},n.condition_=i.condition!==void 0?i.condition:n.defaultCondition_,n.duration_=i.duration!==void 0?i.duration:100,n.pixelDelta_=i.pixelDelta!==void 0?i.pixelDelta:128,n}return e.prototype.handleEvent=function(t){var n=!1;if(t.type==qt.KEYDOWN){var i=t.originalEvent,o=i.keyCode;if(this.condition_(t)&&(o==Wd.DOWN||o==Wd.LEFT||o==Wd.RIGHT||o==Wd.UP)){var l=t.map,c=l.getView(),p=c.getResolution()*this.pixelDelta_,g=0,_=0;o==Wd.DOWN?_=-p:o==Wd.LEFT?g=-p:o==Wd.RIGHT?g=p:_=p;var x=[g,_];Y0(x,c.getRotation()),G4e(c,x,this.duration_),i.preventDefault(),n=!0}}return!n},e}(vu),EBe=Sor;var Tor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ior=function(r){Tor(e,r);function e(t){var n=r.call(this)||this,i=t||{};return n.condition_=i.condition?i.condition:cN,n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:100,n}return e.prototype.handleEvent=function(t){var n=!1;if(t.type==qt.KEYDOWN||t.type==qt.KEYPRESS){var i=t.originalEvent,o=i.charCode;if(this.condition_(t)&&(o==43||o==45)){var l=t.map,c=o==43?this.delta_:-this.delta_,p=l.getView();ax(p,c,void 0,this.duration_),i.preventDefault(),n=!0}}return!n},e}(vu),SBe=Ior;var Mor=function(){function r(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return r.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},r.prototype.update=function(e,t){this.points_.push(e,t,Date.now())},r.prototype.end=function(){if(this.points_.length<6)return!1;var e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;for(var n=t-3;n>0&&this.points_[n+2]>e;)n-=3;var i=this.points_[t+2]-this.points_[n+2];if(i<16.666666666666668)return!1;var o=this.points_[t]-this.points_[n],l=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(l,o),this.initialVelocity_=Math.sqrt(o*o+l*l)/i,this.initialVelocity_>this.minVelocity_},r.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},r.prototype.getAngle=function(){return this.angle_},r}(),TBe=Mor;var Aor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),p9={TRACKPAD:"trackpad",WHEEL:"wheel"},Cor=function(r){Aor(e,r);function e(t){var n=this,i=t||{};n=r.call(this,i)||this,n.totalDelta_=0,n.lastDelta_=0,n.maxDelta_=i.maxDelta!==void 0?i.maxDelta:1,n.duration_=i.duration!==void 0?i.duration:250,n.timeout_=i.timeout!==void 0?i.timeout:80,n.useAnchor_=i.useAnchor!==void 0?i.useAnchor:!0,n.constrainResolution_=i.constrainResolution!==void 0?i.constrainResolution:!1;var o=i.condition?i.condition:lx;return n.condition_=i.onFocusOnly?NT(lN,o):o,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var t=this.getMap();if(t){var n=t.getView();n.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var n=t.type;if(n!==qt.WHEEL)return!0;var i=t.map,o=t.originalEvent;o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);var l;if(t.type==qt.WHEEL&&(l=o.deltaY,HFe&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(l/=bD),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(l*=40)),l===0)return!1;this.lastDelta_=l;var c=Date.now();this.startTime_===void 0&&(this.startTime_=c),(!this.mode_||c-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?p9.TRACKPAD:p9.WHEEL);var p=i.getView();if(this.mode_===p9.TRACKPAD&&!(p.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(p.getAnimating()&&p.cancelAnimations(),p.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),p.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=c,!1;this.totalDelta_+=l;var g=Math.max(this.timeout_-(c-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),g),!1},e.prototype.handleWheelZoom_=function(t){var n=t.getView();n.getAnimating()&&n.cancelAnimations();var i=-jn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),ax(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(vu),IBe=Cor;var Por=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ror=function(r){Por(e,r);function e(t){var n=this,i=t||{},o=i;return o.stopDown||(o.stopDown=au),n=r.call(this,o)||this,n.anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=i.threshold!==void 0?i.threshold:.3,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleDragEvent=function(t){var n=0,i=this.targetPointers[0],o=this.targetPointers[1],l=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX);if(this.lastAngle_!==void 0){var c=l-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=c}this.lastAngle_=l;var p=t.map,g=p.getView();if(g.getConstraints().rotation!==px){var _=p.getViewport().getBoundingClientRect(),x=sx(this.targetPointers);x[0]-=_.left,x[1]-=_.top,this.anchor_=p.getCoordinateFromPixelInternal(x),this.rotating_&&(p.render(),g.adjustRotationInternal(n,this.anchor_))}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map,i=n.getView();return i.endInteraction(this.duration_),!1}else return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},e}(Js),MBe=Ror;var Oor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Lor=function(r){Oor(e,r);function e(t){var n=this,i=t||{},o=i;return o.stopDown||(o.stopDown=au),n=r.call(this,o)||this,n.anchor_=null,n.duration_=i.duration!==void 0?i.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return e.prototype.handleDragEvent=function(t){var n=1,i=this.targetPointers[0],o=this.targetPointers[1],l=i.clientX-o.clientX,c=i.clientY-o.clientY,p=Math.sqrt(l*l+c*c);this.lastDistance_!==void 0&&(n=this.lastDistance_/p),this.lastDistance_=p;var g=t.map,_=g.getView();n!=1&&(this.lastScaleDelta_=n);var x=g.getViewport().getBoundingClientRect(),T=sx(this.targetPointers);T[0]-=x.left,T[1]-=x.top,this.anchor_=g.getCoordinateFromPixelInternal(T),g.render(),_.adjustResolutionInternal(n,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map,i=n.getView(),o=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,o),!1}else return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},e}(Js),ABe=Lor;function dx(r){var e=r||{},t=new Kn,n=new TBe(-.005,.05,100),i=e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0;i&&t.push(new wBe);var o=e.doubleClickZoom!==void 0?e.doubleClickZoom:!0;o&&t.push(new yBe({delta:e.zoomDelta,duration:e.zoomDuration}));var l=e.dragPan!==void 0?e.dragPan:!0;l&&t.push(new _Be({onFocusOnly:e.onFocusOnly,kinetic:n}));var c=e.pinchRotate!==void 0?e.pinchRotate:!0;c&&t.push(new MBe);var p=e.pinchZoom!==void 0?e.pinchZoom:!0;p&&t.push(new ABe({duration:e.zoomDuration}));var g=e.keyboard!==void 0?e.keyboard:!0;g&&(t.push(new EBe),t.push(new SBe({delta:e.zoomDelta,duration:e.zoomDuration})));var _=e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0;_&&t.push(new IBe({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration}));var x=e.shiftDragZoom!==void 0?e.shiftDragZoom:!0;return x&&t.push(new fx({duration:e.zoomDuration})),t}var Dor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nor=function(r){Dor(e,r);function e(t){var n=r.call(this)||this;return n.map_=t,n}return e.prototype.dispatchRenderEvent=function(t,n){rr()},e.prototype.calculateMatrices2D=function(t){var n=t.viewState,i=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;Eo(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),F0(o,i)},e.prototype.forEachFeatureAtCoordinate=function(t,n,i,o,l,c,p,g){var _,x=n.viewState;function T($e,Be,nt,We){return l.call(c,Be,$e?nt:null,We)}var C=x.projection,D=LD(t.slice(),C),F=[[0,0]];if(C.canWrapX()&&o){var O=C.getExtent(),k=fn(O);F.push([-k,0],[k,0])}for(var q=n.layerStatesArray,U=q.length,H=[],se=[],ie=0;ie<F.length;ie++)for(var ue=U-1;ue>=0;--ue){var ve=q[ue],ye=ve.layer;if(ye.hasRenderer()&&ev(ve,x)&&p.call(g,ye)){var ge=ye.getRenderer(),_e=ye.getSource();if(ge&&_e){var Le=_e.getWrapX()?D:t,Re=T.bind(null,ve.managed);se[0]=Le[0]+F[ie][0],se[1]=Le[1]+F[ie][1],_=ge.forEachFeatureAtCoordinate(se,n,i,Re,H)}if(_)return _}}if(H.length!==0){var je=1/H.length;return H.forEach(function($e,Be){return $e.distanceSq+=Be*je}),H.sort(function($e,Be){return $e.distanceSq-Be.distanceSq}),H.some(function($e){return _=$e.callback($e.feature,$e.layer,$e.geometry)}),_}},e.prototype.forEachLayerAtPixel=function(t,n,i,o,l){return rr()},e.prototype.hasFeatureAtCoordinate=function(t,n,i,o,l,c){var p=this.forEachFeatureAtCoordinate(t,n,i,o,fs,this,l,c);return p!==void 0},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){rr()},e.prototype.scheduleExpireIconCache=function(t){ox.canExpireCache()&&t.postRenderFunctions.push(kor)},e}(Cd);function kor(r,e){ox.expire()}var CBe=Nor;var qor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),jor=function(r){qor(e,r);function e(t){var n=r.call(this,t)||this;n.fontChangeListenerKey_=Mr(ah,rc.PROPERTYCHANGE,t.redrawText.bind(t)),n.element_=document.createElement("div");var i=n.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",n.element_.className=pu+" ol-layers";var o=t.getViewport();return o.insertBefore(n.element_,o.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return e.prototype.dispatchRenderEvent=function(t,n){var i=this.getMap();if(i.hasListener(t)){var o=new zd(t,void 0,n);i.dispatchEvent(o)}},e.prototype.disposeInternal=function(){Qr(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),r.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(zo.PRECOMPOSE,t);var n=t.layerStatesArray.sort(function(C,D){return C.zIndex-D.zIndex}),i=t.viewState;this.children_.length=0;for(var o=[],l=null,c=0,p=n.length;c<p;++c){var g=n[c];t.layerIndex=c;var _=g.layer,x=_.getSourceState();if(!ev(g,i)||x!="ready"&&x!="undefined"){_.unrender();continue}var T=_.render(t,l);T&&(T!==l&&(this.children_.push(T),l=T),"getDeclutter"in _&&o.push(_))}for(var c=o.length-1;c>=0;--c)o[c].renderDeclutter(t);r4e(this.element_,this.children_),this.dispatchRenderEvent(zo.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)},e.prototype.forEachLayerAtPixel=function(t,n,i,o,l){for(var c=n.viewState,p=n.layerStatesArray,g=p.length,_=g-1;_>=0;--_){var x=p[_],T=x.layer;if(T.hasRenderer()&&ev(x,c)&&l(T)){var C=T.getRenderer(),D=C.getDataAtPixel(t,n,i);if(D){var F=o(T,D);if(F)return F}}}},e}(CBe),PBe=jor;var RBe=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Df=function(r){RBe(e,r);function e(t,n){var i=r.call(this,t)||this;return i.layer=n,i}return e}(Pi);var d9={LAYERS:"layers"},For=function(r){RBe(e,r);function e(t){var n=this,i=t||{},o=Gr({},i);delete o.layers;var l=i.layers;return n=r.call(this,o)||this,n.on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(d9.LAYERS,n.handleLayersChanged_),l?Array.isArray(l)?l=new Kn(l.slice(),{unique:!0}):ir(typeof l.getArray=="function",43):l=new Kn(void 0,{unique:!0}),n.setLayers(l),n}return e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(Qr),this.layersListenerKeys_.length=0;var t=this.getLayers();this.layersListenerKeys_.push(Mr(t,fi.ADD,this.handleLayersAdd_,this),Mr(t,fi.REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_)this.listenerKeys_[n].forEach(Qr);Ws(this.listenerKeys_);for(var i=t.getArray(),o=0,l=i.length;o<l;o++){var c=i[o];this.registerLayerListeners_(c),this.dispatchEvent(new Df("addlayer",c))}this.changed()},e.prototype.registerLayerListeners_=function(t){var n=[Mr(t,rc.PROPERTYCHANGE,this.handleLayerChange_,this),Mr(t,qt.CHANGE,this.handleLayerChange_,this)];t instanceof e&&n.push(Mr(t,"addlayer",this.handleLayerGroupAdd_,this),Mr(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Jt(t)]=n},e.prototype.handleLayerGroupAdd_=function(t){this.dispatchEvent(new Df("addlayer",t.layer))},e.prototype.handleLayerGroupRemove_=function(t){this.dispatchEvent(new Df("removelayer",t.layer))},e.prototype.handleLayersAdd_=function(t){var n=t.element;this.registerLayerListeners_(n),this.dispatchEvent(new Df("addlayer",n)),this.changed()},e.prototype.handleLayersRemove_=function(t){var n=t.element,i=Jt(n);this.listenerKeys_[i].forEach(Qr),delete this.listenerKeys_[i],this.dispatchEvent(new Df("removelayer",n)),this.changed()},e.prototype.getLayers=function(){return this.get(d9.LAYERS)},e.prototype.setLayers=function(t){var n=this.getLayers();if(n)for(var i=n.getArray(),o=0,l=i.length;o<l;++o)this.dispatchEvent(new Df("removelayer",i[o]));this.set(d9.LAYERS,t)},e.prototype.getLayersArray=function(t){var n=t!==void 0?t:[];return this.getLayers().forEach(function(i){i.getLayersArray(n)}),n},e.prototype.getLayerStatesArray=function(t){var n=t!==void 0?t:[],i=n.length;this.getLayers().forEach(function(_){_.getLayerStatesArray(n)});var o=this.getLayerState(),l=o.zIndex;!t&&o.zIndex===void 0&&(l=0);for(var c=i,p=n.length;c<p;c++){var g=n[c];g.opacity*=o.opacity,g.visible=g.visible&&o.visible,g.maxResolution=Math.min(g.maxResolution,o.maxResolution),g.minResolution=Math.max(g.minResolution,o.minResolution),g.minZoom=Math.max(g.minZoom,o.minZoom),g.maxZoom=Math.min(g.maxZoom,o.maxZoom),o.extent!==void 0&&(g.extent!==void 0?g.extent=su(g.extent,o.extent):g.extent=o.extent),g.zIndex===void 0&&(g.zIndex=l)}return n},e.prototype.getSourceState=function(){return"ready"},e}(WD),jT=For;var FT={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var zor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bor=function(r){zor(e,r);function e(t,n){var i=r.call(this,t)||this;i.map_=t,i.clickTimeoutId_,i.emulateClicks_=!1,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=n===void 0?1:n,i.down_=null;var o=i.map_.getViewport();return i.activePointers_=[],i.trackedTouches_={},i.element_=o,i.pointerdownListenerKey_=Mr(o,FT.POINTERDOWN,i.handlePointerDown_,i),i.originalPointerMoveEvent_,i.relayedListenerKey_=Mr(o,FT.POINTERMOVE,i.relayMoveEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener(qt.TOUCHMOVE,i.boundHandleTouchMove_,wD?{passive:!1}:!1),i}return e.prototype.emulateClick_=function(t){var n=new mu($r.CLICK,this.map_,t);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new mu($r.DBLCLICK,this.map_,t),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var i=new mu($r.SINGLECLICK,this.map_,t);this.dispatchEvent(i)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var n=t,i=n.pointerId;if(n.type==$r.POINTERUP||n.type==$r.POINTERCANCEL){delete this.trackedTouches_[i];for(var o in this.trackedTouches_)if(this.trackedTouches_[o].target!==n.target){delete this.trackedTouches_[o];break}}else(n.type==$r.POINTERDOWN||n.type==$r.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=vD(this.trackedTouches_)},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var n=new mu($r.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Qr),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return t.button===0},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);var n=new mu($r.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.down_={};for(var i in t){var o=t[i];this.down_[i]=typeof o=="function"?bl:o}if(this.dragListenerKeys_.length===0){var l=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Mr(l,$r.POINTERMOVE,this.handlePointerMove_,this),Mr(l,$r.POINTERUP,this.handlePointerUp_,this),Mr(this.element_,$r.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==l&&this.dragListenerKeys_.push(Mr(this.element_.getRootNode(),$r.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;var n=new mu($r.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}},e.prototype.relayMoveEvent_=function(t){this.originalPointerMoveEvent_=t;var n=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new mu($r.POINTERMOVE,this.map_,t,n))},e.prototype.handleTouchMove_=function(t){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Qr(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(qt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Qr(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Qr),this.dragListenerKeys_.length=0,this.element_=null,r.prototype.disposeInternal.call(this)},e}(Zs),OBe=Bor;var zT=1/0,Uor=function(){function r(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return r.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Ws(this.queuedElements_)},r.prototype.dequeue=function(){var e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},r.prototype.enqueue=function(e){ir(!(this.keyFunction_(e)in this.queuedElements_),31);var t=this.priorityFunction_(e);return t!=zT?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},r.prototype.getCount=function(){return this.elements_.length},r.prototype.getLeftChildIndex_=function(e){return e*2+1},r.prototype.getRightChildIndex_=function(e){return e*2+2},r.prototype.getParentIndex_=function(e){return e-1>>1},r.prototype.heapify_=function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)},r.prototype.isEmpty=function(){return this.elements_.length===0},r.prototype.isKeyQueued=function(e){return e in this.queuedElements_},r.prototype.isQueued=function(e){return this.isKeyQueued(this.keyFunction_(e))},r.prototype.siftUp_=function(e){for(var t=this.elements_,n=this.priorities_,i=t.length,o=t[e],l=n[e],c=e;e<i>>1;){var p=this.getLeftChildIndex_(e),g=this.getRightChildIndex_(e),_=g<i&&n[g]<n[p]?g:p;t[e]=t[_],n[e]=n[_],e=_}t[e]=o,n[e]=l,this.siftDown_(c,e)},r.prototype.siftDown_=function(e,t){for(var n=this.elements_,i=this.priorities_,o=n[t],l=i[t];t>e;){var c=this.getParentIndex_(t);if(i[c]>l)n[t]=n[c],i[t]=i[c],t=c;else break}n[t]=o,i[t]=l},r.prototype.reprioritize=function(){var e=this.priorityFunction_,t=this.elements_,n=this.priorities_,i=0,o=t.length,l,c,p;for(c=0;c<o;++c)l=t[c],p=e(l),p==zT?delete this.queuedElements_[this.keyFunction_(l)]:(n[i]=p,t[i++]=l);t.length=i,n.length=i,this.heapify_()},r}(),LBe=Uor;var Bt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var Vor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gor=function(r){Vor(e,r);function e(t,n){var i=r.call(this,function(o){return t.apply(null,o)},function(o){return o[0].getKey()})||this;return i.boundHandleTileChange_=i.handleTileChange.bind(i),i.tileChangeCallback_=n,i.tilesLoading_=0,i.tilesLoadingKeys_={},i}return e.prototype.enqueue=function(t){var n=r.prototype.enqueue.call(this,t);if(n){var i=t[0];i.addEventListener(qt.CHANGE,this.boundHandleTileChange_)}return n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var n=t.target,i=n.getState();if(i===Bt.LOADED||i===Bt.ERROR||i===Bt.EMPTY){n.removeEventListener(qt.CHANGE,this.boundHandleTileChange_);var o=n.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,n){for(var i=0,o,l,c;this.tilesLoading_<t&&i<n&&this.getCount()>0;)l=this.dequeue()[0],c=l.getKey(),o=l.getState(),o===Bt.IDLE&&!(c in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[c]=!0,++this.tilesLoading_,++i,l.load())},e}(LBe),DBe=Gor;function NBe(r,e,t,n,i){if(!r||!(t in r.wantedTiles))return zT;if(!r.wantedTiles[t][e.getKey()])return zT;var o=r.viewState.center,l=n[0]-o[0],c=n[1]-o[1];return 65536*Math.log(i)+Math.sqrt(l*l+c*c)/i}var yu={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var kBe=42,Zd=256;function m9(r,e,t){return function(n,i,o,l,c){if(n){if(!i&&!e)return n;var p=e?0:o[0]*i,g=e?0:o[1]*i,_=c?c[0]:0,x=c?c[1]:0,T=r[0]+p/2+_,C=r[2]-p/2+_,D=r[1]+g/2+x,F=r[3]-g/2+x;T>C&&(T=(C+T)/2,C=T),D>F&&(D=(F+D)/2,F=D);var O=jn(n[0],T,C),k=jn(n[1],D,F);if(l&&t&&i){var q=30*i;O+=-q*Math.log(1+Math.max(0,T-n[0])/q)+q*Math.log(1+Math.max(0,n[0]-C)/q),k+=-q*Math.log(1+Math.max(0,D-n[1])/q)+q*Math.log(1+Math.max(0,n[1]-F)/q)}return[O,k]}}}function qBe(r){return r}function g9(r,e,t,n){var i=fn(e)/t[0],o=Fo(e)/t[1];return n?Math.min(r,Math.max(i,o)):Math.min(r,Math.min(i,o))}function v9(r,e,t){var n=Math.min(r,e),i=50;return n*=Math.log(1+i*Math.max(0,r/e-1))/i+1,t&&(n=Math.max(n,t),n/=Math.log(1+i*Math.max(0,t/r-1))/i+1),jn(n,t/2,e*2)}function jBe(r,e,t,n){return function(i,o,l,c){if(i!==void 0){var p=r[0],g=r[r.length-1],_=t?g9(p,t,l,n):p;if(c){var x=e!==void 0?e:!0;return x?v9(i,_,g):jn(i,g,_)}var T=Math.min(_,i),C=Math.floor(k0(r,T,o));return r[C]>_&&C<r.length-1?r[C+1]:r[C]}else return}}function FBe(r,e,t,n,i,o){return function(l,c,p,g){if(l!==void 0){var _=i?g9(e,i,p,o):e,x=t!==void 0?t:0;if(g){var T=n!==void 0?n:!0;return T?v9(l,_,x):jn(l,x,_)}var C=1e-9,D=Math.ceil(Math.log(e/_)/Math.log(r)-C),F=-c*(.5-C)+.5,O=Math.min(_,l),k=Math.floor(Math.log(e/O)/Math.log(r)+F),q=Math.max(D,k),U=e/Math.pow(r,q);return jn(U,x,_)}else return}}function y9(r,e,t,n,i){return function(o,l,c,p){if(o!==void 0){var g=n?g9(r,n,c,i):r,_=t!==void 0?t:!0;return!_||!p?jn(o,e,g):v9(o,g,e)}else return}}var $or=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_9=0,Hor=function(r){$or(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un;var i=Gr({},t);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=DD(i.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,i.projection&&wze(),i.center&&(i.center=wi(i.center,n.projection_)),i.extent&&(i.extent=Ua(i.extent,n.projection_)),n.applyOptions_(i),n}return e.prototype.applyOptions_=function(t){var n=Gr({},t);for(var i in yu)delete n[i];this.setProperties(n,!0);var o=Zor(t);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=o.minZoom;var l=Wor(t),c=o.constraint,p=Yor(t);this.constraints_={center:l,resolution:c,rotation:p},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var n=this.padding_;this.padding_=t;var i=this.getCenter();if(i){var o=t||[0,0,0,0];n=n||[0,0,0,0];var l=this.getResolution(),c=l/2*(o[3]-n[3]+n[1]-o[1]),p=l/2*(o[0]-n[0]+n[2]-o[2]);this.setCenterInternal([i[0]+c,i[1]-p])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Gr({},n,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var o=arguments[i];o.center&&(o=Gr({},o),o.center=wi(o.center,this.getProjection())),o.anchor&&(o=Gr({},o),o.anchor=wi(o.anchor,this.getProjection())),n[i]=o}this.animateInternal.apply(this,n)},e.prototype.animateInternal=function(t){var n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);for(var o=0;o<n&&!this.isDef();++o){var l=arguments[o];l.center&&this.setCenterInternal(l.center),l.zoom!==void 0?this.setZoom(l.zoom):l.resolution&&this.setResolution(l.resolution),l.rotation!==void 0&&this.setRotation(l.rotation)}if(o===n){i&&wN(i,!0);return}for(var c=Date.now(),p=this.targetCenter_.slice(),g=this.targetResolution_,_=this.targetRotation_,x=[];o<n;++o){var T=arguments[o],C={start:c,complete:!1,anchor:T.anchor,duration:T.duration!==void 0?T.duration:1e3,easing:T.easing||U4e,callback:i};if(T.center&&(C.sourceCenter=p,C.targetCenter=T.center.slice(),p=C.targetCenter),T.zoom!==void 0?(C.sourceResolution=g,C.targetResolution=this.getResolutionForZoom(T.zoom),g=C.targetResolution):T.resolution&&(C.sourceResolution=g,C.targetResolution=T.resolution,g=C.targetResolution),T.rotation!==void 0){C.sourceRotation=_;var D=El(T.rotation-_+Math.PI,2*Math.PI)-Math.PI;C.targetRotation=_+D,_=C.targetRotation}Kor(C)?C.complete=!0:c+=C.duration,x.push(C)}this.animations_.push(x),this.setHint(Bo.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[Bo.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[Bo.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(Bo.ANIMATING,-this.hints_[Bo.ANIMATING]);for(var t,n=0,i=this.animations_.length;n<i;++n){var o=this.animations_[n];if(o[0].callback&&wN(o[0].callback,!1),!t)for(var l=0,c=o.length;l<c;++l){var p=o[l];if(!p.complete){t=p.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},e.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var t=Date.now(),n=!1,i=this.animations_.length-1;i>=0;--i){for(var o=this.animations_[i],l=!0,c=0,p=o.length;c<p;++c){var g=o[c];if(!g.complete){var _=t-g.start,x=g.duration>0?_/g.duration:1;x>=1?(g.complete=!0,x=1):l=!1;var T=g.easing(x);if(g.sourceCenter){var C=g.sourceCenter[0],D=g.sourceCenter[1],F=g.targetCenter[0],O=g.targetCenter[1];this.nextCenter_=g.targetCenter;var k=C+T*(F-C),q=D+T*(O-D);this.targetCenter_=[k,q]}if(g.sourceResolution&&g.targetResolution){var U=T===1?g.targetResolution:g.sourceResolution+T*(g.targetResolution-g.sourceResolution);if(g.anchor){var H=this.getViewportSize_(this.getRotation()),se=this.constraints_.resolution(U,0,H,!0);this.targetCenter_=this.calculateCenterZoom(se,g.anchor)}this.nextResolution_=g.targetResolution,this.targetResolution_=U,this.applyTargetState_(!0)}if(g.sourceRotation!==void 0&&g.targetRotation!==void 0){var ie=T===1?El(g.targetRotation+Math.PI,2*Math.PI)-Math.PI:g.sourceRotation+T*(g.targetRotation-g.sourceRotation);if(g.anchor){var ue=this.constraints_.rotation(ie,!0);this.targetCenter_=this.calculateCenterRotate(ue,g.anchor)}this.nextRotation_=g.targetRotation,this.targetRotation_=ie}if(this.applyTargetState_(!0),n=!0,!g.complete)break}}if(l){this.animations_[i]=null,this.setHint(Bo.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var ve=o[0].callback;ve&&wN(ve,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,n){var i,o=this.getCenterInternal();return o!==void 0&&(i=[o[0]-n[0],o[1]-n[1]],Y0(i,t-this.getRotation()),vze(i,n)),i},e.prototype.calculateCenterZoom=function(t,n){var i,o=this.getCenterInternal(),l=this.getResolution();if(o!==void 0&&l!==void 0){var c=n[0]-t*(n[0]-o[0])/l,p=n[1]-t*(n[1]-o[1])/l;i=[c,p]}return i},e.prototype.getViewportSize_=function(t){var n=this.viewportSize_;if(t){var i=n[0],o=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(o*Math.cos(t))]}else return n},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t&&Dd(t,this.getProjection())},e.prototype.getCenterInternal=function(){return this.get(yu.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},e.prototype.getHints=function(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var n=this.calculateExtentInternal(t);return Nd(n,this.getProjection())},e.prototype.calculateExtentInternal=function(t){var n=t||this.getViewportSizeMinusPadding_(),i=this.getCenterInternal();ir(i,1);var o=this.getResolution();ir(o!==void 0,2);var l=this.getRotation();return ir(l!==void 0,3),uT(i,o,l,n)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(yu.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,n){return this.getResolutionForExtentInternal(Ua(t,this.getProjection()),n)},e.prototype.getResolutionForExtentInternal=function(t,n){var i=n||this.getViewportSizeMinusPadding_(),o=fn(t)/i[0],l=Fo(t)/i[1];return Math.max(o,l)},e.prototype.getResolutionForValueFunction=function(t){var n=t||2,i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,l=Math.log(i/o)/Math.log(n);return function(c){var p=i/Math.pow(n,c*l);return p}},e.prototype.getRotation=function(){return this.get(yu.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var n=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,l=Math.log(i/o)/n;return function(c){var p=Math.log(i/c)/n/l;return p}},e.prototype.getViewportSizeMinusPadding_=function(t){var n=this.getViewportSize_(t),i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n},e.prototype.getState=function(){var t=this.getProjection(),n=this.getResolution(),i=this.getRotation(),o=this.getCenterInternal(),l=this.padding_;if(l){var c=this.getViewportSizeMinusPadding_();o=x9(o,this.getViewportSize_(),[c[0]/2+l[3],c[1]/2+l[0]],n,i)}return{center:o.slice(0),projection:t!==void 0?t:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,n=this.getResolution();return n!==void 0&&(t=this.getZoomForResolution(n)),t},e.prototype.getZoomForResolution=function(t){var n=this.minZoom_||0,i,o;if(this.resolutions_){var l=k0(this.resolutions_,t,1);n=l,i=this.resolutions_[l],l==this.resolutions_.length-1?o=2:o=i/this.resolutions_[l+1]}else i=this.maxResolution_,o=this.zoomFactor_;return n+Math.log(i/t)/Math.log(o)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=jn(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,jn(t-n,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,n){var i;if(ir(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){ir(!Yg(t),25);var o=Ua(t,this.getProjection());i=TT(o)}else if(t.getType()==="Circle"){var o=Ua(t.getExtent(),this.getProjection());i=TT(o),i.rotate(this.getRotation(),Ks(o))}else{var l=cu();l?i=t.clone().transform(l,this.getProjection()):i=t}this.fitInternal(i,n)},e.prototype.rotatedExtentForGeometry=function(t){for(var n=this.getRotation(),i=Math.cos(n),o=Math.sin(-n),l=t.getFlatCoordinates(),c=t.getStride(),p=1/0,g=1/0,_=-1/0,x=-1/0,T=0,C=l.length;T<C;T+=c){var D=l[T]*i-l[T+1]*o,F=l[T]*o+l[T+1]*i;p=Math.min(p,D),g=Math.min(g,F),_=Math.max(_,D),x=Math.max(x,F)}return[p,g,_,x]},e.prototype.fitInternal=function(t,n){var i=n||{},o=i.size;o||(o=this.getViewportSizeMinusPadding_());var l=i.padding!==void 0?i.padding:[0,0,0,0],c=i.nearest!==void 0?i.nearest:!1,p;i.minResolution!==void 0?p=i.minResolution:i.maxZoom!==void 0?p=this.getResolutionForZoom(i.maxZoom):p=0;var g=this.rotatedExtentForGeometry(t),_=this.getResolutionForExtentInternal(g,[o[0]-l[1]-l[3],o[1]-l[0]-l[2]]);_=isNaN(_)?p:Math.max(_,p),_=this.getConstrainedResolution(_,c?0:1);var x=this.getRotation(),T=Math.sin(x),C=Math.cos(x),D=Ks(g);D[0]+=(l[1]-l[3])/2*_,D[1]+=(l[0]-l[2])/2*_;var F=D[0]*C-D[1]*T,O=D[1]*C+D[0]*T,k=this.getConstrainedCenter([F,O],_),q=i.callback?i.callback:bl;i.duration!==void 0?this.animateInternal({resolution:_,center:k,duration:i.duration,easing:i.easing},q):(this.targetResolution_=_,this.targetCenter_=k,this.applyTargetState_(!1,!0),wN(q,!0))},e.prototype.centerOn=function(t,n,i){this.centerOnInternal(wi(t,this.getProjection()),n,i)},e.prototype.centerOnInternal=function(t,n,i){this.setCenterInternal(x9(t,n,i,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,n,i,o){var l,c=this.padding_;if(c&&t){var p=this.getViewportSizeMinusPadding_(-i),g=x9(t,o,[p[0]/2+c[3],p[1]/2+c[0]],n,i);l=[t[0]-g[0],t[1]-g[1]]}return l},e.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},e.prototype.adjustCenter=function(t){var n=Dd(this.targetCenter_,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var n=this.targetCenter_;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])},e.prototype.adjustResolution=function(t,n){var i=n&&wi(n,this.getProjection());this.adjustResolutionInternal(t,i)},e.prototype.adjustResolutionInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*t,0,o,i);n&&(this.targetCenter_=this.calculateCenterZoom(l,n)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,n){this.adjustResolution(Math.pow(this.zoomFactor_,-t),n)},e.prototype.adjustRotation=function(t,n){n&&(n=wi(n,this.getProjection())),this.adjustRotationInternal(t,n)},e.prototype.adjustRotationInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,i);n&&(this.targetCenter_=this.calculateCenterRotate(o,n)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(t&&wi(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,n){return this.hints_[t]+=n,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,n){var i=this.getAnimating()||this.getInteracting()||n,o=this.constraints_.rotation(this.targetRotation_,i),l=this.getViewportSize_(o),c=this.constraints_.resolution(this.targetResolution_,0,l,i),p=this.constraints_.center(this.targetCenter_,c,l,i,this.calculateCenterShift(this.targetCenter_,c,o,l));this.get(yu.ROTATION)!==o&&this.set(yu.ROTATION,o),this.get(yu.RESOLUTION)!==c&&(this.set(yu.RESOLUTION,c),this.set("zoom",this.getZoom(),!0)),(!p||!this.get(yu.CENTER)||!ds(this.get(yu.CENTER),p))&&this.set(yu.CENTER,p),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,n,i){var o=t!==void 0?t:200,l=n||0,c=this.constraints_.rotation(this.targetRotation_),p=this.getViewportSize_(c),g=this.constraints_.resolution(this.targetResolution_,l,p),_=this.constraints_.center(this.targetCenter_,g,p,!1,this.calculateCenterShift(this.targetCenter_,g,c,p));if(o===0&&!this.cancelAnchor_){this.targetResolution_=g,this.targetRotation_=c,this.targetCenter_=_,this.applyTargetState_();return}var x=i||(o===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==g||this.getRotation()!==c||!this.getCenterInternal()||!ds(this.getCenterInternal(),_))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:c,center:_,resolution:g,duration:o,easing:gu,anchor:x}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Bo.INTERACTING,1)},e.prototype.endInteraction=function(t,n,i){var o=i&&wi(i,this.getProjection());this.endInteractionInternal(t,n,o)},e.prototype.endInteractionInternal=function(t,n,i){this.setHint(Bo.INTERACTING,-1),this.resolveConstraints(t,n,i)},e.prototype.getConstrainedCenter=function(t,n){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,n||this.getResolution(),i)},e.prototype.getConstrainedZoom=function(t,n){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))},e.prototype.getConstrainedResolution=function(t,n){var i=n||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,o)},e}(wo);function wN(r,e){setTimeout(function(){r(e)},0)}function Wor(r){if(r.extent!==void 0){var e=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return m9(r.extent,r.constrainOnlyCenter,e)}var t=DD(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&t.isGlobal()){var n=t.getExtent().slice();return n[0]=-1/0,n[2]=1/0,m9(n,!1,!1)}return qBe}function Zor(r){var e,t,n,i=28,o=2,l=r.minZoom!==void 0?r.minZoom:_9,c=r.maxZoom!==void 0?r.maxZoom:i,p=r.zoomFactor!==void 0?r.zoomFactor:o,g=r.multiWorld!==void 0?r.multiWorld:!1,_=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,x=r.showFullExtent!==void 0?r.showFullExtent:!1,T=DD(r.projection,"EPSG:3857"),C=T.getExtent(),D=r.constrainOnlyCenter,F=r.extent;if(!g&&!F&&T.isGlobal()&&(D=!1,F=C),r.resolutions!==void 0){var O=r.resolutions;t=O[l],n=O[c]!==void 0?O[c]:O[O.length-1],r.constrainResolution?e=jBe(O,_,!D&&F,x):e=y9(t,n,_,!D&&F,x)}else{var k=C?Math.max(fn(C),Fo(C)):360*Fa[za.DEGREES]/T.getMetersPerUnit(),q=k/Zd/Math.pow(o,_9),U=q/Math.pow(o,i-_9);t=r.maxResolution,t!==void 0?l=0:t=q/Math.pow(p,l),n=r.minResolution,n===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?n=t/Math.pow(p,c):n=q/Math.pow(p,c):n=U),c=l+Math.floor(Math.log(t/n)/Math.log(p)),n=t/Math.pow(p,c-l),r.constrainResolution?e=FBe(p,t,n,_,!D&&F,x):e=y9(t,n,_,!D&&F,x)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:l,zoomFactor:p}}function Yor(r){var e=r.enableRotation!==void 0?r.enableRotation:!0;if(e){var t=r.constrainRotation;return t===void 0||t===!0?bBe():t===!1?f9:typeof t=="number"?xBe(t):f9}else return px}function Kor(r){return!(r.sourceCenter&&r.targetCenter&&!ds(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function x9(r,e,t,n,i){var o=Math.cos(-i),l=Math.sin(-i),c=r[0]*o-r[1]*l,p=r[1]*o+r[0]*l;c+=(e[0]/2-t[0])*n,p+=(t[1]-e[1]/2)*n,l=-l;var g=c*o-p*l,_=p*o+c*l;return[g,_]}var _u=Hor;var Xor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();function zBe(r){if(r instanceof tv){r.setMapInternal(null);return}r instanceof jT&&r.getLayers().forEach(zBe)}function BBe(r,e){if(r instanceof tv){r.setMapInternal(e);return}if(r instanceof jT)for(var t=r.getLayers().getArray(),n=0,i=t.length;n<i;++n)BBe(t[n],e)}var Qor=function(r){Xor(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un;var i=Jor(t);n.renderComplete_,n.loaded_=!0,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,n.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:bD,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=Fi(),n.pixelToCoordinateTransform_=Fi(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=t.moveTolerance,n.keyboardEventTarget_=i.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=i.controls||new Kn,n.interactions=i.interactions||new Kn,n.overlays_=i.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new DBe(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(To.LAYERGROUP,n.handleLayerGroupChanged_),n.addChangeListener(To.VIEW,n.handleViewChanged_),n.addChangeListener(To.SIZE,n.handleSizeChanged_),n.addChangeListener(To.TARGET,n.handleTargetChanged_),n.setProperties(i.values);var o=n;return t.view&&!(t.view instanceof _u)&&t.view.then(function(l){o.setView(new _u(l))}),n.controls.addEventListener(fi.ADD,function(l){l.element.setMap(this)}.bind(n)),n.controls.addEventListener(fi.REMOVE,function(l){l.element.setMap(null)}.bind(n)),n.interactions.addEventListener(fi.ADD,function(l){l.element.setMap(this)}.bind(n)),n.interactions.addEventListener(fi.REMOVE,function(l){l.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(fi.ADD,function(l){this.addOverlayInternal_(l.element)}.bind(n)),n.overlays_.addEventListener(fi.REMOVE,function(l){var c=l.element,p=c.getId();p!==void 0&&delete this.overlayIdIndex_[p.toString()],l.element.setMap(null)}.bind(n)),n.controls.forEach(function(l){l.setMap(this)}.bind(n)),n.interactions.forEach(function(l){l.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){var n=this.getLayerGroup().getLayers();n.push(t)},e.prototype.handleLayerAdd_=function(t){BBe(t.layer,this)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var n=t.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),r.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,n,i){if(!(!this.frameState_||!this.renderer_)){var o=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};var l=i.hitTolerance!==void 0?i.hitTolerance:0,c=i.layerFilter!==void 0?i.layerFilter:fs,p=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,l,p,n,null,c,null)}},e.prototype.getFeaturesAtPixel=function(t,n){var i=[];return this.forEachFeatureAtPixel(t,function(o){i.push(o)},n),i},e.prototype.getAllLayers=function(){var t=[];function n(i){i.forEach(function(o){o instanceof jT?n(o.getLayers()):t.push(o)})}return n(this.getLayers()),t},e.prototype.forEachLayerAtPixel=function(t,n,i){if(!(!this.frameState_||!this.renderer_)){var o=i||{},l=o.hitTolerance!==void 0?o.hitTolerance:0,c=o.layerFilter||fs;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,l,n,c)}},e.prototype.hasFeatureAtPixel=function(t,n){if(!this.frameState_||!this.renderer_)return!1;var i=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};var o=n.layerFilter!==void 0?n.layerFilter:fs,l=n.hitTolerance!==void 0?n.hitTolerance:0,c=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,l,c,o,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var n=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-n.left,i.clientY-n.top]},e.prototype.getTarget=function(){return this.get(To.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return t!==void 0?typeof t=="string"?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Dd(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var n=this.frameState_;return n?On(n.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var n=this.overlayIdIndex_[t.toString()];return n!==void 0?n:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(To.LAYERGROUP)},e.prototype.setLayers=function(t){var n=this.getLayerGroup();if(t instanceof Kn){n.setLayers(t);return}var i=n.getLayers();i.clear(),i.extend(t)},e.prototype.getLayers=function(){var t=this.getLayerGroup().getLayers();return t},e.prototype.getLoadingOrNotReady=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var o=t[n];if(o.visible){var l=o.layer.getRenderer();if(l&&!l.ready)return!0;var c=o.layer.getSource();if(c&&c.loading)return!0}}return!1},e.prototype.getPixelFromCoordinate=function(t){var n=wi(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},e.prototype.getPixelFromCoordinateInternal=function(t){var n=this.frameState_;return n?On(n.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(To.SIZE)},e.prototype.getView=function(){return this.get(To.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,n,i,o){return NBe(this.frameState_,t,n,i,o)},e.prototype.handleBrowserEvent=function(t,n){var i=n||t.type,o=new mu(i,this,t);this.handleMapBrowserEvent(o)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var n=t.originalEvent,i=n.type;if(i===FT.POINTERDOWN||i===qt.WHEEL||i===qt.KEYDOWN){var o=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():o,c=n.target;if(this.overlayContainerStopEvent_.contains(c)||!(l===o?o.documentElement:l).contains(c))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1)for(var p=this.getInteractions().getArray().slice(),g=p.length-1;g>=0;g--){var _=p[g];if(!(_.getMap()!==this||!_.getActive()||!this.getTargetElement())){var x=_.handleEvent(t);if(!x||t.propagationStopped)break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var i=this.maxTilesLoading_,o=i;if(t){var l=t.viewHints;if(l[Bo.ANIMATING]||l[Bo.INTERACTING]){var c=Date.now()-t.time>8;i=c?0:8,o=c?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,o))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(zo.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(zo.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new $d(fh.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new $d(fh.LOADSTART,this,t))));for(var p=this.postRenderFunctions_,g=0,_=p.length;g<_;++g)p[g](this,t);p.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var t=0,n=this.targetChangeHandlerKeys_.length;t<n;++t)Qr(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(qt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(qt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,MT(this.viewport_)}var i=this.getTargetElement();if(!i)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{i.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new OBe(this,this.moveTolerance_);for(var o in $r)this.mapBrowserEventHandler_.addEventListener($r[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(qt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(qt.WHEEL,this.boundHandleBrowserEvent_,wD?{passive:!1}:!1);var l=this.getOwnerDocument().defaultView,c=this.keyboardEventTarget_?this.keyboardEventTarget_:i;this.targetChangeHandlerKeys_=[Mr(c,qt.KEYDOWN,this.handleBrowserEvent,this),Mr(c,qt.KEYPRESS,this.handleBrowserEvent,this),Mr(l,qt.RESIZE,this.updateSize,this)]}this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Qr(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Qr(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Mr(t,rc.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Mr(t,qt.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Qr),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Df("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Mr(t,rc.PROPERTYCHANGE,this.render,this),Mr(t,qt.CHANGE,this.render,this),Mr(t,"addlayer",this.handleLayerAdd_,this),Mr(t,"removelayer",this.handleLayerRemove_,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var o=t[n].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){var n=this.getLayerGroup().getLayers();return n.remove(t)},e.prototype.handleLayerRemove_=function(t){zBe(t.layer)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var n=this,i=this.getSize(),o=this.getView(),l=this.frameState_,c=null;if(i!==void 0&&kY(i)&&o&&o.isDef()){var p=o.getHints(this.frameState_?this.frameState_.viewHints:void 0),g=o.getState();if(c={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:uT(g.center,g.resolution,g.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:g,viewHints:p,wantedTiles:{},mapId:Jt(this),renderTargets:{}},g.nextCenter&&g.nextResolution){var _=isNaN(g.nextRotation)?g.rotation:g.nextRotation;c.nextExtent=uT(g.nextCenter,g.nextResolution,_,i)}}if(this.frameState_=c,this.renderer_.renderFrame(c),c){if(c.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,c.postRenderFunctions),l){var x=!this.previousExtent_||!Yg(this.previousExtent_)&&!wf(c.extent,this.previousExtent_);x&&(this.dispatchEvent(new $d(fh.MOVESTART,this,l)),this.previousExtent_=Od(this.previousExtent_))}var T=this.previousExtent_&&!c.viewHints[Bo.ANIMATING]&&!c.viewHints[Bo.INTERACTING]&&!wf(c.extent,this.previousExtent_);T&&(this.dispatchEvent(new $d(fh.MOVEEND,this,c)),ID(c.extent,this.previousExtent_))}this.dispatchEvent(new $d(fh.POSTRENDER,this,c)),this.renderComplete_=this.hasListener(fh.LOADSTART)||this.hasListener(fh.LOADEND)||this.hasListener(zo.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},e.prototype.setLayerGroup=function(t){var n=this.getLayerGroup();n&&this.handleLayerRemove_(new Df("removelayer",n)),this.set(To.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(To.SIZE,t)},e.prototype.setTarget=function(t){this.set(To.TARGET,t)},e.prototype.setView=function(t){if(!t||t instanceof _u){this.set(To.VIEW,t);return}this.set(To.VIEW,new _u);var n=this;t.then(function(i){n.setView(new _u(i))})},e.prototype.updateSize=function(){var t=this.getTargetElement(),n=void 0;if(t){var i=getComputedStyle(t),o=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),l=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(o)&&!isNaN(l)&&(n=[o,l],!kY(n)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(n),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var n=void 0,i=getComputedStyle(this.viewport_);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}},e}(wo);function Jor(r){var e=null;r.keyboardEventTarget!==void 0&&(e=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);var t={},n=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new jT({layers:r.layers});t[To.LAYERGROUP]=n,t[To.TARGET]=r.target,t[To.VIEW]=r.view instanceof _u?r.view:new _u;var i;r.controls!==void 0&&(Array.isArray(r.controls)?i=new Kn(r.controls.slice()):(ir(typeof r.controls.getArray=="function",47),i=r.controls));var o;r.interactions!==void 0&&(Array.isArray(r.interactions)?o=new Kn(r.interactions.slice()):(ir(typeof r.interactions.getArray=="function",48),o=r.interactions));var l;return r.overlays!==void 0?Array.isArray(r.overlays)?l=new Kn(r.overlays.slice()):(ir(typeof r.overlays.getArray=="function",49),l=r.overlays):l=new Kn,{controls:i,interactions:o,keyboardEventTarget:e,overlays:l,values:t}}var UBe=Qor;var ear=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),tar=function(r){ear(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this,n.ulElement_=document.createElement("ul"),n.collapsed_=i.collapsed!==void 0?i.collapsed:!0,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=i.collapsible!==void 0,n.collapsible_=i.collapsible!==void 0?i.collapsible:!0,n.collapsible_||(n.collapsed_=!1);var o=i.className!==void 0?i.className:"ol-attribution",l=i.tipLabel!==void 0?i.tipLabel:"Attributions",c=i.expandClassName!==void 0?i.expandClassName:o+"-expand",p=i.collapseLabel!==void 0?i.collapseLabel:"\u203A",g=i.collapseClassName!==void 0?i.collapseClassName:o+"-collapse";typeof p=="string"?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=p,n.collapseLabel_.className=g):n.collapseLabel_=p;var _=i.label!==void 0?i.label:"i";typeof _=="string"?(n.label_=document.createElement("span"),n.label_.textContent=_,n.label_.className=c):n.label_=_;var x=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=l,n.toggleButton_.appendChild(x),n.toggleButton_.addEventListener(qt.CLICK,n.handleClick_.bind(n),!1);var T=o+" "+pu+" "+oh+(n.collapsed_&&n.collapsible_?" "+zY:"")+(n.collapsible_?"":" ol-uncollapsible"),C=n.element;return C.className=T,C.appendChild(n.toggleButton_),C.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return e.prototype.collectSourceAttributions_=function(t){for(var n={},i=[],o=!0,l=t.layerStatesArray,c=0,p=l.length;c<p;++c){var g=l[c];if(ev(g,t.viewState)){var _=g.layer.getSource();if(_){var x=_.getAttributions();if(x){var T=x(t);if(T)if(o=o&&_.getAttributionsCollapsible()!==!1,Array.isArray(T))for(var C=0,D=T.length;C<D;++C)T[C]in n||(i.push(T[C]),n[T[C]]=!0);else T in n||(i.push(T),n[T]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),i},e.prototype.updateElement_=function(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var n=this.collectSourceAttributions_(t),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!ja(n,this.renderedAttributions_)){t4e(this.ulElement_);for(var o=0,l=n.length;o<l;++o){var c=document.createElement("li");c.innerHTML=n[o],this.ulElement_.appendChild(c)}this.renderedAttributions_=n}},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle(zY),this.collapsed_?Q0(this.collapseLabel_,this.label_):Q0(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(gs),VBe=tar;var rar=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nar=function(r){rar(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this;var o=i.className!==void 0?i.className:"ol-rotate",l=i.label!==void 0?i.label:"\u21E7",c=i.compassClassName!==void 0?i.compassClassName:"ol-compass";n.label_=null,typeof l=="string"?(n.label_=document.createElement("span"),n.label_.className=c,n.label_.textContent=l):(n.label_=l,n.label_.classList.add(c));var p=i.tipLabel?i.tipLabel:"Reset rotation",g=document.createElement("button");g.className=o+"-reset",g.setAttribute("type","button"),g.title=p,g.appendChild(n.label_),g.addEventListener(qt.CLICK,n.handleClick_.bind(n),!1);var _=o+" "+pu+" "+oh,x=n.element;return x.className=_,x.appendChild(g),n.callResetNorth_=i.resetNorth?i.resetNorth:void 0,n.duration_=i.duration!==void 0?i.duration:250,n.autoHide_=i.autoHide!==void 0?i.autoHide:!0,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(AT),n}return e.prototype.handleClick_=function(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap(),n=t.getView();if(n){var i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:gu}):n.setRotation(0))}},e.prototype.render=function(t){var n=t.frameState;if(n){var i=n.viewState.rotation;if(i!=this.rotation_){var o="rotate("+i+"rad)";if(this.autoHide_){var l=this.element.classList.contains(AT);!l&&i===0?this.element.classList.add(AT):l&&i!==0&&this.element.classList.remove(AT)}this.label_.style.transform=o}this.rotation_=i}},e}(gs),GBe=nar;var iar=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),oar=function(r){iar(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),target:i.target})||this;var o=i.className!==void 0?i.className:"ol-zoom",l=i.delta!==void 0?i.delta:1,c=i.zoomInClassName!==void 0?i.zoomInClassName:o+"-in",p=i.zoomOutClassName!==void 0?i.zoomOutClassName:o+"-out",g=i.zoomInLabel!==void 0?i.zoomInLabel:"+",_=i.zoomOutLabel!==void 0?i.zoomOutLabel:"\u2013",x=i.zoomInTipLabel!==void 0?i.zoomInTipLabel:"Zoom in",T=i.zoomOutTipLabel!==void 0?i.zoomOutTipLabel:"Zoom out",C=document.createElement("button");C.className=c,C.setAttribute("type","button"),C.title=x,C.appendChild(typeof g=="string"?document.createTextNode(g):g),C.addEventListener(qt.CLICK,n.handleClick_.bind(n,l),!1);var D=document.createElement("button");D.className=p,D.setAttribute("type","button"),D.title=T,D.appendChild(typeof _=="string"?document.createTextNode(_):_),D.addEventListener(qt.CLICK,n.handleClick_.bind(n,-l),!1);var F=o+" "+pu+" "+oh,O=n.element;return O.className=F,O.appendChild(C),O.appendChild(D),n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleClick_=function(t,n){n.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var n=this.getMap(),i=n.getView();if(i){var o=i.getZoom();if(o!==void 0){var l=i.getConstrainedZoom(o+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:l,duration:this.duration_,easing:gu})):i.setZoom(l)}}},e}(gs),mx=oar;var aar=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sar=function(r){aar(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),target:i.target})||this,n.extent=i.extent?i.extent:null;var o=i.className!==void 0?i.className:"ol-zoom-extent",l=i.label!==void 0?i.label:"E",c=i.tipLabel!==void 0?i.tipLabel:"Fit to extent",p=document.createElement("button");p.setAttribute("type","button"),p.title=c,p.appendChild(typeof l=="string"?document.createTextNode(l):l),p.addEventListener(qt.CLICK,n.handleClick_.bind(n),!1);var g=o+" "+pu+" "+oh,_=n.element;return _.className=g,_.appendChild(p),n}return e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap(),n=t.getView(),i=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(TT(i))},e}(gs),EN=sar;function $Be(r){var e=r||{},t=new Kn,n=e.zoom!==void 0?e.zoom:!0;n&&t.push(new mx(e.zoomOptions));var i=e.rotate!==void 0?e.rotate:!0;i&&t.push(new GBe(e.rotateOptions));var o=e.attribution!==void 0?e.attribution:!0;return o&&t.push(new VBe(e.attributionOptions)),t}var lar=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),uar=function(r){lar(e,r);function e(t){return t=Gr({},t),t.controls||(t.controls=$Be()),t.interactions||(t.interactions=dx({onFocusOnly:!0})),r.call(this,t)||this}return e.prototype.createRenderer=function(){return new PBe(this)},e}(UBe),gx=uar;var BT={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var car=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),har=function(r){car(e,r);function e(t){var n=this,i=t||{},o=Gr({},i);return delete o.preload,delete o.useInterimTilesOnError,n=r.call(this,o)||this,n.on,n.once,n.un,n.setPreload(i.preload!==void 0?i.preload:0),n.setUseInterimTilesOnError(i.useInterimTilesOnError!==void 0?i.useInterimTilesOnError:!0),n}return e.prototype.getPreload=function(){return this.get(BT.PRELOAD)},e.prototype.setPreload=function(t){this.set(BT.PRELOAD,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(BT.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(t){this.set(BT.USE_INTERIM_TILES_ON_ERROR,t)},e.prototype.getData=function(t){return r.prototype.getData.call(this,t)},e}(tv),SN=har;var far=function(){function r(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return r.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},r.prototype.expireCache=function(e){for(;this.canExpireCache();)this.pop()},r.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},r.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},r.prototype.forEach=function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer},r.prototype.get=function(e,t){var n=this.entries_[e];return ir(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},r.prototype.remove=function(e){var t=this.entries_[e];return ir(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_},r.prototype.getCount=function(){return this.count_},r.prototype.getKeys=function(){var e=new Array(this.count_),t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e},r.prototype.getValues=function(){var e=new Array(this.count_),t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e},r.prototype.peekLast=function(){return this.oldest_.value_},r.prototype.peekLastKey=function(){return this.oldest_.key_},r.prototype.peekFirstKey=function(){return this.newest_.key_},r.prototype.peek=function(e){if(this.containsKey(e))return this.entries_[e].value_},r.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},r.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},r.prototype.set=function(e,t){ir(!(e in this.entries_),16);var n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_},r.prototype.setSize=function(e){this.highWaterMark=e},r}(),TN=far;var HBe=function(){function r(e,t,n,i){this.minX=e,this.maxX=t,this.minY=n,this.maxY=i}return r.prototype.contains=function(e){return this.containsXY(e[1],e[2])},r.prototype.containsTileRange=function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY},r.prototype.containsXY=function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY},r.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY},r.prototype.extend=function(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)},r.prototype.getHeight=function(){return this.maxY-this.minY+1},r.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},r.prototype.getWidth=function(){return this.maxX-this.minX+1},r.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY},r}();function av(r,e,t,n,i){return i!==void 0?(i.minX=r,i.maxX=e,i.minY=t,i.maxY=n,i):new HBe(r,e,t,n)}var vx=HBe;var par=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),dar=function(r){par(e,r);function e(t,n,i){var o=r.call(this)||this,l=i||{};return o.tileCoord=t,o.state=n,o.interimTile=null,o.key="",o.transition_=l.transition===void 0?250:l.transition,o.transitionStarts_={},o.interpolate=!!l.interpolate,o}return e.prototype.changed=function(){this.dispatchEvent(qt.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==Bt.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,n=this;do{if(t.getState()==Bt.LOADED){t.interimTile=null;break}else t.getState()==Bt.LOADING?n=t:t.getState()==Bt.IDLE?n.interimTile=t.interimTile:n=t;t=n.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==Bt.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){rr()},e.prototype.getAlpha=function(t,n){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(!i)i=n,this.transitionStarts_[t]=i;else if(i===-1)return 1;var o=n-i+1e3/60;return o>=this.transition_?1:i9(o/this.transition_)},e.prototype.inTransition=function(t){return this.transition_?this.transitionStarts_[t]!==-1:!1},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(Zs),yx=dar;var mar=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),gar=function(r){mar(e,r);function e(t){var n=this,i=Bt.IDLE;return n=r.call(this,t.tileCoord,i,{transition:t.transition,interpolate:t.interpolate})||this,n.loader_=t.loader,n.data_=null,n.error_=null,n.size_=t.size||[256,256],n}return e.prototype.getSize=function(){return this.size_},e.prototype.getData=function(){return this.data_},e.prototype.getError=function(){return this.error_},e.prototype.load=function(){if(!(this.state!==Bt.IDLE&&this.state!==Bt.ERROR)){this.state=Bt.LOADING,this.changed();var t=this;this.loader_().then(function(n){t.data_=n,t.state=Bt.LOADED,t.changed()}).catch(function(n){t.error_=n,t.state=Bt.ERROR,t.changed()})}},e}(yx),WBe=gar;var yar=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_ar=function(r){yar(e,r);function e(t,n,i,o,l,c){var p=r.call(this,t,n,c)||this;return p.crossOrigin_=o,p.src_=i,p.key=i,p.image_=new Image,o!==null&&(p.image_.crossOrigin=o),p.unlisten_=null,p.tileLoadFunction_=l,p}return e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=Bt.LOADED,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){this.state=Bt.ERROR,this.unlistenImage_(),this.image_=xar(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Bt.LOADED:this.state=Bt.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==Bt.ERROR&&(this.state=Bt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Bt.IDLE&&(this.state=Bt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=RT(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(yx);function xar(){var r=Oi(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}var Nf=_ar;var ZBe=.5,ph=!0;var bar=10,YBe=.25,war=function(){function r(e,t,n,i,o,l){this.sourceProj_=e,this.targetProj_=t;var c={},p=Xg(this.targetProj_,this.sourceProj_);this.transformInv_=function(U){var H=U[0]+"/"+U[1];return c[H]||(c[H]=p(U)),c[H]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&fn(i)==fn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?fn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?fn(this.targetProj_.getExtent()):null;var g=lu(n),_=G0(n),x=V0(n),T=U0(n),C=this.transformInv_(g),D=this.transformInv_(_),F=this.transformInv_(x),O=this.transformInv_(T),k=bar+(l?Math.max(0,Math.ceil(RD(lT(n)/(l*l*256*256)))):0);if(this.addQuad_(g,_,x,T,C,D,F,O,k),this.wrapsXInSource_){var q=1/0;this.triangles_.forEach(function(U,H,se){q=Math.min(q,U.source[0][0],U.source[1][0],U.source[2][0])}),this.triangles_.forEach(function(U){if(Math.max(U.source[0][0],U.source[1][0],U.source[2][0])-q>this.sourceWorldWidth_/2){var H=[[U.source[0][0],U.source[0][1]],[U.source[1][0],U.source[1][1]],[U.source[2][0],U.source[2][1]]];H[0][0]-q>this.sourceWorldWidth_/2&&(H[0][0]-=this.sourceWorldWidth_),H[1][0]-q>this.sourceWorldWidth_/2&&(H[1][0]-=this.sourceWorldWidth_),H[2][0]-q>this.sourceWorldWidth_/2&&(H[2][0]-=this.sourceWorldWidth_);var se=Math.min(H[0][0],H[1][0],H[2][0]),ie=Math.max(H[0][0],H[1][0],H[2][0]);ie-se<this.sourceWorldWidth_/2&&(U.source=H)}}.bind(this))}c={}}return r.prototype.addTriangle_=function(e,t,n,i,o,l){this.triangles_.push({source:[i,o,l],target:[e,t,n]})},r.prototype.addQuad_=function(e,t,n,i,o,l,c,p,g){var _=Ea([o,l,c,p]),x=this.sourceWorldWidth_?fn(_)/this.sourceWorldWidth_:null,T=this.sourceWorldWidth_,C=this.sourceProj_.canWrapX()&&x>.5&&x<1,D=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var F=Ea([e,t,n,i]),O=fn(F)/this.targetWorldWidth_;D=O>YBe||D}!C&&this.sourceProj_.isGlobal()&&x&&(D=x>YBe||D)}if(!(!D&&this.maxSourceExtent_&&isFinite(_[0])&&isFinite(_[1])&&isFinite(_[2])&&isFinite(_[3])&&!Ri(_,this.maxSourceExtent_))){var k=0;if(!D&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(p[0])||!isFinite(p[1]))){if(g>0)D=!0;else if(k=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(l[0])||!isFinite(l[1])?4:0)+(!isFinite(c[0])||!isFinite(c[1])?2:0)+(!isFinite(p[0])||!isFinite(p[1])?1:0),k!=1&&k!=2&&k!=4&&k!=8)return}if(g>0){if(!D){var q=[(e[0]+n[0])/2,(e[1]+n[1])/2],U=this.transformInv_(q),H=void 0;if(C){var se=(El(o[0],T)+El(c[0],T))/2;H=se-El(U[0],T)}else H=(o[0]+c[0])/2-U[0];var ie=(o[1]+c[1])/2-U[1],ue=H*H+ie*ie;D=ue>this.errorThresholdSquared_}if(D){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){var ve=[(t[0]+n[0])/2,(t[1]+n[1])/2],ye=this.transformInv_(ve),ge=[(i[0]+e[0])/2,(i[1]+e[1])/2],_e=this.transformInv_(ge);this.addQuad_(e,t,ve,ge,o,l,ye,_e,g-1),this.addQuad_(ge,ve,n,i,_e,ye,c,p,g-1)}else{var Le=[(e[0]+t[0])/2,(e[1]+t[1])/2],Re=this.transformInv_(Le),je=[(n[0]+i[0])/2,(n[1]+i[1])/2],$e=this.transformInv_(je);this.addQuad_(e,Le,je,i,o,Re,$e,p,g-1),this.addQuad_(Le,t,n,je,Re,l,c,$e,g-1)}return}}if(C){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(k&11)==0&&this.addTriangle_(e,n,i,o,c,p),(k&14)==0&&this.addTriangle_(e,n,t,o,c,l),k&&((k&13)==0&&this.addTriangle_(t,i,e,l,p,o),(k&7)==0&&this.addTriangle_(t,i,n,l,p,c))}},r.prototype.calculateSourceExtent=function(){var e=zi();return this.triangles_.forEach(function(t,n,i){var o=t.source;Zg(e,o[0]),Zg(e,o[1]),Zg(e,o[2])}),e},r.prototype.getTriangles=function(){return this.triangles_},r}(),KBe=war;var UT={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},XBe={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0};var b9,E9=[];function QBe(r,e,t,n,i){r.beginPath(),r.moveTo(0,0),r.lineTo(e,t),r.lineTo(n,i),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(e,n)+1,Math.max(t,i)),r.restore()}function w9(r,e){return Math.abs(r[e*4]-210)>2||Math.abs(r[e*4+3]-.75*255)>2}function Ear(){if(b9===void 0){var r=document.createElement("canvas").getContext("2d");r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",QBe(r,4,5,4,0),QBe(r,4,5,0,5);var e=r.getImageData(0,0,3,3).data;b9=w9(e,0)||w9(e,4)||w9(e,8)}return b9}function IN(r,e,t,n){var i=lc(t,e,r),o=yY(e,n,t),l=e.getMetersPerUnit();l!==void 0&&(o*=l);var c=r.getMetersPerUnit();c!==void 0&&(o/=c);var p=r.getExtent();if(!p||ps(p,i)){var g=yY(r,o,i)/o;isFinite(g)&&g>0&&(o/=g)}return o}function JBe(r,e,t,n){var i=Ks(t),o=IN(r,e,i,n);return(!isFinite(o)||o<=0)&&B0(t,function(l){return o=IN(r,e,l,n),isFinite(o)&&o>0}),o}function eUe(r,e,t,n,i,o,l,c,p,g,_,x){var T=Oi(Math.round(t*r),Math.round(t*e),E9);if(x||Gr(T,UT),p.length===0)return T.canvas;T.scale(t,t);function C(H){return Math.round(H*t)/t}T.globalCompositeOperation="lighter";var D=zi();p.forEach(function(H,se,ie){AD(D,H.extent)});var F=fn(D),O=Fo(D),k=Oi(Math.round(t*F/n),Math.round(t*O/n));x||Gr(k,UT);var q=t/n;p.forEach(function(H,se,ie){var ue=H.extent[0]-D[0],ve=-(H.extent[3]-D[3]),ye=fn(H.extent),ge=Fo(H.extent);H.image.width>0&&H.image.height>0&&k.drawImage(H.image,g,g,H.image.width-2*g,H.image.height-2*g,ue*q,ve*q,ye*q,ge*q)});var U=lu(l);return c.getTriangles().forEach(function(H,se,ie){var ue=H.source,ve=H.target,ye=ue[0][0],ge=ue[0][1],_e=ue[1][0],Le=ue[1][1],Re=ue[2][0],je=ue[2][1],$e=C((ve[0][0]-U[0])/o),Be=C(-(ve[0][1]-U[1])/o),nt=C((ve[1][0]-U[0])/o),We=C(-(ve[1][1]-U[1])/o),mt=C((ve[2][0]-U[0])/o),ht=C(-(ve[2][1]-U[1])/o),_t=ye,ze=ge;ye=0,ge=0,_e-=_t,Le-=ze,Re-=_t,je-=ze;var St=[[_e,Le,0,0,nt-$e],[Re,je,0,0,mt-$e],[0,0,_e,Le,We-Be],[0,0,Re,je,ht-Be]],jt=lze(St);if(jt){if(T.save(),T.beginPath(),Ear()||!x){T.moveTo(nt,We);for(var Fe=4,st=$e-nt,He=Be-We,et=0;et<Fe;et++)T.lineTo(nt+C((et+1)*st/Fe),We+C(et*He/(Fe-1))),et!=Fe-1&&T.lineTo(nt+C((et+1)*st/Fe),We+C((et+1)*He/(Fe-1)));T.lineTo(mt,ht)}else T.moveTo(nt,We),T.lineTo($e,Be),T.lineTo(mt,ht);T.clip(),T.transform(jt[0],jt[2],jt[1],jt[3],$e,Be),T.translate(D[0]-_t,D[3]-ze),T.scale(n/t,-n/t),T.drawImage(k.canvas,0,0),T.restore()}}),_&&(T.save(),T.globalCompositeOperation="source-over",T.strokeStyle="black",T.lineWidth=1,c.getTriangles().forEach(function(H,se,ie){var ue=H.target,ve=(ue[0][0]-U[0])/o,ye=-(ue[0][1]-U[1])/o,ge=(ue[1][0]-U[0])/o,_e=-(ue[1][1]-U[1])/o,Le=(ue[2][0]-U[0])/o,Re=-(ue[2][1]-U[1])/o;T.beginPath(),T.moveTo(ge,_e),T.lineTo(ve,ye),T.lineTo(Le,Re),T.closePath(),T.stroke()}),T.restore()),T.canvas}var Sar=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Tar=function(r){Sar(e,r);function e(t,n,i,o,l,c,p,g,_,x,T,C){var D=r.call(this,l,Bt.IDLE,{interpolate:!!C})||this;D.renderEdges_=T!==void 0?T:!1,D.pixelRatio_=p,D.gutter_=g,D.canvas_=null,D.sourceTileGrid_=n,D.targetTileGrid_=o,D.wrappedTileCoord_=c||l,D.sourceTiles_=[],D.sourcesListenerKeys_=null,D.sourceZ_=0;var F=o.getTileCoordExtent(D.wrappedTileCoord_),O=D.targetTileGrid_.getExtent(),k=D.sourceTileGrid_.getExtent(),q=O?su(F,O):F;if(lT(q)===0)return D.state=Bt.EMPTY,D;var U=t.getExtent();U&&(k?k=su(k,U):k=U);var H=o.getResolution(D.wrappedTileCoord_[0]),se=JBe(t,i,q,H);if(!isFinite(se)||se<=0)return D.state=Bt.EMPTY,D;var ie=x!==void 0?x:ZBe;if(D.triangulation_=new KBe(t,i,q,k,se*ie,H),D.triangulation_.getTriangles().length===0)return D.state=Bt.EMPTY,D;D.sourceZ_=n.getZForResolution(se);var ue=D.triangulation_.calculateSourceExtent();if(k&&(t.canWrapX()?(ue[1]=jn(ue[1],k[1],k[3]),ue[3]=jn(ue[3],k[1],k[3])):ue=su(ue,k)),!lT(ue))D.state=Bt.EMPTY;else{for(var ve=n.getTileRangeForExtentAndZ(ue,D.sourceZ_),ye=ve.minX;ye<=ve.maxX;ye++)for(var ge=ve.minY;ge<=ve.maxY;ge++){var _e=_(D.sourceZ_,ye,ge,p);_e&&D.sourceTiles_.push(_e)}D.sourceTiles_.length===0&&(D.state=Bt.EMPTY)}return D}return e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(_,x,T){_&&_.getState()==Bt.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(_.tileCoord),image:_.getImage()})}.bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=Bt.ERROR;else{var n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),o=typeof i=="number"?i:i[0],l=typeof i=="number"?i:i[1],c=this.targetTileGrid_.getResolution(n),p=this.sourceTileGrid_.getResolution(this.sourceZ_),g=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=eUe(o,l,this.pixelRatio_,p,this.sourceTileGrid_.getExtent(),c,g,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=Bt.LOADED}this.changed()},e.prototype.load=function(){if(this.state==Bt.IDLE){this.state=Bt.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,i,o){var l=n.getState();if(l==Bt.IDLE||l==Bt.LOADING){t++;var c=Mr(n,qt.CHANGE,function(p){var g=n.getState();(g==Bt.LOADED||g==Bt.ERROR||g==Bt.EMPTY)&&(Qr(c),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(c)}}.bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,o){var l=n.getState();l==Bt.IDLE&&n.load()})}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Qr),this.sourcesListenerKeys_=null},e.prototype.release=function(){this.canvas_&&(XD(this.canvas_.getContext("2d")),E9.push(this.canvas_),this.canvas_=null),r.prototype.release.call(this)},e}(yx),_x=Tar;var VT=34962,GT=34963,rUe=35040,xx=35044,nUe=35048,iUe=5121,oUe=5123,aUe=5125,S9=5126,tUe=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function T9(r,e){for(var t=Gr({preserveDrawingBuffer:!0,antialias:!WFe},e),n=tUe.length,i=0;i<n;++i)try{var o=r.getContext(tUe[i],t);if(o)return o}catch(l){}return null}var Iar={STATIC_DRAW:xx,STREAM_DRAW:rUe,DYNAMIC_DRAW:nUe},Mar=function(){function r(e,t){this.array=null,this.type=e,ir(e===VT||e===GT,62),this.usage=t!==void 0?t:Iar.STATIC_DRAW}return r.prototype.ofSize=function(e){this.array=new(I9(this.type))(e)},r.prototype.fromArray=function(e){var t=I9(this.type);this.array=t.from?t.from(e):new t(e)},r.prototype.fromArrayBuffer=function(e){this.array=new(I9(this.type))(e)},r.prototype.getType=function(){return this.type},r.prototype.getArray=function(){return this.array},r.prototype.getUsage=function(){return this.usage},r.prototype.getSize=function(){return this.array?this.array.length:0},r}();function I9(r){switch(r){case VT:return Float32Array;case GT:return Uint32Array;default:return Float32Array}}var MN=Mar;var Aar=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();function lUe(r,e,t){var n=t?r.LINEAR:r.NEAREST;r.bindTexture(r.TEXTURE_2D,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,n)}function Car(r,e,t,n){lUe(r,e,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t)}function sUe(r,e,t,n,i,o){var l=r.getGL(),c,p;if(t instanceof Float32Array){c=l.FLOAT,r.getExtension("OES_texture_float");var g=r.getExtension("OES_texture_float_linear");p=g!==null}else c=l.UNSIGNED_BYTE,p=!0;lUe(l,e,o&&p);var _=t.byteLength/n[1],x=1;_%8===0?x=8:_%4===0?x=4:_%2===0&&(x=2);var T;switch(i){case 1:{T=l.LUMINANCE;break}case 2:{T=l.LUMINANCE_ALPHA;break}case 3:{T=l.RGB;break}case 4:{T=l.RGBA;break}default:throw new Error("Unsupported number of bands: ".concat(i))}var C=l.getParameter(l.UNPACK_ALIGNMENT);l.pixelStorei(l.UNPACK_ALIGNMENT,x),l.texImage2D(l.TEXTURE_2D,0,T,n[0],n[1],0,T,c,t),l.pixelStorei(l.UNPACK_ALIGNMENT,C)}var bx=null;function Par(){var r=document.createElement("canvas");r.width=1,r.height=1,bx=r.getContext("2d")}var Rar=function(r){Aar(e,r);function e(t){var n=r.call(this)||this;n.tile,n.textures=[],n.handleTileChange_=n.handleTileChange_.bind(n),n.renderSize_=zn(t.grid.getTileSize(t.tile.tileCoord[0])),n.gutter_=t.gutter||0,n.bandCount=NaN,n.helper_=t.helper;var i=new MN(VT,xx);return i.fromArray([0,1,1,1,1,0,0,0]),n.helper_.flushBufferData(i),n.coords=i,n.setTile(t.tile),n}return e.prototype.setTile=function(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(qt.CHANGE,this.handleTileChange_),this.tile=t,this.textures.length=0,this.loaded=t.getState()===Bt.LOADED,this.loaded)this.uploadTile_();else{if(t instanceof Nf){var n=t.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}t.addEventListener(qt.CHANGE,this.handleTileChange_)}},e.prototype.uploadTile_=function(){var t=this.helper_,n=t.getGL(),i=this.tile;if(i instanceof Nf||i instanceof _x){var o=n.createTexture();this.textures.push(o),this.bandCount=4,Car(n,o,i.getImage(),i.interpolate);return}var l=i.getSize(),c=[l[0]+2*this.gutter_,l[1]+2*this.gutter_],p=i.getData(),g=p instanceof Float32Array,_=c[0]*c[1],x=g?Float32Array:Uint8Array,T=x.BYTES_PER_ELEMENT,C=p.byteLength/c[1];this.bandCount=Math.floor(C/T/c[0]);var D=Math.ceil(this.bandCount/4);if(D===1){var o=n.createTexture();this.textures.push(o),sUe(t,o,p,c,this.bandCount,i.interpolate);return}for(var F=new Array(D),O=0;O<D;++O){var o=n.createTexture();this.textures.push(o);var k=O<D-1?4:this.bandCount%4;F[O]=new x(_*k)}for(var q=0,U=0,H=c[0]*this.bandCount,se=0;se<c[1];++se){for(var ie=0;ie<H;++ie){var ue=p[U+ie],ve=Math.floor(q/this.bandCount),ye=ie%this.bandCount,O=Math.floor(ye/4),ge=F[O],k=ge.length/_,_e=ye%4;ge[ve*k+_e]=ue,++q}U+=C/T}for(var O=0;O<D;++O){var o=this.textures[O],ge=F[O],k=ge.length/_;sUe(t,o,ge,c,k,i.interpolate)}},e.prototype.handleTileChange_=function(){this.tile.getState()===Bt.LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(qt.CHANGE))},e.prototype.disposeInternal=function(){var t=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)t.deleteTexture(this.textures[n]);this.tile.removeEventListener(qt.CHANGE,this.handleTileChange_)},e.prototype.getPixelData=function(t,n){if(!this.loaded)return null;var i=this.renderSize_[0],o=this.renderSize_[1],l=this.gutter_;if(this.tile instanceof WBe){var c=this.tile.getSize(),p=c[0],g=c[1],_=p+2*l,x=g+2*l,T=l+Math.floor(p*(t/i)),C=l+Math.floor(g*(n/o)),D=this.tile.getData();if(D instanceof DataView){var F=D.byteLength/(_*x),O=F*(C*_+T),k=D.buffer.slice(O,O+F);return new DataView(k)}var q=this.bandCount*(C*_+T);return D.slice(q,q+this.bandCount)}bx||Par(),bx.clearRect(0,0,1,1);var U=this.tile.getImage(),H=U.width,se=U.height,ie=H-2*l,ue=se-2*l,ve=l+Math.floor(ie*(t/i)),ye=l+Math.floor(ue*(n/o)),ge;try{bx.drawImage(U,ve,ye,1,1,0,0,1,1),ge=bx.getImageData(0,0,1,1).data}catch(_e){return bx=null,null}return ge},e}(Zs),uUe=Rar;var $T={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};var Oar=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,Lar=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`,Dar=function(){function r(e){this.gl_=e.webGlContext;var t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer();var n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,e.vertexShader||Oar),t.compileShader(n);var i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,e.fragmentShader||Lar),t.compileShader(i),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,n),t.attachShader(this.renderTargetProgram_,i),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();var o=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(function(l){this.uniforms_.push({value:e.uniforms[l],location:t.getUniformLocation(this.renderTargetProgram_,l)})}.bind(this))}return r.prototype.getGL=function(){return this.gl_},r.prototype.init=function(e){var t=this.getGL(),n=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;var i=0,o=t.RGBA,l=0,c=t.RGBA,p=t.UNSIGNED_BYTE,g=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,i,o,n[0],n[1],l,c,p,g),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0)}},r.prototype.apply=function(e,t,n,i){var o=this.getGL(),l=e.size;if(o.bindFramebuffer(o.FRAMEBUFFER,t?t.getFrameBuffer():null),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this.renderTargetTexture_),!t){var c=Jt(o.canvas);if(!e.renderTargets[c]){var p=o.getContextAttributes();p&&p.preserveDrawingBuffer&&(o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT)),e.renderTargets[c]=!0}}o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.bindBuffer(o.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),o.useProgram(this.renderTargetProgram_),o.enableVertexAttribArray(this.renderTargetAttribLocation_),o.vertexAttribPointer(this.renderTargetAttribLocation_,2,o.FLOAT,!1,0,0),o.uniform2f(this.renderTargetUniformLocation_,l[0],l[1]),o.uniform1i(this.renderTargetTextureLocation_,0);var g=e.layerStatesArray[e.layerIndex].opacity;o.uniform1f(this.renderTargetOpacityLocation_,g),this.applyUniforms(e),n&&n(o,e),o.drawArrays(o.TRIANGLES,0,6),i&&i(o,e)},r.prototype.getFrameBuffer=function(){return this.frameBuffer_},r.prototype.applyUniforms=function(e){var t=this.getGL(),n,i=1;this.uniforms_.forEach(function(o){if(n=typeof o.value=="function"?o.value(e):o.value,n instanceof HTMLCanvasElement||n instanceof ImageData)o.texture||(o.texture=t.createTexture()),t.activeTexture(t["TEXTURE".concat(i)]),t.bindTexture(t.TEXTURE_2D,o.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,n.width,n.height,0,t.UNSIGNED_BYTE,new Uint8Array(n.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.uniform1i(o.location,i++);else if(Array.isArray(n))switch(n.length){case 2:t.uniform2f(o.location,n[0],n[1]);return;case 3:t.uniform3f(o.location,n[0],n[1],n[2]);return;case 4:t.uniform4f(o.location,n[0],n[1],n[2],n[3]);return;default:return}else typeof n=="number"&&t.uniform1f(o.location,n)})},r}(),M9=Dar;function AN(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function wx(r,e){return r[0]=e[0],r[1]=e[1],r[4]=e[2],r[5]=e[3],r[12]=e[4],r[13]=e[5],r}var Nar=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();var HT={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"},Ex={UNSIGNED_BYTE:iUe,UNSIGNED_SHORT:oUe,UNSIGNED_INT:aUe,FLOAT:S9},CN={};function cUe(r){return"shared/"+r}var hUe=0;function kar(){var r="unique/"+hUe;return hUe+=1,r}function qar(r){var e=CN[r];if(!e){var t=document.createElement("canvas");t.style.position="absolute",t.style.left="0",e={users:0,canvas:t},CN[r]=e}return e.users+=1,e.canvas}function jar(r){var e=CN[r];if(e&&(e.users-=1,!(e.users>0))){var t=e.canvas,n=T9(t),i=n.getExtension("WEBGL_lose_context");i&&i.loseContext(),delete CN[r]}}var Far=function(r){Nar(e,r);function e(t){var n=r.call(this)||this,i=t||{};n.boundHandleWebGLContextLost_=n.handleWebGLContextLost.bind(n),n.boundHandleWebGLContextRestored_=n.handleWebGLContextRestored.bind(n),n.canvasCacheKey_=i.canvasCacheKey?cUe(i.canvasCacheKey):kar(),n.canvas_=qar(n.canvasCacheKey_),n.gl_=T9(n.canvas_),n.bufferCache_={},n.extensionCache_={},n.currentProgram_=null,n.canvas_.addEventListener($T.LOST,n.boundHandleWebGLContextLost_),n.canvas_.addEventListener($T.RESTORED,n.boundHandleWebGLContextRestored_),n.offsetRotateMatrix_=Fi(),n.offsetScaleMatrix_=Fi(),n.tmpMat4_=AN(),n.uniformLocations_={},n.attribLocations_={},n.uniforms_=[],i.uniforms&&n.setUniforms(i.uniforms);var o=n.getGL();return n.postProcessPasses_=i.postProcesses?i.postProcesses.map(function(l){return new M9({webGlContext:o,scaleRatio:l.scaleRatio,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,uniforms:l.uniforms})}):[new M9({webGlContext:o})],n.shaderCompileErrors_=null,n.startTime_=Date.now(),n}return e.prototype.setUniforms=function(t){this.uniforms_=[];for(var n in t)this.uniforms_.push({name:n,value:t[n]});this.uniformLocations_={}},e.prototype.canvasCacheKeyMatches=function(t){return this.canvasCacheKey_===cUe(t)},e.prototype.getExtension=function(t){if(t in this.extensionCache_)return this.extensionCache_[t];var n=this.gl_.getExtension(t);return this.extensionCache_[t]=n,n},e.prototype.bindBuffer=function(t){var n=this.getGL(),i=Jt(t),o=this.bufferCache_[i];if(!o){var l=n.createBuffer();o={buffer:t,webGlBuffer:l},this.bufferCache_[i]=o}n.bindBuffer(t.getType(),o.webGlBuffer)},e.prototype.flushBufferData=function(t){var n=this.getGL();this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var n=this.getGL(),i=Jt(t),o=this.bufferCache_[i];o&&!n.isContextLost()&&n.deleteBuffer(o.webGlBuffer),delete this.bufferCache_[i]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener($T.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener($T.RESTORED,this.boundHandleWebGLContextRestored_),jar(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},e.prototype.prepareDraw=function(t,n){var i=this.getGL(),o=this.getCanvas(),l=t.size,c=t.pixelRatio;o.width=l[0]*c,o.height=l[1]*c,o.style.width=l[0]+"px",o.style.height=l[1]+"px",i.useProgram(this.currentProgram_);for(var p=this.postProcessPasses_.length-1;p>=0;p--)this.postProcessPasses_[p].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,n,i){var o=this.getGL(),l=n.getSize();o.bindFramebuffer(o.FRAMEBUFFER,n.getFramebuffer()),o.viewport(0,0,l[0],l[1]),o.bindTexture(o.TEXTURE_2D,n.getTexture()),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,i?o.ZERO:o.ONE_MINUS_SRC_ALPHA),o.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,n){var i=this.getGL();this.getExtension("OES_element_index_uint");var o=i.UNSIGNED_INT,l=4,c=n-t,p=t*l;i.drawElements(i.TRIANGLES,c,o,p)},e.prototype.finalizeDraw=function(t,n,i){for(var o=0,l=this.postProcessPasses_.length;o<l;o++)o===l-1?this.postProcessPasses_[o].apply(t,null,n,i):this.postProcessPasses_[o].apply(t,this.postProcessPasses_[o+1])},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(t){var n=t.size,i=t.viewState.rotation,o=j0(this.offsetScaleMatrix_);aT(o,2/n[0],2/n[1]);var l=j0(this.offsetRotateMatrix_);i!==0&&ED(l,-i),this.setUniformMatrixValue(HT.OFFSET_SCALE_MATRIX,wx(this.tmpMat4_,o)),this.setUniformMatrixValue(HT.OFFSET_ROTATION_MATRIX,wx(this.tmpMat4_,l)),this.setUniformFloatValue(HT.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(HT.ZOOM,t.viewState.zoom),this.setUniformFloatValue(HT.RESOLUTION,t.viewState.resolution)},e.prototype.applyUniforms=function(t){var n=this.getGL(),i,o=0;this.uniforms_.forEach(function(l){if(i=typeof l.value=="function"?l.value(t):l.value,i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData){l.texture||(l.prevValue=void 0,l.texture=n.createTexture()),n.activeTexture(n["TEXTURE".concat(o)]),n.bindTexture(n.TEXTURE_2D,l.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var c=!(i instanceof HTMLImageElement)||i.complete;c&&l.prevValue!==i&&(l.prevValue=i,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,i)),n.uniform1i(this.getUniformLocation(l.name),o++)}else if(Array.isArray(i)&&i.length===6)this.setUniformMatrixValue(l.name,wx(this.tmpMat4_,i));else if(Array.isArray(i)&&i.length<=4)switch(i.length){case 2:n.uniform2f(this.getUniformLocation(l.name),i[0],i[1]);return;case 3:n.uniform3f(this.getUniformLocation(l.name),i[0],i[1],i[2]);return;case 4:n.uniform4f(this.getUniformLocation(l.name),i[0],i[1],i[2],i[3]);return;default:return}else typeof i=="number"&&n.uniform1f(this.getUniformLocation(l.name),i)}.bind(this))},e.prototype.useProgram=function(t){if(t==this.currentProgram_)return!1;var n=this.getGL();return n.useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},!0},e.prototype.compileShader=function(t,n){var i=this.getGL(),o=i.createShader(n);return i.shaderSource(o,t),i.compileShader(o),o},e.prototype.getProgram=function(t,n){var i=this.getGL(),o=this.compileShader(t,i.FRAGMENT_SHADER),l=this.compileShader(n,i.VERTEX_SHADER),c=i.createProgram();if(i.attachShader(c,o),i.attachShader(c,l),i.linkProgram(c),!i.getShaderParameter(o,i.COMPILE_STATUS)){var p="Fragment shader compliation failed: ".concat(i.getShaderInfoLog(o));throw new Error(p)}if(i.deleteShader(o),!i.getShaderParameter(l,i.COMPILE_STATUS)){var p="Vertex shader compilation failed: ".concat(i.getShaderInfoLog(l));throw new Error(p)}if(i.deleteShader(l),!i.getProgramParameter(c,i.LINK_STATUS)){var p="GL program linking failed: ".concat(i.getShaderInfoLog(l));throw new Error(p)}return c},e.prototype.getUniformLocation=function(t){return this.uniformLocations_[t]===void 0&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]},e.prototype.getAttributeLocation=function(t){return this.attribLocations_[t]===void 0&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]},e.prototype.makeProjectionTransform=function(t,n){var i=t.size,o=t.viewState.rotation,l=t.viewState.resolution,c=t.viewState.center;return j0(n),Eo(n,0,0,2/(l*i[0]),2/(l*i[1]),-o,-c[0],-c[1]),n},e.prototype.setUniformFloatValue=function(t,n){this.getGL().uniform1f(this.getUniformLocation(t),n)},e.prototype.setUniformFloatVec4=function(t,n){this.getGL().uniform4fv(this.getUniformLocation(t),n)},e.prototype.setUniformMatrixValue=function(t,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,n)},e.prototype.enableAttributeArray_=function(t,n,i,o,l){var c=this.getAttributeLocation(t);c<0||(this.getGL().enableVertexAttribArray(c),this.getGL().vertexAttribPointer(c,n,i,!1,o,l))},e.prototype.enableAttributes=function(t){for(var n=zar(t),i=0,o=0;o<t.length;o++){var l=t[o];this.enableAttributeArray_(l.name,l.size,l.type||S9,n,i),i+=l.size*fUe(l.type)}},e.prototype.handleWebGLContextLost=function(){Ws(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,n,i){var o=this.getGL(),l=i||o.createTexture(),c=0,p=o.RGBA,g=0,_=o.RGBA,x=o.UNSIGNED_BYTE;return o.bindTexture(o.TEXTURE_2D,l),n?o.texImage2D(o.TEXTURE_2D,c,p,_,x,n):o.texImage2D(o.TEXTURE_2D,c,p,t[0],t[1],g,_,x,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),l},e}(Cd);function zar(r){for(var e=0,t=0;t<r.length;t++){var n=r[t];e+=n.size*fUe(n.type)}return e}function fUe(r){switch(r){case Ex.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Ex.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Ex.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Ex.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var pUe=Far;var Bar=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();var Uar=function(r){Bar(e,r);function e(t,n){var i=r.call(this,t)||this,o=n||{};return i.inversePixelTransform_=Fi(),i.pixelContext_=null,i.postProcesses_=o.postProcesses,i.uniforms_=o.uniforms,i.helper,t.addChangeListener(pn.MAP,i.removeHelper.bind(i)),i.dispatchPreComposeEvent=i.dispatchPreComposeEvent.bind(i),i.dispatchPostComposeEvent=i.dispatchPostComposeEvent.bind(i),i}return e.prototype.dispatchPreComposeEvent=function(t,n){var i=this.getLayer();if(i.hasListener(zo.PRECOMPOSE)){var o=new zd(zo.PRECOMPOSE,void 0,n,t);i.dispatchEvent(o)}},e.prototype.dispatchPostComposeEvent=function(t,n){var i=this.getLayer();if(i.hasListener(zo.POSTCOMPOSE)){var o=new zd(zo.POSTCOMPOSE,void 0,n,t);i.dispatchEvent(o)}},e.prototype.reset=function(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)},e.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},e.prototype.prepareFrame=function(t){if(this.getLayer().getRenderSource()){for(var n=!0,i=-1,o=void 0,l=0,c=t.layerStatesArray.length;l<c;l++){var p=t.layerStatesArray[l].layer,g=p.getRenderer();if(!(g instanceof e)){n=!0;continue}var _=p.getClassName();if((n||_!==o)&&(i+=1,n=!1),o=_,g===this)break}var x="map/"+t.mapId+"/group/"+i;(!this.helper||!this.helper.canvasCacheKeyMatches(x))&&(this.removeHelper(),this.helper=new pUe({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:x}),o&&(this.helper.getCanvas().className=o),this.afterHelperCreated())}return this.prepareFrameInternal(t)},e.prototype.afterHelperCreated=function(){},e.prototype.prepareFrameInternal=function(t){return!0},e.prototype.disposeInternal=function(){this.removeHelper(),r.prototype.disposeInternal.call(this)},e.prototype.dispatchRenderEvent_=function(t,n,i){var o=this.getLayer();if(o.hasListener(t)){Eo(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);var l=new zd(t,this.inversePixelTransform_,i,n);o.dispatchEvent(l)}},e.prototype.preRender=function(t,n){this.dispatchRenderEvent_(zo.PRERENDER,t,n)},e.prototype.postRender=function(t,n){this.dispatchRenderEvent_(zo.POSTRENDER,t,n)},e.prototype.getDataAtPixel=function(t,n,i){var o=On([n.pixelRatio,0,0,n.pixelRatio,0,0],t.slice()),l=this.helper.getGL();if(!l)return null;var c=this.getLayer(),p=c.getExtent();if(p){var g=On(n.pixelToCoordinateTransform,t.slice());if(!ps(p,g))return null}var _=l.getContextAttributes();if(!_||!_.preserveDrawingBuffer)return new Uint8Array;var x=Math.round(o[0]),T=Math.round(o[1]),C=this.pixelContext_;if(!C){var D=document.createElement("canvas");D.width=1,D.height=1,C=D.getContext("2d"),this.pixelContext_=C}C.clearRect(0,0,1,1);var F;try{C.drawImage(l.canvas,x,T,1,1,0,0,1,1),F=C.getImageData(0,0,1,1).data}catch(O){return F}return F[3]===0?null:F},e}(nN);var dUe=Uar;function Sx(r,e,t,n){return n!==void 0?(n[0]=r,n[1]=e,n[2]=t,n):[r,e,t]}function sv(r,e,t){return r+"/"+e+"/"+t}function Yd(r){return sv(r[0],r[1],r[2])}function mUe(r){return r.split("/").map(Number)}function PN(r){return(r[1]<<r[0])+r[2]}function gUe(r,e){var t=r[0],n=r[1],i=r[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;var o=e.getFullTileRange(t);return o?o.containsXY(n,i):!0}var Var=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Or={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},WT={TEXTURE_COORD:"a_textureCoord"},Gar=[{name:WT.TEXTURE_COORD,size:2,type:Ex.FLOAT}],$ar={};function Har(r){return 2*(1-1/(r+1))-1}function vUe(r,e,t){t in r||(r[t]=[]),r[t].push(e)}function A9(r,e){var t=r.layerStatesArray[r.layerIndex];t.extent&&(e=su(e,Ua(t.extent,r.viewState.projection)));var n=t.layer.getRenderSource();if(!n.getWrapX()){var i=n.getTileGridForProjection(r.viewState.projection).getExtent();i&&(e=su(e,i))}return e}function C9(r,e){return"".concat(r.getKey(),",").concat(Yd(e))}var War=function(r){Var(e,r);function e(t,n){var i=r.call(this,t,{uniforms:n.uniforms})||this;i.renderComplete=!1,i.tileTransform_=Fi(),i.tempMat4_=AN(),i.tempTileRange_=new vx(0,0,0,0),i.tempTileCoord_=Sx(0,0,0),i.tempSize_=[0,0],i.program_,i.vertexShader_=n.vertexShader,i.fragmentShader_=n.fragmentShader,i.indices_=new MN(GT,xx),i.indices_.fromArray([0,1,3,1,2,3]);var o=n.cacheSize!==void 0?n.cacheSize:512;return i.tileTextureCache_=new TN(o),i.paletteTextures_=n.paletteTextures||[],i.frameState_=null,i}return e.prototype.reset=function(t){r.prototype.reset.call(this,{uniforms:t.uniforms}),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.paletteTextures_=t.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))},e.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)},e.prototype.isDrawableTile_=function(t){var n=this.getLayer(),i=t.getState(),o=n.getUseInterimTilesOnError();return i==Bt.LOADED||i==Bt.EMPTY||i==Bt.ERROR&&!o},e.prototype.prepareFrameInternal=function(t){var n=this.getLayer(),i=n.getRenderSource();return!i||Yg(A9(t,t.extent))?!1:i.getState()==="ready"},e.prototype.enqueueTiles=function(t,n,i,o){var l=t.viewState,c=this.getLayer(),p=c.getRenderSource(),g=p.getTileGridForProjection(l.projection),_=p.getGutterForProjection(l.projection),x=Jt(p);x in t.wantedTiles||(t.wantedTiles[x]={});for(var T=t.wantedTiles[x],C=this.tileTextureCache_,D=Math.max(i-c.getPreload(),g.getMinZoom(),c.getMinZoom()),F=i;F>=D;--F)for(var O=g.getTileRangeForExtentAndZ(n,F,this.tempTileRange_),k=g.getResolution(F),q=O.minX;q<=O.maxX;++q)for(var U=O.minY;U<=O.maxY;++U){var H=Sx(F,q,U,this.tempTileCoord_),se=C9(p,H),ie=void 0,ue=void 0;if(C.containsKey(se)&&(ie=C.get(se),ue=ie.tile),!ie||ie.tile.key!==p.getKey())if(ue=p.getTile(F,q,U,t.pixelRatio,l.projection),!ie)ie=new uUe({tile:ue,grid:g,helper:this.helper,gutter:_}),C.set(se,ie);else if(this.isDrawableTile_(ue))ie.setTile(ue);else{var ve=ue.getInterimTile();ie.setTile(ve)}vUe(o,ie,F);var ye=ue.getKey();T[ye]=!0,ue.getState()===Bt.IDLE&&(t.tileQueue.isKeyQueued(ye)||t.tileQueue.enqueue([ue,x,g.getTileCoordCenter(H),k]))}},e.prototype.renderFrame=function(t){this.frameState_=t,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,t);var i=t.viewState,o=this.getLayer(),l=o.getRenderSource(),c=l.getTileGridForProjection(i.projection),p=l.getGutterForProjection(i.projection),g=A9(t,t.extent),_=c.getZForResolution(i.resolution,l.zDirection),x={};if(t.nextExtent){var T=c.getZForResolution(i.nextResolution,l.zDirection),C=A9(t,t.nextExtent);this.enqueueTiles(t,C,T,x)}this.enqueueTiles(t,g,_,x);for(var D={},F=Jt(this),O=t.time,k=!1,q=x[_],U=0,H=q.length;U<H;++U){var se=q[U],ie=se.tile,ue=ie.tileCoord;if(se.loaded){var ve=ie.getAlpha(F,O);if(ve===1){ie.endTransition(F);continue}k=!0;var ye=Yd(ue);D[ye]=ve}this.renderComplete=!1;var ge=this.findAltTiles_(c,ue,_+1,x);if(!ge)for(var _e=c.getMinZoom(),Le=_-1;Le>=_e;--Le){var Re=this.findAltTiles_(c,ue,Le,x);if(Re)break}}this.helper.useProgram(this.program_),this.helper.prepareDraw(t,!k);for(var je=Object.keys(x).map(Number).sort(xl),$e=i.center[0],Be=i.center[1],nt=0,We=je.length;nt<We;++nt)for(var mt=je[nt],ht=c.getResolution(mt),_t=zn(c.getTileSize(mt),this.tempSize_),ze=c.getOrigin(mt),St=_t[0]+2*p,jt=_t[1]+2*p,Fe=St/jt,st=($e-ze[0])/(_t[0]*ht),He=(ze[1]-Be)/(_t[1]*ht),et=i.resolution/ht,it=Har(mt),at=x[mt],U=0,H=at.length;U<H;++U){var se=at[U];if(se.loaded){var ie=se.tile,ue=ie.tileCoord,ye=Yd(ue),Nt=ue[1],At=ue[2];j0(this.tileTransform_),aT(this.tileTransform_,2/(t.size[0]*et/St),-2/(t.size[1]*et/St)),ED(this.tileTransform_,i.rotation),aT(this.tileTransform_,1,1/Fe),eze(this.tileTransform_,(_t[0]*(Nt-st)-p)/St,(_t[1]*(At-He)-p)/jt),this.helper.setUniformMatrixValue(Or.TILE_TRANSFORM,wx(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(se.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(Gar);for(var Mt=0;Mt<se.textures.length;){var Ut="TEXTURE"+Mt,Vt="".concat(Or.TILE_TEXTURE_ARRAY,"[").concat(Mt,"]");n.activeTexture(n[Ut]),n.bindTexture(n.TEXTURE_2D,se.textures[Mt]),n.uniform1i(this.helper.getUniformLocation(Vt),Mt),++Mt}for(var $t=0;$t<this.paletteTextures_.length;++$t){var Lr=this.paletteTextures_[$t];n.activeTexture(n["TEXTURE"+Mt]);var yr=Lr.getTexture(n);n.bindTexture(n.TEXTURE_2D,yr),n.uniform1i(this.helper.getUniformLocation(Lr.name),Mt),++Mt}var ve=ye in D?D[ye]:1;ve<1&&(t.animate=!0),this.helper.setUniformFloatValue(Or.TRANSITION_ALPHA,ve),this.helper.setUniformFloatValue(Or.DEPTH,it),this.helper.setUniformFloatValue(Or.TEXTURE_PIXEL_WIDTH,St),this.helper.setUniformFloatValue(Or.TEXTURE_PIXEL_HEIGHT,jt),this.helper.setUniformFloatValue(Or.TEXTURE_RESOLUTION,ht),this.helper.setUniformFloatValue(Or.TEXTURE_ORIGIN_X,ze[0]+Nt*_t[0]*ht-p*ht),this.helper.setUniformFloatValue(Or.TEXTURE_ORIGIN_Y,ze[1]-At*_t[1]*ht+p*ht);var ur=g;p>0&&(ur=c.getTileCoordExtent(ue),su(ur,g,ur)),this.helper.setUniformFloatVec4(Or.RENDER_EXTENT,ur),this.helper.setUniformFloatValue(Or.RESOLUTION,i.resolution),this.helper.setUniformFloatValue(Or.ZOOM,i.zoom),this.helper.drawElements(0,this.indices_.getSize())}}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var cr=this.helper.getCanvas(),hr=this.tileTextureCache_;hr.canExpireCache();){var se=hr.pop();se.dispose()}var dr=function(an,wn){l.expireCache(wn.viewState.projection,$ar)};return t.postRenderFunctions.push(dr),this.postRender(n,t),cr},e.prototype.getData=function(t){var n=this.helper.getGL();if(!n)return null;var i=this.frameState_;if(!i)return null;var o=this.getLayer(),l=On(i.pixelToCoordinateTransform,t.slice()),c=i.viewState,p=o.getExtent();if(p&&!ps(Ua(p,c.projection),l))return null;var g=o.getSources(Ea([l]),c.resolution),_,x,T;for(_=g.length-1;_>=0;--_)if(x=g[_],x.getState()==="ready"){if(T=x.getTileGridForProjection(c.projection),x.getWrapX())break;var C=T.getExtent();if(!C||ps(C,l))break}if(_<0)return null;for(var D=this.tileTextureCache_,F=T.getZForResolution(c.resolution);F>=T.getMinZoom();--F){var O=T.getTileCoordForCoordAndZ(l,F),k=C9(x,O);if(D.containsKey(k)){var q=D.get(k);if(q.loaded){var U=T.getOrigin(F),H=zn(T.getTileSize(F)),se=T.getResolution(F),ie=(l[0]-U[0])/se-O[1]*H[0],ue=(U[1]-l[1])/se-O[2]*H[1];return q.getPixelData(ie,ue)}}}return null},e.prototype.findAltTiles_=function(t,n,i,o){var l=t.getTileRangeForTileCoordAndZ(n,i,this.tempTileRange_);if(!l)return!1;for(var c=!0,p=this.tileTextureCache_,g=this.getLayer().getRenderSource(),_=l.minX;_<=l.maxX;++_)for(var x=l.minY;x<=l.maxY;++x){var T=C9(g,[i,_,x]),C=!1;if(p.containsKey(T)){var D=p.get(T);D.loaded&&(vUe(o,D,i),C=!0)}C||(c=!1)}return c},e.prototype.removeHelper=function(){if(this.helper){var t=this.tileTextureCache_;t.forEach(function(n){return n.dispose()}),t.clear()}r.prototype.removeHelper.call(this)},e.prototype.disposeInternal=function(){var t=this.helper;if(t){var n=t.getGL();n.deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)}r.prototype.disposeInternal.call(this),delete this.indices_,delete this.tileTextureCache_,delete this.frameState_},e}(dUe),yUe=War;var Zar=function(){function r(e,t){this.name=e,this.data=t,this.texture_=null}return r.prototype.getTexture=function(e){if(!this.texture_){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=t}return this.texture_},r}(),_Ue=Zar;var Kt={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0},Wr={};function dh(r){if(typeof r=="number")return Kt.NUMBER;if(typeof r=="boolean")return Kt.BOOLEAN;if(typeof r=="string")return e4e(r)?Kt.COLOR|Kt.STRING:Kt.STRING;if(!Array.isArray(r))throw new Error("Unhandled value type: ".concat(JSON.stringify(r)));var e=r,t=e.every(function(i){return typeof i=="number"});if(t)return e.length===3||e.length===4?Kt.COLOR|Kt.NUMBER_ARRAY:Kt.NUMBER_ARRAY;if(typeof e[0]!="string")throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(e)));var n=Wr[e[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return n.getReturnType(e.slice(1))}function Yar(r){return RD(r)%1===0}function RN(r){var e=r.toString();return e.indexOf(".")===-1?e+".0":e}function xUe(r){if(r.length<2||r.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(r.length,"(").concat(r.map(RN).join(", "),")")}function Kar(r){var e=Sf(r).slice();return e.length<4&&e.push(1),xUe(e.map(function(t,n){return n<3?t/255:t}))}function R9(r,e){return r.stringLiteralsMap[e]===void 0&&(r.stringLiteralsMap[e]=Object.keys(r.stringLiteralsMap).length),r.stringLiteralsMap[e]}function Xar(r,e){return RN(R9(r,e))}function er(r,e,t){if(Array.isArray(e)&&typeof e[0]=="string"){var n=Wr[e[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return n.toGlsl(r,e.slice(1),t)}var i=dh(e);if((i&Kt.NUMBER)>0)return RN(e);if((i&Kt.BOOLEAN)>0)return e.toString();if((i&Kt.STRING)>0&&(t===void 0||t==Kt.STRING))return Xar(r,e.toString());if((i&Kt.COLOR)>0&&(t===void 0||t==Kt.COLOR))return Kar(e);if((i&Kt.NUMBER_ARRAY)>0)return xUe(e);throw new Error("Unexpected expression ".concat(e," (expected type ").concat(t,")"))}function bUe(r){if(!(dh(r)&Kt.NUMBER))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(r)," instead"))}function oo(r){for(var e=0;e<r.length;e++)bUe(r[e])}function wUe(r){if(!(dh(r)&Kt.STRING))throw new Error("A string value was expected, got ".concat(JSON.stringify(r)," instead"))}function O9(r){if(!(dh(r)&Kt.BOOLEAN))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(r)," instead"))}function pi(r,e){if(r.length!==e)throw new Error("Exactly ".concat(e," arguments were expected, got ").concat(r.length," instead"))}function Kd(r,e){if(r.length<e)throw new Error("At least ".concat(e," arguments were expected, got ").concat(r.length," instead"))}function ON(r,e){if(r.length>e)throw new Error("At most ".concat(e," arguments were expected, got ").concat(r.length," instead"))}function EUe(r){if(r.length%2!==0)throw new Error("An even amount of arguments was expected, got ".concat(r," instead"))}function Qar(r){if(r.length%2===0)throw new Error("An odd amount of arguments was expected, got ".concat(r," instead"))}function L9(r,e){if(!Yar(e))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(r)))}Wr.get={getReturnType:function(r){return Kt.ANY},toGlsl:function(r,e){pi(e,1),wUe(e[0]);var t=e[0].toString();r.attributes.indexOf(t)===-1&&r.attributes.push(t);var n=r.inFragmentShader?"v_":"a_";return n+t}};function D9(r){return"u_var_"+r}Wr.var={getReturnType:function(r){return Kt.ANY},toGlsl:function(r,e){pi(e,1),wUe(e[0]);var t=e[0].toString();return r.variables.indexOf(t)===-1&&r.variables.push(t),D9(t)}};var N9="u_paletteTextures";Wr.palette={getReturnType:function(r){return Kt.COLOR},toGlsl:function(r,e){pi(e,2),bUe(e[0]);var t=er(r,e[0]),n=e[1];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var i=n.length,o=new Uint8Array(i*4),l=0;l<i;l++){var c=n[l],p=void 0;if(typeof c=="string")p=qY(c);else{if(!Array.isArray(c))throw new Error("The second argument of palette must be an array of strings or colors");var g=c.length;if(g===4)p=c;else{if(g!==3)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(g));p=[c[0],c[1],c[2],1]}}var _=l*4;o[_]=p[0],o[_+1]=p[1],o[_+2]=p[2],o[_+3]=p[3]*255}r.paletteTextures||(r.paletteTextures=[]);var x="".concat(N9,"[").concat(r.paletteTextures.length,"]"),T=new _Ue(x,o);return r.paletteTextures.push(T),"texture2D(".concat(x,", vec2((").concat(t," + 0.5) / ").concat(i,".0, 0.5))")}};var P9="getBandValue";Wr.band={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){Kd(e,1),ON(e,3);var t=e[0];if(!(P9 in r.functions)){for(var n="",i=r.bandCount||1,o=0;o<i;o++){var l=Math.floor(o/4),c=o%4;c===i-1&&c===1&&(c=3);var p="".concat(Or.TILE_TEXTURE_ARRAY,"[").concat(l,"]");n+=`
          if (band == `.concat(o+1,`.0) {
            return texture2D(`).concat(p,", v_textureCoord + vec2(dx, dy))[").concat(c,`];
          }
        `)}r.functions[P9]=`
        float getBandValue(float band, float xOffset, float yOffset) {
          float dx = xOffset / `.concat(Or.TEXTURE_PIXEL_WIDTH,`;
          float dy = yOffset / `).concat(Or.TEXTURE_PIXEL_HEIGHT,`;
          `).concat(n,`
        }
      `)}var g=er(r,t),_=er(r,e[1]||0),x=er(r,e[2]||0);return"".concat(P9,"(").concat(g,", ").concat(_,", ").concat(x,")")}};Wr.time={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return pi(e,0),"u_time"}};Wr.zoom={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return pi(e,0),"u_zoom"}};Wr.resolution={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return pi(e,0),"u_resolution"}};Wr["*"]={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return pi(e,2),oo(e),"(".concat(er(r,e[0])," * ").concat(er(r,e[1]),")")}};Wr["/"]={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return pi(e,2),oo(e),"(".concat(er(r,e[0])," / ").concat(er(r,e[1]),")")}};Wr["+"]={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return pi(e,2),oo(e),"(".concat(er(r,e[0])," + ").concat(er(r,e[1]),")")}};Wr["-"]={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return pi(e,2),oo(e),"(".concat(er(r,e[0])," - ").concat(er(r,e[1]),")")}};Wr.clamp={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){pi(e,3),oo(e);var t=er(r,e[1]),n=er(r,e[2]);return"clamp(".concat(er(r,e[0]),", ").concat(t,", ").concat(n,")")}};Wr["%"]={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return pi(e,2),oo(e),"mod(".concat(er(r,e[0]),", ").concat(er(r,e[1]),")")}};Wr["^"]={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return pi(e,2),oo(e),"pow(".concat(er(r,e[0]),", ").concat(er(r,e[1]),")")}};Wr.abs={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return pi(e,1),oo(e),"abs(".concat(er(r,e[0]),")")}};Wr.floor={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return pi(e,1),oo(e),"floor(".concat(er(r,e[0]),")")}};Wr.round={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return pi(e,1),oo(e),"floor(".concat(er(r,e[0])," + 0.5)")}};Wr.ceil={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return pi(e,1),oo(e),"ceil(".concat(er(r,e[0]),")")}};Wr.sin={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return pi(e,1),oo(e),"sin(".concat(er(r,e[0]),")")}};Wr.cos={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return pi(e,1),oo(e),"cos(".concat(er(r,e[0]),")")}};Wr.atan={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return Kd(e,1),ON(e,2),oo(e),e.length===2?"atan(".concat(er(r,e[0]),", ").concat(er(r,e[1]),")"):"atan(".concat(er(r,e[0]),")")}};Wr[">"]={getReturnType:function(r){return Kt.BOOLEAN},toGlsl:function(r,e){return pi(e,2),oo(e),"(".concat(er(r,e[0])," > ").concat(er(r,e[1]),")")}};Wr[">="]={getReturnType:function(r){return Kt.BOOLEAN},toGlsl:function(r,e){return pi(e,2),oo(e),"(".concat(er(r,e[0])," >= ").concat(er(r,e[1]),")")}};Wr["<"]={getReturnType:function(r){return Kt.BOOLEAN},toGlsl:function(r,e){return pi(e,2),oo(e),"(".concat(er(r,e[0])," < ").concat(er(r,e[1]),")")}};Wr["<="]={getReturnType:function(r){return Kt.BOOLEAN},toGlsl:function(r,e){return pi(e,2),oo(e),"(".concat(er(r,e[0])," <= ").concat(er(r,e[1]),")")}};function SUe(r){return{getReturnType:function(e){return Kt.BOOLEAN},toGlsl:function(e,t){pi(t,2);for(var n=Kt.ANY,i=0;i<t.length;i++)n&=dh(t[i]);if(n===Kt.NONE)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(t)," instead"));return n&=~Kt.COLOR,"(".concat(er(e,t[0],n)," ").concat(r," ").concat(er(e,t[1],n),")")}}}Wr["=="]=SUe("==");Wr["!="]=SUe("!=");Wr["!"]={getReturnType:function(r){return Kt.BOOLEAN},toGlsl:function(r,e){return pi(e,1),O9(e[0]),"(!".concat(er(r,e[0]),")")}};function TUe(r){return{getReturnType:function(e){return Kt.BOOLEAN},toGlsl:function(e,t){Kd(t,2);for(var n=0;n<t.length;n++)O9(t[n]);var i="";return i=t.map(function(o){return er(e,o)}).join(" ".concat(r," ")),i="(".concat(i,")"),i}}}Wr.all=TUe("&&");Wr.any=TUe("||");Wr.between={getReturnType:function(r){return Kt.BOOLEAN},toGlsl:function(r,e){pi(e,3),oo(e);var t=er(r,e[1]),n=er(r,e[2]),i=er(r,e[0]);return"(".concat(i," >= ").concat(t," && ").concat(i," <= ").concat(n,")")}};Wr.array={getReturnType:function(r){return Kt.NUMBER_ARRAY},toGlsl:function(r,e){Kd(e,2),ON(e,4),oo(e);var t=e.map(function(n){return er(r,n,Kt.NUMBER)});return"vec".concat(e.length,"(").concat(t.join(", "),")")}};Wr.color={getReturnType:function(r){return Kt.COLOR},toGlsl:function(r,e){Kd(e,3),ON(e,4),oo(e);var t=e;e.length===3&&t.push(1);var n=e.map(function(i,o){return er(r,i,Kt.NUMBER)+(o<3?" / 255.0":"")});return"vec".concat(e.length,"(").concat(n.join(", "),")")}};Wr.interpolate={getReturnType:function(r){for(var e=Kt.COLOR|Kt.NUMBER,t=3;t<r.length;t+=2)e=e&dh(r[t]);return e},toGlsl:function(r,e,t){EUe(e),Kd(e,6);var n=e[0],i;switch(n[0]){case"linear":i=1;break;case"exponential":i=n[1];break;default:i=null}if(!i)throw new Error("Invalid interpolation type for \"interpolate\" operator, received: ".concat(JSON.stringify(n)));var o=t!==void 0?t:Kt.ANY,l=Wr.interpolate.getReturnType(e)&o;L9(e,l);for(var c=er(r,e[1]),p=RN(i),g="",_=2;_<e.length-2;_+=2){var x=er(r,e[_]),T=g||er(r,e[_+1],l),C=er(r,e[_+2]),D=er(r,e[_+3],l);g="mix(".concat(T,", ").concat(D,", pow(clamp((").concat(c," - ").concat(x,") / (").concat(C," - ").concat(x,"), 0.0, 1.0), ").concat(p,"))")}return g}};Wr.match={getReturnType:function(r){for(var e=Kt.ANY,t=2;t<r.length;t+=2)e=e&dh(r[t]);return e=e&dh(r[r.length-1]),e},toGlsl:function(r,e,t){EUe(e),Kd(e,4);var n=t!==void 0?t:Kt.ANY,i=Wr.match.getReturnType(e)&n;L9(e,i);for(var o=er(r,e[0]),l=er(r,e[e.length-1],i),c=null,p=e.length-3;p>=1;p-=2){var g=er(r,e[p]),_=er(r,e[p+1],i);c="(".concat(o," == ").concat(g," ? ").concat(_," : ").concat(c||l,")")}return c}};Wr.case={getReturnType:function(r){for(var e=Kt.ANY,t=1;t<r.length;t+=2)e=e&dh(r[t]);return e=e&dh(r[r.length-1]),e},toGlsl:function(r,e,t){Qar(e),Kd(e,3);var n=t!==void 0?t:Kt.ANY,i=Wr.case.getReturnType(e)&n;L9(e,i);for(var o=0;o<e.length-1;o+=2)O9(e[o]);for(var l=er(r,e[e.length-1],i),c=null,o=e.length-3;o>=0;o-=2){var p=er(r,e[o]),g=er(r,e[o+1],i);c="(".concat(p," ? ").concat(g," : ").concat(c||l,")")}return c}};var Jar=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();function IUe(r,e){var t=`
    attribute vec2 `.concat(WT.TEXTURE_COORD,`;
    uniform mat4 `).concat(Or.TILE_TRANSFORM,`;
    uniform float `).concat(Or.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(Or.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(Or.TEXTURE_RESOLUTION,`;
    uniform float `).concat(Or.TEXTURE_ORIGIN_X,`;
    uniform float `).concat(Or.TEXTURE_ORIGIN_Y,`;
    uniform float `).concat(Or.DEPTH,`;

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = `).concat(WT.TEXTURE_COORD,`;
      v_mapCoord = vec2(
        `).concat(Or.TEXTURE_ORIGIN_X," + ").concat(Or.TEXTURE_RESOLUTION," * ").concat(Or.TEXTURE_PIXEL_WIDTH,` * v_textureCoord[0],
        `).concat(Or.TEXTURE_ORIGIN_Y," - ").concat(Or.TEXTURE_RESOLUTION," * ").concat(Or.TEXTURE_PIXEL_HEIGHT,` * v_textureCoord[1]
      );
      gl_Position = `).concat(Or.TILE_TRANSFORM," * vec4(").concat(WT.TEXTURE_COORD,", ").concat(Or.DEPTH,`, 1.0);
    }
  `),n={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:e},i=[];if(r.color!==void 0){var o=er(n,r.color,Kt.COLOR);i.push("color = ".concat(o,";"))}if(r.contrast!==void 0){var l=er(n,r.contrast,Kt.NUMBER);i.push("color.rgb = clamp((".concat(l," + 1.0) * color.rgb - (").concat(l," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(r.exposure!==void 0){var c=er(n,r.exposure,Kt.NUMBER);i.push("color.rgb = clamp((".concat(c," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(r.saturation!==void 0){var p=er(n,r.saturation,Kt.NUMBER);i.push(`
      float saturation = `.concat(p,` + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `))}if(r.gamma!==void 0){var g=er(n,r.gamma,Kt.NUMBER);i.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(g,"));"))}if(r.brightness!==void 0){var _=er(n,r.brightness,Kt.NUMBER);i.push("color.rgb = clamp(color.rgb + ".concat(_,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var x={},T=n.variables.length;if(T>1&&!r.variables)throw new Error("Missing variables in style (expected ".concat(n.variables,")"));for(var C=function(U){var H=n.variables[U];if(!(H in r.variables))throw new Error("Missing '".concat(H,"' in style variables"));var se=D9(H);x[se]=function(){var ie=r.variables[H];return typeof ie=="string"&&(ie=R9(n,ie)),ie!==void 0?ie:-9999999}},D=0;D<T;++D)C(D);var F=Object.keys(x).map(function(U){return"uniform float ".concat(U,";")}),O=Math.ceil(e/4);F.push("uniform sampler2D ".concat(Or.TILE_TEXTURE_ARRAY,"[").concat(O,"];")),n.paletteTextures&&F.push("uniform sampler2D ".concat(N9,"[").concat(n.paletteTextures.length,"];"));var k=Object.keys(n.functions).map(function(U){return n.functions[U]}),q=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 `.concat(Or.RENDER_EXTENT,`;
    uniform float `).concat(Or.TRANSITION_ALPHA,`;
    uniform float `).concat(Or.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(Or.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(Or.RESOLUTION,`;
    uniform float `).concat(Or.ZOOM,`;

    `).concat(F.join(`
`),`

    `).concat(k.join(`
`),`

    void main() {
      if (
        v_mapCoord[0] < `).concat(Or.RENDER_EXTENT,`[0] ||
        v_mapCoord[1] < `).concat(Or.RENDER_EXTENT,`[1] ||
        v_mapCoord[0] > `).concat(Or.RENDER_EXTENT,`[2] ||
        v_mapCoord[1] > `).concat(Or.RENDER_EXTENT,`[3]
      ) {
        discard;
      }

      vec4 color = texture2D(`).concat(Or.TILE_TEXTURE_ARRAY,`[0],  v_textureCoord);

      `).concat(i.join(`
`),`

      if (color.a == 0.0) {
        discard;
      }

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= `).concat(Or.TRANSITION_ALPHA,`;
    }`);return{vertexShader:t,fragmentShader:q,uniforms:x,paletteTextures:n.paletteTextures}}var MUe=function(r){Jar(e,r);function e(t){var n=this,i=t?Gr({},t):{},o=i.style||{};delete i.style;var l=i.cacheSize;return delete i.cacheSize,n=r.call(this,i)||this,n.sources_=i.sources,n.renderedSource_=null,n.renderedResolution_=NaN,n.style_=o,n.cacheSize_=l,n.styleVariables_=n.style_.variables||{},n.addChangeListener(pn.SOURCE,n.handleSourceUpdate_),n}return e.prototype.getSources=function(t,n){var i=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(t,n):this.sources_:i?[i]:[]},e.prototype.getRenderSource=function(){return this.renderedSource_||this.getSource()},e.prototype.getSourceState=function(){var t=this.getRenderSource();return t?t.getState():"undefined"},e.prototype.handleSourceUpdate_=function(){this.getSource()&&this.setStyle(this.style_)},e.prototype.getSourceBandCount_=function(){var t=Number.MAX_SAFE_INTEGER,n=this.getSources([-t,-t,t,t],t);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4},e.prototype.createRenderer=function(){var t=IUe(this.style_,this.getSourceBandCount_());return new yUe(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.cacheSize_,paletteTextures:t.paletteTextures})},e.prototype.renderSources=function(t,n){for(var i=this.getRenderer(),o,l=0,c=n.length;l<c;++l)this.renderedSource_=n[l],i.prepareFrame(t)&&(o=i.renderFrame(t));return o},e.prototype.render=function(t,n){var i=this;this.rendered=!0;for(var o=t.viewState,l=this.getSources(t.extent,o.resolution),c=!0,p=function(C,D){var F=l[C],O=F.getState();if(O=="loading"){var k=function(){F.getState()=="ready"&&(F.removeEventListener("change",k),i.changed())};F.addEventListener("change",k)}c=c&&O=="ready"},g=0,_=l.length;g<_;++g)p(g,_);var x=this.renderSources(t,l);if(this.getRenderer().renderComplete&&c)return this.renderedResolution_=o.resolution,x;if(this.renderedResolution_>.5*o.resolution){var T=this.getSources(t.extent,this.renderedResolution_).filter(function(C){return!l.includes(C)});if(T.length>0)return this.renderSources(t,T)}return x},e.prototype.setStyle=function(t){this.styleVariables_=t.variables||{},this.style_=t;var n=IUe(this.style_,this.getSourceBandCount_()),i=this.getRenderer();i.reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()},e.prototype.updateStyleVariables=function(t){Gr(this.styleVariables_,t),this.changed()},e}(SN);MUe.prototype.dispose;var AUe=MUe;var esr=[0,0,0],Xd=5,tsr=function(){function r(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ir(zFe(this.resolutions_,function(l,c){return c-l},!0),17);var t;if(!e.origins){for(var n=0,i=this.resolutions_.length-1;n<i;++n)if(!t)t=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ir(this.origins_.length==this.resolutions_.length,20));var o=e.extent;o!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=lu(o)),ir(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ir(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Zd,ir(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=o!==void 0?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(l,c){var p=new vx(Math.min(0,l[0]),Math.max(l[0]-1,-1),Math.min(0,l[1]),Math.max(l[1]-1,-1));if(o){var g=this.getTileRangeForExtentAndZ(o,c);p.minX=Math.max(g.minX,p.minX),p.maxX=Math.min(g.maxX,p.maxX),p.minY=Math.max(g.minY,p.minY),p.maxY=Math.min(g.maxY,p.maxY)}return p},this):o&&this.calculateTileRanges_(o)}return r.prototype.forEachTileCoord=function(e,t,n){for(var i=this.getTileRangeForExtentAndZ(e,t),o=i.minX,l=i.maxX;o<=l;++o)for(var c=i.minY,p=i.maxY;c<=p;++c)n([t,o,c])},r.prototype.forEachTileCoordParentTileRange=function(e,t,n,i){var o,l,c,p=null,g=e[0]-1;for(this.zoomFactor_===2?(l=e[1],c=e[2]):p=this.getTileCoordExtent(e,i);g>=this.minZoom;){if(this.zoomFactor_===2?(l=Math.floor(l/2),c=Math.floor(c/2),o=av(l,l,c,c,n)):o=this.getTileRangeForExtentAndZ(p,g,n),t(g,o))return!0;--g}return!1},r.prototype.getExtent=function(){return this.extent_},r.prototype.getMaxZoom=function(){return this.maxZoom},r.prototype.getMinZoom=function(){return this.minZoom},r.prototype.getOrigin=function(e){return this.origin_?this.origin_:this.origins_[e]},r.prototype.getResolution=function(e){return this.resolutions_[e]},r.prototype.getResolutions=function(){return this.resolutions_},r.prototype.getTileCoordChildTileRange=function(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){var i=e[1]*2,o=e[2]*2;return av(i,i+1,o,o+1,t)}var l=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,e[0]+1,t)}return null},r.prototype.getTileRangeForTileCoordAndZ=function(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;var i=e[0],o=e[1],l=e[2];if(t===i)return av(o,l,o,l,n);if(this.zoomFactor_){var c=Math.pow(this.zoomFactor_,t-i),p=Math.floor(o*c),g=Math.floor(l*c);if(t<i)return av(p,p,g,g,n);var _=Math.floor(c*(o+1))-1,x=Math.floor(c*(l+1))-1;return av(p,_,g,x,n)}var T=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(T,t,n)},r.prototype.getTileRangeExtent=function(e,t,n){var i=this.getOrigin(e),o=this.getResolution(e),l=zn(this.getTileSize(e),this.tmpSize_),c=i[0]+t.minX*l[0]*o,p=i[0]+(t.maxX+1)*l[0]*o,g=i[1]+t.minY*l[1]*o,_=i[1]+(t.maxY+1)*l[1]*o;return Ba(c,g,p,_,n)},r.prototype.getTileRangeForExtentAndZ=function(e,t,n){var i=esr;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,i);var o=i[1],l=i[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,i),av(o,i[1],l,i[2],n)},r.prototype.getTileCoordCenter=function(e){var t=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=zn(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*n,t[1]-(e[2]+.5)*i[1]*n]},r.prototype.getTileCoordExtent=function(e,t){var n=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=zn(this.getTileSize(e[0]),this.tmpSize_),l=n[0]+e[1]*o[0]*i,c=n[1]-(e[2]+1)*o[1]*i,p=l+o[0]*i,g=c+o[1]*i;return Ba(l,c,p,g,t)},r.prototype.getTileCoordForCoordAndResolution=function(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)},r.prototype.getTileCoordForXYAndResolution_=function(e,t,n,i,o){var l=this.getZForResolution(n),c=n/this.getResolution(l),p=this.getOrigin(l),g=zn(this.getTileSize(l),this.tmpSize_),_=c*(e-p[0])/n/g[0],x=c*(p[1]-t)/n/g[1];return i?(_=hT(_,Xd)-1,x=hT(x,Xd)-1):(_=cT(_,Xd),x=cT(x,Xd)),Sx(l,_,x,o)},r.prototype.getTileCoordForXYAndZ_=function(e,t,n,i,o){var l=this.getOrigin(n),c=this.getResolution(n),p=zn(this.getTileSize(n),this.tmpSize_),g=(e-l[0])/c/p[0],_=(l[1]-t)/c/p[1];return i?(g=hT(g,Xd)-1,_=hT(_,Xd)-1):(g=cT(g,Xd),_=cT(_,Xd)),Sx(n,g,_,o)},r.prototype.getTileCoordForCoordAndZ=function(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)},r.prototype.getTileCoordResolution=function(e){return this.resolutions_[e[0]]},r.prototype.getTileSize=function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]},r.prototype.getFullTileRange=function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null},r.prototype.getZForResolution=function(e,t){var n=k0(this.resolutions_,e,t||0);return jn(n,this.minZoom,this.maxZoom)},r.prototype.tileCoordIntersectsViewport=function(e,t){return bY(t,0,t.length,2,this.getTileCoordExtent(e))},r.prototype.calculateTileRanges_=function(e){for(var t=this.resolutions_.length,n=new Array(t),i=this.minZoom;i<t;++i)n[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=n},r}(),ZT=tsr;var rsr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nsr=function(r){rsr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.expireCache=function(t){for(;this.canExpireCache();){var n=this.peekLast();if(n.getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var t=this.peekFirstKey(),n=mUe(t),i=n[0];this.forEach(function(o){o.tileCoord[0]!==i&&(this.remove(Yd(o.tileCoord)),o.release())}.bind(this))}},e}(TN),LN=nsr;var DN={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};function NN(r){var e=r.getDefaultTileGrid();return e||(e=osr(r),r.setDefaultTileGrid(e)),e}function CUe(r,e,t){var n=e[0],i=r.getTileCoordCenter(e),o=kN(t);if(ps(o,i))return e;var l=fn(o),c=Math.ceil((o[0]-i[0])/l);return i[0]+=l*c,r.getTileCoordForCoordAndZ(i,n)}function isr(r,e,t,n){var i=n!==void 0?n:"top-left",o=RUe(r,e,t);return new ZT({extent:r,origin:tze(r,i),resolutions:o,tileSize:t})}function PUe(r){var e=r||{},t=e.extent||Xn("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:RUe(t,e.maxZoom,e.tileSize,e.maxResolution)};return new ZT(n)}function RUe(r,e,t,n){for(var i=e!==void 0?e:kBe,o=Fo(r),l=fn(r),c=zn(t!==void 0?t:Zd),p=n>0?n:Math.max(l/c[0],o/c[1]),g=i+1,_=new Array(g),x=0;x<g;++x)_[x]=p/Math.pow(2,x);return _}function osr(r,e,t,n){var i=kN(r);return isr(i,e,t,n)}function kN(r){r=Xn(r);var e=r.getExtent();if(!e){var t=180*Fa[za.DEGREES]/r.getMetersPerUnit();e=Ba(-t,-t,t,t)}return e}var OUe=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),asr=function(r){OUe(e,r);function e(t){var n=r.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate})||this;n.on,n.once,n.un,n.opaque_=t.opaque!==void 0?t.opaque:!1,n.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,n.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;var i=[256,256];return n.tileGrid&&zn(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),i),n.tileCache=new LN(t.cacheSize||0),n.tmpSize=[0,0],n.key_=t.key||"",n.tileOptions={transition:t.transition,interpolate:t.interpolate},n.zDirection=t.zDirection?t.zDirection:0,n}return e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);i&&i.expireCache(n)},e.prototype.forEachLoadedTile=function(t,n,i,o){var l=this.getTileCacheForProjection(t);if(!l)return!1;for(var c=!0,p,g,_,x=i.minX;x<=i.maxX;++x)for(var T=i.minY;T<=i.maxY;++T)g=sv(n,x,T),_=!1,l.containsKey(g)&&(p=l.get(g),_=p.getState()===Bt.LOADED,_&&(_=o(p)!==!1)),_||(c=!1);return c},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},e.prototype.getTile=function(t,n,i,o,l){return rr()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:NN(t)},e.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();return ir(n===null||ih(n,t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,n,i){var o=this.getTileGridForProjection(i),l=this.getTilePixelRatio(n),c=zn(o.getTileSize(t),this.tmpSize);return l==1?c:ZD(c,l,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,n){var i=n!==void 0?n:this.getProjection(),o=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=CUe(o,t,i)),gUe(t,o)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),r.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,n){var i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)},e.prototype.useTile=function(t,n,i,o){},e}(aN),LUe=function(r){OUe(e,r);function e(t,n){var i=r.call(this,t)||this;return i.tile=n,i}return e}(Pi);var DUe=asr;function ssr(r,e){var t=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(l,c,p){if(l)return r.replace(t,l[0].toString()).replace(n,l[1].toString()).replace(i,l[2].toString()).replace(o,function(){var g=l[0],_=e.getFullTileRange(g);ir(_,55);var x=_.getHeight()-l[2]-1;return x.toString()})}}function NUe(r,e){for(var t=r.length,n=new Array(t),i=0;i<t;++i)n[i]=ssr(r[i],e);return k9(n)}function k9(r){return r.length===1?r[0]:function(e,t,n){if(e){var i=PN(e),o=El(i,r.length);return r[o](e,t,n)}else return}}function qN(r){var e=[],t=/\{([a-z])-([a-z])\}/.exec(r);if(t){var n=t[1].charCodeAt(0),i=t[2].charCodeAt(0),o=void 0;for(o=n;o<=i;++o)e.push(r.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r),t){for(var l=parseInt(t[2],10),c=parseInt(t[1],10);c<=l;c++)e.push(r.replace(t[0],c.toString()));return e}return e.push(r),e}var lsr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),usr=function(r){lsr(e,r);function e(t){var n=r.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===e.prototype.tileUrlFunction,n.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(n.tileUrlFunction=t.tileUrlFunction),n.urls=null,t.urls?n.setUrls(t.urls):t.url&&n.setUrl(t.url),n.tileLoadingKeys_={},n}return e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var n=t.target,i=Jt(n),o=n.getState(),l;o==Bt.LOADING?(this.tileLoadingKeys_[i]=!0,l=DN.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],l=o==Bt.ERROR?DN.TILELOADERROR:o==Bt.LOADED?DN.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new LUe(l,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof n!="undefined"?this.setKey(n):this.changed()},e.prototype.setUrl=function(t){var n=qN(t);this.urls=n,this.setUrls(n)},e.prototype.setUrls=function(t){this.urls=t;var n=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(NUe(t,this.tileGrid),n):this.setKey(n)},e.prototype.tileUrlFunction=function(t,n,i){},e.prototype.useTile=function(t,n,i){var o=sv(t,n,i);this.tileCache.containsKey(o)&&this.tileCache.get(o)},e}(DUe),kUe=usr;var csr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),hsr=function(r){csr(e,r);function e(t){var n=this,i=t.imageSmoothing!==void 0?t.imageSmoothing:!0;return t.interpolate!==void 0&&(i=t.interpolate),n=r.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:fsr,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:i,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this,n.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,n.tileClass=t.tileClass!==void 0?t.tileClass:Nf,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return e.prototype.canExpireCache=function(){if(!ph)return r.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,n){if(!ph){r.prototype.expireCache.call(this,t,n);return}var i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?n:{});for(var o in this.tileCacheForProjection){var l=this.tileCacheForProjection[o];l.expireCache(l==i?n:{})}},e.prototype.getGutterForProjection=function(t){return ph&&this.getProjection()&&t&&!ih(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){var t=r.prototype.getKey.call(this);return this.getInterpolate()||(t+=":disable-interpolation"),t},e.prototype.getOpaque=function(t){return ph&&this.getProjection()&&t&&!ih(this.getProjection(),t)?!1:r.prototype.getOpaque.call(this,t)},e.prototype.getTileGridForProjection=function(t){if(!ph)return r.prototype.getTileGridForProjection.call(this,t);var n=this.getProjection();if(this.tileGrid&&(!n||ih(n,t)))return this.tileGrid;var i=Jt(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=NN(t)),this.tileGridForProjection[i]},e.prototype.getTileCacheForProjection=function(t){if(!ph)return r.prototype.getTileCacheForProjection.call(this,t);var n=this.getProjection();if(!n||ih(n,t))return this.tileCache;var i=Jt(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new LN(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},e.prototype.createTile_=function(t,n,i,o,l,c){var p=[t,n,i],g=this.getTileCoordForTileUrlFunction(p,l),_=g?this.tileUrlFunction(g,o,l):void 0,x=new this.tileClass(p,_!==void 0?Bt.IDLE:Bt.EMPTY,_!==void 0?_:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return x.key=c,x.addEventListener(qt.CHANGE,this.handleTileChange.bind(this)),x},e.prototype.getTile=function(t,n,i,o,l){var c=this.getProjection();if(!ph||!c||!l||ih(c,l))return this.getTileInternal(t,n,i,o,c||l);var p=this.getTileCacheForProjection(l),g=[t,n,i],_=void 0,x=Yd(g);p.containsKey(x)&&(_=p.get(x));var T=this.getKey();if(_&&_.key==T)return _;var C=this.getTileGridForProjection(c),D=this.getTileGridForProjection(l),F=this.getTileCoordForTileUrlFunction(g,l),O=new _x(c,C,l,D,g,F,this.getTilePixelRatio(o),this.getGutter(),function(k,q,U,H){return this.getTileInternal(k,q,U,H,c)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return O.key=T,_?(O.interimTile=_,O.refreshInterimChain(),p.replace(x,O)):p.set(x,O),O},e.prototype.getTileInternal=function(t,n,i,o,l){var c=null,p=sv(t,n,i),g=this.getKey();if(!this.tileCache.containsKey(p))c=this.createTile_(t,n,i,o,l,g),this.tileCache.set(p,c);else if(c=this.tileCache.get(p),c.key!=g){var _=c;c=this.createTile_(t,n,i,o,l,g),_.getState()==Bt.IDLE?c.interimTile=_.interimTile:c.interimTile=_,c.refreshInterimChain(),this.tileCache.replace(p,c)}return c},e.prototype.setRenderReprojectionEdges=function(t){if(!(!ph||this.renderReprojectionEdges_==t)){this.renderReprojectionEdges_=t;for(var n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,n){if(ph){var i=Xn(t);if(i){var o=Jt(i);o in this.tileGridForProjection||(this.tileGridForProjection[o]=n)}}},e}(kUe);function fsr(r,e){r.getImage().src=e}var Tx=hsr;var qUe=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),q9={DEFAULT:"default",TRUNCATED:"truncated"},psr=function(r){qUe(e,r);function e(t,n,i,o,l,c,p){var g=r.call(this,n,i,o,l,c,p)||this;return g.zoomifyImage_=null,g.tileSize_=t,g}return e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var t=r.prototype.getImage.call(this);if(this.state==Bt.LOADED){var n=this.tileSize_;if(t.width==n[0]&&t.height==n[1])return this.zoomifyImage_=t,t;var i=Oi(n[0],n[1]);return i.drawImage(t,0,0),this.zoomifyImage_=i.canvas,i.canvas}else return t},e}(Nf);var dsr=function(r){qUe(e,r);function e(t){var n=this,i=t,o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var l=i.size,c=i.tierSizeCalculation!==void 0?i.tierSizeCalculation:q9.DEFAULT,p=i.tilePixelRatio||1,g=l[0],_=l[1],x=[],T=i.tileSize||Zd,C=T*p;switch(c){case q9.DEFAULT:for(;g>C||_>C;)x.push([Math.ceil(g/C),Math.ceil(_/C)]),C+=C;break;case q9.TRUNCATED:for(var D=g,F=_;D>C||F>C;)x.push([Math.ceil(D/C),Math.ceil(F/C)]),D>>=1,F>>=1;break;default:ir(!1,53);break}x.push([1,1]),x.reverse();for(var O=[p],k=[0],q=1,U=x.length;q<U;q++)O.push(p<<q),k.push(x[q-1][0]*x[q-1][1]+k[q-1]);O.reverse();var H=new ZT({tileSize:T,extent:i.extent||[0,-_,g,0],resolutions:O}),se=i.url;se&&se.indexOf("{TileGroup}")==-1&&se.indexOf("{tileIndex}")==-1&&(se+="{TileGroup}/{z}-{x}-{y}.jpg");var ie=qN(se),ue=T*p;function ve(je){return function($e,Be,nt){if($e){var We=$e[0],mt=$e[1],ht=$e[2],_t=mt+ht*x[We][0],ze=(_t+k[We])/ue|0,St={z:We,x:mt,y:ht,tileIndex:_t,TileGroup:"TileGroup"+ze};return je.replace(/\{(\w+?)\}/g,function(jt,Fe){return St[Fe]})}else return}}var ye=k9(ie.map(ve)),ge=psr.bind(null,zn(T*p));n=r.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,projection:i.projection,tilePixelRatio:p,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:ge,tileGrid:H,tileUrlFunction:ye,transition:i.transition})||this,n.zDirection=i.zDirection;var _e=H.getTileCoordForCoordAndResolution(Ks(H.getExtent()),O[O.length-1]),Le=ye(_e,1,null),Re=new Image;return Re.addEventListener("error",function(){ue=T,this.changed()}.bind(n)),Re.src=Le,n}return e}(Tx),jUe=dsr;var nl=ke(Et(),1),X5e=ke(No(),1),Uf=ke(tn(),1);function gn(r){"@babel/helpers - typeof";return gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(r)}function FUe(r,e){if(gn(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(gn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function jN(r){var e=FUe(r,"string");return gn(e)=="symbol"?e:e+""}function wt(r,e,t){return(e=jN(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function zUe(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ct(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zUe(Object(t),!0).forEach(function(n){wt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):zUe(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ha(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function BUe(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,jN(n.key),n)}}function Wa(r,e,t){return e&&BUe(r.prototype,e),t&&BUe(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Za(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&v0(r,e)}function pc(r){return pc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pc(r)}function j9(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(j9=function(){return!!r})()}function jr(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function UUe(r,e){if(e&&(gn(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jr(r)}function Ya(r){var e=j9();return function(){var t,n=pc(r);if(e){var i=pc(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return UUe(this,t)}}var Y9=ke(Et());var F9={},msr=[],gsr=function(e){msr.push(e)};function vsr(r,e){if(0)var t}function ysr(r,e){if(0)var t}function _sr(){F9={}}function VUe(r,e,t){!e&&!F9[t]&&(r(!1,t),F9[t]=!0)}function FN(r,e){VUe(vsr,r,e)}function xsr(r,e){VUe(ysr,r,e)}FN.preMessage=gsr;FN.resetWarned=_sr;FN.noteOnce=xsr;var mh=FN;var GUe=ke(Et()),bsr=function(e){var t,n,i=e.className,o=e.included,l=e.vertical,c=e.style,p=e.length,g=e.offset,_=e.reverse;p<0&&(_=!_,p=Math.abs(p),g=100-g);var x=l?(t={},wt(t,_?"top":"bottom","".concat(g,"%")),wt(t,_?"bottom":"top","auto"),wt(t,"height","".concat(p,"%")),t):(n={},wt(n,_?"right":"left","".concat(g,"%")),wt(n,_?"left":"right","auto"),wt(n,"width","".concat(p,"%")),n),T=Ct(Ct({},c),x);return o?GUe.default.createElement("div",{className:i,style:T}):null},zN=bsr;function vs(r,e){if(r==null)return{};var t,n,i=OS(r,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(n=0;n<o.length;n++)t=o[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function YT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function $Ue(r){if(Array.isArray(r))return YT(r)}function z9(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function KT(r,e){if(r){if(typeof r=="string")return YT(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?YT(r,e):void 0}}function HUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xu(r){return $Ue(r)||z9(r)||KT(r)||HUe()}function WUe(r,e){for(;!{}.hasOwnProperty.call(r,e)&&(r=pc(r))!==null;);return r}function Ix(){return Ix=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(r,e,t){var n=WUe(r,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?r:t):i.value}},Ix.apply(null,arguments)}var Ax=ke(Et());var B9=ke(No());function ys(r,e,t,n){var i=B9.default.unstable_batchedUpdates?function(l){B9.default.unstable_batchedUpdates(t,l)}:t;return r!=null&&r.addEventListener&&r.addEventListener(e,i,n),{remove:function(){r!=null&&r.removeEventListener&&r.removeEventListener(e,i,n)}}}var r3e=ke(bi());var U9=ke(Et()),ZUe=ke(bi());var wsr=function(e,t,n,i,o,l){mh(n?i>0:!0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var c=Object.keys(t).map(parseFloat).sort(function(g,_){return g-_});if(n&&i)for(var p=o;p<=l;p+=i)c.indexOf(p)===-1&&c.push(p);return c},Esr=function(e){var t=e.prefixCls,n=e.vertical,i=e.reverse,o=e.marks,l=e.dots,c=e.step,p=e.included,g=e.lowerBound,_=e.upperBound,x=e.max,T=e.min,C=e.dotStyle,D=e.activeDotStyle,F=x-T,O=wsr(n,o,l,c,T,x).map(function(k){var q,U="".concat(Math.abs(k-T)/F*100,"%"),H=!p&&k===_||p&&k<=_&&k>=g,se=n?Ct(Ct({},C),{},wt({},i?"top":"bottom",U)):Ct(Ct({},C),{},wt({},i?"right":"left",U));H&&(se=Ct(Ct({},se),D));var ie=(0,ZUe.default)((q={},wt(q,"".concat(t,"-dot"),!0),wt(q,"".concat(t,"-dot-active"),H),wt(q,"".concat(t,"-dot-reverse"),i),q));return U9.default.createElement("span",{className:ie,style:se,key:k})});return U9.default.createElement("div",{className:"".concat(t,"-step")},O)},YUe=Esr;var BN=ke(Et()),KUe=ke(bi()),Ssr=function(e){var t=e.className,n=e.vertical,i=e.reverse,o=e.marks,l=e.included,c=e.upperBound,p=e.lowerBound,g=e.max,_=e.min,x=e.onClickLabel,T=Object.keys(o),C=g-_,D=T.map(parseFloat).sort(function(F,O){return F-O}).map(function(F){var O,k=o[F],q=gn(k)==="object"&&!BN.default.isValidElement(k),U=q?k.label:k;if(!U&&U!==0)return null;var H=!l&&F===c||l&&F<=c&&F>=p,se=(0,KUe.default)((O={},wt(O,"".concat(t,"-text"),!0),wt(O,"".concat(t,"-text-active"),H),O)),ie=wt({marginBottom:"-50%"},i?"top":"bottom","".concat((F-_)/C*100,"%")),ue=wt({transform:"translateX(".concat(i?"50%":"-50%",")"),msTransform:"translateX(".concat(i?"50%":"-50%",")")},i?"right":"left","".concat((F-_)/C*100,"%")),ve=n?ie:ue,ye=q?Ct(Ct({},ve),k.style):ve;return BN.default.createElement("span",{className:se,style:ye,key:F,onMouseDown:function(_e){return x(_e,F)},onTouchStart:function(_e){return x(_e,F)}},U)});return BN.default.createElement("div",{className:t},D)},XUe=Ssr;var V9=ke(Et()),QUe=ke(bi());var Mx=function(r){Za(t,r);var e=Ya(t);function t(){var n;return Ha(this,t),n=e.apply(this,arguments),n.state={clickFocused:!1},n.setHandleRef=function(i){n.handle=i},n.handleMouseUp=function(){document.activeElement===n.handle&&n.setClickFocus(!0)},n.handleMouseDown=function(i){i.preventDefault(),n.focus()},n.handleBlur=function(){n.setClickFocus(!1)},n.handleKeyDown=function(){n.setClickFocus(!1)},n}return Wa(t,[{key:"componentDidMount",value:function(){this.onMouseUpListener=ys(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(i){this.setState({clickFocused:i})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var i,o,l=this.props,c=l.prefixCls,p=l.vertical,g=l.reverse,_=l.offset,x=l.style,T=l.disabled,C=l.min,D=l.max,F=l.value,O=l.tabIndex,k=l.ariaLabel,q=l.ariaLabelledBy,U=l.ariaValueTextFormatter,H=vs(l,["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex","ariaLabel","ariaLabelledBy","ariaValueTextFormatter"]),se=(0,QUe.default)(this.props.className,wt({},"".concat(c,"-handle-click-focused"),this.state.clickFocused)),ie=p?(i={},wt(i,g?"top":"bottom","".concat(_,"%")),wt(i,g?"bottom":"top","auto"),wt(i,"transform",g?null:"translateY(+50%)"),i):(o={},wt(o,g?"right":"left","".concat(_,"%")),wt(o,g?"left":"right","auto"),wt(o,"transform","translateX(".concat(g?"+":"-","50%)")),o),ue=Ct(Ct({},x),ie),ve=O||0;(T||O===null)&&(ve=null);var ye;return U&&(ye=U(F)),V9.default.createElement("div",hn({ref:this.setHandleRef,tabIndex:ve},H,{className:se,style:ue,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":C,"aria-valuemax":D,"aria-valuenow":F,"aria-disabled":!!T,"aria-label":k,"aria-labelledby":q,"aria-valuetext":ye}))}}]),t}(V9.default.Component);var e3e=ke(No());var Er={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=Er.F1&&t<=Er.F12)return!1;switch(t){case Er.ALT:case Er.CAPS_LOCK:case Er.CONTEXT_MENU:case Er.CTRL:case Er.DOWN:case Er.END:case Er.ESC:case Er.HOME:case Er.INSERT:case Er.LEFT:case Er.MAC_FF_META:case Er.META:case Er.NUMLOCK:case Er.NUM_CENTER:case Er.PAGE_DOWN:case Er.PAGE_UP:case Er.PAUSE:case Er.PRINT_SCREEN:case Er.RIGHT:case Er.SHIFT:case Er.UP:case Er.WIN_KEY:case Er.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=Er.ZERO&&e<=Er.NINE||e>=Er.NUM_ZERO&&e<=Er.NUM_MULTIPLY||e>=Er.A&&e<=Er.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case Er.SPACE:case Er.QUESTION_MARK:case Er.NUM_PLUS:case Er.NUM_MINUS:case Er.NUM_PERIOD:case Er.NUM_DIVISION:case Er.SEMICOLON:case Er.DASH:case Er.EQUALS:case Er.COMMA:case Er.PERIOD:case Er.SLASH:case Er.APOSTROPHE:case Er.SINGLE_QUOTE:case Er.OPEN_SQUARE_BRACKET:case Er.BACKSLASH:case Er.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},kf=Er;function UN(r,e){try{return Object.keys(e).some(function(t){return r.target===(0,e3e.findDOMNode)(e[t])})}catch(t){return!1}}function VN(r,e){var t=e.min,n=e.max;return r<t||r>n}function G9(r){return r.touches.length>1||r.type.toLowerCase()==="touchend"&&r.touches.length>0}function JUe(r,e){var t=e.marks,n=e.step,i=e.min,o=e.max,l=Object.keys(t).map(parseFloat);if(n!==null){var c=Math.pow(10,t3e(n)),p=Math.floor((o*c-i*c)/(n*c)),g=Math.min((r-i)/n,p),_=Math.round(g)*n+i;l.push(_)}var x=l.map(function(T){return Math.abs(r-T)});return l[x.indexOf(Math.min.apply(Math,xu(x)))]}function t3e(r){var e=r.toString(),t=0;return e.indexOf(".")>=0&&(t=e.length-e.indexOf(".")-1),t}function $9(r,e){return r?e.clientY:e.pageX}function H9(r,e){return r?e.touches[0].clientY:e.touches[0].pageX}function W9(r,e){var t=e.getBoundingClientRect();return r?t.top+t.height*.5:window.pageXOffset+t.left+t.width*.5}function XT(r,e){var t=e.max,n=e.min;return r<=n?n:r>=t?t:r}function GN(r,e){var t=e.step,n=isFinite(JUe(r,e))?JUe(r,e):0;return t===null?n:parseFloat(n.toFixed(t3e(t)))}function qf(r){r.stopPropagation(),r.preventDefault()}function Tsr(r,e,t){var n={increase:function(c,p){return c+p},decrease:function(c,p){return c-p}},i=n[r](Object.keys(t.marks).indexOf(JSON.stringify(e)),1),o=Object.keys(t.marks)[i];return t.step?n[r](e,t.step):Object.keys(t.marks).length&&t.marks[o]?t.marks[o]:e}function $N(r,e,t){var n="increase",i="decrease",o=n;switch(r.keyCode){case kf.UP:o=e&&t?i:n;break;case kf.RIGHT:o=!e&&t?i:n;break;case kf.DOWN:o=e&&t?n:i;break;case kf.LEFT:o=!e&&t?n:i;break;case kf.END:return function(l,c){return c.max};case kf.HOME:return function(l,c){return c.min};case kf.PAGE_UP:return function(l,c){return l+c.step*2};case kf.PAGE_DOWN:return function(l,c){return l-c.step*2};default:return}return function(l,c){return Tsr(o,l,c)}}function gh(){}function QT(r){var e;return e=function(t){Za(i,t);var n=Ya(i);function i(o){var l;Ha(this,i),l=n.call(this,o),l.onDown=function(x,T){var C=T,D=l.props,F=D.draggableTrack,O=D.vertical,k=l.state.bounds,q=F&&l.positionGetValue?l.positionGetValue(C)||[]:[],U=UN(x,l.handlesRefs);if(l.dragTrack=F&&k.length>=2&&!U&&!q.map(function(se,ie){var ue=ie?!0:se>=k[ie];return ie===q.length-1?se<=k[ie]:ue}).some(function(se){return!se}),l.dragTrack)l.dragOffset=C,l.startBounds=xu(k);else{if(!U)l.dragOffset=0;else{var H=W9(O,x.target);l.dragOffset=C-H,C=H}l.onStart(C)}},l.onMouseDown=function(x){if(x.button===0){l.removeDocumentEvents();var T=l.props.vertical,C=$9(T,x);l.onDown(x,C),l.addDocumentMouseEvents()}},l.onTouchStart=function(x){if(!G9(x)){var T=l.props.vertical,C=H9(T,x);l.onDown(x,C),l.addDocumentTouchEvents(),qf(x)}},l.onFocus=function(x){var T=l.props,C=T.onFocus,D=T.vertical;if(UN(x,l.handlesRefs)&&!l.dragTrack){var F=W9(D,x.target);l.dragOffset=0,l.onStart(F),qf(x),C&&C(x)}},l.onBlur=function(x){var T=l.props.onBlur;l.dragTrack||l.onEnd(),T&&T(x)},l.onMouseUp=function(){l.handlesRefs[l.prevMovedHandleIndex]&&l.handlesRefs[l.prevMovedHandleIndex].clickFocus()},l.onMouseMove=function(x){if(!l.sliderRef){l.onEnd();return}var T=$9(l.props.vertical,x);l.onMove(x,T-l.dragOffset,l.dragTrack,l.startBounds)},l.onTouchMove=function(x){if(G9(x)||!l.sliderRef){l.onEnd();return}var T=H9(l.props.vertical,x);l.onMove(x,T-l.dragOffset,l.dragTrack,l.startBounds)},l.onKeyDown=function(x){l.sliderRef&&UN(x,l.handlesRefs)&&l.onKeyboard(x)},l.onClickMarkLabel=function(x,T){x.stopPropagation(),l.onChange({value:T}),l.setState({value:T},function(){return l.onEnd(!0)})},l.saveSlider=function(x){l.sliderRef=x};var c=o.step,p=o.max,g=o.min,_=isFinite(p-g)?(p-g)%c===0:!0;return mh(c&&Math.floor(c)===c?_:!0,"Slider[max] - Slider[min] (".concat(p-g,") should be a multiple of Slider[step] (").concat(c,")")),l.handlesRefs={},l}return Wa(i,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var l=this.props,c=l.autoFocus,p=l.disabled;c&&!p&&this.focus()}},{key:"componentWillUnmount",value:function(){Ix(pc(i.prototype),"componentWillUnmount",this)&&Ix(pc(i.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var l=this.sliderRef,c=this.props,p=c.vertical,g=c.reverse,_=l.getBoundingClientRect();return p?g?_.bottom:_.top:window.pageXOffset+(g?_.right:_.left)}},{key:"getSliderLength",value:function(){var l=this.sliderRef;if(!l)return 0;var c=l.getBoundingClientRect();return this.props.vertical?c.height:c.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=ys(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=ys(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=ys(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=ys(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){var l;this.props.disabled||(l=this.handlesRefs[0])===null||l===void 0||l.focus()}},{key:"blur",value:function(){var l=this;this.props.disabled||Object.keys(this.handlesRefs).forEach(function(c){var p,g;(p=l.handlesRefs[c])===null||p===void 0||(g=p.blur)===null||g===void 0||g.call(p)})}},{key:"calcValue",value:function(l){var c=this.props,p=c.vertical,g=c.min,_=c.max,x=Math.abs(Math.max(l,0)/this.getSliderLength()),T=p?(1-x)*(_-g)+g:x*(_-g)+g;return T}},{key:"calcValueByPos",value:function(l){var c=this.props.reverse?-1:1,p=c*(l-this.getSliderStart()),g=this.trimAlignValue(this.calcValue(p));return g}},{key:"calcOffset",value:function(l){var c=this.props,p=c.min,g=c.max,_=(l-p)/(g-p);return Math.max(0,_*100)}},{key:"saveHandle",value:function(l,c){this.handlesRefs[l]=c}},{key:"render",value:function(){var l,c=this.props,p=c.prefixCls,g=c.className,_=c.marks,x=c.dots,T=c.step,C=c.included,D=c.disabled,F=c.vertical,O=c.reverse,k=c.min,q=c.max,U=c.children,H=c.maximumTrackStyle,se=c.style,ie=c.railStyle,ue=c.dotStyle,ve=c.activeDotStyle,ye=Ix(pc(i.prototype),"render",this).call(this),ge=ye.tracks,_e=ye.handles,Le=(0,r3e.default)(p,(l={},wt(l,"".concat(p,"-with-marks"),Object.keys(_).length),wt(l,"".concat(p,"-disabled"),D),wt(l,"".concat(p,"-vertical"),F),wt(l,g,g),l));return Ax.default.createElement("div",{ref:this.saveSlider,className:Le,onTouchStart:D?gh:this.onTouchStart,onMouseDown:D?gh:this.onMouseDown,onMouseUp:D?gh:this.onMouseUp,onKeyDown:D?gh:this.onKeyDown,onFocus:D?gh:this.onFocus,onBlur:D?gh:this.onBlur,style:se},Ax.default.createElement("div",{className:"".concat(p,"-rail"),style:Ct(Ct({},H),ie)}),ge,Ax.default.createElement(YUe,{prefixCls:p,vertical:F,reverse:O,marks:_,dots:x,step:T,included:C,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:q,min:k,dotStyle:ue,activeDotStyle:ve}),_e,Ax.default.createElement(XUe,{className:"".concat(p,"-mark"),onClickLabel:D?gh:this.onClickMarkLabel,vertical:F,marks:_,included:C,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:q,min:k,reverse:O}),U)}}]),i}(r),e.displayName="ComponentEnhancer(".concat(r.displayName,")"),e.defaultProps=Ct(Ct({},r.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(n){var i=n.index,o=vs(n,["index"]);return delete o.dragging,o.value===null?null:Ax.default.createElement(Mx,hn({},o,{key:i}))},onBeforeChange:gh,onChange:gh,onAfterChange:gh,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),e}var Isr=function(r){Za(t,r);var e=Ya(t);function t(n){var i;Ha(this,t),i=e.call(this,n),i.positionGetValue=function(c){return[]},i.onEnd=function(c){var p=i.state.dragging;i.removeDocumentEvents(),(p||c)&&i.props.onAfterChange(i.getValue()),i.setState({dragging:!1})};var o=n.defaultValue!==void 0?n.defaultValue:n.min,l=n.value!==void 0?n.value:o;return i.state={value:i.trimAlignValue(l),dragging:!1},mh(!("minimumTrackStyle"in n),"minimumTrackStyle will be deprecated, please use trackStyle instead."),mh(!("maximumTrackStyle"in n),"maximumTrackStyle will be deprecated, please use railStyle instead."),i}return Wa(t,[{key:"calcValueByPos",value:function(i){return 0}},{key:"calcOffset",value:function(i){return 0}},{key:"saveHandle",value:function(i,o){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(i,o){var l=this.props,c=l.min,p=l.max,g=l.value,_=l.onChange;if("min"in this.props||"max"in this.props){var x=g!==void 0?g:o.value,T=this.trimAlignValue(x,this.props);T!==o.value&&(this.setState({value:T}),!(c===i.min&&p===i.max)&&VN(x,this.props)&&_(T))}}},{key:"onChange",value:function(i){var o=this.props,l=!("value"in o),c=i.value>this.props.max?Ct(Ct({},i),{},{value:this.props.max}):i;l&&this.setState(c);var p=c.value;o.onChange(p)}},{key:"onStart",value:function(i){this.setState({dragging:!0});var o=this.props,l=this.getValue();o.onBeforeChange(l);var c=this.calcValueByPos(i);this.startValue=c,this.startPosition=i,c!==l&&(this.prevMovedHandleIndex=0,this.onChange({value:c}))}},{key:"onMove",value:function(i,o){qf(i);var l=this.state.value,c=this.calcValueByPos(o);c!==l&&this.onChange({value:c})}},{key:"onKeyboard",value:function(i){var o=this.props,l=o.reverse,c=o.vertical,p=$N(i,c,l);if(p){qf(i);var g=this.state,_=g.value,x=p(_,this.props),T=this.trimAlignValue(x);if(T===_)return;this.onChange({value:T}),this.props.onAfterChange(T),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){var i=this.props.startPoint||this.props.min;return this.state.value>i?i:this.state.value}},{key:"getUpperBound",value:function(){return this.state.value<this.props.startPoint?this.props.startPoint:this.state.value}},{key:"trimAlignValue",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i===null)return null;var l=Ct(Ct({},this.props),o),c=XT(i,l);return GN(c,l)}},{key:"render",value:function(){var i=this,o=this.props,l=o.prefixCls,c=o.vertical,p=o.included,g=o.disabled,_=o.minimumTrackStyle,x=o.trackStyle,T=o.handleStyle,C=o.tabIndex,D=o.ariaLabelForHandle,F=o.ariaLabelledByForHandle,O=o.ariaValueTextFormatterForHandle,k=o.min,q=o.max,U=o.startPoint,H=o.reverse,se=o.handle,ie=this.state,ue=ie.value,ve=ie.dragging,ye=this.calcOffset(ue),ge=se({className:"".concat(l,"-handle"),prefixCls:l,vertical:c,offset:ye,value:ue,dragging:ve,disabled:g,min:k,max:q,reverse:H,index:0,tabIndex:C,ariaLabel:D,ariaLabelledBy:F,ariaValueTextFormatter:O,style:T[0]||T,ref:function($e){return i.saveHandle(0,$e)}}),_e=U!==void 0?this.calcOffset(U):0,Le=x[0]||x,Re=Y9.default.createElement(zN,{className:"".concat(l,"-track"),vertical:c,included:p,offset:_e,reverse:H,length:ye-_e,style:Ct(Ct({},_),Le)});return{tracks:Re,handles:ge}}}]),t}(Y9.default.Component),n3e=QT(Isr);var K9=ke(Et()),X9=ke(bi());var JT=function(e){var t=e.value,n=e.handle,i=e.bounds,o=e.props,l=o.allowCross,c=o.pushable,p=Number(c),g=XT(t,o),_=g;return!l&&n!=null&&i!==void 0&&(n>0&&g<=i[n-1]+p&&(_=i[n-1]+p),n<i.length-1&&g>=i[n+1]-p&&(_=i[n+1]-p)),GN(_,o)},Q9=function(r){Za(t,r);var e=Ya(t);function t(n){var i;Ha(this,t),i=e.call(this,n),i.positionGetValue=function(C){var D=i.getValue(),F=i.calcValueByPos(C),O=i.getClosestBound(F),k=i.getBoundNeedMoving(F,O),q=D[k];if(F===q)return null;var U=xu(D);return U[k]=F,U},i.onEnd=function(C){var D=i.state.handle;i.removeDocumentEvents(),D||(i.dragTrack=!1),(D!==null||C)&&i.props.onAfterChange(i.getValue()),i.setState({handle:null})};var o=n.count,l=n.min,c=n.max,p=Array.apply(void 0,xu(Array(o+1))).map(function(){return l}),g="defaultValue"in n?n.defaultValue:p,_=n.value!==void 0?n.value:g,x=_.map(function(C,D){return JT({value:C,handle:D,props:n})}),T=x[0]===c?0:x.length-1;return i.state={handle:null,recent:T,bounds:x},i}return Wa(t,[{key:"calcValueByPos",value:function(i){return 0}},{key:"getSliderLength",value:function(){return 0}},{key:"calcOffset",value:function(i){return 0}},{key:"saveHandle",value:function(i,o){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(i,o){var l=this,c=this.props,p=c.onChange,g=c.value,_=c.min,x=c.max;if(("min"in this.props||"max"in this.props)&&!(_===i.min&&x===i.max)){var T=g||o.bounds;if(T.some(function(D){return VN(D,l.props)})){var C=T.map(function(D){return XT(D,l.props)});p(C)}}}},{key:"onChange",value:function(i){var o=this.props,l=!("value"in o);if(l)this.setState(i);else{var c={};["handle","recent"].forEach(function(_){i[_]!==void 0&&(c[_]=i[_])}),Object.keys(c).length&&this.setState(c)}var p=Ct(Ct({},this.state),i),g=p.bounds;o.onChange(g)}},{key:"onStart",value:function(i){var o=this.props,l=this.state,c=this.getValue();o.onBeforeChange(c);var p=this.calcValueByPos(i);this.startValue=p,this.startPosition=i;var g=this.getClosestBound(p);this.prevMovedHandleIndex=this.getBoundNeedMoving(p,g),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex});var _=c[this.prevMovedHandleIndex];if(p!==_){var x=xu(l.bounds);x[this.prevMovedHandleIndex]=p,this.onChange({bounds:x})}}},{key:"onMove",value:function(i,o,l,c){qf(i);var p=this.state,g=this.props,_=g.max||100,x=g.min||0;if(l){var T=g.vertical?-o:o;T=g.reverse?-T:T;var C=_-Math.max.apply(Math,xu(c)),D=x-Math.min.apply(Math,xu(c)),F=Math.min(Math.max(T/(this.getSliderLength()/(_-x)),D),C),O=c.map(function(U){return Math.floor(Math.max(Math.min(U+F,_),x))});p.bounds.map(function(U,H){return U===O[H]}).some(function(U){return!U})&&this.onChange({bounds:O});return}var k=this.calcValueByPos(o),q=p.bounds[p.handle];k!==q&&this.moveTo(k)}},{key:"onKeyboard",value:function(i){var o=this.props,l=o.reverse,c=o.vertical,p=$N(i,c,l);if(p){qf(i);var g=this.state,_=this.props,x=g.bounds,T=g.handle,C=x[T===null?g.recent:T],D=p(C,_),F=JT({value:D,handle:T,bounds:g.bounds,props:_});if(F===C)return;var O=!0;this.moveTo(F,O)}}},{key:"getValue",value:function(){return this.state.bounds}},{key:"getClosestBound",value:function(i){for(var o=this.state.bounds,l=0,c=1;c<o.length-1;c+=1)i>=o[c]&&(l=c);return Math.abs(o[l+1]-i)<Math.abs(o[l]-i)&&(l+=1),l}},{key:"getBoundNeedMoving",value:function(i,o){var l=this.state,c=l.bounds,p=l.recent,g=o,_=c[o+1]===c[o];return _&&c[p]===c[o]&&(g=p),_&&i!==c[o+1]&&(g=i<c[o+1]?o:o+1),g}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var i=this.state.bounds;return i[i.length-1]}},{key:"getPoints",value:function(){var i=this.props,o=i.marks,l=i.step,c=i.min,p=i.max,g=this.internalPointsCache;if(!g||g.marks!==o||g.step!==l){var _=Ct({},o);if(l!==null)for(var x=c;x<=p;x+=l)_[x]=x;var T=Object.keys(_).map(parseFloat);T.sort(function(C,D){return C-D}),this.internalPointsCache={marks:o,step:l,points:T}}return this.internalPointsCache.points}},{key:"moveTo",value:function(i,o){var l=this,c=this.state,p=this.props,g=xu(c.bounds),_=c.handle===null?c.recent:c.handle;g[_]=i;var x=_;p.pushable!==!1?this.pushSurroundingHandles(g,x):p.allowCross&&(g.sort(function(T,C){return T-C}),x=g.indexOf(i)),this.onChange({recent:x,handle:x,bounds:g}),o&&(this.props.onAfterChange(g),this.setState({},function(){l.handlesRefs[x].focus()}),this.onEnd())}},{key:"pushSurroundingHandles",value:function(i,o){var l=i[o],c=this.props.pushable,p=Number(c),g=0;if(i[o+1]-l<p&&(g=1),l-i[o-1]<p&&(g=-1),g!==0){var _=o+g,x=g*(i[_]-l);this.pushHandle(i,_,g,p-x)||(i[o]=i[_]-g*p)}}},{key:"pushHandle",value:function(i,o,l,c){for(var p=i[o],g=i[o];l*(g-p)<c;){if(!this.pushHandleOnePoint(i,o,l))return i[o]=p,!1;g=i[o]}return!0}},{key:"pushHandleOnePoint",value:function(i,o,l){var c=this.getPoints(),p=c.indexOf(i[o]),g=p+l;if(g>=c.length||g<0)return!1;var _=o+l,x=c[g],T=this.props.pushable,C=Number(T),D=l*(i[_]-x);return this.pushHandle(i,_,l,C-D)?(i[o]=x,!0):!1}},{key:"trimAlignValue",value:function(i){var o=this.state,l=o.handle,c=o.bounds;return JT({value:i,handle:l,bounds:c,props:this.props})}},{key:"render",value:function(){var i=this,o=this.state,l=o.handle,c=o.bounds,p=this.props,g=p.prefixCls,_=p.vertical,x=p.included,T=p.disabled,C=p.min,D=p.max,F=p.reverse,O=p.handle,k=p.trackStyle,q=p.handleStyle,U=p.tabIndex,H=p.ariaLabelGroupForHandles,se=p.ariaLabelledByGroupForHandles,ie=p.ariaValueTextFormatterGroupForHandles,ue=c.map(function(_e){return i.calcOffset(_e)}),ve="".concat(g,"-handle"),ye=c.map(function(_e,Le){var Re,je=U[Le]||0;(T||U[Le]===null)&&(je=null);var $e=l===Le;return O({className:(0,X9.default)((Re={},wt(Re,ve,!0),wt(Re,"".concat(ve,"-").concat(Le+1),!0),wt(Re,"".concat(ve,"-dragging"),$e),Re)),prefixCls:g,vertical:_,dragging:$e,offset:ue[Le],value:_e,index:Le,tabIndex:je,min:C,max:D,reverse:F,disabled:T,style:q[Le],ref:function(nt){return i.saveHandle(Le,nt)},ariaLabel:H[Le],ariaLabelledBy:se[Le],ariaValueTextFormatter:ie[Le]})}),ge=c.slice(0,-1).map(function(_e,Le){var Re,je=Le+1,$e=(0,X9.default)((Re={},wt(Re,"".concat(g,"-track"),!0),wt(Re,"".concat(g,"-track-").concat(je),!0),Re));return K9.default.createElement(zN,{className:$e,vertical:_,reverse:F,included:x,offset:ue[je-1],length:ue[je]-ue[je-1],style:k[Le],key:je})});return{tracks:ge,handles:ye}}}],[{key:"getDerivedStateFromProps",value:function(i,o){if(!("value"in i||"min"in i||"max"in i))return null;var l=i.value||o.bounds,c=l.map(function(p,g){return JT({value:p,handle:g,bounds:o.bounds,props:i})});if(o.bounds.length===c.length){if(c.every(function(p,g){return p===o.bounds[g]}))return null}else c=l.map(function(p,g){return JT({value:p,handle:g,props:i})});return Ct(Ct({},o),{},{bounds:c})}}]),t}(K9.default.Component);Q9.displayName="Range";Q9.defaultProps={count:1,allowCross:!0,pushable:!1,draggableTrack:!1,tabIndex:[],ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]};var i3e=QT(Q9);var fI=ke(Et());var Bf=ke(Et());var NK=ke(Et()),kx=ke(Et());var Ml=ke(Et()),G5e=ke(No());var a3e=function(e){return+setTimeout(e,16)},s3e=function(e){return clearTimeout(e)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(a3e=function(e){return window.requestAnimationFrame(e)},s3e=function(e){return window.cancelAnimationFrame(e)});var o3e=0,J9=new Map;function l3e(r){J9.delete(r)}var u3e=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;o3e+=1;var n=o3e;function i(o){if(o===0)l3e(n),e();else{var l=a3e(function(){i(o-1)});J9.set(n,l)}}return i(t),n};u3e.cancel=function(r){var e=J9.get(r);return l3e(r),s3e(e)};var el=u3e;function lv(r,e){if(!r)return!1;if(r.contains)return r.contains(e);for(var t=e;t;){if(t===r)return!0;t=t.parentNode}return!1}var h3e=ke(Et()),eK=ke(No());function c3e(r){return r instanceof HTMLElement||r instanceof SVGElement}function Msr(r){return r&&gn(r)==="object"&&c3e(r.nativeElement)?r.nativeElement:c3e(r)?r:null}function eI(r){var e=Msr(r);if(e)return e;if(r instanceof h3e.default.Component){var t;return(t=eK.default.findDOMNode)===null||t===void 0?void 0:t.call(eK.default,r)}return null}var rk=ke(Et()),tI=ke(m3e());var Psr=ke(Et());var Rsr=Symbol.for("react.element"),Osr=Symbol.for("react.transitional.element"),Lsr=Symbol.for("react.fragment");function nK(r){return r&&gn(r)==="object"&&(r.$$typeof===Rsr||r.$$typeof===Osr)&&r.type===Lsr}var Dsr=Number(rk.version.split(".")[0]),iK=function(e,t){typeof e=="function"?e(t):gn(e)==="object"&&e&&"current"in e&&(e.current=t)},Cx=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.filter(Boolean);return i.length<=1?i[0]:function(o){t.forEach(function(l){iK(l,o)})}};var rI=function(e){var t,n;if(!e)return!1;if(g3e(e)&&Dsr>=19)return!0;var i=(0,tI.isMemo)(e)?e.type.type:e.type;return!(typeof i=="function"&&!((t=i.prototype)!==null&&t!==void 0&&t.render)&&i.$$typeof!==tI.ForwardRef||typeof e=="function"&&!((n=e.prototype)!==null&&n!==void 0&&n.render)&&e.$$typeof!==tI.ForwardRef)};function g3e(r){return(0,rk.isValidElement)(r)&&!nK(r)}var v3e=function(e){if(e&&g3e(e)){var t=e;return t.props.propertyIsEnumerable("ref")?t.props.ref:t.ref}return null};var dc=ke(Et()),y3e=ke(No());function vh(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var Nsr=(0,dc.forwardRef)(function(r,e){var t=r.didUpdate,n=r.getContainer,i=r.children,o=(0,dc.useRef)(),l=(0,dc.useRef)();(0,dc.useImperativeHandle)(e,function(){return{}});var c=(0,dc.useRef)(!1);return!c.current&&vh()&&(l.current=n(),o.current=l.current.parentNode,c.current=!0),(0,dc.useEffect)(function(){t==null||t(r)}),(0,dc.useEffect)(function(){return l.current.parentNode===null&&o.current!==null&&o.current.appendChild(l.current),function(){var p;(p=l.current)===null||p===void 0||(p=p.parentNode)===null||p===void 0||p.removeChild(l.current)}},[]),l.current?y3e.default.createPortal(i,l.current):null}),_3e=Nsr;var $5e=ke(bi());function ksr(r,e,t){return t?r[0]===e[0]:r[0]===e[0]&&r[1]===e[1]}function x3e(r,e,t){var n=r[e]||{};return Ct(Ct({},n),t)}function b3e(r,e,t,n){for(var i=t.points,o=Object.keys(r),l=0;l<o.length;l+=1){var c=o[l];if(ksr(r[c].points,i,n))return"".concat(e,"-placement-").concat(c)}return""}function oK(r){if(Array.isArray(r))return r}function w3e(r,e){var t=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,o,l,c=[],p=!0,g=!1;try{if(o=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;p=!1}else for(;!(p=(n=o.call(t)).done)&&(c.push(n.value),c.length!==e);p=!0);}catch(_){g=!0,i=_}finally{try{if(!p&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(g)throw i}}return c}}function aK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vn(r,e){return oK(r)||w3e(r,e)||KT(r,e)||aK()}var fv=ke(Et()),hI=ke(Et());var E3e=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var r=navigator.userAgent||navigator.vendor||window.opera;return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(r==null?void 0:r.substr(0,4))};var gK=ke(Et()),V3e=ke(bi());var B3e=ke(bi());var rl=ke(Et()),mK=ke(Et());var sK=ke(Et());var S3e=sK.createContext({});var T3e=ke(Et()),qsr=function(r){Za(t,r);var e=Ya(t);function t(){return Ha(this,t),e.apply(this,arguments)}return Wa(t,[{key:"render",value:function(){return this.props.children}}]),t}(T3e.Component),I3e=qsr;var nk=ke(Et());function Qd(r){var e=nk.useRef();e.current=r;var t=nk.useCallback(function(){for(var n,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(n=e.current)===null||n===void 0?void 0:n.call.apply(n,[e].concat(o))},[]);return t}var Px=ke(Et());var M3e=vh()?Px.useLayoutEffect:Px.useEffect,jsr=function(e,t){var n=Px.useRef(!0);M3e(function(){return e(n.current)},t),M3e(function(){return n.current=!1,function(){n.current=!0}},[])};var nI=jsr;var Rx=ke(Et());function jf(r){var e=Rx.useRef(!1),t=Rx.useState(r),n=vn(t,2),i=n[0],o=n[1];Rx.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function l(c,p){p&&e.current||o(c)}return[i,l]}var ik=ke(Et());function lK(r){var e=ik.useReducer(function(c){return c+1},0),t=vn(e,2),n=t[1],i=ik.useRef(r),o=Qd(function(){return i.current}),l=Qd(function(c){i.current=typeof c=="function"?c(i.current):c,n()});return[o,l]}var pk=ke(Et()),zf=ke(Et());var yh="none",iI="appear",oI="enter",aI="leave",uK="none",tl="prepare",Ff="start",Jd="active",ok="end",ak="prepared";var D3e=ke(Et()),N3e=ke(Et());function A3e(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit".concat(r)]="webkit".concat(e),t["Moz".concat(r)]="moz".concat(e),t["ms".concat(r)]="MS".concat(e),t["O".concat(r)]="o".concat(e.toLowerCase()),t}function zsr(r,e){var t={animationend:A3e("Animation","AnimationEnd"),transitionend:A3e("Transition","TransitionEnd")};return r&&("AnimationEvent"in e||delete t.animationend.animation,"TransitionEvent"in e||delete t.transitionend.transition),t}var Bsr=zsr(vh(),typeof window!="undefined"?window:{}),P3e={};vh()&&(C3e=document.createElement("div"),P3e=C3e.style);var C3e,sk={};function R3e(r){if(sk[r])return sk[r];var e=Bsr[r];if(e)for(var t=Object.keys(e),n=t.length,i=0;i<n;i+=1){var o=t[i];if(Object.prototype.hasOwnProperty.call(e,o)&&o in P3e)return sk[r]=e[o],sk[r]}return""}var O3e=R3e("animationend"),L3e=R3e("transitionend"),lk=!!(O3e&&L3e),cK=O3e||"animationend",hK=L3e||"transitionend";function fK(r,e){if(!r)return null;if(gn(r)==="object"){var t=e.replace(/-\w/g,function(n){return n[1].toUpperCase()});return r[t]}return"".concat(r,"-").concat(e)}var k3e=function(r){var e=(0,N3e.useRef)();function t(i){i&&(i.removeEventListener(hK,r),i.removeEventListener(cK,r))}function n(i){e.current&&e.current!==i&&t(e.current),i&&i!==e.current&&(i.addEventListener(hK,r),i.addEventListener(cK,r),e.current=i)}return D3e.useEffect(function(){return function(){t(e.current)}},[]),[n,t]};var uk=ke(Et()),Usr=vh()?uk.useLayoutEffect:uk.useEffect,ck=Usr;var j3e=ke(Et());var hk=ke(Et()),q3e=function(){var r=hk.useRef(null);function e(){el.cancel(r.current)}function t(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var o=el(function(){i<=1?n({isCanceled:function(){return o!==r.current}}):t(n,i-1)});r.current=o}return hk.useEffect(function(){return function(){e()}},[]),[t,e]};var Vsr=[tl,Ff,Jd,ok],Gsr=[tl,ak],pK=!1,F3e=!0;function fk(r){return r===Jd||r===ok}var z3e=function(r,e,t){var n=jf(uK),i=vn(n,2),o=i[0],l=i[1],c=q3e(),p=vn(c,2),g=p[0],_=p[1];function x(){l(tl,!0)}var T=e?Gsr:Vsr;return ck(function(){if(o!==uK&&o!==ok){var C=T.indexOf(o),D=T[C+1],F=t(o);F===pK?l(D,!0):D&&g(function(O){function k(){O.isCanceled()||l(D,!0)}F===!0?k():Promise.resolve(F).then(k)})}},[r,o]),j3e.useEffect(function(){return function(){_()}},[]),[x,o]};function dK(r,e,t,n){var i=n.motionEnter,o=i===void 0?!0:i,l=n.motionAppear,c=l===void 0?!0:l,p=n.motionLeave,g=p===void 0?!0:p,_=n.motionDeadline,x=n.motionLeaveImmediately,T=n.onAppearPrepare,C=n.onEnterPrepare,D=n.onLeavePrepare,F=n.onAppearStart,O=n.onEnterStart,k=n.onLeaveStart,q=n.onAppearActive,U=n.onEnterActive,H=n.onLeaveActive,se=n.onAppearEnd,ie=n.onEnterEnd,ue=n.onLeaveEnd,ve=n.onVisibleChanged,ye=jf(),ge=vn(ye,2),_e=ge[0],Le=ge[1],Re=lK(yh),je=vn(Re,2),$e=je[0],Be=je[1],nt=jf(null),We=vn(nt,2),mt=We[0],ht=We[1],_t=$e(),ze=(0,zf.useRef)(!1),St=(0,zf.useRef)(null);function jt(){return t()}var Fe=(0,zf.useRef)(!1);function st(){Be(yh),ht(null,!0)}var He=Qd(function(hr){var dr=$e();if(dr!==yh){var an=jt();if(!(hr&&!hr.deadline&&hr.target!==an)){var wn=Fe.current,Ln;dr===iI&&wn?Ln=se==null?void 0:se(an,hr):dr===oI&&wn?Ln=ie==null?void 0:ie(an,hr):dr===aI&&wn&&(Ln=ue==null?void 0:ue(an,hr)),wn&&Ln!==!1&&st()}}}),et=k3e(He),it=vn(et,1),at=it[0],Nt=function(dr){switch(dr){case iI:return wt(wt(wt({},tl,T),Ff,F),Jd,q);case oI:return wt(wt(wt({},tl,C),Ff,O),Jd,U);case aI:return wt(wt(wt({},tl,D),Ff,k),Jd,H);default:return{}}},At=pk.useMemo(function(){return Nt(_t)},[_t]),Mt=z3e(_t,!r,function(hr){if(hr===tl){var dr=At[tl];return dr?dr(jt()):pK}if($t in At){var an;ht(((an=At[$t])===null||an===void 0?void 0:an.call(At,jt(),null))||null)}return $t===Jd&&_t!==yh&&(at(jt()),_>0&&(clearTimeout(St.current),St.current=setTimeout(function(){He({deadline:!0})},_))),$t===ak&&st(),F3e}),Ut=vn(Mt,2),Vt=Ut[0],$t=Ut[1],Lr=fk($t);Fe.current=Lr;var yr=(0,zf.useRef)(null);ck(function(){if(!(ze.current&&yr.current===e)){Le(e);var hr=ze.current;ze.current=!0;var dr;!hr&&e&&c&&(dr=iI),hr&&e&&o&&(dr=oI),(hr&&!e&&g||!hr&&x&&!e&&g)&&(dr=aI);var an=Nt(dr);dr&&(r||an[tl])?(Be(dr),Vt()):Be(yh),yr.current=e}},[e]),(0,zf.useEffect)(function(){(_t===iI&&!c||_t===oI&&!o||_t===aI&&!g)&&Be(yh)},[c,o,g]),(0,zf.useEffect)(function(){return function(){ze.current=!1,clearTimeout(St.current)}},[]);var ur=pk.useRef(!1);(0,zf.useEffect)(function(){_e&&(ur.current=!0),_e!==void 0&&_t===yh&&((ur.current||_e)&&(ve==null||ve(_e)),ur.current=!0)},[_e,_t]);var cr=mt;return At[tl]&&$t===Ff&&(cr=Ct({transition:"none"},cr)),[_t,$t,cr,_e!=null?_e:e]}function $sr(r){var e=r;gn(r)==="object"&&(e=r.transitionSupport);function t(i,o){return!!(i.motionName&&e&&o!==!1)}var n=rl.forwardRef(function(i,o){var l=i.visible,c=l===void 0?!0:l,p=i.removeOnLeave,g=p===void 0?!0:p,_=i.forceRender,x=i.children,T=i.motionName,C=i.leavedClassName,D=i.eventProps,F=rl.useContext(S3e),O=F.motion,k=t(i,O),q=(0,mK.useRef)(),U=(0,mK.useRef)();function H(){try{return q.current instanceof HTMLElement?q.current:eI(U.current)}catch(We){return null}}var se=dK(k,c,H,i),ie=vn(se,4),ue=ie[0],ve=ie[1],ye=ie[2],ge=ie[3],_e=rl.useRef(ge);ge&&(_e.current=!0);var Le=rl.useCallback(function(We){q.current=We,iK(o,We)},[o]),Re,je=Ct(Ct({},D),{},{visible:c});if(!x)Re=null;else if(ue===yh)ge?Re=x(Ct({},je),Le):!g&&_e.current&&C?Re=x(Ct(Ct({},je),{},{className:C}),Le):_||!g&&!C?Re=x(Ct(Ct({},je),{},{style:{display:"none"}}),Le):Re=null;else{var $e;ve===tl?$e="prepare":fk(ve)?$e="active":ve===Ff&&($e="start");var Be=fK(T,"".concat(ue,"-").concat($e));Re=x(Ct(Ct({},je),{},{className:(0,B3e.default)(fK(T,ue),wt(wt({},Be,Be&&$e),T,typeof T=="string")),style:ye}),Le)}if(rl.isValidElement(Re)&&rI(Re)){var nt=v3e(Re);nt||(Re=rl.cloneElement(Re,{ref:Le}))}return rl.createElement(I3e,{ref:U},Re)});return n.displayName="CSSMotion",n}var dk=$sr(lk);var uv=ke(Et());var mk="add",gk="keep",vk="remove",_k="removed";function Hsr(r){var e;return r&&gn(r)==="object"&&"key"in r?e=r:e={key:r},Ct(Ct({},e),{},{key:String(e.key)})}function yk(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return r.map(Hsr)}function U3e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=[],n=0,i=e.length,o=yk(r),l=yk(e);o.forEach(function(g){for(var _=!1,x=n;x<i;x+=1){var T=l[x];if(T.key===g.key){n<x&&(t=t.concat(l.slice(n,x).map(function(C){return Ct(Ct({},C),{},{status:mk})})),n=x),t.push(Ct(Ct({},T),{},{status:gk})),n+=1,_=!0;break}}_||t.push(Ct(Ct({},g),{},{status:vk}))}),n<i&&(t=t.concat(l.slice(n).map(function(g){return Ct(Ct({},g),{},{status:mk})})));var c={};t.forEach(function(g){var _=g.key;c[_]=(c[_]||0)+1});var p=Object.keys(c).filter(function(g){return c[g]>1});return p.forEach(function(g){t=t.filter(function(_){var x=_.key,T=_.status;return x!==g||T!==vk}),t.forEach(function(_){_.key===g&&(_.status=gk)})}),t}var Wsr=["component","children","onVisibleChanged","onAllRemoved"],Zsr=["status"],Ysr=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function Ksr(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dk,t=function(n){Za(o,n);var i=Ya(o);function o(){var l;Ha(this,o);for(var c=arguments.length,p=new Array(c),g=0;g<c;g++)p[g]=arguments[g];return l=i.call.apply(i,[this].concat(p)),wt(jr(l),"state",{keyEntities:[]}),wt(jr(l),"removeKey",function(_){l.setState(function(x){var T=x.keyEntities.map(function(C){return C.key!==_?C:Ct(Ct({},C),{},{status:_k})});return{keyEntities:T}},function(){var x=l.state.keyEntities,T=x.filter(function(C){var D=C.status;return D!==_k}).length;T===0&&l.props.onAllRemoved&&l.props.onAllRemoved()})}),l}return Wa(o,[{key:"render",value:function(){var c=this,p=this.state.keyEntities,g=this.props,_=g.component,x=g.children,T=g.onVisibleChanged,C=g.onAllRemoved,D=vs(g,Wsr),F=_||uv.Fragment,O={};return Ysr.forEach(function(k){O[k]=D[k],delete D[k]}),delete D.keys,uv.createElement(F,D,p.map(function(k,q){var U=k.status,H=vs(k,Zsr),se=U===mk||U===gk;return uv.createElement(e,hn({},O,{key:H.key,visible:se,eventProps:H,onVisibleChanged:function(ue){T==null||T(ue,{key:H.key}),ue||c.removeKey(H.key)}}),function(ie,ue){return x(Ct(Ct({},ie),{},{index:q}),ue)})}))}}],[{key:"getDerivedStateFromProps",value:function(c,p){var g=c.keys,_=p.keyEntities,x=yk(g),T=U3e(_,x);return{keyEntities:T.filter(function(C){var D=_.find(function(F){var O=F.key;return C.key===O});return!(D&&D.status===_k&&C.status===vk)})}}}]),o}(uv.Component);return wt(t,"defaultProps",{component:"div"}),t}var Xsr=Ksr(lk);var Ox=dk;function xk(r){var e=r.prefixCls,t=r.motion,n=r.animation,i=r.transitionName;return t||(n?{motionName:"".concat(e,"-").concat(n)}:i?{motionName:i}:null)}function vK(r){var e=r.prefixCls,t=r.visible,n=r.zIndex,i=r.mask,o=r.maskMotion,l=r.maskAnimation,c=r.maskTransitionName;if(!i)return null;var p={};return(o||c||l)&&(p=Ct({motionAppear:!0},xk({motion:o,prefixCls:e,transitionName:c,animation:l}))),gK.createElement(Ox,hn({},p,{visible:t,removeOnLeave:!0}),function(g){var _=g.className;return gK.createElement("div",{style:{zIndex:n},className:(0,V3e.default)("".concat(e,"-mask"),_)})})}var Il=ke(Et()),hv=ke(Et());function G3e(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function $3e(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?G3e(Object(t),!0).forEach(function(n){Qsr(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):G3e(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function wK(r){"@babel/helpers - typeof";return wK=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wK(r)}function Qsr(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var sI,Jsr={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function Tk(){if(sI!==void 0)return sI;sI="";var r=document.createElement("p").style,e="Transform";for(var t in Jsr)t+e in r&&(sI=t);return sI}function i5e(){return Tk()?"".concat(Tk(),"TransitionProperty"):"transitionProperty"}function Ik(){return Tk()?"".concat(Tk(),"Transform"):"transform"}function H3e(r,e){var t=i5e();t&&(r.style[t]=e,t!=="transitionProperty"&&(r.style.transitionProperty=e))}function yK(r,e){var t=Ik();t&&(r.style[t]=e,t!=="transform"&&(r.style.transform=e))}function elr(r){return r.style.transitionProperty||r.style[i5e()]}function tlr(r){var e=window.getComputedStyle(r,null),t=e.getPropertyValue("transform")||e.getPropertyValue(Ik());if(t&&t!=="none"){var n=t.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(n[12]||n[4],0),y:parseFloat(n[13]||n[5],0)}}return{x:0,y:0}}var rlr=/matrix\((.*)\)/,nlr=/matrix3d\((.*)\)/;function ilr(r,e){var t=window.getComputedStyle(r,null),n=t.getPropertyValue("transform")||t.getPropertyValue(Ik());if(n&&n!=="none"){var i,o=n.match(rlr);if(o)o=o[1],i=o.split(",").map(function(c){return parseFloat(c,10)}),i[4]=e.x,i[5]=e.y,yK(r,"matrix(".concat(i.join(","),")"));else{var l=n.match(nlr)[1];i=l.split(",").map(function(c){return parseFloat(c,10)}),i[12]=e.x,i[13]=e.y,yK(r,"matrix3d(".concat(i.join(","),")"))}}else yK(r,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}var olr=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,cI;function W3e(r){var e=r.style.display;r.style.display="none",r.offsetHeight,r.style.display=e}function Lx(r,e,t){var n=t;if(wK(e)==="object"){for(var i in e)e.hasOwnProperty(i)&&Lx(r,i,e[i]);return}if(typeof n!="undefined"){typeof n=="number"&&(n="".concat(n,"px")),r.style[e]=n;return}return cI(r,e)}function alr(r){var e,t,n,i=r.ownerDocument,o=i.body,l=i&&i.documentElement;return e=r.getBoundingClientRect(),t=Math.floor(e.left),n=Math.floor(e.top),t-=l.clientLeft||o.clientLeft||0,n-=l.clientTop||o.clientTop||0,{left:t,top:n}}function o5e(r,e){var t=r["page".concat(e?"Y":"X","Offset")],n="scroll".concat(e?"Top":"Left");if(typeof t!="number"){var i=r.document;t=i.documentElement[n],typeof t!="number"&&(t=i.body[n])}return t}function a5e(r){return o5e(r)}function s5e(r){return o5e(r,!0)}function uI(r){var e=alr(r),t=r.ownerDocument,n=t.defaultView||t.parentWindow;return e.left+=a5e(n),e.top+=s5e(n),e}function IK(r){return r!=null&&r==r.window}function l5e(r){return IK(r)?r.document:r.nodeType===9?r:r.ownerDocument}function slr(r,e,t){var n=t,i="",o=l5e(r);return n=n||o.defaultView.getComputedStyle(r,null),n&&(i=n.getPropertyValue(e)||n[e]),i}var llr=new RegExp("^(".concat(olr,")(?!px)[a-z%]+$"),"i"),ulr=/^(top|right|bottom|left)$/,_K="currentStyle",xK="runtimeStyle",cv="left",clr="px";function hlr(r,e){var t=r[_K]&&r[_K][e];if(llr.test(t)&&!ulr.test(e)){var n=r.style,i=n[cv],o=r[xK][cv];r[xK][cv]=r[_K][cv],n[cv]=e==="fontSize"?"1em":t||0,t=n.pixelLeft+clr,n[cv]=i,r[xK][cv]=o}return t===""?"auto":t}typeof window!="undefined"&&(cI=window.getComputedStyle?slr:hlr);function bk(r,e){return r==="left"?e.useCssRight?"right":r:e.useCssBottom?"bottom":r}function Z3e(r){if(r==="left")return"right";if(r==="right")return"left";if(r==="top")return"bottom";if(r==="bottom")return"top"}function Y3e(r,e,t){Lx(r,"position")==="static"&&(r.style.position="relative");var n=-999,i=-999,o=bk("left",t),l=bk("top",t),c=Z3e(o),p=Z3e(l);o!=="left"&&(n=999),l!=="top"&&(i=999);var g="",_=uI(r);("left"in e||"top"in e)&&(g=elr(r)||"",H3e(r,"none")),"left"in e&&(r.style[c]="",r.style[o]="".concat(n,"px")),"top"in e&&(r.style[p]="",r.style[l]="".concat(i,"px")),W3e(r);var x=uI(r),T={};for(var C in e)if(e.hasOwnProperty(C)){var D=bk(C,t),F=C==="left"?n:i,O=_[C]-x[C];D===C?T[D]=F+O:T[D]=F-O}Lx(r,T),W3e(r),("left"in e||"top"in e)&&H3e(r,g);var k={};for(var q in e)if(e.hasOwnProperty(q)){var U=bk(q,t),H=e[q]-_[q];q===U?k[U]=T[U]+H:k[U]=T[U]-H}Lx(r,k)}function flr(r,e){var t=uI(r),n=tlr(r),i={x:n.x,y:n.y};"left"in e&&(i.x=n.x+e.left-t.left),"top"in e&&(i.y=n.y+e.top-t.top),ilr(r,i)}function plr(r,e,t){if(t.ignoreShake){var n=uI(r),i=n.left.toFixed(0),o=n.top.toFixed(0),l=e.left.toFixed(0),c=e.top.toFixed(0);if(i===l&&o===c)return}t.useCssRight||t.useCssBottom?Y3e(r,e,t):t.useCssTransform&&Ik()in document.body.style?flr(r,e):Y3e(r,e,t)}function MK(r,e){for(var t=0;t<r.length;t++)e(r[t])}function u5e(r){return cI(r,"boxSizing")==="border-box"}var dlr=["margin","border","padding"],EK=-1,mlr=2,SK=1,glr=0;function vlr(r,e,t){var n={},i=r.style,o;for(o in e)e.hasOwnProperty(o)&&(n[o]=i[o],i[o]=e[o]);t.call(r);for(o in e)e.hasOwnProperty(o)&&(i[o]=n[o])}function lI(r,e,t){var n=0,i,o,l;for(o=0;o<e.length;o++)if(i=e[o],i)for(l=0;l<t.length;l++){var c=void 0;i==="border"?c="".concat(i).concat(t[l],"Width"):c=i+t[l],n+=parseFloat(cI(r,c))||0}return n}var _h={getParent:function(e){var t=e;do t.nodeType===11&&t.host?t=t.host:t=t.parentNode;while(t&&t.nodeType!==1&&t.nodeType!==9);return t}};MK(["Width","Height"],function(r){_h["doc".concat(r)]=function(e){var t=e.document;return Math.max(t.documentElement["scroll".concat(r)],t.body["scroll".concat(r)],_h["viewport".concat(r)](t))},_h["viewport".concat(r)]=function(e){var t="client".concat(r),n=e.document,i=n.body,o=n.documentElement,l=o[t];return n.compatMode==="CSS1Compat"&&l||i&&i[t]||l}});function K3e(r,e,t){var n=t;if(IK(r))return e==="width"?_h.viewportWidth(r):_h.viewportHeight(r);if(r.nodeType===9)return e==="width"?_h.docWidth(r):_h.docHeight(r);var i=e==="width"?["Left","Right"]:["Top","Bottom"],o=Math.floor(e==="width"?r.getBoundingClientRect().width:r.getBoundingClientRect().height),l=u5e(r),c=0;(o==null||o<=0)&&(o=void 0,c=cI(r,e),(c==null||Number(c)<0)&&(c=r.style[e]||0),c=Math.floor(parseFloat(c))||0),n===void 0&&(n=l?SK:EK);var p=o!==void 0||l,g=o||c;return n===EK?p?g-lI(r,["border","padding"],i):c:p?n===SK?g:g+(n===mlr?-lI(r,["border"],i):lI(r,["margin"],i)):c+lI(r,dlr.slice(n),i)}var ylr={position:"absolute",visibility:"hidden",display:"block"};function X3e(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n,i=e[0];return i.offsetWidth!==0?n=K3e.apply(void 0,e):vlr(i,ylr,function(){n=K3e.apply(void 0,e)}),n}MK(["width","height"],function(r){var e=r.charAt(0).toUpperCase()+r.slice(1);_h["outer".concat(e)]=function(n,i){return n&&X3e(n,r,i?glr:SK)};var t=r==="width"?["Left","Right"]:["Top","Bottom"];_h[r]=function(n,i){var o=i;if(o!==void 0){if(n){var l=u5e(n);return l&&(o+=lI(n,["padding","border"],t)),Lx(n,r,o)}return}return n&&X3e(n,r,EK)}});function c5e(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}var kr={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:l5e,offset:function(e,t,n){if(typeof t!="undefined")plr(e,t,n||{});else return uI(e)},isWindow:IK,each:MK,css:Lx,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);var i=e.overflow;if(i)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:c5e,getWindowScrollLeft:function(e){return a5e(e)},getWindowScrollTop:function(e){return s5e(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)kr.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};c5e(kr,_h);var bK=kr.getParent;function TK(r){if(kr.isWindow(r)||r.nodeType===9)return null;var e=kr.getDocument(r),t=e.body,n,i=kr.css(r,"position"),o=i==="fixed"||i==="absolute";if(!o)return r.nodeName.toLowerCase()==="html"?null:bK(r);for(n=bK(r);n&&n!==t&&n.nodeType!==9;n=bK(n))if(i=kr.css(n,"position"),i!=="static")return n;return null}var Q3e=kr.getParent;function _lr(r){if(kr.isWindow(r)||r.nodeType===9)return!1;var e=kr.getDocument(r),t=e.body,n=null;for(n=Q3e(r);n&&n!==t&&n!==e;n=Q3e(n)){var i=kr.css(n,"position");if(i==="fixed")return!0}return!1}function AK(r,e){for(var t={left:0,right:1/0,top:0,bottom:1/0},n=TK(r),i=kr.getDocument(r),o=i.defaultView||i.parentWindow,l=i.body,c=i.documentElement;n;){if((navigator.userAgent.indexOf("MSIE")===-1||n.clientWidth!==0)&&n!==l&&n!==c&&kr.css(n,"overflow")!=="visible"){var p=kr.offset(n);p.left+=n.clientLeft,p.top+=n.clientTop,t.top=Math.max(t.top,p.top),t.right=Math.min(t.right,p.left+n.clientWidth),t.bottom=Math.min(t.bottom,p.top+n.clientHeight),t.left=Math.max(t.left,p.left)}else if(n===l||n===c)break;n=TK(n)}var g=null;if(!kr.isWindow(r)&&r.nodeType!==9){g=r.style.position;var _=kr.css(r,"position");_==="absolute"&&(r.style.position="fixed")}var x=kr.getWindowScrollLeft(o),T=kr.getWindowScrollTop(o),C=kr.viewportWidth(o),D=kr.viewportHeight(o),F=c.scrollWidth,O=c.scrollHeight,k=window.getComputedStyle(l);if(k.overflowX==="hidden"&&(F=o.innerWidth),k.overflowY==="hidden"&&(O=o.innerHeight),r.style&&(r.style.position=g),e||_lr(r))t.left=Math.max(t.left,x),t.top=Math.max(t.top,T),t.right=Math.min(t.right,x+C),t.bottom=Math.min(t.bottom,T+D);else{var q=Math.max(F,x+C);t.right=Math.min(t.right,q);var U=Math.max(O,T+D);t.bottom=Math.min(t.bottom,U)}return t.top>=0&&t.left>=0&&t.bottom>t.top&&t.right>t.left?t:null}function xlr(r,e,t,n){var i=kr.clone(r),o={width:e.width,height:e.height};return n.adjustX&&i.left<t.left&&(i.left=t.left),n.resizeWidth&&i.left>=t.left&&i.left+o.width>t.right&&(o.width-=i.left+o.width-t.right),n.adjustX&&i.left+o.width>t.right&&(i.left=Math.max(t.right-o.width,t.left)),n.adjustY&&i.top<t.top&&(i.top=t.top),n.resizeHeight&&i.top>=t.top&&i.top+o.height>t.bottom&&(o.height-=i.top+o.height-t.bottom),n.adjustY&&i.top+o.height>t.bottom&&(i.top=Math.max(t.bottom-o.height,t.top)),kr.mix(i,o)}function CK(r){var e,t,n;if(!kr.isWindow(r)&&r.nodeType!==9)e=kr.offset(r),t=kr.outerWidth(r),n=kr.outerHeight(r);else{var i=kr.getWindow(r);e={left:kr.getWindowScrollLeft(i),top:kr.getWindowScrollTop(i)},t=kr.viewportWidth(i),n=kr.viewportHeight(i)}return e.width=t,e.height=n,e}function J3e(r,e){var t=e.charAt(0),n=e.charAt(1),i=r.width,o=r.height,l=r.left,c=r.top;return t==="c"?c+=o/2:t==="b"&&(c+=o),n==="c"?l+=i/2:n==="r"&&(l+=i),{left:l,top:c}}function wk(r,e,t,n,i){var o=J3e(e,t[1]),l=J3e(r,t[0]),c=[l.left-o.left,l.top-o.top];return{left:Math.round(r.left-c[0]+n[0]-i[0]),top:Math.round(r.top-c[1]+n[1]-i[1])}}function e5e(r,e,t){return r.left<t.left||r.left+e.width>t.right}function t5e(r,e,t){return r.top<t.top||r.top+e.height>t.bottom}function blr(r,e,t){return r.left>t.right||r.left+e.width<t.left}function wlr(r,e,t){return r.top>t.bottom||r.top+e.height<t.top}function Ek(r,e,t){var n=[];return kr.each(r,function(i){n.push(i.replace(e,function(o){return t[o]}))}),n}function Sk(r,e){return r[e]=-r[e],r}function r5e(r,e){var t;return /%$/.test(r)?t=parseInt(r.substring(0,r.length-1),10)/100*e:t=parseInt(r,10),t||0}function n5e(r,e){r[0]=r5e(r[0],e.width),r[1]=r5e(r[1],e.height)}function h5e(r,e,t,n){var i=t.points,o=t.offset||[0,0],l=t.targetOffset||[0,0],c=t.overflow,p=t.source||r;o=[].concat(o),l=[].concat(l),c=c||{};var g={},_=0,x=!!(c&&c.alwaysByViewport),T=AK(p,x),C=CK(p);n5e(o,C),n5e(l,e);var D=wk(C,e,i,o,l),F=kr.merge(C,D);if(T&&(c.adjustX||c.adjustY)&&n){if(c.adjustX&&e5e(D,C,T)){var O=Ek(i,/[lr]/gi,{l:"r",r:"l"}),k=Sk(o,0),q=Sk(l,0),U=wk(C,e,O,k,q);blr(U,C,T)||(_=1,i=O,o=k,l=q)}if(c.adjustY&&t5e(D,C,T)){var H=Ek(i,/[tb]/gi,{t:"b",b:"t"}),se=Sk(o,1),ie=Sk(l,1),ue=wk(C,e,H,se,ie);wlr(ue,C,T)||(_=1,i=H,o=se,l=ie)}_&&(D=wk(C,e,i,o,l),kr.mix(F,D));var ve=e5e(D,C,T),ye=t5e(D,C,T);if(ve||ye){var ge=i;ve&&(ge=Ek(i,/[lr]/gi,{l:"r",r:"l"})),ye&&(ge=Ek(i,/[tb]/gi,{t:"b",b:"t"})),i=ge,o=t.offset||[0,0],l=t.targetOffset||[0,0]}g.adjustX=c.adjustX&&ve,g.adjustY=c.adjustY&&ye,(g.adjustX||g.adjustY)&&(F=xlr(D,C,T,g))}return F.width!==C.width&&kr.css(p,"width",kr.width(p)+F.width-C.width),F.height!==C.height&&kr.css(p,"height",kr.height(p)+F.height-C.height),kr.offset(p,{left:F.left,top:F.top},{useCssRight:t.useCssRight,useCssBottom:t.useCssBottom,useCssTransform:t.useCssTransform,ignoreShake:t.ignoreShake}),{points:i,offset:o,targetOffset:l,overflow:g}}function Elr(r,e){var t=AK(r,e),n=CK(r);return!t||n.left+n.width<=t.left||n.top+n.height<=t.top||n.left>=t.right||n.top>=t.bottom}function Mk(r,e,t){var n=t.target||e,i=CK(n),o=!Elr(n,t.overflow&&t.overflow.alwaysByViewport);return h5e(r,i,t,o)}Mk.__getOffsetParent=TK;Mk.__getVisibleRectForElement=AK;function f5e(r,e,t){var n,i,o=kr.getDocument(r),l=o.defaultView||o.parentWindow,c=kr.getWindowScrollLeft(l),p=kr.getWindowScrollTop(l),g=kr.viewportWidth(l),_=kr.viewportHeight(l);"pageX"in e?n=e.pageX:n=c+e.clientX,"pageY"in e?i=e.pageY:i=p+e.clientY;var x={left:n,top:i,width:0,height:0},T=n>=0&&n<=c+g&&i>=0&&i<=p+_,C=[t.points[0],"cc"];return h5e(r,x,$3e($3e({},t),{},{points:C}),T)}function Slr(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function i(o,l){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,p=n.has(o);if(mh(!p,"Warning: There may be circular references"),p)return!1;if(o===l)return!0;if(t&&c>1)return!1;n.add(o);var g=c+1;if(Array.isArray(o)){if(!Array.isArray(l)||o.length!==l.length)return!1;for(var _=0;_<o.length;_++)if(!i(o[_],l[_],g))return!1;return!0}if(o&&l&&gn(o)==="object"&&gn(l)==="object"){var x=Object.keys(o);return x.length!==Object.keys(l).length?!1:x.every(function(T){return i(o[T],l[T],g)})}return!1}return i(r,e)}var p5e=Slr;var d5e=function(r){if(!r)return!1;if(r instanceof Element){if(r.offsetParent)return!0;if(r.getBBox){var e=r.getBBox(),t=e.width,n=e.height;if(t||n)return!0}if(r.getBoundingClientRect){var i=r.getBoundingClientRect(),o=i.width,l=i.height;if(o||l)return!0}}return!1};var Sa=ke(Et());var PK=ke(Et()),m5e=function(r,e){var t=PK.default.useRef(!1),n=PK.default.useRef(null);function i(){window.clearTimeout(n.current)}function o(l){if(i(),!t.current||l===!0){if(r(l)===!1)return;t.current=!0,n.current=window.setTimeout(function(){t.current=!1},e)}else n.current=window.setTimeout(function(){t.current=!1,o()},e)}return[o,function(){t.current=!1,i()}]};var v5e=function(){if(typeof Map!="undefined")return Map;function r(e,t){var n=-1;return e.some(function(i,o){return i[0]===t?(n=o,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var n=r(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(t,n){var i=r(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},e.prototype.delete=function(t){var n=this.__entries__,i=r(n,t);~i&&n.splice(i,1)},e.prototype.has=function(t){return!!~r(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,n){n===void 0&&(n=null);for(var i=0,o=this.__entries__;i<o.length;i++){var l=o[i];t.call(n,l[1],l[0])}},e}()}(),RK=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,Ak=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),Tlr=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Ak):function(r){return setTimeout(function(){return r(Date.now())},1e3/60)}}(),Ilr=2;function Mlr(r,e){var t=!1,n=!1,i=0;function o(){t&&(t=!1,r()),n&&c()}function l(){Tlr(o)}function c(){var p=Date.now();if(t){if(p-i<Ilr)return;n=!0}else t=!0,n=!1,setTimeout(l,e);i=p}return c}var Alr=20,Clr=["top","right","bottom","left","width","height","size","weight"],Plr=typeof MutationObserver!="undefined",Rlr=function(){function r(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Mlr(this.refresh.bind(this),Alr)}return r.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},r.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},r.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},r.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},r.prototype.connect_=function(){!RK||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Plr?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},r.prototype.disconnect_=function(){!RK||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},r.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=t===void 0?"":t,i=Clr.some(function(o){return!!~n.indexOf(o)});i&&this.refresh()},r.getInstance=function(){return this.instance_||(this.instance_=new r),this.instance_},r.instance_=null,r}(),y5e=function(r,e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];Object.defineProperty(r,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return r},Dx=function(r){var e=r&&r.ownerDocument&&r.ownerDocument.defaultView;return e||Ak},_5e=Pk(0,0,0,0);function Ck(r){return parseFloat(r)||0}function g5e(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(n,i){var o=r["border-"+i+"-width"];return n+Ck(o)},0)}function Olr(r){for(var e=["top","right","bottom","left"],t={},n=0,i=e;n<i.length;n++){var o=i[n],l=r["padding-"+o];t[o]=Ck(l)}return t}function Llr(r){var e=r.getBBox();return Pk(0,0,e.width,e.height)}function Dlr(r){var e=r.clientWidth,t=r.clientHeight;if(!e&&!t)return _5e;var n=Dx(r).getComputedStyle(r),i=Olr(n),o=i.left+i.right,l=i.top+i.bottom,c=Ck(n.width),p=Ck(n.height);if(n.boxSizing==="border-box"&&(Math.round(c+o)!==e&&(c-=g5e(n,"left","right")+o),Math.round(p+l)!==t&&(p-=g5e(n,"top","bottom")+l)),!klr(r)){var g=Math.round(c+o)-e,_=Math.round(p+l)-t;Math.abs(g)!==1&&(c-=g),Math.abs(_)!==1&&(p-=_)}return Pk(i.left,i.top,c,p)}var Nlr=function(){return typeof SVGGraphicsElement!="undefined"?function(r){return r instanceof Dx(r).SVGGraphicsElement}:function(r){return r instanceof Dx(r).SVGElement&&typeof r.getBBox=="function"}}();function klr(r){return r===Dx(r).document.documentElement}function qlr(r){return RK?Nlr(r)?Llr(r):Dlr(r):_5e}function jlr(r){var e=r.x,t=r.y,n=r.width,i=r.height,o=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return y5e(l,{x:e,y:t,width:n,height:i,top:t,right:e+n,bottom:i+t,left:e}),l}function Pk(r,e,t,n){return{x:r,y:e,width:t,height:n}}var Flr=function(){function r(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Pk(0,0,0,0),this.target=e}return r.prototype.isActive=function(){var e=qlr(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},r.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},r}(),zlr=function(){function r(e,t){var n=jlr(t);y5e(this,{target:e,contentRect:n})}return r}(),Blr=function(){function r(e,t,n){if(this.activeObservations_=[],this.observations_=new v5e,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return r.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof Dx(e).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var t=this.observations_;t.has(e)||(t.set(e,new Flr(e)),this.controller_.addObserver(this),this.controller_.refresh())}},r.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof Dx(e).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},r.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},r.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},r.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(n){return new zlr(n.target,n.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},r.prototype.clearActive=function(){this.activeObservations_.splice(0)},r.prototype.hasActive=function(){return this.activeObservations_.length>0},r}(),x5e=typeof WeakMap!="undefined"?new WeakMap:new v5e,b5e=function(){function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=Rlr.getInstance(),n=new Blr(e,t,this);x5e.set(this,n)}return r}();["observe","unobserve","disconnect"].forEach(function(r){b5e.prototype[r]=function(){var e;return(e=x5e.get(this))[r].apply(e,arguments)}});var Ulr=function(){return typeof Ak.ResizeObserver!="undefined"?Ak.ResizeObserver:b5e}(),w5e=Ulr;function E5e(r,e){return r===e?!0:!r||!e?!1:"pageX"in e&&"pageY"in e?r.pageX===e.pageX&&r.pageY===e.pageY:"clientX"in e&&"clientY"in e?r.clientX===e.clientX&&r.clientY===e.clientY:!1}function S5e(r,e){r!==document.activeElement&&lv(e,r)&&typeof r.focus=="function"&&r.focus()}function OK(r,e){var t=null,n=null;function i(l){var c=vn(l,1),p=c[0].target;if(document.documentElement.contains(p)){var g=p.getBoundingClientRect(),_=g.width,x=g.height,T=Math.floor(_),C=Math.floor(x);(t!==T||n!==C)&&Promise.resolve().then(function(){e({width:T,height:C})}),t=T,n=C}}var o=new w5e(i);return r&&o.observe(r),function(){o.disconnect()}}function T5e(r){return typeof r!="function"?null:r()}function I5e(r){return gn(r)!=="object"||!r?null:r}var Vlr=function(e,t){var n=e.children,i=e.disabled,o=e.target,l=e.align,c=e.onAlign,p=e.monitorWindowResize,g=e.monitorBufferTime,_=g===void 0?0:g,x=Sa.default.useRef({}),T=Sa.default.useRef(),C=Sa.default.Children.only(n),D=Sa.default.useRef({});D.current.disabled=i,D.current.target=o,D.current.align=l,D.current.onAlign=c;var F=m5e(function(){var _e=D.current,Le=_e.disabled,Re=_e.target,je=_e.align,$e=_e.onAlign,Be=T.current;if(!Le&&Re&&Be){var nt,We=T5e(Re),mt=I5e(Re);x.current.element=We,x.current.point=mt,x.current.align=je;var ht=document,_t=ht.activeElement;return We&&d5e(We)?nt=Mk(Be,We,je):mt&&(nt=f5e(Be,mt,je)),S5e(_t,Be),$e&&nt&&$e(Be,nt),!0}return!1},_),O=vn(F,2),k=O[0],q=O[1],U=Sa.default.useState(),H=vn(U,2),se=H[0],ie=H[1],ue=Sa.default.useState(),ve=vn(ue,2),ye=ve[0],ge=ve[1];return nI(function(){ie(T5e(o)),ge(I5e(o))}),Sa.default.useEffect(function(){(x.current.element!==se||!E5e(x.current.point,ye)||!p5e(x.current.align,l))&&k()}),Sa.default.useEffect(function(){var _e=OK(T.current,k);return _e},[T.current]),Sa.default.useEffect(function(){var _e=OK(se,k);return _e},[se]),Sa.default.useEffect(function(){i?q():k()},[i]),Sa.default.useEffect(function(){if(p){var _e=ys(window,"resize",k);return _e.remove}},[p]),Sa.default.useEffect(function(){return function(){q()}},[]),Sa.default.useImperativeHandle(t,function(){return{forceAlign:function(){return k(!0)}}}),Sa.default.isValidElement(C)&&(C=Sa.default.cloneElement(C,{ref:Cx(C.ref,T)})),C},M5e=Sa.default.forwardRef(Vlr);M5e.displayName="Align";var A5e=M5e;var C5e=A5e;var N5e=ke(bi());function Rk(){"use strict";Rk=function(){return e};var r,e={},t=Object.prototype,n=t.hasOwnProperty,i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function p(ge,_e,Le,Re){return Object.defineProperty(ge,_e,{value:Le,enumerable:!Re,configurable:!Re,writable:!Re})}try{p({},"")}catch(ge){p=function(Le,Re,je){return Le[Re]=je}}function g(ge,_e,Le,Re){var je=_e&&_e.prototype instanceof T?_e:T,$e=Object.create(je.prototype);return p($e,"_invoke",function(Be,nt,We){var mt=1;return function(ht,_t){if(mt===3)throw Error("Generator is already running");if(mt===4){if(ht==="throw")throw _t;return{value:r,done:!0}}for(We.method=ht,We.arg=_t;;){var ze=We.delegate;if(ze){var St=se(ze,We);if(St){if(St===x)continue;return St}}if(We.method==="next")We.sent=We._sent=We.arg;else if(We.method==="throw"){if(mt===1)throw mt=4,We.arg;We.dispatchException(We.arg)}else We.method==="return"&&We.abrupt("return",We.arg);mt=3;var jt=_(Be,nt,We);if(jt.type==="normal"){if(mt=We.done?4:2,jt.arg===x)continue;return{value:jt.arg,done:We.done}}jt.type==="throw"&&(mt=4,We.method="throw",We.arg=jt.arg)}}}(ge,Le,new ve(Re||[])),!0),$e}function _(ge,_e,Le){try{return{type:"normal",arg:ge.call(_e,Le)}}catch(Re){return{type:"throw",arg:Re}}}e.wrap=g;var x={};function T(){}function C(){}function D(){}var F={};p(F,o,function(){return this});var O=Object.getPrototypeOf,k=O&&O(O(ye([])));k&&k!==t&&n.call(k,o)&&(F=k);var q=D.prototype=T.prototype=Object.create(F);function U(ge){["next","throw","return"].forEach(function(_e){p(ge,_e,function(Le){return this._invoke(_e,Le)})})}function H(ge,_e){function Le(je,$e,Be,nt){var We=_(ge[je],ge,$e);if(We.type!=="throw"){var mt=We.arg,ht=mt.value;return ht&&gn(ht)=="object"&&n.call(ht,"__await")?_e.resolve(ht.__await).then(function(_t){Le("next",_t,Be,nt)},function(_t){Le("throw",_t,Be,nt)}):_e.resolve(ht).then(function(_t){mt.value=_t,Be(mt)},function(_t){return Le("throw",_t,Be,nt)})}nt(We.arg)}var Re;p(this,"_invoke",function(je,$e){function Be(){return new _e(function(nt,We){Le(je,$e,nt,We)})}return Re=Re?Re.then(Be,Be):Be()},!0)}function se(ge,_e){var Le=_e.method,Re=ge.i[Le];if(Re===r)return _e.delegate=null,Le==="throw"&&ge.i.return&&(_e.method="return",_e.arg=r,se(ge,_e),_e.method==="throw")||Le!=="return"&&(_e.method="throw",_e.arg=new TypeError("The iterator does not provide a '"+Le+"' method")),x;var je=_(Re,ge.i,_e.arg);if(je.type==="throw")return _e.method="throw",_e.arg=je.arg,_e.delegate=null,x;var $e=je.arg;return $e?$e.done?(_e[ge.r]=$e.value,_e.next=ge.n,_e.method!=="return"&&(_e.method="next",_e.arg=r),_e.delegate=null,x):$e:(_e.method="throw",_e.arg=new TypeError("iterator result is not an object"),_e.delegate=null,x)}function ie(ge){this.tryEntries.push(ge)}function ue(ge){var _e=ge[4]||{};_e.type="normal",_e.arg=r,ge[4]=_e}function ve(ge){this.tryEntries=[[-1]],ge.forEach(ie,this),this.reset(!0)}function ye(ge){if(ge!=null){var _e=ge[o];if(_e)return _e.call(ge);if(typeof ge.next=="function")return ge;if(!isNaN(ge.length)){var Le=-1,Re=function je(){for(;++Le<ge.length;)if(n.call(ge,Le))return je.value=ge[Le],je.done=!1,je;return je.value=r,je.done=!0,je};return Re.next=Re}}throw new TypeError(gn(ge)+" is not iterable")}return C.prototype=D,p(q,"constructor",D),p(D,"constructor",C),C.displayName=p(D,c,"GeneratorFunction"),e.isGeneratorFunction=function(ge){var _e=typeof ge=="function"&&ge.constructor;return!!_e&&(_e===C||(_e.displayName||_e.name)==="GeneratorFunction")},e.mark=function(ge){return Object.setPrototypeOf?Object.setPrototypeOf(ge,D):(ge.__proto__=D,p(ge,c,"GeneratorFunction")),ge.prototype=Object.create(q),ge},e.awrap=function(ge){return{__await:ge}},U(H.prototype),p(H.prototype,l,function(){return this}),e.AsyncIterator=H,e.async=function(ge,_e,Le,Re,je){je===void 0&&(je=Promise);var $e=new H(g(ge,_e,Le,Re),je);return e.isGeneratorFunction(_e)?$e:$e.next().then(function(Be){return Be.done?Be.value:$e.next()})},U(q),p(q,c,"Generator"),p(q,o,function(){return this}),p(q,"toString",function(){return"[object Generator]"}),e.keys=function(ge){var _e=Object(ge),Le=[];for(var Re in _e)Le.unshift(Re);return function je(){for(;Le.length;)if((Re=Le.pop())in _e)return je.value=Re,je.done=!1,je;return je.done=!0,je}},e.values=ye,ve.prototype={constructor:ve,reset:function(_e){if(this.prev=this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(ue),!_e)for(var Le in this)Le.charAt(0)==="t"&&n.call(this,Le)&&!isNaN(+Le.slice(1))&&(this[Le]=r)},stop:function(){this.done=!0;var _e=this.tryEntries[0][4];if(_e.type==="throw")throw _e.arg;return this.rval},dispatchException:function(_e){if(this.done)throw _e;var Le=this;function Re(ht){Be.type="throw",Be.arg=_e,Le.next=ht}for(var je=Le.tryEntries.length-1;je>=0;--je){var $e=this.tryEntries[je],Be=$e[4],nt=this.prev,We=$e[1],mt=$e[2];if($e[0]===-1)return Re("end"),!1;if(!We&&!mt)throw Error("try statement without catch or finally");if($e[0]!=null&&$e[0]<=nt){if(nt<We)return this.method="next",this.arg=r,Re(We),!0;if(nt<mt)return Re(mt),!1}}},abrupt:function(_e,Le){for(var Re=this.tryEntries.length-1;Re>=0;--Re){var je=this.tryEntries[Re];if(je[0]>-1&&je[0]<=this.prev&&this.prev<je[2]){var $e=je;break}}$e&&(_e==="break"||_e==="continue")&&$e[0]<=Le&&Le<=$e[2]&&($e=null);var Be=$e?$e[4]:{};return Be.type=_e,Be.arg=Le,$e?(this.method="next",this.next=$e[2],x):this.complete(Be)},complete:function(_e,Le){if(_e.type==="throw")throw _e.arg;return _e.type==="break"||_e.type==="continue"?this.next=_e.arg:_e.type==="return"?(this.rval=this.arg=_e.arg,this.method="return",this.next="end"):_e.type==="normal"&&Le&&(this.next=Le),x},finish:function(_e){for(var Le=this.tryEntries.length-1;Le>=0;--Le){var Re=this.tryEntries[Le];if(Re[2]===_e)return this.complete(Re[4],Re[3]),ue(Re),x}},catch:function(_e){for(var Le=this.tryEntries.length-1;Le>=0;--Le){var Re=this.tryEntries[Le];if(Re[0]===_e){var je=Re[4];if(je.type==="throw"){var $e=je.arg;ue(Re)}return $e}}throw Error("illegal catch attempt")},delegateYield:function(_e,Le,Re){return this.delegate={i:ye(_e),r:Le,n:Re},this.method==="next"&&(this.arg=r),x}},e}function P5e(r,e,t,n,i,o,l){try{var c=r[o](l),p=c.value}catch(g){return void t(g)}c.done?e(p):Promise.resolve(p).then(n,i)}function R5e(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function l(p){P5e(o,n,i,l,c,"next",p)}function c(p){P5e(o,n,i,l,c,"throw",p)}l(void 0)})}}var Nx=ke(Et());var O5e=["measure","alignPre","align",null,"motion"],L5e=function(r,e){var t=jf(null),n=vn(t,2),i=n[0],o=n[1],l=(0,Nx.useRef)();function c(_){o(_,!0)}function p(){el.cancel(l.current)}function g(_){p(),l.current=el(function(){c(function(x){switch(i){case"align":return"motion";case"motion":return"stable";default:}return x}),_==null||_()})}return(0,Nx.useEffect)(function(){c("measure")},[r]),(0,Nx.useEffect)(function(){switch(i){case"measure":e();break;default:}i&&(l.current=el(R5e(Rk().mark(function _(){var x,T;return Rk().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:x=O5e.indexOf(i),T=O5e[x+1],T&&x!==-1&&c(T);case 3:case"end":return D.stop()}},_)}))))},[i]),(0,Nx.useEffect)(function(){return function(){p()}},[]),[i,g]};var Ok=ke(Et()),D5e=function(r){var e=Ok.useState({width:0,height:0}),t=vn(e,2),n=t[0],i=t[1];function o(c){var p=c.offsetWidth,g=c.offsetHeight,_=c.getBoundingClientRect(),x=_.width,T=_.height;Math.abs(p-x)<1&&Math.abs(g-T)<1&&(p=x,g=T),i({width:p,height:g})}var l=Ok.useMemo(function(){var c={};if(r){var p=n.width,g=n.height;r.indexOf("height")!==-1&&g?c.height=g:r.indexOf("minHeight")!==-1&&g&&(c.minHeight=g),r.indexOf("width")!==-1&&p?c.width=p:r.indexOf("minWidth")!==-1&&p&&(c.minWidth=p)}return c},[r,n]);return[l,o]};var k5e=Il.forwardRef(function(r,e){var t=r.visible,n=r.prefixCls,i=r.className,o=r.style,l=r.children,c=r.zIndex,p=r.stretch,g=r.destroyPopupOnHide,_=r.forceRender,x=r.align,T=r.point,C=r.getRootDomNode,D=r.getClassNameFromAlign,F=r.onAlign,O=r.onMouseEnter,k=r.onMouseLeave,q=r.onMouseDown,U=r.onTouchStart,H=r.onClick,se=(0,hv.useRef)(),ie=(0,hv.useRef)(),ue=(0,hv.useState)(),ve=vn(ue,2),ye=ve[0],ge=ve[1],_e=D5e(p),Le=vn(_e,2),Re=Le[0],je=Le[1];function $e(){p&&je(C())}var Be=L5e(t,$e),nt=vn(Be,2),We=nt[0],mt=nt[1],ht=(0,hv.useState)(0),_t=vn(ht,2),ze=_t[0],St=_t[1],jt=(0,hv.useRef)();nI(function(){We==="alignPre"&&St(0)},[We]);function Fe(){return T||C}function st(){var Mt;(Mt=se.current)===null||Mt===void 0||Mt.forceAlign()}function He(Mt,Ut){var Vt=D(Ut);ye!==Vt&&ge(Vt),St(function($t){return $t+1}),We==="align"&&(F==null||F(Mt,Ut))}nI(function(){We==="align"&&(ze<3?st():mt(function(){var Mt;(Mt=jt.current)===null||Mt===void 0||Mt.call(jt)}))},[ze]);var et=Ct({},xk(r));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(Mt){var Ut=et[Mt];et[Mt]=function(Vt,$t){return mt(),Ut==null?void 0:Ut(Vt,$t)}});function it(){return new Promise(function(Mt){jt.current=Mt})}Il.useEffect(function(){!et.motionName&&We==="motion"&&mt()},[et.motionName,We]),Il.useImperativeHandle(e,function(){return{forceAlign:st,getElement:function(){return ie.current}}});var at=Ct(Ct({},Re),{},{zIndex:c,opacity:We==="motion"||We==="stable"||!t?void 0:0,pointerEvents:!t&&We!=="stable"?"none":void 0},o),Nt=!0;x!=null&&x.points&&(We==="align"||We==="stable")&&(Nt=!1);var At=l;return Il.Children.count(l)>1&&(At=Il.createElement("div",{className:"".concat(n,"-content")},l)),Il.createElement(Ox,hn({visible:t,ref:ie,leavedClassName:"".concat(n,"-hidden")},et,{onAppearPrepare:it,onEnterPrepare:it,removeOnLeave:g,forceRender:_}),function(Mt,Ut){var Vt=Mt.className,$t=Mt.style,Lr=(0,N5e.default)(n,i,ye,Vt);return Il.createElement(C5e,{target:Fe(),key:"popup",ref:se,monitorWindowResize:!0,disabled:Nt,align:x,onAlign:He},Il.createElement("div",{ref:Ut,className:Lr,onMouseEnter:O,onMouseLeave:k,onMouseDownCapture:q,onTouchStartCapture:U,onClick:H,style:Ct(Ct({},$t),at)},At))})});k5e.displayName="PopupInner";var q5e=k5e;var wu=ke(Et());var j5e=ke(bi()),F5e=wu.forwardRef(function(r,e){var t=r.prefixCls,n=r.visible,i=r.zIndex,o=r.children,l=r.mobile;l=l===void 0?{}:l;var c=l.popupClassName,p=l.popupStyle,g=l.popupMotion,_=g===void 0?{}:g,x=l.popupRender,T=r.onClick,C=wu.useRef();wu.useImperativeHandle(e,function(){return{forceAlign:function(){},getElement:function(){return C.current}}});var D=Ct({zIndex:i},p),F=o;return wu.Children.count(o)>1&&(F=wu.createElement("div",{className:"".concat(t,"-content")},o)),x&&(F=x(F)),wu.createElement(Ox,hn({visible:n,ref:C,removeOnLeave:!0},_),function(O,k){var q=O.className,U=O.style,H=(0,j5e.default)(t,c,q);return wu.createElement("div",{ref:k,className:H,onClick:T,style:Ct(Ct({},U),D)},F)})});F5e.displayName="MobilePopupInner";var z5e=F5e;var Glr=["visible","mobile"],B5e=fv.forwardRef(function(r,e){var t=r.visible,n=r.mobile,i=vs(r,Glr),o=(0,hI.useState)(t),l=vn(o,2),c=l[0],p=l[1],g=(0,hI.useState)(!1),_=vn(g,2),x=_[0],T=_[1],C=Ct(Ct({},i),{},{visible:c});(0,hI.useEffect)(function(){p(t),t&&n&&T(E3e())},[t,n]);var D=x?fv.createElement(z5e,hn({},C,{mobile:n,ref:e})):fv.createElement(q5e,hn({},C,{ref:e}));return fv.createElement("div",null,fv.createElement(vK,C),D)});B5e.displayName="Popup";var U5e=B5e;var V5e=ke(Et()),$lr=V5e.createContext(null),LK=$lr;function DK(){}function Hlr(){return""}function Wlr(r){return r?r.ownerDocument:window.document}var Zlr=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function Ylr(r){var e=function(t){Za(i,t);var n=Ya(i);function i(o){var l;Ha(this,i),l=n.call(this,o),wt(jr(l),"popupRef",Ml.createRef()),wt(jr(l),"triggerRef",Ml.createRef()),wt(jr(l),"portalContainer",void 0),wt(jr(l),"attachId",void 0),wt(jr(l),"clickOutsideHandler",void 0),wt(jr(l),"touchOutsideHandler",void 0),wt(jr(l),"contextMenuOutsideHandler1",void 0),wt(jr(l),"contextMenuOutsideHandler2",void 0),wt(jr(l),"mouseDownTimeout",void 0),wt(jr(l),"focusTime",void 0),wt(jr(l),"preClickTime",void 0),wt(jr(l),"preTouchTime",void 0),wt(jr(l),"delayTimer",void 0),wt(jr(l),"hasPopupMouseDown",void 0),wt(jr(l),"onMouseEnter",function(p){var g=l.props.mouseEnterDelay;l.fireEvents("onMouseEnter",p),l.delaySetPopupVisible(!0,g,g?null:p)}),wt(jr(l),"onMouseMove",function(p){l.fireEvents("onMouseMove",p),l.setPoint(p)}),wt(jr(l),"onMouseLeave",function(p){l.fireEvents("onMouseLeave",p),l.delaySetPopupVisible(!1,l.props.mouseLeaveDelay)}),wt(jr(l),"onPopupMouseEnter",function(){l.clearDelayTimer()}),wt(jr(l),"onPopupMouseLeave",function(p){var g;p.relatedTarget&&!p.relatedTarget.setTimeout&&lv((g=l.popupRef.current)===null||g===void 0?void 0:g.getElement(),p.relatedTarget)||l.delaySetPopupVisible(!1,l.props.mouseLeaveDelay)}),wt(jr(l),"onFocus",function(p){l.fireEvents("onFocus",p),l.clearDelayTimer(),l.isFocusToShow()&&(l.focusTime=Date.now(),l.delaySetPopupVisible(!0,l.props.focusDelay))}),wt(jr(l),"onMouseDown",function(p){l.fireEvents("onMouseDown",p),l.preClickTime=Date.now()}),wt(jr(l),"onTouchStart",function(p){l.fireEvents("onTouchStart",p),l.preTouchTime=Date.now()}),wt(jr(l),"onBlur",function(p){l.fireEvents("onBlur",p),l.clearDelayTimer(),l.isBlurToHide()&&l.delaySetPopupVisible(!1,l.props.blurDelay)}),wt(jr(l),"onContextMenu",function(p){p.preventDefault(),l.fireEvents("onContextMenu",p),l.setPopupVisible(!0,p)}),wt(jr(l),"onContextMenuClose",function(){l.isContextMenuToShow()&&l.close()}),wt(jr(l),"onClick",function(p){if(l.fireEvents("onClick",p),l.focusTime){var g;if(l.preClickTime&&l.preTouchTime?g=Math.min(l.preClickTime,l.preTouchTime):l.preClickTime?g=l.preClickTime:l.preTouchTime&&(g=l.preTouchTime),Math.abs(g-l.focusTime)<20)return;l.focusTime=0}l.preClickTime=0,l.preTouchTime=0,l.isClickToShow()&&(l.isClickToHide()||l.isBlurToHide())&&p&&p.preventDefault&&p.preventDefault();var _=!l.state.popupVisible;(l.isClickToHide()&&!_||_&&l.isClickToShow())&&l.setPopupVisible(!l.state.popupVisible,p)}),wt(jr(l),"onPopupMouseDown",function(){if(l.hasPopupMouseDown=!0,clearTimeout(l.mouseDownTimeout),l.mouseDownTimeout=window.setTimeout(function(){l.hasPopupMouseDown=!1},0),l.context){var p;(p=l.context).onPopupMouseDown.apply(p,arguments)}}),wt(jr(l),"onDocumentClick",function(p){if(!(l.props.mask&&!l.props.maskClosable)){var g=p.target,_=l.getRootDomNode(),x=l.getPopupDomNode();(!lv(_,g)||l.isContextMenuOnly())&&!lv(x,g)&&!l.hasPopupMouseDown&&l.close()}}),wt(jr(l),"getRootDomNode",function(){var p=l.props.getTriggerDOMNode;if(p)return p(l.triggerRef.current);try{var g=eI(l.triggerRef.current);if(g)return g}catch(_){}return G5e.default.findDOMNode(jr(l))}),wt(jr(l),"getPopupClassNameFromAlign",function(p){var g=[],_=l.props,x=_.popupPlacement,T=_.builtinPlacements,C=_.prefixCls,D=_.alignPoint,F=_.getPopupClassNameFromAlign;return x&&T&&g.push(b3e(T,C,p,D)),F&&g.push(F(p)),g.join(" ")}),wt(jr(l),"getComponent",function(){var p=l.props,g=p.prefixCls,_=p.destroyPopupOnHide,x=p.popupClassName,T=p.onPopupAlign,C=p.popupMotion,D=p.popupAnimation,F=p.popupTransitionName,O=p.popupStyle,k=p.mask,q=p.maskAnimation,U=p.maskTransitionName,H=p.maskMotion,se=p.zIndex,ie=p.popup,ue=p.stretch,ve=p.alignPoint,ye=p.mobile,ge=p.forceRender,_e=p.onPopupClick,Le=l.state,Re=Le.popupVisible,je=Le.point,$e=l.getPopupAlign(),Be={};return l.isMouseEnterToShow()&&(Be.onMouseEnter=l.onPopupMouseEnter),l.isMouseLeaveToHide()&&(Be.onMouseLeave=l.onPopupMouseLeave),Be.onMouseDown=l.onPopupMouseDown,Be.onTouchStart=l.onPopupMouseDown,Ml.createElement(U5e,hn({prefixCls:g,destroyPopupOnHide:_,visible:Re,point:ve&&je,className:x,align:$e,onAlign:T,animation:D,getClassNameFromAlign:l.getPopupClassNameFromAlign},Be,{stretch:ue,getRootDomNode:l.getRootDomNode,style:O,mask:k,zIndex:se,transitionName:F,maskAnimation:q,maskTransitionName:U,maskMotion:H,ref:l.popupRef,motion:C,mobile:ye,forceRender:ge,onClick:_e}),typeof ie=="function"?ie():ie)}),wt(jr(l),"attachParent",function(p){el.cancel(l.attachId);var g=l.props,_=g.getPopupContainer,x=g.getDocument,T=l.getRootDomNode(),C;_?(T||_.length===0)&&(C=_(T)):C=x(l.getRootDomNode()).body,C?C.appendChild(p):l.attachId=el(function(){l.attachParent(p)})}),wt(jr(l),"getContainer",function(){if(!l.portalContainer){var p=l.props.getDocument,g=p(l.getRootDomNode()).createElement("div");g.style.position="absolute",g.style.top="0",g.style.left="0",g.style.width="100%",l.portalContainer=g}return l.attachParent(l.portalContainer),l.portalContainer}),wt(jr(l),"setPoint",function(p){var g=l.props.alignPoint;!g||!p||l.setState({point:{pageX:p.pageX,pageY:p.pageY}})}),wt(jr(l),"handlePortalUpdate",function(){l.state.prevPopupVisible!==l.state.popupVisible&&l.props.afterPopupVisibleChange(l.state.popupVisible)}),wt(jr(l),"triggerContextValue",{onPopupMouseDown:l.onPopupMouseDown});var c;return"popupVisible"in o?c=!!o.popupVisible:c=!!o.defaultPopupVisible,l.state={prevPopupVisible:c,popupVisible:c},Zlr.forEach(function(p){l["fire".concat(p)]=function(g){l.fireEvents(p,g)}}),l}return Wa(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var l=this.props,c=this.state;if(c.popupVisible){var p;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(p=l.getDocument(this.getRootDomNode()),this.clickOutsideHandler=ys(p,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(p=p||l.getDocument(this.getRootDomNode()),this.touchOutsideHandler=ys(p,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(p=p||l.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=ys(p,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=ys(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),el.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var l;return((l=this.popupRef.current)===null||l===void 0?void 0:l.getElement())||null}},{key:"getPopupAlign",value:function(){var l=this.props,c=l.popupPlacement,p=l.popupAlign,g=l.builtinPlacements;return c&&g?x3e(g,c,p):p}},{key:"setPopupVisible",value:function(l,c){var p=this.props.alignPoint,g=this.state.popupVisible;this.clearDelayTimer(),g!==l&&("popupVisible"in this.props||this.setState({popupVisible:l,prevPopupVisible:g}),this.props.onPopupVisibleChange(l)),p&&c&&l&&this.setPoint(c)}},{key:"delaySetPopupVisible",value:function(l,c,p){var g=this,_=c*1e3;if(this.clearDelayTimer(),_){var x=p?{pageX:p.pageX,pageY:p.pageY}:null;this.delayTimer=window.setTimeout(function(){g.setPopupVisible(l,x),g.clearDelayTimer()},_)}else this.setPopupVisible(l,p)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(l){var c=this.props.children.props,p=this.props;return c[l]&&p[l]?this["fire".concat(l)]:c[l]||p[l]}},{key:"isClickToShow",value:function(){var l=this.props,c=l.action,p=l.showAction;return c.indexOf("click")!==-1||p.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var l=this.props.action;return l==="contextMenu"||l.length===1&&l[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var l=this.props,c=l.action,p=l.showAction;return c.indexOf("contextMenu")!==-1||p.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var l=this.props,c=l.action,p=l.hideAction;return c.indexOf("click")!==-1||p.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var l=this.props,c=l.action,p=l.showAction;return c.indexOf("hover")!==-1||p.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var l=this.props,c=l.action,p=l.hideAction;return c.indexOf("hover")!==-1||p.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var l=this.props,c=l.action,p=l.showAction;return c.indexOf("focus")!==-1||p.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var l=this.props,c=l.action,p=l.hideAction;return c.indexOf("focus")!==-1||p.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var l;(l=this.popupRef.current)===null||l===void 0||l.forceAlign()}}},{key:"fireEvents",value:function(l,c){var p=this.props.children.props[l];p&&p(c);var g=this.props[l];g&&g(c)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var l=this.state.popupVisible,c=this.props,p=c.children,g=c.forceRender,_=c.alignPoint,x=c.className,T=c.autoDestroy,C=Ml.Children.only(p),D={key:"trigger"};this.isContextMenuToShow()?D.onContextMenu=this.onContextMenu:D.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(D.onClick=this.onClick,D.onMouseDown=this.onMouseDown,D.onTouchStart=this.onTouchStart):(D.onClick=this.createTwoChains("onClick"),D.onMouseDown=this.createTwoChains("onMouseDown"),D.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(D.onMouseEnter=this.onMouseEnter,_&&(D.onMouseMove=this.onMouseMove)):D.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?D.onMouseLeave=this.onMouseLeave:D.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(D.onFocus=this.onFocus,D.onBlur=this.onBlur):(D.onFocus=this.createTwoChains("onFocus"),D.onBlur=this.createTwoChains("onBlur"));var F=(0,$5e.default)(C&&C.props&&C.props.className,x);F&&(D.className=F);var O=Ct({},D);rI(C)&&(O.ref=Cx(this.triggerRef,C.ref));var k=Ml.cloneElement(C,O),q;return(l||this.popupRef.current||g)&&(q=Ml.createElement(r,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!l&&T&&(q=null),Ml.createElement(LK.Provider,{value:this.triggerContextValue},k,q)}}],[{key:"getDerivedStateFromProps",value:function(l,c){var p=l.popupVisible,g={};return p!==void 0&&c.popupVisible!==p&&(g.popupVisible=p,g.prevPopupVisible=c.popupVisible),g}}]),i}(Ml.Component);return wt(e,"contextType",LK),wt(e,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:Hlr,getDocument:Wlr,onPopupVisibleChange:DK,afterPopupVisibleChange:DK,onPopupAlign:DK,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),e}var H5e=Ylr(_3e);var Eu={adjustX:1,adjustY:1},Su=[0,0],W5e={left:{points:["cr","cl"],overflow:Eu,offset:[-4,0],targetOffset:Su},right:{points:["cl","cr"],overflow:Eu,offset:[4,0],targetOffset:Su},top:{points:["bc","tc"],overflow:Eu,offset:[0,-4],targetOffset:Su},bottom:{points:["tc","bc"],overflow:Eu,offset:[0,4],targetOffset:Su},topLeft:{points:["bl","tl"],overflow:Eu,offset:[0,-4],targetOffset:Su},leftTop:{points:["tr","tl"],overflow:Eu,offset:[-4,0],targetOffset:Su},topRight:{points:["br","tr"],overflow:Eu,offset:[0,-4],targetOffset:Su},rightTop:{points:["tl","tr"],overflow:Eu,offset:[4,0],targetOffset:Su},bottomRight:{points:["tr","br"],overflow:Eu,offset:[0,4],targetOffset:Su},rightBottom:{points:["bl","br"],overflow:Eu,offset:[4,0],targetOffset:Su},bottomLeft:{points:["tl","bl"],overflow:Eu,offset:[0,4],targetOffset:Su},leftBottom:{points:["br","bl"],overflow:Eu,offset:[-4,0],targetOffset:Su}};var Lk=ke(Et()),Z5e=ke(bi());function Dk(r){var e=r.showArrow,t=r.arrowContent,n=r.children,i=r.prefixCls,o=r.id,l=r.overlayInnerStyle,c=r.className,p=r.style;return Lk.createElement("div",{className:(0,Z5e.default)("".concat(i,"-content"),c),style:p},e!==!1&&Lk.createElement("div",{className:"".concat(i,"-arrow"),key:"arrow"},t),Lk.createElement("div",{className:"".concat(i,"-inner"),id:o,role:"tooltip",style:l},typeof n=="function"?n():n))}var Klr=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],Xlr=function(e,t){var n=e.overlayClassName,i=e.trigger,o=i===void 0?["hover"]:i,l=e.mouseEnterDelay,c=l===void 0?0:l,p=e.mouseLeaveDelay,g=p===void 0?.1:p,_=e.overlayStyle,x=e.prefixCls,T=x===void 0?"rc-tooltip":x,C=e.children,D=e.onVisibleChange,F=e.afterVisibleChange,O=e.transitionName,k=e.animation,q=e.motion,U=e.placement,H=U===void 0?"right":U,se=e.align,ie=se===void 0?{}:se,ue=e.destroyTooltipOnHide,ve=ue===void 0?!1:ue,ye=e.defaultVisible,ge=e.getTooltipContainer,_e=e.overlayInnerStyle,Le=e.arrowContent,Re=e.overlay,je=e.id,$e=e.showArrow,Be=$e===void 0?!0:$e,nt=vs(e,Klr),We=(0,kx.useRef)(null);(0,kx.useImperativeHandle)(t,function(){return We.current});var mt=Ct({},nt);"visible"in e&&(mt.popupVisible=e.visible);var ht=function(){return NK.createElement(Dk,{showArrow:Be,arrowContent:Le,key:"content",prefixCls:T,id:je,overlayInnerStyle:_e},Re)},_t=!1,ze=!1;if(typeof ve=="boolean")_t=ve;else if(ve&&gn(ve)==="object"){var St=ve.keepParent;_t=St===!0,ze=St===!1}return NK.createElement(H5e,hn({popupClassName:n,prefixCls:T,popup:ht,action:o,builtinPlacements:W5e,popupPlacement:H,ref:We,popupAlign:ie,getPopupContainer:ge,onPopupVisibleChange:D,afterPopupVisibleChange:F,popupTransitionName:O,popupAnimation:k,popupMotion:q,defaultPopupVisible:ye,destroyPopupOnHide:_t,autoDestroy:ze,mouseLeaveDelay:g,popupStyle:_,mouseEnterDelay:c},mt),C)},Y5e=(0,kx.forwardRef)(Xlr);var K5e=Y5e;var Qlr=Bf.forwardRef(function(r,e){var t=r.visible,n=r.overlay,i=Bf.useRef(null),o=Cx(e,i),l=Bf.useRef(null);function c(){el.cancel(l.current)}function p(){l.current=el(function(){var g;(g=i.current)===null||g===void 0||g.forcePopupAlign()})}return Bf.useEffect(function(){return t?p():c(),c},[t,n]),Bf.createElement(K5e,hn({ref:o},r))}),kK=Qlr;function qK(r){var e;return e=function(t){Za(i,t);var n=Ya(i);function i(){var o;return Ha(this,i),o=n.apply(this,arguments),o.state={visibles:{}},o.handleTooltipVisibleChange=function(l,c){o.setState(function(p){return{visibles:Ct(Ct({},p.visibles),{},wt({},l,c))}})},o.handleWithTooltip=function(l){var c=l.value,p=l.dragging,g=l.index,_=l.disabled,x=vs(l,["value","dragging","index","disabled"]),T=o.props,C=T.tipFormatter,D=T.tipProps,F=T.handleStyle,O=T.getTooltipContainer,k=D.prefixCls,q=k===void 0?"rc-slider-tooltip":k,U=D.overlay,H=U===void 0?C(c):U,se=D.placement,ie=se===void 0?"top":se,ue=D.visible,ve=ue===void 0?!1:ue,ye=vs(D,["prefixCls","overlay","placement","visible"]),ge;return Array.isArray(F)?ge=F[g]||F[0]:ge=F,fI.default.createElement(kK,hn({},ye,{getTooltipContainer:O,prefixCls:q,overlay:H,placement:ie,visible:!_&&(o.state.visibles[g]||p)||ve,key:g}),fI.default.createElement(Mx,hn({},x,{style:Ct({},ge),value:c,onMouseEnter:function(){return o.handleTooltipVisibleChange(g,!0)},onMouseLeave:function(){return o.handleTooltipVisibleChange(g,!1)}})))},o}return Wa(i,[{key:"render",value:function(){return fI.default.createElement(r,hn({},this.props,{handle:this.handleWithTooltip}))}}]),i}(fI.default.Component),e.defaultProps={tipFormatter:function(n){return n},handleStyle:[{}],tipProps:{},getTooltipContainer:function(n){return n.parentNode}},e}var Nk=n3e;Nk.Range=i3e;Nk.Handle=Mx;Nk.createSliderWithTooltip=qK;var kk=Nk;var pI={brightness:0,contrast:0,saturation:0},qk=r=>{let{max:e=1,min:t=0,onChange:n=()=>console.warn("onChange is not implemented."),step:i=.01,type:o="",value:l=.5,tooltip:c}=r,p=g=>{n(o,g)};return nl.default.createElement("div",{className:"filter-slider",title:c},nl.default.createElement("span",{className:Vs("slider-icon",o),title:c}),nl.default.createElement("div",null,nl.default.createElement(kk,{title:c,ariaLabelForHandle:c,max:e,min:t,onChange:p,step:i,value:l})),nl.default.createElement("span",{className:"slider-tooltip",title:c},l))};qk.propTypes={max:Uf.default.number,min:Uf.default.number,onChange:Uf.default.func,step:Uf.default.number,tooltip:Uf.default.string,type:Uf.default.string,value:Uf.default.number};var Q5e=r=>{let{layer:e}=r,[t,n]=(0,nl.useState)(xt({},pI)),i=(l,c)=>{let p=Object.assign({},t,{[l]:c});n(p),e.updateStyleVariables(p)},o=()=>{n(xt({},pI)),e.updateStyleVariables(xt({},pI))};return nl.default.createElement("div",null,nl.default.createElement(qk,{max:1,min:-1,onChange:i,step:.01,type:"contrast",value:t.contrast,tooltip:Ir("control-imagemanipulation-contrast")}),nl.default.createElement(qk,{max:1,min:-1,onChange:i,step:.01,type:"saturation",value:t.saturation,tooltip:Ir("control-imagemanipulation-saturation")}),nl.default.createElement(qk,{max:1,min:-1,onChange:i,step:.01,type:"brightness",value:t.brightness,tooltip:Ir("control-imagemanipulation-brightness")}),nl.default.createElement("button",{className:"btn-reset",title:Ir("control-imagemanipulation-reset"),onClick:o},Ir("control-imagemanipulation-reset")))};Q5e.propTypes={layer:Uf.default.object};var jK=class extends gs{constructor(e){let t="ol-unselectable ol-control image-manipulation",n=document.createElement("div");n.className=t;let i=document.createElement("button");i.title=Ir("control-imagemanipulation-open"),i.innerHTML="I",i.type="button",n.appendChild(i);let o=document.createElement("div");o.className="content-container",o.style.display="none",n.appendChild(o);let l=()=>{let c=o.style.display==="block";n.className=c?t:`${t} active`,o.style.display=c?"none":"block"};X5e.default.render(nl.default.createElement(Q5e,{layer:e.layer}),o),i.addEventListener("click",l,!1),i.addEventListener("touchstart",l,!1),super({element:n,target:e.target})}},J5e=jK;function Jlr(r){return vo(this,null,function*(){try{let e=yield eVe.default.get(r);if(e.status===200){let n=new DOMParser().parseFromString(e.data,"text/xml");return{width:parseInt(n.firstChild.attributes.WIDTH.value,0),height:parseInt(n.firstChild.attributes.HEIGHT.value,0),url:r.substring(0,r.lastIndexOf("/")+1)}}else throw new Error("Could not fetch ImageProperties.xml")}catch(e){console.error("Something went wrong while trying to fetch the ImageProperties.xml."),console.error(e)}})}var tVe=r=>{let{className:e="",onLoad:t,urlImageProperties:n,withImageManipulation:i=!1}=r,o=(0,qx.useRef)(null);return(0,qx.useEffect)(()=>{vo(null,null,function*(){let p=yield Jlr(n),g=new jUe({url:p.url,size:[p.width,p.height],crossOrigin:"anonymous",zDirection:-1}),_=g.getTileGrid().getExtent(),x=new AUe({style:{brightness:["var","brightness"],contrast:["var","contrast"],saturation:["var","saturation"],variables:xt({},pI)},source:g}),T=new _u({resolutions:x.getSource().getTileGrid().getResolutions(),extent:_,constrainOnlyCenter:!0}),C=new gx({controls:[new bN({tipLabel:Ir("control-fullscreen-title")}),new mx({zoomInTipLabel:Ir("control-zoom-in"),zoomOutTipLabel:Ir("control-zoom-in")})],interactions:dx().extend([new fx]),layers:[x],target:o.current,view:T});T.fit(_,{padding:[50,50,50,50]});let D=C.getSize();C.addControl(new EN({tipLabel:Ir("control-zoomtoextent-title"),extent:T.calculateExtent([D[0]+50,D[1]+50])})),i&&C.addControl(new J5e({layer:x})),t&&t({layer:x,map:C,source:g,zoomifyProps:p})})},[n]),qx.default.createElement("div",{className:Vs("vk-mapview-zoomify",e),ref:o})};tVe.propTypes={className:dI.default.string,onLoad:dI.default.func,urlImageProperties:dI.default.string.isRequired,withImageManipulation:dI.default.bool};var rVe=tVe;var nVe=rVe;var eur=()=>{let r=Bs(SL),e=nu(IL),t=n=>{e(n)};return FK.default.createElement("div",{className:"vkf-mapview-source"},r!==null&&FK.default.createElement(nVe,{urlImageProperties:r.zoomify_url,onLoad:t}))},iVe=eur;var bh=ke(Et(),1);var Ux=ke(tn(),1);var jx=ke(Et(),1),mc=ke(tn(),1);var tur=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rur=function(r){tur(e,r);function e(t){var n=r.call(this,t)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=zi(),n.tmpTileRange_=new vx(0,0,0,0),n}return e.prototype.isDrawableTile=function(t){var n=this.getLayer(),i=t.getState(),o=n.getUseInterimTilesOnError();return i==Bt.LOADED||i==Bt.EMPTY||i==Bt.ERROR&&!o},e.prototype.getTile=function(t,n,i,o){var l=o.pixelRatio,c=o.viewState.projection,p=this.getLayer(),g=p.getSource(),_=g.getTile(t,n,i,l,c);return _.getState()==Bt.ERROR&&(p.getUseInterimTilesOnError()?p.getPreload()>0&&(this.newTiles_=!0):_.setState(Bt.LOADED)),this.isDrawableTile(_)||(_=_.getInterimTile()),_},e.prototype.getData=function(t){var n=this.frameState;if(!n)return null;var i=this.getLayer(),o=On(n.pixelToCoordinateTransform,t.slice()),l=i.getExtent();if(l&&!ps(l,o))return null;for(var c=n.pixelRatio,p=n.viewState.projection,g=n.viewState,_=i.getRenderSource(),x=_.getTileGridForProjection(g.projection),T=_.getTilePixelRatio(n.pixelRatio),C=x.getZForResolution(g.resolution);C>=x.getMinZoom();--C){var D=x.getTileCoordForCoordAndZ(o,C),F=_.getTile(C,D[1],D[2],c,p);if(!(F instanceof Nf||F instanceof _x))return null;if(F.getState()===Bt.LOADED){var O=x.getOrigin(C),k=zn(x.getTileSize(C)),q=x.getResolution(C),U=Math.floor(T*((o[0]-O[0])/q-D[1]*k[0])),H=Math.floor(T*((O[1]-o[1])/q-D[2]*k[1])),se=Math.round(T*_.getGutterForProjection(g.projection));return this.getImageData(F.getImage(),U+se,H+se)}}return null},e.prototype.loadedTileCallback=function(t,n,i){return this.isDrawableTile(i)?r.prototype.loadedTileCallback.call(this,t,n,i):!1},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,n){var i=t.layerStatesArray[t.layerIndex],o=t.viewState,l=o.projection,c=o.resolution,p=o.center,g=o.rotation,_=t.pixelRatio,x=this.getLayer(),T=x.getSource(),C=T.getRevision(),D=T.getTileGridForProjection(l),F=D.getZForResolution(c,T.zDirection),O=D.getResolution(F),k=t.extent,q=t.viewState.resolution,U=T.getTilePixelRatio(_),H=Math.round(fn(k)/q*_),se=Math.round(Fo(k)/q*_),ie=i.extent&&Ua(i.extent,l);ie&&(k=su(k,Ua(i.extent,l)));var ue=O*H/2/U,ve=O*se/2/U,ye=[p[0]-ue,p[1]-ve,p[0]+ue,p[1]+ve],ge=D.getTileRangeForExtentAndZ(k,F),_e={};_e[F]={};var Le=this.createLoadedTileFinder(T,l,_e),Re=this.tmpExtent,je=this.tmpTileRange_;this.newTiles_=!1;for(var $e=g?CD(o.center,q,g,t.size):void 0,Be=ge.minX;Be<=ge.maxX;++Be)for(var nt=ge.minY;nt<=ge.maxY;++nt)if(!(g&&!D.tileCoordIntersectsViewport([F,Be,nt],$e))){var We=this.getTile(F,Be,nt,t);if(this.isDrawableTile(We)){var mt=Jt(this);if(We.getState()==Bt.LOADED){_e[F][We.tileCoord.toString()]=We;var ht=We.inTransition(mt);ht&&i.opacity!==1&&(We.endTransition(mt),ht=!1),!this.newTiles_&&(ht||this.renderedTiles.indexOf(We)===-1)&&(this.newTiles_=!0)}if(We.getAlpha(mt,t.time)===1)continue}var _t=D.getTileCoordChildTileRange(We.tileCoord,je,Re),ze=!1;_t&&(ze=Le(F+1,_t)),ze||D.forEachTileCoordParentTileRange(We.tileCoord,Le,je,Re)}var St=O/c*_/U;Eo(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/_,1/_,g,-H/2,-se/2);var jt=SD(this.pixelTransform);this.useContainer(n,jt,this.getBackground(t));var Fe=this.context,st=Fe.canvas;F0(this.inversePixelTransform,this.pixelTransform),Eo(this.tempTransform,H/2,se/2,St,St,0,-H/2,-se/2),st.width!=H||st.height!=se?(st.width=H,st.height=se):this.containerReused||Fe.clearRect(0,0,H,se),ie&&this.clipUnrotated(Fe,t,ie),T.getInterpolate()||Gr(Fe,UT),this.preRender(Fe,t),this.renderedTiles.length=0;var He=Object.keys(_e).map(Number);He.sort(xl);var et,it,at;i.opacity===1&&(!this.containerReused||T.getOpaque(t.viewState.projection))?He=He.reverse():(et=[],it=[]);for(var Nt=He.length-1;Nt>=0;--Nt){var At=He[Nt],Mt=T.getTilePixelSize(At,_,l),Ut=D.getResolution(At),Vt=Ut/O,$t=Mt[0]*Vt*St,Lr=Mt[1]*Vt*St,yr=D.getTileCoordForCoordAndZ(lu(ye),At),ur=D.getTileCoordExtent(yr),cr=On(this.tempTransform,[U*(ur[0]-ye[0])/O,U*(ye[3]-ur[3])/O]),hr=U*T.getGutterForProjection(l),dr=_e[At];for(var an in dr){var We=dr[an],wn=We.tileCoord,Ln=yr[1]-wn[1],Un=Math.round(cr[0]-(Ln-1)*$t),di=yr[2]-wn[2],Li=Math.round(cr[1]-(di-1)*Lr),Be=Math.round(cr[0]-Ln*$t),nt=Math.round(cr[1]-di*Lr),ao=Un-Be,Qn=Li-nt,ri=F===At,ht=ri&&We.getAlpha(Jt(this),t.time)!==1,so=!1;if(!ht)if(et){at=[Be,nt,Be+ao,nt,Be+ao,nt+Qn,Be,nt+Qn];for(var qe=0,oe=et.length;qe<oe;++qe)if(F!==At&&At<it[qe]){var ne=et[qe];Ri([Be,nt,Be+ao,nt+Qn],[ne[0],ne[3],ne[4],ne[7]])&&(so||(Fe.save(),so=!0),Fe.beginPath(),Fe.moveTo(at[0],at[1]),Fe.lineTo(at[2],at[3]),Fe.lineTo(at[4],at[5]),Fe.lineTo(at[6],at[7]),Fe.moveTo(ne[6],ne[7]),Fe.lineTo(ne[4],ne[5]),Fe.lineTo(ne[2],ne[3]),Fe.lineTo(ne[0],ne[1]),Fe.clip())}et.push(at),it.push(At)}else Fe.clearRect(Be,nt,ao,Qn);this.drawTileImage(We,t,Be,nt,ao,Qn,hr,ri),et&&!ht?(so&&Fe.restore(),this.renderedTiles.unshift(We)):this.renderedTiles.push(We),this.updateUsedTiles(t.usedTiles,T,We)}}return this.renderedRevision=C,this.renderedResolution=O,this.extentChanged=!this.renderedExtent_||!wf(this.renderedExtent_,ye),this.renderedExtent_=ye,this.renderedPixelRatio=_,this.renderedProjection=l,this.manageTilePyramid(t,T,D,_,l,k,F,x.getPreload()),this.scheduleExpireCache(t,T),this.postRender(Fe,t),i.extent&&Fe.restore(),Gr(Fe,XBe),jt!==st.style.transform&&(st.style.transform=jt),this.container},e.prototype.drawTileImage=function(t,n,i,o,l,c,p,g){var _=this.getTileImage(t);if(_){var x=Jt(this),T=n.layerStatesArray[n.layerIndex],C=T.opacity*(g?t.getAlpha(x,n.time):1),D=C!==this.context.globalAlpha;D&&(this.context.save(),this.context.globalAlpha=C),this.context.drawImage(_,p,p,_.width-2*p,_.height-2*p,i,o,l,c),D&&this.context.restore(),C!==T.opacity?n.animate=!0:g&&t.endTransition(x)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,n){if(n.canExpireCache()){var i=function(o,l,c){var p=Jt(o);p in c.usedTiles&&o.expireCache(c.viewState.projection,c.usedTiles[p])}.bind(null,n);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,n,i){var o=Jt(n);o in t||(t[o]={}),t[o][i.getKey()]=!0},e.prototype.manageTilePyramid=function(t,n,i,o,l,c,p,g,_){var x=Jt(n);x in t.wantedTiles||(t.wantedTiles[x]={});var T=t.wantedTiles[x],C=t.tileQueue,D=i.getMinZoom(),F=t.viewState.rotation,O=F?CD(t.viewState.center,t.viewState.resolution,F,t.size):void 0,k=0,q,U,H,se,ie,ue;for(ue=D;ue<=p;++ue)for(U=i.getTileRangeForExtentAndZ(c,ue,U),H=i.getResolution(ue),se=U.minX;se<=U.maxX;++se)for(ie=U.minY;ie<=U.maxY;++ie)F&&!i.tileCoordIntersectsViewport([ue,se,ie],O)||(p-ue<=g?(++k,q=n.getTile(ue,se,ie,o,l),q.getState()==Bt.IDLE&&(T[q.getKey()]=!0,C.isKeyQueued(q.getKey())||C.enqueue([q,x,i.getTileCoordCenter(q.tileCoord),H])),_!==void 0&&_(q)):n.useTile(ue,se,ie,l));n.updateCacheSize(k,l)},e}(iN),oVe=rur;var nur=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),iur=function(r){nur(e,r);function e(t){return r.call(this,t)||this}return e.prototype.createRenderer=function(){return new oVe(this)},e}(SN),pv=iur;var our=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),aur=function(r){our(e,r);function e(t){var n=this,i=t||{},o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var l=i.projection!==void 0?i.projection:"EPSG:3857",c=i.tileGrid!==void 0?i.tileGrid:PUe({extent:kN(l),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return n=r.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,opaque:i.opaque,projection:l,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:c,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this,n.gutter_=i.gutter!==void 0?i.gutter:0,n}return e.prototype.getGutter=function(){return this.gutter_},e}(Tx),zK=aur;var BK=class extends gs{constructor(t){let n=t||{},i=document.createElement("div");i.className="ol-layerspy ol-unselectable ol-control";let o=document.createElement("button");o.title=Ir("control-layerspy-title"),o.type="button",i.appendChild(o);super({element:i,target:n.target});go(this,"mousePosition",null);go(this,"activate",()=>{this.layers===void 0&&(this.layers=this.getMap().getLayers()),this.getMap().addLayer(this.layer),this.layer.on("prerender",this.handlePrecompose,this),this.layer.on("postrender",this.handlePostcompose,this);let t=this.getMap().getViewport();t.addEventListener("mousemove",this.handleMouseMove),t.addEventListener("mouseout",this.handleMouseOut),document.addEventListener("keydown",this.handleKeyPress),this.layers.on("add",this.handleAddedLayer),this.containerEl.classList.add("active"),this.renderRadiusbox&&this.renderTargetElement()});go(this,"changeLayer",t=>{this.containerEl.classList.contains("active")?(this.deactivate(),this.layer=t,this.activate()):this.layer=t});go(this,"deactivate",()=>{this.layer.un("prerender",this.handlePrecompose),this.layer.un("postrender",this.handlePostcompose);let t=this.getMap().getViewport();t.removeEventListener("mousemove",this.handleMouseMove),t.removeEventListener("mouseout",this.handleMouseOut),document.removeEventListener("keydown",this.handleKeyPress),this.layers.un("add",this.handleAddedLayer),this.getMap().removeLayer(this.layer),this.containerEl.classList.remove("active"),this.renderRadiusbox&&this.renderTargetElement()});go(this,"handlePostcompose",t=>{t.context.restore()});go(this,"handlePrecompose",t=>{let n=t.context,i=1;n.save(),n.beginPath();let o=this.mousePosition;if(o){let l=this.getMap().getLayers().getArray().find(g=>g.vkf_id===this.refActiveBasemapId.current).renderer_.context.canvas.style.transform,c=new DOMPoint(o[0],o[1]),p=new DOMMatrix(l);c=c.matrixTransform(p.invertSelf()),n.arc(c.x*i,c.y*i,this.clipRadius*i,0,2*Math.PI),n.lineWidth=5*i,n.strokeStyle="rgba(0,0,0,0.5)",n.stroke()}n.clip()});go(this,"handleMouseMove",t=>{this.mousePosition=this.getMap().getEventPixel(t),this.getMap().render()});go(this,"handleMouseOut",()=>{this.mousePosition=null,this.getMap().render()});go(this,"handleKeyPress",t=>{t.target.tagName.toLowerCase()!=="input"&&(t.key.toLowerCase()==="y"||t.keyCode==="KeyY"?(this.clipRadius=Math.min(this.clipRadius+5,150),this.getMap().render()):(t.key.toLowerCase()==="x"||t.keyCode==="KeyX")&&(this.clipRadius=Math.max(this.clipRadius-5,25),this.getMap().render()),this.updateClipRadiusDisplay())});go(this,"handleAddedLayer",t=>{t.target.getArray()[t.target.getLength()-1]!==this.layer&&(this.getMap().removeLayer(this.layer),this.getMap().addLayer(this.layer))});go(this,"handleExternal3dStateUpdate",t=>{this.containerEl.disabled=t,t?this.containerEl.classList.add("disabled"):this.containerEl.classList.remove("disabled")});go(this,"updateClipRadiusDisplay",()=>{let t=this.targetEl;t.innerHTML=`<strong>Radius: ${this.clipRadius}px</strong> (${Ir("control-layerspy-radius-tooltip")})`});go(this,"renderTargetElement",()=>{let t=this.targetEl,n=sH(this.getMap());this.targetEl===void 0&&(t=document.createElement("div"),t.className="ol-control ol-layerspy-radius-box",t.innerHTML="",n.appendChild(t),this.targetEl=t),this.targetEl.classList.toggle("active"),n.classList.toggle("layerspy-active"),this.updateClipRadiusDisplay()});this.clipRadius=Zn(n.radius)?parseInt(n.radius,0):75,n.refSpyLayer!==void 0&&(n.refSpyLayer.current=this),this.refActiveBasemapId=n.refActiveBasemapId,this.containerEl=o,this.renderRadiusbox=t.renderRadiusBox===void 0?!0:t.renderRadiusBox,o.addEventListener("click",l=>{l.preventDefault(),this.containerEl.classList.contains("active")?this.deactivate():this.activate()}),Zn(n.spyLayer)&&this.changeLayer(n.spyLayer)}},aVe=BK;var sVe=r=>{let{children:e,extent:t,onLoad:n=()=>console.log("No onLoad function was passed to component Map2D."),urlsOsmBaseMap:i}=r,o=(0,jx.useRef)(null);return(0,jx.useEffect)(()=>{let l=()=>vo(null,null,function*(){let c=new pv({source:new zK({urls:i,crossOrigin:"*",maxZoom:18})});c.vkf_id="slub-osm";let p=new gx({controls:[new bN({tipLabel:Ir("control-fullscreen-title")}),new mx({zoomInTipLabel:Ir("control-zoom-in"),zoomOutTipLabel:Ir("control-zoom-in")})],interactions:dx().extend([new fx]),layers:[c],target:o.current,view:new _u({projection:"EPSG:3857",center:[871713,6396955],zoom:4.3})});if(n({map:p}),t!=null){let _=Qg(t,"EPSG:4326",p.getView().getProjection());p.getView().fit(_,{padding:[100,100,100,100]}),p.addControl(new EN({tipLabel:Ir("control-zoomtoextent-title"),extent:_}))}let g=new pv({zIndex:10,attribution:void 0,source:new zK({urls:i,crossOrigin:"*",attributions:[]})});g.vkf_id="slub-osm",p.addControl(new aVe({spyLayer:g,refActiveBasemapId:{current:c.vkf_id}}))});o.current!==null&&l()},[]),jx.default.createElement("div",{className:"map-container",ref:o},e)};sVe.propTypes={extent:mc.default.arrayOf(mc.default.number),onLoad:mc.default.func,urlNominatim:mc.default.string,urlsOsmBaseMap:mc.default.arrayOf(mc.default.string),children:mc.default.oneOfType([mc.default.arrayOf(mc.default.node),mc.default.node])};var lVe=sVe;var uVe=lVe;var gI=ke(Et(),1),Fx=ke(tn(),1);var mI="1.3.0";function UK(r,e){var t=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&t.push(i+"="+encodeURIComponent(e[i]))});var n=t.join("&");return r=r.replace(/[?&]$/,""),r=r.indexOf("?")===-1?r+"?":r+"&",r+n}var sur=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lur=function(r){sur(e,r);function e(t){var n=this,i=t||{},o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var l=i.params||{},c="TRANSPARENT"in l?l.TRANSPARENT:!0;return n=r.call(this,{attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,opaque:!c,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,zDirection:i.zDirection})||this,n.gutter_=i.gutter!==void 0?i.gutter:0,n.params_=l,n.v13_=!0,n.serverType_=i.serverType,n.hidpi_=i.hidpi!==void 0?i.hidpi:!0,n.tmpExtent_=zi(),n.updateV13_(),n.setKey(n.getKeyForParams_()),n}return e.prototype.getFeatureInfoUrl=function(t,n,i,o){var l=Xn(i),c=this.getProjection(),p=this.getTileGrid();p||(p=this.getTileGridForProjection(l));var g=p.getZForResolution(n,this.zDirection),_=p.getTileCoordForCoordAndZ(t,g);if(!(p.getResolutions().length<=_[0])){var x=p.getResolution(_[0]),T=p.getTileCoordExtent(_,this.tmpExtent_),C=zn(p.getTileSize(_[0]),this.tmpSize),D=this.gutter_;D!==0&&(C=NY(C,D,this.tmpSize),T=oc(T,x*D,T)),c&&c!==l&&(x=IN(c,l,t,x),T=Qg(T,l,c),t=lc(t,l,c));var F={SERVICE:"WMS",VERSION:mI,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Gr(F,this.params_,o);var O=Math.floor((t[0]-T[0])/x),k=Math.floor((T[3]-t[1])/x);return F[this.v13_?"I":"X"]=O,F[this.v13_?"J":"Y"]=k,this.getRequestUrl_(_,C,T,1,c||l,F)}},e.prototype.getLegendUrl=function(t,n){if(this.urls[0]!==void 0){var i={SERVICE:"WMS",VERSION:mI,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(n===void 0||n.LAYER===void 0){var o=this.params_.LAYERS,l=!Array.isArray(o)||o.length===1;if(!l)return;i.LAYER=o}if(t!==void 0){var c=this.getProjection()?this.getProjection().getMetersPerUnit():1,p=28e-5;i.SCALE=t*c/p}return Gr(i,n),UK(this.urls[0],i)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,n,i,o,l,c){var p=this.urls;if(p){if(c.WIDTH=n[0],c.HEIGHT=n[1],c[this.v13_?"CRS":"SRS"]=l.getCode(),"STYLES"in this.params_||(c.STYLES=""),o!=1)switch(this.serverType_){case"geoserver":var g=90*o+.5|0;"FORMAT_OPTIONS"in c?c.FORMAT_OPTIONS+=";dpi:"+g:c.FORMAT_OPTIONS="dpi:"+g;break;case"mapserver":c.MAP_RESOLUTION=90*o;break;case"carmentaserver":case"qgis":c.DPI=90*o;break;default:ir(!1,52);break}var _=l.getAxisOrientation(),x=i;if(this.v13_&&_.substr(0,2)=="ne"){var T=void 0;T=i[0],x[0]=i[1],x[1]=T,T=i[2],x[2]=i[3],x[3]=T}c.BBOX=x.join(",");var C;if(p.length==1)C=p[0];else{var D=El(PN(t),p.length);C=p[D]}return UK(C,c)}},e.prototype.getTilePixelRatio=function(t){return!this.hidpi_||this.serverType_===void 0?1:t},e.prototype.getKeyForParams_=function(){var t=0,n=[];for(var i in this.params_)n[t++]=i+"-"+this.params_[i];return n.join("/")},e.prototype.updateParams=function(t){Gr(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||mI;this.v13_=gze(t,"1.3")>=0},e.prototype.tileUrlFunction=function(t,n,i){var o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(i)),!(o.getResolutions().length<=t[0])){n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);var l=o.getResolution(t[0]),c=o.getTileCoordExtent(t,this.tmpExtent_),p=zn(o.getTileSize(t[0]),this.tmpSize),g=this.gutter_;g!==0&&(p=NY(p,g,this.tmpSize),c=oc(c,l*g,c)),n!=1&&(p=ZD(p,n,this.tmpSize));var _={SERVICE:"WMS",VERSION:mI,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Gr(_,this.params_),this.getRequestUrl_(t,p,c,n,i,_)}},e}(Tx),cVe=lur;function uur(r,e){return r.getCoordinates()[0].map(t=>e.getPixelFromCoordinate(t))}var hVe=r=>{let{map:e,layerName:t,onLoad:n=()=>{},wmsUrl:i}=r;return(0,gI.useEffect)(()=>{let o=new pv({source:new cVe({url:i,params:{LAYERS:t,VERSION:"1.1.1"},projection:e.getView().getProjection()}),preload:1/0,zIndex:1});e.addLayer(o),n(o);let l=p=>{let g=e.getLayers().getArray().find(_=>_.get("key")==="clip");if(g!==void 0&&g.getSource().getFeatures().length>0){let _=uur(g.getSource().getFeatures()[0].getGeometry(),e),x=1,T=p.context;T.save(),T.beginPath(),T.moveTo(_[0][0]*x,_[0][1]*x);for(let C=1;C<_.length;C++)T.lineTo(_[C][0]*x,_[C][1]*x);T.closePath(),T.clip()}},c=p=>{p.context.restore()};return o.on("prerender",l),o.on("postrender",c),()=>{o.un("prerender",l),o.un("postrender",c),e.removeLayer(o)}},[]),gI.default.createElement(gI.default.Fragment,null)};hVe.propTypes={clipPolygon:Fx.default.instanceOf(uc),layerName:Fx.default.string.isRequired,map:Fx.default.instanceOf(gx).isRequired,onLoad:Fx.default.func,wmsUrl:Fx.default.string.isRequired};var fVe=hVe;var pVe=fVe;var mv=ke(Et(),1),N7=ke(tn(),1);var xs=ke(Et(),1);var Pt=ke(tn()),It=ke(Et()),xur=ke(bVe());function wVe(r){return typeof r=="object"&&r!=null&&r.nodeType===1}function EVe(r,e){return(!e||r!=="hidden")&&r!=="visible"&&r!=="clip"}function GK(r,e){if(r.clientHeight<r.scrollHeight||r.clientWidth<r.scrollWidth){var t=getComputedStyle(r,null);return EVe(t.overflowY,e)||EVe(t.overflowX,e)||function(n){var i=function(o){if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch(l){return null}}(n);return!!i&&(i.clientHeight<n.scrollHeight||i.clientWidth<n.scrollWidth)}(r)}return!1}function zk(r,e,t,n,i,o,l,c){return o<r&&l>e||o>r&&l<e?0:o<=r&&c<=t||l>=e&&c>=t?o-r-n:l>e&&c<t||o<r&&c>t?l-e+i:0}var SVe=function(r,e){var t=window,n=e.scrollMode,i=e.block,o=e.inline,l=e.boundary,c=e.skipOverflowHiddenElements,p=typeof l=="function"?l:function(Ut){return Ut!==l};if(!wVe(r))throw new TypeError("Invalid target");for(var g,_,x=document.scrollingElement||document.documentElement,T=[],C=r;wVe(C)&&p(C);){if((C=(_=(g=C).parentElement)==null?g.getRootNode().host||null:_)===x){T.push(C);break}C!=null&&C===document.body&&GK(C)&&!GK(document.documentElement)||C!=null&&GK(C,c)&&T.push(C)}for(var D=t.visualViewport?t.visualViewport.width:innerWidth,F=t.visualViewport?t.visualViewport.height:innerHeight,O=window.scrollX||pageXOffset,k=window.scrollY||pageYOffset,q=r.getBoundingClientRect(),U=q.height,H=q.width,se=q.top,ie=q.right,ue=q.bottom,ve=q.left,ye=i==="start"||i==="nearest"?se:i==="end"?ue:se+U/2,ge=o==="center"?ve+H/2:o==="end"?ie:ve,_e=[],Le=0;Le<T.length;Le++){var Re=T[Le],je=Re.getBoundingClientRect(),$e=je.height,Be=je.width,nt=je.top,We=je.right,mt=je.bottom,ht=je.left;if(n==="if-needed"&&se>=0&&ve>=0&&ue<=F&&ie<=D&&se>=nt&&ue<=mt&&ve>=ht&&ie<=We)return _e;var _t=getComputedStyle(Re),ze=parseInt(_t.borderLeftWidth,10),St=parseInt(_t.borderTopWidth,10),jt=parseInt(_t.borderRightWidth,10),Fe=parseInt(_t.borderBottomWidth,10),st=0,He=0,et="offsetWidth"in Re?Re.offsetWidth-Re.clientWidth-ze-jt:0,it="offsetHeight"in Re?Re.offsetHeight-Re.clientHeight-St-Fe:0,at="offsetWidth"in Re?Re.offsetWidth===0?0:Be/Re.offsetWidth:0,Nt="offsetHeight"in Re?Re.offsetHeight===0?0:$e/Re.offsetHeight:0;if(x===Re)st=i==="start"?ye:i==="end"?ye-F:i==="nearest"?zk(k,k+F,F,St,Fe,k+ye,k+ye+U,U):ye-F/2,He=o==="start"?ge:o==="center"?ge-D/2:o==="end"?ge-D:zk(O,O+D,D,ze,jt,O+ge,O+ge+H,H),st=Math.max(0,st+k),He=Math.max(0,He+O);else{st=i==="start"?ye-nt-St:i==="end"?ye-mt+Fe+it:i==="nearest"?zk(nt,mt,$e,St,Fe+it,ye,ye+U,U):ye-(nt+$e/2)+it/2,He=o==="start"?ge-ht-ze:o==="center"?ge-(ht+Be/2)+et/2:o==="end"?ge-We+jt+et:zk(ht,We,Be,ze,jt+et,ge,ge+H,H);var At=Re.scrollLeft,Mt=Re.scrollTop;ye+=Mt-(st=Math.max(0,Math.min(Mt+st/Nt,Re.scrollHeight-$e/Nt+it))),ge+=At-(He=Math.max(0,Math.min(At+He/at,Re.scrollWidth-Be/at+et)))}_e.push({el:Re,top:st,left:He})}return _e};var II=function(){return II=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},II.apply(this,arguments)};var bur=0;function RI(){}function wur(r,e){if(!r)return;SVe(r,{boundary:e,block:"nearest",scrollMode:"if-needed"}).forEach(n=>{let{el:i,top:o,left:l}=n;i.scrollTop=o,i.scrollLeft=l})}function TVe(r,e,t){return r===e||e instanceof t.Node&&r.contains&&r.contains(e)}function HK(r,e){let t;function n(){t&&clearTimeout(t)}function i(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];n(),t=setTimeout(()=>{t=null,r(...l)},e)}return i.cancel=n,i}function Uo(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return e.some(c=>(c&&c(n,...o),n.preventDownshiftDefault||n.hasOwnProperty("nativeEvent")&&n.nativeEvent.preventDownshiftDefault))}}function xh(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return n=>{e.forEach(i=>{typeof i=="function"?i(n):i&&(i.current=n)})}}function Eur(){return String(bur++)}function Sur(r){let{isOpen:e,resultCount:t,previousResultCount:n}=r;return e?t?t!==n?`${t} result${t===1?" is":"s are"} available, use up and down arrow keys to navigate. Press Enter key to select.`:"":"No results are available.":""}function Bk(r,e){return Object.keys(r).reduce((t,n)=>(t[n]=OVe(e,n)?e[n]:r[n],t),{})}function OVe(r,e){return r[e]!==void 0}function CI(r){let{key:e,keyCode:t}=r;return t>=37&&t<=40&&e.indexOf("Arrow")!==0?`Arrow${e}`:e}function PI(r,e,t,n,i){if(i===void 0&&(i=!0),t===0)return-1;let o=t-1;(typeof e!="number"||e<0||e>=t)&&(e=r>0?-1:o+1);let l=e+r;l<0?l=i?o:0:l>o&&(l=i?0:o);let c=dv(r,l,t,n,i);return c===-1?e>=t?-1:e:c}function dv(r,e,t,n,i){let o=n(e);if(!o||!o.hasAttribute("disabled"))return e;if(r>0){for(let l=e+1;l<t;l++)if(!n(l).hasAttribute("disabled"))return l}else for(let l=e-1;l>=0;l--)if(!n(l).hasAttribute("disabled"))return l;return i?r>0?dv(1,0,t,n,!1):dv(-1,t-1,t,n,!1):-1}function IVe(r,e,t,n){return n===void 0&&(n=!0),e.some(i=>i&&(TVe(i,r,t)||n&&TVe(i,t.document.activeElement,t)))}var Tur=HK(r=>{DVe(r).textContent=""},500);function LVe(r,e){let t=DVe(e);r&&(t.textContent=r,Tur(e))}function DVe(r){r===void 0&&(r=document);let e=r.getElementById("a11y-status-message");return e||(e=r.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),r.body.appendChild(e),e)}var NVe={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function Iur(r,e,t){let{props:n,type:i}=r,o={};Object.keys(e).forEach(l=>{Mur(l,r,e,t),t[l]!==e[l]&&(o[l]=t[l])}),n.onStateChange&&Object.keys(o).length&&n.onStateChange(xt({type:i},o))}function Mur(r,e,t,n){let{props:i,type:o}=e,l=`on${ZK(r)}Change`;i[l]&&n[r]!==void 0&&n[r]!==t[r]&&i[l](xt({type:o},n))}function Aur(r,e){return e.changes}function Cur(r){let{selectedItem:e,itemToString:t}=r;return e?`${t(e)} has been selected.`:""}var Pur=HK((r,e)=>{LVe(r(),e)},200),Rur=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?It.useLayoutEffect:It.useEffect;function kVe(r){let{id:e=`downshift-${Eur()}`,labelId:t,menuId:n,getItemId:i,toggleButtonId:o,inputId:l}=r;return(0,It.useRef)({labelId:t||`${e}-label`,menuId:n||`${e}-menu`,getItemId:i||(p=>`${e}-item-${p}`),toggleButtonId:o||`${e}-toggle-button`,inputId:l||`${e}-input`}).current}function WK(r,e,t){return r!==void 0?r:t.length===0?-1:t.indexOf(e)}function Our(r){return r?String(r):""}function MVe(r){return /^\S{1}$/.test(r)}function ZK(r){return`${r.slice(0,1).toUpperCase()}${r.slice(1)}`}function $k(r){let e=(0,It.useRef)(r);return e.current=r,e}function qVe(r,e,t){let n=(0,It.useRef)(),i=(0,It.useRef)(),o=(0,It.useCallback)((x,T)=>{i.current=T,x=Bk(x,T.props);let C=r(x,T);return T.props.stateReducer(x,nn(xt({},T),{changes:C}))},[r]),[l,c]=(0,It.useReducer)(o,e),p=$k(t),g=(0,It.useCallback)(x=>c(xt({props:p.current},x)),[p]),_=i.current;return(0,It.useEffect)(()=>{_&&n.current&&n.current!==l&&Iur(_,Bk(n.current,_.props),l),n.current=l},[l,t,_]),[l,g]}function jVe(r,e,t){let[n,i]=qVe(r,e,t);return[Bk(n,t),i]}var AI={itemToString:Our,stateReducer:Aur,getA11ySelectionMessage:Cur,scrollIntoView:wur,circularNavigation:!1,environment:typeof window=="undefined"?{}:window};function _s(r,e,t){t===void 0&&(t=NVe);let n=r[`default${ZK(e)}`];return n!==void 0?n:t[e]}function MI(r,e,t){t===void 0&&(t=NVe);let n=r[e];if(n!==void 0)return n;let i=r[`initial${ZK(e)}`];return i!==void 0?i:_s(r,e,t)}function FVe(r){let e=MI(r,"selectedItem"),t=MI(r,"isOpen"),n=MI(r,"highlightedIndex"),i=MI(r,"inputValue");return{highlightedIndex:n<0&&e&&t?r.items.indexOf(e):n,isOpen:t,selectedItem:e,inputValue:i}}function zx(r,e,t,n){let{items:i,initialHighlightedIndex:o,defaultHighlightedIndex:l}=r,{selectedItem:c,highlightedIndex:p}=e;return i.length===0?-1:o!==void 0&&p===o?o:l!==void 0?l:c?t===0?i.indexOf(c):PI(t,i.indexOf(c),i.length,n,!1):t===0?-1:t<0?i.length-1:0}function zVe(r,e,t,n){let i=(0,It.useRef)({isMouseDown:!1,isTouchMove:!1});return(0,It.useEffect)(()=>{let o=()=>{i.current.isMouseDown=!0},l=_=>{i.current.isMouseDown=!1,r&&!IVe(_.target,e.map(x=>x.current),t)&&n()},c=()=>{i.current.isTouchMove=!1},p=()=>{i.current.isTouchMove=!0},g=_=>{r&&!i.current.isTouchMove&&!IVe(_.target,e.map(x=>x.current),t,!1)&&n()};return t.addEventListener("mousedown",o),t.addEventListener("mouseup",l),t.addEventListener("touchstart",c),t.addEventListener("touchmove",p),t.addEventListener("touchend",g),function(){t.removeEventListener("mousedown",o),t.removeEventListener("mouseup",l),t.removeEventListener("touchstart",c),t.removeEventListener("touchmove",p),t.removeEventListener("touchend",g)}},[r,t]),i}var YK=()=>RI;function Uk(r,e,t){let p=t,{isInitialMount:n,highlightedIndex:i,items:o,environment:l}=p,c=Oo(p,["isInitialMount","highlightedIndex","items","environment"]);(0,It.useEffect)(()=>{n||Pur(()=>r(xt({highlightedIndex:i,highlightedItem:o[i],resultCount:o.length},c)),l.document)},e)}function BVe(r){let{highlightedIndex:e,isOpen:t,itemRefs:n,getItemNodeFromIndex:i,menuElement:o,scrollIntoView:l}=r,c=(0,It.useRef)(!0);return Rur(()=>{e<0||!t||!Object.keys(n.current).length||(c.current===!1?c.current=!0:l(i(e),o))},[e]),c}var KK=RI;function UVe(r,e,t){let{type:n,props:i}=e,o;switch(n){case t.ItemMouseMove:o={highlightedIndex:e.disabled?-1:e.index};break;case t.MenuMouseLeave:o={highlightedIndex:-1};break;case t.ToggleButtonClick:case t.FunctionToggleMenu:o={isOpen:!r.isOpen,highlightedIndex:r.isOpen?-1:zx(i,r,0)};break;case t.FunctionOpenMenu:o={isOpen:!0,highlightedIndex:zx(i,r,0)};break;case t.FunctionCloseMenu:o={isOpen:!1};break;case t.FunctionSetHighlightedIndex:o={highlightedIndex:e.highlightedIndex};break;case t.FunctionSetInputValue:o={inputValue:e.inputValue};break;case t.FunctionReset:o={highlightedIndex:_s(i,"highlightedIndex"),isOpen:_s(i,"isOpen"),selectedItem:_s(i,"selectedItem"),inputValue:_s(i,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return xt(xt({},r),o)}function AVe(r){for(var e=r.keysSoFar,t=r.highlightedIndex,n=r.items,i=r.itemToString,o=r.getItemNodeFromIndex,l=e.toLowerCase(),c=0;c<n.length;c++){var p=(c+t+1)%n.length,g=n[p];if(g!==void 0&&i(g).toLowerCase().startsWith(l)){var _=o(p);if(!(_!=null&&_.hasAttribute("disabled")))return p}}return t}var ycn={items:Pt.default.array.isRequired,itemToString:Pt.default.func,getA11yStatusMessage:Pt.default.func,getA11ySelectionMessage:Pt.default.func,circularNavigation:Pt.default.bool,highlightedIndex:Pt.default.number,defaultHighlightedIndex:Pt.default.number,initialHighlightedIndex:Pt.default.number,isOpen:Pt.default.bool,defaultIsOpen:Pt.default.bool,initialIsOpen:Pt.default.bool,selectedItem:Pt.default.any,initialSelectedItem:Pt.default.any,defaultSelectedItem:Pt.default.any,id:Pt.default.string,labelId:Pt.default.string,menuId:Pt.default.string,getItemId:Pt.default.func,toggleButtonId:Pt.default.string,stateReducer:Pt.default.func,onSelectedItemChange:Pt.default.func,onHighlightedIndexChange:Pt.default.func,onStateChange:Pt.default.func,onIsOpenChange:Pt.default.func,environment:Pt.default.shape({addEventListener:Pt.default.func,removeEventListener:Pt.default.func,document:Pt.default.shape({getElementById:Pt.default.func,activeElement:Pt.default.any,body:Pt.default.any})})};function Lur(r){var e=r.isOpen,t=r.resultCount,n=r.previousResultCount;return e?t?t!==n?"".concat(t," result").concat(t===1?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""}var Dur=II(II({},AI),{getA11yStatusMessage:Lur}),Nur=RI,XK=0,QK=1,JK=2,e7=3,t7=4,r7=5,n7=6,i7=7,Vk=8,VVe=9,GVe=10,o7=11,$Ve=12,a7=13,s7=14,l7=15,HVe=16,WVe=17,ZVe=18,YVe=19,u7=20,$K=21,KVe=22,XVe=Object.freeze({__proto__:null,MenuKeyDownArrowDown:XK,MenuKeyDownArrowUp:QK,MenuKeyDownEscape:JK,MenuKeyDownHome:e7,MenuKeyDownEnd:t7,MenuKeyDownEnter:r7,MenuKeyDownSpaceButton:n7,MenuKeyDownCharacter:i7,MenuBlur:Vk,MenuMouseLeave:VVe,ItemMouseMove:GVe,ItemClick:o7,ToggleButtonClick:$Ve,ToggleButtonKeyDownArrowDown:a7,ToggleButtonKeyDownArrowUp:s7,ToggleButtonKeyDownCharacter:l7,FunctionToggleMenu:HVe,FunctionOpenMenu:WVe,FunctionCloseMenu:ZVe,FunctionSetHighlightedIndex:YVe,FunctionSelectItem:u7,FunctionSetInputValue:$K,FunctionReset:KVe});function kur(r,e){let{type:t,props:n,shiftKey:i}=e,o;switch(t){case o7:o={isOpen:_s(n,"isOpen"),highlightedIndex:_s(n,"highlightedIndex"),selectedItem:n.items[e.index]};break;case l7:{let l=e.key,c=`${r.inputValue}${l}`,p=AVe({keysSoFar:c,highlightedIndex:r.selectedItem?n.items.indexOf(r.selectedItem):-1,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:e.getItemNodeFromIndex});o=xt({inputValue:c},p>=0&&{selectedItem:n.items[p]})}break;case a7:o={highlightedIndex:zx(n,r,1,e.getItemNodeFromIndex),isOpen:!0};break;case s7:o={highlightedIndex:zx(n,r,-1,e.getItemNodeFromIndex),isOpen:!0};break;case r7:case n7:o=xt({isOpen:_s(n,"isOpen"),highlightedIndex:_s(n,"highlightedIndex")},r.highlightedIndex>=0&&{selectedItem:n.items[r.highlightedIndex]});break;case e7:o={highlightedIndex:dv(1,0,n.items.length,e.getItemNodeFromIndex,!1)};break;case t7:o={highlightedIndex:dv(-1,n.items.length-1,n.items.length,e.getItemNodeFromIndex,!1)};break;case JK:o={isOpen:!1,highlightedIndex:-1};break;case Vk:o={isOpen:!1,highlightedIndex:-1};break;case i7:{let l=e.key,c=`${r.inputValue}${l}`,p=AVe({keysSoFar:c,highlightedIndex:r.highlightedIndex,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:e.getItemNodeFromIndex});o=xt({inputValue:c},p>=0&&{highlightedIndex:p})}break;case XK:o={highlightedIndex:PI(i?5:1,r.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)};break;case QK:o={highlightedIndex:PI(i?-5:-1,r.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)};break;case u7:o={selectedItem:e.selectedItem};break;default:return UVe(r,e,XVe)}return xt(xt({},r),o)}QVe.stateChangeTypes=XVe;function QVe(r){r===void 0&&(r={}),Nur(r,QVe);let e=xt(xt({},Dur),r),{items:t,scrollIntoView:n,environment:i,initialIsOpen:o,defaultIsOpen:l,itemToString:c,getA11ySelectionMessage:p,getA11yStatusMessage:g}=e,_=FVe(e),[x,T]=jVe(kur,_,e),{isOpen:C,highlightedIndex:D,selectedItem:F,inputValue:O}=x,k=(0,It.useRef)(null),q=(0,It.useRef)(null),U=(0,It.useRef)({}),H=(0,It.useRef)(!0),se=(0,It.useRef)(null),ie=kVe(e),ue=(0,It.useRef)(),ve=(0,It.useRef)(!0),ye=$k({state:x,props:e}),ge=(0,It.useCallback)(He=>U.current[ie.getItemId(He)],[ie]);Uk(g,[C,D,O,t],xt({isInitialMount:ve.current,previousResultCount:ue.current,items:t,environment:i,itemToString:c},x)),Uk(p,[F],xt({isInitialMount:ve.current,previousResultCount:ue.current,items:t,environment:i,itemToString:c},x));let _e=BVe({menuElement:q.current,highlightedIndex:D,isOpen:C,itemRefs:U,scrollIntoView:n,getItemNodeFromIndex:ge});(0,It.useEffect)(()=>(se.current=HK(He=>{He({type:$K,inputValue:""})},500),()=>{se.current.cancel()}),[]),(0,It.useEffect)(()=>{O&&se.current(T)},[T,O]),KK({isInitialMount:ve.current,props:e,state:x}),(0,It.useEffect)(()=>{if(ve.current){(o||l||C)&&q.current&&q.current.focus();return}if(C){q.current&&q.current.focus();return}i.document.activeElement===q.current&&k.current&&(H.current=!1,k.current.focus())},[C]),(0,It.useEffect)(()=>{ve.current||(ue.current=t.length)});let Le=zVe(C,[q,k],i,()=>{T({type:Vk})}),Re=YK("getMenuProps","getToggleButtonProps");(0,It.useEffect)(()=>{ve.current=!1},[]),(0,It.useEffect)(()=>{C||(U.current={})},[C]);let je=(0,It.useMemo)(()=>({ArrowDown(He){He.preventDefault(),T({type:a7,getItemNodeFromIndex:ge,shiftKey:He.shiftKey})},ArrowUp(He){He.preventDefault(),T({type:s7,getItemNodeFromIndex:ge,shiftKey:He.shiftKey})}}),[T,ge]),$e=(0,It.useMemo)(()=>({ArrowDown(He){He.preventDefault(),T({type:XK,getItemNodeFromIndex:ge,shiftKey:He.shiftKey})},ArrowUp(He){He.preventDefault(),T({type:QK,getItemNodeFromIndex:ge,shiftKey:He.shiftKey})},Home(He){He.preventDefault(),T({type:e7,getItemNodeFromIndex:ge})},End(He){He.preventDefault(),T({type:t7,getItemNodeFromIndex:ge})},Escape(){T({type:JK})},Enter(He){He.preventDefault(),T({type:r7})}," "(He){He.preventDefault(),T({type:n7})}}),[T,ge]),Be=(0,It.useCallback)(()=>{T({type:HVe})},[T]),nt=(0,It.useCallback)(()=>{T({type:ZVe})},[T]),We=(0,It.useCallback)(()=>{T({type:WVe})},[T]),mt=(0,It.useCallback)(He=>{T({type:YVe,highlightedIndex:He})},[T]),ht=(0,It.useCallback)(He=>{T({type:u7,selectedItem:He})},[T]),_t=(0,It.useCallback)(()=>{T({type:KVe})},[T]),ze=(0,It.useCallback)(He=>{T({type:$K,inputValue:He})},[T]),St=(0,It.useCallback)(He=>xt({id:ie.labelId,htmlFor:ie.toggleButtonId},He),[ie]),jt=(0,It.useCallback)(function(He,et){let cr=He===void 0?{}:He,{onMouseLeave:it,refKey:at="ref",onKeyDown:Nt,onBlur:At,ref:Mt}=cr,Ut=Oo(cr,["onMouseLeave","refKey","onKeyDown","onBlur","ref"]),{suppressRefError:Vt=!1}=et===void 0?{}:et,$t=ye.current.state,Lr=hr=>{let dr=CI(hr);dr&&$e[dr]?$e[dr](hr):MVe(dr)&&T({type:i7,key:dr,getItemNodeFromIndex:ge})},yr=()=>{if(H.current===!1){H.current=!0;return}!Le.current.isMouseDown&&T({type:Vk})},ur=()=>{T({type:VVe})};return Re("getMenuProps",Vt,at,q),xt(nn(xt({[at]:xh(Mt,hr=>{q.current=hr}),id:ie.menuId,role:"listbox","aria-labelledby":ie.labelId,tabIndex:-1},$t.isOpen&&$t.highlightedIndex>-1&&{"aria-activedescendant":ie.getItemId($t.highlightedIndex)}),{onMouseLeave:Uo(it,ur),onKeyDown:Uo(Nt,Lr),onBlur:Uo(At,yr)}),Ut)},[T,ye,$e,Le,Re,ie,ge]),Fe=(0,It.useCallback)(function(He,et){let yr=He===void 0?{}:He,{onClick:it,onKeyDown:at,refKey:Nt="ref",ref:At}=yr,Mt=Oo(yr,["onClick","onKeyDown","refKey","ref"]),{suppressRefError:Ut=!1}=et===void 0?{}:et,Vt=()=>{T({type:$Ve})},$t=ur=>{let cr=CI(ur);cr&&je[cr]?je[cr](ur):MVe(cr)&&T({type:l7,key:cr,getItemNodeFromIndex:ge})},Lr=xt({[Nt]:xh(At,ur=>{k.current=ur}),id:ie.toggleButtonId,"aria-haspopup":"listbox","aria-expanded":ye.current.state.isOpen,"aria-labelledby":`${ie.labelId} ${ie.toggleButtonId}`},Mt);return Mt.disabled||(Lr.onClick=Uo(it,Vt),Lr.onKeyDown=Uo(at,$t)),Re("getToggleButtonProps",Ut,Nt,k),Lr},[T,ye,je,Re,ie,ge]),st=(0,It.useCallback)(function(He){let dr=He===void 0?{}:He,{item:et,index:it,onMouseMove:at,onClick:Nt,refKey:At="ref",ref:Mt,disabled:Ut}=dr,Vt=Oo(dr,["item","index","onMouseMove","onClick","refKey","ref","disabled"]),{state:$t,props:Lr}=ye.current,yr=()=>{it!==$t.highlightedIndex&&(_e.current=!1,T({type:GVe,index:it,disabled:Ut}))},ur=()=>{T({type:o7,index:it})},cr=WK(it,et,Lr.items);if(cr<0)throw new Error("Pass either item or item index in getItemProps!");let hr=xt({disabled:Ut,role:"option","aria-selected":`${cr===$t.highlightedIndex}`,id:ie.getItemId(cr),[At]:xh(Mt,an=>{an&&(U.current[ie.getItemId(cr)]=an)})},Vt);return Ut||(hr.onClick=Uo(Nt,ur)),hr.onMouseMove=Uo(at,yr),hr},[T,ye,_e,ie]);return{getToggleButtonProps:Fe,getLabelProps:St,getMenuProps:jt,getItemProps:st,toggleMenu:Be,openMenu:We,closeMenu:nt,setHighlightedIndex:mt,selectItem:ht,reset:_t,setInputValue:ze,highlightedIndex:D,isOpen:C,selectedItem:F,inputValue:O}}var c7=0,h7=1,f7=2,p7=3,d7=4,m7=5,g7=6,Gk=7,JVe=8,eGe=9,v7=10,tGe=11,rGe=12,nGe=13,iGe=14,oGe=15,y7=16,aGe=17,sGe=18,_7=19,lGe=Object.freeze({__proto__:null,InputKeyDownArrowDown:c7,InputKeyDownArrowUp:h7,InputKeyDownEscape:f7,InputKeyDownHome:p7,InputKeyDownEnd:d7,InputKeyDownEnter:m7,InputChange:g7,InputBlur:Gk,MenuMouseLeave:JVe,ItemMouseMove:eGe,ItemClick:v7,ToggleButtonClick:tGe,FunctionToggleMenu:rGe,FunctionOpenMenu:nGe,FunctionCloseMenu:iGe,FunctionSetHighlightedIndex:oGe,FunctionSelectItem:y7,FunctionSetInputValue:aGe,FunctionReset:sGe,ControlledPropUpdatedSelectedItem:_7});function qur(r){let e=FVe(r),{selectedItem:t}=e,{inputValue:n}=e;return n===""&&t&&r.defaultInputValue===void 0&&r.initialInputValue===void 0&&r.inputValue===void 0&&(n=r.itemToString(t)),nn(xt({},e),{inputValue:n})}var _cn={items:Pt.default.array.isRequired,itemToString:Pt.default.func,getA11yStatusMessage:Pt.default.func,getA11ySelectionMessage:Pt.default.func,circularNavigation:Pt.default.bool,highlightedIndex:Pt.default.number,defaultHighlightedIndex:Pt.default.number,initialHighlightedIndex:Pt.default.number,isOpen:Pt.default.bool,defaultIsOpen:Pt.default.bool,initialIsOpen:Pt.default.bool,selectedItem:Pt.default.any,initialSelectedItem:Pt.default.any,defaultSelectedItem:Pt.default.any,inputValue:Pt.default.string,defaultInputValue:Pt.default.string,initialInputValue:Pt.default.string,id:Pt.default.string,labelId:Pt.default.string,menuId:Pt.default.string,getItemId:Pt.default.func,inputId:Pt.default.string,toggleButtonId:Pt.default.string,stateReducer:Pt.default.func,onSelectedItemChange:Pt.default.func,onHighlightedIndexChange:Pt.default.func,onStateChange:Pt.default.func,onIsOpenChange:Pt.default.func,onInputValueChange:Pt.default.func,environment:Pt.default.shape({addEventListener:Pt.default.func,removeEventListener:Pt.default.func,document:Pt.default.shape({getElementById:Pt.default.func,activeElement:Pt.default.any,body:Pt.default.any})})};function jur(r,e,t){let n=(0,It.useRef)(),[i,o]=qVe(r,e,t);return(0,It.useEffect)(()=>{OVe(t,"selectedItem")&&(n.current!==t.selectedItem&&o({type:_7,inputValue:t.itemToString(t.selectedItem)}),n.current=i.selectedItem===n.current?t.selectedItem:i.selectedItem)}),[Bk(i,t),o]}var Fur=RI,zur=nn(xt({},AI),{getA11yStatusMessage:Sur,circularNavigation:!0});function Bur(r,e){let{type:t,props:n,shiftKey:i}=e,o;switch(t){case v7:o={isOpen:_s(n,"isOpen"),highlightedIndex:_s(n,"highlightedIndex"),selectedItem:n.items[e.index],inputValue:n.itemToString(n.items[e.index])};break;case c7:r.isOpen?o={highlightedIndex:PI(i?5:1,r.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)}:o={highlightedIndex:zx(n,r,1,e.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case h7:r.isOpen?o={highlightedIndex:PI(i?-5:-1,r.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)}:o={highlightedIndex:zx(n,r,-1,e.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case m7:o=xt({},r.isOpen&&r.highlightedIndex>=0&&{selectedItem:n.items[r.highlightedIndex],isOpen:_s(n,"isOpen"),highlightedIndex:_s(n,"highlightedIndex"),inputValue:n.itemToString(n.items[r.highlightedIndex])});break;case f7:o=xt({isOpen:!1,highlightedIndex:-1},!r.isOpen&&{selectedItem:null,inputValue:""});break;case p7:o={highlightedIndex:dv(1,0,n.items.length,e.getItemNodeFromIndex,!1)};break;case d7:o={highlightedIndex:dv(-1,n.items.length-1,n.items.length,e.getItemNodeFromIndex,!1)};break;case Gk:o=xt({isOpen:!1,highlightedIndex:-1},r.highlightedIndex>=0&&e.selectItem&&{selectedItem:n.items[r.highlightedIndex],inputValue:n.itemToString(n.items[r.highlightedIndex])});break;case g7:o={isOpen:!0,highlightedIndex:_s(n,"highlightedIndex"),inputValue:e.inputValue};break;case y7:o={selectedItem:e.selectedItem,inputValue:n.itemToString(e.selectedItem)};break;case _7:o={inputValue:e.inputValue};break;default:return UVe(r,e,lGe)}return xt(xt({},r),o)}Hk.stateChangeTypes=lGe;function Hk(r){r===void 0&&(r={}),Fur(r,Hk);let e=xt(xt({},zur),r),{initialIsOpen:t,defaultIsOpen:n,items:i,scrollIntoView:o,environment:l,getA11yStatusMessage:c,getA11ySelectionMessage:p,itemToString:g}=e,_=qur(e),[x,T]=jur(Bur,_,e),{isOpen:C,highlightedIndex:D,selectedItem:F,inputValue:O}=x,k=(0,It.useRef)(null),q=(0,It.useRef)({}),U=(0,It.useRef)(null),H=(0,It.useRef)(null),se=(0,It.useRef)(null),ie=(0,It.useRef)(!0),ue=kVe(e),ve=(0,It.useRef)(),ye=$k({state:x,props:e}),ge=(0,It.useCallback)(et=>q.current[ue.getItemId(et)],[ue]);Uk(c,[C,D,O,i],xt({isInitialMount:ie.current,previousResultCount:ve.current,items:i,environment:l,itemToString:g},x)),Uk(p,[F],xt({isInitialMount:ie.current,previousResultCount:ve.current,items:i,environment:l,itemToString:g},x));let _e=BVe({menuElement:k.current,highlightedIndex:D,isOpen:C,itemRefs:q,scrollIntoView:o,getItemNodeFromIndex:ge});KK({isInitialMount:ie.current,props:e,state:x}),(0,It.useEffect)(()=>{(t||n||C)&&U.current&&U.current.focus()},[]),(0,It.useEffect)(()=>{ie.current||(ve.current=i.length)});let Le=zVe(C,[se,k,H],l,()=>{T({type:Gk,selectItem:!1})}),Re=YK("getInputProps","getComboboxProps","getMenuProps");(0,It.useEffect)(()=>{ie.current=!1},[]),(0,It.useEffect)(()=>{C||(q.current={})},[C]);let je=(0,It.useMemo)(()=>({ArrowDown(et){et.preventDefault(),T({type:c7,shiftKey:et.shiftKey,getItemNodeFromIndex:ge})},ArrowUp(et){et.preventDefault(),T({type:h7,shiftKey:et.shiftKey,getItemNodeFromIndex:ge})},Home(et){ye.current.state.isOpen&&(et.preventDefault(),T({type:p7,getItemNodeFromIndex:ge}))},End(et){ye.current.state.isOpen&&(et.preventDefault(),T({type:d7,getItemNodeFromIndex:ge}))},Escape(et){let it=ye.current.state;(it.isOpen||it.inputValue||it.selectedItem||it.highlightedIndex>-1)&&(et.preventDefault(),T({type:f7}))},Enter(et){let it=ye.current.state;!it.isOpen||it.highlightedIndex<0||et.which===229||(et.preventDefault(),T({type:m7,getItemNodeFromIndex:ge}))}}),[T,ye,ge]),$e=(0,It.useCallback)(et=>xt({id:ue.labelId,htmlFor:ue.inputId},et),[ue]),Be=(0,It.useCallback)(function(et,it){let Vt=et===void 0?{}:et,{onMouseLeave:at,refKey:Nt="ref",ref:At}=Vt,Mt=Oo(Vt,["onMouseLeave","refKey","ref"]),{suppressRefError:Ut=!1}=it===void 0?{}:it;return Re("getMenuProps",Ut,Nt,k),xt({[Nt]:xh(At,$t=>{k.current=$t}),id:ue.menuId,role:"listbox","aria-labelledby":ue.labelId,onMouseLeave:Uo(at,()=>{T({type:JVe})})},Mt)},[T,Re,ue]),nt=(0,It.useCallback)(function(et){let di=et===void 0?{}:et,{item:it,index:at,refKey:Nt="ref",ref:At,onMouseMove:Mt,onMouseDown:Ut,onClick:Vt,onPress:$t,disabled:Lr}=di,yr=Oo(di,["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"]),{props:ur,state:cr}=ye.current,hr=WK(at,it,ur.items);if(hr<0)throw new Error("Pass either item or item index in getItemProps!");let dr="onClick",an=Vt,wn=()=>{at!==cr.highlightedIndex&&(_e.current=!1,T({type:eGe,index:at,disabled:Lr}))},Ln=()=>{T({type:v7,index:at})},Un=Li=>Li.preventDefault();return xt(nn(xt({[Nt]:xh(At,Li=>{Li&&(q.current[ue.getItemId(hr)]=Li)}),disabled:Lr,role:"option","aria-selected":`${hr===cr.highlightedIndex}`,id:ue.getItemId(hr)},!Lr&&{[dr]:Uo(an,Ln)}),{onMouseMove:Uo(Mt,wn),onMouseDown:Uo(Ut,Un)}),yr)},[T,ye,_e,ue]),We=(0,It.useCallback)(function(et){let Vt=et===void 0?{}:et,{onClick:it,onPress:at,refKey:Nt="ref",ref:At}=Vt,Mt=Oo(Vt,["onClick","onPress","refKey","ref"]),Ut=()=>{T({type:tGe}),!ye.current.state.isOpen&&U.current&&U.current.focus()};return xt(xt({[Nt]:xh(At,$t=>{H.current=$t}),id:ue.toggleButtonId,tabIndex:-1},!Mt.disabled&&{onClick:Uo(it,Ut)}),Mt)},[T,ye,ue]),mt=(0,It.useCallback)(function(et,it){let Ln=et===void 0?{}:et,{onKeyDown:at,onChange:Nt,onInput:At,onBlur:Mt,onChangeText:Ut,refKey:Vt="ref",ref:$t}=Ln,Lr=Oo(Ln,["onKeyDown","onChange","onInput","onBlur","onChangeText","refKey","ref"]),{suppressRefError:yr=!1}=it===void 0?{}:it;Re("getInputProps",yr,Vt,U);let ur=ye.current.state,cr=Un=>{let di=CI(Un);di&&je[di]&&je[di](Un)},hr=Un=>{T({type:g7,inputValue:Un.target.value})},dr=()=>{ur.isOpen&&!Le.current.isMouseDown&&T({type:Gk,selectItem:!0})},an="onChange",wn={};return Lr.disabled||(wn={[an]:Uo(Nt,At,hr),onKeyDown:Uo(at,cr),onBlur:Uo(Mt,dr)}),xt(xt(nn(xt({[Vt]:xh($t,Un=>{U.current=Un}),id:ue.inputId,"aria-autocomplete":"list","aria-controls":ue.menuId},ur.isOpen&&ur.highlightedIndex>-1&&{"aria-activedescendant":ue.getItemId(ur.highlightedIndex)}),{"aria-labelledby":ue.labelId,autoComplete:"off",value:ur.inputValue}),wn),Lr)},[T,je,ye,Le,Re,ue]),ht=(0,It.useCallback)(function(et,it){let Ut=et===void 0?{}:et,{refKey:at="ref",ref:Nt}=Ut,At=Oo(Ut,["refKey","ref"]),{suppressRefError:Mt=!1}=it===void 0?{}:it;return Re("getComboboxProps",Mt,at,se),xt({[at]:xh(Nt,Vt=>{se.current=Vt}),role:"combobox","aria-haspopup":"listbox","aria-owns":ue.menuId,"aria-expanded":ye.current.state.isOpen},At)},[ye,Re,ue]),_t=(0,It.useCallback)(()=>{T({type:rGe})},[T]),ze=(0,It.useCallback)(()=>{T({type:iGe})},[T]),St=(0,It.useCallback)(()=>{T({type:nGe})},[T]),jt=(0,It.useCallback)(et=>{T({type:oGe,highlightedIndex:et})},[T]),Fe=(0,It.useCallback)(et=>{T({type:y7,selectedItem:et})},[T]),st=(0,It.useCallback)(et=>{T({type:aGe,inputValue:et})},[T]),He=(0,It.useCallback)(()=>{T({type:sGe})},[T]);return{getItemProps:nt,getLabelProps:$e,getMenuProps:Be,getInputProps:mt,getComboboxProps:ht,getToggleButtonProps:We,toggleMenu:_t,openMenu:St,closeMenu:ze,setHighlightedIndex:jt,setInputValue:st,selectItem:Fe,reset:He,highlightedIndex:D,isOpen:C,selectedItem:F,inputValue:O}}var uGe={activeIndex:-1,selectedItems:[]};function CVe(r,e){return MI(r,e,uGe)}function PVe(r,e){return _s(r,e,uGe)}function Uur(r){let e=CVe(r,"activeIndex"),t=CVe(r,"selectedItems");return{activeIndex:e,selectedItems:t}}function RVe(r){if(r.shiftKey||r.metaKey||r.ctrlKey||r.altKey)return!1;let e=r.target;return!(e instanceof HTMLInputElement&&e.value!==""&&(e.selectionStart!==0||e.selectionEnd!==0))}function Vur(r){let{removedSelectedItem:e,itemToString:t}=r;return`${t(e)} has been removed.`}var xcn={selectedItems:Pt.default.array,initialSelectedItems:Pt.default.array,defaultSelectedItems:Pt.default.array,itemToString:Pt.default.func,getA11yRemovalMessage:Pt.default.func,stateReducer:Pt.default.func,activeIndex:Pt.default.number,initialActiveIndex:Pt.default.number,defaultActiveIndex:Pt.default.number,onActiveIndexChange:Pt.default.func,onSelectedItemsChange:Pt.default.func,keyNavigationNext:Pt.default.string,keyNavigationPrevious:Pt.default.string,environment:Pt.default.shape({addEventListener:Pt.default.func,removeEventListener:Pt.default.func,document:Pt.default.shape({getElementById:Pt.default.func,activeElement:Pt.default.any,body:Pt.default.any})})},Gur={itemToString:AI.itemToString,stateReducer:AI.stateReducer,environment:AI.environment,getA11yRemovalMessage:Vur,keyNavigationNext:"ArrowRight",keyNavigationPrevious:"ArrowLeft"},$ur=RI,x7=0,b7=1,w7=2,E7=3,S7=4,T7=5,I7=6,M7=7,A7=8,C7=9,P7=10,R7=11,O7=12,Hur=Object.freeze({__proto__:null,SelectedItemClick:x7,SelectedItemKeyDownDelete:b7,SelectedItemKeyDownBackspace:w7,SelectedItemKeyDownNavigationNext:E7,SelectedItemKeyDownNavigationPrevious:S7,DropdownKeyDownNavigationPrevious:T7,DropdownKeyDownBackspace:I7,DropdownClick:M7,FunctionAddSelectedItem:A7,FunctionRemoveSelectedItem:C7,FunctionSetSelectedItems:P7,FunctionSetActiveIndex:R7,FunctionReset:O7});function Wur(r,e){let{type:t,index:n,props:i,selectedItem:o}=e,{activeIndex:l,selectedItems:c}=r,p;switch(t){case x7:p={activeIndex:n};break;case S7:p={activeIndex:l-1<0?0:l-1};break;case E7:p={activeIndex:l+1>=c.length?-1:l+1};break;case w7:case b7:{let g=l;c.length===1?g=-1:l===c.length-1&&(g=c.length-2),p={selectedItems:[...c.slice(0,l),...c.slice(l+1)],activeIndex:g};break}case T7:p={activeIndex:c.length-1};break;case I7:p={selectedItems:c.slice(0,c.length-1)};break;case A7:p={selectedItems:[...c,o]};break;case M7:p={activeIndex:-1};break;case C7:{let g=l,_=c.indexOf(o);_>=0&&(c.length===1?g=-1:_===c.length-1&&(g=c.length-2),p={selectedItems:[...c.slice(0,_),...c.slice(_+1)],activeIndex:g});break}case P7:{let{selectedItems:g}=e;p={selectedItems:g};break}case R7:{let{activeIndex:g}=e;p={activeIndex:g};break}case O7:p={activeIndex:PVe(i,"activeIndex"),selectedItems:PVe(i,"selectedItems")};break;default:throw new Error("Reducer called without proper action type.")}return xt(xt({},r),p)}cGe.stateChangeTypes=Hur;function cGe(r){r===void 0&&(r={}),$ur(r,cGe);let e=xt(xt({},Gur),r),{getA11yRemovalMessage:t,itemToString:n,environment:i,keyNavigationNext:o,keyNavigationPrevious:l}=e,[c,p]=jVe(Wur,Uur(e),e),{activeIndex:g,selectedItems:_}=c,x=(0,It.useRef)(!0),T=(0,It.useRef)(null),C=(0,It.useRef)(_),D=(0,It.useRef)();D.current=[];let F=$k({state:c,props:e});(0,It.useEffect)(()=>{if(!x.current){if(_.length<C.current.length){let ge=C.current.find(_e=>_.indexOf(_e)<0);LVe(t({itemToString:n,resultCount:_.length,removedSelectedItem:ge,activeIndex:g,activeSelectedItem:_[g]}),i.document)}C.current=_}},[_.length]),(0,It.useEffect)(()=>{x.current||(g===-1&&T.current?T.current.focus():D.current[g]&&D.current[g].focus())},[g]),KK({isInitialMount:x.current,props:e,state:c});let O=YK("getDropdownProps");(0,It.useEffect)(()=>{x.current=!1},[]);let k=(0,It.useMemo)(()=>({[l](){p({type:S7})},[o](){p({type:E7})},Delete(){p({type:b7})},Backspace(){p({type:w7})}}),[p,o,l]),q=(0,It.useMemo)(()=>({[l](ge){RVe(ge)&&p({type:T7})},Backspace(ge){RVe(ge)&&p({type:I7})}}),[p,l]),U=(0,It.useCallback)(function(ge){let ze=ge===void 0?{}:ge,{refKey:_e="ref",ref:Le,onClick:Re,onKeyDown:je,selectedItem:$e,index:Be}=ze,nt=Oo(ze,["refKey","ref","onClick","onKeyDown","selectedItem","index"]),{state:We}=F.current;if(WK(Be,$e,We.selectedItems)<0)throw new Error("Pass either selectedItem or index in getSelectedItemProps!");let ht=()=>{p({type:x7,index:Be})},_t=St=>{let jt=CI(St);jt&&k[jt]&&k[jt](St)};return xt({[_e]:xh(Le,St=>{St&&D.current.push(St)}),tabIndex:Be===We.activeIndex?0:-1,onClick:Uo(Re,ht),onKeyDown:Uo(je,_t)},nt)},[p,F,k]),H=(0,It.useCallback)(function(ge,_e){let _t=ge===void 0?{}:ge,{refKey:Le="ref",ref:Re,onKeyDown:je,onClick:$e,preventKeyAction:Be=!1}=_t,nt=Oo(_t,["refKey","ref","onKeyDown","onClick","preventKeyAction"]),{suppressRefError:We=!1}=_e===void 0?{}:_e;O("getDropdownProps",We,Le,T);let mt=ze=>{let St=CI(ze);St&&q[St]&&q[St](ze)},ht=()=>{p({type:M7})};return xt(xt({[Le]:xh(Re,ze=>{ze&&(T.current=ze)})},!Be&&{onKeyDown:Uo(je,mt),onClick:Uo($e,ht)}),nt)},[p,q,O]),se=(0,It.useCallback)(ge=>{p({type:A7,selectedItem:ge})},[p]),ie=(0,It.useCallback)(ge=>{p({type:C7,selectedItem:ge})},[p]),ue=(0,It.useCallback)(ge=>{p({type:P7,selectedItems:ge})},[p]),ve=(0,It.useCallback)(ge=>{p({type:R7,activeIndex:ge})},[p]),ye=(0,It.useCallback)(()=>{p({type:O7})},[p]);return{getSelectedItemProps:U,getDropdownProps:H,addSelectedItem:se,removeSelectedItem:ie,setSelectedItems:ue,setActiveIndex:ve,reset:ye,selectedItems:_,activeIndex:g}}var em=ke(tn(),1);function L7({buttonProps:r,fetchInputItems:e,label:t,itemToString:n,inputProps:i,onSelectedItemChange:o,timeout:l=300}){let[c,p]=(0,xs.useState)([]),[g,_]=(0,xs.useState)(void 0),x=(0,xs.useRef)(),T=(0,xs.useRef)(null),C=je=>{clearTimeout(T.current),T.current=setTimeout(()=>{e(je).then($e=>p($e))},l)},D=({inputValue:je})=>{g!==void 0&&_(void 0),C(je)},F=({selectedItem:je})=>{o!==void 0&&o(je),_(je)},{isOpen:O,getToggleButtonProps:k,getLabelProps:q,getMenuProps:U,getInputProps:H,getComboboxProps:se,getItemProps:ie,highlightedIndex:ue}=Hk({items:c,itemToString:n,onInputValueChange:D,onSelectedItemChange:F}),Le=r!=null?r:{},{onClick:ve}=Le,ye=Oo(Le,["onClick"]),Re=H(),{ref:ge}=Re,_e=Oo(Re,["ref"]);return xs.default.createElement("div",{className:"vkf-autocomplete-container"},xs.default.createElement("label",nn(xt({},q()),{id:_e["aria-labelledby"],className:"visually-hidden"}),t!==void 0?t:i.placeholder),xs.default.createElement("div",xt({className:"form-group"},se()),xs.default.createElement("input",xt(nn(xt({},_e),{ref:je=>{ge(je),x.current=je},type:"text"}),i)),xs.default.createElement("button",xt(xt(nn(xt({type:"button"},k()),{"aria-label":"toggle menu"}),ye),ve!==void 0?{onClick:()=>{ve(g,x.current!==null?x.current.value:"")}}:{}),"\u2193")),xs.default.createElement("div",{className:"autocomplete-dropdown"},xs.default.createElement("ul",nn(xt({className:"autocomplete-result-list"},U()),{id:_e["aria-controls"]}),O&&c.map((je,$e)=>xs.default.createElement("li",xt({className:Vs("ui-menu-item",ue===$e&&"highlighted",g===je&&"selected"),key:`${je.label}${$e}`},ie({item:je,index:$e})),je.label)))))}L7.propTypes={buttonProps:em.default.object,fetchInputItems:em.default.func,label:em.default.string,inputProps:em.default.object,itemToString:em.default.func,onSelectedItemChange:em.default.func,timeout:em.default.number};var hGe=ke(lS(),1),D7=(r,e,t)=>{let n=r+"?format=json&q="+e;return hGe.default.get(n).then(i=>{let l=i.data.map(c=>({label:c.display_name,value:c.display_name,lonlat:{x:parseFloat(c.lon),y:parseFloat(c.lat)},type:c.type}));return t!==void 0&&t(),l})};var Zur=r=>r?r.label:"",fGe=r=>{let{onSelectPosition:e,searchUrl:t}=r,[n,i]=(0,mv.useState)(!1),o=nu(bd),l=(0,mv.useCallback)(p=>(i(!0),D7(t,p,()=>{i(!1)})),[t]),c=(p,g)=>{p!==void 0?e(p):D7(t,g).then(_=>{if(_.length>0)e(_[0]);else throw new Error(Ir("placenamesearch-unknown-placename"))}).catch(()=>{o({id:"placenamesearch",type:"warning",text:Ir("placenamesearch-unknown-placename")})})};return mv.default.createElement("div",{className:"gazetteersearch-container"},mv.default.createElement(L7,{buttonProps:{className:"form-control gazetteersearch-submit",onClick:c,"aria-label":Ir("placenamesearch-submit"),title:Ir("placenamesearch-submit")},fetchInputItems:l,inputProps:{className:`form-control gazetteersearch-input ${n?"loading":""}`,placeholder:Ir("placenamesearch-placeholder")},itemToString:Zur,onSelectedItemChange:c}))};fGe.propTypes={onSelectPosition:N7.default.func.isRequired,searchUrl:N7.default.string.isRequired};var pGe=fGe;var Tu=ke(Et(),1),Bx=ke(tn(),1);var dGe=r=>{let{onEndDrag:e,onStartDrag:t,orientation:n="horizontal",layer:i}=r,[o,l]=(0,Tu.useState)(i.getOpacity()*100),c=(0,Tu.useRef)(null),p=0,g=100,_=(C,D)=>{if(n==="vertical"){var F=100-(C-p)/(g-p)*100;D.style.top=F+"%",D.innerHTML=C.toFixed(0)+"%";return}let O=(C-p)/(g-p)*100;D.style.left=O+"%",D.innerHTML=C+"%"},x=C=>{let D=C.target.getOpacity()*100;l(D)},T=C=>{l(C),i.setOpacity(C/100)};return(0,Tu.useEffect)(()=>{_(Math.round(o),c.current)},[o]),(0,Tu.useEffect)(()=>(i.on("change:opacity",x),()=>{i.un("change:opacity",x)})),Tu.default.createElement("div",{className:"opacity-container"},Tu.default.createElement("div",{className:"slider-container"},Tu.default.createElement(kk,{onAfterChange:e,onBeforeChange:t,onChange:T,value:o,vertical:n==="vertical"}),Tu.default.createElement("div",{className:"tooltip value",ref:c},"100%")))};dGe.propTypes={onEndDrag:Bx.default.func,onStartDrag:Bx.default.func,layer:Bx.default.oneOfType([Bx.default.instanceOf(pv)]),orientation:Bx.default.oneOf(["horizontal","vertical"])};var mGe=dGe;var gGe=r=>{let{extent:e,urlNominatim:t,urlsOsmBaseMap:n}=r,i=Bs(TL),[o,l]=(0,bh.useState)(null),[c,p]=wL(ML);return bh.default.createElement("div",{className:"vkf-mapview-target"},bh.default.createElement(uVe,{extent:e,onLoad:_=>p(_),urlNominatim:t,urlsOsmBaseMap:n},c!==null&&bh.default.createElement("div",null,bh.default.createElement("div",{className:"placenamesearch-container"},bh.default.createElement(pGe,{onSelectPosition:_=>{let[x,T]=[_.lonlat.x,_.lonlat.y],F=lc([parseFloat(x),parseFloat(T)],"EPSG:4326","EPSG:3857");if(c!=null&&c.map){let O=c.map.getView();O.setCenter(F),O.setZoom(12)}},searchUrl:qi.getNominatimUrl()})),o!==null&&bh.default.createElement(mGe,{layer:o,orientation:"vertical"}))),c!==null&&i!==null&&bh.default.createElement(pVe,{key:i.wms_url,map:c.map,layerName:i.layer_name,onLoad:_=>l(_),wmsUrl:i.wms_url}))};gGe.propTypes={extent:Ux.default.arrayOf(Ux.default.number),urlNominatim:Ux.default.string,urlsOsmBaseMap:Ux.default.arrayOf(Ux.default.string)};var vGe=gGe;var yGe=ke(lS(),1);function _Ge(r){return vo(this,null,function*(){let e=qi.getSettings().API_SEARCH;if(e===void 0)throw new Error("The url for the search endpoint is not set.");let t=yield yGe.default.get(`${e}/_doc/${r}`);if(t.status===200)return t.data._source;console.error("Something went wrong while trying to fetch search document.")})}var Yur=r=>{var e,t,n,i;return{map_id:r.map_id,clip:(r==null?void 0:r.clip)!==void 0&&r.clip!==null?{type:r.clip.type,coordinates:r.clip.coordinates}:void 0,overwrites:r.transformation_id,params:{algorithm:(t=(e=r==null?void 0:r.params)==null?void 0:e.algorithm)!=null?t:"affine",gcps:(i=(n=r==null?void 0:r.params)==null?void 0:n.gcps)!=null?i:[]}}},bGe=r=>{let{urlsOsmBaseMap:e,urlNominatim:t}=r,n=nu(AL),i=nu(SL),o=nu(bd),l=Bs(EL),[c,p]=(0,Iu.useState)(null),[g,_]=(0,Iu.useState)(!1);return(0,Iu.useEffect)(()=>vo(null,null,function*(){let x=xGe.default.parse(location.search);if(x.map_id!==void 0){let{transformations:T,additional_properties:C}=yield f2e(x.map_id),{active_transformation_id:D,extent:F,pending_jobs:O}=C,k=yield _Ge(x.map_id),q=F!==null?oBe(F):null;O&&o({id:"georeference-view",type:"warning",text:"F\xFCr diese Karte existieren bisher noch unverarbeitete Georeferenzierung."});let U=x.transformation_id!==void 0?parseInt(x.transformation_id):D;if(T.length>0&&U!==null){let H=T.find(se=>se.transformation_id===U);q=iBe(H),n(Yur(H))}else if(D===null)n({map_id:x.map_id,clip:null,overwrites:0,params:{algorithm:"affine",gcps:[]}});else throw new Error("This transformation type is not supported yet.");i(k),p(q),_(!0)}}),[]),Iu.default.createElement("div",{className:"vkf-georeference-view"},Iu.default.createElement("div",{className:"outer-map-container"},Iu.default.createElement(iVe,null)),Iu.default.createElement("div",{className:"outer-map-container"},g&&Iu.default.createElement(vGe,{extent:c!==null?c:void 0,urlsOsmBaseMap:e,urlNominatim:t})),l&&Iu.default.createElement(uBe,null))};bGe.propTypes={urlsOsmBaseMap:Wk.default.arrayOf(Wk.default.string).isRequired,urlNominatim:Wk.default.string.isRequired};var wGe=bGe;var Al=ke(Et(),1);var Zk=ke(tn(),1);var EGe=r=>{let{onClose:e,text:t,type:n}=r;return Al.default.createElement("div",{className:"notification-item"},Al.default.createElement("div",{className:Vs("alert","alert-"+n),role:"alert"},Al.default.createElement("div",{className:"close"},Al.default.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:e},Al.default.createElement("span",{"aria-hidden":"true"},"\xD7"))),Al.default.createElement("div",{className:"text"},t)))};EGe.propTypes={onClose:Zk.default.func,text:Zk.default.string,type:Zk.default.string};var Kur=()=>{let r=Bs(bd),e=dD(r),[t,n]=(0,Al.useState)([]);return(0,Al.useEffect)(()=>{if(r!==null&&r.id!==null&&r!==e){let i=[...t],o=t.findIndex(l=>l.id===r.id);o>-1?i.splice(o,1,r.text!==null?r:void 0):i.splice(0,0,r),n(i.filter(l=>l!==void 0))}},[r,t,e]),Al.default.createElement("div",{className:Vs("vkf-notifications",t.length===0?"hide":"")},t.map(({type:i,text:o},l)=>Al.default.createElement(EGe,{key:l,onClose:()=>{let c=[...t];c.splice(l,1),n(c)},type:i,text:o})))},SGe=Kur;var TGe=SGe;var Xur=()=>gv.default.createElement(WLe,null,gv.default.createElement("div",{className:"vk-app-georeferencer"},gv.default.createElement("div",null,gv.default.createElement(sBe,null),gv.default.createElement(wGe,{urlsOsmBaseMap:qi.getDefaultBaseMapUrls(),urlNominatim:qi.getNominatimUrl()}),gv.default.createElement(TGe,null)))),IGe=Xur;var Qur=qi;function Jur(r){AGe.default.render(MGe.default.createElement(IGe,null),r)}return x$e(ecr)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.5.0/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

keycode/index.js:
  (*!
   * Programatically add the following
   *)

react-is/cjs/react-is.production.min.js:
  (**
   * @license React
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v17.0.2
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

@babel/runtime/helpers/esm/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)
*/