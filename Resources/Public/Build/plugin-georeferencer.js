var vk2=(()=>{var lVe=Object.create;var xw=Object.defineProperty,uVe=Object.defineProperties,cVe=Object.getOwnPropertyDescriptor,fVe=Object.getOwnPropertyDescriptors,hVe=Object.getOwnPropertyNames,BT=Object.getOwnPropertySymbols,pVe=Object.getPrototypeOf,Xk=Object.prototype.hasOwnProperty,qX=Object.prototype.propertyIsEnumerable;var UT=Math.pow,Kk=(r,e,t)=>e in r?xw(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Et=(r,e)=>{for(var t in e||(e={}))Xk.call(e,t)&&Kk(r,t,e[t]);if(BT)for(var t of BT(e))qX.call(e,t)&&Kk(r,t,e[t]);return r},Sn=(r,e)=>uVe(r,fVe(e));var fo=(r,e)=>{var t={};for(var n in r)Xk.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&BT)for(var n of BT(r))e.indexOf(n)<0&&qX.call(r,n)&&(t[n]=r[n]);return t};var A=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),dVe=(r,e)=>{for(var t in e)xw(r,t,{get:e[t],enumerable:!0})},jX=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of hVe(e))!Xk.call(r,i)&&i!==t&&xw(r,i,{get:()=>e[i],enumerable:!(n=cVe(e,i))||n.enumerable});return r};var Me=(r,e,t)=>(t=r!=null?lVe(pVe(r)):{},jX(e||!r||!r.__esModule?xw(t,"default",{value:r,enumerable:!0}):t,r)),mVe=r=>jX(xw({},"__esModule",{value:!0}),r);var Po=(r,e,t)=>Kk(r,typeof e!="symbol"?e+"":e,t);var ho=(r,e,t)=>new Promise((n,i)=>{var o=h=>{try{c(t.next(h))}catch(d){i(d)}},a=h=>{try{c(t.throw(h))}catch(d){i(d)}},c=h=>h.done?n(h.value):Promise.resolve(h.value).then(o,a);c((t=t.apply(r,e)).next())});var Jk=A((Krr,zX)=>{"use strict";var FX=Object.getOwnPropertySymbols,vVe=Object.prototype.hasOwnProperty,gVe=Object.prototype.propertyIsEnumerable;function yVe(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function _Ve(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch(o){return!1}}zX.exports=_Ve()?Object.assign:function(r,e){for(var t,n=yVe(r),i,o=1;o<arguments.length;o++){t=Object(arguments[o]);for(var a in t)vVe.call(t,a)&&(n[a]=t[a]);if(FX){i=FX(t);for(var c=0;c<i.length;c++)gVe.call(t,i[c])&&(n[i[c]]=t[i[c]])}}return n}});var r9=A(pn=>{"use strict";var eq=Jk(),Fg=60103,VX=60106;pn.Fragment=60107;pn.StrictMode=60108;pn.Profiler=60114;var GX=60109,$X=60110,HX=60112;pn.Suspense=60113;var WX=60115,ZX=60116;typeof Symbol=="function"&&Symbol.for&&(Ml=Symbol.for,Fg=Ml("react.element"),VX=Ml("react.portal"),pn.Fragment=Ml("react.fragment"),pn.StrictMode=Ml("react.strict_mode"),pn.Profiler=Ml("react.profiler"),GX=Ml("react.provider"),$X=Ml("react.context"),HX=Ml("react.forward_ref"),pn.Suspense=Ml("react.suspense"),WX=Ml("react.memo"),ZX=Ml("react.lazy"));var Ml,BX=typeof Symbol=="function"&&Symbol.iterator;function xVe(r){return r===null||typeof r!="object"?null:(r=BX&&r[BX]||r["@@iterator"],typeof r=="function"?r:null)}function ww(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var YX={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},KX={};function zg(r,e,t){this.props=r,this.context=e,this.refs=KX,this.updater=t||YX}zg.prototype.isReactComponent={};zg.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error(ww(85));this.updater.enqueueSetState(this,r,e,"setState")};zg.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function XX(){}XX.prototype=zg.prototype;function tq(r,e,t){this.props=r,this.context=e,this.refs=KX,this.updater=t||YX}var rq=tq.prototype=new XX;rq.constructor=tq;eq(rq,zg.prototype);rq.isPureReactComponent=!0;var nq={current:null},JX=Object.prototype.hasOwnProperty,QX={key:!0,ref:!0,__self:!0,__source:!0};function e9(r,e,t){var n,i={},o=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)JX.call(e,n)&&!QX.hasOwnProperty(n)&&(i[n]=e[n]);var c=arguments.length-2;if(c===1)i.children=t;else if(1<c){for(var h=Array(c),d=0;d<c;d++)h[d]=arguments[d+2];i.children=h}if(r&&r.defaultProps)for(n in c=r.defaultProps,c)i[n]===void 0&&(i[n]=c[n]);return{$$typeof:Fg,type:r,key:o,ref:a,props:i,_owner:nq.current}}function wVe(r,e){return{$$typeof:Fg,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function iq(r){return typeof r=="object"&&r!==null&&r.$$typeof===Fg}function bVe(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var UX=/\/+/g;function Qk(r,e){return typeof r=="object"&&r!==null&&r.key!=null?bVe(""+r.key):e.toString(36)}function GT(r,e,t,n,i){var o=typeof r;(o==="undefined"||o==="boolean")&&(r=null);var a=!1;if(r===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(r.$$typeof){case Fg:case VX:a=!0;}}if(a)return a=r,i=i(a),r=n===""?"."+Qk(a,0):n,Array.isArray(i)?(t="",r!=null&&(t=r.replace(UX,"$&/")+"/"),GT(i,e,t,"",function(d){return d})):i!=null&&(iq(i)&&(i=wVe(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(UX,"$&/")+"/")+r)),e.push(i)),1;if(a=0,n=n===""?".":n+":",Array.isArray(r))for(var c=0;c<r.length;c++){o=r[c];var h=n+Qk(o,c);a+=GT(o,e,t,h,i)}else if(h=xVe(r),typeof h=="function")for(r=h.call(r),c=0;!(o=r.next()).done;)o=o.value,h=n+Qk(o,c++),a+=GT(o,e,t,h,i);else if(o==="object")throw e=""+r,Error(ww(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e));return a}function VT(r,e,t){if(r==null)return r;var n=[],i=0;return GT(r,n,"","",function(o){return e.call(t,o,i++)}),n}function SVe(r){if(r._status===-1){var e=r._result;e=e(),r._status=0,r._result=e,e.then(function(t){r._status===0&&(t=t.default,r._status=1,r._result=t)},function(t){r._status===0&&(r._status=2,r._result=t)})}if(r._status===1)return r._result;throw r._result}var t9={current:null};function wf(){var r=t9.current;if(r===null)throw Error(ww(321));return r}var EVe={ReactCurrentDispatcher:t9,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:nq,IsSomeRendererActing:{current:!1},assign:eq};pn.Children={map:VT,forEach:function(r,e,t){VT(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return VT(r,function(){e++}),e},toArray:function(r){return VT(r,function(e){return e})||[]},only:function(r){if(!iq(r))throw Error(ww(143));return r}};pn.Component=zg;pn.PureComponent=tq;pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EVe;pn.cloneElement=function(r,e,t){if(r==null)throw Error(ww(267,r));var n=eq({},r.props),i=r.key,o=r.ref,a=r._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=nq.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var c=r.type.defaultProps;for(h in e)JX.call(e,h)&&!QX.hasOwnProperty(h)&&(n[h]=e[h]===void 0&&c!==void 0?c[h]:e[h])}var h=arguments.length-2;if(h===1)n.children=t;else if(1<h){c=Array(h);for(var d=0;d<h;d++)c[d]=arguments[d+2];n.children=c}return{$$typeof:Fg,type:r.type,key:i,ref:o,props:n,_owner:a}};pn.createContext=function(r,e){return e===void 0&&(e=null),r={$$typeof:$X,_calculateChangedBits:e,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null},r.Provider={$$typeof:GX,_context:r},r.Consumer=r};pn.createElement=e9;pn.createFactory=function(r){var e=e9.bind(null,r);return e.type=r,e};pn.createRef=function(){return{current:null}};pn.forwardRef=function(r){return{$$typeof:HX,render:r}};pn.isValidElement=iq;pn.lazy=function(r){return{$$typeof:ZX,_payload:{_status:-1,_result:r},_init:SVe}};pn.memo=function(r,e){return{$$typeof:WX,type:r,compare:e===void 0?null:e}};pn.useCallback=function(r,e){return wf().useCallback(r,e)};pn.useContext=function(r,e){return wf().useContext(r,e)};pn.useDebugValue=function(){};pn.useEffect=function(r,e){return wf().useEffect(r,e)};pn.useImperativeHandle=function(r,e,t){return wf().useImperativeHandle(r,e,t)};pn.useLayoutEffect=function(r,e){return wf().useLayoutEffect(r,e)};pn.useMemo=function(r,e){return wf().useMemo(r,e)};pn.useReducer=function(r,e,t){return wf().useReducer(r,e,t)};pn.useRef=function(r){return wf().useRef(r)};pn.useState=function(r){return wf().useState(r)};pn.version="17.0.2"});var dt=A((Jrr,n9)=>{"use strict";n9.exports=r9()});var u9=A(Rn=>{"use strict";var Ug,Ew,ZT,fq;typeof performance=="object"&&typeof performance.now=="function"?(i9=performance,Rn.unstable_now=function(){return i9.now()}):(oq=Date,o9=oq.now(),Rn.unstable_now=function(){return oq.now()-o9});var i9,oq,o9;typeof window=="undefined"||typeof MessageChannel!="function"?(Bg=null,aq=null,sq=function(){if(Bg!==null)try{var r=Rn.unstable_now();Bg(!0,r),Bg=null}catch(e){throw setTimeout(sq,0),e}},Ug=function(r){Bg!==null?setTimeout(Ug,0,r):(Bg=r,setTimeout(sq,0))},Ew=function(r,e){aq=setTimeout(r,e)},ZT=function(){clearTimeout(aq)},Rn.unstable_shouldYield=function(){return!1},fq=Rn.unstable_forceFrameRate=function(){}):(a9=window.setTimeout,s9=window.clearTimeout,typeof console!="undefined"&&(l9=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof l9!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),bw=!1,Sw=null,$T=-1,lq=5,uq=0,Rn.unstable_shouldYield=function(){return Rn.unstable_now()>=uq},fq=function(){},Rn.unstable_forceFrameRate=function(r){0>r||125<r?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):lq=0<r?Math.floor(1e3/r):5},cq=new MessageChannel,HT=cq.port2,cq.port1.onmessage=function(){if(Sw!==null){var r=Rn.unstable_now();uq=r+lq;try{Sw(!0,r)?HT.postMessage(null):(bw=!1,Sw=null)}catch(e){throw HT.postMessage(null),e}}else bw=!1},Ug=function(r){Sw=r,bw||(bw=!0,HT.postMessage(null))},Ew=function(r,e){$T=a9(function(){r(Rn.unstable_now())},e)},ZT=function(){s9($T),$T=-1});var Bg,aq,sq,a9,s9,l9,bw,Sw,$T,lq,uq,cq,HT;function hq(r,e){var t=r.length;r.push(e);e:for(;;){var n=t-1>>>1,i=r[n];if(i!==void 0&&0<WT(i,e))r[n]=e,r[t]=i,t=n;else break e}}function Ru(r){return r=r[0],r===void 0?null:r}function YT(r){var e=r[0];if(e!==void 0){var t=r.pop();if(t!==e){r[0]=t;e:for(var n=0,i=r.length;n<i;){var o=2*(n+1)-1,a=r[o],c=o+1,h=r[c];if(a!==void 0&&0>WT(a,t))h!==void 0&&0>WT(h,a)?(r[n]=h,r[c]=t,n=c):(r[n]=a,r[o]=t,n=o);else if(h!==void 0&&0>WT(h,t))r[n]=h,r[c]=t,n=c;else break e}}return e}return null}function WT(r,e){var t=r.sortIndex-e.sortIndex;return t!==0?t:r.id-e.id}var hc=[],up=[],IVe=1,Rl=null,da=3,KT=!1,dm=!1,Iw=!1;function pq(r){for(var e=Ru(up);e!==null;){if(e.callback===null)YT(up);else if(e.startTime<=r)YT(up),e.sortIndex=e.expirationTime,hq(hc,e);else break;e=Ru(up)}}function dq(r){if(Iw=!1,pq(r),!dm)if(Ru(hc)!==null)dm=!0,Ug(mq);else{var e=Ru(up);e!==null&&Ew(dq,e.startTime-r)}}function mq(r,e){dm=!1,Iw&&(Iw=!1,ZT()),KT=!0;var t=da;try{for(pq(e),Rl=Ru(hc);Rl!==null&&(!(Rl.expirationTime>e)||r&&!Rn.unstable_shouldYield());){var n=Rl.callback;if(typeof n=="function"){Rl.callback=null,da=Rl.priorityLevel;var i=n(Rl.expirationTime<=e);e=Rn.unstable_now(),typeof i=="function"?Rl.callback=i:Rl===Ru(hc)&&YT(hc),pq(e)}else YT(hc);Rl=Ru(hc)}if(Rl!==null)var o=!0;else{var a=Ru(up);a!==null&&Ew(dq,a.startTime-e),o=!1}return o}finally{Rl=null,da=t,KT=!1}}var TVe=fq;Rn.unstable_IdlePriority=5;Rn.unstable_ImmediatePriority=1;Rn.unstable_LowPriority=4;Rn.unstable_NormalPriority=3;Rn.unstable_Profiling=null;Rn.unstable_UserBlockingPriority=2;Rn.unstable_cancelCallback=function(r){r.callback=null};Rn.unstable_continueExecution=function(){dm||KT||(dm=!0,Ug(mq))};Rn.unstable_getCurrentPriorityLevel=function(){return da};Rn.unstable_getFirstCallbackNode=function(){return Ru(hc)};Rn.unstable_next=function(r){switch(da){case 1:case 2:case 3:var e=3;break;default:e=da;}var t=da;da=e;try{return r()}finally{da=t}};Rn.unstable_pauseExecution=function(){};Rn.unstable_requestPaint=TVe;Rn.unstable_runWithPriority=function(r,e){switch(r){case 1:case 2:case 3:case 4:case 5:break;default:r=3;}var t=da;da=r;try{return e()}finally{da=t}};Rn.unstable_scheduleCallback=function(r,e,t){var n=Rn.unstable_now();switch(typeof t=="object"&&t!==null?(t=t.delay,t=typeof t=="number"&&0<t?n+t:n):t=n,r){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3;}return i=t+i,r={id:IVe++,callback:e,priorityLevel:r,startTime:t,expirationTime:i,sortIndex:-1},t>n?(r.sortIndex=t,hq(up,r),Ru(hc)===null&&r===Ru(up)&&(Iw?ZT():Iw=!0,Ew(dq,t-n))):(r.sortIndex=i,hq(hc,r),dm||KT||(dm=!0,Ug(mq))),r};Rn.unstable_wrapCallback=function(r){var e=da;return function(){var t=da;da=e;try{return r.apply(this,arguments)}finally{da=t}}}});var f9=A((enr,c9)=>{"use strict";c9.exports=u9()});var XJ=A(kl=>{"use strict";var VA=dt(),yi=Jk(),Oo=f9();function It(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!VA)throw Error(It(227));var E7=new Set,tb={};function Im(r,e){uy(r,e),uy(r+"Capture",e)}function uy(r,e){for(tb[r]=e,r=0;r<e.length;r++)E7.add(e[r])}var Af=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),AVe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h9=Object.prototype.hasOwnProperty,p9={},d9={};function CVe(r){return h9.call(d9,r)?!0:h9.call(p9,r)?!1:AVe.test(r)?d9[r]=!0:(p9[r]=!0,!1)}function MVe(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1;}}function RVe(r,e,t,n){if(e===null||typeof e=="undefined"||MVe(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e;}return!1}function $a(r,e,t,n,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Ho={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Ho[r]=new $a(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];Ho[e]=new $a(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Ho[r]=new $a(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Ho[r]=new $a(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Ho[r]=new $a(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Ho[r]=new $a(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Ho[r]=new $a(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Ho[r]=new $a(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Ho[r]=new $a(r,5,!1,r.toLowerCase(),null,!1,!1)});var Ej=/[\-:]([a-z])/g;function Ij(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(Ej,Ij);Ho[e]=new $a(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(Ej,Ij);Ho[e]=new $a(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(Ej,Ij);Ho[e]=new $a(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Ho[r]=new $a(r,1,!1,r.toLowerCase(),null,!1,!1)});Ho.xlinkHref=new $a("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Ho[r]=new $a(r,1,!1,r.toLowerCase(),null,!0,!0)});function Tj(r,e,t,n){var i=Ho.hasOwnProperty(e)?Ho[e]:null,o=i!==null?i.type===0:n?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");o||(RVe(e,t,i,n)&&(t=null),n||i===null?CVe(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var Tm=VA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jw=60103,vm=60106,fp=60107,Aj=60108,Vw=60114,Cj=60109,Mj=60110,GA=60112,Gw=60113,xA=60120,$A=60115,Rj=60116,Pj=60121,Oj=60128,I7=60129,Lj=60130,jq=60131;typeof Symbol=="function"&&Symbol.for&&(po=Symbol.for,jw=po("react.element"),vm=po("react.portal"),fp=po("react.fragment"),Aj=po("react.strict_mode"),Vw=po("react.profiler"),Cj=po("react.provider"),Mj=po("react.context"),GA=po("react.forward_ref"),Gw=po("react.suspense"),xA=po("react.suspense_list"),$A=po("react.memo"),Rj=po("react.lazy"),Pj=po("react.block"),po("react.scope"),Oj=po("react.opaque.id"),I7=po("react.debug_trace_mode"),Lj=po("react.offscreen"),jq=po("react.legacy_hidden"));var po,m9=typeof Symbol=="function"&&Symbol.iterator;function Tw(r){return r===null||typeof r!="object"?null:(r=m9&&r[m9]||r["@@iterator"],typeof r=="function"?r:null)}var vq;function Fw(r){if(vq===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);vq=e&&e[1]||""}return`
`+vq+r}var gq=!1;function XT(r,e){if(!r||gq)return"";gq=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e){if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var n=h}Reflect.construct(r,[],e)}else{try{e.call()}catch(h){n=h}r.call(e.prototype)}}else{try{throw Error()}catch(h){n=h}r()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,c=o.length-1;1<=a&&0<=c&&i[a]!==o[c];)c--;for(;1<=a&&0<=c;a--,c--)if(i[a]!==o[c]){if(a!==1||c!==1)do if(a--,c--,0>c||i[a]!==o[c])return`
`+i[a].replace(" at new "," at ");while(1<=a&&0<=c);break}}}finally{gq=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?Fw(r):""}function PVe(r){switch(r.tag){case 5:return Fw(r.type);case 16:return Fw("Lazy");case 13:return Fw("Suspense");case 19:return Fw("SuspenseList");case 0:case 2:case 15:return r=XT(r.type,!1),r;case 11:return r=XT(r.type.render,!1),r;case 22:return r=XT(r.type._render,!1),r;case 1:return r=XT(r.type,!0),r;default:return"";}}function Qg(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case fp:return"Fragment";case vm:return"Portal";case Vw:return"Profiler";case Aj:return"StrictMode";case Gw:return"Suspense";case xA:return"SuspenseList";}if(typeof r=="object")switch(r.$$typeof){case Mj:return(r.displayName||"Context")+".Consumer";case Cj:return(r._context.displayName||"Context")+".Provider";case GA:var e=r.render;return e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case $A:return Qg(r.type);case Pj:return Qg(r._render);case Rj:e=r._payload,r=r._init;try{return Qg(r(e))}catch(t){}}return null}function Sp(r){switch(typeof r){case"boolean":case"number":case"object":case"string":case"undefined":return r;default:return"";}}function T7(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function OVe(r){var e=T7(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t!="undefined"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,o=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function JT(r){r._valueTracker||(r._valueTracker=OVe(r))}function A7(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=T7(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function wA(r){if(r=r||(typeof document!="undefined"?document:void 0),typeof r=="undefined")return null;try{return r.activeElement||r.body}catch(e){return r.body}}function Fq(r,e){var t=e.checked;return yi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:r._wrapperState.initialChecked})}function v9(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=Sp(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function C7(r,e){e=e.checked,e!=null&&Tj(r,"checked",e,!1)}function zq(r,e){C7(r,e);var t=Sp(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?Bq(r,e.type,t):e.hasOwnProperty("defaultValue")&&Bq(r,e.type,Sp(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function g9(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function Bq(r,e,t){(e!=="number"||wA(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}function LVe(r){var e="";return VA.Children.forEach(r,function(t){t!=null&&(e+=t)}),e}function Uq(r,e){return r=yi({children:void 0},e),(e=LVe(e.children))&&(r.children=e),r}function ey(r,e,t,n){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&n&&(r[t].defaultSelected=!0)}else{for(t=""+Sp(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function Vq(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(It(91));return yi({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function y9(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(It(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(It(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:Sp(t)}}function M7(r,e){var t=Sp(e.value),n=Sp(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function _9(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}var Gq={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function R7(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml";}}function $q(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?R7(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var QT,P7=function(r){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,i)})}:r}(function(r,e){if(r.namespaceURI!==Gq.svg||"innerHTML"in r)r.innerHTML=e;else{for(QT=QT||document.createElement("div"),QT.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=QT.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function rb(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var $w={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DVe=["Webkit","ms","Moz","O"];Object.keys($w).forEach(function(r){DVe.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),$w[e]=$w[r]})});function O7(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||$w.hasOwnProperty(r)&&$w[r]?(""+e).trim():e+"px"}function L7(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=O7(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,i):r[t]=i}}var NVe=yi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hq(r,e){if(e){if(NVe[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(It(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(It(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(It(61))}if(e.style!=null&&typeof e.style!="object")throw Error(It(62))}}function Wq(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0;}}function Dj(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Zq=null,ty=null,ry=null;function x9(r){if(r=vb(r)){if(typeof Zq!="function")throw Error(It(280));var e=r.stateNode;e&&(e=XA(e),Zq(r.stateNode,r.type,e))}}function D7(r){ty?ry?ry.push(r):ry=[r]:ty=r}function N7(){if(ty){var r=ty,e=ry;if(ry=ty=null,x9(r),e)for(r=0;r<e.length;r++)x9(e[r])}}function Nj(r,e){return r(e)}function k7(r,e,t,n,i){return r(e,t,n,i)}function kj(){}var q7=Nj,gm=!1,yq=!1;function qj(){(ty!==null||ry!==null)&&(kj(),N7())}function kVe(r,e,t){if(yq)return r(e,t);yq=!0;try{return q7(r,e,t)}finally{yq=!1,qj()}}function nb(r,e){var t=r.stateNode;if(t===null)return null;var n=XA(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1;}if(r)return null;if(t&&typeof t!="function")throw Error(It(231,e,typeof t));return t}var Yq=!1;if(Af)try{Vg={},Object.defineProperty(Vg,"passive",{get:function(){Yq=!0}}),window.addEventListener("test",Vg,Vg),window.removeEventListener("test",Vg,Vg)}catch(r){Yq=!1}var Vg;function qVe(r,e,t,n,i,o,a,c,h){var d=Array.prototype.slice.call(arguments,3);try{e.apply(t,d)}catch(v){this.onError(v)}}var Hw=!1,bA=null,SA=!1,Kq=null,jVe={onError:function(r){Hw=!0,bA=r}};function FVe(r,e,t,n,i,o,a,c,h){Hw=!1,bA=null,qVe.apply(jVe,arguments)}function zVe(r,e,t,n,i,o,a,c,h){if(FVe.apply(this,arguments),Hw){if(Hw){var d=bA;Hw=!1,bA=null}else throw Error(It(198));SA||(SA=!0,Kq=d)}}function Am(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&1026&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function j7(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function w9(r){if(Am(r)!==r)throw Error(It(188))}function BVe(r){var e=r.alternate;if(!e){if(e=Am(r),e===null)throw Error(It(188));return e!==r?null:r}for(var t=r,n=e;;){var i=t.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===t)return w9(i),r;if(o===n)return w9(i),e;o=o.sibling}throw Error(It(188))}if(t.return!==n.return)t=i,n=o;else{for(var a=!1,c=i.child;c;){if(c===t){a=!0,t=i,n=o;break}if(c===n){a=!0,n=i,t=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===t){a=!0,t=o,n=i;break}if(c===n){a=!0,n=o,t=i;break}c=c.sibling}if(!a)throw Error(It(189))}}if(t.alternate!==n)throw Error(It(190))}if(t.tag!==3)throw Error(It(188));return t.stateNode.current===t?r:e}function F7(r){if(r=BVe(r),!r)return null;for(var e=r;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===r)break;for(;!e.sibling;){if(!e.return||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function b9(r,e){for(var t=r.alternate;e!==null;){if(e===r||e===t)return!0;e=e.return}return!1}var z7,jj,B7,U7,Xq=!1,pc=[],mp=null,vp=null,gp=null,ib=new Map,ob=new Map,Aw=[],S9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jq(r,e,t,n,i){return{blockedOn:r,domEventName:e,eventSystemFlags:t|16,nativeEvent:i,targetContainers:[n]}}function E9(r,e){switch(r){case"focusin":case"focusout":mp=null;break;case"dragenter":case"dragleave":vp=null;break;case"mouseover":case"mouseout":gp=null;break;case"pointerover":case"pointerout":ib.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ob.delete(e.pointerId);}}function Cw(r,e,t,n,i,o){return r===null||r.nativeEvent!==o?(r=Jq(e,t,n,i,o),e!==null&&(e=vb(e),e!==null&&jj(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function UVe(r,e,t,n,i){switch(e){case"focusin":return mp=Cw(mp,r,e,t,n,i),!0;case"dragenter":return vp=Cw(vp,r,e,t,n,i),!0;case"mouseover":return gp=Cw(gp,r,e,t,n,i),!0;case"pointerover":var o=i.pointerId;return ib.set(o,Cw(ib.get(o)||null,r,e,t,n,i)),!0;case"gotpointercapture":return o=i.pointerId,ob.set(o,Cw(ob.get(o)||null,r,e,t,n,i)),!0;}return!1}function VVe(r){var e=ym(r.target);if(e!==null){var t=Am(e);if(t!==null){if(e=t.tag,e===13){if(e=j7(t),e!==null){r.blockedOn=e,U7(r.lanePriority,function(){Oo.unstable_runWithPriority(r.priority,function(){B7(t)})});return}}else if(e===3&&t.stateNode.hydrate){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function cA(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=Uj(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t!==null)return e=vb(t),e!==null&&jj(e),r.blockedOn=t,!1;e.shift()}return!0}function I9(r,e,t){cA(r)&&t.delete(e)}function GVe(){for(Xq=!1;0<pc.length;){var r=pc[0];if(r.blockedOn!==null){r=vb(r.blockedOn),r!==null&&z7(r);break}for(var e=r.targetContainers;0<e.length;){var t=Uj(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t!==null){r.blockedOn=t;break}e.shift()}r.blockedOn===null&&pc.shift()}mp!==null&&cA(mp)&&(mp=null),vp!==null&&cA(vp)&&(vp=null),gp!==null&&cA(gp)&&(gp=null),ib.forEach(I9),ob.forEach(I9)}function Mw(r,e){r.blockedOn===e&&(r.blockedOn=null,Xq||(Xq=!0,Oo.unstable_scheduleCallback(Oo.unstable_NormalPriority,GVe)))}function V7(r){function e(i){return Mw(i,r)}if(0<pc.length){Mw(pc[0],r);for(var t=1;t<pc.length;t++){var n=pc[t];n.blockedOn===r&&(n.blockedOn=null)}}for(mp!==null&&Mw(mp,r),vp!==null&&Mw(vp,r),gp!==null&&Mw(gp,r),ib.forEach(e),ob.forEach(e),t=0;t<Aw.length;t++)n=Aw[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<Aw.length&&(t=Aw[0],t.blockedOn===null);)VVe(t),t.blockedOn===null&&Aw.shift()}function eA(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var Wg={animationend:eA("Animation","AnimationEnd"),animationiteration:eA("Animation","AnimationIteration"),animationstart:eA("Animation","AnimationStart"),transitionend:eA("Transition","TransitionEnd")},_q={},G7={};Af&&(G7=document.createElement("div").style,"AnimationEvent"in window||(delete Wg.animationend.animation,delete Wg.animationiteration.animation,delete Wg.animationstart.animation),"TransitionEvent"in window||delete Wg.transitionend.transition);function HA(r){if(_q[r])return _q[r];if(!Wg[r])return r;var e=Wg[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in G7)return _q[r]=e[t];return r}var $7=HA("animationend"),H7=HA("animationiteration"),W7=HA("animationstart"),Z7=HA("transitionend"),Y7=new Map,Fj=new Map,$Ve=["abort","abort",$7,"animationEnd",H7,"animationIteration",W7,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Z7,"transitionEnd","waiting","waiting"];function zj(r,e){for(var t=0;t<r.length;t+=2){var n=r[t],i=r[t+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Fj.set(n,e),Y7.set(n,i),Im(i,[n])}}var HVe=Oo.unstable_now;HVe();var ei=8;function $g(r){if(1&r)return ei=15,1;if(2&r)return ei=14,2;if(4&r)return ei=13,4;var e=24&r;return e!==0?(ei=12,e):r&32?(ei=11,32):(e=192&r,e!==0?(ei=10,e):r&256?(ei=9,256):(e=3584&r,e!==0?(ei=8,e):r&4096?(ei=7,4096):(e=4186112&r,e!==0?(ei=6,e):(e=62914560&r,e!==0?(ei=5,e):r&67108864?(ei=4,67108864):r&134217728?(ei=3,134217728):(e=805306368&r,e!==0?(ei=2,e):1073741824&r?(ei=1,1073741824):(ei=8,r))))))}function WVe(r){switch(r){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0;}}function ZVe(r){switch(r){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(It(358,r));}}function ab(r,e){var t=r.pendingLanes;if(t===0)return ei=0;var n=0,i=0,o=r.expiredLanes,a=r.suspendedLanes,c=r.pingedLanes;if(o!==0)n=o,i=ei=15;else if(o=t&134217727,o!==0){var h=o&~a;h!==0?(n=$g(h),i=ei):(c&=o,c!==0&&(n=$g(c),i=ei))}else o=t&~a,o!==0?(n=$g(o),i=ei):c!==0&&(n=$g(c),i=ei);if(n===0)return 0;if(n=31-Ep(n),n=t&((0>n?0:1<<n)<<1)-1,e!==0&&e!==n&&!(e&a)){if($g(e),i<=ei)return e;ei=i}if(e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-Ep(e),i=1<<t,n|=r[t],e&=~i;return n}function K7(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function EA(r,e){switch(r){case 15:return 1;case 14:return 2;case 12:return r=Hg(24&~e),r===0?EA(10,e):r;case 10:return r=Hg(192&~e),r===0?EA(8,e):r;case 8:return r=Hg(3584&~e),r===0&&(r=Hg(4186112&~e),r===0&&(r=512)),r;case 2:return e=Hg(805306368&~e),e===0&&(e=268435456),e;}throw Error(It(358,r))}function Hg(r){return r&-r}function xq(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function WA(r,e,t){r.pendingLanes|=e;var n=e-1;r.suspendedLanes&=n,r.pingedLanes&=n,r=r.eventTimes,e=31-Ep(e),r[e]=t}var Ep=Math.clz32?Math.clz32:XVe,YVe=Math.log,KVe=Math.LN2;function XVe(r){return r===0?32:31-(YVe(r)/KVe|0)|0}var JVe=Oo.unstable_UserBlockingPriority,QVe=Oo.unstable_runWithPriority,fA=!0;function e5e(r,e,t,n){gm||kj();var i=Bj,o=gm;gm=!0;try{k7(i,r,e,t,n)}finally{(gm=o)||qj()}}function t5e(r,e,t,n){QVe(JVe,Bj.bind(null,r,e,t,n))}function Bj(r,e,t,n){if(fA){var i;if((i=(e&4)===0)&&0<pc.length&&-1<S9.indexOf(r))r=Jq(null,r,e,t,n),pc.push(r);else{var o=Uj(r,e,t,n);if(o===null)i&&E9(r,n);else{if(i){if(-1<S9.indexOf(r)){r=Jq(o,r,e,t,n),pc.push(r);return}if(UVe(o,r,e,t,n))return;E9(r,n)}uJ(r,e,n,null,t)}}}}function Uj(r,e,t,n){var i=Dj(n);if(i=ym(i),i!==null){var o=Am(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=j7(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return uJ(r,e,n,i,t),null}var hp=null,Vj=null,hA=null;function X7(){if(hA)return hA;var r,e=Vj,t=e.length,n,i="value"in hp?hp.value:hp.textContent,o=i.length;for(r=0;r<t&&e[r]===i[r];r++);var a=t-r;for(n=1;n<=a&&e[t-n]===i[o-n];n++);return hA=i.slice(r,1<n?1-n:void 0)}function pA(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function tA(){return!0}function T9(){return!1}function ol(r){function e(t,n,i,o,a){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var c in r)r.hasOwnProperty(c)&&(t=r[c],this[c]=t?t(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?tA:T9,this.isPropagationStopped=T9,this}return yi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=tA)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=tA)},persist:function(){},isPersistent:tA}),e}var py={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gj=ol(py),mb=yi({},py,{view:0,detail:0}),r5e=ol(mb),wq,bq,Rw,ZA=yi({},mb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$j,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Rw&&(Rw&&r.type==="mousemove"?(wq=r.screenX-Rw.screenX,bq=r.screenY-Rw.screenY):bq=wq=0,Rw=r),wq)},movementY:function(r){return"movementY"in r?r.movementY:bq}}),A9=ol(ZA),n5e=yi({},ZA,{dataTransfer:0}),i5e=ol(n5e),o5e=yi({},mb,{relatedTarget:0}),Sq=ol(o5e),a5e=yi({},py,{animationName:0,elapsedTime:0,pseudoElement:0}),s5e=ol(a5e),l5e=yi({},py,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),u5e=ol(l5e),c5e=yi({},py,{data:0}),C9=ol(c5e),f5e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h5e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p5e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function d5e(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=p5e[r])?!!e[r]:!1}function $j(){return d5e}var m5e=yi({},mb,{key:function(r){if(r.key){var e=f5e[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=pA(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?h5e[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$j,charCode:function(r){return r.type==="keypress"?pA(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?pA(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),v5e=ol(m5e),g5e=yi({},ZA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M9=ol(g5e),y5e=yi({},mb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$j}),_5e=ol(y5e),x5e=yi({},py,{propertyName:0,elapsedTime:0,pseudoElement:0}),w5e=ol(x5e),b5e=yi({},ZA,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),S5e=ol(b5e),E5e=[9,13,27,32],Hj=Af&&"CompositionEvent"in window,Ww=null;Af&&"documentMode"in document&&(Ww=document.documentMode);var I5e=Af&&"TextEvent"in window&&!Ww,J7=Af&&(!Hj||Ww&&8<Ww&&11>=Ww),R9=" ",P9=!1;function Q7(r,e){switch(r){case"keyup":return E5e.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1;}}function eJ(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Zg=!1;function T5e(r,e){switch(r){case"compositionend":return eJ(e);case"keypress":return e.which!==32?null:(P9=!0,R9);case"textInput":return r=e.data,r===R9&&P9?null:r;default:return null;}}function A5e(r,e){if(Zg)return r==="compositionend"||!Hj&&Q7(r,e)?(r=X7(),hA=Vj=hp=null,Zg=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return J7&&e.locale!=="ko"?null:e.data;default:return null;}}var C5e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function O9(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!C5e[r.type]:e==="textarea"}function tJ(r,e,t,n){D7(n),e=IA(e,"onChange"),0<e.length&&(t=new Gj("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var Zw=null,sb=null;function M5e(r){aJ(r,0)}function YA(r){var e=Kg(r);if(A7(e))return r}function R5e(r,e){if(r==="change")return e}var rJ=!1;Af&&(Af?(nA="oninput"in document,nA||(Eq=document.createElement("div"),Eq.setAttribute("oninput","return;"),nA=typeof Eq.oninput=="function"),rA=nA):rA=!1,rJ=rA&&(!document.documentMode||9<document.documentMode));var rA,nA,Eq;function L9(){Zw&&(Zw.detachEvent("onpropertychange",nJ),sb=Zw=null)}function nJ(r){if(r.propertyName==="value"&&YA(sb)){var e=[];if(tJ(e,sb,r,Dj(r)),r=M5e,gm)r(e);else{gm=!0;try{Nj(r,e)}finally{gm=!1,qj()}}}}function P5e(r,e,t){r==="focusin"?(L9(),Zw=e,sb=t,Zw.attachEvent("onpropertychange",nJ)):r==="focusout"&&L9()}function O5e(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return YA(sb)}function L5e(r,e){if(r==="click")return YA(e)}function D5e(r,e){if(r==="input"||r==="change")return YA(e)}function N5e(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Pl=typeof Object.is=="function"?Object.is:N5e,k5e=Object.prototype.hasOwnProperty;function lb(r,e){if(Pl(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++)if(!k5e.call(e,t[n])||!Pl(r[t[n]],e[t[n]]))return!1;return!0}function D9(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function N9(r,e){var t=D9(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=D9(t)}}function iJ(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?iJ(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function k9(){for(var r=window,e=wA();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch(n){t=!1}if(t)r=e.contentWindow;else break;e=wA(r.document)}return e}function Qq(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}var q5e=Af&&"documentMode"in document&&11>=document.documentMode,Yg=null,ej=null,Yw=null,tj=!1;function q9(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;tj||Yg==null||Yg!==wA(n)||(n=Yg,"selectionStart"in n&&Qq(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Yw&&lb(Yw,n)||(Yw=n,n=IA(ej,"onSelect"),0<n.length&&(e=new Gj("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=Yg)))}zj("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);zj("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);zj($Ve,2);for(Iq="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),iA=0;iA<Iq.length;iA++)Fj.set(Iq[iA],0);var Iq,iA;uy("onMouseEnter",["mouseout","mouseover"]);uy("onMouseLeave",["mouseout","mouseover"]);uy("onPointerEnter",["pointerout","pointerover"]);uy("onPointerLeave",["pointerout","pointerover"]);Im("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Im("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Im("onBeforeInput",["compositionend","keypress","textInput","paste"]);Im("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Im("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Im("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(zw));function j9(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,zVe(n,e,void 0,r),r.currentTarget=null}function aJ(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var a=n.length-1;0<=a;a--){var c=n[a],h=c.instance,d=c.currentTarget;if(c=c.listener,h!==o&&i.isPropagationStopped())break e;j9(i,c,d),o=h}else for(a=0;a<n.length;a++){if(c=n[a],h=c.instance,d=c.currentTarget,c=c.listener,h!==o&&i.isPropagationStopped())break e;j9(i,c,d),o=h}}}if(SA)throw r=Kq,SA=!1,Kq=null,r}function li(r,e){var t=fJ(e),n=r+"__bubble";t.has(n)||(lJ(e,r,2,!1),t.add(n))}var F9="_reactListening"+Math.random().toString(36).slice(2);function sJ(r){r[F9]||(r[F9]=!0,E7.forEach(function(e){oJ.has(e)||z9(e,!1,r,null),z9(e,!0,r,null)}))}function z9(r,e,t,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,o=t;if(r==="selectionchange"&&t.nodeType!==9&&(o=t.ownerDocument),n!==null&&!e&&oJ.has(r)){if(r!=="scroll")return;i|=2,o=n}var a=fJ(o),c=r+"__"+(e?"capture":"bubble");a.has(c)||(e&&(i|=4),lJ(o,r,i,e),a.add(c))}function lJ(r,e,t,n){var i=Fj.get(e);switch(i===void 0?2:i){case 0:i=e5e;break;case 1:i=t5e;break;default:i=Bj;}t=i.bind(null,e,t,r),i=void 0,!Yq||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function uJ(r,e,t,n,i){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var c=n.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;a=a.return}for(;c!==null;){if(a=ym(c),a===null)return;if(h=a.tag,h===5||h===6){n=o=a;continue e}c=c.parentNode}}n=n.return}kVe(function(){var d=o,v=Dj(t),x=[];e:{var S=Y7.get(r);if(S!==void 0){var T=Gj,L=r;switch(r){case"keypress":if(pA(t)===0)break e;case"keydown":case"keyup":T=v5e;break;case"focusin":L="focus",T=Sq;break;case"focusout":L="blur",T=Sq;break;case"beforeblur":case"afterblur":T=Sq;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=A9;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=i5e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=_5e;break;case $7:case H7:case W7:T=s5e;break;case Z7:T=w5e;break;case"scroll":T=r5e;break;case"wheel":T=S5e;break;case"copy":case"cut":case"paste":T=u5e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=M9;}var k=(e&4)!==0,R=!k&&r==="scroll",D=k?S!==null?S+"Capture":null:S;k=[];for(var j=d,B;j!==null;){B=j;var $=B.stateNode;if(B.tag===5&&$!==null&&(B=$,D!==null&&($=nb(j,D),$!=null&&k.push(ub(j,$,B)))),R)break;j=j.return}0<k.length&&(S=new T(S,L,null,t,v),x.push({event:S,listeners:k}))}}if(!(e&7)){e:{if(S=r==="mouseover"||r==="pointerover",T=r==="mouseout"||r==="pointerout",S&&!(e&16)&&(L=t.relatedTarget||t.fromElement)&&(ym(L)||L[dy]))break e;if((T||S)&&(S=v.window===v?v:(S=v.ownerDocument)?S.defaultView||S.parentWindow:window,T?(L=t.relatedTarget||t.toElement,T=d,L=L?ym(L):null,L!==null&&(R=Am(L),L!==R||L.tag!==5&&L.tag!==6)&&(L=null)):(T=null,L=d),T!==L)){if(k=A9,$="onMouseLeave",D="onMouseEnter",j="mouse",(r==="pointerout"||r==="pointerover")&&(k=M9,$="onPointerLeave",D="onPointerEnter",j="pointer"),R=T==null?S:Kg(T),B=L==null?S:Kg(L),S=new k($,j+"leave",T,t,v),S.target=R,S.relatedTarget=B,$=null,ym(v)===d&&(k=new k(D,j+"enter",L,t,v),k.target=B,k.relatedTarget=R,$=k),R=$,T&&L)t:{for(k=T,D=L,j=0,B=k;B;B=Gg(B))j++;for(B=0,$=D;$;$=Gg($))B++;for(;0<j-B;)k=Gg(k),j--;for(;0<B-j;)D=Gg(D),B--;for(;j--;){if(k===D||D!==null&&k===D.alternate)break t;k=Gg(k),D=Gg(D)}k=null}else k=null;T!==null&&B9(x,S,T,k,!1),L!==null&&R!==null&&B9(x,R,L,k,!0)}}e:{if(S=d?Kg(d):window,T=S.nodeName&&S.nodeName.toLowerCase(),T==="select"||T==="input"&&S.type==="file")var ee=R5e;else if(O9(S)){if(rJ)ee=D5e;else{ee=O5e;var J=P5e}}else(T=S.nodeName)&&T.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(ee=L5e);if(ee&&(ee=ee(r,d))){tJ(x,ee,t,v);break e}J&&J(r,S,d),r==="focusout"&&(J=S._wrapperState)&&J.controlled&&S.type==="number"&&Bq(S,"number",S.value)}switch(J=d?Kg(d):window,r){case"focusin":(O9(J)||J.contentEditable==="true")&&(Yg=J,ej=d,Yw=null);break;case"focusout":Yw=ej=Yg=null;break;case"mousedown":tj=!0;break;case"contextmenu":case"mouseup":case"dragend":tj=!1,q9(x,t,v);break;case"selectionchange":if(q5e)break;case"keydown":case"keyup":q9(x,t,v);}var ie;if(Hj)e:{switch(r){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e;}ue=void 0}else Zg?Q7(r,t)&&(ue="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(ue="onCompositionStart");ue&&(J7&&t.locale!=="ko"&&(Zg||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Zg&&(ie=X7()):(hp=v,Vj="value"in hp?hp.value:hp.textContent,Zg=!0)),J=IA(d,ue),0<J.length&&(ue=new C9(ue,r,null,t,v),x.push({event:ue,listeners:J}),ie?ue.data=ie:(ie=eJ(t),ie!==null&&(ue.data=ie)))),(ie=I5e?T5e(r,t):A5e(r,t))&&(d=IA(d,"onBeforeInput"),0<d.length&&(v=new C9("onBeforeInput","beforeinput",null,t,v),x.push({event:v,listeners:d}),v.data=ie))}aJ(x,e)})}function ub(r,e,t){return{instance:r,listener:e,currentTarget:t}}function IA(r,e){for(var t=e+"Capture",n=[];r!==null;){var i=r,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=nb(r,t),o!=null&&n.unshift(ub(r,o,i)),o=nb(r,e),o!=null&&n.push(ub(r,o,i))),r=r.return}return n}function Gg(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function B9(r,e,t,n,i){for(var o=e._reactName,a=[];t!==null&&t!==n;){var c=t,h=c.alternate,d=c.stateNode;if(h!==null&&h===n)break;c.tag===5&&d!==null&&(c=d,i?(h=nb(t,o),h!=null&&a.unshift(ub(t,h,c))):i||(h=nb(t,o),h!=null&&a.push(ub(t,h,c)))),t=t.return}a.length!==0&&r.push({event:e,listeners:a})}function TA(){}var Tq=null,Aq=null;function cJ(r,e){switch(r){case"button":case"input":case"select":case"textarea":return!!e.autoFocus;}return!1}function rj(r,e){return r==="textarea"||r==="option"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var U9=typeof setTimeout=="function"?setTimeout:void 0,j5e=typeof clearTimeout=="function"?clearTimeout:void 0;function Wj(r){r.nodeType===1?r.textContent="":r.nodeType===9&&(r=r.body,r!=null&&(r.textContent=""))}function ny(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break}return r}function V9(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var Cq=0;function F5e(r){return{$$typeof:Oj,toString:r,valueOf:r}}var KA=Math.random().toString(36).slice(2),pp="__reactFiber$"+KA,AA="__reactProps$"+KA,dy="__reactContainer$"+KA,G9="__reactEvents$"+KA;function ym(r){var e=r[pp];if(e)return e;for(var t=r.parentNode;t;){if(e=t[dy]||t[pp]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=V9(r);r!==null;){if(t=r[pp])return t;r=V9(r)}return e}r=t,t=r.parentNode}return null}function vb(r){return r=r[pp]||r[dy],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Kg(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(It(33))}function XA(r){return r[AA]||null}function fJ(r){var e=r[G9];return e===void 0&&(e=r[G9]=new Set),e}var nj=[],Xg=-1;function Cp(r){return{current:r}}function ui(r){0>Xg||(r.current=nj[Xg],nj[Xg]=null,Xg--)}function Fi(r,e){Xg++,nj[Xg]=r.current,r.current=e}var Ip={},ya=Cp(Ip),gs=Cp(!1),bm=Ip;function cy(r,e){var t=r.type.contextTypes;if(!t)return Ip;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in t)i[o]=e[o];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function ys(r){return r=r.childContextTypes,r!=null}function CA(){ui(gs),ui(ya)}function $9(r,e,t){if(ya.current!==Ip)throw Error(It(168));Fi(ya,e),Fi(gs,t)}function hJ(r,e,t){var n=r.stateNode;if(r=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in r))throw Error(It(108,Qg(e)||"Unknown",i));return yi({},t,n)}function dA(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Ip,bm=ya.current,Fi(ya,r),Fi(gs,gs.current),!0}function H9(r,e,t){var n=r.stateNode;if(!n)throw Error(It(169));t?(r=hJ(r,e,bm),n.__reactInternalMemoizedMergedChildContext=r,ui(gs),ui(ya),Fi(ya,r)):ui(gs),Fi(gs,t)}var Zj=null,wm=null,z5e=Oo.unstable_runWithPriority,Yj=Oo.unstable_scheduleCallback,ij=Oo.unstable_cancelCallback,B5e=Oo.unstable_shouldYield,W9=Oo.unstable_requestPaint,oj=Oo.unstable_now,U5e=Oo.unstable_getCurrentPriorityLevel,JA=Oo.unstable_ImmediatePriority,pJ=Oo.unstable_UserBlockingPriority,dJ=Oo.unstable_NormalPriority,mJ=Oo.unstable_LowPriority,vJ=Oo.unstable_IdlePriority,Mq={},V5e=W9!==void 0?W9:function(){},bf=null,mA=null,Rq=!1,Z9=oj(),va=1e4>Z9?oj:function(){return oj()-Z9};function fy(){switch(U5e()){case JA:return 99;case pJ:return 98;case dJ:return 97;case mJ:return 96;case vJ:return 95;default:throw Error(It(332));}}function gJ(r){switch(r){case 99:return JA;case 98:return pJ;case 97:return dJ;case 96:return mJ;case 95:return vJ;default:throw Error(It(332));}}function Sm(r,e){return r=gJ(r),z5e(r,e)}function cb(r,e,t){return r=gJ(r),Yj(r,e,t)}function yc(){if(mA!==null){var r=mA;mA=null,ij(r)}yJ()}function yJ(){if(!Rq&&bf!==null){Rq=!0;var r=0;try{var e=bf;Sm(99,function(){for(;r<e.length;r++){var t=e[r];do t=t(!0);while(t!==null)}}),bf=null}catch(t){throw bf!==null&&(bf=bf.slice(r+1)),Yj(JA,yc),t}finally{Rq=!1}}}var G5e=Tm.ReactCurrentBatchConfig;function Pu(r,e){if(r&&r.defaultProps){e=yi({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}var MA=Cp(null),RA=null,Jg=null,PA=null;function Kj(){PA=Jg=RA=null}function Xj(r){var e=MA.current;ui(MA),r.type._context._currentValue=e}function _J(r,e){for(;r!==null;){var t=r.alternate;if((r.childLanes&e)===e){if(t===null||(t.childLanes&e)===e)break;t.childLanes|=e}else r.childLanes|=e,t!==null&&(t.childLanes|=e);r=r.return}}function iy(r,e){RA=r,PA=Jg=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(Ou=!0),r.firstContext=null)}function Dl(r,e){if(PA!==r&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(PA=r,e=1073741823),e={context:r,observedBits:e,next:null},Jg===null){if(RA===null)throw Error(It(308));Jg=e,RA.dependencies={lanes:0,firstContext:e,responders:null}}else Jg=Jg.next=e;return r._currentValue}var cp=!1;function Jj(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function xJ(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function yp(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function _p(r,e){if(r=r.updateQueue,r!==null){r=r.shared;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}}function Y9(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?i=o=a:o=o.next=a,t=t.next}while(t!==null);o===null?i=o=e:o=o.next=e}else i=o=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function fb(r,e,t,n){var i=r.updateQueue;cp=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var h=c,d=h.next;h.next=null,a===null?o=d:a.next=d,a=h;var v=r.alternate;if(v!==null){v=v.updateQueue;var x=v.lastBaseUpdate;x!==a&&(x===null?v.firstBaseUpdate=d:x.next=d,v.lastBaseUpdate=h)}}if(o!==null){x=i.baseState,a=0,v=d=h=null;do{c=o.lane;var S=o.eventTime;if((n&c)===c){v!==null&&(v=v.next={eventTime:S,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var T=r,L=o;switch(c=e,S=t,L.tag){case 1:if(T=L.payload,typeof T=="function"){x=T.call(S,x,c);break e}x=T;break e;case 3:T.flags=T.flags&-4097|64;case 0:if(T=L.payload,c=typeof T=="function"?T.call(S,x,c):T,c==null)break e;x=yi({},x,c);break e;case 2:cp=!0;}}o.callback!==null&&(r.flags|=32,c=i.effects,c===null?i.effects=[o]:c.push(o))}else S={eventTime:S,lane:c,tag:o.tag,payload:o.payload,callback:o.callback,next:null},v===null?(d=v=S,h=x):v=v.next=S,a|=c;if(o=o.next,o===null){if(c=i.shared.pending,c===null)break;o=c.next,c.next=null,i.lastBaseUpdate=c,i.shared.pending=null}}while(!0);v===null&&(h=x),i.baseState=h,i.firstBaseUpdate=d,i.lastBaseUpdate=v,yb|=a,r.lanes=a,r.memoizedState=x}}function K9(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(It(191,i));i.call(n)}}}var wJ=new VA.Component().refs;function OA(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:yi({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var QA={isMounted:function(r){return(r=r._reactInternals)?Am(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=il(),i=xp(r),o=yp(n,i);o.payload=e,t!=null&&(o.callback=t),_p(r,o),wp(r,i,n)},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=il(),i=xp(r),o=yp(n,i);o.tag=1,o.payload=e,t!=null&&(o.callback=t),_p(r,o),wp(r,i,n)},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=il(),n=xp(r),i=yp(t,n);i.tag=2,e!=null&&(i.callback=e),_p(r,i),wp(r,n,t)}};function X9(r,e,t,n,i,o,a){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,o,a):e.prototype&&e.prototype.isPureReactComponent?!lb(t,n)||!lb(i,o):!0}function bJ(r,e,t){var n=!1,i=Ip,o=e.contextType;return typeof o=="object"&&o!==null?o=Dl(o):(i=ys(e)?bm:ya.current,n=e.contextTypes,o=(n=n!=null)?cy(r,i):Ip),e=new e(t,o),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=QA,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=o),e}function J9(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&QA.enqueueReplaceState(e,e.state,null)}function aj(r,e,t,n){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs=wJ,Jj(r);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Dl(o):(o=ys(e)?bm:ya.current,i.context=cy(r,o)),fb(r,t,i,n),i.state=r.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(OA(r,e,o,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&QA.enqueueReplaceState(i,i.state,null),fb(r,t,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4)}var oA=Array.isArray;function Pw(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(It(309));var n=t.stateNode}if(!n)throw Error(It(147,r));var i=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=n.refs;a===wJ&&(a=n.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof r!="string")throw Error(It(284));if(!t._owner)throw Error(It(290,r))}return r}function aA(r,e){if(r.type!=="textarea")throw Error(It(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function SJ(r){function e(R,D){if(r){var j=R.lastEffect;j!==null?(j.nextEffect=D,R.lastEffect=D):R.firstEffect=R.lastEffect=D,D.nextEffect=null,D.flags=8}}function t(R,D){if(!r)return null;for(;D!==null;)e(R,D),D=D.sibling;return null}function n(R,D){for(R=new Map;D!==null;)D.key!==null?R.set(D.key,D):R.set(D.index,D),D=D.sibling;return R}function i(R,D){return R=Ap(R,D),R.index=0,R.sibling=null,R}function o(R,D,j){return R.index=j,r?(j=R.alternate,j!==null?(j=j.index,j<D?(R.flags=2,D):j):(R.flags=2,D)):D}function a(R){return r&&R.alternate===null&&(R.flags=2),R}function c(R,D,j,B){return D===null||D.tag!==6?(D=Nq(j,R.mode,B),D.return=R,D):(D=i(D,j),D.return=R,D)}function h(R,D,j,B){return D!==null&&D.elementType===j.type?(B=i(D,j.props),B.ref=Pw(R,D,j),B.return=R,B):(B=_A(j.type,j.key,j.props,null,R.mode,B),B.ref=Pw(R,D,j),B.return=R,B)}function d(R,D,j,B){return D===null||D.tag!==4||D.stateNode.containerInfo!==j.containerInfo||D.stateNode.implementation!==j.implementation?(D=kq(j,R.mode,B),D.return=R,D):(D=i(D,j.children||[]),D.return=R,D)}function v(R,D,j,B,$){return D===null||D.tag!==7?(D=ly(j,R.mode,B,$),D.return=R,D):(D=i(D,j),D.return=R,D)}function x(R,D,j){if(typeof D=="string"||typeof D=="number")return D=Nq(""+D,R.mode,j),D.return=R,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case jw:return j=_A(D.type,D.key,D.props,null,R.mode,j),j.ref=Pw(R,null,D),j.return=R,j;case vm:return D=kq(D,R.mode,j),D.return=R,D;}if(oA(D)||Tw(D))return D=ly(D,R.mode,j,null),D.return=R,D;aA(R,D)}return null}function S(R,D,j,B){var $=D!==null?D.key:null;if(typeof j=="string"||typeof j=="number")return $!==null?null:c(R,D,""+j,B);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case jw:return j.key===$?j.type===fp?v(R,D,j.props.children,B,$):h(R,D,j,B):null;case vm:return j.key===$?d(R,D,j,B):null;}if(oA(j)||Tw(j))return $!==null?null:v(R,D,j,B,null);aA(R,j)}return null}function T(R,D,j,B,$){if(typeof B=="string"||typeof B=="number")return R=R.get(j)||null,c(D,R,""+B,$);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case jw:return R=R.get(B.key===null?j:B.key)||null,B.type===fp?v(D,R,B.props.children,$,B.key):h(D,R,B,$);case vm:return R=R.get(B.key===null?j:B.key)||null,d(D,R,B,$);}if(oA(B)||Tw(B))return R=R.get(j)||null,v(D,R,B,$,null);aA(D,B)}return null}function L(R,D,j,B){for(var $=null,ee=null,J=D,ie=D=0,ue=null;J!==null&&ie<j.length;ie++){J.index>ie?(ue=J,J=null):ue=J.sibling;var le=S(R,J,j[ie],B);if(le===null){J===null&&(J=ue);break}r&&J&&le.alternate===null&&e(R,J),D=o(le,D,ie),ee===null?$=le:ee.sibling=le,ee=le,J=ue}if(ie===j.length)return t(R,J),$;if(J===null){for(;ie<j.length;ie++)J=x(R,j[ie],B),J!==null&&(D=o(J,D,ie),ee===null?$=J:ee.sibling=J,ee=J);return $}for(J=n(R,J);ie<j.length;ie++)ue=T(J,R,ie,j[ie],B),ue!==null&&(r&&ue.alternate!==null&&J.delete(ue.key===null?ie:ue.key),D=o(ue,D,ie),ee===null?$=ue:ee.sibling=ue,ee=ue);return r&&J.forEach(function(_e){return e(R,_e)}),$}function k(R,D,j,B){var $=Tw(j);if(typeof $!="function")throw Error(It(150));if(j=$.call(j),j==null)throw Error(It(151));for(var ee=$=null,J=D,ie=D=0,ue=null,le=j.next();J!==null&&!le.done;ie++,le=j.next()){J.index>ie?(ue=J,J=null):ue=J.sibling;var _e=S(R,J,le.value,B);if(_e===null){J===null&&(J=ue);break}r&&J&&_e.alternate===null&&e(R,J),D=o(_e,D,ie),ee===null?$=_e:ee.sibling=_e,ee=_e,J=ue}if(le.done)return t(R,J),$;if(J===null){for(;!le.done;ie++,le=j.next())le=x(R,le.value,B),le!==null&&(D=o(le,D,ie),ee===null?$=le:ee.sibling=le,ee=le);return $}for(J=n(R,J);!le.done;ie++,le=j.next())le=T(J,R,ie,le.value,B),le!==null&&(r&&le.alternate!==null&&J.delete(le.key===null?ie:le.key),D=o(le,D,ie),ee===null?$=le:ee.sibling=le,ee=le);return r&&J.forEach(function(Re){return e(R,Re)}),$}return function(R,D,j,B){var $=typeof j=="object"&&j!==null&&j.type===fp&&j.key===null;$&&(j=j.props.children);var ee=typeof j=="object"&&j!==null;if(ee)switch(j.$$typeof){case jw:e:{for(ee=j.key,$=D;$!==null;){if($.key===ee){switch($.tag){case 7:if(j.type===fp){t(R,$.sibling),D=i($,j.props.children),D.return=R,R=D;break e}break;default:if($.elementType===j.type){t(R,$.sibling),D=i($,j.props),D.ref=Pw(R,$,j),D.return=R,R=D;break e}}t(R,$);break}else e(R,$);$=$.sibling}j.type===fp?(D=ly(j.props.children,R.mode,B,j.key),D.return=R,R=D):(B=_A(j.type,j.key,j.props,null,R.mode,B),B.ref=Pw(R,D,j),B.return=R,R=B)}return a(R);case vm:e:{for($=j.key;D!==null;){if(D.key===$){if(D.tag===4&&D.stateNode.containerInfo===j.containerInfo&&D.stateNode.implementation===j.implementation){t(R,D.sibling),D=i(D,j.children||[]),D.return=R,R=D;break e}else{t(R,D);break}}else e(R,D);D=D.sibling}D=kq(j,R.mode,B),D.return=R,R=D}return a(R);}if(typeof j=="string"||typeof j=="number")return j=""+j,D!==null&&D.tag===6?(t(R,D.sibling),D=i(D,j),D.return=R,R=D):(t(R,D),D=Nq(j,R.mode,B),D.return=R,R=D),a(R);if(oA(j))return L(R,D,j,B);if(Tw(j))return k(R,D,j,B);if(ee&&aA(R,j),typeof j=="undefined"&&!$)switch(R.tag){case 1:case 22:case 0:case 11:case 15:throw Error(It(152,Qg(R.type)||"Component"));}return t(R,D)}}var LA=SJ(!0),EJ=SJ(!1),gb={},vc=Cp(gb),hb=Cp(gb),pb=Cp(gb);function _m(r){if(r===gb)throw Error(It(174));return r}function sj(r,e){switch(Fi(pb,e),Fi(hb,r),Fi(vc,gb),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$q(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=$q(e,r);}ui(vc),Fi(vc,e)}function hy(){ui(vc),ui(hb),ui(pb)}function Q9(r){_m(pb.current);var e=_m(vc.current),t=$q(e,r.type);e!==t&&(Fi(hb,r),Fi(vc,t))}function Qj(r){hb.current===r&&(ui(vc),ui(hb))}var ji=Cp(0);function DA(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&64)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ef=null,dp=null,gc=!1;function IJ(r,e){var t=Ol(5,null,null,0);t.elementType="DELETED",t.type="DELETED",t.stateNode=e,t.return=r,t.flags=8,r.lastEffect!==null?(r.lastEffect.nextEffect=t,r.lastEffect=t):r.firstEffect=r.lastEffect=t}function e7(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,!0):!1;case 13:return!1;default:return!1;}}function lj(r){if(gc){var e=dp;if(e){var t=e;if(!e7(r,e)){if(e=ny(t.nextSibling),!e||!e7(r,e)){r.flags=r.flags&-1025|2,gc=!1,Ef=r;return}IJ(Ef,t)}Ef=r,dp=ny(e.firstChild)}else r.flags=r.flags&-1025|2,gc=!1,Ef=r}}function t7(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Ef=r}function sA(r){if(r!==Ef)return!1;if(!gc)return t7(r),gc=!0,!1;var e=r.type;if(r.tag!==5||e!=="head"&&e!=="body"&&!rj(e,r.memoizedProps))for(e=dp;e;)IJ(r,e),e=ny(e.nextSibling);if(t7(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(It(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){dp=ny(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}dp=null}}else dp=Ef?ny(r.stateNode.nextSibling):null;return!0}function Pq(){dp=Ef=null,gc=!1}var oy=[];function eF(){for(var r=0;r<oy.length;r++)oy[r]._workInProgressVersionPrimary=null;oy.length=0}var Kw=Tm.ReactCurrentDispatcher,Ll=Tm.ReactCurrentBatchConfig,db=0,Gi=null,ma=null,Go=null,NA=!1,Xw=!1;function ms(){throw Error(It(321))}function tF(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!Pl(r[t],e[t]))return!1;return!0}function rF(r,e,t,n,i,o){if(db=o,Gi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Kw.current=r===null||r.memoizedState===null?H5e:W5e,r=t(n,i),Xw){o=0;do{if(Xw=!1,!(25>o))throw Error(It(301));o+=1,Go=ma=null,e.updateQueue=null,Kw.current=Z5e,r=t(n,i)}while(Xw)}if(Kw.current=FA,e=ma!==null&&ma.next!==null,db=0,Go=ma=Gi=null,NA=!1,e)throw Error(It(300));return r}function xm(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Go===null?Gi.memoizedState=Go=r:Go=Go.next=r,Go}function Cm(){if(ma===null){var r=Gi.alternate;r=r!==null?r.memoizedState:null}else r=ma.next;var e=Go===null?Gi.memoizedState:Go.next;if(e!==null)Go=e,ma=r;else{if(r===null)throw Error(It(310));ma=r,r={memoizedState:ma.memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},Go===null?Gi.memoizedState=Go=r:Go=Go.next=r}return Go}function dc(r,e){return typeof e=="function"?e(r):e}function Ow(r){var e=Cm(),t=e.queue;if(t===null)throw Error(It(311));t.lastRenderedReducer=r;var n=ma,i=n.baseQueue,o=t.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,t.pending=null}if(i!==null){i=i.next,n=n.baseState;var c=a=o=null,h=i;do{var d=h.lane;if((db&d)===d)c!==null&&(c=c.next={lane:0,action:h.action,eagerReducer:h.eagerReducer,eagerState:h.eagerState,next:null}),n=h.eagerReducer===r?h.eagerState:r(n,h.action);else{var v={lane:d,action:h.action,eagerReducer:h.eagerReducer,eagerState:h.eagerState,next:null};c===null?(a=c=v,o=n):c=c.next=v,Gi.lanes|=d,yb|=d}h=h.next}while(h!==null&&h!==i);c===null?o=n:c.next=a,Pl(n,e.memoizedState)||(Ou=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,t.lastRenderedState=n}return[e.memoizedState,t.dispatch]}function Lw(r){var e=Cm(),t=e.queue;if(t===null)throw Error(It(311));t.lastRenderedReducer=r;var n=t.dispatch,i=t.pending,o=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do o=r(o,a.action),a=a.next;while(a!==i);Pl(o,e.memoizedState)||(Ou=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,n]}function r7(r,e,t){var n=e._getVersion;n=n(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?r=i===n:(r=r.mutableReadLanes,(r=(db&r)===r)&&(e._workInProgressVersionPrimary=n,oy.push(e))),r)return t(e._source);throw oy.push(e),Error(It(350))}function TJ(r,e,t,n){var i=Ga;if(i===null)throw Error(It(349));var o=e._getVersion,a=o(e._source),c=Kw.current,h=c.useState(function(){return r7(i,e,t)}),d=h[1],v=h[0];h=Go;var x=r.memoizedState,S=x.refs,T=S.getSnapshot,L=x.source;x=x.subscribe;var k=Gi;return r.memoizedState={refs:S,source:e,subscribe:n},c.useEffect(function(){S.getSnapshot=t,S.setSnapshot=d;var R=o(e._source);if(!Pl(a,R)){R=t(e._source),Pl(v,R)||(d(R),R=xp(k),i.mutableReadLanes|=R&i.pendingLanes),R=i.mutableReadLanes,i.entangledLanes|=R;for(var D=i.entanglements,j=R;0<j;){var B=31-Ep(j),$=1<<B;D[B]|=R,j&=~$}}},[t,e,n]),c.useEffect(function(){return n(e._source,function(){var R=S.getSnapshot,D=S.setSnapshot;try{D(R(e._source));var j=xp(k);i.mutableReadLanes|=j&i.pendingLanes}catch(B){D(function(){throw B})}})},[e,n]),Pl(T,t)&&Pl(L,e)&&Pl(x,n)||(r={pending:null,dispatch:null,lastRenderedReducer:dc,lastRenderedState:v},r.dispatch=d=oF.bind(null,Gi,r),h.queue=r,h.baseQueue=null,v=r7(i,e,t),h.memoizedState=h.baseState=v),v}function AJ(r,e,t){var n=Cm();return TJ(n,r,e,t)}function Dw(r){var e=xm();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r=e.queue={pending:null,dispatch:null,lastRenderedReducer:dc,lastRenderedState:r},r=r.dispatch=oF.bind(null,Gi,r),[e.memoizedState,r]}function kA(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=Gi.updateQueue,e===null?(e={lastEffect:null},Gi.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function n7(r){var e=xm();return r={current:r},e.memoizedState=r}function qA(){return Cm().memoizedState}function uj(r,e,t,n){var i=xm();Gi.flags|=r,i.memoizedState=kA(1|e,t,void 0,n===void 0?null:n)}function nF(r,e,t,n){var i=Cm();n=n===void 0?null:n;var o=void 0;if(ma!==null){var a=ma.memoizedState;if(o=a.destroy,n!==null&&tF(n,a.deps)){kA(e,t,o,n);return}}Gi.flags|=r,i.memoizedState=kA(1|e,t,o,n)}function i7(r,e){return uj(516,4,r,e)}function jA(r,e){return nF(516,4,r,e)}function CJ(r,e){return nF(4,2,r,e)}function MJ(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function RJ(r,e,t){return t=t!=null?t.concat([r]):null,nF(4,2,MJ.bind(null,e,r),t)}function iF(){}function PJ(r,e){var t=Cm();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&tF(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function OJ(r,e){var t=Cm();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&tF(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function $5e(r,e){var t=fy();Sm(98>t?98:t,function(){r(!0)}),Sm(97<t?97:t,function(){var n=Ll.transition;Ll.transition=1;try{r(!1),e()}finally{Ll.transition=n}})}function oF(r,e,t){var n=il(),i=xp(r),o={lane:i,action:t,eagerReducer:null,eagerState:null,next:null},a=e.pending;if(a===null?o.next=o:(o.next=a.next,a.next=o),e.pending=o,a=r.alternate,r===Gi||a!==null&&a===Gi)Xw=NA=!0;else{if(r.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var c=e.lastRenderedState,h=a(c,t);if(o.eagerReducer=a,o.eagerState=h,Pl(h,c))return}catch(d){}finally{}wp(r,i,n)}}var FA={readContext:Dl,useCallback:ms,useContext:ms,useEffect:ms,useImperativeHandle:ms,useLayoutEffect:ms,useMemo:ms,useReducer:ms,useRef:ms,useState:ms,useDebugValue:ms,useDeferredValue:ms,useTransition:ms,useMutableSource:ms,useOpaqueIdentifier:ms,unstable_isNewReconciler:!1},H5e={readContext:Dl,useCallback:function(r,e){return xm().memoizedState=[r,e===void 0?null:e],r},useContext:Dl,useEffect:i7,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,uj(4,2,MJ.bind(null,e,r),t)},useLayoutEffect:function(r,e){return uj(4,2,r,e)},useMemo:function(r,e){var t=xm();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=xm();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r=n.queue={pending:null,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},r=r.dispatch=oF.bind(null,Gi,r),[n.memoizedState,r]},useRef:n7,useState:Dw,useDebugValue:iF,useDeferredValue:function(r){var e=Dw(r),t=e[0],n=e[1];return i7(function(){var i=Ll.transition;Ll.transition=1;try{n(r)}finally{Ll.transition=i}},[r]),t},useTransition:function(){var r=Dw(!1),e=r[0];return r=$5e.bind(null,r[1]),n7(r),[r,e]},useMutableSource:function(r,e,t){var n=xm();return n.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:r,subscribe:t},TJ(n,r,e,t)},useOpaqueIdentifier:function(){if(gc){var r=!1,e=F5e(function(){throw r||(r=!0,t("r:"+(Cq++).toString(36))),Error(It(355))}),t=Dw(e)[1];return!(Gi.mode&2)&&(Gi.flags|=516,kA(5,function(){t("r:"+(Cq++).toString(36))},void 0,null)),e}return e="r:"+(Cq++).toString(36),Dw(e),e},unstable_isNewReconciler:!1},W5e={readContext:Dl,useCallback:PJ,useContext:Dl,useEffect:jA,useImperativeHandle:RJ,useLayoutEffect:CJ,useMemo:OJ,useReducer:Ow,useRef:qA,useState:function(){return Ow(dc)},useDebugValue:iF,useDeferredValue:function(r){var e=Ow(dc),t=e[0],n=e[1];return jA(function(){var i=Ll.transition;Ll.transition=1;try{n(r)}finally{Ll.transition=i}},[r]),t},useTransition:function(){var r=Ow(dc)[0];return[qA().current,r]},useMutableSource:AJ,useOpaqueIdentifier:function(){return Ow(dc)[0]},unstable_isNewReconciler:!1},Z5e={readContext:Dl,useCallback:PJ,useContext:Dl,useEffect:jA,useImperativeHandle:RJ,useLayoutEffect:CJ,useMemo:OJ,useReducer:Lw,useRef:qA,useState:function(){return Lw(dc)},useDebugValue:iF,useDeferredValue:function(r){var e=Lw(dc),t=e[0],n=e[1];return jA(function(){var i=Ll.transition;Ll.transition=1;try{n(r)}finally{Ll.transition=i}},[r]),t},useTransition:function(){var r=Lw(dc)[0];return[qA().current,r]},useMutableSource:AJ,useOpaqueIdentifier:function(){return Lw(dc)[0]},unstable_isNewReconciler:!1},Y5e=Tm.ReactCurrentOwner,Ou=!1;function vs(r,e,t,n){e.child=r===null?EJ(e,null,t,n):LA(e,r.child,t,n)}function o7(r,e,t,n,i){t=t.render;var o=e.ref;return iy(e,i),n=rF(r,e,t,n,o,i),r!==null&&!Ou?(e.updateQueue=r.updateQueue,e.flags&=-517,r.lanes&=~i,If(r,e,i)):(e.flags|=1,vs(r,e,n,i),e.child)}function a7(r,e,t,n,i,o){if(r===null){var a=t.type;return typeof a=="function"&&!fF(a)&&a.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=a,LJ(r,e,a,n,i,o)):(r=_A(t.type,null,n,e,e.mode,o),r.ref=e.ref,r.return=e,e.child=r)}return a=r.child,!(i&o)&&(i=a.memoizedProps,t=t.compare,t=t!==null?t:lb,t(i,n)&&r.ref===e.ref)?If(r,e,o):(e.flags|=1,r=Ap(a,n),r.ref=e.ref,r.return=e,e.child=r)}function LJ(r,e,t,n,i,o){if(r!==null&&lb(r.memoizedProps,n)&&r.ref===e.ref)if(Ou=!1,(o&i)!==0)r.flags&16384&&(Ou=!0);else return e.lanes=r.lanes,If(r,e,o);return cj(r,e,t,n,o)}function Oq(r,e,t){var n=e.pendingProps,i=n.children,o=r!==null?r.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding"){if(!(e.mode&4))e.memoizedState={baseLanes:0},uA(e,t);else if(t&1073741824)e.memoizedState={baseLanes:0},uA(e,o!==null?o.baseLanes:t);else return r=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r},uA(e,r),null;}else o!==null?(n=o.baseLanes|t,e.memoizedState=null):n=t,uA(e,n);return vs(r,e,i,t),e.child}function DJ(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=128)}function cj(r,e,t,n,i){var o=ys(t)?bm:ya.current;return o=cy(e,o),iy(e,i),t=rF(r,e,t,n,o,i),r!==null&&!Ou?(e.updateQueue=r.updateQueue,e.flags&=-517,r.lanes&=~i,If(r,e,i)):(e.flags|=1,vs(r,e,t,i),e.child)}function s7(r,e,t,n,i){if(ys(t)){var o=!0;dA(e)}else o=!1;if(iy(e,i),e.stateNode===null)r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2),bJ(e,t,n),aj(e,t,n,i),n=!0;else if(r===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var h=a.context,d=t.contextType;typeof d=="object"&&d!==null?d=Dl(d):(d=ys(t)?bm:ya.current,d=cy(e,d));var v=t.getDerivedStateFromProps,x=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function";x||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==n||h!==d)&&J9(e,a,n,d),cp=!1;var S=e.memoizedState;a.state=S,fb(e,n,a,i),h=e.memoizedState,c!==n||S!==h||gs.current||cp?(typeof v=="function"&&(OA(e,t,v,n),h=e.memoizedState),(c=cp||X9(e,t,c,n,S,h,d))?(x||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4)):(typeof a.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=n,e.memoizedState=h),a.props=n,a.state=h,a.context=d,n=c):(typeof a.componentDidMount=="function"&&(e.flags|=4),n=!1)}else{a=e.stateNode,xJ(r,e),c=e.memoizedProps,d=e.type===e.elementType?c:Pu(e.type,c),a.props=d,x=e.pendingProps,S=a.context,h=t.contextType,typeof h=="object"&&h!==null?h=Dl(h):(h=ys(t)?bm:ya.current,h=cy(e,h));var T=t.getDerivedStateFromProps;(v=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==x||S!==h)&&J9(e,a,n,h),cp=!1,S=e.memoizedState,a.state=S,fb(e,n,a,i);var L=e.memoizedState;c!==x||S!==L||gs.current||cp?(typeof T=="function"&&(OA(e,t,T,n),L=e.memoizedState),(d=cp||X9(e,t,d,n,S,L,h))?(v||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,L,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,L,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof a.componentDidUpdate!="function"||c===r.memoizedProps&&S===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===r.memoizedProps&&S===r.memoizedState||(e.flags|=256),e.memoizedProps=n,e.memoizedState=L),a.props=n,a.state=L,a.context=h,n=d):(typeof a.componentDidUpdate!="function"||c===r.memoizedProps&&S===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===r.memoizedProps&&S===r.memoizedState||(e.flags|=256),n=!1)}return fj(r,e,t,n,o,i)}function fj(r,e,t,n,i,o){DJ(r,e);var a=(e.flags&64)!==0;if(!n&&!a)return i&&H9(e,t,!1),If(r,e,o);n=e.stateNode,Y5e.current=e;var c=a&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&a?(e.child=LA(e,r.child,null,o),e.child=LA(e,null,c,o)):vs(r,e,c,o),e.memoizedState=n.state,i&&H9(e,t,!0),e.child}function l7(r){var e=r.stateNode;e.pendingContext?$9(r,e.pendingContext,e.pendingContext!==e.context):e.context&&$9(r,e.context,!1),sj(r,e.containerInfo)}var lA={dehydrated:null,retryLane:0};function u7(r,e,t){var n=e.pendingProps,i=ji.current,o=!1,a;return(a=(e.flags&64)!==0)||(a=r!==null&&r.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-65):r!==null&&r.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),Fi(ji,i&1),r===null?(n.fallback!==void 0&&lj(e),r=n.children,i=n.fallback,o?(r=c7(e,r,i,t),e.child.memoizedState={baseLanes:t},e.memoizedState=lA,r):typeof n.unstable_expectedLoadTime=="number"?(r=c7(e,r,i,t),e.child.memoizedState={baseLanes:t},e.memoizedState=lA,e.lanes=33554432,r):(t=hF({mode:"visible",children:r},e.mode,t,null),t.return=e,e.child=t)):r.memoizedState!==null?o?(n=h7(r,e,n.children,n.fallback,t),o=e.child,i=r.child.memoizedState,o.memoizedState=i===null?{baseLanes:t}:{baseLanes:i.baseLanes|t},o.childLanes=r.childLanes&~t,e.memoizedState=lA,n):(t=f7(r,e,n.children,t),e.memoizedState=null,t):o?(n=h7(r,e,n.children,n.fallback,t),o=e.child,i=r.child.memoizedState,o.memoizedState=i===null?{baseLanes:t}:{baseLanes:i.baseLanes|t},o.childLanes=r.childLanes&~t,e.memoizedState=lA,n):(t=f7(r,e,n.children,t),e.memoizedState=null,t)}function c7(r,e,t,n){var i=r.mode,o=r.child;return e={mode:"hidden",children:e},!(i&2)&&o!==null?(o.childLanes=0,o.pendingProps=e):o=hF(e,i,0,null),t=ly(t,i,n,null),o.return=r,t.return=r,o.sibling=t,r.child=o,t}function f7(r,e,t,n){var i=r.child;return r=i.sibling,t=Ap(i,{mode:"visible",children:t}),!(e.mode&2)&&(t.lanes=n),t.return=e,t.sibling=null,r!==null&&(r.nextEffect=null,r.flags=8,e.firstEffect=e.lastEffect=r),e.child=t}function h7(r,e,t,n,i){var o=e.mode,a=r.child;r=a.sibling;var c={mode:"hidden",children:t};return!(o&2)&&e.child!==a?(t=e.child,t.childLanes=0,t.pendingProps=c,a=t.lastEffect,a!==null?(e.firstEffect=t.firstEffect,e.lastEffect=a,a.nextEffect=null):e.firstEffect=e.lastEffect=null):t=Ap(a,c),r!==null?n=Ap(r,n):(n=ly(n,o,i,null),n.flags|=2),n.return=e,t.return=e,t.sibling=n,e.child=t,n}function p7(r,e){r.lanes|=e;var t=r.alternate;t!==null&&(t.lanes|=e),_J(r.return,e)}function Lq(r,e,t,n,i,o){var a=r.memoizedState;a===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=t,a.tailMode=i,a.lastEffect=o)}function d7(r,e,t){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(vs(r,e,n.children,t),n=ji.current,n&2)n=n&1|2,e.flags|=64;else{if(r!==null&&r.flags&64)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&p7(r,t);else if(r.tag===19)p7(r,t);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(Fi(ji,n),!(e.mode&2))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&DA(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Lq(e,!1,i,t,o,e.lastEffect);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&DA(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}Lq(e,!0,t,null,o,e.lastEffect);break;case"together":Lq(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null;}return e.child}function If(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),yb|=e.lanes,t&e.childLanes){if(r!==null&&e.child!==r.child)throw Error(It(153));if(e.child!==null){for(r=e.child,t=Ap(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=Ap(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}return null}var NJ,hj,kJ,qJ;NJ=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};hj=function(){};kJ=function(r,e,t,n){var i=r.memoizedProps;if(i!==n){r=e.stateNode,_m(vc.current);var o=null;switch(t){case"input":i=Fq(r,i),n=Fq(r,n),o=[];break;case"option":i=Uq(r,i),n=Uq(r,n),o=[];break;case"select":i=yi({},i,{value:void 0}),n=yi({},n,{value:void 0}),o=[];break;case"textarea":i=Vq(r,i),n=Vq(r,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=TA);}Hq(t,n);var a;t=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(a in c)c.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(tb.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in n){var h=n[d];if(c=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&h!==c&&(h!=null||c!=null))if(d==="style"){if(c){for(a in c)!c.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in h)h.hasOwnProperty(a)&&c[a]!==h[a]&&(t||(t={}),t[a]=h[a])}else t||(o||(o=[]),o.push(d,t)),t=h;}else d==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(o=o||[]).push(d,h)):d==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(d,""+h):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(tb.hasOwnProperty(d)?(h!=null&&d==="onScroll"&&li("scroll",r),o||c===h||(o=[])):typeof h=="object"&&h!==null&&h.$$typeof===Oj?h.toString():(o=o||[]).push(d,h))}t&&(o=o||[]).push("style",t);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};qJ=function(r,e,t,n){t!==n&&(e.flags|=4)};function Nw(r,e){if(!gc)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null;}}function K5e(r,e,t){var n=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ys(e.type)&&CA(),null;case 3:return hy(),ui(gs),ui(ya),eF(),n=e.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(sA(e)?e.flags|=4:n.hydrate||(e.flags|=256)),hj(e),null;case 5:Qj(e);var i=_m(pb.current);if(t=e.type,r!==null&&e.stateNode!=null)kJ(r,e,t,n,i),r.ref!==e.ref&&(e.flags|=128);else{if(!n){if(e.stateNode===null)throw Error(It(166));return null}if(r=_m(vc.current),sA(e)){n=e.stateNode,t=e.type;var o=e.memoizedProps;switch(n[pp]=e,n[AA]=o,t){case"dialog":li("cancel",n),li("close",n);break;case"iframe":case"object":case"embed":li("load",n);break;case"video":case"audio":for(r=0;r<zw.length;r++)li(zw[r],n);break;case"source":li("error",n);break;case"img":case"image":case"link":li("error",n),li("load",n);break;case"details":li("toggle",n);break;case"input":v9(n,o),li("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},li("invalid",n);break;case"textarea":y9(n,o),li("invalid",n);}Hq(t,o),r=null;for(var a in o)o.hasOwnProperty(a)&&(i=o[a],a==="children"?typeof i=="string"?n.textContent!==i&&(r=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(r=["children",""+i]):tb.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&li("scroll",n));switch(t){case"input":JT(n),g9(n,o,!0);break;case"textarea":JT(n),_9(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=TA);}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{switch(a=i.nodeType===9?i:i.ownerDocument,r===Gq.html&&(r=R7(t)),r===Gq.html?t==="script"?(r=a.createElement("div"),r.innerHTML="<script></script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=a.createElement(t,{is:n.is}):(r=a.createElement(t),t==="select"&&(a=r,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):r=a.createElementNS(r,t),r[pp]=e,r[AA]=n,NJ(r,e,!1,!1),e.stateNode=r,a=Wq(t,n),t){case"dialog":li("cancel",r),li("close",r),i=n;break;case"iframe":case"object":case"embed":li("load",r),i=n;break;case"video":case"audio":for(i=0;i<zw.length;i++)li(zw[i],r);i=n;break;case"source":li("error",r),i=n;break;case"img":case"image":case"link":li("error",r),li("load",r),i=n;break;case"details":li("toggle",r),i=n;break;case"input":v9(r,n),i=Fq(r,n),li("invalid",r);break;case"option":i=Uq(r,n);break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=yi({},n,{value:void 0}),li("invalid",r);break;case"textarea":y9(r,n),i=Vq(r,n),li("invalid",r);break;default:i=n;}Hq(t,i);var c=i;for(o in c)if(c.hasOwnProperty(o)){var h=c[o];o==="style"?L7(r,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&P7(r,h)):o==="children"?typeof h=="string"?(t!=="textarea"||h!=="")&&rb(r,h):typeof h=="number"&&rb(r,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(tb.hasOwnProperty(o)?h!=null&&o==="onScroll"&&li("scroll",r):h!=null&&Tj(r,o,h,a))}switch(t){case"input":JT(r),g9(r,n,!1);break;case"textarea":JT(r),_9(r);break;case"option":n.value!=null&&r.setAttribute("value",""+Sp(n.value));break;case"select":r.multiple=!!n.multiple,o=n.value,o!=null?ey(r,!!n.multiple,o,!1):n.defaultValue!=null&&ey(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=TA);}cJ(t,n)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(r&&e.stateNode!=null)qJ(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(It(166));t=_m(pb.current),_m(vc.current),sA(e)?(n=e.stateNode,t=e.memoizedProps,n[pp]=e,n.nodeValue!==t&&(e.flags|=4)):(n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[pp]=e,e.stateNode=n)}return null;case 13:return ui(ji),n=e.memoizedState,e.flags&64?(e.lanes=t,e):(n=n!==null,t=!1,r===null?e.memoizedProps.fallback!==void 0&&sA(e):t=r.memoizedState!==null,n&&!t&&e.mode&2&&(r===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||ji.current&1?$o===0&&($o=3):(($o===0||$o===3)&&($o=4),Ga===null||!(yb&134217727)&&!(vy&134217727)||ay(Ga,ga))),(n||t)&&(e.flags|=4),null);case 4:return hy(),hj(e),r===null&&sJ(e.stateNode.containerInfo),null;case 10:return Xj(e),null;case 17:return ys(e.type)&&CA(),null;case 19:if(ui(ji),n=e.memoizedState,n===null)return null;if(o=(e.flags&64)!==0,a=n.rendering,a===null){if(o)Nw(n,!1);else{if($o!==0||r!==null&&r.flags&64)for(r=e.child;r!==null;){if(a=DA(r),a!==null){for(e.flags|=64,Nw(n,!1),o=a.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),n.lastEffect===null&&(e.firstEffect=null),e.lastEffect=n.lastEffect,n=t,t=e.child;t!==null;)o=t,r=n,o.flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,a=o.alternate,a===null?(o.childLanes=0,o.lanes=r,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,r=a.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return Fi(ji,ji.current&1|2),e.child}r=r.sibling}n.tail!==null&&va()>yj&&(e.flags|=64,o=!0,Nw(n,!1),e.lanes=33554432)}}else{if(!o)if(r=DA(a),r!==null){if(e.flags|=64,o=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Nw(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate&&!gc)return e=e.lastEffect=n.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*va()-n.renderingStartTime>yj&&t!==1073741824&&(e.flags|=64,o=!0,Nw(n,!1),e.lanes=33554432);n.isBackwards?(a.sibling=e.child,e.child=a):(t=n.last,t!==null?t.sibling=a:e.child=a,n.last=a)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.lastEffect=e.lastEffect,n.renderingStartTime=va(),t.sibling=null,e=ji.current,Fi(ji,o?e&1|2:e&1),t):null;case 23:case 24:return cF(),r!==null&&r.memoizedState!==null!=(e.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null;}throw Error(It(156,e.tag))}function X5e(r){switch(r.tag){case 1:ys(r.type)&&CA();var e=r.flags;return e&4096?(r.flags=e&-4097|64,r):null;case 3:if(hy(),ui(gs),ui(ya),eF(),e=r.flags,e&64)throw Error(It(285));return r.flags=e&-4097|64,r;case 5:return Qj(r),null;case 13:return ui(ji),e=r.flags,e&4096?(r.flags=e&-4097|64,r):null;case 19:return ui(ji),null;case 4:return hy(),null;case 10:return Xj(r),null;case 23:case 24:return cF(),null;default:return null;}}function aF(r,e){try{var t="",n=e;do t+=PVe(n),n=n.return;while(n);var i=t}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:r,source:e,stack:i}}function pj(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var J5e=typeof WeakMap=="function"?WeakMap:Map;function jJ(r,e,t){t=yp(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){BA||(BA=!0,_j=n),pj(r,e)},t}function FJ(r,e,t){t=yp(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return pj(r,e),n(i)}}var o=r.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){typeof n!="function"&&(mc===null?mc=new Set([this]):mc.add(this),pj(r,e));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}var Q5e=typeof WeakSet=="function"?WeakSet:Set;function m7(r){var e=r.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(t){bp(r,t)}else e.current=null}function eGe(r,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&r!==null){var t=r.memoizedProps,n=r.memoizedState;r=e.stateNode,e=r.getSnapshotBeforeUpdate(e.elementType===e.type?t:Pu(e.type,t),n),r.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&Wj(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return;}throw Error(It(163))}function tGe(r,e,t){switch(t.tag){case 0:case 11:case 15:case 22:if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){r=e=e.next;do{if((r.tag&3)===3){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){r=e=e.next;do{var i=r;n=i.next,i=i.tag,i&4&&i&1&&(ZJ(t,r),uGe(t,r)),r=n}while(r!==e)}return;case 1:r=t.stateNode,t.flags&4&&(e===null?r.componentDidMount():(n=t.elementType===t.type?e.memoizedProps:Pu(t.type,e.memoizedProps),r.componentDidUpdate(n,e.memoizedState,r.__reactInternalSnapshotBeforeUpdate))),e=t.updateQueue,e!==null&&K9(t,e,r);return;case 3:if(e=t.updateQueue,e!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode;}K9(t,e,r)}return;case 5:r=t.stateNode,e===null&&t.flags&4&&cJ(t.type,t.memoizedProps)&&r.focus();return;case 6:return;case 4:return;case 12:return;case 13:t.memoizedState===null&&(t=t.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&V7(t))));return;case 19:case 17:case 20:case 21:case 23:case 24:return;}throw Error(It(163))}function v7(r,e){for(var t=r;;){if(t.tag===5){var n=t.stateNode;if(e)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=t.stateNode;var i=t.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=O7("display",i)}}else if(t.tag===6)t.stateNode.nodeValue=e?"":t.memoizedProps;else if((t.tag!==23&&t.tag!==24||t.memoizedState===null||t===r)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function g7(r,e){if(wm&&typeof wm.onCommitFiberUnmount=="function")try{wm.onCommitFiberUnmount(Zj,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(r=e.updateQueue,r!==null&&(r=r.lastEffect,r!==null)){var t=r=r.next;do{var n=t,i=n.destroy;if(n=n.tag,i!==void 0)if(n&4)ZJ(e,t);else{n=e;try{i()}catch(o){bp(n,o)}}t=t.next}while(t!==r)}break;case 1:if(m7(e),r=e.stateNode,typeof r.componentWillUnmount=="function")try{r.props=e.memoizedProps,r.state=e.memoizedState,r.componentWillUnmount()}catch(o){bp(e,o)}break;case 5:m7(e);break;case 4:zJ(r,e);}}function y7(r){r.alternate=null,r.child=null,r.dependencies=null,r.firstEffect=null,r.lastEffect=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.return=null,r.updateQueue=null}function _7(r){return r.tag===5||r.tag===3||r.tag===4}function x7(r){e:{for(var e=r.return;e!==null;){if(_7(e))break e;e=e.return}throw Error(It(160))}var t=e;switch(e=t.stateNode,t.tag){case 5:var n=!1;break;case 3:e=e.containerInfo,n=!0;break;case 4:e=e.containerInfo,n=!0;break;default:throw Error(It(161));}t.flags&16&&(rb(e,""),t.flags&=-17);e:t:for(t=r;;){for(;t.sibling===null;){if(t.return===null||_7(t.return)){t=null;break e}t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2)){t=t.stateNode;break e}}n?dj(r,t,e):mj(r,t,e)}function dj(r,e,t){var n=r.tag,i=n===5||n===6;if(i)r=i?r.stateNode:r.stateNode.instance,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=TA));else if(n!==4&&(r=r.child,r!==null))for(dj(r,e,t),r=r.sibling;r!==null;)dj(r,e,t),r=r.sibling}function mj(r,e,t){var n=r.tag,i=n===5||n===6;if(i)r=i?r.stateNode:r.stateNode.instance,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(mj(r,e,t),r=r.sibling;r!==null;)mj(r,e,t),r=r.sibling}function zJ(r,e){for(var t=e,n=!1,i,o;;){if(!n){n=t.return;e:for(;;){if(n===null)throw Error(It(160));switch(i=n.stateNode,n.tag){case 5:o=!1;break e;case 3:i=i.containerInfo,o=!0;break e;case 4:i=i.containerInfo,o=!0;break e;}n=n.return}n=!0}if(t.tag===5||t.tag===6){e:for(var a=r,c=t,h=c;;)if(g7(a,h),h.child!==null&&h.tag!==4)h.child.return=h,h=h.child;else{if(h===c)break e;for(;h.sibling===null;){if(h.return===null||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}o?(a=i,c=t.stateNode,a.nodeType===8?a.parentNode.removeChild(c):a.removeChild(c)):i.removeChild(t.stateNode)}else if(t.tag===4){if(t.child!==null){i=t.stateNode.containerInfo,o=!0,t.child.return=t,t=t.child;continue}}else if(g7(r,t),t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return,t.tag===4&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function Dq(r,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var t=e.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do(n.tag&3)===3&&(r=n.destroy,n.destroy=void 0,r!==void 0&&r()),n=n.next;while(n!==t)}return;case 1:return;case 5:if(t=e.stateNode,t!=null){n=e.memoizedProps;var i=r!==null?r.memoizedProps:n;r=e.type;var o=e.updateQueue;if(e.updateQueue=null,o!==null){for(t[AA]=n,r==="input"&&n.type==="radio"&&n.name!=null&&C7(t,n),Wq(r,i),e=Wq(r,n),i=0;i<o.length;i+=2){var a=o[i],c=o[i+1];a==="style"?L7(t,c):a==="dangerouslySetInnerHTML"?P7(t,c):a==="children"?rb(t,c):Tj(t,a,c,e)}switch(r){case"input":zq(t,n);break;case"textarea":M7(t,n);break;case"select":r=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!n.multiple,o=n.value,o!=null?ey(t,!!n.multiple,o,!1):r!==!!n.multiple&&(n.defaultValue!=null?ey(t,!!n.multiple,n.defaultValue,!0):ey(t,!!n.multiple,n.multiple?[]:"",!1));}}}return;case 6:if(e.stateNode===null)throw Error(It(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:t=e.stateNode,t.hydrate&&(t.hydrate=!1,V7(t.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(uF=va(),v7(e.child,!0)),w7(e);return;case 19:w7(e);return;case 17:return;case 23:case 24:v7(e,e.memoizedState!==null);return;}throw Error(It(163))}function w7(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new Q5e),e.forEach(function(n){var i=hGe.bind(null,r,n);t.has(n)||(t.add(n),n.then(i,i))})}}function rGe(r,e){return r!==null&&(r=r.memoizedState,r===null||r.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var nGe=Math.ceil,zA=Tm.ReactCurrentDispatcher,sF=Tm.ReactCurrentOwner,Rr=0,Ga=null,mo=null,ga=0,Em=0,vj=Cp(0),$o=0,eC=null,my=0,yb=0,vy=0,lF=0,gj=null,uF=0,yj=1/0;function gy(){yj=va()+500}var er=null,BA=!1,_j=null,mc=null,Tp=!1,Jw=null,Bw=90,xj=[],wj=[],Tf=null,Qw=0,bj=null,vA=-1,Sf=0,gA=0,eb=null,yA=!1;function il(){return Rr&48?va():vA!==-1?vA:vA=va()}function xp(r){if(r=r.mode,!(r&2))return 1;if(!(r&4))return fy()===99?1:2;if(Sf===0&&(Sf=my),G5e.transition!==0){gA!==0&&(gA=gj!==null?gj.pendingLanes:0),r=Sf;var e=4186112&~gA;return e&=-e,e===0&&(r=4186112&~r,e=r&-r,e===0&&(e=8192)),e}return r=fy(),Rr&4&&r===98?r=EA(12,Sf):(r=WVe(r),r=EA(r,Sf)),r}function wp(r,e,t){if(50<Qw)throw Qw=0,bj=null,Error(It(185));if(r=tC(r,e),r===null)return null;WA(r,e,t),r===Ga&&(vy|=e,$o===4&&ay(r,ga));var n=fy();e===1?Rr&8&&!(Rr&48)?Sj(r):(Nl(r,t),Rr===0&&(gy(),yc())):(!(Rr&4)||n!==98&&n!==99||(Tf===null?Tf=new Set([r]):Tf.add(r)),Nl(r,t)),gj=r}function tC(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}function Nl(r,e){for(var t=r.callbackNode,n=r.suspendedLanes,i=r.pingedLanes,o=r.expirationTimes,a=r.pendingLanes;0<a;){var c=31-Ep(a),h=1<<c,d=o[c];if(d===-1){if(!(h&n)||h&i){d=e,$g(h);var v=ei;o[c]=10<=v?d+250:6<=v?d+5e3:-1}}else d<=e&&(r.expiredLanes|=h);a&=~h}if(n=ab(r,r===Ga?ga:0),e=ei,n===0)t!==null&&(t!==Mq&&ij(t),r.callbackNode=null,r.callbackPriority=0);else{if(t!==null){if(r.callbackPriority===e)return;t!==Mq&&ij(t)}e===15?(t=Sj.bind(null,r),bf===null?(bf=[t],mA=Yj(JA,yJ)):bf.push(t),t=Mq):e===14?t=cb(99,Sj.bind(null,r)):(t=ZVe(e),t=cb(t,BJ.bind(null,r))),r.callbackPriority=e,r.callbackNode=t}}function BJ(r){if(vA=-1,gA=Sf=0,Rr&48)throw Error(It(327));var e=r.callbackNode;if(Mp()&&r.callbackNode!==e)return null;var t=ab(r,r===Ga?ga:0);if(t===0)return null;var n=t,i=Rr;Rr|=16;var o=$J();(Ga!==r||ga!==n)&&(gy(),sy(r,n));do try{aGe();break}catch(c){GJ(r,c)}while(!0);if(Kj(),zA.current=o,Rr=i,mo!==null?n=0:(Ga=null,ga=0,n=$o),my&vy)sy(r,0);else if(n!==0){if(n===2&&(Rr|=64,r.hydrate&&(r.hydrate=!1,Wj(r.containerInfo)),t=K7(r),t!==0&&(n=Uw(r,t))),n===1)throw e=eC,sy(r,0),ay(r,t),Nl(r,va()),e;switch(r.finishedWork=r.current.alternate,r.finishedLanes=t,n){case 0:case 1:throw Error(It(345));case 2:mm(r);break;case 3:if(ay(r,t),(t&62914560)===t&&(n=uF+500-va(),10<n)){if(ab(r,0)!==0)break;if(i=r.suspendedLanes,(i&t)!==t){il(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=U9(mm.bind(null,r),n);break}mm(r);break;case 4:if(ay(r,t),(t&4186112)===t)break;for(n=r.eventTimes,i=-1;0<t;){var a=31-Ep(t);o=1<<a,a=n[a],a>i&&(i=a),t&=~o}if(t=i,t=va()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*nGe(t/1960))-t,10<t){r.timeoutHandle=U9(mm.bind(null,r),t);break}mm(r);break;case 5:mm(r);break;default:throw Error(It(329));}}return Nl(r,va()),r.callbackNode===e?BJ.bind(null,r):null}function ay(r,e){for(e&=~lF,e&=~vy,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-Ep(e),n=1<<t;r[t]=-1,e&=~n}}function Sj(r){if(Rr&48)throw Error(It(327));if(Mp(),r===Ga&&r.expiredLanes&ga){var e=ga,t=Uw(r,e);my&vy&&(e=ab(r,e),t=Uw(r,e))}else e=ab(r,0),t=Uw(r,e);if(r.tag!==0&&t===2&&(Rr|=64,r.hydrate&&(r.hydrate=!1,Wj(r.containerInfo)),e=K7(r),e!==0&&(t=Uw(r,e))),t===1)throw t=eC,sy(r,0),ay(r,e),Nl(r,va()),t;return r.finishedWork=r.current.alternate,r.finishedLanes=e,mm(r),Nl(r,va()),null}function iGe(){if(Tf!==null){var r=Tf;Tf=null,r.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,Nl(e,va())})}yc()}function UJ(r,e){var t=Rr;Rr|=1;try{return r(e)}finally{Rr=t,Rr===0&&(gy(),yc())}}function VJ(r,e){var t=Rr;Rr&=-2,Rr|=8;try{return r(e)}finally{Rr=t,Rr===0&&(gy(),yc())}}function uA(r,e){Fi(vj,Em),Em|=e,my|=e}function cF(){Em=vj.current,ui(vj)}function sy(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,j5e(t)),mo!==null)for(t=mo.return;t!==null;){var n=t;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&CA();break;case 3:hy(),ui(gs),ui(ya),eF();break;case 5:Qj(n);break;case 4:hy();break;case 13:ui(ji);break;case 19:ui(ji);break;case 10:Xj(n);break;case 23:case 24:cF();}t=t.return}Ga=r,mo=Ap(r.current,null),ga=Em=my=e,$o=0,eC=null,lF=vy=yb=0}function GJ(r,e){do{var t=mo;try{if(Kj(),Kw.current=FA,NA){for(var n=Gi.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}NA=!1}if(db=0,Go=ma=Gi=null,Xw=!1,sF.current=null,t===null||t.return===null){$o=1,eC=e,mo=null;break}e:{var o=r,a=t.return,c=t,h=e;if(e=ga,c.flags|=2048,c.firstEffect=c.lastEffect=null,h!==null&&typeof h=="object"&&typeof h.then=="function"){var d=h;if(!(c.mode&2)){var v=c.alternate;v?(c.updateQueue=v.updateQueue,c.memoizedState=v.memoizedState,c.lanes=v.lanes):(c.updateQueue=null,c.memoizedState=null)}var x=(ji.current&1)!==0,S=a;do{var T;if(T=S.tag===13){var L=S.memoizedState;if(L!==null)T=L.dehydrated!==null;else{var k=S.memoizedProps;T=k.fallback===void 0?!1:k.unstable_avoidThisFallback!==!0?!0:!x}}if(T){var R=S.updateQueue;if(R===null){var D=new Set;D.add(d),S.updateQueue=D}else R.add(d);if(!(S.mode&2)){if(S.flags|=64,c.flags|=16384,c.flags&=-2981,c.tag===1)if(c.alternate===null)c.tag=17;else{var j=yp(-1,1);j.tag=2,_p(c,j)}c.lanes|=1;break e}h=void 0,c=e;var B=o.pingCache;if(B===null?(B=o.pingCache=new J5e,h=new Set,B.set(d,h)):(h=B.get(d),h===void 0&&(h=new Set,B.set(d,h))),!h.has(c)){h.add(c);var $=fGe.bind(null,o,d,c);d.then($,$)}S.flags|=4096,S.lanes=e;break e}S=S.return}while(S!==null);h=Error((Qg(c.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}$o!==5&&($o=2),h=aF(h,c),S=a;do{switch(S.tag){case 3:o=h,S.flags|=4096,e&=-e,S.lanes|=e;var ee=jJ(S,o,e);Y9(S,ee);break e;case 1:o=h;var J=S.type,ie=S.stateNode;if(!(S.flags&64)&&(typeof J.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(mc===null||!mc.has(ie)))){S.flags|=4096,e&=-e,S.lanes|=e;var ue=FJ(S,o,e);Y9(S,ue);break e}}S=S.return}while(S!==null)}WJ(t)}catch(le){e=le,mo===t&&t!==null&&(mo=t=t.return);continue}break}while(!0)}function $J(){var r=zA.current;return zA.current=FA,r===null?FA:r}function Uw(r,e){var t=Rr;Rr|=16;var n=$J();Ga===r&&ga===e||sy(r,e);do try{oGe();break}catch(i){GJ(r,i)}while(!0);if(Kj(),Rr=t,zA.current=n,mo!==null)throw Error(It(261));return Ga=null,ga=0,$o}function oGe(){for(;mo!==null;)HJ(mo)}function aGe(){for(;mo!==null&&!B5e();)HJ(mo)}function HJ(r){var e=YJ(r.alternate,r,Em);r.memoizedProps=r.pendingProps,e===null?WJ(r):mo=e,sF.current=null}function WJ(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&2048){if(t=X5e(e),t!==null){t.flags&=2047,mo=t;return}r!==null&&(r.firstEffect=r.lastEffect=null,r.flags|=2048)}else{if(t=K5e(t,e,Em),t!==null){mo=t;return}if(t=e,t.tag!==24&&t.tag!==23||t.memoizedState===null||Em&1073741824||!(t.mode&4)){for(var n=0,i=t.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;t.childLanes=n}r!==null&&!(r.flags&2048)&&(r.firstEffect===null&&(r.firstEffect=e.firstEffect),e.lastEffect!==null&&(r.lastEffect!==null&&(r.lastEffect.nextEffect=e.firstEffect),r.lastEffect=e.lastEffect),1<e.flags&&(r.lastEffect!==null?r.lastEffect.nextEffect=e:r.firstEffect=e,r.lastEffect=e))}if(e=e.sibling,e!==null){mo=e;return}mo=e=r}while(e!==null);$o===0&&($o=5)}function mm(r){var e=fy();return Sm(99,sGe.bind(null,r,e)),null}function sGe(r,e){do Mp();while(Jw!==null);if(Rr&48)throw Error(It(327));var t=r.finishedWork;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(It(177));r.callbackNode=null;var n=t.lanes|t.childLanes,i=n,o=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;for(var a=r.eventTimes,c=r.expirationTimes;0<o;){var h=31-Ep(o),d=1<<h;i[h]=0,a[h]=-1,c[h]=-1,o&=~d}if(Tf!==null&&!(n&24)&&Tf.has(r)&&Tf.delete(r),r===Ga&&(mo=Ga=null,ga=0),1<t.flags?t.lastEffect!==null?(t.lastEffect.nextEffect=t,n=t.firstEffect):n=t:n=t.firstEffect,n!==null){if(i=Rr,Rr|=32,sF.current=null,Tq=fA,a=k9(),Qq(a)){if("selectionStart"in a)c={start:a.selectionStart,end:a.selectionEnd};else e:if(c=(c=a.ownerDocument)&&c.defaultView||window,(d=c.getSelection&&c.getSelection())&&d.rangeCount!==0){c=d.anchorNode,o=d.anchorOffset,h=d.focusNode,d=d.focusOffset;try{c.nodeType,h.nodeType}catch(le){c=null;break e}var v=0,x=-1,S=-1,T=0,L=0,k=a,R=null;t:for(;;){for(var D;k!==c||o!==0&&k.nodeType!==3||(x=v+o),k!==h||d!==0&&k.nodeType!==3||(S=v+d),k.nodeType===3&&(v+=k.nodeValue.length),(D=k.firstChild)!==null;)R=k,k=D;for(;;){if(k===a)break t;if(R===c&&++T===o&&(x=v),R===h&&++L===d&&(S=v),(D=k.nextSibling)!==null)break;k=R,R=k.parentNode}k=D}c=x===-1||S===-1?null:{start:x,end:S}}else c=null;c=c||{start:0,end:0}}else c=null;Aq={focusedElem:a,selectionRange:c},fA=!1,eb=null,yA=!1,er=n;do try{lGe()}catch(le){if(er===null)throw Error(It(330));bp(er,le),er=er.nextEffect}while(er!==null);eb=null,er=n;do try{for(a=r;er!==null;){var j=er.flags;if(j&16&&rb(er.stateNode,""),j&128){var B=er.alternate;if(B!==null){var $=B.ref;$!==null&&(typeof $=="function"?$(null):$.current=null)}}switch(j&1038){case 2:x7(er),er.flags&=-3;break;case 6:x7(er),er.flags&=-3,Dq(er.alternate,er);break;case 1024:er.flags&=-1025;break;case 1028:er.flags&=-1025,Dq(er.alternate,er);break;case 4:Dq(er.alternate,er);break;case 8:c=er,zJ(a,c);var ee=c.alternate;y7(c),ee!==null&&y7(ee);}er=er.nextEffect}}catch(le){if(er===null)throw Error(It(330));bp(er,le),er=er.nextEffect}while(er!==null);if($=Aq,B=k9(),j=$.focusedElem,a=$.selectionRange,B!==j&&j&&j.ownerDocument&&iJ(j.ownerDocument.documentElement,j)){for(a!==null&&Qq(j)&&(B=a.start,$=a.end,$===void 0&&($=B),("selectionStart"in j)?(j.selectionStart=B,j.selectionEnd=Math.min($,j.value.length)):($=(B=j.ownerDocument||document)&&B.defaultView||window,$.getSelection&&($=$.getSelection(),c=j.textContent.length,ee=Math.min(a.start,c),a=a.end===void 0?ee:Math.min(a.end,c),!$.extend&&ee>a&&(c=a,a=ee,ee=c),c=N9(j,ee),o=N9(j,a),c&&o&&($.rangeCount!==1||$.anchorNode!==c.node||$.anchorOffset!==c.offset||$.focusNode!==o.node||$.focusOffset!==o.offset)&&(B=B.createRange(),B.setStart(c.node,c.offset),$.removeAllRanges(),ee>a?($.addRange(B),$.extend(o.node,o.offset)):(B.setEnd(o.node,o.offset),$.addRange(B)))))),B=[],$=j;$=$.parentNode;)$.nodeType===1&&B.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<B.length;j++)$=B[j],$.element.scrollLeft=$.left,$.element.scrollTop=$.top}fA=!!Tq,Aq=Tq=null,r.current=t,er=n;do try{for(j=r;er!==null;){var J=er.flags;if(J&36&&tGe(j,er.alternate,er),J&128){B=void 0;var ie=er.ref;if(ie!==null){var ue=er.stateNode;switch(er.tag){case 5:B=ue;break;default:B=ue;}typeof ie=="function"?ie(B):ie.current=B}}er=er.nextEffect}}catch(le){if(er===null)throw Error(It(330));bp(er,le),er=er.nextEffect}while(er!==null);er=null,V5e(),Rr=i}else r.current=t;if(Tp)Tp=!1,Jw=r,Bw=e;else for(er=n;er!==null;)e=er.nextEffect,er.nextEffect=null,er.flags&8&&(J=er,J.sibling=null,J.stateNode=null),er=e;if(n=r.pendingLanes,n===0&&(mc=null),n===1?r===bj?Qw++:(Qw=0,bj=r):Qw=0,t=t.stateNode,wm&&typeof wm.onCommitFiberRoot=="function")try{wm.onCommitFiberRoot(Zj,t,void 0,(t.current.flags&64)===64)}catch(le){}if(Nl(r,va()),BA)throw BA=!1,r=_j,_j=null,r;return Rr&8||yc(),null}function lGe(){for(;er!==null;){var r=er.alternate;yA||eb===null||(er.flags&8?b9(er,eb)&&(yA=!0):er.tag===13&&rGe(r,er)&&b9(er,eb)&&(yA=!0));var e=er.flags;e&256&&eGe(r,er),!(e&512)||Tp||(Tp=!0,cb(97,function(){return Mp(),null})),er=er.nextEffect}}function Mp(){if(Bw!==90){var r=97<Bw?97:Bw;return Bw=90,Sm(r,cGe)}return!1}function uGe(r,e){xj.push(e,r),Tp||(Tp=!0,cb(97,function(){return Mp(),null}))}function ZJ(r,e){wj.push(e,r),Tp||(Tp=!0,cb(97,function(){return Mp(),null}))}function cGe(){if(Jw===null)return!1;var r=Jw;if(Jw=null,Rr&48)throw Error(It(331));var e=Rr;Rr|=32;var t=wj;wj=[];for(var n=0;n<t.length;n+=2){var i=t[n],o=t[n+1],a=i.destroy;if(i.destroy=void 0,typeof a=="function")try{a()}catch(h){if(o===null)throw Error(It(330));bp(o,h)}}for(t=xj,xj=[],n=0;n<t.length;n+=2){i=t[n],o=t[n+1];try{var c=i.create;i.destroy=c()}catch(h){if(o===null)throw Error(It(330));bp(o,h)}}for(c=r.current.firstEffect;c!==null;)r=c.nextEffect,c.nextEffect=null,c.flags&8&&(c.sibling=null,c.stateNode=null),c=r;return Rr=e,yc(),!0}function b7(r,e,t){e=aF(t,e),e=jJ(r,e,1),_p(r,e),e=il(),r=tC(r,1),r!==null&&(WA(r,1,e),Nl(r,e))}function bp(r,e){if(r.tag===3)b7(r,r,e);else for(var t=r.return;t!==null;){if(t.tag===3){b7(t,r,e);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(mc===null||!mc.has(n))){r=aF(e,r);var i=FJ(t,r,1);if(_p(t,i),i=il(),t=tC(t,1),t!==null)WA(t,1,i),Nl(t,i);else if(typeof n.componentDidCatch=="function"&&(mc===null||!mc.has(n)))try{n.componentDidCatch(e,r)}catch(o){}break}}t=t.return}}function fGe(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=il(),r.pingedLanes|=r.suspendedLanes&t,Ga===r&&(ga&t)===t&&($o===4||$o===3&&(ga&62914560)===ga&&500>va()-uF?sy(r,0):lF|=t),Nl(r,e)}function hGe(r,e){var t=r.stateNode;t!==null&&t.delete(e),e=0,e===0&&(e=r.mode,e&2?e&4?(Sf===0&&(Sf=my),e=Hg(62914560&~Sf),e===0&&(e=4194304)):e=fy()===99?1:2:e=1),t=il(),r=tC(r,e),r!==null&&(WA(r,e,t),Nl(r,t))}var YJ;YJ=function(r,e,t){var n=e.lanes;if(r!==null){if(r.memoizedProps!==e.pendingProps||gs.current)Ou=!0;else if(t&n)Ou=!!(r.flags&16384);else{switch(Ou=!1,e.tag){case 3:l7(e),Pq();break;case 5:Q9(e);break;case 1:ys(e.type)&&dA(e);break;case 4:sj(e,e.stateNode.containerInfo);break;case 10:n=e.memoizedProps.value;var i=e.type._context;Fi(MA,i._currentValue),i._currentValue=n;break;case 13:if(e.memoizedState!==null)return t&e.child.childLanes?u7(r,e,t):(Fi(ji,ji.current&1),e=If(r,e,t),e!==null?e.sibling:null);Fi(ji,ji.current&1);break;case 19:if(n=(t&e.childLanes)!==0,r.flags&64){if(n)return d7(r,e,t);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Fi(ji,ji.current),n)break;return null;case 23:case 24:return e.lanes=0,Oq(r,e,t);}return If(r,e,t)}}else Ou=!1;switch(e.lanes=0,e.tag){case 2:if(n=e.type,r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2),r=e.pendingProps,i=cy(e,ya.current),iy(e,t),i=rF(null,e,n,r,i,t),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,ys(n)){var o=!0;dA(e)}else o=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Jj(e);var a=n.getDerivedStateFromProps;typeof a=="function"&&OA(e,n,a,r),i.updater=QA,e.stateNode=i,i._reactInternals=e,aj(e,n,r,t),e=fj(null,e,n,!0,o,t)}else e.tag=0,vs(null,e,i,t),e=e.child;return e;case 16:i=e.elementType;e:{switch(r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2),r=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=dGe(i),r=Pu(i,r),o){case 0:e=cj(null,e,i,r,t);break e;case 1:e=s7(null,e,i,r,t);break e;case 11:e=o7(null,e,i,r,t);break e;case 14:e=a7(null,e,i,Pu(i.type,r),n,t);break e;}throw Error(It(306,i,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Pu(n,i),cj(r,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Pu(n,i),s7(r,e,n,i,t);case 3:if(l7(e),n=e.updateQueue,r===null||n===null)throw Error(It(282));if(n=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,xJ(r,e),fb(e,n,null,t),n=e.memoizedState.element,n===i)Pq(),e=If(r,e,t);else{if(i=e.stateNode,(o=i.hydrate)&&(dp=ny(e.stateNode.containerInfo.firstChild),Ef=e,o=gc=!0),o){if(r=i.mutableSourceEagerHydrationData,r!=null)for(i=0;i<r.length;i+=2)o=r[i],o._workInProgressVersionPrimary=r[i+1],oy.push(o);for(t=EJ(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|1024,t=t.sibling}else vs(r,e,n,t),Pq();e=e.child}return e;case 5:return Q9(e),r===null&&lj(e),n=e.type,i=e.pendingProps,o=r!==null?r.memoizedProps:null,a=i.children,rj(n,i)?a=null:o!==null&&rj(n,o)&&(e.flags|=16),DJ(r,e),vs(r,e,a,t),e.child;case 6:return r===null&&lj(e),null;case 13:return u7(r,e,t);case 4:return sj(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=LA(e,null,n,t):vs(r,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Pu(n,i),o7(r,e,n,i,t);case 7:return vs(r,e,e.pendingProps,t),e.child;case 8:return vs(r,e,e.pendingProps.children,t),e.child;case 12:return vs(r,e,e.pendingProps.children,t),e.child;case 10:e:{n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value;var c=e.type._context;if(Fi(MA,c._currentValue),c._currentValue=o,a!==null)if(c=a.value,o=Pl(c,o)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(c,o):1073741823)|0,o===0){if(a.children===i.children&&!gs.current){e=If(r,e,t);break e}}else for(c=e.child,c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){a=c.child;for(var d=h.firstContext;d!==null;){if(d.context===n&&d.observedBits&o){c.tag===1&&(d=yp(-1,t&-t),d.tag=2,_p(c,d)),c.lanes|=t,d=c.alternate,d!==null&&(d.lanes|=t),_J(c.return,t),h.lanes|=t;break}d=d.next}}else a=c.tag===10&&c.type===e.type?null:c.child;if(a!==null)a.return=c;else for(a=c;a!==null;){if(a===e){a=null;break}if(c=a.sibling,c!==null){c.return=a.return,a=c;break}a=a.return}c=a}vs(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,o=e.pendingProps,n=o.children,iy(e,t),i=Dl(i,o.unstable_observedBits),n=n(i),e.flags|=1,vs(r,e,n,t),e.child;case 14:return i=e.type,o=Pu(i,e.pendingProps),o=Pu(i.type,o),a7(r,e,i,o,n,t);case 15:return LJ(r,e,e.type,e.pendingProps,n,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Pu(n,i),r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,ys(n)?(r=!0,dA(e)):r=!1,iy(e,t),bJ(e,n,i),aj(e,n,i,t),fj(null,e,n,!0,r,t);case 19:return d7(r,e,t);case 23:return Oq(r,e,t);case 24:return Oq(r,e,t);}throw Error(It(156,e.tag))};function pGe(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(r,e,t,n){return new pGe(r,e,t,n)}function fF(r){return r=r.prototype,!(!r||!r.isReactComponent)}function dGe(r){if(typeof r=="function")return fF(r)?1:0;if(r!=null){if(r=r.$$typeof,r===GA)return 11;if(r===$A)return 14}return 2}function Ap(r,e){var t=r.alternate;return t===null?(t=Ol(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.nextEffect=null,t.firstEffect=null,t.lastEffect=null),t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function _A(r,e,t,n,i,o){var a=2;if(n=r,typeof r=="function")fF(r)&&(a=1);else if(typeof r=="string")a=5;else e:switch(r){case fp:return ly(t.children,i,o,e);case I7:a=8,i|=16;break;case Aj:a=8,i|=1;break;case Vw:return r=Ol(12,t,e,i|8),r.elementType=Vw,r.type=Vw,r.lanes=o,r;case Gw:return r=Ol(13,t,e,i),r.type=Gw,r.elementType=Gw,r.lanes=o,r;case xA:return r=Ol(19,t,e,i),r.elementType=xA,r.lanes=o,r;case Lj:return hF(t,i,o,e);case jq:return r=Ol(24,t,e,i),r.elementType=jq,r.lanes=o,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Cj:a=10;break e;case Mj:a=9;break e;case GA:a=11;break e;case $A:a=14;break e;case Rj:a=16,n=null;break e;case Pj:a=22;break e;}throw Error(It(130,r==null?r:typeof r,""));}return e=Ol(a,t,e,i),e.elementType=r,e.type=n,e.lanes=o,e}function ly(r,e,t,n){return r=Ol(7,r,n,e),r.lanes=t,r}function hF(r,e,t,n){return r=Ol(23,r,n,e),r.elementType=Lj,r.lanes=t,r}function Nq(r,e,t){return r=Ol(6,r,null,e),r.lanes=t,r}function kq(r,e,t){return e=Ol(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function mGe(r,e,t){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=t,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=xq(0),this.expirationTimes=xq(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xq(0),this.mutableSourceEagerHydrationData=null}function vGe(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vm,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function UA(r,e,t,n){var i=e.current,o=il(),a=xp(i);e:if(t){t=t._reactInternals;t:{if(Am(t)!==t||t.tag!==1)throw Error(It(170));var c=t;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(ys(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(c!==null);throw Error(It(171))}if(t.tag===1){var h=t.type;if(ys(h)){t=hJ(t,h,c);break e}}t=c}else t=Ip;return e.context===null?e.context=t:e.pendingContext=t,e=yp(o,a),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),_p(i,e),wp(i,a,o),a}function qq(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode;}}function S7(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function pF(r,e){S7(r,e),(r=r.alternate)&&S7(r,e)}function gGe(){return null}function dF(r,e,t){var n=t!=null&&t.hydrationOptions!=null&&t.hydrationOptions.mutableSources||null;if(t=new mGe(r,e,t!=null&&t.hydrate===!0),e=Ol(3,null,null,e===2?7:e===1?3:0),t.current=e,e.stateNode=t,Jj(e),r[dy]=t.current,sJ(r.nodeType===8?r.parentNode:r),n)for(r=0;r<n.length;r++){e=n[r];var i=e._getVersion;i=i(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,i]:t.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=t}dF.prototype.render=function(r){UA(r,this._internalRoot,null,null)};dF.prototype.unmount=function(){var r=this._internalRoot,e=r.containerInfo;UA(null,r,null,function(){e[dy]=null})};function _b(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function yGe(r,e){if(e||(e=r?r.nodeType===9?r.documentElement:r.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var t;t=r.lastChild;)r.removeChild(t);return new dF(r,0,e?{hydrate:!0}:void 0)}function rC(r,e,t,n,i){var o=t._reactRootContainer;if(o){var a=o._internalRoot;if(typeof i=="function"){var c=i;i=function(){var d=qq(a);c.call(d)}}UA(e,a,r,i)}else{if(o=t._reactRootContainer=yGe(t,n),a=o._internalRoot,typeof i=="function"){var h=i;i=function(){var d=qq(a);h.call(d)}}VJ(function(){UA(e,a,r,i)})}return qq(a)}z7=function(r){if(r.tag===13){var e=il();wp(r,4,e),pF(r,4)}};jj=function(r){if(r.tag===13){var e=il();wp(r,67108864,e),pF(r,67108864)}};B7=function(r){if(r.tag===13){var e=il(),t=xp(r);wp(r,t,e),pF(r,t)}};U7=function(r,e){return e()};Zq=function(r,e,t){switch(e){case"input":if(zq(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+"][type=\"radio\"]"),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var i=XA(n);if(!i)throw Error(It(90));A7(n),zq(n,i)}}}break;case"textarea":M7(r,t);break;case"select":e=t.value,e!=null&&ey(r,!!t.multiple,e,!1);}};Nj=UJ;k7=function(r,e,t,n,i){var o=Rr;Rr|=4;try{return Sm(98,r.bind(null,e,t,n,i))}finally{Rr=o,Rr===0&&(gy(),yc())}};kj=function(){!(Rr&49)&&(iGe(),Mp())};q7=function(r,e){var t=Rr;Rr|=2;try{return r(e)}finally{Rr=t,Rr===0&&(gy(),yc())}};function KJ(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_b(e))throw Error(It(200));return vGe(r,e,null,t)}var _Ge={Events:[vb,Kg,XA,D7,N7,Mp,{current:!1}]},kw={findFiberByHostInstance:ym,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},xGe={bundleType:kw.bundleType,version:kw.version,rendererPackageName:kw.rendererPackageName,rendererConfig:kw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tm.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=F7(r),r===null?null:r.stateNode},findFiberByHostInstance:kw.findFiberByHostInstance||gGe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(qw=__REACT_DEVTOOLS_GLOBAL_HOOK__,!qw.isDisabled&&qw.supportsFiber))try{Zj=qw.inject(xGe),wm=qw}catch(r){}var qw;kl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_Ge;kl.createPortal=KJ;kl.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(It(188)):Error(It(268,Object.keys(r)));return r=F7(e),r=r===null?null:r.stateNode,r};kl.flushSync=function(r,e){var t=Rr;if(t&48)return r(e);Rr|=1;try{if(r)return Sm(99,r.bind(null,e))}finally{Rr=t,yc()}};kl.hydrate=function(r,e,t){if(!_b(e))throw Error(It(200));return rC(null,r,e,!0,t)};kl.render=function(r,e,t){if(!_b(e))throw Error(It(200));return rC(null,r,e,!1,t)};kl.unmountComponentAtNode=function(r){if(!_b(r))throw Error(It(40));return r._reactRootContainer?(VJ(function(){rC(null,null,r,!1,function(){r._reactRootContainer=null,r[dy]=null})}),!0):!1};kl.unstable_batchedUpdates=UJ;kl.unstable_createPortal=function(r,e){return KJ(r,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};kl.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!_b(t))throw Error(It(200));if(r==null||r._reactInternals===void 0)throw Error(It(38));return rC(r,e,t,!1,n)};kl.version="17.0.2"});var vo=A((rnr,QJ)=>{"use strict";function JJ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JJ)}catch(r){console.error(r)}}JJ(),QJ.exports=XJ()});var Ht=A((eQ,tQ)=>{"use strict";var nC=function(r){return r&&r.Math===Math&&r};tQ.exports=nC(typeof globalThis=="object"&&globalThis)||nC(typeof window=="object"&&window)||nC(typeof self=="object"&&self)||nC(typeof global=="object"&&global)||function(){return this}()||eQ||Function("return this")()});var ft=A((nnr,rQ)=>{"use strict";rQ.exports=function(r){try{return!!r()}catch(e){return!0}}});var fr=A((inr,nQ)=>{"use strict";var wGe=ft();nQ.exports=!wGe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var yy=A((onr,iQ)=>{"use strict";var bGe=ft();iQ.exports=!bGe(function(){var r=function(){}.bind();return typeof r!="function"||r.hasOwnProperty("prototype")})});var Rt=A((anr,oQ)=>{"use strict";var SGe=yy(),iC=Function.prototype.call;oQ.exports=SGe?iC.bind(iC):function(){return iC.apply(iC,arguments)}});var xb=A(lQ=>{"use strict";var aQ={}.propertyIsEnumerable,sQ=Object.getOwnPropertyDescriptor,EGe=sQ&&!aQ.call({1:2},1);lQ.f=EGe?function(e){var t=sQ(this,e);return!!t&&t.enumerable}:aQ});var _s=A((lnr,uQ)=>{"use strict";uQ.exports=function(r,e){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:e}}});var rt=A((unr,hQ)=>{"use strict";var cQ=yy(),fQ=Function.prototype,mF=fQ.call,IGe=cQ&&fQ.bind.bind(mF,mF);hQ.exports=cQ?IGe:function(r){return function(){return mF.apply(r,arguments)}}});var Wo=A((cnr,dQ)=>{"use strict";var pQ=rt(),TGe=pQ({}.toString),AGe=pQ("".slice);dQ.exports=function(r){return AGe(TGe(r),8,-1)}});var Cf=A((fnr,mQ)=>{"use strict";var CGe=rt(),MGe=ft(),RGe=Wo(),vF=Object,PGe=CGe("".split);mQ.exports=MGe(function(){return!vF("z").propertyIsEnumerable(0)})?function(r){return RGe(r)==="String"?PGe(r,""):vF(r)}:vF});var $i=A((hnr,vQ)=>{"use strict";vQ.exports=function(r){return r==null}});var ti=A((pnr,gQ)=>{"use strict";var OGe=$i(),LGe=TypeError;gQ.exports=function(r){if(OGe(r))throw new LGe("Can't call method on "+r);return r}});var ro=A((dnr,yQ)=>{"use strict";var DGe=Cf(),NGe=ti();yQ.exports=function(r){return DGe(NGe(r))}});var yF=A((mnr,_Q)=>{"use strict";var gF=typeof document=="object"&&document.all,kGe=typeof gF=="undefined"&&gF!==void 0;_Q.exports={all:gF,IS_HTMLDDA:kGe}});var Er=A((vnr,wQ)=>{"use strict";var xQ=yF(),qGe=xQ.all;wQ.exports=xQ.IS_HTMLDDA?function(r){return typeof r=="function"||r===qGe}:function(r){return typeof r=="function"}});var Ir=A((gnr,EQ)=>{"use strict";var bQ=Er(),SQ=yF(),jGe=SQ.all;EQ.exports=SQ.IS_HTMLDDA?function(r){return typeof r=="object"?r!==null:bQ(r)||r===jGe}:function(r){return typeof r=="object"?r!==null:bQ(r)}});var _r=A((ynr,IQ)=>{"use strict";var _F=Ht(),FGe=Er(),zGe=function(r){return FGe(r)?r:void 0};IQ.exports=function(r,e){return arguments.length<2?zGe(_F[r]):_F[r]&&_F[r][e]}});var _a=A((_nr,TQ)=>{"use strict";var BGe=rt();TQ.exports=BGe({}.isPrototypeOf)});var _c=A((xnr,AQ)=>{"use strict";AQ.exports=typeof navigator!="undefined"&&String(navigator.userAgent)||""});var xc=A((wnr,LQ)=>{"use strict";var OQ=Ht(),xF=_c(),CQ=OQ.process,MQ=OQ.Deno,RQ=CQ&&CQ.versions||MQ&&MQ.version,PQ=RQ&&RQ.v8,Lu,oC;PQ&&(Lu=PQ.split("."),oC=Lu[0]>0&&Lu[0]<4?1:+(Lu[0]+Lu[1]));!oC&&xF&&(Lu=xF.match(/Edge\/(\d+)/),(!Lu||Lu[1]>=74)&&(Lu=xF.match(/Chrome\/(\d+)/),Lu&&(oC=+Lu[1])));LQ.exports=oC});var Rp=A((bnr,NQ)=>{"use strict";var DQ=xc(),UGe=ft(),VGe=Ht(),GGe=VGe.String;NQ.exports=!!Object.getOwnPropertySymbols&&!UGe(function(){var r=Symbol("symbol detection");return!GGe(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&DQ&&DQ<41})});var wF=A((Snr,kQ)=>{"use strict";var $Ge=Rp();kQ.exports=$Ge&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var Mf=A((Enr,qQ)=>{"use strict";var HGe=_r(),WGe=Er(),ZGe=_a(),YGe=wF(),KGe=Object;qQ.exports=YGe?function(r){return typeof r=="symbol"}:function(r){var e=HGe("Symbol");return WGe(e)&&ZGe(e.prototype,KGe(r))}});var Pp=A((Inr,jQ)=>{"use strict";var XGe=String;jQ.exports=function(r){try{return XGe(r)}catch(e){return"Object"}}});var xr=A((Tnr,FQ)=>{"use strict";var JGe=Er(),QGe=Pp(),e$e=TypeError;FQ.exports=function(r){if(JGe(r))return r;throw new e$e(QGe(r)+" is not a function")}});var zi=A((Anr,zQ)=>{"use strict";var t$e=xr(),r$e=$i();zQ.exports=function(r,e){var t=r[e];return r$e(t)?void 0:t$e(t)}});var IF=A((Cnr,BQ)=>{"use strict";var bF=Rt(),SF=Er(),EF=Ir(),n$e=TypeError;BQ.exports=function(r,e){var t,n;if(e==="string"&&SF(t=r.toString)&&!EF(n=bF(t,r))||SF(t=r.valueOf)&&!EF(n=bF(t,r))||e!=="string"&&SF(t=r.toString)&&!EF(n=bF(t,r)))return n;throw new n$e("Can't convert object to primitive value")}});var Vr=A((Mnr,UQ)=>{"use strict";UQ.exports=!1});var aC=A((Rnr,GQ)=>{"use strict";var VQ=Ht(),i$e=Object.defineProperty;GQ.exports=function(r,e){try{i$e(VQ,r,{value:e,configurable:!0,writable:!0})}catch(t){VQ[r]=e}return e}});var wb=A((Pnr,HQ)=>{"use strict";var o$e=Ht(),a$e=aC(),$Q="__core-js_shared__",s$e=o$e[$Q]||a$e($Q,{});HQ.exports=s$e});var wc=A((Onr,ZQ)=>{"use strict";var l$e=Vr(),WQ=wb();(ZQ.exports=function(r,e){return WQ[r]||(WQ[r]=e!==void 0?e:{})})("versions",[]).push({version:"3.33.0",mode:l$e?"pure":"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var Gr=A((Lnr,YQ)=>{"use strict";var u$e=ti(),c$e=Object;YQ.exports=function(r){return c$e(u$e(r))}});var qr=A((Dnr,KQ)=>{"use strict";var f$e=rt(),h$e=Gr(),p$e=f$e({}.hasOwnProperty);KQ.exports=Object.hasOwn||function(e,t){return p$e(h$e(e),t)}});var Op=A((Nnr,XQ)=>{"use strict";var d$e=rt(),m$e=0,v$e=Math.random(),g$e=d$e(1 .toString);XQ.exports=function(r){return"Symbol("+(r===void 0?"":r)+")_"+g$e(++m$e+v$e,36)}});var hr=A((knr,QQ)=>{"use strict";var y$e=Ht(),_$e=wc(),JQ=qr(),x$e=Op(),w$e=Rp(),b$e=wF(),_y=y$e.Symbol,TF=_$e("wks"),S$e=b$e?_y.for||_y:_y&&_y.withoutSetter||x$e;QQ.exports=function(r){return JQ(TF,r)||(TF[r]=w$e&&JQ(_y,r)?_y[r]:S$e("Symbol."+r)),TF[r]}});var bb=A((qnr,ree)=>{"use strict";var E$e=Rt(),eee=Ir(),tee=Mf(),I$e=zi(),T$e=IF(),A$e=hr(),C$e=TypeError,M$e=A$e("toPrimitive");ree.exports=function(r,e){if(!eee(r)||tee(r))return r;var t=I$e(r,M$e),n;if(t){if(e===void 0&&(e="default"),n=E$e(t,r,e),!eee(n)||tee(n))return n;throw new C$e("Can't convert object to primitive value")}return e===void 0&&(e="number"),T$e(r,e)}});var Du=A((jnr,nee)=>{"use strict";var R$e=bb(),P$e=Mf();nee.exports=function(r){var e=R$e(r,"string");return P$e(e)?e:e+""}});var Sb=A((Fnr,oee)=>{"use strict";var O$e=Ht(),iee=Ir(),AF=O$e.document,L$e=iee(AF)&&iee(AF.createElement);oee.exports=function(r){return L$e?AF.createElement(r):{}}});var CF=A((znr,aee)=>{"use strict";var D$e=fr(),N$e=ft(),k$e=Sb();aee.exports=!D$e&&!N$e(function(){return Object.defineProperty(k$e("div"),"a",{get:function(){return 7}}).a!==7})});var go=A(lee=>{"use strict";var q$e=fr(),j$e=Rt(),F$e=xb(),z$e=_s(),B$e=ro(),U$e=Du(),V$e=qr(),G$e=CF(),see=Object.getOwnPropertyDescriptor;lee.f=q$e?see:function(e,t){if(e=B$e(e),t=U$e(t),G$e)try{return see(e,t)}catch(n){}if(V$e(e,t))return z$e(!j$e(F$e.f,e,t),e[t])}});var MF=A((Unr,uee)=>{"use strict";var $$e=fr(),H$e=ft();uee.exports=$$e&&H$e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var Lt=A((Vnr,cee)=>{"use strict";var W$e=Ir(),Z$e=String,Y$e=TypeError;cee.exports=function(r){if(W$e(r))return r;throw new Y$e(Z$e(r)+" is not an object")}});var Zn=A(hee=>{"use strict";var K$e=fr(),X$e=CF(),J$e=MF(),sC=Lt(),fee=Du(),Q$e=TypeError,RF=Object.defineProperty,e6e=Object.getOwnPropertyDescriptor,PF="enumerable",OF="configurable",LF="writable";hee.f=K$e?J$e?function(e,t,n){if(sC(e),t=fee(t),sC(n),typeof e=="function"&&t==="prototype"&&"value"in n&&LF in n&&!n[LF]){var i=e6e(e,t);i&&i[LF]&&(e[t]=n.value,n={configurable:OF in n?n[OF]:i[OF],enumerable:PF in n?n[PF]:i[PF],writable:!1})}return RF(e,t,n)}:RF:function(e,t,n){if(sC(e),t=fee(t),sC(n),X$e)try{return RF(e,t,n)}catch(i){}if("get"in n||"set"in n)throw new Q$e("Accessors not supported");return"value"in n&&(e[t]=n.value),e}});var Hi=A(($nr,pee)=>{"use strict";var t6e=fr(),r6e=Zn(),n6e=_s();pee.exports=t6e?function(r,e,t){return r6e.f(r,e,n6e(1,t))}:function(r,e,t){return r[e]=t,r}});var Mm=A((Hnr,mee)=>{"use strict";var DF=fr(),i6e=qr(),dee=Function.prototype,o6e=DF&&Object.getOwnPropertyDescriptor,NF=i6e(dee,"name"),a6e=NF&&function(){}.name==="something",s6e=NF&&(!DF||DF&&o6e(dee,"name").configurable);mee.exports={EXISTS:NF,PROPER:a6e,CONFIGURABLE:s6e}});var Eb=A((Wnr,vee)=>{"use strict";var l6e=rt(),u6e=Er(),kF=wb(),c6e=l6e(Function.toString);u6e(kF.inspectSource)||(kF.inspectSource=function(r){return c6e(r)});vee.exports=kF.inspectSource});var qF=A((Znr,yee)=>{"use strict";var f6e=Ht(),h6e=Er(),gee=f6e.WeakMap;yee.exports=h6e(gee)&&/native code/.test(String(gee))});var Ib=A((Ynr,xee)=>{"use strict";var p6e=wc(),d6e=Op(),_ee=p6e("keys");xee.exports=function(r){return _ee[r]||(_ee[r]=d6e(r))}});var xy=A((Knr,wee)=>{"use strict";wee.exports={}});var vn=A((Xnr,Eee)=>{"use strict";var m6e=qF(),See=Ht(),v6e=Ir(),g6e=Hi(),jF=qr(),FF=wb(),y6e=Ib(),_6e=xy(),bee="Object already initialized",zF=See.TypeError,x6e=See.WeakMap,lC,Tb,uC,w6e=function(r){return uC(r)?Tb(r):lC(r,{})},b6e=function(r){return function(e){var t;if(!v6e(e)||(t=Tb(e)).type!==r)throw new zF("Incompatible receiver, "+r+" required");return t}};m6e||FF.state?(Nu=FF.state||(FF.state=new x6e),Nu.get=Nu.get,Nu.has=Nu.has,Nu.set=Nu.set,lC=function(r,e){if(Nu.has(r))throw new zF(bee);return e.facade=r,Nu.set(r,e),e},Tb=function(r){return Nu.get(r)||{}},uC=function(r){return Nu.has(r)}):(Rm=y6e("state"),_6e[Rm]=!0,lC=function(r,e){if(jF(r,Rm))throw new zF(bee);return e.facade=r,g6e(r,Rm,e),e},Tb=function(r){return jF(r,Rm)?r[Rm]:{}},uC=function(r){return jF(r,Rm)});var Nu,Rm;Eee.exports={set:lC,get:Tb,has:uC,enforce:w6e,getterFor:b6e}});var Ab=A((Jnr,Aee)=>{"use strict";var UF=rt(),S6e=ft(),E6e=Er(),cC=qr(),BF=fr(),I6e=Mm().CONFIGURABLE,T6e=Eb(),Tee=vn(),A6e=Tee.enforce,C6e=Tee.get,Iee=String,fC=Object.defineProperty,M6e=UF("".slice),R6e=UF("".replace),P6e=UF([].join),O6e=BF&&!S6e(function(){return fC(function(){},"length",{value:8}).length!==8}),L6e=String(String).split("String"),D6e=Aee.exports=function(r,e,t){M6e(Iee(e),0,7)==="Symbol("&&(e="["+R6e(Iee(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!cC(r,"name")||I6e&&r.name!==e)&&(BF?fC(r,"name",{value:e,configurable:!0}):r.name=e),O6e&&t&&cC(t,"arity")&&r.length!==t.arity&&fC(r,"length",{value:t.arity});try{t&&cC(t,"constructor")&&t.constructor?BF&&fC(r,"prototype",{writable:!1}):r.prototype&&(r.prototype=void 0)}catch(i){}var n=A6e(r);return cC(n,"source")||(n.source=P6e(L6e,typeof e=="string"?e:"")),r};Function.prototype.toString=D6e(function(){return E6e(this)&&C6e(this).source||T6e(this)},"toString")});var En=A((Qnr,Cee)=>{"use strict";var N6e=Er(),k6e=Zn(),q6e=Ab(),j6e=aC();Cee.exports=function(r,e,t,n){n||(n={});var i=n.enumerable,o=n.name!==void 0?n.name:e;if(N6e(t)&&q6e(t,o,n),n.global)i?r[e]=t:j6e(e,t);else{try{n.unsafe?r[e]&&(i=!0):delete r[e]}catch(a){}i?r[e]=t:k6e.f(r,e,{value:t,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return r}});var VF=A((eir,Mee)=>{"use strict";var F6e=Math.ceil,z6e=Math.floor;Mee.exports=Math.trunc||function(e){var t=+e;return(t>0?z6e:F6e)(t)}});var ri=A((tir,Ree)=>{"use strict";var B6e=VF();Ree.exports=function(r){var e=+r;return e!==e||e===0?0:B6e(e)}});var ql=A((rir,Pee)=>{"use strict";var U6e=ri(),V6e=Math.max,G6e=Math.min;Pee.exports=function(r,e){var t=U6e(r);return t<0?V6e(t+e,0):G6e(t,e)}});var xs=A((nir,Oee)=>{"use strict";var $6e=ri(),H6e=Math.min;Oee.exports=function(r){return r>0?H6e($6e(r),9007199254740991):0}});var Zr=A((iir,Lee)=>{"use strict";var W6e=xs();Lee.exports=function(r){return W6e(r.length)}});var wy=A((oir,Nee)=>{"use strict";var Z6e=ro(),Y6e=ql(),K6e=Zr(),Dee=function(r){return function(e,t,n){var i=Z6e(e),o=K6e(i),a=Y6e(n,o),c;if(r&&t!==t){for(;o>a;)if(c=i[a++],c!==c)return!0}else for(;o>a;a++)if((r||a in i)&&i[a]===t)return r||a||0;return!r&&-1}};Nee.exports={includes:Dee(!0),indexOf:Dee(!1)}});var $F=A((air,qee)=>{"use strict";var X6e=rt(),GF=qr(),J6e=ro(),Q6e=wy().indexOf,eHe=xy(),kee=X6e([].push);qee.exports=function(r,e){var t=J6e(r),n=0,i=[],o;for(o in t)!GF(eHe,o)&&GF(t,o)&&kee(i,o);for(;e.length>n;)GF(t,o=e[n++])&&(~Q6e(i,o)||kee(i,o));return i}});var hC=A((sir,jee)=>{"use strict";jee.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var Rf=A(Fee=>{"use strict";var tHe=$F(),rHe=hC(),nHe=rHe.concat("length","prototype");Fee.f=Object.getOwnPropertyNames||function(e){return tHe(e,nHe)}});var Cb=A(zee=>{"use strict";zee.f=Object.getOwnPropertySymbols});var pC=A((cir,Bee)=>{"use strict";var iHe=_r(),oHe=rt(),aHe=Rf(),sHe=Cb(),lHe=Lt(),uHe=oHe([].concat);Bee.exports=iHe("Reflect","ownKeys")||function(e){var t=aHe.f(lHe(e)),n=sHe.f;return n?uHe(t,n(e)):t}});var by=A((fir,Vee)=>{"use strict";var Uee=qr(),cHe=pC(),fHe=go(),hHe=Zn();Vee.exports=function(r,e,t){for(var n=cHe(e),i=hHe.f,o=fHe.f,a=0;a<n.length;a++){var c=n[a];!Uee(r,c)&&!(t&&Uee(t,c))&&i(r,c,o(e,c))}}});var Sy=A((hir,Gee)=>{"use strict";var pHe=ft(),dHe=Er(),mHe=/#|\.prototype\./,Mb=function(r,e){var t=gHe[vHe(r)];return t===_He?!0:t===yHe?!1:dHe(e)?pHe(e):!!e},vHe=Mb.normalize=function(r){return String(r).replace(mHe,".").toLowerCase()},gHe=Mb.data={},yHe=Mb.NATIVE="N",_He=Mb.POLYFILL="P";Gee.exports=Mb});var te=A((pir,$ee)=>{"use strict";var HF=Ht(),xHe=go().f,wHe=Hi(),bHe=En(),SHe=aC(),EHe=by(),IHe=Sy();$ee.exports=function(r,e){var t=r.target,n=r.global,i=r.stat,o,a,c,h,d,v;if(n?a=HF:i?a=HF[t]||SHe(t,{}):a=(HF[t]||{}).prototype,a)for(c in e){if(d=e[c],r.dontCallGetSet?(v=xHe(a,c),h=v&&v.value):h=a[c],o=IHe(n?c:t+(i?".":"#")+c,r.forced),!o&&h!==void 0){if(typeof d==typeof h)continue;EHe(d,h)}(r.sham||h&&h.sham)&&wHe(d,"sham",!0),bHe(a,c,d,r)}}});var dC=A((dir,Wee)=>{"use strict";var THe=hr(),AHe=THe("toStringTag"),Hee={};Hee[AHe]="z";Wee.exports=String(Hee)==="[object z]"});var ws=A((mir,Zee)=>{"use strict";var CHe=dC(),MHe=Er(),mC=Wo(),RHe=hr(),PHe=RHe("toStringTag"),OHe=Object,LHe=mC(function(){return arguments}())==="Arguments",DHe=function(r,e){try{return r[e]}catch(t){}};Zee.exports=CHe?mC:function(r){var e,t,n;return r===void 0?"Undefined":r===null?"Null":typeof(t=DHe(e=OHe(r),PHe))=="string"?t:LHe?mC(e):(n=mC(e))==="Object"&&MHe(e.callee)?"Arguments":n}});var wr=A((vir,Yee)=>{"use strict";var NHe=ws(),kHe=String;Yee.exports=function(r){if(NHe(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return kHe(r)}});var Pm=A((gir,Kee)=>{"use strict";var qHe=$F(),jHe=hC();Kee.exports=Object.keys||function(e){return qHe(e,jHe)}});var vC=A(Xee=>{"use strict";var FHe=fr(),zHe=MF(),BHe=Zn(),UHe=Lt(),VHe=ro(),GHe=Pm();Xee.f=FHe&&!zHe?Object.defineProperties:function(e,t){UHe(e);for(var n=VHe(t),i=GHe(t),o=i.length,a=0,c;o>a;)BHe.f(e,c=i[a++],n[c]);return e}});var WF=A((_ir,Jee)=>{"use strict";var $He=_r();Jee.exports=$He("document","documentElement")});var Bi=A((xir,ote)=>{"use strict";var HHe=Lt(),WHe=vC(),Qee=hC(),ZHe=xy(),YHe=WF(),KHe=Sb(),XHe=Ib(),ete=">",tte="<",YF="prototype",KF="script",nte=XHe("IE_PROTO"),ZF=function(){},ite=function(r){return tte+KF+ete+r+tte+"/"+KF+ete},rte=function(r){r.write(ite("")),r.close();var e=r.parentWindow.Object;return r=null,e},JHe=function(){var r=KHe("iframe"),e="java"+KF+":",t;return r.style.display="none",YHe.appendChild(r),r.src=String(e),t=r.contentWindow.document,t.open(),t.write(ite("document.F=Object")),t.close(),t.F},gC,yC=function(){try{gC=new ActiveXObject("htmlfile")}catch(e){}yC=typeof document!="undefined"?document.domain&&gC?rte(gC):JHe():rte(gC);for(var r=Qee.length;r--;)delete yC[YF][Qee[r]];return yC()};ZHe[nte]=!0;ote.exports=Object.create||function(e,t){var n;return e!==null?(ZF[YF]=HHe(e),n=new ZF,ZF[YF]=null,n[nte]=e):n=yC(),t===void 0?n:WHe.f(n,t)}});var jl=A((wir,ate)=>{"use strict";var QHe=Du(),eWe=Zn(),tWe=_s();ate.exports=function(r,e,t){var n=QHe(e);n in r?eWe.f(r,n,tWe(0,t)):r[n]=t}});var Om=A((bir,lte)=>{"use strict";var ste=ql(),rWe=Zr(),nWe=jl(),iWe=Array,oWe=Math.max;lte.exports=function(r,e,t){for(var n=rWe(r),i=ste(e,n),o=ste(t===void 0?n:t,n),a=iWe(oWe(o-i,0)),c=0;i<o;i++,c++)nWe(a,c,r[i]);return a.length=c,a}});var _C=A((Sir,fte)=>{"use strict";var aWe=Wo(),sWe=ro(),ute=Rf().f,lWe=Om(),cte=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],uWe=function(r){try{return ute(r)}catch(e){return lWe(cte)}};fte.exports.f=function(e){return cte&&aWe(e)==="Window"?uWe(e):ute(sWe(e))}});var ci=A((Eir,pte)=>{"use strict";var hte=Ab(),cWe=Zn();pte.exports=function(r,e,t){return t.get&&hte(t.get,e,{getter:!0}),t.set&&hte(t.set,e,{setter:!0}),cWe.f(r,e,t)}});var XF=A(dte=>{"use strict";var fWe=hr();dte.f=fWe});var xC=A((Tir,mte)=>{"use strict";var hWe=Ht();mte.exports=hWe});var Ri=A((Air,gte)=>{"use strict";var vte=xC(),pWe=qr(),dWe=XF(),mWe=Zn().f;gte.exports=function(r){var e=vte.Symbol||(vte.Symbol={});pWe(e,r)||mWe(e,r,{value:dWe.f(r)})}});var JF=A((Cir,yte)=>{"use strict";var vWe=Rt(),gWe=_r(),yWe=hr(),_We=En();yte.exports=function(){var r=gWe("Symbol"),e=r&&r.prototype,t=e&&e.valueOf,n=yWe("toPrimitive");e&&!e[n]&&_We(e,n,function(i){return vWe(t,this)},{arity:1})}});var bs=A((Mir,xte)=>{"use strict";var xWe=Zn().f,wWe=qr(),bWe=hr(),_te=bWe("toStringTag");xte.exports=function(r,e,t){r&&!t&&(r=r.prototype),r&&!wWe(r,_te)&&xWe(r,_te,{configurable:!0,value:e})}});var Pf=A((Rir,wte)=>{"use strict";var SWe=Wo(),EWe=rt();wte.exports=function(r){if(SWe(r)==="Function")return EWe(r)}});var kn=A((Pir,Ste)=>{"use strict";var bte=Pf(),IWe=xr(),TWe=yy(),AWe=bte(bte.bind);Ste.exports=function(r,e){return IWe(r),e===void 0?r:TWe?AWe(r,e):function(){return r.apply(e,arguments)}}});var ku=A((Oir,Ete)=>{"use strict";var CWe=Wo();Ete.exports=Array.isArray||function(e){return CWe(e)==="Array"}});var qu=A((Lir,Mte)=>{"use strict";var MWe=rt(),RWe=ft(),Ite=Er(),PWe=ws(),OWe=_r(),LWe=Eb(),Tte=function(){},DWe=[],Ate=OWe("Reflect","construct"),QF=/^\s*(?:class|function)\b/,NWe=MWe(QF.exec),kWe=!QF.test(Tte),Rb=function(e){if(!Ite(e))return!1;try{return Ate(Tte,DWe,e),!0}catch(t){return!1}},Cte=function(e){if(!Ite(e))return!1;switch(PWe(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1;}try{return kWe||!!NWe(QF,LWe(e))}catch(t){return!0}};Cte.sham=!0;Mte.exports=!Ate||RWe(function(){var r;return Rb(Rb.call)||!Rb(Object)||!Rb(function(){r=!0})||r})?Cte:Rb});var Lte=A((Dir,Ote)=>{"use strict";var Rte=ku(),qWe=qu(),jWe=Ir(),FWe=hr(),zWe=FWe("species"),Pte=Array;Ote.exports=function(r){var e;return Rte(r)&&(e=r.constructor,qWe(e)&&(e===Pte||Rte(e.prototype))?e=void 0:jWe(e)&&(e=e[zWe],e===null&&(e=void 0))),e===void 0?Pte:e}});var Ey=A((Nir,Dte)=>{"use strict";var BWe=Lte();Dte.exports=function(r,e){return new(BWe(r))(e===0?0:e)}});var Ui=A((kir,kte)=>{"use strict";var UWe=kn(),VWe=rt(),GWe=Cf(),$We=Gr(),HWe=Zr(),WWe=Ey(),Nte=VWe([].push),Lp=function(r){var e=r===1,t=r===2,n=r===3,i=r===4,o=r===6,a=r===7,c=r===5||o;return function(h,d,v,x){for(var S=$We(h),T=GWe(S),L=UWe(d,v),k=HWe(T),R=0,D=x||WWe,j=e?D(h,k):t||a?D(h,0):void 0,B,$;k>R;R++)if((c||R in T)&&(B=T[R],$=L(B,R,S),r))if(e)j[R]=$;else if($)switch(r){case 3:return!0;case 5:return B;case 6:return R;case 2:Nte(j,B);}else switch(r){case 4:return!1;case 7:Nte(j,B);}return o?-1:n||i?i:j}};kte.exports={forEach:Lp(0),map:Lp(1),filter:Lp(2),some:Lp(3),every:Lp(4),find:Lp(5),findIndex:Lp(6),filterReject:Lp(7)}});var Qte=A(()=>{"use strict";var wC=te(),bC=Ht(),lz=Rt(),ZWe=rt(),YWe=Vr(),Iy=fr(),Ty=Rp(),KWe=ft(),Lo=qr(),XWe=_a(),nz=Lt(),SC=ro(),uz=Du(),JWe=wr(),iz=_s(),Ob=Bi(),Fte=Pm(),QWe=Rf(),zte=_C(),e8e=Cb(),Bte=go(),Ute=Zn(),t8e=vC(),Vte=xb(),ez=En(),r8e=ci(),cz=wc(),n8e=Ib(),Gte=xy(),qte=Op(),i8e=hr(),o8e=XF(),a8e=Ri(),s8e=JF(),l8e=bs(),$te=vn(),EC=Ui().forEach,Ss=n8e("hidden"),IC="Symbol",Lb="prototype",u8e=$te.set,jte=$te.getterFor(IC),Fl=Object[Lb],Lm=bC.Symbol,Pb=Lm&&Lm[Lb],c8e=bC.RangeError,f8e=bC.TypeError,tz=bC.QObject,Hte=Bte.f,Dm=Ute.f,Wte=zte.f,h8e=Vte.f,Zte=ZWe([].push),Of=cz("symbols"),Db=cz("op-symbols"),p8e=cz("wks"),oz=!tz||!tz[Lb]||!tz[Lb].findChild,Yte=function(r,e,t){var n=Hte(Fl,e);n&&delete Fl[e],Dm(r,e,t),n&&r!==Fl&&Dm(Fl,e,n)},az=Iy&&KWe(function(){return Ob(Dm({},"a",{get:function(){return Dm(this,"a",{value:7}).a}})).a!==7})?Yte:Dm,rz=function(r,e){var t=Of[r]=Ob(Pb);return u8e(t,{type:IC,tag:r,description:e}),Iy||(t.description=e),t},TC=function(e,t,n){e===Fl&&TC(Db,t,n),nz(e);var i=uz(t);return nz(n),Lo(Of,i)?(n.enumerable?(Lo(e,Ss)&&e[Ss][i]&&(e[Ss][i]=!1),n=Ob(n,{enumerable:iz(0,!1)})):(Lo(e,Ss)||Dm(e,Ss,iz(1,{})),e[Ss][i]=!0),az(e,i,n)):Dm(e,i,n)},fz=function(e,t){nz(e);var n=SC(t),i=Fte(n).concat(Jte(n));return EC(i,function(o){(!Iy||lz(sz,n,o))&&TC(e,o,n[o])}),e},d8e=function(e,t){return t===void 0?Ob(e):fz(Ob(e),t)},sz=function(e){var t=uz(e),n=lz(h8e,this,t);return this===Fl&&Lo(Of,t)&&!Lo(Db,t)?!1:n||!Lo(this,t)||!Lo(Of,t)||Lo(this,Ss)&&this[Ss][t]?n:!0},Kte=function(e,t){var n=SC(e),i=uz(t);if(!(n===Fl&&Lo(Of,i)&&!Lo(Db,i))){var o=Hte(n,i);return o&&Lo(Of,i)&&!(Lo(n,Ss)&&n[Ss][i])&&(o.enumerable=!0),o}},Xte=function(e){var t=Wte(SC(e)),n=[];return EC(t,function(i){!Lo(Of,i)&&!Lo(Gte,i)&&Zte(n,i)}),n},Jte=function(r){var e=r===Fl,t=Wte(e?Db:SC(r)),n=[];return EC(t,function(i){Lo(Of,i)&&(!e||Lo(Fl,i))&&Zte(n,Of[i])}),n};Ty||(Lm=function(){if(XWe(Pb,this))throw new f8e("Symbol is not a constructor");var e=!arguments.length||arguments[0]===void 0?void 0:JWe(arguments[0]),t=qte(e),n=function(i){this===Fl&&lz(n,Db,i),Lo(this,Ss)&&Lo(this[Ss],t)&&(this[Ss][t]=!1);var o=iz(1,i);try{az(this,t,o)}catch(a){if(!(a instanceof c8e))throw a;Yte(this,t,o)}};return Iy&&oz&&az(Fl,t,{configurable:!0,set:n}),rz(t,e)},Pb=Lm[Lb],ez(Pb,"toString",function(){return jte(this).tag}),ez(Lm,"withoutSetter",function(r){return rz(qte(r),r)}),Vte.f=sz,Ute.f=TC,t8e.f=fz,Bte.f=Kte,QWe.f=zte.f=Xte,e8e.f=Jte,o8e.f=function(r){return rz(i8e(r),r)},Iy&&(r8e(Pb,"description",{configurable:!0,get:function(){return jte(this).description}}),YWe||ez(Fl,"propertyIsEnumerable",sz,{unsafe:!0})));wC({global:!0,constructor:!0,wrap:!0,forced:!Ty,sham:!Ty},{Symbol:Lm});EC(Fte(p8e),function(r){a8e(r)});wC({target:IC,stat:!0,forced:!Ty},{useSetter:function(){oz=!0},useSimple:function(){oz=!1}});wC({target:"Object",stat:!0,forced:!Ty,sham:!Iy},{create:d8e,defineProperty:TC,defineProperties:fz,getOwnPropertyDescriptor:Kte});wC({target:"Object",stat:!0,forced:!Ty},{getOwnPropertyNames:Xte});s8e();l8e(Lm,IC);Gte[Ss]=!0});var hz=A((Fir,ere)=>{"use strict";var m8e=Rp();ere.exports=m8e&&!!Symbol.for&&!!Symbol.keyFor});var rre=A(()=>{"use strict";var v8e=te(),g8e=_r(),y8e=qr(),_8e=wr(),tre=wc(),x8e=hz(),pz=tre("string-to-symbol-registry"),w8e=tre("symbol-to-string-registry");v8e({target:"Symbol",stat:!0,forced:!x8e},{for:function(r){var e=_8e(r);if(y8e(pz,e))return pz[e];var t=g8e("Symbol")(e);return pz[e]=t,w8e[t]=e,t}})});var ire=A(()=>{"use strict";var b8e=te(),S8e=qr(),E8e=Mf(),I8e=Pp(),T8e=wc(),A8e=hz(),nre=T8e("symbol-to-string-registry");b8e({target:"Symbol",stat:!0,forced:!A8e},{keyFor:function(e){if(!E8e(e))throw new TypeError(I8e(e)+" is not a symbol");if(S8e(nre,e))return nre[e]}})});var xa=A((Gir,lre)=>{"use strict";var C8e=yy(),sre=Function.prototype,ore=sre.apply,are=sre.call;lre.exports=typeof Reflect=="object"&&Reflect.apply||(C8e?are.bind(ore):function(){return are.apply(ore,arguments)})});var Lf=A(($ir,ure)=>{"use strict";var M8e=rt();ure.exports=M8e([].slice)});var dz=A((Hir,pre)=>{"use strict";var R8e=rt(),cre=ku(),P8e=Er(),fre=Wo(),O8e=wr(),hre=R8e([].push);pre.exports=function(r){if(P8e(r))return r;if(cre(r)){for(var e=r.length,t=[],n=0;n<e;n++){var i=r[n];typeof i=="string"?hre(t,i):(typeof i=="number"||fre(i)==="Number"||fre(i)==="String")&&hre(t,O8e(i))}var o=t.length,a=!0;return function(c,h){if(a)return a=!1,h;if(cre(this))return h;for(var d=0;d<o;d++)if(t[d]===c)return h}}}});var mz=A(()=>{"use strict";var L8e=te(),wre=_r(),bre=xa(),D8e=Rt(),Nb=rt(),Sre=ft(),dre=Er(),mre=Mf(),Ere=Lf(),N8e=dz(),k8e=Rp(),q8e=String,Dp=wre("JSON","stringify"),AC=Nb(/./.exec),vre=Nb("".charAt),j8e=Nb("".charCodeAt),F8e=Nb("".replace),z8e=Nb(1 .toString),B8e=/[\uD800-\uDFFF]/g,gre=/^[\uD800-\uDBFF]$/,yre=/^[\uDC00-\uDFFF]$/,_re=!k8e||Sre(function(){var r=wre("Symbol")("stringify detection");return Dp([r])!=="[null]"||Dp({a:r})!=="{}"||Dp(Object(r))!=="{}"}),xre=Sre(function(){return Dp("\uDF06\uD834")!=="\"\\udf06\\ud834\""||Dp("\uDEAD")!=="\"\\udead\""}),U8e=function(r,e){var t=Ere(arguments),n=N8e(e);if(!(!dre(n)&&(r===void 0||mre(r))))return t[1]=function(i,o){if(dre(n)&&(o=D8e(n,this,q8e(i),o)),!mre(o))return o},bre(Dp,null,t)},V8e=function(r,e,t){var n=vre(t,e-1),i=vre(t,e+1);return AC(gre,r)&&!AC(yre,i)||AC(yre,r)&&!AC(gre,n)?"\\u"+z8e(j8e(r,0),16):r};Dp&&L8e({target:"JSON",stat:!0,arity:3,forced:_re||xre},{stringify:function(e,t,n){var i=Ere(arguments),o=bre(_re?U8e:Dp,null,i);return xre&&typeof o=="string"?F8e(o,B8e,V8e):o}})});var Tre=A(()=>{"use strict";var G8e=te(),$8e=Rp(),H8e=ft(),Ire=Cb(),W8e=Gr(),Z8e=!$8e||H8e(function(){Ire.f(1)});G8e({target:"Object",stat:!0,forced:Z8e},{getOwnPropertySymbols:function(e){var t=Ire.f;return t?t(W8e(e)):[]}})});var Are=A(()=>{"use strict";Qte();rre();ire();mz();Tre()});var Dre=A(()=>{"use strict";var Y8e=te(),K8e=fr(),X8e=Ht(),CC=rt(),J8e=qr(),Q8e=Er(),eZe=_a(),tZe=wr(),rZe=ci(),nZe=by(),Df=X8e.Symbol,Nm=Df&&Df.prototype;K8e&&Q8e(Df)&&(!("description"in Nm)||Df().description!==void 0)&&(vz={},kb=function(){var e=arguments.length<1||arguments[0]===void 0?void 0:tZe(arguments[0]),t=eZe(Nm,this)?new Df(e):e===void 0?Df():Df(e);return e===""&&(vz[t]=!0),t},nZe(kb,Df),kb.prototype=Nm,Nm.constructor=kb,Cre=String(Df("description detection"))==="Symbol(description detection)",Mre=CC(Nm.valueOf),Rre=CC(Nm.toString),Pre=/^Symbol\((.*)\)[^)]+$/,Ore=CC("".replace),Lre=CC("".slice),rZe(Nm,"description",{configurable:!0,get:function(){var e=Mre(this);if(J8e(vz,e))return"";var t=Rre(e),n=Cre?Lre(t,7,-1):Ore(t,Pre,"$1");return n===""?void 0:n}}),Y8e({global:!0,constructor:!0,forced:!0},{Symbol:kb}));var vz,kb,Cre,Mre,Rre,Pre,Ore,Lre});var Nre=A(()=>{"use strict";var iZe=Ri();iZe("asyncIterator")});var kre=A(()=>{"use strict";var oZe=Ri();oZe("hasInstance")});var qre=A(()=>{"use strict";var aZe=Ri();aZe("isConcatSpreadable")});var jre=A(()=>{"use strict";var sZe=Ri();sZe("iterator")});var Fre=A(()=>{"use strict";var lZe=Ri();lZe("match")});var zre=A(()=>{"use strict";var uZe=Ri();uZe("matchAll")});var Bre=A(()=>{"use strict";var cZe=Ri();cZe("replace")});var Ure=A(()=>{"use strict";var fZe=Ri();fZe("search")});var Vre=A(()=>{"use strict";var hZe=Ri();hZe("species")});var Gre=A(()=>{"use strict";var pZe=Ri();pZe("split")});var $re=A(()=>{"use strict";var dZe=Ri(),mZe=JF();dZe("toPrimitive");mZe()});var Hre=A(()=>{"use strict";var vZe=_r(),gZe=Ri(),yZe=bs();gZe("toStringTag");yZe(vZe("Symbol"),"Symbol")});var Wre=A(()=>{"use strict";var _Ze=Ri();_Ze("unscopables")});var qb=A((Cor,Zre)=>{"use strict";var xZe=rt(),wZe=xr();Zre.exports=function(r,e,t){try{return xZe(wZe(Object.getOwnPropertyDescriptor(r,e)[t]))}catch(n){}}});var gz=A((Mor,Yre)=>{"use strict";var bZe=Er(),SZe=String,EZe=TypeError;Yre.exports=function(r){if(typeof r=="object"||bZe(r))return r;throw new EZe("Can't set "+SZe(r)+" as a prototype")}});var zl=A((Ror,Kre)=>{"use strict";var IZe=qb(),TZe=Lt(),AZe=gz();Kre.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r=!1,e={},t;try{t=IZe(Object.prototype,"__proto__","set"),t(e,[]),r=e instanceof Array}catch(n){}return function(i,o){return TZe(i),AZe(o),r?t(i,o):i.__proto__=o,i}}():void 0)});var yz=A((Por,Xre)=>{"use strict";var CZe=Zn().f;Xre.exports=function(r,e,t){t in r||CZe(r,t,{configurable:!0,get:function(){return e[t]},set:function(n){e[t]=n}})}});var km=A((Oor,Qre)=>{"use strict";var MZe=Er(),RZe=Ir(),Jre=zl();Qre.exports=function(r,e,t){var n,i;return Jre&&MZe(n=e.constructor)&&n!==t&&RZe(i=n.prototype)&&i!==t.prototype&&Jre(r,i),r}});var qm=A((Lor,ene)=>{"use strict";var PZe=wr();ene.exports=function(r,e){return r===void 0?arguments.length<2?"":e:PZe(r)}});var _z=A((Dor,tne)=>{"use strict";var OZe=Ir(),LZe=Hi();tne.exports=function(r,e){OZe(e)&&"cause"in e&&LZe(r,"cause",e.cause)}});var MC=A((Nor,ine)=>{"use strict";var DZe=rt(),rne=Error,NZe=DZe("".replace),kZe=function(r){return String(new rne(r).stack)}("zxcasd"),nne=/\n\s*at [^:]*:[^\n]*/,qZe=nne.test(kZe);ine.exports=function(r,e){if(qZe&&typeof r=="string"&&!rne.prepareStackTrace)for(;e--;)r=NZe(r,nne,"");return r}});var xz=A((kor,one)=>{"use strict";var jZe=ft(),FZe=_s();one.exports=!jZe(function(){var r=new Error("a");return"stack"in r?(Object.defineProperty(r,"stack",FZe(1,7)),r.stack!==7):!0})});var RC=A((qor,sne)=>{"use strict";var zZe=Hi(),BZe=MC(),UZe=xz(),ane=Error.captureStackTrace;sne.exports=function(r,e,t,n){UZe&&(ane?ane(r,e):zZe(r,"stack",BZe(t,n)))}});var wz=A((jor,dne)=>{"use strict";var lne=_r(),VZe=qr(),une=Hi(),GZe=_a(),cne=zl(),fne=by(),hne=yz(),$Ze=km(),HZe=qm(),WZe=_z(),ZZe=RC(),YZe=fr(),pne=Vr();dne.exports=function(r,e,t,n){var i="stackTraceLimit",o=n?2:1,a=r.split("."),c=a[a.length-1],h=lne.apply(null,a);if(h){var d=h.prototype;if(!pne&&VZe(d,"cause")&&delete d.cause,!t)return h;var v=lne("Error"),x=e(function(S,T){var L=HZe(n?T:S,void 0),k=n?new h(S):new h;return L!==void 0&&une(k,"message",L),ZZe(k,x,k.stack,2),this&&GZe(d,this)&&$Ze(k,this,x),arguments.length>o&&WZe(k,arguments[o]),k});if(x.prototype=d,c!=="Error"?cne?cne(x,v):fne(x,v,{name:!0}):YZe&&i in h&&(hne(x,h,i),hne(x,h,"prepareStackTrace")),fne(x,h),!pne)try{d.name!==c&&une(d,"name",c),d.constructor=x}catch(S){}return x}}});var yne=A(()=>{"use strict";var vne=te(),KZe=Ht(),bc=xa(),gne=wz(),bz="WebAssembly",mne=KZe[bz],PC=new Error("e",{cause:7}).cause!==7,jm=function(r,e){var t={};t[r]=gne(r,e,PC),vne({global:!0,constructor:!0,arity:1,forced:PC},t)},Sz=function(r,e){if(mne&&mne[r]){var t={};t[r]=gne(bz+"."+r,e,PC),vne({target:bz,stat:!0,constructor:!0,arity:1,forced:PC},t)}};jm("Error",function(r){return function(t){return bc(r,this,arguments)}});jm("EvalError",function(r){return function(t){return bc(r,this,arguments)}});jm("RangeError",function(r){return function(t){return bc(r,this,arguments)}});jm("ReferenceError",function(r){return function(t){return bc(r,this,arguments)}});jm("SyntaxError",function(r){return function(t){return bc(r,this,arguments)}});jm("TypeError",function(r){return function(t){return bc(r,this,arguments)}});jm("URIError",function(r){return function(t){return bc(r,this,arguments)}});Sz("CompileError",function(r){return function(t){return bc(r,this,arguments)}});Sz("LinkError",function(r){return function(t){return bc(r,this,arguments)}});Sz("RuntimeError",function(r){return function(t){return bc(r,this,arguments)}})});var Ez=A((Bor,xne)=>{"use strict";var XZe=fr(),JZe=ft(),QZe=Lt(),eYe=Bi(),_ne=qm(),OC=Error.prototype.toString,tYe=JZe(function(){if(XZe){var r=eYe(Object.defineProperty({},"name",{get:function(){return this===r}}));if(OC.call(r)!=="true")return!0}return OC.call({message:1,name:2})!=="2: 1"||OC.call({})!=="Error"});xne.exports=tYe?function(){var e=QZe(this),t=_ne(e.name,"Error"),n=_ne(e.message);return t?n?t+": "+n:t:n}:OC});var Sne=A(()=>{"use strict";var rYe=En(),wne=Ez(),bne=Error.prototype;bne.toString!==wne&&rYe(bne,"toString",wne)});var LC=A((Gor,Ene)=>{"use strict";var nYe=ft();Ene.exports=!nYe(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})});var Wi=A(($or,Tne)=>{"use strict";var iYe=qr(),oYe=Er(),aYe=Gr(),sYe=Ib(),lYe=LC(),Ine=sYe("IE_PROTO"),Iz=Object,uYe=Iz.prototype;Tne.exports=lYe?Iz.getPrototypeOf:function(r){var e=aYe(r);if(iYe(e,Ine))return e[Ine];var t=e.constructor;return oYe(t)&&e instanceof t?t.prototype:e instanceof Iz?uYe:null}});var Fm=A((Hor,Ane)=>{"use strict";Ane.exports={}});var DC=A((Wor,Cne)=>{"use strict";var cYe=hr(),fYe=Fm(),hYe=cYe("iterator"),pYe=Array.prototype;Cne.exports=function(r){return r!==void 0&&(fYe.Array===r||pYe[hYe]===r)}});var Nf=A((Zor,Rne)=>{"use strict";var dYe=ws(),Mne=zi(),mYe=$i(),vYe=Fm(),gYe=hr(),yYe=gYe("iterator");Rne.exports=function(r){if(!mYe(r))return Mne(r,yYe)||Mne(r,"@@iterator")||vYe[dYe(r)]}});var Np=A((Yor,Pne)=>{"use strict";var _Ye=Rt(),xYe=xr(),wYe=Lt(),bYe=Pp(),SYe=Nf(),EYe=TypeError;Pne.exports=function(r,e){var t=arguments.length<2?SYe(r):e;if(xYe(t))return wYe(_Ye(t,r));throw new EYe(bYe(r)+" is not iterable")}});var kf=A((Kor,Lne)=>{"use strict";var IYe=Rt(),One=Lt(),TYe=zi();Lne.exports=function(r,e,t){var n,i;One(r);try{if(n=TYe(r,"return"),!n){if(e==="throw")throw t;return t}n=IYe(n,r)}catch(o){i=!0,n=o}if(e==="throw")throw t;if(i)throw n;return One(n),t}});var Pi=A((Xor,qne)=>{"use strict";var AYe=kn(),CYe=Rt(),MYe=Lt(),RYe=Pp(),PYe=DC(),OYe=Zr(),Dne=_a(),LYe=Np(),DYe=Nf(),Nne=kf(),NYe=TypeError,NC=function(r,e){this.stopped=r,this.result=e},kne=NC.prototype;qne.exports=function(r,e,t){var n=t&&t.that,i=!!(t&&t.AS_ENTRIES),o=!!(t&&t.IS_RECORD),a=!!(t&&t.IS_ITERATOR),c=!!(t&&t.INTERRUPTED),h=AYe(e,n),d,v,x,S,T,L,k,R=function(j){return d&&Nne(d,"normal",j),new NC(!0,j)},D=function(j){return i?(MYe(j),c?h(j[0],j[1],R):h(j[0],j[1])):c?h(j,R):h(j)};if(o)d=r.iterator;else if(a)d=r;else{if(v=DYe(r),!v)throw new NYe(RYe(r)+" is not iterable");if(PYe(v)){for(x=0,S=OYe(r);S>x;x++)if(T=D(r[x]),T&&Dne(kne,T))return T;return new NC(!1)}d=LYe(r,v)}for(L=o?r.next:d.next;!(k=CYe(L,d)).done;){try{T=D(k.value)}catch(j){Nne(d,"throw",j)}if(typeof T=="object"&&T&&Dne(kne,T))return T}return new NC(!1)}});var Fne=A(()=>{"use strict";var kYe=te(),qYe=_a(),jYe=Wi(),kC=zl(),FYe=by(),jne=Bi(),Tz=Hi(),Az=_s(),zYe=_z(),BYe=RC(),UYe=Pi(),VYe=qm(),GYe=hr(),$Ye=GYe("toStringTag"),qC=Error,HYe=[].push,Ay=function(e,t){var n=qYe(Cz,this),i;kC?i=kC(new qC,n?jYe(this):Cz):(i=n?this:jne(Cz),Tz(i,$Ye,"Error")),t!==void 0&&Tz(i,"message",VYe(t)),BYe(i,Ay,i.stack,1),arguments.length>2&&zYe(i,arguments[2]);var o=[];return UYe(e,HYe,{that:o}),Tz(i,"errors",o),i};kC?kC(Ay,qC):FYe(Ay,qC,{name:!0});var Cz=Ay.prototype=jne(qC.prototype,{constructor:Az(1,Ay),message:Az(1,""),name:Az(1,"AggregateError")});kYe({global:!0,constructor:!0,arity:2},{AggregateError:Ay})});var Mz=A(()=>{"use strict";Fne()});var Vne=A(()=>{"use strict";var WYe=te(),ZYe=_r(),YYe=xa(),zne=ft(),KYe=wz(),Rz="AggregateError",Bne=ZYe(Rz),Une=!zne(function(){return Bne([1]).errors[0]!==1})&&zne(function(){return Bne([1],Rz,{cause:7}).cause!==7});WYe({global:!0,constructor:!0,arity:2,forced:Une},{AggregateError:KYe(Rz,function(r){return function(t,n){return YYe(r,this,arguments)}},Une,!0)})});var _i=A((iar,Gne)=>{"use strict";var XYe=hr(),JYe=Bi(),QYe=Zn().f,Pz=XYe("unscopables"),Oz=Array.prototype;Oz[Pz]===void 0&&QYe(Oz,Pz,{configurable:!0,value:JYe(null)});Gne.exports=function(r){Oz[Pz][r]=!0}});var Lz=A(()=>{"use strict";var eKe=te(),tKe=Gr(),rKe=Zr(),nKe=ri(),iKe=_i();eKe({target:"Array",proto:!0},{at:function(e){var t=tKe(this),n=rKe(t),i=nKe(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:t[o]}});iKe("at")});var kp=A((sar,$ne)=>{"use strict";var oKe=TypeError,aKe=9007199254740991;$ne.exports=function(r){if(r>aKe)throw oKe("Maximum allowed index exceeded");return r}});var Cy=A((lar,Hne)=>{"use strict";var sKe=ft(),lKe=hr(),uKe=xc(),cKe=lKe("species");Hne.exports=function(r){return uKe>=51||!sKe(function(){var e=[],t=e.constructor={};return t[cKe]=function(){return{foo:1}},e[r](Boolean).foo!==1})}});var Kne=A(()=>{"use strict";var fKe=te(),hKe=ft(),pKe=ku(),dKe=Ir(),mKe=Gr(),vKe=Zr(),Wne=kp(),Zne=jl(),gKe=Ey(),yKe=Cy(),_Ke=hr(),xKe=xc(),Yne=_Ke("isConcatSpreadable"),wKe=xKe>=51||!hKe(function(){var r=[];return r[Yne]=!1,r.concat()[0]!==r}),bKe=function(r){if(!dKe(r))return!1;var e=r[Yne];return e!==void 0?!!e:pKe(r)},SKe=!wKe||!yKe("concat");fKe({target:"Array",proto:!0,arity:1,forced:SKe},{concat:function(e){var t=mKe(this),n=gKe(t,0),i=0,o,a,c,h,d;for(o=-1,c=arguments.length;o<c;o++)if(d=o===-1?t:arguments[o],bKe(d))for(h=vKe(d),Wne(i+h),a=0;a<h;a++,i++)a in d&&Zne(n,i,d[a]);else Wne(i+1),Zne(n,i++,d);return n.length=i,n}})});var jb=A((far,Jne)=>{"use strict";var Xne=Pp(),EKe=TypeError;Jne.exports=function(r,e){if(!delete r[e])throw new EKe("Cannot delete property "+Xne(e)+" of "+Xne(r))}});var Nz=A((har,Qne)=>{"use strict";var IKe=Gr(),Dz=ql(),TKe=Zr(),AKe=jb(),CKe=Math.min;Qne.exports=[].copyWithin||function(e,t){var n=IKe(this),i=TKe(n),o=Dz(e,i),a=Dz(t,i),c=arguments.length>2?arguments[2]:void 0,h=CKe((c===void 0?i:Dz(c,i))-a,i-o),d=1;for(a<o&&o<a+h&&(d=-1,a+=h-1,o+=h-1);h-->0;)a in n?n[o]=n[a]:AKe(n,o),o+=d,a+=d;return n}});var eie=A(()=>{"use strict";var MKe=te(),RKe=Nz(),PKe=_i();MKe({target:"Array",proto:!0},{copyWithin:RKe});PKe("copyWithin")});var Bl=A((mar,tie)=>{"use strict";var OKe=ft();tie.exports=function(r,e){var t=[][r];return!!t&&OKe(function(){t.call(null,e||function(){return 1},1)})}});var rie=A(()=>{"use strict";var LKe=te(),DKe=Ui().every,NKe=Bl(),kKe=NKe("every");LKe({target:"Array",proto:!0,forced:!kKe},{every:function(e){return DKe(this,e,arguments.length>1?arguments[1]:void 0)}})});var jC=A((_ar,iie)=>{"use strict";var qKe=Gr(),nie=ql(),jKe=Zr();iie.exports=function(e){for(var t=qKe(this),n=jKe(t),i=arguments.length,o=nie(i>1?arguments[1]:void 0,n),a=i>2?arguments[2]:void 0,c=a===void 0?n:nie(a,n);c>o;)t[o++]=e;return t}});var oie=A(()=>{"use strict";var FKe=te(),zKe=jC(),BKe=_i();FKe({target:"Array",proto:!0},{fill:zKe});BKe("fill")});var aie=A(()=>{"use strict";var UKe=te(),VKe=Ui().filter,GKe=Cy(),$Ke=GKe("filter");UKe({target:"Array",proto:!0,forced:!$Ke},{filter:function(e){return VKe(this,e,arguments.length>1?arguments[1]:void 0)}})});var lie=A(()=>{"use strict";var HKe=te(),WKe=Ui().find,ZKe=_i(),kz="find",sie=!0;kz in[]&&Array(1)[kz](function(){sie=!1});HKe({target:"Array",proto:!0,forced:sie},{find:function(e){return WKe(this,e,arguments.length>1?arguments[1]:void 0)}});ZKe(kz)});var cie=A(()=>{"use strict";var YKe=te(),KKe=Ui().findIndex,XKe=_i(),qz="findIndex",uie=!0;qz in[]&&Array(1)[qz](function(){uie=!1});YKe({target:"Array",proto:!0,forced:uie},{findIndex:function(e){return KKe(this,e,arguments.length>1?arguments[1]:void 0)}});XKe(qz)});var Fb=A((Car,hie)=>{"use strict";var JKe=kn(),QKe=Cf(),eXe=Gr(),tXe=Zr(),fie=function(r){var e=r===1;return function(t,n,i){for(var o=eXe(t),a=QKe(o),c=JKe(n,i),h=tXe(a),d,v;h-->0;)if(d=a[h],v=c(d,h,o),v)switch(r){case 0:return d;case 1:return h;}return e?-1:void 0}};hie.exports={findLast:fie(0),findLastIndex:fie(1)}});var jz=A(()=>{"use strict";var rXe=te(),nXe=Fb().findLast,iXe=_i();rXe({target:"Array",proto:!0},{findLast:function(e){return nXe(this,e,arguments.length>1?arguments[1]:void 0)}});iXe("findLast")});var Fz=A(()=>{"use strict";var oXe=te(),aXe=Fb().findLastIndex,sXe=_i();oXe({target:"Array",proto:!0},{findLastIndex:function(e){return aXe(this,e,arguments.length>1?arguments[1]:void 0)}});sXe("findLastIndex")});var zz=A((Lar,die)=>{"use strict";var lXe=ku(),uXe=Zr(),cXe=kp(),fXe=kn(),pie=function(r,e,t,n,i,o,a,c){for(var h=i,d=0,v=a?fXe(a,c):!1,x,S;d<n;)d in t&&(x=v?v(t[d],d,e):t[d],o>0&&lXe(x)?(S=uXe(x),h=pie(r,e,x,S,h,o-1)-1):(cXe(h+1),r[h]=x),h++),d++;return h};die.exports=pie});var mie=A(()=>{"use strict";var hXe=te(),pXe=zz(),dXe=Gr(),mXe=Zr(),vXe=ri(),gXe=Ey();hXe({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=dXe(this),n=mXe(t),i=gXe(t,0);return i.length=pXe(i,t,t,n,0,e===void 0?1:vXe(e)),i}})});var vie=A(()=>{"use strict";var yXe=te(),_Xe=zz(),xXe=xr(),wXe=Gr(),bXe=Zr(),SXe=Ey();yXe({target:"Array",proto:!0},{flatMap:function(e){var t=wXe(this),n=bXe(t),i;return xXe(e),i=SXe(t,0),i.length=_Xe(i,t,t,n,0,1,e,arguments.length>1?arguments[1]:void 0),i}})});var Bz=A((jar,gie)=>{"use strict";var EXe=Ui().forEach,IXe=Bl(),TXe=IXe("forEach");gie.exports=TXe?[].forEach:function(e){return EXe(this,e,arguments.length>1?arguments[1]:void 0)}});var _ie=A(()=>{"use strict";var AXe=te(),yie=Bz();AXe({target:"Array",proto:!0,forced:[].forEach!==yie},{forEach:yie})});var FC=A((Bar,xie)=>{"use strict";var CXe=Lt(),MXe=kf();xie.exports=function(r,e,t,n){try{return n?e(CXe(t)[0],t[1]):e(t)}catch(i){MXe(r,"throw",i)}}});var Uz=A((Uar,Sie)=>{"use strict";var RXe=kn(),PXe=Rt(),OXe=Gr(),LXe=FC(),DXe=DC(),NXe=qu(),kXe=Zr(),wie=jl(),qXe=Np(),jXe=Nf(),bie=Array;Sie.exports=function(e){var t=OXe(e),n=NXe(this),i=arguments.length,o=i>1?arguments[1]:void 0,a=o!==void 0;a&&(o=RXe(o,i>2?arguments[2]:void 0));var c=jXe(t),h=0,d,v,x,S,T,L;if(c&&!(this===bie&&DXe(c)))for(S=qXe(t,c),T=S.next,v=n?new this:[];!(x=PXe(T,S)).done;h++)L=a?LXe(S,o,[x.value,h],!0):x.value,wie(v,h,L);else for(d=kXe(t),v=n?new this(d):bie(d);d>h;h++)L=a?o(t[h],h):t[h],wie(v,h,L);return v.length=h,v}});var zb=A((Var,Aie)=>{"use strict";var FXe=hr(),Iie=FXe("iterator"),Tie=!1;try{Eie=0,Vz={next:function(){return{done:!!Eie++}},return:function(){Tie=!0}},Vz[Iie]=function(){return this},Array.from(Vz,function(){throw 2})}catch(r){}var Eie,Vz;Aie.exports=function(r,e){try{if(!e&&!Tie)return!1}catch(i){return!1}var t=!1;try{var n={};n[Iie]=function(){return{next:function(){return{done:t=!0}}}},r(n)}catch(i){}return t}});var Cie=A(()=>{"use strict";var zXe=te(),BXe=Uz(),UXe=zb(),VXe=!UXe(function(r){Array.from(r)});zXe({target:"Array",stat:!0,forced:VXe},{from:BXe})});var Mie=A(()=>{"use strict";var GXe=te(),$Xe=wy().includes,HXe=ft(),WXe=_i(),ZXe=HXe(function(){return!Array(1).includes()});GXe({target:"Array",proto:!0,forced:ZXe},{includes:function(e){return $Xe(this,e,arguments.length>1?arguments[1]:void 0)}});WXe("includes")});var Pie=A(()=>{"use strict";var YXe=te(),KXe=Pf(),XXe=wy().indexOf,JXe=Bl(),Gz=KXe([].indexOf),Rie=!!Gz&&1/Gz([1],1,-0)<0,QXe=Rie||!JXe("indexOf");YXe({target:"Array",proto:!0,forced:QXe},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return Rie?Gz(this,e,t)||0:XXe(this,e,t)}})});var Oie=A(()=>{"use strict";var e9e=te(),t9e=ku();e9e({target:"Array",stat:!0},{isArray:t9e})});var zm=A((Jar,Nie)=>{"use strict";var r9e=ft(),n9e=Er(),i9e=Ir(),o9e=Bi(),Lie=Wi(),a9e=En(),s9e=hr(),l9e=Vr(),Wz=s9e("iterator"),Die=!1,qf,$z,Hz;[].keys&&(Hz=[].keys(),"next"in Hz?($z=Lie(Lie(Hz)),$z!==Object.prototype&&(qf=$z)):Die=!0);var u9e=!i9e(qf)||r9e(function(){var r={};return qf[Wz].call(r)!==r});u9e?qf={}:l9e&&(qf=o9e(qf));n9e(qf[Wz])||a9e(qf,Wz,function(){return this});Nie.exports={IteratorPrototype:qf,BUGGY_SAFARI_ITERATORS:Die}});var qp=A((Qar,kie)=>{"use strict";var c9e=zm().IteratorPrototype,f9e=Bi(),h9e=_s(),p9e=bs(),d9e=Fm(),m9e=function(){return this};kie.exports=function(r,e,t,n){var i=e+" Iterator";return r.prototype=f9e(c9e,{next:h9e(+!n,t)}),p9e(r,i,!1,!0),d9e[i]=m9e,r}});var UC=A((esr,Hie)=>{"use strict";var v9e=te(),g9e=Rt(),zC=Vr(),Gie=Mm(),y9e=Er(),_9e=qp(),qie=Wi(),jie=zl(),x9e=bs(),w9e=Hi(),Zz=En(),b9e=hr(),Fie=Fm(),$ie=zm(),S9e=Gie.PROPER,E9e=Gie.CONFIGURABLE,zie=$ie.IteratorPrototype,BC=$ie.BUGGY_SAFARI_ITERATORS,Bb=b9e("iterator"),Bie="keys",Ub="values",Uie="entries",Vie=function(){return this};Hie.exports=function(r,e,t,n,i,o,a){_9e(t,e,n);var c=function(D){if(D===i&&S)return S;if(!BC&&D&&D in v)return v[D];switch(D){case Bie:return function(){return new t(this,D)};case Ub:return function(){return new t(this,D)};case Uie:return function(){return new t(this,D)};}return function(){return new t(this)}},h=e+" Iterator",d=!1,v=r.prototype,x=v[Bb]||v["@@iterator"]||i&&v[i],S=!BC&&x||c(i),T=e==="Array"&&v.entries||x,L,k,R;if(T&&(L=qie(T.call(new r)),L!==Object.prototype&&L.next&&(!zC&&qie(L)!==zie&&(jie?jie(L,zie):y9e(L[Bb])||Zz(L,Bb,Vie)),x9e(L,h,!0,!0),zC&&(Fie[h]=Vie))),S9e&&i===Ub&&x&&x.name!==Ub&&(!zC&&E9e?w9e(v,"name",Ub):(d=!0,S=function(){return g9e(x,this)})),i)if(k={values:c(Ub),keys:o?S:c(Bie),entries:c(Uie)},a)for(R in k)(BC||d||!(R in v))&&Zz(v,R,k[R]);else v9e({target:e,proto:!0,forced:BC||d},k);return(!zC||a)&&v[Bb]!==S&&Zz(v,Bb,S,{name:i}),Fie[e]=S,k}});var Zo=A((tsr,Wie)=>{"use strict";Wie.exports=function(r,e){return{value:r,done:e}}});var Vb=A((rsr,Jie)=>{"use strict";var I9e=ro(),Yz=_i(),Zie=Fm(),Kie=vn(),T9e=Zn().f,A9e=UC(),VC=Zo(),C9e=Vr(),M9e=fr(),Xie="Array Iterator",R9e=Kie.set,P9e=Kie.getterFor(Xie);Jie.exports=A9e(Array,"Array",function(r,e){R9e(this,{type:Xie,target:I9e(r),index:0,kind:e})},function(){var r=P9e(this),e=r.target,t=r.kind,n=r.index++;if(!e||n>=e.length)return r.target=void 0,VC(void 0,!0);switch(t){case"keys":return VC(n,!1);case"values":return VC(e[n],!1);}return VC([n,e[n]],!1)},"values");var Yie=Zie.Arguments=Zie.Array;Yz("keys");Yz("values");Yz("entries");if(!C9e&&M9e&&Yie.name!=="values")try{T9e(Yie,"name",{value:"values"})}catch(r){}});var Qie=A(()=>{"use strict";var O9e=te(),L9e=rt(),D9e=Cf(),N9e=ro(),k9e=Bl(),q9e=L9e([].join),j9e=D9e!==Object,F9e=j9e||!k9e("join",",");O9e({target:"Array",proto:!0,forced:F9e},{join:function(e){return q9e(N9e(this),e===void 0?",":e)}})});var Xz=A((osr,toe)=>{"use strict";var z9e=xa(),B9e=ro(),U9e=ri(),V9e=Zr(),G9e=Bl(),$9e=Math.min,Kz=[].lastIndexOf,eoe=!!Kz&&1/[1].lastIndexOf(1,-0)<0,H9e=G9e("lastIndexOf"),W9e=eoe||!H9e;toe.exports=W9e?function(e){if(eoe)return z9e(Kz,this,arguments)||0;var t=B9e(this),n=V9e(t),i=n-1;for(arguments.length>1&&(i=$9e(i,U9e(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}:Kz});var noe=A(()=>{"use strict";var Z9e=te(),roe=Xz();Z9e({target:"Array",proto:!0,forced:roe!==[].lastIndexOf},{lastIndexOf:roe})});var ioe=A(()=>{"use strict";var Y9e=te(),K9e=Ui().map,X9e=Cy(),J9e=X9e("map");Y9e({target:"Array",proto:!0,forced:!J9e},{map:function(e){return K9e(this,e,arguments.length>1?arguments[1]:void 0)}})});var aoe=A(()=>{"use strict";var Q9e=te(),e7e=ft(),t7e=qu(),r7e=jl(),ooe=Array,n7e=e7e(function(){function r(){}return!(ooe.of.call(r)instanceof r)});Q9e({target:"Array",stat:!0,forced:n7e},{of:function(){for(var e=0,t=arguments.length,n=new(t7e(this)?this:ooe)(t);t>e;)r7e(n,e,arguments[e++]);return n.length=t,n}})});var GC=A((hsr,soe)=>{"use strict";var i7e=fr(),o7e=ku(),a7e=TypeError,s7e=Object.getOwnPropertyDescriptor,l7e=i7e&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(r){return r instanceof TypeError}}();soe.exports=l7e?function(r,e){if(o7e(r)&&!s7e(r,"length").writable)throw new a7e("Cannot set read only .length");return r.length=e}:function(r,e){return r.length=e}});var loe=A(()=>{"use strict";var u7e=te(),c7e=Gr(),f7e=Zr(),h7e=GC(),p7e=kp(),d7e=ft(),m7e=d7e(function(){return[].push.call({length:4294967296},1)!==4294967297}),v7e=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(r){return r instanceof TypeError}},g7e=m7e||!v7e();u7e({target:"Array",proto:!0,arity:1,forced:g7e},{push:function(e){var t=c7e(this),n=f7e(t),i=arguments.length;p7e(n+i);for(var o=0;o<i;o++)t[n]=arguments[o],n++;return h7e(t,n),n}})});var Gb=A((msr,coe)=>{"use strict";var y7e=xr(),_7e=Gr(),x7e=Cf(),w7e=Zr(),b7e=TypeError,uoe=function(r){return function(e,t,n,i){y7e(t);var o=_7e(e),a=x7e(o),c=w7e(o),h=r?c-1:0,d=r?-1:1;if(n<2)for(;;){if(h in a){i=a[h],h+=d;break}if(h+=d,r?h<0:c<=h)throw new b7e("Reduce of empty array with no initial value")}for(;r?h>=0:c>h;h+=d)h in a&&(i=t(i,a[h],h,o));return i}};coe.exports={left:uoe(!1),right:uoe(!0)}});var Sc=A((vsr,foe)=>{"use strict";var S7e=Ht(),E7e=Wo();foe.exports=E7e(S7e.process)==="process"});var poe=A(()=>{"use strict";var I7e=te(),T7e=Gb().left,A7e=Bl(),hoe=xc(),C7e=Sc(),M7e=!C7e&&hoe>79&&hoe<83,R7e=M7e||!A7e("reduce");I7e({target:"Array",proto:!0,forced:R7e},{reduce:function(e){var t=arguments.length;return T7e(this,e,t,t>1?arguments[1]:void 0)}})});var moe=A(()=>{"use strict";var P7e=te(),O7e=Gb().right,L7e=Bl(),doe=xc(),D7e=Sc(),N7e=!D7e&&doe>79&&doe<83,k7e=N7e||!L7e("reduceRight");P7e({target:"Array",proto:!0,forced:k7e},{reduceRight:function(e){return O7e(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var goe=A(()=>{"use strict";var q7e=te(),j7e=rt(),F7e=ku(),z7e=j7e([].reverse),voe=[1,2];q7e({target:"Array",proto:!0,forced:String(voe)===String(voe.reverse())},{reverse:function(){return F7e(this)&&(this.length=this.length),z7e(this)}})});var xoe=A(()=>{"use strict";var B7e=te(),yoe=ku(),U7e=qu(),V7e=Ir(),_oe=ql(),G7e=Zr(),$7e=ro(),H7e=jl(),W7e=hr(),Z7e=Cy(),Y7e=Lf(),K7e=Z7e("slice"),X7e=W7e("species"),Jz=Array,J7e=Math.max;B7e({target:"Array",proto:!0,forced:!K7e},{slice:function(e,t){var n=$7e(this),i=G7e(n),o=_oe(e,i),a=_oe(t===void 0?i:t,i),c,h,d;if(yoe(n)&&(c=n.constructor,U7e(c)&&(c===Jz||yoe(c.prototype))?c=void 0:V7e(c)&&(c=c[X7e],c===null&&(c=void 0)),c===Jz||c===void 0))return Y7e(n,o,a);for(h=new(c===void 0?Jz:c)(J7e(a-o,0)),d=0;o<a;o++,d++)o in n&&H7e(h,d,n[o]);return h.length=d,h}})});var woe=A(()=>{"use strict";var Q7e=te(),eJe=Ui().some,tJe=Bl(),rJe=tJe("some");Q7e({target:"Array",proto:!0,forced:!rJe},{some:function(e){return eJe(this,e,arguments.length>1?arguments[1]:void 0)}})});var $C=A((Asr,Soe)=>{"use strict";var boe=Om(),nJe=Math.floor,Qz=function(r,e){var t=r.length,n=nJe(t/2);return t<8?iJe(r,e):oJe(r,Qz(boe(r,0,n),e),Qz(boe(r,n),e),e)},iJe=function(r,e){for(var t=r.length,n=1,i,o;n<t;){for(o=n,i=r[n];o&&e(r[o-1],i)>0;)r[o]=r[--o];o!==n++&&(r[o]=i)}return r},oJe=function(r,e,t,n){for(var i=e.length,o=t.length,a=0,c=0;a<i||c<o;)r[a+c]=a<i&&c<o?n(e[a],t[c])<=0?e[a++]:t[c++]:a<i?e[a++]:t[c++];return r};Soe.exports=Qz});var e4=A((Csr,Ioe)=>{"use strict";var aJe=_c(),Eoe=aJe.match(/firefox\/(\d+)/i);Ioe.exports=!!Eoe&&+Eoe[1]});var t4=A((Msr,Toe)=>{"use strict";var sJe=_c();Toe.exports=/MSIE|Trident/.test(sJe)});var HC=A((Rsr,Coe)=>{"use strict";var lJe=_c(),Aoe=lJe.match(/AppleWebKit\/(\d+)\./);Coe.exports=!!Aoe&&+Aoe[1]});var qoe=A(()=>{"use strict";var uJe=te(),Noe=rt(),cJe=xr(),fJe=Gr(),Moe=Zr(),hJe=jb(),Roe=wr(),r4=ft(),pJe=$C(),dJe=Bl(),Poe=e4(),mJe=t4(),Ooe=xc(),Loe=HC(),jp=[],Doe=Noe(jp.sort),vJe=Noe(jp.push),gJe=r4(function(){jp.sort(void 0)}),yJe=r4(function(){jp.sort(null)}),_Je=dJe("sort"),koe=!r4(function(){if(Ooe)return Ooe<70;if(!(Poe&&Poe>3)){if(mJe)return!0;if(Loe)return Loe<603;var r="",e,t,n,i;for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2;}for(i=0;i<47;i++)jp.push({k:t+i,v:n})}for(jp.sort(function(o,a){return a.v-o.v}),i=0;i<jp.length;i++)t=jp[i].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return r!=="DGBEFHACIJK"}}),xJe=gJe||!yJe||!_Je||!koe,wJe=function(r){return function(e,t){return t===void 0?-1:e===void 0?1:r!==void 0?+r(e,t)||0:Roe(e)>Roe(t)?1:-1}};uJe({target:"Array",proto:!0,forced:xJe},{sort:function(e){e!==void 0&&cJe(e);var t=fJe(this);if(koe)return e===void 0?Doe(t):Doe(t,e);var n=[],i=Moe(t),o,a;for(a=0;a<i;a++)a in t&&vJe(n,t[a]);for(pJe(n,wJe(e)),o=Moe(n),a=0;a<o;)t[a]=n[a++];for(;a<i;)hJe(t,a++);return t}})});var Fp=A((Lsr,Foe)=>{"use strict";var bJe=_r(),SJe=ci(),EJe=hr(),IJe=fr(),joe=EJe("species");Foe.exports=function(r){var e=bJe(r);IJe&&e&&!e[joe]&&SJe(e,joe,{configurable:!0,get:function(){return this}})}});var zoe=A(()=>{"use strict";var TJe=Fp();TJe("Array")});var Boe=A(()=>{"use strict";var AJe=te(),CJe=Gr(),MJe=ql(),RJe=ri(),PJe=Zr(),OJe=GC(),LJe=kp(),DJe=Ey(),NJe=jl(),n4=jb(),kJe=Cy(),qJe=kJe("splice"),jJe=Math.max,FJe=Math.min;AJe({target:"Array",proto:!0,forced:!qJe},{splice:function(e,t){var n=CJe(this),i=PJe(n),o=MJe(e,i),a=arguments.length,c,h,d,v,x,S;for(a===0?c=h=0:a===1?(c=0,h=i-o):(c=a-2,h=FJe(jJe(RJe(t),0),i-o)),LJe(i+c-h),d=DJe(n,h),v=0;v<h;v++)x=o+v,x in n&&NJe(d,v,n[x]);if(d.length=h,c<h){for(v=o;v<i-h;v++)x=v+h,S=v+c,x in n?n[S]=n[x]:n4(n,S);for(v=i;v>i-h+c;v--)n4(n,v-1)}else if(c>h)for(v=i-h;v>o;v--)x=v+h-1,S=v+c-1,x in n?n[S]=n[x]:n4(n,S);for(v=0;v<c;v++)n[v+o]=arguments[v+2];return OJe(n,i-h+c),d}})});var i4=A((jsr,Uoe)=>{"use strict";var zJe=Zr();Uoe.exports=function(r,e){for(var t=zJe(r),n=new e(t),i=0;i<t;i++)n[i]=r[t-i-1];return n}});var o4=A(()=>{"use strict";var BJe=te(),UJe=i4(),VJe=ro(),GJe=_i(),$Je=Array;BJe({target:"Array",proto:!0},{toReversed:function(){return UJe(VJe(this),$Je)}});GJe("toReversed")});var Bm=A((Bsr,Voe)=>{"use strict";var HJe=Zr();Voe.exports=function(r,e){for(var t=0,n=HJe(e),i=new r(n);n>t;)i[t]=e[t++];return i}});var a4=A((Usr,Goe)=>{"use strict";var WJe=Ht();Goe.exports=function(r){return WJe[r].prototype}});var s4=A(()=>{"use strict";var ZJe=te(),YJe=rt(),KJe=xr(),XJe=ro(),JJe=Bm(),QJe=a4(),eQe=_i(),tQe=Array,rQe=YJe(QJe("Array").sort);ZJe({target:"Array",proto:!0},{toSorted:function(e){e!==void 0&&KJe(e);var t=XJe(this),n=JJe(tQe,t);return rQe(n,e)}});eQe("toSorted")});var l4=A(()=>{"use strict";var nQe=te(),iQe=_i(),oQe=kp(),aQe=Zr(),sQe=ql(),lQe=ro(),uQe=ri(),cQe=Array,fQe=Math.max,hQe=Math.min;nQe({target:"Array",proto:!0},{toSpliced:function(e,t){var n=lQe(this),i=aQe(n),o=sQe(e,i),a=arguments.length,c=0,h,d,v,x;for(a===0?h=d=0:a===1?(h=0,d=i-o):(h=a-2,d=hQe(fQe(uQe(t),0),i-o)),v=oQe(i+h-d),x=cQe(v);c<o;c++)x[c]=n[c];for(;c<o+h;c++)x[c]=arguments[c-o+2];for(;c<v;c++)x[c]=n[c+d-h];return x}});iQe("toSpliced")});var $oe=A(()=>{"use strict";var pQe=_i();pQe("flat")});var Hoe=A(()=>{"use strict";var dQe=_i();dQe("flatMap")});var Woe=A(()=>{"use strict";var mQe=te(),vQe=Gr(),gQe=Zr(),yQe=GC(),_Qe=jb(),xQe=kp(),wQe=[].unshift(0)!==1,bQe=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(r){return r instanceof TypeError}},SQe=wQe||!bQe();mQe({target:"Array",proto:!0,arity:1,forced:SQe},{unshift:function(e){var t=vQe(this),n=gQe(t),i=arguments.length;if(i){xQe(n+i);for(var o=n;o--;){var a=o+i;o in t?t[a]=t[o]:_Qe(t,a)}for(var c=0;c<i;c++)t[c]=arguments[c]}return yQe(t,n+i)}})});var u4=A((Qsr,Zoe)=>{"use strict";var EQe=Zr(),IQe=ri(),TQe=RangeError;Zoe.exports=function(r,e,t,n){var i=EQe(r),o=IQe(t),a=o<0?i+o:o;if(a>=i||a<0)throw new TQe("Incorrect index");for(var c=new e(i),h=0;h<i;h++)c[h]=h===a?n:r[h];return c}});var c4=A(()=>{"use strict";var AQe=te(),CQe=u4(),MQe=ro(),RQe=Array;AQe({target:"Array",proto:!0},{with:function(r,e){return CQe(MQe(this),RQe,r,e)}})});var WC=A((rlr,Yoe)=>{"use strict";Yoe.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var Ul=A((nlr,Koe)=>{"use strict";var PQe=En();Koe.exports=function(r,e,t){for(var n in e)PQe(r,n,e[n],t);return r}});var wa=A((ilr,Xoe)=>{"use strict";var OQe=_a(),LQe=TypeError;Xoe.exports=function(r,e){if(OQe(e,r))return r;throw new LQe("Incorrect invocation")}});var My=A((olr,Joe)=>{"use strict";var DQe=ri(),NQe=xs(),kQe=RangeError;Joe.exports=function(r){if(r===void 0)return 0;var e=DQe(r),t=NQe(e);if(e!==t)throw new kQe("Wrong length or index");return t}});var ZC=A((alr,Qoe)=>{"use strict";Qoe.exports=Math.sign||function(e){var t=+e;return t===0||t!==t?t:t<0?-1:1}});var f4=A((slr,rae)=>{"use strict";var qQe=ZC(),jQe=Math.abs,tae=2220446049250313e-31,eae=1/tae,FQe=function(r){return r+eae-eae};rae.exports=function(r,e,t,n){var i=+r,o=jQe(i),a=qQe(i);if(o<n)return a*FQe(o/n/e)*n*e;var c=(1+e/tae)*o,h=c-(c-o);return h>t||h!==h?a*(1/0):a*h}});var YC=A((llr,nae)=>{"use strict";var zQe=f4(),BQe=1.1920928955078125e-7,UQe=34028234663852886e22,VQe=11754943508222875e-54;nae.exports=Math.fround||function(e){return zQe(e,BQe,UQe,VQe)}});var KC=A((ulr,iae)=>{"use strict";var GQe=Array,$Qe=Math.abs,jf=Math.pow,HQe=Math.floor,WQe=Math.log,ZQe=Math.LN2,YQe=function(r,e,t){var n=GQe(t),i=t*8-e-1,o=(1<<i)-1,a=o>>1,c=e===23?jf(2,-24)-jf(2,-77):0,h=r<0||r===0&&1/r<0?1:0,d=0,v,x,S;for(r=$Qe(r),r!==r||r===1/0?(x=r!==r?1:0,v=o):(v=HQe(WQe(r)/ZQe),S=jf(2,-v),r*S<1&&(v--,S*=2),v+a>=1?r+=c/S:r+=c*jf(2,1-a),r*S>=2&&(v++,S/=2),v+a>=o?(x=0,v=o):v+a>=1?(x=(r*S-1)*jf(2,e),v+=a):(x=r*jf(2,a-1)*jf(2,e),v=0));e>=8;)n[d++]=x&255,x/=256,e-=8;for(v=v<<e|x,i+=e;i>0;)n[d++]=v&255,v/=256,i-=8;return n[--d]|=h*128,n},KQe=function(r,e){var t=r.length,n=t*8-e-1,i=(1<<n)-1,o=i>>1,a=n-7,c=t-1,h=r[c--],d=h&127,v;for(h>>=7;a>0;)d=d*256+r[c--],a-=8;for(v=d&(1<<-a)-1,d>>=-a,a+=e;a>0;)v=v*256+r[c--],a-=8;if(d===0)d=1-o;else{if(d===i)return v?NaN:h?-1/0:1/0;v+=jf(2,e),d-=o}return(h?-1:1)*v*jf(2,d-e)};iae.exports={pack:YQe,unpack:KQe}});var Wb=A((clr,bae)=>{"use strict";var rM=Ht(),y4=rt(),h4=fr(),XQe=WC(),gae=Mm(),oae=Hi(),JQe=ci(),aae=Ul(),p4=ft(),XC=wa(),QQe=ri(),eet=xs(),eM=My(),tet=YC(),yae=KC(),ret=Wi(),sae=zl(),net=Rf().f,iet=jC(),oet=Om(),_ae=bs(),_4=vn(),aet=gae.PROPER,lae=gae.CONFIGURABLE,Py="ArrayBuffer",nM="DataView",Oy="prototype",set="Wrong length",xae="Wrong index",uae=_4.getterFor(Py),Hb=_4.getterFor(nM),cae=_4.set,Vl=rM[Py],al=Vl,Ry=al&&al[Oy],Ec=rM[nM],Um=Ec&&Ec[Oy],fae=Object.prototype,uet=rM.Array,tM=rM.RangeError,cet=y4(iet),fet=y4([].reverse),wae=yae.pack,hae=yae.unpack,pae=function(r){return[r&255]},dae=function(r){return[r&255,r>>8&255]},mae=function(r){return[r&255,r>>8&255,r>>16&255,r>>24&255]},vae=function(r){return r[3]<<24|r[2]<<16|r[1]<<8|r[0]},het=function(r){return wae(tet(r),23,4)},pet=function(r){return wae(r,52,8)},JC=function(r,e,t){JQe(r[Oy],e,{configurable:!0,get:function(){return t(this)[e]}})},zp=function(r,e,t,n){var i=Hb(r),o=eM(t),a=!!n;if(o+e>i.byteLength)throw new tM(xae);var c=i.bytes,h=o+i.byteOffset,d=oet(c,h,h+e);return a?d:fet(d)},Bp=function(r,e,t,n,i,o){var a=Hb(r),c=eM(t),h=n(+i),d=!!o;if(c+e>a.byteLength)throw new tM(xae);for(var v=a.bytes,x=c+a.byteOffset,S=0;S<e;S++)v[x+S]=h[d?S:e-S-1]};if(!XQe)al=function(e){XC(this,Ry);var t=eM(e);cae(this,{type:Py,bytes:cet(uet(t),0),byteLength:t}),h4||(this.byteLength=t,this.detached=!1)},Ry=al[Oy],Ec=function(e,t,n){XC(this,Um),XC(e,Ry);var i=uae(e),o=i.byteLength,a=QQe(t);if(a<0||a>o)throw new tM("Wrong offset");if(n=n===void 0?o-a:eet(n),a+n>o)throw new tM(set);cae(this,{type:nM,buffer:e,byteLength:n,byteOffset:a,bytes:i.bytes}),h4||(this.buffer=e,this.byteLength=n,this.byteOffset=a)},Um=Ec[Oy],h4&&(JC(al,"byteLength",uae),JC(Ec,"buffer",Hb),JC(Ec,"byteLength",Hb),JC(Ec,"byteOffset",Hb)),aae(Um,{getInt8:function(e){return zp(this,1,e)[0]<<24>>24},getUint8:function(e){return zp(this,1,e)[0]},getInt16:function(e){var t=zp(this,2,e,arguments.length>1?arguments[1]:!1);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=zp(this,2,e,arguments.length>1?arguments[1]:!1);return t[1]<<8|t[0]},getInt32:function(e){return vae(zp(this,4,e,arguments.length>1?arguments[1]:!1))},getUint32:function(e){return vae(zp(this,4,e,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(e){return hae(zp(this,4,e,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(e){return hae(zp(this,8,e,arguments.length>1?arguments[1]:!1),52)},setInt8:function(e,t){Bp(this,1,e,pae,t)},setUint8:function(e,t){Bp(this,1,e,pae,t)},setInt16:function(e,t){Bp(this,2,e,dae,t,arguments.length>2?arguments[2]:!1)},setUint16:function(e,t){Bp(this,2,e,dae,t,arguments.length>2?arguments[2]:!1)},setInt32:function(e,t){Bp(this,4,e,mae,t,arguments.length>2?arguments[2]:!1)},setUint32:function(e,t){Bp(this,4,e,mae,t,arguments.length>2?arguments[2]:!1)},setFloat32:function(e,t){Bp(this,4,e,het,t,arguments.length>2?arguments[2]:!1)},setFloat64:function(e,t){Bp(this,8,e,pet,t,arguments.length>2?arguments[2]:!1)}});else{if(d4=aet&&Vl.name!==Py,!p4(function(){Vl(1)})||!p4(function(){new Vl(-1)})||p4(function(){return new Vl,new Vl(1.5),new Vl(NaN),Vl.length!==1||d4&&!lae})){for(al=function(e){return XC(this,Ry),new Vl(eM(e))},al[Oy]=Ry,m4=net(Vl),v4=0;m4.length>v4;)(QC=m4[v4++])in al||oae(al,QC,Vl[QC]);Ry.constructor=al}else d4&&lae&&oae(Vl,"name",Py);sae&&ret(Um)!==fae&&sae(Um,fae),$b=new Ec(new al(2)),g4=y4(Um.setInt8),$b.setInt8(0,2147483648),$b.setInt8(1,2147483649),($b.getInt8(0)||!$b.getInt8(1))&&aae(Um,{setInt8:function(e,t){g4(this,e,t<<24>>24)},setUint8:function(e,t){g4(this,e,t<<24>>24)}},{unsafe:!0})}var d4,m4,v4,QC,$b,g4;_ae(al,Py);_ae(Ec,nM);bae.exports={ArrayBuffer:al,DataView:Ec}});var Eae=A(()=>{"use strict";var det=te(),met=Ht(),vet=Wb(),get=Fp(),x4="ArrayBuffer",Sae=vet[x4],yet=met[x4];det({global:!0,constructor:!0,forced:yet!==Sae},{ArrayBuffer:Sae});get(x4)});var jr=A((plr,Dae)=>{"use strict";var _et=WC(),E4=fr(),Ha=Ht(),Cae=Er(),aM=Ir(),Vp=qr(),I4=ws(),xet=Pp(),wet=Hi(),w4=En(),bet=ci(),Eet=_a(),sM=Wi(),Dy=zl(),Iet=hr(),Tet=Op(),Mae=vn(),Rae=Mae.enforce,Aet=Mae.get,iM=Ha.Int8Array,b4=iM&&iM.prototype,Iae=Ha.Uint8ClampedArray,Tae=Iae&&Iae.prototype,Ic=iM&&sM(iM),ju=b4&&sM(b4),Cet=Object.prototype,T4=Ha.TypeError,Aae=Iet("toStringTag"),S4=Tet("TYPED_ARRAY_TAG"),oM="TypedArrayConstructor",Ff=_et&&!!Dy&&I4(Ha.opera)!=="Opera",Pae=!1,Es,Up,Ly,zf={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},A4={BigInt64Array:8,BigUint64Array:8},Met=function(e){if(!aM(e))return!1;var t=I4(e);return t==="DataView"||Vp(zf,t)||Vp(A4,t)},Oae=function(r){var e=sM(r);if(aM(e)){var t=Aet(e);return t&&Vp(t,oM)?t[oM]:Oae(e)}},Lae=function(r){if(!aM(r))return!1;var e=I4(r);return Vp(zf,e)||Vp(A4,e)},Ret=function(r){if(Lae(r))return r;throw new T4("Target is not a typed array")},Pet=function(r){if(Cae(r)&&(!Dy||Eet(Ic,r)))return r;throw new T4(xet(r)+" is not a typed array constructor")},Oet=function(r,e,t,n){if(E4){if(t)for(var i in zf){var o=Ha[i];if(o&&Vp(o.prototype,r))try{delete o.prototype[r]}catch(a){try{o.prototype[r]=e}catch(c){}}}(!ju[r]||t)&&w4(ju,r,t?e:Ff&&b4[r]||e,n)}},Let=function(r,e,t){var n,i;if(E4){if(Dy){if(t){for(n in zf)if(i=Ha[n],i&&Vp(i,r))try{delete i[r]}catch(o){}}if(!Ic[r]||t)try{return w4(Ic,r,t?e:Ff&&Ic[r]||e)}catch(o){}else return}for(n in zf)i=Ha[n],i&&(!i[r]||t)&&w4(i,r,e)}};for(Es in zf)Up=Ha[Es],Ly=Up&&Up.prototype,Ly?Rae(Ly)[oM]=Up:Ff=!1;for(Es in A4)Up=Ha[Es],Ly=Up&&Up.prototype,Ly&&(Rae(Ly)[oM]=Up);if((!Ff||!Cae(Ic)||Ic===Function.prototype)&&(Ic=function(){throw new T4("Incorrect invocation")},Ff))for(Es in zf)Ha[Es]&&Dy(Ha[Es],Ic);if((!Ff||!ju||ju===Cet)&&(ju=Ic.prototype,Ff))for(Es in zf)Ha[Es]&&Dy(Ha[Es].prototype,ju);Ff&&sM(Tae)!==ju&&Dy(Tae,ju);if(E4&&!Vp(ju,Aae)){Pae=!0,bet(ju,Aae,{configurable:!0,get:function(){return aM(this)?this[S4]:void 0}});for(Es in zf)Ha[Es]&&wet(Ha[Es],S4,Es)}Dae.exports={NATIVE_ARRAY_BUFFER_VIEWS:Ff,TYPED_ARRAY_TAG:Pae&&S4,aTypedArray:Ret,aTypedArrayConstructor:Pet,exportTypedArrayMethod:Oet,exportTypedArrayStaticMethod:Let,getTypedArrayConstructor:Oae,isView:Met,isTypedArray:Lae,TypedArray:Ic,TypedArrayPrototype:ju}});var kae=A(()=>{"use strict";var Det=te(),Nae=jr(),Net=Nae.NATIVE_ARRAY_BUFFER_VIEWS;Det({target:"ArrayBuffer",stat:!0,forced:!Net},{isView:Nae.isView})});var Ny=A((vlr,qae)=>{"use strict";var ket=qu(),qet=Pp(),jet=TypeError;qae.exports=function(r){if(ket(r))return r;throw new jet(qet(r)+" is not a constructor")}});var Vm=A((glr,Fae)=>{"use strict";var jae=Lt(),Fet=Ny(),zet=$i(),Bet=hr(),Uet=Bet("species");Fae.exports=function(r,e){var t=jae(r).constructor,n;return t===void 0||zet(n=jae(t)[Uet])?e:Fet(n)}});var $ae=A(()=>{"use strict";var Vet=te(),M4=Pf(),Get=ft(),Vae=Wb(),zae=Lt(),Bae=ql(),$et=xs(),Het=Vm(),R4=Vae.ArrayBuffer,C4=Vae.DataView,Gae=C4.prototype,Uae=M4(R4.prototype.slice),Wet=M4(Gae.getUint8),Zet=M4(Gae.setUint8),Yet=Get(function(){return!new R4(2).slice(1,void 0).byteLength});Vet({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Yet},{slice:function(e,t){if(Uae&&t===void 0)return Uae(zae(this),e);for(var n=zae(this).byteLength,i=Bae(e,n),o=Bae(t===void 0?n:t,n),a=new(Het(this,R4))($et(o-i)),c=new C4(this),h=new C4(a),d=0;i<o;)Zet(h,d++,Wet(c,i++));return a}})});var Hae=A(()=>{"use strict";var Ket=te(),Xet=Wb(),Jet=WC();Ket({global:!0,constructor:!0,forced:!Jet},{DataView:Xet.DataView})});var Wae=A(()=>{"use strict";Hae()});var Zae=A(()=>{"use strict";var Qet=te(),ett=rt(),ttt=ft(),rtt=ttt(function(){return new Date(16e11).getYear()!==120}),ntt=ett(Date.prototype.getFullYear);Qet({target:"Date",proto:!0,forced:rtt},{getYear:function(){return ntt(this)-1900}})});var Kae=A(()=>{"use strict";var itt=te(),ott=rt(),Yae=Date,att=ott(Yae.prototype.getTime);itt({target:"Date",stat:!0},{now:function(){return att(new Yae)}})});var Qae=A(()=>{"use strict";var stt=te(),Xae=rt(),ltt=ri(),Jae=Date.prototype,utt=Xae(Jae.getTime),ctt=Xae(Jae.setFullYear);stt({target:"Date",proto:!0},{setYear:function(e){utt(this);var t=ltt(e),n=t>=0&&t<=99?t+1900:t;return ctt(this,n)}})});var ese=A(()=>{"use strict";var ftt=te();ftt({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var Zb=A((Olr,tse)=>{"use strict";var htt=ri(),ptt=wr(),dtt=ti(),mtt=RangeError;tse.exports=function(e){var t=ptt(dtt(this)),n="",i=htt(e);if(i<0||i===1/0)throw new mtt("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))i&1&&(n+=t);return n}});var lM=A((Llr,ose)=>{"use strict";var ise=rt(),vtt=xs(),rse=wr(),gtt=Zb(),ytt=ti(),_tt=ise(gtt),xtt=ise("".slice),wtt=Math.ceil,nse=function(r){return function(e,t,n){var i=rse(ytt(e)),o=vtt(t),a=i.length,c=n===void 0?" ":rse(n),h,d;return o<=a||c===""?i:(h=o-a,d=_tt(c,wtt(h/c.length)),d.length>h&&(d=xtt(d,0,h)),r?i+d:d+i)}};ose.exports={start:nse(!1),end:nse(!0)}});var lse=A((Dlr,sse)=>{"use strict";var Gp=rt(),ase=ft(),Gm=lM().start,btt=RangeError,Stt=isFinite,Ett=Math.abs,Bf=Date.prototype,P4=Bf.toISOString,Itt=Gp(Bf.getTime),Ttt=Gp(Bf.getUTCDate),Att=Gp(Bf.getUTCFullYear),Ctt=Gp(Bf.getUTCHours),Mtt=Gp(Bf.getUTCMilliseconds),Rtt=Gp(Bf.getUTCMinutes),Ptt=Gp(Bf.getUTCMonth),Ott=Gp(Bf.getUTCSeconds);sse.exports=ase(function(){return P4.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!ase(function(){P4.call(new Date(NaN))})?function(){if(!Stt(Itt(this)))throw new btt("Invalid time value");var e=this,t=Att(e),n=Mtt(e),i=t<0?"-":t>9999?"+":"";return i+Gm(Ett(t),i?6:4,0)+"-"+Gm(Ptt(e)+1,2,0)+"-"+Gm(Ttt(e),2,0)+"T"+Gm(Ctt(e),2,0)+":"+Gm(Rtt(e),2,0)+":"+Gm(Ott(e),2,0)+"."+Gm(n,3,0)+"Z"}:P4});var cse=A(()=>{"use strict";var Ltt=te(),use=lse();Ltt({target:"Date",proto:!0,forced:Date.prototype.toISOString!==use},{toISOString:use})});var fse=A(()=>{"use strict";var Dtt=te(),Ntt=ft(),ktt=Gr(),qtt=bb(),jtt=Ntt(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});Dtt({target:"Date",proto:!0,arity:1,forced:jtt},{toJSON:function(e){var t=ktt(this),n=qtt(t,"number");return typeof n=="number"&&!isFinite(n)?null:t.toISOString()}})});var pse=A((Flr,hse)=>{"use strict";var Ftt=Lt(),ztt=IF(),Btt=TypeError;hse.exports=function(r){if(Ftt(this),r==="string"||r==="default")r="string";else if(r!=="number")throw new Btt("Incorrect hint");return ztt(this,r)}});var vse=A(()=>{"use strict";var Utt=qr(),Vtt=En(),Gtt=pse(),$tt=hr(),dse=$tt("toPrimitive"),mse=Date.prototype;Utt(mse,dse)||Vtt(mse,dse,Gtt)});var xse=A(()=>{"use strict";var yse=rt(),Htt=En(),O4=Date.prototype,gse="Invalid Date",_se="toString",Wtt=yse(O4[_se]),Ztt=yse(O4.getTime);String(new Date(NaN))!==gse&&Htt(O4,_se,function(){var e=Ztt(this);return e===e?Wtt(this):gse})});var bse=A(()=>{"use strict";var Ytt=te(),Yb=rt(),Ktt=wr(),Xtt=Yb("".charAt),Jtt=Yb("".charCodeAt),Qtt=Yb(/./.exec),ert=Yb(1 .toString),trt=Yb("".toUpperCase),rrt=/[\w*+\-./@]/,wse=function(r,e){for(var t=ert(r,16);t.length<e;)t="0"+t;return t};Ytt({global:!0},{escape:function(e){for(var t=Ktt(e),n="",i=t.length,o=0,a,c;o<i;)a=Xtt(t,o++),Qtt(rrt,a)?n+=a:(c=Jtt(a,0),c<256?n+="%"+wse(c,2):n+="%u"+trt(wse(c,4)));return n}})});var D4=A((Hlr,Tse)=>{"use strict";var Ese=rt(),nrt=xr(),irt=Ir(),ort=qr(),Sse=Lf(),art=yy(),Ise=Function,srt=Ese([].concat),lrt=Ese([].join),L4={},urt=function(r,e,t){if(!ort(L4,e)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";L4[e]=Ise("C,a","return new C("+lrt(n,",")+")")}return L4[e](r,t)};Tse.exports=art?Ise.bind:function(e){var t=nrt(this),n=t.prototype,i=Sse(arguments,1),o=function(){var c=srt(i,Sse(arguments));return this instanceof o?urt(t,c.length,c):t.apply(e,c)};return irt(n)&&(o.prototype=n),o}});var Cse=A(()=>{"use strict";var crt=te(),Ase=D4();crt({target:"Function",proto:!0,forced:Function.bind!==Ase},{bind:Ase})});var Pse=A(()=>{"use strict";var frt=Er(),Mse=Ir(),hrt=Zn(),prt=Wi(),drt=hr(),mrt=Ab(),N4=drt("hasInstance"),Rse=Function.prototype;N4 in Rse||hrt.f(Rse,N4,{value:mrt(function(r){if(!frt(this)||!Mse(r))return!1;var e=this.prototype;if(!Mse(e))return r instanceof this;for(;r=prt(r);)if(e===r)return!0;return!1},N4)})});var Nse=A(()=>{"use strict";var vrt=fr(),grt=Mm().EXISTS,Ose=rt(),yrt=ci(),Lse=Function.prototype,_rt=Ose(Lse.toString),Dse=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,xrt=Ose(Dse.exec),wrt="name";vrt&&!grt&&yrt(Lse,wrt,{configurable:!0,get:function(){try{return xrt(Dse,_rt(this))[1]}catch(r){return""}}})});var q4=A(()=>{"use strict";var brt=te(),k4=Ht();brt({global:!0,forced:k4.globalThis!==k4},{globalThis:k4})});var kse=A(()=>{"use strict";var Srt=Ht(),Ert=bs();Ert(Srt.JSON,"JSON",!0)});var uM=A((nur,qse)=>{"use strict";var Irt=ft();qse.exports=Irt(function(){if(typeof ArrayBuffer=="function"){var r=new ArrayBuffer(8);Object.isExtensible(r)&&Object.defineProperty(r,"a",{value:8})}})});var fM=A((iur,Fse)=>{"use strict";var Trt=ft(),Art=Ir(),Crt=Wo(),jse=uM(),cM=Object.isExtensible,Mrt=Trt(function(){cM(1)});Fse.exports=Mrt||jse?function(e){return!Art(e)||jse&&Crt(e)==="ArrayBuffer"?!1:cM?cM(e):!0}:cM});var Uf=A((our,zse)=>{"use strict";var Rrt=ft();zse.exports=!Rrt(function(){return Object.isExtensible(Object.preventExtensions({}))})});var $p=A((aur,Vse)=>{"use strict";var Prt=te(),Ort=rt(),Lrt=xy(),Drt=Ir(),j4=qr(),Nrt=Zn().f,Bse=Rf(),krt=_C(),F4=fM(),qrt=Op(),jrt=Uf(),Use=!1,Vf=qrt("meta"),Frt=0,z4=function(r){Nrt(r,Vf,{value:{objectID:"O"+Frt++,weakData:{}}})},zrt=function(r,e){if(!Drt(r))return typeof r=="symbol"?r:(typeof r=="string"?"S":"P")+r;if(!j4(r,Vf)){if(!F4(r))return"F";if(!e)return"E";z4(r)}return r[Vf].objectID},Brt=function(r,e){if(!j4(r,Vf)){if(!F4(r))return!0;if(!e)return!1;z4(r)}return r[Vf].weakData},Urt=function(r){return jrt&&Use&&F4(r)&&!j4(r,Vf)&&z4(r),r},Vrt=function(){Grt.enable=function(){},Use=!0;var r=Bse.f,e=Ort([].splice),t={};t[Vf]=1,r(t).length&&(Bse.f=function(n){for(var i=r(n),o=0,a=i.length;o<a;o++)if(i[o]===Vf){e(i,o,1);break}return i},Prt({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:krt.f}))},Grt=Vse.exports={enable:Vrt,fastKey:zrt,getWeakData:Brt,onFreeze:Urt};Lrt[Vf]=!0});var Kb=A((sur,$se)=>{"use strict";var $rt=te(),Hrt=Ht(),Wrt=rt(),Gse=Sy(),Zrt=En(),Yrt=$p(),Krt=Pi(),Xrt=wa(),Jrt=Er(),Qrt=$i(),B4=Ir(),U4=ft(),ent=zb(),tnt=bs(),rnt=km();$se.exports=function(r,e,t){var n=r.indexOf("Map")!==-1,i=r.indexOf("Weak")!==-1,o=n?"set":"add",a=Hrt[r],c=a&&a.prototype,h=a,d={},v=function(D){var j=Wrt(c[D]);Zrt(c,D,D==="add"?function($){return j(this,$===0?0:$),this}:D==="delete"?function(B){return i&&!B4(B)?!1:j(this,B===0?0:B)}:D==="get"?function($){return i&&!B4($)?void 0:j(this,$===0?0:$)}:D==="has"?function($){return i&&!B4($)?!1:j(this,$===0?0:$)}:function($,ee){return j(this,$===0?0:$,ee),this})},x=Gse(r,!Jrt(a)||!(i||c.forEach&&!U4(function(){new a().entries().next()})));if(x)h=t.getConstructor(e,r,n,o),Yrt.enable();else if(Gse(r,!0)){var S=new h,T=S[o](i?{}:-0,1)!==S,L=U4(function(){S.has(1)}),k=ent(function(D){new a(D)}),R=!i&&U4(function(){for(var D=new a,j=5;j--;)D[o](j,j);return!D.has(-0)});k||(h=e(function(D,j){Xrt(D,c);var B=rnt(new a,D,h);return Qrt(j)||Krt(j,B[o],{that:B,AS_ENTRIES:n}),B}),h.prototype=c,c.constructor=h),(L||R)&&(v("delete"),v("has"),n&&v("get")),(R||T)&&v(o),i&&c.clear&&delete c.clear}return d[r]=h,$rt({global:!0,constructor:!0,forced:h!==a},d),tnt(h,r),i||t.setStrong(h,r,n),h}});var G4=A((lur,Kse)=>{"use strict";var nnt=Bi(),int=ci(),Hse=Ul(),ont=kn(),ant=wa(),snt=$i(),lnt=Pi(),unt=UC(),hM=Zo(),cnt=Fp(),Xb=fr(),Wse=$p().fastKey,Yse=vn(),Zse=Yse.set,V4=Yse.getterFor;Kse.exports={getConstructor:function(r,e,t,n){var i=r(function(d,v){ant(d,o),Zse(d,{type:e,index:nnt(null),first:void 0,last:void 0,size:0}),Xb||(d.size=0),snt(v)||lnt(v,d[n],{that:d,AS_ENTRIES:t})}),o=i.prototype,a=V4(e),c=function(d,v,x){var S=a(d),T=h(d,v),L,k;return T?T.value=x:(S.last=T={index:k=Wse(v,!0),key:v,value:x,previous:L=S.last,next:void 0,removed:!1},S.first||(S.first=T),L&&(L.next=T),Xb?S.size++:d.size++,k!=="F"&&(S.index[k]=T)),d},h=function(d,v){var x=a(d),S=Wse(v),T;if(S!=="F")return x.index[S];for(T=x.first;T;T=T.next)if(T.key===v)return T};return Hse(o,{clear:function(){for(var v=this,x=a(v),S=x.index,T=x.first;T;)T.removed=!0,T.previous&&(T.previous=T.previous.next=void 0),delete S[T.index],T=T.next;x.first=x.last=void 0,Xb?x.size=0:v.size=0},delete:function(d){var v=this,x=a(v),S=h(v,d);if(S){var T=S.next,L=S.previous;delete x.index[S.index],S.removed=!0,L&&(L.next=T),T&&(T.previous=L),x.first===S&&(x.first=T),x.last===S&&(x.last=L),Xb?x.size--:v.size--}return!!S},forEach:function(v){for(var x=a(this),S=ont(v,arguments.length>1?arguments[1]:void 0),T;T=T?T.next:x.first;)for(S(T.value,T.key,this);T&&T.removed;)T=T.previous},has:function(v){return!!h(this,v)}}),Hse(o,t?{get:function(v){var x=h(this,v);return x&&x.value},set:function(v,x){return c(this,v===0?0:v,x)}}:{add:function(v){return c(this,v=v===0?0:v,v)}}),Xb&&int(o,"size",{configurable:!0,get:function(){return a(this).size}}),i},setStrong:function(r,e,t){var n=e+" Iterator",i=V4(e),o=V4(n);unt(r,e,function(a,c){Zse(this,{type:n,target:a,state:i(a),kind:c,last:void 0})},function(){for(var a=o(this),c=a.kind,h=a.last;h&&h.removed;)h=h.previous;return!a.target||!(a.last=h=h?h.next:a.state.first)?(a.target=void 0,hM(void 0,!0)):hM(c==="keys"?h.key:c==="values"?h.value:[h.key,h.value],!1)},t?"entries":"values",!t,!0),cnt(e)}}});var Xse=A(()=>{"use strict";var fnt=Kb(),hnt=G4();fnt("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},hnt)});var pM=A(()=>{"use strict";Xse()});var $4=A((pur,Jse)=>{"use strict";var pnt=Math.log;Jse.exports=Math.log1p||function(e){var t=+e;return t>-1e-8&&t<1e-8?t-t*t/2:pnt(1+t)}});var ele=A(()=>{"use strict";var dnt=te(),mnt=$4(),H4=Math.acosh,vnt=Math.log,Qse=Math.sqrt,gnt=Math.LN2,ynt=!H4||Math.floor(H4(Number.MAX_VALUE))!==710||H4(1/0)!==1/0;dnt({target:"Math",stat:!0,forced:ynt},{acosh:function(e){var t=+e;return t<1?NaN:t>94906265.62425156?vnt(t)+gnt:mnt(t-1+Qse(t-1)*Qse(t+1))}})});var nle=A(()=>{"use strict";var _nt=te(),tle=Math.asinh,xnt=Math.log,wnt=Math.sqrt;function rle(r){var e=+r;return!isFinite(e)||e===0?e:e<0?-rle(-e):xnt(e+wnt(e*e+1))}var bnt=!(tle&&1/tle(0)>0);_nt({target:"Math",stat:!0,forced:bnt},{asinh:rle})});var ole=A(()=>{"use strict";var Snt=te(),ile=Math.atanh,Ent=Math.log,Int=!(ile&&1/ile(-0)<0);Snt({target:"Math",stat:!0,forced:Int},{atanh:function(e){var t=+e;return t===0?t:Ent((1+t)/(1-t))/2}})});var ale=A(()=>{"use strict";var Tnt=te(),Ant=ZC(),Cnt=Math.abs,Mnt=Math.pow;Tnt({target:"Math",stat:!0},{cbrt:function(e){var t=+e;return Ant(t)*Mnt(Cnt(t),1/3)}})});var sle=A(()=>{"use strict";var Rnt=te(),Pnt=Math.floor,Ont=Math.log,Lnt=Math.LOG2E;Rnt({target:"Math",stat:!0},{clz32:function(e){var t=e>>>0;return t?31-Pnt(Ont(t+.5)*Lnt):32}})});var Qb=A((Eur,lle)=>{"use strict";var Jb=Math.expm1,Dnt=Math.exp;lle.exports=!Jb||Jb(10)>22025.465794806718||Jb(10)<22025.465794806718||Jb(-2e-17)!==-2e-17?function(e){var t=+e;return t===0?t:t>-1e-6&&t<1e-6?t+t*t/2:Dnt(t)-1}:Jb});var cle=A(()=>{"use strict";var Nnt=te(),knt=Qb(),ule=Math.cosh,qnt=Math.abs,W4=Math.E,jnt=!ule||ule(710)===1/0;Nnt({target:"Math",stat:!0,forced:jnt},{cosh:function(e){var t=knt(qnt(e)-1)+1;return(t+1/(t*W4*W4))*(W4/2)}})});var hle=A(()=>{"use strict";var Fnt=te(),fle=Qb();Fnt({target:"Math",stat:!0,forced:fle!==Math.expm1},{expm1:fle})});var ple=A(()=>{"use strict";var znt=te(),Bnt=YC();znt({target:"Math",stat:!0},{fround:Bnt})});var mle=A(()=>{"use strict";var Unt=te(),dle=Math.hypot,Vnt=Math.abs,Gnt=Math.sqrt,$nt=!!dle&&dle(1/0,NaN)!==1/0;Unt({target:"Math",stat:!0,arity:2,forced:$nt},{hypot:function(e,t){for(var n=0,i=0,o=arguments.length,a=0,c,h;i<o;)c=Vnt(arguments[i++]),a<c?(h=a/c,n=n*h*h+1,a=c):c>0?(h=c/a,n+=h*h):n+=c;return a===1/0?1/0:a*Gnt(n)}})});var gle=A(()=>{"use strict";var Hnt=te(),Wnt=ft(),vle=Math.imul,Znt=Wnt(function(){return vle(4294967295,5)!==-5||vle.length!==2});Hnt({target:"Math",stat:!0,forced:Znt},{imul:function(e,t){var n=65535,i=+e,o=+t,a=n&i,c=n&o;return 0|a*c+((n&i>>>16)*c+a*(n&o>>>16)<<16>>>0)}})});var Z4=A((Nur,yle)=>{"use strict";var Ynt=Math.log,Knt=Math.LOG10E;yle.exports=Math.log10||function(e){return Ynt(e)*Knt}});var _le=A(()=>{"use strict";var Xnt=te(),Jnt=Z4();Xnt({target:"Math",stat:!0},{log10:Jnt})});var xle=A(()=>{"use strict";var Qnt=te(),eit=$4();Qnt({target:"Math",stat:!0},{log1p:eit})});var wle=A(()=>{"use strict";var tit=te(),rit=Math.log,nit=Math.LN2;tit({target:"Math",stat:!0},{log2:function(e){return rit(e)/nit}})});var ble=A(()=>{"use strict";var iit=te(),oit=ZC();iit({target:"Math",stat:!0},{sign:oit})});var Ile=A(()=>{"use strict";var ait=te(),sit=ft(),Sle=Qb(),lit=Math.abs,Ele=Math.exp,uit=Math.E,cit=sit(function(){return Math.sinh(-2e-17)!==-2e-17});ait({target:"Math",stat:!0,forced:cit},{sinh:function(e){var t=+e;return lit(t)<1?(Sle(t)-Sle(-t))/2:(Ele(t-1)-Ele(-t-1))*(uit/2)}})});var Cle=A(()=>{"use strict";var fit=te(),Tle=Qb(),Ale=Math.exp;fit({target:"Math",stat:!0},{tanh:function(e){var t=+e,n=Tle(t),i=Tle(-t);return n===1/0?1:i===1/0?-1:(n-i)/(Ale(t)+Ale(-t))}})});var Mle=A(()=>{"use strict";var hit=bs();hit(Math,"Math",!0)});var Rle=A(()=>{"use strict";var pit=te(),dit=VF();pit({target:"Math",stat:!0},{trunc:dit})});var e1=A((Jur,Ple)=>{"use strict";var mit=rt();Ple.exports=mit(1 .valueOf)});var $m=A((Qur,Ole)=>{"use strict";Ole.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var Hm=A((ecr,Dle)=>{"use strict";var vit=rt(),git=ti(),yit=wr(),K4=$m(),Lle=vit("".replace),_it=RegExp("^["+K4+"]+"),xit=RegExp("(^|[^"+K4+"])["+K4+"]+$"),Y4=function(r){return function(e){var t=yit(git(e));return r&1&&(t=Lle(t,_it,"")),r&2&&(t=Lle(t,xit,"$1")),t}};Dle.exports={start:Y4(1),end:Y4(2),trim:Y4(3)}});var Ble=A(()=>{"use strict";var wit=te(),X4=Vr(),bit=fr(),qle=Ht(),J4=xC(),jle=rt(),Sit=Sy(),Nle=qr(),Eit=km(),Iit=_a(),Tit=Mf(),Fle=bb(),Ait=ft(),Cit=Rf().f,Mit=go().f,Rit=Zn().f,Pit=e1(),Oit=Hm().trim,t1="Number",ky=qle[t1],kle=J4[t1],Q4=ky.prototype,Lit=qle.TypeError,Dit=jle("".slice),dM=jle("".charCodeAt),Nit=function(r){var e=Fle(r,"number");return typeof e=="bigint"?e:kit(e)},kit=function(r){var e=Fle(r,"number"),t,n,i,o,a,c,h,d;if(Tit(e))throw new Lit("Cannot convert a Symbol value to a number");if(typeof e=="string"&&e.length>2){if(e=Oit(e),t=dM(e,0),t===43||t===45){if(n=dM(e,2),n===88||n===120)return NaN}else if(t===48){switch(dM(e,1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+e;}for(a=Dit(e,2),c=a.length,h=0;h<c;h++)if(d=dM(a,h),d<48||d>o)return NaN;return parseInt(a,i)}}return+e},eB=Sit(t1,!ky(" 0o1")||!ky("0b1")||ky("+0x1")),qit=function(r){return Iit(Q4,r)&&Ait(function(){Pit(r)})},mM=function(e){var t=arguments.length<1?0:ky(Nit(e));return qit(this)?Eit(Object(t),this,mM):t};mM.prototype=Q4;eB&&!X4&&(Q4.constructor=mM);wit({global:!0,constructor:!0,wrap:!0,forced:eB},{Number:mM});var zle=function(r,e){for(var t=bit?Cit(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),n=0,i;t.length>n;n++)Nle(e,i=t[n])&&!Nle(r,i)&&Rit(r,i,Mit(e,i))};X4&&kle&&zle(J4[t1],kle);(eB||X4)&&zle(J4[t1],ky)});var Ule=A(()=>{"use strict";var jit=te();jit({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var tB=A((ocr,Vle)=>{"use strict";var Fit=Ht(),zit=Fit.isFinite;Vle.exports=Number.isFinite||function(e){return typeof e=="number"&&zit(e)}});var Gle=A(()=>{"use strict";var Bit=te(),Uit=tB();Bit({target:"Number",stat:!0},{isFinite:Uit})});var vM=A((lcr,$le)=>{"use strict";var Vit=Ir(),Git=Math.floor;$le.exports=Number.isInteger||function(e){return!Vit(e)&&isFinite(e)&&Git(e)===e}});var Hle=A(()=>{"use strict";var $it=te(),Hit=vM();$it({target:"Number",stat:!0},{isInteger:Hit})});var Wle=A(()=>{"use strict";var Wit=te();Wit({target:"Number",stat:!0},{isNaN:function(e){return e!==e}})});var Zle=A(()=>{"use strict";var Zit=te(),Yit=vM(),Kit=Math.abs;Zit({target:"Number",stat:!0},{isSafeInteger:function(e){return Yit(e)&&Kit(e)<=9007199254740991}})});var Yle=A(()=>{"use strict";var Xit=te();Xit({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var Kle=A(()=>{"use strict";var Jit=te();Jit({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var rB=A((_cr,eue)=>{"use strict";var Qle=Ht(),Qit=ft(),eot=rt(),tot=wr(),rot=Hm().trim,not=$m(),iot=eot("".charAt),gM=Qle.parseFloat,Xle=Qle.Symbol,Jle=Xle&&Xle.iterator,oot=1/gM(not+"-0")!==-1/0||Jle&&!Qit(function(){gM(Object(Jle))});eue.exports=oot?function(e){var t=rot(tot(e)),n=gM(t);return n===0&&iot(t,0)==="-"?-0:n}:gM});var rue=A(()=>{"use strict";var aot=te(),tue=rB();aot({target:"Number",stat:!0,forced:Number.parseFloat!==tue},{parseFloat:tue})});var yM=A((bcr,lue)=>{"use strict";var aue=Ht(),sot=ft(),lot=rt(),uot=wr(),cot=Hm().trim,nue=$m(),r1=aue.parseInt,iue=aue.Symbol,oue=iue&&iue.iterator,sue=/^[+-]?0x/i,fot=lot(sue.exec),hot=r1(nue+"08")!==8||r1(nue+"0x16")!==22||oue&&!sot(function(){r1(Object(oue))});lue.exports=hot?function(e,t){var n=cot(uot(e));return r1(n,t>>>0||(fot(sue,n)?16:10))}:r1});var cue=A(()=>{"use strict";var pot=te(),uue=yM();pot({target:"Number",stat:!0,forced:Number.parseInt!==uue},{parseInt:uue})});var mue=A(()=>{"use strict";var dot=te(),iB=rt(),mot=ri(),vot=e1(),got=Zb(),yot=Z4(),nB=ft(),_ot=RangeError,fue=String,xot=isFinite,wot=Math.abs,bot=Math.floor,hue=Math.pow,Sot=Math.round,Tc=iB(1 .toExponential),Eot=iB(got),pue=iB("".slice),due=Tc(-69e-12,4)==="-6.9000e-11"&&Tc(1.255,2)==="1.25e+0"&&Tc(12345,3)==="1.235e+4"&&Tc(25,0)==="3e+1",Iot=function(){return nB(function(){Tc(1,1/0)})&&nB(function(){Tc(1,-1/0)})},Tot=function(){return!nB(function(){Tc(1/0,1/0),Tc(NaN,1/0)})},Aot=!due||!Iot()||!Tot();dot({target:"Number",proto:!0,forced:Aot},{toExponential:function(e){var t=vot(this);if(e===void 0)return Tc(t);var n=mot(e);if(!xot(t))return String(t);if(n<0||n>20)throw new _ot("Incorrect fraction digits");if(due)return Tc(t,n);var i="",o="",a=0,c="",h="";if(t<0&&(i="-",t=-t),t===0)a=0,o=Eot("0",n+1);else{var d=yot(t);a=bot(d);var v=0,x=hue(10,a-n);v=Sot(t/x),2*t>=(2*v+1)*x&&(v+=1),v>=hue(10,n+1)&&(v/=10,a+=1),o=fue(v)}return n!==0&&(o=pue(o,0,1)+"."+pue(o,1)),a===0?(c="+",h="0"):(c=a>0?"+":"-",h=fue(wot(a))),o+="e"+c+h,i+o}})});var wue=A(()=>{"use strict";var Cot=te(),sB=rt(),Mot=ri(),Rot=e1(),Pot=Zb(),vue=ft(),Oot=RangeError,_ue=String,xue=Math.floor,aB=sB(Pot),gue=sB("".slice),n1=sB(1 .toFixed),jy=function(r,e,t){return e===0?t:e%2===1?jy(r,e-1,t*r):jy(r*r,e/2,t)},Lot=function(r){for(var e=0,t=r;t>=4096;)e+=12,t/=4096;for(;t>=2;)e+=1,t/=2;return e},qy=function(r,e,t){for(var n=-1,i=t;++n<6;)i+=e*r[n],r[n]=i%1e7,i=xue(i/1e7)},oB=function(r,e){for(var t=6,n=0;--t>=0;)n+=r[t],r[t]=xue(n/e),n=n%e*1e7},yue=function(r){for(var e=6,t="";--e>=0;)if(t!==""||e===0||r[e]!==0){var n=_ue(r[e]);t=t===""?n:t+aB("0",7-n.length)+n}return t},Dot=vue(function(){return n1(8e-5,3)!=="0.000"||n1(.9,0)!=="1"||n1(1.255,2)!=="1.25"||n1(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!vue(function(){n1({})});Cot({target:"Number",proto:!0,forced:Dot},{toFixed:function(e){var t=Rot(this),n=Mot(e),i=[0,0,0,0,0,0],o="",a="0",c,h,d,v;if(n<0||n>20)throw new Oot("Incorrect fraction digits");if(t!==t)return"NaN";if(t<=-1e21||t>=1e21)return _ue(t);if(t<0&&(o="-",t=-t),t>1e-21)if(c=Lot(t*jy(2,69,1))-69,h=c<0?t*jy(2,-c,1):t/jy(2,c,1),h*=4503599627370496,c=52-c,c>0){for(qy(i,0,h),d=n;d>=7;)qy(i,1e7,0),d-=7;for(qy(i,jy(10,d,1),0),d=c-1;d>=23;)oB(i,1<<23),d-=23;oB(i,1<<d),qy(i,1,1),oB(i,2),a=yue(i)}else qy(i,0,h),qy(i,1<<-c,0),a=yue(i)+aB("0",n);return n>0?(v=a.length,a=o+(v<=n?"0."+aB("0",n-v)+a:gue(a,0,v-n)+"."+gue(a,v-n))):a=o+a,a}})});var Eue=A(()=>{"use strict";var Not=te(),kot=rt(),bue=ft(),Sue=e1(),_M=kot(1 .toPrecision),qot=bue(function(){return _M(1,void 0)!=="1"})||!bue(function(){_M({})});Not({target:"Number",proto:!0,forced:qot},{toPrecision:function(e){return e===void 0?_M(Sue(this)):_M(Sue(this),e)}})});var uB=A((Pcr,Aue)=>{"use strict";var Iue=fr(),jot=rt(),Fot=Rt(),zot=ft(),lB=Pm(),Bot=Cb(),Uot=xb(),Vot=Gr(),Got=Cf(),Fy=Object.assign,Tue=Object.defineProperty,$ot=jot([].concat);Aue.exports=!Fy||zot(function(){if(Iue&&Fy({b:1},Fy(Tue({},"a",{enumerable:!0,get:function(){Tue(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var r={},e={},t=Symbol("assign detection"),n="abcdefghijklmnopqrst";return r[t]=7,n.split("").forEach(function(i){e[i]=i}),Fy({},r)[t]!==7||lB(Fy({},e)).join("")!==n})?function(e,t){for(var n=Vot(e),i=arguments.length,o=1,a=Bot.f,c=Uot.f;i>o;)for(var h=Got(arguments[o++]),d=a?$ot(lB(h),a(h)):lB(h),v=d.length,x=0,S;v>x;)S=d[x++],(!Iue||Fot(c,h,S))&&(n[S]=h[S]);return n}:Fy});var Mue=A(()=>{"use strict";var Hot=te(),Cue=uB();Hot({target:"Object",stat:!0,arity:2,forced:Object.assign!==Cue},{assign:Cue})});var Rue=A(()=>{"use strict";var Wot=te(),Zot=fr(),Yot=Bi();Wot({target:"Object",stat:!0,sham:!Zot},{create:Yot})});var i1=A((kcr,Oue)=>{"use strict";var Kot=Vr(),Xot=Ht(),Jot=ft(),Pue=HC();Oue.exports=Kot||!Jot(function(){if(!(Pue&&Pue<535)){var r=Math.random();__defineSetter__.call(null,r,function(){}),delete Xot[r]}})});var Lue=A(()=>{"use strict";var Qot=te(),eat=fr(),tat=i1(),rat=xr(),nat=Gr(),iat=Zn();eat&&Qot({target:"Object",proto:!0,forced:tat},{__defineGetter__:function(e,t){iat.f(nat(this),e,{get:rat(t),enumerable:!0,configurable:!0})}})});var Nue=A(()=>{"use strict";var oat=te(),aat=fr(),Due=vC().f;oat({target:"Object",stat:!0,forced:Object.defineProperties!==Due,sham:!aat},{defineProperties:Due})});var que=A(()=>{"use strict";var sat=te(),lat=fr(),kue=Zn().f;sat({target:"Object",stat:!0,forced:Object.defineProperty!==kue,sham:!lat},{defineProperty:kue})});var jue=A(()=>{"use strict";var uat=te(),cat=fr(),fat=i1(),hat=xr(),pat=Gr(),dat=Zn();cat&&uat({target:"Object",proto:!0,forced:fat},{__defineSetter__:function(e,t){dat.f(pat(this),e,{set:hat(t),enumerable:!0,configurable:!0})}})});var cB=A(($cr,Vue)=>{"use strict";var zue=fr(),mat=ft(),Bue=rt(),vat=Wi(),gat=Pm(),yat=ro(),_at=xb().f,Uue=Bue(_at),xat=Bue([].push),wat=zue&&mat(function(){var r=Object.create(null);return r[2]=2,!Uue(r,2)}),Fue=function(r){return function(e){for(var t=yat(e),n=gat(t),i=wat&&vat(t)===null,o=n.length,a=0,c=[],h;o>a;)h=n[a++],(!zue||(i?h in t:Uue(t,h)))&&xat(c,r?[h,t[h]]:t[h]);return c}};Vue.exports={entries:Fue(!0),values:Fue(!1)}});var Gue=A(()=>{"use strict";var bat=te(),Sat=cB().entries;bat({target:"Object",stat:!0},{entries:function(e){return Sat(e)}})});var $ue=A(()=>{"use strict";var Eat=te(),Iat=Uf(),Tat=ft(),Aat=Ir(),Cat=$p().onFreeze,fB=Object.freeze,Mat=Tat(function(){fB(1)});Eat({target:"Object",stat:!0,forced:Mat,sham:!Iat},{freeze:function(e){return fB&&Aat(e)?fB(Cat(e)):e}})});var Hue=A(()=>{"use strict";var Rat=te(),Pat=Pi(),Oat=jl();Rat({target:"Object",stat:!0},{fromEntries:function(e){var t={};return Pat(e,function(n,i){Oat(t,n,i)},{AS_ENTRIES:!0}),t}})});var Yue=A(()=>{"use strict";var Lat=te(),Dat=ft(),Nat=ro(),Wue=go().f,Zue=fr(),kat=!Zue||Dat(function(){Wue(1)});Lat({target:"Object",stat:!0,forced:kat,sham:!Zue},{getOwnPropertyDescriptor:function(e,t){return Wue(Nat(e),t)}})});var Kue=A(()=>{"use strict";var qat=te(),jat=fr(),Fat=pC(),zat=ro(),Bat=go(),Uat=jl();qat({target:"Object",stat:!0,sham:!jat},{getOwnPropertyDescriptors:function(e){for(var t=zat(e),n=Bat.f,i=Fat(t),o={},a=0,c,h;i.length>a;)h=n(t,c=i[a++]),h!==void 0&&Uat(o,c,h);return o}})});var Xue=A(()=>{"use strict";var Vat=te(),Gat=ft(),$at=_C().f,Hat=Gat(function(){return!Object.getOwnPropertyNames(1)});Vat({target:"Object",stat:!0,forced:Hat},{getOwnPropertyNames:$at})});var Que=A(()=>{"use strict";var Wat=te(),Zat=ft(),Yat=Gr(),Jue=Wi(),Kat=LC(),Xat=Zat(function(){Jue(1)});Wat({target:"Object",stat:!0,forced:Xat,sham:!Kat},{getPrototypeOf:function(e){return Jue(Yat(e))}})});var hB=A(()=>{"use strict";var Jat=te(),Qat=qr();Jat({target:"Object",stat:!0},{hasOwn:Qat})});var pB=A((lfr,ece)=>{"use strict";ece.exports=Object.is||function(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}});var tce=A(()=>{"use strict";var est=te(),tst=pB();est({target:"Object",stat:!0},{is:tst})});var nce=A(()=>{"use strict";var rst=te(),rce=fM();rst({target:"Object",stat:!0,forced:Object.isExtensible!==rce},{isExtensible:rce})});var oce=A(()=>{"use strict";var nst=te(),ist=ft(),ost=Ir(),ast=Wo(),ice=uM(),dB=Object.isFrozen,sst=ice||ist(function(){dB(1)});nst({target:"Object",stat:!0,forced:sst},{isFrozen:function(e){return!ost(e)||ice&&ast(e)==="ArrayBuffer"?!0:dB?dB(e):!1}})});var sce=A(()=>{"use strict";var lst=te(),ust=ft(),cst=Ir(),fst=Wo(),ace=uM(),mB=Object.isSealed,hst=ace||ust(function(){mB(1)});lst({target:"Object",stat:!0,forced:hst},{isSealed:function(e){return!cst(e)||ace&&fst(e)==="ArrayBuffer"?!0:mB?mB(e):!1}})});var uce=A(()=>{"use strict";var pst=te(),dst=Gr(),lce=Pm(),mst=ft(),vst=mst(function(){lce(1)});pst({target:"Object",stat:!0,forced:vst},{keys:function(e){return lce(dst(e))}})});var cce=A(()=>{"use strict";var gst=te(),yst=fr(),_st=i1(),xst=Gr(),wst=Du(),bst=Wi(),Sst=go().f;yst&&gst({target:"Object",proto:!0,forced:_st},{__lookupGetter__:function(e){var t=xst(this),n=wst(e),i;do if(i=Sst(t,n))return i.get;while(t=bst(t))}})});var fce=A(()=>{"use strict";var Est=te(),Ist=fr(),Tst=i1(),Ast=Gr(),Cst=Du(),Mst=Wi(),Rst=go().f;Ist&&Est({target:"Object",proto:!0,forced:Tst},{__lookupSetter__:function(e){var t=Ast(this),n=Cst(e),i;do if(i=Rst(t,n))return i.set;while(t=Mst(t))}})});var hce=A(()=>{"use strict";var Pst=te(),Ost=Ir(),Lst=$p().onFreeze,Dst=Uf(),Nst=ft(),vB=Object.preventExtensions,kst=Nst(function(){vB(1)});Pst({target:"Object",stat:!0,forced:kst,sham:!Dst},{preventExtensions:function(e){return vB&&Ost(e)?vB(Lst(e)):e}})});var yce=A(()=>{"use strict";var qst=fr(),jst=ci(),pce=Ir(),Fst=Gr(),zst=ti(),dce=Object.getPrototypeOf,mce=Object.setPrototypeOf,vce=Object.prototype,gce="__proto__";if(qst&&dce&&mce&&!(gce in vce))try{jst(vce,gce,{configurable:!0,get:function(){return dce(Fst(this))},set:function(e){var t=zst(this);!pce(e)&&e!==null||!pce(t)||mce(t,e)}})}catch(r){}});var _ce=A(()=>{"use strict";var Bst=te(),Ust=Ir(),Vst=$p().onFreeze,Gst=Uf(),$st=ft(),gB=Object.seal,Hst=$st(function(){gB(1)});Bst({target:"Object",stat:!0,forced:Hst,sham:!Gst},{seal:function(e){return gB&&Ust(e)?gB(Vst(e)):e}})});var xce=A(()=>{"use strict";var Wst=te(),Zst=zl();Wst({target:"Object",stat:!0},{setPrototypeOf:Zst})});var bce=A((Pfr,wce)=>{"use strict";var Yst=dC(),Kst=ws();wce.exports=Yst?{}.toString:function(){return"[object "+Kst(this)+"]"}});var Sce=A(()=>{"use strict";var Xst=dC(),Jst=En(),Qst=bce();Xst||Jst(Object.prototype,"toString",Qst,{unsafe:!0})});var Ece=A(()=>{"use strict";var elt=te(),tlt=cB().values;elt({target:"Object",stat:!0},{values:function(e){return tlt(e)}})});var Tce=A(()=>{"use strict";var rlt=te(),Ice=rB();rlt({global:!0,forced:parseFloat!==Ice},{parseFloat:Ice})});var Cce=A(()=>{"use strict";var nlt=te(),Ace=yM();nlt({global:!0,forced:parseInt!==Ace},{parseInt:Ace})});var Gl=A((zfr,Mce)=>{"use strict";var ilt=TypeError;Mce.exports=function(r,e){if(r<e)throw new ilt("Not enough arguments");return r}});var yB=A((Bfr,Rce)=>{"use strict";var olt=_c();Rce.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(olt)});var s1=A((Ufr,Fce)=>{"use strict";var sl=Ht(),alt=xa(),slt=kn(),Pce=Er(),llt=qr(),jce=ft(),Oce=WF(),ult=Lf(),Lce=Sb(),clt=Gl(),flt=yB(),hlt=Sc(),EB=sl.setImmediate,IB=sl.clearImmediate,plt=sl.process,_B=sl.Dispatch,dlt=sl.Function,Dce=sl.MessageChannel,mlt=sl.String,xB=0,o1={},Nce="onreadystatechange",a1,Wm,wB,bB;jce(function(){a1=sl.location});var TB=function(r){if(llt(o1,r)){var e=o1[r];delete o1[r],e()}},SB=function(r){return function(){TB(r)}},kce=function(r){TB(r.data)},qce=function(r){sl.postMessage(mlt(r),a1.protocol+"//"+a1.host)};(!EB||!IB)&&(EB=function(e){clt(arguments.length,1);var t=Pce(e)?e:dlt(e),n=ult(arguments,1);return o1[++xB]=function(){alt(t,void 0,n)},Wm(xB),xB},IB=function(e){delete o1[e]},hlt?Wm=function(r){plt.nextTick(SB(r))}:_B&&_B.now?Wm=function(r){_B.now(SB(r))}:Dce&&!flt?(wB=new Dce,bB=wB.port2,wB.port1.onmessage=kce,Wm=slt(bB.postMessage,bB)):sl.addEventListener&&Pce(sl.postMessage)&&!sl.importScripts&&a1&&a1.protocol!=="file:"&&!jce(qce)?(Wm=qce,sl.addEventListener("message",kce,!1)):Nce in Lce("script")?Wm=function(r){Oce.appendChild(Lce("script"))[Nce]=function(){Oce.removeChild(this),TB(r)}}:Wm=function(r){setTimeout(SB(r),0)});Fce.exports={set:EB,clear:IB}});var AB=A((Vfr,Bce)=>{"use strict";var zce=function(){this.head=null,this.tail=null};zce.prototype={add:function(r){var e={item:r,next:null},t=this.tail;t?t.next=e:this.head=e,this.tail=e},get:function(){var r=this.head;if(r){var e=this.head=r.next;return e===null&&(this.tail=null),r.item}}};Bce.exports=zce});var Vce=A((Gfr,Uce)=>{"use strict";var vlt=_c();Uce.exports=/ipad|iphone|ipod/i.test(vlt)&&typeof Pebble!="undefined"});var $ce=A(($fr,Gce)=>{"use strict";var glt=_c();Gce.exports=/web0s(?!.*chrome)/i.test(glt)});var LB=A((Hfr,Jce)=>{"use strict";var Zm=Ht(),Hce=kn(),ylt=go().f,CB=s1().set,_lt=AB(),xlt=yB(),wlt=Vce(),blt=$ce(),MB=Sc(),Wce=Zm.MutationObserver||Zm.WebKitMutationObserver,Zce=Zm.document,Yce=Zm.process,xM=Zm.Promise,Kce=ylt(Zm,"queueMicrotask"),OB=Kce&&Kce.value,zy,RB,PB,wM,Xce;OB||(l1=new _lt,u1=function(){var r,e;for(MB&&(r=Yce.domain)&&r.exit();e=l1.get();)try{e()}catch(t){throw l1.head&&zy(),t}r&&r.enter()},!xlt&&!MB&&!blt&&Wce&&Zce?(RB=!0,PB=Zce.createTextNode(""),new Wce(u1).observe(PB,{characterData:!0}),zy=function(){PB.data=RB=!RB}):!wlt&&xM&&xM.resolve?(wM=xM.resolve(void 0),wM.constructor=xM,Xce=Hce(wM.then,wM),zy=function(){Xce(u1)}):MB?zy=function(){Yce.nextTick(u1)}:(CB=Hce(CB,Zm),zy=function(){CB(u1)}),OB=function(r){l1.head||zy(),l1.add(r)});var l1,u1;Jce.exports=OB});var DB=A((Wfr,Qce)=>{"use strict";Qce.exports=function(r,e){try{arguments.length===1?console.error(r):console.error(r,e)}catch(t){}}});var Hp=A((Zfr,efe)=>{"use strict";efe.exports=function(r){try{return{error:!1,value:r()}}catch(e){return{error:!0,value:e}}}});var Ym=A((Yfr,tfe)=>{"use strict";var Slt=Ht();tfe.exports=Slt.Promise});var bM=A((Kfr,rfe)=>{"use strict";rfe.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"});var NB=A((Xfr,nfe)=>{"use strict";var Elt=bM(),Ilt=Sc();nfe.exports=!Elt&&!Ilt&&typeof window=="object"&&typeof document=="object"});var By=A((Jfr,afe)=>{"use strict";var Tlt=Ht(),c1=Ym(),Alt=Er(),Clt=Sy(),Mlt=Eb(),Rlt=hr(),Plt=NB(),Olt=bM(),Llt=Vr(),kB=xc(),ife=c1&&c1.prototype,Dlt=Rlt("species"),qB=!1,ofe=Alt(Tlt.PromiseRejectionEvent),Nlt=Clt("Promise",function(){var r=Mlt(c1),e=r!==String(c1);if(!e&&kB===66||Llt&&!(ife.catch&&ife.finally))return!0;if(!kB||kB<51||!/native code/.test(r)){var t=new c1(function(o){o(1)}),n=function(o){o(function(){},function(){})},i=t.constructor={};if(i[Dlt]=n,qB=t.then(function(){})instanceof n,!qB)return!0}return!e&&(Plt||Olt)&&!ofe});afe.exports={CONSTRUCTOR:Nlt,REJECTION_EVENT:ofe,SUBCLASSING:qB}});var Ac=A((Qfr,lfe)=>{"use strict";var sfe=xr(),klt=TypeError,qlt=function(r){var e,t;this.promise=new r(function(n,i){if(e!==void 0||t!==void 0)throw new klt("Bad Promise constructor");e=n,t=i}),this.resolve=sfe(e),this.reject=sfe(t)};lfe.exports.f=function(r){return new qlt(r)}});var Afe=A(()=>{"use strict";var jlt=te(),Flt=Vr(),TM=Sc(),Wp=Ht(),$y=Rt(),ufe=En(),cfe=zl(),zlt=bs(),Blt=Fp(),Ult=xr(),IM=Er(),Vlt=Ir(),Glt=wa(),$lt=Vm(),mfe=s1().set,UB=LB(),Hlt=DB(),Wlt=Hp(),Zlt=AB(),vfe=vn(),AM=Ym(),VB=By(),gfe=Ac(),CM="Promise",yfe=VB.CONSTRUCTOR,Ylt=VB.REJECTION_EVENT,Klt=VB.SUBCLASSING,jB=vfe.getterFor(CM),Xlt=vfe.set,Uy=AM&&AM.prototype,Km=AM,SM=Uy,_fe=Wp.TypeError,FB=Wp.document,GB=Wp.process,zB=gfe.f,Jlt=zB,Qlt=!!(FB&&FB.createEvent&&Wp.dispatchEvent),xfe="unhandledrejection",eut="rejectionhandled",ffe=0,wfe=1,tut=2,$B=1,bfe=2,EM,hfe,rut,pfe,Sfe=function(r){var e;return Vlt(r)&&IM(e=r.then)?e:!1},Efe=function(r,e){var t=e.value,n=e.state===wfe,i=n?r.ok:r.fail,o=r.resolve,a=r.reject,c=r.domain,h,d,v;try{i?(n||(e.rejection===bfe&&iut(e),e.rejection=$B),i===!0?h=t:(c&&c.enter(),h=i(t),c&&(c.exit(),v=!0)),h===r.promise?a(new _fe("Promise-chain cycle")):(d=Sfe(h))?$y(d,h,o,a):o(h)):a(t)}catch(x){c&&!v&&c.exit(),a(x)}},Ife=function(r,e){r.notified||(r.notified=!0,UB(function(){for(var t=r.reactions,n;n=t.get();)Efe(n,r);r.notified=!1,e&&!r.rejection&&nut(r)}))},Tfe=function(r,e,t){var n,i;Qlt?(n=FB.createEvent("Event"),n.promise=e,n.reason=t,n.initEvent(r,!1,!0),Wp.dispatchEvent(n)):n={promise:e,reason:t},!Ylt&&(i=Wp["on"+r])?i(n):r===xfe&&Hlt("Unhandled promise rejection",t)},nut=function(r){$y(mfe,Wp,function(){var e=r.facade,t=r.value,n=dfe(r),i;if(n&&(i=Wlt(function(){TM?GB.emit("unhandledRejection",t,e):Tfe(xfe,e,t)}),r.rejection=TM||dfe(r)?bfe:$B,i.error))throw i.value})},dfe=function(r){return r.rejection!==$B&&!r.parent},iut=function(r){$y(mfe,Wp,function(){var e=r.facade;TM?GB.emit("rejectionHandled",e):Tfe(eut,e,r.value)})},Vy=function(r,e,t){return function(n){r(e,n,t)}},Gy=function(r,e,t){r.done||(r.done=!0,t&&(r=t),r.value=e,r.state=tut,Ife(r,!0))},BB=function(r,e,t){if(!r.done){r.done=!0,t&&(r=t);try{if(r.facade===e)throw new _fe("Promise can't be resolved itself");var n=Sfe(e);n?UB(function(){var i={done:!1};try{$y(n,e,Vy(BB,i,r),Vy(Gy,i,r))}catch(o){Gy(i,o,r)}}):(r.value=e,r.state=wfe,Ife(r,!1))}catch(i){Gy({done:!1},i,r)}}};if(yfe&&(Km=function(e){Glt(this,SM),Ult(e),$y(EM,this);var t=jB(this);try{e(Vy(BB,t),Vy(Gy,t))}catch(n){Gy(t,n)}},SM=Km.prototype,EM=function(e){Xlt(this,{type:CM,done:!1,notified:!1,parent:!1,reactions:new Zlt,rejection:!1,state:ffe,value:void 0})},EM.prototype=ufe(SM,"then",function(e,t){var n=jB(this),i=zB($lt(this,Km));return n.parent=!0,i.ok=IM(e)?e:!0,i.fail=IM(t)&&t,i.domain=TM?GB.domain:void 0,n.state===ffe?n.reactions.add(i):UB(function(){Efe(i,n)}),i.promise}),hfe=function(){var r=new EM,e=jB(r);this.promise=r,this.resolve=Vy(BB,e),this.reject=Vy(Gy,e)},gfe.f=zB=function(r){return r===Km||r===rut?new hfe(r):Jlt(r)},!Flt&&IM(AM)&&Uy!==Object.prototype)){pfe=Uy.then,Klt||ufe(Uy,"then",function(e,t){var n=this;return new Km(function(i,o){$y(pfe,n,i,o)}).then(e,t)},{unsafe:!0});try{delete Uy.constructor}catch(r){}cfe&&cfe(Uy,SM)}jlt({global:!0,constructor:!0,wrap:!0,forced:yfe},{Promise:Km});zlt(Km,CM,!1,!0);Blt(CM)});var f1=A((rhr,Cfe)=>{"use strict";var out=Ym(),aut=zb(),sut=By().CONSTRUCTOR;Cfe.exports=sut||!aut(function(r){out.all(r).then(void 0,function(){})})});var Mfe=A(()=>{"use strict";var lut=te(),uut=Rt(),cut=xr(),fut=Ac(),hut=Hp(),put=Pi(),dut=f1();lut({target:"Promise",stat:!0,forced:dut},{all:function(e){var t=this,n=fut.f(t),i=n.resolve,o=n.reject,a=hut(function(){var c=cut(t.resolve),h=[],d=0,v=1;put(e,function(x){var S=d++,T=!1;v++,uut(c,t,x).then(function(L){T||(T=!0,h[S]=L,--v||i(h))},o)}),--v||i(h)});return a.error&&o(a.value),n.promise}})});var Pfe=A(()=>{"use strict";var mut=te(),vut=Vr(),gut=By().CONSTRUCTOR,WB=Ym(),yut=_r(),_ut=Er(),xut=En(),Rfe=WB&&WB.prototype;mut({target:"Promise",proto:!0,forced:gut,real:!0},{catch:function(r){return this.then(void 0,r)}});!vut&&_ut(WB)&&(HB=yut("Promise").prototype.catch,Rfe.catch!==HB&&xut(Rfe,"catch",HB,{unsafe:!0}));var HB});var Ofe=A(()=>{"use strict";var wut=te(),but=Rt(),Sut=xr(),Eut=Ac(),Iut=Hp(),Tut=Pi(),Aut=f1();wut({target:"Promise",stat:!0,forced:Aut},{race:function(e){var t=this,n=Eut.f(t),i=n.reject,o=Iut(function(){var a=Sut(t.resolve);Tut(e,function(c){but(a,t,c).then(n.resolve,i)})});return o.error&&i(o.value),n.promise}})});var Lfe=A(()=>{"use strict";var Cut=te(),Mut=Rt(),Rut=Ac(),Put=By().CONSTRUCTOR;Cut({target:"Promise",stat:!0,forced:Put},{reject:function(e){var t=Rut.f(this);return Mut(t.reject,void 0,e),t.promise}})});var ZB=A((fhr,Dfe)=>{"use strict";var Out=Lt(),Lut=Ir(),Dut=Ac();Dfe.exports=function(r,e){if(Out(r),Lut(e)&&e.constructor===r)return e;var t=Dut.f(r),n=t.resolve;return n(e),t.promise}});var qfe=A(()=>{"use strict";var Nut=te(),kut=_r(),Nfe=Vr(),qut=Ym(),kfe=By().CONSTRUCTOR,jut=ZB(),Fut=kut("Promise"),zut=Nfe&&!kfe;Nut({target:"Promise",stat:!0,forced:Nfe||kfe},{resolve:function(e){return jut(zut&&this===Fut?qut:this,e)}})});var jfe=A(()=>{"use strict";Afe();Mfe();Pfe();Ofe();Lfe();qfe()});var YB=A(()=>{"use strict";var But=te(),Uut=Rt(),Vut=xr(),Gut=Ac(),$ut=Hp(),Hut=Pi(),Wut=f1();But({target:"Promise",stat:!0,forced:Wut},{allSettled:function(e){var t=this,n=Gut.f(t),i=n.resolve,o=n.reject,a=$ut(function(){var c=Vut(t.resolve),h=[],d=0,v=1;Hut(e,function(x){var S=d++,T=!1;v++,Uut(c,t,x).then(function(L){T||(T=!0,h[S]={status:"fulfilled",value:L},--v||i(h))},function(L){T||(T=!0,h[S]={status:"rejected",reason:L},--v||i(h))})}),--v||i(h)});return a.error&&o(a.value),n.promise}})});var KB=A(()=>{"use strict";var Zut=te(),Yut=Rt(),Kut=xr(),Xut=_r(),Jut=Ac(),Qut=Hp(),ect=Pi(),tct=f1(),Ffe="No one promise resolved";Zut({target:"Promise",stat:!0,forced:tct},{any:function(e){var t=this,n=Xut("AggregateError"),i=Jut.f(t),o=i.resolve,a=i.reject,c=Qut(function(){var h=Kut(t.resolve),d=[],v=0,x=1,S=!1;ect(e,function(T){var L=v++,k=!1;x++,Yut(h,t,T).then(function(R){k||S||(S=!0,o(R))},function(R){k||S||(k=!0,d[L]=R,--x||a(new n(d,Ffe)))})}),--x||a(new n(d,Ffe))});return c.error&&a(c.value),i.promise}})});var Vfe=A(()=>{"use strict";var rct=te(),nct=Vr(),MM=Ym(),ict=ft(),Bfe=_r(),Ufe=Er(),oct=Vm(),zfe=ZB(),act=En(),JB=MM&&MM.prototype,sct=!!MM&&ict(function(){JB.finally.call({then:function(){}},function(){})});rct({target:"Promise",proto:!0,real:!0,forced:sct},{finally:function(r){var e=oct(this,Bfe("Promise")),t=Ufe(r);return this.then(t?function(n){return zfe(e,r()).then(function(){return n})}:r,t?function(n){return zfe(e,r()).then(function(){throw n})}:r)}});!nct&&Ufe(MM)&&(XB=Bfe("Promise").prototype.finally,JB.finally!==XB&&act(JB,"finally",XB,{unsafe:!0}));var XB});var Gfe=A(()=>{"use strict";var lct=te(),uct=xa(),cct=xr(),fct=Lt(),hct=ft(),pct=!hct(function(){Reflect.apply(function(){})});lct({target:"Reflect",stat:!0,forced:pct},{apply:function(e,t,n){return uct(cct(e),t,fct(n))}})});var Xfe=A(()=>{"use strict";var dct=te(),mct=_r(),QB=xa(),vct=D4(),$fe=Ny(),gct=Lt(),Hfe=Ir(),yct=Bi(),Zfe=ft(),eU=mct("Reflect","construct"),_ct=Object.prototype,xct=[].push,Yfe=Zfe(function(){function r(){}return!(eU(function(){},[],r)instanceof r)}),Kfe=!Zfe(function(){eU(function(){})}),Wfe=Yfe||Kfe;dct({target:"Reflect",stat:!0,forced:Wfe,sham:Wfe},{construct:function(e,t){$fe(e),gct(t);var n=arguments.length<3?e:$fe(arguments[2]);if(Kfe&&!Yfe)return eU(e,t,n);if(e===n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);}var i=[null];return QB(xct,i,t),new(QB(vct,e,i))}var o=n.prototype,a=yct(Hfe(o)?o:_ct),c=QB(e,a,t);return Hfe(c)?c:a}})});var ehe=A(()=>{"use strict";var wct=te(),bct=fr(),Jfe=Lt(),Sct=Du(),Qfe=Zn(),Ect=ft(),Ict=Ect(function(){Reflect.defineProperty(Qfe.f({},1,{value:1}),1,{value:2})});wct({target:"Reflect",stat:!0,forced:Ict,sham:!bct},{defineProperty:function(e,t,n){Jfe(e);var i=Sct(t);Jfe(n);try{return Qfe.f(e,i,n),!0}catch(o){return!1}}})});var the=A(()=>{"use strict";var Tct=te(),Act=Lt(),Cct=go().f;Tct({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=Cct(Act(e),t);return n&&!n.configurable?!1:delete e[t]}})});var tU=A((Rhr,nhe)=>{"use strict";var rhe=qr();nhe.exports=function(r){return r!==void 0&&(rhe(r,"value")||rhe(r,"writable"))}});var ohe=A(()=>{"use strict";var Mct=te(),Rct=Rt(),Pct=Ir(),Oct=Lt(),Lct=tU(),Dct=go(),Nct=Wi();function ihe(r,e){var t=arguments.length<3?r:arguments[2],n,i;if(Oct(r)===t)return r[e];if(n=Dct.f(r,e),n)return Lct(n)?n.value:n.get===void 0?void 0:Rct(n.get,t);if(Pct(i=Nct(r)))return ihe(i,e,t)}Mct({target:"Reflect",stat:!0},{get:ihe})});var ahe=A(()=>{"use strict";var kct=te(),qct=fr(),jct=Lt(),Fct=go();kct({target:"Reflect",stat:!0,sham:!qct},{getOwnPropertyDescriptor:function(e,t){return Fct.f(jct(e),t)}})});var she=A(()=>{"use strict";var zct=te(),Bct=Lt(),Uct=Wi(),Vct=LC();zct({target:"Reflect",stat:!0,sham:!Vct},{getPrototypeOf:function(e){return Uct(Bct(e))}})});var lhe=A(()=>{"use strict";var Gct=te();Gct({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})});var uhe=A(()=>{"use strict";var $ct=te(),Hct=Lt(),Wct=fM();$ct({target:"Reflect",stat:!0},{isExtensible:function(e){return Hct(e),Wct(e)}})});var che=A(()=>{"use strict";var Zct=te(),Yct=pC();Zct({target:"Reflect",stat:!0},{ownKeys:Yct})});var fhe=A(()=>{"use strict";var Kct=te(),Xct=_r(),Jct=Lt(),Qct=Uf();Kct({target:"Reflect",stat:!0,sham:!Qct},{preventExtensions:function(e){Jct(e);try{var t=Xct("Object","preventExtensions");return t&&t(e),!0}catch(n){return!1}}})});var vhe=A(()=>{"use strict";var eft=te(),tft=Rt(),rft=Lt(),hhe=Ir(),nft=tU(),ift=ft(),rU=Zn(),phe=go(),oft=Wi(),dhe=_s();function mhe(r,e,t){var n=arguments.length<4?r:arguments[3],i=phe.f(rft(r),e),o,a,c;if(!i){if(hhe(a=oft(r)))return mhe(a,e,t,n);i=dhe(0)}if(nft(i)){if(i.writable===!1||!hhe(n))return!1;if(o=phe.f(n,e)){if(o.get||o.set||o.writable===!1)return!1;o.value=t,rU.f(n,e,o)}else rU.f(n,e,dhe(0,t))}else{if(c=i.set,c===void 0)return!1;tft(c,n,t)}return!0}var aft=ift(function(){var r=function(){},e=rU.f(new r,"a",{configurable:!0});return Reflect.set(r.prototype,"a",1,e)!==!1});eft({target:"Reflect",stat:!0,forced:aft},{set:mhe})});var yhe=A(()=>{"use strict";var sft=te(),lft=Lt(),uft=gz(),ghe=zl();ghe&&sft({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){lft(e),uft(t);try{return ghe(e,t),!0}catch(n){return!1}}})});var _he=A(()=>{"use strict";var cft=te(),fft=Ht(),hft=bs();cft({global:!0},{Reflect:{}});hft(fft.Reflect,"Reflect",!0)});var Hy=A((Xhr,xhe)=>{"use strict";var pft=Ir(),dft=Wo(),mft=hr(),vft=mft("match");xhe.exports=function(r){var e;return pft(r)&&((e=r[vft])!==void 0?!!e:dft(r)==="RegExp")}});var RM=A((Jhr,whe)=>{"use strict";var gft=Lt();whe.exports=function(){var r=gft(this),e="";return r.hasIndices&&(e+="d"),r.global&&(e+="g"),r.ignoreCase&&(e+="i"),r.multiline&&(e+="m"),r.dotAll&&(e+="s"),r.unicode&&(e+="u"),r.unicodeSets&&(e+="v"),r.sticky&&(e+="y"),e}});var Wy=A((Qhr,She)=>{"use strict";var yft=Rt(),_ft=qr(),xft=_a(),wft=RM(),bhe=RegExp.prototype;She.exports=function(r){var e=r.flags;return e===void 0&&!("flags"in bhe)&&!_ft(r,"flags")&&xft(bhe,r)?yft(wft,r):e}});var h1=A((epr,Ehe)=>{"use strict";var nU=ft(),bft=Ht(),iU=bft.RegExp,oU=nU(function(){var r=iU("a","y");return r.lastIndex=2,r.exec("abcd")!==null}),Sft=oU||nU(function(){return!iU("a","y").sticky}),Eft=oU||nU(function(){var r=iU("^r","gy");return r.lastIndex=2,r.exec("str")!==null});Ehe.exports={BROKEN_CARET:Eft,MISSED_STICKY:Sft,UNSUPPORTED_Y:oU}});var PM=A((tpr,Ihe)=>{"use strict";var Ift=ft(),Tft=Ht(),Aft=Tft.RegExp;Ihe.exports=Ift(function(){var r=Aft(".","s");return!(r.dotAll&&r.test(`
`)&&r.flags==="s")})});var aU=A((rpr,The)=>{"use strict";var Cft=ft(),Mft=Ht(),Rft=Mft.RegExp;The.exports=Cft(function(){var r=Rft("(?<a>b)","g");return r.exec("b").groups.a!=="b"||"b".replace(r,"$<a>c")!=="bc"})});var Nhe=A(()=>{"use strict";var Pft=fr(),cU=Ht(),p1=rt(),Oft=Sy(),Lft=km(),Dft=Hi(),Nft=Rf().f,Ahe=_a(),kft=Hy(),Che=wr(),qft=Wy(),Phe=h1(),jft=yz(),Fft=En(),zft=ft(),Bft=qr(),Uft=vn().enforce,Vft=Fp(),Gft=hr(),Ohe=PM(),Lhe=aU(),$ft=Gft("match"),Yp=cU.RegExp,Zy=Yp.prototype,Hft=cU.SyntaxError,Wft=p1(Zy.exec),OM=p1("".charAt),Mhe=p1("".replace),Rhe=p1("".indexOf),Zft=p1("".slice),Yft=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Xm=/a/g,sU=/a/g,Kft=new Yp(Xm)!==Xm,Dhe=Phe.MISSED_STICKY,Xft=Phe.UNSUPPORTED_Y,Jft=Pft&&(!Kft||Dhe||Ohe||Lhe||zft(function(){return sU[$ft]=!1,Yp(Xm)!==Xm||Yp(sU)===sU||String(Yp(Xm,"i"))!=="/a/i"})),Qft=function(r){for(var e=r.length,t=0,n="",i=!1,o;t<=e;t++){if(o=OM(r,t),o==="\\"){n+=o+OM(r,++t);continue}!i&&o==="."?n+="[\\s\\S]":(o==="["?i=!0:o==="]"&&(i=!1),n+=o)}return n},eht=function(r){for(var e=r.length,t=0,n="",i=[],o={},a=!1,c=!1,h=0,d="",v;t<=e;t++){if(v=OM(r,t),v==="\\")v+=OM(r,++t);else if(v==="]")a=!1;else if(!a)switch(!0){case v==="[":a=!0;break;case v==="(":Wft(Yft,Zft(r,t+1))&&(t+=2,c=!0),n+=v,h++;continue;case v===">"&&c:if(d===""||Bft(o,d))throw new Hft("Invalid capture group name");o[d]=!0,i[i.length]=[d,h],c=!1,d="";continue;}c?d+=v:n+=v}return[n,i]};if(Oft("RegExp",Jft)){for(Zp=function(e,t){var n=Ahe(Zy,this),i=kft(e),o=t===void 0,a=[],c=e,h,d,v,x,S,T;if(!n&&i&&o&&e.constructor===Zp)return e;if((i||Ahe(Zy,e))&&(e=e.source,o&&(t=qft(c))),e=e===void 0?"":Che(e),t=t===void 0?"":Che(t),c=e,Ohe&&("dotAll"in Xm)&&(d=!!t&&Rhe(t,"s")>-1,d&&(t=Mhe(t,/s/g,""))),h=t,Dhe&&("sticky"in Xm)&&(v=!!t&&Rhe(t,"y")>-1,v&&Xft&&(t=Mhe(t,/y/g,""))),Lhe&&(x=eht(e),e=x[0],a=x[1]),S=Lft(Yp(e,t),n?this:Zy,Zp),(d||v||a.length)&&(T=Uft(S),d&&(T.dotAll=!0,T.raw=Zp(Qft(e),h)),v&&(T.sticky=!0),a.length&&(T.groups=a)),e!==c)try{Dft(S,"source",c===""?"(?:)":c)}catch(L){}return S},lU=Nft(Yp),uU=0;lU.length>uU;)jft(Zp,Yp,lU[uU++]);Zy.constructor=Zp,Zp.prototype=Zy,Fft(cU,"RegExp",Zp,{constructor:!0})}var Zp,lU,uU;Vft("RegExp")});var qhe=A(()=>{"use strict";var tht=fr(),rht=PM(),nht=Wo(),iht=ci(),oht=vn().get,khe=RegExp.prototype,aht=TypeError;tht&&rht&&iht(khe,"dotAll",{configurable:!0,get:function(){if(this!==khe){if(nht(this)==="RegExp")return!!oht(this).dotAll;throw new aht("Incompatible receiver, RegExp required")}}})});var d1=A((spr,Fhe)=>{"use strict";var Yy=Rt(),DM=rt(),sht=wr(),lht=RM(),uht=h1(),cht=wc(),fht=Bi(),hht=vn().get,pht=PM(),dht=aU(),mht=cht("native-string-replace",String.prototype.replace),LM=RegExp.prototype.exec,hU=LM,vht=DM("".charAt),ght=DM("".indexOf),yht=DM("".replace),fU=DM("".slice),pU=function(){var r=/a/,e=/b*/g;return Yy(LM,r,"a"),Yy(LM,e,"a"),r.lastIndex!==0||e.lastIndex!==0}(),jhe=uht.BROKEN_CARET,dU=/()??/.exec("")[1]!==void 0,_ht=pU||dU||jhe||pht||dht;_ht&&(hU=function(e){var t=this,n=hht(t),i=sht(e),o=n.raw,a,c,h,d,v,x,S;if(o)return o.lastIndex=t.lastIndex,a=Yy(hU,o,i),t.lastIndex=o.lastIndex,a;var T=n.groups,L=jhe&&t.sticky,k=Yy(lht,t),R=t.source,D=0,j=i;if(L&&(k=yht(k,"y",""),ght(k,"g")===-1&&(k+="g"),j=fU(i,t.lastIndex),t.lastIndex>0&&(!t.multiline||t.multiline&&vht(i,t.lastIndex-1)!==`
`)&&(R="(?: "+R+")",j=" "+j,D++),c=new RegExp("^(?:"+R+")",k)),dU&&(c=new RegExp("^"+R+"$(?!\\s)",k)),pU&&(h=t.lastIndex),d=Yy(LM,L?c:t,j),L?d?(d.input=fU(d.input,D),d[0]=fU(d[0],D),d.index=t.lastIndex,t.lastIndex+=d[0].length):t.lastIndex=0:pU&&d&&(t.lastIndex=t.global?d.index+d[0].length:h),dU&&d&&d.length>1&&Yy(mht,d[0],c,function(){for(v=1;v<arguments.length-2;v++)arguments[v]===void 0&&(d[v]=void 0)}),d&&T)for(d.groups=x=fht(null),v=0;v<T.length;v++)S=T[v],x[S[0]]=d[S[1]];return d});Fhe.exports=hU});var NM=A(()=>{"use strict";var xht=te(),zhe=d1();xht({target:"RegExp",proto:!0,forced:/./.exec!==zhe},{exec:zhe})});var Vhe=A(()=>{"use strict";var wht=Ht(),bht=fr(),Sht=ci(),Eht=RM(),Iht=ft(),Bhe=wht.RegExp,Uhe=Bhe.prototype,Tht=bht&&Iht(function(){var r=!0;try{Bhe(".","d")}catch(h){r=!1}var e={},t="",n=r?"dgimsy":"gimsy",i=function(h,d){Object.defineProperty(e,h,{get:function(){return t+=d,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};r&&(o.hasIndices="d");for(var a in o)i(a,o[a]);var c=Object.getOwnPropertyDescriptor(Uhe,"flags").get.call(e);return c!==n||t!==n});Tht&&Sht(Uhe,"flags",{configurable:!0,get:Eht})});var $he=A(()=>{"use strict";var Aht=fr(),Cht=h1().MISSED_STICKY,Mht=Wo(),Rht=ci(),Pht=vn().get,Ghe=RegExp.prototype,Oht=TypeError;Aht&&Cht&&Rht(Ghe,"sticky",{configurable:!0,get:function(){if(this!==Ghe){if(Mht(this)==="RegExp")return!!Pht(this).sticky;throw new Oht("Incompatible receiver, RegExp required")}}})});var Zhe=A(()=>{"use strict";NM();var Lht=te(),Hhe=Rt(),Dht=Er(),Whe=Lt(),Nht=wr(),kht=function(){var r=!1,e=/[ac]/;return e.exec=function(){return r=!0,/./.exec.apply(this,arguments)},e.test("abc")===!0&&r}(),qht=/./.test;Lht({target:"RegExp",proto:!0,forced:!kht},{test:function(r){var e=Whe(this),t=Nht(r),n=e.exec;if(!Dht(n))return Hhe(qht,e,t);var i=Hhe(n,e,t);return i===null?!1:(Whe(i),!0)}})});var Xhe=A(()=>{"use strict";var jht=Mm().PROPER,Fht=En(),zht=Lt(),Yhe=wr(),Bht=ft(),Uht=Wy(),mU="toString",Vht=RegExp.prototype,Khe=Vht[mU],Ght=Bht(function(){return Khe.call({source:"a",flags:"b"})!=="/a/b"}),$ht=jht&&Khe.name!==mU;(Ght||$ht)&&Fht(RegExp.prototype,mU,function(){var e=zht(this),t=Yhe(e.source),n=Yhe(Uht(e));return"/"+t+"/"+n},{unsafe:!0})});var Jhe=A(()=>{"use strict";var Hht=Kb(),Wht=G4();Hht("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},Wht)});var Qhe=A(()=>{"use strict";Jhe()});var epe=A(()=>{"use strict";var Zht=te(),Yht=rt(),Kht=ti(),Xht=ri(),Jht=wr(),Qht=ft(),ept=Yht("".charAt),tpt=Qht(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});Zht({target:"String",proto:!0,forced:tpt},{at:function(e){var t=Jht(Kht(this)),n=t.length,i=Xht(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:ept(t,o)}})});var Jm=A((Epr,npe)=>{"use strict";var vU=rt(),rpt=ri(),npt=wr(),ipt=ti(),opt=vU("".charAt),tpe=vU("".charCodeAt),apt=vU("".slice),rpe=function(r){return function(e,t){var n=npt(ipt(e)),i=rpt(t),o=n.length,a,c;return i<0||i>=o?r?"":void 0:(a=tpe(n,i),a<55296||a>56319||i+1===o||(c=tpe(n,i+1))<56320||c>57343?r?opt(n,i):a:r?apt(n,i,i+2):(a-55296<<10)+(c-56320)+65536)}};npe.exports={codeAt:rpe(!1),charAt:rpe(!0)}});var ipe=A(()=>{"use strict";var spt=te(),lpt=Jm().codeAt;spt({target:"String",proto:!0},{codePointAt:function(e){return lpt(this,e)}})});var kM=A((Apr,ope)=>{"use strict";var upt=Hy(),cpt=TypeError;ope.exports=function(r){if(upt(r))throw new cpt("The method doesn't accept regular expressions");return r}});var qM=A((Cpr,ape)=>{"use strict";var fpt=hr(),hpt=fpt("match");ape.exports=function(r){var e=/./;try{"/./"[r](e)}catch(t){try{return e[hpt]=!1,"/./"[r](e)}catch(n){}}return!1}});var fpe=A(()=>{"use strict";var ppt=te(),upe=Pf(),dpt=go().f,mpt=xs(),spe=wr(),vpt=kM(),gpt=ti(),ypt=qM(),_pt=Vr(),lpe=upe("".endsWith),xpt=upe("".slice),wpt=Math.min,cpe=ypt("endsWith"),bpt=!_pt&&!cpe&&!!function(){var r=dpt(String.prototype,"endsWith");return r&&!r.writable}();ppt({target:"String",proto:!0,forced:!bpt&&!cpe},{endsWith:function(e){var t=spe(gpt(this));vpt(e);var n=arguments.length>1?arguments[1]:void 0,i=t.length,o=n===void 0?i:wpt(mpt(n),i),a=spe(e);return lpe?lpe(t,a,o):xpt(t,o-a.length,o)===a}})});var dpe=A(()=>{"use strict";var Spt=te(),Ept=rt(),Ipt=ql(),Tpt=RangeError,hpe=String.fromCharCode,ppe=String.fromCodePoint,Apt=Ept([].join),Cpt=!!ppe&&ppe.length!==1;Spt({target:"String",stat:!0,arity:1,forced:Cpt},{fromCodePoint:function(e){for(var t=[],n=arguments.length,i=0,o;n>i;){if(o=+arguments[i++],Ipt(o,1114111)!==o)throw new Tpt(o+" is not a valid code point");t[i]=o<65536?hpe(o):hpe(((o-=65536)>>10)+55296,o%1024+56320)}return Apt(t,"")}})});var vpe=A(()=>{"use strict";var Mpt=te(),Rpt=rt(),Ppt=kM(),Opt=ti(),mpe=wr(),Lpt=qM(),Dpt=Rpt("".indexOf);Mpt({target:"String",proto:!0,forced:!Lpt("includes")},{includes:function(e){return!!~Dpt(mpe(Opt(this)),mpe(Ppt(e)),arguments.length>1?arguments[1]:void 0)}})});var gU=A(()=>{"use strict";var Npt=te(),kpt=rt(),qpt=ti(),jpt=wr(),gpe=kpt("".charCodeAt);Npt({target:"String",proto:!0},{isWellFormed:function(){for(var e=jpt(qpt(this)),t=e.length,n=0;n<t;n++){var i=gpe(e,n);if((i&63488)===55296&&(i>=56320||++n>=t||(gpe(e,n)&64512)!==56320))return!1}return!0}})});var yU=A(()=>{"use strict";var Fpt=Jm().charAt,zpt=wr(),_pe=vn(),Bpt=UC(),ype=Zo(),xpe="String Iterator",Upt=_pe.set,Vpt=_pe.getterFor(xpe);Bpt(String,"String",function(r){Upt(this,{type:xpe,string:zpt(r),index:0})},function(){var e=Vpt(this),t=e.string,n=e.index,i;return n>=t.length?ype(void 0,!0):(i=Fpt(t,n),e.index+=i.length,ype(i,!1))})});var m1=A((Fpr,Ipe)=>{"use strict";NM();var wpe=Pf(),bpe=En(),Gpt=d1(),Spe=ft(),Epe=hr(),$pt=Hi(),Hpt=Epe("species"),_U=RegExp.prototype;Ipe.exports=function(r,e,t,n){var i=Epe(r),o=!Spe(function(){var d={};return d[i]=function(){return 7},""[r](d)!==7}),a=o&&!Spe(function(){var d=!1,v=/a/;return r==="split"&&(v={},v.constructor={},v.constructor[Hpt]=function(){return v},v.flags="",v[i]=/./[i]),v.exec=function(){return d=!0,null},v[i](""),!d});if(!o||!a||t){var c=wpe(/./[i]),h=e(i,""[r],function(d,v,x,S,T){var L=wpe(d),k=v.exec;return k===Gpt||k===_U.exec?o&&!T?{done:!0,value:c(v,x,S)}:{done:!0,value:L(x,v,S)}:{done:!1}});bpe(String.prototype,r,h[0]),bpe(_U,i,h[1])}n&&$pt(_U[i],"sham",!0)}});var v1=A((zpr,Tpe)=>{"use strict";var Wpt=Jm().charAt;Tpe.exports=function(r,e,t){return e+(t?Wpt(r,e).length:1)}});var Ky=A((Bpr,Cpe)=>{"use strict";var Ape=Rt(),Zpt=Lt(),Ypt=Er(),Kpt=Wo(),Xpt=d1(),Jpt=TypeError;Cpe.exports=function(r,e){var t=r.exec;if(Ypt(t)){var n=Ape(t,r,e);return n!==null&&Zpt(n),n}if(Kpt(r)==="RegExp")return Ape(Xpt,r,e);throw new Jpt("RegExp#exec called on incompatible receiver")}});var Rpe=A(()=>{"use strict";var Qpt=Rt(),edt=m1(),tdt=Lt(),rdt=$i(),ndt=xs(),xU=wr(),idt=ti(),odt=zi(),adt=v1(),Mpe=Ky();edt("match",function(r,e,t){return[function(i){var o=idt(this),a=rdt(i)?void 0:odt(i,r);return a?Qpt(a,i,o):new RegExp(i)[r](xU(o))},function(n){var i=tdt(this),o=xU(n),a=t(e,i,o);if(a.done)return a.value;if(!i.global)return Mpe(i,o);var c=i.unicode;i.lastIndex=0;for(var h=[],d=0,v;(v=Mpe(i,o))!==null;){var x=xU(v[0]);h[d]=x,x===""&&(i.lastIndex=adt(o,ndt(i.lastIndex),c)),d++}return d===0?null:h}]})});var IU=A(()=>{"use strict";var sdt=te(),Ppe=Rt(),Dpe=Pf(),ldt=qp(),jM=Zo(),Ope=ti(),Npe=xs(),g1=wr(),udt=Lt(),cdt=$i(),fdt=Wo(),hdt=Hy(),kpe=Wy(),pdt=zi(),ddt=En(),mdt=ft(),vdt=hr(),gdt=Vm(),ydt=v1(),_dt=Ky(),qpe=vn(),bU=Vr(),FM=vdt("matchAll"),jpe="RegExp String",Fpe=jpe+" Iterator",xdt=qpe.set,wdt=qpe.getterFor(Fpe),Lpe=RegExp.prototype,bdt=TypeError,SU=Dpe("".indexOf),zM=Dpe("".matchAll),wU=!!zM&&!mdt(function(){zM("a",/./)}),Sdt=ldt(function(e,t,n,i){xdt(this,{type:Fpe,regexp:e,string:t,global:n,unicode:i,done:!1})},jpe,function(){var e=wdt(this);if(e.done)return jM(void 0,!0);var t=e.regexp,n=e.string,i=_dt(t,n);return i===null?(e.done=!0,jM(void 0,!0)):e.global?(g1(i[0])===""&&(t.lastIndex=ydt(n,Npe(t.lastIndex),e.unicode)),jM(i,!1)):(e.done=!0,jM(i,!1))}),EU=function(r){var e=udt(this),t=g1(r),n=gdt(e,RegExp),i=g1(kpe(e)),o,a,c;return o=new n(n===RegExp?e.source:e,i),a=!!~SU(i,"g"),c=!!~SU(i,"u"),o.lastIndex=Npe(e.lastIndex),new Sdt(o,t,a,c)};sdt({target:"String",proto:!0,forced:wU},{matchAll:function(e){var t=Ope(this),n,i,o,a;if(cdt(e)){if(wU)return zM(t,e)}else{if(hdt(e)&&(n=g1(Ope(kpe(e))),!~SU(n,"g")))throw new bdt("`.matchAll` does not allow non-global regexes");if(wU)return zM(t,e);if(o=pdt(e,FM),o===void 0&&bU&&fdt(e)==="RegExp"&&(o=EU),o)return Ppe(o,e,t)}return i=g1(t),a=new RegExp(e,"g"),bU?Ppe(EU,a,i):a[FM](i)}});bU||FM in Lpe||ddt(Lpe,FM,EU)});var TU=A((Hpr,zpe)=>{"use strict";var Edt=_c();zpe.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(Edt)});var Bpe=A(()=>{"use strict";var Idt=te(),Tdt=lM().end,Adt=TU();Idt({target:"String",proto:!0,forced:Adt},{padEnd:function(e){return Tdt(this,e,arguments.length>1?arguments[1]:void 0)}})});var Upe=A(()=>{"use strict";var Cdt=te(),Mdt=lM().start,Rdt=TU();Cdt({target:"String",proto:!0,forced:Rdt},{padStart:function(e){return Mdt(this,e,arguments.length>1?arguments[1]:void 0)}})});var Hpe=A(()=>{"use strict";var Pdt=te(),$pe=rt(),Odt=ro(),Ldt=Gr(),Vpe=wr(),Ddt=Zr(),Gpe=$pe([].push),Ndt=$pe([].join);Pdt({target:"String",stat:!0},{raw:function(e){var t=Odt(Ldt(e).raw),n=Ddt(t);if(!n)return"";for(var i=arguments.length,o=[],a=0;;){if(Gpe(o,Vpe(t[a++])),a===n)return Ndt(o,"");a<i&&Gpe(o,Vpe(arguments[a]))}}})});var Wpe=A(()=>{"use strict";var kdt=te(),qdt=Zb();kdt({target:"String",proto:!0},{repeat:qdt})});var RU=A((tdr,Zpe)=>{"use strict";var MU=rt(),jdt=Gr(),Fdt=Math.floor,AU=MU("".charAt),zdt=MU("".replace),CU=MU("".slice),Bdt=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Udt=/\$([$&'`]|\d{1,2})/g;Zpe.exports=function(r,e,t,n,i,o){var a=t+r.length,c=n.length,h=Udt;return i!==void 0&&(i=jdt(i),h=Bdt),zdt(o,h,function(d,v){var x;switch(AU(v,0)){case"$":return"$";case"&":return r;case"`":return CU(e,0,t);case"'":return CU(e,a);case"<":x=i[CU(v,1,-1)];break;default:var S=+v;if(S===0)return d;if(S>c){var T=Fdt(S/10);return T===0?d:T<=c?n[T-1]===void 0?AU(v,1):n[T-1]+AU(v,1):d}x=n[S-1];}return x===void 0?"":x})}});var Qpe=A(()=>{"use strict";var Vdt=xa(),Ype=Rt(),BM=rt(),Gdt=m1(),$dt=ft(),Hdt=Lt(),Wdt=Er(),Zdt=$i(),Ydt=ri(),Kdt=xs(),Xy=wr(),Xdt=ti(),Jdt=v1(),Qdt=zi(),emt=RU(),tmt=Ky(),rmt=hr(),OU=rmt("replace"),nmt=Math.max,imt=Math.min,omt=BM([].concat),PU=BM([].push),Kpe=BM("".indexOf),Xpe=BM("".slice),amt=function(r){return r===void 0?r:String(r)},smt=function(){return"a".replace(/./,"$0")==="$0"}(),Jpe=function(){return /./[OU]?/./[OU]("a","$0")==="":!1}(),lmt=!$dt(function(){var r=/./;return r.exec=function(){var e=[];return e.groups={a:"7"},e},"".replace(r,"$<a>")!=="7"});Gdt("replace",function(r,e,t){var n=Jpe?"$":"$0";return[function(o,a){var c=Xdt(this),h=Zdt(o)?void 0:Qdt(o,OU);return h?Ype(h,o,c,a):Ype(e,Xy(c),o,a)},function(i,o){var a=Hdt(this),c=Xy(i);if(typeof o=="string"&&Kpe(o,n)===-1&&Kpe(o,"$<")===-1){var h=t(e,a,c,o);if(h.done)return h.value}var d=Wdt(o);d||(o=Xy(o));var v=a.global,x;v&&(x=a.unicode,a.lastIndex=0);for(var S=[],T;T=tmt(a,c),!(T===null||(PU(S,T),!v));){var L=Xy(T[0]);L===""&&(a.lastIndex=Jdt(c,Kdt(a.lastIndex),x))}for(var k="",R=0,D=0;D<S.length;D++){T=S[D];for(var j=Xy(T[0]),B=nmt(imt(Ydt(T.index),c.length),0),$=[],ee,J=1;J<T.length;J++)PU($,amt(T[J]));var ie=T.groups;if(d){var ue=omt([j],$,B,c);ie!==void 0&&PU(ue,ie),ee=Xy(Vdt(o,void 0,ue))}else ee=emt(j,c,B,$,ie,o);B>=R&&(k+=Xpe(c,R,B)+ee,R=B+j.length)}return k+Xpe(c,R)}]},!lmt||!smt||Jpe)});var DU=A(()=>{"use strict";var umt=te(),cmt=Rt(),LU=rt(),ede=ti(),fmt=Er(),hmt=$i(),pmt=Hy(),Jy=wr(),dmt=zi(),mmt=Wy(),vmt=RU(),gmt=hr(),ymt=Vr(),_mt=gmt("replace"),xmt=TypeError,nde=LU("".indexOf),wmt=LU("".replace),tde=LU("".slice),bmt=Math.max,rde=function(r,e,t){return t>r.length?-1:e===""?t:nde(r,e,t)};umt({target:"String",proto:!0},{replaceAll:function(e,t){var n=ede(this),i,o,a,c,h,d,v,x,S,T=0,L=0,k="";if(!hmt(e)){if(i=pmt(e),i&&(o=Jy(ede(mmt(e))),!~nde(o,"g")))throw new xmt("`.replaceAll` does not allow non-global regexes");if(a=dmt(e,_mt),a)return cmt(a,e,n,t);if(ymt&&i)return wmt(Jy(n),e,t)}for(c=Jy(n),h=Jy(e),d=fmt(t),d||(t=Jy(t)),v=h.length,x=bmt(1,v),T=rde(c,h,0);T!==-1;)S=d?Jy(t(h,T,c)):vmt(h,c,T,[],void 0,t),k+=tde(c,L,T)+S,L=T+v,T=rde(c,h,T+x);return L<c.length&&(k+=tde(c,L)),k}})});var ade=A(()=>{"use strict";var Smt=Rt(),Emt=m1(),Imt=Lt(),Tmt=$i(),Amt=ti(),ide=pB(),ode=wr(),Cmt=zi(),Mmt=Ky();Emt("search",function(r,e,t){return[function(i){var o=Amt(this),a=Tmt(i)?void 0:Cmt(i,r);return a?Smt(a,i,o):new RegExp(i)[r](ode(o))},function(n){var i=Imt(this),o=ode(n),a=t(e,i,o);if(a.done)return a.value;var c=i.lastIndex;ide(c,0)||(i.lastIndex=0);var h=Mmt(i,o);return ide(i.lastIndex,c)||(i.lastIndex=c),h===null?-1:h.index}]})});var hde=A(()=>{"use strict";var Rmt=xa(),y1=Rt(),kU=rt(),Pmt=m1(),Omt=Lt(),Lmt=$i(),Dmt=Hy(),sde=ti(),Nmt=Vm(),kmt=v1(),qmt=xs(),NU=wr(),jmt=zi(),lde=Om(),ude=Ky(),Fmt=d1(),zmt=h1(),Bmt=ft(),Qy=zmt.UNSUPPORTED_Y,cde=4294967295,Umt=Math.min,fde=[].push,Vmt=kU(/./.exec),e_=kU(fde),_1=kU("".slice),Gmt=!Bmt(function(){var r=/(?:)/,e=r.exec;r.exec=function(){return e.apply(this,arguments)};var t="ab".split(r);return t.length!==2||t[0]!=="a"||t[1]!=="b"});Pmt("split",function(r,e,t){var n;return"abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length?n=function(i,o){var a=NU(sde(this)),c=o===void 0?cde:o>>>0;if(c===0)return[];if(i===void 0)return[a];if(!Dmt(i))return y1(e,a,i,c);for(var h=[],d=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(i.sticky?"y":""),v=0,x=new RegExp(i.source,d+"g"),S,T,L;(S=y1(Fmt,x,a))&&(T=x.lastIndex,!(T>v&&(e_(h,_1(a,v,S.index)),S.length>1&&S.index<a.length&&Rmt(fde,h,lde(S,1)),L=S[0].length,v=T,h.length>=c)));)x.lastIndex===S.index&&x.lastIndex++;return v===a.length?(L||!Vmt(x,""))&&e_(h,""):e_(h,_1(a,v)),h.length>c?lde(h,0,c):h}:"0".split(void 0,0).length?n=function(i,o){return i===void 0&&o===0?[]:y1(e,this,i,o)}:n=e,[function(o,a){var c=sde(this),h=Lmt(o)?void 0:jmt(o,r);return h?y1(h,o,c,a):y1(n,NU(c),o,a)},function(i,o){var a=Omt(this),c=NU(i),h=t(n,a,c,o,n!==e);if(h.done)return h.value;var d=Nmt(a,RegExp),v=a.unicode,x=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(Qy?"g":"y"),S=new d(Qy?"^(?:"+a.source+")":a,x),T=o===void 0?cde:o>>>0;if(T===0)return[];if(c.length===0)return ude(S,c)===null?[c]:[];for(var L=0,k=0,R=[];k<c.length;){S.lastIndex=Qy?0:k;var D=ude(S,Qy?_1(c,k):c),j;if(D===null||(j=Umt(qmt(S.lastIndex+(Qy?k:0)),c.length))===L)k=kmt(c,k,v);else{if(e_(R,_1(c,L,k)),R.length===T)return R;for(var B=1;B<=D.length-1;B++)if(e_(R,D[B]),R.length===T)return R;k=L=j}}return e_(R,_1(c,L)),R}]},!Gmt,Qy)});var gde=A(()=>{"use strict";var $mt=te(),mde=Pf(),Hmt=go().f,Wmt=xs(),pde=wr(),Zmt=kM(),Ymt=ti(),Kmt=qM(),Xmt=Vr(),dde=mde("".startsWith),Jmt=mde("".slice),Qmt=Math.min,vde=Kmt("startsWith"),evt=!Xmt&&!vde&&!!function(){var r=Hmt(String.prototype,"startsWith");return r&&!r.writable}();$mt({target:"String",proto:!0,forced:!evt&&!vde},{startsWith:function(e){var t=pde(Ymt(this));Zmt(e);var n=Wmt(Qmt(arguments.length>1?arguments[1]:void 0,t.length)),i=pde(e);return dde?dde(t,i,n):Jmt(t,n,n+i.length)===i}})});var _de=A(()=>{"use strict";var tvt=te(),rvt=rt(),nvt=ti(),yde=ri(),ivt=wr(),ovt=rvt("".slice),avt=Math.max,svt=Math.min,lvt=!"".substr||"ab".substr(-1)!=="b";tvt({target:"String",proto:!0,forced:lvt},{substr:function(e,t){var n=ivt(nvt(this)),i=n.length,o=yde(e),a,c;return o===1/0&&(o=0),o<0&&(o=avt(i+o,0)),a=t===void 0?i:yde(t),a<=0||a===1/0?"":(c=svt(o+a,i),o>=c?"":ovt(n,o,c))}})});var zU=A(()=>{"use strict";var uvt=te(),bde=Rt(),FU=rt(),cvt=ti(),fvt=wr(),hvt=ft(),pvt=Array,qU=FU("".charAt),xde=FU("".charCodeAt),dvt=FU([].join),jU="".toWellFormed,mvt="\uFFFD",wde=jU&&hvt(function(){return bde(jU,1)!=="1"});uvt({target:"String",proto:!0,forced:wde},{toWellFormed:function(){var e=fvt(cvt(this));if(wde)return bde(jU,e);for(var t=e.length,n=pvt(t),i=0;i<t;i++){var o=xde(e,i);(o&63488)!==55296?n[i]=qU(e,i):o>=56320||i+1>=t||(xde(e,i+1)&64512)!==56320?n[i]=mvt:(n[i]=qU(e,i),n[++i]=qU(e,i))}return dvt(n,"")}})});var UM=A((vdr,Ide)=>{"use strict";var vvt=Mm().PROPER,gvt=ft(),Sde=$m(),Ede="\u200B\x85\u180E";Ide.exports=function(r){return gvt(function(){return!!Sde[r]()||Ede[r]()!==Ede||vvt&&Sde[r].name!==r})}});var Tde=A(()=>{"use strict";var yvt=te(),_vt=Hm().trim,xvt=UM();yvt({target:"String",proto:!0,forced:xvt("trim")},{trim:function(){return _vt(this)}})});var BU=A((_dr,Ade)=>{"use strict";var wvt=Hm().end,bvt=UM();Ade.exports=bvt("trimEnd")?function(){return wvt(this)}:"".trimEnd});var Mde=A(()=>{"use strict";var Svt=te(),Cde=BU();Svt({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==Cde},{trimRight:Cde})});var Pde=A(()=>{"use strict";Mde();var Evt=te(),Rde=BU();Evt({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==Rde},{trimEnd:Rde})});var UU=A((Edr,Ode)=>{"use strict";var Ivt=Hm().start,Tvt=UM();Ode.exports=Tvt("trimStart")?function(){return Ivt(this)}:"".trimStart});var Dde=A(()=>{"use strict";var Avt=te(),Lde=UU();Avt({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==Lde},{trimLeft:Lde})});var kde=A(()=>{"use strict";Dde();var Cvt=te(),Nde=UU();Cvt({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==Nde},{trimStart:Nde})});var Is=A((Mdr,jde)=>{"use strict";var Mvt=rt(),Rvt=ti(),qde=wr(),Pvt=/"/g,Ovt=Mvt("".replace);jde.exports=function(r,e,t,n){var i=qde(Rvt(r)),o="<"+e;return t!==""&&(o+=" "+t+"=\""+Ovt(qde(n),Pvt,"&quot;")+"\""),o+">"+i+"</"+e+">"}});var Ts=A((Rdr,Fde)=>{"use strict";var Lvt=ft();Fde.exports=function(r){return Lvt(function(){var e=""[r]("\"");return e!==e.toLowerCase()||e.split("\"").length>3})}});var zde=A(()=>{"use strict";var Dvt=te(),Nvt=Is(),kvt=Ts();Dvt({target:"String",proto:!0,forced:kvt("anchor")},{anchor:function(e){return Nvt(this,"a","name",e)}})});var Bde=A(()=>{"use strict";var qvt=te(),jvt=Is(),Fvt=Ts();qvt({target:"String",proto:!0,forced:Fvt("big")},{big:function(){return jvt(this,"big","","")}})});var Ude=A(()=>{"use strict";var zvt=te(),Bvt=Is(),Uvt=Ts();zvt({target:"String",proto:!0,forced:Uvt("blink")},{blink:function(){return Bvt(this,"blink","","")}})});var Vde=A(()=>{"use strict";var Vvt=te(),Gvt=Is(),$vt=Ts();Vvt({target:"String",proto:!0,forced:$vt("bold")},{bold:function(){return Gvt(this,"b","","")}})});var Gde=A(()=>{"use strict";var Hvt=te(),Wvt=Is(),Zvt=Ts();Hvt({target:"String",proto:!0,forced:Zvt("fixed")},{fixed:function(){return Wvt(this,"tt","","")}})});var $de=A(()=>{"use strict";var Yvt=te(),Kvt=Is(),Xvt=Ts();Yvt({target:"String",proto:!0,forced:Xvt("fontcolor")},{fontcolor:function(e){return Kvt(this,"font","color",e)}})});var Hde=A(()=>{"use strict";var Jvt=te(),Qvt=Is(),egt=Ts();Jvt({target:"String",proto:!0,forced:egt("fontsize")},{fontsize:function(e){return Qvt(this,"font","size",e)}})});var Wde=A(()=>{"use strict";var tgt=te(),rgt=Is(),ngt=Ts();tgt({target:"String",proto:!0,forced:ngt("italics")},{italics:function(){return rgt(this,"i","","")}})});var Zde=A(()=>{"use strict";var igt=te(),ogt=Is(),agt=Ts();igt({target:"String",proto:!0,forced:agt("link")},{link:function(e){return ogt(this,"a","href",e)}})});var Yde=A(()=>{"use strict";var sgt=te(),lgt=Is(),ugt=Ts();sgt({target:"String",proto:!0,forced:ugt("small")},{small:function(){return lgt(this,"small","","")}})});var Kde=A(()=>{"use strict";var cgt=te(),fgt=Is(),hgt=Ts();cgt({target:"String",proto:!0,forced:hgt("strike")},{strike:function(){return fgt(this,"strike","","")}})});var Xde=A(()=>{"use strict";var pgt=te(),dgt=Is(),mgt=Ts();pgt({target:"String",proto:!0,forced:mgt("sub")},{sub:function(){return dgt(this,"sub","","")}})});var Jde=A(()=>{"use strict";var vgt=te(),ggt=Is(),ygt=Ts();vgt({target:"String",proto:!0,forced:ygt("sup")},{sup:function(){return ggt(this,"sup","","")}})});var VM=A((nmr,eme)=>{"use strict";var Qde=Ht(),VU=ft(),_gt=zb(),xgt=jr().NATIVE_ARRAY_BUFFER_VIEWS,wgt=Qde.ArrayBuffer,Qm=Qde.Int8Array;eme.exports=!xgt||!VU(function(){Qm(1)})||!VU(function(){new Qm(-1)})||!_gt(function(r){new Qm,new Qm(null),new Qm(1.5),new Qm(r)},!0)||VU(function(){return new Qm(new wgt(2),1,void 0).length!==1})});var t_=A((imr,tme)=>{"use strict";var bgt=ri(),Sgt=RangeError;tme.exports=function(r){var e=bgt(r);if(e<0)throw new Sgt("The argument can't be less than 0");return e}});var GU=A((omr,rme)=>{"use strict";var Egt=t_(),Igt=RangeError;rme.exports=function(r,e){var t=Egt(r);if(t%e)throw new Igt("Wrong offset");return t}});var $U=A((amr,nme)=>{"use strict";var Tgt=Math.round;nme.exports=function(r){var e=Tgt(r);return e<0?0:e>255?255:e&255}});var GM=A((smr,ime)=>{"use strict";var Agt=ws();ime.exports=function(r){var e=Agt(r);return e==="BigInt64Array"||e==="BigUint64Array"}});var x1=A((lmr,ome)=>{"use strict";var Cgt=bb(),Mgt=TypeError;ome.exports=function(r){var e=Cgt(r,"number");if(typeof e=="number")throw new Mgt("Can't convert number to bigint");return BigInt(e)}});var HU=A((umr,ame)=>{"use strict";var Rgt=kn(),Pgt=Rt(),Ogt=Ny(),Lgt=Gr(),Dgt=Zr(),Ngt=Np(),kgt=Nf(),qgt=DC(),jgt=GM(),Fgt=jr().aTypedArrayConstructor,zgt=x1();ame.exports=function(e){var t=Ogt(this),n=Lgt(e),i=arguments.length,o=i>1?arguments[1]:void 0,a=o!==void 0,c=kgt(n),h,d,v,x,S,T,L,k;if(c&&!qgt(c))for(L=Ngt(n,c),k=L.next,n=[];!(T=Pgt(k,L)).done;)n.push(T.value);for(a&&i>2&&(o=Rgt(o,arguments[2])),d=Dgt(n),v=new(Fgt(t))(d),x=jgt(v),h=0;d>h;h++)S=a?o(n[h],h):n[h],v[h]=x?zgt(S):+S;return v}});var Cc=A((cmr,QU)=>{"use strict";var sme=te(),yme=Ht(),lme=Rt(),Bgt=fr(),Ugt=VM(),r_=jr(),_me=Wb(),ume=wa(),Vgt=_s(),w1=Hi(),Ggt=vM(),$gt=xs(),cme=My(),WU=GU(),Hgt=$U(),xme=Du(),b1=qr(),Wgt=ws(),KU=Ir(),Zgt=Mf(),Ygt=Bi(),Kgt=_a(),$M=zl(),Xgt=Rf().f,fme=HU(),Jgt=Ui().forEach,Qgt=Fp(),eyt=ci(),wme=Zn(),bme=go(),e3=vn(),tyt=km(),XU=e3.get,ryt=e3.set,nyt=e3.enforce,Sme=wme.f,iyt=bme.f,ZU=yme.RangeError,Eme=_me.ArrayBuffer,oyt=Eme.prototype,ayt=_me.DataView,HM=r_.NATIVE_ARRAY_BUFFER_VIEWS,hme=r_.TYPED_ARRAY_TAG,pme=r_.TypedArray,S1=r_.TypedArrayPrototype,syt=r_.aTypedArrayConstructor,JU=r_.isTypedArray,WM="BYTES_PER_ELEMENT",YU="Wrong length",dme=function(r,e){syt(r);for(var t=0,n=e.length,i=new r(n);n>t;)i[t]=e[t++];return i},ZM=function(r,e){eyt(r,e,{configurable:!0,get:function(){return XU(this)[e]}})},mme=function(r){var e;return Kgt(oyt,r)||(e=Wgt(r))==="ArrayBuffer"||e==="SharedArrayBuffer"},Ime=function(r,e){return JU(r)&&!Zgt(e)&&e in r&&Ggt(+e)&&e>=0},vme=function(e,t){return t=xme(t),Ime(e,t)?Vgt(2,e[t]):iyt(e,t)},gme=function(e,t,n){return t=xme(t),Ime(e,t)&&KU(n)&&b1(n,"value")&&!b1(n,"get")&&!b1(n,"set")&&!n.configurable&&(!b1(n,"writable")||n.writable)&&(!b1(n,"enumerable")||n.enumerable)?(e[t]=n.value,e):Sme(e,t,n)};Bgt?(HM||(bme.f=vme,wme.f=gme,ZM(S1,"buffer"),ZM(S1,"byteOffset"),ZM(S1,"byteLength"),ZM(S1,"length")),sme({target:"Object",stat:!0,forced:!HM},{getOwnPropertyDescriptor:vme,defineProperty:gme}),QU.exports=function(r,e,t){var n=r.match(/\d+/)[0]/8,i=r+(t?"Clamped":"")+"Array",o="get"+r,a="set"+r,c=yme[i],h=c,d=h&&h.prototype,v={},x=function(k,R){var D=XU(k);return D.view[o](R*n+D.byteOffset,!0)},S=function(k,R,D){var j=XU(k);j.view[a](R*n+j.byteOffset,t?Hgt(D):D,!0)},T=function(k,R){Sme(k,R,{get:function(){return x(this,R)},set:function(D){return S(this,R,D)},enumerable:!0})};HM?Ugt&&(h=e(function(k,R,D,j){return ume(k,d),tyt(function(){return KU(R)?mme(R)?j!==void 0?new c(R,WU(D,n),j):D!==void 0?new c(R,WU(D,n)):new c(R):JU(R)?dme(h,R):lme(fme,h,R):new c(cme(R))}(),k,h)}),$M&&$M(h,pme),Jgt(Xgt(c),function(k){k in h||w1(h,k,c[k])}),h.prototype=d):(h=e(function(k,R,D,j){ume(k,d);var B=0,$=0,ee,J,ie;if(!KU(R))ie=cme(R),J=ie*n,ee=new Eme(J);else if(mme(R)){ee=R,$=WU(D,n);var ue=R.byteLength;if(j===void 0){if(ue%n)throw new ZU(YU);if(J=ue-$,J<0)throw new ZU(YU)}else if(J=$gt(j)*n,J+$>ue)throw new ZU(YU);ie=J/n}else return JU(R)?dme(h,R):lme(fme,h,R);for(ryt(k,{buffer:ee,byteOffset:$,byteLength:J,length:ie,view:new ayt(ee)});B<ie;)T(k,B++)}),$M&&$M(h,pme),d=h.prototype=Ygt(S1)),d.constructor!==h&&w1(d,"constructor",h),nyt(d).TypedArrayConstructor=h,hme&&w1(d,hme,i);var L=h!==c;v[i]=h,sme({global:!0,constructor:!0,forced:L,sham:!HM},v),WM in h||w1(h,WM,n),WM in d||w1(d,WM,n),Qgt(i)}):QU.exports=function(){}});var Tme=A(()=>{"use strict";var lyt=Cc();lyt("Float32",function(r){return function(t,n,i){return r(this,t,n,i)}})});var Ame=A(()=>{"use strict";var uyt=Cc();uyt("Float64",function(r){return function(t,n,i){return r(this,t,n,i)}})});var Cme=A(()=>{"use strict";var cyt=Cc();cyt("Int8",function(r){return function(t,n,i){return r(this,t,n,i)}})});var Mme=A(()=>{"use strict";var fyt=Cc();fyt("Int16",function(r){return function(t,n,i){return r(this,t,n,i)}})});var Rme=A(()=>{"use strict";var hyt=Cc();hyt("Int32",function(r){return function(t,n,i){return r(this,t,n,i)}})});var Pme=A(()=>{"use strict";var pyt=Cc();pyt("Uint8",function(r){return function(t,n,i){return r(this,t,n,i)}})});var Ome=A(()=>{"use strict";var dyt=Cc();dyt("Uint8",function(r){return function(t,n,i){return r(this,t,n,i)}},!0)});var Lme=A(()=>{"use strict";var myt=Cc();myt("Uint16",function(r){return function(t,n,i){return r(this,t,n,i)}})});var Dme=A(()=>{"use strict";var vyt=Cc();vyt("Uint32",function(r){return function(t,n,i){return r(this,t,n,i)}})});var t3=A(()=>{"use strict";var Nme=jr(),gyt=Zr(),yyt=ri(),_yt=Nme.aTypedArray,xyt=Nme.exportTypedArrayMethod;xyt("at",function(e){var t=_yt(this),n=gyt(t),i=yyt(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:t[o]})});var qme=A(()=>{"use strict";var wyt=rt(),kme=jr(),byt=Nz(),Syt=wyt(byt),Eyt=kme.aTypedArray,Iyt=kme.exportTypedArrayMethod;Iyt("copyWithin",function(e,t){return Syt(Eyt(this),e,t,arguments.length>2?arguments[2]:void 0)})});var Fme=A(()=>{"use strict";var jme=jr(),Tyt=Ui().every,Ayt=jme.aTypedArray,Cyt=jme.exportTypedArrayMethod;Cyt("every",function(e){return Tyt(Ayt(this),e,arguments.length>1?arguments[1]:void 0)})});var Bme=A(()=>{"use strict";var zme=jr(),Myt=jC(),Ryt=x1(),Pyt=ws(),Oyt=Rt(),Lyt=rt(),Dyt=ft(),Nyt=zme.aTypedArray,kyt=zme.exportTypedArrayMethod,qyt=Lyt("".slice),jyt=Dyt(function(){var r=0;return new Int8Array(2).fill({valueOf:function(){return r++}}),r!==1});kyt("fill",function(e){var t=arguments.length;Nyt(this);var n=qyt(Pyt(this),0,3)==="Big"?Ryt(e):+e;return Oyt(Myt,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)},jyt)});var n_=A((qmr,Vme)=>{"use strict";var Ume=jr(),Fyt=Vm(),zyt=Ume.aTypedArrayConstructor,Byt=Ume.getTypedArrayConstructor;Vme.exports=function(r){return zyt(Fyt(r,Byt(r)))}});var YM=A((jmr,Gme)=>{"use strict";var Uyt=Bm(),Vyt=n_();Gme.exports=function(r,e){return Uyt(Vyt(r),e)}});var Hme=A(()=>{"use strict";var $me=jr(),Gyt=Ui().filter,$yt=YM(),Hyt=$me.aTypedArray,Wyt=$me.exportTypedArrayMethod;Wyt("filter",function(e){var t=Gyt(Hyt(this),e,arguments.length>1?arguments[1]:void 0);return $yt(this,t)})});var Zme=A(()=>{"use strict";var Wme=jr(),Zyt=Ui().find,Yyt=Wme.aTypedArray,Kyt=Wme.exportTypedArrayMethod;Kyt("find",function(e){return Zyt(Yyt(this),e,arguments.length>1?arguments[1]:void 0)})});var Kme=A(()=>{"use strict";var Yme=jr(),Xyt=Ui().findIndex,Jyt=Yme.aTypedArray,Qyt=Yme.exportTypedArrayMethod;Qyt("findIndex",function(e){return Xyt(Jyt(this),e,arguments.length>1?arguments[1]:void 0)})});var r3=A(()=>{"use strict";var Xme=jr(),e_t=Fb().findLast,t_t=Xme.aTypedArray,r_t=Xme.exportTypedArrayMethod;r_t("findLast",function(e){return e_t(t_t(this),e,arguments.length>1?arguments[1]:void 0)})});var n3=A(()=>{"use strict";var Jme=jr(),n_t=Fb().findLastIndex,i_t=Jme.aTypedArray,o_t=Jme.exportTypedArrayMethod;o_t("findLastIndex",function(e){return n_t(i_t(this),e,arguments.length>1?arguments[1]:void 0)})});var eve=A(()=>{"use strict";var Qme=jr(),a_t=Ui().forEach,s_t=Qme.aTypedArray,l_t=Qme.exportTypedArrayMethod;l_t("forEach",function(e){a_t(s_t(this),e,arguments.length>1?arguments[1]:void 0)})});var tve=A(()=>{"use strict";var u_t=VM(),c_t=jr().exportTypedArrayStaticMethod,f_t=HU();c_t("from",f_t,u_t)});var nve=A(()=>{"use strict";var rve=jr(),h_t=wy().includes,p_t=rve.aTypedArray,d_t=rve.exportTypedArrayMethod;d_t("includes",function(e){return h_t(p_t(this),e,arguments.length>1?arguments[1]:void 0)})});var ove=A(()=>{"use strict";var ive=jr(),m_t=wy().indexOf,v_t=ive.aTypedArray,g_t=ive.exportTypedArrayMethod;g_t("indexOf",function(e){return m_t(v_t(this),e,arguments.length>1?arguments[1]:void 0)})});var cve=A(()=>{"use strict";var y_t=Ht(),__t=ft(),i3=rt(),sve=jr(),o3=Vb(),x_t=hr(),a3=x_t("iterator"),ave=y_t.Uint8Array,w_t=i3(o3.values),b_t=i3(o3.keys),S_t=i3(o3.entries),s3=sve.aTypedArray,KM=sve.exportTypedArrayMethod,i_=ave&&ave.prototype,XM=!__t(function(){i_[a3].call([1])}),lve=!!i_&&i_.values&&i_[a3]===i_.values&&i_.values.name==="values",uve=function(){return w_t(s3(this))};KM("entries",function(){return S_t(s3(this))},XM);KM("keys",function(){return b_t(s3(this))},XM);KM("values",uve,XM||!lve,{name:"values"});KM(a3,uve,XM||!lve,{name:"values"})});var hve=A(()=>{"use strict";var fve=jr(),E_t=rt(),I_t=fve.aTypedArray,T_t=fve.exportTypedArrayMethod,A_t=E_t([].join);T_t("join",function(e){return A_t(I_t(this),e)})});var dve=A(()=>{"use strict";var pve=jr(),C_t=xa(),M_t=Xz(),R_t=pve.aTypedArray,P_t=pve.exportTypedArrayMethod;P_t("lastIndexOf",function(e){var t=arguments.length;return C_t(M_t,R_t(this),t>1?[e,arguments[1]]:[e])})});var vve=A(()=>{"use strict";var mve=jr(),O_t=Ui().map,L_t=n_(),D_t=mve.aTypedArray,N_t=mve.exportTypedArrayMethod;N_t("map",function(e){return O_t(D_t(this),e,arguments.length>1?arguments[1]:void 0,function(t,n){return new(L_t(t))(n)})})});var yve=A(()=>{"use strict";var gve=jr(),k_t=VM(),q_t=gve.aTypedArrayConstructor,j_t=gve.exportTypedArrayStaticMethod;j_t("of",function(){for(var e=0,t=arguments.length,n=new(q_t(this))(t);t>e;)n[e]=arguments[e++];return n},k_t)});var xve=A(()=>{"use strict";var _ve=jr(),F_t=Gb().left,z_t=_ve.aTypedArray,B_t=_ve.exportTypedArrayMethod;B_t("reduce",function(e){var t=arguments.length;return F_t(z_t(this),e,t,t>1?arguments[1]:void 0)})});var bve=A(()=>{"use strict";var wve=jr(),U_t=Gb().right,V_t=wve.aTypedArray,G_t=wve.exportTypedArrayMethod;G_t("reduceRight",function(e){var t=arguments.length;return U_t(V_t(this),e,t,t>1?arguments[1]:void 0)})});var Eve=A(()=>{"use strict";var Sve=jr(),$_t=Sve.aTypedArray,H_t=Sve.exportTypedArrayMethod,W_t=Math.floor;H_t("reverse",function(){for(var e=this,t=$_t(e).length,n=W_t(t/2),i=0,o;i<n;)o=e[i],e[i++]=e[--t],e[t]=o;return e})});var Rve=A(()=>{"use strict";var Tve=Ht(),Ave=Rt(),c3=jr(),Z_t=Zr(),Y_t=GU(),K_t=Gr(),Cve=ft(),X_t=Tve.RangeError,l3=Tve.Int8Array,Ive=l3&&l3.prototype,Mve=Ive&&Ive.set,J_t=c3.aTypedArray,Q_t=c3.exportTypedArrayMethod,u3=!Cve(function(){var r=new Uint8ClampedArray(2);return Ave(Mve,r,{length:1,0:3},1),r[1]!==3}),e0t=u3&&c3.NATIVE_ARRAY_BUFFER_VIEWS&&Cve(function(){var r=new l3(2);return r.set(1),r.set("2",1),r[0]!==0||r[1]!==2});Q_t("set",function(e){J_t(this);var t=Y_t(arguments.length>1?arguments[1]:void 0,1),n=K_t(e);if(u3)return Ave(Mve,this,n,t);var i=this.length,o=Z_t(n),a=0;if(o+t>i)throw new X_t("Wrong length");for(;a<o;)this[t+a]=n[a++]},!u3||e0t)});var Ove=A(()=>{"use strict";var Pve=jr(),t0t=n_(),r0t=ft(),n0t=Lf(),i0t=Pve.aTypedArray,o0t=Pve.exportTypedArrayMethod,a0t=r0t(function(){new Int8Array(1).slice()});o0t("slice",function(e,t){for(var n=n0t(i0t(this),e,t),i=t0t(this),o=0,a=n.length,c=new i(a);a>o;)c[o]=n[o++];return c},a0t)});var Dve=A(()=>{"use strict";var Lve=jr(),s0t=Ui().some,l0t=Lve.aTypedArray,u0t=Lve.exportTypedArrayMethod;u0t("some",function(e){return s0t(l0t(this),e,arguments.length>1?arguments[1]:void 0)})});var zve=A(()=>{"use strict";var c0t=Ht(),f0t=Pf(),f3=ft(),h0t=xr(),p0t=$C(),Fve=jr(),Nve=e4(),d0t=t4(),kve=xc(),qve=HC(),m0t=Fve.aTypedArray,v0t=Fve.exportTypedArrayMethod,E1=c0t.Uint16Array,o_=E1&&f0t(E1.prototype.sort),g0t=!!o_&&!(f3(function(){o_(new E1(2),null)})&&f3(function(){o_(new E1(2),{})})),jve=!!o_&&!f3(function(){if(kve)return kve<74;if(Nve)return Nve<67;if(d0t)return!0;if(qve)return qve<602;var r=new E1(516),e=Array(516),t,n;for(t=0;t<516;t++)n=t%4,r[t]=515-t,e[t]=t-2*n+3;for(o_(r,function(i,o){return(i/4|0)-(o/4|0)}),t=0;t<516;t++)if(r[t]!==e[t])return!0}),y0t=function(r){return function(e,t){return r!==void 0?+r(e,t)||0:t!==t?-1:e!==e?1:e===0&&t===0?1/e>0&&1/t<0?1:-1:e>t}};v0t("sort",function(e){return e!==void 0&&h0t(e),jve?o_(this,e):p0t(m0t(this),y0t(e))},!jve||g0t)});var Vve=A(()=>{"use strict";var Uve=jr(),_0t=xs(),Bve=ql(),x0t=n_(),w0t=Uve.aTypedArray,b0t=Uve.exportTypedArrayMethod;b0t("subarray",function(e,t){var n=w0t(this),i=n.length,o=Bve(e,i),a=x0t(n);return new a(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,_0t((t===void 0?i:Bve(t,i))-o))})});var Zve=A(()=>{"use strict";var S0t=Ht(),E0t=xa(),Hve=jr(),h3=ft(),Gve=Lf(),JM=S0t.Int8Array,$ve=Hve.aTypedArray,I0t=Hve.exportTypedArrayMethod,Wve=[].toLocaleString,T0t=!!JM&&h3(function(){Wve.call(new JM(1))}),A0t=h3(function(){return[1,2].toLocaleString()!==new JM([1,2]).toLocaleString()})||!h3(function(){JM.prototype.toLocaleString.call([1,2])});I0t("toLocaleString",function(){return E0t(Wve,T0t?Gve($ve(this)):$ve(this),Gve(arguments))},A0t)});var d3=A(()=>{"use strict";var C0t=i4(),p3=jr(),M0t=p3.aTypedArray,R0t=p3.exportTypedArrayMethod,P0t=p3.getTypedArrayConstructor;R0t("toReversed",function(){return C0t(M0t(this),P0t(this))})});var m3=A(()=>{"use strict";var QM=jr(),O0t=rt(),L0t=xr(),D0t=Bm(),N0t=QM.aTypedArray,k0t=QM.getTypedArrayConstructor,q0t=QM.exportTypedArrayMethod,j0t=O0t(QM.TypedArrayPrototype.sort);q0t("toSorted",function(e){e!==void 0&&L0t(e);var t=N0t(this),n=D0t(k0t(t),t);return j0t(n,e)})});var Kve=A(()=>{"use strict";var F0t=jr().exportTypedArrayMethod,z0t=ft(),B0t=Ht(),U0t=rt(),Yve=B0t.Uint8Array,V0t=Yve&&Yve.prototype||{},eR=[].toString,G0t=U0t([].join);z0t(function(){eR.call({})})&&(eR=function(){return G0t(this)});var $0t=V0t.toString!==eR;F0t("toString",eR,$0t)});var g3=A(()=>{"use strict";var H0t=u4(),v3=jr(),W0t=GM(),Z0t=ri(),Y0t=x1(),K0t=v3.aTypedArray,X0t=v3.getTypedArrayConstructor,J0t=v3.exportTypedArrayMethod,Q0t=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(r){return r===8}}();J0t("with",function(r,e){var t=K0t(this),n=Z0t(r),i=W0t(t)?Y0t(e):+e;return H0t(t,X0t(t),n,i)},!Q0t)});var tge=A(()=>{"use strict";var ext=te(),y3=rt(),txt=wr(),Xve=String.fromCharCode,Jve=y3("".charAt),Qve=y3(/./.exec),ege=y3("".slice),rxt=/^[\da-f]{2}$/i,nxt=/^[\da-f]{4}$/i;ext({global:!0},{unescape:function(e){for(var t=txt(e),n="",i=t.length,o=0,a,c;o<i;){if(a=Jve(t,o++),a==="%"){if(Jve(t,o)==="u"){if(c=ege(t,o+1,o+5),Qve(nxt,c)){n+=Xve(parseInt(c,16)),o+=5;continue}}else if(c=ege(t,o,o+2),Qve(rxt,c)){n+=Xve(parseInt(c,16)),o+=2;continue}}n+=a}return n}})});var w3=A((Bvr,sge)=>{"use strict";var ixt=rt(),rge=Ul(),tR=$p().getWeakData,oxt=wa(),axt=Lt(),sxt=$i(),_3=Ir(),lxt=Pi(),ige=Ui(),nge=qr(),oge=vn(),uxt=oge.set,cxt=oge.getterFor,fxt=ige.find,hxt=ige.findIndex,pxt=ixt([].splice),dxt=0,rR=function(r){return r.frozen||(r.frozen=new age)},age=function(){this.entries=[]},x3=function(r,e){return fxt(r.entries,function(t){return t[0]===e})};age.prototype={get:function(r){var e=x3(this,r);if(e)return e[1]},has:function(r){return!!x3(this,r)},set:function(r,e){var t=x3(this,r);t?t[1]=e:this.entries.push([r,e])},delete:function(r){var e=hxt(this.entries,function(t){return t[0]===r});return~e&&pxt(this.entries,e,1),!!~e}};sge.exports={getConstructor:function(r,e,t,n){var i=r(function(h,d){oxt(h,o),uxt(h,{type:e,id:dxt++,frozen:void 0}),sxt(d)||lxt(d,h[n],{that:h,AS_ENTRIES:t})}),o=i.prototype,a=cxt(e),c=function(h,d,v){var x=a(h),S=tR(axt(d),!0);return S===!0?rR(x).set(d,v):S[x.id]=v,h};return rge(o,{delete:function(h){var d=a(this);if(!_3(h))return!1;var v=tR(h);return v===!0?rR(d).delete(h):v&&nge(v,d.id)&&delete v[d.id]},has:function(d){var v=a(this);if(!_3(d))return!1;var x=tR(d);return x===!0?rR(v).has(d):x&&nge(x,v.id)}}),rge(o,t?{get:function(d){var v=a(this);if(_3(d)){var x=tR(d);return x===!0?rR(v).get(d):x?x[v.id]:void 0}},set:function(d,v){return c(this,d,v)}}:{add:function(d){return c(this,d,!0)}}),i}}});var gge=A(()=>{"use strict";var mxt=Uf(),lge=Ht(),aR=rt(),uge=Ul(),vxt=$p(),gxt=Kb(),hge=w3(),nR=Ir(),iR=vn().enforce,yxt=ft(),_xt=qF(),A1=Object,xxt=Array.isArray,oR=A1.isExtensible,pge=A1.isFrozen,wxt=A1.isSealed,dge=A1.freeze,bxt=A1.seal,cge={},fge={},Sxt=!lge.ActiveXObject&&"ActiveXObject"in lge,I1,mge=function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},vge=gxt("WeakMap",mge,hge),a_=vge.prototype,sR=aR(a_.set),Ext=function(){return mxt&&yxt(function(){var r=dge([]);return sR(new vge,r,1),!pge(r)})};_xt&&(Sxt?(I1=hge.getConstructor(mge,"WeakMap",!0),vxt.enable(),b3=aR(a_.delete),T1=aR(a_.has),S3=aR(a_.get),uge(a_,{delete:function(r){if(nR(r)&&!oR(r)){var e=iR(this);return e.frozen||(e.frozen=new I1),b3(this,r)||e.frozen.delete(r)}return b3(this,r)},has:function(e){if(nR(e)&&!oR(e)){var t=iR(this);return t.frozen||(t.frozen=new I1),T1(this,e)||t.frozen.has(e)}return T1(this,e)},get:function(e){if(nR(e)&&!oR(e)){var t=iR(this);return t.frozen||(t.frozen=new I1),T1(this,e)?S3(this,e):t.frozen.get(e)}return S3(this,e)},set:function(e,t){if(nR(e)&&!oR(e)){var n=iR(this);n.frozen||(n.frozen=new I1),T1(this,e)?sR(this,e,t):n.frozen.set(e,t)}else sR(this,e,t);return this}})):Ext()&&uge(a_,{set:function(e,t){var n;return xxt(e)&&(pge(e)?n=cge:wxt(e)&&(n=fge)),sR(this,e,t),n===cge&&dge(e),n===fge&&bxt(e),this}}));var b3,T1,S3});var lR=A(()=>{"use strict";gge()});var yge=A(()=>{"use strict";var Ixt=Kb(),Txt=w3();Ixt("WeakSet",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},Txt)});var _ge=A(()=>{"use strict";yge()});var xge=A(()=>{"use strict";Mz()});var bge=A(()=>{"use strict";var Axt=te(),Cxt=_a(),Mxt=Wi(),cR=zl(),Rxt=by(),wge=Bi(),uR=Hi(),E3=_s(),Pxt=RC(),Oxt=qm(),Lxt=hr(),Dxt=Lxt("toStringTag"),fR=Error,s_=function(e,t,n){var i=Cxt(I3,this),o;return cR?o=cR(new fR,i?Mxt(this):I3):(o=i?this:wge(I3),uR(o,Dxt,"Error")),n!==void 0&&uR(o,"message",Oxt(n)),Pxt(o,s_,o.stack,1),uR(o,"error",e),uR(o,"suppressed",t),o};cR?cR(s_,fR):Rxt(s_,fR,{name:!0});var I3=s_.prototype=wge(fR.prototype,{constructor:E3(1,s_),message:E3(1,""),name:E3(1,"SuppressedError")});Axt({global:!0,constructor:!0,arity:3},{SuppressedError:s_})});var l_=A((egr,Rge)=>{"use strict";var Age=Ht(),Cge=wb(),Mge=Er(),Nxt=Bi(),hR=Wi(),kxt=En(),qxt=hr(),jxt=Vr(),Sge="USE_FUNCTION_CONSTRUCTOR",Ege=qxt("asyncIterator"),Ige=Age.AsyncIterator,Tge=Cge.AsyncIteratorPrototype,Mc,T3;if(Tge)Mc=Tge;else if(Mge(Ige))Mc=Ige.prototype;else if(Cge[Sge]||Age[Sge])try{T3=hR(hR(hR(Function("return async function*(){}()")()))),hR(T3)===Object.prototype&&(Mc=T3)}catch(r){}Mc?jxt&&(Mc=Nxt(Mc)):Mc={};Mge(Mc[Ege])||kxt(Mc,Ege,function(){return this});Rge.exports=Mc});var C1=A((tgr,Fge)=>{"use strict";var Pge=Rt(),Oge=Lt(),Fxt=Bi(),zxt=zi(),Bxt=Ul(),Nge=vn(),Uxt=_r(),Vxt=l_(),kge=Zo(),A3=Uxt("Promise"),qge="AsyncFromSyncIterator",Gxt=Nge.set,Lge=Nge.getterFor(qge),Dge=function(r,e,t){var n=r.done;A3.resolve(r.value).then(function(i){e(kge(i,n))},t)},jge=function(e){e.type=qge,Gxt(this,e)};jge.prototype=Bxt(Fxt(Vxt),{next:function(){var e=Lge(this);return new A3(function(t,n){var i=Oge(Pge(e.next,e.iterator));Dge(i,t,n)})},return:function(){var r=Lge(this).iterator;return new A3(function(e,t){var n=zxt(r,"return");if(n===void 0)return e(kge(void 0,!0));var i=Oge(Pge(n,r));Dge(i,e,t)})}});Fge.exports=jge});var fi=A((rgr,zge)=>{"use strict";zge.exports=function(r){return{iterator:r,next:r.next,done:!1}}});var Uge=A((ngr,Bge)=>{"use strict";var $xt=Rt(),Hxt=C1(),Wxt=Lt(),Zxt=Np(),Yxt=fi(),Kxt=zi(),Xxt=hr(),Jxt=Xxt("asyncIterator");Bge.exports=function(r,e){var t=arguments.length<2?Kxt(r,Jxt):e;return t?Wxt($xt(t,r)):new Hxt(Yxt(Zxt(r)))}});var u_=A((igr,Vge)=>{"use strict";var Qxt=Rt(),ewt=_r(),twt=zi();Vge.exports=function(r,e,t,n){try{var i=twt(r,"return");if(i)return ewt("Promise").resolve(Qxt(i,r)).then(function(){e(t)},function(o){n(o)})}catch(o){return n(o)}e(t)}});var ev=A((ogr,Gge)=>{"use strict";var rwt=Rt(),nwt=xr(),C3=Lt(),iwt=Ir(),owt=kp(),awt=_r(),swt=fi(),M3=u_(),M1=function(r){var e=r===0,t=r===1,n=r===2,i=r===3;return function(o,a,c){C3(o);var h=a!==void 0;(h||!e)&&nwt(a);var d=swt(o),v=awt("Promise"),x=d.iterator,S=d.next,T=0;return new v(function(L,k){var R=function(j){M3(x,k,j,k)},D=function(){try{if(h)try{owt(T)}catch(j){R(j)}v.resolve(C3(rwt(S,x))).then(function(j){try{if(C3(j).done)e?(c.length=T,L(c)):L(i?!1:n||void 0);else{var B=j.value;try{if(h){var $=a(B,T),ee=function(J){if(t)D();else if(n)J?D():M3(x,L,!1,k);else if(e)try{c[T++]=J,D()}catch(ie){R(ie)}else J?M3(x,L,i||B,k):D()};iwt($)?v.resolve($).then(ee,R):ee($)}else c[T++]=B,D()}catch(J){R(J)}}}catch(J){k(J)}},k)}catch(j){k(j)}};D()})}};Gge.exports={toArray:M1(0),forEach:M1(1),every:M1(2),some:M1(3),find:M1(4)}});var R3=A((agr,Zge)=>{"use strict";var lwt=kn(),$ge=rt(),uwt=Gr(),cwt=qu(),fwt=Uge(),hwt=Np(),pwt=fi(),dwt=Nf(),mwt=zi(),vwt=a4(),gwt=_r(),ywt=hr(),_wt=C1(),xwt=ev().toArray,wwt=ywt("asyncIterator"),Hge=$ge(vwt("Array").values),bwt=$ge(Hge([]).next),Swt=function(){return new Wge(this)},Wge=function(r){this.iterator=Hge(r)};Wge.prototype.next=function(){return bwt(this.iterator)};Zge.exports=function(e){var t=this,n=arguments.length,i=n>1?arguments[1]:void 0,o=n>2?arguments[2]:void 0;return new(gwt("Promise"))(function(a){var c=uwt(e);i!==void 0&&(i=lwt(i,o));var h=mwt(c,wwt),d=h?void 0:dwt(c)||Swt,v=cwt(t)?new t:[],x=h?fwt(c,h):new _wt(pwt(hwt(c,d)));a(xwt(x,i,v))})}});var Yge=A(()=>{"use strict";var Ewt=te(),Iwt=R3();Ewt({target:"Array",stat:!0},{fromAsync:Iwt})});var Kge=A(()=>{"use strict";Lz()});var Xge=A(()=>{"use strict";var Twt=te(),Awt=Ui().filterReject,Cwt=_i();Twt({target:"Array",proto:!0,forced:!0},{filterOut:function(e){return Awt(this,e,arguments.length>1?arguments[1]:void 0)}});Cwt("filterOut")});var Jge=A(()=>{"use strict";var Mwt=te(),Rwt=Ui().filterReject,Pwt=_i();Mwt({target:"Array",proto:!0,forced:!0},{filterReject:function(e){return Rwt(this,e,arguments.length>1?arguments[1]:void 0)}});Pwt("filterReject")});var Qge=A(()=>{"use strict";jz()});var eye=A(()=>{"use strict";Fz()});var pR=A((_gr,tye)=>{"use strict";var Owt=kn(),Lwt=rt(),Dwt=Cf(),Nwt=Gr(),kwt=Du(),qwt=Zr(),jwt=Bi(),Fwt=Bm(),zwt=Array,Bwt=Lwt([].push);tye.exports=function(r,e,t,n){for(var i=Nwt(r),o=Dwt(i),a=Owt(e,t),c=jwt(null),h=qwt(o),d=0,v,x,S;h>d;d++)S=o[d],x=kwt(a(S,d,i)),x in c?Bwt(c[x],S):c[x]=[S];if(n&&(v=n(i),v!==zwt))for(x in c)c[x]=Fwt(v,c[x]);return c}});var rye=A(()=>{"use strict";var Uwt=te(),Vwt=pR(),Gwt=_i();Uwt({target:"Array",proto:!0},{group:function(e){var t=arguments.length>1?arguments[1]:void 0;return Vwt(this,e,t)}});Gwt("group")});var nye=A(()=>{"use strict";var $wt=te(),Hwt=pR(),Wwt=Bl(),Zwt=_i();$wt({target:"Array",proto:!0,forced:!Wwt("groupBy")},{groupBy:function(e){var t=arguments.length>1?arguments[1]:void 0;return Hwt(this,e,t)}});Zwt("groupBy")});var Wa=A((Egr,iye)=>{"use strict";var dR=rt(),R1=Map.prototype;iye.exports={Map,set:dR(R1.set),get:dR(R1.get),has:dR(R1.has),remove:dR(R1.delete),proto:R1}});var P3=A((Igr,oye)=>{"use strict";var Ywt=kn(),Kwt=rt(),Xwt=Cf(),Jwt=Gr(),Qwt=Zr(),mR=Wa(),ebt=mR.Map,tbt=mR.get,rbt=mR.has,nbt=mR.set,ibt=Kwt([].push);oye.exports=function(e){for(var t=Jwt(this),n=Xwt(t),i=Ywt(e,arguments.length>1?arguments[1]:void 0),o=new ebt,a=Qwt(n),c=0,h,d;a>c;c++)d=n[c],h=i(d,c,t),rbt(o,h)?ibt(tbt(o,h),d):nbt(o,h,[d]);return o}});var aye=A(()=>{"use strict";var obt=te(),abt=Bl(),sbt=_i(),lbt=P3(),ubt=Vr();obt({target:"Array",proto:!0,name:"groupToMap",forced:ubt||!abt("groupByToMap")},{groupByToMap:lbt});sbt("groupByToMap")});var sye=A(()=>{"use strict";var cbt=te(),fbt=_i(),hbt=P3(),pbt=Vr();cbt({target:"Array",proto:!0,forced:pbt},{groupToMap:hbt});fbt("groupToMap")});var cye=A(()=>{"use strict";var dbt=te(),mbt=ku(),lye=Object.isFrozen,uye=function(r,e){if(!lye||!mbt(r)||!lye(r))return!1;for(var t=0,n=r.length,i;t<n;)if(i=r[t++],!(typeof i=="string"||e&&i===void 0))return!1;return n!==0};dbt({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(e){if(!uye(e,!0))return!1;var t=e.raw;return t.length===e.length&&uye(t,!1)}})});var fye=A(()=>{"use strict";var vbt=fr(),gbt=_i(),ybt=Gr(),_bt=Zr(),xbt=ci();vbt&&(xbt(Array.prototype,"lastIndex",{configurable:!0,get:function(){var e=ybt(this),t=_bt(e);return t===0?0:t-1}}),gbt("lastIndex"))});var dye=A(()=>{"use strict";var wbt=fr(),bbt=_i(),hye=Gr(),pye=Zr(),Sbt=ci();wbt&&(Sbt(Array.prototype,"lastItem",{configurable:!0,get:function(){var e=hye(this),t=pye(e);return t===0?void 0:e[t-1]},set:function(e){var t=hye(this),n=pye(t);return t[n===0?0:n-1]=e}}),bbt("lastItem"))});var mye=A(()=>{"use strict";o4()});var vye=A(()=>{"use strict";s4()});var gye=A(()=>{"use strict";l4()});var Gf=A((Ugr,yye)=>{"use strict";var Ebt=Rt();yye.exports=function(r,e,t){for(var n=t?r:r.iterator,i=r.next,o,a;!(o=Ebt(i,n)).done;)if(a=e(o.value),a!==void 0)return a}});var $l=A((Vgr,Sye)=>{"use strict";var _ye=rt(),Ibt=Gf(),xye=Wa(),Tbt=xye.Map,wye=xye.proto,Abt=_ye(wye.forEach),bye=_ye(wye.entries),Cbt=bye(new Tbt).next;Sye.exports=function(r,e,t){return t?Ibt({iterator:bye(r),next:Cbt},function(n){return e(n[1],n[0])}):Abt(r,e)}});var vR=A((Ggr,Eye)=>{"use strict";var Mbt=rt(),Rbt=xr(),Pbt=$i(),Obt=Zr(),Lbt=Gr(),O3=Wa(),Dbt=$l(),Nbt=O3.Map,kbt=O3.has,qbt=O3.set,jbt=Mbt([].push);Eye.exports=function(e){var t=Lbt(this),n=Obt(t),i=[],o=new Nbt,a=Pbt(e)?function(v){return v}:Rbt(e),c,h,d;for(c=0;c<n;c++)h=t[c],d=a(h),kbt(o,d)||qbt(o,d,h);return Dbt(o,function(v){jbt(i,v)}),i}});var Iye=A(()=>{"use strict";var Fbt=te(),zbt=_i(),Bbt=vR();Fbt({target:"Array",proto:!0,forced:!0},{uniqueBy:Bbt});zbt("uniqueBy")});var Tye=A(()=>{"use strict";c4()});var L3=A((Ygr,Aye)=>{"use strict";var Ubt=qb(),Vbt=Wo(),Gbt=TypeError;Aye.exports=Ubt(ArrayBuffer.prototype,"byteLength","get")||function(r){if(Vbt(r)!=="ArrayBuffer")throw new Gbt("ArrayBuffer expected");return r.byteLength}});var D3=A((Kgr,Cye)=>{"use strict";var $bt=rt(),Hbt=L3(),Wbt=$bt(ArrayBuffer.prototype.slice);Cye.exports=function(r){if(Hbt(r)!==0)return!1;try{return Wbt(r,0,0),!1}catch(e){return!0}}});var Rye=A(()=>{"use strict";var Zbt=fr(),Ybt=ci(),Kbt=D3(),Mye=ArrayBuffer.prototype;Zbt&&!("detached"in Mye)&&Ybt(Mye,"detached",{configurable:!0,get:function(){return Kbt(this)}})});var N3=A((Qgr,Pye)=>{"use strict";var Xbt=Sc();Pye.exports=function(r){try{if(Xbt)return Function("return require(\""+r+"\")")()}catch(e){}}});var gR=A((eyr,Lye)=>{"use strict";var Jbt=Ht(),Qbt=ft(),k3=xc(),e1t=NB(),t1t=bM(),r1t=Sc(),Oye=Jbt.structuredClone;Lye.exports=!!Oye&&!Qbt(function(){if(t1t&&k3>92||r1t&&k3>94||e1t&&k3>97)return!1;var r=new ArrayBuffer(8),e=Oye(r,{transfer:[r]});return r.byteLength!==0||e.byteLength!==8})});var qye=A((tyr,kye)=>{"use strict";var z3=Ht(),n1t=N3(),i1t=gR(),o1t=z3.structuredClone,Dye=z3.ArrayBuffer,yR=z3.MessageChannel,F3=!1,q3,Nye,_R,j3;if(i1t)F3=function(r){o1t(r,{transfer:[r]})};else if(Dye)try{yR||(q3=n1t("worker_threads"),q3&&(yR=q3.MessageChannel)),yR&&(Nye=new yR,_R=new Dye(2),j3=function(r){Nye.port1.postMessage(null,[r])},_R.byteLength===2&&(j3(_R),_R.byteLength===0&&(F3=j3)))}catch(r){}kye.exports=F3});var wR=A((ryr,Gye)=>{"use strict";var xR=Ht(),V3=rt(),Bye=qb(),a1t=My(),s1t=D3(),l1t=L3(),jye=qye(),B3=gR(),u1t=xR.structuredClone,Uye=xR.ArrayBuffer,U3=xR.DataView,c1t=xR.TypeError,f1t=Math.min,G3=Uye.prototype,Vye=U3.prototype,h1t=V3(G3.slice),Fye=Bye(G3,"resizable","get"),zye=Bye(G3,"maxByteLength","get"),p1t=V3(Vye.getInt8),d1t=V3(Vye.setInt8);Gye.exports=(B3||jye)&&function(r,e,t){var n=l1t(r),i=e===void 0?n:a1t(e),o=!Fye||!Fye(r),a;if(s1t(r))throw new c1t("ArrayBuffer is detached");if(B3&&(r=u1t(r,{transfer:[r]}),n===i&&(t||o)))return r;if(n>=i&&(!t||o))a=h1t(r,0,i);else{var c=t&&!o&&zye?{maxByteLength:zye(r)}:void 0;a=new Uye(i,c);for(var h=new U3(r),d=new U3(a),v=f1t(i,n),x=0;x<v;x++)d1t(d,x,p1t(h,x))}return B3||jye(r),a}});var Hye=A(()=>{"use strict";var m1t=te(),$ye=wR();$ye&&m1t({target:"ArrayBuffer",proto:!0},{transfer:function(){return $ye(this,arguments.length?arguments[0]:void 0,!0)}})});var Zye=A(()=>{"use strict";var v1t=te(),Wye=wR();Wye&&v1t({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return Wye(this,arguments.length?arguments[0]:void 0,!1)}})});var H3=A((syr,Qye)=>{"use strict";var g1t=Rt(),y1t=rt(),_1t=kn(),x1t=Lt(),w1t=xr(),Xye=$i(),$3=zi(),Jye=hr(),b1t=Jye("asyncDispose"),Yye=Jye("dispose"),S1t=y1t([].push),E1t=function(r,e){if(e==="async-dispose"){var t=$3(r,b1t);return t!==void 0?t:(t=$3(r,Yye),function(){g1t(t,this)})}return $3(r,Yye)},Kye=function(r,e,t){return arguments.length<3&&!Xye(r)&&(t=w1t(E1t(x1t(r),e))),t===void 0?function(){}:_1t(t,r)};Qye.exports=function(r,e,t,n){var i;if(arguments.length<4){if(Xye(e)&&t==="sync-dispose")return;i=Kye(e,t)}else i=Kye(void 0,t,n);S1t(r.stack,i)}});var a_e=A(()=>{"use strict";var I1t=te(),SR=fr(),r_e=_r(),e_e=xr(),T1t=wa(),n_e=En(),A1t=Ul(),C1t=ci(),i_e=hr(),o_e=vn(),W3=H3(),t_e=r_e("Promise"),M1t=r_e("SuppressedError"),R1t=ReferenceError,P1t=i_e("asyncDispose"),O1t=i_e("toStringTag"),IR="AsyncDisposableStack",L1t=o_e.set,ER=o_e.getterFor(IR),Z3="async-dispose",P1="disposed",D1t="pending",bR=function(r){var e=ER(r);if(e.state===P1)throw new R1t(IR+" already disposed");return e},Y3=function(){L1t(T1t(this,c_),{type:IR,state:D1t,stack:[]}),SR||(this.disposed=!1)},c_=Y3.prototype;A1t(c_,{disposeAsync:function(){var e=this;return new t_e(function(t,n){var i=ER(e);if(i.state===P1)return t(void 0);i.state=P1,SR||(e.disposed=!0);var o=i.stack,a=o.length,c=!1,h,d=function(x){c?h=new M1t(x,h):(c=!0,h=x),v()},v=function(){if(a){var x=o[--a];o[a]=null;try{t_e.resolve(x()).then(v,d)}catch(S){d(S)}}else i.stack=null,c?n(h):t(void 0)};v()})},use:function(e){return W3(bR(this),e,Z3),e},adopt:function(e,t){var n=bR(this);return e_e(t),W3(n,void 0,Z3,function(){return t(e)}),e},defer:function(e){var t=bR(this);e_e(e),W3(t,void 0,Z3,e)},move:function(){var e=bR(this),t=new Y3;return ER(t).stack=e.stack,e.stack=[],e.state=P1,SR||(this.disposed=!0),t}});SR&&C1t(c_,"disposed",{configurable:!0,get:function(){return ER(this).state===P1}});n_e(c_,P1t,c_.disposeAsync,{name:"disposeAsync"});n_e(c_,O1t,IR,{nonWritable:!0});I1t({global:!0,constructor:!0},{AsyncDisposableStack:Y3})});var f_e=A(()=>{"use strict";var N1t=te(),k1t=wa(),q1t=Wi(),l_e=Hi(),u_e=qr(),j1t=hr(),Kp=l_(),c_e=Vr(),s_e=j1t("toStringTag"),F1t=TypeError,K3=function(){if(k1t(this,Kp),q1t(this)===Kp)throw new F1t("Abstract class AsyncIterator not directly constructable")};K3.prototype=Kp;u_e(Kp,s_e)||l_e(Kp,s_e,"AsyncIterator");(c_e||!u_e(Kp,"constructor")||Kp.constructor===Object)&&l_e(Kp,"constructor",K3);N1t({global:!0,constructor:!0,forced:c_e},{AsyncIterator:K3})});var tv=A((hyr,x_e)=>{"use strict";var z1t=Rt(),TR=Hp(),h_e=Lt(),B1t=Bi(),U1t=Hi(),V1t=Ul(),G1t=hr(),d_e=vn(),$1t=_r(),H1t=zi(),W1t=l_(),X3=Zo(),p_e=kf(),Rc=$1t("Promise"),Z1t=G1t("toStringTag"),m_e="AsyncIteratorHelper",v_e="WrapForValidAsyncIterator",Y1t=d_e.set,g_e=function(r){var e=!r,t=d_e.getterFor(r?v_e:m_e),n=function(i){var o=TR(function(){return t(i)}),a=o.error,c=o.value;return a||e&&c.done?{exit:!0,value:a?Rc.reject(c):Rc.resolve(X3(void 0,!0))}:{exit:!1,value:c}};return V1t(B1t(W1t),{next:function(){var o=n(this),a=o.value;if(o.exit)return a;var c=TR(function(){return h_e(a.nextHandler(Rc))}),h=c.error,d=c.value;return h&&(a.done=!0),h?Rc.reject(d):Rc.resolve(d)},return:function(){var i=n(this),o=i.value;if(i.exit)return o;o.done=!0;var a=o.iterator,c,h,d=TR(function(){if(o.inner)try{p_e(o.inner.iterator,"normal")}catch(v){return p_e(a,"throw",v)}return H1t(a,"return")});return c=h=d.value,d.error?Rc.reject(h):c===void 0?Rc.resolve(X3(void 0,!0)):(d=TR(function(){return z1t(c,a)}),h=d.value,d.error?Rc.reject(h):r?Rc.resolve(h):Rc.resolve(h).then(function(v){return h_e(v),X3(void 0,!0)}))}})},K1t=g_e(!0),y_e=g_e(!1);U1t(y_e,Z1t,"Async Iterator Helper");x_e.exports=function(r,e){var t=function(i,o){o?(o.iterator=i.iterator,o.next=i.next):o=i,o.type=e?v_e:m_e,o.nextHandler=r,o.counter=0,o.done=!1,Y1t(this,o)};return t.prototype=e?K1t:y_e,t}});var Q3=A((pyr,b_e)=>{"use strict";var X1t=Rt(),J1t=xr(),J3=Lt(),Q1t=Ir(),eSt=fi(),tSt=tv(),w_e=Zo(),rSt=u_(),nSt=tSt(function(r){var e=this,t=e.iterator,n=e.mapper;return new r(function(i,o){var a=function(h){e.done=!0,o(h)},c=function(h){rSt(t,a,h,a)};r.resolve(J3(X1t(e.next,t))).then(function(h){try{if(J3(h).done)e.done=!0,i(w_e(void 0,!0));else{var d=h.value;try{var v=n(d,e.counter++),x=function(S){i(w_e(S,!1))};Q1t(v)?r.resolve(v).then(x,c):x(v)}catch(S){c(S)}}}catch(S){a(S)}},a)})});b_e.exports=function(e){return J3(this),J1t(e),new nSt(eSt(this),{mapper:e})}});var eV=A((dyr,S_e)=>{"use strict";var iSt=Rt(),oSt=Q3(),aSt=function(r,e){return[e,r]};S_e.exports=function(){return iSt(oSt,this,aSt)}});var E_e=A(()=>{"use strict";var sSt=te(),lSt=eV();sSt({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:lSt})});var C_e=A(()=>{"use strict";var uSt=Rt(),cSt=En(),fSt=_r(),hSt=zi(),pSt=qr(),dSt=hr(),I_e=l_(),T_e=dSt("asyncDispose"),A_e=fSt("Promise");pSt(I_e,T_e)||cSt(I_e,T_e,function(){var r=this;return new A_e(function(e,t){var n=hSt(r,"return");n?A_e.resolve(uSt(n,r)).then(function(){e(void 0)},t):e(void 0)})})});var O1=A((_yr,M_e)=>{"use strict";var mSt=RangeError;M_e.exports=function(r){if(r===r)return r;throw new mSt("NaN is not allowed")}});var P_e=A(()=>{"use strict";var vSt=te(),gSt=Rt(),tV=Lt(),ySt=fi(),_St=O1(),xSt=t_(),wSt=tv(),R_e=Zo(),bSt=Vr(),SSt=wSt(function(r){var e=this;return new r(function(t,n){var i=function(a){e.done=!0,n(a)},o=function(){try{r.resolve(tV(gSt(e.next,e.iterator))).then(function(a){try{tV(a).done?(e.done=!0,t(R_e(void 0,!0))):e.remaining?(e.remaining--,o()):t(R_e(a.value,!1))}catch(c){i(c)}},i)}catch(a){i(a)}};o()})});vSt({target:"AsyncIterator",proto:!0,real:!0,forced:bSt},{drop:function(e){tV(this);var t=xSt(_St(+e));return new SSt(ySt(this),{remaining:t})}})});var O_e=A(()=>{"use strict";var ESt=te(),ISt=ev().every;ESt({target:"AsyncIterator",proto:!0,real:!0},{every:function(e){return ISt(this,e)}})});var D_e=A(()=>{"use strict";var TSt=te(),ASt=Rt(),CSt=xr(),rV=Lt(),MSt=Ir(),RSt=fi(),PSt=tv(),L_e=Zo(),OSt=u_(),LSt=Vr(),DSt=PSt(function(r){var e=this,t=e.iterator,n=e.predicate;return new r(function(i,o){var a=function(d){e.done=!0,o(d)},c=function(d){OSt(t,a,d,a)},h=function(){try{r.resolve(rV(ASt(e.next,t))).then(function(d){try{if(rV(d).done)e.done=!0,i(L_e(void 0,!0));else{var v=d.value;try{var x=n(v,e.counter++),S=function(T){T?i(L_e(v,!1)):h()};MSt(x)?r.resolve(x).then(S,c):S(x)}catch(T){c(T)}}}catch(T){a(T)}},a)}catch(d){a(d)}};h()})});TSt({target:"AsyncIterator",proto:!0,real:!0,forced:LSt},{filter:function(e){return rV(this),CSt(e),new DSt(RSt(this),{predicate:e})}})});var N_e=A(()=>{"use strict";var NSt=te(),kSt=ev().find;NSt({target:"AsyncIterator",proto:!0,real:!0},{find:function(e){return kSt(this,e)}})});var nV=A((Cyr,j_e)=>{"use strict";var qSt=Rt(),jSt=Er(),k_e=Lt(),q_e=fi(),FSt=Nf(),zSt=zi(),BSt=hr(),USt=C1(),VSt=BSt("asyncIterator");j_e.exports=function(e){var t=k_e(e),n=!0,i=zSt(t,VSt),o;return jSt(i)||(i=FSt(t),n=!1),i!==void 0?o=qSt(i,t):(o=t,n=!0),k_e(o),q_e(n?o:new USt(q_e(o)))}});var B_e=A(()=>{"use strict";var GSt=te(),F_e=Rt(),$St=xr(),L1=Lt(),HSt=Ir(),WSt=fi(),ZSt=tv(),z_e=Zo(),YSt=nV(),KSt=u_(),XSt=Vr(),JSt=ZSt(function(r){var e=this,t=e.iterator,n=e.mapper;return new r(function(i,o){var a=function(v){e.done=!0,o(v)},c=function(v){KSt(t,a,v,a)},h=function(){try{r.resolve(L1(F_e(e.next,t))).then(function(v){try{if(L1(v).done)e.done=!0,i(z_e(void 0,!0));else{var x=v.value;try{var S=n(x,e.counter++),T=function(L){try{e.inner=YSt(L),d()}catch(k){c(k)}};HSt(S)?r.resolve(S).then(T,c):T(S)}catch(L){c(L)}}}catch(L){a(L)}},a)}catch(v){a(v)}},d=function(){var v=e.inner;if(v)try{r.resolve(L1(F_e(v.next,v.iterator))).then(function(x){try{L1(x).done?(e.inner=null,h()):i(z_e(x.value,!1))}catch(S){c(S)}},c)}catch(x){c(x)}else h()};d()})});GSt({target:"AsyncIterator",proto:!0,real:!0,forced:XSt},{flatMap:function(e){return L1(this),$St(e),new JSt(WSt(this),{mapper:e,inner:null})}})});var U_e=A(()=>{"use strict";var QSt=te(),eEt=ev().forEach;QSt({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(e){return eEt(this,e)}})});var iV=A((Lyr,V_e)=>{"use strict";var tEt=Rt(),rEt=tv();V_e.exports=rEt(function(){return tEt(this.next,this.iterator)},!0)});var G_e=A(()=>{"use strict";var nEt=te(),iEt=Gr(),oEt=_a(),aEt=nV(),sEt=l_(),lEt=iV(),uEt=Vr();nEt({target:"AsyncIterator",stat:!0,forced:uEt},{from:function(e){var t=aEt(typeof e=="string"?iEt(e):e);return oEt(sEt,t.iterator)?t.iterator:new lEt(t)}})});var $_e=A(()=>{"use strict";var cEt=te(),fEt=eV();cEt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:fEt})});var H_e=A(()=>{"use strict";var hEt=te(),pEt=Q3(),dEt=Vr();hEt({target:"AsyncIterator",proto:!0,real:!0,forced:dEt},{map:pEt})});var W_e=A(()=>{"use strict";var mEt=te(),vEt=Rt(),gEt=xr(),oV=Lt(),yEt=Ir(),_Et=_r(),xEt=fi(),wEt=u_(),aV=_Et("Promise"),bEt=TypeError;mEt({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(e){oV(this),gEt(e);var t=xEt(this),n=t.iterator,i=t.next,o=arguments.length<2,a=o?void 0:arguments[1],c=0;return new aV(function(h,d){var v=function(S){wEt(n,d,S,d)},x=function(){try{aV.resolve(oV(vEt(i,n))).then(function(S){try{if(oV(S).done)o?d(new bEt("Reduce of empty iterator with no initial value")):h(a);else{var T=S.value;if(o)o=!1,a=T,x();else try{var L=e(a,T,c),k=function(R){a=R,x()};yEt(L)?aV.resolve(L).then(k,v):k(L)}catch(R){v(R)}}c++}catch(R){d(R)}},d)}catch(S){d(S)}};x()})}})});var Z_e=A(()=>{"use strict";var SEt=te(),EEt=ev().some;SEt({target:"AsyncIterator",proto:!0,real:!0},{some:function(e){return EEt(this,e)}})});var X_e=A(()=>{"use strict";var IEt=te(),Y_e=Rt(),K_e=Lt(),TEt=fi(),AEt=O1(),CEt=t_(),MEt=tv(),sV=Zo(),REt=Vr(),PEt=MEt(function(r){var e=this,t=e.iterator,n;if(!e.remaining--){var i=sV(void 0,!0);return e.done=!0,n=t.return,n!==void 0?r.resolve(Y_e(n,t,void 0)).then(function(){return i}):i}return r.resolve(Y_e(e.next,t)).then(function(o){return K_e(o).done?(e.done=!0,sV(void 0,!0)):sV(o.value,!1)}).then(null,function(o){throw e.done=!0,o})});IEt({target:"AsyncIterator",proto:!0,real:!0,forced:REt},{take:function(e){K_e(this);var t=CEt(AEt(+e));return new PEt(TEt(this),{remaining:t})}})});var J_e=A(()=>{"use strict";var OEt=te(),LEt=ev().toArray;OEt({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return LEt(this,void 0,[])}})});var CR=A((Zyr,i0e)=>{"use strict";var e0e=vn(),DEt=qp(),lV=Zo(),NEt=$i(),kEt=Ir(),qEt=ci(),t0e=fr(),D1="Incorrect Iterator.range arguments",cV="NumericRangeIterator",jEt=e0e.set,r0e=e0e.getterFor(cV),Q_e=RangeError,uV=TypeError,n0e=DEt(function(e,t,n,i,o,a){if(typeof e!=i||t!==1/0&&t!==-1/0&&typeof t!=i)throw new uV(D1);if(e===1/0||e===-1/0)throw new Q_e(D1);var c=t>e,h=!1,d;if(n===void 0)d=void 0;else if(kEt(n))d=n.step,h=!!n.inclusive;else if(typeof n==i)d=n;else throw new uV(D1);if(NEt(d)&&(d=c?a:-a),typeof d!=i)throw new uV(D1);if(d===1/0||d===-1/0||d===o&&e!==t)throw new Q_e(D1);var v=e!==e||t!==t||d!==d||t>e!=d>o;jEt(this,{type:cV,start:e,end:t,step:d,inclusive:h,hitsEnd:v,currentCount:o,zero:o}),t0e||(this.start=e,this.end=t,this.step=d,this.inclusive=h)},cV,function(){var e=r0e(this);if(e.hitsEnd)return lV(void 0,!0);var t=e.start,n=e.end,i=e.step,o=t+i*e.currentCount++;o===n&&(e.hitsEnd=!0);var a=e.inclusive,c;return n>t?c=a?o>n:o>=n:c=a?n>o:n>=o,c?(e.hitsEnd=!0,lV(void 0,!0)):lV(o,!1)}),AR=function(r){qEt(n0e.prototype,r,{get:function(){return r0e(this)[r]},set:function(){},configurable:!0,enumerable:!1})};t0e&&(AR("start"),AR("end"),AR("inclusive"),AR("step"));i0e.exports=n0e});var o0e=A(()=>{"use strict";var FEt=te(),zEt=CR();typeof BigInt=="function"&&FEt({target:"BigInt",stat:!0,forced:!0},{range:function(e,t,n){return new zEt(e,t,n,"bigint",BigInt(0),BigInt(1))}})});var fV=A((Xyr,u0e)=>{"use strict";pM();lR();var l0e=_r(),BEt=Bi(),a0e=Ir(),UEt=Object,VEt=TypeError,GEt=l0e("Map"),$Et=l0e("WeakMap"),MR=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=BEt(null)};MR.prototype.get=function(r,e){return this[r]||(this[r]=e())};MR.prototype.next=function(r,e,t){var n=t?this.objectsByIndex[r]||(this.objectsByIndex[r]=new $Et):this.primitives||(this.primitives=new GEt),i=n.get(e);return i||n.set(e,i=new MR),i};var s0e=new MR;u0e.exports=function(){var r=s0e,e=arguments.length,t,n;for(t=0;t<e;t++)a0e(n=arguments[t])&&(r=r.next(t,n,!0));if(this===UEt&&r===s0e)throw new VEt("Composite keys must contain a non-primitive component");for(t=0;t<e;t++)a0e(n=arguments[t])||(r=r.next(t,n,!1));return r}});var f0e=A(()=>{"use strict";var HEt=te(),WEt=xa(),ZEt=fV(),YEt=_r(),c0e=Bi(),KEt=Object,XEt=function(){var r=YEt("Object","freeze");return r?r(c0e(null)):c0e(null)};HEt({global:!0,forced:!0},{compositeKey:function(){return WEt(ZEt,KEt,arguments).get("object",XEt)}})});var p0e=A(()=>{"use strict";var JEt=te(),QEt=fV(),h0e=_r(),eIt=xa();JEt({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?h0e("Symbol").for(arguments[0]):eIt(QEt,null,arguments).get("symbol",h0e("Symbol"))}})});var d0e=A(()=>{"use strict";var tIt=te(),rIt=rt(),nIt=KC().unpack,iIt=rIt(DataView.prototype.getUint16);tIt({target:"DataView",proto:!0},{getFloat16:function(e){var t=iIt(this,e,arguments.length>1?arguments[1]:!1);return nIt([t&255,t>>8&255],10)}})});var m0e=A(()=>{"use strict";var oIt=te(),aIt=rt(),sIt=aIt(DataView.prototype.getUint8);oIt({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(e){return sIt(this,e)}})});var hV=A((a_r,v0e)=>{"use strict";var lIt=f4(),uIt=.0009765625,cIt=65504,fIt=6103515625e-14;v0e.exports=Math.f16round||function(e){return lIt(e,uIt,cIt,fIt)}});var g0e=A(()=>{"use strict";var hIt=te(),pIt=rt(),dIt=ws(),mIt=My(),vIt=KC().pack,gIt=hV(),yIt=TypeError,_It=pIt(DataView.prototype.setUint16);hIt({target:"DataView",proto:!0},{setFloat16:function(e,t){if(dIt(this)!=="DataView")throw new yIt("Incorrect receiver");var n=mIt(e),i=vIt(gIt(t),10,2);return _It(this,n,i[1]<<8|i[0],arguments.length>2?arguments[2]:!1)}})});var y0e=A(()=>{"use strict";var xIt=te(),wIt=rt(),bIt=ws(),SIt=My(),EIt=$U(),IIt=TypeError,TIt=wIt(DataView.prototype.setUint8);xIt({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(e,t){if(bIt(this)!=="DataView")throw new IIt("Incorrect receiver");var n=SIt(e);return TIt(this,n,EIt(t))}})});var S0e=A(()=>{"use strict";var AIt=te(),PR=fr(),CIt=_r(),_0e=xr(),MIt=wa(),x0e=En(),RIt=Ul(),PIt=ci(),w0e=hr(),b0e=vn(),pV=H3(),OIt=CIt("SuppressedError"),LIt=ReferenceError,DIt=w0e("dispose"),NIt=w0e("toStringTag"),LR="DisposableStack",kIt=b0e.set,OR=b0e.getterFor(LR),dV="sync-dispose",N1="disposed",qIt="pending",RR=function(r){var e=OR(r);if(e.state===N1)throw new LIt(LR+" already disposed");return e},mV=function(){kIt(MIt(this,f_),{type:LR,state:qIt,stack:[]}),PR||(this.disposed=!1)},f_=mV.prototype;RIt(f_,{dispose:function(){var e=OR(this);if(e.state!==N1){e.state=N1,PR||(this.disposed=!0);for(var t=e.stack,n=t.length,i=!1,o;n;){var a=t[--n];t[n]=null;try{a()}catch(c){i?o=new OIt(c,o):(i=!0,o=c)}}if(e.stack=null,i)throw o}},use:function(e){return pV(RR(this),e,dV),e},adopt:function(e,t){var n=RR(this);return _0e(t),pV(n,void 0,dV,function(){t(e)}),e},defer:function(e){var t=RR(this);_0e(e),pV(t,void 0,dV,e)},move:function(){var e=RR(this),t=new mV;return OR(t).stack=e.stack,e.stack=[],e.state=N1,PR||(this.disposed=!0),t}});PR&&PIt(f_,"disposed",{configurable:!0,get:function(){return OR(this).state===N1}});x0e(f_,DIt,f_.dispose,{name:"dispose"});x0e(f_,NIt,LR,{nonWritable:!0});AIt({global:!0,constructor:!0},{DisposableStack:mV})});var vV=A((p_r,E0e)=>{"use strict";var jIt=rt(),FIt=xr();E0e.exports=function(){return jIt(FIt(this))}});var I0e=A(()=>{"use strict";var zIt=te(),BIt=vV();zIt({target:"Function",proto:!0,forced:!0},{demethodize:BIt})});var A0e=A(()=>{"use strict";var UIt=te(),VIt=rt(),GIt=Er(),$It=Eb(),HIt=qr(),WIt=fr(),ZIt=Object.getOwnPropertyDescriptor,T0e=/^\s*class\b/,YIt=VIt(T0e.exec),KIt=function(r){try{if(!WIt||!YIt(T0e,$It(r)))return!1}catch(t){}var e=ZIt(r,"prototype");return!!e&&HIt(e,"writable")&&!e.writable};UIt({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(e){return GIt(e)&&!KIt(e)}})});var C0e=A(()=>{"use strict";var XIt=te(),JIt=qu();XIt({target:"Function",stat:!0,forced:!0},{isConstructor:JIt})});var P0e=A(()=>{"use strict";var QIt=hr(),eTt=Zn().f,M0e=QIt("metadata"),R0e=Function.prototype;R0e[M0e]===void 0&&eTt(R0e,M0e,{value:null})});var O0e=A(()=>{"use strict";var tTt=te(),rTt=vV();tTt({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:rTt})});var L0e=A(()=>{"use strict";q4()});var j0e=A(()=>{"use strict";var nTt=te(),iTt=Ht(),oTt=wa(),aTt=Er(),sTt=Wi(),N0e=Hi(),lTt=ft(),k0e=qr(),uTt=hr(),$f=zm().IteratorPrototype,cTt=Vr(),D0e=uTt("toStringTag"),fTt=TypeError,gV=iTt.Iterator,q0e=cTt||!aTt(gV)||gV.prototype!==$f||!lTt(function(){gV({})}),yV=function(){if(oTt(this,$f),sTt(this)===$f)throw new fTt("Abstract class Iterator not directly constructable")};k0e($f,D0e)||N0e($f,D0e,"Iterator");(q0e||!k0e($f,"constructor")||$f.constructor===Object)&&N0e($f,"constructor",yV);yV.prototype=$f;nTt({global:!0,constructor:!0,forced:q0e},{Iterator:yV})});var rv=A((C_r,G0e)=>{"use strict";var hTt=Rt(),pTt=Bi(),dTt=Hi(),mTt=Ul(),vTt=hr(),F0e=vn(),gTt=zi(),yTt=zm().IteratorPrototype,_V=Zo(),xV=kf(),_Tt=vTt("toStringTag"),z0e="IteratorHelper",B0e="WrapForValidIterator",xTt=F0e.set,U0e=function(r){var e=F0e.getterFor(r?B0e:z0e);return mTt(pTt(yTt),{next:function(){var n=e(this);if(r)return n.nextHandler();try{var i=n.done?void 0:n.nextHandler();return _V(i,n.done)}catch(o){throw n.done=!0,o}},return:function(){var t=e(this),n=t.iterator;if(t.done=!0,r){var i=gTt(n,"return");return i?hTt(i,n):_V(void 0,!0)}if(t.inner)try{xV(t.inner.iterator,"normal")}catch(o){return xV(n,"throw",o)}return xV(n,"normal"),_V(void 0,!0)}})},wTt=U0e(!0),V0e=U0e(!1);dTt(V0e,_Tt,"Iterator Helper");G0e.exports=function(r,e){var t=function(i,o){o?(o.iterator=i.iterator,o.next=i.next):o=i,o.type=e?B0e:z0e,o.nextHandler=r,o.counter=0,o.done=!1,xTt(this,o)};return t.prototype=e?wTt:V0e,t}});var wV=A((M_r,H0e)=>{"use strict";var bTt=Rt(),STt=xr(),$0e=Lt(),ETt=fi(),ITt=rv(),TTt=FC(),ATt=ITt(function(){var r=this.iterator,e=$0e(bTt(this.next,r)),t=this.done=!!e.done;if(!t)return TTt(r,this.mapper,[e.value,this.counter++],!0)});H0e.exports=function(e){return $0e(this),STt(e),new ATt(ETt(this),{mapper:e})}});var bV=A((R_r,W0e)=>{"use strict";var CTt=Rt(),MTt=wV(),RTt=function(r,e){return[e,r]};W0e.exports=function(){return CTt(MTt,this,RTt)}});var Z0e=A(()=>{"use strict";var PTt=te(),OTt=bV();PTt({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:OTt})});var X0e=A(()=>{"use strict";var LTt=Rt(),DTt=En(),NTt=zi(),kTt=qr(),qTt=hr(),Y0e=zm().IteratorPrototype,K0e=qTt("dispose");kTt(Y0e,K0e)||DTt(Y0e,K0e,function(){var r=NTt(this,"return");r&&LTt(r,this)})});var Q0e=A(()=>{"use strict";var jTt=te(),J0e=Rt(),SV=Lt(),FTt=fi(),zTt=O1(),BTt=t_(),UTt=rv(),VTt=Vr(),GTt=UTt(function(){for(var r=this.iterator,e=this.next,t,n;this.remaining;)if(this.remaining--,t=SV(J0e(e,r)),n=this.done=!!t.done,n)return;if(t=SV(J0e(e,r)),n=this.done=!!t.done,!n)return t.value});jTt({target:"Iterator",proto:!0,real:!0,forced:VTt},{drop:function(e){SV(this);var t=BTt(zTt(+e));return new GTt(FTt(this),{remaining:t})}})});var exe=A(()=>{"use strict";var $Tt=te(),HTt=Pi(),WTt=xr(),ZTt=Lt(),YTt=fi();$Tt({target:"Iterator",proto:!0,real:!0},{every:function(e){ZTt(this),WTt(e);var t=YTt(this),n=0;return!HTt(t,function(i,o){if(!e(i,n++))return o()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var rxe=A(()=>{"use strict";var KTt=te(),XTt=Rt(),JTt=xr(),txe=Lt(),QTt=fi(),eAt=rv(),tAt=FC(),rAt=Vr(),nAt=eAt(function(){for(var r=this.iterator,e=this.predicate,t=this.next,n,i,o;;){if(n=txe(XTt(t,r)),i=this.done=!!n.done,i)return;if(o=n.value,tAt(r,e,[o,this.counter++],!0))return o}});KTt({target:"Iterator",proto:!0,real:!0,forced:rAt},{filter:function(e){return txe(this),JTt(e),new nAt(QTt(this),{predicate:e})}})});var nxe=A(()=>{"use strict";var iAt=te(),oAt=Pi(),aAt=xr(),sAt=Lt(),lAt=fi();iAt({target:"Iterator",proto:!0,real:!0},{find:function(e){sAt(this),aAt(e);var t=lAt(this),n=0;return oAt(t,function(i,o){if(e(i,n++))return o(i)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var EV=A((V_r,oxe)=>{"use strict";var uAt=Rt(),ixe=Lt(),cAt=fi(),fAt=Nf();oxe.exports=function(r,e){(!e||typeof r!="string")&&ixe(r);var t=fAt(r);return cAt(ixe(t!==void 0?uAt(t,r):r))}});var lxe=A(()=>{"use strict";var hAt=te(),axe=Rt(),pAt=xr(),IV=Lt(),dAt=fi(),mAt=EV(),vAt=rv(),sxe=kf(),gAt=Vr(),yAt=vAt(function(){for(var r=this.iterator,e=this.mapper,t,n;;){if(n=this.inner)try{if(t=IV(axe(n.next,n.iterator)),!t.done)return t.value;this.inner=null}catch(i){sxe(r,"throw",i)}if(t=IV(axe(this.next,r)),this.done=!!t.done)return;try{this.inner=mAt(e(t.value,this.counter++),!1)}catch(i){sxe(r,"throw",i)}}});hAt({target:"Iterator",proto:!0,real:!0,forced:gAt},{flatMap:function(e){return IV(this),pAt(e),new yAt(dAt(this),{mapper:e,inner:null})}})});var uxe=A(()=>{"use strict";var _At=te(),xAt=Pi(),wAt=xr(),bAt=Lt(),SAt=fi();_At({target:"Iterator",proto:!0,real:!0},{forEach:function(e){bAt(this),wAt(e);var t=SAt(this),n=0;xAt(t,function(i){e(i,n++)},{IS_RECORD:!0})}})});var cxe=A(()=>{"use strict";var EAt=te(),IAt=Rt(),TAt=Gr(),AAt=_a(),CAt=zm().IteratorPrototype,MAt=rv(),RAt=EV(),PAt=Vr(),OAt=MAt(function(){return IAt(this.next,this.iterator)},!0);EAt({target:"Iterator",stat:!0,forced:PAt},{from:function(e){var t=RAt(typeof e=="string"?TAt(e):e,!0);return AAt(CAt,t.iterator)?t.iterator:new OAt(t)}})});var fxe=A(()=>{"use strict";var LAt=te(),DAt=bV();LAt({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:DAt})});var hxe=A(()=>{"use strict";var NAt=te(),kAt=wV(),qAt=Vr();NAt({target:"Iterator",proto:!0,real:!0,forced:qAt},{map:kAt})});var dxe=A(()=>{"use strict";var jAt=te(),pxe=CR(),FAt=TypeError;jAt({target:"Iterator",stat:!0,forced:!0},{range:function(e,t,n){if(typeof e=="number")return new pxe(e,t,n,"number",0,1);if(typeof e=="bigint")return new pxe(e,t,n,"bigint",BigInt(0),BigInt(1));throw new FAt("Incorrect Iterator.range arguments")}})});var mxe=A(()=>{"use strict";var zAt=te(),BAt=Pi(),UAt=xr(),VAt=Lt(),GAt=fi(),$At=TypeError;zAt({target:"Iterator",proto:!0,real:!0},{reduce:function(e){VAt(this),UAt(e);var t=GAt(this),n=arguments.length<2,i=n?void 0:arguments[1],o=0;if(BAt(t,function(a){n?(n=!1,i=a):i=e(i,a,o),o++},{IS_RECORD:!0}),n)throw new $At("Reduce of empty iterator with no initial value");return i}})});var vxe=A(()=>{"use strict";var HAt=te(),WAt=Pi(),ZAt=xr(),YAt=Lt(),KAt=fi();HAt({target:"Iterator",proto:!0,real:!0},{some:function(e){YAt(this),ZAt(e);var t=KAt(this),n=0;return WAt(t,function(i,o){if(e(i,n++))return o()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var yxe=A(()=>{"use strict";var XAt=te(),JAt=Rt(),gxe=Lt(),QAt=fi(),eCt=O1(),tCt=t_(),rCt=rv(),nCt=kf(),iCt=Vr(),oCt=rCt(function(){var r=this.iterator;if(!this.remaining--)return this.done=!0,nCt(r,"normal",void 0);var e=gxe(JAt(this.next,r)),t=this.done=!!e.done;if(!t)return e.value});XAt({target:"Iterator",proto:!0,real:!0,forced:iCt},{take:function(e){gxe(this);var t=tCt(eCt(+e));return new oCt(QAt(this),{remaining:t})}})});var _xe=A(()=>{"use strict";var aCt=te(),sCt=Lt(),lCt=Pi(),uCt=fi(),cCt=[].push;aCt({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return lCt(uCt(sCt(this)),cCt,{that:e,IS_RECORD:!0}),e}})});var wxe=A(()=>{"use strict";var fCt=te(),hCt=Lt(),pCt=C1(),dCt=iV(),xxe=fi(),mCt=Vr();fCt({target:"Iterator",proto:!0,real:!0,forced:mCt},{toAsync:function(){return new dCt(xxe(new pCt(xxe(hCt(this)))))}})});var TV=A((h0r,bxe)=>{"use strict";var vCt=ft();bxe.exports=!vCt(function(){var r="9007199254740993",e=JSON.rawJSON(r);return!JSON.isRawJSON(e)||JSON.stringify(e)!==r})});var AV=A((p0r,Sxe)=>{"use strict";var gCt=Ir(),yCt=vn().get;Sxe.exports=function(e){if(!gCt(e))return!1;var t=yCt(e);return!!t&&t.type==="RawJSON"}});var Exe=A(()=>{"use strict";var _Ct=te(),xCt=TV(),wCt=AV();_Ct({target:"JSON",stat:!0,forced:!xCt},{isRawJSON:wCt})});var MV=A((v0r,Cxe)=>{"use strict";var CV=rt(),bCt=qr(),DR=SyntaxError,SCt=parseInt,ECt=String.fromCharCode,ICt=CV("".charAt),Ixe=CV("".slice),Txe=CV(/./.exec),Axe={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},TCt=/^[\da-f]{4}$/i,ACt=/^[\u0000-\u001F]$/;Cxe.exports=function(r,e){for(var t=!0,n="";e<r.length;){var i=ICt(r,e);if(i==="\\"){var o=Ixe(r,e,e+2);if(bCt(Axe,o))n+=Axe[o],e+=2;else if(o==="\\u"){e+=2;var a=Ixe(r,e,e+4);if(!Txe(TCt,a))throw new DR("Bad Unicode escape at: "+e);n+=ECt(SCt(a,16)),e+=4}else throw new DR("Unknown escape sequence: \""+o+"\"")}else if(i==="\""){t=!1,e++;break}else{if(Txe(ACt,i))throw new DR("Bad control character in string literal at: "+e);n+=i,e++}}if(t)throw new DR("Unterminated string at: "+e);return{value:n,end:e}}});var kxe=A(()=>{"use strict";var CCt=te(),MCt=fr(),qV=Ht(),RCt=_r(),NR=rt(),PCt=Rt(),Dxe=Er(),OCt=Ir(),LCt=ku(),DCt=qr(),NCt=wr(),Mxe=Zr(),DV=jl(),Nxe=ft(),kCt=MV(),qCt=Rp(),Rxe=qV.JSON,jCt=qV.Number,h_=qV.SyntaxError,jV=Rxe&&Rxe.parse,FCt=RCt("Object","keys"),zCt=Object.getOwnPropertyDescriptor,Yo=NR("".charAt),RV=NR("".slice),PV=NR(/./.exec),Pxe=NR([].push),OV=/^\d$/,BCt=/^[1-9]$/,UCt=/^(?:-|\d)$/,k1=/^[\t\n\r ]$/,LV=0,Oxe=1,VCt=function(r,e){r=NCt(r);var t=new kV(r,0,""),n=t.parse(),i=n.value,o=t.skip(k1,n.end);if(o<r.length)throw new h_("Unexpected extra character: \""+Yo(r,o)+"\" after the parsed data at: "+o);return Dxe(e)?NV({"":i},"",e,n):i},NV=function(r,e,t,n){var i=r[e],o=n&&i===n.value,a=o&&typeof n.source=="string"?{source:n.source}:{},c,h,d,v,x;if(OCt(i)){var S=LCt(i),T=o?n.nodes:S?[]:{};if(S)for(c=T.length,d=Mxe(i),v=0;v<d;v++)Lxe(i,v,NV(i,""+v,t,v<c?T[v]:void 0));else for(h=FCt(i),d=Mxe(h),v=0;v<d;v++)x=h[v],Lxe(i,x,NV(i,x,t,DCt(T,x)?T[x]:void 0))}return PCt(t,r,e,i,a)},Lxe=function(r,e,t){if(MCt){var n=zCt(r,e);if(n&&!n.configurable)return}t===void 0?delete r[e]:DV(r,e,t)},GCt=function(r,e,t,n){this.value=r,this.end=e,this.source=t,this.nodes=n},kV=function(r,e){this.source=r,this.index=e};kV.prototype={fork:function(r){return new kV(this.source,r)},parse:function(){var r=this.source,e=this.skip(k1,this.index),t=this.fork(e),n=Yo(r,e);if(PV(UCt,n))return t.number();switch(n){case"{":return t.object();case"[":return t.array();case"\"":return t.string();case"t":return t.keyword(!0);case"f":return t.keyword(!1);case"n":return t.keyword(null);}throw new h_("Unexpected character: \""+n+"\" at: "+e)},node:function(r,e,t,n,i){return new GCt(e,n,r?null:RV(this.source,t,n),i)},object:function(){for(var r=this.source,e=this.index+1,t=!1,n={},i={};e<r.length;){if(e=this.until(["\"","}"],e),Yo(r,e)==="}"&&!t){e++;break}var o=this.fork(e).string(),a=o.value;e=o.end,e=this.until([":"],e)+1,e=this.skip(k1,e),o=this.fork(e).parse(),DV(i,a,o),DV(n,a,o.value),e=this.until([",","}"],o.end);var c=Yo(r,e);if(c===",")t=!0,e++;else if(c==="}"){e++;break}}return this.node(Oxe,n,this.index,e,i)},array:function(){for(var r=this.source,e=this.index+1,t=!1,n=[],i=[];e<r.length;){if(e=this.skip(k1,e),Yo(r,e)==="]"&&!t){e++;break}var o=this.fork(e).parse();if(Pxe(i,o),Pxe(n,o.value),e=this.until([",","]"],o.end),Yo(r,e)===",")t=!0,e++;else if(Yo(r,e)==="]"){e++;break}}return this.node(Oxe,n,this.index,e,i)},string:function(){var r=this.index,e=kCt(this.source,this.index+1);return this.node(LV,e.value,r,e.end)},number:function(){var r=this.source,e=this.index,t=e;if(Yo(r,t)==="-"&&t++,Yo(r,t)==="0")t++;else if(PV(BCt,Yo(r,t)))t=this.skip(OV,++t);else throw new h_("Failed to parse number at: "+t);if(Yo(r,t)==="."&&(t=this.skip(OV,++t)),Yo(r,t)==="e"||Yo(r,t)==="E"){t++,(Yo(r,t)==="+"||Yo(r,t)==="-")&&t++;var n=t;if(t=this.skip(OV,t),n===t)throw new h_("Failed to parse number's exponent value at: "+t)}return this.node(LV,jCt(RV(r,e,t)),e,t)},keyword:function(r){var e=""+r,t=this.index,n=t+e.length;if(RV(this.source,t,n)!==e)throw new h_("Failed to parse value at: "+t);return this.node(LV,r,t,n)},skip:function(r,e){for(var t=this.source;e<t.length&&PV(r,Yo(t,e));e++);return e},until:function(r,e){e=this.skip(k1,e);for(var t=Yo(this.source,e),n=0;n<r.length;n++)if(r[n]===t)return e;throw new h_("Unexpected character: \""+t+"\" at: "+e)}};var $Ct=Nxe(function(){var r="9007199254740993",e;return jV(r,function(t,n,i){e=i.source}),e!==r}),HCt=qCt&&!Nxe(function(){return 1/jV("-0 \t")!==-1/0});CCt({target:"JSON",stat:!0,forced:$Ct},{parse:function(e,t){return HCt&&!Dxe(t)?jV(e):VCt(e,t)}})});var $xe=A(()=>{"use strict";var Vxe=te(),WCt=Uf(),Gxe=TV(),kR=_r(),ZCt=Rt(),qR=rt(),YCt=Er(),KCt=AV(),XCt=wr(),JCt=jl(),QCt=MV(),eMt=dz(),tMt=Op(),rMt=vn().set,nMt=String,qxe=SyntaxError,iMt=kR("JSON","parse"),jxe=kR("JSON","stringify"),oMt=kR("Object","create"),aMt=kR("Object","freeze"),zV=qR("".charAt),FV=qR("".slice),Fxe=qR(/./.exec),sMt=qR([].push),BV=tMt(),zxe=BV.length,Bxe="Unacceptable as raw JSON",Uxe=/^[\t\n\r ]$/;Vxe({target:"JSON",stat:!0,forced:!Gxe},{rawJSON:function(e){var t=XCt(e);if(t===""||Fxe(Uxe,zV(t,0))||Fxe(Uxe,zV(t,t.length-1)))throw new qxe(Bxe);var n=iMt(t);if(typeof n=="object"&&n!==null)throw new qxe(Bxe);var i=oMt(null);return rMt(i,{type:"RawJSON"}),JCt(i,"rawJSON",t),WCt?aMt(i):i}});jxe&&Vxe({target:"JSON",stat:!0,arity:3,forced:!Gxe},{stringify:function(e,t,n){var i=eMt(t),o=[],a=jxe(e,function(T,L){var k=YCt(i)?ZCt(i,this,nMt(T),L):L;return KCt(k)?BV+(sMt(o,k.rawJSON)-1):k},n);if(typeof a!="string")return a;for(var c="",h=a.length,d=0;d<h;d++){var v=zV(a,d);if(v==="\""){var x=QCt(a,++d).end-1,S=FV(a,d,x);c+=FV(S,0,zxe)===BV?o[FV(S,zxe)]:"\""+S+"\"",d=x}else c+=v}return c}})});var Za=A((w0r,Hxe)=>{"use strict";var lMt=Wa().has;Hxe.exports=function(r){return lMt(r),r}});var Wxe=A(()=>{"use strict";var uMt=te(),cMt=Za(),fMt=Wa().remove;uMt({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=cMt(this),t=!0,n,i=0,o=arguments.length;i<o;i++)n=fMt(e,arguments[i]),t=t&&n;return!!t}})});var Yxe=A(()=>{"use strict";var hMt=te(),pMt=Za(),UV=Wa(),dMt=UV.get,mMt=UV.has,Zxe=UV.set;hMt({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(e,t){var n=pMt(this),i,o;return mMt(n,e)?(i=dMt(n,e),"update"in t&&(i=t.update(i,e,n),Zxe(n,e,i)),i):(o=t.insert(e,n),Zxe(n,e,o),o)}})});var Kxe=A(()=>{"use strict";var vMt=te(),gMt=kn(),yMt=Za(),_Mt=$l();vMt({target:"Map",proto:!0,real:!0,forced:!0},{every:function(e){var t=yMt(this),n=gMt(e,arguments.length>1?arguments[1]:void 0);return _Mt(t,function(i,o){if(!n(i,o,t))return!1},!0)!==!1}})});var Jxe=A(()=>{"use strict";var xMt=te(),wMt=kn(),bMt=Za(),Xxe=Wa(),SMt=$l(),EMt=Xxe.Map,IMt=Xxe.set;xMt({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(e){var t=bMt(this),n=wMt(e,arguments.length>1?arguments[1]:void 0),i=new EMt;return SMt(t,function(o,a){n(o,a,t)&&IMt(i,a,o)}),i}})});var Qxe=A(()=>{"use strict";var TMt=te(),AMt=kn(),CMt=Za(),MMt=$l();TMt({target:"Map",proto:!0,real:!0,forced:!0},{find:function(e){var t=CMt(this),n=AMt(e,arguments.length>1?arguments[1]:void 0),i=MMt(t,function(o,a){if(n(o,a,t))return{value:o}},!0);return i&&i.value}})});var ewe=A(()=>{"use strict";var RMt=te(),PMt=kn(),OMt=Za(),LMt=$l();RMt({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(e){var t=OMt(this),n=PMt(e,arguments.length>1?arguments[1]:void 0),i=LMt(t,function(o,a){if(n(o,a,t))return{key:a}},!0);return i&&i.key}})});var q1=A((D0r,nwe)=>{"use strict";var DMt=kn(),NMt=Rt(),kMt=xr(),qMt=Ny(),jMt=$i(),twe=Pi(),rwe=[].push;nwe.exports=function(e){var t=arguments.length,n=t>1?arguments[1]:void 0,i,o,a,c;return qMt(this),i=n!==void 0,i&&kMt(n),jMt(e)?new this:(o=[],i?(a=0,c=DMt(n,t>2?arguments[2]:void 0),twe(e,function(h){NMt(rwe,o,c(h,a++))})):twe(e,rwe,{that:o}),new this(o))}});var iwe=A(()=>{"use strict";var FMt=te(),zMt=q1();FMt({target:"Map",stat:!0,forced:!0},{from:zMt})});var owe=A(()=>{"use strict";var BMt=te(),UMt=rt(),VMt=xr(),GMt=ti(),$Mt=Pi(),jR=Wa(),HMt=Vr(),WMt=jR.Map,ZMt=jR.has,YMt=jR.get,KMt=jR.set,XMt=UMt([].push);BMt({target:"Map",stat:!0,forced:HMt},{groupBy:function(e,t){GMt(e),VMt(t);var n=new WMt,i=0;return $Mt(e,function(o){var a=t(o,i++);ZMt(n,a)?XMt(YMt(n,a),o):KMt(n,a,[o])}),n}})});var swe=A((F0r,awe)=>{"use strict";awe.exports=function(r,e){return r===e||r!==r&&e!==e}});var lwe=A(()=>{"use strict";var JMt=te(),QMt=swe(),eRt=Za(),tRt=$l();JMt({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(e){return tRt(eRt(this),function(t){if(QMt(t,e))return!0},!0)===!0}})});var cwe=A(()=>{"use strict";var rRt=te(),nRt=Rt(),iRt=Pi(),oRt=Er(),uwe=xr(),aRt=Wa().Map;rRt({target:"Map",stat:!0,forced:!0},{keyBy:function(e,t){var n=oRt(this)?this:aRt,i=new n;uwe(t);var o=uwe(i.set);return iRt(e,function(a){nRt(o,i,t(a),a)}),i}})});var fwe=A(()=>{"use strict";var sRt=te(),lRt=Za(),uRt=$l();sRt({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(e){var t=uRt(lRt(this),function(n,i){if(n===e)return{key:i}},!0);return t&&t.key}})});var pwe=A(()=>{"use strict";var cRt=te(),fRt=kn(),hRt=Za(),hwe=Wa(),pRt=$l(),dRt=hwe.Map,mRt=hwe.set;cRt({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(e){var t=hRt(this),n=fRt(e,arguments.length>1?arguments[1]:void 0),i=new dRt;return pRt(t,function(o,a){mRt(i,n(o,a,t),o)}),i}})});var mwe=A(()=>{"use strict";var vRt=te(),gRt=kn(),yRt=Za(),dwe=Wa(),_Rt=$l(),xRt=dwe.Map,wRt=dwe.set;vRt({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(e){var t=yRt(this),n=gRt(e,arguments.length>1?arguments[1]:void 0),i=new xRt;return _Rt(t,function(o,a){wRt(i,a,n(o,a,t))}),i}})});var vwe=A(()=>{"use strict";var bRt=te(),SRt=Za(),ERt=Pi(),IRt=Wa().set;bRt({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(e){for(var t=SRt(this),n=arguments.length,i=0;i<n;)ERt(arguments[i++],function(o,a){IRt(t,o,a)},{AS_ENTRIES:!0});return t}})});var j1=A((J0r,gwe)=>{"use strict";var TRt=Lf();gwe.exports=function(){return new this(TRt(arguments))}});var ywe=A(()=>{"use strict";var ARt=te(),CRt=j1();ARt({target:"Map",stat:!0,forced:!0},{of:CRt})});var _we=A(()=>{"use strict";var MRt=te(),RRt=xr(),PRt=Za(),ORt=$l(),LRt=TypeError;MRt({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=PRt(this),n=arguments.length<2,i=n?void 0:arguments[1];if(RRt(e),ORt(t,function(o,a){n?(n=!1,i=o):i=e(i,o,a,t)}),n)throw new LRt("Reduce of empty map with no initial value");return i}})});var xwe=A(()=>{"use strict";var DRt=te(),NRt=kn(),kRt=Za(),qRt=$l();DRt({target:"Map",proto:!0,real:!0,forced:!0},{some:function(e){var t=kRt(this),n=NRt(e,arguments.length>1?arguments[1]:void 0);return qRt(t,function(i,o){if(n(i,o,t))return!0},!0)===!0}})});var bwe=A(()=>{"use strict";var jRt=te(),wwe=xr(),FRt=Za(),VV=Wa(),zRt=TypeError,BRt=VV.get,URt=VV.has,VRt=VV.set;jRt({target:"Map",proto:!0,real:!0,forced:!0},{update:function(e,t){var n=FRt(this),i=arguments.length;wwe(t);var o=URt(n,e);if(!o&&i<3)throw new zRt("Updating absent value");var a=o?BRt(n,e):wwe(i>2?arguments[2]:void 0)(e,n);return VRt(n,e,t(a,e,n)),n}})});var BR=A((sxr,Swe)=>{"use strict";var FR=Rt(),GV=xr(),zR=Er(),GRt=Lt(),$Rt=TypeError;Swe.exports=function(e,t){var n=GRt(this),i=GV(n.get),o=GV(n.has),a=GV(n.set),c=arguments.length>2?arguments[2]:void 0,h;if(!zR(t)&&!zR(c))throw new $Rt("At least one callback required");return FR(o,n,e)?(h=FR(i,n,e),zR(t)&&(h=t(h),FR(a,n,e,h))):zR(c)&&(h=c(),FR(a,n,e,h)),h}});var Ewe=A(()=>{"use strict";var HRt=te(),WRt=BR();HRt({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:WRt})});var Iwe=A(()=>{"use strict";var ZRt=te(),YRt=BR();ZRt({target:"Map",proto:!0,real:!0,forced:!0},{upsert:YRt})});var Twe=A(()=>{"use strict";var KRt=te(),XRt=Math.min,JRt=Math.max;KRt({target:"Math",stat:!0,forced:!0},{clamp:function(e,t,n){return XRt(n,JRt(t,e))}})});var Awe=A(()=>{"use strict";var QRt=te();QRt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var Cwe=A(()=>{"use strict";var ePt=te(),tPt=180/Math.PI;ePt({target:"Math",stat:!0,forced:!0},{degrees:function(e){return e*tPt}})});var $V=A((yxr,Mwe)=>{"use strict";Mwe.exports=Math.scale||function(e,t,n,i,o){var a=+e,c=+t,h=+n,d=+i,v=+o;return a!==a||c!==c||h!==h||d!==d||v!==v?NaN:a===1/0||a===-1/0?a:(a-c)*(v-d)/(h-c)+d}});var Rwe=A(()=>{"use strict";var rPt=te(),nPt=$V(),iPt=YC();rPt({target:"Math",stat:!0,forced:!0},{fscale:function(e,t,n,i,o){return iPt(nPt(e,t,n,i,o))}})});var Pwe=A(()=>{"use strict";var oPt=te(),aPt=hV();oPt({target:"Math",stat:!0},{f16round:aPt})});var Owe=A(()=>{"use strict";var sPt=te();sPt({target:"Math",stat:!0,forced:!0},{iaddh:function(e,t,n,i){var o=e>>>0,a=t>>>0,c=n>>>0;return a+(i>>>0)+((o&c|(o|c)&~(o+c>>>0))>>>31)|0}})});var Lwe=A(()=>{"use strict";var lPt=te();lPt({target:"Math",stat:!0,forced:!0},{imulh:function(e,t){var n=65535,i=+e,o=+t,a=i&n,c=o&n,h=i>>16,d=o>>16,v=(h*c>>>0)+(a*c>>>16);return h*d+(v>>16)+((a*d>>>0)+(v&n)>>16)}})});var Dwe=A(()=>{"use strict";var uPt=te();uPt({target:"Math",stat:!0,forced:!0},{isubh:function(e,t,n,i){var o=e>>>0,a=t>>>0,c=n>>>0;return a-(i>>>0)-((~o&c|~(o^c)&o-c>>>0)>>>31)|0}})});var Nwe=A(()=>{"use strict";var cPt=te();cPt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var kwe=A(()=>{"use strict";var fPt=te(),hPt=Math.PI/180;fPt({target:"Math",stat:!0,forced:!0},{radians:function(e){return e*hPt}})});var qwe=A(()=>{"use strict";var pPt=te(),dPt=$V();pPt({target:"Math",stat:!0,forced:!0},{scale:dPt})});var Bwe=A(()=>{"use strict";var mPt=te(),vPt=Lt(),gPt=tB(),yPt=qp(),_Pt=Zo(),jwe=vn(),Fwe="Seeded Random",zwe=Fwe+" Generator",xPt="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",wPt=jwe.set,bPt=jwe.getterFor(zwe),SPt=TypeError,EPt=yPt(function(e){wPt(this,{type:zwe,seed:e%2147483647})},Fwe,function(){var e=bPt(this),t=e.seed=(e.seed*1103515245+12345)%2147483647;return _Pt((t&1073741823)/1073741823,!1)});mPt({target:"Math",stat:!0,forced:!0},{seededPRNG:function(e){var t=vPt(e).seed;if(!gPt(t))throw new SPt(xPt);return new EPt(t)}})});var Uwe=A(()=>{"use strict";var IPt=te();IPt({target:"Math",stat:!0,forced:!0},{signbit:function(e){var t=+e;return t===t&&t===0?1/t===-1/0:t<0}})});var Vwe=A(()=>{"use strict";var TPt=te();TPt({target:"Math",stat:!0,forced:!0},{umulh:function(e,t){var n=65535,i=+e,o=+t,a=i&n,c=o&n,h=i>>>16,d=o>>>16,v=(h*c>>>0)+(a*c>>>16);return h*d+(v>>>16)+((a*d>>>0)+(v&n)>>>16)}})});var $we=A(()=>{"use strict";var APt=te(),VR=rt(),CPt=ri(),MPt=yM(),UR="Invalid number representation",RPt="Invalid radix",PPt=RangeError,HV=SyntaxError,OPt=TypeError,Gwe=/^[\da-z]+$/,LPt=VR("".charAt),DPt=VR(Gwe.exec),NPt=VR(1 .toString),kPt=VR("".slice);APt({target:"Number",stat:!0,forced:!0},{fromString:function(e,t){var n=1,i,o;if(typeof e!="string")throw new OPt(UR);if(!e.length)throw new HV(UR);if(LPt(e,0)==="-"&&(n=-1,e=kPt(e,1),!e.length))throw new HV(UR);if(i=t===void 0?10:CPt(t),i<2||i>36)throw new PPt(RPt);if(!DPt(Gwe,e)||NPt(o=MPt(e,i),i)!==e)throw new HV(UR);return n*o}})});var Hwe=A(()=>{"use strict";var qPt=te(),jPt=CR();qPt({target:"Number",stat:!0,forced:!0},{range:function(e,t,n){return new jPt(e,t,n,"number",0,1)}})});var Wwe=A(()=>{"use strict";hB()});var $R=A((Wxr,Kwe)=>{"use strict";var Zwe=vn(),FPt=qp(),GR=Zo(),zPt=qr(),BPt=Pm(),UPt=Gr(),Ywe="Object Iterator",VPt=Zwe.set,GPt=Zwe.getterFor(Ywe);Kwe.exports=FPt(function(e,t){var n=UPt(e);VPt(this,{type:Ywe,mode:t,object:n,keys:BPt(n),index:0})},"Object",function(){for(var e=GPt(this),t=e.keys;;){if(t===null||e.index>=t.length)return e.object=e.keys=null,GR(void 0,!0);var n=t[e.index++],i=e.object;if(zPt(i,n)){switch(e.mode){case"keys":return GR(n,!1);case"values":return GR(i[n],!1);}return GR([n,i[n]],!1)}}})});var Xwe=A(()=>{"use strict";var $Pt=te(),HPt=$R();$Pt({target:"Object",stat:!0,forced:!0},{iterateEntries:function(e){return new HPt(e,"entries")}})});var Jwe=A(()=>{"use strict";var WPt=te(),ZPt=$R();WPt({target:"Object",stat:!0,forced:!0},{iterateKeys:function(e){return new ZPt(e,"keys")}})});var Qwe=A(()=>{"use strict";var YPt=te(),KPt=$R();YPt({target:"Object",stat:!0,forced:!0},{iterateValues:function(e){return new KPt(e,"values")}})});var ebe=A(()=>{"use strict";var XPt=te(),JPt=_r(),QPt=rt(),eOt=xr(),tOt=ti(),rOt=Du(),nOt=Pi(),iOt=JPt("Object","create"),oOt=QPt([].push);XPt({target:"Object",stat:!0},{groupBy:function(e,t){tOt(e),eOt(t);var n=iOt(null),i=0;return nOt(e,function(o){var a=rOt(t(o,i++));a in n?oOt(n[a],o):n[a]=[o]}),n}})});var cbe=A(()=>{"use strict";var aOt=te(),HR=Rt(),F1=fr(),sOt=Fp(),tbe=xr(),lOt=Lt(),uOt=wa(),rbe=Er(),cOt=$i(),fOt=Ir(),WR=zi(),hOt=En(),WV=Ul(),nbe=ci(),p_=DB(),pOt=hr(),ibe=vn(),dOt=pOt("observable"),ZV="Observable",obe="Subscription",abe="SubscriptionObserver",YV=ibe.getterFor,KV=ibe.set,mOt=YV(ZV),sbe=YV(obe),ZR=YV(abe),lbe=function(r){this.observer=lOt(r),this.cleanup=void 0,this.subscriptionObserver=void 0};lbe.prototype={type:obe,clean:function(){var r=this.cleanup;if(r){this.cleanup=void 0;try{r()}catch(e){p_(e)}}},close:function(){if(!F1){var r=this.facade,e=this.subscriptionObserver;r.closed=!0,e&&(e.closed=!0)}this.observer=void 0},isClosed:function(){return this.observer===void 0}};var XV=function(r,e){var t=KV(this,new lbe(r)),n;F1||(this.closed=!1);try{(n=WR(r,"start"))&&HR(n,r,this)}catch(c){p_(c)}if(!t.isClosed()){var i=t.subscriptionObserver=new JV(t);try{var o=e(i),a=o;cOt(o)||(t.cleanup=rbe(o.unsubscribe)?function(){a.unsubscribe()}:tbe(o))}catch(c){i.error(c);return}t.isClosed()&&t.clean()}};XV.prototype=WV({},{unsubscribe:function(){var e=sbe(this);e.isClosed()||(e.close(),e.clean())}});F1&&nbe(XV.prototype,"closed",{configurable:!0,get:function(){return sbe(this).isClosed()}});var JV=function(r){KV(this,{type:abe,subscriptionState:r}),F1||(this.closed=!1)};JV.prototype=WV({},{next:function(e){var t=ZR(this).subscriptionState;if(!t.isClosed()){var n=t.observer;try{var i=WR(n,"next");i&&HR(i,n,e)}catch(o){p_(o)}}},error:function(e){var t=ZR(this).subscriptionState;if(!t.isClosed()){var n=t.observer;t.close();try{var i=WR(n,"error");i?HR(i,n,e):p_(e)}catch(o){p_(o)}t.clean()}},complete:function(){var e=ZR(this).subscriptionState;if(!e.isClosed()){var t=e.observer;e.close();try{var n=WR(t,"complete");n&&HR(n,t)}catch(i){p_(i)}e.clean()}}});F1&&nbe(JV.prototype,"closed",{configurable:!0,get:function(){return ZR(this).subscriptionState.isClosed()}});var ube=function(e){uOt(this,QV),KV(this,{type:ZV,subscriber:tbe(e)})},QV=ube.prototype;WV(QV,{subscribe:function(e){var t=arguments.length;return new XV(rbe(e)?{next:e,error:t>1?arguments[1]:void 0,complete:t>2?arguments[2]:void 0}:fOt(e)?e:{},mOt(this).subscriber)}});hOt(QV,dOt,function(){return this});aOt({global:!0,constructor:!0,forced:!0},{Observable:ube});sOt(ZV)});var hbe=A(()=>{"use strict";var vOt=te(),gOt=_r(),yOt=Rt(),fbe=Lt(),_Ot=qu(),xOt=Np(),wOt=zi(),bOt=Pi(),SOt=hr(),EOt=SOt("observable");vOt({target:"Observable",stat:!0,forced:!0},{from:function(e){var t=_Ot(this)?this:gOt("Observable"),n=wOt(fbe(e),EOt);if(n){var i=fbe(yOt(n,e));return i.constructor===t?i:new t(function(a){return i.subscribe(a)})}var o=xOt(e);return new t(function(a){bOt(o,function(c,h){if(a.next(c),a.closed)return h()},{IS_ITERATOR:!0,INTERRUPTED:!0}),a.complete()})}})});var dbe=A(()=>{"use strict";var IOt=te(),pbe=_r(),TOt=qu(),AOt=pbe("Array");IOt({target:"Observable",stat:!0,forced:!0},{of:function(){for(var e=TOt(this)?this:pbe("Observable"),t=arguments.length,n=AOt(t),i=0;i<t;)n[i]=arguments[i++];return new e(function(o){for(var a=0;a<t;a++)if(o.next(n[a]),o.closed)return;o.complete()})}})});var mbe=A(()=>{"use strict";cbe();hbe();dbe()});var vbe=A(()=>{"use strict";YB()});var gbe=A(()=>{"use strict";KB()});var ybe=A(()=>{"use strict";var COt=te(),MOt=Ac(),ROt=Hp();COt({target:"Promise",stat:!0,forced:!0},{try:function(r){var e=MOt.f(this),t=ROt(r);return(t.error?e.reject:e.resolve)(t.value),e.promise}})});var _be=A(()=>{"use strict";var POt=te(),OOt=Ac();POt({target:"Promise",stat:!0},{withResolvers:function(){var e=OOt.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}})});var Pc=A((ywr,Sbe)=>{"use strict";pM();lR();var bbe=_r(),LOt=rt(),DOt=wc(),xbe=bbe("Map"),NOt=bbe("WeakMap"),kOt=LOt([].push),wbe=DOt("metadata"),e5=wbe.store||(wbe.store=new NOt),z1=function(r,e,t){var n=e5.get(r);if(!n){if(!t)return;e5.set(r,n=new xbe)}var i=n.get(e);if(!i){if(!t)return;n.set(e,i=new xbe)}return i},qOt=function(r,e,t){var n=z1(e,t,!1);return n===void 0?!1:n.has(r)},jOt=function(r,e,t){var n=z1(e,t,!1);return n===void 0?void 0:n.get(r)},FOt=function(r,e,t,n){z1(t,n,!0).set(r,e)},zOt=function(r,e){var t=z1(r,e,!1),n=[];return t&&t.forEach(function(i,o){kOt(n,o)}),n},BOt=function(r){return r===void 0||typeof r=="symbol"?r:String(r)};Sbe.exports={store:e5,getMap:z1,has:qOt,get:jOt,set:FOt,keys:zOt,toKey:BOt}});var Ibe=A(()=>{"use strict";var UOt=te(),Ebe=Pc(),VOt=Lt(),GOt=Ebe.toKey,$Ot=Ebe.set;UOt({target:"Reflect",stat:!0},{defineMetadata:function(e,t,n){var i=arguments.length<4?void 0:GOt(arguments[3]);$Ot(e,t,VOt(n),i)}})});var Abe=A(()=>{"use strict";var HOt=te(),t5=Pc(),WOt=Lt(),ZOt=t5.toKey,YOt=t5.getMap,Tbe=t5.store;HOt({target:"Reflect",stat:!0},{deleteMetadata:function(e,t){var n=arguments.length<3?void 0:ZOt(arguments[2]),i=YOt(WOt(t),n,!1);if(i===void 0||!i.delete(e))return!1;if(i.size)return!0;var o=Tbe.get(t);return o.delete(n),!!o.size||Tbe.delete(t)}})});var Mbe=A(()=>{"use strict";var KOt=te(),r5=Pc(),XOt=Lt(),JOt=Wi(),QOt=r5.has,eLt=r5.get,tLt=r5.toKey,Cbe=function(r,e,t){var n=QOt(r,e,t);if(n)return eLt(r,e,t);var i=JOt(e);return i!==null?Cbe(r,i,t):void 0};KOt({target:"Reflect",stat:!0},{getMetadata:function(e,t){var n=arguments.length<3?void 0:tLt(arguments[2]);return Cbe(e,XOt(t),n)}})});var Lbe=A(()=>{"use strict";var rLt=te(),Rbe=rt(),Pbe=Pc(),nLt=Lt(),iLt=Wi(),oLt=vR(),aLt=Rbe(oLt),sLt=Rbe([].concat),lLt=Pbe.keys,uLt=Pbe.toKey,Obe=function(r,e){var t=lLt(r,e),n=iLt(r);if(n===null)return t;var i=Obe(n,e);return i.length?t.length?aLt(sLt(t,i)):i:t};rLt({target:"Reflect",stat:!0},{getMetadataKeys:function(e){var t=arguments.length<2?void 0:uLt(arguments[1]);return Obe(nLt(e),t)}})});var Nbe=A(()=>{"use strict";var cLt=te(),Dbe=Pc(),fLt=Lt(),hLt=Dbe.get,pLt=Dbe.toKey;cLt({target:"Reflect",stat:!0},{getOwnMetadata:function(e,t){var n=arguments.length<3?void 0:pLt(arguments[2]);return hLt(e,fLt(t),n)}})});var qbe=A(()=>{"use strict";var dLt=te(),kbe=Pc(),mLt=Lt(),vLt=kbe.keys,gLt=kbe.toKey;dLt({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(e){var t=arguments.length<2?void 0:gLt(arguments[1]);return vLt(mLt(e),t)}})});var zbe=A(()=>{"use strict";var yLt=te(),jbe=Pc(),_Lt=Lt(),xLt=Wi(),wLt=jbe.has,bLt=jbe.toKey,Fbe=function(r,e,t){var n=wLt(r,e,t);if(n)return!0;var i=xLt(e);return i!==null?Fbe(r,i,t):!1};yLt({target:"Reflect",stat:!0},{hasMetadata:function(e,t){var n=arguments.length<3?void 0:bLt(arguments[2]);return Fbe(e,_Lt(t),n)}})});var Ube=A(()=>{"use strict";var SLt=te(),Bbe=Pc(),ELt=Lt(),ILt=Bbe.has,TLt=Bbe.toKey;SLt({target:"Reflect",stat:!0},{hasOwnMetadata:function(e,t){var n=arguments.length<3?void 0:TLt(arguments[2]);return ILt(e,ELt(t),n)}})});var Gbe=A(()=>{"use strict";var ALt=te(),Vbe=Pc(),CLt=Lt(),MLt=Vbe.toKey,RLt=Vbe.set;ALt({target:"Reflect",stat:!0},{metadata:function(e,t){return function(i,o){RLt(e,t,CLt(i),MLt(o))}}})});var Hbe=A(()=>{"use strict";var PLt=te(),$be=rt(),OLt=wr(),LLt=$m(),DLt=$be("".charCodeAt),NLt=$be("".replace),kLt=RegExp("[!\"#$%&'()*+,\\-./:;<=>?@[\\\\\\]^`{|}~"+LLt+"]","g");PLt({target:"RegExp",stat:!0,forced:!0},{escape:function(e){var t=OLt(e),n=DLt(t,0);return(n>47&&n<58?"\\x3":"")+NLt(t,kLt,"\\$&")}})});var ba=A((Fwr,Wbe)=>{"use strict";var n5=rt(),YR=Set.prototype;Wbe.exports={Set,add:n5(YR.add),has:n5(YR.has),remove:n5(YR.delete),proto:YR}});var Ko=A((zwr,Zbe)=>{"use strict";var qLt=ba().has;Zbe.exports=function(r){return qLt(r),r}});var Ybe=A(()=>{"use strict";var jLt=te(),FLt=Ko(),zLt=ba().add;jLt({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=FLt(this),t=0,n=arguments.length;t<n;t++)zLt(e,arguments[t]);return e}})});var Kbe=A(()=>{"use strict";var BLt=te(),ULt=Ko(),VLt=ba().remove;BLt({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=ULt(this),t=!0,n,i=0,o=arguments.length;i<o;i++)n=VLt(e,arguments[i]),t=t&&n;return!!t}})});var ll=A(($wr,t1e)=>{"use strict";var Xbe=rt(),GLt=Gf(),Jbe=ba(),$Lt=Jbe.Set,Qbe=Jbe.proto,HLt=Xbe(Qbe.forEach),e1e=Xbe(Qbe.keys),WLt=e1e(new $Lt).next;t1e.exports=function(r,e,t){return t?GLt({iterator:e1e(r),next:WLt},e):HLt(r,e)}});var KR=A((Hwr,n1e)=>{"use strict";var r1e=ba(),ZLt=ll(),YLt=r1e.Set,KLt=r1e.add;n1e.exports=function(r){var e=new YLt;return ZLt(r,function(t){KLt(e,t)}),e}});var d_=A((Wwr,i1e)=>{"use strict";var XLt=qb(),JLt=ba();i1e.exports=XLt(JLt.proto,"size","get")||function(r){return r.size}});var Xp=A((Zwr,c1e)=>{"use strict";var o1e=xr(),l1e=Lt(),a1e=Rt(),QLt=ri(),eDt=fi(),s1e="Invalid size",tDt=RangeError,rDt=TypeError,nDt=Math.max,u1e=function(r,e,t,n){this.set=r,this.size=e,this.has=t,this.keys=n};u1e.prototype={getIterator:function(){return eDt(l1e(a1e(this.keys,this.set)))},includes:function(r){return a1e(this.has,this.set,r)}};c1e.exports=function(r){l1e(r);var e=+r.size;if(e!==e)throw new rDt(s1e);var t=QLt(e);if(t<0)throw new tDt(s1e);return new u1e(r,nDt(t,0),o1e(r.has),o1e(r.keys))}});var i5=A((Ywr,p1e)=>{"use strict";var iDt=Ko(),h1e=ba(),oDt=KR(),aDt=d_(),sDt=Xp(),lDt=ll(),uDt=Gf(),cDt=h1e.has,f1e=h1e.remove;p1e.exports=function(e){var t=iDt(this),n=sDt(e),i=oDt(t);return aDt(t)<=n.size?lDt(t,function(o){n.includes(o)&&f1e(i,o)}):uDt(n.getIterator(),function(o){cDt(t,o)&&f1e(i,o)}),i}});var Jp=A((Kwr,m1e)=>{"use strict";var fDt=_r(),d1e=function(r){return{size:r,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};m1e.exports=function(r){var e=fDt("Set");try{new e()[r](d1e(0));try{return new e()[r](d1e(-1)),!1}catch(t){return!0}}catch(t){return!1}}});var v1e=A(()=>{"use strict";var hDt=te(),pDt=i5(),dDt=Jp();hDt({target:"Set",proto:!0,real:!0,forced:!dDt("difference")},{difference:pDt})});var y1e=A((Qwr,g1e)=>{"use strict";var mDt=ws(),vDt=qr(),gDt=$i(),yDt=hr(),_Dt=Fm(),xDt=yDt("iterator"),wDt=Object;g1e.exports=function(r){if(gDt(r))return!1;var e=wDt(r);return e[xDt]!==void 0||"@@iterator"in e||vDt(_Dt,mDt(e))}});var Qp=A((ebr,x1e)=>{"use strict";var bDt=_r(),_1e=Er(),SDt=y1e(),EDt=Ir(),IDt=bDt("Set"),TDt=function(r){return EDt(r)&&typeof r.size=="number"&&_1e(r.has)&&_1e(r.keys)};x1e.exports=function(r){return TDt(r)?r:SDt(r)?new IDt(r):r}});var w1e=A(()=>{"use strict";var ADt=te(),CDt=Rt(),MDt=Qp(),RDt=i5();ADt({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(e){return CDt(RDt,this,MDt(e))}})});var b1e=A(()=>{"use strict";var PDt=te(),ODt=kn(),LDt=Ko(),DDt=ll();PDt({target:"Set",proto:!0,real:!0,forced:!0},{every:function(e){var t=LDt(this),n=ODt(e,arguments.length>1?arguments[1]:void 0);return DDt(t,function(i){if(!n(i,i,t))return!1},!0)!==!1}})});var E1e=A(()=>{"use strict";var NDt=te(),kDt=kn(),qDt=Ko(),S1e=ba(),jDt=ll(),FDt=S1e.Set,zDt=S1e.add;NDt({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(e){var t=qDt(this),n=kDt(e,arguments.length>1?arguments[1]:void 0),i=new FDt;return jDt(t,function(o){n(o,o,t)&&zDt(i,o)}),i}})});var I1e=A(()=>{"use strict";var BDt=te(),UDt=kn(),VDt=Ko(),GDt=ll();BDt({target:"Set",proto:!0,real:!0,forced:!0},{find:function(e){var t=VDt(this),n=UDt(e,arguments.length>1?arguments[1]:void 0),i=GDt(t,function(o){if(n(o,o,t))return{value:o}},!0);return i&&i.value}})});var T1e=A(()=>{"use strict";var $Dt=te(),HDt=q1();$Dt({target:"Set",stat:!0,forced:!0},{from:HDt})});var a5=A((fbr,C1e)=>{"use strict";var WDt=Ko(),o5=ba(),ZDt=d_(),YDt=Xp(),KDt=ll(),XDt=Gf(),JDt=o5.Set,A1e=o5.add,QDt=o5.has;C1e.exports=function(e){var t=WDt(this),n=YDt(e),i=new JDt;return ZDt(t)>n.size?XDt(n.getIterator(),function(o){QDt(t,o)&&A1e(i,o)}):KDt(t,function(o){n.includes(o)&&A1e(i,o)}),i}});var M1e=A(()=>{"use strict";var eNt=te(),tNt=ft(),rNt=a5(),nNt=Jp(),iNt=!nNt("intersection")||tNt(function(){return Array.from(new Set([1,2,3]).intersection(new Set([3,2])))!=="3,2"});eNt({target:"Set",proto:!0,real:!0,forced:iNt},{intersection:rNt})});var R1e=A(()=>{"use strict";var oNt=te(),aNt=Rt(),sNt=Qp(),lNt=a5();oNt({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(e){return aNt(lNt,this,sNt(e))}})});var s5=A((vbr,P1e)=>{"use strict";var uNt=Ko(),cNt=ba().has,fNt=d_(),hNt=Xp(),pNt=ll(),dNt=Gf(),mNt=kf();P1e.exports=function(e){var t=uNt(this),n=hNt(e);if(fNt(t)<=n.size)return pNt(t,function(o){if(n.includes(o))return!1},!0)!==!1;var i=n.getIterator();return dNt(i,function(o){if(cNt(t,o))return mNt(i,"normal",!1)})!==!1}});var O1e=A(()=>{"use strict";var vNt=te(),gNt=s5(),yNt=Jp();vNt({target:"Set",proto:!0,real:!0,forced:!yNt("isDisjointFrom")},{isDisjointFrom:gNt})});var L1e=A(()=>{"use strict";var _Nt=te(),xNt=Rt(),wNt=Qp(),bNt=s5();_Nt({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(e){return xNt(bNt,this,wNt(e))}})});var l5=A((wbr,D1e)=>{"use strict";var SNt=Ko(),ENt=d_(),INt=ll(),TNt=Xp();D1e.exports=function(e){var t=SNt(this),n=TNt(e);return ENt(t)>n.size?!1:INt(t,function(i){if(!n.includes(i))return!1},!0)!==!1}});var N1e=A(()=>{"use strict";var ANt=te(),CNt=l5(),MNt=Jp();ANt({target:"Set",proto:!0,real:!0,forced:!MNt("isSubsetOf")},{isSubsetOf:CNt})});var k1e=A(()=>{"use strict";var RNt=te(),PNt=Rt(),ONt=Qp(),LNt=l5();RNt({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(e){return PNt(LNt,this,ONt(e))}})});var u5=A((Tbr,q1e)=>{"use strict";var DNt=Ko(),NNt=ba().has,kNt=d_(),qNt=Xp(),jNt=Gf(),FNt=kf();q1e.exports=function(e){var t=DNt(this),n=qNt(e);if(kNt(t)<n.size)return!1;var i=n.getIterator();return jNt(i,function(o){if(!NNt(t,o))return FNt(i,"normal",!1)})!==!1}});var j1e=A(()=>{"use strict";var zNt=te(),BNt=u5(),UNt=Jp();zNt({target:"Set",proto:!0,real:!0,forced:!UNt("isSupersetOf")},{isSupersetOf:BNt})});var F1e=A(()=>{"use strict";var VNt=te(),GNt=Rt(),$Nt=Qp(),HNt=u5();VNt({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(e){return GNt(HNt,this,$Nt(e))}})});var B1e=A(()=>{"use strict";var WNt=te(),z1e=rt(),ZNt=Ko(),YNt=ll(),KNt=wr(),XNt=z1e([].join),JNt=z1e([].push);WNt({target:"Set",proto:!0,real:!0,forced:!0},{join:function(e){var t=ZNt(this),n=e===void 0?",":KNt(e),i=[];return YNt(t,function(o){JNt(i,o)}),XNt(i,n)}})});var V1e=A(()=>{"use strict";var QNt=te(),e2t=kn(),t2t=Ko(),U1e=ba(),r2t=ll(),n2t=U1e.Set,i2t=U1e.add;QNt({target:"Set",proto:!0,real:!0,forced:!0},{map:function(e){var t=t2t(this),n=e2t(e,arguments.length>1?arguments[1]:void 0),i=new n2t;return r2t(t,function(o){i2t(i,n(o,o,t))}),i}})});var G1e=A(()=>{"use strict";var o2t=te(),a2t=j1();o2t({target:"Set",stat:!0,forced:!0},{of:a2t})});var $1e=A(()=>{"use strict";var s2t=te(),l2t=xr(),u2t=Ko(),c2t=ll(),f2t=TypeError;s2t({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=u2t(this),n=arguments.length<2,i=n?void 0:arguments[1];if(l2t(e),c2t(t,function(o){n?(n=!1,i=o):i=e(i,o,o,t)}),n)throw new f2t("Reduce of empty set with no initial value");return i}})});var H1e=A(()=>{"use strict";var h2t=te(),p2t=kn(),d2t=Ko(),m2t=ll();h2t({target:"Set",proto:!0,real:!0,forced:!0},{some:function(e){var t=d2t(this),n=p2t(e,arguments.length>1?arguments[1]:void 0);return m2t(t,function(i){if(n(i,i,t))return!0},!0)===!0}})});var f5=A((Bbr,W1e)=>{"use strict";var v2t=Ko(),c5=ba(),g2t=KR(),y2t=Xp(),_2t=Gf(),x2t=c5.add,w2t=c5.has,b2t=c5.remove;W1e.exports=function(e){var t=v2t(this),n=y2t(e).getIterator(),i=g2t(t);return _2t(n,function(o){w2t(t,o)?b2t(i,o):x2t(i,o)}),i}});var Z1e=A(()=>{"use strict";var S2t=te(),E2t=f5(),I2t=Jp();S2t({target:"Set",proto:!0,real:!0,forced:!I2t("symmetricDifference")},{symmetricDifference:E2t})});var Y1e=A(()=>{"use strict";var T2t=te(),A2t=Rt(),C2t=Qp(),M2t=f5();T2t({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(e){return A2t(M2t,this,C2t(e))}})});var h5=A((Hbr,K1e)=>{"use strict";var R2t=Ko(),P2t=ba().add,O2t=KR(),L2t=Xp(),D2t=Gf();K1e.exports=function(e){var t=R2t(this),n=L2t(e).getIterator(),i=O2t(t);return D2t(n,function(o){P2t(i,o)}),i}});var X1e=A(()=>{"use strict";var N2t=te(),k2t=h5(),q2t=Jp();N2t({target:"Set",proto:!0,real:!0,forced:!q2t("union")},{union:k2t})});var J1e=A(()=>{"use strict";var j2t=te(),F2t=Rt(),z2t=Qp(),B2t=h5();j2t({target:"Set",proto:!0,real:!0,forced:!0},{union:function(e){return F2t(B2t,this,z2t(e))}})});var Q1e=A(()=>{"use strict";var U2t=te(),V2t=Jm().charAt,G2t=ti(),$2t=ri(),H2t=wr();U2t({target:"String",proto:!0,forced:!0},{at:function(e){var t=H2t(G2t(this)),n=t.length,i=$2t(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:V2t(t,o)}})});var p5=A((Qbr,nSe)=>{"use strict";var rSe=rt(),W2t=ro(),eSe=wr(),Z2t=Zr(),Y2t=TypeError,tSe=rSe([].push),K2t=rSe([].join);nSe.exports=function(e){var t=W2t(e),n=Z2t(t);if(!n)return"";for(var i=arguments.length,o=[],a=0;;){var c=t[a++];if(c===void 0)throw new Y2t("Incorrect template");if(tSe(o,eSe(c)),a===n)return K2t(o,"");a<i&&tSe(o,eSe(arguments[a]))}}});var iSe=A(()=>{"use strict";var X2t=te(),J2t=p5();X2t({target:"String",stat:!0,forced:!0},{cooked:J2t})});var uSe=A(()=>{"use strict";var Q2t=te(),ekt=qp(),oSe=Zo(),tkt=ti(),rkt=wr(),aSe=vn(),sSe=Jm(),nkt=sSe.codeAt,ikt=sSe.charAt,lSe="String Iterator",okt=aSe.set,akt=aSe.getterFor(lSe),skt=ekt(function(e){okt(this,{type:lSe,string:e,index:0})},"String",function(){var e=akt(this),t=e.string,n=e.index,i;return n>=t.length?oSe(void 0,!0):(i=ikt(t,n),e.index+=i.length,oSe({codePoint:nkt(i,0),position:n},!1))});Q2t({target:"String",proto:!0,forced:!0},{codePoints:function(){return new skt(rkt(tkt(this)))}})});var ySe=A((i1r,gSe)=>{"use strict";var lkt=_r(),XR=rt(),ukt=String.fromCharCode,ckt=lkt("String","fromCodePoint"),d5=XR("".charAt),mSe=XR("".charCodeAt),cSe=XR("".indexOf),fSe=XR("".slice),v5=48,vSe=57,hSe=97,fkt=102,pSe=65,hkt=70,dSe=function(r,e){var t=mSe(r,e);return t>=v5&&t<=vSe},m5=function(r,e,t){if(t>=r.length)return-1;for(var n=0;e<t;e++){var i=pkt(mSe(r,e));if(i===-1)return-1;n=n*16+i}return n},pkt=function(r){return r>=v5&&r<=vSe?r-v5:r>=hSe&&r<=fkt?r-hSe+10:r>=pSe&&r<=hkt?r-pSe+10:-1};gSe.exports=function(r){for(var e="",t=0,n=0,i;(n=cSe(r,"\\",n))>-1;){if(e+=fSe(r,t,n),++n===r.length)return;var o=d5(r,n++);switch(o){case"b":e+="\b";break;case"t":e+="\t";break;case"n":e+=`
`;break;case"v":e+="\x0B";break;case"f":e+="\f";break;case"r":e+="\r";break;case"\r":n<r.length&&d5(r,n)===`
`&&++n;case`
`:case"\u2028":case"\u2029":break;case"0":if(dSe(r,n))return;e+="\0";break;case"x":if(i=m5(r,n,n+2),i===-1)return;n+=2,e+=ukt(i);break;case"u":if(n<r.length&&d5(r,n)==="{"){var a=cSe(r,"}",++n);if(a===-1)return;i=m5(r,n,a),n=a+1}else i=m5(r,n,n+4),n+=4;if(i===-1||i>1114111)return;e+=ckt(i);break;default:if(dSe(o,0))return;e+=o;}t=n}return e+fSe(r,t)}});var CSe=A(()=>{"use strict";var dkt=Uf(),mkt=te(),vkt=wc(),gkt=_r(),ykt=Ab(),JR=rt(),SSe=xa(),ESe=Lt(),_kt=Gr(),xkt=Er(),wkt=Zr(),bkt=Zn().f,Skt=Om(),Ekt=p5(),Ikt=ySe(),ISe=$m(),Tkt=gkt("WeakMap"),Hf=vkt("GlobalDedentRegistry",new Tkt);Hf.has=Hf.has;Hf.get=Hf.get;Hf.set=Hf.set;var g5=Array,B1=TypeError,_Se=Object.freeze||Object,Akt=Object.isFrozen,Ckt=Math.min,xSe=JR("".charAt),TSe=JR("".slice),Mkt=JR("".split),wSe=JR(/./.exec),Rkt=/([\n\u2028\u2029]|\r\n?)/g,Pkt=RegExp("^["+ISe+"]*"),Okt=RegExp("[^"+ISe+"]"),bSe="Invalid tag",Lkt="Invalid opening line",Dkt="Invalid closing line",Nkt=function(r){var e=r.raw;if(dkt&&!Akt(e))throw new B1("Raw template should be frozen");if(Hf.has(e))return Hf.get(e);var t=kkt(e),n=jkt(t);return bkt(n,"raw",{value:_Se(t)}),_Se(n),Hf.set(e,n),n},kkt=function(r){var e=_kt(r),t=wkt(e),n=g5(t),i=g5(t),o=0,a,c,h,d;if(!t)throw new B1(bSe);for(;o<t;o++){var v=e[o];if(typeof v=="string")n[o]=Mkt(v,Rkt);else throw new B1(bSe)}for(o=0;o<t;o++){var x=o+1===t;if(a=n[o],o===0){if(a.length===1||a[0].length>0)throw new B1(Lkt);a[1]=""}if(x){if(a.length===1||wSe(Okt,a[a.length-1]))throw new B1(Dkt);a[a.length-2]="",a[a.length-1]=""}for(var S=2;S<a.length;S+=2){var T=a[S],L=S+1===a.length&&!x,k=wSe(Pkt,T)[0];if(!L&&k.length===T.length){a[S]="";continue}c=qkt(k,c)}}var R=c?c.length:0;for(o=0;o<t;o++){for(a=n[o],h=a[0],d=1;d<a.length;d+=2)h+=a[d]+TSe(a[d+1],R);i[o]=h}return i},qkt=function(r,e){if(e===void 0||r===e)return r;for(var t=0,n=Ckt(r.length,e.length);t<n&&xSe(r,t)===xSe(e,t);t++);return TSe(r,0,t)},jkt=function(r){for(var e=0,t=r.length,n=g5(t);e<t;e++)n[e]=Ikt(r[e]);return n},ASe=function(r){return ykt(function(e){var t=Skt(arguments);return t[0]=Nkt(ESe(e)),SSe(r,this,t)},"")},Fkt=ASe(Ekt);mkt({target:"String",stat:!0,forced:!0},{dedent:function(e){return ESe(e),xkt(e)?ASe(e):SSe(Fkt,this,arguments)}})});var MSe=A(()=>{"use strict";gU()});var RSe=A(()=>{"use strict";IU()});var PSe=A(()=>{"use strict";DU()});var OSe=A(()=>{"use strict";zU()});var LSe=A(()=>{"use strict";var zkt=Ht(),Bkt=Ri(),Ukt=Zn().f,Vkt=go().f,y5=zkt.Symbol;Bkt("asyncDispose");y5&&(U1=Vkt(y5,"asyncDispose"),U1.enumerable&&U1.configurable&&U1.writable&&Ukt(y5,"asyncDispose",{value:U1.value,enumerable:!1,configurable:!1,writable:!1}));var U1});var DSe=A(()=>{"use strict";var Gkt=Ht(),$kt=Ri(),Hkt=Zn().f,Wkt=go().f,_5=Gkt.Symbol;$kt("dispose");_5&&(V1=Wkt(_5,"dispose"),V1.enumerable&&V1.configurable&&V1.writable&&Hkt(_5,"dispose",{value:V1.value,enumerable:!1,configurable:!1,writable:!1}));var V1});var w5=A((_1r,NSe)=>{"use strict";var Zkt=_r(),Ykt=rt(),x5=Zkt("Symbol"),Kkt=x5.keyFor,Xkt=Ykt(x5.prototype.valueOf);NSe.exports=x5.isRegisteredSymbol||function(e){try{return Kkt(Xkt(e))!==void 0}catch(t){return!1}}});var kSe=A(()=>{"use strict";var Jkt=te(),Qkt=w5();Jkt({target:"Symbol",stat:!0},{isRegisteredSymbol:Qkt})});var qSe=A(()=>{"use strict";var eqt=te(),tqt=w5();eqt({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:tqt})});var E5=A((E1r,VSe)=>{"use strict";var rqt=wc(),BSe=_r(),nqt=rt(),iqt=Mf(),oqt=hr(),eP=BSe("Symbol"),jSe=eP.isWellKnownSymbol,USe=BSe("Object","getOwnPropertyNames"),aqt=nqt(eP.prototype.valueOf),FSe=rqt("wks");for(QR=0,b5=USe(eP),zSe=b5.length;QR<zSe;QR++)try{S5=b5[QR],iqt(eP[S5])&&oqt(S5)}catch(r){}var S5,QR,b5,zSe;VSe.exports=function(e){if(jSe&&jSe(e))return!0;try{for(var t=aqt(e),n=0,i=USe(FSe),o=i.length;n<o;n++)if(FSe[i[n]]==t)return!0}catch(a){}return!1}});var GSe=A(()=>{"use strict";var sqt=te(),lqt=E5();sqt({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:lqt})});var $Se=A(()=>{"use strict";var uqt=te(),cqt=E5();uqt({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:cqt})});var HSe=A(()=>{"use strict";var fqt=Ri();fqt("matcher")});var WSe=A(()=>{"use strict";var hqt=Ri();hqt("metadata")});var ZSe=A(()=>{"use strict";var pqt=Ri();pqt("metadataKey")});var YSe=A(()=>{"use strict";var dqt=Ri();dqt("observable")});var KSe=A(()=>{"use strict";var mqt=Ri();mqt("patternMatch")});var XSe=A(()=>{"use strict";var vqt=Ri();vqt("replaceAll")});var QSe=A(()=>{"use strict";var gqt=_r(),yqt=Ny(),_qt=R3(),JSe=jr(),xqt=Bm(),wqt=JSe.aTypedArrayConstructor,bqt=JSe.exportTypedArrayStaticMethod;bqt("fromAsync",function(e){var t=this,n=arguments.length,i=n>1?arguments[1]:void 0,o=n>2?arguments[2]:void 0;return new(gqt("Promise"))(function(a){yqt(t),a(_qt(e,i,o))}).then(function(a){return xqt(wqt(t),a)})},!0)});var eEe=A(()=>{"use strict";t3()});var rEe=A(()=>{"use strict";var tEe=jr(),Sqt=Ui().filterReject,Eqt=YM(),Iqt=tEe.aTypedArray,Tqt=tEe.exportTypedArrayMethod;Tqt("filterOut",function(e){var t=Sqt(Iqt(this),e,arguments.length>1?arguments[1]:void 0);return Eqt(this,t)},!0)});var iEe=A(()=>{"use strict";var nEe=jr(),Aqt=Ui().filterReject,Cqt=YM(),Mqt=nEe.aTypedArray,Rqt=nEe.exportTypedArrayMethod;Rqt("filterReject",function(e){var t=Aqt(Mqt(this),e,arguments.length>1?arguments[1]:void 0);return Cqt(this,t)},!0)});var oEe=A(()=>{"use strict";r3()});var aEe=A(()=>{"use strict";n3()});var lEe=A(()=>{"use strict";var sEe=jr(),Pqt=pR(),Oqt=n_(),Lqt=sEe.aTypedArray,Dqt=sEe.exportTypedArrayMethod;Dqt("groupBy",function(e){var t=arguments.length>1?arguments[1]:void 0;return Pqt(Lqt(this),e,t,Oqt)},!0)});var uEe=A(()=>{"use strict";d3()});var cEe=A(()=>{"use strict";m3()});var fEe=A(()=>{"use strict";var I5=jr(),Nqt=Zr(),kqt=GM(),qqt=ql(),jqt=x1(),Fqt=ri(),zqt=ft(),Bqt=I5.aTypedArray,Uqt=I5.getTypedArrayConstructor,Vqt=I5.exportTypedArrayMethod,Gqt=Math.max,$qt=Math.min,Hqt=!zqt(function(){var r=new Int8Array([1]),e=r.toSpliced(1,0,{valueOf:function(){return r[0]=2,3}});return e[0]!==2||e[1]!==3});Vqt("toSpliced",function(e,t){var n=Bqt(this),i=Uqt(n),o=Nqt(n),a=qqt(e,o),c=arguments.length,h=0,d,v,x,S,T,L,k;if(c===0)d=v=0;else if(c===1)d=0,v=o-a;else if(v=$qt(Gqt(Fqt(t),0),o-a),d=c-2,d){S=new i(d),x=kqt(S);for(var R=2;R<c;R++)T=arguments[R],S[R-2]=x?jqt(T):+T}for(L=o+d-v,k=new i(L);h<a;h++)k[h]=n[h];for(;h<a+d;h++)k[h]=S[h-a];for(;h<L;h++)k[h]=n[h+v-d];return k},!Hqt)});var hEe=A(()=>{"use strict";var Wqt=rt(),T5=jr(),Zqt=Bm(),Yqt=vR(),Kqt=T5.aTypedArray,Xqt=T5.getTypedArrayConstructor,Jqt=T5.exportTypedArrayMethod,Qqt=Wqt(Yqt);Jqt("uniqueBy",function(e){return Kqt(this),Zqt(Xqt(this),Qqt(this,e))},!0)});var pEe=A(()=>{"use strict";g3()});var nP=A((fSr,dEe)=>{"use strict";var tP=rt(),rP=WeakMap.prototype;dEe.exports={WeakMap,set:tP(rP.set),get:tP(rP.get),has:tP(rP.has),remove:tP(rP.delete)}});var A5=A((hSr,mEe)=>{"use strict";var ejt=nP().has;mEe.exports=function(r){return ejt(r),r}});var vEe=A(()=>{"use strict";var tjt=te(),rjt=A5(),njt=nP().remove;tjt({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=rjt(this),t=!0,n,i=0,o=arguments.length;i<o;i++)n=njt(e,arguments[i]),t=t&&n;return!!t}})});var gEe=A(()=>{"use strict";var ijt=te(),ojt=q1();ijt({target:"WeakMap",stat:!0,forced:!0},{from:ojt})});var yEe=A(()=>{"use strict";var ajt=te(),sjt=j1();ajt({target:"WeakMap",stat:!0,forced:!0},{of:sjt})});var xEe=A(()=>{"use strict";var ljt=te(),ujt=A5(),C5=nP(),cjt=C5.get,fjt=C5.has,_Ee=C5.set;ljt({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(e,t){var n=ujt(this),i,o;return fjt(n,e)?(i=cjt(n,e),"update"in t&&(i=t.update(i,e,n),_Ee(n,e,i)),i):(o=t.insert(e,n),_Ee(n,e,o),o)}})});var wEe=A(()=>{"use strict";var hjt=te(),pjt=BR();hjt({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:pjt})});var iP=A((SSr,bEe)=>{"use strict";var M5=rt(),R5=WeakSet.prototype;bEe.exports={WeakSet,add:M5(R5.add),has:M5(R5.has),remove:M5(R5.delete)}});var P5=A((ESr,SEe)=>{"use strict";var djt=iP().has;SEe.exports=function(r){return djt(r),r}});var EEe=A(()=>{"use strict";var mjt=te(),vjt=P5(),gjt=iP().add;mjt({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=vjt(this),t=0,n=arguments.length;t<n;t++)gjt(e,arguments[t]);return e}})});var IEe=A(()=>{"use strict";var yjt=te(),_jt=P5(),xjt=iP().remove;yjt({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=_jt(this),t=!0,n,i=0,o=arguments.length;i<o;i++)n=xjt(e,arguments[i]),t=t&&n;return!!t}})});var TEe=A(()=>{"use strict";var wjt=te(),bjt=q1();wjt({target:"WeakSet",stat:!0,forced:!0},{from:bjt})});var AEe=A(()=>{"use strict";var Sjt=te(),Ejt=j1();Sjt({target:"WeakSet",stat:!0,forced:!0},{of:Ejt})});var O5=A((LSr,REe)=>{"use strict";var CEe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",MEe={};for(G1=0;G1<66;G1++)MEe[CEe.charAt(G1)]=G1;var G1;REe.exports={itoc:CEe,ctoi:MEe}});var kEe=A(()=>{"use strict";var Ijt=te(),Tjt=Ht(),DEe=_r(),D5=rt(),Ajt=Rt(),N5=ft(),Cjt=wr(),Mjt=qr(),Rjt=Gl(),L5=O5().ctoi,NEe=/[^\d+/a-z]/i,Pjt=/[\t\n\f\r ]+/g,Ojt=/[=]{1,2}$/,$1=DEe("atob"),Ljt=String.fromCharCode,Djt=D5("".charAt),PEe=D5("".replace),Njt=D5(NEe.exec),k5=N5(function(){return $1(" ")!==""}),q5=!N5(function(){$1("a")}),OEe=!k5&&!q5&&!N5(function(){$1()}),LEe=!k5&&!q5&&$1.length!==1;Ijt({global:!0,bind:!0,enumerable:!0,forced:k5||q5||OEe||LEe},{atob:function(e){if(Rjt(arguments.length,1),OEe||LEe)return Ajt($1,Tjt,e);var t=PEe(Cjt(e),Pjt,""),n="",i=0,o=0,a,c;if(t.length%4===0&&(t=PEe(t,Ojt,"")),t.length%4===1||Njt(NEe,t))throw new(DEe("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;a=Djt(t,i++);)Mjt(L5,a)&&(c=o%4?c*64+L5[a]:L5[a],o++%4&&(n+=Ljt(255&c>>(-2*o&6))));return n}})});var $Ee=A(()=>{"use strict";var kjt=te(),qjt=Ht(),UEe=_r(),VEe=rt(),jjt=Rt(),GEe=ft(),qEe=wr(),Fjt=Gl(),zjt=O5().itoc,nv=UEe("btoa"),jEe=VEe("".charAt),Bjt=VEe("".charCodeAt),FEe=!!nv&&!GEe(function(){nv()}),zEe=!!nv&&GEe(function(){return nv(null)!=="bnVsbA=="}),BEe=!!nv&&nv.length!==1;kjt({global:!0,bind:!0,enumerable:!0,forced:FEe||zEe||BEe},{btoa:function(e){if(Fjt(arguments.length,1),FEe||zEe||BEe)return jjt(nv,qjt,qEe(e));for(var t=qEe(e),n="",i=0,o=zjt,a,c;jEe(t,i)||(o="=",i%1);){if(c=Bjt(t,i+=3/4),c>255)throw new(UEe("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");a=a<<8|c,n+=jEe(o,63&a>>8-i%1*8)}return n}})});var j5=A((jSr,HEe)=>{"use strict";HEe.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var z5=A((FSr,ZEe)=>{"use strict";var Ujt=Sb(),F5=Ujt("span").classList,WEe=F5&&F5.constructor&&F5.constructor.prototype;ZEe.exports=WEe===Object.prototype?void 0:WEe});var JEe=A(()=>{"use strict";var YEe=Ht(),KEe=j5(),Vjt=z5(),B5=Bz(),Gjt=Hi(),XEe=function(r){if(r&&r.forEach!==B5)try{Gjt(r,"forEach",B5)}catch(e){r.forEach=B5}};for(oP in KEe)KEe[oP]&&XEe(YEe[oP]&&YEe[oP].prototype);var oP;XEe(Vjt)});var iIe=A(()=>{"use strict";var QEe=Ht(),tIe=j5(),$jt=z5(),H1=Vb(),U5=Hi(),rIe=hr(),V5=rIe("iterator"),eIe=rIe("toStringTag"),G5=H1.values,nIe=function(r,e){if(r){if(r[V5]!==G5)try{U5(r,V5,G5)}catch(n){r[V5]=G5}if(r[eIe]||U5(r,eIe,e),tIe[e]){for(var t in H1)if(r[t]!==H1[t])try{U5(r,t,H1[t])}catch(n){r[t]=H1[t]}}}};for(aP in tIe)nIe(QEe[aP]&&QEe[aP].prototype,aP);var aP;nIe($jt,"DOMTokenList")});var $5=A((GSr,oIe)=>{"use strict";oIe.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var vIe=A(()=>{"use strict";var Hjt=te(),Wjt=N3(),uP=_r(),X5=ft(),Zjt=Bi(),J5=_s(),cP=Zn().f,Yjt=En(),sP=ci(),lP=qr(),Kjt=wa(),Xjt=Lt(),lIe=Ez(),aIe=qm(),m_=$5(),Jjt=MC(),uIe=vn(),Q5=fr(),cIe=Vr(),v_="DOMException",K5="DATA_CLONE_ERR",hP=uP("Error"),Wf=uP(v_)||function(){try{var r=uP("MessageChannel")||Wjt("worker_threads").MessageChannel;new r().port1.postMessage(new WeakMap)}catch(e){if(e.name===K5&&e.code===25)return e.constructor}}(),Qjt=Wf&&Wf.prototype,fIe=hP.prototype,eFt=uIe.set,tFt=uIe.getterFor(v_),rFt="stack"in new hP(v_),hIe=function(r){return lP(m_,r)&&m_[r].m?m_[r].c:0},eG=function(){Kjt(this,Z1);var e=arguments.length,t=aIe(e<1?void 0:arguments[0]),n=aIe(e<2?void 0:arguments[1],"Error"),i=hIe(n);if(eFt(this,{type:v_,name:n,message:t,code:i}),Q5||(this.name=n,this.message=t,this.code=i),rFt){var o=new hP(t);o.name=v_,cP(this,"stack",J5(1,Jjt(o.stack,1)))}},Z1=eG.prototype=Zjt(fIe),pIe=function(r){return{enumerable:!0,configurable:!0,get:r}},H5=function(r){return pIe(function(){return tFt(this)[r]})};Q5&&(sP(Z1,"code",H5("code")),sP(Z1,"message",H5("message")),sP(Z1,"name",H5("name")));cP(Z1,"constructor",J5(1,eG));var pP=X5(function(){return!(new Wf instanceof hP)}),dIe=pP||X5(function(){return fIe.toString!==lIe||String(new Wf(1,2))!=="2: 1"}),mIe=pP||X5(function(){return new Wf(1,"DataCloneError").code!==25}),nFt=pP||Wf[K5]!==25||Qjt[K5]!==25,sIe=cIe?dIe||mIe||nFt:pP;Hjt({global:!0,constructor:!0,forced:sIe},{DOMException:sIe?eG:Wf});var Y1=uP(v_),fP=Y1.prototype;dIe&&(cIe||Wf===Y1)&&Yjt(fP,"toString",lIe);mIe&&Q5&&Wf===Y1&&sP(fP,"code",pIe(function(){return hIe(Xjt(this).name)}));for(W5 in m_)lP(m_,W5)&&(Z5=m_[W5],W1=Z5.s,Y5=J5(6,Z5.c),lP(Y1,W1)||cP(Y1,W1,Y5),lP(fP,W1)||cP(fP,W1,Y5));var Z5,W1,Y5,W5});var SIe=A(()=>{"use strict";var iFt=te(),oFt=Ht(),lG=_r(),aG=_s(),sG=Zn().f,gIe=qr(),aFt=wa(),sFt=km(),yIe=qm(),tG=$5(),lFt=MC(),uFt=fr(),wIe=Vr(),X1="DOMException",bIe=lG("Error"),J1=lG(X1),uG=function(){aFt(this,cFt);var e=arguments.length,t=yIe(e<1?void 0:arguments[0]),n=yIe(e<2?void 0:arguments[1],"Error"),i=new J1(t,n),o=new bIe(t);return o.name=X1,sG(i,"stack",aG(1,lFt(o.stack,1))),sFt(i,this,uG),i},cFt=uG.prototype=J1.prototype,fFt="stack"in new bIe(X1),hFt="stack"in new J1(1,2),rG=J1&&uFt&&Object.getOwnPropertyDescriptor(oFt,X1),pFt=!!rG&&!(rG.writable&&rG.configurable),_Ie=fFt&&!pFt&&!hFt;iFt({global:!0,constructor:!0,forced:wIe||_Ie},{DOMException:_Ie?uG:J1});var K1=lG(X1),xIe=K1.prototype;if(xIe.constructor!==K1){wIe||sG(xIe,"constructor",aG(1,K1));for(nG in tG)gIe(tG,nG)&&(iG=tG[nG],oG=iG.s,gIe(K1,oG)||sG(K1,oG,aG(6,iG.c)))}var iG,oG,nG});var IIe=A(()=>{"use strict";var dFt=_r(),mFt=bs(),EIe="DOMException";mFt(dFt(EIe),EIe)});var AIe=A(()=>{"use strict";var vFt=te(),gFt=Ht(),TIe=s1().clear;vFt({global:!0,bind:!0,enumerable:!0,forced:gFt.clearImmediate!==TIe},{clearImmediate:TIe})});var MIe=A((QSr,CIe)=>{"use strict";CIe.exports=typeof Bun=="function"&&Bun&&typeof Bun.version=="string"});var dP=A((eEr,PIe)=>{"use strict";var RIe=Ht(),yFt=xa(),_Ft=Er(),xFt=MIe(),wFt=_c(),bFt=Lf(),SFt=Gl(),EFt=RIe.Function,IFt=/MSIE .\./.test(wFt)||xFt&&function(){var r=RIe.Bun.version.split(".");return r.length<3||r[0]==="0"&&(r[1]<3||r[1]==="3"&&r[2]==="0")}();PIe.exports=function(r,e){var t=e?2:1;return IFt?function(n,i){var o=SFt(arguments.length,1)>t,a=_Ft(n)?n:EFt(n),c=o?bFt(arguments,t):[],h=o?function(){yFt(a,this,c)}:a;return e?r(h,i):r(h)}:r}});var NIe=A(()=>{"use strict";var TFt=te(),DIe=Ht(),OIe=s1().set,AFt=dP(),LIe=DIe.setImmediate?AFt(OIe,!1):OIe;TFt({global:!0,bind:!0,enumerable:!0,forced:DIe.setImmediate!==LIe},{setImmediate:LIe})});var kIe=A(()=>{"use strict";AIe();NIe()});var qIe=A(()=>{"use strict";var CFt=te(),MFt=Ht(),RFt=LB(),PFt=xr(),OFt=Gl(),LFt=Sc(),DFt=MFt.process;CFt({global:!0,enumerable:!0,dontCallGetSet:!0},{queueMicrotask:function(e){OFt(arguments.length,1),PFt(e);var t=LFt&&DFt.domain;RFt(t?t.bind(e):e)}})});var FIe=A(()=>{"use strict";var NFt=te(),ed=Ht(),kFt=ci(),qFt=fr(),jFt=TypeError,FFt=Object.defineProperty,jIe=ed.self!==ed;try{qFt?(mP=Object.getOwnPropertyDescriptor(ed,"self"),(jIe||!mP||!mP.get||!mP.enumerable)&&kFt(ed,"self",{get:function(){return ed},set:function(e){if(this!==ed)throw new jFt("Illegal invocation");FFt(ed,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):NFt({global:!0,simple:!0,forced:jIe},{self:ed})}catch(r){}var mP});var tTe=A(()=>{"use strict";var zFt=Vr(),BFt=te(),Oi=Ht(),mG=_r(),rS=rt(),vG=ft(),UFt=Op(),gP=Er(),VFt=qu(),GFt=$i(),yP=Ir(),$Ft=Mf(),HFt=Pi(),VIe=Lt(),eS=ws(),GIe=qr(),WFt=jl(),cG=Hi(),iv=Zr(),ZFt=Gl(),YFt=Wy(),_P=Wa(),$Ie=ba(),zIe=wR(),HIe=xz(),WIe=gR(),Q1=Oi.Object,KFt=Oi.Array,ZIe=Oi.Date,nS=Oi.Error,XFt=Oi.EvalError,JFt=Oi.RangeError,QFt=Oi.ReferenceError,ezt=Oi.SyntaxError,YIe=Oi.TypeError,tzt=Oi.URIError,rzt=Oi.PerformanceMark,y_=Oi.WebAssembly,nzt=y_&&y_.CompileError||nS,izt=y_&&y_.LinkError||nS,ozt=y_&&y_.RuntimeError||nS,rd=mG("DOMException"),tS=_P.Map,iS=_P.has,gG=_P.get,ov=_P.set,KIe=$Ie.Set,XIe=$Ie.add,JIe=mG("Object","keys"),BIe=rS([].push),azt=rS((!0).valueOf),szt=rS(1 .valueOf),lzt=rS("".valueOf),uzt=rS(ZIe.prototype.getTime),pG=UFt("structuredClone"),__="DataCloneError",vP="Transferring",QIe=function(r){return!vG(function(){var e=new Oi.Set([7]),t=r(e),n=r(Q1(7));return t===e||!t.has(7)||typeof n!="object"||+n!=7})&&r},UIe=function(r,e){return!vG(function(){var t=new e,n=r({a:t,b:t});return!(n&&n.a===n.b&&n.a instanceof e&&n.a.stack===t.stack)})},czt=function(r){return!vG(function(){var e=r(new Oi.AggregateError([1],pG,{cause:3}));return e.name!=="AggregateError"||e.errors[0]!==1||e.message!==pG||e.cause!==3})},g_=Oi.structuredClone,fzt=zFt||!UIe(g_,nS)||!UIe(g_,rd)||!czt(g_),hzt=!g_&&QIe(function(r){return new rzt(pG,{detail:r}).detail}),td=QIe(g_)||hzt,fG=function(r){throw new rd("Uncloneable type: "+r,__)},As=function(r,e){throw new rd((e||"Cloning")+" of "+r+" cannot be properly polyfilled in this engine",__)},hG=function(r,e){return td||As(e),td(r)},pzt=function(){var r;try{r=new Oi.DataTransfer}catch(e){try{r=new Oi.ClipboardEvent("").clipboardData}catch(t){}}return r&&r.items&&r.files?r:null},yG=function(r,e,t){if(iS(e,r))return gG(e,r);var n=t||eS(r),i,o,a,c,h,d;if(n==="SharedArrayBuffer")td?i=td(r):i=r;else{var v=Oi.DataView;!v&&typeof r.slice!="function"&&As("ArrayBuffer");try{if(typeof r.slice=="function"&&!r.resizable)i=r.slice(0);else for(o=r.byteLength,a=("maxByteLength"in r)?{maxByteLength:r.maxByteLength}:void 0,i=new ArrayBuffer(o,a),c=new v(r),h=new v(i),d=0;d<o;d++)h.setUint8(d,c.getUint8(d))}catch(x){throw new rd("ArrayBuffer is detached",__)}}return ov(e,r,i),i},eTe=function(r,e,t,n,i){var o=Oi[e];return yP(o)||As(e),new o(yG(r.buffer,i),t,n)},dG=function(r,e,t){this.object=r,this.type=e,this.metadata=t},Ya=function(r,e,t){if($Ft(r)&&fG("Symbol"),!yP(r))return r;if(e){if(iS(e,r))return gG(e,r)}else e=new tS;var n=eS(r),i,o,a,c,h,d,v,x;switch(n){case"Array":a=KFt(iv(r));break;case"Object":a={};break;case"Map":a=new tS;break;case"Set":a=new KIe;break;case"RegExp":a=new RegExp(r.source,YFt(r));break;case"Error":switch(o=r.name,o){case"AggregateError":a=new(mG("AggregateError"))([]);break;case"EvalError":a=new XFt;break;case"RangeError":a=new JFt;break;case"ReferenceError":a=new QFt;break;case"SyntaxError":a=new ezt;break;case"TypeError":a=new YIe;break;case"URIError":a=new tzt;break;case"CompileError":a=new nzt;break;case"LinkError":a=new izt;break;case"RuntimeError":a=new ozt;break;default:a=new nS;}break;case"DOMException":a=new rd(r.message,r.name);break;case"ArrayBuffer":case"SharedArrayBuffer":a=t?new dG(r,n):yG(r,e,n);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":d=n==="DataView"?r.byteLength:r.length,a=t?new dG(r,n,{offset:r.byteOffset,length:d}):eTe(r,n,r.byteOffset,d,e);break;case"DOMQuad":try{a=new DOMQuad(Ya(r.p1,e,t),Ya(r.p2,e,t),Ya(r.p3,e,t),Ya(r.p4,e,t))}catch(S){a=hG(r,n)}break;case"File":if(td)try{a=td(r),eS(a)!==n&&(a=void 0)}catch(S){}if(!a)try{a=new File([r],r.name,r)}catch(S){}a||As(n);break;case"FileList":if(c=pzt(),c){for(h=0,d=iv(r);h<d;h++)c.items.add(Ya(r[h],e,t));a=c.files}else a=hG(r,n);break;case"ImageData":try{a=new ImageData(Ya(r.data,e,t),r.width,r.height,{colorSpace:r.colorSpace})}catch(S){a=hG(r,n)}break;default:if(td)a=td(r);else switch(n){case"BigInt":a=Q1(r.valueOf());break;case"Boolean":a=Q1(azt(r));break;case"Number":a=Q1(szt(r));break;case"String":a=Q1(lzt(r));break;case"Date":a=new ZIe(uzt(r));break;case"Blob":try{a=r.slice(0,r.size,r.type)}catch(S){As(n)}break;case"DOMPoint":case"DOMPointReadOnly":i=Oi[n];try{a=i.fromPoint?i.fromPoint(r):new i(r.x,r.y,r.z,r.w)}catch(S){As(n)}break;case"DOMRect":case"DOMRectReadOnly":i=Oi[n];try{a=i.fromRect?i.fromRect(r):new i(r.x,r.y,r.width,r.height)}catch(S){As(n)}break;case"DOMMatrix":case"DOMMatrixReadOnly":i=Oi[n];try{a=i.fromMatrix?i.fromMatrix(r):new i(r)}catch(S){As(n)}break;case"AudioData":case"VideoFrame":gP(r.clone)||As(n);try{a=r.clone()}catch(S){fG(n)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":As(n);default:fG(n);}}switch(ov(e,r,a),n){case"Array":case"Object":for(v=JIe(r),h=0,d=iv(v);h<d;h++)x=v[h],WFt(a,x,Ya(r[x],e,t));break;case"Map":r.forEach(function(S,T){ov(a,Ya(T,e,t),Ya(S,e,t))});break;case"Set":r.forEach(function(S){XIe(a,Ya(S,e,t))});break;case"Error":cG(a,"message",Ya(r.message,e,t)),GIe(r,"cause")&&cG(a,"cause",Ya(r.cause,e,t)),o==="AggregateError"&&(a.errors=Ya(r.errors,e,t));case"DOMException":HIe&&cG(a,"stack",Ya(r.stack,e,t));}return a},Zf=function(r,e){if(!yP(r))return r;if(iS(e,r))return gG(e,r);var t,n,i,o,a,c,h,d;if(r instanceof dG)switch(t=r.type,n=r.object,t){case"ArrayBuffer":case"SharedArrayBuffer":d=yG(n,e,t);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":i=r.metadata,d=eTe(n,t,i.offset,i.length,e);}else switch(eS(r)){case"Array":case"Object":for(c=JIe(r),o=0,a=iv(c);o<a;o++)h=c[o],r[h]=Zf(r[h],e);break;case"Map":d=new tS,r.forEach(function(v,x){ov(d,Zf(x,e),Zf(v,e))});break;case"Set":d=new KIe,r.forEach(function(v){XIe(d,Zf(v,e))});break;case"Error":r.message=Zf(r.message,e),GIe(r,"cause")&&(r.cause=Zf(r.cause,e)),r.name==="AggregateError"&&(r.errors=Zf(r.errors,e));case"DOMException":HIe&&(r.stack=Zf(r.stack,e));}return ov(e,r,d||r),d||r},dzt=function(r,e){if(!yP(r))throw new YIe("Transfer option cannot be converted to a sequence");var t=[];HFt(r,function(S){BIe(t,VIe(S))});for(var n=0,i=iv(t),o=[],a,c,h,d,v,x;n<i;){if(a=t[n++],c=eS(a),c==="ArrayBuffer"){BIe(o,a);continue}if(iS(e,a))throw new rd("Duplicate transferable",__);if(WIe)d=g_(a,{transfer:[a]});else switch(c){case"ImageBitmap":h=Oi.OffscreenCanvas,VFt(h)||As(c,vP);try{v=new h(a.width,a.height),x=v.getContext("bitmaprenderer"),x.transferFromImageBitmap(a),d=v.transferToImageBitmap()}catch(S){}break;case"AudioData":case"VideoFrame":(!gP(a.clone)||!gP(a.close))&&As(c,vP);try{d=a.clone(),a.close()}catch(S){}break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":As(c,vP);}if(d===void 0)throw new rd("This object cannot be transferred: "+c,__);ov(e,a,d)}return o},mzt=function(r,e){for(var t=0,n=iv(r),i,o;t<n;){if(i=r[t++],iS(e,i))throw new rd("Duplicate transferable",__);zIe?o=zIe(i,void 0,!0):(gP(i.transfer)||As("ArrayBuffer",vP),o=i.transfer()),ov(e,i,o)}};BFt({global:!0,enumerable:!0,sham:!WIe,forced:fzt},{structuredClone:function(e){var t=ZFt(arguments.length,1)>1&&!GFt(arguments[1])?VIe(arguments[1]):void 0,n=t?t.transfer:void 0,i=!1,o,a;n!==void 0&&(o=new tS,a=dzt(n,o),i=!!iv(a));var c=Ya(e,o,i);return i&&(o=new tS,mzt(n,o),c=Zf(c,o)),c}})});var iTe=A(()=>{"use strict";var vzt=te(),nTe=Ht(),gzt=dP(),rTe=gzt(nTe.setInterval,!0);vzt({global:!0,bind:!0,forced:nTe.setInterval!==rTe},{setInterval:rTe})});var sTe=A(()=>{"use strict";var yzt=te(),aTe=Ht(),_zt=dP(),oTe=_zt(aTe.setTimeout,!0);yzt({global:!0,bind:!0,forced:aTe.setTimeout!==oTe},{setTimeout:oTe})});var lTe=A(()=>{"use strict";iTe();sTe()});var xP=A((gEr,cTe)=>{"use strict";var xzt=ft(),wzt=hr(),bzt=fr(),uTe=Vr(),Szt=wzt("iterator");cTe.exports=!xzt(function(){var r=new URL("b?a=1&b=2&c=3","http://a"),e=r.searchParams,t=new URLSearchParams("a=1&a=2&b=3"),n="";return r.pathname="c%20d",e.forEach(function(i,o){e.delete("b"),n+=o+i}),t.delete("a",2),t.delete("b",void 0),uTe&&(!r.toJSON||!t.has("a",1)||t.has("a",2)||!t.has("a",void 0)||t.has("b"))||!e.size&&(uTe||!bzt)||!e.sort||r.href!=="http://a/c%20d?a=1&c=3"||e.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!e[Szt]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("http://x",void 0).host!=="x"})});var _Te=A((yEr,yTe)=>{"use strict";var av=rt(),_G=2147483647,oS=36,mTe=1,bG=26,Ezt=38,Izt=700,Tzt=72,Azt=128,Czt="-",Mzt=/[^\0-\u007E]/,vTe=/[.\u3002\uFF0E\uFF61]/g,fTe="Overflow: input needs wider integers to process",xG=oS-mTe,hTe=RangeError,Rzt=av(vTe.exec),x_=Math.floor,wG=String.fromCharCode,pTe=av("".charCodeAt),gTe=av([].join),nd=av([].push),Pzt=av("".replace),Ozt=av("".split),Lzt=av("".toLowerCase),Dzt=function(r){for(var e=[],t=0,n=r.length;t<n;){var i=pTe(r,t++);if(i>=55296&&i<=56319&&t<n){var o=pTe(r,t++);(o&64512)===56320?nd(e,((i&1023)<<10)+(o&1023)+65536):(nd(e,i),t--)}else nd(e,i)}return e},dTe=function(r){return r+22+75*(r<26)},Nzt=function(r,e,t){var n=0;for(r=t?x_(r/Izt):r>>1,r+=x_(r/e);r>xG*bG>>1;)r=x_(r/xG),n+=oS;return x_(n+(xG+1)*r/(r+Ezt))},kzt=function(r){var e=[];r=Dzt(r);var t=r.length,n=Azt,i=0,o=Tzt,a,c;for(a=0;a<r.length;a++)c=r[a],c<128&&nd(e,wG(c));var h=e.length,d=h;for(h&&nd(e,Czt);d<t;){var v=_G;for(a=0;a<r.length;a++)c=r[a],c>=n&&c<v&&(v=c);var x=d+1;if(v-n>x_((_G-i)/x))throw new hTe(fTe);for(i+=(v-n)*x,n=v,a=0;a<r.length;a++){if(c=r[a],c<n&&++i>_G)throw new hTe(fTe);if(c===n){for(var S=i,T=oS;;){var L=T<=o?mTe:T>=o+bG?bG:T-o;if(S<L)break;var k=S-L,R=oS-L;nd(e,wG(dTe(L+k%R))),S=x_(k/R),T+=oS}nd(e,wG(dTe(S))),o=Nzt(i,x,d===h),i=0,d++}}i++,n++}return gTe(e,"")};yTe.exports=function(r){var e=[],t=Ozt(Pzt(Lzt(r),vTe,"."),"."),n,i;for(n=0;n<t.length;n++)i=t[n],nd(e,Rzt(Mzt,i)?"xn--"+kzt(i):i);return gTe(e,".")}});var OG=A((_Er,FTe)=>{"use strict";Vb();var AG=te(),S_=Ht(),wP=Rt(),Oc=rt(),b_=fr(),PTe=xP(),OTe=En(),qzt=ci(),jzt=Ul(),Fzt=bs(),zzt=qp(),RG=vn(),LTe=wa(),SG=Er(),Bzt=qr(),Uzt=kn(),Vzt=ws(),Gzt=Lt(),DTe=Ir(),Ka=wr(),$zt=Bi(),xTe=_s(),CG=Np(),Hzt=Nf(),w_=Gl(),Wzt=hr(),Zzt=$C(),Yzt=Wzt("iterator"),sS="URLSearchParams",NTe=sS+"Iterator",kTe=RG.set,Hl=RG.getterFor(sS),Kzt=RG.getterFor(NTe),Xzt=Object.getOwnPropertyDescriptor,PG=function(r){if(!b_)return S_[r];var e=Xzt(S_,r);return e&&e.value},wTe=PG("fetch"),SP=PG("Request"),aS=PG("Headers"),EG=SP&&SP.prototype,bTe=aS&&aS.prototype,Jzt=S_.RegExp,Qzt=S_.TypeError,qTe=S_.decodeURIComponent,e4t=S_.encodeURIComponent,t4t=Oc("".charAt),STe=Oc([].join),sv=Oc([].push),MG=Oc("".replace),r4t=Oc([].shift),ETe=Oc([].splice),ITe=Oc("".split),n4t=Oc("".slice),i4t=/\+/g,TTe=Array(4),o4t=function(r){return TTe[r-1]||(TTe[r-1]=Jzt("((?:%[\\da-f]{2}){"+r+"})","gi"))},a4t=function(r){try{return qTe(r)}catch(e){return r}},ATe=function(r){var e=MG(r,i4t," "),t=4;try{return qTe(e)}catch(n){for(;t;)e=MG(e,o4t(t--),a4t);return e}},s4t=/[!'()~]|%20/g,l4t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},u4t=function(r){return l4t[r]},CTe=function(r){return MG(e4t(r),s4t,u4t)},IG=zzt(function(e,t){kTe(this,{type:NTe,iterator:CG(Hl(e).entries),kind:t})},"Iterator",function(){var e=Kzt(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value=t==="keys"?i.key:t==="values"?i.value:[i.key,i.value]),n},!0),jTe=function(r){this.entries=[],this.url=null,r!==void 0&&(DTe(r)?this.parseObject(r):this.parseQuery(typeof r=="string"?t4t(r,0)==="?"?n4t(r,1):r:Ka(r)))};jTe.prototype={type:sS,bindURL:function(r){this.url=r,this.update()},parseObject:function(r){var e=Hzt(r),t,n,i,o,a,c,h;if(e)for(t=CG(r,e),n=t.next;!(i=wP(n,t)).done;){if(o=CG(Gzt(i.value)),a=o.next,(c=wP(a,o)).done||(h=wP(a,o)).done||!wP(a,o).done)throw new Qzt("Expected sequence with length 2");sv(this.entries,{key:Ka(c.value),value:Ka(h.value)})}else for(var d in r)Bzt(r,d)&&sv(this.entries,{key:d,value:Ka(r[d])})},parseQuery:function(r){if(r)for(var e=ITe(r,"&"),t=0,n,i;t<e.length;)n=e[t++],n.length&&(i=ITe(n,"="),sv(this.entries,{key:ATe(r4t(i)),value:ATe(STe(i,"="))}))},serialize:function(){for(var r=this.entries,e=[],t=0,n;t<r.length;)n=r[t++],sv(e,CTe(n.key)+"="+CTe(n.value));return STe(e,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var EP=function(){LTe(this,E_);var e=arguments.length>0?arguments[0]:void 0,t=kTe(this,new jTe(e));b_||(this.size=t.entries.length)},E_=EP.prototype;jzt(E_,{append:function(e,t){var n=Hl(this);w_(arguments.length,2),sv(n.entries,{key:Ka(e),value:Ka(t)}),b_||this.length++,n.updateURL()},delete:function(r){for(var e=Hl(this),t=w_(arguments.length,1),n=e.entries,i=Ka(r),o=t<2?void 0:arguments[1],a=o===void 0?o:Ka(o),c=0;c<n.length;){var h=n[c];if(h.key===i&&(a===void 0||h.value===a)){if(ETe(n,c,1),a!==void 0)break}else c++}b_||(this.size=n.length),e.updateURL()},get:function(e){var t=Hl(this).entries;w_(arguments.length,1);for(var n=Ka(e),i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){var t=Hl(this).entries;w_(arguments.length,1);for(var n=Ka(e),i=[],o=0;o<t.length;o++)t[o].key===n&&sv(i,t[o].value);return i},has:function(e){for(var t=Hl(this).entries,n=w_(arguments.length,1),i=Ka(e),o=n<2?void 0:arguments[1],a=o===void 0?o:Ka(o),c=0;c<t.length;){var h=t[c++];if(h.key===i&&(a===void 0||h.value===a))return!0}return!1},set:function(e,t){var n=Hl(this);w_(arguments.length,1);for(var i=n.entries,o=!1,a=Ka(e),c=Ka(t),h=0,d;h<i.length;h++)d=i[h],d.key===a&&(o?ETe(i,h--,1):(o=!0,d.value=c));o||sv(i,{key:a,value:c}),b_||(this.size=i.length),n.updateURL()},sort:function(){var e=Hl(this);Zzt(e.entries,function(t,n){return t.key>n.key?1:-1}),e.updateURL()},forEach:function(e){for(var t=Hl(this).entries,n=Uzt(e,arguments.length>1?arguments[1]:void 0),i=0,o;i<t.length;)o=t[i++],n(o.value,o.key,this)},keys:function(){return new IG(this,"keys")},values:function(){return new IG(this,"values")},entries:function(){return new IG(this,"entries")}},{enumerable:!0});OTe(E_,Yzt,E_.entries,{name:"entries"});OTe(E_,"toString",function(){return Hl(this).serialize()},{enumerable:!0});b_&&qzt(E_,"size",{get:function(){return Hl(this).entries.length},configurable:!0,enumerable:!0});Fzt(EP,sS);AG({global:!0,constructor:!0,forced:!PTe},{URLSearchParams:EP});!PTe&&SG(aS)&&(MTe=Oc(bTe.has),RTe=Oc(bTe.set),TG=function(r){if(DTe(r)){var e=r.body,t;if(Vzt(e)===sS)return t=r.headers?new aS(r.headers):new aS,MTe(t,"content-type")||RTe(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),$zt(r,{body:xTe(0,Ka(e)),headers:xTe(0,t)})}return r},SG(wTe)&&AG({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return wTe(e,arguments.length>1?TG(arguments[1]):{})}}),SG(SP)&&(bP=function(e){return LTe(this,EG),new SP(e,arguments.length>1?TG(arguments[1]):{})},EG.constructor=bP,bP.prototype=EG,AG({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:bP})));var MTe,RTe,TG,bP;FTe.exports={URLSearchParams:EP,getState:Hl}});var nAe=A(()=>{"use strict";yU();var c4t=te(),YG=fr(),f4t=xP(),KG=Ht(),zTe=kn(),Xl=rt(),MP=En(),Wl=ci(),h4t=wa(),HG=qr(),XG=uB(),I_=Uz(),Fu=Om(),p4t=Jm().codeAt,d4t=_Te(),Kf=wr(),m4t=bs(),v4t=Gl(),XTe=OG(),JTe=vn(),g4t=JTe.set,RP=JTe.getterFor("URL"),y4t=XTe.URLSearchParams,_4t=XTe.getState,lS=KG.URL,WG=KG.TypeError,PP=KG.parseInt,x4t=Math.floor,BTe=Math.pow,Kl=Xl("".charAt),zu=Xl(/./.exec),cS=Xl([].join),w4t=Xl(1 .toString),b4t=Xl([].pop),A_=Xl([].push),LG=Xl("".replace),S4t=Xl([].shift),E4t=Xl("".split),hS=Xl("".slice),OP=Xl("".toLowerCase),I4t=Xl([].unshift),T4t="Invalid authority",DG="Invalid scheme",lv="Invalid host",UTe="Invalid port",QTe=/[a-z]/i,A4t=/[\d+-.a-z]/i,ZG=/\d/,C4t=/^0x/i,M4t=/^[0-7]+$/,R4t=/^\d+$/,eAe=/^[\da-f]+$/i,P4t=/[\0\t\n\r #%/:<>?@[\\\]^|]/,O4t=/[\0\t\n\r #/:<>?@[\\\]^|]/,L4t=/^[\u0000-\u0020]+/,D4t=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,N4t=/[\t\n\r]/g,Zl,k4t=function(r){var e=E4t(r,"."),t,n,i,o,a,c,h;if(e.length&&e[e.length-1]===""&&e.length--,t=e.length,t>4)return r;for(n=[],i=0;i<t;i++){if(o=e[i],o==="")return r;if(a=10,o.length>1&&Kl(o,0)==="0"&&(a=zu(C4t,o)?16:8,o=hS(o,a===8?1:2)),o==="")c=0;else{if(!zu(a===10?R4t:a===8?M4t:eAe,o))return r;c=PP(o,a)}A_(n,c)}for(i=0;i<t;i++)if(c=n[i],i===t-1){if(c>=BTe(256,5-t))return null}else if(c>255)return null;for(h=b4t(n),i=0;i<n.length;i++)h+=n[i]*BTe(256,3-i);return h},q4t=function(r){var e=[0,0,0,0,0,0,0,0],t=0,n=null,i=0,o,a,c,h,d,v,x,S=function(){return Kl(r,i)};if(S()===":"){if(Kl(r,1)!==":")return;i+=2,t++,n=t}for(;S();){if(t===8)return;if(S()===":"){if(n!==null)return;i++,t++,n=t;continue}for(o=a=0;a<4&&zu(eAe,S());)o=o*16+PP(S(),16),i++,a++;if(S()==="."){if(a===0||(i-=a,t>6))return;for(c=0;S();){if(h=null,c>0)if(S()==="."&&c<4)i++;else return;if(!zu(ZG,S()))return;for(;zu(ZG,S());){if(d=PP(S(),10),h===null)h=d;else{if(h===0)return;h=h*10+d}if(h>255)return;i++}e[t]=e[t]*256+h,c++,(c===2||c===4)&&t++}if(c!==4)return;break}else if(S()===":"){if(i++,!S())return}else if(S())return;e[t++]=o}if(n!==null)for(v=t-n,t=7;t!==0&&v>0;)x=e[t],e[t--]=e[n+v-1],e[n+--v]=x;else if(t!==8)return;return e},j4t=function(r){for(var e=null,t=1,n=null,i=0,o=0;o<8;o++)r[o]!==0?(i>t&&(e=n,t=i),n=null,i=0):(n===null&&(n=o),++i);return i>t&&(e=n,t=i),e},uS=function(r){var e,t,n,i;if(typeof r=="number"){for(e=[],t=0;t<4;t++)I4t(e,r%256),r=x4t(r/256);return cS(e,".")}else if(typeof r=="object"){for(e="",n=j4t(r),t=0;t<8;t++)i&&r[t]===0||(i&&(i=!1),n===t?(e+=t?":":"::",i=!0):(e+=w4t(r[t],16),t<7&&(e+=":")));return"["+e+"]"}return r},CP={},tAe=XG({},CP,{" ":1,"\"":1,"<":1,">":1,"`":1}),rAe=XG({},tAe,{"#":1,"?":1,"{":1,"}":1}),NG=XG({},rAe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),id=function(r,e){var t=p4t(r,0);return t>32&&t<127&&!HG(e,r)?r:encodeURIComponent(r)},IP={ftp:21,file:null,http:80,https:443,ws:80,wss:443},fS=function(r,e){var t;return r.length===2&&zu(QTe,Kl(r,0))&&((t=Kl(r,1))===":"||!e&&t==="|")},VTe=function(r){var e;return r.length>1&&fS(hS(r,0,2))&&(r.length===2||(e=Kl(r,2))==="/"||e==="\\"||e==="?"||e==="#")},F4t=function(r){return r==="."||OP(r)==="%2e"},z4t=function(r){return r=OP(r),r===".."||r==="%2e."||r===".%2e"||r==="%2e%2e"},kG={},GTe={},qG={},$Te={},HTe={},jG={},WTe={},ZTe={},TP={},AP={},FG={},zG={},BG={},UG={},YTe={},VG={},T_={},Lc={},KTe={},uv={},Yf={},JG=function(r,e,t){var n=Kf(r),i,o,a;if(e){if(o=this.parse(n),o)throw new WG(o);this.searchParams=null}else{if(t!==void 0&&(i=new JG(t,!0)),o=this.parse(n,null,i),o)throw new WG(o);a=_4t(new y4t),a.bindURL(this),this.searchParams=a}};JG.prototype={type:"URL",parse:function(r,e,t){var n=this,i=e||kG,o=0,a="",c=!1,h=!1,d=!1,v,x,S,T;for(r=Kf(r),e||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,r=LG(r,L4t,""),r=LG(r,D4t,"$1")),r=LG(r,N4t,""),v=I_(r);o<=v.length;){switch(x=v[o],i){case kG:if(x&&zu(QTe,x))a+=OP(x),i=GTe;else{if(e)return DG;i=qG;continue}break;case GTe:if(x&&(zu(A4t,x)||x==="+"||x==="-"||x==="."))a+=OP(x);else if(x===":"){if(e&&(n.isSpecial()!==HG(IP,a)||a==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=a,e){n.isSpecial()&&IP[n.scheme]===n.port&&(n.port=null);return}a="",n.scheme==="file"?i=UG:n.isSpecial()&&t&&t.scheme===n.scheme?i=$Te:n.isSpecial()?i=ZTe:v[o+1]==="/"?(i=HTe,o++):(n.cannotBeABaseURL=!0,A_(n.path,""),i=KTe)}else{if(e)return DG;a="",i=qG,o=0;continue}break;case qG:if(!t||t.cannotBeABaseURL&&x!=="#")return DG;if(t.cannotBeABaseURL&&x==="#"){n.scheme=t.scheme,n.path=Fu(t.path),n.query=t.query,n.fragment="",n.cannotBeABaseURL=!0,i=Yf;break}i=t.scheme==="file"?UG:jG;continue;case $Te:if(x==="/"&&v[o+1]==="/")i=TP,o++;else{i=jG;continue}break;case HTe:if(x==="/"){i=AP;break}else{i=Lc;continue}case jG:if(n.scheme=t.scheme,x===Zl)n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=Fu(t.path),n.query=t.query;else if(x==="/"||x==="\\"&&n.isSpecial())i=WTe;else if(x==="?")n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=Fu(t.path),n.query="",i=uv;else if(x==="#")n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=Fu(t.path),n.query=t.query,n.fragment="",i=Yf;else{n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=Fu(t.path),n.path.length--,i=Lc;continue}break;case WTe:if(n.isSpecial()&&(x==="/"||x==="\\"))i=TP;else if(x==="/")i=AP;else{n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,i=Lc;continue}break;case ZTe:if(i=TP,x!=="/"||Kl(a,o+1)!=="/")continue;o++;break;case TP:if(x!=="/"&&x!=="\\"){i=AP;continue}break;case AP:if(x==="@"){c&&(a="%40"+a),c=!0,S=I_(a);for(var L=0;L<S.length;L++){var k=S[L];if(k===":"&&!d){d=!0;continue}var R=id(k,NG);d?n.password+=R:n.username+=R}a=""}else if(x===Zl||x==="/"||x==="?"||x==="#"||x==="\\"&&n.isSpecial()){if(c&&a==="")return T4t;o-=I_(a).length+1,a="",i=FG}else a+=x;break;case FG:case zG:if(e&&n.scheme==="file"){i=VG;continue}else if(x===":"&&!h){if(a==="")return lv;if(T=n.parseHost(a),T)return T;if(a="",i=BG,e===zG)return}else if(x===Zl||x==="/"||x==="?"||x==="#"||x==="\\"&&n.isSpecial()){if(n.isSpecial()&&a==="")return lv;if(e&&a===""&&(n.includesCredentials()||n.port!==null))return;if(T=n.parseHost(a),T)return T;if(a="",i=T_,e)return;continue}else x==="["?h=!0:x==="]"&&(h=!1),a+=x;break;case BG:if(zu(ZG,x))a+=x;else if(x===Zl||x==="/"||x==="?"||x==="#"||x==="\\"&&n.isSpecial()||e){if(a!==""){var D=PP(a,10);if(D>65535)return UTe;n.port=n.isSpecial()&&D===IP[n.scheme]?null:D,a=""}if(e)return;i=T_;continue}else return UTe;break;case UG:if(n.scheme="file",x==="/"||x==="\\")i=YTe;else if(t&&t.scheme==="file")switch(x){case Zl:n.host=t.host,n.path=Fu(t.path),n.query=t.query;break;case"?":n.host=t.host,n.path=Fu(t.path),n.query="",i=uv;break;case"#":n.host=t.host,n.path=Fu(t.path),n.query=t.query,n.fragment="",i=Yf;break;default:VTe(cS(Fu(v,o),""))||(n.host=t.host,n.path=Fu(t.path),n.shortenPath()),i=Lc;continue;}else{i=Lc;continue}break;case YTe:if(x==="/"||x==="\\"){i=VG;break}t&&t.scheme==="file"&&!VTe(cS(Fu(v,o),""))&&(fS(t.path[0],!0)?A_(n.path,t.path[0]):n.host=t.host),i=Lc;continue;case VG:if(x===Zl||x==="/"||x==="\\"||x==="?"||x==="#"){if(!e&&fS(a))i=Lc;else if(a===""){if(n.host="",e)return;i=T_}else{if(T=n.parseHost(a),T)return T;if(n.host==="localhost"&&(n.host=""),e)return;a="",i=T_}continue}else a+=x;break;case T_:if(n.isSpecial()){if(i=Lc,x!=="/"&&x!=="\\")continue}else if(!e&&x==="?")n.query="",i=uv;else if(!e&&x==="#")n.fragment="",i=Yf;else if(x!==Zl&&(i=Lc,x!=="/"))continue;break;case Lc:if(x===Zl||x==="/"||x==="\\"&&n.isSpecial()||!e&&(x==="?"||x==="#")){if(z4t(a)?(n.shortenPath(),x!=="/"&&!(x==="\\"&&n.isSpecial())&&A_(n.path,"")):F4t(a)?x!=="/"&&!(x==="\\"&&n.isSpecial())&&A_(n.path,""):(n.scheme==="file"&&!n.path.length&&fS(a)&&(n.host&&(n.host=""),a=Kl(a,0)+":"),A_(n.path,a)),a="",n.scheme==="file"&&(x===Zl||x==="?"||x==="#"))for(;n.path.length>1&&n.path[0]==="";)S4t(n.path);x==="?"?(n.query="",i=uv):x==="#"&&(n.fragment="",i=Yf)}else a+=id(x,rAe);break;case KTe:x==="?"?(n.query="",i=uv):x==="#"?(n.fragment="",i=Yf):x!==Zl&&(n.path[0]+=id(x,CP));break;case uv:!e&&x==="#"?(n.fragment="",i=Yf):x!==Zl&&(x==="'"&&n.isSpecial()?n.query+="%27":x==="#"?n.query+="%23":n.query+=id(x,CP));break;case Yf:x!==Zl&&(n.fragment+=id(x,tAe));break;}o++}},parseHost:function(r){var e,t,n;if(Kl(r,0)==="["){if(Kl(r,r.length-1)!=="]"||(e=q4t(hS(r,1,-1)),!e))return lv;this.host=e}else if(this.isSpecial()){if(r=d4t(r),zu(P4t,r)||(e=k4t(r),e===null))return lv;this.host=e}else{if(zu(O4t,r))return lv;for(e="",t=I_(r),n=0;n<t.length;n++)e+=id(t[n],CP);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return HG(IP,this.scheme)},shortenPath:function(){var r=this.path,e=r.length;e&&(this.scheme!=="file"||e!==1||!fS(r[0],!0))&&r.length--},serialize:function(){var r=this,e=r.scheme,t=r.username,n=r.password,i=r.host,o=r.port,a=r.path,c=r.query,h=r.fragment,d=e+":";return i!==null?(d+="//",r.includesCredentials()&&(d+=t+(n?":"+n:"")+"@"),d+=uS(i),o!==null&&(d+=":"+o)):e==="file"&&(d+="//"),d+=r.cannotBeABaseURL?a[0]:a.length?"/"+cS(a,"/"):"",c!==null&&(d+="?"+c),h!==null&&(d+="#"+h),d},setHref:function(r){var e=this.parse(r);if(e)throw new WG(e);this.searchParams.update()},getOrigin:function(){var r=this.scheme,e=this.port;if(r==="blob")try{return new C_(r.path[0]).origin}catch(t){return"null"}return r==="file"||!this.isSpecial()?"null":r+"://"+uS(this.host)+(e!==null?":"+e:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(r){this.parse(Kf(r)+":",kG)},getUsername:function(){return this.username},setUsername:function(r){var e=I_(Kf(r));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var t=0;t<e.length;t++)this.username+=id(e[t],NG)}},getPassword:function(){return this.password},setPassword:function(r){var e=I_(Kf(r));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var t=0;t<e.length;t++)this.password+=id(e[t],NG)}},getHost:function(){var r=this.host,e=this.port;return r===null?"":e===null?uS(r):uS(r)+":"+e},setHost:function(r){this.cannotBeABaseURL||this.parse(r,FG)},getHostname:function(){var r=this.host;return r===null?"":uS(r)},setHostname:function(r){this.cannotBeABaseURL||this.parse(r,zG)},getPort:function(){var r=this.port;return r===null?"":Kf(r)},setPort:function(r){this.cannotHaveUsernamePasswordPort()||(r=Kf(r),r===""?this.port=null:this.parse(r,BG))},getPathname:function(){var r=this.path;return this.cannotBeABaseURL?r[0]:r.length?"/"+cS(r,"/"):""},setPathname:function(r){this.cannotBeABaseURL||(this.path=[],this.parse(r,T_))},getSearch:function(){var r=this.query;return r?"?"+r:""},setSearch:function(r){r=Kf(r),r===""?this.query=null:(Kl(r,0)==="?"&&(r=hS(r,1)),this.query="",this.parse(r,uv)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var r=this.fragment;return r?"#"+r:""},setHash:function(r){if(r=Kf(r),r===""){this.fragment=null;return}Kl(r,0)==="#"&&(r=hS(r,1)),this.fragment="",this.parse(r,Yf)},update:function(){this.query=this.searchParams.serialize()||null}};var C_=function(e){var t=h4t(this,Xa),n=v4t(arguments.length,1)>1?arguments[1]:void 0,i=g4t(t,new JG(e,!1,n));YG||(t.href=i.serialize(),t.origin=i.getOrigin(),t.protocol=i.getProtocol(),t.username=i.getUsername(),t.password=i.getPassword(),t.host=i.getHost(),t.hostname=i.getHostname(),t.port=i.getPort(),t.pathname=i.getPathname(),t.search=i.getSearch(),t.searchParams=i.getSearchParams(),t.hash=i.getHash())},Xa=C_.prototype,Yl=function(r,e){return{get:function(){return RP(this)[r]()},set:e&&function(t){return RP(this)[e](t)},configurable:!0,enumerable:!0}};YG&&(Wl(Xa,"href",Yl("serialize","setHref")),Wl(Xa,"origin",Yl("getOrigin")),Wl(Xa,"protocol",Yl("getProtocol","setProtocol")),Wl(Xa,"username",Yl("getUsername","setUsername")),Wl(Xa,"password",Yl("getPassword","setPassword")),Wl(Xa,"host",Yl("getHost","setHost")),Wl(Xa,"hostname",Yl("getHostname","setHostname")),Wl(Xa,"port",Yl("getPort","setPort")),Wl(Xa,"pathname",Yl("getPathname","setPathname")),Wl(Xa,"search",Yl("getSearch","setSearch")),Wl(Xa,"searchParams",Yl("getSearchParams")),Wl(Xa,"hash",Yl("getHash","setHash")));MP(Xa,"toJSON",function(){return RP(this).serialize()},{enumerable:!0});MP(Xa,"toString",function(){return RP(this).serialize()},{enumerable:!0});lS&&(GG=lS.createObjectURL,$G=lS.revokeObjectURL,GG&&MP(C_,"createObjectURL",zTe(GG,lS)),$G&&MP(C_,"revokeObjectURL",zTe($G,lS)));var GG,$G;m4t(C_,"URL");c4t({global:!0,constructor:!0,forced:!f4t,sham:!YG},{URL:C_})});var iAe=A(()=>{"use strict";nAe()});var sAe=A(()=>{"use strict";var B4t=te(),U4t=_r(),V4t=ft(),G4t=Gl(),oAe=wr(),$4t=xP(),aAe=U4t("URL"),H4t=$4t&&V4t(function(){aAe.canParse()});B4t({target:"URL",stat:!0,forced:!H4t},{canParse:function(e){var t=G4t(arguments.length,1),n=oAe(e),i=t<2||arguments[1]===void 0?void 0:oAe(arguments[1]);try{return!!new aAe(n,i)}catch(o){return!1}}})});var lAe=A(()=>{"use strict";var W4t=te(),Z4t=Rt();W4t({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return Z4t(URL.prototype.toString,this)}})});var uAe=A(()=>{"use strict";OG()});var pAe=A(()=>{"use strict";var Y4t=En(),LP=rt(),cAe=wr(),K4t=Gl(),hAe=URLSearchParams,DP=hAe.prototype,X4t=LP(DP.append),fAe=LP(DP.delete),J4t=LP(DP.forEach),Q4t=LP([].push),QG=new hAe("a=1&a=2&b=3");QG.delete("a",1);QG.delete("b",void 0);QG+""!="a=2"&&Y4t(DP,"delete",function(r){var e=arguments.length,t=e<2?void 0:arguments[1];if(e&&t===void 0)return fAe(this,r);var n=[];J4t(this,function(x,S){Q4t(n,{key:S,value:x})}),K4t(e,1);for(var i=cAe(r),o=cAe(t),a=0,c=0,h=!1,d=n.length,v;a<d;)v=n[a++],h||v.key===i?(h=!0,fAe(this,v.key)):c++;for(;c<d;)v=n[c++],v.key===i&&v.value===o||X4t(this,v.key,v.value)},{enumerable:!0,unsafe:!0})});var gAe=A(()=>{"use strict";var eBt=En(),mAe=rt(),tBt=wr(),rBt=Gl(),vAe=URLSearchParams,e$=vAe.prototype,nBt=mAe(e$.getAll),iBt=mAe(e$.has),dAe=new vAe("a=1");(dAe.has("a",2)||!dAe.has("a",void 0))&&eBt(e$,"has",function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&n===void 0)return iBt(this,e);var i=nBt(this,e);rBt(t,1);for(var o=tBt(n),a=0;a<i.length;)if(i[a++]===o)return!0;return!1},{enumerable:!0,unsafe:!0})});var yAe=A(()=>{"use strict";var oBt=fr(),aBt=rt(),sBt=ci(),t$=URLSearchParams.prototype,lBt=aBt(t$.forEach);oBt&&!("size"in t$)&&sBt(t$,"size",{get:function(){var e=0;return lBt(this,function(){e++}),e},configurable:!0,enumerable:!0})});var xAe=A((kEr,_Ae)=>{"use strict";Are();Dre();Nre();kre();qre();jre();Fre();zre();Bre();Ure();Vre();Gre();$re();Hre();Wre();yne();Sne();Mz();Vne();Lz();Kne();eie();rie();oie();aie();lie();cie();jz();Fz();mie();vie();_ie();Cie();Mie();Pie();Oie();Vb();Qie();noe();ioe();aoe();loe();poe();moe();goe();xoe();woe();qoe();zoe();Boe();o4();s4();l4();$oe();Hoe();Woe();c4();Eae();kae();$ae();Wae();Zae();Kae();Qae();ese();cse();fse();vse();xse();bse();Cse();Pse();Nse();q4();mz();kse();pM();ele();nle();ole();ale();sle();cle();hle();ple();mle();gle();_le();xle();wle();ble();Ile();Cle();Mle();Rle();Ble();Ule();Gle();Hle();Wle();Zle();Yle();Kle();rue();cue();mue();wue();Eue();Mue();Rue();Lue();Nue();que();jue();Gue();$ue();Hue();Yue();Kue();Xue();Que();hB();tce();nce();oce();sce();uce();cce();fce();hce();yce();_ce();xce();Sce();Ece();Tce();Cce();jfe();YB();KB();Vfe();Gfe();Xfe();ehe();the();ohe();ahe();she();lhe();uhe();che();fhe();vhe();yhe();_he();Nhe();qhe();NM();Vhe();$he();Zhe();Xhe();Qhe();epe();ipe();fpe();dpe();vpe();gU();yU();Rpe();IU();Bpe();Upe();Hpe();Wpe();Qpe();DU();ade();hde();gde();_de();zU();Tde();Pde();kde();zde();Bde();Ude();Vde();Gde();$de();Hde();Wde();Zde();Yde();Kde();Xde();Jde();Tme();Ame();Cme();Mme();Rme();Pme();Ome();Lme();Dme();t3();qme();Fme();Bme();Hme();Zme();Kme();r3();n3();eve();tve();nve();ove();cve();hve();dve();vve();yve();xve();bve();Eve();Rve();Ove();Dve();zve();Vve();Zve();d3();m3();Kve();g3();tge();lR();_ge();xge();bge();Yge();Kge();Xge();Jge();Qge();eye();rye();nye();aye();sye();cye();fye();dye();mye();vye();gye();Iye();Tye();Rye();Hye();Zye();a_e();f_e();E_e();C_e();P_e();O_e();D_e();N_e();B_e();U_e();G_e();$_e();H_e();W_e();Z_e();X_e();J_e();o0e();f0e();p0e();d0e();m0e();g0e();y0e();S0e();I0e();A0e();C0e();P0e();O0e();L0e();j0e();Z0e();X0e();Q0e();exe();rxe();nxe();lxe();uxe();cxe();fxe();hxe();dxe();mxe();vxe();yxe();_xe();wxe();Exe();kxe();$xe();Wxe();Yxe();Kxe();Jxe();Qxe();ewe();iwe();owe();lwe();cwe();fwe();pwe();mwe();vwe();ywe();_we();xwe();bwe();Ewe();Iwe();Twe();Awe();Cwe();Rwe();Pwe();Owe();Lwe();Dwe();Nwe();kwe();qwe();Bwe();Uwe();Vwe();$we();Hwe();Wwe();Xwe();Jwe();Qwe();ebe();mbe();vbe();gbe();ybe();_be();Ibe();Abe();Mbe();Lbe();Nbe();qbe();zbe();Ube();Gbe();Hbe();Ybe();Kbe();v1e();w1e();b1e();E1e();I1e();T1e();M1e();R1e();O1e();L1e();N1e();k1e();j1e();F1e();B1e();V1e();G1e();$1e();H1e();Z1e();Y1e();X1e();J1e();Q1e();iSe();uSe();CSe();MSe();RSe();PSe();OSe();LSe();DSe();kSe();qSe();GSe();$Se();HSe();WSe();ZSe();YSe();KSe();XSe();QSe();eEe();rEe();iEe();oEe();aEe();lEe();uEe();cEe();fEe();hEe();pEe();vEe();gEe();yEe();xEe();wEe();EEe();IEe();TEe();AEe();kEe();$Ee();JEe();iIe();vIe();SIe();IIe();kIe();qIe();FIe();tTe();lTe();iAe();sAe();lAe();uAe();pAe();gAe();yAe();_Ae.exports=xC()});var bAe=A((qEr,wAe)=>{"use strict";wAe.exports=xAe()});var r$=A((jEr,SAe)=>{"use strict";SAe.exports=function(e,t){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(t,i)}}});var Cs=A((FEr,TAe)=>{"use strict";var uBt=r$(),cv=Object.prototype.toString;function o$(r){return cv.call(r)==="[object Array]"}function n$(r){return typeof r=="undefined"}function cBt(r){return r!==null&&!n$(r)&&r.constructor!==null&&!n$(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function fBt(r){return cv.call(r)==="[object ArrayBuffer]"}function hBt(r){return typeof FormData!="undefined"&&r instanceof FormData}function pBt(r){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&r.buffer instanceof ArrayBuffer,e}function dBt(r){return typeof r=="string"}function mBt(r){return typeof r=="number"}function EAe(r){return r!==null&&typeof r=="object"}function NP(r){if(cv.call(r)!=="[object Object]")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}function vBt(r){return cv.call(r)==="[object Date]"}function gBt(r){return cv.call(r)==="[object File]"}function yBt(r){return cv.call(r)==="[object Blob]"}function IAe(r){return cv.call(r)==="[object Function]"}function _Bt(r){return EAe(r)&&IAe(r.pipe)}function xBt(r){return typeof URLSearchParams!="undefined"&&r instanceof URLSearchParams}function wBt(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function bBt(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function a$(r,e){if(!(r===null||typeof r=="undefined"))if(typeof r!="object"&&(r=[r]),o$(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function i$(){var r={};function e(i,o){NP(r[o])&&NP(i)?r[o]=i$(r[o],i):NP(i)?r[o]=i$({},i):o$(i)?r[o]=i.slice():r[o]=i}for(var t=0,n=arguments.length;t<n;t++)a$(arguments[t],e);return r}function SBt(r,e,t){return a$(e,function(i,o){t&&typeof i=="function"?r[o]=uBt(i,t):r[o]=i}),r}function EBt(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}TAe.exports={isArray:o$,isArrayBuffer:fBt,isBuffer:cBt,isFormData:hBt,isArrayBufferView:pBt,isString:dBt,isNumber:mBt,isObject:EAe,isPlainObject:NP,isUndefined:n$,isDate:vBt,isFile:gBt,isBlob:yBt,isFunction:IAe,isStream:_Bt,isURLSearchParams:xBt,isStandardBrowserEnv:bBt,forEach:a$,merge:i$,extend:SBt,trim:wBt,stripBOM:EBt}});var s$=A((zEr,CAe)=>{"use strict";var M_=Cs();function AAe(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}CAe.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(M_.isURLSearchParams(t))i=t.toString();else{var o=[];M_.forEach(t,function(h,d){h===null||typeof h=="undefined"||(M_.isArray(h)?d=d+"[]":h=[h],M_.forEach(h,function(x){M_.isDate(x)?x=x.toISOString():M_.isObject(x)&&(x=JSON.stringify(x)),o.push(AAe(d)+"="+AAe(x))}))}),i=o.join("&")}if(i){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var RAe=A((BEr,MAe)=>{"use strict";var IBt=Cs();function kP(){this.handlers=[]}kP.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};kP.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};kP.prototype.forEach=function(e){IBt.forEach(this.handlers,function(n){n!==null&&e(n)})};MAe.exports=kP});var OAe=A((UEr,PAe)=>{"use strict";var TBt=Cs();PAe.exports=function(e,t){TBt.forEach(e,function(i,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[o])})}});var l$=A((VEr,LAe)=>{"use strict";LAe.exports=function(e,t,n,i,o){return e.config=t,n&&(e.code=n),e.request=i,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var u$=A((GEr,DAe)=>{"use strict";var ABt=l$();DAe.exports=function(e,t,n,i,o){var a=new Error(e);return ABt(a,t,n,i,o)}});var kAe=A(($Er,NAe)=>{"use strict";var CBt=u$();NAe.exports=function(e,t,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(CBt("Request failed with status code "+n.status,n.config,null,n.request,n))}});var jAe=A((HEr,qAe)=>{"use strict";var qP=Cs();qAe.exports=qP.isStandardBrowserEnv()?function(){return{write:function(t,n,i,o,a,c){var h=[];h.push(t+"="+encodeURIComponent(n)),qP.isNumber(i)&&h.push("expires="+new Date(i).toGMTString()),qP.isString(o)&&h.push("path="+o),qP.isString(a)&&h.push("domain="+a),c===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(t){var n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var zAe=A((WEr,FAe)=>{"use strict";FAe.exports=function(e){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var UAe=A((ZEr,BAe)=>{"use strict";BAe.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}});var GAe=A((YEr,VAe)=>{"use strict";var MBt=zAe(),RBt=UAe();VAe.exports=function(e,t){return e&&!MBt(t)?RBt(e,t):t}});var HAe=A((KEr,$Ae)=>{"use strict";var c$=Cs(),PBt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];$Ae.exports=function(e){var t={},n,i,o;return e&&c$.forEach(e.split(`
`),function(c){if(o=c.indexOf(":"),n=c$.trim(c.substr(0,o)).toLowerCase(),i=c$.trim(c.substr(o+1)),n){if(t[n]&&PBt.indexOf(n)>=0)return;n==="set-cookie"?t[n]=(t[n]?t[n]:[]).concat([i]):t[n]=t[n]?t[n]+", "+i:i}}),t}});var YAe=A((XEr,ZAe)=>{"use strict";var WAe=Cs();ZAe.exports=WAe.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),n;function i(o){var a=o;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(a){var c=WAe.isString(a)?i(a):a;return c.protocol===n.protocol&&c.host===n.host}}():function(){return function(){return!0}}()});var pS=A((JEr,KAe)=>{"use strict";function f$(r){this.message=r}f$.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};f$.prototype.__CANCEL__=!0;KAe.exports=f$});var p$=A((QEr,XAe)=>{"use strict";var jP=Cs(),OBt=kAe(),LBt=jAe(),DBt=s$(),NBt=GAe(),kBt=HAe(),qBt=YAe(),h$=u$(),jBt=dS(),FBt=pS();XAe.exports=function(e){return new Promise(function(n,i){var o=e.data,a=e.headers,c=e.responseType,h;function d(){e.cancelToken&&e.cancelToken.unsubscribe(h),e.signal&&e.signal.removeEventListener("abort",h)}jP.isFormData(o)&&delete a["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var x=e.auth.username||"",S=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.Authorization="Basic "+btoa(x+":"+S)}var T=NBt(e.baseURL,e.url);v.open(e.method.toUpperCase(),DBt(T,e.params,e.paramsSerializer),!0),v.timeout=e.timeout;function L(){if(v){var R="getAllResponseHeaders"in v?kBt(v.getAllResponseHeaders()):null,D=!c||c==="text"||c==="json"?v.responseText:v.response,j={data:D,status:v.status,statusText:v.statusText,headers:R,config:e,request:v};OBt(function($){n($),d()},function($){i($),d()},j),v=null}}if("onloadend"in v?v.onloadend=L:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(L)},v.onabort=function(){v&&(i(h$("Request aborted",e,"ECONNABORTED",v)),v=null)},v.onerror=function(){i(h$("Network Error",e,null,v)),v=null},v.ontimeout=function(){var D=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",j=e.transitional||jBt.transitional;e.timeoutErrorMessage&&(D=e.timeoutErrorMessage),i(h$(D,e,j.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",v)),v=null},jP.isStandardBrowserEnv()){var k=(e.withCredentials||qBt(T))&&e.xsrfCookieName?LBt.read(e.xsrfCookieName):void 0;k&&(a[e.xsrfHeaderName]=k)}"setRequestHeader"in v&&jP.forEach(a,function(D,j){typeof o=="undefined"&&j.toLowerCase()==="content-type"?delete a[j]:v.setRequestHeader(j,D)}),jP.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),c&&c!=="json"&&(v.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&v.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(h=function(R){v&&(i(!R||R&&R.type?new FBt("canceled"):R),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(h),e.signal&&(e.signal.aborted?h():e.signal.addEventListener("abort",h))),o||(o=null),v.send(o)})}});var dS=A((eIr,eCe)=>{"use strict";var Xo=Cs(),JAe=OAe(),zBt=l$(),BBt={"Content-Type":"application/x-www-form-urlencoded"};function QAe(r,e){!Xo.isUndefined(r)&&Xo.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function UBt(){var r;return typeof XMLHttpRequest!="undefined"?r=p$():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(r=p$()),r}function VBt(r,e,t){if(Xo.isString(r))try{return(e||JSON.parse)(r),Xo.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var FP={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:UBt(),transformRequest:[function(e,t){return JAe(t,"Accept"),JAe(t,"Content-Type"),Xo.isFormData(e)||Xo.isArrayBuffer(e)||Xo.isBuffer(e)||Xo.isStream(e)||Xo.isFile(e)||Xo.isBlob(e)?e:Xo.isArrayBufferView(e)?e.buffer:Xo.isURLSearchParams(e)?(QAe(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Xo.isObject(e)||t&&t["Content-Type"]==="application/json"?(QAe(t,"application/json"),VBt(e)):e}],transformResponse:[function(e){var t=this.transitional||FP.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&Xo.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?zBt(a,this,"E_JSON_PARSE"):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Xo.forEach(["delete","get","head"],function(e){FP.headers[e]={}});Xo.forEach(["post","put","patch"],function(e){FP.headers[e]=Xo.merge(BBt)});eCe.exports=FP});var rCe=A((tIr,tCe)=>{"use strict";var GBt=Cs(),$Bt=dS();tCe.exports=function(e,t,n){var i=this||$Bt;return GBt.forEach(n,function(a){e=a.call(i,e,t)}),e}});var d$=A((rIr,nCe)=>{"use strict";nCe.exports=function(e){return!!(e&&e.__CANCEL__)}});var aCe=A((nIr,oCe)=>{"use strict";var iCe=Cs(),m$=rCe(),HBt=d$(),WBt=dS(),ZBt=pS();function v$(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new ZBt("canceled")}oCe.exports=function(e){v$(e),e.headers=e.headers||{},e.data=m$.call(e,e.data,e.headers,e.transformRequest),e.headers=iCe.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),iCe.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||WBt.adapter;return t(e).then(function(i){return v$(e),i.data=m$.call(e,i.data,i.headers,e.transformResponse),i},function(i){return HBt(i)||(v$(e),i&&i.response&&(i.response.data=m$.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var g$=A((iIr,sCe)=>{"use strict";var ul=Cs();sCe.exports=function(e,t){t=t||{};var n={};function i(v,x){return ul.isPlainObject(v)&&ul.isPlainObject(x)?ul.merge(v,x):ul.isPlainObject(x)?ul.merge({},x):ul.isArray(x)?x.slice():x}function o(v){if(ul.isUndefined(t[v])){if(!ul.isUndefined(e[v]))return i(void 0,e[v])}else return i(e[v],t[v])}function a(v){if(!ul.isUndefined(t[v]))return i(void 0,t[v])}function c(v){if(ul.isUndefined(t[v])){if(!ul.isUndefined(e[v]))return i(void 0,e[v])}else return i(void 0,t[v])}function h(v){if(v in t)return i(e[v],t[v]);if(v in e)return i(void 0,e[v])}var d={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:h};return ul.forEach(Object.keys(e).concat(Object.keys(t)),function(x){var S=d[x]||o,T=S(x);ul.isUndefined(T)&&S!==h||(n[x]=T)}),n}});var y$=A((oIr,lCe)=>{lCe.exports={version:"0.24.0"}});var fCe=A((aIr,cCe)=>{"use strict";var YBt=y$().version,_$={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){_$[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var uCe={};_$.transitional=function(e,t,n){function i(o,a){return"[Axios v"+YBt+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return function(o,a,c){if(e===!1)throw new Error(i(a," has been removed"+(t?" in "+t:"")));return t&&!uCe[a]&&(uCe[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,a,c):!0}};function KBt(r,e,t){if(typeof r!="object")throw new TypeError("options must be an object");for(var n=Object.keys(r),i=n.length;i-->0;){var o=n[i],a=e[o];if(a){var c=r[o],h=c===void 0||a(c,o,r);if(h!==!0)throw new TypeError("option "+o+" must be "+h);continue}if(t!==!0)throw Error("Unknown option "+o)}}cCe.exports={assertOptions:KBt,validators:_$}});var gCe=A((sIr,vCe)=>{"use strict";var dCe=Cs(),XBt=s$(),hCe=RAe(),pCe=aCe(),zP=g$(),mCe=fCe(),R_=mCe.validators;function mS(r){this.defaults=r,this.interceptors={request:new hCe,response:new hCe}}mS.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=zP(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&mCe.assertOptions(t,{silentJSONParsing:R_.transitional(R_.boolean),forcedJSONParsing:R_.transitional(R_.boolean),clarifyTimeoutError:R_.transitional(R_.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(e)===!1||(i=i&&S.synchronous,n.unshift(S.fulfilled,S.rejected))});var o=[];this.interceptors.response.forEach(function(S){o.push(S.fulfilled,S.rejected)});var a;if(!i){var c=[pCe,void 0];for(Array.prototype.unshift.apply(c,n),c=c.concat(o),a=Promise.resolve(e);c.length;)a=a.then(c.shift(),c.shift());return a}for(var h=e;n.length;){var d=n.shift(),v=n.shift();try{h=d(h)}catch(x){v(x);break}}try{a=pCe(h)}catch(x){return Promise.reject(x)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};mS.prototype.getUri=function(e){return e=zP(this.defaults,e),XBt(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};dCe.forEach(["delete","get","head","options"],function(e){mS.prototype[e]=function(t,n){return this.request(zP(n||{},{method:e,url:t,data:(n||{}).data}))}});dCe.forEach(["post","put","patch"],function(e){mS.prototype[e]=function(t,n,i){return this.request(zP(i||{},{method:e,url:t,data:n}))}});vCe.exports=mS});var _Ce=A((lIr,yCe)=>{"use strict";var JBt=pS();function P_(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var t=this;this.promise.then(function(n){if(t._listeners){var i,o=t._listeners.length;for(i=0;i<o;i++)t._listeners[i](n);t._listeners=null}}),this.promise.then=function(n){var i,o=new Promise(function(a){t.subscribe(a),i=a}).then(n);return o.cancel=function(){t.unsubscribe(i)},o},r(function(i){t.reason||(t.reason=new JBt(i),e(t.reason))})}P_.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};P_.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};P_.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}};P_.source=function(){var e,t=new P_(function(i){e=i});return{token:t,cancel:e}};yCe.exports=P_});var wCe=A((uIr,xCe)=>{"use strict";xCe.exports=function(e){return function(n){return e.apply(null,n)}}});var SCe=A((cIr,bCe)=>{"use strict";bCe.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var TCe=A((fIr,x$)=>{"use strict";var ECe=Cs(),QBt=r$(),BP=gCe(),eUt=g$(),tUt=dS();function ICe(r){var e=new BP(r),t=QBt(BP.prototype.request,e);return ECe.extend(t,BP.prototype,e),ECe.extend(t,e),t.create=function(i){return ICe(eUt(r,i))},t}var Dc=ICe(tUt);Dc.Axios=BP;Dc.Cancel=pS();Dc.CancelToken=_Ce();Dc.isCancel=d$();Dc.VERSION=y$().version;Dc.all=function(e){return Promise.all(e)};Dc.spread=wCe();Dc.isAxiosError=SCe();x$.exports=Dc;x$.exports.default=Dc});var vS=A((hIr,ACe)=>{ACe.exports=TCe()});var MCe=A((w$,b$)=>{(function(r,e){typeof w$=="object"&&typeof b$!="undefined"?b$.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self,r.maplibregl=e())})(w$,function(){"use strict";var r={},e={};function t(i,o,a){if(e[i]=a,i==="index"){var c="var sharedModule = {}; ("+e.shared+")(sharedModule); ("+e.worker+")(sharedModule);",h={};return e.shared(h),e.index(r,h),typeof window!="undefined"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([c],{type:"text/javascript"}))),r}}t("shared",["exports"],function(i){"use strict";function o(u,l,f,m){return new(f||(f=Promise))(function(_,E){function I(q){try{P(m.next(q))}catch(F){E(F)}}function C(q){try{P(m.throw(q))}catch(F){E(F)}}function P(q){var F;q.done?_(q.value):(F=q.value,F instanceof f?F:new f(function(U){U(F)})).then(I,C)}P((m=m.apply(u,l||[])).next())})}function a(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}typeof SuppressedError=="function"&&SuppressedError;var c=h;function h(u,l){this.x=u,this.y=l}h.prototype={clone:function(){return new h(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,l){return this.clone()._rotateAround(u,l)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var l=u.x-this.x,f=u.y-this.y;return l*l+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,l){return Math.atan2(this.x*l-this.y*u,this.x*u+this.y*l)},_matMult:function(u){var l=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=l,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var l=Math.cos(u),f=Math.sin(u),m=f*this.x+l*this.y;return this.x=l*this.x-f*this.y,this.y=m,this},_rotateAround:function(u,l){var f=Math.cos(u),m=Math.sin(u),_=l.y+m*(this.x-l.x)+f*(this.y-l.y);return this.x=l.x+f*(this.x-l.x)-m*(this.y-l.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(u){return u instanceof h?u:Array.isArray(u)?new h(u[0],u[1]):u};var d=a(c),v=x;function x(u,l,f,m){this.cx=3*u,this.bx=3*(f-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=l,this.p2x=f,this.p2y=m}x.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,l){if(l===void 0&&(l=1e-6),u<0)return 0;if(u>1)return 1;for(var f=u,m=0;m<8;m++){var _=this.sampleCurveX(f)-u;if(Math.abs(_)<l)return f;var E=this.sampleCurveDerivativeX(f);if(Math.abs(E)<1e-6)break;f-=_/E}var I=0,C=1;for(f=u,m=0;m<20&&(_=this.sampleCurveX(f),!(Math.abs(_-u)<l));m++)u>_?I=f:C=f,f=.5*(C-I)+I;return f},solve:function(u,l){return this.sampleCurveY(this.solveCurveX(u,l))}};var S=a(v);let T,L;function k(){return T==null&&(T=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),T}function R(){if(L==null&&(L=!1,k())){let l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let m=0;m<5*5;m++){let _=4*m;l.fillStyle=`rgb(${_},${_+1},${_+2})`,l.fillRect(m%5,Math.floor(m/5),1,1)}let f=l.getImageData(0,0,5,5).data;for(let m=0;m<5*5*4;m++)if(m%4!=3&&f[m]!==m){L=!0;break}}}return L||!1}function D(u,l,f,m){let _=new S(u,l,f,m);return E=>_.solve(E)}let j=D(.25,.1,.25,1);function B(u,l,f){return Math.min(f,Math.max(l,u))}function $(u,l,f){let m=f-l,_=((u-l)%m+m)%m+l;return _===l?f:_}function ee(u,...l){for(let f of l)for(let m in f)u[m]=f[m];return u}let J=1;function ie(u,l,f){let m={};for(let _ in u)m[_]=l.call(this,u[_],_,u);return m}function ue(u,l,f){let m={};for(let _ in u)l.call(this,u[_],_,u)&&(m[_]=u[_]);return m}function le(u){return Array.isArray(u)?u.map(le):typeof u=="object"&&u?ie(u,le):u}let _e={};function Re(u){_e[u]||(typeof console!="undefined"&&console.warn(u),_e[u]=!0)}function ze(u,l,f){return(f.y-u.y)*(l.x-u.x)>(l.y-u.y)*(f.x-u.x)}function ke(u){return typeof WorkerGlobalScope!="undefined"&&u!==void 0&&u instanceof WorkerGlobalScope}let Ve=null;function We(u){return typeof ImageBitmap!="undefined"&&u instanceof ImageBitmap}let Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Se(u,l,f,m,_){return o(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let E=new VideoFrame(u,{timestamp:0});try{let I=E==null?void 0:E.format;if(!I||!I.startsWith("BGR")&&!I.startsWith("RGB"))throw new Error(`Unrecognized format ${I}`);let C=I.startsWith("BGR"),P=new Uint8ClampedArray(m*_*4);if(yield E.copyTo(P,function(q,F,U,Z,Y){let Q=4*Math.max(-F,0),re=(Math.max(0,U)-U)*Z*4+Q,fe=4*Z,de=Math.max(0,F),qe=Math.max(0,U);return{rect:{x:de,y:qe,width:Math.min(q.width,F+Z)-de,height:Math.min(q.height,U+Y)-qe},layout:[{offset:re,stride:fe}]}}(u,l,f,m,_)),C)for(let q=0;q<P.length;q+=4){let F=P[q];P[q]=P[q+2],P[q+2]=F}return P}finally{E.close()}})}let Ae,$e,Ge="AbortError";function Ke(){return new Error(Ge)}let Pe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function at(u){return Pe.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))]}let Tt="global-dispatcher";class Le extends Error{constructor(l,f,m,_){super(`AJAXError: ${f} (${l}): ${m}`),this.status=l,this.statusText=f,this.url=m,this.body=_}}let Ye=()=>ke(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Fe=function(u,l){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){let m=at(u.url);if(m)return m(u,l);if(ke(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,targetMapId:Tt},l)}if(!(/^file:/.test(f=u.url)||/^file:/.test(Ye())&&!/^\w+:/.test(f))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(m,_){return o(this,void 0,void 0,function*(){let E=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:Ye(),signal:_.signal});m.type!=="json"||E.headers.has("Accept")||E.headers.set("Accept","application/json");let I=yield fetch(E);if(!I.ok){let q=yield I.blob();throw new Le(I.status,I.statusText,m.url,q)}let C;C=m.type==="arrayBuffer"||m.type==="image"?I.arrayBuffer():m.type==="json"?I.json():I.text();let P=yield C;if(_.signal.aborted)throw Ke();return{data:P,cacheControl:I.headers.get("Cache-Control"),expires:I.headers.get("Expires")}})}(u,l);if(ke(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,mustQueue:!0,targetMapId:Tt},l)}var f;return function(m,_){return new Promise((E,I)=>{var C;let P=new XMLHttpRequest;P.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(P.responseType="arraybuffer");for(let q in m.headers)P.setRequestHeader(q,m.headers[q]);m.type==="json"&&(P.responseType="text",!((C=m.headers)===null||C===void 0)&&C.Accept||P.setRequestHeader("Accept","application/json")),P.withCredentials=m.credentials==="include",P.onerror=()=>{I(new Error(P.statusText))},P.onload=()=>{if(!_.signal.aborted)if((P.status>=200&&P.status<300||P.status===0)&&P.response!==null){let q=P.response;if(m.type==="json")try{q=JSON.parse(P.response)}catch(F){return void I(F)}E({data:q,cacheControl:P.getResponseHeader("Cache-Control"),expires:P.getResponseHeader("Expires")})}else{let q=new Blob([P.response],{type:P.getResponseHeader("Content-Type")});I(new Le(P.status,P.statusText,m.url,q))}},_.signal.addEventListener("abort",()=>{P.abort(),I(Ke())}),P.send(m.body)})}(u,l)};function Ze(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;let l=new URL(u),f=window.location;return l.protocol===f.protocol&&l.host===f.host}function tt(u,l,f){f[u]&&f[u].indexOf(l)!==-1||(f[u]=f[u]||[],f[u].push(l))}function Qe(u,l,f){if(f&&f[u]){let m=f[u].indexOf(l);m!==-1&&f[u].splice(m,1)}}class Dt{constructor(l,f={}){ee(this,f),this.type=l}}class Kt extends Dt{constructor(l,f={}){super("error",ee({error:l},f))}}class _t{on(l,f){return this._listeners=this._listeners||{},tt(l,f,this._listeners),this}off(l,f){return Qe(l,f,this._listeners),Qe(l,f,this._oneTimeListeners),this}once(l,f){return f?(this._oneTimeListeners=this._oneTimeListeners||{},tt(l,f,this._oneTimeListeners),this):new Promise(m=>this.once(l,m))}fire(l,f){typeof l=="string"&&(l=new Dt(l,f||{}));let m=l.type;if(this.listens(m)){l.target=this;let _=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(let C of _)C.call(this,l);let E=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(let C of E)Qe(m,C,this._oneTimeListeners),C.call(this,l);let I=this._eventedParent;I&&(ee(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),I.fire(l))}else l instanceof Kt&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,f){return this._eventedParent=l,this._eventedParentData=f,this}}var be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let jt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Qt(u,l){let f={};for(let m in u)m!=="ref"&&(f[m]=u[m]);return jt.forEach(m=>{m in l&&(f[m]=l[m])}),f}function Ft(u,l){if(Array.isArray(u)){if(!Array.isArray(l)||u.length!==l.length)return!1;for(let f=0;f<u.length;f++)if(!Ft(u[f],l[f]))return!1;return!0}if(typeof u=="object"&&u!==null&&l!==null){if(typeof l!="object"||Object.keys(u).length!==Object.keys(l).length)return!1;for(let f in u)if(!Ft(u[f],l[f]))return!1;return!0}return u===l}function nr(u,l){u.push(l)}function or(u,l,f){nr(f,{command:"addSource",args:[u,l[u]]})}function Wt(u,l,f){nr(l,{command:"removeSource",args:[u]}),f[u]=!0}function lr(u,l,f,m){Wt(u,f,m),or(u,l,f)}function Pr(u,l,f){let m;for(m in u[f])if(Object.prototype.hasOwnProperty.call(u[f],m)&&m!=="data"&&!Ft(u[f][m],l[f][m]))return!1;for(m in l[f])if(Object.prototype.hasOwnProperty.call(l[f],m)&&m!=="data"&&!Ft(u[f][m],l[f][m]))return!1;return!0}function en(u,l,f,m,_,E){u=u||{},l=l||{};for(let I in u)Object.prototype.hasOwnProperty.call(u,I)&&(Ft(u[I],l[I])||f.push({command:E,args:[m,I,l[I],_]}));for(let I in l)Object.prototype.hasOwnProperty.call(l,I)&&!Object.prototype.hasOwnProperty.call(u,I)&&(Ft(u[I],l[I])||f.push({command:E,args:[m,I,l[I],_]}))}function ai(u){return u.id}function Ii(u,l){return u[l.id]=l,u}class nt{constructor(l,f,m,_){this.message=(l?`${l}: `:"")+m,_&&(this.identifier=_),f!=null&&f.__line__&&(this.line=f.__line__)}}function Qn(u,...l){for(let f of l)for(let m in f)u[m]=f[m];return u}class An extends Error{constructor(l,f){super(f),this.message=f,this.key=l}}class di{constructor(l,f=[]){this.parent=l,this.bindings={};for(let[m,_]of f)this.bindings[m]=_}concat(l){return new di(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}let Ti={kind:"null"},ut={kind:"number"},vr={kind:"string"},zt={kind:"boolean"},Ai={kind:"color"},hn={kind:"object"},Ee={kind:"value"},Oe={kind:"collator"},it={kind:"formatted"},bt={kind:"padding"},vt={kind:"resolvedImage"},oe={kind:"variableAnchorOffsetCollection"};function W(u,l){return{kind:"array",itemType:u,N:l}}function H(u){if(u.kind==="array"){let l=H(u.itemType);return typeof u.N=="number"?`array<${l}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${l}>`}return u.kind}let K=[Ti,ut,vr,zt,Ai,it,hn,W(Ee),bt,vt,oe];function ae(u,l){if(l.kind==="error")return null;if(u.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!ae(u.itemType,l.itemType))&&(typeof u.N!="number"||u.N===l.N))return null}else{if(u.kind===l.kind)return null;if(u.kind==="value"){for(let f of K)if(!ae(f,l))return null}}return`Expected ${H(u)} but found ${H(l)} instead.`}function ve(u,l){return l.some(f=>f.kind===u.kind)}function xe(u,l){return l.some(f=>f==="null"?u===null:f==="array"?Array.isArray(u):f==="object"?u&&!Array.isArray(u)&&typeof u=="object":f===typeof u)}function Ie(u,l){return u.kind==="array"&&l.kind==="array"?u.itemType.kind===l.itemType.kind&&typeof u.N=="number":u.kind===l.kind}let pe=.96422,Be=.82521,Je=4/29,Ue=6/29,st=3*Ue*Ue,Bt=Ue*Ue*Ue,Xt=Math.PI/180,Nr=180/Math.PI;function cr(u){return(u%=360)<0&&(u+=360),u}function Fr([u,l,f,m]){let _,E,I=Xr((.2225045*(u=Cr(u))+.7168786*(l=Cr(l))+.0606169*(f=Cr(f)))/1);u===l&&l===f?_=E=I:(_=Xr((.4360747*u+.3850649*l+.1430804*f)/pe),E=Xr((.0139322*u+.0971045*l+.7141733*f)/Be));let C=116*I-16;return[C<0?0:C,500*(_-I),200*(I-E),m]}function Cr(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function Xr(u){return u>Bt?Math.pow(u,1/3):u/st+Je}function Kr([u,l,f,m]){let _=(u+16)/116,E=isNaN(l)?_:_+l/500,I=isNaN(f)?_:_-f/200;return _=1*un(_),E=pe*un(E),I=Be*un(I),[Sr(3.1338561*E-1.6168667*_-.4906146*I),Sr(-.9787684*E+1.9161415*_+.033454*I),Sr(.0719453*E-.2289914*_+1.4052427*I),m]}function Sr(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function un(u){return u>Ue?u*u*u:st*(u-Je)}function Cn(u){return parseInt(u.padEnd(2,u),16)/255}function Ji(u,l){return lo(l?u/100:u,0,1)}function lo(u,l,f){return Math.min(Math.max(l,u),f)}function Fo(u){return!u.some(Number.isNaN)}let Mh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class mn{constructor(l,f,m,_=1,E=!0){this.r=l,this.g=f,this.b=m,this.a=_,E||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[l,f,m,_]))}static parse(l){if(l instanceof mn)return l;if(typeof l!="string")return;let f=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];let _=Mh[m];if(_){let[I,C,P]=_;return[I/255,C/255,P/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){let I=m.length<6?1:2,C=1;return[Cn(m.slice(C,C+=I)),Cn(m.slice(C,C+=I)),Cn(m.slice(C,C+=I)),Cn(m.slice(C,C+I)||"ff")]}if(m.startsWith("rgb")){let I=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(I){let[C,P,q,F,U,Z,Y,Q,re,fe,de,qe]=I,we=[F||" ",Y||" ",fe].join("");if(we==="  "||we==="  /"||we===",,"||we===",,,"){let Ne=[q,Z,re].join(""),He=Ne==="%%%"?100:Ne===""?255:0;if(He){let ot=[lo(+P/He,0,1),lo(+U/He,0,1),lo(+Q/He,0,1),de?Ji(+de,qe):1];if(Fo(ot))return ot}}return}}let E=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(E){let[I,C,P,q,F,U,Z,Y,Q]=E,re=[P||" ",F||" ",Z].join("");if(re==="  "||re==="  /"||re===",,"||re===",,,"){let fe=[+C,lo(+q,0,100),lo(+U,0,100),Y?Ji(+Y,Q):1];if(Fo(fe))return function([de,qe,we,Ne]){function He(ot){let Mt=(ot+de/30)%12,sr=qe*Math.min(we,1-we);return we-sr*Math.max(-1,Math.min(Mt-3,9-Mt,1))}return de=cr(de),qe/=100,we/=100,[He(0),He(8),He(4),Ne]}(fe)}}}(l);return f?new mn(...f,!1):void 0}get rgb(){let{r:l,g:f,b:m,a:_}=this,E=_||1/0;return this.overwriteGetter("rgb",[l/E,f/E,m/E,_])}get hcl(){return this.overwriteGetter("hcl",function(l){let[f,m,_,E]=Fr(l),I=Math.sqrt(m*m+_*_);return[Math.round(1e4*I)?cr(Math.atan2(_,m)*Nr):NaN,I,f,E]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Fr(this.rgb))}overwriteGetter(l,f){return Object.defineProperty(this,l,{value:f}),f}toString(){let[l,f,m,_]=this.rgb;return`rgba(${[l,f,m].map(E=>Math.round(255*E)).join(",")},${_})`}}mn.black=new mn(0,0,0,1),mn.white=new mn(1,1,1,1),mn.transparent=new mn(0,0,0,0),mn.red=new mn(1,0,0,1);class hx{constructor(l,f,m){this.sensitivity=l?f?"variant":"case":f?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,f){return this.collator.compare(l,f)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class px{constructor(l,f,m,_,E){this.text=l,this.image=f,this.scale=m,this.fontStack=_,this.textColor=E}}class ka{constructor(l){this.sections=l}static fromString(l){return new ka([new px(l,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(l=>l.text.length!==0||l.image&&l.image.name.length!==0)}static factory(l){return l instanceof ka?l:ka.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map(l=>l.text).join("")}}class qa{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof qa)return l;if(typeof l=="number")return new qa([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(let f of l)if(typeof f!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]];}return new qa(l)}}toString(){return JSON.stringify(this.values)}}let N2=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ss{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof ss)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let f=0;f<l.length;f+=2){let m=l[f],_=l[f+1];if(typeof m!="string"||!N2.has(m)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new ss(l)}}toString(){return JSON.stringify(this.values)}}class ja{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new ja({name:l,available:!1}):null}}function Rh(u,l,f,m){return typeof u=="number"&&u>=0&&u<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof f=="number"&&f>=0&&f<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[u,l,f,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[u,l,f,m]:[u,l,f]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function nf(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof mn||u instanceof hx||u instanceof ka||u instanceof qa||u instanceof ss||u instanceof ja)return!0;if(Array.isArray(u)){for(let l of u)if(!nf(l))return!1;return!0}if(typeof u=="object"){for(let l in u)if(!nf(u[l]))return!1;return!0}return!1}function ki(u){if(u===null)return Ti;if(typeof u=="string")return vr;if(typeof u=="boolean")return zt;if(typeof u=="number")return ut;if(u instanceof mn)return Ai;if(u instanceof hx)return Oe;if(u instanceof ka)return it;if(u instanceof qa)return bt;if(u instanceof ss)return oe;if(u instanceof ja)return vt;if(Array.isArray(u)){let l=u.length,f;for(let m of u){let _=ki(m);if(f){if(f===_)continue;f=Ee;break}f=_}return W(f||Ee,l)}return hn}function Ud(u){let l=typeof u;return u===null?"":l==="string"||l==="number"||l==="boolean"?String(u):u instanceof mn||u instanceof ka||u instanceof qa||u instanceof ss||u instanceof ja?u.toString():JSON.stringify(u)}class Hs{constructor(l,f){this.type=l,this.value=f}static parse(l,f){if(l.length!==2)return f.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!nf(l[1]))return f.error("invalid value");let m=l[1],_=ki(m),E=f.expectedType;return _.kind!=="array"||_.N!==0||!E||E.kind!=="array"||typeof E.N=="number"&&E.N!==0||(_=E),new Hs(_,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Ci{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}}let $v={string:vr,number:ut,boolean:zt,object:hn};class Ws{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");let m,_=1,E=l[0];if(E==="array"){let C,P;if(l.length>2){let q=l[1];if(typeof q!="string"||!(q in $v)||q==="object")return f.error("The item type argument of \"array\" must be one of string, number, boolean",1);C=$v[q],_++}else C=Ee;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return f.error("The length argument to \"array\" must be a positive integer literal",2);P=l[2],_++}m=W(C,P)}else{if(!$v[E])throw new Error(`Types doesn't contain name = ${E}`);m=$v[E]}let I=[];for(;_<l.length;_++){let C=f.parse(l[_],_,Ee);if(!C)return null;I.push(C)}return new Ws(m,I)}evaluate(l){for(let f=0;f<this.args.length;f++){let m=this.args[f].evaluate(l);if(!ae(this.type,ki(m)))return m;if(f===this.args.length-1)throw new Ci(`Expected value to be of type ${H(this.type)}, but found ${H(ki(m))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}let dx={"to-boolean":zt,"to-color":Ai,"to-number":ut,"to-string":vr};class Zs{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");let m=l[0];if(!dx[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&l.length!==2)return f.error("Expected one argument.");let _=dx[m],E=[];for(let I=1;I<l.length;I++){let C=f.parse(l[I],I,Ee);if(!C)return null;E.push(C)}return new Zs(_,E)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let f,m;for(let _ of this.args){if(f=_.evaluate(l),m=null,f instanceof mn)return f;if(typeof f=="string"){let E=l.parseColor(f);if(E)return E}else if(Array.isArray(f)&&(m=f.length<3||f.length>4?`Invalid rbga value ${JSON.stringify(f)}: expected an array containing either three or four numeric values.`:Rh(f[0],f[1],f[2],f[3]),!m))return new mn(f[0]/255,f[1]/255,f[2]/255,f[3])}throw new Ci(m||`Could not parse color from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"padding":{let f;for(let m of this.args){f=m.evaluate(l);let _=qa.parse(f);if(_)return _}throw new Ci(`Could not parse padding from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"variableAnchorOffsetCollection":{let f;for(let m of this.args){f=m.evaluate(l);let _=ss.parse(f);if(_)return _}throw new Ci(`Could not parse variableAnchorOffsetCollection from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"number":{let f=null;for(let m of this.args){if(f=m.evaluate(l),f===null)return 0;let _=Number(f);if(!isNaN(_))return _}throw new Ci(`Could not convert ${JSON.stringify(f)} to number.`)}case"formatted":return ka.fromString(Ud(this.args[0].evaluate(l)));case"resolvedImage":return ja.fromString(Ud(this.args[0].evaluate(l)));default:return Ud(this.args[0].evaluate(l));}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}let k2=["Unknown","Point","LineString","Polygon"];class Hv{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?k2[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let f=this._parseColorCache[l];return f||(f=this._parseColorCache[l]=mn.parse(l)),f}}class of{constructor(l,f,m=[],_,E=new di,I=[]){this.registry=l,this.path=m,this.key=m.map(C=>`[${C}]`).join(""),this.scope=E,this.errors=I,this.expectedType=_,this._isConstant=f}parse(l,f,m,_,E={}){return f?this.concat(f,m,_)._parse(l,E):this._parse(l,E)}_parse(l,f){function m(_,E,I){return I==="assert"?new Ws(E,[_]):I==="coerce"?new Zs(E,[_]):_}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let _=l[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let E=this.registry[_];if(E){let I=E.parse(l,this);if(!I)return null;if(this.expectedType){let C=this.expectedType,P=I.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||P.kind!=="value"){if(C.kind!=="color"&&C.kind!=="formatted"&&C.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string"){if(C.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array"){if(C.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(C,P))return null}else I=m(I,C,f.typeAnnotation||"coerce");}else I=m(I,C,f.typeAnnotation||"coerce");}else I=m(I,C,f.typeAnnotation||"coerce");}else I=m(I,C,f.typeAnnotation||"assert")}if(!(I instanceof Hs)&&I.type.kind!=="resolvedImage"&&this._isConstant(I)){let C=new Hv;try{I=new Hs(I.type,I.evaluate(C))}catch(P){return this.error(P.message),null}}return I}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof l} instead.`)}concat(l,f,m){let _=typeof l=="number"?this.path.concat(l):this.path,E=m?this.scope.concat(m):this.scope;return new of(this.registry,this._isConstant,_,f||null,E,this.errors)}error(l,...f){let m=`${this.key}${f.map(_=>`[${_}]`).join("")}`;this.errors.push(new An(m,l))}checkSubtype(l,f){let m=ae(l,f);return m&&this.error(m),m}}class ic{constructor(l,f){this.type=f.type,this.bindings=[].concat(l),this.result=f}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(let f of this.bindings)l(f[1]);l(this.result)}static parse(l,f){if(l.length<4)return f.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);let m=[];for(let E=1;E<l.length-1;E+=2){let I=l[E];if(typeof I!="string")return f.error(`Expected string, but found ${typeof I} instead.`,E);if(/[^a-zA-Z0-9_]/.test(I))return f.error("Variable names must contain only alphanumeric characters or '_'.",E);let C=f.parse(l[E+1],E+1);if(!C)return null;m.push([I,C])}let _=f.parse(l[l.length-1],l.length-1,f.expectedType,m);return _?new ic(m,_):null}outputDefined(){return this.result.outputDefined()}}class on{constructor(l,f){this.type=f.type,this.name=l,this.boundExpression=f}static parse(l,f){if(l.length!==2||typeof l[1]!="string")return f.error("'var' expression requires exactly one string literal argument.");let m=l[1];return f.scope.has(m)?new on(m,f.scope.get(m)):f.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class mx{constructor(l,f,m){this.type=l,this.index=f,this.input=m}static parse(l,f){if(l.length!==3)return f.error(`Expected 2 arguments, but found ${l.length-1} instead.`);let m=f.parse(l[1],1,ut),_=f.parse(l[2],2,W(f.expectedType||Ee));return m&&_?new mx(_.type.itemType,m,_):null}evaluate(l){let f=this.index.evaluate(l),m=this.input.evaluate(l);if(f<0)throw new Ci(`Array index out of bounds: ${f} < 0.`);if(f>=m.length)throw new Ci(`Array index out of bounds: ${f} > ${m.length-1}.`);if(f!==Math.floor(f))throw new Ci(`Array index must be an integer, but found ${f} instead.`);return m[f]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class vx{constructor(l,f){this.type=zt,this.needle=l,this.haystack=f}static parse(l,f){if(l.length!==3)return f.error(`Expected 2 arguments, but found ${l.length-1} instead.`);let m=f.parse(l[1],1,Ee),_=f.parse(l[2],2,Ee);return m&&_?ve(m.type,[zt,vr,ut,Ti,Ee])?new vx(m,_):f.error(`Expected first argument to be of type boolean, string, number or null, but found ${H(m.type)} instead`):null}evaluate(l){let f=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!m)return!1;if(!xe(f,["boolean","string","number","null"]))throw new Ci(`Expected first argument to be of type boolean, string, number or null, but found ${H(ki(f))} instead.`);if(!xe(m,["string","array"]))throw new Ci(`Expected second argument to be of type array or string, but found ${H(ki(m))} instead.`);return m.indexOf(f)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class Ph{constructor(l,f,m){this.type=ut,this.needle=l,this.haystack=f,this.fromIndex=m}static parse(l,f){if(l.length<=2||l.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);let m=f.parse(l[1],1,Ee),_=f.parse(l[2],2,Ee);if(!m||!_)return null;if(!ve(m.type,[zt,vr,ut,Ti,Ee]))return f.error(`Expected first argument to be of type boolean, string, number or null, but found ${H(m.type)} instead`);if(l.length===4){let E=f.parse(l[3],3,ut);return E?new Ph(m,_,E):null}return new Ph(m,_)}evaluate(l){let f=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!xe(f,["boolean","string","number","null"]))throw new Ci(`Expected first argument to be of type boolean, string, number or null, but found ${H(ki(f))} instead.`);let _;if(this.fromIndex&&(_=this.fromIndex.evaluate(l)),xe(m,["string"])){let E=m.indexOf(f,_);return E===-1?-1:[...m.slice(0,E)].length}if(xe(m,["array"]))return m.indexOf(f,_);throw new Ci(`Expected second argument to be of type array or string, but found ${H(ki(m))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class gx{constructor(l,f,m,_,E,I){this.inputType=l,this.type=f,this.input=m,this.cases=_,this.outputs=E,this.otherwise=I}static parse(l,f){if(l.length<5)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return f.error("Expected an even number of arguments.");let m,_;f.expectedType&&f.expectedType.kind!=="value"&&(_=f.expectedType);let E={},I=[];for(let q=2;q<l.length-1;q+=2){let F=l[q],U=l[q+1];Array.isArray(F)||(F=[F]);let Z=f.concat(q);if(F.length===0)return Z.error("Expected at least one branch label.");for(let Q of F){if(typeof Q!="number"&&typeof Q!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return Z.error("Numeric branch labels must be integer values.");if(m){if(Z.checkSubtype(m,ki(Q)))return null}else m=ki(Q);if(E[String(Q)]!==void 0)return Z.error("Branch labels must be unique.");E[String(Q)]=I.length}let Y=f.parse(U,q,_);if(!Y)return null;_=_||Y.type,I.push(Y)}let C=f.parse(l[1],1,Ee);if(!C)return null;let P=f.parse(l[l.length-1],l.length-1,_);return P?C.type.kind!=="value"&&f.concat(1).checkSubtype(m,C.type)?null:new gx(m,_,C,E,I,P):null}evaluate(l){let f=this.input.evaluate(l);return(ki(f)===this.inputType&&this.outputs[this.cases[f]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}}class Wv{constructor(l,f,m){this.type=l,this.branches=f,this.otherwise=m}static parse(l,f){if(l.length<4)return f.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return f.error("Expected an odd number of arguments.");let m;f.expectedType&&f.expectedType.kind!=="value"&&(m=f.expectedType);let _=[];for(let I=1;I<l.length-1;I+=2){let C=f.parse(l[I],I,zt);if(!C)return null;let P=f.parse(l[I+1],I+1,m);if(!P)return null;_.push([C,P]),m=m||P.type}let E=f.parse(l[l.length-1],l.length-1,m);if(!E)return null;if(!m)throw new Error("Can't infer output type");return new Wv(m,_,E)}evaluate(l){for(let[f,m]of this.branches)if(f.evaluate(l))return m.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(let[f,m]of this.branches)l(f),l(m);l(this.otherwise)}outputDefined(){return this.branches.every(([l,f])=>f.outputDefined())&&this.otherwise.outputDefined()}}class Vd{constructor(l,f,m,_){this.type=l,this.input=f,this.beginIndex=m,this.endIndex=_}static parse(l,f){if(l.length<=2||l.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);let m=f.parse(l[1],1,Ee),_=f.parse(l[2],2,ut);if(!m||!_)return null;if(!ve(m.type,[W(Ee),vr,Ee]))return f.error(`Expected first argument to be of type array or string, but found ${H(m.type)} instead`);if(l.length===4){let E=f.parse(l[3],3,ut);return E?new Vd(m.type,m,_,E):null}return new Vd(m.type,m,_)}evaluate(l){let f=this.input.evaluate(l),m=this.beginIndex.evaluate(l),_;if(this.endIndex&&(_=this.endIndex.evaluate(l)),xe(f,["string"]))return[...f].slice(m,_).join("");if(xe(f,["array"]))return f.slice(m,_);throw new Ci(`Expected first argument to be of type array or string, but found ${H(ki(f))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Zv(u,l){let f=u.length-1,m,_,E=0,I=f,C=0;for(;E<=I;)if(C=Math.floor((E+I)/2),m=u[C],_=u[C+1],m<=l){if(C===f||l<_)return C;E=C+1}else{if(!(m>l))throw new Ci("Input is not a number.");I=C-1}return 0}class Oh{constructor(l,f,m){this.type=l,this.input=f,this.labels=[],this.outputs=[];for(let[_,E]of m)this.labels.push(_),this.outputs.push(E)}static parse(l,f){if(l.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return f.error("Expected an even number of arguments.");let m=f.parse(l[1],1,ut);if(!m)return null;let _=[],E=null;f.expectedType&&f.expectedType.kind!=="value"&&(E=f.expectedType);for(let I=1;I<l.length;I+=2){let C=I===1?-1/0:l[I],P=l[I+1],q=I,F=I+1;if(typeof C!="number")return f.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",q);if(_.length&&_[_.length-1][0]>=C)return f.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",q);let U=f.parse(P,F,E);if(!U)return null;E=E||U.type,_.push([C,U])}return new Oh(E,m,_)}evaluate(l){let f=this.labels,m=this.outputs;if(f.length===1)return m[0].evaluate(l);let _=this.input.evaluate(l);if(_<=f[0])return m[0].evaluate(l);let E=f.length;return _>=f[E-1]?m[E-1].evaluate(l):m[Zv(f,_)].evaluate(l)}eachChild(l){l(this.input);for(let f of this.outputs)l(f)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function FI(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var q2=zI;function zI(u,l,f,m){this.cx=3*u,this.bx=3*(f-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=l,this.p2x=f,this.p2y=m}zI.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,l){if(l===void 0&&(l=1e-6),u<0)return 0;if(u>1)return 1;for(var f=u,m=0;m<8;m++){var _=this.sampleCurveX(f)-u;if(Math.abs(_)<l)return f;var E=this.sampleCurveDerivativeX(f);if(Math.abs(E)<1e-6)break;f-=_/E}var I=0,C=1;for(f=u,m=0;m<20&&(_=this.sampleCurveX(f),!(Math.abs(_-u)<l));m++)u>_?I=f:C=f,f=.5*(C-I)+I;return f},solve:function(u,l){return this.sampleCurveY(this.solveCurveX(u,l))}};var j2=FI(q2);function af(u,l,f){return u+f*(l-u)}function Gd(u,l,f){return u.map((m,_)=>af(m,l[_],f))}let aa={number:af,color:function(u,l,f,m="rgb"){switch(m){case"rgb":{let[_,E,I,C]=Gd(u.rgb,l.rgb,f);return new mn(_,E,I,C,!1)}case"hcl":{let[_,E,I,C]=u.hcl,[P,q,F,U]=l.hcl,Z,Y;if(isNaN(_)||isNaN(P))isNaN(_)?isNaN(P)?Z=NaN:(Z=P,I!==1&&I!==0||(Y=q)):(Z=_,F!==1&&F!==0||(Y=E));else{let qe=P-_;P>_&&qe>180?qe-=360:P<_&&_-P>180&&(qe+=360),Z=_+f*qe}let[Q,re,fe,de]=function([qe,we,Ne,He]){return qe=isNaN(qe)?0:qe*Xt,Kr([Ne,Math.cos(qe)*we,Math.sin(qe)*we,He])}([Z,Y!=null?Y:af(E,q,f),af(I,F,f),af(C,U,f)]);return new mn(Q,re,fe,de,!1)}case"lab":{let[_,E,I,C]=Kr(Gd(u.lab,l.lab,f));return new mn(_,E,I,C,!1)}}},array:Gd,padding:function(u,l,f){return new qa(Gd(u.values,l.values,f))},variableAnchorOffsetCollection:function(u,l,f){let m=u.values,_=l.values;if(m.length!==_.length)throw new Ci(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${l.toString()}`);let E=[];for(let I=0;I<m.length;I+=2){if(m[I]!==_[I])throw new Ci(`Cannot interpolate values containing mismatched anchors. from[${I}]: ${m[I]}, to[${I}]: ${_[I]}`);E.push(m[I]);let[C,P]=m[I+1],[q,F]=_[I+1];E.push([af(C,q,f),af(P,F,f)])}return new ss(E)}};class sa{constructor(l,f,m,_,E){this.type=l,this.operator=f,this.interpolation=m,this.input=_,this.labels=[],this.outputs=[];for(let[I,C]of E)this.labels.push(I),this.outputs.push(C)}static interpolationFactor(l,f,m,_){let E=0;if(l.name==="exponential")E=Yv(f,l.base,m,_);else if(l.name==="linear")E=Yv(f,1,m,_);else if(l.name==="cubic-bezier"){let I=l.controlPoints;E=new j2(I[0],I[1],I[2],I[3]).solve(Yv(f,1,m,_))}return E}static parse(l,f){let[m,_,E,...I]=l;if(!Array.isArray(_)||_.length===0)return f.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){let q=_[1];if(typeof q!="number")return f.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:q}}else{if(_[0]!=="cubic-bezier")return f.error(`Unknown interpolation type ${String(_[0])}`,1,0);{let q=_.slice(1);if(q.length!==4||q.some(F=>typeof F!="number"||F<0||F>1))return f.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:q}}}if(l.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return f.error("Expected an even number of arguments.");if(E=f.parse(E,2,ut),!E)return null;let C=[],P=null;m==="interpolate-hcl"||m==="interpolate-lab"?P=Ai:f.expectedType&&f.expectedType.kind!=="value"&&(P=f.expectedType);for(let q=0;q<I.length;q+=2){let F=I[q],U=I[q+1],Z=q+3,Y=q+4;if(typeof F!="number")return f.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",Z);if(C.length&&C[C.length-1][0]>=F)return f.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",Z);let Q=f.parse(U,Y,P);if(!Q)return null;P=P||Q.type,C.push([F,Q])}return Ie(P,ut)||Ie(P,Ai)||Ie(P,bt)||Ie(P,oe)||Ie(P,W(ut))?new sa(P,m,_,E,C):f.error(`Type ${H(P)} is not interpolatable.`)}evaluate(l){let f=this.labels,m=this.outputs;if(f.length===1)return m[0].evaluate(l);let _=this.input.evaluate(l);if(_<=f[0])return m[0].evaluate(l);let E=f.length;if(_>=f[E-1])return m[E-1].evaluate(l);let I=Zv(f,_),C=sa.interpolationFactor(this.interpolation,_,f[I],f[I+1]),P=m[I].evaluate(l),q=m[I+1].evaluate(l);switch(this.operator){case"interpolate":return aa[this.type.kind](P,q,C);case"interpolate-hcl":return aa.color(P,q,C,"hcl");case"interpolate-lab":return aa.color(P,q,C,"lab");}}eachChild(l){l(this.input);for(let f of this.outputs)l(f)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function Yv(u,l,f,m){let _=m-f,E=u-f;return _===0?0:l===1?E/_:(Math.pow(l,E)-1)/(Math.pow(l,_)-1)}class Kv{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expectected at least one argument.");let m=null,_=f.expectedType;_&&_.kind!=="value"&&(m=_);let E=[];for(let C of l.slice(1)){let P=f.parse(C,1+E.length,m,void 0,{typeAnnotation:"omit"});if(!P)return null;m=m||P.type,E.push(P)}if(!m)throw new Error("No output type");let I=_&&E.some(C=>ae(_,C.type));return new Kv(I?Ee:m,E)}evaluate(l){let f,m=null,_=0;for(let E of this.args)if(_++,m=E.evaluate(l),m&&m instanceof ja&&!m.available&&(f||(f=m.name),m=null,_===this.args.length&&(m=f)),m!==null)break;return m}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}function Xv(u,l){return u==="=="||u==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function BI(u,l,f,m){return m.compare(l,f)===0}function Lh(u,l,f){let m=u!=="=="&&u!=="!=";return class CCe{constructor(E,I,C){this.type=zt,this.lhs=E,this.rhs=I,this.collator=C,this.hasUntypedArgument=E.type.kind==="value"||I.type.kind==="value"}static parse(E,I){if(E.length!==3&&E.length!==4)return I.error("Expected two or three arguments.");let C=E[0],P=I.parse(E[1],1,Ee);if(!P)return null;if(!Xv(C,P.type))return I.concat(1).error(`"${C}" comparisons are not supported for type '${H(P.type)}'.`);let q=I.parse(E[2],2,Ee);if(!q)return null;if(!Xv(C,q.type))return I.concat(2).error(`"${C}" comparisons are not supported for type '${H(q.type)}'.`);if(P.type.kind!==q.type.kind&&P.type.kind!=="value"&&q.type.kind!=="value")return I.error(`Cannot compare types '${H(P.type)}' and '${H(q.type)}'.`);m&&(P.type.kind==="value"&&q.type.kind!=="value"?P=new Ws(q.type,[P]):P.type.kind!=="value"&&q.type.kind==="value"&&(q=new Ws(P.type,[q])));let F=null;if(E.length===4){if(P.type.kind!=="string"&&q.type.kind!=="string"&&P.type.kind!=="value"&&q.type.kind!=="value")return I.error("Cannot use collator to compare non-string types.");if(F=I.parse(E[3],3,Oe),!F)return null}return new CCe(P,q,F)}evaluate(E){let I=this.lhs.evaluate(E),C=this.rhs.evaluate(E);if(m&&this.hasUntypedArgument){let P=ki(I),q=ki(C);if(P.kind!==q.kind||P.kind!=="string"&&P.kind!=="number")throw new Ci(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${P.kind}, ${q.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){let P=ki(I),q=ki(C);if(P.kind!=="string"||q.kind!=="string")return l(E,I,C)}return this.collator?f(E,I,C,this.collator.evaluate(E)):l(E,I,C)}eachChild(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)}outputDefined(){return!0}}}let F2=Lh("==",function(u,l,f){return l===f},BI),UI=Lh("!=",function(u,l,f){return l!==f},function(u,l,f,m){return!BI(0,l,f,m)}),VI=Lh("<",function(u,l,f){return l<f},function(u,l,f,m){return m.compare(l,f)<0}),z2=Lh(">",function(u,l,f){return l>f},function(u,l,f,m){return m.compare(l,f)>0}),B2=Lh("<=",function(u,l,f){return l<=f},function(u,l,f,m){return m.compare(l,f)<=0}),GI=Lh(">=",function(u,l,f){return l>=f},function(u,l,f,m){return m.compare(l,f)>=0});class $d{constructor(l,f,m){this.type=Oe,this.locale=m,this.caseSensitive=l,this.diacriticSensitive=f}static parse(l,f){if(l.length!==2)return f.error("Expected one argument.");let m=l[1];if(typeof m!="object"||Array.isArray(m))return f.error("Collator options argument must be an object.");let _=f.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,zt);if(!_)return null;let E=f.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,zt);if(!E)return null;let I=null;return m.locale&&(I=f.parse(m.locale,1,vr),!I)?null:new $d(_,E,I)}evaluate(l){return new hx(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class yx{constructor(l,f,m,_,E){this.type=vr,this.number=l,this.locale=f,this.currency=m,this.minFractionDigits=_,this.maxFractionDigits=E}static parse(l,f){if(l.length!==3)return f.error("Expected two arguments.");let m=f.parse(l[1],1,ut);if(!m)return null;let _=l[2];if(typeof _!="object"||Array.isArray(_))return f.error("NumberFormat options argument must be an object.");let E=null;if(_.locale&&(E=f.parse(_.locale,1,vr),!E))return null;let I=null;if(_.currency&&(I=f.parse(_.currency,1,vr),!I))return null;let C=null;if(_["min-fraction-digits"]&&(C=f.parse(_["min-fraction-digits"],1,ut),!C))return null;let P=null;return _["max-fraction-digits"]&&(P=f.parse(_["max-fraction-digits"],1,ut),!P)?null:new yx(m,E,I,C,P)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class Jv{constructor(l){this.type=it,this.sections=l}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");let m=l[1];if(!Array.isArray(m)&&typeof m=="object")return f.error("First argument must be an image or text section.");let _=[],E=!1;for(let I=1;I<=l.length-1;++I){let C=l[I];if(E&&typeof C=="object"&&!Array.isArray(C)){E=!1;let P=null;if(C["font-scale"]&&(P=f.parse(C["font-scale"],1,ut),!P))return null;let q=null;if(C["text-font"]&&(q=f.parse(C["text-font"],1,W(vr)),!q))return null;let F=null;if(C["text-color"]&&(F=f.parse(C["text-color"],1,Ai),!F))return null;let U=_[_.length-1];U.scale=P,U.font=q,U.textColor=F}else{let P=f.parse(l[I],1,Ee);if(!P)return null;let q=P.type.kind;if(q!=="string"&&q!=="value"&&q!=="null"&&q!=="resolvedImage")return f.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");E=!0,_.push({content:P,scale:null,font:null,textColor:null})}}return new Jv(_)}evaluate(l){return new ka(this.sections.map(f=>{let m=f.content.evaluate(l);return ki(m)===vt?new px("",m,null,null,null):new px(Ud(m),null,f.scale?f.scale.evaluate(l):null,f.font?f.font.evaluate(l).join(","):null,f.textColor?f.textColor.evaluate(l):null)}))}eachChild(l){for(let f of this.sections)l(f.content),f.scale&&l(f.scale),f.font&&l(f.font),f.textColor&&l(f.textColor)}outputDefined(){return!1}}class _x{constructor(l){this.type=vt,this.input=l}static parse(l,f){if(l.length!==2)return f.error("Expected two arguments.");let m=f.parse(l[1],1,vr);return m?new _x(m):f.error("No image name provided.")}evaluate(l){let f=this.input.evaluate(l),m=ja.fromString(f);return m&&l.availableImages&&(m.available=l.availableImages.indexOf(f)>-1),m}eachChild(l){l(this.input)}outputDefined(){return!1}}class xx{constructor(l){this.type=ut,this.input=l}static parse(l,f){if(l.length!==2)return f.error(`Expected 1 argument, but found ${l.length-1} instead.`);let m=f.parse(l[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?f.error(`Expected argument of type string or array, but found ${H(m.type)} instead.`):new xx(m):null}evaluate(l){let f=this.input.evaluate(l);if(typeof f=="string")return[...f].length;if(Array.isArray(f))return f.length;throw new Ci(`Expected value to be of type string or array, but found ${H(ki(f))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}let Sl=8192;function U2(u,l){let f=(180+u[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,_=Math.pow(2,l.z);return[Math.round(f*_*Sl),Math.round(m*_*Sl)]}function wx(u,l){let f=Math.pow(2,l.z);return[(_=(u[0]/Sl+l.x)/f,360*_-180),(m=(u[1]/Sl+l.y)/f,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,_}function sf(u,l){u[0]=Math.min(u[0],l[0]),u[1]=Math.min(u[1],l[1]),u[2]=Math.max(u[2],l[0]),u[3]=Math.max(u[3],l[1])}function oc(u,l){return!(u[0]<=l[0]||u[2]>=l[2]||u[1]<=l[1]||u[3]>=l[3])}function cn(u,l,f){let m=u[0]-l[0],_=u[1]-l[1],E=u[0]-f[0],I=u[1]-f[1];return m*I-E*_==0&&m*E<=0&&_*I<=0}function Qv(u,l,f,m){return(_=[m[0]-f[0],m[1]-f[1]])[0]*(E=[l[0]-u[0],l[1]-u[1]])[1]-_[1]*E[0]!=0&&!(!HI(u,l,f,m)||!HI(f,m,u,l));var _,E}function V2(u,l,f){for(let m of f)for(let _=0;_<m.length-1;++_)if(Qv(u,l,m[_],m[_+1]))return!0;return!1}function Dh(u,l,f=!1){let m=!1;for(let C of l)for(let P=0;P<C.length-1;P++){if(cn(u,C[P],C[P+1]))return f;(E=C[P])[1]>(_=u)[1]!=(I=C[P+1])[1]>_[1]&&_[0]<(I[0]-E[0])*(_[1]-E[1])/(I[1]-E[1])+E[0]&&(m=!m)}var _,E,I;return m}function G2(u,l){for(let f of l)if(Dh(u,f))return!0;return!1}function $I(u,l){for(let f of u)if(!Dh(f,l))return!1;for(let f=0;f<u.length-1;++f)if(V2(u[f],u[f+1],l))return!1;return!0}function $2(u,l){for(let f of l)if($I(u,f))return!0;return!1}function HI(u,l,f,m){let _=m[0]-f[0],E=m[1]-f[1],I=(u[0]-f[0])*E-_*(u[1]-f[1]),C=(l[0]-f[0])*E-_*(l[1]-f[1]);return I>0&&C<0||I<0&&C>0}function bx(u,l,f){let m=[];for(let _=0;_<u.length;_++){let E=[];for(let I=0;I<u[_].length;I++){let C=U2(u[_][I],f);sf(l,C),E.push(C)}m.push(E)}return m}function WI(u,l,f){let m=[];for(let _=0;_<u.length;_++){let E=bx(u[_],l,f);m.push(E)}return m}function ZI(u,l,f,m){if(u[0]<f[0]||u[0]>f[2]){let _=.5*m,E=u[0]-f[0]>_?-m:f[0]-u[0]>_?m:0;E===0&&(E=u[0]-f[2]>_?-m:f[2]-u[0]>_?m:0),u[0]+=E}sf(l,u)}function YI(u,l,f,m){let _=Math.pow(2,m.z)*Sl,E=[m.x*Sl,m.y*Sl],I=[];for(let C of u)for(let P of C){let q=[P.x+E[0],P.y+E[1]];ZI(q,l,f,_),I.push(q)}return I}function KI(u,l,f,m){let _=Math.pow(2,m.z)*Sl,E=[m.x*Sl,m.y*Sl],I=[];for(let P of u){let q=[];for(let F of P){let U=[F.x+E[0],F.y+E[1]];sf(l,U),q.push(U)}I.push(q)}if(l[2]-l[0]<=_/2){(C=l)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(let P of I)for(let q of P)ZI(q,l,f,_)}var C;return I}class lf{constructor(l,f){this.type=zt,this.geojson=l,this.geometries=f}static parse(l,f){if(l.length!==2)return f.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(nf(l[1])){let m=l[1];if(m.type==="FeatureCollection"){let _=[];for(let E of m.features){let{type:I,coordinates:C}=E.geometry;I==="Polygon"&&_.push(C),I==="MultiPolygon"&&_.push(...C)}if(_.length)return new lf(m,{type:"MultiPolygon",coordinates:_})}else if(m.type==="Feature"){let _=m.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new lf(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new lf(m,m)}return f.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(f,m){let _=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],I=f.canonicalID();if(m.type==="Polygon"){let C=bx(m.coordinates,E,I),P=YI(f.geometry(),_,E,I);if(!oc(_,E))return!1;for(let q of P)if(!Dh(q,C))return!1}if(m.type==="MultiPolygon"){let C=WI(m.coordinates,E,I),P=YI(f.geometry(),_,E,I);if(!oc(_,E))return!1;for(let q of P)if(!G2(q,C))return!1}return!0}(l,this.geometries);if(l.geometryType()==="LineString")return function(f,m){let _=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],I=f.canonicalID();if(m.type==="Polygon"){let C=bx(m.coordinates,E,I),P=KI(f.geometry(),_,E,I);if(!oc(_,E))return!1;for(let q of P)if(!$I(q,C))return!1}if(m.type==="MultiPolygon"){let C=WI(m.coordinates,E,I),P=KI(f.geometry(),_,E,I);if(!oc(_,E))return!1;for(let q of P)if(!$2(q,C))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let XI=class{constructor(u=[],l=(f,m)=>f<m?-1:f>m?1:0){if(this.data=u,this.length=this.data.length,this.compare=l,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;let u=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),u}peek(){return this.data[0]}_up(u){let{data:l,compare:f}=this,m=l[u];for(;u>0;){let _=u-1>>1,E=l[_];if(f(m,E)>=0)break;l[u]=E,u=_}l[u]=m}_down(u){let{data:l,compare:f}=this,m=this.length>>1,_=l[u];for(;u<m;){let E=1+(u<<1),I=E+1;if(I<this.length&&f(l[I],l[E])<0&&(E=I),f(l[E],_)>=0)break;l[u]=l[E],u=E}l[u]=_}};function H2(u,l,f,m,_){JI(u,l,f,m||u.length-1,_||W2)}function JI(u,l,f,m,_){for(;m>f;){if(m-f>600){var E=m-f+1,I=l-f+1,C=Math.log(E),P=.5*Math.exp(2*C/3),q=.5*Math.sqrt(C*P*(E-P)/E)*(I-E/2<0?-1:1);JI(u,l,Math.max(f,Math.floor(l-I*P/E+q)),Math.min(m,Math.floor(l+(E-I)*P/E+q)),_)}var F=u[l],U=f,Z=m;for(Hd(u,f,l),_(u[m],F)>0&&Hd(u,f,m);U<Z;){for(Hd(u,U,Z),U++,Z--;_(u[U],F)<0;)U++;for(;_(u[Z],F)>0;)Z--}_(u[f],F)===0?Hd(u,f,Z):Hd(u,++Z,m),Z<=l&&(f=Z+1),l<=Z&&(m=Z-1)}}function Hd(u,l,f){var m=u[l];u[l]=u[f],u[f]=m}function W2(u,l){return u<l?-1:u>l?1:0}function eg(u,l){if(u.length<=1)return[u];let f=[],m,_;for(let E of u){let I=Y2(E);I!==0&&(E.area=Math.abs(I),_===void 0&&(_=I<0),_===I<0?(m&&f.push(m),m=[E]):m.push(E))}if(m&&f.push(m),l>1)for(let E=0;E<f.length;E++)f[E].length<=l||(H2(f[E],l,1,f[E].length-1,Z2),f[E]=f[E].slice(0,l));return f}function Z2(u,l){return l.area-u.area}function Y2(u){let l=0;for(let f,m,_=0,E=u.length,I=E-1;_<E;I=_++)f=u[_],m=u[I],l+=(m.x-f.x)*(f.y+m.y);return l}let QI=1/298.257223563,eT=QI*(2-QI),tT=Math.PI/180;class Sx{constructor(l){let f=6378.137*tT*1e3,m=Math.cos(l*tT),_=1/(1-eT*(1-m*m)),E=Math.sqrt(_);this.kx=f*E*m,this.ky=f*E*_*(1-eT)}distance(l,f){let m=this.wrap(l[0]-f[0])*this.kx,_=(l[1]-f[1])*this.ky;return Math.sqrt(m*m+_*_)}pointOnLine(l,f){let m,_,E,I,C=1/0;for(let P=0;P<l.length-1;P++){let q=l[P][0],F=l[P][1],U=this.wrap(l[P+1][0]-q)*this.kx,Z=(l[P+1][1]-F)*this.ky,Y=0;U===0&&Z===0||(Y=(this.wrap(f[0]-q)*this.kx*U+(f[1]-F)*this.ky*Z)/(U*U+Z*Z),Y>1?(q=l[P+1][0],F=l[P+1][1]):Y>0&&(q+=U/this.kx*Y,F+=Z/this.ky*Y)),U=this.wrap(f[0]-q)*this.kx,Z=(f[1]-F)*this.ky;let Q=U*U+Z*Z;Q<C&&(C=Q,m=q,_=F,E=P,I=Y)}return{point:[m,_],index:E,t:Math.max(0,Math.min(1,I))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function rT(u,l){return l[0]-u[0]}function tg(u){return u[1]-u[0]+1}function Iu(u,l){return u[1]>=u[0]&&u[1]<l}function Ex(u,l){if(u[0]>u[1])return[null,null];let f=tg(u);if(l){if(f===2)return[u,null];let _=Math.floor(f/2);return[[u[0],u[0]+_],[u[0]+_,u[1]]]}if(f===1)return[u,null];let m=Math.floor(f/2)-1;return[[u[0],u[0]+m],[u[0]+m+1,u[1]]]}function Ix(u,l){if(!Iu(l,u.length))return[1/0,1/0,-1/0,-1/0];let f=[1/0,1/0,-1/0,-1/0];for(let m=l[0];m<=l[1];++m)sf(f,u[m]);return f}function Tx(u){let l=[1/0,1/0,-1/0,-1/0];for(let f of u)for(let m of f)sf(l,m);return l}function rg(u){return u[0]!==-1/0&&u[1]!==-1/0&&u[2]!==1/0&&u[3]!==1/0}function Ax(u,l,f){if(!rg(u)||!rg(l))return NaN;let m=0,_=0;return u[2]<l[0]&&(m=l[0]-u[2]),u[0]>l[2]&&(m=u[0]-l[2]),u[1]>l[3]&&(_=u[1]-l[3]),u[3]<l[1]&&(_=l[1]-u[3]),f.distance([0,0],[m,_])}function uf(u,l,f){let m=f.pointOnLine(l,u);return f.distance(u,m.point)}function Cx(u,l,f,m,_){let E=Math.min(uf(u,[f,m],_),uf(l,[f,m],_)),I=Math.min(uf(f,[u,l],_),uf(m,[u,l],_));return Math.min(E,I)}function K2(u,l,f,m,_){if(!Iu(l,u.length)||!Iu(m,f.length))return 1/0;let E=1/0;for(let I=l[0];I<l[1];++I){let C=u[I],P=u[I+1];for(let q=m[0];q<m[1];++q){let F=f[q],U=f[q+1];if(Qv(C,P,F,U))return 0;E=Math.min(E,Cx(C,P,F,U,_))}}return E}function mi(u,l,f,m,_){if(!Iu(l,u.length)||!Iu(m,f.length))return NaN;let E=1/0;for(let I=l[0];I<=l[1];++I)for(let C=m[0];C<=m[1];++C)if(E=Math.min(E,_.distance(u[I],f[C])),E===0)return E;return E}function X2(u,l,f){if(Dh(u,l,!0))return 0;let m=1/0;for(let _ of l){let E=_[0],I=_[_.length-1];if(E!==I&&(m=Math.min(m,uf(u,[I,E],f)),m===0))return m;let C=f.pointOnLine(_,u);if(m=Math.min(m,f.distance(u,C.point)),m===0)return m}return m}function kr(u,l,f,m){if(!Iu(l,u.length))return NaN;for(let E=l[0];E<=l[1];++E)if(Dh(u[E],f,!0))return 0;let _=1/0;for(let E=l[0];E<l[1];++E){let I=u[E],C=u[E+1];for(let P of f)for(let q=0,F=P.length,U=F-1;q<F;U=q++){let Z=P[U],Y=P[q];if(Qv(I,C,Z,Y))return 0;_=Math.min(_,Cx(I,C,Z,Y,m))}}return _}function ng(u,l){for(let f of u)for(let m of f)if(Dh(m,l,!0))return!0;return!1}function Dn(u,l,f,m=1/0){let _=Tx(u),E=Tx(l);if(m!==1/0&&Ax(_,E,f)>=m)return m;if(oc(_,E)){if(ng(u,l))return 0}else if(ng(l,u))return 0;let I=1/0;for(let C of u)for(let P=0,q=C.length,F=q-1;P<q;F=P++){let U=C[F],Z=C[P];for(let Y of l)for(let Q=0,re=Y.length,fe=re-1;Q<re;fe=Q++){let de=Y[fe],qe=Y[Q];if(Qv(U,Z,de,qe))return 0;I=Math.min(I,Cx(U,Z,de,qe,f))}}return I}function xn(u,l,f,m,_,E){if(!E)return;let I=Ax(Ix(m,E),_,f);I<l&&u.push([I,E,[0,0]])}function cf(u,l,f,m,_,E,I){if(!E||!I)return;let C=Ax(Ix(m,E),Ix(_,I),f);C<l&&u.push([C,E,I])}function Wd(u,l,f,m,_=1/0){let E=Math.min(m.distance(u[0],f[0][0]),_);if(E===0)return E;let I=new XI([[0,[0,u.length-1],[0,0]]],rT),C=Tx(f);for(;I.length>0;){let P=I.pop();if(P[0]>=E)continue;let q=P[1],F=l?50:100;if(tg(q)<=F){if(!Iu(q,u.length))return NaN;if(l){let U=kr(u,q,f,m);if(isNaN(U)||U===0)return U;E=Math.min(E,U)}else for(let U=q[0];U<=q[1];++U){let Z=X2(u[U],f,m);if(E=Math.min(E,Z),E===0)return 0}}else{let U=Ex(q,l);xn(I,E,m,u,C,U[0]),xn(I,E,m,u,C,U[1])}}return E}function Zd(u,l,f,m,_,E=1/0){let I=Math.min(E,_.distance(u[0],f[0]));if(I===0)return I;let C=new XI([[0,[0,u.length-1],[0,f.length-1]]],rT);for(;C.length>0;){let P=C.pop();if(P[0]>=I)continue;let q=P[1],F=P[2],U=l?50:100,Z=m?50:100;if(tg(q)<=U&&tg(F)<=Z){if(!Iu(q,u.length)&&Iu(F,f.length))return NaN;let Y;if(l&&m)Y=K2(u,q,f,F,_),I=Math.min(I,Y);else if(l&&!m){let Q=u.slice(q[0],q[1]+1);for(let re=F[0];re<=F[1];++re)if(Y=uf(f[re],Q,_),I=Math.min(I,Y),I===0)return I}else if(!l&&m){let Q=f.slice(F[0],F[1]+1);for(let re=q[0];re<=q[1];++re)if(Y=uf(u[re],Q,_),I=Math.min(I,Y),I===0)return I}else Y=mi(u,q,f,F,_),I=Math.min(I,Y)}else{let Y=Ex(q,l),Q=Ex(F,m);cf(C,I,_,u,f,Y[0],Q[0]),cf(C,I,_,u,f,Y[0],Q[1]),cf(C,I,_,u,f,Y[1],Q[0]),cf(C,I,_,u,f,Y[1],Q[1])}}return I}function Mx(u){return u.type==="MultiPolygon"?u.coordinates.map(l=>({type:"Polygon",coordinates:l})):u.type==="MultiLineString"?u.coordinates.map(l=>({type:"LineString",coordinates:l})):u.type==="MultiPoint"?u.coordinates.map(l=>({type:"Point",coordinates:l})):[u]}class ff{constructor(l,f){this.type=ut,this.geojson=l,this.geometries=f}static parse(l,f){if(l.length!==2)return f.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(nf(l[1])){let m=l[1];if(m.type==="FeatureCollection")return new ff(m,m.features.map(_=>Mx(_.geometry)).flat());if(m.type==="Feature")return new ff(m,Mx(m.geometry));if("type"in m&&"coordinates"in m)return new ff(m,Mx(m))}return f.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(f,m){let _=f.geometry(),E=_.flat().map(P=>wx([P.x,P.y],f.canonical));if(_.length===0)return NaN;let I=new Sx(E[0][1]),C=1/0;for(let P of m){switch(P.type){case"Point":C=Math.min(C,Zd(E,!1,[P.coordinates],!1,I,C));break;case"LineString":C=Math.min(C,Zd(E,!1,P.coordinates,!0,I,C));break;case"Polygon":C=Math.min(C,Wd(E,!1,P.coordinates,I,C));}if(C===0)return C}return C}(l,this.geometries);if(l.geometryType()==="LineString")return function(f,m){let _=f.geometry(),E=_.flat().map(P=>wx([P.x,P.y],f.canonical));if(_.length===0)return NaN;let I=new Sx(E[0][1]),C=1/0;for(let P of m){switch(P.type){case"Point":C=Math.min(C,Zd(E,!0,[P.coordinates],!1,I,C));break;case"LineString":C=Math.min(C,Zd(E,!0,P.coordinates,!0,I,C));break;case"Polygon":C=Math.min(C,Wd(E,!0,P.coordinates,I,C));}if(C===0)return C}return C}(l,this.geometries);if(l.geometryType()==="Polygon")return function(f,m){let _=f.geometry();if(_.length===0||_[0].length===0)return NaN;let E=eg(_,0).map(P=>P.map(q=>q.map(F=>wx([F.x,F.y],f.canonical)))),I=new Sx(E[0][0][0][1]),C=1/0;for(let P of m)for(let q of E){switch(P.type){case"Point":C=Math.min(C,Wd([P.coordinates],!1,q,I,C));break;case"LineString":C=Math.min(C,Wd(P.coordinates,!0,q,I,C));break;case"Polygon":C=Math.min(C,Dn(q,P.coordinates,I,C));}if(C===0)return C}return C}(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}let Nh={"==":F2,"!=":UI,">":z2,"<":VI,">=":GI,"<=":B2,array:Ws,at:mx,boolean:Ws,case:Wv,coalesce:Kv,collator:$d,format:Jv,image:_x,in:vx,"index-of":Ph,interpolate:sa,"interpolate-hcl":sa,"interpolate-lab":sa,length:xx,let:ic,literal:Hs,match:gx,number:Ws,"number-format":yx,object:Ws,slice:Vd,step:Oh,string:Ws,"to-boolean":Zs,"to-color":Zs,"to-number":Zs,"to-string":Zs,var:on,within:lf,distance:ff};class ls{constructor(l,f,m,_){this.name=l,this.type=f,this._evaluate=m,this.args=_}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,f){let m=l[0],_=ls.definitions[m];if(!_)return f.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);let E=Array.isArray(_)?_[0]:_.type,I=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,C=I.filter(([q])=>!Array.isArray(q)||q.length===l.length-1),P=null;for(let[q,F]of C){P=new of(f.registry,Yd,f.path,null,f.scope);let U=[],Z=!1;for(let Y=1;Y<l.length;Y++){let Q=l[Y],re=Array.isArray(q)?q[Y-1]:q.type,fe=P.parse(Q,1+U.length,re);if(!fe){Z=!0;break}U.push(fe)}if(!Z)if(Array.isArray(q)&&q.length!==U.length)P.error(`Expected ${q.length} arguments, but found ${U.length} instead.`);else{for(let Y=0;Y<U.length;Y++){let Q=Array.isArray(q)?q[Y]:q.type,re=U[Y];P.concat(Y+1).checkSubtype(Q,re.type)}if(P.errors.length===0)return new ls(m,E,F,U)}}if(C.length===1)f.errors.push(...P.errors);else{let q=(C.length?C:I).map(([U])=>{return Z=U,Array.isArray(Z)?`(${Z.map(H).join(", ")})`:`(${H(Z.type)}...)`;var Z}).join(" | "),F=[];for(let U=1;U<l.length;U++){let Z=f.parse(l[U],1+F.length);if(!Z)return null;F.push(H(Z.type))}f.error(`Expected arguments of type ${q}, but found (${F.join(", ")}) instead.`)}return null}static register(l,f){ls.definitions=f;for(let m in f)l[m]=ls}}function Rx(u,[l,f,m,_]){l=l.evaluate(u),f=f.evaluate(u),m=m.evaluate(u);let E=_?_.evaluate(u):1,I=Rh(l,f,m,E);if(I)throw new Ci(I);return new mn(l/255,f/255,m/255,E,!1)}function Px(u,l){return u in l}function Ox(u,l){let f=l[u];return f===void 0?null:f}function hf(u){return{type:u}}function Yd(u){if(u instanceof on)return Yd(u.boundExpression);if(u instanceof ls&&u.name==="error"||u instanceof $d||u instanceof lf||u instanceof ff)return!1;let l=u instanceof Zs||u instanceof Ws,f=!0;return u.eachChild(m=>{f=l?f&&Yd(m):f&&m instanceof Hs}),!!f&&Kd(u)&&Xd(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Kd(u){if(u instanceof ls&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof lf||u instanceof ff)return!1;let l=!0;return u.eachChild(f=>{l&&!Kd(f)&&(l=!1)}),l}function kh(u){if(u instanceof ls&&u.name==="feature-state")return!1;let l=!0;return u.eachChild(f=>{l&&!kh(f)&&(l=!1)}),l}function Xd(u,l){if(u instanceof ls&&l.indexOf(u.name)>=0)return!1;let f=!0;return u.eachChild(m=>{f&&!Xd(m,l)&&(f=!1)}),f}function ig(u){return{result:"success",value:u}}function qh(u){return{result:"error",value:u}}function jh(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function nT(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function Lx(u){return!!u.expression&&u.expression.interpolated}function tn(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function og(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function J2(u){return u}function iT(u,l){let f=l.type==="color",m=u.stops&&typeof u.stops[0][0]=="object",_=m||!(m||u.property!==void 0),E=u.type||(Lx(l)?"exponential":"interval");if(f||l.type==="padding"){let F=f?mn.parse:qa.parse;(u=Qn({},u)).stops&&(u.stops=u.stops.map(U=>[U[0],F(U[1])])),u.default=F(u.default?u.default:l.default)}if(u.colorSpace&&(I=u.colorSpace)!=="rgb"&&I!=="hcl"&&I!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var I;let C,P,q;if(E==="exponential")C=aT;else if(E==="interval")C=ag;else if(E==="categorical"){C=oT,P=Object.create(null);for(let F of u.stops)P[F[0]]=F[1];q=typeof u.stops[0][0]}else{if(E!=="identity")throw new Error(`Unknown function type "${E}"`);C=sT}if(m){let F={},U=[];for(let Q=0;Q<u.stops.length;Q++){let re=u.stops[Q],fe=re[0].zoom;F[fe]===void 0&&(F[fe]={zoom:fe,type:u.type,property:u.property,default:u.default,stops:[]},U.push(fe)),F[fe].stops.push([re[0].value,re[1]])}let Z=[];for(let Q of U)Z.push([F[Q].zoom,iT(F[Q],l)]);let Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:sa.interpolationFactor.bind(void 0,Y),zoomStops:Z.map(Q=>Q[0]),evaluate:({zoom:Q},re)=>aT({stops:Z,base:u.base},l,Q).evaluate(Q,re)}}if(_){let F=E==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:sa.interpolationFactor.bind(void 0,F),zoomStops:u.stops.map(U=>U[0]),evaluate:({zoom:U})=>C(u,l,U,P,q)}}return{kind:"source",evaluate(F,U){let Z=U&&U.properties?U.properties[u.property]:void 0;return Z===void 0?Fh(u.default,l.default):C(u,l,Z,P,q)}}}function Fh(u,l,f){return u!==void 0?u:l!==void 0?l:f!==void 0?f:void 0}function oT(u,l,f,m,_){return Fh(typeof f===_?m[f]:void 0,u.default,l.default)}function ag(u,l,f){if(tn(f)!=="number")return Fh(u.default,l.default);let m=u.stops.length;if(m===1||f<=u.stops[0][0])return u.stops[0][1];if(f>=u.stops[m-1][0])return u.stops[m-1][1];let _=Zv(u.stops.map(E=>E[0]),f);return u.stops[_][1]}function aT(u,l,f){let m=u.base!==void 0?u.base:1;if(tn(f)!=="number")return Fh(u.default,l.default);let _=u.stops.length;if(_===1||f<=u.stops[0][0])return u.stops[0][1];if(f>=u.stops[_-1][0])return u.stops[_-1][1];let E=Zv(u.stops.map(F=>F[0]),f),I=function(F,U,Z,Y){let Q=Y-Z,re=F-Z;return Q===0?0:U===1?re/Q:(Math.pow(U,re)-1)/(Math.pow(U,Q)-1)}(f,m,u.stops[E][0],u.stops[E+1][0]),C=u.stops[E][1],P=u.stops[E+1][1],q=aa[l.type]||J2;return typeof C.evaluate=="function"?{evaluate(...F){let U=C.evaluate.apply(void 0,F),Z=P.evaluate.apply(void 0,F);if(U!==void 0&&Z!==void 0)return q(U,Z,I,u.colorSpace)}}:q(C,P,I,u.colorSpace)}function sT(u,l,f){switch(l.type){case"color":f=mn.parse(f);break;case"formatted":f=ka.fromString(f.toString());break;case"resolvedImage":f=ja.fromString(f.toString());break;case"padding":f=qa.parse(f);break;default:tn(f)===l.type||l.type==="enum"&&l.values[f]||(f=void 0);}return Fh(f,u.default,l.default)}ls.register(Nh,{error:[{kind:"error"},[vr],(u,[l])=>{throw new Ci(l.evaluate(u))}],typeof:[vr,[Ee],(u,[l])=>H(ki(l.evaluate(u)))],"to-rgba":[W(ut,4),[Ai],(u,[l])=>{let[f,m,_,E]=l.evaluate(u).rgb;return[255*f,255*m,255*_,E]}],rgb:[Ai,[ut,ut,ut],Rx],rgba:[Ai,[ut,ut,ut,ut],Rx],has:{type:zt,overloads:[[[vr],(u,[l])=>Px(l.evaluate(u),u.properties())],[[vr,hn],(u,[l,f])=>Px(l.evaluate(u),f.evaluate(u))]]},get:{type:Ee,overloads:[[[vr],(u,[l])=>Ox(l.evaluate(u),u.properties())],[[vr,hn],(u,[l,f])=>Ox(l.evaluate(u),f.evaluate(u))]]},"feature-state":[Ee,[vr],(u,[l])=>Ox(l.evaluate(u),u.featureState||{})],properties:[hn,[],u=>u.properties()],"geometry-type":[vr,[],u=>u.geometryType()],id:[Ee,[],u=>u.id()],zoom:[ut,[],u=>u.globals.zoom],"heatmap-density":[ut,[],u=>u.globals.heatmapDensity||0],"line-progress":[ut,[],u=>u.globals.lineProgress||0],accumulated:[Ee,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[ut,hf(ut),(u,l)=>{let f=0;for(let m of l)f+=m.evaluate(u);return f}],"*":[ut,hf(ut),(u,l)=>{let f=1;for(let m of l)f*=m.evaluate(u);return f}],"-":{type:ut,overloads:[[[ut,ut],(u,[l,f])=>l.evaluate(u)-f.evaluate(u)],[[ut],(u,[l])=>-l.evaluate(u)]]},"/":[ut,[ut,ut],(u,[l,f])=>l.evaluate(u)/f.evaluate(u)],"%":[ut,[ut,ut],(u,[l,f])=>l.evaluate(u)%f.evaluate(u)],ln2:[ut,[],()=>Math.LN2],pi:[ut,[],()=>Math.PI],e:[ut,[],()=>Math.E],"^":[ut,[ut,ut],(u,[l,f])=>Math.pow(l.evaluate(u),f.evaluate(u))],sqrt:[ut,[ut],(u,[l])=>Math.sqrt(l.evaluate(u))],log10:[ut,[ut],(u,[l])=>Math.log(l.evaluate(u))/Math.LN10],ln:[ut,[ut],(u,[l])=>Math.log(l.evaluate(u))],log2:[ut,[ut],(u,[l])=>Math.log(l.evaluate(u))/Math.LN2],sin:[ut,[ut],(u,[l])=>Math.sin(l.evaluate(u))],cos:[ut,[ut],(u,[l])=>Math.cos(l.evaluate(u))],tan:[ut,[ut],(u,[l])=>Math.tan(l.evaluate(u))],asin:[ut,[ut],(u,[l])=>Math.asin(l.evaluate(u))],acos:[ut,[ut],(u,[l])=>Math.acos(l.evaluate(u))],atan:[ut,[ut],(u,[l])=>Math.atan(l.evaluate(u))],min:[ut,hf(ut),(u,l)=>Math.min(...l.map(f=>f.evaluate(u)))],max:[ut,hf(ut),(u,l)=>Math.max(...l.map(f=>f.evaluate(u)))],abs:[ut,[ut],(u,[l])=>Math.abs(l.evaluate(u))],round:[ut,[ut],(u,[l])=>{let f=l.evaluate(u);return f<0?-Math.round(-f):Math.round(f)}],floor:[ut,[ut],(u,[l])=>Math.floor(l.evaluate(u))],ceil:[ut,[ut],(u,[l])=>Math.ceil(l.evaluate(u))],"filter-==":[zt,[vr,Ee],(u,[l,f])=>u.properties()[l.value]===f.value],"filter-id-==":[zt,[Ee],(u,[l])=>u.id()===l.value],"filter-type-==":[zt,[vr],(u,[l])=>u.geometryType()===l.value],"filter-<":[zt,[vr,Ee],(u,[l,f])=>{let m=u.properties()[l.value],_=f.value;return typeof m==typeof _&&m<_}],"filter-id-<":[zt,[Ee],(u,[l])=>{let f=u.id(),m=l.value;return typeof f==typeof m&&f<m}],"filter->":[zt,[vr,Ee],(u,[l,f])=>{let m=u.properties()[l.value],_=f.value;return typeof m==typeof _&&m>_}],"filter-id->":[zt,[Ee],(u,[l])=>{let f=u.id(),m=l.value;return typeof f==typeof m&&f>m}],"filter-<=":[zt,[vr,Ee],(u,[l,f])=>{let m=u.properties()[l.value],_=f.value;return typeof m==typeof _&&m<=_}],"filter-id-<=":[zt,[Ee],(u,[l])=>{let f=u.id(),m=l.value;return typeof f==typeof m&&f<=m}],"filter->=":[zt,[vr,Ee],(u,[l,f])=>{let m=u.properties()[l.value],_=f.value;return typeof m==typeof _&&m>=_}],"filter-id->=":[zt,[Ee],(u,[l])=>{let f=u.id(),m=l.value;return typeof f==typeof m&&f>=m}],"filter-has":[zt,[Ee],(u,[l])=>l.value in u.properties()],"filter-has-id":[zt,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[zt,[W(vr)],(u,[l])=>l.value.indexOf(u.geometryType())>=0],"filter-id-in":[zt,[W(Ee)],(u,[l])=>l.value.indexOf(u.id())>=0],"filter-in-small":[zt,[vr,W(Ee)],(u,[l,f])=>f.value.indexOf(u.properties()[l.value])>=0],"filter-in-large":[zt,[vr,W(Ee)],(u,[l,f])=>function(m,_,E,I){for(;E<=I;){let C=E+I>>1;if(_[C]===m)return!0;_[C]>m?I=C-1:E=C+1}return!1}(u.properties()[l.value],f.value,0,f.value.length-1)],all:{type:zt,overloads:[[[zt,zt],(u,[l,f])=>l.evaluate(u)&&f.evaluate(u)],[hf(zt),(u,l)=>{for(let f of l)if(!f.evaluate(u))return!1;return!0}]]},any:{type:zt,overloads:[[[zt,zt],(u,[l,f])=>l.evaluate(u)||f.evaluate(u)],[hf(zt),(u,l)=>{for(let f of l)if(f.evaluate(u))return!0;return!1}]]},"!":[zt,[zt],(u,[l])=>!l.evaluate(u)],"is-supported-script":[zt,[vr],(u,[l])=>{let f=u.globals&&u.globals.isSupportedScript;return!f||f(l.evaluate(u))}],upcase:[vr,[vr],(u,[l])=>l.evaluate(u).toUpperCase()],downcase:[vr,[vr],(u,[l])=>l.evaluate(u).toLowerCase()],concat:[vr,hf(Ee),(u,l)=>l.map(f=>Ud(f.evaluate(u))).join("")],"resolved-locale":[vr,[Oe],(u,[l])=>l.evaluate(u).resolvedLocale()]});class sg{constructor(l,f){var m;this.expression=l,this._warningHistory={},this._evaluator=new Hv,this._defaultValue=f?(m=f).type==="color"&&og(m.default)?new mn(0,0,0,0):m.type==="color"?mn.parse(m.default)||null:m.type==="padding"?qa.parse(m.default)||null:m.type==="variableAnchorOffsetCollection"?ss.parse(m.default)||null:m.default===void 0?null:m.default:null,this._enumValues=f&&f.type==="enum"?f.values:null}evaluateWithoutErrorHandling(l,f,m,_,E,I){return this._evaluator.globals=l,this._evaluator.feature=f,this._evaluator.featureState=m,this._evaluator.canonical=_,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=I,this.expression.evaluate(this._evaluator)}evaluate(l,f,m,_,E,I){this._evaluator.globals=l,this._evaluator.feature=f||null,this._evaluator.featureState=m||null,this._evaluator.canonical=_,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=I||null;try{let C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new Ci(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console!="undefined"&&console.warn(C.message)),this._defaultValue}}}function lg(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in Nh}function zh(u,l){let f=new of(Nh,Yd,[],l?function(_){let E={color:Ai,string:vr,number:ut,enum:vr,boolean:zt,formatted:it,padding:bt,resolvedImage:vt,variableAnchorOffsetCollection:oe};return _.type==="array"?W(E[_.value]||Ee,_.length):E[_.type]}(l):void 0),m=f.parse(u,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?ig(new sg(m,l)):qh(f.errors)}class Bh{constructor(l,f){this.kind=l,this._styleExpression=f,this.isStateDependent=l!=="constant"&&!kh(f.expression)}evaluateWithoutErrorHandling(l,f,m,_,E,I){return this._styleExpression.evaluateWithoutErrorHandling(l,f,m,_,E,I)}evaluate(l,f,m,_,E,I){return this._styleExpression.evaluate(l,f,m,_,E,I)}}class Uh{constructor(l,f,m,_){this.kind=l,this.zoomStops=m,this._styleExpression=f,this.isStateDependent=l!=="camera"&&!kh(f.expression),this.interpolationType=_}evaluateWithoutErrorHandling(l,f,m,_,E,I){return this._styleExpression.evaluateWithoutErrorHandling(l,f,m,_,E,I)}evaluate(l,f,m,_,E,I){return this._styleExpression.evaluate(l,f,m,_,E,I)}interpolationFactor(l,f,m){return this.interpolationType?sa.interpolationFactor(this.interpolationType,l,f,m):0}}function Dx(u,l){let f=zh(u,l);if(f.result==="error")return f;let m=f.value.expression,_=Kd(m);if(!_&&!jh(l))return qh([new An("","data expressions not supported")]);let E=Xd(m,["zoom"]);if(!E&&!nT(l))return qh([new An("","zoom expressions not supported")]);let I=Jd(m);return I||E?I instanceof An?qh([I]):I instanceof sa&&!Lx(l)?qh([new An("","\"interpolate\" expressions cannot be used with this property")]):ig(I?new Uh(_?"camera":"composite",f.value,I.labels,I instanceof sa?I.interpolation:void 0):new Bh(_?"constant":"source",f.value)):qh([new An("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class Vh{constructor(l,f){this._parameters=l,this._specification=f,Qn(this,iT(this._parameters,this._specification))}static deserialize(l){return new Vh(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function Jd(u){let l=null;if(u instanceof ic)l=Jd(u.result);else if(u instanceof Kv){for(let f of u.args)if(l=Jd(f),l)break}else(u instanceof Oh||u instanceof sa)&&u.input instanceof ls&&u.input.name==="zoom"&&(l=u);return l instanceof An||u.eachChild(f=>{let m=Jd(f);m instanceof An?l=m:!l&&m?l=new An("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):l&&m&&l!==m&&(l=new An("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),l}function ug(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(let l of u.slice(1))if(!ug(l)&&typeof l!="boolean")return!1;return!0;default:return!0;}}let cg={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Nx(u){if(u==null)return{filter:()=>!0,needGeometry:!1};ug(u)||(u=fg(u));let l=zh(u,cg);if(l.result==="error")throw new Error(l.value.map(f=>`${f.key}: ${f.message}`).join(", "));return{filter:(f,m,_)=>l.value.evaluate(f,m,{},_),needGeometry:lT(u)}}function Q2(u,l){return u<l?-1:u>l?1:0}function lT(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let l=1;l<u.length;l++)if(lT(u[l]))return!0;return!1}function fg(u){if(!u)return!0;let l=u[0];return u.length<=1?l!=="any":l==="=="?kx(u[1],u[2],"=="):l==="!="?So(kx(u[1],u[2],"==")):l==="<"||l===">"||l==="<="||l===">="?kx(u[1],u[2],l):l==="any"?(f=u.slice(1),["any"].concat(f.map(fg))):l==="all"?["all"].concat(u.slice(1).map(fg)):l==="none"?["all"].concat(u.slice(1).map(fg).map(So)):l==="in"?Qd(u[1],u.slice(2)):l==="!in"?So(Qd(u[1],u.slice(2))):l==="has"?em(u[1]):l!=="!has"||So(em(u[1]));var f}function kx(u,l,f){switch(u){case"$type":return[`filter-type-${f}`,l];case"$id":return[`filter-id-${f}`,l];default:return[`filter-${f}`,u,l];}}function Qd(u,l){if(l.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(f=>typeof f!=typeof l[0])?["filter-in-large",u,["literal",l.sort(Q2)]]:["filter-in-small",u,["literal",l]];}}function em(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u];}}function So(u){return["!",u]}function pf(u){let l=typeof u;if(l==="number"||l==="boolean"||l==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let _="[";for(let E of u)_+=`${pf(E)},`;return`${_}]`}let f=Object.keys(u).sort(),m="{";for(let _=0;_<f.length;_++)m+=`${JSON.stringify(f[_])}:${pf(u[f[_]])},`;return`${m}}`}function uT(u){let l="";for(let f of jt)l+=`/${pf(u[f])}`;return l}function cT(u){let l=u.value;return l?[new nt(u.key,l,"constants have been deprecated as of v8")]:[]}function vi(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function Ys(u){if(Array.isArray(u))return u.map(Ys);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){let l={};for(let f in u)l[f]=Ys(u[f]);return l}return vi(u)}function Fa(u){let l=u.key,f=u.value,m=u.valueSpec||{},_=u.objectElementValidators||{},E=u.style,I=u.styleSpec,C=u.validateSpec,P=[],q=tn(f);if(q!=="object")return[new nt(l,f,`object expected, ${q} found`)];for(let F in f){let U=F.split(".")[0],Z=m[U]||m["*"],Y;if(_[U])Y=_[U];else if(m[U])Y=C;else if(_["*"])Y=_["*"];else{if(!m["*"]){P.push(new nt(l,f[F],`unknown property "${F}"`));continue}Y=C}P=P.concat(Y({key:(l&&`${l}.`)+F,value:f[F],valueSpec:Z,style:E,styleSpec:I,object:f,objectKey:F,validateSpec:C},f))}for(let F in m)_[F]||m[F].required&&m[F].default===void 0&&f[F]===void 0&&P.push(new nt(l,f,`missing required property "${F}"`));return P}function tm(u){let l=u.value,f=u.valueSpec,m=u.style,_=u.styleSpec,E=u.key,I=u.arrayElementValidator||u.validateSpec;if(tn(l)!=="array")return[new nt(E,l,`array expected, ${tn(l)} found`)];if(f.length&&l.length!==f.length)return[new nt(E,l,`array length ${f.length} expected, length ${l.length} found`)];if(f["min-length"]&&l.length<f["min-length"])return[new nt(E,l,`array length at least ${f["min-length"]} expected, length ${l.length} found`)];let C={type:f.value,values:f.values};_.$version<7&&(C.function=f.function),tn(f.value)==="object"&&(C=f.value);let P=[];for(let q=0;q<l.length;q++)P=P.concat(I({array:l,arrayIndex:q,value:l[q],valueSpec:C,validateSpec:u.validateSpec,style:m,styleSpec:_,key:`${E}[${q}]`}));return P}function qx(u){let l=u.key,f=u.value,m=u.valueSpec,_=tn(f);return _==="number"&&f!=f&&(_="NaN"),_!=="number"?[new nt(l,f,`number expected, ${_} found`)]:"minimum"in m&&f<m.minimum?[new nt(l,f,`${f} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&f>m.maximum?[new nt(l,f,`${f} is greater than the maximum value ${m.maximum}`)]:[]}function hg(u){let l=u.valueSpec,f=vi(u.value.type),m,_,E,I={},C=f!=="categorical"&&u.value.property===void 0,P=!C,q=tn(u.value.stops)==="array"&&tn(u.value.stops[0])==="array"&&tn(u.value.stops[0][0])==="object",F=Fa({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(Y){if(f==="identity")return[new nt(Y.key,Y.value,"identity function may not have a \"stops\" property")];let Q=[],re=Y.value;return Q=Q.concat(tm({key:Y.key,value:re,valueSpec:Y.valueSpec,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:U})),tn(re)==="array"&&re.length===0&&Q.push(new nt(Y.key,re,"array must have at least one stop")),Q},default:function(Y){return Y.validateSpec({key:Y.key,value:Y.value,valueSpec:l,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec})}}});return f==="identity"&&C&&F.push(new nt(u.key,u.value,"missing required property \"property\"")),f==="identity"||u.value.stops||F.push(new nt(u.key,u.value,"missing required property \"stops\"")),f==="exponential"&&u.valueSpec.expression&&!Lx(u.valueSpec)&&F.push(new nt(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(P&&!jh(u.valueSpec)?F.push(new nt(u.key,u.value,"property functions not supported")):C&&!nT(u.valueSpec)&&F.push(new nt(u.key,u.value,"zoom functions not supported"))),f!=="categorical"&&!q||u.value.property!==void 0||F.push(new nt(u.key,u.value,"\"property\" property is required")),F;function U(Y){let Q=[],re=Y.value,fe=Y.key;if(tn(re)!=="array")return[new nt(fe,re,`array expected, ${tn(re)} found`)];if(re.length!==2)return[new nt(fe,re,`array length 2 expected, length ${re.length} found`)];if(q){if(tn(re[0])!=="object")return[new nt(fe,re,`object expected, ${tn(re[0])} found`)];if(re[0].zoom===void 0)return[new nt(fe,re,"object stop key must have zoom")];if(re[0].value===void 0)return[new nt(fe,re,"object stop key must have value")];if(E&&E>vi(re[0].zoom))return[new nt(fe,re[0].zoom,"stop zoom values must appear in ascending order")];vi(re[0].zoom)!==E&&(E=vi(re[0].zoom),_=void 0,I={}),Q=Q.concat(Fa({key:`${fe}[0]`,value:re[0],valueSpec:{zoom:{}},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:qx,value:Z}}))}else Q=Q.concat(Z({key:`${fe}[0]`,value:re[0],valueSpec:{},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec},re));return lg(Ys(re[1]))?Q.concat([new nt(`${fe}[1]`,re[1],"expressions are not allowed in function stops.")]):Q.concat(Y.validateSpec({key:`${fe}[1]`,value:re[1],valueSpec:l,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec}))}function Z(Y,Q){let re=tn(Y.value),fe=vi(Y.value),de=Y.value!==null?Y.value:Q;if(m){if(re!==m)return[new nt(Y.key,de,`${re} stop domain type must match previous stop domain type ${m}`)]}else m=re;if(re!=="number"&&re!=="string"&&re!=="boolean")return[new nt(Y.key,de,"stop domain value must be a number, string, or boolean")];if(re!=="number"&&f!=="categorical"){let qe=`number expected, ${re} found`;return jh(l)&&f===void 0&&(qe+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new nt(Y.key,de,qe)]}return f!=="categorical"||re!=="number"||isFinite(fe)&&Math.floor(fe)===fe?f!=="categorical"&&re==="number"&&_!==void 0&&fe<_?[new nt(Y.key,de,"stop domain values must appear in ascending order")]:(_=fe,f==="categorical"&&fe in I?[new nt(Y.key,de,"stop domain values must be unique")]:(I[fe]=!0,[])):[new nt(Y.key,de,`integer expected, found ${fe}`)]}}function Gh(u){let l=(u.expressionContext==="property"?Dx:zh)(Ys(u.value),u.valueSpec);if(l.result==="error")return l.value.map(m=>new nt(`${u.key}${m.key}`,u.value,m.message));let f=l.value.expression||l.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!f.outputDefined())return[new nt(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!kh(f))return[new nt(u.key,u.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(u.expressionContext==="filter"&&!kh(f))return[new nt(u.key,u.value,"\"feature-state\" data expressions are not supported with filters.")];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!Xd(f,["zoom","feature-state"]))return[new nt(u.key,u.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(u.expressionContext==="cluster-initial"&&!Kd(f))return[new nt(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Tu(u){let l=u.key,f=u.value,m=u.valueSpec,_=[];return Array.isArray(m.values)?m.values.indexOf(vi(f))===-1&&_.push(new nt(l,f,`expected one of [${m.values.join(", ")}], ${JSON.stringify(f)} found`)):Object.keys(m.values).indexOf(vi(f))===-1&&_.push(new nt(l,f,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(f)} found`)),_}function jx(u){return ug(Ys(u.value))?Gh(Qn({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):pg(u)}function pg(u){let l=u.value,f=u.key;if(tn(l)!=="array")return[new nt(f,l,`array expected, ${tn(l)} found`)];let m=u.styleSpec,_,E=[];if(l.length<1)return[new nt(f,l,"filter array must have at least 1 element")];switch(E=E.concat(Tu({key:`${f}[0]`,value:l[0],valueSpec:m.filter_operator,style:u.style,styleSpec:u.styleSpec})),vi(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&vi(l[1])==="$type"&&E.push(new nt(f,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&E.push(new nt(f,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(_=tn(l[1]),_!=="string"&&E.push(new nt(`${f}[1]`,l[1],`string expected, ${_} found`)));for(let I=2;I<l.length;I++)_=tn(l[I]),vi(l[1])==="$type"?E=E.concat(Tu({key:`${f}[${I}]`,value:l[I],valueSpec:m.geometry_type,style:u.style,styleSpec:u.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&E.push(new nt(`${f}[${I}]`,l[I],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let I=1;I<l.length;I++)E=E.concat(pg({key:`${f}[${I}]`,value:l[I],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":_=tn(l[1]),l.length!==2?E.push(new nt(f,l,`filter array for "${l[0]}" operator must have 2 elements`)):_!=="string"&&E.push(new nt(`${f}[1]`,l[1],`string expected, ${_} found`));}return E}function Fx(u,l){let f=u.key,m=u.validateSpec,_=u.style,E=u.styleSpec,I=u.value,C=u.objectKey,P=E[`${l}_${u.layerType}`];if(!P)return[];let q=C.match(/^(.*)-transition$/);if(l==="paint"&&q&&P[q[1]]&&P[q[1]].transition)return m({key:f,value:I,valueSpec:E.transition,style:_,styleSpec:E});let F=u.valueSpec||P[C];if(!F)return[new nt(f,I,`unknown property "${C}"`)];let U;if(tn(I)==="string"&&jh(F)&&!F.tokens&&(U=/^{([^}]+)}$/.exec(I)))return[new nt(f,I,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(U[1])} }\`.`)];let Z=[];return u.layerType==="symbol"&&(C==="text-field"&&_&&!_.glyphs&&Z.push(new nt(f,I,"use of \"text-field\" requires a style \"glyphs\" property")),C==="text-font"&&og(Ys(I))&&vi(I.type)==="identity"&&Z.push(new nt(f,I,"\"text-font\" does not support identity functions"))),Z.concat(m({key:u.key,value:I,valueSpec:F,style:_,styleSpec:E,expressionContext:"property",propertyType:l,propertyKey:C}))}function dg(u){return Fx(u,"paint")}function zx(u){return Fx(u,"layout")}function Bx(u){let l=[],f=u.value,m=u.key,_=u.style,E=u.styleSpec;f.type||f.ref||l.push(new nt(m,f,"either \"type\" or \"ref\" is required"));let I=vi(f.type),C=vi(f.ref);if(f.id){let P=vi(f.id);for(let q=0;q<u.arrayIndex;q++){let F=_.layers[q];vi(F.id)===P&&l.push(new nt(m,f.id,`duplicate layer id "${f.id}", previously used at line ${F.id.__line__}`))}}if("ref"in f){let P;["type","source","source-layer","filter","layout"].forEach(q=>{q in f&&l.push(new nt(m,f[q],`"${q}" is prohibited for ref layers`))}),_.layers.forEach(q=>{vi(q.id)===C&&(P=q)}),P?P.ref?l.push(new nt(m,f.ref,"ref cannot reference another ref layer")):I=vi(P.type):l.push(new nt(m,f.ref,`ref layer "${C}" not found`))}else if(I!=="background")if(f.source){let P=_.sources&&_.sources[f.source],q=P&&vi(P.type);P?q==="vector"&&I==="raster"?l.push(new nt(m,f.source,`layer "${f.id}" requires a raster source`)):q!=="raster-dem"&&I==="hillshade"?l.push(new nt(m,f.source,`layer "${f.id}" requires a raster-dem source`)):q==="raster"&&I!=="raster"?l.push(new nt(m,f.source,`layer "${f.id}" requires a vector source`)):q!=="vector"||f["source-layer"]?q==="raster-dem"&&I!=="hillshade"?l.push(new nt(m,f.source,"raster-dem source can only be used with layer type 'hillshade'.")):I!=="line"||!f.paint||!f.paint["line-gradient"]||q==="geojson"&&P.lineMetrics||l.push(new nt(m,f,`layer "${f.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new nt(m,f,`layer "${f.id}" must specify a "source-layer"`)):l.push(new nt(m,f.source,`source "${f.source}" not found`))}else l.push(new nt(m,f,"missing required property \"source\""));return l=l.concat(Fa({key:m,value:f,valueSpec:E.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${m}.type`,value:f.type,valueSpec:E.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:f,objectKey:"type"}),filter:jx,layout:P=>Fa({layer:f,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":q=>zx(Qn({layerType:I},q))}}),paint:P=>Fa({layer:f,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":q=>dg(Qn({layerType:I},q))}})}})),l}function df(u){let l=u.value,f=u.key,m=tn(l);return m!=="string"?[new nt(f,l,`string expected, ${m} found`)]:[]}let mg={promoteId:function({key:u,value:l}){if(tn(l)==="string")return df({key:u,value:l});{let f=[];for(let m in l)f.push(...df({key:`${u}.${m}`,value:l[m]}));return f}}};function rm(u){let l=u.value,f=u.key,m=u.styleSpec,_=u.style,E=u.validateSpec;if(!l.type)return[new nt(f,l,"\"type\" is required")];let I=vi(l.type),C;switch(I){case"vector":case"raster":return C=Fa({key:f,value:l,valueSpec:m[`source_${I.replace("-","_")}`],style:u.style,styleSpec:m,objectElementValidators:mg,validateSpec:E}),C;case"raster-dem":return C=function(P){var q;let F=(q=P.sourceName)!==null&&q!==void 0?q:"",U=P.value,Z=P.styleSpec,Y=Z.source_raster_dem,Q=P.style,re=[],fe=tn(U);if(U===void 0)return re;if(fe!=="object")return re.push(new nt("source_raster_dem",U,`object expected, ${fe} found`)),re;let de=vi(U.encoding)==="custom",qe=["redFactor","greenFactor","blueFactor","baseShift"],we=P.value.encoding?`"${P.value.encoding}"`:"Default";for(let Ne in U)!de&&qe.includes(Ne)?re.push(new nt(Ne,U[Ne],`In "${F}": "${Ne}" is only valid when "encoding" is set to "custom". ${we} encoding found`)):Y[Ne]?re=re.concat(P.validateSpec({key:Ne,value:U[Ne],valueSpec:Y[Ne],validateSpec:P.validateSpec,style:Q,styleSpec:Z})):re.push(new nt(Ne,U[Ne],`unknown property "${Ne}"`));return re}({sourceName:f,value:l,style:u.style,styleSpec:m,validateSpec:E}),C;case"geojson":if(C=Fa({key:f,value:l,valueSpec:m.source_geojson,style:_,styleSpec:m,validateSpec:E,objectElementValidators:mg}),l.cluster)for(let P in l.clusterProperties){let[q,F]=l.clusterProperties[P],U=typeof q=="string"?[q,["accumulated"],["get",P]]:q;C.push(...Gh({key:`${f}.${P}.map`,value:F,validateSpec:E,expressionContext:"cluster-map"})),C.push(...Gh({key:`${f}.${P}.reduce`,value:U,validateSpec:E,expressionContext:"cluster-reduce"}))}return C;case"video":return Fa({key:f,value:l,valueSpec:m.source_video,style:_,validateSpec:E,styleSpec:m});case"image":return Fa({key:f,value:l,valueSpec:m.source_image,style:_,validateSpec:E,styleSpec:m});case"canvas":return[new nt(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Tu({key:`${f}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:_,validateSpec:E,styleSpec:m});}}function Ux(u){let l=u.value,f=u.styleSpec,m=f.light,_=u.style,E=[],I=tn(l);if(l===void 0)return E;if(I!=="object")return E=E.concat([new nt("light",l,`object expected, ${I} found`)]),E;for(let C in l){let P=C.match(/^(.*)-transition$/);E=E.concat(P&&m[P[1]]&&m[P[1]].transition?u.validateSpec({key:C,value:l[C],valueSpec:f.transition,validateSpec:u.validateSpec,style:_,styleSpec:f}):m[C]?u.validateSpec({key:C,value:l[C],valueSpec:m[C],validateSpec:u.validateSpec,style:_,styleSpec:f}):[new nt(C,l[C],`unknown property "${C}"`)])}return E}function Vx(u){let l=u.value,f=u.styleSpec,m=f.sky,_=u.style,E=tn(l);if(l===void 0)return[];if(E!=="object")return[new nt("sky",l,`object expected, ${E} found`)];let I=[];for(let C in l)I=I.concat(m[C]?u.validateSpec({key:C,value:l[C],valueSpec:m[C],style:_,styleSpec:f}):[new nt(C,l[C],`unknown property "${C}"`)]);return I}function Gx(u){let l=u.value,f=u.styleSpec,m=f.terrain,_=u.style,E=[],I=tn(l);if(l===void 0)return E;if(I!=="object")return E=E.concat([new nt("terrain",l,`object expected, ${I} found`)]),E;for(let C in l)E=E.concat(m[C]?u.validateSpec({key:C,value:l[C],valueSpec:m[C],validateSpec:u.validateSpec,style:_,styleSpec:f}):[new nt(C,l[C],`unknown property "${C}"`)]);return E}function $x(u){let l=[],f=u.value,m=u.key;if(Array.isArray(f)){let _=[],E=[];for(let I in f)f[I].id&&_.includes(f[I].id)&&l.push(new nt(m,f,`all the sprites' ids must be unique, but ${f[I].id} is duplicated`)),_.push(f[I].id),f[I].url&&E.includes(f[I].url)&&l.push(new nt(m,f,`all the sprites' URLs must be unique, but ${f[I].url} is duplicated`)),E.push(f[I].url),l=l.concat(Fa({key:`${m}[${I}]`,value:f[I],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return l}return df({key:m,value:f})}let vg={"*":()=>[],array:tm,boolean:function(u){let l=u.value,f=u.key,m=tn(l);return m!=="boolean"?[new nt(f,l,`boolean expected, ${m} found`)]:[]},number:qx,color:function(u){let l=u.key,f=u.value,m=tn(f);return m!=="string"?[new nt(l,f,`color expected, ${m} found`)]:mn.parse(String(f))?[]:[new nt(l,f,`color expected, "${f}" found`)]},constants:cT,enum:Tu,filter:jx,function:hg,layer:Bx,object:Fa,source:rm,light:Ux,sky:Vx,terrain:Gx,projection:function(u){let l=u.value,f=u.styleSpec,m=f.projection,_=u.style,E=tn(l);if(l===void 0)return[];if(E!=="object")return[new nt("projection",l,`object expected, ${E} found`)];let I=[];for(let C in l)I=I.concat(m[C]?u.validateSpec({key:C,value:l[C],valueSpec:m[C],style:_,styleSpec:f}):[new nt(C,l[C],`unknown property "${C}"`)]);return I},string:df,formatted:function(u){return df(u).length===0?[]:Gh(u)},resolvedImage:function(u){return df(u).length===0?[]:Gh(u)},padding:function(u){let l=u.key,f=u.value;if(tn(f)==="array"){if(f.length<1||f.length>4)return[new nt(l,f,`padding requires 1 to 4 values; ${f.length} values found`)];let m={type:"number"},_=[];for(let E=0;E<f.length;E++)_=_.concat(u.validateSpec({key:`${l}[${E}]`,value:f[E],validateSpec:u.validateSpec,valueSpec:m}));return _}return qx({key:l,value:f,valueSpec:{}})},variableAnchorOffsetCollection:function(u){let l=u.key,f=u.value,m=tn(f),_=u.styleSpec;if(m!=="array"||f.length<1||f.length%2!=0)return[new nt(l,f,"variableAnchorOffsetCollection requires a non-empty array of even length")];let E=[];for(let I=0;I<f.length;I+=2)E=E.concat(Tu({key:`${l}[${I}]`,value:f[I],valueSpec:_.layout_symbol["text-anchor"]})),E=E.concat(tm({key:`${l}[${I+1}]`,value:f[I+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:_}));return E},sprite:$x};function $h(u){let l=u.value,f=u.valueSpec,m=u.styleSpec;return u.validateSpec=$h,f.expression&&og(vi(l))?hg(u):f.expression&&lg(Ys(l))?Gh(u):f.type&&vg[f.type]?vg[f.type](u):Fa(Qn({},u,{valueSpec:f.type?m[f.type]:f}))}function fT(u){let l=u.value,f=u.key,m=df(u);return m.length||(l.indexOf("{fontstack}")===-1&&m.push(new nt(f,l,"\"glyphs\" url must include a \"{fontstack}\" token")),l.indexOf("{range}")===-1&&m.push(new nt(f,l,"\"glyphs\" url must include a \"{range}\" token"))),m}function us(u,l=be){let f=[];return f=f.concat($h({key:"",value:u,valueSpec:l.$root,styleSpec:l,style:u,validateSpec:$h,objectElementValidators:{glyphs:fT,"*":()=>[]}})),u.constants&&(f=f.concat(cT({key:"constants",value:u.constants,style:u,styleSpec:l,validateSpec:$h}))),Hx(f)}function El(u){return function(l){return u(Sn(Et({},l),{validateSpec:$h}))}}function Hx(u){return[].concat(u).sort((l,f)=>l.line-f.line)}function Ks(u){return function(...l){return Hx(u.apply(this,l))}}us.source=Ks(El(rm)),us.sprite=Ks(El($x)),us.glyphs=Ks(El(fT)),us.light=Ks(El(Ux)),us.sky=Ks(El(Vx)),us.terrain=Ks(El(Gx)),us.layer=Ks(El(Bx)),us.filter=Ks(El(jx)),us.paintProperty=Ks(El(dg)),us.layoutProperty=Ks(El(zx));let mf=us,ek=mf.light,tk=mf.sky,hT=mf.paintProperty,pT=mf.layoutProperty;function Wx(u,l){let f=!1;if(l&&l.length)for(let m of l)u.fire(new Kt(new Error(m.message))),f=!0;return f}class Hh{constructor(l,f,m){let _=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;let I=new Int32Array(this.arrayBuffer);l=I[0],this.d=(f=I[1])+2*(m=I[2]);for(let P=0;P<this.d*this.d;P++){let q=I[3+P],F=I[3+P+1];_.push(q===F?null:I.subarray(q,F))}let C=I[3+_.length+1];this.keys=I.subarray(I[3+_.length],C),this.bboxes=I.subarray(C),this.insert=this._insertReadonly}else{this.d=f+2*m;for(let I=0;I<this.d*this.d;I++)_.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=l,this.padding=m,this.scale=f/l,this.uid=0;let E=m/f*l;this.min=-E,this.max=l+E}insert(l,f,m,_,E){this._forEachCell(f,m,_,E,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(_),this.bboxes.push(E)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,f,m,_,E,I){this.cells[E].push(I)}query(l,f,m,_,E){let I=this.min,C=this.max;if(l<=I&&f<=I&&C<=m&&C<=_&&!E)return Array.prototype.slice.call(this.keys);{let P=[];return this._forEachCell(l,f,m,_,this._queryCell,P,{},E),P}}_queryCell(l,f,m,_,E,I,C,P){let q=this.cells[E];if(q!==null){let F=this.keys,U=this.bboxes;for(let Z=0;Z<q.length;Z++){let Y=q[Z];if(C[Y]===void 0){let Q=4*Y;(P?P(U[Q+0],U[Q+1],U[Q+2],U[Q+3]):l<=U[Q+2]&&f<=U[Q+3]&&m>=U[Q+0]&&_>=U[Q+1])?(C[Y]=!0,I.push(F[Y])):C[Y]=!1}}}}_forEachCell(l,f,m,_,E,I,C,P){let q=this._convertToCellCoord(l),F=this._convertToCellCoord(f),U=this._convertToCellCoord(m),Z=this._convertToCellCoord(_);for(let Y=q;Y<=U;Y++)for(let Q=F;Q<=Z;Q++){let re=this.d*Q+Y;if((!P||P(this._convertFromCellCoord(Y),this._convertFromCellCoord(Q),this._convertFromCellCoord(Y+1),this._convertFromCellCoord(Q+1)))&&E.call(this,l,f,m,_,re,I,C,P))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let l=this.cells,f=3+this.cells.length+1+1,m=0;for(let I=0;I<this.cells.length;I++)m+=this.cells[I].length;let _=new Int32Array(f+m+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let E=f;for(let I=0;I<l.length;I++){let C=l[I];_[3+I]=E,_.set(C,E),E+=C.length}return _[3+l.length]=E,_.set(this.keys,E),E+=this.keys.length,_[3+l.length+1]=E,_.set(this.bboxes,E),E+=this.bboxes.length,_.buffer}static serialize(l,f){let m=l.toArrayBuffer();return f&&f.push(m),{buffer:m}}static deserialize(l){return new Hh(l.buffer)}}let cs={};function kt(u,l,f={}){if(cs[u])throw new Error(`${u} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:u,writeable:!1}),cs[u]={klass:l,omit:f.omit||[],shallow:f.shallow||[]}}kt("Object",Object),kt("TransferableGridIndex",Hh),kt("Color",mn),kt("Error",Error),kt("AJAXError",Le),kt("ResolvedImage",ja),kt("StylePropertyFunction",Vh),kt("StyleExpression",sg,{omit:["_evaluator"]}),kt("ZoomDependentExpression",Uh),kt("ZoomConstantExpression",Bh),kt("CompoundExpression",ls,{omit:["_evaluate"]});for(let u in Nh)Nh[u]._classRegistryKey||kt(`Expression_${u}`,Nh[u]);function gg(u){return u&&typeof ArrayBuffer!="undefined"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Zx(u){return u.$name||u.constructor._classRegistryKey}function dT(u){return!function(l){if(l===null||typeof l!="object")return!1;let f=Zx(l);return!(!f||f==="Object")}(u)&&(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||u instanceof Error||gg(u)||We(u)||ArrayBuffer.isView(u)||u instanceof ImageData)}function Wh(u,l){if(dT(u))return(gg(u)||We(u))&&l&&l.push(u),ArrayBuffer.isView(u)&&l&&l.push(u.buffer),u instanceof ImageData&&l&&l.push(u.data.buffer),u;if(Array.isArray(u)){let E=[];for(let I of u)E.push(Wh(I,l));return E}if(typeof u!="object")throw new Error("can't serialize object of type "+typeof u);let f=Zx(u);if(!f)throw new Error(`can't serialize object of unregistered class ${u.constructor.name}`);if(!cs[f])throw new Error(`${f} is not registered.`);let{klass:m}=cs[f],_=m.serialize?m.serialize(u,l):{};if(m.serialize){if(l&&_===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let E in u){if(!u.hasOwnProperty(E)||cs[f].omit.indexOf(E)>=0)continue;let I=u[E];_[E]=cs[f].shallow.indexOf(E)>=0?I:Wh(I,l)}u instanceof Error&&(_.message=u.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(_.$name=f),_}function Zh(u){if(dT(u))return u;if(Array.isArray(u))return u.map(Zh);if(typeof u!="object")throw new Error("can't deserialize object of type "+typeof u);let l=Zx(u)||"Object";if(!cs[l])throw new Error(`can't deserialize unregistered class ${l}`);let{klass:f}=cs[l];if(!f)throw new Error(`can't deserialize unregistered class ${l}`);if(f.deserialize)return f.deserialize(u);let m=Object.create(f.prototype);for(let _ of Object.keys(u)){if(_==="$name")continue;let E=u[_];m[_]=cs[l].shallow.indexOf(_)>=0?E:Zh(E)}return m}class Yx{constructor(){this.first=!0}update(l,f){let m=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=f):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=f),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=m,!0))}}let Hr={"Latin-1 Supplement":u=>u>=128&&u<=255,"Hangul Jamo":u=>u>=4352&&u<=4607,Khmer:u=>u>=6016&&u<=6143,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Katakana:u=>u>=12448&&u<=12543,Kanbun:u=>u>=12688&&u<=12703,"CJK Strokes":u=>u>=12736&&u<=12783,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"Private Use Area":u=>u>=57344&&u<=63743,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function Kx(u){for(let l of u)if(Jx(l.charCodeAt(0)))return!0;return!1}function rk(u){for(let l of u)if(!Yh(l.charCodeAt(0)))return!1;return!0}function Xx(u){let l=u.map(f=>{try{return new RegExp(`\\p{sc=${f}}`,"u").source}catch(m){return null}}).filter(f=>f);return new RegExp(l.join("|"),"u")}let nk=Xx(["Arab","Dupl","Mong","Ougr","Syrc"]);function Yh(u){return!nk.test(String.fromCodePoint(u))}let mT=Xx(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Jx(u){return!(u!==746&&u!==747&&(u<4352||!(Hr["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Hr["CJK Compatibility"](u)||Hr["CJK Strokes"](u)||!(!Hr["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Hr["Enclosed CJK Letters and Months"](u)||Hr["Ideographic Description Characters"](u)||Hr.Kanbun(u)||Hr.Katakana(u)&&u!==12540||!(!Hr["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Hr["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Hr["Vertical Forms"](u)||Hr["Yijing Hexagram Symbols"](u)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(u))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(u))||mT.test(String.fromCodePoint(u)))))}function vT(u){return!(Jx(u)||function(l){return!!(Hr["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||Hr["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||Hr["Letterlike Symbols"](l)||Hr["Number Forms"](l)||Hr["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||Hr["Control Pictures"](l)&&l!==9251||Hr["Optical Character Recognition"](l)||Hr["Enclosed Alphanumerics"](l)||Hr["Geometric Shapes"](l)||Hr["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||Hr["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||Hr["CJK Symbols and Punctuation"](l)||Hr.Katakana(l)||Hr["Private Use Area"](l)||Hr["CJK Compatibility Forms"](l)||Hr["Small Form Variants"](l)||Hr["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)}(u))}let ik=Xx(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Qx(u){return ik.test(String.fromCodePoint(u))}function ok(u,l){return!(!l&&Qx(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Hr.Khmer(u))}function ak(u){for(let l of u)if(Qx(l.charCodeAt(0)))return!0;return!1}let za=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(u){this.pluginStatus=u.pluginStatus,this.pluginURL=u.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(u){this.applyArabicShaping=u.applyArabicShaping,this.processBidirectionalText=u.processBidirectionalText,this.processStyledBidirectionalText=u.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Vn{constructor(l,f){this.zoom=l,f?(this.now=f.now,this.fadeDuration=f.fadeDuration,this.zoomHistory=f.zoomHistory,this.transition=f.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Yx,this.transition={})}isSupportedScript(l){return function(f,m){for(let _ of f)if(!ok(_.charCodeAt(0),m))return!1;return!0}(l,za.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let l=this.zoom,f=l-Math.floor(l),m=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:f+(1-f)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*f}}}class Kh{constructor(l,f){this.property=l,this.value=f,this.expression=function(m,_){if(og(m))return new Vh(m,_);if(lg(m)){let E=Dx(m,_);if(E.result==="error")throw new Error(E.value.map(I=>`${I.key}: ${I.message}`).join(", "));return E.value}{let E=m;return _.type==="color"&&typeof m=="string"?E=mn.parse(m):_.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(m)&&(E=ss.parse(m)):E=qa.parse(m),{kind:"constant",evaluate:()=>E}}}(f===void 0?l.specification.default:f,l.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(l,f,m){return this.property.possiblyEvaluate(this,l,f,m)}}class yg{constructor(l){this.property=l,this.value=new Kh(l,void 0)}transitioned(l,f){return new gT(this.property,this.value,f,ee({},l.transition,this.transition),l.now)}untransitioned(){return new gT(this.property,this.value,null,{},0)}}class _g{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return le(this._values[l].value.value)}setValue(l,f){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new yg(this._values[l].property)),this._values[l].value=new Kh(this._values[l].property,f===null?void 0:le(f))}getTransition(l){return le(this._values[l].transition)}setTransition(l,f){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new yg(this._values[l].property)),this._values[l].transition=le(f)||void 0}serialize(){let l={};for(let f of Object.keys(this._values)){let m=this.getValue(f);m!==void 0&&(l[f]=m);let _=this.getTransition(f);_!==void 0&&(l[`${f}-transition`]=_)}return l}transitioned(l,f){let m=new nm(this._properties);for(let _ of Object.keys(this._values))m._values[_]=this._values[_].transitioned(l,f._values[_]);return m}untransitioned(){let l=new nm(this._properties);for(let f of Object.keys(this._values))l._values[f]=this._values[f].untransitioned();return l}}class gT{constructor(l,f,m,_,E){this.property=l,this.value=f,this.begin=E+_.delay||0,this.end=this.begin+_.duration||0,l.specification.transition&&(_.delay||_.duration)&&(this.prior=m)}possiblyEvaluate(l,f,m){let _=l.now||0,E=this.value.possiblyEvaluate(l,f,m),I=this.prior;if(I){if(_>this.end)return this.prior=null,E;if(this.value.isDataDriven())return this.prior=null,E;if(_<this.begin)return I.possiblyEvaluate(l,f,m);{let C=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(I.possiblyEvaluate(l,f,m),E,function(P){if(P<=0)return 0;if(P>=1)return 1;let q=P*P,F=q*P;return 4*(P<.5?F:3*(P-q)+F-.75)}(C))}}return E}}class nm{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,f,m){let _=new om(this._properties);for(let E of Object.keys(this._values))_._values[E]=this._values[E].possiblyEvaluate(l,f,m);return _}hasTransition(){for(let l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class im{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues)}hasValue(l){return this._values[l].value!==void 0}getValue(l){return le(this._values[l].value)}setValue(l,f){this._values[l]=new Kh(this._values[l].property,f===null?void 0:le(f))}serialize(){let l={};for(let f of Object.keys(this._values)){let m=this.getValue(f);m!==void 0&&(l[f]=m)}return l}possiblyEvaluate(l,f,m){let _=new om(this._properties);for(let E of Object.keys(this._values))_._values[E]=this._values[E].possiblyEvaluate(l,f,m);return _}}class Il{constructor(l,f,m){this.property=l,this.value=f,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,f,m,_){return this.property.evaluate(this.value,this.parameters,l,f,m,_)}}class om{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class Vt{constructor(l){this.specification=l}possiblyEvaluate(l,f){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(f)}interpolate(l,f,m){let _=aa[this.specification.type];return _?_(l,f,m):l}}class ur{constructor(l,f){this.specification=l,this.overrides=f}possiblyEvaluate(l,f,m,_){return new Il(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(f,null,{},m,_)}:l.expression,f)}interpolate(l,f,m){if(l.value.kind!=="constant"||f.value.kind!=="constant")return l;if(l.value.value===void 0||f.value.value===void 0)return new Il(this,{kind:"constant",value:void 0},l.parameters);let _=aa[this.specification.type];if(_){let E=_(l.value.value,f.value.value,m);return new Il(this,{kind:"constant",value:E},l.parameters)}return l}evaluate(l,f,m,_,E,I){return l.kind==="constant"?l.value:l.evaluate(f,m,_,E,I)}}class xg extends ur{possiblyEvaluate(l,f,m,_){if(l.value===void 0)return new Il(this,{kind:"constant",value:void 0},f);if(l.expression.kind==="constant"){let E=l.expression.evaluate(f,null,{},m,_),I=l.property.specification.type==="resolvedImage"&&typeof E!="string"?E.name:E,C=this._calculate(I,I,I,f);return new Il(this,{kind:"constant",value:C},f)}if(l.expression.kind==="camera"){let E=this._calculate(l.expression.evaluate({zoom:f.zoom-1}),l.expression.evaluate({zoom:f.zoom}),l.expression.evaluate({zoom:f.zoom+1}),f);return new Il(this,{kind:"constant",value:E},f)}return new Il(this,l.expression,f)}evaluate(l,f,m,_,E,I){if(l.kind==="source"){let C=l.evaluate(f,m,_,E,I);return this._calculate(C,C,C,f)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(f.zoom)-1},m,_),l.evaluate({zoom:Math.floor(f.zoom)},m,_),l.evaluate({zoom:Math.floor(f.zoom)+1},m,_),f):l.value}_calculate(l,f,m,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:l,to:f}:{from:m,to:f}}interpolate(l){return l}}class wg{constructor(l){this.specification=l}possiblyEvaluate(l,f,m,_){if(l.value!==void 0){if(l.expression.kind==="constant"){let E=l.expression.evaluate(f,null,{},m,_);return this._calculate(E,E,E,f)}return this._calculate(l.expression.evaluate(new Vn(Math.floor(f.zoom-1),f)),l.expression.evaluate(new Vn(Math.floor(f.zoom),f)),l.expression.evaluate(new Vn(Math.floor(f.zoom+1),f)),f)}}_calculate(l,f,m,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:l,to:f}:{from:m,to:f}}interpolate(l){return l}}class ew{constructor(l){this.specification=l}possiblyEvaluate(l,f,m,_){return!!l.expression.evaluate(f,null,{},m,_)}interpolate(){return!1}}class b{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let f in l){let m=l[f];m.specification.overridable&&this.overridableProperties.push(f);let _=this.defaultPropertyValues[f]=new Kh(m,void 0),E=this.defaultTransitionablePropertyValues[f]=new yg(m);this.defaultTransitioningPropertyValues[f]=E.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=_.possiblyEvaluate({})}}}kt("DataDrivenProperty",ur),kt("DataConstantProperty",Vt),kt("CrossFadedDataDrivenProperty",xg),kt("CrossFadedProperty",wg),kt("ColorRampProperty",ew);let s="-transition";class p extends _t{constructor(l,f){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter),f.layout&&(this._unevaluatedLayout=new im(f.layout)),f.paint)){this._transitionablePaint=new _g(f.paint);for(let m in l.paint)this.setPaintProperty(m,l.paint[m],{validate:!1});for(let m in l.layout)this.setLayoutProperty(m,l.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new om(f.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}setLayoutProperty(l,f,m={}){f!=null&&this._validate(pT,`layers.${this.id}.layout.${l}`,l,f,m)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,f):this.visibility=f)}getPaintProperty(l){return l.endsWith(s)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,f,m={}){if(f!=null&&this._validate(hT,`layers.${this.id}.paint.${l}`,l,f,m))return!1;if(l.endsWith(s))return this._transitionablePaint.setTransition(l.slice(0,-11),f||void 0),!1;{let _=this._transitionablePaint._values[l],E=_.property.specification["property-type"]==="cross-faded-data-driven",I=_.value.isDataDriven(),C=_.value;this._transitionablePaint.setValue(l,f),this._handleSpecialPaintPropertyUpdate(l);let P=this._transitionablePaint._values[l].value;return P.isDataDriven()||I||E||this._handleOverridablePaintPropertyUpdate(l,C,P)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,f,m){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,f){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,f)}serialize(){let l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),ue(l,(f,m)=>!(f===void 0||m==="layout"&&!Object.keys(f).length||m==="paint"&&!Object.keys(f).length))}_validate(l,f,m,_,E={}){return(!E||E.validate!==!1)&&Wx(this,l.call(mf,{key:f,layerType:this.type,objectKey:m,value:_,styleSpec:be,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let l in this.paint._values){let f=this.paint.get(l);if(f instanceof Il&&jh(f.property.specification)&&(f.value.kind==="source"||f.value.kind==="composite")&&f.value.isStateDependent)return!0}return!1}}let g={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class y{constructor(l,f){this._structArray=l,this._pos1=f*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class w{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,f){return l._trim(),f&&(l.isTransferred=!0,f.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){let f=Object.create(this.prototype);return f.arrayBuffer=l.arrayBuffer,f.length=l.length,f.capacity=l.arrayBuffer.byteLength/f.bytesPerElement,f._refreshViews(),f}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let f=this.uint8;this._refreshViews(),f&&this.uint8.set(f)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function M(u,l=1){let f=0,m=0;return{members:u.map(_=>{let E=g[_.type].BYTES_PER_ELEMENT,I=f=O(f,Math.max(l,E)),C=_.components||1;return m=Math.max(m,E),f+=E*C,{name:_.name,type:_.type,components:C,offset:I}}),size:O(f,Math.max(m,l)),alignment:l}}function O(u,l){return Math.ceil(u/l)*l}class N extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f){let m=this.length;return this.resize(m+1),this.emplace(m,l,f)}emplace(l,f,m){let _=2*l;return this.int16[_+0]=f,this.int16[_+1]=m,l}}N.prototype.bytesPerElement=4,kt("StructArrayLayout2i4",N);class z extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let E=3*l;return this.int16[E+0]=f,this.int16[E+1]=m,this.int16[E+2]=_,l}}z.prototype.bytesPerElement=6,kt("StructArrayLayout3i6",z);class V extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_){let E=this.length;return this.resize(E+1),this.emplace(E,l,f,m,_)}emplace(l,f,m,_,E){let I=4*l;return this.int16[I+0]=f,this.int16[I+1]=m,this.int16[I+2]=_,this.int16[I+3]=E,l}}V.prototype.bytesPerElement=8,kt("StructArrayLayout4i8",V);class G extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,I){let C=this.length;return this.resize(C+1),this.emplace(C,l,f,m,_,E,I)}emplace(l,f,m,_,E,I,C){let P=6*l;return this.int16[P+0]=f,this.int16[P+1]=m,this.int16[P+2]=_,this.int16[P+3]=E,this.int16[P+4]=I,this.int16[P+5]=C,l}}G.prototype.bytesPerElement=12,kt("StructArrayLayout2i4i12",G);class X extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,I){let C=this.length;return this.resize(C+1),this.emplace(C,l,f,m,_,E,I)}emplace(l,f,m,_,E,I,C){let P=4*l,q=8*l;return this.int16[P+0]=f,this.int16[P+1]=m,this.uint8[q+4]=_,this.uint8[q+5]=E,this.uint8[q+6]=I,this.uint8[q+7]=C,l}}X.prototype.bytesPerElement=8,kt("StructArrayLayout2i4ub8",X);class ne extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f){let m=this.length;return this.resize(m+1),this.emplace(m,l,f)}emplace(l,f,m){let _=2*l;return this.float32[_+0]=f,this.float32[_+1]=m,l}}ne.prototype.bytesPerElement=8,kt("StructArrayLayout2f8",ne);class se extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,I,C,P,q,F){let U=this.length;return this.resize(U+1),this.emplace(U,l,f,m,_,E,I,C,P,q,F)}emplace(l,f,m,_,E,I,C,P,q,F,U){let Z=10*l;return this.uint16[Z+0]=f,this.uint16[Z+1]=m,this.uint16[Z+2]=_,this.uint16[Z+3]=E,this.uint16[Z+4]=I,this.uint16[Z+5]=C,this.uint16[Z+6]=P,this.uint16[Z+7]=q,this.uint16[Z+8]=F,this.uint16[Z+9]=U,l}}se.prototype.bytesPerElement=20,kt("StructArrayLayout10ui20",se);class he extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,I,C,P,q,F,U,Z){let Y=this.length;return this.resize(Y+1),this.emplace(Y,l,f,m,_,E,I,C,P,q,F,U,Z)}emplace(l,f,m,_,E,I,C,P,q,F,U,Z,Y){let Q=12*l;return this.int16[Q+0]=f,this.int16[Q+1]=m,this.int16[Q+2]=_,this.int16[Q+3]=E,this.uint16[Q+4]=I,this.uint16[Q+5]=C,this.uint16[Q+6]=P,this.uint16[Q+7]=q,this.int16[Q+8]=F,this.int16[Q+9]=U,this.int16[Q+10]=Z,this.int16[Q+11]=Y,l}}he.prototype.bytesPerElement=24,kt("StructArrayLayout4i4ui4i24",he);class me extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let E=3*l;return this.float32[E+0]=f,this.float32[E+1]=m,this.float32[E+2]=_,l}}me.prototype.bytesPerElement=12,kt("StructArrayLayout3f12",me);class ge extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){let f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.uint32[1*l+0]=f,l}}ge.prototype.bytesPerElement=4,kt("StructArrayLayout1ul4",ge);class ye extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,I,C,P,q){let F=this.length;return this.resize(F+1),this.emplace(F,l,f,m,_,E,I,C,P,q)}emplace(l,f,m,_,E,I,C,P,q,F){let U=10*l,Z=5*l;return this.int16[U+0]=f,this.int16[U+1]=m,this.int16[U+2]=_,this.int16[U+3]=E,this.int16[U+4]=I,this.int16[U+5]=C,this.uint32[Z+3]=P,this.uint16[U+8]=q,this.uint16[U+9]=F,l}}ye.prototype.bytesPerElement=20,kt("StructArrayLayout6i1ul2ui20",ye);class ce extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,I){let C=this.length;return this.resize(C+1),this.emplace(C,l,f,m,_,E,I)}emplace(l,f,m,_,E,I,C){let P=6*l;return this.int16[P+0]=f,this.int16[P+1]=m,this.int16[P+2]=_,this.int16[P+3]=E,this.int16[P+4]=I,this.int16[P+5]=C,l}}ce.prototype.bytesPerElement=12,kt("StructArrayLayout2i2i2i12",ce);class Ce extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E){let I=this.length;return this.resize(I+1),this.emplace(I,l,f,m,_,E)}emplace(l,f,m,_,E,I){let C=4*l,P=8*l;return this.float32[C+0]=f,this.float32[C+1]=m,this.float32[C+2]=_,this.int16[P+6]=E,this.int16[P+7]=I,l}}Ce.prototype.bytesPerElement=16,kt("StructArrayLayout2f1f2i16",Ce);class De extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,I){let C=this.length;return this.resize(C+1),this.emplace(C,l,f,m,_,E,I)}emplace(l,f,m,_,E,I,C){let P=16*l,q=4*l,F=8*l;return this.uint8[P+0]=f,this.uint8[P+1]=m,this.float32[q+1]=_,this.float32[q+2]=E,this.int16[F+6]=I,this.int16[F+7]=C,l}}De.prototype.bytesPerElement=16,kt("StructArrayLayout2ub2f2i16",De);class je extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let E=3*l;return this.uint16[E+0]=f,this.uint16[E+1]=m,this.uint16[E+2]=_,l}}je.prototype.bytesPerElement=6,kt("StructArrayLayout3ui6",je);class et extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,I,C,P,q,F,U,Z,Y,Q,re,fe,de){let qe=this.length;return this.resize(qe+1),this.emplace(qe,l,f,m,_,E,I,C,P,q,F,U,Z,Y,Q,re,fe,de)}emplace(l,f,m,_,E,I,C,P,q,F,U,Z,Y,Q,re,fe,de,qe){let we=24*l,Ne=12*l,He=48*l;return this.int16[we+0]=f,this.int16[we+1]=m,this.uint16[we+2]=_,this.uint16[we+3]=E,this.uint32[Ne+2]=I,this.uint32[Ne+3]=C,this.uint32[Ne+4]=P,this.uint16[we+10]=q,this.uint16[we+11]=F,this.uint16[we+12]=U,this.float32[Ne+7]=Z,this.float32[Ne+8]=Y,this.uint8[He+36]=Q,this.uint8[He+37]=re,this.uint8[He+38]=fe,this.uint32[Ne+10]=de,this.int16[we+22]=qe,l}}et.prototype.bytesPerElement=48,kt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",et);class lt extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,I,C,P,q,F,U,Z,Y,Q,re,fe,de,qe,we,Ne,He,ot,Mt,sr,At,xt,Zt,qt){let Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,l,f,m,_,E,I,C,P,q,F,U,Z,Y,Q,re,fe,de,qe,we,Ne,He,ot,Mt,sr,At,xt,Zt,qt)}emplace(l,f,m,_,E,I,C,P,q,F,U,Z,Y,Q,re,fe,de,qe,we,Ne,He,ot,Mt,sr,At,xt,Zt,qt,Nt){let Xe=32*l,Jt=16*l;return this.int16[Xe+0]=f,this.int16[Xe+1]=m,this.int16[Xe+2]=_,this.int16[Xe+3]=E,this.int16[Xe+4]=I,this.int16[Xe+5]=C,this.int16[Xe+6]=P,this.int16[Xe+7]=q,this.uint16[Xe+8]=F,this.uint16[Xe+9]=U,this.uint16[Xe+10]=Z,this.uint16[Xe+11]=Y,this.uint16[Xe+12]=Q,this.uint16[Xe+13]=re,this.uint16[Xe+14]=fe,this.uint16[Xe+15]=de,this.uint16[Xe+16]=qe,this.uint16[Xe+17]=we,this.uint16[Xe+18]=Ne,this.uint16[Xe+19]=He,this.uint16[Xe+20]=ot,this.uint16[Xe+21]=Mt,this.uint16[Xe+22]=sr,this.uint32[Jt+12]=At,this.float32[Jt+13]=xt,this.float32[Jt+14]=Zt,this.uint16[Xe+30]=qt,this.uint16[Xe+31]=Nt,l}}lt.prototype.bytesPerElement=64,kt("StructArrayLayout8i15ui1ul2f2ui64",lt);class St extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){let f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.float32[1*l+0]=f,l}}St.prototype.bytesPerElement=4,kt("StructArrayLayout1f4",St);class Ot extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let E=3*l;return this.uint16[6*l+0]=f,this.float32[E+1]=m,this.float32[E+2]=_,l}}Ot.prototype.bytesPerElement=12,kt("StructArrayLayout1ui2f12",Ot);class mt extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let E=4*l;return this.uint32[2*l+0]=f,this.uint16[E+2]=m,this.uint16[E+3]=_,l}}mt.prototype.bytesPerElement=8,kt("StructArrayLayout1ul2ui8",mt);class pt extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f){let m=this.length;return this.resize(m+1),this.emplace(m,l,f)}emplace(l,f,m){let _=2*l;return this.uint16[_+0]=f,this.uint16[_+1]=m,l}}pt.prototype.bytesPerElement=4,kt("StructArrayLayout2ui4",pt);class Gt extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){let f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.uint16[1*l+0]=f,l}}Gt.prototype.bytesPerElement=2,kt("StructArrayLayout1ui2",Gt);class gr extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m,_){let E=this.length;return this.resize(E+1),this.emplace(E,l,f,m,_)}emplace(l,f,m,_,E){let I=4*l;return this.float32[I+0]=f,this.float32[I+1]=m,this.float32[I+2]=_,this.float32[I+3]=E,l}}gr.prototype.bytesPerElement=16,kt("StructArrayLayout4f16",gr);class gt extends y{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new d(this.anchorPointX,this.anchorPointY)}}gt.prototype.size=20;class Ct extends ye{get(l){return new gt(this,l)}}kt("CollisionBoxArray",Ct);class dr extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}dr.prototype.size=48;class Gn extends et{get(l){return new dr(this,l)}}kt("PlacedSymbolArray",Gn);class Mr extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Mr.prototype.size=64;class Ur extends lt{get(l){return new Mr(this,l)}}kt("SymbolInstanceArray",Ur);class $n extends St{getoffsetX(l){return this.float32[1*l+0]}}kt("GlyphOffsetArray",$n);class Eo extends z{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}kt("SymbolLineVertexArray",Eo);class Xs extends y{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Xs.prototype.size=12;class Hn extends Ot{get(l){return new Xs(this,l)}}kt("TextAnchorOffsetArray",Hn);class la extends y{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}la.prototype.size=8;class zo extends mt{get(l){return new la(this,l)}}kt("FeatureIndexArray",zo);class Io extends N{}class Bo extends N{}class Tl extends N{}class Xh extends G{}class bg extends X{}class Jh extends ne{}class fs extends se{}class Sg extends he{}class tw extends me{}class hs extends ge{}class ps extends ce{}class ac extends De{}class Js extends je{}class uo extends pt{}let To=M([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ba}=To;class Wr{constructor(l=[]){this.segments=l}prepareSegment(l,f,m,_){let E=this.segments[this.segments.length-1];return l>Wr.MAX_VERTEX_ARRAY_LENGTH&&Re(`Max vertices per segment is ${Wr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}`),(!E||E.vertexLength+l>Wr.MAX_VERTEX_ARRAY_LENGTH||E.sortKey!==_)&&(E={vertexOffset:f.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},_!==void 0&&(E.sortKey=_),this.segments.push(E)),E}get(){return this.segments}destroy(){for(let l of this.segments)for(let f in l.vaos)l.vaos[f].destroy()}static simpleSegment(l,f,m,_){return new Wr([{vertexOffset:l,primitiveOffset:f,vertexLength:m,primitiveLength:_,vaos:{},sortKey:0}])}}function vf(u,l){return 256*(u=B(Math.floor(u),0,255))+B(Math.floor(l),0,255)}Wr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,kt("SegmentVector",Wr);let Qh=M([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ep={exports:{}},yT={exports:{}};yT.exports=function(u,l){var f,m,_,E,I,C,P,q;for(m=u.length-(f=3&u.length),_=l,I=3432918353,C=461845907,q=0;q<m;)P=255&u.charCodeAt(q)|(255&u.charCodeAt(++q))<<8|(255&u.charCodeAt(++q))<<16|(255&u.charCodeAt(++q))<<24,++q,_=27492+(65535&(E=5*(65535&(_=(_^=P=(65535&(P=(P=(65535&P)*I+(((P>>>16)*I&65535)<<16)&4294967295)<<15|P>>>17))*C+(((P>>>16)*C&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(P=0,f){case 3:P^=(255&u.charCodeAt(q+2))<<16;case 2:P^=(255&u.charCodeAt(q+1))<<8;case 1:_^=P=(65535&(P=(P=(65535&(P^=255&u.charCodeAt(q)))*I+(((P>>>16)*I&65535)<<16)&4294967295)<<15|P>>>17))*C+(((P>>>16)*C&65535)<<16)&4294967295;}return _^=u.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0};var sk=yT.exports,_T={exports:{}};_T.exports=function(u,l){for(var f,m=u.length,_=l^m,E=0;m>=4;)f=1540483477*(65535&(f=255&u.charCodeAt(E)|(255&u.charCodeAt(++E))<<8|(255&u.charCodeAt(++E))<<16|(255&u.charCodeAt(++E))<<24))+((1540483477*(f>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),m-=4,++E;switch(m){case 3:_^=(255&u.charCodeAt(E+2))<<16;case 2:_^=(255&u.charCodeAt(E+1))<<8;case 1:_=1540483477*(65535&(_^=255&u.charCodeAt(E)))+((1540483477*(_>>>16)&65535)<<16);}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0};var sc=sk,xT=_T.exports;ep.exports=sc,ep.exports.murmur3=sc,ep.exports.murmur2=xT;var Eg=a(ep.exports);class am{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,f,m,_){this.ids.push(Ig(l)),this.positions.push(f,m,_)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let f=Ig(l),m=0,_=this.ids.length-1;for(;m<_;){let I=m+_>>1;this.ids[I]>=f?_=I:m=I+1}let E=[];for(;this.ids[m]===f;)E.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return E}static serialize(l,f){let m=new Float64Array(l.ids),_=new Uint32Array(l.positions);return Tg(m,_,0,m.length-1),f&&f.push(m.buffer,_.buffer),{ids:m,positions:_}}static deserialize(l){let f=new am;return f.ids=l.ids,f.positions=l.positions,f.indexed=!0,f}}function Ig(u){let l=+u;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:Eg(String(u))}function Tg(u,l,f,m){for(;f<m;){let _=u[f+m>>1],E=f-1,I=m+1;for(;;){do E++;while(u[E]<_);do I--;while(u[I]>_);if(E>=I)break;tp(u,E,I),tp(l,3*E,3*I),tp(l,3*E+1,3*I+1),tp(l,3*E+2,3*I+2)}I-f<m-I?(Tg(u,l,f,I),f=I+1):(Tg(u,l,I+1,m),m=I)}}function tp(u,l,f){let m=u[l];u[l]=u[f],u[f]=m}kt("FeaturePositionMap",am);class sm{constructor(l,f){this.gl=l.gl,this.location=f}}class wT extends sm{constructor(l,f){super(l,f),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class eK extends sm{constructor(l,f){super(l,f),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class tK extends sm{constructor(l,f){super(l,f),this.current=mn.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}let vUe=new Float32Array(16);function lk(u){return[vf(255*u.r,255*u.g),vf(255*u.b,255*u.a)]}class rw{constructor(l,f,m){this.value=l,this.uniformNames=f.map(_=>`u_${_}`),this.type=m}setUniform(l,f,m){l.set(m.constantOr(this.value))}getBinding(l,f,m){return this.type==="color"?new tK(l,f):new wT(l,f)}}class Ag{constructor(l,f){this.uniformNames=f.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,f){this.pixelRatioFrom=f.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=f.tlbr,this.patternTo=l.tlbr}setUniform(l,f,m,_){let E=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;E&&l.set(E)}getBinding(l,f,m){return m.substr(0,9)==="u_pattern"?new eK(l,f):new wT(l,f)}}class gf{constructor(l,f,m,_){this.expression=l,this.type=m,this.maxValue=0,this.paintVertexAttributes=f.map(E=>({name:`a_${E}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(l,f,m,_,E){let I=this.paintVertexArray.length,C=this.expression.evaluate(new Vn(0),f,{},_,[],E);this.paintVertexArray.resize(l),this._setPaintValue(I,l,C)}updatePaintArray(l,f,m,_){let E=this.expression.evaluate({zoom:0},m,_);this._setPaintValue(l,f,E)}_setPaintValue(l,f,m){if(this.type==="color"){let _=lk(m);for(let E=l;E<f;E++)this.paintVertexArray.emplace(E,_[0],_[1])}else{for(let _=l;_<f;_++)this.paintVertexArray.emplace(_,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Au{constructor(l,f,m,_,E,I){this.expression=l,this.uniformNames=f.map(C=>`u_${C}_t`),this.type=m,this.useIntegerZoom=_,this.zoom=E,this.maxValue=0,this.paintVertexAttributes=f.map(C=>({name:`a_${C}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new I}populatePaintArray(l,f,m,_,E){let I=this.expression.evaluate(new Vn(this.zoom),f,{},_,[],E),C=this.expression.evaluate(new Vn(this.zoom+1),f,{},_,[],E),P=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(P,l,I,C)}updatePaintArray(l,f,m,_){let E=this.expression.evaluate({zoom:this.zoom},m,_),I=this.expression.evaluate({zoom:this.zoom+1},m,_);this._setPaintValue(l,f,E,I)}_setPaintValue(l,f,m,_){if(this.type==="color"){let E=lk(m),I=lk(_);for(let C=l;C<f;C++)this.paintVertexArray.emplace(C,E[0],E[1],I[0],I[1])}else{for(let E=l;E<f;E++)this.paintVertexArray.emplace(E,m,_);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(_))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,f){let m=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,_=B(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);l.set(_)}getBinding(l,f,m){return new wT(l,f)}}class rp{constructor(l,f,m,_,E,I){this.expression=l,this.type=f,this.useIntegerZoom=m,this.zoom=_,this.layerId=I,this.zoomInPaintVertexArray=new E,this.zoomOutPaintVertexArray=new E}populatePaintArray(l,f,m){let _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(_,l,f.patterns&&f.patterns[this.layerId],m)}updatePaintArray(l,f,m,_,E){this._setPaintValues(l,f,m.patterns&&m.patterns[this.layerId],E)}_setPaintValues(l,f,m,_){if(!_||!m)return;let{min:E,mid:I,max:C}=m,P=_[E],q=_[I],F=_[C];if(P&&q&&F)for(let U=l;U<f;U++)this.zoomInPaintVertexArray.emplace(U,q.tl[0],q.tl[1],q.br[0],q.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],q.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(U,q.tl[0],q.tl[1],q.br[0],q.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],q.pixelRatio,F.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,Qh.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,Qh.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class rK{constructor(l,f,m){this.binders={},this._buffers=[];let _=[];for(let E in l.paint._values){if(!m(E))continue;let I=l.paint.get(E);if(!(I instanceof Il&&jh(I.property.specification)))continue;let C=gUe(E,l.type),P=I.value,q=I.property.specification.type,F=I.property.useIntegerZoom,U=I.property.specification["property-type"],Z=U==="cross-faded"||U==="cross-faded-data-driven";if(P.kind==="constant")this.binders[E]=Z?new Ag(P.value,C):new rw(P.value,C,q),_.push(`/u_${E}`);else if(P.kind==="source"||Z){let Y=nK(E,q,"source");this.binders[E]=Z?new rp(P,q,F,f,Y,l.id):new gf(P,C,q,Y),_.push(`/a_${E}`)}else{let Y=nK(E,q,"composite");this.binders[E]=new Au(P,C,q,F,f,Y),_.push(`/z_${E}`)}}this.cacheKey=_.sort().join("")}getMaxValue(l){let f=this.binders[l];return f instanceof gf||f instanceof Au?f.maxValue:0}populatePaintArrays(l,f,m,_,E){for(let I in this.binders){let C=this.binders[I];(C instanceof gf||C instanceof Au||C instanceof rp)&&C.populatePaintArray(l,f,m,_,E)}}setConstantPatternPositions(l,f){for(let m in this.binders){let _=this.binders[m];_ instanceof Ag&&_.setConstantPatternPositions(l,f)}}updatePaintArrays(l,f,m,_,E){let I=!1;for(let C in l){let P=f.getPositions(C);for(let q of P){let F=m.feature(q.index);for(let U in this.binders){let Z=this.binders[U];if((Z instanceof gf||Z instanceof Au||Z instanceof rp)&&Z.expression.isStateDependent===!0){let Y=_.paint.get(U);Z.expression=Y.value,Z.updatePaintArray(q.start,q.end,F,l[C],E),I=!0}}}}return I}defines(){let l=[];for(let f in this.binders){let m=this.binders[f];(m instanceof rw||m instanceof Ag)&&l.push(...m.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return l}getBinderAttributes(){let l=[];for(let f in this.binders){let m=this.binders[f];if(m instanceof gf||m instanceof Au)for(let _=0;_<m.paintVertexAttributes.length;_++)l.push(m.paintVertexAttributes[_].name);else if(m instanceof rp)for(let _=0;_<Qh.members.length;_++)l.push(Qh.members[_].name)}return l}getBinderUniforms(){let l=[];for(let f in this.binders){let m=this.binders[f];if(m instanceof rw||m instanceof Ag||m instanceof Au)for(let _ of m.uniformNames)l.push(_)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,f){let m=[];for(let _ in this.binders){let E=this.binders[_];if(E instanceof rw||E instanceof Ag||E instanceof Au){for(let I of E.uniformNames)if(f[I]){let C=E.getBinding(l,f[I],I);m.push({name:I,property:_,binding:C})}}}return m}setUniforms(l,f,m,_){for(let{name:E,property:I,binding:C}of f)this.binders[I].setUniform(C,_,m.get(I),E)}updatePaintBuffers(l){this._buffers=[];for(let f in this.binders){let m=this.binders[f];if(l&&m instanceof rp){let _=l.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(m instanceof gf||m instanceof Au)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(l){for(let f in this.binders){let m=this.binders[f];(m instanceof gf||m instanceof Au||m instanceof rp)&&m.upload(l)}this.updatePaintBuffers()}destroy(){for(let l in this.binders){let f=this.binders[l];(f instanceof gf||f instanceof Au||f instanceof rp)&&f.destroy()}}}class lm{constructor(l,f,m=()=>!0){this.programConfigurations={};for(let _ of l)this.programConfigurations[_.id]=new rK(_,f,m);this.needsUpload=!1,this._featureMap=new am,this._bufferOffset=0}populatePaintArrays(l,f,m,_,E,I){for(let C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(l,f,_,E,I);f.id!==void 0&&this._featureMap.add(f.id,m,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,f,m,_){for(let E of m)this.needsUpload=this.programConfigurations[E.id].updatePaintArrays(l,this._featureMap,f,E,_)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(let f in this.programConfigurations)this.programConfigurations[f].upload(l);this.needsUpload=!1}}destroy(){for(let l in this.programConfigurations)this.programConfigurations[l].destroy()}}function gUe(u,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${l}-`,"").replace(/-/g,"_")]}function nK(u,l,f){let m={color:{source:ne,composite:gr},number:{source:St,composite:ne}},_=function(E){return{"line-pattern":{source:fs,composite:fs},"fill-pattern":{source:fs,composite:fs},"fill-extrusion-pattern":{source:fs,composite:fs}}[E]}(u);return _&&_[f]||m[l][f]}kt("ConstantBinder",rw),kt("CrossFadedConstantBinder",Ag),kt("SourceExpressionBinder",gf),kt("CrossFadedCompositeBinder",rp),kt("CompositeExpressionBinder",Au),kt("ProgramConfiguration",rK,{omit:["_buffers"]}),kt("ProgramConfigurationSet",lm);let qi=8192,uk=Math.pow(2,14)-1,iK=-uk-1;function um(u){let l=qi/u.extent,f=u.loadGeometry();for(let m=0;m<f.length;m++){let _=f[m];for(let E=0;E<_.length;E++){let I=_[E],C=Math.round(I.x*l),P=Math.round(I.y*l);I.x=B(C,iK,uk),I.y=B(P,iK,uk),(C<I.x||C>I.x+1||P<I.y||P>I.y+1)&&Re("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return f}function cm(u,l){return{type:u.type,id:u.id,properties:u.properties,geometry:l?um(u):[]}}function bT(u,l,f,m,_){u.emplaceBack(2*l+(m+1)/2,2*f+(_+1)/2)}class ck{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Bo,this.indexArray=new Js,this.segments=new Wr,this.programConfigurations=new lm(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){let _=this.layers[0],E=[],I=null,C=!1;_.type==="circle"&&(I=_.layout.get("circle-sort-key"),C=!I.isConstant());for(let{feature:P,id:q,index:F,sourceLayerIndex:U}of l){let Z=this.layers[0]._featureFilter.needGeometry,Y=cm(P,Z);if(!this.layers[0]._featureFilter.filter(new Vn(this.zoom),Y,m))continue;let Q=C?I.evaluate(Y,{},m):void 0,re={id:q,properties:P.properties,type:P.type,sourceLayerIndex:U,index:F,geometry:Z?Y.geometry:um(P),patterns:{},sortKey:Q};E.push(re)}C&&E.sort((P,q)=>P.sortKey-q.sortKey);for(let P of E){let{geometry:q,index:F,sourceLayerIndex:U}=P,Z=l[F].feature;this.addFeature(P,q,F,m),f.featureIndex.insert(Z,q,F,U,this.index)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Ba),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,f,m,_){for(let E of f)for(let I of E){let C=I.x,P=I.y;if(C<0||C>=qi||P<0||P>=qi)continue;let q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,l.sortKey),F=q.vertexLength;bT(this.layoutVertexArray,C,P,-1,-1),bT(this.layoutVertexArray,C,P,1,-1),bT(this.layoutVertexArray,C,P,1,1),bT(this.layoutVertexArray,C,P,-1,1),this.indexArray.emplaceBack(F,F+1,F+2),this.indexArray.emplaceBack(F,F+3,F+2),q.vertexLength+=4,q.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,{},_)}}function oK(u,l){for(let f=0;f<u.length;f++)if(Cg(l,u[f]))return!0;for(let f=0;f<l.length;f++)if(Cg(u,l[f]))return!0;return!!fk(u,l)}function yUe(u,l,f){return!!Cg(u,l)||!!hk(l,u,f)}function aK(u,l){if(u.length===1)return lK(l,u[0]);for(let f=0;f<l.length;f++){let m=l[f];for(let _=0;_<m.length;_++)if(Cg(u,m[_]))return!0}for(let f=0;f<u.length;f++)if(lK(l,u[f]))return!0;for(let f=0;f<l.length;f++)if(fk(u,l[f]))return!0;return!1}function _Ue(u,l,f){if(u.length>1){if(fk(u,l))return!0;for(let m=0;m<l.length;m++)if(hk(l[m],u,f))return!0}for(let m=0;m<u.length;m++)if(hk(u[m],l,f))return!0;return!1}function fk(u,l){if(u.length===0||l.length===0)return!1;for(let f=0;f<u.length-1;f++){let m=u[f],_=u[f+1];for(let E=0;E<l.length-1;E++)if(xUe(m,_,l[E],l[E+1]))return!0}return!1}function xUe(u,l,f,m){return ze(u,f,m)!==ze(l,f,m)&&ze(u,l,f)!==ze(u,l,m)}function hk(u,l,f){let m=f*f;if(l.length===1)return u.distSqr(l[0])<m;for(let _=1;_<l.length;_++)if(sK(u,l[_-1],l[_])<m)return!0;return!1}function sK(u,l,f){let m=l.distSqr(f);if(m===0)return u.distSqr(l);let _=((u.x-l.x)*(f.x-l.x)+(u.y-l.y)*(f.y-l.y))/m;return u.distSqr(_<0?l:_>1?f:f.sub(l)._mult(_)._add(l))}function lK(u,l){let f,m,_,E=!1;for(let I=0;I<u.length;I++){f=u[I];for(let C=0,P=f.length-1;C<f.length;P=C++)m=f[C],_=f[P],m.y>l.y!=_.y>l.y&&l.x<(_.x-m.x)*(l.y-m.y)/(_.y-m.y)+m.x&&(E=!E)}return E}function Cg(u,l){let f=!1;for(let m=0,_=u.length-1;m<u.length;_=m++){let E=u[m],I=u[_];E.y>l.y!=I.y>l.y&&l.x<(I.x-E.x)*(l.y-E.y)/(I.y-E.y)+E.x&&(f=!f)}return f}function wUe(u,l,f){let m=f[0],_=f[2];if(u.x<m.x&&l.x<m.x||u.x>_.x&&l.x>_.x||u.y<m.y&&l.y<m.y||u.y>_.y&&l.y>_.y)return!1;let E=ze(u,l,f[0]);return E!==ze(u,l,f[1])||E!==ze(u,l,f[2])||E!==ze(u,l,f[3])}function nw(u,l,f){let m=l.paint.get(u).value;return m.kind==="constant"?m.value:f.programConfigurations.get(l.id).getMaxValue(u)}function ST(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function ET(u,l,f,m,_){if(!l[0]&&!l[1])return u;let E=d.convert(l)._mult(_);f==="viewport"&&E._rotate(-m);let I=[];for(let C=0;C<u.length;C++)I.push(u[C].sub(E));return I}let uK,cK;kt("CircleBucket",ck,{omit:["layers"]});var bUe={get paint(){return cK=cK||new b({"circle-radius":new ur(be.paint_circle["circle-radius"]),"circle-color":new ur(be.paint_circle["circle-color"]),"circle-blur":new ur(be.paint_circle["circle-blur"]),"circle-opacity":new ur(be.paint_circle["circle-opacity"]),"circle-translate":new Vt(be.paint_circle["circle-translate"]),"circle-translate-anchor":new Vt(be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Vt(be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Vt(be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ur(be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ur(be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ur(be.paint_circle["circle-stroke-opacity"])})},get layout(){return uK=uK||new b({"circle-sort-key":new ur(be.layout_circle["circle-sort-key"])})}},ua=1e-6,Mg=typeof Float32Array!="undefined"?Float32Array:Array;function pk(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function fK(u,l,f){var m=l[0],_=l[1],E=l[2],I=l[3],C=l[4],P=l[5],q=l[6],F=l[7],U=l[8],Z=l[9],Y=l[10],Q=l[11],re=l[12],fe=l[13],de=l[14],qe=l[15],we=f[0],Ne=f[1],He=f[2],ot=f[3];return u[0]=we*m+Ne*C+He*U+ot*re,u[1]=we*_+Ne*P+He*Z+ot*fe,u[2]=we*E+Ne*q+He*Y+ot*de,u[3]=we*I+Ne*F+He*Q+ot*qe,u[4]=(we=f[4])*m+(Ne=f[5])*C+(He=f[6])*U+(ot=f[7])*re,u[5]=we*_+Ne*P+He*Z+ot*fe,u[6]=we*E+Ne*q+He*Y+ot*de,u[7]=we*I+Ne*F+He*Q+ot*qe,u[8]=(we=f[8])*m+(Ne=f[9])*C+(He=f[10])*U+(ot=f[11])*re,u[9]=we*_+Ne*P+He*Z+ot*fe,u[10]=we*E+Ne*q+He*Y+ot*de,u[11]=we*I+Ne*F+He*Q+ot*qe,u[12]=(we=f[12])*m+(Ne=f[13])*C+(He=f[14])*U+(ot=f[15])*re,u[13]=we*_+Ne*P+He*Z+ot*fe,u[14]=we*E+Ne*q+He*Y+ot*de,u[15]=we*I+Ne*F+He*Q+ot*qe,u}Math.hypot||(Math.hypot=function(){for(var u=0,l=arguments.length;l--;)u+=arguments[l]*arguments[l];return Math.sqrt(u)});var iw,SUe=fK;function IT(u,l,f){var m=l[0],_=l[1],E=l[2],I=l[3];return u[0]=f[0]*m+f[4]*_+f[8]*E+f[12]*I,u[1]=f[1]*m+f[5]*_+f[9]*E+f[13]*I,u[2]=f[2]*m+f[6]*_+f[10]*E+f[14]*I,u[3]=f[3]*m+f[7]*_+f[11]*E+f[15]*I,u}iw=new Mg(4),Mg!=Float32Array&&(iw[0]=0,iw[1]=0,iw[2]=0,iw[3]=0);class EUe extends p{constructor(l){super(l,bUe)}createBucket(l){return new ck(l)}queryRadius(l){let f=l;return nw("circle-radius",this,f)+nw("circle-stroke-width",this,f)+ST(this.paint.get("circle-translate"))}queryIntersectsFeature(l,f,m,_,E,I,C,P){let q=ET(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),I.angle,C),F=this.paint.get("circle-radius").evaluate(f,m)+this.paint.get("circle-stroke-width").evaluate(f,m),U=this.paint.get("circle-pitch-alignment")==="map",Z=U?q:function(Q,re){return Q.map(fe=>hK(fe,re))}(q,P),Y=U?F*C:F;for(let Q of _)for(let re of Q){let fe=U?re:hK(re,P),de=Y,qe=IT([],[re.x,re.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?de*=qe[3]/I.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(de*=I.cameraToCenterDistance/qe[3]),yUe(Z,fe,de))return!0}return!1}}function hK(u,l){let f=IT([],[u.x,u.y,0,1],l);return new d(f[0]/f[3],f[1]/f[3])}class pK extends ck{}let dK;kt("HeatmapBucket",pK,{omit:["layers"]});var IUe={get paint(){return dK=dK||new b({"heatmap-radius":new ur(be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ur(be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Vt(be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ew(be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Vt(be.paint_heatmap["heatmap-opacity"])})}};function dk(u,{width:l,height:f},m,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==l*f*m)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${l*f*m}`)}else _=new Uint8Array(l*f*m);return u.width=l,u.height=f,u.data=_,u}function mK(u,{width:l,height:f},m){if(l===u.width&&f===u.height)return;let _=dk({},{width:l,height:f},m);mk(u,_,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,l),height:Math.min(u.height,f)},m),u.width=l,u.height=f,u.data=_.data}function mk(u,l,f,m,_,E){if(_.width===0||_.height===0)return l;if(_.width>u.width||_.height>u.height||f.x>u.width-_.width||f.y>u.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>l.width||_.height>l.height||m.x>l.width-_.width||m.y>l.height-_.height)throw new RangeError("out of range destination coordinates for image copy");let I=u.data,C=l.data;if(I===C)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<_.height;P++){let q=((f.y+P)*u.width+f.x)*E,F=((m.y+P)*l.width+m.x)*E;for(let U=0;U<_.width*E;U++)C[F+U]=I[q+U]}return l}class ow{constructor(l,f){dk(this,l,1,f)}resize(l){mK(this,l,1)}clone(){return new ow({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,f,m,_,E){mk(l,f,m,_,E,1)}}class Qs{constructor(l,f){dk(this,l,4,f)}resize(l){mK(this,l,4)}replace(l,f){f?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new Qs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,f,m,_,E){mk(l,f,m,_,E,4)}}function vK(u){let l={},f=u.resolution||256,m=u.clips?u.clips.length:1,_=u.image||new Qs({width:f,height:m});if(Math.log(f)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${f}`);let E=(I,C,P)=>{l[u.evaluationKey]=P;let q=u.expression.evaluate(l);_.data[I+C+0]=Math.floor(255*q.r/q.a),_.data[I+C+1]=Math.floor(255*q.g/q.a),_.data[I+C+2]=Math.floor(255*q.b/q.a),_.data[I+C+3]=Math.floor(255*q.a)};if(u.clips)for(let I=0,C=0;I<m;++I,C+=4*f)for(let P=0,q=0;P<f;P++,q+=4){let F=P/(f-1),{start:U,end:Z}=u.clips[I];E(C,q,U*(1-F)+Z*F)}else for(let I=0,C=0;I<f;I++,C+=4)E(0,C,I/(f-1));return _}kt("AlphaImage",ow),kt("RGBAImage",Qs);let vk="big-fb";class TUe extends p{createBucket(l){return new pK(l)}constructor(l){super(l,IUe),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=vK({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(vk)&&this.heatmapFbos.delete(vk)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let gK;var AUe={get paint(){return gK=gK||new b({"hillshade-illumination-direction":new Vt(be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Vt(be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Vt(be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Vt(be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Vt(be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Vt(be.paint_hillshade["hillshade-accent-color"])})}};class CUe extends p{constructor(l){super(l,AUe)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let MUe=M([{name:"a_pos",components:2,type:"Int16"}],4),{members:RUe}=MUe;function yK(u,l,f=2){let m=l&&l.length,_=m?l[0]*f:u.length,E=_K(u,0,_,f,!0),I=[];if(!E||E.next===E.prev)return I;let C,P,q;if(m&&(E=function(F,U,Z,Y){let Q=[];for(let re=0,fe=U.length;re<fe;re++){let de=_K(F,U[re]*Y,re<fe-1?U[re+1]*Y:F.length,Y,!1);de===de.next&&(de.steiner=!0),Q.push(jUe(de))}Q.sort(NUe);for(let re=0;re<Q.length;re++)Z=kUe(Q[re],Z);return Z}(u,l,E,f)),u.length>80*f){C=1/0,P=1/0;let F=-1/0,U=-1/0;for(let Z=f;Z<_;Z+=f){let Y=u[Z],Q=u[Z+1];Y<C&&(C=Y),Q<P&&(P=Q),Y>F&&(F=Y),Q>U&&(U=Q)}q=Math.max(F-C,U-P),q=q!==0?32767/q:0}return aw(E,I,f,C,P,q,0),I}function _K(u,l,f,m,_){let E;if(_===function(I,C,P,q){let F=0;for(let U=C,Z=P-q;U<P;U+=q)F+=(I[Z]-I[U])*(I[U+1]+I[Z+1]),Z=U;return F}(u,l,f,m)>0)for(let I=l;I<f;I+=m)E=bK(I/m|0,u[I],u[I+1],E);else for(let I=f-m;I>=l;I-=m)E=bK(I/m|0,u[I],u[I+1],E);return E&&TT(E,E.next)&&(lw(E),E=E.next),E}function fm(u,l){if(!u)return u;l||(l=u);let f,m=u;do if(f=!1,m.steiner||!TT(m,m.next)&&Mi(m.prev,m,m.next)!==0)m=m.next;else{if(lw(m),m=l=m.prev,m===m.next)break;f=!0}while(f||m!==l);return l}function aw(u,l,f,m,_,E,I){if(!u)return;!I&&E&&function(P,q,F,U){let Z=P;do Z.z===0&&(Z.z=gk(Z.x,Z.y,q,F,U)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next;while(Z!==P);Z.prevZ.nextZ=null,Z.prevZ=null,function(Y){let Q,re=1;do{let fe,de=Y;Y=null;let qe=null;for(Q=0;de;){Q++;let we=de,Ne=0;for(let ot=0;ot<re&&(Ne++,we=we.nextZ,we);ot++);let He=re;for(;Ne>0||He>0&&we;)Ne!==0&&(He===0||!we||de.z<=we.z)?(fe=de,de=de.nextZ,Ne--):(fe=we,we=we.nextZ,He--),qe?qe.nextZ=fe:Y=fe,fe.prevZ=qe,qe=fe;de=we}qe.nextZ=null,re*=2}while(Q>1)}(Z)}(u,m,_,E);let C=u;for(;u.prev!==u.next;){let P=u.prev,q=u.next;if(E?OUe(u,m,_,E):PUe(u))l.push(P.i,u.i,q.i),lw(u),u=q.next,C=q.next;else if((u=q)===C){I?I===1?aw(u=LUe(fm(u),l),l,f,m,_,E,2):I===2&&DUe(u,l,f,m,_,E):aw(fm(u),l,f,m,_,E,1);break}}}function PUe(u){let l=u.prev,f=u,m=u.next;if(Mi(l,f,m)>=0)return!1;let _=l.x,E=f.x,I=m.x,C=l.y,P=f.y,q=m.y,F=_<E?_<I?_:I:E<I?E:I,U=C<P?C<q?C:q:P<q?P:q,Z=_>E?_>I?_:I:E>I?E:I,Y=C>P?C>q?C:q:P>q?P:q,Q=m.next;for(;Q!==l;){if(Q.x>=F&&Q.x<=Z&&Q.y>=U&&Q.y<=Y&&Rg(_,C,E,P,I,q,Q.x,Q.y)&&Mi(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function OUe(u,l,f,m){let _=u.prev,E=u,I=u.next;if(Mi(_,E,I)>=0)return!1;let C=_.x,P=E.x,q=I.x,F=_.y,U=E.y,Z=I.y,Y=C<P?C<q?C:q:P<q?P:q,Q=F<U?F<Z?F:Z:U<Z?U:Z,re=C>P?C>q?C:q:P>q?P:q,fe=F>U?F>Z?F:Z:U>Z?U:Z,de=gk(Y,Q,l,f,m),qe=gk(re,fe,l,f,m),we=u.prevZ,Ne=u.nextZ;for(;we&&we.z>=de&&Ne&&Ne.z<=qe;){if(we.x>=Y&&we.x<=re&&we.y>=Q&&we.y<=fe&&we!==_&&we!==I&&Rg(C,F,P,U,q,Z,we.x,we.y)&&Mi(we.prev,we,we.next)>=0||(we=we.prevZ,Ne.x>=Y&&Ne.x<=re&&Ne.y>=Q&&Ne.y<=fe&&Ne!==_&&Ne!==I&&Rg(C,F,P,U,q,Z,Ne.x,Ne.y)&&Mi(Ne.prev,Ne,Ne.next)>=0))return!1;Ne=Ne.nextZ}for(;we&&we.z>=de;){if(we.x>=Y&&we.x<=re&&we.y>=Q&&we.y<=fe&&we!==_&&we!==I&&Rg(C,F,P,U,q,Z,we.x,we.y)&&Mi(we.prev,we,we.next)>=0)return!1;we=we.prevZ}for(;Ne&&Ne.z<=qe;){if(Ne.x>=Y&&Ne.x<=re&&Ne.y>=Q&&Ne.y<=fe&&Ne!==_&&Ne!==I&&Rg(C,F,P,U,q,Z,Ne.x,Ne.y)&&Mi(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.nextZ}return!0}function LUe(u,l){let f=u;do{let m=f.prev,_=f.next.next;!TT(m,_)&&xK(m,f,f.next,_)&&sw(m,_)&&sw(_,m)&&(l.push(m.i,f.i,_.i),lw(f),lw(f.next),f=u=_),f=f.next}while(f!==u);return fm(f)}function DUe(u,l,f,m,_,E){let I=u;do{let C=I.next.next;for(;C!==I.prev;){if(I.i!==C.i&&FUe(I,C)){let P=wK(I,C);return I=fm(I,I.next),P=fm(P,P.next),aw(I,l,f,m,_,E,0),void aw(P,l,f,m,_,E,0)}C=C.next}I=I.next}while(I!==u)}function NUe(u,l){return u.x-l.x}function kUe(u,l){let f=function(_,E){let I=E,C=_.x,P=_.y,q,F=-1/0;do{if(P<=I.y&&P>=I.next.y&&I.next.y!==I.y){let re=I.x+(P-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(re<=C&&re>F&&(F=re,q=I.x<I.next.x?I:I.next,re===C))return q}I=I.next}while(I!==E);if(!q)return null;let U=q,Z=q.x,Y=q.y,Q=1/0;I=q;do{if(C>=I.x&&I.x>=Z&&C!==I.x&&Rg(P<Y?C:F,P,Z,Y,P<Y?F:C,P,I.x,I.y)){let re=Math.abs(P-I.y)/(C-I.x);sw(I,_)&&(re<Q||re===Q&&(I.x>q.x||I.x===q.x&&qUe(q,I)))&&(q=I,Q=re)}I=I.next}while(I!==U);return q}(u,l);if(!f)return l;let m=wK(f,u);return fm(m,m.next),fm(f,f.next)}function qUe(u,l){return Mi(u.prev,u,l.prev)<0&&Mi(l.next,u,u.next)<0}function gk(u,l,f,m,_){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-f)*_|0)|u<<8))|u<<4))|u<<2))|u<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-m)*_|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function jUe(u){let l=u,f=u;do(l.x<f.x||l.x===f.x&&l.y<f.y)&&(f=l),l=l.next;while(l!==u);return f}function Rg(u,l,f,m,_,E,I,C){return(_-I)*(l-C)>=(u-I)*(E-C)&&(u-I)*(m-C)>=(f-I)*(l-C)&&(f-I)*(E-C)>=(_-I)*(m-C)}function FUe(u,l){return u.next.i!==l.i&&u.prev.i!==l.i&&!function(f,m){let _=f;do{if(_.i!==f.i&&_.next.i!==f.i&&_.i!==m.i&&_.next.i!==m.i&&xK(_,_.next,f,m))return!0;_=_.next}while(_!==f);return!1}(u,l)&&(sw(u,l)&&sw(l,u)&&function(f,m){let _=f,E=!1,I=(f.x+m.x)/2,C=(f.y+m.y)/2;do _.y>C!=_.next.y>C&&_.next.y!==_.y&&I<(_.next.x-_.x)*(C-_.y)/(_.next.y-_.y)+_.x&&(E=!E),_=_.next;while(_!==f);return E}(u,l)&&(Mi(u.prev,u,l.prev)||Mi(u,l.prev,l))||TT(u,l)&&Mi(u.prev,u,u.next)>0&&Mi(l.prev,l,l.next)>0)}function Mi(u,l,f){return(l.y-u.y)*(f.x-l.x)-(l.x-u.x)*(f.y-l.y)}function TT(u,l){return u.x===l.x&&u.y===l.y}function xK(u,l,f,m){let _=CT(Mi(u,l,f)),E=CT(Mi(u,l,m)),I=CT(Mi(f,m,u)),C=CT(Mi(f,m,l));return _!==E&&I!==C||!(_!==0||!AT(u,f,l))||!(E!==0||!AT(u,m,l))||!(I!==0||!AT(f,u,m))||!(C!==0||!AT(f,l,m))}function AT(u,l,f){return l.x<=Math.max(u.x,f.x)&&l.x>=Math.min(u.x,f.x)&&l.y<=Math.max(u.y,f.y)&&l.y>=Math.min(u.y,f.y)}function CT(u){return u>0?1:u<0?-1:0}function sw(u,l){return Mi(u.prev,u,u.next)<0?Mi(u,l,u.next)>=0&&Mi(u,u.prev,l)>=0:Mi(u,l,u.prev)<0||Mi(u,u.next,l)<0}function wK(u,l){let f=yk(u.i,u.x,u.y),m=yk(l.i,l.x,l.y),_=u.next,E=l.prev;return u.next=l,l.prev=u,f.next=_,_.prev=f,m.next=f,f.prev=m,E.next=m,m.prev=E,m}function bK(u,l,f,m){let _=yk(u,l,f);return m?(_.next=m.next,_.prev=m,m.next.prev=_,m.next=_):(_.prev=_,_.next=_),_}function lw(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function yk(u,l,f){return{i:u,x:l,y:f,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function _k(u,l,f){let m=f.patternDependencies,_=!1;for(let E of l){let I=E.paint.get(`${u}-pattern`);I.isConstant()||(_=!0);let C=I.constantOr(null);C&&(_=!0,m[C.to]=!0,m[C.from]=!0)}return _}function xk(u,l,f,m,_){let E=_.patternDependencies;for(let I of l){let C=I.paint.get(`${u}-pattern`).value;if(C.kind!=="constant"){let P=C.evaluate({zoom:m-1},f,{},_.availableImages),q=C.evaluate({zoom:m},f,{},_.availableImages),F=C.evaluate({zoom:m+1},f,{},_.availableImages);P=P&&P.name?P.name:P,q=q&&q.name?q.name:q,F=F&&F.name?F.name:F,E[P]=!0,E[q]=!0,E[F]=!0,f.patterns[I.id]={min:P,mid:q,max:F}}}return f}class wk{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Tl,this.indexArray=new Js,this.indexArray2=new uo,this.programConfigurations=new lm(l.layers,l.zoom),this.segments=new Wr,this.segments2=new Wr,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){this.hasPattern=_k("fill",this.layers,f);let _=this.layers[0].layout.get("fill-sort-key"),E=!_.isConstant(),I=[];for(let{feature:C,id:P,index:q,sourceLayerIndex:F}of l){let U=this.layers[0]._featureFilter.needGeometry,Z=cm(C,U);if(!this.layers[0]._featureFilter.filter(new Vn(this.zoom),Z,m))continue;let Y=E?_.evaluate(Z,{},m,f.availableImages):void 0,Q={id:P,properties:C.properties,type:C.type,sourceLayerIndex:F,index:q,geometry:U?Z.geometry:um(C),patterns:{},sortKey:Y};I.push(Q)}E&&I.sort((C,P)=>C.sortKey-P.sortKey);for(let C of I){let{geometry:P,index:q,sourceLayerIndex:F}=C;if(this.hasPattern){let U=xk("fill",this.layers,C,this.zoom,f);this.patternFeatures.push(U)}else this.addFeature(C,P,q,m,{});f.featureIndex.insert(l[q].feature,P,q,F,this.index)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}addFeatures(l,f,m){for(let _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,RUe),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,f,m,_,E){for(let I of eg(f,500)){let C=0;for(let Y of I)C+=Y.length;let P=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),q=P.vertexLength,F=[],U=[];for(let Y of I){if(Y.length===0)continue;Y!==I[0]&&U.push(F.length/2);let Q=this.segments2.prepareSegment(Y.length,this.layoutVertexArray,this.indexArray2),re=Q.vertexLength;this.layoutVertexArray.emplaceBack(Y[0].x,Y[0].y),this.indexArray2.emplaceBack(re+Y.length-1,re),F.push(Y[0].x),F.push(Y[0].y);for(let fe=1;fe<Y.length;fe++)this.layoutVertexArray.emplaceBack(Y[fe].x,Y[fe].y),this.indexArray2.emplaceBack(re+fe-1,re+fe),F.push(Y[fe].x),F.push(Y[fe].y);Q.vertexLength+=Y.length,Q.primitiveLength+=Y.length}let Z=yK(F,U);for(let Y=0;Y<Z.length;Y+=3)this.indexArray.emplaceBack(q+Z[Y],q+Z[Y+1],q+Z[Y+2]);P.vertexLength+=C,P.primitiveLength+=Z.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,E,_)}}let SK,EK;kt("FillBucket",wk,{omit:["layers","patternFeatures"]});var zUe={get paint(){return EK=EK||new b({"fill-antialias":new Vt(be.paint_fill["fill-antialias"]),"fill-opacity":new ur(be.paint_fill["fill-opacity"]),"fill-color":new ur(be.paint_fill["fill-color"]),"fill-outline-color":new ur(be.paint_fill["fill-outline-color"]),"fill-translate":new Vt(be.paint_fill["fill-translate"]),"fill-translate-anchor":new Vt(be.paint_fill["fill-translate-anchor"]),"fill-pattern":new xg(be.paint_fill["fill-pattern"])})},get layout(){return SK=SK||new b({"fill-sort-key":new ur(be.layout_fill["fill-sort-key"])})}};class BUe extends p{constructor(l){super(l,zUe)}recalculate(l,f){super.recalculate(l,f);let m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new wk(l)}queryRadius(){return ST(this.paint.get("fill-translate"))}queryIntersectsFeature(l,f,m,_,E,I,C){return aK(ET(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),I.angle,C),_)}isTileClipped(){return!0}}let UUe=M([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),VUe=M([{name:"a_centroid",components:2,type:"Int16"}],4),{members:GUe}=UUe;var np={},$Ue=c,IK=Pg;function Pg(u,l,f,m,_){this.properties={},this.extent=f,this.type=0,this._pbf=u,this._geometry=-1,this._keys=m,this._values=_,u.readFields(HUe,this,l)}function HUe(u,l,f){u==1?l.id=f.readVarint():u==2?function(m,_){for(var E=m.readVarint()+m.pos;m.pos<E;){var I=_._keys[m.readVarint()],C=_._values[m.readVarint()];_.properties[I]=C}}(f,l):u==3?l.type=f.readVarint():u==4&&(l._geometry=f.pos)}function WUe(u){for(var l,f,m=0,_=0,E=u.length,I=E-1;_<E;I=_++)m+=((f=u[I]).x-(l=u[_]).x)*(l.y+f.y);return m}Pg.types=["Unknown","Point","LineString","Polygon"],Pg.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var l,f=u.readVarint()+u.pos,m=1,_=0,E=0,I=0,C=[];u.pos<f;){if(_<=0){var P=u.readVarint();m=7&P,_=P>>3}if(_--,m===1||m===2)E+=u.readSVarint(),I+=u.readSVarint(),m===1&&(l&&C.push(l),l=[]),l.push(new $Ue(E,I));else{if(m!==7)throw new Error("unknown command "+m);l&&l.push(l[0].clone())}}return l&&C.push(l),C},Pg.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var l=u.readVarint()+u.pos,f=1,m=0,_=0,E=0,I=1/0,C=-1/0,P=1/0,q=-1/0;u.pos<l;){if(m<=0){var F=u.readVarint();f=7&F,m=F>>3}if(m--,f===1||f===2)(_+=u.readSVarint())<I&&(I=_),_>C&&(C=_),(E+=u.readSVarint())<P&&(P=E),E>q&&(q=E);else if(f!==7)throw new Error("unknown command "+f)}return[I,P,C,q]},Pg.prototype.toGeoJSON=function(u,l,f){var m,_,E=this.extent*Math.pow(2,f),I=this.extent*u,C=this.extent*l,P=this.loadGeometry(),q=Pg.types[this.type];function F(Y){for(var Q=0;Q<Y.length;Q++){var re=Y[Q];Y[Q]=[360*(re.x+I)/E-180,360/Math.PI*Math.atan(Math.exp((180-360*(re.y+C)/E)*Math.PI/180))-90]}}switch(this.type){case 1:var U=[];for(m=0;m<P.length;m++)U[m]=P[m][0];F(P=U);break;case 2:for(m=0;m<P.length;m++)F(P[m]);break;case 3:for(P=function(Y){var Q=Y.length;if(Q<=1)return[Y];for(var re,fe,de=[],qe=0;qe<Q;qe++){var we=WUe(Y[qe]);we!==0&&(fe===void 0&&(fe=we<0),fe===we<0?(re&&de.push(re),re=[Y[qe]]):re.push(Y[qe]))}return re&&de.push(re),de}(P),m=0;m<P.length;m++)for(_=0;_<P[m].length;_++)F(P[m][_]);}P.length===1?P=P[0]:q="Multi"+q;var Z={type:"Feature",geometry:{type:q,coordinates:P},properties:this.properties};return"id"in this&&(Z.id=this.id),Z};var ZUe=IK,TK=AK;function AK(u,l){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(YUe,this,l),this.length=this._features.length}function YUe(u,l,f){u===15?l.version=f.readVarint():u===1?l.name=f.readString():u===5?l.extent=f.readVarint():u===2?l._features.push(f.pos):u===3?l._keys.push(f.readString()):u===4&&l._values.push(function(m){for(var _=null,E=m.readVarint()+m.pos;m.pos<E;){var I=m.readVarint()>>3;_=I===1?m.readString():I===2?m.readFloat():I===3?m.readDouble():I===4?m.readVarint64():I===5?m.readVarint():I===6?m.readSVarint():I===7?m.readBoolean():null}return _}(f))}AK.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var l=this._pbf.readVarint()+this._pbf.pos;return new ZUe(this._pbf,l,this.extent,this._keys,this._values)};var KUe=TK;function XUe(u,l,f){if(u===3){var m=new KUe(f,f.readVarint()+f.pos);m.length&&(l[m.name]=m)}}np.VectorTile=function(u,l){this.layers=u.readFields(XUe,{},l)},np.VectorTileFeature=IK,np.VectorTileLayer=TK;let JUe=np.VectorTileFeature.types,bk=Math.pow(2,13);function uw(u,l,f,m,_,E,I,C){u.emplaceBack(l,f,2*Math.floor(m*bk)+I,_*bk*2,E*bk*2,Math.round(C))}class Sk{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Xh,this.centroidVertexArray=new Io,this.indexArray=new Js,this.programConfigurations=new lm(l.layers,l.zoom),this.segments=new Wr,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){this.features=[],this.hasPattern=_k("fill-extrusion",this.layers,f);for(let{feature:_,id:E,index:I,sourceLayerIndex:C}of l){let P=this.layers[0]._featureFilter.needGeometry,q=cm(_,P);if(!this.layers[0]._featureFilter.filter(new Vn(this.zoom),q,m))continue;let F={id:E,sourceLayerIndex:C,index:I,geometry:P?q.geometry:um(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(xk("fill-extrusion",this.layers,F,this.zoom,f)):this.addFeature(F,F.geometry,I,m,{}),f.featureIndex.insert(_,F.geometry,I,C,this.index,!0)}}addFeatures(l,f,m){for(let _ of this.features){let{geometry:E}=_;this.addFeature(_,E,_.index,f,m)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,GUe),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,VUe.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,f,m,_,E){for(let I of eg(f,500)){let C={x:0,y:0,vertexCount:0},P=0;for(let Q of I)P+=Q.length;let q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let Q of I){if(Q.length===0||e3e(Q))continue;let re=0;for(let fe=0;fe<Q.length;fe++){let de=Q[fe];if(fe>=1){let qe=Q[fe-1];if(!QUe(de,qe)){q.vertexLength+4>Wr.MAX_VERTEX_ARRAY_LENGTH&&(q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let we=de.sub(qe)._perp()._unit(),Ne=qe.dist(de);re+Ne>32768&&(re=0),uw(this.layoutVertexArray,de.x,de.y,we.x,we.y,0,0,re),uw(this.layoutVertexArray,de.x,de.y,we.x,we.y,0,1,re),C.x+=2*de.x,C.y+=2*de.y,C.vertexCount+=2,re+=Ne,uw(this.layoutVertexArray,qe.x,qe.y,we.x,we.y,0,0,re),uw(this.layoutVertexArray,qe.x,qe.y,we.x,we.y,0,1,re),C.x+=2*qe.x,C.y+=2*qe.y,C.vertexCount+=2;let He=q.vertexLength;this.indexArray.emplaceBack(He,He+2,He+1),this.indexArray.emplaceBack(He+1,He+2,He+3),q.vertexLength+=4,q.primitiveLength+=2}}}}if(q.vertexLength+P>Wr.MAX_VERTEX_ARRAY_LENGTH&&(q=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),JUe[l.type]!=="Polygon")continue;let F=[],U=[],Z=q.vertexLength;for(let Q of I)if(Q.length!==0){Q!==I[0]&&U.push(F.length/2);for(let re=0;re<Q.length;re++){let fe=Q[re];uw(this.layoutVertexArray,fe.x,fe.y,0,0,1,1,0),C.x+=fe.x,C.y+=fe.y,C.vertexCount+=1,F.push(fe.x),F.push(fe.y)}}let Y=yK(F,U);for(let Q=0;Q<Y.length;Q+=3)this.indexArray.emplaceBack(Z+Y[Q],Z+Y[Q+2],Z+Y[Q+1]);q.primitiveLength+=Y.length/3,q.vertexLength+=P;for(let Q=0;Q<C.vertexCount;Q++){let re=Math.floor(C.x/C.vertexCount),fe=Math.floor(C.y/C.vertexCount);this.centroidVertexArray.emplaceBack(re,fe)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,E,_)}}function QUe(u,l){return u.x===l.x&&(u.x<0||u.x>qi)||u.y===l.y&&(u.y<0||u.y>qi)}function e3e(u){return u.every(l=>l.x<0)||u.every(l=>l.x>qi)||u.every(l=>l.y<0)||u.every(l=>l.y>qi)}let CK;kt("FillExtrusionBucket",Sk,{omit:["layers","features"]});var t3e={get paint(){return CK=CK||new b({"fill-extrusion-opacity":new Vt(be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ur(be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Vt(be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Vt(be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xg(be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ur(be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ur(be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Vt(be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class r3e extends p{constructor(l){super(l,t3e)}createBucket(l){return new Sk(l)}queryRadius(){return ST(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(l,f,m,_,E,I,C,P){let q=ET(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),I.angle,C),F=this.paint.get("fill-extrusion-height").evaluate(f,m),U=this.paint.get("fill-extrusion-base").evaluate(f,m),Z=function(Q,re,fe,de){let qe=[];for(let we of Q){let Ne=[we.x,we.y,0,1];IT(Ne,Ne,re),qe.push(new d(Ne[0]/Ne[3],Ne[1]/Ne[3]))}return qe}(q,P),Y=function(Q,re,fe,de){let qe=[],we=[],Ne=de[8]*re,He=de[9]*re,ot=de[10]*re,Mt=de[11]*re,sr=de[8]*fe,At=de[9]*fe,xt=de[10]*fe,Zt=de[11]*fe;for(let qt of Q){let Nt=[],Xe=[];for(let Jt of qt){let $t=Jt.x,mr=Jt.y,Mn=de[0]*$t+de[4]*mr+de[12],bn=de[1]*$t+de[5]*mr+de[13],Qi=de[2]*$t+de[6]*mr+de[14],Al=de[3]*$t+de[7]*mr+de[15],Co=Qi+ot,eo=Al+Mt,ca=Mn+sr,fa=bn+At,ha=Qi+xt,gi=Al+Zt,to=new d((Mn+Ne)/eo,(bn+He)/eo);to.z=Co/eo,Nt.push(to);let Uo=new d(ca/gi,fa/gi);Uo.z=ha/gi,Xe.push(Uo)}qe.push(Nt),we.push(Xe)}return[qe,we]}(_,U,F,P);return function(Q,re,fe){let de=1/0;aK(fe,re)&&(de=MK(fe,re[0]));for(let qe=0;qe<re.length;qe++){let we=re[qe],Ne=Q[qe];for(let He=0;He<we.length-1;He++){let ot=we[He],Mt=[ot,we[He+1],Ne[He+1],Ne[He],ot];oK(fe,Mt)&&(de=Math.min(de,MK(fe,Mt)))}}return de!==1/0&&de}(Y[0],Y[1],Z)}}function cw(u,l){return u.x*l.x+u.y*l.y}function MK(u,l){if(u.length===1){let f=0,m=l[f++],_;for(;!_||m.equals(_);)if(_=l[f++],!_)return 1/0;for(;f<l.length;f++){let E=l[f],I=u[0],C=_.sub(m),P=E.sub(m),q=I.sub(m),F=cw(C,C),U=cw(C,P),Z=cw(P,P),Y=cw(q,C),Q=cw(q,P),re=F*Z-U*U,fe=(Z*Y-U*Q)/re,de=(F*Q-U*Y)/re,qe=m.z*(1-fe-de)+_.z*fe+E.z*de;if(isFinite(qe))return qe}return 1/0}{let f=1/0;for(let m of l)f=Math.min(f,m.z);return f}}let n3e=M([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:i3e}=n3e,o3e=M([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:a3e}=o3e,s3e=np.VectorTileFeature.types,l3e=Math.cos(Math.PI/180*37.5),RK=Math.pow(2,14)/.5;class Ek{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(f=>{this.gradients[f.id]={}}),this.layoutVertexArray=new bg,this.layoutVertexArray2=new Jh,this.indexArray=new Js,this.programConfigurations=new lm(l.layers,l.zoom),this.segments=new Wr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){this.hasPattern=_k("line",this.layers,f);let _=this.layers[0].layout.get("line-sort-key"),E=!_.isConstant(),I=[];for(let{feature:C,id:P,index:q,sourceLayerIndex:F}of l){let U=this.layers[0]._featureFilter.needGeometry,Z=cm(C,U);if(!this.layers[0]._featureFilter.filter(new Vn(this.zoom),Z,m))continue;let Y=E?_.evaluate(Z,{},m):void 0,Q={id:P,properties:C.properties,type:C.type,sourceLayerIndex:F,index:q,geometry:U?Z.geometry:um(C),patterns:{},sortKey:Y};I.push(Q)}E&&I.sort((C,P)=>C.sortKey-P.sortKey);for(let C of I){let{geometry:P,index:q,sourceLayerIndex:F}=C;if(this.hasPattern){let U=xk("line",this.layers,C,this.zoom,f);this.patternFeatures.push(U)}else this.addFeature(C,P,q,m,{});f.featureIndex.insert(l[q].feature,P,q,F,this.index)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}addFeatures(l,f,m){for(let _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,a3e)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,i3e),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,f,m,_,E){let I=this.layers[0].layout,C=I.get("line-join").evaluate(l,{}),P=I.get("line-cap"),q=I.get("line-miter-limit"),F=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(let U of f)this.addLine(U,l,C,P,q,F);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,E,_)}addLine(l,f,m,_,E,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let de=0;de<l.length-1;de++)this.totalDistance+=l[de].dist(l[de+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let C=s3e[f.type]==="Polygon",P=l.length;for(;P>=2&&l[P-1].equals(l[P-2]);)P--;let q=0;for(;q<P-1&&l[q].equals(l[q+1]);)q++;if(P<(C?3:2))return;m==="bevel"&&(E=1.05);let F=this.overscaling<=16?15*qi/(512*this.overscaling):0,U=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray),Z,Y,Q,re,fe;this.e1=this.e2=-1,C&&(Z=l[P-2],fe=l[q].sub(Z)._unit()._perp());for(let de=q;de<P;de++){if(Q=de===P-1?C?l[q+1]:void 0:l[de+1],Q&&l[de].equals(Q))continue;fe&&(re=fe),Z&&(Y=Z),Z=l[de],fe=Q?Q.sub(Z)._unit()._perp():re,re=re||fe;let qe=re.add(fe);qe.x===0&&qe.y===0||qe._unit();let we=re.x*fe.x+re.y*fe.y,Ne=qe.x*fe.x+qe.y*fe.y,He=Ne!==0?1/Ne:1/0,ot=2*Math.sqrt(2-2*Ne),Mt=Ne<l3e&&Y&&Q,sr=re.x*fe.y-re.y*fe.x>0;if(Mt&&de>q){let Zt=Z.dist(Y);if(Zt>2*F){let qt=Z.sub(Z.sub(Y)._mult(F/Zt)._round());this.updateDistance(Y,qt),this.addCurrentVertex(qt,re,0,0,U),Y=qt}}let At=Y&&Q,xt=At?m:C?"butt":_;if(At&&xt==="round"&&(He<I?xt="miter":He<=2&&(xt="fakeround")),xt==="miter"&&He>E&&(xt="bevel"),xt==="bevel"&&(He>2&&(xt="flipbevel"),He<E&&(xt="miter")),Y&&this.updateDistance(Y,Z),xt==="miter")qe._mult(He),this.addCurrentVertex(Z,qe,0,0,U);else if(xt==="flipbevel"){if(He>100)qe=fe.mult(-1);else{let Zt=He*re.add(fe).mag()/re.sub(fe).mag();qe._perp()._mult(Zt*(sr?-1:1))}this.addCurrentVertex(Z,qe,0,0,U),this.addCurrentVertex(Z,qe.mult(-1),0,0,U)}else if(xt==="bevel"||xt==="fakeround"){let Zt=-Math.sqrt(He*He-1),qt=sr?Zt:0,Nt=sr?0:Zt;if(Y&&this.addCurrentVertex(Z,re,qt,Nt,U),xt==="fakeround"){let Xe=Math.round(180*ot/Math.PI/20);for(let Jt=1;Jt<Xe;Jt++){let $t=Jt/Xe;if($t!==.5){let Mn=$t-.5;$t+=$t*Mn*($t-1)*((1.0904+we*(we*(3.55645-1.43519*we)-3.2452))*Mn*Mn+(.848013+we*(.215638*we-1.06021)))}let mr=fe.sub(re)._mult($t)._add(re)._unit()._mult(sr?-1:1);this.addHalfVertex(Z,mr.x,mr.y,!1,sr,0,U)}}Q&&this.addCurrentVertex(Z,fe,-qt,-Nt,U)}else if(xt==="butt")this.addCurrentVertex(Z,qe,0,0,U);else if(xt==="square"){let Zt=Y?1:-1;this.addCurrentVertex(Z,qe,Zt,Zt,U)}else xt==="round"&&(Y&&(this.addCurrentVertex(Z,re,0,0,U),this.addCurrentVertex(Z,re,1,1,U,!0)),Q&&(this.addCurrentVertex(Z,fe,-1,-1,U,!0),this.addCurrentVertex(Z,fe,0,0,U)));if(Mt&&de<P-1){let Zt=Z.dist(Q);if(Zt>2*F){let qt=Z.add(Q.sub(Z)._mult(F/Zt)._round());this.updateDistance(Z,qt),this.addCurrentVertex(qt,fe,0,0,U),Z=qt}}}}addCurrentVertex(l,f,m,_,E,I=!1){let C=f.y*_-f.x,P=-f.y-f.x*_;this.addHalfVertex(l,f.x+f.y*m,f.y-f.x*m,I,!1,m,E),this.addHalfVertex(l,C,P,I,!0,-_,E),this.distance>RK/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,f,m,_,E,I))}addHalfVertex({x:l,y:f},m,_,E,I,C,P){let q=.5*(this.lineClips?this.scaledDistance*(RK-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(E?1:0),(f<<1)+(I?1:0),Math.round(63*m)+128,Math.round(63*_)+128,1+(C===0?0:C<0?-1:1)|(63&q)<<2,q>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let F=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,F),P.primitiveLength++),I?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,f){this.distance+=l.dist(f),this.updateScaledDistance()}}let PK,OK;kt("LineBucket",Ek,{omit:["layers","patternFeatures"]});var LK={get paint(){return OK=OK||new b({"line-opacity":new ur(be.paint_line["line-opacity"]),"line-color":new ur(be.paint_line["line-color"]),"line-translate":new Vt(be.paint_line["line-translate"]),"line-translate-anchor":new Vt(be.paint_line["line-translate-anchor"]),"line-width":new ur(be.paint_line["line-width"]),"line-gap-width":new ur(be.paint_line["line-gap-width"]),"line-offset":new ur(be.paint_line["line-offset"]),"line-blur":new ur(be.paint_line["line-blur"]),"line-dasharray":new wg(be.paint_line["line-dasharray"]),"line-pattern":new xg(be.paint_line["line-pattern"]),"line-gradient":new ew(be.paint_line["line-gradient"])})},get layout(){return PK=PK||new b({"line-cap":new Vt(be.layout_line["line-cap"]),"line-join":new ur(be.layout_line["line-join"]),"line-miter-limit":new Vt(be.layout_line["line-miter-limit"]),"line-round-limit":new Vt(be.layout_line["line-round-limit"]),"line-sort-key":new ur(be.layout_line["line-sort-key"])})}};class u3e extends ur{possiblyEvaluate(l,f){return f=new Vn(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),super.possiblyEvaluate(l,f)}evaluate(l,f,m,_){return f=ee({},f,{zoom:Math.floor(f.zoom)}),super.evaluate(l,f,m,_)}}let MT;class c3e extends p{constructor(l){super(l,LK),this.gradientVersion=0,MT||(MT=new u3e(LK.paint.properties["line-width"].specification),MT.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){let f=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(f)&&f._styleExpression.expression instanceof Oh,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,f){super.recalculate(l,f),this.paint._values["line-floorwidth"]=MT.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new Ek(l)}queryRadius(l){let f=l,m=DK(nw("line-width",this,f),nw("line-gap-width",this,f)),_=nw("line-offset",this,f);return m/2+Math.abs(_)+ST(this.paint.get("line-translate"))}queryIntersectsFeature(l,f,m,_,E,I,C){let P=ET(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),I.angle,C),q=C/2*DK(this.paint.get("line-width").evaluate(f,m),this.paint.get("line-gap-width").evaluate(f,m)),F=this.paint.get("line-offset").evaluate(f,m);return F&&(_=function(U,Z){let Y=[];for(let Q=0;Q<U.length;Q++){let re=U[Q],fe=[];for(let de=0;de<re.length;de++){let qe=re[de-1],we=re[de],Ne=re[de+1],He=de===0?new d(0,0):we.sub(qe)._unit()._perp(),ot=de===re.length-1?new d(0,0):Ne.sub(we)._unit()._perp(),Mt=He._add(ot)._unit(),sr=Mt.x*ot.x+Mt.y*ot.y;sr!==0&&Mt._mult(1/sr),fe.push(Mt._mult(Z)._add(we))}Y.push(fe)}return Y}(_,F*C)),function(U,Z,Y){for(let Q=0;Q<Z.length;Q++){let re=Z[Q];if(U.length>=3){for(let fe=0;fe<re.length;fe++)if(Cg(U,re[fe]))return!0}if(_Ue(U,re,Y))return!0}return!1}(P,_,q)}isTileClipped(){return!0}}function DK(u,l){return l>0?l+2*u:u}let f3e=M([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),h3e=M([{name:"a_projected_pos",components:3,type:"Float32"}],4);M([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let p3e=M([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);M([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let NK=M([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),d3e=M([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function m3e(u,l,f){return u.sections.forEach(m=>{m.text=function(_,E,I){let C=E.layout.get("text-transform").evaluate(I,{});return C==="uppercase"?_=_.toLocaleUpperCase():C==="lowercase"&&(_=_.toLocaleLowerCase()),za.applyArabicShaping&&(_=za.applyArabicShaping(_)),_}(m.text,l,f)}),u}M([{name:"triangle",components:3,type:"Uint16"}]),M([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),M([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),M([{type:"Float32",name:"offsetX"}]),M([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),M([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let fw={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Vi=24,kK=wn,qK=function(u,l,f,m,_){var E,I,C=8*_-m-1,P=(1<<C)-1,q=P>>1,F=-7,U=f?_-1:0,Z=f?-1:1,Y=u[l+U];for(U+=Z,E=Y&(1<<-F)-1,Y>>=-F,F+=C;F>0;E=256*E+u[l+U],U+=Z,F-=8);for(I=E&(1<<-F)-1,E>>=-F,F+=m;F>0;I=256*I+u[l+U],U+=Z,F-=8);if(E===0)E=1-q;else{if(E===P)return I?NaN:1/0*(Y?-1:1);I+=Math.pow(2,m),E-=q}return(Y?-1:1)*I*Math.pow(2,E-m)},jK=function(u,l,f,m,_,E){var I,C,P,q=8*E-_-1,F=(1<<q)-1,U=F>>1,Z=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,Y=m?0:E-1,Q=m?1:-1,re=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(C=isNaN(l)?1:0,I=F):(I=Math.floor(Math.log(l)/Math.LN2),l*(P=Math.pow(2,-I))<1&&(I--,P*=2),(l+=I+U>=1?Z/P:Z*Math.pow(2,1-U))*P>=2&&(I++,P/=2),I+U>=F?(C=0,I=F):I+U>=1?(C=(l*P-1)*Math.pow(2,_),I+=U):(C=l*Math.pow(2,U-1)*Math.pow(2,_),I=0));_>=8;u[f+Y]=255&C,Y+=Q,C/=256,_-=8);for(I=I<<_|C,q+=_;q>0;u[f+Y]=255&I,Y+=Q,I/=256,q-=8);u[f+Y-Q]|=128*re};function wn(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}wn.Varint=0,wn.Fixed64=1,wn.Bytes=2,wn.Fixed32=5;var Ik=4294967296,FK=1/Ik,zK=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");function yf(u){return u.type===wn.Bytes?u.readVarint()+u.pos:u.pos+1}function Og(u,l,f){return f?4294967296*l+(u>>>0):4294967296*(l>>>0)+(u>>>0)}function BK(u,l,f){var m=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));f.realloc(m);for(var _=f.pos-1;_>=u;_--)f.buf[_+m]=f.buf[_]}function v3e(u,l){for(var f=0;f<u.length;f++)l.writeVarint(u[f])}function g3e(u,l){for(var f=0;f<u.length;f++)l.writeSVarint(u[f])}function y3e(u,l){for(var f=0;f<u.length;f++)l.writeFloat(u[f])}function _3e(u,l){for(var f=0;f<u.length;f++)l.writeDouble(u[f])}function x3e(u,l){for(var f=0;f<u.length;f++)l.writeBoolean(u[f])}function w3e(u,l){for(var f=0;f<u.length;f++)l.writeFixed32(u[f])}function b3e(u,l){for(var f=0;f<u.length;f++)l.writeSFixed32(u[f])}function S3e(u,l){for(var f=0;f<u.length;f++)l.writeFixed64(u[f])}function E3e(u,l){for(var f=0;f<u.length;f++)l.writeSFixed64(u[f])}function RT(u,l){return(u[l]|u[l+1]<<8|u[l+2]<<16)+16777216*u[l+3]}function Lg(u,l,f){u[f]=l,u[f+1]=l>>>8,u[f+2]=l>>>16,u[f+3]=l>>>24}function UK(u,l){return(u[l]|u[l+1]<<8|u[l+2]<<16)+(u[l+3]<<24)}wn.prototype={destroy:function(){this.buf=null},readFields:function(u,l,f){for(f=f||this.length;this.pos<f;){var m=this.readVarint(),_=m>>3,E=this.pos;this.type=7&m,u(_,l,this),this.pos===E&&this.skip(m)}return l},readMessage:function(u,l){return this.readFields(u,l,this.readVarint()+this.pos)},readFixed32:function(){var u=RT(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=UK(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=RT(this.buf,this.pos)+RT(this.buf,this.pos+4)*Ik;return this.pos+=8,u},readSFixed64:function(){var u=RT(this.buf,this.pos)+UK(this.buf,this.pos+4)*Ik;return this.pos+=8,u},readFloat:function(){var u=qK(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=qK(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var l,f,m=this.buf;return l=127&(f=m[this.pos++]),f<128?l:(l|=(127&(f=m[this.pos++]))<<7,f<128?l:(l|=(127&(f=m[this.pos++]))<<14,f<128?l:(l|=(127&(f=m[this.pos++]))<<21,f<128?l:function(_,E,I){var C,P,q=I.buf;if(C=(112&(P=q[I.pos++]))>>4,P<128||(C|=(127&(P=q[I.pos++]))<<3,P<128)||(C|=(127&(P=q[I.pos++]))<<10,P<128)||(C|=(127&(P=q[I.pos++]))<<17,P<128)||(C|=(127&(P=q[I.pos++]))<<24,P<128)||(C|=(1&(P=q[I.pos++]))<<31,P<128))return Og(_,C,E);throw new Error("Expected varint not more than 10 bytes")}(l|=(15&(f=m[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,l=this.pos;return this.pos=u,u-l>=12&&zK?function(f,m,_){return zK.decode(f.subarray(m,_))}(this.buf,l,u):function(f,m,_){for(var E="",I=m;I<_;){var C,P,q,F=f[I],U=null,Z=F>239?4:F>223?3:F>191?2:1;if(I+Z>_)break;Z===1?F<128&&(U=F):Z===2?(192&(C=f[I+1]))==128&&(U=(31&F)<<6|63&C)<=127&&(U=null):Z===3?(P=f[I+2],(192&(C=f[I+1]))==128&&(192&P)==128&&((U=(15&F)<<12|(63&C)<<6|63&P)<=2047||U>=55296&&U<=57343)&&(U=null)):Z===4&&(P=f[I+2],q=f[I+3],(192&(C=f[I+1]))==128&&(192&P)==128&&(192&q)==128&&((U=(15&F)<<18|(63&C)<<12|(63&P)<<6|63&q)<=65535||U>=1114112)&&(U=null)),U===null?(U=65533,Z=1):U>65535&&(U-=65536,E+=String.fromCharCode(U>>>10&1023|55296),U=56320|1023&U),E+=String.fromCharCode(U),I+=Z}return E}(this.buf,l,u)},readBytes:function(){var u=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,u);return this.pos=u,l},readPackedVarint:function(u,l){if(this.type!==wn.Bytes)return u.push(this.readVarint(l));var f=yf(this);for(u=u||[];this.pos<f;)u.push(this.readVarint(l));return u},readPackedSVarint:function(u){if(this.type!==wn.Bytes)return u.push(this.readSVarint());var l=yf(this);for(u=u||[];this.pos<l;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==wn.Bytes)return u.push(this.readBoolean());var l=yf(this);for(u=u||[];this.pos<l;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==wn.Bytes)return u.push(this.readFloat());var l=yf(this);for(u=u||[];this.pos<l;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==wn.Bytes)return u.push(this.readDouble());var l=yf(this);for(u=u||[];this.pos<l;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==wn.Bytes)return u.push(this.readFixed32());var l=yf(this);for(u=u||[];this.pos<l;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==wn.Bytes)return u.push(this.readSFixed32());var l=yf(this);for(u=u||[];this.pos<l;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==wn.Bytes)return u.push(this.readFixed64());var l=yf(this);for(u=u||[];this.pos<l;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==wn.Bytes)return u.push(this.readSFixed64());var l=yf(this);for(u=u||[];this.pos<l;)u.push(this.readSFixed64());return u},skip:function(u){var l=7&u;if(l===wn.Varint)for(;this.buf[this.pos++]>127;);else if(l===wn.Bytes)this.pos=this.readVarint()+this.pos;else if(l===wn.Fixed32)this.pos+=4;else{if(l!==wn.Fixed64)throw new Error("Unimplemented type: "+l);this.pos+=8}},writeTag:function(u,l){this.writeVarint(u<<3|l)},realloc:function(u){for(var l=this.length||16;l<this.pos+u;)l*=2;if(l!==this.length){var f=new Uint8Array(l);f.set(this.buf),this.buf=f,this.length=l}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),Lg(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),Lg(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),Lg(this.buf,-1&u,this.pos),Lg(this.buf,Math.floor(u*FK),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),Lg(this.buf,-1&u,this.pos),Lg(this.buf,Math.floor(u*FK),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(l,f){var m,_;if(l>=0?(m=l%4294967296|0,_=l/4294967296|0):(_=~(-l/4294967296),4294967295^(m=~(-l%4294967296))?m=m+1|0:(m=0,_=_+1|0)),l>=18446744073709552e3||l<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),function(E,I,C){C.buf[C.pos++]=127&E|128,E>>>=7,C.buf[C.pos++]=127&E|128,E>>>=7,C.buf[C.pos++]=127&E|128,E>>>=7,C.buf[C.pos++]=127&E|128,C.buf[C.pos]=127&(E>>>=7)}(m,0,f),function(E,I){var C=(7&E)<<4;I.buf[I.pos++]|=C|((E>>>=3)?128:0),E&&(I.buf[I.pos++]=127&E|((E>>>=7)?128:0),E&&(I.buf[I.pos++]=127&E|((E>>>=7)?128:0),E&&(I.buf[I.pos++]=127&E|((E>>>=7)?128:0),E&&(I.buf[I.pos++]=127&E|((E>>>=7)?128:0),E&&(I.buf[I.pos++]=127&E)))))}(_,f)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var l=this.pos;this.pos=function(m,_,E){for(var I,C,P=0;P<_.length;P++){if((I=_.charCodeAt(P))>55295&&I<57344){if(!C){I>56319||P+1===_.length?(m[E++]=239,m[E++]=191,m[E++]=189):C=I;continue}if(I<56320){m[E++]=239,m[E++]=191,m[E++]=189,C=I;continue}I=C-55296<<10|I-56320|65536,C=null}else C&&(m[E++]=239,m[E++]=191,m[E++]=189,C=null);I<128?m[E++]=I:(I<2048?m[E++]=I>>6|192:(I<65536?m[E++]=I>>12|224:(m[E++]=I>>18|240,m[E++]=I>>12&63|128),m[E++]=I>>6&63|128),m[E++]=63&I|128)}return E}(this.buf,u,this.pos);var f=this.pos-l;f>=128&&BK(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f},writeFloat:function(u){this.realloc(4),jK(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),jK(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var l=u.length;this.writeVarint(l),this.realloc(l);for(var f=0;f<l;f++)this.buf[this.pos++]=u[f]},writeRawMessage:function(u,l){this.pos++;var f=this.pos;u(l,this);var m=this.pos-f;m>=128&&BK(f,m,this),this.pos=f-1,this.writeVarint(m),this.pos+=m},writeMessage:function(u,l,f){this.writeTag(u,wn.Bytes),this.writeRawMessage(l,f)},writePackedVarint:function(u,l){l.length&&this.writeMessage(u,v3e,l)},writePackedSVarint:function(u,l){l.length&&this.writeMessage(u,g3e,l)},writePackedBoolean:function(u,l){l.length&&this.writeMessage(u,x3e,l)},writePackedFloat:function(u,l){l.length&&this.writeMessage(u,y3e,l)},writePackedDouble:function(u,l){l.length&&this.writeMessage(u,_3e,l)},writePackedFixed32:function(u,l){l.length&&this.writeMessage(u,w3e,l)},writePackedSFixed32:function(u,l){l.length&&this.writeMessage(u,b3e,l)},writePackedFixed64:function(u,l){l.length&&this.writeMessage(u,S3e,l)},writePackedSFixed64:function(u,l){l.length&&this.writeMessage(u,E3e,l)},writeBytesField:function(u,l){this.writeTag(u,wn.Bytes),this.writeBytes(l)},writeFixed32Field:function(u,l){this.writeTag(u,wn.Fixed32),this.writeFixed32(l)},writeSFixed32Field:function(u,l){this.writeTag(u,wn.Fixed32),this.writeSFixed32(l)},writeFixed64Field:function(u,l){this.writeTag(u,wn.Fixed64),this.writeFixed64(l)},writeSFixed64Field:function(u,l){this.writeTag(u,wn.Fixed64),this.writeSFixed64(l)},writeVarintField:function(u,l){this.writeTag(u,wn.Varint),this.writeVarint(l)},writeSVarintField:function(u,l){this.writeTag(u,wn.Varint),this.writeSVarint(l)},writeStringField:function(u,l){this.writeTag(u,wn.Bytes),this.writeString(l)},writeFloatField:function(u,l){this.writeTag(u,wn.Fixed32),this.writeFloat(l)},writeDoubleField:function(u,l){this.writeTag(u,wn.Fixed64),this.writeDouble(l)},writeBooleanField:function(u,l){this.writeVarintField(u,!!l)}};var Tk=a(kK);let Ak=3;function I3e(u,l,f){u===1&&f.readMessage(T3e,l)}function T3e(u,l,f){if(u===3){let{id:m,bitmap:_,width:E,height:I,left:C,top:P,advance:q}=f.readMessage(A3e,{});l.push({id:m,bitmap:new ow({width:E+2*Ak,height:I+2*Ak},_),metrics:{width:E,height:I,left:C,top:P,advance:q}})}}function A3e(u,l,f){u===1?l.id=f.readVarint():u===2?l.bitmap=f.readBytes():u===3?l.width=f.readVarint():u===4?l.height=f.readVarint():u===5?l.left=f.readSVarint():u===6?l.top=f.readSVarint():u===7&&(l.advance=f.readVarint())}let VK=Ak;function GK(u){let l=0,f=0;for(let I of u)l+=I.w*I.h,f=Math.max(f,I.w);u.sort((I,C)=>C.h-I.h);let m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),f),h:1/0}],_=0,E=0;for(let I of u)for(let C=m.length-1;C>=0;C--){let P=m[C];if(!(I.w>P.w||I.h>P.h)){if(I.x=P.x,I.y=P.y,E=Math.max(E,I.y+I.h),_=Math.max(_,I.x+I.w),I.w===P.w&&I.h===P.h){let q=m.pop();C<m.length&&(m[C]=q)}else I.h===P.h?(P.x+=I.w,P.w-=I.w):I.w===P.w?(P.y+=I.h,P.h-=I.h):(m.push({x:P.x+I.w,y:P.y,w:P.w-I.w,h:I.h}),P.y+=I.h,P.h-=I.h);break}}return{w:_,h:E,fill:l/(_*E)||0}}let Ua=1;class Ck{constructor(l,{pixelRatio:f,version:m,stretchX:_,stretchY:E,content:I,textFitWidth:C,textFitHeight:P}){this.paddedRect=l,this.pixelRatio=f,this.stretchX=_,this.stretchY=E,this.content=I,this.version=m,this.textFitWidth=C,this.textFitHeight=P}get tl(){return[this.paddedRect.x+Ua,this.paddedRect.y+Ua]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ua,this.paddedRect.y+this.paddedRect.h-Ua]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ua)/this.pixelRatio,(this.paddedRect.h-2*Ua)/this.pixelRatio]}}class $K{constructor(l,f){let m={},_={};this.haveRenderCallbacks=[];let E=[];this.addImages(l,m,E),this.addImages(f,_,E);let{w:I,h:C}=GK(E),P=new Qs({width:I||1,height:C||1});for(let q in l){let F=l[q],U=m[q].paddedRect;Qs.copy(F.data,P,{x:0,y:0},{x:U.x+Ua,y:U.y+Ua},F.data)}for(let q in f){let F=f[q],U=_[q].paddedRect,Z=U.x+Ua,Y=U.y+Ua,Q=F.data.width,re=F.data.height;Qs.copy(F.data,P,{x:0,y:0},{x:Z,y:Y},F.data),Qs.copy(F.data,P,{x:0,y:re-1},{x:Z,y:Y-1},{width:Q,height:1}),Qs.copy(F.data,P,{x:0,y:0},{x:Z,y:Y+re},{width:Q,height:1}),Qs.copy(F.data,P,{x:Q-1,y:0},{x:Z-1,y:Y},{width:1,height:re}),Qs.copy(F.data,P,{x:0,y:0},{x:Z+Q,y:Y},{width:1,height:re})}this.image=P,this.iconPositions=m,this.patternPositions=_}addImages(l,f,m){for(let _ in l){let E=l[_],I={x:0,y:0,w:E.data.width+2*Ua,h:E.data.height+2*Ua};m.push(I),f[_]=new Ck(I,E),E.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(l,f){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let m in l.updatedImages)this.patchUpdatedImage(this.iconPositions[m],l.getImage(m),f),this.patchUpdatedImage(this.patternPositions[m],l.getImage(m),f)}patchUpdatedImage(l,f,m){if(!l||!f||l.version===f.version)return;l.version=f.version;let[_,E]=l.tl;m.update(f.data,void 0,{x:_,y:E})}}var ip;kt("ImagePosition",Ck),kt("ImageAtlas",$K),i.ah=void 0,(ip=i.ah||(i.ah={}))[ip.none=0]="none",ip[ip.horizontal=1]="horizontal",ip[ip.vertical=2]="vertical",ip[ip.horizontalOnly=3]="horizontalOnly";let hw=-17;class pw{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(l,f){let m=new pw;return m.scale=l||1,m.fontStack=f,m}static forImage(l){let f=new pw;return f.imageName=l,f}}class Dg{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,f){let m=new Dg;for(let _=0;_<l.sections.length;_++){let E=l.sections[_];E.image?m.addImageSection(E):m.addTextSection(E,f)}return m}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=function(l){let f="";for(let m=0;m<l.length;m++){let _=l.charCodeAt(m+1)||null,E=l.charCodeAt(m-1)||null;f+=_&&vT(_)&&!fw[l[m+1]]||E&&vT(E)&&!fw[l[m-1]]||!fw[l[m]]?l[m]:fw[l[m]]}return f}(this.text)}trim(){let l=0;for(let m=0;m<this.text.length&&OT[this.text.charCodeAt(m)];m++)l++;let f=this.text.length;for(let m=this.text.length-1;m>=0&&m>=l&&OT[this.text.charCodeAt(m)];m--)f--;this.text=this.text.substring(l,f),this.sectionIndex=this.sectionIndex.slice(l,f)}substring(l,f){let m=new Dg;return m.text=this.text.substring(l,f),m.sectionIndex=this.sectionIndex.slice(l,f),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,f)=>Math.max(l,this.sections[f].scale),0)}addTextSection(l,f){this.text+=l.text,this.sections.push(pw.forText(l.scale,l.fontStack||f));let m=this.sections.length-1;for(let _=0;_<l.text.length;++_)this.sectionIndex.push(m)}addImageSection(l){let f=l.image?l.image.name:"";if(f.length===0)return void Re("Can't add FormattedSection with an empty image.");let m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(pw.forImage(f)),this.sectionIndex.push(this.sections.length-1)):Re("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function PT(u,l,f,m,_,E,I,C,P,q,F,U,Z,Y,Q){let re=Dg.fromFeature(u,_),fe;U===i.ah.vertical&&re.verticalizePunctuation();let{processBidirectionalText:de,processStyledBidirectionalText:qe}=za;if(de&&re.sections.length===1){fe=[];let He=de(re.toString(),Mk(re,q,E,l,m,Y));for(let ot of He){let Mt=new Dg;Mt.text=ot,Mt.sections=re.sections;for(let sr=0;sr<ot.length;sr++)Mt.sectionIndex.push(0);fe.push(Mt)}}else if(qe){fe=[];let He=qe(re.text,re.sectionIndex,Mk(re,q,E,l,m,Y));for(let ot of He){let Mt=new Dg;Mt.text=ot[0],Mt.sectionIndex=ot[1],Mt.sections=re.sections,fe.push(Mt)}}else fe=function(He,ot){let Mt=[],sr=He.text,At=0;for(let xt of ot)Mt.push(He.substring(At,xt)),At=xt;return At<sr.length&&Mt.push(He.substring(At,sr.length)),Mt}(re,Mk(re,q,E,l,m,Y));let we=[],Ne={positionedLines:we,text:re.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:U,iconsInText:!1,verticalizable:!1};return function(He,ot,Mt,sr,At,xt,Zt,qt,Nt,Xe,Jt,$t){let mr=0,Mn=hw,bn=0,Qi=0,Al=qt==="right"?1:qt==="left"?0:.5,Co=0;for(let gi of At){gi.trim();let to=gi.getMaxScale(),Uo=(to-1)*Vi,Mo={positionedGlyphs:[],lineOffset:0};He.positionedLines[Co]=Mo;let pa=Mo.positionedGlyphs,Ro=0;if(!gi.length()){Mn+=xt,++Co;continue}for(let Va=0;Va<gi.length();Va++){let rn=gi.getSection(Va),Nn=gi.getSectionIndex(Va),Wn=gi.getCharCode(Va),ds=0,si=null,jg=null,uc=null,cc=Vi,Cl=!(Nt===i.ah.horizontal||!Jt&&!Jx(Wn)||Jt&&(OT[Wn]||(eo=Wn,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(eo)))));if(rn.imageName){let rl=sr[rn.imageName];if(!rl)continue;uc=rn.imageName,He.iconsInText=He.iconsInText||!0,jg=rl.paddedRect;let co=rl.displaySize;rn.scale=rn.scale*Vi/$t,si={width:co[0],height:co[1],left:Ua,top:-VK,advance:Cl?co[1]:co[0]},ds=Uo+(Vi-co[1]*rn.scale),cc=si.advance;let _f=Cl?co[0]*rn.scale-Vi*to:co[1]*rn.scale-Vi*to;_f>0&&_f>Ro&&(Ro=_f)}else{let rl=Mt[rn.fontStack],co=rl&&rl[Wn];if(co&&co.rect)jg=co.rect,si=co.metrics;else{let _f=ot[rn.fontStack],_w=_f&&_f[Wn];if(!_w)continue;si=_w.metrics}ds=(to-rn.scale)*Vi}Cl?(He.verticalizable=!0,pa.push({glyph:Wn,imageName:uc,x:mr,y:Mn+ds,vertical:Cl,scale:rn.scale,fontStack:rn.fontStack,sectionIndex:Nn,metrics:si,rect:jg}),mr+=cc*rn.scale+Xe):(pa.push({glyph:Wn,imageName:uc,x:mr,y:Mn+ds,vertical:Cl,scale:rn.scale,fontStack:rn.fontStack,sectionIndex:Nn,metrics:si,rect:jg}),mr+=si.advance*rn.scale+Xe)}pa.length!==0&&(bn=Math.max(mr-Xe,bn),P3e(pa,0,pa.length-1,Al,Ro)),mr=0;let tl=xt*to+Ro;Mo.lineOffset=Math.max(Ro,Uo),Mn+=tl,Qi=Math.max(tl,Qi),++Co}var eo;let ca=Mn-hw,{horizontalAlign:fa,verticalAlign:ha}=Rk(Zt);(function(gi,to,Uo,Mo,pa,Ro,tl,Va,rn){let Nn=(to-Uo)*pa,Wn=0;Wn=Ro!==tl?-Va*Mo-hw:(-Mo*rn+.5)*tl;for(let ds of gi)for(let si of ds.positionedGlyphs)si.x+=Nn,si.y+=Wn})(He.positionedLines,Al,fa,ha,bn,Qi,xt,ca,At.length),He.top+=-ha*ca,He.bottom=He.top+ca,He.left+=-fa*bn,He.right=He.left+bn}(Ne,l,f,m,fe,I,C,P,U,q,Z,Q),!function(He){for(let ot of He)if(ot.positionedGlyphs.length!==0)return!1;return!0}(we)&&Ne}let OT={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},C3e={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},M3e={40:!0};function HK(u,l,f,m,_,E){if(l.imageName){let I=m[l.imageName];return I?I.displaySize[0]*l.scale*Vi/E+_:0}{let I=f[l.fontStack],C=I&&I[u];return C?C.metrics.advance*l.scale+_:0}}function WK(u,l,f,m){let _=Math.pow(u-l,2);return m?u<l?_/2:2*_:_+Math.abs(f)*f}function R3e(u,l,f){let m=0;return u===10&&(m-=1e4),f&&(m+=150),u!==40&&u!==65288||(m+=50),l!==41&&l!==65289||(m+=50),m}function ZK(u,l,f,m,_,E){let I=null,C=WK(l,f,_,E);for(let P of m){let q=WK(l-P.x,f,_,E)+P.badness;q<=C&&(I=P,C=q)}return{index:u,x:l,priorBreak:I,badness:C}}function YK(u){return u?YK(u.priorBreak).concat(u.index):[]}function Mk(u,l,f,m,_,E){if(!u)return[];let I=[],C=function(U,Z,Y,Q,re,fe){let de=0;for(let qe=0;qe<U.length();qe++){let we=U.getSection(qe);de+=HK(U.getCharCode(qe),we,Q,re,Z,fe)}return de/Math.max(1,Math.ceil(de/Y))}(u,l,f,m,_,E),P=u.text.indexOf("\u200B")>=0,q=0;for(let U=0;U<u.length();U++){let Z=u.getSection(U),Y=u.getCharCode(U);if(OT[Y]||(q+=HK(Y,Z,m,_,l,E)),U<u.length()-1){let Q=!((F=Y)<11904)&&(!!Hr["CJK Compatibility Forms"](F)||!!Hr["CJK Compatibility"](F)||!!Hr["CJK Strokes"](F)||!!Hr["CJK Symbols and Punctuation"](F)||!!Hr["Enclosed CJK Letters and Months"](F)||!!Hr["Halfwidth and Fullwidth Forms"](F)||!!Hr["Ideographic Description Characters"](F)||!!Hr["Vertical Forms"](F)||mT.test(String.fromCodePoint(F)));(C3e[Y]||Q||Z.imageName||U!==u.length()-2&&M3e[u.getCharCode(U+1)])&&I.push(ZK(U+1,q,C,I,R3e(Y,u.getCharCode(U+1),Q&&P),!1))}}var F;return YK(ZK(u.length(),q,C,I,0,!0))}function Rk(u){let l=.5,f=.5;switch(u){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0;}switch(u){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0;}return{horizontalAlign:l,verticalAlign:f}}function P3e(u,l,f,m,_){if(!m&&!_)return;let E=u[f],I=(u[f].x+E.metrics.advance*E.scale)*m;for(let C=l;C<=f;C++)u[C].x-=I,u[C].y+=_}function O3e(u,l,f){let{horizontalAlign:m,verticalAlign:_}=Rk(f),E=l[0]-u.displaySize[0]*m,I=l[1]-u.displaySize[1]*_;return{image:u,top:I,bottom:I+u.displaySize[1],left:E,right:E+u.displaySize[0]}}function KK(u){var l,f;let m=u.left,_=u.top,E=u.right-m,I=u.bottom-_,C=(l=u.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",P=(f=u.image.textFitHeight)!==null&&f!==void 0?f:"stretchOrShrink",q=(u.image.content[2]-u.image.content[0])/(u.image.content[3]-u.image.content[1]);if(P==="proportional"){if(C==="stretchOnly"&&E/I<q||C==="proportional"){let F=Math.ceil(I*q);m*=F/E,E=F}}else if(C==="proportional"&&P==="stretchOnly"&&q!==0&&E/I>q){let F=Math.ceil(E/q);_*=F/I,I=F}return{x1:m,y1:_,x2:m+E,y2:_+I}}function XK(u,l,f,m,_,E){let I=u.image,C;if(I.content){let fe=I.content,de=I.pixelRatio||1;C=[fe[0]/de,fe[1]/de,I.displaySize[0]-fe[2]/de,I.displaySize[1]-fe[3]/de]}let P=l.left*E,q=l.right*E,F,U,Z,Y;f==="width"||f==="both"?(Y=_[0]+P-m[3],U=_[0]+q+m[1]):(Y=_[0]+(P+q-I.displaySize[0])/2,U=Y+I.displaySize[0]);let Q=l.top*E,re=l.bottom*E;return f==="height"||f==="both"?(F=_[1]+Q-m[0],Z=_[1]+re+m[2]):(F=_[1]+(Q+re-I.displaySize[1])/2,Z=F+I.displaySize[1]),{image:I,top:F,right:U,bottom:Z,left:Y,collisionPadding:C}}let dw=255,lc=128,op=dw*lc;function JK(u,l){let{expression:f}=l;if(f.kind==="constant")return{kind:"constant",layoutSize:f.evaluate(new Vn(u+1))};if(f.kind==="source")return{kind:"source"};{let{zoomStops:m,interpolationType:_}=f,E=0;for(;E<m.length&&m[E]<=u;)E++;E=Math.max(0,E-1);let I=E;for(;I<m.length&&m[I]<u+1;)I++;I=Math.min(m.length-1,I);let C=m[E],P=m[I];return f.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:P,interpolationType:_}:{kind:"camera",minZoom:C,maxZoom:P,minSize:f.evaluate(new Vn(C)),maxSize:f.evaluate(new Vn(P)),interpolationType:_}}}function Pk(u,l,f){let m="never",_=u.get(l);return _?m=_:u.get(f)&&(m="always"),m}let L3e=np.VectorTileFeature.types,D3e=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function LT(u,l,f,m,_,E,I,C,P,q,F,U,Z){let Y=C?Math.min(op,Math.round(C[0])):0,Q=C?Math.min(op,Math.round(C[1])):0;u.emplaceBack(l,f,Math.round(32*m),Math.round(32*_),E,I,(Y<<1)+(P?1:0),Q,16*q,16*F,256*U,256*Z)}function Ok(u,l,f){u.emplaceBack(l.x,l.y,f),u.emplaceBack(l.x,l.y,f),u.emplaceBack(l.x,l.y,f),u.emplaceBack(l.x,l.y,f)}function N3e(u){for(let l of u.sections)if(ak(l.text))return!0;return!1}class Lk{constructor(l){this.layoutVertexArray=new Sg,this.indexArray=new Js,this.programConfigurations=l,this.segments=new Wr,this.dynamicLayoutVertexArray=new tw,this.opacityVertexArray=new hs,this.hasVisibleVertices=!1,this.placedSymbolArray=new Gn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,f,m,_){this.isEmpty()||(m&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,f3e.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,f),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,h3e.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,D3e,!0),this.opacityVertexBuffer.itemSize=1),(m||_)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}kt("SymbolBuffers",Lk);class Dk{constructor(l,f,m){this.layoutVertexArray=new l,this.layoutAttributes=f,this.indexArray=new m,this.segments=new Wr,this.collisionVertexArray=new ac}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,p3e.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}kt("CollisionBuffers",Dk);class Ng{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(I=>I.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=pk([]),this.placementViewportMatrix=pk([]);let f=this.layers[0]._unevaluatedLayout._values;this.textSizeData=JK(this.zoom,f["text-size"]),this.iconSizeData=JK(this.zoom,f["icon-size"]);let m=this.layers[0].layout,_=m.get("symbol-sort-key"),E=m.get("symbol-z-order");this.canOverlap=Pk(m,"text-overlap","text-allow-overlap")!=="never"||Pk(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=E!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(E==="viewport-y"||E==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(I=>i.ah[I])),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.sourceID=l.sourceID}createArrays(){this.text=new Lk(new lm(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new Lk(new lm(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new $n,this.lineVertexArray=new Eo,this.symbolInstances=new Ur,this.textAnchorOffsets=new Hn}calculateGlyphDependencies(l,f,m,_,E){for(let I=0;I<l.length;I++)if(f[l.charCodeAt(I)]=!0,(m||_)&&E){let C=fw[l.charAt(I)];C&&(f[C.charCodeAt(0)]=!0)}}populate(l,f,m){let _=this.layers[0],E=_.layout,I=E.get("text-font"),C=E.get("text-field"),P=E.get("icon-image"),q=(C.value.kind!=="constant"||C.value.value instanceof ka&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),F=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,U=E.get("symbol-sort-key");if(this.features=[],!q&&!F)return;let Z=f.iconDependencies,Y=f.glyphDependencies,Q=f.availableImages,re=new Vn(this.zoom);for(let{feature:fe,id:de,index:qe,sourceLayerIndex:we}of l){let Ne=_._featureFilter.needGeometry,He=cm(fe,Ne);if(!_._featureFilter.filter(re,He,m))continue;let ot,Mt;if(Ne||(He.geometry=um(fe)),q){let At=_.getValueAndResolveTokens("text-field",He,m,Q),xt=ka.factory(At),Zt=this.hasRTLText=this.hasRTLText||N3e(xt);(!Zt||za.getRTLTextPluginStatus()==="unavailable"||Zt&&za.isParsed())&&(ot=m3e(xt,_,He))}if(F){let At=_.getValueAndResolveTokens("icon-image",He,m,Q);Mt=At instanceof ja?At:ja.fromString(At)}if(!ot&&!Mt)continue;let sr=this.sortFeaturesByKey?U.evaluate(He,{},m):void 0;if(this.features.push({id:de,text:ot,icon:Mt,index:qe,sourceLayerIndex:we,geometry:He.geometry,properties:fe.properties,type:L3e[fe.type],sortKey:sr}),Mt&&(Z[Mt.name]=!0),ot){let At=I.evaluate(He,{},m).join(","),xt=E.get("text-rotation-alignment")!=="viewport"&&E.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(i.ah.vertical)>=0;for(let Zt of ot.sections)if(Zt.image)Z[Zt.image.name]=!0;else{let qt=Kx(ot.toString()),Nt=Zt.fontStack||At,Xe=Y[Nt]=Y[Nt]||{};this.calculateGlyphDependencies(Zt.text,Xe,xt,this.allowVerticalPlacement,qt)}}}E.get("symbol-placement")==="line"&&(this.features=function(fe){let de={},qe={},we=[],Ne=0;function He(At){we.push(fe[At]),Ne++}function ot(At,xt,Zt){let qt=qe[At];return delete qe[At],qe[xt]=qt,we[qt].geometry[0].pop(),we[qt].geometry[0]=we[qt].geometry[0].concat(Zt[0]),qt}function Mt(At,xt,Zt){let qt=de[xt];return delete de[xt],de[At]=qt,we[qt].geometry[0].shift(),we[qt].geometry[0]=Zt[0].concat(we[qt].geometry[0]),qt}function sr(At,xt,Zt){let qt=Zt?xt[0][xt[0].length-1]:xt[0][0];return`${At}:${qt.x}:${qt.y}`}for(let At=0;At<fe.length;At++){let xt=fe[At],Zt=xt.geometry,qt=xt.text?xt.text.toString():null;if(!qt){He(At);continue}let Nt=sr(qt,Zt),Xe=sr(qt,Zt,!0);if(Nt in qe&&Xe in de&&qe[Nt]!==de[Xe]){let Jt=Mt(Nt,Xe,Zt),$t=ot(Nt,Xe,we[Jt].geometry);delete de[Nt],delete qe[Xe],qe[sr(qt,we[$t].geometry,!0)]=$t,we[Jt].geometry=null}else Nt in qe?ot(Nt,Xe,Zt):Xe in de?Mt(Nt,Xe,Zt):(He(At),de[Nt]=Ne-1,qe[Xe]=Ne-1)}return we.filter(At=>At.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((fe,de)=>fe.sortKey-de.sortKey)}update(l,f,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,f,this.layers,m),this.icon.programConfigurations.updatePaintArrays(l,f,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,f){let m=this.lineVertexArray.length;if(l.segment!==void 0){let _=l.dist(f[l.segment+1]),E=l.dist(f[l.segment]),I={};for(let C=l.segment+1;C<f.length;C++)I[C]={x:f[C].x,y:f[C].y,tileUnitDistanceFromAnchor:_},C<f.length-1&&(_+=f[C+1].dist(f[C]));for(let C=l.segment||0;C>=0;C--)I[C]={x:f[C].x,y:f[C].y,tileUnitDistanceFromAnchor:E},C>0&&(E+=f[C-1].dist(f[C]));for(let C=0;C<f.length;C++){let P=I[C];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(l,f,m,_,E,I,C,P,q,F,U,Z){let Y=l.indexArray,Q=l.layoutVertexArray,re=l.segments.prepareSegment(4*f.length,Q,Y,this.canOverlap?I.sortKey:void 0),fe=this.glyphOffsetArray.length,de=re.vertexLength,qe=this.allowVerticalPlacement&&C===i.ah.vertical?Math.PI/2:0,we=I.text&&I.text.sections;for(let Ne=0;Ne<f.length;Ne++){let{tl:He,tr:ot,bl:Mt,br:sr,tex:At,pixelOffsetTL:xt,pixelOffsetBR:Zt,minFontScaleX:qt,minFontScaleY:Nt,glyphOffset:Xe,isSDF:Jt,sectionIndex:$t}=f[Ne],mr=re.vertexLength,Mn=Xe[1];LT(Q,P.x,P.y,He.x,Mn+He.y,At.x,At.y,m,Jt,xt.x,xt.y,qt,Nt),LT(Q,P.x,P.y,ot.x,Mn+ot.y,At.x+At.w,At.y,m,Jt,Zt.x,xt.y,qt,Nt),LT(Q,P.x,P.y,Mt.x,Mn+Mt.y,At.x,At.y+At.h,m,Jt,xt.x,Zt.y,qt,Nt),LT(Q,P.x,P.y,sr.x,Mn+sr.y,At.x+At.w,At.y+At.h,m,Jt,Zt.x,Zt.y,qt,Nt),Ok(l.dynamicLayoutVertexArray,P,qe),Y.emplaceBack(mr,mr+1,mr+2),Y.emplaceBack(mr+1,mr+2,mr+3),re.vertexLength+=4,re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Xe[0]),Ne!==f.length-1&&$t===f[Ne+1].sectionIndex||l.programConfigurations.populatePaintArrays(Q.length,I,I.index,{},Z,we&&we[$t])}l.placedSymbolArray.emplaceBack(P.x,P.y,fe,this.glyphOffsetArray.length-fe,de,q,F,P.segment,m?m[0]:0,m?m[1]:0,_[0],_[1],C,0,!1,0,U)}_addCollisionDebugVertex(l,f,m,_,E,I){return f.emplaceBack(0,0),l.emplaceBack(m.x,m.y,_,E,Math.round(I.x),Math.round(I.y))}addCollisionDebugVertices(l,f,m,_,E,I,C){let P=E.segments.prepareSegment(4,E.layoutVertexArray,E.indexArray),q=P.vertexLength,F=E.layoutVertexArray,U=E.collisionVertexArray,Z=C.anchorX,Y=C.anchorY;this._addCollisionDebugVertex(F,U,I,Z,Y,new d(l,f)),this._addCollisionDebugVertex(F,U,I,Z,Y,new d(m,f)),this._addCollisionDebugVertex(F,U,I,Z,Y,new d(m,_)),this._addCollisionDebugVertex(F,U,I,Z,Y,new d(l,_)),P.vertexLength+=4;let Q=E.indexArray;Q.emplaceBack(q,q+1),Q.emplaceBack(q+1,q+2),Q.emplaceBack(q+2,q+3),Q.emplaceBack(q+3,q),P.primitiveLength+=4}addDebugCollisionBoxes(l,f,m,_){for(let E=l;E<f;E++){let I=this.collisionBoxArray.get(E);this.addCollisionDebugVertices(I.x1,I.y1,I.x2,I.y2,_?this.textCollisionBox:this.iconCollisionBox,I.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Dk(ps,NK.members,uo),this.iconCollisionBox=new Dk(ps,NK.members,uo);for(let l=0;l<this.symbolInstances.length;l++){let f=this.symbolInstances.get(l);this.addDebugCollisionBoxes(f.textBoxStartIndex,f.textBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.iconBoxStartIndex,f.iconBoxEndIndex,f,!1),this.addDebugCollisionBoxes(f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex,f,!1)}}_deserializeCollisionBoxesForSymbol(l,f,m,_,E,I,C,P,q){let F={};for(let U=f;U<m;U++){let Z=l.get(U);F.textBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},F.textFeatureIndex=Z.featureIndex;break}for(let U=_;U<E;U++){let Z=l.get(U);F.verticalTextBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},F.verticalTextFeatureIndex=Z.featureIndex;break}for(let U=I;U<C;U++){let Z=l.get(U);F.iconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},F.iconFeatureIndex=Z.featureIndex;break}for(let U=P;U<q;U++){let Z=l.get(U);F.verticalIconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},F.verticalIconFeatureIndex=Z.featureIndex;break}return F}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let f=0;f<this.symbolInstances.length;f++){let m=this.symbolInstances.get(f);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,f){let m=l.placedSymbolArray.get(f),_=m.vertexStartIndex+4*m.numGlyphs;for(let E=m.vertexStartIndex;E<_;E+=4)l.indexArray.emplaceBack(E,E+1,E+2),l.indexArray.emplaceBack(E+1,E+2,E+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let f=Math.sin(l),m=Math.cos(l),_=[],E=[],I=[];for(let C=0;C<this.symbolInstances.length;++C){I.push(C);let P=this.symbolInstances.get(C);_.push(0|Math.round(f*P.anchorX+m*P.anchorY)),E.push(P.featureIndex)}return I.sort((C,P)=>_[C]-_[P]||E[P]-E[C]),I}addToSortKeyRanges(l,f){let m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===f?m.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:f,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let f of this.symbolInstanceIndexes){let m=this.symbolInstances.get(f);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((_,E,I)=>{_>=0&&I.indexOf(_)===E&&this.addIndicesForPlacedSymbol(this.text,_)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let QK,eX;kt("SymbolBucket",Ng,{omit:["layers","collisionBoxArray","features","compareText"]}),Ng.MAX_GLYPHS=65535,Ng.addDynamicAttributes=Ok;var Nk={get paint(){return eX=eX||new b({"icon-opacity":new ur(be.paint_symbol["icon-opacity"]),"icon-color":new ur(be.paint_symbol["icon-color"]),"icon-halo-color":new ur(be.paint_symbol["icon-halo-color"]),"icon-halo-width":new ur(be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ur(be.paint_symbol["icon-halo-blur"]),"icon-translate":new Vt(be.paint_symbol["icon-translate"]),"icon-translate-anchor":new Vt(be.paint_symbol["icon-translate-anchor"]),"text-opacity":new ur(be.paint_symbol["text-opacity"]),"text-color":new ur(be.paint_symbol["text-color"],{runtimeType:Ai,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new ur(be.paint_symbol["text-halo-color"]),"text-halo-width":new ur(be.paint_symbol["text-halo-width"]),"text-halo-blur":new ur(be.paint_symbol["text-halo-blur"]),"text-translate":new Vt(be.paint_symbol["text-translate"]),"text-translate-anchor":new Vt(be.paint_symbol["text-translate-anchor"])})},get layout(){return QK=QK||new b({"symbol-placement":new Vt(be.layout_symbol["symbol-placement"]),"symbol-spacing":new Vt(be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Vt(be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ur(be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Vt(be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Vt(be.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Vt(be.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Vt(be.layout_symbol["icon-ignore-placement"]),"icon-optional":new Vt(be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Vt(be.layout_symbol["icon-rotation-alignment"]),"icon-size":new ur(be.layout_symbol["icon-size"]),"icon-text-fit":new Vt(be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Vt(be.layout_symbol["icon-text-fit-padding"]),"icon-image":new ur(be.layout_symbol["icon-image"]),"icon-rotate":new ur(be.layout_symbol["icon-rotate"]),"icon-padding":new ur(be.layout_symbol["icon-padding"]),"icon-keep-upright":new Vt(be.layout_symbol["icon-keep-upright"]),"icon-offset":new ur(be.layout_symbol["icon-offset"]),"icon-anchor":new ur(be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Vt(be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Vt(be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Vt(be.layout_symbol["text-rotation-alignment"]),"text-field":new ur(be.layout_symbol["text-field"]),"text-font":new ur(be.layout_symbol["text-font"]),"text-size":new ur(be.layout_symbol["text-size"]),"text-max-width":new ur(be.layout_symbol["text-max-width"]),"text-line-height":new Vt(be.layout_symbol["text-line-height"]),"text-letter-spacing":new ur(be.layout_symbol["text-letter-spacing"]),"text-justify":new ur(be.layout_symbol["text-justify"]),"text-radial-offset":new ur(be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Vt(be.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ur(be.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ur(be.layout_symbol["text-anchor"]),"text-max-angle":new Vt(be.layout_symbol["text-max-angle"]),"text-writing-mode":new Vt(be.layout_symbol["text-writing-mode"]),"text-rotate":new ur(be.layout_symbol["text-rotate"]),"text-padding":new Vt(be.layout_symbol["text-padding"]),"text-keep-upright":new Vt(be.layout_symbol["text-keep-upright"]),"text-transform":new ur(be.layout_symbol["text-transform"]),"text-offset":new ur(be.layout_symbol["text-offset"]),"text-allow-overlap":new Vt(be.layout_symbol["text-allow-overlap"]),"text-overlap":new Vt(be.layout_symbol["text-overlap"]),"text-ignore-placement":new Vt(be.layout_symbol["text-ignore-placement"]),"text-optional":new Vt(be.layout_symbol["text-optional"])})}};class tX{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:Ti,this.defaultValue=l}evaluate(l){if(l.formattedSection){let f=this.defaultValue.property.overrides;if(f&&f.hasOverride(l.formattedSection))return f.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}kt("FormatSectionOverride",tX,{omit:["defaultValue"]});class DT extends p{constructor(l){super(l,Nk)}recalculate(l,f){if(super.recalculate(l,f),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let m=this.layout.get("text-writing-mode");if(m){let _=[];for(let E of m)_.indexOf(E)<0&&_.push(E);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,f,m,_){let E=this.layout.get(l).evaluate(f,{},m,_),I=this._unevaluatedLayout._values[l];return I.isDataDriven()||lg(I.value)||!E?E:function(C,P){return P.replace(/{([^{}]+)}/g,(q,F)=>C&&F in C?String(C[F]):"")}(f.properties,E)}createBucket(l){return new Ng(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let l of Nk.paint.overridableProperties){if(!DT.hasPaintOverride(this.layout,l))continue;let f=this.paint.get(l),m=new tX(f),_=new sg(m,f.property.specification),E=null;E=f.value.kind==="constant"||f.value.kind==="source"?new Bh("source",_):new Uh("composite",_,f.value.zoomStops),this.paint._values[l]=new Il(f.property,E,f.parameters)}}_handleOverridablePaintPropertyUpdate(l,f,m){return!(!this.layout||f.isDataDriven()||m.isDataDriven())&&DT.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,f){let m=l.get("text-field"),_=Nk.paint.properties[f],E=!1,I=C=>{for(let P of C)if(_.overrides&&_.overrides.hasOverride(P))return void(E=!0)};if(m.value.kind==="constant"&&m.value.value instanceof ka)I(m.value.value.sections);else if(m.value.kind==="source"){let C=q=>{E||(q instanceof Hs&&ki(q.value)===it?I(q.value.sections):q instanceof Jv?I(q.sections):q.eachChild(C))},P=m.value;P._styleExpression&&C(P._styleExpression.expression)}return E}}let rX;var k3e={get paint(){return rX=rX||new b({"background-color":new Vt(be.paint_background["background-color"]),"background-pattern":new wg(be.paint_background["background-pattern"]),"background-opacity":new Vt(be.paint_background["background-opacity"])})}};class q3e extends p{constructor(l){super(l,k3e)}}let nX;var j3e={get paint(){return nX=nX||new b({"raster-opacity":new Vt(be.paint_raster["raster-opacity"]),"raster-hue-rotate":new Vt(be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Vt(be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Vt(be.paint_raster["raster-brightness-max"]),"raster-saturation":new Vt(be.paint_raster["raster-saturation"]),"raster-contrast":new Vt(be.paint_raster["raster-contrast"]),"raster-resampling":new Vt(be.paint_raster["raster-resampling"]),"raster-fade-duration":new Vt(be.paint_raster["raster-fade-duration"])})}};class F3e extends p{constructor(l){super(l,j3e)}}class z3e extends p{constructor(l){super(l,{}),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class B3e{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let kk=6371008.8;class ap{constructor(l,f){if(isNaN(l)||isNaN(f))throw new Error(`Invalid LngLat object: (${l}, ${f})`);if(this.lng=+l,this.lat=+f,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ap($(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){let f=Math.PI/180,m=this.lat*f,_=l.lat*f,E=Math.sin(m)*Math.sin(_)+Math.cos(m)*Math.cos(_)*Math.cos((l.lng-this.lng)*f);return kk*Math.acos(Math.min(E,1))}static convert(l){if(l instanceof ap)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new ap(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new ap(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let iX=2*Math.PI*kk;function oX(u){return iX*Math.cos(u*Math.PI/180)}function aX(u){return(180+u)/360}function sX(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function lX(u,l){return u/oX(l)}function qk(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}class mw{constructor(l,f,m=0){this.x=+l,this.y=+f,this.z=+m}static fromLngLat(l,f=0){let m=ap.convert(l);return new mw(aX(m.lng),sX(m.lat),lX(f,m.lat))}toLngLat(){return new ap(360*this.x-180,qk(this.y))}toAltitude(){return this.z*oX(qk(this.y))}meterInMercatorCoordinateUnits(){return 1/iX*(l=qk(this.y),1/Math.cos(l*Math.PI/180));var l}}function uX(u,l,f){var m=2*Math.PI*6378137/256/Math.pow(2,f);return[u*m-2*Math.PI*6378137/2,l*m-2*Math.PI*6378137/2]}class jk{constructor(l,f,m){if(!function(_,E,I){return!(_<0||_>25||I<0||I>=Math.pow(2,_)||E<0||E>=Math.pow(2,_))}(l,f,m))throw new Error(`x=${f}, y=${m}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=f,this.y=m,this.key=vw(0,l,l,f,m)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,f,m){let _=(I=this.y,C=this.z,P=uX(256*(E=this.x),256*(I=Math.pow(2,C)-I-1),C),q=uX(256*(E+1),256*(I+1),C),P[0]+","+P[1]+","+q[0]+","+q[1]);var E,I,C,P,q;let F=function(U,Z,Y){let Q,re="";for(let fe=U;fe>0;fe--)Q=1<<fe-1,re+=(Z&Q?1:0)+(Y&Q?2:0);return re}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,f>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,_)}isChildOf(l){let f=this.z-l.z;return f>0&&l.x===this.x>>f&&l.y===this.y>>f}getTilePoint(l){let f=Math.pow(2,this.z);return new d((l.x*f-this.x)*qi,(l.y*f-this.y)*qi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class cX{constructor(l,f){this.wrap=l,this.canonical=f,this.key=vw(l,f.z,f.z,f.x,f.y)}}class el{constructor(l,f,m,_,E){if(l<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${m}`);this.overscaledZ=l,this.wrap=f,this.canonical=new jk(m,+_,+E),this.key=vw(f,l,m,_,E)}clone(){return new el(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);let f=this.canonical.z-l;return l>this.canonical.z?new el(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new el(l,this.wrap,l,this.canonical.x>>f,this.canonical.y>>f)}calculateScaledKey(l,f){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);let m=this.canonical.z-l;return l>this.canonical.z?vw(this.wrap*+f,l,this.canonical.z,this.canonical.x,this.canonical.y):vw(this.wrap*+f,l,l,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(l){if(l.wrap!==this.wrap)return!1;let f=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>f&&l.canonical.y===this.canonical.y>>f}children(l){if(this.overscaledZ>=l)return[new el(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let f=this.canonical.z+1,m=2*this.canonical.x,_=2*this.canonical.y;return[new el(f,this.wrap,f,m,_),new el(f,this.wrap,f,m+1,_),new el(f,this.wrap,f,m,_+1),new el(f,this.wrap,f,m+1,_+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new el(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new el(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new cX(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new mw(l.x-this.wrap,l.y))}}function vw(u,l,f,m,_){(u*=2)<0&&(u=-1*u-1);let E=1<<f;return(E*E*u+E*_+m).toString(36)+f.toString(36)+l.toString(36)}kt("CanonicalTileID",jk),kt("OverscaledTileID",el,{omit:["posMatrix"]});class fX{constructor(l,f,m,_=1,E=1,I=1,C=0){if(this.uid=l,f.height!==f.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void Re(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=f.height;let P=this.dim=f.height-2;switch(this.data=new Uint32Array(f.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=E,this.blueFactor=I,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4;}for(let q=0;q<P;q++)this.data[this._idx(-1,q)]=this.data[this._idx(0,q)],this.data[this._idx(P,q)]=this.data[this._idx(P-1,q)],this.data[this._idx(q,-1)]=this.data[this._idx(q,0)],this.data[this._idx(q,P)]=this.data[this._idx(q,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let q=0;q<P;q++)for(let F=0;F<P;F++){let U=this.get(q,F);U>this.max&&(this.max=U),U<this.min&&(this.min=U)}}get(l,f){let m=new Uint8Array(this.data.buffer),_=4*this._idx(l,f);return this.unpack(m[_],m[_+1],m[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,f){if(l<-1||l>=this.dim+1||f<-1||f>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(f+1)*this.stride+(l+1)}unpack(l,f,m){return l*this.redFactor+f*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new Qs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,f,m){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let _=f*this.dim,E=f*this.dim+this.dim,I=m*this.dim,C=m*this.dim+this.dim;switch(f){case-1:_=E-1;break;case 1:E=_+1;}switch(m){case-1:I=C-1;break;case 1:C=I+1;}let P=-f*this.dim,q=-m*this.dim;for(let F=I;F<C;F++)for(let U=_;U<E;U++)this.data[this._idx(U,F)]=l.data[this._idx(U+P,F+q)]}}kt("DEMData",fX);class hX{constructor(l){this._stringToNumber={},this._numberToString=[];for(let f=0;f<l.length;f++){let m=l[f];this._stringToNumber[m]=f,this._numberToString[f]=m}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class pX{constructor(l,f,m,_,E){this.type="Feature",this._vectorTileFeature=l,l._z=f,l._x=m,l._y=_,this.properties=l.properties,this.id=E}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){let l={geometry:this.geometry};for(let f in this)f!=="_geometry"&&f!=="_vectorTileFeature"&&(l[f]=this[f]);return l}}class dX{constructor(l,f){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new Hh(qi,16,0),this.grid3D=new Hh(qi,16,0),this.featureIndexArray=new zo,this.promoteId=f}insert(l,f,m,_,E,I){let C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,_,E);let P=I?this.grid3D:this.grid;for(let q=0;q<f.length;q++){let F=f[q],U=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<F.length;Z++){let Y=F[Z];U[0]=Math.min(U[0],Y.x),U[1]=Math.min(U[1],Y.y),U[2]=Math.max(U[2],Y.x),U[3]=Math.max(U[3],Y.y)}U[0]<qi&&U[1]<qi&&U[2]>=0&&U[3]>=0&&P.insert(C,U[0],U[1],U[2],U[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new np.VectorTile(new Tk(this.rawTileData)).layers,this.sourceLayerCoder=new hX(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,f,m,_){this.loadVTLayers();let E=l.params||{},I=qi/l.tileSize/l.scale,C=Nx(E.filter),P=l.queryGeometry,q=l.queryPadding*I,F=vX(P),U=this.grid.query(F.minX-q,F.minY-q,F.maxX+q,F.maxY+q),Z=vX(l.cameraQueryGeometry),Y=this.grid3D.query(Z.minX-q,Z.minY-q,Z.maxX+q,Z.maxY+q,(fe,de,qe,we)=>function(Ne,He,ot,Mt,sr){for(let xt of Ne)if(He<=xt.x&&ot<=xt.y&&Mt>=xt.x&&sr>=xt.y)return!0;let At=[new d(He,ot),new d(He,sr),new d(Mt,sr),new d(Mt,ot)];if(Ne.length>2){for(let xt of At)if(Cg(Ne,xt))return!0}for(let xt=0;xt<Ne.length-1;xt++)if(wUe(Ne[xt],Ne[xt+1],At))return!0;return!1}(l.cameraQueryGeometry,fe-q,de-q,qe+q,we+q));for(let fe of Y)U.push(fe);U.sort(U3e);let Q={},re;for(let fe=0;fe<U.length;fe++){let de=U[fe];if(de===re)continue;re=de;let qe=this.featureIndexArray.get(de),we=null;this.loadMatchingFeature(Q,qe.bucketIndex,qe.sourceLayerIndex,qe.featureIndex,C,E.layers,E.availableImages,f,m,_,(Ne,He,ot)=>(we||(we=um(Ne)),He.queryIntersectsFeature(P,Ne,ot,we,this.z,l.transform,I,l.pixelPosMatrix)))}return Q}loadMatchingFeature(l,f,m,_,E,I,C,P,q,F,U){let Z=this.bucketLayerIDs[f];if(I&&!function(fe,de){for(let qe=0;qe<fe.length;qe++)if(de.indexOf(fe[qe])>=0)return!0;return!1}(I,Z))return;let Y=this.sourceLayerCoder.decode(m),Q=this.vtLayers[Y].feature(_);if(E.needGeometry){let fe=cm(Q,!0);if(!E.filter(new Vn(this.tileID.overscaledZ),fe,this.tileID.canonical))return}else if(!E.filter(new Vn(this.tileID.overscaledZ),Q))return;let re=this.getId(Q,Y);for(let fe=0;fe<Z.length;fe++){let de=Z[fe];if(I&&I.indexOf(de)<0)continue;let qe=P[de];if(!qe)continue;let we={};re&&F&&(we=F.getState(qe.sourceLayer||"_geojsonTileLayer",re));let Ne=ee({},q[de]);Ne.paint=mX(Ne.paint,qe.paint,Q,we,C),Ne.layout=mX(Ne.layout,qe.layout,Q,we,C);let He=!U||U(Q,qe,we);if(!He)continue;let ot=new pX(Q,this.z,this.x,this.y,re);ot.layer=Ne;let Mt=l[de];Mt===void 0&&(Mt=l[de]=[]),Mt.push({featureIndex:_,feature:ot,intersectionZ:He})}}lookupSymbolFeatures(l,f,m,_,E,I,C,P){let q={};this.loadVTLayers();let F=Nx(E);for(let U of l)this.loadMatchingFeature(q,m,_,U,F,I,C,P,f);return q}hasLayer(l){for(let f of this.bucketLayerIDs)for(let m of f)if(l===m)return!0;return!1}getId(l,f){let m=l.id;return this.promoteId&&(m=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[f]],typeof m=="boolean"&&(m=Number(m))),m}}function mX(u,l,f,m,_){return ie(u,(E,I)=>{let C=l instanceof om?l.get(I):null;return C&&C.evaluate?C.evaluate(f,m,_):C})}function vX(u){let l=1/0,f=1/0,m=-1/0,_=-1/0;for(let E of u)l=Math.min(l,E.x),f=Math.min(f,E.y),m=Math.max(m,E.x),_=Math.max(_,E.y);return{minX:l,minY:f,maxX:m,maxY:_}}function U3e(u,l){return l-u}function gX(u,l,f,m,_){let E=[];for(let I=0;I<u.length;I++){let C=u[I],P;for(let q=0;q<C.length-1;q++){let F=C[q],U=C[q+1];F.x<l&&U.x<l||(F.x<l?F=new d(l,F.y+(l-F.x)/(U.x-F.x)*(U.y-F.y))._round():U.x<l&&(U=new d(l,F.y+(l-F.x)/(U.x-F.x)*(U.y-F.y))._round()),F.y<f&&U.y<f||(F.y<f?F=new d(F.x+(f-F.y)/(U.y-F.y)*(U.x-F.x),f)._round():U.y<f&&(U=new d(F.x+(f-F.y)/(U.y-F.y)*(U.x-F.x),f)._round()),F.x>=m&&U.x>=m||(F.x>=m?F=new d(m,F.y+(m-F.x)/(U.x-F.x)*(U.y-F.y))._round():U.x>=m&&(U=new d(m,F.y+(m-F.x)/(U.x-F.x)*(U.y-F.y))._round()),F.y>=_&&U.y>=_||(F.y>=_?F=new d(F.x+(_-F.y)/(U.y-F.y)*(U.x-F.x),_)._round():U.y>=_&&(U=new d(F.x+(_-F.y)/(U.y-F.y)*(U.x-F.x),_)._round()),P&&F.equals(P[P.length-1])||(P=[F],E.push(P)),P.push(U)))))}}return E}kt("FeatureIndex",dX,{omit:["rawTileData","sourceLayerCoder"]});class sp extends d{constructor(l,f,m,_){super(l,f),this.angle=m,_!==void 0&&(this.segment=_)}clone(){return new sp(this.x,this.y,this.angle,this.segment)}}function yX(u,l,f,m,_){if(l.segment===void 0||f===0)return!0;let E=l,I=l.segment+1,C=0;for(;C>-f/2;){if(I--,I<0)return!1;C-=u[I].dist(E),E=u[I]}C+=u[I].dist(u[I+1]),I++;let P=[],q=0;for(;C<f/2;){let F=u[I],U=u[I+1];if(!U)return!1;let Z=u[I-1].angleTo(F)-F.angleTo(U);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:C,angleDelta:Z}),q+=Z;C-P[0].distance>m;)q-=P.shift().angleDelta;if(q>_)return!1;I++,C+=F.dist(U)}return!0}function _X(u){let l=0;for(let f=0;f<u.length-1;f++)l+=u[f].dist(u[f+1]);return l}function xX(u,l,f){return u?.6*l*f:0}function wX(u,l){return Math.max(u?u.right-u.left:0,l?l.right-l.left:0)}function V3e(u,l,f,m,_,E){let I=xX(f,_,E),C=wX(f,m)*E,P=0,q=_X(u)/2;for(let F=0;F<u.length-1;F++){let U=u[F],Z=u[F+1],Y=U.dist(Z);if(P+Y>q){let Q=(q-P)/Y,re=aa.number(U.x,Z.x,Q),fe=aa.number(U.y,Z.y,Q),de=new sp(re,fe,Z.angleTo(U),F);return de._round(),!I||yX(u,de,C,I,l)?de:void 0}P+=Y}}function G3e(u,l,f,m,_,E,I,C,P){let q=xX(m,E,I),F=wX(m,_),U=F*I,Z=u[0].x===0||u[0].x===P||u[0].y===0||u[0].y===P;return l-U<l/4&&(l=U+l/4),bX(u,Z?l/2*C%l:(F/2+2*E)*I*C%l,l,q,f,U,Z,!1,P)}function bX(u,l,f,m,_,E,I,C,P){let q=E/2,F=_X(u),U=0,Z=l-f,Y=[];for(let Q=0;Q<u.length-1;Q++){let re=u[Q],fe=u[Q+1],de=re.dist(fe),qe=fe.angleTo(re);for(;Z+f<U+de;){Z+=f;let we=(Z-U)/de,Ne=aa.number(re.x,fe.x,we),He=aa.number(re.y,fe.y,we);if(Ne>=0&&Ne<P&&He>=0&&He<P&&Z-q>=0&&Z+q<=F){let ot=new sp(Ne,He,qe,Q);ot._round(),m&&!yX(u,ot,E,m,_)||Y.push(ot)}}U+=de}return C||Y.length||I||(Y=bX(u,U/2,f,m,_,E,I,!0,P)),Y}kt("Anchor",sp);let kg=Ua;function SX(u,l,f,m){let _=[],E=u.image,I=E.pixelRatio,C=E.paddedRect.w-2*kg,P=E.paddedRect.h-2*kg,q={x1:u.left,y1:u.top,x2:u.right,y2:u.bottom},F=E.stretchX||[[0,C]],U=E.stretchY||[[0,P]],Z=(Xe,Jt)=>Xe+Jt[1]-Jt[0],Y=F.reduce(Z,0),Q=U.reduce(Z,0),re=C-Y,fe=P-Q,de=0,qe=Y,we=0,Ne=Q,He=0,ot=re,Mt=0,sr=fe;if(E.content&&m){let Xe=E.content,Jt=Xe[2]-Xe[0],$t=Xe[3]-Xe[1];(E.textFitWidth||E.textFitHeight)&&(q=KK(u)),de=NT(F,0,Xe[0]),we=NT(U,0,Xe[1]),qe=NT(F,Xe[0],Xe[2]),Ne=NT(U,Xe[1],Xe[3]),He=Xe[0]-de,Mt=Xe[1]-we,ot=Jt-qe,sr=$t-Ne}let At=q.x1,xt=q.y1,Zt=q.x2-At,qt=q.y2-xt,Nt=(Xe,Jt,$t,mr)=>{let Mn=kT(Xe.stretch-de,qe,Zt,At),bn=qT(Xe.fixed-He,ot,Xe.stretch,Y),Qi=kT(Jt.stretch-we,Ne,qt,xt),Al=qT(Jt.fixed-Mt,sr,Jt.stretch,Q),Co=kT($t.stretch-de,qe,Zt,At),eo=qT($t.fixed-He,ot,$t.stretch,Y),ca=kT(mr.stretch-we,Ne,qt,xt),fa=qT(mr.fixed-Mt,sr,mr.stretch,Q),ha=new d(Mn,Qi),gi=new d(Co,Qi),to=new d(Co,ca),Uo=new d(Mn,ca),Mo=new d(bn/I,Al/I),pa=new d(eo/I,fa/I),Ro=l*Math.PI/180;if(Ro){let rn=Math.sin(Ro),Nn=Math.cos(Ro),Wn=[Nn,-rn,rn,Nn];ha._matMult(Wn),gi._matMult(Wn),Uo._matMult(Wn),to._matMult(Wn)}let tl=Xe.stretch+Xe.fixed,Va=Jt.stretch+Jt.fixed;return{tl:ha,tr:gi,bl:Uo,br:to,tex:{x:E.paddedRect.x+kg+tl,y:E.paddedRect.y+kg+Va,w:$t.stretch+$t.fixed-tl,h:mr.stretch+mr.fixed-Va},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Mo,pixelOffsetBR:pa,minFontScaleX:ot/I/Zt,minFontScaleY:sr/I/qt,isSDF:f}};if(m&&(E.stretchX||E.stretchY)){let Xe=EX(F,re,Y),Jt=EX(U,fe,Q);for(let $t=0;$t<Xe.length-1;$t++){let mr=Xe[$t],Mn=Xe[$t+1];for(let bn=0;bn<Jt.length-1;bn++)_.push(Nt(mr,Jt[bn],Mn,Jt[bn+1]))}}else _.push(Nt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:P+1}));return _}function NT(u,l,f){let m=0;for(let _ of u)m+=Math.max(l,Math.min(f,_[1]))-Math.max(l,Math.min(f,_[0]));return m}function EX(u,l,f){let m=[{fixed:-kg,stretch:0}];for(let[_,E]of u){let I=m[m.length-1];m.push({fixed:_-I.stretch,stretch:I.stretch}),m.push({fixed:_-I.stretch,stretch:I.stretch+(E-_)})}return m.push({fixed:l+kg,stretch:f}),m}function kT(u,l,f,m){return u/l*f+m}function qT(u,l,f,m){return u-l*f/m}class jT{constructor(l,f,m,_,E,I,C,P,q,F){var U;if(this.boxStartIndex=l.length,q){let Z=I.top,Y=I.bottom,Q=I.collisionPadding;Q&&(Z-=Q[1],Y+=Q[3]);let re=Y-Z;re>0&&(re=Math.max(10,re),this.circleDiameter=re)}else{let Z=!((U=I.image)===null||U===void 0)&&U.content&&(I.image.textFitWidth||I.image.textFitHeight)?KK(I):{x1:I.left,y1:I.top,x2:I.right,y2:I.bottom};Z.y1=Z.y1*C-P[0],Z.y2=Z.y2*C+P[2],Z.x1=Z.x1*C-P[3],Z.x2=Z.x2*C+P[1];let Y=I.collisionPadding;if(Y&&(Z.x1-=Y[0]*C,Z.y1-=Y[1]*C,Z.x2+=Y[2]*C,Z.y2+=Y[3]*C),F){let Q=new d(Z.x1,Z.y1),re=new d(Z.x2,Z.y1),fe=new d(Z.x1,Z.y2),de=new d(Z.x2,Z.y2),qe=F*Math.PI/180;Q._rotate(qe),re._rotate(qe),fe._rotate(qe),de._rotate(qe),Z.x1=Math.min(Q.x,re.x,fe.x,de.x),Z.x2=Math.max(Q.x,re.x,fe.x,de.x),Z.y1=Math.min(Q.y,re.y,fe.y,de.y),Z.y2=Math.max(Q.y,re.y,fe.y,de.y)}l.emplaceBack(f.x,f.y,Z.x1,Z.y1,Z.x2,Z.y2,m,_,E)}this.boxEndIndex=l.length}}class $3e{constructor(l=[],f=(m,_)=>m<_?-1:m>_?1:0){if(this.data=l,this.length=this.data.length,this.compare=f,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;let l=this.data[0],f=this.data.pop();return--this.length>0&&(this.data[0]=f,this._down(0)),l}peek(){return this.data[0]}_up(l){let{data:f,compare:m}=this,_=f[l];for(;l>0;){let E=l-1>>1,I=f[E];if(m(_,I)>=0)break;f[l]=I,l=E}f[l]=_}_down(l){let{data:f,compare:m}=this,_=this.length>>1,E=f[l];for(;l<_;){let I=1+(l<<1),C=I+1;if(C<this.length&&m(f[C],f[I])<0&&(I=C),m(f[I],E)>=0)break;f[l]=f[I],l=I}f[l]=E}}function H3e(u,l=1,f=!1){let m=1/0,_=1/0,E=-1/0,I=-1/0,C=u[0];for(let Y=0;Y<C.length;Y++){let Q=C[Y];(!Y||Q.x<m)&&(m=Q.x),(!Y||Q.y<_)&&(_=Q.y),(!Y||Q.x>E)&&(E=Q.x),(!Y||Q.y>I)&&(I=Q.y)}let P=Math.min(E-m,I-_),q=P/2,F=new $3e([],W3e);if(P===0)return new d(m,_);for(let Y=m;Y<E;Y+=P)for(let Q=_;Q<I;Q+=P)F.push(new qg(Y+q,Q+q,q,u));let U=function(Y){let Q=0,re=0,fe=0,de=Y[0];for(let qe=0,we=de.length,Ne=we-1;qe<we;Ne=qe++){let He=de[qe],ot=de[Ne],Mt=He.x*ot.y-ot.x*He.y;re+=(He.x+ot.x)*Mt,fe+=(He.y+ot.y)*Mt,Q+=3*Mt}return new qg(re/Q,fe/Q,0,Y)}(u),Z=F.length;for(;F.length;){let Y=F.pop();(Y.d>U.d||!U.d)&&(U=Y,f&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,Z)),Y.max-U.d<=l||(q=Y.h/2,F.push(new qg(Y.p.x-q,Y.p.y-q,q,u)),F.push(new qg(Y.p.x+q,Y.p.y-q,q,u)),F.push(new qg(Y.p.x-q,Y.p.y+q,q,u)),F.push(new qg(Y.p.x+q,Y.p.y+q,q,u)),Z+=4)}return f&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${U.d}`)),U.p}function W3e(u,l){return l.max-u.max}function qg(u,l,f,m){this.p=new d(u,l),this.h=f,this.d=function(_,E){let I=!1,C=1/0;for(let P=0;P<E.length;P++){let q=E[P];for(let F=0,U=q.length,Z=U-1;F<U;Z=F++){let Y=q[F],Q=q[Z];Y.y>_.y!=Q.y>_.y&&_.x<(Q.x-Y.x)*(_.y-Y.y)/(Q.y-Y.y)+Y.x&&(I=!I),C=Math.min(C,sK(_,Y,Q))}}return(I?1:-1)*Math.sqrt(C)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var Ao;i.aq=void 0,(Ao=i.aq||(i.aq={}))[Ao.center=1]="center",Ao[Ao.left=2]="left",Ao[Ao.right=3]="right",Ao[Ao.top=4]="top",Ao[Ao.bottom=5]="bottom",Ao[Ao["top-left"]=6]="top-left",Ao[Ao["top-right"]=7]="top-right",Ao[Ao["bottom-left"]=8]="bottom-left",Ao[Ao["bottom-right"]=9]="bottom-right";let lp=7,Fk=Number.POSITIVE_INFINITY;function IX(u,l){return l[1]!==Fk?function(f,m,_){let E=0,I=0;switch(m=Math.abs(m),_=Math.abs(_),f){case"top-right":case"top-left":case"top":I=_-lp;break;case"bottom-right":case"bottom-left":case"bottom":I=-_+lp;}switch(f){case"top-right":case"bottom-right":case"right":E=-m;break;case"top-left":case"bottom-left":case"left":E=m;}return[E,I]}(u,l[0],l[1]):function(f,m){let _=0,E=0;m<0&&(m=0);let I=m/Math.SQRT2;switch(f){case"top-right":case"top-left":E=I-lp;break;case"bottom-right":case"bottom-left":E=-I+lp;break;case"bottom":E=-m+lp;break;case"top":E=m-lp;}switch(f){case"top-right":case"bottom-right":_=-I;break;case"top-left":case"bottom-left":_=I;break;case"left":_=m;break;case"right":_=-m;}return[_,E]}(u,l[0])}function TX(u,l,f){var m;let _=u.layout,E=(m=_.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(l,{},f);if(E){let C=E.values,P=[];for(let q=0;q<C.length;q+=2){let F=P[q]=C[q],U=C[q+1].map(Z=>Z*Vi);F.startsWith("top")?U[1]-=lp:F.startsWith("bottom")&&(U[1]+=lp),P[q+1]=U}return new ss(P)}let I=_.get("text-variable-anchor");if(I){let C;C=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(l,{},f)*Vi,Fk]:_.get("text-offset").evaluate(l,{},f).map(q=>q*Vi);let P=[];for(let q of I)P.push(q,IX(q,C));return new ss(P)}return null}function zk(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left";}return"center"}function Z3e(u,l,f,m,_,E,I,C,P,q,F){let U=E.textMaxSize.evaluate(l,{});U===void 0&&(U=I);let Z=u.layers[0].layout,Y=Z.get("icon-offset").evaluate(l,{},F),Q=CX(f.horizontal),re=I/24,fe=u.tilePixelRatio*re,de=u.tilePixelRatio*U/24,qe=u.tilePixelRatio*C,we=u.tilePixelRatio*Z.get("symbol-spacing"),Ne=Z.get("text-padding")*u.tilePixelRatio,He=function(Xe,Jt,$t,mr=1){let Mn=Xe.get("icon-padding").evaluate(Jt,{},$t),bn=Mn&&Mn.values;return[bn[0]*mr,bn[1]*mr,bn[2]*mr,bn[3]*mr]}(Z,l,F,u.tilePixelRatio),ot=Z.get("text-max-angle")/180*Math.PI,Mt=Z.get("text-rotation-alignment")!=="viewport"&&Z.get("symbol-placement")!=="point",sr=Z.get("icon-rotation-alignment")==="map"&&Z.get("symbol-placement")!=="point",At=Z.get("symbol-placement"),xt=we/2,Zt=Z.get("icon-text-fit"),qt;m&&Zt!=="none"&&(u.allowVerticalPlacement&&f.vertical&&(qt=XK(m,f.vertical,Zt,Z.get("icon-text-fit-padding"),Y,re)),Q&&(m=XK(m,Q,Zt,Z.get("icon-text-fit-padding"),Y,re)));let Nt=(Xe,Jt)=>{Jt.x<0||Jt.x>=qi||Jt.y<0||Jt.y>=qi||function($t,mr,Mn,bn,Qi,Al,Co,eo,ca,fa,ha,gi,to,Uo,Mo,pa,Ro,tl,Va,rn,Nn,Wn,ds,si,jg){let uc=$t.addToLineVertexArray(mr,Mn),cc,Cl,rl,co,_f=0,_w=0,OX=0,LX=0,Zk=-1,Yk=-1,xf={},DX=Eg("");if($t.allowVerticalPlacement&&bn.vertical){let Vo=eo.layout.get("text-rotate").evaluate(Nn,{},si)+90;rl=new jT(ca,mr,fa,ha,gi,bn.vertical,to,Uo,Mo,Vo),Co&&(co=new jT(ca,mr,fa,ha,gi,Co,Ro,tl,Mo,Vo))}if(Qi){let Vo=eo.layout.get("icon-rotate").evaluate(Nn,{}),nl=eo.layout.get("icon-text-fit")!=="none",hm=SX(Qi,Vo,ds,nl),Mu=Co?SX(Co,Vo,ds,nl):void 0;Cl=new jT(ca,mr,fa,ha,gi,Qi,Ro,tl,!1,Vo),_f=4*hm.length;let pm=$t.iconSizeData,fc=null;pm.kind==="source"?(fc=[lc*eo.layout.get("icon-size").evaluate(Nn,{})],fc[0]>op&&Re(`${$t.layerIds[0]}: Value for "icon-size" is >= ${dw}. Reduce your "icon-size".`)):pm.kind==="composite"&&(fc=[lc*Wn.compositeIconSizes[0].evaluate(Nn,{},si),lc*Wn.compositeIconSizes[1].evaluate(Nn,{},si)],(fc[0]>op||fc[1]>op)&&Re(`${$t.layerIds[0]}: Value for "icon-size" is >= ${dw}. Reduce your "icon-size".`)),$t.addSymbols($t.icon,hm,fc,rn,Va,Nn,i.ah.none,mr,uc.lineStartIndex,uc.lineLength,-1,si),Zk=$t.icon.placedSymbolArray.length-1,Mu&&(_w=4*Mu.length,$t.addSymbols($t.icon,Mu,fc,rn,Va,Nn,i.ah.vertical,mr,uc.lineStartIndex,uc.lineLength,-1,si),Yk=$t.icon.placedSymbolArray.length-1)}let NX=Object.keys(bn.horizontal);for(let Vo of NX){let nl=bn.horizontal[Vo];if(!cc){DX=Eg(nl.text);let Mu=eo.layout.get("text-rotate").evaluate(Nn,{},si);cc=new jT(ca,mr,fa,ha,gi,nl,to,Uo,Mo,Mu)}let hm=nl.positionedLines.length===1;if(OX+=AX($t,mr,nl,Al,eo,Mo,Nn,pa,uc,bn.vertical?i.ah.horizontal:i.ah.horizontalOnly,hm?NX:[Vo],xf,Zk,Wn,si),hm)break}bn.vertical&&(LX+=AX($t,mr,bn.vertical,Al,eo,Mo,Nn,pa,uc,i.ah.vertical,["vertical"],xf,Yk,Wn,si));let X3e=cc?cc.boxStartIndex:$t.collisionBoxArray.length,J3e=cc?cc.boxEndIndex:$t.collisionBoxArray.length,Q3e=rl?rl.boxStartIndex:$t.collisionBoxArray.length,eVe=rl?rl.boxEndIndex:$t.collisionBoxArray.length,tVe=Cl?Cl.boxStartIndex:$t.collisionBoxArray.length,rVe=Cl?Cl.boxEndIndex:$t.collisionBoxArray.length,nVe=co?co.boxStartIndex:$t.collisionBoxArray.length,iVe=co?co.boxEndIndex:$t.collisionBoxArray.length,Cu=-1,zT=(Vo,nl)=>Vo&&Vo.circleDiameter?Math.max(Vo.circleDiameter,nl):nl;Cu=zT(cc,Cu),Cu=zT(rl,Cu),Cu=zT(Cl,Cu),Cu=zT(co,Cu);let kX=Cu>-1?1:0;kX&&(Cu*=jg/Vi),$t.glyphOffsetArray.length>=Ng.MAX_GLYPHS&&Re("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Nn.sortKey!==void 0&&$t.addToSortKeyRanges($t.symbolInstances.length,Nn.sortKey);let oVe=TX(eo,Nn,si),[aVe,sVe]=function(Vo,nl){let hm=Vo.length,Mu=nl==null?void 0:nl.values;if((Mu==null?void 0:Mu.length)>0)for(let pm=0;pm<Mu.length;pm+=2){let fc=Mu[pm+1];Vo.emplaceBack(i.aq[Mu[pm]],fc[0],fc[1])}return[hm,Vo.length]}($t.textAnchorOffsets,oVe);$t.symbolInstances.emplaceBack(mr.x,mr.y,xf.right>=0?xf.right:-1,xf.center>=0?xf.center:-1,xf.left>=0?xf.left:-1,xf.vertical||-1,Zk,Yk,DX,X3e,J3e,Q3e,eVe,tVe,rVe,nVe,iVe,fa,OX,LX,_f,_w,kX,0,to,Cu,aVe,sVe)}(u,Jt,Xe,f,m,_,qt,u.layers[0],u.collisionBoxArray,l.index,l.sourceLayerIndex,u.index,fe,[Ne,Ne,Ne,Ne],Mt,P,qe,He,sr,Y,l,E,q,F,I)};if(At==="line")for(let Xe of gX(l.geometry,0,0,qi,qi)){let Jt=G3e(Xe,we,ot,f.vertical||Q,m,24,de,u.overscaling,qi);for(let $t of Jt)Q&&Y3e(u,Q.text,xt,$t)||Nt(Xe,$t)}else if(At==="line-center"){for(let Xe of l.geometry)if(Xe.length>1){let Jt=V3e(Xe,ot,f.vertical||Q,m,24,de);Jt&&Nt(Xe,Jt)}}else if(l.type==="Polygon")for(let Xe of eg(l.geometry,0)){let Jt=H3e(Xe,16);Nt(Xe[0],new sp(Jt.x,Jt.y,0))}else if(l.type==="LineString")for(let Xe of l.geometry)Nt(Xe,new sp(Xe[0].x,Xe[0].y,0));else if(l.type==="Point")for(let Xe of l.geometry)for(let Jt of Xe)Nt([Jt],new sp(Jt.x,Jt.y,0))}function AX(u,l,f,m,_,E,I,C,P,q,F,U,Z,Y,Q){let re=function(qe,we,Ne,He,ot,Mt,sr,At){let xt=He.layout.get("text-rotate").evaluate(Mt,{})*Math.PI/180,Zt=[];for(let qt of we.positionedLines)for(let Nt of qt.positionedGlyphs){if(!Nt.rect)continue;let Xe=Nt.rect||{},Jt=VK+1,$t=!0,mr=1,Mn=0,bn=(ot||At)&&Nt.vertical,Qi=Nt.metrics.advance*Nt.scale/2;if(At&&we.verticalizable&&(Mn=qt.lineOffset/2-(Nt.imageName?-(Vi-Nt.metrics.width*Nt.scale)/2:(Nt.scale-1)*Vi)),Nt.imageName){let rn=sr[Nt.imageName];$t=rn.sdf,mr=rn.pixelRatio,Jt=Ua/mr}let Al=ot?[Nt.x+Qi,Nt.y]:[0,0],Co=ot?[0,0]:[Nt.x+Qi+Ne[0],Nt.y+Ne[1]-Mn],eo=[0,0];bn&&(eo=Co,Co=[0,0]);let ca=Nt.metrics.isDoubleResolution?2:1,fa=(Nt.metrics.left-Jt)*Nt.scale-Qi+Co[0],ha=(-Nt.metrics.top-Jt)*Nt.scale+Co[1],gi=fa+Xe.w/ca*Nt.scale/mr,to=ha+Xe.h/ca*Nt.scale/mr,Uo=new d(fa,ha),Mo=new d(gi,ha),pa=new d(fa,to),Ro=new d(gi,to);if(bn){let rn=new d(-Qi,Qi-hw),Nn=-Math.PI/2,Wn=Vi/2-Qi,ds=new d(5-hw-Wn,-(Nt.imageName?Wn:0)),si=new d(...eo);Uo._rotateAround(Nn,rn)._add(ds)._add(si),Mo._rotateAround(Nn,rn)._add(ds)._add(si),pa._rotateAround(Nn,rn)._add(ds)._add(si),Ro._rotateAround(Nn,rn)._add(ds)._add(si)}if(xt){let rn=Math.sin(xt),Nn=Math.cos(xt),Wn=[Nn,-rn,rn,Nn];Uo._matMult(Wn),Mo._matMult(Wn),pa._matMult(Wn),Ro._matMult(Wn)}let tl=new d(0,0),Va=new d(0,0);Zt.push({tl:Uo,tr:Mo,bl:pa,br:Ro,tex:Xe,writingMode:we.writingMode,glyphOffset:Al,sectionIndex:Nt.sectionIndex,isSDF:$t,pixelOffsetTL:tl,pixelOffsetBR:Va,minFontScaleX:0,minFontScaleY:0})}return Zt}(0,f,C,_,E,I,m,u.allowVerticalPlacement),fe=u.textSizeData,de=null;fe.kind==="source"?(de=[lc*_.layout.get("text-size").evaluate(I,{})],de[0]>op&&Re(`${u.layerIds[0]}: Value for "text-size" is >= ${dw}. Reduce your "text-size".`)):fe.kind==="composite"&&(de=[lc*Y.compositeTextSizes[0].evaluate(I,{},Q),lc*Y.compositeTextSizes[1].evaluate(I,{},Q)],(de[0]>op||de[1]>op)&&Re(`${u.layerIds[0]}: Value for "text-size" is >= ${dw}. Reduce your "text-size".`)),u.addSymbols(u.text,re,de,C,E,I,q,l,P.lineStartIndex,P.lineLength,Z,Q);for(let qe of F)U[qe]=u.text.placedSymbolArray.length-1;return 4*re.length}function CX(u){for(let l in u)return u[l];return null}function Y3e(u,l,f,m){let _=u.compareText;if(l in _){let E=_[l];for(let I=E.length-1;I>=0;I--)if(m.dist(E[I])<f)return!0}else _[l]=[];return _[l].push(m),!1}let MX=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Bk{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[f,m]=new Uint8Array(l,0,2);if(f!==219)throw new Error("Data does not appear to be in a KDBush format.");let _=m>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);let E=MX[15&m];if(!E)throw new Error("Unrecognized array type.");let[I]=new Uint16Array(l,2,1),[C]=new Uint32Array(l,4,1);return new Bk(C,I,E,l)}constructor(l,f=64,m=Float64Array,_){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+f,2),65535),this.ArrayType=m,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;let E=MX.indexOf(this.ArrayType),I=2*l*this.ArrayType.BYTES_PER_ELEMENT,C=l*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-C%8)%8;if(E<0)throw new Error(`Unexpected typed array class: ${m}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+C+P,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+I+C+P),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+C+P,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+E]),new Uint16Array(this.data,2,1)[0]=f,new Uint32Array(this.data,4,1)[0]=l)}add(l,f){let m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=l,this.coords[this._pos++]=f,m}finish(){let l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return Uk(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,f,m,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:E,coords:I,nodeSize:C}=this,P=[0,E.length-1,0],q=[];for(;P.length;){let F=P.pop()||0,U=P.pop()||0,Z=P.pop()||0;if(U-Z<=C){for(let fe=Z;fe<=U;fe++){let de=I[2*fe],qe=I[2*fe+1];de>=l&&de<=m&&qe>=f&&qe<=_&&q.push(E[fe])}continue}let Y=Z+U>>1,Q=I[2*Y],re=I[2*Y+1];Q>=l&&Q<=m&&re>=f&&re<=_&&q.push(E[Y]),(F===0?l<=Q:f<=re)&&(P.push(Z),P.push(Y-1),P.push(1-F)),(F===0?m>=Q:_>=re)&&(P.push(Y+1),P.push(U),P.push(1-F))}return q}within(l,f,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:_,coords:E,nodeSize:I}=this,C=[0,_.length-1,0],P=[],q=m*m;for(;C.length;){let F=C.pop()||0,U=C.pop()||0,Z=C.pop()||0;if(U-Z<=I){for(let fe=Z;fe<=U;fe++)PX(E[2*fe],E[2*fe+1],l,f)<=q&&P.push(_[fe]);continue}let Y=Z+U>>1,Q=E[2*Y],re=E[2*Y+1];PX(Q,re,l,f)<=q&&P.push(_[Y]),(F===0?l-m<=Q:f-m<=re)&&(C.push(Z),C.push(Y-1),C.push(1-F)),(F===0?l+m>=Q:f+m>=re)&&(C.push(Y+1),C.push(U),C.push(1-F))}return P}}function Uk(u,l,f,m,_,E){if(_-m<=f)return;let I=m+_>>1;RX(u,l,I,m,_,E),Uk(u,l,f,m,I-1,1-E),Uk(u,l,f,I+1,_,1-E)}function RX(u,l,f,m,_,E){for(;_>m;){if(_-m>600){let q=_-m+1,F=f-m+1,U=Math.log(q),Z=.5*Math.exp(2*U/3),Y=.5*Math.sqrt(U*Z*(q-Z)/q)*(F-q/2<0?-1:1);RX(u,l,f,Math.max(m,Math.floor(f-F*Z/q+Y)),Math.min(_,Math.floor(f+(q-F)*Z/q+Y)),E)}let I=l[2*f+E],C=m,P=_;for(gw(u,l,m,f),l[2*_+E]>I&&gw(u,l,m,_);C<P;){for(gw(u,l,C,P),C++,P--;l[2*C+E]<I;)C++;for(;l[2*P+E]>I;)P--}l[2*m+E]===I?gw(u,l,m,P):(P++,gw(u,l,P,_)),P<=f&&(m=P+1),f<=P&&(_=P-1)}}function gw(u,l,f,m){Vk(u,f,m),Vk(l,2*f,2*m),Vk(l,2*f+1,2*m+1)}function Vk(u,l,f){let m=u[l];u[l]=u[f],u[f]=m}function PX(u,l,f,m){let _=u-f,E=l-m;return _*_+E*E}var Gk;i.bg=void 0,(Gk=i.bg||(i.bg={})).create="create",Gk.load="load",Gk.fullLoad="fullLoad";let FT=null,yw=[],$k=1e3/60,Hk="loadTime",Wk="fullLoadTime",K3e={mark(u){performance.mark(u)},frame(u){let l=u;FT!=null&&yw.push(l-FT),FT=l},clearMetrics(){FT=null,yw=[],performance.clearMeasures(Hk),performance.clearMeasures(Wk);for(let u in i.bg)performance.clearMarks(i.bg[u])},getPerformanceMetrics(){performance.measure(Hk,i.bg.create,i.bg.load),performance.measure(Wk,i.bg.create,i.bg.fullLoad);let u=performance.getEntriesByName(Hk)[0].duration,l=performance.getEntriesByName(Wk)[0].duration,f=yw.length,m=1/(yw.reduce((E,I)=>E+I,0)/f/1e3),_=yw.filter(E=>E>$k).reduce((E,I)=>E+(I-$k)/$k,0);return{loadTime:u,fullLoadTime:l,fps:m,percentDroppedFrames:_/(f+_)*100,totalFrames:f}}};i.$=class extends V{},i.A=Mg,i.B=tk,i.C=function(u){if(Ve==null){let l=u.navigator?u.navigator.userAgent:null;Ve=!!u.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return Ve},i.D=Vt,i.E=_t,i.F=class{constructor(u,l){this.target=u,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new B3e(()=>this.process()),this.subscription=function(f,m,_,E){return f.addEventListener(m,_,!1),{unsubscribe:()=>{f.removeEventListener(m,_,!1)}}}(this.target,"message",f=>this.receive(f)),this.globalScope=ke(self)?u:window}registerMessageHandler(u,l){this.messageHandlers[u]=l}sendAsync(u,l){return new Promise((f,m)=>{let _=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[_]={resolve:f,reject:m},l&&l.signal.addEventListener("abort",()=>{delete this.resolveRejects[_];let C={id:_,type:"<cancel>",origin:location.origin,targetMapId:u.targetMapId,sourceMapId:this.mapId};this.target.postMessage(C)},{once:!0});let E=[],I=Object.assign(Object.assign({},u),{id:_,sourceMapId:this.mapId,origin:location.origin,data:Wh(u.data,E)});this.target.postMessage(I,{transfer:E})})}receive(u){let l=u.data,f=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[f];let m=this.abortControllers[f];return delete this.abortControllers[f],void(m&&m.abort())}if(ke(self)||l.mustQueue)return this.tasks[f]=l,this.taskQueue.push(f),void this.invoker.trigger();this.processTask(f,l)}}process(){if(this.taskQueue.length===0)return;let u=this.taskQueue.shift(),l=this.tasks[u];delete this.tasks[u],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(u,l)}processTask(u,l){return o(this,void 0,void 0,function*(){if(l.type==="<response>"){let _=this.resolveRejects[u];return delete this.resolveRejects[u],_?void(l.error?_.reject(Zh(l.error)):_.resolve(Zh(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(u,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let f=Zh(l.data),m=new AbortController;this.abortControllers[u]=m;try{let _=yield this.messageHandlers[l.type](l.sourceMapId,f,m);this.completeTask(u,null,_)}catch(_){this.completeTask(u,_)}})}completeTask(u,l,f){let m=[];delete this.abortControllers[u];let _={id:u,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?Wh(l):null,data:Wh(f,m)};this.target.postMessage(_,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},i.G=Tt,i.H=function(){var u=new Mg(16);return Mg!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},i.I=Ck,i.J=function(u,l,f){var m,_,E,I,C,P,q,F,U,Z,Y,Q,re=f[0],fe=f[1],de=f[2];return l===u?(u[12]=l[0]*re+l[4]*fe+l[8]*de+l[12],u[13]=l[1]*re+l[5]*fe+l[9]*de+l[13],u[14]=l[2]*re+l[6]*fe+l[10]*de+l[14],u[15]=l[3]*re+l[7]*fe+l[11]*de+l[15]):(_=l[1],E=l[2],I=l[3],C=l[4],P=l[5],q=l[6],F=l[7],U=l[8],Z=l[9],Y=l[10],Q=l[11],u[0]=m=l[0],u[1]=_,u[2]=E,u[3]=I,u[4]=C,u[5]=P,u[6]=q,u[7]=F,u[8]=U,u[9]=Z,u[10]=Y,u[11]=Q,u[12]=m*re+C*fe+U*de+l[12],u[13]=_*re+P*fe+Z*de+l[13],u[14]=E*re+q*fe+Y*de+l[14],u[15]=I*re+F*fe+Q*de+l[15]),u},i.K=function(u,l,f){var m=f[0],_=f[1],E=f[2];return u[0]=l[0]*m,u[1]=l[1]*m,u[2]=l[2]*m,u[3]=l[3]*m,u[4]=l[4]*_,u[5]=l[5]*_,u[6]=l[6]*_,u[7]=l[7]*_,u[8]=l[8]*E,u[9]=l[9]*E,u[10]=l[10]*E,u[11]=l[11]*E,u[12]=l[12],u[13]=l[13],u[14]=l[14],u[15]=l[15],u},i.L=fK,i.M=function(u,l){let f={};for(let m=0;m<l.length;m++){let _=l[m];_ in u&&(f[_]=u[_])}return f},i.N=ap,i.O=aX,i.P=d,i.Q=sX,i.R=Qs,i.S=el,i.T=_g,i.U=k,i.V=R,i.W=Se,i.X=qi,i.Y=M,i.Z=mw,i._=o,i.a=Pe,i.a$=function(u,l){var f=u[0],m=u[1],_=u[2],E=u[3],I=u[4],C=u[5],P=u[6],q=u[7],F=u[8],U=u[9],Z=u[10],Y=u[11],Q=u[12],re=u[13],fe=u[14],de=u[15],qe=l[0],we=l[1],Ne=l[2],He=l[3],ot=l[4],Mt=l[5],sr=l[6],At=l[7],xt=l[8],Zt=l[9],qt=l[10],Nt=l[11],Xe=l[12],Jt=l[13],$t=l[14],mr=l[15];return Math.abs(f-qe)<=ua*Math.max(1,Math.abs(f),Math.abs(qe))&&Math.abs(m-we)<=ua*Math.max(1,Math.abs(m),Math.abs(we))&&Math.abs(_-Ne)<=ua*Math.max(1,Math.abs(_),Math.abs(Ne))&&Math.abs(E-He)<=ua*Math.max(1,Math.abs(E),Math.abs(He))&&Math.abs(I-ot)<=ua*Math.max(1,Math.abs(I),Math.abs(ot))&&Math.abs(C-Mt)<=ua*Math.max(1,Math.abs(C),Math.abs(Mt))&&Math.abs(P-sr)<=ua*Math.max(1,Math.abs(P),Math.abs(sr))&&Math.abs(q-At)<=ua*Math.max(1,Math.abs(q),Math.abs(At))&&Math.abs(F-xt)<=ua*Math.max(1,Math.abs(F),Math.abs(xt))&&Math.abs(U-Zt)<=ua*Math.max(1,Math.abs(U),Math.abs(Zt))&&Math.abs(Z-qt)<=ua*Math.max(1,Math.abs(Z),Math.abs(qt))&&Math.abs(Y-Nt)<=ua*Math.max(1,Math.abs(Y),Math.abs(Nt))&&Math.abs(Q-Xe)<=ua*Math.max(1,Math.abs(Q),Math.abs(Xe))&&Math.abs(re-Jt)<=ua*Math.max(1,Math.abs(re),Math.abs(Jt))&&Math.abs(fe-$t)<=ua*Math.max(1,Math.abs(fe),Math.abs($t))&&Math.abs(de-mr)<=ua*Math.max(1,Math.abs(de),Math.abs(mr))},i.a0=Wr,i.a1=jk,i.a2=nt,i.a3=u=>{let l=window.document.createElement("video");return l.muted=!0,new Promise(f=>{l.onloadstart=()=>{f(l)};for(let m of u){let _=window.document.createElement("source");Ze(m)||(l.crossOrigin="Anonymous"),_.src=m,l.appendChild(_)}})},i.a4=function(){return J++},i.a5=Ct,i.a6=Ng,i.a7=Nx,i.a8=cm,i.a9=pX,i.aA=function(u){if(u.type==="custom")return new z3e(u);switch(u.type){case"background":return new q3e(u);case"circle":return new EUe(u);case"fill":return new BUe(u);case"fill-extrusion":return new r3e(u);case"heatmap":return new TUe(u);case"hillshade":return new CUe(u);case"line":return new c3e(u);case"raster":return new F3e(u);case"symbol":return new DT(u);}},i.aB=le,i.aC=function(u,l){if(!u)return[{command:"setStyle",args:[l]}];let f=[];try{if(!Ft(u.version,l.version))return[{command:"setStyle",args:[l]}];Ft(u.center,l.center)||f.push({command:"setCenter",args:[l.center]}),Ft(u.zoom,l.zoom)||f.push({command:"setZoom",args:[l.zoom]}),Ft(u.bearing,l.bearing)||f.push({command:"setBearing",args:[l.bearing]}),Ft(u.pitch,l.pitch)||f.push({command:"setPitch",args:[l.pitch]}),Ft(u.sprite,l.sprite)||f.push({command:"setSprite",args:[l.sprite]}),Ft(u.glyphs,l.glyphs)||f.push({command:"setGlyphs",args:[l.glyphs]}),Ft(u.transition,l.transition)||f.push({command:"setTransition",args:[l.transition]}),Ft(u.light,l.light)||f.push({command:"setLight",args:[l.light]}),Ft(u.terrain,l.terrain)||f.push({command:"setTerrain",args:[l.terrain]}),Ft(u.sky,l.sky)||f.push({command:"setSky",args:[l.sky]}),Ft(u.projection,l.projection)||f.push({command:"setProjection",args:[l.projection]});let m={},_=[];(function(I,C,P,q){let F;for(F in C=C||{},I=I||{})Object.prototype.hasOwnProperty.call(I,F)&&(Object.prototype.hasOwnProperty.call(C,F)||Wt(F,P,q));for(F in C)Object.prototype.hasOwnProperty.call(C,F)&&(Object.prototype.hasOwnProperty.call(I,F)?Ft(I[F],C[F])||(I[F].type==="geojson"&&C[F].type==="geojson"&&Pr(I,C,F)?nr(P,{command:"setGeoJSONSourceData",args:[F,C[F].data]}):lr(F,C,P,q)):or(F,C,P))})(u.sources,l.sources,_,m);let E=[];u.layers&&u.layers.forEach(I=>{"source"in I&&m[I.source]?f.push({command:"removeLayer",args:[I.id]}):E.push(I)}),f=f.concat(_),function(I,C,P){C=C||[];let q=(I=I||[]).map(ai),F=C.map(ai),U=I.reduce(Ii,{}),Z=C.reduce(Ii,{}),Y=q.slice(),Q=Object.create(null),re,fe,de,qe,we;for(let Ne=0,He=0;Ne<q.length;Ne++)re=q[Ne],Object.prototype.hasOwnProperty.call(Z,re)?He++:(nr(P,{command:"removeLayer",args:[re]}),Y.splice(Y.indexOf(re,He),1));for(let Ne=0,He=0;Ne<F.length;Ne++)re=F[F.length-1-Ne],Y[Y.length-1-Ne]!==re&&(Object.prototype.hasOwnProperty.call(U,re)?(nr(P,{command:"removeLayer",args:[re]}),Y.splice(Y.lastIndexOf(re,Y.length-He),1)):He++,qe=Y[Y.length-Ne],nr(P,{command:"addLayer",args:[Z[re],qe]}),Y.splice(Y.length-Ne,0,re),Q[re]=!0);for(let Ne=0;Ne<F.length;Ne++)if(re=F[Ne],fe=U[re],de=Z[re],!Q[re]&&!Ft(fe,de))if(Ft(fe.source,de.source)&&Ft(fe["source-layer"],de["source-layer"])&&Ft(fe.type,de.type)){for(we in en(fe.layout,de.layout,P,re,null,"setLayoutProperty"),en(fe.paint,de.paint,P,re,null,"setPaintProperty"),Ft(fe.filter,de.filter)||nr(P,{command:"setFilter",args:[re,de.filter]}),Ft(fe.minzoom,de.minzoom)&&Ft(fe.maxzoom,de.maxzoom)||nr(P,{command:"setLayerZoomRange",args:[re,de.minzoom,de.maxzoom]}),fe)Object.prototype.hasOwnProperty.call(fe,we)&&we!=="layout"&&we!=="paint"&&we!=="filter"&&we!=="metadata"&&we!=="minzoom"&&we!=="maxzoom"&&(we.indexOf("paint.")===0?en(fe[we],de[we],P,re,we.slice(6),"setPaintProperty"):Ft(fe[we],de[we])||nr(P,{command:"setLayerProperty",args:[re,we,de[we]]}));for(we in de)Object.prototype.hasOwnProperty.call(de,we)&&!Object.prototype.hasOwnProperty.call(fe,we)&&we!=="layout"&&we!=="paint"&&we!=="filter"&&we!=="metadata"&&we!=="minzoom"&&we!=="maxzoom"&&(we.indexOf("paint.")===0?en(fe[we],de[we],P,re,we.slice(6),"setPaintProperty"):Ft(fe[we],de[we])||nr(P,{command:"setLayerProperty",args:[re,we,de[we]]}))}else nr(P,{command:"removeLayer",args:[re]}),qe=Y[Y.lastIndexOf(re)+1],nr(P,{command:"addLayer",args:[de,qe]})}(E,l.layers,f)}catch(m){console.warn("Unable to compute style diff:",m),f=[{command:"setStyle",args:[l]}]}return f},i.aD=function(u){let l=[],f=u.id;return f===void 0&&l.push({message:`layers.${f}: missing required property "id"`}),u.render===void 0&&l.push({message:`layers.${f}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&l.push({message:`layers.${f}: property "renderingMode" must be either "2d" or "3d"`}),l},i.aE=function u(l,f){if(Array.isArray(l)){if(!Array.isArray(f)||l.length!==f.length)return!1;for(let m=0;m<l.length;m++)if(!u(l[m],f[m]))return!1;return!0}if(typeof l=="object"&&l!==null&&f!==null){if(typeof f!="object"||Object.keys(l).length!==Object.keys(f).length)return!1;for(let m in l)if(!u(l[m],f[m]))return!1;return!0}return l===f},i.aF=ie,i.aG=ue,i.aH=class extends sm{constructor(u,l){super(u,l),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},i.aI=wT,i.aJ=class extends sm{constructor(u,l){super(u,l),this.current=vUe}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let l=1;l<16;l++)if(u[l]!==this.current[l]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},i.aK=eK,i.aL=tK,i.aM=mn,i.aN=class extends sm{constructor(u,l){super(u,l),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},i.aO=class extends sm{constructor(u,l){super(u,l),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},i.aP=function(u,l,f,m,_,E,I){var C=1/(l-f),P=1/(m-_),q=1/(E-I);return u[0]=-2*C,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*P,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*q,u[11]=0,u[12]=(l+f)*C,u[13]=(_+m)*P,u[14]=(I+E)*q,u[15]=1,u},i.aQ=SUe,i.aR=class extends Ce{},i.aS=d3e,i.aT=class extends je{},i.aU=vk,i.aV=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},i.aW=vK,i.aX=Io,i.aY=Js,i.aZ=class extends Gt{},i.a_=function(u,l){return u[0]===l[0]&&u[1]===l[1]&&u[2]===l[2]&&u[3]===l[3]&&u[4]===l[4]&&u[5]===l[5]&&u[6]===l[6]&&u[7]===l[7]&&u[8]===l[8]&&u[9]===l[9]&&u[10]===l[10]&&u[11]===l[11]&&u[12]===l[12]&&u[13]===l[13]&&u[14]===l[14]&&u[15]===l[15]},i.aa=function(u){let l={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(f,m,_,E)=>{let I=_||E;return l[m]=!I||I.toLowerCase(),""}),l["max-age"]){let f=parseInt(l["max-age"],10);isNaN(f)?delete l["max-age"]:l["max-age"]=f}return l},i.ab=function(u,l){let f=[];for(let m in u)m in l||f.push(m);return f},i.ac=B,i.ad=function(u,l,f){var m=Math.sin(f),_=Math.cos(f),E=l[0],I=l[1],C=l[2],P=l[3],q=l[4],F=l[5],U=l[6],Z=l[7];return l!==u&&(u[8]=l[8],u[9]=l[9],u[10]=l[10],u[11]=l[11],u[12]=l[12],u[13]=l[13],u[14]=l[14],u[15]=l[15]),u[0]=E*_+q*m,u[1]=I*_+F*m,u[2]=C*_+U*m,u[3]=P*_+Z*m,u[4]=q*_-E*m,u[5]=F*_-I*m,u[6]=U*_-C*m,u[7]=Z*_-P*m,u},i.ae=function(u){var l=new Mg(16);return l[0]=u[0],l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=u[6],l[7]=u[7],l[8]=u[8],l[9]=u[9],l[10]=u[10],l[11]=u[11],l[12]=u[12],l[13]=u[13],l[14]=u[14],l[15]=u[15],l},i.af=IT,i.ag=function(u,l){let f=0,m=0;if(u.kind==="constant")m=u.layoutSize;else if(u.kind!=="source"){let{interpolationType:_,minZoom:E,maxZoom:I}=u,C=_?B(sa.interpolationFactor(_,l,E,I),0,1):0;u.kind==="camera"?m=aa.number(u.minSize,u.maxSize,C):f=C}return{uSizeT:f,uSize:m}},i.ai=function(u,{uSize:l,uSizeT:f},{lowerSize:m,upperSize:_}){return u.kind==="source"?m/lc:u.kind==="composite"?aa.number(m/lc,_/lc,f):l},i.aj=Ok,i.ak=function(u,l,f,m){let _=l.y-u.y,E=l.x-u.x,I=m.y-f.y,C=m.x-f.x,P=I*E-C*_;if(P===0)return null;let q=(C*(u.y-f.y)-I*(u.x-f.x))/P;return new d(u.x+q*E,u.y+q*_)},i.al=gX,i.am=oK,i.an=pk,i.ao=function(u){let l=1/0,f=1/0,m=-1/0,_=-1/0;for(let E of u)l=Math.min(l,E.x),f=Math.min(f,E.y),m=Math.max(m,E.x),_=Math.max(_,E.y);return[l,f,m,_]},i.ap=Vi,i.ar=Pk,i.as=function(u,l){var f=l[0],m=l[1],_=l[2],E=l[3],I=l[4],C=l[5],P=l[6],q=l[7],F=l[8],U=l[9],Z=l[10],Y=l[11],Q=l[12],re=l[13],fe=l[14],de=l[15],qe=f*C-m*I,we=f*P-_*I,Ne=f*q-E*I,He=m*P-_*C,ot=m*q-E*C,Mt=_*q-E*P,sr=F*re-U*Q,At=F*fe-Z*Q,xt=F*de-Y*Q,Zt=U*fe-Z*re,qt=U*de-Y*re,Nt=Z*de-Y*fe,Xe=qe*Nt-we*qt+Ne*Zt+He*xt-ot*At+Mt*sr;return Xe?(u[0]=(C*Nt-P*qt+q*Zt)*(Xe=1/Xe),u[1]=(_*qt-m*Nt-E*Zt)*Xe,u[2]=(re*Mt-fe*ot+de*He)*Xe,u[3]=(Z*ot-U*Mt-Y*He)*Xe,u[4]=(P*xt-I*Nt-q*At)*Xe,u[5]=(f*Nt-_*xt+E*At)*Xe,u[6]=(fe*Ne-Q*Mt-de*we)*Xe,u[7]=(F*Mt-Z*Ne+Y*we)*Xe,u[8]=(I*qt-C*xt+q*sr)*Xe,u[9]=(m*xt-f*qt-E*sr)*Xe,u[10]=(Q*ot-re*Ne+de*qe)*Xe,u[11]=(U*Ne-F*ot-Y*qe)*Xe,u[12]=(C*At-I*Zt-P*sr)*Xe,u[13]=(f*Zt-m*At+_*sr)*Xe,u[14]=(re*we-Q*He-fe*qe)*Xe,u[15]=(F*He-U*we+Z*qe)*Xe,u):null},i.at=zk,i.au=Rk,i.av=Bk,i.aw=function(){let u={},l=be.$version;for(let f in be.$root){let m=be.$root[f];if(m.required){let _=null;_=f==="version"?l:m.type==="array"?[]:{},_!=null&&(u[f]=_)}}return u},i.ax=Yx,i.ay=Ye,i.az=function(u){u=u.slice();let l=Object.create(null);for(let f=0;f<u.length;f++)l[u[f].id]=u[f];for(let f=0;f<u.length;f++)"ref"in u[f]&&(u[f]=Qt(u[f],l[u[f].ref]));return u},i.b=We,i.b0=function(u,l){return u[0]=l[0],u[1]=l[1],u[2]=l[2],u[3]=l[3],u[4]=l[4],u[5]=l[5],u[6]=l[6],u[7]=l[7],u[8]=l[8],u[9]=l[9],u[10]=l[10],u[11]=l[11],u[12]=l[12],u[13]=l[13],u[14]=l[14],u[15]=l[15],u},i.b1=function(u,l,f){return u[0]=l[0]*f[0],u[1]=l[1]*f[1],u[2]=l[2]*f[2],u[3]=l[3]*f[3],u},i.b2=function(u,l){return u[0]*l[0]+u[1]*l[1]+u[2]*l[2]+u[3]*l[3]},i.b3=$,i.b4=cX,i.b5=lX,i.b6=function(u,l,f,m,_){var E,I=1/Math.tan(l/2);return u[0]=I/f,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=I,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,_!=null&&_!==1/0?(u[10]=(_+m)*(E=1/(m-_)),u[14]=2*_*m*E):(u[10]=-1,u[14]=-2*m),u},i.b7=function(u,l,f){var m=Math.sin(f),_=Math.cos(f),E=l[4],I=l[5],C=l[6],P=l[7],q=l[8],F=l[9],U=l[10],Z=l[11];return l!==u&&(u[0]=l[0],u[1]=l[1],u[2]=l[2],u[3]=l[3],u[12]=l[12],u[13]=l[13],u[14]=l[14],u[15]=l[15]),u[4]=E*_+q*m,u[5]=I*_+F*m,u[6]=C*_+U*m,u[7]=P*_+Z*m,u[8]=q*_-E*m,u[9]=F*_-I*m,u[10]=U*_-C*m,u[11]=Z*_-P*m,u},i.b8=D,i.b9=j,i.bA=kK,i.bB=function(u){return u.message===Ge},i.bC=zh,i.bD=za,i.ba=function(u){return u*Math.PI/180},i.bb=function(u,l){let{x:f,y:m}=mw.fromLngLat(l);return!(u<0||u>25||m<0||m>=1||f<0||f>=1)},i.bc=function(u,l){return u[0]=l[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=l[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=l[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},i.bd=class extends z{},i.be=kk,i.bf=K3e,i.bh=Le,i.bi=function(u,l){Pe.REGISTERED_PROTOCOLS[u]=l},i.bj=function(u){delete Pe.REGISTERED_PROTOCOLS[u]},i.bk=function(u,l){let f={};for(let _=0;_<u.length;_++){let E=l&&l[u[_].id]||uT(u[_]);l&&(l[u[_].id]=E);let I=f[E];I||(I=f[E]=[]),I.push(u[_])}let m=[];for(let _ in f)m.push(f[_]);return m},i.bl=kt,i.bm=hX,i.bn=dX,i.bo=$K,i.bp=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=qi/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;let l=u.bucket.layers[0],f=l.layout,m=l._unevaluatedLayout._values,_={layoutIconSize:m["icon-size"].possiblyEvaluate(new Vn(u.bucket.zoom+1),u.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new Vn(u.bucket.zoom+1),u.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new Vn(18))};if(u.bucket.textSizeData.kind==="composite"){let{minZoom:q,maxZoom:F}=u.bucket.textSizeData;_.compositeTextSizes=[m["text-size"].possiblyEvaluate(new Vn(q),u.canonical),m["text-size"].possiblyEvaluate(new Vn(F),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){let{minZoom:q,maxZoom:F}=u.bucket.iconSizeData;_.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new Vn(q),u.canonical),m["icon-size"].possiblyEvaluate(new Vn(F),u.canonical)]}let E=f.get("text-line-height")*Vi,I=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",C=f.get("text-keep-upright"),P=f.get("text-size");for(let q of u.bucket.features){let F=f.get("text-font").evaluate(q,{},u.canonical).join(","),U=P.evaluate(q,{},u.canonical),Z=_.layoutTextSize.evaluate(q,{},u.canonical),Y=_.layoutIconSize.evaluate(q,{},u.canonical),Q={horizontal:{},vertical:void 0},re=q.text,fe,de=[0,0];if(re){let Ne=re.toString(),He=f.get("text-letter-spacing").evaluate(q,{},u.canonical)*Vi,ot=rk(Ne)?He:0,Mt=f.get("text-anchor").evaluate(q,{},u.canonical),sr=TX(l,q,u.canonical);if(!sr){let qt=f.get("text-radial-offset").evaluate(q,{},u.canonical);de=qt?IX(Mt,[qt*Vi,Fk]):f.get("text-offset").evaluate(q,{},u.canonical).map(Nt=>Nt*Vi)}let At=I?"center":f.get("text-justify").evaluate(q,{},u.canonical),xt=f.get("symbol-placement")==="point"?f.get("text-max-width").evaluate(q,{},u.canonical)*Vi:1/0,Zt=()=>{u.bucket.allowVerticalPlacement&&Kx(Ne)&&(Q.vertical=PT(re,u.glyphMap,u.glyphPositions,u.imagePositions,F,xt,E,Mt,"left",ot,de,i.ah.vertical,!0,Z,U))};if(!I&&sr){let qt=new Set;if(At==="auto")for(let Xe=0;Xe<sr.values.length;Xe+=2)qt.add(zk(sr.values[Xe]));else qt.add(At);let Nt=!1;for(let Xe of qt)if(!Q.horizontal[Xe])if(Nt)Q.horizontal[Xe]=Q.horizontal[0];else{let Jt=PT(re,u.glyphMap,u.glyphPositions,u.imagePositions,F,xt,E,"center",Xe,ot,de,i.ah.horizontal,!1,Z,U);Jt&&(Q.horizontal[Xe]=Jt,Nt=Jt.positionedLines.length===1)}Zt()}else{At==="auto"&&(At=zk(Mt));let qt=PT(re,u.glyphMap,u.glyphPositions,u.imagePositions,F,xt,E,Mt,At,ot,de,i.ah.horizontal,!1,Z,U);qt&&(Q.horizontal[At]=qt),Zt(),Kx(Ne)&&I&&C&&(Q.vertical=PT(re,u.glyphMap,u.glyphPositions,u.imagePositions,F,xt,E,Mt,At,ot,de,i.ah.vertical,!1,Z,U))}}let qe=!1;if(q.icon&&q.icon.name){let Ne=u.imageMap[q.icon.name];Ne&&(fe=O3e(u.imagePositions[q.icon.name],f.get("icon-offset").evaluate(q,{},u.canonical),f.get("icon-anchor").evaluate(q,{},u.canonical)),qe=!!Ne.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=qe:u.bucket.sdfIcons!==qe&&Re("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ne.pixelRatio!==u.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}let we=CX(Q.horizontal)||Q.vertical;u.bucket.iconsInText=!!we&&we.iconsInText,(we||fe)&&Z3e(u.bucket,q,Q,fe,u.imageMap,_,Z,Y,de,qe,u.canonical)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},i.bq=Ek,i.br=wk,i.bs=Sk,i.bt=np,i.bu=Tk,i.bv=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},i.bw=function(u,l,f,m,_){return o(this,void 0,void 0,function*(){if(R())try{return yield Se(u,l,f,m,_)}catch(E){}return function(E,I,C,P,q){let F=E.width,U=E.height;Ae&&$e||(Ae=new OffscreenCanvas(F,U),$e=Ae.getContext("2d",{willReadFrequently:!0})),Ae.width=F,Ae.height=U,$e.drawImage(E,0,0,F,U);let Z=$e.getImageData(I,C,P,q);return $e.clearRect(0,0,F,U),Z.data}(u,l,f,m,_)})},i.bx=fX,i.by=a,i.bz=c,i.c=Ke,i.d=u=>o(void 0,void 0,void 0,function*(){if(u.byteLength===0)return createImageBitmap(new ImageData(1,1));let l=new Blob([new Uint8Array(u)],{type:"image/png"});try{return createImageBitmap(l)}catch(f){throw new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),i.e=ee,i.f=u=>new Promise((l,f)=>{let m=new Image;m.onload=()=>{l(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=Te})},m.onerror=()=>f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let _=new Blob([new Uint8Array(u)],{type:"image/png"});m.src=u.byteLength?URL.createObjectURL(_):Te}),i.g=at,i.h=(u,l)=>Fe(ee(u,{type:"json"}),l),i.i=ke,i.j=Kt,i.k=Dt,i.l=(u,l)=>Fe(ee(u,{type:"arrayBuffer"}),l),i.m=Fe,i.n=function(u){return new Tk(u).readFields(I3e,[])},i.o=ow,i.p=GK,i.q=b,i.r=ek,i.s=Ze,i.t=Wx,i.u=mf,i.v=be,i.w=Re,i.x=function([u,l,f]){return l+=90,l*=Math.PI/180,f*=Math.PI/180,{x:u*Math.cos(l)*Math.sin(f),y:u*Math.sin(l)*Math.sin(f),z:u*Math.cos(f)}},i.y=aa,i.z=Vn}),t("worker",["./shared"],function(i){"use strict";class o{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,H){for(let ae of W){this._layerConfigs[ae.id]=ae;let ve=this._layers[ae.id]=i.aA(ae);ve._featureFilter=i.a7(ve.filter),this.keyCache[ae.id]&&delete this.keyCache[ae.id]}for(let ae of H)delete this.keyCache[ae],delete this._layerConfigs[ae],delete this._layers[ae];this.familiesBySource={};let K=i.bk(Object.values(this._layerConfigs),this.keyCache);for(let ae of K){let ve=ae.map(Ue=>this._layers[Ue.id]),xe=ve[0];if(xe.visibility==="none")continue;let Ie=xe.source||"",pe=this.familiesBySource[Ie];pe||(pe=this.familiesBySource[Ie]={});let Be=xe.sourceLayer||"_geojsonTileLayer",Je=pe[Be];Je||(Je=pe[Be]=[]),Je.push(ve)}}}class a{constructor(W){let H={},K=[];for(let Ie in W){let pe=W[Ie],Be=H[Ie]={};for(let Je in pe){let Ue=pe[+Je];if(!Ue||Ue.bitmap.width===0||Ue.bitmap.height===0)continue;let st={x:0,y:0,w:Ue.bitmap.width+2,h:Ue.bitmap.height+2};K.push(st),Be[Je]={rect:st,metrics:Ue.metrics}}}let{w:ae,h:ve}=i.p(K),xe=new i.o({width:ae||1,height:ve||1});for(let Ie in W){let pe=W[Ie];for(let Be in pe){let Je=pe[+Be];if(!Je||Je.bitmap.width===0||Je.bitmap.height===0)continue;let Ue=H[Ie][Be].rect;i.o.copy(Je.bitmap,xe,{x:0,y:0},{x:Ue.x+1,y:Ue.y+1},Je.bitmap)}}this.image=xe,this.positions=H}}i.bl("GlyphAtlas",a);class c{constructor(W){this.tileID=new i.S(W.tileID.overscaledZ,W.tileID.wrap,W.tileID.canonical.z,W.tileID.canonical.x,W.tileID.canonical.y),this.uid=W.uid,this.zoom=W.zoom,this.pixelRatio=W.pixelRatio,this.tileSize=W.tileSize,this.source=W.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=W.showCollisionBoxes,this.collectResourceTiming=!!W.collectResourceTiming,this.returnDependencies=!!W.returnDependencies,this.promoteId=W.promoteId,this.inFlightDependencies=[]}parse(W,H,K,ae){return i._(this,void 0,void 0,function*(){this.status="parsing",this.data=W,this.collisionBoxArray=new i.a5;let ve=new i.bm(Object.keys(W.layers).sort()),xe=new i.bn(this.tileID,this.promoteId);xe.bucketLayerIDs=[];let Ie={},pe={featureIndex:xe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:K},Be=H.familiesBySource[this.source];for(let Sr in Be){let un=W.layers[Sr];if(!un)continue;un.version===1&&i.w(`Vector tile source "${this.source}" layer "${Sr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let Cn=ve.encode(Sr),Ji=[];for(let lo=0;lo<un.length;lo++){let Fo=un.feature(lo),Mh=xe.getId(Fo,Sr);Ji.push({feature:Fo,id:Mh,index:lo,sourceLayerIndex:Cn})}for(let lo of Be[Sr]){let Fo=lo[0];Fo.source!==this.source&&i.w(`layer.source = ${Fo.source} does not equal this.source = ${this.source}`),Fo.minzoom&&this.zoom<Math.floor(Fo.minzoom)||Fo.maxzoom&&this.zoom>=Fo.maxzoom||Fo.visibility!=="none"&&(h(lo,this.zoom,K),(Ie[Fo.id]=Fo.createBucket({index:xe.bucketLayerIDs.length,layers:lo,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Cn,sourceID:this.source})).populate(Ji,pe,this.tileID.canonical),xe.bucketLayerIDs.push(lo.map(Mh=>Mh.id)))}}let Je=i.aF(pe.glyphDependencies,Sr=>Object.keys(Sr).map(Number));this.inFlightDependencies.forEach(Sr=>Sr==null?void 0:Sr.abort()),this.inFlightDependencies=[];let Ue=Promise.resolve({});if(Object.keys(Je).length){let Sr=new AbortController;this.inFlightDependencies.push(Sr),Ue=ae.sendAsync({type:"GG",data:{stacks:Je,source:this.source,tileID:this.tileID,type:"glyphs"}},Sr)}let st=Object.keys(pe.iconDependencies),Bt=Promise.resolve({});if(st.length){let Sr=new AbortController;this.inFlightDependencies.push(Sr),Bt=ae.sendAsync({type:"GI",data:{icons:st,source:this.source,tileID:this.tileID,type:"icons"}},Sr)}let Xt=Object.keys(pe.patternDependencies),Nr=Promise.resolve({});if(Xt.length){let Sr=new AbortController;this.inFlightDependencies.push(Sr),Nr=ae.sendAsync({type:"GI",data:{icons:Xt,source:this.source,tileID:this.tileID,type:"patterns"}},Sr)}let[cr,Fr,Cr]=yield Promise.all([Ue,Bt,Nr]),Xr=new a(cr),Kr=new i.bo(Fr,Cr);for(let Sr in Ie){let un=Ie[Sr];un instanceof i.a6?(h(un.layers,this.zoom,K),i.bp({bucket:un,glyphMap:cr,glyphPositions:Xr.positions,imageMap:Fr,imagePositions:Kr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):un.hasPattern&&(un instanceof i.bq||un instanceof i.br||un instanceof i.bs)&&(h(un.layers,this.zoom,K),un.addFeatures(pe,this.tileID.canonical,Kr.patternPositions))}return this.status="done",{buckets:Object.values(Ie).filter(Sr=>!Sr.isEmpty()),featureIndex:xe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Xr.image,imageAtlas:Kr,glyphMap:this.returnDependencies?cr:null,iconMap:this.returnDependencies?Fr:null,glyphPositions:this.returnDependencies?Xr.positions:null}})}}function h(oe,W,H){let K=new i.z(W);for(let ae of oe)ae.recalculate(K,H)}class d{constructor(W,H,K){this.actor=W,this.layerIndex=H,this.availableImages=K,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(W,H){return i._(this,void 0,void 0,function*(){let K=yield i.l(W.request,H);try{return{vectorTile:new i.bt.VectorTile(new i.bu(K.data)),rawData:K.data,cacheControl:K.cacheControl,expires:K.expires}}catch(ae){let ve=new Uint8Array(K.data),xe=`Unable to parse the tile at ${W.request.url}, `;throw xe+=ve[0]===31&&ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ae.message}`,new Error(xe)}})}loadTile(W){return i._(this,void 0,void 0,function*(){let H=W.uid,K=!!(W&&W.request&&W.request.collectResourceTiming)&&new i.bv(W.request),ae=new c(W);this.loading[H]=ae;let ve=new AbortController;ae.abort=ve;try{let xe=yield this.loadVectorTile(W,ve);if(delete this.loading[H],!xe)return null;let Ie=xe.rawData,pe={};xe.expires&&(pe.expires=xe.expires),xe.cacheControl&&(pe.cacheControl=xe.cacheControl);let Be={};if(K){let Ue=K.finish();Ue&&(Be.resourceTiming=JSON.parse(JSON.stringify(Ue)))}ae.vectorTile=xe.vectorTile;let Je=ae.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[H]=ae,this.fetching[H]={rawTileData:Ie,cacheControl:pe,resourceTiming:Be};try{let Ue=yield Je;return i.e({rawTileData:Ie.slice(0)},Ue,pe,Be)}finally{delete this.fetching[H]}}catch(xe){throw delete this.loading[H],ae.status="done",this.loaded[H]=ae,xe}})}reloadTile(W){return i._(this,void 0,void 0,function*(){let H=W.uid;if(!this.loaded||!this.loaded[H])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let K=this.loaded[H];if(K.showCollisionBoxes=W.showCollisionBoxes,K.status==="parsing"){let ae=yield K.parse(K.vectorTile,this.layerIndex,this.availableImages,this.actor),ve;if(this.fetching[H]){let{rawTileData:xe,cacheControl:Ie,resourceTiming:pe}=this.fetching[H];delete this.fetching[H],ve=i.e({rawTileData:xe.slice(0)},ae,Ie,pe)}else ve=ae;return ve}if(K.status==="done"&&K.vectorTile)return K.parse(K.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(W){return i._(this,void 0,void 0,function*(){let H=this.loading,K=W.uid;H&&H[K]&&H[K].abort&&(H[K].abort.abort(),delete H[K])})}removeTile(W){return i._(this,void 0,void 0,function*(){this.loaded&&this.loaded[W.uid]&&delete this.loaded[W.uid]})}}class v{constructor(){this.loaded={}}loadTile(W){return i._(this,void 0,void 0,function*(){let{uid:H,encoding:K,rawImageData:ae,redFactor:ve,greenFactor:xe,blueFactor:Ie,baseShift:pe}=W,Be=ae.width+2,Je=ae.height+2,Ue=i.b(ae)?new i.R({width:Be,height:Je},(yield i.bw(ae,-1,-1,Be,Je))):ae,st=new i.bx(H,Ue,K,ve,xe,Ie,pe);return this.loaded=this.loaded||{},this.loaded[H]=st,st})}removeTile(W){let H=this.loaded,K=W.uid;H&&H[K]&&delete H[K]}}function x(oe,W){if(oe.length!==0){S(oe[0],W);for(var H=1;H<oe.length;H++)S(oe[H],!W)}}function S(oe,W){for(var H=0,K=0,ae=0,ve=oe.length,xe=ve-1;ae<ve;xe=ae++){var Ie=(oe[ae][0]-oe[xe][0])*(oe[xe][1]+oe[ae][1]),pe=H+Ie;K+=Math.abs(H)>=Math.abs(Ie)?H-pe+Ie:Ie-pe+H,H=pe}H+K>=0!=!!W&&oe.reverse()}var T=i.by(function oe(W,H){var K,ae=W&&W.type;if(ae==="FeatureCollection")for(K=0;K<W.features.length;K++)oe(W.features[K],H);else if(ae==="GeometryCollection")for(K=0;K<W.geometries.length;K++)oe(W.geometries[K],H);else if(ae==="Feature")oe(W.geometry,H);else if(ae==="Polygon")x(W.coordinates,H);else if(ae==="MultiPolygon")for(K=0;K<W.coordinates.length;K++)x(W.coordinates[K],H);return W});let L=i.bt.VectorTileFeature.prototype.toGeoJSON;var k={exports:{}},R=i.bz,D=i.bt.VectorTileFeature,j=B;function B(oe,W){this.options=W||{},this.features=oe,this.length=oe.length}function $(oe,W){this.id=typeof oe.id=="number"?oe.id:void 0,this.type=oe.type,this.rawGeometry=oe.type===1?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=W||4096}B.prototype.feature=function(oe){return new $(this.features[oe],this.options.extent)},$.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var W=0;W<oe.length;W++){for(var H=oe[W],K=[],ae=0;ae<H.length;ae++)K.push(new R(H[ae][0],H[ae][1]));this.geometry.push(K)}return this.geometry},$.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,W=1/0,H=-1/0,K=1/0,ae=-1/0,ve=0;ve<oe.length;ve++)for(var xe=oe[ve],Ie=0;Ie<xe.length;Ie++){var pe=xe[Ie];W=Math.min(W,pe.x),H=Math.max(H,pe.x),K=Math.min(K,pe.y),ae=Math.max(ae,pe.y)}return[W,K,H,ae]},$.prototype.toGeoJSON=D.prototype.toGeoJSON;var ee=i.bA,J=j;function ie(oe){var W=new ee;return function(H,K){for(var ae in H.layers)K.writeMessage(3,ue,H.layers[ae])}(oe,W),W.finish()}function ue(oe,W){var H;W.writeVarintField(15,oe.version||1),W.writeStringField(1,oe.name||""),W.writeVarintField(5,oe.extent||4096);var K={keys:[],values:[],keycache:{},valuecache:{}};for(H=0;H<oe.length;H++)K.feature=oe.feature(H),W.writeMessage(2,le,K);var ae=K.keys;for(H=0;H<ae.length;H++)W.writeStringField(3,ae[H]);var ve=K.values;for(H=0;H<ve.length;H++)W.writeMessage(4,Ve,ve[H])}function le(oe,W){var H=oe.feature;H.id!==void 0&&W.writeVarintField(1,H.id),W.writeMessage(2,_e,oe),W.writeVarintField(3,H.type),W.writeMessage(4,ke,H)}function _e(oe,W){var H=oe.feature,K=oe.keys,ae=oe.values,ve=oe.keycache,xe=oe.valuecache;for(var Ie in H.properties){var pe=H.properties[Ie],Be=ve[Ie];if(pe!==null){Be===void 0&&(K.push(Ie),ve[Ie]=Be=K.length-1),W.writeVarint(Be);var Je=typeof pe;Je!=="string"&&Je!=="boolean"&&Je!=="number"&&(pe=JSON.stringify(pe));var Ue=Je+":"+pe,st=xe[Ue];st===void 0&&(ae.push(pe),xe[Ue]=st=ae.length-1),W.writeVarint(st)}}}function Re(oe,W){return(W<<3)+(7&oe)}function ze(oe){return oe<<1^oe>>31}function ke(oe,W){for(var H=oe.loadGeometry(),K=oe.type,ae=0,ve=0,xe=H.length,Ie=0;Ie<xe;Ie++){var pe=H[Ie],Be=1;K===1&&(Be=pe.length),W.writeVarint(Re(1,Be));for(var Je=K===3?pe.length-1:pe.length,Ue=0;Ue<Je;Ue++){Ue===1&&K!==1&&W.writeVarint(Re(2,Je-1));var st=pe[Ue].x-ae,Bt=pe[Ue].y-ve;W.writeVarint(ze(st)),W.writeVarint(ze(Bt)),ae+=st,ve+=Bt}K===3&&W.writeVarint(Re(7,1))}}function Ve(oe,W){var H=typeof oe;H==="string"?W.writeStringField(1,oe):H==="boolean"?W.writeBooleanField(7,oe):H==="number"&&(oe%1!=0?W.writeDoubleField(3,oe):oe<0?W.writeSVarintField(6,oe):W.writeVarintField(5,oe))}k.exports=ie,k.exports.fromVectorTileJs=ie,k.exports.fromGeojsonVt=function(oe,W){W=W||{};var H={};for(var K in oe)H[K]=new J(oe[K].features,W),H[K].name=K,H[K].version=W.version,H[K].extent=W.extent;return ie({layers:H})},k.exports.GeoJSONWrapper=J;var We=i.by(k.exports);let Te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:oe=>oe},Se=Math.fround||(Ae=new Float32Array(1),oe=>(Ae[0]=+oe,Ae[0]));var Ae;let $e=3,Ge=5,Ke=6;class Pe{constructor(W){this.options=Object.assign(Object.create(Te),W),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(W){let{log:H,minZoom:K,maxZoom:ae}=this.options;H&&console.time("total time");let ve=`prepare ${W.length} points`;H&&console.time(ve),this.points=W;let xe=[];for(let pe=0;pe<W.length;pe++){let Be=W[pe];if(!Be.geometry)continue;let[Je,Ue]=Be.geometry.coordinates,st=Se(Le(Je)),Bt=Se(Ye(Ue));xe.push(st,Bt,1/0,pe,-1,1),this.options.reduce&&xe.push(0)}let Ie=this.trees[ae+1]=this._createTree(xe);H&&console.timeEnd(ve);for(let pe=ae;pe>=K;pe--){let Be=+Date.now();Ie=this.trees[pe]=this._createTree(this._cluster(Ie,pe)),H&&console.log("z%d: %d clusters in %dms",pe,Ie.numItems,+Date.now()-Be)}return H&&console.timeEnd("total time"),this}getClusters(W,H){let K=((W[0]+180)%360+360)%360-180,ae=Math.max(-90,Math.min(90,W[1])),ve=W[2]===180?180:((W[2]+180)%360+360)%360-180,xe=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)K=-180,ve=180;else if(K>ve){let Ue=this.getClusters([K,ae,180,xe],H),st=this.getClusters([-180,ae,ve,xe],H);return Ue.concat(st)}let Ie=this.trees[this._limitZoom(H)],pe=Ie.range(Le(K),Ye(xe),Le(ve),Ye(ae)),Be=Ie.data,Je=[];for(let Ue of pe){let st=this.stride*Ue;Je.push(Be[st+Ge]>1?at(Be,st,this.clusterProps):this.points[Be[st+$e]])}return Je}getChildren(W){let H=this._getOriginId(W),K=this._getOriginZoom(W),ae="No cluster with the specified id.",ve=this.trees[K];if(!ve)throw new Error(ae);let xe=ve.data;if(H*this.stride>=xe.length)throw new Error(ae);let Ie=this.options.radius/(this.options.extent*Math.pow(2,K-1)),pe=ve.within(xe[H*this.stride],xe[H*this.stride+1],Ie),Be=[];for(let Je of pe){let Ue=Je*this.stride;xe[Ue+4]===W&&Be.push(xe[Ue+Ge]>1?at(xe,Ue,this.clusterProps):this.points[xe[Ue+$e]])}if(Be.length===0)throw new Error(ae);return Be}getLeaves(W,H,K){let ae=[];return this._appendLeaves(ae,W,H=H||10,K=K||0,0),ae}getTile(W,H,K){let ae=this.trees[this._limitZoom(W)],ve=Math.pow(2,W),{extent:xe,radius:Ie}=this.options,pe=Ie/xe,Be=(K-pe)/ve,Je=(K+1+pe)/ve,Ue={features:[]};return this._addTileFeatures(ae.range((H-pe)/ve,Be,(H+1+pe)/ve,Je),ae.data,H,K,ve,Ue),H===0&&this._addTileFeatures(ae.range(1-pe/ve,Be,1,Je),ae.data,ve,K,ve,Ue),H===ve-1&&this._addTileFeatures(ae.range(0,Be,pe/ve,Je),ae.data,-1,K,ve,Ue),Ue.features.length?Ue:null}getClusterExpansionZoom(W){let H=this._getOriginZoom(W)-1;for(;H<=this.options.maxZoom;){let K=this.getChildren(W);if(H++,K.length!==1)break;W=K[0].properties.cluster_id}return H}_appendLeaves(W,H,K,ae,ve){let xe=this.getChildren(H);for(let Ie of xe){let pe=Ie.properties;if(pe&&pe.cluster?ve+pe.point_count<=ae?ve+=pe.point_count:ve=this._appendLeaves(W,pe.cluster_id,K,ae,ve):ve<ae?ve++:W.push(Ie),W.length===K)break}return ve}_createTree(W){let H=new i.av(W.length/this.stride|0,this.options.nodeSize,Float32Array);for(let K=0;K<W.length;K+=this.stride)H.add(W[K],W[K+1]);return H.finish(),H.data=W,H}_addTileFeatures(W,H,K,ae,ve,xe){for(let Ie of W){let pe=Ie*this.stride,Be=H[pe+Ge]>1,Je,Ue,st;if(Be)Je=Tt(H,pe,this.clusterProps),Ue=H[pe],st=H[pe+1];else{let Nr=this.points[H[pe+$e]];Je=Nr.properties;let[cr,Fr]=Nr.geometry.coordinates;Ue=Le(cr),st=Ye(Fr)}let Bt={type:1,geometry:[[Math.round(this.options.extent*(Ue*ve-K)),Math.round(this.options.extent*(st*ve-ae))]],tags:Je},Xt;Xt=Be||this.options.generateId?H[pe+$e]:this.points[H[pe+$e]].id,Xt!==void 0&&(Bt.id=Xt),xe.features.push(Bt)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(Math.floor(+W),this.options.maxZoom+1))}_cluster(W,H){let{radius:K,extent:ae,reduce:ve,minPoints:xe}=this.options,Ie=K/(ae*Math.pow(2,H)),pe=W.data,Be=[],Je=this.stride;for(let Ue=0;Ue<pe.length;Ue+=Je){if(pe[Ue+2]<=H)continue;pe[Ue+2]=H;let st=pe[Ue],Bt=pe[Ue+1],Xt=W.within(pe[Ue],pe[Ue+1],Ie),Nr=pe[Ue+Ge],cr=Nr;for(let Fr of Xt){let Cr=Fr*Je;pe[Cr+2]>H&&(cr+=pe[Cr+Ge])}if(cr>Nr&&cr>=xe){let Fr,Cr=st*Nr,Xr=Bt*Nr,Kr=-1,Sr=((Ue/Je|0)<<5)+(H+1)+this.points.length;for(let un of Xt){let Cn=un*Je;if(pe[Cn+2]<=H)continue;pe[Cn+2]=H;let Ji=pe[Cn+Ge];Cr+=pe[Cn]*Ji,Xr+=pe[Cn+1]*Ji,pe[Cn+4]=Sr,ve&&(Fr||(Fr=this._map(pe,Ue,!0),Kr=this.clusterProps.length,this.clusterProps.push(Fr)),ve(Fr,this._map(pe,Cn)))}pe[Ue+4]=Sr,Be.push(Cr/cr,Xr/cr,1/0,Sr,-1,cr),ve&&Be.push(Kr)}else{for(let Fr=0;Fr<Je;Fr++)Be.push(pe[Ue+Fr]);if(cr>1)for(let Fr of Xt){let Cr=Fr*Je;if(!(pe[Cr+2]<=H)){pe[Cr+2]=H;for(let Xr=0;Xr<Je;Xr++)Be.push(pe[Cr+Xr])}}}}return Be}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,H,K){if(W[H+Ge]>1){let xe=this.clusterProps[W[H+Ke]];return K?Object.assign({},xe):xe}let ae=this.points[W[H+$e]].properties,ve=this.options.map(ae);return K&&ve===ae?Object.assign({},ve):ve}}function at(oe,W,H){return{type:"Feature",id:oe[W+$e],properties:Tt(oe,W,H),geometry:{type:"Point",coordinates:[(K=oe[W],360*(K-.5)),Fe(oe[W+1])]}};var K}function Tt(oe,W,H){let K=oe[W+Ge],ae=K>=1e4?`${Math.round(K/1e3)}k`:K>=1e3?Math.round(K/100)/10+"k":K,ve=oe[W+Ke],xe=ve===-1?{}:Object.assign({},H[ve]);return Object.assign(xe,{cluster:!0,cluster_id:oe[W+$e],point_count:K,point_count_abbreviated:ae})}function Le(oe){return oe/360+.5}function Ye(oe){let W=Math.sin(oe*Math.PI/180),H=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return H<0?0:H>1?1:H}function Fe(oe){let W=(180-360*oe)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function Ze(oe,W,H,K){let ae=K,ve=W+(H-W>>1),xe,Ie=H-W,pe=oe[W],Be=oe[W+1],Je=oe[H],Ue=oe[H+1];for(let st=W+3;st<H;st+=3){let Bt=tt(oe[st],oe[st+1],pe,Be,Je,Ue);if(Bt>ae)xe=st,ae=Bt;else if(Bt===ae){let Xt=Math.abs(st-ve);Xt<Ie&&(xe=st,Ie=Xt)}}ae>K&&(xe-W>3&&Ze(oe,W,xe,K),oe[xe+2]=ae,H-xe>3&&Ze(oe,xe,H,K))}function tt(oe,W,H,K,ae,ve){let xe=ae-H,Ie=ve-K;if(xe!==0||Ie!==0){let pe=((oe-H)*xe+(W-K)*Ie)/(xe*xe+Ie*Ie);pe>1?(H=ae,K=ve):pe>0&&(H+=xe*pe,K+=Ie*pe)}return xe=oe-H,Ie=W-K,xe*xe+Ie*Ie}function Qe(oe,W,H,K){let ae={id:oe==null?null:oe,type:W,geometry:H,tags:K,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(W==="Point"||W==="MultiPoint"||W==="LineString")Dt(ae,H);else if(W==="Polygon")Dt(ae,H[0]);else if(W==="MultiLineString")for(let ve of H)Dt(ae,ve);else if(W==="MultiPolygon")for(let ve of H)Dt(ae,ve[0]);return ae}function Dt(oe,W){for(let H=0;H<W.length;H+=3)oe.minX=Math.min(oe.minX,W[H]),oe.minY=Math.min(oe.minY,W[H+1]),oe.maxX=Math.max(oe.maxX,W[H]),oe.maxY=Math.max(oe.maxY,W[H+1])}function Kt(oe,W,H,K){if(!W.geometry)return;let ae=W.geometry.coordinates;if(ae&&ae.length===0)return;let ve=W.geometry.type,xe=Math.pow(H.tolerance/((1<<H.maxZoom)*H.extent),2),Ie=[],pe=W.id;if(H.promoteId?pe=W.properties[H.promoteId]:H.generateId&&(pe=K||0),ve==="Point")_t(ae,Ie);else if(ve==="MultiPoint")for(let Be of ae)_t(Be,Ie);else if(ve==="LineString")be(ae,Ie,xe,!1);else if(ve==="MultiLineString"){if(H.lineMetrics){for(let Be of ae)Ie=[],be(Be,Ie,xe,!1),oe.push(Qe(pe,"LineString",Ie,W.properties));return}jt(ae,Ie,xe,!1)}else if(ve==="Polygon")jt(ae,Ie,xe,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(let Be of W.geometry.geometries)Kt(oe,{id:pe,geometry:Be,properties:W.properties},H,K);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Be of ae){let Je=[];jt(Be,Je,xe,!0),Ie.push(Je)}}oe.push(Qe(pe,ve,Ie,W.properties))}function _t(oe,W){W.push(Qt(oe[0]),Ft(oe[1]),0)}function be(oe,W,H,K){let ae,ve,xe=0;for(let pe=0;pe<oe.length;pe++){let Be=Qt(oe[pe][0]),Je=Ft(oe[pe][1]);W.push(Be,Je,0),pe>0&&(xe+=K?(ae*Je-Be*ve)/2:Math.sqrt(Math.pow(Be-ae,2)+Math.pow(Je-ve,2))),ae=Be,ve=Je}let Ie=W.length-3;W[2]=1,Ze(W,0,Ie,H),W[Ie+2]=1,W.size=Math.abs(xe),W.start=0,W.end=W.size}function jt(oe,W,H,K){for(let ae=0;ae<oe.length;ae++){let ve=[];be(oe[ae],ve,H,K),W.push(ve)}}function Qt(oe){return oe/360+.5}function Ft(oe){let W=Math.sin(oe*Math.PI/180),H=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return H<0?0:H>1?1:H}function nr(oe,W,H,K,ae,ve,xe,Ie){if(K/=W,ve>=(H/=W)&&xe<K)return oe;if(xe<H||ve>=K)return null;let pe=[];for(let Be of oe){let Je=Be.geometry,Ue=Be.type,st=ae===0?Be.minX:Be.minY,Bt=ae===0?Be.maxX:Be.maxY;if(st>=H&&Bt<K){pe.push(Be);continue}if(Bt<H||st>=K)continue;let Xt=[];if(Ue==="Point"||Ue==="MultiPoint")or(Je,Xt,H,K,ae);else if(Ue==="LineString")Wt(Je,Xt,H,K,ae,!1,Ie.lineMetrics);else if(Ue==="MultiLineString")Pr(Je,Xt,H,K,ae,!1);else if(Ue==="Polygon")Pr(Je,Xt,H,K,ae,!0);else if(Ue==="MultiPolygon")for(let Nr of Je){let cr=[];Pr(Nr,cr,H,K,ae,!0),cr.length&&Xt.push(cr)}if(Xt.length){if(Ie.lineMetrics&&Ue==="LineString"){for(let Nr of Xt)pe.push(Qe(Be.id,Ue,Nr,Be.tags));continue}Ue!=="LineString"&&Ue!=="MultiLineString"||(Xt.length===1?(Ue="LineString",Xt=Xt[0]):Ue="MultiLineString"),Ue!=="Point"&&Ue!=="MultiPoint"||(Ue=Xt.length===3?"Point":"MultiPoint"),pe.push(Qe(Be.id,Ue,Xt,Be.tags))}}return pe.length?pe:null}function or(oe,W,H,K,ae){for(let ve=0;ve<oe.length;ve+=3){let xe=oe[ve+ae];xe>=H&&xe<=K&&en(W,oe[ve],oe[ve+1],oe[ve+2])}}function Wt(oe,W,H,K,ae,ve,xe){let Ie=lr(oe),pe=ae===0?ai:Ii,Be,Je,Ue=oe.start;for(let cr=0;cr<oe.length-3;cr+=3){let Fr=oe[cr],Cr=oe[cr+1],Xr=oe[cr+2],Kr=oe[cr+3],Sr=oe[cr+4],un=ae===0?Fr:Cr,Cn=ae===0?Kr:Sr,Ji=!1;xe&&(Be=Math.sqrt(Math.pow(Fr-Kr,2)+Math.pow(Cr-Sr,2))),un<H?Cn>H&&(Je=pe(Ie,Fr,Cr,Kr,Sr,H),xe&&(Ie.start=Ue+Be*Je)):un>K?Cn<K&&(Je=pe(Ie,Fr,Cr,Kr,Sr,K),xe&&(Ie.start=Ue+Be*Je)):en(Ie,Fr,Cr,Xr),Cn<H&&un>=H&&(Je=pe(Ie,Fr,Cr,Kr,Sr,H),Ji=!0),Cn>K&&un<=K&&(Je=pe(Ie,Fr,Cr,Kr,Sr,K),Ji=!0),!ve&&Ji&&(xe&&(Ie.end=Ue+Be*Je),W.push(Ie),Ie=lr(oe)),xe&&(Ue+=Be)}let st=oe.length-3,Bt=oe[st],Xt=oe[st+1],Nr=ae===0?Bt:Xt;Nr>=H&&Nr<=K&&en(Ie,Bt,Xt,oe[st+2]),st=Ie.length-3,ve&&st>=3&&(Ie[st]!==Ie[0]||Ie[st+1]!==Ie[1])&&en(Ie,Ie[0],Ie[1],Ie[2]),Ie.length&&W.push(Ie)}function lr(oe){let W=[];return W.size=oe.size,W.start=oe.start,W.end=oe.end,W}function Pr(oe,W,H,K,ae,ve){for(let xe of oe)Wt(xe,W,H,K,ae,ve,!1)}function en(oe,W,H,K){oe.push(W,H,K)}function ai(oe,W,H,K,ae,ve){let xe=(ve-W)/(K-W);return en(oe,ve,H+(ae-H)*xe,1),xe}function Ii(oe,W,H,K,ae,ve){let xe=(ve-H)/(ae-H);return en(oe,W+(K-W)*xe,ve,1),xe}function nt(oe,W){let H=[];for(let K=0;K<oe.length;K++){let ae=oe[K],ve=ae.type,xe;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")xe=Qn(ae.geometry,W);else if(ve==="MultiLineString"||ve==="Polygon"){xe=[];for(let Ie of ae.geometry)xe.push(Qn(Ie,W))}else if(ve==="MultiPolygon"){xe=[];for(let Ie of ae.geometry){let pe=[];for(let Be of Ie)pe.push(Qn(Be,W));xe.push(pe)}}H.push(Qe(ae.id,ve,xe,ae.tags))}return H}function Qn(oe,W){let H=[];H.size=oe.size,oe.start!==void 0&&(H.start=oe.start,H.end=oe.end);for(let K=0;K<oe.length;K+=3)H.push(oe[K]+W,oe[K+1],oe[K+2]);return H}function An(oe,W){if(oe.transformed)return oe;let H=1<<oe.z,K=oe.x,ae=oe.y;for(let ve of oe.features){let xe=ve.geometry,Ie=ve.type;if(ve.geometry=[],Ie===1)for(let pe=0;pe<xe.length;pe+=2)ve.geometry.push(di(xe[pe],xe[pe+1],W,H,K,ae));else for(let pe=0;pe<xe.length;pe++){let Be=[];for(let Je=0;Je<xe[pe].length;Je+=2)Be.push(di(xe[pe][Je],xe[pe][Je+1],W,H,K,ae));ve.geometry.push(Be)}}return oe.transformed=!0,oe}function di(oe,W,H,K,ae,ve){return[Math.round(H*(oe*K-ae)),Math.round(H*(W*K-ve))]}function Ti(oe,W,H,K,ae){let ve=W===ae.maxZoom?0:ae.tolerance/((1<<W)*ae.extent),xe={features:[],numPoints:0,numSimplified:0,numFeatures:oe.length,source:null,x:H,y:K,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let Ie of oe)ut(xe,Ie,ve,ae);return xe}function ut(oe,W,H,K){let ae=W.geometry,ve=W.type,xe=[];if(oe.minX=Math.min(oe.minX,W.minX),oe.minY=Math.min(oe.minY,W.minY),oe.maxX=Math.max(oe.maxX,W.maxX),oe.maxY=Math.max(oe.maxY,W.maxY),ve==="Point"||ve==="MultiPoint")for(let Ie=0;Ie<ae.length;Ie+=3)xe.push(ae[Ie],ae[Ie+1]),oe.numPoints++,oe.numSimplified++;else if(ve==="LineString")vr(xe,ae,oe,H,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(let Ie=0;Ie<ae.length;Ie++)vr(xe,ae[Ie],oe,H,ve==="Polygon",Ie===0);else if(ve==="MultiPolygon")for(let Ie=0;Ie<ae.length;Ie++){let pe=ae[Ie];for(let Be=0;Be<pe.length;Be++)vr(xe,pe[Be],oe,H,!0,Be===0)}if(xe.length){let Ie=W.tags||null;if(ve==="LineString"&&K.lineMetrics){Ie={};for(let Be in W.tags)Ie[Be]=W.tags[Be];Ie.mapbox_clip_start=ae.start/ae.size,Ie.mapbox_clip_end=ae.end/ae.size}let pe={geometry:xe,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:Ie};W.id!==null&&(pe.id=W.id),oe.features.push(pe)}}function vr(oe,W,H,K,ae,ve){let xe=K*K;if(K>0&&W.size<(ae?xe:K))return void(H.numPoints+=W.length/3);let Ie=[];for(let pe=0;pe<W.length;pe+=3)(K===0||W[pe+2]>xe)&&(H.numSimplified++,Ie.push(W[pe],W[pe+1])),H.numPoints++;ae&&function(pe,Be){let Je=0;for(let Ue=0,st=pe.length,Bt=st-2;Ue<st;Bt=Ue,Ue+=2)Je+=(pe[Ue]-pe[Bt])*(pe[Ue+1]+pe[Bt+1]);if(Je>0===Be)for(let Ue=0,st=pe.length;Ue<st/2;Ue+=2){let Bt=pe[Ue],Xt=pe[Ue+1];pe[Ue]=pe[st-2-Ue],pe[Ue+1]=pe[st-1-Ue],pe[st-2-Ue]=Bt,pe[st-1-Ue]=Xt}}(Ie,ve),oe.push(Ie)}let zt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ai{constructor(W,H){let K=(H=this.options=function(ve,xe){for(let Ie in xe)ve[Ie]=xe[Ie];return ve}(Object.create(zt),H)).debug;if(K&&console.time("preprocess data"),H.maxZoom<0||H.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(H.promoteId&&H.generateId)throw new Error("promoteId and generateId cannot be used together.");let ae=function(ve,xe){let Ie=[];if(ve.type==="FeatureCollection")for(let pe=0;pe<ve.features.length;pe++)Kt(Ie,ve.features[pe],xe,pe);else Kt(Ie,ve.type==="Feature"?ve:{geometry:ve},xe);return Ie}(W,H);this.tiles={},this.tileCoords=[],K&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",H.indexMaxZoom,H.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ae=function(ve,xe){let Ie=xe.buffer/xe.extent,pe=ve,Be=nr(ve,1,-1-Ie,Ie,0,-1,2,xe),Je=nr(ve,1,1-Ie,2+Ie,0,-1,2,xe);return(Be||Je)&&(pe=nr(ve,1,-Ie,1+Ie,0,-1,2,xe)||[],Be&&(pe=nt(Be,1).concat(pe)),Je&&(pe=pe.concat(nt(Je,-1)))),pe}(ae,H),ae.length&&this.splitTile(ae,0,0,0),K&&(ae.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(W,H,K,ae,ve,xe,Ie){let pe=[W,H,K,ae],Be=this.options,Je=Be.debug;for(;pe.length;){ae=pe.pop(),K=pe.pop(),H=pe.pop(),W=pe.pop();let Ue=1<<H,st=hn(H,K,ae),Bt=this.tiles[st];if(!Bt&&(Je>1&&console.time("creation"),Bt=this.tiles[st]=Ti(W,H,K,ae,Be),this.tileCoords.push({z:H,x:K,y:ae}),Je)){Je>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",H,K,ae,Bt.numFeatures,Bt.numPoints,Bt.numSimplified),console.timeEnd("creation"));let Ji=`z${H}`;this.stats[Ji]=(this.stats[Ji]||0)+1,this.total++}if(Bt.source=W,ve==null){if(H===Be.indexMaxZoom||Bt.numPoints<=Be.indexMaxPoints)continue}else{if(H===Be.maxZoom||H===ve)continue;if(ve!=null){let Ji=ve-H;if(K!==xe>>Ji||ae!==Ie>>Ji)continue}}if(Bt.source=null,W.length===0)continue;Je>1&&console.time("clipping");let Xt=.5*Be.buffer/Be.extent,Nr=.5-Xt,cr=.5+Xt,Fr=1+Xt,Cr=null,Xr=null,Kr=null,Sr=null,un=nr(W,Ue,K-Xt,K+cr,0,Bt.minX,Bt.maxX,Be),Cn=nr(W,Ue,K+Nr,K+Fr,0,Bt.minX,Bt.maxX,Be);W=null,un&&(Cr=nr(un,Ue,ae-Xt,ae+cr,1,Bt.minY,Bt.maxY,Be),Xr=nr(un,Ue,ae+Nr,ae+Fr,1,Bt.minY,Bt.maxY,Be),un=null),Cn&&(Kr=nr(Cn,Ue,ae-Xt,ae+cr,1,Bt.minY,Bt.maxY,Be),Sr=nr(Cn,Ue,ae+Nr,ae+Fr,1,Bt.minY,Bt.maxY,Be),Cn=null),Je>1&&console.timeEnd("clipping"),pe.push(Cr||[],H+1,2*K,2*ae),pe.push(Xr||[],H+1,2*K,2*ae+1),pe.push(Kr||[],H+1,2*K+1,2*ae),pe.push(Sr||[],H+1,2*K+1,2*ae+1)}}getTile(W,H,K){W=+W,H=+H,K=+K;let ae=this.options,{extent:ve,debug:xe}=ae;if(W<0||W>24)return null;let Ie=1<<W,pe=hn(W,H=H+Ie&Ie-1,K);if(this.tiles[pe])return An(this.tiles[pe],ve);xe>1&&console.log("drilling down to z%d-%d-%d",W,H,K);let Be,Je=W,Ue=H,st=K;for(;!Be&&Je>0;)Je--,Ue>>=1,st>>=1,Be=this.tiles[hn(Je,Ue,st)];return Be&&Be.source?(xe>1&&(console.log("found parent tile z%d-%d-%d",Je,Ue,st),console.time("drilling down")),this.splitTile(Be.source,Je,Ue,st,W,H,K),xe>1&&console.timeEnd("drilling down"),this.tiles[pe]?An(this.tiles[pe],ve):null):null}}function hn(oe,W,H){return 32*((1<<oe)*H+W)+oe}function Ee(oe,W){return W?oe.properties[W]:oe.id}function Oe(oe,W){if(oe==null)return!0;if(oe.type==="Feature")return Ee(oe,W)!=null;if(oe.type==="FeatureCollection"){let H=new Set;for(let K of oe.features){let ae=Ee(K,W);if(ae==null||H.has(ae))return!1;H.add(ae)}return!0}return!1}function it(oe,W){let H=new Map;if(oe!=null)if(oe.type==="Feature")H.set(Ee(oe,W),oe);else for(let K of oe.features)H.set(Ee(K,W),K);return H}class bt extends d{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(W,H){return i._(this,void 0,void 0,function*(){let K=W.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let ae=this._geoJSONIndex.getTile(K.z,K.x,K.y);if(!ae)return null;let ve=new class{constructor(Ie){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.X,this.length=Ie.length,this._features=Ie}feature(Ie){return new class{constructor(pe){this._feature=pe,this.extent=i.X,this.type=pe.type,this.properties=pe.tags,"id"in pe&&!isNaN(pe.id)&&(this.id=parseInt(pe.id,10))}loadGeometry(){if(this._feature.type===1){let pe=[];for(let Be of this._feature.geometry)pe.push([new i.P(Be[0],Be[1])]);return pe}{let pe=[];for(let Be of this._feature.geometry){let Je=[];for(let Ue of Be)Je.push(new i.P(Ue[0],Ue[1]));pe.push(Je)}return pe}}toGeoJSON(pe,Be,Je){return L.call(this,pe,Be,Je)}}(this._features[Ie])}}(ae.features),xe=We(ve);return xe.byteOffset===0&&xe.byteLength===xe.buffer.byteLength||(xe=new Uint8Array(xe)),{vectorTile:ve,rawData:xe.buffer}})}loadData(W){return i._(this,void 0,void 0,function*(){var H;(H=this._pendingRequest)===null||H===void 0||H.abort();let K=!!(W&&W.request&&W.request.collectResourceTiming)&&new i.bv(W.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(W,this._pendingRequest),this._geoJSONIndex=W.cluster?new Pe(function({superclusterOptions:xe,clusterProperties:Ie}){if(!Ie||!xe)return xe;let pe={},Be={},Je={accumulated:null,zoom:0},Ue={properties:null},st=Object.keys(Ie);for(let Bt of st){let[Xt,Nr]=Ie[Bt],cr=i.bC(Nr),Fr=i.bC(typeof Xt=="string"?[Xt,["accumulated"],["get",Bt]]:Xt);pe[Bt]=cr.value,Be[Bt]=Fr.value}return xe.map=Bt=>{Ue.properties=Bt;let Xt={};for(let Nr of st)Xt[Nr]=pe[Nr].evaluate(Je,Ue);return Xt},xe.reduce=(Bt,Xt)=>{Ue.properties=Xt;for(let Nr of st)Je.accumulated=Bt[Nr],Bt[Nr]=Be[Nr].evaluate(Je,Ue)},xe}(W)).load((yield this._pendingData).features):(ae=yield this._pendingData,new Ai(ae,W.geojsonVtOptions)),this.loaded={};let ve={};if(K){let xe=K.finish();xe&&(ve.resourceTiming={},ve.resourceTiming[W.source]=JSON.parse(JSON.stringify(xe)))}return ve}catch(ve){if(delete this._pendingRequest,i.bB(ve))return{abandoned:!0};throw ve}var ae})}getData(){return i._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(W){let H=this.loaded;return H&&H[W.uid]?super.reloadTile(W):this.loadTile(W)}loadAndProcessGeoJSON(W,H){return i._(this,void 0,void 0,function*(){let K=yield this.loadGeoJSON(W,H);if(delete this._pendingRequest,typeof K!="object")throw new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`);if(T(K,!0),W.filter){let ae=i.bC(W.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ae.result==="error")throw new Error(ae.value.map(xe=>`${xe.key}: ${xe.message}`).join(", "));K={type:"FeatureCollection",features:K.features.filter(xe=>ae.value.evaluate({zoom:0},xe))}}return K})}loadGeoJSON(W,H){return i._(this,void 0,void 0,function*(){let{promoteId:K}=W;if(W.request){let ae=yield i.h(W.request,H);return this._dataUpdateable=Oe(ae.data,K)?it(ae.data,K):void 0,ae.data}if(typeof W.data=="string")try{let ae=JSON.parse(W.data);return this._dataUpdateable=Oe(ae,K)?it(ae,K):void 0,ae}catch(ae){throw new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`)}if(!W.dataDiff)throw new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${W.source}`);return function(ae,ve,xe){var Ie,pe,Be,Je;if(ve.removeAll&&ae.clear(),ve.remove)for(let Ue of ve.remove)ae.delete(Ue);if(ve.add)for(let Ue of ve.add){let st=Ee(Ue,xe);st!=null&&ae.set(st,Ue)}if(ve.update)for(let Ue of ve.update){let st=ae.get(Ue.id);if(st==null)continue;let Bt=!Ue.removeAllProperties&&(((Ie=Ue.removeProperties)===null||Ie===void 0?void 0:Ie.length)>0||((pe=Ue.addOrUpdateProperties)===null||pe===void 0?void 0:pe.length)>0);if((Ue.newGeometry||Ue.removeAllProperties||Bt)&&(st=Object.assign({},st),ae.set(Ue.id,st),Bt&&(st.properties=Object.assign({},st.properties))),Ue.newGeometry&&(st.geometry=Ue.newGeometry),Ue.removeAllProperties)st.properties={};else if(((Be=Ue.removeProperties)===null||Be===void 0?void 0:Be.length)>0)for(let Xt of Ue.removeProperties)Object.prototype.hasOwnProperty.call(st.properties,Xt)&&delete st.properties[Xt];if(((Je=Ue.addOrUpdateProperties)===null||Je===void 0?void 0:Je.length)>0)for(let{key:Xt,value:Nr}of Ue.addOrUpdateProperties)st.properties[Xt]=Nr}}(this._dataUpdateable,W.dataDiff,K),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(W){return i._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(W){return this._geoJSONIndex.getClusterExpansionZoom(W.clusterId)}getClusterChildren(W){return this._geoJSONIndex.getChildren(W.clusterId)}getClusterLeaves(W){return this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset)}}class vt{constructor(W){this.self=W,this.actor=new i.F(W),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(H,K)=>{if(this.externalWorkerSourceTypes[H])throw new Error(`Worker source with name "${H}" already registered.`);this.externalWorkerSourceTypes[H]=K},this.self.addProtocol=i.bi,this.self.removeProtocol=i.bj,this.self.registerRTLTextPlugin=H=>{if(i.bD.isParsed())throw new Error("RTL text plugin already registered.");i.bD.setMethods(H)},this.actor.registerMessageHandler("LDT",(H,K)=>this._getDEMWorkerSource(H,K.source).loadTile(K)),this.actor.registerMessageHandler("RDT",(H,K)=>i._(this,void 0,void 0,function*(){this._getDEMWorkerSource(H,K.source).removeTile(K)})),this.actor.registerMessageHandler("GCEZ",(H,K)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(H,K.type,K.source).getClusterExpansionZoom(K)})),this.actor.registerMessageHandler("GCC",(H,K)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(H,K.type,K.source).getClusterChildren(K)})),this.actor.registerMessageHandler("GCL",(H,K)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(H,K.type,K.source).getClusterLeaves(K)})),this.actor.registerMessageHandler("LD",(H,K)=>this._getWorkerSource(H,K.type,K.source).loadData(K)),this.actor.registerMessageHandler("GD",(H,K)=>this._getWorkerSource(H,K.type,K.source).getData()),this.actor.registerMessageHandler("LT",(H,K)=>this._getWorkerSource(H,K.type,K.source).loadTile(K)),this.actor.registerMessageHandler("RT",(H,K)=>this._getWorkerSource(H,K.type,K.source).reloadTile(K)),this.actor.registerMessageHandler("AT",(H,K)=>this._getWorkerSource(H,K.type,K.source).abortTile(K)),this.actor.registerMessageHandler("RMT",(H,K)=>this._getWorkerSource(H,K.type,K.source).removeTile(K)),this.actor.registerMessageHandler("RS",(H,K)=>i._(this,void 0,void 0,function*(){if(!this.workerSources[H]||!this.workerSources[H][K.type]||!this.workerSources[H][K.type][K.source])return;let ae=this.workerSources[H][K.type][K.source];delete this.workerSources[H][K.type][K.source],ae.removeSource!==void 0&&ae.removeSource(K)})),this.actor.registerMessageHandler("RM",H=>i._(this,void 0,void 0,function*(){delete this.layerIndexes[H],delete this.availableImages[H],delete this.workerSources[H],delete this.demWorkerSources[H]})),this.actor.registerMessageHandler("SR",(H,K)=>i._(this,void 0,void 0,function*(){this.referrer=K})),this.actor.registerMessageHandler("SRPS",(H,K)=>this._syncRTLPluginState(H,K)),this.actor.registerMessageHandler("IS",(H,K)=>i._(this,void 0,void 0,function*(){this.self.importScripts(K)})),this.actor.registerMessageHandler("SI",(H,K)=>this._setImages(H,K)),this.actor.registerMessageHandler("UL",(H,K)=>i._(this,void 0,void 0,function*(){this._getLayerIndex(H).update(K.layers,K.removedIds)})),this.actor.registerMessageHandler("SL",(H,K)=>i._(this,void 0,void 0,function*(){this._getLayerIndex(H).replace(K)}))}_setImages(W,H){return i._(this,void 0,void 0,function*(){this.availableImages[W]=H;for(let K in this.workerSources[W]){let ae=this.workerSources[W][K];for(let ve in ae)ae[ve].availableImages=H}})}_syncRTLPluginState(W,H){return i._(this,void 0,void 0,function*(){if(i.bD.isParsed())return i.bD.getState();if(H.pluginStatus!=="loading")return i.bD.setState(H),H;let K=H.pluginURL;if(this.self.importScripts(K),i.bD.isParsed()){let ae={pluginStatus:"loaded",pluginURL:K};return i.bD.setState(ae),ae}throw i.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${K}`)})}_getAvailableImages(W){let H=this.availableImages[W];return H||(H=[]),H}_getLayerIndex(W){let H=this.layerIndexes[W];return H||(H=this.layerIndexes[W]=new o),H}_getWorkerSource(W,H,K){if(this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][H]||(this.workerSources[W][H]={}),!this.workerSources[W][H][K]){let ae={sendAsync:(ve,xe)=>(ve.targetMapId=W,this.actor.sendAsync(ve,xe))};switch(H){case"vector":this.workerSources[W][H][K]=new d(ae,this._getLayerIndex(W),this._getAvailableImages(W));break;case"geojson":this.workerSources[W][H][K]=new bt(ae,this._getLayerIndex(W),this._getAvailableImages(W));break;default:this.workerSources[W][H][K]=new this.externalWorkerSourceTypes[H](ae,this._getLayerIndex(W),this._getAvailableImages(W));}}return this.workerSources[W][H][K]}_getDEMWorkerSource(W,H){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][H]||(this.demWorkerSources[W][H]=new v),this.demWorkerSources[W][H]}}return i.i(self)&&(self.worker=new vt(self)),vt}),t("index",["exports","./shared"],function(i,o){"use strict";var a="4.7.0";let c,h,d={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:b=>new Promise((s,p)=>{let g=requestAnimationFrame(s);b.signal.addEventListener("abort",()=>{cancelAnimationFrame(g),p(o.c())})}),getImageData(b,s=0){return this.getImageCanvasContext(b).getImageData(-s,-s,b.width+2*s,b.height+2*s)},getImageCanvasContext(b){let s=window.document.createElement("canvas"),p=s.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return s.width=b.width,s.height=b.height,p.drawImage(b,0,0,b.width,b.height),p},resolveURL:b=>(c||(c=document.createElement("a")),c.href=b,c.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(h==null&&(h=matchMedia("(prefers-reduced-motion: reduce)")),h.matches)}};class v{static testProp(s){if(!v.docStyle)return s[0];for(let p=0;p<s.length;p++)if(s[p]in v.docStyle)return s[p];return s[0]}static create(s,p,g){let y=window.document.createElement(s);return p!==void 0&&(y.className=p),g&&g.appendChild(y),y}static createNS(s,p){return window.document.createElementNS(s,p)}static disableDrag(){v.docStyle&&v.selectProp&&(v.userSelect=v.docStyle[v.selectProp],v.docStyle[v.selectProp]="none")}static enableDrag(){v.docStyle&&v.selectProp&&(v.docStyle[v.selectProp]=v.userSelect)}static setTransform(s,p){s.style[v.transformProp]=p}static addEventListener(s,p,g,y={}){s.addEventListener(p,g,"passive"in y?y:y.capture)}static removeEventListener(s,p,g,y={}){s.removeEventListener(p,g,"passive"in y?y:y.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",v.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",v.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",v.suppressClickInternal,!0)},0)}static getScale(s){let p=s.getBoundingClientRect();return{x:p.width/s.offsetWidth||1,y:p.height/s.offsetHeight||1,boundingClientRect:p}}static getPoint(s,p,g){let y=p.boundingClientRect;return new o.P((g.clientX-y.left)/p.x-s.clientLeft,(g.clientY-y.top)/p.y-s.clientTop)}static mousePos(s,p){let g=v.getScale(s);return v.getPoint(s,g,p)}static touchPos(s,p){let g=[],y=v.getScale(s);for(let w=0;w<p.length;w++)g.push(v.getPoint(s,y,p[w]));return g}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}}v.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,v.selectProp=v.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),v.transformProp=v.testProp(["transform","WebkitTransform"]);let x={supported:!1,testSupport:function(b){!L&&T&&(k?R(b):S=b)}},S,T,L=!1,k=!1;function R(b){let s=b.createTexture();b.bindTexture(b.TEXTURE_2D,s);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,T),b.isContextLost())return;x.supported=!0}catch(p){}b.deleteTexture(s),L=!0}var D;typeof document!="undefined"&&(T=document.createElement("img"),T.onload=()=>{S&&R(S),S=null,k=!0},T.onerror=()=>{L=!0,S=null},T.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(b){let s,p,g,y;b.resetRequestQueue=()=>{s=[],p=0,g=0,y={}},b.addThrottleControl=N=>{let z=g++;return y[z]=N,z},b.removeThrottleControl=N=>{delete y[N],M()},b.getImage=(N,z,V=!0)=>new Promise((G,X)=>{x.supported&&(N.headers||(N.headers={}),N.headers.accept="image/webp,*/*"),o.e(N,{type:"image"}),s.push({abortController:z,requestParameters:N,supportImageRefresh:V,state:"queued",onError:ne=>{X(ne)},onSuccess:ne=>{G(ne)}}),M()});let w=N=>o._(this,void 0,void 0,function*(){N.state="running";let{requestParameters:z,supportImageRefresh:V,onError:G,onSuccess:X,abortController:ne}=N,se=V===!1&&!o.i(self)&&!o.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce((ge,ye)=>ge&&ye==="accept",!0));p++;let he=se?O(z,ne):o.m(z,ne);try{let ge=yield he;delete N.abortController,N.state="completed",ge.data instanceof HTMLImageElement||o.b(ge.data)?X(ge):ge.data&&X({data:yield(me=ge.data,typeof createImageBitmap=="function"?o.d(me):o.f(me)),cacheControl:ge.cacheControl,expires:ge.expires})}catch(ge){delete N.abortController,G(ge)}finally{p--,M()}var me}),M=()=>{let N=(()=>{for(let z of Object.keys(y))if(y[z]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=p;z<N&&s.length>0;z++){let V=s.shift();V.abortController.signal.aborted?z--:w(V)}},O=(N,z)=>new Promise((V,G)=>{let X=new Image,ne=N.url,se=N.credentials;se&&se==="include"?X.crossOrigin="use-credentials":(se&&se==="same-origin"||!o.s(ne))&&(X.crossOrigin="anonymous"),z.signal.addEventListener("abort",()=>{X.src="",G(o.c())}),X.fetchPriority="high",X.onload=()=>{X.onerror=X.onload=null,V({data:X})},X.onerror=()=>{X.onerror=X.onload=null,z.signal.aborted||G(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},X.src=ne})}(D||(D={})),D.resetRequestQueue();class j{constructor(s){this._transformRequestFn=s}transformRequest(s,p){return this._transformRequestFn&&this._transformRequestFn(s,p)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function B(b){var s=new o.A(3);return s[0]=b[0],s[1]=b[1],s[2]=b[2],s}var $,ee=function(b,s,p){return b[0]=s[0]-p[0],b[1]=s[1]-p[1],b[2]=s[2]-p[2],b};$=new o.A(3),o.A!=Float32Array&&($[0]=0,$[1]=0,$[2]=0);var J=function(b){var s=b[0],p=b[1];return s*s+p*p};function ie(b){let s=[];if(typeof b=="string")s.push({id:"default",url:b});else if(b&&b.length>0){let p=[];for(let{id:g,url:y}of b){let w=`${g}${y}`;p.indexOf(w)===-1&&(p.push(w),s.push({id:g,url:y}))}}return s}function ue(b,s,p){let g=b.split("?");return g[0]+=`${s}${p}`,g.join("?")}(function(){var b=new o.A(2);o.A!=Float32Array&&(b[0]=0,b[1]=0)})();class le{constructor(s,p,g,y){this.context=s,this.format=g,this.texture=s.gl.createTexture(),this.update(p,y)}update(s,p,g){let{width:y,height:w}=s,M=!(this.size&&this.size[0]===y&&this.size[1]===w||g),{context:O}=this,{gl:N}=O;if(this.useMipmap=!!(p&&p.useMipmap),N.bindTexture(N.TEXTURE_2D,this.texture),O.pixelStoreUnpackFlipY.set(!1),O.pixelStoreUnpack.set(1),O.pixelStoreUnpackPremultiplyAlpha.set(this.format===N.RGBA&&(!p||p.premultiply!==!1)),M)this.size=[y,w],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||o.b(s)?N.texImage2D(N.TEXTURE_2D,0,this.format,this.format,N.UNSIGNED_BYTE,s):N.texImage2D(N.TEXTURE_2D,0,this.format,y,w,0,this.format,N.UNSIGNED_BYTE,s.data);else{let{x:z,y:V}=g||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||o.b(s)?N.texSubImage2D(N.TEXTURE_2D,0,z,V,N.RGBA,N.UNSIGNED_BYTE,s):N.texSubImage2D(N.TEXTURE_2D,0,z,V,y,w,N.RGBA,N.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&N.generateMipmap(N.TEXTURE_2D)}bind(s,p,g){let{context:y}=this,{gl:w}=y;w.bindTexture(w.TEXTURE_2D,this.texture),g!==w.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=w.LINEAR),s!==this.filter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,s),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,g||s),this.filter=s),p!==this.wrap&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,p),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,p),this.wrap=p)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}function _e(b){let{userImage:s}=b;return!!(s&&s.render&&s.render())&&(b.data.replace(new Uint8Array(s.data.buffer)),!0)}class Re extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(let{ids:p,promiseResolve:g}of this.requestors)g(this._getImagesForIds(p));this.requestors=[]}}getImage(s){let p=this.images[s];if(p&&!p.data&&p.spriteData){let g=p.spriteData;p.data=new o.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),p.spriteData=null}return p}addImage(s,p){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,p)&&(this.images[s]=p)}_validate(s,p){let g=!0,y=p.data||p.spriteData;return this._validateStretch(p.stretchX,y&&y.width)||(this.fire(new o.j(new Error(`Image "${s}" has invalid "stretchX" value`))),g=!1),this._validateStretch(p.stretchY,y&&y.height)||(this.fire(new o.j(new Error(`Image "${s}" has invalid "stretchY" value`))),g=!1),this._validateContent(p.content,p)||(this.fire(new o.j(new Error(`Image "${s}" has invalid "content" value`))),g=!1),g}_validateStretch(s,p){if(!s)return!0;let g=0;for(let y of s){if(y[0]<g||y[1]<y[0]||p<y[1])return!1;g=y[1]}return!0}_validateContent(s,p){if(!s)return!0;if(s.length!==4)return!1;let g=p.spriteData,y=g&&g.width||p.data.width,w=g&&g.height||p.data.height;return!(s[0]<0||y<s[0]||s[1]<0||w<s[1]||s[2]<0||y<s[2]||s[3]<0||w<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,p,g=!0){let y=this.getImage(s);if(g&&(y.data.width!==p.data.width||y.data.height!==p.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=y.version+1,this.images[s]=p,this.updatedImages[s]=!0}removeImage(s){let p=this.images[s];delete this.images[s],delete this.patterns[s],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise((p,g)=>{let y=!0;if(!this.isLoaded())for(let w of s)this.images[w]||(y=!1);this.isLoaded()||y?p(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:p})})}_getImagesForIds(s){let p={};for(let g of s){let y=this.getImage(g);y||(this.fire(new o.k("styleimagemissing",{id:g})),y=this.getImage(g)),y?p[g]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:o.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){let{width:s,height:p}=this.atlasImage;return{width:s,height:p}}getPattern(s){let p=this.patterns[s],g=this.getImage(s);if(!g)return null;if(p&&p.position.version===g.version)return p.position;if(p)p.position.version=g.version;else{let y={w:g.data.width+2,h:g.data.height+2,x:0,y:0},w=new o.I(y,g);this.patterns[s]={bin:y,position:w}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){let p=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new le(s,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){let s=[];for(let w in this.patterns)s.push(this.patterns[w].bin);let{w:p,h:g}=o.p(s),y=this.atlasImage;y.resize({width:p||1,height:g||1});for(let w in this.patterns){let{bin:M}=this.patterns[w],O=M.x+1,N=M.y+1,z=this.getImage(w).data,V=z.width,G=z.height;o.R.copy(z,y,{x:0,y:0},{x:O,y:N},{width:V,height:G}),o.R.copy(z,y,{x:0,y:G-1},{x:O,y:N-1},{width:V,height:1}),o.R.copy(z,y,{x:0,y:0},{x:O,y:N+G},{width:V,height:1}),o.R.copy(z,y,{x:V-1,y:0},{x:O-1,y:N},{width:1,height:G}),o.R.copy(z,y,{x:0,y:0},{x:O+V,y:N},{width:1,height:G})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(let p of s){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;let g=this.getImage(p);g||o.w(`Image with ID: "${p}" was not found`),_e(g)&&this.updateImage(p,g)}}}let ze=1e20;function ke(b,s,p,g,y,w,M,O,N){for(let z=s;z<s+g;z++)Ve(b,p*w+z,w,y,M,O,N);for(let z=p;z<p+y;z++)Ve(b,z*w+s,1,g,M,O,N)}function Ve(b,s,p,g,y,w,M){w[0]=0,M[0]=-ze,M[1]=ze,y[0]=b[s];for(let O=1,N=0,z=0;O<g;O++){y[O]=b[s+O*p];let V=O*O;do{let G=w[N];z=(y[O]-y[G]+V-G*G)/(O-G)/2}while(z<=M[N]&&--N>-1);N++,w[N]=O,M[N]=z,M[N+1]=ze}for(let O=0,N=0;O<g;O++){for(;M[N+1]<O;)N++;let z=w[N],V=O-z;b[s+O*p]=y[z]+V*V}}class We{constructor(s,p){this.requestManager=s,this.localIdeographFontFamily=p,this.entries={}}setURL(s){this.url=s}getGlyphs(s){return o._(this,void 0,void 0,function*(){let p=[];for(let w in s)for(let M of s[w])p.push(this._getAndCacheGlyphsPromise(w,M));let g=yield Promise.all(p),y={};for(let{stack:w,id:M,glyph:O}of g)y[w]||(y[w]={}),y[w][M]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};return y})}_getAndCacheGlyphsPromise(s,p){return o._(this,void 0,void 0,function*(){let g=this.entries[s];g||(g=this.entries[s]={glyphs:{},requests:{},ranges:{}});let y=g.glyphs[p];if(y!==void 0)return{stack:s,id:p,glyph:y};if(y=this._tinySDF(g,s,p),y)return g.glyphs[p]=y,{stack:s,id:p,glyph:y};let w=Math.floor(p/256);if(256*w>65535)throw new Error("glyphs > 65535 not supported");if(g.ranges[w])return{stack:s,id:p,glyph:y};if(!this.url)throw new Error("glyphsUrl is not set");if(!g.requests[w]){let O=We.loadGlyphRange(s,w,this.url,this.requestManager);g.requests[w]=O}let M=yield g.requests[w];for(let O in M)this._doesCharSupportLocalGlyph(+O)||(g.glyphs[+O]=M[+O]);return g.ranges[w]=!0,{stack:s,id:p,glyph:M[p]||null}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))}_tinySDF(s,p,g){let y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(g))return;let w=s.tinySDF;if(!w){let O="400";/bold/i.test(p)?O="900":/medium/i.test(p)?O="500":/light/i.test(p)&&(O="200"),w=s.tinySDF=new We.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:O})}let M=w.draw(String.fromCharCode(g));return{id:g,bitmap:new o.o({width:M.width||60,height:M.height||60},M.data),metrics:{width:M.glyphWidth/2||24,height:M.glyphHeight/2||24,left:M.glyphLeft/2+.5||0,top:M.glyphTop/2-27.5||-8,advance:M.glyphAdvance/2||24,isDoubleResolution:!0}}}}We.loadGlyphRange=function(b,s,p,g){return o._(this,void 0,void 0,function*(){let y=256*s,w=y+255,M=g.transformRequest(p.replace("{fontstack}",b).replace("{range}",`${y}-${w}`),"Glyphs"),O=yield o.l(M,new AbortController);if(!O||!O.data)throw new Error(`Could not load glyph range. range: ${s}, ${y}-${w}`);let N={};for(let z of o.n(O.data))N[z.id]=z;return N})},We.TinySDF=class{constructor({fontSize:b=24,buffer:s=3,radius:p=8,cutoff:g=.25,fontFamily:y="sans-serif",fontWeight:w="normal",fontStyle:M="normal"}={}){this.buffer=s,this.cutoff=g,this.radius=p;let O=this.size=b+4*s,N=this._createCanvas(O),z=this.ctx=N.getContext("2d",{willReadFrequently:!0});z.font=`${M} ${w} ${b}px ${y}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(O*O),this.gridInner=new Float64Array(O*O),this.f=new Float64Array(O),this.z=new Float64Array(O+1),this.v=new Uint16Array(O)}_createCanvas(b){let s=document.createElement("canvas");return s.width=s.height=b,s}draw(b){let{width:s,actualBoundingBoxAscent:p,actualBoundingBoxDescent:g,actualBoundingBoxLeft:y,actualBoundingBoxRight:w}=this.ctx.measureText(b),M=Math.ceil(p),O=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-y))),N=Math.min(this.size-this.buffer,M+Math.ceil(g)),z=O+2*this.buffer,V=N+2*this.buffer,G=Math.max(z*V,0),X=new Uint8ClampedArray(G),ne={data:X,width:z,height:V,glyphWidth:O,glyphHeight:N,glyphTop:M,glyphLeft:0,glyphAdvance:s};if(O===0||N===0)return ne;let{ctx:se,buffer:he,gridInner:me,gridOuter:ge}=this;se.clearRect(he,he,O,N),se.fillText(b,he,he+M);let ye=se.getImageData(he,he,O,N);ge.fill(ze,0,G),me.fill(0,0,G);for(let ce=0;ce<N;ce++)for(let Ce=0;Ce<O;Ce++){let De=ye.data[4*(ce*O+Ce)+3]/255;if(De===0)continue;let je=(ce+he)*z+Ce+he;if(De===1)ge[je]=0,me[je]=ze;else{let et=.5-De;ge[je]=et>0?et*et:0,me[je]=et<0?et*et:0}}ke(ge,0,0,z,V,z,this.f,this.v,this.z),ke(me,he,he,O,N,z,this.f,this.v,this.z);for(let ce=0;ce<G;ce++){let Ce=Math.sqrt(ge[ce])-Math.sqrt(me[ce]);X[ce]=Math.round(255-255*(Ce/this.radius+this.cutoff))}return ne}};class Te{constructor(){this.specification=o.v.light.position}possiblyEvaluate(s,p){return o.x(s.expression.evaluate(p))}interpolate(s,p,g){return{x:o.y.number(s.x,p.x,g),y:o.y.number(s.y,p.y,g),z:o.y.number(s.z,p.z,g)}}}let Se;class Ae extends o.E{constructor(s){super(),Se=Se||new o.q({anchor:new o.D(o.v.light.anchor),position:new Te,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(Se),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,p={}){if(!this._validate(o.r,s,p))for(let g in s){let y=s[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),y):this._transitionable.setValue(g,y)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,p,g){return(!g||g.validate!==!1)&&o.t(this,s.call(o.u,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}let $e=new o.q({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class Ge extends o.E{constructor(s){super(),this._transitionable=new o.T($e),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.z(0))}setSky(s,p={}){if(!this._validate(o.B,s,p)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let g in s){let y=s[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),y):this._transitionable.setValue(g,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,p,g={}){return(g==null?void 0:g.validate)!==!1&&o.t(this,s.call(o.u,o.e({value:p,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class Ke{constructor(s,p){this.width=s,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,p){let g=s.join(",")+String(p);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(s,p)),this.dashEntry[g]}getDashRanges(s,p,g){let y=[],w=s.length%2==1?-s[s.length-1]*g:0,M=s[0]*g,O=!0;y.push({left:w,right:M,isDash:O,zeroLength:s[0]===0});let N=s[0];for(let z=1;z<s.length;z++){O=!O;let V=s[z];w=N*g,N+=V,M=N*g,y.push({left:w,right:M,isDash:O,zeroLength:V===0})}return y}addRoundDash(s,p,g){let y=p/2;for(let w=-g;w<=g;w++){let M=this.width*(this.nextRow+g+w),O=0,N=s[O];for(let z=0;z<this.width;z++){z/N.right>1&&(N=s[++O]);let V=Math.abs(z-N.left),G=Math.abs(z-N.right),X=Math.min(V,G),ne,se=w/g*(y+1);if(N.isDash){let he=y-Math.abs(se);ne=Math.sqrt(X*X+he*he)}else ne=y-Math.sqrt(X*X+se*se);this.data[M+z]=Math.max(0,Math.min(255,ne+128))}}}addRegularDash(s){for(let O=s.length-1;O>=0;--O){let N=s[O],z=s[O+1];N.zeroLength?s.splice(O,1):z&&z.isDash===N.isDash&&(z.left=N.left,s.splice(O,1))}let p=s[0],g=s[s.length-1];p.isDash===g.isDash&&(p.left=g.left-this.width,g.right=p.right+this.width);let y=this.width*this.nextRow,w=0,M=s[w];for(let O=0;O<this.width;O++){O/M.right>1&&(M=s[++w]);let N=Math.abs(O-M.left),z=Math.abs(O-M.right),V=Math.min(N,z);this.data[y+O]=Math.max(0,Math.min(255,(M.isDash?V:-V)+128))}}addDash(s,p){let g=p?7:0,y=2*g+1;if(this.nextRow+y>this.height)return o.w("LineAtlas out of space"),null;let w=0;for(let O=0;O<s.length;O++)w+=s[O];if(w!==0){let O=this.width/w,N=this.getDashRanges(s,this.width,O);p?this.addRoundDash(N,O,g):this.addRegularDash(N)}let M={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:w};return this.nextRow+=y,this.dirty=!0,M}bind(s){let p=s.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}let Pe="maplibre_preloaded_worker_pool";class at{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<at.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Pe]}numActive(){return Object.keys(this.active).length}}let Tt=Math.floor(d.hardwareConcurrency/2),Le,Ye;function Fe(){return Le||(Le=new at),Le}at.workerCount=o.C(globalThis)?Math.max(Math.min(Tt,3),1):1;class Ze{constructor(s,p){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=p;let g=this.workerPool.acquire(p);for(let y=0;y<g.length;y++){let w=new o.F(g[y],p);w.name=`Worker ${y}`,this.actors.push(w)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,p){let g=[];for(let y of this.actors)g.push(y.sendAsync({type:s,data:p}));return Promise.all(g)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(p=>{p.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,p){for(let g of this.actors)g.registerMessageHandler(s,p)}}function tt(){return Ye||(Ye=new Ze(Fe(),o.G),Ye.registerMessageHandler("GR",(b,s,p)=>o.m(s,p))),Ye}function Qe(b,s){let p=o.H();return o.J(p,p,[1,1,0]),o.K(p,p,[.5*b.width,.5*b.height,1]),o.L(p,p,b.calculatePosMatrix(s.toUnwrapped()))}function Dt(b,s,p,g,y,w){let M=function(G,X,ne){if(G)for(let se of G){let he=X[se];if(he&&he.source===ne&&he.type==="fill-extrusion")return!0}else for(let se in X){let he=X[se];if(he.source===ne&&he.type==="fill-extrusion")return!0}return!1}(y&&y.layers,s,b.id),O=w.maxPitchScaleFactor(),N=b.tilesIn(g,O,M);N.sort(Kt);let z=[];for(let G of N)z.push({wrappedTileID:G.tileID.wrapped().key,queryResults:G.tile.queryRenderedFeatures(s,p,b._state,G.queryGeometry,G.cameraQueryGeometry,G.scale,y,w,O,Qe(b.transform,G.tileID))});let V=function(G){let X={},ne={};for(let se of G){let he=se.queryResults,me=se.wrappedTileID,ge=ne[me]=ne[me]||{};for(let ye in he){let ce=he[ye],Ce=ge[ye]=ge[ye]||{},De=X[ye]=X[ye]||[];for(let je of ce)Ce[je.featureIndex]||(Ce[je.featureIndex]=!0,De.push(je))}}return X}(z);for(let G in V)V[G].forEach(X=>{let ne=X.feature,se=b.getFeatureState(ne.layer["source-layer"],ne.id);ne.source=ne.layer.source,ne.layer["source-layer"]&&(ne.sourceLayer=ne.layer["source-layer"]),ne.state=se});return V}function Kt(b,s){let p=b.tileID,g=s.tileID;return p.overscaledZ-g.overscaledZ||p.canonical.y-g.canonical.y||p.wrap-g.wrap||p.canonical.x-g.canonical.x}function _t(b,s,p){return o._(this,void 0,void 0,function*(){let g=b;if(b.url?g=(yield o.h(s.transformRequest(b.url,"Source"),p)).data:yield d.frameAsync(p),!g)return null;let y=o.M(o.e(g,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(y.vectorLayerIds=g.vector_layers.map(w=>w.id)),y})}class be{constructor(s,p){s&&(p?this.setSouthWest(s).setNorthEast(p):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof o.N?new o.N(s.lng,s.lat):o.N.convert(s),this}setSouthWest(s){return this._sw=s instanceof o.N?new o.N(s.lng,s.lat):o.N.convert(s),this}extend(s){let p=this._sw,g=this._ne,y,w;if(s instanceof o.N)y=s,w=s;else{if(!(s instanceof be))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(be.convert(s)):this.extend(o.N.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(o.N.convert(s)):this;if(y=s._sw,w=s._ne,!y||!w)return this}return p||g?(p.lng=Math.min(y.lng,p.lng),p.lat=Math.min(y.lat,p.lat),g.lng=Math.max(w.lng,g.lng),g.lat=Math.max(w.lat,g.lat)):(this._sw=new o.N(y.lng,y.lat),this._ne=new o.N(w.lng,w.lat)),this}getCenter(){return new o.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.N(this.getWest(),this.getNorth())}getSouthEast(){return new o.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){let{lng:p,lat:g}=o.N.convert(s),y=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&y}static convert(s){return s instanceof be?s:s&&new be(s)}static fromLngLat(s,p=0){let g=360*p/40075017,y=g/Math.cos(Math.PI/180*s.lat);return new be(new o.N(s.lng-y,s.lat-g),new o.N(s.lng+y,s.lat+g))}adjustAntiMeridian(){let s=new o.N(this._sw.lng,this._sw.lat),p=new o.N(this._ne.lng,this._ne.lat);return new be(s,s.lng>p.lng?new o.N(p.lng+360,p.lat):p)}}class jt{constructor(s,p,g){this.bounds=be.convert(this.validateBounds(s)),this.minzoom=p||0,this.maxzoom=g||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){let p=Math.pow(2,s.z),g=Math.floor(o.O(this.bounds.getWest())*p),y=Math.floor(o.Q(this.bounds.getNorth())*p),w=Math.ceil(o.O(this.bounds.getEast())*p),M=Math.ceil(o.Q(this.bounds.getSouth())*p);return s.x>=g&&s.x<w&&s.y>=y&&s.y<M}}class Qt extends o.E{constructor(s,p,g,y){if(super(),this.id=s,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.M(p,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let s=yield _t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(o.e(this,s),s.bounds&&(this.tileBounds=new jt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new o.j(s))}})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(s){return o._(this,void 0,void 0,function*(){let p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};g.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise((w,M)=>{s.reloadPromise={resolve:w,reject:M}})}else s.actor=this.dispatcher.getActor(),y="LT";s.abortController=new AbortController;try{let w=yield s.actor.sendAsync({type:y,data:g},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,w)}catch(w){if(delete s.abortController,s.aborted)return;if(w&&w.status!==404)throw w;this._afterTileLoadWorkerResponse(s,null)}})}_afterTileLoadWorkerResponse(s,p){if(p&&p.resourceTiming&&(s.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&s.setExpiryData(p),s.loadVectorData(p,this.map.painter),s.reloadPromise){let g=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(g.resolve).catch(g.reject)}}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Ft extends o.E{constructor(s,p,g,y){super(),this.id=s,this.dispatcher=g,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},p),o.e(this,o.M(p,["url","scheme","tileSize"]))}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let s=yield _t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,s&&(o.e(this,s),s.bounds&&(this.tileBounds=new jt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new o.j(s))}})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}serialize(){return o.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return o._(this,void 0,void 0,function*(){let p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{let g=yield D.getImage(this.map._requestManager.transformRequest(p,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(g&&g.data){this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&s.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});let y=this.map.painter.context,w=y.gl,M=g.data;s.texture=this.map.painter.getTileTexture(M.width),s.texture?s.texture.update(M,{useMipmap:!0}):(s.texture=new le(y,M,w.RGBA,{useMipmap:!0}),s.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(g){if(delete s.abortController,s.aborted)s.state="unloaded";else if(g)throw s.state="errored",g}})}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)})}hasTransition(){return!1}}class nr extends Ft{constructor(s,p,g,y){super(s,p,g,y),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(s){return o._(this,void 0,void 0,function*(){let p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{let y=yield D.getImage(g,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(y&&y.data){let w=y.data;this.map._refreshExpiredTiles&&y.cacheControl&&y.expires&&s.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});let M=o.b(w)&&o.U()?w:yield this.readImageNow(w),O={type:this.type,uid:s.uid,source:this.id,rawImageData:M,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();let N=yield s.actor.sendAsync({type:"LDT",data:O});s.dem=N,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(y){if(delete s.abortController,s.aborted)s.state="unloaded";else if(y)throw s.state="errored",y}})}readImageNow(s){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&o.V()){let p=s.width+2,g=s.height+2;try{return new o.R({width:p,height:g},(yield o.W(s,-1,-1,p,g)))}catch(y){}}return d.getImageData(s,1)})}_getNeighboringTiles(s){let p=s.canonical,g=Math.pow(2,p.z),y=(p.x-1+g)%g,w=p.x===0?s.wrap-1:s.wrap,M=(p.x+1+g)%g,O=p.x+1===g?s.wrap+1:s.wrap,N={};return N[new o.S(s.overscaledZ,w,p.z,y,p.y).key]={backfilled:!1},N[new o.S(s.overscaledZ,O,p.z,M,p.y).key]={backfilled:!1},p.y>0&&(N[new o.S(s.overscaledZ,w,p.z,y,p.y-1).key]={backfilled:!1},N[new o.S(s.overscaledZ,s.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},N[new o.S(s.overscaledZ,O,p.z,M,p.y-1).key]={backfilled:!1}),p.y+1<g&&(N[new o.S(s.overscaledZ,w,p.z,y,p.y+1).key]={backfilled:!1},N[new o.S(s.overscaledZ,s.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},N[new o.S(s.overscaledZ,O,p.z,M,p.y+1).key]={backfilled:!1}),N}unloadTile(s){return o._(this,void 0,void 0,function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))})}}class or extends o.E{constructor(s,p,g,y){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(y),this._data=p.data,this._options=o.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId;let w=o.X/this.tileSize;p.clusterMaxZoom!==void 0&&this.maxzoom<=p.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${p.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:(p.buffer!==void 0?p.buffer:128)*w,tolerance:(p.tolerance!==void 0?p.tolerance:.375)*w,extent:o.X,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:p.clusterMaxZoom!==void 0?p.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,p.clusterMinPoints||2),extent:o.X,radius:(p.clusterRadius||50)*w,log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData(),this}updateData(s){return this._updateWorkerData(s),this}getData(){return o._(this,void 0,void 0,function*(){let s=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})})}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=s.clusterRadius),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=s.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,p,g){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:p,offset:g}})}_updateWorkerData(s){return o._(this,void 0,void 0,function*(){let p=o.e({type:this.type},this.workerOptions);s?p.dataDiff=s:typeof this._data=="string"?(p.request=this.map._requestManager.transformRequest(d.resolveURL(this._data),"Source"),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"}));try{let g=yield this.actor.sendAsync({type:"LD",data:p});if(this._pendingLoads--,this._removed||g.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let y=null;g.resourceTiming&&g.resourceTiming[this.id]&&(y=g.resourceTiming[this.id].slice(0));let w={dataType:"source"};this._collectResourceTiming&&y&&y.length>0&&o.e(w,{resourceTiming:y}),this.fire(new o.k("data",Object.assign(Object.assign({},w),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},w),{sourceDataType:"content"})))}catch(g){if(this._pendingLoads--,this._removed)return void this.fire(new o.k("dataabort",{dataType:"source"}));this.fire(new o.j(g))}})}loaded(){return this._pendingLoads===0}loadTile(s){return o._(this,void 0,void 0,function*(){let p=s.actor?"RT":"LT";s.actor=this.actor;let g={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};s.abortController=new AbortController;let y=yield this.actor.sendAsync({type:p,data:g},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(y,this.map.painter,p==="RT")})}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Wt=o.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class lr extends o.E{constructor(s,p,g,y){super(),this.id=s,this.dispatcher=g,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=p}load(s){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let p=yield D.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,s&&(this.coordinates=s),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,this.fire(new o.j(p))}})}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;let p=s.map(o.Z.fromLngLat);this.tileID=function(y){let w=1/0,M=1/0,O=-1/0,N=-1/0;for(let X of y)w=Math.min(w,X.x),M=Math.min(M,X.y),O=Math.max(O,X.x),N=Math.max(N,X.y);let z=Math.max(O-w,N-M),V=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),G=Math.pow(2,V);return new o.a1(V,Math.floor((w+O)/2*G),Math.floor((M+N)/2*G))}(p),this.minzoom=this.maxzoom=this.tileID.z;let g=p.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new o.$,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,o.X,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,o.X),this._boundsArray.emplaceBack(g[2].x,g[2].y,o.X,o.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let s=this.map.painter.context,p=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,Wt.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new le(s,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let g=!1;for(let y in this.tiles){let w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,g=!0)}g&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Pr extends lr{constructor(s,p,g,y){super(s,p,g,y),this.roundZoom=!0,this.type="video",this.options=p}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;let s=this.options;this.urls=[];for(let p of s.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{let p=yield o.a3(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new o.j(p))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){let p=this.video.seekable;s<p.start(0)||s>p.end(0)?this.fire(new o.j(new o.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let s=this.map.painter.context,p=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,Wt.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new le(s,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let g=!1;for(let y in this.tiles){let w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,g=!0)}g&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class en extends lr{constructor(s,p,g,y){super(s,p,g,y),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(w=>!Array.isArray(w)||w.length!==2||w.some(M=>typeof M!="number"))||this.fire(new o.j(new o.a2(`sources.${s}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new o.j(new o.a2(`sources.${s}`,null,"missing required property \"coordinates\""))),p.animate&&typeof p.animate!="boolean"&&this.fire(new o.j(new o.a2(`sources.${s}`,null,"optional \"animate\" property must be a boolean value"))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.a2(`sources.${s}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new o.j(new o.a2(`sources.${s}`,null,"missing required property \"canvas\""))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let p=this.map.painter.context,g=p.gl;this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,Wt.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new le(p,this.canvas,g.RGBA,{premultiply:!0});let y=!1;for(let w in this.tiles){let M=this.tiles[w];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,y=!0)}y&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}let ai={},Ii=b=>{switch(b){case"geojson":return or;case"image":return lr;case"raster":return Ft;case"raster-dem":return nr;case"vector":return Qt;case"video":return Pr;case"canvas":return en;}return ai[b]},nt="RTLPluginLoaded";class Qn extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=tt()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch(p=>{throw this.status="error",p})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return o._(this,arguments,void 0,function*(p,g=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=d.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!g)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.k(nt))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let An=null;function di(){return An||(An=new Qn),An}class Ti{constructor(s,p){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=o.a4(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){let p=s+this.timeAdded;p<this.fadeEndTime||(this.fadeEndTime=p)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,p,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(y,w){let M={};if(!w)return M;for(let O of y){let N=O.layerIds.map(z=>w.getLayer(z)).filter(Boolean);if(N.length!==0){O.layers=N,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map(z=>N.filter(V=>V.id===z)[0]));for(let z of N)M[z.id]=O}}return M}(s.buckets,p.style),this.hasSymbolBuckets=!1;for(let y in this.buckets){let w=this.buckets[y];if(w instanceof o.a6){if(this.hasSymbolBuckets=!0,!g)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let y in this.buckets){let w=this.buckets[y];if(w instanceof o.a6&&w.hasRTLText){this.hasRTLText=!0,di().lazyLoad();break}}this.queryPadding=0;for(let y in this.buckets){let w=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(y).queryRadius(w))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new o.a5}unloadVectorData(){for(let s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(let g in this.buckets){let y=this.buckets[g];y.uploadPending()&&y.upload(s)}let p=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new le(s,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new le(s,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,p,g,y,w,M,O,N,z,V){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:w,scale:M,tileSize:this.tileSize,pixelPosMatrix:V,transform:N,params:O,queryPadding:this.queryPadding*z},s,p,g):{}}querySourceFeatures(s,p){let g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;let y=g.loadVTLayers(),w=p&&p.sourceLayer?p.sourceLayer:"",M=y._geojsonTileLayer||y[w];if(!M)return;let O=o.a7(p&&p.filter),{z:N,x:z,y:V}=this.tileID.canonical,G={z:N,x:z,y:V};for(let X=0;X<M.length;X++){let ne=M.feature(X);if(O.needGeometry){let me=o.a8(ne,!0);if(!O.filter(new o.z(this.tileID.overscaledZ),me,this.tileID.canonical))continue}else if(!O.filter(new o.z(this.tileID.overscaledZ),ne))continue;let se=g.getId(ne,w),he=new o.a9(ne,N,z,V,se);he.tile=G,s.push(he)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){let p=this.expirationTime;if(s.cacheControl){let g=o.aa(s.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){let g=Date.now(),y=!1;if(this.expirationTime>g)y=!1;else if(p){if(this.expirationTime<p)y=!0;else{let w=this.expirationTime-p;w?this.expirationTime=g+Math.max(w,3e4):y=!0}}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;let g=this.latestFeatureIndex.loadVTLayers();for(let y in this.buckets){if(!p.style.hasLayer(y))continue;let w=this.buckets[y],M=w.layers[0].sourceLayer||"_geojsonTileLayer",O=g[M],N=s[M];if(!O||!N||Object.keys(N).length===0)continue;w.update(N,O,this.imageAtlas&&this.imageAtlas.patternPositions||{});let z=p&&p.style&&p.style.getLayer(y);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<d.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=d.now()+s}setDependencies(s,p){let g={};for(let y of p)g[y]=!0;this.dependencies[s]=g}hasDependency(s,p){for(let g of s){let y=this.dependencies[g];if(y){for(let w of p)if(y[w])return!0}}return!1}}class ut{constructor(s,p){this.max=s,this.onRemove=p,this.reset()}reset(){for(let s in this.data)for(let p of this.data[s])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(s,p,g){let y=s.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);let w={value:p,timeout:void 0};if(g!==void 0&&(w.timeout=setTimeout(()=>{this.remove(s,w)},g)),this.data[y].push(w),this.order.push(y),this.order.length>this.max){let M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){let p=this.data[s].shift();return p.timeout&&clearTimeout(p.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),p.value}getByKey(s){let p=this.data[s];return p?p[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,p){if(!this.has(s))return this;let g=s.wrapped().key,y=p===void 0?0:this.data[g].indexOf(p),w=this.data[g][y];return this.data[g].splice(y,1),w.timeout&&clearTimeout(w.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(w.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){let p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(s){let p=[];for(let g in this.data)for(let y of this.data[g])s(y.value)||p.push(y);for(let g of p)this.remove(g.value.tileID,g)}}class vr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,p,g){let y=String(p);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][y]=this.stateChanges[s][y]||{},o.e(this.stateChanges[s][y],g),this.deletedStates[s]===null){this.deletedStates[s]={};for(let w in this.state[s])w!==y&&(this.deletedStates[s][w]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][y]===null){this.deletedStates[s][y]={};for(let w in this.state[s][y])g[w]||(this.deletedStates[s][y][w]=null)}else for(let w in g)this.deletedStates[s]&&this.deletedStates[s][y]&&this.deletedStates[s][y][w]===null&&delete this.deletedStates[s][y][w]}removeFeatureState(s,p,g){if(this.deletedStates[s]===null)return;let y=String(p);if(this.deletedStates[s]=this.deletedStates[s]||{},g&&p!==void 0)this.deletedStates[s][y]!==null&&(this.deletedStates[s][y]=this.deletedStates[s][y]||{},this.deletedStates[s][y][g]=null);else if(p!==void 0){if(this.stateChanges[s]&&this.stateChanges[s][y])for(g in this.deletedStates[s][y]={},this.stateChanges[s][y])this.deletedStates[s][y][g]=null;else this.deletedStates[s][y]=null;}else this.deletedStates[s]=null}getState(s,p){let g=String(p),y=o.e({},(this.state[s]||{})[g],(this.stateChanges[s]||{})[g]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){let w=this.deletedStates[s][p];if(w===null)return{};for(let M in w)delete y[M]}return y}initializeTileState(s,p){s.setFeatureState(this.state,p)}coalesceChanges(s,p){let g={};for(let y in this.stateChanges){this.state[y]=this.state[y]||{};let w={};for(let M in this.stateChanges[y])this.state[y][M]||(this.state[y][M]={}),o.e(this.state[y][M],this.stateChanges[y][M]),w[M]=this.state[y][M];g[y]=w}for(let y in this.deletedStates){this.state[y]=this.state[y]||{};let w={};if(this.deletedStates[y]===null)for(let M in this.state[y])w[M]={},this.state[y][M]={};else for(let M in this.deletedStates[y]){if(this.deletedStates[y][M]===null)this.state[y][M]={};else for(let O of Object.keys(this.deletedStates[y][M]))delete this.state[y][M][O];w[M]=this.state[y][M]}g[y]=g[y]||{},o.e(g[y],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(let y in s)s[y].setFeatureState(g,p)}}class zt extends o.E{constructor(s,p,g){super(),this.id=s,this.dispatcher=g,this.on("data",y=>this._dataHandler(y)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,w,M,O)=>{let N=new(Ii(w.type))(y,w,M,O);if(N.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${N.id}`);return N})(s,p,g,this),this._tiles={},this._cache=new ut(0,y=>this._unloadTile(y)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new vr,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let s in this._tiles){let p=this._tiles[s];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,p,g){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,p,g)}catch(y){s.state="errored",y.status!==404?this._source.fire(new o.j(y,{tile:s})):this.update(this.transform,this.terrain)}})}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new o.k("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let p in this._tiles){let g=this._tiles[p];g.upload(s),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(Ai).map(s=>s.key)}getRenderableIds(s){let p=[];for(let g in this._tiles)this._isIdRenderable(g,s)&&p.push(this._tiles[g]);return s?p.sort((g,y)=>{let w=g.tileID,M=y.tileID,O=new o.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle),N=new o.P(M.canonical.x,M.canonical.y)._rotate(this.transform.angle);return w.overscaledZ-M.overscaledZ||N.y-O.y||N.x-O.x}).map(g=>g.tileID.key):p.map(g=>g.tileID).sort(Ai).map(g=>g.key)}hasRenderableParent(s){let p=this.findLoadedParent(s,0);return!!p&&this._isIdRenderable(p.tileID.key)}_isIdRenderable(s,p){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(p||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let s in this._tiles)this._tiles[s].state!=="errored"&&this._reloadTile(s,"reloading")}}_reloadTile(s,p){return o._(this,void 0,void 0,function*(){let g=this._tiles[s];g&&(g.state!=="loading"&&(g.state=p),yield this._loadTile(g,s,p))})}_tileLoaded(s,p,g){s.timeAdded=d.now(),g==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(p,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){let p=this.getRenderableIds();for(let y=0;y<p.length;y++){let w=p[y];if(s.neighboringTiles&&s.neighboringTiles[w]){let M=this.getTileByID(w);g(s,M),g(M,s)}}function g(y,w){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let M=w.tileID.canonical.x-y.tileID.canonical.x,O=w.tileID.canonical.y-y.tileID.canonical.y,N=Math.pow(2,y.tileID.canonical.z),z=w.tileID.key;M===0&&O===0||Math.abs(O)>1||(Math.abs(M)>1&&(Math.abs(M+N)===1?M+=N:Math.abs(M-N)===1&&(M-=N)),w.dem&&y.dem&&(y.dem.backfillBorder(w.dem,M,O),y.neighboringTiles&&y.neighboringTiles[z]&&(y.neighboringTiles[z].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,p,g,y){for(let w in this._tiles){let M=this._tiles[w];if(y[w]||!M.hasData()||M.tileID.overscaledZ<=p||M.tileID.overscaledZ>g)continue;let O=M.tileID;for(;M&&M.tileID.overscaledZ>p+1;){let z=M.tileID.scaledTo(M.tileID.overscaledZ-1);M=this._tiles[z.key],M&&M.hasData()&&(O=z)}let N=O;for(;N.overscaledZ>p;)if(N=N.scaledTo(N.overscaledZ-1),s[N.key]){y[O.key]=O;break}}}findLoadedParent(s,p){if(s.key in this._loadedParentTiles){let g=this._loadedParentTiles[s.key];return g&&g.tileID.overscaledZ>=p?g:null}for(let g=s.overscaledZ-1;g>=p;g--){let y=s.scaledTo(g),w=this._getLoadedTile(y);if(w)return w}}findLoadedSibling(s){return this._getLoadedTile(s)}_getLoadedTile(s){let p=this._tiles[s.key];return p&&p.hasData()?p:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){let p=Math.ceil(s.width/this._source.tileSize)+1,g=Math.ceil(s.height/this._source.tileSize)+1,y=Math.floor(p*g*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(w)}handleWrapJump(s){let p=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,p){let g={};for(let y in this._tiles){let w=this._tiles[y];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+p),g[w.tileID.key]=w}this._tiles=g;for(let y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(let y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}_updateCoveredAndRetainedTiles(s,p,g,y,w,M){let O={},N={},z=Object.keys(s),V=d.now();for(let G of z){let X=s[G],ne=this._tiles[G];if(!ne||ne.fadeEndTime!==0&&ne.fadeEndTime<=V)continue;let se=this.findLoadedParent(X,p),he=this.findLoadedSibling(X),me=se||he||null;me&&(this._addTile(me.tileID),O[me.tileID.key]=me.tileID),N[G]=X}this._retainLoadedChildren(N,y,g,s);for(let G in O)s[G]||(this._coveredTiles[G]=!0,s[G]=O[G]);if(M){let G={},X={};for(let ne of w)this._tiles[ne.key].hasData()?G[ne.key]=ne:X[ne.key]=ne;for(let ne in X){let se=X[ne].children(this._source.maxzoom);this._tiles[se[0].key]&&this._tiles[se[1].key]&&this._tiles[se[2].key]&&this._tiles[se[3].key]&&(G[se[0].key]=s[se[0].key]=se[0],G[se[1].key]=s[se[1].key]=se[1],G[se[2].key]=s[se[2].key]=se[2],G[se[3].key]=s[se[3].key]=se[3],delete X[ne])}for(let ne in X){let se=X[ne],he=this.findLoadedParent(se,this._source.minzoom),me=this.findLoadedSibling(se),ge=he||me||null;if(ge){G[ge.tileID.key]=s[ge.tileID.key]=ge.tileID;for(let ye in G)G[ye].isChildOf(ge.tileID)&&delete G[ye]}}for(let ne in this._tiles)G[ne]||(this._coveredTiles[ne]=!0)}}update(s,p){if(!this._sourceLoaded||this._paused)return;let g;this.transform=s,this.terrain=p,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(V=>new o.S(V.canonical.z,V.wrap,V.canonical.z,V.canonical.x,V.canonical.y)):(g=s.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p}),this._source.hasTile&&(g=g.filter(V=>this._source.hasTile(V)))):g=[];let y=s.coveringZoomLevel(this._source),w=Math.max(y-zt.maxOverzooming,this._source.minzoom),M=Math.max(y+zt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let V={};for(let G of g)if(G.canonical.z>this._source.minzoom){let X=G.scaledTo(G.canonical.z-1);V[X.key]=X;let ne=G.scaledTo(Math.max(this._source.minzoom,Math.min(G.canonical.z,5)));V[ne.key]=ne}g=g.concat(Object.values(V))}let O=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,O&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let N=this._updateRetainedTiles(g,y);hn(this._source.type)&&this._updateCoveredAndRetainedTiles(N,w,M,y,g,p);for(let V in N)this._tiles[V].clearFadeHold();let z=o.ab(this._tiles,N);for(let V of z){let G=this._tiles[V];G.hasSymbolBuckets&&!G.holdingForFade()?G.setHoldDuration(this.map._fadeDuration):G.hasSymbolBuckets&&!G.symbolFadeFinished()||this._removeTile(V)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,p){var g;let y={},w={},M=Math.max(p-zt.maxOverzooming,this._source.minzoom),O=Math.max(p+zt.maxUnderzooming,this._source.minzoom),N={};for(let z of s){let V=this._addTile(z);y[z.key]=z,V.hasData()||p<this._source.maxzoom&&(N[z.key]=z)}this._retainLoadedChildren(N,p,O,y);for(let z of s){let V=this._tiles[z.key];if(V.hasData())continue;if(p+1>this._source.maxzoom){let X=z.children(this._source.maxzoom)[0],ne=this.getTile(X);if(ne&&ne.hasData()){y[X.key]=X;continue}}else{let X=z.children(this._source.maxzoom);if(y[X[0].key]&&y[X[1].key]&&y[X[2].key]&&y[X[3].key])continue}let G=V.wasRequested();for(let X=z.overscaledZ-1;X>=M;--X){let ne=z.scaledTo(X);if(w[ne.key])break;if(w[ne.key]=!0,V=this.getTile(ne),!V&&G&&(V=this._addTile(ne)),V){let se=V.hasData();if((se||!(!((g=this.map)===null||g===void 0)&&g.cancelPendingTileRequestsWhileZooming)||G)&&(y[ne.key]=ne),G=V.wasRequested(),se)break}}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let s in this._tiles){let p=[],g,y=this._tiles[s].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){g=this._loadedParentTiles[y.key];break}p.push(y.key);let w=y.scaledTo(y.overscaledZ-1);if(g=this._getLoadedTile(w),g)break;y=w}for(let w of p)this._loadedParentTiles[w]=g}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let s in this._tiles){let p=this._tiles[s].tileID,g=this._getLoadedTile(p);this._loadedSiblingTiles[p.key]=g}}_addTile(s){let p=this._tiles[s.key];if(p)return p;p=this._cache.getAndRemove(s),p&&(this._setTileReloadTimer(s.key,p),p.tileID=s,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,p)));let g=p;return p||(p=new Ti(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(p,s.key,p.state)),p.uses++,this._tiles[s.key]=p,g||this._source.fire(new o.k("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(s,p){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);let g=p.getExpiryTimeout();g&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},g))}_removeTile(s){let p=this._tiles[s];p&&(p.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(s){let p=s.sourceDataType;s.dataType==="source"&&p==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&p==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,p,g){let y=[],w=this.transform;if(!w)return y;let M=g?w.getCameraQueryGeometry(s):s,O=s.map(se=>w.pointCoordinate(se,this.terrain)),N=M.map(se=>w.pointCoordinate(se,this.terrain)),z=this.getIds(),V=1/0,G=1/0,X=-1/0,ne=-1/0;for(let se of N)V=Math.min(V,se.x),G=Math.min(G,se.y),X=Math.max(X,se.x),ne=Math.max(ne,se.y);for(let se=0;se<z.length;se++){let he=this._tiles[z[se]];if(he.holdingForFade())continue;let me=he.tileID,ge=Math.pow(2,w.zoom-he.tileID.overscaledZ),ye=p*he.queryPadding*o.X/he.tileSize/ge,ce=[me.getTilePoint(new o.Z(V,G)),me.getTilePoint(new o.Z(X,ne))];if(ce[0].x-ye<o.X&&ce[0].y-ye<o.X&&ce[1].x+ye>=0&&ce[1].y+ye>=0){let Ce=O.map(je=>me.getTilePoint(je)),De=N.map(je=>me.getTilePoint(je));y.push({tile:he,tileID:me,queryGeometry:Ce,cameraQueryGeometry:De,scale:ge})}}return y}getVisibleCoordinates(s){let p=this.getRenderableIds(s).map(g=>this._tiles[g].tileID);for(let g of p)g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped());return p}hasTransition(){if(this._source.hasTransition())return!0;if(hn(this._source.type)){let s=d.now();for(let p in this._tiles)if(this._tiles[p].fadeEndTime>=s)return!0}return!1}setFeatureState(s,p,g){this._state.updateState(s=s||"_geojsonTileLayer",p,g)}removeFeatureState(s,p,g){this._state.removeFeatureState(s=s||"_geojsonTileLayer",p,g)}getFeatureState(s,p){return this._state.getState(s=s||"_geojsonTileLayer",p)}setDependencies(s,p,g){let y=this._tiles[s];y&&y.setDependencies(p,g)}reloadTilesForDependencies(s,p){for(let g in this._tiles)this._tiles[g].hasDependency(s,p)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(s,p))}}function Ai(b,s){let p=Math.abs(2*b.wrap)-+(b.wrap<0),g=Math.abs(2*s.wrap)-+(s.wrap<0);return b.overscaledZ-s.overscaledZ||g-p||s.canonical.y-b.canonical.y||s.canonical.x-b.canonical.x}function hn(b){return b==="raster"||b==="image"||b==="video"}zt.maxOverzooming=10,zt.maxUnderzooming=3;class Ee{constructor(s,p){this.reset(s,p)}reset(s,p){this.points=s||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=o.ac(s,0,1);let p=1,g=this._distances[p],y=s*this.paddedLength+this.padding;for(;g<y&&p<this._distances.length;)g=this._distances[++p];let w=p-1,M=this._distances[w],O=g-M,N=O>0?(y-M)/O:0;return this.points[w].mult(1-N).add(this.points[p].mult(N))}}function Oe(b,s){let p=!0;return b==="always"||b!=="never"&&s!=="never"||(p=!1),p}class it{constructor(s,p,g){let y=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(s/g),this.yCellCount=Math.ceil(p/g);for(let M=0;M<this.xCellCount*this.yCellCount;M++)y.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=p,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,p,g,y,w){this._forEachCell(p,g,y,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(y),this.bboxes.push(w)}insertCircle(s,p,g,y){this._forEachCell(p-y,g-y,p+y,g+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(p),this.circles.push(g),this.circles.push(y)}_insertBoxCell(s,p,g,y,w,M){this.boxCells[w].push(M)}_insertCircleCell(s,p,g,y,w,M){this.circleCells[w].push(M)}_query(s,p,g,y,w,M,O){if(g<0||s>this.width||y<0||p>this.height)return[];let N=[];if(s<=0&&p<=0&&this.width<=g&&this.height<=y){if(w)return[{key:null,x1:s,y1:p,x2:g,y2:y}];for(let z=0;z<this.boxKeys.length;z++)N.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){let V=this.circles[3*z],G=this.circles[3*z+1],X=this.circles[3*z+2];N.push({key:this.circleKeys[z],x1:V-X,y1:G-X,x2:V+X,y2:G+X})}}else this._forEachCell(s,p,g,y,this._queryCell,N,{hitTest:w,overlapMode:M,seenUids:{box:{},circle:{}}},O);return N}query(s,p,g,y){return this._query(s,p,g,y,!1,null)}hitTest(s,p,g,y,w,M){return this._query(s,p,g,y,!0,w,M).length>0}hitTestCircle(s,p,g,y,w){let M=s-g,O=s+g,N=p-g,z=p+g;if(O<0||M>this.width||z<0||N>this.height)return!1;let V=[];return this._forEachCell(M,N,O,z,this._queryCellCircle,V,{hitTest:!0,overlapMode:y,circle:{x:s,y:p,radius:g},seenUids:{box:{},circle:{}}},w),V.length>0}_queryCell(s,p,g,y,w,M,O,N){let{seenUids:z,hitTest:V,overlapMode:G}=O,X=this.boxCells[w];if(X!==null){let se=this.bboxes;for(let he of X)if(!z.box[he]){z.box[he]=!0;let me=4*he,ge=this.boxKeys[he];if(s<=se[me+2]&&p<=se[me+3]&&g>=se[me+0]&&y>=se[me+1]&&(!N||N(ge))&&(!V||!Oe(G,ge.overlapMode))&&(M.push({key:ge,x1:se[me],y1:se[me+1],x2:se[me+2],y2:se[me+3]}),V))return!0}}let ne=this.circleCells[w];if(ne!==null){let se=this.circles;for(let he of ne)if(!z.circle[he]){z.circle[he]=!0;let me=3*he,ge=this.circleKeys[he];if(this._circleAndRectCollide(se[me],se[me+1],se[me+2],s,p,g,y)&&(!N||N(ge))&&(!V||!Oe(G,ge.overlapMode))){let ye=se[me],ce=se[me+1],Ce=se[me+2];if(M.push({key:ge,x1:ye-Ce,y1:ce-Ce,x2:ye+Ce,y2:ce+Ce}),V)return!0}}}return!1}_queryCellCircle(s,p,g,y,w,M,O,N){let{circle:z,seenUids:V,overlapMode:G}=O,X=this.boxCells[w];if(X!==null){let se=this.bboxes;for(let he of X)if(!V.box[he]){V.box[he]=!0;let me=4*he,ge=this.boxKeys[he];if(this._circleAndRectCollide(z.x,z.y,z.radius,se[me+0],se[me+1],se[me+2],se[me+3])&&(!N||N(ge))&&!Oe(G,ge.overlapMode))return M.push(!0),!0}}let ne=this.circleCells[w];if(ne!==null){let se=this.circles;for(let he of ne)if(!V.circle[he]){V.circle[he]=!0;let me=3*he,ge=this.circleKeys[he];if(this._circlesCollide(se[me],se[me+1],se[me+2],z.x,z.y,z.radius)&&(!N||N(ge))&&!Oe(G,ge.overlapMode))return M.push(!0),!0}}}_forEachCell(s,p,g,y,w,M,O,N){let z=this._convertToXCellCoord(s),V=this._convertToYCellCoord(p),G=this._convertToXCellCoord(g),X=this._convertToYCellCoord(y);for(let ne=z;ne<=G;ne++)for(let se=V;se<=X;se++)if(w.call(this,s,p,g,y,this.xCellCount*se+ne,M,O,N))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,p,g,y,w,M){let O=y-s,N=w-p,z=g+M;return z*z>O*O+N*N}_circleAndRectCollide(s,p,g,y,w,M,O){let N=(M-y)/2,z=Math.abs(s-(y+N));if(z>N+g)return!1;let V=(O-w)/2,G=Math.abs(p-(w+V));if(G>V+g)return!1;if(z<=N||G<=V)return!0;let X=z-N,ne=G-V;return X*X+ne*ne<=g*g}}function bt(b,s,p,g,y){let w=o.H();return s?(o.K(w,w,[1/y,1/y,1]),p||o.ad(w,w,g.angle)):o.L(w,g.labelPlaneMatrix,b),w}function vt(b,s,p,g,y){if(s){let w=o.ae(b);return o.K(w,w,[y,y,1]),p||o.ad(w,w,-g.angle),w}return g.glCoordMatrix}function oe(b,s,p,g){let y;g?(y=[b,s,g(b,s),1],o.af(y,y,p)):(y=[b,s,0,1],Nr(y,y,p));let w=y[3];return{point:new o.P(y[0]/w,y[1]/w),signedDistanceFromCamera:w,isOccluded:!1}}function W(b,s){return .5+b/s*.5}function H(b,s){return b.x>=-s[0]&&b.x<=s[0]&&b.y>=-s[1]&&b.y<=s[1]}function K(b,s,p,g,y,w,M,O,N,z,V,G,X,ne,se){let he=g?b.textSizeData:b.iconSizeData,me=o.ag(he,p.transform.zoom),ge=[256/p.width*2+1,256/p.height*2+1],ye=g?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;ye.clear();let ce=b.lineVertexArray,Ce=g?b.text.placedSymbolArray:b.icon.placedSymbolArray,De=p.transform.width/p.transform.height,je=!1;for(let et=0;et<Ce.length;et++){let lt=Ce.get(et);if(lt.hidden||lt.writingMode===o.ah.vertical&&!je){Xt(lt.numGlyphs,ye);continue}je=!1;let St=oe(lt.anchorX,lt.anchorY,s,se);if(!H(St.point,ge)){Xt(lt.numGlyphs,ye);continue}let Ot=W(p.transform.cameraToCenterDistance,St.signedDistanceFromCamera),mt=o.ai(he,me,lt),pt=M?mt/Ot:mt*Ot,Gt={getElevation:se,labelPlaneMatrix:y,lineVertexArray:ce,pitchWithMap:M,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:z,tileAnchorPoint:new o.P(lt.anchorX,lt.anchorY),unwrappedTileID:V,width:G,height:X,translation:ne},gr=xe(Gt,lt,pt,!1,O,s,w,b.glyphOffsetArray,ye,De,N);je=gr.useVertical,(gr.notEnoughRoom||je||gr.needsFlipping&&xe(Gt,lt,pt,!0,O,s,w,b.glyphOffsetArray,ye,De,N).notEnoughRoom)&&Xt(lt.numGlyphs,ye)}g?b.text.dynamicLayoutVertexBuffer.updateData(ye):b.icon.dynamicLayoutVertexBuffer.updateData(ye)}function ae(b,s,p,g,y,w,M,O){let N=w.glyphStartIndex+w.numGlyphs,z=w.lineStartIndex,V=w.lineStartIndex+w.lineLength,G=s.getoffsetX(w.glyphStartIndex),X=s.getoffsetX(N-1),ne=st(b*G,p,g,y,w.segment,z,V,O,M);if(!ne)return null;let se=st(b*X,p,g,y,w.segment,z,V,O,M);return se?O.projectionCache.anyProjectionOccluded?null:{first:ne,last:se}:null}function ve(b,s,p,g){return b===o.ah.horizontal&&Math.abs(p.y-s.y)>Math.abs(p.x-s.x)*g?{useVertical:!0}:(b===o.ah.vertical?s.y<p.y:s.x>p.x)?{needsFlipping:!0}:null}function xe(b,s,p,g,y,w,M,O,N,z,V){let G=p/24,X=s.lineOffsetX*G,ne=s.lineOffsetY*G,se;if(s.numGlyphs>1){let he=s.glyphStartIndex+s.numGlyphs,me=s.lineStartIndex,ge=s.lineStartIndex+s.lineLength,ye=ae(G,O,X,ne,g,s,V,b);if(!ye)return{notEnoughRoom:!0};let ce=oe(ye.first.point.x,ye.first.point.y,M,b.getElevation).point,Ce=oe(ye.last.point.x,ye.last.point.y,M,b.getElevation).point;if(y&&!g){let De=ve(s.writingMode,ce,Ce,z);if(De)return De}se=[ye.first];for(let De=s.glyphStartIndex+1;De<he-1;De++)se.push(st(G*O.getoffsetX(De),X,ne,g,s.segment,me,ge,b,V));se.push(ye.last)}else{if(y&&!g){let me=oe(b.tileAnchorPoint.x,b.tileAnchorPoint.y,w,b.getElevation).point,ge=s.lineStartIndex+s.segment+1,ye=new o.P(b.lineVertexArray.getx(ge),b.lineVertexArray.gety(ge)),ce=oe(ye.x,ye.y,w,b.getElevation),Ce=ce.signedDistanceFromCamera>0?ce.point:function(je,et,lt,St,Ot,mt){return Ie(je,et,lt,1,Ot,mt)}(b.tileAnchorPoint,ye,me,0,w,b),De=ve(s.writingMode,me,Ce,z);if(De)return De}let he=st(G*O.getoffsetX(s.glyphStartIndex),X,ne,g,s.segment,s.lineStartIndex,s.lineStartIndex+s.lineLength,b,V);if(!he||b.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};se=[he]}for(let he of se)o.aj(N,he.point,he.angle);return{}}function Ie(b,s,p,g,y,w){let M=b.add(b.sub(s)._unit()),O=y!==void 0?oe(M.x,M.y,y,w.getElevation).point:Be(M.x,M.y,w).point,N=p.sub(O);return p.add(N._mult(g/N.mag()))}function pe(b,s,p){let g=s.projectionCache;if(g.projections[b])return g.projections[b];let y=new o.P(s.lineVertexArray.getx(b),s.lineVertexArray.gety(b)),w=Be(y.x,y.y,s);if(w.signedDistanceFromCamera>0)return g.projections[b]=w.point,g.anyProjectionOccluded=g.anyProjectionOccluded||w.isOccluded,w.point;let M=b-p.direction;return function(O,N,z,V,G){return Ie(O,N,z,V,void 0,G)}(p.distanceFromAnchor===0?s.tileAnchorPoint:new o.P(s.lineVertexArray.getx(M),s.lineVertexArray.gety(M)),y,p.previousVertex,p.absOffsetX-p.distanceFromAnchor+1,s)}function Be(b,s,p){let g=b+p.translation[0],y=s+p.translation[1],w;return!p.pitchWithMap&&p.projection.useSpecialProjectionForSymbols?(w=p.projection.projectTileCoordinates(g,y,p.unwrappedTileID,p.getElevation),w.point.x=(.5*w.point.x+.5)*p.width,w.point.y=(.5*-w.point.y+.5)*p.height):(w=oe(g,y,p.labelPlaneMatrix,p.getElevation),w.isOccluded=!1),w}function Je(b,s,p){return b._unit()._perp()._mult(s*p)}function Ue(b,s,p,g,y,w,M,O,N){if(O.projectionCache.offsets[b])return O.projectionCache.offsets[b];let z=p.add(s);if(b+N.direction<g||b+N.direction>=y)return O.projectionCache.offsets[b]=z,z;let V=pe(b+N.direction,O,N),G=Je(V.sub(p),M,N.direction),X=p.add(G),ne=V.add(G);return O.projectionCache.offsets[b]=o.ak(w,z,X,ne)||z,O.projectionCache.offsets[b]}function st(b,s,p,g,y,w,M,O,N){let z=g?b-s:b+s,V=z>0?1:-1,G=0;g&&(V*=-1,G=Math.PI),V<0&&(G+=Math.PI);let X,ne=V>0?w+y:w+y+1;O.projectionCache.cachedAnchorPoint?X=O.projectionCache.cachedAnchorPoint:(X=Be(O.tileAnchorPoint.x,O.tileAnchorPoint.y,O).point,O.projectionCache.cachedAnchorPoint=X);let se,he,me=X,ge=X,ye=0,ce=0,Ce=Math.abs(z),De=[],je;for(;ye+ce<=Ce;){if(ne+=V,ne<w||ne>=M)return null;ye+=ce,ge=me,he=se;let St={absOffsetX:Ce,direction:V,distanceFromAnchor:ye,previousVertex:ge};if(me=pe(ne,O,St),p===0)De.push(ge),je=me.sub(ge);else{let Ot,mt=me.sub(ge);Ot=mt.mag()===0?Je(pe(ne+V,O,St).sub(me),p,V):Je(mt,p,V),he||(he=ge.add(Ot)),se=Ue(ne,Ot,me,w,M,he,p,O,St),De.push(he),je=se.sub(he)}ce=je.mag()}let et=je._mult((Ce-ye)/ce)._add(he||ge),lt=G+Math.atan2(me.y-ge.y,me.x-ge.x);return De.push(et),{point:et,angle:N?lt:0,path:De}}let Bt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Xt(b,s){for(let p=0;p<b;p++){let g=s.length;s.resize(g+4),s.float32.set(Bt,3*g)}}function Nr(b,s,p){let g=s[0],y=s[1];return b[0]=p[0]*g+p[4]*y+p[12],b[1]=p[1]*g+p[5]*y+p[13],b[3]=p[3]*g+p[7]*y+p[15],b}let cr=100;class Fr{constructor(s,p,g=new it(s.width+200,s.height+200,25),y=new it(s.width+200,s.height+200,25)){this.transform=s,this.mapProjection=p,this.grid=g,this.ignoredGrid=y,this.pitchFactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+cr,this.screenBottomBoundary=s.height+cr,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,p,g,y,w,M,O,N,z,V,G){let X=s.anchorPointX+N[0],ne=s.anchorPointY+N[1],se=this.projectAndGetPerspectiveRatio(y,X,ne,w,V),he=g*se.perspectiveRatio,me;if(M||O)me=this._projectCollisionBox(s,he,y,w,M,O,N,se,V,G);else{let De=se.point.x+(G?G.x*he:0),je=se.point.y+(G?G.y*he:0);me={allPointsOccluded:!1,box:[De+s.x1*he,je+s.y1*he,De+s.x2*he,je+s.y2*he]}}let[ge,ye,ce,Ce]=me.box;return this.mapProjection.useSpecialProjectionForSymbols&&(M?me.allPointsOccluded:this.mapProjection.isOccluded(X,ne,w))||se.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(ge,ye,ce,Ce)||p!=="always"&&this.grid.hitTest(ge,ye,ce,Ce,p,z)?{box:[ge,ye,ce,Ce],placeable:!1,offscreen:!1}:{box:[ge,ye,ce,Ce],placeable:!0,offscreen:this.isOffscreen(ge,ye,ce,Ce)}}placeCollisionCircles(s,p,g,y,w,M,O,N,z,V,G,X,ne,se,he,me){let ge=[],ye=new o.P(p.anchorX,p.anchorY),ce=this.getPerspectiveRatio(M,ye.x,ye.y,O,me),Ce=(G?w/ce:w*ce)/o.ap,De={getElevation:me,labelPlaneMatrix:N,lineVertexArray:g,pitchWithMap:G,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ye,unwrappedTileID:O,width:this.transform.width,height:this.transform.height,translation:he},je=ae(Ce,y,p.lineOffsetX*Ce,p.lineOffsetY*Ce,!1,p,!1,De),et=!1,lt=!1,St=!0;if(je){let Ot=.5*ne*ce+se,mt=new o.P(-100,-100),pt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Gt=new Ee,gr=je.first,gt=je.last,Ct=[];for(let Mr=gr.path.length-1;Mr>=1;Mr--)Ct.push(gr.path[Mr]);for(let Mr=1;Mr<gt.path.length;Mr++)Ct.push(gt.path[Mr]);let dr=2.5*Ot;if(z){let Mr=this.projectPathToScreenSpace(Ct,De,z);Ct=Mr.some(Ur=>Ur.signedDistanceFromCamera<=0)?[]:Mr.map(Ur=>Ur.point)}let Gn=[];if(Ct.length>0){let Mr=Ct[0].clone(),Ur=Ct[0].clone();for(let $n=1;$n<Ct.length;$n++)Mr.x=Math.min(Mr.x,Ct[$n].x),Mr.y=Math.min(Mr.y,Ct[$n].y),Ur.x=Math.max(Ur.x,Ct[$n].x),Ur.y=Math.max(Ur.y,Ct[$n].y);Gn=Mr.x>=mt.x&&Ur.x<=pt.x&&Mr.y>=mt.y&&Ur.y<=pt.y?[Ct]:Ur.x<mt.x||Mr.x>pt.x||Ur.y<mt.y||Mr.y>pt.y?[]:o.al([Ct],mt.x,mt.y,pt.x,pt.y)}for(let Mr of Gn){Gt.reset(Mr,.25*Ot);let Ur=0;Ur=Gt.length<=.5*Ot?1:Math.ceil(Gt.paddedLength/dr)+1;for(let $n=0;$n<Ur;$n++){let Eo=$n/Math.max(Ur-1,1),Xs=Gt.lerp(Eo),Hn=Xs.x+cr,la=Xs.y+cr;ge.push(Hn,la,Ot,0);let zo=Hn-Ot,Io=la-Ot,Bo=Hn+Ot,Tl=la+Ot;if(St=St&&this.isOffscreen(zo,Io,Bo,Tl),lt=lt||this.isInsideGrid(zo,Io,Bo,Tl),s!=="always"&&this.grid.hitTestCircle(Hn,la,Ot,s,X)&&(et=!0,!V))return{circles:[],offscreen:!1,collisionDetected:et}}}}return{circles:!V&&et||!lt||ce<this.perspectiveRatioCutoff?[]:ge,offscreen:St,collisionDetected:et}}projectPathToScreenSpace(s,p,g){return s.map(y=>oe(y.x,y.y,g,p.getElevation))}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let p=[],g=1/0,y=1/0,w=-1/0,M=-1/0;for(let V of s){let G=new o.P(V.x+cr,V.y+cr);g=Math.min(g,G.x),y=Math.min(y,G.y),w=Math.max(w,G.x),M=Math.max(M,G.y),p.push(G)}let O=this.grid.query(g,y,w,M).concat(this.ignoredGrid.query(g,y,w,M)),N={},z={};for(let V of O){let G=V.key;if(N[G.bucketInstanceId]===void 0&&(N[G.bucketInstanceId]={}),N[G.bucketInstanceId][G.featureIndex])continue;let X=[new o.P(V.x1,V.y1),new o.P(V.x2,V.y1),new o.P(V.x2,V.y2),new o.P(V.x1,V.y2)];o.am(p,X)&&(N[G.bucketInstanceId][G.featureIndex]=!0,z[G.bucketInstanceId]===void 0&&(z[G.bucketInstanceId]=[]),z[G.bucketInstanceId].push(G.featureIndex))}return z}insertCollisionBox(s,p,g,y,w,M){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:w,collisionGroupID:M,overlapMode:p},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,p,g,y,w,M){let O=g?this.ignoredGrid:this.grid,N={bucketInstanceId:y,featureIndex:w,collisionGroupID:M,overlapMode:p};for(let z=0;z<s.length;z+=4)O.insertCircle(N,s[z],s[z+1],s[z+2])}projectAndGetPerspectiveRatio(s,p,g,y,w){let M;w?(M=[p,g,w(p,g),1],o.af(M,M,s)):(M=[p,g,0,1],Nr(M,M,s));let O=M[3];return{point:new o.P((M[0]/O+1)/2*this.transform.width+cr,(-M[1]/O+1)/2*this.transform.height+cr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/O*.5,isOccluded:!1,signedDistanceFromCamera:O}}getPerspectiveRatio(s,p,g,y,w){let M=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(p,g,y,w):oe(p,g,s,w);return .5+this.transform.cameraToCenterDistance/M.signedDistanceFromCamera*.5}isOffscreen(s,p,g,y){return g<cr||s>=this.screenRightBoundary||y<cr||p>this.screenBottomBoundary}isInsideGrid(s,p,g,y){return g>=0&&s<this.gridRightBoundary&&y>=0&&p<this.gridBottomBoundary}getViewportMatrix(){let s=o.an([]);return o.J(s,s,[-100,-100,0]),s}_projectCollisionBox(s,p,g,y,w,M,O,N,z,V){let G=new o.P(1,0),X=new o.P(0,1),ne=new o.P(s.anchorPointX+O[0],s.anchorPointY+O[1]);if(M&&!w){let St=this.projectAndGetPerspectiveRatio(g,ne.x+1,ne.y,y,z).point.sub(N.point).unit(),Ot=Math.atan(St.y/St.x)+(St.x<0?Math.PI:0),mt=Math.sin(Ot),pt=Math.cos(Ot);G=new o.P(pt,mt),X=new o.P(-mt,pt)}else if(!M&&w){let St=-this.transform.angle,Ot=Math.sin(St),mt=Math.cos(St);G=new o.P(mt,Ot),X=new o.P(-Ot,mt)}let se=N.point,he=p;if(w){se=ne;let St=this.transform.zoom-Math.floor(this.transform.zoom);he=Math.pow(2,-St),he*=this.mapProjection.getPitchedTextCorrection(this.transform,ne,y),V||(he*=o.ac(.5+N.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}V&&(se=se.add(G.mult(V.x*he)).add(X.mult(V.y*he)));let me=s.x1*he,ge=s.x2*he,ye=(me+ge)/2,ce=s.y1*he,Ce=s.y2*he,De=(ce+Ce)/2,je=[{offsetX:me,offsetY:ce},{offsetX:ye,offsetY:ce},{offsetX:ge,offsetY:ce},{offsetX:ge,offsetY:De},{offsetX:ge,offsetY:Ce},{offsetX:ye,offsetY:Ce},{offsetX:me,offsetY:Ce},{offsetX:me,offsetY:De}],et=[];for(let{offsetX:St,offsetY:Ot}of je)et.push(new o.P(se.x+G.x*St+X.x*Ot,se.y+G.y*St+X.y*Ot));let lt=!1;if(w){let St=et.map(Ot=>this.projectAndGetPerspectiveRatio(g,Ot.x,Ot.y,y,z));lt=St.some(Ot=>!Ot.isOccluded),et=St.map(Ot=>Ot.point)}else lt=!0;return{box:o.ao(et),allPointsOccluded:!lt}}}function Cr(b,s,p){return s*(o.X/(b.tileSize*Math.pow(2,p-b.tileID.overscaledZ)))}class Xr{constructor(s,p,g,y){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?p:-p))):y&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Kr{constructor(s,p,g,y,w){this.text=new Xr(s?s.text:null,p,g,w),this.icon=new Xr(s?s.icon:null,p,y,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Sr{constructor(s,p,g){this.text=s,this.icon=p,this.skipFade=g}}class un{constructor(){this.invProjMatrix=o.H(),this.viewportMatrix=o.H(),this.circles=[]}}class Cn{constructor(s,p,g,y,w){this.bucketInstanceId=s,this.featureIndex=p,this.sourceLayerIndex=g,this.bucketIndex=y,this.tileID=w}}class Ji{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){let p=++this.maxGroupID;this.collisionGroups[s]={ID:p,predicate:g=>g.collisionGroupID===p}}return this.collisionGroups[s]}}function lo(b,s,p,g,y){let{horizontalAlign:w,verticalAlign:M}=o.au(b);return new o.P(-(w-.5)*s+g[0]*y,-(M-.5)*p+g[1]*y)}class Fo{constructor(s,p,g,y,w,M){this.transform=s.clone(),this.terrain=g,this.collisionIndex=new Fr(this.transform,p),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new Ji(w),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=M,M&&(M.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){let p=this.terrain;return p?(g,y)=>p.getElevation(s,g,y):null}getBucketParts(s,p,g,y){let w=g.getBucket(p),M=g.latestFeatureIndex;if(!w||!M||p.id!==w.layerIds[0])return;let O=g.collisionBoxArray,N=w.layers[0].layout,z=w.layers[0].paint,V=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),G=g.tileSize/o.X,X=g.tileID.toUnwrapped(),ne=this.transform.calculatePosMatrix(X),se=N.get("text-pitch-alignment")==="map",he=N.get("text-rotation-alignment")==="map",me=Cr(g,1,this.transform.zoom),ge=this.collisionIndex.mapProjection.translatePosition(this.transform,g,z.get("text-translate"),z.get("text-translate-anchor")),ye=this.collisionIndex.mapProjection.translatePosition(this.transform,g,z.get("icon-translate"),z.get("icon-translate-anchor")),ce=bt(ne,se,he,this.transform,me),Ce=null;if(se){let je=vt(ne,se,he,this.transform,me);Ce=o.L([],this.transform.labelPlaneMatrix,je)}this.retainedQueryData[w.bucketInstanceId]=new Cn(w.bucketInstanceId,M,w.sourceLayerIndex,w.index,g.tileID);let De={bucket:w,layout:N,translationText:ge,translationIcon:ye,posMatrix:ne,unwrappedTileID:X,textLabelPlaneMatrix:ce,labelToScreenMatrix:Ce,scale:V,textPixelRatio:G,holdingForFade:g.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:o.ag(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(y)for(let je of w.sortKeyRanges){let{sortKey:et,symbolInstanceStart:lt,symbolInstanceEnd:St}=je;s.push({sortKey:et,symbolInstanceStart:lt,symbolInstanceEnd:St,parameters:De})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:De})}attemptAnchorPlacement(s,p,g,y,w,M,O,N,z,V,G,X,ne,se,he,me,ge,ye,ce){let Ce=o.aq[s.textAnchor],De=[s.textOffset0,s.textOffset1],je=lo(Ce,g,y,De,w),et=this.collisionIndex.placeCollisionBox(p,X,N,z,V,O,M,me,G.predicate,ce,je);if((!ye||this.collisionIndex.placeCollisionBox(ye,X,N,z,V,O,M,ge,G.predicate,ce,je).placeable)&&et.placeable){let lt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ne.crossTileID]&&this.prevPlacement.placements[ne.crossTileID]&&this.prevPlacement.placements[ne.crossTileID].text&&(lt=this.prevPlacement.variableOffsets[ne.crossTileID].anchor),ne.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ne.crossTileID]={textOffset:De,width:g,height:y,anchor:Ce,textBoxScale:w,prevAnchor:lt},this.markUsedJustification(se,Ce,ne,he),se.allowVerticalPlacement&&(this.markUsedOrientation(se,he,ne),this.placedOrientations[ne.crossTileID]=he),{shift:je,placedGlyphBoxes:et}}}placeLayerBucketPart(s,p,g){let{bucket:y,layout:w,translationText:M,translationIcon:O,posMatrix:N,unwrappedTileID:z,textLabelPlaneMatrix:V,labelToScreenMatrix:G,textPixelRatio:X,holdingForFade:ne,collisionBoxArray:se,partiallyEvaluatedTextSize:he,collisionGroup:me}=s.parameters,ge=w.get("text-optional"),ye=w.get("icon-optional"),ce=o.ar(w,"text-overlap","text-allow-overlap"),Ce=ce==="always",De=o.ar(w,"icon-overlap","icon-allow-overlap"),je=De==="always",et=w.get("text-rotation-alignment")==="map",lt=w.get("text-pitch-alignment")==="map",St=w.get("icon-text-fit")!=="none",Ot=w.get("symbol-z-order")==="viewport-y",mt=Ce&&(je||!y.hasIconData()||ye),pt=je&&(Ce||!y.hasTextData()||ge);!y.collisionArrays&&se&&y.deserializeCollisionBoxes(se);let Gt=this._getTerrainElevationFunc(this.retainedQueryData[y.bucketInstanceId].tileID),gr=(gt,Ct,dr)=>{var Gn,Mr;if(p[gt.crossTileID])return;if(ne)return void(this.placements[gt.crossTileID]=new Sr(!1,!1,!1));let Ur=!1,$n=!1,Eo=!0,Xs=null,Hn={box:null,placeable:!1,offscreen:null},la={box:null,placeable:!1,offscreen:null},zo=null,Io=null,Bo=null,Tl=0,Xh=0,bg=0;Ct.textFeatureIndex?Tl=Ct.textFeatureIndex:gt.useRuntimeCollisionCircles&&(Tl=gt.featureIndex),Ct.verticalTextFeatureIndex&&(Xh=Ct.verticalTextFeatureIndex);let Jh=Ct.textBox;if(Jh){let hs=uo=>{let To=o.ah.horizontal;if(y.allowVerticalPlacement&&!uo&&this.prevPlacement){let Ba=this.prevPlacement.placedOrientations[gt.crossTileID];Ba&&(this.placedOrientations[gt.crossTileID]=Ba,To=Ba,this.markUsedOrientation(y,To,gt))}return To},ps=(uo,To)=>{if(y.allowVerticalPlacement&&gt.numVerticalGlyphVertices>0&&Ct.verticalTextBox){for(let Ba of y.writingModes)if(Ba===o.ah.vertical?(Hn=To(),la=Hn):Hn=uo(),Hn&&Hn.placeable)break}else Hn=uo()},ac=gt.textAnchorOffsetStartIndex,Js=gt.textAnchorOffsetEndIndex;if(Js===ac){let uo=(To,Ba)=>{let Wr=this.collisionIndex.placeCollisionBox(To,ce,X,N,z,lt,et,M,me.predicate,Gt);return Wr&&Wr.placeable&&(this.markUsedOrientation(y,Ba,gt),this.placedOrientations[gt.crossTileID]=Ba),Wr};ps(()=>uo(Jh,o.ah.horizontal),()=>{let To=Ct.verticalTextBox;return y.allowVerticalPlacement&&gt.numVerticalGlyphVertices>0&&To?uo(To,o.ah.vertical):{box:null,offscreen:null}}),hs(Hn&&Hn.placeable)}else{let uo=o.aq[(Mr=(Gn=this.prevPlacement)===null||Gn===void 0?void 0:Gn.variableOffsets[gt.crossTileID])===null||Mr===void 0?void 0:Mr.anchor],To=(Wr,vf,Qh)=>{let ep=Wr.x2-Wr.x1,yT=Wr.y2-Wr.y1,sk=gt.textBoxScale,_T=St&&De==="never"?vf:null,sc=null,xT=ce==="never"?1:2,Eg="never";uo&&xT++;for(let am=0;am<xT;am++){for(let Ig=ac;Ig<Js;Ig++){let Tg=y.textAnchorOffsets.get(Ig);if(uo&&Tg.textAnchor!==uo)continue;let tp=this.attemptAnchorPlacement(Tg,Wr,ep,yT,sk,et,lt,X,N,z,me,Eg,gt,y,Qh,M,O,_T,Gt);if(tp&&(sc=tp.placedGlyphBoxes,sc&&sc.placeable))return Ur=!0,Xs=tp.shift,sc}uo?uo=null:Eg=ce}return g&&!sc&&(sc={box:this.collisionIndex.placeCollisionBox(Jh,"always",X,N,z,lt,et,M,me.predicate,Gt,new o.P(0,0)).box,offscreen:!1,placeable:!1}),sc};ps(()=>To(Jh,Ct.iconBox,o.ah.horizontal),()=>{let Wr=Ct.verticalTextBox;return y.allowVerticalPlacement&&(!Hn||!Hn.placeable)&&gt.numVerticalGlyphVertices>0&&Wr?To(Wr,Ct.verticalIconBox,o.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Hn&&(Ur=Hn.placeable,Eo=Hn.offscreen);let Ba=hs(Hn&&Hn.placeable);if(!Ur&&this.prevPlacement){let Wr=this.prevPlacement.variableOffsets[gt.crossTileID];Wr&&(this.variableOffsets[gt.crossTileID]=Wr,this.markUsedJustification(y,Wr.anchor,gt,Ba))}}}if(zo=Hn,Ur=zo&&zo.placeable,Eo=zo&&zo.offscreen,gt.useRuntimeCollisionCircles){let hs=y.text.placedSymbolArray.get(gt.centerJustifiedTextSymbolIndex),ps=o.ai(y.textSizeData,he,hs),ac=w.get("text-padding");Io=this.collisionIndex.placeCollisionCircles(ce,hs,y.lineVertexArray,y.glyphOffsetArray,ps,N,z,V,G,g,lt,me.predicate,gt.collisionCircleDiameter,ac,M,Gt),Io.circles.length&&Io.collisionDetected&&!g&&o.w("Collisions detected, but collision boxes are not shown"),Ur=Ce||Io.circles.length>0&&!Io.collisionDetected,Eo=Eo&&Io.offscreen}if(Ct.iconFeatureIndex&&(bg=Ct.iconFeatureIndex),Ct.iconBox){let hs=ps=>this.collisionIndex.placeCollisionBox(ps,De,X,N,z,lt,et,O,me.predicate,Gt,St&&Xs?Xs:void 0);la&&la.placeable&&Ct.verticalIconBox?(Bo=hs(Ct.verticalIconBox),$n=Bo.placeable):(Bo=hs(Ct.iconBox),$n=Bo.placeable),Eo=Eo&&Bo.offscreen}let fs=ge||gt.numHorizontalGlyphVertices===0&&gt.numVerticalGlyphVertices===0,Sg=ye||gt.numIconVertices===0;fs||Sg?Sg?fs||($n=$n&&Ur):Ur=$n&&Ur:$n=Ur=$n&&Ur;let tw=$n&&Bo.placeable;if(Ur&&zo.placeable&&this.collisionIndex.insertCollisionBox(zo.box,ce,w.get("text-ignore-placement"),y.bucketInstanceId,la&&la.placeable&&Xh?Xh:Tl,me.ID),tw&&this.collisionIndex.insertCollisionBox(Bo.box,De,w.get("icon-ignore-placement"),y.bucketInstanceId,bg,me.ID),Io&&Ur&&this.collisionIndex.insertCollisionCircles(Io.circles,ce,w.get("text-ignore-placement"),y.bucketInstanceId,Tl,me.ID),g&&this.storeCollisionData(y.bucketInstanceId,dr,Ct,zo,Bo,Io),gt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[gt.crossTileID]=new Sr(Ur||mt,$n||pt,Eo||y.justReloaded),p[gt.crossTileID]=!0};if(Ot){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let gt=y.getSortedSymbolIndexes(this.transform.angle);for(let Ct=gt.length-1;Ct>=0;--Ct){let dr=gt[Ct];gr(y.symbolInstances.get(dr),y.collisionArrays[dr],dr)}}else for(let gt=s.symbolInstanceStart;gt<s.symbolInstanceEnd;gt++)gr(y.symbolInstances.get(gt),y.collisionArrays[gt],gt);if(g&&y.bucketInstanceId in this.collisionCircleArrays){let gt=this.collisionCircleArrays[y.bucketInstanceId];o.as(gt.invProjMatrix,N),gt.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}storeCollisionData(s,p,g,y,w,M){if(g.textBox||g.iconBox){let O,N;this.collisionBoxArrays.has(s)?O=this.collisionBoxArrays.get(s):(O=new Map,this.collisionBoxArrays.set(s,O)),O.has(p)?N=O.get(p):(N={text:null,icon:null},O.set(p,N)),g.textBox&&(N.text=y.box),g.iconBox&&(N.icon=w.box)}if(M){let O=this.collisionCircleArrays[s];O===void 0&&(O=this.collisionCircleArrays[s]=new un);for(let N=0;N<M.circles.length;N+=4)O.circles.push(M.circles[N+0]),O.circles.push(M.circles[N+1]),O.circles.push(M.circles[N+2]),O.circles.push(M.collisionDetected?1:0)}}markUsedJustification(s,p,g,y){let w;w=y===o.ah.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[o.at(p)];let M=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(let O of M)O>=0&&(s.text.placedSymbolArray.get(O).crossTileID=w>=0&&O!==w?0:g.crossTileID)}markUsedOrientation(s,p,g){let y=p===o.ah.horizontal||p===o.ah.horizontalOnly?p:0,w=p===o.ah.vertical?p:0,M=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(let O of M)s.text.placedSymbolArray.get(O).placedOrientation=y;g.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;let p=this.prevPlacement,g=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;let y=p?p.symbolFadeChange(s):1,w=p?p.opacities:{},M=p?p.variableOffsets:{},O=p?p.placedOrientations:{};for(let N in this.placements){let z=this.placements[N],V=w[N];V?(this.opacities[N]=new Kr(V,y,z.text,z.icon),g=g||z.text!==V.text.placed||z.icon!==V.icon.placed):(this.opacities[N]=new Kr(null,y,z.text,z.icon,z.skipFade),g=g||z.text||z.icon)}for(let N in w){let z=w[N];if(!this.opacities[N]){let V=new Kr(z,y,!1,!1);V.isHidden()||(this.opacities[N]=V,g=g||z.text.placed||z.icon.placed)}}for(let N in M)this.variableOffsets[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.variableOffsets[N]=M[N]);for(let N in O)this.placedOrientations[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.placedOrientations[N]=O[N]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:s)}updateLayerOpacities(s,p){let g={};for(let y of p){let w=y.getBucket(s);w&&y.latestFeatureIndex&&s.id===w.layerIds[0]&&this.updateBucketOpacities(w,y.tileID,g,y.collisionBoxArray)}}updateBucketOpacities(s,p,g,y){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();let w=s.layers[0],M=w.layout,O=new Kr(null,0,!1,!1,!0),N=M.get("text-allow-overlap"),z=M.get("icon-allow-overlap"),V=w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"),G=M.get("text-rotation-alignment")==="map",X=M.get("text-pitch-alignment")==="map",ne=M.get("icon-text-fit")!=="none",se=new Kr(null,0,N&&(z||!s.hasIconData()||M.get("icon-optional")),z&&(N||!s.hasTextData()||M.get("text-optional")),!0);!s.collisionArrays&&y&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(y);let he=(ge,ye,ce)=>{for(let Ce=0;Ce<ye/4;Ce++)ge.opacityVertexArray.emplaceBack(ce);ge.hasVisibleVertices=ge.hasVisibleVertices||ce!==Rh},me=this.collisionBoxArrays.get(s.bucketInstanceId);for(let ge=0;ge<s.symbolInstances.length;ge++){let ye=s.symbolInstances.get(ge),{numHorizontalGlyphVertices:ce,numVerticalGlyphVertices:Ce,crossTileID:De}=ye,je=this.opacities[De];g[De]?je=O:je||(je=se,this.opacities[De]=je),g[De]=!0;let et=ye.numIconVertices>0,lt=this.placedOrientations[ye.crossTileID],St=lt===o.ah.vertical,Ot=lt===o.ah.horizontal||lt===o.ah.horizontalOnly;if(ce>0||Ce>0){let pt=ja(je.text);he(s.text,ce,St?Rh:pt),he(s.text,Ce,Ot?Rh:pt);let Gt=je.text.isHidden();[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach(Ct=>{Ct>=0&&(s.text.placedSymbolArray.get(Ct).hidden=Gt||St?1:0)}),ye.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(ye.verticalPlacedTextSymbolIndex).hidden=Gt||Ot?1:0);let gr=this.variableOffsets[ye.crossTileID];gr&&this.markUsedJustification(s,gr.anchor,ye,lt);let gt=this.placedOrientations[ye.crossTileID];gt&&(this.markUsedJustification(s,"left",ye,gt),this.markUsedOrientation(s,gt,ye))}if(et){let pt=ja(je.icon),Gt=!(ne&&ye.verticalPlacedIconSymbolIndex&&St);ye.placedIconSymbolIndex>=0&&(he(s.icon,ye.numIconVertices,Gt?pt:Rh),s.icon.placedSymbolArray.get(ye.placedIconSymbolIndex).hidden=je.icon.isHidden()),ye.verticalPlacedIconSymbolIndex>=0&&(he(s.icon,ye.numVerticalIconVertices,Gt?Rh:pt),s.icon.placedSymbolArray.get(ye.verticalPlacedIconSymbolIndex).hidden=je.icon.isHidden())}let mt=me&&me.has(ge)?me.get(ge):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){let pt=s.collisionArrays[ge];if(pt){let Gt=new o.P(0,0);if(pt.textBox||pt.verticalTextBox){let gr=!0;if(V){let gt=this.variableOffsets[De];gt?(Gt=lo(gt.anchor,gt.width,gt.height,gt.textOffset,gt.textBoxScale),G&&Gt._rotate(X?this.transform.angle:-this.transform.angle)):gr=!1}if(pt.textBox||pt.verticalTextBox){let gt;pt.textBox&&(gt=St),pt.verticalTextBox&&(gt=Ot),Mh(s.textCollisionBox.collisionVertexArray,je.text.placed,!gr||gt,mt.text,Gt.x,Gt.y)}}if(pt.iconBox||pt.verticalIconBox){let gr=!!(!Ot&&pt.verticalIconBox),gt;pt.iconBox&&(gt=gr),pt.verticalIconBox&&(gt=!gr),Mh(s.iconCollisionBox.collisionVertexArray,je.icon.placed,gt,mt.icon,ne?Gt.x:0,ne?Gt.y:0)}}}}if(s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);if(s.bucketInstanceId in this.collisionCircleArrays){let ge=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=ge.invProjMatrix,s.placementViewportMatrix=ge.viewportMatrix,s.collisionCircleArray=ge.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,p){let g=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*g>s}setStale(){this.stale=!0}}function Mh(b,s,p,g,y,w){g&&g.length!==0||(g=[0,0,0,0]);let M=g[0]-cr,O=g[1]-cr,N=g[2]-cr,z=g[3]-cr;b.emplaceBack(s?1:0,p?1:0,y||0,w||0,M,O),b.emplaceBack(s?1:0,p?1:0,y||0,w||0,N,O),b.emplaceBack(s?1:0,p?1:0,y||0,w||0,N,z),b.emplaceBack(s?1:0,p?1:0,y||0,w||0,M,z)}let mn=Math.pow(2,25),hx=Math.pow(2,24),px=Math.pow(2,17),ka=Math.pow(2,16),qa=Math.pow(2,9),N2=Math.pow(2,8),ss=Math.pow(2,1);function ja(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;let s=b.placed?1:0,p=Math.floor(127*b.opacity);return p*mn+s*hx+p*px+s*ka+p*qa+s*N2+p*ss+s}let Rh=0;function nf(){return{isOccluded:(b,s,p)=>!1,getPitchedTextCorrection:(b,s,p)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(b,s,p,g){throw new Error("Not implemented.")},translatePosition:(b,s,p,g)=>function(y,w,M,O,N=!1){if(!M[0]&&!M[1])return[0,0];let z=N?O==="map"?y.angle:0:O==="viewport"?-y.angle:0;if(z){let V=Math.sin(z),G=Math.cos(z);M=[M[0]*G-M[1]*V,M[0]*V+M[1]*G]}return[N?M[0]:Cr(w,M[0],y.zoom),N?M[1]:Cr(w,M[1],y.zoom)]}(b,s,p,g),getCircleRadiusCorrection:b=>1}}class ki{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,p,g,y,w){let M=this._bucketParts;for(;this._currentTileIndex<s.length;)if(p.getBucketParts(M,y,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((O,N)=>O.sortKey-N.sortKey));this._currentPartIndex<M.length;)if(p.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,w())return!0;return!1}}class Ud{constructor(s,p,g,y,w,M,O,N){this.placement=new Fo(s,nf(),p,M,O,N),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(s,p,g){let y=d.now(),w=()=>!this._forceFullPlacement&&d.now()-y>2;for(;this._currentPlacementIndex>=0;){let M=p[s[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=O)&&(!M.maxzoom||M.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new ki(M)),this._inProgressLayer.continuePlacement(g[M.source],this.placement,this._showCollisionBoxes,M,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}let Hs=512/o.X/2;class Ci{constructor(s,p,g){this.tileID=s,this.bucketInstanceId=g,this._symbolsByKey={};let y=new Map;for(let w=0;w<p.length;w++){let M=p.get(w),O=M.key,N=y.get(O);N?N.push(M):y.set(O,[M])}for(let[w,M]of y){let O={positions:M.map(N=>({x:Math.floor(N.anchorX*Hs),y:Math.floor(N.anchorY*Hs)})),crossTileIDs:M.map(N=>N.crossTileID)};if(O.positions.length>128){let N=new o.av(O.positions.length,16,Uint16Array);for(let{x:z,y:V}of O.positions)N.add(z,V);N.finish(),delete O.positions,O.index=N}this._symbolsByKey[w]=O}}getScaledCoordinates(s,p){let{x:g,y,z:w}=this.tileID.canonical,{x:M,y:O,z:N}=p.canonical,z=Hs/Math.pow(2,N-w),V=(O*o.X+s.anchorY)*z,G=y*o.X*Hs;return{x:Math.floor((M*o.X+s.anchorX)*z-g*o.X*Hs),y:Math.floor(V-G)}}findMatches(s,p,g){let y=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let w=0;w<s.length;w++){let M=s.get(w);if(M.crossTileID)continue;let O=this._symbolsByKey[M.key];if(!O)continue;let N=this.getScaledCoordinates(M,p);if(O.index){let z=O.index.range(N.x-y,N.y-y,N.x+y,N.y+y).sort();for(let V of z){let G=O.crossTileIDs[V];if(!g[G]){g[G]=!0,M.crossTileID=G;break}}}else if(O.positions)for(let z=0;z<O.positions.length;z++){let V=O.positions[z],G=O.crossTileIDs[z];if(Math.abs(V.x-N.x)<=y&&Math.abs(V.y-N.y)<=y&&!g[G]){g[G]=!0,M.crossTileID=G;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class $v{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ws{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){let p=Math.round((s-this.lng)/360);if(p!==0)for(let g in this.indexes){let y=this.indexes[g],w={};for(let M in y){let O=y[M];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+p),w[O.tileID.key]=O}this.indexes[g]=w}this.lng=s}addBucket(s,p,g){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let w=0;w<p.symbolInstances.length;w++)p.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});let y=this.usedCrossTileIDs[s.overscaledZ];for(let w in this.indexes){let M=this.indexes[w];if(Number(w)>s.overscaledZ)for(let O in M){let N=M[O];N.tileID.isChildOf(s)&&N.findMatches(p.symbolInstances,s,y)}else{let O=M[s.scaledTo(Number(w)).key];O&&O.findMatches(p.symbolInstances,s,y)}}for(let w=0;w<p.symbolInstances.length;w++){let M=p.symbolInstances.get(w);M.crossTileID||(M.crossTileID=g.generate(),y[M.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new Ci(s,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(s,p){for(let g of p.getCrossTileIDsLists())for(let y of g)delete this.usedCrossTileIDs[s][y]}removeStaleBuckets(s){let p=!1;for(let g in this.indexes){let y=this.indexes[g];for(let w in y)s[y[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,y[w]),delete y[w],p=!0)}return p}}class dx{constructor(){this.layerIndexes={},this.crossTileIDs=new $v,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,p,g){let y=this.layerIndexes[s.id];y===void 0&&(y=this.layerIndexes[s.id]=new Ws);let w=!1,M={};y.handleWrapJump(g);for(let O of p){let N=O.getBucket(s);N&&s.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(O.tileID,N,this.crossTileIDs)&&(w=!0),M[N.bucketInstanceId]=!0)}return y.removeStaleBuckets(M)&&(w=!0),w}pruneUnusedLayers(s){let p={};s.forEach(g=>{p[g]=!0});for(let g in this.layerIndexes)p[g]||delete this.layerIndexes[g]}}let Zs=(b,s)=>o.t(b,s&&s.filter(p=>p.identifier!=="source.canvas")),k2=o.aw();class Hv extends o.E{constructor(s,p={}){super(),this._rtlPluginLoaded=()=>{for(let g in this.sourceCaches){let y=this.sourceCaches[g].getSource().type;y!=="vector"&&y!=="geojson"||this.sourceCaches[g].reload()}},this.map=s,this.dispatcher=new Ze(Fe(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",(g,y)=>this.getGlyphs(g,y)),this.dispatcher.registerMessageHandler("GI",(g,y)=>this.getImages(g,y)),this.imageManager=new Re,this.imageManager.setEventedParent(this),this.glyphManager=new We(s._requestManager,p.localIdeographFontFamily),this.lineAtlas=new Ke(256,512),this.crossTileSymbolIndex=new dx,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.ay()),di().on(nt,this._rtlPluginLoaded),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;let y=this.sourceCaches[g.sourceId];if(!y)return;let w=y.getSource();if(w&&w.vectorLayerIds)for(let M in this._layers){let O=this._layers[M];O.source===w.id&&this._validateLayer(O)}})}loadURL(s,p={},g){this.fire(new o.k("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;let y=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;let w=this._loadStyleRequest;o.h(y,this._loadStyleRequest).then(M=>{this._loadStyleRequest=null,this._load(M.data,p,g)}).catch(M=>{this._loadStyleRequest=null,M&&!w.signal.aborted&&this.fire(new o.j(M))})}loadJSON(s,p={},g){this.fire(new o.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,d.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(s,p,g)}).catch(()=>{})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(k2,{validate:!1})}_load(s,p,g){var y;let w=p.transformStyle?p.transformStyle(g,s):s;if(!p.validate||!Zs(this,o.u(w))){this._loaded=!0,this.stylesheet=w;for(let M in w.sources)this.addSource(M,w.sources[M],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs),this._createLayers(),this.light=new Ae(this.stylesheet.light),this.sky=new Ge(this.stylesheet.sky),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){let s=o.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",s),this._order=s.map(p=>p.id),this._layers={},this._serializedLayers=null;for(let p of s){let g=o.aA(p);g.setEventedParent(this,{layer:{id:p.id}}),this._layers[p.id]=g}}_loadSprite(s,p=!1,g=void 0){let y;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(w,M,O,N){return o._(this,void 0,void 0,function*(){let z=ie(w),V=O>1?"@2x":"",G={},X={};for(let{id:ne,url:se}of z){let he=M.transformRequest(ue(se,V,".json"),"SpriteJSON");G[ne]=o.h(he,N);let me=M.transformRequest(ue(se,V,".png"),"SpriteImage");X[ne]=D.getImage(me,N)}return yield Promise.all([...Object.values(G),...Object.values(X)]),function(ne,se){return o._(this,void 0,void 0,function*(){let he={};for(let me in ne){he[me]={};let ge=d.getImageCanvasContext((yield se[me]).data),ye=(yield ne[me]).data;for(let ce in ye){let{width:Ce,height:De,x:je,y:et,sdf:lt,pixelRatio:St,stretchX:Ot,stretchY:mt,content:pt,textFitWidth:Gt,textFitHeight:gr}=ye[ce];he[me][ce]={data:null,pixelRatio:St,sdf:lt,stretchX:Ot,stretchY:mt,content:pt,textFitWidth:Gt,textFitHeight:gr,spriteData:{width:Ce,height:De,x:je,y:et,context:ge}}}}return he})}(G,X)})}(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(w=>{if(this._spriteRequest=null,w)for(let M in w){this._spritesImagesIds[M]=[];let O=this._spritesImagesIds[M]?this._spritesImagesIds[M].filter(N=>!(N in w)):[];for(let N of O)this.imageManager.removeImage(N),this._changedImages[N]=!0;for(let N in w[M]){let z=M==="default"?N:`${M}:${N}`;this._spritesImagesIds[M].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,w[M][N],!1):this.imageManager.addImage(z,w[M][N]),p&&(this._changedImages[z]=!0)}}}).catch(w=>{this._spriteRequest=null,y=w,this.fire(new o.j(y))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),g&&g(y)})}_unloadSprite(){for(let s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(s){let p=this.sourceCaches[s.source];if(!p)return;let g=s.sourceLayer;if(!g)return;let y=p.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(g)===-1)&&this.fire(new o.j(new Error(`Source layer "${g}" does not exist on source "${y.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,p=!1){let g=this._serializedAllLayers();if(!s||s.length===0)return Object.values(p?o.aB(g):g);let y=[];for(let w of s)if(g[w]){let M=p?o.aB(g[w]):g[w];y.push(M)}return y}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};let p=Object.keys(this._layers);for(let g of p){let y=this._layers[g];y.type!=="custom"&&(s[g]=y.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(let s in this.sourceCaches)if(this.sourceCaches[s].hasTransition())return!0;for(let s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;let p=this._changed;if(p){let y=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(y.length||w.length)&&this._updateWorkerLayers(y,w);for(let M in this._updatedSources){let O=this._updatedSources[M];if(O==="reload")this._reloadSource(M);else{if(O!=="clear")throw new Error(`Invalid action ${O}`);this._clearSource(M)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let M in this._updatedPaintProps)this._layers[M].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}let g={};for(let y in this.sourceCaches){let w=this.sourceCaches[y];g[y]=w.used,w.used=!1}for(let y of this._order){let w=this._layers[y];w.recalculate(s,this._availableImages),!w.isHidden(s.zoom)&&w.source&&(this.sourceCaches[w.source].used=!0)}for(let y in g){let w=this.sourceCaches[y];!!g[y]!=!!w.used&&w.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(s),this.sky.recalculate(s),this.z=s.zoom,p&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){let s=Object.keys(this._changedImages);if(s.length){for(let p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,p={}){var g;this._checkLoaded();let y=this.serialize();if(s=p.transformStyle?p.transformStyle(y,s):s,((g=p.validate)===null||g===void 0||g)&&Zs(this,o.u(s)))return!1;(s=o.aB(s)).layers=o.az(s.layers);let w=o.aC(y,s),M=this._getOperationsToPerform(w);if(M.unimplemented.length>0)throw new Error(`Unimplemented: ${M.unimplemented.join(", ")}.`);if(M.operations.length===0)return!1;for(let O of M.operations)O();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){let p=[],g=[];for(let y of s)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":p.push(()=>this.addLayer.apply(this,y.args));break;case"removeLayer":p.push(()=>this.removeLayer.apply(this,y.args));break;case"setPaintProperty":p.push(()=>this.setPaintProperty.apply(this,y.args));break;case"setLayoutProperty":p.push(()=>this.setLayoutProperty.apply(this,y.args));break;case"setFilter":p.push(()=>this.setFilter.apply(this,y.args));break;case"addSource":p.push(()=>this.addSource.apply(this,y.args));break;case"removeSource":p.push(()=>this.removeSource.apply(this,y.args));break;case"setLayerZoomRange":p.push(()=>this.setLayerZoomRange.apply(this,y.args));break;case"setLight":p.push(()=>this.setLight.apply(this,y.args));break;case"setGeoJSONSourceData":p.push(()=>this.setGeoJSONSourceData.apply(this,y.args));break;case"setGlyphs":p.push(()=>this.setGlyphs.apply(this,y.args));break;case"setSprite":p.push(()=>this.setSprite.apply(this,y.args));break;case"setSky":p.push(()=>this.setSky.apply(this,y.args));break;case"setTerrain":p.push(()=>this.map.setTerrain.apply(this,y.args));break;case"setTransition":p.push(()=>{});break;default:g.push(y.command);}return{operations:p,unimplemented:g}}addImage(s,p){if(this.getImage(s))return this.fire(new o.j(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,p),this._afterImageUpdated(s)}updateImage(s,p){this.imageManager.updateImage(s,p)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new o.j(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,p,g={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(o.u.source,`sources.${s}`,p,null,g))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);let y=this.sourceCaches[s]=new zt(s,p,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:s})),y.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(let g in this._layers)if(this._layers[g].source===s)return this.fire(new o.j(new Error(`Source "${s}" cannot be removed while layer "${g}" is using it.`)));let p=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],p.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,p){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);let g=this.sourceCaches[s].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(p),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,p,g={}){this._checkLoaded();let y=s.id;if(this.getLayer(y))return void this.fire(new o.j(new Error(`Layer "${y}" already exists on this map.`)));let w;if(s.type==="custom"){if(Zs(this,o.aD(s)))return;w=o.aA(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(y,s.source),s=o.aB(s),s=o.e(s,{source:y})),this._validate(o.u.layer,`layers.${y}`,s,{arrayIndex:-1},g))return;w=o.aA(s),this._validateLayer(w),w.setEventedParent(this,{layer:{id:y}})}let M=p?this._order.indexOf(p):this._order.length;if(p&&M===-1)this.fire(new o.j(new Error(`Cannot add layer "${y}" before non-existing layer "${p}".`)));else{if(this._order.splice(M,0,y),this._layerOrderChanged=!0,this._layers[y]=w,this._removedLayers[y]&&w.source&&w.type!=="custom"){let O=this._removedLayers[y];delete this._removedLayers[y],O.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}moveLayer(s,p){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new o.j(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===p)return;let g=this._order.indexOf(s);this._order.splice(g,1);let y=p?this._order.indexOf(p):this._order.length;p&&y===-1?this.fire(new o.j(new Error(`Cannot move layer "${s}" before non-existing layer "${p}".`))):(this._order.splice(y,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();let p=this._layers[s];if(!p)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${s}".`)));p.setEventedParent(null);let g=this._order.indexOf(s);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=p,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],p.onRemove&&p.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,p,g){this._checkLoaded();let y=this.getLayer(s);y?y.minzoom===p&&y.maxzoom===g||(p!=null&&(y.minzoom=p),g!=null&&(y.maxzoom=g),this._updateLayer(y)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,p,g={}){this._checkLoaded();let y=this.getLayer(s);if(y){if(!o.aE(y.filter,p))return p==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(o.u.filter,`layers.${y.id}.filter`,p,null,g)||(y.filter=o.aB(p),this._updateLayer(y)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return o.aB(this.getLayer(s).filter)}setLayoutProperty(s,p,g,y={}){this._checkLoaded();let w=this.getLayer(s);w?o.aE(w.getLayoutProperty(p),g)||(w.setLayoutProperty(p,g,y),this._updateLayer(w)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,p){let g=this.getLayer(s);if(g)return g.getLayoutProperty(p);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,p,g,y={}){this._checkLoaded();let w=this.getLayer(s);w?o.aE(w.getPaintProperty(p),g)||(w.setPaintProperty(p,g,y)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[s]=!0,this._serializedLayers=null):this.fire(new o.j(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,p){return this.getLayer(s).getPaintProperty(p)}setFeatureState(s,p){this._checkLoaded();let g=s.source,y=s.sourceLayer,w=this.sourceCaches[g];if(w===void 0)return void this.fire(new o.j(new Error(`The source '${g}' does not exist in the map's style.`)));let M=w.getSource().type;M==="geojson"&&y?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||y?(s.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),w.setFeatureState(y,s.id,p)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,p){this._checkLoaded();let g=s.source,y=this.sourceCaches[g];if(y===void 0)return void this.fire(new o.j(new Error(`The source '${g}' does not exist in the map's style.`)));let w=y.getSource().type,M=w==="vector"?s.sourceLayer:void 0;w!=="vector"||M?p&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(M,s.id,p):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();let p=s.source,g=s.sourceLayer,y=this.sourceCaches[p];if(y!==void 0)return y.getSource().type!=="vector"||g?(s.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),y.getFeatureState(g,s.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let s=o.aF(this.sourceCaches,w=>w.serialize()),p=this._serializeByIds(this._order,!0),g=this.map.getTerrain()||void 0,y=this.stylesheet;return o.aG({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,sources:s,layers:p,terrain:g},w=>w!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){let p=M=>this._layers[M].type==="fill-extrusion",g={},y=[];for(let M=this._order.length-1;M>=0;M--){let O=this._order[M];if(p(O)){g[O]=M;for(let N of s){let z=N[O];if(z)for(let V of z)y.push(V)}}}y.sort((M,O)=>O.intersectionZ-M.intersectionZ);let w=[];for(let M=this._order.length-1;M>=0;M--){let O=this._order[M];if(p(O))for(let N=y.length-1;N>=0;N--){let z=y[N].feature;if(g[z.layer.id]<M)break;w.push(z),y.pop()}else for(let N of s){let z=N[O];if(z)for(let V of z)w.push(V.feature)}}return w}queryRenderedFeatures(s,p,g){p&&p.filter&&this._validate(o.u.filter,"queryRenderedFeatures.filter",p.filter,null,p);let y={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new o.j(new Error("parameters.layers must be an Array."))),[];for(let O of p.layers){let N=this._layers[O];if(!N)return this.fire(new o.j(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];y[N.source]=!0}}let w=[];p.availableImages=this._availableImages;let M=this._serializedAllLayers();for(let O in this.sourceCaches)p.layers&&!y[O]||w.push(Dt(this.sourceCaches[O],this._layers,M,s,p,g));return this.placement&&w.push(function(O,N,z,V,G,X,ne){let se={},he=X.queryRenderedSymbols(V),me=[];for(let ge of Object.keys(he).map(Number))me.push(ne[ge]);me.sort(Kt);for(let ge of me){let ye=ge.featureIndex.lookupSymbolFeatures(he[ge.bucketInstanceId],N,ge.bucketIndex,ge.sourceLayerIndex,G.filter,G.layers,G.availableImages,O);for(let ce in ye){let Ce=se[ce]=se[ce]||[],De=ye[ce];De.sort((je,et)=>{let lt=ge.featureSortOrder;if(lt){let St=lt.indexOf(je.featureIndex);return lt.indexOf(et.featureIndex)-St}return et.featureIndex-je.featureIndex});for(let je of De)Ce.push(je)}}for(let ge in se)se[ge].forEach(ye=>{let ce=ye.feature,Ce=z[O[ge].source].getFeatureState(ce.layer["source-layer"],ce.id);ce.source=ce.layer.source,ce.layer["source-layer"]&&(ce.sourceLayer=ce.layer["source-layer"]),ce.state=Ce});return se}(this._layers,M,this.sourceCaches,s,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(s,p){p&&p.filter&&this._validate(o.u.filter,"querySourceFeatures.filter",p.filter,null,p);let g=this.sourceCaches[s];return g?function(y,w){let M=y.getRenderableIds().map(z=>y.getTileByID(z)),O=[],N={};for(let z=0;z<M.length;z++){let V=M[z],G=V.tileID.canonical.key;N[G]||(N[G]=!0,V.querySourceFeatures(O,w))}return O}(g,p):[]}getLight(){return this.light.getLight()}setLight(s,p={}){this._checkLoaded();let g=this.light.getLight(),y=!1;for(let M in s)if(!o.aE(s[M],g[M])){y=!0;break}if(!y)return;let w={now:d.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,p),this.light.updateTransitions(w)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,p={}){let g=this.getSky(),y=!1;if(!s&&!g)return;if(s&&!g)y=!0;else if(!s&&g)y=!0;else for(let M in s)if(!o.aE(s[M],g[M])){y=!0;break}if(!y)return;let w={now:d.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,p),this.sky.updateTransitions(w)}_validate(s,p,g,y,w={}){return(!w||w.validate!==!1)&&Zs(this,s.call(o.u,o.e({key:p,style:this.serialize(),value:g,styleSpec:o.v},y)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),di().off(nt,this._rtlPluginLoaded);for(let p in this._layers)this._layers[p].setEventedParent(null);for(let p in this.sourceCaches){let g=this.sourceCaches[p];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(let p in this.sourceCaches)this.sourceCaches[p].update(s,this.map.terrain)}_generateCollisionBoxes(){for(let s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,p,g,y,w=!1){let M=!1,O=!1,N={};for(let z of this._order){let V=this._layers[z];if(V.type!=="symbol")continue;if(!N[V.source]){let X=this.sourceCaches[V.source];N[V.source]=X.getRenderableIds(!0).map(ne=>X.getTileByID(ne)).sort((ne,se)=>se.tileID.overscaledZ-ne.tileID.overscaledZ||(ne.tileID.isLessThan(se.tileID)?-1:1))}let G=this.crossTileSymbolIndex.addLayer(V,N[V.source],s.center.lng);M=M||G}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(d.now(),s.zoom))&&(this.pauseablePlacement=new Ud(s,this.map.terrain,this._order,w,p,g,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(d.now()),O=!0),M&&this.pauseablePlacement.placement.setStale()),O||M)for(let z of this._order){let V=this._layers[z];V.type==="symbol"&&this.placement.updateLayerOpacities(V,N[V.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(d.now())}_releaseSymbolFadeTiles(){for(let s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,p){return o._(this,void 0,void 0,function*(){let g=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();let y=this.sourceCaches[p.source];return y&&y.setDependencies(p.tileID.key,p.type,p.icons),g})}getGlyphs(s,p){return o._(this,void 0,void 0,function*(){let g=yield this.glyphManager.getGlyphs(p.stacks),y=this.sourceCaches[p.source];return y&&y.setDependencies(p.tileID.key,p.type,[""]),g})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,p={}){this._checkLoaded(),s&&this._validate(o.u.glyphs,"glyphs",s,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,p,g={},y){this._checkLoaded();let w=[{id:s,url:p}],M=[...ie(this.stylesheet.sprite),...w];this._validate(o.u.sprite,"sprite",M,null,g)||(this.stylesheet.sprite=M,this._loadSprite(w,!0,y))}removeSprite(s){this._checkLoaded();let p=ie(this.stylesheet.sprite);if(p.find(g=>g.id===s)){if(this._spritesImagesIds[s])for(let g of this._spritesImagesIds[s])this.imageManager.removeImage(g),this._changedImages[g]=!0;p.splice(p.findIndex(g=>g.id===s),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return ie(this.stylesheet.sprite)}setSprite(s,p={},g){this._checkLoaded(),s&&this._validate(o.u.sprite,"sprite",s,null,p)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,g):(this._unloadSprite(),g&&g(null)))}}var of=o.Y([{name:"a_pos",type:"Int16",components:2}]);let ic={prelude:on(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:on(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:on(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:on(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:on("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:on(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:on(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:on("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:on("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:on("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:on(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:on(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:on(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:on(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:on(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:on(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:on(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:on(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:on(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:on(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:on(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:on(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:on(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:on(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:on(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:on(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:on("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:on("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:on("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:on("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function on(b,s){let p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=s.match(/attribute ([\w]+) ([\w]+)/g),y=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=w?w.concat(y):y,O={};return{fragmentSource:b=b.replace(p,(N,z,V,G,X)=>(O[X]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${V} ${G} ${X};
#else
uniform ${V} ${G} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${V} ${G} ${X} = u_${X};
#endif
`)),vertexSource:s=s.replace(p,(N,z,V,G,X)=>{let ne=G==="float"?"vec2":"vec4",se=X.match(/color/)?"color":ne;return O[X]?z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${V} ${ne} a_${X};
varying ${V} ${G} ${X};
#else
uniform ${V} ${G} u_${X};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${V} ${G} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${se}(a_${X}, u_${X}_t);
#else
    ${V} ${G} ${X} = u_${X};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${V} ${ne} a_${X};
#else
uniform ${V} ${G} u_${X};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${V} ${G} ${X} = a_${X};
#else
    ${V} ${G} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${V} ${G} ${X} = unpack_mix_${se}(a_${X}, u_${X}_t);
#else
    ${V} ${G} ${X} = u_${X};
#endif
`}),staticAttributes:g,staticUniforms:M}}class mx{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,p,g,y,w,M,O,N,z){this.context=s;let V=this.boundPaintVertexBuffers.length!==y.length;for(let G=0;!V&&G<y.length;G++)this.boundPaintVertexBuffers[G]!==y[G]&&(V=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==g||V||this.boundIndexBuffer!==w||this.boundVertexOffset!==M||this.boundDynamicVertexBuffer!==O||this.boundDynamicVertexBuffer2!==N||this.boundDynamicVertexBuffer3!==z?this.freshBind(p,g,y,w,M,O,N,z):(s.bindVertexArray.set(this.vao),O&&O.bind(),w&&w.dynamicDraw&&w.bind(),N&&N.bind(),z&&z.bind())}freshBind(s,p,g,y,w,M,O,N){let z=s.numAttributes,V=this.context,G=V.gl;this.vao&&this.destroy(),this.vao=V.createVertexArray(),V.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=y,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=O,this.boundDynamicVertexBuffer3=N,p.enableAttributes(G,s);for(let X of g)X.enableAttributes(G,s);M&&M.enableAttributes(G,s),O&&O.enableAttributes(G,s),N&&N.enableAttributes(G,s),p.bind(),p.setVertexAttribPointers(G,s,w);for(let X of g)X.bind(),X.setVertexAttribPointers(G,s,w);M&&(M.bind(),M.setVertexAttribPointers(G,s,w)),y&&y.bind(),O&&(O.bind(),O.setVertexAttribPointers(G,s,w)),N&&(N.bind(),N.setVertexAttribPointers(G,s,w)),V.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let vx=(b,s,p,g,y)=>({u_matrix:b,u_texture:0,u_ele_delta:s,u_fog_matrix:p,u_fog_color:g?g.properties.get("fog-color"):o.aM.white,u_fog_ground_blend:g?g.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:g?g.calculateFogBlendOpacity(y):0,u_horizon_color:g?g.properties.get("horizon-color"):o.aM.white,u_horizon_fog_blend:g?g.properties.get("horizon-fog-blend"):1});function Ph(b){let s=[];for(let p=0;p<b.length;p++){if(b[p]===null)continue;let g=b[p].split(" ");s.push(g.pop())}return s}class gx{constructor(s,p,g,y,w,M){let O=s.gl;this.program=O.createProgram();let N=Ph(p.staticAttributes),z=g?g.getBinderAttributes():[],V=N.concat(z),G=ic.prelude.staticUniforms?Ph(ic.prelude.staticUniforms):[],X=p.staticUniforms?Ph(p.staticUniforms):[],ne=g?g.getBinderUniforms():[],se=G.concat(X).concat(ne),he=[];for(let je of se)he.indexOf(je)<0&&he.push(je);let me=g?g.defines():[];w&&me.push("#define OVERDRAW_INSPECTOR;"),M&&me.push("#define TERRAIN3D;");let ge=me.concat(ic.prelude.fragmentSource,p.fragmentSource).join(`
`),ye=me.concat(ic.prelude.vertexSource,p.vertexSource).join(`
`),ce=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(ce,ge),O.compileShader(ce),!O.getShaderParameter(ce,O.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${O.getShaderInfoLog(ce)}`);O.attachShader(this.program,ce);let Ce=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(Ce,ye),O.compileShader(Ce),!O.getShaderParameter(Ce,O.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${O.getShaderInfoLog(Ce)}`);O.attachShader(this.program,Ce),this.attributes={};let De={};this.numAttributes=V.length;for(let je=0;je<this.numAttributes;je++)V[je]&&(O.bindAttribLocation(this.program,je,V[je]),this.attributes[V[je]]=je);if(O.linkProgram(this.program),!O.getProgramParameter(this.program,O.LINK_STATUS))throw new Error(`Program failed to link: ${O.getProgramInfoLog(this.program)}`);O.deleteShader(Ce),O.deleteShader(ce);for(let je=0;je<he.length;je++){let et=he[je];if(et&&!De[et]){let lt=O.getUniformLocation(this.program,et);lt&&(De[et]=lt)}}this.fixedUniforms=y(s,De),this.terrainUniforms=((je,et)=>({u_depth:new o.aH(je,et.u_depth),u_terrain:new o.aH(je,et.u_terrain),u_terrain_dim:new o.aI(je,et.u_terrain_dim),u_terrain_matrix:new o.aJ(je,et.u_terrain_matrix),u_terrain_unpack:new o.aK(je,et.u_terrain_unpack),u_terrain_exaggeration:new o.aI(je,et.u_terrain_exaggeration)}))(s,De),this.binderUniforms=g?g.getUniforms(s,De):[]}draw(s,p,g,y,w,M,O,N,z,V,G,X,ne,se,he,me,ge,ye){let ce=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(g),s.setStencilMode(y),s.setColorMode(w),s.setCullFace(M),N){s.activeTexture.set(ce.TEXTURE2),ce.bindTexture(ce.TEXTURE_2D,N.depthTexture),s.activeTexture.set(ce.TEXTURE3),ce.bindTexture(ce.TEXTURE_2D,N.texture);for(let De in this.terrainUniforms)this.terrainUniforms[De].set(N[De])}for(let De in this.fixedUniforms)this.fixedUniforms[De].set(O[De]);he&&he.setUniforms(s,this.binderUniforms,ne,{zoom:se});let Ce=0;switch(p){case ce.LINES:Ce=2;break;case ce.TRIANGLES:Ce=3;break;case ce.LINE_STRIP:Ce=1;}for(let De of X.get()){let je=De.vaos||(De.vaos={});(je[z]||(je[z]=new mx)).bind(s,this,V,he?he.getPaintVertexBuffers():[],G,De.vertexOffset,me,ge,ye),ce.drawElements(p,De.primitiveLength*Ce,ce.UNSIGNED_SHORT,De.primitiveOffset*Ce*2)}}}function Wv(b,s,p){let g=1/Cr(p,1,s.transform.tileZoom),y=Math.pow(2,p.tileID.overscaledZ),w=p.tileSize*Math.pow(2,s.transform.tileZoom)/y,M=w*(p.tileID.canonical.x+p.tileID.wrap*y),O=w*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[g,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[M>>16,O>>16],u_pixel_coord_lower:[65535&M,65535&O]}}let Vd=(b,s,p,g)=>{let y=s.style.light,w=y.properties.get("position"),M=[w.x,w.y,w.z],O=function(){var z=new o.A(9);return o.A!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}();y.properties.get("anchor")==="viewport"&&function(z,V){var G=Math.sin(V),X=Math.cos(V);z[0]=X,z[1]=G,z[2]=0,z[3]=-G,z[4]=X,z[5]=0,z[6]=0,z[7]=0,z[8]=1}(O,-s.transform.angle),function(z,V,G){var X=V[0],ne=V[1],se=V[2];z[0]=X*G[0]+ne*G[3]+se*G[6],z[1]=X*G[1]+ne*G[4]+se*G[7],z[2]=X*G[2]+ne*G[5]+se*G[8]}(M,M,O);let N=y.properties.get("color");return{u_matrix:b,u_lightpos:M,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[N.r,N.g,N.b],u_vertical_gradient:+p,u_opacity:g}},Zv=(b,s,p,g,y,w,M)=>o.e(Vd(b,s,p,g),Wv(w,s,M),{u_height_factor:-Math.pow(2,y.overscaledZ)/M.tileSize/8}),Oh=b=>({u_matrix:b}),FI=(b,s,p,g)=>o.e(Oh(b),Wv(p,s,g)),q2=(b,s)=>({u_matrix:b,u_world:s}),zI=(b,s,p,g,y)=>o.e(FI(b,s,p,g),{u_world:y}),j2=(b,s,p,g)=>{let y=b.transform,w,M;if(g.paint.get("circle-pitch-alignment")==="map"){let O=Cr(p,1,y.zoom);w=!0,M=[O,O]}else w=!1,M=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_matrix:b.translatePosMatrix(s.posMatrix,p,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+w,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:M}},af=(b,s,p)=>({u_matrix:b,u_inv_matrix:s,u_camera_to_center_distance:p.cameraToCenterDistance,u_viewport_size:[p.width,p.height]}),Gd=(b,s,p=1)=>({u_matrix:b,u_color:s,u_overlay:0,u_overlay_scale:p}),aa=b=>({u_matrix:b}),sa=(b,s,p,g)=>({u_matrix:b,u_extrude_scale:Cr(s,1,p),u_intensity:g}),Yv=(b,s,p,g)=>{let y=o.H();o.aP(y,0,b.width,b.height,0,0,1);let w=b.context.gl;return{u_matrix:y,u_world:[w.drawingBufferWidth,w.drawingBufferHeight],u_image:p,u_color_ramp:g,u_opacity:s.paint.get("heatmap-opacity")}};function Kv(b,s){let p=Math.pow(2,s.canonical.z),g=s.canonical.y;return[new o.Z(0,g/p).toLngLat().lat,new o.Z(0,(g+1)/p).toLngLat().lat]}let Xv=(b,s,p,g)=>{let y=b.transform;return{u_matrix:VI(b,s,p,g),u_ratio:1/Cr(s,1,y.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},BI=(b,s,p,g,y)=>o.e(Xv(b,s,p,y),{u_image:0,u_image_height:g}),Lh=(b,s,p,g,y)=>{let w=b.transform,M=UI(s,w);return{u_matrix:VI(b,s,p,y),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Cr(s,1,w.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[M,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},F2=(b,s,p,g,y,w)=>{let M=b.lineAtlas,O=UI(s,b.transform),N=p.layout.get("line-cap")==="round",z=M.getDash(g.from,N),V=M.getDash(g.to,N),G=z.width*y.fromScale,X=V.width*y.toScale;return o.e(Xv(b,s,p,w),{u_patternscale_a:[O/G,-z.height/2],u_patternscale_b:[O/X,-V.height/2],u_sdfgamma:M.width/(256*Math.min(G,X)*b.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:V.y,u_mix:y.t})};function UI(b,s){return 1/Cr(b,1,s.tileZoom)}function VI(b,s,p,g){return b.translatePosMatrix(g?g.posMatrix:s.tileID.posMatrix,s,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}let z2=(b,s,p,g,y)=>{return{u_matrix:b,u_tl_parent:s,u_scale_parent:p,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(M=y.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(w=y.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:B2(y.paint.get("raster-hue-rotate"))};var w,M};function B2(b){b*=Math.PI/180;let s=Math.sin(b),p=Math.cos(b);return[(2*p+1)/3,(-Math.sqrt(3)*s-p+1)/3,(Math.sqrt(3)*s-p+1)/3]}let GI=(b,s,p,g,y,w,M,O,N,z,V,G,X,ne)=>{let se=M.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:se.cameraToCenterDistance,u_pitch:se.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:se.width/se.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_matrix:O,u_label_plane_matrix:N,u_coord_matrix:z,u_is_text:+G,u_pitch_with_map:+g,u_is_along_line:y,u_is_variable_anchor:w,u_texsize:X,u_texture:0,u_translation:V,u_pitched_scale:ne}},$d=(b,s,p,g,y,w,M,O,N,z,V,G,X,ne,se)=>{let he=M.transform;return o.e(GI(b,s,p,g,y,w,M,O,N,z,V,G,X,se),{u_gamma_scale:g?Math.cos(he._pitch)*he.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:+ne})},yx=(b,s,p,g,y,w,M,O,N,z,V,G,X,ne)=>o.e($d(b,s,p,g,y,w,M,O,N,z,V,!0,G,!0,ne),{u_texsize_icon:X,u_texture_icon:1}),Jv=(b,s,p)=>({u_matrix:b,u_opacity:s,u_color:p}),_x=(b,s,p,g,y,w)=>o.e(function(M,O,N,z){let V=N.imageManager.getPattern(M.from.toString()),G=N.imageManager.getPattern(M.to.toString()),{width:X,height:ne}=N.imageManager.getPixelSize(),se=Math.pow(2,z.tileID.overscaledZ),he=z.tileSize*Math.pow(2,N.transform.tileZoom)/se,me=he*(z.tileID.canonical.x+z.tileID.wrap*se),ge=he*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:V.tl,u_pattern_br_a:V.br,u_pattern_tl_b:G.tl,u_pattern_br_b:G.br,u_texsize:[X,ne],u_mix:O.t,u_pattern_size_a:V.displaySize,u_pattern_size_b:G.displaySize,u_scale_a:O.fromScale,u_scale_b:O.toScale,u_tile_units_to_pixels:1/Cr(z,1,N.transform.tileZoom),u_pixel_coord_upper:[me>>16,ge>>16],u_pixel_coord_lower:[65535&me,65535&ge]}}(g,w,p,y),{u_matrix:b,u_opacity:s}),xx={fillExtrusion:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_lightpos:new o.aN(b,s.u_lightpos),u_lightintensity:new o.aI(b,s.u_lightintensity),u_lightcolor:new o.aN(b,s.u_lightcolor),u_vertical_gradient:new o.aI(b,s.u_vertical_gradient),u_opacity:new o.aI(b,s.u_opacity)}),fillExtrusionPattern:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_lightpos:new o.aN(b,s.u_lightpos),u_lightintensity:new o.aI(b,s.u_lightintensity),u_lightcolor:new o.aN(b,s.u_lightcolor),u_vertical_gradient:new o.aI(b,s.u_vertical_gradient),u_height_factor:new o.aI(b,s.u_height_factor),u_image:new o.aH(b,s.u_image),u_texsize:new o.aO(b,s.u_texsize),u_pixel_coord_upper:new o.aO(b,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(b,s.u_pixel_coord_lower),u_scale:new o.aN(b,s.u_scale),u_fade:new o.aI(b,s.u_fade),u_opacity:new o.aI(b,s.u_opacity)}),fill:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix)}),fillPattern:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_image:new o.aH(b,s.u_image),u_texsize:new o.aO(b,s.u_texsize),u_pixel_coord_upper:new o.aO(b,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(b,s.u_pixel_coord_lower),u_scale:new o.aN(b,s.u_scale),u_fade:new o.aI(b,s.u_fade)}),fillOutline:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_world:new o.aO(b,s.u_world)}),fillOutlinePattern:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_world:new o.aO(b,s.u_world),u_image:new o.aH(b,s.u_image),u_texsize:new o.aO(b,s.u_texsize),u_pixel_coord_upper:new o.aO(b,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(b,s.u_pixel_coord_lower),u_scale:new o.aN(b,s.u_scale),u_fade:new o.aI(b,s.u_fade)}),circle:(b,s)=>({u_camera_to_center_distance:new o.aI(b,s.u_camera_to_center_distance),u_scale_with_map:new o.aH(b,s.u_scale_with_map),u_pitch_with_map:new o.aH(b,s.u_pitch_with_map),u_extrude_scale:new o.aO(b,s.u_extrude_scale),u_device_pixel_ratio:new o.aI(b,s.u_device_pixel_ratio),u_matrix:new o.aJ(b,s.u_matrix)}),collisionBox:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_pixel_extrude_scale:new o.aO(b,s.u_pixel_extrude_scale)}),collisionCircle:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_inv_matrix:new o.aJ(b,s.u_inv_matrix),u_camera_to_center_distance:new o.aI(b,s.u_camera_to_center_distance),u_viewport_size:new o.aO(b,s.u_viewport_size)}),debug:(b,s)=>({u_color:new o.aL(b,s.u_color),u_matrix:new o.aJ(b,s.u_matrix),u_overlay:new o.aH(b,s.u_overlay),u_overlay_scale:new o.aI(b,s.u_overlay_scale)}),clippingMask:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix)}),heatmap:(b,s)=>({u_extrude_scale:new o.aI(b,s.u_extrude_scale),u_intensity:new o.aI(b,s.u_intensity),u_matrix:new o.aJ(b,s.u_matrix)}),heatmapTexture:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_world:new o.aO(b,s.u_world),u_image:new o.aH(b,s.u_image),u_color_ramp:new o.aH(b,s.u_color_ramp),u_opacity:new o.aI(b,s.u_opacity)}),hillshade:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_image:new o.aH(b,s.u_image),u_latrange:new o.aO(b,s.u_latrange),u_light:new o.aO(b,s.u_light),u_shadow:new o.aL(b,s.u_shadow),u_highlight:new o.aL(b,s.u_highlight),u_accent:new o.aL(b,s.u_accent)}),hillshadePrepare:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_image:new o.aH(b,s.u_image),u_dimension:new o.aO(b,s.u_dimension),u_zoom:new o.aI(b,s.u_zoom),u_unpack:new o.aK(b,s.u_unpack)}),line:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_ratio:new o.aI(b,s.u_ratio),u_device_pixel_ratio:new o.aI(b,s.u_device_pixel_ratio),u_units_to_pixels:new o.aO(b,s.u_units_to_pixels)}),lineGradient:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_ratio:new o.aI(b,s.u_ratio),u_device_pixel_ratio:new o.aI(b,s.u_device_pixel_ratio),u_units_to_pixels:new o.aO(b,s.u_units_to_pixels),u_image:new o.aH(b,s.u_image),u_image_height:new o.aI(b,s.u_image_height)}),linePattern:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_texsize:new o.aO(b,s.u_texsize),u_ratio:new o.aI(b,s.u_ratio),u_device_pixel_ratio:new o.aI(b,s.u_device_pixel_ratio),u_image:new o.aH(b,s.u_image),u_units_to_pixels:new o.aO(b,s.u_units_to_pixels),u_scale:new o.aN(b,s.u_scale),u_fade:new o.aI(b,s.u_fade)}),lineSDF:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_ratio:new o.aI(b,s.u_ratio),u_device_pixel_ratio:new o.aI(b,s.u_device_pixel_ratio),u_units_to_pixels:new o.aO(b,s.u_units_to_pixels),u_patternscale_a:new o.aO(b,s.u_patternscale_a),u_patternscale_b:new o.aO(b,s.u_patternscale_b),u_sdfgamma:new o.aI(b,s.u_sdfgamma),u_image:new o.aH(b,s.u_image),u_tex_y_a:new o.aI(b,s.u_tex_y_a),u_tex_y_b:new o.aI(b,s.u_tex_y_b),u_mix:new o.aI(b,s.u_mix)}),raster:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_tl_parent:new o.aO(b,s.u_tl_parent),u_scale_parent:new o.aI(b,s.u_scale_parent),u_buffer_scale:new o.aI(b,s.u_buffer_scale),u_fade_t:new o.aI(b,s.u_fade_t),u_opacity:new o.aI(b,s.u_opacity),u_image0:new o.aH(b,s.u_image0),u_image1:new o.aH(b,s.u_image1),u_brightness_low:new o.aI(b,s.u_brightness_low),u_brightness_high:new o.aI(b,s.u_brightness_high),u_saturation_factor:new o.aI(b,s.u_saturation_factor),u_contrast_factor:new o.aI(b,s.u_contrast_factor),u_spin_weights:new o.aN(b,s.u_spin_weights)}),symbolIcon:(b,s)=>({u_is_size_zoom_constant:new o.aH(b,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(b,s.u_is_size_feature_constant),u_size_t:new o.aI(b,s.u_size_t),u_size:new o.aI(b,s.u_size),u_camera_to_center_distance:new o.aI(b,s.u_camera_to_center_distance),u_pitch:new o.aI(b,s.u_pitch),u_rotate_symbol:new o.aH(b,s.u_rotate_symbol),u_aspect_ratio:new o.aI(b,s.u_aspect_ratio),u_fade_change:new o.aI(b,s.u_fade_change),u_matrix:new o.aJ(b,s.u_matrix),u_label_plane_matrix:new o.aJ(b,s.u_label_plane_matrix),u_coord_matrix:new o.aJ(b,s.u_coord_matrix),u_is_text:new o.aH(b,s.u_is_text),u_pitch_with_map:new o.aH(b,s.u_pitch_with_map),u_is_along_line:new o.aH(b,s.u_is_along_line),u_is_variable_anchor:new o.aH(b,s.u_is_variable_anchor),u_texsize:new o.aO(b,s.u_texsize),u_texture:new o.aH(b,s.u_texture),u_translation:new o.aO(b,s.u_translation),u_pitched_scale:new o.aI(b,s.u_pitched_scale)}),symbolSDF:(b,s)=>({u_is_size_zoom_constant:new o.aH(b,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(b,s.u_is_size_feature_constant),u_size_t:new o.aI(b,s.u_size_t),u_size:new o.aI(b,s.u_size),u_camera_to_center_distance:new o.aI(b,s.u_camera_to_center_distance),u_pitch:new o.aI(b,s.u_pitch),u_rotate_symbol:new o.aH(b,s.u_rotate_symbol),u_aspect_ratio:new o.aI(b,s.u_aspect_ratio),u_fade_change:new o.aI(b,s.u_fade_change),u_matrix:new o.aJ(b,s.u_matrix),u_label_plane_matrix:new o.aJ(b,s.u_label_plane_matrix),u_coord_matrix:new o.aJ(b,s.u_coord_matrix),u_is_text:new o.aH(b,s.u_is_text),u_pitch_with_map:new o.aH(b,s.u_pitch_with_map),u_is_along_line:new o.aH(b,s.u_is_along_line),u_is_variable_anchor:new o.aH(b,s.u_is_variable_anchor),u_texsize:new o.aO(b,s.u_texsize),u_texture:new o.aH(b,s.u_texture),u_gamma_scale:new o.aI(b,s.u_gamma_scale),u_device_pixel_ratio:new o.aI(b,s.u_device_pixel_ratio),u_is_halo:new o.aH(b,s.u_is_halo),u_translation:new o.aO(b,s.u_translation),u_pitched_scale:new o.aI(b,s.u_pitched_scale)}),symbolTextAndIcon:(b,s)=>({u_is_size_zoom_constant:new o.aH(b,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(b,s.u_is_size_feature_constant),u_size_t:new o.aI(b,s.u_size_t),u_size:new o.aI(b,s.u_size),u_camera_to_center_distance:new o.aI(b,s.u_camera_to_center_distance),u_pitch:new o.aI(b,s.u_pitch),u_rotate_symbol:new o.aH(b,s.u_rotate_symbol),u_aspect_ratio:new o.aI(b,s.u_aspect_ratio),u_fade_change:new o.aI(b,s.u_fade_change),u_matrix:new o.aJ(b,s.u_matrix),u_label_plane_matrix:new o.aJ(b,s.u_label_plane_matrix),u_coord_matrix:new o.aJ(b,s.u_coord_matrix),u_is_text:new o.aH(b,s.u_is_text),u_pitch_with_map:new o.aH(b,s.u_pitch_with_map),u_is_along_line:new o.aH(b,s.u_is_along_line),u_is_variable_anchor:new o.aH(b,s.u_is_variable_anchor),u_texsize:new o.aO(b,s.u_texsize),u_texsize_icon:new o.aO(b,s.u_texsize_icon),u_texture:new o.aH(b,s.u_texture),u_texture_icon:new o.aH(b,s.u_texture_icon),u_gamma_scale:new o.aI(b,s.u_gamma_scale),u_device_pixel_ratio:new o.aI(b,s.u_device_pixel_ratio),u_is_halo:new o.aH(b,s.u_is_halo),u_translation:new o.aO(b,s.u_translation),u_pitched_scale:new o.aI(b,s.u_pitched_scale)}),background:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_opacity:new o.aI(b,s.u_opacity),u_color:new o.aL(b,s.u_color)}),backgroundPattern:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_opacity:new o.aI(b,s.u_opacity),u_image:new o.aH(b,s.u_image),u_pattern_tl_a:new o.aO(b,s.u_pattern_tl_a),u_pattern_br_a:new o.aO(b,s.u_pattern_br_a),u_pattern_tl_b:new o.aO(b,s.u_pattern_tl_b),u_pattern_br_b:new o.aO(b,s.u_pattern_br_b),u_texsize:new o.aO(b,s.u_texsize),u_mix:new o.aI(b,s.u_mix),u_pattern_size_a:new o.aO(b,s.u_pattern_size_a),u_pattern_size_b:new o.aO(b,s.u_pattern_size_b),u_scale_a:new o.aI(b,s.u_scale_a),u_scale_b:new o.aI(b,s.u_scale_b),u_pixel_coord_upper:new o.aO(b,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(b,s.u_pixel_coord_lower),u_tile_units_to_pixels:new o.aI(b,s.u_tile_units_to_pixels)}),terrain:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_texture:new o.aH(b,s.u_texture),u_ele_delta:new o.aI(b,s.u_ele_delta),u_fog_matrix:new o.aJ(b,s.u_fog_matrix),u_fog_color:new o.aL(b,s.u_fog_color),u_fog_ground_blend:new o.aI(b,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.aI(b,s.u_fog_ground_blend_opacity),u_horizon_color:new o.aL(b,s.u_horizon_color),u_horizon_fog_blend:new o.aI(b,s.u_horizon_fog_blend)}),terrainDepth:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_ele_delta:new o.aI(b,s.u_ele_delta)}),terrainCoords:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_texture:new o.aH(b,s.u_texture),u_terrain_coords_id:new o.aI(b,s.u_terrain_coords_id),u_ele_delta:new o.aI(b,s.u_ele_delta)}),sky:(b,s)=>({u_sky_color:new o.aL(b,s.u_sky_color),u_horizon_color:new o.aL(b,s.u_horizon_color),u_horizon:new o.aI(b,s.u_horizon),u_sky_horizon_blend:new o.aI(b,s.u_sky_horizon_blend)})};class Sl{constructor(s,p,g){this.context=s;let y=s.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){let p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let U2={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class wx{constructor(s,p,g,y){this.length=p.length,this.attributes=g,this.itemSize=p.bytesPerElement,this.dynamicDraw=y,this.context=s;let w=s.gl;this.buffer=w.createBuffer(),s.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);let p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,p){for(let g=0;g<this.attributes.length;g++){let y=p.attributes[this.attributes[g].name];y!==void 0&&s.enableVertexAttribArray(y)}}setVertexAttribPointers(s,p,g){for(let y=0;y<this.attributes.length;y++){let w=this.attributes[y],M=p.attributes[w.name];M!==void 0&&s.vertexAttribPointer(M,w.components,s[U2[w.type]],!1,this.itemSize,w.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let sf=new WeakMap;function oc(b){var s;if(sf.has(b))return sf.get(b);{let p=(s=b.getParameter(b.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return sf.set(b,p),p}}class cn{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Qv extends cn{getDefault(){return o.aM.transparent}set(s){let p=this.current;(s.r!==p.r||s.g!==p.g||s.b!==p.b||s.a!==p.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class V2 extends cn{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Dh extends cn{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class G2 extends cn{getDefault(){return[!0,!0,!0,!0]}set(s){let p=this.current;(s[0]!==p[0]||s[1]!==p[1]||s[2]!==p[2]||s[3]!==p[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class $I extends cn{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class $2 extends cn{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class HI extends cn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){let p=this.current;(s.func!==p.func||s.ref!==p.ref||s.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class bx extends cn{getDefault(){let s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){let p=this.current;(s[0]!==p[0]||s[1]!==p[1]||s[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class WI extends cn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;s?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=s,this.dirty=!1}}class ZI extends cn{getDefault(){return[0,1]}set(s){let p=this.current;(s[0]!==p[0]||s[1]!==p[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class YI extends cn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;s?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=s,this.dirty=!1}}class KI extends cn{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class lf extends cn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;s?p.enable(p.BLEND):p.disable(p.BLEND),this.current=s,this.dirty=!1}}class XI extends cn{getDefault(){let s=this.gl;return[s.ONE,s.ZERO]}set(s){let p=this.current;(s[0]!==p[0]||s[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class H2 extends cn{getDefault(){return o.aM.transparent}set(s){let p=this.current;(s.r!==p.r||s.g!==p.g||s.b!==p.b||s.a!==p.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class JI extends cn{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class Hd extends cn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;s?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=s,this.dirty=!1}}class W2 extends cn{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class eg extends cn{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Z2 extends cn{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class Y2 extends cn{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class QI extends cn{getDefault(){let s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){let p=this.current;(s[0]!==p[0]||s[1]!==p[1]||s[2]!==p[2]||s[3]!==p[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class eT extends cn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class tT extends cn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Sx extends cn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;p.bindTexture(p.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class rT extends cn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class tg extends cn{getDefault(){return null}set(s){let p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Iu extends cn{getDefault(){return null}set(s){var p;if(s===this.current&&!this.dirty)return;let g=this.gl;oc(g)?g.bindVertexArray(s):(p=g.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class Ex extends cn{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class Ix extends cn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Tx extends cn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class rg extends cn{constructor(s,p){super(s),this.context=s,this.parent=p}getDefault(){return null}}class Ax extends rg{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class uf extends rg{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Cx extends rg{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class K2{constructor(s,p,g,y,w){this.context=s,this.width=p,this.height=g;let M=s.gl,O=this.framebuffer=M.createFramebuffer();if(this.colorAttachment=new Ax(s,O),y)this.depthAttachment=w?new Cx(s,O):new uf(s,O);else if(w)throw new Error("Stencil cannot be set without depth");if(M.checkFramebufferStatus(M.FRAMEBUFFER)!==M.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let s=this.context.gl,p=this.colorAttachment.get();if(p&&s.deleteTexture(p),this.depthAttachment){let g=this.depthAttachment.get();g&&s.deleteRenderbuffer(g)}s.deleteFramebuffer(this.framebuffer)}}class mi{constructor(s,p,g){this.blendFunction=s,this.blendColor=p,this.mask=g}}mi.Replace=[1,0],mi.disabled=new mi(mi.Replace,o.aM.transparent,[!1,!1,!1,!1]),mi.unblended=new mi(mi.Replace,o.aM.transparent,[!0,!0,!0,!0]),mi.alphaBlended=new mi([1,771],o.aM.transparent,[!0,!0,!0,!0]);class X2{constructor(s){var p,g;if(this.gl=s,this.clearColor=new Qv(this),this.clearDepth=new V2(this),this.clearStencil=new Dh(this),this.colorMask=new G2(this),this.depthMask=new $I(this),this.stencilMask=new $2(this),this.stencilFunc=new HI(this),this.stencilOp=new bx(this),this.stencilTest=new WI(this),this.depthRange=new ZI(this),this.depthTest=new YI(this),this.depthFunc=new KI(this),this.blend=new lf(this),this.blendFunc=new XI(this),this.blendColor=new H2(this),this.blendEquation=new JI(this),this.cullFace=new Hd(this),this.cullFaceSide=new W2(this),this.frontFace=new eg(this),this.program=new Z2(this),this.activeTexture=new Y2(this),this.viewport=new QI(this),this.bindFramebuffer=new eT(this),this.bindRenderbuffer=new tT(this),this.bindTexture=new Sx(this),this.bindVertexBuffer=new rT(this),this.bindElementBuffer=new tg(this),this.bindVertexArray=new Iu(this),this.pixelStoreUnpack=new Ex(this),this.pixelStoreUnpackPremultiplyAlpha=new Ix(this),this.pixelStoreUnpackFlipY=new Tx(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),oc(s)){this.HALF_FLOAT=s.HALF_FLOAT;let y=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=s.RGBA16F)!==null&&p!==void 0?p:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(g=s.RGB16F)!==null&&g!==void 0?g:y==null?void 0:y.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");let y=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,p){return new Sl(this,s,p)}createVertexBuffer(s,p,g){return new wx(this,s,p,g)}createRenderbuffer(s,p,g){let y=this.gl,w=y.createRenderbuffer();return this.bindRenderbuffer.set(w),y.renderbufferStorage(y.RENDERBUFFER,s,p,g),this.bindRenderbuffer.set(null),w}createFramebuffer(s,p,g,y){return new K2(this,s,p,g,y)}clear({color:s,depth:p,stencil:g}){let y=this.gl,w=0;s&&(w|=y.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(w|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),g!==void 0&&(w|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),y.clear(w)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){o.aE(s.blendFunction,mi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return oc(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var p;return oc(this.gl)?this.gl.deleteVertexArray(s):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}class kr{constructor(s,p,g){this.func=s,this.mask=p,this.range=g}}kr.ReadOnly=!1,kr.ReadWrite=!0,kr.disabled=new kr(519,kr.ReadOnly,[0,1]);let ng=7680;class Dn{constructor(s,p,g,y,w,M){this.test=s,this.ref=p,this.mask=g,this.fail=y,this.depthFail=w,this.pass=M}}Dn.disabled=new Dn({func:519,mask:0},0,0,ng,ng,ng);class xn{constructor(s,p,g){this.enable=s,this.mode=p,this.frontFace=g}}let cf;function Wd(b,s,p,g,y){let w=b.context,M=w.gl,O=b.useProgram("collisionBox"),N=[],z=0,V=0;for(let ge=0;ge<g.length;ge++){let ye=g[ge],ce=s.getTile(ye).getBucket(p);if(!ce)continue;let Ce=y?ce.textCollisionBox:ce.iconCollisionBox,De=ce.collisionCircleArray;if(De.length>0){let je=o.H();o.aQ(je,ce.placementInvProjMatrix,b.transform.glCoordMatrix),o.aQ(je,je,ce.placementViewportMatrix),N.push({circleArray:De,circleOffset:V,transform:ye.posMatrix,invTransform:je,coord:ye}),z+=De.length/4,V=z}Ce&&O.draw(w,M.LINES,kr.disabled,Dn.disabled,b.colorModeForRenderPass(),xn.disabled,{u_matrix:ye.posMatrix,u_pixel_extrude_scale:[1/(G=b.transform).width,1/G.height]},b.style.map.terrain&&b.style.map.terrain.getTerrainData(ye),p.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,null,b.transform.zoom,null,null,Ce.collisionVertexBuffer)}var G;if(!y||!N.length)return;let X=b.useProgram("collisionCircle"),ne=new o.aR;ne.resize(4*z),ne._trim();let se=0;for(let ge of N)for(let ye=0;ye<ge.circleArray.length/4;ye++){let ce=4*ye,Ce=ge.circleArray[ce+0],De=ge.circleArray[ce+1],je=ge.circleArray[ce+2],et=ge.circleArray[ce+3];ne.emplace(se++,Ce,De,je,et,0),ne.emplace(se++,Ce,De,je,et,1),ne.emplace(se++,Ce,De,je,et,2),ne.emplace(se++,Ce,De,je,et,3)}(!cf||cf.length<2*z)&&(cf=function(ge){let ye=2*ge,ce=new o.aT;ce.resize(ye),ce._trim();for(let Ce=0;Ce<ye;Ce++){let De=6*Ce;ce.uint16[De+0]=4*Ce+0,ce.uint16[De+1]=4*Ce+1,ce.uint16[De+2]=4*Ce+2,ce.uint16[De+3]=4*Ce+2,ce.uint16[De+4]=4*Ce+3,ce.uint16[De+5]=4*Ce+0}return ce}(z));let he=w.createIndexBuffer(cf,!0),me=w.createVertexBuffer(ne,o.aS.members,!0);for(let ge of N){let ye=af(ge.transform,ge.invTransform,b.transform);X.draw(w,M.TRIANGLES,kr.disabled,Dn.disabled,b.colorModeForRenderPass(),xn.disabled,ye,b.style.map.terrain&&b.style.map.terrain.getTerrainData(ge.coord),p.id,me,he,o.a0.simpleSegment(0,2*ge.circleOffset,ge.circleArray.length,ge.circleArray.length/2),null,b.transform.zoom,null,null,null)}me.destroy(),he.destroy()}xn.disabled=new xn(!1,1029,2305),xn.backCCW=new xn(!0,1029,2305);let Zd=o.an(new Float32Array(16));function Mx(b,s,p,g,y,w){let{horizontalAlign:M,verticalAlign:O}=o.au(b);return new o.P((-(M-.5)*s/y+g[0])*w,(-(O-.5)*p/y+g[1])*w)}function ff(b,s,p,g,y,w){let M=s.tileAnchorPoint.add(new o.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let O=g.mult(w);p||(O=O.rotate(-y));let N=M.add(O);return oe(N.x,N.y,s.labelPlaneMatrix,s.getElevation).point}if(p){let O=Be(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(b),N=Math.atan(O.y/O.x)+(O.x<0?Math.PI:0);return b.add(g.rotate(N))}return b.add(g)}function Nh(b,s,p,g,y,w,M,O,N,z,V,G,X,ne){let se=b.text.placedSymbolArray,he=b.text.dynamicLayoutVertexArray,me=b.icon.dynamicLayoutVertexArray,ge={};he.clear();for(let ye=0;ye<se.length;ye++){let ce=se.get(ye),Ce=ce.hidden||!ce.crossTileID||b.allowVerticalPlacement&&!ce.placedOrientation?null:g[ce.crossTileID];if(Ce){let De=new o.P(ce.anchorX,ce.anchorY),je={getElevation:ne,width:y.width,height:y.height,labelPlaneMatrix:w,lineVertexArray:null,pitchWithMap:p,projection:V,projectionCache:null,tileAnchorPoint:De,translation:G,unwrappedTileID:X},et=p?oe(De.x,De.y,M,ne):Be(De.x,De.y,je),lt=W(y.cameraToCenterDistance,et.signedDistanceFromCamera),St=o.ai(b.textSizeData,N,ce)*lt/o.ap;p&&(St*=b.tilePixelRatio/O);let{width:Ot,height:mt,anchor:pt,textOffset:Gt,textBoxScale:gr}=Ce,gt=Mx(pt,Ot,mt,Gt,gr,St),Ct=V.getPitchedTextCorrection(y,De.add(new o.P(G[0],G[1])),X),dr=ff(et.point,je,s,gt,y.angle,Ct),Gn=b.allowVerticalPlacement&&ce.placedOrientation===o.ah.vertical?Math.PI/2:0;for(let Mr=0;Mr<ce.numGlyphs;Mr++)o.aj(he,dr,Gn);z&&ce.associatedIconIndex>=0&&(ge[ce.associatedIconIndex]={shiftedAnchor:dr,angle:Gn})}else Xt(ce.numGlyphs,he)}if(z){me.clear();let ye=b.icon.placedSymbolArray;for(let ce=0;ce<ye.length;ce++){let Ce=ye.get(ce);if(Ce.hidden)Xt(Ce.numGlyphs,me);else{let De=ge[ce];if(De)for(let je=0;je<Ce.numGlyphs;je++)o.aj(me,De.shiftedAnchor,De.angle);else Xt(Ce.numGlyphs,me)}}b.icon.dynamicLayoutVertexBuffer.updateData(me)}b.text.dynamicLayoutVertexBuffer.updateData(he)}function ls(b,s,p){return p.iconsInText&&s?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function Rx(b,s,p,g,y,w,M,O,N,z,V,G){let X=b.context,ne=X.gl,se=b.transform,he=nf(),me=O==="map",ge=N==="map",ye=O!=="viewport"&&p.layout.get("symbol-placement")!=="point",ce=me&&!ge&&!ye,Ce=!ge&&ye,De=!p.layout.get("symbol-sort-key").isConstant(),je=!1,et=b.depthModeForSublayer(0,kr.ReadOnly),lt=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),St=[],Ot=he.getCircleRadiusCorrection(se);for(let mt of g){let pt=s.getTile(mt),Gt=pt.getBucket(p);if(!Gt)continue;let gr=y?Gt.text:Gt.icon;if(!gr||!gr.segments.get().length||!gr.hasVisibleVertices)continue;let gt=gr.programConfigurations.get(p.id),Ct=y||Gt.sdfIcons,dr=y?Gt.textSizeData:Gt.iconSizeData,Gn=ge||se.pitch!==0,Mr=b.useProgram(ls(Ct,y,Gt),gt),Ur=o.ag(dr,se.zoom),$n=b.style.map.terrain&&b.style.map.terrain.getTerrainData(mt),Eo,Xs,Hn,la,zo=[0,0],Io=null;if(y)Xs=pt.glyphAtlasTexture,Hn=ne.LINEAR,Eo=pt.glyphAtlasTexture.size,Gt.iconsInText&&(zo=pt.imageAtlasTexture.size,Io=pt.imageAtlasTexture,la=Gn||b.options.rotating||b.options.zooming||dr.kind==="composite"||dr.kind==="camera"?ne.LINEAR:ne.NEAREST);else{let Wr=p.layout.get("icon-size").constantOr(0)!==1||Gt.iconsNeedLinear;Xs=pt.imageAtlasTexture,Hn=Ct||b.options.rotating||b.options.zooming||Wr||Gn?ne.LINEAR:ne.NEAREST,Eo=pt.imageAtlasTexture.size}let Bo=Cr(pt,1,b.transform.zoom),Tl=Ce?mt.posMatrix:Zd,Xh=bt(Tl,ge,me,b.transform,Bo),bg=vt(Tl,ge,me,b.transform,Bo),Jh=vt(mt.posMatrix,ge,me,b.transform,Bo),fs=he.translatePosition(b.transform,pt,w,M),Sg=lt&&Gt.hasTextData(),tw=p.layout.get("icon-text-fit")!=="none"&&Sg&&Gt.hasIconData();if(ye){let Wr=b.style.map.terrain?(Qh,ep)=>b.style.map.terrain.getElevation(mt,Qh,ep):null,vf=p.layout.get("text-rotation-alignment")==="map";K(Gt,mt.posMatrix,b,y,Xh,Jh,ge,z,vf,he,mt.toUnwrapped(),se.width,se.height,fs,Wr)}let hs=mt.posMatrix,ps=y&&lt||tw,ac=ye||ps?Zd:Xh,Js=bg,uo=Ct&&p.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0,To;To=Ct?Gt.iconsInText?yx(dr.kind,Ur,ce,ge,ye,ps,b,hs,ac,Js,fs,Eo,zo,Ot):$d(dr.kind,Ur,ce,ge,ye,ps,b,hs,ac,Js,fs,y,Eo,!0,Ot):GI(dr.kind,Ur,ce,ge,ye,ps,b,hs,ac,Js,fs,y,Eo,Ot);let Ba={program:Mr,buffers:gr,uniformValues:To,atlasTexture:Xs,atlasTextureIcon:Io,atlasInterpolation:Hn,atlasInterpolationIcon:la,isSDF:Ct,hasHalo:uo};if(De&&Gt.canOverlap){je=!0;let Wr=gr.segments.get();for(let vf of Wr)St.push({segments:new o.a0([vf]),sortKey:vf.sortKey,state:Ba,terrainData:$n})}else St.push({segments:gr.segments,sortKey:0,state:Ba,terrainData:$n})}je&&St.sort((mt,pt)=>mt.sortKey-pt.sortKey);for(let mt of St){let pt=mt.state;if(X.activeTexture.set(ne.TEXTURE0),pt.atlasTexture.bind(pt.atlasInterpolation,ne.CLAMP_TO_EDGE),pt.atlasTextureIcon&&(X.activeTexture.set(ne.TEXTURE1),pt.atlasTextureIcon&&pt.atlasTextureIcon.bind(pt.atlasInterpolationIcon,ne.CLAMP_TO_EDGE)),pt.isSDF){let Gt=pt.uniformValues;pt.hasHalo&&(Gt.u_is_halo=1,Px(pt.buffers,mt.segments,p,b,pt.program,et,V,G,Gt,mt.terrainData)),Gt.u_is_halo=0}Px(pt.buffers,mt.segments,p,b,pt.program,et,V,G,pt.uniformValues,mt.terrainData)}}function Px(b,s,p,g,y,w,M,O,N,z){let V=g.context;y.draw(V,V.gl.TRIANGLES,w,M,O,xn.disabled,N,z,p.id,b.layoutVertexBuffer,b.indexBuffer,s,p.paint,g.transform.zoom,b.programConfigurations.get(p.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function Ox(b,s,p,g){let y=b.context,w=y.gl,M=Dn.disabled,O=new mi([w.ONE,w.ONE],o.aM.transparent,[!0,!0,!0,!0]),N=s.getBucket(p);if(!N)return;let z=g.key,V=p.heatmapFbos.get(z);V||(V=Yd(y,s.tileSize,s.tileSize),p.heatmapFbos.set(z,V)),y.bindFramebuffer.set(V.framebuffer),y.viewport.set([0,0,s.tileSize,s.tileSize]),y.clear({color:o.aM.transparent});let G=N.programConfigurations.get(p.id),X=b.useProgram("heatmap",G),ne=b.style.map.terrain.getTerrainData(g);X.draw(y,w.TRIANGLES,kr.disabled,M,O,xn.disabled,sa(g.posMatrix,s,b.transform.zoom,p.paint.get("heatmap-intensity")),ne,p.id,N.layoutVertexBuffer,N.indexBuffer,N.segments,p.paint,b.transform.zoom,G)}function hf(b,s,p){let g=b.context,y=g.gl;g.setColorMode(b.colorModeForRenderPass());let w=Kd(g,s),M=p.key,O=s.heatmapFbos.get(M);O&&(g.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,O.colorAttachment.get()),g.activeTexture.set(y.TEXTURE1),w.bind(y.LINEAR,y.CLAMP_TO_EDGE),b.useProgram("heatmapTexture").draw(g,y.TRIANGLES,kr.disabled,Dn.disabled,b.colorModeForRenderPass(),xn.disabled,Yv(b,s,0,1),null,s.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments,s.paint,b.transform.zoom),O.destroy(),s.heatmapFbos.delete(M))}function Yd(b,s,p){var g,y;let w=b.gl,M=w.createTexture();w.bindTexture(w.TEXTURE_2D,M),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR);let O=(g=b.HALF_FLOAT)!==null&&g!==void 0?g:w.UNSIGNED_BYTE,N=(y=b.RGBA16F)!==null&&y!==void 0?y:w.RGBA;w.texImage2D(w.TEXTURE_2D,0,N,s,p,0,w.RGBA,O,null);let z=b.createFramebuffer(s,p,!1,!1);return z.colorAttachment.set(M),z}function Kd(b,s){return s.colorRampTexture||(s.colorRampTexture=new le(b,s.colorRamp,b.gl.RGBA)),s.colorRampTexture}function kh(b,s,p,g,y){if(!p||!g||!g.imageAtlas)return;let w=g.imageAtlas.patternPositions,M=w[p.to.toString()],O=w[p.from.toString()];if(!M&&O&&(M=O),!O&&M&&(O=M),!M||!O){let N=y.getPaintProperty(s);M=w[N],O=w[N]}M&&O&&b.setConstantPatternPositions(M,O)}function Xd(b,s,p,g,y,w,M){let O=b.context.gl,N="fill-pattern",z=p.paint.get(N),V=z&&z.constantOr(1),G=p.getCrossfadeParameters(),X,ne,se,he,me;M?(ne=V&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=O.LINES):(ne=V?"fillPattern":"fill",X=O.TRIANGLES);let ge=z.constantOr(null);for(let ye of g){let ce=s.getTile(ye);if(V&&!ce.patternsLoaded())continue;let Ce=ce.getBucket(p);if(!Ce)continue;let De=Ce.programConfigurations.get(p.id),je=b.useProgram(ne,De),et=b.style.map.terrain&&b.style.map.terrain.getTerrainData(ye);V&&(b.context.activeTexture.set(O.TEXTURE0),ce.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),De.updatePaintBuffers(G)),kh(De,N,ge,ce,p);let lt=et?ye:null,St=b.translatePosMatrix(lt?lt.posMatrix:ye.posMatrix,ce,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(M){he=Ce.indexBuffer2,me=Ce.segments2;let Ot=[O.drawingBufferWidth,O.drawingBufferHeight];se=ne==="fillOutlinePattern"&&V?zI(St,b,G,ce,Ot):q2(St,Ot)}else he=Ce.indexBuffer,me=Ce.segments,se=V?FI(St,b,G,ce):Oh(St);je.draw(b.context,X,y,b.stencilModeForClipping(ye),w,xn.disabled,se,et,p.id,Ce.layoutVertexBuffer,he,me,p.paint,b.transform.zoom,De)}}function ig(b,s,p,g,y,w,M){let O=b.context,N=O.gl,z="fill-extrusion-pattern",V=p.paint.get(z),G=V.constantOr(1),X=p.getCrossfadeParameters(),ne=p.paint.get("fill-extrusion-opacity"),se=V.constantOr(null);for(let he of g){let me=s.getTile(he),ge=me.getBucket(p);if(!ge)continue;let ye=b.style.map.terrain&&b.style.map.terrain.getTerrainData(he),ce=ge.programConfigurations.get(p.id),Ce=b.useProgram(G?"fillExtrusionPattern":"fillExtrusion",ce);G&&(b.context.activeTexture.set(N.TEXTURE0),me.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),ce.updatePaintBuffers(X)),kh(ce,z,se,me,p);let De=b.translatePosMatrix(he.posMatrix,me,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),je=p.paint.get("fill-extrusion-vertical-gradient"),et=G?Zv(De,b,je,ne,he,X,me):Vd(De,b,je,ne);Ce.draw(O,O.gl.TRIANGLES,y,w,M,xn.backCCW,et,ye,p.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,p.paint,b.transform.zoom,ce,b.style.map.terrain&&ge.centroidVertexBuffer)}}function qh(b,s,p,g,y,w,M){let O=b.context,N=O.gl,z=p.fbo;if(!z)return;let V=b.useProgram("hillshade"),G=b.style.map.terrain&&b.style.map.terrain.getTerrainData(s);O.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,z.colorAttachment.get()),V.draw(O,N.TRIANGLES,y,w,M,xn.disabled,((X,ne,se,he)=>{let me=se.paint.get("hillshade-shadow-color"),ge=se.paint.get("hillshade-highlight-color"),ye=se.paint.get("hillshade-accent-color"),ce=se.paint.get("hillshade-illumination-direction")*(Math.PI/180);se.paint.get("hillshade-illumination-anchor")==="viewport"&&(ce-=X.transform.angle);let Ce=!X.options.moving;return{u_matrix:he?he.posMatrix:X.transform.calculatePosMatrix(ne.tileID.toUnwrapped(),Ce),u_image:0,u_latrange:Kv(0,ne.tileID),u_light:[se.paint.get("hillshade-exaggeration"),ce],u_shadow:me,u_highlight:ge,u_accent:ye}})(b,p,g,G?s:null),G,g.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}function jh(b,s,p,g,y,w){let M=b.context,O=M.gl,N=s.dem;if(N&&N.data){let z=N.dim,V=N.stride,G=N.getPixels();if(M.activeTexture.set(O.TEXTURE1),M.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||b.getTileTexture(V),s.demTexture){let ne=s.demTexture;ne.update(G,{premultiply:!1}),ne.bind(O.NEAREST,O.CLAMP_TO_EDGE)}else s.demTexture=new le(M,G,O.RGBA,{premultiply:!1}),s.demTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE);M.activeTexture.set(O.TEXTURE0);let X=s.fbo;if(!X){let ne=new le(M,{width:z,height:z,data:null},O.RGBA);ne.bind(O.LINEAR,O.CLAMP_TO_EDGE),X=s.fbo=M.createFramebuffer(z,z,!0,!1),X.colorAttachment.set(ne.texture)}M.bindFramebuffer.set(X.framebuffer),M.viewport.set([0,0,z,z]),b.useProgram("hillshadePrepare").draw(M,O.TRIANGLES,g,y,w,xn.disabled,((ne,se)=>{let he=se.stride,me=o.H();return o.aP(me,0,o.X,-o.X,0,0,1),o.J(me,me,[0,-o.X,0]),{u_matrix:me,u_image:1,u_dimension:[he,he],u_zoom:ne.overscaledZ,u_unpack:se.getUnpackVector()}})(s.tileID,N),null,p.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function nT(b,s,p,g,y,w){let M=g.paint.get("raster-fade-duration");if(!w&&M>0){let O=d.now(),N=(O-b.timeAdded)/M,z=s?(O-s.timeAdded)/M:-1,V=p.getSource(),G=y.coveringZoomLevel({tileSize:V.tileSize,roundZoom:V.roundZoom}),X=!s||Math.abs(s.tileID.overscaledZ-G)>Math.abs(b.tileID.overscaledZ-G),ne=X&&b.refreshedUponExpiration?1:o.ac(X?N:1-z,0,1);return b.refreshedUponExpiration&&N>=1&&(b.refreshedUponExpiration=!1),s?{opacity:1,mix:1-ne}:{opacity:ne,mix:0}}return{opacity:1,mix:0}}let Lx=new o.aM(1,0,0,1),tn=new o.aM(0,1,0,1),og=new o.aM(0,0,1,1),J2=new o.aM(1,0,1,1),iT=new o.aM(0,1,1,1);function Fh(b,s,p,g){ag(b,0,s+p/2,b.transform.width,p,g)}function oT(b,s,p,g){ag(b,s-p/2,0,p,b.transform.height,g)}function ag(b,s,p,g,y,w){let M=b.context,O=M.gl;O.enable(O.SCISSOR_TEST),O.scissor(s*b.pixelRatio,p*b.pixelRatio,g*b.pixelRatio,y*b.pixelRatio),M.clear({color:w}),O.disable(O.SCISSOR_TEST)}function aT(b,s,p){let g=b.context,y=g.gl,w=p.posMatrix,M=b.useProgram("debug"),O=kr.disabled,N=Dn.disabled,z=b.colorModeForRenderPass(),V="$debug",G=b.style.map.terrain&&b.style.map.terrain.getTerrainData(p);g.activeTexture.set(y.TEXTURE0);let X=s.getTileByID(p.key).latestRawTileData,ne=Math.floor((X&&X.byteLength||0)/1024),se=s.getTile(p).tileSize,he=512/Math.min(se,512)*(p.overscaledZ/b.transform.zoom)*.5,me=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(me+=` => ${p.overscaledZ}`),function(ge,ye){ge.initDebugOverlayCanvas();let ce=ge.debugOverlayCanvas,Ce=ge.context.gl,De=ge.debugOverlayCanvas.getContext("2d");De.clearRect(0,0,ce.width,ce.height),De.shadowColor="white",De.shadowBlur=2,De.lineWidth=1.5,De.strokeStyle="white",De.textBaseline="top",De.font="bold 36px Open Sans, sans-serif",De.fillText(ye,5,5),De.strokeText(ye,5,5),ge.debugOverlayTexture.update(ce),ge.debugOverlayTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE)}(b,`${me} ${ne}kB`),M.draw(g,y.TRIANGLES,O,N,mi.alphaBlended,xn.disabled,Gd(w,o.aM.transparent,he),null,V,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),M.draw(g,y.LINE_STRIP,O,N,z,xn.disabled,Gd(w,o.aM.red),G,V,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function sT(b,s,p){let g=b.context,y=g.gl,w=b.colorModeForRenderPass(),M=new kr(y.LEQUAL,kr.ReadWrite,b.depthRangeFor3D),O=b.useProgram("terrain"),N=s.getTerrainMesh();g.bindFramebuffer.set(null),g.viewport.set([0,0,b.width,b.height]);for(let z of p){let V=b.renderToTexture.getTexture(z),G=s.getTerrainData(z.tileID);g.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,V.texture);let X=b.transform.calculatePosMatrix(z.tileID.toUnwrapped()),ne=s.getMeshFrameDelta(b.transform.zoom),se=b.transform.calculateFogMatrix(z.tileID.toUnwrapped()),he=vx(X,ne,se,b.style.sky,b.transform.pitch);O.draw(g,y.TRIANGLES,M,Dn.disabled,w,xn.backCCW,he,G,"terrain",N.vertexBuffer,N.indexBuffer,N.segments)}}class sg{constructor(s,p,g){this.vertexBuffer=s,this.indexBuffer=p,this.segments=g}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class lg{constructor(s,p){this.context=new X2(s),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=zt.maxUnderzooming+zt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new dx}resize(s,p,g){if(this.width=Math.floor(s*g),this.height=Math.floor(p*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let y of this.style._order)this.style._layers[y].resize()}setup(){let s=this.context,p=new o.aX;p.emplaceBack(0,0),p.emplaceBack(o.X,0),p.emplaceBack(0,o.X),p.emplaceBack(o.X,o.X),this.tileExtentBuffer=s.createVertexBuffer(p,of.members),this.tileExtentSegments=o.a0.simpleSegment(0,0,4,2);let g=new o.aX;g.emplaceBack(0,0),g.emplaceBack(o.X,0),g.emplaceBack(0,o.X),g.emplaceBack(o.X,o.X),this.debugBuffer=s.createVertexBuffer(g,of.members),this.debugSegments=o.a0.simpleSegment(0,0,4,5);let y=new o.$;y.emplaceBack(0,0,0,0),y.emplaceBack(o.X,0,o.X,0),y.emplaceBack(0,o.X,0,o.X),y.emplaceBack(o.X,o.X,o.X,o.X),this.rasterBoundsBuffer=s.createVertexBuffer(y,Wt.members),this.rasterBoundsSegments=o.a0.simpleSegment(0,0,4,2);let w=new o.aX;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(w,of.members),this.viewportSegments=o.a0.simpleSegment(0,0,4,2);let M=new o.aZ;M.emplaceBack(0),M.emplaceBack(1),M.emplaceBack(3),M.emplaceBack(2),M.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(M);let O=new o.aY;O.emplaceBack(0,1,2),O.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(O);let N=this.context.gl;this.stencilClearMode=new Dn({func:N.ALWAYS,mask:0},0,255,N.ZERO,N.ZERO,N.ZERO)}clearStencil(){let s=this.context,p=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let g=o.H();o.aP(g,0,this.width,this.height,0,0,1),o.K(g,g,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(s,p.TRIANGLES,kr.disabled,this.stencilClearMode,mi.disabled,xn.disabled,aa(g),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,p){if(this.currentStencilSource===s.source||!s.isTileClipped()||!p||!p.length)return;this.currentStencilSource=s.source;let g=this.context,y=g.gl;this.nextStencilID+p.length>256&&this.clearStencil(),g.setColorMode(mi.disabled),g.setDepthMode(kr.disabled);let w=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(let M of p){let O=this._tileClippingMaskIDs[M.key]=this.nextStencilID++,N=this.style.map.terrain&&this.style.map.terrain.getTerrainData(M);w.draw(g,y.TRIANGLES,kr.disabled,new Dn({func:y.ALWAYS,mask:0},O,255,y.KEEP,y.KEEP,y.REPLACE),mi.disabled,xn.disabled,aa(M.posMatrix),N,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let s=this.nextStencilID++,p=this.context.gl;return new Dn({func:p.NOTEQUAL,mask:255},s,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(s){let p=this.context.gl;return new Dn({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(s){let p=this.context.gl,g=s.sort((M,O)=>O.overscaledZ-M.overscaledZ),y=g[g.length-1].overscaledZ,w=g[0].overscaledZ-y+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();let M={};for(let O=0;O<w;O++)M[O+y]=new Dn({func:p.GEQUAL,mask:255},O+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=w,[M,g]}return[{[y]:Dn.disabled},g]}colorModeForRenderPass(){let s=this.context.gl;return this._showOverdrawInspector?new mi([s.CONSTANT_COLOR,s.ONE],new o.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?mi.unblended:mi.alphaBlended}depthModeForSublayer(s,p,g){if(!this.opaquePassEnabledForLayer())return kr.disabled;let y=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new kr(g||this.context.gl.LEQUAL,p,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,p){this.style=s,this.options=p,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(d.now()),this.imageManager.beginFrame();let g=this.style._order,y=this.style.sourceCaches,w={},M={},O={};for(let N in y){let z=y[N];z.used&&z.prepare(this.context),w[N]=z.getVisibleCoordinates(),M[N]=w[N].slice().reverse(),O[N]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let N=0;N<g.length;N++)if(this.style._layers[g[N]].is3D()){this.opaquePassCutoff=N;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let N of g){let z=this.style._layers[N];if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;let V=M[z.source];(z.type==="custom"||V.length)&&this.renderLayer(this,y[z.source],z,V)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?o.aM.black:o.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(N,z){let V=N.context,G=V.gl,X=((ge,ye,ce)=>({u_sky_color:ge.properties.get("sky-color"),u_horizon_color:ge.properties.get("horizon-color"),u_horizon:(ye.height/2+ye.getHorizon())*ce,u_sky_horizon_blend:ge.properties.get("sky-horizon-blend")*ye.height/2*ce}))(z,N.style.map.transform,N.pixelRatio),ne=new kr(G.LEQUAL,kr.ReadWrite,[0,1]),se=Dn.disabled,he=N.colorModeForRenderPass(),me=N.useProgram("sky");if(!z.mesh){let ge=new o.aX;ge.emplaceBack(-1,-1),ge.emplaceBack(1,-1),ge.emplaceBack(1,1),ge.emplaceBack(-1,1);let ye=new o.aY;ye.emplaceBack(0,1,2),ye.emplaceBack(0,2,3),z.mesh=new sg(V.createVertexBuffer(ge,of.members),V.createIndexBuffer(ye),o.a0.simpleSegment(0,0,ge.length,ye.length))}me.draw(V,G.TRIANGLES,ne,se,he,xn.disabled,X,void 0,"sky",z.mesh.vertexBuffer,z.mesh.indexBuffer,z.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){let N=this.style._layers[g[this.currentLayer]],z=y[N.source],V=w[N.source];this._renderTileClippingMasks(N,V),this.renderLayer(this,z,N,V)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){let N=this.style._layers[g[this.currentLayer]],z=y[N.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(N))continue;let V=(N.type==="symbol"?O:M)[N.source];this._renderTileClippingMasks(N,w[N.source]),this.renderLayer(this,z,N,V)}if(this.options.showTileBoundaries){let N=function(z,V){let G=null,X=Object.values(z._layers).flatMap(me=>me.source&&!me.isHidden(V)?[z.sourceCaches[me.source]]:[]),ne=X.filter(me=>me.getSource().type==="vector"),se=X.filter(me=>me.getSource().type!=="vector"),he=me=>{(!G||G.getSource().maxzoom<me.getSource().maxzoom)&&(G=me)};return ne.forEach(me=>he(me)),G||se.forEach(me=>he(me)),G}(this.style,this.transform.zoom);N&&function(z,V,G){for(let X=0;X<G.length;X++)aT(z,V,G[X])}(this,N,N.getVisibleCoordinates())}this.options.showPadding&&function(N){let z=N.transform.padding;Fh(N,N.transform.height-(z.top||0),3,Lx),Fh(N,z.bottom||0,3,tn),oT(N,z.left||0,3,og),oT(N,N.transform.width-(z.right||0),3,J2);let V=N.transform.centerPoint;(function(G,X,ne,se){ag(G,X-1,ne-10,2,20,se),ag(G,X-10,ne-1,20,2,se)})(N,V.x,N.transform.height-V.y,iT)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;let p=this.terrainFacilitator.matrix,g=this.transform.modelViewProjectionMatrix,y=this.terrainFacilitator.dirty;y||(y=s?!o.a_(p,g):!o.a$(p,g)),y||(y=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),y&&(o.b0(p,g),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(w,M){let O=w.context,N=O.gl,z=mi.unblended,V=new kr(N.LEQUAL,kr.ReadWrite,[0,1]),G=M.getTerrainMesh(),X=M.sourceCache.getRenderableTiles(),ne=w.useProgram("terrainDepth");O.bindFramebuffer.set(M.getFramebuffer("depth").framebuffer),O.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),O.clear({color:o.aM.transparent,depth:1});for(let se of X){let he=M.getTerrainData(se.tileID),me={u_matrix:w.transform.calculatePosMatrix(se.tileID.toUnwrapped()),u_ele_delta:M.getMeshFrameDelta(w.transform.zoom)};ne.draw(O,N.TRIANGLES,V,Dn.disabled,z,xn.backCCW,me,he,"terrain",G.vertexBuffer,G.indexBuffer,G.segments)}O.bindFramebuffer.set(null),O.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain),function(w,M){let O=w.context,N=O.gl,z=mi.unblended,V=new kr(N.LEQUAL,kr.ReadWrite,[0,1]),G=M.getTerrainMesh(),X=M.getCoordsTexture(),ne=M.sourceCache.getRenderableTiles(),se=w.useProgram("terrainCoords");O.bindFramebuffer.set(M.getFramebuffer("coords").framebuffer),O.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),O.clear({color:o.aM.transparent,depth:1}),M.coordsIndex=[];for(let he of ne){let me=M.getTerrainData(he.tileID);O.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,X.texture);let ge={u_matrix:w.transform.calculatePosMatrix(he.tileID.toUnwrapped()),u_terrain_coords_id:(255-M.coordsIndex.length)/255,u_texture:0,u_ele_delta:M.getMeshFrameDelta(w.transform.zoom)};se.draw(O,N.TRIANGLES,V,Dn.disabled,z,xn.backCCW,ge,me,"terrain",G.vertexBuffer,G.indexBuffer,G.segments),M.coordsIndex.push(he.tileID.key)}O.bindFramebuffer.set(null),O.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain))}renderLayer(s,p,g,y){if(!g.isHidden(this.transform.zoom)&&(g.type==="background"||g.type==="custom"||(y||[]).length))switch(this.id=g.id,g.type){case"symbol":(function(w,M,O,N,z){if(w.renderPass!=="translucent")return;let V=Dn.disabled,G=w.colorModeForRenderPass();(O._unevaluatedLayout.hasValue("text-variable-anchor")||O._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(X,ne,se,he,me,ge,ye,ce,Ce){let De=ne.transform,je=nf(),et=me==="map",lt=ge==="map";for(let St of X){let Ot=he.getTile(St),mt=Ot.getBucket(se);if(!mt||!mt.text||!mt.text.segments.get().length)continue;let pt=o.ag(mt.textSizeData,De.zoom),Gt=Cr(Ot,1,ne.transform.zoom),gr=bt(St.posMatrix,lt,et,ne.transform,Gt),gt=se.layout.get("icon-text-fit")!=="none"&&mt.hasIconData();if(pt){let Ct=Math.pow(2,De.zoom-Ot.tileID.overscaledZ),dr=ne.style.map.terrain?(Mr,Ur)=>ne.style.map.terrain.getElevation(St,Mr,Ur):null,Gn=je.translatePosition(De,Ot,ye,ce);Nh(mt,et,lt,Ce,De,gr,St.posMatrix,Ct,pt,gt,je,Gn,St.toUnwrapped(),dr)}}}(N,w,O,M,O.layout.get("text-rotation-alignment"),O.layout.get("text-pitch-alignment"),O.paint.get("text-translate"),O.paint.get("text-translate-anchor"),z),O.paint.get("icon-opacity").constantOr(1)!==0&&Rx(w,M,O,N,!1,O.paint.get("icon-translate"),O.paint.get("icon-translate-anchor"),O.layout.get("icon-rotation-alignment"),O.layout.get("icon-pitch-alignment"),O.layout.get("icon-keep-upright"),V,G),O.paint.get("text-opacity").constantOr(1)!==0&&Rx(w,M,O,N,!0,O.paint.get("text-translate"),O.paint.get("text-translate-anchor"),O.layout.get("text-rotation-alignment"),O.layout.get("text-pitch-alignment"),O.layout.get("text-keep-upright"),V,G),M.map.showCollisionBoxes&&(Wd(w,M,O,N,!0),Wd(w,M,O,N,!1))})(s,p,g,y,this.style.placement.variableOffsets);break;case"circle":(function(w,M,O,N){if(w.renderPass!=="translucent")return;let z=O.paint.get("circle-opacity"),V=O.paint.get("circle-stroke-width"),G=O.paint.get("circle-stroke-opacity"),X=!O.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(V.constantOr(1)===0||G.constantOr(1)===0))return;let ne=w.context,se=ne.gl,he=w.depthModeForSublayer(0,kr.ReadOnly),me=Dn.disabled,ge=w.colorModeForRenderPass(),ye=[];for(let ce=0;ce<N.length;ce++){let Ce=N[ce],De=M.getTile(Ce),je=De.getBucket(O);if(!je)continue;let et=je.programConfigurations.get(O.id),lt=w.useProgram("circle",et),St=je.layoutVertexBuffer,Ot=je.indexBuffer,mt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ce),pt={programConfiguration:et,program:lt,layoutVertexBuffer:St,indexBuffer:Ot,uniformValues:j2(w,Ce,De,O),terrainData:mt};if(X){let Gt=je.segments.get();for(let gr of Gt)ye.push({segments:new o.a0([gr]),sortKey:gr.sortKey,state:pt})}else ye.push({segments:je.segments,sortKey:0,state:pt})}X&&ye.sort((ce,Ce)=>ce.sortKey-Ce.sortKey);for(let ce of ye){let{programConfiguration:Ce,program:De,layoutVertexBuffer:je,indexBuffer:et,uniformValues:lt,terrainData:St}=ce.state;De.draw(ne,se.TRIANGLES,he,me,ge,xn.disabled,lt,St,O.id,je,et,ce.segments,O.paint,w.transform.zoom,Ce)}})(s,p,g,y);break;case"heatmap":(function(w,M,O,N){if(O.paint.get("heatmap-opacity")===0)return;let z=w.context;if(w.style.map.terrain){for(let V of N){let G=M.getTile(V);M.hasRenderableParent(V)||(w.renderPass==="offscreen"?Ox(w,G,O,V):w.renderPass==="translucent"&&hf(w,O,V))}z.viewport.set([0,0,w.width,w.height])}else w.renderPass==="offscreen"?function(V,G,X,ne){let se=V.context,he=se.gl,me=Dn.disabled,ge=new mi([he.ONE,he.ONE],o.aM.transparent,[!0,!0,!0,!0]);(function(ye,ce,Ce){let De=ye.gl;ye.activeTexture.set(De.TEXTURE1),ye.viewport.set([0,0,ce.width/4,ce.height/4]);let je=Ce.heatmapFbos.get(o.aU);je?(De.bindTexture(De.TEXTURE_2D,je.colorAttachment.get()),ye.bindFramebuffer.set(je.framebuffer)):(je=Yd(ye,ce.width/4,ce.height/4),Ce.heatmapFbos.set(o.aU,je))})(se,V,X),se.clear({color:o.aM.transparent});for(let ye=0;ye<ne.length;ye++){let ce=ne[ye];if(G.hasRenderableParent(ce))continue;let Ce=G.getTile(ce),De=Ce.getBucket(X);if(!De)continue;let je=De.programConfigurations.get(X.id),et=V.useProgram("heatmap",je),{zoom:lt}=V.transform;et.draw(se,he.TRIANGLES,kr.disabled,me,ge,xn.disabled,sa(ce.posMatrix,Ce,lt,X.paint.get("heatmap-intensity")),null,X.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,X.paint,V.transform.zoom,je)}se.viewport.set([0,0,V.width,V.height])}(w,M,O,N):w.renderPass==="translucent"&&function(V,G){let X=V.context,ne=X.gl;X.setColorMode(V.colorModeForRenderPass());let se=G.heatmapFbos.get(o.aU);se&&(X.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_2D,se.colorAttachment.get()),X.activeTexture.set(ne.TEXTURE1),Kd(X,G).bind(ne.LINEAR,ne.CLAMP_TO_EDGE),V.useProgram("heatmapTexture").draw(X,ne.TRIANGLES,kr.disabled,Dn.disabled,V.colorModeForRenderPass(),xn.disabled,Yv(V,G,0,1),null,G.id,V.viewportBuffer,V.quadTriangleIndexBuffer,V.viewportSegments,G.paint,V.transform.zoom))}(w,O)})(s,p,g,y);break;case"line":(function(w,M,O,N){if(w.renderPass!=="translucent")return;let z=O.paint.get("line-opacity"),V=O.paint.get("line-width");if(z.constantOr(1)===0||V.constantOr(1)===0)return;let G=w.depthModeForSublayer(0,kr.ReadOnly),X=w.colorModeForRenderPass(),ne=O.paint.get("line-dasharray"),se=O.paint.get("line-pattern"),he=se.constantOr(1),me=O.paint.get("line-gradient"),ge=O.getCrossfadeParameters(),ye=he?"linePattern":ne?"lineSDF":me?"lineGradient":"line",ce=w.context,Ce=ce.gl,De=!0;for(let je of N){let et=M.getTile(je);if(he&&!et.patternsLoaded())continue;let lt=et.getBucket(O);if(!lt)continue;let St=lt.programConfigurations.get(O.id),Ot=w.context.program.get(),mt=w.useProgram(ye,St),pt=De||mt.program!==Ot,Gt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(je),gr=se.constantOr(null);if(gr&&et.imageAtlas){let dr=et.imageAtlas,Gn=dr.patternPositions[gr.to.toString()],Mr=dr.patternPositions[gr.from.toString()];Gn&&Mr&&St.setConstantPatternPositions(Gn,Mr)}let gt=Gt?je:null,Ct=he?Lh(w,et,O,ge,gt):ne?F2(w,et,O,ne,ge,gt):me?BI(w,et,O,lt.lineClipsArray.length,gt):Xv(w,et,O,gt);if(he)ce.activeTexture.set(Ce.TEXTURE0),et.imageAtlasTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),St.updatePaintBuffers(ge);else if(ne&&(pt||w.lineAtlas.dirty))ce.activeTexture.set(Ce.TEXTURE0),w.lineAtlas.bind(ce);else if(me){let dr=lt.gradients[O.id],Gn=dr.texture;if(O.gradientVersion!==dr.version){let Mr=256;if(O.stepInterpolant){let Ur=M.getSource().maxzoom,$n=je.canonical.z===Ur?Math.ceil(1<<w.transform.maxZoom-je.canonical.z):1;Mr=o.ac(o.aV(lt.maxLineLength/o.X*1024*$n),256,ce.maxTextureSize)}dr.gradient=o.aW({expression:O.gradientExpression(),evaluationKey:"lineProgress",resolution:Mr,image:dr.gradient||void 0,clips:lt.lineClipsArray}),dr.texture?dr.texture.update(dr.gradient):dr.texture=new le(ce,dr.gradient,Ce.RGBA),dr.version=O.gradientVersion,Gn=dr.texture}ce.activeTexture.set(Ce.TEXTURE0),Gn.bind(O.stepInterpolant?Ce.NEAREST:Ce.LINEAR,Ce.CLAMP_TO_EDGE)}mt.draw(ce,Ce.TRIANGLES,G,w.stencilModeForClipping(je),X,xn.disabled,Ct,Gt,O.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,O.paint,w.transform.zoom,St,lt.layoutVertexBuffer2),De=!1}})(s,p,g,y);break;case"fill":(function(w,M,O,N){let z=O.paint.get("fill-color"),V=O.paint.get("fill-opacity");if(V.constantOr(1)===0)return;let G=w.colorModeForRenderPass(),X=O.paint.get("fill-pattern"),ne=w.opaquePassEnabledForLayer()&&!X.constantOr(1)&&z.constantOr(o.aM.transparent).a===1&&V.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===ne){let se=w.depthModeForSublayer(1,w.renderPass==="opaque"?kr.ReadWrite:kr.ReadOnly);Xd(w,M,O,N,se,G,!1)}if(w.renderPass==="translucent"&&O.paint.get("fill-antialias")){let se=w.depthModeForSublayer(O.getPaintProperty("fill-outline-color")?2:0,kr.ReadOnly);Xd(w,M,O,N,se,G,!0)}})(s,p,g,y);break;case"fill-extrusion":(function(w,M,O,N){let z=O.paint.get("fill-extrusion-opacity");if(z!==0&&w.renderPass==="translucent"){let V=new kr(w.context.gl.LEQUAL,kr.ReadWrite,w.depthRangeFor3D);if(z!==1||O.paint.get("fill-extrusion-pattern").constantOr(1))ig(w,M,O,N,V,Dn.disabled,mi.disabled),ig(w,M,O,N,V,w.stencilModeFor3D(),w.colorModeForRenderPass());else{let G=w.colorModeForRenderPass();ig(w,M,O,N,V,Dn.disabled,G)}}})(s,p,g,y);break;case"hillshade":(function(w,M,O,N){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;let z=w.context,V=w.depthModeForSublayer(0,kr.ReadOnly),G=w.colorModeForRenderPass(),[X,ne]=w.renderPass==="translucent"?w.stencilConfigForOverlap(N):[{},N];for(let se of ne){let he=M.getTile(se);he.needsHillshadePrepare!==void 0&&he.needsHillshadePrepare&&w.renderPass==="offscreen"?jh(w,he,O,V,Dn.disabled,G):w.renderPass==="translucent"&&qh(w,se,he,O,V,X[se.overscaledZ],G)}z.viewport.set([0,0,w.width,w.height])})(s,p,g,y);break;case"raster":(function(w,M,O,N){if(w.renderPass!=="translucent"||O.paint.get("raster-opacity")===0||!N.length)return;let z=w.context,V=z.gl,G=M.getSource(),X=w.useProgram("raster"),ne=w.colorModeForRenderPass(),[se,he]=G instanceof lr?[{},N]:w.stencilConfigForOverlap(N),me=he[he.length-1].overscaledZ,ge=!w.options.moving;for(let ye of he){let ce=w.depthModeForSublayer(ye.overscaledZ-me,O.paint.get("raster-opacity")===1?kr.ReadWrite:kr.ReadOnly,V.LESS),Ce=M.getTile(ye);Ce.registerFadeDuration(O.paint.get("raster-fade-duration"));let De=M.findLoadedParent(ye,0),je=M.findLoadedSibling(ye),et=nT(Ce,De||je||null,M,O,w.transform,w.style.map.terrain),lt,St,Ot=O.paint.get("raster-resampling")==="nearest"?V.NEAREST:V.LINEAR;z.activeTexture.set(V.TEXTURE0),Ce.texture.bind(Ot,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(V.TEXTURE1),De?(De.texture.bind(Ot,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),lt=Math.pow(2,De.tileID.overscaledZ-Ce.tileID.overscaledZ),St=[Ce.tileID.canonical.x*lt%1,Ce.tileID.canonical.y*lt%1]):Ce.texture.bind(Ot,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),Ce.texture.useMipmap&&z.extTextureFilterAnisotropic&&w.transform.pitch>20&&V.texParameterf(V.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax);let mt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ye),pt=mt?ye:null,Gt=pt?pt.posMatrix:w.transform.calculatePosMatrix(ye.toUnwrapped(),ge),gr=z2(Gt,St||[0,0],lt||1,et,O);G instanceof lr?X.draw(z,V.TRIANGLES,ce,Dn.disabled,ne,xn.disabled,gr,mt,O.id,G.boundsBuffer,w.quadTriangleIndexBuffer,G.boundsSegments):X.draw(z,V.TRIANGLES,ce,se[ye.overscaledZ],ne,xn.disabled,gr,mt,O.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments)}})(s,p,g,y);break;case"background":(function(w,M,O,N){let z=O.paint.get("background-color"),V=O.paint.get("background-opacity");if(V===0)return;let G=w.context,X=G.gl,ne=w.transform,se=ne.tileSize,he=O.paint.get("background-pattern");if(w.isPatternMissing(he))return;let me=!he&&z.a===1&&V===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==me)return;let ge=Dn.disabled,ye=w.depthModeForSublayer(0,me==="opaque"?kr.ReadWrite:kr.ReadOnly),ce=w.colorModeForRenderPass(),Ce=w.useProgram(he?"backgroundPattern":"background"),De=N||ne.coveringTiles({tileSize:se,terrain:w.style.map.terrain});he&&(G.activeTexture.set(X.TEXTURE0),w.imageManager.bind(w.context));let je=O.getCrossfadeParameters();for(let et of De){let lt=N?et.posMatrix:w.transform.calculatePosMatrix(et.toUnwrapped()),St=he?_x(lt,V,w,he,{tileID:et,tileSize:se},je):Jv(lt,V,z),Ot=w.style.map.terrain&&w.style.map.terrain.getTerrainData(et);Ce.draw(G,X.TRIANGLES,ye,ge,ce,xn.disabled,St,Ot,O.id,w.tileExtentBuffer,w.quadTriangleIndexBuffer,w.tileExtentSegments)}})(s,0,g,y);break;case"custom":(function(w,M,O){let N=w.context,z=O.implementation;if(w.renderPass==="offscreen"){let V=z.prerender;V&&(w.setCustomLayerDefaults(),N.setColorMode(w.colorModeForRenderPass()),V.call(z,N.gl,w.transform.customLayerMatrix()),N.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),N.setColorMode(w.colorModeForRenderPass()),N.setStencilMode(Dn.disabled);let V=z.renderingMode==="3d"?new kr(w.context.gl.LEQUAL,kr.ReadWrite,w.depthRangeFor3D):w.depthModeForSublayer(0,kr.ReadOnly);N.setDepthMode(V),z.render(N.gl,w.transform.customLayerMatrix(),{farZ:w.transform.farZ,nearZ:w.transform.nearZ,fov:w.transform._fov,modelViewProjectionMatrix:w.transform.modelViewProjectionMatrix,projectionMatrix:w.transform.projectionMatrix}),N.setDirty(),w.setBaseState(),N.bindFramebuffer.set(null)}})(s,0,g);}}translatePosMatrix(s,p,g,y,w){if(!g[0]&&!g[1])return s;let M=w?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(M){let z=Math.sin(M),V=Math.cos(M);g=[g[0]*V-g[1]*z,g[0]*z+g[1]*V]}let O=[w?g[0]:Cr(p,g[0],this.transform.zoom),w?g[1]:Cr(p,g[1],this.transform.zoom),0],N=new Float32Array(16);return o.J(N,s,O),N}saveTileTexture(s){let p=this._tileTextures[s.size[0]];p?p.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){let p=this._tileTextures[s];return p&&p.length>0?p.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;let p=this.imageManager.getPattern(s.from.toString()),g=this.imageManager.getPattern(s.to.toString());return!p||!g}useProgram(s,p){this.cache=this.cache||{};let g=s+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[g]||(this.cache[g]=new gx(this.context,ic[s],p,xx[s],this._showOverdrawInspector,this.style.map.terrain)),this.cache[g]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new le(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:s,drawingBufferHeight:p}=this.context.gl;return this.width!==s||this.height!==p}}class zh{constructor(s,p){this.points=s,this.planes=p}static fromInvProjectionMatrix(s,p,g){let y=Math.pow(2,g),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(O=>{let N=1/(O=o.af([],O,s))[3]/p*y;return o.b1(O,O,[N,N,1/O[3],N])}),M=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(O=>{let N=function(X,ne){var se=ne[0],he=ne[1],me=ne[2],ge=se*se+he*he+me*me;return ge>0&&(ge=1/Math.sqrt(ge)),X[0]=ne[0]*ge,X[1]=ne[1]*ge,X[2]=ne[2]*ge,X}([],function(X,ne,se){var he=ne[0],me=ne[1],ge=ne[2],ye=se[0],ce=se[1],Ce=se[2];return X[0]=me*Ce-ge*ce,X[1]=ge*ye-he*Ce,X[2]=he*ce-me*ye,X}([],ee([],w[O[0]],w[O[1]]),ee([],w[O[2]],w[O[1]]))),z=-((V=N)[0]*(G=w[O[1]])[0]+V[1]*G[1]+V[2]*G[2]);var V,G;return N.concat(z)});return new zh(w,M)}}class Bh{constructor(s,p){this.min=s,this.max=p,this.center=function(g,y,w){return g[0]=.5*y[0],g[1]=.5*y[1],g[2]=.5*y[2],g}([],function(g,y,w){return g[0]=y[0]+w[0],g[1]=y[1]+w[1],g[2]=y[2]+w[2],g}([],this.min,this.max))}quadrant(s){let p=[s%2==0,s<2],g=B(this.min),y=B(this.max);for(let w=0;w<p.length;w++)g[w]=p[w]?this.min[w]:this.center[w],y[w]=p[w]?this.center[w]:this.max[w];return y[2]=this.max[2],new Bh(g,y)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersects(s){let p=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],g=!0;for(let y=0;y<s.planes.length;y++){let w=s.planes[y],M=0;for(let O=0;O<p.length;O++)o.b2(w,p[O])>=0&&M++;if(M===0)return 0;M!==p.length&&(g=!1)}if(g)return 2;for(let y=0;y<3;y++){let w=Number.MAX_VALUE,M=-Number.MAX_VALUE;for(let O=0;O<s.points.length;O++){let N=s.points[O][y]-this.min[y];w=Math.min(w,N),M=Math.max(M,N)}if(M<0||w>this.max[y]-this.min[y])return 0}return 1}}class Uh{constructor(s=0,p=0,g=0,y=0){if(isNaN(s)||s<0||isNaN(p)||p<0||isNaN(g)||g<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=p,this.left=g,this.right=y}interpolate(s,p,g){return p.top!=null&&s.top!=null&&(this.top=o.y.number(s.top,p.top,g)),p.bottom!=null&&s.bottom!=null&&(this.bottom=o.y.number(s.bottom,p.bottom,g)),p.left!=null&&s.left!=null&&(this.left=o.y.number(s.left,p.left,g)),p.right!=null&&s.right!=null&&(this.right=o.y.number(s.right,p.right,g)),this}getCenter(s,p){let g=o.ac((this.left+s-this.right)/2,0,s),y=o.ac((this.top+p-this.bottom)/2,0,p);return new o.P(g,y)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Uh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}let Dx=85.051129;class Vh{constructor(s,p,g,y,w){this.tileSize=512,this._renderWorldCopies=w===void 0||!!w,this._minZoom=s||0,this._maxZoom=p||22,this._minPitch=g==null?0:g,this._maxPitch=y==null?60:y,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Uh,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){let s=new Vh(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return s.apply(this),s}apply(s){this.tileSize=s.tileSize,this.latRange=s.latRange,this.lngRange=s.lngRange,this.width=s.width,this.height=s.height,this._center=s._center,this._elevation=s._elevation,this.minElevationForCurrentTile=s.minElevationForCurrentTile,this.zoom=s.zoom,this.angle=s.angle,this._fov=s._fov,this._pitch=s._pitch,this._unmodified=s._unmodified,this._edgeInsets=s._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(s){let p=-o.b3(s,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=function(){var g=new o.A(4);return o.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}(),function(g,y,w){var M=y[0],O=y[1],N=y[2],z=y[3],V=Math.sin(w),G=Math.cos(w);g[0]=M*G+N*V,g[1]=O*G+z*V,g[2]=M*-V+N*G,g[3]=O*-V+z*G}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){let p=o.ac(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=s/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(s){let p=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.tileZoom=Math.max(0,Math.floor(p)),this.scale=this.zoomScale(p),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,p,g){this._unmodified=!1,this._edgeInsets.interpolate(s,p,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){let p=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(s){let p=[new o.b4(0,s)];if(this._renderWorldCopies){let g=this.pointCoordinate(new o.P(0,0)),y=this.pointCoordinate(new o.P(this.width,0)),w=this.pointCoordinate(new o.P(this.width,this.height)),M=this.pointCoordinate(new o.P(0,this.height)),O=Math.floor(Math.min(g.x,y.x,w.x,M.x)),N=Math.floor(Math.max(g.x,y.x,w.x,M.x)),z=1;for(let V=O-z;V<=N+z;V++)V!==0&&p.push(new o.b4(V,s))}return p}coveringTiles(s){var p,g;let y=this.coveringZoomLevel(s),w=y;if(s.minzoom!==void 0&&y<s.minzoom)return[];s.maxzoom!==void 0&&y>s.maxzoom&&(y=s.maxzoom);let M=this.pointCoordinate(this.getCameraPoint()),O=o.Z.fromLngLat(this.center),N=Math.pow(2,y),z=[N*M.x,N*M.y,0],V=[N*O.x,N*O.y,0],G=zh.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,y),X=s.minzoom||0;!s.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(X=y);let ne=s.terrain?2/Math.min(this.tileSize,s.tileSize)*this.tileSize:3,se=ce=>({aabb:new Bh([ce*N,0,0],[(ce+1)*N,N,0]),zoom:0,x:0,y:0,wrap:ce,fullyVisible:!1}),he=[],me=[],ge=y,ye=s.reparseOverscaled?w:y;if(this._renderWorldCopies)for(let ce=1;ce<=3;ce++)he.push(se(-ce)),he.push(se(ce));for(he.push(se(0));he.length>0;){let ce=he.pop(),Ce=ce.x,De=ce.y,je=ce.fullyVisible;if(!je){let mt=ce.aabb.intersects(G);if(mt===0)continue;je=mt===2}let et=s.terrain?z:V,lt=ce.aabb.distanceX(et),St=ce.aabb.distanceY(et),Ot=Math.max(Math.abs(lt),Math.abs(St));if(ce.zoom===ge||Ot>ne+(1<<ge-ce.zoom)-2&&ce.zoom>=X){let mt=ge-ce.zoom,pt=z[0]-.5-(Ce<<mt),Gt=z[1]-.5-(De<<mt);me.push({tileID:new o.S(ce.zoom===ge?ye:ce.zoom,ce.wrap,ce.zoom,Ce,De),distanceSq:J([V[0]-.5-Ce,V[1]-.5-De]),tileDistanceToCamera:Math.sqrt(pt*pt+Gt*Gt)})}else for(let mt=0;mt<4;mt++){let pt=(Ce<<1)+mt%2,Gt=(De<<1)+(mt>>1),gr=ce.zoom+1,gt=ce.aabb.quadrant(mt);if(s.terrain){let Ct=new o.S(gr,ce.wrap,gr,pt,Gt),dr=s.terrain.getMinMaxElevation(Ct),Gn=(p=dr.minElevation)!==null&&p!==void 0?p:this.elevation,Mr=(g=dr.maxElevation)!==null&&g!==void 0?g:this.elevation;gt=new Bh([gt.min[0],gt.min[1],Gn],[gt.max[0],gt.max[1],Mr])}he.push({aabb:gt,zoom:gr,x:pt,y:Gt,wrap:ce.wrap,fullyVisible:je})}}return me.sort((ce,Ce)=>ce.distanceSq-Ce.distanceSq).map(ce=>ce.tileID)}resize(s,p){this.width=s,this.height=p,this.pixelsToGLUnits=[2/s,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){let p=o.ac(s.lat,-85.051129,Dx);return new o.P(o.O(s.lng)*this.worldSize,o.Q(p)*this.worldSize)}unproject(s){return new o.Z(s.x/this.worldSize,s.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(s){let p=this.elevation,g=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,y=this.pointLocation(this.centerPoint,s),w=s.getElevationForLngLatZoom(y,this.tileZoom);if(!(this.elevation-w))return;let M=g+p-w,O=Math.cos(this._pitch)*this.cameraToCenterDistance/M/o.b5(1,y.lat),N=this.scaleZoom(O/this.tileSize);this._elevation=w,this._center=y,this.zoom=N}setLocationAtPoint(s,p){let g=this.pointCoordinate(p),y=this.pointCoordinate(this.centerPoint),w=this.locationCoordinate(s),M=new o.Z(w.x-(g.x-y.x),w.y-(g.y-y.y));this.center=this.coordinateLocation(M),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(s,p){return p?this.coordinatePoint(this.locationCoordinate(s),p.getElevationForLngLatZoom(s,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(s))}pointLocation(s,p){return this.coordinateLocation(this.pointCoordinate(s,p))}locationCoordinate(s){return o.Z.fromLngLat(s)}coordinateLocation(s){return s&&s.toLngLat()}pointCoordinate(s,p){if(p){let X=p.pointCoordinate(s);if(X!=null)return X}let g=[s.x,s.y,0,1],y=[s.x,s.y,1,1];o.af(g,g,this.pixelMatrixInverse),o.af(y,y,this.pixelMatrixInverse);let w=g[3],M=y[3],O=g[1]/w,N=y[1]/M,z=g[2]/w,V=y[2]/M,G=z===V?0:(0-z)/(V-z);return new o.Z(o.y.number(g[0]/w,y[0]/M,G)/this.worldSize,o.y.number(O,N,G)/this.worldSize)}coordinatePoint(s,p=0,g=this.pixelMatrix){let y=[s.x*this.worldSize,s.y*this.worldSize,p,1];return o.af(y,y,g),new o.P(y[0]/y[3],y[1]/y[3])}getBounds(){let s=Math.max(0,this.height/2-this.getHorizon());return new be().extend(this.pointLocation(new o.P(0,s))).extend(this.pointLocation(new o.P(this.width,s))).extend(this.pointLocation(new o.P(this.width,this.height))).extend(this.pointLocation(new o.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new be([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(s){s?(this.lngRange=[s.getWest(),s.getEast()],this.latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Dx])}calculateTileMatrix(s){let p=s.canonical,g=this.worldSize/this.zoomScale(p.z),y=p.x+Math.pow(2,p.z)*s.wrap,w=o.an(new Float64Array(16));return o.J(w,w,[y*g,p.y*g,0]),o.K(w,w,[g/o.X,g/o.X,1]),w}calculatePosMatrix(s,p=!1){let g=s.key,y=p?this._alignedPosMatrixCache:this._posMatrixCache;if(y[g])return y[g];let w=this.calculateTileMatrix(s);return o.L(w,p?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,w),y[g]=new Float32Array(w),y[g]}calculateFogMatrix(s){let p=s.key,g=this._fogMatrixCache;if(g[p])return g[p];let y=this.calculateTileMatrix(s);return o.L(y,this.fogMatrix,y),g[p]=new Float32Array(y),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(s,p){p=o.ac(+p,this.minZoom,this.maxZoom);let g={center:new o.N(s.lng,s.lat),zoom:p},y=this.lngRange;if(!this._renderWorldCopies&&y===null){let ce=179.9999999999;y=[-ce,ce]}let w=this.tileSize*this.zoomScale(g.zoom),M=0,O=w,N=0,z=w,V=0,G=0,{x:X,y:ne}=this.size;if(this.latRange){let ce=this.latRange;M=o.Q(ce[1])*w,O=o.Q(ce[0])*w,O-M<ne&&(V=ne/(O-M))}y&&(N=o.b3(o.O(y[0])*w,0,w),z=o.b3(o.O(y[1])*w,0,w),z<N&&(z+=w),z-N<X&&(G=X/(z-N)));let{x:se,y:he}=this.project.call({worldSize:w},s),me,ge,ye=Math.max(G||0,V||0);if(ye){let ce=new o.P(G?(z+N)/2:se,V?(O+M)/2:he);return g.center=this.unproject.call({worldSize:w},ce).wrap(),g.zoom+=this.scaleZoom(ye),g}if(this.latRange){let ce=ne/2;he-ce<M&&(ge=M+ce),he+ce>O&&(ge=O-ce)}if(y){let ce=(N+z)/2,Ce=se;this._renderWorldCopies&&(Ce=o.b3(se,ce-w/2,ce+w/2));let De=X/2;Ce-De<N&&(me=N+De),Ce+De>z&&(me=z-De)}if(me!==void 0||ge!==void 0){let ce=new o.P(me!=null?me:se,ge!=null?ge:he);g.center=this.unproject.call({worldSize:w},ce).wrap()}return g}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let s=this._unmodified,{center:p,zoom:g}=this.getConstrained(this.center,this.zoom);this.center=p,this.zoom=g,this._unmodified=s,this._constraining=!1}_calcMatrices(){if(!this.height)return;let s=this.centerOffset,p=this.point.x,g=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.b5(1,this.center.lat)*this.worldSize;let y=o.an(new Float64Array(16));o.K(y,y,[this.width/2,-this.height/2,1]),o.J(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=o.an(new Float64Array(16)),o.K(y,y,[1,-1,1]),o.J(y,y,[-1,-1,0]),o.K(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y;let w=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),M=Math.min(this.elevation,this.minElevationForCurrentTile),O=w-M*this._pixelPerMeter/Math.cos(this._pitch),N=M<0?O:w,z=Math.PI/2+this._pitch,V=this._fov*(.5+s.y/this.height),G=Math.sin(V)*N/Math.sin(o.ac(Math.PI-z-V,.01,Math.PI-.01)),X=this.getHorizon(),ne=2*Math.atan(X/this.cameraToCenterDistance)*(.5+s.y/(2*X)),se=Math.sin(ne)*N/Math.sin(o.ac(Math.PI-z-ne,.01,Math.PI-.01)),he=Math.min(G,se);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*he+N),this.nearZ=this.height/50,y=new Float64Array(16),o.b6(y,this._fov,this.width/this.height,this.nearZ,this.farZ),y[8]=2*-s.x/this.width,y[9]=2*s.y/this.height,this.projectionMatrix=o.ae(y),o.K(y,y,[1,-1,1]),o.J(y,y,[0,0,-this.cameraToCenterDistance]),o.b7(y,y,this._pitch),o.ad(y,y,this.angle),o.J(y,y,[-p,-g,0]),this.mercatorMatrix=o.K([],y,[this.worldSize,this.worldSize,this.worldSize]),o.K(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.L(new Float64Array(16),this.labelPlaneMatrix,y),o.J(y,y,[0,0,-this.elevation]),this.modelViewProjectionMatrix=y,this.invModelViewProjectionMatrix=o.as([],y),this.fogMatrix=new Float64Array(16),o.b6(this.fogMatrix,this._fov,this.width/this.height,w,this.farZ),this.fogMatrix[8]=2*-s.x/this.width,this.fogMatrix[9]=2*s.y/this.height,o.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),o.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),o.b7(this.fogMatrix,this.fogMatrix,this._pitch),o.ad(this.fogMatrix,this.fogMatrix,this.angle),o.J(this.fogMatrix,this.fogMatrix,[-p,-g,0]),o.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),o.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=o.L(new Float64Array(16),this.labelPlaneMatrix,y);let me=this.width%2/2,ge=this.height%2/2,ye=Math.cos(this.angle),ce=Math.sin(this.angle),Ce=p-Math.round(p)+ye*me+ce*ge,De=g-Math.round(g)+ye*ge+ce*me,je=new Float64Array(y);if(o.J(je,je,[Ce>.5?Ce-1:Ce,De>.5?De-1:De,0]),this.alignedModelViewProjectionMatrix=je,y=o.as(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let s=this.pointCoordinate(new o.P(0,0)),p=[s.x*this.worldSize,s.y*this.worldSize,0,1];return o.af(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,s))}getCameraQueryGeometry(s){let p=this.getCameraPoint();if(s.length===1)return[s[0],p];{let g=p.x,y=p.y,w=p.x,M=p.y;for(let O of s)g=Math.min(g,O.x),y=Math.min(y,O.y),w=Math.max(w,O.x),M=Math.max(M,O.y);return[new o.P(g,y),new o.P(w,y),new o.P(w,M),new o.P(g,M),new o.P(g,y)]}}lngLatToCameraDepth(s,p){let g=this.locationCoordinate(s),y=[g.x*this.worldSize,g.y*this.worldSize,p,1];return o.af(y,y,this.modelViewProjectionMatrix),y[2]/y[3]}}function Jd(b,s){let p,g=!1,y=null,w=null,M=()=>{y=null,g&&(b.apply(w,p),y=setTimeout(M,s),g=!1)};return(...O)=>(g=!0,w=this,p=O,y||M(),y)}class ug{constructor(s){this._getCurrentHash=()=>{let p=window.location.hash.replace("#","");if(this._hashName){let g;return p.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(g=y)}),(g&&g[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{let p=this._getCurrentHash();if(p.length>=3&&!p.some(g=>isNaN(g))){let g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:g,pitch:+(p[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{let p=window.location.href.replace(/(#.+)?$/,this.getHashString());window.history.replaceState(window.history.state,null,p)},this._removeHash=()=>{let p=this._getCurrentHash();if(p.length===0)return;let g=p.join("/"),y=g;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${g}`);let w=window.location.hash.replace(y,"");w.startsWith("#&")?w=w.slice(0,1)+w.slice(2):w==="#"&&(w="");let M=window.location.href.replace(/(#.+)?$/,w);M=M.replace("&&","&"),window.history.replaceState(window.history.state,null,M)},this._updateHash=Jd(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){let p=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,y=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,y),M=Math.round(p.lng*w)/w,O=Math.round(p.lat*w)/w,N=this._map.getBearing(),z=this._map.getPitch(),V="";if(V+=s?`/${M}/${O}/${g}`:`${g}/${O}/${M}`,(N||z)&&(V+="/"+Math.round(10*N)/10),z&&(V+=`/${Math.round(z)}`),this._hashName){let G=this._hashName,X=!1,ne=window.location.hash.slice(1).split("&").map(se=>{let he=se.split("=")[0];return he===G?(X=!0,`${he}=${V}`):se}).filter(se=>se);return X||ne.push(`${G}=${V}`),`#${ne.join("&")}`}return`#${V}`}}let cg={linearity:.3,easing:o.b8(0,0,.3,1)},Nx=o.e({deceleration:2500,maxSpeed:1400},cg),Q2=o.e({deceleration:20,maxSpeed:1400},cg),lT=o.e({deceleration:1e3,maxSpeed:360},cg),fg=o.e({deceleration:1e3,maxSpeed:90},cg);class kx{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:d.now(),settings:s})}_drainInertiaBuffer(){let s=this._inertiaBuffer,p=d.now();for(;s.length>0&&p-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let p={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:w}of this._inertiaBuffer)p.zoom+=w.zoomDelta||0,p.bearing+=w.bearingDelta||0,p.pitch+=w.pitchDelta||0,w.panDelta&&p.pan._add(w.panDelta),w.around&&(p.around=w.around),w.pinchAround&&(p.pinchAround=w.pinchAround);let g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(p.pan.mag()){let w=em(p.pan.mag(),g,o.e({},Nx,s||{}));y.offset=p.pan.mult(w.amount/p.pan.mag()),y.center=this._map.transform.center,Qd(y,w)}if(p.zoom){let w=em(p.zoom,g,Q2);y.zoom=this._map.transform.zoom+w.amount,Qd(y,w)}if(p.bearing){let w=em(p.bearing,g,lT);y.bearing=this._map.transform.bearing+o.ac(w.amount,-179,179),Qd(y,w)}if(p.pitch){let w=em(p.pitch,g,fg);y.pitch=this._map.transform.pitch+w.amount,Qd(y,w)}if(y.zoom||y.bearing){let w=p.pinchAround===void 0?p.around:p.pinchAround;y.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),o.e(y,{noMoveStart:!0})}}function Qd(b,s){(!b.duration||b.duration<s.duration)&&(b.duration=s.duration,b.easing=s.easing)}function em(b,s,p){let{maxSpeed:g,linearity:y,deceleration:w}=p,M=o.ac(b*y/(s/1e3),-g,g),O=Math.abs(M)/(w*y);return{easing:p.easing,duration:1e3*O,amount:M*(O/2)}}class So extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,p,g,y={}){let w=v.mousePos(p.getCanvas(),g),M=p.unproject(w);super(s,o.e({point:w,lngLat:M,originalEvent:g},y)),this._defaultPrevented=!1,this.target=p}}class pf extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,p,g){let y=s==="touchend"?g.changedTouches:g.touches,w=v.touchPos(p.getCanvasContainer(),y),M=w.map(N=>p.unproject(N)),O=w.reduce((N,z,V,G)=>N.add(z.div(G.length)),new o.P(0,0));super(s,{points:w,point:O,lngLats:M,lngLat:p.unproject(O),originalEvent:g}),this._defaultPrevented=!1}}class uT extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,p,g){super(s,{originalEvent:g}),this._defaultPrevented=!1}}class cT{constructor(s,p){this._map=s,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new uT(s.type,this._map,s))}mousedown(s,p){return this._mousedownPos=p,this._firePreventable(new So(s.type,this._map,s))}mouseup(s){this._map.fire(new So(s.type,this._map,s))}click(s,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new So(s.type,this._map,s))}dblclick(s){return this._firePreventable(new So(s.type,this._map,s))}mouseover(s){this._map.fire(new So(s.type,this._map,s))}mouseout(s){this._map.fire(new So(s.type,this._map,s))}touchstart(s){return this._firePreventable(new pf(s.type,this._map,s))}touchmove(s){this._map.fire(new pf(s.type,this._map,s))}touchend(s){this._map.fire(new pf(s.type,this._map,s))}touchcancel(s){this._map.fire(new pf(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vi{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new So(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new So("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new So(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ys{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.pointLocation(o.P.convert(s),this._map.terrain)}}class Fa{constructor(s,p){this._map=s,this._tr=new Ys(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,p){this.isEnabled()&&s.shiftKey&&s.button===0&&(v.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(s,p){if(!this._active)return;let g=p;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;let y=this._startPos;this._lastPos=g,this._box||(this._box=v.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));let w=Math.min(y.x,g.x),M=Math.max(y.x,g.x),O=Math.min(y.y,g.y),N=Math.max(y.y,g.y);v.setTransform(this._box,`translate(${w}px,${O}px)`),this._box.style.width=M-w+"px",this._box.style.height=N-O+"px"}mouseupWindow(s,p){if(!this._active||s.button!==0)return;let g=this._startPos,y=p;if(this.reset(),v.suppressClick(),g.x!==y.x||g.y!==y.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:s})),{cameraAnimation:w=>w.fitScreenCoordinates(g,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(v.remove(this._box),this._box=null),v.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,p){return this._map.fire(new o.k(s,{originalEvent:p}))}}function tm(b,s){if(b.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${s.length}`);let p={};for(let g=0;g<b.length;g++)p[b[g].identifier]=s[g];return p}class qx{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,p,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),g.length===this.numTouches&&(this.centroid=function(y){let w=new o.P(0,0);for(let M of y)w._add(M);return w.div(y.length)}(p),this.touches=tm(g,p)))}touchmove(s,p,g){if(this.aborted||!this.centroid)return;let y=tm(g,p);for(let w in this.touches){let M=y[w];(!M||M.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(s,p,g){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){let y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class hg{constructor(s){this.singleTap=new qx(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,p,g){this.singleTap.touchstart(s,p,g)}touchmove(s,p,g){this.singleTap.touchmove(s,p,g)}touchend(s,p,g){let y=this.singleTap.touchend(s,p,g);if(y){let w=s.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(y)<30;if(w&&M||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Gh{constructor(s){this._tr=new Ys(s),this._zoomIn=new hg({numTouches:1,numTaps:2}),this._zoomOut=new hg({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,p,g){this._zoomIn.touchstart(s,p,g),this._zoomOut.touchstart(s,p,g)}touchmove(s,p,g){this._zoomIn.touchmove(s,p,g),this._zoomOut.touchmove(s,p,g)}touchend(s,p,g){let y=this._zoomIn.touchend(s,p,g),w=this._zoomOut.touchend(s,p,g),M=this._tr;return y?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:M.zoom+1,around:M.unproject(y)},{originalEvent:s})}):w?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:M.zoom-1,around:M.unproject(w)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tu{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){let p=this._moveFunction(...s);if(p.bearingDelta||p.pitchDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(s,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=p.length?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,p){if(!this.isEnabled())return;let g=this._lastPoint;if(!g)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);let y=p.length?p[0]:p;return!this._moved&&y.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(g,y))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&v.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let jx={0:1,2:2};class pg{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){let p=v.mouseButton(s);this._eventButton=p}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(p,g){let y=jx[g];return p.buttons===void 0||(p.buttons&y)!==y}(s,this._eventButton)}isValidEndEvent(s){return v.mouseButton(s)===this._eventButton}}class Fx{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}let dg=b=>{b.mousedown=b.dragStart,b.mousemoveWindow=b.dragMove,b.mouseup=b.dragEnd,b.contextmenu=s=>{s.preventDefault()}},zx=({enable:b,clickTolerance:s,bearingDegreesPerPixelMoved:p=.8})=>{let g=new pg({checkCorrectEvent:y=>v.mouseButton(y)===0&&y.ctrlKey||v.mouseButton(y)===2});return new Tu({clickTolerance:s,move:(y,w)=>({bearingDelta:(w.x-y.x)*p}),moveStateManager:g,enable:b,assignEvents:dg})},Bx=({enable:b,clickTolerance:s,pitchDegreesPerPixelMoved:p=-.5})=>{let g=new pg({checkCorrectEvent:y=>v.mouseButton(y)===0&&y.ctrlKey||v.mouseButton(y)===2});return new Tu({clickTolerance:s,move:(y,w)=>({pitchDelta:(w.y-y.y)*p}),moveStateManager:g,enable:b,assignEvents:dg})};class df{constructor(s,p){this._clickTolerance=s.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,p,g){return this._calculateTransform(s,p,g)}touchmove(s,p,g){if(this._active){if(!this._shouldBePrevented(g.length))return s.preventDefault(),this._calculateTransform(s,p,g);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,p,g){this._calculateTransform(s,p,g),this._active&&this._shouldBePrevented(g.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,p,g){g.length>0&&(this._active=!0);let y=tm(g,p),w=new o.P(0,0),M=new o.P(0,0),O=0;for(let z in y){let V=y[z],G=this._touches[z];G&&(w._add(V),M._add(V.sub(G)),O++,y[z]=V)}if(this._touches=y,this._shouldBePrevented(O)||!M.mag())return;let N=M.div(O);return this._sum._add(N),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(O),panDelta:N}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mg{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,p,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([p[0],p[1]]))}touchmove(s,p,g){if(!this._firstTwoTouches)return;s.preventDefault();let[y,w]=this._firstTwoTouches,M=rm(g,p,y),O=rm(g,p,w);if(!M||!O)return;let N=this._aroundCenter?null:M.add(O).div(2);return this._move([M,O],N,s)}touchend(s,p,g){if(!this._firstTwoTouches)return;let[y,w]=this._firstTwoTouches,M=rm(g,p,y),O=rm(g,p,w);M&&O||(this._active&&v.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function rm(b,s,p){for(let g=0;g<b.length;g++)if(b[g].identifier===p)return s[g]}function Ux(b,s){return Math.log(b/s)/Math.LN2}class Vx extends mg{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,p){let g=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(Ux(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ux(this._distance,g),pinchAround:p}}}function Gx(b,s){return 180*b.angleWith(s)/Math.PI}class $x extends mg{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,p,g){let y=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Gx(this._vector,y),pinchAround:p}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());let p=25/(Math.PI*this._minDiameter)*360,g=Gx(s,this._startVector);return Math.abs(g)<p}}function vg(b){return Math.abs(b.y)>Math.abs(b.x)}class $h extends mg{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,p,g){super.touchstart(s,p,g),this._currentTouchCount=g.length}_start(s){this._lastPoints=s,vg(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,p,g){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let y=s[0].sub(this._lastPoints[0]),w=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,w,g.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(y.y+w.y)/2*-.5}):void 0}gestureBeginsVertically(s,p,g){if(this._valid!==void 0)return this._valid;let y=s.mag()>=2,w=p.mag()>=2;if(!y&&!w)return;if(!y||!w)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;let M=s.y>0==p.y>0;return vg(s)&&vg(p)&&M}}let fT={panStep:100,bearingStep:15,pitchStep:10};class us{constructor(s){this._tr=new Ys(s);let p=fT;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let p=0,g=0,y=0,w=0,M=0;switch(s.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:s.shiftKey?g=-1:(s.preventDefault(),w=-1);break;case 39:s.shiftKey?g=1:(s.preventDefault(),w=1);break;case 38:s.shiftKey?y=1:(s.preventDefault(),M=-1);break;case 40:s.shiftKey?y=-1:(s.preventDefault(),M=1);break;default:return;}return this._rotationDisabled&&(g=0,y=0),{cameraAnimation:O=>{let N=this._tr;O.easeTo({duration:300,easeId:"keyboardHandler",easing:El,zoom:p?Math.round(N.zoom)+p*(s.shiftKey?2:1):N.zoom,bearing:N.bearing+g*this._bearingStep,pitch:N.pitch+y*this._pitchStep,offset:[-w*this._panStep,-M*this._panStep],center:N.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function El(b){return b*(2-b)}let Hx=4.000244140625;class Ks{constructor(s,p){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=s,this._tr=new Ys(s),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let p=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY,g=d.now(),y=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,p!==0&&p%Hx==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(y*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),s.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=s,this._delta-=p,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let p=v.mousePos(this._map.getCanvas(),s),g=this._tr;this._around=p.y>g.transform.height/2-g.transform.getHorizon()?o.N.convert(this._aroundCenter?g.center:g.unproject(p)):o.N.convert(g.center),this._aroundPoint=g.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let s=this._tr.transform;if(this._delta!==0){let N=this._type==="wheel"&&Math.abs(this._delta)>Hx?this._wheelZoomRate:this._defaultZoomRate,z=2/(1+Math.exp(-Math.abs(this._delta*N)));this._delta<0&&z!==0&&(z=1/z);let V=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(V*z))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let p=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,g=this._startZoom,y=this._easing,w,M=!1,O=d.now()-this._lastWheelEventTime;if(this._type==="wheel"&&g&&y&&O){let N=Math.min(O/200,1),z=y(N);w=o.y.number(g,p,z),N<1?this._frameId||(this._frameId=!0):M=!0}else w=p,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!M,zoomDelta:w-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let p=o.b9;if(this._prevEase){let g=this._prevEase,y=(d.now()-g.start)/g.duration,w=g.easing(y+.01)-g.easing(y),M=.27/Math.sqrt(w*w+1e-4)*.01,O=Math.sqrt(.0729-M*M);p=o.b8(M,O,.25,1)}return this._prevEase={start:d.now(),duration:s,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class mf{constructor(s,p){this._clickZoom=s,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ek{constructor(s){this._tr=new Ys(s),this.reset()}reset(){this._active=!1}dblclick(s,p){return s.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class tk{constructor(){this._tap=new hg({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,p,g){if(!this._swipePoint)if(this._tapTime){let y=p[0],w=s.timeStamp-this._tapTime<500,M=this._tapPoint.dist(y)<30;w&&M?g.length>0&&(this._swipePoint=y,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(s,p,g)}touchmove(s,p,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;let y=p[0],w=y.y-this._swipePoint.y;return this._swipePoint=y,s.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(s,p,g)}touchend(s,p,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{let y=this._tap.touchend(s,p,g);y&&(this._tapTime=s.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hT{constructor(s,p,g){this._el=s,this._mousePan=p,this._touchPan=g}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class pT{constructor(s,p,g){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=p,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Wx{constructor(s,p,g,y){this._el=s,this._touchZoom=p,this._touchRotate=g,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Hh{constructor(s,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=v.create("div","maplibregl-cooperative-gesture-screen",s);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let g=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=p,this._container.appendChild(y);let w=document.createElement("div");w.className="maplibregl-mobile-message",w.textContent=g,this._container.appendChild(w),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(v.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,p){this._enabled&&(this._map.fire(new o.k("cooperativegestureprevented",{gestureType:s,originalEvent:p})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let cs=b=>b.zoom||b.drag||b.pitch||b.rotate;class kt extends o.k{}function gg(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta}class Zx{constructor(s,p){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,w)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let M=y.type==="renderFrame"?void 0:y,O={needsRenderFrame:!1},N={},z={},V=y.touches,G=V?this._getMapTouches(V):void 0,X=G?v.touchPos(this._map.getCanvas(),G):v.mousePos(this._map.getCanvas(),y);for(let{handlerName:he,handler:me,allowed:ge}of this._handlers){if(!me.isEnabled())continue;let ye;this._blockedByActive(z,ge,he)?me.reset():me[w||y.type]&&(ye=me[w||y.type](y,X,G),this.mergeHandlerResult(O,N,ye,he,M),ye&&ye.needsRenderFrame&&this._triggerRenderFrame()),(ye||me.isActive())&&(z[he]=me)}let ne={};for(let he in this._previousActiveHandlers)z[he]||(ne[he]=M);this._previousActiveHandlers=z,(Object.keys(ne).length||gg(O))&&(this._changes.push([O,N,ne]),this._triggerRenderFrame()),(Object.keys(z).length||gg(O))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:se}=O;se&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],se(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new kx(s),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);let g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(let[y,w,M]of this._listeners)v.addEventListener(y,w,y===document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(let[s,p,g]of this._listeners)v.removeEventListener(s,p,s===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(s){let p=this._map,g=p.getCanvasContainer();this._add("mapEvent",new cT(p,s));let y=p.boxZoom=new Fa(p,s);this._add("boxZoom",y),s.interactive&&s.boxZoom&&y.enable();let w=p.cooperativeGestures=new Hh(p,s.cooperativeGestures);this._add("cooperativeGestures",w),s.cooperativeGestures&&w.enable();let M=new Gh(p),O=new ek(p);p.doubleClickZoom=new mf(O,M),this._add("tapZoom",M),this._add("clickZoom",O),s.interactive&&s.doubleClickZoom&&p.doubleClickZoom.enable();let N=new tk;this._add("tapDragZoom",N);let z=p.touchPitch=new $h(p);this._add("touchPitch",z),s.interactive&&s.touchPitch&&p.touchPitch.enable(s.touchPitch);let V=zx(s),G=Bx(s);p.dragRotate=new pT(s,V,G),this._add("mouseRotate",V,["mousePitch"]),this._add("mousePitch",G,["mouseRotate"]),s.interactive&&s.dragRotate&&p.dragRotate.enable();let X=(({enable:ye,clickTolerance:ce})=>{let Ce=new pg({checkCorrectEvent:De=>v.mouseButton(De)===0&&!De.ctrlKey});return new Tu({clickTolerance:ce,move:(De,je)=>({around:je,panDelta:je.sub(De)}),activateOnStart:!0,moveStateManager:Ce,enable:ye,assignEvents:dg})})(s),ne=new df(s,p);p.dragPan=new hT(g,X,ne),this._add("mousePan",X),this._add("touchPan",ne,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&p.dragPan.enable(s.dragPan);let se=new $x,he=new Vx;p.touchZoomRotate=new Wx(g,he,se,N),this._add("touchRotate",se,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&p.touchZoomRotate.enable(s.touchZoomRotate);let me=p.scrollZoom=new Ks(p,()=>this._triggerRenderFrame());this._add("scrollZoom",me,["mousePan"]),s.interactive&&s.scrollZoom&&p.scrollZoom.enable(s.scrollZoom);let ge=p.keyboard=new us(p);this._add("keyboard",ge),s.interactive&&s.keyboard&&p.keyboard.enable(),this._add("blockableMapEvent",new vi(p))}_add(s,p,g){this._handlers.push({handlerName:s,handler:p,allowed:g}),this._handlersById[s]=p}stop(s){if(!this._updatingCamera){for(let{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(let{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!cs(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,p,g){for(let y in s)if(y!==g&&(!p||p.indexOf(y)<0))return!0;return!1}_getMapTouches(s){let p=[];for(let g of s)this._el.contains(g.target)&&p.push(g);return p}mergeHandlerResult(s,p,g,y,w){if(!g)return;o.e(s,g);let M={handlerName:y,originalEvent:g.originalEvent||w};g.zoomDelta!==void 0&&(p.zoom=M),g.panDelta!==void 0&&(p.drag=M),g.pitchDelta!==void 0&&(p.pitch=M),g.bearingDelta!==void 0&&(p.rotate=M)}_applyChanges(){let s={},p={},g={};for(let[y,w,M]of this._changes)y.panDelta&&(s.panDelta=(s.panDelta||new o.P(0,0))._add(y.panDelta)),y.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(s.around=y.around),y.pinchAround!==void 0&&(s.pinchAround=y.pinchAround),y.noInertia&&(s.noInertia=y.noInertia),o.e(p,w),o.e(g,M);this._updateMapTransform(s,p,g),this._changes=[]}_updateMapTransform(s,p,g){let y=this._map,w=y._getTransformForUpdate(),M=y.terrain;if(!(gg(s)||M&&this._terrainMovement))return this._fireEvents(p,g,!0);let{panDelta:O,zoomDelta:N,bearingDelta:z,pitchDelta:V,around:G,pinchAround:X}=s;X!==void 0&&(G=X),y._stop(!0),G=G||y.transform.centerPoint;let ne=w.pointLocation(O?G.sub(O):G);z&&(w.bearing+=z),V&&(w.pitch+=V),N&&(w.zoom+=N),M?this._terrainMovement||!p.drag&&!p.zoom?p.drag&&this._terrainMovement?w.center=w.pointLocation(w.centerPoint.sub(O)):w.setLocationAtPoint(ne,G):(this._terrainMovement=!0,this._map._elevationFreeze=!0,w.setLocationAtPoint(ne,G)):w.setLocationAtPoint(ne,G),y._applyUpdatedTransform(w),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(p,g,!0)}_fireEvents(s,p,g){let y=cs(this._eventsInProgress),w=cs(s),M={};for(let G in s){let{originalEvent:X}=s[G];this._eventsInProgress[G]||(M[`${G}start`]=X),this._eventsInProgress[G]=s[G]}!y&&w&&this._fireEvent("movestart",w.originalEvent);for(let G in M)this._fireEvent(G,M[G]);w&&this._fireEvent("move",w.originalEvent);for(let G in s){let{originalEvent:X}=s[G];this._fireEvent(G,X)}let O={},N;for(let G in this._eventsInProgress){let{handlerName:X,originalEvent:ne}=this._eventsInProgress[G];this._handlersById[X].isActive()||(delete this._eventsInProgress[G],N=p[X]||ne,O[`${G}end`]=N)}for(let G in O)this._fireEvent(G,O[G]);let z=cs(this._eventsInProgress),V=(y||w)&&!z;if(V&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let G=this._map._getTransformForUpdate();G.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(G)}if(g&&V){this._updatingCamera=!0;let G=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=ne=>ne!==0&&-this._bearingSnap<ne&&ne<this._bearingSnap;!G||!G.essential&&d.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:N})),X(this._map.getBearing())&&this._map.resetNorth()):(X(G.bearing||this._map.getBearing())&&(G.bearing=0),G.freezeElevation=!0,this._map.easeTo(G,{originalEvent:N})),this._updatingCamera=!1}}_fireEvent(s,p){this._map.fire(new o.k(s,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new kt("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class dT extends o.E{constructor(s,p){super(),this._renderFrameCallback=()=>{let g=Math.min((d.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=p.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new o.N(this.transform.center.lng,this.transform.center.lat)}setCenter(s,p){return this.jumpTo({center:s},p)}panBy(s,p,g){return s=o.P.convert(s).mult(-1),this.panTo(this.transform.center,o.e({offset:s},p),g)}panTo(s,p,g){return this.easeTo(o.e({center:s},p),g)}getZoom(){return this.transform.zoom}setZoom(s,p){return this.jumpTo({zoom:s},p),this}zoomTo(s,p,g){return this.easeTo(o.e({zoom:s},p),g)}zoomIn(s,p){return this.zoomTo(this.getZoom()+1,s,p),this}zoomOut(s,p){return this.zoomTo(this.getZoom()-1,s,p),this}getBearing(){return this.transform.bearing}setBearing(s,p){return this.jumpTo({bearing:s},p),this}getPadding(){return this.transform.padding}setPadding(s,p){return this.jumpTo({padding:s},p),this}rotateTo(s,p,g){return this.easeTo(o.e({bearing:s},p),g)}resetNorth(s,p){return this.rotateTo(0,o.e({duration:1e3},s),p),this}resetNorthPitch(s,p){return this.easeTo(o.e({bearing:0,pitch:0,duration:1e3},s),p),this}snapToNorth(s,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,p):this}getPitch(){return this.transform.pitch}setPitch(s,p){return this.jumpTo({pitch:s},p),this}cameraForBounds(s,p){s=be.convert(s).adjustAntiMeridian();let g=p&&p.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),g,p)}_cameraForBoxAndBearing(s,p,g,y){let w={top:0,bottom:0,right:0,left:0};if(typeof(y=o.e({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){let mt=y.padding;y.padding={top:mt,bottom:mt,right:mt,left:mt}}y.padding=o.e(w,y.padding);let M=this.transform,O=M.padding,N=new be(s,p),z=M.project(N.getNorthWest()),V=M.project(N.getNorthEast()),G=M.project(N.getSouthEast()),X=M.project(N.getSouthWest()),ne=o.ba(-g),se=z.rotate(ne),he=V.rotate(ne),me=G.rotate(ne),ge=X.rotate(ne),ye=new o.P(Math.max(se.x,he.x,ge.x,me.x),Math.max(se.y,he.y,ge.y,me.y)),ce=new o.P(Math.min(se.x,he.x,ge.x,me.x),Math.min(se.y,he.y,ge.y,me.y)),Ce=ye.sub(ce),De=(M.width-(O.left+O.right+y.padding.left+y.padding.right))/Ce.x,je=(M.height-(O.top+O.bottom+y.padding.top+y.padding.bottom))/Ce.y;if(je<0||De<0)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let et=Math.min(M.scaleZoom(M.scale*Math.min(De,je)),y.maxZoom),lt=o.P.convert(y.offset),St=new o.P((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(o.ba(g)),Ot=lt.add(St).mult(M.scale/M.zoomScale(et));return{center:M.unproject(z.add(G).div(2).sub(Ot)),zoom:et,bearing:g}}fitBounds(s,p,g){return this._fitInternal(this.cameraForBounds(s,p),p,g)}fitScreenCoordinates(s,p,g,y,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.P.convert(s)),this.transform.pointLocation(o.P.convert(p)),g,y),y,w)}_fitInternal(s,p,g){return s?(delete(p=o.e(s,p)).padding,p.linear?this.easeTo(p,g):this.flyTo(p,g)):this}jumpTo(s,p){this.stop();let g=this._getTransformForUpdate(),y=!1,w=!1,M=!1;return"zoom"in s&&g.zoom!==+s.zoom&&(y=!0,g.zoom=+s.zoom),s.center!==void 0&&(g.center=o.N.convert(s.center)),"bearing"in s&&g.bearing!==+s.bearing&&(w=!0,g.bearing=+s.bearing),"pitch"in s&&g.pitch!==+s.pitch&&(M=!0,g.pitch=+s.pitch),s.padding==null||g.isPaddingEqual(s.padding)||(g.padding=s.padding),this._applyUpdatedTransform(g),this.fire(new o.k("movestart",p)).fire(new o.k("move",p)),y&&this.fire(new o.k("zoomstart",p)).fire(new o.k("zoom",p)).fire(new o.k("zoomend",p)),w&&this.fire(new o.k("rotatestart",p)).fire(new o.k("rotate",p)).fire(new o.k("rotateend",p)),M&&this.fire(new o.k("pitchstart",p)).fire(new o.k("pitch",p)).fire(new o.k("pitchend",p)),this.fire(new o.k("moveend",p))}calculateCameraOptionsFromTo(s,p,g,y=0){let w=o.Z.fromLngLat(s,p),M=o.Z.fromLngLat(g,y),O=M.x-w.x,N=M.y-w.y,z=M.z-w.z,V=Math.hypot(O,N,z);if(V===0)throw new Error("Can't calculate camera options with same From and To");let G=Math.hypot(O,N),X=this.transform.scaleZoom(this.transform.cameraToCenterDistance/V/this.transform.tileSize),ne=180*Math.atan2(O,-N)/Math.PI,se=180*Math.acos(G/V)/Math.PI;return se=z<0?90-se:90+se,{center:M.toLngLat(),zoom:X,pitch:se,bearing:ne}}easeTo(s,p){var g;this._stop(!1,s.easeId),((s=o.e({offset:[0,0],duration:500,easing:o.b9},s)).animate===!1||!s.essential&&d.prefersReducedMotion)&&(s.duration=0);let y=this._getTransformForUpdate(),w=y.zoom,M=y.bearing,O=y.pitch,N=y.padding,z="bearing"in s?this._normalizeBearing(s.bearing,M):M,V="pitch"in s?+s.pitch:O,G="padding"in s?s.padding:y.padding,X=o.P.convert(s.offset),ne=y.centerPoint.add(X),se=y.pointLocation(ne),{center:he,zoom:me}=y.getConstrained(o.N.convert(s.center||se),(g=s.zoom)!==null&&g!==void 0?g:w);this._normalizeCenter(he,y);let ge=y.project(se),ye=y.project(he).sub(ge),ce=y.zoomScale(me-w),Ce,De;s.around&&(Ce=o.N.convert(s.around),De=y.locationPoint(Ce));let je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||me!==w,this._rotating=this._rotating||M!==z,this._pitching=this._pitching||V!==O,this._padding=!y.isPaddingEqual(G),this._easeId=s.easeId,this._prepareEase(p,s.noMoveStart,je),this.terrain&&this._prepareElevation(he),this._ease(et=>{if(this._zooming&&(y.zoom=o.y.number(w,me,et)),this._rotating&&(y.bearing=o.y.number(M,z,et)),this._pitching&&(y.pitch=o.y.number(O,V,et)),this._padding&&(y.interpolatePadding(N,G,et),ne=y.centerPoint.add(X)),this.terrain&&!s.freezeElevation&&this._updateElevation(et),Ce)y.setLocationAtPoint(Ce,De);else{let lt=y.zoomScale(y.zoom-w),St=me>w?Math.min(2,ce):Math.max(.5,ce),Ot=Math.pow(St,1-et),mt=y.unproject(ge.add(ye.mult(et*Ot)).mult(lt));y.setLocationAtPoint(y.renderWorldCopies?mt.wrap():mt,ne)}this._applyUpdatedTransform(y),this._fireMoveEvents(p)},et=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(p,et)},s),this}_prepareEase(s,p,g={}){this._moving=!0,p||g.moving||this.fire(new o.k("movestart",s)),this._zooming&&!g.zooming&&this.fire(new o.k("zoomstart",s)),this._rotating&&!g.rotating&&this.fire(new o.k("rotatestart",s)),this._pitching&&!g.pitching&&this.fire(new o.k("pitchstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);let p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&p!==this._elevationTarget){let g=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(g-(p-(g*s+this._elevationStart))/(1-s)),this._elevationTarget=p}this.transform.elevation=o.y.number(this._elevationStart,this._elevationTarget,s)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){let p=s.getCameraPosition(),g=this.terrain.getElevationForLngLatZoom(p.lngLat,s.zoom);if(p.altitude<g){let y=this.calculateCameraOptionsFromTo(p.lngLat,g,s.center,s.elevation);return{pitch:y.pitch,zoom:y.zoom}}return{}}_applyUpdatedTransform(s){let p=[];if(this.terrain&&p.push(y=>this._elevateCameraIfInsideTerrain(y)),this.transformCameraUpdate&&p.push(y=>this.transformCameraUpdate(y)),!p.length)return;let g=s.clone();for(let y of p){let w=g.clone(),{center:M,zoom:O,pitch:N,bearing:z,elevation:V}=y(w);M&&(w.center=M),O!==void 0&&(w.zoom=O),N!==void 0&&(w.pitch=N),z!==void 0&&(w.bearing=z),V!==void 0&&(w.elevation=V),g.apply(w)}this.transform.apply(g)}_fireMoveEvents(s){this.fire(new o.k("move",s)),this._zooming&&this.fire(new o.k("zoom",s)),this._rotating&&this.fire(new o.k("rotate",s)),this._pitching&&this.fire(new o.k("pitch",s))}_afterEase(s,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;let g=this._zooming,y=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new o.k("zoomend",s)),y&&this.fire(new o.k("rotateend",s)),w&&this.fire(new o.k("pitchend",s)),this.fire(new o.k("moveend",s))}flyTo(s,p){var g;if(!s.essential&&d.prefersReducedMotion){let Ct=o.M(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ct,p)}this.stop(),s=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.b9},s);let y=this._getTransformForUpdate(),w=y.zoom,M=y.bearing,O=y.pitch,N=y.padding,z="bearing"in s?this._normalizeBearing(s.bearing,M):M,V="pitch"in s?+s.pitch:O,G="padding"in s?s.padding:y.padding,X=o.P.convert(s.offset),ne=y.centerPoint.add(X),se=y.pointLocation(ne),{center:he,zoom:me}=y.getConstrained(o.N.convert(s.center||se),(g=s.zoom)!==null&&g!==void 0?g:w);this._normalizeCenter(he,y);let ge=y.zoomScale(me-w),ye=y.project(se),ce=y.project(he).sub(ye),Ce=s.curve,De=Math.max(y.width,y.height),je=De/ge,et=ce.mag();if("minZoom"in s){let Ct=o.ac(Math.min(s.minZoom,w,me),y.minZoom,y.maxZoom),dr=De/y.zoomScale(Ct-w);Ce=Math.sqrt(dr/et*2)}let lt=Ce*Ce;function St(Ct){let dr=(je*je-De*De+(Ct?-1:1)*lt*lt*et*et)/(2*(Ct?je:De)*lt*et);return Math.log(Math.sqrt(dr*dr+1)-dr)}function Ot(Ct){return(Math.exp(Ct)-Math.exp(-Ct))/2}function mt(Ct){return(Math.exp(Ct)+Math.exp(-Ct))/2}let pt=St(!1),Gt=function(Ct){return mt(pt)/mt(pt+Ce*Ct)},gr=function(Ct){return De*((mt(pt)*(Ot(dr=pt+Ce*Ct)/mt(dr))-Ot(pt))/lt)/et;var dr},gt=(St(!0)-pt)/Ce;if(Math.abs(et)<1e-6||!isFinite(gt)){if(Math.abs(De-je)<1e-6)return this.easeTo(s,p);let Ct=je<De?-1:1;gt=Math.abs(Math.log(je/De))/Ce,gr=()=>0,Gt=dr=>Math.exp(Ct*Ce*dr)}return s.duration="duration"in s?+s.duration:1e3*gt/("screenSpeed"in s?+s.screenSpeed/Ce:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=M!==z,this._pitching=V!==O,this._padding=!y.isPaddingEqual(G),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(he),this._ease(Ct=>{let dr=Ct*gt,Gn=1/Gt(dr);y.zoom=Ct===1?me:w+y.scaleZoom(Gn),this._rotating&&(y.bearing=o.y.number(M,z,Ct)),this._pitching&&(y.pitch=o.y.number(O,V,Ct)),this._padding&&(y.interpolatePadding(N,G,Ct),ne=y.centerPoint.add(X)),this.terrain&&!s.freezeElevation&&this._updateElevation(Ct);let Mr=Ct===1?he:y.unproject(ye.add(ce.mult(gr(dr))).mult(Gn));y.setLocationAtPoint(y.renderWorldCopies?Mr.wrap():Mr,ne),this._applyUpdatedTransform(y),this._fireMoveEvents(p)},()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(p)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,p){var g;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,p)}return s||(g=this.handlers)===null||g===void 0||g.stop(!1),this}_ease(s,p,g){g.animate===!1||g.duration===0?(s(1),p()):(this._easeStart=d.now(),this._easeOptions=g,this._onEaseFrame=s,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,p){s=o.b3(s,-180,180);let g=Math.abs(s-p);return Math.abs(s-360-p)<g&&(s-=360),Math.abs(s+360-p)<g&&(s+=360),s}_normalizeCenter(s,p){if(!p.renderWorldCopies||p.lngRange)return;let g=s.lng-p.center.lng;s.lng+=g>180?-360:g<-180?360:0}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(o.N.convert(s),this.transform.tileZoom)-this.transform.elevation:null}}let Wh={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class Zh{constructor(s=Wh){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=v.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=v.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=v.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){v.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,p){let g=this._map._getUIString(`AttributionControl.${p}`);s.title=g,s.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){let y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}let p=this._map.style.sourceCaches;for(let y in p){let w=p[y];if(w.used||w.usedForTerrain){let M=w.getSource();M.attribution&&s.indexOf(M.attribution)<0&&s.push(M.attribution)}}s=s.filter(y=>String(y).trim()),s.sort((y,w)=>y.length-w.length),s=s.filter((y,w)=>{for(let M=w+1;M<s.length;M++)if(s[M].indexOf(y)>=0)return!1;return!0});let g=s.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,s.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Yx{constructor(s={}){this._updateCompact=()=>{let p=this._container.children;if(p.length){let g=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=v.create("div","maplibregl-ctrl");let p=v.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){v.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Hr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){let p=++this._id;return this._queue.push({callback:s,id:p,cancelled:!1}),p}remove(s){let p=this._currentlyRunning,g=p?this._queue.concat(p):this._queue;for(let y of g)if(y.id===s)return void(y.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let p=this._currentlyRunning=this._queue;this._queue=[];for(let g of p)if(!g.cancelled&&(g.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Kx=o.Y([{name:"a_pos3d",type:"Int16",components:3}]);class rk extends o.E{constructor(s){super(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,s.usedForTerrain=!0,s.tileSize=this.tileSize*UT(2,this.deltaZoom)}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,p){this.sourceCache.update(s,p),this._renderableTilesKeys=[];let g={};for(let y of s.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p}))g[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),o.aP(y.posMatrix,0,o.X,0,o.X,0,1),this._tiles[y.key]=new Ti(y,this.tileSize));for(let y in this._tiles)g[y]||delete this._tiles[y]}freeRtt(s){for(let p in this._tiles){let g=this._tiles[p];(!s||g.tileID.equals(s)||g.tileID.isChildOf(s)||s.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s){let p={};for(let g of this._renderableTilesKeys){let y=this._tiles[g].tileID;if(y.canonical.equals(s.canonical)){let w=s.clone();w.posMatrix=new Float64Array(16),o.aP(w.posMatrix,0,o.X,0,o.X,0,1),p[g]=w}else if(y.canonical.isChildOf(s.canonical)){let w=s.clone();w.posMatrix=new Float64Array(16);let M=y.canonical.z-s.canonical.z,O=y.canonical.x-(y.canonical.x>>M<<M),N=y.canonical.y-(y.canonical.y>>M<<M),z=o.X>>M;o.aP(w.posMatrix,0,z,0,z,0,1),o.J(w.posMatrix,w.posMatrix,[-O*z,-N*z,0]),p[g]=w}else if(s.canonical.isChildOf(y.canonical)){let w=s.clone();w.posMatrix=new Float64Array(16);let M=s.canonical.z-y.canonical.z,O=s.canonical.x-(s.canonical.x>>M<<M),N=s.canonical.y-(s.canonical.y>>M<<M),z=o.X>>M;o.aP(w.posMatrix,0,o.X,0,o.X,0,1),o.J(w.posMatrix,w.posMatrix,[O*z,N*z,0]),o.K(w.posMatrix,w.posMatrix,[1/UT(2,M),1/UT(2,M),0]),p[g]=w}}return p}getSourceTile(s,p){let g=this.sourceCache._source,y=s.overscaledZ-this.deltaZoom;if(y>g.maxzoom&&(y=g.maxzoom),y<g.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(y).key);let w=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!w||!w.dem)&&p)for(;y>=g.minzoom&&(!w||!w.dem);)w=this.sourceCache.getTileByID(s.scaledTo(y--).key);return w}tilesAfterTime(s=Date.now()){return Object.values(this._tiles).filter(p=>p.timeAdded>=s)}}class Xx{constructor(s,p,g){this.painter=s,this.sourceCache=new rk(p),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,p,g,y=o.X){var w;if(!(p>=0&&p<y&&g>=0&&g<y))return 0;let M=this.getTerrainData(s),O=(w=M.tile)===null||w===void 0?void 0:w.dem;if(!O)return 0;let N=function(se,he,me){var ge=he[0],ye=he[1];return se[0]=me[0]*ge+me[4]*ye+me[12],se[1]=me[1]*ge+me[5]*ye+me[13],se}([],[p/y*o.X,g/y*o.X],M.u_terrain_matrix),z=[N[0]*O.dim,N[1]*O.dim],V=Math.floor(z[0]),G=Math.floor(z[1]),X=z[0]-V,ne=z[1]-G;return O.get(V,G)*(1-X)*(1-ne)+O.get(V+1,G)*X*(1-ne)+O.get(V,G+1)*(1-X)*ne+O.get(V+1,G+1)*X*ne}getElevationForLngLatZoom(s,p){if(!o.bb(p,s.wrap()))return 0;let{tileID:g,mercatorX:y,mercatorY:w}=this._getOverscaledTileIDFromLngLatZoom(s,p);return this.getElevation(g,y%o.X,w%o.X,o.X)}getElevation(s,p,g,y=o.X){return this.getDEMElevation(s,p,g,y)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){let y=this.painter.context,w=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new le(y,w,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new le(y,new o.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.an([])}let p=this.sourceCache.getSourceTile(s,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){let y=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new le(y,p.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),p.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}let g=p&&p+p.tileID.key+s.key;if(g&&!this._demMatrixCache[g]){let y=this.sourceCache.sourceCache._source.maxzoom,w=s.canonical.z-p.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=y?w=s.canonical.z-y:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let M=s.canonical.x-(s.canonical.x>>w<<w),O=s.canonical.y-(s.canonical.y>>w<<w),N=o.bc(new Float64Array(16),[1/(o.X<<w),1/(o.X<<w),0]);o.J(N,N,[M*o.X,O*o.X,0]),this._demMatrixCache[s.key]={matrix:N,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(s){let p=this.painter,g=p.width/devicePixelRatio,y=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new le(p.context,{width:g,height:y,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new le(p.context,{width:g,height:y,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(g,y,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,g,y))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let w=0,M=0;w<this._coordsTextureSize;w++)for(let O=0;O<this._coordsTextureSize;O++,M+=4)p[M+0]=255&O,p[M+1]=255&w,p[M+2]=O>>8<<4|w>>8,p[M+3]=0;let g=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),y=new le(s,g,s.gl.RGBA,{premultiply:!1});return y.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);let p=new Uint8Array(4),g=this.painter.context,y=g.gl,w=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),M=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),O=Math.round(this.painter.height/devicePixelRatio);g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(w,O-M-1,1,1,y.RGBA,y.UNSIGNED_BYTE,p),g.bindFramebuffer.set(null);let N=p[0]+(p[2]>>4<<8),z=p[1]+((15&p[2])<<8),V=this.coordsIndex[255-p[3]],G=V&&this.sourceCache.getTileByID(V);if(!G)return null;let X=this._coordsTextureSize,ne=(1<<G.tileID.canonical.z)*X;return new o.Z((G.tileID.canonical.x*X+N)/ne+G.tileID.wrap,(G.tileID.canonical.y*X+z)/ne,this.getElevation(G.tileID,N,z,X))}depthAtPoint(s){let p=new Uint8Array(4),g=this.painter.context,y=g.gl;return g.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,p),g.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;let s=this.painter.context,p=new o.bd,g=new o.aY,y=this.meshSize,w=o.X/y,M=y*y;for(let G=0;G<=y;G++)for(let X=0;X<=y;X++)p.emplaceBack(X*w,G*w,0);for(let G=0;G<M;G+=y+1)for(let X=0;X<y;X++)g.emplaceBack(X+G,y+X+G+1,y+X+G+2),g.emplaceBack(X+G,y+X+G+2,X+G+1);let O=p.length,N=O+2*(y+1);for(let G of[0,1])for(let X=0;X<=y;X++)for(let ne of[0,1])p.emplaceBack(X*w,G*o.X,ne);for(let G=0;G<2*y;G+=2)g.emplaceBack(N+G,N+G+1,N+G+3),g.emplaceBack(N+G,N+G+3,N+G+2),g.emplaceBack(O+G,O+G+3,O+G+1),g.emplaceBack(O+G,O+G+2,O+G+3);let z=p.length,V=z+2*(y+1);for(let G of[0,1])for(let X=0;X<=y;X++)for(let ne of[0,1])p.emplaceBack(G*o.X,X*w,ne);for(let G=0;G<2*y;G+=2)g.emplaceBack(z+G,z+G+1,z+G+3),g.emplaceBack(z+G,z+G+3,z+G+2),g.emplaceBack(V+G,V+G+3,V+G+1),g.emplaceBack(V+G,V+G+2,V+G+3);return this._mesh=new sg(s.createVertexBuffer(p,Kx.members),s.createIndexBuffer(g),o.a0.simpleSegment(0,0,p.length,g.length)),this._mesh}getMeshFrameDelta(s){return 2*Math.PI*o.be/Math.pow(2,s)/5}getMinTileElevationForLngLatZoom(s,p){var g;let{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(s,p);return(g=this.getMinMaxElevation(y).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(s){let p=this.getTerrainData(s).tile,g={minElevation:null,maxElevation:null};return p&&p.dem&&(g.minElevation=p.dem.min*this.exaggeration,g.maxElevation=p.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(s,p){let g=o.Z.fromLngLat(s.wrap()),y=(1<<p)*o.X,w=g.x*y,M=g.y*y,O=Math.floor(w/o.X),N=Math.floor(M/o.X);return{tileID:new o.S(p,0,p,O,N),mercatorX:w,mercatorY:M}}}class nk{constructor(s,p,g){this._context=s,this._size=p,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){let p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new le(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(g.texture),{id:s,fbo:p,texture:g,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(p=>s.id!==p),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(let p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(let s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}let Yh={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class mT{constructor(s,p){this.painter=s,this.terrain=p,this.pool=new nk(s.context,30,p.sourceCache.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(g=>!s._layers[g].isHidden(p)),this._coordsDescendingInv={};for(let g in s.sourceCaches){this._coordsDescendingInv[g]={};let y=s.sourceCaches[g].getVisibleCoordinates();for(let w of y){let M=this.terrain.sourceCache.getTerrainCoords(w);for(let O in M)this._coordsDescendingInv[g][O]||(this._coordsDescendingInv[g][O]=[]),this._coordsDescendingInv[g][O].push(M[O])}}this._coordsDescendingInvStr={};for(let g of s._order){let y=s._layers[g],w=y.source;if(Yh[y.type]&&!this._coordsDescendingInvStr[w]){this._coordsDescendingInvStr[w]={};for(let M in this._coordsDescendingInv[w])this._coordsDescendingInvStr[w][M]=this._coordsDescendingInv[w][M].map(O=>O.key).sort().join()}}for(let g of this._renderableTiles)for(let y in this._coordsDescendingInvStr){let w=this._coordsDescendingInvStr[y][g.tileID.key];w&&w!==g.rttCoords[y]&&(g.rtt=[])}}renderLayer(s){if(s.isHidden(this.painter.transform.zoom))return!1;let p=s.type,g=this.painter,y=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(Yh[p]&&(this._prevType&&Yh[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(s.id),!y))return!0;if(Yh[this._prevType]||Yh[p]&&y){this._prevType=p;let w=this._stacks.length-1,M=this._stacks[w]||[];for(let O of this._renderableTiles){if(this.pool.isFull()&&(sT(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(O),O.rtt[w]){let z=this.pool.getObjectForId(O.rtt[w].id);if(z.stamp===O.rtt[w].stamp){this.pool.useObject(z);continue}}let N=this.pool.getOrCreateFreeObject();this.pool.useObject(N),this.pool.stampObject(N),O.rtt[w]={id:N.id,stamp:N.stamp},g.context.bindFramebuffer.set(N.fbo.framebuffer),g.context.clear({color:o.aM.transparent,stencil:0}),g.currentStencilSource=void 0;for(let z=0;z<M.length;z++){let V=g.style._layers[M[z]],G=V.source?this._coordsDescendingInv[V.source][O.tileID.key]:[O.tileID];g.context.viewport.set([0,0,N.fbo.width,N.fbo.height]),g._renderTileClippingMasks(V,G),g.renderLayer(g,g.style.sourceCaches[V.source],V,G),V.source&&(O.rttCoords[V.source]=this._coordsDescendingInvStr[V.source][O.tileID.key])}}return sT(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Yh[p]}return!1}}let Jx={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},vT=a,ik={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Wh,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Qx=b=>{b.touchstart=b.dragStart,b.touchmoveWindow=b.dragMove,b.touchend=b.dragEnd},ok={showCompass:!0,showZoom:!0,visualizePitch:!1};class ak{constructor(s,p,g=!1){this.mousedown=M=>{this.startMouse(o.e({},M,{ctrlKey:!0,preventDefault:()=>M.preventDefault()}),v.mousePos(this.element,M)),v.addEventListener(window,"mousemove",this.mousemove),v.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=M=>{this.moveMouse(M,v.mousePos(this.element,M))},this.mouseup=M=>{this.mouseRotate.dragEnd(M),this.mousePitch&&this.mousePitch.dragEnd(M),this.offTemp()},this.touchstart=M=>{M.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=v.touchPos(this.element,M.targetTouches)[0],this.startTouch(M,this._startPos),v.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),v.addEventListener(window,"touchend",this.touchend))},this.touchmove=M=>{M.targetTouches.length!==1?this.reset():(this._lastPos=v.touchPos(this.element,M.targetTouches)[0],this.moveTouch(M,this._lastPos))},this.touchend=M=>{M.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;let y=s.dragRotate._mouseRotate.getClickTolerance(),w=s.dragRotate._mousePitch.getClickTolerance();this.element=p,this.mouseRotate=zx({clickTolerance:y,enable:!0}),this.touchRotate=(({enable:M,clickTolerance:O,bearingDegreesPerPixelMoved:N=.8})=>{let z=new Fx;return new Tu({clickTolerance:O,move:(V,G)=>({bearingDelta:(G.x-V.x)*N}),moveStateManager:z,enable:M,assignEvents:Qx})})({clickTolerance:y,enable:!0}),this.map=s,g&&(this.mousePitch=Bx({clickTolerance:w,enable:!0}),this.touchPitch=(({enable:M,clickTolerance:O,pitchDegreesPerPixelMoved:N=-.5})=>{let z=new Fx;return new Tu({clickTolerance:O,move:(V,G)=>({pitchDelta:(G.y-V.y)*N}),moveStateManager:z,enable:M,assignEvents:Qx})})({clickTolerance:w,enable:!0})),v.addEventListener(p,"mousedown",this.mousedown),v.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),v.addEventListener(p,"touchcancel",this.reset)}startMouse(s,p){this.mouseRotate.dragStart(s,p),this.mousePitch&&this.mousePitch.dragStart(s,p),v.disableDrag()}startTouch(s,p){this.touchRotate.dragStart(s,p),this.touchPitch&&this.touchPitch.dragStart(s,p),v.disableDrag()}moveMouse(s,p){let g=this.map,{bearingDelta:y}=this.mouseRotate.dragMove(s,p)||{};if(y&&g.setBearing(g.getBearing()+y),this.mousePitch){let{pitchDelta:w}=this.mousePitch.dragMove(s,p)||{};w&&g.setPitch(g.getPitch()+w)}}moveTouch(s,p){let g=this.map,{bearingDelta:y}=this.touchRotate.dragMove(s,p)||{};if(y&&g.setBearing(g.getBearing()+y),this.touchPitch){let{pitchDelta:w}=this.touchPitch.dragMove(s,p)||{};w&&g.setPitch(g.getPitch()+w)}}off(){let s=this.element;v.removeEventListener(s,"mousedown",this.mousedown),v.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),v.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),v.removeEventListener(window,"touchend",this.touchend),v.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){v.enableDrag(),v.removeEventListener(window,"mousemove",this.mousemove),v.removeEventListener(window,"mouseup",this.mouseup),v.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),v.removeEventListener(window,"touchend",this.touchend)}}let za;function Vn(b,s,p){let g=new o.N(b.lng,b.lat);if(b=new o.N(b.lng,b.lat),s){let y=new o.N(b.lng-360,b.lat),w=new o.N(b.lng+360,b.lat),M=p.locationPoint(b).distSqr(s);p.locationPoint(y).distSqr(s)<M?b=y:p.locationPoint(w).distSqr(s)<M&&(b=w)}for(;Math.abs(b.lng-p.center.lng)>180;){let y=p.locationPoint(b);if(y.x>=0&&y.y>=0&&y.x<=p.width&&y.y<=p.height)break;b.lng>p.center.lng?b.lng-=360:b.lng+=360}return b.lng!==g.lng&&p.locationPoint(b).y>p.height/2-p.getHorizon()?b:g}let Kh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function yg(b,s,p){let g=b.classList;for(let y in Kh)g.remove(`maplibregl-${p}-anchor-${y}`);g.add(`maplibregl-${p}-anchor-${s}`)}class _g extends o.E{constructor(s){if(super(),this._onKeyPress=p=>{let g=p.code,y=p.charCode||p.keyCode;g!=="Space"&&g!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=p=>{let g=p.originalEvent.target,y=this._element;this._popup&&(g===y||y.contains(g))&&this.togglePopup()},this._update=p=>{var g;if(!this._map)return;let y=this._map.loaded()&&!this._map.isMoving();((p==null?void 0:p.type)==="terrain"||(p==null?void 0:p.type)==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Vn(this._lngLat,this._flatPos,this._map.transform):(g=this._lngLat)===null||g===void 0?void 0:g.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(w=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let M="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?M="rotateX(0deg)":this._pitchAlignment==="map"&&(M=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||p&&p.type!=="moveend"||(this._pos=this._pos.round()),v.setTransform(this._element,`${Kh[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${M} ${w}`),d.frameAsync(new AbortController).then(()=>{this._updateOpacity(p&&p.type==="moveend")}).catch(()=>{})},this._onMove=p=>{if(!this._isDragging){let g=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(s==null?void 0:s.opacity,s==null?void 0:s.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=o.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=v.create("div");let p=v.createNS("http://www.w3.org/2000/svg","svg"),g=41,y=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${g}px`),p.setAttributeNS(null,"width",`${y}px`),p.setAttributeNS(null,"viewBox",`0 0 ${y} ${g}`);let w=v.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");let M=v.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill-rule","nonzero");let O=v.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");let N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let ge of N){let ye=v.createNS("http://www.w3.org/2000/svg","ellipse");ye.setAttributeNS(null,"opacity","0.04"),ye.setAttributeNS(null,"cx","10.5"),ye.setAttributeNS(null,"cy","5.80029008"),ye.setAttributeNS(null,"rx",ge.rx),ye.setAttributeNS(null,"ry",ge.ry),O.appendChild(ye)}let z=v.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);let V=v.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(V);let G=v.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");let X=v.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(X);let ne=v.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ne.setAttributeNS(null,"fill","#FFFFFF");let se=v.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"transform","translate(8.0, 8.0)");let he=v.createNS("http://www.w3.org/2000/svg","circle");he.setAttributeNS(null,"fill","#000000"),he.setAttributeNS(null,"opacity","0.25"),he.setAttributeNS(null,"cx","5.5"),he.setAttributeNS(null,"cy","5.5"),he.setAttributeNS(null,"r","5.4999962");let me=v.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#FFFFFF"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962"),se.appendChild(he),se.appendChild(me),M.appendChild(O),M.appendChild(z),M.appendChild(G),M.appendChild(ne),M.appendChild(se),p.appendChild(M),p.setAttributeNS(null,"height",g*this._scale+"px"),p.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(p),this._offset=o.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),yg(this._element,this._anchor,"marker"),s&&s.className)for(let p of s.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),v.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=o.N.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){let y=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){let s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var p,g;if(!(!((p=this._map)===null||p===void 0)&&p.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let y=this._map,w=y.terrain.depthAtPoint(this._pos),M=y.terrain.getElevationForLngLatZoom(this._lngLat,y.transform.tileZoom);if(y.transform.lngLatToCameraDepth(this._lngLat,M)-w<.006)return void(this._element.style.opacity=this._opacity);let O=-this._offset.y/y.transform._pixelPerMeter,N=Math.sin(y.getPitch()*Math.PI/180)*O,z=y.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),V=y.transform.lngLatToCameraDepth(this._lngLat,M+N)-z>.006;!((g=this._popup)===null||g===void 0)&&g.isOpen()&&V&&this._popup.remove(),this._element.style.opacity=V?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=o.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,p){return s===void 0&&p===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}let gT={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},nm=0,im=!1,Il={maxWidth:100,unit:"metric"};function om(b,s,p){let g=p&&p.maxWidth||100,y=b._container.clientHeight/2,w=b.unproject([0,y]),M=b.unproject([g,y]),O=w.distanceTo(M);if(p&&p.unit==="imperial"){let N=3.2808*O;N>5280?Vt(s,g,N/5280,b._getUIString("ScaleControl.Miles")):Vt(s,g,N,b._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?Vt(s,g,O/1852,b._getUIString("ScaleControl.NauticalMiles")):O>=1e3?Vt(s,g,O/1e3,b._getUIString("ScaleControl.Kilometers")):Vt(s,g,O,b._getUIString("ScaleControl.Meters"))}function Vt(b,s,p,g){let y=function(w){let M=Math.pow(10,`${Math.floor(w)}`.length-1),O=w/M;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:function(N){let z=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*z)/z}(O),M*O}(p);b.style.width=s*(y/p)+"px",b.innerHTML=`${y}&nbsp;${g}`}let ur={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},xg=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function wg(b){if(b){if(typeof b=="number"){let s=Math.round(Math.abs(b)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,b),"top-left":new o.P(s,s),"top-right":new o.P(-s,s),bottom:new o.P(0,-b),"bottom-left":new o.P(s,-s),"bottom-right":new o.P(-s,-s),left:new o.P(b,0),right:new o.P(-b,0)}}if(b instanceof o.P||Array.isArray(b)){let s=o.P.convert(b);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:o.P.convert(b.center||[0,0]),top:o.P.convert(b.top||[0,0]),"top-left":o.P.convert(b["top-left"]||[0,0]),"top-right":o.P.convert(b["top-right"]||[0,0]),bottom:o.P.convert(b.bottom||[0,0]),"bottom-left":o.P.convert(b["bottom-left"]||[0,0]),"bottom-right":o.P.convert(b["bottom-right"]||[0,0]),left:o.P.convert(b.left||[0,0]),right:o.P.convert(b.right||[0,0])}}return wg(new o.P(0,0))}let ew=a;i.AJAXError=o.bh,i.Evented=o.E,i.LngLat=o.N,i.MercatorCoordinate=o.Z,i.Point=o.P,i.addProtocol=o.bi,i.config=o.a,i.removeProtocol=o.bj,i.AttributionControl=Zh,i.BoxZoomHandler=Fa,i.CanvasSource=en,i.CooperativeGesturesHandler=Hh,i.DoubleClickZoomHandler=mf,i.DragPanHandler=hT,i.DragRotateHandler=pT,i.EdgeInsets=Uh,i.FullscreenControl=class extends o.E{constructor(b={}){super(),this._onFullscreenChange=()=>{var s;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=p==null?void 0:p.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){v.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let b=this._fullscreenButton=v.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);v.create("span","maplibregl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},i.GeoJSONSource=or,i.GeolocateControl=class extends o.E{constructor(b){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",s)),this._finish()}},this._updateCamera=s=>{let p=new o.N(s.coords.longitude,s.coords.latitude),g=s.coords.accuracy,y=this._map.getBearing(),w=o.e({bearing:y},this.options.fitBoundsOptions),M=be.fromLngLat(p,g);this._map.fitBounds(M,w,{geolocateSource:!0})},this._updateMarker=s=>{if(s){let p=new o.N(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=s=>{if(this._map){if(this.options.trackUserLocation)if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&im)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=v.create("button","maplibregl-ctrl-geolocate",this._container),v.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");let p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{let p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=v.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new _g({element:this._dotElement}),this._circleElement=v.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new _g({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",p=>{p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p.originalEvent&&p.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")),this.fire(new o.k("userlocationlostfocus")))})}},this.options=o.e({},gT,b)}onAdd(b){return this._map=b,this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(s=!1){if(za!==void 0&&!s)return za;if(window.navigator.permissions===void 0)return za=!!window.navigator.geolocation,za;try{za=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(p){za=!!window.navigator.geolocation}return za})}().then(s=>this._finishSetupUI(s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),v.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,nm=0,im=!1}_isOutOfMapMaxBounds(b){let s=this._map.getMaxBounds(),p=b.coords;return s&&(p.longitude<s.getWest()||p.longitude>s.getEast()||p.latitude<s.getSouth()||p.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}}_updateCircleRadius(){let b=this._map.getBounds(),s=b.getSouthEast(),p=b.getNorthEast(),g=s.distanceTo(p),y=Math.ceil(this._accuracy/(g/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":nm--,im=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart")),this.fire(new o.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),nm++,nm>1?(b={maximumAge:6e5,timeout:0},im=!0):(b=this.options.positionOptions,im=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},i.Hash=ug,i.ImageSource=lr,i.KeyboardHandler=us,i.LngLatBounds=be,i.LogoControl=Yx,i.Map=class extends dT{constructor(b){o.bf.mark(o.bg.create);let s=Object.assign(Object.assign({},ik),b);if(s.minZoom!=null&&s.maxZoom!=null&&s.minZoom>s.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(s.minPitch!=null&&s.maxPitch!=null&&s.minPitch>s.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(s.minPitch!=null&&s.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(s.maxPitch!=null&&s.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Vh(s.minZoom,s.maxZoom,s.minPitch,s.maxPitch,s.renderWorldCopies),{bearingSnap:s.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Hr,this._controls=[],this._mapId=o.a4(),this._contextLost=p=>{p.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.k("webglcontextlost",{originalEvent:p}))},this._contextRestored=p=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:p}))},this._onMapScroll=p=>{if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=s.interactive,this._maxTileCacheSize=s.maxTileCacheSize,this._maxTileCacheZoomLevels=s.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=s.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=s.preserveDrawingBuffer===!0,this._antialias=s.antialias===!0,this._trackResize=s.trackResize===!0,this._bearingSnap=s.bearingSnap,this._refreshExpiredTiles=s.refreshExpiredTiles===!0,this._fadeDuration=s.fadeDuration,this._crossSourceCollisions=s.crossSourceCollisions===!0,this._collectResourceTiming=s.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Jx),s.locale),this._clickTolerance=s.clickTolerance,this._overridePixelRatio=s.pixelRatio,this._maxCanvasSize=s.maxCanvasSize,this.transformCameraUpdate=s.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=s.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=D.addThrottleControl(()=>this.isMoving()),this._requestManager=new j(s.transformRequest),typeof s.container=="string"){if(this._container=document.getElementById(s.container),!this._container)throw new Error(`Container '${s.container}' not found.`)}else{if(!(s.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=s.container}if(s.maxBounds&&this.setMaxBounds(s.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let p=!1,g=Jd(y=>{this._trackResize&&!this._removed&&(this.resize(y),this.redraw())},50);this._resizeObserver=new ResizeObserver(y=>{p?g(y):p=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Zx(this,s),this._hash=s.hash&&new ug(typeof s.hash=="string"&&s.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}),s.bounds&&(this.resize(),this.fitBounds(s.bounds,o.e({},s.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=s.localIdeographFontFamily,this._validateStyle=s.validateStyle,s.style&&this.setStyle(s.style,{localIdeographFontFamily:s.localIdeographFontFamily}),s.attributionControl&&this.addControl(new Zh(typeof s.attributionControl=="boolean"?void 0:s.attributionControl)),s.maplibreLogo&&this.addControl(new Yx,s.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",p=>{this._update(p.dataType==="style"),this.fire(new o.k(`${p.dataType}data`,p))}),this.on("dataloading",p=>{this.fire(new o.k(`${p.dataType}dataloading`,p))}),this.on("dataabort",p=>{this.fire(new o.k("sourcedataabort",p))})}_getMapId(){return this._mapId}addControl(b,s){if(s===void 0&&(s=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let p=b.onAdd(this);this._controls.push(b);let g=this._controlPositions[s];return s.indexOf("bottom")!==-1?g.insertBefore(p,g.firstChild):g.appendChild(p),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let s=this._controls.indexOf(b);return s>-1&&this._controls.splice(s,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}calculateCameraOptionsFromTo(b,s,p,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(b,s,p,g)}resize(b){var s;let p=this._containerDimensions(),g=p[0],y=p[1],w=this._getClampedPixelRatio(g,y);if(this._resizeCanvas(g,y,w),this.painter.resize(g,y,w),this.painter.overLimit()){let O=this.painter.context.gl;this._maxCanvasSize=[O.drawingBufferWidth,O.drawingBufferHeight];let N=this._getClampedPixelRatio(g,y);this._resizeCanvas(g,y,N),this.painter.resize(g,y,N)}this.transform.resize(g,y),(s=this._requestedCameraState)===null||s===void 0||s.resize(g,y);let M=!this._moving;return M&&(this.stop(),this.fire(new o.k("movestart",b)).fire(new o.k("move",b))),this.fire(new o.k("resize",b)),M&&this.fire(new o.k("moveend",b)),this}_getClampedPixelRatio(b,s){let{0:p,1:g}=this._maxCanvasSize,y=this.getPixelRatio(),w=b*y,M=s*y;return Math.min(w>p?p/w:1,M>g?g/M:1)*y}getPixelRatio(){var b;return(b=this._overridePixelRatio)!==null&&b!==void 0?b:devicePixelRatio}setPixelRatio(b){this._overridePixelRatio=b,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(be.convert(b)),this._update()}setMinZoom(b){if((b=b==null?-2:b)>=-2&&b<=this.transform.maxZoom)return this.transform.minZoom=b,this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b==null?22:b)>=this.transform.minZoom)return this.transform.maxZoom=b,this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b==null?0:b)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.minPitch=b,this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b==null?60:b)>85)throw new Error("maxPitch must be less than or equal to 85");if(b>=this.transform.minPitch)return this.transform.maxPitch=b,this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.renderWorldCopies=b,this._update()}project(b){return this.transform.locationPoint(o.N.convert(b),this.style&&this.terrain)}unproject(b){return this.transform.pointLocation(o.P.convert(b),this.terrain)}isMoving(){var b;return this._moving||((b=this.handlers)===null||b===void 0?void 0:b.isMoving())}isZooming(){var b;return this._zooming||((b=this.handlers)===null||b===void 0?void 0:b.isZooming())}isRotating(){var b;return this._rotating||((b=this.handlers)===null||b===void 0?void 0:b.isRotating())}_createDelegatedListener(b,s,p){if(b==="mouseenter"||b==="mouseover"){let g=!1;return{layers:s,listener:p,delegates:{mousemove:w=>{let M=s.filter(N=>this.getLayer(N)),O=M.length!==0?this.queryRenderedFeatures(w.point,{layers:M}):[];O.length?g||(g=!0,p.call(this,new So(b,this,w.originalEvent,{features:O}))):g=!1},mouseout:()=>{g=!1}}}}if(b==="mouseleave"||b==="mouseout"){let g=!1;return{layers:s,listener:p,delegates:{mousemove:M=>{let O=s.filter(N=>this.getLayer(N));(O.length!==0?this.queryRenderedFeatures(M.point,{layers:O}):[]).length?g=!0:g&&(g=!1,p.call(this,new So(b,this,M.originalEvent)))},mouseout:M=>{g&&(g=!1,p.call(this,new So(b,this,M.originalEvent)))}}}}{let g=y=>{let w=s.filter(O=>this.getLayer(O)),M=w.length!==0?this.queryRenderedFeatures(y.point,{layers:w}):[];M.length&&(y.features=M,p.call(this,y),delete y.features)};return{layers:s,listener:p,delegates:{[b]:g}}}}_saveDelegatedListener(b,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(s)}_removeDelegatedListener(b,s,p){if(!this._delegatedListeners||!this._delegatedListeners[b])return;let g=this._delegatedListeners[b];for(let y=0;y<g.length;y++){let w=g[y];if(w.listener===p&&w.layers.length===s.length&&w.layers.every(M=>s.includes(M))){for(let M in w.delegates)this.off(M,w.delegates[M]);return void g.splice(y,1)}}}on(b,s,p){if(p===void 0)return super.on(b,s);let g=this._createDelegatedListener(b,typeof s=="string"?[s]:s,p);this._saveDelegatedListener(b,g);for(let y in g.delegates)this.on(y,g.delegates[y]);return this}once(b,s,p){if(p===void 0)return super.once(b,s);let g=typeof s=="string"?[s]:s,y=this._createDelegatedListener(b,g,p);for(let w in y.delegates){let M=y.delegates[w];y.delegates[w]=(...O)=>{this._removeDelegatedListener(b,g,p),M(...O)}}this._saveDelegatedListener(b,y);for(let w in y.delegates)this.once(w,y.delegates[w]);return this}off(b,s,p){return p===void 0?super.off(b,s):(this._removeDelegatedListener(b,typeof s=="string"?[s]:s,p),this)}queryRenderedFeatures(b,s){if(!this.style)return[];let p,g=b instanceof o.P||Array.isArray(b),y=g?b:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(g?{}:b)||{},y instanceof o.P||typeof y[0]=="number")p=[o.P.convert(y)];else{let w=o.P.convert(y[0]),M=o.P.convert(y[1]);p=[w,new o.P(M.x,w.y),M,new o.P(w.x,M.y),w]}return this.style.queryRenderedFeatures(p,s,this.transform)}querySourceFeatures(b,s){return this.style.querySourceFeatures(b,s)}setStyle(b,s){return(s=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(b,s))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){let s=this._locale[b];if(s==null)throw new Error(`Missing UI string '${b}'`);return s}_updateStyle(b,s){if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(b,s));let p=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!b)),b?(this.style=new Hv(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b,s,p):this.style.loadJSON(b,s,p),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Hv(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,s){if(typeof b=="string"){let p=this._requestManager.transformRequest(b,"Style");o.h(p,new AbortController).then(g=>{this._updateDiff(g.data,s)}).catch(g=>{g&&this.fire(new o.j(g))})}else typeof b=="object"&&this._updateDiff(b,s)}_updateDiff(b,s){try{this.style.setState(b,s)&&this._update(!0)}catch(p){o.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(b,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(b,s){return this._lazyInitEmptyStyle(),this.style.addSource(b,s),this._update(!0)}isSourceLoaded(b){let s=this.style&&this.style.sourceCaches[b];if(s!==void 0)return s.loaded();this.fire(new o.j(new Error(`There is no source with ID '${b}'`)))}setTerrain(b){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),b){let s=this.style.sourceCaches[b.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${b.source}`);this.terrain===null&&s.reload();for(let p in this.style._layers){let g=this.style._layers[p];g.type==="hillshade"&&g.source===b.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Xx(this.painter,s,b),this.painter.renderToTexture=new mT(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=p=>{p.dataType==="style"?this.terrain.sourceCache.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==b.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new o.k("terrain",{terrain:b})),this}getTerrain(){var b,s;return(s=(b=this.terrain)===null||b===void 0?void 0:b.options)!==null&&s!==void 0?s:null}areTilesLoaded(){let b=this.style&&this.style.sourceCaches;for(let s in b){let p=b[s]._tiles;for(let g in p){let y=p[g];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}addImage(b,s,p={}){let{pixelRatio:g=1,sdf:y=!1,stretchX:w,stretchY:M,content:O,textFitWidth:N,textFitHeight:z}=p;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||o.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:V,height:G,data:X}=s,ne=s;return this.style.addImage(b,{data:new o.R({width:V,height:G},new Uint8Array(X)),pixelRatio:g,stretchX:w,stretchY:M,content:O,textFitWidth:N,textFitHeight:z,sdf:y,version:0,userImage:ne}),ne.onAdd&&ne.onAdd(this,b),this}}{let{width:V,height:G,data:X}=d.getImageData(s);this.style.addImage(b,{data:new o.R({width:V,height:G},X),pixelRatio:g,stretchX:w,stretchY:M,content:O,textFitWidth:N,textFitHeight:z,sdf:y,version:0})}}updateImage(b,s){let p=this.style.getImage(b);if(!p)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let g=s instanceof HTMLImageElement||o.b(s)?d.getImageData(s):s,{width:y,height:w,data:M}=g;if(y===void 0||w===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==p.data.width||w!==p.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));let O=!(s instanceof HTMLImageElement||o.b(s));return p.data.replace(M,O),this.style.updateImage(b,p),this}getImage(b){return this.style.getImage(b)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b){return D.getImage(this._requestManager.transformRequest(b,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(b,s){return this._lazyInitEmptyStyle(),this.style.addLayer(b,s),this._update(!0)}moveLayer(b,s){return this.style.moveLayer(b,s),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(b,s,p){return this.style.setLayerZoomRange(b,s,p),this._update(!0)}setFilter(b,s,p={}){return this.style.setFilter(b,s,p),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,s,p,g={}){return this.style.setPaintProperty(b,s,p,g),this._update(!0)}getPaintProperty(b,s){return this.style.getPaintProperty(b,s)}setLayoutProperty(b,s,p,g={}){return this.style.setLayoutProperty(b,s,p,g),this._update(!0)}getLayoutProperty(b,s){return this.style.getLayoutProperty(b,s)}setGlyphs(b,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(b,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(b,s,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(b,s,p,g=>{g||this._update(!0)}),this}removeSprite(b){return this._lazyInitEmptyStyle(),this.style.removeSprite(b),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(b,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(b,s,p=>{p||this._update(!0)}),this}setLight(b,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(b){return this._lazyInitEmptyStyle(),this.style.setSky(b),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(b,s){return this.style.setFeatureState(b,s),this._update()}removeFeatureState(b,s){return this.style.removeFeatureState(b,s),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,s=0;return this._container&&(b=this._container.clientWidth||400,s=this._container.clientHeight||300),[b,s]}_setupContainer(){let b=this._container;b.classList.add("maplibregl-map");let s=this._canvasContainer=v.create("div","maplibregl-canvas-container",b);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=v.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let p=this._containerDimensions(),g=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],g);let y=this._controlContainer=v.create("div","maplibregl-control-container",b),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(M=>{w[M]=v.create("div",`maplibregl-ctrl-${M} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(b,s,p){this._canvas.width=Math.floor(p*b),this._canvas.height=Math.floor(p*s),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${s}px`}_setupPainter(){let b={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},s=null;this._canvas.addEventListener("webglcontextcreationerror",g=>{s={requestedAttributes:b},g&&(s.statusMessage=g.statusMessage,s.type=g.type)},{once:!0});let p=this._canvas.getContext("webgl2",b)||this._canvas.getContext("webgl",b);if(!p){let g="Failed to initialize WebGL";throw s?(s.message=g,new Error(JSON.stringify(s))):new Error(g)}this.painter=new lg(p,this.transform),x.testSupport(p)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){let s=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let p=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let y=this.transform.zoom,w=d.now();this.style.zoomHistory.update(y,w);let M=new o.z(y,{now:w,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),O=M.crossFadingFactor();O===1&&O===this._crossFadingFactor||(p=!0,this._crossFadingFactor=O),this.style.update(M)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.bf.mark(o.bg.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||p)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let g=this._sourcesDirty||this._styleDirty||this._placementDirty;return g||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||g||(this._fullyLoaded=!0,o.bf.mark(o.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var b;this._hash&&this._hash.remove();for(let p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),D.removeThrottleControl(this._imageQueueHandle),(b=this._resizeObserver)===null||b===void 0||b.disconnect();let s=this.painter.context.gl.getExtension("WEBGL_lose_context");s!=null&&s.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),v.remove(this._canvasContainer),v.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),o.bf.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,d.frameAsync(this._frameRequest).then(b=>{o.bf.frame(b),this._frameRequest=null,this._render(b)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get version(){return vT}getCameraTargetElevation(){return this.transform.elevation}},i.MapMouseEvent=So,i.MapTouchEvent=pf,i.MapWheelEvent=uT,i.Marker=_g,i.NavigationControl=class{constructor(b){this._updateZoomButtons=()=>{let s=this._map.getZoom(),p=s===this._map.getMaxZoom(),g=s===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{let s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=s},this._setButtonTitle=(s,p)=>{let g=this._map._getUIString(`NavigationControl.${p}`);s.title=g,s.setAttribute("aria-label",g)},this.options=o.e({},ok,b),this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),v.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),v.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=v.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ak(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){v.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,s){let p=v.create("button",b,this._container);return p.type="button",p.addEventListener("click",s),p}},i.Popup=class extends o.E{constructor(b){super(),this.remove=()=>(this._content&&v.remove(this._content),this._container&&(v.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.k("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{var p;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=v.create("div","maplibregl-popup",this._map.getContainer()),this._tip=v.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let O of this.options.className.split(" "))this._container.classList.add(O);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Vn(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._trackPointer&&!s)return;let g=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationPoint(this._lngLat));let y=this.options.anchor,w=wg(this.options.offset);if(!y){let O=this._container.offsetWidth,N=this._container.offsetHeight,z;z=g.y+w.bottom.y<N?["top"]:g.y>this._map.transform.height-N?["bottom"]:[],g.x<O/2?z.push("left"):g.x>this._map.transform.width-O/2&&z.push("right"),y=z.length===0?"bottom":z.join("-")}let M=g.add(w[y]);this.options.subpixelPositioning||(M=M.round()),v.setTransform(this._container,`${Kh[y]} translate(${M.x}px,${M.y}px)`),yg(this._container,y,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(ur),b)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=o.N.convert(b),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){let s=document.createDocumentFragment(),p=document.createElement("body"),g;for(p.innerHTML=b;g=p.firstChild,g;)s.appendChild(g);return this.setDOMContent(s)}getMaxWidth(){var b;return(b=this._container)===null||b===void 0?void 0:b.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=v.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){return this._container&&this._container.classList.add(b),this}removeClassName(b){return this._container&&this._container.classList.remove(b),this}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}setSubpixelPositioning(b){this.options.subpixelPositioning=b}_createCloseButton(){this.options.closeButton&&(this._closeButton=v.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let b=this._container.querySelector(xg);b&&b.focus()}},i.RasterDEMTileSource=nr,i.RasterTileSource=Ft,i.ScaleControl=class{constructor(b){this._onMove=()=>{om(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,om(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Il),b)}getDefaultPosition(){return"bottom-left"}onAdd(b){return this._map=b,this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){v.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},i.ScrollZoomHandler=Ks,i.Style=Hv,i.TerrainControl=class{constructor(b){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=b}onAdd(b){return this._map=b,this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=v.create("button","maplibregl-ctrl-terrain",this._container),v.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){v.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},i.TwoFingersTouchPitchHandler=$h,i.TwoFingersTouchRotateHandler=$x,i.TwoFingersTouchZoomHandler=Vx,i.TwoFingersTouchZoomRotateHandler=Wx,i.VectorTileSource=Qt,i.VideoSource=Pr,i.addSourceType=(b,s)=>o._(void 0,void 0,void 0,function*(){if(Ii(b))throw new Error(`A source type called "${b}" already exists.`);((p,g)=>{ai[p]=g})(b,s)}),i.clearPrewarmedResources=function(){let b=Le;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(Pe),Le=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},i.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},i.getRTLTextPluginStatus=function(){return di().getRTLTextPluginStatus()},i.getVersion=function(){return ew},i.getWorkerCount=function(){return at.workerCount},i.getWorkerUrl=function(){return o.a.WORKER_URL},i.importScriptInWorkers=function(b){return tt().broadcast("IS",b)},i.prewarm=function(){Fe().acquire(Pe)},i.setMaxParallelImageRequests=function(b){o.a.MAX_PARALLEL_IMAGE_REQUESTS=b},i.setRTLTextPlugin=function(b,s){return di().setRTLTextPlugin(b,s)},i.setWorkerCount=function(b){at.workerCount=b},i.setWorkerUrl=function(b){o.a.WORKER_URL=b}});var n=r;return n})});var UP=A((FIr,jCe)=>{var S$=1/0,rUt=17976931348623157e292,RCe=NaN,nUt="[object Symbol]",iUt=/^\s+|\s+$/g,oUt=/^[-+]0x[0-9a-f]+$/i,aUt=/^0b[01]+$/i,sUt=/^0o[0-7]+$/i,lUt=parseInt,uUt=typeof global=="object"&&global&&global.Object===Object&&global,cUt=typeof self=="object"&&self&&self.Object===Object&&self,fUt=uUt||cUt||Function("return this")(),hUt=Object.prototype,pUt=hUt.toString,PCe=fUt.Symbol,dUt=Math.min,OCe=PCe?PCe.prototype:void 0,LCe=OCe?OCe.toString:void 0;function mUt(r){if(typeof r=="string")return r;if(kCe(r))return LCe?LCe.call(r):"";var e=r+"";return e=="0"&&1/r==-S$?"-0":e}function vUt(r){var e=Math[r];return function(t,n){if(t=qCe(t),n=dUt(_Ut(n),292),n){var i=(NCe(t)+"e").split("e"),o=e(i[0]+"e"+(+i[1]+n));return i=(NCe(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(t)}}function DCe(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function gUt(r){return!!r&&typeof r=="object"}function kCe(r){return typeof r=="symbol"||gUt(r)&&pUt.call(r)==nUt}function yUt(r){if(!r)return r===0?r:0;if(r=qCe(r),r===S$||r===-S$){var e=r<0?-1:1;return e*rUt}return r===r?r:0}function _Ut(r){var e=yUt(r),t=e%1;return e===e?t?e-t:e:0}function qCe(r){if(typeof r=="number")return r;if(kCe(r))return RCe;if(DCe(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=DCe(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(iUt,"");var t=aUt.test(r);return t||sUt.test(r)?lUt(r.slice(2),t?2:8):oUt.test(r)?RCe:+r}function NCe(r){return r==null?"":mUt(r)}var xUt=vUt("round");jCe.exports=xUt});var nRe=A((KTr,rRe)=>{"use strict";rRe.exports=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)});var lRe=A((XTr,sRe)=>{"use strict";var aRe="%[a-f0-9]{2}",iRe=new RegExp("("+aRe+")|([^%]+?)","gi"),oRe=new RegExp("("+aRe+")+","gi");function m6(r,e){try{return[decodeURIComponent(r.join(""))]}catch(i){}if(r.length===1)return r;e=e||1;var t=r.slice(0,e),n=r.slice(e);return Array.prototype.concat.call([],m6(t),m6(n))}function V$t(r){try{return decodeURIComponent(r)}catch(n){for(var e=r.match(iRe)||[],t=1;t<e.length;t++)r=m6(e,t).join(""),e=r.match(iRe)||[];return r}}function G$t(r){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},t=oRe.exec(r);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch(c){var n=V$t(t[0]);n!==t[0]&&(e[t[0]]=n)}t=oRe.exec(r)}e["%C2"]="\uFFFD";for(var i=Object.keys(e),o=0;o<i.length;o++){var a=i[o];r=r.replace(new RegExp(a,"g"),e[a])}return r}sRe.exports=function(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch(e){return G$t(r)}}});var cRe=A((JTr,uRe)=>{"use strict";uRe.exports=(r,e)=>{if(!(typeof r=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[r];let t=r.indexOf(e);return t===-1?[r]:[r.slice(0,t),r.slice(t+e.length)]}});var hRe=A((QTr,fRe)=>{"use strict";fRe.exports=function(r,e){for(var t={},n=Object.keys(r),i=Array.isArray(e),o=0;o<n.length;o++){var a=n[o],c=r[a];(i?e.indexOf(a)!==-1:e(a,c,r))&&(t[a]=c)}return t}});var g6=A(Rs=>{"use strict";var $$t=nRe(),H$t=lRe(),dRe=cRe(),W$t=hRe(),Z$t=r=>r==null,v6=Symbol("encodeFragmentIdentifier");function Y$t(r){switch(r.arrayFormat){case"index":return e=>(t,n)=>{let i=t.length;return n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?t:n===null?[...t,[Yi(e,r),"[",i,"]"].join("")]:[...t,[Yi(e,r),"[",Yi(i,r),"]=",Yi(n,r)].join("")]};case"bracket":return e=>(t,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?t:n===null?[...t,[Yi(e,r),"[]"].join("")]:[...t,[Yi(e,r),"[]=",Yi(n,r)].join("")];case"colon-list-separator":return e=>(t,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?t:n===null?[...t,[Yi(e,r),":list="].join("")]:[...t,[Yi(e,r),":list=",Yi(n,r)].join("")];case"comma":case"separator":case"bracket-separator":{let e=r.arrayFormat==="bracket-separator"?"[]=":"=";return t=>(n,i)=>i===void 0||r.skipNull&&i===null||r.skipEmptyString&&i===""?n:(i=i===null?"":i,n.length===0?[[Yi(t,r),e,Yi(i,r)].join("")]:[[n,Yi(i,r)].join(r.arrayFormatSeparator)])}default:return e=>(t,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?t:n===null?[...t,Yi(e,r)]:[...t,[Yi(e,r),"=",Yi(n,r)].join("")];}}function K$t(r){let e;switch(r.arrayFormat){case"index":return(t,n,i)=>{if(e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),!e){i[t]=n;return}i[t]===void 0&&(i[t]={}),i[t][e[1]]=n};case"bracket":return(t,n,i)=>{if(e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),!e){i[t]=n;return}if(i[t]===void 0){i[t]=[n];return}i[t]=[].concat(i[t],n)};case"colon-list-separator":return(t,n,i)=>{if(e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),!e){i[t]=n;return}if(i[t]===void 0){i[t]=[n];return}i[t]=[].concat(i[t],n)};case"comma":case"separator":return(t,n,i)=>{let o=typeof n=="string"&&n.includes(r.arrayFormatSeparator),a=typeof n=="string"&&!o&&Jf(n,r).includes(r.arrayFormatSeparator);n=a?Jf(n,r):n;let c=o||a?n.split(r.arrayFormatSeparator).map(h=>Jf(h,r)):n===null?n:Jf(n,r);i[t]=c};case"bracket-separator":return(t,n,i)=>{let o=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!o){i[t]=n&&Jf(n,r);return}let a=n===null?[]:n.split(r.arrayFormatSeparator).map(c=>Jf(c,r));if(i[t]===void 0){i[t]=a;return}i[t]=[].concat(i[t],a)};default:return(t,n,i)=>{if(i[t]===void 0){i[t]=n;return}i[t]=[].concat(i[t],n)};}}function mRe(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function Yi(r,e){return e.encode?e.strict?$$t(r):encodeURIComponent(r):r}function Jf(r,e){return e.decode?H$t(r):r}function vRe(r){return Array.isArray(r)?r.sort():typeof r=="object"?vRe(Object.keys(r)).sort((e,t)=>Number(e)-Number(t)).map(e=>r[e]):r}function gRe(r){let e=r.indexOf("#");return e!==-1&&(r=r.slice(0,e)),r}function X$t(r){let e="",t=r.indexOf("#");return t!==-1&&(e=r.slice(t)),e}function yRe(r){r=gRe(r);let e=r.indexOf("?");return e===-1?"":r.slice(e+1)}function pRe(r,e){return e.parseNumbers&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?r=Number(r):e.parseBooleans&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")&&(r=r.toLowerCase()==="true"),r}function _Re(r,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),mRe(e.arrayFormatSeparator);let t=K$t(e),n=Object.create(null);if(typeof r!="string"||(r=r.trim().replace(/^[?#&]/,""),!r))return n;for(let i of r.split("&")){if(i==="")continue;let[o,a]=dRe(e.decode?i.replace(/\+/g," "):i,"=");a=a===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?a:Jf(a,e),t(Jf(o,e),a,n)}for(let i of Object.keys(n)){let o=n[i];if(typeof o=="object"&&o!==null)for(let a of Object.keys(o))o[a]=pRe(o[a],e);else n[i]=pRe(o,e)}return e.sort===!1?n:(e.sort===!0?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((i,o)=>{let a=n[o];return a&&typeof a=="object"&&!Array.isArray(a)?i[o]=vRe(a):i[o]=a,i},Object.create(null))}Rs.extract=yRe;Rs.parse=_Re;Rs.stringify=(r,e)=>{if(!r)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),mRe(e.arrayFormatSeparator);let t=a=>e.skipNull&&Z$t(r[a])||e.skipEmptyString&&r[a]==="",n=Y$t(e),i={};for(let a of Object.keys(r))t(a)||(i[a]=r[a]);let o=Object.keys(i);return e.sort!==!1&&o.sort(e.sort),o.map(a=>{let c=r[a];return c===void 0?"":c===null?Yi(a,e):Array.isArray(c)?c.length===0&&e.arrayFormat==="bracket-separator"?Yi(a,e)+"[]":c.reduce(n(a),[]).join("&"):Yi(a,e)+"="+Yi(c,e)}).filter(a=>a.length>0).join("&")};Rs.parseUrl=(r,e)=>{e=Object.assign({decode:!0},e);let[t,n]=dRe(r,"#");return Object.assign({url:t.split("?")[0]||"",query:_Re(yRe(r),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:Jf(n,e)}:{})};Rs.stringifyUrl=(r,e)=>{e=Object.assign({encode:!0,strict:!0,[v6]:!0},e);let t=gRe(r.url).split("?")[0]||"",n=Rs.extract(r.url),i=Rs.parse(n,{sort:!1}),o=Object.assign(i,r.query),a=Rs.stringify(o,e);a&&(a=`?${a}`);let c=X$t(r.url);return r.fragmentIdentifier&&(c=`#${e[v6]?Yi(r.fragmentIdentifier,e):r.fragmentIdentifier}`),`${t}${a}${c}`};Rs.pick=(r,e,t)=>{t=Object.assign({parseFragmentIdentifier:!0,[v6]:!1},t);let{url:n,query:i,fragmentIdentifier:o}=Rs.parseUrl(r,t);return Rs.stringifyUrl({url:n,query:W$t(i,e),fragmentIdentifier:o},t)};Rs.exclude=(r,e,t)=>{let n=Array.isArray(e)?i=>!e.includes(i):(i,o)=>!e(i,o);return Rs.pick(r,n,t)}});var IRe=A((fAr,ERe)=>{"use strict";var J$t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";ERe.exports=J$t});var MRe=A((hAr,CRe)=>{"use strict";var Q$t=IRe();function TRe(){}function ARe(){}ARe.resetWarningCache=TRe;CRe.exports=function(){function r(n,i,o,a,c,h){if(h!==Q$t){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function e(){return r}var t={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ARe,resetWarningCache:TRe};return t.PropTypes=t,t}});var Jr=A((mAr,RRe)=>{RRe.exports=MRe()();var pAr,dAr});var j_=A((MAr,kRe)=>{var t6t=kRe.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=t6t)});var tu=A((RAr,qRe)=>{var r6t=qRe.exports={version:"2.6.12"};typeof __e=="number"&&(__e=r6t)});var FRe=A((PAr,jRe)=>{jRe.exports=function(r){if(typeof r!="function")throw TypeError(r+" is not a function!");return r}});var TO=A((OAr,zRe)=>{var n6t=FRe();zRe.exports=function(r,e,t){if(n6t(r),e===void 0)return r;switch(t){case 1:return function(n){return r.call(e,n)};case 2:return function(n,i){return r.call(e,n,i)};case 3:return function(n,i,o){return r.call(e,n,i,o)};}return function(){return r.apply(e,arguments)}}});var kS=A((LAr,BRe)=>{BRe.exports=function(r){return typeof r=="object"?r!==null:typeof r=="function"}});var F_=A((DAr,URe)=>{var i6t=kS();URe.exports=function(r){if(!i6t(r))throw TypeError(r+" is not an object!");return r}});var qS=A((NAr,VRe)=>{VRe.exports=function(r){try{return!!r()}catch(e){return!0}}});var ud=A((kAr,GRe)=>{GRe.exports=!qS()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var x6=A((qAr,HRe)=>{var $Re=kS(),_6=j_().document,o6t=$Re(_6)&&$Re(_6.createElement);HRe.exports=function(r){return o6t?_6.createElement(r):{}}});var w6=A((jAr,WRe)=>{WRe.exports=!ud()&&!qS()(function(){return Object.defineProperty(x6()("div"),"a",{get:function(){return 7}}).a!=7})});var b6=A((FAr,ZRe)=>{var AO=kS();ZRe.exports=function(r,e){if(!AO(r))return r;var t,n;if(e&&typeof(t=r.toString)=="function"&&!AO(n=t.call(r))||typeof(t=r.valueOf)=="function"&&!AO(n=t.call(r))||!e&&typeof(t=r.toString)=="function"&&!AO(n=t.call(r)))return n;throw TypeError("Can't convert object to primitive value")}});var jS=A(KRe=>{var YRe=F_(),a6t=w6(),s6t=b6(),l6t=Object.defineProperty;KRe.f=ud()?Object.defineProperty:function(e,t,n){if(YRe(e),t=s6t(t,!0),YRe(n),a6t)try{return l6t(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}});var FS=A((BAr,XRe)=>{XRe.exports=function(r,e){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:e}}});var zS=A((UAr,JRe)=>{var u6t=jS(),c6t=FS();JRe.exports=ud()?function(r,e,t){return u6t.f(r,e,c6t(1,t))}:function(r,e,t){return r[e]=t,r}});var z_=A((VAr,QRe)=>{var f6t={}.hasOwnProperty;QRe.exports=function(r,e){return f6t.call(r,e)}});var eh=A((GAr,tPe)=>{var CO=j_(),S6=tu(),ePe=TO(),h6t=zS(),p6t=z_(),MO="prototype",Ea=function(r,e,t){var n=r&Ea.F,i=r&Ea.G,o=r&Ea.S,a=r&Ea.P,c=r&Ea.B,h=r&Ea.W,d=i?S6:S6[e]||(S6[e]={}),v=d[MO],x=i?CO:o?CO[e]:(CO[e]||{})[MO],S,T,L;i&&(t=e);for(S in t)T=!n&&x&&x[S]!==void 0,!(T&&p6t(d,S))&&(L=T?x[S]:t[S],d[S]=i&&typeof x[S]!="function"?t[S]:c&&T?ePe(L,CO):h&&x[S]==L?function(k){var R=function(D,j,B){if(this instanceof k){switch(arguments.length){case 0:return new k;case 1:return new k(D);case 2:return new k(D,j);}return new k(D,j,B)}return k.apply(this,arguments)};return R[MO]=k[MO],R}(L):a&&typeof L=="function"?ePe(Function.call,L):L,a&&((d.virtual||(d.virtual={}))[S]=L,r&Ea.R&&v&&!v[S]&&h6t(v,S,L)))};Ea.F=1;Ea.G=2;Ea.S=4;Ea.P=8;Ea.B=16;Ea.W=32;Ea.U=64;Ea.R=128;tPe.exports=Ea});var E6=A(($Ar,rPe)=>{var d6t={}.toString;rPe.exports=function(r){return d6t.call(r).slice(8,-1)}});var I6=A((HAr,nPe)=>{var m6t=E6();nPe.exports=Object("z").propertyIsEnumerable(0)?Object:function(r){return m6t(r)=="String"?r.split(""):Object(r)}});var RO=A((WAr,iPe)=>{iPe.exports=function(r){if(r==null)throw TypeError("Can't call method on  "+r);return r}});var BS=A((ZAr,oPe)=>{var v6t=I6(),g6t=RO();oPe.exports=function(r){return v6t(g6t(r))}});var PO=A((YAr,aPe)=>{var y6t=Math.ceil,_6t=Math.floor;aPe.exports=function(r){return isNaN(r=+r)?0:(r>0?_6t:y6t)(r)}});var T6=A((KAr,sPe)=>{var x6t=PO(),w6t=Math.min;sPe.exports=function(r){return r>0?w6t(x6t(r),9007199254740991):0}});var uPe=A((XAr,lPe)=>{var b6t=PO(),S6t=Math.max,E6t=Math.min;lPe.exports=function(r,e){return r=b6t(r),r<0?S6t(r+e,0):E6t(r,e)}});var fPe=A((JAr,cPe)=>{var I6t=BS(),T6t=T6(),A6t=uPe();cPe.exports=function(r){return function(e,t,n){var i=I6t(e),o=T6t(i.length),a=A6t(n,o),c;if(r&&t!=t){for(;o>a;)if(c=i[a++],c!=c)return!0}else for(;o>a;a++)if((r||a in i)&&i[a]===t)return r||a||0;return!r&&-1}}});var A6=A((QAr,hPe)=>{hPe.exports=!0});var C6=A((eCr,vPe)=>{var C6t=tu(),pPe=j_(),dPe="__core-js_shared__",mPe=pPe[dPe]||(pPe[dPe]={});(vPe.exports=function(r,e){return mPe[r]||(mPe[r]=e!==void 0?e:{})})("versions",[]).push({version:C6t.version,mode:A6()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var M6=A((tCr,gPe)=>{var M6t=0,R6t=Math.random();gPe.exports=function(r){return"Symbol(".concat(r===void 0?"":r,")_",(++M6t+R6t).toString(36))}});var OO=A((rCr,_Pe)=>{var yPe=C6()("keys"),P6t=M6();_Pe.exports=function(r){return yPe[r]||(yPe[r]=P6t(r))}});var bPe=A((nCr,wPe)=>{var xPe=z_(),O6t=BS(),L6t=fPe()(!1),D6t=OO()("IE_PROTO");wPe.exports=function(r,e){var t=O6t(r),n=0,i=[],o;for(o in t)o!=D6t&&xPe(t,o)&&i.push(o);for(;e.length>n;)xPe(t,o=e[n++])&&(~L6t(i,o)||i.push(o));return i}});var R6=A((iCr,SPe)=>{SPe.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var US=A((oCr,EPe)=>{var N6t=bPe(),k6t=R6();EPe.exports=Object.keys||function(e){return N6t(e,k6t)}});var TPe=A(IPe=>{IPe.f=Object.getOwnPropertySymbols});var LO=A(APe=>{APe.f={}.propertyIsEnumerable});var VS=A((lCr,CPe)=>{var q6t=RO();CPe.exports=function(r){return Object(q6t(r))}});var PPe=A((uCr,RPe)=>{"use strict";var j6t=ud(),MPe=US(),F6t=TPe(),z6t=LO(),B6t=VS(),U6t=I6(),DO=Object.assign;RPe.exports=!DO||qS()(function(){var r={},e={},t=Symbol(),n="abcdefghijklmnopqrst";return r[t]=7,n.split("").forEach(function(i){e[i]=i}),DO({},r)[t]!=7||Object.keys(DO({},e)).join("")!=n})?function(e,t){for(var n=B6t(e),i=arguments.length,o=1,a=F6t.f,c=z6t.f;i>o;)for(var h=U6t(arguments[o++]),d=a?MPe(h).concat(a(h)):MPe(h),v=d.length,x=0,S;v>x;)S=d[x++],(!j6t||c.call(h,S))&&(n[S]=h[S]);return n}:DO});var OPe=A(()=>{var P6=eh();P6(P6.S+P6.F,"Object",{assign:PPe()})});var DPe=A((hCr,LPe)=>{OPe();LPe.exports=tu().Object.assign});var kPe=A((dCr,NPe)=>{var V6t=jS(),G6t=F_(),$6t=US();NPe.exports=ud()?Object.defineProperties:function(e,t){G6t(e);for(var n=$6t(t),i=n.length,o=0,a;i>o;)V6t.f(e,a=n[o++],t[a]);return e}});var FPe=A((mCr,jPe)=>{var qPe=j_().document;jPe.exports=qPe&&qPe.documentElement});var N6=A((vCr,BPe)=>{var H6t=F_(),W6t=kPe(),zPe=R6(),Z6t=OO()("IE_PROTO"),L6=function(){},D6="prototype",NO=function(){var r=x6()("iframe"),e=zPe.length,t="<",n=">",i;for(r.style.display="none",FPe().appendChild(r),r.src="javascript:",i=r.contentWindow.document,i.open(),i.write(t+"script"+n+"document.F=Object"+t+"/script"+n),i.close(),NO=i.F;e--;)delete NO[D6][zPe[e]];return NO()};BPe.exports=Object.create||function(e,t){var n;return e!==null?(L6[D6]=H6t(e),n=new L6,L6[D6]=null,n[Z6t]=e):n=NO(),t===void 0?n:W6t(n,t)}});var VPe=A(()=>{var UPe=eh();UPe(UPe.S,"Object",{create:N6()})});var $Pe=A((_Cr,GPe)=>{VPe();var Y6t=tu().Object;GPe.exports=function(e,t){return Y6t.create(e,t)}});var ZPe=A(WPe=>{var K6t=LO(),X6t=FS(),J6t=BS(),Q6t=b6(),eHt=z_(),tHt=w6(),HPe=Object.getOwnPropertyDescriptor;WPe.f=ud()?HPe:function(e,t){if(e=J6t(e),t=Q6t(t,!0),tHt)try{return HPe(e,t)}catch(n){}if(eHt(e,t))return X6t(!K6t.f.call(e,t),e[t])}});var XPe=A((wCr,KPe)=>{var rHt=kS(),nHt=F_(),YPe=function(r,e){if(nHt(r),!rHt(e)&&e!==null)throw TypeError(e+": can't set as prototype!")};KPe.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(r,e,t){try{t=TO()(Function.call,ZPe().f(Object.prototype,"__proto__").set,2),t(r,[]),e=!(r instanceof Array)}catch(n){e=!0}return function(i,o){return YPe(i,o),e?i.__proto__=o:t(i,o),i}}({},!1):void 0),check:YPe}});var QPe=A(()=>{var JPe=eh();JPe(JPe.S,"Object",{setPrototypeOf:XPe().set})});var tOe=A((ECr,eOe)=>{QPe();eOe.exports=tu().Object.setPrototypeOf});var iOe=A((CCr,nOe)=>{var q6=eh(),iHt=tu(),oHt=qS();nOe.exports=function(r,e){var t=(iHt.Object||{})[r]||Object[r],n={};n[r]=e(t),q6(q6.S+q6.F*oHt(function(){t(1)}),"Object",n)}});var oOe=A(()=>{var aHt=VS(),sHt=US();iOe()("keys",function(){return function(e){return sHt(aHt(e))}})});var sOe=A((PCr,aOe)=>{oOe();aOe.exports=tu().Object.keys});var hi=A((LCr,kO)=>{(function(){"use strict";var r={}.hasOwnProperty,e="[native code]";function t(){for(var n=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var a=typeof o;if(a==="string"||a==="number")n.push(o);else if(Array.isArray(o)){if(o.length){var c=t.apply(null,o);c&&n.push(c)}}else if(a==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){n.push(o.toString());continue}for(var h in o)r.call(o,h)&&o[h]&&n.push(h)}}}return n.join(" ")}typeof kO!="undefined"&&kO.exports?(t.default=t,kO.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var qO=A((kCr,uOe)=>{"use strict";var lHt=function(r,e,t,n,i,o,a,c){if(!r){var h;if(e===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[t,n,i,o,a,c],v=0;h=new Error(e.replace(/%s/g,function(){return d[v++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};uOe.exports=lHt});var U6=A(B6=>{"use strict";Object.defineProperty(B6,"__esModule",{value:!0});function pOe(){var r=this.constructor.getDerivedStateFromProps(this.props,this.state);r!=null&&this.setState(r)}function dOe(r){function e(t){var n=this.constructor.getDerivedStateFromProps(r,t);return n!=null?n:null}this.setState(e.bind(this))}function mOe(r,e){try{var t=this.props,n=this.state;this.props=r,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,n)}finally{this.props=t,this.state=n}}pOe.__suppressDeprecationWarning=!0;dOe.__suppressDeprecationWarning=!0;mOe.__suppressDeprecationWarning=!0;function cHt(r){var e=r.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof r.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return r;var t=null,n=null,i=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),t!==null||n!==null||i!==null){var o=r.displayName||r.name,a=typeof r.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+a+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof r.getDerivedStateFromProps=="function"&&(e.componentWillMount=pOe,e.componentWillReceiveProps=dOe),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=mOe;var c=e.componentDidUpdate;e.componentDidUpdate=function(d,v,x){var S=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:x;c.call(this,d,v,S)}}return r}B6.polyfill=cHt});var V6=A((tMr,yOe)=>{var hHt=ud(),pHt=US(),dHt=BS(),mHt=LO().f;yOe.exports=function(r){return function(e){for(var t=dHt(e),n=pHt(t),i=n.length,o=0,a=[],c;i>o;)c=n[o++],(!hHt||mHt.call(t,c))&&a.push(r?[c,t[c]]:t[c]);return a}}});var xOe=A(()=>{var _Oe=eh(),vHt=V6()(!0);_Oe(_Oe.S,"Object",{entries:function(e){return vHt(e)}})});var bOe=A((iMr,wOe)=>{xOe();wOe.exports=tu().Object.entries});var G6=A((oMr,SOe)=>{SOe.exports=bOe()});var WS=A((zO,MOe)=>{"use strict";Object.defineProperty(zO,"__esModule",{value:!0});zO.default=IHt;function IHt(r){function e(n,i,o,a,c,h){var d=a||"<<anonymous>>",v=h||o;if(i[o]==null)return n?new Error("Required "+c+" `"+v+"` was not specified "+("in `"+d+"`.")):null;for(var x=arguments.length,S=Array(x>6?x-6:0),T=6;T<x;T++)S[T-6]=arguments[T];return r.apply(void 0,[i,o,d,c,v].concat(S))}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}MOe.exports=zO.default});var LOe=A(()=>{var OOe=eh(),THt=V6()(!1);OOe(OOe.S,"Object",{values:function(e){return THt(e)}})});var NOe=A((vMr,DOe)=>{LOe();DOe.exports=tu().Object.values});var qOe=A((gMr,kOe)=>{kOe.exports=NOe()});var zOe=A(jn=>{"use strict";var Do=typeof Symbol=="function"&&Symbol.for,X6=Do?Symbol.for("react.element"):60103,J6=Do?Symbol.for("react.portal"):60106,UO=Do?Symbol.for("react.fragment"):60107,VO=Do?Symbol.for("react.strict_mode"):60108,GO=Do?Symbol.for("react.profiler"):60114,$O=Do?Symbol.for("react.provider"):60109,HO=Do?Symbol.for("react.context"):60110,Q6=Do?Symbol.for("react.async_mode"):60111,WO=Do?Symbol.for("react.concurrent_mode"):60111,ZO=Do?Symbol.for("react.forward_ref"):60112,YO=Do?Symbol.for("react.suspense"):60113,MHt=Do?Symbol.for("react.suspense_list"):60120,KO=Do?Symbol.for("react.memo"):60115,XO=Do?Symbol.for("react.lazy"):60116,RHt=Do?Symbol.for("react.block"):60121,PHt=Do?Symbol.for("react.fundamental"):60117,OHt=Do?Symbol.for("react.responder"):60118,LHt=Do?Symbol.for("react.scope"):60119;function fl(r){if(typeof r=="object"&&r!==null){var e=r.$$typeof;switch(e){case X6:switch(r=r.type,r){case Q6:case WO:case UO:case GO:case VO:case YO:return r;default:switch(r=r&&r.$$typeof,r){case HO:case ZO:case XO:case KO:case $O:return r;default:return e;}}case J6:return e;}}}function FOe(r){return fl(r)===WO}jn.AsyncMode=Q6;jn.ConcurrentMode=WO;jn.ContextConsumer=HO;jn.ContextProvider=$O;jn.Element=X6;jn.ForwardRef=ZO;jn.Fragment=UO;jn.Lazy=XO;jn.Memo=KO;jn.Portal=J6;jn.Profiler=GO;jn.StrictMode=VO;jn.Suspense=YO;jn.isAsyncMode=function(r){return FOe(r)||fl(r)===Q6};jn.isConcurrentMode=FOe;jn.isContextConsumer=function(r){return fl(r)===HO};jn.isContextProvider=function(r){return fl(r)===$O};jn.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===X6};jn.isForwardRef=function(r){return fl(r)===ZO};jn.isFragment=function(r){return fl(r)===UO};jn.isLazy=function(r){return fl(r)===XO};jn.isMemo=function(r){return fl(r)===KO};jn.isPortal=function(r){return fl(r)===J6};jn.isProfiler=function(r){return fl(r)===GO};jn.isStrictMode=function(r){return fl(r)===VO};jn.isSuspense=function(r){return fl(r)===YO};jn.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===UO||r===WO||r===GO||r===VO||r===YO||r===MHt||typeof r=="object"&&r!==null&&(r.$$typeof===XO||r.$$typeof===KO||r.$$typeof===$O||r.$$typeof===HO||r.$$typeof===ZO||r.$$typeof===PHt||r.$$typeof===OHt||r.$$typeof===LHt||r.$$typeof===RHt)};jn.typeOf=fl});var UOe=A((bMr,BOe)=>{"use strict";BOe.exports=zOe()});var th=A((JO,GOe)=>{"use strict";Object.defineProperty(JO,"__esModule",{value:!0});var DHt=dt(),NHt=VOe(DHt),kHt=UOe(),qHt=WS(),jHt=VOe(qHt);function VOe(r){return r&&r.__esModule?r:{default:r}}function FHt(r,e,t,n,i){var o=r[e];return NHt.default.isValidElement(o)?new Error("Invalid "+n+" `"+i+"` of type ReactElement "+("supplied to `"+t+"`,expected an element type (a string ")+", component class, or function component)."):(0,kHt.isValidElementType)(o)?null:new Error("Invalid "+n+" `"+i+"` of value `"+o+"` "+("supplied to `"+t+"`, expected an element type (a string ")+", component class, or function component).")}JO.default=(0,jHt.default)(FHt);GOe.exports=JO.default});var tL=A((eL,YOe)=>{"use strict";Object.defineProperty(eL,"__esModule",{value:!0});eL.default=ZHt;var $Ht=WS(),HHt=WHt($Ht);function WHt(r){return r&&r.__esModule?r:{default:r}}function ZHt(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];function n(){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];var c=null;return e.forEach(function(h){if(c==null){var d=h.apply(void 0,o);d!=null&&(c=d)}}),c}return(0,HHt.default)(n)}YOe.exports=eL.default});var aH=A((VMr,QOe)=>{"use strict";var XHt=function(){};QOe.exports=XHt});var Ta=A((GMr,YS)=>{function JHt(r){return r&&r.__esModule?r:{default:r}}YS.exports=JHt,YS.exports.__esModule=!0,YS.exports.default=YS.exports});var tLe=A((nL,eLe)=>{"use strict";nL.__esModule=!0;nL.default=eWt;var QHt=/-(.)/g;function eWt(r){return r.replace(QHt,function(e,t){return t.toUpperCase()})}eLe.exports=nL.default});var sH=A((iL,rLe)=>{"use strict";var tWt=Ta();iL.__esModule=!0;iL.default=iWt;var rWt=tWt(tLe()),nWt=/^-ms-/;function iWt(r){return(0,rWt.default)(r.replace(nWt,"ms-"))}rLe.exports=iL.default});var iLe=A((oL,nLe)=>{"use strict";oL.__esModule=!0;oL.default=aWt;var oWt=/([A-Z])/g;function aWt(r){return r.replace(oWt,"-$1").toLowerCase()}nLe.exports=oL.default});var aLe=A((aL,oLe)=>{"use strict";var sWt=Ta();aL.__esModule=!0;aL.default=cWt;var lWt=sWt(iLe()),uWt=/^ms-/;function cWt(r){return(0,lWt.default)(r).replace(uWt,"-ms-")}oLe.exports=aL.default});var lLe=A((sL,sLe)=>{"use strict";var fWt=Ta();sL.__esModule=!0;sL.default=mWt;var hWt=fWt(sH()),pWt=/^(top|right|bottom|left)$/,dWt=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function mWt(r){if(!r)throw new TypeError("No Element passed to `getComputedStyle()`");var e=r.ownerDocument;return"defaultView"in e?e.defaultView.opener?r.ownerDocument.defaultView.getComputedStyle(r,null):window.getComputedStyle(r,null):{getPropertyValue:function(n){var i=r.style;n=(0,hWt.default)(n),n=="float"&&(n="styleFloat");var o=r.currentStyle[n]||null;if(o==null&&i&&i[n]&&(o=i[n]),dWt.test(o)&&!pWt.test(n)){var a=i.left,c=r.runtimeStyle,h=c&&c.left;h&&(c.left=r.currentStyle.left),i.left=n==="fontSize"?"1em":o,o=i.pixelLeft+"px",i.left=a,h&&(c.left=h)}return o}}}sLe.exports=sL.default});var cLe=A((lL,uLe)=>{"use strict";lL.__esModule=!0;lL.default=vWt;function vWt(r,e){return"removeProperty"in r.style?r.style.removeProperty(e):r.style.removeAttribute(e)}uLe.exports=lL.default});var jc=A((KS,fLe)=>{"use strict";KS.__esModule=!0;KS.default=void 0;var gWt=!!(typeof window!="undefined"&&window.document&&window.document.createElement);KS.default=gWt;fLe.exports=KS.default});var gLe=A(Qr=>{"use strict";var yWt=Ta();Qr.__esModule=!0;Qr.default=Qr.animationEnd=Qr.animationDelay=Qr.animationTiming=Qr.animationDuration=Qr.animationName=Qr.transitionEnd=Qr.transitionDuration=Qr.transitionDelay=Qr.transitionTiming=Qr.transitionProperty=Qr.transform=void 0;var _Wt=yWt(jc()),cL="transform";Qr.transform=cL;var Fc,lH,hLe;Qr.animationEnd=hLe;Qr.transitionEnd=lH;var uH,cH,fH,hH;Qr.transitionDelay=hH;Qr.transitionTiming=fH;Qr.transitionDuration=cH;Qr.transitionProperty=uH;var pLe,dLe,mLe,vLe;Qr.animationDelay=vLe;Qr.animationTiming=mLe;Qr.animationDuration=dLe;Qr.animationName=pLe;_Wt.default&&(uL=wWt(),Fc=uL.prefix,Qr.transitionEnd=lH=uL.transitionEnd,Qr.animationEnd=hLe=uL.animationEnd,Qr.transform=cL=Fc+"-"+cL,Qr.transitionProperty=uH=Fc+"-transition-property",Qr.transitionDuration=cH=Fc+"-transition-duration",Qr.transitionDelay=hH=Fc+"-transition-delay",Qr.transitionTiming=fH=Fc+"-transition-timing-function",Qr.animationName=pLe=Fc+"-animation-name",Qr.animationDuration=dLe=Fc+"-animation-duration",Qr.animationTiming=mLe=Fc+"-animation-delay",Qr.animationDelay=vLe=Fc+"-animation-timing-function");var uL,xWt={transform:cL,end:lH,property:uH,timing:fH,delay:hH,duration:cH};Qr.default=xWt;function wWt(){for(var r=document.createElement("div").style,e={O:function(d){return"o"+d.toLowerCase()},Moz:function(d){return d.toLowerCase()},Webkit:function(d){return"webkit"+d},ms:function(d){return"MS"+d}},t=Object.keys(e),n,i,o="",a=0;a<t.length;a++){var c=t[a];if(c+"TransitionProperty"in r){o="-"+c.toLowerCase(),n=e[c]("TransitionEnd"),i=e[c]("AnimationEnd");break}}return!n&&"transitionProperty"in r&&(n="transitionend"),!i&&"animationName"in r&&(i="animationend"),r=null,{animationEnd:i,transitionEnd:n,prefix:o}}});var _Le=A((fL,yLe)=>{"use strict";fL.__esModule=!0;fL.default=SWt;var bWt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function SWt(r){return!!(r&&bWt.test(r))}yLe.exports=fL.default});var wLe=A((hL,xLe)=>{"use strict";var XS=Ta();hL.__esModule=!0;hL.default=MWt;var EWt=XS(sH()),pH=XS(aLe()),IWt=XS(lLe()),TWt=XS(cLe()),AWt=gLe(),CWt=XS(_Le());function MWt(r,e,t){var n="",i="",o=e;if(typeof e=="string"){if(t===void 0)return r.style[(0,EWt.default)(e)]||(0,IWt.default)(r).getPropertyValue((0,pH.default)(e));(o={})[e]=t}Object.keys(o).forEach(function(a){var c=o[a];!c&&c!==0?(0,TWt.default)(r,(0,pH.default)(a)):(0,CWt.default)(a)?i+=a+"("+c+") ":n+=(0,pH.default)(a)+": "+c+";"}),i&&(n+=AWt.transform+": "+i+";"),r.style.cssText+=";"+n}xLe.exports=hL.default});var bLe=A(H_=>{"use strict";H_.__esModule=!0;H_.classNamesShape=H_.timeoutsShape=void 0;var HMr=RWt(Jr());function RWt(r){return r&&r.__esModule?r:{default:r}}var PWt=null;H_.timeoutsShape=PWt;var OWt=null;H_.classNamesShape=OWt});var ELe=A(Ls=>{"use strict";Ls.__esModule=!0;Ls.default=Ls.EXITING=Ls.ENTERED=Ls.ENTERING=Ls.EXITED=Ls.UNMOUNTED=void 0;var LWt=kWt(Jr()),dH=SLe(dt()),DWt=SLe(vo()),NWt=U6(),ZMr=bLe();function SLe(r){return r&&r.__esModule?r:{default:r}}function kWt(r){if(r&&r.__esModule)return r;var e={};if(r!=null){for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,t):{};n.get||n.set?Object.defineProperty(e,t,n):e[t]=r[t]}}return e.default=r,e}function qWt(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function jWt(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var JS="unmounted";Ls.UNMOUNTED=JS;var gv="exited";Ls.EXITED=gv;var yv="entering";Ls.ENTERING=yv;var Z_="entered";Ls.ENTERED=Z_;var mH="exiting";Ls.EXITING=mH;var zc=function(r){jWt(e,r);function e(n,i){var o;o=r.call(this,n,i)||this;var a=i.transitionGroup,c=a&&!a.isMounting?n.enter:n.appear,h;return o.appearStatus=null,n.in?c?(h=gv,o.appearStatus=yv):h=Z_:n.unmountOnExit||n.mountOnEnter?h=JS:h=gv,o.state={status:h},o.nextCallback=null,o}var t=e.prototype;return t.getChildContext=function(){return{transitionGroup:null}},e.getDerivedStateFromProps=function(i,o){var a=i.in;return a&&o.status===JS?{status:gv}:null},t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(i){var o=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==yv&&a!==Z_&&(o=yv):(a===yv||a===Z_)&&(o=mH)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var i=this.props.timeout,o,a,c;return o=a=c=i,i!=null&&typeof i!="number"&&(o=i.exit,a=i.enter,c=i.appear!==void 0?i.appear:a),{exit:o,enter:a,appear:c}},t.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null){this.cancelNextCallback();var a=DWt.default.findDOMNode(this);o===yv?this.performEnter(a,i):this.performExit(a)}else this.props.unmountOnExit&&this.state.status===gv&&this.setState({status:JS})},t.performEnter=function(i,o){var a=this,c=this.props.enter,h=this.context.transitionGroup?this.context.transitionGroup.isMounting:o,d=this.getTimeouts(),v=h?d.appear:d.enter;if(!o&&!c){this.safeSetState({status:Z_},function(){a.props.onEntered(i)});return}this.props.onEnter(i,h),this.safeSetState({status:yv},function(){a.props.onEntering(i,h),a.onTransitionEnd(i,v,function(){a.safeSetState({status:Z_},function(){a.props.onEntered(i,h)})})})},t.performExit=function(i){var o=this,a=this.props.exit,c=this.getTimeouts();if(!a){this.safeSetState({status:gv},function(){o.props.onExited(i)});return}this.props.onExit(i),this.safeSetState({status:mH},function(){o.props.onExiting(i),o.onTransitionEnd(i,c.exit,function(){o.safeSetState({status:gv},function(){o.props.onExited(i)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},t.setNextCallback=function(i){var o=this,a=!0;return this.nextCallback=function(c){a&&(a=!1,o.nextCallback=null,i(c))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},t.onTransitionEnd=function(i,o,a){this.setNextCallback(a);var c=o==null&&!this.props.addEndListener;if(!i||c){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(i,this.nextCallback),o!=null&&setTimeout(this.nextCallback,o)},t.render=function(){var i=this.state.status;if(i===JS)return null;var o=this.props,a=o.children,c=qWt(o,["children"]);if(delete c.in,delete c.mountOnEnter,delete c.unmountOnExit,delete c.appear,delete c.enter,delete c.exit,delete c.timeout,delete c.addEndListener,delete c.onEnter,delete c.onEntering,delete c.onEntered,delete c.onExit,delete c.onExiting,delete c.onExited,typeof a=="function")return a(i,c);var h=dH.default.Children.only(a);return dH.default.cloneElement(h,c)},e}(dH.default.Component);zc.contextTypes={transitionGroup:LWt.object};zc.childContextTypes={transitionGroup:function(){}};zc.propTypes={};function W_(){}zc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:W_,onEntering:W_,onEntered:W_,onExit:W_,onExiting:W_,onExited:W_};zc.UNMOUNTED=0;zc.EXITED=1;zc.ENTERING=2;zc.ENTERED=3;zc.EXITING=4;var FWt=(0,NWt.polyfill)(zc);Ls.default=FWt});var QS=A((pL,ILe)=>{"use strict";pL.__esModule=!0;pL.default=zWt;function zWt(r){return r&&r.ownerDocument||document}ILe.exports=pL.default});var vH=A((dL,TLe)=>{"use strict";var BWt=Ta();dL.__esModule=!0;dL.default=VWt;var UWt=BWt(QS());function VWt(r){r===void 0&&(r=(0,UWt.default)());try{return r.activeElement}catch(e){}}TLe.exports=dL.default});var tE=A((eE,CLe)=>{"use strict";var GWt=Ta();eE.__esModule=!0;eE.default=void 0;var $Wt=GWt(jc()),HWt=function(){return $Wt.default?function(r,e){return r.contains?r.contains(e):r.compareDocumentPosition?r===e||!!(r.compareDocumentPosition(e)&16):ALe(r,e)}:ALe}();eE.default=HWt;function ALe(r,e){if(e)do if(e===r)return!0;while(e=e.parentNode);return!1}CLe.exports=eE.default});var yH=A((_v,PLe)=>{function MLe(r){if(r&&typeof r=="object"){var e=r.which||r.keyCode||r.charCode;e&&(r=e)}if(typeof r=="number")return RLe[r];var t=String(r),n=nh[t.toLowerCase()];if(n)return n;var n=mL[t.toLowerCase()];if(n)return n;if(t.length===1)return t.charCodeAt(0)}MLe.isEventKey=function(e,t){if(e&&typeof e=="object"){var n=e.which||e.keyCode||e.charCode;if(n==null)return!1;if(typeof t=="string"){var i=nh[t.toLowerCase()];if(i)return i===n;var i=mL[t.toLowerCase()];if(i)return i===n}else if(typeof t=="number")return t===n;return!1}};_v=PLe.exports=MLe;var nh=_v.code=_v.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},mL=_v.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(Li=97;Li<123;Li++)nh[String.fromCharCode(Li)]=Li-32;for(Li=48;Li<58;Li++)nh[Li-48]=Li;var Li;for(Li=1;Li<13;Li++)nh["f"+Li]=Li+111;for(Li=0;Li<10;Li++)nh["numpad "+Li]=Li+96;var RLe=_v.names=_v.title={};for(Li in nh)RLe[nh[Li]]=Li;for(gH in mL)nh[gH]=mL[gH];var gH});var LLe=A((vL,OLe)=>{"use strict";Object.defineProperty(vL,"__esModule",{value:!0});vL.default=WWt;function WWt(r){return function(t,n,i,o,a){var c=i||"<<anonymous>>",h=a||n;if(t[n]==null)return new Error("The "+o+" `"+h+"` is required to make "+("`"+c+"` accessible for users of assistive ")+"technologies such as screen readers.");for(var d=arguments.length,v=Array(d>5?d-5:0),x=5;x<d;x++)v[x-5]=arguments[x];return r.apply(void 0,[t,n,i,o,a].concat(v))}}OLe.exports=vL.default});var NLe=A((KMr,DLe)=>{var ZWt=PO(),YWt=RO();DLe.exports=function(r){return function(e,t){var n=String(YWt(e)),i=ZWt(t),o=n.length,a,c;return i<0||i>=o?r?"":void 0:(a=n.charCodeAt(i),a<55296||a>56319||i+1===o||(c=n.charCodeAt(i+1))<56320||c>57343?r?n.charAt(i):a:r?n.slice(i,i+2):(a-55296<<10)+(c-56320)+65536)}}});var qLe=A((XMr,kLe)=>{kLe.exports=zS()});var gL=A((JMr,jLe)=>{jLe.exports={}});var fd=A((QMr,zLe)=>{var _H=C6()("wks"),KWt=M6(),xH=j_().Symbol,FLe=typeof xH=="function",XWt=zLe.exports=function(r){return _H[r]||(_H[r]=FLe&&xH[r]||(FLe?xH:KWt)("Symbol."+r))};XWt.store=_H});var wH=A((eRr,ULe)=>{var JWt=jS().f,QWt=z_(),BLe=fd()("toStringTag");ULe.exports=function(r,e,t){r&&!QWt(r=t?r:r.prototype,BLe)&&JWt(r,BLe,{configurable:!0,value:e})}});var $Le=A((tRr,GLe)=>{"use strict";var e8t=N6(),t8t=FS(),r8t=wH(),VLe={};zS()(VLe,fd()("iterator"),function(){return this});GLe.exports=function(r,e,t){r.prototype=e8t(VLe,{next:t8t(1,t)}),r8t(r,e+" Iterator")}});var ZLe=A((rRr,WLe)=>{var n8t=z_(),i8t=VS(),HLe=OO()("IE_PROTO"),o8t=Object.prototype;WLe.exports=Object.getPrototypeOf||function(r){return r=i8t(r),n8t(r,HLe)?r[HLe]:typeof r.constructor=="function"&&r instanceof r.constructor?r.constructor.prototype:r instanceof Object?o8t:null}});var tDe=A((nRr,eDe)=>{"use strict";var YLe=A6(),bH=eh(),a8t=qLe(),KLe=zS(),XLe=gL(),s8t=$Le(),l8t=wH(),u8t=ZLe(),rE=fd()("iterator"),SH=!([].keys&&"next"in[].keys()),c8t="@@iterator",JLe="keys",yL="values",QLe=function(){return this};eDe.exports=function(r,e,t,n,i,o,a){s8t(t,e,n);var c=function(B){if(!SH&&B in x)return x[B];switch(B){case JLe:return function(){return new t(this,B)};case yL:return function(){return new t(this,B)};}return function(){return new t(this,B)}},h=e+" Iterator",d=i==yL,v=!1,x=r.prototype,S=x[rE]||x[c8t]||i&&x[i],T=S||c(i),L=i?d?c("entries"):T:void 0,k=e=="Array"&&x.entries||S,R,D,j;if(k&&(j=u8t(k.call(new r)),j!==Object.prototype&&j.next&&(l8t(j,h,!0),!YLe&&typeof j[rE]!="function"&&KLe(j,rE,QLe))),d&&S&&S.name!==yL&&(v=!0,T=function(){return S.call(this)}),(!YLe||a)&&(SH||v||!x[rE])&&KLe(x,rE,T),XLe[e]=T,XLe[h]=QLe,i)if(R={values:d?T:c(yL),keys:o?T:c(JLe),entries:L},a)for(D in R)D in x||a8t(x,D,R[D]);else bH(bH.P+bH.F*(SH||v),e,R);return R}});var rDe=A(()=>{"use strict";var f8t=NLe()(!0);tDe()(String,"String",function(r){this._t=String(r),this._i=0},function(){var r=this._t,e=this._i,t;return e>=r.length?{value:void 0,done:!0}:(t=f8t(r,e),this._i+=t.length,{value:t,done:!1})})});var oDe=A((aRr,iDe)=>{var nDe=F_();iDe.exports=function(r,e,t,n){try{return n?e(nDe(t)[0],t[1]):e(t)}catch(o){var i=r.return;throw i!==void 0&&nDe(i.call(r)),o}}});var sDe=A((sRr,aDe)=>{var h8t=gL(),p8t=fd()("iterator"),d8t=Array.prototype;aDe.exports=function(r){return r!==void 0&&(h8t.Array===r||d8t[p8t]===r)}});var uDe=A((lRr,lDe)=>{"use strict";var m8t=jS(),v8t=FS();lDe.exports=function(r,e,t){e in r?m8t.f(r,e,v8t(0,t)):r[e]=t}});var fDe=A((uRr,cDe)=>{var EH=E6(),g8t=fd()("toStringTag"),y8t=EH(function(){return arguments}())=="Arguments",_8t=function(r,e){try{return r[e]}catch(t){}};cDe.exports=function(r){var e,t,n;return r===void 0?"Undefined":r===null?"Null":typeof(t=_8t(e=Object(r),g8t))=="string"?t:y8t?EH(e):(n=EH(e))=="Object"&&typeof e.callee=="function"?"Arguments":n}});var pDe=A((cRr,hDe)=>{var x8t=fDe(),w8t=fd()("iterator"),b8t=gL();hDe.exports=tu().getIteratorMethod=function(r){if(r!=null)return r[w8t]||r["@@iterator"]||b8t[x8t(r)]}});var vDe=A((fRr,mDe)=>{var TH=fd()("iterator"),dDe=!1;try{IH=[7][TH](),IH.return=function(){dDe=!0},Array.from(IH,function(){throw 2})}catch(r){}var IH;mDe.exports=function(r,e){if(!e&&!dDe)return!1;var t=!1;try{var n=[7],i=n[TH]();i.next=function(){return{done:t=!0}},n[TH]=function(){return i},r(n)}catch(o){}return t}});var yDe=A(()=>{"use strict";var S8t=TO(),AH=eh(),E8t=VS(),I8t=oDe(),T8t=sDe(),A8t=T6(),gDe=uDe(),C8t=pDe();AH(AH.S+AH.F*!vDe()(function(r){Array.from(r)}),"Array",{from:function(e){var t=E8t(e),n=typeof this=="function"?this:Array,i=arguments.length,o=i>1?arguments[1]:void 0,a=o!==void 0,c=0,h=C8t(t),d,v,x,S;if(a&&(o=S8t(o,i>2?arguments[2]:void 0,2)),h!=null&&!(n==Array&&T8t(h)))for(S=h.call(t),v=new n;!(x=S.next()).done;c++)gDe(v,c,a?I8t(S,o,[x.value,c],!0):x.value);else for(d=A8t(t.length),v=new n(d);d>c;c++)gDe(v,c,a?o(t[c],c):t[c]);return v.length=c,v}})});var xDe=A((dRr,_De)=>{rDe();yDe();_De.exports=tu().Array.from});var bDe=A((mRr,wDe)=>{wDe.exports=xDe()});var _L=A((nE,EDe)=>{"use strict";var M8t=Ta();nE.__esModule=!0;nE.default=void 0;var R8t=M8t(jc()),SDe=function(){};R8t.default&&(SDe=function(){if(document.addEventListener)return function(r,e,t,n){return r.addEventListener(e,t,n||!1)};if(document.attachEvent)return function(r,e,t){return r.attachEvent("on"+e,function(n){n=n||window.event,n.target=n.target||n.srcElement,n.currentTarget=r,t.call(r,n)})}}());var P8t=SDe;nE.default=P8t;EDe.exports=nE.default});var xL=A((iE,TDe)=>{"use strict";var O8t=Ta();iE.__esModule=!0;iE.default=void 0;var L8t=O8t(jc()),IDe=function(){};L8t.default&&(IDe=function(){if(document.addEventListener)return function(r,e,t,n){return r.removeEventListener(e,t,n||!1)};if(document.attachEvent)return function(r,e,t){return r.detachEvent("on"+e,t)}}());var D8t=IDe;iE.default=D8t;TDe.exports=iE.default});var CH=A((wL,CDe)=>{"use strict";wL.__esModule=!0;wL.default=function(r,e,t,n){return(0,k8t.default)(r,e,t,n),{remove:function(){(0,j8t.default)(r,e,t,n)}}};var N8t=_L(),k8t=ADe(N8t),q8t=xL(),j8t=ADe(q8t);function ADe(r){return r&&r.__esModule?r:{default:r}}CDe.exports=wL.default});var oE=A((bL,RDe)=>{"use strict";bL.__esModule=!0;bL.default=function(r){return(0,U8t.default)(z8t.default.findDOMNode(r))};var F8t=vo(),z8t=MDe(F8t),B8t=QS(),U8t=MDe(B8t);function MDe(r){return r&&r.__esModule?r:{default:r}}RDe.exports=bL.default});var ODe=A((IL,PDe)=>{"use strict";IL.__esModule=!0;var V8t=tE(),G8t=Y_(V8t),$8t=Jr(),SL=Y_($8t),H8t=dt(),W8t=Y_(H8t),Z8t=vo(),Y8t=Y_(Z8t),K8t=CH(),MH=Y_(K8t),X8t=oE(),J8t=Y_(X8t);function Y_(r){return r&&r.__esModule?r:{default:r}}function Q8t(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function eZt(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function tZt(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var rZt=27;function nZt(r){return r.button===0}function iZt(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}var EL=function(r){tZt(e,r);function e(t,n){Q8t(this,e);var i=eZt(this,r.call(this,t,n));return i.addEventListeners=function(){i.currentEvent=window.event;var o=i.props.event,a=(0,J8t.default)(i);i.documentMouseCaptureListener=(0,MH.default)(a,o,i.handleMouseCapture,!0),i.documentMouseListener=(0,MH.default)(a,o,i.handleMouse),i.documentKeyupListener=(0,MH.default)(a,"keyup",i.handleKeyUp)},i.removeEventListeners=function(){i.documentMouseCaptureListener&&i.documentMouseCaptureListener.remove(),i.documentMouseListener&&i.documentMouseListener.remove(),i.documentKeyupListener&&i.documentKeyupListener.remove()},i.handleMouseCapture=function(o){i.preventMouseRootClose=iZt(o)||!nZt(o)||(0,G8t.default)(Y8t.default.findDOMNode(i),o.target)},i.handleMouse=function(o){if(o===i.currentEvent){i.currentEvent=void 0;return}!i.preventMouseRootClose&&i.props.onRootClose&&i.props.onRootClose(o)},i.handleKeyUp=function(o){if(o===i.currentEvent){i.currentEvent=void 0;return}o.keyCode===rZt&&i.props.onRootClose&&i.props.onRootClose(o)},i.preventMouseRootClose=!1,i}return e.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},e.prototype.componentDidUpdate=function(n){!this.props.disabled&&n.disabled?this.addEventListeners():this.props.disabled&&!n.disabled&&this.removeEventListeners()},e.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},e.prototype.render=function(){return this.props.children},e}(W8t.default.Component);EL.displayName="RootCloseWrapper";EL.propTypes={onRootClose:SL.default.func,children:SL.default.element,disabled:SL.default.bool,event:SL.default.oneOf(["click","mousedown"])};EL.defaultProps={event:"click"};IL.default=EL;PDe.exports=IL.default});var YDe=A((OL,ZDe)=>{"use strict";OL.__esModule=!0;OL.default=gZt;var vZt=/^[\w-]*$/,UH=Function.prototype.bind.call(Function.prototype.call,[].slice);function gZt(r,e){var t=e[0]==="#",n=e[0]===".",i=t||n?e.slice(1):e,o=vZt.test(i),a;return o?t?(r=r.getElementById?r:document,(a=r.getElementById(i))?[a]:[]):r.getElementsByClassName&&n?UH(r.getElementsByClassName(i)):UH(r.getElementsByTagName(e)):UH(r.querySelectorAll(e))}ZDe.exports=OL.default});var JDe=A((LL,XDe)=>{"use strict";var KDe=Ta();LL.__esModule=!0;LL.default=xZt;var yZt=KDe(tE()),_Zt=KDe(YDe());function xZt(r,e){return function(n){var i=n.currentTarget,o=n.target,a=(0,_Zt.default)(i,r);a.some(function(c){return(0,yZt.default)(c,o)})&&e.call(this,n)}}XDe.exports=LL.default});var tNe=A((cE,eNe)=>{"use strict";var VH=Ta();cE.__esModule=!0;cE.default=void 0;var wZt=VH(jc()),bZt=VH(_L()),SZt=VH(xL()),QDe=function(){};wZt.default&&(QDe=function(e,t,n,i){return(0,bZt.default)(e,t,n,i),function(){(0,SZt.default)(e,t,n,i)}});var EZt=QDe;cE.default=EZt;eNe.exports=cE.default});var aNe=A(hd=>{"use strict";var DL=Ta();hd.__esModule=!0;hd.default=void 0;var rNe=DL(_L());hd.on=rNe.default;var nNe=DL(xL());hd.off=nNe.default;var iNe=DL(JDe());hd.filter=iNe.default;var oNe=DL(tNe());hd.listen=oNe.default;var IZt={on:rNe.default,off:nNe.default,filter:iNe.default,listen:oNe.default};hd.default=IZt});var GH=A((kL,sNe)=>{"use strict";var TZt=Ta();kL.__esModule=!0;kL.default=CZt;var AZt=TZt(jc()),NL;function CZt(r){if((!NL&&NL!==0||r)&&AZt.default){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),NL=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return NL}sNe.exports=kL.default});var jL=A((qL,uNe)=>{"use strict";Object.defineProperty(qL,"__esModule",{value:!0});var MZt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},RZt=dt(),PZt=lNe(RZt),OZt=WS(),LZt=lNe(OZt);function lNe(r){return r&&r.__esModule?r:{default:r}}function DZt(r,e,t,n,i){var o=r[e],a=typeof o=="undefined"?"undefined":MZt(o);return PZt.default.isValidElement(o)?new Error("Invalid "+n+" `"+i+"` of type ReactElement "+("supplied to `"+t+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(a!=="object"||typeof o.render!="function")&&o.nodeType!==1?new Error("Invalid "+n+" `"+i+"` of value `"+o+"` "+("supplied to `"+t+"`, expected a ReactComponent or a ")+"DOMElement."):null}qL.default=(0,LZt.default)(DZt);uNe.exports=qL.default});var pNe=A((aPr,hNe)=>{"use strict";var NZt=!1,fNe=function(){};NZt&&(cNe=function(e,t){var n=arguments.length;t=new Array(n>1?n-1:0);for(var i=1;i<n;i++)t[i-1]=arguments[i];var o=0,a="Warning: "+e.replace(/%s/g,function(){return t[o++]});typeof console!="undefined"&&console.error(a);try{throw new Error(a)}catch(c){}},fNe=function(r,e,t){var n=arguments.length;t=new Array(n>2?n-2:0);for(var i=2;i<n;i++)t[i-2]=arguments[i];if(e===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");r||cNe.apply(null,[e].concat(t))});var cNe;hNe.exports=fNe});var vNe=A((FL,mNe)=>{"use strict";Object.defineProperty(FL,"__esModule",{value:!0});FL.default=dNe;var kZt=pNe(),qZt=jZt(kZt);function jZt(r){return r&&r.__esModule?r:{default:r}}var $H={};function dNe(r,e){return function(n,i,o,a,c){var h=o||"<<anonymous>>",d=c||i;if(n[i]!=null){var v=o+"."+i;(0,qZt.default)($H[v],"The "+a+" `"+d+"` of "+("`"+h+"` is deprecated. "+e+".")),$H[v]=!0}for(var x=arguments.length,S=Array(x>5?x-5:0),T=5;T<x;T++)S[T-5]=arguments[T];return r.apply(void 0,[n,i,o,a,c].concat(S))}}function FZt(){$H={}}dNe._resetWarned=FZt;mNe.exports=FL.default});var HH=A((zL,gNe)=>{"use strict";zL.__esModule=!0;zL.default=zZt;function zZt(r,e){return r.classList?!!e&&r.classList.contains(e):(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+e+" ")!==-1}gNe.exports=zL.default});var _Ne=A((BL,yNe)=>{"use strict";var BZt=Ta();BL.__esModule=!0;BL.default=VZt;var UZt=BZt(HH());function VZt(r,e){r.classList?r.classList.add(e):(0,UZt.default)(r,e)||(typeof r.className=="string"?r.className=r.className+" "+e:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+e))}yNe.exports=BL.default});var bNe=A((sPr,wNe)=>{"use strict";function xNe(r,e){return r.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}wNe.exports=function(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=xNe(e.className,t):e.setAttribute("class",xNe(e.className&&e.className.baseVal||"",t))}});var TNe=A(xv=>{"use strict";var WH=Ta();xv.__esModule=!0;xv.default=void 0;var SNe=WH(_Ne());xv.addClass=SNe.default;var ENe=WH(bNe());xv.removeClass=ENe.default;var INe=WH(HH());xv.hasClass=INe.default;var GZt={addClass:SNe.default,removeClass:ENe.default,hasClass:INe.default};xv.default=GZt});var CNe=A((UL,ANe)=>{"use strict";UL.__esModule=!0;UL.default=$Zt;function $Zt(r){return r===r.window?r:r.nodeType===9?r.defaultView||r.parentWindow:!1}ANe.exports=UL.default});var ZH=A((VL,PNe)=>{"use strict";VL.__esModule=!0;VL.default=XZt;var HZt=CNe(),MNe=RNe(HZt),WZt=QS(),ZZt=RNe(WZt);function RNe(r){return r&&r.__esModule?r:{default:r}}function YZt(r){return r&&r.tagName.toLowerCase()==="body"}function KZt(r){var e=(0,ZZt.default)(r),t=(0,MNe.default)(e),n=t.innerWidth;if(!n){var i=e.documentElement.getBoundingClientRect();n=i.right-Math.abs(i.left)}return e.body.clientWidth<n}function XZt(r){var e=(0,MNe.default)(r);return e||YZt(r)?KZt(r):r.scrollHeight>r.clientHeight}PNe.exports=VL.default});var LNe=A(fE=>{"use strict";fE.__esModule=!0;fE.ariaHidden=YH;fE.hideSiblings=eYt;fE.showSiblings=tYt;var JZt=["template","script","style"],QZt=function(e){var t=e.nodeType,n=e.tagName;return t===1&&JZt.indexOf(n.toLowerCase())===-1},ONe=function(e,t,n){t=[].concat(t),[].forEach.call(e.children,function(i){t.indexOf(i)===-1&&QZt(i)&&n(i)})};function YH(r,e){e&&(r?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden"))}function eYt(r,e){ONe(r,e,function(t){return YH(!0,t)})}function tYt(r,e){ONe(r,e,function(t){return YH(!1,t)})}});var qNe=A(($L,kNe)=>{"use strict";$L.__esModule=!0;var rYt=TNe(),DNe=GL(rYt),nYt=wLe(),NNe=GL(nYt),iYt=GH(),oYt=GL(iYt),aYt=ZH(),sYt=GL(aYt),KH=LNe();function GL(r){return r&&r.__esModule?r:{default:r}}function lYt(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function uYt(r,e){var t=-1;return r.some(function(n,i){if(e(n,i))return t=i,!0}),t}function cYt(r,e){return uYt(r,function(t){return t.modals.indexOf(e)!==-1})}function fYt(r,e){var t={overflow:"hidden"};r.style={overflow:e.style.overflow,paddingRight:e.style.paddingRight},r.overflowing&&(t.paddingRight=parseInt((0,NNe.default)(e,"paddingRight")||0,10)+(0,oYt.default)()+"px"),(0,NNe.default)(e,t)}function hYt(r,e){var t=r.style;Object.keys(t).forEach(function(n){return e.style[n]=t[n]})}var pYt=function r(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.hideSiblingNodes,i=n===void 0?!0:n,o=t.handleContainerOverflow,a=o===void 0?!0:o;lYt(this,r),this.add=function(c,h,d){var v=e.modals.indexOf(c),x=e.containers.indexOf(h);if(v!==-1)return v;if(v=e.modals.length,e.modals.push(c),e.hideSiblingNodes&&(0,KH.hideSiblings)(h,c.modalNode),x!==-1)return e.data[x].modals.push(c),v;var S={modals:[c],classes:d?d.split(/\s+/):[],overflowing:(0,sYt.default)(h)};return e.handleContainerOverflow&&fYt(S,h),S.classes.forEach(DNe.default.addClass.bind(null,h)),e.containers.push(h),e.data.push(S),v},this.remove=function(c){var h=e.modals.indexOf(c);if(h!==-1){var d=cYt(e.data,c),v=e.data[d],x=e.containers[d];v.modals.splice(v.modals.indexOf(c),1),e.modals.splice(h,1),v.modals.length===0?(v.classes.forEach(DNe.default.removeClass.bind(null,x)),e.handleContainerOverflow&&hYt(v,x),e.hideSiblingNodes&&(0,KH.showSiblings)(x,c.modalNode),e.containers.splice(d,1),e.data.splice(d,1)):e.hideSiblingNodes&&(0,KH.ariaHidden)(!1,v.modals[v.modals.length-1].modalNode)}},this.isTopModal=function(c){return!!e.modals.length&&e.modals[e.modals.length-1]===c},this.hideSiblingNodes=i,this.handleContainerOverflow=a,this.modals=[],this.containers=[],this.data=[]};$L.default=pYt;kNe.exports=$L.default});var WL=A((HL,jNe)=>{"use strict";HL.__esModule=!0;HL.default=gYt;var dYt=vo(),mYt=vYt(dYt);function vYt(r){return r&&r.__esModule?r:{default:r}}function gYt(r,e){return r=typeof r=="function"?r():r,mYt.default.findDOMNode(r)||e}jNe.exports=HL.default});var $Ne=A((ZL,GNe)=>{"use strict";ZL.__esModule=!0;var yYt=Jr(),XH=Q_(yYt),_Yt=jL(),xYt=Q_(_Yt),wYt=dt(),FNe=Q_(wYt),bYt=vo(),zNe=Q_(bYt),SYt=WL(),BNe=Q_(SYt),EYt=oE(),UNe=Q_(EYt);function Q_(r){return r&&r.__esModule?r:{default:r}}function IYt(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function VNe(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function TYt(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var JH=function(r){TYt(e,r);function e(){var t,n,i;IYt(this,e);for(var o=arguments.length,a=Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=(t=(n=VNe(this,r.call.apply(r,[this].concat(a))),n),n._mountOverlayTarget=function(){n._overlayTarget||(n._overlayTarget=document.createElement("div"),n._portalContainerNode=(0,BNe.default)(n.props.container,(0,UNe.default)(n).body),n._portalContainerNode.appendChild(n._overlayTarget))},n._unmountOverlayTarget=function(){n._overlayTarget&&(n._portalContainerNode.removeChild(n._overlayTarget),n._overlayTarget=null),n._portalContainerNode=null},n._renderOverlay=function(){var h=n.props.children?FNe.default.Children.only(n.props.children):null;if(h!==null){n._mountOverlayTarget();var d=!n._overlayInstance;n._overlayInstance=zNe.default.unstable_renderSubtreeIntoContainer(n,h,n._overlayTarget,function(){d&&n.props.onRendered&&n.props.onRendered()})}else n._unrenderOverlay(),n._unmountOverlayTarget()},n._unrenderOverlay=function(){n._overlayTarget&&(zNe.default.unmountComponentAtNode(n._overlayTarget),n._overlayInstance=null)},n.getMountNode=function(){return n._overlayTarget},t),VNe(n,i)}return e.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},e.prototype.componentDidUpdate=function(){this._renderOverlay()},e.prototype.UNSAFE_componentWillReceiveProps=function(n){this._overlayTarget&&n.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,BNe.default)(n.container,(0,UNe.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},e.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},e.prototype.render=function(){return null},e}(FNe.default.Component);JH.displayName="Portal";JH.propTypes={container:XH.default.oneOfType([xYt.default,XH.default.func]),onRendered:XH.default.func};ZL.default=JH;GNe.exports=ZL.default});var ZNe=A((YL,WNe)=>{"use strict";YL.__esModule=!0;var AYt=jc(),CYt=pd(AYt),MYt=Jr(),QH=pd(MYt),RYt=jL(),PYt=pd(RYt),OYt=dt(),LYt=pd(OYt),DYt=vo(),eW=pd(DYt),NYt=WL(),kYt=pd(NYt),qYt=oE(),jYt=pd(qYt),FYt=$Ne(),zYt=pd(FYt);function pd(r){return r&&r.__esModule?r:{default:r}}function BYt(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function HNe(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function UYt(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var tW=function(r){UYt(e,r);function e(){var t,n,i;BYt(this,e);for(var o=arguments.length,a=Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=(t=(n=HNe(this,r.call.apply(r,[this].concat(a))),n),n.getMountNode=function(){return n._portalContainerNode},t),HNe(n,i)}return e.prototype.UNSAFE_componentWillMount=function(){if(CYt.default){var n=this.props.container;typeof n=="function"&&(n=n()),!(n&&!eW.default.findDOMNode(n))&&this.setContainer(n)}},e.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},e.prototype.UNSAFE_componentWillReceiveProps=function(n){n.container!==this.props.container&&this.setContainer(n.container)},e.prototype.componentWillUnmount=function(){this._portalContainerNode=null},e.prototype.setContainer=function(n){this._portalContainerNode=(0,kYt.default)(n,(0,jYt.default)(this).body)},e.prototype.render=function(){return this.props.children&&this._portalContainerNode?eW.default.createPortal(this.props.children,this._portalContainerNode):null},e}(LYt.default.Component);tW.displayName="Portal";tW.propTypes={container:QH.default.oneOfType([PYt.default,QH.default.func]),onRendered:QH.default.func};YL.default=eW.default.createPortal?tW:zYt.default;WNe.exports=YL.default});var JNe=A((KL,XNe)=>{"use strict";KL.__esModule=!0;var VYt=Jr(),GYt=YNe(VYt),$Yt=dt(),HYt=YNe($Yt);function YNe(r){return r&&r.__esModule?r:{default:r}}function WYt(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ZYt(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function YYt(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var KYt={children:GYt.default.node},KNe=function(r){YYt(e,r);function e(){return WYt(this,e),ZYt(this,r.apply(this,arguments))}return e.prototype.render=function(){return this.props.children},e}(HYt.default.Component);KNe.propTypes=KYt;KL.default=KNe;XNe.exports=KL.default});var e2e=A((XL,QNe)=>{"use strict";XL.__esModule=!0;XL.default=XYt;function XYt(r){var e=!document.addEventListener,t=void 0;return e?(document.attachEvent("onfocusin",r),t=function(){return document.detachEvent("onfocusin",r)}):(document.addEventListener("focus",r,!0),t=function(){return document.removeEventListener("focus",r,!0)}),{remove:t}}QNe.exports=XL.default});var c2e=A((QL,u2e)=>{"use strict";QL.__esModule=!0;var i2e=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},JYt=vH(),rW=Qo(JYt),QYt=tE(),o2e=Qo(QYt),eKt=jc(),tKt=Qo(eKt),rKt=Jr(),ni=Qo(rKt),nKt=jL(),iKt=Qo(nKt),oKt=vNe(),aKt=Qo(oKt),sKt=th(),t2e=Qo(sKt),a2e=dt(),dd=Qo(a2e),lKt=vo(),uKt=Qo(lKt),cKt=aH(),fKt=Qo(cKt),hKt=qNe(),s2e=Qo(hKt),pKt=ZNe(),l2e=Qo(pKt),dKt=JNe(),mKt=Qo(dKt),vKt=CH(),r2e=Qo(vKt),gKt=e2e(),yKt=Qo(gKt),_Kt=WL(),xKt=Qo(_Kt),wKt=oE(),nW=Qo(wKt);function Qo(r){return r&&r.__esModule?r:{default:r}}function bKt(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function n2e(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function SKt(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var EKt=new s2e.default,JL=function(r){SKt(e,r);function e(){var t,n,i;bKt(this,e);for(var o=arguments.length,a=Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=(t=(n=n2e(this,r.call.apply(r,[this].concat(a))),n),IKt.call(n),t),n2e(n,i)}return e.prototype.omitProps=function(n,i){var o=Object.keys(n),a={};return o.map(function(c){Object.prototype.hasOwnProperty.call(i,c)||(a[c]=n[c])}),a},e.prototype.render=function(){var n=this.props,i=n.show,o=n.container,a=n.children,c=n.transition,h=n.backdrop,d=n.className,v=n.style,x=n.onExit,S=n.onExiting,T=n.onEnter,L=n.onEntering,k=n.onEntered,R=dd.default.Children.only(a),D=this.omitProps(this.props,e.propTypes),j=i||c&&!this.state.exited;if(!j)return null;var B=R.props,$=B.role,ee=B.tabIndex;return($===void 0||ee===void 0)&&(R=(0,a2e.cloneElement)(R,{role:$===void 0?"document":$,tabIndex:ee==null?"-1":ee})),c&&(R=dd.default.createElement(c,{appear:!0,unmountOnExit:!0,in:i,onExit:x,onExiting:S,onExited:this.handleHidden,onEnter:T,onEntering:L,onEntered:k},R)),dd.default.createElement(l2e.default,{ref:this.setMountNode,container:o,onRendered:this.onPortalRendered},dd.default.createElement("div",i2e({ref:this.setModalNodeRef,role:$||"dialog"},D,{style:v,className:d}),h&&this.renderBackdrop(),dd.default.createElement(mKt.default,{ref:this.setDialogRef},R)))},e.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},e.prototype.UNSAFE_componentWillUpdate=function(n){!this.props.show&&n.show&&this.checkForFocus()},e.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},e.prototype.componentDidUpdate=function(n){var i=this.props.transition;n.show&&!this.props.show&&!i?this.onHide():!n.show&&this.props.show&&this.onShow()},e.prototype.componentWillUnmount=function(){var n=this.props,i=n.show,o=n.transition;this._isMounted=!1,(i||o&&!this.state.exited)&&this.onHide()},e.prototype.autoFocus=function(){if(this.props.autoFocus){var n=this.getDialogElement(),i=(0,rW.default)((0,nW.default)(this));n&&!(0,o2e.default)(n,i)&&(this.lastFocus=i,n.hasAttribute("tabIndex")||((0,fKt.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),n.setAttribute("tabIndex",-1)),n.focus())}},e.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},e.prototype.getDialogElement=function(){return uKt.default.findDOMNode(this.dialog)},e.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},e}(dd.default.Component);JL.propTypes=i2e({},l2e.default.propTypes,{show:ni.default.bool,container:ni.default.oneOfType([iKt.default,ni.default.func]),onShow:ni.default.func,onHide:ni.default.func,backdrop:ni.default.oneOfType([ni.default.bool,ni.default.oneOf(["static"])]),renderBackdrop:ni.default.func,onEscapeKeyDown:ni.default.func,onEscapeKeyUp:(0,aKt.default)(ni.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:ni.default.func,backdropStyle:ni.default.object,backdropClassName:ni.default.string,containerClassName:ni.default.string,keyboard:ni.default.bool,transition:t2e.default,backdropTransition:t2e.default,autoFocus:ni.default.bool,enforceFocus:ni.default.bool,restoreFocus:ni.default.bool,onEnter:ni.default.func,onEntering:ni.default.func,onEntered:ni.default.func,onExit:ni.default.func,onExiting:ni.default.func,onExited:ni.default.func,manager:ni.default.object.isRequired});JL.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:EKt,renderBackdrop:function(e){return dd.default.createElement("div",e)}};var IKt=function(){var e=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var t=e.props,n=t.backdropStyle,i=t.backdropClassName,o=t.renderBackdrop,a=t.backdropTransition,c=function(v){return e.backdrop=v},h=o({ref:c,style:n,className:i,onClick:e.handleBackdropClick});return a&&(h=dd.default.createElement(a,{appear:!0,in:e.props.show},h)),h},this.onPortalRendered=function(){e.autoFocus(),e.props.onShow&&e.props.onShow()},this.onShow=function(){var t=(0,nW.default)(e),n=(0,xKt.default)(e.props.container,t.body);e.props.manager.add(e,n,e.props.containerClassName),e._onDocumentKeydownListener=(0,r2e.default)(t,"keydown",e.handleDocumentKeyDown),e._onDocumentKeyupListener=(0,r2e.default)(t,"keyup",e.handleDocumentKeyUp),e._onFocusinListener=(0,yKt.default)(e.enforceFocus)},this.onHide=function(){e.props.manager.remove(e),e._onDocumentKeydownListener.remove(),e._onDocumentKeyupListener.remove(),e._onFocusinListener.remove(),e.props.restoreFocus&&e.restoreLastFocus()},this.setMountNode=function(t){e.mountNode=t&&t.getMountNode()},this.setModalNodeRef=function(t){e.modalNode=t},this.setDialogRef=function(t){e.dialog=t},this.handleHidden=function(){if(e.setState({exited:!0}),e.onHide(),e.props.onExited){var t;(t=e.props).onExited.apply(t,arguments)}},this.handleBackdropClick=function(t){t.target===t.currentTarget&&(e.props.onBackdropClick&&e.props.onBackdropClick(t),e.props.backdrop===!0&&e.props.onHide())},this.handleDocumentKeyDown=function(t){e.props.keyboard&&t.keyCode===27&&e.isTopModal()&&(e.props.onEscapeKeyDown&&e.props.onEscapeKeyDown(t),e.props.onHide())},this.handleDocumentKeyUp=function(t){e.props.keyboard&&t.keyCode===27&&e.isTopModal()&&e.props.onEscapeKeyUp&&e.props.onEscapeKeyUp(t)},this.checkForFocus=function(){tKt.default&&(e.lastFocus=(0,rW.default)())},this.enforceFocus=function(){if(!(!e.props.enforceFocus||!e._isMounted||!e.isTopModal())){var t=e.getDialogElement(),n=(0,rW.default)((0,nW.default)(e));t&&!(0,o2e.default)(t,n)&&t.focus()}}};JL.Manager=s2e.default;QL.default=JL;u2e.exports=QL.default});var $W=A((VW,GW)=>{(function(r,e){typeof VW=="object"&&typeof GW!="undefined"?GW.exports=e():typeof define=="function"&&define.amd?define(e):(r=r||self).RBush=e()})(VW,function(){"use strict";function r(R,D,j,B,$){(function ee(J,ie,ue,le,_e){for(;le>ue;){if(le-ue>600){var Re=le-ue+1,ze=ie-ue+1,ke=Math.log(Re),Ve=.5*Math.exp(2*ke/3),We=.5*Math.sqrt(ke*Ve*(Re-Ve)/Re)*(ze-Re/2<0?-1:1),Te=Math.max(ue,Math.floor(ie-ze*Ve/Re+We)),Se=Math.min(le,Math.floor(ie+(Re-ze)*Ve/Re+We));ee(J,ie,Te,Se,_e)}var Ae=J[ie],$e=ue,Ge=le;for(e(J,ue,ie),_e(J[le],Ae)>0&&e(J,ue,le);$e<Ge;){for(e(J,$e,Ge),$e++,Ge--;_e(J[$e],Ae)<0;)$e++;for(;_e(J[Ge],Ae)>0;)Ge--}_e(J[ue],Ae)===0?e(J,ue,Ge):e(J,++Ge,le),Ge<=ie&&(ue=Ge+1),ie<=Ge&&(le=Ge-1)}})(R,D,j||0,B||R.length-1,$||t)}function e(R,D,j){var B=R[D];R[D]=R[j],R[j]=B}function t(R,D){return R<D?-1:R>D?1:0}var n=function(R){R===void 0&&(R=9),this._maxEntries=Math.max(4,R),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(R,D,j){if(!j)return D.indexOf(R);for(var B=0;B<D.length;B++)if(j(R,D[B]))return B;return-1}function o(R,D){a(R,0,R.children.length,D,R)}function a(R,D,j,B,$){$||($=L(null)),$.minX=1/0,$.minY=1/0,$.maxX=-1/0,$.maxY=-1/0;for(var ee=D;ee<j;ee++){var J=R.children[ee];c($,R.leaf?B(J):J)}return $}function c(R,D){return R.minX=Math.min(R.minX,D.minX),R.minY=Math.min(R.minY,D.minY),R.maxX=Math.max(R.maxX,D.maxX),R.maxY=Math.max(R.maxY,D.maxY),R}function h(R,D){return R.minX-D.minX}function d(R,D){return R.minY-D.minY}function v(R){return(R.maxX-R.minX)*(R.maxY-R.minY)}function x(R){return R.maxX-R.minX+(R.maxY-R.minY)}function S(R,D){return R.minX<=D.minX&&R.minY<=D.minY&&D.maxX<=R.maxX&&D.maxY<=R.maxY}function T(R,D){return D.minX<=R.maxX&&D.minY<=R.maxY&&D.maxX>=R.minX&&D.maxY>=R.minY}function L(R){return{children:R,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function k(R,D,j,B,$){for(var ee=[D,j];ee.length;)if(!((j=ee.pop())-(D=ee.pop())<=B)){var J=D+Math.ceil((j-D)/B/2)*B;r(R,J,D,j,$),ee.push(D,J,J,j)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(R){var D=this.data,j=[];if(!T(R,D))return j;for(var B=this.toBBox,$=[];D;){for(var ee=0;ee<D.children.length;ee++){var J=D.children[ee],ie=D.leaf?B(J):J;T(R,ie)&&(D.leaf?j.push(J):S(R,ie)?this._all(J,j):$.push(J))}D=$.pop()}return j},n.prototype.collides=function(R){var D=this.data;if(!T(R,D))return!1;for(var j=[];D;){for(var B=0;B<D.children.length;B++){var $=D.children[B],ee=D.leaf?this.toBBox($):$;if(T(R,ee)){if(D.leaf||S(R,ee))return!0;j.push($)}}D=j.pop()}return!1},n.prototype.load=function(R){if(!R||!R.length)return this;if(R.length<this._minEntries){for(var D=0;D<R.length;D++)this.insert(R[D]);return this}var j=this._build(R.slice(),0,R.length-1,0);if(this.data.children.length){if(this.data.height===j.height)this._splitRoot(this.data,j);else{if(this.data.height<j.height){var B=this.data;this.data=j,j=B}this._insert(j,this.data.height-j.height-1,!0)}}else this.data=j;return this},n.prototype.insert=function(R){return R&&this._insert(R,this.data.height-1),this},n.prototype.clear=function(){return this.data=L([]),this},n.prototype.remove=function(R,D){if(!R)return this;for(var j,B,$,ee=this.data,J=this.toBBox(R),ie=[],ue=[];ee||ie.length;){if(ee||(ee=ie.pop(),B=ie[ie.length-1],j=ue.pop(),$=!0),ee.leaf){var le=i(R,ee.children,D);if(le!==-1)return ee.children.splice(le,1),ie.push(ee),this._condense(ie),this}$||ee.leaf||!S(ee,J)?B?(j++,ee=B.children[j],$=!1):ee=null:(ie.push(ee),ue.push(j),j=0,B=ee,ee=ee.children[0])}return this},n.prototype.toBBox=function(R){return R},n.prototype.compareMinX=function(R,D){return R.minX-D.minX},n.prototype.compareMinY=function(R,D){return R.minY-D.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(R){return this.data=R,this},n.prototype._all=function(R,D){for(var j=[];R;)R.leaf?D.push.apply(D,R.children):j.push.apply(j,R.children),R=j.pop();return D},n.prototype._build=function(R,D,j,B){var $,ee=j-D+1,J=this._maxEntries;if(ee<=J)return o($=L(R.slice(D,j+1)),this.toBBox),$;B||(B=Math.ceil(Math.log(ee)/Math.log(J)),J=Math.ceil(ee/Math.pow(J,B-1))),($=L([])).leaf=!1,$.height=B;var ie=Math.ceil(ee/J),ue=ie*Math.ceil(Math.sqrt(J));k(R,D,j,ue,this.compareMinX);for(var le=D;le<=j;le+=ue){var _e=Math.min(le+ue-1,j);k(R,le,_e,ie,this.compareMinY);for(var Re=le;Re<=_e;Re+=ie){var ze=Math.min(Re+ie-1,_e);$.children.push(this._build(R,Re,ze,B-1))}}return o($,this.toBBox),$},n.prototype._chooseSubtree=function(R,D,j,B){for(;B.push(D),!D.leaf&&B.length-1!==j;){for(var $=1/0,ee=1/0,J=void 0,ie=0;ie<D.children.length;ie++){var ue=D.children[ie],le=v(ue),_e=(Re=R,ze=ue,(Math.max(ze.maxX,Re.maxX)-Math.min(ze.minX,Re.minX))*(Math.max(ze.maxY,Re.maxY)-Math.min(ze.minY,Re.minY))-le);_e<ee?(ee=_e,$=le<$?le:$,J=ue):_e===ee&&le<$&&($=le,J=ue)}D=J||D.children[0]}var Re,ze;return D},n.prototype._insert=function(R,D,j){var B=j?R:this.toBBox(R),$=[],ee=this._chooseSubtree(B,this.data,D,$);for(ee.children.push(R),c(ee,B);D>=0&&$[D].children.length>this._maxEntries;)this._split($,D),D--;this._adjustParentBBoxes(B,$,D)},n.prototype._split=function(R,D){var j=R[D],B=j.children.length,$=this._minEntries;this._chooseSplitAxis(j,$,B);var ee=this._chooseSplitIndex(j,$,B),J=L(j.children.splice(ee,j.children.length-ee));J.height=j.height,J.leaf=j.leaf,o(j,this.toBBox),o(J,this.toBBox),D?R[D-1].children.push(J):this._splitRoot(j,J)},n.prototype._splitRoot=function(R,D){this.data=L([R,D]),this.data.height=R.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(R,D,j){for(var B,$,ee,J,ie,ue,le,_e=1/0,Re=1/0,ze=D;ze<=j-D;ze++){var ke=a(R,0,ze,this.toBBox),Ve=a(R,ze,j,this.toBBox),We=($=ke,ee=Ve,J=void 0,ie=void 0,ue=void 0,le=void 0,J=Math.max($.minX,ee.minX),ie=Math.max($.minY,ee.minY),ue=Math.min($.maxX,ee.maxX),le=Math.min($.maxY,ee.maxY),Math.max(0,ue-J)*Math.max(0,le-ie)),Te=v(ke)+v(Ve);We<_e?(_e=We,B=ze,Re=Te<Re?Te:Re):We===_e&&Te<Re&&(Re=Te,B=ze)}return B||j-D},n.prototype._chooseSplitAxis=function(R,D,j){var B=R.leaf?this.compareMinX:h,$=R.leaf?this.compareMinY:d;this._allDistMargin(R,D,j,B)<this._allDistMargin(R,D,j,$)&&R.children.sort(B)},n.prototype._allDistMargin=function(R,D,j,B){R.children.sort(B);for(var $=this.toBBox,ee=a(R,0,D,$),J=a(R,j-D,j,$),ie=x(ee)+x(J),ue=D;ue<j-D;ue++){var le=R.children[ue];c(ee,R.leaf?$(le):le),ie+=x(ee)}for(var _e=j-D-1;_e>=D;_e--){var Re=R.children[_e];c(J,R.leaf?$(Re):Re),ie+=x(J)}return ie},n.prototype._adjustParentBBoxes=function(R,D,j){for(var B=j;B>=0;B--)c(D[B],R)},n.prototype._condense=function(R){for(var D=R.length-1,j=void 0;D>=0;D--)R[D].children.length===0?D>0?(j=R[D-1].children).splice(j.indexOf(R[D]),1):this.clear():o(R[D],this.toBBox)},n})});var aze=A(Un=>{"use strict";var qo=typeof Symbol=="function"&&Symbol.for,vZ=qo?Symbol.for("react.element"):60103,gZ=qo?Symbol.for("react.portal"):60106,DN=qo?Symbol.for("react.fragment"):60107,NN=qo?Symbol.for("react.strict_mode"):60108,kN=qo?Symbol.for("react.profiler"):60114,qN=qo?Symbol.for("react.provider"):60109,jN=qo?Symbol.for("react.context"):60110,yZ=qo?Symbol.for("react.async_mode"):60111,FN=qo?Symbol.for("react.concurrent_mode"):60111,zN=qo?Symbol.for("react.forward_ref"):60112,BN=qo?Symbol.for("react.suspense"):60113,Ser=qo?Symbol.for("react.suspense_list"):60120,UN=qo?Symbol.for("react.memo"):60115,VN=qo?Symbol.for("react.lazy"):60116,Eer=qo?Symbol.for("react.block"):60121,Ier=qo?Symbol.for("react.fundamental"):60117,Ter=qo?Symbol.for("react.responder"):60118,Aer=qo?Symbol.for("react.scope"):60119;function _l(r){if(typeof r=="object"&&r!==null){var e=r.$$typeof;switch(e){case vZ:switch(r=r.type,r){case yZ:case FN:case DN:case kN:case NN:case BN:return r;default:switch(r=r&&r.$$typeof,r){case jN:case zN:case VN:case UN:case qN:return r;default:return e;}}case gZ:return e;}}}function oze(r){return _l(r)===FN}Un.AsyncMode=yZ;Un.ConcurrentMode=FN;Un.ContextConsumer=jN;Un.ContextProvider=qN;Un.Element=vZ;Un.ForwardRef=zN;Un.Fragment=DN;Un.Lazy=VN;Un.Memo=UN;Un.Portal=gZ;Un.Profiler=kN;Un.StrictMode=NN;Un.Suspense=BN;Un.isAsyncMode=function(r){return oze(r)||_l(r)===yZ};Un.isConcurrentMode=oze;Un.isContextConsumer=function(r){return _l(r)===jN};Un.isContextProvider=function(r){return _l(r)===qN};Un.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===vZ};Un.isForwardRef=function(r){return _l(r)===zN};Un.isFragment=function(r){return _l(r)===DN};Un.isLazy=function(r){return _l(r)===VN};Un.isMemo=function(r){return _l(r)===UN};Un.isPortal=function(r){return _l(r)===gZ};Un.isProfiler=function(r){return _l(r)===kN};Un.isStrictMode=function(r){return _l(r)===NN};Un.isSuspense=function(r){return _l(r)===BN};Un.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===DN||r===FN||r===kN||r===NN||r===BN||r===Ser||typeof r=="object"&&r!==null&&(r.$$typeof===VN||r.$$typeof===UN||r.$$typeof===qN||r.$$typeof===jN||r.$$typeof===zN||r.$$typeof===Ier||r.$$typeof===Ter||r.$$typeof===Aer||r.$$typeof===Eer)};Un.typeOf=_l});var lze=A((L8r,sze)=>{"use strict";sze.exports=aze()});var aBe=A(Jn=>{"use strict";var E2=60103,I2=60106,EI=60107,II=60108,TI=60114,AI=60109,CI=60110,MI=60112,RI=60113,sY=60120,PI=60115,OI=60116,tBe=60121,rBe=60122,nBe=60117,iBe=60129,oBe=60131;typeof Symbol=="function"&&Symbol.for&&(jo=Symbol.for,E2=jo("react.element"),I2=jo("react.portal"),EI=jo("react.fragment"),II=jo("react.strict_mode"),TI=jo("react.profiler"),AI=jo("react.provider"),CI=jo("react.context"),MI=jo("react.forward_ref"),RI=jo("react.suspense"),sY=jo("react.suspense_list"),PI=jo("react.memo"),OI=jo("react.lazy"),tBe=jo("react.block"),rBe=jo("react.server.block"),nBe=jo("react.fundamental"),iBe=jo("react.debug_trace_mode"),oBe=jo("react.legacy_hidden"));var jo;function nc(r){if(typeof r=="object"&&r!==null){var e=r.$$typeof;switch(e){case E2:switch(r=r.type,r){case EI:case TI:case II:case RI:case sY:return r;default:switch(r=r&&r.$$typeof,r){case CI:case MI:case OI:case PI:case AI:return r;default:return e;}}case I2:return e;}}}var irr=AI,orr=E2,arr=MI,srr=EI,lrr=OI,urr=PI,crr=I2,frr=TI,hrr=II,prr=RI;Jn.ContextConsumer=CI;Jn.ContextProvider=irr;Jn.Element=orr;Jn.ForwardRef=arr;Jn.Fragment=srr;Jn.Lazy=lrr;Jn.Memo=urr;Jn.Portal=crr;Jn.Profiler=frr;Jn.StrictMode=hrr;Jn.Suspense=prr;Jn.isAsyncMode=function(){return!1};Jn.isConcurrentMode=function(){return!1};Jn.isContextConsumer=function(r){return nc(r)===CI};Jn.isContextProvider=function(r){return nc(r)===AI};Jn.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===E2};Jn.isForwardRef=function(r){return nc(r)===MI};Jn.isFragment=function(r){return nc(r)===EI};Jn.isLazy=function(r){return nc(r)===OI};Jn.isMemo=function(r){return nc(r)===PI};Jn.isPortal=function(r){return nc(r)===I2};Jn.isProfiler=function(r){return nc(r)===TI};Jn.isStrictMode=function(r){return nc(r)===II};Jn.isSuspense=function(r){return nc(r)===RI};Jn.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===EI||r===TI||r===iBe||r===II||r===RI||r===sY||r===oBe||typeof r=="object"&&r!==null&&(r.$$typeof===OI||r.$$typeof===PI||r.$$typeof===AI||r.$$typeof===CI||r.$$typeof===MI||r.$$typeof===nBe||r.$$typeof===tBe||r[0]===rBe)};Jn.typeOf=nc});var lBe=A((b7r,sBe)=>{"use strict";sBe.exports=aBe()});var Zrr={};dVe(Zrr,{SettingsProvider:()=>Hrr,renderGeoreferenceApp:()=>Wrr});var dUe=Me(dt(),1),mUe=Me(vo(),1),JJr=Me(bAe(),1);var FCe=Me(vS(),1);var gS=Me(MCe(),1);var wUt=Me(UP(),1);var E$=(r,e="control-feedback-container")=>{let t=document.getElementById(e);if(t===null){let n=r.getCanvasContainer();t=document.createElement("div"),t.id=e,n.appendChild(t)}return t};function Nc(r){return r!=null}function yS(r){return typeof r=="string"||r instanceof String}function Tr(r){let e=no.getLanguageDict();if(e===void 0)throw new Error("Dictionary is undefined.");let t=e[r];return t===void 0?(console.warn(`Translation for key "${r}" was not found in dictionary.`),""):t}var SUt={EN:"en",DE:"de"},Ms={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:SUt.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1},no={axiosApiInstance:null,appendSettings(r){Ms=Object.assign({},Ms,r)},getSettings(){return Ms},getBaseMaps(){return Ms.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},Ms.MAPVIEW_PARAMS)},getLanguageDict(){return Ms.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return Ms.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},Ms.TERRAIN_TILES)},getUsername(){return Ms.USERNAME},isUserAuthenticated(){return Ms.USER_ISAUTHENTICATED===!0},updateSettings(r){Ms=r},_initAxiosApiInstance(){let r=Ms.API_GEOREFERENCE_BASEURL,e=yS(r)&&r.length===0;if(!Nc(r)||e)throw new Error("The URL for the georeference service is not set.");let t={"Dev-Mode-Secret":"","Dev-Mode-Name":""},n=Object.assign({baseURL:r,withCredentials:!0},t?{headers:{get:t,post:t,put:t,delete:t}}:{});this.axiosApiInstance=FCe.default.create(n)},getGeoreferenceApiClient(){return Nc(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let r=Ms.MARKER_URL;if(!Nc(r))throw new Error("The marker icon url is not set.");return{id:Ms.MARKER_IMAGE_ID,url:r}}};var Gv=Me(dt(),1);var Sa=Me(dt()),nMe=Me(vo());function EUt(r){return!!r&&typeof r.then=="function"}var Zi=EUt;function IUt(r,e){if(r!=null)return r;throw new Error(e!=null?e:"Got unexpected null or undefined")}var Pn=IUt,WP=class{},TUt=new WP,$$={valueMaybe(){},valueOrThrow(){throw new Error(`Loadable expected value, but in "${this.state}" state`)},errorMaybe(){},errorOrThrow(){throw new Error(`Loadable expected error, but in "${this.state}" state`)},promiseMaybe(){},promiseOrThrow(){throw new Error(`Loadable expected promise, but in "${this.state}" state`)},is(r){return r.state===this.state&&r.contents===this.contents},map(r){if(this.state==="hasError")return this;if(this.state==="hasValue")try{let t=r(this.contents);return Zi(t)?L_(t.then(n=>({__value:n}))):H$(t)}catch(t){return Zi(t)?L_(t.next(()=>r(this.contents))):W$(t)}if(this.state==="loading")return L_(this.contents.then(t=>({__value:r(t.__value)})).catch(t=>{if(Zi(t))return t.then(()=>r(this.contents));throw t}));throw new Error("Invalid Loadable state")}};function H$(r){return Object.freeze(Sn(Et({state:"hasValue",contents:r},$$),{getValue(){return this.contents},toPromise(){return Promise.resolve(this.contents)},valueMaybe(){return this.contents},valueOrThrow(){return this.contents}}))}function W$(r){return Object.freeze(Sn(Et({state:"hasError",contents:r},$$),{getValue(){throw this.contents},toPromise(){return Promise.reject(this.contents)},errorMaybe(){return this.contents},errorOrThrow(){return this.contents}}))}function L_(r){return Object.freeze(Sn(Et({state:"loading",contents:r},$$),{getValue(){throw this.contents.then(({__value:e})=>e)},toPromise(){return this.contents.then(({__value:e})=>e)},promiseMaybe(){return this.contents.then(({__value:e})=>e)},promiseOrThrow(){return this.contents.then(({__value:e})=>e)}}))}function AUt(){return L_(new Promise(()=>{}))}function CUt(r){return r.every(e=>e.state==="hasValue")?H$(r.map(e=>e.contents)):r.some(e=>e.state==="hasError")?W$(Pn(r.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):L_(Promise.all(r.map(e=>e.contents)).then(e=>({__value:e})))}var RS={loadableWithValue:H$,loadableWithError:W$,loadableWithPromise:L_,loadableLoading:AUt,loadableAll:CUt,Canceled:WP,CANCELED:TUt},I$,iMe=(I$=Sa.default.useMutableSource)!==null&&I$!==void 0?I$:Sa.default.unstable_useMutableSource;function MUt(){return iMe&&!(typeof window!="undefined"&&window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE)}var oMe={mutableSourceExists:MUt,useMutableSource:iMe},{mutableSourceExists:RUt}=oMe,Z$=new Map().set("recoil_hamt_2020",!0).set("recoil_memory_managament_2020",!0).set("recoil_suppress_rerender_in_callback",!0);function Y$(r){var e;return r==="recoil_early_rendering_2021"&&!RUt()?!1:(e=Z$.get(r))!==null&&e!==void 0?e:!1}Y$.setPass=r=>{Z$.set(r,!0)};Y$.setFail=r=>{Z$.set(r,!1)};var Yn=Y$;function PUt(r,e,{error:t}={}){return null}var OUt=PUt,kc=OUt;function LUt(r,e){let t=new Set(r);return t.add(e),t}function DUt(r,e){let t=new Set(r);return t.delete(e),t}function NUt(r,e,t){let n=new Map(r);return n.set(e,t),n}function kUt(r,e,t){let n=new Map(r);return n.set(e,t(n.get(e))),n}function qUt(r,e){let t=new Map(r);return t.delete(e),t}function jUt(r,e){let t=new Map(r);return e.forEach(n=>t.delete(n)),t}var aMe={setByAddingToSet:LUt,setByDeletingFromSet:DUt,mapBySettingInMap:NUt,mapByUpdatingInMap:kUt,mapByDeletingFromMap:qUt,mapByDeletingMultipleFromMap:jUt};function*FUt(r,e){let t=0;for(let n of r)e(n,t++)&&(yield n)}var sMe=FUt;function zUt(r,e){return function*(){let t=0;for(let n of r)yield e(n,t++)}()}var lMe=zUt;function BUt(r,...e){}var UUt=BUt,K$=UUt;function fn(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var AS=class{constructor(e){fn(this,"key",void 0),this.key=e}},ZP=class extends AS{},YP=class extends AS{};function VUt(r){return r instanceof ZP||r instanceof YP}var aO={AbstractRecoilValue:AS,RecoilState:ZP,RecoilValueReadOnly:YP,isRecoilValue:VUt},GUt=aO.AbstractRecoilValue,$Ut=aO.RecoilState,HUt=aO.RecoilValueReadOnly,WUt=aO.isRecoilValue,ad=Object.freeze({__proto__:null,AbstractRecoilValue:GUt,RecoilState:$Ut,RecoilValueReadOnly:HUt,isRecoilValue:WUt}),KP=class{},ZUt=new KP,M$=class extends Error{constructor(e){super(`Tried to set the value of Recoil selector ${e} using an updater function, but it is an async selector in a pending or error state; this is not supported.`)}},hv=new Map,X$=new Map;function YUt(r){return lMe(r,e=>Pn(X$.get(e)))}function KUt(r){if(hv.has(r.key)){let t=`Duplicate atom key "${r.key}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(t)}hv.set(r.key,r);let e=r.set==null?new ad.RecoilValueReadOnly(r.key):new ad.RecoilState(r.key);return X$.set(r.key,e),e}var XP=class extends Error{};function XUt(r){let e=hv.get(r);if(e==null)throw new XP(`Missing definition for RecoilValue: "${r}""`);return e}function JUt(r){return hv.get(r)}var JP=new Map;function QUt(r){var e;if(!Yn("recoil_memory_managament_2020"))return;let t=hv.get(r);if(!(t==null||(e=t.shouldDeleteConfigOnRelease)===null||e===void 0)&&e.call(t)){var n;hv.delete(r),(n=uMe(r))===null||n===void 0||n(),JP.delete(r)}}function e3t(r,e){Yn("recoil_memory_managament_2020")&&(e===void 0?JP.delete(r):JP.set(r,e))}function uMe(r){return JP.get(r)}var Jl={nodes:hv,recoilValues:X$,registerNode:KUt,getNode:XUt,getNodeMaybe:JUt,deleteNodeConfigIfPossible:QUt,setConfigDeletionHandler:e3t,getConfigDeletionHandler:uMe,recoilValuesForKeys:YUt,NodeMissingError:XP,DefaultValue:KP,DEFAULT_VALUE:ZUt,RecoilValueNotReady:M$},QP=class{};function t3t(){return new QP}var sO={RetentionZone:QP,retentionZone:t3t},{setByAddingToSet:r3t}=aMe,{getNode:lO,getNodeMaybe:n3t,recoilValuesForKeys:zCe}=Jl,{RetentionZone:BCe}=sO,i3t=Object.freeze(new Set),R$=class extends Error{};function o3t(r,e,t){if(!Yn("recoil_memory_managament_2020"))return()=>{};let{nodesRetainedByZone:n}=r.getState().retention;function i(o){let a=n.get(o);a||n.set(o,a=new Set),a.add(e)}if(t instanceof BCe)i(t);else if(Array.isArray(t))for(let o of t)i(o);return()=>{if(!Yn("recoil_memory_managament_2020"))return;let o=r.getState().retention.nodesRetainedByZone;function a(c){let h=o.get(c);h&&h.delete(e),h&&h.size===0&&o.delete(c)}if(t instanceof BCe)a(t);else if(Array.isArray(t))for(let c of t)a(c)}}function J$(r,e,t,n){let i=r.getState();if(i.nodeCleanupFunctions.has(t))return;let o=lO(t),a=o3t(r,t,o.retainedBy),c=o.init(r,e,n);i.nodeCleanupFunctions.set(t,()=>{c(),a()})}function a3t(r,e){var t;let n=r.getState();(t=n.nodeCleanupFunctions.get(e))===null||t===void 0||t(),n.nodeCleanupFunctions.delete(e)}function s3t(r,e,t){return J$(r,e,t,"get"),lO(t).get(r,e)}function cMe(r,e,t){return lO(t).peek(r,e)}function l3t(r,e,t){var n;let i=n3t(e);return i==null||(n=i.invalidate)===null||n===void 0||n.call(i,r),Sn(Et({},r),{atomValues:r.atomValues.clone().delete(e),nonvalidatedAtoms:r.nonvalidatedAtoms.clone().set(e,t),dirtyAtoms:r3t(r.dirtyAtoms,e)})}function u3t(r,e,t,n){let i=lO(t);if(i.set==null)throw new R$(`Attempt to set read-only RecoilValue: ${t}`);let o=i.set;return J$(r,e,t,"set"),o(r,e,n)}function c3t(r,e,t){var n,i,o;let a=r.getState(),c=r.getGraph(e.version),h=a.knownAtoms.has(t)?"atom":a.knownSelectors.has(t)?"selector":void 0,d=sMe(fMe(r,e,new Set([t])),v=>v!==t);return{loadable:cMe(r,e,t),isActive:a.knownAtoms.has(t)||a.knownSelectors.has(t),isSet:h==="selector"?!1:e.atomValues.has(t),isModified:e.dirtyAtoms.has(t),type:h,deps:zCe((n=c.nodeDeps.get(t))!==null&&n!==void 0?n:[]),subscribers:{nodes:zCe(d),components:lMe((i=(o=a.nodeToComponentSubscriptions.get(t))===null||o===void 0?void 0:o.values())!==null&&i!==void 0?i:[],([v])=>({name:v}))}}}function fMe(r,e,t){let n=new Set,i=Array.from(t),o=r.getGraph(e.version);for(let c=i.pop();c;c=i.pop()){var a;n.add(c);let h=(a=o.nodeToNodeSubscriptions.get(c))!==null&&a!==void 0?a:i3t;for(let d of h)n.has(d)||i.push(d)}return n}var q_={getNodeLoadable:s3t,peekNodeLoadable:cMe,setNodeValue:u3t,cleanUpNode:a3t,setUnvalidatedAtomValue_DEPRECATED:l3t,peekNodeInfo:c3t,getDownstreamNodes:fMe,initializeNodeIfNewToStore:J$},{CANCELED:f3t}=RS,{getDownstreamNodes:h3t,getNodeLoadable:hMe,setNodeValue:p3t}=q_,{getNodeMaybe:pMe}=Jl,{DefaultValue:Q$,RecoilValueNotReady:d3t}=Jl,{AbstractRecoilValue:m3t,RecoilState:v3t,RecoilValueReadOnly:g3t,isRecoilValue:y3t}=ad;function _3t(r,{key:e},t=r.getState().currentTree){var n,i;let o=r.getState();t.version===o.currentTree.version||t.version===((n=o.nextTree)===null||n===void 0?void 0:n.version)||t.version===((i=o.previousTree)===null||i===void 0?void 0:i.version)||kc("Tried to read from a discarded tree");let a=hMe(r,t,e);return a.state==="loading"&&a.contents.catch(()=>f3t),a}function x3t(r,e){let t=r.clone();return e.forEach((n,i)=>{n.state==="hasValue"&&n.contents instanceof Q$?t.delete(i):t.set(i,n)}),t}function w3t(r,e,{key:t},n){if(typeof n=="function"){let i=hMe(r,e,t);if(i.state==="loading")throw new d3t(t);if(i.state==="hasError")throw i.contents;return n(i.contents)}else return n}function b3t(r,e,t){if(t.type==="set"){let{recoilValue:i,valueOrUpdater:o}=t,a=w3t(r,e,i,o),c=p3t(r,e,i.key,a);for(let[h,d]of c.entries())P$(e,h,d)}else if(t.type==="setLoadable"){let{recoilValue:{key:i},loadable:o}=t;P$(e,i,o)}else if(t.type==="markModified"){let{recoilValue:{key:i}}=t;e.dirtyAtoms.add(i)}else if(t.type==="setUnvalidated"){var n;let{recoilValue:{key:i},unvalidatedValue:o}=t,a=pMe(i);a==null||(n=a.invalidate)===null||n===void 0||n.call(a,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,o),e.dirtyAtoms.add(i)}else kc(`Unknown action ${t.type}`)}function P$(r,e,t){t.state==="hasValue"&&t.contents instanceof Q$?r.atomValues.delete(e):r.atomValues.set(e,t),r.dirtyAtoms.add(e),r.nonvalidatedAtoms.delete(e)}function dMe(r,e){r.replaceState(t=>{let n=mMe(t);for(let i of e)b3t(r,n,i);return O$(r,n),n})}function uO(r,e){if(IS.length){let t=IS[IS.length-1],n=t.get(r);n||t.set(r,n=[]),n.push(e)}else dMe(r,[e])}var IS=[];function S3t(){let r=new Map;return IS.push(r),()=>{for(let[t,n]of r)dMe(t,n);IS.pop()!==r&&kc("Incorrect order of batch popping")}}function mMe(r){return Sn(Et({},r),{atomValues:r.atomValues.clone(),nonvalidatedAtoms:r.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(r.dirtyAtoms)})}function O$(r,e){let t=h3t(r,e,e.dirtyAtoms);for(let o of t){var n,i;(n=pMe(o))===null||n===void 0||(i=n.invalidate)===null||i===void 0||i.call(n,e)}}function vMe(r,e,t){uO(r,{type:"set",recoilValue:e,valueOrUpdater:t})}function E3t(r,e,t){if(t instanceof Q$)return vMe(r,e,t);uO(r,{type:"setLoadable",recoilValue:e,loadable:t})}function I3t(r,e){uO(r,{type:"markModified",recoilValue:e})}function T3t(r,e,t){uO(r,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:t})}var A3t=0;function C3t(r,{key:e},t,n=null){let i=A3t++,o=r.getState();if(o.nodeToComponentSubscriptions.has(e)||o.nodeToComponentSubscriptions.set(e,new Map),Pn(o.nodeToComponentSubscriptions.get(e)).set(i,[n!=null?n:"<not captured>",t]),Yn("recoil_early_rendering_2021")){let a=r.getState().nextTree;a&&a.dirtyAtoms.has(e)&&t(a)}return{release:()=>{let a=r.getState(),c=a.nodeToComponentSubscriptions.get(e);if(c===void 0||!c.has(i)){kc(`Subscription missing at release time for atom ${e}. This is a bug in Recoil.`);return}c.delete(i),c.size===0&&a.nodeToComponentSubscriptions.delete(e)}}}var pv={RecoilValueReadOnly:g3t,AbstractRecoilValue:m3t,RecoilState:v3t,getRecoilValueAsLoadable:_3t,setRecoilValue:vMe,setRecoilValueLoadable:E3t,markRecoilValueModified:I3t,setUnvalidatedRecoilValue:T3t,subscribeToRecoilValue:C3t,isRecoilValue:y3t,applyAtomValueWrites:x3t,batchStart:S3t,writeLoadableToTreeState:P$,invalidateDownstreams:O$,copyTreeState:mMe,invalidateDownstreams_FOR_TESTING:O$},{unstable_batchedUpdates:M3t}=nMe.default,R3t={unstable_batchedUpdates:M3t},{unstable_batchedUpdates:P3t}=R3t,O3t={unstable_batchedUpdates:P3t},{batchStart:L3t}=pv,{unstable_batchedUpdates:D3t}=O3t,e6=D3t,N3t=r=>{e6=r},k3t=()=>e6,q3t=r=>{e6(()=>{let e=()=>{};try{e=L3t(),r()}finally{e()}})},t6={getBatcher:k3t,setBatcher:N3t,batchUpdates:q3t};function j3t(r,e){e()}var F3t={enqueueExecution:j3t};function z3t(r,...e){let t=new Set;e:for(let n of r){for(let i of e)if(i.has(n))continue e;t.add(n)}return t}var eO=z3t;function B3t(r,e){let t=new Map;return r.forEach((n,i)=>{t.set(i,e(n,i))}),t}var tO=B3t;function U3t(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function V3t(r){return{nodeDeps:tO(r.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:tO(r.nodeToNodeSubscriptions,e=>new Set(e))}}function T$(r,e,t){let{nodeDeps:n,nodeToNodeSubscriptions:i}=e;r.forEach((o,a)=>{let c=n.get(a);if(c&&t&&c!==t.nodeDeps.get(a))return;n.set(a,new Set(o)),(c==null?o:eO(o,c)).forEach(d=>{i.has(d)||i.set(d,new Set),Pn(i.get(d)).add(a)}),c&&eO(c,o).forEach(v=>{if(!i.has(v))return;let x=Pn(i.get(v));x.delete(a),x.size===0&&i.delete(v)})})}function G3t(r,e,t){var n,i,o,a;let c=e.getState();t===c.currentTree.version||t===((n=c.nextTree)===null||n===void 0?void 0:n.version)||t===((i=c.previousTree)===null||i===void 0?void 0:i.version)||kc("Tried to save dependencies to a discarded tree");let h=e.getGraph(t);if(T$(r,h),t===((o=c.previousTree)===null||o===void 0?void 0:o.version)){let v=e.getGraph(c.currentTree.version);T$(r,v,h)}if(t===((a=c.previousTree)===null||a===void 0?void 0:a.version)||t===c.currentTree.version){var d;let v=(d=c.nextTree)===null||d===void 0?void 0:d.version;if(v!==void 0){let x=e.getGraph(v);T$(r,x,h)}}}function $3t(r,e){r.forEach((t,n)=>{e.has(n)||e.set(n,new Set);let i=Pn(e.get(n));t.forEach(o=>i.add(o))})}function H3t(r,e,t){t.has(r)||t.set(r,new Set),Pn(t.get(r)).add(e)}var PS={addToDependencyMap:H3t,cloneGraph:V3t,graph:U3t,mergeDepsIntoDependencyMap:$3t,saveDependencyMapToStore:G3t};function W3t(r,e){return e={exports:{}},r(e,e.exports),e.exports}var Z3t=W3t(function(r){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ee){return typeof Ee}:function(Ee){return Ee&&typeof Symbol=="function"&&Ee.constructor===Symbol&&Ee!==Symbol.prototype?"symbol":typeof Ee},t={},n=5,i=Math.pow(2,n),o=i-1,a=i/2,c=i/4,h={},d=function(Oe){return function(){return Oe}},v=t.hash=function(Ee){var Oe=typeof Ee=="undefined"?"undefined":e(Ee);if(Oe==="number")return Ee;Oe!=="string"&&(Ee+="");for(var it=0,bt=0,vt=Ee.length;bt<vt;++bt){var oe=Ee.charCodeAt(bt);it=(it<<5)-it+oe|0}return it},x=function(Oe){return Oe-=Oe>>1&1431655765,Oe=(Oe&858993459)+(Oe>>2&858993459),Oe=Oe+(Oe>>4)&252645135,Oe+=Oe>>8,Oe+=Oe>>16,Oe&127},S=function(Oe,it){return it>>>Oe&o},T=function(Oe){return 1<<Oe},L=function(Oe,it){return x(Oe&it-1)},k=function(Oe,it,bt,vt){var oe=vt;if(!Oe){var W=vt.length;oe=new Array(W);for(var H=0;H<W;++H)oe[H]=vt[H]}return oe[it]=bt,oe},R=function(Oe,it,bt){var vt=bt.length-1,oe=0,W=0,H=bt;if(Oe)oe=W=it;else for(H=new Array(vt);oe<it;)H[W++]=bt[oe++];for(++oe;oe<=vt;)H[W++]=bt[oe++];return Oe&&(H.length=vt),H},D=function(Oe,it,bt,vt){var oe=vt.length;if(Oe){for(var W=oe;W>=it;)vt[W--]=vt[W];return vt[it]=bt,vt}for(var H=0,K=0,ae=new Array(oe+1);H<it;)ae[K++]=vt[H++];for(ae[it]=bt;H<oe;)ae[++K]=vt[H++];return ae},j=1,B=2,$=3,ee=4,J={__hamt_isEmpty:!0},ie=function(Oe){return Oe===J||Oe&&Oe.__hamt_isEmpty},ue=function(Oe,it,bt,vt){return{type:j,edit:Oe,hash:it,key:bt,value:vt,_modify:Ae}},le=function(Oe,it,bt){return{type:B,edit:Oe,hash:it,children:bt,_modify:$e}},_e=function(Oe,it,bt){return{type:$,edit:Oe,mask:it,children:bt,_modify:Ge}},Re=function(Oe,it,bt){return{type:ee,edit:Oe,size:it,children:bt,_modify:Ke}},ze=function(Oe){return Oe===J||Oe.type===j||Oe.type===B},ke=function(Oe,it,bt,vt,oe){for(var W=[],H=vt,K=0,ae=0;H;++ae)H&1&&(W[ae]=oe[K++]),H>>>=1;return W[it]=bt,Re(Oe,K+1,W)},Ve=function(Oe,it,bt,vt){for(var oe=new Array(it-1),W=0,H=0,K=0,ae=vt.length;K<ae;++K)if(K!==bt){var ve=vt[K];ve&&!ie(ve)&&(oe[W++]=ve,H|=1<<K)}return _e(Oe,H,oe)},We=function Ee(Oe,it,bt,vt,oe,W){if(bt===oe)return le(Oe,bt,[W,vt]);var H=S(it,bt),K=S(it,oe);return _e(Oe,T(H)|T(K),H===K?[Ee(Oe,it+n,bt,vt,oe,W)]:H<K?[vt,W]:[W,vt])},Te=function(Oe,it,bt,vt,oe,W,H,K){for(var ae=oe.length,ve=0;ve<ae;++ve){var xe=oe[ve];if(bt(H,xe.key)){var Ie=xe.value,pe=W(Ie);return pe===Ie?oe:pe===h?(--K.value,R(Oe,ve,oe)):k(Oe,ve,ue(it,vt,H,pe),oe)}}var Be=W();return Be===h?oe:(++K.value,k(Oe,ae,ue(it,vt,H,Be),oe))},Se=function(Oe,it){return Oe===it.edit},Ae=function(Oe,it,bt,vt,oe,W,H){if(it(W,this.key)){var K=vt(this.value);return K===this.value?this:K===h?(--H.value,J):Se(Oe,this)?(this.value=K,this):ue(Oe,oe,W,K)}var ae=vt();return ae===h?this:(++H.value,We(Oe,bt,this.hash,this,oe,ue(Oe,oe,W,ae)))},$e=function(Oe,it,bt,vt,oe,W,H){if(oe===this.hash){var K=Se(Oe,this),ae=Te(K,Oe,it,this.hash,this.children,vt,W,H);return ae===this.children?this:ae.length>1?le(Oe,this.hash,ae):ae[0]}var ve=vt();return ve===h?this:(++H.value,We(Oe,bt,this.hash,this,oe,ue(Oe,oe,W,ve)))},Ge=function(Oe,it,bt,vt,oe,W,H){var K=this.mask,ae=this.children,ve=S(bt,oe),xe=T(ve),Ie=L(K,xe),pe=K&xe,Be=pe?ae[Ie]:J,Je=Be._modify(Oe,it,bt+n,vt,oe,W,H);if(Be===Je)return this;var Ue=Se(Oe,this),st=K,Bt=void 0;if(pe&&ie(Je)){if(st&=~xe,!st)return J;if(ae.length<=2&&ze(ae[Ie^1]))return ae[Ie^1];Bt=R(Ue,Ie,ae)}else if(!pe&&!ie(Je)){if(ae.length>=a)return ke(Oe,ve,Je,K,ae);st|=xe,Bt=D(Ue,Ie,Je,ae)}else Bt=k(Ue,Ie,Je,ae);return Ue?(this.mask=st,this.children=Bt,this):_e(Oe,st,Bt)},Ke=function(Oe,it,bt,vt,oe,W,H){var K=this.size,ae=this.children,ve=S(bt,oe),xe=ae[ve],Ie=(xe||J)._modify(Oe,it,bt+n,vt,oe,W,H);if(xe===Ie)return this;var pe=Se(Oe,this),Be=void 0;if(ie(xe)&&!ie(Ie))++K,Be=k(pe,ve,Ie,ae);else if(!ie(xe)&&ie(Ie)){if(--K,K<=c)return Ve(Oe,K,ve,ae);Be=k(pe,ve,J,ae)}else Be=k(pe,ve,Ie,ae);return pe?(this.size=K,this.children=Be,this):Re(Oe,K,Be)};J._modify=function(Ee,Oe,it,bt,vt,oe,W){var H=bt();return H===h?J:(++W.value,ue(Ee,vt,oe,H))};function Pe(Ee,Oe,it,bt,vt){this._editable=Ee,this._edit=Oe,this._config=it,this._root=bt,this._size=vt}Pe.prototype.setTree=function(Ee,Oe){return this._editable?(this._root=Ee,this._size=Oe,this):Ee===this._root?this:new Pe(this._editable,this._edit,this._config,Ee,Oe)};var at=t.tryGetHash=function(Ee,Oe,it,bt){for(var vt=bt._root,oe=0,W=bt._config.keyEq;;)switch(vt.type){case j:return W(it,vt.key)?vt.value:Ee;case B:{if(Oe===vt.hash)for(var H=vt.children,K=0,ae=H.length;K<ae;++K){var ve=H[K];if(W(it,ve.key))return ve.value}return Ee}case $:{var xe=S(oe,Oe),Ie=T(xe);if(vt.mask&Ie){vt=vt.children[L(vt.mask,Ie)],oe+=n;break}return Ee}case ee:{if(vt=vt.children[S(oe,Oe)],vt){oe+=n;break}return Ee}default:return Ee;}};Pe.prototype.tryGetHash=function(Ee,Oe,it){return at(Ee,Oe,it,this)};var Tt=t.tryGet=function(Ee,Oe,it){return at(Ee,it._config.hash(Oe),Oe,it)};Pe.prototype.tryGet=function(Ee,Oe){return Tt(Ee,Oe,this)};var Le=t.getHash=function(Ee,Oe,it){return at(void 0,Ee,Oe,it)};Pe.prototype.getHash=function(Ee,Oe){return Le(Ee,Oe,this)};var Ye=t.get=function(Ee,Oe){return at(void 0,Oe._config.hash(Ee),Ee,Oe)};Pe.prototype.get=function(Ee,Oe){return Tt(Oe,Ee,this)};var Fe=t.has=function(Ee,Oe,it){return at(h,Ee,Oe,it)!==h};Pe.prototype.hasHash=function(Ee,Oe){return Fe(Ee,Oe,this)};var Ze=t.has=function(Ee,Oe){return Fe(Oe._config.hash(Ee),Ee,Oe)};Pe.prototype.has=function(Ee){return Ze(Ee,this)};var tt=function(Oe,it){return Oe===it};t.make=function(Ee){return new Pe(0,0,{keyEq:Ee&&Ee.keyEq||tt,hash:Ee&&Ee.hash||v},J,0)},t.empty=t.make();var Qe=t.isEmpty=function(Ee){return Ee&&!!ie(Ee._root)};Pe.prototype.isEmpty=function(){return Qe(this)};var Dt=t.modifyHash=function(Ee,Oe,it,bt){var vt={value:bt._size},oe=bt._root._modify(bt._editable?bt._edit:NaN,bt._config.keyEq,0,Ee,Oe,it,vt);return bt.setTree(oe,vt.value)};Pe.prototype.modifyHash=function(Ee,Oe,it){return Dt(it,Ee,Oe,this)};var Kt=t.modify=function(Ee,Oe,it){return Dt(Ee,it._config.hash(Oe),Oe,it)};Pe.prototype.modify=function(Ee,Oe){return Kt(Oe,Ee,this)};var _t=t.setHash=function(Ee,Oe,it,bt){return Dt(d(it),Ee,Oe,bt)};Pe.prototype.setHash=function(Ee,Oe,it){return _t(Ee,Oe,it,this)};var be=t.set=function(Ee,Oe,it){return _t(it._config.hash(Ee),Ee,Oe,it)};Pe.prototype.set=function(Ee,Oe){return be(Ee,Oe,this)};var jt=d(h),Qt=t.removeHash=function(Ee,Oe,it){return Dt(jt,Ee,Oe,it)};Pe.prototype.removeHash=Pe.prototype.deleteHash=function(Ee,Oe){return Qt(Ee,Oe,this)};var Ft=t.remove=function(Ee,Oe){return Qt(Oe._config.hash(Ee),Ee,Oe)};Pe.prototype.remove=Pe.prototype.delete=function(Ee){return Ft(Ee,this)};var nr=t.beginMutation=function(Ee){return new Pe(Ee._editable+1,Ee._edit+1,Ee._config,Ee._root,Ee._size)};Pe.prototype.beginMutation=function(){return nr(this)};var or=t.endMutation=function(Ee){return Ee._editable=Ee._editable&&Ee._editable-1,Ee};Pe.prototype.endMutation=function(){return or(this)};var Wt=t.mutate=function(Ee,Oe){var it=nr(Oe);return Ee(it),or(it)};Pe.prototype.mutate=function(Ee){return Wt(Ee,this)};var lr=function(Oe){return Oe&&Pr(Oe[0],Oe[1],Oe[2],Oe[3],Oe[4])},Pr=function(Oe,it,bt,vt,oe){for(;bt<Oe;){var W=it[bt++];if(W&&!ie(W))return en(W,vt,[Oe,it,bt,vt,oe])}return lr(oe)},en=function(Oe,it,bt){switch(Oe.type){case j:return{value:it(Oe),rest:bt};case B:case ee:case $:var vt=Oe.children;return Pr(vt.length,vt,0,it,bt);default:return lr(bt);}},ai={done:!0};function Ii(Ee){this.v=Ee}Ii.prototype.next=function(){if(!this.v)return ai;var Ee=this.v;return this.v=lr(Ee.rest),Ee},Ii.prototype[Symbol.iterator]=function(){return this};var nt=function(Oe,it){return new Ii(en(Oe._root,it))},Qn=function(Oe){return[Oe.key,Oe.value]},An=t.entries=function(Ee){return nt(Ee,Qn)};Pe.prototype.entries=Pe.prototype[Symbol.iterator]=function(){return An(this)};var di=function(Oe){return Oe.key},Ti=t.keys=function(Ee){return nt(Ee,di)};Pe.prototype.keys=function(){return Ti(this)};var ut=function(Oe){return Oe.value},vr=t.values=Pe.prototype.values=function(Ee){return nt(Ee,ut)};Pe.prototype.values=function(){return vr(this)};var zt=t.fold=function(Ee,Oe,it){var bt=it._root;if(bt.type===j)return Ee(Oe,bt.value,bt.key);for(var vt=[bt.children],oe=void 0;oe=vt.pop();)for(var W=0,H=oe.length;W<H;){var K=oe[W++];K&&K.type&&(K.type===j?Oe=Ee(Oe,K.value,K.key):vt.push(K.children))}return Oe};Pe.prototype.fold=function(Ee,Oe){return zt(Ee,Oe,this)};var Ai=t.forEach=function(Ee,Oe){return zt(function(it,bt,vt){return Ee(bt,vt,Oe)},null,Oe)};Pe.prototype.forEach=function(Ee){return Ai(Ee,this)};var hn=t.count=function(Ee){return Ee._size};Pe.prototype.count=function(){return hn(this)},Object.defineProperty(Pe.prototype,"size",{get:Pe.prototype.count}),r.exports?r.exports=t:(void 0).hamt=t}),L$=class{constructor(e){fn(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,t){return this._map.set(e,t),this}delete(e){return this._map.delete(e),this}clone(){return r6(this)}toMap(){return new Map(this._map)}},D$=class r{constructor(e){if(fn(this,"_hamt",Z3t.empty.beginMutation()),e instanceof r){let t=e._hamt.endMutation();e._hamt=t.beginMutation(),this._hamt=t.beginMutation()}else if(e)for(let[t,n]of e.entries())this._hamt.set(t,n)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,t){return this._hamt.set(e,t),this}delete(e){return this._hamt.delete(e),this}clone(){return r6(this)}toMap(){return new Map(this._hamt)}};function r6(r){return Yn("recoil_hamt_2020")?new D$(r):new L$(r)}var Y3t={persistentMap:r6},K3t=Y3t.persistentMap,X3t=Object.freeze({__proto__:null,persistentMap:K3t}),{graph:J3t}=PS,{persistentMap:UCe}=X3t,Q3t=0,gMe=()=>Q3t++;function yMe(){let r=gMe();return{version:r,stateID:r,transactionMetadata:{},dirtyAtoms:new Set,atomValues:UCe(),nonvalidatedAtoms:UCe()}}function eVt(){let r=yMe();return{currentTree:r,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(r.version,J3t()),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var _Me={makeEmptyTreeState:yMe,makeEmptyStoreState:eVt,getNextTreeStateVersion:gMe};function tVt(...r){let e=new Set;for(let t of r)for(let n of t)e.add(n);return e}var rVt=tVt;function nVt(r,e,t){let n=r.entries(),i=n.next();for(;!i.done;){let o=i.value;if(e.call(t,o[1],o[0],r))return!0;i=n.next()}return!1}var iVt=nVt,{cleanUpNode:oVt}=q_,{deleteNodeConfigIfPossible:aVt,getNode:xMe}=Jl,{RetentionZone:wMe}=sO,bMe=new Set;function SMe(r,e){let t=r.getState(),n=t.currentTree;if(t.nextTree){kc("releaseNodesNowOnCurrentTree should only be called at the end of a batch");return}let i=new Set;for(let a of e)if(a instanceof wMe)for(let c of cVt(t,a))i.add(c);else i.add(a);let o=sVt(r,i);for(let a of o)uVt(r,n,a)}function sVt(r,e){let t=r.getState(),n=t.currentTree,i=r.getGraph(n.version),o=new Set,a=new Set;return c(e),o;function c(h){let d=new Set,v=lVt(r,n,h,o,a);for(let L of v){var x;if(xMe(L).retainedBy==="recoilRoot"){a.add(L);continue}if(((x=t.retention.referenceCounts.get(L))!==null&&x!==void 0?x:0)>0){a.add(L);continue}if(EMe(L).some(R=>t.retention.referenceCounts.get(R))){a.add(L);continue}let k=i.nodeToNodeSubscriptions.get(L);if(k&&iVt(k,R=>a.has(R))){a.add(L);continue}o.add(L),d.add(L)}let S=new Set;for(let L of d)for(let k of(T=i.nodeDeps.get(L))!==null&&T!==void 0?T:bMe){var T;o.has(k)||S.add(k)}S.size&&c(S)}}function lVt(r,e,t,n,i){let o=r.getGraph(e.version),a=[],c=new Set;for(;t.size>0;)h(Pn(t.values().next().value));return a;function h(d){if(n.has(d)||i.has(d)){t.delete(d);return}if(c.has(d))return;let v=o.nodeToNodeSubscriptions.get(d);if(v)for(let x of v)h(x);c.add(d),t.delete(d),a.push(d)}}function uVt(r,e,t){if(!Yn("recoil_memory_managament_2020"))return;oVt(r,t);let n=r.getState();n.knownAtoms.delete(t),n.knownSelectors.delete(t),n.nodeTransactionSubscriptions.delete(t),n.retention.referenceCounts.delete(t);let i=EMe(t);for(let h of i){var o;(o=n.retention.nodesRetainedByZone.get(h))===null||o===void 0||o.delete(t)}e.atomValues.delete(t),e.dirtyAtoms.delete(t),e.nonvalidatedAtoms.delete(t);let a=n.graphsByVersion.get(e.version);if(a){let h=a.nodeDeps.get(t);if(h!==void 0){a.nodeDeps.delete(t);for(let d of h){var c;(c=a.nodeToNodeSubscriptions.get(d))===null||c===void 0||c.delete(t)}}a.nodeToNodeSubscriptions.delete(t)}aVt(t)}function cVt(r,e){var t;return(t=r.retention.nodesRetainedByZone.get(e))!==null&&t!==void 0?t:bMe}function EMe(r){let e=xMe(r).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof wMe?[e]:e}function fVt(r,e){let t=r.getState();t.nextTree?t.retention.retainablesToCheckForRelease.add(e):SMe(r,new Set([e]))}function hVt(r,e,t){var n;if(!Yn("recoil_memory_managament_2020"))return;let i=r.getState().retention.referenceCounts,o=((n=i.get(e))!==null&&n!==void 0?n:0)+t;o===0?IMe(r,e):i.set(e,o)}function IMe(r,e){if(!Yn("recoil_memory_managament_2020"))return;r.getState().retention.referenceCounts.delete(e),fVt(r,e)}function pVt(r){if(!Yn("recoil_memory_managament_2020"))return;let e=r.getState();SMe(r,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function dVt(r){return r===void 0?"recoilRoot":r}var OS={updateRetainCount:hVt,updateRetainCountToZero:IMe,releaseScheduledRetainablesNow:pVt,retainedByOptionWithDefault:dVt};function*mVt(r){for(let e of r)for(let t of e)yield t}var vVt=mVt,gVt=typeof window=="undefined",yVt=typeof navigator!="undefined"&&navigator.product==="ReactNative",n6={isSSR:gVt,isReactNative:yVt},{isSSR:_Vt}=n6,{batchUpdates:N$}=t6,{initializeNodeIfNewToStore:xVt,peekNodeInfo:wVt}=q_,{graph:bVt}=PS,{DEFAULT_VALUE:SVt,recoilValues:VCe,recoilValuesForKeys:GCe}=Jl,{AbstractRecoilValue:EVt,getRecoilValueAsLoadable:IVt,setRecoilValue:$Ce,setUnvalidatedRecoilValue:TVt}=pv,{updateRetainCount:HP}=OS,{getNextTreeStateVersion:AVt,makeEmptyStoreState:CVt}=_Me;var N_=class{constructor(e){fn(this,"_store",void 0),fn(this,"_refCount",0),fn(this,"getLoadable",t=>(this.checkRefCount_INTERNAL(),IVt(this._store,t))),fn(this,"getPromise",t=>(this.checkRefCount_INTERNAL(),this.getLoadable(t).toPromise())),fn(this,"getNodes_UNSTABLE",t=>{if(this.checkRefCount_INTERNAL(),(t==null?void 0:t.isModified)===!0){if((t==null?void 0:t.isInitialized)===!1)return[];let o=this._store.getState().currentTree;return GCe(o.dirtyAtoms)}let n=this._store.getState().knownAtoms,i=this._store.getState().knownSelectors;return(t==null?void 0:t.isInitialized)==null?VCe.values():t.isInitialized===!0?GCe(vVt([this._store.getState().knownAtoms,this._store.getState().knownSelectors])):sMe(VCe.values(),({key:o})=>!n.has(o)&&!i.has(o))}),fn(this,"getInfo_UNSTABLE",({key:t})=>(this.checkRefCount_INTERNAL(),wVt(this._store,this._store.getState().currentTree,t))),fn(this,"map",t=>{this.checkRefCount_INTERNAL();let n=new CS(this,N$);return t(n),k$(n.getStore_INTERNAL())}),fn(this,"asyncMap",t=>ho(this,null,function*(){this.checkRefCount_INTERNAL();let n=new CS(this,N$);return yield t(n),k$(n.getStore_INTERNAL())})),this._store={getState:()=>e,replaceState:t=>{e.currentTree=t(e.currentTree)},getGraph:t=>{let n=e.graphsByVersion;if(n.has(t))return Pn(n.get(t));let i=bVt();return n.set(t,i),i},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw new Error("Cannot subscribe to Snapshots")}};for(let t of this._store.getState().nodeCleanupFunctions.keys())xVt(this._store,e.currentTree,t,"get"),HP(this._store,t,1);this.retain(),this.autorelease_INTERNAL()}retain(){if(!Yn("recoil_memory_managament_2020"))return()=>{};this._refCount++;let e=!1;return()=>{e||(e=!0,this.release_INTERNAL())}}autorelease_INTERNAL(){Yn("recoil_memory_managament_2020")&&(_Vt||window.setTimeout(()=>this.release_INTERNAL(),0))}release_INTERNAL(){Yn("recoil_memory_managament_2020")&&(this._refCount--,this._refCount)}checkRefCount_INTERNAL(){Yn("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this.getID_INTERNAL()}getID_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}};function TMe(r,e,t=!1){let n=r.getState(),i=t?AVt():e.version;return{currentTree:t?{version:i,stateID:i,transactionMetadata:Et({},e.transactionMetadata),dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()}:e,commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(n.knownAtoms),knownSelectors:new Set(n.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,r.getGraph(e.version)),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}function MVt(r){let e=new N_(CVt());return r!=null?e.map(r):e}function k$(r,e="current"){let t=r.getState(),n=e==="current"?t.currentTree:Pn(t.previousTree);return new N_(TMe(r,n))}var CS=class extends N_{constructor(e,t){super(TMe(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0)),fn(this,"_batch",void 0),fn(this,"set",(n,i)=>{this.checkRefCount_INTERNAL();let o=this.getStore_INTERNAL();this._batch(()=>{HP(o,n.key,1),$Ce(this.getStore_INTERNAL(),n,i)})}),fn(this,"reset",n=>{this.checkRefCount_INTERNAL();let i=this.getStore_INTERNAL();this._batch(()=>{HP(i,n.key,1),$Ce(this.getStore_INTERNAL(),n,SVt)})}),fn(this,"setUnvalidatedAtomValues_DEPRECATED",n=>{this.checkRefCount_INTERNAL();let i=this.getStore_INTERNAL();N$(()=>{for(let[o,a]of n.entries())HP(i,o,1),TVt(i,new EVt(o),a)})}),this._batch=t}},cO={Snapshot:N_,MutableSnapshot:CS,freshSnapshot:MVt,cloneSnapshot:k$},RVt=cO.Snapshot,PVt=cO.MutableSnapshot,OVt=cO.freshSnapshot,LVt=cO.cloneSnapshot,fO=Object.freeze({__proto__:null,Snapshot:RVt,MutableSnapshot:PVt,freshSnapshot:OVt,cloneSnapshot:LVt}),{getNextTreeStateVersion:DVt,makeEmptyStoreState:AMe}=_Me,{cleanUpNode:NVt,getDownstreamNodes:kVt,setNodeValue:qVt,setUnvalidatedAtomValue_DEPRECATED:jVt}=q_,{graph:FVt}=PS,{cloneGraph:zVt}=PS,{applyAtomValueWrites:BVt}=pv,{releaseScheduledRetainablesNow:CMe}=OS,{freshSnapshot:UVt}=fO,{useCallback:VVt,useContext:MMe,useEffect:q$,useMemo:GVt,useRef:A$,useState:$Vt}=Sa.default;function _S(){throw new Error("This component must be used inside a <RecoilRoot> component.")}var RMe=Object.freeze({getState:_S,replaceState:_S,getGraph:_S,subscribeToTransactions:_S,addTransactionMetadata:_S}),j$=!1;function HCe(r){if(j$)throw new Error("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");let e=r.getState();if(e.nextTree===null){Yn("recoil_memory_managament_2020")&&Yn("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&CMe(r);let t=e.currentTree.version,n=DVt();e.nextTree=Sn(Et({},e.currentTree),{version:n,stateID:n,dirtyAtoms:new Set,transactionMetadata:{}}),e.graphsByVersion.set(n,zVt(Pn(e.graphsByVersion.get(t))))}}var PMe=Sa.default.createContext({current:RMe}),i6=()=>MMe(PMe),OMe=Sa.default.createContext(null);function HVt(){let r=MMe(OMe);return r==null&&K$("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),r}function o6(r,e,t){let n=kVt(r,t,t.dirtyAtoms);for(let i of n){let o=e.nodeToComponentSubscriptions.get(i);if(o)for(let[a,[c,h]]of o)h(t)}}function LMe(r){let e=r.getState(),t=e.currentTree,n=t.dirtyAtoms;if(n.size){for(let[i,o]of e.nodeTransactionSubscriptions)if(n.has(i))for(let[a,c]of o)c(r);for(let[i,o]of e.transactionSubscriptions)o(r);(!Yn("recoil_early_rendering_2021")||e.suspendedComponentResolvers.size)&&(o6(r,e,t),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(t)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function WVt(r){let e=r.current.getState();e.commitDepth++;try{let{nextTree:t}=e;if(t===null)return;e.previousTree=e.currentTree,e.currentTree=t,e.nextTree=null,LMe(r.current),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):kc("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,Yn("recoil_memory_managament_2020")&&CMe(r.current)}finally{e.commitDepth--}}function ZVt({setNotifyBatcherOfChange:r}){let e=i6(),[t,n]=$Vt([]);return r(()=>n({})),q$(()=>{F3t.enqueueExecution("Batcher",()=>{WVt(e)})}),q$(()=>()=>{r(()=>{})},[r]),null}function YVt(r,e){let t=AMe();return e({set:(n,i)=>{let o=t.currentTree,a=qVt(r,o,n.key,i),c=new Set(a.keys()),h=o.nonvalidatedAtoms.clone();for(let d of c)h.delete(d);t.currentTree=Sn(Et({},o),{dirtyAtoms:rVt(o.dirtyAtoms,c),atomValues:BVt(o.atomValues,a),nonvalidatedAtoms:h})},setUnvalidatedAtomValues:n=>{n.forEach((i,o)=>{t.currentTree=jVt(t.currentTree,o,i)})}}),t}function KVt(r){return UVt().map(r).getStore_INTERNAL().getState()}var WCe=0;function XVt({initializeState_DEPRECATED:r,initializeState:e,store_INTERNAL:t,children:n}){var i;let o,a=R=>{let D=o.current.graphsByVersion;if(D.has(R))return Pn(D.get(R));let j=FVt();return D.set(R,j),j},c=(R,D)=>{if(D==null){let{transactionSubscriptions:j}=L.current.getState(),B=WCe++;return j.set(B,R),{release:()=>{j.delete(B)}}}else{let{nodeTransactionSubscriptions:j}=L.current.getState();j.has(D)||j.set(D,new Map);let B=WCe++;return Pn(j.get(D)).set(B,R),{release:()=>{let $=j.get(D);$&&($.delete(B),$.size===0&&j.delete(D))}}}},h=R=>{HCe(L.current);for(let D of Object.keys(R))Pn(L.current.getState().nextTree).transactionMetadata[D]=R[D]},d=R=>{let D=L.current.getState();HCe(L.current);let j=Pn(D.nextTree),B;try{j$=!0,B=R(j)}finally{j$=!1}B!==j&&(D.nextTree=B,Yn("recoil_early_rendering_2021")&&o6(T,D,B),Pn(v.current)())},v=A$(null),x=VVt(R=>{v.current=R},[v]),S=(i=Sa.default.createMutableSource)!==null&&i!==void 0?i:Sa.default.unstable_createMutableSource,T=t!=null?t:{getState:()=>o.current,replaceState:d,getGraph:a,subscribeToTransactions:c,addTransactionMetadata:h},L=A$(T);o=A$(r!=null?YVt(T,r):e!=null?KVt(e):AMe());let k=GVt(()=>S?S(o,()=>o.current.currentTree.version):null,[S,o]);return q$(()=>()=>{for(let R of L.current.getState().knownAtoms)NVt(L.current,R)},[]),Sa.default.createElement(PMe.Provider,{value:L},Sa.default.createElement(OMe.Provider,{value:k},Sa.default.createElement(ZVt,{setNotifyBatcherOfChange:x}),n))}function JVt(r){let i=r,{override:e}=i,t=fo(i,["override"]),n=i6();return e===!1&&n.current!==RMe?r.children:Sa.default.createElement(XVt,t)}var hO={useStoreRef:i6,useRecoilMutableSource:HVt,RecoilRoot:JVt,notifyComponents_FOR_TESTING:o6,sendEndOfBatchNotifications_FOR_TESTING:LMe},{loadableWithValue:QVt}=RS,{DEFAULT_VALUE:e5t,getNode:t5t}=Jl,{copyTreeState:r5t,getRecoilValueAsLoadable:n5t,invalidateDownstreams:i5t,writeLoadableToTreeState:o5t}=pv;function ZCe(r){return t5t(r.key).nodeType==="atom"}var F$=class{constructor(e,t){fn(this,"_store",void 0),fn(this,"_treeState",void 0),fn(this,"_changes",void 0),fn(this,"get",n=>{if(this._changes.has(n.key))return this._changes.get(n.key);if(!ZCe(n))throw new Error("Reading selectors within atomicUpdate is not supported");let i=n5t(this._store,n,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:new Error(`Expected Recoil atom ${n.key} to have a value, but it is in a loading state.`)}),fn(this,"set",(n,i)=>{if(!ZCe(n))throw new Error("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){let o=this.get(n);this._changes.set(n.key,i(o))}else this._changes.set(n.key,i)}),fn(this,"reset",n=>{this.set(n,e5t)}),this._store=e,this._treeState=t,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;let e=r5t(this._treeState);for(let[t,n]of this._changes)o5t(e,t,QVt(n));return i5t(this._store,e),e}};function a5t(r){return e=>{r.replaceState(t=>{let n=new F$(r,t);return e(n),n.newTreeState_INTERNAL()})}}var s5t={atomicUpdater:a5t},l5t=s5t.atomicUpdater,u5t=Object.freeze({__proto__:null,atomicUpdater:l5t});function c5t(r,e){let t=new Map;for(let[n,i]of r)e(i,n)&&t.set(n,i);return t}var f5t=c5t;function h5t(r,e){let t=new Set;for(let n of r)e(n)&&t.add(n);return t}var p5t=h5t;function d5t(r,e){if(!r)throw new Error(e)}var m5t=d5t,rO=m5t;function v5t(...r){let e=new Map;for(let t=0;t<r.length;t++){let n=r[t].keys(),i;for(;!(i=n.next()).done;)e.set(i.value,r[t].get(i.value))}return e}var g5t=v5t;function y5t(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}var _5t=y5t;var{useRef:x5t}=Sa.default;function w5t(){let r=x5t();if(0&&Yn("recoil_infer_component_names"))var e;return"<component name not available>"}var a6=w5t,{atomicUpdater:DMe}=u5t,{batchUpdates:s6}=t6,{DEFAULT_VALUE:pO,getNode:NMe,nodes:b5t}=Jl,{useRecoilMutableSource:S5t,useStoreRef:cl}=hO,{isRecoilValue:mTr}=ad,{AbstractRecoilValue:l6,getRecoilValueAsLoadable:TS,setRecoilValue:k_,setRecoilValueLoadable:E5t,setUnvalidatedRecoilValue:I5t,subscribeToRecoilValue:u6}=pv,{updateRetainCount:xS}=OS,{RetentionZone:T5t}=sO,{Snapshot:vTr,cloneSnapshot:MS}=fO,{setByAddingToSet:A5t}=aMe,{isSSR:nO}=n6,{mutableSourceExists:C5t,useMutableSource:M5t}=oMe,{useCallback:Uu,useEffect:Xf,useMemo:kMe,useRef:od,useState:c6}=Sa.default,qMe=12e4;function jMe(r,e,t){if(r.state==="hasValue")return r.contents;throw r.state==="loading"?new Promise(i=>{t.current.getState().suspendedComponentResolvers.add(i)}):r.state==="hasError"?r.contents:new Error(`Invalid value of loadable atom "${e.key}"`)}function R5t(){let r=cl(),[e,t]=c6([]),n=od(new Set);n.current=new Set;let i=od(new Set),o=od(new Map),a=Uu(h=>{let d=o.current.get(h);d&&(d.release(),o.current.delete(h))},[o]),c=a6();return Xf(()=>{let h=r.current;function d(v,x){o.current.has(x)&&t([])}eO(n.current,i.current).forEach(v=>{if(o.current.has(v)){K$(`Double subscription to RecoilValue "${v}"`);return}let x=u6(h,new l6(v),T=>{d(T,v)},c);o.current.set(v,x),h.getState().nextTree?h.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{d(h.getState(),v)}):d(h.getState(),v)}),eO(i.current,n.current).forEach(v=>{a(v)}),i.current=n.current}),Xf(()=>{let h=o.current;return()=>h.forEach((d,v)=>a(v))},[a]),kMe(()=>{function h(L){return k=>{k_(r.current,L,k)}}function d(L){return()=>k_(r.current,L,pO)}function v(L){var k;n.current.has(L.key)||(n.current=A5t(n.current,L.key));let R=r.current.getState();return TS(r.current,L,Yn("recoil_early_rendering_2021")&&(k=R.nextTree)!==null&&k!==void 0?k:R.currentTree)}function x(L){let k=v(L);return jMe(k,L,r)}function S(L){return[x(L),h(L)]}function T(L){return[v(L),h(L)]}return{getRecoilValue:x,getRecoilValueLoadable:v,getRecoilState:S,getRecoilStateLoadable:T,getSetRecoilState:h,getResetRecoilState:d}},[n,r])}var P5t={current:0};function O5t(r){let e=cl(),t=Uu(()=>{var d;let v=e.current,x=v.getState(),S=Yn("recoil_early_rendering_2021")&&(d=x.nextTree)!==null&&d!==void 0?d:x.currentTree;return TS(v,r,S)},[e,r]),n=Uu(()=>t(),[t]),i=a6(),o=Uu((d,v)=>{let x=e.current;return u6(x,r,()=>{if(!Yn("recoil_suppress_rerender_in_callback"))return v();let T=t();h.current.is(T)||v(),h.current=T},i).release},[e,r,i,t]),a=S5t(),c=M5t(a,n,o),h=od(c);return Xf(()=>{h.current=c}),c}function L5t(r){let e=cl(),[t,n]=c6([]),i=a6();Xf(()=>{let c=e.current,h=c.getState(),d=u6(c,r,x=>{var S;if(!Yn("recoil_suppress_rerender_in_callback"))return n([]);let T=TS(c,r,c.getState().currentTree);!((S=a.current)===null||S===void 0)&&S.is(T)||n(T),a.current=T},i);if(h.nextTree)c.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a.current=null,n([])});else{var v;if(!Yn("recoil_suppress_rerender_in_callback"))return n([]);let x=TS(c,r,c.getState().currentTree);!((v=a.current)===null||v===void 0)&&v.is(x)||n(x),a.current=x}return d.release},[i,r,e]);let o=TS(e.current,r),a=od(o);return Xf(()=>{a.current=o}),o}function f6(r){return Yn("recoil_memory_managament_2020")&&UMe(r),C5t()?O5t(r):L5t(r)}function FMe(r){let e=cl(),t=f6(r);return jMe(t,r,e)}function h6(r){let e=cl();return Uu(t=>{k_(e.current,r,t)},[e,r])}function D5t(r){let e=cl();return Uu(()=>{k_(e.current,r,pO)},[e,r])}function N5t(r){return[FMe(r),h6(r)]}function k5t(r){return[f6(r),h6(r)]}function dO(r){let e=cl();Xf(()=>e.current.subscribeToTransactions(r).release,[r,e])}function YCe(r){let e=r.atomValues.toMap(),t=tO(f5t(e,(n,i)=>{let a=NMe(i).persistence_UNSTABLE;return a!=null&&a.type!=="none"&&n.state==="hasValue"}),n=>n.contents);return g5t(r.nonvalidatedAtoms.toMap(),t)}function q5t(r){dO(Uu(e=>{let t=e.getState().previousTree,n=e.getState().currentTree;t||(kc("Transaction subscribers notified without a previous tree being present -- this is a bug in Recoil"),t=e.getState().currentTree);let i=YCe(n),o=YCe(t),a=tO(b5t,h=>{var d,v,x,S;return{persistence_UNSTABLE:{type:(d=(v=h.persistence_UNSTABLE)===null||v===void 0?void 0:v.type)!==null&&d!==void 0?d:"none",backButton:(x=(S=h.persistence_UNSTABLE)===null||S===void 0?void 0:S.backButton)!==null&&x!==void 0?x:!1}}}),c=p5t(n.dirtyAtoms,h=>i.has(h)||o.has(h));r({atomValues:i,previousAtomValues:o,atomInfo:a,modifiedAtoms:c,transactionMetadata:Et({},n.transactionMetadata)})},[r]))}function j5t(r){dO(Uu(e=>{let t=MS(e,"current"),n=MS(e,"previous");r({snapshot:t,previousSnapshot:n})},[r]))}function zMe(r){let e=od();return Xf(()=>{e.current=r}),e.current}function F5t(){let r=cl(),[e,t]=c6(()=>MS(r.current)),n=zMe(e),i=od();return Xf(()=>(i.current&&!nO&&window.clearTimeout(i.current),e.retain()),[e]),dO(Uu(o=>t(MS(o)),[])),n!==e&&!nO&&(i.current&&(n==null||n.release_INTERNAL(),window.clearTimeout(i.current)),e.retain(),i.current=window.setTimeout(()=>{e.release_INTERNAL(),i.current=null},qMe)),e}function BMe(){let r=cl();return Uu(e=>{var t;let n=r.current.getState(),i=(t=n.nextTree)!==null&&t!==void 0?t:n.currentTree,o=e.getStore_INTERNAL().getState().currentTree;s6(()=>{let a=new Set;for(let d of[i.atomValues.keys(),o.atomValues.keys()])for(let v of d){var c,h;((c=i.atomValues.get(v))===null||c===void 0?void 0:c.contents)!==((h=o.atomValues.get(v))===null||h===void 0?void 0:h.contents)&&NMe(v).shouldRestoreFromSnapshots&&a.add(v)}a.forEach(d=>{E5t(r.current,new l6(d),o.atomValues.has(d)?Pn(o.atomValues.get(d)):pO)}),r.current.replaceState(d=>Sn(Et({},d),{stateID:e.getID_INTERNAL()}))})},[r])}function z5t(){let r=cl();return(e,t={})=>{s6(()=>{r.current.addTransactionMetadata(t),e.forEach((n,i)=>I5t(r.current,new l6(i),n))})}}var iO=class{},B5t=new iO;function U5t(r,e){let t=cl(),n=BMe();return Uu((...i)=>{function o(v,x){k_(t.current,v,x)}function a(v){k_(t.current,v,pO)}let c=MS(t.current),h=DMe(t.current),d=B5t;return s6(()=>{let v="useRecoilCallback expects a function that returns a function: it accepts a function of the type (RecoilInterface) => T = R and returns a callback function T => R, where RecoilInterface is an object {snapshot, set, ...} and T and R are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof r!="function")throw new Error(v);let x=r({set:o,reset:a,snapshot:c,gotoSnapshot:n,transact_UNSTABLE:h});if(typeof x!="function")throw new Error(v);d=x(...i)}),d instanceof iO&&rO(!1),d},e!=null?[...e,t]:void 0)}function UMe(r){if(Yn("recoil_memory_managament_2020"))return V5t(r)}function V5t(r){let t=(Array.isArray(r)?r:[r]).map(a=>a instanceof T5t?a:a.key),n=cl();Xf(()=>{if(!Yn("recoil_memory_managament_2020"))return;let a=n.current;if(i.current&&!nO)window.clearTimeout(i.current),i.current=null;else for(let c of t)xS(a,c,1);return()=>{for(let c of t)xS(a,c,-1)}},[n,...t]);let i=od(),o=zMe(t);if(!nO&&(o===void 0||!_5t(o,t))){let a=n.current;for(let c of t)xS(a,c,1);if(o)for(let c of o)xS(a,c,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(let c of t)xS(a,c,-1)},qMe)}}function G5t(r,e){let t=cl();return kMe(()=>(...n)=>{DMe(t.current)(o=>{r(o)(...n)})},e!=null?[...e,t]:void 0)}var $5t={recoilComponentGetRecoilValueCount_FOR_TESTING:P5t,useGotoRecoilSnapshot:BMe,useRecoilCallback:U5t,useRecoilInterface:R5t,useRecoilSnapshot:F5t,useRecoilState:N5t,useRecoilStateLoadable:k5t,useRecoilTransaction:G5t,useRecoilTransactionObserver:j5t,useRecoilValue:FMe,useRecoilValueLoadable:f6,useRetain:UMe,useResetRecoilState:D5t,useSetRecoilState:h6,useSetUnvalidatedAtomValues:z5t,useTransactionObservation_DEPRECATED:q5t,useTransactionSubscription_DEPRECATED:dO},{peekNodeInfo:H5t}=q_,{useStoreRef:W5t}=hO;function Z5t(){let r=W5t();return({key:e})=>H5t(r.current,r.current.getState().currentTree,e)}var Y5t=Z5t,{RecoilRoot:K5t,useStoreRef:X5t}=hO,{useMemo:J5t}=Sa.default;function Q5t(){let r=X5t().current;return J5t(()=>{function e({children:t}){return Sa.default.createElement(K5t,{store_INTERNAL:r},t)}return e},[r])}var eGt=Q5t;var{isReactNative:gTr,isSSR:yTr}=n6;function Bu(r,e,t){if(typeof r=="string"&&!r.includes("\"")&&!r.includes("\\"))return`"${r}"`;switch(typeof r){case"undefined":return"";case"boolean":return r?"true":"false";case"number":case"symbol":return String(r);case"string":return JSON.stringify(r);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw new Error("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${r.name})__`;}if(r===null)return"null";if(typeof r!="object"){var n;return(n=JSON.stringify(r))!==null&&n!==void 0?n:""}if(Zi(r))return"__PROMISE__";if(Array.isArray(r))return`[${r.map((i,o)=>Bu(i,e,o.toString()))}]`;if(typeof r.toJSON=="function")return Bu(r.toJSON(t),e,t);if(r instanceof Map){let i={};for(let[o,a]of r)i[typeof o=="string"?o:Bu(o,e)]=a;return Bu(i,e,t)}return r instanceof Set?Bu(Array.from(r).sort((i,o)=>Bu(i,e).localeCompare(Bu(o,e))),e,t):Symbol!==void 0&&r[Symbol.iterator]!=null&&typeof r[Symbol.iterator]=="function"?Bu(Array.from(r),e,t):`{${Object.keys(r).filter(i=>r[i]!==void 0).sort().map(i=>`${Bu(i,e)}:${Bu(r[i],e,i)}`).join(",")}}`}function tGt(r,e={allowFunctions:!1}){return Bu(r,e)}var mO=tGt,z$=class{constructor(e){var t,n,i;fn(this,"_numLeafs",void 0),fn(this,"_root",void 0),fn(this,"_onHit",void 0),fn(this,"_onSet",void 0),fn(this,"_mapNodeValue",void 0),this._numLeafs=0,this._root=null,this._onHit=(t=e==null?void 0:e.onHit)!==null&&t!==void 0?t:()=>{},this._onSet=(n=e==null?void 0:e.onSet)!==null&&n!==void 0?n:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:o=>o}size(){return this._numLeafs}root(){return this._root}get(e,t){var n;return(n=this.getLeafNode(e,t))===null||n===void 0?void 0:n.value}getLeafNode(e,t){return VMe(this.root(),n=>this._mapNodeValue(e(n)),{onNodeVisit:n=>{t==null||t.onNodeVisit(n),n.type==="leaf"&&this._onHit(n)}})}set(e,t,n){let i,o=B$(this.root(),e.map(([a,c])=>[a,this._mapNodeValue(c)]),null,t,null,{onNodeVisit:a=>{n==null||n.onNodeVisit(a),a.type==="leaf"&&(i=a)}});this.root()||(this._root=o),this._numLeafs++,this._onSet(Pn(i))}delete(e){if(!this.root())return!1;let t=Pn(this.root());return rGt(t,e,e.parent)?e===t||t.type==="branch"&&!t.branches.size?(this._root=null,this._numLeafs=0,!0):(this._numLeafs-=$Me(e),!0):!1}clear(){this._numLeafs=0,this._root=null}},VMe=(r,e,t)=>{var n;if(r==null)return;if(t==null||(n=t.onNodeVisit)===null||n===void 0||n.call(t,r),r.type==="leaf")return r;let i=e(r.nodeKey);return VMe(r.branches.get(i),e,t)},B$=(r,e,t,n,i,o)=>{var a;let c;if(r==null){if(e.length===0)c={type:"leaf",value:n,parent:t,branchKey:i};else{let[h,...d]=e,[v,x]=h;c={type:"branch",nodeKey:v,parent:t,branches:new Map,branchKey:i},c.branches.set(x,B$(null,d,c,n,x,o))}}else if(c=r,e.length){let[h,...d]=e,[v,x]=h;r.type==="branch"&&r.nodeKey===v||rO(!1),r.branches.set(x,B$(r.branches.get(x),d,r,n,x,o))}return o==null||(a=o.onNodeVisit)===null||a===void 0||a.call(o,c),c},rGt=(r,e,t)=>t?(t.branches.delete(e.branchKey),GMe(r,t,t.parent)):r===e,GMe=(r,e,t)=>t?(e.branches.size===0&&t.branches.delete(e.branchKey),GMe(r,t,t.parent)):r===e,$Me=r=>r.type==="leaf"?1:Array.from(r.branches.values()).reduce((e,t)=>e+$Me(t),0),nGt={TreeCache:z$},iGt=nGt.TreeCache,HMe=Object.freeze({__proto__:null,TreeCache:iGt}),U$=class{constructor(e){var t;fn(this,"_maxSize",void 0),fn(this,"_size",void 0),fn(this,"_head",void 0),fn(this,"_tail",void 0),fn(this,"_map",void 0),fn(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(t=e.mapKey)!==null&&t!==void 0?t:n=>n}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){let t=this._keyMapper(e),n=this._map.get(t);if(n)return this.set(e,n.value),n.value}set(e,t){let n=this._keyMapper(e);this._map.get(n)&&this.delete(e);let o=this.head(),a={key:e,right:o,left:null,value:t};o?o.left=a:this._tail=a,this._map.set(n,a),this._head=a,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){let e=this.tail();e&&this.delete(e.key)}delete(e){let t=this._keyMapper(e);if(!this._size||!this._map.has(t))return;let n=Pn(this._map.get(t)),i=n.right,o=n.left;i&&(i.left=n.left),o&&(o.right=n.right),n===this.head()&&(this._head=i),n===this.tail()&&(this._tail=o),this._map.delete(t),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}},oGt={LRUCache:U$},aGt=oGt.LRUCache,WMe=Object.freeze({__proto__:null,LRUCache:aGt}),{LRUCache:sGt}=WMe,{TreeCache:lGt}=HMe;function uGt(r,e=t=>t){let t=new sGt({maxSize:r}),n=new lGt({mapNodeValue:e,onHit:i=>{t.set(i,!0)},onSet:i=>{let o=t.tail();t.set(i,!0),o&&n.size()>r&&n.delete(o.key)}});return n}var KCe=uGt,{TreeCache:cGt}=HMe,VP={equality:"reference",eviction:"keep-all",maxSize:1/0};function fGt({equality:r=VP.equality,eviction:e=VP.eviction,maxSize:t=VP.maxSize}=VP){let n=hGt(r);return pGt(e,t,n)}function hGt(r){switch(r){case"reference":return e=>e;case"value":return e=>mO(e);}throw new Error(`Unrecognized equality policy ${r}`)}function pGt(r,e,t){switch(r){case"keep-all":return new cGt({mapNodeValue:t});case"lru":return KCe(Pn(e),t);case"most-recent":return KCe(1,t);}throw new Error(`Unrecognized eviction policy ${r}`)}var dGt=fGt;function mGt(r){return()=>null}var vGt={startPerfBlock:mGt},{CANCELED:wS,Canceled:gGt,loadableWithError:bS,loadableWithPromise:yGt,loadableWithValue:C$}=RS,{getNodeLoadable:XCe,peekNodeLoadable:_Gt,setNodeValue:xGt}=q_,{saveDependencyMapToStore:wGt}=PS,{DEFAULT_VALUE:bGt,RecoilValueNotReady:SGt,getConfigDeletionHandler:EGt,registerNode:JCe}=Jl,{isRecoilValue:IGt}=ad,{AbstractRecoilValue:TGt}=ad,{setRecoilValueLoadable:AGt}=pv,{retainedByOptionWithDefault:CGt}=OS,{cloneSnapshot:MGt}=fO,{startPerfBlock:RGt}=vGt,SS=[],GP=new Map,PGt=(()=>{let r=0;return()=>r++})();function OGt(){return{depValuesDiscoveredSoFarDuringAsyncWork:null,latestLoadable:null,latestExecutionId:null,stateVersion:null}}function LGt(r){let{key:e,get:t,cachePolicy_UNSTABLE:n}=r,i=r.set!=null?r.set:void 0,o=dGt(n!=null?n:{equality:"reference",eviction:"keep-all"}),a=CGt(r.retainedBy_UNSTABLE),c=new Map,h=0;function d(){return!Yn("recoil_memory_managament_2020")||h>0}function v(Le){return c.has(Le)||c.set(Le,OGt()),Pn(c.get(Le))}function x(Le){return h++,Le.getState().knownSelectors.add(e),()=>{h--,Le.getState().knownSelectors.delete(e),c.delete(Le)}}function S(){return EGt(e)!==void 0&&!d()}function T(Le,Ye,Fe){if(Ye.state==="loading"){let Ze=GP.get(Fe);Ze==null&&GP.set(Fe,Ze=new Set),Ze.add(Le)}}function L(Le,Ye){let Fe=GP.get(Ye);if(Fe!==void 0){for(let Ze of Fe)AGt(Ze,new TGt(e),Le);GP.delete(Ye)}}function k(Le,Ye,Fe){let Ze=Le.getState().knownSelectors.has(Fe);if(Ze&&Ye.atomValues.has(Fe))return Pn(Ye.atomValues.get(Fe));let tt=XCe(Le,Ye,Fe);return tt.state!=="loading"&&Ze&&Ye.atomValues.set(Fe,tt),tt}function R(Le,Ye,Fe,Ze,tt){return Ye.then(Qe=>{if(!d())return Te(Le,tt),wS;let Dt=C$(Qe);return Ge(Fe,ie(Ze),Dt),B(Le,Fe,new Set(Ze.keys()),tt),j(Le,Dt,tt),{__value:Qe,__key:e}}).catch(Qe=>{if(!d())return Te(Le,tt),wS;if(Se(Le,tt)&&We(Ze,Le,tt),Zi(Qe))return D(Le,Qe,Fe,Ze,tt);let Dt=bS(Qe);throw Ge(Fe,ie(Ze),Dt),B(Le,Fe,new Set(Ze.keys()),tt),j(Le,Dt,tt),Qe})}function D(Le,Ye,Fe,Ze,tt){return Ye.then(Qe=>{if(!d())return Te(Le,tt),wS;if(Qe instanceof gGt)return kc("Selector was released while it had dependencies"),wS;let{__key:Dt,__value:Kt}=Qe!=null?Qe:{},_t=!0;Dt!=null&&(Fe.atomValues.set(Dt,C$(Kt)),_t=!1);let be=J(Le,Fe);if(be&&be.state==="hasValue")return ke(be,Le),{__value:be.contents,__key:e};if(!Se(Le,tt)){var jt;let nr=_e(Fe);if((nr==null||(jt=nr.latestLoadable)===null||jt===void 0?void 0:jt.state)==="loading")return nr.latestLoadable.contents}let[Qt,Ft]=ee(Le,Fe,tt,_t);if(Se(Le,tt)&&We(Ft,Le,tt),Ae(Qt),Qt.state!=="loading"&&(Ge(Fe,ie(Ft),Qt),B(Le,Fe,new Set(Ft.keys()),tt),j(Le,Qt,tt)),Qt.state==="hasError")throw Qt.contents;return Qt.state==="hasValue"?{__value:Qt.contents,__key:e}:Qt.contents}).catch(Qe=>{if(!d())return Te(Le,tt),wS;let Dt=bS(Qe);throw Ge(Fe,ie(Ze),bS(Qe)),B(Le,Fe,new Set(Ze.keys()),tt),j(Le,Dt,tt),Qe})}function j(Le,Ye,Fe){Se(Le,Fe)&&(ke(Ye,Le),L(Ye,Fe))}function B(Le,Ye,Fe,Ze){var tt,Qe,Dt,Kt;if(Se(Le,Ze)||Ye.version===((tt=Le.getState())===null||tt===void 0||(Qe=tt.currentTree)===null||Qe===void 0?void 0:Qe.version)||Ye.version===((Dt=Le.getState())===null||Dt===void 0||(Kt=Dt.nextTree)===null||Kt===void 0?void 0:Kt.version)){var _t,be,jt;wGt(new Map([[e,Fe]]),Le,(_t=(be=Le.getState())===null||be===void 0||(jt=be.nextTree)===null||jt===void 0?void 0:jt.version)!==null&&_t!==void 0?_t:Le.getState().currentTree.version)}}function $(Le,Ye,Fe,Ze,tt){Fe.add(Ze),B(Le,Ye,Fe,tt)}function ee(Le,Ye,Fe,Ze=!1){let tt=RGt(e),Qe,Dt=!1,Kt,_t=new Map,be=new Set;B(Le,Ye,be,Fe);function jt(nr){let{key:or}=nr;$(Le,Ye,be,or,Fe);let Wt=Ze?XCe(Le,Ye,or):k(Le,Ye,or);if(Ae(Wt),_t.set(or,Wt),Wt.state==="hasValue")return Wt.contents;throw Wt.contents}let Qt=!1,Ft=nr=>(...or)=>{if(!Qt)throw new Error("getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can obtain the current Recoil state without a subscription.");let Wt=MGt(Le),lr=nr({snapshot:Wt});if(typeof lr!="function")throw new Error("getCallback() expects a function that returns a function.");return lr(...or)};try{Qe=t({get:jt,getCallback:Ft}),Qe=IGt(Qe)?jt(Qe):Qe,Qt=!0,Zi(Qe)?Qe=R(Le,Qe,Ye,_t,Fe).finally(tt):tt()}catch(nr){Qe=nr,Zi(Qe)?Qe=D(Le,Qe,Ye,_t,Fe).finally(tt):(Dt=!0,tt())}return Dt?Kt=bS(Qe):Zi(Qe)?Kt=yGt(Qe):Kt=C$(Qe),Ae(Kt),[Kt,_t]}function J(Le,Ye){let Fe=new Set,Ze=v(Le),tt=o.get(Qe=>(typeof Qe!="string"&&rO(!1),k(Le,Ye,Qe).contents),{onNodeVisit:Qe=>{Qe.type==="branch"&&Qe.nodeKey!==e&&typeof Qe.nodeKey=="string"&&Fe.add(Qe.nodeKey)}});return tt&&B(Le,Ye,Fe,Ze.latestExecutionId),tt}function ie(Le){return Array.from(Le.entries()).map(([Ye,Fe])=>[Ye,Fe.contents])}function ue(Le,Ye){let Fe=PGt(),[Ze,tt]=ee(Le,Ye,Fe);return ke(Ze,Le,tt,Fe,Ye),Ve(Ye,ie(tt),Ze),T(Le,Ze,Fe),Ze}function le(Le,Ye){let Fe=J(Le,Ye);if(Fe!=null)return ke(Fe,Le),Fe;let Ze=_e(Ye);if(Ze){let tt=Ze;return T(Le,Pn(tt.latestLoadable),Pn(tt.latestExecutionId)),Pn(tt.latestLoadable)}return ue(Le,Ye)}function _e(Le){var Ye;let[,Fe]=(Ye=Array.from(c.entries()).find(([Ze,tt])=>tt.latestLoadable!=null&&tt.latestExecutionId!=null&&!ze(Ze,Le)))!==null&&Ye!==void 0?Ye:[];return Fe}let Re=new Map;function ze(Le,Ye){var Fe,Ze;let tt=v(Le),Qe=(Fe=tt.depValuesDiscoveredSoFarDuringAsyncWork)!==null&&Fe!==void 0?Fe:new Map,Dt=Array(((Ze=Re.get(Ye.version))!==null&&Ze!==void 0?Ze:new Map).entries()),Kt=Re.has(Ye.version)&&Dt.length===Qe.size&&Dt.every(([_t,be])=>Qe.get(_t)===be);return Qe==null||Ye.version===tt.stateVersion||Kt?!1:(Re.set(Ye.version,new Map(Qe)),Array.from(Qe).some(([_t,be])=>k(Le,Ye,_t).contents!==be.contents))}function ke(Le,Ye,Fe,Ze,tt){let Qe=v(Ye);Le.state==="loading"?(Qe.depValuesDiscoveredSoFarDuringAsyncWork=Fe,Qe.latestExecutionId=Ze,Qe.latestLoadable=Le,Qe.stateVersion=tt==null?void 0:tt.version):(Qe.depValuesDiscoveredSoFarDuringAsyncWork=null,Qe.latestExecutionId=null,Qe.latestLoadable=null,Qe.stateVersion=null)}function Ve(Le,Ye,Fe){Fe.state!=="loading"&&Ge(Le,Ye,Fe)}function We(Le,Ye,Fe){let Ze=v(Ye);Se(Ye,Fe)&&(Ze.depValuesDiscoveredSoFarDuringAsyncWork=Le)}function Te(Le,Ye){Se(Le,Ye)&&c.delete(Le)}function Se(Le,Ye){let Fe=v(Le);return Ye===Fe.latestExecutionId}function Ae(Le){Le.state!=="loading"&&(Le.contents,void 0)}function $e(Le){}function Ge(Le,Ye,Fe){Le.atomValues.set(e,Fe),o.set(Ye,Fe)}function Ke(Le){if(SS.includes(e)){let Ye=`Recoil selector has circular dependencies: ${SS.slice(SS.indexOf(e)).join(" \u2192 ")}`;return bS(new Error(Ye))}SS.push(e);try{return Le()}finally{SS.pop()}}function Pe(Le,Ye){return o.get(Ze=>{typeof Ze!="string"&&rO(!1);let tt=_Gt(Le,Ye,Ze);return tt==null?void 0:tt.contents})}function at(Le,Ye){return Ke(()=>le(Le,Ye))}function Tt(Le){Le.atomValues.delete(e)}return i!=null?JCe({key:e,nodeType:"selector",peek:Pe,get:at,set:(Ye,Fe,Ze)=>{let tt=!1,Qe=new Map;function Dt({key:jt}){if(tt)throw new Error("Recoil: Async selector sets are not currently supported.");let Qt=k(Ye,Fe,jt);if(Ae(Qt),Qt.state==="hasValue")return Qt.contents;throw Qt.state==="loading"?new SGt(jt):Qt.contents}function Kt(jt,Qt){if(tt)throw new Error("Recoil: Async selector sets are not currently supported.");let Ft=typeof Qt=="function"?Qt(Dt(jt)):Qt;xGt(Ye,Fe,jt.key,Ft).forEach((or,Wt)=>Qe.set(Wt,or))}function _t(jt){Kt(jt,bGt)}let be=i({set:Kt,get:Dt,reset:_t},Ze);if(be!==void 0)throw Zi(be)?new Error("Recoil: Async selector sets are not currently supported."):new Error("Recoil: selector set should be a void function.");return tt=!0,Qe},init:x,invalidate:Tt,shouldDeleteConfigOnRelease:S,dangerouslyAllowMutability:r.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:a}):JCe({key:e,nodeType:"selector",peek:Pe,get:at,init:x,invalidate:Tt,shouldDeleteConfigOnRelease:S,dangerouslyAllowMutability:r.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:a})}var oO=LGt,{loadableWithError:QCe,loadableWithPromise:eMe,loadableWithValue:ES}=RS,{DEFAULT_VALUE:fv,DefaultValue:O_,getConfigDeletionHandler:ZMe,registerNode:DGt,setConfigDeletionHandler:NGt}=Jl,{isRecoilValue:kGt}=ad,{markRecoilValueModified:qGt,setRecoilValue:tMe,setRecoilValueLoadable:jGt}=pv,{retainedByOptionWithDefault:FGt}=OS;function zGt(r){let{key:e,persistence_UNSTABLE:t}=r,n=FGt(r.retainedBy_UNSTABLE),i=0,o=Zi(r.default)?eMe(r.default.then(R=>(o=ES(R),{__key:e,__value:R})).catch(R=>{throw o=QCe(R),R})):ES(r.default),a,c=new Map;function h(R,D){let j=D.then(B=>{var $,ee;return((ee=(($=R.getState().nextTree)!==null&&$!==void 0?$:R.getState().currentTree).atomValues.get(e))===null||ee===void 0?void 0:ee.contents)===j&&tMe(R,k,B),{__key:e,__value:B}}).catch(B=>{var $,ee;throw((ee=(($=R.getState().nextTree)!==null&&$!==void 0?$:R.getState().currentTree).atomValues.get(e))===null||ee===void 0?void 0:ee.contents)===j&&jGt(R,k,QCe(B)),B});return j}function d(R,D,j){i++;let B=R.getState().knownAtoms.has(e);if(R.getState().knownAtoms.add(e),o.state==="loading"){let le=()=>{var _e;((_e=R.getState().nextTree)!==null&&_e!==void 0?_e:R.getState().currentTree).atomValues.has(e)||qGt(R,k)};o.contents.then(le).catch(le)}let $=fv,ee=null;if(r.effects_UNSTABLE!=null&&!B){let le=!0,_e=ke=>Ve=>{if(le){let We=$ instanceof O_||Zi($)?o.state==="hasValue"?o.contents:fv:$;$=typeof Ve=="function"?Ve(We):Ve,Zi($)&&($=$.then(Te=>(ee={effect:ke,value:Te},Te)))}else{if(Zi(Ve))throw new Error("Setting atoms to async values is not implemented.");typeof Ve!="function"&&(ee={effect:ke,value:Ve}),tMe(R,k,typeof Ve=="function"?We=>{let Te=Ve(We);return ee={effect:ke,value:Te},Te}:Ve)}},Re=ke=>()=>_e(ke)(fv),ze=ke=>Ve=>{R.subscribeToTransactions(We=>{var Te;let{currentTree:Se,previousTree:Ae}=We.getState();Ae||(kc("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),Ae=Se);let $e=(Te=Se.atomValues.get(e))!==null&&Te!==void 0?Te:o;if($e.state==="hasValue"){var Ge,Ke,Pe,at;let Tt=$e.contents,Le=(Ge=Ae.atomValues.get(e))!==null&&Ge!==void 0?Ge:o,Ye=Le.state==="hasValue"?Le.contents:fv;((Ke=ee)===null||Ke===void 0?void 0:Ke.effect)!==ke||((Pe=ee)===null||Pe===void 0?void 0:Pe.value)!==Tt?Ve(Tt,Ye):((at=ee)===null||at===void 0?void 0:at.effect)===ke&&(ee=null)}},e)};for(let ke of(J=r.effects_UNSTABLE)!==null&&J!==void 0?J:[]){var J;let Ve=ke({node:k,trigger:j,setSelf:_e(ke),resetSelf:Re(ke),onSet:ze(ke)});if(Ve!=null){var ie;c.set(R,[...((ie=c.get(R))!==null&&ie!==void 0?ie:[]),Ve])}}le=!1}if(!($ instanceof O_)){var ue;let le=Zi($)?eMe(h(R,$)):ES($);D.atomValues.set(e,le),(ue=R.getState().nextTree)===null||ue===void 0||ue.atomValues.set(e,le)}return()=>{var le;i--,(le=c.get(R))===null||le===void 0||le.forEach(_e=>_e()),c.delete(R),R.getState().knownAtoms.delete(e)}}function v(R,D){var j,B,$;return(j=(B=D.atomValues.get(e))!==null&&B!==void 0?B:($=a)===null||$===void 0?void 0:$[1])!==null&&j!==void 0?j:o}function x(R,D){if(D.atomValues.has(e))return Pn(D.atomValues.get(e));if(D.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(t==null)return K$(`Tried to restore a persisted value for atom ${e} but it has no persistence settings.`),o;let j=D.nonvalidatedAtoms.get(e),B=t.validator(j,fv);return a=B instanceof O_?o:ES(B),a}else return o}function S(){a=void 0}function T(R,D,j){if(D.atomValues.has(e)){let B=Pn(D.atomValues.get(e));if(B.state==="hasValue"&&j===B.contents)return new Map}else if(!D.nonvalidatedAtoms.has(e)&&j instanceof O_)return new Map;return a=void 0,new Map().set(e,ES(j))}function L(){return ZMe(e)!==void 0&&i<=0}let k=DGt({key:e,nodeType:"atom",peek:v,get:x,set:T,init:d,invalidate:S,shouldDeleteConfigOnRelease:L,dangerouslyAllowMutability:r.dangerouslyAllowMutability,persistence_UNSTABLE:r.persistence_UNSTABLE?{type:r.persistence_UNSTABLE.type,backButton:r.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:n});return k}function YMe(r){let n=r,{default:e}=n,t=fo(n,["default"]);return kGt(e)?BGt(Sn(Et({},t),{default:e})):zGt(Sn(Et({},t),{default:e}))}function BGt(r){let e=YMe(Sn(Et({},r),{default:fv,persistence_UNSTABLE:r.persistence_UNSTABLE===void 0?void 0:Sn(Et({},r.persistence_UNSTABLE),{validator:n=>n instanceof O_?n:Pn(r.persistence_UNSTABLE).validator(n,fv)}),effects_UNSTABLE:r.effects_UNSTABLE})),t=oO({key:`${r.key}__withFallback`,get:({get:n})=>{let i=n(e);return i instanceof O_?r.default:i},set:({set:n},i)=>n(e,i),dangerouslyAllowMutability:r.dangerouslyAllowMutability});return NGt(t.key,ZMe(r.key)),t}var KMe=YMe,V$=class{constructor(e){var t;fn(this,"_map",void 0),fn(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(t=e==null?void 0:e.mapKey)!==null&&t!==void 0?t:n=>n}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,t){this._map.set(this._keyMapper(e),t)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}},UGt={MapCache:V$},VGt=UGt.MapCache,GGt=Object.freeze({__proto__:null,MapCache:VGt}),{LRUCache:rMe}=WMe,{MapCache:$Gt}=GGt,$P={equality:"reference",eviction:"none",maxSize:1/0};function HGt({equality:r=$P.equality,eviction:e=$P.eviction,maxSize:t=$P.maxSize}=$P){let n=WGt(r);return ZGt(e,t,n)}function WGt(r){switch(r){case"reference":return e=>e;case"value":return e=>mO(e);}throw new Error(`Unrecognized equality policy ${r}`)}function ZGt(r,e,t){switch(r){case"keep-all":return new $Gt({mapKey:t});case"lru":return new rMe({mapKey:t,maxSize:Pn(e)});case"most-recent":return new rMe({mapKey:t,maxSize:1});}throw new Error(`Unrecognized eviction policy ${r}`)}var XMe=HGt,{setConfigDeletionHandler:YGt}=Jl;function KGt(r){var e,t;let n=XMe({equality:(e=(t=r.cachePolicyForParams_UNSTABLE)===null||t===void 0?void 0:t.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var o;let a=n.get(i);if(a!=null)return a;let v=r,{cachePolicyForParams_UNSTABLE:c}=v,h=fo(v,["cachePolicyForParams_UNSTABLE"]),d=KMe(Sn(Et({},h),{key:`${r.key}__${(o=mO(i))!==null&&o!==void 0?o:"void"}`,default:typeof r.default=="function"?r.default(i):r.default,retainedBy_UNSTABLE:typeof r.retainedBy_UNSTABLE=="function"?r.retainedBy_UNSTABLE(i):r.retainedBy_UNSTABLE,effects_UNSTABLE:typeof r.effects_UNSTABLE=="function"?r.effects_UNSTABLE(i):r.effects_UNSTABLE}));return n.set(i,d),YGt(d.key,()=>{n.delete(i)}),d}}var XGt=KGt,{setConfigDeletionHandler:JGt}=Jl,QGt=0;function e$t(r){var e,t;let n=XMe({equality:(e=(t=r.cachePolicyForParams_UNSTABLE)===null||t===void 0?void 0:t.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var o;let a=n.get(i);if(a!=null)return a;let c=`${r.key}__selectorFamily/${(o=mO(i,{allowFunctions:!0}))!==null&&o!==void 0?o:"void"}/${QGt++}`,h=S=>r.get(i)(S),d=r.cachePolicy_UNSTABLE,v=typeof r.retainedBy_UNSTABLE=="function"?r.retainedBy_UNSTABLE(i):r.retainedBy_UNSTABLE,x;if(r.set!=null){let S=r.set;x=oO({key:c,get:h,set:(L,k)=>S(i)(L,k),cachePolicy_UNSTABLE:d,dangerouslyAllowMutability:r.dangerouslyAllowMutability,retainedBy_UNSTABLE:v})}else x=oO({key:c,get:h,cachePolicy_UNSTABLE:d,dangerouslyAllowMutability:r.dangerouslyAllowMutability,retainedBy_UNSTABLE:v});return n.set(i,x),JGt(x.key,()=>{n.delete(i)}),x}}var sd=e$t,t$t=sd({key:"__constant",get:r=>()=>r,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function r$t(r){return t$t(r)}var n$t=r$t,i$t=sd({key:"__error",get:r=>()=>{throw new Error(r)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function o$t(r){return i$t(r)}var a$t=o$t;function s$t(r){return r}var l$t=s$t,{loadableWithError:JMe,loadableWithPromise:QMe,loadableWithValue:eRe}=RS;function vO(r,e){let t=Array(e.length).fill(void 0),n=Array(e.length).fill(void 0);for(let[i,o]of e.entries())try{t[i]=r(o)}catch(a){n[i]=a}return[t,n]}function u$t(r){return r!=null&&!Zi(r)}function gO(r){return Array.isArray(r)?r:Object.getOwnPropertyNames(r).map(e=>r[e])}function p6(r){return r!=null&&typeof r=="object"&&r.hasOwnProperty("__value")?r.__value:r}function G$(r,e){return Array.isArray(r)?e:Object.getOwnPropertyNames(r).reduce((t,n,i)=>Sn(Et({},t),{[n]:e[i]}),{})}function D_(r,e,t){let n=t.map((i,o)=>i==null?eRe(e[o]):Zi(i)?QMe(i):JMe(i));return G$(r,n)}function c$t(r,e){return e.map((t,n)=>t===void 0?r[n]:t)}var f$t=sd({key:"__waitForNone",get:r=>({get:e})=>{let t=gO(r),[n,i]=vO(e,t);return D_(r,n,i)},dangerouslyAllowMutability:!0}),h$t=sd({key:"__waitForAny",get:r=>({get:e})=>{let t=gO(r),[n,i]=vO(e,t);return i.some(o=>!Zi(o))?D_(r,n,i):new Promise(o=>{for(let[a,c]of i.entries())Zi(c)&&c.then(h=>{n[a]=p6(h),i[a]=void 0,o(D_(r,n,i))}).catch(h=>{i[a]=h,o(D_(r,n,i))})})},dangerouslyAllowMutability:!0}),p$t=sd({key:"__waitForAll",get:r=>({get:e})=>{let t=gO(r),[n,i]=vO(e,t);if(i.every(a=>a==null))return G$(r,n);let o=i.find(u$t);if(o!=null)throw o;return Promise.all(i).then(a=>G$(r,c$t(n,a).map(p6)))},dangerouslyAllowMutability:!0}),d$t=sd({key:"__waitForAllSettled",get:r=>({get:e})=>{let t=gO(r),[n,i]=vO(e,t);return i.every(o=>!Zi(o))?D_(r,n,i):Promise.all(i.map((o,a)=>Zi(o)?o.then(c=>{n[a]=p6(c),i[a]=void 0}).catch(c=>{n[a]=void 0,i[a]=c}):null)).then(()=>D_(r,n,i))},dangerouslyAllowMutability:!0}),m$t=sd({key:"__noWait",get:r=>({get:e})=>{try{return eRe(e(r))}catch(t){return Zi(t)?QMe(t):JMe(t)}},dangerouslyAllowMutability:!0}),v$t={waitForNone:f$t,waitForAny:h$t,waitForAll:p$t,waitForAllSettled:d$t,noWait:m$t},{batchUpdates:g$t,setBatcher:y$t}=t6,{DefaultValue:_$t}=Jl,{RecoilRoot:x$t}=hO,{isRecoilValue:w$t}=ad,{retentionZone:b$t}=sO,{freshSnapshot:S$t}=fO,{useGotoRecoilSnapshot:E$t,useRecoilCallback:I$t,useRecoilSnapshot:T$t,useRecoilState:A$t,useRecoilStateLoadable:C$t,useRecoilTransaction:M$t,useRecoilTransactionObserver:R$t,useRecoilValue:P$t,useRecoilValueLoadable:O$t,useResetRecoilState:L$t,useRetain:D$t,useSetRecoilState:N$t,useSetUnvalidatedAtomValues:k$t,useTransactionObservation_DEPRECATED:q$t}=$5t,{noWait:j$t,waitForAll:F$t,waitForAllSettled:z$t,waitForAny:B$t,waitForNone:U$t}=v$t,an={DefaultValue:_$t,RecoilRoot:x$t,useRecoilBridgeAcrossReactRoots_UNSTABLE:eGt,atom:KMe,selector:oO,retentionZone:b$t,atomFamily:XGt,selectorFamily:sd,constSelector:n$t,errorSelector:a$t,readOnlySelector:l$t,useRecoilValue:P$t,useRecoilValueLoadable:O$t,useRecoilState:A$t,useRecoilStateLoadable:C$t,useSetRecoilState:N$t,useResetRecoilState:L$t,useGetRecoilValueInfo_UNSTABLE:Y5t,useRetain:D$t,useRecoilCallback:I$t,useRecoilTransaction_UNSTABLE:M$t,useGotoRecoilSnapshot:E$t,useRecoilSnapshot:T$t,useRecoilTransactionObserver_UNSTABLE:R$t,useTransactionObservation_UNSTABLE:q$t,useSetUnvalidatedAtomValues_UNSTABLE:k$t,noWait:j$t,waitForNone:U$t,waitForAny:B$t,waitForAll:F$t,waitForAllSettled:z$t,isRecoilValue:w$t,batchUpdates:g$t,setBatcher:y$t,snapshot_UNSTABLE:S$t},_Tr=an.DefaultValue,tRe=an.RecoilRoot,xTr=an.useRecoilBridgeAcrossReactRoots_UNSTABLE,qn=an.atom,d6=an.selector,wTr=an.retentionZone,bTr=an.atomFamily,STr=an.selectorFamily,ETr=an.constSelector,ITr=an.errorSelector,TTr=an.readOnlySelector,Ql=an.useRecoilValue,ATr=an.useRecoilValueLoadable,yO=an.useRecoilState,CTr=an.useRecoilStateLoadable,eu=an.useSetRecoilState,MTr=an.useResetRecoilState,RTr=an.useGetRecoilValueInfo_UNSTABLE,PTr=an.useRetain,OTr=an.useRecoilCallback,LTr=an.useRecoilTransaction_UNSTABLE,DTr=an.useGotoRecoilSnapshot,NTr=an.useRecoilSnapshot,kTr=an.useRecoilTransactionObserver_UNSTABLE,qTr=an.useTransactionObservation_UNSTABLE,jTr=an.useSetUnvalidatedAtomValues_UNSTABLE,FTr=an.noWait,zTr=an.waitForNone,BTr=an.waitForAny,UTr=an.waitForAll,VTr=an.waitForAllSettled,GTr=an.isRecoilValue,$Tr=an.batchUpdates,HTr=an.setBatcher,WTr=an.snapshot_UNSTABLE;var Ki=Me(dt(),1);var ije=Me(g6(),1);function xRe(r){return ho(this,null,function*(){let e=no.getGeoreferenceApiClient(),t="/transformations/",n={map_id:r,additional_properties:!0},i=yield e.get(t,{params:n});if(i.status===200)return i.data;console.error("Something went wrong while trying to fetch transformation for given map_id.")})}function wRe(r,e){return ho(this,null,function*(){let t=no.getGeoreferenceApiClient(),n="/transformations/",i={dry_run:!1},o=Sn(Et({},e),{map_id:r}),a=yield t.post(n,o,{params:i});if(a.status===200)return a.data;console.error("Something went wrong while trying to confirm transformation for given map_id and params.")})}function bRe(r,e,t){return ho(this,null,function*(){let n=no.getGeoreferenceApiClient(),i="/transformations/",o=Object.assign({map_id:r,params:e,overwrites:0},t!==void 0?{clip:t}:{}),a={dry_run:!0},c=yield n.post(i,o,{params:a});if(c.status===200)return c.data;console.error("Something went wrong while trying to fetch transformation for given map_id and params.")})}function SRe(r){return ho(this,null,function*(){let e=no.getGeoreferenceApiClient(),t="/transformations/",n={transformation_id:r},i={dry_run:!0},o=yield e.post(t,n,{params:i});if(o.status===200)return o.data;console.error("Something went wrong while trying to fetch transformation preview for given transformation_id.")})}var ld=qn({key:"notificationState",default:null});var sAr=qn({key:"helperMessageState",default:null}),_O=qn({key:"isLoadingState",default:!1}),xO=qn({key:"mapMetadataState",default:null}),wO=qn({key:"rectifiedImageParamsState",default:null}),bO=qn({key:"sourceViewParamsState",default:null,dangerouslyAllowMutability:!0}),SO=qn({key:"targetViewParamsState",default:null,dangerouslyAllowMutability:!0}),EO=qn({key:"transformationState",default:null});var DS=Me(dt(),1),Qf=Me(Jr(),1);function PRe(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r))for(e=0;e<r.length;e++)r[e]&&(t=PRe(r[e]))&&(n&&(n+=" "),n+=t);else for(e in r)r[e]&&(n&&(n+=" "),n+=e);return n}function e6t(){for(var r,e,t=0,n="";t<arguments.length;)(r=arguments[t++])&&(e=PRe(r))&&(n&&(n+=" "),n+=e);return n}var Ps=e6t;var y6=Me(dt(),1),IO=Me(Jr(),1);var ORe=({name:r,color:e,size:t})=>y6.default.createElement("svg",{viewBox:"0 0 24 24",className:`icon ${r}`,fill:e,width:t,height:t},y6.default.createElement("use",{xlinkHref:`${no.getSettings().ICON_SPRITE}#${r}`}));ORe.propTypes={name:IO.default.string.isRequired,color:IO.default.string,size:IO.default.number};var LRe=ORe;var LS=LRe;var DRe=r=>{let{activeControl:e=null,className:t="",disabled:n=!1,iconClassName:i="",IconComponent:o,id:a="unknown",onClick:c,title:h="unknown"}=r;return DS.default.createElement("button",{onClick:()=>{c(a)},className:Ps("vkf-control-button",t,e===a&&"active",n&&"disabled"),disabled:n},o===void 0?DS.default.createElement(LS,{name:i,size:24}):DS.default.createElement(o,{glyph:i}),DS.default.createElement("span",{className:"text"},h))};DRe.propTypes={activeControl:Qf.default.string,className:Qf.default.string,disabled:Qf.default.bool,id:Qf.default.string.isRequired,iconClassName:Qf.default.string,IconComponent:Qf.default.elementType,onClick:Qf.default.func.isRequired,title:Qf.default.string};var NRe=DRe;var NS=NRe;var Vu=Me(dt(),1),Ds=Me(Jr(),1);var O6=Me(DPe(),1);function yr(){return yr=O6.default?O6.default.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},yr.apply(this,arguments)}var rOe=Me($Pe(),1);var k6=Me(tOe(),1);function GS(r,e){return GS=k6.default?k6.default.bind():function(n,i){return n.__proto__=i,n},GS(r,e)}function In(r,e){r.prototype=(0,rOe.default)(e.prototype),r.prototype.constructor=r,GS(r,e)}var lOe=Me(sOe(),1);function Tn(r,e){if(r==null)return{};var t={},n=(0,lOe.default)(r),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function nn(){return nn=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},nn.apply(this,arguments)}function B_(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}var F6=Me(dt());var qCr=Me(qO()),uHt=function(){};function cOe(r,e){var t={};return Object.keys(r).forEach(function(n){if(t[U_(n)]=uHt,0)var i}),t}function j6(r,e){return r[e]!==void 0}function U_(r){return"default"+r.charAt(0).toUpperCase()+r.substr(1)}function fOe(r){return!!r&&(typeof r!="function"||r.prototype&&r.prototype.isReactComponent)}function dv(r,e){return dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},dv(r,e)}function z6(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,dv(r,e)}var V_=Me(dt()),vOe=Me(U6()),gOe=Me(qO());var fHt="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function $S(r,e,t){t===void 0&&(t=[]);var n=r.displayName||r.name||"Component",i=fOe(r),o=Object.keys(e),a=o.map(U_);i||!t.length||(0,gOe.default)(!1);var c=function(d){z6(v,d);function v(){for(var S,T=arguments.length,L=new Array(T),k=0;k<T;k++)L[k]=arguments[k];S=d.call.apply(d,[this].concat(L))||this,S.handlers=Object.create(null),o.forEach(function(D){var j=e[D],B=function(ee){if(S.props[j]){var J;S._notifying=!0;for(var ie=arguments.length,ue=new Array(ie>1?ie-1:0),le=1;le<ie;le++)ue[le-1]=arguments[le];(J=S.props)[j].apply(J,[ee].concat(ue)),S._notifying=!1}S.unmounted||S.setState(function(_e){var Re,ze=_e.values;return{values:nn(Object.create(null),ze,(Re={},Re[D]=ee,Re))}})};S.handlers[j]=B}),t.length&&(S.attachRef=function(D){S.inner=D});var R=Object.create(null);return o.forEach(function(D){R[D]=S.props[U_(D)]}),S.state={values:R,prevProps:{}},S}var x=v.prototype;return x.shouldComponentUpdate=function(){return!this._notifying},v.getDerivedStateFromProps=function(T,L){var k=L.values,R=L.prevProps,D={values:nn(Object.create(null),k),prevProps:{}};return o.forEach(function(j){D.prevProps[j]=T[j],!j6(T,j)&&j6(R,j)&&(D.values[j]=T[U_(j)])}),D},x.componentWillUnmount=function(){this.unmounted=!0},x.render=function(){var T=this,L=this.props,k=L.innerRef,R=B_(L,["innerRef"]);a.forEach(function(j){delete R[j]});var D={};return o.forEach(function(j){var B=T.props[j];D[j]=B!==void 0?B:T.state.values[j]}),V_.default.createElement(r,nn({},R,D,this.handlers,{ref:k||this.attachRef}))},v}(V_.default.Component);(0,vOe.polyfill)(c),c.displayName="Uncontrolled("+n+")",c.propTypes=nn({innerRef:function(){}},cOe(e,n)),t.forEach(function(d){c.prototype[d]=function(){var x;return(x=this.inner)[d].apply(x,arguments)}});var h=c;return V_.default.forwardRef&&(h=V_.default.forwardRef(function(d,v){return V_.default.createElement(c,nn({},d,{innerRef:v,__source:{fileName:fHt,lineNumber:128},__self:this}))}),h.propTypes=c.propTypes),h.ControlledComponent=r,h.deferControlTo=function(d,v,x){return v===void 0&&(v={}),$S(d,nn({},e,v),x)},h}var H6=Me(G6());var IOe=Me(qO()),jO=Me(Jr());var qc={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},$6={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};var EOe={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},HS={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"};function W6(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[t.length-1];return typeof i=="function"?r.apply(void 0,t):function(o){return r.apply(void 0,t.concat([o]))}}}function xi(r,e){var t=(r.bsClass||"").trim();return t==null&&(0,IOe.default)(!1),t+(e?"-"+e:"")}var wi=W6(function(r,e){var t=e.propTypes||(e.propTypes={}),n=e.defaultProps||(e.defaultProps={});return t.bsClass=jO.default.string,n.bsClass=r,e}),TOe=W6(function(r,e,t){typeof e!="string"&&(t=e,e=void 0);var n=t.STYLES||[],i=t.propTypes||{};r.forEach(function(c){n.indexOf(c)===-1&&n.push(c)});var o=jO.default.oneOf(n);if(t.STYLES=n,o._values=n,t.propTypes=yr({},i,{bsStyle:o}),e!==void 0){var a=t.defaultProps||(t.defaultProps={});a.bsStyle=e}return t}),G_=W6(function(r,e,t){typeof e!="string"&&(t=e,e=void 0);var n=t.SIZES||[],i=t.propTypes||{};r.forEach(function(c){n.indexOf(c)===-1&&n.push(c)});var o=[];n.forEach(function(c){var h=$6[c];h&&h!==c&&o.push(h),o.push(c)});var a=jO.default.oneOf(o);return a._values=o,t.SIZES=n,t.propTypes=yr({},i,{bsSize:a}),e!==void 0&&(t.defaultProps||(t.defaultProps={}),t.defaultProps.bsSize=e),t});function Ia(r){var e,t=(e={},e[xi(r)]=!0,e);if(r.bsSize){var n=$6[r.bsSize]||r.bsSize;t[xi(r,n)]=!0}return r.bsStyle&&(t[xi(r,r.bsStyle)]=!0),t}function AOe(r){return{bsClass:r.bsClass,bsSize:r.bsSize,bsStyle:r.bsStyle,bsRole:r.bsRole}}function COe(r){return r==="bsClass"||r==="bsSize"||r==="bsStyle"||r==="bsRole"}function Os(r){var e={};return(0,H6.default)(r).forEach(function(t){var n=t[0],i=t[1];COe(n)||(e[n]=i)}),[AOe(r),e]}function FO(r,e){var t={};e.forEach(function(i){t[i]=!0});var n={};return(0,H6.default)(r).forEach(function(i){var o=i[0],a=i[1];!COe(o)&&!t[o]&&(n[o]=a)}),[AOe(r),n]}var Jo=Me(dt());function gHt(r,e,t){var n=0;return Jo.default.Children.map(r,function(i){return Jo.default.isValidElement(i)?e.call(t,i,n++):i})}function yHt(r,e,t){var n=0;Jo.default.Children.forEach(r,function(i){Jo.default.isValidElement(i)&&e.call(t,i,n++)})}function _Ht(r){var e=0;return Jo.default.Children.forEach(r,function(t){Jo.default.isValidElement(t)&&++e}),e}function xHt(r,e,t){var n=0,i=[];return Jo.default.Children.forEach(r,function(o){Jo.default.isValidElement(o)&&e.call(t,o,n++)&&i.push(o)}),i}function wHt(r,e,t){var n=0,i;return Jo.default.Children.forEach(r,function(o){i||Jo.default.isValidElement(o)&&e.call(t,o,n++)&&(i=o)}),i}function bHt(r,e,t){var n=0,i=!0;return Jo.default.Children.forEach(r,function(o){i&&Jo.default.isValidElement(o)&&(e.call(t,o,n++)||(i=!1))}),i}function SHt(r,e,t){var n=0,i=!1;return Jo.default.Children.forEach(r,function(o){i||Jo.default.isValidElement(o)&&e.call(t,o,n++)&&(i=!0)}),i}function EHt(r){var e=[];return Jo.default.Children.forEach(r,function(t){Jo.default.isValidElement(t)&&e.push(t)}),e}var mv={map:gHt,forEach:yHt,count:_Ht,find:wHt,filter:xHt,every:bHt,some:SHt,toArray:EHt};var BO=Me(Jr()),Z6=Me(WS());var hMr=BO.default.oneOfType([BO.default.string,BO.default.number]);function ROe(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return(0,Z6.default)(function(n,i,o){var a;return e.every(function(c){return mv.some(n.children,function(h){return h.props.bsRole===c})?!0:(a=c,!1)}),a?new Error("(children) "+o+" - Missing a required child with bsRole: "+(a+". "+o+" must have at least one child of each of ")+("the following bsRoles: "+e.join(", "))):null})}function POe(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return(0,Z6.default)(function(n,i,o){var a;return e.every(function(c){var h=mv.filter(n.children,function(d){return d.props.bsRole===c});return h.length>1?(a=c,!1):!0}),a?new Error("(children) "+o+" - Duplicate children detected of bsRole: "+(a+". Only one child each allowed with the following ")+("bsRoles: "+e.join(", "))):null})}var Y6=Me(Jr()),ZS=Me(dt()),AHt={label:Y6.default.string.isRequired,onClick:Y6.default.func},CHt={label:"Close"},K6=function(r){In(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.label,a=i.onClick;return ZS.default.createElement("button",{type:"button",className:"close",onClick:a},ZS.default.createElement("span",{"aria-hidden":"true"},"\xD7"),ZS.default.createElement("span",{className:"sr-only"},o))},e}(ZS.default.Component);K6.propTypes=AHt;K6.defaultProps=CHt;var jOe=K6;function gn(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}var eH=Me(dt()),rh=Me(Jr()),HOe=Me(th());function zHt(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return e.filter(function(n){return n!=null}).reduce(function(n,i){if(typeof i!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return n===null?i:function(){for(var a=arguments.length,c=new Array(a),h=0;h<a;h++)c[h]=arguments[h];n.apply(this,c),i.apply(this,c)}},null)}var yo=zHt;var BHt={href:rh.default.string,onClick:rh.default.func,onKeyDown:rh.default.func,disabled:rh.default.bool,role:rh.default.string,tabIndex:rh.default.oneOfType([rh.default.number,rh.default.string]),componentClass:HOe.default},UHt={componentClass:"a"};function $Oe(r){return!r||r.trim()==="#"}var tH=function(r){In(e,r);function e(n,i){var o;return o=r.call(this,n,i)||this,o.handleClick=o.handleClick.bind(gn(gn(o))),o.handleKeyDown=o.handleKeyDown.bind(gn(gn(o))),o}var t=e.prototype;return t.handleClick=function(i){var o=this.props,a=o.disabled,c=o.href,h=o.onClick;if((a||$Oe(c))&&i.preventDefault(),a){i.stopPropagation();return}h&&h(i)},t.handleKeyDown=function(i){i.key===" "&&(i.preventDefault(),this.handleClick(i))},t.render=function(){var i=this.props,o=i.componentClass,a=i.disabled,c=i.onKeyDown,h=Tn(i,["componentClass","disabled","onKeyDown"]);return $Oe(h.href)&&(h.role=h.role||"button",h.href=h.href||"#"),a&&(h.tabIndex=-1,h.style=yr({pointerEvents:"none"},h.style)),eH.default.createElement(o,yr({},h,{onClick:this.handleClick,onKeyDown:yo(this.handleKeyDown,c)}))},e}(eH.default.Component);tH.propTypes=BHt;tH.defaultProps=UHt;var $_=tH;var WOe=Me(qOe());var rH=Me(hi()),QO=Me(dt()),vv=Me(Jr()),ZOe=Me(th());var VHt={active:vv.default.bool,disabled:vv.default.bool,block:vv.default.bool,onClick:vv.default.func,componentClass:ZOe.default,href:vv.default.string,type:vv.default.oneOf(["button","reset","submit"])},GHt={active:!1,block:!1,disabled:!1},nH=function(r){In(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.renderAnchor=function(i,o){return QO.default.createElement($_,yr({},i,{className:(0,rH.default)(o,i.disabled&&"disabled")}))},t.renderButton=function(i,o){var a=i.componentClass,c=Tn(i,["componentClass"]),h=a||"button";return QO.default.createElement(h,yr({},c,{type:c.type||"button",className:o}))},t.render=function(){var i,o=this.props,a=o.active,c=o.block,h=o.className,d=Tn(o,["active","block","className"]),v=Os(d),x=v[0],S=v[1],T=yr({},Ia(x),(i={active:a},i[xi(x,"block")]=c,i)),L=(0,rH.default)(h,T);return S.href?this.renderAnchor(S,L):this.renderButton(S,L)},e}(QO.default.Component);nH.propTypes=VHt;nH.defaultProps=GHt;var cd=wi("btn",G_([qc.LARGE,qc.SMALL,qc.XSMALL],TOe((0,WOe.default)(EOe).concat([HS.DEFAULT,HS.PRIMARY,HS.LINK]),HS.DEFAULT,nH)));var KOe=Me(hi()),iH=Me(dt()),rL=Me(Jr()),XOe=Me(tL());var YHt={vertical:rL.default.bool,justified:rL.default.bool,block:(0,XOe.default)(rL.default.bool,function(r){var e=r.block,t=r.vertical;return e&&!t?new Error("`block` requires `vertical` to be set to have any effect"):null})},KHt={block:!1,justified:!1,vertical:!1},oH=function(r){In(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i,o=this.props,a=o.block,c=o.justified,h=o.vertical,d=o.className,v=Tn(o,["block","justified","vertical","className"]),x=Os(v),S=x[0],T=x[1],L=yr({},Ia(S),(i={},i[xi(S)]=!h,i[xi(S,"vertical")]=h,i[xi(S,"justified")]=c,i[xi(cd.defaultProps,"block")]=a,i));return iH.default.createElement("div",yr({},T,{className:(0,KOe.default)(d,L)}))},e}(iH.default.Component);oH.propTypes=YHt;oH.defaultProps=KHt;var JOe=wi("btn-group",oH);var jDe=Me(hi()),FDe=Me(vH()),zDe=Me(tE()),AL=Me(yH()),K_=Me(dt()),Ja=Me(Jr()),DH=Me(vo()),BDe=Me(tL()),UDe=Me(th()),VDe=Me(LLe());var kRr=Me(aH());var LDe=Me(bDe());var DDe=Me(hi()),aE=Me(yH()),sE=Me(dt()),ih=Me(Jr()),NDe=Me(vo()),kDe=Me(ODe());var oZt={open:ih.default.bool,pullRight:ih.default.bool,onClose:ih.default.func,labelledBy:ih.default.oneOfType([ih.default.string,ih.default.number]),onSelect:ih.default.func,rootCloseEvent:ih.default.oneOf(["click","mousedown"])},aZt={bsRole:"menu",pullRight:!1},RH=function(r){In(e,r);function e(n){var i;return i=r.call(this,n)||this,i.handleRootClose=i.handleRootClose.bind(gn(gn(i))),i.handleKeyDown=i.handleKeyDown.bind(gn(gn(i))),i}var t=e.prototype;return t.getFocusableMenuItems=function(){var i=NDe.default.findDOMNode(this);return i?(0,LDe.default)(i.querySelectorAll("[tabIndex=\"-1\"]")):[]},t.getItemsAndActiveIndex=function(){var i=this.getFocusableMenuItems(),o=i.indexOf(document.activeElement);return{items:i,activeIndex:o}},t.focusNext=function(){var i=this.getItemsAndActiveIndex(),o=i.items,a=i.activeIndex;if(o.length!==0){var c=a===o.length-1?0:a+1;o[c].focus()}},t.focusPrevious=function(){var i=this.getItemsAndActiveIndex(),o=i.items,a=i.activeIndex;if(o.length!==0){var c=a===0?o.length-1:a-1;o[c].focus()}},t.handleKeyDown=function(i){switch(i.keyCode){case aE.default.codes.down:this.focusNext(),i.preventDefault();break;case aE.default.codes.up:this.focusPrevious(),i.preventDefault();break;case aE.default.codes.esc:case aE.default.codes.tab:this.props.onClose(i,{source:"keydown"});break;default:}},t.handleRootClose=function(i){this.props.onClose(i,{source:"rootClose"})},t.render=function(){var i,o=this,a=this.props,c=a.open,h=a.pullRight,d=a.labelledBy,v=a.onSelect,x=a.className,S=a.rootCloseEvent,T=a.children,L=Tn(a,["open","pullRight","labelledBy","onSelect","className","rootCloseEvent","children"]),k=FO(L,["onClose"]),R=k[0],D=k[1],j=yr({},Ia(R),(i={},i[xi(R,"right")]=h,i));return sE.default.createElement(kDe.default,{disabled:!c,onRootClose:this.handleRootClose,event:S},sE.default.createElement("ul",yr({},D,{role:"menu",className:(0,DDe.default)(x,j),"aria-labelledby":d}),mv.map(T,function(B){return sE.default.cloneElement(B,{onKeyDown:yo(B.props.onKeyDown,o.handleKeyDown),onSelect:yo(B.props.onSelect,v)})})))},e}(sE.default.Component);RH.propTypes=oZt;RH.defaultProps=aZt;var PH=wi("dropdown-menu",RH);var TL=Me(dt()),lE=Me(Jr()),qDe=Me(hi());var sZt={noCaret:lE.default.bool,open:lE.default.bool,title:lE.default.string,useAnchor:lE.default.bool},lZt={open:!1,useAnchor:!1,bsRole:"toggle"},OH=function(r){In(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.noCaret,a=i.open,c=i.useAnchor,h=i.bsClass,d=i.className,v=i.children,x=Tn(i,["noCaret","open","useAnchor","bsClass","className","children"]);delete x.bsRole;var S=c?$_:cd,T=!o;return TL.default.createElement(S,yr({},x,{role:"button",className:(0,qDe.default)(d,h),"aria-haspopup":!0,"aria-expanded":a}),v||x.title,T&&" ",T&&TL.default.createElement("span",{className:"caret"}))},e}(TL.default.Component);OH.propTypes=sZt;OH.defaultProps=lZt;var LH=wi("dropdown-toggle",OH);var GDe=LH.defaultProps.bsRole,NH=PH.defaultProps.bsRole,uZt={dropup:Ja.default.bool,id:(0,VDe.default)(Ja.default.oneOfType([Ja.default.string,Ja.default.number])),componentClass:UDe.default,children:(0,BDe.default)(ROe(GDe,NH),POe(NH)),disabled:Ja.default.bool,pullRight:Ja.default.bool,open:Ja.default.bool,defaultOpen:Ja.default.bool,onToggle:Ja.default.func,onSelect:Ja.default.func,role:Ja.default.string,rootCloseEvent:Ja.default.oneOf(["click","mousedown"]),onMouseEnter:Ja.default.func,onMouseLeave:Ja.default.func},cZt={componentClass:JOe},CL=function(r){In(e,r);function e(n,i){var o;return o=r.call(this,n,i)||this,o.handleClick=o.handleClick.bind(gn(gn(o))),o.handleKeyDown=o.handleKeyDown.bind(gn(gn(o))),o.handleClose=o.handleClose.bind(gn(gn(o))),o._focusInDropdown=!1,o.lastOpenEventType=null,o}var t=e.prototype;return t.componentDidMount=function(){this.focusNextOnOpen()},t.UNSAFE_componentWillUpdate=function(i){!i.open&&this.props.open&&(this._focusInDropdown=(0,zDe.default)(DH.default.findDOMNode(this.menu),(0,FDe.default)(document)))},t.componentDidUpdate=function(i){var o=this.props.open,a=i.open;o&&!a&&this.focusNextOnOpen(),!o&&a&&this._focusInDropdown&&(this._focusInDropdown=!1,this.focus())},t.focus=function(){var i=DH.default.findDOMNode(this.toggle);i&&i.focus&&i.focus()},t.focusNextOnOpen=function(){var i=this.menu;!i||!i.focusNext||(this.lastOpenEventType==="keydown"||this.props.role==="menuitem")&&i.focusNext()},t.handleClick=function(i){this.props.disabled||this.toggleOpen(i,{source:"click"})},t.handleClose=function(i,o){this.props.open&&this.toggleOpen(i,o)},t.handleKeyDown=function(i){if(!this.props.disabled)switch(i.keyCode){case AL.default.codes.down:this.props.open?this.menu.focusNext&&this.menu.focusNext():this.toggleOpen(i,{source:"keydown"}),i.preventDefault();break;case AL.default.codes.esc:case AL.default.codes.tab:this.handleClose(i,{source:"keydown"});break;default:}},t.toggleOpen=function(i,o){var a=!this.props.open;a&&(this.lastOpenEventType=o.source),this.props.onToggle&&this.props.onToggle(a,i,o)},t.renderMenu=function(i,o){var a=this,c=o.id,h=o.onSelect,d=o.rootCloseEvent,v=Tn(o,["id","onSelect","rootCloseEvent"]),x=function(T){a.menu=T};return typeof i.ref=="string"||(x=yo(i.ref,x)),(0,K_.cloneElement)(i,yr({},v,{ref:x,labelledBy:c,bsClass:xi(v,"menu"),onClose:yo(i.props.onClose,this.handleClose),onSelect:yo(i.props.onSelect,h,function(S,T){return a.handleClose(T,{source:"select"})}),rootCloseEvent:d}))},t.renderToggle=function(i,o){var a=this,c=function(d){a.toggle=d};return typeof i.ref=="string"||(c=yo(i.ref,c)),(0,K_.cloneElement)(i,yr({},o,{ref:c,bsClass:xi(o,"toggle"),onClick:yo(i.props.onClick,this.handleClick),onKeyDown:yo(i.props.onKeyDown,this.handleKeyDown)}))},t.render=function(){var i,o=this,a=this.props,c=a.componentClass,h=a.id,d=a.dropup,v=a.disabled,x=a.pullRight,S=a.open,T=a.onSelect,L=a.role,k=a.bsClass,R=a.className,D=a.rootCloseEvent,j=a.children,B=Tn(a,["componentClass","id","dropup","disabled","pullRight","open","onSelect","role","bsClass","className","rootCloseEvent","children"]);delete B.onToggle;var $=(i={},i[k]=!0,i.open=S,i.disabled=v,i);return d&&($[k]=!1,$.dropup=!0),K_.default.createElement(c,yr({},B,{className:(0,jDe.default)(R,$)}),mv.map(j,function(ee){switch(ee.props.bsRole){case GDe:return o.renderToggle(ee,{id:h,disabled:v,open:S,role:L,bsClass:k});case NH:return o.renderMenu(ee,{id:h,open:S,pullRight:x,bsClass:k,onSelect:T,rootCloseEvent:D});default:return ee;}}))},e}(K_.default.Component);CL.propTypes=uZt;CL.defaultProps=cZt;wi("dropdown",CL);var kH=$S(CL,{open:"onToggle"});kH.Toggle=LH;kH.Menu=PH;var uE=kH;var $De=Me(G6());function qH(r,e){var t=e.propTypes,n={},i={};return(0,$De.default)(r).forEach(function(o){var a=o[0],c=o[1];t[a]?n[a]=c:i[a]=c}),[n,i]}var HDe=Me(hi()),RL=Me(dt()),ru=Me(Jr()),X_=Me(ELe()),ML,fZt={in:ru.default.bool,mountOnEnter:ru.default.bool,unmountOnExit:ru.default.bool,appear:ru.default.bool,timeout:ru.default.number,onEnter:ru.default.func,onEntering:ru.default.func,onEntered:ru.default.func,onExit:ru.default.func,onExiting:ru.default.func,onExited:ru.default.func},hZt={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},pZt=(ML={},ML[X_.ENTERING]="in",ML[X_.ENTERED]="in",ML),jH=function(r){In(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.className,a=i.children,c=Tn(i,["className","children"]);return RL.default.createElement(X_.default,c,function(h,d){return RL.default.cloneElement(a,yr({},d,{className:(0,HDe.default)("fade",o,a.props.className,pZt[h])}))})},e}(RL.default.Component);jH.propTypes=fZt;jH.defaultProps=hZt;var FH=jH;var PL=Me(hi()),J_=Me(dt()),oh=Me(Jr()),WDe=Me(tL());var dZt={active:oh.default.bool,disabled:oh.default.bool,divider:(0,WDe.default)(oh.default.bool,function(r){var e=r.divider,t=r.children;return e&&t?new Error("Children will not be rendered for dividers"):null}),eventKey:oh.default.any,header:oh.default.bool,href:oh.default.string,onClick:oh.default.func,onSelect:oh.default.func},mZt={divider:!1,disabled:!1,header:!1},zH=function(r){In(e,r);function e(n,i){var o;return o=r.call(this,n,i)||this,o.handleClick=o.handleClick.bind(gn(gn(o))),o}var t=e.prototype;return t.handleClick=function(i){var o=this.props,a=o.href,c=o.disabled,h=o.onSelect,d=o.eventKey;(!a||c)&&i.preventDefault(),!c&&h&&h(d,i)},t.render=function(){var i=this.props,o=i.active,a=i.disabled,c=i.divider,h=i.header,d=i.onClick,v=i.className,x=i.style,S=Tn(i,["active","disabled","divider","header","onClick","className","style"]),T=FO(S,["eventKey","onSelect"]),L=T[0],k=T[1];return c?(k.children=void 0,J_.default.createElement("li",yr({},k,{role:"separator",className:(0,PL.default)(v,"divider"),style:x}))):h?J_.default.createElement("li",yr({},k,{role:"heading",className:(0,PL.default)(v,xi(L,"header")),style:x})):J_.default.createElement("li",{role:"presentation",className:(0,PL.default)(v,{active:o,disabled:a}),style:x},J_.default.createElement($_,yr({},k,{role:"menuitem",tabIndex:"-1",onClick:yo(d,this.handleClick)})))},e}(J_.default.Component);zH.propTypes=dZt;zH.defaultProps=mZt;var BH=wi("dropdown",zH);var fW=Me(hi()),hW=Me(aNe()),E2e=Me(QS()),I2e=Me(jc()),pW=Me(GH()),t0=Me(dt()),No=Me(Jr()),T2e=Me(vo()),r0=Me(c2e()),A2e=Me(ZH()),C2e=Me(th());var f2e=Me(hi()),iW=Me(dt()),h2e=Me(th());var TKt={componentClass:h2e.default},AKt={componentClass:"div"},oW=function(r){In(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.componentClass,a=i.className,c=Tn(i,["componentClass","className"]),h=Os(c),d=h[0],v=h[1],x=Ia(d);return iW.default.createElement(o,yr({},v,{className:(0,f2e.default)(a,x)}))},e}(iW.default.Component);oW.propTypes=TKt;oW.defaultProps=AKt;var p2e=wi("modal-body",oW);var aW=Me(hi()),hE=Me(dt()),d2e=Me(Jr());var CKt={dialogClassName:d2e.default.string},m2e=function(r){In(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i,o=this.props,a=o.dialogClassName,c=o.className,h=o.style,d=o.children,v=o.onMouseDownDialog,x=Tn(o,["dialogClassName","className","style","children","onMouseDownDialog"]),S=Os(x),T=S[0],L=S[1],k=xi(T),R=yr({display:"block"},h),D=yr({},Ia(T),(i={},i[k]=!1,i[xi(T,"dialog")]=!0,i));return hE.default.createElement("div",yr({},L,{tabIndex:"-1",role:"dialog",style:R,className:(0,aW.default)(c,k)}),hE.default.createElement("div",{className:(0,aW.default)(a,D),onMouseDown:v},hE.default.createElement("div",{className:xi(T,"content"),role:"document"},d)))},e}(hE.default.Component);m2e.propTypes=CKt;var eD=wi("modal",G_([qc.LARGE,qc.SMALL],m2e));var v2e=Me(hi()),sW=Me(dt()),g2e=Me(th());var MKt={componentClass:g2e.default},RKt={componentClass:"div"},lW=function(r){In(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.componentClass,a=i.className,c=Tn(i,["componentClass","className"]),h=Os(c),d=h[0],v=h[1],x=Ia(d);return sW.default.createElement(o,yr({},v,{className:(0,v2e.default)(a,x)}))},e}(sW.default.Component);lW.propTypes=MKt;lW.defaultProps=RKt;var y2e=wi("modal-footer",lW);var _2e=Me(hi()),e0=Me(Jr()),tD=Me(dt());var PKt={closeLabel:e0.default.string,closeButton:e0.default.bool,onHide:e0.default.func},OKt={closeLabel:"Close",closeButton:!1},LKt={$bs_modal:e0.default.shape({onHide:e0.default.func})},rD=function(r){In(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.closeLabel,a=i.closeButton,c=i.onHide,h=i.className,d=i.children,v=Tn(i,["closeLabel","closeButton","onHide","className","children"]),x=this.context.$bs_modal,S=Os(v),T=S[0],L=S[1],k=Ia(T);return tD.default.createElement("div",yr({},L,{className:(0,_2e.default)(h,k)}),a&&tD.default.createElement(jOe,{label:o,onClick:yo(x&&x.onHide,c)}),d)},e}(tD.default.Component);rD.propTypes=PKt;rD.defaultProps=OKt;rD.contextTypes=LKt;var x2e=wi("modal-header",rD);var w2e=Me(hi()),uW=Me(dt()),b2e=Me(th());var DKt={componentClass:b2e.default},NKt={componentClass:"h4"},cW=function(r){In(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.componentClass,a=i.className,c=Tn(i,["componentClass","className"]),h=Os(c),d=h[0],v=h[1],x=Ia(d);return uW.default.createElement(o,yr({},v,{className:(0,w2e.default)(a,x)}))},e}(uW.default.Component);cW.propTypes=DKt;cW.defaultProps=NKt;var S2e=wi("modal-title",cW);var kKt=yr({},r0.default.propTypes,eD.propTypes,{backdrop:No.default.oneOf(["static",!0,!1]),backdropClassName:No.default.string,keyboard:No.default.bool,animation:No.default.bool,dialogComponentClass:C2e.default,autoFocus:No.default.bool,enforceFocus:No.default.bool,restoreFocus:No.default.bool,show:No.default.bool,onHide:No.default.func,onEnter:No.default.func,onEntering:No.default.func,onEntered:No.default.func,onExit:No.default.func,onExiting:No.default.func,onExited:No.default.func,container:r0.default.propTypes.container}),qKt=yr({},r0.default.defaultProps,{animation:!0,dialogComponentClass:eD}),jKt={$bs_modal:No.default.shape({onHide:No.default.func})};function FKt(r){return t0.default.createElement(FH,yr({},r,{timeout:hl.TRANSITION_DURATION}))}function zKt(r){return t0.default.createElement(FH,yr({},r,{timeout:hl.BACKDROP_TRANSITION_DURATION}))}var hl=function(r){In(e,r);function e(n,i){var o;return o=r.call(this,n,i)||this,o.handleDialogBackdropMouseDown=function(){o._waitingForMouseUp=!0},o.handleMouseUp=function(a){var c=o._modal.getDialogElement();o._waitingForMouseUp&&a.target===c&&(o._ignoreBackdropClick=!0),o._waitingForMouseUp=!1},o.handleEntering=o.handleEntering.bind(gn(gn(o))),o.handleExited=o.handleExited.bind(gn(gn(o))),o.handleWindowResize=o.handleWindowResize.bind(gn(gn(o))),o.handleDialogClick=o.handleDialogClick.bind(gn(gn(o))),o.setModalRef=o.setModalRef.bind(gn(gn(o))),o.state={style:{}},o}var t=e.prototype;return t.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},t.componentWillUnmount=function(){this.handleExited()},t.setModalRef=function(i){this._modal=i},t.handleDialogClick=function(i){if(this._ignoreBackdropClick||i.target!==i.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},t.handleEntering=function(){hW.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},t.handleExited=function(){hW.default.off(window,"resize",this.handleWindowResize)},t.handleWindowResize=function(){this.updateStyle()},t.updateStyle=function(){if(I2e.default){var i=this._modal.getDialogElement(),o=i.scrollHeight,a=(0,E2e.default)(i),c=(0,A2e.default)(T2e.default.findDOMNode(this.props.container||a.body)),h=o>a.documentElement.clientHeight;this.setState({style:{paddingRight:c&&!h?(0,pW.default)():void 0,paddingLeft:!c&&h?(0,pW.default)():void 0}})}},t.render=function(){var i=this.props,o=i.backdrop,a=i.backdropClassName,c=i.animation,h=i.show,d=i.dialogComponentClass,v=i.className,x=i.style,S=i.children,T=i.onEntering,L=i.onExited,k=Tn(i,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),R=qH(k,r0.default),D=R[0],j=R[1],B=h&&!c&&"in";return t0.default.createElement(r0.default,yr({},D,{ref:this.setModalRef,show:h,containerClassName:xi(k,"open"),transition:c?FKt:void 0,backdrop:o,backdropTransition:c?zKt:void 0,backdropClassName:(0,fW.default)(xi(k,"backdrop"),a,B),onEntering:yo(T,this.handleEntering),onExited:yo(L,this.handleExited),onMouseUp:this.handleMouseUp}),t0.default.createElement(d,yr({},j,{style:yr({},this.state.style,x),className:(0,fW.default)(v,B),onClick:o===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),S))},e}(t0.default.Component);hl.propTypes=kKt;hl.defaultProps=qKt;hl.childContextTypes=jKt;hl.Body=p2e;hl.Header=x2e;hl.Title=S2e;hl.Footer=y2e;hl.Dialog=eD;hl.TRANSITION_DURATION=300;hl.BACKDROP_TRANSITION_DURATION=150;var wv=wi("modal",G_([qc.LARGE,qc.SMALL],hl));var dW={NONE:"control-none-gcp",ADD:"control-add-gcp",MOVE:"control-move-gcp",DEL:"control-del-gcp"},M2e=r=>{let{id:e,activeControl:t,className:n="",parentIconClassName:i,defaultTitle:o="unknown",disableActiveBehavior:a=!1,IconComponent:c,options:h=[{id:dW.ADD,title:Tr("georef-setgcp"),iconClassName:"icon-point-add"},{id:dW.MOVE,title:Tr("georef-movegcp"),iconClassName:"icon-point-move"},{id:dW.DEL,title:Tr("georef-delgcp"),iconClassName:"icon-point-remove"}],onClick:d}=r,v=h.find(S=>S.id===t),x=S=>{d(S)};return Vu.default.createElement("div",{className:Ps("vkf-control-dropdown",v&&!a?"active":"",n)},Vu.default.createElement(uE,{id:e,className:"btn-dropdown-vkf-control",bsStyle:"default",key:v?v.id:null},Vu.default.createElement(uE.Toggle,null,c===void 0?Vu.default.createElement(LS,{name:i,size:24}):Vu.default.createElement(c,{glyph:i}),v?v.title:o),Vu.default.createElement(uE.Menu,null,h.map(S=>Vu.default.createElement(BH,{key:S.id,eventKey:S.id,onClick:()=>x(S.id),className:Ps("control-option",S.id)},c===void 0?Vu.default.createElement(LS,{name:`${S.iconClassName}`,size:24}):Vu.default.createElement(c,{glyph:S.iconClassName}),Vu.default.createElement("span",{className:"text"},S.title))))))};M2e.propTypes={activeControl:Ds.default.string,className:Ds.default.string,defaultTitle:Ds.default.string,disableActiveBehavior:Ds.default.bool,IconComponent:Ds.default.elementType,id:Ds.default.string,parentIconClassName:Ds.default.string,options:Ds.default.arrayOf(Ds.default.shape({id:Ds.default.string.isRequired,title:Ds.default.string.isRequired,iconClassName:Ds.default.string.isRequired})),onClick:Ds.default.func.isRequired};var R2e=M2e;var mW=R2e;var nu=Me(dt(),1);var vW=Me(Jr(),1);var P2e=r=>{let{onClose:e,onSubmit:t}=r,n=()=>{e()},i=()=>{t()};return nu.default.createElement(nu.default.Fragment,null,nu.default.createElement(wv,{className:"vkf-dialog-confirm",show:!0,onHide:n},nu.default.createElement(wv.Header,null,nu.default.createElement(wv.Title,null,Tr("georef-dialog-title"))),nu.default.createElement(wv.Body,null,nu.default.createElement("div",{className:"dialog-content"},nu.default.createElement("p",null,Tr("georef-dialog-content")))),nu.default.createElement(wv.Footer,null,nu.default.createElement(cd,{onClick:n},Tr("georef-dialog-btn-cancel")),nu.default.createElement(cd,{onClick:i,bsStyle:"primary"},Tr("georef-dialog-btn-submit")))))};P2e.propTypes={onClose:vW.default.func.isRequired,onSubmit:vW.default.func.isRequired};var O2e=P2e;var L2e=O2e;var n0=Me(dt(),1);var D2e={None:"NONE",BasemapSelector:"BASEMAP_SELECTOR",Permalink:"PERMALINK"};var N2e={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"};var MOr=qn({key:"activeBasemapId",default:no.getSettings().BASEMAPS[0].id}),ROr=qn({key:"currentApplicationState",default:void 0}),BKt=qn({key:"elementScreenSize",default:{map:{height:0,width:0},layermanagement:{height:0,width:0},padding:{height:15,width:15},offset:{height:15,width:0},spatialtemporalsearch:{height:0,width:0}}});var POr=qn({key:"facetState",default:{facets:[],georeference:!1}}),OOr=qn({key:"layoutState",default:N2e.VERTICAL}),LOr=qn({key:"mapState",default:void 0,dangerouslyAllowMutability:!0}),DOr=qn({key:"map3dState",default:!1}),NOr=qn({key:"mapCountState",default:10}),kOr=qn({key:"searchIsLoadingState",default:!1}),UKt=qn({key:"selectedLayersState",default:[],dangerouslyAllowMutability:!0}),qOr=qn({key:"selectedOriginalMapIdState",default:void 0}),VKt=qn({key:"selectedGeoJsonLayerIdState",default:void 0}),GKt=qn({key:"selectedGeoJsonLayerLastUpdatedState",default:0}),jOr=d6({key:"selectedGeoJsonLayerState",get:({get:r})=>{let e=r(VKt),t=r(UKt),n=r(GKt);return{selectedLayer:t.find(o=>o.getId()===e),lastUpdated:n}},dangerouslyAllowMutability:!0}),$Kt=qn({key:"selectedGeoJsonFeatureIdentifierState",default:{featureId:void 0,sourceId:void 0}}),FOr=d6({key:"isGeoJsonFeatureSelectedState",get:({get:r})=>{let{featureId:e,sourceId:t}=r($Kt);return Nc(e)&&Nc(t)}}),zOr=qn({key:"timeExtentState",default:[1850,1970]}),HKt=[1850,1970],BOr=qn({key:"timeRangeState",default:HKt}),UOr=qn({key:"baseMapStyleLayersState",default:[]}),VOr=qn({key:"activeDialogState",default:D2e.None});function nD(r){let[e,t]=(0,n0.useState)(r);return(0,n0.useEffect)(()=>{t(r)},[r]),e}function ir(){return function(){throw new Error("Unimplemented abstract method.")}()}var WKt=0;function tr(r){return r.ol_uid||(r.ol_uid=String(++WKt))}var iD="6.15.1";var ZKt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),YKt=function(r){ZKt(e,r);function e(t){var n=this,i=iD==="latest"?iD:"v"+iD.split("-")[0],o="Assertion failed. See https://openlayers.org/en/"+i+"/doc/errors/#"+t+" for details.";return n=r.call(this,o)||this,n.code=t,n.name="AssertionError",n.message=o,n}return e}(Error),oD=YKt;var KKt=function(){function r(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}return r.prototype.preventDefault=function(){this.defaultPrevented=!0},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r}();var bi=KKt;var Gu={PROPERTYCHANGE:"propertychange"};var XKt=function(){function r(){this.disposed=!1}return r.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},r.prototype.disposeInternal=function(){},r}(),md=XKt;function k2e(r,e,t){for(var n,i,o=t||pl,a=0,c=r.length,h=!1;a<c;)n=a+(c-a>>1),i=+o(r[n],e),i<0?a=n+1:(c=n,h=!i);return h?a:~a}function pl(r,e){return r>e?1:r<e?-1:0}function i0(r,e){return r.indexOf(e)>=0}function o0(r,e,t){var n=r.length;if(r[0]<=e)return 0;if(e<=r[n-1])return n-1;var i=void 0;if(t>0){for(i=1;i<n;++i)if(r[i]<e)return i-1}else if(t<0){for(i=1;i<n;++i)if(r[i]<=e)return i}else for(i=1;i<n;++i){if(r[i]==e)return i;if(r[i]<e)return typeof t=="function"?t(e,r[i-1],r[i])>0?i-1:i:r[i-1]-e<e-r[i]?i-1:i}return n-1}function q2e(r,e,t){for(;e<t;){var n=r[e];r[e]=r[t],r[t]=n,++e,--t}}function ko(r,e){for(var t=Array.isArray(e)?e:[e],n=t.length,i=0;i<n;i++)r[r.length]=t[i]}function Aa(r,e){var t=r.length;if(t!==e.length)return!1;for(var n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function j2e(r,e,t){var n=e||pl;return r.every(function(i,o){if(o===0)return!0;var a=n(r[o-1],i);return!(a>0||t&&a===0)})}function Qa(){return!0}function iu(){return!1}function dl(){}function F2e(r){var e=!1,t,n,i;return function(){var o=Array.prototype.slice.call(arguments);return(!e||this!==i||!Aa(o,n))&&(e=!0,i=this,n=o,t=r.apply(this,arguments)),t}}var zr=typeof Object.assign=="function"?Object.assign:function(r,e){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),n=1,i=arguments.length;n<i;++n){var o=arguments[n];if(o!=null)for(var a in o)o.hasOwnProperty(a)&&(t[a]=o[a])}return t};function Ns(r){for(var e in r)delete r[e]}var aD=typeof Object.values=="function"?Object.values:function(r){var e=[];for(var t in r)e.push(r[t]);return e};function $u(r){var e;for(e in r)return!1;return!e}var JKt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),QKt=function(r){JKt(e,r);function e(t){var n=r.call(this)||this;return n.eventTarget_=t,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return e.prototype.addEventListener=function(t,n){if(!(!t||!n)){var i=this.listeners_||(this.listeners_={}),o=i[t]||(i[t]=[]);o.indexOf(n)===-1&&o.push(n)}},e.prototype.dispatchEvent=function(t){var n=typeof t=="string",i=n?t:t.type,o=this.listeners_&&this.listeners_[i];if(o){var a=n?new bi(t):t;a.target||(a.target=this.eventTarget_||this);var c=this.dispatching_||(this.dispatching_={}),h=this.pendingRemovals_||(this.pendingRemovals_={});i in c||(c[i]=0,h[i]=0),++c[i];for(var d,v=0,x=o.length;v<x;++v)if("handleEvent"in o[v]?d=o[v].handleEvent(a):d=o[v].call(this,a),d===!1||a.propagationStopped){d=!1;break}if(--c[i]===0){var S=h[i];for(delete h[i];S--;)this.removeEventListener(i,dl);delete c[i]}return d}},e.prototype.disposeInternal=function(){this.listeners_&&Ns(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1},e.prototype.removeEventListener=function(t,n){var i=this.listeners_&&this.listeners_[t];if(i){var o=i.indexOf(n);o!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[o]=dl,++this.pendingRemovals_[t]):(i.splice(o,1),i.length===0&&delete this.listeners_[t]))}},e}(md),ks=QKt;var Pt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Ar(r,e,t,n,i){if(n&&n!==r&&(t=t.bind(n)),i){var o=t;t=function(){r.removeEventListener(e,t),o.apply(this,arguments)}}var a={target:r,type:e,listener:t};return r.addEventListener(e,t),a}function a0(r,e,t,n){return Ar(r,e,t,n,!0)}function Yr(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),Ns(r))}var eXt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sD=function(r){eXt(e,r);function e(){var t=r.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return e.prototype.changed=function(){++this.revision_,this.dispatchEvent(Pt.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,n){if(Array.isArray(t)){for(var i=t.length,o=new Array(i),a=0;a<i;++a)o[a]=Ar(this,t[a],n);return o}else return Ar(this,t,n)},e.prototype.onceInternal=function(t,n){var i;if(Array.isArray(t)){var o=t.length;i=new Array(o);for(var a=0;a<o;++a)i[a]=a0(this,t[a],n)}else i=a0(this,t,n);return n.ol_key=i,i},e.prototype.unInternal=function(t,n){var i=n.ol_key;if(i)tXt(i);else if(Array.isArray(t))for(var o=0,a=t.length;o<a;++o)this.removeEventListener(t[o],n);else this.removeEventListener(t,n)},e}(ks);sD.prototype.on;sD.prototype.once;sD.prototype.un;function tXt(r){if(Array.isArray(r))for(var e=0,t=r.length;e<t;++e)Yr(r[e]);else Yr(r)}var lD=sD;var B2e=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),z2e=function(r){B2e(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.key=n,o.oldValue=i,o}return e}(bi);var rXt=function(r){B2e(e,r);function e(t){var n=r.call(this)||this;return n.on,n.once,n.un,tr(n),n.values_=null,t!==void 0&&n.setProperties(t),n}return e.prototype.get=function(t){var n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&zr({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,n){var i;i="change:".concat(t),this.hasListener(i)&&this.dispatchEvent(new z2e(i,t,n)),i=Gu.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new z2e(i,t,n))},e.prototype.addChangeListener=function(t,n){this.addEventListener("change:".concat(t),n)},e.prototype.removeChangeListener=function(t,n){this.removeEventListener("change:".concat(t),n)},e.prototype.set=function(t,n,i){var o=this.values_||(this.values_={});if(i)o[t]=n;else{var a=o[t];o[t]=n,a!==n&&this.notify(t,a)}},e.prototype.setProperties=function(t,n){for(var i in t)this.set(i,t[i],n)},e.prototype.applyProperties=function(t){t.values_&&zr(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,n){if(this.values_&&t in this.values_){var i=this.values_[t];delete this.values_[t],$u(this.values_)&&(this.values_=null),n||this.notify(t,i)}},e}(lD),io=rXt;var ii={ADD:"add",REMOVE:"remove"};var V2e=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),U2e={LENGTH:"length"},uD=function(r){V2e(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.element=n,o.index=i,o}return e}(bi);var nXt=function(r){V2e(e,r);function e(t,n){var i=r.call(this)||this;i.on,i.once,i.un;var o=n||{};if(i.unique_=!!o.unique,i.array_=t||[],i.unique_)for(var a=0,c=i.array_.length;a<c;++a)i.assertUnique_(i.array_[a],a);return i.updateLength_(),i}return e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var n=0,i=t.length;n<i;++n)this.push(t[n]);return this},e.prototype.forEach=function(t){for(var n=this.array_,i=0,o=n.length;i<o;++i)t(n[i],i,n)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(U2e.LENGTH)},e.prototype.insertAt=function(t,n){this.unique_&&this.assertUnique_(n),this.array_.splice(t,0,n),this.updateLength_(),this.dispatchEvent(new uD(ii.ADD,n,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var n=this.getLength();return this.insertAt(n,t),this.getLength()},e.prototype.remove=function(t){for(var n=this.array_,i=0,o=n.length;i<o;++i)if(n[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var n=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new uD(ii.REMOVE,n,t)),n},e.prototype.setAt=function(t,n){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(n,t);var o=this.array_[t];this.array_[t]=n,this.dispatchEvent(new uD(ii.REMOVE,o,t)),this.dispatchEvent(new uD(ii.ADD,n,t))}else{for(var a=i;a<t;++a)this.insertAt(a,void 0);this.insertAt(t,n)}},e.prototype.updateLength_=function(){this.set(U2e.LENGTH,this.array_.length)},e.prototype.assertUnique_=function(t,n){for(var i=0,o=this.array_.length;i<o;++i)if(this.array_[i]===t&&i!==n)throw new oD(58)},e}(io),Kn=nXt;function ar(r,e){if(!r)throw new oD(e)}var iXt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),oXt=function(r){iXt(e,r);function e(t){var n=r.call(this)||this;if(n.on,n.once,n.un,n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addChangeListener(n.geometryName_,n.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){var i=t;n.setGeometry(i)}else{var o=t;n.setProperties(o)}return n}return e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var i=this.getStyle();return i&&t.setStyle(i),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Yr(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Ar(t,Pt.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?aXt(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(io);function aXt(r){if(typeof r=="function")return r;var e;if(Array.isArray(r))e=r;else{ar(typeof r.getZIndex=="function",41);var t=r;e=[t]}return function(){return e}}var ml=oXt;var Hu={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},qLr={9001:Hu.METERS,9002:Hu.FEET,9003:Hu.USFEET,9101:Hu.RADIANS,9102:Hu.DEGREES};var Ca={};Ca[Hu.RADIANS]=6370997/(2*Math.PI);Ca[Hu.DEGREES]=2*Math.PI*6370997/360;Ca[Hu.FEET]=.3048;Ca[Hu.METERS]=1;Ca[Hu.USFEET]=1200/3937;var Ma=Hu;var vd=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",G2e=vd.indexOf("firefox")!==-1,sXt=vd.indexOf("safari")!==-1&&vd.indexOf("chrom")==-1,$2e=sXt&&!!(vd.indexOf("version/15.4")>=0||vd.match(/cpu (os|iphone os) 15_4 like mac os x/)),H2e=vd.indexOf("webkit")!==-1&&vd.indexOf("edge")==-1,W2e=vd.indexOf("macintosh")!==-1,cD=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,gd=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,Z2e=typeof Image!="undefined"&&Image.prototype.decode,fD=function(){var r=!1;try{var e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return r}();var gW=new Array(6);function Di(){return[1,0,0,1,0,0]}function s0(r){return pE(r,1,0,0,1,0,0)}function yW(r,e){var t=r[0],n=r[1],i=r[2],o=r[3],a=r[4],c=r[5],h=e[0],d=e[1],v=e[2],x=e[3],S=e[4],T=e[5];return r[0]=t*h+i*d,r[1]=n*h+o*d,r[2]=t*v+i*x,r[3]=n*v+o*x,r[4]=t*S+i*T+a,r[5]=n*S+o*T+c,r}function pE(r,e,t,n,i,o,a){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=o,r[5]=a,r}function K2e(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function On(r,e){var t=e[0],n=e[1];return e[0]=r[0]*t+r[2]*n+r[4],e[1]=r[1]*t+r[3]*n+r[5],e}function hD(r,e){var t=Math.cos(e),n=Math.sin(e);return yW(r,pE(gW,t,n,-n,t,0,0))}function dE(r,e,t){return yW(r,pE(gW,e,0,0,t,0,0))}function X2e(r,e,t){return pE(r,e,0,0,t,0,0)}function J2e(r,e,t){return yW(r,pE(gW,1,0,0,1,e,t))}function oo(r,e,t,n,i,o,a,c){var h=Math.sin(o),d=Math.cos(o);return r[0]=n*d,r[1]=i*h,r[2]=-n*h,r[3]=i*d,r[4]=a*n*d-c*n*h+e,r[5]=a*i*h+c*i*d+t,r}function l0(r,e){var t=lXt(e);ar(t!==0,32);var n=e[0],i=e[1],o=e[2],a=e[3],c=e[4],h=e[5];return r[0]=a/t,r[1]=-i/t,r[2]=-o/t,r[3]=n/t,r[4]=(o*h-a*c)/t,r[5]=-(n*h-i*c)/t,r}function lXt(r){return r[0]*r[3]-r[1]*r[2]}var Y2e;function pD(r){var e="matrix("+r.join(", ")+")";if(gd)return e;var t=Y2e||(Y2e=document.createElement("div"));return t.style.transform=e,t.style.transform}var ao={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ea(r){for(var e=Ni(),t=0,n=r.length;t<n;++t)bv(e,r[t]);return e}function uXt(r,e,t){var n=Math.min.apply(null,r),i=Math.min.apply(null,e),o=Math.max.apply(null,r),a=Math.max.apply(null,e);return Ra(n,i,o,a,t)}function Wu(r,e,t){return t?(t[0]=r[0]-e,t[1]=r[1]-e,t[2]=r[2]+e,t[3]=r[3]+e,t):[r[0]-e,r[1]-e,r[2]+e,r[3]+e]}function mD(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r.slice()}function qs(r,e,t){var n,i;return e<r[0]?n=r[0]-e:r[2]<e?n=e-r[2]:n=0,t<r[1]?i=r[1]-t:r[3]<t?i=t-r[3]:i=0,n*n+i*i}function es(r,e){return mE(r,e[0],e[1])}function ah(r,e){return r[0]<=e[0]&&e[2]<=r[2]&&r[1]<=e[1]&&e[3]<=r[3]}function mE(r,e,t){return r[0]<=e&&e<=r[2]&&r[1]<=t&&t<=r[3]}function dD(r,e){var t=r[0],n=r[1],i=r[2],o=r[3],a=e[0],c=e[1],h=ao.UNKNOWN;return a<t?h=h|ao.LEFT:a>i&&(h=h|ao.RIGHT),c<n?h=h|ao.BELOW:c>o&&(h=h|ao.ABOVE),h===ao.UNKNOWN&&(h=ao.INTERSECTING),h}function Ni(){return[1/0,1/0,-1/0,-1/0]}function Ra(r,e,t,n,i){return i?(i[0]=r,i[1]=e,i[2]=t,i[3]=n,i):[r,e,t,n]}function yd(r){return Ra(1/0,1/0,-1/0,-1/0,r)}function u0(r,e){var t=r[0],n=r[1];return Ra(t,n,t,n,e)}function vD(r,e,t,n,i){var o=yd(i);return _W(o,r,e,t,n)}function sh(r,e){return r[0]==e[0]&&r[2]==e[2]&&r[1]==e[1]&&r[3]==e[3]}function gD(r,e){return e[0]<r[0]&&(r[0]=e[0]),e[2]>r[2]&&(r[2]=e[2]),e[1]<r[1]&&(r[1]=e[1]),e[3]>r[3]&&(r[3]=e[3]),r}function bv(r,e){e[0]<r[0]&&(r[0]=e[0]),e[0]>r[2]&&(r[2]=e[0]),e[1]<r[1]&&(r[1]=e[1]),e[1]>r[3]&&(r[3]=e[1])}function _W(r,e,t,n,i){for(;t<n;t+=i)cXt(r,e[t],e[t+1]);return r}function cXt(r,e,t){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}function c0(r,e){var t;return t=e(f0(r)),t||(t=e(h0(r)),t)||(t=e(p0(r)),t)||(t=e(au(r)),t)?t:!1}function vE(r){var e=0;return Sv(r)||(e=sn(r)*_o(r)),e}function f0(r){return[r[0],r[1]]}function h0(r){return[r[2],r[1]]}function js(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function Q2e(r,e){var t;return e==="bottom-left"?t=f0(r):e==="bottom-right"?t=h0(r):e==="top-left"?t=au(r):e==="top-right"?t=p0(r):ar(!1,13),t}function gE(r,e,t,n,i){var o=yD(r,e,t,n),a=o[0],c=o[1],h=o[2],d=o[3],v=o[4],x=o[5],S=o[6],T=o[7];return Ra(Math.min(a,h,v,S),Math.min(c,d,x,T),Math.max(a,h,v,S),Math.max(c,d,x,T),i)}function yD(r,e,t,n){var i=e*n[0]/2,o=e*n[1]/2,a=Math.cos(t),c=Math.sin(t),h=i*a,d=i*c,v=o*a,x=o*c,S=r[0],T=r[1];return[S-h+x,T-d-v,S-h-x,T-d+v,S+h-x,T+d+v,S+h+x,T+d-v,S-h+x,T-d-v]}function _o(r){return r[3]-r[1]}function ou(r,e,t){var n=t||Ni();return Si(r,e)?(r[0]>e[0]?n[0]=r[0]:n[0]=e[0],r[1]>e[1]?n[1]=r[1]:n[1]=e[1],r[2]<e[2]?n[2]=r[2]:n[2]=e[2],r[3]<e[3]?n[3]=r[3]:n[3]=e[3]):yd(n),n}function au(r){return[r[0],r[3]]}function p0(r){return[r[2],r[3]]}function sn(r){return r[2]-r[0]}function Si(r,e){return r[0]<=e[2]&&r[2]>=e[0]&&r[1]<=e[3]&&r[3]>=e[1]}function Sv(r){return r[2]<r[0]||r[3]<r[1]}function eke(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r}function tke(r,e,t){var n=!1,i=dD(r,e),o=dD(r,t);if(i===ao.INTERSECTING||o===ao.INTERSECTING)n=!0;else{var a=r[0],c=r[1],h=r[2],d=r[3],v=e[0],x=e[1],S=t[0],T=t[1],L=(T-x)/(S-v),k=void 0,R=void 0;o&ao.ABOVE&&!(i&ao.ABOVE)&&(k=S-(T-d)/L,n=k>=a&&k<=h),!n&&o&ao.RIGHT&&!(i&ao.RIGHT)&&(R=T-(S-h)*L,n=R>=c&&R<=d),!n&&o&ao.BELOW&&!(i&ao.BELOW)&&(k=S-(T-c)/L,n=k>=a&&k<=h),!n&&o&ao.LEFT&&!(i&ao.LEFT)&&(R=T-(S-a)*L,n=R>=c&&R<=d)}return n}function rke(r,e,t,n){var i=[];if(n>1)for(var o=r[2]-r[0],a=r[3]-r[1],c=0;c<n;++c)i.push(r[0]+o*c/n,r[1],r[2],r[1]+a*c/n,r[2]-o*c/n,r[3],r[0],r[3]-a*c/n);else i=[r[0],r[1],r[2],r[1],r[2],r[3],r[0],r[3]];e(i,i,2);for(var h=[],d=[],c=0,v=i.length;c<v;c+=2)h.push(i[c]),d.push(i[c+1]);return uXt(h,d,t)}function xW(r,e){var t=e.getExtent(),n=js(r);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){var i=sn(t),o=Math.floor((n[0]-t[0])/i),a=o*i;r[0]-=a,r[2]-=a}return r}function nke(r,e){if(e.canWrapX()){var t=e.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[t[0],r[1],t[2],r[3]]];xW(r,e);var n=sn(t);if(sn(r)>n)return[[t[0],r[1],t[2],r[3]]];if(r[0]<t[0])return[[r[0]+n,r[1],t[2],r[3]],[t[0],r[1],r[2],r[3]]];if(r[2]>t[2])return[[r[0],r[1],t[2],r[3]],[t[0],r[1],r[2]-n,r[3]]]}return[r]}var fXt=function(){function r(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}return r.prototype.canWrapX=function(){return this.canWrapX_},r.prototype.getCode=function(){return this.code_},r.prototype.getExtent=function(){return this.extent_},r.prototype.getUnits=function(){return this.units_},r.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Ca[this.units_]},r.prototype.getWorldExtent=function(){return this.worldExtent_},r.prototype.getAxisOrientation=function(){return this.axisOrientation_},r.prototype.isGlobal=function(){return this.global_},r.prototype.setGlobal=function(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)},r.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},r.prototype.setDefaultTileGrid=function(e){this.defaultTileGrid_=e},r.prototype.setExtent=function(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)},r.prototype.setWorldExtent=function(e){this.worldExtent_=e},r.prototype.setGetPointResolution=function(e){this.getPointResolutionFunc_=e},r.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},r}(),_D=fXt;function Fn(r,e,t){return Math.min(Math.max(r,e),t)}var ike=function(){var r;return"cosh"in Math?r=Math.cosh:r=function(e){var t=Math.exp(e);return(t+1/t)/2},r}(),xD=function(){var r;return"log2"in Math?r=Math.log2:r=function(e){return Math.log(e)*Math.LOG2E},r}();function oke(r,e,t,n,i,o){var a=i-t,c=o-n;if(a!==0||c!==0){var h=((r-t)*a+(e-n)*c)/(a*a+c*c);h>1?(t=i,n=o):h>0&&(t+=a*h,n+=c*h)}return Zu(r,e,t,n)}function Zu(r,e,t,n){var i=t-r,o=n-e;return i*i+o*o}function ake(r){for(var e=r.length,t=0;t<e;t++){for(var n=t,i=Math.abs(r[t][t]),o=t+1;o<e;o++){var a=Math.abs(r[o][t]);a>i&&(i=a,n=o)}if(i===0)return null;var c=r[n];r[n]=r[t],r[t]=c;for(var h=t+1;h<e;h++)for(var d=-r[h][t]/r[t][t],v=t;v<e+1;v++)t==v?r[h][v]=0:r[h][v]+=d*r[t][v]}for(var x=new Array(e),S=e-1;S>=0;S--){x[S]=r[S][e]/r[S][S];for(var T=S-1;T>=0;T--)r[T][e]-=r[T][S]*x[S]}return x}function d0(r){return r*Math.PI/180}function vl(r,e){var t=r%e;return t*e<0?t+e:t}function su(r,e,t){return r+t*(e-r)}function ske(r,e){var t=Math.pow(10,e);return Math.round(r*t)/t}function yE(r,e){return Math.floor(ske(r,e))}function _E(r,e){return Math.ceil(ske(r,e))}var hXt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xE=6378137,v0=Math.PI*xE,pXt=[-v0,-v0,v0,v0],dXt=[-180,-85,180,85],wD=xE*Math.log(Math.tan(Math.PI/2)),m0=function(r){hXt(e,r);function e(t){return r.call(this,{code:t,units:Ma.METERS,extent:pXt,global:!0,worldExtent:dXt,getPointResolution:function(n,i){return n/ike(i[1]/xE)}})||this}return e}(_D),wW=[new m0("EPSG:3857"),new m0("EPSG:102100"),new m0("EPSG:102113"),new m0("EPSG:900913"),new m0("http://www.opengis.net/def/crs/EPSG/0/3857"),new m0("http://www.opengis.net/gml/srs/epsg.xml#3857")];function lke(r,e,t){var n=r.length,i=t>1?t:2,o=e;o===void 0&&(i>2?o=r.slice():o=new Array(n));for(var a=0;a<n;a+=i){o[a]=v0*r[a]/180;var c=xE*Math.log(Math.tan(Math.PI*(+r[a+1]+90)/360));c>wD?c=wD:c<-wD&&(c=-wD),o[a+1]=c}return o}function uke(r,e,t){var n=r.length,i=t>1?t:2,o=e;o===void 0&&(i>2?o=r.slice():o=new Array(n));for(var a=0;a<n;a+=i)o[a]=180*r[a]/v0,o[a+1]=360*Math.atan(Math.exp(r[a+1]/xE))/Math.PI-90;return o}var mXt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),vXt=6378137,cke=[-180,-90,180,90],gXt=Math.PI*vXt/180,Ev=function(r){mXt(e,r);function e(t,n){return r.call(this,{code:t,units:Ma.DEGREES,extent:cke,axisOrientation:n,global:!0,metersPerUnit:gXt,worldExtent:cke})||this}return e}(_D),bW=[new Ev("CRS:84"),new Ev("EPSG:4326","neu"),new Ev("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ev("urn:ogc:def:crs:OGC:2:84"),new Ev("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ev("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ev("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var SW={};function fke(r){return SW[r]||SW[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function hke(r,e){SW[r]=e}var g0={};function wE(r,e,t){var n=r.getCode(),i=e.getCode();n in g0||(g0[n]={}),g0[n][i]=t}function pke(r,e){var t;return r in g0&&e in g0[r]&&(t=g0[r][e]),t}function dke(r,e){for(var t=(""+r).split("."),n=(""+e).split("."),i=0;i<Math.max(t.length,n.length);i++){var o=parseInt(t[i]||"0",10),a=parseInt(n[i]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}function mke(r,e){return r[0]+=+e[0],r[1]+=+e[1],r}function EW(r,e){var t=r[0],n=r[1],i=e[0],o=e[1],a=i[0],c=i[1],h=o[0],d=o[1],v=h-a,x=d-c,S=v===0&&x===0?0:(v*(t-a)+x*(n-c))/(v*v+x*x||0),T,L;return S<=0?(T=a,L=c):S>=1?(T=h,L=d):(T=a+S*v,L=c+S*x),[T,L]}function ts(r,e){for(var t=!0,n=r.length-1;n>=0;--n)if(r[n]!=e[n]){t=!1;break}return t}function y0(r,e){var t=Math.cos(e),n=Math.sin(e),i=r[0]*t-r[1]*n,o=r[1]*t+r[0]*n;return r[0]=i,r[1]=o,r}function vke(r,e){return r[0]*=e,r[1]*=e,r}function _d(r,e){var t=r[0]-e[0],n=r[1]-e[1];return t*t+n*n}function IW(r,e){return Math.sqrt(_d(r,e))}function gke(r,e){return _d(r,EW(r,e))}function bD(r,e){if(e.canWrapX()){var t=sn(e.getExtent()),n=yke(r,e,t);n&&(r[0]-=n*t)}return r}function yke(r,e,t){var n=e.getExtent(),i=0;if(e.canWrapX()&&(r[0]<n[0]||r[0]>n[2])){var o=t||sn(n);i=Math.floor((r[0]-n[0])/o)}return i}var yXt=6371008.8;function TW(r,e,t){var n=t||yXt,i=d0(r[1]),o=d0(e[1]),a=(o-i)/2,c=d0(e[0]-r[0])/2,h=Math.sin(a)*Math.sin(a)+Math.sin(c)*Math.sin(c)*Math.cos(i)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}var AW=!0;function xke(r){var e=r===void 0?!0:r;AW=!e}function CW(r,e,t){var n;if(e!==void 0){for(var i=0,o=r.length;i<o;++i)e[i]=r[i];n=e}else n=r.slice();return n}function wke(r,e,t){if(e!==void 0&&r!==e){for(var n=0,i=r.length;n<i;++n)e[n]=r[n];r=e}return r}function _Xt(r){hke(r.getCode(),r),wE(r,r,CW)}function xXt(r){r.forEach(_Xt)}function Xn(r){return typeof r=="string"?fke(r):r||null}function MW(r,e,t,n){r=Xn(r);var i,o=r.getPointResolutionFunc();if(o){if(i=o(e,t),n&&n!==r.getUnits()){var a=r.getMetersPerUnit();a&&(i=i*a/Ca[n])}}else{var c=r.getUnits();if(c==Ma.DEGREES&&!n||n==Ma.DEGREES)i=e;else{var h=bE(r,Xn("EPSG:4326"));if(h===wke&&c!==Ma.DEGREES)i=e*r.getMetersPerUnit();else{var d=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];d=h(d,d,2);var v=TW(d.slice(0,2),d.slice(2,4)),x=TW(d.slice(4,6),d.slice(6,8));i=(v+x)/2}var a=n?Ca[n]:r.getMetersPerUnit();a!==void 0&&(i/=a)}}return i}function _ke(r){xXt(r),r.forEach(function(e){r.forEach(function(t){e!==t&&wE(e,t,CW)})})}function wXt(r,e,t,n){r.forEach(function(i){e.forEach(function(o){wE(i,o,t),wE(o,i,n)})})}function SD(r,e){return r?typeof r=="string"?Xn(r):r:Xn(e)}function Bc(r,e){if(r===e)return!0;var t=r.getUnits()===e.getUnits();if(r.getCode()===e.getCode())return t;var n=bE(r,e);return n===CW&&t}function bE(r,e){var t=r.getCode(),n=e.getCode(),i=pke(t,n);return i||(i=wke),i}function Iv(r,e){var t=Xn(r),n=Xn(e);return bE(t,n)}function Ku(r,e,t){var n=Iv(e,t);return n(r,void 0,r.length)}function Tv(r,e,t,n){var i=Iv(e,t);return rke(r,i,void 0,n)}var Yu=null;function lu(){return Yu}function xd(r,e){return Yu?Ku(r,e,Yu):r}function pi(r,e){return Yu?Ku(r,Yu,e):(AW&&!ts(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(AW=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r)}function wd(r,e){return Yu?Tv(r,e,Yu):r}function Pa(r,e){return Yu?Tv(r,Yu,e):r}function bke(r,e){if(!Yu)return r;var t=Xn(e).getUnits(),n=Yu.getUnits();return t&&n?r*Ca[t]/Ca[n]:r}function bXt(){_ke(wW),_ke(bW),wXt(bW,wW,lke,uke)}bXt();function uu(r,e,t,n,i,o){for(var a=o||[],c=0,h=e;h<t;h+=n){var d=r[h],v=r[h+1];a[c++]=i[0]*d+i[2]*v+i[4],a[c++]=i[1]*d+i[3]*v+i[5]}return o&&a.length!=c&&(a.length=c),a}function _0(r,e,t,n,i,o,a){for(var c=a||[],h=Math.cos(i),d=Math.sin(i),v=o[0],x=o[1],S=0,T=e;T<t;T+=n){var L=r[T]-v,k=r[T+1]-x;c[S++]=v+L*h-k*d,c[S++]=x+L*d+k*h;for(var R=T+2;R<T+n;++R)c[S++]=r[R]}return a&&c.length!=S&&(c.length=S),c}function Ske(r,e,t,n,i,o,a,c){for(var h=c||[],d=a[0],v=a[1],x=0,S=e;S<t;S+=n){var T=r[S]-d,L=r[S+1]-v;h[x++]=d+i*T,h[x++]=v+o*L;for(var k=S+2;k<S+n;++k)h[x++]=r[k]}return c&&h.length!=x&&(h.length=x),h}function ED(r,e,t,n,i,o,a){for(var c=a||[],h=0,d=e;d<t;d+=n){c[h++]=r[d]+i,c[h++]=r[d+1]+o;for(var v=d+2;v<d+n;++v)c[h++]=r[v]}return a&&c.length!=h&&(c.length=h),c}var SXt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Eke=Di(),EXt=function(r){SXt(e,r);function e(){var t=r.call(this)||this;return t.extent_=Ni(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=F2e(function(n,i,o){if(!o)return this.getSimplifiedGeometry(i);var a=this.clone();return a.applyTransform(o),a.getSimplifiedGeometry(i)}),t}return e.prototype.simplifyTransformed=function(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)},e.prototype.clone=function(){return ir()},e.prototype.closestPointXY=function(t,n,i,o){return ir()},e.prototype.containsXY=function(t,n){var i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n},e.prototype.getClosestPoint=function(t,n){var i=n||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return ir()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&yd(n),this.extentRevision_=this.getRevision()}return eke(this.extent_,t)},e.prototype.rotate=function(t,n){ir()},e.prototype.scale=function(t,n,i){ir()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return ir()},e.prototype.getType=function(){return ir()},e.prototype.applyTransform=function(t){ir()},e.prototype.intersectsExtent=function(t){return ir()},e.prototype.translate=function(t,n){ir()},e.prototype.transform=function(t,n){var i=Xn(t),o=i.getUnits()==Ma.TILE_PIXELS?function(a,c,h){var d=i.getExtent(),v=i.getWorldExtent(),x=_o(v)/_o(d);return oo(Eke,v[0],v[3],x,-x,0,0,0),uu(a,0,a.length,h,Eke,c),Iv(i,n)(a,c,h)}:Iv(i,n);return this.applyTransform(o),this},e}(io),ID=EXt;var IXt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),TXt=function(r){IXt(e,r);function e(t){var n=r.call(this)||this;return n.geometries_=t||null,n.changeEventsKeys_=[],n.listenGeometriesChange_(),n}return e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(Yr),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,n=this.geometries_.length;t<n;++t)this.changeEventsKeys_.push(Ar(this.geometries_[t],Pt.CHANGE,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){if(o<qs(this.getExtent(),t,n))return o;for(var a=this.geometries_,c=0,h=a.length;c<h;++c)o=a[c].closestPointXY(t,n,i,o);return o},e.prototype.containsXY=function(t,n){for(var i=this.geometries_,o=0,a=i.length;o<a;++o)if(i[o].containsXY(t,n))return!0;return!1},e.prototype.computeExtent=function(t){yd(t);for(var n=this.geometries_,i=0,o=n.length;i<o;++i)gD(t,n[i].getExtent());return t},e.prototype.getGeometries=function(){return Ike(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],n=this.geometries_,i=0,o=n.length;i<o;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var n=[],i=this.geometries_,o=!1,a=0,c=i.length;a<c;++a){var h=i[a],d=h.getSimplifiedGeometry(t);n.push(d),d!==h&&(o=!0)}if(o){var v=new e(null);return v.setGeometriesArray(n),v}else return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return"GeometryCollection"},e.prototype.intersectsExtent=function(t){for(var n=this.geometries_,i=0,o=n.length;i<o;++i)if(n[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return this.geometries_.length===0},e.prototype.rotate=function(t,n){for(var i=this.geometries_,o=0,a=i.length;o<a;++o)i[o].rotate(t,n);this.changed()},e.prototype.scale=function(t,n,i){var o=i;o||(o=js(this.getExtent()));for(var a=this.geometries_,c=0,h=a.length;c<h;++c)a[c].scale(t,n,o);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(Ike(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var n=this.geometries_,i=0,o=n.length;i<o;++i)n[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,n){for(var i=this.geometries_,o=0,a=i.length;o<a;++o)i[o].translate(t,n);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),r.prototype.disposeInternal.call(this)},e}(ID);function Ike(r){for(var e=[],t=0,n=r.length;t<n;++t)e.push(r[t].clone());return e}var Tke=TXt;var AXt=function(){function r(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return r.prototype.getReadOptions=function(e,t){var n;if(t){var i=t.dataProjection?Xn(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()===Ma.TILE_PIXELS&&(i=Xn(i),i.setWorldExtent(t.extent)),n={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(n)},r.prototype.adaptOptions=function(e){return zr({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)},r.prototype.getType=function(){return ir()},r.prototype.readFeature=function(e,t){return ir()},r.prototype.readFeatures=function(e,t){return ir()},r.prototype.readGeometry=function(e,t){return ir()},r.prototype.readProjection=function(e){return ir()},r.prototype.writeFeature=function(e,t){return ir()},r.prototype.writeFeatures=function(e,t){return ir()},r.prototype.writeGeometry=function(e,t){return ir()},r}(),Ake=AXt;function RW(r,e,t){var n=t?Xn(t.featureProjection):null,i=t?Xn(t.dataProjection):null,o;if(n&&i&&!Bc(n,i)?o=(e?r.clone():r).transform(e?n:i,e?i:n):o=r,e&&t&&t.decimals!==void 0){var a=Math.pow(10,t.decimals),c=function(h){for(var d=0,v=h.length;d<v;++d)h[d]=Math.round(h[d]*a)/a;return h};o===r&&(o=r.clone()),o.applyTransform(c)}return o}var CXt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),MXt=function(r){CXt(e,r);function e(){return r.call(this)||this}return e.prototype.getType=function(){return"json"},e.prototype.readFeature=function(t,n){return this.readFeatureFromObject(TD(t),this.getReadOptions(t,n))},e.prototype.readFeatures=function(t,n){return this.readFeaturesFromObject(TD(t),this.getReadOptions(t,n))},e.prototype.readFeatureFromObject=function(t,n){return ir()},e.prototype.readFeaturesFromObject=function(t,n){return ir()},e.prototype.readGeometry=function(t,n){return this.readGeometryFromObject(TD(t),this.getReadOptions(t,n))},e.prototype.readGeometryFromObject=function(t,n){return ir()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(TD(t))},e.prototype.readProjectionFromObject=function(t){return ir()},e.prototype.writeFeature=function(t,n){return JSON.stringify(this.writeFeatureObject(t,n))},e.prototype.writeFeatureObject=function(t,n){return ir()},e.prototype.writeFeatures=function(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))},e.prototype.writeFeaturesObject=function(t,n){return ir()},e.prototype.writeGeometry=function(t,n){return JSON.stringify(this.writeGeometryObject(t,n))},e.prototype.writeGeometryObject=function(t,n){return ir()},e}(Ake);function TD(r){if(typeof r=="string"){var e=JSON.parse(r);return e||null}else return r!==null?r:null}var Cke=MXt;var zn={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};var RXt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),PXt=function(r){RXt(e,r);function e(){var t=r.call(this)||this;return t.layout=zn.XY,t.stride=2,t.flatCoordinates=null,t}return e.prototype.computeExtent=function(t){return vD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return ir()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(t),i=n.getFlatCoordinates();return i.length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,n){this.stride=SE(t),this.layout=t,this.flatCoordinates=n},e.prototype.setCoordinates=function(t,n){ir()},e.prototype.setLayout=function(t,n,i){var o;if(t)o=SE(t);else{for(var a=0;a<i;++a)if(n.length===0){this.layout=zn.XY,this.stride=2;return}else n=n[0];o=n.length,t=OXt(o)}this.layout=t,this.stride=o},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,n){var i=this.getFlatCoordinates();if(i){var o=this.getStride();_0(i,0,i.length,o,t,n,i),this.changed()}},e.prototype.scale=function(t,n,i){var o=n;o===void 0&&(o=t);var a=i;a||(a=js(this.getExtent()));var c=this.getFlatCoordinates();if(c){var h=this.getStride();Ske(c,0,c.length,h,t,o,a,c),this.changed()}},e.prototype.translate=function(t,n){var i=this.getFlatCoordinates();if(i){var o=this.getStride();ED(i,0,i.length,o,t,n,i),this.changed()}},e}(ID);function OXt(r){var e;return r==2?e=zn.XY:r==3?e=zn.XYZ:r==4&&(e=zn.XYZM),e}function SE(r){var e;return r==zn.XY?e=2:r==zn.XYZ||r==zn.XYM?e=3:r==zn.XYZM&&(e=4),e}function Mke(r,e,t){var n=r.getFlatCoordinates();if(n){var i=r.getStride();return uu(n,0,n.length,i,e,t)}else return null}var Oa=PXt;function Rke(r,e,t,n,i,o,a){var c=r[e],h=r[e+1],d=r[t]-c,v=r[t+1]-h,x;if(d===0&&v===0)x=e;else{var S=((i-c)*d+(o-h)*v)/(d*d+v*v);if(S>1)x=t;else if(S>0){for(var T=0;T<n;++T)a[T]=su(r[e+T],r[t+T],S);a.length=n;return}else x=e}for(var T=0;T<n;++T)a[T]=r[x+T];a.length=n}function EE(r,e,t,n,i){var o=r[e],a=r[e+1];for(e+=n;e<t;e+=n){var c=r[e],h=r[e+1],d=Zu(o,a,c,h);d>i&&(i=d),o=c,a=h}return i}function IE(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o){var c=t[o];i=EE(r,e,c,n,i),e=c}return i}function Pke(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o){var c=t[o];i=IE(r,e,c,n,i),e=c[c.length-1]}return i}function TE(r,e,t,n,i,o,a,c,h,d,v){if(e==t)return d;var x,S;if(i===0)if(S=Zu(a,c,r[e],r[e+1]),S<d){for(x=0;x<n;++x)h[x]=r[e+x];return h.length=n,S}else return d;for(var T=v||[NaN,NaN],L=e+n;L<t;)if(Rke(r,L-n,L,n,a,c,T),S=Zu(a,c,T[0],T[1]),S<d){for(d=S,x=0;x<n;++x)h[x]=T[x];h.length=n,L+=n}else L+=n*Math.max((Math.sqrt(S)-Math.sqrt(d))/i|0,1);if(o&&(Rke(r,t-n,e,n,a,c,T),S=Zu(a,c,T[0],T[1]),S<d)){for(d=S,x=0;x<n;++x)h[x]=T[x];h.length=n}return d}function AE(r,e,t,n,i,o,a,c,h,d,v){for(var x=v||[NaN,NaN],S=0,T=t.length;S<T;++S){var L=t[S];d=TE(r,e,L,n,i,o,a,c,h,d,x),e=L}return d}function Oke(r,e,t,n,i,o,a,c,h,d,v){for(var x=v||[NaN,NaN],S=0,T=t.length;S<T;++S){var L=t[S];d=AE(r,e,L,n,i,o,a,c,h,d,x),e=L[L.length-1]}return d}function AD(r,e,t,n){for(var i=0,o=t.length;i<o;++i)r[e++]=t[i];return e}function Av(r,e,t,n){for(var i=0,o=t.length;i<o;++i)for(var a=t[i],c=0;c<n;++c)r[e++]=a[c];return e}function CE(r,e,t,n,i){for(var o=i||[],a=0,c=0,h=t.length;c<h;++c){var d=Av(r,e,t[c],n);o[a++]=d,e=d}return o.length=a,o}function Lke(r,e,t,n,i){for(var o=i||[],a=0,c=0,h=t.length;c<h;++c){var d=CE(r,e,t[c],n,o[a]);o[a++]=d,e=d[d.length-1]}return o.length=a,o}function ME(r,e,t,n,i,o,a){var c=(t-e)/n;if(c<3){for(;e<t;e+=n)o[a++]=r[e],o[a++]=r[e+1];return a}var h=new Array(c);h[0]=1,h[c-1]=1;for(var d=[e,t-n],v=0;d.length>0;){for(var x=d.pop(),S=d.pop(),T=0,L=r[S],k=r[S+1],R=r[x],D=r[x+1],j=S+n;j<x;j+=n){var B=r[j],$=r[j+1],ee=oke(B,$,L,k,R,D);ee>T&&(v=j,T=ee)}T>i&&(h[(v-e)/n]=1,S+n<v&&d.push(S,v),v+n<x&&d.push(v,x))}for(var j=0;j<c;++j)h[j]&&(o[a++]=r[e+j*n],o[a++]=r[e+j*n+1]);return a}function Dke(r,e,t,n,i,o,a,c){for(var h=0,d=t.length;h<d;++h){var v=t[h];a=ME(r,e,v,n,i,o,a),c.push(a),e=v}return a}function bd(r,e){return e*Math.round(r/e)}function LXt(r,e,t,n,i,o,a){if(e==t)return a;var c=bd(r[e],i),h=bd(r[e+1],i);e+=n,o[a++]=c,o[a++]=h;var d,v;do if(d=bd(r[e],i),v=bd(r[e+1],i),e+=n,e==t)return o[a++]=d,o[a++]=v,a;while(d==c&&v==h);for(;e<t;){var x=bd(r[e],i),S=bd(r[e+1],i);if(e+=n,!(x==d&&S==v)){var T=d-c,L=v-h,k=x-c,R=S-h;if(T*R==L*k&&(T<0&&k<T||T==k||T>0&&k>T)&&(L<0&&R<L||L==R||L>0&&R>L)){d=x,v=S;continue}o[a++]=d,o[a++]=v,c=d,h=v,d=x,v=S}}return o[a++]=d,o[a++]=v,a}function PW(r,e,t,n,i,o,a,c){for(var h=0,d=t.length;h<d;++h){var v=t[h];a=LXt(r,e,v,n,i,o,a),c.push(a),e=v}return a}function Nke(r,e,t,n,i,o,a,c){for(var h=0,d=t.length;h<d;++h){var v=t[h],x=[];a=PW(r,e,v,n,i,o,a,x),c.push(x),e=v[v.length-1]}return a}function CD(r,e,t,n,i){var o;for(e+=n;e<t;e+=n)if(o=i(r.slice(e-n,e),r.slice(e,e+n)),o)return o;return!1}function cu(r,e,t,n,i){for(var o=i!==void 0?i:[],a=0,c=e;c<t;c+=n)o[a++]=r.slice(c,c+n);return o.length=a,o}function Sd(r,e,t,n,i){for(var o=i!==void 0?i:[],a=0,c=0,h=t.length;c<h;++c){var d=t[c];o[a++]=cu(r,e,d,n,o[a]),e=d}return o.length=a,o}function RE(r,e,t,n,i){for(var o=i!==void 0?i:[],a=0,c=0,h=t.length;c<h;++c){var d=t[c];o[a++]=Sd(r,e,d,n,o[a]),e=d[d.length-1]}return o.length=a,o}function RD(r,e,t,n,i,o,a){var c,h,d=(t-e)/n;if(d===1)c=e;else if(d===2)c=e,h=i;else if(d!==0){for(var v=r[e],x=r[e+1],S=0,T=[0],L=e+n;L<t;L+=n){var k=r[L],R=r[L+1];S+=Math.sqrt((k-v)*(k-v)+(R-x)*(R-x)),T.push(S),v=k,x=R}var D=i*S,j=k2e(T,D);j<0?(h=(D-T[-j-2])/(T[-j-1]-T[-j-2]),c=e+(-j-2)*n):c=e+j*n}for(var B=a>1?a:2,$=o||new Array(B),L=0;L<B;++L)$[L]=c===void 0?NaN:h===void 0?r[c+L]:su(r[c+L],r[c+n+L],h);return $}function MD(r,e,t,n,i,o){if(t==e)return null;var a;if(i<r[e+n-1])return o?(a=r.slice(e,e+n),a[n-1]=i,a):null;if(r[t-1]<i)return o?(a=r.slice(t-n,t),a[n-1]=i,a):null;if(i==r[e+n-1])return r.slice(e,e+n);for(var c=e/n,h=t/n;c<h;){var d=c+h>>1;i<r[(d+1)*n-1]?h=d:c=d+1}var v=r[c*n-1];if(i==v)return r.slice((c-1)*n,(c-1)*n+n);var x=r[(c+1)*n-1],S=(i-v)/(x-v);a=[];for(var T=0;T<n-1;++T)a.push(su(r[(c-1)*n+T],r[c*n+T],S));return a.push(i),a}function kke(r,e,t,n,i,o,a){if(a)return MD(r,e,t[t.length-1],n,i,o);var c;if(i<r[n-1])return o?(c=r.slice(0,n),c[n-1]=i,c):null;if(r[r.length-1]<i)return o?(c=r.slice(r.length-n),c[n-1]=i,c):null;for(var h=0,d=t.length;h<d;++h){var v=t[h];if(e!=v){if(i<r[e+n-1])return null;if(i<=r[v-1])return MD(r,e,v,n,i,!1);e=v}}return null}function qke(r,e,t,n,i){var o=c0(i,function(a){return!Ed(r,e,t,n,a[0],a[1])});return!o}function Ed(r,e,t,n,i,o){for(var a=0,c=r[t-n],h=r[t-n+1];e<t;e+=n){var d=r[e],v=r[e+1];h<=o?v>o&&(d-c)*(o-h)-(i-c)*(v-h)>0&&a++:v<=o&&(d-c)*(o-h)-(i-c)*(v-h)<0&&a--,c=d,h=v}return a!==0}function PE(r,e,t,n,i,o){if(t.length===0||!Ed(r,e,t[0],n,i,o))return!1;for(var a=1,c=t.length;a<c;++a)if(Ed(r,t[a-1],t[a],n,i,o))return!1;return!0}function jke(r,e,t,n,i,o){if(t.length===0)return!1;for(var a=0,c=t.length;a<c;++a){var h=t[a];if(PE(r,e,h,n,i,o))return!0;e=h[h.length-1]}return!1}function OE(r,e,t,n,i){var o=_W(Ni(),r,e,t,n);return Si(i,o)?ah(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:CD(r,e,t,n,function(a,c){return tke(i,a,c)}):!1}function Fke(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o){if(OE(r,e,t[o],n,i))return!0;e=t[o]}return!1}function OW(r,e,t,n,i){return!!(OE(r,e,t,n,i)||Ed(r,e,t,n,i[0],i[1])||Ed(r,e,t,n,i[0],i[3])||Ed(r,e,t,n,i[2],i[1])||Ed(r,e,t,n,i[2],i[3]))}function LW(r,e,t,n,i){if(!OW(r,e,t[0],n,i))return!1;if(t.length===1)return!0;for(var o=1,a=t.length;o<a;++o)if(qke(r,t[o-1],t[o],n,i)&&!OE(r,t[o-1],t[o],n,i))return!1;return!0}function zke(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o){var c=t[o];if(LW(r,e,c,n,i))return!0;e=c[c.length-1]}return!1}function PD(r,e,t,n){for(var i=r[e],o=r[e+1],a=0,c=e+n;c<t;c+=n){var h=r[c],d=r[c+1];a+=Math.sqrt((h-i)*(h-i)+(d-o)*(d-o)),i=h,o=d}return a}var DXt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),NXt=function(r){DXt(e,r);function e(t,n){var i=r.call(this)||this;return i.flatMidpoint_=null,i.flatMidpointRevision_=-1,i.maxDelta_=-1,i.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?i.setFlatCoordinates(n,t):i.setCoordinates(t,n),i}return e.prototype.appendCoordinate=function(t){this.flatCoordinates?ko(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){return o<qs(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(EE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),TE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,n,i,o))},e.prototype.forEachSegment=function(t){return CD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,n){if(this.layout!=zn.XYM&&this.layout!=zn.XYZM)return null;var i=n!==void 0?n:!1;return MD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return cu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,n){return RD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)},e.prototype.getLength=function(){return PD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=ME(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,zn.XY)},e.prototype.getType=function(){return"LineString"},e.prototype.intersectsExtent=function(t){return OE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Av(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Oa),lh=NXt;var kXt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qXt=function(r){kXt(e,r);function e(t,n,i){var o=r.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(t[0]))o.setCoordinates(t,n);else if(n!==void 0&&i)o.setFlatCoordinates(n,t),o.ends_=i;else{for(var a=o.getLayout(),c=t,h=[],d=[],v=0,x=c.length;v<x;++v){var S=c[v];v===0&&(a=S.getLayout()),ko(h,S.getFlatCoordinates()),d.push(h.length)}o.setFlatCoordinates(a,h),o.ends_=d}return o}return e.prototype.appendLineString=function(t){this.flatCoordinates?ko(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){return o<qs(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(IE(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),AE(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,n,i,o))},e.prototype.getCoordinateAtM=function(t,n,i){if(this.layout!=zn.XYM&&this.layout!=zn.XYZM||this.flatCoordinates.length===0)return null;var o=n!==void 0?n:!1,a=i!==void 0?i:!1;return kke(this.flatCoordinates,0,this.ends_,this.stride,t,o,a)},e.prototype.getCoordinates=function(){return Sd(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new lh(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,n=this.ends_,i=this.layout,o=[],a=0,c=0,h=n.length;c<h;++c){var d=n[c],v=new lh(t.slice(a,d),i);o.push(v),a=d}return o},e.prototype.getFlatMidpoints=function(){for(var t=[],n=this.flatCoordinates,i=0,o=this.ends_,a=this.stride,c=0,h=o.length;c<h;++c){var d=o[c],v=RD(n,i,d,a,.5);ko(t,v),i=d}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=Dke(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,i),new e(n,zn.XY,i)},e.prototype.getType=function(){return"MultiLineString"},e.prototype.intersectsExtent=function(t){return Fke(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=CE(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},e}(Oa),OD=qXt;var jXt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),FXt=function(r){jXt(e,r);function e(t,n){var i=r.call(this)||this;return i.setCoordinates(t,n),i}return e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){var a=this.flatCoordinates,c=Zu(t,n,a[0],a[1]);if(c<o){for(var h=this.stride,d=0;d<h;++d)i[d]=a[d];return i.length=h,c}else return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return u0(this.flatCoordinates,t)},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(t){return mE(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=AD(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Oa),La=FXt;var zXt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),BXt=function(r){zXt(e,r);function e(t,n){var i=r.call(this)||this;return n&&!Array.isArray(t[0])?i.setFlatCoordinates(n,t):i.setCoordinates(t,n),i}return e.prototype.appendPoint=function(t){this.flatCoordinates?ko(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){if(o<qs(this.getExtent(),t,n))return o;for(var a=this.flatCoordinates,c=this.stride,h=0,d=a.length;h<d;h+=c){var v=Zu(t,n,a[h],a[h+1]);if(v<o){o=v;for(var x=0;x<c;++x)i[x]=a[h+x];i.length=c}}return o},e.prototype.getCoordinates=function(){return cu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new La(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,n=this.layout,i=this.stride,o=[],a=0,c=t.length;a<c;a+=i){var h=new La(t.slice(a,a+i),n);o.push(h)}return o},e.prototype.getType=function(){return"MultiPoint"},e.prototype.intersectsExtent=function(t){for(var n=this.flatCoordinates,i=this.stride,o=0,a=n.length;o<a;o+=i){var c=n[o],h=n[o+1];if(mE(t,c,h))return!0}return!1},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Av(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Oa),x0=BXt;function DW(r,e,t,n){for(var i=0,o=r[t-n],a=r[t-n+1];e<t;e+=n){var c=r[e],h=r[e+1];i+=a*c-o*h,o=c,a=h}return i/2}function NW(r,e,t,n){for(var i=0,o=0,a=t.length;o<a;++o){var c=t[o];i+=DW(r,e,c,n),e=c}return i}function Bke(r,e,t,n){for(var i=0,o=0,a=t.length;o<a;++o){var c=t[o];i+=NW(r,e,c,n),e=c[c.length-1]}return i}var UXt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),VXt=function(r){UXt(e,r);function e(t,n){var i=r.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?i.setFlatCoordinates(n,t):i.setCoordinates(t,n),i}return e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,n,i,o){return o<qs(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(EE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),TE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,i,o))},e.prototype.getArea=function(){return DW(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return cu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=ME(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,zn.XY)},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Av(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Oa),kW=VXt;function qW(r,e,t,n,i,o,a){for(var c,h,d,v,x,S,T,L=i[o+1],k=[],R=0,D=t.length;R<D;++R){var j=t[R];for(v=r[j-n],S=r[j-n+1],c=e;c<j;c+=n)x=r[c],T=r[c+1],(L<=S&&T<=L||S<=L&&L<=T)&&(d=(L-S)/(T-S)*(x-v)+v,k.push(d)),v=x,S=T}var B=NaN,$=-1/0;for(k.sort(pl),v=k[0],c=1,h=k.length;c<h;++c){x=k[c];var ee=Math.abs(x-v);ee>$&&(d=(v+x)/2,PE(r,e,t,n,d,L)&&(B=d,$=ee)),v=x}return isNaN(B)&&(B=i[o]),a?(a.push(B,L,$),a):[B,L,$]}function Uke(r,e,t,n,i){for(var o=[],a=0,c=t.length;a<c;++a){var h=t[a];o=qW(r,e,h,n,i,2*a,o),e=h[h.length-1]}return o}function Vke(r,e,t,n){for(;e<t-n;){for(var i=0;i<n;++i){var o=r[e+i];r[e+i]=r[t-n+i],r[t-n+i]=o}e+=n,t-=n}}function Gke(r,e,t,n){for(var i=0,o=r[t-n],a=r[t-n+1];e<t;e+=n){var c=r[e],h=r[e+1];i+=(c-o)*(h+a),o=c,a=h}return i===0?void 0:i>0}function jW(r,e,t,n,i){for(var o=i!==void 0?i:!1,a=0,c=t.length;a<c;++a){var h=t[a],d=Gke(r,e,h,n);if(a===0){if(o&&d||!o&&!d)return!1}else if(o&&!d||!o&&d)return!1;e=h}return!0}function $ke(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o){var c=t[o];if(!jW(r,e,c,n,i))return!1;c.length&&(e=c[c.length-1])}return!0}function LD(r,e,t,n,i){for(var o=i!==void 0?i:!1,a=0,c=t.length;a<c;++a){var h=t[a],d=Gke(r,e,h,n),v=a===0?o&&d||!o&&!d:o&&!d||!o&&d;v&&Vke(r,e,h,n),e=h}return e}function FW(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o)e=LD(r,e,t[o],n,i);return e}var GXt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zW=function(r){GXt(e,r);function e(t,n,i){var o=r.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,n!==void 0&&i?(o.setFlatCoordinates(n,t),o.ends_=i):o.setCoordinates(t,n),o}return e.prototype.appendLinearRing=function(t){this.flatCoordinates?ko(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){return o<qs(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(IE(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),AE(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,i,o))},e.prototype.containsXY=function(t,n){return PE(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)},e.prototype.getArea=function(){return NW(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),LD(n,0,this.ends_,this.stride,t)):n=this.flatCoordinates,Sd(n,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=js(this.getExtent());this.flatInteriorPoint_=qW(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new La(this.getFlatInteriorPoint(),zn.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new kW(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.ends_,o=[],a=0,c=0,h=i.length;c<h;++c){var d=i[c],v=new kW(n.slice(a,d),t);o.push(v),a=d}return o},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;jW(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=LD(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=PW(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new e(n,zn.XY,i)},e.prototype.getType=function(){return"Polygon"},e.prototype.intersectsExtent=function(t){return LW(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=CE(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},e}(Oa),Xu=zW;function LE(r){var e=r[0],t=r[1],n=r[2],i=r[3],o=[e,t,e,i,n,i,n,t,e,t];return new zW(o,zn.XY,[o.length])}function DD(r,e,t){for(var n=e||32,i=r.getStride(),o=r.getLayout(),a=r.getCenter(),c=i*(n+1),h=new Array(c),d=0;d<c;d+=i){h[d]=0,h[d+1]=0;for(var v=2;v<i;v++)h[d+v]=a[v]}var x=[h.length],S=new zW(h,o,x);return Hke(S,a,r.getRadius(),t),S}function Hke(r,e,t,n){for(var i=r.getFlatCoordinates(),o=r.getStride(),a=i.length/o-1,c=n||0,h=0;h<=a;++h){var d=h*o,v=c+vl(h,a)*2*Math.PI/a;i[d]=e[0]+t*Math.cos(v),i[d+1]=e[1]+t*Math.sin(v)}r.changed()}function Wke(r,e,t,n){for(var i=[],o=Ni(),a=0,c=t.length;a<c;++a){var h=t[a];o=vD(r,e,h[0],n),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=h[h.length-1]}return i}var $Xt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),HXt=function(r){$Xt(e,r);function e(t,n,i){var o=r.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){for(var a=o.getLayout(),c=t,h=[],d=[],v=0,x=c.length;v<x;++v){var S=c[v];v===0&&(a=S.getLayout());for(var T=h.length,L=S.getEnds(),k=0,R=L.length;k<R;++k)L[k]+=T;ko(h,S.getFlatCoordinates()),d.push(L)}n=a,t=h,i=d}return n!==void 0&&i?(o.setFlatCoordinates(n,t),o.endss_=i):o.setCoordinates(t,n),o}return e.prototype.appendPolygon=function(t){var n;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.endss_.push();else{var i=this.flatCoordinates.length;ko(this.flatCoordinates,t.getFlatCoordinates()),n=t.getEnds().slice();for(var o=0,a=n.length;o<a;++o)n[o]+=i}this.endss_.push(n),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,n=new Array(t),i=0;i<t;++i)n[i]=this.endss_[i].slice();var o=new e(this.flatCoordinates.slice(),this.layout,n);return o.applyProperties(this),o},e.prototype.closestPointXY=function(t,n,i,o){return o<qs(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Pke(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Oke(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,n,i,o))},e.prototype.containsXY=function(t,n){return jke(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,n)},e.prototype.getArea=function(){return Bke(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),FW(n,0,this.endss_,this.stride,t)):n=this.flatCoordinates,RE(n,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Wke(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Uke(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new x0(this.getFlatInteriorPoints().slice(),zn.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;$ke(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=FW(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=Nke(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,i),new e(n,zn.XY,i)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var n;if(t===0)n=0;else{var i=this.endss_[t-1];n=i[i.length-1]}var o=this.endss_[t].slice(),a=o[o.length-1];if(n!==0)for(var c=0,h=o.length;c<h;++c)o[c]-=n;return new Xu(this.flatCoordinates.slice(n,a),this.layout,o)},e.prototype.getPolygons=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.endss_,o=[],a=0,c=0,h=i.length;c<h;++c){var d=i[c].slice(),v=d[d.length-1];if(a!==0)for(var x=0,S=d.length;x<S;++x)d[x]-=a;var T=new Xu(n.slice(a,v),t,d);o.push(T),a=v}return o},e.prototype.getType=function(){return"MultiPolygon"},e.prototype.intersectsExtent=function(t){return zke(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=Lke(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{var o=i[i.length-1];this.flatCoordinates.length=o.length===0?0:o[o.length-1]}this.changed()},e}(Oa),ND=HXt;var WXt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ZXt=function(r){WXt(e,r);function e(t){var n=this,i=t||{};return n=r.call(this)||this,n.dataProjection=Xn(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(n.defaultFeatureProjection=Xn(i.featureProjection)),n.geometryName_=i.geometryName,n.extractGeometryName_=i.extractGeometryName,n.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],n}return e.prototype.readFeatureFromObject=function(t,n){var i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};var o=BW(i.geometry,n),a=new ml;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&a.setGeometryName(i.geometry_name),a.setGeometry(o),"id"in i&&a.setId(i.id),i.properties&&a.setProperties(i.properties,!0),a},e.prototype.readFeaturesFromObject=function(t,n){var i=t,o=null;if(i.type==="FeatureCollection"){var a=t;o=[];for(var c=a.features,h=0,d=c.length;h<d;++h)o.push(this.readFeatureFromObject(c[h],n))}else o=[this.readFeatureFromObject(t,n)];return o},e.prototype.readGeometryFromObject=function(t,n){return BW(t,n)},e.prototype.readProjectionFromObject=function(t){var n=t.crs,i;return n?n.type=="name"?i=Xn(n.properties.name):n.type==="EPSG"?i=Xn("EPSG:"+n.properties.code):ar(!1,36):i=this.dataProjection,i},e.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var i={type:"Feature",geometry:null,properties:null},o=t.getId();if(o!==void 0&&(i.id=o),!t.hasProperties())return i;var a=t.getProperties(),c=t.getGeometry();return c&&(i.geometry=UW(c,n),delete a[t.getGeometryName()]),$u(a)||(i.properties=a),i},e.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var i=[],o=0,a=t.length;o<a;++o)i.push(this.writeFeatureObject(t[o],n));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(t,n){return UW(t,this.adaptOptions(n))},e}(Cke);function BW(r,e){if(!r)return null;var t;switch(r.type){case"Point":{t=KXt(r);break}case"LineString":{t=XXt(r);break}case"Polygon":{t=t9t(r);break}case"MultiPoint":{t=QXt(r);break}case"MultiLineString":{t=JXt(r);break}case"MultiPolygon":{t=e9t(r);break}case"GeometryCollection":{t=YXt(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type);}return RW(t,!1,e)}function YXt(r,e){var t=r.geometries.map(function(n){return BW(n,e)});return new Tke(t)}function KXt(r){return new La(r.coordinates)}function XXt(r){return new lh(r.coordinates)}function JXt(r){return new OD(r.coordinates)}function QXt(r){return new x0(r.coordinates)}function e9t(r){return new ND(r.coordinates)}function t9t(r){return new Xu(r.coordinates)}function UW(r,e){r=RW(r,!0,e);var t=r.getType(),n;switch(t){case"Point":{n=s9t(r,e);break}case"LineString":{n=n9t(r,e);break}case"Polygon":{n=l9t(r,e);break}case"MultiPoint":{n=o9t(r,e);break}case"MultiLineString":{n=i9t(r,e);break}case"MultiPolygon":{n=a9t(r,e);break}case"GeometryCollection":{n=r9t(r,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t);}return n}function r9t(r,e){var t=r.getGeometriesArray().map(function(n){var i=zr({},e);return delete i.featureProjection,UW(n,i)});return{type:"GeometryCollection",geometries:t}}function n9t(r,e){return{type:"LineString",coordinates:r.getCoordinates()}}function i9t(r,e){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function o9t(r,e){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function a9t(r,e){var t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(t)}}function s9t(r,e){return{type:"Point",coordinates:r.getCoordinates()}}function l9t(r,e){var t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(t)}}var DE=ZXt;var ln={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var u9t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),c9t=function(r){u9t(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un,n.background_=t.background;var i=zr({},t);return typeof t.properties=="object"&&(delete i.properties,zr(i,t.properties)),i[ln.OPACITY]=t.opacity!==void 0?t.opacity:1,ar(typeof i[ln.OPACITY]=="number",64),i[ln.VISIBLE]=t.visible!==void 0?t.visible:!0,i[ln.Z_INDEX]=t.zIndex,i[ln.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,i[ln.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,i[ln.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,i[ln.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,n.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,n.setProperties(i),n.state_=null,n}return e.prototype.getBackground=function(){return this.background_},e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var n=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return n.opacity=Fn(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},e.prototype.getLayersArray=function(t){return ir()},e.prototype.getLayerStatesArray=function(t){return ir()},e.prototype.getExtent=function(){return this.get(ln.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(ln.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(ln.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(ln.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(ln.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(ln.OPACITY)},e.prototype.getSourceState=function(){return ir()},e.prototype.getVisible=function(){return this.get(ln.VISIBLE)},e.prototype.getZIndex=function(){return this.get(ln.Z_INDEX)},e.prototype.setBackground=function(t){this.background_=t,this.changed()},e.prototype.setExtent=function(t){this.set(ln.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(ln.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(ln.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(ln.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(ln.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){ar(typeof t=="number",64),this.set(ln.OPACITY,t)},e.prototype.setVisible=function(t){this.set(ln.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(ln.Z_INDEX,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),r.prototype.disposeInternal.call(this)},e}(io),kD=c9t;var xo={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var f9t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),h9t=function(r){f9t(e,r);function e(t){var n=this,i=zr({},t);delete i.source,n=r.call(this,i)||this,n.on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,n.rendered=!1,t.render&&(n.render=t.render),t.map&&n.setMap(t.map),n.addChangeListener(ln.SOURCE,n.handleSourcePropertyChange_);var o=t.source?t.source:null;return n.setSource(o),n}return e.prototype.getLayersArray=function(t){var n=t||[];return n.push(this),n},e.prototype.getLayerStatesArray=function(t){var n=t||[];return n.push(this.getLayerState()),n},e.prototype.getSource=function(){return this.get(ln.SOURCE)||null},e.prototype.getRenderSource=function(){return this.getSource()},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():"undefined"},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Yr(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Ar(t,Pt.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(function(n){return n([])})},e.prototype.getData=function(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)},e.prototype.render=function(t,n){var i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,n)},e.prototype.unrender=function(){this.rendered=!1},e.prototype.setMapInternal=function(t){t||this.unrender(),this.set(ln.MAP,t)},e.prototype.getMapInternal=function(){return this.get(ln.MAP)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Yr(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Yr(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Ar(t,xo.PRECOMPOSE,function(n){var i=n,o=i.frameState.layerStatesArray,a=this.getLayerState(!1);ar(!o.some(function(c){return c.layer===a.layer}),67),o.push(a)},this),this.mapRenderKey_=Ar(this,Pt.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(ln.SOURCE,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),r.prototype.disposeInternal.call(this)},e}(kD);function Cv(r,e){if(!r.visible)return!1;var t=e.resolution;if(t<r.minResolution||t>=r.maxResolution)return!1;var n=e.zoom;return n>r.minZoom&&n<=r.maxZoom}var Mv=h9t;var fqe=Me($W(),1);var yn={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function HW(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]+2*e,t[1]=r[1]+2*e,t}function WW(r){return r[0]>0&&r[1]>0}function qD(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function Bn(r,e){return Array.isArray(r)?r:(e===void 0?e=[r,r]:(e[0]=r,e[1]=r),e)}var p9t=function(){function r(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Bn(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}return r.prototype.clone=function(){var e=this.getScale();return new r({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},r.prototype.getOpacity=function(){return this.opacity_},r.prototype.getRotateWithView=function(){return this.rotateWithView_},r.prototype.getRotation=function(){return this.rotation_},r.prototype.getScale=function(){return this.scale_},r.prototype.getScaleArray=function(){return this.scaleArray_},r.prototype.getDisplacement=function(){return this.displacement_},r.prototype.getDeclutterMode=function(){return this.declutterMode_},r.prototype.getAnchor=function(){return ir()},r.prototype.getImage=function(e){return ir()},r.prototype.getHitDetectionImage=function(){return ir()},r.prototype.getPixelRatio=function(e){return 1},r.prototype.getImageState=function(){return ir()},r.prototype.getImageSize=function(){return ir()},r.prototype.getOrigin=function(){return ir()},r.prototype.getSize=function(){return ir()},r.prototype.setDisplacement=function(e){this.displacement_=e},r.prototype.setOpacity=function(e){this.opacity_=e},r.prototype.setRotateWithView=function(e){this.rotateWithView_=e},r.prototype.setRotation=function(e){this.rotation_=e},r.prototype.setScale=function(e){this.scale_=e,this.scaleArray_=Bn(e)},r.prototype.listenImageChange=function(e){ir()},r.prototype.load=function(){ir()},r.prototype.unlistenImageChange=function(e){ir()},r}(),jD=p9t;var Yke=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Kke=/^([a-z]*)$|^hsla?\(.*\)$/i;function FD(r){return typeof r=="string"?r:YW(r)}function Xke(r){var e=document.createElement("div");if(e.style.color=r,e.style.color!==""){document.body.appendChild(e);var t=getComputedStyle(e).color;return document.body.removeChild(e),t}else return""}var ZW=function(){var r=1024,e={},t=0;return function(n){var i;if(e.hasOwnProperty(n))i=e[n];else{if(t>=r){var o=0;for(var a in e)o++&3||(delete e[a],--t)}i=d9t(n),e[n]=i,++t}return i}}();function uh(r){return Array.isArray(r)?r:ZW(r)}function d9t(r){var e,t,n,i,o;if(Kke.exec(r)&&(r=Xke(r)),Yke.exec(r)){var a=r.length-1,c=void 0;a<=4?c=1:c=2;var h=a===4||a===8;e=parseInt(r.substr(1+0*c,c),16),t=parseInt(r.substr(1+1*c,c),16),n=parseInt(r.substr(1+2*c,c),16),h?i=parseInt(r.substr(1+3*c,c),16):i=255,c==1&&(e=(e<<4)+e,t=(t<<4)+t,n=(n<<4)+n,h&&(i=(i<<4)+i)),o=[e,t,n,i/255]}else r.indexOf("rgba(")==0?(o=r.slice(5,-1).split(",").map(Number),Zke(o)):r.indexOf("rgb(")==0?(o=r.slice(4,-1).split(",").map(Number),o.push(1),Zke(o)):ar(!1,14);return o}function Zke(r){return r[0]=Fn(r[0]+.5|0,0,255),r[1]=Fn(r[1]+.5|0,0,255),r[2]=Fn(r[2]+.5|0,0,255),r[3]=Fn(r[3],0,1),r}function YW(r){var e=r[0];e!=(e|0)&&(e=e+.5|0);var t=r[1];t!=(t|0)&&(t=t+.5|0);var n=r[2];n!=(n|0)&&(n=n+.5|0);var i=r[3]===void 0?1:Math.round(r[3]*100)/100;return"rgba("+e+","+t+","+n+","+i+")"}function Jke(r){return Kke.test(r)&&(r=Xke(r)),Yke.test(r)||r.indexOf("rgba(")===0||r.indexOf("rgb(")===0}function Fs(r){return Array.isArray(r)?YW(r):r}function Ei(r,e,t,n){var i;return t&&t.length?i=t.shift():gd?i=new OffscreenCanvas(r||300,e||300):i=document.createElement("canvas"),r&&(i.width=r),e&&(i.height=e),i.getContext("2d",n)}function zD(r){var e=r.canvas;e.width=1,e.height=1,r.clearRect(0,0,1,1)}function w0(r,e){var t=e.parentNode;t&&t.replaceChild(r,e)}function NE(r){return r&&r.parentNode?r.parentNode.removeChild(r):null}function Qke(r){for(;r.lastChild;)r.removeChild(r.lastChild)}function eqe(r,e){for(var t=r.childNodes,n=0;;++n){var i=t[n],o=e[n];if(!i&&!o)break;if(i!==o){if(!i){r.appendChild(o);continue}if(!o){r.removeChild(i),--n;continue}r.insertBefore(o,i)}}}var kE="ol-hidden";var fu="ol-unselectable",KW="ol-unsupported",Uc="ol-control",XW="ol-collapsed",m9t=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),tqe=["style","variant","weight","size","lineHeight","family"],JW=function(r){var e=r.match(m9t);if(!e)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=tqe.length;n<i;++n){var o=e[n+1];o!==void 0&&(t[tqe[n]]=o)}return t.families=t.family.split(/,\s?/),t};var UD="10px sans-serif",zs="#000",Rv="round",ch=[],fh=0,Gc="round",hh=10,ph="#000",Id="center",Pv="middle",dh=[0,0,0,0],mh=1,Vc=new io,v9t=new ks;v9t.setSize=function(){console.warn("labelCache is deprecated.")};var b0=null,QW,e8={},rqe=function(){var r=100,e="32px ",t=["monospace","serif"],n=t.length,i="wmytzilWMYTZIL@#/&?$%10\uF013",o,a;function c(d,v,x){for(var S=!0,T=0;T<n;++T){var L=t[T];if(a=BD(d+" "+v+" "+e+L,i),x!=L){var k=BD(d+" "+v+" "+e+x+","+L,i);S=S&&k!=a}}return!!S}function h(){for(var d=!0,v=Vc.getKeys(),x=0,S=v.length;x<S;++x){var T=v[x];Vc.get(T)<r&&(c.apply(this,T.split(`
`))?(Ns(e8),b0=null,QW=void 0,Vc.set(T,r)):(Vc.set(T,Vc.get(T)+1,!0),d=!1))}d&&(clearInterval(o),o=void 0)}return function(d){var v=JW(d);if(v)for(var x=v.families,S=0,T=x.length;S<T;++S){var L=x[S],k=v.style+`
`+v.weight+`
`+L;Vc.get(k)===void 0&&(Vc.set(k,r,!0),c(v.style,v.weight,L)||(Vc.set(k,0,!0),o===void 0&&(o=setInterval(h,32))))}}}(),g9t=function(){var r;return function(e){var t=e8[e];if(t==null){if(gd){var n=JW(e),i=nqe(e,"\u017Dg"),o=isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight);t=o*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=e,document.body.appendChild(r),t=r.offsetHeight,document.body.removeChild(r);e8[e]=t}return t}}();function nqe(r,e){return b0||(b0=Ei(1,1)),r!=QW&&(b0.font=r,QW=b0.font),b0.measureText(e)}function BD(r,e){return nqe(r,e).width}function t8(r,e,t){if(e in t)return t[e];var n=e.split(`
`).reduce(function(i,o){return Math.max(i,BD(r,o))},0);return t[e]=n,n}function iqe(r,e){for(var t=[],n=[],i=[],o=0,a=0,c=0,h=0,d=0,v=e.length;d<=v;d+=2){var x=e[d];if(x===`
`||d===v){o=Math.max(o,a),i.push(a),a=0,c+=h;continue}var S=e[d+1]||r.font,T=BD(S,x);t.push(T),a+=T;var L=g9t(S);n.push(L),h=Math.max(h,L)}return{width:o,height:c,widths:t,heights:n,lineWidths:i}}function oqe(r,e,t,n,i,o,a,c,h,d,v){r.save(),t!==1&&(r.globalAlpha*=t),e&&r.setTransform.apply(r,e),n.contextInstructions?(r.translate(h,d),r.scale(v[0],v[1]),y9t(n,r)):v[0]<0||v[1]<0?(r.translate(h,d),r.scale(v[0],v[1]),r.drawImage(n,i,o,a,c,0,0,a,c)):r.drawImage(n,i,o,a,c,h,d,a*v[0],c*v[1]),r.restore()}function y9t(r,e){for(var t=r.contextInstructions,n=0,i=t.length;n<i;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}var _9t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),x9t=function(r){_9t(e,r);function e(t){var n=this,i=t.rotateWithView!==void 0?t.rotateWithView:!1;return n=r.call(this,{opacity:1,rotateWithView:i,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})||this,n.canvas_=void 0,n.hitDetectionCanvas_=null,n.fill_=t.fill!==void 0?t.fill:null,n.origin_=[0,0],n.points_=t.points,n.radius_=t.radius!==void 0?t.radius:t.radius1,n.radius2_=t.radius2,n.angle_=t.angle!==void 0?t.angle:0,n.stroke_=t.stroke!==void 0?t.stroke:null,n.size_=null,n.renderOptions_=null,n.render(),n}return e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n},e.prototype.getAnchor=function(){var t=this.size_;if(!t)return null;var n=this.getDisplacement();return[t[0]/2-n[0],t[1]/2+n[1]]},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.setFill=function(t){this.fill_=t,this.render()},e.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},e.prototype.getImage=function(t){var n=this.canvas_[t];if(!n){var i=this.renderOptions_,o=Ei(i.size*t,i.size*t);this.draw_(i,o,t),n=o.canvas,this.canvas_[t]=n}return n},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.size_},e.prototype.getImageState=function(){return yn.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.setStroke=function(t){this.stroke_=t,this.render()},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.calculateLineJoinSize_=function(t,n,i){if(n===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return n;var o=this.radius_,a=this.radius2_===void 0?o:this.radius2_;if(o<a){var c=o;o=a,a=c}var h=this.radius2_===void 0?this.points_:this.points_*2,d=2*Math.PI/h,v=a*Math.sin(d),x=Math.sqrt(a*a-v*v),S=o-x,T=Math.sqrt(v*v+S*S),L=T/v;if(t==="miter"&&L<=i)return L*n;var k=n/2/L,R=n/2*(S/T),D=Math.sqrt((o+k)*(o+k)+R*R),j=D-o;if(this.radius2_===void 0||t==="bevel")return j*2;var B=o*Math.sin(d),$=Math.sqrt(o*o-B*B),ee=a-$,J=Math.sqrt(B*B+ee*ee),ie=J/B;if(ie<=i){var ue=ie*n/2-a-o;return 2*Math.max(j,ue)}return j*2},e.prototype.createRenderOptions=function(){var t=Gc,n=0,i=null,o=0,a,c=0;this.stroke_&&(a=this.stroke_.getColor(),a===null&&(a=ph),a=Fs(a),c=this.stroke_.getWidth(),c===void 0&&(c=mh),i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=Gc),n=this.stroke_.getMiterLimit(),n===void 0&&(n=hh));var h=this.calculateLineJoinSize_(t,c,n),d=Math.max(this.radius_,this.radius2_||0),v=Math.ceil(2*d+h);return{strokeStyle:a,strokeWidth:c,size:v,lineDash:i,lineDashOffset:o,lineJoin:t,miterLimit:n}},e.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]},e.prototype.draw_=function(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.createPath_(n),this.fill_){var o=this.fill_.getColor();o===null&&(o=zs),n.fillStyle=Fs(o),n.fill()}this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,n.setLineDash&&t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},e.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var n=this.fill_.getColor(),i=0;if(typeof n=="string"&&(n=uh(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0){var o=Ei(t.size,t.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(t,o)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},e.prototype.createPath_=function(t){var n=this.points_,i=this.radius_;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{var o=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);for(var a=this.angle_-Math.PI/2,c=2*Math.PI/n,h=0;h<n;h++){var d=a+h*c,v=h%2===0?i:o;t.lineTo(v*Math.cos(d),v*Math.sin(d))}t.closePath()}},e.prototype.drawHitDetectionCanvas_=function(t,n){n.translate(t.size/2,t.size/2),this.createPath_(n),n.fillStyle=zs,n.fill(),this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},e}(jD),aqe=x9t;var w9t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),b9t=function(r){w9t(e,r);function e(t){var n=t||{};return r.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,scale:n.scale!==void 0?n.scale:1,rotation:n.rotation!==void 0?n.rotation:0,rotateWithView:n.rotateWithView!==void 0?n.rotateWithView:!1,displacement:n.displacement!==void 0?n.displacement:[0,0],declutterMode:n.declutterMode})||this}return e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(aqe),Ov=b9t;var S9t=function(){function r(e){var t=e||{};this.color_=t.color!==void 0?t.color:null}return r.prototype.clone=function(){var e=this.getColor();return new r({color:Array.isArray(e)?e.slice():e||void 0})},r.prototype.getColor=function(){return this.color_},r.prototype.setColor=function(e){this.color_=e},r}(),gl=S9t;var E9t=function(){function r(e){var t=e||{};this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}return r.prototype.clone=function(){var e=this.getColor();return new r({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},r.prototype.getColor=function(){return this.color_},r.prototype.getLineCap=function(){return this.lineCap_},r.prototype.getLineDash=function(){return this.lineDash_},r.prototype.getLineDashOffset=function(){return this.lineDashOffset_},r.prototype.getLineJoin=function(){return this.lineJoin_},r.prototype.getMiterLimit=function(){return this.miterLimit_},r.prototype.getWidth=function(){return this.width_},r.prototype.setColor=function(e){this.color_=e},r.prototype.setLineCap=function(e){this.lineCap_=e},r.prototype.setLineDash=function(e){this.lineDash_=e},r.prototype.setLineDashOffset=function(e){this.lineDashOffset_=e},r.prototype.setLineJoin=function(e){this.lineJoin_=e},r.prototype.setMiterLimit=function(e){this.miterLimit_=e},r.prototype.setWidth=function(e){this.width_=e},r}(),Ju=E9t;var S0=function(){function r(e){var t=e||{};this.geometry_=null,this.geometryFunction_=sqe,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}return r.prototype.clone=function(){var e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new r({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},r.prototype.getRenderer=function(){return this.renderer_},r.prototype.setRenderer=function(e){this.renderer_=e},r.prototype.setHitDetectionRenderer=function(e){this.hitDetectionRenderer_=e},r.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},r.prototype.getGeometry=function(){return this.geometry_},r.prototype.getGeometryFunction=function(){return this.geometryFunction_},r.prototype.getFill=function(){return this.fill_},r.prototype.setFill=function(e){this.fill_=e},r.prototype.getImage=function(){return this.image_},r.prototype.setImage=function(e){this.image_=e},r.prototype.getStroke=function(){return this.stroke_},r.prototype.setStroke=function(e){this.stroke_=e},r.prototype.getText=function(){return this.text_},r.prototype.setText=function(e){this.text_=e},r.prototype.getZIndex=function(){return this.zIndex_},r.prototype.setGeometry=function(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=sqe,this.geometry_=e},r.prototype.setZIndex=function(e){this.zIndex_=e},r}();function lqe(r){var e;if(typeof r=="function")e=r;else{var t;if(Array.isArray(r))t=r;else{ar(typeof r.getZIndex=="function",41);var n=r;t=[n]}e=function(){return t}}return e}var r8=null;function uqe(r,e){if(!r8){var t=new gl({color:"rgba(255,255,255,0.4)"}),n=new Ju({color:"#3399CC",width:1.25});r8=[new S0({image:new Ov({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return r8}function E0(){var r={},e=[255,255,255,1],t=[0,153,255,1],n=3;return r.Polygon=[new S0({fill:new gl({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new S0({stroke:new Ju({color:e,width:n+2})}),new S0({stroke:new Ju({color:t,width:n})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new S0({image:new Ov({radius:n*2,fill:new gl({color:t}),stroke:new Ju({color:e,width:n/2})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function sqe(r){return r.getGeometry()}var VD=S0;var I9t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cqe={RENDER_ORDER:"renderOrder"},T9t=function(r){I9t(e,r);function e(t){var n=this,i=t||{},o=zr({},i);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,n=r.call(this,o)||this,n.declutter_=i.declutter!==void 0?i.declutter:!1,n.renderBuffer_=i.renderBuffer!==void 0?i.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(i.style),n.updateWhileAnimating_=i.updateWhileAnimating!==void 0?i.updateWhileAnimating:!1,n.updateWhileInteracting_=i.updateWhileInteracting!==void 0?i.updateWhileInteracting:!1,n}return e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(t){return r.prototype.getFeatures.call(this,t)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(cqe.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new fqe.default(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(cqe.RENDER_ORDER,t)},e.prototype.setStyle=function(t){this.style_=t!==void 0?t:uqe,this.styleFunction_=t===null?void 0:lqe(this.style_),this.changed()},e}(Mv),hqe=T9t;var qE={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},jE=[qE.FILL],$c=[qE.STROKE],vh=[qE.BEGIN_PATH],n8=[qE.CLOSE_PATH],pr=qE;var A9t=function(){function r(){}return r.prototype.drawCustom=function(e,t,n,i){},r.prototype.drawGeometry=function(e){},r.prototype.setStyle=function(e){},r.prototype.drawCircle=function(e,t){},r.prototype.drawFeature=function(e,t){},r.prototype.drawGeometryCollection=function(e,t){},r.prototype.drawLineString=function(e,t){},r.prototype.drawMultiLineString=function(e,t){},r.prototype.drawMultiPoint=function(e,t){},r.prototype.drawMultiPolygon=function(e,t){},r.prototype.drawPoint=function(e,t){},r.prototype.drawPolygon=function(e,t){},r.prototype.drawText=function(e,t){},r.prototype.setFillStrokeStyle=function(e,t){},r.prototype.setImageStyle=function(e,t){},r.prototype.setTextStyle=function(e,t){},r}(),GD=A9t;var C9t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),M9t=function(r){C9t(e,r);function e(t,n,i,o){var a=r.call(this)||this;return a.tolerance=t,a.maxExtent=n,a.pixelRatio=o,a.maxLineWidth=0,a.resolution=i,a.beginGeometryInstruction1_=null,a.beginGeometryInstruction2_=null,a.bufferedMaxExtent_=null,a.instructions=[],a.coordinates=[],a.tmpCoordinate_=[],a.hitDetectionInstructions=[],a.state={},a}return e.prototype.applyPixelRatio=function(t){var n=this.pixelRatio;return n==1?t:t.map(function(i){return i*n})},e.prototype.appendFlatPointCoordinates=function(t,n){for(var i=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,a=this.coordinates,c=a.length,h=0,d=t.length;h<d;h+=n)o[0]=t[h],o[1]=t[h+1],es(i,o)&&(a[c++]=o[0],a[c++]=o[1]);return c},e.prototype.appendFlatLineCoordinates=function(t,n,i,o,a,c){var h=this.coordinates,d=h.length,v=this.getBufferedMaxExtent();c&&(n+=o);var x=t[n],S=t[n+1],T=this.tmpCoordinate_,L=!0,k,R,D;for(k=n+o;k<i;k+=o)T[0]=t[k],T[1]=t[k+1],D=dD(v,T),D!==R?(L&&(h[d++]=x,h[d++]=S,L=!1),h[d++]=T[0],h[d++]=T[1]):D===ao.INTERSECTING?(h[d++]=T[0],h[d++]=T[1],L=!1):L=!0,x=T[0],S=T[1],R=D;return(a&&L||k===n+o)&&(h[d++]=x,h[d++]=S),d},e.prototype.drawCustomCoordinates_=function(t,n,i,o,a){for(var c=0,h=i.length;c<h;++c){var d=i[c],v=this.appendFlatLineCoordinates(t,n,d,o,!1,!1);a.push(v),n=d}return n},e.prototype.drawCustom=function(t,n,i,o){this.beginGeometry(t,n);var a=t.getType(),c=t.getStride(),h=this.coordinates.length,d,v,x,S,T;switch(a){case"MultiPolygon":d=t.getOrientedFlatCoordinates(),S=[];var L=t.getEndss();T=0;for(var k=0,R=L.length;k<R;++k){var D=[];T=this.drawCustomCoordinates_(d,T,L[k],c,D),S.push(D)}this.instructions.push([pr.CUSTOM,h,S,t,i,RE]),this.hitDetectionInstructions.push([pr.CUSTOM,h,S,t,o||i,RE]);break;case"Polygon":case"MultiLineString":x=[],d=a=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),T=this.drawCustomCoordinates_(d,0,t.getEnds(),c,x),this.instructions.push([pr.CUSTOM,h,x,t,i,Sd]),this.hitDetectionInstructions.push([pr.CUSTOM,h,x,t,o||i,Sd]);break;case"LineString":case"Circle":d=t.getFlatCoordinates(),v=this.appendFlatLineCoordinates(d,0,d.length,c,!1,!1),this.instructions.push([pr.CUSTOM,h,v,t,i,cu]),this.hitDetectionInstructions.push([pr.CUSTOM,h,v,t,o||i,cu]);break;case"MultiPoint":d=t.getFlatCoordinates(),v=this.appendFlatPointCoordinates(d,c),v>h&&(this.instructions.push([pr.CUSTOM,h,v,t,i,cu]),this.hitDetectionInstructions.push([pr.CUSTOM,h,v,t,o||i,cu]));break;case"Point":d=t.getFlatCoordinates(),this.coordinates.push(d[0],d[1]),v=this.coordinates.length,this.instructions.push([pr.CUSTOM,h,v,t,i]),this.hitDetectionInstructions.push([pr.CUSTOM,h,v,t,o||i]);break;default:}this.endGeometry(n)},e.prototype.beginGeometry=function(t,n){this.beginGeometryInstruction1_=[pr.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[pr.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var n,i=t.length,o,a,c=-1;for(n=0;n<i;++n)o=t[n],a=o[0],a==pr.END_GEOMETRY?c=n:a==pr.BEGIN_GEOMETRY&&(o[2]=n,q2e(this.hitDetectionInstructions,c,n),c=-1)},e.prototype.setFillStrokeStyle=function(t,n){var i=this.state;if(t){var o=t.getColor();i.fillStyle=Fs(o||zs)}else i.fillStyle=void 0;if(n){var a=n.getColor();i.strokeStyle=Fs(a||ph);var c=n.getLineCap();i.lineCap=c!==void 0?c:Rv;var h=n.getLineDash();i.lineDash=h?h.slice():ch;var d=n.getLineDashOffset();i.lineDashOffset=d||fh;var v=n.getLineJoin();i.lineJoin=v!==void 0?v:Gc;var x=n.getWidth();i.lineWidth=x!==void 0?x:mh;var S=n.getMiterLimit();i.miterLimit=S!==void 0?S:hh,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var n=t.fillStyle,i=[pr.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[pr.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,n){var i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,n){var i=t.strokeStyle,o=t.lineCap,a=t.lineDash,c=t.lineDashOffset,h=t.lineJoin,d=t.lineWidth,v=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=o||a!=t.currentLineDash&&!Aa(t.currentLineDash,a)||t.currentLineDashOffset!=c||t.currentLineJoin!=h||t.currentLineWidth!=d||t.currentMiterLimit!=v)&&(i!==void 0&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=o,t.currentLineDash=a,t.currentLineDashOffset=c,t.currentLineJoin=h,t.currentLineWidth=d,t.currentMiterLimit=v)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[pr.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=mD(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Wu(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(GD),Hc=M9t;var R9t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),P9t=function(r){R9t(e,r);function e(t,n,i,o){var a=r.call(this,t,n,i,o)||this;return a.hitDetectionImage_=null,a.image_=null,a.imagePixelRatio_=void 0,a.anchorX_=void 0,a.anchorY_=void 0,a.height_=void 0,a.opacity_=void 0,a.originX_=void 0,a.originY_=void 0,a.rotateWithView_=void 0,a.rotation_=void 0,a.scale_=void 0,a.width_=void 0,a.declutterMode_=void 0,a.declutterImageWithText_=void 0,a}return e.prototype.drawPoint=function(t,n){if(this.image_){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),o=t.getStride(),a=this.coordinates.length,c=this.appendFlatPointCoordinates(i,o);this.instructions.push([pr.DRAW_IMAGE,a,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([pr.DRAW_IMAGE,a,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}},e.prototype.drawMultiPoint=function(t,n){if(this.image_){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),o=t.getStride(),a=this.coordinates.length,c=this.appendFlatPointCoordinates(i,o);this.instructions.push([pr.DRAW_IMAGE,a,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([pr.DRAW_IMAGE,a,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,r.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,n){var i=t.getAnchor(),o=t.getSize(),a=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=n},e}(Hc),pqe=P9t;var O9t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),L9t=function(r){O9t(e,r);function e(t,n,i,o){return r.call(this,t,n,i,o)||this}return e.prototype.drawFlatCoordinates_=function(t,n,i,o){var a=this.coordinates.length,c=this.appendFlatLineCoordinates(t,n,i,o,!1,!1),h=[pr.MOVE_TO_LINE_TO,a,c];return this.instructions.push(h),this.hitDetectionInstructions.push(h),i},e.prototype.drawLineString=function(t,n){var i=this.state,o=i.strokeStyle,a=i.lineWidth;if(!(o===void 0||a===void 0)){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([pr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ch,fh],vh);var c=t.getFlatCoordinates(),h=t.getStride();this.drawFlatCoordinates_(c,0,c.length,h),this.hitDetectionInstructions.push($c),this.endGeometry(n)}},e.prototype.drawMultiLineString=function(t,n){var i=this.state,o=i.strokeStyle,a=i.lineWidth;if(!(o===void 0||a===void 0)){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([pr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],vh);for(var c=t.getEnds(),h=t.getFlatCoordinates(),d=t.getStride(),v=0,x=0,S=c.length;x<S;++x)v=this.drawFlatCoordinates_(h,v,c[x],d);this.hitDetectionInstructions.push($c),this.endGeometry(n)}},e.prototype.finish=function(){var t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push($c),this.reverseHitDetectionInstructions(),this.state=null,r.prototype.finish.call(this)},e.prototype.applyStroke=function(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push($c),t.lastStroke=this.coordinates.length),t.lastStroke=0,r.prototype.applyStroke.call(this,t),this.instructions.push(vh)},e}(Hc),dqe=L9t;var D9t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),N9t=function(r){D9t(e,r);function e(t,n,i,o){return r.call(this,t,n,i,o)||this}return e.prototype.drawFlatCoordinatess_=function(t,n,i,o){var a=this.state,c=a.fillStyle!==void 0,h=a.strokeStyle!==void 0,d=i.length;this.instructions.push(vh),this.hitDetectionInstructions.push(vh);for(var v=0;v<d;++v){var x=i[v],S=this.coordinates.length,T=this.appendFlatLineCoordinates(t,n,x,o,!0,!h),L=[pr.MOVE_TO_LINE_TO,S,T];this.instructions.push(L),this.hitDetectionInstructions.push(L),h&&(this.instructions.push(n8),this.hitDetectionInstructions.push(n8)),n=x}return c&&(this.instructions.push(jE),this.hitDetectionInstructions.push(jE)),h&&(this.instructions.push($c),this.hitDetectionInstructions.push($c)),n},e.prototype.drawCircle=function(t,n){var i=this.state,o=i.fillStyle,a=i.strokeStyle;if(!(o===void 0&&a===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([pr.SET_FILL_STYLE,zs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([pr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var c=t.getFlatCoordinates(),h=t.getStride(),d=this.coordinates.length;this.appendFlatLineCoordinates(c,0,c.length,h,!1,!1);var v=[pr.CIRCLE,d];this.instructions.push(vh,v),this.hitDetectionInstructions.push(vh,v),i.fillStyle!==void 0&&(this.instructions.push(jE),this.hitDetectionInstructions.push(jE)),i.strokeStyle!==void 0&&(this.instructions.push($c),this.hitDetectionInstructions.push($c)),this.endGeometry(n)}},e.prototype.drawPolygon=function(t,n){var i=this.state,o=i.fillStyle,a=i.strokeStyle;if(!(o===void 0&&a===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([pr.SET_FILL_STYLE,zs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([pr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var c=t.getEnds(),h=t.getOrientedFlatCoordinates(),d=t.getStride();this.drawFlatCoordinatess_(h,0,c,d),this.endGeometry(n)}},e.prototype.drawMultiPolygon=function(t,n){var i=this.state,o=i.fillStyle,a=i.strokeStyle;if(!(o===void 0&&a===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([pr.SET_FILL_STYLE,zs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([pr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var c=t.getEndss(),h=t.getOrientedFlatCoordinates(),d=t.getStride(),v=0,x=0,S=c.length;x<S;++x)v=this.drawFlatCoordinatess_(h,v,c[x],d);this.endGeometry(n)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(t!==0)for(var n=this.coordinates,i=0,o=n.length;i<o;++i)n[i]=bd(n[i],t);return r.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state,n=t.fillStyle;n!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)},e}(Hc),i8=N9t;var $D={POINT:"point",LINE:"line"};function mqe(r,e,t,n,i){var o=t,a=t,c=0,h=0,d=t,v,x,S,T,L,k,R,D,j,B;for(x=t;x<n;x+=i){var $=e[x],ee=e[x+1];L!==void 0&&(j=$-L,B=ee-k,T=Math.sqrt(j*j+B*B),R!==void 0&&(h+=S,v=Math.acos((R*j+D*B)/(S*T)),v>r&&(h>c&&(c=h,o=d,a=x),h=0,d=x-i)),S=T,R=j,D=B),L=$,k=ee}return h+=T,h>c?[d,x]:[o,a]}var k9t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),I0={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},q9t=function(r){k9t(e,r);function e(t,n,i,o){var a=r.call(this,t,n,i,o)||this;return a.labels_=null,a.text_="",a.textOffsetX_=0,a.textOffsetY_=0,a.textRotateWithView_=void 0,a.textRotation_=0,a.textFillState_=null,a.fillStates={},a.textStrokeState_=null,a.strokeStates={},a.textState_={},a.textStates={},a.textKey_="",a.fillKey_="",a.strokeKey_="",a.declutterImageWithText_=void 0,a}return e.prototype.finish=function(){var t=r.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},e.prototype.drawText=function(t,n){var i=this.textFillState_,o=this.textStrokeState_,a=this.textState_;if(!(this.text_===""||!a||!i&&!o)){var c=this.coordinates,h=c.length,d=t.getType(),v=null,x=t.getStride();if(a.placement===$D.LINE&&(d=="LineString"||d=="MultiLineString"||d=="Polygon"||d=="MultiPolygon")){if(!Si(this.getBufferedMaxExtent(),t.getExtent()))return;var S=void 0;if(v=t.getFlatCoordinates(),d=="LineString")S=[v.length];else if(d=="MultiLineString")S=t.getEnds();else if(d=="Polygon")S=t.getEnds().slice(0,1);else if(d=="MultiPolygon"){var T=t.getEndss();S=[];for(var L=0,k=T.length;L<k;++L)S.push(T[L][0])}this.beginGeometry(t,n);for(var R=a.textAlign,D=0,j=void 0,B=0,$=S.length;B<$;++B){if(R==null){var ee=mqe(a.maxAngle,v,D,S[B],x);D=ee[0],j=ee[1]}else j=S[B];for(var L=D;L<j;L+=x)c.push(v[L],v[L+1]);var J=c.length;D=S[B],this.drawChars_(h,J),h=J}this.endGeometry(n)}else{var ie=a.overflow?null:[];switch(d){case"Point":case"MultiPoint":v=t.getFlatCoordinates();break;case"LineString":v=t.getFlatMidpoint();break;case"Circle":v=t.getCenter();break;case"MultiLineString":v=t.getFlatMidpoints(),x=2;break;case"Polygon":v=t.getFlatInteriorPoint(),a.overflow||ie.push(v[2]/this.resolution),x=3;break;case"MultiPolygon":var ue=t.getFlatInteriorPoints();v=[];for(var L=0,k=ue.length;L<k;L+=3)a.overflow||ie.push(ue[L+2]/this.resolution),v.push(ue[L],ue[L+1]);if(v.length===0)return;x=2;break;default:}var J=this.appendFlatPointCoordinates(v,x);if(J===h)return;if(ie&&(J-h)/2!==v.length/x){var le=h/2;ie=ie.filter(function(Ae,$e){var Ge=c[(le+$e)*2]===v[$e*x]&&c[(le+$e)*2+1]===v[$e*x+1];return Ge||--le,Ge})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);var _e=a.padding;if(_e!=dh&&(a.scale[0]<0||a.scale[1]<0)){var Re=a.padding[0],ze=a.padding[1],ke=a.padding[2],Ve=a.padding[3];a.scale[0]<0&&(ze=-ze,Ve=-Ve),a.scale[1]<0&&(Re=-Re,ke=-ke),_e=[Re,ze,ke,Ve]}var We=this.pixelRatio;this.instructions.push([pr.DRAW_IMAGE,h,J,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,_e==dh?dh:_e.map(function(Ae){return Ae*We}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,ie]);var Te=1/We;this.hitDetectionInstructions.push([pr.DRAW_IMAGE,h,J,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[Te,Te],NaN,void 0,this.declutterImageWithText_,_e,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,ie]),this.endGeometry(n)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,n=this.textState_,i=this.textFillState_,o=this.strokeKey_;t&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var a=this.textKey_;a in this.textStates||(this.textStates[a]={font:n.font,textAlign:n.textAlign||Id,justify:n.justify,textBaseline:n.textBaseline||Pv,scale:n.scale});var c=this.fillKey_;i&&(c in this.fillStates||(this.fillStates[c]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,n){var i=this.textStrokeState_,o=this.textState_,a=this.strokeKey_,c=this.textKey_,h=this.fillKey_;this.saveTextStates_();var d=this.pixelRatio,v=I0[o.textBaseline],x=this.textOffsetY_*d,S=this.text_,T=i?i.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([pr.DRAW_CHARS,t,n,v,o.overflow,h,o.maxAngle,d,x,a,T*d,S,c,1]),this.hitDetectionInstructions.push([pr.DRAW_CHARS,t,n,v,o.overflow,h,o.maxAngle,1,x,a,T,S,c,1/d])},e.prototype.setTextStyle=function(t,n){var i,o,a;if(!t)this.text_="";else{var c=t.getFill();c?(o=this.textFillState_,o||(o={},this.textFillState_=o),o.fillStyle=Fs(c.getColor()||zs)):(o=null,this.textFillState_=o);var h=t.getStroke();if(!h)a=null,this.textStrokeState_=a;else{a=this.textStrokeState_,a||(a={},this.textStrokeState_=a);var d=h.getLineDash(),v=h.getLineDashOffset(),x=h.getWidth(),S=h.getMiterLimit();a.lineCap=h.getLineCap()||Rv,a.lineDash=d?d.slice():ch,a.lineDashOffset=v===void 0?fh:v,a.lineJoin=h.getLineJoin()||Gc,a.lineWidth=x===void 0?mh:x,a.miterLimit=S===void 0?hh:S,a.strokeStyle=Fs(h.getColor()||ph)}i=this.textState_;var T=t.getFont()||UD;rqe(T);var L=t.getScaleArray();i.overflow=t.getOverflow(),i.font=T,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Pv,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||dh,i.scale=L===void 0?[1,1]:L;var k=t.getOffsetX(),R=t.getOffsetY(),D=t.getRotateWithView(),j=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=k===void 0?0:k,this.textOffsetY_=R===void 0?0:R,this.textRotateWithView_=D===void 0?!1:D,this.textRotation_=j===void 0?0:j,this.strokeKey_=a?(typeof a.strokeStyle=="string"?a.strokeStyle:tr(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=o?typeof o.fillStyle=="string"?o.fillStyle:"|"+tr(o.fillStyle):""}this.declutterImageWithText_=n},e}(Hc),vqe=q9t;var j9t={Circle:i8,Default:Hc,Image:pqe,LineString:dqe,Polygon:i8,Text:vqe},F9t=function(){function r(e,t,n,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}return r.prototype.finish=function(){var e={};for(var t in this.buildersByZIndex_){e[t]=e[t]||{};var n=this.buildersByZIndex_[t];for(var i in n){var o=n[i].finish();e[t][i]=o}}return e},r.prototype.getBuilder=function(e,t){var n=e!==void 0?e.toString():"0",i=this.buildersByZIndex_[n];i===void 0&&(i={},this.buildersByZIndex_[n]=i);var o=i[t];if(o===void 0){var a=j9t[t];o=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=o}return o},r}(),o8=F9t;var z9t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),B9t=function(r){z9t(e,r);function e(t){var n=r.call(this)||this;return n.ready=!0,n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=t,n.declutterExecutorGroup=null,n}return e.prototype.getFeatures=function(t){return ir()},e.prototype.getData=function(t){return null},e.prototype.prepareFrame=function(t){return ir()},e.prototype.renderFrame=function(t,n){return ir()},e.prototype.loadedTileCallback=function(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i},e.prototype.createLoadedTileFinder=function(t,n,i){return function(o,a){var c=this.loadedTileCallback.bind(this,i,o);return t.forEachLoadedTile(n,o,a,c)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,n,i,o,a){},e.prototype.getDataAtPixel=function(t,n,i){return null},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){var n=t.target;n.getState()===yn.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var n=t.getState();return n!=yn.LOADED&&n!=yn.ERROR&&t.addEventListener(Pt.CHANGE,this.boundHandleImageChange_),n==yn.IDLE&&(t.load(),n=t.getState()),n==yn.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()},e.prototype.disposeInternal=function(){delete this.layer_,r.prototype.disposeInternal.call(this)},e}(lD),HD=B9t;var U9t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),V9t=function(r){U9t(e,r);function e(t,n,i,o){var a=r.call(this,t)||this;return a.inversePixelTransform=n,a.frameState=i,a.context=o,a}return e}(bi),Td=V9t;var G9t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),a8=[],T0=null;function $9t(){var r=document.createElement("canvas");r.width=1,r.height=1,T0=r.getContext("2d")}var H9t=function(r){G9t(e,r);function e(t){var n=r.call(this,t)||this;return n.container=null,n.renderedResolution,n.tempTransform=Di(),n.pixelTransform=Di(),n.inversePixelTransform=Di(),n.context=null,n.containerReused=!1,n.pixelContext_=null,n.frameState=null,n}return e.prototype.getImageData=function(t,n,i){T0||$9t(),T0.clearRect(0,0,1,1);var o;try{T0.drawImage(t,n,i,1,1,0,0,1,1),o=T0.getImageData(0,0,1,1).data}catch(a){return T0=null,null}return o},e.prototype.getBackground=function(t){var n=this.getLayer(),i=n.getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0},e.prototype.useContainer=function(t,n,i){var o=this.getLayer().getClassName(),a,c;if(t&&t.className===o&&(!i||t&&t.style.backgroundColor&&Aa(uh(t.style.backgroundColor),uh(i)))){var h=t.firstElementChild;h instanceof HTMLCanvasElement&&(c=h.getContext("2d"))}if(c&&c.canvas.style.transform===n?(this.container=t,this.context=c,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){a=document.createElement("div"),a.className=o;var d=a.style;d.position="absolute",d.width="100%",d.height="100%",c=Ei();var h=c.canvas;a.appendChild(h),d=h.style,d.position="absolute",d.left="0",d.transformOrigin="top left",this.container=a,this.context=c}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)},e.prototype.clipUnrotated=function(t,n,i){var o=au(i),a=p0(i),c=h0(i),h=f0(i);On(n.coordinateToPixelTransform,o),On(n.coordinateToPixelTransform,a),On(n.coordinateToPixelTransform,c),On(n.coordinateToPixelTransform,h);var d=this.inversePixelTransform;On(d,o),On(d,a),On(d,c),On(d,h),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(c[0]),Math.round(c[1])),t.lineTo(Math.round(h[0]),Math.round(h[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,n,i){var o=this.getLayer();if(o.hasListener(t)){var a=new Td(t,this.inversePixelTransform,i,n);o.dispatchEvent(a)}},e.prototype.preRender=function(t,n){this.frameState=n,this.dispatchRenderEvent_(xo.PRERENDER,t,n)},e.prototype.postRender=function(t,n){this.dispatchRenderEvent_(xo.POSTRENDER,t,n)},e.prototype.getRenderTransform=function(t,n,i,o,a,c,h){var d=a/2,v=c/2,x=o/n,S=-x,T=-t[0]+h,L=-t[1];return oo(this.tempTransform,d,v,x,S,-i,T,L)},e.prototype.getDataAtPixel=function(t,n,i){var o=On(this.inversePixelTransform,t.slice()),a=this.context,c=this.getLayer(),h=c.getExtent();if(h){var d=On(n.pixelToCoordinateTransform,t.slice());if(!es(h,d))return null}var v=Math.round(o[0]),x=Math.round(o[1]),S=this.pixelContext_;if(!S){var T=document.createElement("canvas");T.width=1,T.height=1,S=T.getContext("2d"),this.pixelContext_=S}S.clearRect(0,0,1,1);var L;try{S.drawImage(a.canvas,v,x,1,1,0,0,1,1),L=S.getImageData(0,0,1,1).data}catch(k){return k.name==="SecurityError"?(this.pixelContext_=null,new Uint8Array):L}return L[3]===0?null:L},e.prototype.disposeInternal=function(){delete this.frameState,r.prototype.disposeInternal.call(this)},e}(HD),WD=H9t;function gqe(r,e,t,n,i,o,a,c,h,d,v,x){var S=r[e],T=r[e+1],L=0,k=0,R=0,D=0;function j(){L=S,k=T,e+=n,S=r[e],T=r[e+1],D+=R,R=Math.sqrt((S-L)*(S-L)+(T-k)*(T-k))}do j();while(e<t-n&&D+R<o);for(var B=R===0?0:(o-D)/R,$=su(L,S,B),ee=su(k,T,B),J=e-n,ie=D,ue=o+c*h(d,i,v);e<t-n&&D+R<ue;)j();B=R===0?0:(ue-D)/R;var le=su(L,S,B),_e=su(k,T,B),Re;if(x){var ze=[$,ee,le,_e];_0(ze,0,4,2,x,ze,ze),Re=ze[0]>ze[2]}else Re=$>le;var ke=Math.PI,Ve=[],We=J+n===e;e=J,R=0,D=ie,S=r[e],T=r[e+1];var Te;if(We){j(),Te=Math.atan2(T-k,S-L),Re&&(Te+=Te>0?-ke:ke);var Se=(le+$)/2,Ae=(_e+ee)/2;return Ve[0]=[Se,Ae,(ue-o)/2,Te,i],Ve}i=i.replace(/\n/g," ");for(var $e=0,Ge=i.length;$e<Ge;){j();var Ke=Math.atan2(T-k,S-L);if(Re&&(Ke+=Ke>0?-ke:ke),Te!==void 0){var Pe=Ke-Te;if(Pe+=Pe>ke?-2*ke:Pe<-ke?2*ke:0,Math.abs(Pe)>a)return null}Te=Ke;for(var at=$e,Tt=0;$e<Ge;++$e){var Le=Re?Ge-$e-1:$e,Ye=c*h(d,i[Le],v);if(e+n<t&&D+R<o+Tt+Ye/2)break;Tt+=Ye}if($e!==at){var Fe=Re?i.substring(Ge-at,Ge-$e):i.substring(at,$e);B=R===0?0:(o+Tt/2-D)/R;var Se=su(L,S,B),Ae=su(k,T,B);Ve.push([Se,Ae,Tt/2,Ke,Fe]),o+=Tt}}return Ve}var A0=Ni(),Ad=[],gh=[],yh=[],Cd=[];function yqe(r){return r[3].declutterBox}var W9t=new RegExp("[\u0591-\u08FF\uFB1D-\uFDFF\uFE70-\uFEFC\u0800-\u0FFF\uE800-\uEFFF]");function _qe(r,e){return(e==="start"||e==="end")&&!W9t.test(r)&&(e=e==="start"?"left":"right"),I0[e]}function Z9t(r,e,t){return t>0&&r.push(`
`,""),r.push(e,""),r}var Y9t=function(){function r(e,t,n,i){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Di(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}return r.prototype.createLabel=function(e,t,n,i){var o=e+t+n+i;if(this.labels_[o])return this.labels_[o];var a=i?this.strokeStates[i]:null,c=n?this.fillStates[n]:null,h=this.textStates[t],d=this.pixelRatio,v=[h.scale[0]*d,h.scale[1]*d],x=Array.isArray(e),S=h.justify?I0[h.justify]:_qe(Array.isArray(e)?e[0]:e,h.textAlign||Id),T=i&&a.lineWidth?a.lineWidth:0,L=x?e:e.split(`
`).reduce(Z9t,[]),k=iqe(h,L),R=k.width,D=k.height,j=k.widths,B=k.heights,$=k.lineWidths,ee=R+T,J=[],ie=(ee+2)*v[0],ue=(D+T)*v[1],le={width:ie<0?Math.floor(ie):Math.ceil(ie),height:ue<0?Math.floor(ue):Math.ceil(ue),contextInstructions:J};if((v[0]!=1||v[1]!=1)&&J.push("scale",v),i){J.push("strokeStyle",a.strokeStyle),J.push("lineWidth",T),J.push("lineCap",a.lineCap),J.push("lineJoin",a.lineJoin),J.push("miterLimit",a.miterLimit);var _e=gd?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;_e.prototype.setLineDash&&(J.push("setLineDash",[a.lineDash]),J.push("lineDashOffset",a.lineDashOffset))}n&&J.push("fillStyle",c.fillStyle),J.push("textBaseline","middle"),J.push("textAlign","center");for(var Re=.5-S,ze=S*ee+Re*T,ke=[],Ve=[],We=0,Te=0,Se=0,Ae=0,$e,Ge=0,Ke=L.length;Ge<Ke;Ge+=2){var Pe=L[Ge];if(Pe===`
`){Te+=We,We=0,ze=S*ee+Re*T,++Ae;continue}var at=L[Ge+1]||h.font;at!==$e&&(i&&ke.push("font",at),n&&Ve.push("font",at),$e=at),We=Math.max(We,B[Se]);var Tt=[Pe,ze+Re*j[Se]+S*(j[Se]-$[Ae]),.5*(T+We)+Te];ze+=j[Se],i&&ke.push("strokeText",Tt),n&&Ve.push("fillText",Tt),++Se}return Array.prototype.push.apply(J,ke),Array.prototype.push.apply(J,Ve),this.labels_[o]=le,le},r.prototype.replayTextBackground_=function(e,t,n,i,o,a,c){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,o),e.lineTo.apply(e,t),a&&(this.alignFill_=a[2],this.fill_(e)),c&&(this.setStrokeStyle_(e,c),e.stroke())},r.prototype.calculateImageOrLabelDimensions_=function(e,t,n,i,o,a,c,h,d,v,x,S,T,L,k,R){c*=S[0],h*=S[1];var D=n-c,j=i-h,B=o+d>e?e-d:o,$=a+v>t?t-v:a,ee=L[3]+B*S[0]+L[1],J=L[0]+$*S[1]+L[2],ie=D-L[3],ue=j-L[0];(k||x!==0)&&(Ad[0]=ie,Cd[0]=ie,Ad[1]=ue,gh[1]=ue,gh[0]=ie+ee,yh[0]=gh[0],yh[1]=ue+J,Cd[1]=yh[1]);var le;return x!==0?(le=oo(Di(),n,i,1,1,x,-n,-i),On(le,Ad),On(le,gh),On(le,yh),On(le,Cd),Ra(Math.min(Ad[0],gh[0],yh[0],Cd[0]),Math.min(Ad[1],gh[1],yh[1],Cd[1]),Math.max(Ad[0],gh[0],yh[0],Cd[0]),Math.max(Ad[1],gh[1],yh[1],Cd[1]),A0)):Ra(Math.min(ie,ie+ee),Math.min(ue,ue+J),Math.max(ie,ie+ee),Math.max(ue,ue+J),A0),T&&(D=Math.round(D),j=Math.round(j)),{drawImageX:D,drawImageY:j,drawImageW:B,drawImageH:$,originX:d,originY:v,declutterBox:{minX:A0[0],minY:A0[1],maxX:A0[2],maxY:A0[3],value:R},canvasTransform:le,scale:S}},r.prototype.replayImageOrLabel_=function(e,t,n,i,o,a,c){var h=!!(a||c),d=i.declutterBox,v=e.canvas,x=c?c[2]*i.scale[0]/2:0,S=d.minX-x<=v.width/t&&d.maxX+x>=0&&d.minY-x<=v.height/t&&d.maxY+x>=0;return S&&(h&&this.replayTextBackground_(e,Ad,gh,yh,Cd,a,c),oqe(e,i.canvasTransform,o,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0},r.prototype.fill_=function(e){if(this.alignFill_){var t=On(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(t[0]%n,t[1]%n),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()},r.prototype.setStrokeStyle_=function(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.setLineDash&&(e.lineDashOffset=t[7],e.setLineDash(t[6]))},r.prototype.drawLabelWithPointPlacement_=function(e,t,n,i){var o=this.textStates[t],a=this.createLabel(e,t,i,n),c=this.strokeStates[n],h=this.pixelRatio,d=_qe(Array.isArray(e)?e[0]:e,o.textAlign||Id),v=I0[o.textBaseline||Pv],x=c&&c.lineWidth?c.lineWidth:0,S=a.width/h-2*o.scale[0],T=d*S+2*(.5-d)*x,L=v*a.height/h+2*(.5-v)*x;return{label:a,anchorX:T,anchorY:L}},r.prototype.execute_=function(e,t,n,i,o,a,c,h){var d;this.pixelCoordinates_&&Aa(n,this.renderedTransform_)?d=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),d=uu(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),K2e(this.renderedTransform_,n));for(var v=0,x=i.length,S=0,T,L,k,R,D,j,B,$,ee,J,ie,ue,le=0,_e=0,Re=null,ze=null,ke=this.coordinateCache_,Ve=this.viewRotation_,We=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,Te={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Ve},Se=this.instructions!=i||this.overlaps?0:200,Ae,$e,Ge,Ke;v<x;){var Pe=i[v],at=Pe[0];switch(at){case pr.BEGIN_GEOMETRY:Ae=Pe[1],Ke=Pe[3],Ae.getGeometry()?c!==void 0&&!Si(c,Ke.getExtent())?v=Pe[2]+1:++v:v=Pe[2];break;case pr.BEGIN_PATH:le>Se&&(this.fill_(e),le=0),_e>Se&&(e.stroke(),_e=0),!le&&!_e&&(e.beginPath(),R=NaN,D=NaN),++v;break;case pr.CIRCLE:S=Pe[1];var Tt=d[S],Le=d[S+1],Ye=d[S+2],Fe=d[S+3],Ze=Ye-Tt,tt=Fe-Le,Qe=Math.sqrt(Ze*Ze+tt*tt);e.moveTo(Tt+Qe,Le),e.arc(Tt,Le,Qe,0,2*Math.PI,!0),++v;break;case pr.CLOSE_PATH:e.closePath(),++v;break;case pr.CUSTOM:S=Pe[1],T=Pe[2];var Dt=Pe[3],Kt=Pe[4],_t=Pe.length==6?Pe[5]:void 0;Te.geometry=Dt,Te.feature=Ae,v in ke||(ke[v]=[]);var be=ke[v];_t?_t(d,S,T,2,be):(be[0]=d[S],be[1]=d[S+1],be.length=2),Kt(be,Te),++v;break;case pr.DRAW_IMAGE:S=Pe[1],T=Pe[2],$=Pe[3],L=Pe[4],k=Pe[5];var jt=Pe[6],Qt=Pe[7],Ft=Pe[8],nr=Pe[9],or=Pe[10],Wt=Pe[11],lr=Pe[12],Pr=Pe[13],en=Pe[14],ai=Pe[15];if(!$&&Pe.length>=20){ee=Pe[19],J=Pe[20],ie=Pe[21],ue=Pe[22];var Ii=this.drawLabelWithPointPlacement_(ee,J,ie,ue);$=Ii.label,Pe[3]=$;var nt=Pe[23];L=(Ii.anchorX-nt)*this.pixelRatio,Pe[4]=L;var Qn=Pe[24];k=(Ii.anchorY-Qn)*this.pixelRatio,Pe[5]=k,jt=$.height,Pe[6]=jt,Pr=$.width,Pe[13]=Pr}var An=void 0;Pe.length>25&&(An=Pe[25]);var di=void 0,Ti=void 0,ut=void 0;Pe.length>17?(di=Pe[16],Ti=Pe[17],ut=Pe[18]):(di=dh,Ti=!1,ut=!1),or&&We?Wt+=Ve:!or&&!We&&(Wt-=Ve);for(var vr=0;S<T;S+=2)if(!(An&&An[vr++]<Pr/this.pixelRatio)){var zt=this.calculateImageOrLabelDimensions_($.width,$.height,d[S],d[S+1],Pr,jt,L,k,Ft,nr,Wt,lr,o,di,Ti||ut,Ae),Ai=[e,t,$,zt,Qt,Ti?Re:null,ut?ze:null];if(h){if(en==="none")continue;if(en==="obstacle"){h.insert(zt.declutterBox);continue}else{var hn=void 0,Ee=void 0;if(ai){var Oe=T-S;if(!ai[Oe]){ai[Oe]=Ai;continue}if(hn=ai[Oe],delete ai[Oe],Ee=yqe(hn),h.collides(Ee))continue}if(h.collides(zt.declutterBox))continue;hn&&(h.insert(Ee),this.replayImageOrLabel_.apply(this,hn)),h.insert(zt.declutterBox)}}this.replayImageOrLabel_.apply(this,Ai)}++v;break;case pr.DRAW_CHARS:var it=Pe[1],bt=Pe[2],vt=Pe[3],oe=Pe[4];ue=Pe[5];var W=Pe[6],H=Pe[7],K=Pe[8];ie=Pe[9];var ae=Pe[10];ee=Pe[11],J=Pe[12];var ve=[Pe[13],Pe[13]],xe=this.textStates[J],Ie=xe.font,pe=[xe.scale[0]*H,xe.scale[1]*H],Be=void 0;Ie in this.widths_?Be=this.widths_[Ie]:(Be={},this.widths_[Ie]=Be);var Je=PD(d,it,bt,2),Ue=Math.abs(pe[0])*t8(Ie,ee,Be);if(oe||Ue<=Je){var st=this.textStates[J].textAlign,Bt=(Je-Ue)*I0[st],Xt=gqe(d,it,bt,2,ee,Bt,W,Math.abs(pe[0]),t8,Ie,Be,We?0:this.viewRotation_);e:if(Xt){var Nr=[],cr=void 0,Fr=void 0,Cr=void 0,Xr=void 0,Kr=void 0;if(ie)for(cr=0,Fr=Xt.length;cr<Fr;++cr){Kr=Xt[cr],Cr=Kr[4],Xr=this.createLabel(Cr,J,"",ie),L=Kr[2]+(pe[0]<0?-ae:ae),k=vt*Xr.height+(.5-vt)*2*ae*pe[1]/pe[0]-K;var zt=this.calculateImageOrLabelDimensions_(Xr.width,Xr.height,Kr[0],Kr[1],Xr.width,Xr.height,L,k,0,0,Kr[3],ve,!1,dh,!1,Ae);if(h&&h.collides(zt.declutterBox))break e;Nr.push([e,t,Xr,zt,1,null,null])}if(ue)for(cr=0,Fr=Xt.length;cr<Fr;++cr){Kr=Xt[cr],Cr=Kr[4],Xr=this.createLabel(Cr,J,ue,""),L=Kr[2],k=vt*Xr.height-K;var zt=this.calculateImageOrLabelDimensions_(Xr.width,Xr.height,Kr[0],Kr[1],Xr.width,Xr.height,L,k,0,0,Kr[3],ve,!1,dh,!1,Ae);if(h&&h.collides(zt.declutterBox))break e;Nr.push([e,t,Xr,zt,1,null,null])}h&&h.load(Nr.map(yqe));for(var Sr=0,un=Nr.length;Sr<un;++Sr)this.replayImageOrLabel_.apply(this,Nr[Sr])}}++v;break;case pr.END_GEOMETRY:if(a!==void 0){Ae=Pe[1];var Cn=a(Ae,Ke);if(Cn)return Cn}++v;break;case pr.FILL:Se?le++:this.fill_(e),++v;break;case pr.MOVE_TO_LINE_TO:for(S=Pe[1],T=Pe[2],$e=d[S],Ge=d[S+1],j=$e+.5|0,B=Ge+.5|0,(j!==R||B!==D)&&(e.moveTo($e,Ge),R=j,D=B),S+=2;S<T;S+=2)$e=d[S],Ge=d[S+1],j=$e+.5|0,B=Ge+.5|0,(S==T-2||j!==R||B!==D)&&(e.lineTo($e,Ge),R=j,D=B);++v;break;case pr.SET_FILL_STYLE:Re=Pe,this.alignFill_=Pe[2],le&&(this.fill_(e),le=0,_e&&(e.stroke(),_e=0)),e.fillStyle=Pe[1],++v;break;case pr.SET_STROKE_STYLE:ze=Pe,_e&&(e.stroke(),_e=0),this.setStrokeStyle_(e,Pe),++v;break;case pr.STROKE:Se?_e++:e.stroke(),++v;break;default:++v;break;}}le&&this.fill_(e),_e&&e.stroke()},r.prototype.execute=function(e,t,n,i,o,a){this.viewRotation_=i,this.execute_(e,t,n,this.instructions,o,void 0,void 0,a)},r.prototype.executeHitDetection=function(e,t,n,i,o){return this.viewRotation_=n,this.execute_(e,1,t,this.hitDetectionInstructions,!0,i,o)},r}(),xqe=Y9t;var s8=["Polygon","Circle","LineString","Image","Text","Default"],K9t=function(){function r(e,t,n,i,o,a){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Di(),this.createExecutors_(o)}return r.prototype.clip=function(e,t){var n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()},r.prototype.createExecutors_=function(e){for(var t in e){var n=this.executorsByZIndex_[t];n===void 0&&(n={},this.executorsByZIndex_[t]=n);var i=e[t];for(var o in i){var a=i[o];n[o]=new xqe(this.resolution_,this.pixelRatio_,this.overlaps_,a)}}},r.prototype.hasExecutors=function(e){for(var t in this.executorsByZIndex_)for(var n=this.executorsByZIndex_[t],i=0,o=e.length;i<o;++i)if(e[i]in n)return!0;return!1},r.prototype.forEachFeatureAtCoordinate=function(e,t,n,i,o,a){i=Math.round(i);var c=i*2+1,h=oo(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-n,-e[0],-e[1]),d=!this.hitDetectionContext_;d&&(this.hitDetectionContext_=Ei(c,c));var v=this.hitDetectionContext_;v.canvas.width!==c||v.canvas.height!==c?(v.canvas.width=c,v.canvas.height=c):d||v.clearRect(0,0,c,c);var x;this.renderBuffer_!==void 0&&(x=Ni(),bv(x,e),Wu(x,t*(this.renderBuffer_+i),x));var S=X9t(i),T;function L(J,ie){for(var ue=v.getImageData(0,0,c,c).data,le=0,_e=S.length;le<_e;le++)if(ue[S[le]]>0){if(!a||T!=="Image"&&T!=="Text"||a.indexOf(J)!==-1){var Re=(S[le]-3)/4,ze=i-Re%c,ke=i-(Re/c|0),Ve=o(J,ie,ze*ze+ke*ke);if(Ve)return Ve}v.clearRect(0,0,c,c);break}}var k=Object.keys(this.executorsByZIndex_).map(Number);k.sort(pl);var R,D,j,B,$;for(R=k.length-1;R>=0;--R){var ee=k[R].toString();for(j=this.executorsByZIndex_[ee],D=s8.length-1;D>=0;--D)if(T=s8[D],B=j[T],B!==void 0&&($=B.executeHitDetection(v,h,n,L,x),$))return $}},r.prototype.getClipCoords=function(e){var t=this.maxExtent_;if(!t)return null;var n=t[0],i=t[1],o=t[2],a=t[3],c=[n,i,n,a,o,a,o,i];return uu(c,0,8,2,e,c),c},r.prototype.isEmpty=function(){return $u(this.executorsByZIndex_)},r.prototype.execute=function(e,t,n,i,o,a,c){var h=Object.keys(this.executorsByZIndex_).map(Number);h.sort(pl),this.maxExtent_&&(e.save(),this.clip(e,n));var d=a||s8,v,x,S,T,L,k;for(c&&h.reverse(),v=0,x=h.length;v<x;++v){var R=h[v].toString();for(L=this.executorsByZIndex_[R],S=0,T=d.length;S<T;++S){var D=d[S];k=L[D],k!==void 0&&k.execute(e,t,n,i,o,c)}}this.maxExtent_&&e.restore()},r}(),l8={};function X9t(r){if(l8[r]!==void 0)return l8[r];for(var e=r*2+1,t=r*r,n=new Array(t+1),i=0;i<=r;++i)for(var o=0;o<=r;++o){var a=i*i+o*o;if(a>t)break;var c=n[a];c||(c=[],n[a]=c),c.push(((r+i)*e+(r+o))*4+3),i>0&&c.push(((r-i)*e+(r+o))*4+3),o>0&&(c.push(((r+i)*e+(r-o))*4+3),i>0&&c.push(((r-i)*e+(r-o))*4+3))}for(var h=[],i=0,d=n.length;i<d;++i)n[i]&&h.push.apply(h,n[i]);return l8[r]=h,h}var u8=K9t;var wo={ANIMATING:0,INTERACTING:1};var J9t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Q9t=function(r){J9t(e,r);function e(t,n,i,o,a,c,h){var d=r.call(this)||this;return d.context_=t,d.pixelRatio_=n,d.extent_=i,d.transform_=o,d.viewRotation_=a,d.squaredTolerance_=c,d.userTransform_=h,d.contextFillState_=null,d.contextStrokeState_=null,d.contextTextState_=null,d.fillState_=null,d.strokeState_=null,d.image_=null,d.imageAnchorX_=0,d.imageAnchorY_=0,d.imageHeight_=0,d.imageOpacity_=0,d.imageOriginX_=0,d.imageOriginY_=0,d.imageRotateWithView_=!1,d.imageRotation_=0,d.imageScale_=[0,0],d.imageWidth_=0,d.text_="",d.textOffsetX_=0,d.textOffsetY_=0,d.textRotateWithView_=!1,d.textRotation_=0,d.textScale_=[0,0],d.textFillState_=null,d.textStrokeState_=null,d.textState_=null,d.pixelCoordinates_=[],d.tmpLocalTransform_=Di(),d}return e.prototype.drawImages_=function(t,n,i,o){if(this.image_){var a=uu(t,n,i,o,this.transform_,this.pixelCoordinates_),c=this.context_,h=this.tmpLocalTransform_,d=c.globalAlpha;this.imageOpacity_!=1&&(c.globalAlpha=d*this.imageOpacity_);var v=this.imageRotation_;this.imageRotateWithView_&&(v+=this.viewRotation_);for(var x=0,S=a.length;x<S;x+=2){var T=a[x]-this.imageAnchorX_,L=a[x+1]-this.imageAnchorY_;if(v!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){var k=T+this.imageAnchorX_,R=L+this.imageAnchorY_;oo(h,k,R,1,1,v,-k,-R),c.setTransform.apply(c,h),c.translate(k,R),c.scale(this.imageScale_[0],this.imageScale_[1]),c.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),c.setTransform(1,0,0,1,0,0)}else c.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,T,L,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(c.globalAlpha=d)}},e.prototype.drawText_=function(t,n,i,o){if(!(!this.textState_||this.text_==="")){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var a=uu(t,n,i,o,this.transform_,this.pixelCoordinates_),c=this.context_,h=this.textRotation_;for(this.textRotateWithView_&&(h+=this.viewRotation_);n<i;n+=o){var d=a[n]+this.textOffsetX_,v=a[n+1]+this.textOffsetY_;if(h!==0||this.textScale_[0]!=1||this.textScale_[1]!=1){var x=oo(this.tmpLocalTransform_,d,v,1,1,h,-d,-v);c.setTransform.apply(c,x),c.translate(d,v),c.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&c.strokeText(this.text_,0,0),this.textFillState_&&c.fillText(this.text_,0,0),c.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&c.strokeText(this.text_,d,v),this.textFillState_&&c.fillText(this.text_,d,v)}}},e.prototype.moveToLineTo_=function(t,n,i,o,a){var c=this.context_,h=uu(t,n,i,o,this.transform_,this.pixelCoordinates_);c.moveTo(h[0],h[1]);var d=h.length;a&&(d-=2);for(var v=2;v<d;v+=2)c.lineTo(h[v],h[v+1]);return a&&c.closePath(),i},e.prototype.drawRings_=function(t,n,i,o){for(var a=0,c=i.length;a<c;++a)n=this.moveToLineTo_(t,n,i[a],o,!0);return n},e.prototype.drawCircle=function(t){if(Si(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=Mke(t,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],o=n[3]-n[1],a=Math.sqrt(i*i+o*o),c=this.context_;c.beginPath(),c.arc(n[0],n[1],a,0,2*Math.PI),this.fillState_&&c.fill(),this.strokeState_&&c.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){var n=t.getType();switch(n){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break;default:}},e.prototype.drawFeature=function(t,n){var i=n.getGeometryFunction()(t);!i||!Si(this.extent_,i.getExtent())||(this.setStyle(n),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var n=t.getGeometriesArray(),i=0,o=n.length;i<o;++i)this.drawGeometry(n[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Si(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=t.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),n.stroke()}if(this.text_!==""){var o=t.getFlatMidpoint();this.drawText_(o,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=t.getExtent();if(Si(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,o=t.getFlatCoordinates(),a=0,c=t.getEnds(),h=t.getStride();i.beginPath();for(var d=0,v=c.length;d<v;++d)a=this.moveToLineTo_(o,a,c[d],h,!1);i.stroke()}if(this.text_!==""){var x=t.getFlatMidpoints();this.drawText_(x,0,x.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Si(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_;n.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Si(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=t.getOrientedFlatCoordinates(),o=0,a=t.getEndss(),c=t.getStride();n.beginPath();for(var h=0,d=a.length;h<d;++h){var v=a[h];o=this.drawRings_(i,o,v,c)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){var x=t.getFlatInteriorPoints();this.drawText_(x,0,x.length,2)}}},e.prototype.setContextFillState_=function(t){var n=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),n.setLineDash&&(Aa(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var n=this.context_,i=this.contextTextState_,o=t.textAlign?t.textAlign:Id;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=o&&(i.textAlign=o,n.textAlign=o),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=o,n.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:o,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,n){var i=this;if(!t)this.fillState_=null;else{var o=t.getColor();this.fillState_={fillStyle:Fs(o||zs)}}if(!n)this.strokeState_=null;else{var a=n.getColor(),c=n.getLineCap(),h=n.getLineDash(),d=n.getLineDashOffset(),v=n.getLineJoin(),x=n.getWidth(),S=n.getMiterLimit(),T=h||ch;this.strokeState_={lineCap:c!==void 0?c:Rv,lineDash:this.pixelRatio_===1?T:T.map(function(L){return L*i.pixelRatio_}),lineDashOffset:(d||fh)*this.pixelRatio_,lineJoin:v!==void 0?v:Gc,lineWidth:(x!==void 0?x:mh)*this.pixelRatio_,miterLimit:S!==void 0?S:hh,strokeStyle:Fs(a||ph)}}},e.prototype.setImageStyle=function(t){var n;if(!t||!(n=t.getSize())){this.image_=null;return}var i=t.getAnchor(),o=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*this.pixelRatio_,this.imageAnchorY_=i[1]*this.pixelRatio_,this.imageHeight_=n[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=n[0]*this.pixelRatio_},e.prototype.setTextStyle=function(t){if(!t)this.text_="";else{var n=t.getFill();if(!n)this.textFillState_=null;else{var i=n.getColor();this.textFillState_={fillStyle:Fs(i||zs)}}var o=t.getStroke();if(!o)this.textStrokeState_=null;else{var a=o.getColor(),c=o.getLineCap(),h=o.getLineDash(),d=o.getLineDashOffset(),v=o.getLineJoin(),x=o.getWidth(),S=o.getMiterLimit();this.textStrokeState_={lineCap:c!==void 0?c:Rv,lineDash:h||ch,lineDashOffset:d||fh,lineJoin:v!==void 0?v:Gc,lineWidth:x!==void 0?x:mh,miterLimit:S!==void 0?S:hh,strokeStyle:Fs(a||ph)}}var T=t.getFont(),L=t.getOffsetX(),k=t.getOffsetY(),R=t.getRotateWithView(),D=t.getRotation(),j=t.getScaleArray(),B=t.getText(),$=t.getTextAlign(),ee=t.getTextBaseline();this.textState_={font:T!==void 0?T:UD,textAlign:$!==void 0?$:Id,textBaseline:ee!==void 0?ee:Pv},this.text_=B!==void 0?Array.isArray(B)?B.reduce(function(J,ie,ue){return J+=ue%2?" ":ie},""):B:"",this.textOffsetX_=L!==void 0?this.pixelRatio_*L:0,this.textOffsetY_=k!==void 0?this.pixelRatio_*k:0,this.textRotateWithView_=R!==void 0?R:!1,this.textRotation_=D!==void 0?D:0,this.textScale_=[this.pixelRatio_*j[0],this.pixelRatio_*j[1]]}},e}(GD),wqe=Q9t;var Wc={FRACTION:"fraction",PIXELS:"pixels"};var yl={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};var e7t=function(){function r(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return r.prototype.clear=function(){this.cache_={},this.cacheSize_=0},r.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},r.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}},r.prototype.get=function(e,t,n){var i=bqe(e,t,n);return i in this.cache_?this.cache_[i]:null},r.prototype.set=function(e,t,n,i){var o=bqe(e,t,n);this.cache_[o]=i,++this.cacheSize_},r.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},r}();function bqe(r,e,t){var n=t?FD(t):"null";return e+":"+r+":"+n}var C0=new e7t;var t7t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),r7t=function(r){t7t(e,r);function e(t,n,i,o){var a=r.call(this)||this;return a.extent=t,a.pixelRatio_=i,a.resolution=n,a.state=o,a}return e.prototype.changed=function(){this.dispatchEvent(Pt.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return ir()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){ir()},e}(ks),Sqe=r7t;var n7t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lFr=function(r){n7t(e,r);function e(t,n,i,o,a,c){var h=r.call(this,t,n,i,yn.IDLE)||this;return h.src_=o,h.image_=new Image,a!==null&&(h.image_.crossOrigin=a),h.unlisten_=null,h.state=yn.IDLE,h.imageLoadFunction_=c,h}return e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=yn.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=_o(this.extent)/this.image_.height),this.state=yn.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){(this.state==yn.IDLE||this.state==yn.ERROR)&&(this.state=yn.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=FE(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=_o(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Sqe);function FE(r,e,t){var n=r,i=!0,o=!1,a=!1,c=[a0(n,Pt.LOAD,function(){a=!0,o||e()})];return n.src&&Z2e?(o=!0,n.decode().then(function(){i&&e()}).catch(function(h){i&&(a?e():t())})):c.push(a0(n,Pt.ERROR,t)),function(){i=!1,c.forEach(Yr)}}var i7t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zE=null,o7t=function(r){i7t(e,r);function e(t,n,i,o,a,c){var h=r.call(this)||this;return h.hitDetectionImage_=null,h.image_=t||new Image,o!==null&&(h.image_.crossOrigin=o),h.canvas_={},h.color_=c,h.unlisten_=null,h.imageState_=a,h.size_=i,h.src_=n,h.tainted_,h}return e.prototype.isTainted_=function(){if(this.tainted_===void 0&&this.imageState_===yn.LOADED){zE||(zE=Ei(1,1)),zE.drawImage(this.image_,0,0);try{zE.getImageData(0,0,1,1),this.tainted_=!1}catch(t){zE=null,this.tainted_=!0}}return this.tainted_===!0},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Pt.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=yn.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=yn.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],n=this.size_[1],i=Ei(t,n);i.fillRect(0,0,t,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==yn.IDLE){this.imageState_=yn.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=FE(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(!(!this.color_||this.canvas_[t]||this.imageState_!==yn.LOADED)){var n=document.createElement("canvas");this.canvas_[t]=n,n.width=Math.ceil(this.image_.width*t),n.height=Math.ceil(this.image_.height*t);var i=n.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),i.globalCompositeOperation="multiply",i.globalCompositeOperation==="multiply"||this.isTainted_())i.fillStyle=FD(this.color_),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(this.image_,0,0);else{for(var o=i.getImageData(0,0,n.width,n.height),a=o.data,c=this.color_[0]/255,h=this.color_[1]/255,d=this.color_[2]/255,v=this.color_[3],x=0,S=a.length;x<S;x+=4)a[x]*=c,a[x+1]*=h,a[x+2]*=d,a[x+3]*=v;i.putImageData(o,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(ks);function Eqe(r,e,t,n,i,o){var a=C0.get(e,n,o);return a||(a=new o7t(r,e,t,n,i,o),C0.set(e,n,o,a)),a}var a7t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),s7t=function(r){a7t(e,r);function e(t){var n=this,i=t||{},o=i.opacity!==void 0?i.opacity:1,a=i.rotation!==void 0?i.rotation:0,c=i.scale!==void 0?i.scale:1,h=i.rotateWithView!==void 0?i.rotateWithView:!1;n=r.call(this,{opacity:o,rotation:a,scale:c,displacement:i.displacement!==void 0?i.displacement:[0,0],rotateWithView:h,declutterMode:i.declutterMode})||this,n.anchor_=i.anchor!==void 0?i.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=i.anchorOrigin!==void 0?i.anchorOrigin:yl.TOP_LEFT,n.anchorXUnits_=i.anchorXUnits!==void 0?i.anchorXUnits:Wc.FRACTION,n.anchorYUnits_=i.anchorYUnits!==void 0?i.anchorYUnits:Wc.FRACTION,n.crossOrigin_=i.crossOrigin!==void 0?i.crossOrigin:null;var d=i.img!==void 0?i.img:null;n.imgSize_=i.imgSize;var v=i.src;ar(!(v!==void 0&&d),4),ar(!d||d&&n.imgSize_,5),(v===void 0||v.length===0)&&d&&(v=d.src||tr(d)),ar(v!==void 0&&v.length>0,6);var x=i.src!==void 0?yn.IDLE:yn.LOADED;return n.color_=i.color!==void 0?uh(i.color):null,n.iconImage_=Eqe(d,v,n.imgSize_!==void 0?n.imgSize_:null,n.crossOrigin_,x,n.color_),n.offset_=i.offset!==void 0?i.offset:[0,0],n.offsetOrigin_=i.offsetOrigin!==void 0?i.offsetOrigin:yl.TOP_LEFT,n.origin_=null,n.size_=i.size!==void 0?i.size:null,n}return e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},e.prototype.getAnchor=function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var n=this.getSize();if(this.anchorXUnits_==Wc.FRACTION||this.anchorYUnits_==Wc.FRACTION){if(!n)return null;t=this.anchor_.slice(),this.anchorXUnits_==Wc.FRACTION&&(t[0]*=n[0]),this.anchorYUnits_==Wc.FRACTION&&(t[1]*=n[1])}if(this.anchorOrigin_!=yl.TOP_LEFT){if(!n)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_==yl.TOP_RIGHT||this.anchorOrigin_==yl.BOTTOM_RIGHT)&&(t[0]=-t[0]+n[0]),(this.anchorOrigin_==yl.BOTTOM_LEFT||this.anchorOrigin_==yl.BOTTOM_RIGHT)&&(t[1]=-t[1]+n[1])}this.normalizedAnchor_=t}var i=this.getDisplacement();return[t[0]-i[0],t[1]+i[1]]},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=yl.TOP_LEFT){var n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;t=t.slice(),(this.offsetOrigin_==yl.TOP_RIGHT||this.offsetOrigin_==yl.BOTTOM_RIGHT)&&(t[0]=i[0]-n[0]-t[0]),(this.offsetOrigin_==yl.BOTTOM_LEFT||this.offsetOrigin_==yl.BOTTOM_RIGHT)&&(t[1]=i[1]-n[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(Pt.CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(Pt.CHANGE,t)},e}(jD),c8=s7t;var l7t="#333",u7t=function(){function r(e){var t=e||{};this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Bn(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new gl({color:l7t}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:$D.POINT,this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}return r.prototype.clone=function(){var e=this.getScale();return new r({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})},r.prototype.getOverflow=function(){return this.overflow_},r.prototype.getFont=function(){return this.font_},r.prototype.getMaxAngle=function(){return this.maxAngle_},r.prototype.getPlacement=function(){return this.placement_},r.prototype.getOffsetX=function(){return this.offsetX_},r.prototype.getOffsetY=function(){return this.offsetY_},r.prototype.getFill=function(){return this.fill_},r.prototype.getRotateWithView=function(){return this.rotateWithView_},r.prototype.getRotation=function(){return this.rotation_},r.prototype.getScale=function(){return this.scale_},r.prototype.getScaleArray=function(){return this.scaleArray_},r.prototype.getStroke=function(){return this.stroke_},r.prototype.getText=function(){return this.text_},r.prototype.getTextAlign=function(){return this.textAlign_},r.prototype.getJustify=function(){return this.justify_},r.prototype.getTextBaseline=function(){return this.textBaseline_},r.prototype.getBackgroundFill=function(){return this.backgroundFill_},r.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},r.prototype.getPadding=function(){return this.padding_},r.prototype.setOverflow=function(e){this.overflow_=e},r.prototype.setFont=function(e){this.font_=e},r.prototype.setMaxAngle=function(e){this.maxAngle_=e},r.prototype.setOffsetX=function(e){this.offsetX_=e},r.prototype.setOffsetY=function(e){this.offsetY_=e},r.prototype.setPlacement=function(e){this.placement_=e},r.prototype.setRotateWithView=function(e){this.rotateWithView_=e},r.prototype.setFill=function(e){this.fill_=e},r.prototype.setRotation=function(e){this.rotation_=e},r.prototype.setScale=function(e){this.scale_=e,this.scaleArray_=Bn(e!==void 0?e:1)},r.prototype.setStroke=function(e){this.stroke_=e},r.prototype.setText=function(e){this.text_=e},r.prototype.setTextAlign=function(e){this.textAlign_=e},r.prototype.setJustify=function(e){this.justify_=e},r.prototype.setTextBaseline=function(e){this.textBaseline_=e},r.prototype.setBackgroundFill=function(e){this.backgroundFill_=e},r.prototype.setBackgroundStroke=function(e){this.backgroundStroke_=e},r.prototype.setPadding=function(e){this.padding_=e},r}(),f8=u7t;var Qu=.5;function Iqe(r,e,t,n,i,o,a){var c=r[0]*Qu,h=r[1]*Qu,d=Ei(c,h);d.imageSmoothingEnabled=!1;for(var v=d.canvas,x=new wqe(d,Qu,i,null,a),S=t.length,T=Math.floor((256*256*256-1)/S),L={},k=1;k<=S;++k){var R=t[k-1],D=R.getStyleFunction()||n;if(n){var j=D(R,o);if(j){Array.isArray(j)||(j=[j]);for(var B=k*T,$="#"+("000000"+B.toString(16)).slice(-6),ee=0,J=j.length;ee<J;++ee){var ie=j[ee],ue=ie.getGeometryFunction()(R);if(!(!ue||!Si(i,ue.getExtent()))){var le=ie.clone(),_e=le.getFill();_e&&_e.setColor($);var Re=le.getStroke();Re&&(Re.setColor($),Re.setLineDash(null)),le.setText(void 0);var ze=ie.getImage();if(ze&&ze.getOpacity()!==0){var ke=ze.getImageSize();if(!ke)continue;var Ve=Ei(ke[0],ke[1],void 0,{alpha:!1}),We=Ve.canvas;Ve.fillStyle=$,Ve.fillRect(0,0,We.width,We.height),le.setImage(new c8({img:We,imgSize:ke,anchor:ze.getAnchor(),anchorXUnits:Wc.PIXELS,anchorYUnits:Wc.PIXELS,offset:ze.getOrigin(),opacity:1,size:ze.getSize(),scale:ze.getScale(),rotation:ze.getRotation(),rotateWithView:ze.getRotateWithView()}))}var Te=le.getZIndex()||0,Se=L[Te];Se||(Se={},L[Te]=Se,Se.Polygon=[],Se.Circle=[],Se.LineString=[],Se.Point=[]),Se[ue.getType().replace("Multi","")].push(ue,le)}}}}}for(var Ae=Object.keys(L).map(Number).sort(pl),k=0,$e=Ae.length;k<$e;++k){var Se=L[Ae[k]];for(var Ge in Se)for(var Ke=Se[Ge],ee=0,J=Ke.length;ee<J;ee+=2){x.setStyle(Ke[ee+1]);for(var Pe=0,at=e.length;Pe<at;++Pe)x.setTransform(e[Pe]),x.drawGeometry(Ke[ee])}}return d.getImageData(0,0,v.width,v.height)}function Tqe(r,e,t){var n=[];if(t){var i=Math.floor(Math.round(r[0])*Qu),o=Math.floor(Math.round(r[1])*Qu),a=(Fn(i,0,t.width-1)+Fn(o,0,t.height-1)*t.width)*4,c=t.data[a],h=t.data[a+1],d=t.data[a+2],v=d+256*(h+256*c),x=Math.floor((256*256*256-1)/e.length);v&&v%x===0&&n.push(e[v/x-1])}return n}var c7t=.5,Aqe={Point:g7t,LineString:d7t,Polygon:_7t,MultiPoint:y7t,MultiLineString:m7t,MultiPolygon:v7t,GeometryCollection:p7t,Circle:f7t};function Cqe(r,e){return parseInt(tr(r),10)-parseInt(tr(e),10)}function Mqe(r,e){var t=ZD(r,e);return t*t}function ZD(r,e){return c7t*r/e}function f7t(r,e,t,n,i){var o=t.getFill(),a=t.getStroke();if(o||a){var c=r.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(o,a),c.drawCircle(e,n)}var h=t.getText();if(h&&h.getText()){var d=(i||r).getBuilder(t.getZIndex(),"Text");d.setTextStyle(h),d.drawText(e,n)}}function h8(r,e,t,n,i,o,a){var c=!1,h=t.getImage();if(h){var d=h.getImageState();d==yn.LOADED||d==yn.ERROR?h.unlistenImageChange(i):(d==yn.IDLE&&h.load(),h.listenImageChange(i),c=!0)}return h7t(r,e,t,n,o,a),c}function h7t(r,e,t,n,i,o){var a=t.getGeometryFunction()(e);if(a){var c=a.simplifyTransformed(n,i),h=t.getRenderer();if(h)Rqe(r,c,t,e);else{var d=Aqe[c.getType()];d(r,c,t,e,o)}}}function Rqe(r,e,t,n){if(e.getType()=="GeometryCollection"){for(var i=e.getGeometries(),o=0,a=i.length;o<a;++o)Rqe(r,i[o],t,n);return}var c=r.getBuilder(t.getZIndex(),"Default");c.drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer())}function p7t(r,e,t,n,i){var o=e.getGeometriesArray(),a,c;for(a=0,c=o.length;a<c;++a){var h=Aqe[o[a].getType()];h(r,o[a],t,n,i)}}function d7t(r,e,t,n,i){var o=t.getStroke();if(o){var a=r.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,n)}var c=t.getText();if(c&&c.getText()){var h=(i||r).getBuilder(t.getZIndex(),"Text");h.setTextStyle(c),h.drawText(e,n)}}function m7t(r,e,t,n,i){var o=t.getStroke();if(o){var a=r.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,n)}var c=t.getText();if(c&&c.getText()){var h=(i||r).getBuilder(t.getZIndex(),"Text");h.setTextStyle(c),h.drawText(e,n)}}function v7t(r,e,t,n,i){var o=t.getFill(),a=t.getStroke();if(a||o){var c=r.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,a),c.drawMultiPolygon(e,n)}var h=t.getText();if(h&&h.getText()){var d=(i||r).getBuilder(t.getZIndex(),"Text");d.setTextStyle(h),d.drawText(e,n)}}function g7t(r,e,t,n,i){var o=t.getImage(),a=t.getText(),c;if(o){if(o.getImageState()!=yn.LOADED)return;var h=r;if(i){var d=o.getDeclutterMode();if(d!=="none")if(h=i,d==="obstacle"){var v=r.getBuilder(t.getZIndex(),"Image");v.setImageStyle(o,c),v.drawPoint(e,n)}else a&&a.getText()&&(c={})}var x=h.getBuilder(t.getZIndex(),"Image");x.setImageStyle(o,c),x.drawPoint(e,n)}if(a&&a.getText()){var S=r;i&&(S=i);var T=S.getBuilder(t.getZIndex(),"Text");T.setTextStyle(a,c),T.drawText(e,n)}}function y7t(r,e,t,n,i){var o=t.getImage(),a=t.getText(),c;if(o){if(o.getImageState()!=yn.LOADED)return;var h=r;if(i){var d=o.getDeclutterMode();if(d!=="none")if(h=i,d==="obstacle"){var v=r.getBuilder(t.getZIndex(),"Image");v.setImageStyle(o,c),v.drawMultiPoint(e,n)}else a&&a.getText()&&(c={})}var x=h.getBuilder(t.getZIndex(),"Image");x.setImageStyle(o,c),x.drawMultiPoint(e,n)}if(a&&a.getText()){var S=r;i&&(S=i);var T=S.getBuilder(t.getZIndex(),"Text");T.setTextStyle(a,c),T.drawText(e,n)}}function _7t(r,e,t,n,i){var o=t.getFill(),a=t.getStroke();if(o||a){var c=r.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,a),c.drawPolygon(e,n)}var h=t.getText();if(h&&h.getText()){var d=(i||r).getBuilder(t.getZIndex(),"Text");d.setTextStyle(h),d.drawText(e,n)}}var x7t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),w7t=function(r){x7t(e,r);function e(t){var n=r.call(this,t)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.animatingOrInteracting_,n.hitDetectionImageData_=null,n.renderedFeatures_=null,n.renderedRevision_=-1,n.renderedResolution_=NaN,n.renderedExtent_=Ni(),n.wrappedRenderedExtent_=Ni(),n.renderedRotation_,n.renderedCenter_=null,n.renderedProjection_=null,n.renderedRenderOrder_=null,n.replayGroup_=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n.compositionContext_=null,n.opacity_=1,n}return e.prototype.renderWorlds=function(t,n,i){var o=n.extent,a=n.viewState,c=a.center,h=a.resolution,d=a.projection,v=a.rotation,x=d.getExtent(),S=this.getLayer().getSource(),T=n.pixelRatio,L=n.viewHints,k=!(L[wo.ANIMATING]||L[wo.INTERACTING]),R=this.compositionContext_,D=Math.round(n.size[0]*T),j=Math.round(n.size[1]*T),B=S.getWrapX()&&d.canWrapX(),$=B?sn(x):null,ee=B?Math.ceil((o[2]-x[2])/$)+1:1,J=B?Math.floor((o[0]-x[0])/$):0;do{var ie=this.getRenderTransform(c,h,v,T,D,j,J*$);t.execute(R,1,ie,v,k,void 0,i)}while(++J<ee)},e.prototype.setupCompositionContext_=function(){if(this.opacity_!==1){var t=Ei(this.context.canvas.width,this.context.canvas.height,a8);this.compositionContext_=t}else this.compositionContext_=this.context},e.prototype.releaseCompositionContext_=function(){if(this.opacity_!==1){var t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,zD(this.compositionContext_),a8.push(this.compositionContext_.canvas),this.compositionContext_=null}},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())},e.prototype.renderFrame=function(t,n){var i=t.pixelRatio,o=t.layerStatesArray[t.layerIndex];X2e(this.pixelTransform,1/i,1/i),l0(this.inversePixelTransform,this.pixelTransform);var a=pD(this.pixelTransform);this.useContainer(n,a,this.getBackground(t));var c=this.context,h=c.canvas,d=this.replayGroup_,v=this.declutterExecutorGroup;if((!d||d.isEmpty())&&(!v||v.isEmpty()))return null;var x=Math.round(t.size[0]*i),S=Math.round(t.size[1]*i);h.width!=x||h.height!=S?(h.width=x,h.height=S,h.style.transform!==a&&(h.style.transform=a)):this.containerReused||c.clearRect(0,0,x,S),this.preRender(c,t);var T=t.viewState,L=T.projection;this.opacity_=o.opacity,this.setupCompositionContext_();var k=!1,R=!0;if(o.extent&&this.clipping){var D=Pa(o.extent,L);R=Si(D,t.extent),k=R&&!ah(D,t.extent),k&&this.clipUnrotated(this.compositionContext_,t,D)}return R&&this.renderWorlds(d,t),k&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(c,t),this.renderedRotation_!==T.rotation&&(this.renderedRotation_=T.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(n){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var i=[this.context.canvas.width,this.context.canvas.height];On(this.pixelTransform,i);var o=this.renderedCenter_,a=this.renderedResolution_,c=this.renderedRotation_,h=this.renderedProjection_,d=this.wrappedRenderedExtent_,v=this.getLayer(),x=[],S=i[0]*Qu,T=i[1]*Qu;x.push(this.getRenderTransform(o,a,c,Qu,S,T,0).slice());var L=v.getSource(),k=h.getExtent();if(L.getWrapX()&&h.canWrapX()&&!ah(k,d)){for(var R=d[0],D=sn(k),j=0,B=void 0;R<k[0];)--j,B=D*j,x.push(this.getRenderTransform(o,a,c,Qu,S,T,B).slice()),R+=D;for(j=0,R=d[2];R>k[2];)++j,B=D*j,x.push(this.getRenderTransform(o,a,c,Qu,S,T,B).slice()),R-=D}this.hitDetectionImageData_=Iqe(i,x,this.renderedFeatures_,v.getStyleFunction(),d,a,c)}n(Tqe(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,n,i,o,a){var c=this;if(this.replayGroup_){var h=n.viewState.resolution,d=n.viewState.rotation,v=this.getLayer(),x={},S=function(k,R,D){var j=tr(k),B=x[j];if(B){if(B!==!0&&D<B.distanceSq){if(D===0)return x[j]=!0,a.splice(a.lastIndexOf(B),1),o(k,v,R);B.geometry=R,B.distanceSq=D}}else{if(D===0)return x[j]=!0,o(k,v,R);a.push(x[j]={feature:k,layer:v,geometry:R,distanceSq:D,callback:o})}},T,L=[this.replayGroup_];return this.declutterExecutorGroup&&L.push(this.declutterExecutorGroup),L.some(function(k){return T=k.forEachFeatureAtCoordinate(t,h,d,i,S,k===c.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(function(R){return R.value}):null)}),T}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var n=this.getLayer(),i=n.getSource();if(!i)return!1;var o=t.viewHints[wo.ANIMATING],a=t.viewHints[wo.INTERACTING],c=n.getUpdateWhileAnimating(),h=n.getUpdateWhileInteracting();if(this.ready&&!c&&o||!h&&a)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var d=t.extent,v=t.viewState,x=v.projection,S=v.resolution,T=t.pixelRatio,L=n.getRevision(),k=n.getRenderBuffer(),R=n.getRenderOrder();R===void 0&&(R=Cqe);var D=v.center.slice(),j=Wu(d,k*S),B=j.slice(),$=[j.slice()],ee=x.getExtent();if(i.getWrapX()&&x.canWrapX()&&!ah(ee,t.extent)){var J=sn(ee),ie=Math.max(sn(j)/2,J);j[0]=ee[0]-ie,j[2]=ee[2]+ie,bD(D,x);var ue=xW($[0],x);ue[0]<ee[0]&&ue[2]<ee[2]?$.push([ue[0]+J,ue[1],ue[2]+J,ue[3]]):ue[0]>ee[0]&&ue[2]>ee[2]&&$.push([ue[0]-J,ue[1],ue[2]-J,ue[3]])}if(this.ready&&this.renderedResolution_==S&&this.renderedRevision_==L&&this.renderedRenderOrder_==R&&ah(this.wrappedRenderedExtent_,j))return Aa(this.renderedExtent_,B)||(this.hitDetectionImageData_=null,this.renderedExtent_=B),this.renderedCenter_=D,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var le=new o8(ZD(S,T),j,S,T),_e;this.getLayer().getDeclutter()&&(_e=new o8(ZD(S,T),j,S,T));var Re=lu(),ze;if(Re){for(var ke=0,Ve=$.length;ke<Ve;++ke){var We=$[ke],Te=wd(We,x);i.loadFeatures(Te,bke(S,x),Re)}ze=bE(Re,x)}else for(var ke=0,Ve=$.length;ke<Ve;++ke)i.loadFeatures($[ke],S,x);var Se=Mqe(S,T),Ae=!0,$e=function(Tt){var Le,Ye=Tt.getStyleFunction()||n.getStyleFunction();if(Ye&&(Le=Ye(Tt,S)),Le){var Fe=this.renderFeature(Tt,Se,Le,le,ze,_e);Ae=Ae&&!Fe}}.bind(this),Ge=wd(j,x),Ke=i.getFeaturesInExtent(Ge);R&&Ke.sort(R);for(var ke=0,Ve=Ke.length;ke<Ve;++ke)$e(Ke[ke]);this.renderedFeatures_=Ke,this.ready=Ae;var Pe=le.finish(),at=new u8(j,S,T,i.getOverlaps(),Pe,n.getRenderBuffer());return _e&&(this.declutterExecutorGroup=new u8(j,S,T,i.getOverlaps(),_e.finish(),n.getRenderBuffer())),this.renderedResolution_=S,this.renderedRevision_=L,this.renderedRenderOrder_=R,this.renderedExtent_=B,this.wrappedRenderedExtent_=j,this.renderedCenter_=D,this.renderedProjection_=x,this.replayGroup_=at,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,n,i,o,a,c){if(!i)return!1;var h=!1;if(Array.isArray(i))for(var d=0,v=i.length;d<v;++d)h=h8(o,t,i[d],n,this.boundHandleStyleImageChange_,a,c)||h;else h=h8(o,t,i,n,this.boundHandleStyleImageChange_,a,c);return h},e}(WD),Pqe=w7t;var b7t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),S7t=function(r){b7t(e,r);function e(t){return r.call(this,t)||this}return e.prototype.createRenderer=function(){return new Pqe(this)},e}(hqe),hu=S7t;var Oqe=Me($W(),1);var E7t=function(){function r(e){this.rbush_=new Oqe.default(e),this.items_={}}return r.prototype.insert=function(e,t){var n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[tr(t)]=n},r.prototype.load=function(e,t){for(var n=new Array(t.length),i=0,o=t.length;i<o;i++){var a=e[i],c=t[i],h={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:c};n[i]=h,this.items_[tr(c)]=h}this.rbush_.load(n)},r.prototype.remove=function(e){var t=tr(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null},r.prototype.update=function(e,t){var n=this.items_[tr(t)],i=[n.minX,n.minY,n.maxX,n.maxY];sh(i,e)||(this.remove(t),this.insert(e,t))},r.prototype.getAll=function(){var e=this.rbush_.all();return e.map(function(t){return t.value})},r.prototype.getInExtent=function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]},n=this.rbush_.search(t);return n.map(function(i){return i.value})},r.prototype.forEach=function(e){return this.forEach_(this.getAll(),e)},r.prototype.forEachInExtent=function(e,t){return this.forEach_(this.getInExtent(e),t)},r.prototype.forEach_=function(e,t){for(var n,i=0,o=e.length;i<o;i++)if(n=t(e[i]),n)return n;return n},r.prototype.isEmpty=function(){return $u(this.items_)},r.prototype.clear=function(){this.rbush_.clear(),this.items_={}},r.prototype.getExtent=function(e){var t=this.rbush_.toJSON();return Ra(t.minX,t.minY,t.maxX,t.maxY,e)},r.prototype.concat=function(e){this.rbush_.load(e.rbush_.all());for(var t in e.items_)this.items_[t]=e.items_[t]},r}(),BE=E7t;var I7t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),T7t=function(r){I7t(e,r);function e(t){var n=r.call(this)||this;n.projection=Xn(t.projection),n.attributions_=Lqe(t.attributions),n.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,n.loading=!1,n.state_=t.state!==void 0?t.state:"ready",n.wrapX_=t.wrapX!==void 0?t.wrapX:!1,n.interpolate_=!!t.interpolate,n.viewResolver=null,n.viewRejector=null;var i=n;return n.viewPromise_=new Promise(function(o,a){i.viewResolver=o,i.viewRejector=a}),n}return e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return ir()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getInterpolate=function(){return this.interpolate_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Lqe(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(io);function Lqe(r){return r?Array.isArray(r)?function(e){return r}:typeof r=="function"?r:function(e){return[r]}:null}var YD=T7t;var rs={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Dqe(r,e){return[[-1/0,-1/0,1/0,1/0]]}var A7t=!1;function C7t(r,e,t,n,i,o,a){var c=new XMLHttpRequest;c.open("GET",typeof r=="function"?r(t,n,i):r,!0),e.getType()=="arraybuffer"&&(c.responseType="arraybuffer"),c.withCredentials=A7t,c.onload=function(h){if(!c.status||c.status>=200&&c.status<300){var d=e.getType(),v=void 0;d=="json"||d=="text"?v=c.responseText:d=="xml"?(v=c.responseXML,v||(v=new DOMParser().parseFromString(c.responseText,"application/xml"))):d=="arraybuffer"&&(v=c.response),v?o(e.readFeatures(v,{extent:t,featureProjection:i}),e.readProjection(v)):a()}else a()},c.onerror=a,c.send()}function p8(r,e){return function(t,n,i,o,a){var c=this;C7t(r,e,t,n,i,function(h,d){c.addFeatures(h),o!==void 0&&o(h)},a||dl)}}var Nqe=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Md=function(r){Nqe(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.feature=n,o.features=i,o}return e}(bi);var M7t=function(r){Nqe(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{attributions:i.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:i.wrapX!==void 0?i.wrapX:!0})||this,n.on,n.once,n.un,n.loader_=dl,n.format_=i.format,n.overlaps_=i.overlaps===void 0?!0:i.overlaps,n.url_=i.url,i.loader!==void 0?n.loader_=i.loader:n.url_!==void 0&&(ar(n.format_,7),n.loader_=p8(n.url_,n.format_)),n.strategy_=i.strategy!==void 0?i.strategy:Dqe;var o=i.useSpatialIndex!==void 0?i.useSpatialIndex:!0;n.featuresRtree_=o?new BE:null,n.loadedExtentsRtree_=new BE,n.loadingExtentsCount_=0,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null;var a,c;return Array.isArray(i.features)?c=i.features:i.features&&(a=i.features,c=a.getArray()),!o&&a===void 0&&(a=new Kn(c)),c!==void 0&&n.addFeaturesInternal(c),a!==void 0&&n.bindFeaturesCollection_(a),n}return e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var n=tr(t);if(!this.addToIndex_(n,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(n,t);var i=t.getGeometry();if(i){var o=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,t)}else this.nullGeometryFeatures_[n]=t;this.dispatchEvent(new Md(rs.ADDFEATURE,t))},e.prototype.setupChangeEvents_=function(t,n){this.featureChangeKeys_[t]=[Ar(n,Pt.CHANGE,this.handleFeatureChange_,this),Ar(n,Gu.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,n){var i=!0,o=n.getId();return o!==void 0&&(o.toString()in this.idIndex_?i=!1:this.idIndex_[o.toString()]=n),i&&(ar(!(t in this.uidIndex_),30),this.uidIndex_[t]=n),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var n=[],i=[],o=[],a=0,c=t.length;a<c;a++){var h=t[a],d=tr(h);this.addToIndex_(d,h)&&i.push(h)}for(var a=0,v=i.length;a<v;a++){var h=i[a],d=tr(h);this.setupChangeEvents_(d,h);var x=h.getGeometry();if(x){var S=x.getExtent();n.push(S),o.push(h)}else this.nullGeometryFeatures_[d]=h}if(this.featuresRtree_&&this.featuresRtree_.load(n,o),this.hasListener(rs.ADDFEATURE))for(var a=0,T=i.length;a<T;a++)this.dispatchEvent(new Md(rs.ADDFEATURE,i[a]))},e.prototype.bindFeaturesCollection_=function(t){var n=!1;this.addEventListener(rs.ADDFEATURE,function(i){n||(n=!0,t.push(i.feature),n=!1)}),this.addEventListener(rs.REMOVEFEATURE,function(i){n||(n=!0,t.remove(i.feature),n=!1)}),t.addEventListener(ii.ADD,function(i){n||(n=!0,this.addFeature(i.element),n=!1)}.bind(this)),t.addEventListener(ii.REMOVE,function(i){n||(n=!0,this.removeFeature(i.element),n=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var n in this.featureChangeKeys_){var i=this.featureChangeKeys_[n];i.forEach(Yr)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var o=function(h){this.removeFeatureInternal(h)}.bind(this);this.featuresRtree_.forEach(o);for(var a in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[a])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var c=new Md(rs.CLEAR);this.dispatchEvent(c),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,n){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(o){var a=o.getGeometry();if(a.intersectsCoordinate(t))return n(o)})},e.prototype.forEachFeatureInExtent=function(t,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)},e.prototype.forEachFeatureIntersectingExtent=function(t,n){return this.forEachFeatureInExtent(t,function(i){var o=i.getGeometry();if(o.intersectsExtent(t)){var a=n(i);if(a)return a}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),$u(this.nullGeometryFeatures_)||ko(t,aD(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var n=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){n.push(i)}),n},e.prototype.getFeaturesInExtent=function(t,n){var i=this;if(this.featuresRtree_){var o=n&&n.canWrapX()&&this.getWrapX();if(!o)return this.featuresRtree_.getInExtent(t);var a=nke(t,n);return[].concat.apply([],a.map(function(c){return i.featuresRtree_.getInExtent(c)}))}else return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(t,n){var i=t[0],o=t[1],a=null,c=[NaN,NaN],h=1/0,d=[-1/0,-1/0,1/0,1/0],v=n||Qa;return this.featuresRtree_.forEachInExtent(d,function(x){if(v(x)){var S=x.getGeometry(),T=h;if(h=S.closestPointXY(i,o,c,h),h<T){a=x;var L=Math.sqrt(h);d[0]=i-L,d[1]=o-L,d[2]=i+L,d[3]=o+L}}}),a},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var n=this.idIndex_[t.toString()];return n!==void 0?n:null},e.prototype.getFeatureByUid=function(t){var n=this.uidIndex_[t];return n!==void 0?n:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var n=t.target,i=tr(n),o=n.getGeometry();if(!o)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{var a=o.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(a,n)):this.featuresRtree_&&this.featuresRtree_.update(a,n)}var c=n.getId();if(c!==void 0){var h=c.toString();this.idIndex_[h]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[h]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new Md(rs.CHANGEFEATURE,n))},e.prototype.hasFeature=function(t){var n=t.getId();return n!==void 0?n in this.idIndex_:tr(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&$u(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0},e.prototype.loadFeatures=function(t,n,i){for(var o=this.loadedExtentsRtree_,a=this.strategy_(t,n,i),c=function(x,S){var T=a[x],L=o.forEachInExtent(T,function(k){return ah(k.extent,T)});L||(++h.loadingExtentsCount_,h.dispatchEvent(new Md(rs.FEATURESLOADSTART)),h.loader_.call(h,T,n,i,function(k){--this.loadingExtentsCount_,this.dispatchEvent(new Md(rs.FEATURESLOADEND,void 0,k))}.bind(h),function(){--this.loadingExtentsCount_,this.dispatchEvent(new Md(rs.FEATURESLOADERROR))}.bind(h)),o.insert(T,{extent:T.slice()}))},h=this,d=0,v=a.length;d<v;++d)c(d,v);this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),r.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var n=this.loadedExtentsRtree_,i;n.forEachInExtent(t,function(o){if(sh(o.extent,t))return i=o,!0}),i&&n.remove(i)},e.prototype.removeFeature=function(t){if(t){var n=tr(t);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(t);var i=this.removeFeatureInternal(t);i&&this.changed()}},e.prototype.removeFeatureInternal=function(t){var n=tr(t),i=this.featureChangeKeys_[n];if(i){i.forEach(Yr),delete this.featureChangeKeys_[n];var o=t.getId();return o!==void 0&&delete this.idIndex_[o.toString()],delete this.uidIndex_[n],this.dispatchEvent(new Md(rs.REMOVEFEATURE,t)),t}},e.prototype.removeFromIdIndex_=function(t){var n=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],n=!0;break}return n},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){ar(this.format_,7),this.url_=t,this.setLoader(p8(t,this.format_))},e}(YD),Zc=M7t;var w8=Me(UP(),1);var d8=class{constructor(){this.listeners_=[]}on(e,t){this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push(t)}off(e,t){let n=this.listeners_[e];if(n){let i=n.indexOf(t);i>-1&&this.listeners_[e].slice(i,1)}}dispatch(e,t){let n=this.listeners_[e];if(n)for(let i=0,o=n.length;i<o;++i)n[i].call({},t)}},kqe=d8;function qqe(){return new VD({fill:new gl({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Ju({color:"#ffcc33",width:2}),image:new Ov({radius:7,fill:new gl({color:"#ffcc33"})})})}function Rd(r){let t=2*Math.PI*8/6;return new VD({image:new Ov({radius:8,fill:new gl({color:"rgba(255,255,255,0.6)"}),stroke:new Ju({color:"rgba(49,159,211,0.5)",width:15,lineDash:[0,t,t,t,t,t,t]})}),text:yS(r)?new f8({textAlign:"start",textBaseline:"bottom",font:"12px Calibri,sans-serif",text:r,fill:new gl({color:"#aa3300"}),stroke:new Ju({color:"#ffffff",width:3}),offsetX:10,offsetY:-5}):void 0})}function KD(r){let t=2*Math.PI*8/6;return new VD({image:new Ov({radius:8,fill:new gl({color:"rgba(255,128,0,0.6)"}),stroke:new Ju({color:"rgba(240,0,0,0.5)",width:15,lineDash:[0,t,t,t,t,t,t]})}),text:yS(r)?new f8({textAlign:"start",textBaseline:"bottom",font:"12px Calibri,sans-serif",text:r,fill:new gl({color:"#aa3300"}),stroke:new Ju({color:"#ffffff",width:3}),offsetX:10,offsetY:-5}):void 0})}var $E=Me(UP(),1);var R7t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),jqe=function(r){R7t(e,r);function e(t,n,i){var o=r.call(this)||this;if(i!==void 0&&n===void 0)o.setFlatCoordinates(i,t);else{var a=n||0;o.setCenterAndRadius(t,a,i)}return o}return e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){var a=this.flatCoordinates,c=t-a[0],h=n-a[1],d=c*c+h*h;if(d<o){if(d===0)for(var v=0;v<this.stride;++v)i[v]=a[v];else{var x=this.getRadius()/Math.sqrt(d);i[0]=a[0]+x*c,i[1]=a[1]+x*h;for(var v=2;v<this.stride;++v)i[v]=a[v]}return i.length=this.stride,d}else return o},e.prototype.containsXY=function(t,n){var i=this.flatCoordinates,o=t-i[0],a=n-i[1];return o*o+a*a<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var n=this.flatCoordinates,i=n[this.stride]-n[0];return Ra(n[0]-i,n[1]-i,n[0]+i,n[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+n*n},e.prototype.getType=function(){return"Circle"},e.prototype.intersectsExtent=function(t){var n=this.getExtent();if(Si(t,n)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||t[1]<=i[1]&&t[3]>=i[1]?!0:c0(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var n=this.stride,i=this.flatCoordinates[n]-this.flatCoordinates[0],o=t.slice();o[n]=o[0]+i;for(var a=1;a<n;++a)o[n+a]=t[a];this.setFlatCoordinates(this.layout,o),this.changed()},e.prototype.setCenterAndRadius=function(t,n,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,a=AD(o,0,t,this.stride);o[a++]=o[0]+n;for(var c=1,h=this.stride;c<h;++c)o[a++]=o[c];o.length=a,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,n){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,n){var i=this.getCenter(),o=this.getStride();this.setCenter(_0(i,0,i.length,o,t,n,i)),this.changed()},e.prototype.translate=function(t,n){var i=this.getCenter(),o=this.getStride();this.setCenter(ED(i,0,i.length,o,t,n,i)),this.changed()},e}(Oa);jqe.prototype.transform;var Fqe=jqe;var UE={ACTIVE:"active"};var P7t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),O7t=function(r){P7t(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.map=n,o.frameState=i!==void 0?i:null,o}return e}(bi),Pd=O7t;var L7t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),D7t=function(r){L7t(e,r);function e(t,n,i,o,a,c){var h=r.call(this,t,n,a)||this;return h.originalEvent=i,h.pixel_=null,h.coordinate_=null,h.dragging=o!==void 0?o:!1,h.activePointers=c,h}return Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){r.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){r.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(Pd),pu=D7t;var Br={SINGLECLICK:"singleclick",CLICK:Pt.CLICK,DBLCLICK:Pt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};function m8(r){return Math.pow(r,3)}function du(r){return 1-m8(1-r)}function zqe(r){return 3*r*r-2*r*r*r}function Bqe(r){return r}var N7t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),k7t=function(r){N7t(e,r);function e(t){var n=r.call(this)||this;return n.on,n.once,n.un,t&&t.handleEvent&&(n.handleEvent=t.handleEvent),n.map_=null,n.setActive(!0),n}return e.prototype.getActive=function(){return this.get(UE.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(UE.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(io);function Uqe(r,e,t){var n=r.getCenterInternal();if(n){var i=[n[0]+e[0],n[1]+e[1]];r.animateInternal({duration:t!==void 0?t:250,easing:Bqe,center:r.getConstrainedCenter(i)})}}function M0(r,e,t,n){var i=r.getZoom();if(i!==void 0){var o=r.getConstrainedZoom(i+e),a=r.getResolutionForZoom(o);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:a,anchor:t,duration:n!==void 0?n:250,easing:du})}}var mu=k7t;var q7t=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),j7t=function(r){q7t(e,r);function e(t){var n=this,i=t||{};return n=r.call(this,i)||this,i.handleDownEvent&&(n.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(n.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(n.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(n.handleUpEvent=i.handleUpEvent),i.stopDown&&(n.stopDown=i.stopDown),n.handlingDownUpSequence=!1,n.targetPointers=[],n}return e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Br.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Br.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Br.POINTERDOWN){var o=this.handleDownEvent(t);this.handlingDownUpSequence=o,n=this.stopDown(o)}else t.type==Br.POINTERMOVE&&this.handleMoveEvent(t);return!n},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){t.activePointers&&(this.targetPointers=t.activePointers)},e}(mu);function R0(r){for(var e=r.length,t=0,n=0,i=0;i<e;i++)t+=r[i].clientX,n+=r[i].clientY;return[t/e,n/e]}var Bs=j7t;function VE(r){var e=arguments;return function(t){for(var n=!0,i=0,o=e.length;i<o&&(n=n&&e[i](t),!!n);++i);return n}}var Vqe=function(r){var e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Gqe=function(r){var e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},F7t=function(r){var e=r.map.getTargetElement(),t=r.map.getOwnerDocument().activeElement;return e.contains(t)},XD=function(r){return r.map.getTargetElement().hasAttribute("tabindex")?F7t(r):!0},P0=Qa;var JD=function(r){var e=r.originalEvent;return e.button==0&&!(H2e&&W2e&&e.ctrlKey)},v8=iu;var O0=function(r){return r.type==Br.SINGLECLICK};var L0=function(r){var e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey};var Od=function(r){var e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},QD=function(r){var e=r.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},eN=function(r){var e=r.originalEvent;return ar(e!==void 0,56),e.pointerType=="mouse"};var tN=function(r){var e=r.originalEvent;return ar(e!==void 0,56),e.isPrimary&&e.button===0};var $qe=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),dn={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},rN={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},nN=function(r){$qe(e,r);function e(t,n){var i=r.call(this,t)||this;return i.feature=n,i}return e}(bi);var z7t=function(r){$qe(e,r);function e(t){var n=this,i=t;i.stopDown||(i.stopDown=iu),n=r.call(this,i)||this,n.on,n.once,n.un,n.shouldHandle_=!1,n.downPx_=null,n.downTimeout_,n.lastDragTime_,n.pointerType_,n.freehand_=!1,n.source_=t.source?t.source:null,n.features_=t.features?t.features:null,n.snapTolerance_=t.snapTolerance?t.snapTolerance:12,n.type_=t.type,n.mode_=U7t(n.type_),n.stopClick_=!!t.stopClick,n.minPoints_=t.minPoints?t.minPoints:n.mode_===dn.POLYGON?3:2,n.maxPoints_=n.mode_===dn.CIRCLE?2:t.maxPoints?t.maxPoints:1/0,n.finishCondition_=t.finishCondition?t.finishCondition:Qa,n.geometryLayout_=t.geometryLayout?t.geometryLayout:zn.XY;var o=t.geometryFunction;if(!o){var a=n.mode_;if(a===dn.CIRCLE)o=function(h,d,v){var x=d||new Fqe([NaN,NaN]),S=pi(h[0],v),T=_d(S,pi(h[h.length-1],v));x.setCenterAndRadius(S,Math.sqrt(T),this.geometryLayout_);var L=lu();return L&&x.transform(v,L),x};else{var c;a===dn.POINT?c=La:a===dn.LINE_STRING?c=lh:a===dn.POLYGON&&(c=Xu),o=function(h,d,v){return d?a===dn.POLYGON?h[0].length?d.setCoordinates([h[0].concat([h[0][0]])],this.geometryLayout_):d.setCoordinates([],this.geometryLayout_):d.setCoordinates(h,this.geometryLayout_):d=new c(h,this.geometryLayout_),d}}}return n.geometryFunction_=o,n.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,n.finishCoordinate_=null,n.sketchFeature_=null,n.sketchPoint_=null,n.sketchCoords_=null,n.sketchLine_=null,n.sketchLineCoords_=null,n.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,n.overlay_=new hu({source:new Zc({useSpatialIndex:!1,wrapX:t.wrapX?t.wrapX:!1}),style:t.style?t.style:B7t(),updateWhileInteracting:!0}),n.geometryName_=t.geometryName,n.condition_=t.condition?t.condition:L0,n.freehandCondition_,t.freehand?n.freehandCondition_=P0:n.freehandCondition_=t.freehandCondition?t.freehandCondition:Od,n.addChangeListener(UE.ACTIVE,n.updateState_),n}return e.prototype.setMap=function(t){r.prototype.setMap.call(this,t),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(t){t.originalEvent.type===Pt.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!==dn.POINT&&this.freehandCondition_(t);var n=t.type===Br.POINTERMOVE,i=!0;if(!this.freehand_&&this.lastDragTime_&&t.type===Br.POINTERDRAG){var o=Date.now();o-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&t.type===Br.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),i=!1):this.freehand_&&t.type===Br.POINTERDOWN?i=!1:n&&this.getPointerCount()<2?(i=t.type===Br.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===Br.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===Br.DBLCLICK&&(i=!1),r.prototype.handleEvent.call(this,t)&&i},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new pu(Br.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var n=!0;if(this.getPointerCount()===0)if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_){var i=!this.finishCoordinate_;i&&this.startDrawing_(t.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_===dn.POINT)&&(this.atFinish_(t.pixel)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),n=!1}else this.freehand_&&this.abortDrawing();return!n&&this.stopClick_&&t.preventDefault(),n},e.prototype.handlePointerMove_=function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var n=this.downPx_,i=t.pixel,o=n[0]-i[0],a=n[1]-i[1],c=o*o+a*a;if(this.shouldHandle_=this.freehand_?c>this.squaredClickTolerance_:c<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t.coordinate):this.createOrUpdateSketchPoint_(t.coordinate.slice())},e.prototype.atFinish_=function(t){var n=!1;if(this.sketchFeature_){var i=!1,o=[this.finishCoordinate_],a=this.mode_;if(a===dn.POINT)n=!0;else if(a===dn.CIRCLE)n=this.sketchCoords_.length===2;else if(a===dn.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(a===dn.POLYGON){var c=this.sketchCoords_;i=c[0].length>this.minPoints_,o=[c[0][0],c[0][c[0].length-2]]}if(i)for(var h=this.getMap(),d=0,v=o.length;d<v;d++){var x=o[d],S=h.getPixelFromCoordinate(x),T=t[0]-S[0],L=t[1]-S[1],k=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(T*T+L*L)<=k,n){this.finishCoordinate_=x;break}}}return n},e.prototype.createOrUpdateSketchPoint_=function(t){if(!this.sketchPoint_)this.sketchPoint_=new ml(new La(t)),this.updateSketchFeatures_();else{var n=this.sketchPoint_.getGeometry();n.setCoordinates(t)}},e.prototype.createOrUpdateCustomSketchLine_=function(t){this.sketchLine_||(this.sketchLine_=new ml);var n=t.getLinearRing(0),i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),i.changed()):(i=new lh(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(i))},e.prototype.startDrawing_=function(t){for(var n=this.getMap().getView().getProjection(),i=SE(this.geometryLayout_);t.length<i;)t.push(0);this.finishCoordinate_=t,this.mode_===dn.POINT?this.sketchCoords_=t.slice():this.mode_===dn.POLYGON?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new ml(new lh(this.sketchLineCoords_)));var o=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new ml,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(o),this.updateSketchFeatures_(),this.dispatchEvent(new nN(rN.DRAWSTART,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){for(var n=this.getMap(),i=this.sketchFeature_.getGeometry(),o=n.getView().getProjection(),a=SE(this.geometryLayout_),c,h;t.length<a;)t.push(0);if(this.mode_===dn.POINT?h=this.sketchCoords_:this.mode_===dn.POLYGON?(c=this.sketchCoords_[0],h=c[c.length-1],this.atFinish_(n.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(c=this.sketchCoords_,h=c[c.length-1]),h[0]=t[0],h[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,o),this.sketchPoint_){var d=this.sketchPoint_.getGeometry();d.setCoordinates(t)}if(i.getType()==="Polygon"&&this.mode_!==dn.POLYGON)this.createOrUpdateCustomSketchLine_(i);else if(this.sketchLineCoords_){var v=this.sketchLine_.getGeometry();v.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),o,a,c=this.mode_;c===dn.LINE_STRING||c===dn.CIRCLE?(this.finishCoordinate_=t.slice(),a=this.sketchCoords_,a.length>=this.maxPoints_&&(this.freehand_?a.pop():o=!0),a.push(t.slice()),this.geometryFunction_(a,n,i)):c===dn.POLYGON&&(a=this.sketchCoords_[0],a.length>=this.maxPoints_&&(this.freehand_?a.pop():o=!0),a.push(t.slice()),o&&(this.finishCoordinate_=a[0]),this.geometryFunction_(this.sketchCoords_,n,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),o&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),i,o=this.mode_;if(o===dn.LINE_STRING||o===dn.CIRCLE){if(i=this.sketchCoords_,i.splice(-2,1),i.length>=2){this.finishCoordinate_=i[i.length-2].slice();var a=this.finishCoordinate_.slice();i[i.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(i,t,n),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(o===dn.POLYGON){i=this.sketchCoords_[0],i.splice(-2,1);var c=this.sketchLine_.getGeometry();if(i.length>=2){var a=i[i.length-2].slice();i[i.length-1]=a,this.createOrUpdateSketchPoint_(a)}c.setCoordinates(i),this.geometryFunction_(this.sketchCoords_,t,n)}i.length===1&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var n=this.sketchCoords_,i=t.getGeometry(),o=this.getMap().getView().getProjection();this.mode_===dn.LINE_STRING?(n.pop(),this.geometryFunction_(n,i,o)):this.mode_===dn.POLYGON&&(n[0].pop(),this.geometryFunction_(n,i,o),n=i.getCoordinates()),this.type_==="MultiPoint"?t.setGeometry(new x0([n])):this.type_==="MultiLineString"?t.setGeometry(new OD([n])):this.type_==="MultiPolygon"&&t.setGeometry(new ND([n])),this.dispatchEvent(new nN(rN.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new nN(rN.DRAWABORT,t))},e.prototype.appendCoordinates=function(t){var n=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(t[0]);var o;if(n===dn.LINE_STRING||n===dn.CIRCLE)o=this.sketchCoords_;else if(n===dn.POLYGON)o=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&o.shift(),o.pop();for(var a=0;a<t.length;a++)this.addToDrawing_(t[a]);var c=t[t.length-1];this.addToDrawing_(c),this.modifyDrawing_(c)},e.prototype.extend=function(t){var n=t.getGeometry(),i=n;this.sketchFeature_=t,this.sketchCoords_=i.getCoordinates();var o=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=o.slice(),this.sketchCoords_.push(o.slice()),this.sketchPoint_=new ml(new La(o)),this.updateSketchFeatures_(),this.dispatchEvent(new nN(rN.DRAWSTART,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var n=this.overlay_.getSource();n.clear(!0),n.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),n=this.getActive();(!t||!n)&&this.abortDrawing(),this.overlay_.setMap(n?t:null)},e}(Bs);function B7t(){var r=E0();return function(e,t){return r[e.getGeometry().getType()]}}function U7t(r){switch(r){case"Point":case"MultiPoint":return dn.POINT;case"LineString":case"MultiLineString":return dn.LINE_STRING;case"Polygon":case"MultiPolygon":return dn.POLYGON;case"Circle":return dn.CIRCLE;default:throw new Error("Invalid type: "+r);}}var iN=z7t;var Kqe=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hqe=0,GE=1,Wqe=[0,0,0,0],D0=[],g8={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},y8=function(r){Kqe(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.features=n,o.mapBrowserEvent=i,o}return e}(bi);var V7t=function(r){Kqe(e,r);function e(t){var n=r.call(this,t)||this;n.on,n.once,n.un,n.boundHandleFeatureChange_=n.handleFeatureChange_.bind(n),n.condition_=t.condition?t.condition:tN,n.defaultDeleteCondition_=function(o){return Vqe(o)&&O0(o)},n.deleteCondition_=t.deleteCondition?t.deleteCondition:n.defaultDeleteCondition_,n.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:P0,n.vertexFeature_=null,n.vertexSegments_=null,n.lastPixel_=[0,0],n.ignoreNextSingleClick_=!1,n.featuresBeingModified_=null,n.rBush_=new BE,n.pixelTolerance_=t.pixelTolerance!==void 0?t.pixelTolerance:10,n.snappedToVertex_=!1,n.changingFeature_=!1,n.dragSegments_=[],n.overlay_=new hu({source:new Zc({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:$7t(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.SEGMENT_WRITERS_={Point:n.writePointGeometry_.bind(n),LineString:n.writeLineStringGeometry_.bind(n),LinearRing:n.writeLineStringGeometry_.bind(n),Polygon:n.writePolygonGeometry_.bind(n),MultiPoint:n.writeMultiPointGeometry_.bind(n),MultiLineString:n.writeMultiLineStringGeometry_.bind(n),MultiPolygon:n.writeMultiPolygonGeometry_.bind(n),Circle:n.writeCircleGeometry_.bind(n),GeometryCollection:n.writeGeometryCollectionGeometry_.bind(n)},n.source_=null,n.hitDetection_=null;var i;if(t.features?i=t.features:t.source&&(n.source_=t.source,i=new Kn(n.source_.getFeatures()),n.source_.addEventListener(rs.ADDFEATURE,n.handleSourceAdd_.bind(n)),n.source_.addEventListener(rs.REMOVEFEATURE,n.handleSourceRemove_.bind(n))),!i)throw new Error("The modify interaction requires features, a source or a layer");return t.hitDetection&&(n.hitDetection_=t.hitDetection),n.features_=i,n.features_.forEach(n.addFeature_.bind(n)),n.features_.addEventListener(ii.ADD,n.handleFeatureAdd_.bind(n)),n.features_.addEventListener(ii.REMOVE,n.handleFeatureRemove_.bind(n)),n.lastPointerEvent_=null,n.delta_=[0,0],n.snapToPointer_=t.snapToPointer===void 0?!n.hitDetection_:t.snapToPointer,n}return e.prototype.addFeature_=function(t){var n=t.getGeometry();if(n){var i=this.SEGMENT_WRITERS_[n.getType()];i&&i(t,n)}var o=this.getMap();o&&o.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,o),t.addEventListener(Pt.CHANGE,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t,n){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Kn;for(var i=this.featuresBeingModified_.getArray(),o=0,a=n.length;o<a;++o)for(var c=n[o],h=0,d=c.length;h<d;++h){var v=c[h].feature;v&&i.indexOf(v)===-1&&this.featuresBeingModified_.push(v)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new y8(g8.MODIFYSTART,this.featuresBeingModified_,t))}},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(Pt.CHANGE,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var n=this.rBush_,i=[];n.forEach(function(h){t===h.feature&&i.push(h)});for(var o=i.length-1;o>=0;--o){for(var a=i[o],c=this.dragSegments_.length-1;c>=0;--c)this.dragSegments_[c][0]===a&&this.dragSegments_.splice(c,1);n.remove(a)}},e.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),r.prototype.setActive.call(this,t)},e.prototype.setMap=function(t){this.overlay_.setMap(t),r.prototype.setMap.call(this,t)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var n=t.target;this.removeFeature_(n),this.addFeature_(n)}},e.prototype.handleFeatureRemove_=function(t){var n=t.element;this.removeFeature_(n)},e.prototype.writePointGeometry_=function(t,n){var i=n.getCoordinates(),o={feature:t,geometry:n,segment:[i,i]};this.rBush_.insert(n.getExtent(),o)},e.prototype.writeMultiPointGeometry_=function(t,n){for(var i=n.getCoordinates(),o=0,a=i.length;o<a;++o){var c=i[o],h={feature:t,geometry:n,depth:[o],index:o,segment:[c,c]};this.rBush_.insert(n.getExtent(),h)}},e.prototype.writeLineStringGeometry_=function(t,n){for(var i=n.getCoordinates(),o=0,a=i.length-1;o<a;++o){var c=i.slice(o,o+2),h={feature:t,geometry:n,index:o,segment:c};this.rBush_.insert(ea(c),h)}},e.prototype.writeMultiLineStringGeometry_=function(t,n){for(var i=n.getCoordinates(),o=0,a=i.length;o<a;++o)for(var c=i[o],h=0,d=c.length-1;h<d;++h){var v=c.slice(h,h+2),x={feature:t,geometry:n,depth:[o],index:h,segment:v};this.rBush_.insert(ea(v),x)}},e.prototype.writePolygonGeometry_=function(t,n){for(var i=n.getCoordinates(),o=0,a=i.length;o<a;++o)for(var c=i[o],h=0,d=c.length-1;h<d;++h){var v=c.slice(h,h+2),x={feature:t,geometry:n,depth:[o],index:h,segment:v};this.rBush_.insert(ea(v),x)}},e.prototype.writeMultiPolygonGeometry_=function(t,n){for(var i=n.getCoordinates(),o=0,a=i.length;o<a;++o)for(var c=i[o],h=0,d=c.length;h<d;++h)for(var v=c[h],x=0,S=v.length-1;x<S;++x){var T=v.slice(x,x+2),L={feature:t,geometry:n,depth:[h,o],index:x,segment:T};this.rBush_.insert(ea(T),L)}},e.prototype.writeCircleGeometry_=function(t,n){var i=n.getCenter(),o={feature:t,geometry:n,index:Hqe,segment:[i,i]},a={feature:t,geometry:n,index:GE,segment:[i,i]},c=[o,a];o.featureSegments=c,a.featureSegments=c,this.rBush_.insert(u0(i),o);var h=n,d=lu();if(d&&this.getMap()){var v=this.getMap().getView().getProjection();h=h.clone().transform(d,v),h=DD(h).transform(v,d)}this.rBush_.insert(h.getExtent(),a)},e.prototype.writeGeometryCollectionGeometry_=function(t,n){for(var i=n.getGeometriesArray(),o=0;o<i.length;++o){var a=i[o],c=this.SEGMENT_WRITERS_[a.getType()];c(t,a)}},e.prototype.createOrUpdateVertexFeature_=function(t,n,i){var o=this.vertexFeature_;if(!o)o=new ml(new La(t)),this.vertexFeature_=o,this.overlay_.getSource().addFeature(o);else{var a=o.getGeometry();a.setCoordinates(t)}return o.set("features",n),o.set("geometries",i),o},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;this.lastPointerEvent_=t;var n;return!t.map.getView().getInteracting()&&t.type==Br.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(t.type!=Br.SINGLECLICK||!this.ignoreNextSingleClick_?n=this.removePoint():n=!0),t.type==Br.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),r.prototype.handleEvent.call(this,t)&&!n},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);for(var n=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],i=[],o=[],a=0,c=this.dragSegments_.length;a<c;++a){var h=this.dragSegments_[a],d=h[0],v=d.feature;i.indexOf(v)===-1&&i.push(v);var x=d.geometry;o.indexOf(x)===-1&&o.push(x);for(var S=d.depth,T=void 0,L=d.segment,k=h[1];n.length<x.getStride();)n.push(L[k][n.length]);switch(x.getType()){case"Point":T=n,L[0]=n,L[1]=n;break;case"MultiPoint":T=x.getCoordinates(),T[d.index]=n,L[0]=n,L[1]=n;break;case"LineString":T=x.getCoordinates(),T[d.index+k]=n,L[k]=n;break;case"MultiLineString":T=x.getCoordinates(),T[S[0]][d.index+k]=n,L[k]=n;break;case"Polygon":T=x.getCoordinates(),T[S[0]][d.index+k]=n,L[k]=n;break;case"MultiPolygon":T=x.getCoordinates(),T[S[1]][S[0]][d.index+k]=n,L[k]=n;break;case"Circle":if(L[0]=n,L[1]=n,d.index===Hqe)this.changingFeature_=!0,x.setCenter(n),this.changingFeature_=!1;else{this.changingFeature_=!0;var R=t.map.getView().getProjection(),D=IW(pi(x.getCenter(),R),pi(n,R)),j=lu();if(j){var B=x.clone().transform(j,R);B.setRadius(D),D=B.transform(R,j).getRadius()}x.setRadius(D),this.changingFeature_=!1}break;default:}T&&this.setGeometryCoordinates_(x,T)}this.createOrUpdateVertexFeature_(n,i,o)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var n=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,n),this.dragSegments_.length=0,this.featuresBeingModified_=null;var i=this.vertexFeature_;if(i){var o=t.map.getView().getProjection(),a=[],c=i.getGeometry().getCoordinates(),h=ea([c]),d=this.rBush_.getInExtent(h),v={};d.sort(G7t);for(var x=0,S=d.length;x<S;++x){var T=d[x],L=T.segment,k=tr(T.geometry),R=T.depth;if(R&&(k+="-"+R.join("-")),v[k]||(v[k]=new Array(2)),T.geometry.getType()==="Circle"&&T.index===GE){var D=Yqe(n,T,o);ts(D,c)&&!v[k][0]&&(this.dragSegments_.push([T,0]),v[k][0]=T);continue}if(ts(L[0],c)&&!v[k][0]){this.dragSegments_.push([T,0]),v[k][0]=T;continue}if(ts(L[1],c)&&!v[k][1]){if(v[k][0]&&v[k][0].index===0){var j=T.geometry.getCoordinates();switch(T.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":j=j[R[1]];case"Polygon":if(T.index!==j[R[0]].length-2)continue;break;default:}}this.dragSegments_.push([T,1]),v[k][1]=T;continue}tr(L)in this.vertexSegments_&&!v[k][0]&&!v[k][1]&&this.insertVertexCondition_(t)&&a.push(T)}a.length&&this.willModifyFeatures_(t,[a]);for(var B=a.length-1;B>=0;--B)this.insertVertex_(a[B],c)}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var n=this.dragSegments_.length-1;n>=0;--n){var i=this.dragSegments_[n][0],o=i.geometry;if(o.getType()==="Circle"){var a=o.getCenter(),c=i.featureSegments[0],h=i.featureSegments[1];c.segment[0]=a,c.segment[1]=a,h.segment[0]=a,h.segment[1]=a,this.rBush_.update(u0(a),c);var d=o,v=lu();if(v){var x=t.map.getView().getProjection();d=d.clone().transform(v,x),d=DD(d).transform(x,v)}this.rBush_.update(d.getExtent(),h)}else this.rBush_.update(ea(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new y8(g8.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,n,i){var o=this,a=i||n.getCoordinateFromPixel(t),c=n.getView().getProjection(),h=function(Ve,We){return Zqe(a,Ve,c)-Zqe(a,We,c)},d,v;if(this.hitDetection_){var x=typeof this.hitDetection_=="object"?function(Ve){return Ve===o.hitDetection_}:void 0;n.forEachFeatureAtPixel(t,function(Ve,We,Te){if(Te=Te||Ve.getGeometry(),Te.getType()==="Point"&&i0(o.features_.getArray(),Ve)){v=Te;var Se=Te.getFlatCoordinates().slice(0,2);d=[{feature:Ve,geometry:Te,segment:[Se,Se]}]}return!0},{layerFilter:x})}if(!d){var S=Pa(u0(a,Wqe),c),T=n.getView().getResolution()*this.pixelTolerance_,L=wd(Wu(S,T,Wqe),c);d=this.rBush_.getInExtent(L)}if(d&&d.length>0){var k=d.sort(h)[0],R=k.segment,D=Yqe(a,k,c),j=n.getPixelFromCoordinate(D),B=IW(t,j);if(v||B<=this.pixelTolerance_){var $={};if($[tr(R)]=!0,this.snapToPointer_||(this.delta_[0]=D[0]-a[0],this.delta_[1]=D[1]-a[1]),k.geometry.getType()==="Circle"&&k.index===GE)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(D,[k.feature],[k.geometry]);else{var ee=n.getPixelFromCoordinate(R[0]),J=n.getPixelFromCoordinate(R[1]),ie=_d(j,ee),ue=_d(j,J);B=Math.sqrt(Math.min(ie,ue)),this.snappedToVertex_=B<=this.pixelTolerance_,this.snappedToVertex_&&(D=ie>ue?R[1]:R[0]),this.createOrUpdateVertexFeature_(D,[k.feature],[k.geometry]);var le={};le[tr(k.geometry)]=!0;for(var _e=1,Re=d.length;_e<Re;++_e){var ze=d[_e].segment;if(ts(R[0],ze[0])&&ts(R[1],ze[1])||ts(R[0],ze[1])&&ts(R[1],ze[0])){var ke=tr(d[_e].geometry);ke in le||(le[ke]=!0,$[tr(ze)]=!0)}else break}}this.vertexSegments_=$;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,n){for(var i=t.segment,o=t.feature,a=t.geometry,c=t.depth,h=t.index,d;n.length<a.getStride();)n.push(0);switch(a.getType()){case"MultiLineString":d=a.getCoordinates(),d[c[0]].splice(h+1,0,n);break;case"Polygon":d=a.getCoordinates(),d[c[0]].splice(h+1,0,n);break;case"MultiPolygon":d=a.getCoordinates(),d[c[1]][c[0]].splice(h+1,0,n);break;case"LineString":d=a.getCoordinates(),d.splice(h+1,0,n);break;default:return;}this.setGeometryCoordinates_(a,d);var v=this.rBush_;v.remove(t),this.updateSegmentIndices_(a,h,c,1);var x={segment:[i[0],n],feature:o,geometry:a,depth:c,index:h};v.insert(ea(x.segment),x),this.dragSegments_.push([x,1]);var S={segment:[n,i[1]],feature:o,geometry:a,depth:c,index:h+1};v.insert(ea(S.segment),S),this.dragSegments_.push([S,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Br.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);var n=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new y8(g8.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,n}return!1},e.prototype.removeVertex_=function(){var t=this.dragSegments_,n={},i=!1,o,a,c,h,d,v,x,S,T,L,k;for(d=t.length-1;d>=0;--d)c=t[d],L=c[0],k=tr(L.feature),L.depth&&(k+="-"+L.depth.join("-")),k in n||(n[k]={}),c[1]===0?(n[k].right=L,n[k].index=L.index):c[1]==1&&(n[k].left=L,n[k].index=L.index+1);for(k in n){switch(T=n[k].right,x=n[k].left,v=n[k].index,S=v-1,x!==void 0?L=x:L=T,S<0&&(S=0),h=L.geometry,a=h.getCoordinates(),o=a,i=!1,h.getType()){case"MultiLineString":a[L.depth[0]].length>2&&(a[L.depth[0]].splice(v,1),i=!0);break;case"LineString":a.length>2&&(a.splice(v,1),i=!0);break;case"MultiPolygon":o=o[L.depth[1]];case"Polygon":o=o[L.depth[0]],o.length>4&&(v==o.length-1&&(v=0),o.splice(v,1),i=!0,v===0&&(o.pop(),o.push(o[0]),S=o.length-1));break;default:}if(i){this.setGeometryCoordinates_(h,a);var R=[];if(x!==void 0&&(this.rBush_.remove(x),R.push(x.segment[0])),T!==void 0&&(this.rBush_.remove(T),R.push(T.segment[1])),x!==void 0&&T!==void 0){var D={depth:L.depth,feature:L.feature,geometry:L.geometry,index:S,segment:R};this.rBush_.insert(ea(D.segment),D)}this.updateSegmentIndices_(h,v,L.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return i},e.prototype.setGeometryCoordinates_=function(t,n){this.changingFeature_=!0,t.setCoordinates(n),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,n,i,o){this.rBush_.forEachInExtent(t.getExtent(),function(a){a.geometry===t&&(i===void 0||a.depth===void 0||Aa(a.depth,i))&&a.index>n&&(a.index+=o)})},e}(Bs);function G7t(r,e){return r.index-e.index}function Zqe(r,e,t){var n=e.geometry;if(n.getType()==="Circle"){var i=n;if(e.index===GE){var o=lu();o&&(i=i.clone().transform(o,t));var a=_d(i.getCenter(),pi(r,t)),c=Math.sqrt(a)-i.getRadius();return c*c}}var h=pi(r,t);return D0[0]=pi(e.segment[0],t),D0[1]=pi(e.segment[1],t),gke(h,D0)}function Yqe(r,e,t){var n=e.geometry;if(n.getType()==="Circle"&&e.index===GE){var i=n,o=lu();return o&&(i=i.clone().transform(o,t)),xd(i.getClosestPoint(pi(r,t)),t)}var a=pi(r,t);return D0[0]=pi(e.segment[0],t),D0[1]=pi(e.segment[1],t),xd(EW(a,D0),t)}function $7t(){var r=E0();return function(e,t){return r.Point}}var oN=V7t;var Xqe=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),H7t={SELECT:"select"},W7t=function(r){Xqe(e,r);function e(t,n,i,o){var a=r.call(this,t)||this;return a.selected=n,a.deselected=i,a.mapBrowserEvent=o,a}return e}(bi);var aN={},Z7t=function(r){Xqe(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un;var i=t||{};n.boundAddFeature_=n.addFeature_.bind(n),n.boundRemoveFeature_=n.removeFeature_.bind(n),n.condition_=i.condition?i.condition:O0,n.addCondition_=i.addCondition?i.addCondition:v8,n.removeCondition_=i.removeCondition?i.removeCondition:v8,n.toggleCondition_=i.toggleCondition?i.toggleCondition:Od,n.multi_=i.multi?i.multi:!1,n.filter_=i.filter?i.filter:Qa,n.hitTolerance_=i.hitTolerance?i.hitTolerance:0,n.style_=i.style!==void 0?i.style:Y7t(),n.features_=i.features||new Kn;var o;if(i.layers){if(typeof i.layers=="function")o=i.layers;else{var a=i.layers;o=function(c){return i0(a,c)}}}else o=Qa;return n.layerFilter_=o,n.featureLayerAssociation_={},n}return e.prototype.addFeatureLayerAssociation_=function(t,n){this.featureLayerAssociation_[tr(t)]=n},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[tr(t)]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(t){var n=this.getMap();n&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),r.prototype.setMap.call(this,t),t?(this.features_.addEventListener(ii.ADD,this.boundAddFeature_),this.features_.addEventListener(ii.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(ii.ADD,this.boundAddFeature_),this.features_.removeEventListener(ii.REMOVE,this.boundRemoveFeature_))},e.prototype.addFeature_=function(t){var n=t.element;if(this.style_&&this.applySelectedStyle_(n),!this.getLayer(n)){var i=this.getMap().getAllLayers().find(function(o){if(o instanceof hu&&o.getSource()&&o.getSource().hasFeature(n))return o});i&&this.addFeatureLayerAssociation_(n,i)}},e.prototype.removeFeature_=function(t){var n=t.element;this.style_&&this.restorePreviousStyle_(n)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(t){var n=tr(t);n in aN||(aN[n]=t.getStyle()),t.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(t){for(var n=this.getMap().getInteractions().getArray(),i=n.length-1;i>=0;--i){var o=n[i];if(o!==this&&o instanceof e&&o.getStyle()&&o.getFeatures().getArray().lastIndexOf(t)!==-1){t.setStyle(o.getStyle());return}}var a=tr(t);t.setStyle(aN[a]),delete aN[a]},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[tr(t)]},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var n=this.addCondition_(t),i=this.removeCondition_(t),o=this.toggleCondition_(t),a=!n&&!i&&!o,c=t.map,h=this.getFeatures(),d=[],v=[];if(a){Ns(this.featureLayerAssociation_),c.forEachFeatureAtPixel(t.pixel,function(k,R){if(this.filter_(k,R))return this.addFeatureLayerAssociation_(k,R),v.push(k),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var x=h.getLength()-1;x>=0;--x){var S=h.item(x),T=v.indexOf(S);T>-1?v.splice(T,1):(h.remove(S),d.push(S))}v.length!==0&&h.extend(v)}else{c.forEachFeatureAtPixel(t.pixel,function(k,R){if(this.filter_(k,R))return(n||o)&&!i0(h.getArray(),k)?(this.addFeatureLayerAssociation_(k,R),v.push(k)):(i||o)&&i0(h.getArray(),k)&&(d.push(k),this.removeFeatureLayerAssociation_(k)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var L=d.length-1;L>=0;--L)h.remove(d[L]);h.extend(v)}return(v.length>0||d.length>0)&&this.dispatchEvent(new W7t(H7t.SELECT,v,d,t)),!0},e}(mu);function Y7t(){var r=E0();return ko(r.Polygon,r.LineString),ko(r.GeometryCollection,r.LineString),function(e){return e.getGeometry()?r[e.getGeometry().getType()]:null}}var _8=Z7t;function x8(r,e,t){t!==void 0&&t(),r.getTargetElement().style.cursor="grab",e.getTargetElement().style.cursor="grab";let n=o=>{o.target.getTargetElement().style.cursor="grabbing"},i=o=>{o.target.getTargetElement().style.cursor="grab"};return r.on("movestart",n),r.on("moveend",i),e.on("movestart",n),e.on("moveend",i),{disable:()=>{r.un("movestart",n),r.un("moveend",i),e.un("movestart",n),e.un("moveend",i)}}}function Jqe(r,e,t,n,i,o,a,c){let h="activateAddGcpAction";c!==void 0&&c();let d={START:"Erzeugen Sie einen Passpunkt und setzen Sie daf\xFCr einen Punkt in der originalen Ansicht oder der georeferenzierten Ansicht.",SET_SRC:"Setzen Sie jetzt einen weiteren Punkt in der originalen Ansicht und schlie\xDFen Sie den Prozess der Erstellung eines Passpunktes ab.",SET_TRG:"Setzen Sie jetzt einen weiteren Punkt in der georeferenzierten Ansicht und schlie\xDFen Sie den Prozess der Erstellung eines Passpunktes ab."};r.getTargetElement().style.cursor="default",e.getTargetElement().style.cursor="default";let v=new iN({source:i,type:"Point",style:Rd}),x=new iN({source:o,type:"Point",style:Rd});r.addInteraction(v),e.addInteraction(x),i.georeference_id="src",o.georeference_id="trg";let S=()=>{let L=t.getFeatures().length+1,k=i.getFeatures()[0];k.setStyle(Rd(`${L}`)),k.setId(L),t.addFeature(k);let R=o.getFeatures()[0];R.setStyle(Rd(`${L}`)),R.setId(L),n.addFeature(R),i.clear(),o.clear()},T=L=>{let k=L.target,R=L.feature;(k.georeference_id==="src"&&o.getFeatures().length===1||k.georeference_id==="trg"&&i.getFeatures().length===1)&&setTimeout(S,100),k.getFeatures().length>1&&k.removeFeature(R),k.georeference_id==="src"?a(d.SET_TRG,h):a(d.SET_SRC,h),R.setStyle(KD())};return i.on("addfeature",T),o.on("addfeature",T),a(d.START,h),{disable:()=>{a(null,h),i.clear(),o.clear(),r.removeInteraction(v),e.removeInteraction(x),i.un("addfeature",T),o.un("addfeature",T)}}}function Qqe(r,e,t,n,i,o){let a="activateMoveGcpAction";o!==void 0&&o();let c={START:"Klicken Sie auf Passpunkt und verschieben Sie diesen mittels Drag&Drop."};r.getTargetElement().style.cursor="grab",e.getTargetElement().style.cursor="grab";let h=new oN({source:t,pixelTolerance:10,style:KD}),d=new oN({source:n,pixelTolerance:10,style:KD});r.addInteraction(h),e.addInteraction(d);let v=S=>{S.target.getMap().getTargetElement().style.cursor="grabbing"},x=S=>{S.target.getMap().getTargetElement().style.cursor="grab"};return h.on("modifystart",v),h.on("modifyend",x),d.on("modifystart",v),d.on("modifyend",x),i(c.START,a),{disable:()=>{i(null,a),h.un("modifystart",v),h.un("modifyend",x),d.un("modifystart",v),d.un("modifyend",x),r.removeInteraction(h),e.removeInteraction(d)}}}function eje(r,e,t,n,i,o,a,c){let h="activateDelGcpAction";c!==void 0&&c();let d={START:"Klicken Sie auf Passpunkt um diesen zu l\xF6schen."};r.getTargetElement().style.cursor="default",e.getTargetElement().style.cursor="default";let v=T=>{if(T.getId()===void 0)return;let k=t.getFeatureById(T.getId()),R=n.getFeatureById(T.getId());k!==null&&R!==null&&(t.removeFeature(k),n.removeFeature(R))},x=new _8({layer:i,hitTolerance:5,condition:T=>{T.type==="click"&&T.map.forEachFeatureAtPixel(T.pixel,v)}}),S=new _8({layer:o,hitTolerance:5,condition:T=>{T.type==="click"&&T.map.forEachFeatureAtPixel(T.pixel,v)}});return r.addInteraction(x),e.addInteraction(S),a(d.START,h),{disable:()=>{a(null,h),r.removeInteraction(x),e.removeInteraction(S)}}}function tje(r,e,t,n){let i="activateDrawClipAction";n!==void 0&&n();let o={START:"Klicken Sie auf einen Punkt der georeferenzierten Karte und fangen Sie an das Clip-Polygon zu zeichnen oder zu editieren."};r.getTargetElement().style.cursor="default";let a,c=new iN({features:e.getFeaturesCollection(),type:"Polygon",minPoints:5,condition:d=>{let v=d.coordinate;return!(a!==void 0&&(0,$E.default)(a[0],4)===(0,$E.default)(v[0],4)&&(0,$E.default)(a[1],4)===(0,$E.default)(v[1],4))&&e.getFeatures().length===0}}),h=new oN({features:e.getFeaturesCollection(),deleteCondition:d=>{let v=e.getFeatures().length>=1?e.getFeatures()[0].getGeometry().getCoordinates()[0]:void 0;return v!==void 0&&v.length>5&&Od(d)&&O0(event)}});return c.on("drawstart",()=>{e.getFeatures().length>=1&&this.abortDrawing()}),r.addInteraction(c),r.addInteraction(h),t(o.START,i),{disable:()=>{t(null,i),r.removeInteraction(c),r.removeInteraction(h)}}}var Lv="EPSG:4326";function rje(r){let{params:e,clip:t}=r,n=[...e.gcps.map(i=>i.target),...(t!=null?t.coordinates[0]:[])];return n.length>0?ea(n):null}function nje(r){return new DE().readGeometry(r,{dataProjection:Lv,featureProjection:Lv}).getExtent()}function K7t(r){return[Math.round(r[0]),Math.round(-1*r[1])]}function X7t(r){return[Math.round(r[0]),Math.round(-1*r[1])]}var sN=class extends kqe{constructor(e){super(),this.srcMap_=e.sourceMap,this.trgMap_=e.targetMap,this.params_=e.params,this.clip_=e.clip,this.onSetHelperMsg_=e.onSetHelperMsg,this.clipVectorSource_=new Zc({features:new Kn});let t=new hu({source:this.clipVectorSource_,style:qqe(),zIndex:2});t.set("key","clip"),this.trgMap_.addLayer(t),this.srcVectorSource_=new Zc({features:new Kn}),this.trgVectorSource_=new Zc({features:new Kn}),this.srcVectorLayer_=new hu({source:this.srcVectorSource_}),this.srcMap_.addLayer(this.srcVectorLayer_),this.trgVectorLayer_=new hu({source:this.trgVectorSource_,zIndex:3}),this.trgMap_.addLayer(this.trgVectorLayer_),this.editSrcVectorSource_=new Zc({features:new Kn}),this.editTrgVectorSource_=new Zc({features:new Kn}),this.srcMap_.addLayer(new hu({source:this.editSrcVectorSource_})),this.trgMap_.addLayer(new hu({source:this.editTrgVectorSource_,zIndex:4})),this.loadData()}loadData(){if(this.params_.gcps.length>0)for(let e=0,t=this.params_.gcps.length;e<t;e++){let n=e+1,i=new ml(new La(K7t(this.params_.gcps[e].source)));i.setId(n),i.setStyle(Rd(`${n}`)),this.srcVectorSource_.addFeature(i);let o=new ml(new La(Ku(this.params_.gcps[e].target,Lv,this.trgMap_.getView().getProjection())));o.setId(n),o.setStyle(Rd(`${n}`)),this.trgVectorSource_.addFeature(o)}if(this.clip_){let e=new DE().readFeature(this.clip_,{dataProjection:Lv,featureProjection:this.trgMap_.getView().getProjection()});this.clipVectorSource_.addFeature(e)}}activateAddAction(e){return Jqe(this.srcMap_,this.trgMap_,this.srcVectorSource_,this.trgVectorSource_,this.editSrcVectorSource_,this.editTrgVectorSource_,this.onSetHelperMsg_,e)}activateMoveAction(e){return Qqe(this.srcMap_,this.trgMap_,this.srcVectorSource_,this.trgVectorSource_,this.onSetHelperMsg_,e)}activateDelAction(e){return eje(this.srcMap_,this.trgMap_,this.srcVectorSource_,this.trgVectorSource_,this.srcVectorLayer_,this.trgVectorLayer_,this.onSetHelperMsg_,e)}activateDrawClipAction(e){return tje(this.trgMap_,this.clipVectorSource_,this.onSetHelperMsg_,e)}getParams(){let e=this.srcVectorSource_.getFeatures(),t=[];for(let n=0,i=e.length;n<i;n++){let o=e[n],a=this.trgVectorSource_.getFeatureById(o.getId());t.push({source:X7t(o.getGeometry().getCoordinates()),target:Ku(a.getGeometry().getCoordinates(),this.trgMap_.getView().getProjection(),Lv)})}return Object.assign({},this.params_,{gcps:t})}getClip(){let e=this.clipVectorSource_.getFeatures().length>0?this.clipVectorSource_.getFeatures()[0]:void 0;if(e!==void 0)return new DE().writeGeometryObject(e.getGeometry(),{dataProjection:Lv,featureProjection:"EPSG:3857",decimals:9});this.clip_}hasParamsOrClipChanged(){let t=c=>Object.assign({},c,{target:[(0,w8.default)(c.target[0],6),(0,w8.default)(c.target[1],6)]}),n=this.params_.gcps.map(t),i=this.getParams().gcps.map(t),o=JSON.stringify(n)===JSON.stringify(i),a=JSON.stringify(this.clip_)===JSON.stringify(this.getClip());return!o||!a}};var ec={ZOOM_PAN:"control-zoom-pan",ADD_GCP:"control-add-gcp",MOVE_GCP:"control-move-gcp",DEL_GCP:"control-del-gcp",DRAW_CLIP:"control-draw-clip"},lN={AFFINE:"affine",POLYNOM:"polynom",TPS:"tps"};function J7t(){return[{id:ec.ADD_GCP,title:Tr("georef-setgcp"),iconClassName:"icon-point-add"},{id:ec.MOVE_GCP,title:Tr("georef-movegcp"),iconClassName:"icon-point-move"},{id:ec.DEL_GCP,title:Tr("georef-delgcp"),iconClassName:"icon-point-remove"}]}function Q7t(){return[{id:lN.AFFINE,title:"Affine",iconClassName:"icon-layercalc"},{id:lN.POLYNOM,title:"Polynom",iconClassName:"icon-layercalc"},{id:lN.TPS,title:"TPS",iconClassName:"icon-layercalc"}]}var eJt=()=>{let r=Ql(EO),e=Ql(bO),t=Ql(SO),n=eu(ld),i=eu(wO),[o,a]=yO(_O),[c,h]=(0,Ki.useState)(null),[d,v]=(0,Ki.useState)(null),[x,S]=(0,Ki.useState)(null),T=nD(d),[L,k]=(0,Ki.useState)(lN.AFFINE),R=(0,Ki.useRef)(null),D=J7t(),j=Q7t(),B=ue=>{v(ue)},$=ue=>{k(ue)},ee=()=>{let ue=(le,_e)=>ho(void 0,null,function*(){let Re=R.current.hasParamsOrClipChanged()||L!==r.params.algorithm||(r==null?void 0:r.overwrites)===void 0||r.overwrites===0?yield bRe(le,_e):yield SRe(r.overwrites);a(!1),i(Re)});if(!o){let le=Object.assign(R.current.getParams(),{algorithm:L});le.gcps.length<4?n({id:"toolbar-info",type:"warning",text:Tr("georef-confirm-warn-gcp")}):(a(!0),ue(r.map_id,le))}},J=()=>{if(R.current!==null){let ue={clip:R.current.getClip(),params:Object.assign(R.current.getParams(),{algorithm:L}),overwrites:r.overwrites};ue.params.gcps.length<4?n({id:"toolbar-info",type:"warning",text:Tr("georef-confirm-warn-gcp")}):h({map_id:r.map_id,params:ue})}},ie=()=>{if(c!==null){let ue=(le,_e)=>ho(void 0,null,function*(){let Re=yield wRe(le,_e);if(a(!1),Re.error_code===void 0){let ze=ije.default.parse(location.search),ke=ze.redirect!==void 0?ze.redirect:"/";window.location.href=`${window.location.origin}${ke}`}else n({id:"toolbar-info",type:"danger",text:Re.error_message})});h(null),a(!0),ue(c.map_id,c.params)}};return(0,Ki.useEffect)(()=>{r!==null&&R.current===null&&e!==null&&t!==null&&(R.current=new sN({clip:(r==null?void 0:r.clip)!==void 0&&(r==null?void 0:r.clip)!==null?{type:r.clip.type,coordinates:r.clip.coordinates}:void 0,onSetHelperMsg:ue=>{n({id:"toolbar-info",type:"info",text:ue})},params:{algorithm:r.params.algorithm,gcps:r.params.gcps},sourceMap:e.map,targetMap:t.map}),v(ec.ZOOM_PAN),S(x8(e.map,t.map,()=>{})),k(r.params.algorithm))},[r,e,t,v,S,n]),(0,Ki.useEffect)(()=>{x!==void 0&&d!==T&&(d===ec.ZOOM_PAN?S(x8(e.map,t.map,x.disable)):R.current!==null&&d===ec.ADD_GCP?S(R.current.activateAddAction(x.disable)):R.current!==null&&d===ec.MOVE_GCP?S(R.current.activateMoveAction(x.disable)):R.current!==null&&d===ec.DEL_GCP?S(R.current.activateDelAction(x.disable)):R.current!==null&&d===ec.DRAW_CLIP?S(R.current.activateDrawClipAction(x.disable)):x.disable())},[d,T,x,S]),Ki.default.createElement("div",{className:"vk-georeference-toolbar"},Ki.default.createElement("div",null,Ki.default.createElement(NS,{activeControl:d,id:ec.ZOOM_PAN,iconClassName:"icon-move",onClick:B,title:Tr("georef-movemap")}),Ki.default.createElement(mW,{id:"control-toggle-gcp-action",activeControl:d,defaultTitle:Tr("georef-editgcp"),options:D,onClick:B,parentIconClassName:"icon-points"}),Ki.default.createElement(NS,{activeControl:d,id:ec.DRAW_CLIP,iconClassName:"icon-draw",onClick:B,title:Tr("georef-drawclip")})),Ki.default.createElement("div",null,Ki.default.createElement(mW,{id:"control-toggle-transformation",activeControl:L,className:"control-toggle-transformations",parentIconClassName:"icon-layercalc",disableActiveBehavior:!0,options:j,onClick:$}),Ki.default.createElement(NS,{id:"get-rectified-image",iconClassName:"icon-reload",onClick:ee,title:Tr("georef-validate")}),Ki.default.createElement(NS,{id:"confirm-rectified-image",iconClassName:"icon-save",className:"save",onClick:J,title:Tr("georef-confirm")})),c!==null&&Ki.default.createElement(L2e,{onClose:()=>h(null),onSubmit:ie}))},oje=eJt;var Eu=Me(dt(),1),L2=Me(Jr(),1);var sUe=Me(g6(),1);var Da=Me(dt(),1);var tJt=()=>Da.default.createElement("div",{className:"vkf-loading-indicator"},Da.default.createElement("svg",{className:"loading-icon",version:"1.1",id:"Layer_1",x:"0",y:"0",viewBox:"0 0 70 100"},Da.default.createElement("rect",{fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 3 50)"},Da.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite"}),Da.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"1.2s",values:"0;60;0",repeatCount:"indefinite"})),Da.default.createElement("rect",{x:"17",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 20 50)"},Da.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.1s"}),Da.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:".5s",values:"0;5;0",repeatCount:"indefinite"})),Da.default.createElement("rect",{x:"40",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 40 50)"},Da.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.3s"}),Da.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"2s",values:"0;30;0",repeatCount:"indefinite",begin:"0.6s"})),Da.default.createElement("rect",{x:"60",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 58 50)"},Da.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.5s"}),Da.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"1s",values:"0;60;0",repeatCount:"indefinite",begin:".3s"}))),Da.default.createElement("div",{className:"loading-text"},"Loading\u2026")),aje=tJt;var sje=aje;var nY=Me(dt(),1);var ax=Me(dt(),1),B4e=Me(vS(),1),wI=Me(Jr(),1);var rJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nJt=function(r){rJt(e,r);function e(t){var n=r.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+t,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,n=this.endPixel_,i="px",o=this.element_.style;o.left=Math.min(t[0],n[0])+i,o.top=Math.min(t[1],n[1])+i,o.width=Math.abs(n[0]-t[0])+i,o.height=Math.abs(n[1]-t[1])+i},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,n){this.startPixel_=t,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,n=this.endPixel_,i=[t,[t[0],n[1]],n,[n[0],t[1]]],o=i.map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new Xu([o])},e.prototype.getGeometry=function(){return this.geometry_},e}(md),lje=nJt;var uje=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),uN={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},b8=function(r){uje(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.coordinate=n,o.mapBrowserEvent=i,o}return e}(bi);var iJt=function(r){uje(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un;var i=t||{};return n.box_=new lje(i.className||"ol-dragbox"),n.minArea_=i.minArea!==void 0?i.minArea:64,i.onBoxEnd&&(n.onBoxEnd=i.onBoxEnd),n.startPixel_=null,n.condition_=i.condition?i.condition:JD,n.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:n.defaultBoxEndCondition,n}return e.prototype.defaultBoxEndCondition=function(t,n,i){var o=i[0]-n[0],a=i[1]-n[1];return o*o+a*a>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new b8(uN.BOXDRAG,t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var n=this.boxEndCondition_(t,this.startPixel_,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new b8(n?uN.BOXEND:uN.BOXCANCEL,t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new b8(uN.BOXSTART,t.coordinate,t)),!0):!1},e.prototype.onBoxEnd=function(t){},e}(Bs),cje=iJt;var oJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),aJt=function(r){oJt(e,r);function e(t){var n=this,i=t||{},o=i.condition?i.condition:Od;return n=r.call(this,{condition:o,className:i.className||"ol-dragzoom",minArea:i.minArea})||this,n.duration_=i.duration!==void 0?i.duration:200,n.out_=i.out!==void 0?i.out:!1,n}return e.prototype.onBoxEnd=function(t){var n=this.getMap(),i=n.getView(),o=this.getGeometry();if(this.out_){var a=i.rotatedExtentForGeometry(o),c=i.getResolutionForExtentInternal(a),h=i.getResolution()/c;o=o.clone(),o.scale(h*h)}i.fitInternal(o,{duration:this.duration_,easing:du})},e}(cje),N0=aJt;var Yc={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};var sJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lJt=function(r){sJt(e,r);function e(t){var n=r.call(this)||this,i=t.element;return i&&!t.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),n.element=i||null,n.target_=null,n.map_=null,n.listenerKeys=[],t.render&&(n.render=t.render),t.target&&n.setTarget(t.target),n}return e.prototype.disposeInternal=function(){NE(this.element),r.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&NE(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n)Yr(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=t,t){var o=this.target_?this.target_:t.getOverlayContainerStopEvent();o.appendChild(this.element),this.render!==dl&&this.listenerKeys.push(Ar(t,Yc.POSTRENDER,this.render,this)),t.render()}},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_=typeof t=="string"?document.getElementById(t):t},e}(io),ns=lJt;var so={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var uJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fje=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],hje={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},cJt=function(r){uJt(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),target:i.target})||this,n.on,n.once,n.un,n.keys_=i.keys!==void 0?i.keys:!1,n.source_=i.source,n.isInFullscreen_=!1,n.boundHandleMapTargetChange_=n.handleMapTargetChange_.bind(n),n.cssClassName_=i.className!==void 0?i.className:"ol-full-screen",n.documentListeners_=[],n.activeClassName_=i.activeClassName!==void 0?i.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=i.inactiveClassName!==void 0?i.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var o=i.label!==void 0?i.label:"\u2922";n.labelNode_=typeof o=="string"?document.createTextNode(o):o;var a=i.labelActive!==void 0?i.labelActive:"\xD7";n.labelActiveNode_=typeof a=="string"?document.createTextNode(a):a;var c=i.tipLabel?i.tipLabel:"Toggle full-screen";return n.button_=document.createElement("button"),n.button_.title=c,n.button_.setAttribute("type","button"),n.button_.appendChild(n.labelNode_),n.button_.addEventListener(Pt.CLICK,n.handleClick_.bind(n),!1),n.setClassName_(n.button_,n.isInFullscreen_),n.element.className="".concat(n.cssClassName_," ").concat(fu," ").concat(Uc),n.element.appendChild(n.button_),n}return e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){var t=this.getMap();if(t){var n=t.getOwnerDocument();if(pje(n))if(dje(n))hJt(n);else{var i=void 0;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=t.getTargetElement(),this.keys_?fJt(i):mje(i)}}},e.prototype.handleFullScreenChange_=function(){var t=this.getMap();if(t){var n=this.isInFullscreen_;this.isInFullscreen_=dje(t.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(w0(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(hje.ENTERFULLSCREEN)):(w0(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(hje.LEAVEFULLSCREEN)),t.updateSize())}},e.prototype.setClassName_=function(t,n){var i,o,a,c;n?((i=t.classList).remove.apply(i,this.inactiveClassName_),(o=t.classList).add.apply(o,this.activeClassName_)):((a=t.classList).remove.apply(a,this.activeClassName_),(c=t.classList).add.apply(c,this.inactiveClassName_))},e.prototype.setMap=function(t){var n=this.getMap();n&&n.removeChangeListener(so.TARGET,this.boundHandleMapTargetChange_),r.prototype.setMap.call(this,t),this.handleMapTargetChange_(),t&&t.addChangeListener(so.TARGET,this.boundHandleMapTargetChange_)},e.prototype.handleMapTargetChange_=function(){for(var t=this.documentListeners_,n=0,i=t.length;n<i;++n)Yr(t[n]);t.length=0;var o=this.getMap();if(o){var a=o.getOwnerDocument();pje(a)?this.element.classList.remove(KW):this.element.classList.add(KW);for(var n=0,i=fje.length;n<i;++n)t.push(Ar(a,fje[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},e}(ns);function pje(r){var e=r.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&r.msFullscreenEnabled||e.requestFullscreen&&r.fullscreenEnabled)}function dje(r){return!!(r.webkitIsFullScreen||r.msFullscreenElement||r.fullscreenElement)}function mje(r){r.requestFullscreen?r.requestFullscreen():r.msRequestFullscreen?r.msRequestFullscreen():r.webkitRequestFullscreen&&r.webkitRequestFullscreen()}function fJt(r){r.webkitRequestFullscreen?r.webkitRequestFullscreen():mje(r)}function hJt(r){r.exitFullscreen?r.exitFullscreen():r.msExitFullscreen?r.msExitFullscreen():r.webkitExitFullscreen&&r.webkitExitFullscreen()}var cN=cJt;var pJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),dJt=function(r){pJt(e,r);function e(t){var n=r.call(this)||this,i=t||{};return n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleEvent=function(t){var n=!1;if(t.type==Br.DBLCLICK){var i=t.originalEvent,o=t.map,a=t.coordinate,c=i.shiftKey?-this.delta_:this.delta_,h=o.getView();M0(h,c,a,this.duration_),i.preventDefault(),n=!0}return!n},e}(mu),vje=dJt;var mJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),vJt=function(r){mJt(e,r);function e(t){var n=r.call(this,{stopDown:iu})||this,i=t||{};n.kinetic_=i.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var o=i.condition?i.condition:VE(L0,tN);return n.condition_=i.onFocusOnly?VE(XD,o):o,n.noKinetic_=!1,n}return e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=R0(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=t.map,c=a.getView();vke(o,c.getResolution()),y0(o,c.getRotation()),c.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var n=t.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),c=i.getCenterInternal(),h=n.getPixelFromCoordinateInternal(c),d=n.getCoordinateFromPixelInternal([h[0]-o*Math.cos(a),h[1]-o*Math.sin(a)]);i.animateInternal({center:i.getConstrainedCenter(d),duration:500,easing:du})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var n=t.map,i=n.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},e}(Bs),gje=vJt;function k0(r){if(r!==void 0)return 0}function S8(r){if(r!==void 0)return r}function yje(r){var e=2*Math.PI/r;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function _je(r){var e=r||d0(5);return function(t,n){if(n)return t;if(t!==void 0)return Math.abs(t)<=e?0:t}}var gJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yJt=function(r){gJt(e,r);function e(t){var n=this,i=t||{};return n=r.call(this,{stopDown:iu})||this,n.condition_=i.condition?i.condition:Gqe,n.lastAngle_=void 0,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleDragEvent=function(t){if(eN(t)){var n=t.map,i=n.getView();if(i.getConstraints().rotation!==k0){var o=n.getSize(),a=t.pixel,c=Math.atan2(o[1]/2-a[1],a[0]-o[0]/2);if(this.lastAngle_!==void 0){var h=c-this.lastAngle_;i.adjustRotationInternal(-h)}this.lastAngle_=c}}},e.prototype.handleUpEvent=function(t){if(!eN(t))return!0;var n=t.map,i=n.getView();return i.endInteraction(this.duration_),!1},e.prototype.handleDownEvent=function(t){if(!eN(t))return!1;if(JD(t)&&this.condition_(t)){var n=t.map;return n.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},e}(Bs),xje=yJt;var Ld={LEFT:37,UP:38,RIGHT:39,DOWN:40};var _Jt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xJt=function(r){_Jt(e,r);function e(t){var n=r.call(this)||this,i=t||{};return n.defaultCondition_=function(o){return L0(o)&&QD(o)},n.condition_=i.condition!==void 0?i.condition:n.defaultCondition_,n.duration_=i.duration!==void 0?i.duration:100,n.pixelDelta_=i.pixelDelta!==void 0?i.pixelDelta:128,n}return e.prototype.handleEvent=function(t){var n=!1;if(t.type==Pt.KEYDOWN){var i=t.originalEvent,o=i.keyCode;if(this.condition_(t)&&(o==Ld.DOWN||o==Ld.LEFT||o==Ld.RIGHT||o==Ld.UP)){var a=t.map,c=a.getView(),h=c.getResolution()*this.pixelDelta_,d=0,v=0;o==Ld.DOWN?v=-h:o==Ld.LEFT?d=-h:o==Ld.RIGHT?d=h:v=h;var x=[d,v];y0(x,c.getRotation()),Uqe(c,x,this.duration_),i.preventDefault(),n=!0}}return!n},e}(mu),wje=xJt;var wJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bJt=function(r){wJt(e,r);function e(t){var n=r.call(this)||this,i=t||{};return n.condition_=i.condition?i.condition:QD,n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:100,n}return e.prototype.handleEvent=function(t){var n=!1;if(t.type==Pt.KEYDOWN||t.type==Pt.KEYPRESS){var i=t.originalEvent,o=i.charCode;if(this.condition_(t)&&(o==43||o==45)){var a=t.map,c=o==43?this.delta_:-this.delta_,h=a.getView();M0(h,c,void 0,this.duration_),i.preventDefault(),n=!0}}return!n},e}(mu),bje=bJt;var SJt=function(){function r(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return r.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},r.prototype.update=function(e,t){this.points_.push(e,t,Date.now())},r.prototype.end=function(){if(this.points_.length<6)return!1;var e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;for(var n=t-3;n>0&&this.points_[n+2]>e;)n-=3;var i=this.points_[t+2]-this.points_[n+2];if(i<16.666666666666668)return!1;var o=this.points_[t]-this.points_[n],a=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(a,o),this.initialVelocity_=Math.sqrt(o*o+a*a)/i,this.initialVelocity_>this.minVelocity_},r.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},r.prototype.getAngle=function(){return this.angle_},r}(),Sje=SJt;var EJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),E8={TRACKPAD:"trackpad",WHEEL:"wheel"},IJt=function(r){EJt(e,r);function e(t){var n=this,i=t||{};n=r.call(this,i)||this,n.totalDelta_=0,n.lastDelta_=0,n.maxDelta_=i.maxDelta!==void 0?i.maxDelta:1,n.duration_=i.duration!==void 0?i.duration:250,n.timeout_=i.timeout!==void 0?i.timeout:80,n.useAnchor_=i.useAnchor!==void 0?i.useAnchor:!0,n.constrainResolution_=i.constrainResolution!==void 0?i.constrainResolution:!1;var o=i.condition?i.condition:P0;return n.condition_=i.onFocusOnly?VE(XD,o):o,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var t=this.getMap();if(t){var n=t.getView();n.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var n=t.type;if(n!==Pt.WHEEL)return!0;var i=t.map,o=t.originalEvent;o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);var a;if(t.type==Pt.WHEEL&&(a=o.deltaY,G2e&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=cD),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)),a===0)return!1;this.lastDelta_=a;var c=Date.now();this.startTime_===void 0&&(this.startTime_=c),(!this.mode_||c-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?E8.TRACKPAD:E8.WHEEL);var h=i.getView();if(this.mode_===E8.TRACKPAD&&!(h.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(h.getAnimating()&&h.cancelAnimations(),h.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),h.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=c,!1;this.totalDelta_+=a;var d=Math.max(this.timeout_-(c-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),d),!1},e.prototype.handleWheelZoom_=function(t){var n=t.getView();n.getAnimating()&&n.cancelAnimations();var i=-Fn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),M0(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(mu),Eje=IJt;var TJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),AJt=function(r){TJt(e,r);function e(t){var n=this,i=t||{},o=i;return o.stopDown||(o.stopDown=iu),n=r.call(this,o)||this,n.anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=i.threshold!==void 0?i.threshold:.3,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleDragEvent=function(t){var n=0,i=this.targetPointers[0],o=this.targetPointers[1],a=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX);if(this.lastAngle_!==void 0){var c=a-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=c}this.lastAngle_=a;var h=t.map,d=h.getView();if(d.getConstraints().rotation!==k0){var v=h.getViewport().getBoundingClientRect(),x=R0(this.targetPointers);x[0]-=v.left,x[1]-=v.top,this.anchor_=h.getCoordinateFromPixelInternal(x),this.rotating_&&(h.render(),d.adjustRotationInternal(n,this.anchor_))}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map,i=n.getView();return i.endInteraction(this.duration_),!1}else return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},e}(Bs),Ije=AJt;var CJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),MJt=function(r){CJt(e,r);function e(t){var n=this,i=t||{},o=i;return o.stopDown||(o.stopDown=iu),n=r.call(this,o)||this,n.anchor_=null,n.duration_=i.duration!==void 0?i.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return e.prototype.handleDragEvent=function(t){var n=1,i=this.targetPointers[0],o=this.targetPointers[1],a=i.clientX-o.clientX,c=i.clientY-o.clientY,h=Math.sqrt(a*a+c*c);this.lastDistance_!==void 0&&(n=this.lastDistance_/h),this.lastDistance_=h;var d=t.map,v=d.getView();n!=1&&(this.lastScaleDelta_=n);var x=d.getViewport().getBoundingClientRect(),S=R0(this.targetPointers);S[0]-=x.left,S[1]-=x.top,this.anchor_=d.getCoordinateFromPixelInternal(S),d.render(),v.adjustResolutionInternal(n,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map,i=n.getView(),o=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,o),!1}else return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},e}(Bs),Tje=MJt;function q0(r){var e=r||{},t=new Kn,n=new Sje(-.005,.05,100),i=e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0;i&&t.push(new xje);var o=e.doubleClickZoom!==void 0?e.doubleClickZoom:!0;o&&t.push(new vje({delta:e.zoomDelta,duration:e.zoomDuration}));var a=e.dragPan!==void 0?e.dragPan:!0;a&&t.push(new gje({onFocusOnly:e.onFocusOnly,kinetic:n}));var c=e.pinchRotate!==void 0?e.pinchRotate:!0;c&&t.push(new Ije);var h=e.pinchZoom!==void 0?e.pinchZoom:!0;h&&t.push(new Tje({duration:e.zoomDuration}));var d=e.keyboard!==void 0?e.keyboard:!0;d&&(t.push(new wje),t.push(new bje({delta:e.zoomDelta,duration:e.zoomDuration})));var v=e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0;v&&t.push(new Eje({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration}));var x=e.shiftDragZoom!==void 0?e.shiftDragZoom:!0;return x&&t.push(new N0({duration:e.zoomDuration})),t}var RJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),PJt=function(r){RJt(e,r);function e(t){var n=r.call(this)||this;return n.map_=t,n}return e.prototype.dispatchRenderEvent=function(t,n){ir()},e.prototype.calculateMatrices2D=function(t){var n=t.viewState,i=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;oo(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),l0(o,i)},e.prototype.forEachFeatureAtCoordinate=function(t,n,i,o,a,c,h,d){var v,x=n.viewState;function S(We,Te,Se,Ae){return a.call(c,Te,We?Se:null,Ae)}var T=x.projection,L=bD(t.slice(),T),k=[[0,0]];if(T.canWrapX()&&o){var R=T.getExtent(),D=sn(R);k.push([-D,0],[D,0])}for(var j=n.layerStatesArray,B=j.length,$=[],ee=[],J=0;J<k.length;J++)for(var ie=B-1;ie>=0;--ie){var ue=j[ie],le=ue.layer;if(le.hasRenderer()&&Cv(ue,x)&&h.call(d,le)){var _e=le.getRenderer(),Re=le.getSource();if(_e&&Re){var ze=Re.getWrapX()?L:t,ke=S.bind(null,ue.managed);ee[0]=ze[0]+k[J][0],ee[1]=ze[1]+k[J][1],v=_e.forEachFeatureAtCoordinate(ee,n,i,ke,$)}if(v)return v}}if($.length!==0){var Ve=1/$.length;return $.forEach(function(We,Te){return We.distanceSq+=Te*Ve}),$.sort(function(We,Te){return We.distanceSq-Te.distanceSq}),$.some(function(We){return v=We.callback(We.feature,We.layer,We.geometry)}),v}},e.prototype.forEachLayerAtPixel=function(t,n,i,o,a){return ir()},e.prototype.hasFeatureAtCoordinate=function(t,n,i,o,a,c){var h=this.forEachFeatureAtCoordinate(t,n,i,o,Qa,this,a,c);return h!==void 0},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){ir()},e.prototype.scheduleExpireIconCache=function(t){C0.canExpireCache()&&t.postRenderFunctions.push(OJt)},e}(md);function OJt(r,e){C0.expire()}var Aje=PJt;var LJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),DJt=function(r){LJt(e,r);function e(t){var n=r.call(this,t)||this;n.fontChangeListenerKey_=Ar(Vc,Gu.PROPERTYCHANGE,t.redrawText.bind(t)),n.element_=document.createElement("div");var i=n.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",n.element_.className=fu+" ol-layers";var o=t.getViewport();return o.insertBefore(n.element_,o.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return e.prototype.dispatchRenderEvent=function(t,n){var i=this.getMap();if(i.hasListener(t)){var o=new Td(t,void 0,n);i.dispatchEvent(o)}},e.prototype.disposeInternal=function(){Yr(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),r.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(xo.PRECOMPOSE,t);var n=t.layerStatesArray.sort(function(T,L){return T.zIndex-L.zIndex}),i=t.viewState;this.children_.length=0;for(var o=[],a=null,c=0,h=n.length;c<h;++c){var d=n[c];t.layerIndex=c;var v=d.layer,x=v.getSourceState();if(!Cv(d,i)||x!="ready"&&x!="undefined"){v.unrender();continue}var S=v.render(t,a);S&&(S!==a&&(this.children_.push(S),a=S),"getDeclutter"in v&&o.push(v))}for(var c=o.length-1;c>=0;--c)o[c].renderDeclutter(t);eqe(this.element_,this.children_),this.dispatchRenderEvent(xo.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)},e.prototype.forEachLayerAtPixel=function(t,n,i,o,a){for(var c=n.viewState,h=n.layerStatesArray,d=h.length,v=d-1;v>=0;--v){var x=h[v],S=x.layer;if(S.hasRenderer()&&Cv(x,c)&&a(S)){var T=S.getRenderer(),L=T.getDataAtPixel(t,n,i);if(L){var k=o(S,L);if(k)return k}}}},e}(Aje),Cje=DJt;var Mje=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_h=function(r){Mje(e,r);function e(t,n){var i=r.call(this,t)||this;return i.layer=n,i}return e}(bi);var I8={LAYERS:"layers"},NJt=function(r){Mje(e,r);function e(t){var n=this,i=t||{},o=zr({},i);delete o.layers;var a=i.layers;return n=r.call(this,o)||this,n.on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(I8.LAYERS,n.handleLayersChanged_),a?Array.isArray(a)?a=new Kn(a.slice(),{unique:!0}):ar(typeof a.getArray=="function",43):a=new Kn(void 0,{unique:!0}),n.setLayers(a),n}return e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(Yr),this.layersListenerKeys_.length=0;var t=this.getLayers();this.layersListenerKeys_.push(Ar(t,ii.ADD,this.handleLayersAdd_,this),Ar(t,ii.REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_)this.listenerKeys_[n].forEach(Yr);Ns(this.listenerKeys_);for(var i=t.getArray(),o=0,a=i.length;o<a;o++){var c=i[o];this.registerLayerListeners_(c),this.dispatchEvent(new _h("addlayer",c))}this.changed()},e.prototype.registerLayerListeners_=function(t){var n=[Ar(t,Gu.PROPERTYCHANGE,this.handleLayerChange_,this),Ar(t,Pt.CHANGE,this.handleLayerChange_,this)];t instanceof e&&n.push(Ar(t,"addlayer",this.handleLayerGroupAdd_,this),Ar(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[tr(t)]=n},e.prototype.handleLayerGroupAdd_=function(t){this.dispatchEvent(new _h("addlayer",t.layer))},e.prototype.handleLayerGroupRemove_=function(t){this.dispatchEvent(new _h("removelayer",t.layer))},e.prototype.handleLayersAdd_=function(t){var n=t.element;this.registerLayerListeners_(n),this.dispatchEvent(new _h("addlayer",n)),this.changed()},e.prototype.handleLayersRemove_=function(t){var n=t.element,i=tr(n);this.listenerKeys_[i].forEach(Yr),delete this.listenerKeys_[i],this.dispatchEvent(new _h("removelayer",n)),this.changed()},e.prototype.getLayers=function(){return this.get(I8.LAYERS)},e.prototype.setLayers=function(t){var n=this.getLayers();if(n)for(var i=n.getArray(),o=0,a=i.length;o<a;++o)this.dispatchEvent(new _h("removelayer",i[o]));this.set(I8.LAYERS,t)},e.prototype.getLayersArray=function(t){var n=t!==void 0?t:[];return this.getLayers().forEach(function(i){i.getLayersArray(n)}),n},e.prototype.getLayerStatesArray=function(t){var n=t!==void 0?t:[],i=n.length;this.getLayers().forEach(function(v){v.getLayerStatesArray(n)});var o=this.getLayerState(),a=o.zIndex;!t&&o.zIndex===void 0&&(a=0);for(var c=i,h=n.length;c<h;c++){var d=n[c];d.opacity*=o.opacity,d.visible=d.visible&&o.visible,d.maxResolution=Math.min(d.maxResolution,o.maxResolution),d.minResolution=Math.max(d.minResolution,o.minResolution),d.minZoom=Math.max(d.minZoom,o.minZoom),d.maxZoom=Math.min(d.maxZoom,o.maxZoom),o.extent!==void 0&&(d.extent!==void 0?d.extent=ou(d.extent,o.extent):d.extent=o.extent),d.zIndex===void 0&&(d.zIndex=a)}return n},e.prototype.getSourceState=function(){return"ready"},e}(kD),HE=NJt;var WE={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var kJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qJt=function(r){kJt(e,r);function e(t,n){var i=r.call(this,t)||this;i.map_=t,i.clickTimeoutId_,i.emulateClicks_=!1,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=n===void 0?1:n,i.down_=null;var o=i.map_.getViewport();return i.activePointers_=[],i.trackedTouches_={},i.element_=o,i.pointerdownListenerKey_=Ar(o,WE.POINTERDOWN,i.handlePointerDown_,i),i.originalPointerMoveEvent_,i.relayedListenerKey_=Ar(o,WE.POINTERMOVE,i.relayMoveEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener(Pt.TOUCHMOVE,i.boundHandleTouchMove_,fD?{passive:!1}:!1),i}return e.prototype.emulateClick_=function(t){var n=new pu(Br.CLICK,this.map_,t);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new pu(Br.DBLCLICK,this.map_,t),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var i=new pu(Br.SINGLECLICK,this.map_,t);this.dispatchEvent(i)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var n=t,i=n.pointerId;if(n.type==Br.POINTERUP||n.type==Br.POINTERCANCEL){delete this.trackedTouches_[i];for(var o in this.trackedTouches_)if(this.trackedTouches_[o].target!==n.target){delete this.trackedTouches_[o];break}}else(n.type==Br.POINTERDOWN||n.type==Br.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=aD(this.trackedTouches_)},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var n=new pu(Br.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Yr),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return t.button===0},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);var n=new pu(Br.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.down_={};for(var i in t){var o=t[i];this.down_[i]=typeof o=="function"?dl:o}if(this.dragListenerKeys_.length===0){var a=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ar(a,Br.POINTERMOVE,this.handlePointerMove_,this),Ar(a,Br.POINTERUP,this.handlePointerUp_,this),Ar(this.element_,Br.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==a&&this.dragListenerKeys_.push(Ar(this.element_.getRootNode(),Br.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;var n=new pu(Br.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}},e.prototype.relayMoveEvent_=function(t){this.originalPointerMoveEvent_=t;var n=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new pu(Br.POINTERMOVE,this.map_,t,n))},e.prototype.handleTouchMove_=function(t){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Yr(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Pt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Yr(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Yr),this.dragListenerKeys_.length=0,this.element_=null,r.prototype.disposeInternal.call(this)},e}(ks),Rje=qJt;var ZE=1/0,jJt=function(){function r(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return r.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Ns(this.queuedElements_)},r.prototype.dequeue=function(){var e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},r.prototype.enqueue=function(e){ar(!(this.keyFunction_(e)in this.queuedElements_),31);var t=this.priorityFunction_(e);return t!=ZE?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},r.prototype.getCount=function(){return this.elements_.length},r.prototype.getLeftChildIndex_=function(e){return e*2+1},r.prototype.getRightChildIndex_=function(e){return e*2+2},r.prototype.getParentIndex_=function(e){return e-1>>1},r.prototype.heapify_=function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)},r.prototype.isEmpty=function(){return this.elements_.length===0},r.prototype.isKeyQueued=function(e){return e in this.queuedElements_},r.prototype.isQueued=function(e){return this.isKeyQueued(this.keyFunction_(e))},r.prototype.siftUp_=function(e){for(var t=this.elements_,n=this.priorities_,i=t.length,o=t[e],a=n[e],c=e;e<i>>1;){var h=this.getLeftChildIndex_(e),d=this.getRightChildIndex_(e),v=d<i&&n[d]<n[h]?d:h;t[e]=t[v],n[e]=n[v],e=v}t[e]=o,n[e]=a,this.siftDown_(c,e)},r.prototype.siftDown_=function(e,t){for(var n=this.elements_,i=this.priorities_,o=n[t],a=i[t];t>e;){var c=this.getParentIndex_(t);if(i[c]>a)n[t]=n[c],i[t]=i[c],t=c;else break}n[t]=o,i[t]=a},r.prototype.reprioritize=function(){var e=this.priorityFunction_,t=this.elements_,n=this.priorities_,i=0,o=t.length,a,c,h;for(c=0;c<o;++c)a=t[c],h=e(a),h==ZE?delete this.queuedElements_[this.keyFunction_(a)]:(n[i]=h,t[i++]=a);t.length=i,n.length=i,this.heapify_()},r}(),Pje=jJt;var Ut={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var FJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zJt=function(r){FJt(e,r);function e(t,n){var i=r.call(this,function(o){return t.apply(null,o)},function(o){return o[0].getKey()})||this;return i.boundHandleTileChange_=i.handleTileChange.bind(i),i.tileChangeCallback_=n,i.tilesLoading_=0,i.tilesLoadingKeys_={},i}return e.prototype.enqueue=function(t){var n=r.prototype.enqueue.call(this,t);if(n){var i=t[0];i.addEventListener(Pt.CHANGE,this.boundHandleTileChange_)}return n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var n=t.target,i=n.getState();if(i===Ut.LOADED||i===Ut.ERROR||i===Ut.EMPTY){n.removeEventListener(Pt.CHANGE,this.boundHandleTileChange_);var o=n.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,n){for(var i=0,o,a,c;this.tilesLoading_<t&&i<n&&this.getCount()>0;)a=this.dequeue()[0],c=a.getKey(),o=a.getState(),o===Ut.IDLE&&!(c in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[c]=!0,++this.tilesLoading_,++i,a.load())},e}(Pje),Oje=zJt;function Lje(r,e,t,n,i){if(!r||!(t in r.wantedTiles))return ZE;if(!r.wantedTiles[t][e.getKey()])return ZE;var o=r.viewState.center,a=n[0]-o[0],c=n[1]-o[1];return 65536*Math.log(i)+Math.sqrt(a*a+c*c)/i}var vu={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var Dje=42,Dd=256;function T8(r,e,t){return function(n,i,o,a,c){if(n){if(!i&&!e)return n;var h=e?0:o[0]*i,d=e?0:o[1]*i,v=c?c[0]:0,x=c?c[1]:0,S=r[0]+h/2+v,T=r[2]-h/2+v,L=r[1]+d/2+x,k=r[3]-d/2+x;S>T&&(S=(T+S)/2,T=S),L>k&&(L=(k+L)/2,k=L);var R=Fn(n[0],S,T),D=Fn(n[1],L,k);if(a&&t&&i){var j=30*i;R+=-j*Math.log(1+Math.max(0,S-n[0])/j)+j*Math.log(1+Math.max(0,n[0]-T)/j),D+=-j*Math.log(1+Math.max(0,L-n[1])/j)+j*Math.log(1+Math.max(0,n[1]-k)/j)}return[R,D]}}}function Nje(r){return r}function A8(r,e,t,n){var i=sn(e)/t[0],o=_o(e)/t[1];return n?Math.min(r,Math.max(i,o)):Math.min(r,Math.min(i,o))}function C8(r,e,t){var n=Math.min(r,e),i=50;return n*=Math.log(1+i*Math.max(0,r/e-1))/i+1,t&&(n=Math.max(n,t),n/=Math.log(1+i*Math.max(0,t/r-1))/i+1),Fn(n,t/2,e*2)}function kje(r,e,t,n){return function(i,o,a,c){if(i!==void 0){var h=r[0],d=r[r.length-1],v=t?A8(h,t,a,n):h;if(c){var x=e!==void 0?e:!0;return x?C8(i,v,d):Fn(i,d,v)}var S=Math.min(v,i),T=Math.floor(o0(r,S,o));return r[T]>v&&T<r.length-1?r[T+1]:r[T]}else return}}function qje(r,e,t,n,i,o){return function(a,c,h,d){if(a!==void 0){var v=i?A8(e,i,h,o):e,x=t!==void 0?t:0;if(d){var S=n!==void 0?n:!0;return S?C8(a,v,x):Fn(a,x,v)}var T=1e-9,L=Math.ceil(Math.log(e/v)/Math.log(r)-T),k=-c*(.5-T)+.5,R=Math.min(v,a),D=Math.floor(Math.log(e/R)/Math.log(r)+k),j=Math.max(L,D),B=e/Math.pow(r,j);return Fn(B,x,v)}else return}}function M8(r,e,t,n,i){return function(o,a,c,h){if(o!==void 0){var d=n?A8(r,n,c,i):r,v=t!==void 0?t:!0;return!v||!h?Fn(o,e,d):C8(o,d,e)}else return}}var BJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),R8=0,UJt=function(r){BJt(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un;var i=zr({},t);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=SD(i.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,i.projection&&xke(),i.center&&(i.center=pi(i.center,n.projection_)),i.extent&&(i.extent=Pa(i.extent,n.projection_)),n.applyOptions_(i),n}return e.prototype.applyOptions_=function(t){var n=zr({},t);for(var i in vu)delete n[i];this.setProperties(n,!0);var o=GJt(t);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=o.minZoom;var a=VJt(t),c=o.constraint,h=$Jt(t);this.constraints_={center:a,resolution:c,rotation:h},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var n=this.padding_;this.padding_=t;var i=this.getCenter();if(i){var o=t||[0,0,0,0];n=n||[0,0,0,0];var a=this.getResolution(),c=a/2*(o[3]-n[3]+n[1]-o[1]),h=a/2*(o[0]-n[0]+n[2]-o[2]);this.setCenterInternal([i[0]+c,i[1]-h])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),zr({},n,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var o=arguments[i];o.center&&(o=zr({},o),o.center=pi(o.center,this.getProjection())),o.anchor&&(o=zr({},o),o.anchor=pi(o.anchor,this.getProjection())),n[i]=o}this.animateInternal.apply(this,n)},e.prototype.animateInternal=function(t){var n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);for(var o=0;o<n&&!this.isDef();++o){var a=arguments[o];a.center&&this.setCenterInternal(a.center),a.zoom!==void 0?this.setZoom(a.zoom):a.resolution&&this.setResolution(a.resolution),a.rotation!==void 0&&this.setRotation(a.rotation)}if(o===n){i&&fN(i,!0);return}for(var c=Date.now(),h=this.targetCenter_.slice(),d=this.targetResolution_,v=this.targetRotation_,x=[];o<n;++o){var S=arguments[o],T={start:c,complete:!1,anchor:S.anchor,duration:S.duration!==void 0?S.duration:1e3,easing:S.easing||zqe,callback:i};if(S.center&&(T.sourceCenter=h,T.targetCenter=S.center.slice(),h=T.targetCenter),S.zoom!==void 0?(T.sourceResolution=d,T.targetResolution=this.getResolutionForZoom(S.zoom),d=T.targetResolution):S.resolution&&(T.sourceResolution=d,T.targetResolution=S.resolution,d=T.targetResolution),S.rotation!==void 0){T.sourceRotation=v;var L=vl(S.rotation-v+Math.PI,2*Math.PI)-Math.PI;T.targetRotation=v+L,v=T.targetRotation}HJt(T)?T.complete=!0:c+=T.duration,x.push(T)}this.animations_.push(x),this.setHint(wo.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[wo.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[wo.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(wo.ANIMATING,-this.hints_[wo.ANIMATING]);for(var t,n=0,i=this.animations_.length;n<i;++n){var o=this.animations_[n];if(o[0].callback&&fN(o[0].callback,!1),!t)for(var a=0,c=o.length;a<c;++a){var h=o[a];if(!h.complete){t=h.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},e.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var t=Date.now(),n=!1,i=this.animations_.length-1;i>=0;--i){for(var o=this.animations_[i],a=!0,c=0,h=o.length;c<h;++c){var d=o[c];if(!d.complete){var v=t-d.start,x=d.duration>0?v/d.duration:1;x>=1?(d.complete=!0,x=1):a=!1;var S=d.easing(x);if(d.sourceCenter){var T=d.sourceCenter[0],L=d.sourceCenter[1],k=d.targetCenter[0],R=d.targetCenter[1];this.nextCenter_=d.targetCenter;var D=T+S*(k-T),j=L+S*(R-L);this.targetCenter_=[D,j]}if(d.sourceResolution&&d.targetResolution){var B=S===1?d.targetResolution:d.sourceResolution+S*(d.targetResolution-d.sourceResolution);if(d.anchor){var $=this.getViewportSize_(this.getRotation()),ee=this.constraints_.resolution(B,0,$,!0);this.targetCenter_=this.calculateCenterZoom(ee,d.anchor)}this.nextResolution_=d.targetResolution,this.targetResolution_=B,this.applyTargetState_(!0)}if(d.sourceRotation!==void 0&&d.targetRotation!==void 0){var J=S===1?vl(d.targetRotation+Math.PI,2*Math.PI)-Math.PI:d.sourceRotation+S*(d.targetRotation-d.sourceRotation);if(d.anchor){var ie=this.constraints_.rotation(J,!0);this.targetCenter_=this.calculateCenterRotate(ie,d.anchor)}this.nextRotation_=d.targetRotation,this.targetRotation_=J}if(this.applyTargetState_(!0),n=!0,!d.complete)break}}if(a){this.animations_[i]=null,this.setHint(wo.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var ue=o[0].callback;ue&&fN(ue,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,n){var i,o=this.getCenterInternal();return o!==void 0&&(i=[o[0]-n[0],o[1]-n[1]],y0(i,t-this.getRotation()),mke(i,n)),i},e.prototype.calculateCenterZoom=function(t,n){var i,o=this.getCenterInternal(),a=this.getResolution();if(o!==void 0&&a!==void 0){var c=n[0]-t*(n[0]-o[0])/a,h=n[1]-t*(n[1]-o[1])/a;i=[c,h]}return i},e.prototype.getViewportSize_=function(t){var n=this.viewportSize_;if(t){var i=n[0],o=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(o*Math.cos(t))]}else return n},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t&&xd(t,this.getProjection())},e.prototype.getCenterInternal=function(){return this.get(vu.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},e.prototype.getHints=function(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var n=this.calculateExtentInternal(t);return wd(n,this.getProjection())},e.prototype.calculateExtentInternal=function(t){var n=t||this.getViewportSizeMinusPadding_(),i=this.getCenterInternal();ar(i,1);var o=this.getResolution();ar(o!==void 0,2);var a=this.getRotation();return ar(a!==void 0,3),gE(i,o,a,n)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(vu.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,n){return this.getResolutionForExtentInternal(Pa(t,this.getProjection()),n)},e.prototype.getResolutionForExtentInternal=function(t,n){var i=n||this.getViewportSizeMinusPadding_(),o=sn(t)/i[0],a=_o(t)/i[1];return Math.max(o,a)},e.prototype.getResolutionForValueFunction=function(t){var n=t||2,i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,a=Math.log(i/o)/Math.log(n);return function(c){var h=i/Math.pow(n,c*a);return h}},e.prototype.getRotation=function(){return this.get(vu.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var n=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,a=Math.log(i/o)/n;return function(c){var h=Math.log(i/c)/n/a;return h}},e.prototype.getViewportSizeMinusPadding_=function(t){var n=this.getViewportSize_(t),i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n},e.prototype.getState=function(){var t=this.getProjection(),n=this.getResolution(),i=this.getRotation(),o=this.getCenterInternal(),a=this.padding_;if(a){var c=this.getViewportSizeMinusPadding_();o=P8(o,this.getViewportSize_(),[c[0]/2+a[3],c[1]/2+a[0]],n,i)}return{center:o.slice(0),projection:t!==void 0?t:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,n=this.getResolution();return n!==void 0&&(t=this.getZoomForResolution(n)),t},e.prototype.getZoomForResolution=function(t){var n=this.minZoom_||0,i,o;if(this.resolutions_){var a=o0(this.resolutions_,t,1);n=a,i=this.resolutions_[a],a==this.resolutions_.length-1?o=2:o=i/this.resolutions_[a+1]}else i=this.maxResolution_,o=this.zoomFactor_;return n+Math.log(i/t)/Math.log(o)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=Fn(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,Fn(t-n,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,n){var i;if(ar(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){ar(!Sv(t),25);var o=Pa(t,this.getProjection());i=LE(o)}else if(t.getType()==="Circle"){var o=Pa(t.getExtent(),this.getProjection());i=LE(o),i.rotate(this.getRotation(),js(o))}else{var a=lu();a?i=t.clone().transform(a,this.getProjection()):i=t}this.fitInternal(i,n)},e.prototype.rotatedExtentForGeometry=function(t){for(var n=this.getRotation(),i=Math.cos(n),o=Math.sin(-n),a=t.getFlatCoordinates(),c=t.getStride(),h=1/0,d=1/0,v=-1/0,x=-1/0,S=0,T=a.length;S<T;S+=c){var L=a[S]*i-a[S+1]*o,k=a[S]*o+a[S+1]*i;h=Math.min(h,L),d=Math.min(d,k),v=Math.max(v,L),x=Math.max(x,k)}return[h,d,v,x]},e.prototype.fitInternal=function(t,n){var i=n||{},o=i.size;o||(o=this.getViewportSizeMinusPadding_());var a=i.padding!==void 0?i.padding:[0,0,0,0],c=i.nearest!==void 0?i.nearest:!1,h;i.minResolution!==void 0?h=i.minResolution:i.maxZoom!==void 0?h=this.getResolutionForZoom(i.maxZoom):h=0;var d=this.rotatedExtentForGeometry(t),v=this.getResolutionForExtentInternal(d,[o[0]-a[1]-a[3],o[1]-a[0]-a[2]]);v=isNaN(v)?h:Math.max(v,h),v=this.getConstrainedResolution(v,c?0:1);var x=this.getRotation(),S=Math.sin(x),T=Math.cos(x),L=js(d);L[0]+=(a[1]-a[3])/2*v,L[1]+=(a[0]-a[2])/2*v;var k=L[0]*T-L[1]*S,R=L[1]*T+L[0]*S,D=this.getConstrainedCenter([k,R],v),j=i.callback?i.callback:dl;i.duration!==void 0?this.animateInternal({resolution:v,center:D,duration:i.duration,easing:i.easing},j):(this.targetResolution_=v,this.targetCenter_=D,this.applyTargetState_(!1,!0),fN(j,!0))},e.prototype.centerOn=function(t,n,i){this.centerOnInternal(pi(t,this.getProjection()),n,i)},e.prototype.centerOnInternal=function(t,n,i){this.setCenterInternal(P8(t,n,i,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,n,i,o){var a,c=this.padding_;if(c&&t){var h=this.getViewportSizeMinusPadding_(-i),d=P8(t,o,[h[0]/2+c[3],h[1]/2+c[0]],n,i);a=[t[0]-d[0],t[1]-d[1]]}return a},e.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},e.prototype.adjustCenter=function(t){var n=xd(this.targetCenter_,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var n=this.targetCenter_;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])},e.prototype.adjustResolution=function(t,n){var i=n&&pi(n,this.getProjection());this.adjustResolutionInternal(t,i)},e.prototype.adjustResolutionInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*t,0,o,i);n&&(this.targetCenter_=this.calculateCenterZoom(a,n)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,n){this.adjustResolution(Math.pow(this.zoomFactor_,-t),n)},e.prototype.adjustRotation=function(t,n){n&&(n=pi(n,this.getProjection())),this.adjustRotationInternal(t,n)},e.prototype.adjustRotationInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,i);n&&(this.targetCenter_=this.calculateCenterRotate(o,n)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(t&&pi(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,n){return this.hints_[t]+=n,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,n){var i=this.getAnimating()||this.getInteracting()||n,o=this.constraints_.rotation(this.targetRotation_,i),a=this.getViewportSize_(o),c=this.constraints_.resolution(this.targetResolution_,0,a,i),h=this.constraints_.center(this.targetCenter_,c,a,i,this.calculateCenterShift(this.targetCenter_,c,o,a));this.get(vu.ROTATION)!==o&&this.set(vu.ROTATION,o),this.get(vu.RESOLUTION)!==c&&(this.set(vu.RESOLUTION,c),this.set("zoom",this.getZoom(),!0)),(!h||!this.get(vu.CENTER)||!ts(this.get(vu.CENTER),h))&&this.set(vu.CENTER,h),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,n,i){var o=t!==void 0?t:200,a=n||0,c=this.constraints_.rotation(this.targetRotation_),h=this.getViewportSize_(c),d=this.constraints_.resolution(this.targetResolution_,a,h),v=this.constraints_.center(this.targetCenter_,d,h,!1,this.calculateCenterShift(this.targetCenter_,d,c,h));if(o===0&&!this.cancelAnchor_){this.targetResolution_=d,this.targetRotation_=c,this.targetCenter_=v,this.applyTargetState_();return}var x=i||(o===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==d||this.getRotation()!==c||!this.getCenterInternal()||!ts(this.getCenterInternal(),v))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:c,center:v,resolution:d,duration:o,easing:du,anchor:x}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(wo.INTERACTING,1)},e.prototype.endInteraction=function(t,n,i){var o=i&&pi(i,this.getProjection());this.endInteractionInternal(t,n,o)},e.prototype.endInteractionInternal=function(t,n,i){this.setHint(wo.INTERACTING,-1),this.resolveConstraints(t,n,i)},e.prototype.getConstrainedCenter=function(t,n){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,n||this.getResolution(),i)},e.prototype.getConstrainedZoom=function(t,n){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))},e.prototype.getConstrainedResolution=function(t,n){var i=n||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,o)},e}(io);function fN(r,e){setTimeout(function(){r(e)},0)}function VJt(r){if(r.extent!==void 0){var e=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return T8(r.extent,r.constrainOnlyCenter,e)}var t=SD(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&t.isGlobal()){var n=t.getExtent().slice();return n[0]=-1/0,n[2]=1/0,T8(n,!1,!1)}return Nje}function GJt(r){var e,t,n,i=28,o=2,a=r.minZoom!==void 0?r.minZoom:R8,c=r.maxZoom!==void 0?r.maxZoom:i,h=r.zoomFactor!==void 0?r.zoomFactor:o,d=r.multiWorld!==void 0?r.multiWorld:!1,v=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,x=r.showFullExtent!==void 0?r.showFullExtent:!1,S=SD(r.projection,"EPSG:3857"),T=S.getExtent(),L=r.constrainOnlyCenter,k=r.extent;if(!d&&!k&&S.isGlobal()&&(L=!1,k=T),r.resolutions!==void 0){var R=r.resolutions;t=R[a],n=R[c]!==void 0?R[c]:R[R.length-1],r.constrainResolution?e=kje(R,v,!L&&k,x):e=M8(t,n,v,!L&&k,x)}else{var D=T?Math.max(sn(T),_o(T)):360*Ca[Ma.DEGREES]/S.getMetersPerUnit(),j=D/Dd/Math.pow(o,R8),B=j/Math.pow(o,i-R8);t=r.maxResolution,t!==void 0?a=0:t=j/Math.pow(h,a),n=r.minResolution,n===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?n=t/Math.pow(h,c):n=j/Math.pow(h,c):n=B),c=a+Math.floor(Math.log(t/n)/Math.log(h)),n=t/Math.pow(h,c-a),r.constrainResolution?e=qje(h,t,n,v,!L&&k,x):e=M8(t,n,v,!L&&k,x)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:a,zoomFactor:h}}function $Jt(r){var e=r.enableRotation!==void 0?r.enableRotation:!0;if(e){var t=r.constrainRotation;return t===void 0||t===!0?_je():t===!1?S8:typeof t=="number"?yje(t):S8}else return k0}function HJt(r){return!(r.sourceCenter&&r.targetCenter&&!ts(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function P8(r,e,t,n,i){var o=Math.cos(-i),a=Math.sin(-i),c=r[0]*o-r[1]*a,h=r[1]*o+r[0]*a;c+=(e[0]/2-t[0])*n,h+=(t[1]-e[1]/2)*n,a=-a;var d=c*o-h*a,v=h*o+c*a;return[d,v]}var gu=UJt;var WJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();function jje(r){if(r instanceof Mv){r.setMapInternal(null);return}r instanceof HE&&r.getLayers().forEach(jje)}function Fje(r,e){if(r instanceof Mv){r.setMapInternal(e);return}if(r instanceof HE)for(var t=r.getLayers().getArray(),n=0,i=t.length;n<i;++n)Fje(t[n],e)}var ZJt=function(r){WJt(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un;var i=YJt(t);n.renderComplete_,n.loaded_=!0,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,n.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:cD,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=Di(),n.pixelToCoordinateTransform_=Di(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=t.moveTolerance,n.keyboardEventTarget_=i.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=i.controls||new Kn,n.interactions=i.interactions||new Kn,n.overlays_=i.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new Oje(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(so.LAYERGROUP,n.handleLayerGroupChanged_),n.addChangeListener(so.VIEW,n.handleViewChanged_),n.addChangeListener(so.SIZE,n.handleSizeChanged_),n.addChangeListener(so.TARGET,n.handleTargetChanged_),n.setProperties(i.values);var o=n;return t.view&&!(t.view instanceof gu)&&t.view.then(function(a){o.setView(new gu(a))}),n.controls.addEventListener(ii.ADD,function(a){a.element.setMap(this)}.bind(n)),n.controls.addEventListener(ii.REMOVE,function(a){a.element.setMap(null)}.bind(n)),n.interactions.addEventListener(ii.ADD,function(a){a.element.setMap(this)}.bind(n)),n.interactions.addEventListener(ii.REMOVE,function(a){a.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(ii.ADD,function(a){this.addOverlayInternal_(a.element)}.bind(n)),n.overlays_.addEventListener(ii.REMOVE,function(a){var c=a.element,h=c.getId();h!==void 0&&delete this.overlayIdIndex_[h.toString()],a.element.setMap(null)}.bind(n)),n.controls.forEach(function(a){a.setMap(this)}.bind(n)),n.interactions.forEach(function(a){a.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){var n=this.getLayerGroup().getLayers();n.push(t)},e.prototype.handleLayerAdd_=function(t){Fje(t.layer,this)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var n=t.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),r.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,n,i){if(!(!this.frameState_||!this.renderer_)){var o=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};var a=i.hitTolerance!==void 0?i.hitTolerance:0,c=i.layerFilter!==void 0?i.layerFilter:Qa,h=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,a,h,n,null,c,null)}},e.prototype.getFeaturesAtPixel=function(t,n){var i=[];return this.forEachFeatureAtPixel(t,function(o){i.push(o)},n),i},e.prototype.getAllLayers=function(){var t=[];function n(i){i.forEach(function(o){o instanceof HE?n(o.getLayers()):t.push(o)})}return n(this.getLayers()),t},e.prototype.forEachLayerAtPixel=function(t,n,i){if(!(!this.frameState_||!this.renderer_)){var o=i||{},a=o.hitTolerance!==void 0?o.hitTolerance:0,c=o.layerFilter||Qa;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,a,n,c)}},e.prototype.hasFeatureAtPixel=function(t,n){if(!this.frameState_||!this.renderer_)return!1;var i=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};var o=n.layerFilter!==void 0?n.layerFilter:Qa,a=n.hitTolerance!==void 0?n.hitTolerance:0,c=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,a,c,o,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var n=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-n.left,i.clientY-n.top]},e.prototype.getTarget=function(){return this.get(so.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return t!==void 0?typeof t=="string"?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return xd(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var n=this.frameState_;return n?On(n.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var n=this.overlayIdIndex_[t.toString()];return n!==void 0?n:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(so.LAYERGROUP)},e.prototype.setLayers=function(t){var n=this.getLayerGroup();if(t instanceof Kn){n.setLayers(t);return}var i=n.getLayers();i.clear(),i.extend(t)},e.prototype.getLayers=function(){var t=this.getLayerGroup().getLayers();return t},e.prototype.getLoadingOrNotReady=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var o=t[n];if(o.visible){var a=o.layer.getRenderer();if(a&&!a.ready)return!0;var c=o.layer.getSource();if(c&&c.loading)return!0}}return!1},e.prototype.getPixelFromCoordinate=function(t){var n=pi(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},e.prototype.getPixelFromCoordinateInternal=function(t){var n=this.frameState_;return n?On(n.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(so.SIZE)},e.prototype.getView=function(){return this.get(so.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,n,i,o){return Lje(this.frameState_,t,n,i,o)},e.prototype.handleBrowserEvent=function(t,n){var i=n||t.type,o=new pu(i,this,t);this.handleMapBrowserEvent(o)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var n=t.originalEvent,i=n.type;if(i===WE.POINTERDOWN||i===Pt.WHEEL||i===Pt.KEYDOWN){var o=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():o,c=n.target;if(this.overlayContainerStopEvent_.contains(c)||!(a===o?o.documentElement:a).contains(c))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1)for(var h=this.getInteractions().getArray().slice(),d=h.length-1;d>=0;d--){var v=h[d];if(!(v.getMap()!==this||!v.getActive()||!this.getTargetElement())){var x=v.handleEvent(t);if(!x||t.propagationStopped)break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var i=this.maxTilesLoading_,o=i;if(t){var a=t.viewHints;if(a[wo.ANIMATING]||a[wo.INTERACTING]){var c=Date.now()-t.time>8;i=c?0:8,o=c?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,o))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(xo.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(xo.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Pd(Yc.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Pd(Yc.LOADSTART,this,t))));for(var h=this.postRenderFunctions_,d=0,v=h.length;d<v;++d)h[d](this,t);h.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var t=0,n=this.targetChangeHandlerKeys_.length;t<n;++t)Yr(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Pt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Pt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,NE(this.viewport_)}var i=this.getTargetElement();if(!i)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{i.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Rje(this,this.moveTolerance_);for(var o in Br)this.mapBrowserEventHandler_.addEventListener(Br[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Pt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Pt.WHEEL,this.boundHandleBrowserEvent_,fD?{passive:!1}:!1);var a=this.getOwnerDocument().defaultView,c=this.keyboardEventTarget_?this.keyboardEventTarget_:i;this.targetChangeHandlerKeys_=[Ar(c,Pt.KEYDOWN,this.handleBrowserEvent,this),Ar(c,Pt.KEYPRESS,this.handleBrowserEvent,this),Ar(a,Pt.RESIZE,this.updateSize,this)]}this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Yr(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Yr(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Ar(t,Gu.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ar(t,Pt.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Yr),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.handleLayerAdd_(new _h("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Ar(t,Gu.PROPERTYCHANGE,this.render,this),Ar(t,Pt.CHANGE,this.render,this),Ar(t,"addlayer",this.handleLayerAdd_,this),Ar(t,"removelayer",this.handleLayerRemove_,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var o=t[n].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){var n=this.getLayerGroup().getLayers();return n.remove(t)},e.prototype.handleLayerRemove_=function(t){jje(t.layer)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var n=this,i=this.getSize(),o=this.getView(),a=this.frameState_,c=null;if(i!==void 0&&WW(i)&&o&&o.isDef()){var h=o.getHints(this.frameState_?this.frameState_.viewHints:void 0),d=o.getState();if(c={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:gE(d.center,d.resolution,d.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:d,viewHints:h,wantedTiles:{},mapId:tr(this),renderTargets:{}},d.nextCenter&&d.nextResolution){var v=isNaN(d.nextRotation)?d.rotation:d.nextRotation;c.nextExtent=gE(d.nextCenter,d.nextResolution,v,i)}}if(this.frameState_=c,this.renderer_.renderFrame(c),c){if(c.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,c.postRenderFunctions),a){var x=!this.previousExtent_||!Sv(this.previousExtent_)&&!sh(c.extent,this.previousExtent_);x&&(this.dispatchEvent(new Pd(Yc.MOVESTART,this,a)),this.previousExtent_=yd(this.previousExtent_))}var S=this.previousExtent_&&!c.viewHints[wo.ANIMATING]&&!c.viewHints[wo.INTERACTING]&&!sh(c.extent,this.previousExtent_);S&&(this.dispatchEvent(new Pd(Yc.MOVEEND,this,c)),mD(c.extent,this.previousExtent_))}this.dispatchEvent(new Pd(Yc.POSTRENDER,this,c)),this.renderComplete_=this.hasListener(Yc.LOADSTART)||this.hasListener(Yc.LOADEND)||this.hasListener(xo.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},e.prototype.setLayerGroup=function(t){var n=this.getLayerGroup();n&&this.handleLayerRemove_(new _h("removelayer",n)),this.set(so.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(so.SIZE,t)},e.prototype.setTarget=function(t){this.set(so.TARGET,t)},e.prototype.setView=function(t){if(!t||t instanceof gu){this.set(so.VIEW,t);return}this.set(so.VIEW,new gu);var n=this;t.then(function(i){n.setView(new gu(i))})},e.prototype.updateSize=function(){var t=this.getTargetElement(),n=void 0;if(t){var i=getComputedStyle(t),o=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),a=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(o)&&!isNaN(a)&&(n=[o,a],!WW(n)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(n),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var n=void 0,i=getComputedStyle(this.viewport_);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}},e}(io);function YJt(r){var e=null;r.keyboardEventTarget!==void 0&&(e=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);var t={},n=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new HE({layers:r.layers});t[so.LAYERGROUP]=n,t[so.TARGET]=r.target,t[so.VIEW]=r.view instanceof gu?r.view:new gu;var i;r.controls!==void 0&&(Array.isArray(r.controls)?i=new Kn(r.controls.slice()):(ar(typeof r.controls.getArray=="function",47),i=r.controls));var o;r.interactions!==void 0&&(Array.isArray(r.interactions)?o=new Kn(r.interactions.slice()):(ar(typeof r.interactions.getArray=="function",48),o=r.interactions));var a;return r.overlays!==void 0?Array.isArray(r.overlays)?a=new Kn(r.overlays.slice()):(ar(typeof r.overlays.getArray=="function",49),a=r.overlays):a=new Kn,{controls:i,interactions:o,keyboardEventTarget:e,overlays:a,values:t}}var zje=ZJt;var KJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),XJt=function(r){KJt(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this,n.ulElement_=document.createElement("ul"),n.collapsed_=i.collapsed!==void 0?i.collapsed:!0,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=i.collapsible!==void 0,n.collapsible_=i.collapsible!==void 0?i.collapsible:!0,n.collapsible_||(n.collapsed_=!1);var o=i.className!==void 0?i.className:"ol-attribution",a=i.tipLabel!==void 0?i.tipLabel:"Attributions",c=i.expandClassName!==void 0?i.expandClassName:o+"-expand",h=i.collapseLabel!==void 0?i.collapseLabel:"\u203A",d=i.collapseClassName!==void 0?i.collapseClassName:o+"-collapse";typeof h=="string"?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=h,n.collapseLabel_.className=d):n.collapseLabel_=h;var v=i.label!==void 0?i.label:"i";typeof v=="string"?(n.label_=document.createElement("span"),n.label_.textContent=v,n.label_.className=c):n.label_=v;var x=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=a,n.toggleButton_.appendChild(x),n.toggleButton_.addEventListener(Pt.CLICK,n.handleClick_.bind(n),!1);var S=o+" "+fu+" "+Uc+(n.collapsed_&&n.collapsible_?" "+XW:"")+(n.collapsible_?"":" ol-uncollapsible"),T=n.element;return T.className=S,T.appendChild(n.toggleButton_),T.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return e.prototype.collectSourceAttributions_=function(t){for(var n={},i=[],o=!0,a=t.layerStatesArray,c=0,h=a.length;c<h;++c){var d=a[c];if(Cv(d,t.viewState)){var v=d.layer.getSource();if(v){var x=v.getAttributions();if(x){var S=x(t);if(S)if(o=o&&v.getAttributionsCollapsible()!==!1,Array.isArray(S))for(var T=0,L=S.length;T<L;++T)S[T]in n||(i.push(S[T]),n[S[T]]=!0);else S in n||(i.push(S),n[S]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),i},e.prototype.updateElement_=function(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var n=this.collectSourceAttributions_(t),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Aa(n,this.renderedAttributions_)){Qke(this.ulElement_);for(var o=0,a=n.length;o<a;++o){var c=document.createElement("li");c.innerHTML=n[o],this.ulElement_.appendChild(c)}this.renderedAttributions_=n}},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle(XW),this.collapsed_?w0(this.collapseLabel_,this.label_):w0(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(ns),Bje=XJt;var JJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),QJt=function(r){JJt(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this;var o=i.className!==void 0?i.className:"ol-rotate",a=i.label!==void 0?i.label:"\u21E7",c=i.compassClassName!==void 0?i.compassClassName:"ol-compass";n.label_=null,typeof a=="string"?(n.label_=document.createElement("span"),n.label_.className=c,n.label_.textContent=a):(n.label_=a,n.label_.classList.add(c));var h=i.tipLabel?i.tipLabel:"Reset rotation",d=document.createElement("button");d.className=o+"-reset",d.setAttribute("type","button"),d.title=h,d.appendChild(n.label_),d.addEventListener(Pt.CLICK,n.handleClick_.bind(n),!1);var v=o+" "+fu+" "+Uc,x=n.element;return x.className=v,x.appendChild(d),n.callResetNorth_=i.resetNorth?i.resetNorth:void 0,n.duration_=i.duration!==void 0?i.duration:250,n.autoHide_=i.autoHide!==void 0?i.autoHide:!0,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(kE),n}return e.prototype.handleClick_=function(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap(),n=t.getView();if(n){var i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:du}):n.setRotation(0))}},e.prototype.render=function(t){var n=t.frameState;if(n){var i=n.viewState.rotation;if(i!=this.rotation_){var o="rotate("+i+"rad)";if(this.autoHide_){var a=this.element.classList.contains(kE);!a&&i===0?this.element.classList.add(kE):a&&i!==0&&this.element.classList.remove(kE)}this.label_.style.transform=o}this.rotation_=i}},e}(ns),Uje=QJt;var eQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),tQt=function(r){eQt(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),target:i.target})||this;var o=i.className!==void 0?i.className:"ol-zoom",a=i.delta!==void 0?i.delta:1,c=i.zoomInClassName!==void 0?i.zoomInClassName:o+"-in",h=i.zoomOutClassName!==void 0?i.zoomOutClassName:o+"-out",d=i.zoomInLabel!==void 0?i.zoomInLabel:"+",v=i.zoomOutLabel!==void 0?i.zoomOutLabel:"\u2013",x=i.zoomInTipLabel!==void 0?i.zoomInTipLabel:"Zoom in",S=i.zoomOutTipLabel!==void 0?i.zoomOutTipLabel:"Zoom out",T=document.createElement("button");T.className=c,T.setAttribute("type","button"),T.title=x,T.appendChild(typeof d=="string"?document.createTextNode(d):d),T.addEventListener(Pt.CLICK,n.handleClick_.bind(n,a),!1);var L=document.createElement("button");L.className=h,L.setAttribute("type","button"),L.title=S,L.appendChild(typeof v=="string"?document.createTextNode(v):v),L.addEventListener(Pt.CLICK,n.handleClick_.bind(n,-a),!1);var k=o+" "+fu+" "+Uc,R=n.element;return R.className=k,R.appendChild(T),R.appendChild(L),n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleClick_=function(t,n){n.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var n=this.getMap(),i=n.getView();if(i){var o=i.getZoom();if(o!==void 0){var a=i.getConstrainedZoom(o+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:a,duration:this.duration_,easing:du})):i.setZoom(a)}}},e}(ns),j0=tQt;var rQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nQt=function(r){rQt(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),target:i.target})||this,n.extent=i.extent?i.extent:null;var o=i.className!==void 0?i.className:"ol-zoom-extent",a=i.label!==void 0?i.label:"E",c=i.tipLabel!==void 0?i.tipLabel:"Fit to extent",h=document.createElement("button");h.setAttribute("type","button"),h.title=c,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(Pt.CLICK,n.handleClick_.bind(n),!1);var d=o+" "+fu+" "+Uc,v=n.element;return v.className=d,v.appendChild(h),n}return e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap(),n=t.getView(),i=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(LE(i))},e}(ns),hN=nQt;function Vje(r){var e=r||{},t=new Kn,n=e.zoom!==void 0?e.zoom:!0;n&&t.push(new j0(e.zoomOptions));var i=e.rotate!==void 0?e.rotate:!0;i&&t.push(new Uje(e.rotateOptions));var o=e.attribution!==void 0?e.attribution:!0;return o&&t.push(new Bje(e.attributionOptions)),t}var iQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),oQt=function(r){iQt(e,r);function e(t){return t=zr({},t),t.controls||(t.controls=Vje()),t.interactions||(t.interactions=q0({onFocusOnly:!0})),r.call(this,t)||this}return e.prototype.createRenderer=function(){return new Cje(this)},e}(zje),F0=oQt;var YE={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var aQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sQt=function(r){aQt(e,r);function e(t){var n=this,i=t||{},o=zr({},i);return delete o.preload,delete o.useInterimTilesOnError,n=r.call(this,o)||this,n.on,n.once,n.un,n.setPreload(i.preload!==void 0?i.preload:0),n.setUseInterimTilesOnError(i.useInterimTilesOnError!==void 0?i.useInterimTilesOnError:!0),n}return e.prototype.getPreload=function(){return this.get(YE.PRELOAD)},e.prototype.setPreload=function(t){this.set(YE.PRELOAD,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(YE.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(t){this.set(YE.USE_INTERIM_TILES_ON_ERROR,t)},e.prototype.getData=function(t){return r.prototype.getData.call(this,t)},e}(Mv),pN=sQt;var lQt=function(){function r(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return r.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},r.prototype.expireCache=function(e){for(;this.canExpireCache();)this.pop()},r.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},r.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},r.prototype.forEach=function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer},r.prototype.get=function(e,t){var n=this.entries_[e];return ar(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},r.prototype.remove=function(e){var t=this.entries_[e];return ar(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_},r.prototype.getCount=function(){return this.count_},r.prototype.getKeys=function(){var e=new Array(this.count_),t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e},r.prototype.getValues=function(){var e=new Array(this.count_),t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e},r.prototype.peekLast=function(){return this.oldest_.value_},r.prototype.peekLastKey=function(){return this.oldest_.key_},r.prototype.peekFirstKey=function(){return this.newest_.key_},r.prototype.peek=function(e){if(this.containsKey(e))return this.entries_[e].value_},r.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},r.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},r.prototype.set=function(e,t){ar(!(e in this.entries_),16);var n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_},r.prototype.setSize=function(e){this.highWaterMark=e},r}(),dN=lQt;var Gje=function(){function r(e,t,n,i){this.minX=e,this.maxX=t,this.minY=n,this.maxY=i}return r.prototype.contains=function(e){return this.containsXY(e[1],e[2])},r.prototype.containsTileRange=function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY},r.prototype.containsXY=function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY},r.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY},r.prototype.extend=function(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)},r.prototype.getHeight=function(){return this.maxY-this.minY+1},r.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},r.prototype.getWidth=function(){return this.maxX-this.minX+1},r.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY},r}();function Dv(r,e,t,n,i){return i!==void 0?(i.minX=r,i.maxX=e,i.minY=t,i.maxY=n,i):new Gje(r,e,t,n)}var z0=Gje;var uQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cQt=function(r){uQt(e,r);function e(t,n,i){var o=r.call(this)||this,a=i||{};return o.tileCoord=t,o.state=n,o.interimTile=null,o.key="",o.transition_=a.transition===void 0?250:a.transition,o.transitionStarts_={},o.interpolate=!!a.interpolate,o}return e.prototype.changed=function(){this.dispatchEvent(Pt.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==Ut.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,n=this;do{if(t.getState()==Ut.LOADED){t.interimTile=null;break}else t.getState()==Ut.LOADING?n=t:t.getState()==Ut.IDLE?n.interimTile=t.interimTile:n=t;t=n.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==Ut.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){ir()},e.prototype.getAlpha=function(t,n){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(!i)i=n,this.transitionStarts_[t]=i;else if(i===-1)return 1;var o=n-i+1e3/60;return o>=this.transition_?1:m8(o/this.transition_)},e.prototype.inTransition=function(t){return this.transition_?this.transitionStarts_[t]!==-1:!1},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(ks),B0=cQt;var fQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),hQt=function(r){fQt(e,r);function e(t){var n=this,i=Ut.IDLE;return n=r.call(this,t.tileCoord,i,{transition:t.transition,interpolate:t.interpolate})||this,n.loader_=t.loader,n.data_=null,n.error_=null,n.size_=t.size||[256,256],n}return e.prototype.getSize=function(){return this.size_},e.prototype.getData=function(){return this.data_},e.prototype.getError=function(){return this.error_},e.prototype.load=function(){if(!(this.state!==Ut.IDLE&&this.state!==Ut.ERROR)){this.state=Ut.LOADING,this.changed();var t=this;this.loader_().then(function(n){t.data_=n,t.state=Ut.LOADED,t.changed()}).catch(function(n){t.error_=n,t.state=Ut.ERROR,t.changed()})}},e}(B0),$je=hQt;var pQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),dQt=function(r){pQt(e,r);function e(t,n,i,o,a,c){var h=r.call(this,t,n,c)||this;return h.crossOrigin_=o,h.src_=i,h.key=i,h.image_=new Image,o!==null&&(h.image_.crossOrigin=o),h.unlisten_=null,h.tileLoadFunction_=a,h}return e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=Ut.LOADED,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){this.state=Ut.ERROR,this.unlistenImage_(),this.image_=mQt(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Ut.LOADED:this.state=Ut.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==Ut.ERROR&&(this.state=Ut.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Ut.IDLE&&(this.state=Ut.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=FE(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(B0);function mQt(){var r=Ei(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}var xh=dQt;var Hje=.5,Kc=!0;var vQt=10,Wje=.25,gQt=function(){function r(e,t,n,i,o,a){this.sourceProj_=e,this.targetProj_=t;var c={},h=Iv(this.targetProj_,this.sourceProj_);this.transformInv_=function(B){var $=B[0]+"/"+B[1];return c[$]||(c[$]=h(B)),c[$]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&sn(i)==sn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?sn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?sn(this.targetProj_.getExtent()):null;var d=au(n),v=p0(n),x=h0(n),S=f0(n),T=this.transformInv_(d),L=this.transformInv_(v),k=this.transformInv_(x),R=this.transformInv_(S),D=vQt+(a?Math.max(0,Math.ceil(xD(vE(n)/(a*a*256*256)))):0);if(this.addQuad_(d,v,x,S,T,L,k,R,D),this.wrapsXInSource_){var j=1/0;this.triangles_.forEach(function(B,$,ee){j=Math.min(j,B.source[0][0],B.source[1][0],B.source[2][0])}),this.triangles_.forEach(function(B){if(Math.max(B.source[0][0],B.source[1][0],B.source[2][0])-j>this.sourceWorldWidth_/2){var $=[[B.source[0][0],B.source[0][1]],[B.source[1][0],B.source[1][1]],[B.source[2][0],B.source[2][1]]];$[0][0]-j>this.sourceWorldWidth_/2&&($[0][0]-=this.sourceWorldWidth_),$[1][0]-j>this.sourceWorldWidth_/2&&($[1][0]-=this.sourceWorldWidth_),$[2][0]-j>this.sourceWorldWidth_/2&&($[2][0]-=this.sourceWorldWidth_);var ee=Math.min($[0][0],$[1][0],$[2][0]),J=Math.max($[0][0],$[1][0],$[2][0]);J-ee<this.sourceWorldWidth_/2&&(B.source=$)}}.bind(this))}c={}}return r.prototype.addTriangle_=function(e,t,n,i,o,a){this.triangles_.push({source:[i,o,a],target:[e,t,n]})},r.prototype.addQuad_=function(e,t,n,i,o,a,c,h,d){var v=ea([o,a,c,h]),x=this.sourceWorldWidth_?sn(v)/this.sourceWorldWidth_:null,S=this.sourceWorldWidth_,T=this.sourceProj_.canWrapX()&&x>.5&&x<1,L=!1;if(d>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var k=ea([e,t,n,i]),R=sn(k)/this.targetWorldWidth_;L=R>Wje||L}!T&&this.sourceProj_.isGlobal()&&x&&(L=x>Wje||L)}if(!(!L&&this.maxSourceExtent_&&isFinite(v[0])&&isFinite(v[1])&&isFinite(v[2])&&isFinite(v[3])&&!Si(v,this.maxSourceExtent_))){var D=0;if(!L&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(h[0])||!isFinite(h[1]))){if(d>0)L=!0;else if(D=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(c[0])||!isFinite(c[1])?2:0)+(!isFinite(h[0])||!isFinite(h[1])?1:0),D!=1&&D!=2&&D!=4&&D!=8)return}if(d>0){if(!L){var j=[(e[0]+n[0])/2,(e[1]+n[1])/2],B=this.transformInv_(j),$=void 0;if(T){var ee=(vl(o[0],S)+vl(c[0],S))/2;$=ee-vl(B[0],S)}else $=(o[0]+c[0])/2-B[0];var J=(o[1]+c[1])/2-B[1],ie=$*$+J*J;L=ie>this.errorThresholdSquared_}if(L){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){var ue=[(t[0]+n[0])/2,(t[1]+n[1])/2],le=this.transformInv_(ue),_e=[(i[0]+e[0])/2,(i[1]+e[1])/2],Re=this.transformInv_(_e);this.addQuad_(e,t,ue,_e,o,a,le,Re,d-1),this.addQuad_(_e,ue,n,i,Re,le,c,h,d-1)}else{var ze=[(e[0]+t[0])/2,(e[1]+t[1])/2],ke=this.transformInv_(ze),Ve=[(n[0]+i[0])/2,(n[1]+i[1])/2],We=this.transformInv_(Ve);this.addQuad_(e,ze,Ve,i,o,ke,We,h,d-1),this.addQuad_(ze,t,n,Ve,ke,a,c,We,d-1)}return}}if(T){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}D&11||this.addTriangle_(e,n,i,o,c,h),D&14||this.addTriangle_(e,n,t,o,c,a),D&&(D&13||this.addTriangle_(t,i,e,a,h,o),D&7||this.addTriangle_(t,i,n,a,h,c))}},r.prototype.calculateSourceExtent=function(){var e=Ni();return this.triangles_.forEach(function(t,n,i){var o=t.source;bv(e,o[0]),bv(e,o[1]),bv(e,o[2])}),e},r.prototype.getTriangles=function(){return this.triangles_},r}(),Zje=gQt;var KE={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},Yje={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0};var O8,D8=[];function Kje(r,e,t,n,i){r.beginPath(),r.moveTo(0,0),r.lineTo(e,t),r.lineTo(n,i),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(e,n)+1,Math.max(t,i)),r.restore()}function L8(r,e){return Math.abs(r[e*4]-210)>2||Math.abs(r[e*4+3]-.75*255)>2}function yQt(){if(O8===void 0){var r=document.createElement("canvas").getContext("2d");r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",Kje(r,4,5,4,0),Kje(r,4,5,0,5);var e=r.getImageData(0,0,3,3).data;O8=L8(e,0)||L8(e,4)||L8(e,8)}return O8}function mN(r,e,t,n){var i=Ku(t,e,r),o=MW(e,n,t),a=e.getMetersPerUnit();a!==void 0&&(o*=a);var c=r.getMetersPerUnit();c!==void 0&&(o/=c);var h=r.getExtent();if(!h||es(h,i)){var d=MW(r,o,i)/o;isFinite(d)&&d>0&&(o/=d)}return o}function Xje(r,e,t,n){var i=js(t),o=mN(r,e,i,n);return(!isFinite(o)||o<=0)&&c0(t,function(a){return o=mN(r,e,a,n),isFinite(o)&&o>0}),o}function Jje(r,e,t,n,i,o,a,c,h,d,v,x){var S=Ei(Math.round(t*r),Math.round(t*e),D8);if(x||zr(S,KE),h.length===0)return S.canvas;S.scale(t,t);function T($){return Math.round($*t)/t}S.globalCompositeOperation="lighter";var L=Ni();h.forEach(function($,ee,J){gD(L,$.extent)});var k=sn(L),R=_o(L),D=Ei(Math.round(t*k/n),Math.round(t*R/n));x||zr(D,KE);var j=t/n;h.forEach(function($,ee,J){var ie=$.extent[0]-L[0],ue=-($.extent[3]-L[3]),le=sn($.extent),_e=_o($.extent);$.image.width>0&&$.image.height>0&&D.drawImage($.image,d,d,$.image.width-2*d,$.image.height-2*d,ie*j,ue*j,le*j,_e*j)});var B=au(a);return c.getTriangles().forEach(function($,ee,J){var ie=$.source,ue=$.target,le=ie[0][0],_e=ie[0][1],Re=ie[1][0],ze=ie[1][1],ke=ie[2][0],Ve=ie[2][1],We=T((ue[0][0]-B[0])/o),Te=T(-(ue[0][1]-B[1])/o),Se=T((ue[1][0]-B[0])/o),Ae=T(-(ue[1][1]-B[1])/o),$e=T((ue[2][0]-B[0])/o),Ge=T(-(ue[2][1]-B[1])/o),Ke=le,Pe=_e;le=0,_e=0,Re-=Ke,ze-=Pe,ke-=Ke,Ve-=Pe;var at=[[Re,ze,0,0,Se-We],[ke,Ve,0,0,$e-We],[0,0,Re,ze,Ae-Te],[0,0,ke,Ve,Ge-Te]],Tt=ake(at);if(Tt){if(S.save(),S.beginPath(),yQt()||!x){S.moveTo(Se,Ae);for(var Le=4,Ye=We-Se,Fe=Te-Ae,Ze=0;Ze<Le;Ze++)S.lineTo(Se+T((Ze+1)*Ye/Le),Ae+T(Ze*Fe/(Le-1))),Ze!=Le-1&&S.lineTo(Se+T((Ze+1)*Ye/Le),Ae+T((Ze+1)*Fe/(Le-1)));S.lineTo($e,Ge)}else S.moveTo(Se,Ae),S.lineTo(We,Te),S.lineTo($e,Ge);S.clip(),S.transform(Tt[0],Tt[2],Tt[1],Tt[3],We,Te),S.translate(L[0]-Ke,L[3]-Pe),S.scale(n/t,-n/t),S.drawImage(D.canvas,0,0),S.restore()}}),v&&(S.save(),S.globalCompositeOperation="source-over",S.strokeStyle="black",S.lineWidth=1,c.getTriangles().forEach(function($,ee,J){var ie=$.target,ue=(ie[0][0]-B[0])/o,le=-(ie[0][1]-B[1])/o,_e=(ie[1][0]-B[0])/o,Re=-(ie[1][1]-B[1])/o,ze=(ie[2][0]-B[0])/o,ke=-(ie[2][1]-B[1])/o;S.beginPath(),S.moveTo(_e,Re),S.lineTo(ue,le),S.lineTo(ze,ke),S.closePath(),S.stroke()}),S.restore()),S.canvas}var _Qt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xQt=function(r){_Qt(e,r);function e(t,n,i,o,a,c,h,d,v,x,S,T){var L=r.call(this,a,Ut.IDLE,{interpolate:!!T})||this;L.renderEdges_=S!==void 0?S:!1,L.pixelRatio_=h,L.gutter_=d,L.canvas_=null,L.sourceTileGrid_=n,L.targetTileGrid_=o,L.wrappedTileCoord_=c||a,L.sourceTiles_=[],L.sourcesListenerKeys_=null,L.sourceZ_=0;var k=o.getTileCoordExtent(L.wrappedTileCoord_),R=L.targetTileGrid_.getExtent(),D=L.sourceTileGrid_.getExtent(),j=R?ou(k,R):k;if(vE(j)===0)return L.state=Ut.EMPTY,L;var B=t.getExtent();B&&(D?D=ou(D,B):D=B);var $=o.getResolution(L.wrappedTileCoord_[0]),ee=Xje(t,i,j,$);if(!isFinite(ee)||ee<=0)return L.state=Ut.EMPTY,L;var J=x!==void 0?x:Hje;if(L.triangulation_=new Zje(t,i,j,D,ee*J,$),L.triangulation_.getTriangles().length===0)return L.state=Ut.EMPTY,L;L.sourceZ_=n.getZForResolution(ee);var ie=L.triangulation_.calculateSourceExtent();if(D&&(t.canWrapX()?(ie[1]=Fn(ie[1],D[1],D[3]),ie[3]=Fn(ie[3],D[1],D[3])):ie=ou(ie,D)),!vE(ie))L.state=Ut.EMPTY;else{for(var ue=n.getTileRangeForExtentAndZ(ie,L.sourceZ_),le=ue.minX;le<=ue.maxX;le++)for(var _e=ue.minY;_e<=ue.maxY;_e++){var Re=v(L.sourceZ_,le,_e,h);Re&&L.sourceTiles_.push(Re)}L.sourceTiles_.length===0&&(L.state=Ut.EMPTY)}return L}return e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(v,x,S){v&&v.getState()==Ut.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(v.tileCoord),image:v.getImage()})}.bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=Ut.ERROR;else{var n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),o=typeof i=="number"?i:i[0],a=typeof i=="number"?i:i[1],c=this.targetTileGrid_.getResolution(n),h=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Jje(o,a,this.pixelRatio_,h,this.sourceTileGrid_.getExtent(),c,d,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=Ut.LOADED}this.changed()},e.prototype.load=function(){if(this.state==Ut.IDLE){this.state=Ut.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,i,o){var a=n.getState();if(a==Ut.IDLE||a==Ut.LOADING){t++;var c=Ar(n,Pt.CHANGE,function(h){var d=n.getState();(d==Ut.LOADED||d==Ut.ERROR||d==Ut.EMPTY)&&(Yr(c),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(c)}}.bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,o){var a=n.getState();a==Ut.IDLE&&n.load()})}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Yr),this.sourcesListenerKeys_=null},e.prototype.release=function(){this.canvas_&&(zD(this.canvas_.getContext("2d")),D8.push(this.canvas_),this.canvas_=null),r.prototype.release.call(this)},e}(B0),U0=xQt;var XE=34962,JE=34963,eFe=35040,V0=35044,tFe=35048,rFe=5121,nFe=5123,iFe=5125,N8=5126,Qje=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function k8(r,e){for(var t=zr({preserveDrawingBuffer:!0,antialias:!$2e},e),n=Qje.length,i=0;i<n;++i)try{var o=r.getContext(Qje[i],t);if(o)return o}catch(a){}return null}var wQt={STATIC_DRAW:V0,STREAM_DRAW:eFe,DYNAMIC_DRAW:tFe},bQt=function(){function r(e,t){this.array=null,this.type=e,ar(e===XE||e===JE,62),this.usage=t!==void 0?t:wQt.STATIC_DRAW}return r.prototype.ofSize=function(e){this.array=new(q8(this.type))(e)},r.prototype.fromArray=function(e){var t=q8(this.type);this.array=t.from?t.from(e):new t(e)},r.prototype.fromArrayBuffer=function(e){this.array=new(q8(this.type))(e)},r.prototype.getType=function(){return this.type},r.prototype.getArray=function(){return this.array},r.prototype.getUsage=function(){return this.usage},r.prototype.getSize=function(){return this.array?this.array.length:0},r}();function q8(r){switch(r){case XE:return Float32Array;case JE:return Uint32Array;default:return Float32Array;}}var vN=bQt;var SQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();function aFe(r,e,t){var n=t?r.LINEAR:r.NEAREST;r.bindTexture(r.TEXTURE_2D,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,n)}function EQt(r,e,t,n){aFe(r,e,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t)}function oFe(r,e,t,n,i,o){var a=r.getGL(),c,h;if(t instanceof Float32Array){c=a.FLOAT,r.getExtension("OES_texture_float");var d=r.getExtension("OES_texture_float_linear");h=d!==null}else c=a.UNSIGNED_BYTE,h=!0;aFe(a,e,o&&h);var v=t.byteLength/n[1],x=1;v%8===0?x=8:v%4===0?x=4:v%2===0&&(x=2);var S;switch(i){case 1:{S=a.LUMINANCE;break}case 2:{S=a.LUMINANCE_ALPHA;break}case 3:{S=a.RGB;break}case 4:{S=a.RGBA;break}default:throw new Error("Unsupported number of bands: ".concat(i));}var T=a.getParameter(a.UNPACK_ALIGNMENT);a.pixelStorei(a.UNPACK_ALIGNMENT,x),a.texImage2D(a.TEXTURE_2D,0,S,n[0],n[1],0,S,c,t),a.pixelStorei(a.UNPACK_ALIGNMENT,T)}var G0=null;function IQt(){var r=document.createElement("canvas");r.width=1,r.height=1,G0=r.getContext("2d")}var TQt=function(r){SQt(e,r);function e(t){var n=r.call(this)||this;n.tile,n.textures=[],n.handleTileChange_=n.handleTileChange_.bind(n),n.renderSize_=Bn(t.grid.getTileSize(t.tile.tileCoord[0])),n.gutter_=t.gutter||0,n.bandCount=NaN,n.helper_=t.helper;var i=new vN(XE,V0);return i.fromArray([0,1,1,1,1,0,0,0]),n.helper_.flushBufferData(i),n.coords=i,n.setTile(t.tile),n}return e.prototype.setTile=function(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(Pt.CHANGE,this.handleTileChange_),this.tile=t,this.textures.length=0,this.loaded=t.getState()===Ut.LOADED,this.loaded)this.uploadTile_();else{if(t instanceof xh){var n=t.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}t.addEventListener(Pt.CHANGE,this.handleTileChange_)}},e.prototype.uploadTile_=function(){var t=this.helper_,n=t.getGL(),i=this.tile;if(i instanceof xh||i instanceof U0){var o=n.createTexture();this.textures.push(o),this.bandCount=4,EQt(n,o,i.getImage(),i.interpolate);return}var a=i.getSize(),c=[a[0]+2*this.gutter_,a[1]+2*this.gutter_],h=i.getData(),d=h instanceof Float32Array,v=c[0]*c[1],x=d?Float32Array:Uint8Array,S=x.BYTES_PER_ELEMENT,T=h.byteLength/c[1];this.bandCount=Math.floor(T/S/c[0]);var L=Math.ceil(this.bandCount/4);if(L===1){var o=n.createTexture();this.textures.push(o),oFe(t,o,h,c,this.bandCount,i.interpolate);return}for(var k=new Array(L),R=0;R<L;++R){var o=n.createTexture();this.textures.push(o);var D=R<L-1?4:this.bandCount%4;k[R]=new x(v*D)}for(var j=0,B=0,$=c[0]*this.bandCount,ee=0;ee<c[1];++ee){for(var J=0;J<$;++J){var ie=h[B+J],ue=Math.floor(j/this.bandCount),le=J%this.bandCount,R=Math.floor(le/4),_e=k[R],D=_e.length/v,Re=le%4;_e[ue*D+Re]=ie,++j}B+=T/S}for(var R=0;R<L;++R){var o=this.textures[R],_e=k[R],D=_e.length/v;oFe(t,o,_e,c,D,i.interpolate)}},e.prototype.handleTileChange_=function(){this.tile.getState()===Ut.LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(Pt.CHANGE))},e.prototype.disposeInternal=function(){var t=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)t.deleteTexture(this.textures[n]);this.tile.removeEventListener(Pt.CHANGE,this.handleTileChange_)},e.prototype.getPixelData=function(t,n){if(!this.loaded)return null;var i=this.renderSize_[0],o=this.renderSize_[1],a=this.gutter_;if(this.tile instanceof $je){var c=this.tile.getSize(),h=c[0],d=c[1],v=h+2*a,x=d+2*a,S=a+Math.floor(h*(t/i)),T=a+Math.floor(d*(n/o)),L=this.tile.getData();if(L instanceof DataView){var k=L.byteLength/(v*x),R=k*(T*v+S),D=L.buffer.slice(R,R+k);return new DataView(D)}var j=this.bandCount*(T*v+S);return L.slice(j,j+this.bandCount)}G0||IQt(),G0.clearRect(0,0,1,1);var B=this.tile.getImage(),$=B.width,ee=B.height,J=$-2*a,ie=ee-2*a,ue=a+Math.floor(J*(t/i)),le=a+Math.floor(ie*(n/o)),_e;try{G0.drawImage(B,ue,le,1,1,0,0,1,1),_e=G0.getImageData(0,0,1,1).data}catch(Re){return G0=null,null}return _e},e}(ks),sFe=TQt;var QE={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};var AQt=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,CQt=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`,MQt=function(){function r(e){this.gl_=e.webGlContext;var t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer();var n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,e.vertexShader||AQt),t.compileShader(n);var i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,e.fragmentShader||CQt),t.compileShader(i),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,n),t.attachShader(this.renderTargetProgram_,i),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();var o=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(function(a){this.uniforms_.push({value:e.uniforms[a],location:t.getUniformLocation(this.renderTargetProgram_,a)})}.bind(this))}return r.prototype.getGL=function(){return this.gl_},r.prototype.init=function(e){var t=this.getGL(),n=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;var i=0,o=t.RGBA,a=0,c=t.RGBA,h=t.UNSIGNED_BYTE,d=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,i,o,n[0],n[1],a,c,h,d),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0)}},r.prototype.apply=function(e,t,n,i){var o=this.getGL(),a=e.size;if(o.bindFramebuffer(o.FRAMEBUFFER,t?t.getFrameBuffer():null),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this.renderTargetTexture_),!t){var c=tr(o.canvas);if(!e.renderTargets[c]){var h=o.getContextAttributes();h&&h.preserveDrawingBuffer&&(o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT)),e.renderTargets[c]=!0}}o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.bindBuffer(o.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),o.useProgram(this.renderTargetProgram_),o.enableVertexAttribArray(this.renderTargetAttribLocation_),o.vertexAttribPointer(this.renderTargetAttribLocation_,2,o.FLOAT,!1,0,0),o.uniform2f(this.renderTargetUniformLocation_,a[0],a[1]),o.uniform1i(this.renderTargetTextureLocation_,0);var d=e.layerStatesArray[e.layerIndex].opacity;o.uniform1f(this.renderTargetOpacityLocation_,d),this.applyUniforms(e),n&&n(o,e),o.drawArrays(o.TRIANGLES,0,6),i&&i(o,e)},r.prototype.getFrameBuffer=function(){return this.frameBuffer_},r.prototype.applyUniforms=function(e){var t=this.getGL(),n,i=1;this.uniforms_.forEach(function(o){if(n=typeof o.value=="function"?o.value(e):o.value,n instanceof HTMLCanvasElement||n instanceof ImageData)o.texture||(o.texture=t.createTexture()),t.activeTexture(t["TEXTURE".concat(i)]),t.bindTexture(t.TEXTURE_2D,o.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,n.width,n.height,0,t.UNSIGNED_BYTE,new Uint8Array(n.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.uniform1i(o.location,i++);else if(Array.isArray(n))switch(n.length){case 2:t.uniform2f(o.location,n[0],n[1]);return;case 3:t.uniform3f(o.location,n[0],n[1],n[2]);return;case 4:t.uniform4f(o.location,n[0],n[1],n[2],n[3]);return;default:return;}else typeof n=="number"&&t.uniform1f(o.location,n)})},r}(),j8=MQt;function gN(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function $0(r,e){return r[0]=e[0],r[1]=e[1],r[4]=e[2],r[5]=e[3],r[12]=e[4],r[13]=e[5],r}var RQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();var eI={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"},H0={UNSIGNED_BYTE:rFe,UNSIGNED_SHORT:nFe,UNSIGNED_INT:iFe,FLOAT:N8},yN={};function lFe(r){return"shared/"+r}var uFe=0;function PQt(){var r="unique/"+uFe;return uFe+=1,r}function OQt(r){var e=yN[r];if(!e){var t=document.createElement("canvas");t.style.position="absolute",t.style.left="0",e={users:0,canvas:t},yN[r]=e}return e.users+=1,e.canvas}function LQt(r){var e=yN[r];if(e&&(e.users-=1,!(e.users>0))){var t=e.canvas,n=k8(t),i=n.getExtension("WEBGL_lose_context");i&&i.loseContext(),delete yN[r]}}var DQt=function(r){RQt(e,r);function e(t){var n=r.call(this)||this,i=t||{};n.boundHandleWebGLContextLost_=n.handleWebGLContextLost.bind(n),n.boundHandleWebGLContextRestored_=n.handleWebGLContextRestored.bind(n),n.canvasCacheKey_=i.canvasCacheKey?lFe(i.canvasCacheKey):PQt(),n.canvas_=OQt(n.canvasCacheKey_),n.gl_=k8(n.canvas_),n.bufferCache_={},n.extensionCache_={},n.currentProgram_=null,n.canvas_.addEventListener(QE.LOST,n.boundHandleWebGLContextLost_),n.canvas_.addEventListener(QE.RESTORED,n.boundHandleWebGLContextRestored_),n.offsetRotateMatrix_=Di(),n.offsetScaleMatrix_=Di(),n.tmpMat4_=gN(),n.uniformLocations_={},n.attribLocations_={},n.uniforms_=[],i.uniforms&&n.setUniforms(i.uniforms);var o=n.getGL();return n.postProcessPasses_=i.postProcesses?i.postProcesses.map(function(a){return new j8({webGlContext:o,scaleRatio:a.scaleRatio,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,uniforms:a.uniforms})}):[new j8({webGlContext:o})],n.shaderCompileErrors_=null,n.startTime_=Date.now(),n}return e.prototype.setUniforms=function(t){this.uniforms_=[];for(var n in t)this.uniforms_.push({name:n,value:t[n]});this.uniformLocations_={}},e.prototype.canvasCacheKeyMatches=function(t){return this.canvasCacheKey_===lFe(t)},e.prototype.getExtension=function(t){if(t in this.extensionCache_)return this.extensionCache_[t];var n=this.gl_.getExtension(t);return this.extensionCache_[t]=n,n},e.prototype.bindBuffer=function(t){var n=this.getGL(),i=tr(t),o=this.bufferCache_[i];if(!o){var a=n.createBuffer();o={buffer:t,webGlBuffer:a},this.bufferCache_[i]=o}n.bindBuffer(t.getType(),o.webGlBuffer)},e.prototype.flushBufferData=function(t){var n=this.getGL();this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var n=this.getGL(),i=tr(t),o=this.bufferCache_[i];o&&!n.isContextLost()&&n.deleteBuffer(o.webGlBuffer),delete this.bufferCache_[i]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener(QE.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(QE.RESTORED,this.boundHandleWebGLContextRestored_),LQt(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},e.prototype.prepareDraw=function(t,n){var i=this.getGL(),o=this.getCanvas(),a=t.size,c=t.pixelRatio;o.width=a[0]*c,o.height=a[1]*c,o.style.width=a[0]+"px",o.style.height=a[1]+"px",i.useProgram(this.currentProgram_);for(var h=this.postProcessPasses_.length-1;h>=0;h--)this.postProcessPasses_[h].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,n,i){var o=this.getGL(),a=n.getSize();o.bindFramebuffer(o.FRAMEBUFFER,n.getFramebuffer()),o.viewport(0,0,a[0],a[1]),o.bindTexture(o.TEXTURE_2D,n.getTexture()),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,i?o.ZERO:o.ONE_MINUS_SRC_ALPHA),o.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,n){var i=this.getGL();this.getExtension("OES_element_index_uint");var o=i.UNSIGNED_INT,a=4,c=n-t,h=t*a;i.drawElements(i.TRIANGLES,c,o,h)},e.prototype.finalizeDraw=function(t,n,i){for(var o=0,a=this.postProcessPasses_.length;o<a;o++)o===a-1?this.postProcessPasses_[o].apply(t,null,n,i):this.postProcessPasses_[o].apply(t,this.postProcessPasses_[o+1])},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(t){var n=t.size,i=t.viewState.rotation,o=s0(this.offsetScaleMatrix_);dE(o,2/n[0],2/n[1]);var a=s0(this.offsetRotateMatrix_);i!==0&&hD(a,-i),this.setUniformMatrixValue(eI.OFFSET_SCALE_MATRIX,$0(this.tmpMat4_,o)),this.setUniformMatrixValue(eI.OFFSET_ROTATION_MATRIX,$0(this.tmpMat4_,a)),this.setUniformFloatValue(eI.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(eI.ZOOM,t.viewState.zoom),this.setUniformFloatValue(eI.RESOLUTION,t.viewState.resolution)},e.prototype.applyUniforms=function(t){var n=this.getGL(),i,o=0;this.uniforms_.forEach(function(a){if(i=typeof a.value=="function"?a.value(t):a.value,i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData){a.texture||(a.prevValue=void 0,a.texture=n.createTexture()),n.activeTexture(n["TEXTURE".concat(o)]),n.bindTexture(n.TEXTURE_2D,a.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var c=!(i instanceof HTMLImageElement)||i.complete;c&&a.prevValue!==i&&(a.prevValue=i,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,i)),n.uniform1i(this.getUniformLocation(a.name),o++)}else if(Array.isArray(i)&&i.length===6)this.setUniformMatrixValue(a.name,$0(this.tmpMat4_,i));else if(Array.isArray(i)&&i.length<=4)switch(i.length){case 2:n.uniform2f(this.getUniformLocation(a.name),i[0],i[1]);return;case 3:n.uniform3f(this.getUniformLocation(a.name),i[0],i[1],i[2]);return;case 4:n.uniform4f(this.getUniformLocation(a.name),i[0],i[1],i[2],i[3]);return;default:return;}else typeof i=="number"&&n.uniform1f(this.getUniformLocation(a.name),i)}.bind(this))},e.prototype.useProgram=function(t){if(t==this.currentProgram_)return!1;var n=this.getGL();return n.useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},!0},e.prototype.compileShader=function(t,n){var i=this.getGL(),o=i.createShader(n);return i.shaderSource(o,t),i.compileShader(o),o},e.prototype.getProgram=function(t,n){var i=this.getGL(),o=this.compileShader(t,i.FRAGMENT_SHADER),a=this.compileShader(n,i.VERTEX_SHADER),c=i.createProgram();if(i.attachShader(c,o),i.attachShader(c,a),i.linkProgram(c),!i.getShaderParameter(o,i.COMPILE_STATUS)){var h="Fragment shader compliation failed: ".concat(i.getShaderInfoLog(o));throw new Error(h)}if(i.deleteShader(o),!i.getShaderParameter(a,i.COMPILE_STATUS)){var h="Vertex shader compilation failed: ".concat(i.getShaderInfoLog(a));throw new Error(h)}if(i.deleteShader(a),!i.getProgramParameter(c,i.LINK_STATUS)){var h="GL program linking failed: ".concat(i.getShaderInfoLog(a));throw new Error(h)}return c},e.prototype.getUniformLocation=function(t){return this.uniformLocations_[t]===void 0&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]},e.prototype.getAttributeLocation=function(t){return this.attribLocations_[t]===void 0&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]},e.prototype.makeProjectionTransform=function(t,n){var i=t.size,o=t.viewState.rotation,a=t.viewState.resolution,c=t.viewState.center;return s0(n),oo(n,0,0,2/(a*i[0]),2/(a*i[1]),-o,-c[0],-c[1]),n},e.prototype.setUniformFloatValue=function(t,n){this.getGL().uniform1f(this.getUniformLocation(t),n)},e.prototype.setUniformFloatVec4=function(t,n){this.getGL().uniform4fv(this.getUniformLocation(t),n)},e.prototype.setUniformMatrixValue=function(t,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,n)},e.prototype.enableAttributeArray_=function(t,n,i,o,a){var c=this.getAttributeLocation(t);c<0||(this.getGL().enableVertexAttribArray(c),this.getGL().vertexAttribPointer(c,n,i,!1,o,a))},e.prototype.enableAttributes=function(t){for(var n=NQt(t),i=0,o=0;o<t.length;o++){var a=t[o];this.enableAttributeArray_(a.name,a.size,a.type||N8,n,i),i+=a.size*cFe(a.type)}},e.prototype.handleWebGLContextLost=function(){Ns(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,n,i){var o=this.getGL(),a=i||o.createTexture(),c=0,h=o.RGBA,d=0,v=o.RGBA,x=o.UNSIGNED_BYTE;return o.bindTexture(o.TEXTURE_2D,a),n?o.texImage2D(o.TEXTURE_2D,c,h,v,x,n):o.texImage2D(o.TEXTURE_2D,c,h,t[0],t[1],d,v,x,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),a},e}(md);function NQt(r){for(var e=0,t=0;t<r.length;t++){var n=r[t];e+=n.size*cFe(n.type)}return e}function cFe(r){switch(r){case H0.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case H0.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case H0.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case H0.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT;}}var fFe=DQt;var kQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();var qQt=function(r){kQt(e,r);function e(t,n){var i=r.call(this,t)||this,o=n||{};return i.inversePixelTransform_=Di(),i.pixelContext_=null,i.postProcesses_=o.postProcesses,i.uniforms_=o.uniforms,i.helper,t.addChangeListener(ln.MAP,i.removeHelper.bind(i)),i.dispatchPreComposeEvent=i.dispatchPreComposeEvent.bind(i),i.dispatchPostComposeEvent=i.dispatchPostComposeEvent.bind(i),i}return e.prototype.dispatchPreComposeEvent=function(t,n){var i=this.getLayer();if(i.hasListener(xo.PRECOMPOSE)){var o=new Td(xo.PRECOMPOSE,void 0,n,t);i.dispatchEvent(o)}},e.prototype.dispatchPostComposeEvent=function(t,n){var i=this.getLayer();if(i.hasListener(xo.POSTCOMPOSE)){var o=new Td(xo.POSTCOMPOSE,void 0,n,t);i.dispatchEvent(o)}},e.prototype.reset=function(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)},e.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},e.prototype.prepareFrame=function(t){if(this.getLayer().getRenderSource()){for(var n=!0,i=-1,o=void 0,a=0,c=t.layerStatesArray.length;a<c;a++){var h=t.layerStatesArray[a].layer,d=h.getRenderer();if(!(d instanceof e)){n=!0;continue}var v=h.getClassName();if((n||v!==o)&&(i+=1,n=!1),o=v,d===this)break}var x="map/"+t.mapId+"/group/"+i;(!this.helper||!this.helper.canvasCacheKeyMatches(x))&&(this.removeHelper(),this.helper=new fFe({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:x}),o&&(this.helper.getCanvas().className=o),this.afterHelperCreated())}return this.prepareFrameInternal(t)},e.prototype.afterHelperCreated=function(){},e.prototype.prepareFrameInternal=function(t){return!0},e.prototype.disposeInternal=function(){this.removeHelper(),r.prototype.disposeInternal.call(this)},e.prototype.dispatchRenderEvent_=function(t,n,i){var o=this.getLayer();if(o.hasListener(t)){oo(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);var a=new Td(t,this.inversePixelTransform_,i,n);o.dispatchEvent(a)}},e.prototype.preRender=function(t,n){this.dispatchRenderEvent_(xo.PRERENDER,t,n)},e.prototype.postRender=function(t,n){this.dispatchRenderEvent_(xo.POSTRENDER,t,n)},e.prototype.getDataAtPixel=function(t,n,i){var o=On([n.pixelRatio,0,0,n.pixelRatio,0,0],t.slice()),a=this.helper.getGL();if(!a)return null;var c=this.getLayer(),h=c.getExtent();if(h){var d=On(n.pixelToCoordinateTransform,t.slice());if(!es(h,d))return null}var v=a.getContextAttributes();if(!v||!v.preserveDrawingBuffer)return new Uint8Array;var x=Math.round(o[0]),S=Math.round(o[1]),T=this.pixelContext_;if(!T){var L=document.createElement("canvas");L.width=1,L.height=1,T=L.getContext("2d"),this.pixelContext_=T}T.clearRect(0,0,1,1);var k;try{T.drawImage(a.canvas,x,S,1,1,0,0,1,1),k=T.getImageData(0,0,1,1).data}catch(R){return k}return k[3]===0?null:k},e}(HD);var hFe=qQt;function W0(r,e,t,n){return n!==void 0?(n[0]=r,n[1]=e,n[2]=t,n):[r,e,t]}function Nv(r,e,t){return r+"/"+e+"/"+t}function Nd(r){return Nv(r[0],r[1],r[2])}function pFe(r){return r.split("/").map(Number)}function _N(r){return(r[1]<<r[0])+r[2]}function dFe(r,e){var t=r[0],n=r[1],i=r[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;var o=e.getFullTileRange(t);return o?o.containsXY(n,i):!0}var jQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Or={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},tI={TEXTURE_COORD:"a_textureCoord"},FQt=[{name:tI.TEXTURE_COORD,size:2,type:H0.FLOAT}],zQt={};function BQt(r){return 2*(1-1/(r+1))-1}function mFe(r,e,t){t in r||(r[t]=[]),r[t].push(e)}function F8(r,e){var t=r.layerStatesArray[r.layerIndex];t.extent&&(e=ou(e,Pa(t.extent,r.viewState.projection)));var n=t.layer.getRenderSource();if(!n.getWrapX()){var i=n.getTileGridForProjection(r.viewState.projection).getExtent();i&&(e=ou(e,i))}return e}function z8(r,e){return"".concat(r.getKey(),",").concat(Nd(e))}var UQt=function(r){jQt(e,r);function e(t,n){var i=r.call(this,t,{uniforms:n.uniforms})||this;i.renderComplete=!1,i.tileTransform_=Di(),i.tempMat4_=gN(),i.tempTileRange_=new z0(0,0,0,0),i.tempTileCoord_=W0(0,0,0),i.tempSize_=[0,0],i.program_,i.vertexShader_=n.vertexShader,i.fragmentShader_=n.fragmentShader,i.indices_=new vN(JE,V0),i.indices_.fromArray([0,1,3,1,2,3]);var o=n.cacheSize!==void 0?n.cacheSize:512;return i.tileTextureCache_=new dN(o),i.paletteTextures_=n.paletteTextures||[],i.frameState_=null,i}return e.prototype.reset=function(t){r.prototype.reset.call(this,{uniforms:t.uniforms}),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.paletteTextures_=t.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))},e.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)},e.prototype.isDrawableTile_=function(t){var n=this.getLayer(),i=t.getState(),o=n.getUseInterimTilesOnError();return i==Ut.LOADED||i==Ut.EMPTY||i==Ut.ERROR&&!o},e.prototype.prepareFrameInternal=function(t){var n=this.getLayer(),i=n.getRenderSource();return!i||Sv(F8(t,t.extent))?!1:i.getState()==="ready"},e.prototype.enqueueTiles=function(t,n,i,o){var a=t.viewState,c=this.getLayer(),h=c.getRenderSource(),d=h.getTileGridForProjection(a.projection),v=h.getGutterForProjection(a.projection),x=tr(h);x in t.wantedTiles||(t.wantedTiles[x]={});for(var S=t.wantedTiles[x],T=this.tileTextureCache_,L=Math.max(i-c.getPreload(),d.getMinZoom(),c.getMinZoom()),k=i;k>=L;--k)for(var R=d.getTileRangeForExtentAndZ(n,k,this.tempTileRange_),D=d.getResolution(k),j=R.minX;j<=R.maxX;++j)for(var B=R.minY;B<=R.maxY;++B){var $=W0(k,j,B,this.tempTileCoord_),ee=z8(h,$),J=void 0,ie=void 0;if(T.containsKey(ee)&&(J=T.get(ee),ie=J.tile),!J||J.tile.key!==h.getKey())if(ie=h.getTile(k,j,B,t.pixelRatio,a.projection),!J)J=new sFe({tile:ie,grid:d,helper:this.helper,gutter:v}),T.set(ee,J);else if(this.isDrawableTile_(ie))J.setTile(ie);else{var ue=ie.getInterimTile();J.setTile(ue)}mFe(o,J,k);var le=ie.getKey();S[le]=!0,ie.getState()===Ut.IDLE&&(t.tileQueue.isKeyQueued(le)||t.tileQueue.enqueue([ie,x,d.getTileCoordCenter($),D]))}},e.prototype.renderFrame=function(t){this.frameState_=t,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,t);var i=t.viewState,o=this.getLayer(),a=o.getRenderSource(),c=a.getTileGridForProjection(i.projection),h=a.getGutterForProjection(i.projection),d=F8(t,t.extent),v=c.getZForResolution(i.resolution,a.zDirection),x={};if(t.nextExtent){var S=c.getZForResolution(i.nextResolution,a.zDirection),T=F8(t,t.nextExtent);this.enqueueTiles(t,T,S,x)}this.enqueueTiles(t,d,v,x);for(var L={},k=tr(this),R=t.time,D=!1,j=x[v],B=0,$=j.length;B<$;++B){var ee=j[B],J=ee.tile,ie=J.tileCoord;if(ee.loaded){var ue=J.getAlpha(k,R);if(ue===1){J.endTransition(k);continue}D=!0;var le=Nd(ie);L[le]=ue}this.renderComplete=!1;var _e=this.findAltTiles_(c,ie,v+1,x);if(!_e)for(var Re=c.getMinZoom(),ze=v-1;ze>=Re;--ze){var ke=this.findAltTiles_(c,ie,ze,x);if(ke)break}}this.helper.useProgram(this.program_),this.helper.prepareDraw(t,!D);for(var Ve=Object.keys(x).map(Number).sort(pl),We=i.center[0],Te=i.center[1],Se=0,Ae=Ve.length;Se<Ae;++Se)for(var $e=Ve[Se],Ge=c.getResolution($e),Ke=Bn(c.getTileSize($e),this.tempSize_),Pe=c.getOrigin($e),at=Ke[0]+2*h,Tt=Ke[1]+2*h,Le=at/Tt,Ye=(We-Pe[0])/(Ke[0]*Ge),Fe=(Pe[1]-Te)/(Ke[1]*Ge),Ze=i.resolution/Ge,tt=BQt($e),Qe=x[$e],B=0,$=Qe.length;B<$;++B){var ee=Qe[B];if(ee.loaded){var J=ee.tile,ie=J.tileCoord,le=Nd(ie),Dt=ie[1],Kt=ie[2];s0(this.tileTransform_),dE(this.tileTransform_,2/(t.size[0]*Ze/at),-2/(t.size[1]*Ze/at)),hD(this.tileTransform_,i.rotation),dE(this.tileTransform_,1,1/Le),J2e(this.tileTransform_,(Ke[0]*(Dt-Ye)-h)/at,(Ke[1]*(Kt-Fe)-h)/Tt),this.helper.setUniformMatrixValue(Or.TILE_TRANSFORM,$0(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(ee.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(FQt);for(var _t=0;_t<ee.textures.length;){var be="TEXTURE"+_t,jt="".concat(Or.TILE_TEXTURE_ARRAY,"[").concat(_t,"]");n.activeTexture(n[be]),n.bindTexture(n.TEXTURE_2D,ee.textures[_t]),n.uniform1i(this.helper.getUniformLocation(jt),_t),++_t}for(var Qt=0;Qt<this.paletteTextures_.length;++Qt){var Ft=this.paletteTextures_[Qt];n.activeTexture(n["TEXTURE"+_t]);var nr=Ft.getTexture(n);n.bindTexture(n.TEXTURE_2D,nr),n.uniform1i(this.helper.getUniformLocation(Ft.name),_t),++_t}var ue=le in L?L[le]:1;ue<1&&(t.animate=!0),this.helper.setUniformFloatValue(Or.TRANSITION_ALPHA,ue),this.helper.setUniformFloatValue(Or.DEPTH,tt),this.helper.setUniformFloatValue(Or.TEXTURE_PIXEL_WIDTH,at),this.helper.setUniformFloatValue(Or.TEXTURE_PIXEL_HEIGHT,Tt),this.helper.setUniformFloatValue(Or.TEXTURE_RESOLUTION,Ge),this.helper.setUniformFloatValue(Or.TEXTURE_ORIGIN_X,Pe[0]+Dt*Ke[0]*Ge-h*Ge),this.helper.setUniformFloatValue(Or.TEXTURE_ORIGIN_Y,Pe[1]-Kt*Ke[1]*Ge+h*Ge);var or=d;h>0&&(or=c.getTileCoordExtent(ie),ou(or,d,or)),this.helper.setUniformFloatVec4(Or.RENDER_EXTENT,or),this.helper.setUniformFloatValue(Or.RESOLUTION,i.resolution),this.helper.setUniformFloatValue(Or.ZOOM,i.zoom),this.helper.drawElements(0,this.indices_.getSize())}}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var Wt=this.helper.getCanvas(),lr=this.tileTextureCache_;lr.canExpireCache();){var ee=lr.pop();ee.dispose()}var Pr=function(en,ai){a.expireCache(ai.viewState.projection,zQt)};return t.postRenderFunctions.push(Pr),this.postRender(n,t),Wt},e.prototype.getData=function(t){var n=this.helper.getGL();if(!n)return null;var i=this.frameState_;if(!i)return null;var o=this.getLayer(),a=On(i.pixelToCoordinateTransform,t.slice()),c=i.viewState,h=o.getExtent();if(h&&!es(Pa(h,c.projection),a))return null;var d=o.getSources(ea([a]),c.resolution),v,x,S;for(v=d.length-1;v>=0;--v)if(x=d[v],x.getState()==="ready"){if(S=x.getTileGridForProjection(c.projection),x.getWrapX())break;var T=S.getExtent();if(!T||es(T,a))break}if(v<0)return null;for(var L=this.tileTextureCache_,k=S.getZForResolution(c.resolution);k>=S.getMinZoom();--k){var R=S.getTileCoordForCoordAndZ(a,k),D=z8(x,R);if(L.containsKey(D)){var j=L.get(D);if(j.loaded){var B=S.getOrigin(k),$=Bn(S.getTileSize(k)),ee=S.getResolution(k),J=(a[0]-B[0])/ee-R[1]*$[0],ie=(B[1]-a[1])/ee-R[2]*$[1];return j.getPixelData(J,ie)}}}return null},e.prototype.findAltTiles_=function(t,n,i,o){var a=t.getTileRangeForTileCoordAndZ(n,i,this.tempTileRange_);if(!a)return!1;for(var c=!0,h=this.tileTextureCache_,d=this.getLayer().getRenderSource(),v=a.minX;v<=a.maxX;++v)for(var x=a.minY;x<=a.maxY;++x){var S=z8(d,[i,v,x]),T=!1;if(h.containsKey(S)){var L=h.get(S);L.loaded&&(mFe(o,L,i),T=!0)}T||(c=!1)}return c},e.prototype.removeHelper=function(){if(this.helper){var t=this.tileTextureCache_;t.forEach(function(n){return n.dispose()}),t.clear()}r.prototype.removeHelper.call(this)},e.prototype.disposeInternal=function(){var t=this.helper;if(t){var n=t.getGL();n.deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)}r.prototype.disposeInternal.call(this),delete this.indices_,delete this.tileTextureCache_,delete this.frameState_},e}(hFe),vFe=UQt;var VQt=function(){function r(e,t){this.name=e,this.data=t,this.texture_=null}return r.prototype.getTexture=function(e){if(!this.texture_){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=t}return this.texture_},r}(),gFe=VQt;var Yt={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0},$r={};function Xc(r){if(typeof r=="number")return Yt.NUMBER;if(typeof r=="boolean")return Yt.BOOLEAN;if(typeof r=="string")return Jke(r)?Yt.COLOR|Yt.STRING:Yt.STRING;if(!Array.isArray(r))throw new Error("Unhandled value type: ".concat(JSON.stringify(r)));var e=r,t=e.every(function(i){return typeof i=="number"});if(t)return e.length===3||e.length===4?Yt.COLOR|Yt.NUMBER_ARRAY:Yt.NUMBER_ARRAY;if(typeof e[0]!="string")throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(e)));var n=$r[e[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return n.getReturnType(e.slice(1))}function GQt(r){return xD(r)%1===0}function xN(r){var e=r.toString();return e.indexOf(".")===-1?e+".0":e}function yFe(r){if(r.length<2||r.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(r.length,"(").concat(r.map(xN).join(", "),")")}function $Qt(r){var e=uh(r).slice();return e.length<4&&e.push(1),yFe(e.map(function(t,n){return n<3?t/255:t}))}function U8(r,e){return r.stringLiteralsMap[e]===void 0&&(r.stringLiteralsMap[e]=Object.keys(r.stringLiteralsMap).length),r.stringLiteralsMap[e]}function HQt(r,e){return xN(U8(r,e))}function rr(r,e,t){if(Array.isArray(e)&&typeof e[0]=="string"){var n=$r[e[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return n.toGlsl(r,e.slice(1),t)}var i=Xc(e);if((i&Yt.NUMBER)>0)return xN(e);if((i&Yt.BOOLEAN)>0)return e.toString();if((i&Yt.STRING)>0&&(t===void 0||t==Yt.STRING))return HQt(r,e.toString());if((i&Yt.COLOR)>0&&(t===void 0||t==Yt.COLOR))return $Qt(e);if((i&Yt.NUMBER_ARRAY)>0)return yFe(e);throw new Error("Unexpected expression ".concat(e," (expected type ").concat(t,")"))}function _Fe(r){if(!(Xc(r)&Yt.NUMBER))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(r)," instead"))}function Xi(r){for(var e=0;e<r.length;e++)_Fe(r[e])}function xFe(r){if(!(Xc(r)&Yt.STRING))throw new Error("A string value was expected, got ".concat(JSON.stringify(r)," instead"))}function V8(r){if(!(Xc(r)&Yt.BOOLEAN))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(r)," instead"))}function oi(r,e){if(r.length!==e)throw new Error("Exactly ".concat(e," arguments were expected, got ").concat(r.length," instead"))}function kd(r,e){if(r.length<e)throw new Error("At least ".concat(e," arguments were expected, got ").concat(r.length," instead"))}function wN(r,e){if(r.length>e)throw new Error("At most ".concat(e," arguments were expected, got ").concat(r.length," instead"))}function wFe(r){if(r.length%2!==0)throw new Error("An even amount of arguments was expected, got ".concat(r," instead"))}function WQt(r){if(r.length%2===0)throw new Error("An odd amount of arguments was expected, got ".concat(r," instead"))}function G8(r,e){if(!GQt(e))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(r)))}$r.get={getReturnType:function(r){return Yt.ANY},toGlsl:function(r,e){oi(e,1),xFe(e[0]);var t=e[0].toString();r.attributes.indexOf(t)===-1&&r.attributes.push(t);var n=r.inFragmentShader?"v_":"a_";return n+t}};function $8(r){return"u_var_"+r}$r.var={getReturnType:function(r){return Yt.ANY},toGlsl:function(r,e){oi(e,1),xFe(e[0]);var t=e[0].toString();return r.variables.indexOf(t)===-1&&r.variables.push(t),$8(t)}};var H8="u_paletteTextures";$r.palette={getReturnType:function(r){return Yt.COLOR},toGlsl:function(r,e){oi(e,2),_Fe(e[0]);var t=rr(r,e[0]),n=e[1];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var i=n.length,o=new Uint8Array(i*4),a=0;a<i;a++){var c=n[a],h=void 0;if(typeof c=="string")h=ZW(c);else{if(!Array.isArray(c))throw new Error("The second argument of palette must be an array of strings or colors");var d=c.length;if(d===4)h=c;else{if(d!==3)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(d));h=[c[0],c[1],c[2],1]}}var v=a*4;o[v]=h[0],o[v+1]=h[1],o[v+2]=h[2],o[v+3]=h[3]*255}r.paletteTextures||(r.paletteTextures=[]);var x="".concat(H8,"[").concat(r.paletteTextures.length,"]"),S=new gFe(x,o);return r.paletteTextures.push(S),"texture2D(".concat(x,", vec2((").concat(t," + 0.5) / ").concat(i,".0, 0.5))")}};var B8="getBandValue";$r.band={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){kd(e,1),wN(e,3);var t=e[0];if(!(B8 in r.functions)){for(var n="",i=r.bandCount||1,o=0;o<i;o++){var a=Math.floor(o/4),c=o%4;c===i-1&&c===1&&(c=3);var h="".concat(Or.TILE_TEXTURE_ARRAY,"[").concat(a,"]");n+=`
          if (band == `.concat(o+1,`.0) {
            return texture2D(`).concat(h,", v_textureCoord + vec2(dx, dy))[").concat(c,`];
          }
        `)}r.functions[B8]=`
        float getBandValue(float band, float xOffset, float yOffset) {
          float dx = xOffset / `.concat(Or.TEXTURE_PIXEL_WIDTH,`;
          float dy = yOffset / `).concat(Or.TEXTURE_PIXEL_HEIGHT,`;
          `).concat(n,`
        }
      `)}var d=rr(r,t),v=rr(r,e[1]||0),x=rr(r,e[2]||0);return"".concat(B8,"(").concat(d,", ").concat(v,", ").concat(x,")")}};$r.time={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){return oi(e,0),"u_time"}};$r.zoom={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){return oi(e,0),"u_zoom"}};$r.resolution={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){return oi(e,0),"u_resolution"}};$r["*"]={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){return oi(e,2),Xi(e),"(".concat(rr(r,e[0])," * ").concat(rr(r,e[1]),")")}};$r["/"]={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){return oi(e,2),Xi(e),"(".concat(rr(r,e[0])," / ").concat(rr(r,e[1]),")")}};$r["+"]={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){return oi(e,2),Xi(e),"(".concat(rr(r,e[0])," + ").concat(rr(r,e[1]),")")}};$r["-"]={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){return oi(e,2),Xi(e),"(".concat(rr(r,e[0])," - ").concat(rr(r,e[1]),")")}};$r.clamp={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){oi(e,3),Xi(e);var t=rr(r,e[1]),n=rr(r,e[2]);return"clamp(".concat(rr(r,e[0]),", ").concat(t,", ").concat(n,")")}};$r["%"]={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){return oi(e,2),Xi(e),"mod(".concat(rr(r,e[0]),", ").concat(rr(r,e[1]),")")}};$r["^"]={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){return oi(e,2),Xi(e),"pow(".concat(rr(r,e[0]),", ").concat(rr(r,e[1]),")")}};$r.abs={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){return oi(e,1),Xi(e),"abs(".concat(rr(r,e[0]),")")}};$r.floor={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){return oi(e,1),Xi(e),"floor(".concat(rr(r,e[0]),")")}};$r.round={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){return oi(e,1),Xi(e),"floor(".concat(rr(r,e[0])," + 0.5)")}};$r.ceil={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){return oi(e,1),Xi(e),"ceil(".concat(rr(r,e[0]),")")}};$r.sin={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){return oi(e,1),Xi(e),"sin(".concat(rr(r,e[0]),")")}};$r.cos={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){return oi(e,1),Xi(e),"cos(".concat(rr(r,e[0]),")")}};$r.atan={getReturnType:function(r){return Yt.NUMBER},toGlsl:function(r,e){return kd(e,1),wN(e,2),Xi(e),e.length===2?"atan(".concat(rr(r,e[0]),", ").concat(rr(r,e[1]),")"):"atan(".concat(rr(r,e[0]),")")}};$r[">"]={getReturnType:function(r){return Yt.BOOLEAN},toGlsl:function(r,e){return oi(e,2),Xi(e),"(".concat(rr(r,e[0])," > ").concat(rr(r,e[1]),")")}};$r[">="]={getReturnType:function(r){return Yt.BOOLEAN},toGlsl:function(r,e){return oi(e,2),Xi(e),"(".concat(rr(r,e[0])," >= ").concat(rr(r,e[1]),")")}};$r["<"]={getReturnType:function(r){return Yt.BOOLEAN},toGlsl:function(r,e){return oi(e,2),Xi(e),"(".concat(rr(r,e[0])," < ").concat(rr(r,e[1]),")")}};$r["<="]={getReturnType:function(r){return Yt.BOOLEAN},toGlsl:function(r,e){return oi(e,2),Xi(e),"(".concat(rr(r,e[0])," <= ").concat(rr(r,e[1]),")")}};function bFe(r){return{getReturnType:function(e){return Yt.BOOLEAN},toGlsl:function(e,t){oi(t,2);for(var n=Yt.ANY,i=0;i<t.length;i++)n&=Xc(t[i]);if(n===Yt.NONE)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(t)," instead"));return n&=~Yt.COLOR,"(".concat(rr(e,t[0],n)," ").concat(r," ").concat(rr(e,t[1],n),")")}}}$r["=="]=bFe("==");$r["!="]=bFe("!=");$r["!"]={getReturnType:function(r){return Yt.BOOLEAN},toGlsl:function(r,e){return oi(e,1),V8(e[0]),"(!".concat(rr(r,e[0]),")")}};function SFe(r){return{getReturnType:function(e){return Yt.BOOLEAN},toGlsl:function(e,t){kd(t,2);for(var n=0;n<t.length;n++)V8(t[n]);var i="";return i=t.map(function(o){return rr(e,o)}).join(" ".concat(r," ")),i="(".concat(i,")"),i}}}$r.all=SFe("&&");$r.any=SFe("||");$r.between={getReturnType:function(r){return Yt.BOOLEAN},toGlsl:function(r,e){oi(e,3),Xi(e);var t=rr(r,e[1]),n=rr(r,e[2]),i=rr(r,e[0]);return"(".concat(i," >= ").concat(t," && ").concat(i," <= ").concat(n,")")}};$r.array={getReturnType:function(r){return Yt.NUMBER_ARRAY},toGlsl:function(r,e){kd(e,2),wN(e,4),Xi(e);var t=e.map(function(n){return rr(r,n,Yt.NUMBER)});return"vec".concat(e.length,"(").concat(t.join(", "),")")}};$r.color={getReturnType:function(r){return Yt.COLOR},toGlsl:function(r,e){kd(e,3),wN(e,4),Xi(e);var t=e;e.length===3&&t.push(1);var n=e.map(function(i,o){return rr(r,i,Yt.NUMBER)+(o<3?" / 255.0":"")});return"vec".concat(e.length,"(").concat(n.join(", "),")")}};$r.interpolate={getReturnType:function(r){for(var e=Yt.COLOR|Yt.NUMBER,t=3;t<r.length;t+=2)e=e&Xc(r[t]);return e},toGlsl:function(r,e,t){wFe(e),kd(e,6);var n=e[0],i;switch(n[0]){case"linear":i=1;break;case"exponential":i=n[1];break;default:i=null;}if(!i)throw new Error("Invalid interpolation type for \"interpolate\" operator, received: ".concat(JSON.stringify(n)));var o=t!==void 0?t:Yt.ANY,a=$r.interpolate.getReturnType(e)&o;G8(e,a);for(var c=rr(r,e[1]),h=xN(i),d="",v=2;v<e.length-2;v+=2){var x=rr(r,e[v]),S=d||rr(r,e[v+1],a),T=rr(r,e[v+2]),L=rr(r,e[v+3],a);d="mix(".concat(S,", ").concat(L,", pow(clamp((").concat(c," - ").concat(x,") / (").concat(T," - ").concat(x,"), 0.0, 1.0), ").concat(h,"))")}return d}};$r.match={getReturnType:function(r){for(var e=Yt.ANY,t=2;t<r.length;t+=2)e=e&Xc(r[t]);return e=e&Xc(r[r.length-1]),e},toGlsl:function(r,e,t){wFe(e),kd(e,4);var n=t!==void 0?t:Yt.ANY,i=$r.match.getReturnType(e)&n;G8(e,i);for(var o=rr(r,e[0]),a=rr(r,e[e.length-1],i),c=null,h=e.length-3;h>=1;h-=2){var d=rr(r,e[h]),v=rr(r,e[h+1],i);c="(".concat(o," == ").concat(d," ? ").concat(v," : ").concat(c||a,")")}return c}};$r.case={getReturnType:function(r){for(var e=Yt.ANY,t=1;t<r.length;t+=2)e=e&Xc(r[t]);return e=e&Xc(r[r.length-1]),e},toGlsl:function(r,e,t){WQt(e),kd(e,3);var n=t!==void 0?t:Yt.ANY,i=$r.case.getReturnType(e)&n;G8(e,i);for(var o=0;o<e.length-1;o+=2)V8(e[o]);for(var a=rr(r,e[e.length-1],i),c=null,o=e.length-3;o>=0;o-=2){var h=rr(r,e[o]),d=rr(r,e[o+1],i);c="(".concat(h," ? ").concat(d," : ").concat(c||a,")")}return c}};var ZQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();function EFe(r,e){var t=`
    attribute vec2 `.concat(tI.TEXTURE_COORD,`;
    uniform mat4 `).concat(Or.TILE_TRANSFORM,`;
    uniform float `).concat(Or.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(Or.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(Or.TEXTURE_RESOLUTION,`;
    uniform float `).concat(Or.TEXTURE_ORIGIN_X,`;
    uniform float `).concat(Or.TEXTURE_ORIGIN_Y,`;
    uniform float `).concat(Or.DEPTH,`;

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = `).concat(tI.TEXTURE_COORD,`;
      v_mapCoord = vec2(
        `).concat(Or.TEXTURE_ORIGIN_X," + ").concat(Or.TEXTURE_RESOLUTION," * ").concat(Or.TEXTURE_PIXEL_WIDTH,` * v_textureCoord[0],
        `).concat(Or.TEXTURE_ORIGIN_Y," - ").concat(Or.TEXTURE_RESOLUTION," * ").concat(Or.TEXTURE_PIXEL_HEIGHT,` * v_textureCoord[1]
      );
      gl_Position = `).concat(Or.TILE_TRANSFORM," * vec4(").concat(tI.TEXTURE_COORD,", ").concat(Or.DEPTH,`, 1.0);
    }
  `),n={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:e},i=[];if(r.color!==void 0){var o=rr(n,r.color,Yt.COLOR);i.push("color = ".concat(o,";"))}if(r.contrast!==void 0){var a=rr(n,r.contrast,Yt.NUMBER);i.push("color.rgb = clamp((".concat(a," + 1.0) * color.rgb - (").concat(a," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(r.exposure!==void 0){var c=rr(n,r.exposure,Yt.NUMBER);i.push("color.rgb = clamp((".concat(c," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(r.saturation!==void 0){var h=rr(n,r.saturation,Yt.NUMBER);i.push(`
      float saturation = `.concat(h,` + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `))}if(r.gamma!==void 0){var d=rr(n,r.gamma,Yt.NUMBER);i.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(d,"));"))}if(r.brightness!==void 0){var v=rr(n,r.brightness,Yt.NUMBER);i.push("color.rgb = clamp(color.rgb + ".concat(v,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var x={},S=n.variables.length;if(S>1&&!r.variables)throw new Error("Missing variables in style (expected ".concat(n.variables,")"));for(var T=function(B){var $=n.variables[B];if(!($ in r.variables))throw new Error("Missing '".concat($,"' in style variables"));var ee=$8($);x[ee]=function(){var J=r.variables[$];return typeof J=="string"&&(J=U8(n,J)),J!==void 0?J:-9999999}},L=0;L<S;++L)T(L);var k=Object.keys(x).map(function(B){return"uniform float ".concat(B,";")}),R=Math.ceil(e/4);k.push("uniform sampler2D ".concat(Or.TILE_TEXTURE_ARRAY,"[").concat(R,"];")),n.paletteTextures&&k.push("uniform sampler2D ".concat(H8,"[").concat(n.paletteTextures.length,"];"));var D=Object.keys(n.functions).map(function(B){return n.functions[B]}),j=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 `.concat(Or.RENDER_EXTENT,`;
    uniform float `).concat(Or.TRANSITION_ALPHA,`;
    uniform float `).concat(Or.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(Or.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(Or.RESOLUTION,`;
    uniform float `).concat(Or.ZOOM,`;

    `).concat(k.join(`
`),`

    `).concat(D.join(`
`),`

    void main() {
      if (
        v_mapCoord[0] < `).concat(Or.RENDER_EXTENT,`[0] ||
        v_mapCoord[1] < `).concat(Or.RENDER_EXTENT,`[1] ||
        v_mapCoord[0] > `).concat(Or.RENDER_EXTENT,`[2] ||
        v_mapCoord[1] > `).concat(Or.RENDER_EXTENT,`[3]
      ) {
        discard;
      }

      vec4 color = texture2D(`).concat(Or.TILE_TEXTURE_ARRAY,`[0],  v_textureCoord);

      `).concat(i.join(`
`),`

      if (color.a == 0.0) {
        discard;
      }

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= `).concat(Or.TRANSITION_ALPHA,`;
    }`);return{vertexShader:t,fragmentShader:j,uniforms:x,paletteTextures:n.paletteTextures}}var IFe=function(r){ZQt(e,r);function e(t){var n=this,i=t?zr({},t):{},o=i.style||{};delete i.style;var a=i.cacheSize;return delete i.cacheSize,n=r.call(this,i)||this,n.sources_=i.sources,n.renderedSource_=null,n.renderedResolution_=NaN,n.style_=o,n.cacheSize_=a,n.styleVariables_=n.style_.variables||{},n.addChangeListener(ln.SOURCE,n.handleSourceUpdate_),n}return e.prototype.getSources=function(t,n){var i=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(t,n):this.sources_:i?[i]:[]},e.prototype.getRenderSource=function(){return this.renderedSource_||this.getSource()},e.prototype.getSourceState=function(){var t=this.getRenderSource();return t?t.getState():"undefined"},e.prototype.handleSourceUpdate_=function(){this.getSource()&&this.setStyle(this.style_)},e.prototype.getSourceBandCount_=function(){var t=Number.MAX_SAFE_INTEGER,n=this.getSources([-t,-t,t,t],t);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4},e.prototype.createRenderer=function(){var t=EFe(this.style_,this.getSourceBandCount_());return new vFe(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.cacheSize_,paletteTextures:t.paletteTextures})},e.prototype.renderSources=function(t,n){for(var i=this.getRenderer(),o,a=0,c=n.length;a<c;++a)this.renderedSource_=n[a],i.prepareFrame(t)&&(o=i.renderFrame(t));return o},e.prototype.render=function(t,n){var i=this;this.rendered=!0;for(var o=t.viewState,a=this.getSources(t.extent,o.resolution),c=!0,h=function(T,L){var k=a[T],R=k.getState();if(R=="loading"){var D=function(){k.getState()=="ready"&&(k.removeEventListener("change",D),i.changed())};k.addEventListener("change",D)}c=c&&R=="ready"},d=0,v=a.length;d<v;++d)h(d,v);var x=this.renderSources(t,a);if(this.getRenderer().renderComplete&&c)return this.renderedResolution_=o.resolution,x;if(this.renderedResolution_>.5*o.resolution){var S=this.getSources(t.extent,this.renderedResolution_).filter(function(T){return!a.includes(T)});if(S.length>0)return this.renderSources(t,S)}return x},e.prototype.setStyle=function(t){this.styleVariables_=t.variables||{},this.style_=t;var n=EFe(this.style_,this.getSourceBandCount_()),i=this.getRenderer();i.reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()},e.prototype.updateStyleVariables=function(t){zr(this.styleVariables_,t),this.changed()},e}(pN);IFe.prototype.dispose;var TFe=IFe;var YQt=[0,0,0],qd=5,KQt=function(){function r(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ar(j2e(this.resolutions_,function(a,c){return c-a},!0),17);var t;if(!e.origins){for(var n=0,i=this.resolutions_.length-1;n<i;++n)if(!t)t=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ar(this.origins_.length==this.resolutions_.length,20));var o=e.extent;o!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=au(o)),ar(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ar(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Dd,ar(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=o!==void 0?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(a,c){var h=new z0(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(o){var d=this.getTileRangeForExtentAndZ(o,c);h.minX=Math.max(d.minX,h.minX),h.maxX=Math.min(d.maxX,h.maxX),h.minY=Math.max(d.minY,h.minY),h.maxY=Math.min(d.maxY,h.maxY)}return h},this):o&&this.calculateTileRanges_(o)}return r.prototype.forEachTileCoord=function(e,t,n){for(var i=this.getTileRangeForExtentAndZ(e,t),o=i.minX,a=i.maxX;o<=a;++o)for(var c=i.minY,h=i.maxY;c<=h;++c)n([t,o,c])},r.prototype.forEachTileCoordParentTileRange=function(e,t,n,i){var o,a,c,h=null,d=e[0]-1;for(this.zoomFactor_===2?(a=e[1],c=e[2]):h=this.getTileCoordExtent(e,i);d>=this.minZoom;){if(this.zoomFactor_===2?(a=Math.floor(a/2),c=Math.floor(c/2),o=Dv(a,a,c,c,n)):o=this.getTileRangeForExtentAndZ(h,d,n),t(d,o))return!0;--d}return!1},r.prototype.getExtent=function(){return this.extent_},r.prototype.getMaxZoom=function(){return this.maxZoom},r.prototype.getMinZoom=function(){return this.minZoom},r.prototype.getOrigin=function(e){return this.origin_?this.origin_:this.origins_[e]},r.prototype.getResolution=function(e){return this.resolutions_[e]},r.prototype.getResolutions=function(){return this.resolutions_},r.prototype.getTileCoordChildTileRange=function(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){var i=e[1]*2,o=e[2]*2;return Dv(i,i+1,o,o+1,t)}var a=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e[0]+1,t)}return null},r.prototype.getTileRangeForTileCoordAndZ=function(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;var i=e[0],o=e[1],a=e[2];if(t===i)return Dv(o,a,o,a,n);if(this.zoomFactor_){var c=Math.pow(this.zoomFactor_,t-i),h=Math.floor(o*c),d=Math.floor(a*c);if(t<i)return Dv(h,h,d,d,n);var v=Math.floor(c*(o+1))-1,x=Math.floor(c*(a+1))-1;return Dv(h,v,d,x,n)}var S=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(S,t,n)},r.prototype.getTileRangeExtent=function(e,t,n){var i=this.getOrigin(e),o=this.getResolution(e),a=Bn(this.getTileSize(e),this.tmpSize_),c=i[0]+t.minX*a[0]*o,h=i[0]+(t.maxX+1)*a[0]*o,d=i[1]+t.minY*a[1]*o,v=i[1]+(t.maxY+1)*a[1]*o;return Ra(c,d,h,v,n)},r.prototype.getTileRangeForExtentAndZ=function(e,t,n){var i=YQt;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,i);var o=i[1],a=i[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,i),Dv(o,i[1],a,i[2],n)},r.prototype.getTileCoordCenter=function(e){var t=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=Bn(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*n,t[1]-(e[2]+.5)*i[1]*n]},r.prototype.getTileCoordExtent=function(e,t){var n=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=Bn(this.getTileSize(e[0]),this.tmpSize_),a=n[0]+e[1]*o[0]*i,c=n[1]-(e[2]+1)*o[1]*i,h=a+o[0]*i,d=c+o[1]*i;return Ra(a,c,h,d,t)},r.prototype.getTileCoordForCoordAndResolution=function(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)},r.prototype.getTileCoordForXYAndResolution_=function(e,t,n,i,o){var a=this.getZForResolution(n),c=n/this.getResolution(a),h=this.getOrigin(a),d=Bn(this.getTileSize(a),this.tmpSize_),v=c*(e-h[0])/n/d[0],x=c*(h[1]-t)/n/d[1];return i?(v=_E(v,qd)-1,x=_E(x,qd)-1):(v=yE(v,qd),x=yE(x,qd)),W0(a,v,x,o)},r.prototype.getTileCoordForXYAndZ_=function(e,t,n,i,o){var a=this.getOrigin(n),c=this.getResolution(n),h=Bn(this.getTileSize(n),this.tmpSize_),d=(e-a[0])/c/h[0],v=(a[1]-t)/c/h[1];return i?(d=_E(d,qd)-1,v=_E(v,qd)-1):(d=yE(d,qd),v=yE(v,qd)),W0(n,d,v,o)},r.prototype.getTileCoordForCoordAndZ=function(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)},r.prototype.getTileCoordResolution=function(e){return this.resolutions_[e[0]]},r.prototype.getTileSize=function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]},r.prototype.getFullTileRange=function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null},r.prototype.getZForResolution=function(e,t){var n=o0(this.resolutions_,e,t||0);return Fn(n,this.minZoom,this.maxZoom)},r.prototype.tileCoordIntersectsViewport=function(e,t){return OW(t,0,t.length,2,this.getTileCoordExtent(e))},r.prototype.calculateTileRanges_=function(e){for(var t=this.resolutions_.length,n=new Array(t),i=this.minZoom;i<t;++i)n[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=n},r}(),rI=KQt;var XQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),JQt=function(r){XQt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.expireCache=function(t){for(;this.canExpireCache();){var n=this.peekLast();if(n.getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var t=this.peekFirstKey(),n=pFe(t),i=n[0];this.forEach(function(o){o.tileCoord[0]!==i&&(this.remove(Nd(o.tileCoord)),o.release())}.bind(this))}},e}(dN),bN=JQt;var SN={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};function EN(r){var e=r.getDefaultTileGrid();return e||(e=eer(r),r.setDefaultTileGrid(e)),e}function AFe(r,e,t){var n=e[0],i=r.getTileCoordCenter(e),o=IN(t);if(es(o,i))return e;var a=sn(o),c=Math.ceil((o[0]-i[0])/a);return i[0]+=a*c,r.getTileCoordForCoordAndZ(i,n)}function QQt(r,e,t,n){var i=n!==void 0?n:"top-left",o=MFe(r,e,t);return new rI({extent:r,origin:Q2e(r,i),resolutions:o,tileSize:t})}function CFe(r){var e=r||{},t=e.extent||Xn("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:MFe(t,e.maxZoom,e.tileSize,e.maxResolution)};return new rI(n)}function MFe(r,e,t,n){for(var i=e!==void 0?e:Dje,o=_o(r),a=sn(r),c=Bn(t!==void 0?t:Dd),h=n>0?n:Math.max(a/c[0],o/c[1]),d=i+1,v=new Array(d),x=0;x<d;++x)v[x]=h/Math.pow(2,x);return v}function eer(r,e,t,n){var i=IN(r);return QQt(i,e,t,n)}function IN(r){r=Xn(r);var e=r.getExtent();if(!e){var t=180*Ca[Ma.DEGREES]/r.getMetersPerUnit();e=Ra(-t,-t,t,t)}return e}var RFe=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ter=function(r){RFe(e,r);function e(t){var n=r.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate})||this;n.on,n.once,n.un,n.opaque_=t.opaque!==void 0?t.opaque:!1,n.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,n.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;var i=[256,256];return n.tileGrid&&Bn(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),i),n.tileCache=new bN(t.cacheSize||0),n.tmpSize=[0,0],n.key_=t.key||"",n.tileOptions={transition:t.transition,interpolate:t.interpolate},n.zDirection=t.zDirection?t.zDirection:0,n}return e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);i&&i.expireCache(n)},e.prototype.forEachLoadedTile=function(t,n,i,o){var a=this.getTileCacheForProjection(t);if(!a)return!1;for(var c=!0,h,d,v,x=i.minX;x<=i.maxX;++x)for(var S=i.minY;S<=i.maxY;++S)d=Nv(n,x,S),v=!1,a.containsKey(d)&&(h=a.get(d),v=h.getState()===Ut.LOADED,v&&(v=o(h)!==!1)),v||(c=!1);return c},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},e.prototype.getTile=function(t,n,i,o,a){return ir()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:EN(t)},e.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();return ar(n===null||Bc(n,t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,n,i){var o=this.getTileGridForProjection(i),a=this.getTilePixelRatio(n),c=Bn(o.getTileSize(t),this.tmpSize);return a==1?c:qD(c,a,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,n){var i=n!==void 0?n:this.getProjection(),o=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=AFe(o,t,i)),dFe(t,o)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),r.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,n){var i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)},e.prototype.useTile=function(t,n,i,o){},e}(YD),PFe=function(r){RFe(e,r);function e(t,n){var i=r.call(this,t)||this;return i.tile=n,i}return e}(bi);var OFe=ter;function rer(r,e){var t=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(a,c,h){if(a)return r.replace(t,a[0].toString()).replace(n,a[1].toString()).replace(i,a[2].toString()).replace(o,function(){var d=a[0],v=e.getFullTileRange(d);ar(v,55);var x=v.getHeight()-a[2]-1;return x.toString()})}}function LFe(r,e){for(var t=r.length,n=new Array(t),i=0;i<t;++i)n[i]=rer(r[i],e);return W8(n)}function W8(r){return r.length===1?r[0]:function(e,t,n){if(e){var i=_N(e),o=vl(i,r.length);return r[o](e,t,n)}else return}}function TN(r){var e=[],t=/\{([a-z])-([a-z])\}/.exec(r);if(t){var n=t[1].charCodeAt(0),i=t[2].charCodeAt(0),o=void 0;for(o=n;o<=i;++o)e.push(r.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r),t){for(var a=parseInt(t[2],10),c=parseInt(t[1],10);c<=a;c++)e.push(r.replace(t[0],c.toString()));return e}return e.push(r),e}var ner=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ier=function(r){ner(e,r);function e(t){var n=r.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===e.prototype.tileUrlFunction,n.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(n.tileUrlFunction=t.tileUrlFunction),n.urls=null,t.urls?n.setUrls(t.urls):t.url&&n.setUrl(t.url),n.tileLoadingKeys_={},n}return e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var n=t.target,i=tr(n),o=n.getState(),a;o==Ut.LOADING?(this.tileLoadingKeys_[i]=!0,a=SN.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],a=o==Ut.ERROR?SN.TILELOADERROR:o==Ut.LOADED?SN.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new PFe(a,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof n!="undefined"?this.setKey(n):this.changed()},e.prototype.setUrl=function(t){var n=TN(t);this.urls=n,this.setUrls(n)},e.prototype.setUrls=function(t){this.urls=t;var n=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(LFe(t,this.tileGrid),n):this.setKey(n)},e.prototype.tileUrlFunction=function(t,n,i){},e.prototype.useTile=function(t,n,i){var o=Nv(t,n,i);this.tileCache.containsKey(o)&&this.tileCache.get(o)},e}(OFe),DFe=ier;var oer=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),aer=function(r){oer(e,r);function e(t){var n=this,i=t.imageSmoothing!==void 0?t.imageSmoothing:!0;return t.interpolate!==void 0&&(i=t.interpolate),n=r.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:ser,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:i,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this,n.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,n.tileClass=t.tileClass!==void 0?t.tileClass:xh,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return e.prototype.canExpireCache=function(){if(!Kc)return r.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,n){if(!Kc){r.prototype.expireCache.call(this,t,n);return}var i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?n:{});for(var o in this.tileCacheForProjection){var a=this.tileCacheForProjection[o];a.expireCache(a==i?n:{})}},e.prototype.getGutterForProjection=function(t){return Kc&&this.getProjection()&&t&&!Bc(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){var t=r.prototype.getKey.call(this);return this.getInterpolate()||(t+=":disable-interpolation"),t},e.prototype.getOpaque=function(t){return Kc&&this.getProjection()&&t&&!Bc(this.getProjection(),t)?!1:r.prototype.getOpaque.call(this,t)},e.prototype.getTileGridForProjection=function(t){if(!Kc)return r.prototype.getTileGridForProjection.call(this,t);var n=this.getProjection();if(this.tileGrid&&(!n||Bc(n,t)))return this.tileGrid;var i=tr(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=EN(t)),this.tileGridForProjection[i]},e.prototype.getTileCacheForProjection=function(t){if(!Kc)return r.prototype.getTileCacheForProjection.call(this,t);var n=this.getProjection();if(!n||Bc(n,t))return this.tileCache;var i=tr(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new bN(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},e.prototype.createTile_=function(t,n,i,o,a,c){var h=[t,n,i],d=this.getTileCoordForTileUrlFunction(h,a),v=d?this.tileUrlFunction(d,o,a):void 0,x=new this.tileClass(h,v!==void 0?Ut.IDLE:Ut.EMPTY,v!==void 0?v:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return x.key=c,x.addEventListener(Pt.CHANGE,this.handleTileChange.bind(this)),x},e.prototype.getTile=function(t,n,i,o,a){var c=this.getProjection();if(!Kc||!c||!a||Bc(c,a))return this.getTileInternal(t,n,i,o,c||a);var h=this.getTileCacheForProjection(a),d=[t,n,i],v=void 0,x=Nd(d);h.containsKey(x)&&(v=h.get(x));var S=this.getKey();if(v&&v.key==S)return v;var T=this.getTileGridForProjection(c),L=this.getTileGridForProjection(a),k=this.getTileCoordForTileUrlFunction(d,a),R=new U0(c,T,a,L,d,k,this.getTilePixelRatio(o),this.getGutter(),function(D,j,B,$){return this.getTileInternal(D,j,B,$,c)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return R.key=S,v?(R.interimTile=v,R.refreshInterimChain(),h.replace(x,R)):h.set(x,R),R},e.prototype.getTileInternal=function(t,n,i,o,a){var c=null,h=Nv(t,n,i),d=this.getKey();if(!this.tileCache.containsKey(h))c=this.createTile_(t,n,i,o,a,d),this.tileCache.set(h,c);else if(c=this.tileCache.get(h),c.key!=d){var v=c;c=this.createTile_(t,n,i,o,a,d),v.getState()==Ut.IDLE?c.interimTile=v.interimTile:c.interimTile=v,c.refreshInterimChain(),this.tileCache.replace(h,c)}return c},e.prototype.setRenderReprojectionEdges=function(t){if(!(!Kc||this.renderReprojectionEdges_==t)){this.renderReprojectionEdges_=t;for(var n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,n){if(Kc){var i=Xn(t);if(i){var o=tr(i);o in this.tileGridForProjection||(this.tileGridForProjection[o]=n)}}},e}(DFe);function ser(r,e){r.getImage().src=e}var Z0=aer;var NFe=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Z8={DEFAULT:"default",TRUNCATED:"truncated"},ler=function(r){NFe(e,r);function e(t,n,i,o,a,c,h){var d=r.call(this,n,i,o,a,c,h)||this;return d.zoomifyImage_=null,d.tileSize_=t,d}return e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var t=r.prototype.getImage.call(this);if(this.state==Ut.LOADED){var n=this.tileSize_;if(t.width==n[0]&&t.height==n[1])return this.zoomifyImage_=t,t;var i=Ei(n[0],n[1]);return i.drawImage(t,0,0),this.zoomifyImage_=i.canvas,i.canvas}else return t},e}(xh);var uer=function(r){NFe(e,r);function e(t){var n=this,i=t,o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var a=i.size,c=i.tierSizeCalculation!==void 0?i.tierSizeCalculation:Z8.DEFAULT,h=i.tilePixelRatio||1,d=a[0],v=a[1],x=[],S=i.tileSize||Dd,T=S*h;switch(c){case Z8.DEFAULT:for(;d>T||v>T;)x.push([Math.ceil(d/T),Math.ceil(v/T)]),T+=T;break;case Z8.TRUNCATED:for(var L=d,k=v;L>T||k>T;)x.push([Math.ceil(L/T),Math.ceil(k/T)]),L>>=1,k>>=1;break;default:ar(!1,53);break;}x.push([1,1]),x.reverse();for(var R=[h],D=[0],j=1,B=x.length;j<B;j++)R.push(h<<j),D.push(x[j-1][0]*x[j-1][1]+D[j-1]);R.reverse();var $=new rI({tileSize:S,extent:i.extent||[0,-v,d,0],resolutions:R}),ee=i.url;ee&&ee.indexOf("{TileGroup}")==-1&&ee.indexOf("{tileIndex}")==-1&&(ee+="{TileGroup}/{z}-{x}-{y}.jpg");var J=TN(ee),ie=S*h;function ue(Ve){return function(We,Te,Se){if(We){var Ae=We[0],$e=We[1],Ge=We[2],Ke=$e+Ge*x[Ae][0],Pe=(Ke+D[Ae])/ie|0,at={z:Ae,x:$e,y:Ge,tileIndex:Ke,TileGroup:"TileGroup"+Pe};return Ve.replace(/\{(\w+?)\}/g,function(Tt,Le){return at[Le]})}else return}}var le=W8(J.map(ue)),_e=ler.bind(null,Bn(S*h));n=r.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,projection:i.projection,tilePixelRatio:h,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:_e,tileGrid:$,tileUrlFunction:le,transition:i.transition})||this,n.zDirection=i.zDirection;var Re=$.getTileCoordForCoordAndResolution(js($.getExtent()),R[R.length-1]),ze=le(Re,1,null),ke=new Image;return ke.addEventListener("error",function(){ie=S,this.changed()}.bind(n)),ke.src=ze,n}return e}(Z0),kFe=uer;var $s=Me(dt(),1),j4e=Me(vo(),1),Ch=Me(Jr(),1);function Ln(r){"@babel/helpers - typeof";return Ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(r)}function Y8(r,e){if(Ln(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(Ln(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function nI(r){var e=Y8(r,"string");return Ln(e)==="symbol"?e:String(e)}function ct(r,e,t){return e=nI(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function qFe(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function yt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qFe(Object(t),!0).forEach(function(n){ct(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):qFe(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function ta(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function jFe(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,nI(n.key),n)}}function ra(r,e,t){return e&&jFe(r.prototype,e),t&&jFe(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function na(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&dv(r,e)}function yu(r){return yu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yu(r)}function K8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function Lr(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function X8(r,e){if(e&&(Ln(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lr(r)}function ia(r){var e=K8();return function(){var n=yu(r),i;if(e){var o=yu(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return X8(this,i)}}var fZ=Me(dt());var J8={},cer=[],fer=function(e){cer.push(e)};function her(r,e){if(0)var t}function per(r,e){if(0)var t}function der(){J8={}}function FFe(r,e,t){!e&&!J8[t]&&(r(!1,t),J8[t]=!0)}function AN(r,e){FFe(her,r,e)}function mer(r,e){FFe(per,r,e)}AN.preMessage=fer;AN.resetWarned=der;AN.noteOnce=mer;var wh=AN;var zFe=Me(dt()),ver=function(e){var t,n,i=e.className,o=e.included,a=e.vertical,c=e.style,h=e.length,d=e.offset,v=e.reverse;h<0&&(v=!v,h=Math.abs(h),d=100-d);var x=a?(t={},ct(t,v?"top":"bottom","".concat(d,"%")),ct(t,v?"bottom":"top","auto"),ct(t,"height","".concat(h,"%")),t):(n={},ct(n,v?"right":"left","".concat(d,"%")),ct(n,v?"left":"right","auto"),ct(n,"width","".concat(h,"%")),n),S=yt(yt({},c),x);return o?zFe.default.createElement("div",{className:i,style:S}):null},CN=ver;function Na(r,e){if(r==null)return{};var t=B_(r,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Y0(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Q8(r){if(Array.isArray(r))return Y0(r)}function eZ(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function iI(r,e){if(r){if(typeof r=="string")return Y0(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Y0(r,e)}}function tZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _u(r){return Q8(r)||eZ(r)||iI(r)||tZ()}function rZ(r,e){for(;!Object.prototype.hasOwnProperty.call(r,e)&&(r=yu(r),r!==null););return r}function jd(){return typeof Reflect!="undefined"&&Reflect.get?jd=Reflect.get.bind():jd=function(e,t,n){var i=rZ(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},jd.apply(this,arguments)}var X0=Me(dt());var nZ=Me(vo());function is(r,e,t,n){var i=nZ.default.unstable_batchedUpdates?function(a){nZ.default.unstable_batchedUpdates(t,a)}:t;return r!=null&&r.addEventListener&&r.addEventListener(e,i,n),{remove:function(){r!=null&&r.removeEventListener&&r.removeEventListener(e,i,n)}}}var YFe=Me(hi());var iZ=Me(dt()),BFe=Me(hi());var ger=function(e,t,n,i,o,a){wh(n?i>0:!0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var c=Object.keys(t).map(parseFloat).sort(function(d,v){return d-v});if(n&&i)for(var h=o;h<=a;h+=i)c.indexOf(h)===-1&&c.push(h);return c},yer=function(e){var t=e.prefixCls,n=e.vertical,i=e.reverse,o=e.marks,a=e.dots,c=e.step,h=e.included,d=e.lowerBound,v=e.upperBound,x=e.max,S=e.min,T=e.dotStyle,L=e.activeDotStyle,k=x-S,R=ger(n,o,a,c,S,x).map(function(D){var j,B="".concat(Math.abs(D-S)/k*100,"%"),$=!h&&D===v||h&&D<=v&&D>=d,ee=n?yt(yt({},T),{},ct({},i?"top":"bottom",B)):yt(yt({},T),{},ct({},i?"right":"left",B));$&&(ee=yt(yt({},ee),L));var J=(0,BFe.default)((j={},ct(j,"".concat(t,"-dot"),!0),ct(j,"".concat(t,"-dot-active"),$),ct(j,"".concat(t,"-dot-reverse"),i),j));return iZ.default.createElement("span",{className:J,style:ee,key:D})});return iZ.default.createElement("div",{className:"".concat(t,"-step")},R)},UFe=yer;var MN=Me(dt()),VFe=Me(hi()),_er=function(e){var t=e.className,n=e.vertical,i=e.reverse,o=e.marks,a=e.included,c=e.upperBound,h=e.lowerBound,d=e.max,v=e.min,x=e.onClickLabel,S=Object.keys(o),T=d-v,L=S.map(parseFloat).sort(function(k,R){return k-R}).map(function(k){var R,D=o[k],j=Ln(D)==="object"&&!MN.default.isValidElement(D),B=j?D.label:D;if(!B&&B!==0)return null;var $=!a&&k===c||a&&k<=c&&k>=h,ee=(0,VFe.default)((R={},ct(R,"".concat(t,"-text"),!0),ct(R,"".concat(t,"-text-active"),$),R)),J=ct({marginBottom:"-50%"},i?"top":"bottom","".concat((k-v)/T*100,"%")),ie=ct({transform:"translateX(".concat(i?"50%":"-50%",")"),msTransform:"translateX(".concat(i?"50%":"-50%",")")},i?"right":"left","".concat((k-v)/T*100,"%")),ue=n?J:ie,le=j?yt(yt({},ue),D.style):ue;return MN.default.createElement("span",{className:ee,style:le,key:k,onMouseDown:function(Re){return x(Re,k)},onTouchStart:function(Re){return x(Re,k)}},B)});return MN.default.createElement("div",{className:t},L)},GFe=_er;var oZ=Me(dt()),$Fe=Me(hi());var K0=function(r){na(t,r);var e=ia(t);function t(){var n;return ta(this,t),n=e.apply(this,arguments),n.state={clickFocused:!1},n.setHandleRef=function(i){n.handle=i},n.handleMouseUp=function(){document.activeElement===n.handle&&n.setClickFocus(!0)},n.handleMouseDown=function(i){i.preventDefault(),n.focus()},n.handleBlur=function(){n.setClickFocus(!1)},n.handleKeyDown=function(){n.setClickFocus(!1)},n}return ra(t,[{key:"componentDidMount",value:function(){this.onMouseUpListener=is(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(i){this.setState({clickFocused:i})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var i,o,a=this.props,c=a.prefixCls,h=a.vertical,d=a.reverse,v=a.offset,x=a.style,S=a.disabled,T=a.min,L=a.max,k=a.value,R=a.tabIndex,D=a.ariaLabel,j=a.ariaLabelledBy,B=a.ariaValueTextFormatter,$=Na(a,["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex","ariaLabel","ariaLabelledBy","ariaValueTextFormatter"]),ee=(0,$Fe.default)(this.props.className,ct({},"".concat(c,"-handle-click-focused"),this.state.clickFocused)),J=h?(i={},ct(i,d?"top":"bottom","".concat(v,"%")),ct(i,d?"bottom":"top","auto"),ct(i,"transform",d?null:"translateY(+50%)"),i):(o={},ct(o,d?"right":"left","".concat(v,"%")),ct(o,d?"left":"right","auto"),ct(o,"transform","translateX(".concat(d?"+":"-","50%)")),o),ie=yt(yt({},x),J),ue=R||0;(S||R===null)&&(ue=null);var le;return B&&(le=B(k)),oZ.default.createElement("div",nn({ref:this.setHandleRef,tabIndex:ue},$,{className:ee,style:ie,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":T,"aria-valuemax":L,"aria-valuenow":k,"aria-disabled":!!S,"aria-label":D,"aria-labelledby":j,"aria-valuetext":le}))}}]),t}(oZ.default.Component);var WFe=Me(vo());var br={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=br.F1&&t<=br.F12)return!1;switch(t){case br.ALT:case br.CAPS_LOCK:case br.CONTEXT_MENU:case br.CTRL:case br.DOWN:case br.END:case br.ESC:case br.HOME:case br.INSERT:case br.LEFT:case br.MAC_FF_META:case br.META:case br.NUMLOCK:case br.NUM_CENTER:case br.PAGE_DOWN:case br.PAGE_UP:case br.PAUSE:case br.PRINT_SCREEN:case br.RIGHT:case br.SHIFT:case br.UP:case br.WIN_KEY:case br.WIN_KEY_RIGHT:return!1;default:return!0;}},isCharacterKey:function(e){if(e>=br.ZERO&&e<=br.NINE||e>=br.NUM_ZERO&&e<=br.NUM_MULTIPLY||e>=br.A&&e<=br.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case br.SPACE:case br.QUESTION_MARK:case br.NUM_PLUS:case br.NUM_MINUS:case br.NUM_PERIOD:case br.NUM_DIVISION:case br.SEMICOLON:case br.DASH:case br.EQUALS:case br.COMMA:case br.PERIOD:case br.SLASH:case br.APOSTROPHE:case br.SINGLE_QUOTE:case br.OPEN_SQUARE_BRACKET:case br.BACKSLASH:case br.CLOSE_SQUARE_BRACKET:return!0;default:return!1;}}},bh=br;function RN(r,e){try{return Object.keys(e).some(function(t){return r.target===(0,WFe.findDOMNode)(e[t])})}catch(t){return!1}}function PN(r,e){var t=e.min,n=e.max;return r<t||r>n}function aZ(r){return r.touches.length>1||r.type.toLowerCase()==="touchend"&&r.touches.length>0}function HFe(r,e){var t=e.marks,n=e.step,i=e.min,o=e.max,a=Object.keys(t).map(parseFloat);if(n!==null){var c=Math.pow(10,ZFe(n)),h=Math.floor((o*c-i*c)/(n*c)),d=Math.min((r-i)/n,h),v=Math.round(d)*n+i;a.push(v)}var x=a.map(function(S){return Math.abs(r-S)});return a[x.indexOf(Math.min.apply(Math,_u(x)))]}function ZFe(r){var e=r.toString(),t=0;return e.indexOf(".")>=0&&(t=e.length-e.indexOf(".")-1),t}function sZ(r,e){return r?e.clientY:e.pageX}function lZ(r,e){return r?e.touches[0].clientY:e.touches[0].pageX}function uZ(r,e){var t=e.getBoundingClientRect();return r?t.top+t.height*.5:window.pageXOffset+t.left+t.width*.5}function oI(r,e){var t=e.max,n=e.min;return r<=n?n:r>=t?t:r}function ON(r,e){var t=e.step,n=isFinite(HFe(r,e))?HFe(r,e):0;return t===null?n:parseFloat(n.toFixed(ZFe(t)))}function Sh(r){r.stopPropagation(),r.preventDefault()}function xer(r,e,t){var n={increase:function(c,h){return c+h},decrease:function(c,h){return c-h}},i=n[r](Object.keys(t.marks).indexOf(JSON.stringify(e)),1),o=Object.keys(t.marks)[i];return t.step?n[r](e,t.step):Object.keys(t.marks).length&&t.marks[o]?t.marks[o]:e}function LN(r,e,t){var n="increase",i="decrease",o=n;switch(r.keyCode){case bh.UP:o=e&&t?i:n;break;case bh.RIGHT:o=!e&&t?i:n;break;case bh.DOWN:o=e&&t?n:i;break;case bh.LEFT:o=!e&&t?n:i;break;case bh.END:return function(a,c){return c.max};case bh.HOME:return function(a,c){return c.min};case bh.PAGE_UP:return function(a,c){return a+c.step*2};case bh.PAGE_DOWN:return function(a,c){return a-c.step*2};default:return;}return function(a,c){return xer(o,a,c)}}function Jc(){}function aI(r){var e;return e=function(t){na(i,t);var n=ia(i);function i(o){var a;ta(this,i),a=n.call(this,o),a.onDown=function(x,S){var T=S,L=a.props,k=L.draggableTrack,R=L.vertical,D=a.state.bounds,j=k&&a.positionGetValue?a.positionGetValue(T)||[]:[],B=RN(x,a.handlesRefs);if(a.dragTrack=k&&D.length>=2&&!B&&!j.map(function(ee,J){var ie=J?!0:ee>=D[J];return J===j.length-1?ee<=D[J]:ie}).some(function(ee){return!ee}),a.dragTrack)a.dragOffset=T,a.startBounds=_u(D);else{if(!B)a.dragOffset=0;else{var $=uZ(R,x.target);a.dragOffset=T-$,T=$}a.onStart(T)}},a.onMouseDown=function(x){if(x.button===0){a.removeDocumentEvents();var S=a.props.vertical,T=sZ(S,x);a.onDown(x,T),a.addDocumentMouseEvents()}},a.onTouchStart=function(x){if(!aZ(x)){var S=a.props.vertical,T=lZ(S,x);a.onDown(x,T),a.addDocumentTouchEvents(),Sh(x)}},a.onFocus=function(x){var S=a.props,T=S.onFocus,L=S.vertical;if(RN(x,a.handlesRefs)&&!a.dragTrack){var k=uZ(L,x.target);a.dragOffset=0,a.onStart(k),Sh(x),T&&T(x)}},a.onBlur=function(x){var S=a.props.onBlur;a.dragTrack||a.onEnd(),S&&S(x)},a.onMouseUp=function(){a.handlesRefs[a.prevMovedHandleIndex]&&a.handlesRefs[a.prevMovedHandleIndex].clickFocus()},a.onMouseMove=function(x){if(!a.sliderRef){a.onEnd();return}var S=sZ(a.props.vertical,x);a.onMove(x,S-a.dragOffset,a.dragTrack,a.startBounds)},a.onTouchMove=function(x){if(aZ(x)||!a.sliderRef){a.onEnd();return}var S=lZ(a.props.vertical,x);a.onMove(x,S-a.dragOffset,a.dragTrack,a.startBounds)},a.onKeyDown=function(x){a.sliderRef&&RN(x,a.handlesRefs)&&a.onKeyboard(x)},a.onClickMarkLabel=function(x,S){x.stopPropagation(),a.onChange({value:S}),a.setState({value:S},function(){return a.onEnd(!0)})},a.saveSlider=function(x){a.sliderRef=x};var c=o.step,h=o.max,d=o.min,v=isFinite(h-d)?(h-d)%c===0:!0;return wh(c&&Math.floor(c)===c?v:!0,"Slider[max] - Slider[min] (".concat(h-d,") should be a multiple of Slider[step] (").concat(c,")")),a.handlesRefs={},a}return ra(i,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var a=this.props,c=a.autoFocus,h=a.disabled;c&&!h&&this.focus()}},{key:"componentWillUnmount",value:function(){jd(yu(i.prototype),"componentWillUnmount",this)&&jd(yu(i.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var a=this.sliderRef,c=this.props,h=c.vertical,d=c.reverse,v=a.getBoundingClientRect();return h?d?v.bottom:v.top:window.pageXOffset+(d?v.right:v.left)}},{key:"getSliderLength",value:function(){var a=this.sliderRef;if(!a)return 0;var c=a.getBoundingClientRect();return this.props.vertical?c.height:c.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=is(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=is(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=is(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=is(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){var a;this.props.disabled||(a=this.handlesRefs[0])===null||a===void 0||a.focus()}},{key:"blur",value:function(){var a=this;this.props.disabled||Object.keys(this.handlesRefs).forEach(function(c){var h,d;(h=a.handlesRefs[c])===null||h===void 0||(d=h.blur)===null||d===void 0||d.call(h)})}},{key:"calcValue",value:function(a){var c=this.props,h=c.vertical,d=c.min,v=c.max,x=Math.abs(Math.max(a,0)/this.getSliderLength()),S=h?(1-x)*(v-d)+d:x*(v-d)+d;return S}},{key:"calcValueByPos",value:function(a){var c=this.props.reverse?-1:1,h=c*(a-this.getSliderStart()),d=this.trimAlignValue(this.calcValue(h));return d}},{key:"calcOffset",value:function(a){var c=this.props,h=c.min,d=c.max,v=(a-h)/(d-h);return Math.max(0,v*100)}},{key:"saveHandle",value:function(a,c){this.handlesRefs[a]=c}},{key:"render",value:function(){var a,c=this.props,h=c.prefixCls,d=c.className,v=c.marks,x=c.dots,S=c.step,T=c.included,L=c.disabled,k=c.vertical,R=c.reverse,D=c.min,j=c.max,B=c.children,$=c.maximumTrackStyle,ee=c.style,J=c.railStyle,ie=c.dotStyle,ue=c.activeDotStyle,le=jd(yu(i.prototype),"render",this).call(this),_e=le.tracks,Re=le.handles,ze=(0,YFe.default)(h,(a={},ct(a,"".concat(h,"-with-marks"),Object.keys(v).length),ct(a,"".concat(h,"-disabled"),L),ct(a,"".concat(h,"-vertical"),k),ct(a,d,d),a));return X0.default.createElement("div",{ref:this.saveSlider,className:ze,onTouchStart:L?Jc:this.onTouchStart,onMouseDown:L?Jc:this.onMouseDown,onMouseUp:L?Jc:this.onMouseUp,onKeyDown:L?Jc:this.onKeyDown,onFocus:L?Jc:this.onFocus,onBlur:L?Jc:this.onBlur,style:ee},X0.default.createElement("div",{className:"".concat(h,"-rail"),style:yt(yt({},$),J)}),_e,X0.default.createElement(UFe,{prefixCls:h,vertical:k,reverse:R,marks:v,dots:x,step:S,included:T,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:j,min:D,dotStyle:ie,activeDotStyle:ue}),Re,X0.default.createElement(GFe,{className:"".concat(h,"-mark"),onClickLabel:L?Jc:this.onClickMarkLabel,vertical:k,marks:v,included:T,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:j,min:D,reverse:R}),B)}}]),i}(r),e.displayName="ComponentEnhancer(".concat(r.displayName,")"),e.defaultProps=yt(yt({},r.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(n){var i=n.index,o=Na(n,["index"]);return delete o.dragging,o.value===null?null:X0.default.createElement(K0,nn({},o,{key:i}))},onBeforeChange:Jc,onChange:Jc,onAfterChange:Jc,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),e}var wer=function(r){na(t,r);var e=ia(t);function t(n){var i;ta(this,t),i=e.call(this,n),i.positionGetValue=function(c){return[]},i.onEnd=function(c){var h=i.state.dragging;i.removeDocumentEvents(),(h||c)&&i.props.onAfterChange(i.getValue()),i.setState({dragging:!1})};var o=n.defaultValue!==void 0?n.defaultValue:n.min,a=n.value!==void 0?n.value:o;return i.state={value:i.trimAlignValue(a),dragging:!1},wh(!("minimumTrackStyle"in n),"minimumTrackStyle will be deprecated, please use trackStyle instead."),wh(!("maximumTrackStyle"in n),"maximumTrackStyle will be deprecated, please use railStyle instead."),i}return ra(t,[{key:"calcValueByPos",value:function(i){return 0}},{key:"calcOffset",value:function(i){return 0}},{key:"saveHandle",value:function(i,o){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(i,o){var a=this.props,c=a.min,h=a.max,d=a.value,v=a.onChange;if("min"in this.props||"max"in this.props){var x=d!==void 0?d:o.value,S=this.trimAlignValue(x,this.props);S!==o.value&&(this.setState({value:S}),!(c===i.min&&h===i.max)&&PN(x,this.props)&&v(S))}}},{key:"onChange",value:function(i){var o=this.props,a=!("value"in o),c=i.value>this.props.max?yt(yt({},i),{},{value:this.props.max}):i;a&&this.setState(c);var h=c.value;o.onChange(h)}},{key:"onStart",value:function(i){this.setState({dragging:!0});var o=this.props,a=this.getValue();o.onBeforeChange(a);var c=this.calcValueByPos(i);this.startValue=c,this.startPosition=i,c!==a&&(this.prevMovedHandleIndex=0,this.onChange({value:c}))}},{key:"onMove",value:function(i,o){Sh(i);var a=this.state.value,c=this.calcValueByPos(o);c!==a&&this.onChange({value:c})}},{key:"onKeyboard",value:function(i){var o=this.props,a=o.reverse,c=o.vertical,h=LN(i,c,a);if(h){Sh(i);var d=this.state,v=d.value,x=h(v,this.props),S=this.trimAlignValue(x);if(S===v)return;this.onChange({value:S}),this.props.onAfterChange(S),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){var i=this.props.startPoint||this.props.min;return this.state.value>i?i:this.state.value}},{key:"getUpperBound",value:function(){return this.state.value<this.props.startPoint?this.props.startPoint:this.state.value}},{key:"trimAlignValue",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i===null)return null;var a=yt(yt({},this.props),o),c=oI(i,a);return ON(c,a)}},{key:"render",value:function(){var i=this,o=this.props,a=o.prefixCls,c=o.vertical,h=o.included,d=o.disabled,v=o.minimumTrackStyle,x=o.trackStyle,S=o.handleStyle,T=o.tabIndex,L=o.ariaLabelForHandle,k=o.ariaLabelledByForHandle,R=o.ariaValueTextFormatterForHandle,D=o.min,j=o.max,B=o.startPoint,$=o.reverse,ee=o.handle,J=this.state,ie=J.value,ue=J.dragging,le=this.calcOffset(ie),_e=ee({className:"".concat(a,"-handle"),prefixCls:a,vertical:c,offset:le,value:ie,dragging:ue,disabled:d,min:D,max:j,reverse:$,index:0,tabIndex:T,ariaLabel:L,ariaLabelledBy:k,ariaValueTextFormatter:R,style:S[0]||S,ref:function(We){return i.saveHandle(0,We)}}),Re=B!==void 0?this.calcOffset(B):0,ze=x[0]||x,ke=fZ.default.createElement(CN,{className:"".concat(a,"-track"),vertical:c,included:h,offset:Re,reverse:$,length:le-Re,style:yt(yt({},v),ze)});return{tracks:ke,handles:_e}}}]),t}(fZ.default.Component),KFe=aI(wer);var hZ=Me(dt()),pZ=Me(hi());var sI=function(e){var t=e.value,n=e.handle,i=e.bounds,o=e.props,a=o.allowCross,c=o.pushable,h=Number(c),d=oI(t,o),v=d;return!a&&n!=null&&i!==void 0&&(n>0&&d<=i[n-1]+h&&(v=i[n-1]+h),n<i.length-1&&d>=i[n+1]-h&&(v=i[n+1]-h)),ON(v,o)},dZ=function(r){na(t,r);var e=ia(t);function t(n){var i;ta(this,t),i=e.call(this,n),i.positionGetValue=function(T){var L=i.getValue(),k=i.calcValueByPos(T),R=i.getClosestBound(k),D=i.getBoundNeedMoving(k,R),j=L[D];if(k===j)return null;var B=_u(L);return B[D]=k,B},i.onEnd=function(T){var L=i.state.handle;i.removeDocumentEvents(),L||(i.dragTrack=!1),(L!==null||T)&&i.props.onAfterChange(i.getValue()),i.setState({handle:null})};var o=n.count,a=n.min,c=n.max,h=Array.apply(void 0,_u(Array(o+1))).map(function(){return a}),d="defaultValue"in n?n.defaultValue:h,v=n.value!==void 0?n.value:d,x=v.map(function(T,L){return sI({value:T,handle:L,props:n})}),S=x[0]===c?0:x.length-1;return i.state={handle:null,recent:S,bounds:x},i}return ra(t,[{key:"calcValueByPos",value:function(i){return 0}},{key:"getSliderLength",value:function(){return 0}},{key:"calcOffset",value:function(i){return 0}},{key:"saveHandle",value:function(i,o){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(i,o){var a=this,c=this.props,h=c.onChange,d=c.value,v=c.min,x=c.max;if(("min"in this.props||"max"in this.props)&&!(v===i.min&&x===i.max)){var S=d||o.bounds;if(S.some(function(L){return PN(L,a.props)})){var T=S.map(function(L){return oI(L,a.props)});h(T)}}}},{key:"onChange",value:function(i){var o=this.props,a=!("value"in o);if(a)this.setState(i);else{var c={};["handle","recent"].forEach(function(v){i[v]!==void 0&&(c[v]=i[v])}),Object.keys(c).length&&this.setState(c)}var h=yt(yt({},this.state),i),d=h.bounds;o.onChange(d)}},{key:"onStart",value:function(i){var o=this.props,a=this.state,c=this.getValue();o.onBeforeChange(c);var h=this.calcValueByPos(i);this.startValue=h,this.startPosition=i;var d=this.getClosestBound(h);this.prevMovedHandleIndex=this.getBoundNeedMoving(h,d),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex});var v=c[this.prevMovedHandleIndex];if(h!==v){var x=_u(a.bounds);x[this.prevMovedHandleIndex]=h,this.onChange({bounds:x})}}},{key:"onMove",value:function(i,o,a,c){Sh(i);var h=this.state,d=this.props,v=d.max||100,x=d.min||0;if(a){var S=d.vertical?-o:o;S=d.reverse?-S:S;var T=v-Math.max.apply(Math,_u(c)),L=x-Math.min.apply(Math,_u(c)),k=Math.min(Math.max(S/(this.getSliderLength()/(v-x)),L),T),R=c.map(function(B){return Math.floor(Math.max(Math.min(B+k,v),x))});h.bounds.map(function(B,$){return B===R[$]}).some(function(B){return!B})&&this.onChange({bounds:R});return}var D=this.calcValueByPos(o),j=h.bounds[h.handle];D!==j&&this.moveTo(D)}},{key:"onKeyboard",value:function(i){var o=this.props,a=o.reverse,c=o.vertical,h=LN(i,c,a);if(h){Sh(i);var d=this.state,v=this.props,x=d.bounds,S=d.handle,T=x[S===null?d.recent:S],L=h(T,v),k=sI({value:L,handle:S,bounds:d.bounds,props:v});if(k===T)return;var R=!0;this.moveTo(k,R)}}},{key:"getValue",value:function(){return this.state.bounds}},{key:"getClosestBound",value:function(i){for(var o=this.state.bounds,a=0,c=1;c<o.length-1;c+=1)i>=o[c]&&(a=c);return Math.abs(o[a+1]-i)<Math.abs(o[a]-i)&&(a+=1),a}},{key:"getBoundNeedMoving",value:function(i,o){var a=this.state,c=a.bounds,h=a.recent,d=o,v=c[o+1]===c[o];return v&&c[h]===c[o]&&(d=h),v&&i!==c[o+1]&&(d=i<c[o+1]?o:o+1),d}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var i=this.state.bounds;return i[i.length-1]}},{key:"getPoints",value:function(){var i=this.props,o=i.marks,a=i.step,c=i.min,h=i.max,d=this.internalPointsCache;if(!d||d.marks!==o||d.step!==a){var v=yt({},o);if(a!==null)for(var x=c;x<=h;x+=a)v[x]=x;var S=Object.keys(v).map(parseFloat);S.sort(function(T,L){return T-L}),this.internalPointsCache={marks:o,step:a,points:S}}return this.internalPointsCache.points}},{key:"moveTo",value:function(i,o){var a=this,c=this.state,h=this.props,d=_u(c.bounds),v=c.handle===null?c.recent:c.handle;d[v]=i;var x=v;h.pushable!==!1?this.pushSurroundingHandles(d,x):h.allowCross&&(d.sort(function(S,T){return S-T}),x=d.indexOf(i)),this.onChange({recent:x,handle:x,bounds:d}),o&&(this.props.onAfterChange(d),this.setState({},function(){a.handlesRefs[x].focus()}),this.onEnd())}},{key:"pushSurroundingHandles",value:function(i,o){var a=i[o],c=this.props.pushable,h=Number(c),d=0;if(i[o+1]-a<h&&(d=1),a-i[o-1]<h&&(d=-1),d!==0){var v=o+d,x=d*(i[v]-a);this.pushHandle(i,v,d,h-x)||(i[o]=i[v]-d*h)}}},{key:"pushHandle",value:function(i,o,a,c){for(var h=i[o],d=i[o];a*(d-h)<c;){if(!this.pushHandleOnePoint(i,o,a))return i[o]=h,!1;d=i[o]}return!0}},{key:"pushHandleOnePoint",value:function(i,o,a){var c=this.getPoints(),h=c.indexOf(i[o]),d=h+a;if(d>=c.length||d<0)return!1;var v=o+a,x=c[d],S=this.props.pushable,T=Number(S),L=a*(i[v]-x);return this.pushHandle(i,v,a,T-L)?(i[o]=x,!0):!1}},{key:"trimAlignValue",value:function(i){var o=this.state,a=o.handle,c=o.bounds;return sI({value:i,handle:a,bounds:c,props:this.props})}},{key:"render",value:function(){var i=this,o=this.state,a=o.handle,c=o.bounds,h=this.props,d=h.prefixCls,v=h.vertical,x=h.included,S=h.disabled,T=h.min,L=h.max,k=h.reverse,R=h.handle,D=h.trackStyle,j=h.handleStyle,B=h.tabIndex,$=h.ariaLabelGroupForHandles,ee=h.ariaLabelledByGroupForHandles,J=h.ariaValueTextFormatterGroupForHandles,ie=c.map(function(Re){return i.calcOffset(Re)}),ue="".concat(d,"-handle"),le=c.map(function(Re,ze){var ke,Ve=B[ze]||0;(S||B[ze]===null)&&(Ve=null);var We=a===ze;return R({className:(0,pZ.default)((ke={},ct(ke,ue,!0),ct(ke,"".concat(ue,"-").concat(ze+1),!0),ct(ke,"".concat(ue,"-dragging"),We),ke)),prefixCls:d,vertical:v,dragging:We,offset:ie[ze],value:Re,index:ze,tabIndex:Ve,min:T,max:L,reverse:k,disabled:S,style:j[ze],ref:function(Se){return i.saveHandle(ze,Se)},ariaLabel:$[ze],ariaLabelledBy:ee[ze],ariaValueTextFormatter:J[ze]})}),_e=c.slice(0,-1).map(function(Re,ze){var ke,Ve=ze+1,We=(0,pZ.default)((ke={},ct(ke,"".concat(d,"-track"),!0),ct(ke,"".concat(d,"-track-").concat(Ve),!0),ke));return hZ.default.createElement(CN,{className:We,vertical:v,reverse:k,included:x,offset:ie[Ve-1],length:ie[Ve]-ie[Ve-1],style:D[ze],key:Ve})});return{tracks:_e,handles:le}}}],[{key:"getDerivedStateFromProps",value:function(i,o){if(!("value"in i||"min"in i||"max"in i))return null;var a=i.value||o.bounds,c=a.map(function(h,d){return sI({value:h,handle:d,bounds:o.bounds,props:i})});if(o.bounds.length===c.length){if(c.every(function(h,d){return h===o.bounds[d]}))return null}else c=a.map(function(h,d){return sI({value:h,handle:d,props:i})});return yt(yt({},o),{},{bounds:c})}}]),t}(hZ.default.Component);dZ.displayName="Range";dZ.defaultProps={count:1,allowCross:!0,pushable:!1,draggableTrack:!1,tabIndex:[],ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]};var XFe=aI(dZ);var _I=Me(dt());var Ah=Me(dt());var QZ=Me(dt()),ox=Me(dt());var wl=Me(dt()),P4e=Me(vo());var QFe=function(e){return+setTimeout(e,16)},eze=function(e){return clearTimeout(e)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(QFe=function(e){return window.requestAnimationFrame(e)},eze=function(e){return window.cancelAnimationFrame(e)});var JFe=0,mZ=new Map;function tze(r){mZ.delete(r)}var rze=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;JFe+=1;var n=JFe;function i(o){if(o===0)tze(n),e();else{var a=QFe(function(){i(o-1)});mZ.set(n,a)}}return i(t),n};rze.cancel=function(r){var e=mZ.get(r);return tze(e),eze(e)};var Us=rze;function kv(r,e){if(!r)return!1;if(r.contains)return r.contains(e);for(var t=e;t;){if(t===r)return!0;t=t.parentNode}return!1}var nze=Me(dt()),ize=Me(vo());function ber(r){return r instanceof HTMLElement||r instanceof SVGElement}function lI(r){return ber(r)?r:r instanceof nze.default.Component?ize.default.findDOMNode(r):null}var Mer=Me(dt()),_Z=Me(lze());var Cer=Me(dt());function xZ(r,e){typeof r=="function"?r(e):Ln(r)==="object"&&r&&"current"in r&&(r.current=e)}function J0(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n=e.filter(function(i){return i});return n.length<=1?n[0]:function(i){e.forEach(function(o){xZ(o,i)})}}function GN(r){var e,t,n=(0,_Z.isMemo)(r)?r.type.type:r.type;return!(typeof n=="function"&&!((e=n.prototype)!==null&&e!==void 0&&e.render)||typeof r=="function"&&!((t=r.prototype)!==null&&t!==void 0&&t.render))}var tc=Me(dt()),uze=Me(vo());function Qc(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var Rer=(0,tc.forwardRef)(function(r,e){var t=r.didUpdate,n=r.getContainer,i=r.children,o=(0,tc.useRef)(),a=(0,tc.useRef)();(0,tc.useImperativeHandle)(e,function(){return{}});var c=(0,tc.useRef)(!1);return!c.current&&Qc()&&(a.current=n(),o.current=a.current.parentNode,c.current=!0),(0,tc.useEffect)(function(){t==null||t(r)}),(0,tc.useEffect)(function(){return a.current.parentNode===null&&o.current!==null&&o.current.appendChild(a.current),function(){var h,d;(h=a.current)===null||h===void 0||(d=h.parentNode)===null||d===void 0||d.removeChild(a.current)}},[]),a.current?uze.default.createPortal(i,a.current):null}),cze=Rer;var O4e=Me(hi());function Per(r,e,t){return t?r[0]===e[0]:r[0]===e[0]&&r[1]===e[1]}function fze(r,e,t){var n=r[e]||{};return yt(yt({},n),t)}function hze(r,e,t,n){for(var i=t.points,o=Object.keys(r),a=0;a<o.length;a+=1){var c=o[a];if(Per(r[c].points,i,n))return"".concat(e,"-placement-").concat(c)}return""}function wZ(r){if(Array.isArray(r))return r}function bZ(r,e){var t=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,o,a,c=[],h=!0,d=!1;try{if(o=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(n=o.call(t)).done)&&(c.push(n.value),c.length!==e);h=!0);}catch(v){d=!0,i=v}finally{try{if(!h&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(d)throw i}}return c}}function SZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _n(r,e){return wZ(r)||bZ(r,e)||iI(r,e)||SZ()}var zv=Me(dt()),yI=Me(dt());var pze=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var r=navigator.userAgent||navigator.vendor||window.opera;return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(r==null?void 0:r.substr(0,4))};var LZ=Me(dt()),Rze=Me(hi());var Cze=Me(hi());var Gs=Me(dt()),OZ=Me(dt());var EZ=Me(dt());var dze=EZ.createContext({});var mze=Me(dt()),Oer=function(r){na(t,r);var e=ia(t);function t(){return ta(this,t),e.apply(this,arguments)}return ra(t,[{key:"render",value:function(){return this.props.children}}]),t}(mze.Component),vze=Oer;var Q0=Me(dt());function Eh(r){var e=Q0.useRef(!1),t=Q0.useState(r),n=_n(t,2),i=n[0],o=n[1];Q0.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function a(c,h){h&&e.current||o(c)}return[i,a]}var e2=Me(dt()),zd=Me(dt());var Ih="none",uI="appear",cI="enter",fI="leave",IZ="none",Vs="prepare",Th="start",Fd="active",$N="end",HN="prepared";var YN=Me(dt()),MZ=Me(dt());function gze(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit".concat(r)]="webkit".concat(e),t["Moz".concat(r)]="moz".concat(e),t["ms".concat(r)]="MS".concat(e),t["O".concat(r)]="o".concat(e.toLowerCase()),t}function Ler(r,e){var t={animationend:gze("Animation","AnimationEnd"),transitionend:gze("Transition","TransitionEnd")};return r&&("AnimationEvent"in e||delete t.animationend.animation,"TransitionEvent"in e||delete t.transitionend.transition),t}var Der=Ler(Qc(),typeof window!="undefined"?window:{}),_ze={};Qc()&&(yze=document.createElement("div"),_ze=yze.style);var yze,WN={};function xze(r){if(WN[r])return WN[r];var e=Der[r];if(e)for(var t=Object.keys(e),n=t.length,i=0;i<n;i+=1){var o=t[i];if(Object.prototype.hasOwnProperty.call(e,o)&&o in _ze)return WN[r]=e[o],WN[r]}return""}var wze=xze("animationend"),bze=xze("transitionend"),ZN=!!(wze&&bze),TZ=wze||"animationend",AZ=bze||"transitionend";function CZ(r,e){if(!r)return null;if(Ln(r)==="object"){var t=e.replace(/-\w/g,function(n){return n[1].toUpperCase()});return r[t]}return"".concat(r,"-").concat(e)}var Sze=function(r){var e=(0,MZ.useRef)(),t=(0,MZ.useRef)(r);t.current=r;var n=YN.useCallback(function(a){t.current(a)},[]);function i(a){a&&(a.removeEventListener(AZ,n),a.removeEventListener(TZ,n))}function o(a){e.current&&e.current!==a&&i(e.current),a&&a!==e.current&&(a.addEventListener(AZ,n),a.addEventListener(TZ,n),e.current=a)}return YN.useEffect(function(){return function(){i(e.current)}},[]),[o,i]};var KN=Me(dt()),Ner=Qc()?KN.useLayoutEffect:KN.useEffect,XN=Ner;var Ize=Me(dt());var JN=Me(dt()),Eze=function(){var r=JN.useRef(null);function e(){Us.cancel(r.current)}function t(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var o=Us(function(){i<=1?n({isCanceled:function(){return o!==r.current}}):t(n,i-1)});r.current=o}return JN.useEffect(function(){return function(){e()}},[]),[t,e]};var ker=[Vs,Th,Fd,$N],qer=[Vs,HN],RZ=!1,Tze=!0;function QN(r){return r===Fd||r===$N}var Aze=function(r,e,t){var n=Eh(IZ),i=_n(n,2),o=i[0],a=i[1],c=Eze(),h=_n(c,2),d=h[0],v=h[1];function x(){a(Vs,!0)}var S=e?qer:ker;return XN(function(){if(o!==IZ&&o!==$N){var T=S.indexOf(o),L=S[T+1],k=t(o);k===RZ?a(L,!0):L&&d(function(R){function D(){R.isCanceled()||a(L,!0)}k===!0?D():Promise.resolve(k).then(D)})}},[r,o]),Ize.useEffect(function(){return function(){v()}},[]),[x,o]};function PZ(r,e,t,n){var i=n.motionEnter,o=i===void 0?!0:i,a=n.motionAppear,c=a===void 0?!0:a,h=n.motionLeave,d=h===void 0?!0:h,v=n.motionDeadline,x=n.motionLeaveImmediately,S=n.onAppearPrepare,T=n.onEnterPrepare,L=n.onLeavePrepare,k=n.onAppearStart,R=n.onEnterStart,D=n.onLeaveStart,j=n.onAppearActive,B=n.onEnterActive,$=n.onLeaveActive,ee=n.onAppearEnd,J=n.onEnterEnd,ie=n.onLeaveEnd,ue=n.onVisibleChanged,le=Eh(),_e=_n(le,2),Re=_e[0],ze=_e[1],ke=Eh(Ih),Ve=_n(ke,2),We=Ve[0],Te=Ve[1],Se=Eh(null),Ae=_n(Se,2),$e=Ae[0],Ge=Ae[1],Ke=(0,zd.useRef)(!1),Pe=(0,zd.useRef)(null);function at(){return t()}var Tt=(0,zd.useRef)(!1);function Le(){Te(Ih,!0),Ge(null,!0)}function Ye(or){var Wt=at();if(!(or&&!or.deadline&&or.target!==Wt)){var lr=Tt.current,Pr;We===uI&&lr?Pr=ee==null?void 0:ee(Wt,or):We===cI&&lr?Pr=J==null?void 0:J(Wt,or):We===fI&&lr&&(Pr=ie==null?void 0:ie(Wt,or)),We!==Ih&&lr&&Pr!==!1&&Le()}}var Fe=Sze(Ye),Ze=_n(Fe,1),tt=Ze[0],Qe=function(Wt){var lr,Pr,en;switch(Wt){case uI:return lr={},ct(lr,Vs,S),ct(lr,Th,k),ct(lr,Fd,j),lr;case cI:return Pr={},ct(Pr,Vs,T),ct(Pr,Th,R),ct(Pr,Fd,B),Pr;case fI:return en={},ct(en,Vs,L),ct(en,Th,D),ct(en,Fd,$),en;default:return{};}},Dt=e2.useMemo(function(){return Qe(We)},[We]),Kt=Aze(We,!r,function(or){if(or===Vs){var Wt=Dt[Vs];return Wt?Wt(at()):RZ}if(jt in Dt){var lr;Ge(((lr=Dt[jt])===null||lr===void 0?void 0:lr.call(Dt,at(),null))||null)}return jt===Fd&&(tt(at()),v>0&&(clearTimeout(Pe.current),Pe.current=setTimeout(function(){Ye({deadline:!0})},v))),jt===HN&&Le(),Tze}),_t=_n(Kt,2),be=_t[0],jt=_t[1],Qt=QN(jt);Tt.current=Qt,XN(function(){ze(e);var or=Ke.current;Ke.current=!0;var Wt;!or&&e&&c&&(Wt=uI),or&&e&&o&&(Wt=cI),(or&&!e&&d||!or&&x&&!e&&d)&&(Wt=fI);var lr=Qe(Wt);Wt&&(r||lr[Vs])?(Te(Wt),be()):Te(Ih)},[e]),(0,zd.useEffect)(function(){(We===uI&&!c||We===cI&&!o||We===fI&&!d)&&Te(Ih)},[c,o,d]),(0,zd.useEffect)(function(){return function(){Ke.current=!1,clearTimeout(Pe.current)}},[]);var Ft=e2.useRef(!1);(0,zd.useEffect)(function(){Re&&(Ft.current=!0),Re!==void 0&&We===Ih&&((Ft.current||Re)&&(ue==null||ue(Re)),Ft.current=!0)},[Re,We]);var nr=$e;return Dt[Vs]&&jt===Th&&(nr=yt({transition:"none"},nr)),[We,jt,nr,Re!=null?Re:e]}function jer(r){var e=r;Ln(r)==="object"&&(e=r.transitionSupport);function t(i,o){return!!(i.motionName&&e&&o!==!1)}var n=Gs.forwardRef(function(i,o){var a=i.visible,c=a===void 0?!0:a,h=i.removeOnLeave,d=h===void 0?!0:h,v=i.forceRender,x=i.children,S=i.motionName,T=i.leavedClassName,L=i.eventProps,k=Gs.useContext(dze),R=k.motion,D=t(i,R),j=(0,OZ.useRef)(),B=(0,OZ.useRef)();function $(){try{return j.current instanceof HTMLElement?j.current:lI(B.current)}catch(Ge){return null}}var ee=PZ(D,c,$,i),J=_n(ee,4),ie=J[0],ue=J[1],le=J[2],_e=J[3],Re=Gs.useRef(_e);_e&&(Re.current=!0);var ze=Gs.useCallback(function(Ge){j.current=Ge,xZ(o,Ge)},[o]),ke,Ve=yt(yt({},L),{},{visible:c});if(!x)ke=null;else if(ie===Ih)_e?ke=x(yt({},Ve),ze):!d&&Re.current&&T?ke=x(yt(yt({},Ve),{},{className:T}),ze):v||!d&&!T?ke=x(yt(yt({},Ve),{},{style:{display:"none"}}),ze):ke=null;else{var We,Te;ue===Vs?Te="prepare":QN(ue)?Te="active":ue===Th&&(Te="start");var Se=CZ(S,"".concat(ie,"-").concat(Te));ke=x(yt(yt({},Ve),{},{className:(0,Cze.default)(CZ(S,ie),(We={},ct(We,Se,Se&&Te),ct(We,S,typeof S=="string"),We)),style:le}),ze)}if(Gs.isValidElement(ke)&&GN(ke)){var Ae=ke,$e=Ae.ref;$e||(ke=Gs.cloneElement(ke,{ref:ze}))}return Gs.createElement(vze,{ref:B},ke)});return n.displayName="CSSMotion",n}var t2=jer(ZN);var qv=Me(dt());var r2="add",n2="keep",i2="remove",a2="removed";function Fer(r){var e;return r&&Ln(r)==="object"&&"key"in r?e=r:e={key:r},yt(yt({},e),{},{key:String(e.key)})}function o2(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return r.map(Fer)}function Mze(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=[],n=0,i=e.length,o=o2(r),a=o2(e);o.forEach(function(d){for(var v=!1,x=n;x<i;x+=1){var S=a[x];if(S.key===d.key){n<x&&(t=t.concat(a.slice(n,x).map(function(T){return yt(yt({},T),{},{status:r2})})),n=x),t.push(yt(yt({},S),{},{status:n2})),n+=1,v=!0;break}}v||t.push(yt(yt({},d),{},{status:i2}))}),n<i&&(t=t.concat(a.slice(n).map(function(d){return yt(yt({},d),{},{status:r2})})));var c={};t.forEach(function(d){var v=d.key;c[v]=(c[v]||0)+1});var h=Object.keys(c).filter(function(d){return c[d]>1});return h.forEach(function(d){t=t.filter(function(v){var x=v.key,S=v.status;return x!==d||S!==i2}),t.forEach(function(v){v.key===d&&(v.status=n2)})}),t}var zer=["component","children","onVisibleChanged","onAllRemoved"],Ber=["status"],Uer=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function Ver(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t2,t=function(n){na(o,n);var i=ia(o);function o(){var a;ta(this,o);for(var c=arguments.length,h=new Array(c),d=0;d<c;d++)h[d]=arguments[d];return a=i.call.apply(i,[this].concat(h)),ct(Lr(a),"state",{keyEntities:[]}),ct(Lr(a),"removeKey",function(v){var x=a.state.keyEntities,S=x.map(function(T){return T.key!==v?T:yt(yt({},T),{},{status:a2})});return a.setState({keyEntities:S}),S.filter(function(T){var L=T.status;return L!==a2}).length}),a}return ra(o,[{key:"render",value:function(){var c=this,h=this.state.keyEntities,d=this.props,v=d.component,x=d.children,S=d.onVisibleChanged,T=d.onAllRemoved,L=Na(d,zer),k=v||qv.Fragment,R={};return Uer.forEach(function(D){R[D]=L[D],delete L[D]}),delete L.keys,qv.createElement(k,L,h.map(function(D,j){var B=D.status,$=Na(D,Ber),ee=B===r2||B===n2;return qv.createElement(e,nn({},R,{key:$.key,visible:ee,eventProps:$,onVisibleChanged:function(ie){if(S==null||S(ie,{key:$.key}),!ie){var ue=c.removeKey($.key);ue===0&&T&&T()}}}),function(J,ie){return x(yt(yt({},J),{},{index:j}),ie)})}))}}],[{key:"getDerivedStateFromProps",value:function(c,h){var d=c.keys,v=h.keyEntities,x=o2(d),S=Mze(v,x);return{keyEntities:S.filter(function(T){var L=v.find(function(k){var R=k.key;return T.key===R});return!(L&&L.status===a2&&T.status===i2)})}}}]),o}(qv.Component);return ct(t,"defaultProps",{component:"div"}),t}var Ger=Ver(ZN);var ex=t2;function s2(r){var e=r.prefixCls,t=r.motion,n=r.animation,i=r.transitionName;return t||(n?{motionName:"".concat(e,"-").concat(n)}:i?{motionName:i}:null)}function DZ(r){var e=r.prefixCls,t=r.visible,n=r.zIndex,i=r.mask,o=r.maskMotion,a=r.maskAnimation,c=r.maskTransitionName;if(!i)return null;var h={};return(o||c||a)&&(h=yt({motionAppear:!0},s2({motion:o,prefixCls:e,transitionName:c,animation:a}))),LZ.createElement(ex,nn({},h,{visible:t,removeOnLeave:!0}),function(d){var v=d.className;return LZ.createElement("div",{style:{zIndex:n},className:(0,Rze.default)("".concat(e,"-mask"),v)})})}var xl=Me(dt()),Fv=Me(dt());function Pze(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Oze(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pze(Object(t),!0).forEach(function(n){$er(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Pze(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function FZ(r){"@babel/helpers - typeof";return FZ=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FZ(r)}function $er(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var hI,Her={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function h2(){if(hI!==void 0)return hI;hI="";var r=document.createElement("p").style,e="Transform";for(var t in Her)t+e in r&&(hI=t);return hI}function $ze(){return h2()?"".concat(h2(),"TransitionProperty"):"transitionProperty"}function p2(){return h2()?"".concat(h2(),"Transform"):"transform"}function Lze(r,e){var t=$ze();t&&(r.style[t]=e,t!=="transitionProperty"&&(r.style.transitionProperty=e))}function NZ(r,e){var t=p2();t&&(r.style[t]=e,t!=="transform"&&(r.style.transform=e))}function Wer(r){return r.style.transitionProperty||r.style[$ze()]}function Zer(r){var e=window.getComputedStyle(r,null),t=e.getPropertyValue("transform")||e.getPropertyValue(p2());if(t&&t!=="none"){var n=t.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(n[12]||n[4],0),y:parseFloat(n[13]||n[5],0)}}return{x:0,y:0}}var Yer=/matrix\((.*)\)/,Ker=/matrix3d\((.*)\)/;function Xer(r,e){var t=window.getComputedStyle(r,null),n=t.getPropertyValue("transform")||t.getPropertyValue(p2());if(n&&n!=="none"){var i,o=n.match(Yer);if(o)o=o[1],i=o.split(",").map(function(c){return parseFloat(c,10)}),i[4]=e.x,i[5]=e.y,NZ(r,"matrix(".concat(i.join(","),")"));else{var a=n.match(Ker)[1];i=a.split(",").map(function(c){return parseFloat(c,10)}),i[12]=e.x,i[13]=e.y,NZ(r,"matrix3d(".concat(i.join(","),")"))}}else NZ(r,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}var Jer=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,mI;function Dze(r){var e=r.style.display;r.style.display="none",r.offsetHeight,r.style.display=e}function tx(r,e,t){var n=t;if(FZ(e)==="object"){for(var i in e)e.hasOwnProperty(i)&&tx(r,i,e[i]);return}if(typeof n!="undefined"){typeof n=="number"&&(n="".concat(n,"px")),r.style[e]=n;return}return mI(r,e)}function Qer(r){var e,t,n,i=r.ownerDocument,o=i.body,a=i&&i.documentElement;return e=r.getBoundingClientRect(),t=Math.floor(e.left),n=Math.floor(e.top),t-=a.clientLeft||o.clientLeft||0,n-=a.clientTop||o.clientTop||0,{left:t,top:n}}function Hze(r,e){var t=r["page".concat(e?"Y":"X","Offset")],n="scroll".concat(e?"Top":"Left");if(typeof t!="number"){var i=r.document;t=i.documentElement[n],typeof t!="number"&&(t=i.body[n])}return t}function Wze(r){return Hze(r)}function Zze(r){return Hze(r,!0)}function dI(r){var e=Qer(r),t=r.ownerDocument,n=t.defaultView||t.parentWindow;return e.left+=Wze(n),e.top+=Zze(n),e}function VZ(r){return r!=null&&r==r.window}function Yze(r){return VZ(r)?r.document:r.nodeType===9?r:r.ownerDocument}function etr(r,e,t){var n=t,i="",o=Yze(r);return n=n||o.defaultView.getComputedStyle(r,null),n&&(i=n.getPropertyValue(e)||n[e]),i}var ttr=new RegExp("^(".concat(Jer,")(?!px)[a-z%]+$"),"i"),rtr=/^(top|right|bottom|left)$/,kZ="currentStyle",qZ="runtimeStyle",jv="left",ntr="px";function itr(r,e){var t=r[kZ]&&r[kZ][e];if(ttr.test(t)&&!rtr.test(e)){var n=r.style,i=n[jv],o=r[qZ][jv];r[qZ][jv]=r[kZ][jv],n[jv]=e==="fontSize"?"1em":t||0,t=n.pixelLeft+ntr,n[jv]=i,r[qZ][jv]=o}return t===""?"auto":t}typeof window!="undefined"&&(mI=window.getComputedStyle?etr:itr);function l2(r,e){return r==="left"?e.useCssRight?"right":r:e.useCssBottom?"bottom":r}function Nze(r){if(r==="left")return"right";if(r==="right")return"left";if(r==="top")return"bottom";if(r==="bottom")return"top"}function kze(r,e,t){tx(r,"position")==="static"&&(r.style.position="relative");var n=-999,i=-999,o=l2("left",t),a=l2("top",t),c=Nze(o),h=Nze(a);o!=="left"&&(n=999),a!=="top"&&(i=999);var d="",v=dI(r);("left"in e||"top"in e)&&(d=Wer(r)||"",Lze(r,"none")),"left"in e&&(r.style[c]="",r.style[o]="".concat(n,"px")),"top"in e&&(r.style[h]="",r.style[a]="".concat(i,"px")),Dze(r);var x=dI(r),S={};for(var T in e)if(e.hasOwnProperty(T)){var L=l2(T,t),k=T==="left"?n:i,R=v[T]-x[T];L===T?S[L]=k+R:S[L]=k-R}tx(r,S),Dze(r),("left"in e||"top"in e)&&Lze(r,d);var D={};for(var j in e)if(e.hasOwnProperty(j)){var B=l2(j,t),$=e[j]-v[j];j===B?D[B]=S[B]+$:D[B]=S[B]-$}tx(r,D)}function otr(r,e){var t=dI(r),n=Zer(r),i={x:n.x,y:n.y};"left"in e&&(i.x=n.x+e.left-t.left),"top"in e&&(i.y=n.y+e.top-t.top),Xer(r,i)}function atr(r,e,t){if(t.ignoreShake){var n=dI(r),i=n.left.toFixed(0),o=n.top.toFixed(0),a=e.left.toFixed(0),c=e.top.toFixed(0);if(i===a&&o===c)return}t.useCssRight||t.useCssBottom?kze(r,e,t):t.useCssTransform&&p2()in document.body.style?otr(r,e):kze(r,e,t)}function GZ(r,e){for(var t=0;t<r.length;t++)e(r[t])}function Kze(r){return mI(r,"boxSizing")==="border-box"}var str=["margin","border","padding"],zZ=-1,ltr=2,BZ=1,utr=0;function ctr(r,e,t){var n={},i=r.style,o;for(o in e)e.hasOwnProperty(o)&&(n[o]=i[o],i[o]=e[o]);t.call(r);for(o in e)e.hasOwnProperty(o)&&(i[o]=n[o])}function pI(r,e,t){var n=0,i,o,a;for(o=0;o<e.length;o++)if(i=e[o],i)for(a=0;a<t.length;a++){var c=void 0;i==="border"?c="".concat(i).concat(t[a],"Width"):c=i+t[a],n+=parseFloat(mI(r,c))||0}return n}var ef={getParent:function(e){var t=e;do t.nodeType===11&&t.host?t=t.host:t=t.parentNode;while(t&&t.nodeType!==1&&t.nodeType!==9);return t}};GZ(["Width","Height"],function(r){ef["doc".concat(r)]=function(e){var t=e.document;return Math.max(t.documentElement["scroll".concat(r)],t.body["scroll".concat(r)],ef["viewport".concat(r)](t))},ef["viewport".concat(r)]=function(e){var t="client".concat(r),n=e.document,i=n.body,o=n.documentElement,a=o[t];return n.compatMode==="CSS1Compat"&&a||i&&i[t]||a}});function qze(r,e,t){var n=t;if(VZ(r))return e==="width"?ef.viewportWidth(r):ef.viewportHeight(r);if(r.nodeType===9)return e==="width"?ef.docWidth(r):ef.docHeight(r);var i=e==="width"?["Left","Right"]:["Top","Bottom"],o=Math.floor(e==="width"?r.getBoundingClientRect().width:r.getBoundingClientRect().height),a=Kze(r),c=0;(o==null||o<=0)&&(o=void 0,c=mI(r,e),(c==null||Number(c)<0)&&(c=r.style[e]||0),c=Math.floor(parseFloat(c))||0),n===void 0&&(n=a?BZ:zZ);var h=o!==void 0||a,d=o||c;return n===zZ?h?d-pI(r,["border","padding"],i):c:h?n===BZ?d:d+(n===ltr?-pI(r,["border"],i):pI(r,["margin"],i)):c+pI(r,str.slice(n),i)}var ftr={position:"absolute",visibility:"hidden",display:"block"};function jze(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n,i=e[0];return i.offsetWidth!==0?n=qze.apply(void 0,e):ctr(i,ftr,function(){n=qze.apply(void 0,e)}),n}GZ(["width","height"],function(r){var e=r.charAt(0).toUpperCase()+r.slice(1);ef["outer".concat(e)]=function(n,i){return n&&jze(n,r,i?utr:BZ)};var t=r==="width"?["Left","Right"]:["Top","Bottom"];ef[r]=function(n,i){var o=i;if(o!==void 0){if(n){var a=Kze(n);return a&&(o+=pI(n,["padding","border"],t)),tx(n,r,o)}return}return n&&jze(n,r,zZ)}});function Xze(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}var Dr={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:Yze,offset:function(e,t,n){if(typeof t!="undefined")atr(e,t,n||{});else return dI(e)},isWindow:VZ,each:GZ,css:tx,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);var i=e.overflow;if(i)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:Xze,getWindowScrollLeft:function(e){return Wze(e)},getWindowScrollTop:function(e){return Zze(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)Dr.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};Xze(Dr,ef);var jZ=Dr.getParent;function UZ(r){if(Dr.isWindow(r)||r.nodeType===9)return null;var e=Dr.getDocument(r),t=e.body,n,i=Dr.css(r,"position"),o=i==="fixed"||i==="absolute";if(!o)return r.nodeName.toLowerCase()==="html"?null:jZ(r);for(n=jZ(r);n&&n!==t&&n.nodeType!==9;n=jZ(n))if(i=Dr.css(n,"position"),i!=="static")return n;return null}var Fze=Dr.getParent;function htr(r){if(Dr.isWindow(r)||r.nodeType===9)return!1;var e=Dr.getDocument(r),t=e.body,n=null;for(n=Fze(r);n&&n!==t&&n!==e;n=Fze(n)){var i=Dr.css(n,"position");if(i==="fixed")return!0}return!1}function $Z(r,e){for(var t={left:0,right:1/0,top:0,bottom:1/0},n=UZ(r),i=Dr.getDocument(r),o=i.defaultView||i.parentWindow,a=i.body,c=i.documentElement;n;){if((navigator.userAgent.indexOf("MSIE")===-1||n.clientWidth!==0)&&n!==a&&n!==c&&Dr.css(n,"overflow")!=="visible"){var h=Dr.offset(n);h.left+=n.clientLeft,h.top+=n.clientTop,t.top=Math.max(t.top,h.top),t.right=Math.min(t.right,h.left+n.clientWidth),t.bottom=Math.min(t.bottom,h.top+n.clientHeight),t.left=Math.max(t.left,h.left)}else if(n===a||n===c)break;n=UZ(n)}var d=null;if(!Dr.isWindow(r)&&r.nodeType!==9){d=r.style.position;var v=Dr.css(r,"position");v==="absolute"&&(r.style.position="fixed")}var x=Dr.getWindowScrollLeft(o),S=Dr.getWindowScrollTop(o),T=Dr.viewportWidth(o),L=Dr.viewportHeight(o),k=c.scrollWidth,R=c.scrollHeight,D=window.getComputedStyle(a);if(D.overflowX==="hidden"&&(k=o.innerWidth),D.overflowY==="hidden"&&(R=o.innerHeight),r.style&&(r.style.position=d),e||htr(r))t.left=Math.max(t.left,x),t.top=Math.max(t.top,S),t.right=Math.min(t.right,x+T),t.bottom=Math.min(t.bottom,S+L);else{var j=Math.max(k,x+T);t.right=Math.min(t.right,j);var B=Math.max(R,S+L);t.bottom=Math.min(t.bottom,B)}return t.top>=0&&t.left>=0&&t.bottom>t.top&&t.right>t.left?t:null}function ptr(r,e,t,n){var i=Dr.clone(r),o={width:e.width,height:e.height};return n.adjustX&&i.left<t.left&&(i.left=t.left),n.resizeWidth&&i.left>=t.left&&i.left+o.width>t.right&&(o.width-=i.left+o.width-t.right),n.adjustX&&i.left+o.width>t.right&&(i.left=Math.max(t.right-o.width,t.left)),n.adjustY&&i.top<t.top&&(i.top=t.top),n.resizeHeight&&i.top>=t.top&&i.top+o.height>t.bottom&&(o.height-=i.top+o.height-t.bottom),n.adjustY&&i.top+o.height>t.bottom&&(i.top=Math.max(t.bottom-o.height,t.top)),Dr.mix(i,o)}function HZ(r){var e,t,n;if(!Dr.isWindow(r)&&r.nodeType!==9)e=Dr.offset(r),t=Dr.outerWidth(r),n=Dr.outerHeight(r);else{var i=Dr.getWindow(r);e={left:Dr.getWindowScrollLeft(i),top:Dr.getWindowScrollTop(i)},t=Dr.viewportWidth(i),n=Dr.viewportHeight(i)}return e.width=t,e.height=n,e}function zze(r,e){var t=e.charAt(0),n=e.charAt(1),i=r.width,o=r.height,a=r.left,c=r.top;return t==="c"?c+=o/2:t==="b"&&(c+=o),n==="c"?a+=i/2:n==="r"&&(a+=i),{left:a,top:c}}function u2(r,e,t,n,i){var o=zze(e,t[1]),a=zze(r,t[0]),c=[a.left-o.left,a.top-o.top];return{left:Math.round(r.left-c[0]+n[0]-i[0]),top:Math.round(r.top-c[1]+n[1]-i[1])}}function Bze(r,e,t){return r.left<t.left||r.left+e.width>t.right}function Uze(r,e,t){return r.top<t.top||r.top+e.height>t.bottom}function dtr(r,e,t){return r.left>t.right||r.left+e.width<t.left}function mtr(r,e,t){return r.top>t.bottom||r.top+e.height<t.top}function c2(r,e,t){var n=[];return Dr.each(r,function(i){n.push(i.replace(e,function(o){return t[o]}))}),n}function f2(r,e){return r[e]=-r[e],r}function Vze(r,e){var t;return /%$/.test(r)?t=parseInt(r.substring(0,r.length-1),10)/100*e:t=parseInt(r,10),t||0}function Gze(r,e){r[0]=Vze(r[0],e.width),r[1]=Vze(r[1],e.height)}function Jze(r,e,t,n){var i=t.points,o=t.offset||[0,0],a=t.targetOffset||[0,0],c=t.overflow,h=t.source||r;o=[].concat(o),a=[].concat(a),c=c||{};var d={},v=0,x=!!(c&&c.alwaysByViewport),S=$Z(h,x),T=HZ(h);Gze(o,T),Gze(a,e);var L=u2(T,e,i,o,a),k=Dr.merge(T,L);if(S&&(c.adjustX||c.adjustY)&&n){if(c.adjustX&&Bze(L,T,S)){var R=c2(i,/[lr]/gi,{l:"r",r:"l"}),D=f2(o,0),j=f2(a,0),B=u2(T,e,R,D,j);dtr(B,T,S)||(v=1,i=R,o=D,a=j)}if(c.adjustY&&Uze(L,T,S)){var $=c2(i,/[tb]/gi,{t:"b",b:"t"}),ee=f2(o,1),J=f2(a,1),ie=u2(T,e,$,ee,J);mtr(ie,T,S)||(v=1,i=$,o=ee,a=J)}v&&(L=u2(T,e,i,o,a),Dr.mix(k,L));var ue=Bze(L,T,S),le=Uze(L,T,S);if(ue||le){var _e=i;ue&&(_e=c2(i,/[lr]/gi,{l:"r",r:"l"})),le&&(_e=c2(i,/[tb]/gi,{t:"b",b:"t"})),i=_e,o=t.offset||[0,0],a=t.targetOffset||[0,0]}d.adjustX=c.adjustX&&ue,d.adjustY=c.adjustY&&le,(d.adjustX||d.adjustY)&&(k=ptr(L,T,S,d))}return k.width!==T.width&&Dr.css(h,"width",Dr.width(h)+k.width-T.width),k.height!==T.height&&Dr.css(h,"height",Dr.height(h)+k.height-T.height),Dr.offset(h,{left:k.left,top:k.top},{useCssRight:t.useCssRight,useCssBottom:t.useCssBottom,useCssTransform:t.useCssTransform,ignoreShake:t.ignoreShake}),{points:i,offset:o,targetOffset:a,overflow:d}}function vtr(r,e){var t=$Z(r,e),n=HZ(r);return!t||n.left+n.width<=t.left||n.top+n.height<=t.top||n.left>=t.right||n.top>=t.bottom}function d2(r,e,t){var n=t.target||e,i=HZ(n),o=!vtr(n,t.overflow&&t.overflow.alwaysByViewport);return Jze(r,i,t,o)}d2.__getOffsetParent=UZ;d2.__getVisibleRectForElement=$Z;function Qze(r,e,t){var n,i,o=Dr.getDocument(r),a=o.defaultView||o.parentWindow,c=Dr.getWindowScrollLeft(a),h=Dr.getWindowScrollTop(a),d=Dr.viewportWidth(a),v=Dr.viewportHeight(a);"pageX"in e?n=e.pageX:n=c+e.clientX,"pageY"in e?i=e.pageY:i=h+e.clientY;var x={left:n,top:i,width:0,height:0},S=n>=0&&n<=c+d&&i>=0&&i<=h+v,T=[t.points[0],"cc"];return Jze(r,x,Oze(Oze({},t),{},{points:T}),S)}function gtr(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function i(o,a){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,h=n.has(o);if(wh(!h,"Warning: There may be circular references"),h)return!1;if(o===a)return!0;if(t&&c>1)return!1;n.add(o);var d=c+1;if(Array.isArray(o)){if(!Array.isArray(a)||o.length!==a.length)return!1;for(var v=0;v<o.length;v++)if(!i(o[v],a[v],d))return!1;return!0}if(o&&a&&Ln(o)==="object"&&Ln(a)==="object"){var x=Object.keys(o);return x.length!==Object.keys(a).length?!1:x.every(function(S){return i(o[S],a[S],d)})}return!1}return i(r,e)}var e4e=gtr;var t4e=function(r){if(!r)return!1;if(r instanceof Element){if(r.offsetParent)return!0;if(r.getBBox){var e=r.getBBox(),t=e.width,n=e.height;if(t||n)return!0}if(r.getBoundingClientRect){var i=r.getBoundingClientRect(),o=i.width,a=i.height;if(o||a)return!0}}return!1};var rx=Me(dt());var r4e=Qc()?rx.useLayoutEffect:rx.useEffect,ytr=function(e,t){var n=rx.useRef(!0);r4e(function(){return e(n.current)},t),r4e(function(){return n.current=!1,function(){n.current=!0}},[])};var vI=ytr;var oa=Me(dt());var WZ=Me(dt()),n4e=function(r,e){var t=WZ.default.useRef(!1),n=WZ.default.useRef(null);function i(){window.clearTimeout(n.current)}function o(a){if(i(),!t.current||a===!0){if(r(a)===!1)return;t.current=!0,n.current=window.setTimeout(function(){t.current=!1},e)}else n.current=window.setTimeout(function(){t.current=!1,o()},e)}return[o,function(){t.current=!1,i()}]};var o4e=function(){if(typeof Map!="undefined")return Map;function r(e,t){var n=-1;return e.some(function(i,o){return i[0]===t?(n=o,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var n=r(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(t,n){var i=r(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},e.prototype.delete=function(t){var n=this.__entries__,i=r(n,t);~i&&n.splice(i,1)},e.prototype.has=function(t){return!!~r(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,n){n===void 0&&(n=null);for(var i=0,o=this.__entries__;i<o.length;i++){var a=o[i];t.call(n,a[1],a[0])}},e}()}(),ZZ=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,m2=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),_tr=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(m2):function(r){return setTimeout(function(){return r(Date.now())},1e3/60)}}(),xtr=2;function wtr(r,e){var t=!1,n=!1,i=0;function o(){t&&(t=!1,r()),n&&c()}function a(){_tr(o)}function c(){var h=Date.now();if(t){if(h-i<xtr)return;n=!0}else t=!0,n=!1,setTimeout(a,e);i=h}return c}var btr=20,Str=["top","right","bottom","left","width","height","size","weight"],Etr=typeof MutationObserver!="undefined",Itr=function(){function r(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=wtr(this.refresh.bind(this),btr)}return r.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},r.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},r.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},r.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},r.prototype.connect_=function(){!ZZ||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Etr?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},r.prototype.disconnect_=function(){!ZZ||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},r.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=t===void 0?"":t,i=Str.some(function(o){return!!~n.indexOf(o)});i&&this.refresh()},r.getInstance=function(){return this.instance_||(this.instance_=new r),this.instance_},r.instance_=null,r}(),a4e=function(r,e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];Object.defineProperty(r,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return r},nx=function(r){var e=r&&r.ownerDocument&&r.ownerDocument.defaultView;return e||m2},s4e=g2(0,0,0,0);function v2(r){return parseFloat(r)||0}function i4e(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(n,i){var o=r["border-"+i+"-width"];return n+v2(o)},0)}function Ttr(r){for(var e=["top","right","bottom","left"],t={},n=0,i=e;n<i.length;n++){var o=i[n],a=r["padding-"+o];t[o]=v2(a)}return t}function Atr(r){var e=r.getBBox();return g2(0,0,e.width,e.height)}function Ctr(r){var e=r.clientWidth,t=r.clientHeight;if(!e&&!t)return s4e;var n=nx(r).getComputedStyle(r),i=Ttr(n),o=i.left+i.right,a=i.top+i.bottom,c=v2(n.width),h=v2(n.height);if(n.boxSizing==="border-box"&&(Math.round(c+o)!==e&&(c-=i4e(n,"left","right")+o),Math.round(h+a)!==t&&(h-=i4e(n,"top","bottom")+a)),!Rtr(r)){var d=Math.round(c+o)-e,v=Math.round(h+a)-t;Math.abs(d)!==1&&(c-=d),Math.abs(v)!==1&&(h-=v)}return g2(i.left,i.top,c,h)}var Mtr=function(){return typeof SVGGraphicsElement!="undefined"?function(r){return r instanceof nx(r).SVGGraphicsElement}:function(r){return r instanceof nx(r).SVGElement&&typeof r.getBBox=="function"}}();function Rtr(r){return r===nx(r).document.documentElement}function Ptr(r){return ZZ?Mtr(r)?Atr(r):Ctr(r):s4e}function Otr(r){var e=r.x,t=r.y,n=r.width,i=r.height,o=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,a=Object.create(o.prototype);return a4e(a,{x:e,y:t,width:n,height:i,top:t,right:e+n,bottom:i+t,left:e}),a}function g2(r,e,t,n){return{x:r,y:e,width:t,height:n}}var Ltr=function(){function r(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=g2(0,0,0,0),this.target=e}return r.prototype.isActive=function(){var e=Ptr(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},r.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},r}(),Dtr=function(){function r(e,t){var n=Otr(t);a4e(this,{target:e,contentRect:n})}return r}(),Ntr=function(){function r(e,t,n){if(this.activeObservations_=[],this.observations_=new o4e,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return r.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof nx(e).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var t=this.observations_;t.has(e)||(t.set(e,new Ltr(e)),this.controller_.addObserver(this),this.controller_.refresh())}},r.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof nx(e).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},r.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},r.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},r.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(n){return new Dtr(n.target,n.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},r.prototype.clearActive=function(){this.activeObservations_.splice(0)},r.prototype.hasActive=function(){return this.activeObservations_.length>0},r}(),l4e=typeof WeakMap!="undefined"?new WeakMap:new o4e,u4e=function(){function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=Itr.getInstance(),n=new Ntr(e,t,this);l4e.set(this,n)}return r}();["observe","unobserve","disconnect"].forEach(function(r){u4e.prototype[r]=function(){var e;return(e=l4e.get(this))[r].apply(e,arguments)}});var ktr=function(){return typeof m2.ResizeObserver!="undefined"?m2.ResizeObserver:u4e}(),c4e=ktr;function f4e(r,e){return r===e?!0:!r||!e?!1:"pageX"in e&&"pageY"in e?r.pageX===e.pageX&&r.pageY===e.pageY:"clientX"in e&&"clientY"in e?r.clientX===e.clientX&&r.clientY===e.clientY:!1}function h4e(r,e){r!==document.activeElement&&kv(e,r)&&typeof r.focus=="function"&&r.focus()}function YZ(r,e){var t=null,n=null;function i(a){var c=_n(a,1),h=c[0].target;if(document.documentElement.contains(h)){var d=h.getBoundingClientRect(),v=d.width,x=d.height,S=Math.floor(v),T=Math.floor(x);(t!==S||n!==T)&&Promise.resolve().then(function(){e({width:S,height:T})}),t=S,n=T}}var o=new c4e(i);return r&&o.observe(r),function(){o.disconnect()}}function p4e(r){return typeof r!="function"?null:r()}function d4e(r){return Ln(r)!=="object"||!r?null:r}var qtr=function(e,t){var n=e.children,i=e.disabled,o=e.target,a=e.align,c=e.onAlign,h=e.monitorWindowResize,d=e.monitorBufferTime,v=d===void 0?0:d,x=oa.default.useRef({}),S=oa.default.useRef(),T=oa.default.Children.only(n),L=oa.default.useRef({});L.current.disabled=i,L.current.target=o,L.current.align=a,L.current.onAlign=c;var k=n4e(function(){var Re=L.current,ze=Re.disabled,ke=Re.target,Ve=Re.align,We=Re.onAlign,Te=S.current;if(!ze&&ke&&Te){var Se,Ae=p4e(ke),$e=d4e(ke);x.current.element=Ae,x.current.point=$e,x.current.align=Ve;var Ge=document,Ke=Ge.activeElement;return Ae&&t4e(Ae)?Se=d2(Te,Ae,Ve):$e&&(Se=Qze(Te,$e,Ve)),h4e(Ke,Te),We&&Se&&We(Te,Se),!0}return!1},v),R=_n(k,2),D=R[0],j=R[1],B=oa.default.useState(),$=_n(B,2),ee=$[0],J=$[1],ie=oa.default.useState(),ue=_n(ie,2),le=ue[0],_e=ue[1];return vI(function(){J(p4e(o)),_e(d4e(o))}),oa.default.useEffect(function(){(x.current.element!==ee||!f4e(x.current.point,le)||!e4e(x.current.align,a))&&D()}),oa.default.useEffect(function(){var Re=YZ(S.current,D);return Re},[S.current]),oa.default.useEffect(function(){var Re=YZ(ee,D);return Re},[ee]),oa.default.useEffect(function(){i?j():D()},[i]),oa.default.useEffect(function(){if(h){var Re=is(window,"resize",D);return Re.remove}},[h]),oa.default.useEffect(function(){return function(){j()}},[]),oa.default.useImperativeHandle(t,function(){return{forceAlign:function(){return D(!0)}}}),oa.default.isValidElement(T)&&(T=oa.default.cloneElement(T,{ref:J0(T.ref,S)})),T},m4e=oa.default.forwardRef(qtr);m4e.displayName="Align";var v4e=m4e;var g4e=v4e;var b4e=Me(hi());function gI(){"use strict";gI=function(){return e};var r,e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(Te,Se,Ae){Te[Se]=Ae.value},o=typeof Symbol=="function"?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function d(Te,Se,Ae){return Object.defineProperty(Te,Se,{value:Ae,enumerable:!0,configurable:!0,writable:!0}),Te[Se]}try{d({},"")}catch(Te){d=function(Ae,$e,Ge){return Ae[$e]=Ge}}function v(Te,Se,Ae,$e){var Ge=Se&&Se.prototype instanceof D?Se:D,Ke=Object.create(Ge.prototype),Pe=new Ve($e||[]);return i(Ke,"_invoke",{value:_e(Te,Ae,Pe)}),Ke}function x(Te,Se,Ae){try{return{type:"normal",arg:Te.call(Se,Ae)}}catch($e){return{type:"throw",arg:$e}}}e.wrap=v;var S="suspendedStart",T="suspendedYield",L="executing",k="completed",R={};function D(){}function j(){}function B(){}var $={};d($,a,function(){return this});var ee=Object.getPrototypeOf,J=ee&&ee(ee(We([])));J&&J!==t&&n.call(J,a)&&($=J);var ie=B.prototype=D.prototype=Object.create($);function ue(Te){["next","throw","return"].forEach(function(Se){d(Te,Se,function(Ae){return this._invoke(Se,Ae)})})}function le(Te,Se){function Ae(Ge,Ke,Pe,at){var Tt=x(Te[Ge],Te,Ke);if(Tt.type!=="throw"){var Le=Tt.arg,Ye=Le.value;return Ye&&Ln(Ye)=="object"&&n.call(Ye,"__await")?Se.resolve(Ye.__await).then(function(Fe){Ae("next",Fe,Pe,at)},function(Fe){Ae("throw",Fe,Pe,at)}):Se.resolve(Ye).then(function(Fe){Le.value=Fe,Pe(Le)},function(Fe){return Ae("throw",Fe,Pe,at)})}at(Tt.arg)}var $e;i(this,"_invoke",{value:function(Ke,Pe){function at(){return new Se(function(Tt,Le){Ae(Ke,Pe,Tt,Le)})}return $e=$e?$e.then(at,at):at()}})}function _e(Te,Se,Ae){var $e=S;return function(Ge,Ke){if($e===L)throw new Error("Generator is already running");if($e===k){if(Ge==="throw")throw Ke;return{value:r,done:!0}}for(Ae.method=Ge,Ae.arg=Ke;;){var Pe=Ae.delegate;if(Pe){var at=Re(Pe,Ae);if(at){if(at===R)continue;return at}}if(Ae.method==="next")Ae.sent=Ae._sent=Ae.arg;else if(Ae.method==="throw"){if($e===S)throw $e=k,Ae.arg;Ae.dispatchException(Ae.arg)}else Ae.method==="return"&&Ae.abrupt("return",Ae.arg);$e=L;var Tt=x(Te,Se,Ae);if(Tt.type==="normal"){if($e=Ae.done?k:T,Tt.arg===R)continue;return{value:Tt.arg,done:Ae.done}}Tt.type==="throw"&&($e=k,Ae.method="throw",Ae.arg=Tt.arg)}}}function Re(Te,Se){var Ae=Se.method,$e=Te.iterator[Ae];if($e===r)return Se.delegate=null,Ae==="throw"&&Te.iterator.return&&(Se.method="return",Se.arg=r,Re(Te,Se),Se.method==="throw")||Ae!=="return"&&(Se.method="throw",Se.arg=new TypeError("The iterator does not provide a '"+Ae+"' method")),R;var Ge=x($e,Te.iterator,Se.arg);if(Ge.type==="throw")return Se.method="throw",Se.arg=Ge.arg,Se.delegate=null,R;var Ke=Ge.arg;return Ke?Ke.done?(Se[Te.resultName]=Ke.value,Se.next=Te.nextLoc,Se.method!=="return"&&(Se.method="next",Se.arg=r),Se.delegate=null,R):Ke:(Se.method="throw",Se.arg=new TypeError("iterator result is not an object"),Se.delegate=null,R)}function ze(Te){var Se={tryLoc:Te[0]};1 in Te&&(Se.catchLoc=Te[1]),2 in Te&&(Se.finallyLoc=Te[2],Se.afterLoc=Te[3]),this.tryEntries.push(Se)}function ke(Te){var Se=Te.completion||{};Se.type="normal",delete Se.arg,Te.completion=Se}function Ve(Te){this.tryEntries=[{tryLoc:"root"}],Te.forEach(ze,this),this.reset(!0)}function We(Te){if(Te||Te===""){var Se=Te[a];if(Se)return Se.call(Te);if(typeof Te.next=="function")return Te;if(!isNaN(Te.length)){var Ae=-1,$e=function Ge(){for(;++Ae<Te.length;)if(n.call(Te,Ae))return Ge.value=Te[Ae],Ge.done=!1,Ge;return Ge.value=r,Ge.done=!0,Ge};return $e.next=$e}}throw new TypeError(Ln(Te)+" is not iterable")}return j.prototype=B,i(ie,"constructor",{value:B,configurable:!0}),i(B,"constructor",{value:j,configurable:!0}),j.displayName=d(B,h,"GeneratorFunction"),e.isGeneratorFunction=function(Te){var Se=typeof Te=="function"&&Te.constructor;return!!Se&&(Se===j||(Se.displayName||Se.name)==="GeneratorFunction")},e.mark=function(Te){return Object.setPrototypeOf?Object.setPrototypeOf(Te,B):(Te.__proto__=B,d(Te,h,"GeneratorFunction")),Te.prototype=Object.create(ie),Te},e.awrap=function(Te){return{__await:Te}},ue(le.prototype),d(le.prototype,c,function(){return this}),e.AsyncIterator=le,e.async=function(Te,Se,Ae,$e,Ge){Ge===void 0&&(Ge=Promise);var Ke=new le(v(Te,Se,Ae,$e),Ge);return e.isGeneratorFunction(Se)?Ke:Ke.next().then(function(Pe){return Pe.done?Pe.value:Ke.next()})},ue(ie),d(ie,h,"Generator"),d(ie,a,function(){return this}),d(ie,"toString",function(){return"[object Generator]"}),e.keys=function(Te){var Se=Object(Te),Ae=[];for(var $e in Se)Ae.push($e);return Ae.reverse(),function Ge(){for(;Ae.length;){var Ke=Ae.pop();if(Ke in Se)return Ge.value=Ke,Ge.done=!1,Ge}return Ge.done=!0,Ge}},e.values=We,Ve.prototype={constructor:Ve,reset:function(Se){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(ke),!Se)for(var Ae in this)Ae.charAt(0)==="t"&&n.call(this,Ae)&&!isNaN(+Ae.slice(1))&&(this[Ae]=r)},stop:function(){this.done=!0;var Se=this.tryEntries[0].completion;if(Se.type==="throw")throw Se.arg;return this.rval},dispatchException:function(Se){if(this.done)throw Se;var Ae=this;function $e(Le,Ye){return Pe.type="throw",Pe.arg=Se,Ae.next=Le,Ye&&(Ae.method="next",Ae.arg=r),!!Ye}for(var Ge=this.tryEntries.length-1;Ge>=0;--Ge){var Ke=this.tryEntries[Ge],Pe=Ke.completion;if(Ke.tryLoc==="root")return $e("end");if(Ke.tryLoc<=this.prev){var at=n.call(Ke,"catchLoc"),Tt=n.call(Ke,"finallyLoc");if(at&&Tt){if(this.prev<Ke.catchLoc)return $e(Ke.catchLoc,!0);if(this.prev<Ke.finallyLoc)return $e(Ke.finallyLoc)}else if(at){if(this.prev<Ke.catchLoc)return $e(Ke.catchLoc,!0)}else{if(!Tt)throw new Error("try statement without catch or finally");if(this.prev<Ke.finallyLoc)return $e(Ke.finallyLoc)}}}},abrupt:function(Se,Ae){for(var $e=this.tryEntries.length-1;$e>=0;--$e){var Ge=this.tryEntries[$e];if(Ge.tryLoc<=this.prev&&n.call(Ge,"finallyLoc")&&this.prev<Ge.finallyLoc){var Ke=Ge;break}}Ke&&(Se==="break"||Se==="continue")&&Ke.tryLoc<=Ae&&Ae<=Ke.finallyLoc&&(Ke=null);var Pe=Ke?Ke.completion:{};return Pe.type=Se,Pe.arg=Ae,Ke?(this.method="next",this.next=Ke.finallyLoc,R):this.complete(Pe)},complete:function(Se,Ae){if(Se.type==="throw")throw Se.arg;return Se.type==="break"||Se.type==="continue"?this.next=Se.arg:Se.type==="return"?(this.rval=this.arg=Se.arg,this.method="return",this.next="end"):Se.type==="normal"&&Ae&&(this.next=Ae),R},finish:function(Se){for(var Ae=this.tryEntries.length-1;Ae>=0;--Ae){var $e=this.tryEntries[Ae];if($e.finallyLoc===Se)return this.complete($e.completion,$e.afterLoc),ke($e),R}},catch:function(Se){for(var Ae=this.tryEntries.length-1;Ae>=0;--Ae){var $e=this.tryEntries[Ae];if($e.tryLoc===Se){var Ge=$e.completion;if(Ge.type==="throw"){var Ke=Ge.arg;ke($e)}return Ke}}throw new Error("illegal catch attempt")},delegateYield:function(Se,Ae,$e){return this.delegate={iterator:We(Se),resultName:Ae,nextLoc:$e},this.method==="next"&&(this.arg=r),R}},e}function y4e(r,e,t,n,i,o,a){try{var c=r[o](a),h=c.value}catch(d){t(d);return}c.done?e(h):Promise.resolve(h).then(n,i)}function KZ(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(h){y4e(o,n,i,a,c,"next",h)}function c(h){y4e(o,n,i,a,c,"throw",h)}a(void 0)})}}var ix=Me(dt());var _4e=["measure","alignPre","align",null,"motion"],x4e=function(r,e){var t=Eh(null),n=_n(t,2),i=n[0],o=n[1],a=(0,ix.useRef)();function c(v){o(v,!0)}function h(){Us.cancel(a.current)}function d(v){h(),a.current=Us(function(){c(function(x){switch(i){case"align":return"motion";case"motion":return"stable";default:}return x}),v==null||v()})}return(0,ix.useEffect)(function(){c("measure")},[r]),(0,ix.useEffect)(function(){switch(i){case"measure":e();break;default:}i&&(a.current=Us(KZ(gI().mark(function v(){var x,S;return gI().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:x=_4e.indexOf(i),S=_4e[x+1],S&&x!==-1&&c(S);case 3:case"end":return L.stop();}},v)}))))},[i]),(0,ix.useEffect)(function(){return function(){h()}},[]),[i,d]};var y2=Me(dt()),w4e=function(r){var e=y2.useState({width:0,height:0}),t=_n(e,2),n=t[0],i=t[1];function o(c){var h=c.offsetWidth,d=c.offsetHeight,v=c.getBoundingClientRect(),x=v.width,S=v.height;Math.abs(h-x)<1&&Math.abs(d-S)<1&&(h=x,d=S),i({width:h,height:d})}var a=y2.useMemo(function(){var c={};if(r){var h=n.width,d=n.height;r.indexOf("height")!==-1&&d?c.height=d:r.indexOf("minHeight")!==-1&&d&&(c.minHeight=d),r.indexOf("width")!==-1&&h?c.width=h:r.indexOf("minWidth")!==-1&&h&&(c.minWidth=h)}return c},[r,n]);return[a,o]};var S4e=xl.forwardRef(function(r,e){var t=r.visible,n=r.prefixCls,i=r.className,o=r.style,a=r.children,c=r.zIndex,h=r.stretch,d=r.destroyPopupOnHide,v=r.forceRender,x=r.align,S=r.point,T=r.getRootDomNode,L=r.getClassNameFromAlign,k=r.onAlign,R=r.onMouseEnter,D=r.onMouseLeave,j=r.onMouseDown,B=r.onTouchStart,$=r.onClick,ee=(0,Fv.useRef)(),J=(0,Fv.useRef)(),ie=(0,Fv.useState)(),ue=_n(ie,2),le=ue[0],_e=ue[1],Re=w4e(h),ze=_n(Re,2),ke=ze[0],Ve=ze[1];function We(){h&&Ve(T())}var Te=x4e(t,We),Se=_n(Te,2),Ae=Se[0],$e=Se[1],Ge=(0,Fv.useState)(0),Ke=_n(Ge,2),Pe=Ke[0],at=Ke[1],Tt=(0,Fv.useRef)();vI(function(){Ae==="alignPre"&&at(0)},[Ae]);function Le(){return S||T}function Ye(){var _t;(_t=ee.current)===null||_t===void 0||_t.forceAlign()}function Fe(_t,be){var jt=L(be);le!==jt&&_e(jt),at(function(Qt){return Qt+1}),Ae==="align"&&(k==null||k(_t,be))}vI(function(){Ae==="align"&&(Pe<3?Ye():$e(function(){var _t;(_t=Tt.current)===null||_t===void 0||_t.call(Tt)}))},[Pe]);var Ze=yt({},s2(r));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(_t){var be=Ze[_t];Ze[_t]=function(jt,Qt){return $e(),be==null?void 0:be(jt,Qt)}});function tt(){return new Promise(function(_t){Tt.current=_t})}xl.useEffect(function(){!Ze.motionName&&Ae==="motion"&&$e()},[Ze.motionName,Ae]),xl.useImperativeHandle(e,function(){return{forceAlign:Ye,getElement:function(){return J.current}}});var Qe=yt(yt({},ke),{},{zIndex:c,opacity:Ae==="motion"||Ae==="stable"||!t?void 0:0,pointerEvents:!t&&Ae!=="stable"?"none":void 0},o),Dt=!0;x!=null&&x.points&&(Ae==="align"||Ae==="stable")&&(Dt=!1);var Kt=a;return xl.Children.count(a)>1&&(Kt=xl.createElement("div",{className:"".concat(n,"-content")},a)),xl.createElement(ex,nn({visible:t,ref:J,leavedClassName:"".concat(n,"-hidden")},Ze,{onAppearPrepare:tt,onEnterPrepare:tt,removeOnLeave:d,forceRender:v}),function(_t,be){var jt=_t.className,Qt=_t.style,Ft=(0,b4e.default)(n,i,le,jt);return xl.createElement(g4e,{target:Le(),key:"popup",ref:ee,monitorWindowResize:!0,disabled:Dt,align:x,onAlign:Fe},xl.createElement("div",{ref:be,className:Ft,onMouseEnter:R,onMouseLeave:D,onMouseDownCapture:j,onTouchStartCapture:B,onClick:$,style:yt(yt({},Qt),Qe)},Kt))})});S4e.displayName="PopupInner";var E4e=S4e;var xu=Me(dt());var I4e=Me(hi()),T4e=xu.forwardRef(function(r,e){var t=r.prefixCls,n=r.visible,i=r.zIndex,o=r.children,a=r.mobile;a=a===void 0?{}:a;var c=a.popupClassName,h=a.popupStyle,d=a.popupMotion,v=d===void 0?{}:d,x=a.popupRender,S=r.onClick,T=xu.useRef();xu.useImperativeHandle(e,function(){return{forceAlign:function(){},getElement:function(){return T.current}}});var L=yt({zIndex:i},h),k=o;return xu.Children.count(o)>1&&(k=xu.createElement("div",{className:"".concat(t,"-content")},o)),x&&(k=x(k)),xu.createElement(ex,nn({visible:n,ref:T,removeOnLeave:!0},v),function(R,D){var j=R.className,B=R.style,$=(0,I4e.default)(t,c,j);return xu.createElement("div",{ref:D,className:$,onClick:S,style:yt(yt({},B),L)},k)})});T4e.displayName="MobilePopupInner";var A4e=T4e;var jtr=["visible","mobile"],C4e=zv.forwardRef(function(r,e){var t=r.visible,n=r.mobile,i=Na(r,jtr),o=(0,yI.useState)(t),a=_n(o,2),c=a[0],h=a[1],d=(0,yI.useState)(!1),v=_n(d,2),x=v[0],S=v[1],T=yt(yt({},i),{},{visible:c});(0,yI.useEffect)(function(){h(t),t&&n&&S(pze())},[t,n]);var L=x?zv.createElement(A4e,nn({},T,{mobile:n,ref:e})):zv.createElement(E4e,nn({},T,{ref:e}));return zv.createElement("div",null,zv.createElement(DZ,T),L)});C4e.displayName="Popup";var M4e=C4e;var R4e=Me(dt()),Ftr=R4e.createContext(null),XZ=Ftr;function JZ(){}function ztr(){return""}function Btr(r){return r?r.ownerDocument:window.document}var Utr=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function Vtr(r){var e=function(t){na(i,t);var n=ia(i);function i(o){var a;ta(this,i),a=n.call(this,o),ct(Lr(a),"popupRef",wl.createRef()),ct(Lr(a),"triggerRef",wl.createRef()),ct(Lr(a),"portalContainer",void 0),ct(Lr(a),"attachId",void 0),ct(Lr(a),"clickOutsideHandler",void 0),ct(Lr(a),"touchOutsideHandler",void 0),ct(Lr(a),"contextMenuOutsideHandler1",void 0),ct(Lr(a),"contextMenuOutsideHandler2",void 0),ct(Lr(a),"mouseDownTimeout",void 0),ct(Lr(a),"focusTime",void 0),ct(Lr(a),"preClickTime",void 0),ct(Lr(a),"preTouchTime",void 0),ct(Lr(a),"delayTimer",void 0),ct(Lr(a),"hasPopupMouseDown",void 0),ct(Lr(a),"onMouseEnter",function(h){var d=a.props.mouseEnterDelay;a.fireEvents("onMouseEnter",h),a.delaySetPopupVisible(!0,d,d?null:h)}),ct(Lr(a),"onMouseMove",function(h){a.fireEvents("onMouseMove",h),a.setPoint(h)}),ct(Lr(a),"onMouseLeave",function(h){a.fireEvents("onMouseLeave",h),a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)}),ct(Lr(a),"onPopupMouseEnter",function(){a.clearDelayTimer()}),ct(Lr(a),"onPopupMouseLeave",function(h){var d;h.relatedTarget&&!h.relatedTarget.setTimeout&&kv((d=a.popupRef.current)===null||d===void 0?void 0:d.getElement(),h.relatedTarget)||a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)}),ct(Lr(a),"onFocus",function(h){a.fireEvents("onFocus",h),a.clearDelayTimer(),a.isFocusToShow()&&(a.focusTime=Date.now(),a.delaySetPopupVisible(!0,a.props.focusDelay))}),ct(Lr(a),"onMouseDown",function(h){a.fireEvents("onMouseDown",h),a.preClickTime=Date.now()}),ct(Lr(a),"onTouchStart",function(h){a.fireEvents("onTouchStart",h),a.preTouchTime=Date.now()}),ct(Lr(a),"onBlur",function(h){a.fireEvents("onBlur",h),a.clearDelayTimer(),a.isBlurToHide()&&a.delaySetPopupVisible(!1,a.props.blurDelay)}),ct(Lr(a),"onContextMenu",function(h){h.preventDefault(),a.fireEvents("onContextMenu",h),a.setPopupVisible(!0,h)}),ct(Lr(a),"onContextMenuClose",function(){a.isContextMenuToShow()&&a.close()}),ct(Lr(a),"onClick",function(h){if(a.fireEvents("onClick",h),a.focusTime){var d;if(a.preClickTime&&a.preTouchTime?d=Math.min(a.preClickTime,a.preTouchTime):a.preClickTime?d=a.preClickTime:a.preTouchTime&&(d=a.preTouchTime),Math.abs(d-a.focusTime)<20)return;a.focusTime=0}a.preClickTime=0,a.preTouchTime=0,a.isClickToShow()&&(a.isClickToHide()||a.isBlurToHide())&&h&&h.preventDefault&&h.preventDefault();var v=!a.state.popupVisible;(a.isClickToHide()&&!v||v&&a.isClickToShow())&&a.setPopupVisible(!a.state.popupVisible,h)}),ct(Lr(a),"onPopupMouseDown",function(){if(a.hasPopupMouseDown=!0,clearTimeout(a.mouseDownTimeout),a.mouseDownTimeout=window.setTimeout(function(){a.hasPopupMouseDown=!1},0),a.context){var h;(h=a.context).onPopupMouseDown.apply(h,arguments)}}),ct(Lr(a),"onDocumentClick",function(h){if(!(a.props.mask&&!a.props.maskClosable)){var d=h.target,v=a.getRootDomNode(),x=a.getPopupDomNode();(!kv(v,d)||a.isContextMenuOnly())&&!kv(x,d)&&!a.hasPopupMouseDown&&a.close()}}),ct(Lr(a),"getRootDomNode",function(){var h=a.props.getTriggerDOMNode;if(h)return h(a.triggerRef.current);try{var d=lI(a.triggerRef.current);if(d)return d}catch(v){}return P4e.default.findDOMNode(Lr(a))}),ct(Lr(a),"getPopupClassNameFromAlign",function(h){var d=[],v=a.props,x=v.popupPlacement,S=v.builtinPlacements,T=v.prefixCls,L=v.alignPoint,k=v.getPopupClassNameFromAlign;return x&&S&&d.push(hze(S,T,h,L)),k&&d.push(k(h)),d.join(" ")}),ct(Lr(a),"getComponent",function(){var h=a.props,d=h.prefixCls,v=h.destroyPopupOnHide,x=h.popupClassName,S=h.onPopupAlign,T=h.popupMotion,L=h.popupAnimation,k=h.popupTransitionName,R=h.popupStyle,D=h.mask,j=h.maskAnimation,B=h.maskTransitionName,$=h.maskMotion,ee=h.zIndex,J=h.popup,ie=h.stretch,ue=h.alignPoint,le=h.mobile,_e=h.forceRender,Re=h.onPopupClick,ze=a.state,ke=ze.popupVisible,Ve=ze.point,We=a.getPopupAlign(),Te={};return a.isMouseEnterToShow()&&(Te.onMouseEnter=a.onPopupMouseEnter),a.isMouseLeaveToHide()&&(Te.onMouseLeave=a.onPopupMouseLeave),Te.onMouseDown=a.onPopupMouseDown,Te.onTouchStart=a.onPopupMouseDown,wl.createElement(M4e,nn({prefixCls:d,destroyPopupOnHide:v,visible:ke,point:ue&&Ve,className:x,align:We,onAlign:S,animation:L,getClassNameFromAlign:a.getPopupClassNameFromAlign},Te,{stretch:ie,getRootDomNode:a.getRootDomNode,style:R,mask:D,zIndex:ee,transitionName:k,maskAnimation:j,maskTransitionName:B,maskMotion:$,ref:a.popupRef,motion:T,mobile:le,forceRender:_e,onClick:Re}),typeof J=="function"?J():J)}),ct(Lr(a),"attachParent",function(h){Us.cancel(a.attachId);var d=a.props,v=d.getPopupContainer,x=d.getDocument,S=a.getRootDomNode(),T;v?(S||v.length===0)&&(T=v(S)):T=x(a.getRootDomNode()).body,T?T.appendChild(h):a.attachId=Us(function(){a.attachParent(h)})}),ct(Lr(a),"getContainer",function(){if(!a.portalContainer){var h=a.props.getDocument,d=h(a.getRootDomNode()).createElement("div");d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.width="100%",a.portalContainer=d}return a.attachParent(a.portalContainer),a.portalContainer}),ct(Lr(a),"setPoint",function(h){var d=a.props.alignPoint;!d||!h||a.setState({point:{pageX:h.pageX,pageY:h.pageY}})}),ct(Lr(a),"handlePortalUpdate",function(){a.state.prevPopupVisible!==a.state.popupVisible&&a.props.afterPopupVisibleChange(a.state.popupVisible)}),ct(Lr(a),"triggerContextValue",{onPopupMouseDown:a.onPopupMouseDown});var c;return"popupVisible"in o?c=!!o.popupVisible:c=!!o.defaultPopupVisible,a.state={prevPopupVisible:c,popupVisible:c},Utr.forEach(function(h){a["fire".concat(h)]=function(d){a.fireEvents(h,d)}}),a}return ra(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var a=this.props,c=this.state;if(c.popupVisible){var h;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(h=a.getDocument(this.getRootDomNode()),this.clickOutsideHandler=is(h,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(h=h||a.getDocument(this.getRootDomNode()),this.touchOutsideHandler=is(h,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(h=h||a.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=is(h,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=is(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Us.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var a;return((a=this.popupRef.current)===null||a===void 0?void 0:a.getElement())||null}},{key:"getPopupAlign",value:function(){var a=this.props,c=a.popupPlacement,h=a.popupAlign,d=a.builtinPlacements;return c&&d?fze(d,c,h):h}},{key:"setPopupVisible",value:function(a,c){var h=this.props.alignPoint,d=this.state.popupVisible;this.clearDelayTimer(),d!==a&&("popupVisible"in this.props||this.setState({popupVisible:a,prevPopupVisible:d}),this.props.onPopupVisibleChange(a)),h&&c&&a&&this.setPoint(c)}},{key:"delaySetPopupVisible",value:function(a,c,h){var d=this,v=c*1e3;if(this.clearDelayTimer(),v){var x=h?{pageX:h.pageX,pageY:h.pageY}:null;this.delayTimer=window.setTimeout(function(){d.setPopupVisible(a,x),d.clearDelayTimer()},v)}else this.setPopupVisible(a,h)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(a){var c=this.props.children.props,h=this.props;return c[a]&&h[a]?this["fire".concat(a)]:c[a]||h[a]}},{key:"isClickToShow",value:function(){var a=this.props,c=a.action,h=a.showAction;return c.indexOf("click")!==-1||h.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var a=this.props.action;return a==="contextMenu"||a.length===1&&a[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var a=this.props,c=a.action,h=a.showAction;return c.indexOf("contextMenu")!==-1||h.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var a=this.props,c=a.action,h=a.hideAction;return c.indexOf("click")!==-1||h.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var a=this.props,c=a.action,h=a.showAction;return c.indexOf("hover")!==-1||h.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var a=this.props,c=a.action,h=a.hideAction;return c.indexOf("hover")!==-1||h.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var a=this.props,c=a.action,h=a.showAction;return c.indexOf("focus")!==-1||h.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var a=this.props,c=a.action,h=a.hideAction;return c.indexOf("focus")!==-1||h.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var a;(a=this.popupRef.current)===null||a===void 0||a.forceAlign()}}},{key:"fireEvents",value:function(a,c){var h=this.props.children.props[a];h&&h(c);var d=this.props[a];d&&d(c)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var a=this.state.popupVisible,c=this.props,h=c.children,d=c.forceRender,v=c.alignPoint,x=c.className,S=c.autoDestroy,T=wl.Children.only(h),L={key:"trigger"};this.isContextMenuToShow()?L.onContextMenu=this.onContextMenu:L.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(L.onClick=this.onClick,L.onMouseDown=this.onMouseDown,L.onTouchStart=this.onTouchStart):(L.onClick=this.createTwoChains("onClick"),L.onMouseDown=this.createTwoChains("onMouseDown"),L.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(L.onMouseEnter=this.onMouseEnter,v&&(L.onMouseMove=this.onMouseMove)):L.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?L.onMouseLeave=this.onMouseLeave:L.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(L.onFocus=this.onFocus,L.onBlur=this.onBlur):(L.onFocus=this.createTwoChains("onFocus"),L.onBlur=this.createTwoChains("onBlur"));var k=(0,O4e.default)(T&&T.props&&T.props.className,x);k&&(L.className=k);var R=yt({},L);GN(T)&&(R.ref=J0(this.triggerRef,T.ref));var D=wl.cloneElement(T,R),j;return(a||this.popupRef.current||d)&&(j=wl.createElement(r,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!a&&S&&(j=null),wl.createElement(XZ.Provider,{value:this.triggerContextValue},D,j)}}],[{key:"getDerivedStateFromProps",value:function(a,c){var h=a.popupVisible,d={};return h!==void 0&&c.popupVisible!==h&&(d.popupVisible=h,d.prevPopupVisible=c.popupVisible),d}}]),i}(wl.Component);return ct(e,"contextType",XZ),ct(e,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:ztr,getDocument:Btr,onPopupVisibleChange:JZ,afterPopupVisibleChange:JZ,onPopupAlign:JZ,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),e}var L4e=Vtr(cze);var wu={adjustX:1,adjustY:1},bu=[0,0],D4e={left:{points:["cr","cl"],overflow:wu,offset:[-4,0],targetOffset:bu},right:{points:["cl","cr"],overflow:wu,offset:[4,0],targetOffset:bu},top:{points:["bc","tc"],overflow:wu,offset:[0,-4],targetOffset:bu},bottom:{points:["tc","bc"],overflow:wu,offset:[0,4],targetOffset:bu},topLeft:{points:["bl","tl"],overflow:wu,offset:[0,-4],targetOffset:bu},leftTop:{points:["tr","tl"],overflow:wu,offset:[-4,0],targetOffset:bu},topRight:{points:["br","tr"],overflow:wu,offset:[0,-4],targetOffset:bu},rightTop:{points:["tl","tr"],overflow:wu,offset:[4,0],targetOffset:bu},bottomRight:{points:["tr","br"],overflow:wu,offset:[0,4],targetOffset:bu},rightBottom:{points:["bl","br"],overflow:wu,offset:[4,0],targetOffset:bu},bottomLeft:{points:["tl","bl"],overflow:wu,offset:[0,4],targetOffset:bu},leftBottom:{points:["br","bl"],overflow:wu,offset:[-4,0],targetOffset:bu}};var _2=Me(dt()),N4e=Me(hi());function x2(r){var e=r.showArrow,t=r.arrowContent,n=r.children,i=r.prefixCls,o=r.id,a=r.overlayInnerStyle,c=r.className,h=r.style;return _2.createElement("div",{className:(0,N4e.default)("".concat(i,"-content"),c),style:h},e!==!1&&_2.createElement("div",{className:"".concat(i,"-arrow"),key:"arrow"},t),_2.createElement("div",{className:"".concat(i,"-inner"),id:o,role:"tooltip",style:a},typeof n=="function"?n():n))}var Gtr=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],$tr=function(e,t){var n=e.overlayClassName,i=e.trigger,o=i===void 0?["hover"]:i,a=e.mouseEnterDelay,c=a===void 0?0:a,h=e.mouseLeaveDelay,d=h===void 0?.1:h,v=e.overlayStyle,x=e.prefixCls,S=x===void 0?"rc-tooltip":x,T=e.children,L=e.onVisibleChange,k=e.afterVisibleChange,R=e.transitionName,D=e.animation,j=e.motion,B=e.placement,$=B===void 0?"right":B,ee=e.align,J=ee===void 0?{}:ee,ie=e.destroyTooltipOnHide,ue=ie===void 0?!1:ie,le=e.defaultVisible,_e=e.getTooltipContainer,Re=e.overlayInnerStyle,ze=e.arrowContent,ke=e.overlay,Ve=e.id,We=e.showArrow,Te=We===void 0?!0:We,Se=Na(e,Gtr),Ae=(0,ox.useRef)(null);(0,ox.useImperativeHandle)(t,function(){return Ae.current});var $e=yt({},Se);"visible"in e&&($e.popupVisible=e.visible);var Ge=function(){return QZ.createElement(x2,{showArrow:Te,arrowContent:ze,key:"content",prefixCls:S,id:Ve,overlayInnerStyle:Re},ke)},Ke=!1,Pe=!1;if(typeof ue=="boolean")Ke=ue;else if(ue&&Ln(ue)==="object"){var at=ue.keepParent;Ke=at===!0,Pe=at===!1}return QZ.createElement(L4e,nn({popupClassName:n,prefixCls:S,popup:Ge,action:o,builtinPlacements:D4e,popupPlacement:$,ref:Ae,popupAlign:J,getPopupContainer:_e,onPopupVisibleChange:L,afterPopupVisibleChange:k,popupTransitionName:R,popupAnimation:D,popupMotion:j,defaultPopupVisible:le,destroyPopupOnHide:Ke,autoDestroy:Pe,mouseLeaveDelay:d,popupStyle:v,mouseEnterDelay:c},$e),T)},k4e=(0,ox.forwardRef)($tr);var q4e=k4e;var Htr=Ah.forwardRef(function(r,e){var t=r.visible,n=r.overlay,i=Ah.useRef(null),o=J0(e,i),a=Ah.useRef(null);function c(){Us.cancel(a.current)}function h(){a.current=Us(function(){var d;(d=i.current)===null||d===void 0||d.forcePopupAlign()})}return Ah.useEffect(function(){return t?h():c(),c},[t,n]),Ah.createElement(q4e,nn({ref:o},r))}),eY=Htr;function tY(r){var e;return e=function(t){na(i,t);var n=ia(i);function i(){var o;return ta(this,i),o=n.apply(this,arguments),o.state={visibles:{}},o.handleTooltipVisibleChange=function(a,c){o.setState(function(h){return{visibles:yt(yt({},h.visibles),{},ct({},a,c))}})},o.handleWithTooltip=function(a){var c=a.value,h=a.dragging,d=a.index,v=a.disabled,x=Na(a,["value","dragging","index","disabled"]),S=o.props,T=S.tipFormatter,L=S.tipProps,k=S.handleStyle,R=S.getTooltipContainer,D=L.prefixCls,j=D===void 0?"rc-slider-tooltip":D,B=L.overlay,$=B===void 0?T(c):B,ee=L.placement,J=ee===void 0?"top":ee,ie=L.visible,ue=ie===void 0?!1:ie,le=Na(L,["prefixCls","overlay","placement","visible"]),_e;return Array.isArray(k)?_e=k[d]||k[0]:_e=k,_I.default.createElement(eY,nn({},le,{getTooltipContainer:R,prefixCls:j,overlay:$,placement:J,visible:!v&&(o.state.visibles[d]||h)||ue,key:d}),_I.default.createElement(K0,nn({},x,{style:yt({},_e),value:c,onMouseEnter:function(){return o.handleTooltipVisibleChange(d,!0)},onMouseLeave:function(){return o.handleTooltipVisibleChange(d,!1)}})))},o}return ra(i,[{key:"render",value:function(){return _I.default.createElement(r,nn({},this.props,{handle:this.handleWithTooltip}))}}]),i}(_I.default.Component),e.defaultProps={tipFormatter:function(n){return n},handleStyle:[{}],tipProps:{},getTooltipContainer:function(n){return n.parentNode}},e}var w2=KFe;w2.Range=XFe;w2.Handle=K0;w2.createSliderWithTooltip=tY;var b2=w2;var xI={brightness:0,contrast:0,saturation:0},S2=r=>{let{max:e=1,min:t=0,onChange:n=()=>console.warn("onChange is not implemented."),step:i=.01,type:o="",value:a=.5,tooltip:c}=r,h=d=>{n(o,d)};return $s.default.createElement("div",{className:"filter-slider",title:c},$s.default.createElement("span",{className:Ps("slider-icon",o),title:c}),$s.default.createElement("div",null,$s.default.createElement(b2,{title:c,ariaLabelForHandle:c,max:e,min:t,onChange:h,step:i,value:a})),$s.default.createElement("span",{className:"slider-tooltip",title:c},a))};S2.propTypes={max:Ch.default.number,min:Ch.default.number,onChange:Ch.default.number,step:Ch.default.number,tooltip:Ch.default.string,type:Ch.default.string,value:Ch.default.number};var F4e=r=>{let{layer:e}=r,[t,n]=(0,$s.useState)(Et({},xI)),i=(a,c)=>{let h=Object.assign({},t,{[a]:c});n(h),e.updateStyleVariables(h)},o=()=>{n(Et({},xI)),e.updateStyleVariables(Et({},xI))};return $s.default.createElement("div",null,$s.default.createElement(S2,{max:1,min:-1,onChange:i,step:.01,type:"contrast",value:t.contrast,tooltip:Tr("control-imagemanipulation-contrast")}),$s.default.createElement(S2,{max:1,min:-1,onChange:i,step:.01,type:"saturation",value:t.saturation,tooltip:Tr("control-imagemanipulation-saturation")}),$s.default.createElement(S2,{max:1,min:-1,onChange:i,step:.01,type:"brightness",value:t.brightness,tooltip:Tr("control-imagemanipulation-brightness")}),$s.default.createElement("button",{className:"btn-reset",title:Tr("control-imagemanipulation-reset"),onClick:o},Tr("control-imagemanipulation-reset")))};F4e.propTypes={layer:Ch.default.object};var rY=class extends ns{constructor(e){let t="ol-unselectable ol-control image-manipulation",n=document.createElement("div");n.className=t;let i=document.createElement("button");i.title=Tr("control-imagemanipulation-open"),i.innerHTML="I",i.type="button",n.appendChild(i);let o=document.createElement("div");o.className="content-container",o.style.display="none",n.appendChild(o);let a=()=>{let c=o.style.display==="block";n.className=c?t:`${t} active`,o.style.display=c?"none":"block"};j4e.default.render($s.default.createElement(F4e,{layer:e.layer}),o),i.addEventListener("click",a,!1),i.addEventListener("touchstart",a,!1),super({element:n,target:e.target})}},z4e=rY;function Wtr(r){return ho(this,null,function*(){try{let e=yield B4e.default.get(r);if(e.status===200){let n=new DOMParser().parseFromString(e.data,"text/xml");return{width:parseInt(n.firstChild.attributes.WIDTH.value,0),height:parseInt(n.firstChild.attributes.HEIGHT.value,0),url:r.substring(0,r.lastIndexOf("/")+1)}}else throw new Error("Could not fetch ImageProperties.xml")}catch(e){console.error("Something went wrong while trying to fetch the ImageProperties.xml."),console.error(e)}})}var U4e=r=>{let{className:e="",onLoad:t,urlImageProperties:n,withImageManipulation:i=!1}=r,o=(0,ax.useRef)(null);return(0,ax.useEffect)(()=>{ho(void 0,null,function*(){let h=yield Wtr(n),d=new kFe({url:h.url,size:[h.width,h.height],crossOrigin:"anonymous",zDirection:-1}),v=d.getTileGrid().getExtent(),x=new TFe({style:{brightness:["var","brightness"],contrast:["var","contrast"],saturation:["var","saturation"],variables:Et({},xI)},source:d}),S=new gu({resolutions:x.getSource().getTileGrid().getResolutions(),extent:v,constrainOnlyCenter:!0}),T=new F0({controls:[new cN({tipLabel:Tr("control-fullscreen-title")}),new j0({zoomInTipLabel:Tr("control-zoom-in"),zoomOutTipLabel:Tr("control-zoom-in")})],interactions:q0().extend([new N0]),layers:[x],target:o.current,view:S});S.fit(v,{padding:[50,50,50,50]});let L=T.getSize();T.addControl(new hN({tipLabel:Tr("control-zoomtoextent-title"),extent:S.calculateExtent([L[0]+50,L[1]+50])})),i&&T.addControl(new z4e({layer:x})),t&&t({layer:x,map:T,source:d,zoomifyProps:h})})},[n]),ax.default.createElement("div",{className:Ps("vk-mapview-zoomify",e),ref:o})};U4e.propTypes={className:wI.default.string,onLoad:wI.default.func,urlImageProperties:wI.default.string.isRequired,withImageManipulation:wI.default.bool};var V4e=U4e;var G4e=V4e;var Ztr=()=>{let r=Ql(xO),e=eu(bO),t=n=>{e(n)};return nY.default.createElement("div",{className:"vkf-mapview-source"},r!==null&&nY.default.createElement(G4e,{urlImageProperties:r.zoomify_url,onLoad:t}))},$4e=Ztr;var rf=Me(dt(),1);var fx=Me(Jr(),1);var sx=Me(dt(),1),rc=Me(Jr(),1);var Ytr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ktr=function(r){Ytr(e,r);function e(t){var n=r.call(this,t)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=Ni(),n.tmpTileRange_=new z0(0,0,0,0),n}return e.prototype.isDrawableTile=function(t){var n=this.getLayer(),i=t.getState(),o=n.getUseInterimTilesOnError();return i==Ut.LOADED||i==Ut.EMPTY||i==Ut.ERROR&&!o},e.prototype.getTile=function(t,n,i,o){var a=o.pixelRatio,c=o.viewState.projection,h=this.getLayer(),d=h.getSource(),v=d.getTile(t,n,i,a,c);return v.getState()==Ut.ERROR&&(h.getUseInterimTilesOnError()?h.getPreload()>0&&(this.newTiles_=!0):v.setState(Ut.LOADED)),this.isDrawableTile(v)||(v=v.getInterimTile()),v},e.prototype.getData=function(t){var n=this.frameState;if(!n)return null;var i=this.getLayer(),o=On(n.pixelToCoordinateTransform,t.slice()),a=i.getExtent();if(a&&!es(a,o))return null;for(var c=n.pixelRatio,h=n.viewState.projection,d=n.viewState,v=i.getRenderSource(),x=v.getTileGridForProjection(d.projection),S=v.getTilePixelRatio(n.pixelRatio),T=x.getZForResolution(d.resolution);T>=x.getMinZoom();--T){var L=x.getTileCoordForCoordAndZ(o,T),k=v.getTile(T,L[1],L[2],c,h);if(!(k instanceof xh||k instanceof U0))return null;if(k.getState()===Ut.LOADED){var R=x.getOrigin(T),D=Bn(x.getTileSize(T)),j=x.getResolution(T),B=Math.floor(S*((o[0]-R[0])/j-L[1]*D[0])),$=Math.floor(S*((R[1]-o[1])/j-L[2]*D[1])),ee=Math.round(S*v.getGutterForProjection(d.projection));return this.getImageData(k.getImage(),B+ee,$+ee)}}return null},e.prototype.loadedTileCallback=function(t,n,i){return this.isDrawableTile(i)?r.prototype.loadedTileCallback.call(this,t,n,i):!1},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,n){var i=t.layerStatesArray[t.layerIndex],o=t.viewState,a=o.projection,c=o.resolution,h=o.center,d=o.rotation,v=t.pixelRatio,x=this.getLayer(),S=x.getSource(),T=S.getRevision(),L=S.getTileGridForProjection(a),k=L.getZForResolution(c,S.zDirection),R=L.getResolution(k),D=t.extent,j=t.viewState.resolution,B=S.getTilePixelRatio(v),$=Math.round(sn(D)/j*v),ee=Math.round(_o(D)/j*v),J=i.extent&&Pa(i.extent,a);J&&(D=ou(D,Pa(i.extent,a)));var ie=R*$/2/B,ue=R*ee/2/B,le=[h[0]-ie,h[1]-ue,h[0]+ie,h[1]+ue],_e=L.getTileRangeForExtentAndZ(D,k),Re={};Re[k]={};var ze=this.createLoadedTileFinder(S,a,Re),ke=this.tmpExtent,Ve=this.tmpTileRange_;this.newTiles_=!1;for(var We=d?yD(o.center,j,d,t.size):void 0,Te=_e.minX;Te<=_e.maxX;++Te)for(var Se=_e.minY;Se<=_e.maxY;++Se)if(!(d&&!L.tileCoordIntersectsViewport([k,Te,Se],We))){var Ae=this.getTile(k,Te,Se,t);if(this.isDrawableTile(Ae)){var $e=tr(this);if(Ae.getState()==Ut.LOADED){Re[k][Ae.tileCoord.toString()]=Ae;var Ge=Ae.inTransition($e);Ge&&i.opacity!==1&&(Ae.endTransition($e),Ge=!1),!this.newTiles_&&(Ge||this.renderedTiles.indexOf(Ae)===-1)&&(this.newTiles_=!0)}if(Ae.getAlpha($e,t.time)===1)continue}var Ke=L.getTileCoordChildTileRange(Ae.tileCoord,Ve,ke),Pe=!1;Ke&&(Pe=ze(k+1,Ke)),Pe||L.forEachTileCoordParentTileRange(Ae.tileCoord,ze,Ve,ke)}var at=R/c*v/B;oo(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/v,1/v,d,-$/2,-ee/2);var Tt=pD(this.pixelTransform);this.useContainer(n,Tt,this.getBackground(t));var Le=this.context,Ye=Le.canvas;l0(this.inversePixelTransform,this.pixelTransform),oo(this.tempTransform,$/2,ee/2,at,at,0,-$/2,-ee/2),Ye.width!=$||Ye.height!=ee?(Ye.width=$,Ye.height=ee):this.containerReused||Le.clearRect(0,0,$,ee),J&&this.clipUnrotated(Le,t,J),S.getInterpolate()||zr(Le,KE),this.preRender(Le,t),this.renderedTiles.length=0;var Fe=Object.keys(Re).map(Number);Fe.sort(pl);var Ze,tt,Qe;i.opacity===1&&(!this.containerReused||S.getOpaque(t.viewState.projection))?Fe=Fe.reverse():(Ze=[],tt=[]);for(var Dt=Fe.length-1;Dt>=0;--Dt){var Kt=Fe[Dt],_t=S.getTilePixelSize(Kt,v,a),be=L.getResolution(Kt),jt=be/R,Qt=_t[0]*jt*at,Ft=_t[1]*jt*at,nr=L.getTileCoordForCoordAndZ(au(le),Kt),or=L.getTileCoordExtent(nr),Wt=On(this.tempTransform,[B*(or[0]-le[0])/R,B*(le[3]-or[3])/R]),lr=B*S.getGutterForProjection(a),Pr=Re[Kt];for(var en in Pr){var Ae=Pr[en],ai=Ae.tileCoord,Ii=nr[1]-ai[1],nt=Math.round(Wt[0]-(Ii-1)*Qt),Qn=nr[2]-ai[2],An=Math.round(Wt[1]-(Qn-1)*Ft),Te=Math.round(Wt[0]-Ii*Qt),Se=Math.round(Wt[1]-Qn*Ft),di=nt-Te,Ti=An-Se,ut=k===Kt,Ge=ut&&Ae.getAlpha(tr(this),t.time)!==1,vr=!1;if(!Ge)if(Ze){Qe=[Te,Se,Te+di,Se,Te+di,Se+Ti,Te,Se+Ti];for(var zt=0,Ai=Ze.length;zt<Ai;++zt)if(k!==Kt&&Kt<tt[zt]){var hn=Ze[zt];Si([Te,Se,Te+di,Se+Ti],[hn[0],hn[3],hn[4],hn[7]])&&(vr||(Le.save(),vr=!0),Le.beginPath(),Le.moveTo(Qe[0],Qe[1]),Le.lineTo(Qe[2],Qe[3]),Le.lineTo(Qe[4],Qe[5]),Le.lineTo(Qe[6],Qe[7]),Le.moveTo(hn[6],hn[7]),Le.lineTo(hn[4],hn[5]),Le.lineTo(hn[2],hn[3]),Le.lineTo(hn[0],hn[1]),Le.clip())}Ze.push(Qe),tt.push(Kt)}else Le.clearRect(Te,Se,di,Ti);this.drawTileImage(Ae,t,Te,Se,di,Ti,lr,ut),Ze&&!Ge?(vr&&Le.restore(),this.renderedTiles.unshift(Ae)):this.renderedTiles.push(Ae),this.updateUsedTiles(t.usedTiles,S,Ae)}}return this.renderedRevision=T,this.renderedResolution=R,this.extentChanged=!this.renderedExtent_||!sh(this.renderedExtent_,le),this.renderedExtent_=le,this.renderedPixelRatio=v,this.renderedProjection=a,this.manageTilePyramid(t,S,L,v,a,D,k,x.getPreload()),this.scheduleExpireCache(t,S),this.postRender(Le,t),i.extent&&Le.restore(),zr(Le,Yje),Tt!==Ye.style.transform&&(Ye.style.transform=Tt),this.container},e.prototype.drawTileImage=function(t,n,i,o,a,c,h,d){var v=this.getTileImage(t);if(v){var x=tr(this),S=n.layerStatesArray[n.layerIndex],T=S.opacity*(d?t.getAlpha(x,n.time):1),L=T!==this.context.globalAlpha;L&&(this.context.save(),this.context.globalAlpha=T),this.context.drawImage(v,h,h,v.width-2*h,v.height-2*h,i,o,a,c),L&&this.context.restore(),T!==S.opacity?n.animate=!0:d&&t.endTransition(x)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,n){if(n.canExpireCache()){var i=function(o,a,c){var h=tr(o);h in c.usedTiles&&o.expireCache(c.viewState.projection,c.usedTiles[h])}.bind(null,n);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,n,i){var o=tr(n);o in t||(t[o]={}),t[o][i.getKey()]=!0},e.prototype.manageTilePyramid=function(t,n,i,o,a,c,h,d,v){var x=tr(n);x in t.wantedTiles||(t.wantedTiles[x]={});var S=t.wantedTiles[x],T=t.tileQueue,L=i.getMinZoom(),k=t.viewState.rotation,R=k?yD(t.viewState.center,t.viewState.resolution,k,t.size):void 0,D=0,j,B,$,ee,J,ie;for(ie=L;ie<=h;++ie)for(B=i.getTileRangeForExtentAndZ(c,ie,B),$=i.getResolution(ie),ee=B.minX;ee<=B.maxX;++ee)for(J=B.minY;J<=B.maxY;++J)k&&!i.tileCoordIntersectsViewport([ie,ee,J],R)||(h-ie<=d?(++D,j=n.getTile(ie,ee,J,o,a),j.getState()==Ut.IDLE&&(S[j.getKey()]=!0,T.isKeyQueued(j.getKey())||T.enqueue([j,x,i.getTileCoordCenter(j.tileCoord),$])),v!==void 0&&v(j)):n.useTile(ie,ee,J,a));n.updateCacheSize(D,a)},e}(WD),H4e=Ktr;var Xtr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jtr=function(r){Xtr(e,r);function e(t){return r.call(this,t)||this}return e.prototype.createRenderer=function(){return new H4e(this)},e}(pN),Bv=Jtr;var Qtr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),err=function(r){Qtr(e,r);function e(t){var n=this,i=t||{},o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var a=i.projection!==void 0?i.projection:"EPSG:3857",c=i.tileGrid!==void 0?i.tileGrid:CFe({extent:IN(a),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return n=r.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,opaque:i.opaque,projection:a,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:c,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this,n.gutter_=i.gutter!==void 0?i.gutter:0,n}return e.prototype.getGutter=function(){return this.gutter_},e}(Z0),iY=err;var oY=class extends ns{constructor(t){let n=t||{},i=document.createElement("div");i.className="ol-layerspy ol-unselectable ol-control";let o=document.createElement("button");o.title=Tr("control-layerspy-title"),o.type="button",i.appendChild(o);super({element:i,target:n.target});Po(this,"mousePosition",null);Po(this,"activate",()=>{this.layers===void 0&&(this.layers=this.getMap().getLayers()),this.getMap().addLayer(this.layer),this.layer.on("prerender",this.handlePrecompose,this),this.layer.on("postrender",this.handlePostcompose,this);let t=this.getMap().getViewport();t.addEventListener("mousemove",this.handleMouseMove),t.addEventListener("mouseout",this.handleMouseOut),document.addEventListener("keydown",this.handleKeyPress),this.layers.on("add",this.handleAddedLayer),this.containerEl.classList.add("active"),this.renderRadiusbox&&this.renderTargetElement()});Po(this,"changeLayer",t=>{this.containerEl.classList.contains("active")?(this.deactivate(),this.layer=t,this.activate()):this.layer=t});Po(this,"deactivate",()=>{this.layer.un("prerender",this.handlePrecompose),this.layer.un("postrender",this.handlePostcompose);let t=this.getMap().getViewport();t.removeEventListener("mousemove",this.handleMouseMove),t.removeEventListener("mouseout",this.handleMouseOut),document.removeEventListener("keydown",this.handleKeyPress),this.layers.un("add",this.handleAddedLayer),this.getMap().removeLayer(this.layer),this.containerEl.classList.remove("active"),this.renderRadiusbox&&this.renderTargetElement()});Po(this,"handlePostcompose",t=>{t.context.restore()});Po(this,"handlePrecompose",t=>{let n=t.context,i=1;n.save(),n.beginPath();let o=this.mousePosition;if(o){let a=this.getMap().getLayers().getArray().find(d=>d.vkf_id===this.refActiveBasemapId.current).renderer_.context.canvas.style.transform,c=new DOMPoint(o[0],o[1]),h=new DOMMatrix(a);c=c.matrixTransform(h.invertSelf()),n.arc(c.x*i,c.y*i,this.clipRadius*i,0,2*Math.PI),n.lineWidth=5*i,n.strokeStyle="rgba(0,0,0,0.5)",n.stroke()}n.clip()});Po(this,"handleMouseMove",t=>{this.mousePosition=this.getMap().getEventPixel(t),this.getMap().render()});Po(this,"handleMouseOut",()=>{this.mousePosition=null,this.getMap().render()});Po(this,"handleKeyPress",t=>{t.target.tagName.toLowerCase()!=="input"&&(t.key.toLowerCase()==="y"||t.keyCode==="KeyY"?(this.clipRadius=Math.min(this.clipRadius+5,150),this.getMap().render()):(t.key.toLowerCase()==="x"||t.keyCode==="KeyX")&&(this.clipRadius=Math.max(this.clipRadius-5,25),this.getMap().render()),this.updateClipRadiusDisplay())});Po(this,"handleAddedLayer",t=>{t.target.getArray()[t.target.getLength()-1]!==this.layer&&(this.getMap().removeLayer(this.layer),this.getMap().addLayer(this.layer))});Po(this,"handleExternal3dStateUpdate",t=>{this.containerEl.disabled=t,t?this.containerEl.classList.add("disabled"):this.containerEl.classList.remove("disabled")});Po(this,"updateClipRadiusDisplay",()=>{let t=this.targetEl;t.innerHTML=`<strong>Radius: ${this.clipRadius}px</strong> (${Tr("control-layerspy-radius-tooltip")})`});Po(this,"renderTargetElement",()=>{let t=this.targetEl,n=E$(this.getMap());this.targetEl===void 0&&(t=document.createElement("div"),t.className="ol-control ol-layerspy-radius-box",t.innerHTML="",n.appendChild(t),this.targetEl=t),this.targetEl.classList.toggle("active"),n.classList.toggle("layerspy-active"),this.updateClipRadiusDisplay()});this.clipRadius=Nc(n.radius)?parseInt(n.radius,0):75,n.refSpyLayer!==void 0&&(n.refSpyLayer.current=this),this.refActiveBasemapId=n.refActiveBasemapId,this.containerEl=o,this.renderRadiusbox=t.renderRadiusBox===void 0?!0:t.renderRadiusBox,o.addEventListener("click",a=>{a.preventDefault(),this.containerEl.classList.contains("active")?this.deactivate():this.activate()}),Nc(n.spyLayer)&&this.changeLayer(n.spyLayer)}},W4e=oY;var Z4e=r=>{let{children:e,extent:t,onLoad:n=()=>console.log("No onLoad function was passed to component Map2D."),urlsOsmBaseMap:i}=r,o=(0,sx.useRef)(null);return(0,sx.useEffect)(()=>{let a=()=>ho(void 0,null,function*(){let c=new Bv({source:new iY({urls:i,crossOrigin:"*",maxZoom:18})});c.vkf_id="slub-osm";let h=new F0({controls:[new cN({tipLabel:Tr("control-fullscreen-title")}),new j0({zoomInTipLabel:Tr("control-zoom-in"),zoomOutTipLabel:Tr("control-zoom-in")})],interactions:q0().extend([new N0]),layers:[c],target:o.current,view:new gu({projection:"EPSG:3857",center:[871713,6396955],zoom:4.3})});if(n({map:h}),t!=null){let v=Tv(t,"EPSG:4326",h.getView().getProjection());h.getView().fit(v,{padding:[100,100,100,100]}),h.addControl(new hN({tipLabel:Tr("control-zoomtoextent-title"),extent:v}))}let d=new Bv({zIndex:10,attribution:void 0,source:new iY({urls:i,crossOrigin:"*",attributions:[]})});d.vkf_id="slub-osm",h.addControl(new W4e({spyLayer:d,refActiveBasemapId:{current:c.vkf_id}}))});o.current!==null&&a()},[]),sx.default.createElement("div",{className:"map-container",ref:o},e)};Z4e.propTypes={extent:rc.default.arrayOf(rc.default.number),onLoad:rc.default.func,urlNominatim:rc.default.string,urlsOsmBaseMap:rc.default.arrayOf(rc.default.string),children:rc.default.oneOfType([rc.default.arrayOf(rc.default.node),rc.default.node])};var Y4e=Z4e;var K4e=Y4e;var SI=Me(dt(),1),lx=Me(Jr(),1);var bI="1.3.0";function aY(r,e){var t=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&t.push(i+"="+encodeURIComponent(e[i]))});var n=t.join("&");return r=r.replace(/[?&]$/,""),r=r.indexOf("?")===-1?r+"?":r+"&",r+n}var trr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rrr=function(r){trr(e,r);function e(t){var n=this,i=t||{},o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var a=i.params||{},c="TRANSPARENT"in a?a.TRANSPARENT:!0;return n=r.call(this,{attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,opaque:!c,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,zDirection:i.zDirection})||this,n.gutter_=i.gutter!==void 0?i.gutter:0,n.params_=a,n.v13_=!0,n.serverType_=i.serverType,n.hidpi_=i.hidpi!==void 0?i.hidpi:!0,n.tmpExtent_=Ni(),n.updateV13_(),n.setKey(n.getKeyForParams_()),n}return e.prototype.getFeatureInfoUrl=function(t,n,i,o){var a=Xn(i),c=this.getProjection(),h=this.getTileGrid();h||(h=this.getTileGridForProjection(a));var d=h.getZForResolution(n,this.zDirection),v=h.getTileCoordForCoordAndZ(t,d);if(!(h.getResolutions().length<=v[0])){var x=h.getResolution(v[0]),S=h.getTileCoordExtent(v,this.tmpExtent_),T=Bn(h.getTileSize(v[0]),this.tmpSize),L=this.gutter_;L!==0&&(T=HW(T,L,this.tmpSize),S=Wu(S,x*L,S)),c&&c!==a&&(x=mN(c,a,t,x),S=Tv(S,a,c),t=Ku(t,a,c));var k={SERVICE:"WMS",VERSION:bI,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};zr(k,this.params_,o);var R=Math.floor((t[0]-S[0])/x),D=Math.floor((S[3]-t[1])/x);return k[this.v13_?"I":"X"]=R,k[this.v13_?"J":"Y"]=D,this.getRequestUrl_(v,T,S,1,c||a,k)}},e.prototype.getLegendUrl=function(t,n){if(this.urls[0]!==void 0){var i={SERVICE:"WMS",VERSION:bI,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(n===void 0||n.LAYER===void 0){var o=this.params_.LAYERS,a=!Array.isArray(o)||o.length===1;if(!a)return;i.LAYER=o}if(t!==void 0){var c=this.getProjection()?this.getProjection().getMetersPerUnit():1,h=28e-5;i.SCALE=t*c/h}return zr(i,n),aY(this.urls[0],i)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,n,i,o,a,c){var h=this.urls;if(h){if(c.WIDTH=n[0],c.HEIGHT=n[1],c[this.v13_?"CRS":"SRS"]=a.getCode(),"STYLES"in this.params_||(c.STYLES=""),o!=1)switch(this.serverType_){case"geoserver":var d=90*o+.5|0;"FORMAT_OPTIONS"in c?c.FORMAT_OPTIONS+=";dpi:"+d:c.FORMAT_OPTIONS="dpi:"+d;break;case"mapserver":c.MAP_RESOLUTION=90*o;break;case"carmentaserver":case"qgis":c.DPI=90*o;break;default:ar(!1,52);break;}var v=a.getAxisOrientation(),x=i;if(this.v13_&&v.substr(0,2)=="ne"){var S=void 0;S=i[0],x[0]=i[1],x[1]=S,S=i[2],x[2]=i[3],x[3]=S}c.BBOX=x.join(",");var T;if(h.length==1)T=h[0];else{var L=vl(_N(t),h.length);T=h[L]}return aY(T,c)}},e.prototype.getTilePixelRatio=function(t){return!this.hidpi_||this.serverType_===void 0?1:t},e.prototype.getKeyForParams_=function(){var t=0,n=[];for(var i in this.params_)n[t++]=i+"-"+this.params_[i];return n.join("/")},e.prototype.updateParams=function(t){zr(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||bI;this.v13_=dke(t,"1.3")>=0},e.prototype.tileUrlFunction=function(t,n,i){var o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(i)),!(o.getResolutions().length<=t[0])){n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);var a=o.getResolution(t[0]),c=o.getTileCoordExtent(t,this.tmpExtent_),h=Bn(o.getTileSize(t[0]),this.tmpSize),d=this.gutter_;d!==0&&(h=HW(h,d,this.tmpSize),c=Wu(c,a*d,c)),n!=1&&(h=qD(h,n,this.tmpSize));var v={SERVICE:"WMS",VERSION:bI,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return zr(v,this.params_),this.getRequestUrl_(t,h,c,n,i,v)}},e}(Z0),X4e=rrr;function nrr(r,e){return r.getCoordinates()[0].map(t=>e.getPixelFromCoordinate(t))}var J4e=r=>{let{map:e,layerName:t,onLoad:n=()=>{},wmsUrl:i}=r;return(0,SI.useEffect)(()=>{let o=new Bv({source:new X4e({url:i,params:{LAYERS:t,VERSION:"1.1.1"},projection:e.getView().getProjection()}),preload:1/0,zIndex:1});e.addLayer(o),n(o);let a=h=>{let d=e.getLayers().getArray().find(v=>v.get("key")==="clip");if(d!==void 0&&d.getSource().getFeatures().length>0){let v=nrr(d.getSource().getFeatures()[0].getGeometry(),e),x=1,S=h.context;S.save(),S.beginPath(),S.moveTo(v[0][0]*x,v[0][1]*x);for(let T=1;T<v.length;T++)S.lineTo(v[T][0]*x,v[T][1]*x);S.closePath(),S.clip()}},c=h=>{h.context.restore()};return o.on("prerender",a),o.on("postrender",c),()=>{o.un("prerender",a),o.un("postrender",c),e.removeLayer(o)}},[]),SI.default.createElement(SI.default.Fragment,null)};J4e.propTypes={clipPolygon:lx.default.instanceOf(Xu),layerName:lx.default.string.isRequired,map:lx.default.instanceOf(F0).isRequired,onLoad:lx.default.func,wmsUrl:lx.default.string.isRequired};var Q4e=J4e;var eBe=Q4e;var Vv=Me(dt(),1),QY=Me(Jr(),1);var as=Me(dt(),1);var wt=Me(Jr()),ht=Me(dt()),drr=Me(lBe());function uBe(r){return typeof r=="object"&&r!=null&&r.nodeType===1}function cBe(r,e){return(!e||r!=="hidden")&&r!=="visible"&&r!=="clip"}function lY(r,e){if(r.clientHeight<r.scrollHeight||r.clientWidth<r.scrollWidth){var t=getComputedStyle(r,null);return cBe(t.overflowY,e)||cBe(t.overflowX,e)||function(n){var i=function(o){if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch(a){return null}}(n);return!!i&&(i.clientHeight<n.scrollHeight||i.clientWidth<n.scrollWidth)}(r)}return!1}function T2(r,e,t,n,i,o,a,c){return o<r&&a>e||o>r&&a<e?0:o<=r&&c<=t||a>=e&&c>=t?o-r-n:a>e&&c<t||o<r&&c>t?a-e+i:0}var fBe=function(r,e){var t=window,n=e.scrollMode,i=e.block,o=e.inline,a=e.boundary,c=e.skipOverflowHiddenElements,h=typeof a=="function"?a:function(be){return be!==a};if(!uBe(r))throw new TypeError("Invalid target");for(var d,v,x=document.scrollingElement||document.documentElement,S=[],T=r;uBe(T)&&h(T);){if((T=(v=(d=T).parentElement)==null?d.getRootNode().host||null:v)===x){S.push(T);break}T!=null&&T===document.body&&lY(T)&&!lY(document.documentElement)||T!=null&&lY(T,c)&&S.push(T)}for(var L=t.visualViewport?t.visualViewport.width:innerWidth,k=t.visualViewport?t.visualViewport.height:innerHeight,R=window.scrollX||pageXOffset,D=window.scrollY||pageYOffset,j=r.getBoundingClientRect(),B=j.height,$=j.width,ee=j.top,J=j.right,ie=j.bottom,ue=j.left,le=i==="start"||i==="nearest"?ee:i==="end"?ie:ee+B/2,_e=o==="center"?ue+$/2:o==="end"?J:ue,Re=[],ze=0;ze<S.length;ze++){var ke=S[ze],Ve=ke.getBoundingClientRect(),We=Ve.height,Te=Ve.width,Se=Ve.top,Ae=Ve.right,$e=Ve.bottom,Ge=Ve.left;if(n==="if-needed"&&ee>=0&&ue>=0&&ie<=k&&J<=L&&ee>=Se&&ie<=$e&&ue>=Ge&&J<=Ae)return Re;var Ke=getComputedStyle(ke),Pe=parseInt(Ke.borderLeftWidth,10),at=parseInt(Ke.borderTopWidth,10),Tt=parseInt(Ke.borderRightWidth,10),Le=parseInt(Ke.borderBottomWidth,10),Ye=0,Fe=0,Ze="offsetWidth"in ke?ke.offsetWidth-ke.clientWidth-Pe-Tt:0,tt="offsetHeight"in ke?ke.offsetHeight-ke.clientHeight-at-Le:0,Qe="offsetWidth"in ke?ke.offsetWidth===0?0:Te/ke.offsetWidth:0,Dt="offsetHeight"in ke?ke.offsetHeight===0?0:We/ke.offsetHeight:0;if(x===ke)Ye=i==="start"?le:i==="end"?le-k:i==="nearest"?T2(D,D+k,k,at,Le,D+le,D+le+B,B):le-k/2,Fe=o==="start"?_e:o==="center"?_e-L/2:o==="end"?_e-L:T2(R,R+L,L,Pe,Tt,R+_e,R+_e+$,$),Ye=Math.max(0,Ye+D),Fe=Math.max(0,Fe+R);else{Ye=i==="start"?le-Se-at:i==="end"?le-$e+Le+tt:i==="nearest"?T2(Se,$e,We,at,Le+tt,le,le+B,B):le-(Se+We/2)+tt/2,Fe=o==="start"?_e-Ge-Pe:o==="center"?_e-(Ge+Te/2)+Ze/2:o==="end"?_e-Ae+Tt+Ze:T2(Ge,Ae,Te,Pe,Tt+Ze,_e,_e+$,$);var Kt=ke.scrollLeft,_t=ke.scrollTop;le+=_t-(Ye=Math.max(0,Math.min(_t+Ye/Dt,ke.scrollHeight-We/Dt+tt))),_e+=Kt-(Fe=Math.max(0,Math.min(Kt+Fe/Qe,ke.scrollWidth-Te/Qe+Ze)))}Re.push({el:ke,top:Ye,left:Fe})}return Re};var LI=function(){return LI=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},LI.apply(this,arguments)};var mrr=0;function jI(){}function vrr(r,e){if(!r)return;fBe(r,{boundary:e,block:"nearest",scrollMode:"if-needed"}).forEach(n=>{let{el:i,top:o,left:a}=n;i.scrollTop=o,i.scrollLeft=a})}function hBe(r,e,t){return r===e||e instanceof t.Node&&r.contains&&r.contains(e)}function cY(r,e){let t;function n(){t&&clearTimeout(t)}function i(){for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];n(),t=setTimeout(()=>{t=null,r(...a)},e)}return i.cancel=n,i}function bo(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return e.some(c=>(c&&c(n,...o),n.preventDownshiftDefault||n.hasOwnProperty("nativeEvent")&&n.nativeEvent.preventDownshiftDefault))}}function tf(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return n=>{e.forEach(i=>{typeof i=="function"?i(n):i&&(i.current=n)})}}function grr(){return String(mrr++)}function yrr(r){let{isOpen:e,resultCount:t,previousResultCount:n}=r;return e?t?t!==n?`${t} result${t===1?" is":"s are"} available, use up and down arrow keys to navigate. Press Enter key to select.`:"":"No results are available.":""}function A2(r,e){return Object.keys(r).reduce((t,n)=>(t[n]=_Be(e,n)?e[n]:r[n],t),{})}function _Be(r,e){return r[e]!==void 0}function kI(r){let{key:e,keyCode:t}=r;return t>=37&&t<=40&&e.indexOf("Arrow")!==0?`Arrow${e}`:e}function qI(r,e,t,n,i){if(i===void 0&&(i=!0),t===0)return-1;let o=t-1;(typeof e!="number"||e<0||e>=t)&&(e=r>0?-1:o+1);let a=e+r;a<0?a=i?o:0:a>o&&(a=i?0:o);let c=Uv(r,a,t,n,i);return c===-1?e>=t?-1:e:c}function Uv(r,e,t,n,i){let o=n(e);if(!o||!o.hasAttribute("disabled"))return e;if(r>0){for(let a=e+1;a<t;a++)if(!n(a).hasAttribute("disabled"))return a}else for(let a=e-1;a>=0;a--)if(!n(a).hasAttribute("disabled"))return a;return i?r>0?Uv(1,0,t,n,!1):Uv(-1,t-1,t,n,!1):-1}function pBe(r,e,t,n){return n===void 0&&(n=!0),e.some(i=>i&&(hBe(i,r,t)||n&&hBe(i,t.document.activeElement,t)))}var _rr=cY(r=>{wBe(r).textContent=""},500);function xBe(r,e){let t=wBe(e);r&&(t.textContent=r,_rr(e))}function wBe(r){r===void 0&&(r=document);let e=r.getElementById("a11y-status-message");return e||(e=r.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),r.body.appendChild(e),e)}var bBe={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function xrr(r,e,t){let{props:n,type:i}=r,o={};Object.keys(e).forEach(a=>{wrr(a,r,e,t),t[a]!==e[a]&&(o[a]=t[a])}),n.onStateChange&&Object.keys(o).length&&n.onStateChange(Et({type:i},o))}function wrr(r,e,t,n){let{props:i,type:o}=e,a=`on${hY(r)}Change`;i[a]&&n[r]!==void 0&&n[r]!==t[r]&&i[a](Et({type:o},n))}function brr(r,e){return e.changes}function Srr(r){let{selectedItem:e,itemToString:t}=r;return e?`${t(e)} has been selected.`:""}var Err=cY((r,e)=>{xBe(r(),e)},200),Irr=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?ht.useLayoutEffect:ht.useEffect;function SBe(r){let{id:e=`downshift-${grr()}`,labelId:t,menuId:n,getItemId:i,toggleButtonId:o,inputId:a}=r;return(0,ht.useRef)({labelId:t||`${e}-label`,menuId:n||`${e}-menu`,getItemId:i||(h=>`${e}-item-${h}`),toggleButtonId:o||`${e}-toggle-button`,inputId:a||`${e}-input`}).current}function fY(r,e,t){return r!==void 0?r:t.length===0?-1:t.indexOf(e)}function Trr(r){return r?String(r):""}function dBe(r){return /^\S{1}$/.test(r)}function hY(r){return`${r.slice(0,1).toUpperCase()}${r.slice(1)}`}function P2(r){let e=(0,ht.useRef)(r);return e.current=r,e}function EBe(r,e,t){let n=(0,ht.useRef)(),i=(0,ht.useRef)(),o=(0,ht.useCallback)((x,S)=>{i.current=S,x=A2(x,S.props);let T=r(x,S);return S.props.stateReducer(x,Sn(Et({},S),{changes:T}))},[r]),[a,c]=(0,ht.useReducer)(o,e),h=P2(t),d=(0,ht.useCallback)(x=>c(Et({props:h.current},x)),[h]),v=i.current;return(0,ht.useEffect)(()=>{v&&n.current&&n.current!==a&&xrr(v,A2(n.current,v.props),a),n.current=a},[a,t,v]),[a,d]}function IBe(r,e,t){let[n,i]=EBe(r,e,t);return[A2(n,t),i]}var NI={itemToString:Trr,stateReducer:brr,getA11ySelectionMessage:Srr,scrollIntoView:vrr,circularNavigation:!1,environment:typeof window=="undefined"?{}:window};function os(r,e,t){t===void 0&&(t=bBe);let n=r[`default${hY(e)}`];return n!==void 0?n:t[e]}function DI(r,e,t){t===void 0&&(t=bBe);let n=r[e];if(n!==void 0)return n;let i=r[`initial${hY(e)}`];return i!==void 0?i:os(r,e,t)}function TBe(r){let e=DI(r,"selectedItem"),t=DI(r,"isOpen"),n=DI(r,"highlightedIndex"),i=DI(r,"inputValue");return{highlightedIndex:n<0&&e&&t?r.items.indexOf(e):n,isOpen:t,selectedItem:e,inputValue:i}}function ux(r,e,t,n){let{items:i,initialHighlightedIndex:o,defaultHighlightedIndex:a}=r,{selectedItem:c,highlightedIndex:h}=e;return i.length===0?-1:o!==void 0&&h===o?o:a!==void 0?a:c?t===0?i.indexOf(c):qI(t,i.indexOf(c),i.length,n,!1):t===0?-1:t<0?i.length-1:0}function ABe(r,e,t,n){let i=(0,ht.useRef)({isMouseDown:!1,isTouchMove:!1});return(0,ht.useEffect)(()=>{let o=()=>{i.current.isMouseDown=!0},a=v=>{i.current.isMouseDown=!1,r&&!pBe(v.target,e.map(x=>x.current),t)&&n()},c=()=>{i.current.isTouchMove=!1},h=()=>{i.current.isTouchMove=!0},d=v=>{r&&!i.current.isTouchMove&&!pBe(v.target,e.map(x=>x.current),t,!1)&&n()};return t.addEventListener("mousedown",o),t.addEventListener("mouseup",a),t.addEventListener("touchstart",c),t.addEventListener("touchmove",h),t.addEventListener("touchend",d),function(){t.removeEventListener("mousedown",o),t.removeEventListener("mouseup",a),t.removeEventListener("touchstart",c),t.removeEventListener("touchmove",h),t.removeEventListener("touchend",d)}},[r,t]),i}var pY=()=>jI;function C2(r,e,t){let h=t,{isInitialMount:n,highlightedIndex:i,items:o,environment:a}=h,c=fo(h,["isInitialMount","highlightedIndex","items","environment"]);(0,ht.useEffect)(()=>{n||Err(()=>r(Et({highlightedIndex:i,highlightedItem:o[i],resultCount:o.length},c)),a.document)},e)}function CBe(r){let{highlightedIndex:e,isOpen:t,itemRefs:n,getItemNodeFromIndex:i,menuElement:o,scrollIntoView:a}=r,c=(0,ht.useRef)(!0);return Irr(()=>{e<0||!t||!Object.keys(n.current).length||(c.current===!1?c.current=!0:a(i(e),o))},[e]),c}var dY=jI;function MBe(r,e,t){let{type:n,props:i}=e,o;switch(n){case t.ItemMouseMove:o={highlightedIndex:e.disabled?-1:e.index};break;case t.MenuMouseLeave:o={highlightedIndex:-1};break;case t.ToggleButtonClick:case t.FunctionToggleMenu:o={isOpen:!r.isOpen,highlightedIndex:r.isOpen?-1:ux(i,r,0)};break;case t.FunctionOpenMenu:o={isOpen:!0,highlightedIndex:ux(i,r,0)};break;case t.FunctionCloseMenu:o={isOpen:!1};break;case t.FunctionSetHighlightedIndex:o={highlightedIndex:e.highlightedIndex};break;case t.FunctionSetInputValue:o={inputValue:e.inputValue};break;case t.FunctionReset:o={highlightedIndex:os(i,"highlightedIndex"),isOpen:os(i,"isOpen"),selectedItem:os(i,"selectedItem"),inputValue:os(i,"inputValue")};break;default:throw new Error("Reducer called without proper action type.");}return Et(Et({},r),o)}function mBe(r){for(var e=r.keysSoFar,t=r.highlightedIndex,n=r.items,i=r.itemToString,o=r.getItemNodeFromIndex,a=e.toLowerCase(),c=0;c<n.length;c++){var h=(c+t+1)%n.length,d=n[h];if(d!==void 0&&i(d).toLowerCase().startsWith(a)){var v=o(h);if(!(v!=null&&v.hasAttribute("disabled")))return h}}return t}var A7r={items:wt.default.array.isRequired,itemToString:wt.default.func,getA11yStatusMessage:wt.default.func,getA11ySelectionMessage:wt.default.func,circularNavigation:wt.default.bool,highlightedIndex:wt.default.number,defaultHighlightedIndex:wt.default.number,initialHighlightedIndex:wt.default.number,isOpen:wt.default.bool,defaultIsOpen:wt.default.bool,initialIsOpen:wt.default.bool,selectedItem:wt.default.any,initialSelectedItem:wt.default.any,defaultSelectedItem:wt.default.any,id:wt.default.string,labelId:wt.default.string,menuId:wt.default.string,getItemId:wt.default.func,toggleButtonId:wt.default.string,stateReducer:wt.default.func,onSelectedItemChange:wt.default.func,onHighlightedIndexChange:wt.default.func,onStateChange:wt.default.func,onIsOpenChange:wt.default.func,environment:wt.default.shape({addEventListener:wt.default.func,removeEventListener:wt.default.func,document:wt.default.shape({getElementById:wt.default.func,activeElement:wt.default.any,body:wt.default.any})})};function Arr(r){var e=r.isOpen,t=r.resultCount,n=r.previousResultCount;return e?t?t!==n?"".concat(t," result").concat(t===1?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""}var Crr=LI(LI({},NI),{getA11yStatusMessage:Arr}),Mrr=jI,mY=0,vY=1,gY=2,yY=3,_Y=4,xY=5,wY=6,bY=7,M2=8,RBe=9,PBe=10,SY=11,OBe=12,EY=13,IY=14,TY=15,LBe=16,DBe=17,NBe=18,kBe=19,AY=20,uY=21,qBe=22,jBe=Object.freeze({__proto__:null,MenuKeyDownArrowDown:mY,MenuKeyDownArrowUp:vY,MenuKeyDownEscape:gY,MenuKeyDownHome:yY,MenuKeyDownEnd:_Y,MenuKeyDownEnter:xY,MenuKeyDownSpaceButton:wY,MenuKeyDownCharacter:bY,MenuBlur:M2,MenuMouseLeave:RBe,ItemMouseMove:PBe,ItemClick:SY,ToggleButtonClick:OBe,ToggleButtonKeyDownArrowDown:EY,ToggleButtonKeyDownArrowUp:IY,ToggleButtonKeyDownCharacter:TY,FunctionToggleMenu:LBe,FunctionOpenMenu:DBe,FunctionCloseMenu:NBe,FunctionSetHighlightedIndex:kBe,FunctionSelectItem:AY,FunctionSetInputValue:uY,FunctionReset:qBe});function Rrr(r,e){let{type:t,props:n,shiftKey:i}=e,o;switch(t){case SY:o={isOpen:os(n,"isOpen"),highlightedIndex:os(n,"highlightedIndex"),selectedItem:n.items[e.index]};break;case TY:{let a=e.key,c=`${r.inputValue}${a}`,h=mBe({keysSoFar:c,highlightedIndex:r.selectedItem?n.items.indexOf(r.selectedItem):-1,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:e.getItemNodeFromIndex});o=Et({inputValue:c},h>=0&&{selectedItem:n.items[h]})}break;case EY:o={highlightedIndex:ux(n,r,1,e.getItemNodeFromIndex),isOpen:!0};break;case IY:o={highlightedIndex:ux(n,r,-1,e.getItemNodeFromIndex),isOpen:!0};break;case xY:case wY:o=Et({isOpen:os(n,"isOpen"),highlightedIndex:os(n,"highlightedIndex")},r.highlightedIndex>=0&&{selectedItem:n.items[r.highlightedIndex]});break;case yY:o={highlightedIndex:Uv(1,0,n.items.length,e.getItemNodeFromIndex,!1)};break;case _Y:o={highlightedIndex:Uv(-1,n.items.length-1,n.items.length,e.getItemNodeFromIndex,!1)};break;case gY:o={isOpen:!1,highlightedIndex:-1};break;case M2:o={isOpen:!1,highlightedIndex:-1};break;case bY:{let a=e.key,c=`${r.inputValue}${a}`,h=mBe({keysSoFar:c,highlightedIndex:r.highlightedIndex,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:e.getItemNodeFromIndex});o=Et({inputValue:c},h>=0&&{highlightedIndex:h})}break;case mY:o={highlightedIndex:qI(i?5:1,r.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)};break;case vY:o={highlightedIndex:qI(i?-5:-1,r.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)};break;case AY:o={selectedItem:e.selectedItem};break;default:return MBe(r,e,jBe);}return Et(Et({},r),o)}FBe.stateChangeTypes=jBe;function FBe(r){r===void 0&&(r={}),Mrr(r,FBe);let e=Et(Et({},Crr),r),{items:t,scrollIntoView:n,environment:i,initialIsOpen:o,defaultIsOpen:a,itemToString:c,getA11ySelectionMessage:h,getA11yStatusMessage:d}=e,v=TBe(e),[x,S]=IBe(Rrr,v,e),{isOpen:T,highlightedIndex:L,selectedItem:k,inputValue:R}=x,D=(0,ht.useRef)(null),j=(0,ht.useRef)(null),B=(0,ht.useRef)({}),$=(0,ht.useRef)(!0),ee=(0,ht.useRef)(null),J=SBe(e),ie=(0,ht.useRef)(),ue=(0,ht.useRef)(!0),le=P2({state:x,props:e}),_e=(0,ht.useCallback)(Fe=>B.current[J.getItemId(Fe)],[J]);C2(d,[T,L,R,t],Et({isInitialMount:ue.current,previousResultCount:ie.current,items:t,environment:i,itemToString:c},x)),C2(h,[k],Et({isInitialMount:ue.current,previousResultCount:ie.current,items:t,environment:i,itemToString:c},x));let Re=CBe({menuElement:j.current,highlightedIndex:L,isOpen:T,itemRefs:B,scrollIntoView:n,getItemNodeFromIndex:_e});(0,ht.useEffect)(()=>(ee.current=cY(Fe=>{Fe({type:uY,inputValue:""})},500),()=>{ee.current.cancel()}),[]),(0,ht.useEffect)(()=>{R&&ee.current(S)},[S,R]),dY({isInitialMount:ue.current,props:e,state:x}),(0,ht.useEffect)(()=>{if(ue.current){(o||a||T)&&j.current&&j.current.focus();return}if(T){j.current&&j.current.focus();return}i.document.activeElement===j.current&&D.current&&($.current=!1,D.current.focus())},[T]),(0,ht.useEffect)(()=>{ue.current||(ie.current=t.length)});let ze=ABe(T,[j,D],i,()=>{S({type:M2})}),ke=pY("getMenuProps","getToggleButtonProps");(0,ht.useEffect)(()=>{ue.current=!1},[]),(0,ht.useEffect)(()=>{T||(B.current={})},[T]);let Ve=(0,ht.useMemo)(()=>({ArrowDown(Fe){Fe.preventDefault(),S({type:EY,getItemNodeFromIndex:_e,shiftKey:Fe.shiftKey})},ArrowUp(Fe){Fe.preventDefault(),S({type:IY,getItemNodeFromIndex:_e,shiftKey:Fe.shiftKey})}}),[S,_e]),We=(0,ht.useMemo)(()=>({ArrowDown(Fe){Fe.preventDefault(),S({type:mY,getItemNodeFromIndex:_e,shiftKey:Fe.shiftKey})},ArrowUp(Fe){Fe.preventDefault(),S({type:vY,getItemNodeFromIndex:_e,shiftKey:Fe.shiftKey})},Home(Fe){Fe.preventDefault(),S({type:yY,getItemNodeFromIndex:_e})},End(Fe){Fe.preventDefault(),S({type:_Y,getItemNodeFromIndex:_e})},Escape(){S({type:gY})},Enter(Fe){Fe.preventDefault(),S({type:xY})}," "(Fe){Fe.preventDefault(),S({type:wY})}}),[S,_e]),Te=(0,ht.useCallback)(()=>{S({type:LBe})},[S]),Se=(0,ht.useCallback)(()=>{S({type:NBe})},[S]),Ae=(0,ht.useCallback)(()=>{S({type:DBe})},[S]),$e=(0,ht.useCallback)(Fe=>{S({type:kBe,highlightedIndex:Fe})},[S]),Ge=(0,ht.useCallback)(Fe=>{S({type:AY,selectedItem:Fe})},[S]),Ke=(0,ht.useCallback)(()=>{S({type:qBe})},[S]),Pe=(0,ht.useCallback)(Fe=>{S({type:uY,inputValue:Fe})},[S]),at=(0,ht.useCallback)(Fe=>Et({id:J.labelId,htmlFor:J.toggleButtonId},Fe),[J]),Tt=(0,ht.useCallback)(function(Fe,Ze){let Wt=Fe===void 0?{}:Fe,{onMouseLeave:tt,refKey:Qe="ref",onKeyDown:Dt,onBlur:Kt,ref:_t}=Wt,be=fo(Wt,["onMouseLeave","refKey","onKeyDown","onBlur","ref"]),{suppressRefError:jt=!1}=Ze===void 0?{}:Ze,Qt=le.current.state,Ft=lr=>{let Pr=kI(lr);Pr&&We[Pr]?We[Pr](lr):dBe(Pr)&&S({type:bY,key:Pr,getItemNodeFromIndex:_e})},nr=()=>{if($.current===!1){$.current=!0;return}!ze.current.isMouseDown&&S({type:M2})},or=()=>{S({type:RBe})};return ke("getMenuProps",jt,Qe,j),Et(Sn(Et({[Qe]:tf(_t,lr=>{j.current=lr}),id:J.menuId,role:"listbox","aria-labelledby":J.labelId,tabIndex:-1},Qt.isOpen&&Qt.highlightedIndex>-1&&{"aria-activedescendant":J.getItemId(Qt.highlightedIndex)}),{onMouseLeave:bo(tt,or),onKeyDown:bo(Dt,Ft),onBlur:bo(Kt,nr)}),be)},[S,le,We,ze,ke,J,_e]),Le=(0,ht.useCallback)(function(Fe,Ze){let nr=Fe===void 0?{}:Fe,{onClick:tt,onKeyDown:Qe,refKey:Dt="ref",ref:Kt}=nr,_t=fo(nr,["onClick","onKeyDown","refKey","ref"]),{suppressRefError:be=!1}=Ze===void 0?{}:Ze,jt=()=>{S({type:OBe})},Qt=or=>{let Wt=kI(or);Wt&&Ve[Wt]?Ve[Wt](or):dBe(Wt)&&S({type:TY,key:Wt,getItemNodeFromIndex:_e})},Ft=Et({[Dt]:tf(Kt,or=>{D.current=or}),id:J.toggleButtonId,"aria-haspopup":"listbox","aria-expanded":le.current.state.isOpen,"aria-labelledby":`${J.labelId} ${J.toggleButtonId}`},_t);return _t.disabled||(Ft.onClick=bo(tt,jt),Ft.onKeyDown=bo(Qe,Qt)),ke("getToggleButtonProps",be,Dt,D),Ft},[S,le,Ve,ke,J,_e]),Ye=(0,ht.useCallback)(function(Fe){let Pr=Fe===void 0?{}:Fe,{item:Ze,index:tt,onMouseMove:Qe,onClick:Dt,refKey:Kt="ref",ref:_t,disabled:be}=Pr,jt=fo(Pr,["item","index","onMouseMove","onClick","refKey","ref","disabled"]),{state:Qt,props:Ft}=le.current,nr=()=>{tt!==Qt.highlightedIndex&&(Re.current=!1,S({type:PBe,index:tt,disabled:be}))},or=()=>{S({type:SY,index:tt})},Wt=fY(tt,Ze,Ft.items);if(Wt<0)throw new Error("Pass either item or item index in getItemProps!");let lr=Et({disabled:be,role:"option","aria-selected":`${Wt===Qt.highlightedIndex}`,id:J.getItemId(Wt),[Kt]:tf(_t,en=>{en&&(B.current[J.getItemId(Wt)]=en)})},jt);return be||(lr.onClick=bo(Dt,or)),lr.onMouseMove=bo(Qe,nr),lr},[S,le,Re,J]);return{getToggleButtonProps:Le,getLabelProps:at,getMenuProps:Tt,getItemProps:Ye,toggleMenu:Te,openMenu:Ae,closeMenu:Se,setHighlightedIndex:$e,selectItem:Ge,reset:Ke,setInputValue:Pe,highlightedIndex:L,isOpen:T,selectedItem:k,inputValue:R}}var CY=0,MY=1,RY=2,PY=3,OY=4,LY=5,DY=6,R2=7,zBe=8,BBe=9,NY=10,UBe=11,VBe=12,GBe=13,$Be=14,HBe=15,kY=16,WBe=17,ZBe=18,qY=19,YBe=Object.freeze({__proto__:null,InputKeyDownArrowDown:CY,InputKeyDownArrowUp:MY,InputKeyDownEscape:RY,InputKeyDownHome:PY,InputKeyDownEnd:OY,InputKeyDownEnter:LY,InputChange:DY,InputBlur:R2,MenuMouseLeave:zBe,ItemMouseMove:BBe,ItemClick:NY,ToggleButtonClick:UBe,FunctionToggleMenu:VBe,FunctionOpenMenu:GBe,FunctionCloseMenu:$Be,FunctionSetHighlightedIndex:HBe,FunctionSelectItem:kY,FunctionSetInputValue:WBe,FunctionReset:ZBe,ControlledPropUpdatedSelectedItem:qY});function Prr(r){let e=TBe(r),{selectedItem:t}=e,{inputValue:n}=e;return n===""&&t&&r.defaultInputValue===void 0&&r.initialInputValue===void 0&&r.inputValue===void 0&&(n=r.itemToString(t)),Sn(Et({},e),{inputValue:n})}var C7r={items:wt.default.array.isRequired,itemToString:wt.default.func,getA11yStatusMessage:wt.default.func,getA11ySelectionMessage:wt.default.func,circularNavigation:wt.default.bool,highlightedIndex:wt.default.number,defaultHighlightedIndex:wt.default.number,initialHighlightedIndex:wt.default.number,isOpen:wt.default.bool,defaultIsOpen:wt.default.bool,initialIsOpen:wt.default.bool,selectedItem:wt.default.any,initialSelectedItem:wt.default.any,defaultSelectedItem:wt.default.any,inputValue:wt.default.string,defaultInputValue:wt.default.string,initialInputValue:wt.default.string,id:wt.default.string,labelId:wt.default.string,menuId:wt.default.string,getItemId:wt.default.func,inputId:wt.default.string,toggleButtonId:wt.default.string,stateReducer:wt.default.func,onSelectedItemChange:wt.default.func,onHighlightedIndexChange:wt.default.func,onStateChange:wt.default.func,onIsOpenChange:wt.default.func,onInputValueChange:wt.default.func,environment:wt.default.shape({addEventListener:wt.default.func,removeEventListener:wt.default.func,document:wt.default.shape({getElementById:wt.default.func,activeElement:wt.default.any,body:wt.default.any})})};function Orr(r,e,t){let n=(0,ht.useRef)(),[i,o]=EBe(r,e,t);return(0,ht.useEffect)(()=>{_Be(t,"selectedItem")&&(n.current!==t.selectedItem&&o({type:qY,inputValue:t.itemToString(t.selectedItem)}),n.current=i.selectedItem===n.current?t.selectedItem:i.selectedItem)}),[A2(i,t),o]}var Lrr=jI,Drr=Sn(Et({},NI),{getA11yStatusMessage:yrr,circularNavigation:!0});function Nrr(r,e){let{type:t,props:n,shiftKey:i}=e,o;switch(t){case NY:o={isOpen:os(n,"isOpen"),highlightedIndex:os(n,"highlightedIndex"),selectedItem:n.items[e.index],inputValue:n.itemToString(n.items[e.index])};break;case CY:r.isOpen?o={highlightedIndex:qI(i?5:1,r.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)}:o={highlightedIndex:ux(n,r,1,e.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case MY:r.isOpen?o={highlightedIndex:qI(i?-5:-1,r.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)}:o={highlightedIndex:ux(n,r,-1,e.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case LY:o=Et({},r.isOpen&&r.highlightedIndex>=0&&{selectedItem:n.items[r.highlightedIndex],isOpen:os(n,"isOpen"),highlightedIndex:os(n,"highlightedIndex"),inputValue:n.itemToString(n.items[r.highlightedIndex])});break;case RY:o=Et({isOpen:!1,highlightedIndex:-1},!r.isOpen&&{selectedItem:null,inputValue:""});break;case PY:o={highlightedIndex:Uv(1,0,n.items.length,e.getItemNodeFromIndex,!1)};break;case OY:o={highlightedIndex:Uv(-1,n.items.length-1,n.items.length,e.getItemNodeFromIndex,!1)};break;case R2:o=Et({isOpen:!1,highlightedIndex:-1},r.highlightedIndex>=0&&e.selectItem&&{selectedItem:n.items[r.highlightedIndex],inputValue:n.itemToString(n.items[r.highlightedIndex])});break;case DY:o={isOpen:!0,highlightedIndex:os(n,"highlightedIndex"),inputValue:e.inputValue};break;case kY:o={selectedItem:e.selectedItem,inputValue:n.itemToString(e.selectedItem)};break;case qY:o={inputValue:e.inputValue};break;default:return MBe(r,e,YBe);}return Et(Et({},r),o)}O2.stateChangeTypes=YBe;function O2(r){r===void 0&&(r={}),Lrr(r,O2);let e=Et(Et({},Drr),r),{initialIsOpen:t,defaultIsOpen:n,items:i,scrollIntoView:o,environment:a,getA11yStatusMessage:c,getA11ySelectionMessage:h,itemToString:d}=e,v=Prr(e),[x,S]=Orr(Nrr,v,e),{isOpen:T,highlightedIndex:L,selectedItem:k,inputValue:R}=x,D=(0,ht.useRef)(null),j=(0,ht.useRef)({}),B=(0,ht.useRef)(null),$=(0,ht.useRef)(null),ee=(0,ht.useRef)(null),J=(0,ht.useRef)(!0),ie=SBe(e),ue=(0,ht.useRef)(),le=P2({state:x,props:e}),_e=(0,ht.useCallback)(Ze=>j.current[ie.getItemId(Ze)],[ie]);C2(c,[T,L,R,i],Et({isInitialMount:J.current,previousResultCount:ue.current,items:i,environment:a,itemToString:d},x)),C2(h,[k],Et({isInitialMount:J.current,previousResultCount:ue.current,items:i,environment:a,itemToString:d},x));let Re=CBe({menuElement:D.current,highlightedIndex:L,isOpen:T,itemRefs:j,scrollIntoView:o,getItemNodeFromIndex:_e});dY({isInitialMount:J.current,props:e,state:x}),(0,ht.useEffect)(()=>{(t||n||T)&&B.current&&B.current.focus()},[]),(0,ht.useEffect)(()=>{J.current||(ue.current=i.length)});let ze=ABe(T,[ee,D,$],a,()=>{S({type:R2,selectItem:!1})}),ke=pY("getInputProps","getComboboxProps","getMenuProps");(0,ht.useEffect)(()=>{J.current=!1},[]),(0,ht.useEffect)(()=>{T||(j.current={})},[T]);let Ve=(0,ht.useMemo)(()=>({ArrowDown(Ze){Ze.preventDefault(),S({type:CY,shiftKey:Ze.shiftKey,getItemNodeFromIndex:_e})},ArrowUp(Ze){Ze.preventDefault(),S({type:MY,shiftKey:Ze.shiftKey,getItemNodeFromIndex:_e})},Home(Ze){le.current.state.isOpen&&(Ze.preventDefault(),S({type:PY,getItemNodeFromIndex:_e}))},End(Ze){le.current.state.isOpen&&(Ze.preventDefault(),S({type:OY,getItemNodeFromIndex:_e}))},Escape(Ze){let tt=le.current.state;(tt.isOpen||tt.inputValue||tt.selectedItem||tt.highlightedIndex>-1)&&(Ze.preventDefault(),S({type:RY}))},Enter(Ze){let tt=le.current.state;!tt.isOpen||tt.highlightedIndex<0||Ze.which===229||(Ze.preventDefault(),S({type:LY,getItemNodeFromIndex:_e}))}}),[S,le,_e]),We=(0,ht.useCallback)(Ze=>Et({id:ie.labelId,htmlFor:ie.inputId},Ze),[ie]),Te=(0,ht.useCallback)(function(Ze,tt){let jt=Ze===void 0?{}:Ze,{onMouseLeave:Qe,refKey:Dt="ref",ref:Kt}=jt,_t=fo(jt,["onMouseLeave","refKey","ref"]),{suppressRefError:be=!1}=tt===void 0?{}:tt;return ke("getMenuProps",be,Dt,D),Et({[Dt]:tf(Kt,Qt=>{D.current=Qt}),id:ie.menuId,role:"listbox","aria-labelledby":ie.labelId,onMouseLeave:bo(Qe,()=>{S({type:zBe})})},_t)},[S,ke,ie]),Se=(0,ht.useCallback)(function(Ze){let Qn=Ze===void 0?{}:Ze,{item:tt,index:Qe,refKey:Dt="ref",ref:Kt,onMouseMove:_t,onMouseDown:be,onClick:jt,onPress:Qt,disabled:Ft}=Qn,nr=fo(Qn,["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"]),{props:or,state:Wt}=le.current,lr=fY(Qe,tt,or.items);if(lr<0)throw new Error("Pass either item or item index in getItemProps!");let Pr="onClick",en=jt,ai=()=>{Qe!==Wt.highlightedIndex&&(Re.current=!1,S({type:BBe,index:Qe,disabled:Ft}))},Ii=()=>{S({type:NY,index:Qe})},nt=An=>An.preventDefault();return Et(Sn(Et({[Dt]:tf(Kt,An=>{An&&(j.current[ie.getItemId(lr)]=An)}),disabled:Ft,role:"option","aria-selected":`${lr===Wt.highlightedIndex}`,id:ie.getItemId(lr)},!Ft&&{[Pr]:bo(en,Ii)}),{onMouseMove:bo(_t,ai),onMouseDown:bo(be,nt)}),nr)},[S,le,Re,ie]),Ae=(0,ht.useCallback)(function(Ze){let jt=Ze===void 0?{}:Ze,{onClick:tt,onPress:Qe,refKey:Dt="ref",ref:Kt}=jt,_t=fo(jt,["onClick","onPress","refKey","ref"]),be=()=>{S({type:UBe}),!le.current.state.isOpen&&B.current&&B.current.focus()};return Et(Et({[Dt]:tf(Kt,Qt=>{$.current=Qt}),id:ie.toggleButtonId,tabIndex:-1},!_t.disabled&&{onClick:bo(tt,be)}),_t)},[S,le,ie]),$e=(0,ht.useCallback)(function(Ze,tt){let Ii=Ze===void 0?{}:Ze,{onKeyDown:Qe,onChange:Dt,onInput:Kt,onBlur:_t,onChangeText:be,refKey:jt="ref",ref:Qt}=Ii,Ft=fo(Ii,["onKeyDown","onChange","onInput","onBlur","onChangeText","refKey","ref"]),{suppressRefError:nr=!1}=tt===void 0?{}:tt;ke("getInputProps",nr,jt,B);let or=le.current.state,Wt=nt=>{let Qn=kI(nt);Qn&&Ve[Qn]&&Ve[Qn](nt)},lr=nt=>{S({type:DY,inputValue:nt.target.value})},Pr=()=>{or.isOpen&&!ze.current.isMouseDown&&S({type:R2,selectItem:!0})},en="onChange",ai={};return Ft.disabled||(ai={[en]:bo(Dt,Kt,lr),onKeyDown:bo(Qe,Wt),onBlur:bo(_t,Pr)}),Et(Et(Sn(Et({[jt]:tf(Qt,nt=>{B.current=nt}),id:ie.inputId,"aria-autocomplete":"list","aria-controls":ie.menuId},or.isOpen&&or.highlightedIndex>-1&&{"aria-activedescendant":ie.getItemId(or.highlightedIndex)}),{"aria-labelledby":ie.labelId,autoComplete:"off",value:or.inputValue}),ai),Ft)},[S,Ve,le,ze,ke,ie]),Ge=(0,ht.useCallback)(function(Ze,tt){let be=Ze===void 0?{}:Ze,{refKey:Qe="ref",ref:Dt}=be,Kt=fo(be,["refKey","ref"]),{suppressRefError:_t=!1}=tt===void 0?{}:tt;return ke("getComboboxProps",_t,Qe,ee),Et({[Qe]:tf(Dt,jt=>{ee.current=jt}),role:"combobox","aria-haspopup":"listbox","aria-owns":ie.menuId,"aria-expanded":le.current.state.isOpen},Kt)},[le,ke,ie]),Ke=(0,ht.useCallback)(()=>{S({type:VBe})},[S]),Pe=(0,ht.useCallback)(()=>{S({type:$Be})},[S]),at=(0,ht.useCallback)(()=>{S({type:GBe})},[S]),Tt=(0,ht.useCallback)(Ze=>{S({type:HBe,highlightedIndex:Ze})},[S]),Le=(0,ht.useCallback)(Ze=>{S({type:kY,selectedItem:Ze})},[S]),Ye=(0,ht.useCallback)(Ze=>{S({type:WBe,inputValue:Ze})},[S]),Fe=(0,ht.useCallback)(()=>{S({type:ZBe})},[S]);return{getItemProps:Se,getLabelProps:We,getMenuProps:Te,getInputProps:$e,getComboboxProps:Ge,getToggleButtonProps:Ae,toggleMenu:Ke,openMenu:at,closeMenu:Pe,setHighlightedIndex:Tt,setInputValue:Ye,selectItem:Le,reset:Fe,highlightedIndex:L,isOpen:T,selectedItem:k,inputValue:R}}var KBe={activeIndex:-1,selectedItems:[]};function vBe(r,e){return DI(r,e,KBe)}function gBe(r,e){return os(r,e,KBe)}function krr(r){let e=vBe(r,"activeIndex"),t=vBe(r,"selectedItems");return{activeIndex:e,selectedItems:t}}function yBe(r){if(r.shiftKey||r.metaKey||r.ctrlKey||r.altKey)return!1;let e=r.target;return!(e instanceof HTMLInputElement&&e.value!==""&&(e.selectionStart!==0||e.selectionEnd!==0))}function qrr(r){let{removedSelectedItem:e,itemToString:t}=r;return`${t(e)} has been removed.`}var M7r={selectedItems:wt.default.array,initialSelectedItems:wt.default.array,defaultSelectedItems:wt.default.array,itemToString:wt.default.func,getA11yRemovalMessage:wt.default.func,stateReducer:wt.default.func,activeIndex:wt.default.number,initialActiveIndex:wt.default.number,defaultActiveIndex:wt.default.number,onActiveIndexChange:wt.default.func,onSelectedItemsChange:wt.default.func,keyNavigationNext:wt.default.string,keyNavigationPrevious:wt.default.string,environment:wt.default.shape({addEventListener:wt.default.func,removeEventListener:wt.default.func,document:wt.default.shape({getElementById:wt.default.func,activeElement:wt.default.any,body:wt.default.any})})},jrr={itemToString:NI.itemToString,stateReducer:NI.stateReducer,environment:NI.environment,getA11yRemovalMessage:qrr,keyNavigationNext:"ArrowRight",keyNavigationPrevious:"ArrowLeft"},Frr=jI,jY=0,FY=1,zY=2,BY=3,UY=4,VY=5,GY=6,$Y=7,HY=8,WY=9,ZY=10,YY=11,KY=12,zrr=Object.freeze({__proto__:null,SelectedItemClick:jY,SelectedItemKeyDownDelete:FY,SelectedItemKeyDownBackspace:zY,SelectedItemKeyDownNavigationNext:BY,SelectedItemKeyDownNavigationPrevious:UY,DropdownKeyDownNavigationPrevious:VY,DropdownKeyDownBackspace:GY,DropdownClick:$Y,FunctionAddSelectedItem:HY,FunctionRemoveSelectedItem:WY,FunctionSetSelectedItems:ZY,FunctionSetActiveIndex:YY,FunctionReset:KY});function Brr(r,e){let{type:t,index:n,props:i,selectedItem:o}=e,{activeIndex:a,selectedItems:c}=r,h;switch(t){case jY:h={activeIndex:n};break;case UY:h={activeIndex:a-1<0?0:a-1};break;case BY:h={activeIndex:a+1>=c.length?-1:a+1};break;case zY:case FY:{let d=a;c.length===1?d=-1:a===c.length-1&&(d=c.length-2),h={selectedItems:[...c.slice(0,a),...c.slice(a+1)],activeIndex:d};break}case VY:h={activeIndex:c.length-1};break;case GY:h={selectedItems:c.slice(0,c.length-1)};break;case HY:h={selectedItems:[...c,o]};break;case $Y:h={activeIndex:-1};break;case WY:{let d=a,v=c.indexOf(o);v>=0&&(c.length===1?d=-1:v===c.length-1&&(d=c.length-2),h={selectedItems:[...c.slice(0,v),...c.slice(v+1)],activeIndex:d});break}case ZY:{let{selectedItems:d}=e;h={selectedItems:d};break}case YY:{let{activeIndex:d}=e;h={activeIndex:d};break}case KY:h={activeIndex:gBe(i,"activeIndex"),selectedItems:gBe(i,"selectedItems")};break;default:throw new Error("Reducer called without proper action type.");}return Et(Et({},r),h)}XBe.stateChangeTypes=zrr;function XBe(r){r===void 0&&(r={}),Frr(r,XBe);let e=Et(Et({},jrr),r),{getA11yRemovalMessage:t,itemToString:n,environment:i,keyNavigationNext:o,keyNavigationPrevious:a}=e,[c,h]=IBe(Brr,krr(e),e),{activeIndex:d,selectedItems:v}=c,x=(0,ht.useRef)(!0),S=(0,ht.useRef)(null),T=(0,ht.useRef)(v),L=(0,ht.useRef)();L.current=[];let k=P2({state:c,props:e});(0,ht.useEffect)(()=>{if(!x.current){if(v.length<T.current.length){let _e=T.current.find(Re=>v.indexOf(Re)<0);xBe(t({itemToString:n,resultCount:v.length,removedSelectedItem:_e,activeIndex:d,activeSelectedItem:v[d]}),i.document)}T.current=v}},[v.length]),(0,ht.useEffect)(()=>{x.current||(d===-1&&S.current?S.current.focus():L.current[d]&&L.current[d].focus())},[d]),dY({isInitialMount:x.current,props:e,state:c});let R=pY("getDropdownProps");(0,ht.useEffect)(()=>{x.current=!1},[]);let D=(0,ht.useMemo)(()=>({[a](){h({type:UY})},[o](){h({type:BY})},Delete(){h({type:FY})},Backspace(){h({type:zY})}}),[h,o,a]),j=(0,ht.useMemo)(()=>({[a](_e){yBe(_e)&&h({type:VY})},Backspace(_e){yBe(_e)&&h({type:GY})}}),[h,a]),B=(0,ht.useCallback)(function(_e){let Pe=_e===void 0?{}:_e,{refKey:Re="ref",ref:ze,onClick:ke,onKeyDown:Ve,selectedItem:We,index:Te}=Pe,Se=fo(Pe,["refKey","ref","onClick","onKeyDown","selectedItem","index"]),{state:Ae}=k.current;if(fY(Te,We,Ae.selectedItems)<0)throw new Error("Pass either selectedItem or index in getSelectedItemProps!");let Ge=()=>{h({type:jY,index:Te})},Ke=at=>{let Tt=kI(at);Tt&&D[Tt]&&D[Tt](at)};return Et({[Re]:tf(ze,at=>{at&&L.current.push(at)}),tabIndex:Te===Ae.activeIndex?0:-1,onClick:bo(ke,Ge),onKeyDown:bo(Ve,Ke)},Se)},[h,k,D]),$=(0,ht.useCallback)(function(_e,Re){let Ke=_e===void 0?{}:_e,{refKey:ze="ref",ref:ke,onKeyDown:Ve,onClick:We,preventKeyAction:Te=!1}=Ke,Se=fo(Ke,["refKey","ref","onKeyDown","onClick","preventKeyAction"]),{suppressRefError:Ae=!1}=Re===void 0?{}:Re;R("getDropdownProps",Ae,ze,S);let $e=Pe=>{let at=kI(Pe);at&&j[at]&&j[at](Pe)},Ge=()=>{h({type:$Y})};return Et(Et({[ze]:tf(ke,Pe=>{Pe&&(S.current=Pe)})},!Te&&{onKeyDown:bo(Ve,$e),onClick:bo(We,Ge)}),Se)},[h,j,R]),ee=(0,ht.useCallback)(_e=>{h({type:HY,selectedItem:_e})},[h]),J=(0,ht.useCallback)(_e=>{h({type:WY,selectedItem:_e})},[h]),ie=(0,ht.useCallback)(_e=>{h({type:ZY,selectedItems:_e})},[h]),ue=(0,ht.useCallback)(_e=>{h({type:YY,activeIndex:_e})},[h]),le=(0,ht.useCallback)(()=>{h({type:KY})},[h]);return{getSelectedItemProps:B,getDropdownProps:$,addSelectedItem:ee,removeSelectedItem:J,setSelectedItems:ie,setActiveIndex:ue,reset:le,selectedItems:v,activeIndex:d}}var Bd=Me(Jr(),1);function XY({buttonProps:r,fetchInputItems:e,label:t,itemToString:n,inputProps:i,onSelectedItemChange:o,timeout:a=300}){let[c,h]=(0,as.useState)([]),[d,v]=(0,as.useState)(void 0),x=(0,as.useRef)(),S=(0,as.useRef)(null),T=Ve=>{clearTimeout(S.current),S.current=setTimeout(()=>{e(Ve).then(We=>h(We))},a)},L=({inputValue:Ve})=>{d!==void 0&&v(void 0),T(Ve)},k=({selectedItem:Ve})=>{o!==void 0&&o(Ve),v(Ve)},{isOpen:R,getToggleButtonProps:D,getLabelProps:j,getMenuProps:B,getInputProps:$,getComboboxProps:ee,getItemProps:J,highlightedIndex:ie}=O2({items:c,itemToString:n,onInputValueChange:L,onSelectedItemChange:k}),ze=r!=null?r:{},{onClick:ue}=ze,le=fo(ze,["onClick"]),ke=$(),{ref:_e}=ke,Re=fo(ke,["ref"]);return as.default.createElement("div",{className:"vkf-autocomplete-container"},as.default.createElement("label",Sn(Et({},j()),{id:Re["aria-labelledby"],className:"visually-hidden"}),t!==void 0?t:i.placeholder),as.default.createElement("div",Et({className:"form-group"},ee()),as.default.createElement("input",Et(Sn(Et({},Re),{ref:Ve=>{_e(Ve),x.current=Ve},type:"text"}),i)),as.default.createElement("button",Et(Et(Sn(Et({type:"button"},D()),{"aria-label":"toggle menu"}),le),ue!==void 0?{onClick:()=>{ue(d,x.current!==null?x.current.value:"")}}:{}),"\u2193")),as.default.createElement("div",{className:"autocomplete-dropdown"},as.default.createElement("ul",Sn(Et({className:"autocomplete-result-list"},B()),{id:Re["aria-controls"]}),R&&c.map((Ve,We)=>as.default.createElement("li",Et({className:Ps("ui-menu-item",ie===We&&"highlighted",d===Ve&&"selected"),key:`${Ve.label}${We}`},J({item:Ve,index:We})),Ve.label)))))}XY.propTypes={buttonProps:Bd.default.object,fetchInputItems:Bd.default.func,label:Bd.default.string,inputProps:Bd.default.object,itemToString:Bd.default.func,onSelectedItemChange:Bd.default.func,timeout:Bd.default.number};var JBe=Me(vS(),1),JY=(r,e,t)=>{let n=r+"?format=json&q="+e;return JBe.default.get(n).then(i=>{let a=i.data.map(c=>({label:c.display_name,value:c.display_name,lonlat:{x:parseFloat(c.lon),y:parseFloat(c.lat)},type:c.type}));return t!==void 0&&t(),a})};var Urr=r=>r?r.label:"",QBe=r=>{let{onSelectPosition:e,searchUrl:t}=r,[n,i]=(0,Vv.useState)(!1),o=eu(ld),a=(0,Vv.useCallback)(h=>(i(!0),JY(t,h,()=>{i(!1)})),[t]),c=(h,d)=>{h!==void 0?e(h):JY(t,d).then(v=>{if(v.length>0)e(v[0]);else throw new Error(Tr("placenamesearch-unknown-placename"))}).catch(()=>{o({id:"placenamesearch",type:"warning",text:Tr("placenamesearch-unknown-placename")})})};return Vv.default.createElement("div",{className:"gazetteersearch-container"},Vv.default.createElement(XY,{buttonProps:{className:"form-control gazetteersearch-submit",onClick:c,"aria-label":Tr("placenamesearch-submit"),title:Tr("placenamesearch-submit")},fetchInputItems:a,inputProps:{className:`form-control gazetteersearch-input ${n?"loading":""}`,placeholder:Tr("placenamesearch-placeholder")},itemToString:Urr,onSelectedItemChange:c}))};QBe.propTypes={onSelectPosition:QY.default.func.isRequired,searchUrl:QY.default.string.isRequired};var eUe=QBe;var Su=Me(dt(),1),cx=Me(Jr(),1);var tUe=r=>{let{onEndDrag:e,onStartDrag:t,orientation:n="horizontal",layer:i}=r,[o,a]=(0,Su.useState)(i.getOpacity()*100),c=(0,Su.useRef)(null),h=0,d=100,v=(T,L)=>{if(n==="vertical"){var k=100-(T-h)/(d-h)*100;L.style.top=k+"%",L.innerHTML=T.toFixed(0)+"%";return}let R=(T-h)/(d-h)*100;L.style.left=R+"%",L.innerHTML=T+"%"},x=T=>{let L=T.target.getOpacity()*100;a(L)},S=T=>{a(T),i.setOpacity(T/100)};return(0,Su.useEffect)(()=>{v(Math.round(o),c.current)},[o]),(0,Su.useEffect)(()=>(i.on("change:opacity",x),()=>{i.un("change:opacity",x)})),Su.default.createElement("div",{className:"opacity-container"},Su.default.createElement("div",{className:"slider-container"},Su.default.createElement(b2,{onAfterChange:e,onBeforeChange:t,onChange:S,value:o,vertical:n==="vertical"}),Su.default.createElement("div",{className:"tooltip value",ref:c},"100%")))};tUe.propTypes={onEndDrag:cx.default.func,onStartDrag:cx.default.func,layer:cx.default.oneOfType([cx.default.instanceOf(Bv)]),orientation:cx.default.oneOf(["horizontal","vertical"])};var rUe=tUe;var nUe=r=>{let{extent:e,urlNominatim:t,urlsOsmBaseMap:n}=r,i=Ql(wO),[o,a]=(0,rf.useState)(null),[c,h]=yO(SO);return rf.default.createElement("div",{className:"vkf-mapview-target"},rf.default.createElement(K4e,{extent:e,onLoad:v=>h(v),urlNominatim:t,urlsOsmBaseMap:n},c!==null&&rf.default.createElement("div",null,rf.default.createElement("div",{className:"placenamesearch-container"},rf.default.createElement(eUe,{onSelectPosition:v=>{let[x,S]=[v.lonlat.x,v.lonlat.y],k=Ku([parseFloat(x),parseFloat(S)],"EPSG:4326","EPSG:3857");if(c!=null&&c.map){let R=c.map.getView();R.setCenter(k),R.setZoom(12)}},searchUrl:no.getNominatimUrl()})),o!==null&&rf.default.createElement(rUe,{layer:o,orientation:"vertical"}))),c!==null&&i!==null&&rf.default.createElement(eBe,{key:i.wms_url,map:c.map,layerName:i.layer_name,onLoad:v=>a(v),wmsUrl:i.wms_url}))};nUe.propTypes={extent:fx.default.arrayOf(fx.default.number),urlNominatim:fx.default.string,urlsOsmBaseMap:fx.default.arrayOf(fx.default.string)};var iUe=nUe;var oUe=Me(vS(),1);function aUe(r){return ho(this,null,function*(){let e=no.getSettings().API_SEARCH;if(e===void 0)throw new Error("The url for the search endpoint is not set.");let t=yield oUe.default.get(`${e}/_doc/${r}`);if(t.status===200)return t.data._source;console.error("Something went wrong while trying to fetch search document.")})}var Vrr=r=>{var e,t,n,i;return{map_id:r.map_id,clip:(r==null?void 0:r.clip)!==void 0&&r.clip!==null?{type:r.clip.type,coordinates:r.clip.coordinates}:void 0,overwrites:r.transformation_id,params:{algorithm:(t=(e=r==null?void 0:r.params)==null?void 0:e.algorithm)!=null?t:"affine",gcps:(i=(n=r==null?void 0:r.params)==null?void 0:n.gcps)!=null?i:[]}}},lUe=r=>{let{urlsOsmBaseMap:e,urlNominatim:t}=r,n=eu(EO),i=eu(xO),o=eu(ld),a=Ql(_O),[c,h]=(0,Eu.useState)(null),[d,v]=(0,Eu.useState)(!1);return(0,Eu.useEffect)(()=>ho(void 0,null,function*(){let x=sUe.default.parse(location.search);if(x.map_id!==void 0){let{transformations:S,additional_properties:T}=yield xRe(x.map_id),{active_transformation_id:L,extent:k,pending_jobs:R}=T,D=yield aUe(x.map_id),j=k!==null?nje(k):null;R&&o({id:"georeference-view",type:"warning",text:"F\xFCr diese Karte existieren bisher noch unverarbeitete Georeferenzierung."});let B=x.transformation_id!==void 0?parseInt(x.transformation_id):L;if(S.length>0&&B!==null){let $=S.find(ee=>ee.transformation_id===B);j=rje($),n(Vrr($))}else if(L===null)n({map_id:x.map_id,clip:null,overwrites:0,params:{algorithm:"affine",gcps:[]}});else throw new Error("This transformation type is not supported yet.");i(D),h(j),v(!0)}}),[]),Eu.default.createElement("div",{className:"vkf-georeference-view"},Eu.default.createElement("div",{className:"outer-map-container"},Eu.default.createElement($4e,null)),Eu.default.createElement("div",{className:"outer-map-container"},d&&Eu.default.createElement(iUe,{extent:c!==null?c:void 0,urlsOsmBaseMap:e,urlNominatim:t})),a&&Eu.default.createElement(sje,null))};lUe.propTypes={urlsOsmBaseMap:L2.default.arrayOf(L2.default.string).isRequired,urlNominatim:L2.default.string.isRequired};var uUe=lUe;var bl=Me(dt(),1);var D2=Me(Jr(),1);var cUe=r=>{let{onClose:e,text:t,type:n}=r;return bl.default.createElement("div",{className:"notification-item"},bl.default.createElement("div",{className:Ps("alert","alert-"+n),role:"alert"},bl.default.createElement("div",{className:"close"},bl.default.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:e},bl.default.createElement("span",{"aria-hidden":"true"},"\xD7"))),bl.default.createElement("div",{className:"text"},t)))};cUe.propTypes={onClose:D2.default.func,text:D2.default.string,type:D2.default.string};var Grr=()=>{let r=Ql(ld),e=nD(r),[t,n]=(0,bl.useState)([]);return(0,bl.useEffect)(()=>{if(r!==null&&r.id!==null&&r!==e){let i=[...t],o=t.findIndex(a=>a.id===r.id);o>-1?i.splice(o,1,r.text!==null?r:void 0):i.splice(0,0,r),n(i.filter(a=>a!==void 0))}},[r,t,e]),bl.default.createElement("div",{className:Ps("vkf-notifications",t.length===0?"hide":"")},t.map(({type:i,text:o},a)=>bl.default.createElement(cUe,{key:a,onClose:()=>{let c=[...t];c.splice(a,1),n(c)},type:i,text:o})))},fUe=Grr;var hUe=fUe;var $rr=()=>Gv.default.createElement(tRe,null,Gv.default.createElement("div",{className:"vk-app-georeferencer"},Gv.default.createElement("div",null,Gv.default.createElement(oje,null),Gv.default.createElement(uUe,{urlsOsmBaseMap:no.getDefaultBaseMapUrls(),urlNominatim:no.getNominatimUrl()}),Gv.default.createElement(hUe,null)))),pUe=$rr;var Hrr=no;function Wrr(r){mUe.default.render(dUe.default.createElement(pUe,null),r)}return mVe(Zrr)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.0/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

keycode/index.js:
  (*!
   * Programatically add the following
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v17.0.2
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

@babel/runtime/helpers/esm/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE *)
*/